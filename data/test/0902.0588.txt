{
  "article_text": [
    "muse is planned to be a giant integral field spectrograph and going to be commissioned as a second generation vlt instrument starting in 2012 .",
    "its 1@xmath01field of view is sampled at 02 resolution in wide - field mode . in the adaptive - optics supported mode , observing in a narrow - field mode with sampling at 075 is possible .",
    "each exposure delivers about 90000 spectra , using 24 slicer integral field units ( ifus ) , each equipped with a separate 4k@xmath1 ccd . the full wavelength range from 465 to 930 nm is covered with resolution between 2000 and 4000 .",
    "the light at the vlt focal plane is divided into 24 sub - fields , each of which has a size of 60@xmath025 on the sky . within each ifu ,",
    "the sub - field is then further decomposed into 48 slices .",
    "each slice has a size of 15@xmath0@xmath202 on the sky .",
    "the spectrograph in each ifu disperses the light and focuses the spectral pattern on a 4k@xmath04k ccd .",
    "this means that the data appears on the ccds as 48 strips of spectra which are 75px wide and 4096px high . in between these strips of data ,",
    "dark regions of @xmath26px width can be used to identify stray - light .",
    "each raw exposure has a size of roughly 800 mb ; by using the full capabilities of the euro3d format , a processed exposure can require about 4.5 gb of storage .",
    "typical observing nights will have 50 gb of raw data per night ( calibrations plus science exposures ) , but the data rate may be as high as 150 gb per night .",
    "each exposure will contain approximately 350 million illuminated pixels .",
    "the main goals of the muse data processing pipeline are to fully reduce all exposures into ready - to - use datacubes ( euro3d format or fits with naxis=3 ) without creating a backlog ( a requirement on scope of the reduction and the speed ) , to track bad pixels , propagate error information , and to minimize the rebinning steps . especially the last two goals are connected and not yet commonly implemented in existing data reduction systems .",
    "we therefore discuss the details in the following sections .",
    "we take the approach of gssl & riffeiser ( 2002 ) and estimate the variance from the raw data : @xmath3 the terms describe the read - out noise , the error of the read - out noise estimate , and the photon noise of each pixel .",
    "this variance is then tracked through all processing steps using gaussian error propagation .",
    "this approach assumes that the ccd pixels are uncorrelated which should be true to first order . during data analysis , the variance , together with the data value itself , makes it possible to directly read off the s / n estimate at each position in the output datacube .",
    "if we followed the classical approach to determine a calibration function for one type of distortion and applied it ( requiring resampling ) , before determining the next one , muse data would have to be resampled four to five times .",
    "every resampling step always adds noise to a dataset . to be able to display and analyze data",
    "one always needs a rectangular format , so at least one resampling step has to be carried out .",
    "resampling more than once complicates the noise propagation , passing it through five steps is near impossible .",
    "the approach we use for the one - step resampling is centered around what we call a `` pixel table '' ( davies 2007 describes a very similar approach that was developed for the kmos instrument ) .",
    "this table contains a list of all illuminated pixels ( the data value , the bad pixel status , and the variance ) of one exposure together with the coordinates ( @xmath4 , @xmath5 , and @xmath6 ) .",
    "as soon as first estimates of the three coordinates are known , i.e.  following tracing and wavelength calibration , the ccd - based data is transfered into such a pixel table .",
    "once the data are listed in the pixel table , each transformation that would classically require an interpolation step can then be carried out just by changing the coordinates of each table entry .",
    "shifting the data ( such as done when combining multiple exposures ) just adds a constant to the column representing the spatial axis ; tilting it ( as needed to correct for differential atmospheric refraction ) applies a function to both spatial axes .",
    "astrometric calibration can be carried out by replacing pixel values in the two spatial axes with values of ra and dec ( using a function describing an astrometric solution ) .    to determine the function that needs to be applied to the dataset for a given transformation one in most cases needs to resample the data already into a datacube .",
    "an example is the flux calibration where the standard star exposure needs to be concerted to a datacube before one can measure the flux for each wavelength to derive the response function .",
    "but as the intermediate datacubes are generated of auxiliary data and are not used after the measurement , this does not affect the data quality of the science data . additionally , for some operations it is possible to generate the temporary datacube with coarse resolution , and should therefore not have a large impact on the speed of the operation when compared to the classical approach .",
    "the final resampling involves the transformation from the pixel table to the datacube .",
    "the problem here is that due to instrumental distortions the data are irregularly spaced .",
    "it is difficult to find neighboring pixels needed to interpolate .",
    "a naive approach to this problem is to search through the table to find the closest point(s ) to be interpolated onto the output grid point .",
    "this means to search millions of pixels repeatedly , to compute the distances to the output grid point . for the data of only one muse ifu ( @xmath215 million pixels ) this process takes more than a week",
    "this method can be sped up to only take hours when using knowledge of the instrument geometry and a system of hierarchical lookup tables so that one can restrict the search to a few thousands of pixels for each output point .",
    "research of other existing algorithms that resample irregular data on an output grid shows that all of them use nested loops and so work efficiently only for sets of small size .",
    "hence , we developed our own algorithm that only uses `` flat '' loops . in this scheme , which we call `` grid cell '' approach , we first sort all pixels into a three - dimensional array that represents the output grid .",
    "each input pixel is assigned to the nearest output grid point .",
    "this means that while in some cases none or more than one pixel are located in each grid point , it is still easy and fast to find neighboring pixels . and",
    "if the grid is well chosen for the input data , every grid cell will on average contain one input pixel .",
    "we plan to implement a few interpolation algorithms . the simplest one , nearest neighbor , is almost trivial to implement , and the fastest possible scheme .",
    "the whole conversion from the pixel table to the output datacube takes only about 30s per muse ifu .",
    "another interpolation to be implemented is a distance - based weighting method .",
    "for this , we will use a modified inverse square law for interpolation : @xmath7 .",
    "this function is taken from renka ( 1988 ) and vanishes at a cutoff radius @xmath8 , so that interpolation can be restricted to the nearest 6 ( @xmath9 ) or 26 ( @xmath10 ) grid cells . finally , kriging ( krige 1951 ) and sinc interpolation are candidates for further resampling techniques , but",
    "at this point it is not clear if they are usable with muse data .",
    "the muse data processing system will be implemented in the eso context , as plugin ( `` recipes '' ) to esorex , gasgano , or reflex ( hook et al . , 2008 ) .",
    "the code will be written in c and use the common pipeline library ( cpl ) provided by eso .",
    "the pipeline will consist of a basic level of data reduction ( bias , dark , and flat - field combination , wavelength calibration , application of calibration to science data ) , handling data on the basis of each integral field unit , i.e. per ccd , separately .",
    "the second level is required to derive scientifically usable data and will work on data from all units ( across all sub - fields ) simultaneously .",
    "this part consists of a complex procedure to determine the relative position of each slice within the field of view ( the `` geometry '' ) , and on - sky calibration procedures like standard star reduction , handling of separate sky and astrometric exposures , as well as combination of multiple exposures into the final output datacube .",
    "+ the basic level of reduction can be trivially parallelized , running multiple reduction processes at the same time .",
    "the second level is designed to use openmp to run several processing threads in parallel while processing the data across all 24 sub - fields .",
    "the combination of high data rate and the very complex structure makes it difficult and possibly very time consuming to handle muse data .    the `` one - step resampling '' approach presented here is conceptually simple . in this scheme",
    "it is necessary to carry out additional steps to be able to perform the same tasks as in the classical reduction approach .",
    "cpu and memory requirements are therefore higher , but the improved data quality and the knowledge of variance make this a suitable method for muse data processing .    the final design review of the muse instrument is going to take place in march 2009 . following this date , the data reduction system will be implemented to be ready for commissioning starting end of 2012 .",
    "pmw acknowledges support by the german verbundforschung through the muse / d3dnet project ( grant 05a08ba1 ) .",
    "discussions with richard davies and jarle brinchmann were important to develop and improve the resampling algorithm .",
    "davies , r. , 2007 , in : the 2007 eso instrument calibration workshop , in press gssl , c.  a. & riffeser , a. , 2002 , a&a 381 , 1095 hook , r. , romaniello , m. , ullgrn , m. , et  al . , 2008 , the messenger 131 , 42 krige , d.  g. , 1951 , master s thesis , university of witwatersrand renka , r. , 1998 acm 14 , 151"
  ],
  "abstract_text": [
    "<S> muse , a 2nd generation vlt instrument , will become the world s largest integral field spectrograph </S>",
    "<S> . it will be an ao assisted instrument which , in a single exposure , covers the wavelength range from 465 to 930 nm with an average resolution of 3000 over a field of view of 1@xmath01 with 0.2  spatial sampling . </S>",
    "<S> both the complexity and the rate of the data are a challenge for the data processing of this instrument . </S>",
    "<S> + we will give an overview of the data processing scheme that has been designed for muse . </S>",
    "<S> specifically , we will use only a single resampling step from the raw data to the reduced data product . </S>",
    "<S> this allows us to improve data quality , accurately propagate variance , and minimize spreading of artifacts and correlated noise . </S>",
    "<S> this approach necessitates changes to the standard way in which reduction steps like wavelength calibration and sky subtraction are carried out , but can be expanded to include combination of multiple exposures . </S>"
  ]
}