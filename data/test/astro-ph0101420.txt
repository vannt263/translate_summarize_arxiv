{
  "article_text": [
    "the sdss ( york et al . 2000 ) consists of four major components : a dedicated 2.5 m telescope at apache point , new mexico , along with a separate 50 cm telescope used to monitor the extinction and to provide calibration patches for the main telescope ; a large format imaging camera ( gunn et al .",
    "1998 ) containing 30 @xmath0 ( 13@xmath113 arcmin ) photometric ccds with @xmath2 filters and 24 @xmath3 astrometric and focus ccds ; two 320-fibre - fed double spectrographs , each with two @xmath0 ccds ; and lots and lots of software , with contributions from most of the sdss institutions ( listed in the acknowledgments ) .",
    "the primary goals of the project are to survey the northern galactic cap ( @xmath4 square degrees ) in five bands to ( psf ) limits of 22.3(u ) , 23.3(g ) , 23.1(r ) , 22.3(i ) , and 20.8(z ) , and to carry out a spectroscopic survey of @xmath5 galaxies , @xmath6 qsos , and a few @xmath7 stars .",
    "the sdss is now in operational mode , and as of this writing ( late january 2001 ) has imaged some 1600 @xmath8 and obtained about 120,000 spectra as part of its commissioning and initial operations phases .",
    "these data have allowed dramatic new astronomical discoveries to be made , discoveries that we shall not further discuss here ( e.g. blanton et al .",
    "2001 , fan et al .",
    "2000 , 2001 , fischer et al .",
    "2000 , ivezi et al .",
    "2000 , leggett et al .",
    "the sdss took an early decision to use public domain software wherever possible ; in practice this has largely been applied to our infrastructure rather than scientific codes .",
    "our software engineering tools are entirely public domain ( with the exception of compilers ) .",
    "we adopted as a source code manager and have been pleased with its performance .",
    "we currently have about 1.7gby in our cvs repository ( including at least one version of iraf ) .",
    "we have found that , after an initial period of distrust , scientists have found cvs to be extremely useful ; in at least some cases , people sitting next to each other at the observatory in new mexico have communicated via a cvs repository in illinois .",
    "while cvs allows us to control individual pieces of software , it does not provide a means of controlling complete systems .",
    "we have used a fermi national accelerator laboratory ( fnal ) utility called which allows us to associate a set of _ dependent products _ with a piece of our software . for example , version ` v5_2_10 ` of the image processing pipeline depends upon ` v7_15 ` of our infrastructure routines .",
    "this enables us to guarantee that at any time in the future we can reconstruct an entire system , using exactly the same bits and pieces .",
    "the particular versions ( e.g. ` v5_2_10 ` ) correspond to tags in the cvs repository .",
    "we have adopted a procedure that stable versions of our pipelines correspond to _ branch tags _ in cvs ; this has allowed us to proceed with development while giving us the ability to fix bugs found in the stable , delivered , code .",
    "we have used as our problem report and bug database . since july 1998",
    "we have acquired 1799 entries in the database ; the last thousand have been filed since february 2000 .",
    "we use a heavily enhanced version of tcl 7.4 ( actually , of tclx ) as our command language .",
    "much of the work developing this system ( known as _ dervish _ , n _",
    "shiva _ , sergey et al .",
    "1996 ) was carried out at fnal .",
    "in addition to what now appear to be basically cosmetic changes ( which we regret ) , the major enhancements that we made were :    * memory tracing / defragmentation / debugging + a common problem with programs that make heavy use of dynamically allocated memory is that the memory acquired from the operating system becomes _ fragmented _ , or that the program forgets to free resources .",
    "both of these problems can be resolved by adding a layer above ` malloc ` , and we have done so .",
    "figure [ figmemtrace ] shows that the total memory used in the steady state by the frames pipeline ( see below ) is well controlled . * support for c datatypes at tcl level .",
    "+ we wrote a processor that scans the c include files ( ` .h files ' ) and generated a description of the schema of all the types declared therein .",
    "this was originally used to implement a primitive persistent store , but proved more useful in making the c data elements available at the tcl prompt ; this greatly increased the power and flexibility of our command language , allowing us to build the command - and - control parts of our pipelines in tcl rather than having to use compiled c. for example , where a ` handle ' is an address and a datatype .",
    "* easy(ish ) bindings from c to tcl .",
    "+ we implemented a set of library calls that made it possible to bind c commands to tcl in a way that , if not simple , at least required no thought and could be handled by pasting appropriate boiler - plate code .",
    "saoimage we gratefully adopted ` saoimage ` , and added a facility to overlay bitmasks .",
    "slatec    pgplot    if we were starting this problem today , we would probably not use tcl ( maybe python in its pyraf incarnation ? ) , and we would certainly make greater efforts to use _ vanilla _ , up - to - date , versions of our chosen system .",
    "the sdss has quite a large number of pipelines which must be run in order to fully process the data ; we shall not discuss the spectroscopic reductions or the operational and scientific databases .",
    "* ` astroline ` + on the mve167 processors ( running vxworks ) used to archive the raw data on the mountain , we also run a pipeline that processes the pixels before they re written to disk / tape .",
    "we generate star cutouts ( ` postage stamps ' ) and column quartiles ; this is all that we save from the 22 astrometric ccds . * ` mt ` pipeline .",
    "+ process the photometric telescope camera data .",
    "this consists of a set of staring - mode observations of fields of standard stars , used to define the extinction and photometric zero - points for the 2.5 m scans . * ` serial stamp collecting ` ( ssc ) pipeline .",
    "+ reorganise the data stream , cut a more complete set of postage stamps . * ` astrometric ` pipeline .",
    "+ process the centroids of stars from ` astroline`/`ssc ` and generate the astrometric transformations from pixels to @xmath9 and between bands .",
    "* ` postage stamp ` pipeline ( psp ) .",
    "+ estimate the flat field vectors , bias drift , and sky levels , and characterise the psf for each field . * ` frames ` pipeline .",
    "+ process the full imaging data , producing corrected frames , object catalogues , and atlas images . * calibration .",
    "+ take the outputs from ` mt ` pipeline and ` frames ` , and convert counts to fluxes .",
    "one major gain from splitting responsibilities in this way is that once we get to the ` frames ` pipeline , fields ( 10arcmin@xmath114arcmin patches on the sky ) may be processed independently and in any order .",
    "the sdss imaging piplelines employ a number of novel and even interesting algorithms , which are slowly being written up for publication ; for example the image deblender ( lupton 2001 ) . here",
    "we shall only discuss a couple of features connected to handling the point spread function ( psf ) and the related problem of star / galaxy separation .      even in the absence of atmospheric inhomogeneities the sdss telescope delivers images",
    "whose fwhms vary by up to 15% from one side of a ccd to the other ; the worst effects are seen in the chips furthest from the optical axis .",
    "if the seeing were constant in time one might hope to understand these effects ab initio , but when coupled with time - variable seeing the delivered image quality is a complex two - dimensional function and we chose to model it heuristically using a karhunen - love ( kl ) transform .",
    "the description of the psf ( as derived in the next subsection ) is critical for accurate psf photometry , i.e. for all faint object photometry  if the psf varies so does the aperture correction .",
    "we also need to accurately know the psf in order to be able to separate stars from galaxies ; after all , the _ only _ valid discriminant that is nt based on colours or priors is that galaxies do nt look like stars .    a good knowledge of the local psf is also needed for all studies that measure the shapes of non - stellar objects ( e.g. weak lensing studies , fischer et al",
    ". 2000 ) .",
    "the first step is to identify a set of reasonably bright , reasonably isolated stars from our image .",
    "we then use these stars to form a kl basis , retaining the first @xmath10 terms of the expansion : @xmath11 where @xmath12 is the @xmath13 psf star , the @xmath14 are the kl basis functions , and @xmath15 are pixel coordinates relative to the origin of the basis functions . in determining the @xmath14 ,",
    "the @xmath12 are normalised to have equal peak value .",
    "once we know the @xmath14 we can write @xmath16 where @xmath17 are the coordinates of the centre of the @xmath13 star , @xmath18 determines the highest power of @xmath19 or @xmath20 to include in the expansion , and the @xmath21 are determined by minimising @xmath22 note that all stars are given equal weight as we are interested in determining the spatial variation of the psf , and do not want to tailor our fit to the chance positions of bright stars .      for each ccd",
    ", in each band , there are typically 15 - 25 stars in a frame that we can use to determine the psf ; we usually take @xmath23 and @xmath24 ( i.e. the psf spatial variation is quadratic ) .",
    "we need to estimate @xmath10 kl basis images , and a total of @xmath25 @xmath26 coefficients , and at first sight the problem might seem underconstrained . fortunately we have many _ pixels _ in each of the @xmath12 , and thus only the number of spatial terms ( @xmath27 , i.e. 6 for @xmath24 ) need be compared with the number of stars available .",
    "in fact , rather than use only the stars from a single frame to determine that frame s psf , we include stars from both proceeding and succeeding frames in the fit .",
    "this procedure has several advantages : the spatial variation is better constrained at the leading and trailing edges of the frame ; the psf variation is smoother from frame to frame ; and the psf is determined from more stars .",
    "we have found that optimal results are obtained by using a range of @xmath28 frames to determine the kl basis functions @xmath14 and @xmath29 frame to follow the spatial variation of the psf .",
    "if we try to use a larger window we find that variation of the @xmath30 coefficients is not well described by the polynomials that we have assumed .",
    "we have not tried using a different set of expansion functions ( e.g. a fourier series ) .",
    "we fit three models to every object , in every band : a psf , a pure devaucouleurs profile , and an exponential disk ; the galaxy models are convolved with the local psf ( as estimated using the kl expansion of the previous section ) .",
    "this is potentially an expensive operation as it involves a 3-dimensional ( @xmath31 ) non - linear minimisation ; each iteration requires the calculation of a 2-d analytical model of a galaxy followed by convolution with the psf and the calculation of @xmath32 by summing over many pixels of the image .",
    "we make heavy use of pre - calculated tables of models , and pre - extract the radial profile into a series of annuli , each containing 12 30@xmath33 sectors ; in consequence , fitting a single galaxy model in a single band takes of order 1.5ms on an 800mhz alpha .",
    "the primary use of these models is in star / galaxy separation and morphological classification of galaxies .",
    "we initially hoped to use the relative likelihoods of the psf and galaxy fits to separate stars from galaxies , but found that the stellar likelihoods were tiny for bright stars , where the photon noise in the profiles is small , due to the influence of slight errors in modelling the psf .",
    "instead we found the ratio of the _ flux _ in the best - fit galaxy model to that in the psf to be an excellent discriminant .",
    "figure [ figgr ] shows a colour - magnitude diagram from a small area of sdss imaging data .",
    "the top left panel shows only objects classified as stars ; note that most objects with colours of @xmath34 are preferentially classified as galaxies .",
    "the star / galaxy separation is independent of the object s colours , so this rejection _ must _ be a measure of how well the star / galaxy classification is working .",
    "studies of the performance of the sdss s / g separation in the groth strip data ( where accurate classification is available from hst imaging ) indicate that separation is reliable to at least a @xmath35 of 21.5 in data that has a @xmath36 limit of @xmath37 .",
    "the @xmath38 colour of galaxies is a good discriminant of hubble type ( strateva et al .",
    "figure [ figgalclass ] shows @xmath38 plotted against what is essentially the likelihood ratio for devaucouleurs and exponential models shows that the galaxy likelihoods provide clear _ morphological _ classification to @xmath39 , in data with a psf @xmath36 limit of about 22.5 .",
    "as far as he knows , this section represents the views only of the primary author and not of his coauthors .",
    "those of you who know him will have heard these opinions before .",
    "the sdss has been very challenging technically , scientifically , and managerially . in all categories",
    "the software stands out : the hardest technical aspect of building the sdss was probably the software , although building the mosaic camera was nt easy ; some of the software was a major _ scientific _ challenge ; and the software was undoubtedly the hardest part of the project to manage .",
    "let me expand upon some of these issues .",
    "we have found it extremely hard to hire good people to work on astronomical software .",
    "there is no career path within the universities for software specialists , despite the fact that there s no logical distinction between building hard- and soft - ware instruments .",
    "smart and sensible graduate students , desirous of a career in astronomy , simply do nt choose to specialise in the software required to reduce modern observational datasets .",
    "hiring computer professionals is not the solution to this problem . besides being ( if competent ) too expensive for the average astronomical project",
    ", they simply do nt possess the skills needed to solve the _ scientific _ challenges posed by astronomical data .",
    "we need _ scientists _ to resolve scientific problems , albeit with support from people whose job it is to know about optimizers , lalr(1 ) grammars , and good software engineering practices .",
    "we also need our software - scientists to be in rich scientific environments , where they can talk with ( e.g. ) the quasar - scientists about the data analysis that they are carrying out .    if we , as a community , knew how to reuse software from one project on another some of these problems might be alleviated , but i do nt believe that they would go away .",
    "the availability of good numerical libraries hasnt made the development of new cosmological codes stop ; the impetus for change comes from the desire to do things better , not just from the not - invented - here syndrome .",
    "i believe that part of the problem is that we , as a community have not yet faced the reality that software is _ difficult _ , and that the dynamic range between the really good and the average programmer is as great as that between lyman spitzer and the average graduate student .",
    "this makes management difficult ; imagine trying to get a collaboration of 100 self - opinionated astronomers to agree about the best way to solve a problem , and tell me why this is any easier than running a large modern collaboration involving large amounts of software .",
    "i reluctantly believe that we must learn to run large software projects ( and all large projects nowadays are large software projects ) as benevolent dictatorships  of course with the implicit hope that i shall be the dictator ( but not the manager ) .",
    "the sloan digital sky survey ( sdss ) is a joint project of the university of chicago , fermilab , the institute for advanced study , the japan participation group , the johns hopkins university , the max - planck - institute for astronomy , new mexico state university , princeton university , the united states naval observatory , and the university of washington .",
    "apache point observatory , site of the sdss telescopes , is operated by the astrophysical research consortium ( arc ) .",
    "funding for the project has been provided by the alfred p. sloan foundation , the sdss member institutions , the national aeronautics and space administration , the national science foundation , the u.s .",
    "department of energy , monbusho , and the max planck society ."
  ],
  "abstract_text": [
    "<S> we summarise the properties of the sloan digital sky survey ( sdss ) project , discuss our software infrastructure , and outline the architecture of the sdss image processing pipelines .    </S>",
    "<S> we then discuss two of the algorithms used in the sdss image processing ; the karhunen - love transform based modelling of the spatial variation of the psf , and the use of galaxy models in star / galaxy separation .    </S>",
    "<S> we conclude with the first author s personal opinions on the challenges that the astronomical community faces with major software projects . </S>"
  ]
}