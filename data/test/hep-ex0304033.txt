{
  "article_text": [
    "the  experiment at the electron - proton collider hera at desy in hamburg , germany , is a fixed - target spectrometer with large angular acceptance .",
    "has been designed to study neutral @xmath0 mesons produced in proton - nucleus interactions . s",
    "current physics program aims at the measurement of the production of @xmath2 and @xmath3 bound states in different target materials .",
    "the  target consists of eight wires in the halo of the hera proton beam .",
    "the wires can be independently moved transverse to the beam to adjust the average number of proton - nucleus interactions per bunch crossing .",
    "the  detector is shown in fig .",
    "[ fig : detector ] .",
    "it consists of tracking devices and devices used for particle identification .",
    "the tracking devices comprise a vertex detector of double - sided silicon micro - strip detectors , and an inner and outer tracking system using micro - strip gaseous chambers with gas electron multiplier foils ( gem - msgcs ) in the inner acceptance region ( @xmath4 from the proton beam direction ) and honey - comb drift chambers in the outer acceptance region ( @xmath5 ) .",
    "particle identification is performed in the electromagnetic calorimeter ( ecal ) , the ring - imaging erenkov counter ( rich )  @xcite and the muon detector built of multi - wire proportional chambers .        to achieve the large suppression of background events needed for @xmath2 and @xmath3 production measurements ,",
    "a highly selective multi - level trigger system is used .",
    "the first level trigger ( flt ) , built from custom - made electronics , performs a track search in the tracking detectors behind the spectrometer magnet .",
    "it has to sustain interaction rates of up to @xmath6 .",
    "track candidates for the flt are provided by pretriggers in the muon detector and the ecal , based on hit coincidences in adjacent detector layers and hit clusters in the ecal .",
    "the  detector and trigger are described in greater detail in  @xcite and references therein .",
    "large hit multiplicities are mainly caused by a superposition of multiple interactions in a single bunch crossing of the hera proton beam .",
    "the number of simultaneous interactions follows a poisson distribution .",
    "the flt is based on a track search algorithm implemented in custom - made hardware which requires hits in four superlayers of the  tracking system .",
    "large hit multiplicities lead to an increase of the number of possible hit combinations to form a track in the flt . as a result ,",
    "the flt is sensitive to events with large hit multiplicities , see fig .",
    "[ fig : fltrate ] . since the flt is a modular message - driven system , the message load in its network increases with the hit multiplicity which may introduce dead - time in the system .",
    "therefore a mechanism to protect the flt from processing multi - interaction events is needed .",
    "at the same time , this mechanism should preserve a large efficiency for interesting physics signals , e.g. the decay @xmath7 .",
    "a suitable measure of the hit multiplicity in the  detector is the number of photons generated by charged particles in the rich .",
    "a sketch of the  rich detector can be found in fig .",
    "[ fig : veto_area](a ) . as shown in fig .",
    "[ fig : correlation](a ) , the number of rich photons is highly correlated with the number of hits in the tracking chambers used in the flt . even in the case when only a small part of the rich detector is covered , the number of rich photons in this part is highly correlated with the number of hits in the whole rich , see fig .  [",
    "fig : correlation](b ) .",
    "hence the veto functionality can already be established with partial coverage of the rich .",
    "photons emitted in parallel cones around the flight direction of a particle are reflected to the upper or lower focal plane by spherical and planar mirrors , where they form a ring .",
    "( b ) focal planes of the rich detector : the photons are detected by multi - anode photomultipliers of two sizes .",
    "the dark areas are currently covered by the rich multiplicity veto  system.__,scaledwidth=75.0% ]        the rich detector is suited to host a multiplicity veto not only from the physics but also from the technological point of view .",
    "it has proven to be a very reliable , low - noise system .",
    "in addition , its interface to the  data acquisition system ( daq ) , the front - end driver ( fed ) , is easily accessible to install the necessary additional electronics .",
    "the strategy of a multiplicity veto using the rich detector is to provide a fast sum of the number of photons in part of the rich and to generate a veto signal based on the comparison of this number of photons with an adjustable threshold . in order to stop the trigger chain even before the message - driven processing in the flt",
    ", the veto signal has to be distributed to the pretriggers .",
    "the photon signals detected by the photomultipliers of the rich detector are provided as digitized data at the feds .",
    "therefore the summation of hits is performed by digital electronics .",
    "the logic of the veto system is implemented in large complex programmable logic devices ( cpld )  @xcite to allow for rapid development of the logic and to keep the design flexible .",
    "the cplds used in the design are well - suited for cascaded summation .",
    "since the rich feds are distributed in 14 fed crates close to the   detector , the veto system has to be a distributed modular system .",
    "the current implementation of the rich multiplicity veto  covers two fed crates , see fig .",
    "[ fig : veto_area](b ) .",
    "the maximum allowed latency @xmath8 of the system is given by the conditional requirement that the pretrigger systems have to be stopped before transfering data to the flt .",
    "latency measurements show that the maximum allowed latency is given by the muon pretrigger .",
    "the veto signal has to arrive at the muon pretrigger within @xmath9 after the interaction at the  target .",
    "the rich multiplicity veto  is a new hardware component to be integrated into an existing detector .",
    "therefore care is taken not to introduce additional electronic noise into the detector front - end .",
    "the electronics boards that receive the data from the feds are plugged directly on the fed boards in order to keep signal paths short .",
    "in addition , the signal lines on all electronics boards are routed carefully .",
    "the data inside the multiplicity veto has to be transmitted over approximately @xmath10 from the detector front - end to the electronics trailer which is situated outside the experimental area .",
    "differential pecl logic is used for all flat cable connections to improve the noise immunity .",
    "various specialized test boards and internal test facilities are needed to allow for fast and controlled commissioning of the veto system .",
    "an overview of the rich multiplicity veto  system is shown in fig .  [",
    "fig : vetosystem ] .",
    "the rich fed is distributed over 14 fed crates with up to eight fed daughter cards processing data from 256 photomultiplier channels each .",
    "the data of eight fed daughter cards are transmitted to eight base sum cards ( bsc ) , where they are summed .",
    "the sums of the eight bscs are transmitted to the fed sum card ( fsc ) , which calculates the subtotal of the hits in a single rich fed crate .",
    "this sum is transmitted via twisted - pair flat cables or an optical link to the veto board ( vb ) , which is situated in the  electronics trailer .",
    "a modified i@xmath11c bus system is used for communication among the modules of the rich multiplicity veto  system .    the veto decision calculated from the sum of up to 14 fsc subtotals",
    "is distributed to the pretrigger via the veto distributor ( vdis )  @xcite .",
    "a veto signal from the ecal energy inhibit ( eei ) board can be combined with the signal from the rich multiplicity veto  system .",
    "the eei is a veto system complementary to the rich multiplicity veto .",
    "it is based on the analog energy sum in the inner part of the ecal .",
    "in addition , the veto signal generated from a single fsc can be fed into the fast control system ( fcs ) mother card , which distributes triggers in the  experiment . in this `` fast veto ''",
    "mode , the veto system can be used as a low - bias interaction trigger .    for the data - taking period 2002/2003 ,",
    "15 bscs , 2 fscs , and the vb have been installed in the  detector .",
    "a bus system for the rich multiplicity veto  has to address up to @xmath12 boards and to transmit signals over distances of more than @xmath10 .",
    "the fast control system  @xcite , the central bus system of the  experiment , can not be extended to fulfill these requirements .",
    "the i@xmath11c bus standard provides an easy and widely used protocol to implement the internal communication of the rich multiplicity veto  system .",
    "the original protocol is based on two bi - directional lines , one for data transmission and one for the transmission of clock signals .",
    "however , to use the i@xmath11c bus in the rich multiplicity veto  system , some modifications have been made to the protocol .",
    "the i@xmath11c bus controller used in the rich multiplicity veto  @xcite is operated in a special long - distance mode with four uni - directional lines .",
    "this mode allows to use long - distance drivers ( rs485 ) for the i@xmath11c lines . in order to ensure the correct position of the acknowledge signal after data transmission in the long - distance mode",
    ", a feedback loop has to be introduced to the data and clock lines , as shown in fig .",
    "[ fig : i2c_mod ] .    c bus controller , as indicated by the arrows : the i@xmath11c bus controller needs a feedback of the data lines ( sda_in , sda_out ) and the clock lines ( scl_in , scl_out ) to ensure the correct position of the acknowledge signal after data transmission .",
    "the clock signals are only generated by the master controller , hence scl_in and scl_out can be connected on the slave controller side .",
    "the feedback on the signal lines is implemented as and gates  @xcite.__,scaledwidth=75.0% ]    the i@xmath11c master controller is situated on the vb .",
    "it is controlled via vme commands , while the controllers on the bscs and the fscs are operated as i@xmath11c slaves .",
    "finite state machines implemented in dedicated cplds on these boards are used to operate the i@xmath11c slave controllers .",
    "the bscs and the fscs are entirely controlled via the i@xmath11c bus .",
    "the bus system is used to access the command , status , and reference registers of the cplds on the bscs and fscs boards in order to initialize and monitor these boards .",
    "the bsc is a six - layer electronics board which is plugged directly on an fed daughter card .",
    "almost the complete logic of the board is implemented in two cplds .",
    "each of the cplds processes signals from 128 of the 256 detector channels provided by the fed daughter card .    the summation logic of the cpld is shown in fig .",
    "[ fig : summation ] .",
    "the 128 channels are further divided into four 32-bit blocks .",
    "for every 32-bit block , a `` block - lut adder '' unit is implemented , see fig .",
    "[ fig : blocklut ] .",
    "eight look - up tables are used to count the number of hits in four bits and transform them into a three - bit number .",
    "each 32-bit block can be masked individually to account for problematic channels in the detector readout .",
    "the subtotals of the four 32-bit blocks are summed by an additional adder unit , and the subtotal of the second cpld is added , before the sum is transmitted to the fsc .            in order to assign the veto signal generated by the rich multiplicity veto  to a given event , the bunch crossing number ( bx ) of the current event is transmitted to the fsc together with the subtotal of the bsc .",
    "the bx is provided by the  fcs system and transmitted to the bsc via the backplane of the fed crate .    while for the internal logic of the bsc ttl is used ,",
    "the logic level is transformed to differential pecl for data transmission . due to a limitation of number of lines on the flat cable ,",
    "the least significant bit ( lsb ) of the sum is discarded before the data transmission occurs .",
    "the fsc , situated in an fed crate together with up to eight bscs , receives data from the bscs via flat cables .",
    "the summation logic is depicted in fig .",
    "[ fig : fsc ] . the subtotals of the bscs are added . to check the synchronization of the bscs , the bxs which are transmitted together with the subtotals",
    "are compared . in case of inconsistencies ,",
    "an error code is generated .",
    "the result of the summation and the error code are transmitted to the vb .",
    "the subtotal of the fsc is compared with an adjustable threshold , and a `` fast veto '' signal is generated if the subtotal is equal to or larger than the threshold .",
    "the fast veto signal can be fed into the fcs mother card via a lemo cable to be used as an interaction trigger , sensitive to minimal activity in part of the rich detector .",
    "since the data transmission from the fsc to the vb takes place in a harsh hadronic environment , the fsc foresees data transmission via optical links in addition to conventional twisted - pair flat cables . in -",
    "situ tests show that using flat cables for the data transmission in the  experimental area is feasible .",
    "moreover , in flat cable data transmission , no additional time is needed to serialize the data for the optical transmission , thus the latency of the system is smaller compared to optical transmission .",
    "therefore , transmission via flat cables has been chosen for the installation of the rich multiplicity veto  system .",
    "the vb is a 6u electronics board designed in vme standard .",
    "it is situated in the  electronics trailer .",
    "the subtotals of up to 14 fscs arrive at the input connectors of the vb via flat cables .",
    "the vb is designed to consist of a main board and a mezzanine board , each processing the data from seven fscs . in the current installation in",
    ", only the main board is used .        the veto logic of the vb is shown in fig .  [ fig : vetoflex ] .",
    "the sums of seven fscs and the final sum of the mezzanine board are written to input registers before they are transmitted to the veto unit .",
    "the veto unit calculates the final sum , and the veto signal is generated based on a comparison with two adjustable thresholds .",
    "hence , four different veto modi can be chosen , as depicted in fig .  [",
    "fig : vetomodi ] .",
    "the veto signal from the eei can combined with the internal veto signal by a logical or .",
    "the veto can also be generated from a different source : the logical or of the fast veto signals for the fscs , also combined with the eei veto , can be used instead of the final sum .",
    "the vme interface of the vb is used to control the entire rich multiplicity veto  system , including the i@xmath11c bus master controller and all registers of the cplds of the vb and  via the i@xmath11c bus  of the cplds of the bscs and the fscs .",
    "the vb monitors the error codes generated by the fscs due to bx synchronization errors of the bscs .",
    "in addition , the bx synchronization of the fscs themselves and the number of vetos generated in the last 256 bx , both on the vb and on the eei , are monitored .",
    "this information is available in the status registers of a specialized monitoring cpld which can be read out via vme .    to transmit the veto decision and the veto rate to the  data stream",
    ", the vb provides an interface to the second level buffer ( slb ) , s event buffer made of a network of specialized digital signal processors . on the vb",
    ", a modified fed buffer is implemented .",
    "it contains the veto decision and the current veto mode , tagged with the flt bx number , which is provided by the  fcs via the fcs backplane .",
    "if the fcs issues a trigger , the content of the fed buffer is transmitted to the slb and saved in the data stream . due to this feature",
    ", the efficiency of the rich multiplicity veto  system can be determined easily , cf .",
    "section  [ sec : efficiency ] .",
    "since the internal monitoring provides the number of vetos only for the last 256 bx , i.e.  on a statistical basis , a better monitoring mechanism is needed to control the number of events rejected by the rich multiplicity veto  system .",
    "thus the veto signal is transmitted to a vme scaler which counts the number of vetos in an adjustable time interval .",
    "the scaler is read out via vme , and the measured veto rate is written to the data stream .",
    "the commissioning of the rich multiplicity veto  system comprises detailed tests of the hardware functionality in the laboratory and measurements of the latency of part of the system and the whole system .",
    "furthermore , the efficiency of the system is determined , and the influence on the  trigger chain and daq and on physics signals is studied .",
    "the laboratory tests are based on a complex test setup using specialized test boards to generate the input and analyze the output of the individual boards so that the bit error level can be determined .",
    "the bsc is tested with a specialized board that emulates the timing and data of the  fed and the fcs , the pretrigger fed simulator ( pfeds ) .",
    "this board allows to generate defined test input for the bsc .",
    "the test input is designed such that every channel is tested individually , i.e.  without bits being set in neighboring channels , hence hardware defects can be located on the bsc .",
    "the output of the bsc is written to a fifo on the base sum test card ( bstc ) where it can be read out via vme and compared with the input .    in the next step ,",
    "the veto chain is extended by the fsc . with a special adapter",
    ", the bstc can also be used to test the output of the fsc . as for the bsc",
    ", every input channel is tested individually . by adding more bscs ,",
    "the bx comparison and the summation on the fsc are tested .",
    "the fast veto signal is tested by programming a threshold on the fsc via the i@xmath11c bus and monitoring if the signal is generated correctly and assigned to the correct bx .        for tests of the vb ,",
    "the veto board test card ( vbtc ) has been designed .",
    "the vbtc uses pfeds data as an input and emulates the output of two fscs , including the fsc subtotals , the fast veto signals , the bxs and the fsc error codes .",
    "the timing of these signals can be shifted to emulate errors in the chain of the veto system .",
    "an eei emulator generates signals to test the insertion of the eei veto in the veto decision of the vb . for all four veto modi",
    ", a test of the correct generation of veto signals has been performed .",
    "the data transmission to the slbs is tested with an slb module , and the signal that triggers the data transmission to the slb is generated by the  fcs system . in fig .",
    "[ fig : systemtest ] , a test setup for the entire chain of the rich multiplicity veto system is shown .",
    "the results of the laboratory tests are summarized in table  [ tab : biterror ] . during the tests ,",
    "no bit errors could be detected , therefore the error limits quoted in the table are given only by the test statistics .",
    ".__bit error measurements  @xcite _ _ [ cols=\"^,^\",options=\"header \" , ]      using data taken during the  commissioning phase from august to october 2002 , the influence of the rich multiplicity veto  on physics signals in the  detector is studied .",
    "the data sample includes approximately 3,500 candidates for the decay @xmath13 .",
    "the rich multiplicity veto  system has been inactive during the data - taking , and cuts on the veto threshold are applied in the offline analysis . at a `` generic '' upper threshold of 300 hits in the area covered by the rich multiplicity veto  system  corresponding to approximately 2,500 hits in the entire rich ",
    "the survival of mesons and a possible bias on the kinematics are studied .",
    "fitting the di - muon invariant mass spectrum for events with less than a given number of hits and for all events , the survival fraction of mesons is determined as a function of the rich veto threshold , see fig .",
    "[ fig : njpsi ] . for an upper threshold of 300 hits ,",
    "the survival fraction is in the range of 97100% .",
    "the kinematics can be described by two independent parameters . in this analysis ,",
    "the rapidity @xmath14 and the transverse momentum @xmath15 are chosen .",
    "the di - muon invariant mass spectrum is fitted in bins of @xmath14 and @xmath15 , and the result using only events with less than 300 hits is compared with the result using all events .",
    "the distributions are not corrected for detector acceptance and efficiency .",
    "[ fig : kinematics ] shows the resulting rapidity and transverse momentum distributions . within errors , no significant bias on the kinematics is observed .",
    "the influence of the rich multiplicity veto  on the centrality of the proton - nucleus collision in accepted events is studied using a monte carlo simulation of 50,000 events each for carbon and tungsten targets .",
    "the simulation includes the process @xmath13 mixed with poisson - distributed inelastic background with a mean value of one interaction . in fig .",
    "[ fig : centrality ] , the number of expected hits in the area of the rich covered by the rich multiplicity veto  is shown as a function of the impact parameter of the proton - nucleus collision . only a small fraction of the events is rejected ( carbon : @xmath16% , tungsten : @xmath17% ) , and the simulation shows no significant centrality bias .    ,",
    "mixed with inelastic interactions according to a poisson distribution with a mean value of 1 .",
    "the vertical bars indicate the cut of 300 hits.__,scaledwidth=75.0% ]",
    "within only 1.5 years , a programmable modular veto system for the  rich has been designed , built and successfully commissioned .",
    "the system provides a fast sum of the number of photons seen in the rich which is used to reject events with large multiplicities .",
    "the system shows very low bit error rates and an efficiency close to 100% .",
    "while the trigger and daq timing is improved using the rich multiplicity veto  system , more than 97% of the events survive the veto decision , and no significant bias on the kinematics is observed ."
  ],
  "abstract_text": [
    "<S> we present the design and commissioning of a new multiplicity veto for the  detector , a fixed - target spectrometer originally designed to study the physics of @xmath0 mesons in proton - nucleus interactions . </S>",
    "<S> the  trigger is a message - driven multi - level track trigger . </S>",
    "<S> the first level trigger ( flt ) consists of custom - made electronics , and the higher trigger levels are implemented as pc farms .    </S>",
    "<S> the multiplicity veto has been designed to reject high - multiplicity events before they enter the trigger chain . </S>",
    "<S> a veto signal is generated based on the comparison of the number of photons in part of the   ring - imaging erenkov counter ( rich ) with a programmable threshold .    </S>",
    "<S> the rich multiplicity veto  is a modular system . </S>",
    "<S> first the hits in 256 detector channels are summed by base sum cards ( bsc ) , then fed sum cards ( fsc ) sum the subtotals of up to eight bscs . </S>",
    "<S> finally the veto board ( vb ) takes the veto decision based on the sum of up to 14 fscs .    </S>",
    "<S> the rich multiplicity veto  has been successfully installed and commissioned in . </S>",
    "<S> the measured veto efficiency is @xmath1 , and the system is used in the routine data - taking of the  experiment .    * si-2003 - 1 *    poster presented at the ieee nuclear science symposium 2002 , +    norfolk , virginia , </S>",
    "<S> november 1214 , 2002    this work was supported by the german bundesministerium fr    bildung und forschung ( bmbf ) under the contract number 5hb1pea/7 . </S>"
  ]
}