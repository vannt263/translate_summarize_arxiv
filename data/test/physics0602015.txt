{
  "article_text": [
    "the fact that supply and demand fluctuations have long - memory , which was independently discovered by bouchaud et al .",
    "( @xcite ) and lillo and farmer ( @xcite ) , raises an apparent paradox about compatibility with market efficiency .",
    "the adage that buying drives the price up and selling drives it down is one of the least controversial statements in finance .",
    "the long - memory of supply and demand implies that there are waves of buyer - initiated or seller - initiated transactions that are highly predictable using a simple linear algorithm .",
    "all else being equal , this suggests that price movements should also be highly predictable .",
    "however , from an empirical point of view it is clear that this is not the case ",
    "price movements are essentially uncorrelated .",
    "how can these two facts be reconciled ?",
    "the two original papers on this subject offered two different views to resolve the efficiency paradox . in an interesting paper bouchaud et al .",
    "( @xcite ) offered the view that one can think in terms of a bare propagator @xmath0 that describes the impact of a price change caused by a transaction of volume @xmath1 and sign @xmath2 at time @xmath3 as it is felt at time @xmath4 .",
    "the total price impact can be computed by summing up the bare propagators associated with each transaction .",
    "they also assume that the bare impact @xmath5 is _ fixed _ , in the sense that it only depends on the signed volume of the transaction and the time delay , and does not depend on other market properties , such as liquidity . given these assumptions ,",
    "it is clear that the bare propagator has to be temporary , in the sense that it decays to zero as @xmath6 . to see this think about a buy order placed at time @xmath3 , and for simplicity let @xmath7 .",
    "because of the long - memory , @xmath8 , where @xmath9 is the exponent for the asymptotic decay of the autocorrelation function , @xmath10 is the probability of a buyer initiated transaction at time @xmath11 , and @xmath12 is the probability of a seller initiated transaction at time @xmath11 ( and both are averaged over @xmath3 ) . under their assumptions , to cancel out the inefficiency caused by the long - memory of transactions the sum of all the bare propagators has to go to zero . approximating the sum as an integral and taking into account the time decay of the long memory implies that asymptotically @xmath13 decays as @xmath14 .",
    "an alternate point of view was given by lillo and farmer ( @xcite ) , who suggested that this apparent paradox can be explained in terms of permanent price impacts whose size depends on liquidity , where liquidity is defined as the price response to a transaction of a given size .",
    "the liquidity for buying and selling can be different , so that two orders of the same size but opposite sign may generate different average price responses .",
    "this point of view was motivated by related work that suggests that liquidity fluctuations play an essential role in price formation ( farmer et al @xcite , weber and rosenow @xcite , farmer and lillo @xcite , lillo and farmer @xciteb , gillemot , farmer , and lillo @xcite ) .",
    "this body of work demonstrates that the price response to transactions of the same size is highly variable , and that in price formation liquidity fluctuations dominate over fluctuations in transaction size .",
    "given that liquidity varies with time by many orders of magnitude , it is not surprising that there can be imbalances between the liquidity of buying and selling of less than a factor of two .",
    "as we will see , this is all that is needed to maintain efficiency .    in section 2.2 of ",
    "random walks , liquidity molasses , and critical response in financial markets \" , bouchaud , kockelkoren and potters ( @xcite ) , hereafter called bkp , criticize one of the results of lillo and farmer ( @xcite ) . this may be confusing since this result only appeared in the version originally posted on the archive and does not appear at all in the final published paper .",
    "the error in the original version was in the interpretation of an empirical result that suggested that it was possible to remove the excess price impact by the immediate formation of a liquidity imbalance ( we will explain what we mean by  immediate \" more precisely in a moment ) .",
    "lillo and farmer thank marc potters , who as referee was kind enough to point out the error ( and later became a non - anonymous ) .",
    "the published version of lillo and farmer removed this error and added a section showing that immediate liquidity imbalances are large , even if they are not large enough to fully explain the efficiency paradox all by themselves .",
    "liquidity molasses \" paper of bkp reflects a significant evolution in point of view from the earlier paper of bouchaud et al . , which emphasized the role of mean - reverting quote changes and did not say much about liquidity imbalance .",
    "in contrast , figures  7 and 12 of lillo and farmer demonstrated that it is liquidity imbalance , rather than mean - reverting price quotes , that is the key to efficiency .",
    "this is echoed in figure  11 of bkp .",
    "we demonstrate this even more graphically here .",
    "in this comment we summarize some new results that resolve this controversy by explicitly demonstrating how the liquidity imbalance co - varies in time with the long - memory of supply and demand , which we will refer to as the  transaction imbalance \" ( defined more precisely later ) .",
    "because the liquidity imbalance is initially weaker than the transaction imbalance , there is a initially a nonzero price impact to a transaction .",
    "however , the liquidity imbalance associated with a transaction grows , and after a short time @xmath15 becomes large enough to quench any further growth in the price response .",
    "for @xmath16 the liquidity imbalance roughly matches the transaction imbalance , and the price impact remains constant .",
    "our explanation is thus based on the view that price impacts are permanent but require some time to build after a transaction .",
    "while this is consistent with the formalism introduced by bouchaud et al ( 2004 ) , we think that our view is simpler and more natural . by introducing time dependence",
    ", this view contains elements of the original proposals of both bouchaud et al . and lillo and farmer .",
    "we now explain our new results in more detail .",
    "suppose a transaction of a known sign @xmath2 occurs at time @xmath3 , where @xmath17 for a buyer initiated transaction and @xmath18 for a seller initiated transaction . here and throughout this comment @xmath3",
    "is measured in transaction time , updated by one unit whenever a transaction occurs .",
    "the size of the expected price impact at time @xmath19 can be written as$ ] is essentially the same as the average response function @xmath20 of bkp .",
    "the only difference is that we use log - returns rather than price differences . ]",
    "@xmath21 & = & \\sum_{\\tau=0}^t   \\delta r(\\tau ) \\epsilon \\\\ \\nonumber & = & \\epsilon \\sum_{\\tau=0}^t [ p_+(\\tau ) r_+ ( \\tau ) + p_- ( \\tau ) r_- ( \\tau)].\\end{aligned}\\ ] ] @xmath22 is the increment by which the size of the expected price impact increases at time @xmath23 . throughout",
    "we will assume that all price changes are measured as midprice log returns , i.e. changes in the logarithm of the average of the best quotes for buying and selling . by summing the log return increments",
    "@xmath22 we have defined them to be permanent ( though of course positive increments at earlier times might be cancelled by negative increments at later times ) .",
    "@xmath24 is the expected probability for the transaction at time @xmath11 to have sign @xmath2 and @xmath25 is the expected log return for transactions at time @xmath11 with sign @xmath2 .",
    "@xmath26 and @xmath27 have similar definitions but with sign @xmath28 .",
    "the condition that the price impact increases at time @xmath11 is @xmath29 , which can alternatively be written @xmath30 we will call the term on the right , which reflects the predictability of the transaction signs , the",
    "_ transaction imbalance_. similarly , we will call the term on the left , which reflects the asymmetry of the expected price response to buyer vs. seller initiated transactions , the _ return imbalance_.    to understand the factors that influence the return imbalance it is useful to decompose the expected return @xmath31 from directly before the transaction at time @xmath23 to directly before the transaction at time @xmath32 as @xmath33 @xmath34 is the component of the return that is immediately caused by the receipt of the order that initiates the transaction , while @xmath35 is everything else , i.e. it includes all changes due to cancellations , or to limit orders that do not cause immediate transactions .",
    "we can similarly decompose @xmath36 and @xmath37 .",
    "we will call the ratio @xmath38 the _ liquidity imbalance_. this makes the term originally introduced by lillo and farmer more precise . as we will demonstrate in the next section , @xmath39 for large values of @xmath40 , so that the return imbalance is fairly well approximated by the liquidity imbalance .    in figure  [ liquidityimbalance ]",
    "we compare the transaction imbalance , return imbalance , and liquidity imbalance , using data from the on - book market of the london stock exchange for the stock astrazeneca during the period 2000 - 2002 . here and in the following analyses",
    "the time @xmath40 is measured in number of transactions , rather than in real time .",
    "( blue circles ) , return imbalance @xmath41 ( red down triangles ) , and liquidity imbalance @xmath38 ( green up triangles ) , for the stock astrazeneca based on on - book data from @xmath42 . note that we have excluded values at @xmath43 , where they diverge or are undefined ; the peaks occur at @xmath44 . ]",
    "the transaction imbalance reaches a peak just before and after the transaction , and is roughly symmetric for positive and negative values of @xmath40 .",
    "the transaction imbalance is not defined for @xmath45 and the slow decay of transaction imbalance is due to the long memory of order sign . for negative values of @xmath40",
    "the return imbalance rises even more than the transaction imbalance , drops immediately after the transaction , and then builds up again .",
    "the liquidity imbalance behaves similarly but overshoots and becomes negative at small positive values of @xmath40 and then responds more slowly , so that after @xmath46 it is roughly equal to the transaction imbalance ( and the return imbalance ) .",
    "this result can be interpreted as follows .",
    "prior to the transaction there is a buildup of the liquidity imbalance , which is amplified by direct movement of quotes . immediately after the transaction the liquidity at the opposite best price",
    "is depleted by the transaction , so that the liquidity imbalance dips below one .",
    "this means that the price impact is actually amplified by the liquidity imbalance .",
    "however , the depth of orders at the opposite best price immediately builds , and the liquidity imbalance quickly rises above one .",
    "even though orders of the same sign continue to be more frequent , their impact is blunted by the buildup of liquidity at the opposite best .",
    "after about @xmath47 transactions this buildup becomes sufficiently strong so that the imbalance of signs is cancelled by the asymmetry in the price response .",
    "to make the time dynamics of the price impact more clear , in figure  [ impactdynamics ] we show @xmath31 , @xmath48 and @xmath35 as a function of time .",
    "( black down triangles ) , @xmath49 ( blue circles ) and @xmath35 ( green crosses ) for the stock astrazeneca based on on - book data from @xmath42 .",
    "returns are in units of the average spread , which is 0.00154 in logarithmic price . ]",
    "this shows that price efficiency is mainly the result of the liquidity imbalance and not mean - reverting quote changes .",
    "@xmath31 quickly approaches zero due mainly to the quick decay of @xmath34 , which is a result of the liquidity imbalance .",
    "@xmath50 begins above zero , which pushes prices further from efficiency , but eventually does turn negative and helps to mean - revert the price .",
    "this effect is relatively small , however , and is not consistent across stocks , as we show in a moment for vodafone - where @xmath51 has an overall effect of making prices less efficient .    in figure  [ cumulativeimpact ]",
    "we present cumulative price impacts for vodafone rather than astrazeneca .",
    "( red up triangles ) is the naive cumulative price impact calculated as a sum of fixed price impacts with no liquidity variation and no variable quote updating .",
    "@xmath52 ( green crosses ) includes the effect of non - transaction driven quote changes but does not include fluctuating liquidity .",
    "@xmath53 ( blue circles ) includes the effect of the liquidity imbalance , without including any effect of non - transaction driven quote changes .",
    "finally , @xmath54 ( black down triangles ) corresponds to the real cumulative price impact .",
    "all results are for the stock vodafone group based on the on - book data from @xmath42 .",
    "returns are in units of the average spread , which is approximately 0.00246 in logarithmic price . ]",
    "we show four different curves .",
    "the first of these ( red up triangles ) shows the naive cumulative price impact , defined as @xmath55 $ ] , where @xmath56 is a constant , the average unconditional absolute midprice impact measured from immediately before to immediately after a transaction .",
    "this amounts to assuming that there is no fluctuating liquidity and no non - transaction driven quote changes  as each transaction arrives it gives the price a kick , whose size is independent of time and equal to the average value .",
    "the second curve ( green crosses ) adds the quote changing effects of limit orders and cancellations , @xmath57 $ ] .",
    "this would be observed if all transactions had impact @xmath56 and non - transaction driven quote changes occurred as usual .",
    "bouchaud et al originally conjectured that non - transaction driven quote changes play a major role in mean reverting prices .",
    "we see that in this case they actually have the opposite effect ",
    "they increase rather than decrease the cumulative expected return .",
    "the third curve ( blue circles ) shows the cumulative price impact if only the effects of fluctuating liquidity on transaction impacts are included , @xmath58 .",
    "all non - transaction driven quote changes are excluded . in this case",
    "the return is actually more efficient than the true cumulative price impact ( black down triangles ) , @xmath59 $ ] . for astrazeneca",
    "we observe the opposite behavior , i.e. for @xmath40 larger than 20 transactions @xmath60 is smaller than @xmath61 and @xmath62 is larger than the true cumulative impact @xmath63 .",
    "however the effect of non - transaction driven quotes is generally very small , as originally demonstrated by lillo and farmer .    in this section and throughout the comment we have assumed that the imbalance in market order impacts is due only to the liquidity imbalance , but this is not entirely true .",
    "an imbalance in transaction volumes can also cause an imbalance in market order impacts .",
    "in other results that we do not describe here , we find that the liquidity imbalance is the dominant effect .",
    "we also find that the imbalance in market order impacts is largely driven by an imbalance in the frequency with which transactions cause non - zero returns , rather than asymmetric variations in the size of the returns .",
    "we intend to report these results in more detail in a future paper ( farmer et al . , @xcite ) .",
    "one of the reasons that bouchaud et al . argued that the bare impact must be temporary was the observation of mean reversion of price impact at very long times . in the range @xmath64",
    ", they sometimes observe that price impact becomes close to zero or even becomes negative , while in other cases it increases dramatically .",
    "they argue that this reflects fluctuations in the balance between liquidity taking and liquidity providing  in some stocks and in some periods the liquidity providers are stronger , and in others the liquidity demanders are stronger .",
    "a key issue that is not properly addressed is statistical significance .",
    "are these deviations real , or are they just statistical fluctuations , causing random variations from stock to stock ? in figure  10 of bouchaud et al .",
    "there are error bars on the price impact , which appear to indicate that the reversion of the impact that is empirically observed is statistically significant . however , these are based on standard errors .",
    "this can be problematic when long - memory is a possibility , in which case under the assumption of a normal distribution the one standard deviation errors are of size @xmath65 where @xmath66 is the number of non - overlapping observations , @xmath67 is the hurst exponent , and @xmath68 is the standard deviation of the random process ( beran , @xcite ) .",
    "when @xmath69 this reduces to the expression for standard error , but when @xmath70 there is long - memory and errors can be much larger than one might naively expect .",
    "volatility is a long - memory process with hurst exponents in the neighborhood of @xmath71 ( gillemot , farmer , and lillo , @xcite ) .",
    "thus , errors decrease roughly as the fourth root rather than the square root of the number of non - overlapping observations .",
    "this problem is compounded by the fact that the increments of the response function are overlapping .",
    "thus , in a data series with a million points , at lags of @xmath72 there are only 1000 non - overlapping intervals .",
    "to avoid crossing daily boundaries bouchaud et al and bkp only used events within the same day , which decreases the number of independent intervals for large values of @xmath73 even more .",
    "because of the overlapping intervals and long - memory effects , errors at nearby times are highly correlated  once the price impact function becomes large ( or small ) , it is likely to remain so for some time simply because of the correlated errors .    properly resolving",
    "the question of whether or not the large excursions of the price impact at long times are statistically significant is a difficult job that is beyond the scope of this comment .",
    "but just to illustrate the problem , in figure  [ statisticalsignificance ] we make a crude estimate of error bars for the price impact .",
    "( triangle up ) .",
    "the circles are the estimated mean impact . for comparison",
    "the figure shows also standard errors ( triangle down ) .",
    "returns are shown in units of the average spread . ]",
    "we do this by measuring the standard deviation @xmath74 of impacts at several different time intervals @xmath73 and estimating the one standard deviation statistical error using equation  [ significanceformula ] .",
    "the number of non - overlapping intervals is @xmath75 , where @xmath76 is the total number of points in the data set .",
    "because the standard deviation of the impact grows roughly as @xmath77 , the error bars therefore grow roughly as @xmath78 . as a result , at @xmath79 the error bars become bigger than the estimated values .",
    "the figure also shows the error bars computed assuming standard errors , i.e. @xmath80 . in this case",
    "the error bars are smaller than the mean values .",
    "this procedure is crude ",
    "it assumes normality , which is a poor assumption for price impacts , and the use of overlapping intervals should give a somewhat more accurate estimate than this procedure would indicate .",
    "but at least it takes long - memory into account , and it indicates that a more careful study is needed to determine whether the divergences in the price impact observed at long times by bouchaud et al and bkp are statistical fluctuations .",
    "while the discussion in sections  2 and 3 gives insight into _ how _ efficiency is maintained , it does not address the strategic motivations for _ why _ it is maintained .",
    "is the motive profit seeking , liquidity demanding , risk reduction , or is there some other cause ?",
    "if it is profit seeking , then what kind of strategy causes the inefficiency to be removed ?",
    "for example , suppose there is a buying wave .",
    "we have demonstrated that the main force stopping a run up in prices is the rapid formation of a liquidity imbalance .",
    "is this imbalance created intentionally by market makers , or is it a side effect of some other behavior ?",
    "bouchaud et al and bkp speculate that this is due to intentional controlling of prices by market makers .",
    "we fully agree that long - memory is bad news for market makers , but whether they can solve it by controlling the price is not so obvious .",
    "the main reasons for our skepticism are inventory control and the need for cooperative behavior if market making is competitive .",
    "when a buying wave occurs , to keep the price from rising by maintaining a liquidity imbalance the market makers must sell and thereby absorb most of the buying wave themselves .",
    "this causes them to accumulate a negative inventory . to flatten this inventory they eventually have to buy , which will tend to drive the price up .",
    "alternatively , they might wait for the next selling wave , but this could be a long time coming  once in a buying wave , because of the long - memory , the most likely future is more buying waves .",
    "also , it might not match the previous buying wave in size , still leaving them with a net negative inventory . in a competitive market making situation ( which exists for both the london and paris stock exchanges ) , inventory constraints gives strong incentives for market makers to try to free ride on each other .",
    "once they have fulfilled their inventory goals , free riders will back their quotes off to let someone else absorb the rest of the dangerous negative inventory .",
    "it seems that the nash equilibrium would be for everyone to defect .",
    "taken together , these issues could make it difficult for market makers to control the price , particularly in a competitive situation .",
    "an alternate hypothesis is that liquidity providing and liquidity taking are self - reinforcing .",
    "liquidity is not only provided by market makers  it is also provided by directional traders who are simply more patient than their liquidity taking cousins . by directional trader",
    "we mean someone who at any given time either wants to buy or wants to sell but never wants to do both . because they are more patient they use limit orders , but to avoid broadcasting their true intentions they only place orders of a size that they think the market can absorb , and place new orders only after their existing orders are hit .",
    "when the patient sellers observe an impatient buying wave of liquidity takers , they increase the size of their sell orders and replace them more frequently .",
    "the impatient buyers see the resulting increase in liquidity , which stimulates them to submit more market orders .",
    "this gives rise to bi - directional causality  buy liquidity taking causes sell liquidity providing , and sell liquidity providing causes buy liquidity taking ( and similarly with buying and selling reversed ) .",
    "this scenario is indirectly suggested by the lack of a clear lead - lag relationship between liquidity taking and liquidity providing in figure  1 .",
    "the key difference is that under this scenario the inventory swings are absorbed by traders who want to absorb them , rather than by market makers who may not want to absorb them if they are too large .",
    "market makers will participate in liquidity provision to the extent that it conforms to their inventory constraints , but hide behind directional liquidity providers when it does not .",
    "such bursts of buying and selling may be triggered by the occurrence of large hidden orders , according to the theory developed by lillo , mike and farmer ( @xcite ) .",
    "when traders receive large hidden orders , some may choose to execute them via a sequence of smaller limit orders and some via a sequence of smaller market orders . in either case , under this scenario such a hidden order will trigger a response of other hidden orders of the opposite sign and opposite liquidity type , amplifying the exogenous input of large hidden orders .",
    "we have demonstrated that efficiency in the face of long - memory in transaction signs is maintained by the creation of a liquidity imbalance that asymmetrically alters the expected return triggered by a transaction .",
    "this liquidity imbalance takes a fairly short time to build up  for the cases we have observed here most of the build up happens in about 5 transactions ( on average a few minutes for astrazeneca ) , and the build up is completed by about 40 transactions ( on average about 25 minutes for astrazeneca ) . as a result the price impact rises to roughly @xmath81 of the average spread and then levels out . under this view , price impact is variable and permanent .",
    "when a transaction happens , it affects the next 40 or so transactions by building up their liquidity , until the liquidity imbalance matches the transaction imbalance , and after that the two move in tandem .",
    "this generalizes the proposal originally made by lillo and farmer by allowing some time ( but not much ) for the growth of the liquidity imbalance .",
    "the fixed bare propagator approach of bouchaud et al does not formally contradict this view  in fact in bkp they more or less embrace it .",
    "however , to us this interpretation does not seem to arise naturally from their formalism . by proposing a bare propagator that is fixed",
    ", their phenomenological theory requires that it be temporary in order to eventually blunt the growth of the price impact .",
    "this is formally correct  once the liquidity imbalance is set up , for @xmath16 the time decay of the bare propagator is needed to match the time decay of the transaction imbalance .",
    "we think that the results we have presented here shows that it is simpler and more natural to think in terms of a permanent but variable impact function .",
    "this is perhaps just a matter of taste ",
    "one can think about this phenomenon in either way . in any case , in this comment we have presented some new results that make the explicit mechanisms that enforce market efficiency clearer .",
    "we would like to thank barclay s",
    "bank for supporting this research .",
    "f.l acknowledges partial support from miur research project  dinamica di altissima frequenza nei mercati finanziari \" , miur - firb research project rbne01cw3 m and nest - dysonet 12911 eu project .",
    "we would also like to thank j - p .",
    "bouchaud and marc potters for useful discussions ."
  ],
  "abstract_text": [
    "<S> in this comment we discuss the problem of reconciling the linear efficiency of price returns with the long - memory of supply and demand . </S>",
    "<S> we present new evidence that shows that efficiency is maintained by a liquidity imbalance that co - moves with the imbalance of buyer vs. seller initiated transactions . for example , during a period where there is an excess of buyer initiated transactions , there is also more liquidity for buy orders than sell orders , so that buy orders generate smaller and less frequent price responses than sell orders . at the moment a buy order is placed the transaction sign imbalance tends to dominate , generating a price impact . </S>",
    "<S> however , the liquidity imbalance rapidly increases with time , so that after a small number of time steps it cancels all the inefficiency caused by the transaction sign imbalance , bounding the price impact . while the view presented by bouchaud et al . of a fixed and temporary bare price impact </S>",
    "<S> is self - consistent and formally correct , we argue that viewing this in terms of a variable but permanent price impact provides a simpler and more natural view . </S>",
    "<S> this is in the spirit of the original conjecture of lillo and farmer , but generalized to allow for finite time lags in the build up of the liquidity imbalance after a transaction . </S>",
    "<S> we discuss the possible strategic motivations that give rise to the liquidity imbalance and offer an alternative hypothesis . </S>",
    "<S> we also present some results that call into question the statistical significance of large swings in expected price impact at long times . </S>"
  ]
}