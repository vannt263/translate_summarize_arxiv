{
  "article_text": [
    "we begin by introducing our main object of study .",
    "let @xmath0 be a partition @xmath1 , where the @xmath2 s are positive integers ( note that our partitions will always be written with the parts in weakly increasing order . )",
    "the * ferrers board * @xmath3 is the grid consisting of @xmath2 left - justified squares in the @xmath4-th row from the bottom , as in figure  [ ferrers ] .",
    "the ferrers board corresponding to the partition ( 2 , 3 , 3 , 6 ) . ]",
    "a classical combinatorial problem is that of rook - equivalence  @xcite : when is it the case that , for each @xmath5 , the number of ways to place @xmath5 non - attacking rooks on each of two ferrers boards is the same ?",
    "this problem was originally solved by foata and schtzenberger  @xcite , and later reproved by goldman , joichi , and white  @xcite , who showed that @xmath3 and @xmath6 are rook - equivalent if and only if the multisets @xmath7 and @xmath8 are the same .",
    "we give these sequences of numbers a name .",
    "let @xmath0 be a partition .",
    "the * gjw sequence * of @xmath0 is the sequence @xmath9 .",
    "note that the gjw sequence can not decrease by more than 1 .    throughout this paper",
    ", we will consider only partitions @xmath0 which contain a staircase , i.e. such that for all @xmath10 , @xmath11 .",
    "this is equivalent to the gjw - partition containing only nonnegative integers ; these partitions are the ones which can actually accommodate @xmath12 rooks .",
    "to such a board , we can associate a schubert variety @xmath13 inside a certain partial flag manifold , consisting of all flags @xmath14 such that dim(@xmath15 ) = i and @xmath15 is contained inside the subspace of @xmath16 generated by the first @xmath2 basis vectors .",
    "this construction is due to ding  @xcite , who applied work of garsia and remmel  @xcite to compute the poincare series of these varieties . in earlier work with j. martin and v. reiner , we classified these varieties up to isomorphism .",
    "@xcite[dmr - thm ] two schubert varieties @xmath13 and @xmath17 are isomorphic if and only if upon removing 0 s from their gjw sequences , the remaining multisets of contiguous blocks are identical .",
    "indeed , this is the only way they can have isomorphic cohomology rings over @xmath18 .",
    "0 s in the gjw sequence correspond to subspaces in the flag where @xmath15 is completely specified ; the decomposition into blocks given in theorem  [ dmr - thm ] therefore expresses the original schubert variety as a product of constituents given by the blocks .",
    "the content of the theorem is that this is the * only * way that two boards can yield isomorphic schubert varieties , or even ones with isomorphic cohomology rings .",
    "we can say a lot about these ding schubert varieties simply from the combinatorics of the ferrers board .",
    "the following poset is the key ingredient .    to each maximal rook placement @xmath19 on a ferrers board @xmath0",
    ", we associate a sequence @xmath20_{i=1}^n$ ] where @xmath21 is the position ( i.e. column index ) of the rook in the @xmath4-th row .",
    "the * rook poset * @xmath22 has elements given by the maximal rook placements , with @xmath23 if for each @xmath24 , the set @xmath25 , placed in increasing order , is positionwise less than or equal to the set @xmath26 placed in increasing order .",
    "for example , consider the ferrers board given by the partition @xmath27 .",
    "the rook placement @xmath28 $ ] lies below the rook placement @xmath29 $ ] in the rook poset : sorting each initial segment , we find that @xmath30 , @xmath31 , @xmath32 , @xmath33 , and @xmath34 .",
    "some statements about the rook poset are immediate :    the rook poset has a maximal element @xmath35 , given by placing each rook as far to the right as it will go , starting from the bottom , and a minimal element @xmath36 , given by placing the rook in row @xmath4 in position @xmath4 .",
    "for instance , the maximal element of ( 3 , 3 , 5 , 6 , 6 ) is [ 3 , 2 , 5 , 6 , 4 ] .",
    "each initial segment is easily seen to be maximal among all initial segments of rook placements , and hence this element is maximal .",
    "the minimal element of ( 3 , 3 , 5 , 6 , 6 ) is [ 1 , 2 , 3 , 4 , 5 ] , again trivial to verify .",
    "our goal is to investigate when two such rook posets are isomorphic .",
    "the following definition and proposition provide one such case .",
    "let @xmath0 be a partition with @xmath37 .",
    "define the * conjugate * of @xmath0 as follows : take the ferrers board of @xmath0 , add a row of @xmath38 boxes at the top , reflect the diagram ( which now has width and height both equal to @xmath38 ) across the upper - left to lower - right diagonal , and remove the top row of @xmath38 boxes .",
    "the resulting ferrers board is the conjugate of @xmath0 .",
    "we similarly call two gjw sequences ending in 1 conjugate if their underlying partitions are .     conjugate partitions .",
    "the one on the left has @xmath39 , and it is conjugate to the one on the right , which has @xmath40 . ]",
    "the following proposition is relatively straightforward .",
    "[ conjugate ] the rook posets of @xmath0 and of its conjugate are isomorphic .",
    "the isomorphism is given by taking a maximal rook placement on @xmath0 , extending it to a maximal rook placement on @xmath41 in the only way possible , conjugating the rook placement , and removing the top row .",
    "less obvious is the natural grading placed on the rook poset .",
    "@xcite given a maximal rook placement @xmath19 , complete the its sequence to a permutation @xmath42 of @xmath43 by sending each of @xmath44 in turn to the smallest possible value .",
    "define @xmath45 to be the number of inversions in this permutation , i.e. the number of @xmath46 with @xmath47 .",
    "then @xmath45 defines a grading on the rook poset .",
    "ding  @xcite showed that the rank sizes under this grading yield the poincar series of the corresponding schubert variety .",
    "in addition , he showed that an individual rook placement corresponds to a schubert cell , whose dimension is equal to the rank of the rook placement ; the closure of this schubert cell consists of the union of all of the schubert cells corresponding to rook placements lying below it in the rook poset .",
    "the covering relations are given by single inversions , which amount to performing one of the following two operations to obtain a maximal rook placement immediately below a given maximal rook placement ( see figure  [ moves ] . )     a switch move ( left ) and push move ( right ) . ]    [ switch ] if rooks lie in positions @xmath48 and @xmath49 with @xmath50 and @xmath51 , and the rectangle defined by these two squares empty aside from the two rooks at its corners , switch these rooks out in favor of @xmath52 and @xmath53 .",
    "we call this a * switch move * on rook @xmath4 .",
    "[ push ] if a rook lies in position @xmath48 , column @xmath5 is empty with @xmath54 , and for all @xmath55 , there is a rook in column @xmath56 below row @xmath4 , then replace the rook at @xmath57 with one at @xmath58 .",
    "we call this a * push move * on rook @xmath4 .    if the last element of the gjw sequence is a 1 or a 0 , the rook poset is isomorphic to the interval @xmath59 $ ] in the bruhat order on the symmetric group @xmath60 ; if it is not , then it is isomorphic to a lower interval in the bruhat order of the associated partial flag manifold .",
    "the permutation @xmath61 is of course the identity , so investigating the structure of rook posets is tantamount to investigating lower intervals in the bruhat order . focusing on the first case above , the permutations @xmath62 are precisely those which are 312-avoiding , an important class of permutations .",
    "a description of when two ferrers boards have isomorphic rook posets therefore produces as a corollary a description of when the lower intervals of 312-avoiding permutations in the bruhat order are isomorphic .    in this paper",
    ", we establish necessary and sufficient conditions for two rook posets to be isomorphic .",
    "this establishes a notion of equivalence of ferrers boards stronger than ordinary rook - equivalence and weaker than the finer rook - equivalence given by isomorphism of the corresponding schubert varieties . aside from being of intrinsic combinatorial interest , this has two other main consequences : it gives us geometric information about the schubert cell structures of the ding varieties , and it gives us an exact classification of lower intervals of 312-avoiding permutations in the bruhat order up to isomorphism .",
    "after extensive experimentation , martin , reiner , and wagner  @xcite formulated the conjecture which is the main theorem of this paper .",
    "[ mainthm ] let @xmath0 and @xmath63 be two partitions .",
    "then the corresponding ferrers boards have isomorphic rook posets if and only if when we break the gjw sequences of @xmath0 and @xmath63 after every 1 , and throw out all zeroes , the resulting multisets of contiguous blocks are identical up to conjugation .",
    "for instance , the gjw sequences 22321010032 and 13222132 correspond to ferrers boards with isomorphic posets : the first sequence breaks into 22321 , 1 , and 32 while the second breaks into 1 , 32221 , and 32 .",
    "22321 and 32221 turn out to be conjugate , while the other two blocks are identical .",
    "note that only one block can not end in a 1 , the last one ; since all 0 s must follow 1 s ( because the sequence can not decrease by more than one ) , all other blocks end in 1 s .",
    "it is relatively straightforward to show one direction , namely that if two gjw sequences produce identical block multisets up to conjugation , then their rook posets are equivalent .",
    "the remainder of this section will prove this by checking each operation involved .",
    "[ productlem ] let @xmath64 be a partition .",
    "then the rook poset of @xmath0 is isomorphic to the product of the rook posets of @xmath65 and @xmath66 .    because of the existence of the 0 row , a maximal rook placement on @xmath0 simply consists of the union of a maximal rook placement on @xmath67 and a maximal rook placement on @xmath66 whose rooks all lie to the right of the rightmost square in @xmath67 .",
    "the two parts of the maximal rook placement do not interact in any way , and the statement follows easily ; the rook posets of @xmath67 and @xmath65 are easily seen to be isomorphic .    indeed , not only the rook posets , but also the schubert varieties and cohomology rings are isomorphic .",
    "less trivial is the fact that we can break the blocks after 1 s .",
    "[ ins0lem ] let @xmath68 be a partition .",
    "then @xmath0 and @xmath69 have isomorphic rook posets .",
    "let the number of parts in @xmath65 be @xmath70 , so that the inserted row is in position @xmath12 and has length @xmath12 .",
    "we describe the isomorphism . given a maximal rook placement @xmath71 on @xmath0 , we define a maximal rook placement @xmath72 on @xmath73 as follows ; see figure  [ insertion ] .    * for @xmath74 , @xmath75 .",
    "* let @xmath76 be the unique integer from @xmath77 $ ] which is not one of @xmath78 .",
    "* for @xmath79 , @xmath80 , unless @xmath81 ( i.e. is the missing column from @xmath77 $ ] ) , in which case @xmath82 .",
    "it is straightforward to verify that this procedure yields a maximal rook placement .",
    "the fact that this operation preserves the rook poset structure is similarly easy to check , containing a couple of cases , and is left to the reader .",
    "finally , the map is clearly a bijection , since we can recover @xmath19 from @xmath72 by removing the @xmath12-th row , shortening the @xmath83-st and higher rows by one box ( on the left ; these boxes must be empty ) , and moving any rook formerly in the @xmath83-st column to the column formerly occupied by the excised @xmath12-th row rook .",
    "isomorphism of rook posets under the insertion of a 0 after a 1 in the gjw sequence .",
    "a row is inserted to create the 0 , and its rook is uniquely specified ; the rook formerly in that column is moved to an inserted column immediately to the right of the inserted row .",
    "the gjw sequence of the new diagram ( here @xmath84 ) is the same as that of the old one ( here @xmath85 ) with an extra 0 inserted after a 1 . ]    by inserting 0 s after all the 1 s via lemma  [ ins0lem ] , and applying lemma  [ productlem ] , we conclude that the rook poset of a partition is equal to the product of the rook posets of its blocks ( as defined in theorem  [ mainthm ] . ) by proposition  [ conjugate ] , conjugate partitions have isomorphic rook posets , which completes the proof of the easy direction of the theorem .",
    "the hard direction of theorem  [ mainthm ] is proving that two partitions which do not decompose identically into blocks , up to conjugation , actually have non - isomorphic posets . showing that two posets are not isomorphic",
    "is generally rather ad - hoc ; the garsia - remmel and ding results determine when the gradings of these posets yield different rank sizes ( one easy way to show that two posets are not isomorphic ) , namely when their gjw multisets are different , but the conditions of theorem  [ mainthm ] are much more restrictive .",
    "our approach is to use a case - by - case analysis to rule out all other isomorphisms , reconstructing the gjw sequence from the rook poset up to the equivalence of theorem  [ mainthm ] .",
    "this approach will also yield intrinsic information about the poset ( and therefore the ding schubert variety ) which can be read off from the gjw sequence . at times",
    ", we will use an induction on the number of boxes in the diagram , assuming that we can distinguish the rook posets of smaller diagrams which do not satisfy the hypotheses of theorem  [ mainthm ] .",
    "because of lemma  [ ins0lem ] , we will assume that there is exactly one 0 after every 1 .",
    "this means that the x - coordinates of the rooks in distinct blocks lie in distinct intervals",
    ". our main objects in the investigation will be the * coatoms * , the elements which have rank one less than the maximal element @xmath35 .",
    "[ coatomrow ] there is a natural bijection between the non - zero elements of the gjw sequence and the coatoms of the corresponding rook poset .",
    "the maximal element @xmath35 has its rooks as far to the right as possible . for each row",
    ", we need to enumerate the switch moves on the rook in that row , as well as the push moves on it .",
    "we claim that for each row @xmath4 corresponding to a non - zero gjw element there is exactly one move , and for each row corresponding to a 0 in the gjw sequence , there are no moves .",
    "suppose that row @xmath4 corresponds to a 0 in the gjw sequence .",
    "then @xmath86 , and each of the rooks in the first @xmath4 rows lies in the first @xmath4 columns .",
    "therefore , each of the first @xmath4 columns contains a rook in or below row @xmath4 , and so none can contain a rook above row @xmath4 . since the rook in row @xmath4 is in one of these columns , there are no rooks above and to the left of it , so there are no switch moves on rook @xmath4 . similarly ,",
    "every column to the left of the rook in row @xmath4 s column is occupied by a rook below it , so there are no push moves on rook @xmath4 .    next , suppose that row @xmath4 does not correspond to a 0 in the gjw sequence .",
    "suppose that there are two rooks above and to the left of it , corresponding to two switch moves .",
    "since both rectangles corresponding to the switch moves must be empty , this means that we have rooks at @xmath87 , and @xmath88 with @xmath89 and @xmath90 .",
    "this is impossible , since in @xmath35 the rooks are placed as far to the right in each row as possible , bottom up ; since @xmath91 , and there are no rooks in column @xmath92 below row @xmath19 and hence none below row @xmath56 , we could have placed a rook at @xmath93 .",
    "similarly , if there is a switch move switching @xmath48 with @xmath88 , then there can not be a push move sending @xmath48 to @xmath58 : for @xmath94 , there is a rook in an intervening column above row @xmath4 , while for @xmath95 , this means that column @xmath5 is empty in @xmath35 , so we would have placed @xmath88 at @xmath96 .",
    "so there is at most one move associated to the rook in row @xmath4 .",
    "suppose there is no switch move on the rook in row @xmath4 ; let this rook be in column @xmath24 .",
    "because row @xmath4 does not correspond to a 0 in the gjw sequence , we have @xmath97 .",
    "since there is no switch move on the rook in row @xmath4 , there are no rooks above row @xmath4 in columns @xmath98 .",
    "since we must have placed the rook as far to the right as possible , there must be rooks below row @xmath4 in columns @xmath99 , a total of @xmath100 rooks .",
    "this means that , since there are @xmath101 rooks below row @xmath4 , at most @xmath102 of them lie in columns @xmath98 . therefore , there is an empty column among the first @xmath103 , so there is a push move on @xmath48 , completing the proof of the lemma .",
    "proposition  [ coatomrow ] establishes a bijection between the coatoms and the nonzero elements of the gjw sequence ( or the rows ) ; this yields a natural labeling of the coatoms with their rows .",
    "we can use the gjw sequence to easily determine whether a coatom is a switch move or a push move .",
    "[ whenswitch ] a coatom @xmath4 is a push move if and only if there is no later element of the gjw sequence which is lower than element @xmath4 .",
    "if there is such an element , the row of the first such element is the other row of the switch move .",
    "being a switch move is equivalent to there being a rook above and to the left of the rook in the @xmath4-th row .",
    "this happens if and only if , when we reach some row @xmath104 , the columns @xmath105 are all already filled with rooks .",
    "since we are looking for the first occurrence of this phenomenon , we can assume that all rooks in rows @xmath106 are to the right of the rook in row @xmath4 , so this happens exactly when this number , @xmath107 , is equal for the first time to the number of columns to fill , @xmath108 .",
    "this is equivalent to the statement about gjw sequence elements .    in practice",
    ", we will use this proposition in reverse : once we have determined which row is the other row of a given switch move , this tells us something about the gjw sequence . the next step is to relate the gjw sequence to differences between the structure lying underneath the coatoms .",
    "let @xmath109 be a set of coatoms .",
    "define the * poset generated by i * to be @xmath110 define @xmath111 to be the subset of @xmath112 for which @xmath113 for all @xmath114 .",
    "in other words , @xmath112 is the portion of the poset which does not lie below any coatoms not in @xmath109 , while @xmath111 is the portion of @xmath112 which lies below every coatom in @xmath109 .",
    "our goal is to use the structure of various @xmath112 s to recover the gjw sequence ( up to the equivalences given by theorem  [ mainthm ] . )",
    "a key simplifying lemma allows us to easily check membership in @xmath112 .",
    "[ belowcoat ] suppose the move given by coatom @xmath4 sends the rook at @xmath48 to @xmath58 .",
    "then to check if a maximal rook placement @xmath19 lies below @xmath4 , we need only check whether @xmath115    for @xmath116 , @xmath117 , so @xmath118 since @xmath35 is the maximal element of the rook poset .",
    "suppose first that @xmath4 is a push move .",
    "then for @xmath119 , the rooks in rows @xmath120 are all as far right as possible in the maximal rook placement given by coatom @xmath4 , so if @xmath121 , then since we have @xmath122 for @xmath123 , we will have @xmath118 .    on the other hand ,",
    "suppose @xmath4 is a switch move with row @xmath124 . for @xmath125 , the above logic again suffices .",
    "for @xmath126 , @xmath127 , since the elements are all the same except for @xmath128 and @xmath129 , which are switched .",
    "so we must have @xmath130 .",
    "two coatoms @xmath4 and @xmath24 are * entangled * if there exist two distinct elements of corank two in @xmath131 .",
    "the * entanglement graph * of @xmath0 has vertices equal to the coatoms , with an edge between @xmath4 and @xmath24 if the two coatoms are entangled .",
    "in other words , two coatoms are entangled if there exist two elements which are covered by both of them but by no other coatoms .",
    "the following proposition establishes when two coatoms are entangled .",
    "two coatoms are entangled precisely when there is a switch move between the corresponding rows in @xmath35 .",
    "let the coatoms be @xmath4 and @xmath19 with @xmath132 .",
    "first , suppose there is a switch move between the rows .",
    "then there are rooks in @xmath35 at @xmath48 and @xmath88 ; in @xmath4 those rooks are replaced by @xmath133 and @xmath134 , while in @xmath19 @xmath48 remains fixed and @xmath88 is replaced by @xmath135 for some @xmath136 , possibly with @xmath137 replaced by @xmath138 for @xmath139 ( if @xmath19 is a switch move . ) we claim that there are two maximal rook placements in @xmath140 :    1 .",
    "identical to @xmath35 except with @xmath133 and @xmath135 [ and @xmath141 instead of the rooks in those rows .",
    "identical to @xmath35 except with @xmath142 and @xmath134 [ and @xmath138 ] instead of the rooks in those rows .",
    "it is easy to verify that these lie below only the coatoms @xmath4 and @xmath24 , using lemma  [ belowcoat ] and the fact that no other rook lies in the rectangle with corners @xmath48 and @xmath88 ( or the rectangle with corners @xmath88 and @xmath137 if applicable . )",
    "conversely , suppose that there is no switch move between the rows .",
    "in almost all cases , this means that the coatoms @xmath4 and @xmath19 involve completely unrelated rows ; the only element covered by both of them is the one where @xmath4 and @xmath19 are both done .",
    "the only case which is not straightforward is where @xmath4 and @xmath19 are both switch moves with a common third row , so that in @xmath35 there are rooks at @xmath48 , @xmath88 , and @xmath144 , with @xmath145 and @xmath146 . in this case , the only element which lies beneath both @xmath4 and @xmath19 is the one where these rooks are replaced by @xmath147 , @xmath134 , and @xmath138 and the rest of the placement remains unchanged .",
    "again , this is easy to check by application of lemma  [ belowcoat ] .",
    "the relevant part of the rook poset for entangled coatoms ( left ) and unentangled coatoms ( right ) . ]    [ tree ] the entanglement graph of @xmath0 is a forest .",
    "every coatom has at most one edge connecting it to a coatom which corresponds to a higher row . if the entanglement graph contained a cycle , the lowest coatom in it would violate this criterion .",
    "each component of the forest has a natural root : the row which is highest among the rows comprising that component . placing these roots at the top , beneath each element of the tree",
    ", there is a canonical way to order the children : in increasing order of their row number .",
    "this * ordered entanglement graph * is easily drawn from the diagram .",
    "the ordered entanglement graph of @xmath0 can be drawn from the maximal rook placement @xmath35 as follows : draw a segment connecting any two rooks connected by a switch move , and turn the diagram forty - five degrees clockwise , ignoring all segments ending in a 0 row .",
    "the proof is straightforward .",
    "if two segments crossed , this would imply the existence of multiple switch moves on some rook , which can not happen by proposition  [ coatomrow ] .",
    "if one child lies above another , it also must lie to the right , and hence must have higher coordinate sum ( which is the left - to - right ordering given by the forty - five degree turn . )     how to construct the ordered entanglement graph of a diagram . ]    by definition , we can obtain the entanglement graph from the rook poset .",
    "we now set upon the task of recovering the ordered entanglement graph from the entanglement graph , and the gjw sequence from the ordered entanglement graph , up to the equivalence of theorem  [ mainthm ] .",
    "each connected component of the entanglement graph corresponds to a contiguous set of rows ; our first goal is to recover the blocks , each of which consists of the union of some subset of the connected components .",
    "if every block ends in a 1 ; then the connected components of the entanglement graph of @xmath0 are precisely the blocks ( by proposition  [ whenswitch ] ) .",
    "the only possible problem is introduced by the last block , which may not end in a 1 and thus may consist of several connected components of the entanglement graph .",
    "suppose that a connected component lies in the last block , which does not end in a 1 .",
    "its uppermost row is then a number greater than 1 , with the property that there is no number smaller than it which follows it in the gjw sequence . by proposition  [ whenswitch ]",
    ", it must be a push move .",
    "we can determine even more about it .",
    "[ whenpush ] let @xmath4 be a coatom .",
    "then @xmath148 is a chain whose length is 1 if @xmath4 is a switch move , and the @xmath4-th element of the gjw sequence if @xmath4 is a push move .",
    "suppose first that @xmath4 is a switch move switching @xmath48 and @xmath88 to @xmath133 and @xmath134 .",
    "if row @xmath19 corresponds to a 0 in the gjw sequence , then it is easy to see that no more moves can be performed on the rook in row @xmath4 , and performing a move on any other rook creates a position below the corresponding coatom .",
    "so we reduce to the case where coatom @xmath19 exists .",
    "suppose that coatom @xmath19 sends @xmath88 to @xmath135 .",
    "we need to show that any element of the rook poset lying strictly below @xmath4 lies below some other coatom ; here again lemma  [ belowcoat ] greatly simplifies the calculations which we omit .",
    "if we change the position of any rook other than @xmath4 and @xmath19 , it is easy to see that we will be below the coatom corresponding to that row",
    ". suppose we move rook @xmath4 again , via either a switch move or a push move , to column @xmath149 ; since @xmath150 and @xmath134 are a valid placement with the rest of @xmath35 , @xmath48 and @xmath151 must also be , which implies that @xmath152 .",
    "the new position , with rooks at @xmath142 and @xmath134 , will then be below move @xmath19 .",
    "suppose we change the position of rook @xmath19 via a switch move or push move .",
    "we claim that every move which can be done on @xmath134 in the @xmath4-placement can also be done on @xmath88 in the @xmath35-placement .",
    "the only other possibilities are a push move to a column between @xmath92 and @xmath24 or a switch move with a rook between columns @xmath92 and @xmath24 , but both are impossible since all columns between @xmath92 and @xmath24 must be filled below @xmath19 so that we place rook @xmath19 at @xmath88 .",
    "so the only move on row @xmath19 in the @xmath4-placement sends @xmath88 to @xmath135 , and by lemma  [ belowcoat ] it is immediate that after this move the resulting element of the rook poset lies below coatom @xmath19 .    next ,",
    "suppose @xmath4 is a push move sending @xmath48 to @xmath133 . by lemma  [ belowcoat ] , it is easy to see that the elements in @xmath148 are precisely those which change only the rook in row @xmath4 , as moving any other rook left puts the resulting position below that coatom , and there are no rooks above and to the left of @xmath133 to do a switch move , since such a rook would be above and to the left of @xmath48 , and there are no switch moves on @xmath48 in @xmath35 .",
    "the poset structure of these elements is clearly a chain , and their number is equal to the number of possible rooks @xmath58 , @xmath153 , which are compatible with the rest of @xmath35 ; this is just the number of empty columns to the left of @xmath48 .",
    "since no rooks are above and to the right of @xmath48 , the number of occupied columns is precisely the number of rooks below and to the left of @xmath48 .",
    "the number of rooks below @xmath48 is @xmath101 , and the number of rooks below and to the right of @xmath48 is @xmath154 , so the number of rooks below and to the left of @xmath48 is @xmath155 .",
    "the number of columns to the left of @xmath48 is of course @xmath103 , so the number of unoccupied columns is @xmath156 , the @xmath4-th element of the gjw sequence of @xmath0 as desired .",
    "so the push moves are precisely the coatoms for which @xmath148 is nontrivial .",
    "this yields a way to determine the blocks : if a connected component of the entanglement graph of @xmath0 has @xmath157 for all coatoms @xmath4 in it , then it is a block ending in a 1 ; if not , then it is part of the final block , and the unique coatom with @xmath158 is the uppermost element of the set , with gjw number equal to its size .",
    "we first consider the final block , and show how to deduce the corresponding part of the gjw sequence from it .    the final block consists of a number of sub - blocks , each of which is a connected component with a unique push move coatom , which is the highest row of the sub - block .",
    "we need to first determine the order of the sub - blocks , and then determine the gjw numbers and order of each sub - block .",
    "[ higherpush ] let @xmath4 and @xmath19 be push move coatoms , and let @xmath56 be the smallest element of @xmath148 .",
    "then @xmath56 covers 1 element in @xmath159 if @xmath132 , and two elements otherwise .",
    "suppose that @xmath132 .",
    "there are no rooks above and to the left of either rook @xmath48 or rook @xmath88 in the initial placement ; in particular , @xmath160 .",
    "rooks below row @xmath4 can not be moved if one is to remain in @xmath161 ; similarly , rooks between rows @xmath4 and @xmath19 to the right of column @xmath24 can not be moved , and rooks above row @xmath19 to the right of column @xmath92 can not be moved .",
    "so the only rooks which can be moved in the placements in @xmath161 are the @xmath4-th and @xmath19-th rooks .",
    "therefore , if @xmath162 is the number of empty columns to the left of @xmath24 , and @xmath163 is the number of empty columns to the left of @xmath92 , then @xmath159 is isomorphic to the rook poset of the partition @xmath164 , with @xmath165 .",
    "the minimal element of @xmath148 corresponds to the rook placement @xmath166 $ ] , which covers only @xmath167 $ ] , while the minimal element of @xmath168 corresponds to the rook placement @xmath169 $ ] , which covers both @xmath170 $ ] and @xmath171 $ ] .",
    "this completes the proof .",
    "this gives us the order of the push move coatoms , and consequently the order of the sub - blocks , each of which is a contiguous set of rows with highest row equal to its push move .",
    "each sub - block corresponds to a tree in the ordered entanglement graph , whose root is the push coatom , identifiable as the only one with nontrivial @xmath172 .",
    "what remains is to deduce the ordering of the entanglement tree of each sub - block from the rook poset .",
    "the coatoms connected to the root each have a subtree below them , and each subtree is a set of contiguous rows .",
    "we need to figure out how to order these subtrees , which is tantamount to figuring out how to order the coatoms .",
    "suppose we have two coatoms @xmath24 and @xmath5 connected to the push coatom @xmath4 , and we are trying to figure out which one is higher . as in the proof of proposition  [ higherpush ] ,",
    "@xmath173 is isomorphic to the poset of those three rows , since moving any other rook creates a position below some other element .",
    "this poset is the rook poset of the partition @xmath174 , where @xmath175 because the gjw number of the highest coatom is at least 2 .",
    "but now we can distinguish the higher of coatoms @xmath24 and @xmath5 .",
    "suppose @xmath176 , so that @xmath24 corresponds to the first coatom in the rook poset of @xmath174 , and @xmath5 to the second .",
    "the maximal rook placement is @xmath177 $ ] .",
    "the rook placement for coatom @xmath24 is @xmath178 $ ] , which is the maximal rook placement of @xmath179 .",
    "the rook placement for coatom @xmath5 is @xmath180 $ ] , which is the maximal rook placement of @xmath181 . since @xmath182 ,",
    "these diagrams are not conjugate , and thus by induction on the number of boxes in the diagram we can tell apart their rook posets .",
    "so the lower coatom is the one whose lower interval in the rook poset is isomorphic to that of the partition @xmath179 .",
    "the same procedure works to tell apart children of elements which are not the push coatom .",
    "suppose we are trying to figure out which of @xmath176 is higher , with both @xmath24 and @xmath5 being children of @xmath183 , which is connected to the root @xmath184 via @xmath185 .",
    "isolating the relevant rows as before , the rook poset @xmath186 is isomorphic to the rook poset of @xmath187 , where @xmath188 .",
    "the maximal element of this rook poset is @xmath189 .",
    "then the rook placement @xmath24 is @xmath190 $ ] , which is the maximal element of the rook poset of @xmath191 , while the rook placement @xmath5 is @xmath192 $ ] , which is the maximal element of the rook poset of @xmath193 .",
    "again by the restrictions on @xmath194 , these diagrams are not conjugate , so we can distinguish which is lower among the two coatoms .",
    "this information allows us to recover the ordering of this portion of the entanglement graph .",
    "once we have this , it is easy to recover the gjw sequence of the final block .",
    "we know the order and size of the sub - blocks , and for each sub - block the gjw number of the highest element @xmath4 is simply the size of @xmath148 .",
    "we know exactly how the vertices of the sub - block tree ( in the ordered entanglement graph ) correspond to the other coatoms in the sub - block by the previous reasoning ; given proposition  [ whenswitch ] , this allows us to reconstruct the entire gjw sequence ; see figure  [ gjwrecover ]",
    ".     starting with the ordered entanglement graph of the last block , along with the size of the @xmath148 s corresponding to the push coatoms , we can recover the gjw sequence . using proposition  [ whenswitch ]",
    ", we can recover the gjw numbers of each coatom in the entanglement graph , and the order is given by the ordering of the entanglement graph .",
    "we have inserted parentheses grouping subtrees in the final gjw sequence for clarity . ]    in this fashion , we have reconstructed the last part of the gjw sequence ( the part which does not end in a 1 ) from the rook poset .",
    "we have identified the other blocks , and theorem  [ mainthm ] says that we can not tell apart the order of the other blocks , so all that remains is to determine the structure of a given block ending in 1 , up to conjugation , from its rook poset ( which is @xmath112 in the original rook poset , @xmath109 being the collection of coatoms in the block . )",
    "we start by describing what this conjugation corresponds to in terms of the ordered entanglement graph .    given a block ending in 1 ,",
    "the ordered entanglement graph of its conjugate is the vertical reflection of its ordered entanglement graph ( which is a tree ) .",
    "augment the block by adding a 0 row .",
    "then the ordered entanglement tree of a block is drawn by taking the maximal rook placement @xmath35 and connecting each rook to the unique rook above it and to its left ( the rook which it is switched with ) , except for the top coatom s connection , and turning this 45 degrees clockwise . the maximal rook placement @xmath195 of the conjugate block is just the conjugate of @xmath35 ; this corresponds to reflecting the diagram , including rooks , about the upper - left to lower - right diagonal .",
    "after the rotation of 45 degrees is performed , this corresponds to reflecting the tree along a vertical line .",
    "once we have the ordered entanglement tree , we can recover the gjw sequence of the block from the criterion given by proposition  [ whenswitch ] .",
    "we already know how to obtain the entanglement tree from the poset .",
    "all that remains is to figure out where the root of the tree ( the top row ) is , and figure out up to vertical reflection the order of the children of each node .",
    "[ rootdist ]    for each coatom @xmath4 in a given block , let @xmath196 be an element of the rook poset with minimal rank which does not lie beneath @xmath4 .",
    "then if @xmath4 is a leaf , @xmath197 is equal to the distance between @xmath4 and the root of the entanglement tree of that block , plus one ( i.e. if a coatom is a child of the root , then it is 2 . )",
    "our goal is to find an element of minimal rank which is not less than @xmath4 . by lemma  [ belowcoat ] , this is tantamount to saying that we have @xmath196 of minimal rank such that @xmath198 . since @xmath4 is a leaf , there exists no rook below and to the right of rook @xmath4 in @xmath35 , so none of the first @xmath101 entries of @xmath0 can be @xmath199 or bigger , which implies that @xmath200 . we claim that the rook placement @xmath201 $ ] is such an element @xmath196 , i.e. of minimal rank not lying below @xmath4",
    ". clearly it does not lie below @xmath4 , since none of @xmath202 can be bigger than @xmath2 , and @xmath128 is less than @xmath203 .",
    "furthermore , we claim that we picked this element by taking the minimal possible rook in each row to obtain an element less than @xmath4 .",
    "this is clear for all rows except the @xmath4-th . for the @xmath4-th row",
    ", it follows easily from the fact that move @xmath4 moves rook @xmath4 to the rightmost possible position except for @xmath2 and the positions occupied by the first @xmath101 rooks .",
    "how many inversions are there in this rook placement ?",
    "the only inversions come from @xmath2 being bigger than some later element .",
    "this happens a total of @xmath204 times , i.e. the @xmath4-th element in the gjw sequence of @xmath0 . however , the parent of each coatom is the rook with which it is switched , which is the first rook with smaller gjw number by proposition  [ whenswitch ] .",
    "this gjw number must be one less than the gjw number of the child , since gjw numbers can only decrease by 1 at any step .",
    "proceeding in this fashion , the number of steps in the entanglement graph before we reach the root , which has gjw number 1 , from coatom @xmath4 , is precisely one less than the gjw number of @xmath4 , which is @xmath205 .",
    "this completes the proof of the proposition .",
    "an easy induction shows that knowing how far each leaf is from the root of a tree allows us to determine the identity of this root . drawing the tree with this root at the top ,",
    "all that remains is to order the branches up to mirror reversal .",
    "this is tantamount to doing two things : first , at the highest branch point in the tree , for any three branches we need to be able to determine which is the middle one .",
    "second , for any lower branch point , we need to be able to determine exactly which order the branches are in .",
    "we tackle these tasks in order .",
    "suppose we have three branches at the highest branch point in the tree .",
    "we can isolate the rows corresponding to those three children and to the chain of command heading back to the root , reducing us to the case where the diagram is @xmath206 , where there are @xmath194 rows in total and @xmath207 ; the maximal element of the rook poset is @xmath208 $ ] .",
    "we need to tell apart coatom 2 , which is the rook placement @xmath209 $ ] , from coatom 1 , which is @xmath210 $ ] , and coatom 3 , which is @xmath211 $ ] . however , coatom 2 is the maximal element of the rook poset of the partition @xmath212 , while coatom 1 is the maximal element of the rook poset of @xmath213 , and coatom 3 is the maximal element of the rook poset @xmath214 .",
    "the last two boards are conjugate , but the board associated to coatom 2 is not conjugate to either of them , so again by induction on the number of the boxes in the diagram we can distinguish it from the others .",
    "so , at the first branch point , given any three branches , we can determine which branch is the middle branch .",
    "what remains is , for any branch point which is not the first , to determine what order the branches are in , using information about the order of the branches at the higher levels of the tree . in other words , given two children of a common parent and a branching higher up the tree , we need to determine which of the children is higher . without loss of generality ( just conjugate the diagram ) , we can assume that the branch higher up the tree is to the right of the main branch we are considering .",
    "again isolating the poset @xmath215 for the relevant set of rows , we are left with a copy of the rook poset of the ferrers board @xmath216 , where there are @xmath217 copies of @xmath218 and @xmath219 copies of @xmath220 , for a total of @xmath220 entries . by the conditions given , we have @xmath221 , @xmath222 , and @xmath223 .",
    "the element @xmath35 is @xmath224 $ ] .",
    "thus rook @xmath225 is the branch higher in the tree .",
    "our goal is to tell apart coatoms 1 and 2 .",
    "we use the previous technique of induction on the number of boxes in the diagram once again .",
    "coatom 1 corresponds to the rook placement which replaces the first three rooks in @xmath35 by @xmath178 $ ] ; this is the maximal element of the rook poset of the partition @xmath226 , where there are still @xmath217 copies of @xmath218 and @xmath219 copies of @xmath220 .",
    "similarly , coatom 2 corresponds to the rook placement replacing these rooks by @xmath227 $ ] , so its lower interval is isomorphic to the rook poset of the partition @xmath228 , with @xmath5 copies of @xmath218 and @xmath219 copies of @xmath220 .",
    "again by the conditions on @xmath229 , and @xmath219 , these diagrams are not conjugate , so we can tell their rook posets apart , and consequently we can distinguish coatom 1 from coatom 2 .",
    "this completes the proof of theorem  [ mainthm ] .",
    "we recapitulate the algorithm for determining the gjw sequence from the rook poset .    1 .",
    "draw the entanglement graph of the coatoms .",
    "this is a forest by corollary  [ tree ] .",
    "2 .   for each coatom @xmath4 , determine the size of @xmath148 .",
    "3 .   all connected components with any coatom with @xmath230 are part of the final block by proposition  [ whenpush ] .",
    "each connected component consists of a number of contiguous rows in the final block .",
    "proposition  [ higherpush ] tells us the order of these sub - blocks . 2 .   for each sub - block",
    ", we can recover the root of the tree as the unique coatom with @xmath230 , and we can recover the order of the branches at each level .",
    "the last element of the gjw sequence of a sub - block is the size of @xmath148 for the top coatom , and we can recover the other elements in that sub - block by knowing the ordered tree and by proposition  [ whenswitch ] .",
    "any other connected component is a block of its own . 1",
    ".   we can determine the top coatom by proposition  [ rootdist ] .",
    "2 .   at the first branch point",
    ", we can determine the order of the branches up to mirror - reversal .",
    "3 .   at any other branch point",
    ", we can determine the order of the branches by using the order of the branches further up the tree .",
    "therefore , we can determine the entire rooted tree up to mirror - reversal .",
    "the last element of the gjw sequence of a block is 1 , and we can recover the other elements in that block by knowing the ordered tree and by proposition  [ whenswitch ] .",
    "mirror - reversing the tree corresponds to taking the conjugate ferrers board .",
    "the two main applications of the resolution of this combinatorial problem were mentioned in the introduction .",
    "first , the category of rook posets of diagrams includes the category of lower intervals of 312-avoiding permutations in the bruhat order on the symmetric group @xmath231 .",
    "therefore , theorem  [ mainthm ] has as a corollary a classification of poset isomorphism types of lower intervals of such permutations in the bruhat order . breaking up",
    "the set into blocks is the same as giving a nonzero composition of @xmath77 $ ] and considering the permutation which is the natural product of permutations on the components of the composition .",
    "note that conjugating the diagram corresponds to taking the inverse permutation .",
    "the steps used to prove theorem  [ mainthm ] have implications for the structure of these lower intervals .",
    "proposition  [ whenpush ] and proposition  [ rootdist ] are interesting statements about the bruhat order , and the investigation of the @xmath112 s is an investigation of how the various subintervals fit together .",
    "in addition to classifying when 312-avoiding permutations in the bruhat order are isomorphic , theorem  [ mainthm ] also covers some non-312-avoiding permutations ( permutations produced when the last part is greater than 1 may contain 312-subsequences . )",
    "an obvious question to ask is the following generalization of the bruhat translation of theorem  [ mainthm ] :    when are two lower intervals in the bruhat order isomorphic ?    the other main application is to ding s schubert varieties .",
    "schubert cells are in bijection with rook placements , with the closure of a schubert cell equal to the union of the cells of all rook placements which lie below it .",
    "proposition  [ whenpush ] tells us about the occurrence of simple substructures ( self - contained chains of cells ) , and theorem  [ mainthm ] gives us an exact categorization of when the poset cell structures of two ding varieties are the same .",
    "this equivalence fits in between two previous notions of equivalence .",
    "ordinary rook equivalence corresponds to two schubert varieties having identical poincar series  @xcite , or to their integral cohomology rings being isomorphic as graded abelian groups .",
    "the finer rook equivalence given by theorem  [ dmr - thm ] tells us when two ding varieties are isomorphic , or when their cohomology rings are isomorphic as graded rings .",
    "the condition of theorem  [ mainthm ] is , from the combinatorics , visibly stronger than the first and weaker than the second .",
    "comparing theorem  [ mainthm ] to theorem  [ dmr - thm ] tells us when two schubert varieties can have the same poset of schubert cells but not be isomorphic or have identical cohomology .",
    "these situations are generated by three operations : adding 0 s after 1 s , removing 0 s , and conjugating blocks ending in 1 s ( one can think of this as adding a 0 , conjugating a block ending in 0 , and then removing the 0 . )    what does the equivalence condition of theorem  [ mainthm ] tell us about the cohomology rings of the corresponding schubert varieties ?",
    "in other words , do these operations preserve some interesting invariant of the cohomology ring ? what do the operations of conjugation and adding 0 s after 1 s do to the schubert variety ?    adding 0 s after 1 s changes the schubert variety from a nontrivial fiber bundle to a straightforward product ; can we say more ?",
    "what does conjugation do to the schubert variety ?",
    "i would like to thank vic reiner for comments on an early draft of this paper , and jeremy martin for observing the first sentence of the last paragraph .",
    "d.  foata and m .-",
    "schtzenberger , on the rook polynomials of ferrers relations .",
    "combinatorial theory and its applications , ii ( proc .  colloq .",
    ", balatonfred , 1969 ) , pp .",
    "north - holland , amsterdam , 1970 ."
  ],
  "abstract_text": [
    "<S> a natural construction due to k. ding yields schubert varieties from ferrers boards . </S>",
    "<S> the poset structure of the schubert cells in these varieties is equal to the poset of maximal rook placements on the ferrers board under the bruhat order . </S>",
    "<S> we determine when two ferrers boards have isomorphic rook posets . </S>",
    "<S> equivalently , we give an exact categorization of when two ding schubert varieties have identical schubert cell structures . </S>",
    "<S> this also produces a complete classification of isomorphism types of lower intervals of 312-avoiding permutations in the bruhat order . </S>"
  ]
}