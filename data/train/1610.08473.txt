{
  "article_text": [
    "many real - world networks can not be studied directly because they are obscured in some way , are too large , or are too difficult to measure .",
    "there is therefore a great deal of interest in estimating properties of large networks via sub - samples @xcite .",
    "one of the most important properties of a large network is the number of vertices it contains .",
    "unfortunately census - like enumeration of all the vertices in a network is often impossible , so researchers must try to learn about the size of real - world networks by sampling smaller components .",
    "in addition to the size of the total network , there is great interest in estimating the size of different _ communities _ or sub - groups from a sample of a network .",
    "many real - world networks exhibit community structure , where nodes in the same community have denser connections than those in different communities  @xcite . in the following examples ,",
    "we describe network size estimation problems in which only a small subgraph of a larger network is observed",
    ".    * social networks . * the social and economic value of an online social network ( e.g. facebook , instagram , twitter ) is closely related to the number of users the service has . when a social networking service does not reveal",
    "the true number of users , economists , marketers , shareholders , or other groups may wish to estimate the number of people who use the service based on a sub - sample @xcite . * world wide web .",
    "* pages on the world - wide web can be classified into several categories ( e.g. academic , commercial , media , government , etc . ) .",
    "pages in the same category tend to have more connections .",
    "computer scientists have developed crawling methods for obtaining a sub - network of web pages , along with their hyperlinks to other unknown pages . using the crawled sub - network and hyperlinks",
    ", they can estimate the number of pages of a certain category  @xcite .",
    "* size of the internet . *",
    "the number of computers on the internet ( the size of the internet ) is of great interest to computer scientists .",
    "however , it is impractical to access and enumerate all computers on the internet and only a small sample of computers and the connection situation among them can be accessible  @xcite .",
    "* counting terrorists . * intelligence agencies often target a small number of suspicious or radicalized individuals to learn about their communication network . but agencies typically do not know the number of people in the network . the number of elements in such a covert network might indicate the size of a terrorist force , and would be of great interest  @xcite .    * epidemiology . * many of the groups at greatest risk for hiv infection ( e.g. sex workers , injection drug users , men who have sex with men ) are also difficult to survey using conventional methods .",
    "since members of these groups can not be enumerated directly , researchers often trace social links to reveal a network among known subjects .",
    "public health and epdiemiological interventions to mitigate the spread of hiv rely on knowledge of the number of hiv - positive people in the population  @xcite .",
    "* counting disaster victims . * after a disaster , it can be challenging to estimate the number of people affected .",
    "when logistical challenges prevent all victims from being enumerated , a random sample of individuals may be possible to obtain @xcite .    in this paper",
    ", we propose a novel method called @xmath6 for estimating the number of vertices and the size of individual communities from a random sub - sample of the network .",
    "we model the network as an undirected simple graph @xmath0 , and we treat @xmath4 as a realization from the stochastic blockmodel ( sbm ) , a widely - studied extension of the erds - rnyi random graph model @xcite that accommodates community structures in the network by mapping each vertex into one of @xmath7 disjoint types or communities .",
    "we construct a sample of the network by choosing a sub - sample of vertices @xmath2 uniformly at random without replacement , and forming the induced subgraph @xmath3 of @xmath5 in @xmath4 .",
    "we assume that the block membership and total degree @xmath8 of each vertex @xmath9 are observed .",
    "we propose a bayesian esitmation alogrithm @xmath6 for @xmath10 , the number of vertices in the network , along with the number of vertices @xmath11 in each block .",
    "we first prove important regularity results for the posterior distribution of @xmath12 .",
    "then we describe the conditions under which relevant moments of the posterior distribution exist .",
    "we evaluate the performance of @xmath6 in comparison with the popular `` network scale - up '' method ( nsum ) @xcite .",
    "we show that while nsum is asymptotically unbiased , it suffers from serious finite - sample bias and large variance .",
    "we show that @xmath6 has superior performance  in terms of relative error and variance  over nsum in a wide variety of model and observation scenarios .",
    "proofs are given in the appendix .     and",
    "white vertices are type-@xmath14 and gray are type-@xmath15 . ]",
    "[ sec : problem - formuation ]    the stochastic blockmodel ( sbm ) is a random graph model that generalizes the erds - rnyi random graph @xcite .",
    "let @xmath16 be a realization from an sbm , where @xmath10 is the total number of vertices , the vertices are divided into @xmath1 types indexed @xmath17 , specified by the map @xmath18 , and a type-@xmath19 vertex and a type-@xmath20 vertex are connected independently with probability @xmath21 $ ] .",
    "let @xmath11 be the number of type-@xmath19 vertices in @xmath4 , with @xmath22 .",
    "the degree of a vertex @xmath23 is @xmath8 .",
    "an edge is said to be of type-@xmath24 if it connects a type-@xmath19 vertex and a type-@xmath20 vertex .",
    "a random induced subgraph is obtained by sampling a subset @xmath2 with @xmath25 uniformly at random without replacement , and forming the induced subgraph , denoted by @xmath3 .",
    "let @xmath26 be the number of type-@xmath19 vertices in the sample and @xmath27 be the number of type-@xmath24 edges in the sample . for a vertex @xmath23 in the sample , a _ pendant _ edge connects vertex @xmath23 to a vertex outside the sample .",
    "let @xmath28 be the number of pendant edges incident to @xmath23 .",
    "let @xmath29 be the number of type-@xmath30 pendant edges of vertex @xmath23 ; i.e. , @xmath31 .",
    "we have @xmath32 .",
    "let @xmath33 be the number of type-@xmath19 nodes outside the sample .",
    "for the ease of presentation we define @xmath34 , @xmath35 , and @xmath36 .",
    "we observe only @xmath3 and the total degree @xmath8 of each vertex @xmath23 in the sample .",
    "we assume that we know the type of each vertex in the sample . the observed data @xmath37 consists of @xmath3 , @xmath38 and @xmath39 ; i.e. , @xmath40 . a * table of notation * is provided in the appendix .",
    "[ prob : main ] given the observed data @xmath41 , estimate the size @xmath12 of the vertex set @xmath10 and the size of each community @xmath11 .",
    "[ fig : problem ] illustrates the vertex set size estimation problem .",
    "white nodes are of type-@xmath14 and gray nodes are of type-@xmath15 .",
    "all nodes outside @xmath3 are unobserved .",
    "we observe the types and the total degree of each vertex in the sample .",
    "thus we know the number of pendant edges that connect each vertex in the sample to other , unsampled vertices . however , the destinations of these pendant edges are unknown to us .",
    "we briefly outline a simple and intuitive estimator for @xmath10 that will serve as a comparison to .",
    "the network scale - up method ( nsum ) is a simple estimator for the vertex set size of erds - rnyi random graphs .",
    "it has been used in real - world applications to estimate the size of hidden or hard - to - reach populations such as drug users @xcite , hiv - infected individuals @xcite , men who have sex with men ( msm ) @xcite , and homeless people @xcite . consider a random graph that follows the erds - rnyi distribution .",
    "the expected sum of total degrees in a random sample @xmath5 of vertices is @xmath42=n(n-1)p$ ] .",
    "the expected number of edges in the sample is @xmath43=\\binom{n}{2}p$ ] , where @xmath44 is the number of edges within the sample .",
    "a simple estimator of the connection probability @xmath45 is @xmath46 .",
    "plugging @xmath47 into into the moment equation and solving for @xmath12 yields @xmath48 , often simplified to @xmath49 @xcite .",
    "[ thm : nsu]*_(proof in appendix ) _ * suppose @xmath4 follows a stochastic blockmodel with edge probability @xmath50 for @xmath51 . for any sufficiently large sample size , the nsum is positively biased and @xmath52-n$ ] has an asymptotic lower bound @xmath52-n \\gtrsim n / n - 1 $ ] , as @xmath53 becomes large , where for two sequences @xmath54 and @xmath55 , @xmath56 means that there exists a sequence @xmath57 such that @xmath58 ; i.e. , @xmath59 for all @xmath53 and @xmath60 . however , as sample size goes to infinity , the nsum becomes asymptotically unbiased .",
    "nsum uses only aggregate information about the sum of the total degrees of vertices in the sample and the number of edges in the sample .",
    "we propose a novel algorithm , @xmath6 , that uses individual degree , vertex type , and the network structure information .",
    "experiments ( section  [ sec : experiment ] ) show that it outperforms nsum in terms of both bias and variance .",
    "[ sec : main result ]    given @xmath35 , the conditional likelihood of the edges in the sample is given by @xmath61 and the conditional likelihood of the pendant edges is given by @xmath62 where the sum is taken over all @xmath29 s ( @xmath63 ) such that @xmath64 and @xmath32 .",
    "thus the total conditional likelihood is @xmath65    if we condition on @xmath45 and @xmath66 , the likelihood of the edges within the sample is the same as @xmath67 since it does not rely on @xmath66 , while the likelihood of the pendant edges given @xmath45 and @xmath66 is @xmath68 therefore the total likelihood conditioned on @xmath45 and @xmath66 is given by @xmath69 the conditional likelihood @xmath70 is indeed a function of @xmath71 .",
    "we may view this as the likelihood of @xmath72 given the data @xmath41 and the probabilities @xmath45 ; i.e. , @xmath73 .",
    "similarly , the likelihood @xmath74 conditioned on @xmath45 and @xmath66 is a function of @xmath71 and @xmath66",
    ". it can be viewed as the joint likelihood of @xmath71 and @xmath66 given the data @xmath41 and the probabilities @xmath45 ; i.e. , @xmath75 , and @xmath76 , where the sum is taken over all @xmath29 s , @xmath9 and @xmath77 , such that @xmath78 and @xmath32 , @xmath79 , @xmath80 . to have a full bayesian approach , we assume that the joint prior distribution for @xmath71 and @xmath45 is @xmath81 . hence , the population size estimation problem is equivalent to the following optimization problem for @xmath71 : @xmath82 then we estimate the total population size as @xmath83 .",
    "we briefly study the regularity of the posterior distribution of @xmath12 . in order to learn about @xmath72",
    ", we must observe enough vertices from each block type , and enough edges connecting members of each block , so that the first and second moments of the posterior distribution exist .",
    "intuitively , in order for the first two moments to exist , either we must observe many edges connecting vertices of each block type , or we must have sufficiently strong prior beliefs about @xmath84 .",
    "[ thm : regularity ] * _ ( proof in appendix ) _ * assume that @xmath85 and @xmath84 follows the beta distribution @xmath86 independently for @xmath87 .",
    "let @xmath88 if @xmath89 is bounded and @xmath90 , then the @xmath53-th moment of @xmath12 exists .    in particular , if @xmath91 , the variance of @xmath12 exists .",
    "theorem  [ thm : regularity ] gives the minimum possible number of edges in the sample to make the posterior sampling meaningful .",
    "if the prior distribution of @xmath84 is @xmath92 $ ] , then we need at least three edges incident on type-@xmath19 edges for all types @xmath63 to guarantee the existence of the posterior variance .      in order to better understand how",
    "estimates the size of a general stochastic block - model we study the erds - rnyi case where @xmath93 , and all vertices are connected independently with probability @xmath45 .",
    "let @xmath12 denote the total population size , @xmath5 be the sample with size @xmath94 and @xmath95 . for each vertex @xmath9 in the sample ,",
    "let @xmath96 denote the number of pendant edges of vertex @xmath23 , and @xmath97 is the number of edges within the sample .",
    "then    @xmath98    @xmath99    in the erds - rnyi case , @xmath100 and thus @xmath101 .",
    "therefore , the total likelihood of @xmath71 conditioned on @xmath45 is given by    @xmath102    we assume that @xmath45 has a beta prior @xmath103 and that @xmath71 has a prior @xmath89 . let @xmath104 where @xmath105 .",
    "the posterior probability @xmath106 $ ] is proportional to @xmath107 .",
    "the algorithm is presented in algorithm [ alg : erdos ] .    2    data @xmath41 ; initial guess for @xmath108 , denoted by @xmath109 ; parameters of the beta prior , @xmath110 and @xmath111 estimate for the population size @xmath108    @xmath112 @xmath113    propose @xmath114 according to a proposal distribution @xmath115    @xmath116    @xmath117 with probability @xmath118 ; otherwise @xmath119    @xmath120    look at @xmath121 and view it as the sampled posterior distribution for @xmath71    let @xmath122 be the posterior mean with respect to the sampled posterior distribution .      in the erds - rnyi case , @xmath100 .",
    "however , in the general stochastic blockmodel case , in addition to the unknown variables @xmath123 to be estimated , we do not know @xmath29 ( @xmath9 , @xmath63 ) either .",
    "the expression @xmath124 involves costly summation over all possibilities of integer composition of @xmath125 ( @xmath9 ) .",
    "however , the joint posterior distribution for @xmath71 and @xmath66 , which is proportional to @xmath126 , does not involve summing over integer partitions ; thus we may sample from the joint posterior distribution for @xmath71 and @xmath66 , and obtain the marginal distribution for @xmath71 .",
    "our proposed algorithm @xmath6 realizes this idea .",
    "let @xmath127 .",
    "we know that the joint posterior distribution for @xmath71 and @xmath66 , denoted by @xmath128 $ ] , is proportional to @xmath129 .",
    "in addition , the conditional distributions @xmath130 $ ] and @xmath131 $ ] are also proportional to @xmath132 , where @xmath133 , @xmath134 and @xmath135 . the proposed algorithm",
    "@xmath6 is a gibbs sampling process that samples from the joint posterior distribution ( i.e. , @xmath128 $ ] ) , which is specified in algorithm [ alg : general ] .    2    data @xmath41 ; initial guess for @xmath71 , denoted by @xmath136 ; initial guess for @xmath66 , denoted by @xmath137 ; parameters of the beta prior , @xmath138 and @xmath139 , @xmath140 .",
    "estimate for the population size @xmath108 @xmath141    randomly decide whether to update @xmath71 or @xmath66    randomly selects @xmath142\\cap\\mathbb{n}$ ] .",
    "@xmath143    propose @xmath144 according to the proposal distribution @xmath145    @xmath146    @xmath147 with probability @xmath118 ; otherwise @xmath148 .",
    "@xmath149    randomly selects @xmath9 .",
    "@xmath150    propose @xmath151 according to the proposal distribution @xmath152    @xmath153    @xmath154 with probability @xmath118 ; otherwise @xmath149 .",
    "@xmath155    @xmath156    look at @xmath121 and view it as the sampled posterior distribution for @xmath71    let @xmath108 be the posterior mean of @xmath157 with respect to the sampled posterior distribution .    for every @xmath9 and @xmath63 , @xmath158 because the number of type-@xmath159 pendant edges of vertex @xmath23 must not exceed the total number of type-@xmath19 vertices outside the sample .",
    "therefore , we have @xmath160 must hold for every @xmath63 . these observations put constraints on the choice of proposal distributions @xmath161 and @xmath162 , @xmath63 and @xmath9 ; i.e. , the support of @xmath161 must be contained in @xmath163 and the support of @xmath162 must be contained in @xmath164    let @xmath165 be the window size for @xmath166 , taking values in @xmath167 .",
    "let @xmath168 let the proposal distribution @xmath161 be defined as below : @xmath169 the proposed value @xmath144 is always greater than or equal to @xmath170 .",
    "this proposal distribution uniform within the window @xmath171 $ ] , and thus the proposal ratio is @xmath172 .",
    "the proposal for @xmath173 and its proposal ratio are presented in the * appendix*.",
    "* effect of parameter @xmath45 . *",
    "we first evaluate the performance of in the erds - rnyi case .",
    "we fix the size of the network at @xmath174 and the sample size @xmath175 and vary the parameter @xmath45 . for each @xmath176",
    "$ ] , we sample @xmath177 graphs from @xmath178 . for each selected graph , we compute nsum and run @xmath179 times ( as it is a randomized algorithm ) to compute its performance .",
    "we record the relative errors by the tukey boxplots shown in fig .",
    "[ fig : estimation - error ] .",
    "the posterior mean proposed by @xmath6 is an accurate estimate of the size . for the parameter @xmath45 varying from @xmath180 to @xmath181 ,",
    "most of the relative errors are bounded between @xmath182 and @xmath183 .",
    "we also observe that the nsum tends to overestimate the size as it shows a positive bias .",
    "this confirms experimentally the result of theorem [ thm : nsu ] . for both methods ,",
    "the interquartile ranges ( iqrs , hereinafter ) correlate negatively with @xmath45 .",
    "this shows that the variance of both estimators shrinks when the graph becomes denser .",
    "the relative errors of @xmath6 tend to concentrate around @xmath184 with larger @xmath45 which means that the performance of @xmath6 improves with larger @xmath45 .",
    "in contrast , a larger @xmath45 does not improve the bias of the nsum .",
    ".33    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".33    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".33    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".67    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".33    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error . fig .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".33    , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage . ]",
    ".66 , [ fig : varyn ] and [ fig : varys ] are the results of the erds - rnyi case : ( a ) effect of parameter @xmath45 on the estimation error .",
    "( b ) effect of the network size on the estimation error .",
    "( c ) effect of the sample size on the estimation error .",
    "[ fig : heatmap ] , [ fig : eps_totaln ] , [ fig : eps_n1 ] and [ fig : varyk ] are the results of the general sbm case : ( d ) effect of sample size and type partition on the relative error .",
    "note that the color bar on the right is on logarithmic scale .",
    "( e ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of nsum and in the sbm with @xmath13 .",
    "( f ) effect of deviation from the erds - rnyi model ( controlled by @xmath185 ) on the relative error of in estimating the number of type-@xmath14 and type-@xmath15 nodes in the sbm with @xmath13 .",
    "( g ) effect of the number of types @xmath1 and the sample size on the population estimation .",
    "the percentages are the sampling fractions @xmath186 .",
    "the horizontal axis represents the number of types @xmath1 that varies from @xmath14 to @xmath187 .",
    "the vertical axis is the relative error in percentage.,title=\"fig : \" ]    * effect of network size @xmath12 .",
    "* we fix the parameter @xmath188 and the sample size @xmath175 and vary the network size @xmath12 from @xmath189 to @xmath190 . for each @xmath191 $ ] , we randomly pick @xmath177 graphs from @xmath178 . for each selected graph",
    ", we compute nsum and run @xmath179 times .",
    "we illustrate the results via tukey boxplots in fig .",
    "[ fig : varyn ] .",
    "again , the estimates given by @xmath6 are very accurate .",
    "most of the relative errors reside in @xmath192 $ ] and almost all reside in @xmath193 $ ] .",
    "we also observe that smaller network sizes can be estimated more accurately as @xmath6 will have a smaller variance .",
    "for example , when the network size is @xmath194 , almost all of the relative errors are bounded in the range @xmath195 $ ] while for @xmath174 , the relative errors are in @xmath196 $ ] .",
    "this agrees with our intuition that the performance of estimation improves with a larger sampling fraction .",
    "in contrast , nsum heavily overestimates the network size as the size increases .",
    "in addition , its variance also correlates positively with network size .",
    "* effect of sample size @xmath197 . *",
    "we study the effect of the sample size @xmath197 on the estimation error .",
    "thus , we fix the size @xmath174 and the parameter @xmath188 , and we vary the sample size @xmath197 from @xmath177 to @xmath198",
    ". for each @xmath199 $ ] , we randomly select @xmath177 graphs from @xmath178 .",
    "for every selected graph , we compute the nsum estimate , run @xmath6 @xmath179 times , and record the relative errors .",
    "the results are presented in fig .",
    "[ fig : varys ] .",
    "we observe that for both methods that the iqr shrinks as the sample size increases ; thus a larger sample size reduces the variance of both estimators .",
    "@xmath6 does not exhibit appreciable bias when the sample size varies from @xmath177 to @xmath198 .",
    "again , nsum overestimates the size ; however , its bias reduces when the sample size becomes large .",
    "this reconfirms theorem [ thm : nsu ] .",
    "* effect of sample size and type partition . * here , we study the effect of the sample size and the type partition .",
    "we set the network size @xmath12 to @xmath200 and we assume that there are two types of vertices in this network : type @xmath14 and type @xmath15 with @xmath201 and @xmath202 nodes , respectively .",
    "the ratio @xmath203 quantifies the type partition .",
    "we vary @xmath203 from @xmath204 to @xmath205 and the sample size @xmath197 from @xmath206 to @xmath207 . for each combination of @xmath203 and the sample size @xmath197",
    ", we generate @xmath179 graphs with @xmath208 $ ] and @xmath209 $ ] .",
    "for each graph , we compute the nsum and obtain the average relative error .",
    "similarly , for each graph , we run @xmath6 @xmath210 times in order to compute the average relative error for the @xmath179 graphs and @xmath210 estimates for each graph .",
    "the results are shown as heat maps in fig .",
    "[ fig : heatmap ] .",
    "note that the color bar on the right side of fig .",
    "[ fig : heatmap ] is on logarithmic scale . in general , the estimates given by are very accurate and exhibit significant superiority over the nsum estimates .",
    "the largest relative errors of in absolute value , which are approximately @xmath183 , appear in the upper - left and lower - left corner on the heat map . the performance of the nsum ( see the lower subfigure in fig .  [",
    "fig : heatmap ] ) is robust to the type partition and equivalently the ratio @xmath211 .",
    "as we enlarge the sample size , its relative error decreases .",
    "the left subfigure in fig .",
    "[ fig : heatmap ] shows the performance of .",
    "when the sample size is small , the relative error decreases as @xmath203 increases from @xmath204 to @xmath212 ; when @xmath203 rises from @xmath212 to @xmath205 , the relative error becomes large .",
    "given the fixed ratio @xmath203 , as expected , the relative error declines when we have a larger sample .",
    "this agrees with our observation in the erds - rnyi case .",
    "however , when the sample size is large , exhibits better performance when the type partition is more homogeneous . there is a local minimum relative error in absolute value shown at the center of the subfigure .",
    "performs best when there is a balance between the number of edges in the sampled induced subgraph and the number of pendant edges emanating outward .",
    "larger sampled subgraphs allow more precision in knowledge about @xmath84 , but more pendant edges allow for better estimation of @xmath66 , and hence each @xmath11 .",
    "thus when the sample is approximately half of the total vertex set size , the balanced combination of the number of edges within the sample and those emanating outward leads to better performance .",
    "* effect of intra- and inter - community edge probability . *",
    "suppose that there are two types of nodes in the network .",
    "the mean degree is given by @xmath213.\\ ] ] we want to keep the mean degree constant and vary the random graph gradually so that we observe 3 phases : high intra - community and low inter - community edge probability ( more cohesive ) , erds - rnyi , and low intra - community and high inter - community edge probability ( more incohesive ) .",
    "we introduce a cohesion parameter @xmath185 . in the two - block model , we have @xmath214 , where @xmath215 is a constant .",
    "let s call @xmath185 the deviation from this situation and let @xmath216 the mean degree stays constant for different @xmath185 .",
    "in addition , @xmath217 , @xmath218 and @xmath219 must reside in @xmath220 $ ] .",
    "this requirement can be met if we set the absolute value of @xmath185 small enough . by changing @xmath185 from positive to negative",
    "we go from cohesive behavior to incohesive behavior .",
    "clearly , for @xmath221 , the graph becomes an erds - rnyi graph with @xmath214 .",
    "we set the network size @xmath12 to @xmath222 , @xmath223 to @xmath224 , and @xmath225 to @xmath198 .",
    "we fix @xmath226 and let @xmath185 vary from @xmath227 to @xmath228 . when @xmath229 , the intra - community edge probabilities are @xmath230 and @xmath231 and the inter - community edge probability is @xmath232 .",
    "when @xmath233 , the intra - community edge probabilities are @xmath234 and @xmath235 and the inter - community edge probability is @xmath236 . for each @xmath185 , we generate @xmath198 graphs and for each graph , we run @xmath6 @xmath179 times . given each value of @xmath185 , relative errors are shown in box plots .",
    "we present the results in fig .",
    "[ fig : eps_totaln ] as we vary @xmath185 . from fig .",
    "[ fig : eps_totaln ] , we observe that despite deviation from the erds - rnyi graph , both methods are robust .",
    "however , the figure indicates that is unbiased ( as median is around zero ) while nsum overestimates the size on average .",
    "this again confirms theorem [ thm : nsu ] .",
    "an important feature of is that it can also estimate the number of nodes of each type while nsum can not .",
    "the results for type-@xmath14 and type-@xmath15 with different @xmath185 are shown in fig .",
    "[ fig : eps_n1 ] .",
    "we observe that the median of all boxes agree with the @xmath237 line ; thus the separate estimates for @xmath201 or @xmath202 are unbiased .",
    "note that when the edge probabilities are more homogeneous ( i.e. , when the graph becomes more similar to the erds - rnyi model ) the iqrs , as well as the interval between the two ends of the whiskers , become larger .",
    "this shows that when we try to fit an erds - rnyi model ( a single - type stochastic blockmodel ) into a two - type model , the variance becomes larger .",
    "finally , we study the impact of the number of types @xmath1 and the sample size @xmath25 on the relative error .",
    "to generate graphs with different number of types , we use a chinese restaurant process ( crp )  @xcite .",
    "we set the total number of vertices to @xmath200 , first pick 100 vertices and use the chinese restaurant process to assign them to different types .",
    "suppose that crp gives @xmath1 types ; we then distribute the remaining 100 vertices evenly among the @xmath1 types . the edge probability @xmath238 ( @xmath77 )",
    "is sampled from @xmath239 $ ] and @xmath84 ( @xmath87 ) is sampled from @xmath240 $ ] , all independently .",
    "we set the sampling fraction @xmath186 to @xmath241 , @xmath242 and @xmath243 , and use nsum and to estimate the network size .",
    "relative estimation errors are illustrated in fig .",
    "[ fig : varyk ] .",
    "we observe that with the same sampling fraction @xmath186 and same the number of types @xmath1 , @xmath6 has a smaller relative error than that of the nsum .",
    "similarly , the interquartile range of is also smaller than that of the nsum .",
    "hence , provides a higher accuracy with a smaller variance . for both methods the relative error decreases ( in absolute value ) as the sampling fraction increases .",
    "accordingly , the iqrs also shrink for larger sampling fraction . with",
    "the sampling fraction fixed , the iqrs become larger when we increase the number of types in the graph .",
    "the variance of both methods increases for increasing values of @xmath1 .",
    "the median of nsum is always above @xmath184 on average which indicates that it overestimates the network size .",
    "in this paper , we have developed a method for using a random sub - sample to estimate the size of a graph whose distribution is given by a sbm .",
    "we analyzed the bias of the widely - used network scale - up estimator theoretically and showed that for sufficiently large sample sizes , it overestimates the vertex set size in expectation ( but asymptotically unbiased ) .",
    "regularity results establish the conditions under which the posterior distribution of the population size is well - defined .",
    "extensive experimental results show that @xmath6 outperforms the network scale - up estimator in terms of the relative error and estimation variance .",
    "[ sec : conclusion ]",
    "notation in this paper is summarized in table  [ tab : notation ] .",
    ".notation[tab : notation ] [ cols=\"^,<,^,<\",options=\"header \" , ]      define @xmath45 is the probability that two different nodes @xmath244 and @xmath23 have an edge between them when they are sampled uniformly at random from the vertex set .",
    "thus the probability @xmath45 is given by @xmath245 let s compute the expectation of the network scale - up estimator .",
    "we have @xmath246= \\e\\left[n\\cdot\\frac{\\sum_{v\\in w}d(v)}{2e_{s}}\\middle\\vert e_{s}>0\\right]\\\\          & = & n\\cdot\\e\\left[\\frac{\\sum_{v\\in w}\\td(v)+2e_{s}}{2e_{s}}\\middle\\vert e_{s}>0\\right]\\\\      & = & n\\cdot\\e\\left[\\frac{\\sum_{v\\in w}\\td(v)}{2e_{s}}+1\\middle\\vert e_{s}>0\\right]\\\\      & = & n\\cdot\\left(\\frac{\\e\\left[\\sum_{v\\in w}\\td(v)\\right]\\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0\\right]}{2}+1\\right)\\\\      & = & n\\cdot\\left(\\frac{n(n - n)p}{2}\\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0\\right]+1\\right).\\end{aligned}\\ ] ] by jensen s inequality , we know that @xmath247\\geq\\frac{1}{\\e\\left[e_{s}\\given e_{s}>0\\right]}.\\ ] ] plugging this in , we have @xmath248\\geq n\\cdot\\left(\\frac{n(n - n)p}{2\\e\\left[e_{s}|e_{s}>0\\right]}+1\\right)\\\\                      & = & n+(n - n)\\cdot\\left(1+\\frac{1}{n-1}\\right)\\left(1-\\p\\left[e_{s}=0\\right]\\right)\\end{aligned}\\ ] ] where @xmath249=\\prod_{1\\leq i",
    "< j\\leq k}(1-p_{ij})^{v_{i}v_{j}}\\prod_{i=1}^{k}(1-p_{ii})^{\\binom{v_{i}}{2}}.\\ ] ] note that when @xmath250 , $ ] we have @xmath251\\right)>1.\\ ] ] when the sample size @xmath53 is sufficiently large , the inequality @xmath252 $ ] will hold because the terms @xmath253 and @xmath254 decrease exponentially . in this case , @xmath255>n+(n - n)=n.\\ ] ] therefore for a sufficiently large sample size , the network scale - up estimator is biased and always overestimates the vertex set size .",
    "furthermore , in addition to showing that it always overestimates the vertex set , we can derive an asymptotic lower bound for the bias via a more careful analysis .",
    "let us recall the definitions of asymptotic equality and inequality for completeness .",
    "let @xmath54 and @xmath55 be two sequences of real numbers .",
    "we say that @xmath54 and @xmath55 are asymptotically equal if @xmath256 ; in this case , we denote it by@xmath257    let @xmath54 and @xmath55 be two sequences of real numbers .",
    "we say that @xmath54 is asymptotically greater than or equal to @xmath55 if there exists a sequence @xmath258 such that @xmath59 for all @xmath53 and @xmath259 ; in this case , we denote it by@xmath260    recall that we just showed that@xmath255\\geq    n+(n - n)\\cdot\\left(1+\\frac{1}{n-1}\\right)\\left(1-\\p\\left[e_{s}=0\\right]\\right).\\ ] ] then we have@xmath255-n \\geq \\frac{n - n}{n-1}\\left(1-n \\cdot\\p\\left[e_{s}=0\\right]\\right).\\ ] ] since @xmath261 $ ] decreases to @xmath184 exponentially in @xmath53 , we have @xmath262 = 0 $ ] .",
    "thus we know that@xmath263\\right)\\sim \\frac{n - n}{n-1 } \\sim n / n-1.\\ ] ] therefore , we deduce that@xmath255-n\\gtrsim n / n-1.\\ ] ]    now we would like to show its asymptotic unbiasedness .",
    "we have @xmath255=n\\cdot\\left(\\frac{n(n - n)p}{2}\\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0\\right]+1\\right).\\ ] ] to show the asymptotic unbiasedness , we have to derive an upper bound for the conditional expectation @xmath264 $ ] .",
    "let @xmath265 be a constant to be determined later .",
    "we divide it into two cases where @xmath44 is concentrated around its mean and the anti - concentration happens : @xmath266\\nonumber & = & \\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0,\\left|e_{s}-\\binom{n}{2}p\\right|\\leq\\delta\\right]\\nonumber \\\\      & \\times & \\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|\\leq\\delta\\given e_{s}>0\\right]\\nonumber \\\\      & + & \\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0,\\left|e_{s}-\\binom{n}{2}p\\right|>\\delta\\right]\\nonumber \\\\      & \\times & \\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|>\\delta\\given e_{s}>0\\right].\\label{eq : two - terms}\\end{aligned}\\ ] ] given @xmath267 , @xmath268 is always less than or equal to @xmath14 .",
    "thus the second term in ( [ eq : two - terms ] ) can be bounded as below : @xmath269\\times\\\\      &   & \\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|>\\delta\\given e_{s}>0\\right]\\\\      & \\leq & \\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|>\\delta\\given e_{s}>0\\right]\\\\      & \\leq & \\frac{\\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|>\\delta\\right]}{\\p\\left[e_{s}>0\\right]}\\\\      & \\leq & \\frac{2e^{-2\\delta^{2}/\\binom{n}{2}}}{1-\\p\\left[e_{s}=0\\right]},\\end{aligned}\\ ] ] where the last inequality is a result of hoeffding s inequality . the first term in ( [ eq : two - terms ] )",
    "can be bounded as below : @xmath270\\times\\\\      &   & \\p\\left[\\left|e_{s}-\\binom{n}{2}p\\right|\\leq\\delta\\given e_{s}>0\\right]\\\\      & \\leq & \\e\\left[\\frac{1}{e_{s}}\\middle\\vert e_{s}>0,\\left|e_{s}-\\binom{n}{2}p\\right|\\leq\\delta\\right]\\\\      & \\leq & \\frac{1}{\\binom{n}{2}p-\\delta}.\\end{aligned}\\ ] ] then we combine the two upper bounds together and obtain @xmath271\\leq   \\frac{1}{\\binom{n}{2}p-\\delta}+\\frac{2e^{-2\\delta^{2}/\\binom{n}{2}}}{1-\\p\\left[e_{s}=0\\right]}.\\ ] ] let @xmath272 , we have @xmath248\\\\      & \\leq & n\\left(\\frac{n(n - n)p}{2}\\left(\\frac{1}{\\binom{n}{2}p-\\delta}+\\frac{2e^{-2\\delta^{2}/\\binom{n}{2}}}{1-\\p\\left[e_{s}=0\\right]}\\right)+1\\right)\\\\      & = & n\\left(\\frac{n(n - n)p}{2}\\left(\\frac{1}{\\binom{n}{2}p - n^{3/2}}+\\frac{2e^{-2n^{3}/\\binom{n}{2}}}{1-\\p\\left[e_{s}=0\\right]}\\right)+1\\right)\\\\      & \\to & n,\\end{aligned}\\ ] ] as @xmath53 goes to @xmath273 . recall that we have shown that @xmath255>n.\\ ] ] thus @xmath274=n .",
    "$ ] hence we conclude that @xmath275 is asymptotically unbiased .",
    "we notice that @xmath276 this is a finite sum since @xmath277 is a known and fixed integer and thus the total number of possibilities of integer composition of @xmath277 is finite .",
    "therefore , it suffices to show the regularity results for the joint posterior @xmath278 for every fixed @xmath66 .",
    "hereinafter , we fix an arbitrary @xmath66 .",
    "we have @xmath279}}(1-p_{ij})^{m_{[ij]}}\\prod_{i=1}^{k}p_{ii}^{s_{ii}}(1-p_{ii})^{m_{ii}},\\end{aligned}\\ ] ] where @xmath280 , @xmath281 , @xmath282 , @xmath283}=s_{ij}+s_{ji}$ ] and @xmath284}=m_{ij}+m_{ji}$ ] .",
    "furthermore , we have @xmath285}+\\alpha_{ij}}(1-p_{ij})^{v_{i}v_{j}-e_{ij}+m_{[ij]}+\\beta_{ij}}\\right)\\times\\\\      & \\left(\\prod_{i=1}^{k}p_{ii}^{e_{ii}+s_{ii}+\\alpha_{ii}}(1-p_{ii})^{\\binom{v_{i}}{2}-e_{ii}+m_{ii}+\\beta_{ii}}\\right)\\end{aligned}\\ ] ] therefore @xmath286}+\\alpha_{ij}}(1-p_{ij})^{v_{i}v_{j}-e_{ij}+m_{[ij]}+\\beta_{ij}}\\right)dp,\\\\      = & \\zeta(\\tn)\\phi(\\tn)\\prod_{i=1}^{k}\\b\\left(e_{ii}+s_{ii}+\\alpha_{ii},\\binom{v_{i}}{2}-e_{ii}+m_{ii}+\\beta_{ii}\\right)\\times\\\\      & \\prod_{1\\leq i",
    "< j\\leq k}\\b\\left(e_{ij}+s_{[ij]}+\\alpha_{ij},v_{i}v_{j}-e_{ij}+m_{[ij]}+\\beta_{ij}\\right).\\end{aligned}\\ ] ] we notice that @xmath284}=m_{ij}+m_{ji}=\\tn_{i}v_{j}-s_{ji}+\\tn_{j}v_{i}-s_{ij}=\\tn_{i}v_{j}+\\tn_{j}v_{i}-s_{[ij]}$ ] .",
    "let @xmath287 and @xmath288}+\\alpha_{ij}$ ] for @xmath289 and let @xmath290 and @xmath291}+\\beta_{ij}$ ] for @xmath292 .",
    "thus we have @xmath293 i.e. , @xmath294 for some fixed constant @xmath295 .    in @xcite ,",
    "wendel proved @xmath296 for real @xmath297 and @xmath66 .",
    "therefore , there exists a number @xmath298 such that @xmath299 , we have @xmath300 i.e. , @xmath301 this is equivalent to @xmath302 suppose that @xmath166 s are sufficiently large , i.e. , @xmath303 for all @xmath19 and @xmath304 for all @xmath292 . in this case , we have @xmath305 where @xmath306 , @xmath307 , @xmath308 , @xmath309 , @xmath310 , and the last inequality holds for some fixed constant @xmath311 and sufficiently large @xmath166 s . now consider the term @xmath312 .",
    "we have @xmath313 therefore , @xmath314 now we consider the @xmath53-th moment of @xmath12 .",
    "let @xmath315 we have @xmath316 where @xmath317 .",
    "there exists a constant @xmath318 such that for sufficiently large @xmath166 s , we have @xmath319 for @xmath80 .",
    "therefore , @xmath320 where @xmath321 and @xmath322 .",
    "since @xmath89 is bounded , @xmath323 if @xmath90 .",
    "the proposal algorithm for @xmath173 is presented in algorithm  [ alg : proposal - algorithm - for - y ] .",
    "let @xmath331\\cap\\mathbb{n})^{2}:i\\neq j , y_{i}(v)>0,y_{j}(v)<\\tn_{j}\\}$ ] be the space of all pairs of @xmath19 and @xmath20 that satisfy the condition of exiting the loop in algorithm [ alg : proposal - algorithm - for - y ] .",
    "and each pair of @xmath24 in @xmath332 correspond to a new state with @xmath29 subtracted by @xmath14 and @xmath333 added by @xmath14 .",
    "the size of @xmath332 is given by @xmath334 .",
    "the proposal algorithm proposes each new state uniformly at random .",
    "thus @xmath335 similarly , @xmath336 this completes the proof ."
  ],
  "abstract_text": [
    "<S> most real - world networks are too large to be measured or studied directly and there is substantial interest in estimating global network properties from smaller sub - samples . </S>",
    "<S> one of the most important global properties is the number of vertices / nodes in the network . estimating the number of vertices in a large network is a major challenge in computer science , epidemiology , demography , and intelligence analysis . in this paper </S>",
    "<S> we consider a population random graph @xmath0 from the stochastic block model ( sbm ) with @xmath1 communities / blocks . </S>",
    "<S> a sample is obtained by randomly choosing a subset @xmath2 and letting @xmath3 be the induced subgraph in @xmath4 of the vertices in @xmath5 . </S>",
    "<S> in addition to @xmath3 , we observe the total degree of each sampled vertex and its block membership . given this partial information , we propose an efficient population size estimation algorithm , called , that correctly estimates the size of the whole population as well as the size of each community . </S>",
    "<S> to support our theoretical analysis , we perform an exhaustive set of experiments to study the effects of sample size , @xmath1 , and sbm model parameters on the accuracy of the estimates . </S>",
    "<S> the experimental results also demonstrate that significantly outperforms a widely - used method called the network scale - up estimator in a wide variety of scenarios . </S>",
    "<S> we conclude with extensions and directions for future work . </S>"
  ]
}