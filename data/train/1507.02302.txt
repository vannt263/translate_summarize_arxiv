{
  "article_text": [
    "in @xcite johnstone defines a signature - independent notion of equivalence between first - order theories , which he calls morita equivalence ( and which we will call j - morita equivalence ) . with altogether different motivations in mind , barrett and halvorson in @xcite have defined a purely syntactic notion to relate ( for their purposes _ classical , first - order _ ) theories which they also call morita equivalence ( and which we will call t - morita equivalence ) .",
    "roughly speaking , two theories are t - morita equivalent if they have a common definitional extension ( @xcite , chapter 2.6 ) where in addition to defining new function and relation symbols in terms of available formulas one is also allowed to define four new types of sort symbols : product sorts , coproduct sorts , subsorts and quotient sorts .",
    "in this paper we prove an equivalence between the topos - theoretic notion of j - morita equivalence and ( appropriate generalizations of ) the new syntactic notion of t - morita equivalence . as",
    "such we answer the following question : suppose you are given an equivalence between the categories of models ( natural in any cocomplete topos ) of two ( regular , cartesian , coherent or geometric ) theories @xmath0 and @xmath1 . then from a purely syntactic point of view , how are @xmath0 and @xmath1 related ?",
    "our investigation may thus be seen as an inversion of the kind of investigation undertaken e.g. in @xcite and @xcite . there",
    "the question is asked : what extra structure do we need to impose on the category of models of a theory in order to recover the theory up to up to equivalence of its syntactic category ? here",
    "we ask : if we identify a theory with its category of models , then what can we recover it _ up to _ ?",
    "our work here is also inspired by ( and may be seen as a `` logical '' version of ) i. moerdijk s work @xcite on the representation theory of grothendieck toposes ( cf .",
    "@xcite for an overview ) .",
    "in addition to the projects pursued by barrett and halvorson @xcite our work also has obvious connections with the research programme developed by caramello @xcite based around the idea of exploiting j - morita equivalences between geometric theories to transfer mathematical results from one theory to another .",
    "more classical investigations along these lines can be found in @xcite and connections with shelah s work are explained nicely in @xcite .",
    "furthermore , our syntactic characterization is very type - theoretic in flavour since the main innovation of the new syntactic notion of morita equivalence is to allow one to define new sort symbols from old ones in much the same way that in type theories one defines new types from old ones , though we restrict ourselves here only to ( fragments of ) first - order logic which correspond more closely to what have been called `` logic - enriched type theories '' ( e.g. @xcite . ) but none of them have been used , to the best of our knowledge , as tools for studying equivalences of classifying toposes of theories , which is our main concern here .",
    "nevertheless the technical connections are obvious and we plan to explore the type - theoretic versions of our results in future work",
    ".    _ outline of the paper . _ in section [ prelim ] , we quickly go through some preliminaries , fixing notation . in section [ tj ]",
    "we define the two above - described notions of morita equivalence for coherent theories and then go on in sections [ tmortojmor ] and [ jmortotmor ] to prove that these notions coincide in the coherent fragment of first - order logic ( theorem [ tiffj ] . )",
    "we then go on in section [ gen ] to consider how theorem [ tiffj ] translates to other fragments of first - order logic as well as to full first - order logic . in this latter case",
    "we prove theorem [ morltiffj ] which says that two first - order theories are t - morita equivalent if and only if their morleyizations are j - morita equivalent .",
    "finally , in section [ appimp ] we discuss some mathematical applications and sketch future directions of research .",
    "we assume familiarity with first - order categorical logic as can be found e.g. in @xcite and d1 of @xcite .",
    "we also assume some familiarity with the theory of classifying toposes as described e.g. in @xcite , @xcite or chapter viii of @xcite . throughout this paper",
    "our terminology and notation will follow @xcite and our deductive system can be taken to be exactly the one presented there .",
    "we will here review a few standard concepts and make explicit some notational conventions that will be of use to us in what follows .    since we will mainly be dealing with fragments of first - order logic which do not necessarily include implication , negation and universal quantification we will employ turnstile ( @xmath2 ) notation for the sequents we consider .",
    "so a given sequent @xmath3 over a signature @xmath4 will be written as @xmath5 where @xmath6 are @xmath4-formulas and @xmath7 is a context of variables appropriate to both of them .",
    "we will often omit explicit mention of the variables binding our sequent when it is clear from the context .",
    "for a given sequent @xmath3 over a signature @xmath4 and theory @xmath0 also over @xmath4 we write @xmath8 to indicate that the sequent is derivable from ( the sequents defining ) @xmath0 . as usual , a theory @xmath0 is identified with a set of sequents ( the deductive closure of the axioms relative to our deductive system . ) we will also sometimes separate sequents by commas if we want to list several sequents that a theory contains , e.g. @xmath9 and we will also use the symbol @xmath10 where necessary to indicate that two sequents or formulas are ( grammatically ) identical",
    ". we will usually abbreviate the variable contexts of sequents whenever these are clear from the context .",
    "similarly we will often write a single formula for a conjunction of formulas depending on variables ranging over some index .",
    "furthermore whenever we are considering two signatures @xmath11 with @xmath12 we will will write @xmath13 for @xmath14 and similarly for @xmath15 and @xmath16 .",
    "we will also use the notation @xmath17 to denote the set of sequents defining a symbol @xmath18 .",
    "since our system contains the cut rule we will use the following convention : given a theory @xmath0 over a signature @xmath4 , and @xmath4-formulas @xmath19 such that @xmath20 we will write @xmath21 to indicate the derivation by @xmath0 of ( the two sequents represented by ) @xmath22 , i.e. that @xmath23 . when we do so we will usually justify each step one formula at a time .",
    "we will mainly be concerned with the _ coherent _ fragment of first - order logic and our main results will be proved in detail for ( constructive ) coherent logic .",
    "when we consider other fragments of first - order logic in section [ gen ] then the deductive system we have in mind will contain only the rules for the relevant connectives .",
    "secondly , our system includes the following two rules as axioms @xmath24 where in ( [ eq : frob ] ) @xmath25 does not appear among the @xmath7 .",
    "we will also have occasion to refer to the following derived rules ( whenever they make sense ) : @xmath26 @xmath27 where @xmath28 and @xmath29 are formulas with ( some ) free variables among the @xmath7 .    finally , recall that given a theory @xmath0 over a signature @xmath4 we define the syntactic category @xmath30 of @xmath0 to be the category whose objects are @xmath4-formulas - in - context @xmath31 up to renaming of variables and whose arrows are @xmath0-provable equivalence classes of @xmath0-provably functional relations between such formulas .",
    "more precisely , a morphism @xmath32 \\colon \\lb \\vec{x}. \\phi \\rb \\rightarrow \\lb \\vec{y}. \\psi \\rb$ ] is a @xmath4-formula @xmath33 in the context @xmath34 such that : @xmath35 \\vdash_{\\vec{x},\\vec{y},\\vec{z } } \\vec{z } = \\vec{y } , \\phi \\vdash_{\\vec{x } } \\exists \\vec{y } \\theta(\\vec{x } , \\vec{y})\\ ] ] depending on the logical complexity of the theory @xmath0 the syntactic category @xmath30 carries the appropriate logical structure .",
    "this if @xmath0 is coherent ( resp .",
    "cartesian , regular , geometric ) then @xmath30 is a coherent ( resp .",
    "cartesian , regular , geometric ) category ( cf .",
    "@xcite , d1.4.10 and d1.4.2 ) . with this in mind",
    "let us record the following well - known lemmas that we will often refer to in the rest of the paper :    every subobject of an object @xmath36 in @xmath30 is isomorphic to one of the form @xmath37}{\\hookrightarrow } \\lb \\vec{x}. \\phi \\rb\\ ] ] where @xmath38 . furthermore @xmath39 as subobjects of @xmath36 if and only if @xmath40 .    1 .",
    "if @xmath0 is at least a regular theory , then given a morphism @xmath32 \\colon \\lb \\vec{x}. \\phi \\rb \\rightarrow \\lb \\vec{y}. \\psi \\rb$ ] in @xmath30 its image is given by the subobject @xmath41 of @xmath42 .",
    "if @xmath0 is at least a regular theory , then a morphism @xmath32 \\colon \\lb \\vec{x}. \\phi \\rb \\rightarrow \\lb \\vec{y}. \\psi \\rb$ ] in @xmath30 is a regular epi if and only if @xmath43 .",
    "3 .   if @xmath0 is at least a coherent category , and @xmath44 , @xmath45 are two subobjects of @xmath36 then their sup is given by the subobject @xmath46 .",
    "we now define the two different notions of morita equivalence that we will go on to relate . in this and the next section",
    "we will restrict ourselves only to coherent theories .",
    "we call two coherent theories @xmath0 and @xmath1 * j - morita equivalent * if they have equivalent classifying toposes",
    ".    now let @xmath47 be a coherent theory over a signature @xmath48 and let @xmath49 be a theory over a signature @xmath12 .",
    "we say that @xmath49 is a _",
    "definitional extension _",
    "@xcite ) of @xmath47 if every symbol in @xmath50 is explicitly defined in @xmath47 by a coherent @xmath48-formula .",
    "there are also admissibility conditions when defining new function or relation symbols ( cf .",
    "@xcite or @xcite ) .",
    "following @xcite we define the following four sets of sequents , expressing the definability of certain new sorts in the expanded signature @xmath51 in terms of @xmath48 .",
    "we say that @xmath52 ( which we also write as @xmath53 ) is a _ product sort _ of @xmath54 with projections @xmath55 for @xmath56 if @xmath49 contains the following sequents : @xmath57 @xmath58    we say that @xmath59 is a _ coproduct sort _ of @xmath60 with injections @xmath61 for @xmath62 if @xmath49 contains the following sequents : @xmath63 @xmath64 @xmath65 we say that @xmath66 is a _ subsort _ of a sort @xmath67 defined by a coherent @xmath48-formula @xmath28 and a function symbol @xmath68 if @xmath49 contains the following sequents : @xmath69 @xmath70 we say that @xmath66 is a _ quotient sort _ of @xmath67 defined by a @xmath47-provable equivalence relation @xmath28 and a function symbol @xmath71 if @xmath49 contains the following sequents : @xmath72 @xmath73    it is important to note that if @xmath74 is defined as a subsort of @xmath75 , then @xmath28 is allowed to be @xmath76 , i.e. we allow ourselves to define an `` empty '' subsort .",
    "( this automatically commits to a semantics that permits the interpretation of sorts as empty sets or initial objects . )",
    "we also make the following restriction : new coproduct , product , subsorts and quotient sorts can only be defined on sorts @xmath77 that our base theory proves are non - empty , i.e. @xmath78 .",
    "( whether a subsort is empty or not , of course , is a substantial question , since it implies that a certain sequent is derivable . ) for the sake of section [ jmortotmor ] we must make one further very minor restriction : all the theories @xmath0 we consider will be such that their signature contains at least one sort symbol @xmath74 that @xmath0 proves is inhabited , i.e. such that @xmath79 .",
    "we require this in order always to be able to define a `` singleton sort '' as will be explained in more detail there .",
    "[ morex ] let @xmath47 and @xmath49 be coherent theories over signatures @xmath48 and @xmath51 respectively .",
    "we say that @xmath49 is a * morita extension * of @xmath47 if @xmath49 is a definitional extension of @xmath47 and every symbol in @xmath13 is either a product sort , a coproduct sort , a quotient sort or a subsort and @xmath49 contains in each case the appropriate sequents as defined above .",
    "the following proposition is immediate from the definitions .",
    "[ cemor ] if @xmath49 is a morita extension of @xmath47 then @xmath49 is a conservative extension of @xmath47 .",
    "given this definition of a morita extension we may say that a _",
    "( finite ) morita span _ between two coherent theories @xmath0 and @xmath80 is given by ( finite ) collections of theories @xmath81 and @xmath82 such that for each @xmath83 each @xmath84 is a morita extension of @xmath85 and for each @xmath86 each @xmath87 is a morita extension of @xmath88 and also that @xmath89 where @xmath90 is to be understood as _ logical equivalence _ :",
    "each of the axioms of one theory are derivable from the axioms of the other .",
    "we will also call a ( finite ) series @xmath81 of theories all of which are successively morita extensions of each other a _ ( finite ) morita chain _ from @xmath0 to @xmath91 .",
    "we call two theories @xmath0 and @xmath1 _ pre - t - morita equivalent _ if they can be connected by a morita span ",
    "this is essentially the notion found in @xcite .",
    "the reason we do nt define t - morita equivalence as pre - t - morita equivalence is because the latter fails to be transitive ( as a relation between theories ) . to fix this we take the transitive closure of pre - t - morita equivalence as our notion of t - morita equivalence .    [ tmor ] we call two theories @xmath0 , @xmath1 ( over signatures @xmath4 , @xmath92 ) * t - morita equivalent * if and only if there is a theory @xmath93 over a signature @xmath94 such that @xmath95 and @xmath94 differs from @xmath94 only in renaming the symbols in @xmath96 ( keeping their arities fixed in the case of function and relation symbols ) and @xmath93 differs from @xmath0 only in replacing the symbols in @xmath92 with symbols in @xmath94 and @xmath93 is pre - t - morita equivalent to @xmath0 .",
    "the following then follows easily .",
    "[ tmorer ] t - morita equivalence is an equivalence relation on the class of ( coherent ) theories .",
    "let us outline the general strategy of the proof .",
    "let @xmath47 and @xmath49 be coherent theories .",
    "the coherent grothendieck topology on their syntactic categories gives us sites @xmath97 and @xmath98 and the topos of sheaves on those sites gives us the classifying toposes of @xmath47 and @xmath49 .",
    "so what we care about is whether these two sites give rise to equivalent categories of sheaves . a version of verdier s `` comparison lemma '' from sga4 which provides a sufficient condition for this to be the case and we will prove that this condition is satisfied on the assumption that @xmath49 is a morita extension of @xmath47 .",
    "let @xmath99 be any site and let @xmath100 be a full and faithful functor .",
    "then there is a topology @xmath101 on @xmath102 which we call the _ induced topology _ defined for every @xmath103 in @xmath102 by @xmath104 .",
    "we call @xmath105 the _ induced site_. there is an induced functor @xmath106 defined by precomposition in the usual way .",
    "we have :    let @xmath99 be a site and let @xmath100 be a full and faithful functor and let @xmath105 be the induced site .",
    "if every object @xmath103 of @xmath107 has a covering sieve @xmath108 generated by arrows all of whose domains are in @xmath102 , then @xmath109 is an equivalence .",
    "we record the following fact about induced topologies that we shall require below .",
    "[ elephlem ] let @xmath99 be a site and let @xmath102 be a full subcategory of @xmath107 .",
    "then a sieve @xmath74 on an object @xmath103 of @xmath102 is @xmath110-covering if and only if the sieve @xmath111 in @xmath107 generated by the members of @xmath74 is @xmath112-covering .",
    "so now assume @xmath49 is a morita extension of @xmath47 and let @xmath12 be their respective signatures .",
    "assuming lemma [ key ] - which we prove below - we have the following :    [ fullfaith ] there is a full and faithful embedding @xmath113 .",
    "we have that @xmath49 is a morita extension of @xmath47 .",
    "then we have that @xmath114 where @xmath17 are sequents defining the symbols in @xmath50 in terms of @xmath47-formulas .",
    "clearly we get an inclusion functor @xmath115 that takes @xmath116 since @xmath28 will be a @xmath48-formula and therefore automatically a @xmath51-formula since @xmath12 . on arrows",
    "we define @xmath117 in the obvious way as @xmath118 ) = [ \\theta]$ ] .",
    "this functor is clearly faithful since @xmath49 is a conservative extension of @xmath47 ( proposition [ cemor ] ) and therefore @xmath47-provable equivalence classes of @xmath48-formulas are the same as @xmath49-provable equivalence classes of @xmath48-formulas . to see that it is full , suppose @xmath32 \\colon \\lb \\vec{x}.\\phi \\rb \\rightarrow \\lb \\vec{y}.\\psi \\rb$ ] is an arrow in @xmath119 where @xmath28 and @xmath29 are @xmath48-formulas and the variables in @xmath7 and @xmath120 are all of sorts in @xmath48 ( i.e. both objects are in the image of @xmath117",
    "since @xmath33 has free variables only of sorts in @xmath48 by lemma [ key ] below there is a @xmath48-formula @xmath121 ( with free variables @xmath34 ) such that @xmath122 and by construction of the syntactic category this means that @xmath123)=[\\theta^*]=[\\theta]$ ] .",
    "[ indeqcoh ] the topology induced by @xmath117 as in lemma [ fullfaith ] on @xmath124 when @xmath125 where @xmath126 is the coherent topology on @xmath119 coincides with the coherent topology on @xmath124 .",
    "write @xmath127 for topology on @xmath124 induced by the coherent topology @xmath126 on @xmath119 . without loss of generality we will consider only basic covers .",
    "we have @xmath128 \\colon \\lb \\vec{x}_i .",
    "\\phi_i \\rb \\rightarrow \\lb \\vec{y } .",
    "\\psi \\rb \\rb \\in j_1 ( \\lb \\vec{y}.\\psi \\rb )   \\text { iff } \\t_1 \\models \\bigvee_i \\exists\\vec{x}_i \\theta_i \\dashv \\vdash \\psi   $ ] @xmath129 @xmath128 \\rb \\in j_2 ( \\lb \\vec{y}.\\psi",
    "\\rb )   $ ] @xmath128 \\rb \\in k ( \\lb \\vec{y}.\\psi \\rb ) $ ] where the first biconditional is simply the definition of the coherent topology , the second one follows from the fact that a @xmath49 is a conservative extension of @xmath47 , the third one is again by definition and the fourth one follows from lemma [ elephlem ] .",
    "so lemmas [ fullfaith ] and [ indeqcoh ] gives us the first two conditions in the statement of the comparison lemma .",
    "the next series of lemmas aim to establish the remaining condition .",
    "first we require some definitions about how to relate variables of `` new '' sorts to variables of `` old '' sorts .",
    "we follow @xcite in calling these sequents _ codes_. let @xmath130 be variables of sorts in @xmath131 .",
    "we say that a _ code _ for @xmath130 is a @xmath51-formula @xmath132 where each conjunct @xmath133 depends on the type of variable it codes .",
    "if @xmath134 is of product sort @xmath135 with projections @xmath136 then @xmath137 if @xmath134 is of coproduct sort @xmath138 with injections @xmath139 then @xmath140 for each @xmath141 .",
    "this means that there are @xmath142 choices for a valid code , and we make one .",
    "if @xmath134 is of subsort @xmath143 with injection @xmath144 then @xmath145 . if @xmath134 is of quotient sort @xmath146 with projection @xmath147 then @xmath148 . we also stipulate that @xmath149 is a code for the empty context of variables , i.e. the _ empty code_. finally it is important to note that a code for a variable of coproduct sort is not a disjunction of all possible codes .",
    "this proves crucial in the proof of lemma [ codefunc ] where we prove that codes behave in a `` provably functional '' way as made precise there .",
    "[ codex ] for any code @xmath150 for any variables @xmath7 of sorts in @xmath151 and variables @xmath120 of sorts in @xmath48 we have @xmath152 where the index of the disjunction is taken over all possible codes for a variable of a coproduct sort if there are any among the @xmath7 .",
    "if there are no such variables then the disjunction symbol may be ignored .",
    "similarly , for any code other than one that contains a subsort code we have @xmath153    the problem with subsort codes @xmath154 is that it wo nt necessarily be true that for any variable @xmath25 of sort @xmath74 there is a variable @xmath155 such that @xmath156 because the defining formula @xmath28 of the subsort might not be true of all @xmath157 .",
    "this is a subtlety that proves important in the proofs of lemma [ prekey ] and [ key ] .",
    "the solution , roughly , is this : whenever we want to `` interpret '' a @xmath51-formula containing a variable @xmath158 of some subsort as a @xmath48-formula , we send every instance of @xmath158 to @xmath159 , i.e. to a variable of the original sort that `` is in the image '' of @xmath117 .",
    "it suffices to prove the statement for the basic cases of codes , since any conjunctions of those will also clearly satisfy the conclusions .",
    "all these basic cases follow immediately . in the case of subsorts for example",
    "we need to show that @xmath160 and this follows from the fact that @xmath117 is a function symbol and @xmath75 is assumed non - empty .",
    "the three cases in the other direction follow similarly .",
    "let us do only the coproduct case in order to make it clear why a disjunction is no longer necessary . given a variable @xmath161 for @xmath162 we know that there is @xmath163 such that @xmath164 , i.e. that @xmath165 .",
    "but the formula in the scope of the existential quantifier is exactly @xmath166 which means that @xmath167 as required .",
    "[ codefunc ] let @xmath7 be a context of variables of sorts in @xmath50 and let @xmath120 be variables of sorts in @xmath48 .",
    "let @xmath168 be a code for @xmath7 .",
    "let @xmath169 be a distinct context of variables of the same sort and length as @xmath7 .",
    "then we have @xmath170    once again it suffices to prove the statement for the basic cases , which are more or less immediate . in the case of subsorts for example let @xmath171 where @xmath74 is a subsort of @xmath75 defined by @xmath28 and with injection @xmath117 .",
    "then we have @xmath172 since the left hand - side implies @xmath173 and then the right - hand side follows from ( [ eq : sub2 ] ) .",
    "as its description suggests , lemma [ codefunc ] will be important in proving the second part of lemma [ key ] below where we have to show that conjuncts of codes and formulas define functional relations .",
    "the next two lemmas establish that every @xmath51-formula is @xmath49-provably equivalent to a @xmath48-formula `` up to coding new variables into old ones . ''",
    "[ prekey ] let @xmath174 be a @xmath51-term with @xmath175 variables of sorts in @xmath48 and @xmath7 variables of sorts in @xmath50 and let @xmath176 be a variable of the same sort as @xmath177 .",
    "then we have @xmath178 where the @xmath179 are codes and each @xmath180 is a @xmath48-formula .",
    "we take cases .",
    "the difficult cases are those when either @xmath177 contains variables of new sorts or @xmath74 is a new sort .",
    "the former follow easily but in the latter we need to consider each type of new sort separately .",
    "for example , if @xmath181 and @xmath182 we have @xmath183 where @xmath184 and we let @xmath185 , i.e. the empty code .",
    "if @xmath186 then this case splits into four subcases , one for each new sort . if @xmath187 we have @xmath188 which is of the required form with @xmath189 and @xmath190 . )",
    "the fact that @xmath49 contains the above sequents follows immediately from ( [ eq : prod1 ] ) .",
    "the coproduct and quotient cases follow similarly , but there is an important subtlety in the case of subsorts .",
    "let @xmath191 .",
    "we then have @xmath192 which is of the required form with @xmath193 .",
    "the addition of @xmath194 at the end of @xmath195 seems redundant here since in the sequent above we already have the conjuncts @xmath196 which by ( [ eq : sub1 ] ) are provably equivalent to the former , but the explicit form of @xmath195 as constructed here will be important in the proof of lemma [ key ] below where the presence of conjuncts such as @xmath197 will prove essential .",
    "this is the subtlety that we referred to in the remark just after lemma [ codex ] .",
    "now as to why the above sequent actually holds , we must invoke ( [ eq : sub2 ] ) as follows @xmath198    now if @xmath199 we proceed by induction , assuming the hypothesis holds for each term @xmath200 , for @xmath201 , i.e. @xmath202 ( we will refer to similar inductive hypotheses as ( [ ih ] ) in the rest of this proof even when we drop the subscripts . ) if @xmath203 we have @xmath204 which is of the required form since @xmath203 . if @xmath205 there are two subcases .",
    "either @xmath206 has arity with all sorts in @xmath48 , in which case it is defined by @xmath49 , say by some formula @xmath207 . in that case",
    "we have the exact same sequents as above , except with @xmath207 replacing @xmath208 .",
    "otherwise , @xmath206 is one of @xmath209 or @xmath210 for some new sort . as before we need to take each subcase separately and they all follow straightforwardly except for subsorts .",
    "so take the case of a subsort injection @xmath117 defined by a formula @xmath29 .",
    "we must once again apply a `` patch '' by adding an instance of @xmath29 where it appears not to be needed . also note",
    "that we need only consider @xmath117 as applied to variables since there is no function symbol with codomain @xmath74 in @xmath51 ( by assumption . )",
    "thus from ( [ etran ] ) and ( [ eq : sub1 ] ) we get @xmath211 which is clearly of the required form since @xmath29 is a @xmath48-formula .",
    "[ key ] let @xmath212 be a @xmath51-formula with @xmath7 and @xmath175 as in lemma [ prekey ] .",
    "then @xmath213 where each @xmath179 is a code and each @xmath214 is a @xmath48-formula .",
    "in addition , each @xmath215 is a @xmath49-provably functional relation from @xmath214 to @xmath29 , i.e. defines a morphism @xmath216 \\colon \\lb \\vec{\\bar{x}},\\vec{y}. \\psi^*_j \\rb \\rightarrow \\lb \\vec{x } , \\vec{\\bar{x}}.\\psi \\rb $ ] in @xmath119 .",
    "the first part involves a long induction on complexity . if @xmath217 and @xmath182 then we get @xmath218 where the first line of the deduction is simply ( [ etran ] ) . if @xmath186 we must again consider all subcases . if @xmath219 then we have @xmath220 where @xmath221 stands for the ( @xmath222-tuple of ) variables of sorts @xmath223 to @xmath224 coding the variable @xmath225 of sort @xmath226 and @xmath227 stands for the same code as @xmath228 except we ve removed the conjuncts coding @xmath225 through @xmath221 ( as above , we are allowed to do this because of lemma [ codex ] . )",
    "coproducts and quotients follow similarly but if @xmath229 then the patch that we mentioned in the proof of lemma [ prekey ] is going to be used essentially .",
    "we have @xmath230 which is of the required form . @xmath227 and @xmath231",
    "are used in exactly the same way as in the product case above and every move up to the penultimate sequent is justified similarly . to move to the final sequent ( labelled ( @xmath232 ) ) we invoke the fact that in the proof of lemma [ prekey ] we stipulated that any @xmath28 which contains a variable coding another variable belonging to a subsort will also contain a conjunct asserting that that variable satisfies the defining formula for the subsort .",
    "so in particular since each @xmath233 contains a free variable @xmath231 of sort @xmath75 coding a variable of sort @xmath74 , @xmath233 will also contain the conjunct @xmath234 . since we know from the defining axioms of a subsort that @xmath235 this allows us to safely move from @xmath228 to @xmath227 .",
    "but since by ( [ eq : sub1 ] ) this is @xmath49-provably equivalent to @xmath234 and the latter is contained as a conjunct in both @xmath236 and @xmath233 we may drop it altogether .",
    "after we do so @xmath231 is no longer free in @xmath237 or @xmath238 and we may therefore push the quantifier in , which is what gives us the ( right - hand side of ) the final sequent .    if @xmath239 we once again have two cases . if @xmath240 then for any @xmath241 we have by lemma [ prekey ] that @xmath242 .",
    "using this fact we can define @xmath243 which is a @xmath48-formula and @xmath244 which is clearly a code .",
    "then it follows easily that @xmath245 which is of the required form . if @xmath246 then this means that @xmath247 is definable in terms of a @xmath48-formula @xmath248 , which we then use in exactly the same way as we used @xmath249 above .",
    "this completes the base case and we now move to the inductive step .",
    "since we are only considering coherent formulas , we need only check the inductive step for conjunctions , disjunctions and existential quantifiers .",
    "conjunctions and disjunctions follow easily . in the case of the existential quantifier",
    "let @xmath250 where @xmath251 is free in @xmath28 and @xmath28 satisfies the inductive hypothesis , i.e. @xmath252 .",
    "now there are two subcases .",
    "if @xmath182 then @xmath158 does not appear in @xmath179 for any @xmath253 and so we immediately get that @xmath254 on the other hand , if @xmath186 we once again have four subcases .",
    "they all follow similarly .",
    "we do the coproduct case for variety .",
    "so if @xmath255 this means that @xmath256 does not appear free in @xmath257 but appears free in @xmath179 .",
    "therefore @xmath258 contains a conjunct @xmath259 for @xmath260 and also the @xmath261 appear free in @xmath257 .",
    "from lemma [ codex ] we have @xmath262 thus we have @xmath263 where @xmath264 means the variables in @xmath265 except @xmath261 .",
    "so this completes the proof that every @xmath51-formula @xmath29 is @xmath49-provably equivalent to a formula of the required form , i.e. @xmath266 write @xmath267 for each @xmath268 as above .",
    "we must now show that each such @xmath267 defines a morphism in @xmath119 , i.e. that @xmath267 is a @xmath49-provably functional relation from @xmath269 to @xmath29 .",
    "firstly , by an instance of one of the disjunction axioms we have @xmath270 where the conjunct of the left is one of the disjuncts on the right .",
    "thus by ( [ h ] ) we get @xmath271 and by an instance for one of the axioms for conjunction we also have @xmath272 . from these last two sequents and",
    "@xmath273-intro we then get @xmath274 to see that @xmath275 we note that first conjunct on the right follows directly form the formula on the left as above . and",
    "the second conjunct on the right follows from lemma [ codefunc ] .",
    "finally , we need @xmath276 . in case",
    "@xmath29 has no variables of subsorts this follows immediately from lemma [ codex ] by noting that the right - hand side of the sequent is @xmath49-provably equivalent to @xmath277 .",
    "if on the other hand a variable of a subsort @xmath74 of a sort @xmath75 ( via @xmath117 and @xmath28 ) is involved then we must rely on the explicit definition of @xmath278 , which , in the case of subsorts , we have stipulated contains a conjunct @xmath279 for some @xmath280 appearing among the @xmath120 .",
    "if @xmath281 ( i.e. if we have a variable of the empty subsort in @xmath278 ) then @xmath278 contains @xmath76 as one of its conjuncts and is therefore @xmath49-provably equivalent to @xmath76 and the result follows trivially from efq .",
    "[ comlemmhyp ] for every object @xmath282 of @xmath119 there exists a covering family in @xmath283 generated by morphisms all of whose domains are in @xmath124 .",
    "let @xmath284 be an object of @xmath119 with @xmath175 variables of sorts in @xmath48 and @xmath7 variables of sorts in @xmath51 .",
    "by the second part of lemma [ key ] , we have that there are ( finitely many ) morphisms @xmath216 \\colon \\lb \\vec{\\bar{x}},\\vec{x}. \\psi^*_j \\rb \\rightarrow \\lb \\vec{\\bar{x}},\\vec{x}. \\psi \\rb $ ] where each @xmath267 is of the form described in the proof of lemma [ key ] .",
    "their images are given by the subobjects @xmath285 \\colon \\lb \\vec{\\bar{x } } , \\vec{x } .",
    "\\exists \\vec{y}_j \\theta_j \\rb \\hookrightarrow \\lb \\vec{\\bar{x}},\\vec{x}. \\psi \\rb $ ] and the union of all these subobjects is given by the following subobject @xmath286 \\colon \\lb \\vec{\\bar{x } } , \\vec{x } .",
    "\\bigvee_j \\exists \\vec{y}_j \\theta_j \\rb \\hookrightarrow \\lb \\vec{\\bar{x}},\\vec{x}. \\psi \\rb $ ] .",
    "but by lemma [ key ] , we have @xmath287 which by @xcite d1.4.4(iv ) implies that @xmath288 $ ] is indeed the maximal subobject .",
    "but then this means that the family @xmath289 $ ] generates a @xmath126-cover .",
    "since all @xmath214 are @xmath48-formulas , we are done .",
    "we are now ready to prove the desired result .",
    "[ main ] let @xmath0 and @xmath1 be t - morita equivalent coherent theories .",
    "then they are j - morita equivalent .",
    "clearly it suffices to show that for any theories @xmath47 and @xmath49 such that @xmath49 is a morita extension of @xmath47 then @xmath49 and @xmath47 are j - morita equivalent . by lemmas [ fullfaith],[indeqcoh ] and proposition [ comlemmhyp ] we have that all the hypotheses of the comparison lemma are satisfied for the sites @xmath97 and @xmath98",
    "this means that they give rise to equivalent categories of sheaves and hence ( by @xcite d3.1.9 ) @xmath47 and @xmath49 have equivalent classifying toposes .",
    "we will now prove a converse to theorem [ main ] .",
    "before we begin we should note that `` terminal object sorts '' and `` initial object sorts '' can be defined in terms of quotients and subsorts , as long as our signature contains at least one ( non - empty ) sort symbol , which we have been assuming throughout .",
    "so let @xmath0 be a coherent theory over a signature @xmath4 and let @xmath74 be such a non - empty sort .",
    "let @xmath290 and let @xmath291 be the quotient sort defined from @xmath74 using @xmath28 with @xmath292 the associated projection .",
    "clearly it follows from ( [ eq : quot1 ] ) and ( [ eq : quot2 ] ) that @xmath293 and @xmath294 we can then define new function symbols @xmath295 for any other sort symbols @xmath296 by @xmath297 . similarly we can define @xmath298 to be the subsort of @xmath74 defined using the formula @xmath76 in which case we get @xmath299 . we can then define a function symbol @xmath300 for any other sort symbol @xmath296 by @xmath301 .",
    "clearly any @xmath1 that contains any and all of these extra definitions ( over the suitably expanded signature @xmath302 ) will be a morita extension of @xmath0 .",
    "as in the previous section , if @xmath49 ( over @xmath51 ) is a morita extension of @xmath47 ( over @xmath48 ) then for @xmath74 any sort symbol in @xmath51 we will reserve the notation @xmath17 for the collection of sequents defining @xmath74 in terms of @xmath47 . with this in mind ,",
    "the rest of this section is devoted to proving the following result :    [ main2 ] let @xmath0 and @xmath1 be j - morita equivalent coherent theories .",
    "then they are t - morita equivalent .    for any coherent category @xmath107",
    "we write @xmath303 for its internal theory as a coherent category , i.e. the collection of all sequents satisfied by @xmath107 over the canonical language @xmath304 obtained in the usual way by taking @xmath305 and @xmath306 with the obvious sorting . for the purposes of this paper",
    "we will not consider the _ extended _ canonical language in which we also add a relation symbol for each monomorphism . now",
    "if @xmath307 is the pretopos completion of @xmath107 , then @xmath308 is obtained from @xmath303 by adding coproducts and then quotients for equivalence relations ( @xcite , 8.4 ( a ) and ( b ) ) .",
    "inspection of this construction easily shows that each of these two steps are exactly morita extensions in our sense .",
    "therefore , for a coherent theory @xmath0 , there is a morita span from @xmath309 to @xmath310 .",
    "it is also easy to see that if @xmath107 and @xmath102 be equivalent coherent categories then @xmath303 and @xmath311 are t - morita equivalent ( just take the internal theory of a common skeleton . ) from all this we get :    [ tct ] let two coherent theories @xmath0 and @xmath1 be j - morita equivalent",
    ". then the internal theories @xmath309 and @xmath312 of their syntactic categories are t - morita equivalent .",
    "we now turn our attention to the more difficult problem of establishing that for any coherent theory @xmath0 , the internal theory @xmath309 of its syntactic category @xmath30 is t - morita equivalent to @xmath0 .",
    "we do so by explicitly constructing a morita span between @xmath0 and @xmath309 . before doing this",
    "we introduce some notation . given a sort symbol @xmath313 we let @xmath314 be the set of @xmath4-formulas in a context consisting of a single variable of sort @xmath74 ( which is assumed suitable for them . ) similarly , if @xmath315 for some @xmath316 we let @xmath317 be the set of @xmath4-formulas in the context @xmath318 ( which is assumed suitable for them . ) for any @xmath319 we write @xmath320 where @xmath228 is a code for @xmath321 .",
    "we will use the notation @xmath322 to denote the subsort of @xmath323 defined by @xmath324 and we will denote by @xmath325 the associated function symbol ( dropping the tildes ) . we will also adopt the following notational convention : if @xmath323 is being considered as a product of sorts , we will denote variables of sort @xmath323 by the lower - case version of the letter in question , i.e. in this case @xmath321 . on the other hand , if we are considering @xmath323 as a list of sorts of @xmath4 viewed in isolation , we will write @xmath326 to denote @xmath318 .",
    "the following proposition follows easily .",
    "[ tildequiv ] let @xmath0 be a coherent theory over a signature @xmath4 and @xmath6 be @xmath4-formulas in a context @xmath327 suitable for both of them .",
    "let @xmath1 be any morita extension of @xmath0 that contains the product sort @xmath328 to @xmath4 .",
    "then @xmath329    with all this in mind we can proceed to our constructions .",
    "we construct @xmath330 from @xmath0 in two steps : in the first step , we add arbitrary products and in the second step we add subsorts for any @xmath4-formula - in - context @xmath28 together with function symbols between these subsorts for all @xmath0-provably functional relations between such formulas .",
    "more precisely we first expand the signature @xmath4 as follows @xmath331 and then define the following @xmath48-theory .",
    "@xmath332 we then we expand @xmath48 as follows @xmath333 where on the first line @xmath334 are `` terminal '' and `` initial '' sorts as explained in the beginning of this section and in the next - to - last line the symbol @xmath335 expresses @xmath0-provable equivalence , i.e. we identify @xmath33 and @xmath336 iff @xmath337 ( over the appropriate context ) .",
    "moreover we adopt the convention that @xmath338 is the same as @xmath74 , i.e. we do not add an extra sort symbol for the subsort defined by formula @xmath149 .",
    "now for any such ( equivalence class represented by a ) functional relation @xmath32",
    "\\colon s_\\phi \\rightarrow t_\\psi$ ] we add the following sequent , explicitly defining it : @xmath339(s)=t \\dashv \\vdash_{s , t } \\exists \\vec{x } \\colon \\vec{s } \\exists \\vec{y } \\colon \\vec{t } ( \\xi(\\vec{x},i_\\phi(s ) ) \\wedge \\xi ( \\vec{y},i_\\psi(t ) ) \\wedge \\theta ( \\vec{x } , \\vec{y } ) ) \\tag{$\\tau_{\\theta}$}\\ ] ] similarly , we add sequents defining the `` compound projection '' symbols @xmath340 in the obvious way : given sorts @xmath341 and @xmath342 we have @xmath343 where @xmath344 are the projections associated to the product of the sorts in @xmath323 and @xmath345 are the projections associated to the product of the sorts in @xmath323 together with @xmath346 . thus we get : @xmath347 \\in ( \\widehat{\\sigma } \\setminus \\sigma)\\textbf{-fun } \\rb \\\\ & \\cup \\lb \\gamma_{\\vec{s } , \\vec{s } \\times \\vec{t } } \\vert   \\vec{s } , \\vec{s } \\times \\vec{t } \\in \\sigma_1\\textbf{-sort } \\rb \\ ] ] clearly @xmath47 is a morita extension of @xmath0 since we are only adding explicit definitions of new sort symbols .",
    "@xmath330 is a morita extension of @xmath47 since we are only adding explicit definitions of new sort symbols ( including a singleton sort ) and new function symbols .",
    "thus we have defined a morita chain from @xmath0 to @xmath330 .",
    "we are given the syntactic category @xmath30 of @xmath0 viewed as a coherent category .",
    "firstly , without loss of generality we pass to a skeleton of @xmath30 ( described by what follows . )",
    "in particular we now choose one specific sort symbol for ( the object part ) of every limit in @xmath30 together with specific ( formulas representing the associated ) universal arrows .",
    "the choices we make are the canonical ones , as laid out in d1 of @xcite .",
    "let @xmath348 be the signature of the canonical language of @xmath30 ( i.e. of the skeleton of our original @xmath30 . )",
    "we take @xmath348 to consist of symbols in @xmath349 ( this is our choice of skeleton ) : we write @xmath350 as @xmath351 ( or @xmath322 for short ) and we use the already available symbols in @xmath349 for the function symbols .",
    "this also means that @xmath352 will be written as @xmath74 , @xmath353 .",
    "\\top \\rb$ ] as @xmath291 and @xmath353.\\bot \\rb$ ] as @xmath298 .",
    "since we are considering objects of @xmath30 up to renaming of variables all this involves no loss of information . also , for example for two objects @xmath322 and @xmath354 we will take their product to be given by @xmath355 .",
    "so this rewriting clearly exhibits @xmath348 as a subsignature of @xmath349 .",
    "we now define the following extension of @xmath348 @xmath356 where function symbols @xmath206 are defined as having arity @xmath357 rather than @xmath358 , and relation symbols @xmath247 are defined as @xmath222-ary predicates @xmath359 rather than as unary predicates @xmath360 .",
    "hence we define the following @xmath361-theory @xmath362 : @xmath363(s ) = x \\vert    \\rb \\\\",
    "\\cup \\lb & \\epsilon_{\\vec{s } , \\phi } \\equiv i_\\phi ( s ) = x \\dashv \\vdash_{s , x } [ \\phi](s ) = x \\vert \\vec{s } \\in \\sigma_{\\t}\\textbf{sort } ,   \\phi \\in \\sigma(\\vec{s } ) \\rb   \\\\    \\cup \\lb & \\zeta_s \\equiv 0_s ( s ) = x \\dashv \\vdash_{s , x } \\bot \\vert s \\in \\sigma_\\t \\textbf{-sort } \\rb \\\\   \\cup   \\lb & \\iota_s \\equiv \\text { }   ! _ s ( s ) = x \\dashv \\vdash_{s , x } s = s \\wedge x = x \\vert s",
    "\\in \\sigma_\\t \\textbf{-sort } \\rb \\\\   \\cup \\lb & \\mu_f \\equiv    f(\\vec{x})=y \\dashv \\vdash_{\\vec{x } \\colon \\vec{s } , y \\colon t }   \\exists s \\colon \\vec{s } \\exists t \\colon t ( \\xi(s,\\vec{x } ) \\wedge \\xi(t , y ) \\wedge \\\\   & [ f(\\vec{x})=y ] ( s ) = t   \\vert f \\in \\sigma\\textbf{-fun}\\rb \\\\ \\cup \\lb & \\nu_r \\equiv r\\vec{x } \\dashv \\vdash_{\\vec{x } \\colon \\vec{s } } \\exists r \\colon \\vec{s}_{r\\vec{x } } \\exists s \\colon \\vec{s } ( \\xi(s,\\vec{x } ) \\wedge i_{r\\vec{x } } ( r ) = s ) \\vert r \\in \\sigma\\textbf{-rel } \\rb \\\\   \\ ] ] where the codes used in sequents @xmath364 and @xmath365 are of course expressed in terms of the symbols defined by the sequents @xmath366 and @xmath367 . clearly @xmath362 is a morita extension of @xmath309 since it is obtained from the latter by the addition of explicit definitions for new function and relation symbols .    [ tilde ] let @xmath28 be any @xmath4-formula , viewed as a @xmath361-formula .",
    "then we have : @xmath368    we proceed by induction on the complexity of @xmath28 . if @xmath369 for some relation symbol @xmath370 of arity @xmath323 then we have @xmath371 if @xmath372 for @xmath4-terms",
    "@xmath373 then it clearly suffices to prove the proposition only for simple atomic formulas , i.e. for @xmath374 for some @xmath375 and for @xmath376 , a variable of the appropriate sort given the arity of @xmath206 .",
    "the proof then follows exactly analogously as in the case of relation symbols .",
    "now suppose @xmath377 such that the inductive hypothesis holds for @xmath378 and @xmath379 .",
    "this means we have @xmath380 note that the following diagram commutes in @xmath30 and that each square ( and therefore each rectangle ) is a pullback : @xmath381^q \\ar[d]_{p } & ( \\vec{s } \\times \\vec{t})_{\\phi_2 \\wedge \\vec{x } = \\vec{x } } \\ar[d]_{p_{22 } } \\ar[r]^{p_{21 } } & \\vec{t}_{\\phi_2 } \\ar[d]^{i_{\\phi_2 } } \\\\ ( \\vec{s } \\times \\vec{t})_{\\phi_1 \\wedge \\vec{y } = \\vec{y } } \\ar[r]_{p_{12 } } \\ar[d]_{p_{11 } } & \\vec{s } \\times \\vec{t } \\ar[r]^{\\pi_{\\vec{t } } } \\ar[d]_{\\pi_{\\vec{s } } } & \\vec{t } \\\\",
    "\\vec{s}_{\\phi_1 } \\ar[r]^{i_{\\phi_1 } } & \\vec{s } } \\ ] ] in the deduction below we will refer to the sequents satisfied by @xmath362 related to properties of this diagram by the obvious abbreviations .",
    "so when we write ( comm ) below we are invoking the relevant sequent expressing the commutativity of some part of the diagram  similarly with ( pull ) for pullbacks and ( inj ) for some map being a mono . with this in mind",
    "we have : @xmath382 the first sequent is by a simple unpacking of the definition of @xmath383 where @xmath384 stands for @xmath385 .",
    "the last step @xmath386 is accomplished by noting that the conjunct in the penultimate sequent labelled ( p ) is the same as the ( rhs of the ) sequent appearing at the third step .",
    "since we know that everything that follows after the third step is logically equivalent to it , we may thus eliminate the conjunct in moving to @xmath386 .",
    "the cases @xmath387 and @xmath388 proceed by exactly analogous internal language arguments involving the sups and image factorizations of the relevant subobjects in @xmath30 .",
    "we omit the details .",
    "[ hateqtil ] let @xmath0 be a coherent theory over a signature @xmath4 .",
    "then @xmath330 is logically equivalent to @xmath362 .",
    "we need to prove that each sequent in @xmath330 is derivable from sequents in @xmath362 and vice versa .",
    "@xmath389 : we take each of the axioms of @xmath362 and show that they are derivable in @xmath330 . * commutative diagrams * : we have @xmath390(x ) = [ \\gamma ] ( [ \\theta ] ( x))$ ] for every commutative diagram @xmath391^{[\\gamma ] } \\\\",
    "\\vec{s}_\\phi \\ar[rr]^{[\\alpha ] } \\ar[ur]^{[\\theta ] } & & \\vec{q}_{\\chi } } \\ ] ] in @xmath30 .",
    "such a diagram is commutative if and only if @xmath392 by the definition of the syntactic category @xmath30 .",
    "this means that @xmath393 $ ] and @xmath394 $ ] are the same function symbol in @xmath330 since by construction we consider these function symbols only up to @xmath0-provable equivalence . starting with @xmath395 we thus have the following derivation : @xmath396 ( s ) = q & \\dashv \\vdash_{s , q } \\exists \\vec{x } \\exists \\vec{z } ( \\xi(s,\\vec{x},q,\\vec{z } ) \\wedge \\exists \\vec{y } ( \\theta \\wedge \\gamma ) ) \\\\ & \\dashv \\vdash_{s , q } \\exists \\vec{x } \\exists \\vec{z } \\exists \\vec{y } ( \\xi(s,\\vec{x},q,\\vec{z } ) \\wedge ( \\theta \\wedge \\gamma ) ) \\tag{\\ref{eq : frob}}\\\\ & \\dashv \\vdash_{s , q } \\exists \\vec{x } \\exists \\vec{z } \\exists \\vec{y } \\exists t ( ( \\xi(s,\\vec{x},t , \\vec{y } ) \\wedge \\theta ) \\wedge ( \\xi(q,\\vec{z},t , \\vec{y } ) \\wedge \\gamma ) ) \\tag{\\ref{codex},\\ref{codefunc } } \\\\ & \\dashv \\vdash_{s , q } \\exists t ( [ \\gamma](t ) = q \\wedge [ \\theta](s ) = t ) \\tag{$\\tau_\\theta , \\tau_\\gamma$ } \\\\ & \\dashv \\vdash_{s , q } [ \\gamma ] ( [ \\theta](s ) ) = q \\tag{\\ref{etran}}\\end{aligned}\\ ] ] so we have @xmath397 ( s ) = q \\dashv \\vdash_{s , q } [ \\gamma ] ( [ \\theta](s ) ) = q   $ ] and by substituting @xmath398 ( [ \\theta](s))$ ] for @xmath399 in the above sequent we get @xmath400 ( s ) = [ \\gamma ] ( [ \\theta](s ) ) \\equiv \\top \\vdash_s [ \\alpha ] ( s ) = [ \\gamma ] ( [ \\theta](s))\\ ] ] as required .    * finite limits * : next we must deal with all the sequents in @xmath362 expressing that a diagram is a ( finite ) limit diagram in @xmath30 . for terminal objects we know that an object @xmath291 in @xmath30 is terminal if and only if @xmath30 satisfies @xmath401 and @xmath402 .",
    "but those are exactly the sequents that @xmath291 satisfies as a `` terminal object sort '' in @xmath330 .",
    "so @xmath330 also satisfies these sequents . for binary products ,",
    "let @xmath322 and @xmath354 be arbitrary sorts in @xmath348 ( i.e. objects in @xmath30 ) .",
    "then we have that @xmath403 @xmath404 with projections given by @xmath405 $ ] and @xmath406 $ ] . in order to show that @xmath330 also satisfies these sequents , first note that the following diagram commutes in @xmath30 : @xmath407^{i_\\phi }   & ( \\vec{s } \\times \\vec{t})_{\\phi \\wedge \\psi } \\ar[d]^{i_{\\phi \\wedge \\psi } } \\ar[l]_{p_1 } \\ar[r]^{p_2 } & \\vec{t}_\\psi \\ar[d]^{i_\\psi } \\\\ \\vec{s }   & \\vec{s } \\times \\vec{t } \\ar[l]^{\\pi_{\\vec{s } } } \\ar[r]_{\\pi_{\\vec{t } } } & \\vec{t }   } \\ ] ] now since @xmath408 is a product sort in @xmath330 , we have @xmath409 by substitution we thus get @xmath410 let s call the above sequent @xmath3 . from the fact that the above diagram commutes we know that @xmath411 and therefore from part ( 1 ) of the theorem proven above about commutative diagrams we get @xmath412 from the two sequents above combined with @xmath3 we get @xmath413 but @xmath414 and @xmath415 are such that the `` injectivity '' sequent ( [ eq : sub2 ] ) is satisfied in @xmath330  and this gives us that @xmath416 as required .    on the other hand , the fact that @xmath417 for the relevant product gives us @xmath418 by ( [ eq : sub1 ] ) we have that @xmath419 but by definition we know that @xmath420 and and by applying ( [ eq : sub1 ] ) to the rhs of the above for the conjuncts @xmath324 and @xmath421 we get that @xmath422 now the rhs of the above sequent is clearly implied by the rhs of ( [ eq : seq2 ] ) , which means then that the rhs of ( [ eq : seq2 ] ) implies @xmath423 , i.e. we can derive from ( [ eq : seq2 ] ) the following @xmath424 which gives us the desired result . an exactly analogous ( and even simpler ) argument as the above , gives us the required result for sequent in @xmath362 expressing that a diagram is an equalizer .",
    "we omit the details .    * sups and images * : analogous , and omitted .    * explicit definitions",
    "* : this follows easily since each of the sequents @xmath425 and @xmath426 in @xmath362 can easily be derived as special instances of the sequent @xmath427 for particular choices of @xmath33 .",
    "for example if @xmath428 is a function symbol we can use @xmath429(s)=t \\dashv \\vdash_{s , t } \\exists \\vec{x } \\exists y ( \\xi(s,\\vec{x } ) \\wedge \\xi(t , y ) \\wedge f(\\vec{x } ) = y ) $ ] to derive @xmath364 by adding and eliminating quantifiers in accordance with properties of product sorts .",
    "the remaining cases follow similarly , taking care of the usual degenerate cases .",
    "we omit the details .",
    "@xmath430 : similarly , we take each of the axioms of @xmath330 and show that they are derivable in @xmath362 . * sequents in @xmath0 * : we have that @xmath431 whenever @xmath432 since @xmath330 is an extension of @xmath0 .",
    "now whenever @xmath432 we know by ( @xcite , lemma d1.4.4(iv ) ) that in @xmath30 we have a morphism @xmath433 and moreover that this morphism is given by @xmath434 $ ] and that it fits in the following commutative triangle @xmath435^{i_\\phi } \\ar[rr]^{[\\phi ] } & & \\vec{s}_{\\psi } \\ar[lu]_{i_\\psi } } \\ ] ] since @xmath362 is an extension of @xmath309 we have that @xmath436 ( y ) ) $ ] and from this and @xmath273-introduction and substitution it easily follows that @xmath437 . by lemma [ tilde ] followed by proposition [ tildequiv ] we then get @xmath438 as required .",
    "* sequents for subsorts * : we use a similar argument as in the case of products .",
    "let @xmath439 be a subsort of @xmath440 with injection @xmath441 . then @xmath442 .",
    "now in @xmath30 we have the following mono @xmath443 \\colon \\vec{s}_\\phi \\hookrightarrow \\vec{s }   $ ] . by sequents",
    "@xmath444 we may write @xmath434 $ ] as @xmath325 .",
    "thus by soundness as above , we get that @xmath445 which is of course exactly the sequent ( [ eq : sub2 ] ) . now from lemma [ tildequiv ] we get @xmath446 which ( given our convention of suppressing the tilde in subscripts ) is exactly ( [ eq : sub1 ] ) .",
    "* sequents for product sorts * : analogous to subsorts , and omitted .    * explicit definitions * : we have that @xmath447 for all @xmath33 such that @xmath32 \\in \\widehat{\\sigma } \\setminus \\sigma\\textbf{-fun}$ ] .",
    "we need to show that @xmath362 also satisfies these sequents .",
    "to do so , first recall that @xmath33 is a @xmath4-formula in context @xmath408 , i.e. @xmath448 .",
    "assume that it is a @xmath0-provable functional relation between @xmath449 and @xmath450 , i.e. a morphism @xmath32 \\colon \\vec{s}_\\phi \\rightarrow \\vec{t}_\\psi$ ] in @xmath30 .",
    "thus we have @xmath451 and by lemma [ tilde ] we get @xmath452 and therefore @xmath453 now note that the following diagram commutes in @xmath30 : @xmath454_{\\pi_{\\vec{s } } } \\ar[r]^{\\pi_{\\vec{t } } } & \\vec{t } \\\\",
    "\\vec{s}_\\phi \\ar@/_30pt/[rrrr]_{[\\theta ] } \\ar[ru]^{i_\\phi } & ( \\vec{s } \\times \\vec{t})_{\\phi \\wedge \\vec{y}=\\vec{y } } \\ar[l]_{[\\phi ] } \\ar[ru]^{i_{\\phi \\wedge \\vec{y}=\\vec{y } } } & ( \\vec{s}\\times\\vec{t})_\\theta \\ar[l]_{[\\theta]_1 } \\ar[r]^{[\\theta]_2 } \\ar[u]^{i_\\theta } & ( \\vec{s}\\times\\vec{t})_{\\psi \\wedge \\vec{x}=\\vec{x } } \\ar[lu]_{i_{\\psi \\wedge \\vec{x}=\\vec{x } } } \\ar[r]^{[\\psi ] } & \\vec{t}_\\psi \\ar[lu]_{i_\\psi } \\\\ } \\ ] ] where @xmath32_1 $ ] and @xmath32_2 $ ] are the unique maps guaranteed to exist by ( @xcite , d1.4.4.(iv ) ) since @xmath455 and @xmath456 . from the bottom part of the diagram and the fact that @xmath33 is a functional relation we thus get @xmath457(s)=t \\dashv \\vdash_{s , t } \\exists z \\colon ( \\vec{s } \\times \\vec{t})_\\theta ( s = p_1(z ) \\wedge t = p_2(z))\\ ] ] where @xmath458 \\circ [ \\theta]_1 $ ] and @xmath459 \\circ [ \\theta]_2 $ ] .",
    "now we have the following derivation : @xmath460(s)=t & \\dashv \\vdash_{s , t } \\exists z \\colon ( \\vec{s } \\times \\vec{t})_\\theta ( s = p_1(z ) \\wedge t = p_2(z ) ) \\\\ &",
    "\\dashv \\vdash \\exists z \\colon ( \\vec{s } \\times \\vec{t})_\\theta ( i_\\phi ( s)= i_\\phi ( p_1(z ) ) \\wedge i_\\psi(t)=i_\\psi(p_2(z ) ) ) \\tag{\\ref{eq : sub2 } } \\\\ & \\dashv \\vdash \\exists z \\colon ( \\vec{s } \\times \\vec{t})_\\theta ( i_\\phi ( s)= \\pi_{\\vec{s}}(i_\\theta(z ) ) \\wedge i_\\psi(t)=\\pi_{\\vec{t}}(i_\\theta(z ) ) ) \\tag{comm } \\\\ & \\dashv \\vdash \\exists \\vec{x } \\colon \\vec{s } \\exists \\vec{y } \\colon \\vec{t } \\exists z \\colon ( s \\times t)_\\theta ( \\xi(\\vec{x},i_\\phi(s ) ) \\wedge \\xi(\\vec{y},i_\\psi(t ) ) \\tag{\\ref{codex}}\\\\ & \\wedge \\xi(\\vec{x},\\pi_{\\vec{s}}(i_\\theta(z ) ) )   \\wedge \\xi(\\vec{y},\\pi_{\\vec{t}}(i_\\theta(z ) ) ) ) \\\\ &",
    "\\dashv \\vdash \\exists \\vec{x } \\colon \\vec{s } \\exists \\vec{y } \\colon \\vec{t } ( \\xi(\\vec{x},i_\\phi(s ) ) \\wedge \\xi(\\vec{y},i_\\psi(t ) ) \\tag{\\ref{eq : frob}}\\\\   & \\wedge ( \\exists z \\colon ( s \\times t)_\\theta ( \\xi(\\vec{x},\\pi_{\\vec{s}}(i_\\theta(z ) ) )   \\wedge \\xi(\\vec{y},\\pi_{\\vec{t}}(i_\\theta(z ) ) ) ) ) ) \\\\    & \\dashv \\vdash \\exists \\vec{x } \\colon \\vec{s } \\exists \\vec{y } \\colon \\vec{t } ( \\xi(\\vec{x},i_\\phi(s ) ) \\wedge \\xi(\\vec{y},i_\\psi(t ) ) \\wedge \\theta(\\vec{x},\\vec{y } ) ) \\tag{$\\dag$}\\end{aligned}\\ ] ] where by ( comm ) we indicate the fact that the relevant sequent is satisfied since the above diagram commutes in @xmath30 .",
    "[ ttct ] for any coherent theory @xmath0 , @xmath0 is t - morita equivalent to @xmath309 .    by construction",
    ", there is a morita chain from @xmath0 to @xmath330 and a morita chain from @xmath309 to @xmath362 and from proposition [ hateqtil ] we have that @xmath330 and @xmath362 are logically equivalent .",
    "we are now finally ready to prove theorem [ main2 ] .",
    "let @xmath0 and @xmath1 be j - morita equivalent coherent theories . by corollary [ ttct ] we know that @xmath0 is t - morita equivalent to @xmath309 and @xmath1 is t - morita equivalent to @xmath312 .",
    "but since @xmath0 and @xmath1 are j - morita equivalent , by proposition [ tct ] we get that @xmath309 and @xmath461 are t - morita equivalent .",
    "combining theorem [ main ] and theorem [ main2 ] we have thus arrived at the desired characterization :    [ tiffj ] two coherent theories @xmath0 and @xmath1 are t - morita equivalent if and only if they are j - morita equivalent .    two coherent theories @xmath0 and @xmath1 are t - morita equivalent if and only if @xmath462 naturally for any grothendieck topos @xmath463 .    two coherent theories @xmath0 and @xmath1 are t - morita equivalent if and only if they have equivalent pretopos completions .",
    "for geometric theories , if we extend the definition of a morita extension to infinitary coproducts in the obvious way , and extend our deductive system to include the relevant rules for infinitary distributivity of disjunction over conjunction , then all the proofs in sections [ tmortojmor ] and [ jmortotmor ] still go through unchanged , except finite disjunctions will be replaced by arbitrarily large ones .",
    "the only issue that arises is the issue of defining categories of sheaves on large sites since @xmath30 is no longer necessarily small .",
    "this is only a minor difficulty : essentially the fix is contained in what is said in the proof of ( @xcite , lemma d1.4.10(iv ) ) . as such we obtain the analogues of theorems [ main ] and [ main2 ] for geometric logic ,",
    "if in their statement we take the notion of morita extension and morita equivalence in the expanded sense , in which we include infinitary coproducts .",
    "[ tiffjgeom ] let @xmath47 and @xmath49 be geometric theories .",
    "then they are j - morita equivalent if and only if they are t - morita equivalent .    in the case of regular theories",
    ", we can define a _ regular morita extension _ ( resp . _ regular t - morita equivalence _ ) to be the same notion as described in definition [ morex ] but without coproduct sorts .",
    "then we get :    [ regmain ] let @xmath0 and @xmath1 be regular theories . then they are j - morita equivalent if and only if they are regular t - morita equivalent .    for sufficiency ,",
    "the same proof strategy as section [ tmortojmor ] works again here . for necessity",
    ", we may once again repeat the constructions of section @xmath464 dropping any mention of coproduct sorts .",
    "one important difference however is how we apply the argument that leads up to proposition [ tct ] because we now we need the fact that the effectivization of a regular category @xmath107 is equivalent to adding quotients of equivalent relations ( but not coproducts ) to @xmath303 .",
    "this fact  to our knowledge  is nowhere directly recorded in the literature , although it is an easy consequence of many well - known constructions .",
    "the reader is referred to ( @xcite , 3.3.10 ) where the construction of @xmath465 given there in the setting of allegories can easily be seen to involve the free addition to @xmath303 of quotient sorts for equivalence relations .    in the case of cartesian theories",
    ", we say that two cartesian theories @xmath0 and @xmath1 are _ ( cartesian ) j - morita equivalent _ if and only if their syntactic categories @xmath30 and @xmath466 are equivalent .",
    "the corresponding notion of _ cartesian t - morita extension _",
    "( resp . _ cartesian t - morita equivalence _ ) can be defined as in definition [ tmor ] except we allow only product sorts , subsorts as well as singleton sorts ( i.e. sorts @xmath75 satisfying the sequents @xmath467 and @xmath468 ) since we can no longer obtain singletons as quotient sorts .",
    "[ cartmain ] let @xmath0 and @xmath1 be cartesian theories .",
    "then they are j - morita equivalent if and only if they are cartesian t - morita equivalent .    for sufficiency it suffices to note that if @xmath49 ( over @xmath51 ) is a cartesian morita extension of @xmath47 ( over @xmath48 ) then the induced inclusion functor @xmath469 as in the proof of lemma [ fullfaith ] is now actually essentially surjective , and therefore an equivalence this",
    "can easily be seen to reduce to proving that each @xmath119-object of the form @xmath470 or @xmath471 is isomorphic to @xmath472 and @xmath473 respectively and both these facts follow straightforwardly from the relevant sequents for product sorts and subsorts .",
    "conversely , as in theorem [ regmain ] , we merely have to note that in the construction of @xmath330 and @xmath362 only product and subsorts are used except in the case of the singleton sort which was there defined as a quotient sort and which will here be defined directly as a singleton sort as described above . the relevant parts of the proof of proposition [ tildequiv ] ( those involving only commutative diagrams and finite limits ) then follow as before .",
    "in the case of first - order theories there is no longer a `` good '' notion of a classifying topos and as a result no pre - existing notion of j - morita equivalence . even though it is possible to construct a topos that contains a generic model of a first - order theory @xmath0 ( cf .",
    "@xcite d.3.1.18 ) geometric morphisms into this topos no longer correspond to models of @xmath0 .",
    "one can of course rectify the situation by adding suitable extra conditions ( cf .",
    "e.g. @xcite ) .",
    "on the other hand , in @xcite barrett and halvorson have shown that if two ( classical ) first - order theories @xmath474 are t - morita equivalent then @xmath475 . from the well - known process of morleyization ( @xcite , d1.5.13 ) we know that for any classical first - order theory @xmath0 over a signature @xmath4 there is a coherent theory @xmath476 over a signature @xmath477 such that @xmath478 where @xmath479 is any boolean coherent category .",
    "this suggests the following :    [ morltiffj ] let @xmath0 and @xmath1 be be first - order theories .",
    "then they are t - morita equivalent if and only if their morleyizations @xmath480 and @xmath481 are j - morita equivalent as coherent theories .    before proving the theorem",
    "we require some preliminary results .",
    "[ mequiv ] let @xmath0 be a first - order theory over classical logic and @xmath480 its morleyization regarded as a first - order theory .",
    "then @xmath482 , where @xmath7 is the canonical context for @xmath28 .",
    "this follows by a straightforward induction on the complexity of @xmath28 . before proceeding note also that @xmath483 since by construction we have @xmath484 and we are over classical logic . now if @xmath28 is atomic ( including @xmath149 or @xmath76 ) then the result holds by construction . for the inductive step ,",
    "let us do only the case universal quantification since the rest follow similarly : @xmath485    [ fomor ] any first order theory @xmath0 is t - morita equivalent to its morleyization @xmath480 when the latter is regarded as a first - order theory .",
    "we construct an extension ( @xmath47 , @xmath48 ) of @xmath0 as follows : we let @xmath486 , i.e. for every first - order formula @xmath28 over @xmath4 we add two relation symbols @xmath487 and @xmath488 of arity the same as the canonical context of @xmath28 .",
    "we then define @xmath47 as @xmath489 where @xmath490 is the set of first - order @xmath4-formulas .",
    "clearly @xmath47 is a morita extension ( indeed a definitional extension ) of @xmath0 and it is over the same signature as @xmath480 .",
    "we claim that @xmath47 and @xmath480 are logically equivalent .",
    "@xmath491 : @xmath47 consists of the axioms of @xmath0 together with the explicit definitions of the new relation symbols as described above .",
    "so if @xmath5 is an axiom of @xmath0 , we know that @xmath492 and so by lemma [ mequiv ] and substitution of equivalents we get that @xmath493 . on the other hand , for every explicit definition @xmath494 or @xmath495 in @xmath47 we get that @xmath480 satisfies them directly from lemma [ mequiv ] and ( [ eq : neg ] ) ( as it appears in the proof of [ mequiv ] . ) @xmath496 : if @xmath497 is an axiom of @xmath480 then @xmath38 and therefore by the sequents explicitly defining @xmath488 and @xmath498 in @xmath47 we get @xmath499 .",
    "now we also have @xmath500 and @xmath501 for every first - order @xmath4-formula @xmath28 .",
    "since we are over classical logic we have : @xmath502 we obtain @xmath503 exactly analogously .",
    "finally , each of the sequents defining the relation symbols in @xmath480 is also derivable in @xmath47 immediately since the latter contains essentially exactly the same definitions .",
    "let s do the universal quantifier as an illustration : we have that @xmath504 . to see that @xmath47 also satisfies this sequent we can argue as follows : @xmath505    we are now ready to prove theorem [ morltiffj ] .",
    "( of theorem [ morltiffj ] ) let @xmath47 ( over @xmath48 ) be a first - order theory and @xmath49 ( over @xmath51 ) a morita extension of @xmath47 .",
    "let @xmath506 be the morleyization of @xmath47 .",
    "define @xmath507 over @xmath51 as follows .",
    "if @xmath206 is a function symbol in @xmath50**-fun * * explicitly defined by some @xmath48-formula @xmath28 as @xmath508 then @xmath49 contains the sequent @xmath509 .",
    "similarly if @xmath247 is a relation symbol in @xmath50**-rel * * explicitly defined by some @xmath48-formula @xmath510 as @xmath511 then @xmath49 contains the sequent @xmath512 .",
    "if @xmath49 contains any new sort symbols then @xmath507 also contains the sequents attached to these new sort symbols  since all these sequents are coherent , this poses no problem .",
    "therefore @xmath507 is a morita extension of @xmath506 and in fact it is not hard to see that @xmath507 is in fact exactly the morleyization of @xmath49 as usually constructed .",
    "thus we may say that `` morleyizing preserves morita extensions . ''",
    "the only situation in which it is not immediate to verify this fact is if @xmath49 contains subsorts or quotient sorts defined via first - order @xmath48-formulas .",
    "take the case of subsorts as an illustration .",
    "suppose that @xmath513 is a subsort in @xmath49 defined via a @xmath48-formula @xmath28 .",
    "this means that @xmath514 and @xmath515 therefore the morleyization of @xmath49 contains a sort symbol @xmath513 together with the sequents @xmath516 and @xmath517 .",
    "but these last two sequents exactly define @xmath513 as a subsort of @xmath74 via the formula @xmath488 .",
    "since logically equivalent first - order theories have logically equivalent morleyizations , this means that the morita span from @xmath0 to @xmath1 induces a morita span between @xmath480 and @xmath481 . by theorem [ tiffj",
    "] this means that @xmath480 and @xmath481 are j - morita equivalent .",
    "conversely , suppose that the morleyizations of @xmath480 and @xmath481 of two first - order theories are j - morita equivalent .",
    "by theorem [ tiffj ] they are t - morita equivalent . clearly if two coherent theories are t - morita equivalent as coherent theories then they are t - morita equivalent as first - order theories . thus @xmath480 and @xmath481 are t - morita equivalent ( as first - order theories . ) but by proposition [ fomor ] we know that @xmath0 and @xmath1 are respectively t - morita equivalent to @xmath480 and @xmath481 , so we are done .",
    "one of the main mathematical upshots of our result is that it gives a new way of generating morita - equivalences between theories . as an indication of the possible mathematical rewards of this",
    "consider some recent remarks of l. lafforgue @xcite on the langlands correspondence based on o. caramello s work as best summarized in @xcite .",
    "our result could also be another way to judge the viability of such an approach , on whose prospects we remain neutral .",
    "we intend to explore some tentative results in this direction in future work .",
    "another consequence of our result is that topos - theoretic invariants automatically become invariants of theories up to t - morita equivalence .",
    "this is a kind of inversion of the philosophy expounded in @xcite .",
    "more precisely , given a topos - theoretic invariant @xmath518 ( a property @xmath518 of a topos @xmath519 invariant under geometric equivalences ) we automatically get a property @xmath520 of a geometric theory @xmath0 that is invariant under t - morita equivalence .",
    "this is interesting in ( at least ) two ways .",
    "firstly , it gives us a syntactic way of determining whether a property of a theory @xmath0 corresponds to a topos - theoretic invariant ( of the classifying topos of @xmath0 ) , by seeing whether or not it is invariant under t - morita equivalence .    for a trivial example , consider the property of being single - sorted .",
    "there are clearly examples of single - sorted ( geometric ) theories that are t - morita equivalent to many - sorted ones .",
    "automatically this means that there can not be a topos - theoretic invariant property expressing the fact that the geometric theory corresponding to a particular topos is single - sorted .",
    "it is known ( cf .",
    "@xcite ) that a complete geometric theory is countably categorical if and only if its classifying topos is atomic .",
    "since being atomic is a topos - theoretic invariant , from theorem [ tiffjgeom ] this means that countable categoricity is invariant under t - morita equivalence .",
    "finally t - morita equivalence gives us a more precise way of understanding what is done by the following functors : @xmath521 in particular , taking a coherent theory to the pretopos completion of its syntactic category and then taking the internal theory of that pretopos ( as a coherent category ) gives us back a t - morita equivalent theory .",
    "since t - morita equivalences are essentially spans of morita extensions one can raise the question about whether * pretop * can be characterized by a localization procedure on * cohtheo*. this would be a logical version of the localization constructions in @xcite .",
    "we plan to explore this idea in future work ."
  ],
  "abstract_text": [
    "<S> we characterize morita equivalence of theories in the sense of johnstone in @xcite in terms of a new syntactic notion of a common definitional extension developed by barrett and halvorson in @xcite for cartesian , regular , coherent , geometric and first - order theories . </S>",
    "<S> this provides a purely syntactic characterization of the relation between two theories that have equivalent categories of models naturally in any grothendieck topos . </S>"
  ]
}