{
  "article_text": [
    "this paper is a sequel to @xcite , in which we developed and analyzed a deterministic fluid model approximating the @xmath1 queueing model , having a general arrival process with time - varying arrival rate ( the initial  @xmath2 ) , independent and identically distributed ( i.i.d . )",
    "service times with a general cumulative distribution function ( c.d.f . )",
    "@xmath3 ( the  first  @xmath4 ) , a time - varying large number of servers ( the  @xmath5 ) and customer abandonment from queue with i.i.d . patience times with a general c.d.f .",
    "@xmath6 ( the  final @xmath7 ) .",
    "the fluid model was assumed to alternate between intervals of underloading ( ul ) and overloading ( ol ) .",
    "we conducted simulation experiments showing that the fluid approximation is effective for approximating individual sample paths of stochastic processes of very large systems ( e.g. , with hundreds of servers ) and the mean values of smaller systems ( e.g. , with tens of servers , provided that these systems are not critically loaded or too nearly so ) .",
    "see @xcite for background on methods to analyze the performance of queues with time - varying arrival rates and their application .",
    "the present paper establishes many - server heavy - traffic limits that provide mathematical support for both the previous fluid approximation and a refined gaussian process approximation in the special case of exponential ( @xmath8 ) service times .",
    "based directly on the limit theorems here , we propose approximating the time - varying number of the customers in system ( including those in service and those waiting in queue if any ) , @xmath9 , by a gaussian distribution for each @xmath10 , in particular , @xmath11 where @xmath12 denotes a gaussian random variable with mean @xmath13 and variance  @xmath14 , @xmath15 is the deterministic fluid approximation proposed and analyzed previously in @xcite , and now supported by the functional weak laws of large numbers ( fwllns ) in theorems [ thfwlln ] and [ thul ] , while @xmath16 is a zero - mean gaussian process with variance @xmath17 obtained from the functional central limit theorems ( fclts ) in theorems [ thfclt ] , [ thother ] and [ thul ] .",
    "explicit formulas for the variance function @xmath18 are given in corollary [ corvar ] to go with the explicit expressions for the fluid function @xmath15 determined previously in @xcite , and reviewed here in section  [ secfluid ] .",
    "as in @xcite , we assume that the system alternates between ul intervals and ol intervals , where the system loading is determined by the fluid model , which has the same parameters ; that is , the system is said to be ul ( ol ) if the fluid model is ul ( ol ) . sufficient conditions for the fluid model to alternate between ol and ul intervals were given in section  3 of @xcite .",
    "in the terminology of many - server heavy - traffic limits @xcite , that means that the system alternates between quality - driven ( qd ) ul regimes and efficiency - driven ( ed ) ol regimes .",
    "we assume that the system is never critically loaded , that is , in the quality - and - efficiency - driven ( qed ) regime , except at the isolated regime switching points .",
    "that allows us to apply previous results for infinite - server queues in @xcite in our analysis of both ul and ol intervals .    explicitly avoiding the qed regime runs counter to most of the extensive research on many - server queues , for example , as in @xcite .",
    "however , we think the alternating ul and ol model can provide useful approximations because it provides mathematical simplification .",
    "this regime has engineering relevance with time - varying arrivals because many systems are unable to dynamically adjust staffing to respond adequately to time - varying arrival rates , and thus do experience periods of overloading .",
    "hospital emergency rooms are examples .",
    "the limits here extend previous limits for the markovian @xmath19 models with time - varying arrival rates and staffing in @xcite . to treat the model with general patience distribution",
    ", we exploit limits for two - parameter stochastic processes in infinite - server models in @xcite ; also see @xcite .",
    "heavy - traffic limits for the stationary @xmath20 model were established in @xcite , where references on previous work can be found .",
    "a previous discrete - time many - server limit for the @xmath21 model with time - varying arrivals was established in @xcite ; in contrast , here the limit is for a model with smooth parameters . in a sequel to this paper , @xcite",
    ", we establish a fwlln for the more general @xmath22 model .",
    "it remains to extend the fclt to nonexponential service times .",
    "in @xcite we saw that the analysis of the performance of the @xmath23 fluid model depends critically on a careful analysis of the waiting time of the fluid at the head of the line ( that has been waiting in queue the longest ) . that fluid head - of - the - line waiting time ( hwt ) @xmath24 was identified by carefully relating the new service capacity becoming available due to service completion and changing capacity to the flow into service from the queue .",
    "that led to an ordinary differential equation ( ode ) characterizing the deterministic hwt function @xmath24 , proved in theorem  3 of @xcite and reviewed here in ( [ wode ] ) . closely paralleling that ode",
    ", we find that the stochastic limit process for the fclt - scaled hwt , @xmath25 , is characterized by a stochastic differential equation ( sde ) ; see ( [ sde ] ) .",
    "we primarily focus on the number in system @xmath9 , as in ( [ xapprox ] ) , because that process and the associated fclt - scaled version [ see ( [ fcltscaled ] ) below ] tends to be better behaved than the number in queue , @xmath26 , and the number in service , @xmath27 , and the associated fclt - scaled versions of them .",
    "this is reflected by the limit processes for the fclt - scaled versions .",
    "for each @xmath10 in the interior of an ol interval , @xmath28 ; for each @xmath10 in the interior of an ul interval , @xmath29 ; for each switching point @xmath10 , @xmath30 , where @xmath31 and @xmath32 .",
    "thus , in contrast to @xmath33 , which has continuous sample paths , the sample paths of @xmath34 and @xmath35 are discontinuous and are typically neither right - continuous nor left - continuous at each switching point .",
    "thus , even though limits can be obtained for fclt - scaled versions of the number in queue , @xmath26 , and the number in service , @xmath27 , yielding approximations such as @xmath36 , paralleling ( [ xapprox ] ) , we instead suggest approximating these processes by truncating the number in system @xmath9 with respect to the time - varying service capacity @xmath37 ; that is , we propose the alternative approximations @xmath38\\\\[-8pt ] b_n ( t ) & = & x_n ( t ) \\wedge s_n ( t ) \\approx\\bigl(n \\bar{x } ( t ) + \\sqrt { n } \\hat{x}(t)\\bigr ) \\wedge s_n ( t),\\nonumber\\end{aligned}\\ ] ] exploiting ( [ xapprox ] ) .",
    "this approximation is convenient because formulas are known for the means and variances of such truncated gaussian variables .",
    "we study such refined engineering approximations based on the many - server heavy - traffic limits established here , including ( [ qbapprox ] ) , in a future paper @xcite .",
    "however , immediate insight can be obtained by considering the special case of the @xmath19 model with abandonment rate @xmath39 equal to the service rate @xmath40 . as discussed in section  6 of @xcite",
    ", the number in system in this model is distributed the same as in the associated @xmath41 model , for which the number in system at each time has a poisson distribution . in this case",
    ", the approximation by ( [ xapprox ] ) is known to perform very well . in that context , clearly the approximations in ( [ qbapprox ] ) perform well too , whereas even the direct approximation for the means , @xmath42 and @xmath43 do not perform well near critical loading .    here",
    "is how the rest of this paper is organized : in section  [ secseq ] we specify the sequence of @xmath0 queueing models we consider and the associated scaled stochastic processes for the fwlln and the fclt . in section  [ secfluid ]",
    "we review the @xmath0 fluid model , which arises as the limit in the fwlln and provides centering terms for the fclt . in section  [ secol ] we state the new results for each ol interval , while in section  [ secul ] we state the ( easier ) new results for each ul interval . in section  [ secolproofs ]",
    "we prove the fwlln and fclt for ol intervals ; in section  [ seccors ] we prove two corollaries for ol intervals ; finally , in section  [ seculproofs ] we prove the fwlln and fclt for ul intervals . in order to confirm that the formulas for the variances given in corollary [ corvar ] are correct , thus providing practical confirmation for all the results , we conduct simulation experiments of both large and small queueing systems in section  [ seccompare ] . we conclude in section  [ secrefined ] by discussing an extension with extra @xmath44 terms in the arrival rates and staffing functions .",
    "in this paper we consider a sequence of @xmath0 queueing models indexed by @xmath46 .",
    "model @xmath46 has a general arrival process with time - varying arrival rate @xmath47 , i.i.d .",
    "exponential service times with cumulative distribution function ( c.d.f . )",
    "@xmath48 , a time - varying number of servers @xmath49 [ the least integer above @xmath50 and customer abandonment from queue , where the patience times of successive customers to enter queue are i.i.d . with general c.d.f .",
    "@xmath6 , where we assume that @xmath6 is differentiable , with probability density function ( p.d.f . ) @xmath51 with @xmath52 and @xmath53 for all @xmath54 .",
    "our scaling of the fixed functions @xmath55 and @xmath56 induces the familiar many - server heavy - traffic scaling ; the functions @xmath55 and @xmath56 are the arrival rate and staffing level in the associated fluid model , assumed to be suitably smooth , as specified in the next section . the arrival process",
    ", service times and patience times are mutually independent .",
    "new arrivals enter service immediately if there is a free server ; otherwise they join the queue , from which they enter service in order of arrival , if they do not first abandon .",
    "let @xmath57 be the usual space of right - continuous real - valued functions with left limits on a subinterval @xmath58 of @xmath59 , endowed with the skorohod @xmath60 topology , which for continuous limits reduces to uniform convergence over all compact subintervals of @xmath58 .",
    "let @xmath61 denote convergence in distribution @xcite .",
    "let @xmath62 count the number of arrivals in @xmath63 $ ] .",
    "we assume that the sequence of arrival processes @xmath64 satisfies a fclt with time - transformed brownian limit ; that is , @xmath65 as @xmath66 , where @xmath67 is a standard brownian motion ( with the subscript @xmath55 indicating that it is associated with the arrival process ) , @xmath68 is the total arrival rate over the interval @xmath63 $ ] , that is , @xmath69 and @xmath70 is an arrival - process variability parameter .",
    "a principal case is @xmath71 being a nonhomogeneous poisson process for each @xmath46 , in which case @xmath72 in ( [ arrivefclt ] ) .",
    "other explicit arrival process models can be constructing from random or deterministic time - changes of stationary processes ( e.g. , renewal processes ) known to satisfy a fclt . for a rate-@xmath73 renewal process , @xmath74 , where @xmath75 is the mean and @xmath76 is the variance of an interrenewal time ; see section  7.3 of @xcite .",
    "we will specify smoothness assumptions for the model data @xmath77 in the next section .",
    "these assumptions allow the staffing function @xmath56 to decrease in ol intervals .",
    "thus , as discussed in section  1 of @xcite , it is important to consider what happens in the queueing system if the staffing must decrease when the service facility is full .",
    "here we simply assume that the required number of customers are forced out of the system whenever that happens , without having any future impact on the system , that is , without altering the queue content or generating subsequent retrials .",
    "since the service times are exponential , we need not pay attention to which customers are forced to leave . however , in the next section we assume that the staffing function is feasible for the fluid model ( which can be achieved since it is a deterministic system ) .",
    "we say a staffing function is feasible if no customer is forced out of service ( with unfinished business ) when the staffing function decreases . moreover , we make conditions ensuring that the staffing function is asymptotically feasible for the sequence of stochastic models . hence , any staffing function infeasibility is asymptotically negligible",
    ".    let @xmath78 [ @xmath79 denote the number of customers in service ( queue ) at time @xmath10 that have been so for time at most @xmath80 .",
    "let @xmath81 [ @xmath82 , the total number of customers in service ( queue ) .",
    "let @xmath83 , the total number of customers in the system .",
    "let @xmath84 be the head - of - line waiting time ( hwt ) , that is , the elapsed waiting time for the customer at the head of the line at time @xmath10 ( the customer who has been waiting the longest ) .",
    "let @xmath85 be the potential waiting time ( pwt ) at time @xmath10 , that is , the virtual waiting time at time  @xmath10 ( the waiting time if there were a new arrival at time @xmath10 ) assuming that customer never would abandon ( but without actually altering any arrival s abandonment behavior ) .",
    "let @xmath86 be the number of abandonments , and let @xmath87 be the number of departures ( service completions ) in the interval @xmath63 $ ] .",
    "we can exploit flow conservation to write @xmath88    let the associated fwlln - scaled or fluid - scaled processes be @xmath89 the waiting times @xmath84 and @xmath85 are not scaled in the fluid limit .",
    "let the associated fclt - scaled processes be @xmath90 where @xmath91 is the vector of fluid model performance functions , which will arise as the deterministic limit functions for the associated fwlln - scaled processes , already identified in @xcite .",
    "our objective is to ( i ) show that the fwlln - scaled processes in ( [ fluidscaled ] ) converge in distribution to the previously studied deterministic fluid model quantities , ( ii )  show that the associated fclt - scaled processes in ( [ fcltscaled ] ) converge in distribution to a nonstationary zero - mean gaussian process and ( iii ) characterize the dynamics of this gaussian process and identify its time - varying variance functions .",
    "the associated deterministic @xmath0 fluid model depends on the same model data as the @xmath0 queueing model except for the arrival process .",
    "the fluid model depends on the arrival process only through the arrival - rate function @xmath55 .",
    "thus the fluid model neither captures the full distribution of the arrival processes nor the brownian limit in ( [ arrivefclt ] ) .",
    "[ however , the limit in ( [ arrivefclt ] ) does affect the fclt . ] the remaining functions @xmath92 specify an associated @xmath0 fluid model as studied in @xcite .",
    "all components play an important role in its performance description , including the c.d.f . @xmath6 beyond its mean .    for the fluid model ,",
    "@xmath93 is the proportion of any quantity of fluid that completes service by time @xmath54 after it enters service , and @xmath94 is the proportion of any quantity of fluid that abandons by time @xmath54 after it enters the queue if it has not already entered service .",
    "we assume that the assumptions for the fluid model in @xcite are satisfied here .",
    "in @xcite we uniquely characterize all the fluid performance functions under the stated assumptions .",
    "we exploit that characterization here , so that explains how all these assumptions are used .",
    "we conjecture that the limits here can be extended by weakening the conditions , but we anticipate that will lead to more general , but less tractable , limits in the fwlln and fclt , such as measure - valued functions and stochastic processes , as in @xcite .    of special note",
    "is the smoothness assumption from @xcite : we assume that the functions @xmath95 , @xmath56 and @xmath6 introduced above are differentiable with derivatives @xmath55 , @xmath96 and @xmath51 that are in the space @xmath97 , the subspace of @xmath98 containing piecewise - continuous functions , having only finitely many discontinuities in each bounded interval . for the fclt in ol intervals , theorem [ thfclt ] , we also assume that @xmath55 is differentiable as well .",
    "in addition , we assume that @xmath99 , @xmath100 for all @xmath54 , @xmath101 and @xmath102 .    consistently with @xcite ,",
    "but contrary the terminology for fluid scaled processes in ( [ fluidscaled ] ) , we will denote the fluid performance measures without a bar ; thus @xmath103 [ @xmath104 denotes the fluid content in service ( queue ) at time @xmath10 that has been so for time at most @xmath80 .",
    "these quantities have densities , that is , @xmath105 since we have exponential service here , it suffices to focus on the total fluid content in service @xmath106 .",
    "let @xmath107 and @xmath108 .",
    "let @xmath109 be the head - of - line waiting time ( hwt ) , called the boundary waiting time in @xcite ; let @xmath110 be the potential waiting time ( pwt ) of new fluid input at time @xmath10 , both defined essentially the same as @xmath111 and @xmath85 in the queueing model .",
    "we assume that fluid model starts out underloaded with initial fluid content @xmath112 , where necessarily @xmath113 and @xmath114 . since the service - time c.d.f .",
    "@xmath3 is exponential , we make no assumption about the length of time that initial fluid has been in service .",
    "we assume that the fluid model has only finitely many switches between underloaded ( ul ) and overloaded ( ol ) intervals in any bounded time interval ; conditions for that property to hold are given in @xcite .    the ol and ul intervals",
    "are carefully defined in @xcite ( to which we refer for details ) . in this paper",
    ", we impose the stronger assumption that the fluid model is never critically loaded except at the finitely many switching points in any bounded time interval .",
    "in particular , if @xmath115 $ ] is a ul interval with switching times at its endpoints , so that @xmath116 for @xmath117 , then we require that @xmath118 for all @xmath10 , @xmath119 . on the other hand ,",
    "if @xmath115 $ ] is a ol interval with switching times at its endpoints , then we require that @xmath120 for all @xmath10 , @xmath119 .",
    "the ul intervals are relatively elementary because then the fluid model is equivalent to an associated infinite - capacity model .",
    "however , the ol intervals are more complicated .",
    "first , as in @xcite , it is important to assume that the fluid staffing functions @xmath56 is feasible , that is , that its decreasing never forced fluid out of service . in @xcite",
    "we also show how to construct the minimum feasible staffing function greater than or equal to any given staffing function .    here",
    "we assume that the flow rate of fluid into service is strictly positive throughout the ol interval @xmath115 $ ] ; that is , we assume that the rate fluid enters service due to new service capacity becoming available satisfies @xmath121 together with the fwlln , condition ( [ flowinto ] ) implies that the probability the staffing function @xmath37 is feasible for the stochastic model throughout the interval @xmath115 $ ] converges to @xmath73 as @xmath66 .",
    "we now review the fluid performance functions during an ol interval . from section  6 of @xcite , we know that with @xmath4 service the fluid density in an overloaded interval requires solving a fixed point equation , but with @xmath8 service the service content density during an ol interval is given explicitly by @xmath122 where @xmath123 , @xmath124 , the rate fluid enters service at time @xmath10 , and @xmath125 is the initial service content density , part of the initial data .    in @xcite the queue during an overloaded interval is analyzed by focusing on the fluid content density @xmath126 assuming no flow into service .",
    "paralleling ( [ fluiddensityb ] ) , assuming an initially empty queue , it can be written explicitly as @xmath127 for @xmath128 , which is all we consider . by corollary 2 of @xcite ,",
    "the queue content density itself is @xmath129 so that @xmath130 is simply @xmath131 truncated in the second variable at its right boundary , the hwt @xmath24 .    by theorem 3 of @xcite ,",
    "the fluid hwt @xmath132 is the unique solution to the ode @xmath133 where @xmath134 is the rate that fluid enters service .",
    "our assumptions imply that both the numerator and the denominator in the fraction in ( [ wode ] ) are strictly positive ; thus @xmath135 for all @xmath10 in the ol interval .",
    "the ode in ( [ wode ] ) is equivalent to the integral equation @xmath136    by theorem 5 of @xcite , the fluid pwt @xmath137 is as the unique solution of the equation @xmath138 which can be solved given the bwt @xmath132 .",
    "because of assumption ( [ flowinto ] ) , @xmath139 is a continuous function .",
    "indeed , both @xmath132 and @xmath139 are differentiable except at only finitely many points . from ( [ veq ] )",
    ", we see that the derivatives are related by @xmath140 which is bounded because of condition ( [ flowinto ] ) .",
    "since the service is exponential and the service facility is full in an ol interval , the total fluid departure ( service completion ) in @xmath63 $ ] is @xmath141 , where @xmath142 .",
    "finally during an ol interval , the fluid abandonment over @xmath63 $ ] is @xmath143 with @xmath144 , the hazard rate function associated with the c.d.f .",
    "@xmath6 , which is finite for all @xmath54 because @xmath51 is an element of @xmath98 and @xmath52 for all @xmath54 .",
    "recall that the system is said to be ol or ul if the associated fluid model is ol or ul , which depends on the model parameters .",
    "the definitions were given in section  [ secfluid ] .",
    "we establish the many - server heavy - traffic limits over successive ul and ol intervals , using the limit at the right endpoint of the previous interval to provide the limit for the initial conditions needed in the successive interval , for example , as in @xcite .",
    "as indicated in the last section , we assume that the fluid model is initially underloaded .",
    "thus there are ul intervals @xmath145 $ ] , @xmath146 , and ol intervals @xmath147 $ ] , @xmath146 , with some finite number of these covering some overall finite time interval of interest @xmath148 $ ] .",
    "we consider these intervals recursively , referring to each interval in question as @xmath149 $ ] .",
    "it should be shifted to the appropriate time .",
    "for the first ul interval , we assume that we have a limit for the initial conditions , in particular , @xmath150 where @xmath151 is deterministic with @xmath152 .",
    "for all subsequent intervals , ul and ol , the limit in ( [ initiallim ] ) will hold with @xmath153 as a consequence of the limit in the previous subinterval .",
    "we first consider the more challenging case of an overloaded interval @xmath154 $ ] , assuming limits for the initial values as in ( [ initiallim ] ) , with @xmath153 .",
    "we first state the fwlln .",
    "the proofs are given afterward in later sections .",
    "unlike @xcite , here we have assumed that the rate of the flow into service @xmath155 , so that the fluid pwt @xmath139 satisfying ( [ veq ] ) is continuous .",
    "let @xmath156 denote the @xmath157-fold product space of @xmath98 with the associated product topology .",
    "[ thfwlln ] consider an ol interval @xmath154 $ ] with no critical loading except at the endpoints .",
    "suppose that ( [ initiallim ] ) holds with @xmath153 .",
    "then @xmath158 in @xmath159)$ ] as @xmath66 , where the converging processes are defined in section  [ secseq ] , the limit @xmath160 is the vector of continuous deterministic fluid - model functions defined in section  [ secfluid ] and characterized in @xcite , having @xmath161 , @xmath162 and @xmath163 .",
    "we next state the associated fclt establishing the gaussian refinement to the fluid approximation in an ol interval . as indicated in the introduction",
    ", we primarily focus on the number in system , @xmath9 .",
    "we express the limit for @xmath9 with the general initial conditions in ( [ initiallim ] ) in terms of an associated limit for the special case in which all servers are busy , and the queue is empty . let @xmath164 be the number in system for the special initial condition in which all servers are busy and the queue is empty at time @xmath165 , that is , @xmath166 . let the other processes associated with this special initial condition be defined similarly .",
    "we now assume that the arrival rate function @xmath55 is differentiable in order to work with the partial derivative @xmath167 let @xmath168 denote a standard ( drift @xmath165 , diffusion coefficient @xmath73 ) brownian motion ( bm ) .",
    "[ recall that @xmath169 is already used to denote the fluid content in service .",
    "] let @xmath170 denote the identify function in @xmath98 , that is , @xmath171 .",
    "[ thfclt ] consider an ol interval @xmath154 $ ] with no critical loading except at the endpoints .",
    "assume that the arrival rate function @xmath172 is differentiable and the patience p.d.f .",
    "@xmath51 is continuous .",
    "suppose that ( [ initiallim ] ) holds with @xmath153",
    ". then @xmath173\\\\[-8pt ] & & \\qquad \\rightarrow\\bigl(\\hat{n}^ { * } , \\hat{d}^ { * } , \\hat{x}^ { * } , \\hat { x}^ { * } , 0e , \\hat{w}^ { * } , \\hat{v}^ { * } , \\hat{a}^{*},\\hat{x}\\bigr ) \\qquad\\mbox{in } { \\mathbb{d}}^9 \\bigl([0,\\tau]\\bigr),\\nonumber\\end{aligned}\\ ] ] where the superscript @xmath174 denotes the special initial condition with all servers busy and an empty queue , the converging processes are defined in section  [ secseq ] , and the limit process with the special initial condition , @xmath175 , is a mean - zero gaussian process having continuous sample paths .",
    "if @xmath176 is gaussian with mean @xmath165 , then @xmath33 is a mean - zero gaussian process too .",
    "the limit processes are @xmath177 and @xmath178 , while @xmath179 where @xmath144 is the patience hazard rate , @xmath24 is the fluid hwt , @xmath137 is the fluid pwt , @xmath180 , @xmath181 and @xmath182 are independent ( standard ) bms , @xmath183 and @xmath184\\\\[-8pt ] k_{1 } ( t , u ) & \\equiv & k_{\\lambda } ( t , u ) \\nonumber\\\\ & \\equiv & c_{\\lambda } f^c ( t - u ) \\sqrt{\\lambda(u ) } { \\mathbf1}_{\\{t- w(t ) \\le u \\le t\\ } } \\nonumber \\\\ & & { } + \\tilde{q}\\bigl(t , w(t)\\bigr ) \\sqrt{\\lambda(u ) } \\bar { i}_{1 } \\bigl(l^{-1}(u ) \\bigr ) h \\bigl ( t , l^{-1}(u ) \\bigr ) { \\mathbf 1}_{\\{0 \\le u \\le t- w(t)\\ } } , \\nonumber \\\\ \\label{kernels2 } i_{2 } ( u ) & \\equiv & i_{s } ( u ) \\equiv- \\frac { \\sqrt{b(u,0 ) - \\dot{s } ( u ) } } { \\tilde{q}(u , w(u ) ) } , \\nonumber \\\\ k_{2 } ( t , u ) & \\equiv & k_{s } ( t , u ) \\equiv\\tilde{q } \\bigl(t , w(t)\\bigr ) j_s ( t , u ) \\nonumber\\\\ & = & -\\sqrt{b(t,0 ) - \\dot{s}(t ) } h(t , u ) , \\nonumber \\\\",
    "i_{3 } ( u ) & \\equiv & i_{a } ( u ) \\equiv- \\frac { \\sqrt { f(w(u))b(u,0)}}{\\tilde{q}(u , w(u))},\\nonumber\\\\[-8pt]\\\\[-8pt ] \\bar{i}_{3 } ( u ) & \\equiv & - \\frac{\\sqrt{f^c ( w(u))f(w(u))}}{\\tilde{q}(u , w(u ) ) } , \\nonumber\\\\ \\qquad k_{3 } ( t , u ) & \\equiv & k_{a } ( t , u ) \\nonumber\\\\ & \\equiv&-\\sqrt { \\lambda(u ) f(t - u ) f^c ( t - u ) } { \\mathbf1}_{\\{t- w(t ) \\le u \\le t\\ } } \\nonumber \\\\ & & { } + \\tilde{q}\\bigl(t , w(t)\\bigr ) \\sqrt{\\lambda(u)}\\bar { i}_{3 } \\bigl(l^{-1}(u ) \\bigr)h \\bigl ( t , l^{-1}(u ) \\bigr ) { \\mathbf 1}_{\\{0 \\le u \\le",
    "t- w(t)\\ } } \\nonumber\\end{aligned}\\ ] ] and @xmath185 is the inverse of the function @xmath186 .",
    "the limit process @xmath187 is also characterized as the unique solution to the sde @xmath188 for @xmath168 a bm , @xmath189 in ( [ kernels ] ) and @xmath190\\\\[-9pt ] & = & \\frac{b(t,0 ) - \\dot{s } ( t ) + [ f(w(t ) ) + c^2_{\\lambda } f^c ( w(t ) ) ] b(t,0)}{\\tilde{q}^2(t , w(t))}.\\nonumber\\end{aligned}\\ ] ]    [ rmadd ] it is significant that the three sources of randomness appear additively ( independently ) in the limit process @xmath191 in  ( [ glims ] ) .",
    "the arrival process variability is captured by @xmath192 and the bm @xmath180 ; the service - time variability is captured by @xmath193 and the bm @xmath181 ; while the patience - time variability is captured by @xmath194 and the bm @xmath195 , where the three bms are mutually independent . moreover ,",
    "the four separate sources of randomness , including @xmath176 for the initial condition in ( [ initiallim ] ) , which is independent of @xmath196 , appear additively in the limit process @xmath33 .",
    "this nice separation of the components of the variability can be understood by considering the two - parameter process @xmath197 , which depicts the number of customers in the queue at time @xmath10 with elapsed patience time at most @xmath80 in model @xmath46 during an ol interval .",
    "the arrivals influence this process at @xmath198 , the lower limit of @xmath80 , because new arrivals have elapsed patience time @xmath165 . because of the fcfs service discipline",
    ", the flow into service occurs from the upper limit of @xmath80 , at @xmath199 ; the customers enter from the head of the queue ; that is , those who have waited the longest enter first .",
    "finally , the abandonment influences the process throughout the entire region and is thus not primarily determined by the behavior at the extreme endpoints . in particular , the abandonment rate for a customer with elapsed patience time @xmath54 is precisely the patience hazard rate @xmath200 , which operates at time @xmath10 for all @xmath54 satisfying @xmath201 and thus @xmath202 in the fluid limit .    except for the process @xmath203 , representing the scaled number in system , theorem [ thfclt ] states conclusions about the various processes for the special initial condition , with all servers busy but no queue . from theorem [ thfclt ] , we can deduce a corresponding fclt for the other processes with the general initial condition in ( [ initiallim ] ) , provided that we exclude the interval endpoints .",
    "recall that convergence to a continuous limit in @xmath204 is equivalent to uniform convergence over each compact subinterval @xmath205 $ ] with @xmath206 .",
    "[ thother ] under the assumptions of theorem [ thfclt ] , all the processes with the initial conditions in ( [ initiallim ] ) converge in the space @xmath207 ; in particular , @xmath208 where @xmath33 is given above in ( [ glims ] ) , @xmath209\\\\[-8pt ] \\hat{w } ( t ) & \\equiv & \\bigl(1 - \\dot{w}(t)\\bigr)\\hat{v } \\bigl(t - v(t)\\bigr ) = \\hat { w}^ { * } ( t ) + \\frac{\\hat{x } ( 0 ) f^c_w ( t)}{\\tilde{q } ( t , w(t ) ) } , \\nonumber \\\\",
    "\\hat{a } ( t ) & \\equiv & \\hat{n}^ { * } ( t ) - \\hat{d}^ { * } ( t ) - \\hat{x } ( t ) + \\hat{x } ( 0).\\nonumber\\end{aligned}\\ ] ] at the interval endpoints @xmath210 and @xmath211 , there is the limit in @xmath212 @xmath213 consequently , for @xmath10 an interval endpoint , if @xmath214 , then there is no fclt for @xmath215 and @xmath216 in @xmath217 ; if @xmath218 , then there is no fclt for @xmath219 in @xmath220 .",
    "[ rmdisc ] we get limits like ( [ gxlims0 ] ) above and ( [ bzerolim ] ) in theorem [ thul ] at all switching points . however , unlike the limit process @xmath221 for the scaled number in system , @xmath203 , which has continuous sample paths , the resulting limit processes for the other scaled processes @xmath222 , @xmath223 and @xmath224 , obtained by combining ( [ gxlims2 ] ) and ( [ gxlims0 ] ) , will typically have sample paths that are neither left continuous nor right continuous at the switching points .",
    "in particular , the failure to have convergence at the left endpoint @xmath165 in ( [ gxlims2 ] ) occurs because , under the stated condition , the limit process would need to have a discontinuity point at the left endpoint , which is not allowed in the space @xmath98 . if the switching point occurred at time @xmath225 within a larger interval , then convergence could be obtained in the open interval @xmath226 in the @xmath227 topology , after redefining the limits at the switching points , but not the @xmath60 topology ; see chapter  12 of @xcite . in any case",
    ", there are limits at the switching points , but the limit process obtained for each @xmath10 typically has discontinuities at all switching points .",
    "however , this difficulty does not occur for the scaled number in system @xmath228 ; it has a continuous limit process , as given in theorem [ thfclt ] .",
    "practical engineering approximations can be based on the resulting gaussian approximations , for which we need the time - dependent variances , to go with the time - varying means provided by the fluid limit .",
    "the key process is @xmath33 , so we are primarily interested in the variance @xmath229 , denoted by @xmath18 .",
    "let @xmath230 and @xmath231 , and similarly for the other processes .",
    "[ corvar ] consider an ol interval @xmath154 $ ] satisfying ( [ initiallim ] ) .",
    "the variances and covariances are @xmath232 where @xmath233 , @xmath234 , @xmath235 and @xmath58 are given in ( [ kernels ] ) and @xmath236 is given in ( [ glims ] ) .",
    "we now consider the easier case of the ul intervals . as before , we assume convergence of the initial values , as in ( [ initiallim ] ) .",
    "clearly , @xmath237 , so that necessarily @xmath238 . for the initial interval , we can have any nonnegative deterministic value for @xmath239 , provided that @xmath152 .",
    "for all subsequent ul intervals , the limit over the previous ol interval will force @xmath240 .",
    "as before , we focus on @xmath241 instead of @xmath242 , because after the initial interval we can have @xmath243 , whereas we necessarily have @xmath244 .",
    "the important observation here is that , under our assumption that there is no critically loading in the fluid model except at the switching points , in each ul interval the processes @xmath245 and @xmath246 are asymptotically equivalent to the associated processes @xmath247 and @xmath248 in the associated @xmath249 infinite - server model with the same arrival process , service times and initial conditions , @xmath250 .",
    "thus we can apply many - server heavy - traffic ( msht ) limits established for that model in @xcite ; also see .",
    "( previous references suffice here ; the full force of @xcite is only needed to treat the more general @xmath251 model associated with ol intervals . )    for the infinite - server model , we can separate the new arrivals from the customers initially in the system at time @xmath165 . since there are infinitely many servers , these customers do not interact when they enter service",
    ". moreover , by the brownian limit in fclt in ( [ arrivefclt ] ) , the arrivals after any time @xmath10 are asymptotically independent of the arrivals before that time @xmath10 . to treat the new arrivals",
    ", we can assume that the system starts empty .",
    "we use a subscript @xmath170 to denote quantities associated with the system starting _ empty _ , and we use the subscript @xmath252 to denote quantities associated with the initial content at time _ zero_. let @xmath253 denote the uniform norm over the interval @xmath254 $ ] , with @xmath255 also denoting the case in which @xmath256 .",
    "[ thul ] consider a ul interval @xmath154 $ ] under condition ( [ initiallim ] ) , allowing no critical loading except at the interval endpoints .",
    "then @xmath257\\bigr)\\ ] ] as @xmath66 , where @xmath258 and @xmath259 and @xmath260 are independent stochastic processes , with @xmath259 being a mean - zero gaussian diffusion process satisfying the ( sde ) @xmath261\\\\[-8pt ] & { \\stackrel{\\mathrm{d}}{= } } & - \\mu\\hat{x}_{e } ( t ) \\,dt + \\sqrt{c^2_{\\lambda } \\lambda ( t ) + \\mu x_e ( t ) } \\,d { { { \\mathcal}b}}(t),\\nonumber\\end{aligned}\\ ] ] where @xmath262 , @xmath263 and @xmath168 are independent standard bms and @xmath264 . the limit process associated with the initial conditions is @xmath265 where @xmath266 is a standard brownian bridge independent of @xmath267 and the bms in ( [ sdeul ] ) .",
    "equivalently , the limit process @xmath33 satisfies the single sde @xmath268\\\\[-8pt ] & { \\stackrel{\\mathrm{d}}{= } } & - \\mu\\hat{x } ( t ) \\,dt + \\sqrt{c^2_{\\lambda }",
    "\\lambda(t ) + \\mu x ( t)}\\,d { { { \\mathcal}b}}(t),\\nonumber\\end{aligned}\\ ] ] where @xmath176 is given in ( [ initiallim ] ) .    if @xmath269 is a mean - zero gaussian random variable , then @xmath270 and @xmath33 are mean - zero gaussian processes with @xmath271 , @xmath272\\\\[-8pt ] & = & \\bigl(c^2_{\\lambda } - 1\\bigr ) \\int_{0}^{t } \\bigl(g^c ( t -s ) \\bigr)^2 \\lambda(s ) \\,ds + \\int_{0}^{t } g^c ( t -s ) \\lambda(s ) \\,ds\\nonumber\\end{aligned}\\ ] ] and @xmath273 in addition , @xmath274 , so that @xmath275\\bigr ) \\mbox { as } n { \\rightarrow}\\infty,\\ ] ] while , restricted to the open interval @xmath276 , @xmath277 at the interval endpoints @xmath210 and @xmath211 , @xmath278 consequently , the limit process @xmath16 for the scaled number in system @xmath203 has continuous sample paths , whereas the limit processes for the scaled number in queue and in service , @xmath279 and @xmath223 , typically have sample paths that are neither left continuous nor right continuous at the switching points .",
    "thus , if @xmath153 and @xmath280 , then there is no fclt for @xmath215 in @xmath220 ; if @xmath281 and @xmath282 , then there is no fclt for @xmath219 in @xmath220 .    the remainder of this paper is concerned with proving all the stated results .",
    "the proof of theorems [ thfwlln ] and [ thfclt ] is rather long , so we start by giving a brief overview . as in theorem",
    "[ thfclt ] , we focus on the number in system , @xmath283 . to do so , it is convenient to first consider the number in system during the ol interval starting with all servers busy and an empty queue .",
    "hence , we will initially consider the ol interval under this special initial condition .",
    "we will then establish the limit for @xmath9 with general initial conditions in section  [ secinitialpf ] .",
    "we do not use the notation with the superscript @xmath174 until section  [ secinitialpf ] .    in section  [ secspecialinitial ]",
    "we show that any idleness right after time @xmath165 is asymptotically negligible , implying that the departure process is asymptotically equivalent to a nonhomogeneous poisson process with the rate @xmath284 . in section  [ secqueuenopf ]",
    "we state preliminary results for the queue - length process ignoring all flow into service ; these results follow directly from the infinite - server results in @xcite . in section  [ secqreppf ]",
    "we establish important representations for the queue - length process during the ol intervals , allowing flow into service . in section  [ secqlimpf ]",
    "we show that many - server heavy - traffic limits for the queue - length process follow from corresponding limits for the hol waiting times . in section  [ secwreppf ]",
    "we establish an important representation for the hol waiting times . in sections  [ secwfwlln ] and [ fcltpf ] ,",
    "respectively , we exploit the results above to prove the fwlln and the fclt , still under the special initial condition .",
    "finally , in section  [ secinitialpf ] we prove that corresponding limits hold for the general initial condition in ( [ initiallim ] ) .",
    "we start by considering the special initial condition with all servers busy and an empty queue .",
    "since we are in an ol interval with @xmath285 for all @xmath10 , @xmath286 , with the initial net input rate to service @xmath287 and the abandonment hazard rate bounded above , even though some servers could become idle shortly after time @xmath165 , all servers become busy and remain busy throughout an interval @xmath288 $ ] for @xmath289 .",
    "thus there are at most @xmath290 empty servers for a period of only @xmath291 .",
    "thus , the total service completion process differs from the nonhomogeneous poisson process with rate @xmath292 by only @xmath293 as @xmath66 .",
    "similar reasoning also applies at the right endpoint  @xmath225 .",
    "hence , we can conclude that the departure ( service completion ) process satisfies a joint fwlln with the arrival process of the form @xmath294\\bigr)\\ ] ] and a corresponding joint fclt , @xmath295\\bigr ) \\nonumber\\\\[-8pt]\\\\[-8pt ] & & \\eqntext{\\mbox{where } \\hat{n } ( t ) \\equiv c_{\\lambda } { { { \\mathcal}b}}_{\\lambda } \\bigl(\\lambda(t)\\bigr ) \\mbox { and } \\hat{d } ( t ) \\equiv{{{\\mathcal}b}}_s \\bigl(d(t)\\bigr ) , t \\ge0,}\\end{aligned}\\ ] ] with @xmath262 and @xmath263 being two independent bms .    as a consequence of the results above ,",
    "we determine ( relatively trivial ) limits for the number in service , in particular , @xmath296\\bigr ) \\mbox { as } n { \\rightarrow}\\infty.\\ ] ] as a consequence , we deduce for the number in queue that @xmath297 hence , to establish limits for @xmath298 and @xmath246 in @xmath299)$ ] , it suffices to focus on @xmath300 and @xmath215 , which is what we do in the following subsections .      to study the fluid model in overloaded intervals , in @xcite we introduced the fluid function @xmath126 , which is the fluid content density in queue , disregarding the flow into service , that is , under the condition that the flow into service is turned off .",
    "it is convenient to do the same in order to develop stochastic refinements .",
    "let @xmath301 be the two - parameter stochastic process giving the number in queue in model @xmath46 at time @xmath10 that have been so for at most time @xmath80 , under the condition that the flow into service is turned off .",
    "until section  [ secinitialpf ] , we have the special initial conditions with all servers busy and an empty queue .",
    "when we turn off all flow into service , the number in service in the @xmath0 queueing model with our special initial condition is asymptotically equivalent to the number in the associated @xmath251 queueing model , starting empty , where the abandonment c.d.f .",
    "@xmath6 plays the usual role of the service - time c.d.f . in the infinite - server model .",
    "hence , we consider the stochastic process @xmath301 in the queueing model , disregarding flow into service .",
    "thus , we can apply the fclt for the @xmath251 queueing model established by @xcite .",
    "we exploit the representation of @xmath301 from @xcite .",
    "let @xmath302 be the indicator function of the set @xmath303 , that is , @xmath304",
    "if @xmath305 and @xmath165 otherwise . first , we can write @xmath306 where @xmath307 is the @xmath308th arrival time , @xmath309 is the @xmath308th patience time ( the patience time of the arrival at @xmath307 ) and @xmath62 is the arrival counting process in model @xmath46 .",
    "the representation in ( [ tilderep1 ] ) is valid because the first @xmath310 arrivals will have come before time @xmath10 .",
    "( the limit process will have continuous sample paths , so that the consequence of an arrival exactly at time @xmath10 is asymptotically negligible . )",
    "hence , the sum in ( [ tilderep1 ] ) counts all arrivals in the interval @xmath311 $ ] who will not have abandoned by time @xmath10 .",
    "following @xcite , the next step in @xcite is to obtain an alternative representation exploiting the sequential empirical process associated with the successive patience times , @xmath312 in particular , representation ( [ tilderep1 ] ) is equivalent to the alternative representation @xmath313 for @xmath314 and @xmath315 .",
    "representation ( [ tilderep2 ] ) allows us to exploit the limits @xmath316 and @xmath317 in @xmath318 , { { \\mathbb r}}))$ ] , where the limit @xmath319 is a deterministic transformation of the standard kiefer process @xmath320 .    from lemma 2.1 of @xcite",
    ", we obtain the alternative representation @xmath321\\\\[-8pt ] \\tilde{q}_{n,2 } ( t , y ) & \\equiv & \\sqrt{n } \\int_{t -y}^{t } \\int_{0}^{\\infty } { \\mathbf1 } ( x + s > t ) \\,d \\hat{r}_n ( s , x ) , \\nonumber \\\\",
    "\\tilde{q}_{n,3 } ( t , y ) & \\equiv & n \\int_{t - y}^{t } f^c ( t - s ) \\lambda",
    "( s ) \\,ds,\\nonumber\\end{aligned}\\ ] ] where , just as in ( 2.16 ) of @xcite , @xmath322 with @xmath323 being the sequential empirical process in ( [ kn ] ) .",
    "thus , from @xcite and ( [ twofclt ] ) , it follows that @xmath324\\\\[-8pt ] & & \\qquad \\rightarrow\\bigl(\\hat{z}_1 ( t , y ) , \\hat{z}_1 ( t , y ) \\bigr ) \\qquad\\mbox{in } { \\mathbb{d}}^2\\bigl([0,\\tau ] , { \\mathbb{d}}\\bigl([0,\\infty ) , { { \\mathbb r}}\\bigr)\\bigr),\\nonumber\\end{aligned}\\ ] ] jointly with the limit in ( [ twofclt ] ) , where @xmath325\\\\[-8pt ] \\hat{z}_2 ( t , y ) & \\equiv & \\int_{t -y}^{t } \\int_{0}^{t } { \\mathbf1 } ( x + s > t ) \\,d { { { \\mathcal}r}}(s , x)\\nonumber \\ ] ] with @xmath262 being a bm and @xmath326 where @xmath327 and @xmath328 is the standard kiefer process , with @xmath329 independent of @xmath262 . as a consequence , by the continuous mapping theorem with addition , @xmath330 , { \\mathbb{d}}\\bigl([0,\\infty ) , { { \\mathbb r}}\\bigr)\\bigr)\\ ] ] for @xmath331 in ( [ tildelimits ] ) .    from ( [ tildelimits ] ) and ( [ r ] )",
    ", we see that the limit process @xmath332 in ( [ tildelim ] ) depends on the randomness in the arrival process through the bm @xmath262 , while the limit process @xmath333 in ( [ tildelim ] ) depends on the randomness in the patience times through @xmath334 , and thus the kiefer process @xmath335 , associated with the abandonment times . since flow into service has not yet been considered , the bm @xmath263 does not appear yet .",
    "we will exploit this established convergence in ( [ tildelim ] ) in order to establish our desired fwlln and fclt .",
    "we now obtain a representation of the queue - length process @xmath26 in this overloaded interval , where now we are allowing the usual flow into service .",
    "we do so by modifying the representation for @xmath301 constructed above .",
    "in particular , paralleling ( [ tilderep1 ] ) , for @xmath336 , we obtain the representation @xmath337 we could also obtain a corresponding representation for the two - parameter process @xmath197 , as in ( [ tilderep1 ] ) , but here we focus on the one - parameter processes . the fcfs service discipline is crucial for obtaining representation ( [ repq ] ) ; it ensures that customers enter service from the head of the line . representation ( [ repq ] )",
    "does not tell the whole story , however , because the hol waiting time @xmath111 remains to be determined .",
    "moreover , among the first @xmath338 arrivals , ( [ repq ] ) does not show which entered service and which abandoned .    nevertheless , paralleling ( [ tildedecomp ] ) above",
    ", we obtain the alternative representation @xmath339\\\\[-8pt ] q_{n,2 } ( t ) & \\equiv & \\sqrt{n } \\int_{t -w_n ( t)}^{t } \\int_{0}^{\\infty } { \\mathbf1 } ( x + s > t ) \\,d \\hat{r}_n ( s , x ) , \\nonumber \\\\ q_{n,3 } ( t ) & \\equiv & n \\int_{t - w_n ( t)}^{t } f^c ( t - s ) \\lambda(s ) \\,ds,\\qquad t > 0,\\nonumber\\end{aligned}\\ ] ] where @xmath340 is given in ( [ rn ] ) .",
    "given limits @xmath341 and @xmath342 in @xmath343)$ ] for @xmath344 in ( [ fcltscaled ] ) , where @xmath132 is the differentiable fluid hwt satisfying the ode in ( [ wode ] ) and @xmath345 has continuous sample paths , which we will establish below , we can obtain limits for @xmath300 and @xmath215 in @xmath343)$ ] directly from the representation in ( [ qdecomp ] ) and the limits in ( [ tildelim ] ) by applying the continuous mapping theorem .",
    "in particular , @xmath346\\\\[-8pt ] \\bar{q}_{n,3 } ( t ) & \\equiv & n^{-1 } q_{n,3 } ( t ) \\quad\\rightarrow\\quad q_3 ( t ) \\equiv\\int_{t - w(t)}^{t } \\lambda(s ) f^c(t - s ) \\,d s\\nonumber\\end{aligned}\\ ] ] in @xmath343)$ ] and @xmath347\\\\[-8pt ] & & \\hphantom{\\quad\\rightarrow\\quad\\hat { q}_2 ( t ) } { \\stackrel{\\mathrm{d}}{=}}-\\int_{t - w(t)}^{t } \\sqrt{f(t - s ) f^c ( t - s ) } \\,d \\tilde { { { { \\mathcal}b}}}_a \\bigl(\\lambda(s)\\bigr ) \\nonumber\\\\ & & \\hphantom{\\quad\\rightarrow\\quad\\hat { q}_2 ( t ) } { \\stackrel{\\mathrm{d}}{=}}-\\int_{t - w(t)}^{t } \\sqrt{f(t - s ) f^c ( t - s ) \\lambda(s ) } \\,d { { { \\mathcal}b}}_a ( s ) , \\nonumber \\\\ \\label{qlim } \\qquad&&\\hat{q}_{n,3 } ( t ) \\equiv n^{-1/2 } \\bigl(q_{n,3 } ( t ) - n q(t)\\bigr ) \\quad \\rightarrow \\quad\\hat{q}_3 ( t ) \\equiv q\\bigl(t , w(t)\\bigr ) \\hat{w } ( t ) , \\nonumber \\\\ & & \\hat{q}_{n } ( t ) \\equiv \\hat{q}_{n , 1 } ( t ) + \\hat{q}_{n , 2 } ( t ) + \\hat{q}_{n , 3 } ( t ) \\\\ & & \\quad \\rightarrow \\quad\\hat{q } ( t)\\equiv\\hat{q}_1 ( t ) + \\hat{q}_2 ( t ) + \\hat{q}_3 ( t ) \\qquad\\mbox{in } { \\mathbb{d}}((0 , \\tau ) ) , \\nonumber\\end{aligned}\\ ] ] where the three limit processes in the last line are independent . this is not entirely obvious because @xmath348 involves @xmath349 , which in turn involves the two bms @xmath262 and @xmath350 appearing in @xmath351 and @xmath352 . however",
    ", a close observation reveals that @xmath353 and @xmath354 involve the two bms @xmath355 and @xmath356 from time @xmath357 to time @xmath68 , according to the representations in ( [ q1 ] ) and ( [ q2 ] ) ; on the other hand , we will see from ( [ wb ] ) of section  [ secwcharpf ] that @xmath349 involves @xmath355 and @xmath356 from time @xmath358 to time @xmath359 , which thus concludes the independence .",
    "after we establish the limit for @xmath349 , we can appropriately group the terms and separate these three independent bms . the representation in theorem [ thfclt ]",
    "will thus follow .",
    "we now justify the convergence just stated above .",
    "we start with the fwlln .",
    "the separate fwllns for @xmath71 , @xmath360 and @xmath361 obtained from ( [ twofwlln ] ) , ( [ tildelim ] ) and by assumption to deterministic limits imply the joint fwlln . since we divide by @xmath46 , the terms @xmath362 and @xmath363 obtained from ( [ qlim ] ) and @xmath364 become asymptotically negligible . using the assumed fwlln for @xmath84",
    ", we can apply the continuous mapping theorem with the composition map , specifically theorem 2.4 of @xcite , which extends continuity properties for composition maps to the two - parameter setting , to the second ( @xmath80 ) coordinate of @xmath365 to obtain @xmath366 in theorem  [ thfwlln ] , which implies that @xmath367 .",
    "we now turn to the fclt refinement . given the fclt jointly for @xmath71 , @xmath360 and @xmath361",
    "obtained from ( [ twofclt ] ) , ( [ tildelim ] ) , again we can apply the continuous mapping theorem with the composition map in theorem 2.4 of @xcite , applied to the second ( @xmath80 ) coordinate of @xmath368 in ( [ tildelim ] ) to obtain the desired conclusions for @xmath369 , for @xmath117 .",
    "note that we only need the fwlln for @xmath84 for this step ; we do not need the more involved theorem 2.5 of @xcite . from this step ,",
    "we obtain the convergence of the vector processes , that is , @xmath370    next , we treat @xmath371 in ( [ qlim ] ) by noting that @xmath372\\\\[-8pt ] & = & \\sqrt{n } \\biggl(\\int_{t - w_n ( t)}^{t - w ( t ) } f^c ( t - s ) \\lambda ( s ) \\,ds \\biggr),\\nonumber\\end{aligned}\\ ] ] so that we can exploit the continuity of the integrand @xmath373 to deduce that @xmath374 so that @xmath375 in @xmath299)$ ] jointly with the limit in ( [ veclim ] ) for @xmath376 if @xmath342 in @xmath343)$ ] .",
    "given that joint convergence , we can apply the continuous mapping theorem with addition to obtain the limit @xmath377 jointly with the other processes , as stated in the final line of ( [ qlim ] ) .",
    "it thus remains only to treat the waiting times .",
    "paralleling the proof of theorem 3 of @xcite , we treat the hwt process @xmath84 by equating two different expressions for the number of customers to enter service in an interval @xmath378 $ ] , where @xmath379 is a small positive number .",
    "let @xmath380 be the number of customers to enter service in the interval @xmath63 $ ] .",
    "on the one hand , since the fluid model is overloaded with @xmath285 for all @xmath10 , @xmath286 , the number of customers to enter service is asymptotically equivalent to the new capacity made available by departures and changes in the staffing ; that is , as @xmath66 , @xmath381 let @xmath382 and @xmath383 be the associated fwlln and fclt scaled processes , where @xmath384 .",
    "it follows from ( [ enter1 ] ) and the fclt for @xmath385 in ( [ twofclt ] ) that @xmath386 where @xmath387 as in ( [ twofclt ] ) .    on the other hand ,",
    "the flow into service most come from customers leaving the queue . because the service discipline is fcfs , that flow must come from the customers who have been in service the longest .",
    "we can again use representation ( [ repq ] ) to represent the flow into service over an interval .",
    "let @xmath388 and similarly for the other processes . as in the proof of theorem 3 of @xcite ,",
    "if we make the interval short enough , then the abandonments will be asymptotically negligible .",
    "thus , paralleling equation ( 28 ) in @xcite for the fluid model , from ( [ repq ] ) we obtain @xmath389\\\\[-8pt ] & & \\eqntext{\\mbox{where } \\displaystyle i_n ( t , \\varepsilon ) \\equiv \\sum_{i = n_n ( ( t - w_n ( t))- ) + 1}^{n_n(t+ \\varepsilon- w_n ( t+\\varepsilon ) ) } { \\mathbf1}\\bigl(\\tau^n_i + \\eta_i > t\\bigr);}\\end{aligned}\\ ] ] that is , @xmath390 is the number of customers removed from the right boundary of the queue in the time interval @xmath378 $ ] , and @xmath391 is the number of those @xmath390 customers that actually abandon . note that @xmath392 because the waiting time of each customer that remains in queue increases at rate @xmath73 .",
    "hence the upper limit of summation in ( [ in1 ] ) always is greater than or equal to the lower limit of summation there .",
    "we now want to show that @xmath393 is appropriately asymptotically negligible relative to @xmath394 . for that purpose , observe that @xmath395 that is , @xmath396 is the number of customers in the system at time @xmath10 , but not at time @xmath397 , who would abandon before time @xmath397 if they do not enter service first in the interval @xmath398 $ ] .",
    "the remaining @xmath399 customers necessarily enter service in the interval @xmath400 $ ] because they would not abandon before time @xmath397 .",
    "we now show that the bound @xmath396 in ( [ inaban ] ) is asymptotically negligible relative to @xmath394 as @xmath401 , uniformly in @xmath46 and @xmath10 , so that we can ignore @xmath393 by choosing @xmath379 suitably small .",
    "we prove that by bounding @xmath396 above .",
    "first , we observe that @xmath402 for the arrival times @xmath307 under consideration .",
    "thus @xmath403 where @xmath404\\\\[-8pt ] & & \\qquad \\le\\sup_{0 \\le t \\le\\tau}{\\bigl\\{f^c ( t ) - f^c ( t + { \\varepsilon})\\bigr\\ } } \\le\\|f\\|_{\\tau } { \\varepsilon}+ o({\\varepsilon } ) \\qquad\\mbox{as } { \\varepsilon}\\downarrow0,\\nonumber\\end{aligned}\\ ] ] where @xmath405 because the c.d.f .",
    "@xmath6 has the density @xmath51 , which has been assumed to be in @xmath406 . to summarize , @xmath407 for some constant @xmath408 ( depending on the c.d.f .",
    "@xmath6 and @xmath225 ) for all @xmath379 suitably small , uniformly in @xmath46 and @xmath10 .",
    "we can characterize the asymptotic behavior of the hwt process @xmath409 by equating the two expressions for @xmath410 from ( [ enter1 ] ) and ( [ in1 ] ) .",
    "here we act as if the system is always overloaded , and thus use the infinite - server model representation ; as in ( [ enter1 ] ) , the error in this step is asymptotically negligible .",
    "now , reasoning as in ( [ tilderep1])([tildedecomp ] ) , we obtain an alternative representation for @xmath390 in ( [ in1 ] ) . in particular , @xmath411 where @xmath412 again is the sequential empirical process in ( [ kn ] ) , and then @xmath413 where @xmath414 where @xmath340 is from ( [ rn ] ) .",
    "we now prove the fwlln , still under our special initial conditions imposed in section  [ secspecialinitial ] .",
    "we have @xmath415 in @xmath416)^2 \\times d([0,\\tau ] , d([0 , 1 ] , { { \\mathbb r}}))$ ] for @xmath417 and @xmath418 in ( [ fluidscaled ] ) and @xmath419 in ( [ tilderep1])([tildelim ] ) , where @xmath420 are the components of the fluid model in section  [ secfluid ] , based on the fclts in ( [ arrivefclt ] ) , ( [ twofclt ] ) and ( [ tildelim ] ) . as shown above , we also obtain the fwlln for @xmath300 once we obtain the fwlln for @xmath361 .",
    "we now prove the fwlln for @xmath361 ; that is , @xmath341 .",
    "we prove the fwlln for @xmath361 by applying the compactness approach , as in section  11.6 of @xcite .",
    "in particular , we show that the sequence @xmath421 is @xmath422-tight in @xmath299)$ ] and then characterize the limit of every converging subsequence .",
    "the @xmath422-tightness means that it satisfies the criteria for tightness in the subspace @xmath422 , as in theorem 11.6.3 of @xcite .",
    "the @xmath422-tightness implies that every subsequence has a further converging subsequence with all limits having continuous sample paths w.p.1 .",
    "we demonstrate full convergence by showing that all the convergent subsequences have the same limit .",
    "first , the sequence @xmath421 is bounded , because @xmath423 and @xmath84 increases at most at rate @xmath73 .",
    "the ol interval under question falls within a larger finite interval @xmath424 $ ] .",
    "since the system has been assumed to start empty in the initial ul interval , a crude bound is @xmath425 . within the current ol interval",
    ", we also can show that @xmath426 , so that @xmath427 .",
    "next , the modulus of continuity is bounded above because @xmath428 .",
    "it remains to bound @xmath429 below uniformly in @xmath10 .",
    "for that purpose , we work with the representation for @xmath361 in section  [ secwreppf ] .",
    "let @xmath430 for @xmath431 in ( [ idecomp ] ) .",
    "we first observe that @xmath432 and @xmath433 in @xmath299)$ ] , so that @xmath434 .",
    "however , by ( [ elim ] ) , we already know that @xmath435 for @xmath384 .",
    "hence , we have @xmath436 in @xmath299)$ ] for @xmath437 in ( [ idecomp ] ) and @xmath438 in ( [ in1 ] ) .",
    "however , by ( [ jbd3 ] ) , we can henceforth ignore @xmath439 .    by the assumptions for @xmath55 and @xmath6 in section  [ secfluid ] , the integrand of @xmath440 in ( [ idecomp ] )",
    "is bounded below by @xmath441 .",
    "hence , we have the inequality @xmath442 so that we can write @xmath443 and then combine the relations above to obtain @xmath444 for some constant @xmath422 . hence , the sequence @xmath445 is @xmath422-tight .",
    "in addition , the limit of any subsequence must be lipschitz continuous . along the way",
    ", we have also shown that the sequences @xmath446 , @xmath447 and @xmath448 are tight as well .",
    "since tightness implies that every subsequence has a convergent subsequence , we complete the proof of the fwlln for @xmath84 by showing that every convergent subsequence of @xmath421 converges to @xmath132 in @xmath98 .",
    "it suffices to show that any limit of a convergent subsequence must satisfy the ode in ( [ wode ] ) w.p.1 or , equivalently , the integral representation in ( [ winteq ] ) , because @xmath132 has been characterized as the unique solution to those equations .",
    "first , by ( [ enter1 ] ) and ( [ elim ] ) , we know that @xmath449 in @xmath98 as @xmath66 . moreover , as @xmath450 , the limit in ( [ fwllndview ] ) approaches @xmath451 .",
    "we also consider the flow out of the queue in ( [ in1 ] ) .",
    "recall that @xmath452 is asymptotically equivalent to @xmath453 in ( [ idecomp ] ) . by the assumed convergence of @xmath454 and the continuous mapping theorem applied to @xmath455 , we have @xmath456\\bigr);\\ ] ]",
    "that is , the limit @xmath457 is determined once we know the limit @xmath458 . from ( [ fwllndview ] ) and ( [ inlim ] )",
    ", we also have @xmath459 thus both limits @xmath457 and @xmath460 are determined given the limit @xmath458 .    in summary",
    ", we have the limits related by @xmath461\\\\[-8pt ] & = & \\int_{t - w(t)}^{t + \\varepsilon- w(t+\\varepsilon ) } f^c(t - s)\\lambda ( s ) \\,ds + a^i ( t , \\varepsilon).\\nonumber\\end{aligned}\\ ] ] again we can apply ( [ jbd3 ] ) to deduce that @xmath460 is negligible relative to @xmath462 for all suitably small @xmath379 , so that we can disregard @xmath460 in ( [ fluidlimw ] ) .",
    "hence , combining ( [ fwllndview ] ) , ( [ fluidlimw ] ) and ( [ jbd3 ] ) , we obtain @xmath463 as @xmath464 for almost all @xmath10 and almost all sample paths of the limiting stochastic process @xmath458 . in other words , the proof of theorem 3 of @xcite can be applied to @xmath458 to show that @xmath458 satisfies the ode ( [ wode ] ) w.p.1 , that is , that theorem 3 of @xcite holds for @xmath458 w.p.1 .",
    "since there exists a unique solution to that ode , we must have @xmath465 .",
    "since this same conclusion holds for all limits of convergent subsequences , we conclude that indeed @xmath341 , as claimed . along the way , since we must have @xmath466 , we determine the fluid limits @xmath457 and @xmath460 as well ; they are the limits above with @xmath467 replaced by @xmath24 .",
    "we thus have two representations for @xmath468 , @xmath469      by the definitions of the hwt and pwt , we necessarily have the pwt @xmath470 satisfying the equation @xmath471\\\\[-8pt ] v_n ( t ) & = & w_n \\bigl(t + v_n ( t)+ o(1/n)\\bigr)+ o(1/n),\\nonumber\\end{aligned}\\ ] ] given @xmath84 . note that these equations relating the pwt and hwt for the stochastic queueing systems are slightly different from those for the deterministic fluid models as in ( [ veq ] ) . the first equation in ( [ vrep ] )",
    "holds since the pwt at @xmath472 equals the hwt at @xmath10 plus the remaining time until the first busy server becomes available , which is @xmath473 since there are @xmath474 servers .",
    "the second equation in ( [ vrep ] ) holds simply by applying a change of variable in the first equation .",
    "we already have established the fwlln for @xmath84 , yielding @xmath475 , where @xmath132 is a continuous function .",
    "moreover , @xmath132 has left and right derivatives everywhere , which are bounded .",
    "we now exploit theorems 36 of @xcite establishing key properties of the hwt and pwt fluid functions @xmath132 and @xmath139 .",
    "the additional property ( [ flowinto ] ) here implies that there exists a constant @xmath476 such that @xmath477 , @xmath478 . by theorems 5 and 6 of @xcite",
    ", @xmath139 is continuous , where @xmath139 is the unique solution to the corresponding fluid equations , for example , as in ( [ veq ] ) .",
    "hence , from the construction of @xmath139 in the proof of theorem 5 of @xcite and ( [ vderiv ] ) , we deduce , first , for the given fluid functions @xmath479 and any other @xmath480 that @xmath481 .",
    "hence , we deduce that @xmath482 since , @xmath483 , also @xmath484 .",
    "hence , the proof of the fwlln is complete .",
    "we now turn to the proof of the fclt , still under our special initial conditions imposed in section  [ secspecialinitial ] . from section  [ secqlimpf ] , we know that , for the queue length @xmath485 and the number in system @xmath9 , it suffices to prove convergence of the scaled waiting times @xmath344 .",
    "just as for the fwlln , we do this in two steps .",
    "we first prove tightness and then we characterize the limit of all convergent subsequences .",
    "we start by proving @xmath422-tightness of the sequence @xmath486 .",
    "we do a proof by contradiction .",
    "first , suppose that @xmath487 is not stochastically bounded ; that is , for all real numbers @xmath488 no matter how large and for all @xmath489 no matter how small , there exists @xmath46 such that @xmath490 . however , from sections  [ secwreppf ] and [ secwsublln ] , including ( [ elimrep ] ) , we know that @xmath491 , where @xmath492 hence , there exists @xmath46 for all @xmath488 , no matter how large and for all @xmath489 no matter how small , such that @xmath493 where @xmath494 is the strictly positive infimum of the integrand in ( [ ewbd ] ) ( because @xmath495 , @xmath496 and @xmath132 is uniformly continuous on the interval @xmath149 $ ] ) .",
    "however , this would contradict the established convergence @xmath497 in ( [ elim ] ) and ( [ elimit ] ) .",
    "hence the sequence @xmath487 must actually be stochastically bounded .",
    "second , even though the sequence @xmath487 is stochastically bounded , it is possible that the modulus of @xmath498 is not asymptotically negligible , as in ( 11.6.4 ) of @xcite .",
    "thus , suppose that there exists @xmath499 and @xmath500 such that @xmath501 for all @xmath500 , no matter how small , and some @xmath46 , no matter how large , where @xmath502 consider a subsequence of @xmath46 for which this is true .",
    "then there must exist a sequence @xmath503 where @xmath504 and @xmath505 as @xmath66 such that @xmath506 for all @xmath46 .",
    "since , @xmath507 for all @xmath46 , there exists a convergent subsequence of @xmath508 .",
    "so it suffices to assume that @xmath509 as @xmath66 .",
    "we now work with @xmath440 in ( [ idecomp ] ) , using the fluid limits @xmath58 and @xmath510 determined in section  [ secwsublln ] , that is , @xmath511 thus , by the continuity of @xmath512 , the @xmath44-scaled process satisfies @xmath513 so that @xmath514 since limits have been established for the sequences @xmath515 and @xmath516 , ( [ hatin222 ] ) implies that , for some @xmath517 , @xmath518\\\\[-8pt ] & & \\qquad \\ge \\limsup_{n { \\rightarrow}\\infty}{p\\bigl(\\bigl| \\hat{w}_n ( t_n + \\delta_n ) - \\hat{w}_n ( t_n)\\bigr| > \\gamma\\bigr ) } > 0.\\nonumber\\end{aligned}\\ ] ]    however , together with ( [ jbd3 ] ) , which implies that @xmath519 for some constant @xmath408 for all @xmath379 suitably small , uniformly in @xmath46 and @xmath10 , the limit in ( [ hatin3 ] ) implies that we can not have @xmath520 as indicated in ( [ elim ] ) , which is a contradiction .",
    "hence , the modulus property for the sequence @xmath487 in ( [ modulus ] ) must actually not hold .",
    "thus , we have shown that the sequence @xmath487 must in fact be tight .",
    "we now characterize the limit of any convergent subsequence of the sequence @xmath487 . without changing the notation ,",
    "suppose that @xmath342 through some subsequence .",
    "of course , we also have @xmath341 along this subsequence and all the other fluid limits .",
    "we thus want to characterize the distribution of @xmath349 .",
    "to do so , we again exploit the representation of the flow into service , writing @xmath521 where @xmath522 is the final remainder term associated with a final partial interval and @xmath523 as in ( [ in1 ] ) with @xmath524 as in ( [ in3 ] ) and ( [ idecomp ] ) . since we have established that @xmath525 in @xmath299)$ ] ,",
    "as stated in ( [ elim ] ) and ( [ elimit ] ) , we can ignore the final remainder term in ( [ r1 ] ) .",
    "the @xmath422-tightness following from the convergence implies that the scaled remainder term is asymptotically negligible .    for any @xmath336 ( which applies to @xmath526 ) , let the @xmath527-scaled processes over the intervals @xmath528 $ ] be @xmath529 where @xmath530 has been determined , and similarly for the other processes . in section  [ secwtightlln ]",
    "we observed that @xmath531 .    by ( [ idecomp ] ) , the fwlln for @xmath361 and the fclt for @xmath532 in ( [ tildelim ] ) , @xmath533\\\\[-8pt ] & & \\quad\\rightarrow\\quad \\hat{i}_1 ( t , { \\varepsilon } ) \\equiv   c_{\\lambda } \\int_{t - w(t)}^{t+\\varepsilon - w(t+\\varepsilon ) } f^c(t - s)\\,d \\tilde{{{{\\mathcal}b}}}_{\\lambda}\\bigl(\\lambda(s)\\bigr),\\nonumber\\end{aligned}\\ ] ] where @xmath262 is the bm associated with the arrival process , and @xmath70 is its variability parameter , as in ( [ arrivefclt ] ) .    similarly , by ( [ idecomp ] ) , the fwlln for @xmath361 and the fclt for @xmath534 in ( [ tildelim ] ) , @xmath535 where @xmath536 is a bm associated with the patience times .    for @xmath440 in ( [ idecomp ] ) , we first write @xmath537 for @xmath538 previously determined , that is , @xmath539 then",
    ", exploiting the assumed convergence @xmath540 along the subsequence , we obtain @xmath541\\\\[-8pt ] & & \\qquad = \\tilde{q}\\bigl(t , w(t)\\bigr ) \\sqrt{n}\\bigl(w_{n}(t)-w(t)\\bigr ) \\nonumber\\\\ & & \\qquad\\quad { } - q\\bigl(t , w(t+\\varepsilon)-\\varepsilon\\bigr ) \\sqrt{n}\\bigl(w_{n}(t+ \\varepsilon ) -w(t+\\varepsilon)\\bigr ) + o(1 ) \\nonumber \\\\ & & \\quad \\rightarrow\\quad \\hat{i}_3 ( t , { \\varepsilon } ) \\equiv\\tilde{q}\\bigl(t , w(t)\\bigr ) \\hat { w } ( t ) - \\tilde{q}\\bigl(t , w(t+\\varepsilon)-\\varepsilon\\bigr ) \\hat{w } ( t + \\varepsilon)\\nonumber\\end{aligned}\\ ] ] as @xmath66 . exploiting ( [ jbd3 ] ) , we see that @xmath542 is asymptotically negligible compared to @xmath543 .",
    "hence , we have established the convergence @xmath544 in @xmath343 ) \\times{\\mathbb{d}}^3([t , t+{\\varepsilon}])$ ] , where @xmath545 with all the limits having been identified explicitly . substituting the established limits into ( [ keyrel ] )",
    ", we obtain @xmath546\\\\[-8pt ] & & \\qquad\\quad { } -\\int_{t - w(t)}^{t+\\varepsilon - w(t+\\varepsilon)}\\sqrt { f(t - s)f^c(t - s)}\\,d \\tilde{{{{\\mathcal}b}}}_{a}\\bigl(\\lambda(s)\\bigr ) \\nonumber\\\\ & & \\qquad\\quad { } + \\tilde{q}\\bigl(t , w(t)\\bigr ) \\hat{w } ( t ) - \\tilde{q}\\bigl(t , w(t+\\varepsilon ) - \\varepsilon\\bigr ) \\hat{w } ( t + \\varepsilon ) + o({\\varepsilon } ) \\qquad\\mbox{as } { \\varepsilon}\\downarrow0 . \\nonumber\\end{aligned}\\ ] ] moreover , for each @xmath547 , we have the corresponding limit for the sum @xmath548 in ( [ r1 ] ) . as @xmath401",
    ", this sum converges in mean square to the stochastic integral associated with a stochastic differential equation ( sde ) determined by ( [ presde ] ) .",
    "thus , the distribution of @xmath349 is determined by this sde .",
    "the sde is well defined because all but the term @xmath549 involve bm terms , which produce known differential terms . in particular , using informal differential notation , we see that , as @xmath401 , @xmath550 where we exploit the assumed differentiability of the arrival rate function @xmath55 and @xmath551 \\qquad\\mbox{as } \\varepsilon\\rightarrow0\\end{aligned}\\ ] ] in the treatment of @xmath552 .    putting the @xmath553 term on the left , and thus expressing it in terms of all others",
    ", we get the sde @xmath554 as in ( [ sde ] ) , where @xmath189 , @xmath555 , @xmath556 and @xmath557 are given in ( [ kernels ] ) and @xmath58 is given in ( [ isquared ] ) . while @xmath558 , @xmath559 and @xmath560 are all independent standard bms .",
    "we claim that the sde in ( [ sdepf ] ) and ( [ sde ] ) has the analytic solution @xmath561 where @xmath562 , @xmath563 , @xmath564 and @xmath565 are independent processes , as given in theorem [ thfclt ] .",
    "we verify ( [ sdesol ] ) from ( [ sde ] ) using it s formula .",
    "let @xmath566 , we have by it s formula that @xmath567 integrating both sides yields @xmath568 from which ( [ sdesol ] ) follows by multiplying through by @xmath569 .",
    "so far , we have established the fclt for the hwt process @xmath84 , still under the special initial condition starting with all servers busy and an empty queue .",
    "we now use this result to establish limits for the other processes , under this same initial condition .    _ the queue length and the number in system .",
    "_ we now obtain the limit for @xmath215 and @xmath246 from ( [ qlim ] ) and ( [ xqdiff ] ) , incorporating the limit for @xmath344 into @xmath371 , using the limit @xmath342 just established .",
    "we obtain the expression in theorem [ thfclt ] by putting the contributions from the arrival process , service times and patience times into their respective terms .",
    "we have thus established the fwlln in theorem [ thfwlln ] and the fclt in theorem [ thfclt ] under the special initial condition , in which all servers are busy , and the queue is empty at time @xmath165 , the beginning of the ol interval .    _ the potential waiting time .",
    "_ we start with the fluid equation @xmath570 in ( [ veq ] ) and the corresponding equation for the queueing models , @xmath571 , as in ( [ vrep ] ) .",
    "let @xmath572 and @xmath573 .",
    "we exploit the differentiability of @xmath24 with @xmath574 for some @xmath547 , the differentiability of @xmath575 [ because we assumed that @xmath55 is differentiable in order to have @xmath576 well defined ] and taylor s theorem to write @xmath577 we exploit the fclt for @xmath84 , the fwlln for @xmath85 and the continuous mapping theorem to get @xmath578 in @xmath343)$ ] . from ( [ normbd ] ) , we see that there exists @xmath476 such that @xmath579 we can then apply ( [ v102 ] ) with the two - term expansion in ( [ v101 ] ) to get @xmath580 proving that @xmath581\\bigr)\\ ] ] as claimed .    _",
    "the abandonment process @xmath86 .",
    "_ we obtain the limits for @xmath582 and @xmath583 in ( [ flim ] ) and ( [ gxlim ] ) directly from the flow conservation representation in ( [ aban ] ) and the established limits above .",
    "we see that @xmath584 in @xmath98 and @xmath585 in @xmath98 , jointly with the other processes , for @xmath586 in ( [ glims ] ) .",
    "it now remains to extend the fwlln and the fclt for the number in system in an ol interval to the general initial condition given in ( [ initiallim ] ) .",
    "as in the statement of theorem [ thfclt ] , let @xmath9 be the number in system during the ol interval with the initial condition ( [ initiallim ] ) , and let @xmath587 be the number in system during the ol interval starting with all servers busy and an empty queue , for which we have proved the fwlln and fclt in the preceding subsections .",
    "we assume that the two processes @xmath9 and @xmath587 are defined on the same probability space , having the same arrival process , service times and abandonment times , with the service times and abandonment times assigned in order of customers entering service and the queue , respectively .",
    "these processes differ by the initial conditions @xmath588 , for which the scaled versions have been assumed to converge in ( [ initiallim ] ) .",
    "however , we need to carefully consider the consequence of this difference at time @xmath165 as time evolves within the interval @xmath149 $ ] .",
    "we establish the desired limits for @xmath9 by showing that @xmath589 in @xmath416)$ ] as @xmath66 , where @xmath590 is independent of @xmath591 and @xmath592 is given in ( [ glims ] ) with @xmath24 being the hwt in the fluid model and @xmath593 being the hazard rate function of the patience c.d.f .",
    "@xmath6 , which is positive and bounded by previous assumptions on @xmath6 . as a consequence of the first limit in ( [ asymeq2 ] ) , the fluid limit appearing in the centering terms of the scaled processes @xmath591 and @xmath246 are identical .",
    "we now proceed to justify ( [ asymeq2 ] ) .",
    "since the customers enter service in a fcfs order , the excess customers at time @xmath165 soon enter service .",
    "however , the excess still remains because new customers arrive and join the queue to replace those that entered service .",
    "an important insight is the observation that the remaining excess can always be considered among those customers that have been in the system for the longest time among all waiting customers .",
    "since the abandonment hazard rate is bounded above , the abandonment rate is controlled .",
    "since the fluid model is in an ol interval with @xmath285 for all @xmath336 , with the initial net input rate to service @xmath287 , the servers become all busy and remain so afterwards in an interval @xmath594 $ ] for @xmath289 .",
    "thus there are at most @xmath290 empty servers for a period of only @xmath291 .",
    "hence , the difference between @xmath595 and @xmath9 is asymptotically only the initial difference adjusted by abandonments over the interval @xmath63 $ ] . in particular",
    ", we have @xmath596 where @xmath597\\\\[-8pt ] u^{-}_n ( t ) & \\equiv & -\\bigl(x_n ( 0 ) - s_n ( 0)\\bigr)^- - a_{i , n,- } ( t)\\nonumber\\end{aligned}\\ ] ] with @xmath598 , @xmath599 being the number of abandonments from the initial positive excess number of customers , @xmath600 , given that it is positive , while @xmath601 is the number of abandonments from the positive difference @xmath602 , resulting from a initial negative excess number of customers , @xmath603 , given that it is indeed negative .",
    "fortunately , the limiting behavior of @xmath599 and @xmath604 are essentially the same , so that we need not treat the positive part and the negative part differently .",
    "we are now ready to prove the fwlln .",
    "since @xmath605 and @xmath606 , we deduce that @xmath607 as @xmath66 .",
    "hence , we have completed proof of the fwlln @xmath608 in @xmath343)$ ] .",
    "the rest of theorem [ thfwlln ] follows for the general initial conditions @xmath609 as well .",
    "we now turn to the fclt .",
    "we will show that @xmath610 in @xmath416)$ ] , as in ( [ asymeq2 ] ) .",
    "for that , we need to carefully examine the processes @xmath599 and @xmath601 , recording the number of abandonments from the deviation @xmath588 .",
    "suppose that @xmath611 , so that we focus on @xmath599 . since the abandonments @xmath599 always come from the waiting customers that have been in the system the longest , which means at the right boundary of the queue length process , which asymptotically is at @xmath24 , the abandonment making up @xmath599 occurs asymptotically at rate @xmath612 at time @xmath613 through all time .",
    "of course , specific abandonments are random .",
    "nevertheless , because the size of the deficiency is order @xmath290 and we scale by dividing by @xmath44 when we scale for the fclt , the impact actually becomes deterministic , by the fwlln ( or glivenko  cantelli theorem ) .",
    "in particular , the fclt - scaled version of the process @xmath614 in ( [ udef ] ) is asymptotically equivalent to the process @xmath615 where @xmath616 is a sequence of i.i.d .",
    "random variables , each having a distribution with hazard rate @xmath612 at time @xmath613 .",
    "we only have asymptotic equivalence , because the abandonment rate at time @xmath613 is actually @xmath617 in system @xmath46 .",
    "however , we have @xmath618 . hence , for any @xmath547 , we can bound the abandonment rate above by @xmath619 and below by @xmath620 , where @xmath621\\\\[-8pt ] h^{l , { \\varepsilon}}_f \\bigl(w(u)\\bigr ) & \\equiv & \\inf _ { -{\\varepsilon}\\le s \\le{\\varepsilon}}{\\bigl\\ { h_f \\bigl(w ( u ) + s\\bigr)\\bigr\\}}.\\nonumber\\end{aligned}\\ ] ] by exploiting these bounds and the continuity of @xmath51 , we see that we do indeed asymptotically have the representation in ( [ udef2 ] ) .    combining ( [ initiallim ] ) , ( [ udef2 ] ) and the glivenko  cantelli theorem , we can conclude that @xmath622\\bigr)\\ ] ] as @xmath66 .",
    "essentially the same reasoning applies to @xmath601 . combining these two limits ,",
    "we obtain @xmath623 hence we have justified ( [ asymeq2 ] ) .",
    "we have just proved that @xmath624 for the general initial condition in ( [ initiallim ] ) .",
    "we now establish the remaining limits in ( [ gxlims2 ] ) for the other related processes with initial condition ( [ initiallim ] ) .      since @xmath625 as @xmath66 for all @xmath626 and @xmath627 with @xmath628",
    ", we necessarily have @xmath629 as @xmath66 , so that @xmath630 as claimed in @xmath631)$ ] for each @xmath626 and @xmath627 with @xmath632 , which is equivalent to convergence in @xmath633 .",
    "however , the situation is different at the interval endpoints . in particular",
    ", there is truncation at time @xmath165 for the processes @xmath215 and @xmath219 .",
    "we can not extend the limit to the interval @xmath154 $ ] , or even @xmath634 , closed on the left , because the limit process could have a discontinuity at @xmath165 , which would be ruled out in the definition of the space @xmath98 .",
    "indeed , because of the definition of the queue length as @xmath635 and the number in service as @xmath636 , it is immediate that @xmath637 these limits are of course not mean - zero random variables .    as a consequence , of ( [ qtrunc ] ) ,",
    "if @xmath280 , then there can be no fclt for @xmath215 in @xmath220 because @xmath34 would require a discontinuity at time @xmath165 to reflect the initial truncation of @xmath638 to get @xmath639 ; if @xmath282 , then there is no fclt for @xmath219 in @xmath220 because @xmath35 would require a discontinuity at time @xmath165 to reflect the initial truncation of @xmath638 to get @xmath640 .",
    "we obtain the limits for @xmath582 and @xmath583 in ( [ flim ] ) and ( [ gxlims2 ] ) directly from representation ( [ aban ] ) and the established limits above .",
    "we see that @xmath641 in @xmath98 as @xmath66 and @xmath642 so that @xmath585 in @xmath98 , jointly with the other processes , for @xmath586 in ( [ glims2 ] )",
    ".      we will start by considering the pwt @xmath85 .",
    "we first consider time @xmath165 for the fclt - scaled process .",
    "note that the pwt @xmath643 and the fclt - scaled version @xmath644 are @xmath165 if @xmath645 , but not otherwise .",
    "hence , the general initial conditions in ( [ initiallim ] ) alters the limit @xmath646 at time @xmath165 . since service times are exponential , service completion occurs initially at rate @xmath647 , where @xmath648 .",
    "in addition , new service capacity initially becomes available asymptotically at rate @xmath649 .",
    "hence , the scaled pwt at time @xmath165 is asymptotically equivalent to @xmath650 where @xmath651 is a sequence of i.i.d .",
    "exponential random variables , each with rate @xmath652 .",
    "hence , by the lln , @xmath653    we have a different situation for @xmath336 , because the number in system becomes positive , of order @xmath474 for @xmath654 . since @xmath655 for any @xmath626 and @xmath627 with @xmath656 ,",
    "now the service completion rate is asymptotically @xmath657 at time @xmath46 , for all @xmath10 in @xmath205 $ ] above . as in ( [ udef ] ) , we consider the remaining number from the initial difference , separating the positive and negative values . now , paralleling ( [ udef2 ] ) , we have @xmath224 asymptotically equivalent to @xmath658 , where @xmath659 with @xmath660 where @xmath661 is defined in ( [ udef ] ) and @xmath651 is a sequence of i.i.d .",
    "exponential random variables , each with rate @xmath662 , and similarly for @xmath663 . as a consequence , by the fwlln",
    ", @xmath664 combining this result with the corresponding result for @xmath665 , we have @xmath666 where @xmath667 has been determined already in section  [ secfcltother ] , @xmath592 is defined in ( [ glims ] ) and @xmath668 by assumption in section  [ secfluid ] . the final formula in ( [ vgen2 ] ) is equivalent to the stated formula in ( [ glims2 ] ) because @xmath669 by ( [ veq ] ) .",
    "we next use the equation @xmath670 to develop a limit for @xmath84 .",
    "reasoning as in ( [ v104 ] ) , we get @xmath342 in @xmath671 with @xmath672 for @xmath646 in ( [ vgen2 ] ) , from which the formulas given in ( [ glims2 ] ) follow directly .",
    "we obtain the complicated variance formulas for @xmath673 and @xmath674 by applying the usual it isometry for brownian stochastic integrals , using the representation in ( [ glims ] ) .",
    "the remaining variance formulas are elementary .",
    "in this section we prove theorem [ thul ] .    proof of theorem [ thul ] as indicated ,",
    "this mostly is a direct application of the infinite - server fwlln and fclt in @xcite .",
    "this is true for @xmath241 because @xmath675 where @xmath676 is the associated @xmath249 model with the identical arrival process , the identical sequence of service times for successive customers entering service and the identical initial conditions , that is , @xmath250 .",
    "thus we can apply many - server heavy - traffic ( msht ) limits established for that model in @xcite ; also see @xcite .",
    "( previous references suffice here ; the full force of @xcite is only needed to treat the more general @xmath251 model associated with ol intervals ; see section  [ secol ] . )    however , to prove ( [ asymeq ] ) , we need to carefully consider what happens in the neighborhood of each interval endpoint . there is no trouble in between because there is no critical loading except at the interval endpoints .",
    "that implies that the net flow out , @xmath677 , is positive of order @xmath474 over any interval @xmath678 $ ] for @xmath656 , no matter how small .",
    "thus , @xmath679 as @xmath66 for @xmath656",
    ".    however , it is possible that @xmath680 and/or @xmath681 . consider the left endpoint .",
    "if @xmath680 , then the systems @xmath241 and @xmath682 are not stochastically identical over @xmath63 $ ] for @xmath336 .",
    "we do have @xmath683 by definition , but if @xmath684 , then @xmath588 customers are waiting in queue instead of being served .",
    "however , asymptotically , the difference at time @xmath165 is @xmath685 .",
    "only this portion of the initial number of customers will receive different treatment .",
    "since @xmath686 is differentiable with derivative @xmath687 , the initial difference of order @xmath290 will dissipated over a time interval of order @xmath291 .",
    "the constant departure rates ( by service versus abandonment ) of these @xmath290 customers will differ during that short time interval .",
    "thus , @xmath688 is of order @xmath689 as @xmath66 .",
    "hence , this difference is asymptotically negligible after scaling . to support this conclusion , note that the hazard rate of the abandonment is bounded above , implying that only a negligible number of customers in the queue will abandon in the initial interval of length @xmath291 .",
    "essentially the same argument applies at the right endpoint @xmath225 .",
    "thus , we do indeed have @xmath690 and @xmath691 , as claimed in ( [ asymeq ] ) . then the results for the @xmath249 model follow from @xcite . a key step there is to treat the new arrivals differently from the customers initially in the system . the customers initially in the system are treated in section  5 of @xcite ; they lead to the limit processes @xmath692 and @xmath260",
    ".    however , truncation at the endpoints @xmath165 and @xmath225 do alter the processes @xmath242 and @xmath693 more significantly . since we can have @xmath694 , and/or @xmath695 for all  @xmath46",
    ", there can be truncation at the times @xmath165 and @xmath225 .",
    "thus we can have @xmath696 and/or @xmath697 . however , there is no problem for the fluid limits . since @xmath698 and @xmath699 , necessarily @xmath700 , so that ( [ bfluidlim ] ) follows from theorem 11.4.7 of @xcite .",
    "the same reasoning can be applied at the right endpoint @xmath225 .",
    "in contrast , the truncation affects the fclts for @xmath215 and @xmath219 when @xmath701 since @xmath702 as @xmath66 , we necessarily have @xmath703 as @xmath66 , so that @xmath704 as claimed .",
    "we can not extend the limit to the closed interval @xmath705 $ ] because the limit process could have a discontinuity at @xmath165 , which would be ruled out .",
    "if @xmath280 , then there can be no fclt for @xmath215 in @xmath220 because @xmath34 would require a discontinuity at time @xmath165 to reflect the initial truncation of @xmath638 to get @xmath639 ; if @xmath282 , then there is no fclt for @xmath219 in @xmath220 because @xmath35 would require a discontinuity at time @xmath165 to reflect the initial truncation of @xmath638 to get @xmath640 .",
    "there also could be further truncation at the right endpoint @xmath225 , so we only state the limit for @xmath706 in @xmath220 .",
    "extending theorem [ thul ] to the more general @xmath1 model is more difficult , because the limit for @xmath707 involving the initial customers would be more complicated because it would depend on the ages of all the service times in process .",
    "we have exploited the exponential assumption to avoid that difficulty .",
    "to provide practical confirmation of the theorems proved in earlier sections , we now report the results of a simulation experiment .",
    "we consider an @xmath708 queueing model with a sinusoidal arrival rate function that makes the system alternate between ol and ul intervals .",
    "specifically , the model parameters are : arrival rate function @xmath709 , @xmath710 , mean service time @xmath711 , mean patience @xmath712 and a fixed number of servers @xmath713 , @xmath714 .",
    "we let the service distribution be exponential and the patience distribution be a two - phase hyperexponential ( @xmath715 ) with probability density function ( p.d.f . ) @xmath716 with parameters @xmath717 , @xmath718 and @xmath719 , which produces squared coefficient of variation ( variance divided by the square of the mean ) .",
    "to verify accuracy of the formulas , we estimate the mean and variance of the scaled queueing processes for very large @xmath46 , in particular , for @xmath720 .",
    "we obtain these estimates from @xmath721 independent replications of a simulation of the queueing system .",
    "figure  [ h2abfig ] shows plots of several key performance functions for the limiting fluid and diffusion processes for @xmath722 , starting out empty ( see dashed lines ) : ( i ) _ fluid _ head - of - line and the potential waiting times @xmath24 and @xmath137 , ( ii ) variance of the _ diffusion _ waiting times @xmath723 and @xmath724 , ( iii ) _ fluid _ number of customers in queue , in service @xmath725 and @xmath169 , ( iv ) variance of the _ diffusion _ number of customers in queue , in service , and in the system @xmath726 , @xmath727 , and @xmath728 .",
    "model starting empty for the case @xmath720 based on @xmath721 independent replications : the boundary and potential waiting times , @xmath24 and @xmath137 , the variances of the two waiting times , mean number in queue , @xmath725 , the variance of the number in queue , mean number in service , @xmath169 ,  variance of number in service and variance of the total number in the system , @xmath729 . ]",
    "we compare these performance functions for the limit processes to estimates of them for the corresponding scaled queueing processes . in figure  [ h2abfig ]",
    "we also plot the corresponding performance functions under the lln and clt scaling ( see solid lines ) : ( i ) mean of the lln - scaled head - of - line and the potential waiting times @xmath730 $ ] and @xmath731 $ ] , ( ii ) variance of the clt - scaled waiting times @xmath732 and @xmath733 , ( iii ) mean of the lln - scaled number of customers in queue and in service @xmath734 $ ] and @xmath735 $ ] , ( iv ) variance of the clt - scaled number of customers in queue , in service , and in the system @xmath736 , @xmath737 and @xmath738 .",
    "figure  [ h2abfig ] shows that the simulation estimates for the @xmath708 queueing model agree closely with the fluid and diffusion performance .",
    "model starting empty for the case @xmath739 based on @xmath740 independent replications : the boundary and potential waiting times , @xmath24 and @xmath137 , the variances of the two waiting times , mean number in queue , @xmath725 , the variance of the number in queue , mean number in service , @xmath169 ,  variance of number in service and variance of the total number in the system , @xmath729 . ]",
    "this experiment provides an engineering verification for the limit theorems ( as @xmath741 ) .",
    "the approximation is not nearly as good when @xmath46 is small , for example , when @xmath739 , as shown in figure  [ h2abfig100 ] .",
    "the approximation still performs well in the interior of ul and ol intervals but relatively poorly in the neighborhood of the switching points ( the real variances are continuous functions while the approximating formulas are jump functions ) .",
    "furthermore , we find the approximation becomes even worse for smaller systems , for example , when @xmath742 .",
    "thus , we develop and study refined engineering approximations , drawing on ( [ qbapprox ] ) , in @xcite .",
    "for refined approximations and controls , we may want to generalize the sequence of @xmath0 queueing models specified in section  [ secseq ] by considering arrival rates @xmath743 and staffing functions @xmath744 , having extra @xmath44 terms , where @xmath745 and @xmath746 are additional smooth deterministic functions ( with subscript @xmath747 for gaussian scale ) .",
    "we now briefly indicate how the results above extend to this case .",
    "first , the limit processes in the fclt for the arrival process and the departure process in ( [ arrivefclt ] ) and ( [ twofclt ] ) should have the respective extra terms @xmath748 these changes lead to deterministic modifications of other expressions .    for each ol interval , we add the term @xmath749 to @xmath750 in ( [ tildelimits ] ) ; we add the term @xmath751 to @xmath752 in section  [ secqlimpf ] ; we add the tem @xmath753 to @xmath754 in ( [ elimit ] ) ; and we add the term @xmath755 to @xmath756 in ( [ hatin1 ] ) .",
    "those changes lead to changes in the critical sde for the limit process @xmath25 developed in section  [ secwcharpf ] .",
    "extra terms @xmath757 appear on the left and @xmath758 on the right in ( [ presde ] ) , which in turn contribute a term @xmath759 to the right - hand side of the sde in ( [ sdepf ] ) and ( [ sde ] ) , where @xmath760 this leads to an extra deterministic term @xmath761 on the right - hand side of the expression for @xmath25 given in ( [ sdesol ] ) , which is @xmath762 in theorem  [ thfclt ] .    from ( [ q1 ] ) and ( [ qlim ] ) , we see that those changes above lead to the addition of @xmath763 above to @xmath764 and the addition of @xmath765 to @xmath766 in theorem  [ thfclt ] .",
    "there are corresponding changes for each ul interval . due to the revised arrival and departure",
    "fclts , the term @xmath767 is added to the right - hand side of the sde in ( [ sdeul ] ) , where @xmath768 .",
    "the changes above lead to modifications of the limits in the fclts , but not the fwllns .",
    "the limit processes are still gaussian processes .",
    "these deterministic changes alter the mean values of the gaussian limits , but do not affect the variances .",
    "we thank jiheng zhang for constructive comments ."
  ],
  "abstract_text": [
    "<S> a many - server heavy - traffic fclt is proved for the @xmath0 queueing model , having time - varying arrival rate and staffing , a general arrival process satisfying a fclt , exponential service times and customer abandonment according to a general probability distribution . </S>",
    "<S> the fclt provides theoretical support for the approximating deterministic fluid model the authors analyzed in a previous paper and a refined gaussian process approximation , using variance formulas given here . </S>",
    "<S> the model is assumed to alternate between underloaded and overloaded intervals , with critical loading only at the isolated switching points . the proof is based on a recursive analysis of the system over these successive intervals , drawing heavily on previous results for infinite - server models . </S>",
    "<S> the fclt requires careful treatment of the initial conditions for each interval . </S>"
  ]
}