{
  "article_text": [
    "in this paper we study the many server n - system shown in figure [ fig.n ] , with poisson arrivals and exponential service times , under first come first served and assign to longest idle server policy ( fcfs - alis ) , as the number of servers becomes large . before describing the model in detail",
    ", we will first discuss our motivation for studying this system .",
    "the n - system is one of the simplest special cases of the so called parallel server systems , as defined in @xcite and further studied in @xcite .",
    "the general model has customers of types @xmath0 , servers of types @xmath1 , and a bipartite compatibility graph @xmath2 where @xmath3 if customer type @xmath4 can be served by server @xmath5 .",
    "arrivals are renewal with rate @xmath6 , where successive customer types are i.i.d . with probabilities @xmath7 ,",
    "there is a total of @xmath8 servers , of which @xmath9 are of type @xmath5 , and service times are generally distributed with rates @xmath10 .",
    "assume the system is operated under the fcfs - alis policy , that is servers take on the longest waiting compatible customer , and arriving customers are assigned to the longest idle compatible server .",
    "for this general system necessary and sufficient conditions for stability ( positive harris recurrence for given @xmath6 ) , or for complete resource pooling ( there exists critical @xmath11 such that the system is stable for @xmath12 , and the queues of all customer types diverge for @xmath13 ) can not be determined by 1st moment information alone ( as shown by an example of foss and chernova @xcite ) .",
    "in particular , under fcfs - alis calculation of the matching rates @xmath14 , which are long term average fractions of services performed by servers of type @xmath5 on customers of type @xmath4 , is intractable .    in the special case that service rates depend only on the server type , and not on customer type , with poisson arrivals and exponential service times ,",
    "the system has a product form stationary distribution , as given in @xcite . in that case matching rates",
    "can be computed from the stationary distribution .",
    "the following conjecture was made in @xcite : if the system is stable and has complete resource pooling for given @xmath15 , and we let both become large together , the behavior of the system simplifies : there will exist @xmath16 such that servers of type @xmath5 perform a fraction @xmath16 of the services , and the matching rates @xmath14 will converge to the rates for the fcfs infinite matching model with @xmath17 , as calculated in @xcite ( see also @xcite ) .",
    "the conjecture is based on the following heuristic argument : in steady state the times that each server becomes available form a stationary process which is only mildly correlated with the other servers and so servers become available approximately as a superposition of almost independent stationary processes which in the many server limit becomes a poisson process , and server types are then i.i.d . with probabilities",
    "@xmath16 , while customer types arrive as an i.i.d .",
    "sequence with probabilities @xmath7 , which corresponds exactly to the model of fcfs infinite matching .    in our current study of the many server n - system",
    "we shall verify the conjectured many server behavior for this simple parallel server system .",
    "to do so we start from the known stationary distribution of the n - system with many servers , as derived from @xcite , and study its behavior as @xmath18 . as it turns out , the product form stationary distribution even for this simple case is far from simple , and the derivations of limits , which use summations over server permutations and asymptotic expansions of various expressions are quite laborious .",
    "we feel that this emphasizes the difficulty of verifying the conjectured behavior of the general system , which remains intractable at this time .",
    "we mention that the n - system with just two servers , has been the subject of several papers , @xcite . in this paper , our focus is on the n - system with many servers under fcfs - alis policy , and its limit property .",
    "the rest of the paper is structured as follows : in section [ sec.model ] we describe the model , in section [ sec.fluid ] we use some heuristic arguments to obtain a guess at the limiting behavior . in section [ sec.stationary ] we obtain the stationary behavior under many server scaling . in section [ sec.numerics ]",
    "we illustrate our results with some numerical examples . to improve the readability of the paper we have put all the proofs for section [ sec.stationary ] in the appendix .",
    "in our n - system customers of types @xmath19 and @xmath20 arrive as independent poisson streams , with rates @xmath21 .",
    "there are skill based parallel servers , @xmath22 servers of type @xmath23 which are flexible and can serve both types , and @xmath24 servers of type @xmath25 which can only serve type @xmath19 customers .",
    "we assume service times are all independent exponential , with server dependent rates .",
    "the service rate of an @xmath23 server is @xmath26 , the service rate of an @xmath25 server is @xmath27 , see fig [ fig.n ] .",
    "we let @xmath28 .",
    "service policy is fcfs - alis .",
    "the system is obviously markovian . in @xcite the following state description for",
    "the server dependent poisson exponential system with @xmath29 server types and @xmath30 customer types was used : imagine the customers arranged in a single queue by order of arrivals , and servers are attached to customers which they serve , and the remaining idle servers are arranged by increasing idle time , see figure [ fig : ivostate ]        the state is then @xmath31 , where @xmath32 is a permutation of the @xmath8 servers , the first @xmath33 servers are the ordered busy servers , and the last @xmath4 servers are the ordered idle servers , and where @xmath34 are the queue lengths of the customers waiting for one of the servers @xmath35 , and skipped ( can not be served ) by servers @xmath36 .",
    "for the special case of the n - system , the following three random quantities are important : @xmath37 the number of idle servers of type @xmath23 , @xmath38 the number of idle servers of type @xmath25 , and @xmath39 the number of servers of type @xmath25 which follow the last server of type @xmath23 in the sequence @xmath32 .",
    "we let @xmath40 be the total number of idle servers . because of",
    "the structure of the n - system , and the fcfs - alis policy the following properties hold for @xmath41 and @xmath42 :    ( i ) : :    there are no customers waiting for any server which precedes the last    @xmath23 server in the permutation . in other words , for all    @xmath43 we have @xmath44 . in    particular ,",
    "if there is an idle type @xmath23 server , in    other words if @xmath45 , then there are no waiting    customers at all .",
    "( ii ) : :    if there are any idle servers , then there are no type    @xmath19 customers waiting for service , in other words , if    @xmath46 then all the waiting customers are of type    @xmath20 .",
    "( iii ) : :    if there are no idle servers , then only the last queue can contain    type @xmath19 customers , in other words , if @xmath47    then the last queue may contain customers of both types , but all the    other waiting customers are of type @xmath20 .",
    "denote @xmath48 then a necessary and sufficient condition for stability is @xmath49 we shall require a stronger condition of complete resource pooling , defined by @xmath50 where @xmath51 equals the long run fraction of services performed by @xmath23 servers .",
    "the value of @xmath51 will be calculated in the next section .",
    "using the results of @xcite we can then write the exact stationary distribution of this system .",
    "we wish to show that as the arrival rates and the number of servers increase the system simplifies , and we get very precise many server scaling limits .",
    "we will investigate the behavior of the system when @xmath52 are fixed , and @xmath53 . to be precise",
    ", we shall then have @xmath54 , @xmath55 , all of which go to @xmath56 .",
    "we perform the following heuristic calculation : as long as the system is underloaded ( @xmath57 ) , each server of type @xmath23 will have a cycle of service of mean length @xmath58 , followed by an idle period , and similarly each server of type @xmath25 will have service of mean length @xmath59 followed by an idle period .",
    "the key idea now is that when @xmath18 , the idle periods should have the same length for both types , because of alis .",
    "let @xmath60 be the average length of the idle time .",
    "the average cycle times will be : @xmath61 and @xmath62 .",
    "denote by @xmath51 the long run fraction of services performed by @xmath23 servers , and @xmath63 for type @xmath25 .",
    "the flow rate out of one type @xmath23 server is @xmath64 , the flow rate out of all type @xmath23 servers should equal @xmath65 . similarly the flow rate out of all type @xmath25 servers should equal @xmath66 .",
    "that is , @xmath67 now we solve for @xmath60 and @xmath51 : we rewrite @xmath68 and eliminate @xmath51 : @xmath69 to get a quadratic equation for @xmath60 : @xmath70 here @xmath71 by @xmath72 , so the equation has one positive and one negative root . solving for positive @xmath60",
    "we get : @xmath73 note : for the case of @xmath74 we get @xmath75 .    from @xmath60 and little s law",
    "we can obtain the average number of idle servers in pool 1 and pool 2 , denoted by @xmath76 and @xmath77 respectively .",
    "@xmath78 the values of @xmath51 and @xmath63 are then : @xmath79 note : both are positive , so @xmath80 . also , when @xmath81 we get @xmath82 .",
    "the value of @xmath83 does not come into the equation for @xmath60 , or the calculation of @xmath51 .",
    "hence , once we solve and obtain @xmath51 , the property of complete resource pooling will consist of checking that @xmath84 .",
    "we will show that the following holds for the stationary queue , as @xmath18 :    * @xmath85 is distributed as a geometric random variable , taking values @xmath86 with probability of success @xmath87 .",
    "it is independent of @xmath88 .",
    "* @xmath89 is close to a bivariate normal , with means @xmath90 , variances @xmath91 and correlation @xmath92 * successive idle servers except for the last @xmath93 are i.i.d . of type @xmath23 with probability @xmath51 and of type @xmath25 with probability @xmath63",
    "we first obtain the stationary distribution for each state @xmath94 .",
    "we note that the stationary probabilities depend mainly on the values of @xmath95 .",
    "let @xmath96 denote the service rate of the server at position @xmath5 .",
    "[ thm.markov ] the stationary distribution of the state @xmath94 of the fcfs - alis many server n - system is given by : @xmath97 where @xmath98 is a normalizing constant .",
    "this follows for all three parts of ( [ eqn.pistate ] ) by utilizing properties ( i),(ii),(iii ) in section  [ sec.model ] and substituting into equation ( 2.1 ) , theorem 2.1 , in @xcite .",
    "before we manipulate equation ( [ eqn.pistate ] ) , we introduce a lemma to facilitate the calculation .",
    "[ thm.sum ] let @xmath99 denote a permutation of @xmath100 given positive real numbers @xmath101 , we have @xmath102 where @xmath103 denotes the set of all the permutations of @xmath101 .",
    "now we can get the joint stationary distribution of @xmath95 .",
    "we denote by @xmath104 the stationary probability of @xmath105 , @xmath106 and @xmath107 .",
    "[ thm.pii1i2k ] the steady state joint distribution of @xmath95 is given by : @xmath108 where @xmath109 is a normalizing constant .",
    "in this section we obtain the asymptotic distribution of @xmath110 conditional on @xmath105 , as @xmath18 .",
    "we first show that as @xmath18 , the probability of no idle servers of type @xmath23 goes to zero , and so the probability that customers need not wait goes to 1 .",
    "next we condition on @xmath105 and show @xmath111 , where @xmath112 where @xmath60 is given in ( [ eqn.tsolution ] ) . finally , we condition on @xmath105 and show that the scaled and centered values of @xmath110 converge in distribution to a bivariate normal distribution .    [ prop.zeroqueue ] when @xmath18 , as long as @xmath57 , @xmath113 , @xmath114    from this theorem we see that when @xmath18 , @xmath115 .",
    "therefore , @xmath116 for any @xmath117 . from equation ( [ eqn.piki ] ) , given @xmath105 , the limiting stationary distribution as @xmath18 is @xmath118    [ thm.fluidlimit ] conditional on @xmath105 , @xmath119 converge to @xmath120 in probability for any @xmath121 .",
    "that is , for any @xmath122 , when @xmath18 , we have @xmath123    after showing the fluid limit result , we are now ready to show the central limit result .    [ thm.idledistribution ] for any @xmath124 , when @xmath18 , we have @xmath125   \\right)\\ ] ] where @xmath126 @xmath127 @xmath128      [ thm.kdist ] for any @xmath121 , as @xmath18 , @xmath129      theorem  [ thm.kdist ] shows that @xmath85 converges in distribution to a geometric distribution , so @xmath130 .",
    "therefore , we can extend theorem  [ thm.fluidlimit ] and theorem  [ thm.idledistribution ] into unconditional versions .",
    "[ thm.uncondition ] when @xmath18 , @xmath85 becomes independent of @xmath131 and @xmath132 .",
    "@xmath133 converges in distribution to the bivariate normal distribution described in [ eqn.clt ] .",
    "consider a special case when @xmath134 , we have @xmath135 .",
    "@xmath76 and @xmath77 can be easily solved : @xmath136 when @xmath18 , @xmath137 converges in distribution to a bivariate normal distribution with mean @xmath138 , variance @xmath139 and correlation @xmath140 the total idleness has mean of @xmath141 and variance of @xmath142      in the infinite matching model corresponding to the n - system there is an infinite sequence of customers , of types @xmath143 , where the customer types are i.i.d . , type is @xmath19 with probability @xmath83 and @xmath20 with probability @xmath144 , and an independent sequence of servers , of types @xmath145 , where the server types are i.i.d .",
    ", type is @xmath23 with probability @xmath51 and @xmath25 with probability @xmath63 , and compatibility graph with arcs @xmath146 . successive customers and servers",
    "are matched according to fcfs : each server is matched to the first compatible customer that was not matched to a previous server , and each customer is matched to the first compatible server that was not matched to a previous customer .",
    "after @xmath8 of the customers have been matched , consider the sequence of remaining servers .",
    "let @xmath147 be the number of servers of type @xmath25 that are first in this sequence , preceding the first server of type @xmath23 .",
    "the @xmath148 is a markov chain .",
    "the steady state distribution for this markov chain is that @xmath149 , which is exactly the limiting distribution of @xmath150 in ( [ thm.kdist ] ) .",
    "we test our results by investigating an n - system .",
    "@xmath151 , @xmath152 , @xmath153 , @xmath154 . from our approximation results ,",
    "as long as @xmath155 , or @xmath156 , both pools should have similar utilization . so the average number of idle servers in each pool is close to 50 , with variance of @xmath157 .",
    "we use exact stationary distribution to verify this .",
    "now we can calculate the expectation and variance of idle number in each pool exactly , listed in the following table .",
    ".the exact calculation [ cols=\"^,^,^,^,^\",options=\"header \" , ]     we can see that even when @xmath158 , the improved approximation is not bad .",
    "we are grateful to ivo adan for helpful discussion of this paper .",
    "summation over the geometric terms @xmath162 in ( [ eqn.pistate ] ) gives @xmath163 next we see that in this expression , permutations of @xmath32 with the same @xmath164 have a similar structure .",
    "we now sum over all the permutations of the appropriate @xmath165 . by lemma  [ thm.sum ]",
    "we obtain @xmath166 each permutation of the remaining servers , @xmath167 has the same stationary probability .",
    "it remains to count the number of permutations .",
    "when @xmath168 we have @xmath169 . for each permutation",
    "we choose 1 type @xmath23 server and @xmath170 out of @xmath24 type @xmath25 servers to form the last @xmath171 servers .",
    "the number of permutations is @xmath172 when @xmath173 , we have @xmath174 . for each permutation",
    ", we choose @xmath175 out of @xmath22 type @xmath23 servers and @xmath176 out of @xmath24 type @xmath25 servers .",
    "we then choose 1 from the @xmath175 idle servers of type @xmath23 , and @xmath170 from the @xmath176 idle servers of type @xmath25 to obtain the last @xmath171 servers .",
    "the number of permutations is @xmath177 multiplying the terms in ( [ eqn.pipermutation ] ) by the appropriate number of permutations and defining @xmath178 gives ( [ eqn.piki ] ) .",
    "[ [ proofs-of-theorems-prop.zeroqueue-thm.fluidlimit-and-thm.idledistribution ] ] proofs of theorems [ prop.zeroqueue ] , [ thm.fluidlimit ] and [ thm.idledistribution ] ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      ( i ) : :    we show that    @xmath179 where    @xmath180 . note that by    @xmath181 we have    @xmath182 .",
    "note also that    @xmath183 .",
    "( ii ) : :    we show that @xmath184   \\\\    & & \\qquad \\exp\\left[-n_2 \\left(\\log\\left(1-\\frac{m_2}{n_2}\\right)+\\frac{m_2}{n_2 } \\right)\\right]\\end{aligned}\\ ] ]    where @xmath76 and @xmath77 are defined in    ( [ eqn.meanidle ] ) .",
    "( iii ) : :    we show that as @xmath18    @xmath185    which proves the proposition .",
    "first we calculate @xmath186 we use induction to calculate @xmath187 from @xmath188 to @xmath189 .",
    "when @xmath188 , @xmath190 suppose @xmath191 then @xmath192 therefore , the induction is valid and we have @xmath193 @xmath194    next we calculate @xmath195 similar to the induction calculating @xmath196 above , we can obtain @xmath197 therefore , @xmath198 where @xmath199 is a poisson random variable with parameter @xmath200 . using stirling s approximation , @xmath201 recall that @xmath202 and note that @xmath203 .",
    "note also that when @xmath18 , @xmath199 can be approximated by a normal distribution with mean @xmath200 and variance @xmath200 .",
    "next we analyze @xmath204 in 3 cases depending on @xmath205 .    * when @xmath206 , from the normal distribution approximation , when @xmath207 , @xmath208 .",
    "therefore , @xmath209 * when @xmath210 , @xmath211 .",
    "when @xmath207 , the normal distribution approximation gives @xmath212 .",
    "@xmath213 * when @xmath214 , when @xmath18 , the normal distribution approximation gives @xmath215 .",
    "we need more care to treat this case . for any @xmath216 , @xmath217 therefore , @xmath218 in fact , for any fixed @xmath5 , when @xmath18 , @xmath219 for any @xmath122 , let @xmath220 .",
    "we have @xmath221 .",
    "there exists an @xmath222 such that when @xmath223 , for any @xmath224 , @xmath225 therefore , @xmath226 therefore , when @xmath18 , @xmath227 we have @xmath228            since @xmath238 when @xmath239 , we have @xmath240 when @xmath18 , note that @xmath241 is of the order of @xmath242 . therefore , @xmath243 increases exponentially .",
    "when @xmath244 , @xmath245 converges to a constant ; when @xmath210 , @xmath245 increases in the order of @xmath246 .",
    "therefore , when @xmath18 and @xmath247 , @xmath248 when @xmath249 , @xmath250 we have that @xmath251 therefore , when @xmath18 , @xmath248 this completes the proof that when @xmath18 , @xmath252    first we show that the weak convergence is valid given @xmath253 .",
    "then we show that the same holds when @xmath105 , for any fixed @xmath170 . when @xmath253 , we prove the convergence in probability in 2 steps .    *",
    "we show that for all states @xmath254 , the conditional probability is dominated by a bounded constant multiple of the conditional probability of some point on the boundary of the rectangle @xmath255 @xmath256 @xmath257 . *",
    "when @xmath18 , we approximate the conditional probability of the points in the rectangle @xmath255 @xmath256 @xmath257 . we then show that the probability of points on the boundary is negligible compared with the conditional probability at @xmath258 .",
    "* when @xmath263 and @xmath264 , we have @xmath265 . therefore , @xmath266 ; * when @xmath267 and @xmath268 , we have @xmath269 . therefore , @xmath270 ; * when @xmath271 , @xmath272 and @xmath273 , we have @xmath274 . therefore , @xmath275 ; * when @xmath271 , @xmath272 and @xmath276 , we have @xmath277 . therefore , @xmath278 ; * when @xmath279 , @xmath280 and @xmath281 . as long as @xmath282 , we have @xmath283 .",
    "when @xmath8 is large , this requires @xmath284 as long as @xmath285 , we have @xmath286 .",
    "when @xmath8 is large , this requires @xmath287          eventually the movement stops at the boundary which are @xmath290 away from @xmath90 .",
    "therefore , the probability of any state @xmath291 satisfying @xmath288 or @xmath289 would be dominated by the probability of some point at the boundary .        when @xmath297 $ ] and @xmath298 $ ] , and @xmath8 grows large , we can use stirling s approximation .",
    "@xmath299 where @xmath300 .",
    "note that @xmath301 and @xmath302 .",
    "define @xmath303 and @xmath304 , we have @xmath305 $ ] and @xmath306 $ ] .",
    "@xmath307 we define @xmath308 the first order derivatives on @xmath309 and @xmath310 : @xmath311 noting @xmath312 , we can verify that @xmath313 solve the first order conditions .",
    "look at the second order derivatives : @xmath314 @xmath315 the hessian matrix is negative definite .",
    "therefore , @xmath316 is strictly concave on @xmath317 and reaches its unique global maximum at @xmath318 . since @xmath316 is strictly concave and reaches its unique global maximum at @xmath318 .",
    "the maximum of @xmath316 on @xmath319\\times [ \\delta , 1-\\theta-\\delta]\\backslash ( f_1-\\epsilon , f_1+\\epsilon)\\times(f_2-\\epsilon , f_2+\\epsilon)$ ] is on the boundary @xmath320 .",
    "since the boundary is a compact set , the maximum is attainable , denoted by @xmath321 , where @xmath322 .          to obtain the asymptotic distribution of @xmath332 as @xmath207 we need to consider , by theorem  [ thm.fluidlimit ] , only values @xmath333 for which @xmath334 and @xmath335 .",
    "we write @xmath336 , with @xmath337 , @xmath338 .",
    "note that @xmath339 are of the same order of magnitude as @xmath340 , and we only consider @xmath333 of the same order of magnitude .",
    "@xmath341 where the use of stirling s approximation is justified for large @xmath8 . here",
    "@xmath260 and @xmath300 .",
    "we clearly have : @xmath342 so we can treat that part as a constant .",
    "consider @xmath343 then from the taylor expansion of the logarithm function , we have @xmath344 therefore , @xmath345 similar expansions are valid for @xmath346 and @xmath347 .",
    "we now use the calculations in section [ sec.fluid ] to evaluate all the @xmath246 coefficients . by ( [ eqn.meanidle ] ) we have @xmath350 @xmath351 therefore , @xmath352 we are left with @xmath353 define @xmath354 @xmath355 @xmath356 we have @xmath357 therefore , @xmath358 given @xmath253 converges in distribution as @xmath207 to the bivariate normal distribution as stated in ( [ eqn.clt ] ) .    when @xmath327 , and @xmath18 , similarly , @xmath359 we again write @xmath336 , with @xmath337 , @xmath338 .",
    "we then have @xmath360 we can now use the same approximation as for @xmath361 to show that @xmath133 converge to the same bivariate normal distribution .      take a fixed arbitrary @xmath362 .",
    "fix @xmath363 , for any @xmath333 satisfying @xmath364 , @xmath365 and @xmath366 , from ( [ eqn.piki ] ) , noting @xmath367 for any @xmath368 and @xmath369 , we have @xmath370 therefore , @xmath371 for fixed @xmath372 , @xmath373 note the above inequality is valid for any @xmath333 satisfying @xmath364 , @xmath365 , we have @xmath374 from theorem [ thm.fluidlimit ] , there exists an @xmath375 such that when @xmath376 , @xmath377 then we have , @xmath378 this upper bound can be arbitrarily close to 0 when choosing @xmath379 , @xmath376 and @xmath380 .",
    "therefore , we have shown the tightness of @xmath85 , that is @xmath381 using @xmath382 for fixed @xmath363 , when @xmath376 , the ratio @xmath383 is lower bounded by @xmath384 and upper bounded by @xmath385 for any @xmath333 satisfying @xmath364 , @xmath365 and @xmath366 , in addition to ( [ eq : upperbound ] ) , we have the lower bound @xmath386 now we have @xmath387.\\ ] ] therefore , @xmath388,\\ ] ] that is , @xmath389.\\ ] ] for fixed @xmath170 , as @xmath18 , the lower bound and the upper bound in ( [ eq : bounds ] ) both converge to @xmath390 .",
    "noting @xmath379 can be arbitrarily close to 0 , we have @xmath391 this together with the tightness ( [ eq : tightness ] ) proves ( [ eqn.limk ] ) .",
    "bell , s. l. , williams , r. j. ( 2001 ) .",
    "dynamic scheduling of a system with two parallel servers in heavy traffic with resource pooling : asymptotic optimality of a threshold policy . _",
    "the annals of applied probability _ , 11(3 ) , 608 - 649 .",
    "ghamami , s. , ward , a. r. ( 2013 ) .",
    "dynamic scheduling of a two - server parallel server system with complete resource pooling and reneging in heavy traffic : asymptotic optimality of a two - threshold policy .",
    "_ mathematics of operations research _ , 38(4 ) , 761 - 824 .",
    "pinsky , mark .",
    "the normal approximation to the hypergeometric distribution .",
    "unpublished manusript , https://www.dartmouth.edu/  chance / teaching_aids / books_articles / probability_book / pinsky - hypergeometric.pdf"
  ],
  "abstract_text": [
    "<S> the n - system with independent poisson arrivals and exponential server - dependent service times under first come first served and assign to longest idle server policy has explicit steady state distribution . </S>",
    "<S> we scale the arrival and the number of servers simultaneously , and obtain the fluid and central limit approximation for the steady state . </S>",
    "<S> this is the first step towards exploring the many server scaling limit behavior of general parallel service systems . </S>"
  ]
}