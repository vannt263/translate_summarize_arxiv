{
  "article_text": [
    "it is a well - known classical result of category theory that a functor is an equivalence ( that is , in the 2-category of categories ) if and only if it is fully faithful and essentially surjective .",
    "this fact is equivalent to the axiom of choice .",
    "it is therefore _ not _ true if one is working with categories internal to a category @xmath0 which does nt satisfy the ( external ) axiom of choice .",
    "this is may fail even in a category very much like the category of sets , such as a well - pointed boolean topos , or even the category of sets in constructive foundations . as internal categories are the objects of a 2-category @xmath1 we can talk about internal equivalences , and even fully faithful functors . in the case",
    "@xmath0 has a singleton pretopology @xmath2 ( i.e.  covering families consist of single maps ) we can define an analogue of essentially surjective functors . internal functors which are fully faithful and essentially surjective",
    "are called _ weak equivalences _ in the literature , going back to @xcite .",
    "we shall call them @xmath2-equivalences for clarity .",
    "we can recover the classical result mentioned above if we localise the 2-category @xmath1 at the class @xmath3 of @xmath2-equivalences .",
    "we are not just interested in localising @xmath1 , but various full sub-2-categories @xmath4 which arise in the study of presentable stacks , for example algebraic , topological , differentiable , etc .  stacks . as",
    "such it is necessary to ask for a compatibility condition between the pretopology on @xmath0 and the sub-2-category we are interested in .",
    "we call this condition existence of _ base change _ for covers of the pretoplogy , and demand that for any cover @xmath5 ( in @xmath0 ) of the object of objects of @xmath6 , there is a fully faithful functor in @xmath7 with object component @xmath8 .",
    "let @xmath0 be a category with singleton pretopology @xmath2 and let @xmath7 be a full sub-2-category of @xmath1 which admits base change along arrows in @xmath2 .",
    "then @xmath7 admits a calculus of fractions for the @xmath2-equivalences .",
    "pronk gives us the appropriate notion of a calculus of fractions for a 2-category in @xcite as a generalisation of the usual construction for categories @xcite . in her construction , 1-arrows are spans and 2-arrows are equivalence classes of bicategorical spans of spans .",
    "this construction , while canonical , can be a little unwieldy so we look for a simpler construction of the localisation .",
    "we find this in the notion of _ anafunctor _ , introduced by makkai for plain small categories @xcite ( kelly described them briefly in @xcite but did not develop the concept further ) . in his setting an anafunctor is a span of functors such that the left ( or source ) leg is a surjective - on - objects , fully faithful functor .",
    "for a general category @xmath0 with a _",
    "singleton pretopology @xmath2 @xcite , the analogon is a span with left leg a fully faithful functor with object component a cover .",
    "composition of anafunctors is given by composition of spans in the usual way , and there are 2-arrows between anafunctors ( a certain sort of span of spans ) that give us a bicategory @xmath9 with objects internal categories and 1-arrows anafunctors .",
    "we can also define the full sub - bicategory @xmath10 analogous to @xmath7 , and there is a strict inclusion 2-functor @xmath11 .",
    "this gives us our second main theorem .",
    "let @xmath0 be a category with subcanonical singleton pretopology @xmath2 and let @xmath7 be a full sub-2-category of @xmath1 which admits base change along arrows in @xmath2 , then @xmath11 is a localisation of @xmath7 at the class of @xmath2-equivalences .",
    "so far we havent mentioned the issue of size , which usually is important when constructing localisations .",
    "if the site @xmath12 is locally small , then @xmath7 is locally small , in the sense that the hom - categories are small .",
    "this also implies that @xmath13 and hence any @xmath14 $ ] has _ locally _ small hom - categories i.e.  has only a set of 2-arrows between any pair of 1-arrows . to prove that the localisation is locally essentially small ( that is , hom - categories are equivalent to small categories )",
    ", we need to assume a size restriction axiom on the pretopology @xmath2 , called wisc ( weakly initial sets of covers ) .    wisc can be seen as an extremely weak choice principle , weaker than the existence of enough projectives , and states that for every object @xmath15 of @xmath0 , there is a set of @xmath2-covers of @xmath15 which is cofinal in all @xmath2-covers of @xmath15 .",
    "it is automatically satisfied if the pretopology is specified as an assignment of a _ set _ of covers to each object .",
    "let @xmath0 be a category with subcanonical singleton pretopology @xmath2 satisfying wisc , and let @xmath7 be a full sub-2-category of @xmath1 which admits base change along arrows in @xmath2 .",
    "then any localisation of @xmath7 at the class of @xmath2-equivalences is locally essentially small .",
    "since a singleton pretopology can be conveniently defined as a certain wide subcategory , this is not a vacuous statement for large sites , such as @xmath16 or @xmath17 ( group objects in a topos @xmath18 ) .",
    "in fact wisc is independent of the zermelo - fraenkel axioms ( without choice ) @xcite .",
    "it is thus possible to have the theorem fail for the topos @xmath19 with surjections as covers .",
    "since there have been many very closely related approaches to localisation of 2-categories of internal categories and groupoids , we give a brief sketch in the following section .",
    "sections 3 to 6 of this article then give necessary background and notation on sites , internal categories , anafunctors and bicategories of fractions respectively .",
    "section 7 contains our main results , while section 8 shows examples from the literature that are covered by the theorems from section 7 . a short appendix detailing superextensive sites",
    "is included , as this material does not appear to be well - known ( they were discussed in the recent @xcite , example 11.12 ) .",
    "this article started out based on the first chapter of the author s phd thesis , which only dealt with groupoids in the site of topological spaces and open covers .",
    "many thanks are due to michael murray , mathai varghese and jim stasheff , supervisors to the author .",
    "the patrons of the @xmath20-category caf and @xmath20lab , especially mike shulman and toby bartels , provided helpful input and feedback .",
    "steve lack suggested a number of improvements , and the referee asked for a complete rewrite of this article , which has greatly improved the theorems , proofs , and hopefully also the exposition .",
    "any delays in publication are due entirely to the author .",
    "the theme of giving 2-categories of internal categories or groupoids more equivalences has been approached in several different ways over the decades .",
    "we sketch a few of them , without necessarily finding the original references , to give an idea of how widely the results of this paper apply . we give some more detailed examples of this applicability in section 8 .    perhaps the oldest related construction is the distributors of bnabou , also known as modules or profunctors @xcite ( see @xcite for a detailed treatment of internal profunctors , as the original article is difficult to source ) .",
    "bnabou pointed out @xcite , after a preprint of this article was released , that in the case of the category @xmath21 ( and more generally in a finitely complete site with reflexive coequalisers that are stable under pullback , see @xcite ) , the bicategory of small ( resp .",
    "internal ) categories with representable profunctors as 1-arrows is equivalent to the bicategory of small categories with anafunctors as 1-arrows .",
    "in fact this was discussed by baez and makkai @xcite , where the latter pointed out that representable profunctors correspond to _ saturated _ anafunctors in his setting .",
    "the author s preference for anafunctors lies in the fact they can be defined with weaker assumptions on the site @xmath12 , and in fact in the sequel @xcite , do not require the 2-category to have objects which are internal categories . in a sense this is analogous to @xcite , where the formal bicategorical approach to profunctors between objects of a bicategory is given , albeit still requiring more colimits to exist than anafunctors do .",
    "bnabou has pointed out in private communication that he has an unpublished distributor - like construction that does not rely on existence of reflexive coequalisers ; the author has not seen any details of this and is curious to see how it compares to anafunctors .    related to this is the original work of bunge and par @xcite , where they consider functors between indexed categories associated to internal categories , that is , the _ externalisation _ of an internal category and stack completions thereof .",
    "this was one motivation for considering weak equivalences in the first place , in that a pair of internal categories have equivalent stack completed externalisations if and only if they are connected by a span of internal functors which are weak equivalences .",
    "another approach is constructing bicategories of fractions  la pronk @xcite .",
    "this has been followed by a number of authors , usually followed up by an explicit construction of a localisation simplifying the canonical one .",
    "our work here sits at the more general end of this spectrum , as others have tailored their constructions to take advantage of the structure of the site they are interested in .",
    "for example , _ butterflies _",
    "( originally called papillons ) have been used for the category of groups @xcite , abelian categories @xcite and semiabelian categories @xcite .",
    "these are similar to the meromorphisms of @xcite , introduced in the context of the site of smooth manifolds ; though these only use a 1-categorical approach to localisation .",
    "vitale @xcite , after first showing that the 2-category of groupoids in a regular category has a bicategory of fractions , then shows that for protomodular regular categories one can generalise the pullback congruences of bnabou in @xcite to discuss bicategorical localisation .",
    "this approach can be applied to internal categories , as long as one restricts to invertible 2-arrows .",
    "similarly , @xcite give a construction of what they call _ fractors _ between internal groupoids in a maltsev category , and show that in an efficiently regular category ( e.g.  a barr - exact category ) fractors are 1-arrows in a localisation of the 2-category of internal groupoids .",
    "the proof also works for internal categories if one considers only invertible 2-arrows .",
    "other authors , in dealing with internal groupoids , have adopted the approach pioneered by hilsum and skandalis @xcite , which has gone by various names including hilsum - skandalis morphisms , morita morphisms , bimodules , bibundles , right principal bibundles and so on .",
    "all of these are very closely related to saturated anafunctors , but in fact no published definition of a saturated anafunctor in a site other than @xmath21 ( @xcite ) has appeared , except in the guise of internal profunctors ( e.g. @xcite , section b2.7 ) .",
    "note also that this approach has only been applied to internal groupoids . the review @xcite covers the case of lie groupoids , and in particular orbifolds , while @xcite treats bimodules between groupoids in the category of affine schemes , but from the point of view of hopf algebroids .    the link between localisation at weak equivalences and presentable stacks",
    "is considered in ( of course ) @xcite , as well as more recently in @xcite , @xcite , in the cases of topological and algebraic stacks respectively , and for example @xcite in the case of differentiable stacks .",
    "a third approach is by considering a model category structure on the 1-category of internal categories .",
    "this is considered in @xcite for categories in a topos , and in @xcite for categories in a finitely complete subcanonical site @xmath12 . in the latter case",
    "the authors show when it is possible to construct a quillen model category structure on @xmath1 where the weak equivalences are the weak equivalences from this paper .",
    "sufficient conditions on @xmath0 include being a topos with nno , being locally finitely presentable or being finitely complete regular maltsev  and additionally having enough @xmath2-projective objects .",
    "if one is willing to consider other model - category - like structures , then these assumptions can be dropped . the proof from @xcite",
    "can be adapted to show that for a finitely complete site @xmath12 , the category of groupoids with source and target maps restricted to be @xmath2-covers has the structure of a category of fibrant objects , with the same weak equivalences .",
    "we note that @xcite gives a quillen model structure for the category of orbifolds , which are there defined to be proper topological groupoids with discrete hom - spaces .    in a similar vein , one could consider a localisation using _ hammock _ localisation @xcite of a category of internal categories , which puts one squarely in the realm of @xmath22-categories . alternatively , one could work with the @xmath22-category arising from a 2-category of internal categories , functors and natural _ isomorphisms _ and consider a localisation of this as given in , say @xcite .",
    "however , to deal with general 2-categories of internal categories in this way , one needs to pass to @xmath23-categories to handle the non - invertible 2-arrows .",
    "the theory here is not so well - developed , however , and one could see the results of the current paper as giving toy examples with which one could work .",
    "this is one motivation for making sure the results shown in this paper apply to not just 2-categories of groupoids .",
    "another is extending the theory of presentable stacks from stacks of groupoids to stacks of categories @xcite .",
    "the idea of _ surjectivity _ is a necessary ingredient when talking about equivalences of categories  in the guise of just essential surjectivity  but it does nt generalise in a straightforward way from the category @xmath21",
    ". the necessary properties of the class of surjective maps are encoded in the definition of a grothendieck pretopology , in particular a singleton pretopology .",
    "this section gathers definitions and notations for later use .",
    "a _ grothendieck pretopology _ ( or simply _ pretopology _ ) on a category @xmath24 is a collection @xmath2 of families @xmath25 of morphisms for each object @xmath26 satisfying the following properties    1 .",
    "@xmath27 is in @xmath2 for every isomorphism @xmath28 .",
    "2 .   given a map @xmath29 , for every @xmath30 in @xmath2 the pullbacks @xmath31 exist and",
    "@xmath32 is in @xmath2 .",
    "3 .   for every @xmath30 in @xmath2 and for a collection @xmath33 from @xmath2 for each @xmath34 , the family of composites @xmath35 are in @xmath2 .",
    "families in @xmath2 are called _ covering families_. we call a category @xmath0 equipped with a pretopology @xmath2 a _ site _ , denoted @xmath12 ( note that often one sees a site defined as a category equipped with a grothendieck _ topology _ ) .",
    "the pretopology @xmath2 is called a _ singleton _",
    "pretopology if every covering family consists of a single arrow @xmath36 . in this case",
    "a covering family is called a _ cover _ and we call @xmath12 a _ unary _ site",
    ".    very often , one sees the definition of a pretopology as being an assignment of a _ set _ covering families to each object .",
    "we do not require this , as one can define a singleton pretopology as a subcategory with certain properties , and there is not necessarily then a set of covers for each object .",
    "one example is the category of groups with surjective homomorphisms as covers .",
    "this distinction will be important later .",
    "one thing we will require is that sites come with _",
    "specified _ pullbacks of covering families .",
    "if one does not mind applying the axiom of choice ( resp .  axiom of choice for classes ) then any small site ( resp .",
    "large site ) can be so equipped .",
    "but often sites that arise in practice have more or less canonical choices for pullbacks , such as the category of zf - sets .",
    "the prototypical example is the pretopology @xmath37 on @xmath16 , where a covering family is an open cover .",
    "the class of numerable open covers ( i.e.  those that admit a subordinate partition of unity @xcite ) also forms a pretopology on @xmath16 .",
    "much of traditional bundle theory is carried out using this site ; for example the milnor classifying space classifies bundles which are locally trivial over numerable covers .",
    "[ defn : effective_cov_fam ] a covering family @xmath38 is called _ effective _ if @xmath15 is the colimit of the following diagram : the objects are the @xmath39 and the pullbacks @xmath40 , and the arrows are the projections @xmath41 if the covering family consists of a single arrow @xmath36 , this is the same as saying @xmath42 is a regular epimorphism .",
    "a site is called _ subcanonical _ if every covering family is effective .    on @xmath16 , the usual pretopology @xmath37 of opens , the pretopology of numerable covers and that of open surjections are subcanonical .",
    "in a regular category , the class of regular epimorphisms forms a subcanonical singleton pretopology .",
    "in fact we can make the following definition .    for a category @xmath0 , the largest class of regular epimorphisms of which all pullbacks exist , and which is stable under pullback ,",
    "is called the _",
    "canonical singleton pretopology _ and denoted @xmath43 .",
    "this is a to be contrasted to the canonical _ topology _ on a category , which consists of covering sieves rather than covers .",
    "the canonical singleton pretopology is the largest subcanonical singleton pretopology on a category .",
    "[ defn : saturation ] let @xmath12 be a site .",
    "an arrow @xmath44 in @xmath0 is called a _ @xmath2-epimorphism _ if there is a covering family @xmath30 and a lift @xmath45 \\\\",
    "u_i \\ar@{-->}[ur ] \\ar[r ] & a         } \\ ] ] for every @xmath34 .",
    "a @xmath2-epimorphism is called _ universal _ if its pullback along an arbitrary map exists .",
    "we denote the singleton pretopology of universal @xmath2-epimorphisms by @xmath46 .",
    "this definition of @xmath2-epimorphism is equivalent to the definition in iii.7.5 in @xcite .",
    "the dotted maps in the above definition are called local sections , after the case of the usual open cover pretopology on @xmath16 .",
    "if @xmath2 is a singleton pretopology , it is clear that @xmath47 .",
    "the universal @xmath37-epimorphisms for the pretopology @xmath37 of open covers on @xmath48 form @xmath49 , the pretopology of surjective submersions .",
    "[ eg : split_epis ] in a finitely complete category the universal @xmath50-epimorphisms are the split epimorphisms , where @xmath50 is the _ trivial pretopology _ where all covering families consist of a single isomorphism . in @xmath21 with the axiom of choice there are all the epimorphisms .    note that for a finitely complete site @xmath12 , @xmath46 contains @xmath51 , hence all the split epimirphisms .",
    "although we will not assume that all sites we consider are finitely complete , results similar to ours have , and so in that case we can say a little more , given stronger properties on the pretopology .    a singleton pretopology @xmath2 is called _ saturated _ if whenever the composite @xmath52 is in @xmath2 , then @xmath53 .",
    "the concept of a saturated pretopology was introduced by bnabou under the name _ calibration _ @xcite .",
    "it follows from the definition that a saturated singleton pretopology contains the split epimorphisms ( take @xmath54 to be a section of the epimorphism @xmath55 )",
    ".    the canonical singleton pretopology @xmath43 in a regular category ( e.g.  a topos ) is saturated .",
    "given a pretopology @xmath2 on a finitely complete category , @xmath46 is saturated .",
    "sometimes a pretopology @xmath2 contains a smaller pretopology that still has enough covers to compute the same @xmath2-epimorphisms .",
    "if @xmath2 and @xmath56 are two singleton pretopologies with @xmath57 , such that @xmath58 , then @xmath2 is said to be _ cofinal _ in @xmath56 .    clearly @xmath2 is cofinal in @xmath46 for any singleton pretopology @xmath2",
    ".    if @xmath2 is cofinal in @xmath56 , then @xmath59 .",
    "we have the following lemma , which is essentially proved in @xcite , c2.1.6 .",
    "[ subcanonical_goes_up_cofinal ] if a pretopology @xmath2 is subcanonical , then so any pretopology in which it is cofinal",
    ". in particular , @xmath2 subcanonical implies @xmath46 subcanonical .",
    "as mentioned earlier , one may be given a singleton pretopology such that each object has more than a set s worth of covers .",
    "if such a pretopology contains a cofinal pretopology with set - many covers for each object , then we can pass to the smaller pretopology and recover the same results ( in a way that will be made precise later ) .",
    "in fact , we can get away with something weaker : one could ask only that the category of all covers of an object ( see definition [ cover_slice ] below ) has a set of weakly initial objects , and such set may not form a pretopology .",
    "this is the content of the axiom wisc below .",
    "we first give some more precise definitions .",
    "a category @xmath7 has a _ weakly initial set _ @xmath60 of objects if for every object @xmath15 of @xmath7 there is an arrow @xmath61 from some object @xmath62 .",
    "for example the large category @xmath63 of fields has a weakly initial set , consisting of the prime fields @xmath64 .",
    "to contrast , the category of sets with surjections for arrows does nt have a weakly initial set of objects .",
    "every small category has a weakly initial set , namely its set of objects .",
    "we pause only to remark that the statement of the adjoint functor theorem can be expressed in terms of weakly initial sets .",
    "[ cover_slice ] let @xmath12 be a site .",
    "for any object @xmath15 , the _ category of covers of @xmath15 _ , denoted @xmath65 has as objects the covering families @xmath30 and as morphisms @xmath66 tuples consisting of a function @xmath67 and arrows @xmath68 in @xmath69 .",
    "when @xmath2 is a singleton pretopology this is simply a full subcategory of @xmath69 .",
    "we now define the axiom wisc ( weakly initial set of covers ) , due independently to mike shulman and thomas streicher .",
    "a site @xmath12 is said to _",
    "satisfy wisc _ if for every object @xmath15 of @xmath0 , the category @xmath65 has a weakly initial set of objects .",
    "a site satisfying wisc is in some sense constrained by a small amount of data for each object .",
    "any small site satisfies wisc , for example , the usual site of finite - dimensional smooth manifolds and open covers . any pretopology @xmath2 containing a cofinal pretopology @xmath56 such that @xmath70 is small for every object @xmath15 satisfies wisc .    any regular category ( for example a topos ) with enough projectives , equipped with the canonical singleton pretopology , satisfies wisc . in the case of @xmath21 ` enough projectives ' is the presentation axiom ( pax ) , studied , for instance , by aczel @xcite in the context of constructive set theory .",
    "@xmath71 satisfies wisc , using ac in @xmath21 .",
    "choice may be more than is necessary here ; it would be interesting to see if weaker choice principles in the site @xmath72 are enough to prove wisc for @xmath71 or other concrete sites .",
    "if @xmath12 satisfies wisc , then so does @xmath73 .",
    "it is instructive to consider an example where wisc fails in a non - artificial way .",
    "the category of sets and surjections with all arrows covers clearly does nt satisfy wisc , but is contrived and not a ` useful ' sort of category .",
    "for the moment , assume the existence of a grothendieck universe @xmath74 with cardinality @xmath75 , and let @xmath76 refer to the category of @xmath74-small sets .",
    "clearly we can define wisc relative to @xmath74 , call it wisc@xmath77 .",
    "let @xmath78 be a @xmath74-large group and @xmath79 the @xmath74-large groupoid with one object associated to @xmath78 .",
    "the boolean topos @xmath80 of @xmath74-small @xmath78-sets is a unary site with the class @xmath81 of epimorphisms for covers .",
    "one could consider this topos as being an exotic sort of forcing construction .",
    "[ u - small_g - sets ] if @xmath78 has at least @xmath75-many conjugacy classes of subgroups , then @xmath82 does not satisfy wisc@xmath77 .",
    "alternatively , one could work in foundations where it is legitimate to discuss a proper class - sized group , and then consider the topos of sets with an action by this group .",
    "if there is a proper class of conjugacy classes of subgroups , then this topos with its canonical singleton pretopology will fail to satisfy wisc .",
    "simple examples of such groups are @xmath83 ( given a universe @xmath74 ) and @xmath84 ( for some proper class @xmath56 ) .",
    "recently , @xcite ( relative to a large cardinal axiom ) and @xcite ( with no large cardinals ) have shown that the category of sets may fail to satisfy wisc .",
    "the models constructed in @xcite are also conjectured to not satisfy wisc .    perhaps of independent interest",
    "is a form of wisc with a bound : the weakly initial set for each category @xmath65 has cardinality less than some cardinal @xmath85 ( call this wisc@xmath86 )",
    ". then one could consider , for example , sites where each object has a weakly initial finite or countable set of covers .",
    "note that the condition ` enough projectives ' is the case @xmath87 .",
    "internal categories were introduced in @xcite , starting with differentiable and topological categories ( i.e. internal to @xmath48 and @xmath16 respectively ) .",
    "we collect here the necessary definitions , terminology and notation . for a thorough recent account , see @xcite or the encyclopedic @xcite .",
    "fix a category @xmath0 , referred to as the _ ambient category_.    [ def : cat ] an _ internal category _",
    "@xmath88 in a category @xmath0 is a diagram @xmath89 in @xmath0 such that the _ multiplication _ @xmath90 is associative ( we demand the limits in the diagram exist ) , the _ unit map _",
    "@xmath91 is a two - sided unit for @xmath90 and @xmath92 and @xmath93 are the usual _ source _ and _ target_. an _ internal groupoid _ is an internal category with an involution @xmath94 satisfying the usual diagrams for an inverse .",
    "since multiplication is associative , there is a well - defined map @xmath95 , which will also be denoted by @xmath90 .",
    "the pullback in the diagram in definition [ def : cat ] is @xmath96 \\ar[d ] & x_1 \\ar[d]^-{s}\\\\                 x_1 \\ar[r]_-{t } & x_0\\;.         } \\ ] ] and the double pullback is the limit of @xmath97 .",
    "these , and pullbacks like these ( where source is pulled back along target ) , will occur often . if confusion can arise , the maps in question will be explicity written , as in @xmath98 .",
    "one usually sees the requirement that @xmath0 is finitely complete in order to define internal categories .",
    "this is not strictly necessary , and not true in the well - studied case of @xmath99 , the category of smooth manifolds .",
    "often an internal category will be denoted @xmath100 , the arrows @xmath101 ( and @xmath102 ) will be referred to as _ structure maps _ and @xmath103 and @xmath104 called the object of arrows and the object of objects respectively . for example , if @xmath105 , we have the space of arrows and the space of objects , for @xmath106 we have the group of arrows and so on .",
    "[ eg : cech_gpd ] if @xmath107 is an arrow in @xmath0 admitting iterated kernel pairs , there is an internal groupoid @xmath108 with @xmath109 , @xmath110 , source and target are projection on first and second factor , and the multiplication is projecting out the middle factor in @xmath111 .",
    "this groupoid is called the _ ech groupoid _ of the map @xmath107 .",
    "the origin of the name is that in @xmath16 , for maps of the form @xmath112 ( arising from an open cover ) , the ech groupoid @xmath113 appears in the definition of ech cohomology .",
    "[ eg : disc - codisc_gpd ] let @xmath0 be a category with binary products .",
    "for each object @xmath26 there is an internal groupoid @xmath114 which has @xmath115 and all structure maps equal to @xmath116 .",
    "such a category is called _",
    "discrete_. there is also an internal groupoid @xmath117 with @xmath118 and where source and target are projections on the first and second factor respectively .",
    "such a groupoid is called",
    "_ codiscrete_.    [ def : functor ] given internal categories @xmath88 and @xmath119 in @xmath0 , an _ internal functor _ is a pair of maps @xmath120 called the object and arrow component respectively .",
    "both components are required to commute with all the structure maps .",
    "if @xmath121 and @xmath122 are maps admitting iterated kernel pairs , and @xmath123 is a map over @xmath7 , there is a functor @xmath124 .",
    "[ functors2discrete ] if @xmath12 is a subcanonical unary site , and @xmath42 is a cover , a functor @xmath125 gives a unique arrow @xmath126 .",
    "this follows immediately from the fact @xmath15 is the colimit of the diagram underlying @xmath127 .",
    "[ def : nat_iso ] given internal categories @xmath128 and internal functors @xmath129 , an _ internal natural transformation _ ( or simply _ transformation _ ) @xmath130 is a map @xmath131 such that @xmath132 and the following diagram commutes @xmath133 ^ -{(g_1,a\\circ s ) } \\ar[d]_{(a \\circ t , f_1 ) } &                 y_1 \\times_{y_0 } y_1 \\ar[d]^{m } \\\\                 y_1 \\times_{y_0 } y_1 \\ar[r]^-{m } & y_1         } \\ ] ] expressing the naturality of @xmath134 .",
    "internal categories ( resp .",
    "groupoids ) , functors and transformations in a locally small category @xmath0 form a locally small 2-category @xmath1 ( resp .",
    "@xmath135 ) @xcite .",
    "there is clearly an inclusion 2-functor @xmath136 .",
    "also , @xmath137 and @xmath138 , described in example [ eg : disc - codisc_gpd ] , are 2-functors @xmath139 , whose underlying functors are left and right adjoint to the functor @xmath140 here @xmath141 is the 1-category underlying the 2-category @xmath1 .",
    "hence for an internal category @xmath88 in @xmath0 , there are functors @xmath142 and @xmath143 , the arrow component of the latter being @xmath144 .",
    "we say a natural transformation is a _ natural isomorphism _ if it has an inverse with respect to vertical composition .",
    "clearly there is no distinction between natural transformations and natural isomorphisms when the codomain of the functors is an internal groupoid .",
    "we can reformulate the naturality diagram ( [ diag : naturality ] ) in the case that @xmath134 is a natural isomorphism .",
    "denote by @xmath145 the inverse of @xmath134 .",
    "then the diagram ( [ diag : naturality ] ) commutes if and only if the diagram @xmath146^{-a\\times f_1 \\times a }               \\ar[d]_{\\simeq } & & y_1 \\times_{y_0 } y_1 \\times_{y_0 } y_1 \\ar[d]^m \\\\",
    "x_1 \\ar[rr]_{g_1 } & & y_1         } \\ ] ] commutes , a fact we will use several times .    if @xmath88 is a category in @xmath0 , @xmath15 is an object of @xmath0 and @xmath147 are functors , there is a unique natural isomorphism @xmath148 .",
    "an _ internal _ or _ strong equivalence _ of internal categories is an equivalence in the 2-category of internal categories .",
    "that is , an internal functor @xmath149 such that there is a functor @xmath150 and natural isomorphisms @xmath151 , @xmath152 .",
    "[ induced_cat ] for an internal category @xmath88 and a map @xmath153 in @xmath0 the _ base change of @xmath88 along @xmath8 _ is any category @xmath154 $ ] with object of objects @xmath155 and object of arrows given by the pullback @xmath156 \\ar[d ]   & x_1 \\ar[d]^{(s , t ) } \\\\",
    "m^2 \\ar[r]_{p^2 } & x_0 ^ 2         } \\ ] ]    if @xmath157 denotes a full sub-2-category and if the base change along any map in a given class @xmath56 of maps exists in @xmath7 for all objects of @xmath7 , then we say @xmath7 _ admits base change along maps in @xmath56 _ , or simply _ admits base change for @xmath56_.    in all that follows , ` category ' will mean object of @xmath7 and similarly for ` functor ' and ` natural transformation / isomorphism ' .",
    "the strict pullback of internal categories @xmath158 \\ar[d ] & z \\ar[d ] \\\\                 x \\ar[r ] & y         } \\ ] ] when it exists , is the internal category with objects @xmath159 , arrows @xmath160 , and all structure maps given componentwise by those of @xmath88 and @xmath161",
    ". often we will be able to prove that certain pullbacks exist because of conditions on various component maps in @xmath0 .",
    "we do not assume that all strict pullbacks of internal categories exists in our chosen @xmath7 .",
    "it follows immediately from definition [ induced_cat ] that given maps @xmath162 and @xmath163 , there is a canonical isomorphism @xmath164[n ] \\simeq x[n].\\ ] ] with object component the identity map , when these base changes exist .    [",
    "remark : pullback_of_x_along_x ] if we agree to follow the convention that @xmath165 is the pullback along the identity arrow @xmath166 , then @xmath167 = x$ ] .",
    "this also simplifies other results of this paper , so will be adopted from now on .",
    "one consequence of this assumption is that the iterated fibre product @xmath168 bracketed in any order , is _ equal _ to @xmath155 .",
    "we can not , however , equate two bracketings of a general iterated fibred product ; they are only canonically isomorphic .",
    "[ strict_pullbacks_triv_j_fibrations ] let @xmath169 be a functor in @xmath0 and @xmath170 a map .",
    "if the base change along @xmath171 exists , the following square is a strict pullback @xmath172 \\ar[r ] \\ar[d ] & x[u ] \\ar[d]^j \\\\                 y \\ar[r ] & x         } \\ ] ] assuming it exists .",
    "since base change along @xmath171 exists , we know that we have the functor @xmath173 \\to y$ ] , we just need to show it is a strict pullback of @xmath174 . on the level of objects",
    "this is clear , and on the level of arrows , we have @xmath175_1\\times_{x_1}y_1\\end{aligned}\\ ] ] so the square is a pullback .",
    "we are interested in 2-categories @xmath7 which admits base change for a given pretopology @xmath2 on @xmath0 , which we shall cover in more detail in section [ examples ] .",
    "equivalences in @xmath176assuming the axiom of choice  are precisely the fully faithful , essentially surjective functors . for internal categories , however , this is not the case .",
    "in addition , we need to make use of a pretopology to make the ` surjective ' part of ` essentially surjective ' meaningful .",
    "[ def : weak_equiv ] let @xmath12 be a unary site .",
    "an internal functor @xmath177 in @xmath0 is called    1 .   _ fully faithful _ if @xmath178^{f_1 } \\ar[d]_{(s , t ) } & y_1 \\ar[d]^{(s , t)}\\\\                         x_0 \\times x_0 \\ar[r]_{f_0 \\times f_0 } & y_0 \\times y_0                 } \\ ] ] is a pullback diagram ; 2 .   _ @xmath2-locally split _ if there is a @xmath2-cover @xmath179 and a diagram @xmath180 \\ar[d]_{\\bar f } \\ar@/^.5pc/[dr]_{\\ } = \" s1\"^{u } & \\\\          x\\ar[r]_{f}^(.33){\\ } = \" t1\"&y           \\ar@{=>}\"s1\";\"t1 \"      } \\ ] ] commuting up to a natural isomorphism ; 3 .   a",
    "@xmath2-equivalence _ if it is fully faithful and @xmath2-locally split",
    ".    the class of @xmath2-equivalences will be denoted @xmath3 .",
    "if mention of @xmath2 is suppressed , they will be called _",
    "weak equivalences_.    there is another defintion of full faithfulness for internal categories , namely that of a functor @xmath181 being _ representably fully faithful_. this means that for all categories @xmath161 , the functor @xmath182 is fully faithful .",
    "it is a well - known result that these two notions coincide , so we shall use either characterisation as needed .",
    "if @xmath177 is a fully faithful functor such that @xmath183 is in @xmath2 , then @xmath184 is @xmath2-locally split .    that is",
    ", the canonical functor @xmath185 \\to x$ ] is a @xmath2-equivalence whenever the base change exists .",
    "also , we do not require that @xmath2 is subcanonical .",
    "we record here a useful lemma .",
    "[ rep_ff_functors_closed_under_iso ] given a fully faithful functor @xmath186 in @xmath7 and a natural isomorphism @xmath187 , the functor @xmath55 is also fully faithful . in particular ,",
    "an internal equivalence is fully faithful .",
    "this is a simple application of the definition of representable full faithfulness and the fact that the result is true in @xmath176 .    the first definition of weak equivalence of internal categories along the lines we are considering appeared in @xcite for @xmath0 a regular category , and @xmath2 the class of regular epimorphisms ( i.e.  @xmath43 ) , in the context of stacks and indexed categories .",
    "this was later generalised in @xcite to more general finitely complete sites to discuss model structures on the category of internal categories .",
    "both work only with saturated singleton pretopologies .",
    "note that when @xmath0 is finitely complete , the object @xmath188 of isomorphisms of a category @xmath88 can be constructed as a finite limit @xcite , and in the case when @xmath88 is a groupoid we have @xmath189 .",
    "@xcite[def : pb_weak_equiv ] for a finitely complete unary site @xmath12 with @xmath2 saturated , a functor @xmath184 is called _ essentially @xmath2-surjective _ if the arrow labelled @xmath190 below is in @xmath2 .",
    "@xmath191 x_0 \\times_{y_0 } y_1^{iso } \\ar@/^1pc/[ddr]^\\circledast \\ar[d]&\\\\                         x_0 \\ar[d]_{f_0 } & \\ar[dl]^s y_1^{iso } \\ar[dr]_t   & \\\\",
    "y_0 & & y_0                 } \\ ] ] a functor is called a _ bunge - par @xmath2-equivalence _ if it is fully faithful and essentially @xmath2-surjective .",
    "denote the class of such maps by @xmath192 .    definition [ def : weak_equiv ] is equivalent to the one in @xcite in the sites they consider but seems more appropriate for sites without all finite limits .",
    "also , definition [ def : weak_equiv ] makes sense in 2-categories other than @xmath1 or sub-2-categories thereof .",
    "[ bp_equiv_iff_weak_equiv ] let @xmath12 be a finitely complete unary site with @xmath2 saturated .",
    "then a functor is a @xmath2-equivalence if and only if it is a bunge - par @xmath2-equivalence .",
    "let @xmath186 be a bunge - par @xmath2-equivalence , and consider the @xmath2-cover given by the map @xmath193 .",
    "denote by @xmath194 the projection on the second factor , by @xmath195 the composite of @xmath196 with the inversion map @xmath102 and by @xmath197 the projection on the first factor .",
    "the arrow @xmath198 will be the object component of a functor @xmath199 \\to x$ ] , we need to define the arrow component @xmath200 .",
    "consider the composite @xmath201_1 \\simeq u\\times_{y_0 } y_1 \\times_{y_0 } u \\xrightarrow{(s,\\iota)\\times\\id\\times(-\\iota , s ) }          ( x_0 \\times_{y_0 } y_1^{iso } ) \\times_{y_0 } y_1 \\times_{y_0 } ( y_1^{iso } \\times_{y_0 } x_0 ) \\\\      \\hookrightarrow x_0 \\times_{y_0 } y_3 \\times_{y_0 } x_0 \\xrightarrow{\\id\\times m\\times\\id }           x_0 \\times_{y_0 } y_1 \\times_{y_0 } x_0 \\simeq x_1\\end{aligned}\\ ] ] where the last isomorphism arises from @xmath184 being fully faithful .",
    "it is clear that this commutes with source and target , because these are given by projection on the first and last factor at each step . to see that it respects identities and composition",
    ", one can use generalised elements and the fact that the @xmath196 component will cancel with the @xmath202 component .",
    "we define the natural isomorphism @xmath203 ( here @xmath204 \\to y$ ] is the canonical functor ) to have component @xmath196 as denoted above .",
    "notice that the composite @xmath205 is just @xmath206_1 \\simeq u \\times_{y_0 } y_1 \\times_{y_0 }",
    "u \\xrightarrow{\\iota\\times\\id \\times -\\iota }   y_1^{iso } \\times_{y_0 } y_1 \\times_{y_0 }   y_1^{iso }   \\hookrightarrow         y_3   \\xrightarrow{m } y_1.\\ ] ] since the arrow component of @xmath207 \\to y$ ] is @xmath208 , @xmath196 is indeed a natural isomorphism using the diagram ( [ naturality ] ) .",
    "thus a bunge - par @xmath2-equivalence is a @xmath2-equivalence .    in the other direction ,",
    "given a @xmath2-equivalence @xmath209 , we have a @xmath2-cover @xmath210 and a map @xmath211 such that @xmath212 .",
    "since @xmath2 is saturated , @xmath213 and hence @xmath184 is a buge - par @xmath2-equivalence .",
    "we can thus use definition [ def : weak_equiv ] as we like , and it will still refer to the same sorts of weak equivalences that appear in the literature .",
    "we now let @xmath2 be a _ subcanonical _ singleton pretopology on the ambient category @xmath0 . in this section",
    "we assume that @xmath214 admits base change along arrows in the given pretopology @xmath2 .",
    "this is a slight generalisation of what is considered in @xcite , where only @xmath215 is considered .",
    "@xcite[def : anafunctor ] an _ anafunctor _ in @xmath12 from a category @xmath88 to a category @xmath119 consists of a @xmath2-cover @xmath216 and an internal functor @xmath217 \\to y.\\ ] ] since @xmath185 $ ] is an object of @xmath7 , an anafunctor is a span in @xmath7 , and can be denoted @xmath218    [ eg : ordinary_functor ] for an internal functor @xmath186 in @xmath0 , define the anafunctor @xmath219 as the following span @xmath220   \\xrightarrow{f } y.\\ ] ] we will blur the distinction between these two descriptions . if @xmath221 , then @xmath222 will be denoted simply by @xmath223 .",
    "if @xmath42 is a cover in @xmath12 and @xmath79 is a groupoid with one object in @xmath0 ( i.e. a group in @xmath0 ) , an anafunctor @xmath224 is the same thing as a ech cocycle .",
    "@xcite let @xmath12 be a site and let @xmath225 be anafunctors in @xmath0 .",
    "a _ transformation _",
    "@xmath226 from @xmath227 to @xmath228 is a natural transformation @xmath229 x[u\\times_{x_0}v ]   \\ar[dr ] & \\\\",
    "x[u ] \\ar[dr]_f & \\stackrel{\\alpha}{\\rightarrow } & x[v ] \\ar[dl]^g\\\\                 & y &         } \\ ] ] if @xmath230 is a natural isomorphism , then @xmath230 will be called an _ isotransformation_. in that case we say @xmath227 is isomorphic to @xmath228 . clearly all transformations between anafunctors between internal groupoids are isotransformations .",
    "[ eg : ordinary_transf ] given functors @xmath129 between categories in @xmath0 , and a natural transformation @xmath231 , there is a transformation @xmath232 of anafunctors , given by the component @xmath233 .    if @xmath234 are two ech cocycles , a transformation between them is a coboundary on the cover @xmath235 .",
    "let @xmath236 be an anafunctor in @xmath0 .",
    "there is an isotransformation @xmath237 called the _ identity transformation _ , given by the natural transformation with component @xmath238_1 \\xrightarrow{f_1 } y_1\\ ] ]    @xcite[renaming_transf ] given anafunctors @xmath239 and @xmath240 where @xmath241 is a cover ( over @xmath104 ) , a _ renaming transformation _",
    "@xmath242 is an isotransformation with component @xmath243 ( we also call its inverse for vertical composition a renaming transformation . )",
    "if @xmath244 is an isomorphism , then it will itself be referred to as a _ renaming isomorphism_.    we define ( following @xcite ) the composition of anafunctors as follows .",
    "let @xmath245 be anafunctors in the site @xmath12 .",
    "their composite @xmath246 is the composite span defined in the usual way .",
    "it is again a span in @xmath7 : @xmath247 x[u\\times_{y_0}v ]   \\ar[dr]^{f^v } & \\\\                 & \\ar[dl]x[u ] \\ar[dr]_f &   & y[v ] \\ar[dl ] \\ar[dr]^g\\\\                 x & & y & & z         } \\ ] ] the square is a pullback by lemma [ strict_pullbacks_triv_j_fibrations ] ( which exists because @xmath248 is a cover ) , and the resulting span is an anafunctor because @xmath249 , hence @xmath250 , are covers , and using the isomorphism ( [ induced_cat_1 ] ) .",
    "we will sometimes denote the composite by @xmath251 .",
    "here we are using the fact we have specified pullbacks of covers in @xmath0 . without this we would not end up with a bicategory ( see theorem [ anafunctors_are_a_bicat ] ) , but what @xcite calls an _",
    "anabicategory_. this is similar to a bicategory , but composition and other structural maps are only anafunctors , not functors .",
    "consider the special case when @xmath252 , so that @xmath253 is just an ordinary functor .",
    "then there is a renaming transformation ( the identity transformation ! ) @xmath254 , using the equality @xmath255 ( by remark [ remark : pullback_of_x_along_x ] ) .",
    "if we let @xmath256 , then we see that @xmath257 is a strict unit on the left for anafunctor composition .",
    "similarly , considering @xmath258 , we see that @xmath257 is a two - sided strict unit for anafunctor composition .",
    "in fact , we have also proved    [ coherent_composition ] given two functors @xmath209 , @xmath259 in @xmath0 , their composition as anafunctors is equal to their composition as functors : @xmath260    as a concrete and relevant example of a renaming transformation we can consider the triple composition of anafunctors @xmath261 the two possibilities of composing these are @xmath262    [ lemma : associator ] the unique isomorphism @xmath263 commuting with the various projections is a renaming isomorphism .",
    "the isotransformation arising from this renaming transformation is called the _ associator_.    a simple but useful criterion for describing isotransformations where one of the anafunctors involved is a functor is as follows .    [ anafun_iso2_fun ]",
    "an anafunctor @xmath264 is isomorphic to a functor @xmath265 if and only if there is a natural isomorphism @xmath229 x[v ] \\ar[dr]^g \\\\                 x \\ar@/_1.5pc/[rr]_(.6){f } & \\stackrel{\\sim}{\\rightarrow } & y         } \\ ] ]    just as there is a vertical composition of natural transformations between internal functors , there is a vertical composition of transformations between internal anafunctors @xcite .",
    "this is where the subcanonicity of @xmath2 will be used in order to construct a map locally over some cover .",
    "consider the following diagram @xmath247 x[u\\times_{x_0 } v\\times_{x_0 } w ]   \\ar[dr]\\\\                 &         \\ar[dl ] x[u\\times_{x_0 } v ] \\ar[dr ]    &                 & \\ar[dl ] x[v\\times_{x_0 } w ] \\ar[dr]\\\\                 x[u ] \\ar[drr]_f & \\stackrel{a}{\\rightarrow } & x[v ] \\ar[d]^g &   \\stackrel{b } { \\rightarrow } & x[w ] \\ar[dll]^h \\\\                 & & y & &         } \\ ] ] we can form a natural transformation between the leftmost and the rightmost composites as functors in @xmath0 .",
    "this will have as its component the arrow @xmath266 in @xmath0 .",
    "notice that the ech groupoid of the cover @xmath267 is @xmath268 with source and target arising from the two projections @xmath269 .",
    "denote this pair of parallel arrows by @xmath270 for brevity . in @xcite ,",
    "section 2.2.3 , we find the commuting diagram @xmath271^t \\ar[d]_s & uvw \\ar[d]^{\\widetilde{ba}}\\\\                 uvw \\ar[r]_{\\widetilde{ba } } & y_1         } \\ ] ] ( this can be checked by using generalised elements ) and so we have a functor @xmath272 our pretopology @xmath2 is assumed to be subcanonical , so example [ functors2discrete ] gives us a unique arrow @xmath273 , which is the data for the composite of @xmath134 and @xmath274 .",
    "in the special case that @xmath275 is split ( e.g. is an isomorphism ) , the composite transformation has @xmath276 as its component arrow . in particular , this is the case if one of @xmath134 or @xmath274 is a renaming transformation .",
    "[ eg : transf_compose2 ] let @xmath277 be an anafunctor and @xmath278 successive refinements of @xmath279 ( e.g isomorphisms ) .",
    "let @xmath280 and @xmath281 denote the composites of @xmath184 with @xmath282 \\to x[u]$ ] and @xmath283 \\to x[u]$ ] respectively .",
    "the arrow @xmath284 is the component for the composition of the isotransformations @xmath285 described in example [ renaming_transf ] .",
    "thus we can see that the composite of renaming transformations associated to isomorphisms @xmath286 is simply the renaming transformation associated to their composite @xmath287 .",
    "this can be used to show that the associator satisfies the necessary coherence conditions .",
    "[ eg : transf_compose1 ] if @xmath288 are natural transformations between functors @xmath289 in @xmath0 , their composite as transformations between anafunctors @xmath290 is just their composite as natural transformations .",
    "this uses the equality @xmath291 which is due to our choice in remark [ remark : pullback_of_x_along_x ] of canonical pullbacks .    even though we do nt have pseudoinverses for weak equivalences of internal categories",
    ", one might guess that the local splitting guaranteed to exist by definition is actually more than just a splitting of sorts .",
    "this is in fact the case , if we use anafunctors .",
    "[ anafunctors - r - inverses ] let @xmath186 be a @xmath2-equivalence in @xmath0 .",
    "there is an anafunctor @xmath292 and isotransformations @xmath293    we have the anafunctor @xmath294 by definition as @xmath184 is @xmath2-locally split .",
    "since the anafunctors @xmath295 are actually functors , we can use lemma [ anafun_iso2_fun ] . using the special case of anafunctor composition when the second is a functor ,",
    "this tells us that @xmath196 will be given by a natural isomorphism @xmath296^{f}_(0.2){\\ } = \" s \" & \\\\",
    "y[u ] \\ar[rr]^{\\ } = \" t \" \\ar[ur]^{\\bar{f } } & & y                  \\ar@{=>}\"s\";\"t \"         } \\ ] ] with component @xmath297 .",
    "notice that the composite @xmath298 is just @xmath206_1 \\simeq u \\times_{y_0 } y_1 \\times_{y_0 } u \\xrightarrow{\\iota\\times\\id \\times -\\iota }   y_1 \\times_{y_0 } y_1 \\times_{y_0 }   y_1   \\hookrightarrow         y_3   \\xrightarrow{m } y_1.\\ ] ] since the arrow component of @xmath207 \\to y$ ] is @xmath208 , @xmath196 is indeed a natural isomorphism using the diagram ( [ naturality ] ) .",
    "the other isotransformation @xmath299 is between @xmath300 and @xmath301 , and is given by the component @xmath302 the diagram @xmath303_\\simeq \\ar[rr]^{\\pr_2 } & & x_1 \\ar[dd]^\\simeq\\\\                 u \\times_{y_0 } x_1 \\times_{y_0}u \\ar[d]_{-\\iota\\times f\\times\\iota } & \\\\                 ( x_0 \\times_{y_0 } y_1 ) \\times_{y_0 } y_1 \\times_{y_0 } ( y_1 \\times_{y_0 } x_0 )                  \\ar[rr]_(.6){\\id\\times m \\times \\id }                 & & x_0\\times_{y_0 } y_1 \\times_{y_0 } x_0         } \\ ] ] commutes ( a fact which can be checked using generalised elements ) , and using ( [ naturality ] ) we see that @xmath299 is natural .    the first half of the following theorem is proposition 12 in @xcite , and the second half follows because all the constructions of categories involved in dealing with anafunctors outlined above are still objects of @xmath7 .",
    "@xcite[anafunctors_are_a_bicat ] for a site @xmath12 where @xmath2 is a subcanonical singleton pretopology , internal categories , anafunctors and transformations form a bicategory @xmath9 .",
    "if we restrict attention to a full sub-2-category @xmath7 which admits base change for arrows in @xmath2 , we have an analogous full sub - bicategory @xmath13 .",
    "in fact the bicategory @xmath304 fails to be a strict 2-category only in the sense that the associator is given by the non - identity isotransformation from lemma [ lemma : associator ] .",
    "all the other structure is strict .",
    "there is a strict 2-functor @xmath305 which is an inclusion on objects and fully faithful in the strictest sense , namely being the identity functor on hom - categories .",
    "the following is the main result of this section , and allows us to relate anafunctors to the localisations considered in the next section .",
    "[ w - inverting_alpha ] there is a strict , identity - on - objects 2-functor @xmath306 sending @xmath2-equivalences to equivalences , and commuting with the respective inclusions into @xmath1 and @xmath9 .",
    "we define @xmath307 to be the identity on objects , and as described in examples [ eg : ordinary_functor ] , [ eg : ordinary_transf ] on 1-arrows and 2-arrows ( i.e. functors and transformations ) . we need first to show that this gives a functor @xmath308 .",
    "this is precisely the content of example [ eg : transf_compose1 ] . since the identity 1-cell on a category @xmath88 in @xmath13 is the image of the identity functor on @xmath0 in @xmath7 , @xmath307 respects identity 1-cells",
    "also , lemma [ coherent_composition ] tells us that @xmath309 respects composition .",
    "that @xmath307 sends @xmath2-equivalences to equivalences is the content of lemma [ anafunctors - r - inverses ] .",
    "the 2-category @xmath7 is locally small ( i.e.  enriched in small categories ) if @xmath0 itself is locally small ( i.e.  enriched in sets ) , but _ a priori _ the collection of anafunctors @xmath310 do not constitute a set for @xmath0 a large category .",
    "let @xmath12 be a locally small , subcanonical unary site satisfying wisc and let @xmath7 admit base change along arrows in @xmath2 . then @xmath13 is locally essentially small .    given an object @xmath15 of @xmath0 , let @xmath311 be a weakly initial set for @xmath65 .",
    "consider the locally full sub-2-category of @xmath13 with the same objects , and arrows those anafunctors @xmath312 such that @xmath279 is in @xmath313 .",
    "every anafunctor is then isomorphic , by example [ renaming_transf ] , to one in this sub-2-category . the collection of anafunctors @xmath312 for a fixed @xmath314 forms a set , by local smallness of @xmath7 , and similarly the collection of transformations between a pair of anafunctors forms a set by local smallness of @xmath0 .",
    "examples of locally small sites @xmath12 where @xmath13 is not known to be locally essentially small are the category of sets from the model of zf used in @xcite , the model of zf constructed in @xcite and the topos from proposition [ u - small_g - sets ] .",
    "we note that local essential smallness of @xmath13 seems to be a condition just slightly weaker than wisc .",
    "ultimately we are interesting in inverting all @xmath2-equivalences in @xmath7 and so need to discuss what it means to add the formal pseudoinverses to a class of 1-cells in a 2-category  a process known as _",
    "localisation_. this was done in @xcite for the more general case of a class of 1-cells in a bicategory , where the resulting bicategory is constructed and its universal properties examined .",
    "the application in _ loc .",
    "_  is to show the equivalence of various bicategories of stacks to localisations of 2-categories of smooth , topological and algebraic groupoids .",
    "the results of this article can be seen as one - half of a generalisation of these results to more general sites .",
    "@xcite let @xmath315 be a bicategory and @xmath316 a class of 1-cells .",
    "localisation of @xmath315 with respect to @xmath317 _ is a bicategory @xmath318 $ ] and a weak 2-functor @xmath319\\ ] ] such that @xmath314 sends elements of @xmath317 to equivalences , and is universal with this property i.e.  precomposition with @xmath314 gives an equivalence of bicategories @xmath320,d ) \\to hom_w(b , d),\\ ] ] where @xmath321 denotes the sub - bicategory of weak 2-functors that send elements of @xmath317 to equivalences ( call these _ @xmath317-inverting _ , abusing notation slightly ) .",
    "the universal property means that @xmath317-inverting weak 2-functors @xmath322 factor , up to an equivalence , through @xmath318 $ ] , inducing an essentially unique weak 2-functor @xmath323 \\to d$ ] .",
    "@xcite[bicat_fracs ] let @xmath315 be a bicategory with a class @xmath317 of 1-cells .",
    "@xmath317 is said to _ admit a right calculus of fractions _ if it satisfies the following conditions    1 .",
    "@xmath317 contains all equivalences 2 .",
    "\\a ) @xmath317 is closed under composition + b ) if @xmath324 and there is an isomorphism @xmath325 then @xmath326 3 .   for all @xmath327 with @xmath328",
    "there exists a 2-commutative square @xmath329^v \\ar[rr]^g & & a'\\ar[dd]^w_{\\ } = \" s \" \\\\                         \\\\",
    "c \\ar[rr]^{f}=\"t \" & & a                         \\ar@{=>}_{\\simeq } \" s \" ; \" t \"                 } \\ ] ] with @xmath330 .",
    "if @xmath331 is a 2-arrow and @xmath328 there is a 1-cell @xmath332 and a 2-arrow @xmath333 such that @xmath334 .",
    "moreover : when @xmath230 is an isomorphism , we require @xmath335 to be an isomorphism too ; when @xmath336 and @xmath337 form another such pair , there exist 1-cells @xmath338 such that @xmath339 and @xmath340 are in @xmath317 , and an isomorphism @xmath341 such that the following diagram commutes : @xmath342^{\\beta\\circ u }                                 \\ar@{=>}[dd]_{f\\circ \\epsilon}^\\simeq & &                                 g\\circ v \\circ u \\ar@{=>}[dd]^{g\\circ \\epsilon}_\\simeq \\\\                                 \\\\                                 f\\circ v ' \\circ u ' \\ar@{=>}[rr]_{\\beta'\\circ u ' } & & g\\circ v ' \\circ u '                         } \\ ] ]    for a bicategory @xmath315 with a calculus of right fractions , @xcite constructs a localisation of @xmath315 as a bicategory of fractions ; the 1-arrows are spans and the 2-arrows are equivalence classes of bicategorical spans - of - spans diagrams",
    ".    from now on we shall refer to a calculus of right fractions as simply a calculus of fractions , and the resulting localisation constructed by pronk as a bicategory of fractions .",
    "since @xmath318 $ ] is defined only up to equivalence , it is of great interest to know when a bicategory @xmath343 , in which elements of @xmath317 are sent to equivalences by a 2-functor @xmath344 , is equivalent to @xmath318 $ ] . in particular",
    ", one might be interested in finding such an equivalent bicategory with a simpler description than that which appears in @xcite .",
    "@xcite[comparison_thm ] a weak 2-functor @xmath345 which sends elements of @xmath317 to equivalences induces an equivalence of bicategories @xmath346 \\xrightarrow{\\sim } d\\ ] ] if the following conditions hold    1 .",
    "@xmath347 is essentially surjective , 2 .   for every 1-cell @xmath348",
    "there are 1-cells @xmath349 and @xmath350 such that @xmath351 , 3 .",
    "@xmath347 is locally fully faithful .",
    "thanks are due to matthieu dupont for pointing out ( in personal communication ) that proposition [ comparison_thm ] actually only holds in the one direction , not in both , as claimed in _ loc .",
    "_    the following is useful in showing a weak 2-functor sends weak equivalences to equivalences , because this condition only needs to be checked on a class that is in some sense cofinal in the weak equivalences .",
    "[ inverting_special_we ] let @xmath352 be two classes of 1-cells in a bicategory @xmath315 such that for all @xmath328 , there exists @xmath353 and @xmath354 and an invertible 2-cell @xmath355^w \\\\                 &   & \\\\                 b \\ar[rr]_v^{\\ } = \" t1 \" \\ar[uurr]^s_{\\ } = \" s1 \" & & c\\ ; .",
    "\\ar@{=>}\"s1\";\"t1\"^{\\simeq }         } \\ ] ] then a weak 2-functor @xmath322 that sends elements of @xmath356 to equivalences also sends elements of @xmath317 to equivalences .    in the following the coherence arrows",
    "will be present , but unlabelled .",
    "it is enough to prove that if in a bicategory @xmath343 with a class of maps @xmath155 ( in our case @xmath357 ) such that for all @xmath358 there is an equivalence @xmath359 and an isomorphism @xmath230 , @xmath355^w \\\\                 &   & \\\\                 b \\ar[rr]_v^{\\ } = \" t1 \" \\ar[uurr]^s_{\\ } = \" s1 \" & & c                 \\ar@{=>}\"s1\";\"t1\"^{\\simeq}_\\alpha         } \\ ] ] where @xmath360 , then all elements of @xmath155 are also equivalences .",
    "let @xmath361 be a pseudoinverse for @xmath359 and let @xmath362 .",
    "then there is sequence of isomorphisms @xmath363    since @xmath360 , there is an equivalence @xmath364 , @xmath365 and an isomorphism @xmath335 giving the following diagram @xmath366_{t } \\ar[rr]^{u}_{\\ } = \" s2 \" & & a \\ar[dd]^w \\\\                 & & \\\\",
    "b \\ar[rr]_v^{\\ } = \" t1 \" \\ar[uurr]^s=\"t2\"_{\\ } = \" s1 \" & & c \\ ; .",
    "\\ar@{=>}\"s1\";\"t1\"^\\alpha                 \\ar@{=>}\"s2\";\"t2\"_\\beta         } \\ ] ] let @xmath367 be a pseudoinverse of @xmath364 . we know from the first part of the proof that we have a pseudosection @xmath368 of @xmath92 , with an isomorphism @xmath369 .",
    "we then have the following sequence of isomorphisms : @xmath370 thus all elements of @xmath155 are equivalences .",
    "in this section we prove the result that @xmath214 admits a calculus of fractions for the @xmath2-equivalences , where @xmath2 is a singleton pretopology on @xmath0 .",
    "the following is the first main theorem of the paper , and subsumes a number of other , similar theorems throughout the literature ( see section [ examples ] for details ) .",
    "[ bicat_frac_exists ] let @xmath0 be a category with a singleton pretopology @xmath2",
    ". assume the full sub-2-category @xmath4 admits base change along maps in @xmath2 .",
    "then @xmath7 admits a right calculus of fractions for the class @xmath3 of @xmath2-equivalences .",
    "we show the conditions of definition [ bicat_fracs ] hold .    *",
    "an internal equivalence is clearly @xmath2-locally split .",
    "lemma [ rep_ff_functors_closed_under_iso ] gives us the rest .",
    "* * * that the composition of fully faithful functors is again fully faithful is trivial .",
    "consider the composition @xmath371 of two @xmath2-locally split functors , @xmath180 \\ar[d ] \\ar@/^.5pc/[dr]_{\\ } = \" s1\"^{u}&z[v ] \\ar[d]\\ar@/^.5pc/[dr]_(.5){\\ } = \" s2\"^{v } & \\\\",
    "x\\ar[r]_{f}^(.33){\\ } = \" t1\"&y \\ar[r]_{g}^(.33){\\ } = \" t2 \" & z          \\ar@{=>}\"s1\";\"t1 \"          \\ar@{=>}\"s2\";\"t2 \"      } \\ ] ] by lemma [ strict_pullbacks_triv_j_fibrations ] the functor @xmath364 pulls back to a functor @xmath372 \\to z[v]$ ] .",
    "the composite @xmath372 \\to z$ ] is fully faithful with object component in @xmath2 , hence @xmath371 is @xmath2-locally split . * * lemma [ rep_ff_functors_closed_under_iso ] tells us that fully faithful functors are closed under isomorphism , so we just need to show @xmath2-locally split functors are closed under isomorphism .",
    "+ let @xmath373 be functors and @xmath374 be a natural isomorphism .",
    "first , let @xmath375 be @xmath2-locally split .",
    "it is immediate from the diagram @xmath180 \\ar[dd ] \\ar@/^.7pc/[ddrr]_{\\ } = \" s1\"^{u } \\\\          \\\\",
    "x\\ar@/^1pc/[rr]^{w}=\"t1\"_{\\ } = \" s2 \" \\ar@/_1pc/[rr]_{f}^{\\ } = \" t2 \"          & & y          \\ar@{=>}\"s1\";\"t1 \"          \\ar@{=>}\"s2\";\"t2\"^{a }      } \\ ] ] that @xmath184 is also @xmath2-locally split .",
    "* let @xmath376 be a @xmath2-equivalence , and let @xmath181 be a functor . from the definition of @xmath2-locally split",
    ", we have the diagram @xmath180 \\ar[d ] \\ar@/^.5pc/[dr]_{\\ } = \" s1\"^{u } & \\\\",
    "x\\ar[r]_{w}^(.33){\\ } = \" t1\"&y           \\ar@{=>}\"s1\";\"t1 \"      } \\ ] ] we can use lemma [ strict_pullbacks_triv_j_fibrations ] to pull @xmath364 back along @xmath184 to get a 2-commuting diagram @xmath377 \\ar[dr]^{v } \\ar[dl ] \\\\",
    "y[u ] \\ar[d ] \\ar@/^.5pc/[dr]_{\\ } = \" s1\"^{u } & & z \\ar[dl]^f\\\\          x\\ar[r]_{w}^(.33){\\ } = \" t1\"&y           \\ar@{=>}\"s1\";\"t1 \"      } \\ ] ] with @xmath378 as required . * since @xmath2-equivalences are representably fully faithful , given @xmath379^w \\\\",
    "x \\ar[ur]^f \\ar[dr]_g & \\downarrow a & z\\\\                 & y \\ar[ur]_w         } \\ ] ] where @xmath380 , there is a unique @xmath381 such that @xmath382^w \\\\                 x \\ar[ur]^f \\ar[dr]_g & \\downarrow a & z\\\\                 & y \\ar[ur]_w         }         }         { \\hspace{10pt}=\\hspace{10pt}}\\raisebox{36pt } {         \\xymatrix {         & & \\\\         x \\ar@/^1.5pc/[rr]^f \\ar@/_1.5pc/[rr]_g&\\downarrow a ' & y \\ar[r]^w & z \\ , .         }         } \\ ] ] the existence of @xmath383 is the first half of 2cf4 , where @xmath384 .",
    "note that if @xmath134 is an isomorphism , so if @xmath383 , since @xmath375 is representably fully faithful .",
    "given @xmath385 such that there is a transformation @xmath386^f \\\\                 w \\ar[ur]^{v ' } \\ar[dr]_{v ' } & \\downarrow b & y\\\\                 & x \\ar[ur]_g         } \\ ] ] satisfying @xmath387^f \\\\                 w \\ar[ur]^{v ' } \\ar[dr]_{v ' } & \\downarrow b & y \\ar[r]^w & z\\\\                 & x \\ar[ur]_g         }         }         { \\hspace{10pt}=\\hspace{10pt } } &          \\raisebox{36pt } {          \\xymatrix {                 & & y \\ar[dr]^w \\\\                 w \\ar[r]^{v ' } & x \\ar[ur]^f \\ar[dr]_g & \\downarrow a & z\\\\                 & & y \\ar[ur]_w         }          }       \\nonumber \\\\",
    "{ \\hspace{10pt}=\\hspace{10pt } } &          \\raisebox{36pt } {          \\xymatrix {                 & & \\\\                 w\\ar[r]^{v'}&x \\ar@/^1.5pc/[rr]^f \\ar@/_1.5pc/[rr]_g & \\downarrow a ' &                  y \\ar[r]^w & z         }          } \\ , , \\end{aligned}\\ ] ] then uniqueness of @xmath383 , together with equation ( [ antiwhisker_eqn ] ) gives us @xmath388^f \\\\",
    "w \\ar[ur]^{v ' } \\ar[dr]_{v ' } & \\downarrow b & y \\\\                 & x \\ar[ur]_g         }         }          { \\hspace{10pt}=\\hspace{10pt}}\\raisebox{36pt } {          \\xymatrix {                 & & \\\\",
    "w\\ar[r]^{v'}&x \\ar@/^1.5pc/[rr]^f \\ar@/_1.5pc/[rr]_g                 & \\downarrow a '                 & y         }          } \\ , .\\ ] ] this is precisely the diagram ( [ 2cf4.diag ] ) with @xmath384 , @xmath389 , @xmath390 and @xmath299 the identity 2-arrow .",
    "hence 2cf4 holds .",
    "the proof of theorem [ bicat_frac_exists ] is written using only the language of 2-categories , so can be generalised from @xmath7 to other 2-categories .",
    "this approach will be taken up in @xcite .",
    "the second main result of the paper is that we want to know when this bicategory of fractions is equivalent to a bicategory of anafunctors , as the latter bicategory has a much simpler construction .",
    "[ anafunctors_localise ] let @xmath12 be a subcanonical unary site and let the full sub-2-category @xmath214 admit base change along arrows in @xmath2 .",
    "then there is an equivalence of bicategories @xmath391\\ ] ] under @xmath7 .",
    "let us show the conditions in proposition [ comparison_thm ] hold . to begin with , the 2-functor @xmath392 sends @xmath2-equivalences to equivalences by proposition [ w - inverting_alpha ] .",
    "* @xmath307 is the identity on 0-cells , and hence surjective on objects .",
    "* this is equivalent to showing that for any anafunctor @xmath393 there are functors @xmath394 such that @xmath375 is in @xmath3 and @xmath395 where @xmath396 is some pseudoinverse for @xmath397 .",
    "+ let @xmath375 be the functor @xmath185 \\to x$ ] and let @xmath398 \\to y$ ] .",
    "first , note that @xmath229 x[u ] \\ar[dr]^= & \\\\                 x        & &               x[u ]         } \\ ] ] is a pseudoinverse for @xmath399_{= } x[u][u ] \\ar[dr ] & \\\\",
    "x[u ]      & &                      x          }                  } \\right)\\,.\\ ] ] then the composition @xmath400 is @xmath229 x[u\\times_u u \\times_u",
    "u]\\ar[dr]\\\\                 x                                & &                        y\\ ; ,         } \\ ] ] which is just @xmath227 ( recall we have the equality @xmath401 by remark [ remark : pullback_of_x_along_x ] ) .",
    "* if @xmath402 is a transformation of anafunctors for functors @xmath403 , it is given by a natural transformation @xmath404",
    "\\to y.\\ ] ] hence we get a unique natural transformation @xmath405 such that @xmath134 is the image of @xmath383 under @xmath307 .",
    "we now give a series of results following from this theorem , using basic properties of pretopologies from section [ sites_categories ] .",
    "[ equivalent_anafunctors ] when @xmath2 and @xmath56 are two subcanonical singleton pretopologies on @xmath0 such that @xmath406 , for example @xmath2 cofinal in @xmath56 , there is an equivalence of bicategories @xmath407    the class of maps in @xmath16 of the form @xmath408 for an open cover @xmath409 of @xmath88 form a singleton pretopology .",
    "this is because @xmath37 is a _ superextensive _ pretopology ( see the appendix ) .",
    "given a site with a superextensive pretopology @xmath2 , we have the following result which is useful when @xmath2 is not a singleton pretopology ( the _ singleton _ pretopology @xmath410 is defined analogously to the case of @xmath16 , details are in the appendix ) .",
    "let @xmath12 be a superextensive site where @xmath2 is a subcanonical pretopology .",
    "then @xmath411 \\simeq c_\\ana(\\amalg j).\\ ] ]    this essentially follows by lemma [ j - coprodj - epis ] .",
    "obviously this can be combined with previous results , for example if @xmath56 is cofinal in @xmath410 , for @xmath2 a non - singleton pretopology , @xmath56-anafunctors localise @xmath7 at the class of @xmath46-equivalences .",
    "finally , given wisc we have a bound on the size of the hom - categories , up to equivalence .",
    "let @xmath12 be a subcanonical unary site satisfying wisc with @xmath0 locally small and let @xmath214 admit base change along arrows in @xmath2 . then any localisation @xmath14 $ ] is locally essentially small .",
    "recall that this localisation can be chosen such that the class of objects is the same as the class of objects of @xmath7 , and so it is not necessary to consider additional set - theoretic mechanisms for dealing with large ( 2-)categories here .",
    "we note that the issue of size of localisations is not touched on in @xcite . even though such issues are commonly addressed in localisation of 1-categories .",
    "if we have a specified bound on the hom - sets of @xmath0 and also know that some wisc@xmath86 holds , then we can put specific bounds on the size of the hom - categories of the localisation .",
    "this is important if examining fine size requirements or implications for localisation theorems such as these , for example higher versions of locally presentable categories .",
    "the simplest example is when we take the trivial singleton pretopology @xmath50 , where covering families are just single isomorphisms : @xmath50-equivalences are internal equivalences and , up to equivalence , localisation at @xmath412 does nothing .",
    "it is worth pointing out that if we localise at @xmath413 , which is equivalent to considering anafunctors with source leg having a split epimorphism for its object component , then by corollary [ equivalent_anafunctors ] this is equivalent to localising at @xmath412 , so @xmath414 .",
    "the first non - trivial case is that of a regular category with the canonical singleton pretopology @xmath43 . this is the setting of @xcite .",
    "recall that @xmath192 is the class of bunge - par @xmath2-equivalences ( definition [ def : pb_weak_equiv ] ) . for now , let @xmath7 denote either @xmath1 or @xmath135 .",
    "let @xmath12 be a finitely complete unary site with @xmath2 saturated .",
    "then we have @xmath415 \\simeq c[w_j^{-1}]\\ ] ]    this is merely a restatement of the fact bunge - par @xmath2-equivalences and ordinary @xmath2-equivalences coincide in this case .",
    "[ pb_are_the_same_weak_equivs ] the canonical singleton pretopology @xmath43 on a finitely complete category @xmath0 is saturated .",
    "hence @xmath416 for this site , and @xmath417 \\simeq c[w_{{\\underline{c}}}^{-1}]\\simeq c_\\ana({\\underline{c}})\\ ] ]    we can combine this corollary with corollary [ equivalent_anafunctors ] so that the localisation of either @xmath1 or @xmath135 at the bunge - par weak equivalences can be calculated using @xmath2-anafunctors for @xmath2 cofinal in @xmath43 .",
    "we note that @xmath43 does not satisfy wisc in general ( see proposition [ u - small_g - sets ] and the comments following ) , so the localisation might not be locally essentially small",
    ".    the previous corollaries deal with the case when we are interested in the 2-categories consisting of all of the internal categories or groupoids in a site .",
    "however , for many applications of internal categories / groupoids it is not sufficient to take all of @xmath1 or @xmath135 .",
    "one widely used example is that of lie groupoids , which are groupoids internal to the category of ( finite - dimensional ) smooth manifolds such that source and target maps are submersions ( more on these below ) .",
    "other examples are used in the theory of algebraic stacks , namely groupoids internal to schemes or algebraic spaces .",
    "other types of such _",
    "presentable _ stacks use groupoids internal to some site with specified conditions on the source and target maps .",
    "although it is not covered explicitly in the literature , it is possible to consider presentable stacks of categories , and this will be taken up in future work @xcite .",
    "we thus need to furnish examples of sub-2-categories @xmath7 , specified by restricting the sort of maps that are allowed for source and target , that admit base change along some class of arrows .",
    "the following lemma gives a sufficiency condition for this to be so .",
    "[ lemma : existence_of_base_change ] let @xmath418 be defined as the full sub-2-category of @xmath1 with objects those categories such that the source and target maps belong to a singleton pretopology @xmath419 .",
    "then @xmath418 admits base change along arrows in @xmath419 , as does the corresponding 2-category @xmath420 of groupoids .",
    "let @xmath88 be an object of @xmath418 and @xmath421 . in the following diagram ,",
    "all the squares are pullbacks and all arrows are in @xmath419 .",
    "@xmath422_1 \\ar[d ] \\ar[r ] \\ar @/_2.4pc/   [ dd]_{s ' } \\ar @/^1pc/[rr]^{t ' } & x_1\\times_{x_0 } m \\ar[r ] \\ar[d ] & m \\ar[d ]   \\\\         m\\times_{x_0 } x_1 \\ar[d ] \\ar[r ] & x_1 \\ar[r ] \\ar[d ] & x_0 \\\\",
    "m \\ar[r ] & x_0   } \\ ] ] the maps marked @xmath423 are the source and target maps for the base change along @xmath184 , so @xmath154 $ ] is in @xmath418 .",
    "the same argument holds for groupoids verbatim .    in practice one",
    "often only wants base change along a subclass of @xmath419 , such as the class of open covers sitting inside the class of open maps in @xmath16 . we can then apply theoerems [ bicat_frac_exists ] and [ anafunctors_localise ] to the 2-categories @xmath418 and @xmath420 with the classes of @xmath419-equivalences , and indeed to sub-2-categories of these , as we shall in the examples below .",
    "we shall focus of a few concrete cases to show how the results of this paper subsume similar results in the literature proved for specific sites . the category of smooth manifolds is not finitely complete so the localisation results in this section so far do not apply to it .",
    "there are two ways around this .",
    "the first is to expand the category of manifolds to a category of smooth spaces which _ is _ finitely complete ( or even cartesian closed ) . in that case",
    "all the results one has for finitely complete sites can be applied .",
    "the other is to take careful note of which finite limits are actually needed , and show that all constructions work in the original category of manifolds .",
    "there is then a hybrid approach , which is to work in the expanded category , but point out which results / constructions actually fall inside the original category of manifolds .",
    "here we shall take the second approach .",
    "first , let us pin down some definitions .",
    "let @xmath48 be the category of smooth , finite - dimensional manifolds .",
    "a _ lie category _ is a category internal to @xmath48 where the source and target maps are submersions ( and hence the required pullbacks exist ) .",
    "lie groupoid _ is a lie category which is a groupoid . a _ proper _ lie groupoid is one where the map @xmath424 is proper",
    ". an _ tale _",
    "lie groupoid is one where the source and target maps are local diffeomorphisms .    by lemma [ lemma : existence_of_base_change ]",
    "the 2-categories of lie categories , lie groupoids and proper lie groupoids admit base change along any of the following classes of maps : open covers ( @xmath425 ) , surjective local diffeomorphisms ( @xmath426 ) , surjective submersions ( @xmath49 ) .",
    "the 2-categories of tale lie groupoids and proper tale lie groupoids admit base change along arrows in @xmath426 and @xmath49",
    ". we should note that we have @xmath425 cofinal in @xmath426 , which is cofinal in @xmath49 .",
    "we can thus apply the main results of this paper to the sites @xmath427 , @xmath428 , @xmath429 and @xmath430 and the 2-categories of lie categories , lie groupoids , proper lie goupoids and so on .",
    "however , the definition of weak equivalence we have here , involving @xmath2-locally split functors , is not one that apppears in the lie groupoid literature , which is actually bunge - par @xmath49-equivalence .",
    "however , we have the following result :    [ subm - equiv_are_bp - equiv ] a functor @xmath209 between lie categories is a @xmath49-equivalence if and only if it is a bunge - par @xmath49-equivalence .",
    "before we prove this , we need a lemma proved by ehresmann .",
    "@xcite for any lie category @xmath88 , the subset of invertible arrows , @xmath188 is an open submanifold .",
    "hence there is a lie groupoid @xmath431 and an identity - on - objects functor @xmath432 which is universal for functors from lie groupoids . in particular ,",
    "a natural isomorphism between functors with codomain @xmath88 is given by a component map that factors through @xmath433 , and the induced source and target maps @xmath434 are submersions .",
    "( proposition [ subm - equiv_are_bp - equiv ] ) full faithfulness is the same for both definitions , so we just need to show that @xmath184 is @xmath49-locally split if and only if it is essentially @xmath49-surjective .",
    "we first show the forward implication .",
    "the special case of a @xmath425-equivalence between lie groupoids is a small generalisation of the proof of proposition 5.5 in @xcite , which states than an internal equivalence of lie groupoids is a bunge - par @xmath49-equivalence .",
    "since @xmath425 is cofinal in @xmath49 , a @xmath49-equivalence is a @xmath425-equivalence , hence a bunge - par @xmath49-equivalence .",
    "for the case when @xmath88 and @xmath119 are lie categories , we use the fact that we can define @xmath435 and that the local sections constructed in moerdijk - mrun s proof factor through this manifold to set up the proof as in the groupoid case .    for the reverse implication ,",
    "the construction in the first half of the proof of proposition [ bp_equiv_iff_weak_equiv ] goes through verbatim , as all the pullbacks used involve submersions .",
    "the need to localise the category of lie groupoids at @xmath436 was perhaps first noted in @xcite , where it was noted that something other than the standard construction of a category of fractions was needed .",
    "however pradines lacked the necessary 2-categorical localisation results .",
    "pronk considered the sub-2-category of tale lie groupoids , also localised at @xmath436 , in order to relate these groupoids to differentiable tendues @xcite .",
    "lerman discusses the 2-category of orbifolds _ qua _ stacks @xcite and argues that it should be a localisation of the 2-category of proper tale lie groupoids ( again at @xmath436 ) .",
    "these three cases use different constructions of the 2-categorical localisation : pradines used what he called _ meromorphisms _ , which are equivalence classes of butterfly - like diagrams and",
    "are related to hilsum - skandalis morphisms , pronk introduces the techniques outlined in this paper , and lerman uses hilsum - skandalis morphisms , also known as right principal bibundles .",
    "interestingly , @xcite considers this localisation of the 2-category of lie groupoids then considers a further localisation , not given by the results of this paper . or its sequel @xcite . ]",
    "colman in essence shows that the full sub-2-category of topologically discrete groupoids , i.e. ordinary small groupoids , is a localisation at those internal functors which induce an equivalence on fundamental groupoids .",
    "our next example is that of topological groupoids , which correspond to various flavours of stacks on the category @xmath16 .",
    "the idea of weak equivalences of topological groupoids predates the case of lie groupoids , and @xcite credits it to haefliger , van est , and @xcite .",
    "in particular the first two were ultimately interested in defining the fundamental group of a foliation , that is to say , of the topological groupoid associated to a foliation , considered up to weak eqivalence .",
    "however more recent examples have focussed on topological stacks , or variants thereon . in particular , in parallel with the algebraic and differentiable cases , the topological stacks for which there is a good theory correspond to those topological groupoids with conditions on their source and target maps . aside from tale topological groupoids ( which were considered by @xcite in relation to tendues ) , the real advances here have come from work of noohi , starting with @xcite , who axiomatised the concept of _ local fibration _ and asked that the source and target maps of topological groupoids are local fibrations .    a singleton pretopology @xmath437 in @xmath16",
    "is called a class of _ local fibrations _ if the following conditions hold :    1 .",
    "@xmath437 contains the open embeddings 2 .",
    "@xmath437 is stable under coproducts , in the sense that @xmath438 is in @xmath437 if each @xmath439 is in @xmath437 3 .",
    "@xmath437 is local on the target for the open cover pretopology .",
    "that is , if the pullback of a map @xmath209 along an open cover of @xmath119 is in @xmath437 , then @xmath184 is in @xmath437",
    ".    conditions 1 . and 2 .",
    "tell us that @xmath440 , and that @xmath437 is @xmath410 for some superextensive pretopology @xmath2 containing the open embeddings as singleton ` covering ' families ( beware the misleading terminology here : covering families are not assumed to be jointly surjective ) .",
    "note that @xmath437 will not be subcanonical , by condition 1 .",
    "as an example , given any of the following pretopologies @xmath56 :    * serre fibrations , * hurewicz fibrations , * open maps , * split maps , * projections out of a cartesian product , * isomorphisms ;    one can define a class of local fibrations by choosing those maps which are in @xmath56 on pulling back to an open cover of the codomain .",
    "such maps are then called _",
    "local @xmath56_. as an example of the usefulness of this concept , the topological stacks corresponding to topological groupoids with local hurewicz fibrations as source and target have a nicely behaved homotopy theory .",
    "the case of tale groupoids corresponds to the last named class of maps , which give us local isomorphisms , i.e.  tale maps .",
    "we can then apply lemma [ lemma : existence_of_base_change ] and theorem [ bicat_frac_exists ] to the 2-category @xmath441 to localise at the class @xmath442 ( as @xmath443 ) , or any other singleton pretopology contained in @xmath437 , using anafunctors whenever this pretopology is subcanonical . note that if @xmath7 satisfies wisc , so will the corresponding @xmath437 , although this is probably not necessary to consider in the presence of full ac .",
    "a slightly different approach is taken in @xcite , where the author introduces a new pretopology on the category @xmath444 of compactly generated hausdorff spaces .",
    "we give a definition equivalent to the one in _",
    "loc cit_.    a ( not necessarily open ) cover @xmath445 is called a @xmath446-cover if for any map @xmath447 from a compact space @xmath56 , there is a finite open cover @xmath448 which refines the cover @xmath449 .",
    "@xmath446-covers form a pretopology @xmath446 on @xmath444 .",
    "compactly generated stacks then correspond to groupoids in @xmath444 such that source and target maps are in the pretopology @xmath450 .",
    "again , we can localise @xmath451 at @xmath452 using lemma [ lemma : existence_of_base_change ] and theorem [ bicat_frac_exists ] , and anafunctors can be again pressed into service .",
    "we now arrive at the more involved case of algebraic stacks ( cf .",
    "the continually growing @xcite for the extent of the theory of algebraic stacks ) , which were the first presentable stacks to be defined .",
    "there are some subtleties about the site of definition for algebraic stacks , and powerful representability theorems , but we can restrict to three main cases : groupoids in the category of affine schemes @xmath453 ; groupoids in the category @xmath454 of schemes ; and groupoids in the category @xmath455 of algebraic spaces .",
    "algebraic spaces reduce to algebraic stacks on @xmath454 represented by groupoids with trivial automorphism groups , and the category of schemes is a subcategory of @xmath456 , so we shall just consider the case when our ambient category is @xmath457 . in any case , all the special properties of classes of maps in all three sites are ultimately defined in terms of properties of ring homomorphisms .",
    "note that groupoids in @xmath457 are exactly the same thing as cogroupoid objects in @xmath458 , which are more commonly known as _",
    "hopf algebroids_.    despite the possibly unfamiliar language used by algebraic geometry , algebraic stacks reduce to the following semiformal definition .",
    "we fix three singleton pretopologies on our site @xmath457 : @xmath2 , @xmath18 and @xmath343 such that @xmath18 and @xmath343 are local on the target for the pretopology @xmath2 . an algebraic stack then is a stack on @xmath457 for the pretopology @xmath2 which ` corresponds ' to a groupoid @xmath88 in @xmath457 such that source and target maps belong to @xmath18 and @xmath459 belongs to @xmath343 .",
    "we recover the algebraic stacks by localising the 2-category of such groupoids at @xmath460 ( this claim of course needs substantiating , something we will not do here for reasons of space , referring rather to @xcite and the forthcoming @xcite ) .    in practice",
    ", @xmath343 can be something like closed maps ( to recover hausdorff - like conditions ) or all maps , and @xmath18 consists of either smooth or tale maps , corresponding to artin and deligne - mumford stacks respectively .",
    "@xmath2 is then something like the tale topology ( or rather , the singleton pretopology associated to it , as the tale topology is superextensive ) , and we can apply lemma [ lemma : existence_of_base_change ] to see that base change exists along @xmath2 , along with the fact that asking for @xmath461 is automatically stable under forming the base change . in practice ,",
    "a variety of combinations of @xmath462 and @xmath343 are used , as well as passing from @xmath457 to @xmath454 and @xmath455 , so there are various compatibilities to check in order to know one can apply theorem [ bicat_frac_exists ] .    a final application we shall consider is when our ambient category consists of algebraic objects . as mentioned in section 2 , a number of authors have considered localising groupoids in maltsev , or barr - exact , or protomodular , or semi - abelian categories , which are hallmarks of categories of algebraic objects rather than spatial ones , as we have been considering so far .    in the case of groupoids in @xmath463 ( which , as in any maltsev category , coincide with the internal categories ) it is a well - known result that they can be described using _ crossed modules_.    a _ crossed module _ ( in @xmath463 ) is a homomorphism @xmath464 together with a homomorphism @xmath465 such that @xmath93 is @xmath466-equivariant ( using the conjugation action of @xmath466 on itself ) , and such that the composition @xmath467 is the action of @xmath78 on itself by conjugation .",
    "a crossed module is often denoted , when no confusion will arise , by @xmath468 . a morphism @xmath469 of crossed modules is a pair of maps @xmath470 and @xmath471 making the obvious square commute , and commuting with all the action maps .",
    "similar definitions hold for groups internal to cartesian closed categories , and even just finite - product categories if one replaces @xmath472 with its transpose @xmath473 . ultimately of course",
    "there is a definition for crossed modules in semiabelian categories ( e.g.  @xcite ) , but we shall consider just groups . there is a natural definition of 2-arrow between maps of crossed modules , but the specifics are not important for the present purposes , so we refer to ( * ? ? ?",
    "* definition 8.5 ) for details .",
    "the 2-categories of groupoids internal to @xmath463 and crossed modules are equivalent , so we shall just work with the terminology of the latter .    given the result that crossed modules correspond to pointed , connected homotopy 2-types , it is natural to ask if all maps of such arise from maps between crossed modules .",
    "the answer is , perhaps unsurprisingly , no , as one needs maps which only _ weakly _ preserve the group structure .",
    "one can either write down the definition of some generalised form of map ( ( * ? ? ?",
    "* definition 8.4 ) ) , or localise the 2-category of crossed modules ( @xcite considers a model structure on the category of crossed modules ) . to localise the 2-category of crossed modules we can consider the singleton pretopology @xmath81 on @xmath463 consisting of the epimorphisms , and localise @xmath474 at @xmath475 .",
    "there are potentially interesting sub-2-categories of crossed modules that one might want to consider , for example , the one corresponding to _ nilpotent _ pointed connected 2-types .",
    "these are crossed modules @xmath476 where the cokernel of @xmath93 is a nilpotent group and the ( canonical ) action of @xmath477 on @xmath478 is nilpotent .",
    "the correspondence between such crossed modules and the corresponding internal groupoids is a nice exercise , as well as seeing that this 2-category admits base change for the pretopology @xmath81 .",
    "the usual sites of topological spaces , manifolds and schemes all share a common property : one can ( generally ) take coproducts of covering families and end up with a cover . in this appendix",
    "we gather some results that generalise this fact , none of which are especially deep , but help provide examples of bicategories of anafunctors .",
    "another reference for superextensive sites is @xcite .",
    "@xcite a _ finitary _ ( resp .",
    "_ infinitary _ ) _ extensive _ category is a category with finite ( resp .",
    "small ) coproducts such that the following condition holds : let @xmath479 be a a finite set ( resp .",
    "any set ) , then , given a collection of commuting diagrams @xmath480 \\ar[d ] & z \\ar[d ] \\\\                 a_i \\ar[r ] & \\coprod_{i\\in i } a_i\\ ; ,         } \\ ] ] one for each @xmath481 , the squares are all pullbacks if and only if the collection @xmath482 forms a coproduct diagram .",
    "in @xmath16 we can take an open cover @xmath487 of a space @xmath88 and replace it with the single map @xmath488 , and work just as before using this new sort of cover , using the fact @xmath16 is extensive .",
    "the sort of sites that mimic this behaviour are called",
    "_ superextensive_.    ( bartels - shulman ) a _ superextensive site _ is an extensive category @xmath0 equipped with a pretopology @xmath2 containing the families @xmath489 and such that all covering families are bounded ; this means that for a finitely extensive site , the families are finite , and for an infinitary site , the families are small .",
    "the pretopology in this instance will also be called superextensive .",
    "given an extensive category @xmath0 , the _ extensive pretopology _ has as covering families the bounded collections @xmath490 .",
    "the pretopology on any superextensive site contains the extensive pretopology .",
    "given a superextensive site @xmath12 , one can form the class @xmath410 of arrows of the form @xmath491 for covering families @xmath492 in @xmath2 ( more precisely , all arrows isomorphic in @xmath69 to such arrows ) .",
    "since isomorphisms are covers for @xmath2 they are covers for @xmath410 .",
    "the pullback of a @xmath410-cover @xmath491 along @xmath29 is a @xmath410-cover as coproducts and pullbacks commute by definition of an extensive category .",
    "now for the third condition we use the fact that in an extensive category a map @xmath493 implies that @xmath494 and @xmath495 .",
    "given @xmath410-covers @xmath491 and @xmath496 , we see that @xmath497 for some objects @xmath498 . by the previous point ,",
    "the pullback @xmath499 is a @xmath410-cover of @xmath39 , and hence @xmath500 is a @xmath2-covering family for each @xmath501 .",
    "thus @xmath502 is a @xmath2-covering family , and so @xmath503 is a @xmath410-cover .",
    "+ the map @xmath491 is the coequaliser of @xmath504 if and only if @xmath15 is the colimit of the diagram in definition [ defn : effective_cov_fam ] .",
    "hence @xmath505 is effective if and only if @xmath506 is effective          this means we can replace the singleton pretopology @xmath46 ( e.g. local - section - admitting maps of topological spaces ) with the singleton pretopology @xmath410 ( e.g. disjoint unions of open covers ) when defining anafunctors .",
    "this makes for much smaller pretopologies in practice .",
    "one class of extensive categories which are of particular interest is those that also have finite / small limits .",
    "these are called _",
    "lextensive_. for example , @xmath16 is infinitary lextensive , as is a grothendieck topos .",
    "in contrast , an elementary topos is in general only finitary lextensive .",
    "we end with a lemma about wisc .",
    "let @xmath12 be a superextensive site , and @xmath347 a stack for the extensive topology on @xmath0 .",
    "then the associated stack @xmath509 on the site @xmath508 is also the associated stack for the site @xmath12 .    as a corollary ,",
    "since every weak 2-functor @xmath510 for extensive @xmath0 represented by an internal groupoid is automatically a stack for the extensive topology , we see that we only need to stackify @xmath347 with respect to a singleton pretopology on @xmath0 .",
    "this will be applied in @xcite .",
    "j.  bnabou , _ anafunctors versus distributors _ , email to michael shulman , posted on the category theory mailing list 22 january 2011 , available from http://article.gmane.org/gmane.science.mathematics.categories/6485 .                  w.  g.  dwyer and d.  m.  kan , _ simplicial localizations of categories _ , j.  pure appl .  algebra * 17 * ( 1980 ) , no .  3 , pp 267284 .",
    "a.  dold , _ partitions of unity in the theory of fibrations _ , ann",
    ".  math .   * 78 * ( 1963 ) , no .  2 , pp 223255 .",
    "m.  hilsum and g.  skandalis , _ morphismes - orients d`epsaces de feuilles et fonctorialit en thorie de kasparov ( daprs une conjecture d'a .",
    "connes ) _ , ann .",
    "sci .  cole norm .",
    "* 20 * ( 1987 ) , pp 325390 ."
  ],
  "abstract_text": [
    "<S> in this article we review the theory of anafunctors introduced by makkai and bartels , and show that given a subcanonical site @xmath0 , one can form a bicategorical localisation of various 2-categories of internal categories or groupoids at weak equivalences using anafunctors as 1-arrows . </S>",
    "<S> this unifies a number of proofs throughout the literature , using the fewest assumptions possible on @xmath0 . </S>"
  ]
}