{
  "article_text": [
    "definable sets , as well as more complex definable objects ( e.g. , groups ) play a central and essential role in classical model theory .",
    "these are ( usually ) subsets of the ambient structure which are defined by a single formula of classical first order logic .",
    "continuous first order logic was proposed in @xcite as an extension of classical first order logic , obtained by replacing the two - element set of truth values @xmath2 with the compact interval @xmath3 $ ] .",
    "it allows to consider various classes of complete metric structures as elementary classes and to study definability therein .",
    "however , some things do become more complicated in continuous logic , and in particular the classical notion of a definable set splits in two .",
    "first , a set is a predicate , and a definable set is a definable predicate , i.e. , a definable function into the set @xmath2 ( or @xmath4 ) . as such",
    ", the correct analogue is a _ definable continuous predicate _ , i.e. , a definable function to @xmath3 $ ]  it is definable in the sense that it is given by a continuous first order formula , or , at the very least , by a uniform limit of such .",
    "but when thinking of definable objects , such as groups , there is an essential asymmetry between what is inside ( which interests us ) and what is outside ( about which we could hardly care less , especially if the set is stably embedded ) .",
    "the same asymmetry arises when we wish to quantify over a definable set . in that case",
    "the notion of a definable predicate is inadequate and we are led to the notion of a _",
    "definable set _ in continuous logic : this is a closed set the distance to which is a definable predicate , or equivalently , over which we may quantify ( see below ) .",
    "the class of definable set in a continuous structure is far less well - behaved than in classical logic .",
    "for example , the family of all definable subsets of @xmath5 does not form a boolean algebra , as it is not always closed under complement or intersection .",
    "worse still , non trivial definable sets need not always even exist .",
    "in particular , there exist theories which do not admit _ enough definable sets _ ,",
    "i.e. , where definable sets do not suffice to separate types .",
    "let us consider the theory @xmath6 .",
    "like any other classical theory , it may be viewed as a continuous theory by identifying the truth values @xmath7 and @xmath8 with @xmath9 and @xmath10 , respectively . specifically , we add an axiom @xmath11 asserting that the distance ( i.e. , equality ) predicate takes values in @xmath4 , and similarly for the predicate @xmath12 .",
    "we now define a continuous predicate @xmath13 , namely the standard part of @xmath14 truncated at @xmath9 from below and at @xmath10 from above .",
    "notice that in any model of @xmath7 and for every @xmath15 $ ] , the conditions @xmath16 and @xmath17 are type - definable : @xmath18 it follows that @xmath19 is a definable predicate in @xmath7 .",
    "let us now consider the continuous theory @xmath20 where @xmath21 denotes multiplication by @xmath22 .",
    "this is a reduct of @xmath7 , and we leave it as an easy exercise to the reader to check that it admits quantifier elimination as well . for a member @xmath23 of a model of @xmath24 consider the following two values @xmath25 notice that either @xmath26 or @xmath27 , so at least one of @xmath28 and @xmath29 is zero and we may define @xmath30 $ ] . for every number @xmath31 we have : @xmath32",
    "thus @xmath33 determines the type of @xmath23 .",
    "we obtain a bijection @xmath34 $ ] which is easily checked to be continuous and therefore a homeomorphism .    on the other hand , a model of @xmath24",
    "carries the discrete @xmath35 metric .",
    "thus , if @xmath36 is a definable set , then its complement is definable as well : @xmath37 .",
    "if @xmath36 is definable without parameters then the corresponding closed set @xmath38 \\subseteq \\operatorname{s}_1(t_p)$ ] must be clopen , i.e. , either @xmath39 or all of @xmath40 .",
    "we conclude that a model of @xmath24 admits no non trivial @xmath39-definable sets ( in @xmath10-space ) , so @xmath24 does not have enough definable sets .",
    "since all known examples of this pathology are unstable it makes sense to ask whether all stable continuous theories admit enough definable sets .",
    "one of the beautiful aspects of stable group theory in classical logic is the proof that there are also `` enough definable groups '' , namely , that every type - definable group is the intersection of definable subgroups of a definable group . in the case of an @xmath0-stable theory , chain conditions along with the previous general fact yield that every type - definable group is definable . in continuous logic",
    "we can prove adequate analogues of the chain conditions for sequences of definable ( or type - definable ) groups for @xmath0-stable theories , but we do not know how to prove enough definable groups exist in stable theories .",
    "in the present paper we give a direct proof of the fact that in an @xmath0-stable theory every type - definable group is definable , leaving open the question of the existence of definable groups in general stable theories .",
    "in the special case of the theory of probability algebras this has already been proved by alexander berenstein @xcite .    in",
    "we discuss various definability classes of sets and functions .    in",
    "we prove the main theorem using some technical results concerning morley ranks ( i.e. , cantor - bendixson ranks ) from @xcite .",
    "we do this under the assumption of the invariance of the metric under the group operation ( ) .",
    "the rest of the paper aims towards the removal of this assumption .    in",
    "we study definable metrics other than the standard one .",
    "in particular , we study when and how partial definable metrics ( on a definable or type - definable set ) can be extended to total ones .    in",
    "we prove the full version of main theorem and give some corollaries .    in",
    "we use several earlier results to prove some chain conditions for groups in stable and @xmath0-stable theories .",
    "we assume familiarity with the development of continuous logic as developed in the first half of @xcite .",
    "we shall also use facts regarding general stability and stable groups from the second half of @xcite and from @xcite , as well as regarding @xmath0-stability and topometric cantor - bendixson ranks from @xcite .",
    "this section consists mostly of definitions and relatively easy facts .",
    "some of the facts presented here also appear in ( * ? ? ?",
    "* section  9 ) .      1 .",
    "a _ type - definable set _",
    "@xmath36 is the set of realisations of an arbitrary set of conditions @xmath41 .",
    "2 .   a _ zero set _",
    "@xmath36 is the set of realisations of a single condition @xmath42 , where @xmath43 is a definable predicate .",
    "we then say that @xmath36 is the zero set of @xmath44 .",
    "3 .   a _ definable set _",
    "@xmath36 is a closed set for which @xmath45 is a definable predicate .",
    "we say that @xmath36 is definable over a parameter set @xmath46 , or that it is @xmath46-definable , if @xmath45 definable over @xmath46 .",
    "type - definable sets and zero sets will only be considered in sufficiently saturated structures , while definable sets make sense in an arbitrary structure .",
    "clearly , every zero set is type - definable , and every definable set @xmath36 is the zero set of @xmath45 . in terms of types , we know that a type - definable set @xmath36 corresponds to closed sets of types @xmath38 \\subseteq \\operatorname{s}_n(a)$ ] where @xmath46 contains all the parameters appearing in the definition of @xmath36 .",
    "let @xmath36 and @xmath47 be two type - definable sets .",
    "we say that @xmath47 is a _ logical neighbourhood _ of @xmath36 , in symbols @xmath48 , if there is a set of parameters @xmath46 over which both @xmath36 and @xmath47 are defined such that @xmath38 \\subseteq [ y]^\\circ$ ] in @xmath49 .",
    "notice that the interior of @xmath50 $ ] does depend on @xmath46 ( i.e. , if @xmath51 then @xmath50^\\circ$ ] calculated in @xmath52 may be larger than the pullback of the interior of @xmath50 $ ] in @xmath49 ) .",
    "we may nonetheless choose any parameter set we wish :    [ lem : logneighb ] assume that @xmath36 is type - definable with parameters in @xmath53 , @xmath47 type - definable possibly with additional parameters not in @xmath53 .",
    "then :    1 .   if @xmath48 then @xmath38 \\subseteq [ y]^\\circ$ ] in @xmath49 for any set @xmath46 over which both @xmath36 and @xmath47 are defined .",
    "if @xmath48 then there is an intermediate logical neighbourhood @xmath54 , which can moreover be taken to be the zero set of a formula with parameters in @xmath53 .",
    "3 .   if @xmath55 then there is a logical neighbourhood @xmath56 such that @xmath57 .",
    "moreover , we may take @xmath58 to be a zero set defined over @xmath53 .",
    "assume @xmath48 , where @xmath36 is type - definable over @xmath53 , and @xmath47 over @xmath59 .",
    "let @xmath60 consist of all formulae @xmath61 over @xmath53 which are zero on @xmath36 .",
    "if @xmath62 then @xmath63 , and @xmath36 is defined by the partial type @xmath64 . by compactness in @xmath49",
    "there is a condition @xmath65 in @xmath66 which already implies @xmath67 .",
    "let @xmath58 be the zero set of the formula @xmath68 where @xmath69 .",
    "then in @xmath49 we have @xmath38 \\subseteq [ \\varphi(\\bar x ) < r ' ]    \\subseteq [ \\varphi(\\bar x ) \\leq r ' ]    \\subseteq [ \\varphi(\\bar r ) < r ]    \\subseteq [ y]$ ] , i.e. , @xmath38 \\subseteq [ z]^\\circ \\subseteq [ z ] \\subseteq [ y]^\\circ$ ] , proving the first two items .",
    "the third item now follows from the fact that @xmath49 is a normal topological space .",
    "[ lem : zerosetgd ] a type - definable set @xmath36 is a zero set if and only if @xmath38 $ ] is a ( closed ) @xmath70 set .",
    "this is just a topological statement , saying that in a compact hausdorff space @xmath47 , a closed subset @xmath71 is the zero set of some @xmath72)$ ] if and only if it is a @xmath70 set .",
    "this is in fact true in an arbitrary normal space : left to right is immediate , while right to left involves a straightforward construction using @xmath73 applications urysohn s lemma .",
    "it follows that finite unions and countable intersections of zero sets are zero sets .",
    "in particular , a set @xmath36 which is type - definable by a countable set of conditions is a zero set .    later on we shall use the following result :    [ lem : zerosetbycoords ] let @xmath74 be a type - definable set , ( so each @xmath75 is one ) and @xmath76 a zero set",
    ". then there are zero sets @xmath77 such that @xmath78 .",
    "we only show that if @xmath79 is a type - definable set and @xmath80 is a zero set then there is a zero set @xmath81 such that @xmath82 .",
    "the result then follows since the intersection of finitely ( or even countably ) many zero sets is a zero set .",
    "let @xmath83 define @xmath47 .",
    "for @xmath84 consider the partial type @xmath85 .",
    "as it is inconsistent @xmath47 admits a logical neighbourhood @xmath86 such that @xmath87 is inconsistent .",
    "moreover , choosing the sets @xmath88 by induction on @xmath89 we may arrange that @xmath90 .",
    ". then @xmath92 = \\bigcap [ y_n]$ ] is a closed @xmath70 set , and @xmath93 .    in many situations we may wish do",
    "show that if a condition holds on a type - definable set then it holds on some zero set containing it .",
    "this is ( tautologically ) the case if the condition itself is a zero set .",
    "it is still true if the condition in question is a containment ( i.e. , implication ) of zero sets .",
    "[ lem : zerosetimplication ] let @xmath61 and @xmath94 be two definable predicates , @xmath36 a type - definable set , and assume that for all @xmath95 : @xmath96 .",
    "then there exist a zero set @xmath76 on which @xmath96 holds as well .    for every @xmath97 there is @xmath98 such that for all @xmath95 : @xmath99 . indeed , if not , then we can obtain a contradiction to our assumption using compactness",
    "we can therefore take @xmath47 to be the zero set of : @xmath100    finally , when it comes to definable sets , there are several important equivalent characterisations . for a structure @xmath101 , a subset @xmath102 , a definable predicate @xmath103 ( possibly with parameters in @xmath104 ) and @xmath105",
    "define @xmath106 thus @xmath107 is a @xmath3$]-valued predicate on @xmath108 which need not be definable .",
    "[ fct : defset ] let @xmath101 be a structure , @xmath102 closed subset .",
    "let also @xmath109 be a set of parameters .",
    "then the following are equivalent :    1 .",
    "@xmath36 is definable in @xmath101 over @xmath46 .",
    "@xmath36 is the zero set in @xmath101 of an @xmath46-definable predicate @xmath94 , and @xmath110 on @xmath5 .",
    "3 .   [ item : defsetmetricneighbourhood ] for every @xmath97 there exists a formula @xmath111 ( with parameters in @xmath46 ) such that : @xmath112 4 .",
    "for every @xmath46-definable predicate @xmath103 , the predicate @xmath113 is definable in @xmath101 over @xmath46 .",
    "5 .   for every formula @xmath103 ,",
    "the predicate @xmath113 is definable in @xmath101 over @xmath46 .",
    "if @xmath101 is @xmath114-saturated and @xmath36 is type - definable in @xmath101 over @xmath46 then these conditions are further equivalent to :    1 .",
    "for every @xmath97 , the set @xmath115 ( which is necessarily type - definable over @xmath46 ) is a logical neighbourhood of @xmath36 .",
    "take @xmath116 .",
    "take @xmath117 , where @xmath118",
    ".    it will be enough to show that @xmath107 admits arbitrarily good uniform approximations by @xmath46-definable predicates .",
    "given @xmath97 there exist @xmath119 and @xmath120 such that @xmath121 let @xmath122 , and let us fix @xmath105 .",
    "for @xmath123 we have @xmath124 . for arbitrary @xmath125 in @xmath5 , if @xmath126 then necessarily @xmath127 , so there is @xmath128 , @xmath129 , whereby @xmath130 we obtain the desired approximation @xmath131    immediate .",
    ".    an easy application of urysohn s lemma ( and of density of formulae among definable predicates ) in @xmath49 .",
    "if a definable predicate @xmath94 defines the distance to a definable set @xmath36 then @xmath44 is @xmath10-lipschitz and @xmath133 , where @xmath36 is necessarily the zero set of @xmath44 .",
    "it is also not difficult to see that these are sufficient conditions .",
    "now let @xmath134 denote the parameter for the definable predicate @xmath94 , which we may re - write as @xmath135 .",
    "the @xmath10-lipschitz condition is easily expressed as a property of @xmath134 in continuous logic by d1 below .",
    "the condition that @xmath133 can be written as @xmath136 , which in continuous logic can only be expressed _ approximately _ , as in d2 .",
    "@xmath137 it turns out that even though d2 is merely an approximate version of what we wished to express , it is still enough .",
    "( compare with similar conditions given in ( * ? ? ?",
    "* theorem  9.12 ) . )",
    "[ prp : defsetparam ] let @xmath138 consist of conditions d1 and d2 .",
    "let @xmath101 be any structure , @xmath139 ( possibly in an imaginary sort  for example the sort of canonical parameters for instances of @xmath44 ) and let @xmath140 be the zero set of @xmath135 .",
    "then @xmath141 in @xmath101 if and only if @xmath142 .",
    "moreover , the quantification in uniform , meaning that for any definable predicate @xmath143 there is a definable predicate @xmath144 ( both without parameters ) , such that for every structure @xmath101 and every @xmath139 : @xmath145    left to right is clear , so we prove right to left . by d1 , @xmath135 is @xmath10-lipschitz , so @xmath146 . for the other inequality ,",
    "let @xmath147 and let @xmath97 .",
    "by d2 there exists @xmath148 such that @xmath149 proceeding by induction we construct a sequence @xmath150 in @xmath101 verifying @xmath151 this sequence is cauchy and converges in @xmath101 to some @xmath152",
    ". then @xmath153 by continuity of @xmath135 and @xmath154 thus @xmath155 , as desired .",
    "the moreover part is by inspection of the proof of .",
    "it follows definable sets , as well as quantification over definable sets , are respected by elementary extensions and restrictions .",
    "assume @xmath156 .",
    "if @xmath157 is @xmath46-definable then there is a unique @xmath46-definable subset @xmath158 such that @xmath159 .",
    "conversely , if @xmath158 is @xmath46-definable in @xmath160 then @xmath159 is @xmath46-definable in @xmath101 .",
    "moreover , assume this is the case , and let @xmath103 be an @xmath46-definable predicate , so @xmath161 and @xmath162 are @xmath46-definable in @xmath101 and in @xmath160 , respectively . then the latter is the unique interpretation in @xmath160 of the former . in particular",
    ", @xmath163 is the unique interpretation of @xmath164 in @xmath160 .",
    "immediate from and the fact that two @xmath46-definable predicates which agree on @xmath101 , also agree on @xmath160 .",
    "we may therefore refer to a definable set @xmath36 or to the definable predicates @xmath165 and @xmath166 without specifying the ambient structure explicitly ( it just has to contain all the required parameters ) . in the situation described above we may then write @xmath167 , @xmath168 , and so on .",
    "it is also worthwhile to notice that every definable set @xmath36 admits an imaginary _ canonical parameter _ , or _ code _ , namely an imaginary element which is fixed precisely by those automorphisms of a large homogeneous ambient structure which fix @xmath36 set - wise .",
    "indeed , the canonical parameter of @xmath165 will do .",
    "the product and union of two definable sets are definable .",
    "if @xmath36 and @xmath47 are definable then @xmath169 , where we equip the product sort with the maximum metric . if they are in the same sort then @xmath170 .",
    "a finite intersection of definable sets needs not be definable in general . when it comes to infinite unions , we propose two results .    [",
    "lem : defsetcover ] let @xmath36 be a type - definable set , and assume @xmath171 where @xmath172 is a possibly infinite ( yet bounded ) family of definable sets .",
    "then @xmath36 is definable .    by all we need to check",
    "is that for every @xmath173 the set @xmath115 is a logical neighbourhood of @xmath36 . indeed : @xmath174^\\circ",
    "\\supseteq \\bigcup_{i<\\alpha } [ \\bar b(x_i,\\varepsilon/2)]^\\circ      \\supseteq \\bigcup_{i<\\alpha } [ x_i ] = [ x ] .",
    "\\qedhere    \\end{gathered}\\ ] ]    similarly , a definable union of definable sets is definable :    let @xmath175 be a family of uniformly definable sets with parameters in a definable set @xmath47 .",
    "that is to say that there is a definable predicate @xmath103 such that @xmath176 for every @xmath177 .",
    "then @xmath178 is definable .",
    "first , @xmath58 is a closed set by a simple compactness argument .",
    "then we have : @xmath179 .",
    "we shall consider objects such as predicates and functions which are only defined on some type - definable set .",
    "let @xmath36 be a type - definable set .    1 .",
    "a _ partial type - definable predicate _",
    "@xmath94 on @xmath36 , is given by a continuous mapping @xmath180 \\to [ 0,1]$ ] , where @xmath38 $ ] is the closed set of complete types corresponding to @xmath36 .",
    "we call @xmath36 the _ domain _ of @xmath44 , denoted @xmath181 , and for @xmath123 we denote by @xmath182 the truth value @xmath183 .",
    "2 .   it is _ definable _ on @xmath36 if it is the restriction of a definable predicate to @xmath36 .",
    "3 .   a _ partial type - definable function _",
    "@xmath184 on @xmath36 is one whose graph is given by a partial type @xmath185 .",
    "that is to say that @xmath186 and that @xmath187 is defined by the partial type @xmath188 . with a slight abuse of notation we may write it as @xmath189 or @xmath190 , although the model @xmath104 ( and even its complete theory ) may vary .",
    "it is _ definable _ on @xmath36 if the predicate @xmath191 is definable on @xmath192 .",
    "we may allow parameters in the definitions by naming them in the language . also , when explicitly specifying the domain we shall usually drop the qualifier `` partial '' .",
    "it is a straightforward exercise to verify that every partial definable predicate or function is type - definable .",
    "we wish to prove the converse .",
    "we start with a fact from general topology concerning the extensions of continuous functions .",
    "let @xmath36 be a normal space , @xmath193 closed , and let @xmath194 $ ] be a continuous function . then @xmath195 admits an extension to a continuous function @xmath196 $ ] .",
    "[ lem : deffuncsubst ] let @xmath197 be a definable predicate , and @xmath189 a type - definable partial @xmath89-ary function . then @xmath198 is a partial type - definable predicate on @xmath36 .",
    "assume everything is defined without parameters , and let @xmath199 \\subseteq \\operatorname{s}_n(t)$ ] .",
    "then @xmath195 induces a continuous function @xmath200 sending @xmath201 , and @xmath198 is given by the composition @xmath202 $ ] .",
    "every partial type - definable predicate or function is definable .    for predicates ,",
    "this is just tietze s extension theorem . for functions ,",
    "assume that @xmath189 is a type - definable function .",
    "then @xmath203 defined by @xmath204 is type - definable as well .",
    "let @xmath205 .",
    "then @xmath206 is a type - definable , and therefore definable , predicate on @xmath192 .",
    "this means that of the notions defined above we only need to retain those of partial definable functions and predicates . moreover , while partial definable predicates are not entirely superfluous , most of the time we shall avoid them , replacing any such partial predicate with an ( arbitrary ) total definable predicate extending it .    by the notation @xmath207 we mean that @xmath61 is a definable predicate extending a partial definable predicate @xmath94 .",
    "one can add to the language a sort @xmath208}$ ] for the interval @xmath3 $ ] , along with the tautological predicate @xmath209}\\colon s_{[0,1 ] } \\to [ 0,1]$ ] ( such a sort usually exists in @xmath210 ) .",
    "then a partial predicate on a type - definable set @xmath36 is definable if and only if factors through a definable function to @xmath208}$ ] .",
    "if @xmath211 are type - definable , we may say that @xmath47 is definable _ relative to @xmath36 _ if @xmath212 is a partial definable predicate on @xmath36 .",
    "if @xmath36 is definable and @xmath211 is definable relative to @xmath36 then @xmath47 is definable .",
    "let @xmath213 ( where @xmath212 is defined on @xmath36 ) .",
    "then for all @xmath14 : @xmath214 .",
    "since we do not always know how to extend a partial definable function to a total one , it is worthwhile to notice the following fact :    [ lem : defsetimage ] let @xmath36 be a definable set and let @xmath195 be a partial definable function whose domain contains @xmath36 . then @xmath215 is definable as well .",
    "let @xmath216 .",
    "then @xmath217 , which is a definable predicate since @xmath36 is definable , whereby @xmath215 is .",
    "it is usually fairly easy to reduce questions about arbitrary type - definable sets to questions about zero sets .",
    "for example , while it is not always possible to extend a partial definable function to a total one , one can always extend it to a zero set containing its domain :    [ lem : partfunczerosetext ] let @xmath36 be a type - definable set , @xmath189 a definable function on @xmath36 .",
    "then there is a zero set @xmath76 such that @xmath195 extends to a definable function on @xmath47 .",
    "moreover , for every choice of @xmath218 there is a zero set @xmath76 such that @xmath219 defines the graph of a partial definable function @xmath220 ( which extends @xmath195 ) .",
    "let @xmath218 , and let : @xmath221 then @xmath44 is zero on @xmath222 , and by there is a zero set @xmath76 such that @xmath44 is zero on @xmath223 as well .",
    "this means that for all @xmath67 there is @xmath224 such that @xmath225 , and that for any other @xmath226 one has @xmath227 .",
    "thus @xmath228 for some function @xmath229 extending @xmath195 .",
    "if the original type - definable set is closed under the function(s ) we wish to extend , we can make sure that so is the extension :    [ prp : partfuncclosedzerosetext ] assume that we are given :    1 .   for each @xmath230 sets @xmath231 where @xmath75 is",
    "type - definable and @xmath232 is a zero set .",
    "an ordinal @xmath233 , and for each @xmath234 a partial definable function @xmath235",
    ".    then there are zero sets @xmath236 and partial definable functions @xmath237 extending @xmath238 .    moreover ,",
    "if we are given definable predicate @xmath239 then we can arrange that @xmath240 as well .",
    "for simplicity of notation we shall consider the special case of a single function @xmath241 , as the general case is identical ( but with a lot more indexes ) .",
    "let @xmath218 be given ( or just choose one ) . by , and possibly replacing the given zero set @xmath76 with a smaller zero set",
    ", we may assume there is a partial definable function @xmath242 such that @xmath243 .",
    "let @xmath244 .",
    "given a zero set @xmath245 satisfying @xmath246 let @xmath247 .",
    "then @xmath248 is a zero set and by we can find a zero set @xmath249 such that @xmath250 , i.e. , such that @xmath251 and @xmath252 .    in this manner",
    "we construct a countable decreasing sequence of zero sets @xmath253 such that @xmath252 .",
    "then @xmath254 is a zero set , @xmath255 and @xmath256 , as desired .",
    "on the other hand , in later section we shall have to consider logical neighbourhoods of domains of partial definable functions ( specifically : logical neighbourhoods of type - definable groups , on which the group law is a partial definable function ) .",
    "while the function does not necessarily extend as such , we can extend it as a multi - valued function , which is in addition approximately well - defined on small enough neighbourhoods of the original domain .",
    "[ lem : approxpartfuncnbhd ] let @xmath36 be a type - definable set , @xmath189 a partial definable function .",
    "then there is a definable predicate @xmath257 satisfying in addition @xmath258 . letting @xmath259 we have :    1 .   for all @xmath260 : @xmath261 ; 2 .   if @xmath95 then @xmath262 ; 3 .   for every @xmath97",
    "there is a logical neighbourhood @xmath263 such that for all @xmath67 : @xmath264 .",
    "first choose any @xmath265 . then define : @xmath266 as @xmath95 implies @xmath267 we still have @xmath257 whence the second item .",
    "on the other hand @xmath258 follows from the definition and implies the first item .",
    "finally , let @xmath268 denote the partial type saying that @xmath269 .",
    "then @xmath270 is inconsistent by the second item , and by compactness @xmath271 is inconsistent for some logical neighbourhood @xmath263 .    in classical logic",
    "every partial definable function on a type - definable set @xmath36 can be extended to a definable set containing @xmath36 . whether this is true in continuous logic is still open , but we can show this up to an extension of the sort on which the function acts via an isometric embedding in a larger sort .",
    "[ lem : partfuncrangeext ] let @xmath272 and @xmath273 be two ( imaginary ) sorts , @xmath274 type - definable , and @xmath275 a partial definable function ( usually we would have @xmath276 and @xmath277 being powers of the home sort ) . then",
    "we can find @xmath278 satisfying :",
    "@xmath279 2 .",
    "there exists an imaginary sort @xmath280 , a definable isometric embedding @xmath281 , and a total definable function @xmath282 extending @xmath283 , such that moreover @xmath284",
    ".    choose @xmath285 and let @xmath286 .",
    "notice that for @xmath287 we have @xmath288 , i.e. , @xmath278 as well .",
    "let @xmath289 be a formula for which @xmath9 and @xmath10 are possible truth values , and let @xmath290 let @xmath291\\colon x , t \\in s_1 , y \\in s_2\\}$ ] be the sort of canonical parameters of instances of @xmath292 .",
    "we recall that the metric on it is given by : @xmath293,[x'y't ' ] )    = \\sup_z |\\psi(z , xyt)-\\psi(z , x'y't')|$ ] .",
    "the embedding @xmath281 is given by @xmath294 $ ] where @xmath295 and @xmath296 is arbitrary .",
    "this is indeed isometric and does not depend on the choice of either @xmath297 or @xmath298 as @xmath299 . thus @xmath300 .",
    "similarly we define @xmath282 by @xmath301 $ ] where @xmath302 , obtaining @xmath303 . in particular for @xmath304 and @xmath305",
    "we have @xmath306 as desired , from which follows .",
    "finally , if @xmath287 then @xmath307 , so @xmath308 extends @xmath283 and the proof is complete .    given a type - definable set @xmath36 and a partial definable function @xmath189 , can one find a definable set @xmath76 such that @xmath195 extends to a definable @xmath309 ?",
    "this is true in classical logic .",
    "once we have defined ( type-)definable sets and functions we automatically have corresponding notions for more complex algebraic structures .",
    "for example :    by a _ type - definable group _ we mean a type - definable set @xmath310 equipped with a definable function @xmath311 defining a group law on @xmath310 .",
    "it is _ definable _ if the set @xmath310 is definable .",
    "notice that if @xmath312 is a type - definable group with parameters in @xmath46 then its identity @xmath313 belongs to @xmath314 : indeed , every automorphism of the universal domain fixing @xmath46 would fix @xmath313 .",
    "similarly , the function @xmath315 is definable on @xmath310 with parameters in @xmath46 , its graph given by @xmath316 .",
    "the main goal of this article is to give some sufficient conditions under which type - definable groups are definable .",
    "for example , we have already essentially proved :    [ prp : bddidxdefgrp ] let @xmath310 be a type - definable group , @xmath317 a subgroup of bounded index , and assume @xmath318 is definable .",
    "then so is @xmath310 .",
    "say @xmath319 .",
    "each coset @xmath320 is definable as the image of @xmath318 under the partial definable function @xmath321 ( ) . then by @xmath322 implies that @xmath310 is definable .",
    "the main theorem states that in an @xmath0-stable theory , every type - definable group is definable . as a first approximation , we prove this under the assumption that the metric is invariant under the group operation :    a metric defined on a type - definable group is _ left - invariant _ ( _ right - invariant _ ) if it is invariant under left ( right ) translation .",
    "it is _ invariant _ if it is both left- and right - invariant .",
    "it is _ inverse - invariant _ if it is invariant under @xmath315 .",
    "clearly if the metric is left - invariant ( or right - invariant ) and inverse - invariant then it is right - invariant ( or left - invariant ) and therefore invariant .",
    "conversely , if the metric is invariant then it is in particular inverse - invariant , as we have : @xmath323 .    in classical first order logic",
    "it is an easy consequence of compactness that on every type - definable group , the group law and inverse can be extended to be well - defined ( and make some sense ) on some definable set containing the group , i.e. , on some logical neighbourhood of the group . in the continuous sense things are trickier , and",
    "the best we can hope for is a logical neighbourhood on which an _ approximate _ product is _ approximately _ well - defined and ( in case the metric on the group is invariant ) approximately isometric .",
    "[ lem : approxprodnbhd ] let @xmath310 be a type - definable group on which the metric is invariant .",
    "let @xmath324 be as in , @xmath325 .",
    "then for every @xmath97 and logical neighbourhood @xmath326 there is an intermediate logical neighbourhood @xmath327 such that @xmath328 , and multiplication is almost isometric in the sense that for all @xmath329 and for all @xmath330 , @xmath331 ( or @xmath332 , @xmath333 ) : @xmath334 .    since @xmath326",
    "we can find a formula @xmath335 which is equal to @xmath9 on @xmath310 and to @xmath10 outside @xmath36 .",
    "then all the following partial types are contradictory : @xmath336 by compactness there exist a logical neighbourhood @xmath327 such that they are still contradictory when @xmath310 is replaced everywhere with @xmath47 , and this @xmath47 will do .",
    "we shall use @xmath0-stability via morley ranks , i.e. , cantor - bendixson ranks in @xmath337 where @xmath101 is a sufficiently saturated model .",
    "such ranks were studied in detail in @xcite in the general setting of topometric spaces .",
    "in fact , that paper discusses several possible notions of cantor - bendixson ranks , of which we use one .    in this paper",
    ", @xmath338 will denote what is denoted in @xcite by @xmath339 , i.e. , the cantor - bendixson rank based on the removal of open @xmath340-finite sets .",
    "let @xmath36 be a type - definable set of @xmath89-tuples .",
    "we define the _",
    "@xmath340-morley rank _ of @xmath36 as @xmath341 , where @xmath101 is any sufficiently saturated model containing the parameters needed for @xmath36 ( this does not depend on the choice of @xmath101 ) .",
    "if @xmath342 then @xmath38 \\cap    \\operatorname{s}_n(m)^{(\\alpha)}_\\varepsilon$ ] is @xmath340-finite , i.e. , @xmath340-@xmath343-finite for some @xmath343 , and we define the _ @xmath340-morley degree _ of @xmath36 to be @xmath344 .",
    "[ lem : constrm ] let @xmath36 be a type - definable set",
    ". for all @xmath345 there are @xmath346 such that @xmath347 .",
    "for @xmath84 define @xmath348 .",
    "then @xmath349 is an increasing sequence , whereby @xmath350 is a decreasing sequence of ordinals and therefore stabilises from some point onwards .",
    "thus we may take @xmath351 and @xmath352 for any @xmath89 large enough .",
    "we recall some definitions and the main result we use from ( * ? ? ?",
    "* section  3.3 ) .",
    "let @xmath353 be two compact spaces , @xmath354 a closed relation .",
    "for @xmath287 and @xmath355 we define : @xmath356    [ fct : relcbrank ] let @xmath353 be two compact topometric spaces , @xmath354 a closed relation , and @xmath357 such that for all @xmath358 : if @xmath359 then @xmath360",
    ". let @xmath361 and @xmath362 be closed sets such that @xmath363 . then @xmath364 .",
    "* theorem  3.23 ) .",
    "the following result contains the technical core of the proof of the ( first approximation of the ) main theorem .",
    "given a logical neighbourhood of @xmath310 on which product is well - behaved and a point in that neighbourhood ( outside @xmath310 ) , we can approximately translate @xmath310 by that element , obtaining an approximately isometric copy of @xmath310 . using the fact cited above",
    "we can compare the morley ranks of @xmath310 and of this approximate copy .",
    "in addition , if the element we translate by is far enough from @xmath310 , then so will be the entire copy .",
    "[ lem : approxcopyrm ] let @xmath310 be a group on which the metric is invariant .",
    "then for every @xmath97 and logical neighbourhood @xmath326 there exists an intermediary logical neighbourhood @xmath327 such that for all @xmath365 either @xmath366 or there is a type - definable subset @xmath367 such that @xmath368 and @xmath369 .",
    "apply to @xmath326 and @xmath97 to obtain @xmath327 .",
    "if @xmath366 then we are done , so assume the contrary , i.e. , that there exists @xmath370 such that @xmath371 .",
    "set @xmath372 , which is type - definable .    to see that @xmath373 , let @xmath374 and @xmath375 .",
    "then @xmath376 for some @xmath377 .",
    "let @xmath378 , so @xmath379 .",
    "since @xmath380 we have @xmath381 , whereby @xmath382 . by a compactness argument it follows that @xmath373 .",
    "let @xmath101 be a fairly saturated model containing all necessary parameters , including @xmath224 , and let @xmath383 .",
    "set @xmath384 then @xmath385 is a closed relation , @xmath50 = r^{\\exists s}$ ] and @xmath386 \\subseteq r^{\\forall[z]}$ ] , so @xmath386 \\subseteq ( r^{\\exists s})^\\circ \\cap r^{\\forall[z]}$ ] . on the other ,",
    "if @xmath387 then @xmath388 , so @xmath389 . applying we get : @xmath390 ) \\leq \\operatorname{cb}^s_{r-\\varepsilon}([z ] )      = \\operatorname{rm}_{r-\\varepsilon}(z ) .",
    "\\qedhere    \\end{gathered}\\ ] ]      notice that we have not yet used the assumption of @xmath0-stability ( the ranks in may well be infinite ) .",
    "[ thm : mainthmapprox ] let @xmath310 be a type - definable group in an @xmath0-stable theory on which the metric is invariant .",
    "then @xmath310 is definable .",
    "let @xmath345 , and we shall show that @xmath391 . there is no harm if we decrease @xmath33 , so by we may assume that @xmath392 for some @xmath393 .",
    "by compactness we can find @xmath326 such that @xmath394 and @xmath395 .",
    "apply to find @xmath327 such that either @xmath366 or there is @xmath396 such that @xmath373 and @xmath397 .    in the second case we have @xmath398 , so from @xmath373 we obtain : @xmath399 this is impossible , so @xmath400 , as desired .",
    "we prove here some additional facts regarding morley ranks and groups in an @xmath0-stable theory @xmath7 .",
    "it was shown in @xcite that for a stable formula @xmath401 , the non forking extensions of @xmath401-types can be characterised as those having maximal local cantor - bendixson ranks .",
    "we shall show here that in an @xmath0-stable theory the same holds for global cantor - bendixson ranks , i.e. , for morley ranks .",
    "[ prp : nondivmr ] assume @xmath7 is @xmath0-stable , @xmath402 , @xmath403 , @xmath404",
    ". then the following are equivalent :    1 .",
    "the type @xmath22 is a non forking extension of @xmath405 .",
    "2 .   for all @xmath97 : @xmath406 .",
    "3 .   for all @xmath407 : @xmath408 .",
    "4 .   for arbitrarily small @xmath97 : @xmath406 .    there is no harm in assuming that @xmath409 .",
    "let @xmath97 .",
    "for an ordinal @xmath410 recall that @xmath411 denotes the @xmath410th @xmath340-cantor - bendixson derivative of @xmath412 ( i.e. , @xmath413-cantor - bendixson derivative in the terminology of @xcite .",
    "let @xmath414 , i.e. , the maximal @xmath410 such that @xmath415 \\neq { \\varnothing}$ ] .",
    "so let @xmath416 $ ] , the set of extensions of @xmath405 of maximal @xmath417 rank .",
    "it is compact , and since @xmath418 is maximal it admits a cover by relatively open @xmath340-finite subsets of @xmath419 .",
    "this cover admits a finite sub - cover so @xmath420 is @xmath340-finite itself .",
    "observe that each @xmath420 is invariant under the action of automorphisms of @xmath421 which fix @xmath46 , and thus contains a non forking extension of @xmath405 .",
    "as all non forking extensions of @xmath405 are conjugate over @xmath46 they all belong to @xmath420 , i.e. , they all satisfy @xmath422 .    as @xmath423 .    by there are arbitrarily small pairs @xmath407 such that @xmath424 , whereby @xmath425 .",
    "the inverse inequality is immediate .",
    "let @xmath426 , so @xmath427 .",
    "let @xmath428      \\subseteq \\operatorname{s}_n({\\mathfrak{m}})$ ] .",
    "on the one hand @xmath36 is compact and therefore metrically complete ( see @xcite ) . on the other hand",
    "it is @xmath340-finite for every @xmath340 , i.e. , totally bounded .",
    "thus @xmath36 is metrically compact .",
    "it follows that for every @xmath103 , the image of @xmath36 in @xmath429 is metrically compact ( since @xmath401 is uniformly continuous ) , so each @xmath430 is definable over @xmath431 .",
    "thus every @xmath430 is a non forking extension of @xmath405 .",
    "notice in passing that we showed that in a continuous @xmath0-stable theory every type has `` metrically compact multiplicity '' , in analogy with the finite multiplicity of types in a classical @xmath0-stable theory .",
    "[ lem : isommr ] let @xmath432 be a definable isometry between type - definable sets , and let @xmath46 be a set containing all the relevant parameters .",
    "then @xmath433 for all @xmath434 and all for all @xmath435 .    proved using similar tools to those used to prove .    in the special case where @xmath195 is an isometric bijection between entire sorts it induces an isometric homeomorphism of the corresponding topometric type spaces and the ranks are equal by a direct argument .",
    "it is not obvious that the ranks should be equal even in the spacial case where @xmath36 is a definable set ( and @xmath47 its image , and therefore definable as well ) .",
    "the ranks would be equal if we had a positive answer for the following :    [ qst : defsetrelrm ] let @xmath36 be a definable set in @xmath101 , say over @xmath39 .",
    "then the induced structure on @xmath36 is closed under quantification , so we may view @xmath36 as a structure of its own right , and if @xmath101 is @xmath0-stable then so is @xmath36 .    in classical logic , types in the structure",
    "@xmath36 have the same morley ranks as the corresponding types in @xmath101 .",
    "is it true in continuous logic ?",
    "assume @xmath436 is a type - definable transitive group action with an invariant metric in an @xmath0-stable continuous theory @xmath7 , @xmath437 .",
    "then @xmath405 is generic if and only if @xmath438 for all @xmath407 .",
    "if @xmath439 occupies an entire sort then this is further equivalent to @xmath440 for all @xmath97 .",
    "along the same lines as the proof of ( * ? ? ?",
    "* theorem  6.17 ) , using and .",
    "we leave the details to the reader .",
    "if the answer to is positive then the assumption that @xmath439 occupies an entire sort is superfluous ( since in any case @xmath439 is definable ) .",
    "metrics and pseudo - metrics are a special ( and distinguished ) kind of predicates .    1 .",
    "a _ definable ( pseudo-)metric _ is a definable predicate defining a ( pseudo-)metric .",
    "2 .   let @xmath36 be a type - definable set .",
    "a _ partial definable ( pseudo-)metric _ on @xmath36 is a definable partial predicate on @xmath441 defining a ( pseudo-)metric there .",
    "again , when specifying the domain we drop the `` partial '' . on the other hand , when wishing to make explicit that a definable metric is not partial , we say it is _ total_.    all type - definable metrics on a set @xmath36 are essentially the same . this has first been proved in @xcite , but since the setting is somewhat different and the proof is short we repeat it .    [",
    "lem : equivdefmet ] let @xmath442 and @xmath443 be two definable metrics on a type - definable set @xmath36",
    ". then they are uniformly equivalent .",
    "indeed , let @xmath97 , and consider the partial type @xmath444 since @xmath443 is a metric this partial type is inconsistent , and by compactness there exists @xmath84 such that @xmath445 for all @xmath446 .",
    "since this works for all @xmath97 , and when exchanging the roles of @xmath442 and @xmath443 , they are uniformly equivalent .    [",
    "lem : changeambientmetric ] let @xmath101 be a structure and @xmath442 a total definable metric on @xmath101 .",
    "let @xmath447 be the structure obtained from @xmath101 by letting the standard metric on @xmath447 be @xmath442 and relegating the original metric on @xmath101 to a new , non distinguished symbol @xmath443 : @xmath448 then @xmath104 and @xmath449 have the same definable sets and predicates .    clearly , the two structures have the same definable predicates",
    ". the characterisation of definable sets via quantification in does not depend on the metric .    while we know that every partial definable metric , say on @xmath36 ,",
    "extends to a total definable predicate , it is not clear whether it can extend to a total definable _",
    "metric_. we give some partial results in this direction .",
    "the best result is under the assumption that @xmath36 is definable .",
    "we start with a few lemmas that allow us to reduce the case of a metric to the case of a pseudo - metric .",
    "in fact the reduction step holds more generally for zero sets .",
    "[ lem : psmetjoin ] let @xmath36 be any set of points , @xmath442 and @xmath443 two pseudo - metrics on @xmath36 .",
    "then @xmath450 is a pseudo - metric on @xmath36 .",
    "let @xmath451 .",
    "clearly @xmath452 and @xmath453 .",
    "for the triangle inequality , given @xmath454 we may assume that @xmath455 in which case @xmath456 .",
    "[ lem : psmettomet ] let @xmath36 be a zero set . then there exists a definable pseudo - metric @xmath442 with the following properties :    1 .",
    "for all @xmath446 : @xmath457 .",
    "2 .   if @xmath458 and @xmath459 then @xmath460 .",
    "it follows that if @xmath443 is a definable pseudo - metric whose restriction to @xmath36 is a metric then @xmath450 is a definable metric which agrees with @xmath443 on @xmath36 .",
    "let @xmath36 be the zero set of @xmath461 .",
    "define : @xmath462 clearly , @xmath442 is a definable pseudo - metric and @xmath463 . on the other hand , if @xmath458 and @xmath459 then @xmath464 .",
    "finally , assume that @xmath443 is a definable pseudo - metric which is a metric on @xmath36 . by",
    ", @xmath450 is a ( definable ) pseudo - metric .",
    "the hypotheses now imply it is a metric and agrees with @xmath443 on @xmath36 .",
    "[ prp : defmetext ] let @xmath36 be a definable set , @xmath442 a definable ( pseudo-)metric on @xmath36 .",
    "then @xmath442 extends to a definable ( pseudo-)metric .",
    "choose @xmath465 , and define : @xmath466 then @xmath443 is a definable pseudo - metric extending @xmath442 . in case @xmath442 is a metric , @xmath443 is a definable pseudo - metric whose restriction to @xmath36 is a metric , so by there is a definable metric @xmath467 extending @xmath442 .",
    "we now move to considering the extension problem for partial definable on type - definable sets .",
    "we first observe this can be reduced to zero sets :    [ lem : zerosetmetext ] assume @xmath36 is a type - definable set and @xmath442 a definable ( pseudo-)metric on @xmath36 .",
    "then there exists a zero set @xmath76 such that @xmath442 extends to a definable ( pseudo-)metric @xmath443 on @xmath47 .",
    "in fact we prove something slightly stronger , namely that if @xmath468 is _ any _ definable predicate extending @xmath442 then there exists a zero set @xmath76 such that @xmath469 defines a ( pseudo-)metric on @xmath47 .",
    "for this , let @xmath470 .",
    "then @xmath471 is zero on @xmath472 , and by there is a zero set @xmath76 such that @xmath471 is zero on @xmath473 .    in case @xmath442",
    "is a metric we have @xmath474 on @xmath475 . by ( and ) there is a zero set @xmath476 such that @xmath474 for @xmath477 . then @xmath469 defines a metric on the zero set @xmath478 .",
    "joining with , we reduce the extension problems for partial metrics to the extension of pseudo - metrics on zero sets .",
    "unfortunately , we do not know whether it is always true and suspect that in its full generality it may fail .",
    "the best approximation we have is :    [ lem : approxpsmetext ] let @xmath36 be a zero set , @xmath442 a definable pseudo - metric on @xmath36 .",
    "then there exists a decreasing sequence of definable pseudo - metrics @xmath479 which converges uniformly to @xmath442 on @xmath36 .",
    "let @xmath36 be the zero set of @xmath401 , and let @xmath465 .",
    "for @xmath84 let @xmath480 : thus @xmath481 , and @xmath482 .",
    "now let : @xmath483 clearly @xmath479 is a definable pseudo - metric for every @xmath89 and @xmath484 . in addition , if @xmath446 then choosing @xmath485 we see that @xmath486 .",
    "assume towards a contradiction that the pseudo - metrics @xmath479 do not converge uniformly to @xmath442 on @xmath36 .",
    "then there is some @xmath97 such that for all @xmath84 there are @xmath487 and @xmath488 such that @xmath489 .",
    "this implies in particular that @xmath490 and @xmath491 . by compactness",
    "there are @xmath492 such that @xmath493 , which is impossible as @xmath469 agrees with @xmath442 on @xmath36 and @xmath442 is a pseudo - metric .",
    "let @xmath36 be a zero set , @xmath442 a definable pseudo - metric on @xmath36 . can @xmath442 always be extended to a total definable pseudo - metric ?",
    "are there additional assumptions on the theory ( e.g. , stability or @xmath0-stability ) under which this is true ?",
    "as it turns out , is too weak to be useful for our purposes .",
    "having failed to solve the full metric extension problem , we shall seek to solve weaker version thereof : given a type - definable set @xmath36 equipped with a definable metric @xmath442 , we shall look for a total definable metric @xmath443 which does not necessarily extend @xmath442 , but which does preserve whatever invariance properties @xmath442 may have .    for this purpose we shall use a few technical results from (",
    "* section  2.3 ) .",
    "there we proved that in a hausdorff cat in which there are not too many ways for two elements to be distinct ( technically : the _ distance cofinality _ is at most countable ) , there is a definable metric . for this purpose",
    "one first constructs a symmetric definable predicate @xmath494 ( a definable function in the terminology of @xcite , and denoted there by @xmath495 ) satisfying @xmath496 .",
    "then one needs to replace @xmath401 with one which also satisfies the triangle inequality .    in the context of an _ open _ hausdorff cat ( which is essentially the same thing as a theory in continuous first order logic )",
    ", one can just define @xmath497 , which is definable metric . in the general case",
    "the metric @xmath498 need not be definable , and a more complicated construction is required to extract a definable metric from @xmath401 directly without recourse to quantification .",
    "the same tools apply here .",
    "[ fct : metmodconstr ] let @xmath499 ^ 2 \\to [ 0,1]$ ] be symmetric , non decreasing , and satisfy for all @xmath500 $ ] : @xmath501 and if @xmath502 then there is @xmath503 such that @xmath504 .",
    "then there is a function @xmath505 $ ] , where @xmath506 denotes the set of all dyadic fractions in @xmath3 $ ] , such that :    1 .",
    "@xmath195 is strictly increasing .",
    "2 .   @xmath507 .",
    "3 .   for every @xmath508 $ ] : @xmath509 .    this is ( * ? ? ?",
    "* lemma  2.19 ) , with the sole difference being that we require @xmath510 for all @xmath511 rather than only for @xmath512 .",
    "the only modification in the proof is in the construction of @xmath513 for odd @xmath514 .",
    "there we have @xmath515 by the induction hypothesis , and @xmath516 as in the original proof , so we can choose @xmath513 such that @xmath517 .",
    "the following result was implicit in ( * ? ? ?",
    "* section  2.3 ) ( modulo the slight improvement above to the requirement on @xmath195 ) :    [ prp : metmod ] let @xmath494 be a symmetric and reflexive definable predicate , by which we mean that @xmath518 and @xmath519 .",
    "then there is a continuous increasing function @xmath520 \\to [ 0,1]$ ] , satisfying @xmath521 and @xmath522 , such that @xmath523 is a definable pseudo - metric .",
    "if in addition @xmath524 then @xmath523 is a definable metric .",
    "define @xmath499 ^ 2 \\to [ 0,1]$ ] by : @xmath525 as in the claim following the proof of ( * ? ? ?",
    "* lemma  2.19 ) , @xmath526 satisfies the assumptions of .",
    "thus there is a function @xmath505 $ ] such that :    1 .",
    "@xmath195 is strictly increasing .",
    "2 .   @xmath507 .",
    "3 .   for every @xmath508",
    "$ ] : @xmath527    we define @xmath528 \\to [ 0,1]$ ] to be a weak inverse of @xmath195 : @xmath529 .",
    "as @xmath195 is strictly increasing it follows that @xmath530 , and that @xmath531 is continuous and weakly increasing .",
    "in addition , @xmath532}$ ] .",
    "let @xmath533 , which is a definable predicate by continuity of @xmath531 .",
    "clearly @xmath44 is reflexive and symmetric as well , and it is left to show that it satisfies the triangle inequality . indeed , assume not , that is @xmath534 for some @xmath535 .",
    "as @xmath536 , there is @xmath537 , @xmath538 , such that @xmath539 . similarly there is @xmath540 in @xmath541 such that @xmath542 .",
    "as @xmath543 we have : @xmath544 in other words we have @xmath545 , contradicting the definition of @xmath531 .",
    "we have shown that @xmath546 is a pseudo - metric .",
    "if @xmath401 satisfies @xmath547 , so does @xmath548 ( as @xmath549 ) , which is therefore a metric .",
    "putting it all together we get :    [ thm : metmodext ] let @xmath36 be a type - definable set , @xmath442 a partial definable ( pseudo-)metric on @xmath36 . then there exist a total definable ( pseudo-)metric @xmath443 and a continuous increasing function @xmath528 \\to [ 0,1]$ ] such that @xmath521 , @xmath549 and @xmath550 .    first , by we may assume @xmath36 is a zero set , defined by @xmath551 .",
    "let @xmath468 , and define : @xmath552 then @xmath553 as well and @xmath554 is zero , whereby @xmath555 . in addition",
    "@xmath471 , @xmath556 and @xmath557 are all symmetric and reflexive , and we may apply to find @xmath531 as such that @xmath558 is a total pseudo - metric .",
    "assume now that @xmath442 is a metric . then for @xmath559 , if @xmath446 then @xmath560 , and otherwise @xmath561 , so either way @xmath562 .",
    "thus @xmath443 is a total metric .      in general type - definable groups",
    "need not be invariant . for definable groups this",
    "is easily resolved :    [ prp : defgrpinvmet ] let @xmath312 be a definable group .",
    "then @xmath310 admits a total definable invariant metric ( i.e. , a total definable metric on the sort of @xmath310 which is invariant on @xmath310 ) .    for simplicity assume",
    "@xmath310 is definable in the home sort . since @xmath310 is a definable set , the predicate @xmath563 is definable , and we may quantify over members of @xmath310 .",
    "let : @xmath564 this means that for @xmath565 we have : @xmath566 .",
    "this is easily verified to define an invariant metric on @xmath310 , which can be extended to a total definable metric by .",
    "in the case of a type - definable group we only have partial results .",
    "first , as before we can reduce any problem to the case of zero sets :    [ lem : grpzeroset ] let @xmath310 be a type - definable group . then there exists a type - definable supergroup @xmath567 whose domain is a zero set .",
    "moreover , if @xmath442 is an invariant definable metric on @xmath310 , and @xmath468 , we can choose @xmath568 so that @xmath569 is an invariant metric on @xmath568 .",
    "using we find a zero set @xmath570 to which the law of @xmath310 and the inverse mappings extend to definable mappings @xmath571 and @xmath572 .",
    "the satisfaction of the identity @xmath573 ( i.e. , @xmath574 ) in @xmath575 translates a condition of the form @xmath576 .",
    "by there is a zero set @xmath577 such that @xmath578 and such that @xmath579 is zero on @xmath580 .",
    "we take care of @xmath581 and @xmath582 similarly .",
    "we end up with a zero set @xmath583 on which all the identities above hold .",
    "now @xmath584 needs not be closed under product and inverse , but that is taken care of by a second application of .    this argument would work for any kind of functional structure defined by a set of identities ( e.g. , rings ) .",
    "adding we can further extend the argument to structures whose definition involves an implication , such as integral domains .",
    "we have already seen an example of that in .",
    "alternatively , given a partial invariant definable metric on @xmath310 we can extend it to a total definable metric up to some uniform modification which preserves the invariance .",
    "[ prp : grpinvmetmodext ] let @xmath310 be a type - definable group admitting a partial invariant definable metric .",
    "then it also admits a total one .    just apply to the partial invariant metric .    in a stable theory",
    "we obtain a partial invariant metric via generic translations .",
    "we first recall a few facts regarding generic elements and types in stable groups :    let @xmath310 be a type - definable group in a stable theory , say over a parameter set @xmath46 .    1 .",
    "we say that @xmath310 is _ connected _ if it has no proper type - definable subgroups of bounded index ( over any parameters ) .",
    "2 .   let @xmath585 .",
    "an element @xmath374 is called _ generic _ over @xmath53 if for every @xmath377 : @xmath586 ( this notion is sometimes called _ dividing - generic _ and is also useful sense in simple theories . in stable theories it coincides with other notions of genericity . )",
    "let @xmath587 \\subseteq \\operatorname{s}_x(b)$ ] , namely the set of complete types over @xmath53 of members of @xmath310 .",
    "a type @xmath588 is generic if its realisations are .",
    "[ fct : geenric ] let @xmath310 be a type - definable group over a set @xmath46 in a stable theory , and let @xmath585",
    ".    1 .   generic elements over @xmath53 exist",
    "an element @xmath526 is generic over @xmath53 if and only if @xmath589 is .",
    "it follows that if @xmath526 is generic over @xmath53 and @xmath590 then @xmath591 as well .",
    "an element @xmath374 is generic over @xmath53 if and only if it is generic over @xmath46 and @xmath592 .",
    "4 .   if @xmath593 , @xmath526 is generic over @xmath53 and @xmath590 then @xmath594 and @xmath595 are both generic over @xmath53 .",
    "see ( * ? ? ?",
    "* theorem  6.10 ) .",
    "( in fact , this holds in the more general setting of a type - definable group in a thick simple cat , see ( * ? ? ?",
    "* section  1.3 ) . )",
    "[ fct : conncomp ] let @xmath310 be a type - definable group with parameters in some set @xmath46 in a stable theory .",
    "then @xmath310 admits a smallest type - definable subgroup of bounded index @xmath596 , called the _ connected component _ of @xmath310 .",
    "it has the following properties :    1 .",
    "the connected component @xmath596 is a connected normal subgroup of @xmath310 , and is type - definable over @xmath46 as well .",
    "if @xmath310 is connected the it admits a unique generic type over @xmath46 , which is in addition stationary .",
    "it follows that @xmath310 admits a unique generic type over every set @xmath585 , namely @xmath597 , the unique non forking extension of @xmath405 to @xmath53",
    ".    see ( * ? ? ?",
    "* theorem  6.14 ) .",
    "[ thm : stabconngrpinvmet ] assume @xmath310 is a connected type - definable group in a stable theory",
    ". then there exists a total metric which is invariant on @xmath310 .",
    "let @xmath598 be the unique generic type of @xmath310 .",
    "stationary as well .",
    "again let @xmath599 .",
    "as @xmath600 ( the free product of @xmath405 with itself ) is a definable stationary type over the same parameters as @xmath310 , let @xmath601 be its @xmath602-definition .",
    "thus , if @xmath565 and @xmath603 are any independent generic elements over @xmath604 , then @xmath605 .",
    "let @xmath606 , and we claim it is an invariant metric on @xmath310 . to verify it is a metric , let @xmath607 be any three elements . then choosing @xmath603 to be independent generics over @xmath535 we can verify the metric axioms for this triplet .",
    "we also get that @xmath608 are two independent generics over @xmath604 , whereby @xmath609 .",
    "right - invariance is verified similarly .",
    "apply to conclude .",
    "notice that if we knew how to show , as in classical first order logic , that in a stable continuous theory every type - definable group is contained in a definable one , we would obtain an alternative proof for using , without the connectedness assumption .",
    "[ thm : mainthm ] a type - definable group in an @xmath0-stable theory is definable .    by it will suffice to show that the connected component of @xmath310 is definable , so we may assume that @xmath310 is connected .",
    "then by there exists a total definable metric @xmath442 which is invariant on @xmath310 . by",
    "we assume @xmath442 is the ambient metric .",
    "now apply .",
    "notice that in the proof we needed to pass to the connected component since we do not know yet ( although it seems plausible ) whether a general type - definable group in a stable theory admits an invariant metric .",
    "moreover , the passage from an partial invariant definable metric on the connected component to a total one required allowing a modification to that metric . _ a posteriori _ we have :    [ cor : mainthm ] let @xmath310 be a type - definable group in an @xmath0-stable theory .",
    "then :    1 .   @xmath310 admits an invariant metric .",
    "every partial metric on @xmath310 extends to a total one .    by the main theorem",
    ", @xmath310 is definable , so just apply and .",
    "[ dfn : approxstab ] let @xmath610 be a descending sequence of closed sets in a metric space .",
    "we say that the sequence _ approximately stabilises _ if for every @xmath97 there exists @xmath611 such that @xmath612 for all @xmath613 .",
    "[ lem : strapproxstab ] assume @xmath610 is a descending sequence of closed subsets of a complete metric space ( e.g. , type - definable subsets of a continuous structure ) , and let @xmath614 .",
    "then @xmath610 approximately stabilises if and only if for all @xmath97 there is @xmath418 such that @xmath615 .",
    "right to left is immediate , so we prove left to right .",
    "in addition , if @xmath616 has uncountable cofinality then the sequence stabilises precisely , i.e. , @xmath617 for some ( all ) big enough @xmath410 .",
    "we are left with the case of a sequence @xmath618 .    by assumption , for each @xmath619 there is @xmath620 such that @xmath621 for all @xmath89 , and we may assume that @xmath622 for all @xmath619 . let @xmath623 be such that @xmath624 .",
    "we claim that @xmath625 .",
    "indeed , let @xmath626 . given @xmath627 ,",
    "let @xmath628 be such that @xmath629 .",
    "then the sequence @xmath630 converges to some point @xmath14 , satisfying @xmath631 .",
    "notice that for all @xmath89 we have @xmath632 for @xmath343 large enough .",
    "thus @xmath633 for all @xmath89 , whereby @xmath287 .",
    "we conclude that @xmath634 , whence @xmath625 , as desired .",
    "[ lem : approxstabdef ] let @xmath635 be a descending sequence of definable sets . if the chain approximately stabilises ( in any model ) then @xmath636 is a definable set .",
    "the converse holds in sufficiently saturated models .",
    "assume first the sequence approximately stabilises .",
    "by we have @xmath615 for all @xmath637 , whereby @xmath638 for all @xmath97 .",
    "now apply the criterion for definability in . twice .",
    "first , since @xmath639 is definable there is a formula @xmath640 such that @xmath641 a second application shows that @xmath36 is definable .",
    "conversely , assume @xmath36 is definable , and that the equality @xmath636 holds in a sufficiently saturated model . then by compactness , for all @xmath97 there is @xmath418 such that @xmath642 is contradictory , whereby @xmath615 .",
    "let @xmath645 be a descending chain of type - definable groups , and let @xmath646 .",
    "then @xmath647 is definable by the main theorem . if necessary pass to a sufficiently saturated elementary extension of the ambient model and apply the converse part of .",
    "[ thm : unifdefgrpmdcc ] let @xmath648 be a family of uniformly definable sets in a stable theory , meaning that there is a definable predicate @xmath494 such that for every @xmath649 the predicate @xmath45 is an instance @xmath650 .",
    "then @xmath648 satisfies the mdcc .      by it",
    "is enough to prove the moreover part .",
    "assume that @xmath651 is a descending chain , and let @xmath652 .",
    "the sequence of definable predicates @xmath653 is increasing , and by definition of stability ( no order property ) it must converge uniformly .",
    "it follows by an easy compactness argument that there exists a parameter @xmath23 such that @xmath654 uniformly , and its zero set is necessarily @xmath614 .",
    "moreover , by , we may further arrange that @xmath655 , i.e. , that @xmath656 .",
    "ita ben yaacov , alexander berenstein , c.  ward henson , and alexander usvyatsov , http://math.univ-lyon1.fr/~begnac/articles/mtfms.pdf[_model theory for metric structures _ ] , model theory with applications to algebra and analysis , volume 2 ( zo chatzidakis , dugald macpherson , anand pillay , and alex wilkie , eds . ) , london math society lecture note series , vol .",
    "350 , cambridge university press , 2008 , pp .  315427 .",
    "to3em , http://dx.doi.org/10.1007/s11813-008-0009-x[_topometric spaces and perturbations of metric structures _ ] , logic and analysis * 1 * ( 2008 ) , no .  34 , 235272 , http://arxiv.org/abs/0802.4458[arxiv:0802.4458 ] .",
    "ita ben yaacov and alexander usvyatsov , http://math.univ-lyon1.fr/~begnac/articles/cfo.pdf[_continuous first order logic and local stability _ ] , transactions of the american mathematical society , to appear , http://arxiv.org/abs/0801.4303[arxiv:0801.4303 ] ."
  ],
  "abstract_text": [
    "<S> we prove that in a continuous @xmath0-stable theory every type - definable group is definable . </S>",
    "<S> the two main ingredients in the proof are :    1 .   results concerning morley ranks ( i.e. , cantor - bendixson ranks ) from @xcite , allowing us to prove the theorem in case the metric is invariant under the group action ; and 2 .   </S>",
    "<S> results concerning the existence of translation - invariant definable metrics on type - definable groups and the extension of partial definable metrics to total ones .        </S>"
  ]
}