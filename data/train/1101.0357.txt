{
  "article_text": [
    "infrastructure as a service ( iaas ) cloud computing is emerging as a new and efficient way to provide computing to the research community .",
    "the growing interest in clouds can be attributed , in part , to the ease of encapsulating complex research applications in virtual machines ( vms ) with little or no performance degradation @xcite .",
    "studies have shown , for example , that high energy physics application code runs equally well in a vm or on the native system @xcite .",
    "a key question is how to manage large data sets in a cloud or distributed cloud environment .",
    "we have developed a system for running high - throughput batch processing applications using any number of iaas clouds @xcite .",
    "the results presented in this work use the iaas clouds at the national research council ( nrc ) in ottawa , two clouds at the university of victoria ( uvic ) , and amazon ec2 .",
    "the number of available vm slots at the four clouds was 110 and will be increased in the near future .",
    "we also expect to add new clouds to the system in the next few months .",
    "the input data is located on one of the uvic clouds and the vm repository is stored on the nrc cloud .",
    "the canadian sites are connected by a research network provided by canarie while the commodity network is used to connect the nrc and uvic clouds to amazon ec2 . to reduce our dependence on the commodity internet we made a second copy of the vm repository at amazon ec2 .",
    "we describe the system in the next section , however , we highlight the main features .",
    "users are provided with a set of vms that are configured with the application software .",
    "the user adds code to run their specific analysis and saves the vm to a repository .",
    "the user submits their jobs to a scheduler where the job script contains a link to the required vm .",
    "a component ( called cloud scheduler ) searches the job queue , identifies the vm required for each queued jobs , and sends out a request to one of the clouds to boot the user specific vm .",
    "once the vm is booted , the scheduler submits the user job to the vm .",
    "the jobs runs and returns any output to a user specified location .",
    "if there are no further jobs requiring that specific vm , then cloud scheduler shuts it down",
    ".    the system has been demonstrated to work well for applications with modest i / o requirements such as the production of simulated data @xcite .",
    "the input files for this type of application are small and the rate of production of the output data is modest ( though the files can be large ) .",
    "the system has also been used for the analysis of astronomical survey data where the images are prestaged to the storage on the cloud @xcite .    in this work ,",
    "we focus on data intensive high energy physics applications where the job reads large sets of input data at higher rates .",
    "we show that the data can be quickly and efficiently streamed from a single data storage location to each of the clouds .",
    "we will describe the issues that have arisen and the potential for scaling the system to many hundreds or thousands of simultaneous user jobs .",
    "the architecture of the distributed iaas cloud system is shown in fig .",
    "[ fig : overall_arch ] ( see ref .  @xcite for a detailed description ) .",
    "the uvic and nrc clouds use the nimbus software to manage vms @xcite while amazon ec2 uses its own proprietary software .",
    "the system is designed so that the user submits their jobs to a single scheduler .",
    "the system then boots the user - specific vms on any one of the available clouds .",
    "users submit jobs using x.509 proxy certificates @xcite to authenticate .",
    "the certificates are also used to authenticate with nimbus clusters when starting , shutting down , or polling vms .",
    "authentication with ec2 is done by using a standard shared access key and secret key .",
    "currently the application vms are created manually ; however , we are developing a system to simplify the management of user vms .",
    "the goal is to have a vm repository where the user can retrieve copies of a variety of standard vm images preloaded with the application software .",
    "the user clones the standard vm , adds and tests their software , saves it in the vm repository and includes a reference to their vm image in their job submission script .",
    "the user submits their jobs to the condor job scheduler @xcite .",
    "we selected condor as the job schedule since it was designed to utilize heterogeneous idle workstations and is an ideal job scheduler for a dynamic vm environment where workers nodes become available on demand .",
    "users submit jobs by issuing the ` condor_submit ` command .",
    "the user must add a number of additional parameters specifying the location of the image and the properties of the required vm .",
    "the management of the vms on the clouds is done by cloud scheduler @xcite .",
    "cloud scheduler monitors the queue of jobs and if one of the jobs needs a vm that is not already booted on one of the clouds , then it sends a request to the next available cloud .",
    "cloud scheduler will also shut down a vm if there are no jobs needing that particular type of vm .",
    "a complete description of cloud scheduler can be found in ref .",
    "analysis jobs in high energy physics typically require two inputs : event data and configuration data .",
    "the event data can be the real data recorded by the detector or simulated data .",
    "each event contains information about the particles seen in detector such as their trajectories and energies .",
    "the real and simulated data are nearly identical in format ; the simulated data contains additional information describing how it was generated .",
    "the user analysis code analyzes one event at a time . in the babar experiment",
    "the total size of the real and simulated data is approximately 2 pb but users typically read a small fraction of this sample . in this work",
    "we use a subset of the data containing approximately 2 tb of simulated data and 1.2 tb of real data .",
    "the configuration data that describes the state of the detector totals 24 gb .",
    "the event data for this analysis was stored in an 8.7 tb distributed lustre file system at uvic .",
    "the lustre file system is hosted on a cluster of six nodes , consisting of a management / metadata server ( mgs / mds ) , and five object storage servers ( oss ) .",
    "each node has dual quad core intel nehalem processors and 24 gb of memory .",
    "all servers have six disk drives : two 450 gb , 15k rpm , serial - attached scsi ( sas ) system drives in a raid 1 configuration ; and four metadata / object storage drives in a raid 5 configuration .",
    "the drives for the metadata storage on the mgs / mds are 450 gb , 15k rpm , sas drives .",
    "the drives for the object storage on each oss are 1 tb , 7200 rpm , serial ata ( sata ) drives .",
    "originally configured to allow remote access via mounting over the public network , the lustre filesystem uses a single gigabit interface / vlan to communicate both internally and externally .",
    "this is an important consideration for the test results presented , because these same nodes also host the iaas front - end ( mgs / mdt server ) and virtual machine monitors ( oss servers ) for the the uvic cloud and are using the same vlan to communicate .",
    "the jobs use xrootd @xcite to read the data .",
    "xrootd is a file server providing byte level access and is used by many high energy physics experiments .",
    "xrootd provides read only access to the lustre data ( read / write access is also possible ) and the capability of implementing gsi authentication . though the implementation of xrootd is fairly trivial , some optimization was necessary to achieve good performance across the network : a read - ahead value of 1 mb and a read - ahead cache size of 10 mb was set on each xrootd client .",
    "the vm images are stored in a repository hosted on a _ lighttpd _ file server at nrc .",
    "the vm image is propagated to the worker nodes by http .",
    "as mentioned , we store another copy of the vm images on amazon ec2 in an amazon s3 bucket using the ` ec2_bundle_vol ` and ` ec2_upload_bundle ` tools provided by the amazon ec2 api tools package .",
    "a xen vm image based on scientific linux sl release 5.5 ( boron ) was created and the latest release of babar software was installed . the babar software , which contains c++ and fortran code , requires 1 gb of ram and is completely contained in a 16 gb vm .",
    "in this study , a member of the team and also a researcher in the babar collaboration added one of their analysis codes to this vm . after compiling , linking and testing the code ,",
    "the modified vm was saved for access by the batch system .",
    "a separate vm operated as a head node ; it contained the condor job scheduler and cloud scheduler for the tests presented in this paper .",
    "a typical user job in high energy physics reads one event at a time where the event contains the information of a single particle collision .",
    "electrons and positrons circulate in opposite directions in a storage ring and are made to collide millions of times per second in the center of the babar detector .",
    "the babar detector is a cylindrical detector with a size of approximately 5 meters in each dimension .",
    "the detector measures the trajectories of charged particles and the energy of both neutral and charged particles .",
    "a fraction of those events are considering interesting from a scientific standpoint and the information in the detector is written to a storage medium .",
    "the size of the events in babar are a few kilobytes depending on the number of particles produced in the collision .",
    "the user code analyzes each event independently and writes out a subset of the information into an output file for subsequent analysis .",
    "a typical job reads millions of events and the user submits tens to hundreds of these jobs in parallel .",
    "the output files are a few percent of the original input data set size , making it easier to study the events of particular interest to the researcher .    in this work ,",
    "the analysis is focused on a particular subset of the babar data set where there are a small number of particles produced in each collisions .",
    "we use three separate samples for our tests which we label tau1n - data , tau1n - mc and tau11-mc .",
    "the tau1n - data and tau1n - mc samples are identical except that the first is real data and the second is simulated data with a size of 1158 gb and 615 gb , respectively ( the size of each event is 4 kb ) .",
    "the tau11-mc sample is a simulated sample with size of 1386 gb ( the size of an event is 3 kb ) .",
    "we submitted 77 tau1n - data , 64 tau1n - mc and 114 tau11-mc jobs where a single job runs for approximately 12 hours ( the submission of each set was staggered over a number of hours ) . the number of events processed per second was observed to be 110 , 55 and 430 for the tau1n - data , tau1n - mc and tau11-mc samples , respectively .",
    "this corresponds to an i / o rate of approximately 440 , 220 and 1300 kb / s per job for the three samples .",
    "the processing time is different for each sample as the fraction of interesting events in each sample is different .",
    "for example , background or non - interesting events are quickly identified and discarded so that the job does not waste processing time .",
    "[ fig : vms ] shows the number of vms on the system over a 30 hour period .",
    "the green curve is the number of running vms , the blue curve is the number of vms being started or booted and the red curve is the number of vms in an error state .",
    "the available number of vm slots were 30 slots at nrc ottawa , 20 slots at amazon ec2 , and ( 40 , 20 ) slots at the two university of victoria clusters .",
    "the vms on the nrc and amazon ec2 clouds started quickly ( as they are stored locally ) whereas the vms required at uvic had to be transferred from nrc .",
    "the 60 vms required at uvic corresponds to nearly 1 tb and took approximately 5 hours to transfer ( we are working on a method so that only a single copy of a vm needs to be transferred ) .",
    "[ fig : nrc ] shows the network traffic at the nrc cloud .",
    "the vms required at uvic were obtained from nrc and the blue curve shows the outbound network traffic of approximately 500 mbits / s over the 5 hour period ( the nrc site has a 1 g connection to the canarie research network in canada ) .",
    "once all the vms were booted , the outbound network traffic at nrc fell to zero .",
    "[ fig : elephant ] shows the network bandwidth for the outbound traffic from the uvic cluster that hosts all the data . the total bandwidth plateaus around 330 mbits / s for the 110 jobs .",
    "note that the data rate increases over time as the jobs to process the tau11-mc sample ( which processes the events at the fastest rate ) were submitted last and only started once the first jobs completed .",
    "the green histogram in fig .",
    "[ fig : nrc ] shows the inbound data transfer at 40 - 50 mbits / s for the 30 jobs at the nrc cloud ( note that the gap at 06:00 is due to error in the monitoring system ) .    within a given sample ,",
    "we find that the time to process the data is approximately equal on each of the four clouds .",
    "the uvic cloud serving the data to the other clouds processes the data at the slowest rate .",
    "the other uvic cloud processes data about 5% faster than nrc and amazon ec2 ( which are thousands of kilometers from the data source ) suggesting that the there is little or no latency issues .",
    "one of the features of the system is its ability to recover from faults arising from local system problems at each of the clouds .",
    "we list some of the problems we identified in the processing of the jobs .",
    "for example , we find that :    * a number of vms at nrc went into an error state ( see the red line in fig .  [ fig : vms ] at tuesday 13:00 ) and this was attributed to a bug in the older version of nimbus used at nrc that has been fixed in the latest release . in any case ,",
    "cloud scheduler killed those vms and restarted new ones .",
    "the red spike at wednesday 07:00 in fig .",
    "[ fig : vms ] was due to a loss of communication between the vms on one of the clouds and cloud scheduler ; once the link was restored the correct status was obtained . * a vm on one of the uvic clouds failed on a regular basis ( this can be seen if fig .  [",
    "fig : nrc ] where there are spikes in the outbound nrc traffic as the vm was resent ) .",
    "messages in the xen daemon log indicate that the failure of this vm was initiated by a ` shutdown ` command followed ten seconds later by a ` destroy ` command issued to the xen hypervisor .",
    "the source of these commands is not identified .",
    "future tests will incorporate additional diagnostics to identify and eliminate this error .",
    "* at the right end of fig .",
    "[ fig : vms ] , the number of vms dropped from 110 to 90 as we stopped the jobs on the amazon ec2 cluster .",
    "we noted a problem with the configuration of condor for ec2 ; it was corrected and reactivated ( the restart of the ec2 vms is not shown in fig .",
    "[ fig : vms ] ) .",
    "the overall system has preformed remarkably well with all jobs processed successfully .",
    "we are planning to upgrade the network of the data storage system to 10 gbits / s and this would allows us to scale the number of jobs by an order of magnitude .",
    "there are also plans in 2011 to connect amazon ec2 to the canadian research networked ( provided by canarie ) .",
    "a significant fraction of the data transfer in this test was the movement of vms .",
    "we will soon implement a system so that only a single copy of the vm image would need to be transferred , significantly reducing the start - up time of the remote sites .",
    "we have presented the results for running a data intensive particle physics applications in a distributed compute cloud .",
    "the results show that 4 - 5 tb data sets can be easily accessed from remote locations over a high - speed research network .",
    "there appear to be no limitations to scaling the number of jobs by an order of magnitude once we increase the network bandwidth from the event storage servers .",
    "from the users perspective , the system is robust and the success rate of job completion is close to 100% in tests to date .",
    "we have shown that the use of distributed compute clouds can be an effective way of analyzing large research data sets .",
    "the support of canarie , the natural sciences and engineering research council , the national research council of canada and amazon are acknowledged .",
    "a. agarwal , a. charbonneau , r. desmarais , r. enge , i. gable , d. grundy , d. penfold - brown , r. seuster , r.j .",
    "sobie , and d.c .",
    "vanderster . deploying hep applications using xen and",
    "globus virtual workspaces .",
    "119 , 062002 ( 2008 ) .",
    "doi : 10.1088/1742 - 6596/119/6/062002    p.armstrong , a.agarwal , a.bishop , a.charbonneau , r.desmarais , k.fransham , n. hill , i.gable , s.gaudet , s.goliath , r.impey , c.leavett-brown , j.ouellete , m.paterson , c.pritchet , d.penfold-brown , w.podaima , d.schade , r.j.sobie .",
    "cloud scheduler : a resource manager for a distributed compute cloud , june 2010 ( arxiv:1007.0050v1 [ cs.dc ] )    k.fransham , p.armstrong , a.agarwal , a.bishop , a.charbonneau , r.desmarais , n. hill , i.gable , s.gaudet , s.goliath , r.impey , c.leavett-brown , j.ouellete , m.paterson , c.pritchet , d.penfold-brown , w.podaima , d.schade , r.j.sobie .",
    "research computing in a distributed compute cloud , proceedings of the high performance computing symposium , toronto 2010 ( doi : 10.1088/1742 - 6596/256/1/012003 )          alvise dorigo , peter elmer , fabrizio furano , and andrew hanushevsky . 2005 .",
    "xrootd / txnetfile : a highly scalable architecture for data access in the root environment . in proceedings of the 4th wseas international conference on telecommunications and informatics ( tele - info05 )"
  ],
  "abstract_text": [
    "<S> we show that distributed infrastructure - as - a - service ( iaas ) compute clouds can be effectively used for the analysis of high energy physics data . </S>",
    "<S> we have designed a distributed cloud system that works with any application using large input data sets requiring a high throughput computing environment . </S>",
    "<S> the system uses iaas - enabled science and commercial clusters in canada and the united states . </S>",
    "<S> we describe the process in which a user prepares an analysis virtual machine ( vm ) and submits batch jobs to a central scheduler . </S>",
    "<S> the system boots the user - specific vm on one of the iaas clouds , runs the jobs and returns the output to the user . </S>",
    "<S> the user application accesses a central database for calibration data during the execution of the application . </S>",
    "<S> similarly , the data is located in a central location and streamed by the running application . </S>",
    "<S> the system can easily run one hundred simultaneous jobs in an efficient manner and should scale to many hundreds and possibly thousands of user jobs .    </S>",
    "<S> cloud computing ; particle physics </S>"
  ]
}