{
  "article_text": [
    "_ securities markets _ play a fundamental role in economics and finance .",
    "a securities market offers a set of _ contingent securities _ whose payoffs each depend on the future state of the world .",
    "for example , an arrow - debreu security pays $ 1 if a particular state of the world is reached and $ 0 otherwise  @xcite .",
    "consider an arrow - debreu security that will pay off in the event that a category 4 or higher hurricane passes through florida in 2011 . a florida resident who is worried about his home",
    "being damaged might buy this security as a form of insurance to hedge his risk ; if there is a hurricane powerful enough to damage his home , he will be compensated .",
    "additionally , a risk neutral trader who has reason to believe that the probability of a category 4 or higher hurricane landing in florida in 2011 is @xmath0 should be willing to buy this security at any price below @xmath0 ( or sell it at any price above @xmath0 ) to capitalize his information .",
    "for this reason , the market price of the security can be viewed as the traders collective estimate of how likely it is that a powerful hurricane will occur .",
    "securities markets thus have dual functions : risk allocation and information aggregation .",
    "insurance contracts , options , futures , and many other financial derivatives are examples of contingent securities .",
    "a _ prediction market _ is a securities market primarily focused on information aggregation . for a future event with @xmath1 mutually exclusive and exhaustive possible outcomes ,",
    "a typical prediction market offers @xmath1 arrow - debreu securities , each corresponding to a particular outcome .",
    "the prices of these securities form a probability distribution over the outcome space of the event , and can be viewed as the traders collective estimate of the likelihood of each outcome .",
    "market - based probability estimates have proved to be accurate in a variety of domains including business , entertainment , and politics  @xcite .",
    "denote a set of mutually exclusive and exhaustive states of the world as @xmath2 .",
    "a securities market is _ complete _ if there are @xmath3 linearly independent securities  @xcite .",
    "for example , a prediction market with @xmath1 arrow - debreu securities for an @xmath1-outcome event is complete . with a complete securities market ,",
    "any desired future payoff over the state space can be constructed by linearly combining these securities , which allows a trader to hedge any possible risk he may have .",
    "furthermore , traders can change the market prices to reflect any valid probability distribution over the state space , allowing them to reveal any information .",
    "completeness therefore provides expressiveness for both risk allocation and information aggregation , making it a desirable property .",
    "however , completeness is not always achievable .    in many real - world settings",
    ", the state space can be exponentially large or infinite .",
    "for instance , a competition among @xmath1 candidates results in a state space of @xmath4 rank orders , while the future price of a stock has an infinite state space . in such situations ,",
    "operating a complete securities market is not practical due to the notorious difficulties that humans have estimating small probabilities and the computational intractability of managing a large security set .",
    "it is natural to offer a smaller set of structured securities instead .",
    "for example , instead of having one security for each rank ordering , pair betting allows securities of the form `` $ 1 if candidate a beats candidate b '' .",
    "there has been a surge of recent research examining the tractability of running standard prediction market mechanisms ( such as the popular logarithmic market scoring rule ( lmsr ) market maker  @xcite ) over combinatorial state spaces by limiting the space of available securities  @xcite .",
    "while this line of research has led to a few positive results  @xcite , it has led more often to hardness results  @xcite or to markets with undesirable properties such as unbounded loss of the market institution  @xcite .    in this paper",
    ", we propose a general framework to design _ automated market makers _ for securities markets .",
    "an automated market maker is a market institution who sets prices for each security and is always willing to accept trades at these prices . unlike previous research aimed at finding a space of securities that can be efficiently priced using an existing market maker like lmsr , we start with an arbitrary space of securities and design a _ new _ market maker tailored to this space .",
    "our framework is therefore extremely general .",
    "both lmsr and quad - scpm  @xcite also fall under our framework .",
    "we take an axiomatic approach .",
    "given a space of securities with bounded payoff , we define a set of intuitive conditions that a reasonable market maker should satisfy .",
    "we prove that a market maker satisfying these conditions must price securities via a convex potential function , and that the space of reachable security prices must be precisely the convex hull of the security payoffs .",
    "we then incorporate ideas from online convex optimization  @xcite to define a convex cost function in terms of an optimization over the convex hull of the security payoffs .",
    "the optimal solution to the optimization problem gives the security prices . with this framework",
    ", we provide an efficient market for predicting the landing location of an object on a sphere .",
    "we then show that we can relax our `` no - arbitrage '' condition to design a new efficient market maker for pair betting , which is known to be # p - hard to price using lmsr  @xcite .",
    "this relaxation also allows the market maker to charge transaction fees so that the depth of the market can be dynamically increased as the number of trades increases , a desirable property that the extension of lmsr recently proposed by @xcite was specifically designed to satisfy .",
    "[ [ preliminaries - and - related - work ] ] preliminaries and related work : + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    a simple cost function based market maker  @xcite offers @xmath5 arrow - debreu securities , each corresponding to a potential outcome of an event .",
    "the market maker determines how much each security should cost using a differentiable _ cost function _ , @xmath6 , which is simply a potential function specifying the amount of money currently wagered in the market as a function of the number of shares of each security that have been purchased .",
    "if @xmath7 is the number of shares of security @xmath8 currently held by traders , and a trader would like to purchase a bundle of @xmath9 shares for each security @xmath10 ( where some @xmath11 could be zero or even negative , representing a sale ) , the trader must pay @xmath12 to the market maker .",
    "the instantaneous price of security @xmath8 ( that is , the price per share of an infinitely small portion of a security ) is then @xmath13 , and is denoted @xmath14 .",
    "the market designer is free to choose any differentiable cost function @xmath15 that satisfies a few basic properties .",
    "first , it must be the case that for every @xmath10 and every @xmath16 , @xmath17 .",
    "this ensures that the price of a security is never negative .",
    "second , if the market designer wishes to prevent arbitrage , it must be the case that for every @xmath16 , @xmath18 .",
    "that is , the sum of the instantaneous prices of the securities must always be 1 . if the prices summed to something less than ( respectively , greater than ) 1 , then a trader could purchase ( respectively , sell ) small equal quantities of each security for a guaranteed profit . , violating this no - arbitrage condition .",
    "we also explore relaxations of the no - arbitrage condition in section  [ sec : relaxations ] . ]",
    "these conditions ensure that the current prices can always be viewed as a probability distribution over the outcome space .",
    "one example of a cost function based market that has received considerable attention is hanson s logarithmic market scoring rule ( lmsr )  @xcite .",
    "the cost function of the lmsr is @xmath19 , where @xmath20 is a parameter of the market controlling the rate at which prices change .",
    "the corresponding price function for each security @xmath8 is @xmath21 .",
    "when @xmath5 is large or infinite , calculating the cost of a purchase becomes intractable in general .",
    "recent research has focused on restricting the allowable securities over a combinatorial outcome space and examining whether lmsr prices can be computed efficiently in the restricted space .",
    "if the outcome space contains @xmath4 rank orders of @xmath1 competing candidates , it is # p - hard for lmsr to price pair bets ( e.g. , `` $ 1 if and only if candidate a beats candidate b '' ) or subset bets ( e.g. , `` $ 1 if one of the candidates in subset @xmath15 finishes at position @xmath22 '' )  @xcite .",
    "if the outcome space contains @xmath23 boolean values of @xmath1 binary base events , it is # p - hard for lmsr to price securities on conjunctions of any two base events ( e.g. , `` $ 1 if and only if a democrat wins florida and ohio '' )  @xcite .",
    "this line of research has led to some positive results when the uncertain event enforces particular structure on the outcome space . in particular , for a single - elimination tournament of @xmath1 teams , securities such as `` $ 1 if and only if team a wins a @xmath22th round game '' and `` $ 1 if and only if team a beats team b given they face off '' can be priced efficiently in lmsr  @xcite . for a taxonomy tree on some statistic where the value of the statistic of a parent node is the sum of those of its children , securities such as `` $ 1 if and",
    "only if the value of the statistic at node a belongs to @xmath24 $ ] '' can be priced efficiently in lmsr  @xcite .",
    "our paper takes a drastically different approach . instead of searching for supportable spaces of securities for existing market makers , we design new market makers tailored to any security space of interest . additionally , rather than requiring that securities have a fixed $ 1 payoff when the underlying event happens , we allow more general contingent securities with arbitrary efficiently computable and bounded payoffs .",
    "this research builds upon ideas from our earlier work  @xcite exploring the striking mathematical connections between complete cost function based prediction markets and no - regret learning . in that work",
    ", we first showed that any complete cost function based prediction market can be interpreted as an algorithm for learning from expert advice by equating the set of outcomes or states of the world with the set of experts in the learning setting , and equating trades made in the market with expert losses .",
    "furthermore , we showed that if the loss of the market maker is bounded , this bound can be used to derive an @xmath25 regret bound for the corresponding learning algorithm .",
    "that work focused entirely on complete markets , while here we explore how to use these connections to design new market making mechanisms for broader security spaces .",
    "in the complete cost function based markets described above , the market maker offers an arrow - debreu security corresponding to each potential state of the world . we consider a market - design scenario where the state space @xmath2 could potentially be quite large , or even infinite , making it infeasible to run such a market .",
    "instead , we allow the market maker to offer a menu of @xmath26 securities for some reasonably - sized @xmath26 , with the payoff of each security described by an arbitrary but efficiently - computable function @xmath27 . specifically , if a trader purchases a share of security @xmath28 and the outcome is @xmath8 , then the trader is paid @xmath29 .",
    "we call such security spaces _ complex_.",
    "a complex security space reduces to the complete security space if @xmath30 and for each @xmath31 , @xmath32 if and only if @xmath8 is the @xmath28th outcome .",
    "we consider traders that purchase _ security bundles _",
    "@xmath33 , and say that the payoff for @xmath34 upon outcome @xmath8 is exactly @xmath35 , where @xmath36 denotes the vector of payoffs for each security for outcome @xmath8 .",
    "let @xmath37 .",
    "we do not presuppose a cost function based market .",
    "however , in section  [ sec : axioms ] , we show that the use of a convex potential function is _ necessary _ given some minor assumptions . in section  [ sec : conjugatestuff ] , we go on to show how to design an appropriate cost function by employing techniques from online convex optimization .      in this section",
    "we introduce a sequence of conditions or axioms that one might expect a market to satisfy , and show that these conditions lead to some natural mathematical restrictions on the costs of security bundles .",
    "( we consider relaxations of these conditions in section  [ sec : relaxations ] . )",
    "similar conditions were suggested for complete markets by @xcite , who defined the notion of a _",
    "valid cost function _ , and by @xcite , who discussed properties similar to our notions of path independence and expressiveness , among others .",
    "imagine a sequence of traders entering the marketplace and purchasing security bundles .",
    "let @xmath38 be the sequence of security bundles purchased .",
    "after @xmath39 such purchases , the @xmath40th trader should be able to enter the marketplace and query the market maker for the cost of arbitrary bundles .",
    "the market maker must be able to furnish a cost @xmath41 for any bundle @xmath34 . if the trader chooses to purchase @xmath42 at a cost of @xmath43 , the market maker may update the costs of each bundle accordingly .",
    "our first condition requires that the cost of acquiring a bundle @xmath34 must be the same regardless of how the trader splits up the purchase .",
    "[ cond : pind ] for any @xmath34 , @xmath44 , and @xmath45 such that @xmath46 , for any @xmath47 , @xmath48 .",
    "it turns out that this condition _ alone _",
    "implies that prices can be represented by a cost function @xmath15 , as illustrated in the following theorem .",
    "the proof is by induction on @xmath40 .    under condition  [ cond :",
    "pind ] , there exists a cost function @xmath49 such that we may always write @xmath50 .",
    "[ thm : needcostfunc ]    with this in mind , we drop the cumbersome @xmath51 notation from now on , and write the cost of a bundle @xmath34 as @xmath12 , where @xmath52 is the vector of previous purchases .",
    "now , recall that one of the functions of a securities market is to aggregate traders beliefs into an accurate prediction .",
    "each trader may have his own ( potentially secret ) information about the future , which we represent as a distribution @xmath53 over the outcome space .",
    "the pricing mechanism should therefore incentivize the traders to reveal @xmath54 , while simultaneously avoid providing arbitrage opportunities . towards this goal",
    ", we introduce four additional conditions on our pricing mechanism .",
    "the first condition ensures that the gradient of @xmath15 is always well - defined .",
    "if we imagine that a trader can buy or sell an arbitrarily small bundle , we would like the cost of buying and selling an infinitesimally small quantity of any bundle to be the same .",
    "if @xmath55 is well - defined , it can be interpreted as a vector of instantaneous prices for each security , with @xmath13 representing the price per share of an infinitesimally small amount of security @xmath8 .",
    "additionally , we can interpret @xmath55 as the traders current estimates of the expected payoff of each security , in the same way that @xmath13 was interpreted as the probability of outcome @xmath8 when considering the complete security space .",
    "[ cond : smooth ] @xmath15 is continuous and differentiable everywhere .",
    "the next condition encompasses the idea that the market should react to trades in a sensible way in order to incorporate the private information of the traders .",
    "in particular , it says that the purchase of a security bundle @xmath34 should never cause the market to lower the price of @xmath34 .",
    "it turns out that this condition is closely related to incentive compatibility for a myopic trader .",
    "it is equivalent to requiring that a trader with a distribution @xmath53 can never find it simultaneously profitable ( in expectation ) to buy a bundle @xmath34 or to buy the bundle @xmath56 . in other words",
    ", there can not be more than one way to express one s information .",
    "[ cond : info ] for any @xmath57 and @xmath33 , @xmath58 .",
    "the no arbitrage condition states that it is never possible for a trader to purchase a security bundle @xmath34 and receive a positive profit regardless of the outcome .",
    "[ cond : arbfree ] for all @xmath59 , there exists an @xmath10 such that @xmath60 .",
    "finally , the expressiveness condition specifies that any trader can set the market prices to reflect his beliefs about the expected payoffs of each security if arbitrarily small portions of shares may be purchased .",
    "[ cond : express ] for any @xmath53 , @xmath61 for which @xmath62 $ ] .",
    "let @xmath63 denote a convex hull .",
    "we characterize the form of the cost function under these conditions .    under conditions  [ cond : smooth]-[cond :",
    "express ] , @xmath15 must be convex with @xmath64 .",
    "[ thm : characterization ]    specifically , the existence of instantaneous prices implies that @xmath55 is well - defined .",
    "the incorporation of information condition implies that @xmath15 is convex .",
    "the convexity of @xmath15 and the no arbitrage condition imply that @xmath65 .",
    "finally , the expressiveness condition is equivalent to requiring that @xmath66 .",
    "this theorem tells us that to satisfy our conditions , the set of reachable prices of a market should be _ exactly _ the convex hull of @xmath67 . for complete markets , this would imply that the set of reachable prices should be precisely the set of all probability distributions over the @xmath1 outcomes .",
    "the natural conditions we introduced above imply that to design a market for a set of @xmath26 securities with payoffs specified by an arbitrary payoff function @xmath27 , we should use a cost function based market with a convex , differentiable cost function such that @xmath64 .",
    "we now provide a general technique that can be used to design and compare properties of cost functions that satisfy these criteria . in order to accomplish this ,",
    "we make use of tools from convex analysis .    it is well known that any closed",
    ", convex , differentiable function @xmath68 can be written in the form @xmath69 for a strictly convex function @xmath70 called the _ conjugate _ of @xmath15 .",
    "( the strict convexity of @xmath70 follows from the differentiability of @xmath15 . )",
    "furthermore , any function that can be written in this form is convex . as we will show in section  [ sec : conjprops ]",
    ", the gradient of @xmath15 can be expressed in terms of this conjugate : @xmath71 . to generate a convex cost function @xmath15 such that @xmath72 for all @xmath57 for some set @xmath73 , it is therefore sufficient to choose an appropriate conjugate function @xmath70 , restrict the domain of @xmath70 to @xmath73 , and define @xmath15 as @xmath74    we call such a market a _",
    "complex cost function based market_. to generate a cost function @xmath15 satisfying our five conditions , we need only to set @xmath75 and select a strictly convex function @xmath70 .",
    "this method of defining @xmath15 is convenient for several reasons .",
    "first , it leads to markets that are efficient to implement whenever @xmath73 can be described by a polynomial number of simple constraints .",
    "similar techniques have been applied to design learning algorithms in the online convex optimization framework  @xcite , where @xmath70 plays the role of a regularizer , and have been shown to be efficient in a variety of combinatorial applications , including online shortest paths , online learning of perfect matchings , and online cut set  @xcite .",
    "second , it yields simple formulas for properties of markets that help us choose the best market to run .",
    "two of these properties , worst - case monetary loss and worst - case information loss , are analyzed below .",
    "note that both the lmsr and quad - scpm  @xcite are examples of complex cost function based markets , though they are designed for the complete market setting only .      before discussing market properties , it is useful to review some helpful properties of conjugates .",
    "the first is a convenient duality : for any convex , closed function @xmath15 , the conjugate of the conjugate of @xmath15 is @xmath15 itself .",
    "this implies that if @xmath15 is defined as in equation  [ eqn : costfunc ] , we may write @xmath76 . since this maximization is unconstrained , the maximum occurs when @xmath77 .",
    "( note that this may hold for many different values of @xmath57 . )",
    "suppose for a particular pair @xmath78 we have @xmath79 .",
    "we can then rewrite this equation as @xmath80 , which gives us that @xmath81 . from equation  [ eqn : costfunc ] ,",
    "this tells us that @xmath82 must be a maximizer of @xmath83 .",
    "in fact , it is the unique maximizer due to strict convexity .",
    "this implies , as mentioned above , that @xmath84 .    by a similar argument",
    "we have that for any @xmath57 , if @xmath85 then @xmath86 maximizes @xmath83 and therefore , as we have just shown , @xmath87 .",
    "however , the fact that @xmath87 _ does not _ imply that @xmath85 ; in the markets we consider , it is generally the case that @xmath87 for multiple @xmath57 .",
    "we also make use of the notion of bregman divergence .",
    "the _ bregman divergence _ with respect to a convex function @xmath88 is given by @xmath89 .",
    "it is clear by convexity that @xmath90 for all @xmath86 and @xmath91 .",
    "when comparing market mechanisms , it is useful to consider the market maker s worst - case monetary loss , @xmath92 .",
    "this quantity is simply the worst - case difference between the maximum amount that the market maker might have to pay the traders ( @xmath93 ) and the amount of money collected by the market maker ( @xmath94 ) .",
    "the following theorem provides a bound on this loss in terms of the conjugate function @xmath70 .",
    "consider any complex cost function based market with @xmath75 .",
    "let @xmath57 denote the vector of quantities sold and @xmath8 denote the true outcome .",
    "the monetary loss of the market maker is no more than @xmath95 consequently , the worst - case market maker loss is no more than @xmath96 .",
    "[ thm : worstcaseloss ]    this theorem tells us that as long as the conjugate function is bounded on @xmath97 , the market maker s worst - case loss is also bounded .",
    "furthermore , it quantifies the intuitive notion that the market maker will have higher profits when the distance between @xmath36 and the final vector of prices @xmath55 is large .",
    "viewed another way , the market maker will pay more when @xmath55 is a good estimate of @xmath36 .",
    "information loss can occur when securities are sold in discrete quantities ( for example , single units ) , as they are in most real - world markets . without the ability to purchase arbitrarily small bundles",
    ", traders may not be able to change the market prices to reflect their true beliefs about the expected payoff of each security , even if expressiveness is satisfied .",
    "we will argue that the amount of information lost is captured by the market s bid - ask spread for the smallest trading unit .",
    "given some @xmath57 , the current bid - ask spread of security bundle @xmath34 is defined to be @xmath98 .",
    "this is simply the difference between the current cost of buying the bundle @xmath34 and the current price at which @xmath34 could be sold .    to see how the bid - ask spread relates to information loss ,",
    "suppose that the current vector of quantities sold is @xmath57 .",
    "if securities must be sold in unit chunks , a rational , risk - neutral trader will not buy security @xmath28 unless she believes the expected payoff of this security is at least @xmath99 .",
    "similarly , she will not sell security @xmath28 unless she believes the expected payoff is at most @xmath100 .",
    "if her estimate of the expected payoff of the security is between these two values , she has no incentive to buy or sell the security . in this case , it is only possible to infer that the trader believes the true expected payoff lies somewhere in the range @xmath101 $ ] .",
    "the bid - ask spread is precisely the size of this range .",
    "intuitively , the bid - ask spread relates to the depth of the market .",
    "when the bid - ask spread is small , a small order can change the prices of the securities dramatically .",
    "the market is shallow .",
    "when the bid - ask spread is large , large orders may only move the prices slightly .",
    "the market is deep .",
    "the bid - ask spread depends on how fast the instantaneous prices change . for complete markets , chen and pennock",
    "@xcite use the inverse of @xmath102 to capture this notion for each security @xmath8 independently .",
    "we define a _ market depth parameter _ , @xmath103 , for our complex securities markets with twice - differentiable @xmath15 in a similar spirit .",
    "we will bound the bid - ask spread in terms of this parameter . using the market depth parameter , it is easy to see that there exists a clear trade - off between worst - case monetary loss and information loss .",
    "for any complex cost function based market , if @xmath15 is twice - differentiable , the _ market depth parameter _",
    "@xmath104 for a quantity vector @xmath57 is defined as @xmath105 , where @xmath106 is the largest eigenvalue of @xmath107 , the hessian of @xmath15 at @xmath57 .",
    "the worst - case market depth is @xmath108 .",
    "let @xmath109 be the relative interior of @xmath73 .",
    "if @xmath15 is twice - differentiable , then for any @xmath57 such that @xmath110 , we have a correspondence between the hessian of @xmath15 at @xmath57 and the hessian of @xmath70 at @xmath55 .",
    "more precisely , we have that @xmath111 for any @xmath112 with @xmath113 .",
    "( see , for example , gorni @xcite for more . )",
    "this means that @xmath104 is equivalently defined as the smallest eigenvalue of @xmath114 ; that is , where we consider the second derivative only within the price region @xmath73 .",
    "the definition of worst - case market depth implies that @xmath115 is an upper bound on the curvature of @xmath15 , which implies that @xmath15 is locally bounded by a quadratic with hessian @xmath116 .",
    "we can derive the following .    consider a complex cost function based market with worst - case market depth @xmath103 .",
    "for any @xmath57 and @xmath34 we have @xmath117 . [",
    "lem : dcbound ]    it is easy to verify that the bid - ask spread can be written in terms of bregman divergences . in particular ,",
    "this implies that the worst - case bid - ask spread of a market with market depth @xmath103 can be upperbounded by a constant times @xmath115 .",
    "that is , as the market depth parameter increases , the bid - ask spread must decrease .",
    "the following theorem shows that this leads to an inherent tension between worst - case monetary loss and information loss .    for any complex cost function based market with worst - case market depth @xmath103 , for any @xmath34 , @xmath57 meeting the conditions in lemma  [ lem : dcbound ] , the bid - ask spread for bundle @xmath34 with previous purchases @xmath57 is no more than @xmath119 . the worst - case monetary loss of the market maker at least @xmath120 .",
    "[ thm : betatheorem ]    we can see that there is a direct trade - off between the upper bound of the bid - ask spread , which shrinks as @xmath103 grows , and the lower bound of the worst - case loss of the market maker , which grows linearly in @xmath103 .",
    "this trade - off is very intuitive . when the market is shallow ( small @xmath103 )",
    ", small trades have a large impact on market prices , and traders can not purchase too many shares of the same security without paying a lot .",
    "when the market is deep ( large @xmath103 ) , prices change slowly , allowing the market maker to gain more precise information , but simultaneously forcing the market maker to take on more risk since many shares of a security can be purchased at prices that are potentially too low .",
    "this trade - off can be adjusted by scaling @xmath70 , which scales @xmath103 .",
    "this is analogous to adjusting the `` liquidity parameter '' @xmath121 in the lmsr .      to illustrate the use of our framework for market design , we consider the following example . an object orbiting the planet , perhaps a satellite ,",
    "is predicted to fall to earth in the near future and will land at an unknown location , which we would like to predict .",
    "we represent locations on the earth as unit vectors @xmath122 . we will design a market with three securities , each corresponding to one coordinate of the final location of the object .",
    "in particular , security @xmath28 will pay off @xmath123 dollars if the object lands in location @xmath124 .",
    "( the addition of @xmath125 , while not strictly necessary , ensures that the payoffs , and therefore prices , remain positive , though it will be necessary for traders to sell securities to express certain beliefs . )",
    "this means that traders can purchase security bundles @xmath126 and , when the object lands at a location @xmath124 , receive a payoff @xmath127 .",
    "note that in this example , the outcome space is infinite , but the security space is small .",
    "the price space @xmath97 for this market will be the 2-norm unit ball centered at @xmath128 . to construct a market for this scenario ,",
    "let us make the simple choice of @xmath129 for some parameter @xmath130 .",
    "when @xmath131 , there exists an @xmath86 such that @xmath85 .",
    "in particular , this is true for @xmath132 , and @xmath133 is minimized at this point . when @xmath134 , @xmath133 is minimized at an @xmath86 on the boundary of @xmath97 .",
    "specifically , it is minimized at @xmath135 . from this",
    ", we can compute @xmath136 the market depth parameter @xmath103 is @xmath137 ; in fact , @xmath138 for any price vector @xmath86 in the interior of @xmath97 . by theorem  [ thm :",
    "worstcaseloss ] , the worst - case loss of the market maker is no more than @xmath139 , which is precisely the lower bound implied by theorem  [ thm : betatheorem ] . finally , the divergence @xmath140 for all @xmath141 , with equality when @xmath142 , implying that the bid - ask spread scales linearly with @xmath143 .",
    "thus far , we have argued that the space of feasible price vectors should be precisely @xmath97 . in this section ,",
    "we consider more general price spaces .",
    "this generalization can be beneficial when dealing with security spaces for which the convex hull @xmath97 is difficult to optimize over directly .",
    "it also enables the design of markets that grow increasingly deep without requiring a sacrifice in terms of worst - case loss .    as before",
    ", each market will be defined in terms of a pair @xmath144 where @xmath145 is a convex compact set of feasible prices and @xmath146 is a strictly convex function with domain @xmath73 .",
    "the market s cost function @xmath15 will be the conjugate of @xmath70 with respect to the set @xmath73 , as in equation  [ eqn : costfunc ] .",
    "the only difference is that we now allow @xmath73 to be distinct from @xmath97 .",
    "not surprisingly , the choice of @xmath73 will affect the interest of the traders and the market maker .",
    "we prove several claims which will aid us in our market design .",
    "proposition  [ prop : unbounded ] tells us that the expressiveness condition should not be relaxed , while proposition  [ prop : newworstcaseloss ] tells us that the no - arbitrage condition can be .",
    "together , these imply that we may safely choose @xmath73 to be a _ superset _ of @xmath97 .    for any complex cost function",
    "based market , the worst - case loss of the market maker is unbounded if @xmath147 .",
    "[ prop : unbounded ]    this ( perhaps surprising ) proposition tells us that expressiveness is not only useful for information aggregation , it is actually _ necessary _ for the market maker to avoid unbounded loss .",
    "the proof involves showing that if @xmath8 is the final outcome and @xmath148 , then it is possible to make an infinite sequence of trades such that each trade causes a constant amount of loss to the market maker .    in the following proposition , which is a simple extension of theorem  [ thm : worstcaseloss ] ,",
    "we see that including additional price vectors in @xmath73 does not adversely impact the market maker s worst - case loss , despite the fact that the no - arbitrage condition is violated .    [ prop : wcl_relax ] consider any complex cost function based market with @xmath70 and @xmath73 satisfying @xmath149 and @xmath150 .",
    "assume that the initial price vector satisfies @xmath151 .",
    "let @xmath57 denote the vector of quantities sold and @xmath8 denote the true outcome .",
    "the monetary loss of the market maker is no more than @xmath152 .",
    "[ prop : newworstcaseloss ]    this tells us that expanding @xmath73 can only help the market maker ; increasing the range of @xmath55 can only increase the divergence term .",
    "this may seem somewhat counterintuitive .",
    "we originally required that @xmath153 as a consequence of the no - arbitrage condition , and by relaxing this condition , we are providing traders with potential arbitrage opportunities .",
    "however , these arbitrage opportunities do not hurt the market maker . as long as the initial price vector lies in @xmath97 ,",
    "any such situations where a trader can earn a guaranteed profit are effectively created ( and paid for ) by other traders ! in fact , if the final price vector @xmath55 falls outside the convex hull , the divergence term will be strictly positive , improving the bound .    to elaborate on this point ,",
    "let s consider an example where @xmath73 is strictly larger than @xmath97 .",
    "let @xmath57 be the current vector of purchases , and assume the associated price vector @xmath87 lies in the interior of @xmath97 .",
    "consider a trader who purchases a bundle @xmath34 such that the new price vector leaves this set , i.e. , @xmath154 .",
    "we claim that this choice can be strictly improved in the sense that there is an alternative bundle @xmath44 whose associated profit , for any outcome @xmath8 , is strictly greater than the profit for @xmath34 .    for simplicity ,",
    "assume @xmath91 is an interior point of @xmath155 so that @xmath156 .",
    "define @xmath157 , the minimum divergence projection of @xmath91 into @xmath97 .",
    "the alternative bundle we consider is @xmath158 .",
    "our trader pays @xmath159 less to purchase @xmath44 than to purchase @xmath34 .",
    "hence , for any outcome @xmath8 , we see that the increased profit for @xmath44 over @xmath34 is @xmath160 notice that we achieve strict inequality precisely because @xmath161 .",
    "now use the optimality condition for @xmath162 to see that , since @xmath163 , @xmath164 .",
    "it is easy to check that @xmath165 . combining this last expression with the inequality above and tells us that the profit increase is strictly greater than @xmath166 .",
    "simply put , the trader receives a guaranteed positive increase in profit for any outcome @xmath8 .",
    "the next proposition shows that any time the price vector lies outside of @xmath36 , traders could profit by moving it back inside .",
    "the proof uses a nice application of minimax duality for convex - concave functions .    for any complex cost function based market ,",
    "given a current quantity vector @xmath167 with current price vector @xmath168 , a trader has the opportunity to earn a guaranteed profit of at least @xmath169 .",
    "[ prop : arbitragebound ]    in the case that @xmath170 , @xmath171 is minimized when @xmath172 and the bound is vacuous , as we would expect .",
    "the more interesting case occurs when the prices have fallen outside of @xmath97 , in which case a trader is guaranteed a riskless profit by moving the price vector to the closest point in @xmath97 .",
    "we now turn our attention to the design of a prediction market for the scenario in which the outcome is some _ ranking _ of a set of @xmath1 competitors , such as @xmath1 horses in a race .",
    "the outcome of such a race is a permutation @xmath173 \\to [ n]$ ] , where @xmath174 is the final position of @xmath28 , with @xmath175 being best , and @xmath176 $ ] denotes the set @xmath177 . a typical market for this setting might offer @xmath1 arrow - debreu securities , with the @xmath28th security paying off if and only if @xmath175 .",
    "additionally , there might be a separate , _ independent _ markets allowing bets on horses to place ( come in first or second ) or show ( come in first , second , or third ) .",
    "however , running independent markets for sets of outcomes with clear correlations is wasteful in that information revealed in one market does not automatically propagate to the others .",
    "instead , we consider a complex market in which bettors can make arbitrary _ pair bets _ : for every @xmath178 , a bettor can purchase a security which pays out if and only if @xmath179 . pricing such bets using lmsr is known to be # p - hard  @xcite .",
    "we can represent the payoff structure of any such outcome @xmath180 by a matrix @xmath181 defined by @xmath182 we would like to choose our feasible price region as the set @xmath183 , where @xmath184 is the set of permutations on @xmath176 $ ] .",
    "unfortunately , the computation of this convex hull is necessarily hard : if given only a separation oracle for the set @xmath183 , we could construct a linear program to solve the `` minimum feedback arcset '' problem , which is known to be np - hard .    on the positive side ,",
    "we see from the previous section that the market maker can work in a larger feasible price space without risking a larger loss .",
    "we thus relax our feasible price region @xmath73 to the set of matrices @xmath185 satisfying @xmath186 \\\\",
    "x(i , j ) & = 1 - x(j , i ) & \\forall i , j \\in [ n ] \\\\       x(i ,",
    "j ) + x(j , k ) + x(k , i ) & \\geq 1 & \\forall i , j , k \\in [ n ] \\end{aligned}\\ ] ]    this relaxation was first discussed by meggido @xcite , who referred to such matrices as _",
    "generalized order matrices_. he proved that , for @xmath187 , we do have @xmath188 , but gave a counterexample showing strict containment for @xmath189 . by using this relaxed price space , the market maker allows traders to bring the price vector outside of the convex hull , yet includes a set of basic ( and natural ) constraints on the prices .",
    "such a market could be implemented with any strongly convex conjugate function ( e.g. , quadratic ) .",
    "let us return our attention to proposition  [ prop : wcl_relax ] , which bounds the worst - case loss of the market maker .",
    "notice the term @xmath190 is strictly positive , and accounts for the market maker s risk in offering the market .",
    "on the other hand , the term @xmath191 is non - positive , representing the potential profit that the market maker can earn if the final price vector @xmath55 is far from @xmath36 . the potential to make a profit may be appealing , but note that this term will approach @xmath192 if @xmath55 approaches",
    "@xmath36 as traders gain information .",
    "( consider the behavior of traders in an election market as votes start to be tallied . ) as discussed in section  [ sec : infoloss ] , the market maker can reduce his worst - case loss by adjusting the depth parameter , but this will result in a shallow market with a larger bid - ask spread .    to combat these problems , we propose a technique that allows us to guarantee lower worst - case loss without creating a shallow market by relaxing the feasible price region @xmath73 .",
    "this relaxation is akin to introducing a transaction cost .",
    "by constructing the correct conjugate function , we may obtain a market with a bounded worst - case loss , a potential profit , and market depth that grows with the number of trades .    for simplicity",
    ", we consider the complete market scenario in which the marker maker offers an arrow - debreu security for every outcome .",
    "let @xmath193 denote outcome @xmath28 and @xmath194 . in this case , @xmath195 , and @xmath196 , the @xmath1-simplex .",
    "we define @xmath197 , where @xmath198 is some maximal transaction cost .",
    "the transaction cost is not imposed on individual traders or individual securities , but is split among all securities .",
    "we also introduce the requirement that traders can only purchase _ positive _ bundles @xmath199 . in general , this restriction could prevent the traders from expressing `` negative '' beliefs , as we are disallowing the explicit shorting of securities , but in this particular market traders still have the ability to effectively short a security by purchasing equal quantities of the other @xmath200 securities .",
    "we must now choose any conjugate function @xmath70 satisfying the the following conditions :    1 .",
    "@xmath70 grows no larger than a constant within @xmath201 , so the worst - case loss @xmath202 remains small .",
    "2 .   outside of @xmath201",
    ", @xmath203 becomes increasingly curved as @xmath86 approaches the constraint @xmath204 .",
    "( notice that the price vector @xmath86 is guaranteed to approach this constraint as purchases are made since we allow only positive bundles to be purchased and thus @xmath57 can only grow . ) hence , the smallest eigenvalue of @xmath205 , which is the market depth at @xmath86 , must grow large as @xmath86 approaches this boundary .",
    "the construction we have proposed here has several nice properties .",
    "it has bounded worst - case loss due to condition 1 , and increasing market depth by condition 2 .",
    "it imposes a transaction cost by letting the prices leave the simplex , but it does so in a smooth fashion ; the sum of prices only approaches the value @xmath206 after many trades have occurred , and at this point the market depth will have become large .",
    "lastly , as a result of condition 2 , we know that the market maker s earnings increase as more trades occur , since @xmath207 must eventually increase as the price vector @xmath86 approaches the @xmath206 constraint .",
    "the idea of introducing transaction costs to allow increasing market depth was also proposed by othman  et  al .",
    "@xcite , who introduced a modified lmsr market maker with a particular cost function @xmath15 .",
    "their market can be viewed as a special case of our approach , although it is not defined via conjugate duality .",
    "in particular , they set the feasible price region of their market maker as a convex subset of @xmath208 for a positive parameter @xmath209 .",
    "below we provide all proofs that were omitted from the paper .",
    "when @xmath213 , this holds trivially .",
    "assume that equation  [ eq : cbased_ind ] holds for all bundle sequences of any length @xmath214 .",
    "by condition  [ cond : pind ] , @xmath215 and we see that equation  [ eq : cbased_ind ] holds for @xmath216 too .",
    "@xmath217      we first prove convexity .",
    "assume @xmath15 is non - convex somewhere .",
    "then there must exist some @xmath57 and @xmath34 such that @xmath218 .",
    "this means @xmath219 , which contradicts condition  [ cond : info ] , so @xmath15 must be convex .",
    "now , condition  [ cond : smooth ] trivially guarantees that @xmath55 is well - defined for any @xmath57 . to see that @xmath65 , let us assume there exists some @xmath220 for which @xmath221 .",
    "this can be reformulated in the following way : there must exists some halfspace , defined by a normal vector @xmath34 , that separates @xmath222 from every member of @xmath67 .",
    "more precisely @xmath223 on the other hand , letting @xmath224 , we see by convexity of @xmath15 that @xmath225 . combining these last two inequalities",
    ", we see that the price of bundle @xmath34 purchased with history @xmath57 is always smaller than the payoff for _ any _ outcome .",
    "this implies that there exists some arbitrage opportunity , contradicting condition  [ cond : arbfree ] .",
    "since @xmath57 is the final quantity vector , @xmath55 is the final vector of instantaneous prices . from equation  [ eqn : costfunc ]",
    ", we have that @xmath227 and @xmath228 .",
    "the difference between the amount that the market maker must pay out and the amount that the market maker has previously collected is then @xmath229 where @xmath230 is the bregman divergence with respect to @xmath70 , as defined above .",
    "the inequality follows from the first - order optimality condition for convex optimization : @xmath231        the bound on the bid - ask spread follows immediately from lemma  [ lem : dcbound ] and the argument above . the value @xmath103 lower - bounds the eigenvalues of @xmath70 everywhere on @xmath73 .",
    "hence , if we do a quadratic lower - bound of @xmath70 from the point @xmath233 with hessian defined by @xmath234 , then we see that @xmath235 . in the worst - case , @xmath236 , which finishes the proof .",
    "@xmath217      consider some outcome @xmath8 such that @xmath237 .",
    "the feasible price set @xmath238 is compact . because @xmath237 , there exists a hyperplane that _ strongly _ separates @xmath73 and @xmath239 .",
    "in other words , there exists an @xmath240 such that @xmath241 .",
    "when outcome @xmath8 is realized , @xmath242 is the market maker s loss given @xmath57 .",
    "we have @xmath243 , which represents the instantaneous change of the market maker s loss . for infinitesimal @xmath244 ,",
    "let @xmath245 . then , @xmath246=",
    "b(\\q ) + \\epsilon",
    "||\\rho(\\o ) - \\nabla c(\\q)||^2 \\leq b(\\q ) + \\epsilon k^2.\\ ] ] this shows that for any @xmath57 we can find a @xmath220 such that the market maker s worst - case loss is at least increased by @xmath247 .",
    "this process can continue for infinite steps .",
    "hence , we conclude that the market maker s loss is unbounded .",
    "this proof is nearly identical to the proof of theorem  [ thm : worstcaseloss ] .",
    "the only major difference is that now @xmath248 instead of @xmath249 , but this is equivalent since we have assumed that @xmath151 .",
    "@xmath250 is still well - defined and finite since we have assumed that @xmath150 .        a trader looking to earn a guaranteed profit when the current quantity is @xmath167 hopes to purchase a bundle @xmath34 so that the worst - case profit @xmath251 is as large as possible .",
    "notice that this quantity is strictly positive since @xmath252 , which always has 0 profit , is one option .",
    "thus , a trader would like to solve the following objective : @xmath253 the first equality with the @xmath254 swap holds via sion s minimax theorem  @xcite .",
    "the last inequality was obtained using the first - order optimality condition of the solution @xmath255 for the vector @xmath256 which holds since @xmath257 ."
  ],
  "abstract_text": [
    "<S> building on ideas from online convex optimization , we propose a general framework for the design of efficient securities markets over very large outcome spaces . </S>",
    "<S> the challenge here is computational . in a complete market , in which one security is offered for each outcome </S>",
    "<S> , the market institution can not efficiently keep track of the transaction history or calculate security prices when the outcome space is large . </S>",
    "<S> the natural solution is to restrict the space of securities to be much smaller than the outcome space in such a way that securities can be priced efficiently . </S>",
    "<S> recent research has focused on searching for spaces of securities that can be priced efficiently by existing market mechanisms designed for operating complete markets . </S>",
    "<S> while there have been some successes , much of this research has led to hardness results .    in this paper , </S>",
    "<S> we take a drastically different approach . </S>",
    "<S> we start with an arbitrary space of securities with bounded payoff , and establish a framework to design markets tailored to this space . </S>",
    "<S> we prove that any market satisfying a set of intuitive conditions must price securities via a convex potential function and that the space of reachable prices must be precisely the convex hull of the security payoffs . </S>",
    "<S> we then show how the convex potential function can be defined in terms of an optimization over the convex hull of the security payoffs . </S>",
    "<S> the optimal solution to the optimization problem gives the security prices . using this framework </S>",
    "<S> , we provide an efficient market for predicting the landing location of an object on a sphere . </S>",
    "<S> in addition , we show that we can relax our `` no - arbitrage '' condition to design a new efficient market maker for pair betting , which is known to be # p - hard to price using existing mechanisms . </S>",
    "<S> this relaxation also allows the market maker to charge transaction fees so that the depth of the market can be dynamically increased as the number of trades increases . </S>"
  ]
}