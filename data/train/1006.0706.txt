{
  "article_text": [
    "termination is an important property of computing systems and it has generated significant renewed interest in recent years .",
    "there has been progress on both the theoretical and practical aspects of proving termination of many different computing paradigms - such as term rewrite systems ( trs ) , functional programs , and imperative programs .",
    "innermost termination refers to termination of rewriting restricted to the innermost strategy , which forces the complete evaluation of all the subterms before a rule is applied at any position .",
    "it corresponds to the `` call by value '' computation of programming languages .",
    "a typical example of a trs that is innermost terminating but not terminating is the following  @xcite : @xmath0 the non - terminating derivation @xmath1 is not possible with innermost rewriting , since @xmath2 has to be normalized before a rule can be applied at the root position to reduce @xmath3",
    ".    often , a term rewrite system contains rules that are trivially non - terminating ( like commutativity : @xmath4 ) and one desires to ensure a weaker notion than termination , namely termination of a term rewrite system @xmath5 modulo a theory @xmath6 ( for example , when @xmath7 ) .",
    "althought @xmath8 could be non - terminating , in some cases the important question is to determine if there is a derivation with @xmath8 that has infinitely many rewrite steps with rules in @xmath5 .    while termination is undecidable for general trs and string rewrite systems  @xcite , several subclasses with decidable termination problem have been identified .",
    "termination is decidable for ground trs  @xcite ; in fact , in polynomial time  @xcite .",
    "termination is decidable for right - ground trs  @xcite and also for the more general class that also has collapsing ( right - variable ) rules  @xcite .",
    "later , it was shown that termination is decidable for trs that contain any combination of right - ground , collapsing , and shallow right - linear rewrite rules  @xcite .",
    "there are further known decidability results about shallow left - linear and shallow right - linear trs  @xcite .",
    "this paper focuses on termination and innermost termination of trs for rewriting modulo permutative theories .",
    "here we extend the results of our conference paper  @xcite by generalizing from plain rewriting to rewriting modulo permutative theories .",
    "moreover , we provide extended proofs of our earlier results , and a new pspace - hardness result .",
    "the main contributions of the paper are as follows : + ( 1 ) in section  [ sec - right - flat ] , we prove that termination _ starting from a given fixed term _ is decidable for right - shallow trs and rewriting modulo permutative theories .",
    "this result is used to obtain subsequent results .",
    "+ ( 2 ) in section  [ sec - innermost ] , we consider innermost rewriting modulo permutative theories and show that termination is decidable for shallow trs .",
    "+ ( 3 ) in section  [ sec - right - flat - linear ] , we show that termination ( and innermost termination as well ) is decidable for rewriting modulo permutative theories using trs whose right - hand side terms are both shallow and linear .",
    "there is no restriction on the left - hand side terms .",
    "thus , right - ground trs and shallow right - linear trs are both contained in our class .",
    "+ ( 4 ) in section  [ sec - hardness ] , we prove that termination , as well as innermost termination , is pspace - hard for flat ( and hence shallow ) right - linear trs . + ( 5 ) in section  [ sec - undec ] , we show undecidability of termination for flat trs and plain rewriting , and undecidability of termination for right - shallow trs and innermost rewriting .",
    "uchiyama , sakai and sakabe  @xcite have recently also generalized the results of our conference paper  @xcite by replacing syntactic restrictions on the rewrite rules by syntactic restrictions on the _ dependency pairs_. specifically , termination and innermost termination were shown to be decidable for trs whose dependency pairs are right - linear and right - shallow ; and innermost termination was shown to be decidable for trs whose dependency pairs are shallow .",
    "we use standard notation from the term rewriting literature  @xcite .",
    "a signature @xmath9 is a ( finite ) set of function symbols with arity , which is partitioned as @xmath10 such that @xmath11 if the arity of @xmath12 is @xmath13 .",
    "symbols in @xmath14 , called _ constants _ , are denoted by @xmath15 , with possible subscripts .",
    "the elements of a set @xmath16 of variable symbols are denoted by @xmath17 with possible subscripts .",
    "the set @xmath18 of _ terms _ over @xmath9 and @xmath16 , is the smallest set containing @xmath16 and such that @xmath19 is in @xmath18 whenever @xmath20 , and @xmath21 .",
    "a _ position _ is a sequence of positive integers .",
    "the set of positions of a term @xmath22 , denoted @xmath23 , is defined recursively as follows . if @xmath22 is a variable then @xmath23 is @xmath24 , where @xmath25 represents the empty sequence .",
    "if @xmath22 is of the form @xmath26 , then @xmath23 is @xmath27 .",
    "if @xmath28 is a position and @xmath22 is a term , then by @xmath29 we denote the _ subterm of @xmath22 at position @xmath28 _ : we have @xmath30 ( where @xmath25 denotes the empty sequence ) and @xmath31 if @xmath32 ( and is undefined if @xmath33 ) . by @xmath34",
    "we denote the length of a position @xmath28 .",
    "we also write @xmath35_p$ ] to denote the term obtained by replacing in @xmath22 the subterm at position @xmath28 by the term @xmath36 .",
    "more formally , @xmath35_\\lambda$ ] is @xmath36 , and @xmath37_{i.p}$ ] is @xmath38_{p},t_{i+1},\\ldots , t_m)$ ] .",
    "for example , if @xmath22 is @xmath39 , then @xmath40 , and @xmath41_{2.2}= f(a , g(b , d),d)$ ] . note that @xmath42_{p}$ ] , and that the equality @xmath43_p$ ] implies @xmath44 .",
    "the set of all subterms of a term @xmath36 is denoted by @xmath45 .",
    "the symbol occurring at the root of a term @xmath22 is denoted as @xmath46 .",
    "we write @xmath47 ( equivalently , @xmath48 ) and say @xmath49 is below @xmath50 ( equivalently , @xmath50 is above @xmath49 ) if @xmath50 is a proper prefix of @xmath49 , that is , @xmath51 for some non - empty @xmath52 . in this case , by @xmath53 we denote @xmath52 . by @xmath54",
    "we denote that either @xmath55 or @xmath56 hold .",
    "positions @xmath28 and @xmath57 are _ parallel _ , denoted @xmath58 , if @xmath59 and @xmath60 hold . by @xmath61",
    "we denote the set of all variables occurring in a term @xmath22 .",
    "the height of a term @xmath36 is @xmath62 if @xmath36 is a variable or a constant , and @xmath63 if @xmath64 .",
    "the depth of an occurrence at position @xmath28 of a term @xmath22 in a term @xmath65_p$ ] is @xmath34 .",
    "sometimes we will denote a term @xmath66 by the simplified form @xmath67 when the arity of @xmath12 is @xmath68 , and @xmath35_p$ ] by @xmath35 $ ] when @xmath28 is clear from the context or not important .    a _ substitution _",
    "@xmath69 is a mapping from variables to terms .",
    "it can be homomorphically extended to a function from terms to terms : @xmath70 denotes the result of simultaneously replacing in @xmath22 every @xmath71 by @xmath72 .",
    "for example , if @xmath69 is @xmath73 , then @xmath74 is @xmath75 .",
    "rewrite rule _ over @xmath9 is a pair of terms @xmath76 of @xmath18 , denoted by @xmath77 , with left - hand side @xmath78 and right - hand side @xmath79 .",
    "we make the usual assumptions for the rules , i.e.  @xmath78 is not a variable , and all variables occurring in the term @xmath79 also occur in the term @xmath78 .",
    "term rewrite system _ ( trs ) @xmath5 over @xmath9 is a finite set of rewrite rules over @xmath9 .",
    "we often assume @xmath9 as implicit when talking about a trs @xmath5 .",
    "we say that @xmath36 rewrites to @xmath22 in one step at position @xmath28 ( by @xmath5 ) , denoted by @xmath80 , if @xmath81 and @xmath82_p$ ] , for some @xmath83 and substitution @xmath69 .",
    "we also denote such a rewrite step by @xmath84 if we make explicit the used rule @xmath85 and substitution @xmath69 .",
    "if @xmath86 , then the rewrite step @xmath87 is said to be applied at the root . otherwise , it is denoted by @xmath88 .",
    "if @xmath89 is a binary relation on a set @xmath90 , then @xmath91 is its symmetric closure , @xmath92 is its transitive closure , @xmath93 is its inverse , and @xmath94 is its reflexive - transitive closure .    a _ ( rewrite ) derivation _ ( from @xmath36 ) is a sequence of rewrite steps ( starting from @xmath36 ) , that is , a sequence @xmath95 .",
    "with @xmath96 we denote that @xmath22 is @xmath5-reachable from @xmath36 , or a concrete derivation from @xmath36 to @xmath22 , depending on the context .",
    "a term @xmath22 is context - reachable from @xmath36 with @xmath5 ( with a non - empty context ) if there exists a derivation of the form @xmath97 where @xmath22 is a ( proper ) subterm of @xmath98 .",
    "the length of a derivation @xmath99 , denoted @xmath100 , is its number of rewrite steps .",
    "we denote this derivation as @xmath101 , @xmath102 and @xmath103 when this number is @xmath62 , @xmath68 , and @xmath62 or @xmath68 , respectively .",
    "a trs @xmath5 is _ terminating from @xmath36 _ if there are no _",
    "@xmath5-derivations _ , @xmath104 with infinitely many rewrite steps .",
    "if @xmath5 is terminating from every term , then @xmath5 is said to be _",
    "a term @xmath36 is @xmath5-_irreducible _ ( or , in _",
    "@xmath5-normal form _ ) if there is no term @xmath22 such that @xmath105 .",
    "when there is a unique normal form reachable from a given term @xmath22 using @xmath5 , it is denoted by @xmath106 .",
    "when @xmath5 is singleton , say @xmath107 , then @xmath108 will also be written as @xmath109 .",
    "a term @xmath22 is called _ ground _ if @xmath22 contains no variables .",
    "it is called _ shallow _ if all variable positions in @xmath22 are at depth @xmath62 or @xmath68 .",
    "it is _ flat _ if its height is at most @xmath68 .",
    "it is _ linear _ if every variable occurs at most once .",
    "a rule @xmath110 is called _ ground _",
    "( _ flat _ , _ shallow _ , _ linear _ ) if both @xmath78 and @xmath79 are .",
    "a rule @xmath110 is called _ left - ground _ ( _ left - flat _ , _ left - shallow _ , _ left - linear _ ) if @xmath78 is .",
    "a rule @xmath110 is called _ right - ground _",
    "( _ right - flat _ , _ right - shallow _ , _ right - linear _ ) if @xmath79 is",
    ". a rule @xmath110 is called _ collapsing _ if @xmath79 is a variable .",
    "a trs @xmath5 is called ( left-,right-)_ground _ ( _ flat _ , _ shallow _ , _ linear _ ) if all its rules are . a trs @xmath5 is called _ collapsing _ if it contains a collapsing rule .",
    "a rewrite step @xmath111 is an _",
    "innermost rewrite step _ if @xmath112 is @xmath5-irreducible , for all @xmath113 .",
    "the concepts of reachability and termination can be naturally defined for innermost rewriting .",
    "a set @xmath6 of pairs of terms is a set of equations if whenever a pair , again written as @xmath110 , belongs to @xmath6 , the pair @xmath114 also belongs to @xmath6 .",
    "given a trs @xmath5 and a set of equations @xmath6 , a term @xmath36 rewrites into a term @xmath22 with @xmath5 modulo @xmath6 in one step , denoted @xmath115 , if @xmath116 holds .",
    "note that @xmath117 is equivalent to existence of a derivation of the form @xmath118 with at least one rewrite step with @xmath5 .",
    "a _ permutative rule _ is a linear flat rewrite rule @xmath110 satisfying @xmath119 and @xmath120 .",
    "when @xmath6 contains just permutative rules we say that @xmath6 is a _",
    "permutative theory_. in the rest of the paper we will always assume that @xmath6 is a permutative theory defined over the same signature as @xmath5 .    the notion of innermost rewriting is extended to rewriting modulo in the following natural way . a term @xmath36 is a normal form with respect to @xmath121 if no @xmath121 rewrite step can be applied on @xmath36 .",
    "a term @xmath36 _ innermost rewrites _ to @xmath22 with @xmath121 if there exist terms @xmath122 and a position @xmath28 satisfying @xmath123 and such that any proper subterm of @xmath124 is a normal form with respect to @xmath121 .    the notion of termination for @xmath121 is naturally defined as the non - existence of a @xmath121 derivation with infinitely many rewrite steps .",
    "note that this is equivalent to the non - existence of a derivation with @xmath8 where infinitely many of the involved steps use @xmath5 .",
    "in this section we present some standard transformations on the signature and trs  @xcite , and argue that they preserve termination and innermost termination modulo permutative theories . in particular , we show that we can assume without any loss of generality that + ( a1 ) the signature contains exactly one function symbol with nonzero arity + ( a2 ) all shallow terms are in fact flat . + readers who believe these claims can jump to the next section .",
    "the discussion is written for general termination , but it is also valid when we interpret termination as innermost termination . to this end , in the innermost case we assume that for a given trs , all the rules @xmath85 such that @xmath78 has a proper subterm that is not a normal form have been removed .",
    "note that these rules can not be used in an innermost derivation .",
    "thus , when considering innermost rewriting , we assume that + ( a3 ) if @xmath85 is a rule in @xmath5 , then all proper subterms of @xmath78 are in normal form .",
    "we will always assume that all terms are constructed over a given fixed signature @xmath9 that contains several constants and only one non - constant function symbol @xmath12 .",
    "if this was not the case , we can define a transformation @xmath125 from terms over @xmath9 into terms over a new signature @xmath126 as follows .",
    "let @xmath13 be the maximum arity of a symbol in @xmath9 plus @xmath68 .",
    "we choose a new function symbol @xmath12 with arity @xmath13 and define the new signature @xmath127 as @xmath128 and @xmath129 .",
    "note that all symbols of @xmath9 appear also in @xmath126 but with arity @xmath62 .",
    "now , we recursively define @xmath130 as @xmath131 and @xmath132 for constants @xmath133 and variables @xmath134 , and @xmath135 for terms headed with @xmath136 .",
    "we denote @xmath137 as @xmath138 for a given trs @xmath5 .",
    "note that the size of @xmath138 is at most @xmath13 times the size of @xmath5 , and hence , this transformation can be easily performed in polynomial time .",
    "note also that @xmath5 is a trs over @xmath9 , and that @xmath138 is a trs over @xmath126 . as we mentioned in the preliminaries , we will not explicitly state the signature of each trs .",
    "[ lemma - simplifying1 ] let @xmath5 be a trs .",
    "let @xmath6 be a permutative theory .",
    "then , @xmath121 is ( innermost ) terminating if and only if @xmath139 is ( innermost ) terminating .    it is straightforward to see that , for any terms @xmath140 of @xmath18 , @xmath141 and @xmath142 hold .",
    "thus , non - termination of @xmath121 trivially implies non - termination of @xmath139 .    for the left - to - right direction",
    ", we define the transformation @xmath143 as the following extension of the inverse of @xmath125 on the image .",
    "since @xmath125 is not surjective , we will use two new function symbols , @xmath144 and @xmath145 of arity @xmath13 and @xmath62 respectively , for defining @xmath146 when @xmath22 is not in the image of @xmath125 .",
    "we define @xmath147 as follows : @xmath148    it is easy to see that any rewrite step @xmath149 can be transformed into a rewrite step @xmath150 , and any rewrite step @xmath151 can be transformed into a rewrite step @xmath152 .",
    "thus , non - termination of @xmath139 implies non - termination of @xmath153 for the signature @xmath154 . note that @xmath155 and @xmath156 are , in fact , @xmath5 and @xmath6 , respectively .",
    "thus , we conclude that @xmath121 is non - terminating over the signature @xmath154 .",
    "but , note that non - termination ( and non - termination modulo ) of a trs does not depend on symbols in the signature that do not occur in the rules .",
    "hence , @xmath121 is non - terminating over the original signature , and we are done . in the case where @xmath5 is left - shallow , we will also assume that @xmath5 is , indeed , left - flat .",
    "if this was not the case , we proceed by applying several times the following transformation step a ) , until @xmath5 is left - flat .",
    "* step a ) * if there is a non - constant ground term @xmath98 that is a proper subterm of a left - hand side of a rule in @xmath5 , then create a new constant @xmath2 , replace all occurrences of @xmath98 in the left - hand sides of the rules of @xmath5 by @xmath2 , and add the rule @xmath157 to @xmath5 .",
    "formally , the new trs @xmath158 is @xmath159 .",
    "note that , as a consequence of assumption  ( a3 ) , when considering innermost rewriting , @xmath98 is necessarily a normal form .",
    "we will also assume that all rules in @xmath5 are right - flat . if this was not the case , as before we proceed by applying several times the following transformation step b ) , until the obtained trs is right - flat .",
    "* step b ) * if there is a non - constant ground term @xmath98 that is a proper subterm of a right - hand side of a rule in @xmath5 , then create a new constant @xmath2 , replace all occurrences of @xmath98 in the right - hand sides of the rules of @xmath5 by @xmath2 , and add the rule @xmath160 to @xmath5 .",
    "formally , the new trs @xmath158 is @xmath161 .",
    "every step ( a or b ) decreases the total sum of the number of positions at depth more than one in all the left - hand and right - hand sides of @xmath5 .",
    "moreover , also at every step , the total size of the trs increases by at most the size of two constants .",
    "hence , this process terminates in linear time and the size of the resulting flat trs is within a constant factor of the size of the original shallow trs .",
    "[ lemma - simplifying2 ] let @xmath5 be a trs .",
    "let @xmath6 be a permutative theory .",
    "let @xmath158 be obtained from @xmath5 by applying step a ) .",
    "then , @xmath121 is ( innermost ) terminating if and only if @xmath162 is ( innermost ) terminating .    for the right - to - left direction , we first observe that each rewrite step @xmath163 can be transformed into a derivation of the form @xmath164 , since the application of a rewrite rule @xmath110 can be simulated by several applications of @xmath165 and one application of @xmath166 .",
    "thus , any derivation of @xmath8 with infinitely many rewrite steps of @xmath5 and starting from a certain term @xmath36 can be transformed into a derivation of @xmath167 with infinitely many rewrite steps of @xmath158 and starting from @xmath36 . in the case of innermost rewriting , we have that @xmath98 is a normal form and hence , the transformed derivation is also innermost .",
    "for the left - to - right direction , we first observe the following two facts :    1 .",
    "the existence of a rewrite step @xmath168 implies @xmath169 .",
    "2 .   for each rule @xmath110 of @xmath5 ,",
    "if @xmath170 , then , for each rewrite step @xmath171 , it holds that @xmath172 .    from the above facts , it follows that any rewrite step @xmath173 can be transformed into a derivation @xmath174 with @xmath62 or @xmath68 steps .",
    "note that this is not enough to argue that a derivation of @xmath167 with infinitely many steps with @xmath158 , and starting from a term @xmath36 , can be transformed into a derivation of @xmath8 with infinitely many steps with @xmath5 starting from @xmath175 .",
    "this is because rewrite steps with @xmath165 are , in fact , removed .",
    "however , it suffices to additionally argue that a derivation of @xmath176 with infinitely many steps of @xmath177 can not exist .",
    "this is a consequence of the fact that rules of @xmath6 preserve the size , and @xmath165 decreases the size .",
    "finally , in case of innermost rewriting , using the facts that @xmath98 is a normal form , @xmath178 is an innermost step , and @xmath179 , we infer that the transformed derivation is an innermost derivation . the preservation of termination for the case of step b ) is proved analogously .",
    "[ lemma - simplifying3 ]",
    "let @xmath5 be a trs .",
    "let @xmath6 be a permutative theory .",
    "let @xmath158 be obtained from @xmath5 by applying step b ) .",
    "then , @xmath121 is ( innermost ) terminating if and only if @xmath162 is ( innermost ) terminating .",
    "in this section , we will show that , given a right - flat trs @xmath5 and a term @xmath36 , it is decidable if @xmath5 is terminating from @xmath36 .",
    "in particular , this implies that non - termination is semi - decidable for right - flat trs .",
    "we will show that termination is undecidable for right - flat trs in section  [ sec - undec ] .",
    "the proofs of this section are written for general termination , but they are also valid when we interpret termination as innermost termination , reachability as innermost reachability , and so on .",
    "an important property of a right - flat trs @xmath5 is that whenever @xmath180 holds , then every subterm of @xmath22 is reachable from either a constant or some subterm of @xmath36 .",
    "this result , stated as lemma  [ lemma - reach1 ] , is used extensively later .",
    "it is proved by inductively marking each position of a term ( in the above derivation ) by a term from @xmath181 .",
    "the idea of the marking @xmath182 at each position @xmath28 of @xmath22 is that it satisfies @xmath183 , and moreover , for a position @xmath113 the corresponding marking @xmath184 of @xmath22 at @xmath185 is context - reachable from @xmath182 .",
    "let @xmath5 be a right - flat trs .",
    "let @xmath186 be a derivation with @xmath5 .",
    "a _ marking _ of this derivation is a sequence @xmath187 of @xmath188 functions @xmath189 defined inductively as follows :",
    "1 .   for each @xmath28 in @xmath190",
    ", we define @xmath191 .",
    "2 .   for @xmath192",
    "we assume that @xmath193 is defined .",
    "let @xmath194 be the @xmath195th rewrite step of the derivation above more explicitly written .",
    "then , we define @xmath196 as follows : a.   for each @xmath28 in @xmath197 satisfying @xmath198 , we define @xmath199 .",
    "b.   for each @xmath28 in @xmath197 satisfying @xmath200 , @xmath201 , and @xmath202 is a constant , we define @xmath203 . c.   for each @xmath28 in @xmath197 satisfying @xmath204 , @xmath201 , @xmath205 , and @xmath202 is a variable , we define @xmath206 , where @xmath207 is any position in @xmath78 such that @xmath208 .    recall that we are assuming that every variable on the right - hand side also appears on the left - hand side ; if not , then the trs is trivially non - terminating .",
    "the following example illustrates the definition of marking and also shows that markings need not be unique .",
    "[ example - marking ] let @xmath209 and consider the derivation @xmath210 . a marking for this derivation",
    "is given by : @xmath211 for all @xmath212 , @xmath213 for all @xmath214 , @xmath215 , @xmath216 for all @xmath217 , @xmath218 , @xmath219 , @xmath220 , and @xmath221 .",
    "note that if we redefined @xmath222 so that @xmath223 , then the resulting functions would still be a marking .",
    "hence , there can be multiple markings for the same derivation .",
    "now we will state and prove some useful properties about markings .",
    "henceforth , let us fix @xmath5 to be a right - flat trs , @xmath224 to be a ( innermost ) derivation and @xmath187 to be a marking of this derivation .",
    "the properties below will capture the intuition that , if @xmath225 , then the term @xmath226 is reachable from the term @xmath22 .",
    "[ lemma - reach0 ] @xmath227",
    ". moreover , if @xmath36 is not a constant , then , for each @xmath28 in @xmath228 we have @xmath229 .",
    "the claim is proved by induction on @xmath188 . for @xmath230 , by definition of marking , we have @xmath231 .",
    "moreover , if @xmath36 is not a constant , for each @xmath28 in @xmath232 we have @xmath233 .",
    "for the induction step , suppose @xmath234 .",
    "by induction hypothesis , we know that @xmath227 and whenever @xmath36 is not a constant then , for each @xmath235 , @xmath236 holds .",
    "the fact that @xmath237 follows from the fact that @xmath238 and @xmath239 holds , since case ( i ) of the definition of marking applies for @xmath240 . under the assumption that @xmath36 is not a constant",
    ", we note that case ( ii ) defines @xmath241 as a constant , and cases ( i ) and ( iii ) define @xmath241 for @xmath28 in @xmath242 as @xmath243 for some @xmath185 in @xmath244 .",
    "thus , from the assumption that @xmath245 , it follows that @xmath246 .",
    "a second property of markings is that @xmath247 is always reachable from @xmath248 .",
    "[ lemma - reach1 ] for each @xmath28 in @xmath249 , @xmath247 is ( innermost ) reachable from @xmath248 .",
    "the claim is proved by induction on @xmath188 . for @xmath230 , by definition of marking , we have @xmath250 for each @xmath28 in @xmath251 .",
    "thus , @xmath252 in @xmath62 steps follows trivially .",
    "for the induction step , suppose @xmath234 is the @xmath188-th ( innermost ) rewrite step .",
    "by induction hypothesis , @xmath253 holds for each @xmath254 .",
    "consider a fixed @xmath255 .",
    "we prove @xmath256 as follows :    1 .   if @xmath257 , then we have @xmath258 . note",
    "that , since @xmath259 ( innermost ) rewrites to @xmath260 , it follows that @xmath261 ( innermost ) rewrites to @xmath262 .",
    "2 .   if @xmath263 and @xmath201 hold , and @xmath202 is a constant , then , by definition of marking we have @xmath241 is @xmath202 , from which @xmath264 in @xmath62 steps follows trivially .",
    "3 .   if @xmath204 and @xmath265 hold , and @xmath202 is a variable , then , for some @xmath207 , @xmath266 and @xmath267 hold , and @xmath268 holds by induction hypothesis . thus , @xmath256 follows .",
    "if @xmath269 , then the claim holds by induction hypothesis again as @xmath270 and @xmath271 hold .",
    "thus , for each position @xmath255 , we proved that @xmath272 is ( innermost ) reachable from @xmath241 .",
    "[ corollary - reach1 ] if @xmath36 is a constant , then all subterms of @xmath259 are ( innermost ) reachable from a constant .",
    "another property of markings is that @xmath248 is context - reachable from @xmath243 for all @xmath273 .",
    "[ lemma - creach1 ] for each @xmath274 satisfying @xmath275 , @xmath248 is ( innermost ) context - reachable from @xmath243 .",
    "moreover , if @xmath248 and @xmath243 are both constants , then @xmath248 is ( innermost ) context - reachable from @xmath243 with a non - empty context .",
    "the claim is proved by induction on @xmath188 . for @xmath230 , by definition of marking we have @xmath250 for each @xmath28 in @xmath251 . since , for each @xmath276 satisfying @xmath275 , @xmath277_{p - p'}$ ] holds , then we also have @xmath278_{p - p'}$ ] .",
    "thus , the statement trivially follows for the base case .",
    "for the induction step , suppose @xmath234 is the @xmath188th ( innermost ) rewrite step .",
    "consider two fixed positions @xmath279 satisfying @xmath275 .",
    "we distinguish the following cases .    1 .   if @xmath257 or @xmath269 , then we have @xmath280 and @xmath281 .",
    "thus , the statement follows by induction hypothesis .",
    "2 .   if @xmath263 , @xmath201 , and @xmath202 is a constant , then @xmath282 holds . by lemma  [ lemma - reach1 ]",
    ", @xmath283 is reachable from @xmath284 .",
    "note that @xmath241 is a proper subterm of @xmath283 .",
    "hence , @xmath241 is context reachable from @xmath284 with a non - empty context ( independently of whether @xmath284 is a constant or not ) .",
    "if @xmath204 , @xmath265 and @xmath202 is a variable , then , for some @xmath207 , @xmath266 .",
    "we distinguish two cases .",
    "( a ) if @xmath285 , then @xmath286 and , by induction hypothesis , @xmath287 is context reachable from @xmath243 ( with a non - empty context if both @xmath243 and @xmath287 are constants ) , which is the same as saying that @xmath241 is context reachable from @xmath284 ( with a non - empty context if both @xmath284 and @xmath241 are constants ) .",
    "( b ) if @xmath288 holds , then @xmath289 holds for some @xmath290 and , by induction hypothesis , @xmath287 is context reachable from @xmath291 ( with a non - empty context if both @xmath291 and @xmath287 are constants ) .",
    "this is the same as saying that @xmath241 is context reachable from @xmath284 ( with a non - empty context if both @xmath284 and @xmath241 are constants ) .",
    "thus , in all cases , the claim follows .",
    "we illustrate lemma  [ lemma - creach1 ] by an example below .",
    "consider again the derivation and marking defined in example  [ example - marking ] .",
    "we note that , on the term @xmath292 , we had the marking @xmath293 defined so that @xmath220 and @xmath221 . by lemma  [ lemma - creach1 ] , @xmath2 should be context - reachable from @xmath294 , and indeed we have @xmath295 .    finally , another observation about a marking is that positions below @xmath296 are always marked by constants .",
    "[ lemma - creach2 ] for each @xmath297 such that @xmath298 , @xmath248 is a constant .",
    "the claim is proved by induction on @xmath188 . for @xmath230 , note that @xmath299 holds and hence all @xmath212 satisfy @xmath300 .",
    "thus , the claim is vacuously true .",
    "for the induction step , suppose @xmath234 is the @xmath188th ( innermost ) rewrite step .",
    "consider any position @xmath255 satisfying @xmath301 .    1 .   if @xmath269 or @xmath257 , then @xmath280 holds , and by induction hypothesis @xmath248 is a constant .",
    "if @xmath263 , @xmath201 and @xmath202 is a constant , then @xmath282 holds , which is a constant .",
    "3 .   if @xmath204 , @xmath265 and @xmath202 is a variable , then @xmath266 for some @xmath207 , and @xmath302 holds since left - hand sides of @xmath5 are not variables and @xmath5 is right - flat .",
    "hence , the induction hypothesis is applicable and we can conclude that @xmath287 , and therefore @xmath241 , is a constant .    thus , for all @xmath28 s.t .",
    "@xmath303 , @xmath241 is a constant .",
    "this completes the proof .",
    "an important consequence of lemma  [ lemma - creach1 ] and lemma  [ lemma - creach2 ] is that , if @xmath5 is terminating from @xmath36 , then the height of terms reachable from @xmath36 is bounded by the height of @xmath36 plus the number of constants in @xmath9 .    [ corollary - bounded ] let @xmath5 be a right - flat trs .",
    "let @xmath6 be a permutative theory .",
    "let @xmath36 be a term such that @xmath121 is ( innermost ) terminating from @xmath36 .",
    "then for any term @xmath22 ( innermost ) reachable from @xmath36 with @xmath121 , we have @xmath304 .",
    "we proceed by contradiction by assuming @xmath305 and @xmath306 .",
    "recall that the derivation @xmath305 can be seen as a derivation @xmath118 .",
    "let @xmath187 be a marking of this derivation @xmath307 . by lemma  [ lemma - creach2 ] , each position in @xmath22 that is deeper than @xmath296 is marked with a constant .",
    "since @xmath306 holds , by pigeon - hole principle , there are two positions @xmath308 such that @xmath309 and @xmath310 hold , and @xmath248 is a constant , say @xmath2 . by lemma  [ lemma - creach1 ]",
    ", it follows that @xmath2 is context reachable from @xmath2 with a non - empty context .",
    "moreover , since @xmath6 is a permutative theory , @xmath2 is context reachable from @xmath2 with a derivation using at least one rewrite step with a rule of @xmath5 .",
    "furthermore , by lemma  [ lemma - reach0 ] the position @xmath25 of every term in a derivation is marked with @xmath36 .",
    "using lemma  [ lemma - creach1 ] again , we infer that @xmath311 , is also context reachable from @xmath36 .",
    "thus , we can construct a derivation @xmath312 \\rightarrow_{r\\cup e}^+ c_1[c_2[c ] ] \\rightarrow_{r\\cup e}^+ c_1[c_2[c_2[c ] ] ] \\rightarrow_{r\\cup e}^+ \\ldots$ ] with infinitely many steps with @xmath5 .",
    "hence , there is a derivation starting from @xmath36 using @xmath121 with infinitely many rewrite steps , a contradiction . using the above corollary",
    ", we can show that the existence of non - terminating derivations starting from a term is decidable for right - flat trs .",
    "[ theorem - c ] termination ( innermost termination ) of a right - flat trs @xmath5 modulo a permutative theory @xmath6 from a given term is decidable .",
    "hence , non - termination ( innermost non - termination ) is semi - decidable for right - flat trs modulo permutative theories .",
    "let @xmath36 be any term .",
    "we enumerate all ( innermost ) derivations starting from @xmath36 .",
    "if we reach a term with height greater than @xmath313 , then by corollary  [ corollary - bounded ] we know that @xmath121 is non - terminating from @xmath36 .",
    "otherwise , we will get only _ finitely _ many reachable terms . if there is a derivation that cycles among these terms",
    ", then @xmath121 is non - terminating from @xmath36 . if not , then @xmath121 is terminating from @xmath36 .    _",
    "remark : _ we can use an argument similar to the one used in the proof of theorem  [ theorem - c ] to prove that , for any class @xmath314 of trs s that are effectively regularity preserving , termination of a trs @xmath5 of @xmath314 from a term @xmath36 , where both @xmath5 and @xmath36 are given as input , is decidable .",
    "while we do not use this observation here , we nevertheless note that , using recent results on regularity preserving trss  @xcite , we immediately get very simple proofs of known decidability results , such as for right - ground trs  @xcite : a right - ground trs is regularity preserving , and is non - terminating iff it is non - terminating from some right - hand side , which can be checked for every right - hand side term using the above observation .",
    "in this section , we show that innermost termination of flat trs modulo permutative theories is decidable . in sharp contrast",
    ", general termination is undecidable for flat trs ( section  [ sec - undec ] ) .",
    "let @xmath5 be a flat trs , and let @xmath6 be a permutative theory .",
    "we show decidability of innermost termination of @xmath121 by showing that if @xmath121 is not innermost terminating , then there will be an infinite @xmath121 derivation starting from a ground flat term . using theorem  [ theorem - c ] , we know that this latter check is decidable .",
    "[ lemma - flat - innermost ] let @xmath5 be a flat trs .",
    "let @xmath6 be a permutative theory .",
    "suppose that @xmath121 is not innermost terminating .",
    "then , there is an innermost derivation starting from a ground flat term with infinitely many innermost rewrite steps .",
    "we assume that there is no innermost derivation with infinitely many innermost rewrite steps and starting from a constant , and we show that there is one from a ground flat term with height @xmath68 .",
    "since @xmath121 is not innermost terminating , there exists an innermost derivation @xmath315 with infinitely many innermost rewrite steps using @xmath5 , whose first step is at position @xmath25 .",
    "we first prove that for every @xmath195 , _ every subterm at depth @xmath68 of @xmath316 is either reachable from a constant , or a normal form .",
    "_ first note that no term @xmath316 is a constant , by our initial assumption",
    ". moreover , since we use innermost rewriting , all proper subterms of @xmath317 are normal forms . by lemma  [ lemma - reach1 ] , all subterms at depth 1 of @xmath316",
    "are innermost reachable from either constants or proper subterms of @xmath317 .",
    "hence they are innermost reachable from constants , or they are normal forms .",
    "now , we note that there exists at least one constant , call it @xmath2 , that is a normal form . if not , any ground term can be innermost rewritten to another ground term , and hence there will be innermost derivations starting from constants with infinitely many innermost rewrite steps , which contradicts our initial assumption .",
    "we construct a new innermost derivation @xmath318 by defining each @xmath319 to be as @xmath316 but replacing every subterm at depth @xmath68 that is not innermost reachable from any constant by the constant @xmath2 chosen above .",
    "we need to show that the new derivation is `` correct '' , that is , there is an innermost rewrite step from @xmath320 to @xmath321 .",
    "consider the corresponding innermost rewrite step @xmath322 .    1 .   if @xmath323 is not @xmath25 , then @xmath323 is of the form @xmath324 for some @xmath325 in @xmath326 and some position @xmath28 . since @xmath327 is rewritten , it is not a normal form .",
    "thus it is innermost reachable from a constant , and hence , @xmath328 and @xmath329 coincide with @xmath327 and @xmath330 , respectively .",
    "therefore , the same innermost rewrite step can be applied on @xmath320 to produce @xmath319 .",
    "if @xmath323 is @xmath25 , then , by our initial assumption , both @xmath78 and @xmath79 are not constants .",
    "moreover , @xmath79 can not be a variable , since , otherwise , @xmath316 would be a normal form since we have innermost rewriting ( and the derivation would be finite ) .",
    "hence , @xmath85 is of the form @xmath331 . recall that , since @xmath5 is flat , each @xmath332 and each @xmath333 is either a constant or a variable .",
    "if @xmath69 is the substitution used in this innermost rewrite step , then define @xmath334 to be as @xmath69 except for the cases where @xmath72 is not innermost reachable from a constant , in which case we define @xmath335 . with these definitions",
    ", @xmath336 is an innermost rewrite step .",
    "the derivation @xmath337 is again innermost , has infinitely many innermost rewrite steps with @xmath5 , and the initial term @xmath338 satisfies that all its subterms at depth @xmath68 are innermost reachable from constants .",
    "therefore , there exists a ground flat term @xmath36 with height @xmath68 such that @xmath339 is an innermost derivation , and hence , there exists an innermost derivation with infinitely many innermost rewrite steps starting from a ground flat term @xmath36 with height @xmath68 .",
    "[ theorem - innermost ] innermost termination modulo permutative theories is decidable for shallow trs s .    by lemmas  [ lemma - simplifying1 ] ,",
    "[ lemma - simplifying2 ] and  [ lemma - simplifying3 ] innermost termination of shallow trs modulo permutative theories can be reduced to the particular case where @xmath5 is flat and where the signature contains just one non - constant function symbol .",
    "since there are only finitely many ground flat terms , using theorem  [ theorem - c ] , we can check if a given flat @xmath121 is not innermost terminating starting from one of these terms . by lemma  [ lemma - flat - innermost ] ,",
    "we will find a witness for non - termination this way iff @xmath121 is not innermost terminating .",
    "in this section , we show decidability of termination and innermost termination for right - flat right - linear trs .",
    "again , the proofs of this section are written for general rewriting , but they remain valid for innermost rewriting .",
    "the proof of decidability of ( innermost ) termination for right - flat right - linear trs depends on two key observations .",
    "the first one is lemma  [ lemma - reach1 ] , which says that for any ( innermost ) derivation @xmath96 using a right - flat trs @xmath5 , every _ proper _ subterm of @xmath22 is ( innermost ) reachable from either a constant or a _ proper _ subterm of @xmath36 . the second key lemma is stated by first defining the following _ measure _ of a term t : @xmath340 note that @xmath341 depends on whether we are dealing with general or innermost rewriting .",
    "let us fix @xmath5 to be a right - flat right - linear trs and @xmath6 to be a permutative theory .",
    "the first lemma below uses right - linearity of @xmath5 .",
    "[ decreasing ] if @xmath342 , then @xmath343 .",
    "moreover , if @xmath344_{\\bar{p}}$ ] rewrites to @xmath22 at position @xmath323 with a rule @xmath345 , and @xmath346 , then , for every @xmath195 in @xmath347 , if @xmath348 is not reachable from a constant , then @xmath349 is a variable .",
    "let @xmath350 be the rewrite step of the lemma .",
    "we prove the first statement by constructing an injective map , from positions @xmath28 of @xmath23 such that @xmath351 is not reachable from a constant , to positions @xmath185 of @xmath36 such that @xmath112 is not reachable from a constant , as follows .",
    "if @xmath269 or @xmath257 , then we let @xmath352 .",
    "if @xmath353 , then @xmath28 can be written in the form @xmath354 where @xmath202 is a height @xmath62 term .",
    "in fact , @xmath202 can not be a constant since otherwise @xmath351 would be a constant .",
    "hence , @xmath202 is a variable .",
    "we choose a position @xmath355 such that @xmath356 is the same variable as @xmath202 and define @xmath357 .",
    "the injectivity of the map follows by right - linearity of @xmath5 .",
    "hence , @xmath358 holds .    for the second statement",
    ", we assume @xmath346 , that @xmath36 is of the form @xmath344_{\\bar{p}}$ ] , and @xmath78 is of the form @xmath359 .",
    "if a certain @xmath348 is not reachable from a constant , but @xmath349 is not a variable , then @xmath360 is not in the image of the previous mapping , and hence @xmath361 holds , contradicting @xmath346 .",
    "therefore , all such @xmath349 s are variables .",
    "note that since @xmath6 is linear and flat , lemma  [ decreasing ] applies to rewrite steps with @xmath6 too . in the next lemma ,",
    "if @xmath121 is non - terminating , we establish the existence of a non - terminating derivation with certain properties .",
    "[ lemma - main - aux ] if @xmath121 is ( innermost ) non - terminating and there is no ( innermost ) non - terminating derivation starting from a constant , then there is an infinite derivation @xmath315 with infinitely many rewrites with @xmath5 and with the following properties :    1 .",
    "there is no infinite derivation starting from a proper subterm of @xmath317 2 .",
    "there is no rewrite with a collapsing rule at position @xmath25 3 .",
    "there are infinitely many rewrites at position @xmath25    since @xmath121 is non - terminating , there exists a derivation @xmath315 with infinitely many rewrite steps with @xmath5 .",
    "we pick the derivation that has minimal height for @xmath317 .",
    "we claim this derivation has all the properties mentioned above .",
    "it has property  ( a ) due to our choice of the infinite derivation .",
    "next assume that @xmath362 is the first application of a collapsing rule at @xmath25 in the derivatin .",
    "then , by lemma  [ lemma - reach0 ] and lemma  [ lemma - reach1 ] , all proper subterms of @xmath363 are reachable from either a constant or a proper subterm of @xmath317 . since @xmath316 is a proper subterm of @xmath363 , it is reachable from either a constant or a proper subterm of @xmath317 . in either case",
    "we infer the existence of a derivation starting from a term with height smaller than @xmath317 , and involving infinitely many rewrite steps with @xmath5 , which contradicts our choice of @xmath317 .",
    "hence , the infinite derivation we picked has property  ( b ) .",
    "finally , we show that there are infinitely many rewrite steps at position @xmath25 .",
    "suppose not .",
    "let @xmath364 be the last rewrite step at position @xmath25 .",
    "then , there is a derivation starting from some subterm at depth @xmath68 of @xmath316 with infinitely many rewrite steps with @xmath5 .",
    "as before , this subterm is reachable from either a constant or a proper subterm of @xmath317 .",
    "again , this implies the existence of an infinite derivation that starts from a term with height smaller than @xmath317 .",
    "this contradicts the minimality of @xmath317 .",
    "the idea of the decidability proof is the same as that for theorem  [ theorem - innermost ] , that is , we show that if @xmath121 is non - terminating , then it is non - terminating from a ground flat term .",
    "[ lemma - main ] if @xmath121 is non - terminating ( innermost non - terminating ) , then there exists an ( innermost ) derivation starting from a ground flat term with infinitely many rewrite steps .",
    "assume that there is no infinite derivation starting from a constant .",
    "we will show that there is one from a ground flat term .    using lemma  [ lemma - main - aux ]",
    ", we know there is an infinite derivation , @xmath365 , with properties  ( a ) ,  ( b ) and  ( c ) from lemma  [ lemma - main - aux ] .",
    "all the infinitely many rewrite steps at position @xmath25 in this derivation necessarily are done using rules of the form @xmath366 , where the height of @xmath78 is greater than or equal to @xmath68 .",
    "( if not , then there will be a constant in the derivation . ) by lemma  [ decreasing ] , @xmath367 for all @xmath195 . since this relation can not be indefinitely decreasing , for some @xmath188 we have @xmath368 . from the derivation @xmath369",
    "we construct a new derivation @xmath370 with also infinitely many rewrite steps as follows .",
    "analogously to the proof of lemma  [ lemma - flat - innermost ] , we can deduce the existence of at least one constant @xmath2 that is a normal form .",
    "for every @xmath316 , we construct @xmath319 to be equal to @xmath316 except for the subterms at depth @xmath68 that are not reachable from constants , which are replaced by @xmath2 .",
    "formally , @xmath371_{j_1}\\ldots [ c]_{j_k}$ ] if @xmath372 are the subterms at depth @xmath68 in @xmath316 that are not reachable from constants .",
    "we show that the new derivation is correct by analyzing each rewrite step @xmath364 and its corresponding step @xmath373 .    1 .",
    "if @xmath364 is done at a position inside a subterm at depth @xmath68 of @xmath363 that is reachable from a constant , then , the same rewrite step can be applied on @xmath320 to produce @xmath319 .",
    "if @xmath364 is done at a position inside a subterm , say @xmath327 , at depth @xmath68 of @xmath363 that is not reachable from a constant , then , @xmath330 is neither reachable from a constant .",
    "this follows from @xmath374 and the fact that , by lemma  [ corollary - reach1 ] , if a term is reachable from a constant , then all its subterms are .",
    "thus , @xmath375 holds , and hence , @xmath376 holds .",
    "if @xmath364 is done at position @xmath25 , then , by lemma  [ decreasing ] , if @xmath345 and @xmath69 are the rule and substitution applied , then @xmath377 is a variable for every position @xmath378 such that @xmath379 is not reachable from a constant .",
    "we define a new substitution @xmath334 to be equal to @xmath69 except for such variables @xmath377 , for which we define @xmath380 .",
    "the same rule @xmath345 applied to @xmath320 at position @xmath25 and with substitution @xmath334 produces @xmath319 .",
    "since every rewrite step @xmath364 at position @xmath25 corresponds to a rewrite step @xmath381 , and there are infinitely many of such steps , it follows that the derivation @xmath382 has infinitely many rewrite steps .",
    "note that all subterms at depth @xmath68 in @xmath383 are reachable from constants .",
    "therefore , there exists a ground flat term @xmath22 with height @xmath68 such that @xmath384 holds , and hence , there exists an infinite derivation from a ground flat term @xmath22 .",
    "to finish the proof , we only need to prove that this infinite derivation has infinitely many rewrite steps with @xmath5 .",
    "we proceed by contradiction by assuming that @xmath385 contains only finitely many rewrite steps with @xmath5 .",
    "hence , there exists an @xmath386 such that the derivation @xmath387 contains _ no _ steps with @xmath5 .",
    "call this derivation @xmath388 .",
    "we can observe the following properties about the corresponding old derivation @xmath389 , which we name @xmath390 : + ( a ) all rewrite steps at position @xmath25 in the derivation @xmath390 are performed with @xmath6 : if there was a rewrite step @xmath391 in @xmath390 , then we would have had @xmath392 in @xmath388 , which contradicts the fact that there are no rewrite steps with @xmath5 in @xmath388 .",
    "+ ( b ) in @xmath390 , there are infinitely many rewrite steps of the form @xmath393 where @xmath330 is not reachable from a constant : we know that there are infinitely many rewrite steps with @xmath5 in @xmath390 , but there are no rewrite steps with @xmath5 in @xmath388 , and hence , all the ( infinitely many ) rewrite steps with @xmath5 in @xmath390 have to fall in case  ( 2 ) above .    from facts  ( a ) and  ( b ) , it follows that there is a subterm @xmath394 that is not reachable from a constant and such that there is an infinite derivation starting from @xmath395 that uses infinitely many rewrites with @xmath5 .",
    "this is because any subterm at depth @xmath68 in the derivation @xmath390 that is not reachable from a constant is either ( i ) left unchanged by a rewrite step in @xmath390 ( it may be moved to another position at depth @xmath68 ) , or ( ii ) it is rewritten into a subterm at depth @xmath68 that is also not reachable from a constant ( because of the choice of @xmath188 and the fact that @xmath386 ) . a subterm that is reachable from a constant can not be rewritten into a term that is not reachable from a constant .    as before ,",
    "the subterm @xmath395 is reachable from either a constant or a proper subterm of @xmath317 .",
    "hence , there is an infinite derivation with infinitely many rewrite steps with @xmath5 starting from a constant or a proper subterm of @xmath317 , contradicting the minimality of @xmath317 .",
    "now , the main result follows immediately from lemmas  [ lemma - simplifying1 ] , [ lemma - simplifying2 ] , [ lemma - simplifying3 ] , [ lemma - main ] and theorem  [ theorem - c ] .",
    "termination and innermost termination are both decidable for rewriting with right - shallow right - linear trs modulo permutative theories .",
    "the algorithms of the previous sections decide termination by essentially generating all terms reachable from ground flat terms up to a height linearly bounded by the size of trs @xmath5 .",
    "thus , these algorithms run in double exponential time , since there are that many different reachable terms to consider . in this section",
    "we give a lower bound for the time complexity of these problems .",
    "the termination and innermost termination are pspace - hard for flat right - linear trs .",
    "we reduce from the following automata intersection problem , which is well - known to be pspace - complete  @xcite , to non - termination : +    [ cols= \" > , < \" , ]     since decidability of termination for flat trs is equivalent to decidability of termination for shallow trs ( lemmas  [ lemma - simplifying2 ] and  [ lemma - simplifying3 ] ) , we will prove undecidability of termination for shallow trs .",
    "since pcp is not decidable but it is semi - decidable , and non - termination is semi - decidable for shallow trs ( theorem  [ theorem - c ] ) , we will reduce pcp to non - termination of shallow trs : a reduction to just termination is not possible .",
    "the reduction is given in the proof of theorem  [ theorem - shallow - undec ] , but to provide an intuition , we first illustrate it via a small example .",
    "consider a pcp instance @xmath396 over a signature @xmath9 .",
    "the @xmath325th symbol of @xmath397 and @xmath398 , whenever it exists , is denoted by @xmath399 and @xmath400 respectively .",
    "for example , @xmath401 is a pcp instance over @xmath402 .",
    "it has a solution @xmath403 since @xmath404 .",
    "we want to define a rewrite system @xmath5 such that @xmath5 is non - terminating iff there is such a solution . let @xmath405 be the number of rules in the pcp instance and let @xmath406 be the maximum size of a string in the pcp instance .",
    "we define @xmath5 over a signature @xmath126 where where @xmath407 a potential solution , say @xmath408 , to the pcp instance is encoded by a pair of terms @xmath409 where @xmath410 concretely , the solution @xmath403 is encoded by the pair @xmath411 here the notation @xmath412 serves as a shorthand for the term @xmath413 .",
    "this convention allows us to view strings as ( parts of ) terms .",
    "we need to construct a rewrite system @xmath5 whose non - termination implies that @xmath414 indeed correspond to a solution of the pcp .",
    "hence , we need to check that + ( 1 ) @xmath415 and @xmath416 are of the form above , + ( 2 ) the indices sequence @xmath408 in @xmath415 and @xmath416 are the same , and + ( 3 ) the words @xmath417 and @xmath418 are the same .    to check  ( 1 ) ,",
    "we introduce the following rules in @xmath5 : @xmath419 we note that @xmath420 and @xmath421",
    ". hence we can check  ( 1 ) by checking if @xmath422 and @xmath423 .",
    "but this does not still check that the sequence @xmath408 ( sequence @xmath403 in the example ) used in @xmath415 is the same as the one used in @xmath416 .",
    "to check  ( 2 ) , we make @xmath424 and @xmath425 rewrite to @xmath426 .",
    "hence , we introduce the following rules in @xmath5 : @xmath427 now , using these new rules , we note that @xmath415 and @xmath416 are joinable if they use the same sequence of indices @xmath408 .",
    "in fact , both @xmath415 and @xmath416 rewrite to the term @xmath428 , where @xmath429 moreover , using @xmath430 , @xmath428 can rewrite to either @xmath431 or @xmath432 .",
    "thus , we can check  ( 2 ) by checking for the joinability of @xmath415 and @xmath416 to a term that can reach both @xmath431 and @xmath432 .",
    "finally , to check  ( 3 ) , we introduce the following rules in @xmath5 : @xmath433 using these rules , @xmath415 and @xmath416 can both rewrite to a common term ( @xmath434 ) if the strings @xmath417 and @xmath418 are equal ( to @xmath435 ) . in our example , @xmath436 .",
    "moreover , the common reachable term ( @xmath434 ) can then rewrite to either @xmath437 or @xmath438 .",
    "hence , we can check  ( 3 ) by checking for joinability of @xmath415 and @xmath416 to a term that can reach both @xmath437 and @xmath438 .",
    "we can put everything together by introducing three more rules in @xmath5 : @xmath439 if @xmath414 is generated from a solution of the pcp instance , then we can immediately get a nonterminating derivation using @xmath5 : @xmath440 the following theorem formally describes and proves this reduction .",
    "[ theorem - shallow - undec ] termination of shallow trs is undecidable .",
    "consider an instance @xmath441 of the restricted pcp , that is , @xmath442 are nonempty strings over alphabet @xmath9 .",
    "we construct a shallow trs @xmath5 such that this pcp instance has a solution iff @xmath5 is non - terminating .",
    "let @xmath443 .",
    "we construct @xmath5 over a signature @xmath126 , where @xmath126 is defined in equation  [ eqn - sigma ] .",
    "the trs @xmath5 is defined as follows : @xmath444 where @xmath445 are defined in equation  [ eqn - ru ] , @xmath446 are defined in equation  [ eqn - rp ] , @xmath447 are defined in equation  [ eqn - ra ] and @xmath448 is defined in equation  [ eqn - rf ] .",
    "@xmath449 : we first show that if the pcp instance has a solution , then @xmath5 is non - terminating .",
    "let @xmath408 be a solution of the pcp instance , i.e.  @xmath450 holds .",
    "then , we have the infinite derivation , shown in equation  [ eqn - infinite - derivation ] , starting from the ground term @xmath451 , where @xmath415 and @xmath416 are defined in equation  [ eqn - suu - svv ] .",
    "@xmath452 : suppose @xmath5 does not terminate .",
    "we need to show that the pcp instance has a solution . to this end",
    "we define the concept of _",
    "@xmath453-variant_. we say that a term @xmath36 is a @xmath453-variant of a term @xmath22 , if @xmath22 can be obtained from @xmath36 by applying several rewrite steps using rules from the subset @xmath454 of @xmath455 .",
    "note that , since none of @xmath397 or @xmath398 is @xmath25 in the original pcp instance , @xmath36 and @xmath22 have the same number of occurrences of symbols of @xmath456 .",
    "now , note that since all rules in @xmath5 are height - preserving or height - decreasing , there is a derivation with infinitely many rewrite steps at the top .",
    "we pick such a derivation , but with minimal height for the initial term @xmath22 . then",
    ", the root symbol of @xmath22 has to be one of the @xmath457 s : otherwise , only a finite number of rewrite steps can be done at the top and preserving the height .",
    "therefore , we have a derivation of the form @xmath458 with infinitely many rewrite steps at the top .",
    "we can assume that we start with a term of the form @xmath459 . by observing the @xmath448 rules",
    ", one can deduce that @xmath98 and @xmath460 reach @xmath461 , and that @xmath98 reaches @xmath462 and that @xmath460 reaches @xmath463 .",
    "this is possible only if the terms @xmath98 and @xmath460 are @xmath453-variants of terms of the form @xmath464 where @xmath465 .",
    "but , moreover , these terms have to be joinable to a term of the form @xmath466 @xmath467 , and also of the form @xmath468 .",
    "( note here that since @xmath469 are not @xmath25 , terms like @xmath470 can not rewrite to @xmath471 and hence the indices @xmath472 will be preserved in any joinability proof . ) hence , @xmath473 and @xmath474 for all @xmath79 in @xmath475 .",
    "but moreover , @xmath98 and @xmath460 have to be joinable to a term of the form @xmath476 .",
    "hence , @xmath477 and there is a solution of the original pcp . _",
    "remark : _ it is important to keep @xmath431 and @xmath432 ( and @xmath437 and @xmath438 ) as two different constants in the above proof .",
    "if we reuse @xmath478 in place of @xmath431 and @xmath432 ( respectively , @xmath479 in place of @xmath437 and @xmath438 ) , then terms that satisfy check  ( 1 ) , but do not satisfy check  ( 2 ) ( respectively , check  ( 3 ) ) , such as , @xmath480 and @xmath481 , which do _ not _ correspond to a solution of the pcp , would generate infinite derivations starting from @xmath482 .    combining theorem  [ theorem - shallow - undec ] with lemmas  [ lemma - simplifying2 ] and  [ lemma - simplifying3 ] , we have the following result .",
    "[ theorem - flat - undec ] termination of flat trs is undecidable .",
    "for the case of innermost rewriting , we have seen that termination is decidable for flat trs . however , in the innermost case we have the following result .",
    "[ thm - inner - right - flat - undecidable ] innermost termination of right - flat trs is undecidable .    given an instance @xmath483 of post correspondence problem , we generate the trs @xmath484 . here",
    "@xmath485 is a constant representing the empty string .",
    "note that @xmath5 is right - flat .",
    "it is easy to see that the pcp instance has a solution iff @xmath5 is innermost non - terminating .",
    "_ remark : _ a reduction similar to the one in the proof of theorem  [ thm - inner - right - flat - undecidable ] was given in definition 5.3.6 of  @xcite for showing undecidability of termination for ( general ) term rewriting systems .",
    "we showed that termination and innermost termination of right - shallow right - linear term rewriting systems is decidable .",
    "this result also holds when we consider rewriting modulo permutative theories .",
    "we also showed that innermost termination of flat trss is decidable , whereas termination of flat trss is undecidable .",
    "for the decidable problems , the complexity of the given algorithms is doubly exponential , whereas we have also provided a pspace - hardness lower bound .",
    "it is unclear whether both upper and lower bounds can be improved in some way . as further work it would be interesting to fix the exact complexity of these problems , but also to consider other classes of trs , for example , classes defined by imposing syntactic restrictions not on the original trs , but on the dependency pairs of the trs  @xcite .",
    "g.  godoy , e.  huntingford , and a.  tiwari .",
    "termination of rewriting with right - flat rules . in _ proc .",
    "18th intl .",
    "conf . on rewriting techniques and applications , rta _ , volume 4533 of _ lncs _ , pages 200213 , 2007",
    ".    g.  godoy and a.  tiwari .",
    "deciding fundamental properties of right-(ground or variable ) rewrite systems by rewrite closure . in _ proc .",
    "joint conf . on automated deduction ,",
    "volume 3097 of _ lnai _ , pages 91106 .",
    "springer , july 2004 .    g.  godoy and a.  tiwari .",
    "termination of rewrite systems with shallow right - linear , collapsing , and right - ground rules . in _ proc .",
    "20th intl .",
    "conf . on automated deduction , cade _ ,",
    "volume 3632 of _ lncs _ , pages 164176 .",
    "springer , july 2005 .",
    "t.  takai , y.  kaji , and h.  seki .",
    "right - linear finite path overlapping term rewriting systems effectively preserve recognizability . in _ proc .",
    "11th intl . conf . on rewriting techniques and applications , rta _ , volume 1833 of _ lncs _ , pages 246260 , 2000 .",
    "y.  wang and m.  sakai .",
    "decidability of termination for semi - constructor trss , left - linear shallow trss and related systems . in _ proc .",
    "17th intl .",
    "conf . on rewriting techniques and applications , rta _ , volume 4098 of _ lncs _ , pages 343356 .",
    "springer , 2006 ."
  ],
  "abstract_text": [
    "<S> we present decidability results for termination of classes of term rewriting systems modulo permutative theories . </S>",
    "<S> termination and innermost termination modulo permutative theories are shown to be decidable for term rewrite systems ( trs ) whose right - hand side terms are restricted to be shallow ( variables occur at depth at most one ) and linear ( each variable occurs at most once ) . innermost termination modulo permutative theories is also shown to be decidable for shallow trs . </S>",
    "<S> we first show that a shallow trs can be transformed into a flat ( only variables and constants occur at depth one ) trs while preserving termination and innermost termination . </S>",
    "<S> the decidability results are then proved by showing that ( a ) for right - flat right - linear ( flat ) trs , non - termination ( respectively , innermost non - termination ) implies non - termination starting from flat terms , and ( b ) for right - flat trs , the existence of non - terminating derivations starting from a given term is decidable . on the negative side , </S>",
    "<S> we show pspace - hardness of termination and innermost termination for shallow right - linear trs , and undecidability of termination for flat trs . </S>"
  ]
}