{
  "article_text": [
    "with the progress of technology , recent astronomical surveys produce huge object catalogs : e.g. , sloan digital sky survey ( sdss ; * ? ? ?",
    "* ) , two micron all sky survey ( 2mass ; * ? ? ?",
    "* ) , ukirt infrared deep sky survey ( ukidss ; * ? ? ?",
    "* ) , etc .",
    "it is not realistic for many astronomers to handle and analyze a number of catalogs in their local computers .",
    "therefore , services to access the data via network have to be developed and could be used for a wide variety of astronomers requirements .",
    "in addition , it is desired that the services have application program interfaces ( apis ) to develop services , since it is not efficient that all service providers have all observational data .    in modern web - based database solutions for object catalogs  for example , nasa / ipac infrared science archive ( irsa ; * ? ? ? * ) , vizier @xcite , and virtual observatory ( vo ; * ? ? ? * )  portal sites are famous services .",
    "one of their common features is that we can use rich graphical user interfaces ( guis ) and a high - level programming interface based on vo standards for our various demands . on the other hand ,",
    "one of the most advanced services , skyserver of sdss @xcite , established a new basic model of a modern web - based database solution for a huge catalog .",
    "skyserver provides not only basic search tools such as radial search but also advanced search tools such as the sql search , cas jobs , etc .",
    "compared with the former services , skyserver of sdss is developed with focus on the availability of flexible sql - based programming interface , rather than supporting rich guis and high - level interfaces .",
    "such sql - based programming interfaces will become very important for online services dedicated to long - life survey database , since astronomers often need advanced search or their own programs to analyze catalogs and observational data for various unique science themes .",
    "our archive server akari - cas  akari - cas has been developed based on open source softwares .",
    "if readers are interested in our system , we can show our source codes .",
    "please contact us about them.]@xmath0 has been developed to provide web - based access tools for akari all - sky catalogues .",
    "the tools have been developed following the concept of sdss skyserver , and users can search , match up , and browse stored data using the provided tools .",
    "in our service , there are tools based on our own ideas and implementation techniques .",
    "reporting them in this article will be worthwhile information that is applicable to developments of future astronomical web - based database systems .    in this article",
    ", we mainly discuss the implementation and design of a web - based service for astronomical catalogs .",
    "in addition , our article will be helpful to develop basic search tools with minimum cost and to set up rdbms security when the system allows users direct input of sql statements .",
    "this article is organized as follows : in  [ overview_catalogs ] , we briefly introduce akari all - sky catalogues . in  [ overview_akari - cas ] , we describe an overview of our catalog archive service . in  [ overview_technical ] , we discuss the basic direction of our technical design .",
    "technical reports for rdbms and web application layers are given in ",
    "[ implementation_rdbms ] and  [ implementation_webapp ] , respectively . a summary is given in  [ conclusions ] .",
    "akari @xcite is the second japanese space mission for infrared astronomy , which has been developed by the institute of space and astronautical science ( isas ) at japan aerospace exploration agency ( jaxa ) and collaborators .",
    "the akari mission is an ambitious plan to make an all - sky survey with better sensitivity , higher spatial resolution , and wider wavelength coverage than those of _ iras _",
    "akari is equipped with a telescope of 68.5 cm effective aperture and two instruments : the far - infrared surveyor ( fis ; * ? ? ?",
    "* ) for the far - infrared observations and the infrared camera ( irc ; * ? ? ?",
    "* ) for the near and mid - infrared wavelengths .",
    "akari was launched by the m - v8 vehicle on 2006 february 22 .",
    "akari all - sky survey started in 2006 may and was completed in 2007 august .",
    "akari all - sky catalogues are produced based on the obtained all - sky survey data .",
    "the public release of the first version of catalogs was made on 2010 march 30 .",
    "this release consists of two infrared catalogs : the fis bright source catalogue ( bsc ; * ? ? ?",
    "* ) with 427,071 objects observed in the four far - infrared wavelengths , and the irc point source catalogue ( psc ; * ? ? ?",
    "* ) including 870,973 objects in the two mid - infrared wavelengths .",
    "the catalog set covers more than 98% of the sky .",
    "the information in the catalogs contains the object identifier , j2000 position , flux data , quality flags , and observational information .",
    "the catalog files can be obtained as a fits file or a text formatted file , and the release notes are also provided .",
    "see http://www.ir.isas.jaxa.jp/akari/observation/psc/ + public/ for details.]@xmath0 there is no information for cross - identification between fis bsc objects and irc psc objects in the released catalogs .",
    "note that image data of the akari all - sky survey are not yet publicly released .",
    "akari catalogue archive server ( akari - cas ) provides basic tools for various astronomical studies with the akari catalogs . for the ground design of our service",
    ", we referred to the sdss skyserver and combined our new idea into it .",
    "figure [ fig : page_transition ] shows the relation of akari - cas web tools and external services .",
    "the tool at the center of this figure is the object browser , explore tool , that plays the leading role in our web interface .",
    "basically , hyperlinks to explore tool are created in _ all _ search results of akari - cas , and explore tool dynamically prepares hyperlinks to external sites , i.e. , simbad  see http://simbad.u-strasbg.fr/simbad/.]@xmath0 @xcite , ned  see http://nedwww.ipac.caltech.edu/.]@xmath0 @xcite , etc .",
    "it is possible to create a permalink to the explore tool by an object position .",
    "the links generated by external services enable users to refer detail of an akari object .",
    "this design is essential to attain an interoperability feature of our web interface .",
    "figure [ fig : top_page ] shows screenshots of the top page , explore tool page , and sql search page , which supports direct sql input .",
    "it is important to note that the apis of akari - cas are open to the public .",
    "both astronomer s scripts and web service programs can call the apis . tools and documentation pages are arranged on the menu placed on the left side of web pages .",
    "as shown in figure [ fig : top_page ] , our web tools are classified into two categories : search tools and visual tools .",
    "we briefly explain them in  [ overview_search_tools ] and  [ overview_visual_tools ] after discussing stored data in  [ overview_stored_data ] .",
    "our web apis are summarized in  [ overview_webapis ] .",
    "we registered the akari catalogs and several external data that are expected to be important for astronomical studies into our databases .",
    "the data used through our web tools are as follows :    1 .",
    "akari all - sky survey fis bright source catalogue ( fis bsc ) version 1.0 2 .",
    "akari all - sky survey irc point source catalogue ( irc psc ) version 1.0 3",
    ".   third reference catalog of bright galaxies ( rc3 ; * ? ? ?",
    "* ) 4 .   _ iras _ point source catalog ( iras psc ) version 2.1 5 .   _ iras _ faint source catalog ( iras fsc ) version 2.0 6",
    ".   2mass point source catalog ( 2mass psc ) 7 .",
    "cached object list of simbad matched up with akari bsc / psc objects 8 .",
    "cached object list of ned matched up with akari bsc / psc objects    the cached simbad / ned object list contains entries found around each akari object within a 1.0@xmath1 radius .",
    "the update of the cached list in the databases will be done every few months .",
    "search tools consists of following tools to search akari catalogs with various criteria .",
    "positions ( longitude , latitude ) can be set by j2000 , b1950 , ecliptic or galactic coordinates in all web - based tools .    1 .",
    "the radial search tool provides an easy interface to search fis and/or irc objects within a radius of a position , which can specified by direct coordinate input or object name resolved by simbad or ned .",
    "the rectangular search tool is used to search fis and/or irc objects inside a rectangle defined by two longitude , latitude pairs .",
    "3 .   the cross - identification tool provides an interface to search fis and/or irc objects with a user defined list of object positions . in the result ,",
    "fis objects and irc objects are crossly identified .",
    "4 .   for the match up with simbad / ned catalogs ,",
    "the results of cross - identification between akari objects and simbad / ned objects were registered into cas database .",
    "users can easily obtain akari catalogs joined to cached catalogs obtained from simbad / ned such as hd , macho , 2mass , ngc , sdss , etc .",
    "figure [ fig : matchup_simbad ] shows the input and result display pages of this tool ; the henry draper ( hd ) catalogue is matched with akari fis - bsc .",
    "5 .   with the sql search tool",
    ", users can directly submit an sql query to rdbms of the akari - cas using this tool .",
    "the simbad / ned cached data , rc3 catalog , _ iras _ catalogs and 2mass psc can be used in this tool .",
    "users can perform fast cross - identification between akari catalogs and these catalogs .",
    "access to the sql search is also possible from users command - line programs .",
    "the download client - side tools page provides the information for client - side utilities written in python or interactive data language ( idl ) to perform an sql search on the command line .",
    "they can be included in users programs for advanced analysis .",
    "any user can download these client - side utilities from this page .",
    "tools with quick - look images are categorized in visual tools . supported quick - look images are currently sdss , iris(improved reprocessing of the _ iras _ survey ) ,  see http://www.cita.utoronto.ca/@xmath2mamd/iris/.]@xmath0 2mass , and dss2 .    1 .",
    "the explore tool page provides a useful interface to access catalog data of akari , rc3 , _ iras _ and 2mass , and quick - look images .",
    "external links such as ads , irsa , skyview ,  http://skyview.gsfc.nasa.gov/]@xmath0 etc . are automatically generated on this page .",
    "users can specify an object by its position , object name , or object identification number ( objid ) .",
    "after uploading the position list , users can view 40 quick - look images per page with image list tool .",
    "links to the explore tool are also generated .",
    "this tool does not access any catalogs in our rdbms .",
    "search tools and visual tools have open web apis ( get or post ) .",
    "such apis are important for not only astronomical study but also for software development .",
    "for example , the herschel observation planning tool ( hspot ) accesses our api of radial search via network and plots akari objects in the hspot gui .",
    "explore tool of sdss skyserver has two dynamic links to our explore tool after the update of 2010 april by the sdss project team .",
    "the apis with the get method can be used as permalink .",
    "a url to each query can be given as text in e - mails or in html documents , which is useful for the users to communicate with the collaborators .",
    "web programs in search tools return result tables in html or text ( csv ) format . a vo interface",
    "( e.g. , votable , tap , etc . ) will be supported in the future .",
    "see appendix a for more information on the apis .",
    "our service shall be friendly for many levels of users , from beginners to expert users . in this section",
    ", we describe our direction of technical design for such requirements .",
    "when we develop a web - based database system , we usually design two layers ; rdbms and web application .",
    "the definition of the role of each layer is essential for our development , since the flexibility of service is almost determined by it .",
    "we expect that beginners want easy - to - use gui tools , while expert users demand the direct access to databases .",
    "moreover , if our tables have complicated relations , the sql interface may be indispensable for advanced analysis .",
    "therefore , it is unavoidable that our service accepts users sql statements like sdss skyserver . in this case , we should prepare a couple of stored functions that execute sql statements that are indispensable for typical searches and documents that press users for use of such functions , since users do not always have enough skill with rdbms .",
    "preparing some stored functions for astronomical studies such as conversion of coordinates between sexagesimal and degrees , etc .",
    ", is helpful for users to submit sql statements .    after the preceding discussion",
    ", we define the role of each layer as follows :    1 .",
    "the rdbms layer covers the entire processing of tables , and conversion of coordinate and physical values .",
    "codes for both simple and advanced searches are built - in sql stored functions . using stored function",
    ", users can use sql statements without knowledge about indices of tables .",
    "the role of the web application layer is only to accept and check the users input and to generate simple sql statements . to support the transmission of huge table data",
    ", this layer should not have any buffer to cache the data . to extend possibility of various applications ,",
    "we apply the stateless design to this layer .",
    "we expect that the preceding direction can also minimize the cost of maintenance of our service .",
    "we introduce the software products used to construct akari - cas and explain why we choose them .    in the rdbms layer , we employ postgresql-8.4 . as we described in  [ roles_layers ] , our akari - cas allows direct input of sql statement from users .",
    "it means that the rdbms should have enough security configuration system and high coding flexibility of stored functions in sql , procedural language and c. it is known that some stored functions of sdss skyserver return multiple rows and are very useful to construct sql statements for users .",
    "therefore , our stored functions of rdbms should be able to return multiple rows .",
    "in addition , to construct the mirror site or to apply our codes to other projects flexibly , it is desirable that we use an open source rdbms software .",
    "after our investigation of some rdbms softwares , we found that postgresql perfectly satisfies above requirements .",
    "we also use wcstools-3.8  http://tdc-www.harvard.edu/wcstools/]@xmath0 with postgresql . to convert coordinates ( e.g. , from galactic to j2000 ) in sql statements",
    ", we wrote some stored functions in c and register them into our databases .",
    "the source codes in the stored functions call some routines of wcstools .",
    "in the web application layer , we use php-5.3 . as explained in ",
    "[ roles_layers ] , we expected that our implementation of web application can be concise , since important facilities were built in the rdbms layer .",
    "therefore , we had flexibility in our selection of languages that can be used for the web application and have libraries for accessing rdbms .",
    "perl cgi has been broadly used since more than 10 years ago , however , java / tomcat and php become very popular for building web application in recent years .    according to our investigations about developments of simple stateless web applications at isas",
    ", we found two facts :    1 .",
    "the efficiency of development in php is better than that in java , since we do not have to compile our sources in php .",
    "2 .   php does not force us to use class , therefore , we can rapidly write codes in procedural style .    we concluded that php is more suitable for our development , and confirmed that php applications run fast enough compared with other web application platforms .",
    "the key features of our implementation are a number of kinds of stored function , fast radial search , and cross - identification using indexing that is not based on hierarchical triangular mesh  see http://skyserver.org/htm/.]@xmath0 ( htm ; * ? ? ?",
    "* ) or healpix  see http://healpix.jpl.nasa.gov/.]@xmath0 @xcite , and the security configuration for direct input of users sql statements .",
    "we mainly explain these points in this section .",
    "rcl & & + & 01 - 49 & fis catalog(s ) + vvxxxxxx & 50 - 99 & other akari - related catalogs + vvxxxxxxx & 10 - 39 & irc catalog + vvxxxxxxx & 40 - 49 & external catalogs ( large ) + vvxxxxxxx & 50 - 99 & 2mass psc + 1xxxxxxxxx & - & reserved + 20xxxxxxxx & - & reserved + 21vvxxxxxx & 01 - 46 & external catalogs ( small ) +    we defined a unique number for each object of each catalog before registering them into databases .",
    "we named the numbers objid .",
    "table [ tbl : objid ] shows the current assignment rule of the objids .    in figure",
    "[ fig : page_transition ] , we show that explore tool is the main tool in our service .",
    "the dynamic links from the search result pages to explore tool are created using objids .",
    "then , explore tool parses the objid in the arguments of the get method , accesses the appropriate table , and displays required data .    using objid in links to explore tool , multiple arguments such as instrument , position , etc . in url",
    "are not required in such links .      as we outlined in ",
    "[ overview_akari - cas ] , we registered akari catalogs and other important data into our databases to support users various demands .",
    "we show the relationships between the tables in figure [ fig : table_relation ] .",
    "the upper five tables shown in this figure are object catalogs , which have no information for cross - identification between catalogs .",
    "such cross - identification is dynamically carried out using stored functions .",
    "details are described in ",
    "[ cross_id ] .    on the other hand , simbad / ned tables have static information of cross - identification .",
    "akari catalogs and cached simbad / ned entries are easily joined to each other using join or left join keywords .",
    "we also prepared some views such as simbadcacheall , nedcacheall , etc .",
    "they are useful to join simbad / ned information to the searched results of akari catalogs .",
    "details of tables and views are given in our database document pages .",
    "we created variety of stored functions for our databases .",
    "they can be categorized as follows :",
    "1 .   string processing .",
    "unit conversions of physical values such as ab magnitude and flux ( in janskys ) .",
    "3 .   conversion of coordinate between sexagesimal and degrees .",
    "simple calculations of positional values such as separations between two positions .",
    "low - level functions using wcstools routines .",
    "6 .   stored functions that return multiple rows such as radial search , rectangular search , etc .",
    "they have indispensable sql statements for users to run typical searches that heavily depend on the indices of the tables .",
    "together with several built - in stored functions of postgresql , various processing can be done in an sql statement in our databases .",
    "details are shown on our cas document page .    to implement the preceding stored functions",
    ", we used pl / pgsql , c , and sql from provided languages in postgresql .",
    "pl / pgsql is a procedural language that is suitable to return a value from numerical calculations and/or sql executions and is typically used for function 14 in our system .",
    "for example , select flonstr2deg(12:02:00.00 ) returns 180.5 in degrees .",
    "stored functions written in c call routines of wcstools , as shown in function 5 .",
    "in addition , c is powerful enough to obtain better speed for performing a sequential scan with calculations in rdbms .",
    "some functions in function 4 are used with such a sequential scan .",
    "for example , we wrote fdistancearcminxyz ( ) in c , which calculates an angle between two objects .",
    "this stored function is frequently used in the radial search and is essential for system performance . according to our test",
    ", we found that the radial search routine with fdistancearcminxyz ( ) written in c performed double speed in several degrees , compared with that in pl / pgsql .",
    "sql is used for sql executions , can return multiple rows ,  before creating a stored function that returns multiple rows , we have to register a new type.]@xmath0 and is used for the function 6 . for example , select * from fgetnearbyobjeq(fis , 195.5 , 2.5 , 40.0 ) returns the following result :    [ cols=\"^,^,^,^,^ \" , ]     this is a result of searching objects within 40.0@xmath3 radius from ( right ascension , declination ) = ( 195.5 , 2.5 ) .",
    "generally , the preceding result is used to join fis object table or view with it .    in total , about 2000 lines are newly written in pl / pgsql , c , and sql , including comments for our stored functions .",
    "radial search is the most typical query in the astronomical web - based database services .",
    "however , this search is somewhat unusual for rdbms , and special methods to create a one - dimensional index ( htm and healpix ) have been devised .",
    "we did not try such methods , but used a more cost - effective method .",
    "the object tables in our databases have columns of unit vectors ( cx , cy , and cz ) presenting the j2000 source positions . in order to force the radial search to be fast enough , we created composite indices on all object tables , such as + ` create index fisobjall_xyz on fisobjall ( cx , cy , cz ) ` , + and wrote stored functions that catch objects within a cube using index - scan and then drop objects outside the strict search circle on the celestial sphere .  in our tests ,",
    "we have confirmed that this method is useful for radial search and cross - identification of huge catalogs such as 2mass psc . we will report the result in another article.]@xmath0    we tested the performance on an opteron2378 ( 2.4ghz ) pc and reached a result of less than 0.01 s for a radial search of the irc catalog within 20@xmath1 radius from the galactic center (",
    "177 objects are returned ) .",
    "more than 0.4 s was consumed without the index ; therefore , the result demonstrated the usefulness of our method .",
    "note that this test was made in the psql interactive terminal with the following sql statement : + ` select count ( * ) ` + ` from fgetnearbyobjcel('irc ' , ' gal ' , 0.0 , 0.0 , 20.0 ) ; ` + after the ` \\timing ` command .      as shown in ",
    "[ table_relationships ] , tables of object catalogs do not have columns of objids of other catalogs .",
    "we created the f_name_getnearestobjideq ( ) function to get the objid of the nearest object from a given position in specified object catalog ( _ name _ ) by performing a radial search .",
    "for example ,",
    "fircgetnearestobjideq(180.67 , 1.977 , 1.0 ) searches the nearest object from the position ( 180.67 , 1.977 ) within 1.0@xmath1 in the irc catalog .",
    "a cross - identification between registered catalogs is carried out by an sql statement to repeat calling the stored function with appropriate arguments .",
    "the algorithm of the stored function is the same as that used in the radial search (  [ radial_search ] ) and has the great advantage of performing the cross - identification , since the cost of calculations before executing an index scan for a radial search is quite small compared with that based on techniques with dividing celestial sphere such as htm or healpix .",
    "for example , the following sql statement searches for fis objects of fqual_65 = 3 and joins the fis search result with the irc catalog : + ` select p. * , q. * ` + ` from ` + ` ( ` + `   select * ` + `   from fisobj ` + `   where fqual_65 = 3 ` + ` ) p ` + ` left join ircobj q ` + ` on fircgetnearestobjideq(p.ra , p.dec , 1.0 ) ` + `    = q.objid ; ` + in this case , the radius to match up objects between the fis and irc catalogs is 1.0@xmath1 , which is set in the last argument of the f_name_getnearestobjideq ( ) function .",
    "some examples of sql statements for cross - identification are given on the sql search page .    in our test using a 2.4ghz opteron pc , the elapsed time was 27 s to match up all fis objects with all irc objects within a 15 @xmath3 radius .",
    "this means that about 15,800 radial searches are processed per second .",
    "the following is the sql statement for this search : + ` select count(fircgetnearestobjideq(ra , dec , 0.25 ) ) ` + ` from fisobj ; `      to perform a cross - identification between a catalog table and the result of an sql statement , we created a stored function using pl / pgsql , fgetcrossidresulteq ( ) , which returns a table of results .",
    "the function fgetcrossidresulteq ( ) takes four arguments : + ` fgetcrossidresulteq('fis ' , ` + `       ' select * from upload ' , 3.0 , false ) ` + the first argument is the name of catalog , the second one is an arbitrary sql statement that returns multiple rows in the form of ( id_x int4 , name_x varchar , ra_x float8 , dec_x float8 ) , the third one is the radius to search in arcminutes , and the last one is a flag to indicate the search scope : false means to search the nearest object only , and true means to search all nearby objects .    in the actual implementation of our cross - identification tool , uploaded users position lists are converted into j2000 coordinates , and they are registered into a temporary table upload . then fgetcrossidresulteq ( ) is called . in this case , the second argument should be select * from upload to scan a temporary table upload .",
    "an sql statement to scan existing tables can also be set to the second argument .",
    "however , our web interface does not currently support such a use.]@xmath0    the implementation of fgetcrossidresulteq ( ) is not complicated . after opening a cursor  in pl / pgsql",
    ", cursor means a pointer to a row.]@xmath0 for the j2000 position list returned from an sql execution of the second argument , each position is scanned and fgetnearbyobjeq ( ) is performed .",
    "the results of fgetnearbyobjeq ( ) are pushed into a temporary buffer , and the function returns the buffer after closing the cursor .",
    "thus , the code of fgetcrossidresulteq ( ) is a typical pl / pgsql application .",
    "built - in stored functions of postgresql are so powerful that some of them can call low - level functions of the operating system .",
    "therefore , we have to be careful with the security setup of the database before allowing the direct input of sql statements by users .",
    "to configure the security setup , we have to understand the concept of a _ schema _ of postgresql .",
    "a schema of postgresql is a section in which relations ( tables and views ) and functions exist .",
    "it is like a directory in which files are located in unix systems .",
    "schemata pg_catalog and public are created in a new database by default .",
    "the pg_catalog schema has built - in relations and functions .",
    "additional relations are registered into the public schema .",
    "postgresql provides two users , postgres and public , by default .",
    "user postgres is the super - user , and public is the alias to all users .",
    "we appended admin user to create relations and functions and guest user to access the database from web applications .    just after creating a database , all users can create functions and relations in the public schema and can use or access functions and relations in the pg_catalog schema .",
    "this is not secure at all for our purpose , and so we made a script to set up the right security configuration of our database .",
    "we show the permission of a database before and after running the script in figure [ fig : security ] .",
    "the permission of the s symbol ( i.e. , tables and functions for our astronomical data ) in figure [ fig : security ] is set by the admin user . see appendix b for details of the script .",
    "users input such as sql statements should be tested in the web application layer .",
    "even if web applications have vulnerability , the preceding configuration shall protect our database from malicious inputs .",
    "web application programs in akari - cas are written in simple procedural php codes without object - oriented technique .",
    "although pear::mdb2 and pear::http_request2 libraries are used in our codes , we did not use any frameworks for php . in total , about 4300 lines are newly written in php including comments and html .",
    "we mainly explain some ideas to construct our web application effectively in this section .      considering the future extension of services in isas / jaxa and other institutes",
    ", we implemented radial search and rectangular search of our service so that they can search the fis and irc catalogs simultaneously .",
    "php interface programs , x_radial.php for radial search and x_rect.php for rectangular search , have two operation modes .",
    "one is single search mode , and the other is multiple search mode .    single search mode takes a string parameter to specify a catalog such as catalog = fis , and outputs a result of selected catalog .",
    "single search mode has an additional argument contents_only .",
    "when the argument contents_only = true is given , the php program does not return the full html contents ( beginning ) , but a part of html ( html of the sql command and table of results ) .",
    "this argument is used for multiple search mode or future services .    when checkboxes fis and irc are both selected ( i.e. , the url has fis = true&irc = true ) in the radial search or rectangular search pages , the php program x_radial.php or x_rect.php works in multiple search mode .",
    "it forwards the http request to the single search mode of the same program of the local host with a contents_only = true argument for each catalog .",
    "the results are returned to the program of multiple search mode , which attaches the header and footer and outputs into the http stream .",
    "that is , multiple search mode and single search mode are , in fact , realized by the same program , and the multiple search mode works like a wrapper program .",
    "thus , an option to output a part of html is useful to build a tool to search a number of catalogs simultaneously .",
    "it is very easy to build a web application that unifies a number of results of radial and rectangular searches on different servers .",
    "note that links in html contents should be absolute urls for such a purpose.]@xmath0 if such a tiny technique is used universally , we will be able to easily create extensive services without having many catalog data at a datacenter .",
    "our explore tool and image list tool provide quick - look images in multiwavelengths .",
    "although image products from akari all - sky survey are not available now , images of sdss , iris , 2mass , and dss2 are displayed in them .",
    "these images are not stored in our local server , but in the sdss skyserver and skyview .    to inlay the quick - look images into our tools , the php programs obj.php and list.php dynamically generate tags so that users browsers display the images after downloading them .",
    "skyserver provides a web api to obtain a color jpeg image directly using a single get method request ; therefore , there is no requirement of additional programs to inlay them . on the other hand",
    ", skyview does not provide such a web api with a single get method to get a color image .",
    "there exists an api with a single get method for a single - band image.]@xmath0 so we created a wrapper program to obtain a color jpeg image using a single get method request .",
    "this is an example of the url : + `    http://darts.isas.jaxa.jp/ir/akari/cas/ ` + ` getskyview.php?survey=dss2+ir%2cdss2+red%2 ` + ` cdss2+blue&rgb = t&position=182.04711396%2c2 ` + ` .87884015&scale=0.000277777777777778&pixel `",
    "+ ` s=200%2c200&grid = j2000&gridlabels=1 `    to create web - based visual tools easily , it is very important for servers to provide open web apis with a single get method request to obtain a color image directly in the format supported by the browsers .",
    "if such services appear universally , we will be able to create attractive visual tools without having a huge amount of imaging data at each datacenter .",
    "this concept is common for such visual tools and search tools of multiple catalogs , as described in ",
    "[ search_multiple_catalogs ] .      `",
    "< ? ` + `         $ db = \" dr1 \" ; ` + `         $ format = \" text \" ; ` + `         $ cmd = $ argv[1 ] ;     / * obtain sql statement from command - line args * / ` + `         / * create url * / ` + `         $ url = \" http://darts.isas.jaxa.jp/ir/akari/cas/tools/search/x_sql.php ? \" ; ` + `         $ prms = array ( ' db '      = > $ db , ` + `                        ' format ' = > $ format , ` + `                        ' cmd '     = > $ cmd ` + `                      ) ; ` + `         / * access to akari - cas * / ` + `         $ fp = fopen($url .",
    "http_build_query($prms ) , \" r \" ) ; ` + `         if ( $ fp = = = false ) { ` + `           fputs(stderr , \" error : fopen ( ) failed\\n \" ) ; ` + `           exit(1 ) ; ` + `         } ` + `         / * read returned catalog data * / ` + `         / * store the column names * / ` + `         if ( ( $ s = fgets($fp ) ) !",
    "= = false ) { ` + `           $ col_names = explode ( \" , \" , rtrim($s ) ) ; ` + `         } ` + `         / * store the values to an associative array and display them * / ` + `         while ( ( $ s = fgets($fp ) ) ! = = false ) { ` + `           $ col_vals = array ( ) ; ` + `           $ v = explode ( \" , \" , rtrim($s ) ) ; ` + `           for ( $ i=0 ; $ i < count($v ) ; $ i++ ) $ col_vals[$col_names[$i ] ] = $ v[$i ] ; ` + `           print_r($col_vals ) ; ` + `         } ` + `         fclose($fp ) ; ` + `       ? > `    server program x_sql.php for sql search has interfaces of both post and get .",
    "the post version is used for input from a browser , and the get version is used for command - line tools .",
    "the client - side tools can simply send a single get method request to x_sql.php and receive returned results .",
    "therefore , users can access sql search with command - based http clients such as wget or curl . on php , using ` fopen ( ) ` or ` file_get_contents ( ) ` with ` http_build_query ( ) ` is the most useful way to send their request to ` sql search '",
    ". see figure [ fig : php_example ] for an example php code .",
    "akari - cas provides two kinds of client - side tools that enable direct access to the database from users local computers .",
    "one is sqlcl_akari.py  original code ( sqlcl.py ) was written by t. budavri , who gave us permission to modify and re - distribute his program.]@xmath0 written in python ; sqlcl_akari.py can be used by itself from unix command shells or from users scripts .",
    "another tool is queryakari.pro written in idl .",
    "it is written as an idl function that submits an sql command to akari - cas .",
    "the query results are returned as an array of an idl anonymous structure , whose tags are the same as the column names of the query results .",
    "this allows users to easily add the querying functionality to the cas to one s own idl programs .",
    "we developed akari catalogue archive server ( akari - cas ) to provide basic tools to access akari - related catalogs for various studies .",
    "our tools have been developed following the concept of sdss skyserver , and users can search , match up , and browse stored data using our attractive tools .",
    "we discussed our direction of implementation for our service that supports many levels of users .",
    "we concluded that the whole processing of tables should be implemented into an rdbms layer .",
    "we found that postgresql is the best open - source rdbms product for our requirements , and we developed various facilities using stored functions of pl / pgsql , c , and sql in the database .",
    "in contrast , the web application layer became compact ; this minimizes the cost of maintenance in the long term .",
    "we presented our simple techniques without htm or healpix to perform fast radial search and dynamic cross - identification using rdbms . with our report of the security configuration of postgresql",
    ", the information in this article will be helpful to develop future astronomical web - based database systems . in the development of the web application",
    ", we showed our idea to create extensive services using only standard technology and without having a huge amount of data at a datacenter .",
    "some thought put into the definition of web apis and public release of the apis can increase the possibility of online astronomical services .",
    "we are grateful to aniruddha r. thakar and yanxia zhang for informing us about status of their cross - identification and literature .",
    "we thank anonymous referee for useful comments and suggestions .    this research has made use of the simbad database , operated at cds , strasbourg , france .",
    "this research has made use of the nasa / ipac extragalactic database ( ned ) which is operated by the jet propulsion laboratory , california institute of technology , under contract with the national aeronautics and space administration .",
    "this research has made use of the nasa / ipac infrared science archive ( irsa ) which is operated by the jet propulsion laboratory , california institute of technology , under contract with the national aeronautics and space administration .",
    "we acknowledge the use of nasa s skyview facility located at nasa goddard space flight center .",
    "funding for the sdss and sdss - ii has been provided by the alfred p. sloan foundation , the participating institutions , the national science foundation , the u.s .",
    "department of energy , the national aeronautics and space administration , the japanese monbukagakusho , the max planck society , and the higher education funding council for england .",
    "the sdss web site is http://www.sdss.org/. the sdss is managed by the astrophysical research consortium for the participating institutions .",
    "the participating institutions are the american museum of natural history , astrophysical institute potsdam , university of basel , university of cambridge , case western reserve university , university of chicago , drexel university , fermilab , the institute for advanced study , the japan participation group , johns hopkins university , the joint institute for nuclear astrophysics , the kavli institute for particle astrophysics and cosmology , the korean scientist group , the chinese academy of sciences ( lamost ) , los alamos national laboratory , the max - planck - institute for astronomy ( mpia ) , the max - planck - institute for astrophysics ( mpa ) , new mexico state university , ohio state university , university of pittsburgh , university of portsmouth , princeton university , the united states naval observatory , and the university of washington .",
    "is financially supported by the japan society for the promotion of science .",
    "akari - cas employs stateless design and defines web api .",
    "an api returns a search result in html or text format .",
    "input parameters are basically taken with the get method of http protocol ; however , the post method is also applied , as required by some tools .    to search catalogs or images ,",
    "users set their search conditions on the arguments of apis . in typical use with radial search or",
    "explore , after setting the catalog parameter to choose a catalog , positional values such as longitude and latitude can be set on lon and lat parameters in degrees or sexagesimal .",
    "the coordinate system of lon and lat parameters can be selected by the coordinate parameter ; j2000 , b1950 , ecliptic , and galactic are supported . instead of position , users can input an object name that can be resolved by simbad or ned with the ident_simbad or ident_ned parameters , respectively . in some parameters ,",
    "boolean values should be set in true / false or 1/0 .",
    "all apis use the db parameter to select the database that users want to use .",
    "a database only has a version of a catalog set ; for example , the dr1 database has fis version 1.0 and irc version 1.0 catalogs .",
    "apis for the table output support display of the column types ( e.g. , int4 , bpchar , etc . ) in the table header . to enable this feature ,",
    "use the types = true argument .",
    "this is useful to create users programs in certain languages .",
    "the output format of a table is html or text in these tools .",
    "users can choose delimiter and newline characters in the text format with delimiter and newline parameters .",
    "we will keep our web api simple . to perform a search with a complicated condition , users can learn sql with our sql tutorial page and use the api of sql search .    see the web api page in the help category of our akari - cas for more information .",
    "we show step - by - step procedures in the script described in  [ pgsql_security ] for security configuration of postgresql in the akari - cas :    1 .",
    "revoke permission of all schemata from public user : + ` revoke all on schema public from public ; ` + ` revoke all on schema pg_catalog from public ; ` 2 .",
    "grant permission of all schemata from admin user : + ` grant all on schema public to admin ; ` + ` grant all on schema pg_catalog to admin ; ` 3 .",
    "create guest schema : + ` create schema guest ; ` 4 .",
    "grant read - only permission of all schemata to guest user : + ` revoke all on schema guest from guest ; ` + ` revoke all on schema public from guest ; ` + ` revoke all on schema pg_catalog from guest ; ` + ` grant usage on schema guest to guest ; ` + ` grant usage on schema public to guest ; ` + ` grant usage on schema pg_catalog to guest ; ` 5 .",
    "revoke permission of all relations in pg_catalog schema from public user : 6",
    ".   grant permission of all relations in pg_catalog schema to admin user : 7 .   grant permission of pg_type to guest user : + this is required to access type information of returned result of an sql execution from web applications .",
    "revoke permission of all functions in pg_catalog schema from public user : 9 .",
    "grant permission of all functions in pg_catalog schema to admin user : 10",
    ". grant permission of selected functions in pg_catalog schema to guest user : + we have to select functions carefully .",
    "berriman , g. b. , good , j. c. , & lonsdale , c. j. , 2000 , , 32 , 1601 de vaucouleurs , g. et al . , 1991 , third reference catalogue of bright galaxies ( new york : springer ) grski , k. m. et al . , 2005 , , 622 , 759 helou , g. , & walker , d. w. , 1988 , infrared astronomical satellite ( iras ) catalogs and atlases",
    ". 7 , ( baltimore : nasa sti ) , 1 helou , g. et al . ,",
    "1991 , databases and on - line data in astronomy ( heidelberg : ari ) , 89 ishihara , d. et al .",
    ", 2010 , , 514 , a1 kawada , m. et al . , 2007 , , 59 , s389 kunszt , p. z. , szalay , a. s. , & thakar , a. r. , 2001 , in proc",
    ". mpa / eso / mpe workshop , mining the sky , ed .",
    "j. banday , s. zaroubi , & m. bartelmann ( garching : eso ) , 631 lawrence , a. et al . , 2007 , , 379 , 1599 murakami , h. et al . , 2007 , , 59 , s369 ochsenbein , f. , bauer , p. , & marcout , j. , 2000 , , 143 , 23 onaka , t. et al . , 2007 , , 59 , s401 skrutskie , m. f. et .",
    "al . , 2006 , , 131 , 1163 szalay , a. s. , 2001 , in asp conf .",
    "238 , astronomical data analysis software and systems x , ed .",
    "f. r. harnden , jr .",
    ", f. a. primini , & h. e. payne ( san francisco : asp ) , 3 thakar , a. r. et al . , 2004 ,",
    "preprint ( arxiv : cs/0403020 ) wenger , m. et al . , 2000 , , 143 , 9 yamamura , i. et al . , 2010 , akari / fis all - sky survey bright source catalogue version 1.0 release note  http://www.ir.isas.jaxa.jp/akari/observation/psc/public/rn/akari-fis_bsc_v1_rn.pdf]@xmath0 york , d. g. et al .",
    ", 2000 , , 120 , 1579"
  ],
  "abstract_text": [
    "<S> the _ akari _ all - sky catalogues are an important infrared astronomical database for next - generation astronomy that take over the _ iras _ catalog . </S>",
    "<S> we have developed an online service , akari catalogue archive server ( akari - cas ) , for astronomers . </S>",
    "<S> the service includes useful and attractive search tools and visual tools .    </S>",
    "<S> one of the new features of akari - cas is cached simbad / ned entries , which can match akari catalogs with other catalogs stored in simbad or ned . to allow advanced queries to the databases , direct input of sql </S>",
    "<S> is also supported . in those queries , </S>",
    "<S> fast dynamic cross - identification between registered catalogs is a remarkable feature . </S>",
    "<S> in addition , multiwavelength quick - look images are displayed in the visualization tools , which will increase the value of the service .    in the construction of our service </S>",
    "<S> , we considered a wide variety of astronomers requirements . as a result of our discussion </S>",
    "<S> , we concluded that supporting users sql submissions is the best solution for the requirements . </S>",
    "<S> therefore , we implemented an rdbms layer so that it covered important facilities including the whole processing of tables . </S>",
    "<S> we found that postgresql is the best open - source rdbms products for such purpose , and we wrote codes for both simple and advanced searches into the sql stored functions . to implement such stored functions for fast radial search and cross - identification with minimum cost , we applied a simple technique that is not based on dividing celestial sphere such as htm or healpix . </S>",
    "<S> in contrast , the web application layer became compact , and was written in simple procedural php codes . in total , </S>",
    "<S> our system realizes cost - effective maintenance and enhancements .    </S>",
    "<S> [ firstpage ] </S>"
  ]
}