{
  "article_text": [
    "consider the following procedure applied to a permutation written in one - line notation : _ alternately mark `` b '' below the smallest unmarked number and then mark `` a '' below the leftmost unmarked number _ until all numbers are marked .",
    "for example , @xmath5 this procedure encodes the optimal play of a certain 2-player game , described below .",
    "the purpose of this note is to analyze the procedure from a combinatorial point of view .    in the game of ethiopian dinner @xcite , alice and bob alternate eating morsels from a common plate .",
    "alice and bob have different preferences .",
    "we identify the set of morsels with @xmath6 : = \\{1,\\ldots,2n\\}$ ] , and fix a permutation @xmath7 of @xmath6 $ ] .",
    "the players preference orders are given by @xmath8 for concreteness , we will always assume the morsels are placed in increasing order from left to right , and that morsel @xmath9 is labeled with @xmath10 .",
    "then bob prefers morsels that are further to the right , and alice prefers morsels with higher labels . assuming these preferences are common knowledge , and that alice has the first move , which morsel should she take in order to maximize her own enjoyment",
    "?    kohler and chandrasekaran @xcite discovered the elegant optimal strategy , which proceeds by analyzing the moves in reverse order : on the last move , bob eats alice s least favorite morsel @xmath11 . on the second to last move , alice eats bob s least favorite morsel from among those remaining ; and so on . in other words ,",
    "the procedure described in the first paragraph assigns each morsel to the player who will eventually eat it .",
    "we call this the _ crossout procedure _ , because on each turn a player determines what to eat by crossing out morsels that will be eaten later until only one morsel remains .",
    "and @xmath12 associated to the permutation @xmath13 .",
    "the down steps of @xmath14 correspond to the numbers marked a ( shown in red ) while the down steps of @xmath15 correspond to the _ positions _ marked b ( shown in blue ) .",
    "the labels on the down steps of @xmath14 and @xmath15 indicate ( in different ways ) the relative order of the numbers marked a and b respectively .",
    ", title=\"fig : \" ] @xmath16\\ ] ]    next we describe the _ crossout correspondence _ , which associates to the permutation @xmath7 a pair of labeled dyck paths encoding who eats what .",
    "dyck path _ of length @xmath1 is a path in @xmath17 from @xmath18 to @xmath19 whose steps are either @xmath20 ( `` up '' ) or @xmath21 ( `` down '' ) and which stays weakly above the @xmath22-axis .",
    "such a path @xmath3 is uniquely specified by its set of _ down steps _",
    "@xmath23 $ ] , which is the set of @xmath24 such that the segment from @xmath25 to @xmath26 lies on @xmath3 for some @xmath27 .",
    "we call this @xmath27 the _ height _ of the down step .",
    "let @xmath28 and @xmath29 be respectively the morsels eaten by alice and bob .",
    "we let @xmath30 be the path of length @xmath1 with down steps @xmath31 , and let @xmath12 be the path of length @xmath32 with down steps @xmath33 .    to indicate the order in which morsels are eaten , we add labels to the down steps of the paths ( figure  [ bij2n ] ) .",
    "let @xmath34 be the positions marked a , and let @xmath35 be the permutation such that @xmath36 is the @xmath37th down step of @xmath14 .",
    "this down step receives label @xmath38 for example , the down step in position  @xmath39 of @xmath14 in figure  [ bij2n ] is labeled  @xmath40 because there are @xmath41 numbers marked a larger than  @xmath39 to the left of  @xmath39 .",
    "now let @xmath42 be the positions marked b , ordered so that @xmath43 . let @xmath44 be the permutation such that @xmath45 is the @xmath46th down step of @xmath15 .",
    "this down step receives label @xmath47 for example , the down step in position @xmath48 of @xmath15 in figure  [ bij2n ] is labeled  @xmath40 because there are @xmath41 numbers marked b smaller than @xmath49 to the right of @xmath49 .",
    "note that @xmath15 has @xmath50 down steps , the last of which has no label .",
    "for a dyck path @xmath3 , denote by @xmath51 be the height of the @xmath9th down step of  @xmath3 , and let @xmath52    [ t.bij ] the crossout correspondence is a bijection between permutations @xmath53 and 4-tuples @xmath54 , such that    * @xmath14 is a dyck path of length @xmath1 .",
    "* @xmath15 is a dyck path of length @xmath32 . *",
    "@xmath55 for all @xmath56 .",
    "* @xmath57 for all @xmath56 .",
    "we prove this theorem in [ s.proof ] and derive some corollaries in [ s.cors ] .",
    "an immediate and rather surprising consequence is that if the permutation @xmath7 is selected uniformly at random , then the pairs @xmath58 and @xmath59 are independent random variables .",
    "in other words , alice s meal viewed in terms of alice s preference order ( i.e. , her own rankings of the morsels she eats , as well as what order she eats them in ) is independent of bob s meal viewed in terms of bob s preference order .",
    "theorem  [ t.bij ] is reminiscent of the franon - viennot bijection @xcite ( see also @xcite ) , which assigns to @xmath7 a _ single _ labeled path of length @xmath60 , which may have east as well as northeast and southeast steps .",
    "the east steps have labels between @xmath61 and @xmath62 , and the northeast and southeast steps have labels between @xmath61 and @xmath27 , where @xmath27 is the height of the step .",
    "hopkins and jones @xcite pioneered the combinatorial study of ethiopian dinner . defining a player s _ outcome _ as the set of morsels eaten by that player",
    ", they asked : as @xmath7 varies over all permutations of @xmath6 $ ] , how many different outcomes can arise under optimal play ?",
    "they showed that for alice the answer is the catalan number @xmath63 , and for bob the answer is @xmath64 .",
    "for example , when @xmath65 the @xmath40 possible outcomes for alice are @xmath66 and @xmath67 ; and the @xmath68 possible outcomes for bob are @xmath69 , @xmath70 , @xmath71 , @xmath72 and @xmath73 .",
    "recalling that @xmath74 counts the number of dyck paths of length @xmath1 , theorem  [ t.bij ] refines these results .",
    "we construct the inverse of the map @xmath75 . given dyck paths @xmath76 with labels @xmath77 on the down steps as prescribed by the statement of the theorem , construct @xmath53 as follows .",
    "start with @xmath1 empty boxes in a line .",
    "we will write the numbers @xmath78 into the boxes , one at a time , to arrive at the line notation of @xmath7 .",
    "mark `` b '' below the boxes on positions belonging to the set @xmath79 , and mark `` a '' below the remaining boxes .",
    "let @xmath80 , and let @xmath81 be the label of @xmath14 on down step @xmath82 .",
    "fill in the boxes marked @xmath83 one at a time as follows : for each @xmath56 , write @xmath82 in the @xmath81th empty box marked @xmath83 , counting from the left .",
    "this is always possible because @xmath84 and at most @xmath85 boxes marked a have been filled , so there are at least @xmath86 empty boxes marked a remaining .",
    "now we fill the boxes marked @xmath87 with the numbers in @xmath88 - d(p_a)$ ] .",
    "let @xmath89 , and let @xmath90 be the label of @xmath15 on its @xmath9th down step .",
    "first write @xmath91 in the leftmost box marked b. delete @xmath91 from @xmath92 and re - index by @xmath93 to obtain a new set @xmath94 . likewise ,",
    "for each @xmath95 , write @xmath96 in the leftmost empty box marked b. delete @xmath96 from @xmath92 and re - index to obtain a new set @xmath97 .",
    "this is always possible because @xmath98 .",
    "after these @xmath99 steps are completed , we have filled all @xmath1 boxes to obtain the line notation of the permutation @xmath7 .",
    "write @xmath100 for the set of all dyck paths of length @xmath1 . given @xmath101 and @xmath102 ,",
    "denote by @xmath103 the set of all @xmath104 such that @xmath105 and @xmath106 . by theorem  [ t.bij ]",
    "we have @xmath107 .",
    "we can refine this enumeration by keeping track of certain inversions in @xmath7 .    for @xmath108 , an _",
    "xy inversion _ of @xmath104 is a pair of indices @xmath109 such that @xmath110 and @xmath9 is marked @xmath111 and @xmath112 is marked @xmath113 .",
    "each aa inversion represents a pair of morsels that alice eats `` out of order '' ( i.e. , she eats the less preferred morsel first ) and each bb inversion represents a pair of morsels that bob eats out of order .",
    "these statistics were not among the over @xmath114 permutation statistics indexed by findstat.org @xcite as of june 2013 .",
    "denote by @xmath115 and @xmath116 respectively the number of aa inversions and bb inversions in @xmath7 .",
    "let @xmath117 and @xmath118 be formal variables , and for integer @xmath27 write @xmath119_q : = 1+q+\\cdots + q^{h-1}$ ] .",
    "@xmath120_q [ h_i^*(\\beta)]_r.\\ ] ]    when we write @xmath82 in the @xmath81th empty box marked a , the @xmath121 empty boxes marked a to its left will later receive larger numbers , so the total number of aa inversions created is @xmath122 .",
    "when we write @xmath96 in the leftmost empty box marked b , the smaller numbers @xmath123 will later be placed in boxes marked b to its right , so the total number of bb inversions created is @xmath124 .",
    "summing over all labelings @xmath125 and @xmath126 satisfying the height restrictions @xmath127 and @xmath128 for @xmath56 , we obtain    @xmath129_q \\cdots [ h_n(\\alpha)]_q [ h_1^*(\\beta)]_r \\cdots [ h_n^*(\\beta)]_r .",
    "\\qed      \\end{aligned}\\ ] ]    [ t.alice ] fix a dyck path @xmath101 .",
    "the number of permutations @xmath104 such that @xmath105 is @xmath130    given a dyck path @xmath131 , we describe a process which generates all permutations @xmath104 such that @xmath105 .",
    "start with @xmath1 empty boxes in a line .",
    "we write the numbers @xmath78 into the boxes , one number at a time , to arrive at the line notation of a permutation @xmath7 .",
    "this write - in process proceeds in @xmath1 rounds .",
    "round @xmath24 consists of the following :    _ if the @xmath24th step of @xmath131 is a down step _ :",
    "write @xmath24 in an empty circled box .",
    "_ if the @xmath24th step of @xmath131 is an up step _ : write @xmath24 in an empty uncircled box , and then circle the leftmost empty uncircled box .    in round @xmath61 , we pick one of the @xmath1 empty boxes and write @xmath61 in it .",
    "circle the leftmost box that is empty and is not circled .",
    "this is the end of round @xmath61 .    at the beginning of round @xmath24 ,",
    "the numbers @xmath132 are already written in some of the @xmath1 boxes , and a total of @xmath133 boxes are circled , where @xmath133 is the number of up steps among the first @xmath134 steps of @xmath131 . among these circled boxes ,",
    "@xmath135 of them have numbers written in them already , where @xmath136 is the number of down steps among the first @xmath134 steps of @xmath131 .",
    "if the @xmath24th step of @xmath131 is a down step , then the number @xmath24 must be written in one of the empty circled boxes .",
    "there are @xmath137 such boxes .",
    "if the @xmath24th step of @xmath131 is an up step , then the number @xmath24 must be written in one of the empty uncircled boxes .",
    "there are @xmath138 such boxes .",
    "the above process yields all @xmath139 such that @xmath105 . for the @xmath140st",
    "down step we had @xmath141 choices , and for the @xmath142st up step we had @xmath143 choices , so the total number of choices is given by ( [ cute ] ) .",
    "an analogous argument ( this time filling in the @xmath1 boxes from left to right ) proves the following .    [ t.bob ] fix a dyck path @xmath102 .",
    "the number of permutations @xmath104 such that @xmath106 is @xmath144    @xmath145 @xmath146    the first identity follows from theorem  [ t.alice ] by summing over all dyck paths @xmath101 , the second from theorem  [ t.bob ] by summing over all @xmath102 . in both cases",
    "the sum is @xmath147 because each @xmath148 is counted once .",
    "we can refine theorem  [ t.alice ] to count aa inversions along with another statistic @xmath149    [ qt ] for any @xmath101 , we have @xmath150_t   [ 4]_t",
    "[ 6]_t \\cdots [ 2n]_t \\prod_{i=1}^n [ h_i(\\alpha)]_q.\\ ] ]    the circled boxes in the proof of theorem  [ t.alice ] are those marked a. on the @xmath140st down step of @xmath131 , we write a number in one of the @xmath151 empty circled boxes , which creates an aa inversion with each empty circled box to its left .",
    "the uncircled boxes are those marked b. on the @xmath142st up step of @xmath131 , we write a number in one of the @xmath143 empty uncircled boxes , which creates a non - inversion with each empty box to its right .",
    "( note that all boxes to its right are currently uncircled , although some may be circled later . )",
    "next we derive from theorem  [ qt ] the identity mentioned in the abstract . the idea will be to express @xmath152 in terms of ab and bb inversions , and then set @xmath153 .",
    "first we make the observation that _ there are no ba inversions _ , i.e. , @xmath154 for all @xmath104 .",
    "indeed , suppose that @xmath155 and @xmath156 and @xmath109 .",
    "when @xmath157 is marked a it is the leftmost unmarked number , so @xmath10 must already have been marked b. when @xmath10 was marked b it was the smallest unmarked number , so @xmath158 , which shows that the pair @xmath159 is not an inversion .",
    "the equation @xmath154 says that at the end of the game , there is no pair of morsels that alice and bob would agree to trade : indeed , @xmath109 is such a pair if and only if @xmath9 is marked b and @xmath112 is marked a and @xmath110 ( so that bob prefers @xmath112 to @xmath9 but received @xmath9 , and alice prefers @xmath9 to @xmath112 but received @xmath112 ) . the lack of such pairs is a consequence of the pareto efficiency of the crossout strategy , proved by brams and straffin ( * ? ? ?",
    "* theorem  1 ) .",
    "@xmath160    by the definition of @xmath152 , @xmath161 note that @xmath162 and @xmath163 yielding since @xmath154 .",
    "[ cor : a ] @xmath164_q = [ 1]_q [ 3]_q \\cdots [ 2n-1]_q.\\ ] ]    let @xmath165 be the total number of inversions of @xmath7 . setting @xmath166 in ( [ eq : qt ] ) yields    @xmath167_{q^{-1 } } [ 4]_{q^{-1 } } \\cdots [ 2n]_{q^{-1 } } \\prod_{i=1}^n [ h_i(\\alpha)]_q.\\ ] ]    now using the fact that @xmath168_{q^{-1 } } = q^{1-k } [ k]_q$ ] , we obtain    @xmath169_{q } [ 4]_q \\cdots [ 2n]_{q } \\prod_{i=1}^n q^{h_i(\\alpha)-1}[h_i(\\alpha)]_q.\\ ] ]    summing ( [ eq : qq ] ) over @xmath170 we count every permutation @xmath104 once , hence    @xmath171_{q } [ 4]_q   \\cdots [ 2n]_{q } \\sum_{\\alpha \\in \\mathcal{d}_{2n } } \\prod_{i=1}^n q^{h_i(\\alpha)-1}[h_i(\\alpha)]_q,\\ ] ]    which , together with the well - known identity    @xmath172_{q } [ 2]_{q }   \\cdot \\ldots \\cdot [ 2n]_{q},\\ ] ]    yields .",
    "suppose alice s preferences are random : @xmath7 is chosen uniformly among all permutations in @xmath173 . under the crossout procedure ,",
    "how likely is alice to eat @xmath174 , the morsel she ranks as the @xmath24th worst ?",
    "we will show that the answer is @xmath175 ; in particular , she always eats her favorite morsel and never gets stuck with her least favorite .    a dyck path with each down step labeled by an integer between @xmath61 and its height is sometimes called a _ hermite history _ @xcite .",
    "the proof of the next theorem uses a well - known bijection between hermite histories and matchings of @xmath6 $ ] , which proceeds from left to right matching each down step of the dyck path with a previous up step .",
    "if the down step is labeled @xmath176 , then we match it with the @xmath176th up step that is not yet matched .",
    "fix @xmath177 and @xmath178 .",
    "if @xmath104 is chosen uniformly at random , then the probability that alice eats all of the morsels @xmath179 is @xmath180    according to theorem  [ t.bij ] , if @xmath104 is a uniform random permutation , then @xmath181 is a uniform random hermite history of length @xmath1 .",
    "we must therefore count the number of hermite histories of length @xmath1 in which @xmath182 are all down steps . as described above , these are in bijection with matchings of @xmath6 $ ] in which each @xmath183 is matched to a number less than @xmath183 .",
    "the number of such matchings is @xmath184 dividing by the total number of matchings @xmath185 yields the result .",
    "following @xcite , we adopt the convention that bob always has the last move .",
    "thus if the number of morsels is odd , say @xmath60 , then bob will move both first and last . as a result ,",
    "the combinatorial description of the crossout procedure ( alternately mark b below the smallest unmarked number and then mark a below the leftmost unmarked number ) is unchanged .",
    "let @xmath28 be the set of @xmath186 morsels eaten by alice , and @xmath29 the complementary set of @xmath99 morsels eaten by bob .",
    "we modify the construction of the dyck paths as follows : @xmath14 is the dyck path of length @xmath1 with down steps @xmath187 , and @xmath15 is the dyck path of length @xmath1 with down steps @xmath188 . in other words , we append a final down step to alice s path and an initial up step to bob s path .",
    "we label the down steps of each path as before ; this time , since only @xmath186 positions are marked a , the last down step of @xmath14 has no label .",
    "[ t.odd ] the crossout correspondence gives a bijection between permutations @xmath189 and 4-tuples @xmath190 , such that    * @xmath14 and @xmath15 are dyck paths of length @xmath1 . *",
    "@xmath191 for all @xmath192 . * @xmath193 for all @xmath56 .",
    "we thank alex postnikov and richard stanley for helpful discussions .",
    "grard viennot , a combinatorial theory for general orthogonal polynomials with extensions and applications . in _",
    "orthogonal polynomials and applications _ ( bar - le - duc , 1984 ) , volume 1171 of _ lecture notes in math .",
    "_ , pages 139157 .",
    "springer , 1985 ."
  ],
  "abstract_text": [
    "<S> we give a bijection between permutations of @xmath0 and certain pairs of dyck paths with labels on the down steps . </S>",
    "<S> the bijection arises from a game in which two players alternate selecting from a set of @xmath1 items : the permutation encodes the players preference ordering of the items , and the dyck paths encode the order in which items are selected under optimal play . </S>",
    "<S> we enumerate permutations by certain statistics , _ aa inversions _ and _ bb inversions _ , which have natural interpretations in terms of the game . </S>",
    "<S> we give new proofs of classical identities such as @xmath2_q = [ 1]_q [ 3]_q \\cdots [ 2n-1]_q\\ ] ] where the sum is over all dyck paths @xmath3 of length @xmath1 , and @xmath4 are the heights of the down steps of @xmath3 . </S>"
  ]
}