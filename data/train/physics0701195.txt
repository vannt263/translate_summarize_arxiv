{
  "article_text": [
    "the d  detector at the fermilab tevatron @xmath0 collider is a large , general - purpose particle detector consisting of a magnetic spectrometer for reconstructing particle trajectories and measuring momenta , a nearly hermetic calorimeter for energy measurement and systems for identifying muons .",
    "in addition to the active detector elements , a custom data acquisition system is used . the data acquisition system ( daq )",
    "provides control and synchronization , detector read  out hardware , and , most importantly for the topic of this paper , trigger hardware and software giving a fast , approximate selection of interesting collisions .",
    "the remainder of this section describes the ddetector , with particular emphasis on the tracking systems that send data to the stt and on the trigger system components needed by the stt .",
    "positions in d  are described using a right  handed cartesian coordinate system with the @xmath7 axis along the nominal proton  beam direction , and the @xmath8 axis in the plane of the accelerator with positive @xmath8 away from the center of the tevatron ring . a standard cylindrical coordinate system is also sometimes used , with the usual definitions of @xmath9 and @xmath10 in terms of @xmath8 and @xmath11 , and with the @xmath7 axes of the cylindrical and cartesian systems the same .",
    "thus , an @xmath12 plane is also an @xmath13 plane and both are perpendicular to the tevatron beams .",
    "the original d  detector , consisting of non - magnetic tracking , a uranium , liquid argon calorimeter and muon detector , was used during run i of the tevatron .",
    "this detector configuration is described in detail elsewhere  @xcite .",
    "significant upgrades to the tracking , muon detection systems , data acquisition hardware and trigger systems were made between the end of run i and the start of run ii .",
    "these upgrades are described in detail in ref .",
    "the upgraded tracking and trigger systems provide all data input to the stt and are described further in the remainder of this section .",
    "the upgraded tracking system is a magnetic spectrometer whose main components are a silicon microstrip detector ( smt ) for precision vertex reconstruction , and a scintillating  fiber based , large  volume central tracker ( cft ) for momentum measurement .",
    "these elements are all contained inside a superconducting solenoid producing a 2  t magnetic field .",
    "the tracking system is shown in fig .",
    "[ f - tracker ] .",
    "these detectors all have an approximately cylindrical geometry with the symmetry axes of the cylinders coincident with the tevatron proton and anti - proton beams .",
    "the smt detector consists of multiple silicon ",
    "strip detectors arranged in a barrel  and  disk geometry as shown in fig .",
    "[ f - smt1 ] .",
    "the detector provides a mixture of 3d ( correlated @xmath12 and @xmath14 plane ) and 2d(@xmath12 or @xmath14 plane ) position reconstruction , representing an optimization between signal  and  background discrimination and cost .",
    "all detector elements are used in offline track reconstruction . however , as described below , there is not enough time to perform a general smt+cft tracking algorithm in the stt , and the initial seed tracks input to the stt have only @xmath12 information .",
    "thus , only the smt @xmath12 information from the barrels is used by the stt . and",
    "@xmath14 data interleaved , so the @xmath14 positions are determined along with the @xmath12 and can be read out for later use . however",
    ", this information is not used by the stt . ]",
    "the smt has six barrels , each consisting of four layers of overlapping silicon  strip detector elements called ladders . a simplified end view of one barrel is shown in fig .",
    "[ f - smt2 ] .",
    "the inner two layers have 12 ladders each , and the outermost two layers have 24 ladders each .",
    "the ladders in each barrel are 12  cm long , with a small gap between barrels .",
    "the @xmath12 strips providing data to the stt have a 25  @xmath3 m pitch , but only every other strip is read out , providing an effective pitch of 50  @xmath3 m and intrinsic resolution of roughly 10  @xmath3 m in the measurement direction .",
    "the smt read  out electronics  @xcite have programmable threshold levels , and only detector strips with pulse heights higher than threshold are read out .",
    "the read out time thus depends on the hit ",
    "strip multiplicity .",
    "there is a 5  @xmath3s latency before read out begins , and the read  out typically adds an additional 10  @xmath3s .",
    "the cft detector consists of multiple cylindrical shells ( layers ) of scintillating fibers .",
    "two basic fiber arrangements are used throughout the cft : ( 1 ) an axial geometry with the fibers in a layer parallel to the center axis of the cylinder providing measurement in the @xmath12 plane , and ( 2 ) a small  angle stereo geometry in which the fibers on the cylindrical surface are canted at 2@xmath15 with respect to the direction of axial fibers . a pair of axial layers and a pair of stereo layers are mounted to a common carbon  fiber support tube to form a super - layer .",
    "the two axial fiber layers in a super - layer have a half  fiber relative offset in @xmath10 .",
    "the same is true for the stereo fibers .",
    "there are eight superlayers in the complete cft , at radii of approximately 20  cm , 25  cm , 30  cm , 35  cm , 40  cm , 45  cm , 49  cm and 52  cm .",
    "fibers in the inner 2 superlayers are roughly 1.7  m long in @xmath7 ; the remainder are 2.5 m. the individual fibers are 835  @xmath3 m in diameter , and the @xmath12 position resolution is roughly 250  @xmath3 m .",
    "as previously mentioned , the raw interaction rate at the tevatron is 1.7  mhz , but the d  rate to tape is limited to 50 - 100  hz . a highly parallel , multi - level trigger system is used to provide the necessary rate reduction while keeping the data for the interesting but rare interactions .",
    "the first level trigger ( l1 ) consists of fast , dedicated hardware which finds energy in the calorimeter and matches data with precoded patterns in the cft , preshower and muon systems .",
    "limited spatial correlations can also be made . the second level ( l2 )",
    "consists of custom preprocessor elements running specialized software algorithms .",
    "the l2 preprocessor results are fed to a l2 global processor , which is used to make all l2 event reject or accept decisions .",
    "the overall architecture of l1 and l2 is shown in fig .",
    "[ f - trigarch ] . the third level ( l3 )",
    "consists of a farm of commercial processors running a simplified version of the offline detailed reconstruction code .",
    "the l1 input event rate is 1.7  mhz , and the output rate is 2  khz .",
    "this is sent to l2 , which must reduce this to 1  khz .",
    "finally , l3 reduces the 1  khz rate to the final 50 - 100  hz rate .",
    "the l1 trigger elements must produce results within 3.5  @xmath3s  @xcite .",
    "queuing studies using simulated events indicate that a l2 preprocessor has roughly @xmath16s / event for processing , and that the l2 global processor has an additional @xmath17s .",
    "up to @xmath18s of latency ( typically introduced by internal data transfer and buffering times ) is also allowed .    as can be seen in fig .",
    "[ f - trigarch ] , each detector element has corresponding trigger hardware . the stt is a l2 preprocessor , and it receives trigger data from the l1 central track trigger ( ctt ) and zero  suppressed raw data from the smt detector .",
    "the figure does not show the control and synchronization signals from the trigger system used by the stt .",
    "the read out time of the smt data and the use of ctt results from l1 prohibit the stt from functioning as an l1 trigger element .",
    "the ctt data are used as input to the stt .",
    "the ctt l1 processor uses axial fiber data from the cft detector to reconstruct particle trajectories ( tracks ) in the @xmath12 plane .",
    "this system is described in detail elsewhere  @xcite .",
    "the output sent to the stt by each of six 80@xmath15 overlapping ctt @xmath10 regions consists of a header record , a list of tracks found by the ctt and a trailer record .",
    "no more than 46 tracks can be sent from each ctt region for a total bound of 276 tracks / event .",
    "the information for a single ctt track consists of the axial fiber number in the outermost cft layer , the track momentum  gev/@xmath19 , @xmath20  gev/@xmath19 , @xmath21  gev/@xmath19 and @xmath22  gev/@xmath19 . ] in the @xmath12 plane ( @xmath23 ) and encoded information that allows the track position at the innermost cft layer to be determined .",
    "when the trajectory and momentum are calculated by the ctt , it is assumed that the particle has zero lifetime and that the interaction creating the particle occurred at the center of the beam .",
    "these assumptions allow nearly 100% efficiency for reconstructing particles satisfying @xmath24  gev/@xmath19 which are created within 1  mm of the average interaction point in the @xmath25 plane .",
    "there is negligible efficiency for particles that do not satisfy either of these requirements .    the known positions at the innermost ( a  layer ) and outermost ( h  layer ) cft layers and the assumption that the particle comes from the average beam position , determined on a run - by - run basis ,",
    "provide three points needed to define an approximate circular trajectory .",
    "because the stt is used to select events in which particles travel a short distance , typically less than 500  @xmath3 m before they decay , the stt track reconstruction removes the assumption that the particle comes from the average beam position in the final , detailed phases of the calculations .",
    "most of the detected particles resulting from a @xmath0 collision emanate from the collision point .",
    "when their trajectories are reconstructed , these particles thus appear to come from a common production point called the primary vertex .",
    "in contrast , @xmath1-flavored hadrons have a lifetime of roughly 1.5  ps , and for typical events with @xmath2hadrons produced in @xmath0 collusions at @xmath4  tev , they travel about 0.51  mm before decaying",
    ". the origins of the trajectories of particles resulting from the @xmath1quark decay thus do not originate at the primary vertex .",
    "the distance from the primary vertex to the point on the trajectory closest to the primary vertex is called the impact parameter , denoted @xmath1 .",
    "thus , tracks with significantly non - zero impact parameters are a hallmark of the decay of particles containing a @xmath1quark .",
    "the stt is designed to perform a real time calculation of the impact parameter for trajectories reconstructed in the @xmath12 plane .",
    "a particle trajectory , and thus the impact parameter , is determined by fitting an approximate circular trajectory to points along the trajectory measured by the d  smt and cft .",
    "the determination uses either three or four points ( clusters ) measured in the smt and two additional points inferred from the cft detector .",
    "the reconstructed impact parameters are then used to select long - lived particles .",
    "a functionally similar system is also used by the cdf experiment , but the design details differ considerably .",
    "although the true impact parameter of particles produced at the primary vertex is identically zero , finite measurement resolution causes these particles to be reconstructed with a small , but non - zero impact parameter .",
    "the impact parameter distribution for these particles is a gaussian with zero mean .",
    "the impact parameter resolution for details . ] for stt tracks is @xmath26 with @xmath23 being the transverse momentum of the particle in gev/@xmath19 .",
    "the momentum dependence arises from multiple coulomb scattering in the beam pipe and the smt detector .",
    "the tevatron beam has a circular cross - section in the @xmath13-plane with a gaussian width of @xmath27 m depending on accelerator settings and instantaneous luminosity .",
    "this causes the primary vertex to be distributed about the beam center .",
    "because the production point is not determined on an event - by - event basis in the l1 or l2 trigger , this increases the apparent impact parameter resolution resulting in a final total impact parameter resolution of @xmath28 again with @xmath23 in units of gev/@xmath19 .",
    "one physics topology likely to benefit from the stt is the higgs search using the final state @xmath29 for this mode , the average impact parameter for particles arising from @xmath2hadron decay is roughly 80 @xmath3 m , so considerable sensitivity remains .",
    "the situation is further complicated because the tevatron beams are not necessarily centered exactly on the smt @xmath7-axis , nor are the beams exactly parallel to this axis .",
    "the position and tilt of the beams are measured by dand transmitted to the stt roughly once every four hours , and the stt computation includes correction factors such that reported impact parameters are calculated with respect to the measured beam position .",
    "residual effects from beam tilt increase the resolution by less than 5  @xmath3 m from that quoted above . including these effects",
    "reproduces the observed impact parameter ( ip ) width for stt tracks from collider data .",
    "the stt hardware provides the following functionality :    1 .",
    "input from and synchronization with the d  trigger and the tevatron , 2 .   receiving initial tracks from the ctt , 3 .",
    "receiving raw data from the smt , 4 .   performing position reconstruction using smt raw data , 5 .",
    "associating smt clusters with input ctt tracks , 6 .   selecting the subset of associated clusters used in fitting , 7 .   fitting the smt and ctt information to determine the impact parameter @xmath1 , 8 .",
    "writing ctt data and stt results to the d  l2 central track trigger ( l2ctt ) and 9 .   storing data for",
    "read out to l3 .",
    "the processing is performed in the above order .",
    "however , significant parallel capabilities and pipelines in the hardware permit data from different parts of the detector and from different interactions to be processed simultaneously .",
    "in addition to the impact parameter , the fit in step ( 7 ) also determines the track direction and momentum in the @xmath12 plane .",
    "the stt hardware architecture and custom electronics are described in overview in section  [ s - stt - hardware ] and in detail in section  [ s - stt - detail ] .",
    "the remainder of this section describes the inputs to the stt , the overall synchronization with the d  trigger and the tevatron , the approach used to determine the impact parameter for each track including cluster finding , pattern recognition and track reconstruction , the stt output data and other aspects of the stt system .",
    "overall synchronization with the accelerator and the d  trigger and detector read out is provided by experiment - wide control logic external to the stt .",
    "the stt receives trigger and beam crossing information via d  control hardware called the serial command link ( scl )  @xcite .",
    "processing is performed by the stt only for collisions initially selected by an l1 trigger .",
    "the stt requires two types of input data :    1 .",
    "the full set of tracks found by the ctt , and 2 .",
    "the sparsified , i.e. strips with signals below a threshold are suppressed , raw data from the smt barrel detectors .    the scl and ctt data are received and rebroadcast within the stt by the fiber road card ( frc ) described in section  [ ss - frc ] . the smt raw data is received and processed by the silicon track card ( stc ) described in section  [ ss - stc ] .      the stt clustering algorithm is used to determine the position in the smt at which a charged particle passed through an smt ladder .",
    "the charge liberated by a single particle as it traverses an smt ladder is typically collected by a small number of adjacent smt read out strips . to obtain optimal position resolution ,",
    "this effect must be considered in the position determination .",
    "therefore , adjacent strips with pulse heights above a strip threshold are grouped into clusters and for each cluster a pulse - height weighted centroid is calculated .",
    "[ f - clus ] illustrates the clustering algorithm .",
    "the cluster - finding algorithm works in the following manner . for each ladder ,",
    "all axial strips are scanned in order .",
    "a cluster is a sequence of neighboring strips , each with a pulse height above the strip threshold .",
    "a centroid is only calculated if at least one strip in the cluster has a pulse height above the centroid threshold .",
    "the centroid position is calculated based on five strips centered on the strip with the largest pulse height .",
    "strips outside this window are ignored in the centroid calculation .",
    "first the centroid is computed relative to the center strip : @xmath30 where the @xmath31 are the pedestal and gain corrected pulse heights of the five strips .",
    "this relative centroid @xmath32 is converted to the binary value @xmath33 , with @xmath34 then the centroid @xmath8 is calculated to quarter strip precision as @xmath35 where @xmath19 is the 11-bit address of the center strip .",
    "thus the centroid @xmath8 is a 13-bit number .",
    "the clustering is performed by the stc hardware described in section  [ ss - stc ] .",
    "a transformation from detector - based coordinates to standard d  @xmath36 coordinates is made prior to the final cluster filtering in the track fitting card ( tfc ) described in section  [ ss - tfc ] .",
    "constraints imposed by the l2 time budget leave too little time for a general pattern recognition algorithm to be performed , so a simplified algorithm is used by the stt .    the first phase of the stt pattern recognition , shown in fig .",
    "[ f - road ] , uses a @xmath37  mm region ( called a road ) centered on each ctt input track as an initial estimate of a possible stt track .",
    "all @xmath12 clusters in an event are checked to see if they lie within any road in the event . each cluster that meets this criterion",
    "is then associated with every road it overlaps .",
    "this is performed for all roads in the event , resulting in lists of smt cluster to ctt track associations .",
    "the road width of @xmath37  mm was chosen to maintain high acceptance for tracks from @xmath2hadron decays and to reduce the impact of run - to - run beam spot shifts .",
    "this provides greater than 98% efficiency for smt cluster association for any particle having @xmath24  gev/@xmath19 and @xmath38  mm which is in the smt geometric acceptance and which passes through the points in the cft a - layer and h - layer defined by the ctt track .",
    "the first phase of the pattern recognition typically results in more than one smt cluster per ctt track per smt layer as described in section  [ s - performance ] .",
    "the true particle trajectory passes through a given smt layer at only one point .",
    "additional clusters in a layer arise from a variety of effects including @xmath39-ray production , clusters from nearby particles in the event and electronics noise .",
    "the fitting can use no more than one cluster per layer , so a second pattern - recognition pass ( called final filtering ) is made following the initial cluster to road association .",
    "this phase selects a single cluster on each layer for use in the fitting .    in the first step of the final filtering ,",
    "the road width is narrowed to @xmath40  mm , and initially selected clusters outside this road are discarded .",
    "mm road width can be used in the initial selection . however",
    ", the hardware used in the initial selection must then be reconfigured when the beam spot moves by a modest amount .",
    "this computation is time consuming , so the roads are left wider , allowing more beam spot motion before a reconfiguration is required .",
    "the beam spot computations used in the final selection and fitting introduce a negligible overhead .",
    "the reconfiguration for these is performed at the start of each run , roughly once every four hours .",
    "] at the same time , the limited @xmath7 information available is used to further filter clusters . because tracks are approximately straight lines in the @xmath14 plane , the pattern of smt barrels that can contribute clusters to the tracks is constrained .",
    "clusters retained for later consideration thus are required to form a trajectory consistent with a straight line in the @xmath14-plane .",
    "specifically , all clusters selected by the final filtering must be from the same smt barrel , or from two adjacent barrels with at most one transition from one barrel to the other .",
    "the starting barrel is defined as the barrel of the cluster selected by the final filtering in the outermost silicon layer . only clusters that meet this criterion are saved for future use after the first step .    for the second step of the final filtering ,",
    "the @xmath12 distance between the ctt track and each remaining associated cluster is calculated .",
    "the distance @xmath41 is given by @xmath42 in which @xmath43 is the position of a cluster associated with the track and @xmath44 and @xmath45 are the azimuthal angle of the track at the measured beam position and its curvature respectively .",
    "@xmath46 is the impact parameter of the track relative to the nominal d  coordinate origin , computed assuming the track comes from the center of the beam . for each smt layer ,",
    "the cluster closest to the ctt tracks is used in determining the final trajectory .",
    "ctt tracks are assumed to come from the beam center .",
    "this assumption could bias the final filtering in favor of clusters giving fitted tracks with small impact parameters .",
    "a number of more flexible algorithms were considered , using simulated data corresponding to a variety of instantaneous luminosity assumptions .",
    "the physics performance differences between the simple algorithm chosen and the more complicated algorithms , all of which removed the origin constraint , were negligible .",
    "the more complex algorithms resulted in processing times two and three times larger than the algorithm above .",
    "after the pattern recognition is completed , the smt clusters selected during the final filtering and the positions of the ctt track at the innermost and outermost cft layers are used as inputs to a @xmath47 fit to a circular trajectory .",
    "[ f - ip ] shows a single , circular trajectory in the @xmath12 plane near the origin .",
    "three parameters are needed to define a trajectory , and we use a common definition : ( 1 ) the signed impact parameter , @xmath1 , ( 2 ) the angle of the line tangent to the track in the @xmath12 plane at the point of closest approach to the origin , @xmath48 , and ( 3 ) the curvature @xmath49 , related to the radius of curvature @xmath50 via @xmath51 and inversely proportional to the track momentum in the @xmath12 plane . here",
    "@xmath52 is the particle charge and @xmath2 is the @xmath7component of the dmagnetic field measured in tesla .",
    "the first order approximation ( assuming @xmath53 , @xmath54 and @xmath55  rad ) for a circle segment is given by @xmath56 the sign of the impact parameter is based on the position of the coordinate origin relative to the circular trajectory and on the curvature . if the product @xmath57 , then the coordinate origin lies inside the circle , and if @xmath58 , the origin lies outside the circle .",
    "the @xmath47 function used in the minimization is thus @xmath59 ^ 2 \\label{e - chi2}\\ ] ] in which @xmath43 is the position of either an smt cluster selected in the final filtering or a cluster on the ctt track and @xmath60 is the uncertainty in the smt position measurement in the @xmath36 plane .",
    "smt clusters are required in at least three of the four smt layers . allowing tracks with clusters from only three layers results in a significant increase in acceptance .",
    "the additional tracks correspond to particles near the edges of the geometrical acceptance of the smt or those which cross non - functioning smt detector elements .",
    "if there are initially four smt layers with clusters selected by the final filtering , and if the resulting fit @xmath47 is larger than is acceptable , the cluster with the largest contribution to the @xmath47 is removed from the fit , and the minimization is repeated .",
    "these are referred to as `` two pass fits '' in the following .",
    "the @xmath47 threshold was determined using single muon events of varying transverse momenta .",
    "the @xmath47 function does not account for multiple scattering , so the threshold is @xmath23 dependent .    because the @xmath47 function is quadratic in the three fit parameters , @xmath1 , @xmath49 and @xmath48 , an analytic minimization can be performed .",
    "the parameters can then be determined using simple linear algebra .",
    "the parameters determined by the fit , @xmath61 , are the primary outputs of the stt .",
    "the hardware implementing the final filtering and the @xmath47 fitting is described in section  [ ss - tfc ] .",
    "performance is shown in section  [ s - performance ] .",
    "for each road with sufficient clusters for fitting , the following information is transmitted to the global l2 processor and is thus available to be used in trigger decisions :    * the impact parameter significance , @xmath62 , * @xmath1 , * @xmath48 , * @xmath23 , derived from @xmath63 ( assuming the @xmath64 ) , * the fit @xmath65degrees - of - freedom , * the number of smt layers used in the fit , and * a de / dx value derived from the pulse height values of the smt hits used in the track fit .",
    "miscellaneous additional information is also provided .",
    "the fit data for each event is formatted into a standard d  l2 record with a three word header followed by the stt track data , followed in turn by a single word trailer .",
    "in addition to the stt fit data , the input ctt data are also transmitted to the l2 ctt preprocessor in unmodified form .",
    "data is also transmitted to l3 for collisions selected by the l2 global processor .",
    "the stt sends a variety of data .",
    "it includes the stt l2 output data , the input ctt data and stc clusters .",
    "occasionally , diagnostic data are also included in the l3 output as described in the following section .",
    "in addition to the primary functionality , the stt provides monitoring information required by all components of the d  detector .",
    "the monitoring data read out request can be made either under the control of an external cpu or by the d  trigger serial command link .",
    "the latter requests are synchronized with the event data , and the resulting monitor data must also be synchronized with event boundaries .",
    "a variety of monitoring data is provided by each stt component .",
    "in addition to copies of the standard output data , the monitor data includes event counts , ctt track counts , stt fit counts , processing time information , and data error counts .",
    "it also includes all found clusters , all clusters associated with roads in the form resulting from the coordinate transformation described above and all fit results , including data for roads with less than three layers with associated clusters .",
    "hardware state histograms and processing times are also available .",
    "the stt hardware consists of custom and commercial electronics mounted in standard 9u@xmath66400  mm vipa / vme64 crates  @xcite .",
    "symmetry in the ddetector construction and read out implies that six identically populated crates ( sextants ) can be used , each receiving complete data from a 60@xmath15 @xmath10 wedge of the smt detector .",
    "no stt data is communicated between crates ; each sextant functions independently and in parallel .",
    "the stt processing within a sextant is subdivided in to two independent sectors , of 30@xmath15 each , making a total of 12 independent stt sectors .",
    "a 2% acceptance loss arises from tracks that straddle sector boundaries and thus can not be reconstructed .",
    "a sextant crate is shown in fig .",
    "[ f - crate ] .",
    "a crate consists of two different , slightly enhanced commercial cpu boards , and 12 custom processor elements .",
    "the custom boards are implemented as daughter boards mounted on a common motherboard design .",
    "in addition , the rear side of the backplane is used to hold vme transition modules ( vtm )  @xcite , optical receivers used by dfor the ctt and smt data .",
    "the main electronics modules in a sextant are :    * one fiber road card ( frc ) .",
    "this board receives experiment - wide synchronization signals via an scl , maintains internal synchronization , and receives and distributes the ctt track data .",
    "the frc distributes these data in parallel to both stt sectors in the crate .",
    "the frc hardware is described in detail in section  [ ss - frc ] . * nine silicon trigger cards ( stc ) .",
    "the stcs receive raw , zero - suppressed data from the smt detector and the ctt tracks from the frc .",
    "the stcs perform the silicon cluster finding and initial pattern recognition described in section  [ s - stt ] .",
    "the stc hardware is described in detail in section  [ ss - stc ] . *",
    "two track fit cards ( tfc ) .",
    "the track fit cards receive ctt track data from the frc and cluster data from the stcs .",
    "the tfc performs the final filtering and track fitting described in section  [ s - stt ] .",
    "it also sends the fit results to the l2ctt processor .",
    "the tfc hardware is described in detail in section  [ ss - tfc ] , and performance figures are given in section  [ s - performance ] . *",
    "a crate control cpu ( not shown ) .",
    "vme crate control is provided by a motorola mvme2302 cpu .",
    "it is also used for stt configuration and control and for monitoring - data transfers . *",
    "l3 read out is provided via a second commodity cpu board .",
    "this cpu , called the single board computer ( sbc ) , communicates with the buffer controllers ( bc ) present on each motherboard ( see section  [ ss - mb ] ) and is part of the standard d  read out chain .",
    "data communication between frc , stc and tfc is primarily over low ",
    "voltage differential serial ( lvds ) links  @xcite , which transmit 32  bit words at 32  mhz .",
    "output is sent to the l2 ctt preprocessor from the tfc using the cypress hotlink protocol  @xcite at 160 mbs , with d  defined data formats providing event boundary and data validity information .",
    "l3 data is read out only for events accepted by the global l2 trigger .",
    "this slower , less frequent read out is performed over the sextant backplane vme bus by the sbc .",
    "as previously mentioned , the stt custom modules use a motherboard / daughterboard design .",
    "the motherboard has sites for : ( 1 ) a single main logic daughter card ( frc , stc , or tfc ) , ( 2 ) up to six i / o cards , either lvds link transmitter boards ( ltb ) , lvds link receiver boards ( lrb ) and/or hotlink transmitter boards , and ( 3 ) one l3 read out buffer controller board .",
    "the motherboard connects these daughterboard sites with three peripheral component interface ( pci ) buses  @xcite that are connected by a bridge to the vme bus on the backplane .",
    "the motherboard also provides connections to the ctt and smt input data via dedicated pins through the backplane .",
    "in addition to providing modularity by separating the logic functions from the i / o functions , designing cards that require only standard pci bus interfaces allowed the purchase of commercial pci programmable logic cores  @xcite and permitted considerable debugging independent of the vme system and motherboard .",
    "the motherboard is described in detail in section  [ ss - mb ] , the lvds transmitters and receivers in section  [ ss - lxb ] , the hotlink transmitter in section  [ ss - hotlink ] and the l3 buffer boards in section  [ ss - l3 ] .",
    "the data flow through the stt , illustrated in fig .",
    "[ f - sttflow ] , is designed such that only the frc requires direct event synchronization with the dtrigger system .",
    "the receipt of a l1 trigger accept is indicated to the frc by data received on the serial command link .",
    "the frc then looks for data from the ctt .",
    "the tevatron turn and bunch crossing numbers in the ctt data stream are compared with those scl data to ensure event synchronization .",
    "the ctt data is then sent by the frc in parallel to the stcs and tfcs in the same crate over lvds links . for all lvds channels ,",
    "transmission of event data starts with a dedicated header , then the event data , and the transmission ends with trailer data .",
    "a channel without data for a given event must still send header and trailer words to maintain event synchronization .",
    "the ctt and smt input data are transmitted to the stt using the g - link fiber - optic protocol .",
    "@xcite the data are received by vtms in the back of the crate , and then passed through the backplane to the motherboard ( and on to the logic daughter cards ) on dedicated user - defined pins .",
    "stc event processing is initiated when ctt data are received from the frc or when smt data arrives from the detector read out .",
    "an stc waits for smt data to appear on its inputs within a certain time window around the receipt of the frc(ctt ) data .",
    "each stc processes eight independent channels of smt data in parallel , reading the data , performing on - the - fly clustering and ctt road association , and then sends the clusters associated with each road to a tfc in the same crate over a single lvds output channel .",
    "the tfc begins reading the frc and stc data as soon as the frc data for one event is complete .",
    "after the frc data are read , the tfc begins reading the data from each of the stcs .",
    "if stc data on a given channel is not available immediately , the tfc waits for the complete event data to appear before moving to the next channel .",
    "when the tfc is finished with all fits from a given event , the results are transmitted to the l2ctt processor via a hotlink transmitter .",
    "the l2ctt processor is a standard d  l2 system module  @xcite .",
    "it receives the ctt input tracks and fit data from all stt crates , reformats the data , sorts it into two lists , and then transmits the results to l2 global .",
    "the first of the two lists contains stt and ctt tracks , and it is sorted by decreasing track @xmath23 . all ctt tracks which gave rise to successful stt fits are discarded from this list .",
    "the second list contains only stt tracks , and it is sorted by decreasing impact parameter significance .",
    "data for l3 read out are transferred from all logic boards to buffer controllers for every event accepted by the l1 trigger .",
    "if a given event is selected by the l2 trigger , the corresponding data in the buffer controller are subsequently read out to l3 . if the event is not selected by the l2 trigger , the buffer for that event is released .",
    "the motherboard forms the basis of all custom - built stt electronics modules .",
    "it is designed to comply wherever possible with the vme64 , vme64x and vme64xp ( vipa )  @xcite standards .",
    "the motherboard is a 9u@xmath66400 mm multilayer circuit board as defined mechanically in ansi / vita 1.3  @xcite .",
    "it has p0 , p1 , and p2 connectors , with pinout as specified in vme64xp .",
    "the j5/j6 connector combination is the 2  mm hard metric 47@xmath665 format connector suggested in vme64x .",
    "it is designed to mate with the svx - type j3 backplane as implemented at fermilab , for communication with the transition modules in the rear card cage .",
    "[ fig : mb1 ] shows a block diagram of the motherboard and fig .",
    "[ fig : mb2 ] shows the connector locations .",
    "the motherboard has sites for up to nine daughterboards .",
    "mb0 can hold a dscl receiver  @xcite , while mb1mb6 are standard pc - mip  @xcite sites . mb0 and",
    "mb1 can not be occupied simultaneously .",
    "the `` logic board '' site holds a large multi - pmc type board .",
    "the `` bc '' site is a standard pmc  @xcite site .",
    "the pc - mip sites are designed to comply with the pc - mip draft specification  @xcite .",
    "these sites are designed to be used for point - to - point link drivers and receivers .",
    "they are type ii pc - mip sites ( front panel i / o ) with the optional j3 connector provided .",
    "briefly , the pc - mip standard defines a pinout for a 3.3v , 32 bit 33 mhz implementation of the pci bus  @xcite on the j1 , j2 connectors , and permits 50 user i / o signals on the j3 connector .",
    "the j3 user i / o signals are used for non - pci communication between mezzanine cards .",
    "the jtag  @xcite interface as defined on pc - mip is driven by the motherboard local control asic and may be used to provide jtag services to the pc - mip sites .",
    "the `` logic board '' site uses multiple pmc sites  @xcite with extra connectors added .",
    "the connectors labeled logic _ xjx are in the standard arrangement for the pci bus on a pmc card .",
    "thus , in principle , one could mount up to four standard pmc cards on a motherboard .    the connectors p1 and p2 of the mb0 site that accommodates the scl receiver",
    "are mapped one - to - one to connectors j1 and j5 of the `` logic board '' site .",
    "connections to a dedicated bus implemented on vme j3 row c , as per d - standard ( see ref .",
    "@xcite ) is made through connectors logic_bj4 and bc_j4 .",
    "connectors j6 and j8 of the `` logic board '' are routed to vme j3 transition module connections  @xcite .",
    "some local buffering of signals is also provided on the motherboard .",
    "three separate pci buses are implemented on the motherboard .",
    "all buses are specified to operate at 33  mhz .",
    "buses 1 and 2 connect the `` logic board '' site to the pc - mip sites .",
    "mb1mb6 are fixed at 32 bits wide due to pc - mip limitations .",
    "bus 3 is 64 bits wide on the motherboard and connects the `` logic board '' and `` bc '' sites to a tundra universe - ii chip  @xcite that provides a complete vme - to - pci bridge .",
    "the vme side provides all vme64 modes except a64 , allowing 64-bit transfers between the vme and pci buses .",
    "all pci buses on the motherboard normally use 3.3v signaling . however , because the universe - ii chip only supports 5v signaling , the devices connected to pci bus 3 must be 5v - tolerant .    a pci target interface is provided on the motherboard ( connected to pci bus 3 ) for local control and monitoring .",
    "this interface provides access to fpga programming resources , jtag boundary scan access to mezzanine boards , and access to the vtm serial control bus via j3 .",
    "the fiber road card ( frc ) serves as the main communication link between the stt and the rest of .",
    "it has five main functions :    1 .",
    "communicate with the  trigger timing and control system ( the serial command link hub ) and initiate any action requested by it .",
    "2 .   receive tracks found by the ctt .",
    "3 .   distribute trigger information and ctt tracks to the stcs and tfcs .",
    "4 .   control the transfer of data produced in the stt system to the l3 system on l2 accepted events .",
    "perform special vme bus request arbitration to resolve conflicts between the in - crate cpu , used for initialization and monitoring data collection , and the single board computer ( sbc ) , used to collect l3 data .",
    "the frc is implemented as a pmc daughter board on the standard stt motherboard described in section  [ ss - mb ] .",
    "a block diagram of the frc daughter board functionality is given in fig .  [",
    "fig : frcblk ] .",
    "it is broadly composed of four functional elements that are implemented in six altera flex 10k50 or 10k30 fpgas @xcite :    1 .",
    "the scl formatter ( sclf ) , providing communications with the scl via an scl receiver mezzanine card .",
    "2 .   the trigger / road data formatter ( trdf ) , receiving ctt data from a vtm and scl information from the sclf , and constructing trigger / road data blocks that are transmitted to the stcs and tfcs .",
    "the buffer manager ( bm ) , controlling the allocation / deallocation of all l3 data buffers in the system and controlling requests for data transmission over the vme bus .",
    "pci interfaces ( pci-1,2,3 ) , controlling the transfer of all data off of the frc daughter board .",
    "each of these elements is described in more detail in the following sections .",
    "control and timing signals from the  trigger framework @xcite come to the frc from the serial command link ( scl ) hub on coaxial 1-gbs cable ( times microwave lmr-200 ) and status information is returned to the hub on rs485 26 conductor cable @xcite .",
    "this data is received / transmitted by an scl receiver ( sclr ) mezzanine board @xcite that plugs into a special pci mip site ( mb0 ) on the motherboard .",
    "information from the scl hub is presented to the frc every 132 ns as 128 bits on two 64-pin connectors .",
    "status information sent back to the hub is implemented as voltage levels on the rs485 cable .",
    "the scl formatter ( sclf ) , implemented in an altera flex 10k50 chip on the frc , picks off scl information relevant to the stt and directs it to the appropriate elements on the frc for distribution to the rest of the system .",
    "distributed information includes : the accelerator clock ; l1 accept and l2 accept and reject bits ; the tevatron bunch crossing ( bx ) and turn ( turn ) numbers associated with the current l1 or l2 information ; trigger qualifiers indicating special actions associated with the current event , such as a request to switch to `` full read out mode '' or a request to collect online monitoring data ; the system initialization request from the scl and various busy and error signals .",
    "data from the ctt is received at the frc by the vrb transition module ( vtm ) @xcite on a single g - link optical cable , serially at 1.06 gbits / s . each word from the ctt consists of 16 data bits and four bits used as control characters to flag the first and last words in an event .",
    "the vtm parallelizes this serial data and presents it , at 53 mhz , on 20 data pins at one of the four vtm input channels on the motherboard j3 connector .",
    "the trigger / road data formatter , implemented in an altera flex 10k50 chip on the frc , receives this ctt data as well as scl information from the sclf .",
    "it checks for a bx number mismatch between the two data sources , informing the sclf to request an initialization from the scl hub if a mismatch is found .",
    "if the data are consistent , the trdf then constructs the trigger / road ( t / r ) data block , which consists of headers and trailers containing trigger and status information , surrounding the unmodified ctt data . the t / r data block , which contains between six and 54 32-bit words , is sent to pci-1 and pci-2 on the frc for transmission to the stcs and tfcs via ltbs .",
    "distribution of control signals within the stt system is accomplished by two means : ( a ) `` trigger qualifier '' bits included in the t / r data header by the trdf and sent to the stcs and tfcs , and ( b ) logic in the buffer manager ( bm ) that coordinates communication with all external requesters of stt data ( aside from l2ctt , which receives its data from the tfc ) .",
    "this scheme centralizes distribution of scl status information and requests for monitoring and l3 data and for initialization within the stt system , allowing the design of only one interface to these external elements .",
    "it requires that the bm communicate with the scl hub via signals passed to / from the sclf , the in - crate cpu via several vme interrupts , the sbc via user - defined lines on the vme backplane and the buffer controllers ( see section  [ ss - l3 ] ) on each of the boards in the system via a custom bus on the j3 backplane .",
    "the bm has six main tasks .    1 .",
    "the bm generates `` error '' and `` busy '' signals based on information from all elements of the system .",
    "this information is passed to the scl hub ( through the sclf ) and allows the stt system to request re - initialization if it detects a fatal error or to request that l1 accepts be halted if it falls behind in processing its data .",
    "2 .   it passes initialization commands from the scl ( scl init ) to the in - crate cpu as a vme interrupt and informs the scl hub of the status of its request .",
    "the cpu notifies all other boards in the system of the scl init request by setting vme - accessible registers .",
    "3 .   it informs the cpu that it has received a `` collect monitoring data '' request from the scl by sending an interrupt .",
    "the cpu then manages the collection of monitoring data from vme - accessible memory on each board .",
    "4 .   it manages the buffering of l3 data in each board s buffer controller ( see section  [ ss - l3 ] ) .",
    "it informs the sbc when all l3 data in the system is ready to be read out following the receipt of an l2 accept .",
    "it schedules vme accesses in the system during normal data taking by controlling when scl init , monitoring requests and l3 data transfers are initiated .    the logic for all of these tasks is contained in an altera flex 10k50 chip .",
    "all data transfer to and from the frc daughter board , with the exception of scl data and ctt roads , is accomplished using the three pci buses ( pci-1,2,3 ) .",
    "interfaces to each of these buses on the frc side are implemented in altera flex 10k30 ( pci-1,2 ) and 10k50 ( pci-3 ) chips using altera `` megacore '' firmware @xcite .",
    "the pci-1,2 buses are used for the transfer of identical copies of the t / r data block to four ltbs on the frc motherboard .",
    "they function as pci masters when transmitting this data and can also function as pci targets for test data read out .",
    "the pci-3 bus is used for communication with the buffer controller and for most vme interactions .",
    "the fpga containing its interface has only pci target functionality , but also includes buffers for l3 data and for data collected by the online monitoring system .",
    "the silicon trigger card ( stc ) is the second logic board flavor .",
    "it receives the raw smt data , performs pedestal subtraction , non - functioning and noisy channel masking , forms clusters and associates these clusters with roads defined by the seed tracks from the ctt .",
    "the stc board is a multilayer circuit board that plugs into all the `` logic board '' site connectors on the motherboard except j5 and j7 .",
    "the stc receives the following inputs :    * ctt seed tracks from the frc via pci-1 . * raw data from the smt via optical fibers using the hp g - link protocol .",
    "four fibers plug into optical receivers on a vtm@xcite in the rear card cage .",
    "each fiber carries the data from two smt detector elements .",
    "thus each stc processes the data from eight smt detector elements .",
    "the data are converted into electrical signals and transmitted through the j3 backplane to connectors j6 and j8 on the stc board .",
    "the data from each detector are eight bits wide . in addition there are four control bits . *",
    "downloadable parameter tables and firmware from the cpu board via the vme bus and pci-3 .",
    "the stc has the following outputs :    * clusters associated with the seed tracks via pci-2 . * diagnostic data for read out by the data acquisition system via pci-3 .",
    "the main logic is programmed into a single large xilinx virtex fpga@xcite .",
    "it consists of the following elements : smt input fifos , channel logic , and control logic .",
    "[ fig : stc ] shows a block diagram of the stc logic .      the four smt input fifos ( smt - if ) each receive the data from one optical fiber from the vtm .",
    "the data are 20 bits wide , eight bits from each detector element and four control bits .",
    "they are strobed into the smt - if by a 53 mhz clock from the vtm .",
    "the smt - if is an asynchronous fifo and splits the data into two streams consisting of eight data bits and four control bits to be fed into the channel logic . in test mode ,",
    "the smt - if blocks also can hold simulated smt data to test the stc logic in a stand - alone way .",
    "the eight channel logic blocks each process the data from one smt detector element .",
    "they perform pedestal and gains corrections , combine data from adjacent strips into clusters , calculate the cluster centroids , and associate the clusters with the seed tracks .",
    "these hits are accumulated in a fifo for later read out by the control logic .",
    "another fifo accumulates diagnostic data for later read out .",
    "each channel logic block consists of three sub - blocks : strip reader , centroid finder , and hit filter .",
    "the strip reader receives the data from the smt - if .",
    "it usually sits in its idle state waiting for data .",
    "the silicon data are digitized on the detector by svx ii chips  @xcite which contain 128 channels of analog pipelines and 8-bit adcs .",
    "each channel is connected to a strip on the silicon detector .",
    "the data read out from the detector has been sparsified .",
    "the data consist of svx chip i d followed by two eight - bit numbers indicating strip number and data value for each strip above threshold .",
    "as the data are received chip - by - chip pedestal and gain corrections are performed .",
    "data from strips that are marked bad are set to zero .",
    "the pedestals , gains , and bad strip lists are stored in lookup tables that are downloaded at initialization time via pci-3 .",
    "when the strip reader encounters the end - of - event record , it goes back to its idle state .",
    "the smt data does not contain synchronization information to identify the beam crossing it originates from . thus synchronization with the seed tracks from the ctt",
    "is achieved by a time coincidence between the arrival of the ctt data and the smt data at the channel logic .",
    "the ctt data arrives from the frc via pci-1 and is sent by the control logic to all channel logic blocks .",
    "arrival of either ctt or smt data starts a counter that counts down from a downloadable starting value .",
    "the maximum delay that can be programmed is 8@xmath3s .",
    "if the other data are received before the counter reaches zero , a trailer is inserted that contains the event number from the ctt data .",
    "if the smt data are missing , an empty event record is generated and if the ctt data are missing the smt data are merged with the following event .",
    "the pedestal and gain  corrected smt data are then fed into the centroid finder at a rate of 25  mhz .",
    "the centroid finder runs at 50  mhz so that it always keeps up with the data arriving at its input .",
    "the cluster finder scans through the strips forming clusters according to the algorithm defined in section [ ss - clustering ] .",
    "numerator and denominator for the centroid calculation are accumulated as the strips are processed and the quotient is calculated as soon as the cluster is complete .",
    "the denominator , which is the total pulse height of the strips used in the centroid calculation , is encoded in three bits using a table of thresholds .",
    "the centroid position is encoded in 13 bits .",
    "four bits identify the svx chip , seven bits identify the strip , and two bits specify the position to quarter  strip precision .",
    "the centroid position and the three - bit pulse height are stored in a fifo that can accommodate up to six events . because the pulse height is a measure of the energy deposited by the particle traversing the smt , it is transferred to the tfc and then to the l2ctt . in order to save data transmission",
    "the dynamic range is limited to three bits of encoded pulse height information .",
    "the hit filter compares the centroid positions with the address ranges that define the roads . for each seed track ,",
    "the road fifo is loaded with two 11-bit addresses defining chip and strip numbers of the upper and lower edges of the road defined by this seed track .",
    "the stc was designed to handle up to 48 roads per event .",
    "typically the number of roads is much smaller , one or two per stt sextant .",
    "every centroid is sequentially compared to every road . if the leading 11 bits of the centroid position lie between the two road edges , the centroid is associated with that road .",
    "we call centroids that are associated with a road `` hits '' .",
    "all hits , consisting of the 16 bits of centroid data and the six - bit road number , are stored in a fifo .",
    "a centroid can be associated with more than one road and therefore give rise to more than one hit .",
    "filtering starts when all roads have been loaded into the road fifo and at least one centroid is present and proceeds at the speed of the system clock ( 100mhz ) .",
    "thus every 10 ns a centroid is compared to a road .",
    "hits produced by the channel logic blocks are transferred to the control logic over two 26-bit buses .    for diagnostic and monitoring purposes , the channel logic can accumulate various data that it receives or generates in fifos to be read out by the control logic . which data are stored is determined by a downloadable configuration word .",
    "possible data types are uncorrected and corrected smt data , axial clusters and centroids , z  centroids , event error flags and data marked as bad by the noisy / bad channel flags .",
    "we refer to these data as `` l3 data '' because they are intended to be transferred to l3 upon l2 accept of an event .",
    "not all the data from every detector in a given stc is written on each event . instead , data from one smt detector per stc is written for each event with the chosen detector changing each event .",
    "the control logic block manages the processing of the event by the stc .",
    "it provides the interfaces with the pci logic and issues control signals to the channel logic .",
    "its components are the interfaces with pci-1 and pci-3 , the l2 logic , and the l3 logic .",
    "the pci-1 interface receives the data from the frc , extracts the event number and converts the seed tracks into address ranges by addressing a lookup table in an external 64 mb synchronous dynamic ram ( sdram ) .",
    "the range limits are loaded into the road fifos in the channel logic blocks .",
    "the pci-3 interface receives all the downloadable parameters and transfers the l3 data to the buffer controller .",
    "it also contains the logic that resets the stc when an initialization request is received from the trigger framework ( scl init ) .",
    "the l2 logic formats the list of hits for transfer to the tfc and sends it out via pci-2 .",
    "the l3 logic collects the l3 data from the channel logic and stores it temporarily in an external sdram until the data are transferred to the buffer controller via pci-3 when pci-3 is available .",
    "the track fit card ( tfc ) provides three parts of the stt functionality described in section  [ s - stt ] : ( a ) the final filtering step of the pattern recognition , ( b ) the trajectory fits to determine @xmath1 , @xmath48 and @xmath49 and ( c ) the output to l2 .",
    "the overall hardware design uses programmable logic for data flow control , buffer control and processor scheduling , and digital signal processors ( dsps ) for the numerical calculations needed for final filtering and track fitting .",
    "the tfc is described in three parts : ( 1 ) the input data sources and buffering hardware , ( 2 ) final pattern recognition and trajectory fitting hardware and algorithm details , and ( 3 ) output buffering hardware .",
    "overviews of the tfc internal data flow and hardware structure are shown in fig .",
    "[ f - tfc1 ] and fig .",
    "[ f - tfc2 ] respectively .",
    "a track fit card receives ctt track data from the frc via an lvds channel .",
    "it also receives smt hit data from six stcs via lvds links , with one channel for each stc . because of the smt geometry , data from three of the nine stcs are sent to both tfcs in one crate .",
    "data are received on all seven lvds inputs for every collision selected by the l1 trigger .",
    "the data from the seven channels are read sequentially on the pci-1 bus on the motherboard .",
    "the pci-1 bus is dedicated to reading input data ; no other data routinely passes over this bus during data taking .",
    "the ctt data are an unaltered copy of the data received by the frc , with the internal lvds header and trailer added .",
    "the stc data for each hit has the hit centroid , the encoded pulse height and an index identifying which of the ctt roads the cluster has been associated with during the initial pattern recognition phase .",
    "the index number corresponds to the order in which the ctt tracks occur in the input ; a cluster with road index 12 is associated with the 12@xmath67 ctt road in the given stt sextant .",
    "the smt to stc cabling implies that clusters from the same trajectory can be spread across the six stc channels .",
    "because of this , the processing of a given event in the tfc must wait until the data from all stc inputs have been read .",
    "the road and cluster data are initially held in input buffer dual  port memory ( idpm ) on the tfc .",
    "the buffer memory is organized such that the ctt data and the smt clusters for a given road are held in consecutive memory locations .",
    "the complete data for each road can be up to 58 words . a specific region of buffer memory containing 64 locations is permanently assigned to each possible road in an event .",
    "the memory has enough room to hold up to 64 roads for each of 16 events .",
    "the buffer space is divided into two independent memory banks , one of which stores the data for the odd  numbered roads in an event and the other of which stores the data for the even  numbered roads .",
    "this split is made to reduce bus contention when loading the data into the processors .",
    "the buffers use dual port memory , and data for one event can be written into the input buffers at the same time as data for a different event is being read out of the buffers for processing .    during the initial read of the stc data from the lvds receivers into the input buffer memory , an on - the - fly conversion of the cluster position from the encoded form to the format used in the fitting",
    "is performed .",
    "the conversion is provided by using the encoded position data as an address to a 28-bit wide look up table .",
    "the table output gives the @xmath68 position of the cluster relative to a sector ",
    "dependent offset and indices denoting the barrel , layer and ladder on which the cluster was found .",
    "full  precision detector alignment constants are included when creating this look up table .",
    "the information is sufficient to reconstruct the @xmath43 position needed in the track @xmath47 calculation .",
    "once all frc and stc data for a given collision have been loaded into a tfcs input buffers , the second phase of the processing begins .",
    "each tfc has eight texas instruments ti320c6203b digital signal processors ( dsps )  @xcite .",
    "the dsps are organized as two independent groups of four dsps with each group having access to input data from one of the input buffer banks .",
    "the two groups run independently and can simultaneously process data .",
    "when any one of the four dsps in a group is not processing data , and complete raw data for at least one road is available in the corresponding idpm , the data are loaded into the dsp via its expansion bus ( xbus ) under the mastership of logic implemented in a programmable gate array .",
    "the xbus transfers 32 bit words on a 33  mhz clock .",
    "each group of four dsps shares a common xbus , and bus arbitration is provided by the firmware in the programmable gate array .",
    "once the transfer has finished , the dsp program , written in c code , performs the final cluster selection and trajectory fit described in section  [ s - stt ] .",
    "the dsp has hardware support for 16-bit integer multiplies and 32-bit integer sums , but does not provide hardware support for integer division or for any floating point calculations .",
    "because of this , the cluster selection and fitting algorithms are implemented with 16-bit integer input data .",
    "the final phase of the pattern recognition has been described in section  [ s - stt ] .",
    "the modifications required when running in the dsps arise because only integer multiplies and adds can be performed efficiently in the dsp . to accomplish this ,",
    "the coefficients @xmath45 and @xmath44 defining the center of the ctt road given by @xmath69 , are not computed in the dsps but rather all necessary values of @xmath45 and @xmath44 are computed in advance and loaded into small look  up tables in the dsp internal memory during configuration .",
    "the ctt input data for each road provides @xmath68 indices at two fixed radii of approximately 20  cm and approximately 50  cm . under the assumptions of cylindrical symmetry and the particle originating at the origin",
    ", the values of @xmath45 and @xmath44 can be tabulated as functions of the @xmath68 index at one of the two radii , and the difference between the two @xmath68 indices .",
    "the resulting table is stored in the internal memory of each dsp .",
    "the assumption that the particle originated from the nominal dcoordinate origin is too simplistic .",
    "an additional set of corrections to the road center determined above is needed to account for the true beam position . corrected values for @xmath45 , @xmath44 and @xmath46",
    "are derived in terms of the known beam position and the initial estimates of the curvature and azimuthal angle .",
    "the correction factors are derived externally at the start of each d  run to allow for time variation of the beam position , converted to a packed integer format and downloaded into internal memory of each dsp .",
    "the stored values of @xmath45 , @xmath44 , and @xmath68 are scaled to provide maximum precision in a 16-bit integer .    performing a standard , linear least - squares minimization of eqn .",
    "[ e - chi2 ] to determine the three track parameters @xmath1 , @xmath48 and @xmath49 gives the following three equations : @xmath70 with @xmath71 , @xmath72 with @xmath73 and @xmath74 . here",
    "@xmath75 is the coordinate of an smt or ctt point used in the fit and @xmath76 is the resolution of the point .",
    "the functions @xmath77 are ratios of sums of powers of @xmath78 and @xmath79 .",
    "the @xmath80 , although simple to write in sum notation , are far too algebraically complicated to calculate in the dsps within the l2 time budget . in addition , the @xmath80 terms have large differences in magnitude so finding a common rescaling of numerical results into 16 bit integers is difficult . finally , the @xmath81 terms involved sums of products of radii and angles , giving a large number of operations needed to compute the track parameters .",
    "the above result can be rewritten using straightforward algebra as @xmath82 with @xmath83 , @xmath84 , and @xmath85 .",
    "this is a significant improvement in a number of ways .",
    "first , the column vector of measured coordinate residuals @xmath86 involves only the angles @xmath87 . because @xmath88 , this term is not needed in the above sums .",
    "the second improvement is that all terms in a given row of the coefficient matrix are of the same dimension and thus of the same numerical scale .",
    "this allows rescaling the ( real valued ) matrix elements @xmath89 and angles @xmath90 into 16-bit signed integers while using only one rescaling for the @xmath87 s .    in either of the above forms ,",
    "the dsps can not compute the terms @xmath80 or @xmath89 with enough precision quickly enough to meet the l2 time budget .",
    "instead , the entire azimuthal range is subdivided into 1440 @xmath10 sections . within each of the 1440 sections , the same coefficients @xmath89",
    "can be used while retaining sufficient precision in the calculations .",
    "because the terms in the coefficient matrix depend on which smt layers contribute clusters to a given fit and because of mechanical position variations within the smt barrels , more than one matrix is needed for each of the 1440 sections .",
    "for example , a given fit in a given section may have four smt clusters selected for fitting , the first cluster from layer one , barrel one , the second from layer two barrel one , the third from layer three barrel one , and the fourth from layer four of barrel two .",
    "another fit in the same @xmath10 section may instead have clusters from only three layers , for example layers two , three and four all in barrel five .",
    "the coefficient matrices for these two fits will be significantly different . to have sufficient precision to compensate for these effects ,",
    "8192 matrices are used for each of the 1440 slices giving roughly 12,000,000 unique coefficient matrices .",
    "all matrices for each @xmath10 slice are computed a priori , and the values are written into look up tables on the tfcs . because a given tfc processes data for only one @xmath91 segment sector at the outermost cft layer but which curve into the sector . ]",
    ", each tfc requires matrices for the 160 @xmath10 slices contributing data to that tfc .",
    "each matrix has 15 16bit elements ( for which 16 16bit locations are allocated for easy address construction ) .",
    "thus , 4 mb of memory is needed for each tfc to hold the precomputed matrices .",
    "twice this amount of memory is provided on the tfc , so each group of four dsps can have its own copy of the complete set of matrices . within a group of four dsps",
    "the matrices are accessed using a shared data bus , but the two groups are completely independent and execute in parallel .      as with the input buffer memory ,",
    "output fit data are stored in dual  port buffer memory .",
    "once all fits for a given event are finished , the data is written to a hotlink transmitter using the pci-2 bus .",
    "on - the - fly formatting , including addition of a standard d  header and trailer and a checksum is performed during the pci write phase .",
    "the tfc is the bus master for this transfer .",
    "the event time  ordering is preserved during the output writing .",
    "the link receiver board ( lrb ) has three channels , each capable of receiving 32-bit data words at 33 mhz over 10-conductor category-5 cables that are connected to 10-pin modular connectors on the front panel .",
    "the board has a slave pci interface that allows read out of the data over a 32-bit , 33  mhz pci bus . except for the dimensions of the front panel input connectors",
    ", the lrb complies with the pc - mip standard  @xcite ( type ii card ) .",
    "an overall block diagram of the lrb is shown in fig .  [",
    "fig : lrb ] .",
    "the lvds  @xcite receiver is a national semiconductor ds90cr286 integrated circuit , a 28-bit receiver which operates at 3.3v .",
    "the receivers run continuously at a clock supplied over the link .",
    "the clock frequency is 64 mhz , twice the pci clock frequency .",
    "each lvds clock cycle one 24-bit word is received by the lvds receiver , consisting of 16 data bits plus control and error correction bits .",
    "input data is processed through a 5-bit hamming code that corrects all single - bit errors and detects all two - bit errors and many multi - bit errors .",
    "the resulting 20 bits ( 16 data plus control and error flags ) are stored in lfifo .    lfifo is a 256-word by 20 bit fifo .",
    "it is written using the lvds link clock , and read using the doubled pci bus clock .",
    "the lfifo output is demultiplexed to form 36 bit words , which are written to ram .",
    "the board contains a 256k @xmath66 36 synchronous ram , which is used to buffer the data which do not fit in the 256-word lfifo .",
    "the ram operates at 132 mhz , four times the pci clock rate , and is multiplexed to appear as a six - port ram ( three write ports , three read ports ) .",
    "typically up to 3 write operations can be performed in one pci clock cycle , allowing received data from three active channels to be stored .",
    "a single read operation can also be performed for pci access .",
    "the sram logically appears as three fifos , each used by one lrb channel .",
    "the data is read out of the sram and written into the corresponding pfifo .",
    "pfifo is a 64-word by 18bit fifo .",
    "it is written and read using the doubled pci clock .",
    "it buffers the data between the sdram read port and the pci interface . whenever the pfifo occupancy is not above a certain threshold ,",
    "data is read from the sram to refill it .",
    "data is read on demand by the pci interface .",
    "the pci target interface block contains the pci target interface , plus multiplexing and control logic to merge the data from the three channels into a single pci data stream .",
    "the lrb can operate either as three simple receivers with data fifos , or in an event - oriented block mode . in block mode",
    ", data is expected to conform to a specified format with data blocks containing headers with a block i d , optional data words , and a trailer .",
    "data may be combined across links in such a way that the next can be read with a single pci block transfer .",
    "multiple lrbs may be read out in succession on the same pci bus with a single pci block transfer .",
    "each link transmitter board ( ltb ) holds a slave pci interface , formatting logic , and three lvds link transmitters .",
    "the ltb complies with the pc - mip standard ( type ii card ) to the same extent as the lrb .",
    "the three ltb transmitters operate strictly in parallel and transmit identical data , though they can be individually disabled .",
    "data is written as 32-bit words via the pci interface and transmitted as two 16-bit words over the link .",
    "in addition , each 32-bit word has two additional out - of - band control bits available which can mark the beginning and end of data blocks .",
    "an overall block diagram of the ltb is shown in fig .  [",
    "fig : ltb ] .",
    "the clock frequency for the link transmitter is 64 mhz , double the pci clock rate .",
    "communication between subsystems of the l2 d  trigger must adhere to a common hardware and software standard .",
    "the protocol uses cypress hotlink transmitters and receivers to provide serial communications operating at 160 mbs .",
    "a block of data ( typically corresponding to data for one collision ) is bounded by d - specific header and trailer words .    rather than building the hotlink transmitters as part of the tfc ,",
    "a separate transmitter board was built increasing modularity .",
    "the board conforms to the pc - mip standard , and one transmitter board is used on each motherboard having a tfc .",
    "data are written to the hotlink transmitter using pci burst transfers with the tfc acting as bus master .",
    "the data input to the transmitter must have a complete d  l2 header and trailer , but the transmitter inserts padding words needed to meet the d  requirement that the data  block word count be a multiple of four 32bit words . for one tfc / sextant both ctt data and stt fit data are written .",
    "the ctt data is written as soon as all input data for the collisions are in the tfc input buffer , and the stt fit data are written as soon as all fits for a given event are finished .    a block diagram of the hotlink transmitter is shown in fig .",
    "[ f - hlt ] .",
    "each transmitter has the oscillator used to drive the hotlink serial data , a cypress hotlink transmitter  @xcite , transformers for isolation and an altera 10k50 fpga providing the pci interface , 4 kb of data buffering and hotlink flow control .      on every l2",
    "accept issued by the trigger system , data corresponding to the bunch crossing for which the l2 decision was made is read from all elements of the  detector into the l3 system .",
    "the buffering of this l3 data is differs from sub ",
    "systems to sub  system , however , the read out mechanism is uniform . single board computers ( sbc ) @xcite , housed in each sub - system s vme crates and running the linux operating system , are used to gather l3 data from individual sub - system elements over the vme backplane .",
    "more details on the  l3 trigger system are available in ref .",
    "@xcite .    within the stt system ,",
    "read out to l3 , via the sbc , is controlled by the buffer manager ( bm ) in the frc .",
    "l3 data for each of the individual boards in the system is stored in custom - built daughter boards called buffer controllers ( bc ) .",
    "the bm broadcasts commands over a group of dedicated lines on the custom j3 backplane of its crate , telling all bcs into which buffer they should write data corresponding to an l1 accept or out of which buffer they should read data for transmission to the sbc . each bc is responsible for reading data from the logic board ( frc , stc or tfc ) on its motherboard , storing this data in a buffer at a specified location and , finally , writing the appropriate data to a vme - accessible fifo for read out by the sbc when requested to do so by the bm .",
    "the bcs also indicate their progress executing commands to the bm using status lines on the j3 backplane . a block diagram of the main components of the stt l3 read out chain is given in fig .",
    "[ fig : l3blk ] .",
    "design of the stt l3 read out system is simplified by using identical memories , divided into 16 fixed - length buffers in all of the bcs . in this way , only a single buffer number for writing or reading needs to be generated in the bm and broadcast to all bcs .",
    "the bm , then , has three broad tasks to accomplish in managing the l3 buffers for the stt system :    1 .",
    "managing lists of used and unused buffer numbers",
    ". 2 .   broadcasting",
    "the appropriate buffer number to the bcs for writing / reading on l1/l2 accepts ( see section  [ ss - l3comm ] ) .",
    "3 .   notifying the sbc that all l3 data in this stt crate is ready to be read out ( see section  [ ss - l3sbc ] ) .",
    "the scheme for allocating and deallocating buffer numbers uses two fifos : a `` free '' fifo containing a list of buffer numbers that are available for writing and a `` used '' fifo with a list of buffer numbers currently containing data . on an l1 accept , the next buffer number ( if available ) is moved from the free to the used list and is sent to the bcs .",
    "l2 decisions are sequential at , so on each l2 period , the next buffer number is taken from the used to the free list . if the l2 decision is accept , this buffer number is also sent to the bcs , otherwise no further action is taken .",
    "storage of l3 data , for each l1 accept , pending read out to l3 if an l2 accept is issued , is accomplished in the stt system using a common set of daughter boards  the buffer controllers ( bc ) .",
    "a bc is plugged into each motherboard and communicates with the logic daughter board on that motherboard by the pci-3 bus .",
    "the bcs have four main hardware elements ( see fig .",
    "[ fig : l3blk ] ) :    1 .",
    "l3 data memory divided into sixteen 8k @xmath66 32-bit buffers and implemented using four idt70v9099 128k @xmath66 8-bit synchronous dual - port srams . 2 .",
    "an l3 output data fifo used to buffer data for transmission to the sbc and implemented using an idt72v36100 64k @xmath66 36-bit fifo 3 .",
    "an interface to the pci-3 bus containing both pci master and target functionality used for reading l3 data from the logic daughter boards and for the transfer of data to the sbc via a pci to vme interface , implemented in an altera flex 10k50 fpga .",
    "control logic for writing and reading data to the memory and fifo , implemented in an altera flex 10k30 fpga .    upon receipt of a _",
    "put _ message from the bm on an l1 accept ( see section [ ss - l3comm ] ) the bc begins the process of transferring data from its associated logic daughter board to a buffer specified by the bm .",
    "the logic board to bc transfer starts when the logic board sets one of the user - defined lines on the pci bus . to minimize transfer time ,",
    "this transaction is done as a pci burst . however , since the bc does not know , a priori , the number of data words to transfer , the transaction is terminated by the logic board using the pci target disconnect function . as data words arrive from the pci bus , they are stored sequentially into the memory block associated with the chosen buffer number .    if the l2 decision associated with the l1 accept whose data is stored in buffer _",
    "i _ is a reject , no action is taken at the bc .",
    "i _ is simply returned to the list of free buffers in the bm and any data in it will be overwritten the next time that buffer is used . if the l2 decision is accept , however , the bm sends a _",
    "get _ message to the bc ( see section  [ ss - l3comm ] ) .",
    "the bc control logic then transfers data from the buffer number specified in the bm message to the l3 output fifo .",
    "it also stores the number of words in the data block in another fifo , _ word count _ , implemented in the pci-3 interface fpga .",
    "data wait in these fifos until they are read by the sbc through the pci - to - vme bridge on the motherboard .",
    "the sbc first reads the word count fifo , as well as crate identifier information , and then performs a block transfer from the l3 output fifo of the number of words specified by the word count .",
    "messages are passed between the bm and the bcs using a 25-line bus on the custom j3 backplane .",
    "the protocol is very similar to that used for messaging between fermilab vme read out buffers ( vrb ) and the vrb controller ( vrbc ) @xcite .",
    "messages from the bm to the bcs occupy 12 lines , four of these are used to identify the message type while the remaining eight contain data associated with the message .",
    "one line is used as a message strobe .",
    "six status signal are passed as levels from the bcs to the bm .",
    "each status signal is sent as a differential pair on two lines , which are ored or anded on the backplane .",
    "the bm therefore receives the combination of the status from all bcs .",
    "messages sent from the bm to the bcs come in two classes .    1 .",
    "_ put _ messages , indicating that the bcs should read l3 data from their associated logic boards and put that data into the buffer .",
    "2 .   _ get _ messages , indicating that the bcs should read data from their buffer and write it into the l3 output fifo for read out ( described below ) by the sbc .",
    "the protocol for _ put _ and _ get _ classes is identical .",
    "each class requires three separate messages and one status signal from the bcs . to begin the _ put _ or",
    "_ get _ process , the bm sends two messages .",
    "the first contains the buffer number to be used for the write or read process , while a bunch crossing identifier is sent with the second and is used in the bcs to check for event misalignment .",
    "when a bc has finished its _ put _ or _",
    "get _ operation , it sets its input to the _ done _ status line .",
    "the _ done _ and _ done * _ signals from all bcs are anded and ored on the backplane and indicate to the bm when the first bc , and when all bcs , have finished their operations .",
    "when all bcs are done , the bm sends out its final message of the chain to indicate that the entire _ put _ or _ get _ process is finished .    besides the _",
    "done _ status lines , the bcs also transmit error and busy information from their associated logic boards to the bm . based on these status signals the bm can request that the trigger framework issue an initialization command in the case of a serious error , or that it block l1 accepts when buffers in the stt system become full due to processing delays .",
    "the bm notifies the sbc that all l3 data are ready for read out after an l2 accept using a user - defined line on the vme j2 backplane .",
    "the sbc then takes over the process of reading all of the l3 data from its stt crate as described in ref .",
    "when read out is finished , the sbc notifies the bm using another user - defined line on the vme j2 backplane .",
    "as with other d  trigger elements , a full simulation of the stt was developed .",
    "the simulation was used in the design phase of the stt for algorithm testing , is used with simulated signal and background samples to test the selection efficiency for different trigger criteria , is used for verification of results determined using the actual hardware , and it contains the code to generate most of the hardware look up tables .    the full d  trigger simulation ( trigsim ) is a single program which provides a standard framework for including code for individual trigger elements .",
    "the core pieces of the framework give a means to specify the data format transferred between trigger elements , a means to simulate the time ordering of the trigger levels and a simulation of the data transfers .",
    "algorithms specific to a given ( hardware ) trigger element are required to receive and send data in the actual format used online using an interface provided by the trigsim framework .",
    "the trigger simulator code is written in c++ , although for part of the stt simulation , the c++ is used to redirect calls to standard c code .",
    "the stt simulation has three major elements motivated by the hardware design .",
    "these are : ( 1 ) an emulation of the frc functionality , ( 2 ) an emulation of the stc functionality and ( 3 ) emulation of the tfc which can use the actual c code run in the dsps .",
    "in addition , c++ classes were developed to represent the input and output data , including expanded formats used online for debugging purposes .",
    "the internal structure of the simulator mimics the sextant and sector division of the actual stt . as for all trigger elements in the simulation",
    ", the stt code also creates output data formatted as sent to l2 and l3 online .",
    "the stt simulation can be run either as part of the full dtrigger simulation or in a standalone mode .",
    "the standalone mode is used primarily for testing and debugging .    in the frc hardware , algorithms",
    "are implemented using programmable logic chips .",
    "because of this , the trigger simulator provides an emulation of the frc functionality written in c++ .",
    "all major features of the frc are provided , including subdivision into six sextants and redistribution of the ( simulated ) inputs from the l1ctt .",
    "like the frc , the stc hardware uses programmable logic arrays and the simulator also implements the algorithms via emulation using c++ code .",
    "historically , the cluster - finding algorithm was developed in c++ and then translated into the firmware running on the stc .",
    "many of the look up tables used in the stc hardware , for example the tables which determine the boundaries of the cluster - matching region for each l1ctt track , can be created within the simulator .",
    "the look up tables generated within trigsim can be written out in the format used online , and the actual online look up tables can also be read back into the simulator .",
    "this provides an efficient means for generating and studying the online performance .",
    "the tfc hardware is built using a combination of programmable logic and standard dsps programmed via c code .",
    "the simulator therefore uses a mixture of emulation ( for the event building done in programmable logic ) and the actual fitting code . as with the cluster finding for the stc ,",
    "the track - fitting algorithms used online in the dsps were first developed in c++ .",
    "the first algorithms were developed with floating - point precision within the framework of the stt simulator .",
    "several different algorithms were studied using monte carlo simulated d  data to determine their efficiency for selecting long - lived tracks and their rejection of prompt events .",
    "the floating - point algorithms were then translated into algorithms using only integers .",
    "these integer algorithms were first implemented in the simulator , and then , in the final step , the actual c code for the dsps was written .",
    "the simulator includes not only the capability of using the prototype floating point and integer routines , but also can have the c code for the dsps compiled in .",
    "the precomputed lookup tables used in the tfc hardware for the track fitting , described in section  4.4.2 , are generated within the stt simulation , and the simulation can read these back in for use with the dsp code in the simulator .",
    "the stt simulation also provides a mechanism to produce test vectors , which can then be input into the hardware for local and global stt testing .",
    "the output test vectors can be compared directly to the resulting hardware output bit  by  bit .",
    "these test vectors are used to verify algorithms , hardware configuration and hardware operation in situ .",
    "the stt simulation also runs on real d  data .",
    "once the stt hardware data was written into the d  data stream , it became possible to run the stt simulation for either the actual simulation or in _ pass - through _ mode , whereby the stt data sent to l3 is analyzed directly .",
    "both modes of operation were used for verifying the stt output data from the hardware .",
    "in addition , the simulation can operate in mixed modes in which some of the data are passed through as computed online and some are regenerated in the simulation .",
    "for example , the l1ctt tracks found online can be used as input to either the stc simulation , or the tfc simulation , or both .",
    "the stt performance has two aspects .",
    "one is the overall processing time in comparison with the allowed time budget .",
    "the other is how well the physics goals are met .",
    "the second of these depends on a number of variables including ctt road multiplicity , smt cluster reconstruction , pattern recognition performance and track fitting quality .",
    "this section describes results for both aspects of the performance .",
    "the general d  l2 processing budget determined from queuing simulations is 100  @xmath3s total for processing by the preprocessors and l2 global , with another 100  @xmath3s allowed for latency .",
    "these simulations , which assume buffers for 16 events at all time critical points in the processing , were used as guidelines for the stt design .",
    "the actual stt processing time for each interaction depends on the number of ctt tracks , the occupancy of the smt detector , and the number of clusters that get assigned to ctt roads .",
    "there is also a dependence on initial stt track  fit quality .",
    "all of these quantities are affected by the instantaneous luminosity , and these determine the variation in actual processing times , the data transfer times and the latency .",
    "the stt processing occurs with a high degree of parallel computation .",
    "for example , the smt data are converted to clusters on - the - fly , and the time for the last cluster to be found is essentially the same as the read out time for the last of the data from the smt .",
    "similarly , the ctt data input to the frc is rebroadcast to the stcs and tfcs within a few clock cycles .",
    "thus , most of the processing by stt appears as latency , and is not counted against the processing time budget .",
    "the main exception to this is the track fitting performed in the tfc .",
    "although there is significant parallel capacity , an individual fit can take up to 50  @xmath3s ( although most occur much faster ) . during this time , if other dsps in the same half - tfc are free , additional roads can be fit .",
    "however , if all dsps are used , then fit input data waits in buffers until a dsp is available .",
    "[ f - tfctime ] shows the time taken to load data into a tfc from the internal tfc buffer ( idpm ) until the fit output data are written to the output buffer .    the overall stt processing time and latency",
    "do fit well within the allowed budget . during d  data taking , at",
    "even the highest instantaneous luminosities seen thus far , the stt contributes a negligible amount to overall experimental dead time .",
    "the overall effectiveness of the stt will be determined by the signal efficiency and background rejection that it delivers .",
    "this is largely determined by the fidelity of the reconstructed tracks which , in turn , depends on the quality of the smt cluster reconstruction and the pattern recognition and fitting algorithms .",
    "[ f - cluspos - mu50 ] and  [ f - cluspos - mu02 ] show the @xmath12 position difference between true particle trajectories at each smt layer and the associated smt clusters at the same layer .",
    "the data are simulated single muons of @xmath92  gev/@xmath19 and @xmath93  gev/@xmath19 respectively .",
    "one sees clearly the effect of multiple scattering in the lower @xmath23 sample .",
    "the quality of the association is dependent on the physics as well .",
    "[ f - cluspos - zh ] shows the same distributions for tracks from simulated @xmath94 reactions .",
    "these distributions are created from all good quality reconstructed tracks .",
    "a good quality track is defined as one which satisfies @xmath95 .",
    "the @xmath23 dependence reflects the effect from multiple scattering .",
    "[ f - nclus ] shows the cluster multiplicity per road after the initial filtering for simulated single muon and @xmath96 interactions .",
    "one sees the relative cleanliness of the simple single muon sample as compared with the @xmath96 physics sample , and the reason for the final filtering pass .",
    "[ f - fitmatch ] shows the distribution of the @xmath47 calculated from the difference between fit parameters for a fitted track and its matched true monte carlo particle .",
    "the fit error matrix is used in the calculation .",
    "the matched particle is determined by trying all possible matches between a given fit track and all true particles with @xmath24  gev/@xmath19 .",
    "the particle which gives the lowest @xmath47 is defined as the matching particle .",
    "there are 3 degrees of freedom in this @xmath47 , and one sees reasonable match @xmath47 values .",
    "[ f - bimp ] shows distributions of the reconstructed impact parameter for all good stt tracks in two samples : ( a ) simulated @xmath96 events and ( b ) simulated dijet events .",
    "the shaded region corresponds to good tracks for which the matched true particle comes from a @xmath1flavored decay .",
    "the open histogram is for all good tracks .",
    "one sees clearly the predominance of @xmath1flavor in the large impact parameter regions .",
    "the impact parameter distribution width has a @xmath23 dependence introduced by multiple scattering .",
    "the effect of the @xmath23 dependence can be reduced by using the impact parameter significance @xmath97 instead of the impact parameter .",
    "the uncertainty using tracks with four smt clusters . ] @xmath98 takes into account the effect of multiple scattering .",
    "[ f - mures ] shows the impact parameter resolution obtained from simulated single muons .",
    "the lower curve is for the case when a fit used four smt clusters , and the upper curve is for the case when a fit used only three smt clusters .",
    "fits to these curves give @xmath99 m and @xmath100m/(gev/@xmath19 ) for fits with four smt clusters and @xmath101 m and @xmath102m/(gev/@xmath19 ) for fits with three smt clusters . fig .",
    "[ f - bsig ] shows the impact parameter significance distributions for the same two samples in fig .",
    "[ f - bimp ] . here",
    ", the separation between signal and background is even clearer than for the impact parameter alone .",
    "the stt tracks can be used as input to a fast multivariate b - identification algorithm which is run in the l2 global processor .",
    "the algorithm combines various track quantities in a way which enhances the online b - identification efficiency compared to simpler ip cut methods .",
    "[ f - ip ] shows the impact parameter distribution reconstructed by the stt in collider data taken at an instantaneous luminosity of roughly @xmath103/cm / s . the open histogram shows the result for all tracks reconstructed by the stt , and the hatched histogram shows the result for good tracks , defined by requiring the fit @xmath47 to satisfy @xmath104 .",
    "one sees the good track requirement has very little impact on the efficiency but removes tails from misreconstructed tracks .",
    "[ f - zeffi ] shows the efficiency measured using collider data for reconstructing an stt track measured relative to tracks found by the offline reconstruction program for muon tracks arising from the decay @xmath105 .",
    "the horizontal axis is the maximum fit @xmath47 for defining a good track .",
    "a tight requirement corresponds to low @xmath47 and thus lower efficiency .",
    "finally , fig .",
    "[ f - evp ] shows the efficiency as a function of purity for good stt tracks measured relative to tracks found by the offline reconstruction program . here",
    "purity is defined as the fraction of good stt tracks which match well to a track found by the offline reconstruction program .",
    "the silicon track trigger described in this paper consists of custom hardware used to identify @xmath0 collisions which result in production of @xmath1flavored particles in near real  time .",
    "it resides in the second level of the d  trigger system and uses inputs from the first level track trigger and the silicon microstrip detector to provide precision reconstruction of charged particle trajectories in the @xmath12 plane .",
    "this system can significantly enhance the d  physics capability in such diverse areas as @xmath1flavored jet energy calibration , the top mass precision and sensitivity to searches for the higgs boson .",
    "the stt fits tracks using a combination of smt and cft information and is particularly geared toward measuring impact parameters .",
    "the intrinsic precision is roughly 20  @xmath3 m for high-@xmath23 tracks , with an additional contribution of roughly 35  @xmath3 m from the beam spot .",
    "the single  hit resolution and multiple scattering effects are of similar size for tracks of @xmath106  gev .",
    "the stt computations introduce negligible dead time to the d  data taking .",
    "the stt has been in routine operation since mid 2004 .",
    "the authors would like to thank their d  collaborators for useful discussions and help with the stt project .",
    "we thank florida state university faculty reginald perry and his students shweta lolage and vindi lalam for their early contributions to stc design and firmware development .",
    "we acknowledge major funding of the project by the national science foundation major research instrumentation program under grant phy-997659 and by the u.s .",
    "department of energy under grant de - fg02 - 91er40676 .",
    "we also thank boston university , columbia university , florida state university , in2p3 ( france ) , suny stony brook , fom - institute nikhef / university of nijmegen ( the netherlands ) for additional funding .",
    "we gratefully acknowledge in kind contributions from the altera and xilinx corporations .",
    "one of us ( u.h . ) would like to acknowledge support by the alfred p. sloan foundation and by research corporation .",
    "the dsps are products of texas instruments incorporated .",
    "see documents _ tms320c6203b : tms320c6203b fixed - point digital signal processor ( rev .",
    "m ) _ and accompanying errata .",
    "these and other documents are available at1 truemm"
  ],
  "abstract_text": [
    "<S> many physics topics to be studied by the d  experiment during run ii of the fermilab tevatron @xmath0 collider give rise to final states containing @xmath1flavored particles . </S>",
    "<S> examples include higgs searches , top quark production and decay studies , and full reconstruction of @xmath2 decays . </S>",
    "<S> the sensitivity to such modes has been significantly enhanced by the installation of a silicon based vertex detector as part of the d  detector upgrade for run ii . </S>",
    "<S> interesting events must be identified initially in 100 - 200 @xmath3s to be available for later study . </S>",
    "<S> this paper describes custom electronics used in the d  trigger system to provide the real  time identification of events having tracks consistent with the decay of @xmath1flavored particles .    </S>",
    "<S> fermilab , dzero , d0 , detector , trigger , vertex    29.30.aj , 29.40.gx , 07.05.hd    run ii of the fermilab tevatron @xmath0 collider , which began in 2001 , will result in a data set 30 to 50 times larger than that from the previous run ( 19921996 ) , and the data are begin taken at a center  of  mass energy @xmath4 tev , roughly 10% higher than previously . </S>",
    "<S> together these improvements will result in an unprecedented opportunity to study a variety of interactions . among </S>",
    "<S> these are a number that result in @xmath1flavored particles in the final state including : reconstruction of @xmath2 decays for study of flavor physics , @xmath5 mixing and the resulting ckm constraints , searches for higgs bosons and study of the top quark . </S>",
    "<S> these processes occur at a significant rate , with hundreds ( a standard model higgs ) to @xmath6 ( b mesons ) of signal interactions produced during run ii . </S>",
    "<S> production of similar , non @xmath1flavored background events , however , occurs at a rate orders of magnitude higher than the signals . at a hadron collider </S>",
    "<S> this poses a particular challenge because the data from most collisions are permanently discarded immediately following a fast and therefore rudimentary calculation of the event properties . </S>",
    "<S> the raw interaction rate is 1.7 mhz , but only 50100 events per second can be saved for detailed study , motivating the need for high  speed identification of interesting collisions . </S>",
    "<S> the hardware and software used for this identification are collectively called the trigger system .    </S>",
    "<S> this paper describes a custom hardware trigger component , the silicon track trigger ( stt ) , designed to identify collisions giving rise to @xmath1flavored particles . </S>",
    "<S> the first section of this paper provides an overview of the d  detector and trigger system . </S>",
    "<S> the second section is a functional overview of the stt . </S>",
    "<S> the third section contains a general description of the stt hardware , and the fourth section of the paper is a detailed explanation of each major hardware element of the stt . </S>",
    "<S> the fifth section describes the stt simulator . </S>",
    "<S> the final section discusses stt performance . </S>"
  ]
}