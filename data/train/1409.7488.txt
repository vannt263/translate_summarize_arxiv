{
  "article_text": [
    "one of the major interests of finite model theory is to separate the expressive power of different logics or fragments of logics .",
    "quantifiers are an important logical resource for measuring the logical complexity of problems .",
    "the study of fragments of first - order logic ( @xmath0 ) based on quantifier structures , especially quantifier prefixes , has a long history in model theory @xcite .",
    "however , so far there are few results about the expressive power of such fragments .",
    "walkoe @xcite proved that there exists a sentence with prefix @xmath1 which is different from any sentence with prefix @xmath2 if @xmath1 and @xmath2 are different but with the same length . in the proof ,",
    "the structures are assumed to be infinite .",
    "afterwards keisler and walkoe @xcite improved this result by showing its validity over finite structures .",
    "chandra and harel @xcite proved that @xmath3 over finite digraphs .",
    "sipser @xcite proved a similar result in the context of unbounded fan - in bounded depth circuits .    in 1996 ,",
    "grdel and mccolm @xcite established a strict hierarchy based on quantifier classes in the infinitary logic over finite structures and resolved a conjecture of immerman , i.e.  @xmath4 for each @xmath5 . at the same time , they proposed a conjecture on the expressive power of the fragments of @xmath0 based on prefixes , which generalized the previous results @xcite , @xcite and @xcite . in 1998 , rosen @xcite confirmed this conjecture and called the strict hierarchy based on these fragments of @xmath0 the first - order prefix hierarchy .",
    "actually , rosen proved a stronger result , which states that , over a single binary relation , for any prefix @xmath1 there is a first - order sentence @xmath6 in prenex normal form with prefix @xmath1 , such that for any sentences @xmath7 in infinitary logic , @xmath6 is not equivalent to @xmath7 if @xmath1 is not embeddable in the `` quantifier structure '' of @xmath7 . ) .",
    "] however , a stronger version of the conjecture remains open , i.e.  whether it holds over finite structures or not @xcite .",
    "one way to prove the conjecture is to prove a finite version of rosen s main theorem .    in this paper",
    ", we continue this line of study .",
    "we define a variant of ehrenfeucht - frass ' e games that characterizes quantifier classes and prove the following main result :    _ let @xmath8 and @xmath9 be two finite @xmath10-labeled forests . over the class of all finite digraphs , @xmath11 _    the structures we use in the proof are finite trees , which makes it easy to prove a stronger result : the above main result holds even when the structures have a linear order .",
    "here we introduce the ideas that are used to deal with linear order in a simpler context :    _ over the class of all ordered finite digraphs , @xmath12 _",
    "let @xmath13 and @xmath14 denote the set of natural numbers ( non - negative integers ) and positive natural numbers respectively .",
    "we assume that the readers have basic knowledge about finite model theory . in the following",
    "we briefly introduce some necessary background .",
    "the readers can cf .",
    "the textbook @xcite for more of it .",
    "a _ relational signature _ consists of a sequence of relation and constant symbols . in this paper ,",
    "a signature is relational and finite , whenever mentioned .",
    "let @xmath15 be a signature , a @xmath16-_structure _ @xmath17 consists of a universe @xmath18 together with an interpretation of    * each @xmath19-ary relation symbol @xmath20 as a @xmath19-ary relation on @xmath18 , denoted by @xmath21 ; * each constant symbol @xmath22 as an element in @xmath18",
    ".    a structure is called _ finite _ if its universe is a finite set .",
    "a @xmath16-structure @xmath23 is a _ substructure _ of @xmath17 if the following hold :    1 .   @xmath24 ; 2 .   for any @xmath19-ary relation @xmath25 , @xmath26 ; 3 .   for any constant @xmath27 , @xmath28 .",
    "let @xmath29 .",
    "the @xmath30-_reduct _ of @xmath17 , denoted @xmath31 , is obtained from @xmath17 by leaving all the symbols in @xmath32 uninterpreted .",
    "let @xmath17 and @xmath33 be wo structures of the same signature . an _ isomorphism _ between @xmath17 and @xmath33 is a bijection @xmath34 such that the following hold :    1 .",
    "for any @xmath19-ary relation @xmath25 and @xmath35 , @xmath36 2 .   for any constant @xmath27 , @xmath37 .",
    "say that two structures @xmath17 and @xmath33 over the same signature are isomorphic if there is an isomorphism between them , denoted @xmath38 .",
    "let @xmath39 , @xmath40 .",
    "say that @xmath41 defines a _ partial isomorphism _ between @xmath17 and @xmath33",
    "if @xmath42 contains the elements that interpret all the constants of @xmath17 , @xmath43 contains the elements that interpret all the constants of @xmath33 , and the substructure of @xmath17 that is generated by @xmath42 is isomorphic to the substructure of @xmath33 that is generated by @xmath43 .",
    "more precisely , the following hold :    1 .   for any @xmath44-ary relation symbol @xmath25 and any sequence @xmath45 of numbers from [ k ] , @xmath46 2 .   for any constant @xmath27 and any @xmath47 $ ] , @xmath48",
    "we assume that the readers have basic knowledge about first - order logic , especially what is the meaning of `` a formula is true in a structure '' . without loss of generality",
    ", we assume that all the formulas and sentences are in _ negation normal form _",
    ", i.e. all negations can only occur immediately before atoms .",
    "let @xmath17 be a @xmath16-structure and @xmath7 be a first - order sentence .",
    "we use @xmath49 to denote that @xmath7 is true in @xmath17 , and we call @xmath17 a _ model _ for @xmath7",
    ". let @xmath50 be the set of models of @xmath7 .",
    "property _ @xmath51 over @xmath16 is a set of @xmath16-structures closed under isomorphism .",
    "say that @xmath51 is _ expressible _ , or _ definable _ , in @xmath0 if there is a sentence @xmath52 in @xmath0 such that for every @xmath17 , @xmath53 iff @xmath54 .",
    "a _ linear order _ is a binary relation that is transitive , antisymmetric and total .",
    "let @xmath55 be a signature . and",
    "let @xmath56 where @xmath57 is interpreted in a @xmath58-structure as a linear order of its universe .",
    "let @xmath59 . given a graph @xmath60 , a _ directed path _",
    "@xmath61 in @xmath62 is a sequence of vertices @xmath63 such that there is an arc from @xmath64 to @xmath65 for any @xmath66 .",
    "the length of @xmath61 is @xmath67 .",
    "a directed path is _ nontrivial _ if the length of the path is nonzero .",
    "trees are defined in the usual way in computer science .",
    "if there is an arrow from a node @xmath68 to a node @xmath69 , then we call @xmath68 a _ father _ of @xmath69 and @xmath69 a _ child _ of @xmath68 . in a tree",
    ", each node has zero or more children and each node has at most one father . a node which has no father",
    "is called a _ root _ and a node which has no child",
    "is called a _",
    "leaf_. an _ inner node _ is any node that has child nodes .",
    "a _ tree _ is a connected acyclic digraph that has a root and some leaves .",
    "a _ degenerate tree _ is a directed path .",
    "the _ height of a tree _ is the length of a longest directed path in the tree .",
    "forest _ is composed of disjoint trees .",
    "let @xmath70 be a forest .",
    "define its height , denoted @xmath71 , as the maximum height of its trees . and define its rank , denoted @xmath72 , as @xmath73 when @xmath70 is not empty and 0 otherwise .",
    "let @xmath74 .",
    "a forest is a _",
    "@xmath10-labeled forest _ if all its nodes are labeled with `` @xmath75 '' or `` @xmath76 '' .",
    "we call those nodes labeled with `` @xmath75 '' @xmath77 nodes and the other nodes @xmath78 nodes .    a _ @xmath10-labeled perfect binary tree _",
    "is a @xmath10-labeled tree where each node , except the leaves , has exactly one @xmath77 child and one @xmath78 child , and all the leaves are at the same depth .",
    "@xmath79-perfect binary tree _",
    ", denoted @xmath80 , is a @xmath10-labeled perfect binary tree , whose root is labeled with @xmath75 and height is @xmath81 . likewise , a _ @xmath82-perfect binary tree _",
    ", denoted @xmath83 , is a @xmath10-labeled perfect binary tree , whose root is labeled with @xmath76 and height is @xmath81 .",
    "the following terminology and conventions come from grdel - mccolm @xcite and rosen @xcite .",
    "a _ prefix _",
    "@xmath1 is a finite string in @xmath84 .",
    "the dual of @xmath1 , denoted by @xmath85 , is the prefix obtained from @xmath1 by swapping @xmath75 with @xmath76 .",
    "let @xmath86 .",
    "then @xmath87 .",
    "a prefix @xmath1 is a _ subsequence _ of a prefix @xmath2 if @xmath1 can be obtained from @xmath2 by possibly deleting some elements of @xmath2 , without changing the order of the remaining elements of @xmath2 .",
    "a partial order on @xmath84 , called prefix embedding , can be defined as follows : @xmath88 iff @xmath1 is a subsequence of @xmath2 . here",
    "we use the curly symbol to distinguish it from the usual symbol of linear orders .",
    "nevertheless , whether a symbol stands for a linear order or ( prefix ) embedding should be easily decided from the context .",
    "we use the same notation `` @xmath89 '' to denote the embedding relation between two sets of prefixes . for @xmath90 , @xmath91 , @xmath92 s.t .",
    "@xmath93 @xmath94 if @xmath95 but @xmath96 .",
    "we use `` @xmath97 '' to denote the concatenation of words . for any @xmath98 and @xmath86 , @xmath99 .",
    "we define @xmath100 as the downward closure of @xmath101 .",
    "let @xmath102 where @xmath103 and @xmath104 are characters .",
    "we interpret a word in @xmath105 as a regular expression .",
    "@xmath106 maps such a regular expression to the regular language it denotes , where @xmath107 is the power set of @xmath84 .",
    "we define @xmath108 so that for any @xmath109 , @xmath110 there is @xmath111 and @xmath112 , the downward closure of @xmath113 .    for a prefix @xmath1 , @xmath114 is the length of @xmath1 .",
    "@xmath115 $ ] is the @xmath5-th letter of @xmath1 .",
    "let @xmath116 be the last letter of @xmath1 .",
    "for @xmath117 , let @xmath118 be the prefix obtained from @xmath1 by removing the first @xmath5 letters in @xmath1 , i.e.  @xmath119*\\cdots p[i]*p^{-i}$ ] .",
    "finally , let @xmath120 be the empty string .",
    "[ conca - duals ] let @xmath121 be prefixes .",
    "the following hold :    1 .   @xmath122 .",
    "2 .   @xmath123 .    1 .   by definition .",
    "2 .   let @xmath124 , @xmath125 .",
    "+ by definition , @xmath126*\\cdots*p[n]}*\\overline{q[1]*\\cdots*q[m]}=(\\overline{p[1]}*\\cdots*\\overline{p[n]})*(\\overline{q[1]}*\\cdots*\\overline{q[m]})$ ] .",
    "because the concatenation operation on words satisfies the associative law , it follows that @xmath127}*\\cdots*\\overline{p[n]})*(\\overline{q[1]}*\\cdots*\\overline{q[m]})=\\overline{p[1]}*\\cdots*\\overline{p[n]}*\\overline{q[1]}*\\cdots*\\overline{q[m]}$ ] .",
    "hence , by definition , @xmath123 .",
    "( rosen , @xcite ) .",
    "[ function - f ] let @xmath128 and @xmath129 denote the string consisting of @xmath5 repetitions of @xmath130 .",
    "define @xmath131 as follows :    1 .",
    "if @xmath132 , then @xmath133 where @xmath134 for @xmath5 odd , and @xmath135 for @xmath5 even ; 2 .   if @xmath136 , then @xmath133 where @xmath137 for @xmath5 odd , and @xmath138 for @xmath5 even ; 3 .   if @xmath139 ( @xmath140 ) , then @xmath141 .",
    "[ prefix ] let @xmath1 be a prefix .",
    "then @xmath142    assume that @xmath139 ( @xmath140 ) . by the definition of the dual of a prefix , @xmath143 .",
    "note that @xmath144 since @xmath145 . by definition ,",
    "note that by definition @xmath147 .",
    "hence , @xmath148 . by lemma [ conca - duals ]",
    "_ ( ii ) _ , it means that @xmath149 . therefore ,",
    "@xmath150 .",
    "[ roson ] ( rosen , @xcite ) . for every prefix @xmath151",
    ", @xmath152 is the unique word in @xmath105 such that @xmath153 .",
    "[ downward - closure - p ] for any @xmath154 , @xmath155 if @xmath156 .    if @xmath157 , then there exists @xmath158 such that @xmath88 . in other words , either @xmath159 or @xmath160 such that @xmath88 .",
    "that is , @xmath161 or @xmath162 .",
    "hence , @xmath163 .    if @xmath163 , then either @xmath164 or @xmath165 .",
    "that is , there exists @xmath159 , or @xmath160 , such that @xmath88 .",
    "in other words , there exists @xmath166 such that @xmath88 .",
    "therefore , @xmath157 .",
    "let @xmath52 be a @xmath0 formula . recall that we assume that any formula is in negation normal form .",
    "let @xmath167 be the disjoint union and @xmath168 be the disjoint union of @xmath169 .    if @xmath170 is a set of formulas , then @xmath171 ( @xmath172 resp . )",
    "is the conjunction ( disjunction resp . ) of all the formulas in @xmath170 .",
    "similarly , we use @xmath173 ( @xmath174 resp . ) to represent the conjunction ( disjunction resp . ) of all @xmath175 .",
    "[ quantifier - structure-1 ] the _ quantifier structure _ of @xmath52 , denoted @xmath176 , is a @xmath10-labeled forest , which is defined inductively as follows :    * if @xmath52 is a literal , then @xmath176 is empty ; * if @xmath177 or @xmath178 , then @xmath176 is @xmath179 ; * if @xmath180 then @xmath176 is composed of an @xmath77 node and @xmath181 where there is an arc from this @xmath77 node to each root of @xmath181 ( note that @xmath181 is a forest ) ; + similarly , if @xmath182 then @xmath176 is composed of an @xmath78 node and @xmath181 where there is an arc from this @xmath78 node to each root of @xmath181 ; + in these two cases , if @xmath181 is empty , then @xmath176 contains a single node .",
    "note that this definition is different from grdel and mccolm s @xcite , in which @xmath176 is defined as a set of strings :    * if @xmath7 is a literal , then @xmath183 where @xmath120 is the empty word ; * if @xmath184 or @xmath185 where @xmath170 is a set of formulas , then @xmath186 * @xmath187 , then @xmath188 ; likewise , if @xmath189 , then @xmath190 .",
    "[ forests - embedding-1 ] let @xmath8 , @xmath9 be two @xmath10-labeled forests .",
    "define @xmath191 if there is a mapping @xmath192 , _ not necessarily injective _",
    ", from the nodes of @xmath8 to the nodes of @xmath9 such that @xmath193 and @xmath194 have the same label for any @xmath193 , and there is a nontrivial directed path from @xmath195 to @xmath196 in @xmath9 if there is an arc from node @xmath197 to node @xmath198 in @xmath8 .",
    "note that the relation @xmath199 is not necessary antisymmetric .",
    "that is , there are non - isomorphic @xmath10-labeled forests @xmath200 such that @xmath191 and @xmath201 .",
    "[ read - off ] suppose that we are given a @xmath10-labeled forest @xmath70 . for any path @xmath202 in the forest , there is a word @xmath203 in @xmath84 associated with it such that the node @xmath64 is labeled with @xmath204 .",
    "we say that this word , as well as all its subsequences , can be _ read off _ this @xmath10-labeled forest .",
    "let @xmath205 be the set of words that can be read off the forest @xmath206 .",
    "[ f(p ) ] suppose that we are given a set @xmath86 .",
    "let @xmath207 , where @xmath208 and @xmath209 .",
    "these sets can be empty .",
    "we can inductively define a @xmath10-labeled forest @xmath210 as follows :    1 .   if @xmath101 is empty , then @xmath210 is empty , i.e.  this forest contains no node .",
    "2 .   let @xmath8 be a @xmath10-labeled forest such that its root is an @xmath77 node and there is an arc from this root to each root of @xmath211 .",
    "likewise , let @xmath9 be a @xmath10-labeled forest such that its root is an @xmath78 node and there is an arc from this root to each root of @xmath212 .",
    "@xmath210 is the disjoint union of @xmath8 and @xmath9 .",
    "note that @xmath213 is composed of at most two trees , the roots of which have different labels .",
    "[ forest2word ] @xmath214 , for all @xmath86 .",
    "the base case when @xmath210 is empty , i.e.  when @xmath215 , is trivial .",
    "assume that it holds when @xmath216 for some @xmath217 .",
    "assume that @xmath218 where @xmath219 clearly , @xmath220    according to definition [ f(p ) ] , @xmath210 is the disjoint union of @xmath221 and @xmath222 . in other words",
    ", @xmath223 equals @xmath224 , hence equals @xmath225 and by assumption equals @xmath226 by lemma [ downward - closure - p ] , @xmath227 .",
    "therefore , @xmath214 .",
    "this lemma implies that , for any @xmath228 , @xmath1 can be read off from some path of @xmath210 .",
    "[ words2forest ] for any @xmath10-labeled forest @xmath70 and @xmath86 , @xmath229 if @xmath230 .",
    "the base case when @xmath70 is empty is trivial .",
    "assume that it holds when @xmath231 where @xmath217 .",
    "let @xmath70 be a @xmath10-labeled forest such that @xmath232 and @xmath230 .",
    "@xmath70 is a disjoint union of at most two forests @xmath233 and @xmath234 : the roots of @xmath233 are all @xmath77 nodes and the roots of @xmath234 are all @xmath78 nodes . then @xmath235 .",
    "note that a substructure of a forest is also a forest . because @xmath230 and lemma [ forest2word ] , @xmath236 .",
    "it means that there is a forest ( substructure ) @xmath237 of @xmath213 such that all its roots are @xmath77 nodes and that @xmath238 .",
    "likewise , there is a forest ( substructure ) @xmath239 of @xmath213 such that all its roots are @xmath78 nodes and that @xmath240 .",
    "note that @xmath237 and @xmath239 are not necessary disjoint .",
    "now , if we remove all the @xmath77 roots from @xmath233 , we get a forest called @xmath8 . similarly ,",
    "if we remove all the @xmath78 roots from @xmath234 , we get another forest called @xmath9 .    likewise ,",
    "if we remove all the @xmath77 roots from @xmath237 , we get a forest called @xmath241 . similarly ,",
    "if we remove all the @xmath78 roots from @xmath239 , we get another forest called @xmath242 .",
    "observe that @xmath243 and @xmath244 . by assumption , @xmath245 .",
    "let us denote the map that embeds @xmath8 to @xmath241 as @xmath246 .",
    "likewise , @xmath247 and the embedding map is denoted @xmath248 .",
    "note that the domains of @xmath246 and @xmath248 are different .",
    "therefore , we can merge these two maps easily , i.e.  let @xmath249 . note that @xmath8 ( @xmath9 resp",
    ") is embeddable to @xmath241 ( @xmath242 resp . ) through @xmath250 .",
    "now , we can extend the embedding map @xmath250 to @xmath192 such that : ( i ) the father of any root @xmath251 of @xmath8 is mapped to the father of @xmath252 ; ( ii ) the father of any root @xmath253 of @xmath9 is mapped to the father of @xmath254 . therefore , @xmath70 is embeddable to @xmath213 through @xmath192 , i.e.  @xmath255 .",
    "lemma [ forest2word ] and lemma [ words2forest ] tell us that @xmath213 is the `` maximal '' @xmath10-labeled forest ( in the sense of embeddings ) among all these forests , from which the set of words that can be read off is a subset of @xmath256 .",
    "define the _ quantifier rank _ of @xmath0 formula @xmath52 , denoted @xmath257 , to be @xmath258 .",
    "note that this definition is equivalent to the usual definition of quantifier rank ( see for instance libkin @xcite ) .",
    "let @xmath259:=\\{\\varphi\\in{\\mathrm{fo}\\xspace}\\mid qr(\\varphi)\\leq k\\}$ ] .",
    "let @xmath70 be a @xmath10-labeled forest .",
    "define the quantifier class @xmath260 to be the set of queries that are definable by the set of first - order sentences @xmath261 .",
    "a first - order formula is in prenex normal form if it is a single string of quantifiers followed by a quantifier free formula .",
    "its quantifier prefix , which is obtained from this string of quantifiers by removing the variables in the string , corresponds to a @xmath10-labeled degenerate tree .    given a prefix @xmath1",
    ", we define the prefix class @xmath262 as the set of @xmath0 sentences in prenex normal form such that for any @xmath263 , its prefix is a subsequence of @xmath1 ( grdel and mccolm , @xcite ) .",
    "grdel - mccolm s conjecture says that the prefix classes form a strict hierarchy : for any prefix @xmath121 , @xmath264 if @xmath265 over arbitrary structures .",
    "rosen @xcite confirmed this conjecture over infinite structures and called it the first - order prefix hierarchy .",
    "[ grdel - mccolm - conjecture ] similarly , we can define a hierarchy formed by quantifier classes , which can be called the first - order quantifier structure hierarchy .",
    "these two hierarchies are independent .",
    "in this section , we define a variant of ehrenfeucht - frass ' e games that characterizes quantifier classes and prove that those quantifier classes form a natural and strict hierarchy :    [ main1 ] let @xmath8 and @xmath9 be two @xmath10-labelled forests . over the class of all digraphs , @xmath266",
    "let @xmath70 be a @xmath10-labelled forest .",
    "we define an asymmetric variant of the ehrenfeucht - frass ' e games as follows .",
    "let @xmath267 , @xmath16 contains @xmath19 constant symbols .",
    "let @xmath17 and @xmath33 be two @xmath16-structures .",
    "let the @xmath19-tuple @xmath268 be the interpretation of the constants in @xmath17 and the @xmath19-tuple @xmath269 be the interpretation of the constants in @xmath33 .",
    "the game @xmath270 is played by two players , called the spoiler and duplicator , on a game board consisting of @xmath70 , @xmath17 and @xmath33 . at the beginning of the game",
    ", the spoiler picks a tree @xmath271 in the forest @xmath70 and puts a token on the root of @xmath271 .",
    "assume that the depth of @xmath271 is @xmath272 .",
    "afterwards , for every @xmath5 where @xmath273 , in the @xmath5-th round the spoiler chooses an element from the structure @xmath17 if the current node , on which the token is put , is an @xmath77 node . otherwise if it is an @xmath78 node he picks an element of @xmath33 .",
    "then the duplicator has to respond by picking an element from the other structure .",
    "afterwards the spoiler chooses a child of the current node in @xmath70 and moves the token to it .",
    "this completes one round .",
    "assume that after @xmath274 ( @xmath275 ) rounds a sequence @xmath276 has been picked in @xmath17 and a sequence @xmath277 has been picked in @xmath33 .",
    "the spoiler wins the game if @xmath278 does not define a partial isomorphism between @xmath17 and @xmath33 .",
    "the game ends whenever the spoiler wins or the token arrives at a leaf of @xmath271 .",
    "the duplicator wins if the spoiler fails to win in the end .",
    "informally , @xmath268 and @xmath269 can be regarded as a carry - over of past history of the game played before the beginning , which has to be taken care of .",
    "a strategy of the duplicator is a scheme by which she knows how to choose an element in each round depending on the history of the play .    for any tuple @xmath279",
    ", we associate it with a prefix @xmath280,\\cdots , p[n])$ ] such that @xmath281 iff @xmath115=\\exists$ ] for any @xmath273 . a _ strategy of the duplicator _ in the game @xmath270 is a function + @xmath282 .",
    "+ if the duplicator has a strategy guiding her choices in the game that ensures her winning in the end no matter how the spoiler plays , we call this strategy a winning strategy of the duplicator .",
    "if there exists such a winning strategy for the duplicator in the game @xmath270 then we write @xmath283 .",
    "the winning strategy of the spoiler can be defined dually because in our games either the spoiler or the duplicator has a winning strategy .",
    "let @xmath284 and @xmath285 .",
    "we use @xmath286 to denote that the duplicator has a winning strategy , in which @xmath42 is picked in @xmath17 , and @xmath43 is picked in @xmath33 , before the game starts .",
    "equivalently , we say that the spoiler has a winning strategy in the game @xmath287 .",
    "note that the standard ehrenfeucht - frass ' e game @xmath288 ( see @xcite ) is exactly the game @xmath270 where @xmath289 .",
    "let @xmath290 and @xmath291 be an @xmath67-tuple of elements from @xmath18 . then for a @xmath10-labelled forest @xmath70 , the @xmath292-@xmath70 @xmath67-type of @xmath291 over @xmath16-structure @xmath17 is defined as : @xmath293    the following lemma is well - known , cf .",
    "@xcite for a simple explanation .",
    "[ finite - logic - equiv - fixed - rank ] for fixed @xmath294 , there are only finitely many formulas , in @xmath67 free variables , in @xmath259 $ ] up to logical equivalence .",
    "[ finite - formu - in - type]let @xmath295 and @xmath70 be a @xmath10-labelled forest , and let @xmath291 be an @xmath67-tuple of elements from @xmath18 , there are only finitely many formulas in @xmath296 up to logical equivalence .",
    "let @xmath70 be a @xmath10-labelled forest .",
    "let @xmath297 $ ] be an expansion of @xmath17 to @xmath298 such that @xmath42 interprets the tuple of constants @xmath299 in @xmath297 $ ] .",
    "[ m2m- ] let @xmath70 and @xmath300 be two @xmath10-labelled forests such that @xmath301 .",
    "let @xmath17 and @xmath33 be two structures over the same signature .",
    "if the duplicator has a winning strategy in the game @xmath302 , then she also has a winning strategy in the game @xmath303 .",
    "note that the duplicator can mimic her winning strategy in the game @xmath303 to play the game @xmath303 . and",
    "a subset of a partial isomorphism is still a partial isomorphism .",
    "lemma [ m2m- ] tells us that if the duplicator has a winning strategy in @xmath302 , she also has a winning strategy when the players are allowed to skip playing arbitrary rounds of the game .",
    "lemma [ m2m- ] also tells us that if the spoiler has a winning strategy in @xmath303 , he also has a winning strategy in @xmath302 . in other words , quantifiers are logical resources that can be exploited by the spoiler to detect the difference between two structures in the games .",
    "it is obvious that @xmath297\\leadsto_{s } [ \\mathfrak{b},\\bar b]$ ] iff @xmath286 , because in each round of both the game @xmath304,[\\mathfrak{b},\\bar b])$ ] and @xmath287 , if there is a partial isomorphism between two structures in the former , then this partial isomorphism is also a partial isomorphism between two structures in the latter .    in the following ,",
    "we prove a connection between the games just defined and quantifier classes , which is a variant of the result of grdel and mccolm @xcite .",
    "recall that @xmath17 has constants that are interpreted by @xmath268 .",
    "and @xmath33 has constants that are interpreted by @xmath269 .",
    "we assume that @xmath268 ( @xmath269 resp . ) and @xmath42 ( @xmath43 resp . ) do not share any element .",
    "[ qs - game ] for arbitrary finite @xmath16-structures @xmath17 , @xmath33 , two tuples @xmath284 , latexmath:[$\\bar b\\in    @xmath70 , the following are equivalent :    1 .",
    "@xmath297\\leadsto_{s } [ \\mathfrak{b},\\bar b]$ ] ; 2 .",
    "@xmath306 .",
    "( i)@xmath307(ii ) :    when @xmath70 is an empty forest , i.e.  @xmath308 , @xmath309 means there is a quantifier - free formula @xmath310 such that @xmath311 but @xmath312 .",
    "hence , the mapping from @xmath313 to @xmath314 does not define a partial isomorphism .",
    "in other words , the spoiler wins the game and @xmath297\\not\\leadsto_s [ \\mathfrak{b},\\bar b]$ ] .",
    "assume that ( i)@xmath307(ii ) when @xmath231 for @xmath217 .",
    "assume that @xmath232 and @xmath70 consists of @xmath44 trees @xmath315 .",
    "suppose that @xmath316 is false .",
    "let @xmath317 such that @xmath318 but @xmath319 .",
    "then @xmath52 is a first - order formula that is a disjunction or conjunction of formulas @xmath320 ( @xmath321 ) .",
    "there must exist one disjunct or conjunct @xmath7 such that @xmath322 while @xmath323 , where @xmath324 for some @xmath321 . by lemma [ m2m- ]",
    ", we may assume that the spoiler moves the token from the root of @xmath169 .",
    "assume that the root of @xmath169 is an @xmath77 node , then @xmath7 has the form @xmath325 .",
    "hence , there is @xmath326 s.t .",
    "then the spoiler can pick @xmath328 , and no matter which element , say @xmath329 , the duplicator picks , @xmath330 distinguishes the pair @xmath331 $ ] and @xmath332 $ ] , where the variables @xmath333 are assigned the values @xmath334 and @xmath335 respectively , because @xmath336 . by induction assumption",
    "the spoiler has a winning strategy over the game @xmath337,[\\mathfrak{b},\\bar bd])$ ] .",
    "similarly , if @xmath169 is a tree whose root is an @xmath78 node , the spoiler can pick @xmath338 such that for any @xmath326 picked by the duplicator @xmath330 distinguishes the pair @xmath331 $ ] and @xmath332 $ ] where the variables @xmath333 are assigned the values @xmath334 and @xmath335 respectively . in other words , the spoiler can show that there is an element @xmath329 such that it makes @xmath339 while @xmath327 is always true . by induction assumption",
    "the spoiler has a winning strategy over the game @xmath337,[\\mathfrak{b},\\bar bd])$ ] .",
    "therefore , @xmath297\\not\\leadsto_s[\\mathfrak{b},\\bar b]$ ] .",
    "+ ( ii)@xmath307(i ) :    according to the definition of the game , when @xmath308 , @xmath297\\not\\leadsto_s [ \\mathfrak{b},\\bar b]$ ] means that the mapping from @xmath313 to @xmath314 is not a partial isomorphism , which implies that there exists a quantifier - free @xmath0 formula @xmath340 s.t .",
    "either ( @xmath341 but @xmath342 ) , or ( @xmath343 but @xmath344 ) .",
    "let @xmath345 be the negation of @xmath340 .",
    "in the former case , it implies that @xmath309 ; in the latter case , @xmath346 but @xmath347 , which also implies that @xmath309 .",
    "all in all , @xmath297\\not\\leadsto_{s}[\\mathfrak{b},\\bar b]$ ] implies @xmath309 when @xmath308 .",
    "assume that ( ii)@xmath307(i ) when @xmath348 for @xmath217 .",
    "now assume that @xmath70 is composed of trees @xmath315 and @xmath232 .",
    "assume that @xmath349 is false . then over one of the trees the spoiler has a winning strategy .",
    "hence , the spoiler can first pick this tree to play .",
    "if this tree s root is an @xmath77 node @xmath350 , we can regard this tree as a digraph composed of @xmath350 and a forest @xmath300 such that there is an arc from @xmath350 to each root of @xmath300 .",
    "in the first round the spoiler can pick an element @xmath326 such that no matter which element @xmath338 the duplicator picks , @xmath331 $ ] and @xmath332 $ ] form the new game board over which the spoiler will win the game @xmath351,[\\mathfrak{b},\\bar bd])$ ] . by corollary",
    "[ finite - formu - in - type ] , there are only finitely many formulas in @xmath352 up to logical equivalence .",
    "let @xmath353 be a set of formulas where each equivalent class in @xmath352 has exactly one formula in @xmath353 .",
    "let @xmath354 be the conjunction of all the formulas in @xmath353 . by the induction hypothesis , for any @xmath329",
    "there is a formula @xmath355 such that @xmath356 but @xmath357 .",
    "note that @xmath358 is equivalent to one formula in @xmath353 .",
    "hence , @xmath359 but @xmath360 , for any @xmath329 . in other words ,",
    "@xmath361 but @xmath362 .",
    "note that @xmath363 .",
    "therefore , @xmath309 .",
    "the case when the tree picked by the spoiler in the first step is a tree whose root is an @xmath78 node can be proved similarly .",
    "[ q - type - game-2 ]",
    "let @xmath364 be a class of finite structures and @xmath70 be a @xmath10-labelled forest . if there is @xmath365 and @xmath366 such that @xmath367 , then there is no first - order sentence @xmath52 such that @xmath368 and @xmath369 .",
    "[ point - expansion ] let @xmath17 be a structure over signature @xmath370 and @xmath364 be a set @xmath371 of finite structures indexed by a set @xmath372 .",
    "let @xmath373 be the signature of @xmath374 for each @xmath375 such that @xmath376 contains a special constant @xmath377 that is called hook .",
    "assume that no two signatures share a constant .",
    "let @xmath378 be a total function .",
    "define the point - expansion of @xmath17 by @xmath379 over @xmath364 , denoted @xmath380 , as follows :    1 .",
    "the signature of @xmath381 , denoted @xmath382 , is composed of the union of @xmath373 and @xmath370 , except for the hook in @xmath376 for any @xmath5 .",
    "2 .   let @xmath383 and @xmath384 .",
    "3 .   let @xmath385 be the set of elements that interpret the hooks in respective disjoint substructures .",
    "4 .   there is a bijection @xmath386 such that for any @xmath19-tuple @xmath387 and any @xmath19-ary relation @xmath388 , + @xmath389 + in other words , @xmath385 induces in @xmath380 an isomorphic copy of @xmath17 .",
    "let @xmath390 5 .",
    "let @xmath391 be the set of structures in @xmath392 whose signatures contain @xmath393 .",
    "@xmath394 6 .   for any constant @xmath395 ,",
    "@xmath396    informally speaking , @xmath380 is a structure that is obtained from @xmath17 by substituting each element @xmath397 with @xmath398 , identifying @xmath68 with the hook in @xmath398 .",
    "a point - expansion of the structure @xmath17 can also be regarded as the result of a process that `` glues '' a small substructure @xmath398 at each element @xmath68 ( also at the hook of @xmath398 ) of the `` prototype '' structure @xmath17 . and",
    "each small substructure shares only one element with the prototype structure , i.e.  the `` point '' where they are `` glued '' together .",
    "[ composition_of_strategies ] suppose that we are given a forest @xmath399 , two structures @xmath17 , @xmath33 , a finite set @xmath364 of structures and two mappings @xmath379 and @xmath400 that expand @xmath17 and @xmath33 over @xmath364 respectively .",
    "then the duplicator has a winning strategy in the game @xmath401 if the following is true : the duplicator has a winning strategy @xmath402 in the game @xmath403 such that    1 .   for any @xmath404 and sequence of elements @xmath405 ( @xmath406 ) , the duplicator has a winning strategy @xmath407 in the game @xmath408 .",
    "2 .   for any @xmath409 and sequence of elements",
    "@xmath405 ( @xmath406 ) , the duplicator has a winning strategy @xmath410 in the game @xmath411 .",
    "one winning strategy of the duplicator in the game @xmath401 is the composition of her winning strategies in @xmath403 and @xmath412 where @xmath413 .",
    "let @xmath414 be the isomorphic copy of @xmath17 in @xmath380 , whose elements interpret the hooks of disjoint substructures in @xmath364 . and let @xmath415 be the isomorphic copy of @xmath33 in @xmath416 , whose elements interpret the hooks of disjoint substructures in @xmath364 .",
    "assume that the spoiler has already picked a sequence @xmath417 of elements in the game",
    "@xmath418 :    1 .",
    "when the spoiler picks an element in @xmath414 or @xmath415 , the duplicator uses the strategy @xmath402 ; otherwise : 2 .   for any @xmath419 , if the spoiler picks an element in @xmath398 , the duplicator uses the strategy @xmath420 ; 3 .   for any @xmath421 , if the spoiler picks an element in @xmath422 , the duplicator uses the strategy @xmath423 .    clearly",
    ", partial isomorphisms are preserved under such compositions , which provides the duplicator a winning strategy in the game @xmath424 , which can be regarded as a main game together with a series of subgames .",
    "let @xmath425 be a structure over signature @xmath426 where @xmath427 is the hook constant and @xmath425 has only one element , which is used to interpret @xmath427 .",
    "[ structures - over - tau ] let @xmath428 and @xmath151 .",
    "let @xmath429 where @xmath430 are binary relation symbols , @xmath431 is a unary relation symbol , and @xmath350 is a constant symbol . to make it vivid , we say that an element @xmath197 is _ black _ if @xmath432 .",
    "all the elements in the structures are white unless explicitly labeled black . likewise , an arc @xmath433 is red if @xmath434 ; an arc is blue if @xmath435 .",
    "let @xmath436 .",
    "we define @xmath437 and @xmath438 to be @xmath439-structures as follows :    * @xmath437 and @xmath438 are trees , whose edges are either red or blue .",
    "the constant @xmath350 is interpreted by the root of the respective trees .",
    "* when @xmath440 , all edges in @xmath437 and @xmath438 are red .",
    "* if @xmath441 , + \\(1 ) @xmath437 is a depth 1 tree that has @xmath442 leaves .",
    "one of its leaves is black .",
    "+ \\(2 ) @xmath438 is a depth 1 tree that has @xmath443 leaves . _",
    "none _ of them is black .",
    "+ @xmath444 ; @xmath445 . *",
    "if @xmath446 , + \\(1 ) @xmath437 is a depth 1 tree that has @xmath443 leaves .",
    "all of them are black .",
    "+ \\(2 ) @xmath438 is a depth 1 tree that has @xmath442 leaves .",
    "all are black except one .",
    "+ @xmath447 ; @xmath448 .",
    "+ note that @xmath449 and @xmath450 .",
    "* when @xmath451 + let @xmath452 be the same as @xmath453 except that the colours of all the edges are exchanged , i.e.  red is interchanged with blue .",
    "let @xmath454 , a @xmath455-structure , be built from a copy of @xmath456 and a copy of @xmath452 where they are joined together at their roots . call their shared root a _ junction point _ , which interprets the hook constant @xmath457 .",
    "similarly , define @xmath458 to be the join of @xmath456 and @xmath459 , @xmath460 be the join of @xmath461 and @xmath452 ; @xmath462 be the join of @xmath461 and @xmath459 . by `` copies '' we mean disjoint copies .",
    "let @xmath463 . * * if @xmath464 , + ( 1@xmath465 ) @xmath437 is a point - expansion of @xmath466 over @xmath364 as follows : the root of @xmath466 is expanded by @xmath425 .",
    "it is also called the `` _ _ root _ _ '' of @xmath466 that interprets @xmath350 .",
    "one of its leaves is expanded by a copy of @xmath454 .",
    "@xmath44 leaves are expanded by a copy of @xmath458 .",
    "another @xmath44 leaves are expanded by a copy of @xmath460 .",
    "+ ( 2@xmath465 ) @xmath438 is a point - expansion of @xmath467 over @xmath364 as follows : the root of @xmath467 is expanded by @xmath425 .",
    "it is also called the `` _ _ root _ _ '' of @xmath438 that interprets @xmath350 .",
    "@xmath44 leaves are expanded by a copy of @xmath458 .",
    "the other @xmath44 leaves are expanded by a copy of @xmath460 . * * if @xmath468 , + ( 1@xmath469 ) the _ lem _ of @xmath437 is the same as the above _ lem _ ( 2@xmath465 ) of @xmath438 . + ( 2@xmath469 ) the _ lem _ of @xmath438 is the same as the _ lem _",
    "( 1@xmath465 ) of @xmath437 except that @xmath454 is replaced by a copy of @xmath462 .",
    "@xmath437 is the same as @xmath470 except that the `` colours '' of leaves are flipped : black is interchanged with _ not _ black .    the structures @xmath437 and @xmath438 are trees with coloured edges and nodes .",
    "note that only a leaf could be black by this definition because the root of a tree is not black by default .",
    "see figure [ ee - tree ] for example , where @xmath471 and @xmath472 . here , we use a solid line to represent a red edge and a dashed line to represent a blue edge .",
    "we are going to define a formula @xmath473 for each string @xmath151 .",
    "[ property - over - tau ]",
    "let @xmath474 and assume that @xmath475 .    1 .",
    "@xmath476 ; 2 .",
    "@xmath477 ; + @xmath478 ; 3 .",
    "@xmath479 ; + @xmath480 ;    now we define a sentence over the signature @xmath439 : @xmath481    from now on , we assume that @xmath428 is an arbitrary natural number except where defined explicitly in context ( see theorem [ main ] for example ) .",
    "[ dual - hintikka ] @xmath482 iff @xmath483 .    even though @xmath484 is defined as a structure which is obtained from @xmath437 by exchanging all the colours of the edges",
    ", we will prove that @xmath437 can be turned into @xmath484 if we only exchange the colours of the edges that connect to root ( from red to blue and from blue to red ) in @xmath437 , and vice versa :    1 .",
    "the base cases when @xmath440 are trivial ; 2 .",
    "assume that it holds when @xmath485 ; 3 .",
    "assume that @xmath464 where @xmath486 . according to the definition",
    ", the structure obtained from @xmath458 by exchanging the edge colours is @xmath460 .",
    "likewise , the structure obtained from @xmath460 by exchanging the edge colours is @xmath458 .",
    "for the reason of symmetry , the structure obtained from @xmath454 by exchanging the edge colours is the same as @xmath454 .",
    "therefore , the conclusion holds according to the definition of @xmath487 .",
    "4 .   similarly , we can prove it holds when @xmath468 where @xmath486 .",
    "therefore , it holds when @xmath488 .    also note that @xmath473 is the same as @xmath489 except that @xmath473 claims that the edges that connect to root are red and @xmath489 claims that the edges that connect to root are blue",
    "therefore , @xmath482 iff @xmath483 .",
    "[ claim1 ] @xmath490 and @xmath491 .",
    "it is obvious when @xmath441 or @xmath76 .",
    "assume that it holds when @xmath485 .",
    "if @xmath464 , @xmath437 is composed of a node @xmath492 , a copy of @xmath454 , @xmath44 copies of @xmath458 and @xmath44 copies of @xmath460 ; @xmath493 .",
    "let @xmath492 interpret @xmath350 in @xmath437 , and the junction point @xmath494 of @xmath454 witness @xmath495 in @xmath473 .",
    "note that @xmath494 divides @xmath454 into two parts : one is an isomorphic copy of @xmath456 and the other is an isomorphic copy of @xmath452 . for convenience",
    ", we still use @xmath456 and @xmath452 to denote these copies . therefore , when @xmath350 is interpreted as @xmath494 , @xmath496 and @xmath497 ( according to the induction hypothesis and lemma [ dual - hintikka ] ) .",
    "moreover , all the quantifiers in @xmath498 are relativized by relations either @xmath499 or @xmath500 , where @xmath197 is the quantified variable .",
    "and @xmath498 expresses some property that has nothing to do with the elements outside the tree substructure @xmath456 .",
    "more precisely , in definition [ property - over - tau ] , the variable `` @xmath198 '' does not occur free in the formulas @xmath501 and @xmath502 . as a consequence",
    ", @xmath503 implies @xmath504 .",
    "+ by the same argument , @xmath505 implies @xmath506 .",
    "therefore , @xmath507 .",
    "+ let @xmath508 be a child of @xmath509 in @xmath510 . by assumption , @xmath511 ( @xmath512 resp . ) where @xmath508 interprets @xmath350 in @xmath461 ( @xmath459 resp .",
    "as explained before , this means @xmath513 ( @xmath514 resp . ) .",
    "so , @xmath508 can not be a witness of @xmath495 .",
    "therefore , @xmath515 .",
    "similarly , we can prove that it also holds when @xmath468 .",
    "hence , it holds when @xmath488 .",
    "let @xmath70 and @xmath300 be two finite @xmath10-labelled forests .",
    "we collect some simple facts below .",
    "[ p2-p ] @xmath516 iff @xmath517 .",
    "according to the definitions , @xmath484 ( @xmath518 resp . ) is similar to @xmath437 ( @xmath438 resp . ) except that the colours of their edges are exchanged .",
    "therefore , the duplicator can mimic her winning strategy in one game when she plays in the other .",
    "let @xmath519 , a structure over signature @xmath16 , be the join of two disjoint @xmath16-substructures @xmath17 and @xmath33 at its element @xmath68 .",
    "that is ,    1 .",
    "@xmath520 ; 2 .",
    "3 .   for any @xmath522 , @xmath523 .    [ pick - in - isom ] let @xmath70 be a @xmath10-labelled forest .",
    "@xmath524 if there is an automorphism @xmath525 of @xmath17 s.t .",
    "@xmath526 and @xmath527 .",
    "assume that both @xmath33 and @xmath528 are @xmath16-structures .",
    "let @xmath529 where @xmath530 is called a hook .",
    "let @xmath531 ( @xmath532 resp . )",
    "be an expansion of @xmath33 ( @xmath528 resp . ) to @xmath533 .",
    "let @xmath534 and @xmath535 be a point - expansion of @xmath17 over @xmath364 defined by @xmath536 such that the element @xmath68 of @xmath17 is expanded by @xmath531 and all the other elements are expanded by @xmath425 .",
    "similarly , let @xmath537 and @xmath538 be a point - expansion of @xmath17 over @xmath539 defined by @xmath540 such that the element @xmath69 of @xmath17 is expanded by @xmath532 and all the other elements are expanded by @xmath425 . if there is an automorphism @xmath525 of @xmath17 s.t .",
    "@xmath526 , then by lemma [ composition_of_strategies ] the following holds : @xmath541 observe that @xmath535 is exactly @xmath519 and @xmath538 is exactly @xmath542 . hence , the lemma holds .",
    "we use @xmath543 and @xmath544 to denote two isomorphic copies of @xmath437 in @xmath545 and @xmath546 respectively ( see figure [ mini ] .",
    "note that in the picture we use `` @xmath547a@xmath548 '' to denote @xmath549 . ) .",
    "the superscripts `` 1 '' and `` 2 '' are used to distinguish these two copies .",
    "let @xmath550 and @xmath551 .",
    "the following lemma is a special case of lemma [ pick - in - isom ] .",
    "[ constants - in - isom ] assume that @xmath552",
    ". then , @xmath553    clearly , for two @xmath10-labelled forests @xmath8 and @xmath9 , @xmath554 if @xmath191 .",
    "let @xmath555 .",
    "[ ef - game ] let @xmath151 and @xmath556 , then the following holds :    1 .",
    "the duplicator has a winning strategy in @xmath557 ; 2 .   for any @xmath7 such that @xmath558",
    ", we have that @xmath559    by lemma [ words2forest ] , @xmath560 .",
    "hence by theorem [ qs - game ] and lemma [ m2m- ] , ( 2 ) is implied by ( 1 ) and we need only prove ( 1 ) .",
    "note that @xmath473 is obtained from @xmath561 by adding a `` @xmath562 '' before all the occurrences of the unary predicate @xmath431 .",
    "and @xmath473 is equivalent to a sentence in @xmath563 iff @xmath561 is equivalent to a sentence in @xmath563 iff @xmath564 is equivalent to a sentence in @xmath565 ( the second `` iff '' is due to lemma [ prefix ] ) .",
    "that is , the duplicator has a winning strategy in @xmath557 iff she has a winning strategy in @xmath566 .",
    "therefore , we need only consider the case when @xmath567=\\exists$ ] since the lemma holds when @xmath567=\\exists$ ] iff it holds when @xmath567=\\forall$ ]",
    ". soon we shall see that the case when @xmath568=\\forall$ ] is different from the case when @xmath568=\\exists$ ] , provided that @xmath567=\\exists$ ] .",
    "therefore , we discuss them separately .",
    "let @xmath569 .",
    "i.e.  @xmath441 , @xmath571 . in the game ,",
    "the spoiler can only pick at most @xmath44 distinct elements in @xmath438 . and @xmath437 has @xmath443 distinct elements that are not black .",
    "hence , the duplicator is able to mimic the spoiler s picking as follows .",
    "she picks the root of @xmath437 if the spoiler picks the root of @xmath438 ; she picks a leaf that is not black in @xmath437 if the spoiler picks a leaf of @xmath438 .",
    "that is , the duplicator has a winning strategy in this game .",
    "similarly , when @xmath446 , the duplicator also win the game",
    ".    assume that it holds when @xmath572 for some @xmath573 .",
    "that is , the duplicator has a winning strategy in the game @xmath557 for any @xmath574 and any @xmath428 .",
    "assume that @xmath575 where @xmath576",
    ". then @xmath577 .",
    "this case is relatively easy to explain .",
    "the strategy of the duplicator in the game @xmath578 is very simple :    1 .   if the spoiler picks the junction point of @xmath579 that is a leaf of @xmath466 , the duplicator replies with a junction point of one copy of @xmath580 , called @xmath581 , that is a leaf of @xmath467 .",
    "if the spoiler picks a junction point of @xmath580 or @xmath582 that is a leaf of one tree and that is not @xmath581 , the duplicator replies with a junction point of an isomorphic copy that is a leaf of the other tree .",
    "if the spoiler picks an element , say @xmath68 , which has been picked before , the duplicator picks @xmath69 , which was picked in the same round when @xmath68 was picked .",
    "we can regard the words that can be read off @xmath583 as the `` resource '' that the spoiler can use to detect the difference between the structures .",
    "note that the first universal quantifier block in the words that can possibly be read off @xmath583 is useless for the spoiler : no matter how he picks in @xmath438 , the duplicator always picks an isomorphic substructure and mimics the spoiler s picks in the isomorphic substructure . by lemma",
    "[ pick - in - isom ] , if the spoiler can win in the end , he can also win if the players do not pick in these isomorphic substructures .",
    "let @xmath584 . clearly , @xmath585 .",
    "observe that the strategy described before is a winning strategy for the duplicator in the game @xmath578 . by induction hypothesis",
    ", she also has a winning strategy in the game @xmath586 .",
    "hence , by lemma [ constants - in - isom ] and lemma [ p2-p ] , @xmath587 . moreover , the winning strategies of the duplicator in the games @xmath578 and @xmath588 can be combined together : if the spoiler picks a leaf of @xmath467 ( @xmath466 resp . )",
    "that is the junction point of @xmath580 or @xmath582 ( not @xmath581 ) , the duplicator picks a leaf of @xmath466 ( @xmath467 resp . )",
    "that is the junction point of an isomorphic structure ; if the spoiler picks a leaf of @xmath466 that is the junction point of @xmath579 , the duplicator picks a leaf of @xmath467 that is the junction point of @xmath581 .",
    "therefore , she has a combined winning strategy in the game @xmath589 , by lemma [ composition_of_strategies ] . by lemma [ m2m- ]",
    ", she also has a winning strategy in the game @xmath590 .",
    "note that @xmath591 where @xmath592 and @xmath593 .",
    "in other words , if we remove the path initiating from a root in @xmath583 where the word that can be read off the path is @xmath594 , we can turn @xmath583 into @xmath595 . recall that the first universal quantifier block in the words that can be read off @xmath583 is useless for the spoiler .",
    "therefore , the duplicator has a winning strategy in the game @xmath557 .",
    "assume that @xmath596 where @xmath576 ( see figure [ eeq ] )",
    ". then @xmath597 . as we have explained before",
    ", the first universal quantifier block in the words that can possibly be read off @xmath583 is useless for the spoiler .",
    "the strategy of the duplicator in the game @xmath598 is the same as her strategy in the game @xmath578 .",
    "+ for the first existential quantifier that can possibly be read off @xmath583 , there are several choices for the spoiler :    * _ picking the root _ ( or _ picking a junction point _ resp . ) .",
    "+ the game is reduced to a composition of the main game @xmath598 and the subgames in which the duplicator has a winning strategy , that is , in the subgames @xmath599 or subgames between isomorphic structures , according to lemma [ p2-p ] and lemma [ constants - in - isom ] . and by lemma [ composition_of_strategies ] , the duplicator has a winning strategy . * _ picking inside the structure _ , either @xmath600 or @xmath601 or @xmath602 , except their junction points .",
    "when the spoiler picks inside @xmath601 or @xmath602 , the duplicator can mimic it in an isomorphic copy .",
    "hence , only one new case need be taken care of : the spoiler picks the element inside @xmath600 . in this case , the duplicator has a strategy as follows : 1 .",
    "if the spoiler picks the element inside @xmath487 , the duplicator mimics his picking in the isomorphic copy that is a part of @xmath601 .",
    "if the spoiler picks the element inside @xmath603 , the duplicator mimics his picking in the isomorphic copy that is a part of @xmath602 . + according to lemma [ pick - in - isom ] , picking in these isomorphic substructures does nt influence the outcome . in either case ,",
    "the game is reduced to a composition of the main game @xmath598 and the subgame @xmath604 or @xmath605 or a subgame between two isomorphic structures . by the assumption",
    "we know that the duplicator has a winning strategy in @xmath604 .",
    "furthermore , by lemma [ p2-p ] , the duplicator has a winning strategy in @xmath605 . finally , by lemma [ constants - in - isom ] , lemma [ m2m- ] and lemma [ composition_of_strategies ] , the duplicator has a winning strategy in @xmath557 .",
    "when @xmath567=\\exists$ ] , we have proved that @xmath606 .",
    "therefore , this theorem follows when @xmath567=\\exists$ ] . as a consequence it also holds when @xmath567=\\forall$ ] by previous analysis .",
    "[ main ] let @xmath8 and @xmath9 be two finite @xmath10-labelled forests",
    ". over the class of all finite @xmath439-structures , @xmath607    let @xmath608 . according to lemma [ roson ]",
    ", @xmath609 is the set of _ all _ prefixes that @xmath1 is not a subsequence of .",
    "hence , @xmath610 . clearly , @xmath611 . by lemma [ claim1 ] , for any positive natural number @xmath67 , @xmath612 but @xmath613 .",
    "assume for the purpose of a contradiction that there is a formula @xmath7 such that @xmath614 , @xmath615 and @xmath7 defines the same property as @xmath473 .",
    "clearly , @xmath616 . by lemma [ ef - game ] , @xmath617 .",
    "together with lemma [ claim1 ] , and corollary [ q - type - game-2 ] , the property defined by @xmath473 is not definable by any first - order sentence whose quantifier structure is @xmath618 s.t .",
    "@xmath619 , which is in contradiction with the assumption that @xmath7 defines the same property as @xmath473 does .",
    "if we want to prove something similar to theorem [ main ] , but over a restricted signature @xmath620 , then we need to adapt the constructions and formulas a bit .",
    "note that we can use forward arrows and backward arrows to replace the red edges and blue edges .",
    "and we can use bi - directional edges to indicate where the black leaves are .",
    "more precisely , the new structure @xmath621 ( @xmath622 resp . ) is obtained from @xmath623 resp . ) by the following process :    1 .",
    "use an arc from @xmath69 to @xmath328 to represent that the edge between the vertices @xmath69 and @xmath328 is red ; 2 .",
    "use an arc from @xmath328 to @xmath69 to represent that the edge between @xmath69 and @xmath328 is blue ; 3 .   add an edge from every black leaf to the junction point in the same connected component and from the junction point to every black leaf in the same connected component",
    "; 4 .   when @xmath624 , add a self loop to every leaf which is an endpoint of a red edge .",
    "correspondingly , the new formula , called @xmath625 , is obtained from @xmath473 by the following process :    1 .",
    "@xmath626 is replaced by @xmath627 ; 2 .",
    "@xmath628 is replaced by @xmath629 ; 3 .   when @xmath630 , @xmath631 is replaced by @xmath632 ; 4 .   when @xmath624 , @xmath633 in @xmath634 and @xmath635 is replaced by @xmath636 ; @xmath633 in @xmath637 and @xmath638 is replaced by @xmath639 .",
    "more precisely , we inductively define @xmath625 as follows .",
    "let @xmath474 and assume @xmath475 .",
    "1 .   @xmath640 ; 2 .",
    "@xmath641 ; + @xmath642 ; 3 .",
    "@xmath643 ; + @xmath644 ; 4 .",
    "now we define a sentence @xmath625 over the signature @xmath55 : * when @xmath630 , + @xmath645 .",
    "+ ( note that @xmath646 ) . * when @xmath624 , + @xmath647 + @xmath648 + @xmath649 + @xmath650 .    let @xmath651 where @xmath652 is a binary relation symbol .",
    "could we prove something similar to theorem [ main ] , but over @xmath55 ? to achieve it , in addition to the adaption we have introduced above , we need to find a way to get rid of the root , which is obvious .",
    "the @xmath55-structure @xmath653 is obtained from @xmath621 by the following process : removing @xmath654 and for any junction point @xmath193 , using a self loop at node @xmath193 to replace the edge from @xmath654 to @xmath193 .",
    "@xmath655 is obtained from @xmath622 in exactly the same way .",
    "correspondingly , @xmath6 is obtained from @xmath625 by substituting @xmath656 with @xmath657 and removing the atoms @xmath658 .",
    "it is a special case when @xmath624 because using bi - directional edges as a scheme of colouring does not work in this case .",
    "see figures [ prefix - ee ] for example , when @xmath471 and @xmath472 .",
    "[ reductions - from - tauplus - to - tau ] call the above reductions between structures and formulas `` '' .    in a similar way to lemma [ claim1 ] , we can prove the following lemma :    [ hintikka ] @xmath659 and @xmath660 .",
    "[ translation ] for any first - order sentence @xmath661 over @xmath55 , there is a first - order sentence @xmath662 over @xmath439 , with the same quantifier structure , such that the following hold :    1 .",
    "@xmath663 iff @xmath664 ; 2 .",
    "@xmath665 iff @xmath666 .",
    "let @xmath662 be obtained from @xmath661 by    1 .",
    "relativising all quantifiers in @xmath661 by @xmath658 ; 2 .   replacing all occurrences of @xmath627 by @xmath667",
    "note that the quantifier structure of @xmath662 is the same as that of @xmath661 .    because @xmath668 is obtained from @xmath437 by :    * deleting the root ( corresponding to relativising quantifiers ) ; * substituting red edges with forward arcs ( corresponding to the disjunct @xmath626 in the replacing of @xmath627 ) ; * substituting blue edges with backward arcs ( corresponding to the disjunct @xmath628 in the replacing of @xmath627 ) ; * adding self - loops at the junction points that are connected to the root(corresponding to the disjunct @xmath669 in the replacing of @xmath627 ) ; * adding bi - directional edges between the black leaves and junction points that are in the same connected component ( corresponding to the disjuncts @xmath670 and @xmath671 in the replacing of @xmath627 ) ,    it gives a reduction from the property defined by @xmath662 to the property defined by @xmath661 . in other words , @xmath663 iff @xmath664 . for the same reason , ( 2 ) also holds .",
    "now , we prove the main result in this section , i.e.  the theorem [ main1 ] .",
    "let @xmath608 . clearly , the property definable by @xmath6 is in @xmath672 .",
    "we try to prove that this property is not in @xmath673 .",
    "assume on the contrary that there is a formula @xmath7 such that @xmath614 and @xmath7 defines the same property as @xmath6 does . and let @xmath674 be @xmath44 . according to lemma [ hintikka ] , @xmath675 and @xmath676 .",
    "according to lemma [ translation ] , there is @xmath662 , with the same quantifier structure as @xmath7 , such that @xmath677 and @xmath678 . note that @xmath679 since @xmath680 and @xmath610 .",
    "but this is in contradiction to lemma [ ef - game ] .",
    "theorem [ main1 ] tells us that the distinctive collections of quantifier classes form a strict hierarchy , which we call quantifier structure hierarchy .",
    "up to now , using logics to characterize complexity classes inside np requires the structures to be ordered , i.e.  there is a linear order over the universe of the structures .",
    "therefore , it is interesting to extend the main result in the last section to ordered structures : the first - order quantifier structure hierarchy is strict over ordered finite structures .",
    "however , separating the expressive power of logics over ordered structures is often difficult , because the spoiler may detect the difference between the structures using a given linear order .",
    "but we will see in this section that the structures will be constructed in such a way that the power of linear order that the spoiler can use is quite limited : it is equivalent to the power that the spoiler can use in a game over a pair of linear orders , and a well - known result tells us that the duplicator has a winning strategy over a game between two linear orders that are sufficiently long . in this section",
    "we sketch the main ideas that conquer the order problem and omit most details that resemble those in the formal proof of theorem [ main1 ] .      [ ordered - structures ]",
    "recall that @xmath681 is @xmath682 where @xmath57 is interpreted as a linear order over the universe .",
    "let @xmath683 .",
    "let the structure @xmath684 be a @xmath681-structure defined as follows :    * @xmath685 and @xmath686 are trees , whose roots interpret @xmath350 , and whose edges are coloured either red or blue . * if @xmath441 , 1 .",
    "@xmath685 is a depth 1 tree that has @xmath687 leaves . to construct @xmath684 from @xmath685 ,",
    "give these leaves some order such that the @xmath688-th leaf is black .",
    "all the other leaves are not black .",
    "2 .   @xmath686 is a depth 1 tree that has @xmath689 leaves . _",
    "none _ of them is black .",
    "give these leaves an arbitrary order to construct @xmath690 from @xmath686 .",
    "+ let @xmath691 * if @xmath446 , 1 .",
    "@xmath685 is a depth 1 tree that has @xmath689 leaves .",
    "all of them are black .",
    "2 .   @xmath686 is a depth 1 tree that has @xmath692 leaves .",
    "all are black except one .",
    "give these leaves some order such that the @xmath688-th leaf is not black .",
    "+ in the above definition , we let a node be earlier in the linear order @xmath57 than its children .",
    "moreover , we define all the colours of the edges to be red when @xmath440 . * when @xmath693 : + let @xmath694 be the same as @xmath695 except that the colours of all the edges are exchanged , i.e.  red is changed to blue and vice versa .",
    "let @xmath696 , a @xmath697-structure , be built from a copy of @xmath698 and a copy of @xmath699 where they are joined together at their roots .",
    "their shared root is called junction point , which is used to interpretes the constant @xmath457 .",
    "similarly define @xmath700 as the join of @xmath698 and @xmath694 , define @xmath701 as the join of @xmath702 and @xmath694 , and define @xmath703 as the join of @xmath702 and @xmath699 . in @xmath696 , we let the elements in @xmath698 be later in the linear order than the elements in @xmath699 . similarly , in @xmath700 , we let the elements in @xmath698 be later in the order than the elements in @xmath694 ; in @xmath701 , the elements in @xmath702 are later in the order than the elements in @xmath694 ; in @xmath703 , the elements in @xmath702 are later in the order than the elements in @xmath699 . + in the following , we assume that any node in @xmath704 is later in the order than all nodes in @xmath705 if the junction point of @xmath704 is later in the order than the junction point of @xmath705 . * * if @xmath464 , 1 .",
    "@xmath684 is a point - expansion of @xmath706 over @xmath707 .",
    "its root is expanded by @xmath425 .",
    "recall that @xmath425 is a structure over the signature @xmath708 , whose universe has exactly one element , and this element is used to interpret the constant @xmath427 .",
    "when @xmath709 , the @xmath5-th leaf is expanded by a copy of @xmath696 if @xmath5 is odd , by a copy of @xmath701 if @xmath5 is even ; the @xmath5-th leaf is expanded by a copy of @xmath700 if @xmath710 ; when @xmath711 , the @xmath5-th leaf is expanded by a copy of @xmath696 if @xmath712 is odd , by a copy of @xmath701 if @xmath712 is even .",
    "@xmath690 is a point - expansion of @xmath713 over @xmath714 .",
    "its root is expanded by @xmath425 .",
    "the @xmath5-th leaf is expanded by a copy of @xmath696 if @xmath5 is odd , by a copy of @xmath701 if @xmath5 is even . * * if @xmath468 , 1 .",
    "the _ lem _ of @xmath684 is the same as the above _ lem _ ( 2@xmath465 ) of @xmath715 .",
    "the _ lem _ of @xmath690 is the same as the _ lem _ ( 1@xmath465 ) of @xmath716 except that @xmath700 is replaced by a copy of @xmath703 .",
    "note that every structure under consideration is just an ordered coloured tree and there is a path from its root to any node .",
    "we can read off the string of colours of edges along this path without a skip .",
    "define @xmath717 to be a string in @xmath718 associated with the path .",
    "@xmath719 , where @xmath120 is the empty string .",
    "we let `` red '' be later in the order than `` blue '' in the lexicographic order .",
    "let @xmath720 be two nodes .",
    "we use @xmath721 ( @xmath722 resp . ) to denote the father of @xmath197 ( @xmath198 resp . ) in this section .    in the above",
    ", we have defined the structures that will be used in the games . and",
    "the sentence that we use to define the separating property is the same as definition [ property - over - tau ] .",
    "that is , we actually use the same separating property to achieve the goal .    in the last section , we use point - expansions to realize strategy compositions .",
    "in some special cases , such compositions can be simplified : some of the substructures collapse to `` points '' , i.e.  the details of the substructures are omitted , and we use `` colours '' to distinguish different substructures , which are now _ regarded _ temporarily as elements .",
    "we call such a method a kind of `` structural abstraction '' , which is used to omit unrelated details of structures and simplify game arguments , and the games played on the simplified structures are images of the original games .      note that , even in the unordered case , when the spoiler picks @xmath197 , the duplicator s strategy in the games is always picking @xmath198 s.t .",
    "@xmath723 and picking a child of an element which is picked in some previous round , say the @xmath5-th round , when the spoiler picks a child of the other element which is picked in the @xmath5-th round .",
    "this lays the crucial basis for the previous inductive proof of theorem [ main ] to extend to classes of linearly ordered finite structures , because now we can use something similar to the following well - known result @xcite :    let @xmath573 , and let @xmath724 be linear orders of length no less than @xmath725 , then @xmath726    here , @xmath727 means that , for any @xmath728 with @xmath729 , @xmath730 iff @xmath731 .",
    "let @xmath473 be given by the definition [ property - over - tau ] .",
    "the proof of lemma [ claim1 ] also shows that @xmath732 and @xmath733 , since `` @xmath57 '' does not appear in @xmath473 .    to prove a version of theorem [ main ] over ordered structures",
    ", the main idea is almost the same . here",
    ", we just need to take care of the linear order . as we have explained before",
    ", the players will always pick a pair of elements that have the same label , and if the spoiler picks more than one child of a node in one structure , so does the duplicator in the other structure .",
    "hence , we can use structural abstraction to conceal the details of the substructures like @xmath696 , and regard the problem to be a game over two linear orders with three  colours \" , which represent three `` colours '' @xmath696 , @xmath701 , and @xmath700 respectively .",
    "see figure [ prefix - eq - color ] for example . here , @xmath696 is identified with light red ; @xmath701 is identified with light blue ; @xmath700 is identified with green .    as explained before",
    ", we may safely assume that @xmath567=\\exists$ ] .",
    "assume that @xmath464 .",
    "we can pair the children of @xmath734 as : @xmath735    we can regard two @xmath697-structures in the brackets as a whole .",
    "more precisely , an is a pair of structures from @xmath736,@xmath737,@xmath738,@xmath739 ( @xmath740 ) , which is regarded as a single `` super - element '' . from now on , we omit `` @xmath130 '' in `` @xmath130 - 2-tuple '' when it will not cause confusion from the context . in",
    "( [ 2-tuples - times ] ) , `` @xmath741 '' in the 2-tuple @xmath742 represents an empty , or imaginary , structure , which is just used to make up a 2-tuple .",
    "see figure [ prefix - eq - order ] .",
    "but , since we are regarding a 2-tuple as one single object now , we use one dashed line to represent two arrows .",
    "note that , by definition , the elements of @xmath743 are earlier than those of @xmath737 , in a 2-tuple @xmath744 .",
    "these 2-tuples have a natural linear order @xmath745 inherited from @xmath746 : for any two 2-tuples @xmath747 and @xmath748 , @xmath749 iff @xmath750 where @xmath751 and @xmath752 are the junction points of @xmath753 and @xmath754 respectively .",
    "similarly , we can pair the children of @xmath755 .",
    "note that there are @xmath688 2-tuples in @xmath684 , which form a linear order @xmath756 , and @xmath757 2-tuples in @xmath690 , which form another linear order @xmath758 .",
    "[ la - and - lb ] see figure [ prefix - eq - color-2 ] : a yellow node represents a 2-tuple , which corresponds to a pair of light red and light blue structures in figure [ prefix - eq - color ] ; the green node represents the 2-tuple that is green in figure [ prefix - eq - color ] .",
    "let @xmath70 be a @xmath10-labelled forest and @xmath759 . in the game @xmath760 ,",
    "when the spoiler picks an element @xmath197 , which is not the root of the structure , in some round , @xmath197 determines a @xmath2 - 2-tuple , where @xmath464 , s.t .",
    "@xmath197 is in the universe of this @xmath2 - 2-tuple . and",
    "we may also say that this 2-tuple is picked in this round .",
    "hence , @xmath760 induces a new game in which the players pick 2-tuples instead of elements in the universe .",
    "moreover , these 2-tuples form a pair of linear orders @xmath756 and @xmath758 , as shown in figure [ prefix - eq - color-2 ] .",
    "call this new game `` coloured linear order game '' @xmath761 .    from now on ,",
    "we use a natural number to denote a 2-tuple , in order to omit the details of 2-tuples that are not related to our concern but at the same time retain the order relation between 2-tuples .",
    "therefore , we can subtract one 2-tuple from another 2-tuple in this context .",
    "note that in this viewpoint linear orders can also be regarded as intervals .",
    "moreover , every set of elements that have the same labels form an interval .",
    "the duplicator s strategy in @xmath761 is as follows .",
    "assume that @xmath762 are already picked .",
    "let @xmath763 ( @xmath764 resp . )",
    "be the element picked in @xmath756 in the same round as @xmath765 ( @xmath766 resp . ) was picked .",
    "recall that these 2-tuples can be compared by the induced order .    *",
    "if in the current round the spoiler picks a 2-tuple @xmath767 in the interval @xmath768 $ ] and @xmath769 then the duplicator picks @xmath770 s.t .",
    "@xmath771 ; otherwise she picks @xmath770 s.t",
    ".  @xmath772 . *",
    "if in the current round the spoiler picks a 2-tuple @xmath770 in the interval @xmath773 $ ] , the duplicator s strategy is as follows : 1 .",
    "if @xmath774 then the duplicator picks @xmath767 in @xmath768 $ ] s.t .",
    "@xmath775 ; otherwise 2 .",
    "if @xmath776 then the duplicator picks @xmath767 in @xmath768 $ ] s.t .",
    "@xmath777 ; otherwise 3 .",
    "the duplicator picks the middle element in @xmath768 $ ] : if the special 2-tuple ( @xmath778 ( the green node in figure [ prefix - eq - color-2 ] ) is in the region @xmath779 $ ] then @xmath780 , otherwise @xmath781 .",
    "assume that in the first @xmath19 rounds the spoiler is restricted to pick in @xmath690 .",
    "because a 2-tuple may contain smaller 2-tuples when looking inside it , this strategy can be applied recursively until the duplicator finds an element to pick in the game @xmath760 : _ she always picks an element that has the same label as the element picked by the spoiler in the same round_. using this strategy together with the strategy that is used in the game between two unordered structures , the duplicator can ensure that @xmath782 will never be picked in the first @xmath19 rounds , in which the spoiler picks 2-tuples in @xmath758 , and order itself will not cause a problem throughout the game @xmath760 .",
    "more precisely , the following two lemmas are true : ( recall that @xmath70 is a @xmath10-labelled forest , and @xmath783 )    [ color - order - game ] assume that @xmath784 $ ] , and in the first @xmath19 rounds of the game @xmath761 , the spoiler picks 2-tuples in @xmath758 .    1 .   at the end of the @xmath5-th round of @xmath761 , for each @xmath785 ,",
    "there is only one interval in @xmath756 that is not isomorphic to the corresponding interval in @xmath758 , both of which are no shorter than @xmath786 , and @xmath782 always lies in this interval of @xmath756 .",
    "2 .   in the game @xmath761 , for any @xmath787",
    ", @xmath788    before the game @xmath761 , there is only one interval in @xmath756 and @xmath758 .",
    "namely @xmath756 and @xmath758 themselves .",
    "let @xmath789 be the fist and the last 2-tuples of @xmath756 respectively . and @xmath790 and @xmath791 be the first and the last 2-tuples of @xmath758 respectively .    1 .   in the first round",
    ", there are two possibilities : 1 .",
    "the players pick the first 2-tuple or the last 2-tuple in the respective intervals and the intervals remain unchanged ; 2 .",
    "the picked 2-tuples split @xmath756 and @xmath758 into two intervals . in this case , according to the duplicator s strategy , one interval in @xmath756 and @xmath758 has the same length , which is no larger than @xmath792 , and the other interval in @xmath756 includes @xmath782 because the length between the first 2-tuple ( the last 2-tuple resp . ) and @xmath782 is the length of @xmath758 plus one which means that this length is larger than any interval in @xmath758 .",
    "it also means that the interval which includes @xmath782 is longer than the other one in @xmath756 .",
    "hence , it is larger than @xmath792 , like the corresponding interval in @xmath758 .",
    "+ therefore , ( i ) holds when the game is at the end of the first round .",
    "assume that ( i ) holds when the game is at the end of the @xmath130-th round , where @xmath793 .",
    "+ when the game is in the @xmath794-th round , there are only two cases : 1 .",
    "the spoiler picks a 2-tuple that is in the interval , say @xmath795 in @xmath758 .",
    "let the corresponding interval in @xmath756 be @xmath796 , which includes the 2-tuple @xmath782 .",
    "by assumption , both of them are longer than @xmath797 . in this round , the unique pair of intervals @xmath796 and @xmath795 are split into two pairs : one is isomorphic ; the other one is not and includes @xmath782 because @xmath782 splits @xmath796 into two pieces and both of them are longer than @xmath795 .",
    "note that the pair of isomorphic intervals are no longer than @xmath798 .",
    "hence , the other pair of intervals are no shorter than @xmath798 , by the duplicator s strategy .",
    "2 .   the spoiler picks a 2-tuple in other intervals . note that all the other pairs of intervals have the same length . according to the duplicator s strategy , splitting such a pair of intervals only produces pairs of intervals of the same length . and the pair of intervals which are not isomorphic is unchanged . by the inductive assumption , ( i ) still holds .",
    "2 .   we prove an equivalent conclusion , i.e.  ( ii ) holds if we add two rounds before the game in which @xmath799 and @xmath791 are picked . clearly , @xmath800 iff @xmath801 . in other words , it holds when these two elements are picked .",
    "+ suppose ( ii ) holds when the game is at the end of the @xmath130-th round , where @xmath802 .",
    "+ now assume that the game is in the @xmath794-th round of the game . if the spoiler picks a 2-tuple that was picked before",
    ", then it still holds .",
    "if the spoiler picks a 2-tuple @xmath767 that splits some interval in @xmath758 , say @xmath803 $ ] , the duplicator also picks a 2-tuple @xmath770 that splits the corresponding interval @xmath804 $ ] by her strategy .",
    "if @xmath803 $ ] and @xmath804 $ ] are isomorphic , then obviously ( ii ) holds . if it is not the case , due to ( i ) , we know that @xmath804 $ ] is sufficiently long such that it allows such splitting",
    ". then for any 2-tuple @xmath805 that is picked before , @xmath806 if @xmath807 , which , by assumption , implies that @xmath808",
    ". hence , @xmath809 .",
    "likewise , @xmath810 if @xmath811 .",
    "therefore , for any @xmath812 , @xmath813 the `` '' part can be proven similarly .    part ( i ) of lemma [ color - order - game ] tells us that the spoiler can not use the linear order to force the duplicator to violate her winning strategy in @xmath814 , no matter how he picks in @xmath758 .",
    "that is , if the spoiler picks a yellow node in @xmath758 ( see figure [ prefix - eq - color-2 ] ) , the duplicator can also pick a yellow node .",
    "a similar thing can be proved when @xmath567=\\forall$ ] .",
    "because the collection of 2-tuples whose roots are children ( with the same label ) of an element ( node ) in @xmath684 form an interval , we can generalize ( ii ) of lemma [ color - order - game ] such that it applies to any pair of intervals that are split in the same round . recall that a 2-tuple is composed of two trees .",
    "a 2-tuple is at depth @xmath5 if the roots of trees of this 2-tuple are at depth @xmath5 .",
    "hence , we can call these intervals _ intervals at depth @xmath5 _ if the elements ( 2-tuples ) of these intervals are at depth @xmath5 of the structures ( trees ) .",
    "[ lower - level - game ] let @xmath70 be a @xmath10-labelled forest and @xmath783 .",
    "let @xmath1 be a prefix . in the game @xmath760 where @xmath815",
    ", the duplicator can play in such a way that :    1 .",
    "she follows her winning strategy in @xmath814 that has been described in lemma [ ef - game ] ; 2 .   for any @xmath816 , @xmath817 , which are picked by the players in @xmath5-th and @xmath818-th rounds ( @xmath819 ) , @xmath820    we assume that , before the first round of the game , both the first child and last child of any inner node are already picked .",
    "it means that we are trying to prove an equivalent result .    in each round ,",
    "when the spoiler picks an element @xmath68 in a structure , say @xmath684 , there is a path @xmath61 from the root of the tree @xmath684 to the node @xmath68 . for any node @xmath193 in the path @xmath61 there is a 2-tuple @xmath821 such that @xmath821 is the 2-tuple that include @xmath68 and @xmath193 is the root of either @xmath822 or @xmath823 .",
    "let @xmath68 be at the depth @xmath350 of the tree @xmath684 and let the path @xmath61 be @xmath824 where @xmath825 is the root of @xmath684 and @xmath826 .",
    "assume that the intervals of 2-tuples that are split by the path is @xmath827 .",
    "that is , @xmath828 is an interval at the depth @xmath5 of the tree @xmath684 , which includes @xmath829 .",
    "let @xmath830 be the collection of intervals of 2-tuples where @xmath831 is at depth @xmath5 and is formed in the same rounds as @xmath828 .",
    "the duplicator first picks all the nodes in the path @xmath824 ( looking at it in another way , the spoiler implicitly picks all the nodes in the path ) .",
    "then she uses her strategy in coloured linear order games recursively as follows : she first plays the one round coloured linear order game at the depth 1 , i.e.  over the pair of intervals @xmath832 , picking a 2-tuple at the depth 1 of @xmath690 , which splits the interval @xmath833 as a consequence ; then she picks the root of a tree in the 2-tuple ( recall that a 2-tuple is composed of two trees ) which respects her wining strategy in @xmath814 ( recall definition [ structures - over - tau ] for the definition of @xmath668 and @xmath834 ) : whenever possible she tries to choose the tree , whose root is @xmath835 , that is isomorphic to the one implicitly picked by the spoiler in @xmath836 whose root is @xmath837 , and pick @xmath835 .",
    "then she goes on to play the game over the pair of intervals @xmath838 . for @xmath839 , once she picked a 2-tuple at depth @xmath5 , she will pick the root , say @xmath328 , of a tree from the 2-tuple , afterwards she picks a 2-tuple at depth @xmath840 , whose trees are the children of @xmath328 . at last",
    ", she picks a 2-tuple in the interval @xmath841 and picks the root of a tree from this 2-tuple that respects her winning strategy in @xmath814 .",
    "\\(i ) will be violated only when the lengths of the pair of non - isomorphic intervals are not long enough such that the spoiler can force the duplicator to pick a different type of 2-tuple when he picks repeatedly in the shorter interval .",
    "note that any pair of isomorphic intervals have the same type of 2-tuples .",
    "hence , to prove ( i ) , we need only show that ( i ) at the end of the @xmath5-th round , if a pair of intervals is not isomorphic , then the length of them are no less than @xmath786 . however , ( i ) is obvious because the strategy of the duplicator ensures that after the @xmath5-th round ( @xmath842 ) , the lengths of any pair of non - isomorphic intervals reduce at most @xmath786 , while they are at least @xmath843 before the @xmath5-th round , which can be proved inductively as in lemma [ color - order - game ] . in other words , this strategy is able to incorporate her winning strategy in @xmath814 - it can guide her to win the game if order is not taken into account .",
    "it remains to show that this is a strategy for the duplicator to avoid the order problem , i.e.  to show ( ii ) .",
    "for the sake of convenience , we call the stage before the players play the game as the 0-th round . in the first round",
    ", the order will not be a problem since other than those nodes at the ends of intervals , there is no other node that can violate ( ii ) .",
    "assume that ( ii ) holds when it is at the end of the @xmath130-th round .",
    "now suppose that the game is in the @xmath794-th round .",
    "let @xmath829 and @xmath844 be two elements picked in the @xmath5-th and @xmath818-th rounds ( @xmath845 ) in @xmath684 .",
    "we may further assume that either @xmath5 or @xmath818 equals @xmath846 .",
    "when @xmath847 are in a path , then @xmath848 implies @xmath849 because the duplicator s strategy ensures that @xmath850 are also in a path .",
    "now assume that @xmath847 are not in a path .",
    "if @xmath829 and @xmath844 have the same father and the same label , which means they are in the same interval , then we can apply the same argument of lemma [ color - order - game ] , simply by regarding an element as a 2-tuple .",
    "if @xmath829 and @xmath844 have the same father but have different labels , then by definition their order is determined by their labels .",
    "so are @xmath851 and @xmath852 .",
    "note that the label of @xmath829 and @xmath851 ( @xmath844 and @xmath852 resp . )",
    "are the same , by the duplicator s strategy .",
    "therefore , ( ii ) holds .",
    "assume that @xmath829 and @xmath844 have different fathers .",
    "note that @xmath853 always share at least one ancestor , i.e.  the root @xmath350 .",
    "let @xmath328 be such an shared ancestor , and for all other shared ancestors , @xmath328 is later in the order .",
    "let @xmath854 be the ancestor of @xmath829 ( or @xmath829 itself ) and the child of @xmath328 .",
    "let @xmath855 be the ancestor of @xmath844 ( or @xmath844 itself ) and the child of @xmath328 .",
    "let @xmath856 be defined in a similar way in @xmath690 . then by definition the order between @xmath829 and @xmath844 is determined by the order between @xmath854 and @xmath855 . and the duplicator can ensure that @xmath857 iff @xmath858 , according to the same argument as lemma [ color - order - game ] .",
    "therefore , ( ii ) holds .",
    "lemma [ lower - level - game ] tell us that linear order does not cause a problem to the duplicator , and together with the arguments in theorem [ main1 ] the following holds .",
    "[ main - order-0 ] let @xmath8 and @xmath9 be two finite @xmath10-labelled forests . over the class of all finite @xmath681-structures , @xmath859    using similar arguments as in the last section , in particular the same reduction as in lemma [ translation ] , we can prove the following theorem .",
    "[ main - order ] let @xmath8 and @xmath9 be two finite @xmath10-labelled forests . over the class of",
    "all ordered finite digraphs , @xmath859    here we call @xmath860-structures ( linearly ) ordered digraphs",
    ".    the following corollary is a special case of theorem [ main - order ] , where @xmath8 and @xmath9 are degenerate trees ( or directed paths ) .",
    "[ two - prefixes ] let @xmath861 . over",
    "the class of all ordered finite digraphs , @xmath862    note that it is different from grdel and mccolm s conjecture @xcite .",
    "a natural question is whether something similar to theorem [ main1 ] holds , but over finite digraphs with built - in @xmath863 . here",
    ", @xmath863 is the binary relation for the bit operator : @xmath864 if the @xmath198-th bit of the binary representation of @xmath197 is @xmath865 .",
    "the operator @xmath863 seems very powerful .",
    "it is known that first - order logic equipped with @xmath863 can define arbitrary algorithmic operators , including @xmath866 , and @xmath867 ( schweikardt , @xcite ) .",
    "supprisingly , schweikardt and schwentick @xcite showed that @xmath863 is similar to linear orders in terms of expressive power in first - order logic . based on their constructions ,",
    "it is not difficult to show that the quantifier structure hierarchy is strict in @xmath0 , even in the presence of @xmath863 .",
    "it is possible that two @xmath10-labeled forests can not embed to each other but the set of words that can be read off them are the same .",
    "it is natural to conjecture that they represent different logical resources .",
    "however , the hierarchy we defined in the last section can not tell us about it . in the following",
    ", we are going to show a refined strict hierarchy , which confirms this intuition :    [ main - main ] let @xmath8 and @xmath9 be two @xmath10-labelled forests",
    ". over the class of all digraphs , @xmath868    as in the last section , we let @xmath869 , and let @xmath870 .",
    "a @xmath10-labelled tree @xmath271 is an irreducible tree if for any inner node @xmath68 the following holds :    let @xmath871 be the children of @xmath68 and @xmath872 be the maximal subtrees of @xmath271 that are rooted at @xmath871 respectively , then @xmath873 can not embed in @xmath874 for any @xmath875 $ ] where @xmath876 .",
    "[ refined - struc ] let @xmath271 be a @xmath10-labelled irreducible @xmath19-ary tree .",
    "* @xmath877 and @xmath878 are coloured trees . '' in @xmath877 and @xmath878 refers to the tree @xmath271 . also cf .",
    "figure [ e(et1)(at2 ) ] . ] the constant @xmath350 is interpreted as the root of the respective trees . as in definition",
    "[ structures - over - tau ] , we say an element @xmath68 is black if @xmath879 . *",
    "\\(1 ) @xmath880 is a depth 1 tree that has @xmath881 leaves .",
    "one of the leaves is black and all the other leaves are not black .",
    "+ \\(2 ) @xmath882 is a depth 1 tree that has @xmath883 leaves . _",
    "none _ of them is black .",
    "+ all edges in @xmath884 and @xmath885 are red . recall that we say an edge @xmath886 is red if , and only if , @xmath887 . + @xmath888 ; @xmath889 . *",
    "\\(1 ) @xmath890 is a depth 1 tree that has @xmath883 leaves .",
    "all of the leaves are black .",
    "+ \\(2 ) @xmath891 is a depth 1 tree that has @xmath881 leaves .",
    "one of them is not black and all the other leaves are black .",
    "+ all edges in @xmath892 and @xmath893 are red .",
    "+ @xmath894 ; @xmath895 . * if @xmath271 contains a single @xmath77 node , + @xmath896 is @xmath897 ; @xmath898 is @xmath899 .",
    "* if @xmath271 contains a single @xmath78 node , + @xmath896 is @xmath900 ; @xmath898 is @xmath901 .",
    "* when @xmath902 + assume that the root @xmath350 of @xmath271 has @xmath19 children , and the maximal subtrees that are rooted at these children are @xmath903 respectively . recall that @xmath271 is an irreducible tree , which implies @xmath904 and @xmath905 are not isomorphic if @xmath876 .",
    "+ for _ any _ @xmath10-labelled tree @xmath906 , let @xmath907 be the same as @xmath908 except that the colours of all the edges are exchanged , i.e.  red is exchanged with blue .",
    "let @xmath909 , which is a member of the set @xmath910 , and @xmath911 , which is a @xmath455-structure where @xmath457 is a hook constant , be built by the following process : 1 .",
    "let @xmath912 ; 2 .   for @xmath913 to @xmath19 do the following : * * if @xmath914 then @xmath915 ; * * if @xmath916 then @xmath917 ; * * if @xmath918 then @xmath919 ; * * if @xmath920 then @xmath921 ; * * if @xmath922 then @xmath923 ; * * if @xmath924 then @xmath925 ; 3 .",
    "join all the trees in @xmath392 at their roots .",
    "call their shared root a _ junction point _ , which interprets the hook constant @xmath457 .",
    "+ we use @xmath926 to denote the label of the root of the tree @xmath904 .",
    "let @xmath927\\mid \\text { the root of } \\mathcal{t}_i$ ] has the same label as that of the root of @xmath928 .",
    "+ in the following , we define some substructure for the constructions : * * for any @xmath929 , let @xmath930 where @xmath931 and [ if @xmath876 then @xmath932 if @xmath933 and @xmath934 if @xmath935 $ ] ; * * for any @xmath929 , let @xmath936 where @xmath937 and [ if @xmath876 then @xmath932 if @xmath933 and @xmath934 if @xmath935 $ ] ; * * for any @xmath938 $ ] and @xmath939 , let @xmath940 and @xmath941 $ ] ; * * we use @xmath942 to denote the structure @xmath911 where @xmath914 if @xmath943 if @xmath944 .",
    "+ dually , we can define @xmath945 as follows : * * for any @xmath929 , let @xmath946 where @xmath931 and [ if @xmath876 then @xmath947 if @xmath948 and @xmath949 if @xmath950 $ ] ; * * for any @xmath929 , let @xmath951 where @xmath937 and [ if @xmath876 then @xmath947 if @xmath948 and @xmath949 if @xmath950 $ ] ; * * for @xmath939 , let @xmath952 where @xmath953 and [ if @xmath876 then @xmath947 if @xmath948 and @xmath949 if @xmath950 $ ] ; * * we use @xmath954 to denote the structure @xmath911 where @xmath920 if @xmath955 if @xmath956 . + as usual , we define the main structures based on point - expansions over some sets of structures .",
    "now we define such sets . * * @xmath957 $ ] and @xmath958 ; * * @xmath959 ; * * @xmath960 . *",
    "* @xmath961 \\text { and } i\\notin h\\}$ ] ; * * @xmath962 ; * * @xmath963 .",
    "+ now we define @xmath964 and @xmath898 as follows : * * if the root of @xmath271 is an @xmath77 node , which is connected to the roots of @xmath19 trees @xmath965 , and assume that the number of @xmath75 in the tuple @xmath966 is @xmath967 , then @xmath964 and @xmath898 are defined as follows : * * * @xmath964 is a point - expansion of @xmath968 over @xmath969 : the root of @xmath968 is expanded by @xmath425 .",
    "it is also called the `` _ _ root _ _ '' of @xmath964 that interprets @xmath350 .",
    "one leaf is expanded by a copy of @xmath970 . for each element of @xmath971",
    "there are exactly @xmath44 distinct leaves which are expanded by it . *",
    "* * @xmath898 is a point - expansion of @xmath972 over @xmath973 , similar to @xmath964 : the root of @xmath972 is expanded by @xmath425 . for each element of @xmath971",
    "there are exactly @xmath44 distinct leaves which are expanded by it . *",
    "* if the root of @xmath271 is an @xmath78 node , which is connected to the roots of @xmath19 trees @xmath965 , and assume that the number of @xmath76 in the tuple @xmath966 is @xmath967 , then @xmath964 and @xmath898 are defined as follows : * * * @xmath964 is a point - expansion of @xmath974 over @xmath975 : the root of @xmath974 is expanded by @xmath425 .",
    "for each element of @xmath976 there are exactly @xmath44 distinct leaves which are expanded by it . * * * @xmath898 is a point - expansion of @xmath977 over @xmath978 : the root of @xmath977 is expanded by @xmath425 .",
    "one leaf is expanded by a copy of @xmath979 . for each element of @xmath976",
    "there are exactly @xmath44 distinct leaves which are expanded by it .",
    "let @xmath271 be a @xmath10-labelled irreducible binary tree .",
    "assume that its root is an @xmath77 node and is connected to two subtrees @xmath980 and @xmath981 , where the root of @xmath980 is an @xmath77 node and the root of @xmath981 is an @xmath78 node .",
    "see figure [ e(et1)(at2 ) ] for the illustration of the structures @xmath964 and @xmath898 .",
    "a `` * '' at the root of a subtree @xmath906 means that we have @xmath44 disjoint isomorphic copies of this tree @xmath906 and for each copy we add an edge between the root , @xmath350 , of the whole structure and the root of this copy .",
    "now we define a sentence @xmath982 over the signature @xmath439 such that , for any @xmath44 , @xmath983 but @xmath984 .",
    "[ sentence - for - property - sigma_f ] let @xmath271 be a @xmath10-labelled irreducible @xmath19-ary tree , which is connected to the roots of @xmath19 trees @xmath965 .",
    "assume that @xmath985 .",
    "recall that @xmath986\\mid \\text { the root of } \\mathcal{t}_i$ ] has the same label as that of the root of @xmath928 .",
    "we define @xmath439-sentences @xmath982 and @xmath987 based on the tree @xmath271 as follows :    1 .",
    "if @xmath271 is empty , then @xmath988 2 .",
    "if the root of @xmath271 is an @xmath77 node , then @xmath989 } \\widetilde{\\xi}_{\\mathcal{t}_i}(x_{d})\\land \\displaystyle\\bigwedge_{j\\in h } \\widetilde{\\xi}_{-\\mathcal{t}_j}(x_{d}));\\ ] ] + @xmath990 } \\widetilde{\\xi}_{-\\mathcal{t}_i}(x_{d})\\land \\displaystyle\\bigwedge_{j\\in h } \\widetilde{\\xi}_{\\mathcal{t}_j}(x_{d}));\\ ] ] 3 .   if the root of @xmath271 is an @xmath78 node , then @xmath991 } \\widetilde{\\xi}_{\\mathcal{t}_i}(x_{d})\\lor\\displaystyle\\bigvee_{j\\in h}\\widetilde{\\xi}_{-\\mathcal{t}_j}(x_{d}));\\ ] ] + @xmath992 } \\widetilde{\\xi}_{-\\mathcal{t}_i}(x_{d})\\lor\\displaystyle\\bigvee_{j\\in h}\\widetilde{\\xi}_{\\mathcal{t}_j}(x_{d}));\\ ] ]    now , @xmath982 and @xmath987 are defined as : @xmath993      in the following , we show that a refined strict quantifier hierarchy exists by proving that the duplicator has a winning strategy in the games that we introduced before . since the proof resembles that in section [ games - and - hierarchy ] , we sketch the main ideas and omit similar details .    [ ef - game - refined ] let @xmath8 and @xmath9 be two finite @xmath10-labelled forests .",
    "if @xmath994 , then there is an irreducible subtree @xmath271 in @xmath8 such that the duplicator has a winning strategy in @xmath995 for any @xmath996 .",
    "observe that when @xmath997 , i.e.  the rank of @xmath8 is 1 , @xmath994 implies @xmath998 . according to lemma [ ef - game ] ,",
    "the duplicator has a winning strategy .",
    "assume that the lemma holds when @xmath999 .",
    "now assume that @xmath1000 .    because @xmath994 , for some @xmath1001 there exists a @xmath19-ary subtree @xmath271 in @xmath8 such that @xmath1002 for any subtree @xmath906 in @xmath9 .",
    "moreover , we assume that @xmath271 is the minimal subtree in @xmath8 that is not embeddable in @xmath9 ,",
    "i.e.   any subtree of @xmath271 , which is not @xmath271 itself , is embeddable in @xmath9 .",
    "note that such a tree is an irreducible tree , whose rank is no larger than @xmath1003 .",
    "here we use @xmath1004 to denote the root of @xmath271 .",
    "and we assume that @xmath1004 is an @xmath77 node .",
    "we assume that there are @xmath1005 subtrees , @xmath1006 , whose roots are connected to @xmath1004 .",
    "let @xmath1007 be the set of @xmath77 nodes in @xmath9 such that for any @xmath1008 no other @xmath77 node appears in the path from the root of @xmath9 to @xmath68 . by assumption @xmath271",
    "is not embeddable in any subtree of @xmath9 .",
    "for any @xmath1008 , let @xmath906 be a tree rooted at @xmath68 and @xmath618 be the forest obtained from @xmath906 by removing the root of @xmath906 .",
    "hence , at least one of the trees @xmath1006 can not be embedded in @xmath618 .",
    "observe that @xmath1009 for any @xmath1010 $ ] .",
    "note that , in any play of the game , the moving track of the token in @xmath9 is a directed path . if the first place where the token lies is an @xmath78 node , then the path is initiated with a block of universal quantifiers .",
    "however , in the rounds based on this first block of universal quantifiers the spoiler has to pick in @xmath878 and no matter how he picks the duplicator can mimic his picking in the isomorphic subtrees . by lemma",
    "[ pick - in - isom ] , if the spoiler can win the game by picking these elements , he can also win the game without picking these elements .    when the token is on a node of @xmath1007 , say @xmath68 , we assume that the spoiler picks in @xmath970 ( i.e.  in a copy of @xmath877 ) because if he picks in other places the duplicator can mimic his picking in an isomorphic tree substructure , hence by lemma [ pick - in - isom ] the spoiler can win the game without picking in these places if he has at least one winning strategy . in this round ,",
    "the duplicator s strategy is as follows ( i.e.  picking in a copy of @xmath878 ) :    * if @xmath904 is not embeddable in the forest @xmath618 and @xmath1011 is an @xmath77 node , then * * if the spoiler picks inside @xmath1012 , which is a part of @xmath970 , then the duplicator mimics it in an isomorphic copy of @xmath1012 , which is a part of @xmath1013 .",
    "* * if the spoiler picks inside @xmath1014 , which is a part of @xmath970 , then the duplicator mimics it in an isomorphic copy of @xmath1014 , which is a part of @xmath1015 . * * if the spoiler picks inside @xmath1016 or @xmath1017 where @xmath1018 , then the duplicator mimics it in an isomorphic copy of @xmath1016 or @xmath1017 , which is a part of @xmath1013 . * * if the spoiler picks the junction point , i.e.  the root , of @xmath970 , then the duplicator picks the junction point of @xmath1013 . * if @xmath904 is not embeddable in @xmath618 and @xmath1011 is an @xmath78 node , then * * if the spoiler picks inside @xmath1012 , which is a part of @xmath970 , the duplicator is able to mimic the spoiler s picks inside @xmath1019 , which is a part of @xmath1020 .",
    "it is because the root of @xmath904 is an @xmath78 node , which means that the number of different types of subtrees , whose roots are connected to the root of @xmath1012 ( in @xmath964 ) , is less than the number of different types of subtrees , whose roots are connected to the root of @xmath1019 ( in @xmath898 ) . * * if the spoiler picks inside @xmath1016 or @xmath1017 where @xmath1018 , then the duplicator mimics it in an isomorphic copy of @xmath1016 or @xmath1017 , which is a part of @xmath1020 .",
    "* * if the spoiler picks the junction point , i.e.  the root , of @xmath970 , then the duplicator picks the junction point of @xmath1020 .",
    "note that such a strategy has exploited the feature of the structures on the game board : ( recall that the root of @xmath271 is an @xmath77 node ) the structures are constructed in such a way that if the spoiler does not pick the junction point of @xmath970 in @xmath877 then the duplicator is able to mimic his picking in an isomorphic tree substructure of @xmath878 - such isomorphic subtrees always exist . and by lemma [ pick - in - isom ] the spoiler can also win without such picking if he can win in any way .",
    "if the spoiler pick the junction point of @xmath970 , by her strategy , the duplicator picks the junction point of @xmath1013 where @xmath1021 .",
    "observe that , the difference between @xmath970 and @xmath1013 is the difference between @xmath1014 and @xmath1022 ( or equivalently the difference between @xmath1012 and @xmath1019 ) .",
    "therefore , using this strategy , no matter how the spoiler picks , the duplicator can reply properly such that in the end the spoiler can win the game @xmath1023 ( or @xmath1024 ) , if the spoiler can win in any way . recall that @xmath1009 . by induction assumption",
    ", the duplicator can win the game using this strategy .",
    "therefore , the spoiler can not win the game if the duplicator plays according to this strategy .",
    "in other words , this strategy is a winning strategy for the duplicator in the game @xmath995 .",
    "when @xmath1004 is an @xmath78 node , the analysis is similar .",
    "note that the duplicator s winning strategy in lemma [ ef - game - refined ] depends on how the spoiler moves the token .",
    "that is , she has to keep an eye on the token track before she make the choices .",
    "the following corollary is directly due to lemma [ m2m- ] and theorem [ qs - game ] .",
    "let @xmath8 and @xmath9 be two finite @xmath10-labelled forests . if @xmath994 , then for any @xmath7 such that @xmath614 , and any @xmath996 , we have : @xmath1025    the following lemma is similar to lemma [ claim1 ] .",
    "actually , the proof resembles that of lemma [ claim1 ] .",
    "[ claim1-refined ] let @xmath271 be @xmath10-labelled irreducible tree .",
    "then @xmath1026    it is obvious when @xmath271 is a single node .",
    "assume that it holds when @xmath1027 .",
    "now assume that @xmath271 is a @xmath19-ary @xmath10-labelled tree and its rank is @xmath1003 .",
    "suppose that the root of @xmath271 is an @xmath77 node , and its subtrees , whose roots are children of @xmath1004 , are @xmath1028 . recall that @xmath986\\mid \\text { the root of } \\mathcal{t}_i$ ] has the same label as that of the root of @xmath928 .",
    "let @xmath492 be the node that interprets @xmath350 in @xmath964 . and",
    "let @xmath494 be the node that interprets the hook constant in @xmath970 , i.e.  @xmath494 is the junction point of @xmath970 . by assumption and an observation similar to lemma [ dual - hintikka ] , @xmath1029 ( @xmath47 $ ] ) , and @xmath1030 ( @xmath929 ) .",
    "moreover , all the quantifiers in @xmath1031 are relativized by relations either @xmath499 or @xmath500 , where @xmath197 is the quantified variable .",
    "it means that @xmath1031 expresses some property that is nothing to do with the elements of @xmath877 outside the tree substructure @xmath1012 . as a consequence",
    ", @xmath1032 implies @xmath1033 .",
    "+ by the same argument , @xmath1034 implies @xmath1035 .",
    "+ therefore , in @xmath877 , @xmath494 is the witness of the quantifier @xmath1036 in the formula @xmath1037 .",
    "that is , @xmath1038 , or @xmath1039 .    likewise , by assumption and similar analysis , in @xmath898 the subtrees @xmath1013 , or @xmath1015 , or @xmath1020 , has exactly one subtree @xmath1019 , or @xmath1022 , which does not satisfy some subformula of @xmath982 ( i.e.  one conjunct of @xmath1040 } \\widetilde{\\xi}_{\\mathcal{t}_i}(x_{d})\\land \\displaystyle\\bigwedge_{j\\in h } \\widetilde{\\xi}_{-\\mathcal{t}_j}(x_{d})$ ] ) , when its root interprets @xmath1041 .",
    "in other words , @xmath494 can not be a witness of the quantifer @xmath1036 .",
    "therefore , @xmath984 .",
    "when the root of @xmath271 is an @xmath78 node , the analysis is similar .",
    "[ main - main - tau - plus ] let @xmath8 and @xmath9 be two @xmath10-labelled forests . over the class of all finite @xmath439-structures , @xmath868    by lemma [ ef - game - refined ] , we know that the duplicator has a winning strategy in the game @xmath1042 in other words , the property defined by @xmath982 is not expressible in @xmath673 , by lemma [ q - type - game-2 ] .",
    "observe that @xmath1043 .",
    "therefore , @xmath1044 .",
    "recall that @xmath1045 . based on the same transformations as the `` reductions from @xmath439 to @xmath55 '' ( p. ) , the diagraph @xmath1046 ( @xmath1047 resp . ) is obtained from @xmath964 ( @xmath898 resp . ) , as @xmath668 ( @xmath834 resp . ) is obtained from @xmath437 ( @xmath438 resp . ) ; @xmath1048 is obtained from @xmath982 as @xmath6 is obtained from @xmath473 .",
    "recall that the reductions are mainly doing three things :    * change red edges to forward edges ; change blue edges to backward edges ; * use self - loops to indicate the positions of junction points ; * use bi - directional edges to indicate the positions of black leaves .",
    "we can use the same reductions , prove a new version of lemma [ translation ] as the following :    for any first - order sentence @xmath661 over @xmath55 , there is a first - order sentence @xmath662 over @xmath439 , with the same quantifier structure , such that    1 .",
    "@xmath1049 iff @xmath1050 ; 2 .",
    "@xmath1051 iff @xmath1052 .    and",
    "theorem [ main - main ] is immediate , by the same argument in the proof of theorem [ main1 ] .",
    "the following is a direct corollary of theorem [ main - main ] :    let @xmath8 and @xmath9 be two @xmath10-labelled forests and @xmath1053 includes a @xmath19-ary relation symbol where @xmath1054 . over the class of all finite @xmath1053-structures , @xmath868    we can use the @xmath19-ary relation ( @xmath1054 ) to encode the binary relations we defined in the structures for theorem [ main - main ] and",
    "let all the other relations be empty .",
    "it is natural to classify fragments of first - order logic based on quantifier structures . so far , most related works are focused on those fragments based on quantifier prefixes , a special kind of quantifier structure , and contribute to our understanding of their different expressiveness .",
    "grdel - mccolm s conjecture , which claims the strictness of the first - order prefix hierarchy , generalizes the results of walkoe @xcite , keisler & walkoe @xcite and chandra & harel @xcite .",
    "rosen proved this conjecture by showing that it holds over infinite structures @xcite and raised the question of whether it also holds over finite structures .",
    "we define games that characterize the quantifier classes , which generalize the standard ehrenfeucht - frass ' e games , and prove that a similar and natural hierarchy , i.e.  the first - order quantifier structure hierarchy , is strict over finite structures .",
    "although these two hierarchies are similar , they are independent in that none implies the other directly .",
    "nevertheless , our constructions do provide justifications for some special cases of grdel - mccolm s conjecture over finite structures .",
    "for example , from the constructions introduced in this paper we can see that there is a property that is expressible in @xmath1055 , but not in @xmath1056 , @xmath1057 , @xmath1058 and @xmath1059 .",
    "but we do nt know whether it is expressible in @xmath1060 or not .",
    "recall that the mapping @xmath192 between quantifier structures is not necessarily injective when we define the embedding relation @xmath199 ( definition [ forests - embedding-1 ] ) .",
    "now , we change the definition of quantifier structure embedding a little bit , i.e.  require @xmath192 to be injective . as a consequence ,",
    "the quantifier classes are also changed correspondingly . and",
    "a finite version of rosen s main theorem @xcite can be stated as the following , based on such change . recall that we assume that all the structures are finite .",
    "@xmath1061 as has been mentioned in the introduction , a proof of this theorem will solve grdel - mccolm s conjecture over finite structures , which is still open at present .",
    "another possible way to resolve this conjecture is to define ehrenfeucht - frass ' estyle games for the prefix classes . in any cases , we need new techniques and insights .",
    "let @xmath271 be a @xmath10-labelled tree and @xmath1062 be a forest composed of @xmath5 disjoint copies of @xmath271 .",
    "let @xmath1063 be a map from a @xmath10-labelled tree to a natural number such that @xmath1064 is the minimum number for @xmath44 such that @xmath1065 .",
    "is determined by lemma [ finite - logic - equiv - fixed - rank ] . ] then , the following is conceivable , under the new definition of quantifier structure embedding :    let @xmath271 be a @xmath10-labelled tree and @xmath70 be an arbitrary @xmath10-labelled forests . over the class of all finite digraphs , for any @xmath1066 , @xmath1067    note that it generalizes not only grdel - mccolm s conjecture over finite structures but also the finite version of rosen s main theorem .",
    "furthermore , it is also interesting to study @xmath1064 .",
    "for example , how fast will it grow w.r.t .",
    "the size of @xmath271 ?",
    "another question is whether we can prove similar hierarchies in other logics .",
    "one candidate is so called independence - friendly logic ( ifl ) .",
    "what makes it interesting is that ifl has the form of first - order logic , while has the expressive power equals existential second - order logic ( eso ) .",
    "it is well - known that eso captures the complexity class np over finite structures .",
    "clearly , establishing a natural and strict hierarchy for the np problems would be very interesting .",
    "i am grateful to anuj dawar for giving me a lot of suggestions and ideas which improve the paper significantly and to bjarki holm for useful discussions and proofreading .",
    "i am also grateful to the anonymous referees for their valuable comments ."
  ],
  "abstract_text": [
    "<S> we study a natural hierarchy in first - order logic , namely the quantifier structure hierarchy , which gives a systematic classification of first - order formulas based on structural quantifier resource . </S>",
    "<S> we define a variant of ehrenfeucht - frass ' e games that characterizes quantifier classes and use it to prove that this hierarchy is strict over finite structures , using strategy compositions . moreover </S>",
    "<S> , we prove that this hierarchy is strict even over ordered finite structures , which is interesting in the context of descriptive complexity . </S>"
  ]
}