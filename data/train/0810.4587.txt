{
  "article_text": [
    "in recent years , pedestrian research has become a very active field . queueing - theoretical approaches ( see , e.g. , refs .",
    "@xcite ) and fluid - dynamic models @xcite have facilitated insights into the large - scale dynamics of pedestrian crowds , in particular into the phenomon of intermittent flows and stop - and - go traffic emerging at extreme densities @xcite .",
    "however , most recent work is dedicated to microscopic simulation models such as the social force model @xcite , cellular automata @xcite , particle hopping models @xcite , and others , e.g. multi - agent approaches @xcite .",
    "while some of these models are aiming at the simulation of real evacuation scenarios , others are focussing on an understanding of the self - organized dynamical patterns that a realistic model must also be able to reproduce . but how to calibrate these models ?",
    "one common method is to modify model parameters and model components long enough until the simulations fit the fundamental flow - density diagram such as the one proposed by weidmann @xcite : @xmath0\\right\\}\\ , .",
    "\\label{weidmann}\\ ] ] this method can certainly be applied , but it does not necessarily lead to realistic and reliable simulation results .",
    "first of all , the fundamental diagram depends enormously on the body size distribution @xcite and other characteristic features of the crowd second , most models fitting the fundamental diagram must be separately calibrated to many differen situations , as they do not reproduce the various dynamical phenomena in pedestrian crowds well .",
    "these phenomena include the formation of lanes of uniform walking direction in crowds with oppositely moving pedestrians , stripe formation in two intersecting pedestrian streams , and oscillations of the passing direction at bottlenecks under normal conditions with moderate densities @xcite .",
    "apart from the latter two phenomena , which have been discovered only recently , the social force model , despite its simplicity , has been shown to reproduce the dynamics in crowds qualitatively well .",
    "however , not much effort has been spent in the past to calibrate it for the application to dimensioning and evacuation problems .",
    "we will , therefore , introduce a method to calibrate microscopic pedestrian simulation models using trajectory data reflecting pedestrian interactions , and apply it to the social force model .",
    "our paper is organized as follows : section  [ sec1 ] will shortly introduce the social force model and some specifications of it . in sec .",
    "[ sec2 ] , we will then introduce our method to optimize parameters based on trajectory data .",
    "for this , we will shortly describe the video tracking method applied to gain the trajectory data .",
    "moreover , we will discuss how the data can be used to determine the interaction forces themselves .",
    "afterwards , in section  [ sec3 ] we will present some examples of large - scale pedestrian and evacuation simulations . finally , sec .",
    "[ sec4 ] will summarize and conclude our paper .",
    "the social force model can be underpinned with a social science model of behavioral changes proposed by lewin @xcite .",
    "he has introduced the idea that behavioral changes were guided by so - called _ social fields _ or _ social forces_. this idea has been put into mathematical form by helbing @xcite and applied to opinion formation @xcite , pedestrian motion @xcite , and vehicle traffic @xcite .",
    "the social force model for pedestrians assumes that each individual @xmath1 is trying to move in a desired direction @xmath2 with a desired speed @xmath3 , and that it adapts the actual velocity @xmath4 to the desired one , @xmath5 within a certain relaxation time @xmath6 .",
    "the velocity @xmath7 , i.e. the temporal change of the location @xmath8 , is itself assumed to change according to the acceleration equation @xmath9 where @xmath10 is a fluctuation term and @xmath11 the systematic part of the acceleration force of pedestrian @xmath1 given by @xmath12 the terms @xmath13 , @xmath14 denote the repulsive forces describing the attempts to keep a certain safety distance to other pedestrians @xmath15 and obstacles @xmath16 .",
    "the fluctuation term @xmath17 reflects random behavioral variations arising from deliberate or accidental deviations from the average way of motion . the above equation are nonlinearly coupled langevin equations and can be solved numerically using euler s method . in very crowded situations ,",
    "additional physical contact forces come into play @xcite .    for the time being , we will assume a simplified interaction force of the form @xmath18 where @xmath19 is the distance vector pointing from pedestrian @xmath15 to @xmath1 and @xmath20 the angle between the normalized distance vector @xmath21 and the direction @xmath22 of motion of pedestrian @xmath1 , i.e. @xmath23 .",
    "it has , for example , been suggested to reflect by the function @xmath24 that the reaction of pedestrians to what happens in front of them is much stronger than to what happens behind them . here , @xmath25 with @xmath26 is a parameter which grows with the strength of interactions from behind .",
    "later on , we will try to determine this angular dependence from video tracking data .",
    "the distance dependence @xmath27 has been specified in different ways .",
    "we will start with the * circular specification * of the interaction force , @xmath28 where @xmath29 and @xmath30 denote something like the radii of pedestrians @xmath1 and @xmath15 , while @xmath31 and @xmath32 are parameters .",
    "@xmath31 reflects the strength of interaction , while @xmath32 corresponds to the interaction range .",
    "while the dependence on @xmath1 explicitly allows for a dependence of these parameters on the single individual , we will assume @xmath33 and @xmath34 in the following .",
    "otherwise , it would be hard to collect enough data for parameter calibration .",
    "let us now turn to the question how the parameters @xmath35 and @xmath36 and the angular interaction strength @xmath37 can be determined from video recordings .",
    "+   +     we have made several video recordings of pedestrian crowds in different natural environments in budapest ( hungary ) and stuttgart ( germany ) from the top ( see fig .",
    "[ fig1 ] ) .",
    "the dimensions of the recorded areas was known , and the floor tiling or environment provided something like a `` coordinate system '' .",
    "the heads were automatically determined by seaching for round moving structures , and the accuracy of tracking was improved by comparing actual with linearly extrapolated positions ( so it would not happen so easily that the algorithm interchanged or `` lost '' closeby pedestrians ) .",
    "the trajectories of the heads were then projected on two - dimensional space in a way correcting for distortion by the camera perspective . a representative plot of the resulting trajectories is shown in fig .",
    "however , it should be noted that extracting trajectory data from pedestrians is nothing new .",
    "it has been done in the past with infra - red sensors @xcite or video recordings @xcite .          for model calibration",
    ", we have used a hybrid method fusing empirical trajectory data and microscopic simulation data of pedestrian movement in space .",
    "to each tracked pedestrian , we have assigned a virtual pedestrian in the simulation domain .",
    "we have then started a simulation for @xmath38 seconds , in which one pedestrian @xmath1 was moved according to a simulation of the social force model , while the others were moved exactly according to the trajectories extracted from the videos .",
    "this procedure was performed for all pedestrians @xmath1 and for several different starting times @xmath39 , using a fixed parameter set for the social force model .",
    "each simulation run was performed according to the following scheme :    1 .",
    "define a starting point and calculate the state ( position @xmath40 , velocity @xmath4 , and acceleration @xmath41 ) for each pedestrian @xmath1 .",
    "2 .   assign a desired speed @xmath42 to each pedestrian . in our simulations , we have specified it by the maximum speed @xmath43 during the pedestrian s tracking time , which is sufficiently accurate if the overall pedestrian density is not too high and the desired speed is constant in time .",
    "assign a desired goal point for each pedestrian .",
    "we have assumed is would correspond to the point at the end of the trajectory .",
    "4 .   given the tracked motion of the surrounding pedestrians @xmath15 ,",
    "simulate the trajectory of pedestrian @xmath1 based on the social force model during @xmath44 seconds of time , starting at the actual location @xmath45 .",
    "after each run , we determined the relative distance error @xmath46 after averaging the relative distance errors over the pedestrians @xmath1 and starting times @xmath39 , the negative value of the result was taken as _",
    "fitness _ of the parameter set used in the pedestrian simulation .",
    "hence , the best possible value of the fitness was 0 , but any deviation from the real pedestrian trajectories would imply negative fitness values .    moreover , with the fitness measure outlined above , we have used a simple evolutionary algorithm to obtain the parameter set with the highest fitness value , which was @xmath47 .",
    "this value reflects in some sense the stochasticity and/or heterogeneity of individual behaviors . for comparison",
    ", we also made simulations with @xmath48 , i.e. without any social forces , assuming that persons will never change their velocity .",
    "this measurement resulted in a fitness value of @xmath49 .",
    "interactions among pedestrians are actually more complicated than suggested above . for example , it is know that the angle @xmath50 matters , at which two pedestrians @xmath1 and @xmath15 approach each other ( which is given by @xmath51 ) . apart from this , the step sizes and , therefore , the speeds matter as well . in the following , we will shortly discuss two anisotropic models of pedestrian interactions :    * elliptical specification i : * in ref .",
    "@xcite , a generalization of eq .",
    "( [ g ] ) was formulated , which assumed that the repulsive potential @xmath52 is an exponentially decreasing function of @xmath53 with equipotential lines having the form of an ellipse directed into the direction of motion as shown in fig .",
    "the semi - minor axis @xmath54 was determined by @xmath55 in order to take into account the length @xmath56 of the stride ( step size ) of pedestrian @xmath15 , where @xmath57 .",
    "the reason for this specification was that pedestrians require space for movement , which is taken into account by other pedestrians .",
    "the repulsive force is related to the repulsive potential via @xmath58 considering the chain rule , @xmath59 , and @xmath60 , this leads to the explicit formula @xmath61 with @xmath62 . for @xmath63 ,",
    "we regain the expression of eq .",
    "( [ g ] ) .",
    "* elliptical specification ii : * recently , a variant of this approach has been proposed @xcite , assuming @xmath64 ^ 2 } \\ , .",
    "\\label{two}\\ ] ] the special feature of this approach is its symmetrical treatment of both pedestrians @xmath1 and @xmath15 .    in order to compare the elliptical specifications with the circular one ,",
    "let us make the following thought experiments :    * _ scenario 1 : _ consider a pedestrian walking towards a wall with a given speed @xmath65 , but four different orientations @xmath66 ( with @xmath67 ) , as shown in fig .",
    "this scenario can be treated analogously to the movement relative to a standing pedestrian @xmath15 , which implies @xmath68 .",
    "+    + then , in case ii the repulsive force is a monotonously decreasing function of @xmath69 given by @xmath70 according to eq .",
    "( [ two ] ) . for all four cases ,",
    "the values of @xmath71 and @xmath72 ( the step size of pedestrian @xmath1 ) are the same , but the values of @xmath73 are different .",
    "we have @xmath74 , so that we find @xmath75 for the magnitudes of the repulsive forces triggered by the wall ( as the direction of the forces is perpendicular to the wall in all four cases . )",
    "this agrees well with experience , i.e. the anisotropic and orientation behavior of pedestrians are realistically reproduced by the elliptical force specification ii .",
    "in contrast , the elliptical model i implies @xmath76 according to eq .",
    "( [ one ] ) and predicts the same force in all four cases , as does the circular model . * _ scenario 2 : _ consider single pedestrians @xmath1 walking towards a wall , but with 2 different velocities @xmath77 as shown in fig . [ speeds ] .",
    "obviously , the elliptical specification ii predicts that the pedestrian @xmath1 with the higher speed would decelerate earlier , as expected .",
    "in contrast , the elliptical model i and the circular interaction model are insensitive to the own speed @xmath65 . +    * _ scenario 3 : _ consider the case of two pedestrians walking towards each other with different velocities @xmath78 , as shown in fig .  [ towards ] .",
    "+    + while the circular interaction force does not imply any velocity - dependence of pedestrian behavior , the elliptical formulations do , which is certainly more realistic .",
    "the first elliptical model assumes a velocity - dependence of pedestrian interactions , but no sensitivity with respect to the _ own _ speed .",
    "therefore , specification ii is expected to be more realistic .    for the above reasons",
    ", we will not consider the elliptical specification i anymore , but focus on the elliptical model ii .",
    "figure  [ fig_3 ] represents the resulting fitness values as a function of the choice of the interaction strength @xmath35 and the interaction range @xmath36 , assuming @xmath79 .     and",
    "@xmath36 , when pedestrian trajectories are simulated with the social force model and the the force specification ( [ g ] ) . the darker the shade , the better the fitness is , for the corresponding combination of @xmath35 and @xmath36 values.,scaledwidth=75.0% ]    .optimal parameter values resulting from our evolutionary parameter optimization for three different specifications of the interaction forces between pedestrians ( see main text ) the parameter calibration was based on the 3 video recordings mentioned in fig .  [ fig1 ] and the fundamental diagram of weidmann ,",
    "( [ weidmann ] ) . [ cols=\"<,^,^,^,>\",options=\"header \" , ]     one result of our parameter optimization was that , for each video , there was actually a broad range of parameter combinations of @xmath35 and @xmath36 which performed almost equally well , while the optimal value of the anisotropy parameter was @xmath80 .",
    "this allowed us to apply additional goal functions in our optimization .",
    "we used this fact to determine among the best performing parameter values such parameter combinations , which performed well for _ all three _ video recordings , using a fitness function which weighted the fitness reach in each single video equally ( i.e. with a factor 1/3 ) .",
    "the resulting parameters are listed in table  [ tab ] .",
    "the parameters corresponding to the best fitness value , i.e. the elliptical specification ii with @xmath81 , were used in a microscopic simulation with periodic foundary conditions , and the resulting fundamental diagram , is shown in fig .",
    "[ fundcomp ] .",
    "the solid line is the weidmann curve , eq .",
    "( [ weidmann ] ) , note that , with additional fine tuning , it will be possible to make an even better fit to the weidmann fundamental diagram , but here we rather just show that extracting parameters from videos and perform a microscopic simulation will correspond to dynamics close to the empirical flow - density relation .",
    "we would , however , like to mention that further velocity - dependent specifications of pedestrian interaction forces were proposed in the past , for example , by molnr ref .",
    "@xcite , okazaki @xcite , hoogendoorn @xcite , and yu @xcite .",
    "although , from a theoretical perspective , velocity - dependent force specifications are more promising than the circular interaction force introduced in the beginning , it turns out that the prediction of pedestrian motion does not become a lot better by including additional , speed - dependent parameters .",
    "this is illustrated by the fitness values in table [ tab ] .",
    "obviously , the deviation of the fitness value from 0 is mainly caused by the heterogeneity of pedestrian behaviors .",
    "a similar conclusion has been drawn from studies specifying behavioral parameters in different car - following models @xcite .",
    "our evolutionary fitting method can be also used to determine interaction laws without prespecified interaction functions .",
    "for example , one can determine the angular dependence of pedestrian interaction directly . in order to do this ,",
    "we have chosen an approach using a polygon with @xmath82 edges in the directions @xmath83 $ ] .",
    "the distance of the curve in direction @xmath84 from the origin represents the ( relative ) angular interaction strength @xmath85 with a maximum value of 1 .",
    "to get some smoothness , linear interpolation has been applied between each of the edges .",
    "figure [ fig4 ] shows the angular dependence of the interaction strength determined from pedestrian trajectories .",
    "apparently , pedestrians are only sensitive to what happens inside an @xmath86 degree angle in front of him or her , which roughly corresponds to the visually perceived area .",
    "axis corresponds to the walking direction of the pedestrian , @xmath87 to the perpendicular direction.,scaledwidth=75.0% ]      in a similar way , we have determined the distance dependence of pedestrian interactions without a pre - specified function . for this , we have adjusted the values of the force at given distances @xmath88 ( with @xmath89 ) in an evolutionary way .",
    "the resulting fit curve is presented in fig .",
    "[ expo ] . according to our results ,",
    "the empirical dependence of the force with distance can be well fitted by an exponential decay , as assumed before .",
    "note that similar studies have been carried out for vehicle interactions , recently @xcite .",
    "however , the situation for pedestrians is more difficult due to their two - dimensional motion .",
    "therefore , our evolutionary fitting procedure seems to be superior to the fokker - planck approach ( or random matrix theory approach ) , which was used to calibrate vehicle interactions .     and @xmath90 .",
    "from the simulation with the circular model the resulting parameters @xmath91 are quite close.,scaledwidth=70.0% ]",
    "in the following section , we will present some examples for large - scale pedestrian simulations with the social force model . for simplicity and computational speed ,",
    "we have assumed circular pedestrian interactions , here . compared to previous implementations of the model , numerical efficiency has been increased a lot , for example by cutting off interation forces at a certain , large enough distance ( around @xmath92 m ) and book - keeping of neighboring pedestrians . in this way , the simulation of 30,000 pedestrians or more in real - time is no problem .",
    "larger crowds have been simulated off - line or using parallel computing .",
    "for example , a simulation have been performed for an evacuation of two decks of a ship connected by a staircase .",
    "the underlying study has shown that the model is also suitable for treating different personalities ( the different characteristic behaviors in emergency situations ) , complex geometries , and three - dimensional interactions @xcite .",
    "a simulation @xcite have been performed for multi - destination flows at schiphol airport in the netherlands , while @xcite have simulated the evacuation of an exhibition area , both with the social force model . for",
    "a similar simulation see fig .",
    "[ expo ] .",
    "our model has also been used to simulate pedestrian flows on the jamarat bridge , which has to cope with 3 million pilgrims within a single day ( algadhi and mahmassani , 1990 ) .",
    "figure  [ jamarat ] illustrates the scenario for the old jamarat bridge .",
    "it shows the development of zones of high density and pressure behind the previous circular basins . in the middle of each of the three basins",
    "is a pillar symbolizing the devil .",
    "these pillars are to be stoned with seven pebbles each , which takes time and delays pedestrian motion .",
    "this , in turn , can cause extreme crowding .",
    "note , however , that the situation around the pillars has significantly improved since the circular stoning areas were replaced by elliptical ones .",
    ", title=\"fig:\",width=377 ] + , title=\"fig:\",width=377 ]    as indicated before , the implementation of our pedestrian microsimulator has been optimized for efficiency and scalability in terms of computational speed and memory .",
    "it is no problem to simulate more than 30,000 pedestrians in real - time on a normal pc .",
    "parallel computing even allows one to simulate more than 100,000 pedestrians in real - time .",
    "this is suitable for the simulation of large scenarios such as pedestrian flows in extended urban areas ( see fig .",
    "[ urban ] ) or during mass events such as street parades or carnivals @xcite .",
    ", width=434 ]    in order to be suitable for scenarios of this complexity , we have developed a powerful and flexible pedestrian simulator called `` universe '' , in which we have implemented certain additional features complementing the social force model :    1 .   a powerful scenario generation module based on xml , 2 .   path finding and route choice modules to describe the selection of destinations , including spontaneous stops and impluse shopping , 3 .",
    "calibration modules to adapt simulations to real measurements , 4 .",
    "a statistics module evaluating various performance measures ( such as densities , velocities , flow efficiency , pressure , overall evacuation time , etc . ) to assess and compare different scenarios , 5 .   an optimization module based on evolutionary algorithms which allows to improve the geometrical boundary conditions of pedestrian facilities , 6 .   various visualization modes for the illustration of the simulation results , both on- and off - line , and 7 .   a functionality reflecting density - dependent herding effects",
    "tracking algorithms have become a powerful tool for empirical data evaluation , recently @xcite . in our study , we have further developed and applied this tool to determine trajectories of many interacting pedestrians .",
    "these trajectories were used to calibrate a microscopic pedestrian model , namely the social force model . for this , we have simulated single pedestrians , given the measured motion of the other pedestrians .",
    "the difference between simulated and measured pedestrian behavior has then been minimized through evolutionary variation of the model parameters .",
    "however , it was also possible to determine the distance- and angle - dependencies of the interactions directly . in this way , the previously assumed exponentially decay of the interaction strength with distance was empirically confirmed .",
    "it turned out that the simplest specification of the interaction forces in the social force model almost performed as well as velocity - dependent specifications with more parameters .",
    "we have , therefore , used the circular specification for our large - scale simulations , which is in favor of computational speed . with some simplifications for the sake of numerical performance , it is no problem to simulate scenarios with 30,000 pedestrians on - line on a normal pc .",
    "larger crowds can be simulated off - line or using parallel computing .",
    "this allows one to study pedestrian zones , convention halls , shopping malls , airports , railway stations , city festivals , etc .",
    "there are , by the way , also special algorithms for the evolutionary optimization of highly frequented areas @xcite .",
    "hence , pedestrian simulations are now a useful tool for the planning of pedestrian facilities and mass events , if properly calibrated .",
    "note , however , that that measurement and calibration results should be transfered from one place to another only with care , as the maximum flow and density values are largely influenced by the body size distribution .",
    "other factors may play a role as well , for example the age distribution , the fraction of handicapped people , the carrying of luggage , alcohol consumption , cultural habits , use of mobile phones , and the situational context @xcite ( e.g. business , leisure , sports , or religious activities ) .",
    "all of this should be taken into account in the dimensioning of pedestrian facilities , safety ( evacuation ) analyses , and the calibration of computer models .",
    "the authors would like to thank peter felten for his work with the video material and the german research foundation ( dfg project he 2789/7 - 1 ) for financial support .",
    "further on , the authors are thankful to serge hoogendoorn for providing empirical data , used to verify the results , shown in figures [ fig4 ] and [ expo ] .",
    "batty , m. , desyllas , j. , and duxbury , e. , the discrete dynamics of small - scale spatial events : agent - based models of mobility in carnivals and street parades , _ int . j. geographical information science _ * 17*(7 ) , 673 - 697 ( 2003 ) .",
    "hoogendoorn , s. p. , daamen , w. , bovy , p. h. l. , extracting microscopic pedestrian characteristics from video data , _ annual meeting transportation res .",
    "board pre - print cd - rom _ , mira digital publishing , washington , d.c ( 2003 ) .",
    "kirchner , a. , klpfel , h. , nishinari , k. , schadschneider , a. , and schreckenberg m. , discretization effects and the influence of walking speed in cellular automata models for pedestrian dynamics , _ j. stat",
    "_ p10011 ( 2004 ) .",
    "klpfel , h. , meyer - knig , t. , and schreckenberg , m. , microscopic modelling of pedestrian motion  comparison of an evacuation exercise in a primary school to simulation results , in _ traffic and granular flow 01 _ , eds .",
    "fukui , m. _ et al .",
    "_ , ( springer , berlin , 2003 ) .",
    "marinova , r. , ourdev i. , and stoilov v. , pedestrian motion in realistic virtual reality environments : application to high - rise building evacuation , in _ pedestrian and evacuation dynamics 2003 _ , eds .",
    "galea , e. r. , ( cms press , london , 2003 ) , pp . 283 - 293 .",
    "tilch , b. and helbing , d. evaluation of single vehicle data in dependence of the vehicle - type , lane , and site , in _ traffic and granular flow 99 : social , traffic , and granular dynamics _ ,",
    "d. helbing , _ et al .",
    "_ , ( springer , berlin , 2000 ) , pp .",
    "333 - 338 .",
    "willis , a. , , kukla , r. , hine , j. , and kerridge , j. , developing the behavioural rules for an agent - based model of pedestrian movement , presented at the 25@xmath93 european transport congress , cambridge , uk ( 2000 ) ."
  ],
  "abstract_text": [
    "<S> based on suitable video recordings of interactive pedestrian motion and improved tracking software , we apply an evolutionary optimization algorithm to determine optimal parameter specifications for the social force model . </S>",
    "<S> the calibrated model is then used for large - scale pedestrian simulations of evacuation scenarios , pilgrimage , and urban environments .    # </S>",
    "<S> 1#1 : </S>"
  ]
}