{
  "article_text": [
    "in this paper we investigate the extent to which some classical results in finite combinatorics can be transferred to the measurable setting .",
    "our main object of study will be the so - called lovsz local lemma , which we will discuss in some detail in the next subsection .",
    "here we give a `` preview '' of particular applications that our general techniques can provide .",
    "first , let us recall some definitions with its edge set ; the notation @xmath13 , common in finite combinatorics , would be in confict with @xmath14the equivalence relation whose classes are the connected components of @xmath15 . ] .",
    "a _ graph _",
    "@xmath15 with vertex set @xmath1 ( or a graph on @xmath1 ) is a symmetric irreflexive binary relation on @xmath1 . in particular ,",
    "unless stated otherwise , graphs in this paper are assumed to be undirected and simple .",
    "we call two vertices @xmath16 , @xmath17 _ adjacent _ in @xmath15 if @xmath18 .",
    "a subset @xmath19 is _",
    "@xmath15-invariant _ if no vertex in  @xmath20 is adjacent to a vertex in @xmath21 .",
    "a _ connected component _ of @xmath15 is an inclusion - minimal nonempty @xmath15-invariant subset of @xmath1 . if @xmath19 , then @xmath22 denotes the _ subgraph _ of @xmath15 _",
    "_ induced__$ ]",
    ". however , such notation would be in conflict with @xmath23_{e_g}$ ] , the @xmath15-saturation of @xmath20 .",
    "] by @xmath20 ( or , equivalently , the _ restriction _ of @xmath15 to @xmath20 ) .",
    "the _ degree _ of a vertex @xmath24 ( notation :  @xmath25 or simply @xmath26 ) is the cardinality of the set @xmath27 .",
    "the _ maximum degree _ of @xmath15 ( notation :  @xmath28 ) is the supremum of @xmath26 over all @xmath24 .",
    "a graph @xmath15 is said to be _ locally countable _ if @xmath29 ; @xmath15 is said to be _ locally finite _",
    "if @xmath30 for all @xmath24 .",
    "the _ girth _ of @xmath15 ( notation :  @xmath31 ) is the length of the shortest cycle in @xmath15 ( if @xmath15 is acyclic , @xmath32 by definition ) .",
    "a _ proper ( vertex ) coloring _ of @xmath15 is a map @xmath0 , where @xmath2 is a set of _ colors _ , such that for any two adjacent vertices @xmath16 , @xmath17 , @xmath33 .",
    "the _ chromatic number _ of @xmath15 ( notation :  @xmath34 ) is the smallest cardinality of a set @xmath2 such that @xmath15 admits a proper coloring  @xmath0",
    ".    we will be interested in the properties of borel graphs ; see @xcite for a comprehensive survey of the topic .",
    "suppose that @xmath1 is a standard borel space .",
    "a graph @xmath15 on @xmath1 is said to be _ borel _ if it is borel as a subset of @xmath35 .",
    "an important source of borel graphs are borel group actions .",
    "let @xmath8 be a countable group acting by borel automorphisms on a standard borel space @xmath1 ( in this paper we only consider left group actions ) .",
    "denote this action by @xmath36 .",
    "let @xmath37 be a generating set and define the graph @xmath38 on @xmath1 via @xmath39 then @xmath40 is locally countable and borel .    for a borel graph @xmath15 on @xmath1 , its _ borel chromatic number _",
    "( notation :  @xmath41 ) is the smallest cardinality of a standard borel space @xmath2 such that @xmath15 admits a borel proper coloring @xmath0 .",
    "borel chromatic numbers were first introduced and systematically studied by kechris , solecki , and todorcevic  @xcite . clearly , @xmath42 .",
    "one of the starting points of borel combinatorics is the observation that this inequality can be strict .",
    "in fact , kechris , solecki , and todorcevic  ( * ? ? ?",
    "* example  3.1 ) gave an example of an _ acyclic _ locally countable borel graph @xmath15 such that @xmath43 ( note that if @xmath15 is acyclic , then @xmath44 ) .",
    "however , one can show that if the maximum degree of @xmath15 is finite , then @xmath45similarly to the finite case ( where this statement is known as a special case of the szekeres  wilf theorem  @xcite ) .",
    "the bound @xmath46 is rather weak ; in fact , brooks s theorem in finite combinatorics asserts that @xmath47 for all @xmath15 apart from a few natural exceptions  ( * ? ? ?",
    "* theorem  14.4 ) .",
    "however , as it turned out , there is no hope for any result along those lines in the borel setting : marks  ( * ? ? ?",
    "* theorem  1.3 ) showed that the borel chromatic number of an acyclic borel graph @xmath15 with maximum degree @xmath48 can attain the value @xmath49 ( and , in fact , _ any _ value between @xmath12 and @xmath49 ) .",
    "marks s results indicate that the borelness condition is too restrictive to allow any interesting analogs of classical coloring results .",
    "it is reasonable , therefore , to try asking for somewhat less .",
    "for instance , we can only require that `` most '' of the graph should be colored , in an appropriate sense of the word `` most . ''",
    "natural candidates for such a notion of largeness are baire category and measure .",
    "if @xmath50 is a polish topology on @xmath1 that is compatible with the borel structure on @xmath1 , then the _ @xmath50-baire - measurable chromatic number _ of @xmath15 is defined as follows : @xmath51 similarly , if @xmath4 is a probability borel measure on @xmath1 , then the _ @xmath4-measurable chromatic number _ of @xmath15 is defined to be @xmath52    just like @xmath41 , @xmath53 and @xmath54 can both exceed @xmath34 , even for locally finite acyclic graphs . a simple example is given by the graph @xmath55 , where @xmath56 is an irrational rotation action of @xmath57 on the unit circle  @xmath58 .",
    "note that each connected component of @xmath15 is a bi - infinite path , so @xmath15 is acyclic .",
    "however , an easy ergodicity argument reveals that both @xmath53 and @xmath54 are greater than  @xmath12 , where @xmath50 is the usual topology on @xmath58 and @xmath4 is the lebesgue probability measure on @xmath58 .",
    "in fact , since @xmath59 , @xmath60 .",
    "nevertheless , conley and miller  ( * ? ? ?",
    "* theorem  b ) showed that @xmath53 can not differ from @xmath34 too much ; namely , they proved that for a locally finite borel graph @xmath15 on a standard borel space @xmath1 , if @xmath34 is finite , then @xmath61 with respect to any compatible polish topology @xmath50 on  @xmath1 .",
    "in particular , if @xmath15 is acyclic ( or , more generally , @xmath44 ) , then @xmath62",
    ".    our main focus in this paper will be on @xmath4-measurable chromatic numbers ( and @xmath4-measurable analogs of other combinatorial parameters ) .",
    "here the situation is more intriguing than with baire - measurable chromatic numbers .",
    "conley , marks , and tucker - drob  ( * ? ? ?",
    "* theorem  1.2 ) recently proved a @xmath4-measurable analog of brooks s theorem for graphs with maximum degree at least @xmath63 ( the example of an irrational rotation action shows that brooks s theorem for graphs with maximum degree @xmath12 does not hold in the measurable setting ) .",
    "in particular , @xmath54 can be _ strictly less _ than @xmath41 .    on the other hand , in contrast to @xmath53 , @xmath54 _",
    "can not _ be bounded above by any function of  @xmath34 . an important class of examples where the difference between @xmath54 and @xmath34 gets arbitrarily large comes from shift actions of free groups . for a countable group @xmath8 and a set  @xmath2 ,",
    "the _ _ shift action__. ] of @xmath8 on @xmath64 ( or the _ @xmath2-shift action _ of @xmath8 ) is defined as follows : for all @xmath65 , @xmath66 and  @xmath67 , let @xmath68 let @xmath69 be a finite set and let @xmath70 denote the free group over @xmath69 .",
    "let @xmath71^{{\\mathbb{f}}(s)}$ ] be the shift action of @xmath70 on @xmath7^{{\\mathbb{f}}(s)}$ ] and let @xmath72 .",
    "let @xmath73 denote the lebesgue measure on @xmath7 $ ] ( we will use this notation throughout ) .",
    "then , off of a @xmath74-null set , the action @xmath75 is free , so each connected component of @xmath15 is an infinite @xmath76-regular tree , and hence it is @xmath12-colorable .",
    "however , as lyons and nazarov  @xcite pointed out , a result of frieze and uczak  @xcite implies that @xmath77 for sufficiently large @xmath78 ( see also  ( * ? ? ?",
    "* theorem  5.44 ) , where this lower bound is proved for arbitrary @xmath69 ) .",
    "in particular , @xmath79 as @xmath80 . note that the group @xmath70 for @xmath81 is nonamenable ; in fact , conley and kechris  @xcite mention that there are no known examples of graphs  @xmath15 induced by probability measure - preserving actions of amenable groups such that @xmath82 ( see  ( * ? ? ?",
    "* problem  5.19 ) ) .",
    "note that the best known _ upper _ bound on @xmath83 is @xmath76 ( given by the measurable brooks s theorem ) , so the orders of magnitude of the lower and upper bounds are different . lyons and nazarov  @xcite asked what the correct value of @xmath83 should be . as an immediate corollary of one of our main results ( namely theorem  [ theo : thm1 ] ) , we can show that @xmath84 is the right order .",
    "in fact , we have the following general theorem :    [ theo : col_large_g ] let @xmath8 be a countable group with a finite generating set @xmath37 ; denote @xmath85 .",
    "let @xmath86 be a measure - preserving action of @xmath8 on a standard probability space  @xmath87 and let @xmath88 .",
    "suppose that there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] . if @xmath90 , then @xmath91 moreover , if @xmath92 , then @xmath93    [ corl : colfree ] let @xmath69 be a finite set of size @xmath94 , let @xmath95^{{\\mathbb{f}}(s)}$ ] be the @xmath7$]-shift action of the free group @xmath70 , and let @xmath88 .",
    "then @xmath96    note that , by a result of bowen  ( * ? ? ?",
    "* theorem  1.1 ) , any two nontrivial is said to be _ nontrivial _ if it is not concentrated on a single point .",
    "] shift actions of @xmath70 , where @xmath81 , admit factor maps into each other , so holds for any such action as well .",
    "another extensively studied graph parameter is the so - called chromatic index of a graph .",
    "let @xmath15 be a graph with vertex set @xmath1 .",
    "an _ edge coloring _ of @xmath15 is a map @xmath97 such that for all @xmath16 , @xmath17 with @xmath18 , @xmath98 .",
    "an edge coloring @xmath3 is _ proper _ if for all @xmath16 , @xmath99 , @xmath100 with @xmath101 , @xmath102 , and @xmath103 , @xmath104 .",
    "the _ chromatic index _ of @xmath15 ( notation : @xmath105 ) is the smallest cardinality of a set @xmath2 such that @xmath15 admits a proper edge coloring @xmath97 .",
    "clearly , @xmath106 , since all the edges incident to a vertex @xmath24 have to receive distinct colors . a celebrated theorem of vizing  ( * ? ? ?",
    "* theorem  17.4 ) asserts that this bound is almost tight ; namely , for a finite graph @xmath15 , @xmath107 .",
    "naturally , for a borel graph @xmath15 on a standard borel space @xmath1 , its _ borel chromatic index _ ( notation : @xmath108 ) is defined to be the smallest cardinality of a standard borel space @xmath2 such that @xmath15 admits a borel proper edge coloring @xmath97 ( where @xmath15 inherits its borel structure from  @xmath35 ) . clearly , @xmath109 . in the aforementioned paper  ( * ? ? ?",
    "* theorem  1.4 ) , marks showed that the borel chromatic index of an acyclic borel graph @xmath15 with maximum degree @xmath110 can be as large as @xmath111 ( and this bound is tight  finding a proper edge coloring of a graph with maximum degree @xmath94 is equivalent to finding a proper _ vertex _ coloring of an auxiliary graph with maximum degree @xmath112 ) .",
    "one can define the @xmath4-measurable chromatic index of a borel graph @xmath15 by analogy with its @xmath4-measurable chromatic number ; namely , @xmath113 cska , lippner , and  pikhurko  ( * ? ? ?",
    "* theorem  1.4 ) proved that vizing s theorem holds measurably for bipartite graphs and that @xmath114 in general , provided that the measure @xmath4 is @xmath15-invariant .",
    "theorem  [ theo : thm1 ] gives a different proof of the second part of this result for graphs induced by shift actions ( with a slightly worse lower order term ) ; moreover , it implies the following `` list version '' :    [ theo : freeedge ] for every @xmath110 , there exists @xmath115 such that the following holds .",
    "let  @xmath8 be a countable group with a finite generating set @xmath37 such that @xmath116 . for each @xmath117 , let @xmath118 be a finite set such that for all @xmath117 , @xmath119 and @xmath120 .",
    "let @xmath86 be a measure - preserving action of @xmath8 on a standard probability space @xmath87 and let @xmath88 .",
    "suppose that there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] .",
    "then there exists a @xmath8-invariant @xmath4-conull borel subset @xmath19 and a borel proper edge coloring @xmath3 of @xmath121 such that for all @xmath122 , @xmath123 .",
    "one can further relax the conditions on a coloring to allow a small ( but positive ) margin of error .",
    "let @xmath15 be a graph with vertex set @xmath1 .",
    "for a map @xmath0 , define the _ defect _ set  @xmath124 by @xmath125 in other words , a vertex @xmath16 belongs to @xmath126 if and only if it shares a color with at least one of its neighbors . if the graph @xmath15 is borel , then a borel map @xmath0 is a _",
    "@xmath127-approximately proper borel coloring _ of @xmath15 if @xmath128 .",
    "is analytic ( and hence universally measurable ) , so this definition makes sense .",
    "moreover , if @xmath15 is locally countable , then @xmath126 is actually borel . ]",
    "the _ @xmath4-approximate chromatic number _ of @xmath15 ( notation :  @xmath129 ) is the smallest cardinality of a standard borel space @xmath2 such that for every positive @xmath130 , there is a @xmath127-approximately proper borel coloring @xmath0 of @xmath15 .",
    "approximate chromatic numbers were studied extensively by conley and kechris  @xcite . of measure",
    "at least @xmath131 such that @xmath132 is a proper coloring of @xmath121 .",
    "however , the two definitions are easily seen to be equivalent when @xmath28 is finite and @xmath4 is @xmath15-invariant . ] in particular , conley and kechris proved that if @xmath15 is induced by a measure - preserving action of a countable _ amenable _ group , then its @xmath4-approximate chromatic number is essentially determined by the ordinary chromatic number ; more precisely , for such @xmath15 , @xmath133 however , the lower bound @xmath134 , where @xmath71^{{\\mathbb{f}}(s)}$ ] is the shift action of the free group @xmath70 over a finite set @xmath69 , still holds .",
    "similarly , for an edge coloring @xmath97 , let @xmath135 be given by @xmath136 in other words , @xmath137 if and only if it is incident to an edge that shares an endpoint with another edge of the same color .",
    "the definition of the _ @xmath127-approximate chromatic index _ of a borel graph @xmath15 is analogous to that of @xmath129 . as a corollary of our other general result ( namely theorem  [ theo : approxlll ] )",
    ", theorems  [ theo : col_large_g ] and [ theo : freeedge ] can be generalized to _",
    "arbitrary _ borel graphs in the context of approximate colorings .",
    "[ theo : approxvertex ] let @xmath15 be a borel graph on a standard borel space @xmath1 and suppose that @xmath138 .",
    "let @xmath4 be a probability borel measure on @xmath1 . if @xmath90 , then @xmath139 moreover , if @xmath92 , then @xmath140    [ theo : approxedge ] let @xmath15 be a borel graph on a standard borel space @xmath1 and suppose that @xmath138 .",
    "let @xmath4 be a probability borel measure on @xmath1 .",
    "then @xmath141      the lovsz local lemma ( the lll for short ) is an immensely useful combinatorial tool developed by erds and lovsz in their seminal paper  @xcite . the lovsz local lemma is usually stated in probabilistic terms . however , it will be more convenient for us to use the following ( equivalent ) measure - theoretic version .",
    "[ theo : lll ] let @xmath1 be a standard borel space and let @xmath4 be a probability borel measure on @xmath1 .",
    "let @xmath142 be a finite family of borel ( or , more generally , @xmath4-measurable ) subsets of  @xmath1 . for each @xmath143 ,",
    "let @xmath144 be a subset of @xmath142 such that @xmath145 and @xmath146 is independent from the algebra generated by @xmath147 .",
    "suppose that there is a function @xmath148 such that for every @xmath143 , we have @xmath149 then @xmath150    the  lll is commonly used in order to prove combinatorial existence results . in a typical application of the lll ,",
    "one attempts to find a map ( a `` coloring '' ) @xmath0 , where @xmath1 is a finite set , subject to certain `` local '' constraints .",
    "the strategy is to put a suitable probability measure on @xmath2 and choose @xmath3 randomly from @xmath151 according to the product probability measure .",
    "if the requirements of the lll are fulfilled , then the set of acceptable @xmath152 has positive measure and hence is nonempty . since for each @xmath24",
    ", @xmath153 in such situation can be viewed as a random variable with values in @xmath2 and these variables are mutually independent , this framework is sometimes referred to as the _ variable version _ of the lll ( the name is due to kolipaka and szegedy  @xcite ) .",
    "let us now state the variable version of the lll formally . for sets",
    "@xmath1 and @xmath2 , @xmath154^{<\\infty}$ ] denotes the set of all nonempty finite subsets of @xmath1 and @xmath154^{<\\infty}_y$ ] denotes the set of all functions @xmath155 , where @xmath156^{<\\infty}$ ] . for @xmath157_y^{<\\infty}$ ] and @xmath156^{<\\infty}$ ] , let @xmath158 .",
    "an _ instance ( of the lll ) _ over a set @xmath1 is a subset @xmath157_{[0;1]}^{<\\infty}$ ] such that for each @xmath156^{<\\infty}$ ] , the set @xmath159^s$ ] is borel .",
    "( note that so far we have only assumed that @xmath1 is a set with no additional structure on it ; however , @xmath160 is a subset of the standard borel space @xmath7^s$ ] , so the above definition makes sense . )",
    "the _ domain _ of an instance @xmath146 is the set @xmath161^{<\\infty}\\,:\\ , b_s\\neq { \\emptyset}\\}.\\ ] ] we say that @xmath146 is _ locally countable _ if for each @xmath24 , the set @xmath162 is countable .",
    "an instance @xmath146 is said to be _ correct _ if it is locally countable and there is a function @xmath163 such that for all @xmath164 , @xmath165 where @xmath73 denotes the lebesgue measure on @xmath7 $ ] .",
    "( the local countability of @xmath146 ensures that the product on the right - hand side of makes sense . )",
    "note that if @xmath166 satisfies , then , without loss of generality , we may assume that @xmath167 whenever @xmath168 .",
    "solution _ for an instance @xmath146 is a function @xmath169 $ ] such that @xmath170 for all @xmath164 .",
    "[ corl : lllvbls ] let @xmath1 be a finite set and let @xmath146 be a correct instance over @xmath1 .",
    "then there exists a solution @xmath3 for @xmath146 .    for each @xmath164 , we will abuse notation and denote by @xmath160 the set of all maps @xmath169 $ ] with @xmath171 .",
    "let @xmath172 .",
    "for each @xmath164 , define @xmath173 let @xmath163 be a function witnessing the correctness of @xmath146 .",
    "it is easy to see that , after setting @xmath174 , the conditions of the lll are fulfilled , so @xmath175^x \\setminus \\bigcup_{s \\in { \\operatorname{dom}}(b)}b_s\\right ) > 0.\\ ] ] in particular , the set @xmath7^x",
    "\\setminus \\bigcup_{s \\in { \\operatorname{dom}}(b)}b_s$ ] is nonempty , as desired .",
    "kun  ( * ? ? ?",
    "* lemma  13 ) observed that , in fact , the statement of corollary  [ corl : lllvbls ] also holds for _ arbitrary _",
    "@xmath1 :    [ theo : lllvbls ] let @xmath1 be a set and let @xmath146 be a correct instance over @xmath1 .",
    "then there exists a solution @xmath3 for @xmath146 .",
    "the main ingredient in the proof of theorem  [ theo : lllvbls ] is the effective approach to the  lll developed by moser and tardos  @xcite .",
    "since it will also play a key role in our investigation , we will present the main tools of the moser ",
    "tardos theory in section  [ section : mosertardos ] . for instances",
    "@xmath146 appearing in concrete combinatorial applications can often be derived from corollary  [ corl : lllvbls ] through a compactness argument , since the sets @xmath160 for @xmath156^{<\\infty}$ ] can typically be arranged to be open . however , a different argument is required in general . ]",
    "[ remk : ] the definition of an instance can be naturally generalized to include subsets of  @xmath154^{<\\infty}_y$ ] for standard probability spaces @xmath176 other than @xmath177 , \\lambda)$ ] .",
    "for example , in combinatorial applications the space @xmath2 is usually taken to be discrete .",
    "however , any standard probability space can be `` simulated '' by @xmath177 , \\lambda)$ ] , i.e. , for any standard probability space @xmath176 , there exists a borel map @xmath178 \\to y$ ] such that @xmath179 ; and , for the purposes of applying the  lll , a subset @xmath157^{<\\infty}_y$ ] can be replaced by its `` pullback '' @xmath180^{<\\infty}_{[0;1]}$ ] defined via @xmath181 therefore , we do not lose in generality when only considering subsets of @xmath154^{<\\infty}_{[0;1]}$ ] ( and it makes our notation simpler ) .",
    "for example , let @xmath182 be a @xmath183-uniform hypergraph with vertex set @xmath1 , i.e. , a collection of @xmath183-element subsets of @xmath1 , called the _",
    "edges _ of @xmath182 . a",
    "_ proper @xmath12-coloring _ of  @xmath182 is a map @xmath184 such that every edge @xmath185 contains vertices of both colors . for @xmath186^{<\\infty}_{{\\{0,1\\}}}$ ] , let @xmath187 as explained in remark  [ remk : ] , @xmath146 can be viewed as an instance over @xmath1 .",
    "note that proper @xmath12-colorings of @xmath182 are exactly the solutions for @xmath146 .",
    "therefore , to show that @xmath182 is @xmath12-colorable , it suffices to prove that @xmath146 is correct . in this case",
    "it is straightforward to check when is satisfied .",
    "after a small calculation , one recovers the following theorem due to erds and lovsz ( which was historically the first application of the lll ) .",
    "[ theo : hypcol ] let @xmath182 be a @xmath183-uniform hypergraph and suppose that every edge in @xmath182 intersects at most @xmath94 other edges . if @xmath188 , then @xmath182 is @xmath12-colorable .",
    "is @xmath12-colorable is @xmath189 for some absolute constant @xmath190 , due to radhakrishnan and srinivasan  ( * ? ? ?",
    "* theorem  4.2 ) .",
    "their proof also relies on the lll . ]    to illustrate the types of results one can get using the variable version of the lll , we describe a few other applications below .",
    "[ [ kims - and - johanssons - theorems ] ] kim s and johansson s theorems + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    suppose that @xmath15 is a graph with `` large '' girth .",
    "can we show that @xmath34 is much smaller than @xmath28 , the bound given by brooks s theorem ?",
    "it is well - known that there exist @xmath94-regular graphs with arbitrarily large girth and with chromatic number at least @xmath191 . after a series of partial results by a number of researchers  @xcite , ( * ? ? ?",
    "* section  4.6 ) , kim  @xcite proved an asymptotically sharp upper bound , which exceeds the lower bound only by a factor of @xmath12 :    [ theo : kim ] let @xmath15 be a graph with maximum degree @xmath110 .",
    "if @xmath92 , then @xmath192    shortly after that , johansson  @xcite pushed the girth requirement further down and extended kim s result ( modulo a constant factor ) to triangle - free graphs .",
    "[ theo : johansson ] let @xmath15 be a graph with maximum degree @xmath110 .",
    "if @xmath90 , then @xmath193    the proofs of kim s and johansson s theorems are examples of a particular general approach to coloring problems .",
    "the key idea is to use the lll not once , like erds and lovsz did in their proof of theorem  [ theo : hypcol ] , but several times in a sequence . on each stage",
    ", the  lll produces only a partial coloring of @xmath15but this coloring is also made to satisfy some additional requirements .",
    "these requirements allow the process to be iterated , until finally the uncolored part of the graph becomes so sparse that a single application of the lll can finish the proof . dealing with such iterated applications of the  lll will be one of the main difficulties we will have to overcome in section  [ section : groups ] .",
    "an interested reader is referred to @xcite for an excellent exposition of both proofs ; we also discuss them briefly in appendix  [ app : kjk ] ( omitting most of the details ) .",
    "[ [ kahns - theorem ] ] kahn s theorem + + + + + + + + + + + + + +    as we mentioned in subsection  [ subsection : graphcol ] , vizing s theorem asserts that if @xmath28 is finite , then @xmath107 .",
    "there are several known proofs of vizing s theorem , none of them using the  lll .",
    "an important generalization of graph coloring , so - called list coloring , was introduced independently by vizing  @xcite and erds , rubin , and taylor  @xcite .",
    "let @xmath15 be a graph with vertex set @xmath1 .",
    "a _ list assignment _ for @xmath15 is a function @xmath194 , where @xmath2 is a set and @xmath195 denotes its powerset . an _",
    "@xmath196-coloring _ of @xmath15 is a map @xmath0 such that for all @xmath24 , @xmath197 . the _ list chromatic number _ of @xmath15 ( notation : @xmath198 ) is the least @xmath183 such that @xmath15 admits a proper @xmath196-coloring whenever @xmath199 for all @xmath24 .",
    "clearly , @xmath200 since if @xmath201 for all @xmath24 , then an @xmath196-coloring is simply a coloring with @xmath2 as the set of colors .",
    "somewhat surprisingly , this inequality can be strict ; in fact , there can be no upper bound on @xmath198 in terms of @xmath34 : there exist bipartite graphs with arbitrarily large list chromatic numbers .    _ list edge colorings _ and the _ list chromatic index _",
    "@xmath202 of a graph @xmath15 are defined similarly , _",
    "mutatis mutandis_. the following conjecture is one of the major open problems in graph theory :    [ conj : list ] for every finite graph @xmath15 , @xmath203    as a partial result toward establishing the truth of conjecture  [ conj : list ] , kahn  @xcite proved the following asymptotic version of vizing s theorem for list colorings :    [ theo : kahn ] let @xmath15 be a graph with maximum degree @xmath110 .",
    "then @xmath204    what is important for us is that , in contrast to vizing s theorem , kahn s proof is based on the  lll ; in fact , it is similar to the proofs of kim s and johansson s theorems in that it uses iterated applications of the  lll to produce partial colorings with some additional `` good '' properties .",
    "note that kahn s theorem provides an lll - based proof of the bound @xmath205 for _ ordinary _ edge colorings as well .",
    "[ [ nonrepetitive - and - acyclic - colorings ] ] nonrepetitive and acyclic colorings + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    the  lll can be also applied to produce upper bounds on more `` exotic '' types of chromatic numbers .",
    "here we only mention two examples .",
    "a nonempty finite sequence @xmath206 is _ nonrepetitive _ if it can not be decomposed as @xmath207 for some finite sequences @xmath208 , @xmath209 , @xmath210 with @xmath211 ( here @xmath212 denotes concatenation of finite sequences ) .",
    "a coloring @xmath3 of a graph @xmath15 with vertex set @xmath1 is _ nonrepetitive _ if for any finite path @xmath213 ,  ,",
    "@xmath214 in @xmath15 , the sequence @xmath215 is nonrepetitive .",
    "note that a nonrepetitive coloring is , in particular , proper since if @xmath216 and @xmath217 , then the sequence @xmath218 , corresponding to the path @xmath16 , @xmath99 of length one , contains a repetition .",
    "the least number of colors necessary to color @xmath15 nonrepetitively is called the _ thue over an alphabet of size @xmath12 , thue s famous theorem  @xcite asserts that there exist arbitrarily long nonrepetitive sequnces over an alphabet of size @xmath63 .",
    "] number _ of @xmath15 and is denoted by @xmath219 .",
    "the following theorem of alon , grytczuk , hauszczak , and riordan  @xcite gives an upper bound on @xmath219 in terms of @xmath28 :    [ theo : nonrep ] let @xmath15 be a graph with maximum degree @xmath110 .",
    "then @xmath220    a proper coloring @xmath3 of a graph @xmath15 is _ acyclic _ if every cycle in @xmath15 receives at least three different colors .",
    "the least number of colors needed for an acyclic proper coloring of @xmath15 is called the _ acyclic chromatic number _ of @xmath15 and is denoted by @xmath221 . in 1976 , erds conjectured that @xmath222 ; 15 years later , alon , mcdiarmid , and reed  @xcite confirmed erds s hypothesis .",
    "[ theo : acyclic ] let @xmath15 be a graph with maximum degree @xmath110 .",
    "then @xmath223    each one of theorems  [ theo : nonrep ] and  [ theo : acyclic ] is proved by a single application of theorem  [ theo : lllvbls ] to a carefully constructed correct instance .",
    "this paper addresses the following natural question : suppose @xmath87 is a standard probability space and @xmath146 is a correct instance over @xmath1 . when can we guarantee that there is a `` large '' ( in  terms of @xmath4 ) borel subset of @xmath1 on which @xmath146 admits a borel solution ?    in our investigation , we will rely heavily on the effective proof of the variable version of the  lll due to moser and tardos  @xcite .",
    "the original motivation behind moser and tardos s work was to develop an effective randomized algorithm which , given a correct instance @xmath146 over a finite set @xmath1 , finds a solution for @xmath146 .",
    "it turns out that the moser ",
    "tardos algorithm naturally extends to the case when @xmath1 is infinite . in section  [ section : mosertardos ]",
    "we describe ( a generalized version  of ) the moser  tardos algorithm and consider its behavior in the borel setting .    by definition ,",
    "an instance over a set @xmath1 is a set of constraints put on a map @xmath169 $ ] .",
    "for example , if @xmath1 is the vertex set of a graph  @xmath15 , then solving instances over @xmath1 can help us to find vertex colorings of @xmath15 with certain properties .",
    "however , sometimes we want to consider maps defined on the edges of  @xmath15 ( i.e. , edge colorings ) or maybe on some other combinatorial structures constructed from  @xmath15 ( such as paths of length @xmath12 , or cycles , etc . )",
    ". additionally , even when looking for vertex colorings , we sometimes want to assign to each vertex several colors at once , which can be viewed as replacing each element of  @xmath1 by countably many `` copies '' of it and coloring each `` copy '' independently . in order to cover all potential combinatorial applications , we enlarge the set @xmath1 , adding points for various combinatorial data that can be built from the elements of @xmath1 .",
    "we call the resulting `` universal '' combinatorial structure the _ amplification _ of @xmath1 and denote it by @xmath224 ( here the letters `` hf '' stand for `` hereditarily finite '' ) .",
    "the construction of @xmath224 is described in section  [ sec : hf ] .",
    "all our results are stated for instances over @xmath224 ; however , to simplify the current discussion , we will only be talking about instances over @xmath1 in this subsection .",
    "our first main result is the approximate borel  lll , which we state and prove in section  [ sec : approx ] .",
    "let @xmath87 be a standard probability space .",
    "suppose that @xmath146 is a correct borel instance over  @xmath1 .",
    "we can measure how well a function @xmath169 $ ] solves @xmath146 by looking at its _ defect _ , i.e. , the set @xmath225 theorem  [ theo : approxlll ] , the approximate borel  lll , asserts that for every @xmath226 , there is a borel map @xmath169 $ ] such that @xmath227 , provided that @xmath146 is _ locally finite _",
    ", i.e. , for all @xmath24 , the set @xmath228 is finite .",
    "most ( but not all ) standard applications of the  lll only consider locally finite instances . of the examples listed in subsection  [",
    "subsection : lll ] , theorems  [ theo : hypcol ] , [ theo : kim ] , [ theo : johansson ] , and [ theo : kahn ] only use locally finite instances ; in particular , theorem  [ theo : approxlll ] immediately yields theorems  [ theo : approxvertex ] and [ theo : approxedge ] on approximate chromatic numbers of borel graphs . on the other hand ,",
    "theorems  [ theo : nonrep ] and [ theo : acyclic ] apply the  lll to non - locally finite instances : there can be infinitely many paths or cycles passing through a given vertex in a locally finite graph .",
    "we would like to point out that in their recent work  @xcite , which was carried out independently of this one , cska , grabowski , mth , pikhurko , and tyros use an approach similar to ours in order to establish a _",
    "version of the  lll for the class of instances satisfying stronger finiteness assumptions ( namely having uniformly subexponential growth ) .",
    "our second main result is the measurable version of the lll for probability measure - preserving actions of countable groups , which we present in section  [ section : groups ] .",
    "it shows that under certain additional restrictions on the instance @xmath146 , we can find a borel solution that works on a _ conull _ subset  even if @xmath146 is not locally finite . to motivate these restrictions ,",
    "consider a graph @xmath15 with vertex set @xmath1 .",
    "combinatorial problems related to @xmath15 usually require solving instances of the  lll that possess the following two properties :    1 .",
    "the correctness of a solution can be verified separately within each connected component of @xmath15 ; for example , @xmath0 is a proper coloring of @xmath15 is and only if @xmath229 is a proper coloring of @xmath230 for each connected component @xmath231 of @xmath15 ; 2 .",
    "the instance only depends on the graph structure of @xmath15 ; in other words , it is invariant under the ( combinatorial ) automorphisms of @xmath15 .    to capture these two properties",
    ", we will introduce the notion of an _ isomorphism structure _",
    "@xmath232 on an equivalence relation @xmath233 on a set @xmath1 . roughly speaking , an isomorphism structure on @xmath233 is a collection of bijections of the form @xmath234 , where @xmath235 and @xmath236 are contained entirely within @xmath233-classes , which can be thought of as isomorphisms between certain substructures of  @xmath1 .",
    "for example , if @xmath15 is a graph with vertex set @xmath1 and @xmath14 is the equivalence relation whose classes are the connected components of @xmath15 , then the set @xmath237 of all isomorphisms between connected components of @xmath15 is an isomorphism structure on @xmath14 .",
    "similarly , if @xmath36 is an action of a countable group @xmath8 on @xmath1 and @xmath238 is the corresponding orbit equivalence relation , then the set of all @xmath8-equivariant bijections between orbits forms an isomorphism structure on  @xmath238 , which we denote by @xmath239 .",
    "now , let @xmath86 be a measure - preserving action of a countable group @xmath8 on a standard probability space @xmath87 that admits a factor map to the @xmath7$]-shift action of @xmath8 .",
    "cosider a correct borel instance @xmath146 over @xmath1 such that ( a ) if @xmath164 , then @xmath69 is contained entirely within a single orbit ; and ( b ) @xmath146 is invariant under @xmath239 . a part of theorem  [ theo : thm1 ] ( lemma  [ lemma : main ] , to be precise ) asserts that such @xmath146 admits a borel solution on an invariant conull borel subset of @xmath1",
    "this is enough to conclude that graphs of the form @xmath240 , where @xmath37 is a generating set , satisfy measurable analogs of theorems  [ theo : nonrep ] and [ theo : acyclic ] .",
    "however , to prove theorems  [ theo : col_large_g ] and [ theo : freeedge ] , a stronger measurable version of the  lll is needed : as we discussed in subsection  [ subsection : lll ] , the proofs of their combinatorial counterparts ( namely theorems  [ theo : kim ] , [ theo : johansson ] , and [ theo : kahn ] ) require solving several instances of the  lll in a sequence , where each next instance is built _ using the solution of the previous one_. in other words , even though the very first instance @xmath241 is @xmath239-invariant , as long as we find a solution @xmath3 for it , the next instance @xmath242 will be invariant only under those maps from @xmath239 that preserve the value of  @xmath3 .    to formalize this complication , we define the _ lll game _ between two players . on his first turn",
    ", player  i chooses an @xmath239-invariant correct borel instance @xmath241 .",
    "player  ii responds ( if he can ) by choosing a borel ( partial , i.e. , defined on a @xmath8-invariant conull subset ) solution @xmath243 for  @xmath241 .",
    "next , player  i chooses a new correct borel instance @xmath242 , this time only invariant under those maps from @xmath239 that preserve  @xmath243 .",
    "player  ii has to respond by finding a borel ( partial ) solution @xmath244 for  @xmath242 . on step  2 ,",
    "player  i chooses a correct instance @xmath245 invariant under the bijections from @xmath239 that preserve both @xmath243 and @xmath244 , etc .",
    "the actual statement of theorem  [ theo : thm1 ] is that player  ii has a winning strategy in this game .",
    "finally , we turn to the following question : is it necessary to assume that @xmath75 admits a factor map to the @xmath7$]-shift action in order to establish theorem  [ theo : thm1 ] , or is this assumption just an artifact of our proof ? in section  [ section : converse ] ( theorems  [ theo : thm2 ] and [ theo : thm2bis ] ) we show that this assumption is , in fact , necessary , at least for actions of amenable groups .",
    "indeed , we prove that a probability measure - preserving free ergodic action @xmath86 of a countably infinite amenable group @xmath8 satisfies the measurable version of the  lll _ if and only if _ it admits a factor map to the shift action @xmath246^\\gamma , \\lambda^\\gamma)$ ] .",
    "moreover , we show that for actions that do not admit such a factor map , even a much weaker version of the  lll than the one in theorem  [ theo : thm1 ] fails .",
    "theorems  [ theo : thm2 ] and [ theo : thm2bis ] also show that the local finiteness assumption in theorem  [ theo : approxlll ] is necessary .",
    "we use @xmath247 to denote the set of all nonnegative integers .",
    "our standard references for descriptive set theory are  @xcite and  @xcite .",
    "below we only list the most basic facts and terminology used throughout the paper without mention .    a _ standard borel space _",
    "@xmath248 is a set @xmath1 together with a @xmath249-algebra @xmath250 of _ borel sets _ such that there is a compatible polish ( i.e. , separable completely metrizable ) topology @xmath50 on @xmath1 with @xmath250 as its @xmath249-algebra of borel sets .",
    "we will suppress the notation for the @xmath249-algebra and denote a standard borel space @xmath248 simply by @xmath1 .",
    "a function @xmath0 between standard borel spaces @xmath1 and @xmath2 is _ borel _ if @xmath3-preimages of borel subsets of @xmath2 are borel in @xmath1 . due to the borel isomorphism theorem  ( * ? ? ?",
    "* theorem  13.10 ) , all countable standard borel spaces are discrete and all uncountable ones are isomorphic to each other .",
    "we use @xmath251 to denote the set of all probability borel measures on a standard borel space @xmath1 .",
    "if @xmath252 , then the pair @xmath87 is called a _ standard probability space_. a measure @xmath252 is _ atomless _ if @xmath253 for all @xmath24 .",
    "the measure isomorphism theorem  ( * ? ? ?",
    "* theorem  10.6 ) asserts that all standard probability spaces @xmath87 with atomless @xmath4 are borel isomorphic .",
    "if @xmath1 is a standard borel space and @xmath19 is a borel set , then we view @xmath254 as a subset of  @xmath251 . in particular , if @xmath255 , then we also use @xmath4 to denote the extension of @xmath4 to  @xmath1 ( i.e. , the pushforward @xmath256 of @xmath4 under the inclusion map @xmath257 ) ; similarly , if @xmath252 and @xmath20 is @xmath4-conull , then we use @xmath4 to denote the restriction of @xmath4 to @xmath20 . the lebesgue measure on the unit interval",
    "@xmath7 $ ] is denoted by @xmath73 .",
    "a subset @xmath258 of a standard borel space @xmath1 is _ analytic _ if it is an image of a borel set under a borel function . informally , a set is analytic if it can be defined using existential ( but not universal ) quantifiers .",
    "analytic subsets of @xmath1 are universally measurable ,",
    "i.e. , @xmath4-measurable for every @xmath252  ( * ? ? ?",
    "* corollary  14.10 ) .",
    "the complement of an analytic set is said to be _",
    "co - analytic_. if a set is both analytic and co - analytic , then it is borel  ( * ? ? ?",
    "* corollary  12.7 ) .    recall that for a set @xmath1 , @xmath154^{<\\infty}$ ] denotes the set of all nonempty finite subsets of @xmath1 .",
    "if  @xmath1 is a standard borel space , then @xmath154^{<\\infty}$ ] is also naturally equipped with a standard borel structure .",
    "one way to see this is to notice that if @xmath50 is a compatible polish topology on @xmath1 , then @xmath154^{<\\infty}$ ] is a borel subset of @xmath259 , the polish space of all compact subsets of @xmath260 equipped with the vietoris topology  ( * ? ? ?",
    "* subsection  3.d ) . for a standard borel space @xmath1",
    ", there is a borel map @xmath261^{<\\infty } \\to x$ ] such that for all @xmath156^{<\\infty}$ ] , @xmath262 ; for example , if @xmath263 is a borel linear order on @xmath1 ( which exists due to the borel isomorphism theorem ) , then the function @xmath264 is borel .    for sets @xmath1 , @xmath2 , elements @xmath24 , @xmath265 , and a subset @xmath266 ,",
    "we use the following notation : @xmath267 @xmath268    the following fundamental result is used without mention :    let @xmath1 , @xmath2 be standard borel spaces and let @xmath266 be a borel set such that for all @xmath24 , the set @xmath269 is countable",
    ". then @xmath270 , where the sets @xmath271 are disjoint and for each @xmath272 and @xmath24 , @xmath273 .",
    "in particular , the set @xmath274 is borel .",
    "informally , the luzin ",
    "novikov theorem implies that if a set is defined only using quantifiers ranging over countable sets , then it is borel .    on a couple of occasions , we will need the following fact .",
    "[ prop : lfcoloring ] let @xmath15 be a locally finite analytic graph on a standard borel space @xmath1",
    ". then @xmath275 .",
    "let @xmath276 be a countable family of borel subsets of @xmath1 that separates points and is closed under complements and finite intersections . in particular , for any @xmath24 and @xmath277 , if @xmath69 is finite , then there is @xmath272 such that @xmath278 but @xmath279 .",
    "define a set @xmath280 as follows : @xmath281 the second line in the above definition makes it clear that the set @xmath282 is co - analytic .",
    "since for all @xmath24 , there is @xmath272 such that @xmath283 , due to the novikov separation theorem ( see  ( * ? ? ?",
    "* theorem  28.5 ) ) , there is a borel function @xmath284 such that for all @xmath24 , @xmath285 .",
    "it is easy to see that @xmath3 is a borel proper coloring of @xmath15 , as desired .",
    "one can also deduce proposition  [ prop : lfcoloring ] from the general characterization of analytic graphs with countable borel chromatic numbers due to kechris , solecki , and todorcevic  ( * ? ? ? * theorem  6.3 ) .",
    "as we mentioned in the introduction , a major role in our arguments will be played by the ideas coming from the effective proof of the variable version of the lll due to moser and tardos  @xcite . in this section",
    "we review their method and introduce some convenient notation and terminology .",
    "most of the results in this section ( apart from corollary  [ corl : summation ] ) are essentially present in  @xcite ( although moser and tardos state them in a different language ) .",
    "note that moser and tardos , motivated by algorithmic applications , only consider the case when the ground set @xmath1 is finite ; however , as kun noticed in  @xcite , most of their results generalize to the case of arbitrary @xmath1 .",
    "first we discuss informally the idea of moser and tardos s approach .",
    "suppose for a moment that @xmath1 is a finite set and @xmath146 is a correct instance over @xmath1 .",
    "we want to find a solution for @xmath146 , i.e. , a function @xmath169 $ ] with @xmath286 for all @xmath164 .",
    "let @xmath287 be a sequence of functions @xmath288 $ ] , where each @xmath289 is chosen randomly and independently from @xmath7^x$ ] ( according to the measure @xmath290 ) .",
    "set @xmath291 .",
    "if @xmath243 is itself a solution for @xmath146 , then we are done , so assume that the set @xmath292 is nonempty .",
    "now we use @xmath293 to adjust @xmath243 by changing some ( but not necessarily all ) of the values it assigns to the elements of @xmath1 .",
    "let @xmath294 be any maximal disjoint subset of @xmath295 and define @xmath296 it is easy to see that for all @xmath297^{<\\infty}$ ] , @xmath170 .",
    "this observation motivates keeping the values assigned to the elements of @xmath298 unchanged , so we set @xmath299 continuing this process , we obtain a ( finite or infinite ) sequence @xmath243 , @xmath244 , @xmath300 of maps from @xmath1 to @xmath7 $ ] .",
    "moser and tardos proved that if @xmath1 is finite , then this sequence is finite with probability  @xmath301 , meaning that for almost every choice of @xmath287 , the process eventually terminates and outputs a solution for @xmath146 .",
    "let us now proceed to formal definitions .",
    "for the rest of this section , we fix a set @xmath1 and a correct instance @xmath146 over @xmath1 .    a _ table _ is a map @xmath302^{{\\mathbb{n}}}$ ] . for @xmath24 and @xmath272 , we write @xmath303 for @xmath304 .",
    "let @xmath305 be a sequence of subsets of  @xmath306 . for all @xmath24 , let @xmath307 ; and for all @xmath272 and @xmath24 , let @xmath308 for all @xmath24 and @xmath272 , let @xmath309 .",
    "for all @xmath272 , let @xmath310 the sequence @xmath311 is a _ moser ",
    "tardos process with input @xmath312 _ if for each @xmath272 , @xmath313 is a maximal disjoint subset of @xmath314 .",
    "it is immediate from the above definition that for every table @xmath302^{{\\mathbb{n}}}$ ] , there exists a moser  tardos process with input  @xmath312 ( it can be constructed inductively by choosing each @xmath315 to be a maximal disjoint subset of  @xmath314 ) . the disjointness condition is used , in particular , to ensure that for every @xmath24 with @xmath316 , there is a _ unique _",
    "@xmath317 such that @xmath318 .",
    "[ prop : finitestep ] let @xmath305 be a moser  tardos process",
    ". for @xmath272 , let @xmath319 then for all @xmath320^{<\\infty}$ ] , @xmath321 .",
    "let @xmath320^{<\\infty}$ ] . by the definition of @xmath322 ,",
    "@xmath69 is disjoint from all @xmath323 . since @xmath313 is a maximal disjoint subset of @xmath324 , @xmath325 , i.e. , @xmath321 , as desired .",
    "suppose that @xmath305 is a moser  tardos process with input @xmath302^{{\\mathbb{n}}}$ ] . by definition ,",
    "the sequence @xmath326 is monotone increasing for all @xmath24 .",
    "we say that an element @xmath24 is _",
    "@xmath311-stable _ if the sequence @xmath326 is eventually constant .",
    "let @xmath327 be the set of all @xmath311-stable elements of @xmath1 .",
    "define @xmath328 by @xmath329 and define @xmath330 $ ] by @xmath331 then we have the following limit analog of proposition  [ prop : finitestep ] :    [ prop : infinitestep ] if @xmath305 is a moser  tardos process , then for any nonempty finite set @xmath69 of @xmath311-stable elements , @xmath170 .",
    "let @xmath332^{<\\infty}$ ] and let @xmath333 be such that for all @xmath334 and for all @xmath318 , @xmath335",
    ". then @xmath336 .",
    "note that @xmath69 is disjoint from all @xmath337 .",
    "indeed , if @xmath338 for @xmath337 , then @xmath339 ; a contradiction with the choice of @xmath340 .",
    "since @xmath341 is a maximal disjoint subset of @xmath342 , @xmath343 , i.e. , @xmath344 , as desired .    for each @xmath164",
    ", let the quantity @xmath345 be given by @xmath346 note that for all @xmath24 , @xmath347 so @xmath16 is @xmath311-stable if and only if the sum on the right - hand side of is finite .",
    "our goal therefore is to obtain sufficiently good upper bounds on the numbers @xmath348 . for this",
    "we look at certain patterns in @xmath312 .    a _ pile _ is a nonempty finite set @xmath349 of functions of the form @xmath350 with @xmath164 , satisfying the following conditions :    1 .",
    "the graphs of the elements of @xmath349 are disjoint ; in other words , for every @xmath50 , @xmath351 and @xmath352 , either @xmath353 , or else , @xmath354 ; 2 .   for each @xmath355 and @xmath356 , either @xmath357 , or else , there exists @xmath351 with @xmath358 and @xmath359 .",
    "the _ support _ of a pile @xmath349 is the set @xmath360 note that @xmath361^{<\\infty}$ ] .",
    "o0.5     for a pile @xmath349 and @xmath50 , @xmath351 , we say that @xmath362 _ supports _ @xmath50 ( notation : @xmath363 ) if there is @xmath352 with @xmath364 .",
    "a pile @xmath349 is _ neat _ if there is no sequence @xmath365 , @xmath366 ,  ,",
    "@xmath367 with @xmath368 such that @xmath369 .",
    "equivalently , @xmath349 is neat if the transitive closure of the relation @xmath370 on @xmath349 is a ( strict ) partial order .",
    "a _ top element _ in a pile @xmath349 is any @xmath355 for which there is no @xmath351 such that @xmath371 .",
    "the set of all top elements in @xmath349 is denoted by @xmath372 .",
    "note that if @xmath349 is a neat pile , then @xmath373 .",
    "the _ height _",
    "@xmath374 of a neat pile @xmath349 is the largest @xmath375 such that there is a sequence @xmath365 ,  ,",
    "@xmath367 with @xmath376 ( so necessarily @xmath377 ) .    for a table @xmath302^{{\\mathbb{n}}}$ ] and a function @xmath350 , where @xmath156^{<\\infty}$ ] , the _ @xmath312-value _ of @xmath50 is the map @xmath378 $ ] defined by @xmath379 we say that a pile @xmath349 _ appears _ in a table @xmath312 if for all @xmath355 , @xmath380 .    for @xmath164 ,",
    "let @xmath381 denote the set of all neat piles @xmath349 with @xmath382 , where the unique top element @xmath50 of @xmath349 satisfies @xmath383 .",
    "note that since @xmath146 is locally countable , @xmath381 is countable for all @xmath164 .",
    "define @xmath384 by @xmath385    the next proposition gives an upper bound on @xmath348 , where @xmath164 and @xmath311 is a moser  tardos process with input @xmath312 , in terms of @xmath69 and @xmath312 alone ( i.e. , independent of @xmath311 ) .",
    "[ prop : reduction ] let @xmath305 be a moser  tardos process with input @xmath312 and let @xmath164 .",
    "then for all @xmath272 such that @xmath386 , there is a neat pile @xmath387 of height exactly @xmath388 such that @xmath349 appears in  @xmath312 .",
    "in particular , @xmath389 .",
    "suppose @xmath390 .",
    "we construct @xmath349 as follows .",
    "let @xmath391 .",
    "for each @xmath392 , define @xmath393 inductively via @xmath394 let @xmath395 .",
    "[ claim : disjoint ] the graphs of the elements of @xmath349 are disjoint .",
    "suppose @xmath396 , @xmath397 , @xmath398 , @xmath399 , and for some @xmath400 , @xmath401 .",
    "if @xmath402 , then @xmath403 ( for @xmath404 ) , so @xmath405 and @xmath406 are distinct , hence disjoint , elements of @xmath407 . therefore , @xmath408 .",
    "since @xmath409 , we get @xmath410 ; a contradiction .    [",
    "claim : pile ] @xmath349 is a pile .",
    "thanks to claim  [ claim : disjoint ] , we only need to check that if @xmath355 , @xmath356 , and @xmath411 , then there is @xmath351 with @xmath358 and @xmath364 . indeed , suppose that @xmath412 for some @xmath413 .",
    "this means that @xmath414 . since @xmath415 for all @xmath416",
    ", there is @xmath417 such that @xmath418 and @xmath419 .",
    "therefore , there is @xmath420 with @xmath421 .",
    "in particular , @xmath422 , so @xmath423 , and we are done .",
    "[ claim : support ] let @xmath397 , @xmath398 .",
    "if @xmath400 , then @xmath424 . in particular ,",
    "if @xmath425 , then @xmath408 ; hence @xmath349 is neat .",
    "this claim follows immediately from the fact that for each @xmath24 , the sequence @xmath426 is monotone increasing .",
    "[ claim : top ] @xmath427 .",
    "in particular , @xmath387 .    due to claim",
    "[ claim : support ] , @xmath428 is a top element in @xmath349 . if @xmath412 for some @xmath429 , then for some @xmath430 , @xmath431",
    "by claim  [ claim : support ] again , @xmath432 for all @xmath433 .",
    "therefore , @xmath434 , as desired .",
    "[ claim : appears ] @xmath349 appears in @xmath312 .    indeed , by definition , for all @xmath412 , @xmath435",
    ", so we have @xmath436 , as desired .",
    "[ claim : height ] @xmath437 .",
    "claim  [ claim : support ] implies that @xmath438 . to prove that @xmath439",
    ", it is enough to show that for every @xmath429 and @xmath440 , there is @xmath441 with @xmath363 .",
    "let @xmath442 we need to show that @xmath443 .",
    "indeed , if @xmath444 , then @xmath445 . by proposition",
    "[ prop : finitestep ] , we get @xmath446 . but @xmath447 ; a contradiction .    together , claims  [ claim : disjoint][claim : height ] establish all the required properties of @xmath349 .",
    "we say that an element @xmath24 is _",
    "@xmath312-stable _ if @xmath448 due to proposition  [ prop : reduction ] , if @xmath16 is @xmath312-stable , then it is @xmath311-stable for any moser ",
    "tardos process @xmath311 with input @xmath312 .    now we are going to switch the order of summation and , instead of counting how many piles from @xmath381 appear in a given table @xmath312 , we will fix a pile @xmath349 and estimate the probability that it appears in a table @xmath312 chosen at random . note that for a given pile @xmath349 , the restriction @xmath449 fully determines whether @xmath349 appears in @xmath312 or",
    "not , so let @xmath450^{{\\operatorname{supp}}(\\mathcal{p } ) \\times { \\mathbb{n}}}$ ] denote the set such that @xmath451 it is easy to see that the set @xmath452 is borel . since the graphs of the elements of @xmath349 are disjoint , there is a simple expression for the measure of @xmath452 ; namely , we have @xmath453    the following is the fundamental result of moser  tardos theory .",
    "[ theo : mosertardos ] let @xmath164 .",
    "suppose that @xmath163 is a function witnessing the correctness of @xmath146 .",
    "then @xmath454    we defer the proof of theorem  [ theo : mosertardos ] until appendix  [ app : mosertardos ] .",
    "now we have the following corollary :    [ corl : summation ] for all @xmath24 , we have @xmath455    let @xmath456 witness the correctness of @xmath146 .",
    "due to theorem  [ theo : mosertardos ] , it suffices to check that the sum @xmath457 is finite .",
    "we may assume that @xmath167 whenever @xmath168 .",
    "if for all @xmath458 , @xmath168 , then the sum is @xmath459 ( hence finite ) . otherwise , for some @xmath460 , @xmath461 , and thus the correctness of @xmath146 implies @xmath462 therefore , @xmath463 in particular , for all but finitely many @xmath458 , @xmath464 , so @xmath465 hence , the sum is finite , as desired .",
    "the next corollary considers the case when a table @xmath312 is chosen randomly from @xmath7^{x \\times { \\mathbb{n}}}$ ] .",
    "note that the product probability space @xmath177^{x \\times { \\mathbb{n } } } , \\lambda^{x \\times { \\mathbb{n}}})$ ] is standard only if @xmath1 is countable .",
    "[ corl : countable ] for all @xmath24 , we have @xmath466^{x \\times { \\mathbb{n}}}}\\sum_{s \\in { \\operatorname{dom}}_x(b)}m(s , { \\vartheta } ) d\\lambda^{x \\times { \\mathbb{n}}}({\\vartheta } ) < \\infty.\\ ] ] in particular , @xmath467^{x \\times { \\mathbb{n}}}\\,:\\ , \\text{$x$ is $ { \\vartheta}$-stable}\\ } ) = 1.\\ ] ]    due to corollary  [ corl : summation ] , for all @xmath24 , we have @xmath468^{x \\times { \\mathbb{n}}}}\\sum_{s \\in { \\operatorname{dom}}_x(b)}m(s , { \\vartheta } ) d\\lambda^{x \\times { \\mathbb{n}}}({\\vartheta } ) \\\\",
    "= & \\sum_{s \\in { \\operatorname{dom}}_x(b)}\\int_{[0;1]^{x \\times { \\mathbb{n } } } } m(s , { \\vartheta } ) d\\lambda^{x \\times { \\mathbb{n } } } ( { \\vartheta } ) \\\\              = & \\sum_{s \\in { \\operatorname{dom}}_x(b ) } \\sum_{\\mathcal{p } \\in \\mathfrak{p}(s ) } \\lambda^{{\\operatorname{supp}}(\\mathcal{p})\\times { \\mathbb{n } } } \\left(w(\\mathcal{p})\\right )   < \\infty ,              \\end{aligned}\\ ] ] as desired .",
    "let us show how theorem  [ theo : mosertardos ] ( in the form of corollary  [ corl : countable ] ) implies the variable version of the lll ( i.e. , theorem  [ theo : lllvbls ] ) . since @xmath146 is locally countable , we may without loss of generality assume that @xmath1 is countable . due to corollary  [ corl : countable ] , for all @xmath24",
    ", we have @xmath467^{x \\times { \\mathbb{n}}}\\,:\\ , \\text{$x$ is $ { \\vartheta}$-stable}\\ } ) = 1.\\ ] ] using the countability of @xmath1 , we obtain @xmath467^{x \\times { \\mathbb{n}}}\\,:\\ , \\forall x \\in x ( \\text{$x$ is $ { \\vartheta}$-stable})\\ } ) = 1.\\ ] ] choose any particular @xmath312 such that every @xmath24 is @xmath312-stable and let @xmath311 be any moser  tardos process with input  @xmath312",
    ". then @xmath469 .",
    "theorem  [ theo : lllvbls ] now follows from proposition  [ prop : infinitestep ] .      in this subsection",
    "we consider how moser ",
    "tardos theory can be adapted for the borel setting .",
    "let @xmath1 be a standard borel space .",
    "then @xmath154^{<\\infty}$ ] is also equipped with a standard borel structure .",
    "if , additionally , @xmath2 is a standard borel space , then @xmath154^{<\\infty}_y$ ] is also a standard borel space ( indeed it can be identified with a borel subset of @xmath470^{<\\infty}$ ] ) .",
    "an instance @xmath146 over @xmath1 is said to be _ borel _ is it is borel as a subset of @xmath154^{<\\infty}_{[0;1]}$ ] .",
    "note that in general the domain of a borel instance is analytic .",
    ", which ensures the borelness of @xmath306 due to the `` large section '' uniformization theorem ( see  ( * ? ? ? * corollary  18.7 ) ) .",
    "however , the borelness of @xmath306 is not required for our arguments to work . ]",
    "a map @xmath471 $ ] with @xmath19 is a _ partial solution _ for an instance @xmath146 if for all @xmath472^{<\\infty}$ ] , @xmath170 . a partial solution @xmath3 is said to be _ borel _ if it is a borel function ( in particular , @xmath473 is borel ) .",
    "a moser  tardos process @xmath305 with borel input @xmath302^{\\mathbb{n}}$ ] is said to be _ borel _ if for each @xmath272 , the set @xmath313 is borel in @xmath154^{<\\infty}$ ] .",
    "note that if @xmath311 is a borel moser  tardos process , then the associated maps @xmath474 and @xmath475 $ ] are also borel .",
    "now we have :    [ prop : borelmosertardos ] let @xmath1 be a standard borel space and let @xmath146 be a correct borel instance over  @xmath1 .",
    "let @xmath302^{{\\mathbb{n}}}$ ] be borel . then there exists a borel moser  tardos process @xmath311 with input @xmath312 .",
    "we deduce proposition  [ prop : borelmosertardos ] from the following lemma .",
    "[ lemma : disjoint ]",
    "let @xmath1 be a standard borel space and let @xmath476^{<\\infty}$ ] be a borel set such that for every @xmath24 , the set @xmath477 is countable .",
    "then there is a borel maximal disjoint subset @xmath478 .",
    "this is a variant of the proof of  ( * ? ? ?",
    "* lemma  7.3 ) .",
    "define a borel graph  @xmath15 on @xmath258 by @xmath479 note that , due to the lemma s assumption , the graph @xmath15 is locally countable .",
    "let @xmath233 denote the equivalence relation on @xmath1 such that @xmath480 if and only if there exists a sequence @xmath481 ,  , @xmath482 , @xmath375 , of elements of @xmath258 such that @xmath483 , @xmath484 , and for all @xmath485 , @xmath486 .",
    "the relation @xmath233 is easily seen to be borel , and , since @xmath15 is locally countable , all the @xmath233-classes are countable .",
    "therefore , by the feldman  moore theorem ( see  ( * ? ? ?",
    "* theorem  22.2 ) ) , there exists a countable sequence @xmath487 of borel bijections @xmath488 such that @xmath489 fix a borel ordering @xmath263 on @xmath1 and let @xmath490^{<\\infty}$ ] be a borel function such that for all  @xmath491 , @xmath492 for instance , @xmath493 can be chosen to be the lexicographically least subset of @xmath247 with property  .",
    "note that any triple of the form @xmath494 , where @xmath318 , @xmath495 , and @xmath496 , uniquely determines @xmath69 ; indeed , we have @xmath497 therefore , for each @xmath491 , @xmath498 in particular , for each @xmath499^{<\\infty}$ ] , the graph @xmath500 is locally finite .",
    "hence , by proposition  [ prop : lfcoloring ] , there is a borel proper coloring @xmath501 of @xmath502",
    ". now let @xmath503^{<\\infty } \\times { \\mathbb{n}}\\colon s \\mapsto ( f(s ) , c_{f(s)}(s)).\\ ] ] by construction , @xmath504 is a borel proper coloring of @xmath15 .",
    "thus , @xmath275 . given a countable borel coloring of  @xmath15 , it is easy to construct a borel maximal independent set in @xmath15 , which is exactly what we want .    thanks to lemma  [ lemma : disjoint ] , it only remains to notice that for a borel map @xmath169 $ ] , the set @xmath505^{<\\infty}\\,:\\ , f\\vert s \\in b_s\\}\\ ] ] is borel .",
    "we also have the following :    [ prop : stability ] let @xmath1 be a standard borel space and let @xmath146 be a correct borel instance over  @xmath1 . let @xmath311 be a borel moser ",
    "tardos process with borel input @xmath312 .",
    "then the map @xmath506 \\colon x \\mapsto { \\vartheta}(x , \\lim_{n \\to \\infty } t_n(x))\\ ] ] is a borel partial solution for @xmath146 .",
    "in this section we describe the construction of the `` universal '' combinatorial structure over a space @xmath1 , whose points encode various combinatorial data that can be built from the elements of @xmath1 .    for a set @xmath1 ,",
    "let @xmath507^{<\\infty } \\cup \\{{\\emptyset}\\}$ ] be the set of all finite subsets of @xmath1 .",
    "the set @xmath508 of all _ hereditarily finite sets _ over @xmath1 is defined inductively as follows themselves as _ urelements _ , i.e. , not sets .",
    "formally , we can replace @xmath1 with , say , the diagonal @xmath509 in @xmath510 , ensuring that no point in @xmath1 is a finite set . ] :    * @xmath511 ; * @xmath512 for all @xmath272 ; * @xmath513 ( note that this union is increasing ) .    in other words , @xmath508 is the smallest superset of @xmath1 that is closed under taking finite subsets . for @xmath514 ,",
    "the _ underlying set _ of @xmath515 ( notation : @xmath516 ) is the finite subset of @xmath1 defined inductively by :    * for @xmath24 , @xmath517 ; * for @xmath518 , @xmath519 .",
    "equivalently , @xmath516 is the smallest subset of @xmath1 such that @xmath520 .",
    "the _ amplification _ of @xmath1 is the set @xmath521 if @xmath1 is a standard borel space , then so are @xmath508 and @xmath224 . the space @xmath224 fully encodes the `` combinatorial structure '' of  @xmath1 .",
    "for instance , @xmath224 contains ( as borel subsets ) the space @xmath522 of all nonempty finite sequences of elements of @xmath1 and the space @xmath523 , which can be viewed as the union of countably many disjoint copies of @xmath1 .",
    "in fact , @xmath524 , i.e. , @xmath224 contains `` countably many disjoint copies of itself . ''",
    "if @xmath15 is a borel graph on @xmath1 , then the edge set of  @xmath15 , i.e. , the set @xmath525 is also a borel subset of @xmath224 .",
    "so are other , more complicated , objects associated with  @xmath15 . for instance",
    ", the set of all cycles in @xmath15 , i.e. , the set of all finite subsets @xmath526 whose elements form a cycle in @xmath15 , is a borel subset of @xmath224 .",
    "note that if @xmath527 is borel , then @xmath23^{<\\infty}$ ] is a borel subset of @xmath528^{<\\infty}$ ] and @xmath23_{[0;1]}^{<\\infty}$ ] is a borel subset of @xmath528_{[0;1]}^{<\\infty}$ ] . therefore , a borel instance @xmath146 over @xmath20 is also a borel instance over @xmath224 . because of that , we will be only considering instances over @xmath224 , and this will include various combinatorial applications such as vertex coloring or edge coloring .",
    "functions between sets can be naturally extended to functions between their amplifications .",
    "namely , for a map @xmath529 , define the map @xmath530 inductively  by :    * for @xmath24 , @xmath531 ; * for @xmath518 , @xmath532 .",
    "the _ amplification _ of @xmath533 is the map @xmath534 .",
    "note that the range of @xmath535 is contained in @xmath536 . for @xmath156^{<\\infty}$",
    "] , we have @xmath537 ( where @xmath538 denotes , as usual , the image of @xmath69 under @xmath533 ) . if @xmath539 is injective ( or surjective ) , then so is  @xmath535 .",
    "if @xmath1 and @xmath2 are standard borel spaces and @xmath533 is borel , then so is @xmath540 .",
    "in this section we state and prove our first main result : an approximate measurable version of the lll for borel instances .",
    "let @xmath1 be a standard borel space and let @xmath252 .",
    "suppose that @xmath146 is a borel instance over @xmath224 and let @xmath541 $ ] be a borel map .",
    "we want to use @xmath4 to measure how well @xmath3 solves @xmath146 . since @xmath4 is concentrated on @xmath1 , it is reasonable to consider , for each @xmath24 , the following set : @xmath542 we call @xmath543 the _ shadow _ of @xmath146 at @xmath16 .",
    "an instance @xmath146 over @xmath224 is said to be _ hereditarily locally finite _ if @xmath544 is finite for all @xmath24 .",
    "now , for a borel map @xmath541 $ ] , let its _",
    "@xmath146-defect _ be the set @xmath545 note that if @xmath146 is hereditarily locally finite , then the set @xmath546 is borel .",
    "now we are ready to state our first main result .",
    "[ theo : approxlll ] let @xmath1 be a standard borel space and let @xmath252 .",
    "let @xmath146 be a hereditarily locally finite correct borel instance over @xmath224 .",
    "then for any @xmath226 , there is a borel map @xmath541 $ ] such that @xmath227 .",
    "let @xmath1 be a standard borel space , let @xmath252 , and let @xmath146 be a hereditarily locally finite correct borel instance over @xmath224 . fix some @xmath226 . for",
    "@xmath164 and @xmath272 , let @xmath547 denote the set of all @xmath387 with @xmath437 .",
    "in particular , @xmath548 and the union on the right - hand side of is disjoint . for @xmath272 , let @xmath549 it is clear from the above definition that for all @xmath272 , the set @xmath550 is analytic ( recall that the set @xmath306 is analytic ) .",
    "this in particular implies that @xmath550 is @xmath4-measurable , which will be sufficient for our purposes .",
    "however , one can show that @xmath550 is , in fact , borel . indeed ,",
    "notice that if there is @xmath355 with @xmath551 , then @xmath552 , and the set @xmath553^{<\\infty}\\,:\\ , \\lambda^s(b_s ) > 0\\ } \\subseteq { \\operatorname{dom}}(b)\\ ] ] is borel due to the `` large section '' uniformization theorem ( see  ( * ? ? ?",
    "* corollary  18.7 ) ) . due to corollary  [ corl : summation ] and",
    "the fact that @xmath146 is hereditarily locally finite , for every @xmath24 , we have @xmath554 hence we can choose @xmath555 large enough so that @xmath556 .",
    "let @xmath15 be the graph on @xmath224 given by : @xmath557 in other words , @xmath558 if and only if @xmath559 and @xmath560 . clearly , @xmath15 is analytic , and the hereditary local finiteness of @xmath146 implies that @xmath15 is locally finite . for @xmath272 , let  @xmath561 be the analytic graph on @xmath224 such that @xmath562 if and only if @xmath559 and the distance between @xmath563 and @xmath564 in @xmath15 is at most @xmath565 ( in particular , @xmath566 ) . since @xmath15 is locally finite , so is  @xmath561 for each @xmath272 . by proposition  [ prop : lfcoloring ] ,",
    "@xmath567 for all @xmath272 , so let @xmath568 be a borel proper coloring of @xmath569 .    for a function @xmath570^{\\mathbb{n}}$ ] , we can consider the composition @xmath571^{\\mathbb{n}}$ ] , which is a borel table ( in the sense of the moser ",
    "tardos algorithm on @xmath224 ) .",
    "let @xmath572^{{\\mathbb{n}}\\times { \\mathbb{n}}}$ ] be the set defined as follows : @xmath573 by definition , @xmath574 is analytic ; in particular , it is @xmath575-measurable .",
    "again , one can show that @xmath574 is , in fact , borel , since the set @xmath576^{<\\infty } \\text { and } ( { \\vartheta}\\circ c)(\\tau ) \\in b_{s}\\}\\ ] ] is borel .",
    "[ lemma : smallfibers ] for every @xmath577 , we have @xmath578 .    it is easy to see that for any neat pile @xmath349 with a unique top element @xmath50 and for any @xmath351 , there is a sequence @xmath579 ,  , @xmath367 with @xmath375 such that @xmath580 , @xmath581 , and @xmath582 .",
    "in particular , we have @xmath583 for all @xmath584 , so the distance in @xmath15 between any element of @xmath585 and any element of @xmath586 is at most @xmath587 .",
    "therefore , the distance in @xmath15 between any two elements of @xmath588 is at most  @xmath589 .",
    "now let @xmath577 , let @xmath590 , and let @xmath591 . since @xmath592 ,",
    "the distance in @xmath15 between any two elements of @xmath588 is at most @xmath593 ; in other words , any two distinct elements of @xmath588 are adjacent in @xmath569 .",
    "therefore , @xmath594 is injective .",
    "hence @xmath595 induces a measure - preserving bijection @xmath596^{c({\\operatorname{supp}}(\\mathcal{p } ) ) \\times { \\mathbb{n } } } \\to [ 0;1]^{{\\operatorname{supp}}(\\mathcal{p } ) \\times { \\mathbb{n}}}\\colon \\eta \\mapsto \\eta \\circ ( c \\vert { \\operatorname{supp}}(\\mathcal{p})).\\ ] ] thus , if we let @xmath597^{{\\mathbb{n}}\\times { \\mathbb{n } } } \\to [ 0;1]^{c({\\operatorname{supp}}(\\mathcal{p } ) ) \\times { \\mathbb{n } } } \\colon { \\vartheta}\\mapsto { \\vartheta}\\vert c({\\operatorname{supp}}(\\mathcal{p})),\\ ] ] then the map @xmath598^{{\\mathbb{n}}\\times { \\mathbb{n } } } \\to [ 0;1]^{{\\operatorname{supp}}(\\mathcal{p } ) \\times { \\mathbb{n } } } \\colon { \\vartheta}\\mapsto ( { \\vartheta}\\circ c ) \\vert { \\operatorname{supp}}(\\mathcal{p})\\ ] ] is measure - preserving . since @xmath599 we now have @xmath600^{{\\mathbb{n}}\\times { \\mathbb{n } } } \\,:\\ , \\mathcal{p } \\text { appears in } { \\vartheta}\\circ c\\ } )                                                   = \\lambda^{{\\operatorname{supp}}(\\mathcal{p})\\times { \\mathbb{n } } } ( w(\\mathcal{p } ) ) .",
    "\\end{aligned}\\ ] ] therefore , @xmath601^{{\\mathbb{n}}\\times { \\mathbb{n } } } \\,:\\ , \\mathcal{p } \\text { appears in } { \\vartheta}\\circ c\\ } ) \\\\",
    "= & \\sum_{s \\in { \\partial}_x(b ) } \\sum_{\\mathcal{p } \\in \\mathfrak{p}_k(s ) } \\lambda^{{\\operatorname{supp}}(\\mathcal{p})\\times { \\mathbb{n } } } ( w(\\mathcal{p } ) ) \\leq \\frac{{\\varepsilon}}{2 } ,              \\end{aligned}\\ ] ] by the definition of @xmath602 .    using lemma  [ lemma : smallfibers ]",
    ", we get @xmath603 this in particular means that for some @xmath604^{{\\mathbb{n}}\\times { \\mathbb{n}}}$ ] , we have @xmath605 .",
    "fix any such  @xmath312 and let @xmath606 be a borel moser  tardos process with input @xmath607 .",
    "let @xmath474 and @xmath475 $ ] , for @xmath272 , denote the associated maps .",
    "@xmath608 .",
    "indeed , by proposition  [ prop : reduction ] , if @xmath609 , then there is a neat pile @xmath591 such that  @xmath349 appears in @xmath607 .",
    "but if @xmath610 , then there is @xmath590 such that @xmath611 , i.e. , @xmath609 .",
    "therefore , @xmath612 , as desired .    finally , if we take @xmath613 , then @xmath614 and the proof of theorem  [ theo : approxlll ] is complete .",
    "in this section we introduce the notion of an isomorphism structure on an equivalence relation . as we discussed in the introduction , this notion is designed to capture the fact that the instances of the  lll that appear in actual combinatorial applications are invariant under the automorphisms of the underlying combinatorial object ( for example , a graph ) .",
    "we then define the  lll game , which models the process of proving a combinatorial result by applying the  lll iteratively .",
    "these definitions will allow us to state the measurable version of the  lll for probability measure - preserving actions of countable groups that admit factor maps to  @xmath7$]-shift actions .",
    "let @xmath233 be an equivalence relation on a set @xmath1 .",
    "a subset @xmath19 is _ @xmath233-invariant _ if for all @xmath122 , @xmath17 , @xmath615 . for @xmath616 ,",
    "let @xmath617_e$ ] denote the _",
    "@xmath233-saturation _ of @xmath69 , i.e. , the smallest invariant subset of @xmath1 that contains @xmath69 . for @xmath24 ,",
    "let @xmath618_e \\coloneqq [ \\{x\\}]_e$ ] .",
    "the _ restriction _ of @xmath233 to a subset @xmath19 is the equivalence relation @xmath619 on  @xmath20 .",
    "an equivalence relation @xmath233 is said to be _",
    "countable _ if every @xmath233-class is countable .",
    "note that if @xmath1 is a standard borel space and @xmath233 is a countable borel ( as a subset of @xmath35 ) equivalence relation on @xmath1 , then for every borel @xmath620 , @xmath617_e$ ] is also borel .    for a graph @xmath15 with vertex",
    "set @xmath1 , @xmath14 denotes the equivalence relation on @xmath1 whose classes are the connected components of @xmath15 . note that if @xmath1 is a standard borel space and @xmath15 is a locally countable borel graph on @xmath1 , then @xmath14 is a countable borel equivalence relation .    for a set @xmath1 and an equivalence relation @xmath233 on @xmath1 , let @xmath621^{<\\infty}$ ]",
    "be the subset of @xmath154^{<\\infty}$ ] defined  by @xmath622^{<\\infty } \\,\\vcentcolon\\longleftrightarrow\\ , \\forall x , y \\in s ( x e y).\\ ] ] for a set @xmath2 , let @xmath621^{<\\infty}_y$ ] denote the subset of @xmath154^{<\\infty}_y$ ] consisting of the functions @xmath623 with @xmath624^{<\\infty}$ ] .",
    "let @xmath625^{<\\infty}\\}.\\ ] ] the _ amplification _ of @xmath233 is the equivalence relation @xmath626 on @xmath627 given by @xmath628_e = [ { \\mathcal{u}}(h_2)]_e.\\ ] ] note that @xmath1 is a complete section for @xmath626 ( i.e. , @xmath1 intersects every @xmath626-class ) and @xmath629 .",
    "if @xmath233 is an equivalence relation on @xmath1 , @xmath630 is an equivalence relation on @xmath2 , and @xmath631 is a map such that @xmath632 , then for the map @xmath633 , we have @xmath634 , i.e. , the range of the restriction @xmath635 is contained in @xmath636 .",
    "if @xmath1 and @xmath2 are standard borel spaces and @xmath233 is a countable borel equivalence relation on @xmath1 , then @xmath621^{<\\infty}$ ] is a borel subset of @xmath154^{<\\infty}$ ] , @xmath621^{<\\infty}_y$ ] is a borel subset of @xmath154^{<\\infty}_y$ ] , @xmath627 is a borel subset of @xmath224 , and @xmath626 is a countable borel equivalence relation on @xmath627 .      if @xmath233 is an equivalence relation on a set @xmath1 , then a collection @xmath232 of bijections of the form @xmath234 , where @xmath235 , @xmath637 , is an _ isomorphism structure _ on  @xmath233 if the following conditions are satisfied :    1 .",
    "@xmath232 is a groupoid with the set of objects @xmath638 ; more precisely :",
    "1 .   for all @xmath639 , @xmath640 ; 2 .   for all",
    "@xmath641 , @xmath642 ; 3 .   for all @xmath643 , @xmath644 , if @xmath645 , then @xmath646 ; 2 .",
    "each @xmath639 is contained in a single @xmath233-class ; 3 .   for every @xmath624^{<\\infty}$",
    "] , there is @xmath647 such that @xmath648 .    for an isomorphism structure @xmath232 on @xmath233 ,",
    "let @xmath649^{<\\infty}\\}.\\ ] ] the last condition in the definition of an isomorphism structure is needed to ensure that for every @xmath624^{<\\infty}$ ] , @xmath650 .",
    "we will consider the following main examples of isomorphism structures .",
    "let @xmath15 be a graph with vertex set  @xmath1 .",
    "we define the isomorphism structure @xmath237 on @xmath14 as follows : a bijection @xmath651 belongs to @xmath237 if and only if @xmath652 and @xmath653 are connected components of @xmath15 and @xmath533 is an isomorphism between @xmath654 and @xmath655 .",
    "we can also define the isomorphism structure @xmath656 such that a bijection @xmath657 belongs to @xmath656 if and only if @xmath481 , @xmath658^{<\\infty}$ ] and @xmath533 is an isomorphism between @xmath659 and @xmath660 .",
    "note that @xmath661 .",
    "the structure @xmath662 will play a prominent role in section  [ section : converse ] .",
    "let @xmath36 be an action of a group @xmath8 on a set @xmath1 .",
    "let @xmath238 denote the corresponding orbit equivalence relation .",
    "the isomorphism structure @xmath239 on @xmath238 is defined as follows : a bijection @xmath651 belongs to @xmath239 if and only if @xmath652 and @xmath653 are @xmath238-classes and @xmath533 is @xmath8-equivariant , i.e. , for all @xmath663 and @xmath664 , @xmath665 .",
    "note that if @xmath36 is an action of a group @xmath8 on a set @xmath1 and @xmath37 is a generating set , then @xmath666 .    if @xmath232 is an isomorphism structure on @xmath233 , where @xmath233 is an equivalence relation on @xmath1 , then the _ amplification _ of @xmath232 is the set @xmath667 .",
    "it is easy to verify that @xmath668 is an isomorphism structure on @xmath626 . for a map @xmath0 , where @xmath2 is a set , the _ expansion _ of @xmath232 by @xmath3 is the subset @xmath669\\subseteq { \\mathcal{i}}$ ] defined as follows : @xmath670 \\coloneqq \\{\\varphi \\in { \\mathcal{i}}\\,:\\ , f(x ) = f({\\varphi}(x ) ) \\text { for all } x \\in { \\operatorname{dom}}({\\varphi})\\}.\\ ] ] note that @xmath669 $ ] is also an isomorphism structure on @xmath233 . for a map @xmath671 , defined on a subset @xmath19 , let @xmath669 \\coloneqq { \\mathcal{i}}[g]$ ] , where @xmath672 with @xmath673 is given by @xmath674 the name `` expansion '' conveys the following intuition : if @xmath232 is a family of isomorphisms between certain substructures of @xmath1 ( for example , as in the case of @xmath237 , between connected components of a graph @xmath15 on @xmath1 ) , then expanding @xmath232 by @xmath3 corresponds to adding @xmath3 to  @xmath1 as a new `` predicate , '' whose values have to be preserved by the isomorphisms between substructures of the expanded structure .",
    "an _ instance ( of the lll ) _ over a countable equivalence relation @xmath233 on a set @xmath1 is a subset @xmath675^{<\\infty}_{[0;1]}$ ] such that for each @xmath624^{<\\infty}$ ] , the set @xmath160 is borel .",
    "since @xmath621_{[0;1]}^{<\\infty } \\subseteq [ x]_{[0;1]}^{<\\infty}$ ] , any instance over @xmath233 is , in particular , an instance over @xmath1 , so we can apply to it all the notions defined previously for instances over @xmath1 , such as borelness or correctness .",
    "note that every instance over @xmath233 is guaranteed to be locally countable , since every @xmath233-class is countable .",
    "if @xmath1 is a standard borel space , @xmath233 is a countable borel equivalence relation on @xmath1 , @xmath146 is a borel instance over @xmath233 , and @xmath252 , then a _ @xmath4-solution _ for @xmath146 is a borel partial solution @xmath3 for @xmath146 such that @xmath473 is an @xmath233-invariant @xmath4-conull borel subset of @xmath1 .",
    "an instance @xmath146 over @xmath1 is said to be _",
    "@xmath533-invariant _ , where @xmath533 is a map with @xmath676 , @xmath677^{<\\infty}$ ] , if for all @xmath678 $ ] , @xmath679 let @xmath232 be an isomorphism structure on @xmath233 .",
    "an instance @xmath146 over @xmath233 is said to be _",
    "@xmath232-invariant on @xmath20 _ , where @xmath19 , if it is @xmath533-invariant for all @xmath680 with @xmath676 , @xmath681^{<\\infty}$ ] . if @xmath252 , then @xmath146 is said to be _",
    "@xmath232-invariant @xmath4-a.e .",
    "_ if it is @xmath232-invariant on an @xmath233-invariant @xmath4-conull borel subset of @xmath1 .",
    "an _ _ l - system _ _ is a tuple @xmath682 , where @xmath1 is a standard borel space , @xmath233 is a countable borel equivalence relation on @xmath1 , @xmath232 is an isomorphism structure on @xmath233 , and @xmath252 .",
    "an  _ instance ( of the lll ) _ over @xmath683 is a @xmath232-invariant @xmath4-a.e .",
    "instance over @xmath233 .",
    "the _ amplification _ of @xmath683 is the l - system @xmath684 ( so the measure in @xmath685 is concentrated on @xmath1 ) . for a borel map @xmath671",
    ", where @xmath19 is borel and @xmath2 is a standard borel space , the _ expansion _ of @xmath683 by @xmath3 is the l - system @xmath686 \\coloneqq ( x , e , { \\mathcal{i}}[f ] , \\mu)$ ] . for a given l - system @xmath687 , we refer to its components as @xmath688 , @xmath689 , @xmath690 , and @xmath691 .",
    "as we mentioned in the introduction , many combinatorial arguments contain iterated applications of the lll , where the output of a previous iteration can be used to create an instance for the next one .",
    "to accommodate such arguments , we introduce the following definition .    the _ lll game _ on an l - system @xmath687 is played as follows .",
    "let @xmath692 . on step  @xmath183 , where @xmath375 , player  i chooses a correct borel instance @xmath693 over  @xmath694 .",
    "if @xmath693 has no @xmath691-solution , then player  ii loses ; otherwise , he chooses a @xmath691-solution @xmath695 for @xmath693 and sets @xmath696 $ ] .",
    "player  ii wins if he does not lose on any finite step of the game .",
    "we say that an l - system @xmath683 _ satisfies the lll _ if player  ii has a winning strategy in the lll game on @xmath697 .",
    "for a borel action @xmath36 of a countable group @xmath8 on a standard borel space @xmath1 and @xmath252 , let @xmath698 denote the l - system @xmath699 .",
    "now we are ready to state our second main result .",
    "[ theo : thm1 ] suppose that @xmath36 is a borel action of a countable group @xmath8 on a  standard borel space @xmath1 and let @xmath252 be an invariant probability measure .",
    "if there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] , then @xmath698 satisfies the  lll .",
    "let @xmath700 denote the class of all l - systems of the form @xmath701 , where @xmath36 is a borel action of a countable group @xmath8 on a standard borel space @xmath1 , @xmath252 , and there is a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] .",
    "let @xmath702 be the class of all l - systems that satisfy the lll .",
    "we want to show that @xmath703 . to do this , we will introduce an intermediate class @xmath704 such that @xmath705 .",
    "our strategy for showing that @xmath706 will be to ensure that @xmath704 has the following two properties :    1 .   if @xmath707 , then @xmath708 ; 2 .   if @xmath707 and @xmath146 is a correct borel instance over @xmath687 , then there exists a @xmath709-solution @xmath3 for @xmath146 such that @xmath710 \\in \\mathscr{c}$ ] .",
    "the above conditions imply that every l - system in @xmath704 satisfies the lll . indeed , due to property  ( a1 )",
    ", it is enough to show that for every @xmath707 , player  ii has a winning strategy in the lll game on @xmath687 .",
    "the existence of such a strategy is guaranteed by property  ( a2 ) , since , provided that @xmath711 , player  ii can always find a @xmath691-solution @xmath695 for @xmath693 such that @xmath712 \\in \\mathscr{c}$ ] .",
    "it is easy to see that property  ( a1 ) fails for @xmath700 ; in fact , if @xmath713 , then @xmath691 is @xmath689-invariant , while it is not even @xmath714-quasi - invariant . to overcome this difficulty , we will introduce _ countable borel groupoids_algebraic structures more general than countable groups  and their actions on borel spaces . as it will turn out",
    ", every borel action of a countable borel groupoid on a standard probability space induces an l - system , and its definition extends the one for actions of countable groups .",
    "also , one can define shift actions of countable borel groupoids , generalizing shift actions of countable groups .",
    "our choice for @xmath704 will be the class of all l - systems that admit factor maps ( we will define what a factor map between two general l - systems is in [ prg : factors ] ) to l - systems induced by shift actions of countable borel groupoids .",
    "in this section we introduce the notion of a factor map between two l - systems .",
    "it will allow us to transfer instances of the lll from a given l - system to a simpler or better - behaved one .",
    "[ defn : factors ] let @xmath715 and @xmath716 be l - systems .",
    "a borel map @xmath717 , defined on an @xmath718-invariant @xmath719-conull borel subset @xmath720 , is a _ factor map _ ( notation : @xmath721 ) if the following conditions hold :    1 .",
    "@xmath722 ; 2 .   for each @xmath718-class @xmath723",
    ", @xmath724 is an @xmath725-class and @xmath726 is injective ; 3 .   for all @xmath481 , @xmath727^{<\\infty}$ ] ,",
    "if @xmath728 is a bijection between @xmath729 and @xmath730 , then there is a bijection @xmath731 between @xmath481 and @xmath732 that makes the following diagram commute : @xmath733{r}{\\varphi_1 } & s_2 \\arrow{d}{\\pi } \\\\",
    "\\pi(s_1 ) \\arrow{r}{\\varphi_2 } & \\pi(s_2 ) .",
    "\\end{tikzcd}\\ ] ]    [ prop : enhancedfactor ] let @xmath734 and @xmath735 be l - systems .",
    "suppose that there exists a factor map @xmath721 .",
    "then there exists a factor map from @xmath736 to @xmath737 .    for @xmath738 ,",
    "let @xmath739 let @xmath740 and let @xmath741 be the amplification of @xmath742 .",
    "then @xmath743 is easily seen to be a factor map between @xmath736 and @xmath737 .",
    "[ lemma : pushforward ] let @xmath734 and @xmath735 be l - systems .",
    "suppose that there exists a factor map @xmath744 .",
    "then for any correct borel instance @xmath242 over @xmath734 , there exists a correct borel instance @xmath245 over @xmath735 such that if @xmath3 is a @xmath745-solution for @xmath245 , then @xmath746 , possibly restricted to a smaller invariant conull borel subset of @xmath747 , is a @xmath748-solution for  @xmath242 .    for @xmath738 ,",
    "let @xmath749 let @xmath242 be a correct borel instance over @xmath734 . restricting the domain of @xmath742 to a smaller @xmath718-invariant @xmath719-conull borel subset of @xmath235 , we can arrange that @xmath242 is @xmath750-invariant on @xmath751 , @xmath752^{<\\infty}$ ] , and @xmath753 is borel in  @xmath236 . let @xmath740 , @xmath754 . since @xmath742 is a factor map , @xmath755 and @xmath756 are invariant conull subsets of @xmath235 and @xmath236 , respectively .    for @xmath757^{<\\infty}$",
    "] , choose any @xmath758^{<\\infty}$ ] such that @xmath759 and define @xmath760^t\\,:\\ , f \\circ ( \\pi\\vert s ) \\in ( b_1)_s\\}.\\ ] ] we claim that this definition does not depend on the choice of @xmath69 . indeed , suppose that @xmath481 , @xmath761 $ ] are such that @xmath762",
    ". then there is @xmath763 that makes the following diagram commute : @xmath764{r}{\\varphi } & s_2 \\arrow{d}{\\pi } \\\\",
    "t \\arrow{r}{\\operatorname{id}_t } & t.                      \\end{tikzcd}\\ ] ] since @xmath242 is @xmath533-invariant , the sets @xmath765^t\\,:\\ , f \\circ ( \\pi\\vert s_1 ) \\in ( b_1)_{s_1}\\ }                          \\text { and }                      \\{f \\in [ 0;1]^t\\,:\\ , f \\circ ( \\pi\\vert s_2 ) \\in ( b_1)_{s_2}\\}\\ ] ] coincide .",
    "the next step is to show that the set @xmath766^{<\\infty } } ( b_2)_t$ ] is borel . for this",
    ", we observe that @xmath245 is both analytic and co - analytic , since for @xmath767^{<\\infty}_{[0;1]}$ ] , @xmath768^{<\\infty}\\ , \\left(\\pi(s ) = { \\operatorname{dom}}(f)\\text { and } f \\circ ( \\pi\\vert s ) \\in b_1\\right ) \\\\                      & \\,\\longleftrightarrow\\ , \\forall s \\in [ e_1\\vert x_1']^{<\\infty}\\ , \\left(\\pi(s ) = { \\operatorname{dom}}(f ) \\longrightarrow f \\circ ( \\pi\\vert s ) \\in b_1\\right ) .",
    "\\end{aligned}\\ ] ]    now we verify that @xmath245 is @xmath769-invariant @xmath770-a.e . ;",
    "indeed it is @xmath769-invariant on @xmath756 .",
    "suppose that @xmath771 , @xmath772^{<\\infty}$ ] and @xmath773 is a bijection between @xmath771 and @xmath774 .",
    "choose any @xmath481 , @xmath761^{<\\infty}$ ] such that @xmath775 and @xmath776 .",
    "there is @xmath777 that makes the following diagram commute : @xmath764{r}{\\varphi_1 } & s_2 \\arrow{d}{\\pi } \\\\",
    "t_1 \\arrow{r}{{\\varphi}_2 } & t_2 .                      \\end{tikzcd}\\ ] ] since @xmath242 is @xmath643-invariant , @xmath245 is @xmath778-invariant .",
    "let @xmath779 witness the correctness of @xmath242 .",
    "let @xmath780 be a function such that @xmath781 and @xmath782 ( it is easy to construct such @xmath249 using the axiom of choice ) .",
    "for @xmath783 , let @xmath784 .",
    "if we denote @xmath785 , then @xmath786 thus , @xmath245 is correct .",
    "finally , if @xmath3 is a @xmath770-solution for @xmath245 , then @xmath746 is a @xmath719-solution for @xmath242 , since for any @xmath787^{<\\infty}$ ] , we have @xmath788^{<\\infty}$ ] , so @xmath789 , which by definition happens if and only if @xmath790 .    for a class @xmath704 of l - systems ,",
    "define the class @xmath791 by @xmath792 note that @xmath793 and @xmath794 .",
    "suppose that @xmath704 is a class of l - systems satisfying the following two conditions :    1 .",
    "if @xmath707 , then @xmath795 ; 2 .   if @xmath707 and @xmath146 is a correct borel instance over @xmath687 , then there exists a @xmath709-solution @xmath3 for @xmath146 such that @xmath710\\in\\mathscr{c}^\\ast$ ] .",
    "due to proposition  [ prop : enhancedfactor ] and lemma  [ lemma : pushforward ] , if @xmath704 satisfies the above conditions , then @xmath791 has properties  ( a1 ) and ( a2 ) from  [ prg : thm1outline ] .",
    "the following definition is an important ingredient of our argument .",
    "a _ countable borel groupoid _",
    "@xmath796 is a structure consisting of a standard borel space @xmath797 together with a countable set @xmath8 and borel maps @xmath798 satisfying the following axioms :    1 .   _ consistency _ : for all @xmath799 , @xmath800 and @xmath801 , @xmath802 ; 2 .",
    "_ associativity _ : for all @xmath799 , @xmath803 , @xmath804 and @xmath801 , @xmath805 ; 3 .",
    "_ identity _ : for each @xmath801 , @xmath806 and for all @xmath664 , @xmath807 ; 4 .",
    "_ inverse _ : for all @xmath801 and @xmath664 , @xmath808 and @xmath809 .",
    "o0.5     a countable group @xmath8 can be canonically viewed as a countable borel groupoid in the following way .",
    "let @xmath810 consist of a single point .",
    "for each @xmath664 , let @xmath811 .",
    "now we just transfer compositions , the identity , and inverses directly from the group : @xmath812 ( here @xmath813 denotes the identity element of @xmath8 . )    a more general class of examples is given by borel actions of countable groups .",
    "namely , let @xmath814 be a borel action of a countable group @xmath8 on a standard borel space  @xmath797 .",
    "then @xmath796 can be endowed with the structure of a countable borel groupoid as follows : set @xmath815 for all @xmath664 , @xmath801 , and define compositions , identities , and inverses via   ( i.e. , they do not depend on  @xmath801 ) .",
    "an interesting example of a countable borel groupoid is produced by `` bundling '' all countable groups into a single algebraic structure .",
    "let @xmath816 be the standard borel space of all countably infinite groups with ground set @xmath247 ( it can be viewed as a borel subset of @xmath817 ) .",
    "we define a countable borel groupoid @xmath818 as follows . for each @xmath272 and @xmath819 ,",
    "let @xmath820 .",
    "now set @xmath821 to be the product of @xmath565 and @xmath340 in @xmath8 ; @xmath822 to be the identity element of @xmath8 ; and @xmath823 to be the inverse of @xmath565 in @xmath8 .",
    "the following proposition is a useful and easy - to - check condition that guarantees that a certain structure is a countable borel groupoid .",
    "[ prop : uniquecbg ] let @xmath797 be a standard borel space and let @xmath233 be a countable borel equivalence relation on @xmath797 .",
    "let @xmath8 be a countable set and let @xmath824 be a borel function .",
    "suppose that for each @xmath801 , the map @xmath825 is a bijection between @xmath8 and @xmath826_e$ ] .",
    "then there is a unique countable borel groupoid structure on @xmath796 with @xmath827 as its action map .    for @xmath828 ,",
    "@xmath829 with @xmath830 , let @xmath831 be the unique element of @xmath8 such that @xmath832 .",
    "the only consistent way to turn @xmath796 into a countable borel groupoid is as follows : @xmath833 a straightforward verification shows that all the axioms are satisfied .",
    "now we proceed to the definition of borel actions of countable borel groupoids .",
    "[ defn : actions ] let @xmath796 be a countable borel groupoid .",
    "a ( borel ) _ action _ @xmath834 of @xmath796 on a standard borel space @xmath1 is a pair of borel maps @xmath835 , @xmath836 satisfying the following conditions :    1 .   _ equivariance _ :",
    "for all @xmath24 and @xmath664 , @xmath837 ; 2 .   _ identity _ : for all @xmath24 , @xmath838 ; 3 .   _ compatibility _ : for all @xmath24 and @xmath799 , @xmath800 , @xmath839 .    as with group actions",
    ", we will usually simply write @xmath840 for @xmath841 .    clearly , a ( left ) group action @xmath842 is also a countable borel groupoid action if @xmath8 is understood as a countable borel groupoid .",
    "now suppose that a countable group @xmath8 acts ( in a borel way ) on a standard borel space @xmath797 and let @xmath843 be the corresponding countable borel groupoid .",
    "let @xmath834 be an action of @xmath796 on @xmath1 .",
    "then the identity and compatibility conditions from definition  [ defn : actions ] imply that @xmath75 is an action of @xmath8 on  @xmath1 , while the equivariance condition stipulates that the map @xmath835 is @xmath8-equivariant . in other words ,",
    "borel actions of @xmath796 exactly correspond to @xmath8-spaces equipped with a borel @xmath8-equivariant map to @xmath797 .    if @xmath818 is the countable borel groupoid of all countable groups , then an action of @xmath818 on @xmath1 consists of a borel map @xmath844 and a @xmath8-action on @xmath845 for each @xmath819 .",
    "[ defn : shift ] let @xmath796 be a countable borel groupoid and let @xmath2 be a standard borel space .",
    "@xmath2-shift action _ of @xmath796 is the action @xmath834 of @xmath796 on the space @xmath846 , defined as follows . for each @xmath847 , let @xmath848 and for @xmath664 , define @xmath849 where @xmath850 is given by @xmath851 for all @xmath66 .",
    "a straightforward verification shows that the @xmath2-shift action is indeed an action of @xmath796 .",
    "we demonstrate the proof here to help the reader get familiar with the definitions .",
    "the equivariance condition is satisfied trivially . for the identity condition ,",
    "observe that if @xmath852 , then @xmath853 where for each @xmath66 , @xmath854 so @xmath855 , as desired . finally , for the compatibility condition",
    ", we have @xmath856 where for @xmath66 , @xmath857 so @xmath858 as desired .",
    "note that for a countable group @xmath8 , definition  [ defn : shift ] is equivalent to the usual definition of the ( left ) shift action of @xmath8 on @xmath64 .    by analogy with group actions , we can define l - systems corresponding to actions of countable borel groupoids .",
    "namely , let @xmath859 be a borel action of a countable borel groupoid @xmath796 on a standard borel space @xmath1 .",
    "let @xmath860 be the _ orbit equivalence relation _ , defined by @xmath861 the relation @xmath860",
    "is easily seen to be a countable borel equivalence relation .",
    "note that it does not depend on @xmath862 .",
    "let @xmath863 denote the isomorphism structure on @xmath860 such that a bijection @xmath864 belongs to @xmath863 if and only if @xmath652 and @xmath653 are @xmath860-classes and @xmath533 is _",
    ", i.e. , for all @xmath663 and @xmath664 , @xmath865 and @xmath866 . if @xmath252 , then let @xmath867 denote the l - system @xmath868 . in the case",
    "when @xmath869 , i.e. , @xmath796 is a group , this definition coincides with the one given previously for group actions .",
    "we will be mostly concerned with the properties of l - systems induced by shift actions of countable borel groupoids . more precisely :    a _ lebesgue l - system _ is any l - system of the form @xmath870 , where @xmath871 is the @xmath2-shift action of a countable borel groupoid @xmath796 for some standard borel space @xmath2 , @xmath872 , and @xmath873 is atomless .    due to the measure isomorphism theorem , it is enough to consider lebesgue l - systems induced by the @xmath7$]-shift action of @xmath796 with @xmath874 .",
    "however , sometimes it will be more convenient to consider other choices for @xmath2 and @xmath875 ; in particular , we will often assume that @xmath876^s$ ] and @xmath877 for some countable set @xmath69 .",
    "let @xmath796 be a countable borel groupoid and let @xmath859 be a borel action of @xmath796 on a standard borel space @xmath1 .",
    "the action @xmath834 is said to be _ free _ if for all @xmath24 and @xmath664 , @xmath878 .",
    "the _ free part _ of @xmath834 ( notation : @xmath879 or @xmath880 if the action is clear from the context ) is the largest @xmath860-invariant subset @xmath19 on which the action is free . for @xmath252 ,",
    "an action is _",
    "free @xmath4-a.e .",
    "_ if its free part is @xmath4-conull .",
    "note that the free part of an action @xmath881 is always an invariant borel subset of @xmath1 .",
    "also note that if @xmath882 , then the map @xmath883 is a bijection between @xmath8 and the orbit of @xmath16 .",
    "let @xmath796 be a countable borel groupoid and let @xmath872 .",
    "let @xmath2 be a standard borel space and let @xmath873 be atomless .",
    "then the @xmath2-shift action of @xmath796 on @xmath846 is free @xmath884-a.e .",
    "it is enough to notice that @xmath885 , where @xmath886 and @xmath630 is @xmath887-conull .",
    "the following lemma will be useful in verifying that certain maps between l - systems induced by actions of countable borel groupoids are factor maps .",
    "[ lemma : equivariant ] let @xmath796 be a countable borel groupoid and let @xmath888 and @xmath889 be borel actions of @xmath796 on standard borel spaces @xmath235 and @xmath236 .",
    "let @xmath890 and @xmath891 .",
    "suppose that @xmath892 is @xmath770-a.e .",
    "let @xmath717 be a measure - preserving @xmath796-equivariant borel map defined on an @xmath893-invariant @xmath719-conull borel subset @xmath720 .",
    "then @xmath742 , possibly restricted to a smaller invariant conull borel subset of @xmath235 , is a factor map from @xmath894 to @xmath895 .    for @xmath896 ,",
    "let @xmath897 let @xmath898 be an @xmath718-class .",
    "the equivariance of @xmath742 implies that @xmath724 is an @xmath725-class . since @xmath892 is free @xmath770-a.e .",
    ", we may assume that @xmath899 .",
    "then the map @xmath900 is a bijection .",
    "it remains to check the existence of @xmath731 that closes the following diagram : @xmath764{r}{\\varphi_1 } & s_2 \\arrow{d}{\\pi } \\\\",
    "\\pi(s_1 ) \\arrow{r}{\\varphi_2 } & \\pi(s_2 ) .",
    "\\end{tikzcd}\\ ] ] let @xmath901_{e_2 } \\to [ \\pi(s_2)]_{e_2}$ ] be an equivariant bijection that extends @xmath902 . again , since @xmath892 is free @xmath770-a.e .",
    ", we can assume that the maps @xmath903_{e_1 } \\colon [ s_1]_{e_1 } \\to [ \\pi(s_1)]_{e_2},\\ ] ] @xmath904_{e_1 } \\colon [ s_2]_{e_1 } \\to [ \\pi(s_2)]_{e_2}\\ ] ] are bijections .",
    "hence , @xmath905_{e_1})^{-1 } \\circ \\overline{\\varphi}_2 \\circ ( \\pi\\vert[s_1]_{e_1})$ ] is an equivariant bijection from @xmath906_{e_1}$ ] to @xmath907_{e_1}$ ] , @xmath908 , and the following diagram commutes : @xmath909_{e_1 } } \\arrow{d}{\\pi } \\arrow{r}{\\overline{\\varphi}_1 } & { [ s_2]_{e_1 } } \\arrow{d}{\\pi } \\\\                      { [ \\pi(s_1)]_{e_2 } } \\arrow{r}{\\overline{\\varphi}_2 } & { [ \\pi(s_2)]_{e_2}}.                      \\end{tikzcd}\\ ] ] thus , we can set @xmath910 .",
    "let @xmath8 be a countable group and let @xmath911 , @xmath912 be two measure - preserving actions of @xmath8 . if the action on @xmath236 is free @xmath770-a.e .",
    ", then lemma  [ lemma : equivariant ] implies that a factor map @xmath913 in the sense of ergodic theory induces a factor map between the l - systems @xmath914 and @xmath915 .      in this paragraph",
    "we show that the class of lebesgue l - systems is closed under ( some ) expansions and under amplifications .",
    "we start with the following simple observation .",
    "[ lemma : expansion ]",
    "let @xmath796 be a countable borel groupoid .",
    "let @xmath916 , where @xmath872 , be the lebesgue l - system produced by the @xmath7 ^ 2$]-shift action of @xmath796 .",
    "let @xmath2 be a standard borel space and let @xmath917 ^ 2)^\\gamma \\to y$ ] be a borel function that does not depend on the third coordinate , i.e. , for all @xmath801 , @xmath312 , @xmath918 , @xmath919^\\gamma$ ] , @xmath920 then @xmath710 $ ] admits a factor map to a lebesgue l - system .",
    "let @xmath921^\\gamma$ ] .",
    "the @xmath7$]-shift action of @xmath796 on @xmath574 turns @xmath922 into a countable borel groupoid via @xmath923 let @xmath924 denote the @xmath7$]-shift action of @xmath922 . if we identify @xmath177 ^ 2)^\\gamma$ ] with @xmath7^\\gamma \\times [ 0;1]^\\gamma$ ] in the usual way , then @xmath925^\\gamma \\times [ 0;1]^\\gamma = q \\times [ 0;1]^\\gamma$ ] and , in fact , @xmath926 . by definition",
    ", we have that for all @xmath801 , @xmath312 , @xmath927^\\gamma$ ] , @xmath928 so the value of @xmath153 is determined by @xmath929 for all @xmath16 .",
    "let @xmath930 be the lebesgue l - system induced by @xmath931 .",
    "we claim that the identity function @xmath932 ^ 2)^\\gamma}$ ] is a factor map from @xmath710 $ ] to @xmath933 .",
    "the only thing we need to check is condition 3 . of definition  [ defn : factors ] .",
    "we claim that , in fact , @xmath934 $ ] . indeed , if a bijection @xmath864 between @xmath238-classes @xmath652 and @xmath653 belongs to @xmath935 , then for all @xmath663 , @xmath936 , so @xmath865 and @xmath937 .",
    "thus , @xmath938 $ ] , as desired .",
    "the proof of the next lemma is a bit more involved than that of lemma  [ lemma : expansion ] .",
    "recall that for @xmath939 , @xmath940 denotes the amplification of @xmath533 ; and for an equivalence relation @xmath233 on @xmath258 , @xmath626 denotes the amplification of @xmath233 , which is an equivalence relation on  @xmath627 .",
    "[ lemma : lebesguehf0 ] if @xmath687 is a lebesgue l - system , then @xmath685 factors to a lebesgue l - system .",
    "suppose that @xmath687 is induced by a shift action of a countable borel groupoid @xmath796 .",
    "we will proceed in three steps .",
    "first , we will construct a countable borel groupoid @xmath941 , where @xmath942 .",
    "then we will show that @xmath685 is induced by an ( almost ) free action of @xmath941 .",
    "finally , we will define a measure - preserving @xmath941-equivariant map from this action to the @xmath7$]-shift action of @xmath941 , which will give us a desired factor map , thanks to lemma  [ lemma : equivariant ] .    * _ step 1 . _ * let @xmath872 and consider the @xmath7$]-shift action @xmath943^\\gamma$ ] .",
    "denote the corresponding orbit equivalence relation by @xmath233 .",
    "define @xmath944^\\gamma ) ) \\;\\;\\;\\text{and } \\;\\;\\;\\delta \\coloneqq { \\operatorname{hf}}_0(\\gamma).\\ ] ] note that for each @xmath945^\\gamma)$ ] , the following map is a bijection between @xmath8 and @xmath618_{e}$ ] : @xmath946_{e } \\colon \\gamma \\mapsto \\gamma \\cdot x.\\ ] ] therefore , its amplification @xmath947_e ) = [ x]_{{\\widetilde}{e}}$ ] is a bijection between @xmath948 and @xmath618_{{\\widetilde}{e}}$ ] .",
    "fix a borel map @xmath949^\\gamma)$ ] such that for all @xmath950 , @xmath951 , and let @xmath952 .",
    "then for all @xmath950 , @xmath953 is a bijection from @xmath948 to @xmath954_{{\\widetilde}{e } } = [ q]_{{\\widetilde}{e}}$ ] . for @xmath950 and @xmath955 , define @xmath956 note that we have @xmath957 observe that @xmath958 and @xmath959^\\gamma ) \\subseteq q$ ] ; hence the value @xmath840 , where @xmath945^\\gamma)$ ] and @xmath664 , can be computed in two ways : @xmath65 can be viewed as an element of @xmath8 acting on @xmath925^\\gamma$ ] , or it can be viewed as an element of @xmath948 acing on @xmath574 . however , it is easy to see that both interpretations produce the same outcome , so our notation is consistent .",
    "since @xmath960_{{\\widetilde}{e}}$ ] is a bijection for each @xmath950 , by proposition  [ prop : uniquecbg ] , @xmath941 is equipped with a unique countable borel groupoid structure .    *",
    "_ * now we turn to the lebesgue l - system @xmath687 .",
    "suppose that @xmath961 , where @xmath962\\times y)^\\gamma$ ] is the @xmath177\\times y)$]-shift action of @xmath796 , @xmath872 , and @xmath873 is atomless .",
    "here @xmath2 is a standard borel space ; we will specify a concrete choice for @xmath2 later .",
    "let @xmath963^\\gamma ) \\times y^\\gamma.\\ ] ] then @xmath630 is a conull @xmath238-invariant borel subset of @xmath964 .",
    "we will now define a free action of @xmath941 on @xmath965 ( which is a conull @xmath966-invariant borel subset of  @xmath967 ) .",
    "the construction is analogous to the one from step  @xmath301 . for each @xmath968 ,",
    "let @xmath969_{e_a}$ ] be given by @xmath946_{e_a } \\colon \\gamma \\mapsto \\gamma \\cdot x.\\ ] ] then @xmath970 establishes a bijection between @xmath8 and @xmath618_{e_a}$ ] .",
    "therefore , @xmath971_{{\\widetilde}{e}_a}$ ] is a bijection between @xmath948 and @xmath618_{{\\widetilde}{e}_a}$ ] .",
    "let @xmath972^\\gamma)$ ] denote the projection on the first two coordinates , i.e. , @xmath973 for all @xmath974^\\gamma)$ ] and @xmath975 .",
    "note that for every @xmath976 , @xmath977 .",
    "moreover , the map @xmath978 is a bijection .",
    "let @xmath979 be the unique element of @xmath516 such that @xmath980 for @xmath955 , define @xmath981 .",
    "then @xmath982_{{\\widetilde}{e}_a}$ ] is a bijection .",
    "hence , if we let @xmath983 then @xmath984 is a free action of @xmath941 on @xmath985 . note that we again have @xmath986 similarly to step  1 ,",
    "the value @xmath987 for @xmath988 and @xmath664 does not depend on whether we construe @xmath65 as an element of @xmath8 ( acting on @xmath925^\\gamma \\times y^\\gamma$ ] ) or as an element of @xmath948 ( acting on @xmath985 ) .",
    "moreover , it is clear that the restriction of @xmath685 to @xmath985 coincides with @xmath989 .    *",
    "_ * so far we have constructed a countable borel groupoid @xmath941 and a free action @xmath990 , which essentially ( i.e. , up to an invariant null set ) induces the l - system @xmath685 .",
    "now we will define a factor map from @xmath685 to the l - system induced by the shift action of @xmath941 on @xmath991^\\delta$ ] .    for this , we choose @xmath2 to be @xmath7^\\delta$ ] and @xmath875 to be @xmath992 .",
    "consider any @xmath976 .",
    "suppose that @xmath993 , where @xmath994^\\gamma)$ ] and @xmath995^\\delta)^\\gamma = [ 0;1]^{\\gamma \\times \\delta}$ ] .",
    "define @xmath996 $ ] by @xmath997 here @xmath998 , so @xmath999 ; and @xmath977 , so @xmath1000 . now define @xmath1001^\\delta$ ] by setting , for all @xmath976 and @xmath955 , @xmath1002 by construction , the map @xmath1003^\\delta\\ ] ] is @xmath941-equivariant .",
    "due to lemma  [ lemma : equivariant ] , it only remains to check that this map is measure - preserving .",
    "since we have the freedom to choose the measure on @xmath574 , we can take it to be @xmath1004 so we only need to check that @xmath1005 since @xmath1006 is concentrated on @xmath630 , it is enough to verify that @xmath1007 to this end , we will show that for each @xmath945^\\gamma)$ ] , the map @xmath1008^{\\gamma \\times \\delta } \\to [ 0;1]^\\delta \\colon y \\mapsto \\beta^\\delta(x , y)\\ ] ] satisfies @xmath1009 ; an application of fubini s theorem will complete the proof .",
    "fix some @xmath945^\\gamma)$ ] . for each @xmath955 ,",
    "let @xmath1010 be the unique element of @xmath8 such that @xmath1011 observe that the map @xmath1012 is injective .",
    "indeed , we have @xmath1013 and the map @xmath1014 is injective . now let @xmath1015^{\\gamma \\times \\delta}$ ] .",
    "we have @xmath1016 and @xmath1017 where @xmath1018 is a particular element of @xmath7^{\\gamma\\times \\delta}$ ] .",
    "therefore , @xmath1019 since @xmath1020 by the definition of the shift action , we get @xmath1021 to summarize , @xmath1022 in other words , @xmath1023 acts as the projection on the set of coordinates @xmath1024",
    ". therefore , it pushes @xmath1025 forward to @xmath992 , as desired .      in this paragraph",
    "we use moser  tardos theory to show that any correct borel instance over a lebesgue l - system @xmath687 admits a @xmath691-solution . to do this",
    ", we will reduce @xmath146 to a family @xmath1026 of correct instances over @xmath8 indexed by the elements of @xmath797 , where @xmath796 is the countable borel groupoid whose shift action induces @xmath687 .",
    "[ lemma : main ] let @xmath687 be a lebesgue l - system . then every correct borel instance over @xmath687 has a @xmath691-solution .",
    "let @xmath796 be a countable borel groupoid , let @xmath872 , and let @xmath1027^{\\gamma \\times { \\mathbb{n}}}$ ] be the @xmath7^{\\mathbb{n}}$]-shift action of @xmath796 .",
    "let @xmath1028 .",
    "we use the following notation : @xmath1029^{\\gamma \\times { \\mathbb{n}}};\\\\                              e & \\coloneqq & e_a;\\\\                              { \\mathcal{i}}&\\coloneqq & { \\mathcal{i}}_{(\\rho , a)}.                          \\end{array}\\ ] ]    suppose @xmath146 is a correct borel instance over @xmath687 . due to propositions  [ prop : borelmosertardos ] and  [ prop : stability ] ,",
    "it is enough to show that there exists a borel table @xmath1030^{{\\mathbb{n}}}$ ] such that @xmath1031    we claim that the map @xmath1032^{\\mathbb{n}}\\colon ( r , { \\vartheta } ) \\mapsto { \\vartheta}(\\mathbf{1}_r)\\ ] ] satisfies  .",
    "note that for every @xmath664 , @xmath1033 for each @xmath24 , there is a surjection @xmath946_e \\colon \\gamma \\mapsto \\gamma \\cdot x\\ ] ] from @xmath8 onto @xmath618_e$ ] .",
    "since the action @xmath834 is free a.e .",
    ", @xmath1034 is a bijection for almost all @xmath24 .",
    "hence , for almost all @xmath1035 , @xmath1034 can be used to create a `` pullback '' @xmath1036 of @xmath1037_e]^{<\\infty}_{[0;1]}$ ] , which is a correct instance over @xmath8 .",
    "formally , for @xmath1038^{<\\infty}$ ] and @xmath1039 $ ] , we set @xmath1040 note that whenever @xmath801 , @xmath312 , @xmath927^{\\gamma \\times { \\mathbb{n}}}$ ] , and both @xmath1041 and @xmath1042 belong to the free part of @xmath834 , the map @xmath1043 is a well - defined @xmath796-equivariant bijection between @xmath1044_e$ ] and @xmath1045_e$ ] .",
    "therefore , since @xmath146 is @xmath232-invariant a.e . , the following definition makes sense for almost all @xmath801 : @xmath1046^{\\gamma \\times { \\mathbb{n}}}.\\ ] ] now , for almost every @xmath801 and for all @xmath664 , using corollary  [ corl : countable ] , we obtain @xmath1047^{\\gamma \\times { \\mathbb{n}}}\\,:\\ , \\text{$\\gamma \\cdot ( r , { \\vartheta})$ is $ \\beta$-stable with respect to $ b$}\\})\\\\                          = & \\lambda^{\\gamma \\times { \\mathbb{n } } } ( \\{{\\vartheta}\\in [ 0;1]^{\\gamma \\times { \\mathbb{n}}}\\,:\\ , \\text{$\\gamma$ is $ { \\vartheta}$-stable with respect to $ b_r$}\\ } ) = 1 .",
    "\\end{aligned}\\ ] ] an application of fubini s theorem yields .",
    "now we have all the necessary ingredients to prove the following generalization of theorem  [ theo : thm1 ] :    let @xmath687 be an l - system that admits a factor map to a lebesgue l - system . then @xmath687 satisfies the lll .    we need to verify that the class @xmath704 of lebesgue l - systems satisfies conditions  ( b1 ) and ( b2 ) from  [ prg : factors ] . condition  ( b1 ) is given by lemma  [ lemma : lebesguehf0 ] .",
    "it remains to show that if @xmath687 is a lebesgue l - system and @xmath146 is a correct borel instance over @xmath687 , then there is a @xmath691-solution @xmath3 for @xmath146 such that @xmath710 $ ] factors to a lebesgue l - system .    to this end , suppose that @xmath687 is induced by the @xmath7 ^ 2$]-shift action of a countable borel groupoid @xmath796 with measure @xmath1048 , where @xmath872 .",
    "consider the l - system @xmath933 induced by the @xmath7$]-shift action of @xmath796 with measure @xmath1049 .",
    "the map @xmath1050^\\gamma \\times [ 0;1]^\\gamma \\to r \\times [ 0;1]^\\gamma \\colon ( r , { \\vartheta } , \\omega ) \\mapsto ( r , { \\vartheta})\\ ] ] is @xmath796-equivariant and measure - preserving , so , by lemma  [ lemma : equivariant ] , it is a factor map from @xmath687 to  @xmath933 .",
    "hence , due to lemma  [ lemma : pushforward ] , there is a correct instance @xmath1051 for @xmath933 such that if @xmath1052 is a @xmath1053-solution for @xmath1051 , then @xmath1054 is a @xmath1055-solution for @xmath146 ( modulo an invariant null set ) .",
    "lemma  [ lemma : main ] does indeed provide a @xmath1053-solution @xmath1052 for @xmath1051 , so let @xmath1056 .",
    "note that , by definition , @xmath3 does not depend on the third coordinate .",
    "therefore , by lemma  [ lemma : expansion ] , @xmath710 $ ] factors to a lebesgue l - system , as desired .",
    "theorem  [ theo : thm1 ] asserts that if a probability measure - preserving action @xmath1057 of a countable group @xmath8 factors to the shift action @xmath246^\\gamma , \\lambda^\\gamma)$ ] , then the induced l - system satisfies the  lll . in this section",
    "we show that if @xmath8 is amenable , then the converse implication also holds .",
    "in fact , we will show that the existence of a factor map to the shift action in this case is implied by ( seemingly ) much weaker assumptions than satisfying the  lll .    to state these weaker assumptions , we need some definitions . an instance @xmath146 over a set  @xmath1",
    "is said to be _",
    "@xmath130-correct _ , where @xmath1058 $ ] , if it is locally countable and there is a function @xmath163 such that for all @xmath164 , @xmath1059 hence , @xmath146 is @xmath301-correct if and only if it is correct , and @xmath1060 whenever @xmath1061 .",
    "an instance @xmath146 over a set @xmath1 is said to be _ discrete _ if there exist a finite set @xmath69 , @xmath1062^{<\\infty}_{s}$ ] , and a borel function @xmath1063 \\to s$ ] such that @xmath146 is the `` pullback''of @xmath1051 under @xmath533 , i.e. , for all @xmath186^{<\\infty}_{[0;1]}$ ] , we have @xmath1064 most instances of the  lll that appear in combinatorial applications are discrete ; they correspond to randomly choosing a `` color '' for each @xmath24 from @xmath69 using the probability measure  @xmath1065 .",
    "if @xmath1065 is the uniform probability measure on @xmath69 , then @xmath146 is said to be _",
    "uniformly discrete_.    recall that for a graph @xmath15 on @xmath1 , @xmath656 is the isomorphism structure on @xmath14 such that a bijection @xmath1066 belongs to @xmath662 if and only if @xmath481 , @xmath658^{<\\infty}$ ] and @xmath533 is an isomorphism between @xmath1067 and @xmath1068 .",
    "it is clear from the above definition that an instance @xmath146 over @xmath14 is @xmath656-invariant if and only if @xmath160 is determined by the isomorphism class of the induced subgraph @xmath1069 .",
    "note that since @xmath1070 , the class of @xmath656-invariant instances is more restrictive than the class of @xmath237-invariant ones .",
    "an instance @xmath146 over @xmath15 , where @xmath15 is a graph on @xmath1 , is said to be _",
    "@xmath15-connected _ if for all @xmath164 , the graph @xmath1069 is connected .",
    "most combinatorial applications of the lll to graph - theoretic problems only consider connected instances .    to put everything together",
    ", an instance @xmath146 over @xmath14 , where @xmath15 is a graph on @xmath1 , is said to be _ @xmath1071-nice _ if it is @xmath130-correct , uniformly discrete , @xmath656-invariant , and @xmath15-connected .",
    "recall that for an instance @xmath146 over @xmath1 and a map @xmath169 $ ] , the @xmath146-defect of @xmath3 is the set @xmath1072 now we are ready to state the first version of the converse theorem .",
    "[ theo : thm2 ] let @xmath36 be a free borel action of a countably infinite amenable group  @xmath8 on a standard borel space @xmath1 and let @xmath252 be an ergodic invariant probability measure .",
    "let @xmath37 be a finite generating set and let @xmath72 .",
    "then the following conditions are equivalent :    1 .",
    "there exists @xmath1058 $ ] such that for every @xmath1071-nice borel instance @xmath146 over @xmath14 , there is a borel map @xmath1073 $ ] with @xmath1074 ; 2 .",
    "there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] .",
    "note that theorem  [ theo : thm2 ] does not hold for infinite @xmath69 . to see this , consider any free borel action @xmath36 of a countably infinite amenable group @xmath8 on a standard borel space @xmath1 and let @xmath252 be an ergodic invariant probability measure .",
    "take @xmath1075 .",
    "we claim that the l - system @xmath1076 satisfies the  lll , with no restriction on @xmath75 .",
    "indeed , @xmath1077 , where @xmath1078 . since , by a theorem of dye and ornstein  weiss ( see  ( * ? ? ? * theorem  10.7 ) ) ,",
    "all free probability measure - preserving ergodic actions of countable amenable groups are orbit - equivalent , @xmath687 factors to @xmath1079 , where @xmath1080^{\\mathbb{z}}$ ] is the shift action of @xmath57 on @xmath7^{\\mathbb{z}}$ ] . by theorem  [ theo : thm1 ] , @xmath1079 , and",
    "hence  @xmath687 , satisfies the  lll .    however , by remembering slightly more about the action than just the graph @xmath240 , one can still prove an analog of theorem  [ theo : thm2 ] for infinite @xmath69 . an _ ( @xmath69-)labeled graph _ on @xmath1 is a family @xmath1081 of graphs on @xmath1 indexed by the elements of @xmath69 , where @xmath69 is a countable set .",
    "note that the sets @xmath1082 are not assumed to be disjoint , i.e. , the same edge can receive more than one label .",
    "a labeled graph @xmath15 on a standard borel space is said to be _ borel _ if each @xmath1082 is borel .",
    "an isomorphism between labeled graphs @xmath1083 and @xmath1084 is required to preserve the labeling , i.e. , it has to be an isomorphism between each @xmath1085 and @xmath1086 .",
    "for an @xmath69-labeled graph @xmath15 on @xmath1 and a subset @xmath19 , let @xmath1087 be the @xmath69-labeled graph on @xmath20 given by @xmath1088 .",
    "for an @xmath69-labeled graph @xmath15 on @xmath1 , let @xmath1089 ( note that @xmath1090 is an ordinary graph on @xmath1 ) . a labeled graph @xmath15",
    "is said to be _ connected _ if @xmath14 has a single class .",
    "the definition of  @xmath656 extends verbatim to the case when @xmath15 is labeled , as do the definitions of @xmath15-connected and @xmath1071-nice instances over @xmath14 .",
    "if @xmath36 is an action of a countable group @xmath8 on a set @xmath1 and @xmath37 is a generating set , then @xmath1091 is the @xmath69-labeled graph on @xmath1 given by @xmath1092 note that @xmath1093",
    "so we have @xmath1094 .",
    "now we have the following :    theo : thm2[theo : thm2bis ] let @xmath36 be a free borel action of a countably infinite amenable group  @xmath8 on a standard borel space @xmath1 and let @xmath252 be an ergodic invariant probability measure .",
    "let @xmath37 be a generating set and let @xmath1095 .",
    "then the following conditions are equivalent :    1 .",
    "there exists @xmath1058 $ ] such that for every @xmath1071-nice borel instance @xmath146 over @xmath14 , there is a borel map @xmath1073 $ ] with @xmath1074 ; 2 .",
    "there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] .",
    "note that theorems  [ theo : thm2 ] and [ theo : thm2bis ] also show that the local finiteness requirement in the statement of theorem  [ theo : approxlll ] is necessary .",
    "the proofs of theorems  [ theo : thm2 ] and [ theo : thm2bis ] are almost identical , so we will present them at the same time .",
    "we only need to show the forward direction in both statements , namely that being able to find ( approximate ) solutions for nice instances of the  lll implies the existence of a factor map to the shift action ( the backward direction is handled by theorem  [ theo : thm1 ] ) . in this paragraph",
    "we briefly sketch our plan of attack .    for simplicity , assume that @xmath1096 and let @xmath1097 be a free ergodic probability measure - preserving borel action of @xmath57 on a standard probability space @xmath87 .",
    "there is a simple criterion , called _",
    "sinai s factor theorem _ , which determines if there is a factor map @xmath89^{\\mathbb{z } } , \\lambda^{\\mathbb{z}})$ ] : such a map exists if and only if @xmath75 has infinite _ kolmogorov",
    " sinai entropy_. the kolmogorov ",
    "sinai entropy of @xmath75 is defined as follows .",
    "first , consider any borel function @xmath1098 to a finite set @xmath69 .",
    "the _ shannon entropy _ of @xmath3 measures how `` uncertain '' the value @xmath153 is for @xmath16 chosen randomly with respect to @xmath4 ; formally , @xmath1099 now the action comes into play : given @xmath24 and @xmath272 , we record the values @xmath1100 , @xmath1101 ,  , @xmath1102 ; let @xmath1103 denote the corresponding function .",
    "we can compute the _ average _ amount of uncertainty in @xmath1104 per symbol ; in other words , we can look at the quantity @xmath1105 .",
    "it turns out that , as @xmath565 grows , @xmath1105 decreases , so there is a limit @xmath1106 this limit is called the _ kolmogorov ",
    "sinai entropy _ of @xmath3 with respect to @xmath75 .",
    "the _ kolmogorov ",
    "sinai entropy _ of the action @xmath75 itself measures the `` maximum level of uncertainty '' that can be achieved with respect to @xmath75 ; formally , it is defined to be @xmath1107 . as we mentioned before , @xmath75 factors to the @xmath7$]-shift action if and only if @xmath1108 .",
    "how can we use the  lll to prove that @xmath1109 ? by definition , we have to exhibit functions @xmath3 with arbitrarily large values of @xmath1110 .",
    "but @xmath1110 is a `` global '' parameter  it is defined in terms of the measures of some subsets of @xmath1while instances of the  lll can only put `` local '' constraints on @xmath3 .",
    "notice , however , that high value of @xmath1111 indicates that the functions @xmath1112 behave very `` randomly '' or `` unpredictably . ''",
    "thus , what we need is a way to measure `` randomness '' or `` unpredictability '' deterministically , which we can apply to the values of @xmath1112 at each point instead of looking at the function @xmath1112 as a whole .",
    "there is indeed a convenient deterministic analog of shannon s entropy , namely the so - called _",
    "kolmogorov complexity_. roughly speaking , a finite sequence @xmath210 of symbols has high kolmogorov complexity if there is no way to encode it by a significantly shorter sequence .",
    "our instance of the  lll will require @xmath1104 to have high kolmogorov complexity for all @xmath272 and @xmath24 .",
    "we will show that solving this instance , even partially , guarantees that @xmath1110 is also high .",
    "the structure of the rest of this section is as follows . in [ prg : preliminaries ] we list all the necessary definitions and preliminary results regarding the structure of amenable groups , kolmogorov ",
    "sinai entropy of their actions ( including the version of sinai s factor theorem with a general amenable group in place of @xmath57 ) , and kolmogorov complexity . in [ prg :",
    "complexity_vs_entropy ] we prove the main lemma that connects kolmogorov complexity and kolmogorov  sinai entropy . finally , [ prg : finish ] completes the proof by constructing a series of @xmath1071-nice instances whose solutions necessarily have high kolmogorov complexity and hence high kolmogorov ",
    "sinai entropy .",
    "[ [ background - on - amenable - groups ] ] background on amenable groups + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    for a group @xmath8 , subsets @xmath69 , @xmath1113 , and an element @xmath664 , let @xmath1114    recall that a countable group @xmath8 is called _ amenable _ if it admits a _ flner sequence _ , i.e. , a sequence @xmath1115 of nonempty finite subsets of @xmath8 such that for all @xmath664 , @xmath1116 where @xmath1117 denotes symmetric difference of sets .",
    "note that if @xmath37 is a generating set and   holds for all @xmath1118 , then @xmath1115 is a flner sequence ( see  ( * ? ? ?",
    "* remark  5.12 ) ) .",
    "[ prop : connectedfolner ] suppose @xmath8 is a countably infinite amenable group and @xmath37 is a generating set .",
    "let @xmath1119 be the corresponding cayley graph .",
    "then @xmath8 admits a flner sequence @xmath1115 such that each finite graph @xmath1120 is connected .",
    "let @xmath1121 and let @xmath1115 be a flner sequence for @xmath8 . by passing to a subsequence if necessary , we can arrange that for all @xmath272 , @xmath1122 suppose @xmath1123 has @xmath1124 connected components and let @xmath1125 ,  , @xmath1126 be their vertex sets .",
    "note that , since @xmath1127 for all @xmath1128 , we have @xmath1129 and the union on the right - hand side of is disjoint",
    ". therefore , @xmath1130 thus , @xmath1131 if for all @xmath1132 , we have @xmath1133 then @xmath1134 which contradicts .",
    "hence , for some @xmath1135 , @xmath1136 now @xmath1137 is a flner sequence consisting of connected sets .",
    "[ corl : goodfolner ] suppose @xmath8 is a countably infinite amenable group and @xmath37 is a generating set .",
    "let @xmath1119 be the corresponding cayley graph .",
    "then @xmath8 admits a flner sequence @xmath1115 such that :    1 .   for each @xmath272 , the graph @xmath1138 is connected",
    "@xmath1139 , where @xmath813 is the identity element of @xmath8 ; 3 .",
    "@xmath1140 ; 4 .",
    "@xmath1141 .",
    "proposition  [ prop : connectedfolner ] provides a flner sequence @xmath1115 satisfying the first condition . since @xmath8 is infinite ,",
    "@xmath1142 as @xmath1143 . if @xmath1144 for some @xmath272 , then choose any @xmath1145 and replace @xmath1146 with @xmath1147 .",
    "we construct a new sequence @xmath1148 recursively .",
    "let @xmath1121 and for @xmath272 , let @xmath1149 let @xmath1150 be the set of all elements of @xmath8 that can be expressed as products of at most @xmath565 elements of @xmath1151 .",
    "let @xmath1152 . on step @xmath388",
    ", choose @xmath1153 large enough so that @xmath1154 and let @xmath1155 clearly , @xmath1148 is a flner sequence satisfying all the requirements .    we will use a result of ornstein ",
    "weiss on the existence of quasi - tilings in amenable groups .",
    "a family @xmath1156 of finite sets is said to be _",
    "@xmath130-disjoint _ ,",
    "where @xmath226 , if there exist disjoint subsets @xmath1157 ,  , @xmath1158 such that for all @xmath1159 , @xmath1160 a finite set @xmath258 is _ @xmath1161-covered _ by @xmath1156 if @xmath1162 let @xmath8 be a countable group and let @xmath258 , @xmath1163 ,  , @xmath407 be finite subsets of @xmath8 .",
    "an _ @xmath130-quasi - tiling _ of  @xmath258 by @xmath1156 is a family @xmath1164 of finite subsets of @xmath8 such that :    1 .   for each @xmath1159 , @xmath1165 and the family of sets",
    "@xmath1166 is @xmath130-disjoint ; 2 .",
    "the sets @xmath1167 are disjoint ; 3 .",
    "@xmath258 is @xmath1168-covered by the family @xmath1167 .",
    "[ theo : quasitiling ] let @xmath8 be a countable amenable group and let @xmath1115 be a flner sequence in @xmath8 .",
    "then for all @xmath226 and @xmath272 , there exist @xmath1169 ,  , @xmath1170 , @xmath1171 with @xmath1172 such that for each @xmath1173 , there exists an @xmath130-quasi - tiling of @xmath1174 by @xmath1175 .",
    "[ [ background - on - kolmogorovsinai - entropy ] ] background on kolmogorov ",
    "sinai entropy + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    an important invariant of an amenable probability measure - preserving system is its kolmogorov  sinai entropy .",
    "it is usually defined in terms of finite borel partitions ; however , for our purposes it will be more convenient to define it in terms of borel functions with finite range ( the two notions are , of course , equivalent ) .",
    "let @xmath1 be a standard borel space and let @xmath252 .",
    "a _ finite coloring _ of @xmath1 is a function @xmath1098 , where @xmath69 is a finite set .",
    "the _ shannon entropy _ of a borel finite coloring @xmath1176 ( notation : @xmath1177 ) is defined to be @xmath1178 here we adopt the convention that @xmath1179 . note that @xmath1180 .",
    "suppose that @xmath86 is a probability measure - preserving borel action of a countable amenable group @xmath8 .",
    "for a finite coloring @xmath1098 and a set @xmath1181^{<\\infty}$ ] , let @xmath1182 be the finite coloring such that for all @xmath24 and @xmath1183 , @xmath1184 the _ kolmogorov  sinai entropy _ of a borel finite coloring @xmath3 with respect to @xmath75 is defined by @xmath1185 where @xmath1115 is a flner sequence in @xmath8 .",
    "due to a fundamental result of ornstein and weiss  @xcite , the limit in   always exists and is independent of @xmath1115 .",
    "note that , again , @xmath1186 , where @xmath69 is the range of @xmath3 .",
    "the _ kolmogorov ",
    "sinai entropy _ of @xmath75 is defined as follows : @xmath1187    we will use the following special case of a generalization of sinai s factor theorem to actions of arbitrary amenable groups due to ornstein and weiss .",
    "let @xmath36 be a free borel action of a countably infinite amenable group @xmath8 on a standard borel space @xmath1 and let @xmath252 be an ergodic invariant probability measure .",
    "suppose that @xmath1109 .",
    "then there exists a factor map @xmath89^\\gamma , \\lambda^\\gamma)$ ] to the shift action of @xmath8 on @xmath7^\\gamma$ ] .",
    "[ [ background - on - kolmogorov - complexity ] ] background on kolmogorov complexity + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    we will use some basic properties of kolmogorov complexity . for sets",
    "@xmath1 , @xmath2 , a _ partial function _",
    "@xmath3 from @xmath1 to @xmath2 ( notation : @xmath1188 ) is a function of the form @xmath671 , where @xmath19 .",
    "let @xmath1189 denote the set of all finite sequences of zeroes and ones ( including the empty one ) .",
    "for @xmath1190 , let @xmath1191 denote the length of @xmath210 .",
    "for a partial function @xmath1192 , define the map @xmath1193  by @xmath1194 for two partial functions @xmath1195 , @xmath1196 , we say that @xmath1195 _ minorizes _ @xmath1197 ( notation :  @xmath1198 ) if there is a constant @xmath1199 such that for all @xmath1200 , @xmath1201 clearly , @xmath1202 is a preorder on the set of all partial maps from @xmath1189 to itself . if @xmath704 is a class of partial functions from @xmath1189 to itself , then @xmath1203 is _ optimal _ in @xmath704 if for all @xmath1204 ,  @xmath1205 .    we restrict our attention to the class of partial maps @xmath1192 that are computable relative to some oracle @xmath1206 ( denote this class by @xmath1207 ) .",
    "a cornerstone of the theory of kolmogorov complexity is the following observation :    [ theo : solkol ] fix an oracle @xmath1206 .",
    "there exists a map @xmath1208 that is optimal in @xmath1207 .    using theorem  [ theo : solkol ] , we can define the _ kolmogorov complexity _ of a word @xmath1200 relative to an oracle @xmath1206 to be @xmath1209 for some fixed optimal @xmath1208 . note that if @xmath1210 , @xmath1211 are two optimal functions , then there is a constant @xmath1199 such that @xmath1212 for all @xmath1200 ; in this sense , the value @xmath1213 is defined up to an additive constant .",
    "the following property of kolmogorov complexity will play a key role in our argument .",
    "[ prop : kolmogorovprob ] fix an oracle @xmath1206 .",
    "let @xmath504 , @xmath272 and let @xmath1214 denote the uniform probability measure on @xmath1215 .",
    "then @xmath1216    let @xmath1208 be the optimal function used in the definition of kolmogorov complexity relative to @xmath1206 .",
    "there are exactly @xmath1217 sequences of zeroes and ones of length at most @xmath1218 , so there can be at most @xmath1217 words @xmath1200 with @xmath1219 . since there are @xmath1220 words of length @xmath565 , we get @xmath1221 as desired .      for the rest of this section",
    ", we fix a countably infinite amenable group @xmath8 , a generating set @xmath1222 , a standard borel space @xmath1 , a free borel action @xmath36 , and an ergodic invariant probability measure @xmath252 .",
    "we also fix a flner sequence @xmath1115 in @xmath8 satisfying the conditions of corollary  [ corl : goodfolner ] , i.e. , such that :    1 .   for each @xmath272 , the graph @xmath1138 is connected",
    "@xmath1139 , where @xmath813 is the identity element of @xmath8 ; 3 .",
    "@xmath1140 ; 4 .",
    "@xmath1141 .",
    "let @xmath1206 be an oracle relative to which the following data are computable :    1 .",
    "the group structure of @xmath8 and a fixed linear ordering @xmath263 on @xmath8 ( we can assume , for instance , that the ground set of @xmath8 is @xmath247 ) ; 2 .   the sequence @xmath1115 ( meaning that the set of pairs @xmath1223 and the sequence @xmath1224 are decidable relative to @xmath1206 ) .",
    "let @xmath1225 .",
    "for a set @xmath1181^{<\\infty}$ ] , the ordering on @xmath8 induces a bijection between @xmath1226 and @xmath1227 ; namely , if @xmath1228 with @xmath1229 and @xmath1230 , then the corresponding element of @xmath1227 is @xmath1231 where @xmath212 denotes concatenation of finite sequences . using this identification , we can talk about kolmogorov complexity of elements of @xmath1226 .",
    "given @xmath1232 , @xmath272 , and @xmath24 , let @xmath1233 note that for a borel finite coloring @xmath3 , the map @xmath1234 is borel .",
    "the following lemma connects kolmogorov complexity and kolmogorov  sinai entropy :    [ lemma : complexity_vs_entropy ] let @xmath1225 and let @xmath1232 be a borel finite coloring of @xmath1",
    ". then @xmath1235    the proof is inspired by the work of brudno  @xcite , establishing a relationship between kolmogorov complexity and kolmogorov  sinai entropy in the case of @xmath57-actions ( see also  @xcite for an extension of brudno s theory to a wider class of amenable groups ) .",
    "fix @xmath1236 .",
    "choose @xmath272 large enough so that for all @xmath1237 , @xmath1238 for most of the proof @xmath565 and @xmath206 will be treated as fixed constants . in particular , implied constants in the bachmann ",
    "landau asymptotic notation can depend on @xmath565 and @xmath206 . by theorem  [ theo : quasitiling ]",
    ", we can choose @xmath183 , @xmath1169 , ",
    ", @xmath1170 , @xmath1171 such that @xmath1239 and for every @xmath1173 , there exists an @xmath130-quasi - tiling of @xmath1174 by @xmath1240 . for @xmath1173 ,",
    "let @xmath1241 be an @xmath130-quasi - tiling of @xmath1174 by @xmath1175 chosen in such a way that the map @xmath1242 is computable relative to @xmath1206 .",
    "we will now devise a binary code for pairs of the form @xmath1243 , where @xmath1173 and @xmath1244 . the decoding procedure for this code will be computable relative to @xmath1206 ,",
    "so its length will provide an upper bound on the kolmogorov complexity of @xmath210 ( modulo an additive constant ) .",
    "let @xmath1245 be the sequence of @xmath1246 ones followed by a single zero .",
    "let @xmath1247 be any fixed binary code for @xmath340 of length exactly @xmath1246 .",
    "note that for any @xmath1248 , the pair @xmath1249 is uniquely determined by @xmath1250 .",
    "also note that @xmath1251 .",
    "consider the set @xmath1252 we can view @xmath1253 as a binary word of length @xmath1254 .",
    "denote this word by @xmath1255 .",
    "note that the length of @xmath1256 is determined by @xmath340 and satisfies @xmath1257 since @xmath1174 is @xmath1161-covered by the family @xmath1258 .    for each @xmath1159 and @xmath1259",
    ", we can view @xmath1260 as a binary word of length @xmath1261 . for each binary word @xmath208 of length @xmath1261 ,",
    "let @xmath1262 be the frequency of @xmath208 among the words of the form @xmath1263 , i.e. , let @xmath1264 note that , by definition , @xmath1265 where the summation is over all binary words of length @xmath1261 . since @xmath1266 , we can encode @xmath1267 by a binary word @xmath1268 of length exactly @xmath1269 , so the length of @xmath1270 is determined by  @xmath340 .",
    "let @xmath1271 denote the concatenation of all the words of the form @xmath1270 , where @xmath208 is a binary word of length @xmath1261 , and let @xmath1272 .",
    "the length of @xmath1273 is at most @xmath1274 .",
    "now we consider the word @xmath1275 since @xmath1276 is determined by @xmath1277 , there are at most @xmath1278 options for @xmath1276 , where the product is over all binary words of length @xmath1261 .",
    "note that , due to stirling s formula and equation  , we have @xmath1279 thus , provided that @xmath340 and all the @xmath1262 s are given , we can encode @xmath1276 by a word @xmath1280 of length @xmath1281 let @xmath1282 .",
    "then the length of @xmath1283 is at most @xmath1284    our code for @xmath1285 is @xmath1286 it is clear that @xmath1287 uniquely determines @xmath340 and @xmath210 and , moreover , the map @xmath1288 is computable relative to @xmath1206 . combining the estimates for the lengths of @xmath1245 , @xmath1247 , @xmath1256 , @xmath1273 , and @xmath1283",
    ", we get @xmath1289 since @xmath1290 , the same asymptotic upper bound holds for @xmath1291 as well .    applying this analysis to a point @xmath24",
    ", we obtain @xmath1292    [ claim : oneterm ] for each @xmath1173 , @xmath1159 , and a binary word @xmath208 of length @xmath1261 , we have @xmath1293    recall that , by definition , @xmath1294 notice that @xmath1295 so @xmath1296 therefore , @xmath1297 where the second equality holds since @xmath4 is invariant .",
    "note that the function @xmath1298 is concave for @xmath1299 , so , by claim  [ claim : oneterm ] , for @xmath1159 , we have @xmath1300 combining this with gives @xmath1301 recall that , by the choice of @xmath565 , @xmath1302 for all @xmath1237 .",
    "since @xmath1239 , we get @xmath1303 since the family @xmath1258 is disjoint , and for each @xmath1159 , the family @xmath1304 is @xmath130-disjoint , we have @xmath1305 so @xmath1306 since   holds for every @xmath1307 and for every sufficiently large @xmath340 , we finally obtain @xmath1308 as desired .",
    "let @xmath1309 if @xmath69 is finite , let @xmath1310 denote the corresponding unlabeled cayley graph ; otherwise , the graph @xmath1310 is assumed to be @xmath69-labeled .",
    "let @xmath1058 $ ] be such that for every @xmath1071-nice borel instance @xmath146 over @xmath14 , there is a borel map @xmath1073 $ ] with @xmath1074 .",
    "our goal is to show that @xmath1109 .    for @xmath206 ,",
    "@xmath1311 with @xmath1312 , we will construct a borel instance @xmath1313 over @xmath14 .",
    "it will be uniformly discrete ; we identify it with a borel subset of @xmath1314^{<\\infty}_{{\\{0,1\\}}^s}$ ] instead of the usual @xmath1314^{<\\infty}_{[0;1]}$ ] .    for @xmath272 ,",
    "let @xmath1315 .",
    "note that , by the choice of @xmath1115 , each @xmath10 is connected . for @xmath1316^{<\\infty}$ ] , a function @xmath1317 belongs to @xmath1313 if and only if , for some @xmath272 , the graphs @xmath10 and @xmath1318 are isomorphic and there is an isomorphism @xmath1319 such that @xmath1320 it is clear from the definition that @xmath1313 is a uniformly discrete @xmath1321-invariant @xmath15-connected borel instance over @xmath14 .",
    "we will show that there is a constant @xmath1322 such that for all @xmath1312 , @xmath1313 is @xmath130-correct .",
    "let @xmath1323    [ lemma : counting_embeddings ] for all @xmath272 , @xmath1145 , and @xmath24 , the number of isomorphic embeddings @xmath1324 of @xmath10 into @xmath15 such that @xmath1325 is at most @xmath1326 .",
    "notice that if @xmath69 is finite , then the maximum degree of @xmath15 is at most @xmath116 ; and if @xmath69 is infinite , then for any given @xmath1327 and any @xmath17 , there are at most @xmath12 edges in @xmath15 labeled by @xmath1328 that are incident to @xmath99 .",
    "now the statement follows from the connectedness of  @xmath10 .",
    "[ lemma : counting_isomorphisms ] for all @xmath1316^{<\\infty}$ ] , if @xmath1329 , then there are at most @xmath1330 isomorphisms between @xmath10 and @xmath1331 .",
    "this is an immediate consequence of lemma  [ lemma : counting_embeddings ] ; indeed , for any @xmath1145 , there are  @xmath1332 choices for the image of @xmath65 in @xmath1333 , and any fixed choice can be extended in at most @xmath1334 ways .",
    "[ lemma : counting_neighbours ] for all @xmath1316^{<\\infty}$ ] and @xmath375 , there are at most @xmath1335 elements of @xmath1336 of size @xmath183 that intersect @xmath1333 .",
    "if there is no @xmath272 with @xmath1337 , then no element of @xmath1336 has size @xmath183 , so we are trivially done .",
    "suppose that @xmath1337 ( there is a unique such @xmath565 since the sequence @xmath1338 is strictly increasing ) .",
    "if @xmath1339 and @xmath1340 , then there is an isomorphism @xmath1341 between @xmath10 and @xmath1342 .",
    "if @xmath1343 , then there exist @xmath1145 and @xmath421 such that @xmath1325 .",
    "now we have @xmath183 choices for @xmath65 , @xmath1332 choices for @xmath16 , and , by lemma  [ lemma : counting_embeddings ] , at most @xmath1344 choices for @xmath533 given @xmath65 and @xmath16 .",
    "let @xmath1345 denote the uniform probability measure on @xmath1346 . by proposition  [ prop : kolmogorovprob ] and",
    "lemma  [ lemma : counting_isomorphisms ] , if @xmath1316^{<\\infty}$ ] and @xmath1347 , then @xmath1348 hence , due to lemma  [ lemma : counting_neighbours ] , to show that @xmath1313 is @xmath130-correct , it is enough to find a sequence of numbers @xmath1349 , where each @xmath1350 , such that for all @xmath272 , @xmath1351 note that inequality   does not mention @xmath206 ; in other words , if we can solve it , then for any @xmath1312 , the instance @xmath1352 will be @xmath130-correct .    to solve , let @xmath1353 be a sufficiently small real number and let @xmath1354 .",
    "then for every @xmath272 , we have @xmath1355 moreover , we can choose @xmath1356 so that the series @xmath1357 converges ; denote its sum by @xmath504 .",
    "now we have",
    "@xmath1358 so holds whenever @xmath1359 i.e. , @xmath1360 choose any @xmath1311 that satisfies  ; for all @xmath1312 , @xmath1313 is @xmath130-correct .",
    "if @xmath1313 is @xmath130-correct , then it is @xmath1071-nice , so there must exist a borel map @xmath1232 with @xmath1074 .",
    "since @xmath4 is ergodic , the set @xmath1361_{e_g}$ ] is @xmath4-conull .",
    "we claim that for all @xmath1362_{e_g}$ ] , @xmath1363 indeed , let @xmath24 and let @xmath1364 be such that @xmath1365 . since the sequence @xmath1366 is increasing and exhaustive , there is @xmath1171 such that for all @xmath1173 , @xmath1367 .",
    "this means that for all @xmath1173 , @xmath1368 , which , by the definition of @xmath1313 , implies @xmath1369 , as desired .    using fatou s lemma together with lemma  [ lemma : complexity_vs_entropy ]",
    ", we obtain @xmath1370 since for any @xmath1312 , we can find @xmath3 such that holds , @xmath1109 , as desired .    [ [ acknowledgments ] ] acknowledgments + + + + + + + + + + + + + + +    this work is supported by the illinois distinguished fellowship .",
    "i am grateful to andrew zucker for pointing out a mistake in an earlier version of this manuscript and to anush tserunyan for introducing me to the field of borel combinatorics and for her constant support and encouragement .    99    n.  alon , j.  grytczuk , m.  hauszczak , and o.  riordan .",
    "_ nonrepetitive colorings of graphs_. random structures & algorithms , volume 21 , issue 34 , 2002 .",
    "pages 336346 .",
    "n.  alon , c.  mcdiarmid , and b.  reed .",
    "_ acyclic coloring of graphs_. random structures and algorithms , volume 2 , no . 3 , 1991 .",
    "pages 277288 .",
    "n.  alon , j.h .",
    "spencer . _ the probabilistic method_. wiley , new york , 1992 .    j.a .",
    "bondy , u.s.r .",
    "_ graph theory_. springer - verlag , london , 2008 .",
    "o.  borodin , a.  kostochka .",
    "_ on an upper bound on a graph s chromatic number , depending on the graphs s degree and density_. j. combin .",
    "theory ser .",
    "b , volume 23 , 1977 .",
    "pages 247250 .",
    "l.  bowen .",
    "_ weak isomorphisms between bernoulli shifts_. israel journal of mathematics , volume 183 , 2011 .",
    "pages 93102 .",
    "brudno . _ entropy and the complexity of the trajectories of a dynamical system _ ( in  russian ) .",
    "obs . , volume 44 , 1982 .",
    "pages 124149 .",
    "p.  catlin .",
    "_ hajos graph colouring conjecture : variations and counterexamples_. j. combin .",
    "theory ser .",
    "b , volume 26 , 1979 .",
    "pages 268274 .",
    "conley , a.s .",
    "_ measurable chromatic and independence numbers for ergodic graphs and group actions_. groups , geometry and dynamics , volume 7 , 2013 .",
    "pages 127180 .",
    "conley , a.s .",
    "marks , and r.tucker-drob . _",
    "brooks s theorem for measurable colorings_. http://arxiv.org/abs/1601.03361[`arxiv:1601.03361 ` ] , preprint , 2016 .",
    "conley , b.d .",
    "miller . _ a bound on measurable chromatic numbers of locally finite borel graphs_. preprint ( https://dl.dropboxusercontent.com/u/47430894/web/publications/chromaticbound.pdf[`link ` ] ) , 2016 .",
    "e.  cska , .",
    "grabowski , a.  mth , o.  pikhurko , and k.  tyros .",
    "_ borel version of the  local lemma_. https://arxiv.org/abs/1605.04877[`arxiv:1605.04877 ` ] , preprint , 2016 .",
    "e.  cska , g.  lippner , and o.  pikhurko .",
    "_ knig s line coloring and vizing s theorems for graphings_. http://arxiv.org/abs/1408.1973[`arxiv:1408.1973 ` ] , preprint , 2015 .",
    "p.  erds , l.  lovsz .",
    "_ problems and results on @xmath63-chromatic hypergraphs and some related questions_. infinite and finite sets , a. hajnal , r.  rado , and v.t .",
    "ss , editors , colloq .",
    "j. bolyai , north holland , 1975 .",
    "pages 609627 .",
    "erds , a.l .",
    "rubin and h.  taylor .",
    "_ choosability in graphs_. proc .",
    "west coast conf . on combinatorics , graph theory and computing , congressus numerantium xxvi , 1979 .",
    "pages 125157 .",
    "a.m.  frieze , t.  uczak .",
    "_ on the independence and chromatic numbers of random regular graphs_. j. combin",
    ". theory ser .",
    "b , volume 54 , 1992 .",
    "pages 123132 .",
    "t.  jensen , b.  toft .",
    "_ graph coloring problems_. wiley , new york , 1995 .",
    "a.  johansson .",
    "_ asymptotic choice number for trangle free graphs_. technical report 9195 , dimacs , 1996 .",
    "j.  kahn .",
    "_ asymptotics of the list chromatic index for multigraphs_. random structures & algorithms , volume 17 , issue 2 , 2000 .",
    "pages 117156 .",
    "_ classical descriptive set theory_. springer - verlag , new york , 1995 .",
    "kechris , a.  marks .",
    "_ descriptive graph combinatorics_. preprint ( http://www.math.caltech.edu/~kechris/papers/combinatorics15.pdf[`link ` ] ) , 2016 .",
    "kechris , b.d .",
    "_ topics in orbit equivalence_. springer - verlag , berlin , heidelberg , 2004 .",
    "kechris , s.  solecki , and s.  todorcevic .",
    "_ borel chromatic numbers_. advances in mathematics , volume 141 , 1999 .",
    "pages 144 .",
    "_ on brooks theorem for sparse graphs_. combinatorics , probability and computing , volume 4 , 1995 .",
    "pages 97132 .",
    "k.  kolipaka , m.  szegedy .",
    "_ moser and tardos meet lovsz_. stoc  11 proceedings of the forty - third annual acm symposium on theory of computing , 2011 .",
    "pages 235244 .",
    "_ expanders have a spanning lipschitz subgraph with large girth_. https://arxiv.org/abs/1303.4982[`arxiv:1303.4982 ` ] , preprint , 2013 .",
    "j.  lawrence .",
    "_ covering the vertex set of a graph with subgraphs of smaller degree_. discrete math . , volume 21 , 1978 .",
    "pages 6168 .",
    "m.  li , p.  vitnyi .",
    "_ an introduction to kolmogorov complexity and its applications_. springer , new york , 2008 .",
    "r.  lyons , f.  nazarov .",
    "_ perfect matchings as iid factors on non - amenable groups_. europ",
    ". j. combin . ,",
    "volume 32 , 2011 .",
    "pages 11151125 .",
    "a.  marks .",
    "_ a determinacy approach to borel combinatorics_. http://arxiv.org/abs/1304.3830[`arxiv:1304.3830 ` ] , preprint , 2015 .",
    "m.  molloy , b.  reed .",
    "_ graph colouring and the probabilistic method_. algorithms and combinatorics , volume 23 , springer - verlag , berlin , 2002 .",
    "n.  moriakov .",
    "_ computable flner monotilings and a theorem of brudno  ii_. http://arxiv.org/abs/1510.03833[`arxiv:1510.03833 ` ] , preprint , 2015 .",
    "r.  moser , g.  tardos .",
    "_ a constructive proof of the general lovsz local lemma_. j. acm , volume 57 , issue 2 , 2010 .",
    "ornstein , b.  weiss .",
    "_ entropy and isomorphism theorems for actions of amenable groups_. journal danalyse mathmatique , volume 48 , 1987 .",
    "pages 1141 .",
    "j.  radhakrishnan , a.  srinivasan .",
    "_ improved bounds and algorithms for hypergraph two - coloring _ , random structures and algorithms , volume 16 , 2000 .",
    "pages 432 .",
    "g.  szekeres , h.s .",
    "_ an inequality for the chromatic number of a graph_. journal of combinatorial theory , volume 4 , 1968 .",
    "pages 13 .",
    "a.  thue .",
    "_ ber unendliche zeichenreichen _ ( in german ) .",
    "norske vid .",
    "kl . , 1906 .",
    "pages 122 .",
    "a.  tserunyan .",
    "_ introduction to descriptive set theory_. lecture notes ( http://www.math.uiuc.edu/~anush/notes/dst_lectures.pdf[`link ` ] ) , 2016 .",
    "uspensky , n.k .",
    "vereshagin , and a.  shen .",
    "_ kolmogorov complexity and algorithmic randomness _",
    "( in russian ) .",
    "mccme , moscow , 2010 .",
    "v.g .  vizing . _ vertex colorings with given colors _ ( in russian ) .",
    "volume 29 , 1976 .",
    "pages 310 .",
    "t.  ward , q.  zhang . _ the abramov ",
    "rokhlin entropy addition formula for amenable group actions_. monatshefte fr mathematik , volume 114 , 1992 .",
    "pages 317329 .",
    "d.  zheng , e.  chen , and j.  yang .",
    "_ on large deviations for amenable group actions_. http://arxiv.org/abs/1507.05130[`arxiv:1507.05130 ` ] , preprint , 2016 .",
    "for completeness , we present here a proof of theorem  [ theo : mosertardos ] . recall that for this theorem we fix a set @xmath1 and a correct instance @xmath146 over @xmath1 .",
    "the theorem reads :    theo : mosertardos[theo : mtcopy ] let @xmath164 .",
    "suppose that @xmath163 is a function witnessing the correctness of @xmath146 .",
    "then @xmath1371    to prove theorem  [ theo : mtcopy ] , we establish a correspondence between neat piles and trees of a certain kind . first , let us give some general definitions .",
    "for a set @xmath258 , @xmath1372 denotes the set of all nonempty finite sequences of elements of @xmath258 . for @xmath1373",
    ", @xmath1374 denotes the length of @xmath206 , so @xmath1375 .",
    "let @xmath1376 denote the last element of @xmath206 . for @xmath206 , @xmath1377",
    ", we say that @xmath206 is a _ prefix _ of @xmath1378 ( or an _ initial segment _ of @xmath1378 ; notation : @xmath1379 ) if either @xmath1380 , or else , there is a sequence @xmath1381 such that @xmath1382 ( where @xmath212 denotes concatenation of finite sequences ) .",
    "a _ tree _ over @xmath258 is a subset @xmath1383 that is ( a ) closed under taking nonempty initial segments ; and ( b ) contains a unique sequence of length @xmath301 , called the _ root _ of @xmath1384 .    if @xmath263 is a linear order on @xmath258 , then the corresponding _ lexicographical order _",
    "@xmath1385 on @xmath1372 is defined in the usual way , i.e. , for distinct @xmath206 , @xmath1377 , @xmath1386 if and only if either @xmath1387 , or else , @xmath1388 and for the least @xmath183 such that @xmath1389 , we have @xmath1390 .",
    "we will use the following properties of the lexicographical order :    1 .   if @xmath1387 , then @xmath1391 ; 2 .   if @xmath1391 and @xmath1392 , then @xmath1393 for all @xmath1381 .",
    "now we return to our problem .",
    "fix an arbitrary linear order @xmath263 on @xmath306 and the induced lexicographical order @xmath1385 on @xmath1394 . consider a neat pile @xmath349 with a unique top element  @xmath579 .",
    "for @xmath355 , a _",
    "@xmath50-path _ in @xmath349 is a sequence @xmath579 , @xmath365 ,  ,",
    "@xmath1395 of elements of @xmath349 such that @xmath1396 and @xmath1397 .",
    "note that if @xmath50 , @xmath362 , @xmath1398 , @xmath363 , @xmath1399 , and @xmath1400 , then @xmath1401 . indeed , suppose that @xmath1402 and let @xmath1403 . by the definition of the relation @xmath370 ,",
    "there exist @xmath213 , @xmath1404 such that @xmath1405 and @xmath1406 . since @xmath349 is neat , @xmath1407",
    "; since the graphs of @xmath362 and @xmath1408 are disjoint , we get @xmath1409 .",
    "similarly , we have @xmath1410 , which contradicts the neatness of  @xmath349 .    from the above observation it follows that",
    "for every @xmath1411 , there is at most one path @xmath579 ,  ,",
    "@xmath1412 in @xmath349 such that @xmath1413 for all @xmath1414 ; if such a path exists , then we denote the element @xmath1412 in it by @xmath1415 .",
    "note that if @xmath1416 and @xmath1417 is defined , then @xmath1418 is also defined and @xmath1419 .",
    "for @xmath355 , let @xmath1420 denote the lexicographically largest sequence @xmath1411 such that @xmath1421 ( note that the set of such sequences is nonempty and finite , so this definition always makes sense ) .",
    "[ lemma : tree_order ] let @xmath349 be a neat pile with a unique top element .",
    "suppose that @xmath50 , @xmath351 and @xmath1422 .",
    "then @xmath1423    let @xmath1424 and let @xmath1425 . if , say , @xmath1426 , then there is a sequence @xmath365 ,  , @xmath1395 of elements of @xmath349 such that @xmath1427 , @xmath1428 , and @xmath1429 .",
    "therefore , the sequence @xmath1430 satisfies @xmath1431 .",
    "hence , @xmath1432 , as desired .",
    "the case @xmath432 is the same , _",
    "mutatis mutandis_.    call a sequence @xmath1411 _ proper _ if for all @xmath1433 , @xmath1434 .",
    "note that if @xmath349 is a neat pile with a unique top element , then @xmath1417 can only be defined if @xmath208 is proper .",
    "a tree @xmath1384 over @xmath306 is _ proper _ if every element of @xmath1384 is proper . for @xmath164 ,",
    "let @xmath1435 denote the set of all proper finite trees with root @xmath1436 .",
    "[ lemma : injection ] let @xmath164 and let @xmath387 .",
    "then @xmath1437 moreover , the map @xmath1438 is injective .    .40   with unique top element @xmath1439 . if @xmath1440 , then @xmath1441 ; otherwise , @xmath1442.,title=\"fig:\",scaledwidth=97.0% ]    .60   with unique top element @xmath1439 . if @xmath1440 , then @xmath1441 ; otherwise , @xmath1442.,title=\"fig:\",scaledwidth=97.0% ]    let @xmath387 and let @xmath1443 .",
    "denote the unique top element of @xmath349 by @xmath579 ; note that @xmath1444 .",
    "suppose that @xmath1445 and @xmath1446 is such that @xmath1416 .",
    "we claim that @xmath1447 ( and thus @xmath1448 ) . indeed , suppose that @xmath1449 , where @xmath1450 . if @xmath1451 , then @xmath1452 and @xmath1453 , so @xmath1454 .",
    "however , @xmath1455 , which contradicts the choice of @xmath208 .",
    "therefore , @xmath1384 is closed under taking nonempty initial segments . the rest of the proof that @xmath1456 is straightforward .    to see that the map @xmath1457 is injective , consider any @xmath355 and @xmath356 .",
    "it is easy to see that @xmath1458 therefore , by lemma  [ lemma : tree_order ] , for any @xmath1445 and @xmath1459 , @xmath1460 the last expression only depends on @xmath1384 ; hence , @xmath349 can be recovered from @xmath1384 , as desired .",
    "recall that for @xmath387 , @xmath1461 hence , due to lemma  [ lemma : injection ] , @xmath1462 theorem  [ theo : mtcopy ] now follows from the following lemma :    let @xmath164 .",
    "suppose that @xmath163 is a function witnessing the correctness of @xmath146",
    ". then @xmath1463    for a finite tree @xmath1384 over @xmath306 , let the _ weight _ of @xmath1384 be @xmath1464 for @xmath1465 , let @xmath1466 denote the subset of @xmath1435 consisting of all trees of height at most  @xmath565 ( where the _ height _ of a tree @xmath1384 is the maximum of the lengths of its elements ) .",
    "note that @xmath1467 and the union is increasing , so @xmath1468 therefore , it is enough to show that for all @xmath1465 , @xmath1469 we prove by induction on @xmath565 .",
    "note that the only tree in @xmath1470 is @xmath1471 , and @xmath1472 by .",
    "now suppose that holds for some @xmath565 .",
    "consider any @xmath1473 .",
    "note that if @xmath1445 , then either @xmath1474 , or else , @xmath1475 for some @xmath1446 such that @xmath1476 .",
    "for each @xmath1477 with @xmath1478 , define @xmath1479 in other words , if @xmath1480 , then @xmath1481 is the subtree of @xmath1384 rooted at @xmath1482 ; and otherwise @xmath1483 .",
    "this defines a bijection between @xmath1484 and the set @xmath1485 moreover , if we set @xmath1486 , then @xmath1487 now we have @xmath1488\\;\\;\\;&\\leq \\lambda^s(b_s ) \\prod_{\\substack{s ' \\in { \\operatorname{dom}}(b):\\\\ s ' \\cap s \\neq { \\emptyset } } } \\left(1 + \\frac{p(s')}{1-p(s')}\\right)\\\\              & = \\lambda^s(b_s ) \\prod_{\\substack{s ' \\in { \\operatorname{dom}}(b):\\\\ s ' \\cap s \\neq { \\emptyset } } } \\frac{1}{1 - p(s ' ) } \\\\              [ \\text{by \\eqref{eq : lllvbls}}]\\;\\;\\;&\\leq \\frac{p(s)}{1 - p(s ) } ,          \\end{aligned}\\ ] ] as desired .",
    "theorems  [ theo : approxlll ] and  [ theo : thm1 ] are designed in such a way that the proofs of many classical combinatorial results can be transferred to the measurable setting simply by replacing the  lll with theorem  [ theo : approxlll ] or  [ theo : thm1 ] , depending on the desired outcome .",
    "almost no additional work is required ; the relevant instances of the  lll and the verification of their correctness remain unchanged , so the only things to check are the borelness of the instances and their hereditary local finiteness ( for theorem  [ theo : approxlll ] ) or invariance ( for theorem  [ theo : thm1 ] ) , which is usually straightforward . in the introduction we mentioned theorems  [ theo : col_large_g ] , [ theo : freeedge ] , [ theo : approxvertex ] , and  [ theo : approxedge ] as particular examples of this approach ; they are obtained by substituting theorems  [ theo : approxlll ] and  [ theo : thm1 ] in the proofs of theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] .",
    "the proofs of theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] themselves are quite technical and somewhat lengthy ( and , arguably , constitute some of the finest and most sophisticated known applications of the  lll ) ; the relevant instances of the  lll are carefully engineered to ensure their correctness and yet to give their solutions sufficiently strong properties .",
    "an excellent exposition of all three proofs , along with the intuition behind them , can be found in  @xcite , and we do not attempt to reproduce it here . however , for the interested reader , we very briefly sketch in this appendix the main ideas of the method used to prove theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] , omitting most of the technical details .    consider a graph @xmath15 on a set @xmath1 with maximum degree @xmath110 . a useful , although not strictly necessary , observation ( see  ( * ? ? ?",
    "* section  1.5 ) ) is that we can usually assume @xmath15 to be @xmath94-regular by attaching to each vertex @xmath24 with @xmath1489 an infinite rooted tree whose root has degree @xmath1490 and all of whose other vertices have degree  @xmath94 .",
    "formally , let @xmath2 be the set of all pairs of the form @xmath1491 , where @xmath24 and @xmath1492 is a finite sequence of integers such that @xmath1493 and @xmath1494 for all @xmath1495 ( with the case @xmath1496 and @xmath1497 allowed ) . define a graph @xmath985 on @xmath2 as follows : @xmath1498 clearly , @xmath985 is @xmath94-regular and the map @xmath1499 is an isomorphic embedding of @xmath15 into  @xmath985 ( denote its image by @xmath1500 ) .",
    "any cycle in @xmath985 has to be contained in @xmath1500 , so @xmath1501 .",
    "finally , note that if @xmath15 is a borel graph on a standard borel space @xmath1 , then @xmath2 and @xmath985 are borel subsets of @xmath1502 , @xmath985 is a borel graph on  @xmath2 , and every isomorphism between connected components of @xmath15 extends naturally to an isomorphism between connected components of  @xmath985 .    to illustrate the technique employed in the proofs of theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] , we will outline here a proof of the following weakening of johansson s theorem : _ there exists a positive constant @xmath130 such that any triangle - free graph @xmath15 with maximum degree @xmath110 satisfies @xmath1503 _ ( see  ( * ? ? ? * theorem  10.2 ) ) .",
    "fix @xmath226 , and let @xmath15 be a @xmath94-regular triangle - free graph on a set @xmath1 , where @xmath94 is assumed to be sufficiently large .",
    "the argument will proceed in two steps .",
    "first , we will apply the  lll to produce a partial coloring of @xmath15 that exhibits the same local behavior as a `` typical '' random coloring . on the second step ,",
    "we extend this partial coloring to a full coloring of @xmath15 using the fact that the uncolored part of the graph is `` space . ''",
    "let us start by explaining how the second step works .",
    "suppose that we are given a subset @xmath19 and a proper coloring @xmath1504 of @xmath121 .",
    "we can extend @xmath3 to a proper coloring of the whole graph @xmath15 in the following `` greedy '' way . fix a proper coloring @xmath1505 of @xmath1506 ( which exists since @xmath15 is locally finite ) .",
    "set @xmath1507 and for all @xmath272 , define @xmath1508 as follows : @xmath1509 finally , set @xmath1510 . by construction , @xmath1511 is a proper coloring of @xmath15 .",
    "how many colors does it use ?",
    "note that for every @xmath272 and @xmath1512 , there can be at most @xmath94 distinct colors assigned by @xmath1112 to the neighbors of @xmath16 , and so @xmath1513 .",
    "hence , for all @xmath1514 , @xmath1515 , i.e. , @xmath1516 uses at most @xmath49 colors .",
    "the above upper bound on @xmath1517 for @xmath1512 is sharp only if all the neighbors of  @xmath16 are given different colors by @xmath1112 .",
    "this observation motivates the following definition : a partial proper coloring @xmath1504 is _ good _ if for every @xmath1514 , the following set has cardinality at least @xmath1518 : @xmath1519 if @xmath3 is good , then clearly @xmath1520 for all @xmath1514 .",
    "thus , to finish the proof , we only need to find a good partial coloring @xmath1521 .    to this end",
    ", we will apply the  lll . for a function @xmath1522 ,",
    "let @xmath1523 in other words , @xmath1524 is the set of all vertices that do not share a color with any of their neighbors .",
    "we want to find a function @xmath1522 with the property that @xmath1525 is a good partial coloring ( note that the definition of @xmath1524 ensures that this coloring is proper ) .",
    "this condition can be easily turned into an instance of the  lll whose domain consists of all sets of the form @xmath1526 where @xmath24 .",
    "it turns out that for sufficiently small  @xmath130 , this instance is correct , and hence a desired good partial coloring exists ; informally , if all the @xmath94 neighbors of a vertex @xmath24 are colored randomly using only @xmath1527 colors , then one should expect many colors to be repeated , and since @xmath15 is triangle - free , shared colors between vertices in the neighborhood of @xmath16 do not force them to be removed from  @xmath1524 .",
    "the rigorous verification of this fact constitutes the most laborious part of the argument . for the details ,",
    "see  ( * ? ? ?",
    "* theorem  10.2 ) .",
    "the proofs of theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] utilize a similar strategy to the argument outlined above but with several clever technical twists .",
    "the main difference is that the  lll is applied repeatedly to produce partial colorings of larger and larger subsets of @xmath1 ( or , in the case of theorem  [ theo : kahn ] , larger and larger subsets of the edge set of @xmath15 ) .",
    "another difference is that the final step , instead of completing the coloring `` greedily , '' also uses the  lll , in the form of the following lemma :    [ lemma : prob_col ] let @xmath15 be a locally countable graph with vertex set @xmath1 .",
    "let @xmath1528 .",
    "suppose that @xmath1529^{<\\infty}$ ] is a function such that for all @xmath24 , @xmath199 and for each @xmath1530 , @xmath1531 then there exists a proper coloring @xmath284 with @xmath197 for all @xmath24 .",
    "lemma  [ lemma : prob_col ] is established using a straightforward application of the  lll .",
    "note that the instance to which the  lll is applied there is only invariant under those isomorphisms between connected components of @xmath15 that preserve the value of @xmath196 ( i.e. , it is @xmath1532$]-invariant ) . in the situations under consideration",
    ", @xmath196 is defined using the outcomes of the previous applications of the  lll , so theorem  [ theo : thm1 ] applies .    as mentioned before , the precise intricate construction of the instances of the  lll used in the proofs of theorems  [ theo : kim ] , [ theo : johansson ] , and  [ theo : kahn ] lies outside the scope of this article .",
    "however , the general scheme described above already shows that the  lll can be replaced by theorem  [ theo : approxlll ] or theorem  [ theo : thm1 ] ; the details of the proofs  verifying the correctness of the instances  do not require any modification ."
  ],
  "abstract_text": [
    "<S> in this paper we investigate the extent to which the lovsz local lemma ( an important tool in probabilistic combinatorics ) can be adapted for the measurable setting . in most applications , </S>",
    "<S> the lovsz local lemma is used to produce a function @xmath0 with certain properties , where @xmath1 is some underlying combinatorial structure and @xmath2 is a ( usually finite ) set . </S>",
    "<S> can this function @xmath3 be chosen to be borel or @xmath4-measurable for some probability borel measure @xmath4 on @xmath1 ( assuming that @xmath1 is a standard borel space ) ? in the positive direction , we prove that if the set of constraints put on @xmath3 is , in a certain sense , `` locally finite , '' then there is always a borel choice for @xmath3 that is `` @xmath5-close '' to satisfying these constraints , for any @xmath6 . moreover , if the combinatorial structure on  @xmath1 is `` induced '' by the @xmath7$]-shift action of a countable group  @xmath8 , then , even without any local finiteness assumptions , there is a borel choice for @xmath3 which satisfies the constraints on an invariant conull set ( i.e. , with @xmath9 ) . </S>",
    "<S> on the other hand , at least for amenable groups , the last statement is sharp : a probability measure - preserving action of a countably infinite amenable group satisfies the measurable version of the lovsz local lemma if and only if it admits a factor map to the @xmath7$]-shift action . a direct corollary of our results is an upper bound on the measurable chromatic number of the graph @xmath10 generated by the shift action of the free group @xmath11 , that is asymptotically tight up to a factor of at most @xmath12 ( which answers a question of lyons and nazarov ) . </S>"
  ]
}