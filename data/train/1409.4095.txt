{
  "article_text": [
    "reconstructing the geometry of an object or scene from a collection of images is an important problem in applications ranging from assisted surgery to additive manufacturing , quality control , augmented reality , just to mention a few .",
    "the problem is particularly challenging when objects exhibit complex non - lambertian reflectance .",
    "for instance , specular surfaces can not be reconstructed without _ some _ assumption on the surrounding environment .",
    "while generic prior assumptions may be sufficient for classification purposes , accurate metrology calls for precise knowledge of the surroundings , that can be thought of as the `` illumination '' . in _ deflectometry _ , a controllable illuminant ( e.g. , a liquid - crystal display , lcd ) is reflected through the object s surface onto the image plane , see fig .",
    "[ fig : classical_setup ] . in order to reconstruct a model of the unknown surface from the known illuminant ( input ) and its measured image output ,",
    "the input must be sufficiently exciting .",
    "typically , a series of optical code words is displayed , identifying each of the points on the illuminant uniquely .",
    "this way , dense correspondence between the domains of input and output signal is established , the so - called _ light map _ , assigning to a pixel the scene point it sees _ via _ the specular surface  @xcite .",
    "+    to make the basic deflectometry procedure viable for industrial applications , an important open problem needs to be solved : convex objects , no matter how small , act as de - magnifying lenses and thus reflect a significant portion of the environment .",
    "for instance , in fig .",
    "[ fig : adato ] , almost half of the scene becomes visible in a spherical patch of just a few square centimeters .",
    "there are essentially two countermeasures : one can either decompose the surface into smaller tractable pieces , cf .",
    "@xcite , but depending on the geometry of the object , the number of required views can easily reach the hundreds . alternatively , many state - of - the - art methods optimize the effective area on the mirror surface by placing the pattern generator in close proximity , cf .",
    "[ fig : gravy_boat ] .",
    "going one step further , hong et al .",
    "@xcite arrange five lcds tightly around the object leaving a small gap in between for a _ single _ camera to peek through .",
    "both strategies , however , make it difficult if not impossible to account for occlusions , the crux of any reconstruction methodology .",
    "in fact , one of the idiosyncrasies of deflectometry is that it may suffer from occlusions not just of the surface itself but also of the _ illuminant _ , i.e. , light rays can be blocked _",
    "after _ interacting with the surface _ and before_. for the purpose of reconstruction , each point on the surface must grant at least one unobstructed view on the illuminant , and ideally , images should be acquired from different camera positions until this condition is completely satisfied . to this end , weinmann et al .",
    "@xcite furnish their system with some of the desired flexibility by combining eleven cameras and three lcds with a turntable to carry the specimen .",
    "while their approach yields impressive reconstructions of small - scale objects , first , it still relies on a very large number of measurements , @xmath0 for the example in fig .",
    "[ fig : bunny_weinmann ] , and second , it excludes large surfaces , e.g. automobile parts , see fig .",
    "[ fig : hood_mv ] , which are certainly of interest to the practitioner .      here",
    ", we propose not only to extend the illuminant to comprise the entire scene , but to do this in a way that supports acquisition of objects more than a meter in length from multiple vantage points . more concretely , we prove the feasibility of performing deflectometry in an _ automatic virtual environment _",
    "( cave ) , which we dub _",
    "cavlectometry_. a cave is a room - sized cube consisting of up to six back - projected walls , see figs .",
    "[ fig : our_setup ] and  . in its default operating mode , users stand inside the cave and , while wearing stereo glasses and tracking devices , experience virtual 3-d scenes  @xcite .",
    "`` abusing '' it as an illuminant for deflectometry sparks a series of innovations : rather than treating each of the walls separately , the encoding scheme introduced in sect .",
    "[ subsec : lightmap ]  our first contribution  takes into account the sphere - like topology of the cave . in sect .",
    "[ sec : calibration ] , we develop an calibration method which requires no additional data besides that used in later reconstruction , at the heart of which lies an algorithm for separating image regions arising from either lambertian or specular surfaces .",
    "this is our second contribution .",
    "cavlectometry allows us to reconstruct surface patches of unprecedented size from a single vantage point as demonstrated at hand of synthetic and real data sets ( sect .",
    "[ sec : results ] ) .",
    "public deflectometry benchmarks are scarce with  @xcite being the only notable exception .",
    "thus , the final contribution we offer is to distribute all of our data , including raw images and decoded light maps , upon completion of the anonymous review process . before we explain our method in detail ,",
    "let us next put it in the context of the existing literature on specular surface reconstruction .",
    "+      normals of surfaces with hybrid reflection properties can be recovered from purely radiometric considerations  @xcite .",
    "not before correspondences are available between pixels and the scene points they portray , tools from geometrical optics can be leveraged : identifying a single point light source renders the computation of the light map trivial ; then , under known camera motion , an initial point can be expanded into a surface curve by tracking the location where the highlight first appeared  @xcite . the standard structure - from - motion pipeline can also be enriched as to explicitly take into account specular reflections of a discrete set of scene points  @xcite .",
    "zheng and murata  @xcite progress from isolated point sources towards a one - dimensional concentric illuminant .",
    "the accuracy of their approach however remains limited as long as some points on the light source remain indistinguishable .",
    "circular reflection lines suffice nevertheless for special applications such as measuring the cornea in human eyes  @xcite or surface interrogation  @xcite .",
    "savarese and perona  @xcite study reflections of a two - dimensional checkerboard pattern .",
    "controllable illuminants were introduced to boost reliability and density of correspondences : the very first active deflectometry setup  due to sanderson et al .",
    "@xcite  contained an array of light - emitting diodes ( leds ) which could be switched on sequentially to detect them in the camera image .",
    "the acquisition time can be reduced by showing binary codes in parallel  @xcite .",
    "both papers address the ambiguity by assuming quasi - parallel illumination .",
    "a large body of literature on the subject exists in the field of optical metrology starting with  @xcite that suggests improvements if the led array is replaced by a commodity computer monitor .",
    "knauer et al .",
    "@xcite describe the theoretic limits of the method involving phase - shifted sine patterns as codes .",
    "light map measurements can be further enhanced by color displays  @xcite",
    ". an active variant of savarese s method is presented in  @xcite .",
    "gauge ambiguities can be eliminated by integrability considerations  @xcite or _",
    "specular stereo _  @xcite . in the special case of infinitesimal displacement of any participant of the imaging chain  camera , surface , or scene",
    " the deflectometric image is perturbed by a _",
    "specular flow _ field .",
    "blake treats the case of a moving _ observer _ in a series of papers culminating in  @xcite , which waldon and dyer  @xcite extend by adding photometric effects and interreflections to the model .",
    "like in  @xcite , the trajectories of virtual features in the image plane give rise to reconstructions of one - dimensional subsets of the sought - after surface  @xcite .",
    "they are linked with the caustic curves known in geometric optics  @xcite .",
    "roth s and black s  @xcite method delivers dense two - dimensional reconstructions from specular flow generated by a known camera motion .",
    "the authors utilize theoretical results from  @xcite where , with the objective of speeding up ray tracing along piecewise linear paths , it is shown how the points of deflection , i.e. , the vertices of the path , behave w.r.t . to changes of the ray emitter .",
    "shape cues may be recovered from the flow field alone , i.e. , without image - scene correspondences , when the _ scene _ is moving relative to object and camera  @xcite .",
    "a closed - form model of specular flow on arbitrarily deforming _ surfaces _ is derived in  @xcite .",
    "estimation of specular flow hinges only on the natural scene and can thus handle surfaces of arbitrary size and shape complexity but , as a downside , does not permit metrically precise reconstruction .",
    "a comprehensive summary of the state of the art in deflectometry can be found in several recent survey papers  @xcite .",
    "in the following , matrices are in bold , vectors bold italic .",
    "vectors @xmath1 of unit length are marked by a hat , i.e. , @xmath2 .",
    "each pixel in the image plane of a calibrated camera corresponds to a direction @xmath3 , under which the associated sight ray leaves the projection center .",
    "the relationship between the two is determined by the intrinsic parameters of the camera . where the ray intersects the surface in @xmath4 , it gets `` deflected '' according to the geometric law of reflection and travels on until it hits a scene point @xmath5 . for the purposes of geometric modeling ,",
    "the cave is a cube @xmath6 with boundary @xmath7 and side length @xmath8 @xmath9 .",
    "if we neglect multiple reflections and occlusions induced by the camera , the scene point comes to lie on one of the faces of @xmath6 .",
    "apart from the object under inspection , the scene _ is _ @xmath7 and vice - versa .",
    "altogether we obtain a mapping @xmath10 , which assigns to a viewing direction @xmath3 the point @xmath5 seen by the pixel associated with that direction , see fig .",
    "[ fig : geometry ] . this is precisely the light map defined in sect .",
    "[ subsec : motivation ] .",
    "its measurement must be the first step of any deflectometric method .",
    "although optical phase - shift codes originate from a variety of established applications like optical interferometry , synthetic aperture radar , and magnetic resonance imaging , its features make it the ideal candidate for estimation of the light map : gradually phase - shifted sine patterns facilitate subpixel accuracy and are relatively insusceptible to disturbances of absolute intensity values , e.g. , caused by staining of the specular surface . as in a typical setup ( fig .",
    "[ fig : photosetup ] ) the camera is focused onto the surface under inspection , limited depth of field exposes the imaged code patterns to blurring .",
    "a sine pattern , however , can pass the optical system  which in this case resembles a low - pass filter  unaffected as long its spatial frequency is sufficiently low .",
    "in fact , a smoothing of quantization artifacts of the monitor or projector is even advantageous .",
    "three phase shifts are sufficient to recover a single spatial coordinate uniquely ; additional ones may compensate for non - uniformities ( e.g. , from gamma nonlinearity , etc . ) .",
    "owing to the fact that phase information is uniquely defined only within the range of one wavelength of the pattern , decoding must be complemented by a so - called _",
    "phase unwrapping_. explaining the codification methodology in detail is beyond the scope of this paper ; we must refer the interested reader to  @xcite among others .",
    "we do emphasize here that care must be taken when displaying phase - shifted sine patterns on the walls of the cave simultaneously , an issue that never arose in previous systems which were all designed to run on disjoint rectangular screens .",
    "the naive approach would be unfolding the cube into the canonical net for cube mapping and shift the patterns along the axes of some local coordinate system . experimental evidence",
    ", however , suggests that treating each face regardless of the others causes problems at the transitions between two maps , see fig .",
    "[ fig : cornerdecode ] . here , due to self - illumination",
    ", a pattern leaks from one wall into the other .",
    "our key insight is that this is uncritical so long two patterns are symmetric across an edge of @xmath7 , i.e. , if they do not meet orthogonally , at different frequencies or phases .",
    "an encoding scheme which fulfills this requirement by moving patterns only parallel to the edges of @xmath7 is shown in fig .",
    "[ fig : phasecave ] .       +    the inherent structure of this scheme",
    "is easily verified : each subsequence encodes one of the three global cartesian coordinates .",
    "only a single @xmath11 of information is missing , prompting a second coding stage . to illustrate the problem ,",
    "suppose we are looking for the location of a point @xmath5 on one of the cave walls , say @xmath12 where @xmath13 .",
    "applying the sequences in  fig .",
    "[ fig : phasecave ] will provide the values of @xmath14 and @xmath15 there .",
    "the subsequence shifting in @xmath16-direction will leave @xmath5 dark .",
    "putting these facts together , we conclude that @xmath5 will be on a plane @xmath17 but we do not know whether it is the one defined by the equality @xmath18 or @xmath19 .",
    "the sign of @xmath20 is exactly the missing bit .",
    "a single image should suffice to set it correctly .",
    "the problem of self - illumination , however , persists .",
    "in fact , the leakage of a pattern shifting in one of the three coordinate directions into the two orthogonal faces that remain dark meanwhile is even more severe .",
    "for this reason , we resort to a complete detection of each of the faces of @xmath6 .",
    "there are altogether six of them prompting the use of a binary code of length @xmath21 @xmath11 .",
    "an illuminated wall represents a bit value of @xmath22 , see fig .",
    "[ fig : walls ] .",
    "robustness is further improved with the help of a _ differential code _ : thereby , a bit value of @xmath22 is encoded by the _ transition _ from white to black .",
    "conversely , a bit value of @xmath23 corresponds to an on - switching of the illumination .",
    "the differential face coding amounts to in total six images per light map measurement .",
    "in order to avoid screen occlusions , we advocate recording multiview datasets in a monocular fashion , whereby measurements are taken sequentially while the camera is displaced between two captures . to convert a measured correspondence between @xmath3 and @xmath24 into a reasonable normal estimate , both vectors have to be represented in a common reference frame . on one hand , @xmath3 is usually given w.r.t .",
    "the frame that is attached to the camera and moves along with it to each new vantage point . on the other hand , @xmath5 is naturally expressed in terms of the frame at the barycenter of the cave ( fig .  [",
    "fig : cs ] top ) , which remains static and is thus selected as our world coordinate system .",
    "the transformation between the two is an element @xmath25 , @xmath26 , @xmath27 , of the rigid - motion group @xmath28 , which  as initially unknown  needs to be determined through calibration .",
    "it turns out that @xmath29 comes as a byproduct of the very same light map @xmath30 used for reconstruction later on ( sect .",
    "[ sec : reconstruction ] ) . the basic idea of the following procedure is to identify those regions that are imaged _ without _ intermediate reflections and to localize the camera by means of the appendant scene - image correspondences :    1 .",
    "consider the pullback of the light map @xmath31 to the image plane @xmath32 .",
    "it can be calculated knowing the intrinsic parameters of the camera , which we initially estimate by a standard method  @xcite .",
    "the extrinsic calibration process starts with a  possibly very coarse  segmentation of @xmath33 , which builds upon the fact that walls seen directly generate piecewise homographies .",
    "one of the distinct properties of homographies is that they maintain cross - ratios , whose computation , however , may be numerically unstable .",
    "instead , we propose a simpler  less discriminative yet effective  inference criterion based on colinearity .",
    "denote by @xmath34 the value of the light map at pixel @xmath35 in the discretized image plane .",
    "if @xmath33 behaves locally like a homography around @xmath36 , then the points @xmath37 and @xmath38 will be respectively colinear , in other words , @xmath39 where @xmath40 and @xmath41 we can define a scoring function @xmath42 by @xmath43 which vanishes where both rank conditions are satisfied ( fig .  [ fig : sssega ] ) .",
    "a first segmentation of @xmath30 respectively @xmath33 is obtained by binarizing @xmath44 with threshold @xmath45 ( fig .",
    "[ fig : sssegb ] ) .",
    "following morphological enhancement , this segmentation is refined with the help of a watershed transform  @xcite , see fig .",
    "[ fig : sssegc ] .",
    "+   + 2 .",
    "observe that there are degenerate cases in which the specular surface itself affords a homography , e.g. , if it is locally planar or reflects into a single point ( i.e. , the light map is constant ) .",
    "we can , however , safely assume that the background occupies a significant amount of the image .",
    "otherwise , we would hardly ever get access to @xmath29 at all . with this in mind , we shrink the background region determined in the previous step to those pixels that map to the wall which appears most often in it .",
    "[ item : dltn ] the homography between the image plane and the resulting background region , i.e. , the cave wall that appears in most pixels and is seen directly , is computed by a standard direct linear transformation method . given the projection matrix , @xmath46 can be extracted from the associated homogeneous matrix  @xcite .",
    "we now revisit the full light map @xmath33 on the image plane .",
    "every point @xmath47 that can be projected directly into the image plane , utilizing the initial estimate of @xmath29 , must belong to the background .",
    "the characteristic function of the foreground then becomes @xmath48 where @xmath49 denotes the canonical pinhole projection .",
    "observe that the sensitivity of @xmath50 w.r.t .",
    "the threshold is quite low . in other words",
    ", the choice of @xmath51 requires no great care because the backprojection error grows discontinuously across the silhouette .",
    "the final result is depicted in fig .",
    "[ fig : sssegd ] .    with the final segmentation @xmath50 , we improve the estimate of the extrinsic camera parameters @xmath29 by running a robust bundle adjustment on all points in the background  @xcite .",
    "let us remark that in previous experimental setups , the screen is rarely seen directly during measurement but obviously has to be for extrinsic calibration . to establish an oblique view on the screen , a calibration normal ( usually a planar mirror )",
    "is necessary , which complicates step  [ item : dltn ] and the final bundle adjustment significantly  @xcite .",
    "also note that the procedure described in  @xcite is not applicable here as it requires the pattern generator to be movable .",
    "what sets the deflectometric measurement principle apart from techniques such as stereopsis or laser scanning is that it yields _ slope _ which must be converted into _ depth _ by means of _",
    "integration_. more precisely , the light map @xmath30 acquired from a vantage point @xmath29 is equivalent to a unit vector field of _ measured _ normals @xmath52 in space . to see this ,",
    "fix a point @xmath53 inside the visible volume , transform it to camera coordinates via @xmath54 , project it to @xmath55 by normalization , and look up the value of the light map @xmath56 ( fig .",
    "[ fig : geometry ] ) .",
    "suppose that @xmath57 , then the surface normal @xmath58 must obey the law of reflection , i.e. , the correspondence between @xmath4 and @xmath5 yields a hypothesis @xmath59 about the normal the true surface should have if it indeed contained the point @xmath4 .",
    "we say that a regular surface @xmath60 solves the reconstruction problem if it interpolates the measured normal field in the sense that @xmath61 except on zero - measure subsets of @xmath60 .",
    "such an @xmath60 rarely exists due to stochastic disturbances of the data .",
    "a maximum - likelihood estimate of the surface is obtain as the solution of the following variational problem : @xmath62 the well - known gauge ambiguity manifests itself in the dependence of @xmath59 on @xmath4 : an additional constraint @xmath63 needs to be imposed to render problem   well - posed  @xcite . since in this paper , we are mainly concerned with the deflectometric data acquisition process and less with reconstruction , we assume the point @xmath64 to be known for now . the next section will outline a suitable initialization heuristic . for more sophisticated regularization approaches ,",
    "we refer the interested reader to the related literature , see sect .",
    "[ subsec : relatedwork ] .",
    "also , at this point , we make no attempt to fuse data acquired from a series of vantage points into a common normal field .",
    "our data could be processed with any existing multiview normal field integration scheme , cf .",
    "to a fixed point ) which is seen through these points .",
    "focal length : @xmath65  @xmath9 . ]",
    "we implemented most of the pipeline in c++ , except for the steps related to optical coding .",
    "all experiments were run on a single @xmath66  @xmath67 core of a commodity computer .",
    "we solve the shape optimization problem   with the algorithm proposed in  @xcite .",
    "since integration is of broader interest , we will make the source code available . as an initial guess",
    ", we use a fronto - parallel plane which is also tangent to the visual hull .",
    "loop subdivision is applied to the evolving mesh between two steps to increase the level of detail and prevent the iteration from falling into local minima of the cost functional , see fig .",
    "[ fig : intiter ] .      a selection of segmentation masks obtained with the method developed in section  [ sec : calibration ] is shown in fig .  [ fig : masks ] .",
    "the computation of a single mask constitutes the main bottleneck requiring in average @xmath68 @xmath69 on a single cpu core .",
    "thereby , the majority of time is consumed by the vast number of singular value decompositions governing the rank estimation in  .",
    "the following experiment investigates the impact of screen enlargement : from the pose previously obtained by calibration , the barycenter of the cave wall can be determined which is located _ behind _ the camera .",
    "[ fig : coverage ] shows the number of points in the image of different light maps @xmath30 closer than a distance @xmath70 to that barycenter .",
    "we limit @xmath70 to @xmath71 , as any point further away is likely a part of the background .",
    "the shaded area corresponds to the walls next to , above , or below the object , and it can be observed that these may contribute significantly to the number of valid measurements among the pixels of a single deflectometric image . in contrast ,",
    "the monitor of a classical setup would only occupy a small portion of the back wall .",
    "+    our experimental setup is unique in the realm of deflectometry which makes the comparison with other methods challenging .",
    "for this reason , we painted some of the specimens black and coated them with white powder , which is very undesirable in practical applications but unavoidable when using a laser scanner as an alternative source of data ( figs .",
    "[ fig : moka ] top left ) .",
    "needless to say that range scans are afflicted with uncertainty of their own .",
    "perfect ground truth is only known after simulating data by ray tracing ( fig .",
    "[ fig : bunny ] ) or in the form of a cad model supplied by the manufacturer ( fig .",
    "[ fig : hood ] ) . after aligning reconstructed and ground - truth model by the iterative closest point method",
    ", the local deviation between the two becomes apparent .",
    "its magnitude is foreshadowed by the vertex colors of the meshes depicted in fig .",
    "[ fig : finalresults ] . in all examples , the error peaks close to the occluding boundary where the actual surface normal is almost perpendicular to the image plane .",
    "the mean error is determined by the resolutions of camera and the projectors but also their geometric distance from the surface .",
    "the latter is maximized towards better coverage here , which puts the mean error in the range one would expect from a back - of - the - envelope estimate of the backprojected pixel size .",
    "let us remark that our system could be operated in a hierarchical way , where a holistic but coarse reconstruction is examined for abnormalities first , followed by a high - precision close - up scan of conspicuous regions .",
    "aggregate performance statistics are summarized in tab .",
    "[ tab : performance ] : note that _ all reconstructions stem from a single capture_. in comparison , weinmann et al .",
    "@xcite reported sample sizes ranging from @xmath72 to @xmath73 .",
    "we were also able to reduce the number of measurements for the same type of engine hood investigated in @xcite from @xmath74 to @xmath22 .",
    "finally , we used the recovered meshes and vantage points to render images of the scene they constitute together with a 3-d model of the cave .",
    "as shown in fig .",
    "[ fig : resulteval ] , the image series leading to the underlying reconstructions could be reproduced with satisfactory accuracy .",
    ".performance statistics . [ cols=\"<,^,^,^,^,^ \" , ]",
    "in this paper , we have argued that deflectometric imaging and reconstruction benefit strongly from illuminants that encompass all of the scene except for the mirror object under inspection . these can be realized e.g. by means of a cave . while the cost of building and maintaining such a sensor system may seem limiting , the proposed algorithms transfer ",
    "mutatis mutandis  to testbeds far less expensive yet equally effective .",
    "the automotive industry , e.g. , employs _ light tunnels _ albeit not for reconstruction . a low - cost alternative in a regular room with opaque white walls and cheap standard projectors",
    "is shown in fig .",
    "[ fig : microcave ] . in conclusion , let us remark that the cave , beyond its role as deflectometry illuminant , may be utilized for reconstruction in general . to our best knowledge ,",
    "it has been exclusive to visualization and virtual reality so far , but in our opinion , it opens up possibilities in several other topics of computer vision and optical metrology ."
  ],
  "abstract_text": [
    "<S> we introduce a method based on the deflectometry principle for the reconstruction of specular objects exhibiting significant size and geometric complexity . </S>",
    "<S> a key feature of our approach is the deployment of an _ automatic virtual environment _ ( cave ) as pattern generator . to unfold the full power of this extraordinary experimental setup , an optical encoding scheme is developed which accounts for the distinctive topology of the cave </S>",
    "<S> furthermore , we devise an algorithm for detecting the object of interest in raw deflectometric images . </S>",
    "<S> the segmented foreground is used for single - view reconstruction , the background for estimation of the camera pose , necessary for calibrating the sensor system . </S>",
    "<S> experiments suggest a significant gain of coverage in single measurements compared to previous methods . to facilitate research on specular surface reconstruction </S>",
    "<S> , we will make our data set publicly available . </S>"
  ]
}