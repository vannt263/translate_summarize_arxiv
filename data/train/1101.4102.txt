{
  "article_text": [
    "congestion phenomena in population dynamics cover a wide range of mechanisms , which can be classified according to their stiffness  :    1 .   soft congestion : as the distance between individuals becomes smaller , the behavior of a single person is affected by the presence of others ; 2 .",
    "hard congestion : actual contacts between individuals occur , and the overall motion is perturbed by the fact that two persons may not occupy the same place at the same time .",
    "soft congestion models can be included in both microscopic and macroscopic models . in the first class",
    "there are discrete - space models like cellular automata - based models which constrain pedestrians to be located at squares of a fixed grid  @xcite .",
    "we can also mention models based on networks as route choice models  @xcite or queuing models  @xcite .",
    "a lot of evacuation softwares rest on such models as for example buildingexodus in  @xcite .",
    "some microscopic models are space continous as the social force model introduced in  @xcite and its forerunner which has been proposed by  @xcite . in  @xcite , people are identified to particles submitted to the laws of newtonian mechanics . as for macroscopic models ,",
    "soft congestion is also usually favored .",
    "some of these models ( see for example  @xcite ,  @xcite and  @xcite ) own their origins in vehicular traffic models , and deal with the one - dimensional case . in higher dimension , similarly to the microscopic case , many models rely on social forces . one solution , used e.g. by bellomo and dogbe in  @xcite and  @xcite , or degond in  @xcite , is to add to the equation satisfied by the velocity a repulsive term that forces people to avoid high density areas .",
    "another possibility is to modify directly the velocity by adding a term that make people deviate from their preferred path as soon as they approach a crowded area .",
    "the modeling of the velocity is the key point of these strategies , see for example the work of hughes  @xcite ,  @xcite , coscia  @xcite , or piccoli  @xcite ,  @xcite .",
    "we aim here at addressing the particular issues pertaining to _ hard _ congestion . in this spirit",
    ", we shall make very crude assumptions on the social aspects triggering crowd dynamics ( see section  [ sec : ext ] for possible improvements on these aspects ) , and simply consider that , at any time , a spontaneous ( or desired ) velocity field is given , and that it is purely _ reptilian _ : everyone s priority is to achieve his own goals , without accounting for others .",
    "actual behavior shall result from some sort of compromise between individual tendencies and congestion constraints .",
    "more precisely , we shall consider that the actual velocity is defined as the projection of the spontaneous one onto the set of feasible velocities ( i.e.  which do not lead to a violation of the non - overlapping constraint ) .",
    "those basic principles can be applied to microscopic and macroscopic descriptions of the crowd . in the microscopic",
    "setting , the degrees of freedom are the positions of individuals ( identified to rigid disks ) , and the non - overlapping constraints can be written straightforwardly by prescribing a minimal value for the distance between centers .",
    "the problem takes the form of a differential inclusion which fits into the general framework of sweeping processes introduced by moreau in the 70 s ( see  @xcite ) .",
    "this approach has been extended more recently to non convex cases , namely the case of uniformly prox - regular sets in @xcite , in @xcite and later in @xcite .",
    "the perturbed ( i.e. inhomogeneous ) problem has been studied in @xcite .",
    "as we shall see , it gives a natural framework for the microscopic model we propose .    in the macroscopic setting , the crowd is seen as a population density and the non - overlapping constraint consists in prescribing a maximal value for this density .",
    "although both microscopic and macroscopic models express the same type of modeling assumptions , the mathematical structure of the macroscopic model is less obvious .",
    "expressed in the eulerian framework as a transport equation by the actual velocity field , which is defined as the projection of the spontaneous one onto the set of feasible velocities , it involves a conservative transport equation by a field whose regularity can not be controlled a priori , so that classical results can not be used . a first attempt to address those issues",
    "was proposed in  @xcite , in the case where the spontaneous velocity is the gradient of a given dissatisfaction function ( typically the distance to the exit for the evacuation of a building ) : the framework of optimal transportation allows to reformulate the problem as a gradient flow in the wasserstein space of measures ( see e.g. @xcite for an overview of the theory of optimal transport , and @xcite for the notion of gradient flow in this setting ) .",
    "we show here that the sweeping process framework , which does not rely on any assumption on the gradient nature of the forcing term , can be extended in the macroscopic situation .    stemming from similar principles , both microscopic and macroscopic models present nevertheless deep differences . for instance we shall point out the fact that the notion of maximal density is not properly defined in the microscopic setting .",
    "thus the macroscopic one can not be expected to be obtained from the microscopic one by any homogenization process .",
    "we shall focus here on the particular issues related to hard congestion . in order to highlight the very problems it raises",
    ", we will favor a very basic form of the crowd motion model .",
    "in particular we shall disregard in the main part of this paper any social or strategical aspects of human behavior .",
    "we are aware of the very crude character of these assumptions , and we gathered in section  [ sec : ext ] other aspects of pedestrian behavior that could be included in our approach .",
    "besides , we hope that the framework presented here , and the issues we raise in attempting to establish links between microscopic and macroscopic settings , may be fruitful in other contexts , e.g. micro - macro issues in granular flows or modeling of chemotactic motion of large populations of cells .",
    "we consider a population of @xmath0 individuals , identified with rigid disks centered at @xmath1 , @xmath2 ,  , @xmath3 , with common radius @xmath4 ( it can be extended straighfowardly to the so - called _ polydisperse _ case , i.e. with different radii ) .",
    "we denote by @xmath5 the generalized spontaneous velocity of the crowd ( @xmath6 is the velocity which the individual @xmath7 would like to have in the absence of others ) .",
    "we assume here that the desired velocity of @xmath7 depends on his location only , and that this dependence is the same for all individuals ( see section  [ sec : ext ] for more general behavioral models ) : @xmath8 where @xmath9 is a given field .",
    "the set of feasible configurations is defined as @xmath10 we disregard here obstacles ( like walls , furniture ) to alleviate notations , but they can be included in the definition of @xmath11 straightforwardly .",
    "non - overlapping is preserved by prescribing that @xmath12 may not decrease if it is @xmath13 , i.e.@xmath14 where @xmath15 .",
    "it leads to define the set of feasible velocities as [ eq : cqdef ] c_= .",
    "the model simply writes [ eq : pbmic ] = p_c _ ( ) where the projection is performed according to the euclidean norm over @xmath16 .",
    "+ problem ( [ eq : pbmic ] ) is self consistent and drives the evolution process , as will be shown in section  [ eq : pbmic ] .",
    "yet , the saddle - point formulation of the projection problem sheds light on the underlying darcy - like structure of the problem , and introduces a pressure field which will have a straightforward interpretation in terms of modeling , and which will have a continuous counterpart in the macroscopic setting .    at some given configuration @xmath17 ,",
    "let us denote by @xmath18 the set of couples @xmath19 , @xmath20 , such that @xmath7 and @xmath21 are in contact .",
    "constraints on the velocity can be written in a matrix form ( we drop the dependence of matrix @xmath22 upon the configuration ) @xmath23 where the rows of @xmath22 correspond to active constraints : @xmath24 the saddle - point formulation of the projection problem consists in finding @xmath25 ( where @xmath26 is the number of active constraints ) , such that [ eq : spmic ] \\ {    lcl + b^p & = & + b & & 0 .    .",
    "supplemented by the complementarity condition @xmath27 pressure @xmath28 can be seen as the interaction force between individuals @xmath7 and @xmath21 .      in the macroscopic setting the crowd is represented by a density @xmath29 , which we shall assume to be supported within some domain ( the room ) @xmath30 . in order to alleviate the notations ,",
    "we shall present the model in the case of a closed room ( see the end of section  [ sec : theomac ] for some details on the way an exit door can be accounted for in this framework ) .",
    "if we set at @xmath31 the saturation value , the set of feasible densities is @xmath32 the density is advected by the actual velocity @xmath33 ( macroscopic counterpart of the microscopic one @xmath34 ) @xmath35 and @xmath33 is defined as @xmath36 where @xmath37 is the set of feasible velocities .",
    "it can be defined unformally as the set of all those velocities which have a non - negative divergence on the saturated zone @xmath38 $ ] ( where the density may not increase ) .",
    "more precisely , it is defined by duality as @xmath39   \\right \\},\\ ] ] @xmath40    the dual expression of @xmath37 induces a natural saddle - point formulation for the projection problem , based on a pressure field @xmath41 : find @xmath42 , where @xmath43\\}$ ] , such that [ eq : sppmac ] \\ {    lcl + p & = & + - _ q & & 0 q h^1 _ ( ) ,    . with the complementarity condition : @xmath44",
    "we address here the question of existence and uniqueness of solutions to @xmath45 where @xmath46 describes the motion of the crowd , @xmath47 is the cone of feasible velocities defined by  ( [ eq : cqdef ] ) , and @xmath48 is the desired velocity . before stating the main results of this section , let us describe the general framework into which it fits , namely the sweeping processes , introduced by moreau in the late 70 s ( see  @xcite ) .",
    "the original setting was the following : consider @xmath49 a hilbert space and @xmath50 a path of convex closed sets in @xmath49 , with some regularity in time ( e.g.  @xmath51 is continuous for the hausdorff distance ) .",
    "he was interested in the evolution of a point @xmath52 subjected to remain in @xmath51 . assuming that the evolution process tends to minimize the norm of @xmath53 , one ends up with the following process @xmath54 where @xmath55 is the outward normal cone to @xmath11 at @xmath56 : [ eq : onc ] n_k(q ) = this normal cone has been introduced in @xcite and is called more precisely the proximal normal cone .",
    "note that , as @xmath11 is convex , this normal cone identifies to @xmath57 , the subdifferential of the indicatrix function of @xmath51 .",
    "the following discrete process ( so called _ catching up _ algorithm ) , which is used by moreau to establish well - posedness of the problem , gives a clear idea of the evolution mechanism .",
    "consider a time step @xmath58 , an initial condition @xmath59 , successive positions are built according to @xmath60 as @xmath61 is closed and convex , the projection is well - defined and contractant , which allows to establish convergence results for the sequence of piecewise constant solutions @xmath62 .",
    "it is clear that the recursive process extends straightforwardly to the case where the projection onto @xmath11 is properly defined ( i.e. single - valued ) into its neighborhood .",
    "the finite - dimensional sets satisfying this property were introduced by federer in @xcite under the name of _ positively reached sets_. then , they were called _",
    "p - convex sets _ by canino in @xcite and later _ proximally smooth sets _ by clarke , stern and wolenski in @xcite .",
    "the final name `` uniformly prox - regular set '' will be given by rockafellar et al .",
    "in @xcite ( see definition  [ def : pr ] below ) .",
    "the crowd motion model differs slightly from the sweeping process , as the feasible set is fixed whereas the point @xmath17 ( which represents the whole crowd ) tends to evolve according to some given velocity @xmath63 .",
    "the same principles can be extended straightforwardly , in particular : assuming @xmath63 is not too large , and @xmath11 is uniformly prox - regular , then for a sufficiently small time step @xmath64 , the catching up algorithm can be used to build discrete solutions . in the same manner",
    ", one may write the evolution process as [ eq : dqnmic ] - n_k ( ( t ) ) ( ( t ) ) . note that this new formulation is a direct consequence of  ( [ eq : pbmic ] ) : as @xmath65 and @xmath47 are mutually polar ,",
    "the identity operator can be written as @xmath66 ( see  @xcite ) .",
    "equivalence between both formulations is not obvious , as an identity has been replaced by an inclusion , yet we shall see that it holds true under some conditions .",
    "the catching up algorithm reads as follows @xmath67 @xmath68    let us now express in a rigorous manner that this is indeed an algorithm for @xmath64 sufficiently small , and that this strategy allows to build a solution to our problem .",
    "let us first give a proper definition of prox - regularity ( see theorem 1.3 in @xcite ) .",
    "[ def : pr ] a closed set @xmath11 is said to be @xmath69-prox - regular at @xmath70 if there exists a neighborhood @xmath71 of @xmath70 such that for all @xmath72 and @xmath73 , with @xmath74 , we have @xmath75 where @xmath76 is the proximal normal cone to @xmath11 at @xmath56 ( defined by  ( [ eq : onc ] ) ) .",
    "it is said to be uniformly prox - regular with a constant @xmath77 if it is @xmath69 prox - regular at every point of its boundary .    as for our microscopic model , it holds    k is uniformly prox - regular with @xmath78    proof .",
    "first it can be shown that @xmath79 is uniformly prox - regular . in this case",
    ", tools of differential geometry can be used to compute the constant of prox - regularity which corresponds to the smallest radius of curvature ( i.e. the largest eigenvalue of weingarten operator ) . after calculation",
    ", we show that @xmath80 is uniformly prox - regular with constant @xmath81",
    ".    one may wonder whether the intersection of such sets ( which is the case for @xmath11 ) is uniformly prox - regular with a constant depending only on the constants of prox - regularity of the smooth sets . from a general point of view , this is wrong as illustrated in figure  [ fig : idfausse ] .",
    "indeed , we have plotted in solid line the boundary of a set @xmath82 which is the intersection of two identical disks complements .",
    "this set is uniformly prox - regular but its constant of prox - regularity ( equal to the radius of the disk plotted in dashed line ) tends to zero when the disks centers move away from each other . in this situation ,",
    "the scalar product between the normal vectors @xmath83 and @xmath84 ( see fig .",
    "[ fig : psvectnorm ] ) tends to -1 , which suggests that the prox - regularity constant also depends on the angle between normal vectors .",
    "[ l]@xmath83 [ l]@xmath84   and @xmath84.,title=\"fig:\",scaledwidth=20.0% ]    consequently the proof of the uniform prox - regularity of @xmath11 rests on a good estimate of the angles between gradients of active constraints .",
    "the existence of such a constant @xmath85 relies on the positive linearly independence of gradients of active constraints .",
    "more precisely it can be shown that there exists @xmath86 such that for all @xmath87 , [ eq : revtriang ] _",
    "( i , j ) ( ) _ ij |_ij ( ) | | _",
    "( i , j ) ( ) _ ij _ ij()| .",
    "it can be deduced from this inequality that @xmath11 is @xmath85-prox - regular with @xmath88 ( a detailed proof of this result can be found in  @xcite ) .",
    "furthermore , the given upper bound is obtained by considering a configuration @xmath17 of aligned disks and by computing the constant of local prox - regularity at @xmath17 ( see proposition 3.18 in  @xcite for more details ) .",
    "note that the prox - regularity coefficient of @xmath11 degenerates ( i.e. goes to @xmath13 ) as the size of the disks goes to zero , for a constant total mass .",
    "furthermore the prox - regularity coefficient of @xmath11 depends on @xmath0 with @xmath89 for @xmath0 large enough ( see @xcite ) .",
    "now the following result can be established :    let @xmath63 be lipschitz and bounded , for all @xmath90 and all @xmath91 , there exists a unique absolutely continuous solution @xmath92 to @xmath93 \\vspace{6pt } \\\\",
    "\\qq(0)=\\qq_0 .",
    "\\end{array } \\right.\\ ] ] moreover , this solution satisfies the differential equation @xmath94 \\vspace{6pt } \\\\",
    "\\qq(0)=\\qq_0 .",
    "\\end{array } \\right.\\ ] ] [ th : wpmicro ]    the well - posedness of the differential inclusion can be proved thanks to results in @xcite .",
    "then proposition 3.3 in @xcite claims that the solution satisfies the following differential equation @xmath95 which is equivalent to ( [ eq : pbmic ] ) since the cones @xmath96 and @xmath47 are mutually polar .",
    "we are concerned here with the question of existence of solution to the macroscopic model : given a desired velocity field @xmath97 defined in @xmath98 , given an initial density @xmath99 , find @xmath100 such that [ eq : pbmactransp ] _",
    "t + ( ) = 0 , where the actual velocity field @xmath33 verifies [ eq : pbmacproj ] = p_c _ , and @xmath37 is the set of feasible velocities defined by .",
    ".  [ eq : pbmactransp ] is meant in a weak sense : @xmath101    the overall problem can be written as a non - local and nonlinear transport equation @xmath102 where the notation @xmath103 expresses a dependence of @xmath33 upon the whole density field @xmath29 , through the projection of @xmath63 onto @xmath37 . the nonsmooth character of this projection and the fact that the regularity of @xmath33 is not controlled ( the projection is performed in the @xmath104 sense ) , rule out the possibility to use standard tools to define solutions to this equation . one may wonder whether the catching - up approach , which proved successfull in the microscopic setting , can be followed in the present context .",
    "the prediction step is straightforward : one transports @xmath29 according to the desired velocity field @xmath63 during a time step @xmath58 . as for the correction ( or projection ) step",
    ", it appears immediately that the standard eulerian way to measure distances between densities ( by estimating a given norm of their difference ) is not suitable . in the microscopic",
    "setting , the catching up approach proved successful because the difference between two configurations identifies with a displacement field , and this is due to the very lagrangian description of individuals . recovering this feature calls for a new way to measure differences between densities , more respectful of the lagrangian description of the motion , and",
    "this way is the wasserstein setting .",
    "we assume here that @xmath98 is convex .",
    "let @xmath105 be a measurable mapping , and @xmath106 a probability measure .",
    "we say that @xmath107 pushes forward @xmath108 onto @xmath109 ( written @xmath110 ) if @xmath111 for any measurable set @xmath112 .",
    "for given measures @xmath113 and @xmath114 , we denote by @xmath115 the set of transport maps between @xmath113 and @xmath116 . the quadratic wasserstein distance @xmath117 is defined by @xmath118    notice that this is a sloppy definition that holds for atomless measures , which is anyway the case we are interested in ; for general measures one should pass through the so - called _ transport plans _ , which we do not want to introduce here , and we address the interested reader to @xcite .",
    "however , this quantity @xmath119 can be proven to be a distance on the space @xmath120 and it makes the space of probability measures a _ geodesic space _ ,",
    "i.e. every pair of points is linked by a curve ( which is in this case a curve of measures ) , such that the length of this curve exactly equals the distance between the points . in case in the minimization defining @xmath119",
    "there is an optimal transport map @xmath121 ( which is the case if @xmath113 is absolutely continuous with respect to the lebesgue measure @xmath122 ) , then this geodesic curve is known explicitly and it is given by @xmath123 .    in the spirit of the structure that we are imposing on @xmath124 , we define the outward normal cone to a subset @xmath125 ( we actually apply the definition of the strong frchet subdifferential in  @xcite to the indicatrix function of @xmath11 ) by @xmath126 for all @xmath121 such that @xmath127 .",
    "it makes it possible to express the problem like we did in the microscopic setting ( eq .",
    "( [ eq : dqnmic ] ) ) : [ eq : dqnmac ] - n_k ( ) , and @xmath33 transports @xmath29 according to  ( [ eq : pbmactransp ] ) .    we may now write the catching up algorithm ( which we consider for the time being as a theoretical tool ) : given an initial density @xmath99 and a time step @xmath128 , build @xmath129 ,  , @xmath130 according to [ eq : cumac ] \\ {    rcll ^n+1 & = & ( + ) _ # ^n & + ^n+1 & = & p_k ( ^n+1 ) &    . where the projection is performed in the wasserstein sense and the set @xmath11 is the constrained set introduced in . as for the microscopic model",
    ", we must check that both steps are well defined ( possibly under some restriction on the time step @xmath64 ) , and that the obtained discrete solutions converge to a limit which can be identified as a solution to problem  ( [ eq : pbmactransp])([eq : pbmacproj ] ) .",
    "we shall assume here two properties of @xmath63 .",
    "first we require that it tends to keep people within the room @xmath98 , i.e. that for @xmath131 sufficiently small @xmath132 maps @xmath98 onto @xmath98 .",
    "obviously , in the case of an emergency evacuation , with an open exit door , we will of course alleviate this assumption by allowing @xmath63 to cross the exit line ( we will discuss later on how to `` catch up '' the possible part of the mass that exits @xmath98 because of this ) . secondly , we need it regular enough ( lipschitz continuous is sufficient ) , so that , still for @xmath131 sufficiently small @xmath132 preserves the absolute continuity of the measure , i.e. @xmath133 implies @xmath134 . this assumption",
    "being made , the prediction step is well defined for any measurable field @xmath63 .",
    "the key point is the projection step , which differs significantly from the microscopic situation .",
    "it is a variational problem in the space of measures , which consists in minimizing the distance to a fixed measure among elements of @xmath11 . as for existence",
    ", standard compactness arguments may be applied , but the question of uniqueness is more delicate .",
    "first of all , let us rule out the possibility to establish uniform prox - regularity in the spirit of definition  [ def : pr ] . consider the one - dimensional situation .",
    "a dirac mass at zero projects onto the characteristic function of @xmath135 . more generally , a combination of dirac masses @xmath136 ( we assume that the distance between supports of any two of them is always larger than half the total mass carried by the couple , so that they do not interact ) projects onto the sum of characteristic function of the flattened dirac masses : @xmath137 the wasserstein cost can be computed straightforwardly , it is @xmath138 on the other way around , consider a density @xmath139 ( i.e.  @xmath140 almost everywhere ) and @xmath141 the largest open set such that @xmath142 a.e .  in @xmath141 .",
    "this open set @xmath141 is a countable union of open intervals of lengths @xmath143 ( with possibly @xmath144 ) . among all densities which projects onto @xmath11 at @xmath29 ,",
    "the farthest is the combination of dirac masses with weights @xmath145 , supported at the middles of intervals , and it is at distance @xmath146 . as a consequence , @xmath69 prox - regularity can be expected at some points , but @xmath69 is not bounded away from @xmath13 . note that some measures are the projection of themselves only , even if they saturate the constraint at every point of their support : consider e.g. a dense open set of total measure @xmath31 in @xmath147 , and define @xmath29 as the characteristic function of its complement .",
    "as the saturated zone contains no interval , it can not be the projection of a measure which violates the constraint .",
    "note that this non prox - regularity can be seen as a natural consequence of the fact that the property in the microscopic setting degenerates as the granularity gets finer ( i.e. when the radius goes to @xmath13 ) .",
    "on the other hand , the set @xmath11 enjoys some kind of convexity property : it is geodesically convex ( see @xcite ) :    @xmath148 is said to be geodesically convex if for any @xmath113 , @xmath114 @xmath149 , the geodesic curve @xmath150 joining @xmath113 and @xmath114 belongs to @xmath11 for all @xmath151 $ ] .",
    "this property might suggest that uniqueness of the projection can be obtained by standard arguments : in a so - called aleksandrov non - positively curved ( npc ) length space ( see @xcite ) , considering @xmath152 minimizers and the measure halfway along the geodesic , convexity properties of the distance function @xmath153 lead to a contradiction .    unfortunately , as soon as @xmath154 , @xmath120 is not npc and the previous distance function even turns out to have _",
    "concavity _ properties .    yet , despite the previous assertions ( non prox - regularity and the concavity of the squared distance ) , other kind of interpolation curves ( called _ generalized geodesics _ ) can be used to assert well - posedness of the projection problem , without any restriction on the distance from @xmath11 .",
    "( generalized geodesics , see  @xcite , p. 207 ) a generalised geodesic joining @xmath113 to @xmath114 with base @xmath29 is a curve defined by @xmath155 where @xmath156 ( resp .",
    "@xmath157 ) is an optimal transport map from @xmath29 to @xmath113 ( resp .",
    "@xmath114 ) .    notice that when @xmath158 this gives again the expression of a geodesic in @xmath124 according to the distance @xmath119 .",
    "this generalized notion can be used to establish the following proposition    for any @xmath159 , the wasserstein distance to the set @xmath11 of admissible densities defined in is attained at a unique point @xmath160 .",
    "the projection operator @xmath161 is continuous .",
    "it is easy to check ( but one can refer to lemma 9.2.1 p.206 in  @xcite ) , that the square wasserstein distance enjoys strict convexity properties along generalized geodesics , i.e. @xmath162 .",
    "this gives the uniqueness once we know that the set @xmath11 is still convex along these generalized geodesics , i.e. that @xmath163 implies @xmath164 .",
    "this is obtained by a computation of the jacobian factor of the map @xmath165 , see @xcite .",
    "now that the catching - up algorithm is defined properly , the obtained sequence of discrete solutions allows to obtain an existence result :    let @xmath166 be the piecewise constant interpolation of the discrete densities given by the catching - up algorithm  ( [ eq : cumac ] ) .",
    "if @xmath167 is a @xmath168 velocity field , and @xmath169 , then @xmath170 converges as @xmath64 tends to @xmath13 to a solution of the macroscopic problem @xmath171    let us first describe the discrete quantities we obtain thanks to the catching up algorithm .",
    "we denote by @xmath172 the optimal transport between the projected density @xmath173 and @xmath174 , and we write @xmath175 ( see figure [ fig : transports ] ) .",
    "these transport maps allow to define a discrete velocity as follows : @xmath176    [ l]@xmath177 [ l]@xmath172 [ l]@xmath178 [ l]@xmath174 [ l]@xmath179 [ l]@xmath180 $ ]     we then define two different interpolations of these quantities . first , the piecewise constant interpolation is given by : @xmath181n \\tau , ( n+1 ) \\tau].\\ ] ] using @xcite for the projection part , it is possible to prove that @xmath182 satisfies the following discrete decomposition @xmath183 where @xmath184 converges uniformly to @xmath13 as @xmath64 tends to @xmath13 .",
    "we also define a continuous interpolation of @xmath185 as follows @xmath186n \\tau , ( n+1 ) \\tau],\\ ] ] where @xmath187 .",
    "this second interpolation satisfies the transport equation at velocity @xmath188 .",
    "it is possible to prove a priori estimates on these interpolated curves , and therefore prove that they both converge to the same limit .",
    "the continuous interpolation of @xmath185 gives that the limit density satisfies a transport equation , and the discrete decomposition of the piecewise constant interpolation proves that the limit velocity is indeed the projection of the desired velocity onto @xmath37 .",
    "we finish this section by considering the case where , due to modeling reasons , we allow the vector field @xmath63 to let the mass exit through a part of the boundary .",
    "this means that @xmath189 is no longer supposed to map @xmath98 into @xmath98 but the segment connecting @xmath190 to @xmath191 is allowed to cross @xmath192 in a prescribed subset @xmath193 which stands for the exit . in such a case",
    "the transport step of the algorithm does not need to be changed , but we have to face , during the projection step , a density @xmath194 which is no longer supported in @xmath195 . to bring back the mass to the original domain we want to consider a modified set @xmath11 , that we call @xmath196 : @xmath197",
    "the reason for this choice is the following : we consider that as soon as a particle reaches @xmath198 , instead of following its movement after @xmath198 , we leave it on it .",
    "this is done for simplicity , but it only means that we are no longer concerned with what happens to the particles that have reached @xmath198 , not that they are really blocked on the exit . obviously , we needed to withdraw the density constraint on @xmath198 , so as to let particles stay on it , and also to represent the fact that @xmath198 stands actually for everything that happens at the door _ and beyond_.    once the set @xmath196 is introduced , the projection step is done by defining @xmath199 which means that we take a measure whose support may go beyond @xmath200 and we project it onto the measures over @xmath98 satisfying some extra density constraint .",
    "we stress that the same kind of argument ( projecting on a set of measures concentrated on @xmath200 ) could also be used , in the case with no exit , to withdraw the ( yet , natural ) assumption that @xmath189 maps @xmath98 into @xmath98 .",
    "the mathematical problem with this modified @xmath196 is much trickier .",
    "one of the difficulties , that prevent the usual theory to be applied , is the fact that the set @xmath196 loses some of the properties that @xmath11 had previously ( in particular it is no more geodesically convex : the geodesic - for the @xmath119 distance - between two points of @xmath196 could go out of @xmath196 ) .",
    "in particular we have no clue about the uniqueness of the projection , but the algorithm works in the same way if we accept to take any minimizer of the distance .      in case",
    "the spontaneous velocity is the gradient of some dissatisfaction function ( e.g.  distance to the exit in case of an emergency evacuation ) , the microscopic model can be put into a gradient flow form : @xmath201 where @xmath202 is the frchet subdifferential of @xmath203 defined by @xmath204 the function @xmath205 that we consider is the total dissatisfaction , i.e. @xmath206 , where @xmath207 may be , as we said , the distance to the exit . indeed , as @xmath11 is uniformly prox - regular , the proximal normal cone identifies with the frchet subdifferential of @xmath208 hence @xmath209 ( see @xcite for more details ) .    in the macroscopic case , under the same assumption that @xmath63 is a gradient @xmath210 ,",
    "then one defines the global dissatisfaction function in a continuous setting : @xmath211 and the overall process can be seen as a gradient flow in the wasserstein space , i.e. @xmath29 is advected by @xmath33 , @xmath35 with @xmath212 where @xmath213 , and @xmath214 is defined in the following sense ( see  @xcite ) :    the strong frchet subdifferential of a function @xmath203 at @xmath29 is the set of fields @xmath215 such that for all transport maps @xmath216 , the following inequality holds true @xmath217 notice that the definition we gave before of @xmath218 is nothing but a particular case of this one , when @xmath219 .",
    "the main advantage of this gradient - flow formulation is the fact that it allows to handle vector fields @xmath63 less regular than what we need in the general case ( where it is natural to require @xmath63 to be lipschitz continuous , i.e. @xmath220 ) . for the whole theory on gradient flows ,",
    "first in a finite - dimensional setting , then in hilbert spaces , and finally in metric spaces and particularly in @xmath120 , we refer again to @xcite .",
    "in particular , the catching up algorithms made by the coupling of a prediction and a correction step , may be replaced in the case of a gradient structure by a single - step procedure , called _ proximal algorithm _ , where @xmath221 this algorithm has also been formalized in a metric setting , where it is known as _ minimizing movements _ ( see @xcite ) : it has first been applied to the case of @xmath120 with the wasserstein metric by jordan , kinderlehrer and otto in @xcite .",
    "the details about a gradient flow approach to the macroscopic framework of crowd motion are contained in @xcite , where both the case with no exit ( i.e. with the constraint @xmath222 ) and with exit ( @xmath223 ) are dealt with , the second one being much trickier than the first .",
    "moreau s catching up algorithm suggests a strategy to build approximate solutions to the evolution problem . yet , projecting a configuration @xmath17 onto @xmath11 is not straightforward .",
    "the scheme we propose extends ideas introduced in  @xcite for granular flows .",
    "it consists in performing a catching up step with @xmath11 replaced by some kind of inner local convex approximation .",
    "more precisely , considering that the configuration @xmath224 at time @xmath225 is known , the predicted configuration is obtained by @xmath226 then @xmath227 is obtained by projecting @xmath228 onto @xmath229 @xmath230 where @xmath231 stands for @xmath232    [ cols=\"^ \" , ]     in figure  [ fig : projs ] , we illustrate the set @xmath233 , intersection of sets @xmath234 whose boundaries are plotted in solid line .",
    "the set @xmath235 is delimited by the dashed line .",
    "the theoretical and numerical projections , respectively @xmath236 and @xmath237 are represented ( for two examples of @xmath238 ) . indeed ,",
    "as @xmath239 is uniformly prox - regular , the projection onto @xmath11 of @xmath240 is well - defined for @xmath131 small enough .",
    "the replacement of @xmath239 by the convex set @xmath241 is convenient because it allows us to use classical numerical methods to compute this projection .",
    "indeed , this projection problem can be reformulated in a saddle - point form which can be solved by uzawa algorithm : find @xmath242 satisfying \\ {    l ^n+1= ^n+1 + _ ij  _",
    "ij(^n ) + i < j ,  d_ij(^n)+_ij(^n ) ( ^n+1-^n ) 0 + _ ij   ( d_ij(^n)+_ij(^n ) ( ^n+1- ^n)=0 .    .",
    "[ eq : projs ] note that the lagrange multipliers are not unique in general . indeed there exist configurations @xmath243 with strictly more than @xmath244 active constraints so that the associated gradients @xmath245 are linearly dependent .",
    "the matrix appearing in uzawa algorithm is @xmath246 where @xmath247 is the matrix whose rows are vectors @xmath248 . in @xcite ,",
    "the authors quantify how the condition number of matrix @xmath249 varies with the parameter @xmath250 ( setting a lower bound of the local prox - regularity of @xmath11 at point @xmath251 ) when @xmath249 is non - singular . as a consequence",
    "we expect that the uzawa algorithm converges less quickly for configurations with low local prox - regularity . in numerical simulations",
    ", we noticed indeed that solving the saddle - point problem requires more iterations in case of a jam .    in the proposed scheme ( [ eq : nummicrocorr ] ) , the replacement of @xmath239 by the convex set @xmath241 is computationally convenient but arises many difficulties in the numerical analysis .",
    "the convergence result is based on the fact that @xmath252 is a good approximation of @xmath239 near @xmath17 .",
    "let us denote by @xmath253 the continuous piecewise linear function satisfying @xmath254 defined by ( [ eq : nummicrocorr ] ) .",
    "let @xmath63 be lipschitz and bounded , for all @xmath90 , the sequence @xmath255 uniformly converges to @xmath17 defined in theorem  [ th : wpmicro ] , when @xmath131 tends to 0 .",
    "here we just give a sketch of the proof .",
    "we refer the reader to @xcite for the details .",
    "it can be easily proved that @xmath256 is bounded and so a convergent subsequence can be extracted .",
    "thanks to the uniqueness result in theorem [ th : wpmicro ] , it suffices to check that the limit function ( which is absolutely continuous ) satisfies the differential inclusion . since @xmath257",
    ", it comes for all @xmath258 , latexmath:[\\[(\\qq^n+ \\tau \\uu(\\qq^n)-\\qq^{n+1 } ) \\cdot   ( \\tilde \\qq - \\qq^{n+1 } ) \\leq     dividing by @xmath131 , we obtain for all @xmath260 @xmath261 represents the discrete actual velocity",
    ". we aim at passing to the limit in the previous inequality and the crucial term is the last one .",
    "thus the convergence result rests on the local continuity of the map @xmath262 in a neighborhood of the set @xmath263 .",
    "more precisely it can be checked that for all @xmath264 and all @xmath265 , @xmath266 { } p_{k_{\\qq } } ( \\tilde \\qq)\\ ] ] by using the saddle point form of these projections ( [ eq : projs ] ) .",
    "thanks to the reverse triangle inequality , the lagrange multipliers ( which are not unique in general ) are bounded .",
    "then compactness arguments allow us to obtain the convergence of the projections .",
    "we deduce that the limit function @xmath17 satisfies the following differential inclusion : @xmath267.\\ ] ] as for all @xmath268 , @xmath269 , the required result is proved .",
    "the convergence order of this scheme will be specified in a forthcoming paper @xcite .",
    "this more accurate result is based on metric qualification conditions between sets @xmath270 .",
    "more precisely there exists a constant @xmath271 such for all @xmath264 and all @xmath265 , @xmath272 this result rests on the reverse triangle inequality  ( [ eq : revtriang ] ) .",
    "the strategy we propose relies again on the catching up philosophy which already made it possible to establish an existence result .",
    "the density is first advected by the spontaneous velocity field ( with no consideration of the congestion constraint ) , and then projected ( in the wasserstein sense ) onto the set of feasible densities .",
    "the time discretization scheme writes as follows : given a time step @xmath128 , an initial configuration @xmath99 , approximate configurations @xmath129 ,  , @xmath130 are built recursively according to    @xmath273    @xmath274    the first step consists in transporting @xmath130 according to the given transport map @xmath275 .",
    "we simply transport the center of each cell at velocity @xmath167 during a time @xmath64 , and then distribute the mass of the transported cell on the different cells of the mesh it intersects , as illustrated in fig .",
    "[ fig : lagrangien ] .",
    "the transported density writes @xmath276 where @xmath277 represents the area of the set @xmath22 .",
    "+    [ l]@xmath278 [ l]@xmath279 [ l]@xmath280     the second step is less standard .",
    "the scheme we propose to approximate the projection onto @xmath11 with respect to the wasserstein distance is based on the following considerations : consider a domain @xmath141 and a non - zero density @xmath108 supported by @xmath281 . for @xmath282 , @xmath283 , and",
    "its projection onto @xmath11 is identically @xmath31 in @xmath141 .",
    "let us denote by @xmath284 the displacement field which corresponds to the optimal transport between @xmath285 and @xmath286 .",
    "one has @xmath287 as the latter is identically @xmath31 in @xmath141 , one has @xmath288 so that , at the first order in @xmath289 , @xmath290 as @xmath291 is an optimal map , @xmath33 is a gradient  : @xmath292 , where @xmath41 verifies the poisson problem @xmath293 since we are considering a violation of the density constraint on a set @xmath141 and assuming that , after the projection , the density will be saturated on @xmath141 itself , we are only interested in finding the mass that will exit @xmath141 when the displacement is given by @xmath284 .",
    "this means , at a first order approximation , we only need to estimate the flux of density through the boundary @xmath294 , i.e. @xmath295 .",
    "now consider the stochastic interpretation of the poisson equation @xmath293 considering that @xmath108 is a probability measure , we consider a random variable @xmath296 which follows the law of probability with density @xmath108 .",
    "we now consider a brownian motion stemming from @xmath297 .",
    "its path crosses @xmath294 for the first time at @xmath298 .",
    "the random variable @xmath299 is known to follow the probability law with density @xmath300 on @xmath301 ( see  @xcite ) .",
    "the idea is therefore to redistribute the exceeding mass of the saturated zone in the following way ( see fig .  [",
    "fig : proj_stoch ] ) : for each saturated cell , a random walk is started , which transports the exceedind mass @xmath302 , where @xmath303 is the measure of the cell .",
    "when this random walk encounters a non - saturated cell , it gets rid of as much mass as it can , and continues as long as the transported mass is not fully distributed . when all the saturated cells have been treated , the obtained density @xmath179 is admissible .",
    "+    let us notice that the gradient flow structure when @xmath304 would also allow for another time - discretized algorithm , namely the proximal ( or minimizing movement , or jordan - kinderlehrer - otto ) one instead of the prediction - correction one .",
    "this would lead to a sequence of minimization problems involving the computation of the distance @xmath119 .",
    "the formulation by means of the transport plans , that we did not develop here for the sake of readability , transforms these problems into linear programming problems , that could a priori be solved through a simplex algorithm .",
    "yet , it turns out to be so slow that 2d problems could not be efficiently solved in this way .",
    "[ sec : num_an_macro ] the numerical analysis of the transport part of the algorithm is standard , but the projection part is more delicate , and we are not able to provide a rigorous error estimate for the stochastic scheme we propose .",
    "let us simply say here that , beyond the unformal justification of the approach given previously , the asymptotic behavior of the so - called diffusion limited aggregation ( dla ) process ( see  @xcite ) , and the link between the distance based on the energy norm between measures ( see  @xcite or  @xcite ) and the wasserstein distance give some arguments to support the chosen strategy .",
    "both microscopic and macroscopic model express the same assumptions at their respective levels : a spontaneous velocity is given , and the system evolves according to a velocity which is the closest to the spontaneous one among all feasible velocities , in a least square sense . yet , the macroscopic model was not built from the microscopic one by a rigorous homogenization process .",
    "we describe here some obstacles to such a process , to shed light on the deep differences between both settings , in spite of formal similarities .     + first of all , let us point out that the notion of maximal density is somewhat ambiguous as far as the microscopic model is concerned .",
    "let us consider the case of identical radii ( monodisperse situation ) .",
    "the maximal packing density for identical disks is known to be @xmath305 , and corresponds to the triangular lattice ( see fig .",
    "[ fig : triang ] ) .     +    yet",
    "the actual density of moving collections of rigid disks is generally strictly less than this maximal value , which is only attained for this very particular configuration . as an example , in the evacuation situation represented in fig .",
    "[ fig : densites_micro ] , the mean density upstream the exit door ranges typically between @xmath306 and @xmath307 .",
    "the fact that the actual density is strictly less than the maximal one does not mean that the flow is unconstrained ( as the macroscopic setting would suggest ) .",
    "those considerations call for a clear identification of configurations which saturate the constraint .",
    "such a notion is proposed for the three - dimensional situation in  @xcite , in a nash equilibrium spirit :     _ we say that a particle ( or a set of contacting particles ) is jammed if it can not be translated while fixing the positions of all of the other particles in the system .",
    "_    note that this property is defined as _ local jamming _ in",
    "it is tempting to consider as maximal in some sense any density corresponding to such configurations , for which there are no free disks , so that constraints are activated everywhere .",
    "the triangular lattice is clearly jammed , but so is the cartesian lattice ( @xmath308 ) , and it is possible to build looser jammed configuration ( see fig .  [",
    "fig : triangloose ] , with @xmath309 ) .",
    "+    beyond this fuzzy definition of maximal packing , the set of feasible velocities in the microscopic setting is strongly dependent on the local structure and not only on the density , a feature which is lost in the macroscopic approach .",
    "let us first consider the triangular lattice represented in fig .",
    "[ fig : triang ] . having the number of disks going to infinity and the radius going to zero",
    ", the density ( characteristic function of the solid phase ) converges to the uniform density @xmath310 .",
    "microscopic feasible velocities can be defined in the solid phase , and one may wonder what are the corresponding feasible velocities in the macroscopic limit .",
    "such velocities are clearly constrained in 3 directions . using self - evident notations @xmath311 , @xmath312 and @xmath313 to design the principal directions of the lattice , one obtains at the limit some sort of unidirectional expansion constraints in those directions , which can be written @xmath314 it still allows for non - rigid motions at the limit : fig .",
    "[ fig : triangmove ] represents a feasible velocity field at the microscopic level , whose macroscopic counterpart is @xmath315 note that , although the microscopic velocity field is tangent to the boundary of @xmath11 , the corresponding macroscopic field is strictly expansive ( @xmath316 ) .",
    "+     + the considerations which we presented above have a crucial consequence on the behavior of both approaches : the microscopic model has the ability to reproduce blocked jams ( which are observed in practice ) , whereas the macroscopic one does not .",
    "the latter property is a consequence of the maximum principle .",
    "let us consider the situation represented in fig .",
    "[ fig : jammac ] , with a saturated zone ( @xmath317 ) upstream the exit door .",
    "the desired velocity @xmath63 is assumed to point to the exit door , so that @xmath318 .",
    "the actual velocity is @xmath319 , where @xmath41 solves a poisson problem in the saturated zone , with homogeneous neumann condition on the walls , and homogeneous dirichlet boundary conditions at the exit and on the interface with the non - saturated zone . by virtue of the maximum principle , @xmath41 is nonnegative over the saturated zone , so that the velocity correction @xmath320 is non - negative on the door : people exit _ quicker _ than they would if there were no congestion ( they are always pushed out by other people behind them ) . as a consequence ,",
    "if the desired velocity field tends to move people out of the room , the evacuation process will never stop before the room is empty .",
    "[ l]@xmath321 [ l]@xmath322 [ l]@xmath323 [ l]saturated zone    the microscopic situation is quite different .",
    "the pressures are still nonnegative by definition of the saddle - point formulation  ( [ eq : spmic ] ) , but they are likely to act in the `` wrong '' direction for the individuals which are the closest to the door , as soon as they form an arch ( see figure  [ fig : jammic ] ) .     + the precise way for setting convergence questions when passing from the microscopic to the macroscopic model needs to associate a density to every microscopic configuration . an easy way to do that is to associate to every non - overlapping disks configuration the uniform measure ( with unit density ) on the union of those disks . in this way",
    "we obtain a density @xmath29 obviously satisfying @xmath324 but we also know that , when we let the size of the disks go to zero ( with the number of disks increasing consequently to infinity ) we can not obtain _ any _ density @xmath324 in the macroscopic limit . in particular in dimension 2 it is impossible to go beyond @xmath325 , since we know that the maximal density is realized by the triangular lattice .",
    "this suggests that it is better to rescale the approximating @xmath29 by the maximal density , which is @xmath31 in dimension one , @xmath326 in dimension two ",
    "now the question is the following : take a sequence of initial data @xmath327 , i.e. the densities associated ( in the way we described above ) to a sequence of microscopic configurations with @xmath0 non overlapping disks of radius @xmath328 .",
    "let @xmath329 and @xmath330 and consider the limit density @xmath99 .",
    "can we say that , for fixed velocity field @xmath331 , the constrained evolution stemming in the microscopic model from @xmath327 converges to that obtained in the macroscopic one from @xmath99 ?",
    "the answer can be expected to be positive if @xmath332 , but the situation is much more complicated for @xmath333 .",
    "actually , the unidimensional case gives no ambiguity between jammed and maximal density configuration , which is not the case in higher dimension .",
    "for instance one can consider a sequence of jammed cartesian lattices in a two - dimensional domain @xmath98 ( a square , for instance ) , with a concentrating vector field @xmath331 ( for instance @xmath334 ) .",
    "in this situation , the configuration is completely blocked , and the evolution gives , for any time @xmath335 , the constant density @xmath327 . on the other hand , the limit as @xmath329 is a constant density , but it does not activate the constraints . this is due to the fact that the density realized by the cartesian grid is strictly smaller than that of the triangular lattice , which was taken as a reference .",
    "hence , in the evolution , @xmath336 would differ from @xmath99 and move towards a more concentrated configuration .",
    "but this ( jammed configuration which are not of maximal density ) is not the only source of problems in the micro - macro limit .",
    "actually , one can consider a similar example with a sequence of triangular grids .",
    "in such a case , both @xmath327 and the limit @xmath99 activate and saturate the constraints .",
    "this induces some constraints on the admissible velocities but , as we saw in the paragraph devoted to these constraints , they act differently in the microscopic and in the macroscopic models . in particular , the limits of the admissible velocities for the microscopic problem are those vector fields which are `` unilaterally incompressible '' in the three main direction of the lattice , which is not at all the same as imposing only a positive divergence .",
    "the actual limit constrained space at the macroscopic level necessitates obviously to account for the microscopic structure of the contact network . beyond packing fraction , different types of _ order metrics _ have been introduced in  @xcite to give a better description of the local structure ( see also  @xcite for a recent review on this matter ) , but the use of those concepts for evolution problem is still widely open .",
    "this shows some deep differences , for @xmath333 , between the limit of the microscopic case and the macroscopic one . in the case of a gradient vector field @xmath63",
    "we could express this issue , thanks to the gradient - flow formulation , in terms of the associated dissatisfaction functionals .",
    "some general results give conditions to translate a variation form of convergence on these functionals ( called @xmath337convergence ) into a convergence of the associated flows , but we do not want to insight this question in details because of its complexity ; it would go out of the scope of this paper and it is moreover matter of an ongoing work .",
    "we specify here how the model we presented can be improved in order to account for more elaborate individual behaviors than the purely reptilian one on which we built our approach . + we aim here at integrating the fact that individuals are likely to elaborate complex strategies to escape a building . for example , in case of congestion , they may decelerate or try to avoid the jam , instead of keeping pushing inefficiently .",
    "the velocity of a person becomes then dependent upon the position of people he can see in front of him .",
    "such a strategy can be defined as follows : we define the set @xmath338 ( see fig .",
    "[ fig : ni ] ) containing persons who are near and visible to the individual @xmath7 : @xmath339 where @xmath340 and @xmath341 .",
    "the constant @xmath342 is taken equal to the half angle of view ( i.e. @xmath343 ) .",
    "two choices are possible for the individual @xmath7 if his neighbours ( belonging to @xmath338 ) walk slower than him .    first",
    ", he can decelerate instead of going through the crowd . in this case , his speed @xmath344 ( i.e. his velocity s norm ) at time @xmath345 is made dependent upon his neighbours behavior at time @xmath346 .",
    "more precisely , it is computed as a barycenter of his neighbours speeds , weighted by their relative positions .    otherwise , he can also be in a hurry and prefer changing his way instead of slowing down . in that case , if there exists another clear way through the set @xmath347 , he follows it while keeping his desired speed , or else he will go round the group @xmath338 . among all directions allowing him to do so , he chooses @xmath348 the closest to the one he wanted ( see fig . [ fig : bypass ] ) .",
    "numerical simulations with these strategies are presented in  @xcite .",
    "if every pedestrian prefers decelerating , there is typically no contact between people and rarefaction waves are observed . on the contrary",
    ", the avoiding strategy leads to situation where the constraints are activated .    integrating strategies in the macroscopic",
    "setting is more delicate , as it is less natural to follow the motion of a single individual in the crowd .",
    "however , it is possible to model the influence of local density on the behavior of the crowd by changing the desired velocity .",
    "more precisely , it is natural to assume that when people arrive upstream a crowded area , they tend to decrease their desired velocity . in the spirit of  @xcite , a two dimensional generalization of road traffic models can be integrated in the model : at time @xmath349 , people located at @xmath350 have a desired velocity @xmath351 with the same direction as the initial desired velocity @xmath352 and a norm that decreases when @xmath29 increases : @xmath353 where @xmath354 goes monotonically from @xmath31 to @xmath13 as @xmath29 goes from @xmath13 to @xmath31 ( saturation value ) .",
    "the evolution of the crowd then obeys the same principles as before , namely : @xmath355 it can be proved that the density transported by @xmath356 stays in @xmath11 : the projection step in the evolution equation becomes useless . yet , if @xmath357 ( people continue to push even at saturation density ) , the congestion constraint is likely to be activated , and the approach we propose in this paper can be adapted to this situation .",
    "note that , from a modeling standpoint , it is natural to use _ downstream _ information to determine the desired velocity ( people adapt their velocity according to what they see , i.e.  to the density in front of them , which is downstream their desired direction ) , whereas , once the velocity is determined , the transport can be performed using an standard upwind scheme .",
    "we investigate here the possibility to account for different types of individuals , who might have different , and possibly antagonist , strategies . in the microscopic setting , because of the lagrangian character of the approach , this can be done without any change in the mathematical structure : it is sufficient to alleviate the assumption that the desired velocity depends on the position only , but can be defined differently depending of individuals . in the macroscopic setting , this is less straightforward , but it can be formulated in the following way : consider two populations @xmath31 and @xmath152 , with associated densities @xmath358 and @xmath359 and desired velocity fields @xmath360 and @xmath361 , we consider that in the saturated zone @xmath362 $ ] , desired velocities are perturbed by a common correction velocity @xmath363 which ensures that the constraint @xmath364 remains satisfied , and we define this velocity as the one that minimizes the @xmath104 norm .",
    "the model can be written @xmath365 where @xmath41 vanishes in the non - saturated zone @xmath366 $ ] , and verifies the complementarity condition @xmath367 note that , in case @xmath360 and @xmath361 are both gradients of dissatisfaction functions ( one for each population ) , the system presents a gradient - flow structure in the wasserstein setting ( see  @xcite for a similar problem in the context of cell migration ) .",
    "we give here some hints on another possibility to define the actual velocity , in a nash equilibrium spirit .",
    "note that this approach is likely to change the mathematical nature of the evolution problem .",
    "in particular , the instantaneous velocity is no longer defined in a unique way , but as any ( among infinitely many ) equilibrium in the following sense : the actual generalized velocity @xmath368 is such that , for any @xmath7 , @xmath33 considered as a function of @xmath369 only minimizes the distance to @xmath63 among feasible velocities , i.e. @xmath370 where @xmath371 is the set @xmath372 as soon as two disks are in contact and push against each other , there are infinitely many solutions to this problem , as illustrated by the situation of fig .",
    "[ fig : mashmic ] : the desired velocity of person @xmath31 is @xmath31 ( in the horizontal direction ) , whereas person @xmath152 tends to stay still . in the previous approach ( @xmath373 projection onto the cone of feasible velocity ) , the actual velocity is @xmath374 for both . in the present approach , any diagonal couple @xmath375 , with @xmath376 $ ] , realizes an instantaneous nash equilibrium .",
    "[ c]@xmath31 [ c]@xmath152        in the macroscopic framework , the problem can be described as follows : for any @xmath377 , one prescribes that @xmath378 with @xmath379 as indicated previously , this approach changes the mathematical nature of the evolution problem , which calls for further developments .",
    "let us simply say that the solutions we built in the previous sections are particular solutions to this new problem , among infinitely many others .",
    "the first problem of the comparison between these models lies in the initial configuration : given an initial configuration for the disks in the microscopic setting , it is difficult to choose the macroscopic density that best fits this configuration . as long as uniform densities are considered , we adopt the following method : we first estimate the mean density in the initial microscopic configuration , and then normalize it with the maximal density of disks we encounter throughout the microscopic evolution . in fig .",
    "[ fig : init_max_density ] , we present an example of such a computation .",
    "( on the left ) is normalized by the maximal density encountered @xmath380 ( on the right ) to obtain a macroscopic density of @xmath381 . ]",
    "( on the left ) is normalized by the maximal density encountered @xmath380 ( on the right ) to obtain a macroscopic density of @xmath381 . ]",
    "we then let evolve both systems and compare the configurations at equivalent time steps .",
    "the formation of the saturated zones is quite the same in microscopic and macroscopic settings ( see fig .  [ fig:5obs_01 ] ) .",
    "however , as pointed out in section  [ sec : micro_macro ] , the behavior of the two models at the exit is very different , in particular the evacuation is faster in the macroscopic model ( see fig .  [ fig:5obs_15 ] ) .                      in the microscopic model ,",
    "the pressure exerted between people appears naturally as a lagrange multiplier , and is computed using usawa algorithm .",
    "the macroscopic pressure field does not appear explicitly in the numerical scheme , but it can be recovered by estimating during the projection step a discrete equivalent of the odometer function ( see section  [ sec : num_an_macro ] ) : on each cell , we define the pressure as the total mass emitted by this cell during the stochastic projection . in fig .  [",
    "fig : pressions ] , we represented the microscopic pressure and the isovalues of the macroscopic pressure field upstream an exit door . in both settings ,",
    "the pressure field is maximal in the middle of the saturated zone , and decreases at the entrance and the exit of this zone .",
    "let us finally present some examples which correspond to more realistic evacuations situations .",
    "the microscopic setting , as suggested in section  [ sec : micro_macro ] , describes more properly situations where people leave through narrow exits .",
    "[ fig : bat_maths ] shows the evacuation of the first floor of a large building ( departement of mathematics at orsay ) .",
    "+                    the macroscopic setting , on the other hand , would best fit situations where many people have to evacuate a large domain .",
    "we present in fig .",
    "[ fig : stade ] the evacuation of the stade de france .",
    "even if the benches of the stadium are quite narrow passages , the macroscopic model gives results that correspond to real evacuation configurations .",
    "we would like to thank e. maurel - segala and l. thibault for fruitful suggestions and comments ."
  ],
  "abstract_text": [
    "<S> we address here the issue of congestion in the modeling of crowd motion , in the non - smooth framework : contacts between people are not anticipated and avoided , they actually occur , and they are explicitly taken into account in the model . </S>",
    "<S> we limit our approach to very basic principles in terms of behavior , to focus on the particular problems raised by the non - smooth character of the models . </S>",
    "<S> we consider that individuals tend to move according to a desired , or spontanous , velocity . </S>",
    "<S> we account for congestion by assuming that the evolution realizes at each time an instantaneous balance between individual tendencies and global constraints ( overlapping is forbidden ) : the actual velocity is defined as the closest to the desired velocity among all admissible ones , in a least square sense . </S>",
    "<S> we develop those principles in the microscopic and macroscopic settings , and we present how the framework of wasserstein distance between measures allows to recover the _ sweeping process _ </S>",
    "<S> nature of the problem on the macroscopic level , which makes it possible to obtain existence results in spite of the non - smooth character of the evolution process . </S>",
    "<S> micro and macro approaches are compared , and we investigate the similarities together with deep differences of those two levels of description .    </S>",
    "<S> b. maury , a. roudneff - chupin , f. santambrogio    j. venel </S>"
  ]
}