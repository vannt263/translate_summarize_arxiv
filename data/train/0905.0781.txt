{
  "article_text": [
    "merton - type models , also referred to as structural models , such as portfoliomanager @xcite and creditmetrics @xcite , have become a standard choice for financial institutions credit risk economic capital frameworks . in these models",
    "default correlations between different borrowers are modeled using a set of common systematic risk factors associated with the state of economy .",
    "computationally heavy monte carlo simulations are usually used for calculations of portfolio - wide risk measures as well as risk allocation to sub - portfolios and/or individual exposures .",
    "however , simulation - based risk allocation on exposure level suffers from monte carlo noise and is especially demanding in terms of computer power / time .",
    "advanced monte carlo simulation techniques have been developed in order to improve the stability problem associated with risk decomposition down to individual facilities ( see , e.g. , * ? ? ?",
    "despite the improvements , the problem exists due to the inherent stochastic nature of monte carlo simulations .",
    "practical demand for stable and fast capital allocation routine in credit portfolios led to development of analytical techniques .",
    "analytical allocation techniques are also preferable for the purposes of portfolio optimization and risk adjusted pricing . granularity adjustment @xcite and multi - factor adjustment @xcite are well known extensions of asymptotic single risk factor framework of @xcite .    unfortunately , most of the research on risk allocation techniques focuses on advanced risk measures like var and es ( expected shortfall ) , leaving variance - covariance based allocation approach aside . despite the shortcomings of this approach ( see , e.g. , * ? ? ?",
    "* ) , this ( old - fashioned ) allocation method still remains the allocation method of choice for many financial institutions .",
    "variance - covariance based risk contribution is considered to be intuitive , simple and easy to compute risk measure ( according to * ? ? ?",
    "yet , no efficient analytical solution has been reported so far . a brute force approach",
    "consists of calculations of all pairwise correlations in the portfolio ( the reader is referred to section [ sec : corr ] for the details ) .",
    "the amount of such calculations is quadratic in the number of loans in the portfolio .",
    "this quadratic complexity of the calculations make such an approach impractical for big portfolios .    in this article",
    "a variance - covariance based analytical risk allocation technique is proposed .",
    "the proposed approach is applicable to fully featured gaussian multi - factor merton - type models , is suitable for virtually any portfolio size and composition and is remarkably accurate and fast .",
    "the main advantage of the proposed technique is that the underlying algorithm is of linear complexity in portfolio size .",
    "it should be pointed out that the author is not an advocate for a particular risk measure .",
    "financial institutions have the responsibility for choosing the risk allocation approach and should clearly understanding the associated shortcomings .",
    "the outcome of any risk allocation technique should be a subject of regular expert reviews and sanity checks .",
    "the technique presented here might be of interest to practitioners building in - house economic capital models .",
    "in contrast to most publications focusing on default - only case , the proposed approach is suitable for a very general class of credit portfolio models .",
    "the article is organized as follows .",
    "first , a general case of a portfolio of risky assets , whose pairwise correlations are modeled by means of a set of normally distributed common factors , is considered . a routine to allocate portfolio s risk ( associated with its standard deviation ) to underlying exposures",
    "is described .",
    "next , it is demonstrated how to apply the proposed allocation technique to portfoliomanager - like credit portfolio model , i.e. single - period , multi - factor merton - type model with stochastic recovery and risk neutral valuation at horizon ( which accounts for credit migrations ) .",
    "finally , accuracy and speed of the proposed technique are compared to those of monte carlo simulation .",
    "in this section a formal theoretical framework for variance - covariance based risk allocation is described .",
    "first , it is shown how the euler allocation principle is applied to portfolio s standard deviation and a link with risk allocation in credit portfolio is briefly described .",
    "next , gaussian multi - factor model is considered and a series expansion for pairwise covariance is proposed .",
    "finally , an algorithm for calculation of the risk contributions is described .",
    "standard deviation is a subadditive risk measure allowing euler allocation ( see , e.g. , * ? ? ?",
    "* ) of portfolio s risk to sub - portfolios and/or individual exposures .",
    "consider a portfolio consisting of risky assets with standard deviations @xmath0 and pairwise value correlations @xmath1 .",
    "the standard deviation of the portfolio @xmath2 , @xmath3 can be written as a sum of euler risk measures ( risk contributions ) @xmath4 as @xmath5 the risk contributions @xmath6 can readily be calculated by differentiation and can be expressed in terms of covariance ( or correlation @xmath7 ) between individual exposures and the portfolio @xmath8    the variance - covariance approach to capital allocation in credit portfolios utilizes the above decomposition to distribute the _ economic capital _ of the portfolio between individual exposures proportionally to the risk weights as follows @xmath9      let us start by considering a portfolio of risky instruments @xmath10 .",
    "the value @xmath11 of each instrument is assumed to be a function of normally distributed random variable @xmath12 .",
    "correlations between variables @xmath13 are modeled through a set of normally distributed independent variables @xmath14 referred to as common factors .",
    "each variable @xmath12 is split in a sum of instrument specific part , which depends on a gaussian variable @xmath15 , and systematic part , which depends on the common factors , as follows @xmath16 the independently distributed random variables @xmath17 are assumed to have zero mean and unit variance .",
    "instrument specific constants @xmath18 and @xmath19 determine dependency of @xmath12 on the common factors .",
    "the so - called factor loadings @xmath19 are subject to normalization condition @xmath20    using the representation , one can readily calculate a covariance @xmath21 between any pair of distinct variables @xmath13 @xmath22 the value covariance between two distinct instruments @xmath23 can be written as @xmath24 where @xmath25 and @xmath26 are normal and bivariate normal density functions defined as @xmath27    in theory , the above expression and are sufficient to calculate the standard deviation based risk contributions @xmath6 . in practice , however , one is facing a problem of computing @xmath28 two - dimensional integrals in for a portfolio of @xmath29 instruments .",
    "such a brute force approach becomes inappropriate for large portfolios , i.e. @xmath30 or higher .",
    "aiming for a linear ( in @xmath29 ) complexity algorithm for computing the risk contributions , let us reduce the dimensionality of the integral in .",
    "applying mehler s formula ( for the proof see , e.g. , * ? ? ?",
    "* ) @xmath31 to the bivariate normal density function , the following expression is obtained for the pairwise value covariance @xmath32 where @xmath33 are hermite polynomials ( for definition and properties of hermite polinomials see , e.g. , * ? ? ?",
    "the last expression can be rewritten as @xmath34    the above series converges at least as fast as a geometric series with quotient @xmath21 . to see this",
    ", one can use inequality ( see , e.g. , * ? ? ?",
    "* ) @xmath35 which leads to @xmath36 the last integral in the above inequality is finite for any reasonable value function @xmath37 .      using the series expansion and expression , a linear complexity algorithm can be constructed for calculation of risk contributions as follows .",
    "first , the parameters @xmath38 , @xmath39 are evaluated for each instrument @xmath40 .",
    "the number of terms @xmath41 used for calculations determines an accuracy of the algorithm .",
    "second , assuming @xmath42 common factors , the following portfolio specific parameters are calculated @xmath43 third , the risk weights are calculated using the following expression @xmath44 which after substituting , and becomes @xmath45 finally , the standard deviation of the portfolio and the risk charges per instrument are calculated as @xmath46    under certain circumstances the algorithm may be further simplified .",
    "consider , for example , a single factor model .",
    "expressions and then become @xmath47 another simplification takes place if we consider a default - only credit portfolio , i.e. @xmath48 in this case the parameters @xmath49 can be computed analytically @xmath50",
    "in order to assess the accuracy of the proposed risk allocation routine , portfoliomanager - like credit portfolio model is considered . in this section basic description of the model is given .",
    "some aspects concerning application of the proposed risk allocation framework to the credit portfolio model are discussed .",
    "the analytically calculated risk measures are compared to those obtained as a result of monte carlo simulation .",
    "it is finally concluded that the accuracy of the analytical approximation is higher than the accuracy of monte carlo simulation with @xmath51 scenarios .",
    "consider gaussian multi - factor merton - type credit portfolio model with stochastic recovery rate .",
    "the credit portfolio consists of loans whose values @xmath10 are functions of the corresponding borrowers asset returns @xmath13 .",
    "the asset returns are assumed to be normally distributed with the correlation structure as described in section [ sec : corr ] .",
    "a borrower is considered to be in default at some point in time if its asset return falls below the borrower - specific threshold , i.e. when @xmath52 .",
    "the quantity @xmath53 is called _ distance to default _ and is related to the borrower s _ probability of default _ @xmath54 through the standard normal cumulative distribution function @xmath55 as @xmath56    the portfolio is observed at some time in the future @xmath57 called _ horizon_. assume that both probability of default till horizon @xmath54 and ( cumulative ) probability of default till maturity @xmath58 are known for each loan in the portfolio . in case",
    "a loan matures before the horizon , its probability of default at horizon is assumed to be equal to its probability of default at maturity .",
    "in case of default , the value is defined by the recovery rate @xmath59 and loan s risk - free value @xmath60 as @xmath61 where @xmath62 is a risk - free rate and @xmath63 is loan s maturity . in case of no default and maturity before or at horizon ,",
    "the risk - free value of the loan is recovered @xmath64 risk neutral valuation , as described in @xcite , is applied in no default case to the loans maturing after horizon @xmath65 where @xmath66 the @xmath67 in the above expression stands for the so - called _ market price of risk _ and @xmath62 is the borrower - specific parameter introduced in .",
    "the above valuation takes into account change of loan s market value due to _",
    "credit migration_.    uncertainty in recovery rates in case of default is modeled by means of beta distribution ( see , e.g. , * ? ? ?",
    "* ) whose probability density function is @xmath68 where @xmath69 and @xmath70 are parameters characterizing the distribution .",
    "the above parameters are chosen to math the mean @xmath71 and the variance @xmath72 of the loss distribution @xmath73 where @xmath74 is a parameter defining the shape of the distribution .",
    "losses in case of default are assumed to be distributed independently from asset returns .      in order to adopt the risk allocation procedure proposed in section [ sec : algorithm ] , some modifications should be made to and .",
    "for the value function @xmath37 of a loan at horizon which is defined by - , the standalone variance @xmath72 has to be calculated as @xmath75 where the last term takes into account loss uncertainty in case of default according to . since distribution of losses in case of default",
    "is assumed to be independent , the other terms in are not affected by stochastic nature of recovery rate .",
    "expressions and were derived assuming that all the borrower - specific parts of asset returns ( @xmath76 in ) are independent . in practice , however , some borrowers are represented by multiple loans in the portfolio .",
    "such loans have perfectly correlated asset returns , which makes the series expansion invalid .",
    "it is still possible to modify the expressions and , preserving the linear complexity of the risk allocation algorithm .    consider a borrower @xmath69 with multiple loans @xmath77 .",
    "expression has to be modified as follows @xmath78 introducing @xmath79 , net value of the loans of the same borrower , the first term in the above expression can be written as @xmath80 . assuming the recovery distributions of the loans of the same borrower perfectly correlated , the following modified version of can be derived @xmath81 where the first term is defined as @xmath82      @xmath83{error_n2n1 } & \\includegraphics[width=0.35\\textwidth , viewport=90 480 390 740,clip]{error_n3n1 } \\\\",
    "\\includegraphics[width=0.35\\textwidth , viewport=90 480 390 740,clip]{error_n2n10 } & \\includegraphics[width=0.35\\textwidth , viewport=90 480 390 740,clip]{error_n3n10 } \\\\",
    "\\includegraphics[width=0.35\\textwidth , viewport=90 480 390 740,clip]{error_n2n100 } & \\includegraphics[width=0.35\\textwidth , viewport=90 480 390 740,clip]{error_n3n100 } \\end{array}$ ] @xmath84{error_n2n1 } & \\includegraphics[width=0.35\\textwidth , viewport=0 0 300 260,clip]{error_n3n1 } \\\\",
    "\\includegraphics[width=0.35\\textwidth , viewport=0 0 300 260,clip]{error_n2n10 } & \\includegraphics[width=0.35\\textwidth , viewport=0 0 300 260,clip]{error_n3n10 }",
    "\\\\ \\includegraphics[width=0.35\\textwidth , viewport=0 0 300 260,clip]{error_n2n100 } & \\includegraphics[width=0.35\\textwidth , viewport=0 0 300 260,clip]{error_n3n100 } \\end{array}$ ]    @xmath85{error_plot } & \\includegraphics[width=0.35\\textwidth , viewport=50 520 310 720,clip]{error_table } \\end{array}$ ] @xmath86{error_plot } & \\includegraphics[width=0.35\\textwidth , viewport=-10 -30 250 170,clip]{error_table } \\end{array}$ ]    to assess performance of the proposed approximation , analytically calculated risk contributions have been compared to those calculated by means of monte carlo simulation .",
    "the comparison has been made using the settings described in section [ sec : portmodel ] .",
    "in particular , the same valuation function - has been used in both cases .",
    "analytical risk contributions were computed numerically using the algorithm described in section [ sec : algorithm ] , modified by and .",
    "monte carlo risk contributions were estimated using the definition according to @xmath87 and @xmath88 where @xmath89 is a number of scenarios and @xmath90 and @xmath91 are loan and portfolio value realizations in the @xmath74th scenario .",
    "a `` real life '' portfolio was used for numerical tests .",
    "the portfolio consisted of 8036 loans to 4378 borrowers .",
    "horizon @xmath57 was chosen to be 1 year , 4% flat risk - free interest rate was used and market price of risk @xmath67 was assumed to be 0.4 .",
    "the recovery uncertainty parameter @xmath74 in was set to be the same for all loans and equal to 4 .",
    "a wide range of loan risk drivers was covered .",
    "namely , probabilities of default at horizon were in the range from @xmath92 to 0.4 , maturities varied between 1 month and 30 years , losses given default @xmath71 were spread between 0.1 and 0.99 .",
    "the borrowers represented a wide variety of geographic regions and industries .",
    "the borrower - specific coefficients @xmath93 , determining dependency on the common factors @xmath14 , covered the range from 0.07 to 0.65 .",
    "the common factor model used in the experiments contained 120 factors @xmath14 .",
    "the accuracy of the monte carlo based estimate of @xmath94 depends on the number @xmath29 of scenarios in a simulation .",
    "the standard error of the monte carlo estimates is proportional to @xmath95 .",
    "several monte carlo simulations were performed with different numbers of scenarios .",
    "starting at @xmath96 , the number of scenarios was gradually increased up to @xmath51 .",
    "the accuracy of the analytically estimated @xmath94 , on the other hand , is limited by the number of terms @xmath41 in the series expansion that are taken into account .",
    "the amount of common factors @xmath97 in the model imposed a practical limitation on the cutoff point @xmath41 in , since for the @xmath25th order terms in the series expansion one has to keep track of @xmath98 portfolio parameters @xmath99 .",
    "two values of the cutoff parameter @xmath100 and @xmath101 have been considered in the experiments .",
    "deviations between monte carlo and analytical estimates of risk contributions , @xmath102 , have been studied for different combinations of @xmath29 and @xmath41 .",
    "figure [ fig : error ] displays the relative differences between the monte carlo and analytical estimates of the risk contributions for each loan in the portfolio together with the standard error of this deviation .",
    "one can see that when the monte carlo noise is suppressed by a high number of scenarios , the @xmath101 case exhibits better performance in terms of accuracy .",
    "the agreement between the two methods in case @xmath101 and @xmath103 is remarkably good .    for both @xmath100 and @xmath101",
    "cases the deviations from the @xmath104 monte carlo error convergence rule have been studied .",
    "figure [ fig : mcvsan ] shows the dependency of the @xmath105 is a standard deviation of the relative difference between analytical and simulation - based estimates of risk contributions @xmath94 across the portfolio . ] on the number of simulations . for the @xmath101 case",
    "the product @xmath105 remains constant up to @xmath103 , which implies that the difference between the monte carlo and analytical estimates is mainly due to the noise of the monte carlo simulation .",
    "thus , the accuracy of the analytical approximation in case @xmath101 exceeds the accuracy of monte carlo simulation using @xmath51 scenarios .",
    "computer time spent was 13 seconds for @xmath101 analytical and 16 hours for @xmath103 monte carlo calculations .",
    "overall , the proposed analytical approximation to variance - covariance based risk allocation demonstrated exceptionally good performance both in terms of accuracy and computer time .",
    "the high accuracy of the proposed approximation has been demonstrated by benchmarking the analytical estimates against monte carlo simulation",
    ". however , some explanations are necessary to address possible scepticism regarding the convergence properties of the expansion .    indeed , approximating",
    "a pairwise correlation by the first three terms of the above mentioned series expansion may lead to a rather rough estimate .",
    "asset correlation @xmath21 of two borrowers with high systematic components of asset returns ( @xmath18 in ) from the same country / industry cluster ( i.e. the same factor loadings @xmath106 ) may be higher than 0.5 , which results in a poor convergence of .",
    "however , two important mitigating factors contribute to the overall accuracy of the approximation .    first , according to , the risk contribution @xmath107 is proportional to a sum of covariances of the facility @xmath108 with all other facilities in a portfolio .",
    "the accuracy in this case depends on the average pairwise asset correlations @xmath21 which are quite smaller ( compared to 0.5 ) in realistic portfolios due to country / industry diversification and existence of facilities with low systematic components of asset returns .",
    "second , contributions @xmath49 to the higher order ( @xmath109 ) parameters @xmath99 in have different signs depending on the valuation function @xmath110 .",
    "this _ pd diversification _",
    "effect is obvious in a default - only case and is caused by oscillating nature of higher order hermite polynomials . as a consequence , the higher order contributions decrease and overall convergence properties of are improved .",
    "both of the above mentioned factors contributing to the accuracy of the proposed approximation are significant if the portfolio consists of large number of loans with different characteristics ( country / industry association , probability of default , size of systematic part of asset return , etc ) . in other words , the more realistic the portfolio , the better the accuracy of the approximation .",
    "variance - covariance based risk allocation method has been proposed .",
    "the method was applied to a `` real life '' credit portfolio model and tested on a `` real life '' portfolio .",
    "it was shown that the proposed analytical approximation is superior both in terms of speed and accuracy to the traditional monte carlo simulations .",
    "the proposed routine may be especially appealing for the purpose of risk adjusted loan pricing since it allows to compute accurate and statistical noise - free estimates of capital charges .",
    "once the portfolio - specific parameters are calculated , the risk contribution @xmath94 of a loan can be computed using and the capital charge can be assigned according to .",
    "d.  tasche .",
    "capital allocation for credit portfolios with kernel estimators .",
    "_ quantitative finance _ , vol .",
    "9(5 ) , pp . 581 - 595 , august 2009 .",
    "preprint available from http://www-m4.ma.tum.de/pers/tasche/capital_allocation_with_kernel_estimators.pdf    d.  tasche .",
    "capital allocation to business units and sub - portfolios : the euler principle . in a.",
    "resti , ed . ,",
    "_ pillar ii in the basel assord : the challenge of economic capital_. risk books , 2008 .",
    "preprint available from http://arxiv.org/ps_cache/arxiv/pdf/0708/0708.2542v3.pdf ."
  ],
  "abstract_text": [
    "<S> high precision analytical approximation is proposed for variance - covariance based risk allocation in a portfolio of risky assets . </S>",
    "<S> a general case of a single - period multi - factor merton - type model with stochastic recovery is considered . </S>",
    "<S> the accuracy of the approximation as well as its speed are compared to and shown to be superior to those of monte carlo simulation . </S>"
  ]
}