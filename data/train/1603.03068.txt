{
  "article_text": [
    "let @xmath7 be an additive group ( i.e. , an abelian group with group operation denoted by @xmath8 ) . for @xmath9 , we write @xmath10 , @xmath11 , etc ..",
    "if @xmath12 are two subsets of @xmath1 , we say ( following @xcite ) that @xmath3 is _ sum - avoiding in @xmath0 _ if there do not exist distinct @xmath5 such that @xmath13 .",
    "we then define @xmath14 where @xmath15 denotes the cardinality of a finite set @xmath3 ; equivalently , @xmath2 is the smallest integer with the property that , given any @xmath16 elements of @xmath0 , two of them will also sum to an element of @xmath0 .",
    "in particular @xmath17 for non - empty finite @xmath0 . informally , sets @xmath0 with a small value of @xmath2 are `` somewhat sum - closed '' in the sense that sums @xmath18 of distinct elements of @xmath0 `` often '' remain in @xmath0 .    to estimate @xmath2 in terms of @xmath19 when @xmath0 is finite",
    "non - empty is an old problem posed by erds and moser @xcite . in the case where @xmath1 is a torsion - free for any @xmath20 and any @xmath21 .",
    "for instance , a lattice such as @xmath22 is torsion - free . ]",
    "group ( without loss of generality one can take @xmath1 to be the integers @xmath23 in this case ) , a simple application of turn s theorem ( for graphs with variable degrees ) gives @xmath24 for finite non - empty @xmath0 ( see @xcite , as well as an elementary proof in @xcite ) .",
    "this bound has been slowly improved in recent years @xcite , @xcite , @xcite , with the best known bound currently being @xmath25 ( see ( * ? ? ?",
    "* corollary 1.3 ) ) .",
    "equivalently , one has @xmath26 . in the converse direction , there are examples of arbitrarily large finite sets of integers @xmath0 for which @xmath27 ; see @xcite .",
    "it remains a challenging question to reduce the gap between the upper and lower bounds .",
    "see our survey @xcite for more discussion .",
    "in this paper we consider the case when the group @xmath1 is allowed to have torsion .",
    "then it is possible for @xmath2 to remain small even when @xmath0 is arbitrarily large .",
    "for instance , we have the following classification of the additive sets @xmath0 for which @xmath28 :    [ easy ] let @xmath0 be a finite subset of an additive group @xmath1",
    ". then @xmath28 if and only if one of the following is true :    * @xmath29 , where @xmath30 is a subgroup of @xmath1 .",
    "* @xmath31 , where @xmath30 is a @xmath32-torsion subgroup of @xmath1 ( thus @xmath33 for all @xmath34 ) . *",
    "@xmath35 for some @xmath36 .",
    "* @xmath37 for some @xmath36 . * @xmath38 for some @xmath36 .",
    "it is easy to verify that @xmath28 in all of the above five cases .",
    "now suppose that @xmath28 ; then we have @xmath39    suppose first that there exists a non - zero @xmath40 such that @xmath41 .",
    "then from we see that the injective map @xmath42 maps @xmath0 to @xmath0 , and thus must be a bijection on @xmath0 .",
    "this implies that the map @xmath43 is also a bijection on @xmath0 . combining these facts with ,",
    "we see that @xmath0 is closed under addition ( since we can shift @xmath44 back and forth by @xmath45 as necessary to make @xmath46 distinct ) .",
    "since @xmath0 is finite , every element must have finite order , and then @xmath0 is then closed under negation , and so @xmath0 is a subgroup .",
    "it remains to consider the case when @xmath47 suppose now that there exists an element @xmath48 such that @xmath49 .",
    "we claim that @xmath0 must then lie in the group generated by @xmath50 . for",
    "if this were not the case , then take an element @xmath40 which is not generated by @xmath50 , in particular @xmath51 . by iterating",
    "we see that @xmath52 for all positive @xmath53 , thus @xmath50 must have finite order . in particular , @xmath54 , and by again ( and the hypothesis @xmath49 ) we see that @xmath41 , contradicting .",
    "once @xmath0 lies in the group generated by @xmath50 , it is not hard to see that @xmath0 must be one of @xmath55 , @xmath56 , or @xmath57 , simply by using the observation from that the map @xmath58 maps @xmath59 into @xmath0 , together with .",
    "the only remaining case is the @xmath32-torsion case when @xmath60 for all @xmath48 .",
    "then either @xmath61 , or else by @xmath0 does not contain zero . in the latter case we observe from that @xmath62",
    "is closed under addition and is thus a @xmath32-torsion group .",
    "the claim follows .",
    "now we consider the case when @xmath2 is a little larger than @xmath63 , say @xmath64 for some moderately sized @xmath53 . from proposition",
    "[ easy ] and the easily verified subadditivity property @xmath65 we see that this situation can occur for instance if @xmath0 is the union of up to @xmath53 arbitrary finite subgroups , or the union of up to @xmath66 arbitrary subgroups and a singleton . the main result of this paper is to establish a partial converse to this observation , covering @xmath0 efficiently by up to @xmath53 groups , or up to @xmath66 groups and a set of bounded cardinality :    [ main ] let @xmath0 be a finite subset of an additive group @xmath1 with @xmath64 for some @xmath67 .",
    "then there exist finite subgroups @xmath68 of @xmath1 with @xmath69 such that @xmath70 is a quantity depending only on @xmath53 ( in particular , it does not depend on @xmath1 or @xmath19 ) .",
    "if furthermore @xmath71 , we may strengthen to @xmath72    note that proposition [ easy ] gives the @xmath73 case of this theorem with @xmath74 .    intuitively , the reason for theorem [ main ] is as follows .",
    "if @xmath2 is equal to some small natural number @xmath53 and @xmath0 is large , then we expect many pairs @xmath75 in @xmath0 to sum to another element in @xmath0 .",
    "standard tools in additive combinatorics , such as the balog - szemerdi theorem @xcite and freiman s theorem in an arbitrary abelian group @xcite , then should show that @xmath0 contains a large component that is approximately a _ coset progression _",
    "@xmath76 : the minkowski sum of a finite group @xmath77 and a multidimensional arithmetic progression @xmath78 .",
    "because of bounds such as that show that @xmath79 becomes large on large torsion - free sets , one expects to be able to eliminate the role of the `` torsion - free '' component @xmath78 of the coset progression @xmath76 , to conclude that @xmath0 has large intersection with a finite subgroup @xmath77 . in view of the subadditivity ,",
    "one heuristically expects @xmath2 to drop from @xmath53 to @xmath66 after removing @xmath77 ( that is to say , one expects @xmath80 ) , at which point one can conclude by induction on @xmath53 starting with proposition [ easy ] as a base case .",
    "more realistically , one expects to have to replace the conclusion @xmath80 with some more technical conclusion that is not exactly of the same form as the hypothesis @xmath81 , which makes a direct induction on @xmath53 difficult ; instead , one should expect to have to perform a @xmath53-fold iteration argument in which one removes up to @xmath53 subgroups @xmath82 from @xmath0 in turn until one is left with a small residual set @xmath83 .",
    "unfortunately , when the group @xmath1 contains a lot of torsion , removing a large subgroup @xmath77 from @xmath0 can leave one with a residual set with no good additive structure , and in particular with no bounds whatsoever on @xmath84 .",
    "for instance , suppose that there is an element @xmath85 of @xmath86 with @xmath87 , and take @xmath0 to be the union of @xmath77 and an _ arbitrary _ subset of @xmath88 .",
    "then it is easy to see that @xmath2 is at most @xmath32 , but upon removing the large finite group @xmath77 from @xmath0 one is left with an arbitrary subset of @xmath88 , and in particular @xmath84 can be arbitrarily large .",
    "the problem in this example is that the group @xmath77 is the `` incorrect '' group to try to remove from @xmath0 ; one should instead remove the larger group @xmath89 , which contains @xmath77 as an index two subgroup .",
    "the main difficulty in the argument is then to find an algorithm to enlarge an `` incorrect '' group @xmath77 to a `` correct '' group that absorbs all the relevant `` torsion '' that is present .",
    "this is not too difficult at the start of the iterative argument mentioned above , but becomes remarkably complicated in the middle of the iteration when one has already removed some number of large subgroups @xmath90 from the initial set @xmath0 .",
    "a particular technical difficulty comes from the fact that the groups @xmath90 , as well as the residual set @xmath91 , can have wildly different sizes ; in particular , sets which are negligible when compared against one of the @xmath92 , could be extremely large when compared against the residual set @xmath91 . to get around these issues",
    ", one needs to ensure some `` transversality '' between these components of @xmath0 , in the sense that the intersection between any of these two sets ( or translates thereof ) are much smaller than either of the two sets .",
    "this adds an extra layer of complexity to the iterative argument ; so much so , in fact , that it becomes very unwieldy to run the argument in a purely finitary fashion .",
    "instead , we were forced to formulate the argument in the language of nonstandard analysis in order to avoid a large number of iterative arguments to manage a large hierarchy of parameters ( somewhat comparable in complexity to those used to prove the hypergraph regularity lemma , see e.g. @xcite , @xcite , @xcite , @xcite ) .",
    "one byproduct of this is that our arguments currently provide no bound whatsoever on the quantity @xmath93 appearing in the above theorem ; indeed we expect that if one were to translate the nonstandard analysis arguments back to a standard finitary setting , that the bound obtained on @xmath93 would be of ackermann type in @xmath53 or worse .",
    "in addition to the issue of lack of bounds for @xmath93 , theorem [ main ] remains unsatisfactory in another respect , in that it does not fully describe the structure of @xmath0 inside each of the component groups @xmath92 , other than to establish positive density in the sense of .",
    "on the one hand one does not expect as simple a description of the sets @xmath94 as in proposition [ easy ] , as was already seen in the preceding example when @xmath0 was the union of a finite group @xmath77 and an arbitrary subset of a coset @xmath88 with @xmath87 . on the other hand ,",
    "not every dense subset of a finite group has a small value of @xmath79 .",
    "for instance , in @xmath95 , the set @xmath96 has @xmath97 , even though @xmath0 is contained in a finite group of order @xmath98 .",
    "see also proposition [ counter ] , proposition [ seven ] , and proposition [ sidon ] below for examples of a non - trivial dense subset of a cyclic group with a small value of @xmath79 .",
    "nevertheless , we are able to sharpen the classification in theorem [ main ] when @xmath1 is a finite group whose order is not divisible by small primes ; see theorem [ odd ] below .      in @xcite",
    ", erds posed the following question , written here in our notation .",
    "[ quest ] let @xmath53 be a natural number , let @xmath1 be a finite additive group , and let @xmath0 be a subset of @xmath1 with @xmath99 .",
    "assume that @xmath19 is sufficiently large depending on @xmath53 .",
    "does there necessarily exist @xmath100 such that @xmath101 ?    from proposition [ easy ] we see that the answer to the question is affirmative when @xmath102 .",
    "the case @xmath103 was settled in @xcite ( who in fact established the claim for all @xmath104 ) . to our knowledge the cases @xmath105 have remained open in the literature , though in @xcite a probabilistic construction was given , for any @xmath106 of subsets",
    "@xmath0 of a finite group of @xmath106 elements with @xmath107 such that there were no @xmath100 with @xmath101 .    for @xmath108",
    ", we have the following simple negative result :    [ counter ] let @xmath109 be a natural number , and set @xmath1 to be the cyclic group @xmath110 .",
    "let @xmath111 be the set @xmath112 thus , for instance , if @xmath113 , then @xmath114 .",
    "then @xmath115 and @xmath116 , but there does not exist @xmath100 with @xmath101 .    it is easy to see that if @xmath40 , then @xmath117 , and that @xmath118 as claimed , and the set @xmath119 is always sum - avoiding in @xmath0 , so @xmath120 .",
    "the only remaining thing to establish is the upper bound @xmath121 .",
    "suppose for contradiction that there existed distinct @xmath122 such that the @xmath123 sums @xmath124 with @xmath125 were all outside @xmath0 .",
    "we can write @xmath126 with @xmath127 .",
    "if @xmath128 then @xmath129 is a multiple of @xmath130 , and hence @xmath131 lies in @xmath0 , a contradiction .",
    "thus @xmath132 lie in @xmath133 . by the pigeonhole principle , we can then find @xmath125 such that @xmath134 and such that @xmath135 have the same parity .",
    "note that @xmath136 can not equal @xmath137 since @xmath138 would then both equal @xmath139 .",
    "but then @xmath124 is of the form @xmath140 , where @xmath141 is the average of @xmath142 and @xmath143 , and so @xmath144 , again a contradiction .    in particular ,",
    "the answer to erds s question is negative for any @xmath108 . for @xmath145 , or more generally for any @xmath105 for which @xmath146 is a mersenne prime , we have an even simpler counterexample :    [ seven ] let @xmath105 be such that @xmath147 is prime .",
    "let @xmath148 for some arbitrary finite group @xmath77 , and let @xmath149 where @xmath150",
    ". then @xmath151 and @xmath152 , but there does not exist @xmath100 with @xmath101 .",
    "the only non - trivial claim is that @xmath151 . from computing sums from the set",
    "@xmath153 we see that @xmath154 .",
    "suppose for contradiction that there existed distinct @xmath155 with all sums @xmath156 outside @xmath0 . by the pigeonhole principle we can find @xmath157 such that @xmath158 for some @xmath159 . then @xmath160 .",
    "since @xmath161 is also in @xmath162 , we obtain a contradiction .",
    "thus erds s question is now resolved for all values of @xmath53 .",
    "but the above examples heavily on the order of the group @xmath1 being highly divisible by a small prime ( @xmath32 and small mersenne primes respectively ) . in the opposite case ,",
    "where the order of @xmath1 is not divisible by any small primes , we have a positive result , which strengthens theorem [ main ] by greatly improving the density of @xmath0 in each subgroup @xmath92 :    [ odd ] let @xmath53 be a natural number , let @xmath163 , and assume that @xmath164 is sufficiently large depending on @xmath165 .",
    "let @xmath0 be a subset of a finite additive group @xmath1 with @xmath99 .",
    "assume that @xmath6 is not divisible by any prime less than @xmath164 .",
    "then there exist subgroups @xmath82 of @xmath1 with @xmath166 such that @xmath167 for all @xmath168 , and @xmath169 furthermore , if @xmath170 , then we can take @xmath83 to be empty .",
    "applying this theorem with @xmath171 , we conclude in particular that if @xmath6 is not divisible by any prime less than @xmath164 and @xmath172 , then @xmath0 must have density greater than @xmath173 in some subgroup @xmath77 of @xmath1 , and hence there exist @xmath174 with @xmath175 .",
    "thus the answer to erds s question becomes positive if we assume that @xmath6 is not divisible by small primes .",
    "we establish theorem [ odd ] in section [ odd - sec ] ; the argument uses theorem [ main ] , as well as a general arithmetic removal lemma of krl , serra , and vena @xcite ( which is in turn proven using the hypergraph removal lemma ) , and also some fourier analysis . from proposition [ seven ] we see ( assuming the existence of infinitely many mersenne primes ! ) that the quantity @xmath164 in the above theorem has to at least exponentially growing in @xmath53 .",
    "one could hope to get even more control on the exceptional set @xmath176 , in the spirit of proposition [ easy ] .",
    "but the following example shows that the exceptional set can be somewhat non - trivial in size :    [ sidon ] let @xmath77 be a finite group of odd order , and let @xmath177 be a sidon set , that is to say a set @xmath178 whose sums @xmath179 , @xmath180 , are all distinct . then @xmath181 .",
    "it was shown by erds and turn @xcite , erds @xcite , and chowla @xcite that there are sidon subsets of @xmath182 of size @xmath183 for large @xmath184 , which easily implies the existence of sidon sets in the cyclic group @xmath95 of size @xmath185 .",
    "this shows that the exceptional sets @xmath176 in theorem [ odd ] can be arbitrarily large .",
    "suppose for contradiction that there exist distinct @xmath186 whose six sums @xmath156 , @xmath187 lie outside of @xmath0 , and thus lie in @xmath3 .",
    "of these six sums , many pairs of sums are forced to be distinct from each other , for instance @xmath188 is distinct from @xmath189 .",
    "indeed , the only collisions possible are @xmath190 , @xmath191 , and @xmath192 . if for instance @xmath190 , @xmath191 are both true then @xmath193 , which implies @xmath194 since @xmath195 is odd , a contradiction .",
    "thus there is at most one collision ; by symmetry we may assume then that @xmath196 and @xmath197 , which implies that @xmath198 are all distinct from each other .",
    "but then from the identity @xmath199 we see that @xmath3 is not a sidon set , a contradiction .",
    "we thank ben green for helpful comments and references .",
    "we quickly review the nonstandard analysis formalism that we need .",
    "we assume the existence of a standard _ universe _",
    "@xmath200 , which is a set that contains all the mathematical objects needed for theorem [ main ] such as the group @xmath1 , the set @xmath0 , the natural numbers @xmath201 , the integers @xmath23 and reals @xmath202 , etc .. the precise nature of @xmath200 is not important for us , so long as it remains a set .",
    "objects in this universe will be referred to as _ standard _",
    ", thus for instance elements of @xmath203 will be called _ standard natural numbers _ for emphasis .",
    "we fix a _ non - principal ultrafilter _",
    "@xmath204 : a collection of subsets of @xmath203 ( known as _ @xmath205-large _ sets ) obeying the following axioms :    * if @xmath206 and @xmath0 is @xmath205-large , then @xmath3 is @xmath205-large . *",
    "the intersection of any two @xmath205-large sets is again @xmath205-large . * if @xmath207 , then exactly one of @xmath0 and @xmath208 is @xmath205-large . *",
    "no finite subset of @xmath203 is @xmath205-large .",
    "the existence of a non - principal ultrafilter is easily established by zorn s lemma .",
    "nonstandard object _ is an equivalence class of a sequence @xmath209 of standard objects @xmath210 , where two sequences @xmath209 and @xmath211 are equivalent if one has @xmath212 for an @xmath205-large set of @xmath210 .",
    "this equivalence class will be denoted @xmath213 , and called the _",
    "ultralimit _ of the sequence @xmath214 .",
    "we define a _ nonstandard natural number _ to be the ultralimit of a sequence of standard natural numbers ; similarly define the concept of a nonstandard integer , nonstandard real , etc .. the set of nonstandard natural numbers is denoted @xmath215 ; similarly define @xmath216 , @xmath217 , etc .. we can embed @xmath203 in @xmath215 by identifying any standard natural number @xmath106 with its nonstandard counterpart @xmath218 ; similarly for the integers and reals .",
    "all the usual arithmetic operations and relations on the standard natural numbers @xmath203 extend to nonstandard natural numbers .",
    "for instance the sum of two nonstandard numbers is given by the formula @xmath219 and the ordering on nonstandard natural numbers is given by defining @xmath220 whenever @xmath221 for an @xmath205-large set of @xmath210 .",
    "one can verify that all the usual ( first - order ) laws of arithmetic continue to hold for the nonstandard natural numbers ; this is a special case of os s theorem , which we will not state here .",
    "similarly for the nonstandard integers and reals .    given a sequence @xmath222 of standard sets @xmath223",
    ", we define the _ ultraproduct _ @xmath224 to be the collection of ultralimits @xmath213 with @xmath225 for an @xmath205-large set of @xmath210 .",
    "an ultraproduct of standard sets will be called a _ _ nonstandard set _ _ ; an ultraproduct of standard finite sets will be called a _ nonstandard finite set _ ; and an ultraproduct of standard additive groups will be called a _ nonstandard additive group_. note that nonstandard additive groups are also additive groups in the usual ( or `` external '' ) .",
    "also , any cartesian product @xmath226 of two nonstandard finite sets @xmath227 is again ( up to some canonical isomorphism which we ignore ) a nonstandard finite set .",
    "similarly for boolean operations such as @xmath228 , @xmath229 , or @xmath230 .    given a nonstandard finite set @xmath231 , we define its _ nonstandard cardinality _",
    "@xmath19 to be the nonstandard natural number @xmath232 thus for instance , if @xmath184 is a nonstandard natural number , then the nonstandard finite set @xmath233 has nonstandard cardinality @xmath234 .",
    "this notion of cardinality obeys the usual rules such as @xmath235 and @xmath236 ; we will use such rules without further comment below .",
    "the notion of nonstandard cardinality of a nonstandard finite set @xmath0 agrees with the usual ( or `` external '' ) notion of cardinality when @xmath19 is a standard natural number , but if this is not the case then @xmath0 will be infinite in the external sense .",
    "now we recall the nonstandard formulation of asymptotic notation . a nonstandard number @xmath85 ( in @xmath215 , @xmath216 , or @xmath217 )",
    "is said to be _ bounded _ if one has @xmath237 for some standard real @xmath238 , and _ unbounded _ otherwise .",
    "thus for instance a nonstandard natural number is bounded if and only if it standard . since",
    "standard numbers can not be unbounded , we abbreviate `` unbounded nonstandard number '' as `` unbounded number '' .",
    "if @xmath239 for every standard real @xmath240 , we say that @xmath85 is _",
    "infinitesimal_. if @xmath241 are nonstandard numbers with @xmath242 , we write @xmath243 , @xmath244 , or @xmath245 if @xmath246 is bounded , and @xmath247 if @xmath246 is infinitesimal .",
    "we caution that if one has sequences @xmath248 of nonstandard numbers indexed by a standard natural number @xmath106 , and @xmath249 , then no uniformity in @xmath106 is assumed could be extended in an `` internal '' fashion to nonstandard @xmath106 , and @xmath249 for all such @xmath106 , then one could make the constants @xmath250 uniform in @xmath106 by the saturation properties of nonstandard analysis , but we will not need to exploit saturation in this paper . ] ; one can only say that @xmath251 for some standard @xmath250 that can depend on @xmath106 .",
    "on the other hand , if we know that @xmath252 , then we have the uniform bound @xmath253 for _ all _ standard @xmath106 and @xmath240 .",
    "a major advantage of the nonstandard formulation for us is the ability to easily define various properties of ( nonstandard ) finite sets , whose counterparts in the finitary world would either have to be somewhat vague or informal , or else involve a number of auxiliary quantitative parameters that one would then need to carefully keep track of .",
    "we record the main properties we will need here :    [ nonst ] let @xmath1 be a nonstandard additive group , and let @xmath227 be nonstandard finite subsets of @xmath1 .",
    "* we say that @xmath0 is _ small _ if its cardinality @xmath19 is a standard natural number , and _",
    "large _ otherwise .",
    "( note that @xmath0 is small if and only if it is ( externally ) finite . )",
    "we say that @xmath12 have _ comparable size _ if @xmath254 .",
    "* we say that @xmath0 is _ somewhat sum - closed _",
    "if @xmath2 is ( standardly ) finite .",
    "* we write @xmath255 for the minkowski sum of @xmath0 and @xmath3 , and say that @xmath0 has _ bounded doubling _ if @xmath256 .",
    "for instance , any coset @xmath88 of a nonstandard finite group @xmath77 is of bounded doubling . * for any standard natural number @xmath257 , we write @xmath258 for the @xmath257-fold iterated sumset of @xmath0 .",
    "( although it can be done , we will not need to define @xmath259 for unbounded @xmath257 . ) * we say that @xmath0 _ avoids _",
    "@xmath3 if @xmath260 , and _ occupies _",
    "@xmath3 if it does not avoid @xmath3 ( or equivalently , if @xmath261 ) .",
    "for instance , if @xmath0 and @xmath3 are groups , @xmath0 avoids @xmath3 when @xmath229 has ( externally ) infinite index in @xmath3 , and @xmath0 occupies @xmath3 when @xmath229 has ( externally ) finite index in @xmath3 .",
    "see also figure [ fig : com ] .",
    "* we say that @xmath0 and @xmath3 are _ commensurate _ if they occupy each other , and _ transverse _ if they avoid each other .",
    "* a sequence @xmath262 of sets indexed by standard natural numbers @xmath106 is said to be an _ wandering sequence _ if for every standard natural numbers @xmath263 , we have @xmath264 for all but finitely many @xmath265 .",
    "for instance , if @xmath266 is a sequence of disjoint cosets of a single nonstandard finite group @xmath77 , then the @xmath266 form an wandering sequence .",
    "* we say that @xmath0 has the _ wandering property _ if the sequence @xmath267 is an wandering sequence , or equivalently that @xmath268 whenever @xmath269 is sufficiently large depending on @xmath106 .",
    "for example , a coset @xmath88 of a nonstandard finite group @xmath77 has the wandering property if and only if @xmath85 has infinite order in @xmath270 , or equivalently if @xmath271 for any standard @xmath106 .",
    "as another example , if @xmath272 are the nonstandard integers and @xmath184 is an unbounded natural number , then the nonstandard interval @xmath273 has the wandering property , but the nonstandard interval @xmath274 does not .",
    "all of the above notions are understood to be restricted to nonstandard finite sets ; for instance , if we say that @xmath0 is large , it is understood that @xmath0 is also nonstandard finite .",
    "[ t ]   occupies @xmath0 , but @xmath0 avoids @xmath3 ; @xmath238 and @xmath275 are commensurate ; and @xmath276 and @xmath277 are transverse.,title=\"fig:\",width=377 ]    we caution that the assertion `` @xmath0 is a large subset of @xmath3 '' does _ not _ mean that @xmath0 has positive density in @xmath3 in the sense that @xmath278 ; rather , it means instead that @xmath19 is unbounded .",
    "( the notion of positive density is captured instead by the assertion `` @xmath0 is a _ commensurate _ subset of @xmath3 '' . ) for instance , if @xmath184 is an unbounded natural number , then @xmath279 is a large subset of @xmath280 , despite having infinitesimal density in the latter set . as noted in the introduction ,",
    "one key difficulty with the inductive argument is that one has to simultaneously deal with multiple sets that are all large , but can be of wildly differing sizes , making it tricky to transfer density information from one set to another .",
    "for instance , if @xmath3 avoids @xmath0 , and @xmath281 is a large subset of @xmath0 , we can not automatically conclude that @xmath3 avoids @xmath281 ( for instance , consider the counterexample @xmath282 and @xmath283 ) .    to illustrate some of the above concepts , we give an easy application of the pigeonhole principle that will be used repeatedly in the sequel :    [ pigeon ] let @xmath0 be a somewhat sum - closed subset of a nonstandard additive group @xmath1 , and write @xmath284 .",
    "let @xmath285 be subsets of @xmath0 , with @xmath286 large , and @xmath287 nonstandard finite ( we permit @xmath287 to be small ) .",
    "then there exist @xmath288 such that @xmath289 in particular , @xmath290    we can assume that @xmath287 is non - empty , as the claim is trivial otherwise .",
    "consider the set @xmath291 of tuples @xmath292 with @xmath293 for all @xmath294 .",
    "this is a nonstandard finite set of cardinality @xmath295 . for any @xmath288",
    ", the subset of tuples with @xmath296 has cardinality at most @xmath297 , which is @xmath298 since @xmath299 is large .",
    "thus for a proportion @xmath300 of the tuples @xmath292 in @xmath291 , the @xmath301 are distinct elements of @xmath0 .",
    "since @xmath302 , we conclude that for each such tuple , one of the sums @xmath156 lies in @xmath0 . by the pigeonhole principle , we can thus find @xmath288 such that for a proportion @xmath303 of the tuples , @xmath304 , and the claim follows .",
    "theorem [ main ] is a consequence of ( and is in fact equivalent to ) the following nonstandard formulation .",
    "[ main - nonst ] let @xmath0 be a somewhat sum - closed subset of a nonstandard additive group @xmath1 , and set @xmath284 .",
    "then there exist nonstandard finite subgroups @xmath68 of @xmath1 with @xmath69 such that @xmath305 is small and @xmath0 occupies each of the @xmath82 . furthermore ,",
    "if @xmath71 , then @xmath306 .",
    "let us now see how theorem [ main - nonst ] implies theorem [ main ] ; the converse implication is not needed here and is left to the interested reader .",
    "this is a routine application of the transfer principle in nonstandard analysis , but for the convenience of the reader we provide a self - contained argument .",
    "suppose for contradiction that theorem [ main ] failed . carefully negating the quantifiers ,",
    "we conclude that there is a standard @xmath67 , a sequence @xmath307 of standard additive groups and finite subsets @xmath308 of @xmath307 with the following property for any @xmath210 : @xmath309 , and there does _ not _ exist finite subgroups @xmath310 of @xmath307 with @xmath69 such that @xmath311 and @xmath312 for all @xmath313 , and such that @xmath314 in the case @xmath71 .",
    "let @xmath315 denote the ultraproduct of the @xmath307 , and similarly define @xmath316 .",
    "then @xmath1 is a nonstandard additive group , and @xmath0 is a nonstandard finite subset of @xmath1 . if @xmath0 contained a subset @xmath317 of cardinality exactly",
    "@xmath318 that was sum - avoiding in @xmath0 , then by writing each @xmath319 as an ultralimit @xmath320 it is easy to see that for an @xmath205-large set of @xmath210 , one has @xmath321 a sum - avoiding subset of @xmath308 of cardinality exactly @xmath318 , contradicting the hypothesis @xmath309 .",
    "thus , such sets @xmath317 do not exist , and so @xmath64 . applying theorem [ main - nonst ]",
    ", we can now find nonstandard finite groups @xmath82 with @xmath69 such that @xmath322 and @xmath323 for some standard @xmath238 and all @xmath313 , and such that @xmath306 if @xmath71 . writing each @xmath324 as the ultraproduct of finite subgroups of @xmath307 ,",
    "we conclude for an @xmath205-large set of @xmath210 that @xmath325 and @xmath326 for all @xmath313 , with @xmath327 when @xmath71 . but",
    "this contradicts the construction of the @xmath308 for @xmath328 , and the claim follows .",
    "it remains to establish theorem [ main - nonst ] .",
    "this theorem will be derived from the following claim .",
    "[ main-2 ] let @xmath0 be a somewhat sum - closed subset of a nonstandard finite group @xmath1 , and let @xmath141 be a standard non - negative integer .",
    "then there exists @xmath329 and large pairwise transverse subgroups @xmath90 of @xmath1 with the following properties , with @xmath281 denoting the residual set @xmath330 :    * for each @xmath331 , @xmath0 occupies @xmath92 , but @xmath281 avoids all cosets @xmath332 of @xmath92 . *",
    "if the set @xmath281 is large and @xmath333 , then all cosets @xmath332 of @xmath92 avoid @xmath281 .",
    "in other words , by ( i ) , @xmath281 is transverse to all cosets of @xmath90 .",
    "* if @xmath334 , then the set @xmath281 is small .",
    "[ t ]   in which @xmath335 , and @xmath281 ( the portion of @xmath0 outside of @xmath336 ) is somewhat large , but transverse to all cosets of @xmath337 or @xmath338 .",
    "note that @xmath281 is permitted to be significantly smaller than @xmath337 , @xmath338 , or @xmath0.,title=\"fig:\",width=188 ]    see figure [ fig : mainpic ] .",
    "let us now see how theorem [ main-2 ] implies theorem [ main - nonst ] . let @xmath0 be a somewhat sum - closed subset of a nonstandard finite group @xmath1 , and set @xmath284 .",
    "we apply theorem [ main-2 ] with @xmath71 to obtain @xmath339 and large pairwise transverse @xmath90 of @xmath1 with the properties ( i)-(iii ) .",
    "if @xmath340 , then we are done from property ( iii ) , so we may assume @xmath71 .",
    "if @xmath281 is empty then we are again done , so suppose for contradiction that @xmath281 contains an element @xmath341 .",
    "note that for @xmath342 , @xmath94 is commensurate with the large set @xmath299 and is thus itself large .",
    "applying lemma [ pigeon ] with @xmath343 for @xmath342 and @xmath344 , we can find @xmath288 such that @xmath345 there are two cases , depending on whether @xmath346 or @xmath347 .",
    "first suppose that @xmath346 .",
    "for any @xmath348 with @xmath349 , @xmath350 is transverse to @xmath92 , and so @xmath351 similarly if @xmath352 instead of @xmath349 . by the triangle inequality ,",
    "we conclude that @xmath353 however , since @xmath281 avoids all cosets @xmath354 of @xmath355 , we have @xmath356 giving the required contradiction .",
    "now suppose that @xmath357 , thus @xmath358 and hence @xmath359 for any @xmath348 distinct from @xmath360 , the group @xmath350 is transverse to the group @xmath92 and hence to the coset @xmath361 ; also @xmath92 is disjoint from @xmath361 by construction . finally , @xmath281 does not occupy @xmath361 by ( i ) . combining these facts using the triangle inequality ,",
    "we conclude that @xmath362 again giving the required contradiction .",
    "this concludes the derivation of theorem [ main - nonst ] ( and hence theorem [ main ] ) from theorem [ main-2 ] .    it remains to establish theorem [ main-2 ] .",
    "before we begin the main argument , we establish some preliminary facts about somewhat sum - closed sets that we will use several times in the sequel .",
    "we begin with a somewhat technical lemma that asserts ( roughly speaking ) that somewhat sum - closed sets @xmath0 are avoided by at least one member of an wandering sequence @xmath363 , provided that some auxiliary hypotheses are satisfied .",
    "[ tc ] let @xmath0 be a somewhat sum - closed subset of a nonstandard additive group @xmath1 .",
    "let @xmath363 be an wandering sequence of subsets of @xmath1 , indexed by standard natural numbers @xmath106 .",
    "for each @xmath106 , suppose we have a large subset @xmath364 of @xmath0 , such that for all but finitely many standard natural numbers @xmath141 , we have @xmath365 for all @xmath366 ( or equivalently , @xmath367 avoids all translates of @xmath364 ) .",
    "then there must exist @xmath106 such that @xmath364 is avoided by @xmath363 .",
    "set @xmath284 .",
    "suppose for contradiction that @xmath364 is occupied by @xmath363 for each @xmath106 .",
    "then @xmath364 has comparable size to @xmath368 for each @xmath106 ( though the comparability need not be uniform in @xmath106 ) ; in particular , @xmath368 is large . for fixed @xmath106",
    ", we claim that @xmath369 ( say ) for all but finitely many standard @xmath141 . for , if this inequality failed for infinitely many @xmath141 , then by using the wandering nature of the @xmath363 one could find an infinite sequence @xmath370 with @xmath371 for all @xmath360 , with the @xmath372 pairwise disjoint , but this contradicts the fact that @xmath364 and @xmath368 have comparable size .    from the above claim and ( and the comparable size of @xmath364 and @xmath368 ) we have @xmath373 for all @xmath366 , assuming @xmath141 is sufficiently large depending on @xmath106 .",
    "iterating , we can find an increasing sequence @xmath374 such that latexmath:[\\[\\label{bah }    for all @xmath288 and @xmath366 . on the other hand , by applying lemma [ pigeon ] to the sets @xmath376 , we can find @xmath288 such that @xmath377 note that for @xmath378 contributing to the left - hand side of , we have @xmath379 summing in @xmath380 using and then in @xmath381 , we can thus upper bound the left - hand side of by @xmath382 giving the required contradiction .",
    "lemma [ tc ] leads to the following useful consequence .",
    "[ tf ] let @xmath1 be a nonstandard additive group .",
    "let @xmath3 be a subset of @xmath1 with the wandering property .",
    "let @xmath0 be a somewhat sum - closed subset of @xmath1 , and let @xmath281 be a large subset of @xmath0 , such that latexmath:[\\[\\label{smal }    natural numbers @xmath257",
    ". then @xmath3 avoids @xmath281 .",
    "this lemma is already interesting in the case @xmath384 , in which case it asserts that a set @xmath3 with the wandering property must necessarily avoid any large somewhat sum - closed set @xmath0 .",
    "another illustrative case is when @xmath281 and @xmath3 are contained in some subgroup @xmath77 of @xmath1 , and @xmath385 is contained in some subgroup @xmath386 with @xmath387 , in which case is automatically satisfied .",
    "a key point in this lemma is that @xmath281 is permitted to be significantly smaller than @xmath0 , so long as the technical condition can be verified .",
    "suppose for contradiction that @xmath3 occupied @xmath281 , so @xmath388 is commensurate to @xmath281 and is in particular large .",
    "applying lemma [ pigeon ] with @xmath389 for @xmath390 , we have @xmath391 and thus @xmath392 each element of @xmath393 contributes at most @xmath394 to the left - hand side , and hence @xmath395 and hence @xmath396 occupies @xmath281 .",
    "iterating this argument , we see that @xmath397 occupies @xmath281 for every standard natural @xmath106 .    by hypothesis ,",
    "the sequence @xmath397 is n wandering sequence . from we",
    "have for all but finitely many @xmath141 that @xmath398 for all @xmath366 . applying lemma [ tc ] , we conclude that there is a standard natural @xmath106 such that @xmath281 is avoided by @xmath397 , giving the required contradiction .",
    "we now prove theorem [ main-2 ] . we achieve this by induction on @xmath141 . when @xmath399 the claim is trivially true , so we now assume inductively that theorem [ main ] has been proven for some value of @xmath400 , and seek to establish the theorem for @xmath401 .",
    "the reader may initially wish to follow the argument below in the case @xmath399 , which is significantly simpler than the general case .",
    "let @xmath0 be somewhat sum - closed subset of a nonstandard finite group @xmath1 . by the induction hypothesis , we can find @xmath329 and pairwise transverse large subgroups @xmath90 of @xmath1 obeying the properties ( i)-(iii ) of theorem [ main-2 ] .    if @xmath334 , then from property ( iii ) we obtain theorem [ main-2 ] for @xmath0 and @xmath401 , so we may assume that @xmath402 .",
    "as before we set @xmath403 if @xmath281 is small then we are done , so let us assume that @xmath281 is large . in particular , by ( i ) and ( ii ) , all of the cosets of @xmath82 are transverse to @xmath281 .    applying lemma [ pigeon ] with all @xmath299 equal to @xmath281 , we conclude that @xmath404 for any @xmath405 , all cosets @xmath406 avoid @xmath281 , and hence @xmath407 by the triangle inequality , we conclude that @xmath408 by the cauchy - schwarz inequality , this implies that @xmath409 applying the balog - szemerdi theorem ( see e.g. ( * ? ? ?",
    "* section 2.5 ) , and transferring from standard analysis to nonstandard analysis in the usual fashion ) , we conclude that @xmath281 has a commensurate subset @xmath410 of bounded doubling .    the next step is to invoke freiman s theorem .",
    "define a _ nonstandard coset progression _ to be a nonstandard finite subset of @xmath1 of the form @xmath411 where @xmath77 is a nonstandard finite subgroup , and @xmath78 is a nonstandard finite set of the form @xmath412 for some standard non - negative integer @xmath413 ( called the _ rank _ of the progression ) , some base point @xmath414 and generators @xmath415 of @xmath1 , and some nonstandard natural numbers @xmath416 . applying freiman s theorem in an arbitrary abelian group ( see @xcite ) to the commensurate subset @xmath410 of @xmath281 of bounded doubling ( again transferring from standard analysis to the nonstandard analysis ) , we can find a nonstandard coset progression @xmath76 that is commensurate with @xmath281 . among all such progressions ,",
    "we select a nonstandard coset progression @xmath76 commensurate with @xmath281 of minimal rank @xmath413 ; the existence of such an @xmath76 comes from the ( external ) principle of infinite descent .",
    "if the coset progression is _ improper _ in the sense that there is a relation of the form @xmath417 for some nonstandard @xmath418 for @xmath419 , not all zero , then we can contain the nonstandard coset progression @xmath76 in a commensurate nonstandard coset progression of lower rank ; see e.g. ( * ? ? ?",
    "* corollary 1.19 ) .",
    "as this contradicts minimality , we conclude that @xmath76 is proper , in the sense that there are no non - trivial relations of the form . in a similar spirit ,",
    "none of the dimensions @xmath416 are bounded , since otherwise we may remove the generators @xmath415 corresponding to the bounded dimensions and use the pigeonhole principle to locate a lower rank nonstandard coset progression that is still commensurate with @xmath281 , contradicting minimality .",
    "next , suppose there is a relation of the form @xmath420 for some standard integer @xmath106 and some nonstandard @xmath418 for @xmath419 , with @xmath421 not all zero . as @xmath76 is proper ,",
    "@xmath106 is non - zero .",
    "then by ( * ? ? ?",
    "* corollary 1.19 ) again ( placing @xmath76 inside a symmetric improper coset progression with generators @xmath422 ) , we may contain @xmath76 in a commensurate coset progression of the same rank as @xmath76 , with the additional property that the base point @xmath45 is of the form @xmath423 for some nonstandard integers @xmath418 .",
    "thus we may assume either that there is no relation of the form , or else that the base point @xmath45 has the form .",
    "suppose first that the former case occurs , that is to say there is no relation of the form .",
    "in particular , @xmath76 has the wandering property . if any of the @xmath92 occupy @xmath424 , then by covering @xmath424 by a bounded number of translates of @xmath76 we see that some coset of @xmath92 occupies @xmath76 , and a simple averaging argument using the commensurability of @xmath76 and @xmath281 then shows that some coset of @xmath92 occupies @xmath281 , contradicting theorem [ main-2](ii ) .",
    "thus we see that @xmath385 does not occupy any of the @xmath424 ; in particular , since @xmath424 has comparable size to @xmath76 and hence to @xmath281 , we have @xmath425 applying lemma [ tf ] , we conclude that @xmath281 is avoided by @xmath76 , a contradiction .",
    "thus we may assume that there is a relation of the form , and hence by the preceding discussion we may assume that the base point @xmath45 is of the form .    for any standard real numbers @xmath426 and signs @xmath427 , consider the set @xmath428 one observes ( from the properness of @xmath76 ) that @xmath429 has the wandering property . by the preceding arguments ,",
    "we know that @xmath430 applying lemma [ tf ] again , we conclude that @xmath0 is avoided by all of the @xmath429 .",
    "if the rank @xmath413 is positive , we can use the unboundedness of the dimensions @xmath416 as well as the relation to cover @xmath76 by a bounded number of sets of the above form @xmath429 , plus an error of cardinality at most @xmath431 for any given standard @xmath240 . sending @xmath432 to zero ( and recalling that @xmath76 and @xmath281 are of comparable size )",
    ", we would conclude that @xmath0 is avoided by @xmath76 , a contradiction .",
    "we conclude that the rank @xmath413 must vanish , which by means that @xmath433 , and so @xmath76 is simply @xmath77 .    to summarise the progress so far ,",
    "we have located a nonstandard finite subgroup @xmath77 of @xmath1 that is commensurate with @xmath281 , so in particular @xmath0 occupies @xmath77 .",
    "since @xmath281 is large , @xmath77 is also .",
    "since no coset of the @xmath82 occupies @xmath281 , none of the @xmath92 occupy @xmath77 ; conversely , since @xmath281 avoids all the cosets of @xmath92 , @xmath77 also avoids @xmath92 .",
    "thus @xmath77 is transverse to each of the @xmath82 .",
    "as discussed in the introduction , the group @xmath77 may be the `` incorrect '' group to use to close the induction , and one may have to replace @xmath77 with a larger commensurate group . as a starting point , we have    [ fc ] the group @xmath77 is a subgroup of a commensurate group @xmath434 , with the property that @xmath435 avoids all the cosets of @xmath434 .    by the preceding discussion , @xmath77 is large and commensurate to @xmath281 , and @xmath385 avoids all the cosets of @xmath77 ; in particular @xmath436 for any @xmath437 . by lemma [ tc ]",
    "( with @xmath438 and arguing by contradiction with @xmath363 set equal to various cosets of @xmath77 ) , @xmath281 is occupied by only a standardly finite number of cosets of @xmath77 ; equivalently , since @xmath281 is of comparable size to @xmath77 , it occupies at most finitely many cosets of @xmath77 .",
    "let @xmath88 be one of these cosets .",
    "if all the dilates @xmath439 for @xmath106 a natural number are disjoint , then @xmath88 has the wandering property , and hence by lemma [ tf ] , @xmath281 avoids @xmath88 , a contradiction .",
    "thus all of the ( standardly finitely mahy ) cosets @xmath88 that @xmath281 occupies has bounded torsion in @xmath270 , in the sense that @xmath440 for some standard @xmath106 .",
    "if we let @xmath434 be the group generated by these cosets , then @xmath434 thus contains @xmath77 as a commensurate subgroup ( since @xmath441 is a finitely generated abelian group with all generators of finite order , and so @xmath441 is small ) .",
    "since @xmath435 avoids all the cosets of @xmath77 , it also avoids all the cosets of the commensurate group @xmath434 .",
    "the claim follows .",
    "note that as @xmath77 is large and transverse to @xmath82 , the commensurate group @xmath434 is also large and transverse to @xmath82 .",
    "in particular , the @xmath442 are all large and pairwise transverse . by the above proposition and inductive claim of theorem [ main-2](i )",
    ", the set @xmath443 avoids all the cosets of the @xmath442 , but @xmath0 occupies each of the @xmath442 .",
    "we are almost done , except that we do not have the required claim of theorem [ main-2](ii ) for @xmath401 ; that is to say , if @xmath435 is large , we have not established that @xmath435 avoids all the cosets of the @xmath442 . in the @xmath399 case , @xmath384 is commensurate with @xmath337 , and this claim follows from the already established property that @xmath444 avoids all the cosets of @xmath337 . however , for general @xmath141 , some additional argument ( in the spirit of the proof of theorem [ fc ] ) is needed , in which each of the @xmath442 is replaced with larger commensurate groups . to run this argument , it is convenient to introduce some additional notation relating to this family @xmath442 of large , pairwise transverse groups .",
    "for any @xmath445 , write @xmath446 for the subgroup @xmath447 ( this subgroup may be trivial ) , with the convention @xmath448 .",
    "if @xmath449 is a natural number , a _ _ subspace _ _ to equal @xmath450 for distinct @xmath451 , we should strictly speaking define a subspace to be a _ pair _",
    "@xmath452 rather than just @xmath453 , otherwise concepts such as the codimension of the subspace would be undefined . however , we shall abuse notation and use @xmath453 rather than @xmath454 to denote a subspace . ] of @xmath1 of _ codimension _",
    "@xmath449 to be a coset @xmath453 of one of the @xmath446 with @xmath455 ( note that no such subspaces exist if @xmath456 ) .",
    "if the codimension is one , we call the subspace a _ hyperplane _ , that is to say a hyperplane is a coset @xmath332 of one of the @xmath442 .",
    "a subspace @xmath453 is said to be _ aperiodic _ if @xmath457 is occupied by one of the @xmath442 for some natural number @xmath106 , and _ periodic _ otherwise .",
    "thus for instance @xmath458 ( the unique subspace of codimension @xmath459 ) is aperiodic for vacuous reasons , and any aperiodic subspace of codimension at least one has the wandering property .",
    "we say that a subspace @xmath453 is _ captured _ by another subspace @xmath460 if @xmath461 and @xmath462 .",
    "a _ core _ is a set of the form @xmath463 , where each @xmath464 is a group containing @xmath92 as a commensurate subgroup . if @xmath238 is a core , a _",
    "@xmath238-residual set _ is a set of the form @xmath465 where @xmath466 is a core containing @xmath238 .",
    "a subspace @xmath453 is said to be _",
    "@xmath238-involved _ it has codimension at least one , and there exists a large @xmath238-residual set @xmath281 that is occupied by @xmath453 .",
    "let @xmath337 be a nonstandard finite subgroup of @xmath1 , and let @xmath85 be an element of @xmath467 such that @xmath468 .",
    "let @xmath0 be the union of @xmath337 and a large subset @xmath281 of @xmath469 .",
    "then @xmath281 is @xmath337-residual and @xmath469 is an @xmath337-involved hyperplane .",
    "however , if one replaces the core @xmath337 with the larger core @xmath470 , then there are no @xmath470-involved subspaces .",
    "more generally , the basic strategy of the arguments below is to keep collecting involved subspaces into larger and larger cores until we find a core so large that no further involved subspaces appear .",
    "we then have the following more complicated variant of proposition [ fc ] .",
    "[ fc - complex ] let @xmath471 .",
    "* let @xmath472 , and let @xmath473 be an aperiodic subspace of codimension @xmath474 . then there exists a core @xmath238 and an ( externally ) finite family @xmath475 of subspaces of codimension @xmath476 , such that every @xmath238-involved subspace @xmath453 of codimension @xmath449 that is captured by @xmath460 , is also captured by one of the subspaces in @xmath475 . in particular ,",
    "if @xmath477 , then @xmath475 is empty as @xmath453 can not be captured by a codimension @xmath478 subspace .",
    "* there exists a core @xmath479 , with the property that there are no @xmath238-involved subspaces of codimension @xmath449 .",
    "we establish ( i ) and ( ii ) together by downwards induction on @xmath449 .",
    "the claims ( i ) and ( ii ) are vacuously true for @xmath480 as there are no subspaces of that codimension , so suppose inductively that @xmath481 , and that the claims ( i ) , ( ii ) are already established for @xmath478 .",
    "thus , by ( ii ) , we have a core @xmath463 such that there are no @xmath238-involved subspaces of codimension @xmath478 .",
    "next , we prove ( i ) .",
    "let @xmath445 have cardinality @xmath449 . by taking unions in @xmath482",
    ", it will suffice to locate a finite family @xmath483 of subspaces of codimension @xmath476 , such that every @xmath238-involved subspace @xmath453 captured by @xmath460 is also captured by one of the subspaces in @xmath483 .",
    "let @xmath453 be a @xmath238-involved subspace that is captured by @xmath460 , thus there is a large @xmath238-residual set @xmath484 that is occupied by @xmath453 , where @xmath485 is a core containing @xmath238 .",
    "we first claim that @xmath453 is periodic . to see this ,",
    "suppose for contradiction that @xmath453 is aperiodic , then it has the wandering property .",
    "furthermore , for any natural number @xmath106 , @xmath457 is avoided by @xmath92 and hence by @xmath486 for each @xmath487 . in particular @xmath488 applying lemma [ tf ]",
    ", we conclude that @xmath453 avoids @xmath489 , a contradiction .",
    "thus @xmath453 is periodic .",
    "suppose for contradiction that the required claim fails ; that is to say , we suppose    [ as ] given any ( externally ) finite family @xmath490 of subspaces of codimension @xmath476 , there exists an involved subspace @xmath453 captured by @xmath460 that is not captured by any subspace in @xmath490 .",
    "let @xmath491 be some finite sequence of subspaces captured by @xmath460 .",
    "thus to each @xmath492 , @xmath493 , there is a large residual set @xmath494 which is occupied by @xmath492 , where @xmath495 is a core containing @xmath238 .",
    "we claim that we can find an @xmath238-involved subspace @xmath496 captured by @xmath460 and distinct from each of the @xmath492 for @xmath493 , and such that @xmath497 for each @xmath493 and @xmath366 . to see this , observe first that for any @xmath498 , the set @xmath499 lies in @xmath500 , which avoids @xmath501 since @xmath460 is aperiodic .",
    "thus @xmath502 for such @xmath503 .",
    "next , suppose that @xmath504 with @xmath505 .",
    "then by the hypothesis ( ii ) , none of the cosets of @xmath506 occupy the @xmath238-residual set @xmath507 , and so by the triangle inequality none of the cosets of @xmath508 do either . by translation ,",
    "none of the cosets of @xmath508 occupy @xmath509 , and in particular @xmath510 next , suppose that @xmath511 , so that @xmath446 is a subgroup of @xmath512 .",
    "then as long as @xmath496 does not lie in the set @xmath513 , which is the union of finitely many subspaces of codimension @xmath476 , we have @xmath514 for this value of @xmath503 . finally , as @xmath492 is periodic , it must lie in some periodic hyperplane @xmath515 ; as @xmath460 is aperiodic , @xmath516 must lie outside of @xmath517 . as long as @xmath496 does not lie in @xmath518 , which is a subspace of codimension @xmath476",
    ", it must be distinct from @xmath492 .",
    "putting all this together , we have identified a finite collection of subspaces of codimension @xmath476 , such that for any @xmath238-involved @xmath496 outside of these subspaces , @xmath496 is distinct from the @xmath492 for @xmath519 , and that @xmath497 for each @xmath493 and @xmath366 .",
    "the existence of such a @xmath496 follows from assumption , giving the required claim .",
    "iterating the claim , we can find an infinite sequence @xmath520 of disjoint @xmath238-involved subspaces captured by @xmath460 , such that the associated @xmath238-residual sets @xmath521 occupied by @xmath522 obey the bound @xmath523 for all @xmath524 and @xmath366 . applying lemma [ tf ] to the wandering sequence @xmath525",
    ", there must exist some @xmath106 such that @xmath364 is avoided by @xmath522 , a contradiction .",
    "this establishes ( i ) .    since the sum @xmath526 of two groups @xmath527 that both contain @xmath92 as a commensurate subgroup is again a group containing @xmath92 as a commensurate subgroup , we see that for any two cores @xmath528 , there exists another core @xmath529 that contains both ( in particular , any @xmath529-involved subspace is also @xmath466-involved and @xmath530-involved ) .",
    "if we iterate ( i ) starting from @xmath531 and @xmath532 , using ( i ) to split up any aperiodic subspace encountered into a finite number of higher codimension pieces , and combining all cores encountered together by the preceding observation , we conclude that there exists a core @xmath238 and a finite family @xmath533 of _ periodic _ subspaces of codimensions ranging between @xmath63 and @xmath449 , such that every @xmath238-involved subspace @xmath453 of codimension @xmath449 is captured by one of the subspaces in @xmath533 .",
    "note that every periodic subspace is contained in a periodic hyperplane @xmath534 , which is in turn contained in a core ( by setting @xmath464 to be the group generated by @xmath92 and @xmath85 , and setting all other @xmath535 equal to @xmath355 ) .",
    "combining all the cores together as before , we may thus find a core @xmath466 that contains @xmath238 as well as every subspace in @xmath533 .",
    "then there can not be any @xmath466-involved subspace @xmath453 of codimension @xmath449 ( as such subspaces are both @xmath238-involved and lie outside of every subspace in @xmath533 ) , giving the claim ( ii ) as required .    applying the @xmath536 case of proposition [ fc - complex](ii )",
    ", we can locate a core @xmath463 with the property that there are no @xmath238-involved hyperplanes .",
    "thus , if we set @xmath537 and assume @xmath410 is large , then for any @xmath168 , all cosets of @xmath92 avoid @xmath410 , and hence all cosets of the commensurable @xmath464 avoid @xmath410 .",
    "also , since @xmath281 already avoided all cosets of @xmath92 , the smaller set @xmath410 also avoids all cosets of the commensurable group @xmath464 .",
    "finally , since @xmath442 were large and pairwise transverse , the groups @xmath538 are also .",
    "this ( finally ) gives the @xmath401 case of theorem [ main-2 ] , closing the induction and then giving theorem [ main - nonst ] and theorem [ main ] as corollaries .",
    "a significant portion of the above arguments seem to be extendible to the non - abelian setting , for instance by using the results in @xcite as a substitute for those in @xcite .",
    "in particular , it is reasonable to conjecture that if @xmath0 is a finite subset of a ( not necessarily abelian ) group @xmath539 , with the property that for any distinct @xmath540 , there exist distinct @xmath541 such that @xmath542 , then @xmath0 should be commensurate with a finite subgroup @xmath77 of @xmath1 in the sense that @xmath543 for some @xmath544 depending only on @xmath53 .",
    "however there appear to be some technical difficulties in transferring some portions of the argument ; for instance , the assertion that any translate of a ( symmetric ) coset progression can be contained in a slightly larger ( symmetric ) coset progression does not hold for the nonabelian analogue of a coset progression , namely a coset nilprogression , and this leads to some complications which we have not been able to resolve .",
    "we will not pursue these issues further here .",
    "we now prove theorem [ odd ] .",
    "fix @xmath53 and @xmath432 ; we may assume that @xmath545 as the claim follows from proposition [ easy ] otherwise .",
    "let @xmath546 be a sufficiently small quantity depending on @xmath165 to be chosen later .",
    "let @xmath164 be a quantity to be chosen later that is sufficiently large depending on @xmath547 . here",
    "we will revert back to standard analysis , avoiding all nonstandard notation .",
    "in particular , we now use the terminology @xmath548 , @xmath549 , or @xmath550 to denote a bound of the form @xmath551 , where @xmath552 is a quantity that depends on @xmath165 but not on @xmath553 .",
    "similarly for @xmath554 , @xmath555 , etc ..    let @xmath0 be a subset of a finite group @xmath1 with @xmath99 , and with @xmath6 not divisible by any prime less than @xmath164 . by applying theorem [ main ] , and discarding any group @xmath92 of order less than @xmath556",
    ", we can find subgroups @xmath82 of @xmath1 with @xmath166 such that @xmath557 and @xmath558 for all @xmath168 , and such that @xmath559 furthermore if @xmath170 we can take @xmath83 to be empty . if we have @xmath560 for all @xmath360 then we are done , so suppose there is an @xmath168 such that @xmath561 .",
    "we abbreviate @xmath92 as @xmath77 , thus latexmath:[\\[\\label{ah }    as the order of @xmath77 divides the order of @xmath1 , we see that @xmath195 is not divisible by any prime less than @xmath164 .",
    "meanwhile , the property @xmath99 implies that @xmath563 .",
    "thus , the only variables @xmath564 and @xmath565 for @xmath157 that obey the system of @xmath566 linear equations @xmath567 for all @xmath157 , are those for which two of the @xmath568 are equal ; thus the number of solutions to this system with the indicated constraints is at most @xmath569 , which is smaller than @xmath570 for any @xmath571 if @xmath164 is sufficiently large depending on @xmath572 .    one can write the linear system more compactly as @xmath573 where @xmath574 is a certain @xmath575 matrix with integer entries , and",
    "@xmath85 is a @xmath576-dimensional vector whose entries are @xmath577 and @xmath578 for @xmath157 .",
    "for instance , for @xmath103 we would have the system @xmath579 we apply the arithmetic removal lemma from ( * ? ? ? * theorem 1 ) ( assuming @xmath164 sufficiently large depending on @xmath580 ) to conclude that we can remove at most @xmath581 elements from @xmath582 to form a new set @xmath281 , and at most @xmath581 elements from @xmath583 to form a new set @xmath584 , with the property that the system @xmath585 has _ no _ solutions with @xmath586 and @xmath587 for @xmath157 .",
    "in particular , setting @xmath588 and @xmath589 , we conclude that there are no @xmath590 for which @xmath591 . as @xmath195 is odd",
    ", the map @xmath592 is a bijection on @xmath77 , and we conclude that for all but at most @xmath593 elements @xmath45 of @xmath582 , we have @xmath594 , and similarly with @xmath583 . thus @xmath595 where @xmath596 is the indicator function of @xmath582 .",
    "we now introduce the fourier transform @xmath597 of @xmath598 , where the pontryagin dual group @xmath599 is defined as the group of all homomorphisms @xmath600 from @xmath77 to @xmath601 , and the fourier transform @xmath602 of any function @xmath603 is given by the formula @xmath604 from and the triangle inequality we see that @xmath605 for any @xmath606 , and hence on iterating @xmath607 for any natural number @xmath503 .    if @xmath608 is a non - zero element of @xmath599 such that @xmath609 , then from we see that @xmath610 for any natural number @xmath611 .",
    "but since @xmath599 is isomorphic to @xmath77 ( see e.g. ( * ? ? ?",
    "* chapter 4 ) ) , the order of @xmath608 is not divisible by any prime less than @xmath164 .",
    "thus , if @xmath164 is sufficiently large depending on @xmath612 , then all the @xmath613 with @xmath614 are distinct . in particular from the plancherel identity we have",
    "@xmath615 this contradicts the previous bound if @xmath612 is small enough .",
    "we conclude that @xmath582 is fourier - uniform in the sense that @xmath616 since the fourier coefficients of @xmath617 at non - zero frequencies @xmath608 are the negative of those of @xmath598 , we also have @xmath618    next , we observe that the linear system @xmath585 is of `` complexity one '' in the sense of @xcite , which roughly speaking means that the solution count to this system is controlled by the size of fourier coefficients ; this observation was already implicit in the work of balog @xcite .",
    "more precisely , we have    [ one ] for functions @xmath619 and @xmath620 for @xmath157 , define the @xmath621-linear form @xmath622 suppose that the @xmath623 and @xmath624 all take values in @xmath625 $ ] .",
    "then for any @xmath626 we have @xmath627 and similarly for any @xmath157 we have @xmath628    we begin with .",
    "we shall just prove this claim for @xmath629 , as the general case follows from appropriate permutation of indices . by the triangle inequality",
    ", it suffices to show that @xmath630 for any choice of @xmath631 .",
    "but once one fixes such choices , one can rewrite the left - hand side as @xmath632 for some functions @xmath633 $ ] whose exact form is not important to us . by the fourier inversion formula , this can be written as @xmath634 but from the plancherel identity we have @xmath635 and the claim now follows from the cauchy - schwarz or hlder inequalities .",
    "now we show . by symmetry",
    "we may take @xmath636 .",
    "we make the change of variables @xmath637 for all @xmath638 .",
    "then by the triangle inequality , it suffices to show that @xmath639 for any choice of @xmath640 , with the understanding that @xmath641 for @xmath638 .",
    "but once one fixes the @xmath642 , the left - hand side can be written as @xmath643 for some functions @xmath644 $ ] whose exact form is not important to us . using the fourier inversion formula as before",
    ", we obtain the claim .",
    "let @xmath645 denote the density of @xmath0 in @xmath77 , thus from we have @xmath646 we split @xmath647 and @xmath648 , and observe from , that the fourier coefficients of @xmath649 and @xmath650 are bounded in magnitude by @xmath651 .",
    "applying proposition [ one ] many times , we conclude that @xmath652 on the other hand , since @xmath653 , the only contribution to the left - hand side comes from when two of the @xmath568 are equal , which gives the upper bound @xmath654 the estimates , , lead to the desired contradiction by choosing @xmath612 small and @xmath164 large .",
    "this proves theorem [ odd ] .",
    "j. dousee , on a generalisation of roth s theorem for arithmetic progressions and applications to sum - free subsets , _ mathematical proceedings of the cambridge philosophical society _ ,",
    "volume 155 , issue 02 , september 2013 , 331341 ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be a finite subset of an arbitrary additive group @xmath1 , and let @xmath2 denote the cardinality of the largest subset @xmath3 in @xmath0 that is sum - avoiding in @xmath0 ( that is to say , @xmath4 for all distinct @xmath5 ) . </S>",
    "<S> the question of controlling the size of @xmath0 in terms of @xmath2 in the case when @xmath1 was torsion - free was posed by erds and moser . </S>",
    "<S> when @xmath1 has torsion , @xmath0 can be arbitrarily large for fixed @xmath2 due to the presence of subgroups . </S>",
    "<S> nevertheless , we provide a qualitative answer to an analogue of the erds - moser problem in this setting , by establishing a structure theorem , which roughly speaking asserts that @xmath0 is either efficiently covered by @xmath2 finite subgroups of @xmath1 , or by fewer than @xmath2 finite subgroups of @xmath1 together with a residual set of bounded cardinality . in order to avoid a large number of nested inductive arguments , our proof uses the language of nonstandard analysis .    </S>",
    "<S> we also answer negatively a question of erds regarding large subsets @xmath0 of finite additive groups @xmath1 with @xmath2 bounded , but give a positive result when @xmath6 is not divisible by small primes . </S>"
  ]
}