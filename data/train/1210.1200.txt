{
  "article_text": [
    "finiteness is a concept that seems as intuitive as it is fundamental in all of mathematics . at the same time",
    "finiteness is notoriously difficult to capture axiomatically .",
    "first , due to compactness , finiteness is not first - order definable .",
    "second , in zf set theory , there exist several different _ approximations _ ( as zf is a first - order theory ) .",
    "tarski s treatise  @xcite is still a very readable introduction to different definitions of finiteness in set theory without the axioms of infinity and choice .",
    "these include the definitions by dedekind ( @xmath0 is finite if there is no bijection from @xmath0 to a proper subset of @xmath0 ) , kuratowski ( @xmath0 is finite if @xmath0 can be obtained from the empty set by adding elements inductively ) , and tarski ( @xmath0 is finite if each non - empty set of subsets of @xmath0 contains a minimal element wrt .  set inclusion ) .",
    "some approximations of finiteness are only equivalent if one assumes additional axioms . and all this already in the realm of classical mathematics",
    ".    it will therefore not come as a surprise that in intuitionistic mathematics the situation is even more complicated . in this paper",
    ", we will study several classically equivalent definitions of bit - valued functions ( binary infinite sequences ) that are almost always zero , that is , there are at most finitely many positions where the sequence is one . from the constructive point of view",
    ", one has at least the following main variants .",
    "1 .   @xmath1 .",
    "this definition expresses that all finitely many @xmath2 for which @xmath3 occur in @xmath4 before some position @xmath5 . by the decidability of @xmath6",
    ", they can all be looked up and counted .",
    "this is clearly the strongest definition giving all information . by the decidability of @xmath6 ,",
    "this definition is also intuitionistically equivalent to @xmath7 , in spite of the double negation prefixing the universal quantifier .",
    "2 .   @xmath8 .",
    "this definition is weaker than the first one .",
    "it only states that there is an upper bound to the number of ones in the sequence , but does not provide information on where to find them .",
    "3 .   @xmath9 .",
    "this definition is equivalent to @xmath10 .",
    "note that @xmath11 is stable since it is negative , and therefore does not imply @xmath12 .",
    "surprisingly , @xmath11 is also equivalent to @xmath13 .",
    "the reason is that @xmath14 and @xmath12 are classically equivalent , do not contain disjunction , and have only existential quantification as the main connective of the formula . therefore their respective double negation translations @xmath10 and @xmath13 are constructively equivalent , so also equally weak .",
    "4 .   @xmath15 .",
    "this definition expresses that the set of positions where the sequence is one is not infinite .",
    "it does not give a clue where to find the ones or how many ones there are .",
    "definition @xmath16 is the weakest of all : it negates a strong , positive statement allowing the construction of an infinite subsequence of ones in @xmath4 .",
    "the variants are listed in decreasing constructive strength .",
    "variants @xmath14 and @xmath12 are positive and therefore strictly stronger than the negative variants @xmath11 and @xmath16 . reversing the implications",
    "above requires some form of classical logic .",
    "for instance we know that @xmath17 is not constructively valid .",
    "we use the occasion to introduce an argument employed more rigorously later in this paper .",
    "let @xmath4 be an arbitrary bit - valued function .",
    "construct @xmath18 starting from @xmath19 by taking @xmath20 as long as @xmath21 .",
    "there is no constructive way to find out whether @xmath22 is always @xmath23 or not , but if @xmath24 for the first time , we take @xmath25 for @xmath26 and @xmath27 for @xmath28 .",
    "one easily verifies @xmath16 for @xmath18 .",
    "now , if @xmath12 would hold for @xmath18 we would be able to decide whether @xmath4 is constant @xmath23 or not . for",
    "if there are at most @xmath5 ones occurring in @xmath18 , the first one would occur not later than at @xmath5 , and this can constructively be tested .",
    "in other words , @xmath17 implies an instance of the excluded middle which is not constructively valid .",
    "the paper sets out an expedition to the concept of finiteness from the constructive point of view , with strong assumptions on the set whose finiteness we study .",
    "namely ,    1 .   the set is enclosed in another set with decidable equality .",
    "it is carved out by a decidable predicate ( whether a bit - valued function returns 1 ) .",
    "3 .   the enclosing set can be enumerated .    in one word ,",
    "therefore , we could summarize our setting as `` searchable '' . as we will see in the paper , even in a searchable setting , there are at least six different notions of `` finiteness '' .",
    "the remainder of the paper is structured as follows . in the next section",
    ", we set up a basis for our development in the paper .",
    "section  [ sec : spectrum ] introduces a spectrum of definitions for sequences being finitely one . in section",
    "[ sec : hierarchy ] , we study relative strength of these definitions from the constructive point of view . in section  [ sec :",
    "finiteness ] , we relate our analysis to that of finiteness of sets in bishop s set theory due to coquand and spiwack  @xcite .",
    "we conclude in section  [ sec : conclusion ] .    for methodological uniformity , we prefer to define all datatypes inductively ( rules denoted by a single line ) or coinductively ( rules denoted by a double line ) .",
    "we may look at binary infinite sequences in two ways . we may view them as bit - valued _ functions on natural numbers _ or , which will amount to the same , as _ streams _ of bits , i.e. , as elements of a coinductive type .",
    "correspondingly , we will use two different languages to speak about them : arithmetic ( as is traditional in logic ) for bit - valued functions and the language of inductive and coinductive predicates ( as is more customary in functional , in particular , dependently typed , programming ) for bitstreams . as a warming - up , in this section , we connect the two views , setting up a basis for our development along the way .",
    "for this paper to have some color , we take a bit to be one of the two colors , red and blue : @xmath29 in the function - view , an infinite sequence is therefore a function @xmath30 mapping natural numbers ( positions in the sequence ) to colors . our intended notion of equality of these functions is the _ extensional function equality _ defined by @xmath31 in the stream - view , an infinite sequence is a stream @xmath32 where the stream type is defined coinductively by the following rule : @xmath33 two streams @xmath34 and @xmath35 are equal for us , if they are _ bisimilar_. this notion of equality is defined coinductively by the rule @xmath36 the two types are isomorphic .",
    "indeed we can define two functions @xmath37 and @xmath38 mediating between the two types .",
    "the function @xmath39 is defined by ( structural ) recursion by @xmath40 while the function @xmath41 is defined by ( guarded - by - constructors ) corecursion by @xmath42 we have that @xmath43 .",
    "the @xmath44 direction is proved by coinduction , the @xmath45 direction by induction . from this fact it follows immediately that @xmath46 and @xmath47 , i.e. , that the function and stream types are isomorphic , as well as that @xmath48 and @xmath49 , i.e. , that the conversion functions appropriately preserve equality .",
    "( in general , we have to ensure that all functions and predicates we define on bit - valued functions and bitstreams respect our notions of equality for them , i.e. , extensional function equality and bisimilarity . )",
    "properties of binary infinite sequences can now be defined and analyzed in either one of the two equivalent views . for the stream - view , it is convenient to introduce some operations and predicates as primitives in our language for streams .",
    "we define @xmath50 so that @xmath51 denotes the color at the position @xmath5 in @xmath34 and @xmath52 denotes the suffix of @xmath34 at @xmath5 .",
    "we also define @xmath53 @xmath54 here , @xmath55 and @xmath56 are the `` sometime in the future '' ( `` finally '' ) and `` always in the future '' ( `` globally '' ) modalities of linear - time temporal logic .",
    "they are stream predicates parameterized over stream predicates . in the definition of @xmath55 and of @xmath56",
    "is constant . ]",
    "induction and coinduction give us simple proofs of basic facts such as the equivalence @xmath57 and the implication ( converse does not hold ) @xmath58 importantly , we can also prove that @xmath59 noticing that @xmath60 .",
    "both modalities are expressible in the function - view , but the definitions are ( perhaps ) less elegant , as they involve explicit arithmetical manipulation of positions : @xmath61 in particular , @xmath62 accordingly , we have @xmath63 and hence @xmath64 \\quad \\leftrightarrow \\quad \\left [ \\forall f.\\ , \\neg ( \\forall n.\\ , f\\ , n = b ) \\rightarrow \\exists n.\\ , f\\ , n = r ) \\right]\\ ] ] we now have arrived at two equivalent formulations of markov s principle ( mp ) .",
    "markov s principle is an important principle that is neither valid nor inconsistent constructively , but only classically valid .",
    "it is computationally meaningful , however , being realizable by search .    in the function - view ( the right - hand side ) , which is how it is traditionally presented , markov s principle is the statement that @xmath65 ( or , equivalently , as @xmath66 , the statement @xmath67 . )    the computational interpretation is the natural one : if it can not be that all positions in a given infinite sequence are blue , then we find a red position by exhaustively checking all positions in the natural order @xmath68 .",
    "computability theory : this is minimization , not primitive recursion . )    in the stream - view ( the left - hand side ) , markov s principle is @xmath69 stating that if a stream @xmath34 is not all blue , then it is eventually red .",
    "but , in a certain sense , it is more than just any equivalent statement to the function - view counterpart .",
    "it is a concise formulation of markov s principle based on the stream view of infinite sequences and canonical inductive and coinductive predicates on streams .",
    "we would therefore like to think that , for computer scientists , it should be natural to take namely this statement rather than the traditional arithmetical version as the definition of markov s principle .",
    "this applies to another important classical axiom of the lesser principle of omniscience which is meaningful as a special case of the law of excluded middle .",
    "the lesser principle of omniscience ( lpo ) is the assertion of the statement @xmath70 that , in the light of what we already learned , is equivalent to @xmath71 again , the latter statement is perhaps more basic for a computer scientist than the former : it states that any stream is either all blue or eventually red ( which is constructively impossible ) .",
    "as we have constructively @xmath72 , lpo implies markov .",
    "lpo is not computationally justified , and therefore strictly stronger than mp .",
    "with these preparations done , we can now proceed to possible mathematizations of the informal property of a given infinite sequence ( function @xmath4 or stream @xmath34 ) being `` finitely red '' .",
    "we consider six variations .",
    "they are all equivalent classically . in section  [ sec : hierarchy ] , we will study their relative strength from the constructive point of view .",
    "the simplest mathematization is : `` from some position on , the sequence is all blue '' .    in the function view",
    ", this is stated as @xmath73 while the stream - view statement is at least as simple , namely , the stream is `` finally '' `` globally '' blue : @xmath74 the two statements are equivalent .",
    "@xmath75      this is : `` the number of red positions in the sequence is bounded '' .    in the function view , this is stated as @xmath76 so that for a fixed @xmath5 , @xmath4 is red fewer than @xmath5 up to the @xmath2-th position for any @xmath2 .",
    "the formation of the stream view is similar .",
    "we first define a binary predicate @xmath77 , which states that @xmath34 is fewer than @xmath5 red , coinductively by @xmath78 note that there are no clauses for @xmath79 , reflecting the fact that this unary predicate is everywhere false .",
    "then the stream - view is simply : @xmath80 again , the two statements are equivalent @xmath81      the third definition amounts to the least fixed point of a weak until operator in linear - time temporal logic .",
    "it is also found in the thesis of c. raffalli  @xcite .",
    "we formulate it in the stream view .",
    "the weak until operator , @xmath82 , is parameterized over any predicate @xmath83 on streams and defined coinductively by @xmath84 so that @xmath85 holds if , whenever the first occurrence of red in @xmath34 is encountered , @xmath83 holds on the suffix after the occurrence .",
    "classically it is equivalent to that @xmath34 is either all blue or it is eventually red and @xmath83 holds on the suffix after the first occurrence of red ( which is guaranteed to exist as @xmath34 is eventually red ) .",
    "our definition of @xmath82 avoids upfront decisions of lpo , i.e. , whether a stream is all blue or eventually red .",
    "we then take the least fixed point of @xmath82 .",
    "define @xmath86 inductively in terms of @xmath82 by the ( park - style ) rule : @xmath87 as @xmath82 is monotone on @xmath83 , the above definition makes sense . for the purpose of proof ,",
    "in particular to avoid explicitly invoking monotonicity of the underlying predicate transformer @xmath88 , it is however convenient to use the mendler - style rule @xmath89 the park - style rule is derivable from the mendler - style rule . as @xmath82 is monotone on @xmath83 , we can also recover the natural inversion principle for @xmath86 .",
    "the statement @xmath90 does not give a clue as to where to find the red positions in @xmath34 or how many of them there are .",
    "nonetheless it refutes that the stream is infinitely often red ( to be formulated below ) .",
    "therefore @xmath90 expresses that @xmath34 is almost always blue , and in the remainder of the paper we phrase @xmath86 as almost always blue .",
    "the function view corresponding to @xmath86 could be given by the second - order encoding of induction and coinduction , which is inevitably more verbose and therefore omitted .",
    "instead , in the following subsections , we will take a closer look at @xmath82 and @xmath86 , giving alternative characterizations of streams that are almost always blue .",
    "the fourth definition is inspired by  @xcite .",
    "it states that the set of red positions in the sequence is _ streamless_. a set @xmath91 is streamless if every stream over @xmath91 has a duplicate . as equality on @xmath91",
    "is decidable for us , this is equivalent to saying that a set @xmath91 is streamless if any duplicate - free colist over @xmath91 is finite .",
    "for any set @xmath91 , we define duplicate - free colists over @xmath91 coinductively by @xmath92 we define finiteness of colists inductively by @xmath93 for any sequence , namely function @xmath4 or stream @xmath34 , let @xmath94 ( resp .",
    "@xmath95 ) denote the set of red positions in @xmath4 ( resp .",
    "@xmath34 ) .",
    "formally , @xmath96 ( resp .",
    "@xmath97 ) if @xmath98 ( resp .",
    "@xmath99 ) .",
    "then , the fourth definition of streams being finitely red is stated in the stream view as @xmath100 or , trivially equivalently in the function view , as @xmath101    finite subsets of a given set @xmath0 can be characterized using @xmath102 as for every injection @xmath103 and every finite subset @xmath104 there exists @xmath105 with @xmath106 .",
    "this naturally leads to a positive formulation of co - finiteness : @xmath104 is co - finite if for every injection @xmath103 there exists @xmath105 with @xmath107 . in @xcite ,",
    "wim veldman coined the qualifier _ almost full _ for a subset @xmath91 of @xmath102 such that for every strictly increasing @xmath108 one has @xmath107 for some @xmath105 .",
    "let @xmath109 denote the set of blue positions in @xmath34 .",
    "it turns out that the notions _ almost full _ and _ streamless _ are related in the following precise sense .",
    "[ lemma : almostfull_iff_streamless ] @xmath110 .",
    "( @xmath44 ) : let @xmath34 be such that @xmath109 is almost full and let @xmath111 .",
    "we have to prove @xmath112 .",
    "define a function @xmath113 by corecursion by @xmath114 @xmath4 is well - defined as the last clause is successively applicable only finitely many times .",
    "moreover , @xmath115 is finite precisely when @xmath116 is .",
    "clearly , @xmath117 is increasing , and can be turned into an increasing function @xmath118 by defining @xmath119 recursively by @xmath120 one proves by induction on @xmath5 that @xmath121 . since @xmath109 is almost full there exist @xmath122 such that @xmath123 , so @xmath124 , so @xmath112 as required .",
    "( @xmath45 ) : let @xmath34 be such that @xmath125 .",
    "we have to prove that @xmath109 is almost full .",
    "let @xmath108 be increasing .",
    "we define corecursively @xmath126 by : @xmath127 one proves by induction on @xmath128 that @xmath129 .",
    "indeed we have @xmath130 , so @xmath131 .",
    "it follows that @xmath109 is almost full .      in this paper",
    ", we are mainly interested in positive variations .",
    "however , two negative variations appear natural to consider for us .",
    "one of them is the double negation of the first definition of eventually all blue .",
    "our fifth definition is stated in the function view as , @xmath132 or in the stream view as @xmath133 which is equivalent to @xmath134 the last formulation , @xmath135 , turns out handy in proofs and we will use either of them interchangeably .      the last definition of streams being finitely red is given by streams _ not _ being infinitely often red .",
    "so we first look at definitions of streams being infinitely often red , which admit less variety of definitions .",
    "a well - known definition is given by streams that are `` globally '' `` finally '' red , or @xmath136 this definition is dual to that of eventually - all - blue streams , i.e. , @xmath137 .",
    "the modalities @xmath56 and @xmath55 are flipped , so are the colors @xmath138 and @xmath139 .",
    "the function view of this is stated as @xmath140    the function and stream views are equivalent @xmath141    similarly , we obtain a definition of streams being infinitely often red , by dualizing the definitions of @xmath82 and @xmath86 , yielding @xmath142 the ( strong ) until operator @xmath143 is dual to the weak until operator @xmath82 : the statement @xmath144 says that the suffix of @xmath34 after the first occurrence of red must satisfy @xmath83 and the occurrence must exist .",
    "then @xmath145 takes the _ greatest _ fixed point of @xmath143 , whereas @xmath86 is the least fixed point of @xmath82 .",
    "interestingly , @xmath145 is equivalent to @xmath146 @xmath147 as we will see in section  [ sec : hierarchy ] , @xmath86 and @xmath148 are _ not _ equivalent constructively . ( collapsing the two amounts to lpo . )    we conclude this section with the weakest definition in our spectrum of streams being finitely red .",
    "namely , @xmath149 or in its equivalent function view @xmath150      in this section , we characterize streams that are almost always blue in terms of accessibility of ( decidable ) relations on natural numbers induced by streams .",
    "we define accessibility of a binary relation @xmath151 on a set @xmath152 by @xmath153    for any stream @xmath34 , we define a decidable relation @xmath154 on natural numbers by taking @xmath155 to mean that @xmath2 is the position following the first red position from @xmath5 onward ( including @xmath5 ) .",
    "formally , @xmath156 an equivalent inductive definition is : @xmath157 the intuition is that @xmath155 should hold if and only if , whenever @xmath158 is true , then this is justified by @xmath159 .",
    "( this means that @xmath154 is deterministic , but not functional . )",
    "this is what the next lemma proves .",
    "@xmath160    ( @xmath44 ) : we prove @xmath161 by induction on the proof of @xmath155 .    the case of @xmath162 , @xmath163 and @xmath164 : from the assumption @xmath165 , i.e. , @xmath85 , we directly learn that @xmath166 , i.e. , @xmath167 .",
    "the case of @xmath168 , @xmath163 and @xmath169 and @xmath170 : the assumption @xmath165 , i.e. , @xmath85 , assures us that @xmath171 , and by the induction hypothesis we have @xmath172 .",
    "hence @xmath173 , i.e. , @xmath174 .",
    "the case of @xmath175 , @xmath176 and @xmath169 and @xmath177 : the assumption @xmath158 amounts to @xmath178 . by the induction hypothesis , @xmath179",
    ", we get that @xmath173 , i.e. , @xmath174 .",
    "( @xmath45 ) : we prove @xmath180 by induction on @xmath5 . in the base case @xmath181 of the induction ,",
    "we perform coinduction .    the case of @xmath181 and @xmath162 : we know",
    "that @xmath182 .",
    "hence the assumption @xmath183 gives us that @xmath167 , i.e. , @xmath184 , from where it follows that @xmath85 , i.e. , @xmath165 .",
    "the case of @xmath181 and @xmath168 : we know that , if @xmath185 for any @xmath2 , then @xmath186 for some @xmath187 and @xmath188 . hence the assumption @xmath183 gives us that @xmath189 . by the coinduction hypothesis",
    ", it follows that @xmath190 , i.e. , @xmath171 , from where we learn @xmath85 , i.e. , @xmath165 .",
    "the case of @xmath191 and @xmath175 : we observe that @xmath155 if @xmath177 and @xmath192 .",
    "therefore the assumption @xmath193 gives us that @xmath194 . by the induction hypothesis",
    ", we get that @xmath178 which is the same as @xmath158 .",
    "it is noteworthy that this lemma , instantiated at @xmath19 , gives us a possible arithmetical definition of the weak until operator @xmath82 that avoids impredicativity ( quantification over predicates ) .",
    "indeed , it suggests that we could have defined : @xmath195 to compare , the impredicative definition is : @xmath196    further , we have that , for any stream @xmath34 , @xmath34 is almost always blue , @xmath90 , if and only if 0 is accessible with respect to @xmath154 .",
    "the claim follows from the following lemma .",
    "[ lemma : pre_acc ] @xmath197 .",
    "( @xmath44 ) : we prove @xmath198 by induction on the proof of @xmath199 . by induction on the proof of @xmath200 . in further proofs",
    "we will use these generalizations of coinduction and induction without comments . ] from this proof , we have that , for some stream predicate @xmath83 , @xmath201 and @xmath202 . by the induction hypothesis ,",
    "the former gives us @xmath203 while , by the previous lemma , the latter gives @xmath204 .",
    "putting the two together , we get @xmath205 , hence @xmath206 .",
    "( @xmath45 ) : by induction on the proof of @xmath206 .",
    "we have @xmath207 and by the induction hypothesis , @xmath208 .",
    "the previous lemma therefore gives us @xmath209 , hence @xmath199 , as required .",
    "[ coro : pre_acc ] @xmath210 .",
    "we can in fact rephrase the variant from section  [ sec : streamless ] ( streams for which the sets of red positions are streamless ) and the variant from section  [ sec : notinfinitelyoften ] ( streams that are not infinitely often red ) in terms of @xmath154 , as we will do now .",
    "streams whose red positions form streamless sets correspond to streams @xmath34 for which @xmath154 is strongly normalizing at 0 .",
    "for any set @xmath152 and any relation @xmath151 on @xmath152 , we define ( descending ) chains in @xmath151 coinductively by @xmath211 so that @xmath212 means that @xmath213 .",
    "note that a chain in @xmath151 may be infinite .",
    "we define finiteness of chains inductively by @xmath93 we use the same notation for finiteness of colists and chains .",
    "a binary relation @xmath151 on a set @xmath152 is strongly normalizing at @xmath214 , @xmath215 , if any @xmath151-chain starting at @xmath216 is finite , or @xmath217 .    for any stream @xmath34 , @xmath154 is strongly normalizing at 0 if and only if @xmath95 is streamless .",
    "[ lemma : streamless_sn ] @xmath218 .",
    "( @xmath44 ) : we first notice that @xmath219 if and only if @xmath220 , where @xmath221 is the transitive closure of @xmath154 .",
    "define a function @xmath222 by recursion by @xmath223 the computation of @xmath115 is terminating as @xmath116 is duplicate - free .",
    "( so , @xmath115 is welldefined . )",
    "moreover , define a function @xmath224 by corecursion by @xmath225 we have that , for any duplicate - free colist @xmath116 over @xmath95 , @xmath116 is finite if and only if @xmath226 is finite , and moreover @xmath226 is a chain in @xmath221 starting at 0 .",
    "now , for any given duplicate - free colist @xmath111 , by our assumption , @xmath226 is finite , which implies @xmath116 is finite , as required .",
    "( @xmath45 ) : define a function @xmath227 by corecursion by @xmath228 so that @xmath229 shifts the elements in @xmath116 by subtracting one .    for any given @xmath230 , @xmath229 is a duplicate - free colist over @xmath95 , therefore @xmath229 is finite by our assumption . by construction of @xmath4 , @xmath116 is finite , which completes the proof .",
    "streams that are infinitely often red correspond to streams @xmath34 for which @xmath154 is antifounded .",
    "we define antifoundedness of binary relation @xmath151 on a set @xmath152 coinductively by @xmath231 so that @xmath232 means that there is an infinite descending chain in @xmath151 starting from @xmath5 .",
    "firstly we rephrase the strong until operator , @xmath143 , which , unlike the weak until operator @xmath82 , requires @xmath83 to hold at some point .",
    "@xmath233 .",
    "( @xmath44 ) : by induction on @xmath5 and in the base case @xmath181 also further induction on the proof of @xmath144 .",
    "the case of @xmath163 and @xmath162 : we have that @xmath234 and @xmath184 and can choose @xmath164 .",
    "the case of @xmath163 and @xmath168 : we have that @xmath235 .",
    "the inner induction hypothesis gives us that there is an @xmath187 such that @xmath236 .",
    "but then we also have that @xmath237 , so the desired result is witnessed by @xmath238 .",
    "the case of @xmath176 and @xmath175 : the assumption @xmath239 amounts to @xmath240 . by the outer induction hypothesis",
    ", there is an @xmath187 such that @xmath241 .",
    "but then also @xmath242 , so we can choose @xmath169 .",
    "( @xmath45 ) : we prove @xmath243 by induction on the proof of @xmath244 .",
    "the case of @xmath162 , @xmath181 and @xmath245 : the assumption @xmath246 , i.e. , @xmath184 , implies @xmath144 , i.e. , @xmath247 .",
    "the case of @xmath168 , @xmath181 , @xmath192 and @xmath170 : the assumption @xmath174 amounts to @xmath248 . by the induction hypothesis",
    ", we have that @xmath249 , from where @xmath247 follows in turn .    the case of @xmath175 , @xmath176 , @xmath192 and @xmath177 : the assumption @xmath174 amounts to @xmath248 . by the induction hypothesis",
    ", it holds that @xmath240 , which is the same as @xmath239 .",
    "then we have that , for any stream @xmath34 , @xmath34 is infinitely often red , @xmath250 , if and only if 0 is antifounded with respect to @xmath154 .",
    "the claim follows from the following lemma .",
    "@xmath251 .",
    "( @xmath44 ) : by coinduction . from the assumption @xmath252 , we have that , for some stream predicate @xmath83 , @xmath253 and @xmath239 .",
    "the former and the coinduction hypothesis together give us that , @xmath254 .",
    "from the latter and the previous lemma , it follows that there exists an @xmath2 such that @xmath155 and @xmath174 .",
    "hence @xmath255 and we can also conclude that @xmath256 .",
    "( @xmath45 ) : by coinduction",
    ". from the assumption @xmath256 , we have that there exists some @xmath2 such that @xmath155 and @xmath255 . by the coinduction hypothesis",
    ", we have @xmath257 . by the previous lemma it follows",
    "now that @xmath258 whereby we also learn that @xmath252 .",
    "[ coro : rep_af ] @xmath259 .",
    "it turns out that the weak until operator @xmath82 reaches the fixed point by @xmath260-iteration only classically .",
    "in fact , we have a stronger result : closure at @xmath260 is equivalent to lpo .",
    "define : @xmath261 where @xmath262 and @xmath263 , so that @xmath264 is @xmath82 iterated @xmath260 times .",
    "[ lemma : omega_closure ] @xmath265 .",
    "( @xmath44 ) : define @xmath266 and @xmath267 by corecursion @xmath268 g~(n+1 ) = r~(g~n ) \\qquad g~0 = b^{\\infty } \\end{array}\\ ] ] where @xmath269 denotes a stream of blue , defined by corecursion by @xmath270 .",
    "the computation of @xmath271 looks for the first occurrence of red in @xmath34 , while keeping track of the number of blue it has seen so far in the second argument . on encountering the first red ( if exists )",
    ", it invokes @xmath272 , passing @xmath5 as argument .",
    "the stream that @xmath273 produces is red up to the @xmath5-th position , followed by an all blue stream .",
    "the trick is to record the position of the first occurrence of red in @xmath34 in terms of the number of red in @xmath271 .",
    "if @xmath34 does not contain red , then @xmath271 does not either . this way , if we know the bound on the number of red in @xmath271 , then we know the bound on the depth of the first occurrence of red in @xmath34 .",
    "we prove @xmath274 by induction on @xmath5 , then @xmath275 by coinduction .",
    "we deduce @xmath276 by our assumption , therefore @xmath277 by definition . for any @xmath34 , given @xmath278 for some @xmath5",
    ", however , it suffices to examine the initial @xmath279-segment of @xmath34 to know whether @xmath34 contains red or not , enabling us to decide whether @xmath280 or @xmath281 holds .",
    "( @xmath45 ) : for any given @xmath34 , suppose @xmath282 . by our assumption",
    ", we have either @xmath281 or @xmath280 . in the case of @xmath281",
    ", we immediately have @xmath283 , therefore @xmath284 . in the case of @xmath280 ,",
    "let @xmath5 be the position of the first occurrence of red in @xmath34 , which is guaranteed to exist by @xmath280 . from @xmath282 , we deduce @xmath285 , i.e. , @xmath286 for some @xmath2 , which yields @xmath287 , therefore @xmath288 as required .    in fact , @xmath289 is equivalent to @xmath290 .",
    "namely we have that , @xmath291 . it is an open question whether there is a constructive closure ordinal .",
    "in this section , we analyze our spectrum of streams being finitely red .",
    "we have presented six variants :    a.   eventually all blue b.   boundedly red c.   almost always blue d.   streamless red positions e.   double negation of eventually all blue f.   negation of infinitely often red    we have a clear view on relative strength between positive variations . for negative ones ,",
    "open questions remain .",
    "the overall picture is given in section  [ sec : conclusion ] .",
    "we start from downward implications .",
    "the six variations above are listed in decreasing order of constructive strength , except that we do not know whether ( d ) implies ( e ) : we only know that ( c ) implies ( d ) and ( e ) , both of which imply ( f ) ( lemmata  [ lemma : muw_implies_sn ] , [ lemma : muw_implies_notnotfg ] , [ lemma : sn_implies_notnuu ] and  [ lemma : notnotfg_implies_notnuu ] ) and that ( e ) @xmath44 ( d ) amounts to markov s principle ( lemma  [ lemma : notnotfg_implies_sn ] ) .    if a stream is eventually all blue , then it is boundedly red .",
    "[ lemma : fg_implies_atmost ] @xmath292 .    by induction on the proof of @xmath137 .    if a stream is boundedly red , then it is almost always blue .",
    "[ lemma : atmost_implies_pre ] @xmath293 .    by induction on @xmath5 .",
    "the case of @xmath181 is immediate .",
    "the case of @xmath294 : we prove that , @xmath295 by coinduction and case analysis on the head color of @xmath34 .",
    "the case of @xmath296 follows from the coinduction hypothesis .",
    "the case of @xmath297 follows from the main induction hypothesis .",
    "if a stream is almost always blue , then the set of its red positions is streamless .",
    "[ lemma : muw_implies_sn ] @xmath298 .",
    "the claim follows from corollary  [ coro : pre_acc ] and lemma  [ lemma : streamless_sn ] , since accessibility implies strong normalization .",
    "if a stream @xmath34 is almost always blue , then it is not the case that @xmath34 is not eventually all blue .",
    "[ lemma : muw_implies_notnotfg ] @xmath299 .",
    "we prove a slightly stronger statement , @xmath300 , from which the claim follows . for a given @xmath34 , we assume @xmath301",
    ". we shall prove @xmath302 by induction on the proof of @xmath199 .",
    "we are given as induction hypothesis that , @xmath303 .",
    "we have to prove @xmath304 , given @xmath158 . from our assumption , however , it suffices to prove @xmath305 .",
    "we do so by proving @xmath306 by coinduction using the main induction hypothesis .    if the set of red positions of a stream @xmath34 is streamless , then @xmath34 is not infinitely often red .",
    "[ lemma : sn_implies_notnuu ] @xmath307 .",
    "the claim follows from lemma  [ lemma : streamless_sn ] and corollary  [ coro : rep_af ] , since strong normalization contradicts antifoundedness .    if it is not the case that a stream @xmath34 is not eventually all blue , then @xmath34 is not infinitely often red .",
    "[ lemma : notnotfg_implies_notnuu ] @xmath308 .",
    "noticing @xmath309 , the claim follows by contraposition from a tautology @xmath310 .",
    "we now proceed to study strength of upward implications , which are technically more interesting than downward implications . we know",
    "that differences between the first three positive variants amount to lpo ( lemma  [ lemma : atmost_implie_fgblue ] and  [ lemma : pre_implies_atmost ] )",
    ". moreover , ( e ) @xmath311 ( d ) amounts to markov s principle ( lemma  [ lemma : notnotfg_implies_sn ] ) and ( f ) @xmath311 ( e ) to an instance of double negation shift for a @xmath312-formula ( lemma  [ lemma : notgfred_implies_notnotfgblue ] ) . as immediate corollaries from section  [ sec : acc ]",
    ", we have that ( d ) @xmath311 ( c ) is equivalent to that sn of @xmath154 at 0 implies accessibility of 0 with respect to @xmath154 ( corollary  [ coro : sn_implies_muw ] ) and that ( f ) @xmath311 ( d ) is equivalent to that non - antifoundedness of 0 with respect to @xmath313 implies sn of @xmath154 at 0 ( corollary  [ coro : nuu_implies_sn ] ) .",
    "[ lemma : atmost_implie_fgblue ] @xmath314 .",
    "( @xmath44 ) : define @xmath315 by corecursion @xmath316 so that @xmath317 contains ( exactly ) one red if and only if @xmath34 contains at least one red .",
    "we have that , @xmath318 , proved by coinduction and case analysis on the head color of @xmath319 . by our assumption , we have that , @xmath320 .",
    "the proof of @xmath321 tells us whether @xmath317 contains red or not , deciding whether @xmath34 is eventually red , @xmath280 or all blue , @xmath281 , as required .",
    "( @xmath45 ) : we prove that , @xmath322 by induction on @xmath5 , assuming @xmath323 .",
    "the case of @xmath181 is immediate .",
    "the case of @xmath324 : suppose @xmath325 . by our assumption",
    ", we have either @xmath326 or @xmath281 .",
    "the latter case immediately yields @xmath137 . for the former case",
    ", we prove @xmath327 by induction on @xmath280 and case analysis on the head color of @xmath34 , using the main induction hypothesis .",
    "[ lemma : pre_implies_atmost ] @xmath328 .",
    "@xmath329 : we prove @xmath330 by induction on the proof of @xmath90 , assuming @xmath331 .",
    "we have that , for some stream predicate @xmath83 , @xmath332 and @xmath333 and @xmath85 .",
    "we have to prove that there exists some @xmath5 such that @xmath77 . by our assumption",
    ", we have either @xmath281 or @xmath280 .",
    "the former case follows immediate by coinduction by taking @xmath334 .",
    "the latter case is closed by the auxiliary lemma : @xmath335 proved by induction on the proof of @xmath336 and case analysis on the head color of @xmath35 .",
    "the case of @xmath337 follows from the induction hypothesis .",
    "the case of @xmath338 follows from the main induction hypothesis , @xmath333 .",
    "@xmath339 : we prove that , @xmath340 , assuming @xmath330 , where @xmath264 was defined in section  [ sec : fixedpoint ]",
    ". then the case follows from lemma  [ lemma : omega_closure ] .",
    "suppose @xmath341 .",
    "by lemma  [ lemma : atmost_implies_pre ] and the monotonicity of @xmath82 on @xmath83 , we have @xmath342 , which yields @xmath90 by definition . from our assumption and the equivalence between @xmath289 and @xmath290 , we conclude @xmath343 , as required .",
    "the following claim is a corollary from corollary  [ coro : pre_acc ] and lemma  [ lemma : streamless_sn ] .",
    "[ coro : sn_implies_muw ] @xmath344    [ lemma : sn_implies_pre ] @xmath345    assume @xmath331 ( lpo ) and let @xmath34 be given .",
    "based on lpo we can build an increasing colist of all red positions in @xmath34 . recall that @xmath52 denotes the suffix of @xmath34 at @xmath5 .",
    "define a function @xmath346 corecursively by ( @xmath2 will be justified below ) : @xmath347 the computation of @xmath4 essentially depends on lpo .",
    "observe that , in the second clause , the first red position in @xmath34 exists by @xmath280 ( cf .",
    "@xmath348 in section  [ sec : stream_function ] ) . clearly , @xmath349 is the colist of all red positions in @xmath34 . if @xmath95 is streamless , then @xmath349 is finite : @xmath350 . by induction on the proof of",
    "@xmath351 one proves that @xmath352 implies @xmath353 . in the base case @xmath354",
    ", we have @xmath281 , and therefore @xmath355 by coinduction . in the step case of @xmath356 being a cons - colist ,",
    "we have @xmath280 . we prove @xmath355 by coinduction again , this time using the induction hypothesis that @xmath357 implies @xmath358 . in both cases",
    ", we get that @xmath353 by definition .",
    "[ lemma : notnotfg_implies_sn ] @xmath359    ( @xmath44 ) : define a function @xmath360 by corecursion by @xmath361 so that @xmath319 is red until the first occurrence of red in @xmath34 is encountered , from where @xmath319 becomes all blue .    for any given @xmath34 , we assume @xmath362 . we have to prove @xmath280",
    "firstly , we prove @xmath363 .",
    "it suffices to prove @xmath364 .",
    "we do so by coinduction and case analysis on the head color of @xmath34 .",
    "the case of @xmath297 : this is impossible as we then have @xmath365 , contradicting the assumption @xmath366 .",
    "the case of @xmath296 : from the assumption @xmath366 , it follows that , @xmath367 . by the coinduction hypothesis",
    ", we obtain @xmath368 , hence @xmath281 .    applying our assumption , @xmath369 , to @xmath363 yields that @xmath370 is strongly normalizing at 0 by lemma  [ lemma : streamless_sn ] .",
    "below we prove @xmath280 , assuming @xmath371 , which completes the proof .",
    "define a function @xmath372 by recursion by @xmath373 as @xmath374 is a chain in @xmath375 starting at 0 ,",
    "i.e. , @xmath376 , by our assumption @xmath374 is finite . by construction of @xmath272",
    ", we have @xmath377 , where @xmath5 is the length of @xmath374 .",
    "( as @xmath374 is finite , its length is welldefined . ) by construction of @xmath4 , we now have @xmath99 , which yields @xmath280 , as required .",
    "( @xmath45 ) : for any given @xmath34 , we assume @xmath135 . we have to prove , for any given @xmath378 , @xmath116 is finite .",
    "define a function @xmath379 by corecursion by @xmath380 by definition of @xmath4 , we have that , @xmath381 , proved by coinduction .",
    "hence from the assumption @xmath135 , we are entitled to conclude @xmath382 . by markov",
    "s principle it follows that , @xmath383 .",
    "however this means that @xmath112 , which completes the proof .",
    "[ lemma : notgfred_implies_notnotfgblue ] @xmath384 .    for any given @xmath34",
    ", we have @xmath385 now the claim follows by taking contrapositions of the respective assumptions , noticing @xmath386 and the above equivalence .",
    "the corollary below follows from lemmata  [ lemma : sn_implies_notnuu ] , [ lemma : notnotfg_implies_sn ] and  [ lemma : notgfred_implies_notnotfgblue ] .",
    "[ lemma : notnuu_implies_sn ] @xmath387    the following claim is a corollary from corollary  [ coro : rep_af ] and lemma  [ lemma : streamless_sn ] .",
    "[ coro : nuu_implies_sn ] @xmath388 .",
    "in @xcite , coquand and spiwack introduce four notions of finiteness of sets in bishop s set theory @xcite . for understanding some of their arguments , for example , on page 222 , the 9-th line from below , we had to assume that equality is decidable . under this assumption their results may be rendered as follows :    a.   set @xmath91 is _ enumerated _ if it is given by a list .",
    "b.   set @xmath91 is of _ bounded size _ if there exists a bound such that any list over @xmath91 contains duplicates whenever its length exceeds the bound . c.   set @xmath91 is _ noetherian _ if the root of the tree of duplicate - free lists over @xmath91 is _ accessible _ ( cf .",
    "section  [ sec : acc ] ) .",
    "d.   set @xmath91 is _ streamless _ if every stream over @xmath91 has a duplicate",
    ".    these four notions are classically equivalent but of decreasing constructive strength .",
    "their hierarchy of finiteness matches pleasantly with our hierarchy of positive variations of streams being finitely red , if we look at sets of red positions in our streams .",
    "an important difference is that coquand and spiwack consider sets that may not be decidable , whereas we work with decidable sets of natural numbers . as a result ,",
    "our hierarchy becomes tighter than theirs , allowing us to capture differences in strength of our hierarchy in terms of weak instances of the law of excluded middle .    in this section ,",
    "we rephrase our hierarchy in terms of coquand and spiwack s .",
    "their streamless sets directly correspond to our streams @xmath34 for which the set of red positions , @xmath95 , is streamless .",
    "we will therefore only consider ( i )  ( iii ) .",
    "recall that in this paper we work with decidable sets of natural numbers .",
    "[ [ enumerated - sets ] ] * enumerated sets * + + + + + + + + + + + + + + + + +    a set @xmath91 is enumerated , @xmath389 , if all its elements can be listed , or @xmath390 note that a proof of @xmath389 is essentially an exhaustive duplicate - free list of elements of @xmath91 .",
    "it is easy to see that a stream @xmath34 is eventually all blue if and only if the set of red positions in @xmath34 is enumerated .",
    "@xmath391 .",
    "( @xmath44 ) : given @xmath137 , we can construct a list of the red positions in @xmath34 , from which @xmath392 follows .",
    "( @xmath45 ) : given @xmath392 , we know the position of the last occurrence of red in @xmath34 , which yields @xmath137 .    [ [ size - bounded - sets ] ] * size - bounded sets * + + + + + + + + + + + + + + + + + + +    a set @xmath91 is of bounded size if there exists a natural number @xmath5 such that any duplicate - free list over @xmath91 is of length less than @xmath5 .",
    "specifically , we say @xmath91 is size - bounded by @xmath5 if any duplicate - free list over @xmath91 is of length of less than @xmath5 . formally , @xmath393",
    "@xmath394 .    for any decidable set @xmath91 of natural numbers , we define a stream @xmath395 by @xmath396 so that @xmath395 is red exactly at the positions in @xmath91 .",
    "( @xmath44 ) : by induction on @xmath5",
    ". the case of @xmath181 is immediate .",
    "the case of @xmath324 : we are given as induction hypothesis that , @xmath397 . we have to prove @xmath398 , given @xmath325 .",
    "suppose @xmath399 .",
    "it suffices to prove @xmath400 . from @xmath325",
    ", we deduce @xmath401 . by induction hypothesis , we obtain @xmath400 , as required .",
    "( @xmath45 ) : we prove @xmath402 by induction on @xmath5 , from which the case follows . the case of @xmath181",
    "is immediate .",
    "the case of @xmath176 : we are given as induction hypothesis that , @xmath403 . we have to prove @xmath404 .",
    "we do so by coinduction and case analysis on the head color of @xmath395 .",
    "the case of @xmath405 : we have @xmath406 .",
    "we close the case by coinduction hypothesis .",
    "the case of @xmath407 : we have @xmath408 .",
    "we close the case by the main induction hypothesis .",
    "[ [ noetherian - sets ] ] * noetherian sets * + + + + + + + + + + + + + + + + +    a set @xmath91 is noetherian , @xmath409 , if , for all @xmath410 , @xmath411 is noetherian .",
    "formally , @xmath412    then , a stream @xmath34 is almost always blue , @xmath90 , if and only if the set of red positions in @xmath34 is noetherian . to prove this , it is convenient to reformulate noetherianness for sets of natural numbers by removing the elements up to @xmath5 ( including @xmath5 ) : @xmath413    the two definitions are equivalent .",
    "[ lemma : noetherian_another ] @xmath414 .",
    "( @xmath44 ) : we prove that , @xmath415 by induction on the proof of @xmath409 .",
    "we are given as induction hypothesis that , @xmath416 . we have to prove that , @xmath417 , which follows from the induction hypothesis and by case analysis on whether there is @xmath418 such that @xmath419 .",
    "( recall that @xmath91 is assumed decidable . )",
    "( @xmath45 ) : we prove by induction on the proof of @xmath420 .",
    "we are given as induction hypothesis that , @xmath421 .",
    "we have to prove @xmath422 , which follows from an auxiliary lemma , @xmath423 , proved by induction .",
    "given a set @xmath91 of natural numbers , we define a relation @xmath424 on natural numbers such that @xmath425",
    "if @xmath426 with @xmath116 being the least natural number such that @xmath427 and @xmath428 . formally , @xmath429 note that , for any stream @xmath34 , @xmath154 is equivalent to @xmath430 by definition .",
    "so our task is to prove equivalence of @xmath91 being noetherian and accessibility of @xmath23 with respect to @xmath424 .    for a relation @xmath151 over a set @xmath91",
    ", @xmath431 denotes the reflexive and transitive closure of @xmath151 and @xmath432 denotes the transitive closure .",
    "[ lemma : acc_trans ] @xmath433 .",
    "( @xmath44 ) : we prove a slightly stronger statement , @xmath434 by induction on the proof of @xmath435 , from which the claim follows .",
    "( @xmath45 ) : by induction on the proof of @xmath436 .",
    "[ lemma : noet_logequ_acc ] @xmath437 .",
    "( @xmath44 ) : by induction on the proof of @xmath420 .",
    "we are given as induction hypothesis that , @xmath438",
    ". we have to prove @xmath439 , which follows from the induction hypothesis and by observing that , @xmath440 .",
    "( @xmath45 ) : we prove that , @xmath441 by induction on the proof of @xmath442 .",
    "then the case follows from lemma  [ lemma : acc_trans ] .",
    "we are given as induction hypothesis that , @xmath443 . we have to prove @xmath444 , which follows from the induction hypothesis and by case analysis on whether @xmath445 or not .",
    "combining lemmata  [ lemma : pre_acc ] , [ lemma : noetherian_another ] and  [ lemma : noet_logequ_acc ] , we obtain :    @xmath446 .",
    "the following diagram summarizes our current understanding of the constructive interrelations between the various notions of finiteness .",
    "implications that are annotated have not been proved constructively ; the annotations explain which principle is sufficient and , in some cases , necessary to prove the implication .",
    "@xmath447 \\\\ \\exists",
    "n.\\ , { \\mathit{le}_{n}~s }    \\ar@/_1pc/@{=>}[d ]       \\ar@/_1pc/@{=>}[u]_{~{\\leftrightarrow}~ \\mathrm{lpo } } \\\\ { \\mu{\\mathcal{w}}~s }   \\ar@/_1pc/@{=>}[d ]     \\ar@/_1pc/@{=>}[u]_{~{\\leftrightarrow}~ \\mathrm{lpo } }    \\ar@/_4pc/@{=>}[dd]\\\\ { \\mathit{sn}}\\ , \\succ_s\\ , 0    \\ar@/_4pc/@{=>}[dd ]   \\ar@/_1pc/@{=>}[u]_{~\\leftarrow~ \\mathrm{bi}~\\vee~\\mathrm{lpo } }   \\\\ \\neg \\ , { \\mathcal{g}}\\ , ( \\neg\\ ,   { \\mathcal{g}}{\\mathit{blue}})\\ , s     \\ar@/_1pc/@{=>}[d ]     \\ar@/_1pc/@{=>}[u]_{~{\\leftrightarrow}~ \\mathrm{mp}}\\\\ \\neg { \\mathcal{g}}\\ , ( { \\mathcal{f}}\\ , { \\mathit{red}})\\ , s   \\ar@/_1pc/@{=>}[u]_{~\\leftarrow~ \\sigma^0_1\\mathrm{-dns } } } \\ ] ] we do not know whether the implication @xmath448 holds . as observed by coquand and spiwack in ( * ? ? ?",
    "2.4 , p.  225 ) , the implication ` if @xmath91 is streamless , then @xmath91 is noetherian ' can be proved by bar induction ( bi ) .",
    "the precise instance of bar induction that proves this implication depends on the set @xmath91 . in our case here ,",
    "the set @xmath91 is decidable . therefore our formulation of the implication , @xmath449 , can be proved by a weak instance of bar induction ( bi@xmath450 , see ( * ? ? ?",
    "* ch .  4 , 8.11 , p.229 ) ) .",
    "we find it remarkable that both bi and lpo prove @xmath449 , and do not know whether this implication can be proved constructively . although we consider the latter unlikely , we prefer to consider it as an open problem .",
    "since @xmath95 is decidable , constructivity of @xmath449 will be more difficult to disprove than the conjecture by coquand and spiwack ( * ? ? ?",
    "2.4 , p.  225 ) .",
    "k.  nakata and t.  uustalu s research was supported by the european regional development fund ( erdf ) through the estonian centre of excellence in computer science ( excs ) .",
    "m.  bezem s visit to estonia in february 2011 was supported by the same project .",
    "nakata , k. , uustalu , t. : resumptions , weak bisimilarity and big - step semantics for while with interactive i / o : an exercise in mixed induction - coinduction . in aceto , l. , sobocinski , p. , eds . : proceedings of 7th workshop on structural operational semantics , sos 2010 ( paris , aug .",
    "2010 ) , electron . proc . in theor .",
    "5775 , 2010 .",
    "coquand , t. , spiwack , a. : constructively finite ? in laureano lambn , l. , romero , a. , and rubio , j. , eds . :",
    "scientific contributions in honor of mirian andrs gmez , pp . 217230 , servicio de publicaciones , universidad de la rioja , spain , 2010 ."
  ],
  "abstract_text": [
    "<S> mixing induction and coinduction , we study alternative definitions of streams being finitely red . we organize our definitions into a hierarchy including also some well - known alternatives in intuitionistic analysis . </S>",
    "<S> the hierarchy collapses classically , but is intuitionistically of strictly decreasing strength . </S>",
    "<S> we characterize the differences in strength in a precise way by weak instances of the law of excluded middle .    </S>",
    "<S> [ multiblock footnote omitted ]    [ multiblock footnote omitted ]    [ multiblock footnote omitted ] </S>"
  ]
}