{
  "article_text": [
    "the question of evaluating whether certain hypotheses made from observed data are significant or not , is one of the oldest problems in statistics .",
    "statistical significance reduces an observed result ( statistic ) to a @xmath0-value that tells about the probability of observing the same result at random when a certain null hypothesis is true .",
    "if this @xmath0-value is sufficiently small , we can assume that the null hypothesis is false .",
    "the technical challenge of defining an exact @xmath0-value for a given hypothesis is typically resolved by studying the null distribution of the test analytically ; for example , the well known chi - squared test is based on statistics that follow a chi - square distribution under the null hypothesis . alternatively , when analytical solutions are not possible or hard to state exactly , the null distribution can be defined via permutation tests .",
    "these useful statistical concepts have been used for years in experimental fields such as medicine , biology , geology or physics , to name a few .",
    "many of these considerations have been extended as well to the data mining and database community . in a very first paper about association rules ,",
    "brin et al .",
    "@xcite considered measuring the significance of rules via the chi - squared test , and from there many other papers followed ",
    "see e.g.  @xcite for a comprehensive survey .",
    "more recently , the approach of defining randomization tests to assess data mining results was introduced for binary data  @xcite , and for real - valued data  @xcite .",
    "@xmath1 \\mathrm{md } & = & \\{(m_1,\\mathrm{c.~waitt } ) , ( m_2,\\mathrm{c.~waitt } ) , ( m_3,\\mathrm{c.~waitt } ) , \\\\ & & \\ ( m_4,\\mathrm{c.~waitt } ) , ( m_5,\\mathrm{c.~waitt } ) , ( m_6,\\mathrm{t.~george } ) , \\\\   & & \\",
    "( m_7,\\mathrm{t.~george})\\ } \\\\[.5em ] \\mathrm{da } & = & \\{(\\mathrm{c.~waitt},30 ) , ( \\mathrm{t.~george } , 60)\\ } \\end{aligned}\\ ] ]    abstracting a bit from the question of how significant patterns are in the data , we introduce here the statistical testing framework to databases and the exploratory task of querying the relations of the database .",
    "the question of understanding what we know and what we believe about our dataset becomes tricky when the data is highly structured and interrelated .",
    "structured data is everywhere : examples are the internet movie database ( imdb ) , or the dblp computer science bibliography , and indeed , most of today s information systems are actually relational databases . in imdb , e.g. , basic entities are directors , movies , genres , ranks or years ; in addition , we have relations such as directors direct movies , movies are classified by a genre , movies are ranked with some quality criteria , and directors are born in a certain year . each of these relations is represented in a separate table which relates to others through their common attribute values .",
    "a simple toy example is given in figure  [ fig : toyex0 ] .",
    "in multi - relational databases , users and applications access the data via queries .",
    "e.g. , a query can be made to check the average age of directors of history movies , or the average age of directors of romance movies . in the toy example of figure  [ fig : toyex0 ] ,",
    "the first query returns a value of 60 , while the second query returns a value of 30 .",
    "usually , the answer returned by the query is assumed as a fact , thus implying some conventional wisdom  for this toy example we might be tempted to believe that directors of romance movies are younger than directors of history movies .",
    "but , should we really believe that this hypothesis is significant from the data ?",
    "if we knew that all history movies are also classified as drama movies , would the value of 60 still have the same importance ? or",
    ", if we knew that the same director has participated in both romance and drama movies ?",
    "we study whether the results returned by queries are significant or just a random artifact due to the structure in the data .",
    "our statistical tool is randomizations and the approach is simple : randomize certain relations occurring in the queries and repeat the original query in the random samples .",
    "this provides an empirical @xmath0-value , and , as in basic statistics , we can reject or accept our hypothesis linked to the query . the goal behind",
    "this idea is to provide an understanding of how the structure of the data affects the significance of the information we derive from our queries .",
    "if certain structures or patterns remain after simple randomizations ( e.g. ,  the fact that history movies are also drama movies in the toy example ) , the answers of a query that rely on such patterns should be regarded as not significant .",
    "it turns out that there is no unique way of randomizing in multi - relational data , and indeed , it is difficult to give a fully satisfactory answer about which randomizations are more important than others .",
    "we study several randomization methods and show the combinatorial properties of the null distributions on multiple tables .",
    "our contribution makes a first step towards understanding how the significance of a query is linked to the structure hidden in the data ; randomizations are a sound statistical tool to make such a connection .",
    "we believe this is an important problem of interest to both the database and data mining communities .",
    "we present experimental results on synthetic data , and show the usability of the method for several queries in real datasets .",
    "let @xmath2 be a binary relation @xmath3 between sets @xmath4 and @xmath5 . in the market basket application , for example , @xmath4 could be a set of customers and @xmath5 a set of products . a binary relation",
    "@xmath3 identifies which customers from @xmath4 buy which products from @xmath5 .",
    "notice that every binary relation can be seen as a binary matrix describing the occurrences between the row set @xmath4 and column set @xmath5 , see figure  [ fig : toyex1 ] for examples .",
    "let @xmath6 be a set of @xmath7 binary relations representing some structured data .",
    "this relational model is very general .",
    "it applies , for example , to a movie database system , as shown in figure  [ fig : toyex1 ] .",
    "the representation of the same example as a sequence of bipartite graphs is depicted in figure  [ fig : toyex1:graph ] .    .",
    "the graph shows all the possible paths from the source nodes , @xmath8 , to the destination nodes , @xmath9.,width=226 ]    the basic operator to combine relations is the _",
    "natural join_. conceptually , a join between two relations @xmath2 and @xmath10 , denoted @xmath11 , combines all entries from @xmath2 and @xmath10 that share common attribute values to return a composition of the relations .",
    "for example , given @xmath12 , @xmath13 and @xmath14 , we have @xmath15 and also @xmath16 .",
    "the join operator is associative over a set of relations and its result explicitly represents all existing paths between the occurring relations .",
    "for example , the natural join of the three tables in figure  [ fig : toyex1 ] returns a tuple for each path there is between genre and age . for an _ ordered _ subset of binary relations from the database @xmath17",
    ", we use @xmath18 to denote the final join between all elements in @xmath19 .",
    "the order in @xmath19 is to ensure a join of consistent relations ; we assume that @xmath19 in @xmath18 is always implicitly ordered .    a _ query _ @xmath20 is applied to the join of a subset of the relations in the database @xmath17 .",
    "the result of a query is denoted by @xmath21 .",
    "we say that @xmath19 is the set of relations occurring in the query .",
    "a query can be described with the operators of projection and selection  @xcite , applied to a join @xmath18 .",
    "projection is a unary operator @xmath22 that restricts tuples of @xmath18 to attributes in @xmath23 .",
    "selection is a unary operator @xmath24 where @xmath25 is a propositional formula .",
    "the operator selects all tuples in the relation @xmath18 for which @xmath25 holds .",
    "consider the movie database in figure  [ fig : toyex1 ] . a possible query is : select drama movies and project movie and age of its director .",
    "we can write this query as follows , @xmath26 the result of query @xmath27 is a set of pairs : @xmath28 @xmath29 .",
    "another very similar query is : select drama movies and project age only .",
    "that is , @xmath30 query @xmath31 returns:@xmath32 .",
    "although queries @xmath27 and @xmath31 are very similar , the projection made by @xmath31 on only age , has eliminated repeated values .",
    "the results of query @xmath27 tell us how many paths there are between directors of drama and age , while in query @xmath31 we only know if a path exists or not .",
    "our goal is to assess whether the results returned by a query provide significant information about our hypothesis on the data . for simplicity ,",
    "a _ statistic _",
    "@xmath33 is required to map the results of a query to a single real value .",
    "we assume this function @xmath33 is provided by the user together with the query ; they define the hypothesis on the data the user wants to test .",
    "examples of this statistic are the average of the returned results , or the number of tuples in the answer , but indeed @xmath33 can be any general function returning a real value .",
    "for example , the average value of age in query @xmath27 is 42.5 ( i.e. , the average age of directors of drama weighted by the number of directed movies ) .",
    "then , we may want to know whether that average age is interesting or not .",
    "another two - tailed hypothesis is whether that average is significantly different from the average age of directors of romance movies .",
    "formally , our problem reads as follows .    given",
    "a set of binary relations @xmath34 @xmath35 of structured data and a query @xmath20 on some occurring @xmath36 @xmath35 , is the value of @xmath37 for a statistic @xmath33 , significant ( in some sense to be made more specific later ) ?",
    "in this section we present an overview of the approach and describe the intuition behind it .",
    "we show how our method can be used to test the significance of queries and to uncover the structurally important relations in the data .",
    "we approach the problem of testing the statistical significance of the query via randomizations .",
    "randomizations have been widely used as a method to generate samples from null distributions .",
    "for example , in medical studies it is customary to measure the effect of a certain drug via permutation tests between the control and case group  @xcite .    for short ,",
    "let @xmath38 for some @xmath17 . to assess the significance of @xmath39",
    ", we generate randomized versions of @xmath40 and run the same query over the samples . let @xmath41 be a set of randomizations of @xmath40 .",
    "we will specify in section  [ subsec : randtypes ] how to generate such randomized versions of @xmath40 . then the one - tailed _",
    "empirical @xmath0-value _ of @xmath39 with the hypothesis of @xmath39 being small is , @xmath42 this definition represents the fraction of randomized samples having a smaller value of the statistic @xmath33 .",
    "if the @xmath0-value is small , e.g. , below a threshold value @xmath43 , we can say that the value of @xmath39 is significant in the original data .",
    "the one - tailed @xmath0-value with the hypothesis of @xmath33 being large and the two - tailed @xmath0-value are defined similarly .",
    "the challenge is how to generate the set @xmath44 , that is , the different randomized versions of @xmath45 , to compute the empirical @xmath0-value .",
    "consider the toy example in figure  [ fig : toyex1 ] .",
    "suppose we want to evaluate whether the average age of the directors of drama movies , as in query @xmath31 of section  [ sect : probdef ] , is young .",
    "a first naive approach is to consider randomizing directly the binary matrix obtained from the boolean product of all relations from genre to age .",
    "the boolean product tells us whether there is a path from the set of nodes of genre to the set of nodes of age , as required by query @xmath31 .",
    "a traditional permutation test on this new matrix shown in figure  [ fig : booleanprod](a ) can produce only two possible random samples : either the original matrix , or a matrix where the age values between romance and history are swapped . for the particular case of romance movies with the hypothesis of having small age , we would obtain a @xmath0-value close to 0.5 ( i.e.  50% of the randomized samples would have the same value as the original ) .",
    "thus the result is not significant . indeed , under such randomization none of the three genres",
    "would test significantly small , nor large , nor different .",
    "alternatively , we could apply a permutation test on the contingency table of paths  @xcite , shown in figure  [ fig : booleanprod](b ) .",
    "this table gives the number of paths between the genre and age , as required by @xmath27 .",
    "the hypothesis related to our queries under those permutation tests would never be significant .",
    "the problem of these naive approaches is that they ignore the structure of the relations occurring in the query . in our toy example",
    "there are three binary relations participating in the query : gm , md and da .",
    "indeed these relationships convey some structure on the data : the relation md shows that all history movies are also drama movies ; the relation md shows that all movies from drama and romance have been directed by the same person .",
    "how do these structures affect the significance of the results in a query ?    in queries involving multiple binary relations , there is no unique way to randomize . to assess the structural effect that each relation from @xmath19 has over the query @xmath21",
    ", we should randomize only the corresponding relation .",
    "that is , the different randomizations of @xmath18 are obtained by randomizing a single relation @xmath46 while keeping the rest fixed .",
    "more formally , the random samples of @xmath18 , when only @xmath46 is randomized , are defined as follows : @xmath47 where @xmath48 is the set of randomized versions of the original @xmath46 . in section  [ subsec : randtypes ]",
    "we describe the different randomization techniques to obtain such samples .",
    "finally , these randomized samples @xmath49 will be used to compute the corresponding @xmath0-value , as described in equation  [ eq : emppvalue ] .",
    "observe that for a given query involving relations in @xmath19 , we can obtain one @xmath0-value for each @xmath46 we randomize ( while keeping @xmath50 fixed ) .",
    "each @xmath0-value is interesting as it measures the structural effect that the participant relation @xmath2 has on the significance of the result of the query .",
    "the sketch of the method is described in algorithm  [ alg : method ] .",
    "the basis of our proposal can be found in traditional statistics under the name of restricted randomizations ( see e.g.  @xcite , typically to test whether a treatment variable has effect on a response variable ) .",
    "a set of binary relations @xmath17 , a query @xmath21 and a hypothesis over the statistic @xmath37 a set of @xmath0-values obtain @xmath51 random samples of @xmath2 , @xmath48[alg : qs : obt ] let @xmath52[alg : qs : comb ] compute the @xmath0-value using the random samples @xmath49    [ alg : method ]      we study now the toy example in figure  [ fig : toyex1 ] . consider a query defined such as @xmath27 from section  [ sect : probdef ] , yet on the three different genres .",
    "the first hypothesis that romance movies are directed by young directors obtains a @xmath0-value of 0.131 when randomizing on gm , a @xmath0-value of 0.494 on md , and a @xmath0-value of 0.495 on ma .",
    "the hypothesis is not significant under any randomization , but we observe that randomizing on gm obtains the smallest @xmath0-value for this query .",
    "the hypothesis that history movies are directed by old directors obtains @xmath0-values 0.269 , 0.045 , 0.495 when randomizing on gm , md , da , respectively . thus the hypothesis is significant considering the structure in relation md : all non - history movies are directed by the same person .    finally , the hypothesis that drama movies are directed by young directors is not significant in any of the randomizations , always with a @xmath0-value close to @xmath53 when randomizing on gm or md , and @xmath0-value of 0.495 when randomizing on da .    in summary :",
    "the age value of 30 associated to romance movies is close to being significant when randomizing on gm because romance is a non - intersecting genre with drama and history ; the age value of 60 associated to history movies is significant when randomizing on md because , when focusing on the directors , the history movies are non - intersecting with the romance and drama movies  all romance and drama movies are directed by the same person ; also , the relation da always swaps with equal probability , because of its one - to - one structure . in the next section",
    "we will understand better the reason of these explanations .",
    "this section describes how to obtain random samples for a single relation @xmath2 ( line  [ alg : qs : obt ] in algorithm  [ alg : method ] ) , and presents the combinatorial properties of combining such samples with the other relations in the query ( line  [ alg : qs : comb ] in algorithm  [ alg : method ] ) .",
    "given a binary relation @xmath2 we use three different types of randomization to obtain random samples from @xmath2 .",
    "the running times and space consumptions of the methods are linear in the size of the relation @xmath2 .",
    "* _ swap randomization _ of @xmath2 , as used in  @xcite , produces random samples of @xmath2 that preserve the row and column sums .",
    "the algorithm starts from @xmath2 and performs local swaps interchanging a pair of 1 s with a pair of 0 s preserving the row and column sums .",
    "technically , a local swap consists of selecting entries @xmath54 such that @xmath55 , and swapping the elements so that @xmath56 and @xmath57 . on the bipartite graph representation of the relation @xmath2 , a local swap represents a flip between two independent edges . +    + a sequence of swaps",
    "is performed until the data mixes sufficiently enough in a markov chain approach  @xcite , and therefore , a random sample of @xmath2 is obtained .",
    "we use ten times the number of ones in the matrix as the number of swaps , which suffices for the convergence of the chain  @xcite .",
    "we denote the set of all random samples reached via swap randomization of @xmath2 as @xmath58 . *",
    "_ row permutation _ of @xmath2 permutes the order of the rows of @xmath2 .",
    "we denote the set of all random samples reached via row permutation of @xmath2 as @xmath59 . *",
    "_ column permutation _ of @xmath2 permutes the order of the columns of @xmath2 .",
    "we denote the set of all random samples reached via column permutation of @xmath2 as @xmath60 .",
    "note , particularly , that @xmath58 , @xmath59 and @xmath60 refer to sets of matrices .",
    "the relationship between swap randomizations and permutations can be stated as follows .",
    "let @xmath2 be a binary matrix . then :    * @xmath61 , where @xmath4 is an identity matrix ; * @xmath62 , where @xmath4 is an identity matrix ; * if @xmath2 has one 1 in each row , then @xmath63 ; if @xmath2 has one 1 in each column , then @xmath64 .",
    "[ prop0 ]    note that @xmath65 , for identity matrix @xmath4 , can produce any swap permutation matrix with uniform distribution .",
    "thus , we have that the boolean product @xmath66 produces all permutations for the rows of @xmath2 and similarly , @xmath67 produces all permutations of the columns of @xmath2 .",
    "intuitively , these row ( or column ) permutations can be seen as a random re - assignment of the row ( or column ) names in @xmath2 .",
    "while the swap randomization has been used in  @xcite to assess the data mining results on a single binary relation , the new randomizations , corresponding to row and column permutations , do not make sense in such a context .",
    "the row or column permutation of a matrix does not change any of the frequent pattern solutions in the new randomized matrix .",
    "these permutations only make sense in a multi - relational data model , where the permuted matrices are combined with other relations .",
    "both row and column permutation of a single relation change the global paths from the source nodes to destination nodes in the query graph , and thus , the evaluation of the query can change on the randomized data .",
    "next we study the properties of combining the obtained random samples with the other relations in the query . for simplicity , we study the case of queries with only two occurring relations @xmath68 and use boolean product as a simplification of the natural join . for notational convenience , we overload the boolean product for the sets of binary matrices , e.g. , @xmath69 represents the boolean product of each pair of elements @xmath70 and @xmath71 .",
    "the following inclusions with swap randomization follow immediately after the definitions .",
    "all other inclusions do not hold .",
    "the inclusions can also be proper in all cases .",
    "let @xmath72 be binary matrices . then :    * @xmath73 ; * @xmath74 ; * @xmath75 .",
    "[ prop1 ]    proposition  [ prop1 ] tells us that the set of samples that can be obtained by randomizing two relations is larger than by randomizing only one relation .",
    "as discussed in section  [ subsec : whrtorand ] , we prefer to randomize a single table at a time in order to control much better the structural effect the randomized relation has on the query .",
    "additionally , we know that the set of randomized samples @xmath76 is different from the set @xmath77 , thus it makes sense to do them both separately .",
    "next we present several properties relating swap randomization to row and column permutations .",
    "let @xmath72 be binary relations . if @xmath10 is a one - to - one relation , then @xmath78 . if @xmath2 is a one - to - one relation , then @xmath79 .",
    "[ prop2 ]    proposition  [ prop2 ] follows immediately from proposition  [ prop0 ] . in real world datasets , it is quite common to have one - to - one relations . for example , the ages of the directors in the example in figure  [ fig : toyex1 ] are one - to - one . thus swap randomization of the relation da produces the same set of samples as the column permutation of md .",
    "let @xmath72 binary relations . then :    * @xmath80 * @xmath81 * @xmath82    [ prop3 ]    this means that column and row permutations do not make sense in more than one relation , e.g. , @xmath83 .",
    "the last property of proposition  [ prop3 ] states that only one permutation , either column permutation on @xmath2 or row permutation on @xmath10 , is indeed necessary .",
    "finally , we give an implication of proposition  [ prop0 ] that reduces the number of different randomizations considerably .",
    "let @xmath72 be binary relations . then : @xmath84 , where @xmath4 is an identity matrix .",
    "[ prop4 ]    hence , we prefer to use the notation with the identity matrix @xmath4 to refer to the row and column permutations .",
    "the operation @xmath85 randomizes the boolean product , whereas the operations @xmath76 and @xmath77 randomize the original data . from this perspective",
    ", @xmath85 tells about the significance of the combination operation , while @xmath76 tells whether the structure in @xmath2 is significant . to sum up",
    ", we have the following result :    for a query @xmath86 , there exist three different randomizations : ( i ) @xmath58 while keeping @xmath10 fixed ; ( ii ) @xmath87 while keeping @xmath2 fixed ; ( iii ) @xmath65 where @xmath4 is an identity relation between the columns of @xmath2 and the rows of @xmath10 .    notice that if @xmath2 or @xmath10 are one - to - one relations , then randomization ( iii ) will be the same as ( i ) or ( ii ) respectively .",
    "each randomization provides a set of samples from where we can compute a @xmath0-value for our query ( hypothesis on the data ) .",
    "every @xmath0-value is interesting as it shows how the structure of the randomized relation affects the significance .",
    "the @xmath0-values reported in section  [ sub : example ] for the toy example in figure  [ fig : toyex1 ] , correspond to swap randomization of the binary tables gm , or md , or da , respectively . indeed",
    "because md has one single 1 in each row , we have that @xmath88 is equal to @xmath89 .",
    "similarly , because da is a one - to - one relation , we have @xmath90 equals @xmath91 .",
    "thus , for this example , only swap randomization in the three tables is necessary .",
    "interestingly , we can understand better now the @xmath0-values reported in section  [ sub : example ] . on the relation",
    "gm , drama movies and history movies have no independent edges to swap between them .",
    "therefore , the pattern of history implying drama tends to remain in random samples . as a result , the @xmath0-value of the hypothesis related to history or drama movies is not significant . on the other hand ,",
    "the @xmath0-value related to romance movies becomes close to being significant because , for this genre , the null distribution diverges more from the original .",
    "the fact that there are only two romance movies raises this @xmath0-value slightly above the 0.05 threshold .",
    "similar explanation goes when randomizing md . when looking at md , local swaps can interchange at most two edges between movies of the young director c.  waitt and movies of the not - so - young director t.  george .",
    "actually , in all random samples coming from md we observe that c.  waitt has always at least three movies from either drama or romance . as a result",
    ", neither drama nor romance can be significant  in the null distribution they are always closely linked to a young director as in the original data .",
    "yet , history movies directed by t.  george have more local swaps that would create a diverging null distribution ",
    "most of the samples in the null distribution have the history movies connected to the age of 30 .",
    "the hypothesis of history movies being directed by a not - so - young person is then significant .",
    "for a query @xmath92 where @xmath93 and @xmath94 , let @xmath95 be the matrix product of all relations participating in @xmath20 .",
    "this corresponds to the contingency table of paths from origin @xmath4 to destination nodes @xmath96 .",
    "an example is shown in figure  [ fig : booleanprod](b ) for the toy data of figure  [ fig : toyex1 ] .",
    "for all types of queries , the significance of the result is closely related to the path distributions between nodes @xmath4 and @xmath96 . for example , suppose we want to test whether the average age of history - movie directors is large . in the original data of figure  [ fig : toyex1:graph ]",
    "there are two paths from history to the age of 60 and no path to the age of 30 .",
    "it is sensible to assume that if we had random samples where paths are mainly swapped the other way round , the hypothesis would be significant .",
    "naturally , a simple way to visualize whether there exists an interesting finding in the data is to compare the path distribution of @xmath97 with the expected path distribution on the given random samples . the larger the change , the more significant the result would tend to be .    the following three matrices show the expectation of the paths when swap randomizing relation gm , md or da , respectively , for the example in figure  [ fig : toyex1 ] .",
    "+ @xmath98 $ ] @xmath99 $ ] @xmath100 $ ]   + @xmath101 @xmath102 @xmath103 +    -1 the genre that swaps most of its paths under randomizations with gm is romance .",
    "history swaps the paths from the age of 60 to the age of 30 when randomizing on md .",
    "randomization on da distributes paths fifty - fifty for each genre .",
    "the @xmath0-values obtained there were always close to 0.5 .",
    "in this section we present empirical results on synthetic and real datasets .",
    "our real dataset is * movielens * , which is very similar to imdb . in all cases ,",
    "we calculate the empirical @xmath0-values over 999 randomized samples and use the threshold of @xmath104 to determine the query significance .",
    "the randomization methods are fast in practice . in our experiments , producing one randomized sample took approximately the same time as evaluating the query . with the tested datasets , the times for producing one sample were at most few seconds with java implementations integrated with matlab on a 2.2ghz opteron .",
    "the time and space consumption of the methods scale linearly in the size of the relation . in large - scale applications ,",
    "fewer number of randomized samples can be used to calculate the empirical @xmath0-values .",
    "for example , 30 samples is usually sufficient in a preliminary significance analysis .",
    "this corresponds to approximately 30 times increase in the evaluation time .      to motivate our approach and understand better why randomizations are consistent with the inferences about our hypothesis",
    ", we generate a synthetic dataset to simulate relations of users , movies and genres",
    ". we will be interested in testing the following hypothesis .",
    "[ query : synth : mldtomtw ] men watch different types of movies than women .",
    "the relations occurring in the query are : gender@xmath105user ( su ) , user@xmath105movie ( um ) and movie@xmath105genre ( mg ) .    for studying the behavior of randomizations",
    ", we generate the tables su , um and mg to make our hypothesis clearly be significant .",
    "we let su contain 30 men and 20 women , thus su is a @xmath106 binary table where the first 30 values in the first row and the last 20 values in the second row are 1s .",
    "we generate um to be a @xmath107 binary table where men watch any of the first 60 movies with probability of 0.40 and any of the last 40 movies with probability of 0.05 . to create a strong pattern",
    ", we let the probabilities of a female watching movies be the other way round .",
    "finally , we generate mg as a @xmath108 binary table where the first three genres will be considered to be manly and the last three genres will be considered to be womanly . for each movie in the relation , we select two genres as follows : for the first 60 movies we select a genre from the manly genres with a probability of 0.9 and from the womanly genres with a probability of 0.1 . for the last 40 movies the probabilities are the other way round",
    "so , each movie has at most two genres , because if we happen to select the same genre for a movie twice , then we say that the movie has only one genre .",
    "next we create the anti - tables from those above , called rsu , rum and rmg .",
    "these anti - tables will not contain any structure at all , they are random .",
    "we let rsu be a @xmath106 binary table with 30 men and 20 women where the order of the users is random .",
    "we generate rum to be a @xmath107 table with each element being 1 with a probability of @xmath109 . and we let rmg be formed similarly to mg but with the two genres for each movie assigned uniformly with replacement .",
    "the goal of this experiment is to study how the @xmath0-values of hyp  [ query : synth : mldtomtw ] change when combining the original significant tables su , um and mg to one of these non - significant tables .",
    "figure  [ fig : synt : paths : distr ] shows the contingency table of paths from those combinations .",
    "we notice that using the original tables su , um and mg ( figure  [ fig : synt : paths : distr](a ) ) produces clearly a significant difference between the types of movies that males and females watch . by replacing one of the original tables with a random version",
    ", the pattern seems to disappear .",
    "still , we can not clearly see from the path distributions which of the underlying tables mainly breaks the original structure .",
    "we would like to check with our tests whether randomizing in the proper tables will tell us where the pattern is broken .",
    "for the test , we use the following statistic .    [",
    "stat : synth : mldtomtw ] @xmath110 distance between the distribution of genres of the movies that men and women have watched .",
    "this statistic is the sum of the absolute differences between the proportion of paths of men and women , as shown in figure  [ fig : synt : paths : distr ] for each of the combinations .",
    "the original value of the statistic with the tables su , um and mg is 1.23 , implying a clear difference between males and females .",
    "when one of the tables su , um and mg is replaced with a corresponding anti - table , the value of the @xmath110 statistic is around 0.1 .",
    "c*2@c*4r & + ( lr)1 - 3 ( lr)4 - 7 a & b & c & ( @xmath111 ) & ( b ) & ( @xmath112 ) & ( c ) + su & um & mg & 0.001 & 0.001 & 0.001 & 0.001 + rsu & um & mg & * 0.517 * & 0.030 & 0.013 & 0.003 + su & rum & mg & * 0.282 * & * 0.279 * & * 0.155 * & 0.124 + su & um & rmg & 0.001 & 0.001 & * 0.704 * & * 0.727 * +    in table  [ table : sign : synth ] we show the results of the several significance tests for the hypothesis hyp  [ query : synth : mldtomtw ] on the several combined tables .",
    "there is a clear connection between the structure of the relations a , b and c occurring in the query and the @xmath0-values obtained by randomizing in different relations .",
    "as expected , the empirical @xmath0-value of hyp  [ query : synth : mldtomtw ] with tables su , um and mg is significant with randomizations in all tables . on the other hand , when one of the clearly - structured tables su , um or mg is replaced by the anti - tables rsu , rum or rmg respectively , we obtain large empirical @xmath0-values for those randomizations that touch the anti - tables ( see the bold values of table  [ table : sign : synth ] ) .",
    "this illustrates how randomizations can tell about the structural effects in the significance of a query .",
    "the * movielens * data is collected through the movielens web site ( movielens.umn.edu ) .",
    "the downloadable data is already cleaned up , i.e. , users who had less than 20 ratings or did not have complete demographic information were removed from the data set . in all , the data consists of 100,000 ratings ( valued from 1 to 5 ) from 943 users on 1,682 movies .",
    "each user has rated at least 20 movies and the demographic information for the users correspond to attributes of age , gender , occupation and zip code . for each movie",
    "we have title , release year and a list of genres .",
    "furthermore , we interpret that if a user has rated a movie , it means that he or she has watched it .",
    "this corresponds to the binary table named um .",
    "we do not use the information of ratings in any other way . in table",
    "[ table : movielens : summary ] we summarize the binary relations in the * movielens * dataset .",
    "the table ua is just an identity matrix which maps the users to their ages , thus two different columns of the table ua may correspond to the same age .",
    "handling numerical values in this way guarantees that two users having the same age are not combined into a single user after a join and a projection .",
    ".summary of tables in movielens dataset .",
    "the table @xmath113 is an identity map between users and their ages .",
    "we denote a transpose by reversing the relation name . [ cols=\"<,<,>,>,>\",options=\"header \" , ]     indeed , the results on hyp  [ query : mldtomtw ] seem to indicate that men watch movies with different genres than women .",
    "all randomizations are consistent .",
    "we will next analyze which genres separate men and women .",
    "we repeat the following hypothesis ( with associated query ) for each genre @xmath114 .",
    "[ query : mlggmtw ] men watch genre @xmath114 more ( or less ) than women .",
    "[ stat : mlggmtw ] the difference between the % -proportions of the movies from genre @xmath114 among all the movies men and women have watched .    notice this statistic is similar to statistic  [ stat : mldtomtw ] but now we only look at the difference for the specific genre @xmath114 .",
    "the empirical @xmath0-values of the significance testings of hyp  [ query : mlggmtw ] are given in table  [ table : sign : query : mlggmtw ] .",
    "again we find out that randomizing in different relations produces fairly similar results in general .",
    "we can observe that men watch significantly more , for example , action and sci - fi movies than women , whereas women watch significantly more romance and drama movies than men .",
    "interestingly , we can say the popularity of mystery and documentary movies do not depend on the gender .",
    "actually the genres which have the smallest amount of movies are the least significant ones .",
    "the genres with fewest number of movies are fantasy ( with 22 movies ) , film - noir ( 24 ) , western ( 27 ) , animation ( 41 ) and documentary ( 50 ) .",
    "@l@r*5@r@ @xmath114 & orig . &",
    "( su ) & ( @xmath115 ) & ( um ) & ( @xmath116 ) & ( mg ) + action & 2.5 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + sci - fi & 1.5 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + thriller & 1.1 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + adventure & 0.8 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + crime & 0.6 & 0.002 & 0.001 & 0.001 & 0.001 & 0.002 + war & 0.5 & 0.002 & 0.001 & 0.001 & 0.004 & 0.002 + horror & 0.4 & 0.019 & 0.018 & 0.001 & 0.011 & 0.020 + western & 0.2 & 0.001 & 0.001 & 0.001 & 0.005 & 0.003 + film - noir & 0.1 & 0.012 & 0.009 & 0.001 & 0.054 & 0.058 + mystery & 0.0 & 0.392 & 0.401 & 0.395 & 0.424 & 0.469 + document . & 0.0 & 0.404 & 0.392 & 0.391 & 0.468 & 0.489 + fantasy & -0.1 & 0.064 & 0.070 & 0.051 & 0.243 & 0.201 + animation & -0.2 & 0.032 & 0.033 & 0.001 & 0.027 & 0.018 + musical & -0.5 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + children s & -1.0 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + comedy & -1.3 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + drama & -2.3 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 + romance & -2.3 & 0.001 & 0.001 & 0.001 & 0.001 & 0.001 +    next we study users by their occupation .    [ query : uwagowdtomtou ] the users with occupation @xmath117 watch different types of movies than other users .",
    "[ stat : uwagowdtomtou ] @xmath110 distance between the distributions of genres of the movies watched by users with occupation @xmath117 and users with other occupations .",
    "the results of the significance testings are given in table  [ table : sign : query : uwagowdtomtou ] .",
    "when evaluating the associated query , we find that randomizing in different relations matters for that query .",
    "for most of the occupations , hyp  [ query : uwagowdtomtou ] is not significant when randomizing on @xmath118 nor @xmath119 .",
    "for the other randomizations we have that all occupations , except for homemakers , exhibit significance of the hypothesis . we observe that the largest occupation groups of librarians ( 51 ) , educators ( 95 ) and students ( 196 ) have the most significant empirical @xmath0-values for the query , with all type of randomizations .",
    "we could infer that those type of users watch different genres than other users .",
    "@l@r*2@r@r@r@    & & & + ( r3mm)3 - 5 ( r)6 - 8 & orig .",
    "& mean & ( std ) & @xmath0-val .",
    "& mean & ( std ) & @xmath0-val .",
    "+ none & 0.23 & 0.13 & ( 0.05 ) & * 0.038 * & 0.07 & ( 0.01 ) & 0.001 + librarian & 0.18 & 0.05 & ( 0.02 ) & * 0.001 * & 0.04 & ( 0.01 ) & 0.001 + retired & 0.18 & 0.10 & ( 0.04 ) & * 0.040 * & 0.05 & ( 0.01 ) & 0.001 + homemaker & 0.17 & 0.14 & ( 0.05 ) & 0.269 & 0.15 & ( 0.03 ) & * 0.226 * + doctor & 0.15 & 0.14 & ( 0.05 ) & 0.373 & 0.08 & ( 0.02 ) & 0.001 + entert . & 0.14 & 0.09 & ( 0.03 ) & 0.073 & 0.04 & ( 0.01 ) & 0.001 + educator & 0.13 & 0.04 & ( 0.01 ) & * 0.001 * & 0.03 & ( 0.01 ) & 0.001 + lawyer & 0.13 & 0.11 & ( 0.04 ) & 0.237 & 0.05 & ( 0.01 ) & 0.001 + salesman & 0.12 & 0.11 & ( 0.04 ) & 0.330 & 0.06 & ( 0.01 ) & 0.001 + healthcare & 0.12 & 0.09 & ( 0.03 ) & 0.211 & 0.04 & ( 0.01 ) & 0.001 + student & 0.11 & 0.03 & ( 0.01 ) & * 0.001 * & 0.03 & ( 0.01 ) & 0.001 + scientist & 0.11 & 0.07 & ( 0.02 ) & 0.052 & 0.05 & ( 0.01 ) & 0.001 + artist & 0.10 & 0.07 & ( 0.03 ) & 0.130 & 0.04 & ( 0.01 ) & 0.001 + technician & 0.10 & 0.07 & ( 0.03 ) & 0.183 & 0.03 & ( 0.01 ) & 0.001 + programmer & 0.08 & 0.05 & ( 0.02 ) & * 0.025 * & 0.03 & ( 0.01 ) & 0.001 + engineer & 0.08 & 0.05 & ( 0.02 ) & * 0.034 * & 0.03 & ( 0.01 ) & 0.001 + marketing & 0.08 & 0.07 & ( 0.03 ) & 0.340 & 0.05 & ( 0.01 ) & 0.006 + writer & 0.08 & 0.06 & ( 0.02 ) & 0.122 & 0.03 & ( 0.01 ) & 0.001 + executive & 0.07 & 0.07 & ( 0.02 ) & 0.337 & 0.04 & ( 0.01 ) & 0.001 + administr . &",
    "0.05 & 0.04 & ( 0.02 ) & 0.367 & 0.02 & ( 0.01 ) & 0.001 + other & 0.04 & 0.04 & ( 0.01 ) & 0.483 & 0.02 & ( 0.00 ) & 0.002 +    [ query : aauwhwmggs ] average age of the users who have watched movies of a given genre is significant .",
    "[ stat : aauwhwmggs ] weighted average age of the users who have watched movies of the given genre .    the results of assessing hyp  [ query : aauwhwmggs ] are given in table  [ table : sign : query : aauwhwmggs ] .",
    "the empirical @xmath0-values of the queries depend largely on the type of randomization used . by randomizing the ages of the users ,",
    "that is , @xmath120 , the movies whose average age of watchers has originally been around 34 years are not significant .",
    "this makes sense when it is compared to the average of all users which is 34.1 years .",
    "notice that in the query the average is weighted by the number of movies watched by the user . thus randomizing the table au tests the connection between the ages and the users .",
    "other randomization points tell us that the results on western , romance , crime and fantasy are not significant , whereas the results on other genres are significant .",
    "thus the inner structure of the user@xmath105movie and movie@xmath105genre relations explain the results of our query .",
    "the average ages of the users of the genres with a star in table  [ table : sign : query : aauwhwmggs ] were significant with all types of randomizations .",
    "l*5@r & orig . &",
    "( au ) & ( um ) & @xmath121 & ( mg ) + film - noir * & 35.8 & 0.001 & 0.001 & 0.003 & 0.001 + documentary & 35.0 & * 0.134 * & 0.001 & 0.001 & 0.001 + mystery & 34.3 & * 0.197 * & 0.001 & 0.004 & 0.001 + war & 34.2 & * 0.308 * & 0.001 & 0.004 & 0.001 + drama & 34.1 & * 0.493 * & 0.001 & 0.001 & 0.001 + western & 33.8 & * 0.307 * & 0.001 & * 0.168 * & * 0.060 * + romance * & 33.4 & 0.024 & 0.001 & 0.039 & 0.002 + musical & 33.0 & 0.016 & * 0.253 * & * 0.469 * & * 0.257 * + crime & 32.6 & 0.001 & 0.001 & * 0.181 * & * 0.411 * + comedy * & 32.5 & 0.001 & 0.001 & 0.003 & 0.007 + thriller * & 32.2 & 0.001 & 0.001 & 0.003 & 0.004 + adventure * & 32.0 & 0.001 & 0.001 & 0.001 & 0.006 + fantasy & 32.0 & 0.002 & 0.001 & * 0.130 * & * 0.164 * + children s * & 31.8 & 0.001 & 0.001 & 0.002 & 0.001 + sci - fi * & 31.8 & 0.001 & 0.001 & 0.001 & 0.003 + action * & 31.7 & 0.001 & 0.001 & 0.001 & 0.001 + horror * & 31.1 & 0.001 & 0.001 & 0.001 & 0.001 + animation * & 30.9 & 0.001 & 0.001 & 0.004 & 0.002 +",
    "obviously , there is a large amount of statistical literature about hypothesis testing  @xcite . for the particular case of data mining , many papers work on the significance of association rules and other patterns  @xcite . in the recent years",
    ", the framework of randomizations has been introduced to the data mining community to test significance of patterns : the papers  @xcite deal with randomizations on binary data , and the work in  @xcite studies randomizations on real - valued data . for another type of approach to measuring @xmath0-values for patterns , see @xcite . a related work that studies permutations on networks and",
    "how this affects significance of patterns is  @xcite .",
    "sub - sampling methods such as bootstrapping  @xcite use randomization to study the properties of the underlying distribution instead of testing the data against some null - model . finally , database theory studies mainly query processing and optimization in different complex data  @xcite . to the best of our knowledge",
    "there is no work that directly addresses the problem presented in this paper .",
    "we have addressed the problem of assessing the significance of queries made for the exploratory analysis of relational databases .",
    "each query , together with the associated statistic , define the hypothesis to test on our data . our mathematical tool to decide the significance is via randomizations .",
    "it turns out that in multi - relational data there is no unique way to randomize .",
    "we propose to randomize tables occurring in the queries one at a time , and obtain a set of @xmath0-values for each randomization .",
    "each @xmath0-value tells what is the structural impact of the randomized table in the query .",
    "for example , if certain structures or patterns remain after the randomizations , the answers of a query that rely on such patterns should not be significant .",
    "experiments with synthetic data showed that for well defined significant patterns randomizations uncover which tables from our database are key in significance testing .",
    "for real datasets , we tested several hypothesis to show the usability of the method .",
    "still , we found out that in real data it is difficult to give a fully satisfactory answer about how to use all the obtained @xmath0-values to conclude the correct inference .",
    "our contribution makes an important first step towards understanding how the structure hidden in the data makes some hypotheses more significant than others , but still , a lot of interesting future work needs to be done : study of the combinatorial properties and its connection to the significance of queries and patterns ."
  ],
  "abstract_text": [
    "<S> many sorts of structured data are commonly stored in a multi - relational format of interrelated tables . under this relational model , exploratory data analysis can be done by using relational queries . as an example , in the internet movie database ( imdb ) a query can be used to check whether the average rank of action movies is higher than the average rank of drama movies .    </S>",
    "<S> we consider the problem of assessing whether the results returned by such a query are statistically significant or just a random artifact of the structure in the data . </S>",
    "<S> our approach is based on randomizing the tables occurring in the queries and repeating the original query on the randomized tables . </S>",
    "<S> it turns out that there is no unique way of randomizing in multi - relational data . </S>",
    "<S> we propose several randomization techniques , study their properties , and show how to find out which queries or hypotheses about our data result in statistically significant information . </S>",
    "<S> we give results on real and generated data and show how the significance of some queries vary between different randomizations . </S>"
  ]
}