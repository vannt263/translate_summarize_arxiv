{
  "article_text": [
    "vision based slam ( vslam ) is becoming an increasingly widely researched problem , partly because of its ability to produce good quality reconstructions with affordable hardware , and partly because of increasing computational power that results in computational affordability of huge optimization problems .",
    "while vslam systems are maturing and getting progressively complicated , the two main components remain camera localization ( or camera pose estimation ) and 3d reconstruction .",
    "generally , these two components precede an optimization based joint refinement of both camera pose and 3d structure , called bundle adjustment .        in urban environments , vslam is challenging particularly because of the presence of _ dynamic objects_. indeed , it is difficult to capture videos of a city without observing moving objects like cars or people .",
    "however , dynamic objects are a source of error in vslam systems , since the basic components of such algorithms make the fundamental assumption that the world being observed is static .",
    "while optimization algorithms are designed to handle random noise in observations , dynamic objects are a source of _ structured _ noise since they do not conform to models of random noise distributions ( like gaussian distributions , for example ) . to overcome such difficulties , ransac based procedures for camera pose estimation and 3d reconstruction have been developed in the past , which treat dynamic objects as outliers and remove them from the reconstruction process .    while successful attempts have been made to isolate and discard dynamic objects from such reconstruction processes ,",
    "there are several recent applications that _ benefit _ from _ reconstructions _ of such objects .",
    "for example , reconstructing dynamic urban traffic scenes are useful since traffic patterns can be studied to produce autonomous vehicles that can better navigate such situations . reconstructing dynamic objects are also useful in indoor environments when robots need to identify and avoid moving obstacles in their path  @xcite .        reconstructing dynamic objects in videos present several challenges .",
    "firstly , moving objects in images and videos have to be segmented and isolated , before they can be reconstructed .",
    "this in itself is a challenging problem in the presence of image noise and scene clutter .",
    "degeneracies in camera motion also prevent accurate motion segmentation of such objects .",
    "secondly , upon isolation , a separate vslam procedure must be initialized for _ each _ moving object , since objects like cars often move independent of each other and thus have to be treated as such . often moving objects like",
    "cars occupy only a small portion of the image space in a video ( figure  [ fig : pipeline1 ] ) , because of which dense reconstructions are infeasible since getting long accurate feature correspondence tracks for such objects is difficult .",
    "absence of large number of feature correspondences also hinders accurate estimation of the car s pose with respect to a world coordinate system .",
    "finally , such objects can not be reconstructed in isolation from the static scene , since optimization algorithms like bundle adjustment do not preserve contextual information like the fact that the car must move along a direction perpendicular to the normal of the road surface .    in this paper , we look at the problem of dynamic scene reconstruction .",
    "we present an end - to - end system that takes a video , segments the scene into static and dynamic components and reconstructs _ both _",
    "static and dynamic objects separately . additionally ,",
    "while reconstructing the dynamic object , we impose several novel constraints into the bundle adjustment refinement that deal with noisy feature correspondences , erroneous object pose estimation , and contextual information . to be precise",
    ", we propose the following contributions in this paper    * we use a _ new semantic motion segmentation _ algorithm using multi - layer dense crf which provides state - of - the - art motion segmentation and object class labelling .",
    "* we incorporate _ semantic contextual information _ like support relations between the road surface and object motion , which helps better localize the moving object s pose vis - a - vis the world coordinate system , and also helps in reconstructing them . * we describe a _ random sampling strategy _ that enables us to maintain the feasibility of the optimization problem in spite of the addition of a large number of variables .",
    "we evaluate our system on 4 challenging kitti urban tracking datasets captured using a stereo camera .",
    "we are able to achieve average relative error reduction by 41.58 % for one sequence based on absolute trajectory error ( ate ) for root mean square error relative to viso2  @xcite , while we get an improvement of 13.89 % relative to traditional bundle adjustment .",
    "this paper is organized as follows .",
    "we cover related work in section  [ sec : rw ] , and present a system overview in section  [ sec:3d ] .",
    "we describe process of motion segmentation using object class semantic constraints in section [ sec : sms ] .",
    "we track and initialize multiple moving bodies which we then optimize using a novel bundle adjustment in section [ sec : te ] .",
    "finally we show experimental results on challenging datasets in section  [ sec : exp ] , and conclude in section  [ sec : con ] .",
    "our system involves several components like semantic motion segmentation , dynamic body reconstruction using multibody slam , and trajectory optimization .",
    "we focus on each one of our components and draw references to relevant works in the literature in this section .",
    "dynamic body reconstruction is a relatively new development in 3d reconstruction with sparse literature on it .",
    "the few solutions in the literature can be categorized into decoupled and joint approaches .",
    "joint approaches like @xcite use monocular cameras to jointly estimate the depth maps , do motion segmentation and motion estimation of multiple bodies .",
    "decoupled approaches like @xcite @xcite have a sequential pipeline where they segment motion and independently reconstruct the moving and static scenes .",
    "our approach is a decoupled approach but essentially differs from other approaches , as we use a novel algorithm for semantic motion segmentation which is leveraged to obtain accurate localization of the moving objects through smoothness and planar constraints to give an accurate semantic map .",
    "semantics have been used extensively for reconstruction @xcite @xcite @xcite but havent been exploited in motion segmentation till recently  @xcite .",
    "generally , motion segmentation has been approached using geometric constraints  @xcite or by using affine trajectory clustering into subspaces  @xcite . in our approach",
    "we use motion _ along _ with semantic cues to segment the scene into static and dynamic objects , which allows us to work with fast moving cars , occlusions and disparity failure .",
    "we show a typical result of the motion segmentation algorithm in ( figure [ fig : pipeline1])(bottom left ) where each variable is labelled for both multi - variate semantic class and binary motion class .      in dynamic scenes , decoupled approaches",
    "have motion segmentation followed by tracking each independently moving object to perform vslam .",
    "traditional slam approaches with single motion model fail in such cases , as moving bodies cause reconstruction errors .",
    "our approach employs multi body vslam framework @xcite where we propose a novel trajectory optimization to with semantic constraints to show dense reconstruction results of moving objects .",
    "recent approaches to 3d reconstruction have either used semantic information in a qualitative manner  @xcite , or have only proposed to reconstruct indoor scenes using such information  @xcite .",
    "only yuan _",
    "et  al . _",
    "@xcite propose to add semantic constraints for reconstruction .",
    "while our approach is similar to theirs , they use strict constraints for motion segmentation without regard to appearance information whereas our approach works for more general scenarios as it employs a more powerful inference engine in the crf .",
    "we give an illustration of our system in figure  [ fig : pipeline ] .",
    "given rectified input images from a stereo camera , we first compute low level features like sift descriptors , optical flow ( using deepflow  @xcite ) and stereo  @xcite .",
    "these are then used to compute semantic motion segmentation , as explained in section  [ sec : sms ] .",
    "once semantic segmentation is done per image , we isolate stationary objects from moving objects and reconstruct them independently . to do this ,",
    "we connect moving objects across frames into tracks by computing sift matches on dense sift features  @xcite .",
    "then we perform camera resectioning using epnp  @xcite for stationary and icp for moving objects , to register their 3d points across frames .",
    "this is then followed by bundle adjustment with semantic constraints ( section  [ sec : te ] ) , where we make use of the semantic and motion labels assigned to the segmented scene to obtain accurate 3d reconstruction .",
    "we then fuse the stationary and moving object reconstructions using an algorithm based on the truncated signed distance function ( tsdf )  @xcite .",
    "finally , we transfer labels from 2d images to 3d data by projecting 3d data onto the images , and using a winner - takes - it - all approach to assign labels to 3d data from the labels of the projected points .",
    "in this section , we deal with the first module of our system . a sample result of our segmentation algorithm is shown in figure  [ fig : pipeline1 ] . with input images from a stereo camera ,",
    "we give an overview on how we perform semantic segmentation @xcite to first separate dynamic objects from the static scene .",
    "we combine classical semantic segmentation with a new set of motion constraints proposed in @xcite to perform semantic motion segmentation , that _ jointly _ optimizes for semantic and motion segmentation . while we give an overview of the formulation in this section , for brevity , methodologies used for training , testing and the rationale behind using mean field approximations is outlined in  @xcite .",
    "we do joint estimation of motion and object labels by exploiting the fact that they are interrelated .",
    "we formulate the problem as a joint optimization problem of two parts , object class segmentation and motion segmentation .",
    "we define a dense crf where the set of random variables @xmath0 corresponds to the set of all image pixels @xmath1 .",
    "let @xmath2 denote the neighbors of the variable @xmath3 in image space .",
    "any possible assignment of labels to the random variables will be called a labelling and denoted by @xmath4 .",
    "we define the energy of the joint crf as @xmath5 where @xmath6 is the joint unary potential and @xmath7 represents the joint pairwise potential .",
    "we describe these terms in brief in the next two sections .",
    "the joint unary potential @xmath6 is defined as an interactive potential term which incorporates a relationship between the object class and the corresponding motion likelihood for each pixel .",
    "each random variable @xmath3 = [ @xmath8,@xmath9 takes a label @xmath10 = [ @xmath11,@xmath12 , from the product space of object class and motion labels .",
    "the combined unary potential of the joint crf is @xmath13)= \\psi_i^o(x_i)+ \\psi_i^\\mathcal{m}(y_i ) + \\psi_{i ,",
    "l , m}^{o \\mathcal{m}}(x_i , y_i)\\end{aligned}\\ ] ] the object class unary potential @xmath14 describes the cost of the pixel taking the corresponding label and is computed using pre - trained models of color , texture and location features for each object as in @xcite .",
    "the new motion class unary potential @xmath15 is given by the motion likelihood of the pixel and is computed as the difference between the predicted and the measured optical flow .",
    "the measured flow is computed using dense optical flow . the predicted flow measures",
    "how much the object needs to move given its depth in the current image and assuming it is a stationary object .",
    "objects deviating from the predicted flow are likely to be dynamic objects .",
    "it is computed as @xmath16 where k is the intrinsic camera matrix , r and t are the translation and rotation of the camera respectively and z is the depth  @xcite .",
    "x is the location of the pixel in image coordinates and @xmath17 is the predicted flow vector of the pixel given from the motion of the camera .",
    "thus the unary potential is now computed as @xmath18 where @xmath19 is the sum of the covariances of the predicted and measured flows as shown in @xcite , & @xmath20 represents the difference of the predicted flow and measured flow .",
    "the object - motion unary potential @xmath21 incorporates the object - motion class compatibility and can be expressed as @xmath22 where @xmath23 $ ] is a learnt correlation term between the motion and object class label .",
    "@xmath21 helps in incorporating the relationship between an object class and its motion ( for example , trees and roads are stationary , but cars move ) .",
    "we use a piecewise method for training the label and motion correlation matrices using the modified adaboost framework  @xcite , as described in  @xcite .",
    "the joint pairwise potential @xmath24 enforces the consistency of object and motion class between the neighboring pixels .",
    "we compute the joint pairwise potential as @xmath25,[x_j , y_j ] ) =   \\psi_{ij}^o(x_i , x_j )   + \\psi_{ij}^\\mathcal{m}(y_i , y_j )   \\ ] ] where we disregard the joint pairwise term over the product space .",
    "the object class pairwise potential takes the form of a potts model @xmath26 where @xmath27 is given as the standard pairwise potential as given in @xcite .",
    "the motion class pairwise potential @xmath28 is given as the relationship between neighboring pixels and encourages the adjacent pixels in the image to have similar motion label .",
    "the cost of the function is defined as @xmath29 where @xmath30 is an edge feature based on the difference between the flow of the neighboring pixels ( @xmath31 ) & @xmath32 is returns the flow of the corresponding pixel .",
    "we follow krahenbuhl et al @xcite to perform inference on this dense crf using a mean field approximation . in this approach",
    "we try to find a mean field approximation @xmath33 that minimizes the kl - divergence @xmath34 among all the distributions @xmath35 that can be expressed as a product of independent marginals , @xmath36 .",
    "we can further factorize @xmath35 into a product of marginals over multi - class object and binary motion segmentation layer by taking @xmath37 . here",
    "@xmath38 is a multi - class distribution over the object labels , and @xmath39 is a binary distribution over moving or stationary classes ( @xmath40 ) .",
    "we compute inference separately for both the layers i.e object class layer and motion layer  @xcite .",
    "the motion segmented images of the static world and moving objects are then used as input to localize and map each object independently . in this section ,",
    "we propose a novel framework for trajectory computation for static or moving objects from a moving platform .",
    "the below process is carried out for all the moving objects and the camera mounted vehicle .",
    "let us introduce some preliminary notations for trajectory computation .",
    "the extrinsic parameters for frame @xmath41 are the rotation matrix @xmath42 and the camera center @xmath43 relative to a world coordinate system .",
    "then the translation vector between the world and the camera coordinate systems is @xmath44 = -@xmath45 .",
    "[ [ trajectory - initialization ] ] * trajectory initialization * + + + + + + + + + + + + + + + + + + + + + + + + + + +    we initialize the motion of each object separately using sift feature points .",
    "sift feature points are tracked using dense optical flow between consecutive pair of frames .",
    "key points with valid depth values are used in a 3-point - algorithm within a ransac framework to find the robust relative transformation between pairs of frames .",
    "we obtain pose estimates of the moving object in the world frame by chaining the relative transformations together in succession .    for moving objects the initial frame k where detection occurs",
    "is taken as the starting point .",
    "trajectory estimates are then initialized for each object independently corresponding to the frame k assuming the camera is static .",
    "[ [ d - object - motion - estimation ] ] * 3d object motion estimation * + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    once 3d trajectories are estimated for each object independently , we need to map these trajectories onto the world coordinate system .",
    "since , we are dealing with stereo data and for every frame we have 3d information , this mapping can be represented as simple coordinate transformations . also , since we are not dealing with monocular images , the problem of relative scaling can be avoided .",
    "given the pose of the real camera in the @xmath46 frame ( @xmath47 ) and virtual camera @xmath48  @xcite computed during trajectory initialization described earlier , we should be able to compute the pose of the @xmath49 object @xmath50 relative to its original position in the first frame in the world coordinate system .",
    "the object rotation @xmath51 and translation @xmath52 are given as @xmath53 thus we get the localization and sparse map of both the static and moving world .",
    "we found this approach to object motion estimation to be better on both small and long sequences than viso 2  @xcite .",
    "once 3d object motion and structure initialization has been done , we need to refine the structure and motion using bundle adjustment ( ba ) . in this section , we describe our framework for ba to refine the trajectory and sparse 3d point reconstruction of dynamic objects along with _",
    "several novel _ constraints added to ba that increase the accuracy of our trajectories and 3d points .",
    "we term these constraints _ semantic or contextual",
    "_ constraints since they represent our _ understanding _ of the world in a geometric language , which we use to effectively optimize 3d points and trajectories in the presence of noise and outliers .",
    "the assumptions underlying these constraints derive from _ commonly _ observed _ shape _ and _ motion _ traits of cars in urban scenarios .",
    "for example the normal constraints follow the logic that the motion of a dynamic object like a vehicle is always on a plane ( the road surface ) and hence constrained by its normal .",
    "similarly , the 3d points on a dynamic object are constrained to lie within a 3d `` box '' since dynamic objects like cars can not be infinitely large .",
    "finally , our trajectory constraints encode the fact that dynamic objects have smooth trajectories , which is often true in urban scenarios . in summary",
    ", we try to minimize the following objective function @xmath54 where @xmath55 represents the 2d ba reprojection error ( @xmath56x_p\\vert ^2 $ ] ) , @xmath57 represents the 3d registration error common in optimization over stereo images ( @xmath58x_p\\vert ^2 $ ] ) and @xmath59 represent various optimization terms that can be seen as imposed constraints on the resulting shape and trajectories as explained below . here",
    "@xmath60 indexes into images , and @xmath61 represents variables in the camera coordinate system , with other quantities being expressed in the world coordinate system . also , @xmath62 represents pixels visible in image @xmath60 .",
    "we constrain motion to be perpendicular to the ground plane where the ground plane normal is found from the initial 3d reconstruction of the ground .",
    "@xmath63 where @xmath64 is the normal of the ground plane , @xmath65 is the direction of translation in the world coordinate system . since 3d reconstruction of the ground can be noisy , estimation of @xmath64",
    "is done using least squares .",
    "alternatively , we could follow a ransac based framework of selecting @xmath66 top hypotheses for the normal @xmath67 ( @xmath68 ) , and allow bundle adjustment to minimize an average error of the form @xmath69      we enforce smoothness in trajectory , a valid assumption for urban scenes , by constraining camera translations in consecutive frames as @xmath70 where @xmath71 are the 3d translations at frame k and k-1 .",
    "alternatively , we could also minimize the norm between two consecutive translations unlike @xmath72 , which only penalizes direction deviations in translation .",
    "@xmath73      depth estimation of objects like cars are generally noisy because their surface is not typically lambertian in nature , and hence violates the basic assumptions of brightness constancy across time and viewing angle .",
    "furthermore , noise in depth infuses errors into the estimated trajectory through the trajectory initialization component . to improve the reconstruction accuracy in such cases , and to limit the destructive effect that noisy depth has on object trajectories , we introduce shape priors into the ba cost function that essentially constrains all the 3d points belonging to a moving object to remain with a `` box''.kitti more",
    "specifically , let @xmath74 be two 3d points on a moving object @xmath75 .",
    "for every such pair of points on the object , we define the following constraint    @xmath76    where @xmath77 is a vector of bounds with individual components ( @xmath78 ) and @xmath79 is a vector of positive values .",
    "note that the above equation is defined for every pair of points on the object , which leads to a _",
    "quadratic explosion _ of terms since @xmath77 is a separate variable for each pair .",
    "[ [ alternate - formulations ] ] * alternate formulations * + + + + + + + + + + + + + + + + + + + + + + + +    one way to reduce the explosion would be to reduce the number of variables added because of the box constraints to ba",
    ". this could be done by alternatively minimizing the following terms instead of the constraint in equation  ( [ eqn : origbox ] ) @xmath80 where @xmath81 in equation  ( [ eq : bc2 ] ) is a scalar common to all 3 dimensions , @xmath82 ( equation  ( [ eq : bc3 ] ) ) is a @xmath83 vector common to all point pairs , and @xmath84 ( equation  ( [ eq : bc4 ] ) ) is a scalar common to all pairs and dimensions .",
    "[ [ alternate - minimization - strategies ] ] * alternate minimization strategies * + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    it is now known that a lot of information in terms like @xmath85 above are redundant in nature  @xcite , and there is essentially a small  subset  of pairs which is sufficient to produce optimal or near - optimal results in such cases .",
    "however , it is not clear how to pick this small subset . here , we take the help of the johnson - lindenstrauss theorem and its variants  @xcite , to select a random set of pairs from the ones available , such that we closely approximate the @xmath86 error when all the point pairs are used .",
    "more specifically , the terms expressed in @xmath85 can all be expressed in the form @xmath87 where @xmath88 is a concatenation of all 3d points , and @xmath82 is a collection of all car bounds .",
    "the matrix @xmath89 is constructed in such a way that each row of @xmath89 consists of only two non - zero elements at the @xmath90 and @xmath91 positions with values @xmath92 and @xmath93 respectively , and they represent the difference @xmath94 .",
    "note that the dimensions of @xmath89 are of the order @xmath95 , where @xmath96 is the number of 3d points .",
    "notice that for @xmath97 , @xmath98 is approximately @xmath99 million , and is highly slow to optimize ! to reduce this computational burden , we embed the above optimization problem in a randomly selected subspace of considerably lower dimension , with the guarantee that the solution obtained in the subspace is close to the original problem solution with high probability . to do this ,",
    "we draw upon a slightly modified version of the _ affine embedding _ theorem presented in  @xcite which states    for any minimization of the form @xmath100 , where @xmath89 is of size @xmath101 and @xmath102 , there exists a _ subspace embedding matrix _",
    "@xmath103 where @xmath104 such that @xmath105 moreover , the matrix @xmath106 of size @xmath107 is designed such that each column of @xmath106 has only 1 non - zero element at a randomly chosen location , with value @xmath92 or @xmath93 with equal probability .    note that since elements of @xmath106 are randomly assigned 1 or -1 , the above transformation can not be exactly interpreted as a random sampling of pairs of points .",
    "however for the sake of implementation simplicity , we ",
    "@xmath106 to a random selection matrix .",
    "as we show later , empirically we get very satisfying results",
    ".    there can be several strategies to select random pairs of points for box constraints .",
    "we experimented with the following in this paper .",
    "* @xmath108 : randomly select pairs from the available set . *",
    "@xmath109 : randomly select one point , and create its pair with the 3d point that is farthest from the selected point in terms of euclidean distance . *",
    "@xmath110 : randomly select one point , and sort other points in descending order based on euclidean distance with selected point . pick the first point from the list that has not been part of any pair before .",
    "once the proper set of constraints are selected from the above choices , the final objective function in equation  [ eqn : baopt ] is minimized with @xmath111 norm using ceres solver . @xcite .",
    "in this section we provide extensive evaluation of our algorithms on both synthetic and real data . for real datasets",
    ", we have used the kitti tracking dataset for evaluation of the algorithm as the ground truth for localization of moving objects per camera frame is available .",
    "it consists of several sequences collected by a perspective car - mounted camera driving in urban , residential and highway environments , making it a varied and challenging real world dataset .",
    "we have taken four sequences consisting of 30 , 212 , 30 , 100 images for evaluating our algorithm .",
    "we choose these 4 sequences as they pose serious challenges to the motion segmentation algorithm as the moving cars lie in the same subspace as the camera .",
    "these sequences also have a mix of multiple cars visible for short duration along with cars visible for the entire sequence which allows us to test the robustness of our localization and reconstruction algorithms on both short and long sequences ."
  ],
  "abstract_text": [
    "<S> image based reconstruction of urban environments is a challenging problem that deals with optimization of large number of variables , and has several sources of errors like the presence of dynamic objects . </S>",
    "<S> since most large scale approaches make the assumption of observing static scenes , dynamic objects are relegated to the noise modeling section of such systems . </S>",
    "<S> this is an approach of convenience since the ransac based framework used to compute most multiview geometric quantities for static scenes naturally confine dynamic objects to the class of outlier measurements . </S>",
    "<S> however , reconstructing dynamic objects along with the static environment helps us get a complete picture of an urban environment . </S>",
    "<S> such understanding can then be used for important robotic tasks like path planning for autonomous navigation , obstacle tracking and avoidance , and other areas .    in this paper </S>",
    "<S> , we propose a system for robust slam that works in both static and dynamic environments . to overcome the challenge of dynamic objects in the scene </S>",
    "<S> , we propose a new model to incorporate _ </S>",
    "<S> semantic constraints _ into the reconstruction algorithm . while some of these constraints are based on multi - layered dense crfs trained over appearance _ as well as motion cues _ </S>",
    "<S> , other proposed constraints can be expressed as additional terms in the bundle adjustment optimization process that does iterative refinement of 3d structure and camera / object motion trajectories . </S>",
    "<S> we show results on the challenging kitti urban dataset for accuracy of motion segmentation and reconstruction of the trajectory and shape of moving objects relative to ground truth . </S>",
    "<S> we are able to show average relative error reduction by a significant amount for moving object trajectory reconstruction relative to state - of - the - art methods like viso 2@xcite , as well as standard bundle adjustment algorithms . </S>"
  ]
}