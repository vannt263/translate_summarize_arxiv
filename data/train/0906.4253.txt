{
  "article_text": [
    "suppose you have a die sitting on a table . instead of just looking at the number on the top of the die ,",
    "pay attention to the location of the numbers on all six sides .",
    "now you pick it up and roll it so that it occupies the same place on the table it did before .",
    "how many ways could you have done this so that none of the 6 numbers are in the same place ?        rolling a die so that it occupies the same place it did before it was rolled gives a _ direct isometry _ of the cube , i.e. , a geometric transformation realizable in 3 dimensions that fixes the cube .",
    "then our question becomes :    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ how many direct isometries of the cube are _ derangements _ of the faces of the cube ?",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    how many additional derangements do you get if you allow yourself to turn your cube inside out ( allowing an indirect isometry via a roll through 4-dimensional space ) ? generalizing , if you have an @xmath0-dimensional hypercube , then the same question makes sense , although it s a bit harder to buy one and actually roll it .",
    "we ll need a few important facts about isometries in @xmath0 dimensions .",
    "every isometry can be written as a composition of reflections through hyperplanes .",
    "an isometry is direct if it can be written as a composition of an even number of reflections , otherwise , it is indirect ( as with products of transpositions in symmetric groups , this is well - defined ) .",
    "further , a direct isometry is orientation preserving , while an indirect isometry reverses orientation .",
    "the composition of two reflections is a rotation , provided the hyperplanes corresponding to those reflections intersect .",
    "this will always be the case with the isometries we consider here since we will be considering isometries of regular solids whose centers will always be fixed .",
    "the total number of isometries of an @xmath0-cube is @xmath1  see chapters 5 and 7 of coxeter s classic @xcite for a guide to understanding the geometry of these isometries .",
    "half of these are direct and half are indirect .",
    "we now have several questions at hand :    * how many of the @xmath1 isometries are derangements of the ( @xmath2)-dimensional faces ( also called facets ) of the @xmath0-cube ? * how many of these facet derangements are direct and how many are indirect ? * what if our die is not a cube ( or hypercube ) ?",
    "in particular , what are the counts for a die shaped as an @xmath0-dimensional simplex ?    the answers will lead us to integer sequences that have been studied before in several contexts , as well as to two new sequences .",
    "in particular , the sequences associated with the direct and indirect facet - derangements of the @xmath0-cube do not appear in sloane s online encyclopedia of integer sequences ( oeis , @xcite ) .",
    "these problems lie at the intersection of three fields : combinatorics , geometry and algebra .",
    "our philosophy is mathematically inclusive here .",
    "derangements are typically studied in combinatorics classes , where they provide a good example of inclusion - exclusion .",
    "students need to take a class in abstract algebra to see even and odd permutations .",
    "finally , isometries of euclidean space might appear in a geometry class emphasizing transformations .",
    "but no one class typically presents all three topics coherently .",
    "derangements of faces of different dimensions of the cube have been studied before . in @xcite ,",
    "chen and stanley derive explicit generating functions that count derangements of the vertices , edges and 2-dimensional faces for an @xmath0-cube ; the number of isometries that _ do _ fix at least one vertex is given by an especially attractive formula : @xmath3 . chen and",
    "zhang study the _ excedance _ of a signed permutation in @xcite and @xcite , and chen , tang and zhao @xcite generalize this approach to derangement _",
    "polynomials_. in a different direction , shareshian and wachs give an interesting connection to combinatorial topology in @xcite , where theorem 6.2 shows that the number of facet derangements of the @xmath0-cube is the dimension of the reduced homology of the order complex of a certain poset .",
    "most of the material we present here is known , but our approach seeks to unify the combinatorics , algebra and geometry .",
    "this paper is organized as follows : in section [ s : dsimp ] , we begin with a treatment of ordinary derangements from combinatorial , geometric and algebraic viewpoints .",
    "section [ s : dcube ] generalizes the entire approach from section [ s : dsimp ] to the hypercube .",
    "this gives us a ` new ' combinatorics problem ( we call it the _ coatcheck problem _ , generalizing the hatcheck problem for ordinary derangements ) , and ( what we believe to be ) a new recursion for the facet derangements for the @xmath0-cube .",
    "we also present several known formulas for the number of facet derangements , with proofs that use ideas from combinatorics ( inclusion - exclusion ) and linear algebra ( signed permutation matrices ) .",
    "section [ s : orient ] studies the partition of the facet derangements of the ( @xmath2)-simplex and the @xmath0-cube into direct and indirect isometries .",
    "this is where the connections to geometry are deepest , and where some very pretty relations are developed .",
    "the geometry of 3 dimensions gives us a chance to test our geometric intuition , so section [ s:3d ] describes these isometries and derangements in some detail .",
    "we conclude by offering a few suggestions for further study in section [ s : future ] .",
    "one of the standard problems in a combinatorics class asks the following question :    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ * hatcheck problem : * @xmath0 people check their hats at the beginning of a party .",
    "how many ways can the hats be returned later so that no one gets their own hat back ? _",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    slightly more modern versions might involve returning cell phones to students after an exam , or designing a cryptoquote so that no letter stands for itself ( usually called a _ substitution cypher _ ) in the coded message .    permutations of @xmath4 with no fixed points are called _",
    "derangements_. the following formula counting derangments can be found in every combinatorics book in the section that introduces _ inclusion - exclusion _ as a counting technique . if @xmath5 denotes the number of derangements on an @xmath0-element set , then @xmath6    from the formula , we get @xmath7",
    ". you can give any explanation you like for what happens when no people check their hats , as long as you get the answer 1 .",
    "this formula has a very attractive probabilistic consequence : if the hats are randomly returned to the party - goers , then the probability that no one receives their own hat is approximately @xmath8 .",
    "when @xmath0 is large , this probability is ( essentially ) independent of @xmath0 , which is surprising ( unless you already know this , in which case it is nt ) .",
    "the number of derangements for @xmath9 is given in table [ t : derange ] .",
    "note that the ratio @xmath10 agrees with @xmath11 to 4 decimals .",
    "@xmath5 & 1 & 0&1&2&9&44&265&1854 + @xmath12    ' '' ''    & 1 & 0 & 0.5 & @xmath13 & 0.375 & @xmath14 & @xmath15 & @xmath16 +    [ t : derange ]    we end this preliminary discussion with one more formula  a very useful recursion for @xmath5 that we ll refer to later :    @xmath17    the proof of this recursion follows from partitioning the derangements into those in which 1 participates in a 2-cycle and those in which 1 is in a longer cycle .",
    "a proof can be found in @xcite , for instance .",
    "our first goal is to interpret derangements geometrically , as derangements of the facets ( or vertices ) of the @xmath18-simplex .",
    "recall the @xmath18-simplex is formed by joining @xmath0 affinely independent points in @xmath19 , so the 2-simplex is a triangle in the plane , the 3-simplex is a tetrahedron in 3-space , and so on .",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ * geometric interpretation : * a derangement on @xmath20 corresponds to an isometry in @xmath19 of the regular @xmath18-simplex in which every one of the @xmath0 facets is moved .",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    why does this work ?",
    "first , the full symmetry group ( including both direct and indirect isometries ) of the regular @xmath18-simplex is the symmetric group @xmath21 .",
    "the group is usually thought of as acting on the @xmath0 vertices of the simplex , but since every facet has a unique vertex it does not touch , a permutation moves a vertex if and only if it moves the ` opposing ' facet .",
    "thus , for our purposes , we will think of @xmath21 as acting on the facets of the @xmath18-simplex .    in 2 dimensions ,",
    "a simplex is an equilateral triangle in the plane .",
    "there are only two kinds of isometries possible : rotations ( direct ) and reflections ( indirect ) .",
    "this group of isometries is easy to visualize via the six edge permutations of the triangle .",
    "the correspondence between the isometries and the permutations is given in fig .",
    "[ f : triangles ] .",
    ", width=288 ]    which of these are derangements ?",
    "the two rotations @xmath22 and @xmath23 derange the edges , and the remaining four permutations fix at least one edge , so @xmath24 , as we saw earlier .    in 3 dimensions ,",
    "we need to add one more isometry to our tool kit : _",
    "rotary reflections_. these can be hard to visualize - they correspond to compositions of reflections and rotations .",
    "for some fun ( and a good exercise in geometric visualization ) , try to figure out the geometry of the facet derangements in 3 dimensions .",
    "you should get the following :    * for the regular tetrahedron , there are 9 derangements : 3 of these are rotations and the remaining 6 are rotary reflections .",
    "much more information about the geometry of isometries in 3 dimensions  and some very attractive pictures  appears in section [ s:3d ] .",
    "feel free to skip ahead .",
    "in section [ s : dsimp ] , we saw that ordinary derangements correspond to isometries of a regular @xmath18-simplex in which no ( @xmath2)-dimensional facet is fixed . to generalize this to facet derangements of hypercubes , we need to modify the hatcheck problem :    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ * couples coatcheck problem * this time , @xmath0 _ couples _ each check their two coats at the beginning of a party ; the attendant puts a couple s coats on a single hanger .",
    "the coats are returned at the end of the party in the following way : when a couple arrives to get their coats , the ( lazy ) attendant picks an arbitrary hanger and then hands one of those coats to one person in the couple and the other coat to the other ( again , arbitrarily ) .",
    "how many ways can the coats be returned so that no one gets their own coat back ? _",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    if no one receives their own coat , we ll say we have a _ c - derangement _ ( where ` c ' stands for ` coat ' or ` couple ' or ` cube ' ) .",
    "evidently , there are two ways the people in a couple could fail to receive their own coats : either the pair of coats belonging to that couple was given to another couple , or the couple did receive their own coats , but the coats were swapped between the two partners .    as before ,",
    "we begin by interpreting this combinatorial problem geometrically .    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ * geometric interpretation : * a c - derangement corresponds to an isometry in @xmath25 of the hypercube in which no ( @xmath26-dimensional facet is fixed .",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    why is this true ?",
    "first , note that there are @xmath1 ways to return the coats with no restrictions :    * first , permute the @xmath0 hangers in @xmath27 ways ; * next , hand the coats back to the two members of each couple in @xmath28 ways .",
    "but this is precisely the number of isometries of the @xmath0-dimensional hypercube :    * first , permute the @xmath0 facets around a given vertex in @xmath27 ways ; * next , swap or do nt swap each pair of opposite facets in @xmath28 ways .",
    "let s introduce some notation : let @xmath29 denote the regular @xmath0-dimensional hypercube .",
    "the @xmath30 people are represented by the @xmath30 symbols @xmath31 , where @xmath32 is the @xmath33 couple .",
    "then the @xmath30 facets of @xmath29 correspond precisely to the @xmath30 people in the coatcheck problem , with the couple @xmath32 corresponding to that pair of opposite facets in the hypercube .",
    "it should now be clear that moving all the facets of @xmath29 is equivalent to deranging the coats .",
    "( unlike the connection between ordinary derangements and the simplex , deranging vertices is _ not _ the same as deranging facets . in figure",
    "[ f : sq ] , you can locate a c - derangement of the square that is not a vertex derangement , and then find a vertex - derangement that s not a c - derangement . )    a 2-dimensional cube is a square , and its facets are the 4 bounding edges . among the 8 symmetries of a square ( which form the dihedral symmetry group @xmath34 ) , there are 5 c - derangements , pictured in figure [ f : sq ] .",
    "the original square is in the upper left .",
    "the other two squares in the top row arise from reflections through the diagonals of the square , and the 3 squares in the bottom row of the figure arise from rotations .        as with the simplex , the geometry is fun to explore in 3 dimensions .",
    "we return to this ( in great detail ) in section [ s:3d ] . for now , though , see if you can determine which isometries of the cube are derangements . as a check , you should get the following :    * for the cube , there are 29 derangements : 14 rotations and 15 rotary reflections .",
    "we are ready to derive some formulas for the number of c - derangements .",
    "let @xmath35 be the number of c - derangements of @xmath36 .",
    "as in the ordinary derangement case , we can find a formula for @xmath35 using inclusion - exclusion .",
    "this formula is listed for sequence a000354 in the oeis @xcite , but the interpretation in terms of c - derangements is not mentioned there .    [ t : numder ] the number @xmath35 of c - derangements of the facets of @xmath29 is given by @xmath37    first , place the @xmath0-dimensional hypercube so that one vertex is at the origin and the opposite vertex is at the point @xmath38 .",
    "then @xmath29 has @xmath0 facets with one vertex at the origin , and we need only consider what happens to those facets to determine what happens to all the facets of @xmath29 .",
    "we use inclusion - exclusion .",
    "the number of c - derangements will be the total number of isometries of @xmath29 , minus the number that fix at least one facet , plus the number that fix at least 2 facets , etc .",
    "the number of isometries of @xmath29 that fix at least 0 facets is just the total number of isometries of @xmath29 , that is , @xmath39 . to fix @xmath40 ( or more ) facets",
    ", we choose those @xmath40 in @xmath41 ways , and then consider the number of automorphisms of the rest , which is @xmath42 .",
    "this gives the formula .",
    "note that a consequence of this formula is that @xmath43 .",
    "again , you can figure out what that means yourself . also notice that this formula guarantees that @xmath35 is always odd : every term in equation [ eq : cderange ] is even except for the term corresponding to @xmath44 .",
    "we ll see two more proofs of this fact later ",
    "pay attention .",
    "as with ordinary derangements , we can use this result to get a nice probabilistic interpretation . rewriting the above formula as @xmath45 gives us the following :    _ _",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ in the coatcheck problem , the probability that no one receives their own coat approaches @xmath46 as the number of couples increases .",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    table [ t : cderange ] gives the number of c - derangements for @xmath9 . when @xmath47 , the approximation to @xmath48 is accurate to 5 decimals",
    "this series converges faster than the series for @xmath49 that gave the number of ( ordinary ) derangements , as you would expect from the taylor series error estimate .",
    "@xmath50    ' '' ''    & 1 & 1&5&29 + @xmath51    ' '' ''    & 1 & 0.5 & 0.625 & @xmath52 + @xmath0&4&5&6&7 + @xmath50    ' '' ''    & 233&2329&27,949&391,285 + @xmath51    ' '' ''    & @xmath53 & @xmath54 & @xmath55 & @xmath56 +    [ t : cderange ]    there is another formulation for @xmath50 that we like .",
    "we can express @xmath50 with a sum that uses the ordinary derangements @xmath57 .",
    "the proof uses signed permutation matrices , which will be important for us in section [ s : orient ] when we consider the orientation of a c - derangement , i.e. , whether the c - derangement corresponds to a direct or an indirect isometry of the hypercube .",
    "[ p : numder ] the number of c - derangements of the facets of @xmath29 is @xmath58    situate @xmath29 so that all its vertices are located at the points @xmath59 .",
    "then the centers of the facets are @xmath60 , where @xmath61 is the @xmath33 standard basis vector in @xmath25 .",
    "now any isometry of @xmath29 sends the facet corresponding to @xmath61 to another facet @xmath62 .",
    "thus , an isometry can be identified with a _ signed permutation matrix _ , a permutation matrix with with entries @xmath63 .",
    "( there are clearly @xmath64 such matrices . )",
    "now let @xmath65 be a signed permutation matrix that corresponds to a facet derangement .",
    "then there are no 1 s on the main diagonal of @xmath65 .",
    "( an entry of @xmath66 along the main diagonal corresponds to sending a facet to its opposite . )",
    "it remains to count the number of such matrices .",
    "suppose @xmath65 has @xmath40 0 s along its main diagonal",
    ". then the remaining @xmath67 diagonal entries must be @xmath66 s .",
    "we can view the action of @xmath65 on @xmath29 as follows : @xmath65 fixes the @xmath67 facet pairs corresponding to the @xmath66 s on the diagonal ( swapping the facets within each such pair ) , and @xmath65 deranges the remaining @xmath40 facet pairs .",
    "we can choose the @xmath40 facet pairs to derange in @xmath68 ways , then derange those pairs in @xmath57 ways .",
    "but there are two choices for each such pair : if the pair @xmath69 is sent to @xmath70 , then either @xmath71 ( and so @xmath72 ) , or @xmath73 ( so @xmath74 ) .",
    "thus , the total number of c - derangement signed permutation matrices having @xmath40 0 s on their diagonals is just @xmath75 .",
    "the formula follows by summing over @xmath40 .",
    "one way to visualize the derivation of equation ( [ eq : cderange3 ] ) is suggested by figure [ f : hf ] . in the figure , assume that two pairs of opposite facets of a 5-dimensional cube are interchanged , so @xmath76 and @xmath77 , corresponding to two @xmath66 s on the main diagonal of the signed permutation matrix .",
    "then the two facet pairs @xmath78 and @xmath79 are ` shrunk , ' leaving a 3-cube .",
    "that cube will then have its pairs of opposite faces deranged in @xmath80 ways ( since we do nt allow opposite faces to be interchanged ) , and then pairs of opposite sides can be oriented in @xmath81 ways .",
    "a generalization of equation ( [ eq : cderange3 ] ) appears in @xcite , where spivey and steil define the _ rising @xmath40-binomial transform _ of a sequence @xmath82 to be @xmath83 then the sequence @xmath35 is the rising 2-binomial transform of the sequence @xmath57 . the explicit connection to c - derangements does not appear in that paper , however .",
    "the following recursion generalizes the recursion for ordinary derangements given in equation ( [ eq : derangerecursion ] ) .",
    "the recursion appears to be new .",
    "it also gives an inductive proof that @xmath50 is always odd ( our second proof of this fact ) .",
    "[ p : crecursion ] for @xmath84 satisfies : @xmath85    this proof is modeled on the proof of equation  ( [ eq : derangerecursion ] ) . that proof partitions derangements into 2 classes : those in which @xmath86 is interchanged with some @xmath87 and those in which @xmath86 is in a cycle of length greater than 2 . for c - deragements",
    ", we have an additional case arising from the fact that a pair @xmath78 can be fixed but swapped and additional complications because there are multiple ways to send @xmath78 to @xmath79 .",
    "there are three cases to consider for c - derangements .",
    "case 1 : :    the pair @xmath88 is fixed by the c - derangement . in this    case ,",
    "@xmath86 and @xmath89 must be swapped and the    remaining @xmath2 pairs are c - deranged .",
    "this gives a total    of @xmath90 c - derangements .",
    "( this case does not    appear in the proof of the ordinary derangement recursion    ( [ eq : derangerecursion ] ) . )",
    "case 2 : :    the pair @xmath88 is swapped with some other pair    @xmath91",
    ". there are @xmath2 choices for the    @xmath91 pair , and then there are 4 ways to swap the    pairs @xmath88 and @xmath91 : ( 1 )    @xmath92 ,    @xmath93 ; or ( 2 )    @xmath94 ,    @xmath95 ; or ( 3 )    @xmath96 ;    or ( 4 )    @xmath97 .    +    the remaining @xmath98 pairs can be c - deranged in    @xmath99 ways .",
    "this gives a total of    @xmath100 c - derangements .",
    "case 3 : :    1 is in a cycle of length greater than 2 .",
    "if    @xmath101 , then by assumption ,    @xmath102 and @xmath103 .",
    "there are @xmath2 choices for @xmath40 , and there are    2 ways to send @xmath88 to @xmath91 . since    @xmath104 , where    @xmath105 , we can simply replace    @xmath91 by either @xmath88 or    @xmath106 , depending on how @xmath88 mapped    to @xmath91 in the original c - derangement .",
    "this gives us    a c - derangement on @xmath2 pairs with the additional    restriction that the pair @xmath88 is not mapped to    itself .",
    "( this restriction is a consequence of the fact that we ca nt    send @xmath91 to @xmath88 . )",
    "+    how many of the @xmath90 derangements require that    @xmath88 not be sent to itself ?",
    "the number of    c - derangements of @xmath2 pairs in which one pair _ is _ sent    to itself is @xmath99 ( this is just case 1 for the    remaining @xmath2 pairs ) . thus",
    ", the final total in this case    is @xmath107 derangements .",
    "these three cases give that @xmath108 , as desired .",
    "notice that @xmath109 and the values you get from the recursion depend on the ( somewhat disturbing ) fact that @xmath110 .",
    "as we ve seen , isometries can be either direct or indirect , depending on whether they can be expressed as a product of an even or odd number of reflections , resp .",
    "the direct isometries of a simplex correspond to even permutations of @xmath111 , and the indirect ones correspond to odd permutations",
    ".    for the facet derangements of a simplex , here s what we have seen so far : for the triangle , both derangements are rotations , and so are direct isometries . for the regular tetrahedron , there are 9 derangements : 3 rotations ( direct ) and 6 rotary reflections ( indirect ) .",
    "see section [ s:3d ] for a full explanation for the tetrahedron .",
    "we let @xmath112 denote the number of direct derangements of the facets of an @xmath18-simplex and @xmath113 denote the number of indirect derangements .",
    "table [ ta : evenodd ] gives the values of @xmath114 and @xmath113 for @xmath9 .",
    ".number of even and odd derangements for @xmath115 [ cols=\"^,^,^,^,^,^,^,^\",options=\"header \" , ]     [ ta : evenoddcube ]    [ c : evenoddcderange ] let @xmath116 and @xmath117 denote the number of direct and indirect c - derangements of @xmath29 resp",
    ". then @xmath118 and @xmath119 .    the sequences @xmath116 and @xmath117 appear to be ` new ' in the sense they are not ( currently ) in the oeis @xcite .",
    "time for some fun .",
    "if , like most humans , you have trouble visualizing objects in 4 or more dimensions , then you can start by looking at some low dimensional examples , and then try to generalize .",
    "this sounds easier than it is , but , for the simplex and hypercube symmetries , it s extremely valuable .",
    "an interesting discussion about the power of analogy appears in section 7 - 1 of @xcite .      for a bounded solid in @xmath120 , there are three kinds of isometries we need to consider : rotations , reflections and _ rotary reflections_. rotary reflections are operations that correspond to combining a rotation and a reflection .",
    "it is possible to have a rotary reflection where neither the rotation nor the reflection involved is itself a symmetry of the object ; when this happens , the rotary reflection is called _ irreducible_.     rotation , a @xmath121 rotation and a reflection.,title=\"fig:\",width=412 ] ( a ) identity .3 in ( b ) @xmath122 rotation .2 in ( c ) @xmath121 rotation .2 in ( d ) reflection    the tetrahedron has 24 symmetries corresponding to the 4 ! permutations of @xmath123 . as isometries , these can be broken into the following categories .    * direct isometries * * the identity i , which is clearly not a derangement ; * * the 8 rotations with axis through a vertex and the center of the opposite facet as in figure [ f : tetra2](b ) .",
    "these order 3 rotations are through angles of @xmath122 or @xmath124 and correspond to face permutations of the form @xmath125 .",
    "these are not derangements ; * * the 3 @xmath121 rotations with axis through the centers of two opposite edges as in figure [ f : tetra2](c ) .",
    "they have face permutations @xmath126 and so are derangements .",
    "* indirect isometries * * the 6 reflections with mirror plane containing one edge of the tetrahedron as in figure [ f : tetra2](d ) .",
    "these have face permutations of the form @xmath127 , so they are nt derangements ; * * the 6 rotary reflections , with face permutation form @xmath128 as in figure [ f : tetra1 ] .",
    "these are derangements .",
    "it s worth investigating more closely how the rotary reflections operate .",
    "the following step - by - step guide should help you create any of the 6 rotary reflections on your own tetrahedron .",
    "1 .   cut the tetrahedron through the plane containing the centers of four edges ( take all edges except two that do not share a vertex ) .",
    "this cuts the tetrahedron into two congruent pieces that get glued back along a square .",
    "( you now have a tricky little puzzle . )",
    "rotate the entire tetrahedron @xmath129 about an axis perpendicular to the square cross - section .",
    "this is _ not _ an isometry of the tetrahedron .",
    "3 .   reflect the tetrahedron through the plane containing the square .",
    "this is also not an isometry of the tetrahedron .     .15 in original .75 in @xmath129 rotation .65 in reflection    you did nt really need to cut your tetrahedron into two pieces after all , but you do need to identify the square cross - section . the rotation involved is ` half ' of one of our @xmath121 edge - rotations from figure [ f : tetra2](c ) .",
    "the resulting rotary reflection is irreducible . as mentioned above",
    ", this rotary reflection induces the face permutation @xmath128 , a 4-cycle",
    ". this should nt be too surprising , as the square from the cross - section meets each of the four faces , and we are rotating around this square .",
    "now we turn our attention to the ordinary 3-dimensional cube .",
    "there are @xmath130 isometries of a cube :    * direct isometries * * the identity , which is not a c - derangement ; * * eight rotations of 120@xmath131 and 240@xmath131 through the 4 pairs of opposite vertices as pictured in [ f : c1](a ) .",
    "these are c - derangements ; * * six @xmath121 rotations through the centers of opposite edges as pictured in [ f : c1](b ) .",
    "these are also c - derangements ; * * nine rotations through the centers of opposite faces . these are not c - derangements .",
    "* indirect isometries * * nine reflections : three through the plane containing the centers of four parallel edges and six through opposite edges .",
    "none of these are c - derangements ; * * fifteen rotary reflections : central inversion ( pictured in figure [ f : c2](a ) ) ; six reducible ones through an axis through centers of opposite sides ( pictured in figure [ f : c2](b ) ) and eight irreducible ones through an axis through two opposite vertices ( pictured in figure [ f : c2](c ) ) .",
    "these are c - derangements .",
    "note that 14 of the 29 c - derangements are direct , while 15 are indirect . in both figure",
    "[ f : c1 ] and figure [ f : c2 ] , opposite facets have the same pattern , but in different sizes .",
    "notice also that the direct isometries preserve the orientation of the cube ( so you perform these isometries with a die ) , while the indirect ones reverse the orientation of the cube ( so you d need a mirror - image die to perform them ) .",
    "@xmath132{cuberot1 } & \\includegraphics[width=2.15in]{cuberot2 }   \\end{array}$ ] ( a ) rotate through opposite vertices ( b ) rotate through opposite edge centers    the indirect c - derangements are all rotary reflections , which are , again , a bit harder to picture .",
    "central inversion always corresponds to a c - derangement ( see figure [ f : c2](a ) ) , but it s an indirect isometry in 3-dimensions . it can be realized either as the composition of 3 mutually perpendicular reflections or by a rotary reflection in a variety of ways , as we will see shortly .",
    "we now examine the 14 remaining rotary reflections in a bit more detail . in figure",
    "[ f : c2](b ) , you can see the rotary reflection formed as a composition of a rotation of 90@xmath131 or 270@xmath131 around an axis through the center of two opposite sides followed by a reflection through the plane perpendicular to that axis at its midpoint .",
    "there are 3 of those axes so there are 6 such rotary reflections , all of which are reducible .",
    "( notice that if you do this same rotary reflection with a rotation of 180@xmath131 , you get central inversion ) .",
    "@xmath133{cubeind1 } & \\includegraphics[width=1.5in]{cubeind2 } & \\includegraphics[width=1.6in]{cubeind3 } \\end{array}$ ] ( a ) central inversion ( b ) axis through side centers ( c ) diagonal axis    in figure [ f : c2](c ) , you can see the last kind of rotary reflection , which is irreducible : a rotation of 60@xmath131 or 300@xmath131 around an axis through two opposite vertices followed by a reflection through the plane perpendicular to that axis .",
    "since there are 4 pairs of opposite vertices , this gives 8 distinct isometries .",
    "( once again , central inversion arises from a rotation of 180@xmath131 followed by reflection . )",
    "these can be quite challenging to picture , since the initial rotation does not align the cube with itself .",
    "figure [ f : crr ] breaks an irreducible rotary reflection down to help with visualization .",
    "there are two more interesting aspects of this kind of rotary reflection .",
    "first , it gives a 6-cycle on the faces of the cube .",
    "second , the plane perpendicular to the axis of rotation cuts the cube into two congruent pieces , forming ( as a cross section ) a regular hexagon that passes through each of the 6 sides of the cube .",
    "it is well worth locating these hexagons on an actual cube !",
    "showing students the two pieces ( after having them guess about what kinds of polygons could be formed as cross sections when slicing a cube ) usually elicits some surprised looks .",
    "we conclude with a few ideas for projects that can help solidify some of the ideas from this paper .    1",
    ".   in the proof of theorem [ t : evenoddcube ] , signed permutation matrices give a bijection between the direct and indirect isometries ( excluding central inversion ) . as a warm - up , find this bijection explicitly for the 14 direct and 14 indirect ( again , excluding central inversion ) c - derangements of the cube .",
    "( to do this , you will need to number the six faces of your cube @xmath134 and then use this numbering to refer to your c - derangements . ) 2 .",
    "study the vertex , edge and face derangements for the remaining platonic solids .",
    "we ve covered the faces ( and the vertices ) for the tetrahedron , and we ve done the faces of the cube ( and therefore , the vertices of its dual , the octahedron ) .",
    "we havent considered the faces of the octahedron , and we ve completely ignored the icosahedron and its dual , the dodecahedron . determining the vertex , edge or facet derangement numbers for these solids is a good exercise in geometric visualization .",
    "+ the symmetry group of the icosahedron is @xmath135 , so there are 120 isometries to consider . counting the direct and indirect vertex ,",
    "edge and face derangements is also a good exercise . for extra credit ,",
    "describe the 45 rotary reflections explicitly in this case .",
    "3 .   there are 6 regular solids in 4 dimensions : the 4-simplex , the hypercube the hyperoctahedron , the 24-cell , the 120-cell , and the 600-cell .",
    "all of the same questions make sense here : * find the number of vertex , edge , 2-dimensional and 3-dimensional face derangement numbers for the 24-cell and the 120-cell .",
    "( by duality , derangements for the 120-cell and the 600-cell are the same , where the vertex derangements for the 120-cell are the same as the 3-dimesional facet derangements for the 600-cell , and so on . ) * for each class of derangements , count the direct and indirect isometries , as above . + the 24-cell has 1152 isometries and the 120-cell ( and 600-cell ) has 14,400 . in dimensions 5 and higher ,",
    "there are only 3 regular solids : the @xmath0-simples , the @xmath0-cube its dual , the @xmath0-dimensional hyperoctahedron .",
    "see @xcite for descriptions of these symmetry groups .",
    "extend this approach to general root systems .",
    "in particular , the exceptional root systems @xmath136 and @xmath137 are very important families of vectors that display lots of symmetry .",
    "how many isometries move all the vectors in the root system ? much more about root systems can be found in @xcite ."
  ],
  "abstract_text": [
    "<S> derangements are a popular topic in combinatorics classes . </S>",
    "<S> we study a generalization to face derangements of the @xmath0-dimensional hypercube . </S>",
    "<S> these derangements can be classified as odd or even , depending on whether the underlying isometry is direct or indirect , providing a link to abstract algebra . </S>",
    "<S> we emphasize the interplay between the geometry , algebra and combinatorics of these sequences , with lots of pretty pictures .    </S>",
    "<S> = 1 </S>"
  ]
}