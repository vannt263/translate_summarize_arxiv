{
  "article_text": [
    "in order to cope with the challenging lhc - like running environment of high event rates , high number of channels , limited processing time and limited storing capability , the data acquisition system ( daq ) of the helsinki silicon beam telescope ( sibt )  @xcite was rebuilt .",
    "the sibt device is operated by helsinki institute of physics at the cern h2 beam line .",
    "it is used to measure tracks of incoming particles with high resolution to offer reference tracks to the cern cms subdetector systems for testing their detectors at the h2 beam .",
    "the sibt is based on position sensitive silicon detectors attached to appropriate readout electronics and daq .",
    "fig .  [ fig_sibtdaq_setup ] shows the schematical layout of the sibt setup .",
    "the sibt apparatus consists of eight single - sided silicon microstrip detector planes .",
    "the detectors with 1024 p+ strips are processed on n - type float zone silicon wafers that are 300 @xmath0 m thick .",
    "the width of the strips is 14 @xmath0 m and pitch 55 @xmath0 m giving a total detector area of 5.6 @xmath1 5.6 @xmath2  @xcite .",
    "each silicon detector is glued and bonded on a hybrid containing 8  va1 readout chips .",
    "the eight detectors are installed as four pairs orthogonal to the beam axis .",
    "every pair consists of one detector with strips positioned horizontally and another with strips positioned vertically .",
    "the aluminum housings , which enclose the detector hybrids , are attached on aluminum forks that are mounted on an optical precision bench consisting of a 492 mm long brass rail sitting on top of a granite block .    during the summer",
    "2002 tests , a muon beam of the energy of 225 gev was used to study the performance of the sibt and a new czochralski type silicon detector .",
    "each silicon detector has a separate front - end electronics unit consisting of 8 daisy - chained va1 readout chips and a repeater card .",
    "each va1 chip has 128 identical channels with a charge sensitive amplifier , a shaper and a track - and - hold circuitry in each .",
    "the output of each detector is multiplexed and activated by the output shift register using a clock signal of 6 mhz .",
    "the readout chips of a hybrid are controlled from the counting room .",
    "the controls cable has a 50-pin flat cable connector that is connected to the protective housing to a repeater card mounted on an additional rail next to the detector housings .",
    "each repeater card contains four voltage regulators to supply the readout chips and a high - speed differential i / o amplifier to buffer and amplify the balanced analog output signal .",
    "line receivers and analog and digital circuits control the readout electronics and set the necessary working parameters for both the detector and the va1 chips .",
    "in addition , the repeater card has an efficient protection circuit against breakdown damage in latch - up conditions .",
    "all supply voltages are cut off sharply , if one of the input power lines fail to work .",
    "mounted before the first and after the last detector are two standard plastic scintillators attached to photomultiplier tubes that are shielded against a magnetic field of up to 1 t. the photomultiplier signals are shaped and put through a coincidence unit in the counting room and the resulting trigger signal is sent back to the repeater cards to activate the readout modules .",
    "the trigger signal starts the readout sequence simultaneously on each of the eight repeater cards .",
    "analog delay is added to the trigger signal to achieve optimum charge collection time in the detectors .",
    "the triggering system is protected against events that are very close to each other by vetoing any additional trigger signals that should occur while the repeater cards are busy reading the last event .",
    "the dead time for reading one event using a 6 mhz clock on the repeater cards and taking into account cable delays is 172 @xmath0s .",
    "the readout of the detectors is controlled from the counting room using standard commercially available vme - based technology .",
    "a commercial 8-channel vme adc card sis3300 with 12-bit resolution is used to digitize the analog signals from the repeater cards .",
    "the eight repeater cards are connected through equally long coaxial cables to the adc .",
    "a ninth cable is used to send the clock pulse of one of the repeater cards to the adc to trigger the sampling .",
    "the adc samples simultaneously all the eight channels . it is operated in asynchronous clock mode , in which the 6 mhz clock pulse of the repeater cards activates the taking of one sample simultaneously from all channels at the 100 mhz internal clock rate .",
    "each channel has an independent adc circuit and the data of each channel pair is combined as one 32-bit word and pushed via pipeline into a 128 ksample sdram memory bank .",
    "the adc can thus store 128 events containing data of the 1024 channels of a single detector .",
    "there are two equal size memory banks on the adc for each channel pair to allow operation in circular buffer mode . in circular buffer mode the active bank is automatically switched to the empty bank once the active bank has become full and data taking can resume without any delay and thus no additional dead time is caused .",
    "the adc provides automatically a time stamp for each event with respect to the first event in the bank with a time resolution of its internal clock .",
    "the blocks of 128 events are thus internally synchronized with high precision and therefore , to achieve overall synchronization of the events , only the first event of the block needs to be synchronized with the accelerator time frame .",
    "the daq is equipped with time stamping capabilities to ensure the synchronizability of the events with other experiments using the same testbeam facility .",
    "a fast commercial vme scaler unit is used to provide time stamps for the first event in the adc bank .",
    "the 100 mhz internal clock of the adc is used to provide the count , which is synchronized to the accelerator hardware by resetting the count at one second before the spill starts . in the future",
    "it is planned to use a custom - built multi - daq card specially designed for high accuracy and reliable event timing .",
    "the vme crate is controlled with a commercial vme - pci interface card sis3100 .",
    "it uses a gigabit optical link ( gol ) to transmit data via an optical fiber between the daq pc and the vme crate .",
    "the interface is also equipped with 512 mb of sdram and a programmable sharc circuit , which could be used to process the signals .",
    "the optical link has , however , proven to be sufficiently fast at the current daq speeds for pushing the data directly from the vme - bus into the memory of the daq - pc without storing it to the memory of the interface card .",
    "the interface card also includes three digital input and output channels , which are used to give information for the daq pc about the phase of the accelerator .",
    "because the accelerator cycle consists of a spill period , during which particles are extracted to the test beam area , and an idle period , during which new particles are accelerated and other beams are served , it is logical to divide the daq operation into two operation cycles . when particles are passing through the detector and thus producing data during spill cycle ,",
    "the daq is concentrating only on reading the new data in order to maximize the number of events that are read .",
    "this raw event data is further processed and stored on a hard drive during the idle period while waiting for new data .    the key challenge that the structure of the daq software faces is the fact that large amounts of data have to be read and processed reliably in real time .",
    "usually , the amount of data that needs to be transferred to a pc is reduced by using pipelined programmable circuits inside the vme crate . because no fast enough commercial modules were available ,",
    "a custom built vme card or a large number of costly adc modules would have been needed .",
    "the gol of the vme - pci interface was found to have a high enough data transfer rate to allow the transfer of all the raw data to the memory of the pc with minimal performance losses . this way the data processing is more reliable as the whole process can be monitored on the pc and the physics cuts on the data",
    "may be altered in real time .",
    "the daq software is realized using c++ object orientated techniques on a pc equipped with a 1200 mhz amd athlon processor and running cern redhat linux 7.1 .",
    "the uml diagram of the software is shown in fig .",
    "[ fig_sibtdaq_uml ] .",
    "the raw data is stored as a vector of daqeventtrain objects each containing four 128k long arrays of 32-bit unsigned integers and 128 32-bit time stamps thus providing storage for a total of 128 events .",
    "each daqeventtrain object further contains a vector of 128 daqrawevent objects .",
    "the daqrawevent objects contain pointers to the data that is in the daqeventtrain object and the data can thus be accessed from both the daqeventtrain and daqrawevent objects .",
    "the pedestal and noise calibration data for the individual detector channels are stored into the daqstripdata object and accessed directly from the events during processing .",
    "the detector channels are labeled dead or noisy if the noise level is outside certain user - defined thresholds and the user may also deliberately mark known channels to be ignored .",
    "the daqstatistics object contains information on how the selection process is working , what percentage of channels is passing through each selection level and what are the efficiencies for having at least one hit on a detector plane per event .",
    "more detailed information about the quality of data and the behavior of the detector planes is stored into the daqhistogram object , which is an interface to the histo - scope histogramming package .",
    "the histograms may be viewed online , but it does significantly slow down the daq operation .    data concerning the operation and status of the daq are stored into daqruncontrol and daqstatusword objects .",
    "the memory space of the vme crate is accessed via a c - based driver that is controlled through the daqvmeinterface object .    in order to retain real time operation ,",
    "the memory of the whole data structure is dynamically allocated from the memory of the pc as the software is started .",
    "thus no time consuming memory allocation needs to be conducted during the operation of the software .",
    "the drawback is that large amounts of memory are required , as a spill cycle length of 4.8 seconds requires about 360 mb of memory for the raw data .",
    "once the accelerator hardware provides a pre - spill signal one second before the spill starts , the software prepares to start reading the data and arms the hardware .",
    "once the spill is on , the software keeps checking , whether an adc bank has been filled with data .",
    "if an adc bank is full , the software reads the sample data , which has been stored into four memory banks , each containing the data of two channels .",
    "[ fig_sibtdaq_flow ] shows the flow of the reading sequence .",
    "the data is read to the actual daqeventtrain object in four blocks of 128 ksamples of 32-bit data via the vme - pci interface using 2evme cycles .",
    "previous data is overwritten .",
    "additionally , the adc - internal time stamp register of the events is read .",
    "the speed of the reading process is optimized by minimizing the number of blocks to be read , since in this way the number of time - costly interrupts on the vme bus can be minimized .",
    "once the reading of the blocks is complete , the bank full flag of the adc is cleared and the software waits for the first event to arrive in order to catch its time stamp .",
    "the reading sequence repeats this pattern until the spill is over . to maximize the number of events that can be read , the software does not answer any user commands during the reading sequence .",
    "the data structure of the software allows the data to be accessed either on a single event basis or as blocks of 128 events .",
    "this is crucial for the performance of the software , because this structure allows the software optimization of both reading and processing the data .",
    "the reading of the data is at its fastest , if the data can be read in as large blocks as possible from the vme - bus thus minimizing the number of time consuming vme interrupts . on the other hand , if the events can be accessed on a single event basis during processing , several if - clauses are rendered obsolete and valuable processing time is saved .    in order to process the data efficiently without compromising the physical performance ,",
    "three different selection levels are imposed on the data . on the average ,",
    "99.6 % of the raw data is just electronical noise , which has to be filtered out of the data of maximally @xmath3 samples ( 360 mb ) during 10.9 seconds . in order to complete this task ,",
    "three selection levels are imposed on the data .    for each strip @xmath4 of each detector a long term average pedestal @xmath5 is modeled using an iir filter described by @xmath6 where @xmath7 , @xmath8 the raw data value and @xmath9 is the current event .",
    "additionally , the noise @xmath10 of each strip approximating the standard deviation is calculated with @xmath11 where @xmath12 . in the first selection level , the raw data value",
    "is compared to its corresponding old pedestal value @xmath13 if this criterion is nt matched , the strip is discarded . with this simple and fast rejection",
    "50 % of the noise is rejected . only if the criterion is passed , the new pedestal and noise values are calculated for the strip .",
    "this method can be safely used , because the noise distribution of the pulse height spectrum is symmetrical around zero .",
    "the second selection level enhances the first selection level by demanding , that a certain constant level of pedestal @xmath14 individually specifiable for each detector plane is exceeded @xmath15 this criterion can be used to reject a further 80 - 90 % of the remaining noise and thus additional processing time is saved before a more elaborate and exact cut is made on the data .",
    "once the second selection level has been passed , the signal @xmath16 is calculated by subtracting the noise and pedestal from the raw data : @xmath17 the third selection level is defined as @xmath18 where @xmath19 is a small constant set to avoid dead strips and @xmath20 is usually set to 4.5 in order to make approximately a 4.5 @xmath21 cut on the signal .",
    "if the third selection level is passed , the actual strip and its neighboring left and right strips are selected to make a cluster and they are saved with all their data values to disk .",
    "the events are attached with header information describing the run , spill and event numbers as well as the time stamp to allow offline synchronization with data of other experiments .",
    "the size of saved data during one spill cycle amounts on the average to 6.5 mb for 22800 events including the event header information .",
    "the flow of the processing sequence is shown in fig .",
    "[ fig_sibtdaq_flow ] .",
    "the daq software is operated via a graphical user interface ( gui ) that has been created with c++ using the qt package  @xcite .",
    "the gui has direct access via pointers to all the objects of the daq software and thus it does nt need any additional objects to propagate the data .",
    "the gui is updated and its requests are executed only when the program is not busy . therefore , during the reading and processing periods , the gui is neither updated nor responding to user actions in order to provide the maximum amount of cpu resources to the more important tasks .",
    "user actions are executed in the idle time after the processing has been finished and while the daq is waiting for the next spill .",
    "the user may conveniently define data collection and processing parameters through the gui as well as monitor the performance of the separate detectors and individual detector channels . a light histogram package histo - scope is integrated into the gui to allow monitoring of the detector hardware and data quality .",
    "the histogrammer is however intended for slow data taking , as it will considerably slow down the processing .",
    "the discrete jumps at the edge of each 128 channels are caused by different levels in the readout chips.,width=302 ]     with a small @xmath14 .",
    "the darker shades of gray show the distribution of the pulses for data that has been reconstructed to belong to tracks.,width=302 ]    the modeling of the detector channel properties with a fast algorithm is essential , because the channels have to be continuously calibrated .",
    "[ fig_sibtdaq_czped ] shows that the pedestal modeling is functioning well for the detector channels .",
    "it is noticeable that there are discrete transitions after every 128 nels , because of the different noise levels in the va1 amplifier chips on the detectors .",
    "the noise filtering was found to work excellently using the three - step selection levels .",
    "[ fig_sibtdaq_selcz ] shows the pulse height distribution recorded for the cz - detector .",
    "it displays in arbitrary units how the signal ( dark gray tones ) is cleanly extracted using the cut of the selection levels and the offline track fitting parameters from the total data ( light gray ) .",
    "most of the noise is already cut away before the figure and thus the noise does nt peak around zero adc counts and the difference between 6 and 7 hits is accounted for one faulty detector while one detector was completely taken away from the setup .",
    "the plot shows that it is possible to use a fast algorithm based on selection levels even at high event rates without compromising with the physical content of the data .    to test the highest sustainable event rate with the current combination of hardware and software ,",
    "a sequential trigger was fed to the system .",
    "the average event rate that the daq was able to cope with was measured to be @xmath22 khz .",
    "the novel czochralski type silicon detector was tested using the new daq by replacing one of the older detectors with the cz - module .",
    "the efficiency of the detector was measured to be 95 % , the resolution about 10 @xmath0 m , and the signal to noise ratio about 10 .",
    "the results show that it is possible to construct an efficient and accurate data acquisition system for a challenging lhc - like environment of high event rates , high number of channels , limited processing time and limited storage capability .",
    "it has been shown that it is possible to build and successfully operate a daq system fulfilling these criteria using the c++ programming language and object orientated techniques on a linux platform by using sophisticated yet fast selection techniques and optimization based on software architecture .",
    "the authors wish to thank dragoslav lazic and the cms hcal group for their valuable technical support and excellent collaboration at the h2 beamline at cern .",
    "the authors also wish to thank dr .",
    "m.  kirsch and struck innovative systeme gmbh for excellent customer support and assistance in using their vme modules ."
  ],
  "abstract_text": [
    "<S> we have developed a novel data acquisition system for measuring tracking parameters of a silicon detector in a particle beam . </S>",
    "<S> the system is based on a commercial analog - to - digital vme module and a pc linux based data acquisition system . </S>",
    "<S> this daq is realized with c++ code using object - oriented techniques . </S>",
    "<S> track parameters for the beam particles were reconstructed using off - line analysis code and automatic detector position alignment algorithm .    </S>",
    "<S> the new daq was used to test novel czochralski type silicon detectors . </S>",
    "<S> the important silicon detector parameters , including signal size distributions and signal to noise distributions , were successfully extracted from the detector under study . </S>",
    "<S> the efficiency of the detector was measured to be 95 % , the resolution about 10 @xmath0 m , and the signal to noise ratio about 10 . </S>"
  ]
}