{
  "article_text": [
    "let @xmath3 be the distance from the point @xmath4 to the nearest integer .",
    "takagi s function is defined by @xmath5 it is continuous but nowhere differentiable ( takagi @xcite , hildebrandt @xcite , de rham @xcite , billingsley @xcite ) , though it does possess an infinite derivative at many points ( see allaart and kawamura @xcite or krppel @xcite for a precise characterization ) .    in recent years",
    ", there has been a great deal of interest in the level sets @xmath6 : t(x)=y\\ } , \\qquad y\\geq 0\\ ] ] of the takagi function restricted to the unit interval .",
    "kahane @xcite had already shown in 1959 that the maximum value of @xmath0 is @xmath7 , and that @xmath8 is the set of all @xmath9 $ ] whose binary expansion @xmath10 satisfies @xmath11 for all @xmath12 .",
    "this is equivalent to saying that the quarternary expansion of @xmath4 contains only @xmath13 s and @xmath14 s . as a result",
    ", @xmath8 is a cantor set of hausdorff dimension @xmath15 .",
    "surprisingly , however , a more general study of the level sets of @xmath0 was not undertaken until fairly recently , when knuth @xcite published an algorithm for generating solutions of the equation @xmath2 for rational @xmath1 .",
    "( it is however not known whether his algorithm always halts . )",
    "buczolich @xcite showed , among other things , that almost all level sets of @xmath0 ( with respect to lebesgue measure ) are finite . shortly afterwards",
    ", maddock @xcite proved that the hausdorff dimension of any level set is at most @xmath16 , and conjectured an upper bound of @xmath15 .",
    "this upper bound was very recently verified by de amo et al .",
    "lagarias and maddock @xcite introduced the concept of a _ local level set _ to prove a number of new results .",
    "for instance , they showed that @xmath17 is countably infinite for a dense set of @xmath1-values ; that the _ average _ cardinality of all level sets if infinite ; and that the set of ordinates @xmath1 for which @xmath17 has strictly positive hausdorff dimension is of full hausdorff dimension 1 .",
    "combined with the result of buczolich , these results sketch a complex picture of the totality of level sets of the takagi function .    in a related paper by the present author @xcite ,",
    "shorter proofs are given for some of the above - mentioned results and the level sets are examined from the point of view of baire category .",
    "one of the main results is that the typical level set of @xmath0 is uncountably large , thus providing a further contrast with buczolich s theorem .",
    "while thus far , most of the research has focused on the sizes of the infinite level sets ( both in terms of cardinality and hausdorff dimension ) , the present article aims to give new insight in the cardinalities of the _ finite _ level sets of @xmath0 .",
    "we investigate in detail the set of ordinates @xmath1 for which @xmath17 has precisely two elements , and show that this is the most common possibility .",
    "we then show that every positive even number occurs as the size of some level set of @xmath0 , and examine which even numbers occur with positive probability if an ordinate @xmath1 is chosen at random from @xmath18 $ ] .",
    "the paper is organized as follows .",
    "section [ sec : prelim ] introduces notation and recalls some important facts about the takagi function , including its functional equation and partial self - similarity .",
    "section [ sec : set - equation ] shows that the level sets satisfy a system of set equations , which are fundamental to the results in this paper . from the set equations",
    ", we immediately obtain simple linear relationships between the cardinalities of level sets at various levels .",
    "section [ sec : two - elements ] deals with those level sets having exactly two elements . from the fundamental set equations of section [ sec : set - equation ]",
    "we quickly obtain a precise characterization of the set @xmath19 of ordinates @xmath1 such that @xmath20 . however , the condition is in general difficult to check , so we give several easier to verify conditions which are either sufficient or necessary for membership in @xmath19 .",
    "next , we show that the lebesgue measure of @xmath19 is between @xmath21 and @xmath22 . from a probabilistic point of view , this means that if an ordinate @xmath1 is chosen at random in the range @xmath18 $ ] , the probability that @xmath20 is more than @xmath23 , or @xmath24 , but less than @xmath25 , or @xmath26 .",
    "in particular , @xmath14 is the most common cardinality of level sets of @xmath0 in the sense of measure . to end the section",
    ", we introduce the _ takagi expansion _ of a point @xmath1 in",
    "@xmath18 $ ] , based on the notation developed in section [ sec : two - elements ] , and use it to give a simple iterative procedure for solving the equation @xmath2 .",
    "we also point out a direct connection between takagi expansions and the local level sets of lagarias and maddock @xcite .    in section [ sec :",
    "even - cardinalities ] we show that every positive even number occurs as the cardinality of some ( in fact , uncountably many ) level sets of @xmath0 .",
    "we conjecture that the lebesgue measure of the set @xmath27 : |l(y)|=2n\\}$ ] is positive for each @xmath28 , but are able to prove this only for the case when @xmath28 is either a power of @xmath14 , or the sum or difference of two powers of @xmath14 .",
    "in this paper , @xmath29 will always denote cardinality ; the diameter of a set @xmath30 will be denoted by @xmath31 .",
    "we first recall some known facts about the takagi function , and introduce important notation .",
    "one of the foremost tools for analyzing the takagi function is its functional equation  see , for instance , hata and yamaguti @xcite or kairies et al .",
    "@xcite .",
    "[ lem : fe ]    \\(i ) the takagi function is symmetric about @xmath32 : @xmath33$}. \\label{eq : symmetry}\\ ] ]    \\(ii ) the takagi function satisfies the functional equation @xmath34    it is well known , but not needed here , that @xmath0 is also the unique bounded solution of .",
    "next , we define the _ partial takagi functions _ @xmath35 each function @xmath36 is piecewise linear with integer slopes . in fact , the slope of @xmath36 at a non - dyadic point @xmath4 is easily expressed in terms of the binary expansion of @xmath4 .",
    "we define the binary expansion of @xmath37 by @xmath38 with the convention that if @xmath4 is dyadic rational , we choose the representation ending in all zeros . for @xmath39 ,",
    "let @xmath40 denote the excess of @xmath41 digits over @xmath13 digits in the first @xmath42 binary digits of @xmath4 .",
    "then it follows directly from that the slope of @xmath36 at a non - dyadic point @xmath4 is @xmath43 .    the first part of the following definition is taken from lagarias and maddock @xcite .",
    "[ def : balanced ] a dyadic rational of the form @xmath44 is called _ balanced _ if @xmath45 .",
    "if there are exactly @xmath28 indices @xmath46 such that @xmath47 , we say @xmath4 is a balanced dyadic rational of _ generation _ @xmath28 . by convention",
    ", we consider @xmath48 to be a balanced dyadic rational of generation @xmath41 .",
    "the next lemma states in a precise way that the graph of @xmath0 contains everywhere small - scale similar copies of itself .",
    "let @xmath49 denote the graph of @xmath0 over the unit interval @xmath50 $ ] .",
    "[ lem : similar - copies ] let @xmath51 , and let @xmath52 be a balanced dyadic rational .",
    "then for @xmath53 $ ] we have @xmath54 in other words , the part of the graph of @xmath0 above the interval @xmath55 $ ] is a similar copy of the full graph @xmath56 , reduced by a factor @xmath57 and shifted up by @xmath58 .",
    "this follows immediately from the definition , since the slope of @xmath59 over the interval @xmath55 $ ] is equal to @xmath60 , and @xmath61 .",
    "[ def : humps ] for a balanced dyadic rational @xmath62 as in lemma [ lem : similar - copies ] , define @xmath63 , \\qquad j(x_0)=t(i(x_0)),\\\\ k(x_0)=i(x_0)\\times j(x_0),\\\\ h(x_0)=\\mathcal{g}_t\\cap k(x_0).\\end{gathered}\\ ] ] by lemma [ lem : similar - copies ] , @xmath64 is a similar copy of the full graph @xmath65 ; we call it a _ hump_. its height is @xmath66 , and we call @xmath67 its",
    "_ order_. by the _ generation _ of the hump @xmath64 we mean the generation of the balanced dyadic rational @xmath68 .",
    "a hump of generation @xmath13 will be called a _ first - generation hump_. by convention , the graph @xmath65 itself is a hump of generation @xmath41 .",
    "if @xmath69 for every @xmath70 , we call @xmath64 a _ leading hump_. see figure [ fig : humps ] for an illustration of these concepts .",
    "in this section we establish a system of set equations for the level sets @xmath17 . these equations , which describe the complex relationships between the level sets at various levels ,",
    "hold the key to later results .",
    "we shall need the following notation .    first , define for @xmath71 the affine maps @xmath72 and @xmath73    next , for ease of notation , let @xmath74 observe that @xmath75 , and thereafter @xmath76 is strictly decreasing in @xmath42 .",
    "define intervals @xmath77 ,",
    "\\qquad\\mbox{and}\\qquad i_k:=[t_k , t_{k-1 } ) , \\quad k\\geq 3,\\ ] ] and note that @xmath18=\\{0\\}\\cup \\bigcup_{k=2}^\\infty i_k$ ] . define mappings @xmath78\\to [ 0,\\infty)$ ] by @xmath79 for @xmath80 , where @xmath81 denotes the characteristic function of the set @xmath30 .",
    "let @xmath82 , and let @xmath83 denote the @xmath28-fold iteration of @xmath84 , with @xmath85 .",
    "note that @xmath84 maps @xmath86 onto @xmath18 $ ] . for @xmath87",
    ", we have @xmath88 so @xmath84 maps @xmath89 onto @xmath90 . as a result",
    ", @xmath84 is a surjective self - map of @xmath18 $ ] which maps @xmath91 onto itself .    finally , define a map @xmath92 by @xmath93    [ thm : fundamental - equation ] for @xmath94 , let @xmath95 : t(x)=y\\}=l(y)\\cap[0,\\tfrac12].\\ ] ]    \\(i ) for all @xmath1 , @xmath96 , \\label{eq : set - equation1}\\ ] ] where the union is disjoint except when @xmath97 .",
    "\\(ii ) for @xmath98 ( @xmath87 ) , we have @xmath99\\cup\\bigcup_{j=0}^\\infty g_{k , j}\\left[l(4^j\\phi(y))\\right ] , \\label{eq : set - equation2}\\ ] ] where the union is completely disjoint except when @xmath100 .",
    "\\(iii ) for @xmath101 , @xmath102 , \\label{eq : set - equation3}\\ ] ] with the union disjoint except when @xmath97 .",
    "theorem [ thm : fundamental - equation ] , which is proved at the end of this section , has the following immediate consequence for the cardinalities of the level sets of @xmath0 .",
    "[ cor : cardinality ] ( i ) for each @xmath1 , @xmath103    \\(ii ) if @xmath98 for @xmath87 , then @xmath104    \\(iii ) if @xmath101 , then @xmath105    it is well known",
    "( e.g. ( * ? ? ?",
    "* theorem 6.1 ) ) that @xmath106 is countably infinite .",
    "thus , and take the form @xmath107 for @xmath97 . similarly , if @xmath100 for @xmath87 , then it follows easily from that both sides of are infinite . for all other values of @xmath1 , the equalities are obvious from the disjointness mentioned in theorem [ thm : fundamental - equation ] .    to prove theorem [ thm : fundamental - equation ] , we first need the following extension of lemma [ lem : similar - copies ] .",
    "[ lem : series - of - humps ] let @xmath44 be a balanced dyadic rational of order @xmath67 such that @xmath108 . define @xmath109 then , for each @xmath110 , the graph of @xmath0 above the interval @xmath111 $ ] is a similar copy of @xmath56 , scaled by a factor @xmath112 and shifted vertically by @xmath113 .",
    "more precisely , @xmath114.\\ ] ]    the binary expansion of @xmath115 is @xmath116 . since @xmath4 is balanced of order @xmath67 , @xmath45 , and hence @xmath117 .",
    "thus , @xmath115 is a balanced dyadic rational of order @xmath118 , and the statement of the lemma follows by lemma [ lem : similar - copies ] .",
    "the next lemma is a self - similarity result .",
    "[ lem : self - similar ] let @xmath119 .",
    "if @xmath120 then @xmath121    if @xmath4 satisfies , then iterating the first half of the functional equation @xmath122 times yields @xmath123 similarly , @xmath124 now by the second half of , @xmath125 substituting this into yields @xmath126 from and , follows easily .",
    "[ lem : pseudo - monotone ] let @xmath119 .",
    "if @xmath127 , then @xmath128    letting @xmath129 in we obtain @xmath130 .",
    "if @xmath127 , then we can find an integer @xmath131 with @xmath132 such that @xmath133 . since the slope of @xmath134 over the interval @xmath135 $ ] is @xmath136 ,",
    "we can conclude that @xmath137 where the last inequality follows since @xmath138 is nonincreasing .",
    "[ lem : left - side ] let @xmath119 , and for @xmath139 , put @xmath140 where the empty sum is taken to be zero .",
    "\\(i ) if @xmath141 and @xmath142 , then @xmath143 in other words , the portion of the graph of @xmath0 above the interval @xmath144 $ ] is a similar copy of the whole graph of @xmath0 , scaled by @xmath145 and positioned with its base at the level @xmath146 .",
    "\\(ii ) if @xmath147 then @xmath148 .",
    "\\(i ) note that @xmath149 , so @xmath150 satisfies the hypothesis of lemma [ lem : series - of - humps ] with @xmath151 .",
    "thus , is a consequence of lemmas [ lem : similar - copies ] and [ lem : series - of - humps ] .",
    "\\(ii ) we prove the second statement by induction .",
    "first , if @xmath152 , then @xmath153 ( this was observed also by lagarias and maddock ( * ? ? ?",
    "* section 6 ) . )    for the induction step , we first show that for @xmath119 , @xmath154 this holds for @xmath155 in view of .",
    "suppose holds for some arbitrary @xmath119 , and let @xmath156 ; then @xmath157 thus , by induction , holds for every @xmath119 .",
    "suppose now that statement ( ii ) is true for some arbitrary @xmath119 .",
    "if @xmath158 , then @xmath159 by . on the other hand , if @xmath160 we can apply lemma [ lem : self - similar ] : since @xmath161 the induction hypothesis gives @xmath162 thus , by lemma [ lem : self - similar ] applied with @xmath163 in place of @xmath42 , @xmath164 completing the proof .",
    "statement ( i ) is obvious . to prove statement ( ii ) , fix @xmath98 with @xmath87 .",
    "we can divide @xmath165 in three parts , namely its intersections with the intervals @xmath166 $ ] , @xmath167 $ ] and @xmath168 $ ] . by lemma",
    "[ lem : self - similar ] , @xmath169 = f_k\\left[l_0(\\psi(y))\\right],\\ ] ] since , for @xmath170 , can be written as @xmath171 . by lemma [ lem : left - side ] , @xmath172=\\bigcup_{j=0}^\\infty g_{k , j}\\left[l(4^j\\phi(y))\\right],\\ ] ] since can be written as @xmath173 .",
    "finally , @xmath174=\\emptyset\\ ] ] in view of lemma [ lem : pseudo - monotone ] , applied with @xmath122 in place of @xmath42 .",
    "thus , we have .",
    "it is easy to check that all parts of the union are disjoint provided @xmath175 .",
    "statement ( iii ) follows similarly from lemmas [ lem : self - similar ] and [ lem : left - side ] ( take @xmath155 ) by considering the intersection of @xmath165 with @xmath176 $ ] and @xmath177 $ ] , respectively .",
    "the parts of the union are disjoint as long as @xmath178 .",
    "in this section we focus on the set @xmath179 : |l(y)|=2\\}.\\ ] ] we establish conditions for membership in this set and obtain bounds on its lebesgue measure .    first , define a function @xmath180\\to\\{2,3,\\dots,\\infty\\}$ ] by @xmath181 and let @xmath182.\\ ] ]    it is plain from the graph of @xmath0 that @xmath183 for @xmath184 .",
    "it is also clear that @xmath185 .",
    "thus , we need only consider points @xmath1 with @xmath186 .",
    "note that for points in this interval , @xmath187 for each @xmath28 .",
    "[ thm : when - just - two ] let @xmath186 .",
    "then @xmath20 if and only if @xmath188    the theorem is an easy consequence of theorem [ thm : fundamental - equation ] .",
    "let @xmath189 , and @xmath190 , for @xmath191 .",
    "suppose that holds .",
    "then @xmath192 for all @xmath141 , so gives @xmath193 for each @xmath28 .",
    "but then @xmath194 for each @xmath28 .",
    "this implies @xmath195 hence @xmath196 , and so @xmath20 .",
    "this proves the  if \" part .",
    "conversely , if there is an @xmath28 such that @xmath197 , then @xmath198 .",
    "but then @xmath199 by , so that @xmath200 thus @xmath183 , proving the  only if \" part .",
    "while the condition in theorem [ thm : when - just - two ] is exact , it is in general difficult to verify .",
    "the following corollary gives a useful and easy - to - check sufficient condition in terms of the binary expansion of @xmath1 .",
    "[ cor : three - is - too - many ] let @xmath186 such that @xmath1 is not a dyadic rational , and suppose the binary expansion of @xmath1 does not contain a string of three consecutive @xmath41 s anywhere after the occurrence of its first @xmath13 .",
    "more precisely , write @xmath201 with @xmath202 , and suppose there do not exist indices @xmath42 and @xmath131 with @xmath203 such that @xmath204 , and @xmath205 . then @xmath20 .",
    "define @xmath206 and @xmath207 as in the proof of theorem [ thm : when - just - two ] .",
    "we claim that for each @xmath208 , the binary expansion of @xmath206 does not have three consecutive zeros anywhere past its @xmath207-th digit .",
    "this is obvious for @xmath209 .",
    "suppose it holds for some @xmath208 .",
    "then , since @xmath210 the binary expansion of @xmath211 will not have three consecutive zeros anywhere past its @xmath212-nd digit",
    ". therefore , since @xmath213 , the binary expansion of @xmath211 certainly does not have three consecutive zeros anywhere past its @xmath214-st digit , proving the claim .    since @xmath215 , it now follows that for each @xmath28 , @xmath216 hence , by theorem [ thm : when - just - two ] , @xmath20 .",
    "thus , for instance , the level sets at levels @xmath217 , @xmath218 , @xmath219 , @xmath220 , @xmath221 , @xmath222 , @xmath223 all have precisely two elements .",
    "it is clear from corollary [ cor : three - is - too - many ] that there are uncountably many ordinates @xmath1 having this property .",
    "in fact , there exist uncountably many such ordinates in each interval @xmath89 , where @xmath87 .",
    "but the corollary does not imply that the set @xmath19 has positive lebesgue measure .",
    "this stronger statement will follow , however , from theorem [ thm : measure - of - two ] below .",
    "the following corollary gives a slightly weaker sufficient condition and an accompanying necessary condition , which together nearly characterize which @xmath1 have @xmath20 in terms of the sequence @xmath224 .",
    "[ cor : double - at - most ] let @xmath225 , and let @xmath226 . if @xmath227 for each @xmath28 , then @xmath20 .",
    "in particular , @xmath20 if the sequence @xmath224 at most doubles at each step ; that is , if @xmath228 for each @xmath28 .    on the other hand , if @xmath229 for some @xmath28 , then @xmath230 .",
    "let @xmath231 , and suppose that for some @xmath28 , @xmath232 ; that is , @xmath233 then @xmath234 from which it follows that @xmath235 , and hence @xmath236 .",
    "putting this back into the lower estimate above gives @xmath237 so that @xmath238 .",
    "taking logarithms , we obtain @xmath239 .    for the second statement",
    ", we use the fact that @xmath240 this follows since @xmath138 is nonincreasing , and @xmath241 when @xmath242 .",
    "if fails for some @xmath28 , then the definition of @xmath214 gives @xmath243 so applying with @xmath244 , it follows that @xmath245 hence , @xmath246 .",
    "corollary [ cor : double - at - most ] implies , for example , that @xmath20 whenever @xmath1 is the fixed point of a composition @xmath247 with @xmath248 for @xmath249 , and @xmath250 .",
    "this leads to many more examples .",
    "in particular , the fixed point of each @xmath251 with @xmath252 has this property .",
    "( only @xmath253 does not have a fixed point in @xmath91 . )",
    "it is easy to calculate that the fixed point of @xmath251 is @xmath254 note that , surprisingly perhaps , every third number in this sequence is a dyadic rational .",
    "for instance , @xmath255 , @xmath256 , @xmath257 , etc .",
    "the binary expansion of @xmath258 is @xmath259 , which does not satisfy the  no 3 zeros \" condition of corollary [ cor : three - is - too - many ] .",
    "but @xmath258 is the fixed point of the ten - fold composition @xmath260",
    ". thus , by corollary [ cor : double - at - most ] , @xmath261 .    an intriguing question , which is a variant of one raised by knuth ( * ? ? ?",
    "* exercise 83 ) , is : given a rational @xmath1 , can one always determine in a finite number of steps whether @xmath20 ?",
    "if the sequence @xmath262 is eventually periodic , then one has to check the condition for only finitely many @xmath28 .",
    "but there are in fact many rational numbers @xmath1 for which @xmath224 never repeats : take , for example , @xmath263 , which has @xmath264 for every @xmath28 . for this @xmath1 , corollary [ cor :",
    "double - at - most ] nonetheless gives @xmath20 .",
    "[ thm : measure - of - two ] the set @xmath19 is nowhere dense and @xmath265 .",
    "it is not closed .",
    "its lebesgue measure @xmath266 satisfies @xmath267    to prove the theorem , we need to count the first - generation humps of order @xmath67 .",
    "this involves the _ catalan numbers _ @xmath268 which satisfy the identity @xmath269    [ lem : hump - count ] for each @xmath51 , the graph @xmath65 contains precisely @xmath270 first - generation leading humps of order @xmath67 .",
    "each hump of order @xmath67 corresponds uniquely to a path of @xmath67 steps starting at @xmath271 , taking steps @xmath272 or @xmath273 , and ending at @xmath274 .",
    "it is well known that exactly @xmath275 of these paths stay on or above the horizontal axis ( see feller @xcite ) .",
    "now each first - generation leading hump of order @xmath67 corresponds to a path with first step @xmath272 and last step @xmath273 , and which stays strictly above the horizontal axis in between these two steps . by translation , this is the same as the number of paths from @xmath271 to @xmath276 which do not go below the horizontal axis ; this number is therefore @xmath270 .    recalling definition [ def : balanced ] , let @xmath277 denote the set of all balanced dyadic rationals in @xmath278 .",
    "observe that @xmath19 is obtained from @xmath18 $ ] by removing the projections onto the @xmath1-axis of all first - generation humps , of which there are countably many .",
    "( recall that these projections are intervals of the form @xmath279 , where @xmath280 . ) hence , @xmath19 is @xmath265 .",
    "it is not closed , because , for example , the point @xmath15 does not lie in @xmath19 but can be approximated from below by points in @xmath19 ( take @xmath281 , for instance , which is in @xmath19 by corollary [ cor : three - is - too - many ] , and let @xmath282 ) . that @xmath19 is nowhere dense",
    "is shown in ( * ? ? ?",
    "* theorem 4.2 ) .    to estimate the measure of @xmath19",
    ", we show that @xmath283 for the lower bound , note that by theorem [ thm : when - just - two ] , the collection @xmath284 contains the disjoint family of intervals @xmath285 , where @xmath286 $ ] .",
    "( the interval @xmath287 is contained in @xmath288 , which is just @xmath289 $ ] . )",
    "thus , @xmath290 since @xmath19 is nowhere dense , there are intervals @xmath279 which are not contained in @xmath291 , so we have in fact strict inequality in the first half of .",
    "the upper bound uses a simple counting argument . for each @xmath51",
    "there are @xmath270 first - generation leading humps by lemma [ lem : hump - count ] .",
    "however , by lemma [ lem : series - of - humps ] each first - generation leading hump @xmath292 of order @xmath67 has directly to its left an infinite sequence of smaller first - generation leading humps , of orders @xmath293 , which we call _ subsidiary humps_. we need not count these , since their projections onto the @xmath1-axis are contained in that of @xmath292 . consequently , a first - generation leading hump of order @xmath67 should not be counted if it is a subsidiary hump to a first - generation leading hump of order @xmath294 .",
    "of these , there are exactly @xmath295 . setting @xmath296",
    ", we thus obtain the upper estimate @xmath297 where the last equality uses . here",
    "too we have in fact strict inequality , as some of the intervals @xmath279 counted in overlap each other .    since @xmath298 ,",
    "the estimate follows .",
    "the bounds for @xmath266 on both sides can be somewhat improved by examining more closely the degree of overlap between the first - generation removed intervals .",
    "however , the calculations become quite cumbersome , and it seems difficult to significantly narrow the interval of .    the result of theorem [ thm : measure - of - two ] should not be suprising when one observes the graph of the takagi function . the result of buczolich",
    "@xcite says that almost all level sets are finite , and it is certainly plausible that @xmath14 is the most common cardinality .      for nondifferentiable functions , finding even approximate solutions to the equation",
    "@xmath2 is a nontrivial task , since there is no obvious replacement for newton s method .",
    "here we show , as a by - product of our analysis , how the sequence @xmath224 can be used to solve this problem for the takagi function .",
    "for a point @xmath299 $ ] , we call the sequence @xmath224 defined by @xmath300 the ( canonical ) _ takagi expansion _ of @xmath1 , and write @xmath301 $ ] . if @xmath302 for all @xmath303 , we write @xmath304 $ ] . instead of the expansion @xmath305 $ ]",
    "we write simply @xmath306 $ ] .",
    "we have @xmath307 $ ] , @xmath308 $ ] , @xmath309 $ ] , @xmath310 $ ] , @xmath311 $ ] , @xmath312 .",
    "the takagi expansion of a point @xmath1 can be used to approximate a solution to the equation @xmath2 . from the definition of @xmath207",
    "we see that @xmath313 where we interpret the @xmath28-th term of the series as @xmath41 when @xmath314 . put @xmath315 then @xmath2 , as can be seen easily using lemmas [ lem : self - similar ] and [ lem : pseudo - monotone ] , induction , and the continuity of @xmath0 . for the canonical takagi expansion , we have @xmath316 , @xmath213 , and if @xmath215 , then @xmath317 . with these requirements ,",
    "the representation is unique .",
    "however , we can obtain more solutions of @xmath2 in @xmath318 $ ] ( provided they exist ) by relaxing the conditions on the sequence @xmath224 .",
    "specifically , we can drop the last requirement and demand merely that @xmath316 and @xmath213 for all @xmath28 .",
    "this can yield alternative representations of the form , which we also call takagi expansions and which correspond to different solutions of @xmath2 .",
    "the idea is based on the identity @xmath319 which implies that @xmath320=[k_0,\\dots , k_{n-1},k_n+1,k_n , k_n-1,\\dots,2]$ ] .",
    "for instance , @xmath321 has the representations @xmath322 $ ] , @xmath323 $ ] , @xmath324 $ ] , etc .",
    ", corresponding to the solutions @xmath325 , @xmath326 and @xmath327 , etc .",
    "analogously , @xmath328=[6,5,4,3,2]$ ] .",
    "starting with the canonical takagi expansion of @xmath1 , one can determine whether there exist additional representations as follows .",
    "if @xmath329 for all @xmath28 , then the takagi expansion is unique . on the other hand , if for some @xmath28 , @xmath330 , then @xmath1 has an alternative takagi expansion @xmath331.\\ ] ] to find it , put @xmath332 , and let @xmath333 for @xmath334 .",
    "this procedure can be repeated for any takagi expansion of @xmath1 and at any position @xmath28 such that @xmath330 . as an example , the point @xmath335 has canonical takagi expansion @xmath336 $ ] , with corresponding solution @xmath337 .",
    "since @xmath338 , and @xmath339 $ ] , @xmath1 has the additional takagi expansion @xmath340 $ ] , with corresponding solution @xmath341 . in general , a given point @xmath1 may have finitely many , countably many or uncountably many takagi expansions .    the solutions of @xmath2 corresponding to different takagi expansions of @xmath1 are not only different , but represent different local level sets as defined by lagarias and maddock @xcite .",
    "define an equivalence relation @xmath342 on @xmath50 $ ] by saying that @xmath343 if @xmath344 for all @xmath28 .",
    "the _ local level set _ determined by @xmath4 is the set @xmath345 : x'\\sim x\\}$ ] .",
    "points inside a local level set are easily obtained from one another by simple operations (  block flips \" ) on their binary expansions ",
    "see @xcite .",
    "the size of a local level set in @xmath17 can be inferred from the number of 2 s in the corresponding takagi expansion of @xmath1 : if the number 2 occurs exactly @xmath67 times in the sequence @xmath224 , then @xmath346 with @xmath4 defined by has exactly @xmath347 elements ( provided that we  split \" each dyadic rational point @xmath4 in two separate points @xmath348 and @xmath349 , corresponding to the two possible binary representations of @xmath4 ) .",
    "if it occurs infinitely often , @xmath346 is uncountable .",
    "moreover , the point @xmath4 obtained via is always the leftmost point of @xmath346 , as one checks easily that @xmath350 for all @xmath28 . to summarize :    * the number of local level sets contained in @xmath17 equals the number of distinct takagi expansions of @xmath1 ; * the leftmost point of the local level set associated with takagi expansion @xmath301 $ ] is the point @xmath4 defined by ; * the cardinality of the local level set is determined by the number of 2 s in the associated takagi expansion of @xmath1 .",
    "the previous section was concerned mainly with level sets consisting of exactly two points .",
    "it is natural to ask which other cardinalities are possible , and whether they occur with positive probability . of course",
    ", the cardinality of any finite level set must be even , in view of the symmetry of the graph of @xmath0 .",
    "the next theorem shows that conversely , every even positive integer is the cardinality of some level set of @xmath0 .      by corollary [ cor : three - is - too - many ] ( or theorem [ thm : measure - of - two ] ) the statement is true for @xmath352 .",
    "we show here that , for each @xmath51 , there are uncountably many level sets with cardinality @xmath353 , and uncountably many with cardinality @xmath354 .",
    "let @xmath355 be a point in @xmath356 satisfying the condition of corollary [ cor : three - is - too - many ] ; note that there are uncountably many such points .",
    "let @xmath51 , and put @xmath357 we first show that @xmath358 .",
    "observe that for @xmath359 , @xmath360 , while for @xmath361 , @xmath362 . since @xmath363 also satisfies the  no 3 zeros \" condition of corollary [ cor : three - is - too - many ]",
    ", it follows by and that @xmath358 .",
    "next , we show that @xmath364 .",
    "note that @xmath365 , so @xmath366 .",
    "thus , we obtain again that @xmath367 for @xmath359 , while @xmath368 for @xmath361 . since @xmath369 satisfies the hypothesis of corollary [ cor : three - is - too - many ] for each @xmath110 , we conclude that @xmath370 , and @xmath371 hence , by , @xmath372 , so that @xmath364 .    for @xmath373 ,",
    "define the set @xmath374 : |l(y)|=2n\\}.\\ ] ] in ( * ? ? ?",
    "* theorem 4.2 ) , we show that @xmath375 is nowhere dense for each @xmath28 , so these sets are small topologically speaking . on the other hand ,",
    "we believe them to have positive lebesgue measure .      it is natural to try to use the construction in the proof of theorem [ thm : all - evens ] as the basis for proving this conjecture , but this does not seem to work . in the last two theorems of this section , which verify the conjecture for the case when @xmath377 is the sum or difference of two powers of @xmath14 , we use a different approach which delves deeper into the hierarchical structure of humps .",
    "recall the definition of the intervals @xmath378 , @xmath87 .",
    "it was observed earlier that for each @xmath87 , @xmath84 maps @xmath89 onto @xmath90 .",
    "thus , for @xmath186 , the sequence @xmath224 from the proof of theorem [ thm : when - just - two ] satisfies @xmath379 and every sequence @xmath224 satisfying these conditions is possible , and in fact determines a unique ordinate @xmath225 via .",
    "for each @xmath380 , define a subinterval @xmath381 of @xmath89 by @xmath382.\\ ] ] let @xmath383 denote the collection of intervals @xmath381 , @xmath87 . for @xmath384 ,",
    "let @xmath385 be the collection of all intervals of the form @xmath386 such that the @xmath387-tuple @xmath388 satisfies .",
    "put @xmath389 .",
    "note that @xmath390 is precisely the collection of projections of all first - generation humps onto the @xmath1-axis , except those of subsidiary humps .",
    "we first establish individual estimates for the measure of the intersection of @xmath19 with each of the intervals @xmath89 .",
    "define @xmath391 in view of theorem [ thm : when - just - two ] , we have @xmath392 the proof of theorem [ thm : measure - of - two ] implies that @xmath393 because the summation in includes the hump @xmath394 , which sits above the line @xmath97 and has height @xmath220 . subtracting this from the total of @xmath395 in gives .",
    "we now calculate the individual @xmath396 s .      since @xmath398",
    ", we have the recursive relations @xmath399 using it follows immediately that @xmath400 next , gives the difference equation @xmath401 from this equation and the initial values , follows easily by induction .",
    "lemma [ lem : individual - sums ] and together imply that @xmath407 , proving ( i ) .",
    "in particular , @xmath408 .",
    "suppose @xmath409 , and put @xmath410 then @xmath411 .",
    "this is trivial if @xmath412 ; assume it holds for some @xmath413 . since @xmath414 , we have @xmath415 , and since @xmath416 , gives @xmath417 .",
    "thus , @xmath418 , completing the induction .",
    "it now follows that @xmath419 .",
    "this proves ( ii ) ; statement ( iii ) follows similarly .",
    "the proof of proposition [ prop : positive - measure ] illustrates a typical use of corollary [ cor : cardinality ] .",
    "a variant of the argument is the following : if @xmath186 and @xmath422 , then reduces to @xmath423 , or equivalently , @xmath424 if in fact @xmath186 and @xmath425 , we obtain even more simply that @xmath426 .",
    "we will use these results several times in the proofs below .      by proposition [ prop : positive - measure](iii ) it is enough to show that @xmath428 for all @xmath429 .",
    "we will show that the interval @xmath430 which clearly lies in @xmath431 , contains a subset of @xmath432 of positive measure .",
    "let @xmath433 .",
    "then @xmath434 , so by we see that @xmath435 if @xmath436 and @xmath437 .",
    "define @xmath438 then one easily checks that @xmath365 , and since @xmath439 it follows as in the proof of proposition [ prop : positive - measure ] that @xmath437 if @xmath440 .",
    "we next derive a condition on @xmath441 that guarantees @xmath436 .",
    "assume first that @xmath445 .",
    "since @xmath433 and @xmath446 , we have @xmath447 so @xmath448 .",
    "now it follows inductively that , for @xmath449 , @xmath450 and @xmath442 . for @xmath451",
    "this gives @xmath452 and iterating once more we obtain @xmath453 thus @xmath444 , establishing the claim for the case @xmath445 .",
    "if @xmath454 , then @xmath455 , so is just the statement @xmath433 .",
    "thus we obtain in the same way as above that @xmath456 .",
    "now we have @xmath460 since @xmath461 , so by , @xmath462 since the affine map that takes @xmath1 to @xmath441 maps @xmath463 onto @xmath431 and expands by a factor @xmath464 , we obtain @xmath465 where the second - to - last inequality follows by , and the last inequality by lemma [ lem : individual - sums ] .",
    "thus , @xmath428 .        by proposition",
    "[ prop : positive - measure ] , it is enough to show that @xmath467 for all @xmath445 .",
    "the case @xmath468 actually follows from theorem [ thm:2sum ] , since @xmath469 .",
    "assume therefore that @xmath470 .",
    "we will show that the interval @xmath471 which clearly lies in @xmath431 , contains a subset of @xmath472 of positive measure .",
    "this statement is a tautology if @xmath454 .",
    "proceeding by induction , suppose the claim is true for some @xmath429 , and let @xmath477 be such that @xmath473 for each @xmath478 , and @xmath479 .",
    "then @xmath480 , so the induction hypothesis applied to @xmath481 in place of @xmath1 gives @xmath482 .",
    "finally , @xmath483 implies @xmath422 . since @xmath436",
    ", it follows from that @xmath484 , as required .",
    "this is a bit tedious .",
    "we show first that for @xmath490 , @xmath491 since it is easy to check that for each @xmath28 , the interval for @xmath206 corresponding to @xmath433 is contained in the interval for @xmath211 , it suffices to prove for @xmath492 .",
    "using the fact that each @xmath487 , one calculates @xmath493 it follows after some elementary arithmetic that @xmath494 which is independent of @xmath67 .    put @xmath495 , and let @xmath496 for @xmath141 .",
    "we have @xmath497 , and by , @xmath498 this implies @xmath499 , so @xmath500 .",
    "note that the leading term in the left hand side of is @xmath501 , which is a fixed point of the mapping @xmath502 .",
    "we now continue , obtaining successively : @xmath503",
    "this establishes , which we now use to compute @xmath504 on the other hand , @xmath505 so that @xmath506 proving claim 2 .",
    "* claim 4 . * for @xmath509 and @xmath510 , we have @xmath511 .",
    "* claim 5 . * for @xmath512 , we have @xmath513 .",
    "claims 4 and 5 are easy to check .",
    "claim 4 follows from the sequence of inequalities beginning with ( recall that @xmath514 ) ; claim 5 is verified similarly .",
    "it now follows from claims 1,2 and 4 that @xmath476 if and only if @xmath515 , @xmath516 , and @xmath517 . by claims 3 and 5 , this is the case if and only if @xmath518 since @xmath519 , this last set of conditions holds if and only if @xmath520 lies in each of the sets @xmath521 in view of claim 3 . since the affine map that takes @xmath1 to @xmath520 maps @xmath463 onto @xmath431 and expands by a factor @xmath522",
    ", we finally obtain @xmath523 where the second - to - last inequality follows by , and the last inequality by lemma [ lem : individual - sums ] .",
    "thus , @xmath467 .",
    "the ideas from the proofs of theorems [ thm:2sum ] and [ thm:2difference ] can be combined to prove that @xmath376 for many more integers @xmath28 .",
    "however , this method seems to break down in general when @xmath28 becomes too large ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be takagi s continuous but nowhere - differentiable function . </S>",
    "<S> it is known that almost all level sets ( with respect to lebesgue measure on the range of @xmath0 ) are finite . </S>",
    "<S> we show that the most common cardinality of the level sets of @xmath0 is two , and investigate in detail the set of ordinates @xmath1 such that the level set at level @xmath1 has precisely two elements . as a by - product </S>",
    "<S> , we obtain a simple iterative procedure for solving the equation @xmath2 . </S>",
    "<S> we show further that any positive even integer occurs as the cardinality of some level set , and investigate which cardinalities occur with positive probability if an ordinate @xmath1 is chosen at random from the range of @xmath0 . </S>",
    "<S> the key to the results is a system of set equations for the level sets , which are derived from the partial self - similarity of @xmath0 . </S>",
    "<S> these set equations yield a system of linear relationships between the cardinalities of level sets at various levels , from which all the results of this paper flow .    : </S>",
    "<S> 26a27 ( primary ) , 28a80 ( secondary )    : takagi function , nowhere - differentiable function , level set , self - similarity , takagi expansion </S>"
  ]
}