{
  "article_text": [
    "in this paper , we consider the correspondence between tropical curves in real affine spaces and holomorphic curves in toric varieties .",
    "this study was initiated by g.mikhalkins celebrated paper @xcite , in which he proved the correspondence between imbedded tropical curves of any genus in @xmath0 , and holomorphic curves in toric surfaces specified by the combinatorial data of the tropical curves .",
    "subsequently , b.siebert and the author proved the correspondence between embedded rational tropical curves in @xmath1 and rational curves in @xmath2-dimensional toric varieties @xcite .",
    "we have three themes in this paper , each of which is of fundamental use when one applies tropical geometry to classical geometry .",
    "namely :    1 .   generalize these correspondence theorems to general non - superabundant tropical curves .",
    "2 .   describe superabundancy of tropical curves in an efficient way .",
    "3 .   give an effective formalism to describe holomorphic curves corresponding to tropical curves which are neither imbedded nor non - superabundant .",
    "although the themes vary , there is a penetrating philosophy throughout the paper .",
    "that is , we try to understand tropical curves via sheaf cohomology of the corresponding degenerate holomorphic curves . in this paper , we first consider the themes ( 1 ) and ( 2 ) when tropical curves are immersions . when tropical curves are not immersions , higher valent vertices appear and it turns out that they give rather different features to tropical curves compared to the immersive cases . then after the study of higher valent vertices appearing in the theme ( 3 )",
    ", we can complete the study of themes ( 1 ) and ( 2 ) including general cases .",
    "now we explain each theme more closely .",
    "our first result in this paper is the unification and the extension of the above two correspondence theorems , when the tropical curve is an immersion .",
    "this result was first announced by mikhalkin in his paper ( * ? ? ?",
    "* theorem 1 ) .",
    "the terminologies used in the statement are defined or explained in section [ sec : pre ] .",
    "[ thm : nonsuperabundant ] let @xmath3 , @xmath4 be an immersive tropical curve of genus @xmath5 which is non - superabundant .",
    "let @xmath6 be an @xmath2-dimensional toric variety associated to @xmath3 and @xmath7 be a degeneration of @xmath6 defined respecting @xmath3 .",
    "let @xmath8 be the central fiber of the family @xmath9 .",
    "then any pre - log curve in @xmath8 of type @xmath3 can be deformed into a holomorphic curve in @xmath6 , and the degrees of freedom to deform tropical and holomorphic curves coincide .",
    "the holomorphic curves in @xmath6 in the statement of the theorem have at worst nodal singularities .    1 .   from this theorem",
    ", we can deduce enumerative results for non - superabundant curves as in @xcite , introducing incidence conditions , markings of the edges , various weights , etc .. we leave the precise formulation to the interested readers , because it can be done completely similarly as in @xcite .",
    "the proof of theorem [ thm : nonsuperabundant ] in this paper ( together with the results in section [ sec : dual obstruction ] ) was originally given in the first version of the preprint @xcite .",
    "after that , theorem [ thm : nonsuperabundant ] was proved in the genus one case by tyomkin @xcite .",
    "theorem [ thm : nonsuperabundant ] was also recently proved by cheung , fantini , park and ulirsch @xcite with broader applicability . in @xcite and @xcite ,",
    "non - archimedean algebraic geometry was used . the method in this paper",
    "is totally different and has several merits : * it only uses conventional algebraic geometry , and ( at least in the author s opinion ) the proof is simpler and more elementary . * more important is that the method used here has broad range of applications to the study of more general classes of tropical curves beyond the scope of theorem [ thm : nonsuperabundant ] , as we will explain below . * as for theorem [ thm : nonsuperabundant ] , after studying higher valent vertices , we return to it and prove its optimal generalization applicable to non - immersive tropical curves ( theorem [ thm : corresp ] ) . more precisely , we can get rid of all the restrictions imposed in @xcite and @xcite . for example , in @xcite , the tropical curves are assumed to be embedding and in @xcite , all the weights of the edges are assumed to be 1 and also some technical conditions are assumed ( ( * ? ? ? * definitions 2.2 and 2.3 ) ) .",
    "our result covers all non - superabundant cases , and in fact even applies to some cases where the tropical curves are superabundant in the sense of ( * ? ? ?",
    "* definition 4.1 ) ( see subsection [ subsec : compare ] ) .",
    "this is important for applications of correspondence theorems , because there are a lot of degenerate holomorphic curves which are unobstructed although they correspond to tropical curves which are superabundant in the sense of ( * ? ? ?",
    "* definition 4.1 ) .",
    "now we explain the second theme . aside from the problem of the correspondence between tropical curves and holomorphic curves ,",
    "the problem of understanding superabundant tropical curves is itself not straightforward . given a tropical curve , immediate problems are :    * determine whether the tropical curve is superabundant or not .",
    "* when the tropical curve is superabundant , calculate the number of parameters of its deformation .",
    "both problems are not easily solved when one looks only at the tropical curve itself . in the proof of proposition [",
    "prop : canonical ] , which plays the key role in the proof of theorem [ thm : nonsuperabundant ] , we develop a new combinatorial method to describe sheaf cohomology groups of degenerate holomorphic curves associated to tropical curves . using this idea , we obtain an effective combinatorial description of superabundancy of tropical curves for immersive cases ( theorem [ thm : obstruction ] ) , which allows one to solve both of the problems above .",
    "it is obvious that this kind of result should be very useful in the study of superabundant tropical curves .",
    "in fact , with this description , we can study correspondence theorems for superabundant tropical curves @xcite .",
    "the calculation in this paper also plays a fundamental role in various situations @xcite .",
    "an interesting point is that while usually tropical curves are used to combinatorially understand algebraic curves , here we use algebraic geometry to understand combinatorics of tropical curves .",
    "finally , we explain the last theme . in the study of the correspondence between superabundant tropical curves and holomorphic curves , consideration of tropical curves which are",
    "not imbeddings are indispensable . at this point",
    ", it is important to strictly distinguish the domain of the tropical curve (= an abstract graph ) and its image (= a graph in a real affine space ) , and it turns out that the abstract graph should always be taken as 3-valent .",
    "so tropical curves in @xmath10 with higher ( @xmath11 ) valent vertices should be considered as a map @xmath12 from an abstract 3-valent graph @xmath13 which contracts some of the edges .",
    "main reason to think in this way is that there seems to be no nice way to talk about `` holomorphic curves corresponding to a graph in @xmath10 with higher valent vertices satisfying balancing conditions '' . to be more precise",
    ", we can talk about such a holomorphic curve , but it can have varying properties .",
    "these properties are fixed only when we think of such a graph in @xmath10 as the image of a map from an abstract graph , and in particular we need to specify the domain which is a 3-valent abstract graph .",
    "we will give a general formalism to deal with a degenerate holomorphic curve corresponding to the pair @xmath3 which need not be an immersion , and calculate its deformation and obstruction spaces .",
    "contrary to the imbedded case , it is no longer possible to read off these obstruction spaces purely combinatorially , particularly when the genus is larger than one .",
    "we will observe several interesting phenomena concerning these spaces .",
    "also , when the obstruction space vanishes , we can strengthen theorem [ thm : nonsuperabundant ] into the optimal form including higher valent vertices which roughly states the following ( see theorem [ thm : corresp ] for the precise statement ) .",
    "let @xmath3 be a tropical curve which allows a deformation into a non - superabundant immersive tropical curve .",
    "then it can be realized by a holomorphic curve .",
    "in theorem [ thm : nonsuperabundant ] , where the tropical curve is immersive and non - superabundant , the existence of pre - log curve of the given type can be proved by the argument in @xcite . on the other hand , in the above theorem",
    "this existence itself is more non - trivial ( in fact , in the paper @xcite they imposed technical conditions on tropical curves to ensure this existence , see ( * ? ? ?",
    "* proposition 2.8 ) ) and it is a part of the assertion of the theorem .    in the final part of the paper , we give several examples of tropical curves and corresponding ( degenerate ) holomorphic curves with some remarkable features which are not known previously .",
    "we give a general existence result for degenerate pre - log curves associated to non - superabundant tropical curves ( proposition [ prop : exist ] and theorem [ thm : corresp ] ) , but in the case of superabundant tropical curves , there are ones to which associated pre - log curves do not exist , even when the tropical curves are embedded ( examples [ ex:1 ] and [ ex:1.5 ] ) .",
    "we also calculate how the existence of higher valent vertices on the loop affects the ( dual ) obstruction .",
    "it turns out that in the presence of higher valent vertices , the very existence of a degenerate holomorphic curve is deeply related to the vanishing of the obstruction .",
    "in fact , this calculation results in the following new principle for the smoothability of pre - log curves corresponding to superabundant tropical curves of genus one with higher valent vertices on the loop ( see theorem [ thm : loop ] for the precise statement .",
    "we note that the papers @xcite contain hints of it ) .",
    "let @xmath12 be a tropical curve of genus one such that the directions of the edges emanating from the vertices on the loop span the whole @xmath10 .",
    "assume that there is a pre - log curve @xmath14 of type @xmath3 .",
    "then @xmath15 can be deformed into a general fiber of the toric degeneration @xmath9 ( we are using the same notation as in theorem [ thm : nonsuperabundant ] ) .",
    "the above calculation also leads to a new well - spacedness condition for higher genus superabundant tropical curves ( example [ ex:3 ] ) .",
    "both of these results play essential roles in the study of correspondence between superabundant tropical curves and holomorphic curves . +",
    "* acknowledgments . *",
    "the author s study of tropical geometry began from the joint work @xcite with b.siebert , and many ideas from it appear in this paper , too .",
    "it is a great pleasure for the author to express his gratitude to him .",
    "the author was supported by jsps kakenhi grant number 26400061 .",
    "in this section , we recall and define some notations and notions which are used in this paper .",
    "first we recall some definitions about tropical curves , see @xcite for more information .",
    "let @xmath16 be a weighted , connected finite graph .",
    "its sets of vertices and edges are denoted @xmath17}$ ] , @xmath18}$ ] , and let @xmath19 } \\to \\bbb n \\setminus \\ { 0 \\}$ ] be the weight function .",
    "an edge @xmath20}$ ] has adjacent vertices @xmath21 .",
    "let @xmath17}_{\\infty } \\subset \\overline \\gamma^{[0]}$ ] be the set of 1-valent vertices .",
    "we write @xmath22}_{\\infty}$ ] .",
    "noncompact edges of @xmath13 are called _",
    "unbounded edges_. let @xmath23}_{\\infty}$ ] be the set of unbounded edges .",
    "let @xmath24 } , \\gamma^{[1 ] } , w_{\\gamma}$ ] be the sets of vertices and edges of @xmath13 and the weight function of @xmath13 ( induced from @xmath25 in an obvious way ) , respectively .",
    "let @xmath26 be a free abelian group of rank @xmath27 and @xmath28 , where @xmath29 .",
    "[ def : param - trop ] a _ parametrized tropical curve _ in @xmath30 is a proper map @xmath31 satisfying the following conditions .    1 .   for every edge @xmath32 ,",
    "the restriction @xmath33 is an embedding with the image @xmath34 contained in an affine line with a rational slope , or @xmath34 is a point .",
    "2 .   for every vertex @xmath35}$ ] , @xmath36 and",
    "the following _ balancing condition _ holds .",
    "let @xmath37}$ ] be the edges adjacent to @xmath38 and let @xmath39 be the primitive integral vector emanating from @xmath40 in the direction of @xmath41 .",
    "then @xmath42    in @xcite , @xmath43 is assumed to be an embedding ( see ( * ? ? ?",
    "* definition 1.1 ) ) for every edge @xmath44 .",
    "the reason that we adopt the above definition is that these cases appear naturally when we consider superabundant tropical curves .",
    "since @xmath45 is proper , an unbounded edge is not contracted .",
    "when an edge @xmath46 is contracted , then the vector @xmath47 in equation ( [ eq : balance ] ) is set to 0 .",
    "an isomorphism between parametrized tropical curves @xmath31 and @xmath48 is a homeomorphism @xmath49 respecting the weights such that @xmath50 .",
    "[ def : tropical curve ] a _ tropical curve _ is an isomorphism class of parametrized tropical curves .",
    "a tropical curve is _",
    "3-valent _ if any vertex of @xmath13 is at most 3-valent .",
    "the _ genus _ of a tropical curve is the first betti number of @xmath13 .",
    "the set of _ flags _ of @xmath13 is @xmath51    note that in our definition , there can be 2-valent vertices in the abstract graph @xmath13 of a 3-valent tropical curve . by ( i ) of definition [ def : param - trop ] , we have a map @xmath52 sending a flag @xmath53 to the primitive integral vector @xmath54 emanating from @xmath40 in the direction of @xmath34 or to the zero vector .    [ rem:0edge ]",
    "we allow the case that even when @xmath55 , the edge @xmath44 might be contracted by the map @xmath45",
    "( but in such a case the direction @xmath56 does not contribute to the balancing condition ( [ eq : balance ] ) ) .",
    "we think of such a tropical curve as the limit of a family of tropical curves @xmath57 , @xmath58 where the image @xmath59 has direction @xmath56 for each @xmath60 and the length goes to 0 as @xmath61 ( see definition [ def : moduli ] ) .",
    "[ def : type ] the ( unmarked ) _ combinatorial type _ of a tropical curve @xmath3 is the graph @xmath13 together with the map @xmath52 .",
    "we write this by the pair @xmath62 .",
    "[ def : degree ] the _ degree _ of a type @xmath62 is the function @xmath63 with finite support defined by @xmath64}_{\\infty } , w(e)u_{(v , e ) } = v \\}\\ ] ] let @xmath65 .",
    "this is the same as the number of unbounded edges of @xmath13 ( not necessarily of @xmath66 ) .",
    "[ immersive ] we call a tropical curve @xmath3 _ immersive _ if for any @xmath67}$ ] , the restriction of @xmath45 to @xmath44 is an embedding .",
    "[ prop : trop_moduli ] the space parameterizing immersive 3-valent tropical curves of a given combinatorial type is , if it is non - empty , an open convex polyhedral domain in the real affine @xmath68-dimensional space , where @xmath69 .    [",
    "def : moduli ] fix a combinatorial type of tropical curves whose parameter space of immersive curves is non - empty .",
    "then we define the parameter space of _ all _ 3-valent tropical curves of the given combinatorial type as the closure of the parameter space of immersive curves .",
    "[ rem : type ] in other words , an element of the parameter space of tropical curves of a given combinatorial type is a tropical curve which can be deformed into an immersive tropical curve of that combinatorial type .",
    "if there is no immersive tropical curve of the given combinatorial type , then the corresponding parameter space is defined to be empty in this paper ( see example [ ex : singular ] ) .",
    "this does not give any restriction , see proposition [ prop : immexist ] .",
    "the parameter space in the statement of proposition [ prop : trop_moduli ] is defined by a set of affine linear inequalities which we write symbolically by @xmath70 .",
    "if we allow some edges of @xmath13 contracted by the map @xmath45 , some of the inequalities @xmath70 become not strict : @xmath71 . in particular",
    ", we have the following .    [ cor : trop_moduli ] let @xmath3 be a 3-valent tropical curve .",
    "then the parameter space of 3-valent tropical curves of the given combinatorial type is , if it is not empty , a closed convex polyhedral domain in a real affine @xmath68-dimensional space , where @xmath69 .    the term closed in the statement of the corollary does not mean compact. since we can always parallel transport tropical curves , the parameter space is always non - compact .    before stating assumption a below , we prepare some terminologies",
    ". let @xmath13 be a finite 3-valent graph as above .",
    "[ def : loops ]    a.   an edge @xmath67}$ ] is said to be a _",
    "part of a loop of @xmath13 _ if the graph given by @xmath72 has lower first betti number than @xmath13 . here",
    "@xmath73 is the interior of @xmath44 ( that is , @xmath74 ) .",
    "b.   the _ loop part _ of @xmath13 is the subgraph of @xmath13 composed of the union of all parts of the loops of @xmath13 . c.   a _ bouquet _ of @xmath13 is a connected component of the loop part of @xmath13 .",
    "a subset of a bouquet which is homeomorphic to a circle is called a _",
    "loop_.    in particular , a bouquet or a loop does not contain unbounded edges .    [ ex : singular ] proposition [ prop : trop_moduli ] fails to hold for non - immersive higher genus tropical curves . for example , consider an abstract 3-valent graph @xmath13 which has three unbounded edges @xmath75 of weight 1 .",
    "assume that the set @xmath76 is a bouquet . the following map @xmath77 gives a tropical curve .    * @xmath45 maps the ends of @xmath75 to the origin @xmath78 . * @xmath45 maps the edges @xmath75 onto the half lines @xmath79 , respectively .",
    "* @xmath45 contracts the other part of @xmath13 to @xmath78 .",
    "then it is easy to see that there is no deformation of @xmath3 other than parallel transport .",
    "so if the genus of @xmath13 is positive and @xmath45 is not immersive , proposition [ prop : trop_moduli ] does not always hold .",
    "this tropical curve is not contained in the parameter space in the sense of definition [ def : moduli ] for any combinatorial type .",
    "as this example shows , when the map @xmath45 contracts loops of @xmath13 , it becomes difficult to give a unified treatment of tropical curves .",
    "so we introduce the following assumption . +",
    "* assumption a. *    a.   the abstract graph @xmath13 is always 3-valent .",
    "so @xmath3 is always a 3-valent tropical curve in view of definition [ def : tropical curve ] , although some vertices of the image @xmath66 may not be 3-valent .",
    "b.   the map @xmath45 may contract some of the bounded edges of @xmath13 .",
    "however , @xmath45 does not contract a loop to a point . c.   @xmath3 can be deformed into an immersive tropical curve .",
    "thus , the parameter space containing @xmath3 is not empty .",
    "[ rem : assump ]    1 .",
    "in particular , immersive 3-valent tropical curves satisfy assumption a. 2 .",
    "when @xmath3 satisfies assumption a , we define a part of a loop , the loop part , a bouquet and a loop of the image @xmath66 as the images of them of @xmath13 .",
    "note that the inverse image of a vertex of the image @xmath66 is a disjoint union of trees and points .",
    "that is , it never contains a loop .",
    "4 .   by ( iii ) of assumption a , when a tropical curve @xmath3 satisfies assumption a , the parameter space of the given type is non - empty , so it is a closed convex polyhedral domain in a real affine @xmath68-dimensional space , where @xmath69 , by corollary [ cor : trop_moduli ] .",
    "the subset of tropical curves satisfying assumption a is neither closed nor open in general , since some of the edges can be contracted while edges in a loop can not be contracted simultaneously .",
    "a general member of the parameter space in ( 4 ) above is immersive .",
    "now we define the superabundancy of tropical curves . in view of example",
    "[ ex : singular ] , it is reasonable to define it only for curves satisfying assumption a(iii ) .",
    "[ def : superabundancy ] a 3-valent tropical curve satifying assumption a(iii ) is called _ superabundant _ if the parameter space is of dimension larger than @xmath80 .",
    "otherwise it is called _ non - superabundant_.    to see whether a tropical curve satisfying assumption a of a given combinatorial type is superabundant or not , it is enough to check it for an immersive tropical curve obtained by deforming the original curve . on the other hand",
    ", we will see below that the superabundancy of an immersive tropical curve can be effectively calculated via algebraic geometry .",
    "now we recall some notions from algebraic geometry relevant to our purpose .",
    "[ toric ] a toric variety @xmath6 defined by a fan @xmath81 is called _ associated to a tropical curve @xmath3 _ if the set of the rays of @xmath81 contains the set of the rays spanned by the vectors in @xmath26 which are in the support of the degree map @xmath82 of @xmath3 .",
    "if @xmath44 is an unbounded edge of @xmath66 , there is an obvious unique divisor of @xmath6 corresponding to it . we write it by @xmath83 and call it the _ divisor associated to the edge",
    "@xmath44_.    [ def : degeneration ] given a tropical curve @xmath3 in @xmath30 defined over @xmath84 ( that is , the vertices have rational coordinates and the edge lengths are rational numbers ) , we can construct a polyhedral decomposition @xmath85 of @xmath30 defined over @xmath84 such that @xmath66 is contained in the 1-skeleton of @xmath85 ( ( * ? ? ?",
    "* proposition 3.9 ) ) . given such @xmath85",
    ", we construct a degenerating family @xmath7 of a toric variety @xmath6 associated to @xmath3 ( ( * ? ? ?",
    "* section 3 ) ) .",
    "we call such a family a _ degeneration of @xmath6 defined respecting @xmath3_. let @xmath8 be the central fiber .",
    "it is a union @xmath86}}x_v$ ] of toric varieties intersecting along toric strata . here",
    "@xmath87}$ ] is the set of the vertices of @xmath85 .",
    "[ torically transverse ] let @xmath6 be a toric variety .",
    "a holomorphic curve @xmath88 is _ torically transverse _ if it is disjoint from all toric strata of codimension greater than 1 .",
    "a stable map @xmath89 is torically transverse if @xmath90 is dense and @xmath91 is a torically transverse curve . here @xmath92 is the complement of the union of toric divisors .",
    "[ def : pre - log ] let @xmath93 be a prestable curve .",
    "a _ pre - log curve _ on @xmath8 is a stable map @xmath14 with the following properties .    1 .   for any @xmath94}$",
    "] , the restriction @xmath95 is a torically transverse stable map .",
    "2 .   let @xmath96 be a point which maps to the singular locus of @xmath8 .",
    "then @xmath97 has a node at @xmath98 , and @xmath15 maps the two branches @xmath99 of @xmath93 at @xmath98 to different irreducible components @xmath100 . moreover , if @xmath101 is the intersection index of the restriction @xmath102 with the toric divisor @xmath103 , and @xmath104 accordingly for @xmath105 , then @xmath106 .",
    "let @xmath6 be a toric variety and @xmath107 be the union of toric divisors . in ( * ? ?",
    "* definition 5.2 ) , a non - constant torically transverse map @xmath108 is called a _ line _ if @xmath109 in this case , the image of @xmath110 is contained in the closure of the orbit of at most two dimensional subtorus acting on @xmath6 ( ( * ? ? ? * lemma 5.2 ) ) .",
    "because we consider more general tropical curves , we have to extend this notion .",
    "let @xmath13 be a weighted 3-valent tree and @xmath111 be a map which gives @xmath13 a structure of a tropical curve , and assume that the image @xmath66 has only one vertex @xmath112 .",
    "let @xmath113 be the edges of @xmath66 ( some of these can coincide , and these correspond to the unbounded edges of @xmath13 in a natural way ) .",
    "let @xmath6 be a toric variety associated to @xmath3 .",
    "[ def : typev ] a non - constant torically transverse map @xmath108 is called _ of type @xmath3 _ , or _ of type @xmath112 _ when @xmath45 is clear from the context , if @xmath110 satisfies the following property :    * let @xmath114 be an edge of @xmath66 and let @xmath115 be the weight of @xmath114",
    ". then @xmath116 has an intersection with the divisor @xmath117 with intersection multiplicity @xmath115 , and there is no intersection between @xmath116 and toric divisors other than these .",
    "note that when some edges of @xmath113 coincide , then there are several intersections between @xmath116 and the corresponding toric divisor .",
    "let @xmath3 be a tropical curve satisfying assumption a. let @xmath6 be a toric variety associated to @xmath3 and @xmath118 be a degeneration of @xmath6 defined respecting @xmath3 .",
    "let @xmath8 be the central fiber .",
    "[ def : oftype ] a pre - log curve @xmath14 is called _ of type @xmath3 _ if for any @xmath119}$ ] , the restriction of @xmath120 to the components @xmath121 of @xmath93 mapped to @xmath122 is a rational torically transverse curve of type @xmath123 , where @xmath124 is the set of open subgraphs of @xmath13 which are the union of a connected component of @xmath125 and the open part of the edges emanating from the vertices of it .",
    "[ def : intergraph ] when @xmath14 is a pre - log curve of type @xmath3 , let @xmath126 be the graph obtained from @xmath13 by contracting all the bounded edges of each @xmath127 in the notation of definition [ def : oftype ] . the graph @xmath126 is the dual intersection graph of @xmath93 ( containing the set of unbounded edges , which is the information of intersection of @xmath128 and some of the toric divisors of @xmath8 seen as marked points of @xmath93 ) and it is clear that the map @xmath12 factors through @xmath126 .     ( the picture on the left )",
    "is mapped to a graph in @xmath10 ( the picture on the right ) .",
    "the bold line segment in @xmath13 is the inverse image of the vertex @xmath38 and the union of the bold line segment and the dotted line segments in @xmath13 is the subgraph @xmath129 . in this example",
    ", the graph @xmath126 is the same as the picture on the right as an abstract graph.,height=151 ]    the components @xmath121 are disjoint , since otherwise the graphs @xmath130 and @xmath131 have a common edge @xmath44 for some @xmath132 and @xmath133 , but since both of the ends of @xmath44 are mapped to the vertex @xmath112 , the edge @xmath44 must be contracted , contracting the definition of @xmath134 .",
    "note that each @xmath135 is an irreducible rational curve .",
    "[ def : maximally degenerate ] a pre - log curve @xmath14 is _ maximally degenerate _ if it is of type @xmath3 for some _ immersive _ tropical curve @xmath3 .",
    "[ def : smoothable ] a 3-valent tropical curve @xmath3 is _ smoothable _ if there is a pre - log curve @xmath14 of type @xmath3 with the following property .",
    "namely , there exists a family of stable maps over @xmath136 ( or an open disk ) @xmath137 such that @xmath138 is a flat family of pre - stable curves whose fiber over @xmath139 is isomorphic to @xmath93 , and the restriction of @xmath140 to @xmath93 is a stable map equivalent to @xmath15 .",
    "we also call such a pre - log curve _ smoothable_.    the smoothability of a tropical curve does not depend on the choice of a toric variety @xmath6 associated to it or a degeneration of @xmath6 defined respecting the tropical curve .",
    "see ( * ? ? ?",
    "* section 5 ) , for more information about lines and maximally degenerate pre - log curves .",
    "given an immersive 3-valent tropical curve @xmath3 which is non - superabundant , we can construct maximally degenerate pre - log curves of type @xmath3 ( ( * ? ? ?",
    "* proposition 5.7 ) ) , and vice versa ( ( * ? ? ?",
    "* construction 4.4 ) ) .",
    "the arguments there together with some additional arguments extend this result to not necessarily immersive non - superabundant 3-valent tropical curves and pre - log curves of type @xmath3 .",
    "in fact , if @xmath3 satisfies assumption a , there is a pre - log curve of type @xmath3 ( see corollary [ cor : genexist ] ) .",
    "however , when the tropical curve is superabundant , a degenerate curve of the given type might not exist , see examples [ ex:1 ] and [ ex:1.5 ] .",
    "the smoothing of these degenerate curves of type @xmath3 are studied in the following sections through log - smooth deformation theory @xcite . for informations about log structures relevant to our situation , see ( * ? ? ?",
    "* section 7 ) . we do not repeat it here , because nothing new about log structures is required here , other than those given in @xcite .",
    "the purpose of this section is to give a proof of theorem [ thm : nonsuperabundant ] .",
    "although theorem [ thm : nonsuperabundant ] concerns immersive tropical curves , most of the arguments are valid for tropical curves which only satisfy assumption a. the extension to the case including not necessarily immersive curves is given in section [ sec : higherval ] ( theorem [ thm : corresp ] ) .    [ rem:2val ]",
    "let @xmath3 be a tropical curve and @xmath6 be a toric variety associated to it .",
    "let @xmath7 be a degeneration of @xmath6 defined respecting @xmath3 .",
    "let @xmath85 be a polyhedral decomposition of @xmath30 defining @xmath9 .",
    "it is in general necessary to allow divalent vertices to @xmath13 to assure the property @xmath141 } ) = \\gamma^{[0]}$ ] .",
    "so if @xmath14 is a pre - log curve of type @xmath3 , then there are components of @xmath93 corresponding to these divalent vertices . however",
    ", these components essentially do not play any role in the argument below .",
    "so for simplicity we neglect them and regard @xmath13 as if it has only 3-valent vertices .",
    "let @xmath3 be a 3-valent non - superabundant tropical curve and let @xmath14 be a pre - log curve of type @xmath3 ( such a curve exists , see corollary [ cor : genexist ] )",
    ". we can give it log - structures as in ( * ? ? ?",
    "* proposition 7.1 ) .",
    "there are logarithmic tangent sheaves associated to these log - structures , and the tangent space and the obstruction space of the deformation of such a curve are calculated in terms of these sheaves .",
    "suppose that a lift @xmath142 of @xmath15 is constructed .",
    "here @xmath143/\\epsilon^k$ ] .",
    "then as in the proof of ( * ? ? ?",
    "* lemma 7.2 ) , an extension @xmath144 of @xmath145 exists and such extensions are parametrized by the space @xmath146 , here @xmath147 is the logarithmic tangent sheaf .    on the other hand , the obstruction to lift the map @xmath148 to some @xmath149 is given by the cohomology classes in @xmath150 ( note that even if we consider the deformation of @xmath151 , the obstruction lies in the cohomology on @xmath93 ) , here @xmath152 is the logarithmic tangent sheaf relative to the base , and we will study this group in the following subsections . as in usual deformation theory of smooth varieties , there is a following standard result in the log - smooth deformation theory @xcite .",
    "if @xmath153 vanishes , then the pre - log curve @xmath15 is smoothable .",
    "we begin with the two dimensional case which is easier but illustrates the problem to solve in more general cases . also , it will give a simple algebraic geometric proof of a part of mikhalkin s correspondence theorem ( ( * ? ? ?",
    "* theorem 1 ) ) .",
    "the problem is the smoothing of pre - log curves in the central fiber @xmath8 to a family of curves in @xmath9 .",
    "the sheaf @xmath154 fits in the exact sequence @xmath155 note that we have the natural isomorphism @xmath156 here @xmath26 is the free abelian group of rank 2 such that the fan defining a general fiber of @xmath9 lies in @xmath157 .",
    "the logarithmic tangent sheaf @xmath158 has degree @xmath159 , where @xmath160 is the number of the unbounded edges of the tropical curve @xmath3 which gives the type of the pre - log curve ( so that @xmath161 has @xmath160 marked points aside from the nodes ) .",
    "so the logarithmic normal sheaf @xmath162 has degree @xmath163 . then by serre duality for nodal curves",
    ", one can easily prove @xmath164 ( this is the point where the assumption that @xmath6 is two dimensional simplifies the argument ) .",
    "so we have the surjection @xmath165 however , @xmath166 is just the tangent space of the moduli space of deformations of @xmath161 , so the obstruction classes in @xmath167 can be cancelled when we deform the moduli of the domain of the stable maps .    that is , given the map @xmath15 , the obstruction to deform it is defined , and it determines a class @xmath168 .",
    "this class can be calculated in the following way .",
    "take a suitable open covering @xmath169 of @xmath93 so that there is a first order lift @xmath170 of the restriction of @xmath15 to each of the open set @xmath171 ( the existence of such a covering follows from the general theory of log smooth deformations ) .",
    "the set of lifts on @xmath171 forms a torsor over the abelian group of sections @xmath172 , and the differences of the lifts on the intersections @xmath173 determine a @xmath154-valued ech 1-cocycle , which represents the class @xmath174 .",
    "on the other hand , the class @xmath174 is mapped to @xmath175 .",
    "this implies that we can perturb each lift @xmath176 by a section of @xmath172 so that the images of the differences of the lifts in @xmath177 are 0 not only cohomologically but also in the level of cocycles .",
    "then the differences of the lifts give @xmath158-valued ech 1-cocycle , where we see @xmath158 as a subsheaf of @xmath154 in the natural way .",
    "in particular , the class @xmath174 can be seen as a class of @xmath146 .",
    "this implies that the domain @xmath178 of the local lift @xmath176 glues into a global lift @xmath179 of @xmath93 , so that the natural map @xmath180/t^2 $ ] gives a deformation of @xmath93 corresponding to the class @xmath174 , and the maps @xmath176 can be also glued into a global map @xmath181 . the existence of higher order lifts can be proved similarly .",
    "thus , we can lift @xmath182 to @xmath183 for any @xmath68 in this situation .",
    "once the existence of a lift of the map is shown , the remainder of the proof of @xcite applies verbatim , so this ( and the results concerning weights and incidence conditions as propositions 5.7 , 7.1 and 7.3 of @xcite ) gives another proof of mikhalkin s correspondence theorem for plane closed curves .",
    "+ the principle of the proof is the same for general higher dimensional cases , _ in so far as the curve is non - superabundant_. namely , we can show that the obstruction classes in @xmath184 come only from the moduli of the curve itself .",
    "we will show this in the next subsection , which gives the proof of theorem 1 .      in this section",
    "we prove theorem [ thm : nonsuperabundant ] .",
    "although theorem [ thm : nonsuperabundant ] is a statement for immersive tropical curves , most part of the proof is valid for not necessarily immersive tropical curves and their associated degenerate holomorphic curves . for later use",
    ", we give arguments valid for these general cases whenever possible .",
    "let us consider the case when the rank of @xmath26 is not less than three .",
    "we use the same notations as in the previous subsection .",
    "the obstruction to lift @xmath182 lies in @xmath167 .",
    "consider the exact sequence ( [ eq : deform ] ) of subsection 3.1 and the associated cohomology exact sequence .",
    "we have @xmath185 the logarithmic tangent sheaf @xmath158 is , when it is restricted to a component of @xmath161 with @xmath186 special points ( that is , the nodes and the points corresponding to the unbounded edges of @xmath13 . in other words , @xmath186 is equal to the number of edges in @xmath126 ( see definition [ def : intergraph ] ) emanating from the vertex corresponding to the relevant component of @xmath93 ) , isomorphic to @xmath187 . note that @xmath186 is at least 3 ( see remark [ rem:2val ] ) .",
    "so @xmath188 we have @xmath189 . so @xmath190 the cohomology group @xmath166 is the tangent space to the moduli space of the deformations of the curve @xmath161 itself . by serre duality for nodal curves ,",
    "the space @xmath166 is isomorphic to the dual of the space @xmath191 . here",
    "@xmath192 is the dualizing sheaf , which is isomorphic to the sheaf of 1-forms with logarithmic poles at nodes .",
    "so when a component @xmath193 of @xmath161 corresponding to a vertex @xmath112 of @xmath126 ( see definition [ def : intergraph ] ) has @xmath60 nodes , @xmath194    to give a section of @xmath191 , the value of the section on each component must coincide at the nodes .",
    "the rank ( over @xmath136 ) of @xmath191 can be easily calculated as follows .",
    "consider the dual graph of @xmath126 of @xmath161 .",
    "we first give every vertex @xmath112 of @xmath126 a @xmath195-dimensional vector space @xmath196 , corresponding to @xmath197 where @xmath198 is the valence of the vertex @xmath112 in @xmath126 and @xmath199 is the number of bounded edges among them . consider the space @xmath200}}\\bbb c^{\\sigma_v+s_v-3}.\\ ] ] then every bounded edge imposes one dimensional linear condition on the space @xmath201}}\\bbb c^{\\sigma_v+s_v-3}$ ] .",
    "this is because a bounded edge imposes the matching of the values of the sections at the node corresponding to the edge .",
    "the vector space cut by these conditions has dimension @xmath202 here @xmath38 is the number of the vertices of @xmath126 and @xmath203 is number of bounded edges .",
    "we write @xmath204 here @xmath160 is the number of the unbounded edges and @xmath205 is the number of edges .    by euler",
    "s equality , we have @xmath206 on the other hand , @xmath207 furthermore , by definition we have @xmath208 from these equalities , we have @xmath209 so @xmath210    now we consider @xmath167 . as above argument , we have , @xmath211 in this case ,",
    "if a component @xmath212 of @xmath161 has @xmath60 nodes , then the restriction of @xmath213 will be isomorphic to @xmath214 .",
    "the next is the key to this section .",
    "the proof is important as well , because it plays a central role in the description of the superabundant curves in the next section .",
    "[ prop : canonical ] @xmath215 .    by serre duality",
    ", it suffices to show @xmath216 .",
    "let @xmath217 be an affine coordinate of @xmath218 and let @xmath219 be the coordinates of distinct points on @xmath220 . assume for simplicity that none of @xmath221 is @xmath222 .",
    "let @xmath223 be the sheaf of meromorphic 1-forms allowing logarithmic poles at @xmath221 .",
    "then the space of sections @xmath224 is an @xmath225-dimensional vector space spanned by @xmath226 taking @xmath227 as frames of @xmath223 at @xmath228 respectively , the section @xmath229 takes values @xmath230 at @xmath231 respectively . here",
    "non - zero values are taken at @xmath232 and @xmath233 .",
    "in other words , the space of sections @xmath224 is identified with the subspace of @xmath234 defined by @xmath235    using this convention , we reduce the problem to a combinatorial one . consider a vertex @xmath112 of the graph @xmath126 and let @xmath60 be the number of bounded edges emanating from it as above .    1 .   when @xmath236 , then the space of sections of @xmath237 is trivial , and we give the value 0 to all the edges emanating from @xmath112 .",
    "when @xmath238 , then we give @xmath139 to the unbounded edges and give values @xmath239 satisfying @xmath240 to the bounded edges .    thus , we give a number to each flag of @xmath126 .",
    "we say that a numbering is _",
    "compatible _ when the sum of the values of the two flags associated to a bounded edge is zero , reflecting the relation of the frames @xmath241 at a node , here @xmath242 are coordinates of the two branches at the node .",
    "then @xmath243 is the number of linearly independent compatible numberings .",
    "so our task is reduced to the calculation of the number of linearly independent compatible numberings .",
    "now we prove the proposition by induction on @xmath5 .",
    "when @xmath244 , there is necessarily a component with @xmath236 and so we give the value 0 to the unique bounded edge .",
    "we do this for all the vertices with @xmath236 .",
    "then remove all the vertices with @xmath236 and the unbounded edges emanating from them .",
    "now we have another tree and so again there are vertices with @xmath236 . for any one of them ,",
    "all the edges except the unique bounded edge emanating from it have the value 0 , and so the value of the remaining edge must be 0 by the rule . by induction , we have @xmath245 in this case .    now assume that we proved @xmath216 for @xmath246 , with @xmath247 .",
    "consider a tropical curve @xmath3 of genus @xmath248 .",
    "let @xmath44 be an edge which is a part of a loop of @xmath126 .",
    "cutting @xmath44 at the middle and extending both ends to infinity , we obtain a curve @xmath249 with genus @xmath250 .        by induction hypothesis",
    ", there is @xmath250 dimensional freedom to give numbers to the flags of @xmath249 compatibly .",
    "let @xmath251 be the vertices of @xmath44 and choose one of the loops of @xmath126 which contains @xmath44 .",
    "the numbering around @xmath251 looks like figure [ fig : change edge ] . here",
    "@xmath252 , and when @xmath236 at @xmath112 or @xmath253 , then @xmath254 or @xmath255 must be 0 , respectively .",
    "now let us return to @xmath126 .",
    "first let us give a value 0 to the flags @xmath256 and @xmath257 and give the same values @xmath258 as @xmath249 to the remaining flags of @xmath126 .",
    "this is a compatible numbering of @xmath126 .",
    "then give an arbitrary value @xmath259 to the flag @xmath256 , and add values @xmath260 successively to the adjacent flags of the loop .",
    "these again give compatible numberings of @xmath126 , which have one more freedom given by the value of @xmath259 , compared to the numberings of @xmath249 .",
    "so we have @xmath261    conversely , assume @xmath262 .",
    "let @xmath263 be the set of flags of @xmath126 and @xmath264 be the linear space of complex functions on this discrete set .",
    "we write elements of @xmath265 by @xmath266 , @xmath267 .",
    "note that the space @xmath268 of compatible numberings is a linear subspace of @xmath265 . by assumption",
    ", this subspace has dimension not less than @xmath269 . choose any flag @xmath270 which is a part of some loop of @xmath126 .",
    "the hyperplane @xmath271 cuts @xmath268 so that the intersection @xmath272 is a linear subspace of dimension not less than @xmath248 . now cut the edge @xmath273 at the middle point , and extend both of the ends to infinity ( as in figure [ fig : change edge ] ) .",
    "then we obtain another graph @xmath249 of genus @xmath250 .",
    "it is easy to see that each element of @xmath274 gives a compatible numbering of @xmath275 . on the other hand , by induction hypothesis",
    ", the dimension of the space of compatible numberings of @xmath275 is equal to @xmath250 .",
    "this is a contradiction .",
    "so we have @xmath276 .",
    "this proves the proposition .",
    "+ _ proof of theorem [ thm : nonsuperabundant ] .",
    "_ let us write the dimension of @xmath277 by @xmath278 and the dimension of @xmath279 by @xmath280 . in the proof of (",
    "* proposition 5.7 ) , it is shown that when the tropical curve @xmath3 is immersive , then @xmath278 is the same as the dimension of the parameter space of the deformations of @xmath3 ( this is the only place we use the assumption that the tropical curve @xmath3 is immersive ) . by the long exact sequence",
    ", we have @xmath281 which is just the expected dimension of the parameter space of the corresponding tropical curves ( see definition [ def : superabundancy ] ) .",
    "so the tropical curve is non - superabundant if and only if @xmath282 . in this case , the obstruction @xmath283 is cancelled by the freedom of the moduli of the curve @xmath166 as in the argument in subsection [ subsec:2dim ] .",
    "so we can lift @xmath182 to @xmath183 for any @xmath68 .",
    "having the existence of such a lift , we can apply the proof of @xcite verbatim to show that the corresponding pre - log curves actually deform into smooth curves , and that the tropical curves and corresponding holomorphic curves have the same number of parameters to deform .",
    "so far , we proved that assuming a pre - log curve of type @xmath3 exists , it can be smoothed .",
    "the existence of such a curve is proved in corollary [ cor : genexist ] in a more general setting .",
    "this proves theorem 1 .",
    "[ rem : reg_highval ]    1 .",
    "it is very plausible that when the tropical curve @xmath3 is non - superabundant , then the dimension of @xmath284 is equal to the dimension of the parameter space of the deformations of @xmath3 without the assumption that the tropical curve is immersive .",
    "when this is shown , then the cohomology group @xmath285 vanishes for any pre - log curve @xmath14 of type @xmath3 as in the proof of theorem [ thm : nonsuperabundant ] , so that all these curves are smoothable .",
    "+ however , as we will see in section [ sec : higherval ] , when there are higher valent vertices in @xmath66 , then the relation between the parameter space of tropical curves and the space @xmath284 , which is the tangent space of the pre - log curve of type @xmath3 , becomes less transparent , unless the curve @xmath15 is in a special configuration .",
    "so even when the tropical curve is non - superabundant , if it is not immersive , in general we can not apply the above argument to _ all _ pre - log curves of type @xmath3 .",
    "+ on the other hand , for a generic pre - log curve of type @xmath3 , the proof of theorem [ thm : corresp ] shows that the dimension of @xmath284 is equal to the dimension of the parameter space of the deformations of @xmath3 .",
    "2 .   note that most of the arguments in this subsection do not use the assumption that the tropical curve @xmath3 is non - superabundant .",
    "we used it only at the last step where we deduced @xmath282 from the assumption .",
    "in particular , the rest of the argument is valid for immersive tropical curves which are not necessarily non - superabundant .",
    "+ an important point to note here is that when the tropical curve is superabundant , it can happen that there is no corresponding degenerate holomorphic curve in the central fiber of a toric degeneration defined respecting the given tropical curve .",
    "however , looking at the equations appeared in the proof , one notices that all of them come from the conditions locally imposed on the components of @xmath93 .",
    "+ in particular , the sheaves @xmath286 and @xmath287 can be defined by gluing the local pieces on each component , even if the global map @xmath15 does not actually exist .",
    "the isomorphism class of the sheaf @xmath287 only depends on the combinatorial type of @xmath3 .",
    "thus , the statements which concern with the ranks of the cohomology groups make sense even when a degenerate holomorphic curve does not exist .",
    "+ as a result , the freedom to deform an immersive tropical curve is given by @xmath288 regardless of its realizability by a degenerate holomorphic curve .",
    "+ this point is useful in proving some results concerning the existence of pre - log curves of a given type , see the proofs of corollary [ cor : nonsuperabund ] and lemma [ lem : refineexist ] .",
    "applying the same type of combinatorics introduced in the proof of proposition [ prop : canonical ] , we can analyze @xmath289 . as we saw , if @xmath289 vanishes , we know that the pre - log curves corresponding to the tropical curve can be smoothed .",
    "in this section , we give an effective method to calculate @xmath289 ( theorem [ thm : obstruction ] ) .",
    "since , under assumption a , superabundancy only occurs when the dimension @xmath2 of the ambient space is at least 3 , we assume @xmath290 hereafter . in this subsection ,",
    "we assume @xmath3 is an immersive tropical curve . thus , in this subsection the graphs @xmath13 and @xmath126 ( see definition [ def : intergraph ] ) are identical .",
    "in particular , the dual intersection graph @xmath126 of @xmath93 is 3-valent .",
    "more general situations will be considered in section [ sec : higherval ] .",
    "we also assume there is no divalent vertex for notational simplicity , as in the previous section ( see remark [ rem:2val ] ) .    by serre duality ,",
    "we have @xmath291 let @xmath112 be a vertex of @xmath13 and @xmath212 be the component of @xmath93 corresponding to @xmath112 .",
    "then since each component of @xmath93 has three special points , @xmath292 and @xmath293 , here @xmath60 is the number of nodes of the component . from this",
    ", it is easy to see that when @xmath236 , @xmath294 holds .",
    "when @xmath295 , we have @xmath296 on the corresponding component .",
    "note that there is a following inclusion : @xmath297    the edges emanating from @xmath112 span the two dimensional subspace @xmath298 of @xmath299 .",
    "then it is clear that @xmath300 is given by the subspace @xmath301 .",
    "namely , under the convention as in the proof of proposition [ prop : canonical ] , an element of @xmath300 is given by the following data :    1 .",
    "give 0 to the flag @xmath302 , where @xmath273 is the unique unbounded edge emanating from @xmath112 .",
    "2 .   give @xmath303 , where @xmath304 , to the remaining flags associated to @xmath112 .",
    "let us consider the case @xmath305 . for simplicity ,",
    "first we consider the case @xmath306 .",
    "let @xmath212 and @xmath112 be as above . in this case , @xmath307 so @xmath308 is isomorphic to @xmath136 . on the other hand , @xmath309 on this component .",
    "here @xmath310 are basis vectors of the space of holomorphic 1-forms on @xmath212 allowing logarithmic poles at the three nodes of @xmath93 contained in @xmath212 , which we used in the proof of proposition [ prop : canonical ] .",
    "let @xmath311 be the slopes of the edges of the image @xmath66 emanating from @xmath112 .",
    "here @xmath312 are the weights of the relevant edges and @xmath313 are the primitive integral vectors . recall that these edges correspond to the intersections between @xmath212 and the toric divisors of the toric surface defined by the two dimensional fan whose 1-skeleton is given by the tropical curve with a unique vertex @xmath112 ( see ( * ? ? ?",
    "* definition 5.1 ) ) .",
    "we take an inhomogeneous coordinate @xmath217 on @xmath212 so that the values of @xmath217 at the points corresponding to the edges of slopes @xmath314 are 0 , 1 and @xmath222 , respectively . as in the proof of proposition",
    "[ prop : canonical ] , we can take @xmath310 and local frames of the sheaf at the nodes so that @xmath315 and @xmath316    let @xmath317 be the generators of @xmath318 , @xmath319 in @xmath320 such that @xmath321 .",
    "then the space of sections @xmath308 is given by @xmath322    the stalks of @xmath158 at 0 , 1 , @xmath323 are spanned by @xmath324 , and @xmath325 , respectively , considered as subsets of @xmath326 .",
    "sections of @xmath327 must annihilate these vectors , and this condition determines the mentioned subspace in the statement .",
    "+ from this lemma , when we represent the sections in @xmath308 by a 3-valent vertex with some values attached to the flags as in the proof of proposition [ prop : canonical ] , we are forced to give the values @xmath328 and @xmath329 of @xmath330 to the edges corresponding to @xmath331 and @xmath222 , respectively . here",
    "@xmath174 is an element of @xmath136 .    from this",
    ", one sees that in the general case where @xmath2 is an integer with @xmath290 , the space @xmath308 is described as follows .",
    "namely , fix an inhomogeneous coordinate @xmath217 on @xmath212 and take sections @xmath310 of @xmath332 as above .",
    "let @xmath333 and @xmath334 be the three edges of @xmath13 emanating from @xmath112 and let @xmath335 be their weights .",
    "let @xmath336 be the primitive integral generators of the images of these edges by @xmath45 , and @xmath337 be the subspaces which are the annihilators of @xmath338 , @xmath339 and @xmath340 , respectively .",
    "then , one sees the following .",
    "the space @xmath341 is naturally identified with the subspace @xmath342 of @xmath343 .    note that elements in @xmath344 automatically annihilate @xmath340 at @xmath345 , since @xmath346 .",
    "also note that the sum of the values of a section of @xmath341 at @xmath347 is @xmath348 .    using these results",
    ", we can combinatorially describe the space of obstructions . as in the proof of proposition",
    "[ prop : canonical ] , we give values to the flags of @xmath13 and impose compatibility conditions to the bounded edges . but",
    "this time , the value is in @xmath330 , not just a complex number .",
    "let @xmath349 be the loop part of @xmath13 ( definition [ def : loops ] ) , where @xmath350 are connected components .",
    "this is a closed subgraph of @xmath13 .",
    "let @xmath351 .",
    "the closure of a connected component of @xmath352 is a tree .",
    "there are two types of these trees , namely :    * it contains only one flag whose vertex is contained in a loop . * otherwise .    by an inductive argument",
    ", it is easy to see that all the flags in a component of type @xmath353 must have the value zero , including the unique flag whose vertex is contained in a loop .",
    "for the type @xmath354 too , we have the following result .",
    "[ lem : bridge ] all the flags of a component of type @xmath354 , including the flags whose vertices are contained in the loops , must have the value @xmath348 .",
    "note that @xmath13 can be written in the following form ( figure [ fig : disks ] ) .",
    "here , each shaded disk corresponds to some component @xmath350 of the loop part of @xmath13 . by definition of @xmath355 ,",
    "if we regard these disks as vertices , we obtain another tree @xmath356 .",
    "recall the above remark that all the edges contained in the components of type @xmath353 have the value zero . in figure",
    "[ fig : disks ] , this means that all the edges ( outside the shaded disks ) except the ones labeled by @xmath357 have the value zero .",
    "we call the edges outside the shaded disks the _ bridges_.    now , by the fact that @xmath356 is a tree , it is easy to see that there is a shaded disk such that the bridges emanating from it have the value 0 except one bridge",
    ". let us call this bridge @xmath358 and call the remaining bridges @xmath231 . by the condition that the sum of the values of the three edges emanating from each vertex is zero",
    ", we see that the sum of the values attached to @xmath359 is zero .",
    "since @xmath231 have the value zero , it follows that @xmath358 has also the value zero . by induction on the number of shaded disks",
    ", we see that all the bridges , and so all the edges of the components of type @xmath354 also have the value zero . + according to this lemma , we only need to consider the flags contained in some bouquet ( i.e. , a connected component of @xmath360 ) .",
    "let @xmath350 be a bouquet .",
    "this is a graph with bivalent and 3-valent vertices .",
    "every 3-valent vertex @xmath112 of @xmath350 determines a two dimensional subspace of @xmath299 spanned by the edges emanating from it .",
    "we write it by @xmath298 as before .",
    "also , every edge @xmath44 of @xmath350 determines a one dimensional subspace of @xmath299 .",
    "let us describe the space @xmath361 .",
    "let @xmath362 be the set of 3-valent vertices of @xmath360 .",
    "cutting @xmath360 at each @xmath363 , we obtain a set of piecewise linear segments @xmath364 .",
    "let @xmath365 be the linear subspace of @xmath299 spanned by the direction vectors of the segments of @xmath366 .",
    "the following theorem follows from the argument so far .",
    "[ thm : obstruction ] let @xmath3 be a 3-valent immersive tropical curve .",
    "elements of the space @xmath367 are described by the following procedure .",
    "a.   give the value zero to all the flags not contained in @xmath360 .",
    "b.   give a value @xmath368 in @xmath369 to each of the flags associated to the edges of @xmath366 . c.   the data in @xmath370 gives an element of @xmath367 if and only if the following conditions are satisfied . 1 .",
    "at each vertex @xmath112 of @xmath13 , @xmath371 holds as an element of @xmath372 . here",
    "@xmath373 are the data attached to the three flags in @xmath13 which have @xmath112 as the vertex .",
    "2 .   the data in @xmath370 is compatible on each edge of @xmath366 , in the sense that the sum of the values attached to the two flags of any edge of @xmath366 is 0 .",
    "[ thm : dim ] let @xmath3 be a 3-valent immersive tropical curve . then the number of parameters to deform it is given by @xmath374 here @xmath367 is the space in theorem [ thm : obstruction ] .",
    "as we mentioned in the proof of theorem [ thm : nonsuperabundant ] , the rank @xmath278 of the cohomology group @xmath375 is the same as the dimension of the parameter space of the corresponding tropical curve .",
    "also , recall we have the equality ( see the last part of the proof of theorem [ thm : nonsuperabundant ] ) @xmath376 where @xmath280 is the rank of the space @xmath367 .",
    "these observations prove the theorem .",
    "[ rem : thm40add ] an important remark is , as we noted in remark [ rem : reg_highval ] ( 2 ) , the sheaves @xmath286 and @xmath287 exist even when the map @xmath15 does not exist globally .",
    "they can be constructed by gluing local pieces on each component , and these local pieces are determined by the combinatorial data of the tropical curve @xmath3 around each vertex corresponding to the components of @xmath93 .",
    "in particular , the space @xmath367 also makes sense and theorem [ thm : dim ] tells us the number of freedom to deform the given immersive tropical superabundant curve even if a pre - log curve of type @xmath3 does not exist .",
    "we see that it almost suffices to check the conditions only at the 3-valent vertices of @xmath360 . the conditions ( i ) and",
    "( iii ) ( @xmath377 ) imply that at a divalent vertex of @xmath360 , the values @xmath378 associated to the relevant two flags satisfy @xmath379 .",
    "together with the condition ( iii ) ( b ) , we see that on each @xmath366 , the values associated to the flags are unique up to sign .",
    "the following is immediate from this , because when the genus of @xmath13 is one , there is no 3-valent vertex in @xmath360 .",
    "see also @xcite .",
    "when @xmath3 is an immersive 3-valent tropical curve of genus one , then @xmath380 , here @xmath274 is the linear subspace of @xmath299 spanned by the direction vectors of the segments of the loop of @xmath13 .",
    "let us consider genus two immersive tropical curves @xmath381 and @xmath382 in @xmath383 given in figure [ fig : supex ] .",
    "the curve @xmath381 has 6 unbounded edges of directions @xmath384 the bounded edges are :    * three parallel vertical edges of direction @xmath385 . * three pairs of parallel edges of directions @xmath386 respectively .",
    "the curve @xmath382 is a modification of @xmath381 at the vertices @xmath377 and @xmath259 .",
    "namely :    1 .   delete the edge @xmath387 ( as well as the neighboring unbounded edges ) .",
    "2 .   add a pair of parallel unbounded edges of direction @xmath388 , and a pair of parallel bounded edges of direction @xmath389 of the same length .",
    "3 .   connect the end points @xmath390 of the bounded edges added in ( 2 ) by a segment of direction @xmath385 .",
    "4 .   add unbounded edges of directions @xmath391 at the vertices @xmath390 , respectively .",
    "using theorem [ thm : obstruction ] , it is easy to see that @xmath381 is superabundant , while @xmath382 is non - superabundant .",
    "namely , the set of piecewise linear segments @xmath364 of these tropical curves are given by the following three components , respectively ( figure [ fig : decomp ] ) .",
    "we write the corresponding linear subspaces of @xmath392 by @xmath393 , etc .. then , using standard nondegenerate quadratic form on @xmath394 to identify it with its dual , @xmath395 then it is easy to see that the space @xmath367 for @xmath381 is a one dimensional vector space .",
    "thus , @xmath381 is superabundant .    on the other hand , since @xmath396 , @xmath397 .",
    "from this , it is easy to see that the space @xmath367 for @xmath382 is @xmath398 .",
    "therefore , @xmath382 is non - superabundant .      in this subsection ,",
    "we extend theorem [ thm : dim ] to tropical curves which are not necessarily immersive , but satisfy assumption a. in fact , the modification is quite straightforward .",
    "we assume the dimension @xmath2 of the ambient space is at least 3 as in subsection [ subsec : main ] .",
    "let @xmath3 be a tropical curve satisfying assumption a , with a given combinatorial type . by ( iii ) of assumption",
    "a , @xmath3 can be deformed into an immersive tropical curve @xmath399 . since the parameter space of tropical curves of a given combinatorial type satisfying assumption",
    "a is a convex polyhedral domain ( remark [ rem : assump ] ( 4 ) ) , the number of parameters to deform @xmath3 is the same as those to deform @xmath399 .    on the other hand , we saw in theorem [ thm : dim ] and remark [ rem : thm40add ] that the number of parameters to deform @xmath399 can be calculated from the combinatorics of the tropical curve .",
    "thus , we have the following .",
    "[ thm : general ] let @xmath3 be a tropical curve satisfying assumption a. then the number of parameters to deform it is given by @xmath400 where the dimension of the space @xmath367 is calculated as in theorem [ thm : obstruction ] for an immersive tropical curve @xmath399 with the same combinatorial type as @xmath3 .",
    "[ rem : h ] when there are two tropical curves @xmath401 and @xmath402 such that the images @xmath403 and @xmath404 are the same , it can happen that the numbers of parameters to deform them are different .",
    "see figure [ fig : diffdim ] .    ) .",
    "the other is a limit of a non - superabundant tropical curve and has five parameters to deform ( @xmath405).,width=302 ]",
    "although theorem [ thm : dim ] , the formula for the number of parameters to deform a 3-valent immersive tropical curves , was proved using the correspondence to holomorphic curves ( theorem [ thm : obstruction ] ) , its generalization to not necessarily immersive curves , corollary [ thm : general ] , was proved from theorem [ thm : dim ] by a combinatorial argument .",
    "it is natural to ask for the correspondence between not necessarily immersive curves ( that is , tropical curves such that some of the edges of @xmath13 are contracted and the image @xmath66 has higher valent vertices ) and holomorphic curves , and seek for a direct proof of corollary [ thm : general ] .",
    "in fact , describing holomorphic curves corresponding to higher valent vertices is itself very important in the study of superabundant tropical curves .",
    "we give a fundamental formalism for this description ( see definitions [ def : refinedtype ] , [ def : refinedtype2 ] and [ def : refinedtype3 ] ) .",
    "then , using this formalism , we generalize theorem [ thm : obstruction ] to describe the dual obstruction cohomology group associated to holomorphic curves corresponding to a tropical curve satisfying assumption a ( in particular , it need not be immersive ) in theorem [ thm : obstruction2 ] .",
    "it turns out that the generalization of theorem [ thm : obstruction ] to the case with higher valent vertices is not straightforward .",
    "although it is possible to calculate the dual obstruction cohomology group of an explicitly given degenerate holomorphic curve , giving a uniform statement covering all those curves is impossible .",
    "however , in some cases we can still give such a statement .",
    "this has an application to the correspondence theorem for non - superabundant tropical curves .",
    "we generalize the theorem for immersive curves ( theorem [ thm : nonsuperabundant ] ) to the case where the tropical curve satisfies only assumption a in theorem [ thm : corresp ]",
    ". this would be ( almost ) the optimal statement of a correspondence theorems for non - superabundant tropical curves ( see remark [ rem : reg_highval ] ( 1 ) and [ rem : any ] ( 2 ) ) .",
    "possibly more important is the role of higher valent vertices in the study of superabundant tropical curves . in subsection [ subsec :",
    "highval ] , we prove a new criterion for the smoothability of superabundant tropical curves of genus one ( theorem [ thm : loop ] ) which is totally different from the known criterion ( well - spacedness condition @xcite ) . also , we study a superabundant tropical curve of genus two in which a higher valent vertex plays a crucial role in the computation of the obstruction ( example [ ex:3 ] ) .    [ [ subsec : localobst ] ] computation of the dual obstruction cohomology groups associated to higher valent vertices ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    let @xmath406 be a 3-valent tree graph with unbounded edges ( see the beginning of subsection [ subsec : pre ] ) .",
    "let @xmath358 be the number of vertices of @xmath406 .",
    "then @xmath406 has @xmath407 unbounded edges .",
    "we assume all the edge weights of @xmath406 are 1 .",
    "we write by @xmath408 the unbounded edges .",
    "let @xmath409 be the map which contracts all the bounded edges and maps the edges @xmath410 onto the rays as follows : @xmath411 @xmath412 in particular , @xmath413 maps all the vertices of @xmath406 to the origin .",
    "clearly this satisfies the balancing condition and so gives @xmath406 a structure of a tropical curve .",
    "[ rem : comb ] it is important for later argument to note that in general there are many possibilities for the combinatorial isomorphism classes of the abstract graph @xmath406 , though such information is lost when we only look at the image @xmath414 .",
    "let @xmath3 , @xmath415 , be a tropical curve which contains a subgraph such that the restriction of @xmath45 to it is isomorphic to @xmath416 .",
    "we regard @xmath414 as a subgraph of @xmath66 .",
    "we assume @xmath3 satisfies assumption a. let @xmath6 be a toric variety associated to @xmath3 and @xmath9 be a toric degeneration of @xmath6 defined respecting @xmath3 .",
    "let @xmath14 be a pre - log curve of type @xmath3 .",
    "we put a log structure on @xmath93 so that the map @xmath15 extends to a morphism between log schemes ( with the log structure on @xmath9 coming from the toric structure ) and the composition of @xmath15 and the projection @xmath118 is log smooth .    as we mentioned several times , in general ,",
    "there are tropical curves such that there is no degenerate holomorphic curve of those types , even if we restrict our attention to embedded tropical curves . here",
    "we assume there is a degenerate holomorphic curve of type @xmath3 .",
    "our purpose is to calculate the obstruction cohomology group @xmath417 or its dual @xmath418 as in the previous section .",
    "as before , the log normal sheaf @xmath419 is locally free , and elements of @xmath418 can be described by gluing the sections of @xmath420 restricted to components of @xmath93 .",
    "so we first concentrate on the study of the restriction of @xmath421 to the component @xmath212 of @xmath93 corresponding to the vertex @xmath112 of @xmath66 which is modeled on the unique vertex of @xmath414 .",
    "it is easy to see the following .",
    "let @xmath60 be the number of nodes of @xmath93 contained in @xmath212 .",
    "this is the same as the number of the edges among @xmath423 of @xmath414 which are the restrictions of the bounded edges of @xmath66 .",
    "note that the restriction @xmath425 is isomorphic to @xmath426 .",
    "thus , @xmath427 the result follows from this .",
    "+ first , we assume all the edges @xmath428 are the restrictions of the bounded edges of @xmath13 , so that @xmath429 ( see remark [ rem : unbounded ] for general cases ) .",
    "the sheaf @xmath430 is the sheaf of meromorphic 1-forms such that they can have logarithmic poles at the points of @xmath212 which are mapped to the toric divisors of the corresponding component @xmath431 of @xmath8 . by the residue theorem , the residues @xmath432 at these poles",
    "sum up to 0 : @xmath433 let us fix an affine coordinate @xmath434 on @xmath212 such that the coordinates of the points corresponding to the edges @xmath435 are @xmath436 then we can take @xmath437 as the basis of the space of the sections of @xmath430 .",
    "recall that the log normal sheaf @xmath419 is the quotient @xmath438 and the sheaf @xmath286 is naturally isomorphic to the sheaf @xmath439 . here",
    "@xmath26 is the free abelian group of rank @xmath2 .",
    "then the sheaf @xmath440 can be seen as a subsheaf of the sheaf of @xmath320-valued meromorphic 1-forms . in particular ,",
    "a section of the restriction of @xmath441 to the component @xmath212 can be written in the form @xmath442 where @xmath443 and @xmath444 are complex numbers and @xmath445 , @xmath446 is a basis of @xmath26 such that @xmath445 , @xmath447 is a basis of the sublattice of @xmath26 obtained as the intersection of @xmath26 with the affine subspace of @xmath30 spanned by the edges emanating from the vertex @xmath112 .",
    "note that @xmath445 , @xmath447 can be taken so that @xmath448 is the direction vectors of @xmath41 .",
    "the vectors @xmath449 are the dual basis of @xmath448 .",
    "from now on , we assume @xmath450 for notational simplicity _ , since the directions @xmath449 , @xmath451 play rather trivial role . by the argument as in section [ sec : dual obstruction ] , it is easy to see that at the pole corresponding to the edge @xmath410 , the vector valued residue of the above section should take a value in the subspace @xmath452 of @xmath320 .",
    "this implies the following .",
    "a general curve of degree one in @xmath455 is defined by the equations of the following form : @xmath456 where @xmath457 are affine coordinates of @xmath455 corresponding to @xmath449 , and @xmath458 are homogeneous coordinates of @xmath455 .",
    "when @xmath459 , the log tangent vector of this line in @xmath455 is given by @xmath460 a section of @xmath440 should annihilate this log tangent vector .",
    "note that the vector @xmath449 is naturally identified with the log cotangent vector @xmath461 .",
    "let @xmath434 be the parameter of @xmath212 given by @xmath462 .",
    "taking @xmath434 in this way , the coordinates @xmath463 of the pole of @xmath464 are given by @xmath465 here we take @xmath466 ( so @xmath467 ) .",
    "then the above vanishing condition implies @xmath468 thus , we have the following .",
    "let us define a polynomial @xmath469 of @xmath434 by @xmath470 here @xmath471 is a linear polynomial of @xmath472 . here in the summation",
    "the set @xmath473 runs through all subsets of @xmath474 of cardinality @xmath475 .",
    "note that lemmas [ lem : cond1 ] and [ lem : cond2 ] give @xmath477 linear conditions to the coefficients @xmath478 .",
    "these are all the conditions imposed on these coefficients , giving @xmath479 freedom to the coefficients @xmath480 .",
    "this is compatible with the dimension calculated in lemma [ lem : highdim ] ( with @xmath481 ) .",
    "[ rem : unbounded ] when there are unbounded edges of @xmath406 which are also unbounded in @xmath13 , then the numbers @xmath443 associated to these edges should be set to 0 . explicitly ,",
    "when the edge with direction @xmath448 is also unbounded in @xmath13 , then @xmath482 , @xmath483 should be all 0 .",
    "the coefficient of the highest order term @xmath484 of @xmath469 is @xmath485 , but the other coefficients depend on the defining equations of the line @xmath486 and it is very difficult to describe explicitly the space of sections @xmath487 , contrary to the case of immersive tropical curves studied in the previous sections . since the space of the dual obstruction classes @xmath488 is given by gluing local sections on the components of @xmath93 , it becomes also difficult to study this space ( for example , to calculate its dimension is quite hard in general ) .",
    "in fact , the dimension of @xmath488 depends on the configuration of @xmath93 , and it will be almost impossible to give a description of the space @xmath488 in the form like theorem [ thm : obstruction ] for general @xmath93 . however , in accordance with the philosophy of tropical geometry , such a description will become possible when we consider some extreme configurations of @xmath93 .",
    "we use the notations introduced in the previous subsection .",
    "the full details of the calculations in this subsection will be fairly straightforward but long , so we write down sketches of these calculations , giving essential ideas .",
    "to study tropicalization , we consider coefficients @xmath489 of the defining equations of @xmath490 ( see the previous subsection ) as a function of a parameter @xmath491 and take the limit @xmath492 . more precisely ,",
    "since the relations @xmath493 for the coefficients @xmath443 depend only on @xmath494 , we may take @xmath495 and @xmath496 as functions of @xmath497 , where @xmath495 will never be 0 when @xmath498 is sufficiently small .    by replacing the coordinates @xmath499 , @xmath500 by @xmath501 and dividing the defining equations by @xmath495",
    ", we can assume the coefficients @xmath502 for all @xmath503 ( this corresponds to parallel transports on the side of tropical curves .",
    "so essentially this does not change the geometry either classically or tropically ) .",
    "thus , we take @xmath504 , @xmath447 , and assume these are laurent power series of the variable @xmath497 , which are convergent for @xmath505 with @xmath506 sufficiently small .",
    "[ def : ord ] for laurent power series @xmath507 where @xmath508 are integers and @xmath509 are complex numbers with @xmath510 , we define @xmath511 if the coefficient of the lowest order term of @xmath512 is @xmath513 for some @xmath514 .",
    "that is , @xmath511 if      [ def : exp ] for a laurent power series @xmath521 , let @xmath522 be the lowest exponent of @xmath497 whose coefficient is nonzero .",
    "we call this term of @xmath521 the _ leading term _ of @xmath521 , and call @xmath522 the _ order _ of @xmath521 .",
    "we define @xmath523 .",
    "now we study the relation between the line defined by the equations @xmath524 and its tropicalization .",
    "first assume that @xmath525 in this case , one calculates that the intersection of the tropical hyperplanes defined by the tropicalization @xmath526 ( see ( * ? ? ?",
    "* subsection 4.4 ) , here we adopt @xmath527-convension for tropical algebras ) of the defining polynomials @xmath528 of the line gives a tropical curve of the following form ( see figure [ fig:11 ] ) .          on the other hand , the result of ( * ? ? ?",
    "* proposition 3.9 ) claims that there is a polyhedral decomposition of @xmath529 such that @xmath532 is contained in the 1-skeleton whose associated toric degeneration is a degeneration of the projective space @xmath455 .",
    "also , there is a pre - log curve of type @xmath531 in the central fiber of the degeneration , and it can be smoothed .",
    "in fact in this simple case it is not difficult to construct the smoothing by an explicit calculation , and one sees the following ( see also remark [ rem : config ] ) .",
    "note that the smoothed curves are parametrized by a coordinate @xmath497 of the base @xmath136 of the degeneration .",
    "[ lem : ord ] a smoothing of any pre - log curve of type @xmath531 or its parallel transport can be written in the form such that the defining equations of the smoothed curves are @xmath533 up to coordinate changes replacing @xmath499 by @xmath534 for some function @xmath535 of @xmath497 . here",
    "@xmath536 are convergent laurent power series of @xmath497 such that @xmath537 .",
    "[ rem : config ] let @xmath26 be a lattice of rank @xmath2 and @xmath3 be an embedded tropical curve in @xmath30 .",
    "let @xmath538 be adjacent vertices ( we identify vertices and edges of @xmath13 with their images by @xmath45 ) .",
    "take a toric variety @xmath6 associated to @xmath3 and also take a toric degeneration @xmath9 of @xmath6 defined respecting @xmath3 ( see definitions [ toric ] and [ def : degeneration ] ) .",
    "we write by @xmath44 the edge connecting @xmath538 and by @xmath160 the primitive integral vector in the direction from @xmath539 to @xmath540 .",
    "let @xmath541 be the integral length of the image @xmath34 .",
    "let @xmath542 be the function on @xmath9 corresponding to a vector @xmath543 ( note that @xmath9 is defined by a fan in @xmath544 . by the direct sum decomposition",
    ", @xmath545 is naturally a sublattice of @xmath546 , so an element of @xmath545 gives a function on @xmath9 ) .",
    "consider a pre - log curve @xmath14 of type @xmath3 and write by @xmath547 the component of @xmath128 and the central fiber @xmath8 of @xmath9 , respectively , corresponding to a vertex @xmath548 .",
    "let @xmath549 be a smoothing of @xmath15 . here",
    "@xmath506 is a complex number with small norm .",
    "let @xmath550 and @xmath551 be general points ( that is , points remote from the toric divisors of @xmath552 ) and take small neighborhoods @xmath553 and @xmath554 of @xmath555 in @xmath9 . then it is easy to see that the values of the function @xmath542 at any points @xmath556 in @xmath557 and @xmath558 are related by @xmath559 here @xmath560 is the pairing between the lattice @xmath26 and its dual .",
    "more generally , if @xmath561 and @xmath562 are general points of the components @xmath547 and @xmath563 corresponding to the vertices @xmath251 of @xmath13 , and @xmath564 are points of @xmath565 sufficiently close to @xmath566 , respectively , then their values with respect to the function @xmath542 are related by @xmath567 lemma [ lem : ord ] can be seen from these remarks .",
    "when the condition @xmath568 does not hold , the argument gets slightly complicated .",
    "we still assume @xmath569 in the sense of definition [ def : ord ] but some @xmath570 can be the same ( see remark [ rem : order_p ] ) .",
    "let us first assume that @xmath571 in this case , the tropicalizations of the defining equations @xmath572 do not give the correct tropicalization of the holomorphic curve .",
    "in particular , the resulting tropical curve has a 4-valent vertex and smoothings of pre - log curves of its type do not restore the original holomorphic curve .",
    "instead , we should add the redundant equation @xmath573 to the set of the defining equations of the curve . on the classical side",
    ", it is really redundant and plays no role .",
    "however , the tropicalization of it gives the tropical polynomial @xmath574 and it contributes to the geometry of the resulting tropical curve .",
    "in general , if @xmath575 and @xmath576 is the leading term of @xmath577 ( note that the condition @xmath578 implies that the coefficients of the leading terms of them must be the same ) , put @xmath579 by the assumption @xmath580 , we have the relations @xmath581 for these new polynomials .",
    "when @xmath582 then we add the equations @xmath583 to the defining equations , and consider their tropicalizations",
    ". then one can see that the resulting tropical curve will be locally of the following form ( see figure [ fig : stair ] ) .",
    "when some of the numbers @xmath584 satisfy @xmath585 and @xmath586 is their leading term , we put @xmath587 they again satisfy @xmath588 and if they satisfy @xmath589 we further add equations @xmath590 to the defining equations , and consider their tropicalizations . now",
    "the resulting tropical curve will be in the following form ( see figure [ fig : stair2 ] ) .        repeating this",
    ", we eventually obtain a 3-valent embedded tropical curve .",
    "for example , when @xmath591 and the relations @xmath592 hold , the corresponding tropical curve will be the one in figure [ fig : ex ] .",
    "[ rem : order_p ] when the condition @xmath594 is not satisfied , then the resulting tropical curve will have higher valent vertices . in this paper",
    "we concentrate on the case where the above condition holds , since it suffices for our purpose .",
    "note that for members of a family obtained by small deformations of a pre - log curve corresponding to an embedded 3-valent tropical curve , the terms @xmath595 satisfy this condition .",
    "also note that on the tropical side , this gives the explicit descriptions of the phylogenetic trees , see for example @xcite .",
    "based on this , we can state the generalization of the local correspondence result ( proposition [ lem : ord ] ) .",
    "namely , let us consider a line in @xmath455 defined by the equations @xmath572 satisfying @xmath594 . by the above procedure , we can construct a tropical curve @xmath596 by tropicalizing these ( and some additional ) equations .",
    "let @xmath14 be a pre - log curve of type @xmath596 or its parallel transport in the central fiber of a toric degeneration @xmath9 of @xmath455 defined respecting @xmath596 .",
    "let @xmath597 be a smoothing of @xmath15 for small @xmath506 . here",
    "@xmath598 is isomorphic to @xmath220",
    ". then we can prove the following generalization of proposition [ lem : ord ] again based on the observation in remark [ rem : config ] .",
    "[ prop : ord2 ] the image @xmath565 of any smoothing of @xmath15 has the defining equations given by @xmath599 up to coordinate changes replacing @xmath499 by @xmath534 for some function @xmath535 of @xmath497 . here",
    "@xmath536 are convergent laurent power series of @xmath497 with the property      summarising , starting from a line in @xmath455 , when it is put in a suitable extreme configuration , we can attach to it an embedded tropical curve @xmath531 .",
    "conversely , given an embedded tropical curve @xmath531 which is a deformation of the tropical curve @xmath416 introduced at the beginning of subsection [ subsec : localobst ] , there is a set of convergent laurent power series @xmath595 , @xmath605 such that    * they satisfy @xmath606 in the sense of definition [ def : exp ] , and * the tropical curve constructed from @xmath595 by the construction above ( in other words , the tropical curve constructed from the line in @xmath455 defined by @xmath595 ) is the same as @xmath532 , up to a parallel transport and permutations of the variables @xmath499 .",
    "[ def : refinedtype ] let @xmath531 be an embedded tropical curve which is a deformation of the tropical curve @xmath416 introduced at the beginning of subsection [ subsec : localobst ] .",
    "a line @xmath607 ( note that it is a curve of type @xmath416 ) is called _ of refined type @xmath531 _ if its defining equations of the image @xmath608 can be taken in the form @xmath609 where each @xmath610 is a convergent laurent power series with variable @xmath497 , and @xmath611 is a complex number with very small norm .",
    "moreover , the set @xmath612 is ordered in the sense of definition [ def : exp ] , and the tropical curve constructed from @xmath612 as in this subsection is the same as @xmath531 up to a parallel transport .",
    "note that the ordering of @xmath612 may not be of the form @xmath613 in general , but of the form @xmath614 for some reordering @xmath615 of the set @xmath616 . also , as in the above argument , the variables @xmath499 are the standard affine coordinates @xmath617 of @xmath455 multiplied by some convergent laurent power series .      1 .   for each embedded tropical curve @xmath531 defined over @xmath618 which is a deformation of @xmath416 , a line of refined type @xmath531 exists , and the set of such curves are open in the set of all lines in @xmath455 ( with respect to the classical topology ) .",
    "2 .   let @xmath531 and @xmath619 be different deformations of @xmath416 into embedded tropical curves , and @xmath620 , @xmath621 be lines of refined types @xmath531 and @xmath619 , respectively , with their defining equations @xmath622 @xmath623 then for suffieciently small @xmath498 , the curves @xmath624 and @xmath625 are distinct .",
    "let @xmath416 be a tropical curve in @xmath529 introduced at the beginning of subsection [ subsec : localobst ] ( we do not yet specify the combinatorial isomorphism class of the abstract graph here ( cf . remark [ rem : comb ] ) .",
    "it should be determined by the numbers @xmath595 below ) .",
    "let @xmath3 be a tropical curve in @xmath10 which contains @xmath416 as its restriction to a suitable subgraph .",
    "we assume @xmath3 satisfies assumption a. let @xmath6 be a toric variety associated to @xmath3 and @xmath9 be a toric degeneration of @xmath6 defined respecting @xmath3 .",
    "let @xmath14 be a pre - log curve of type @xmath3 .",
    "we write by @xmath626 the component of @xmath128 corresponding to the vertex @xmath112 of the image of the subgraph @xmath416 .",
    "recall that we are studying the space of obstructions @xmath417 or its dual @xmath627 .",
    "these spaces can be described by gluing local sections on each component of @xmath93 , and in equation ( [ eq : localobst ] ) and lemmas [ lem : cond1 ] and [ lem : cond2 ] , we gave a description of these local sections .",
    "however , as we noted at the last part of subsection [ subsec : localobst ] , it is difficult to explicitly solve the conditions given in lemmas [ lem : cond1 ] and [ lem : cond2 ] when the configuration of the curve @xmath490 is general . in this subsection",
    ", we give an explicit description when the curve @xmath490 is in a special configuration .",
    "namely , when @xmath490 is described as in proposition [ prop : ord2 ] .    for simplicity , we assume all the unbounded edges of @xmath406",
    "are contained in the bounded edges of @xmath13 , so that they correspond to nodes of @xmath93 ( see remark [ rem : unbounded ] for general cases ) . recall that a general curve of degree one in @xmath455 is defined by the equations @xmath456 and by suitable coordinate changes",
    "they can be made into the following form : @xmath628 as we noted above , we consider such a curve in a special position .",
    "namely , we assume the following :    * each @xmath463 depends on a complex number @xmath497 with very small norm .",
    "in fact , each @xmath463 is a convergent laurent power series with variable @xmath497 . * these @xmath463",
    "are ordered with respect to definition [ def : ord ] . by reordering the variables @xmath499",
    ", we may assume @xmath629    by the argument in subsection [ subsec : localcorr1 ] , these data determine a 3-valent embedded tropical curve @xmath596 .",
    "let @xmath401 be a tropical curve which contains @xmath596 as a subgraph ( presumably this is a deformation of @xmath3 , but we do not need to assume it here ) .",
    "when @xmath630 is a pre - log curve of type @xmath401 in the central fiber of a suitable toric degeneration , we have the union @xmath631 of components of @xmath632 corresponding to the subgraph @xmath596 .",
    "again we assume all the unbounded edges of @xmath596 are contained in the bounded edges of @xmath381 .",
    "then we can consider the log normal sheaf of @xmath633 and the space of the dual obstructions @xmath634 .",
    "the local sections of @xmath635 restricted to the part @xmath631 are described as in theorem [ thm : obstruction ] .",
    "explicitly , we have the following .      a.   give each flag @xmath53 of @xmath637 a value @xmath638 in @xmath639 . here",
    "@xmath640 is the space of annihilators of the direction vector of the edge @xmath44 .",
    "b.   let @xmath38 be a vertex of @xmath637 and let @xmath641 be the edges emanating from it",
    ". then the following conditions are satisfied .",
    "a.   the equation @xmath642 holds . b.   if @xmath44 is a bounded edge of @xmath643 and @xmath644 are the ends of it , then @xmath645 holds .",
    "what we really want is a practical description of the sections of @xmath646 , restricted to the component @xmath212 .",
    "actually this is given by the equation ( [ eq : localobst ] ) and lemmas [ lem : cond1 ] and [ lem : cond2 ] in general , but these expressions are in awkward form compared to lemma [ lem : cond3 ] above .",
    "since @xmath212 is a smoothing of @xmath631 by the argument in subsection [ subsec : localcorr1 ] , the sections of @xmath646 restricted to @xmath212 should be related to the sections described in lemma [ lem : cond3 ] .",
    "this is in fact the case , but proving it is not so straightforward since the descriptions in lemma [ lem : cond2 ] and lemma [ lem : cond3 ] are quite different .",
    "[ prop : highval ] there is a ( non - canonical , but see remark [ rem : corresp ] ) one to one correspondence between the set @xmath647 of sections of @xmath636 restricted to the part @xmath631 of @xmath632 and the set @xmath648 of sections of @xmath649 restricted to the component @xmath212 of @xmath93 when the parameter @xmath497 has sufficiently small norm .",
    "* @xmath643 is a tree , * since @xmath651 is an embedding , each component of @xmath631 has three nodes , and finally * by the residue theorem , the residues at two of these nodes determine the residue at the remaining node ( this is condition @xmath652 of proposition [ lem : cond3 ] ) .    in particular , sections of @xmath653 can also be represented by @xmath654 numbers @xmath655 where the residue at the node corresponding to the unbounded edge of @xmath643 whose image by @xmath651 has direction @xmath656 is @xmath657    by lemma [ lem : cond1 ] , we have @xmath658 , @xmath447 .",
    "similarly , since the residue of @xmath631 at the node corresponding to the edge of direction @xmath656 must have the value in @xmath659 by lemma [ lem : cond3 ] , we also have @xmath660    now we compare the conditions imposed by lemma [ lem : cond2 ] on @xmath478 and those imposed by lemma [ lem : cond3 ] on @xmath661 .",
    "note that the directions of the unbounded edges of @xmath414 and @xmath637 are both given by @xmath662 to make the argument simpler , we add the `` root vertex '' @xmath663 to the open end of the edges of the graphs @xmath406 and @xmath643 of direction @xmath664 . we regard this as a 1-valent vertex of @xmath406 and @xmath643 .",
    "then all the edges of @xmath406 and @xmath643 can be equipped with a direction towards this root . + * step 1 .",
    "relations for @xmath665 .",
    "* we first study the conditions imposed on the values @xmath661 .",
    "we orient all the edges of @xmath637 towards the root vertex .",
    "the graph @xmath637 contains @xmath666 vertices ( one comes from @xmath663 ) .",
    "if @xmath38 is one of these vertices and @xmath44 is an edge of @xmath637 ( not necessarily attached to @xmath38 ) , we write @xmath667 when the orientation of @xmath44 is directed towards the vertex @xmath38 . more precisely , there is a unique oriented path of @xmath637 starting from the midpoint of @xmath44 to the root vertex , and @xmath668 if and only if @xmath38 is on this path .    for a vertex @xmath669 ,",
    "let @xmath670 be the set of the unbounded edges satisfying @xmath671 . here",
    "@xmath672 and the direction of @xmath673 is @xmath674 .",
    "there are two edges @xmath333 attached to the vertex @xmath38 which are directed towards @xmath38 .",
    "accordingly , the set @xmath675 divides into two disjoint subsets @xmath676 then the edges @xmath677 and @xmath678 have directions @xmath679 respectively .",
    "also , the remaining edge @xmath334 emanating from @xmath38 has direction @xmath680 see figure [ fig:16 ] . at each of such a vertex",
    ", the relation @xmath652 of lemma [ lem : cond3 ] imposes a condition on the numbers @xmath665 .",
    "for example , assume the vertex @xmath38 is chosen so that the edges @xmath333 taken as above are unbounded and have directions @xmath681 , respectively .",
    "then the numbers @xmath682 and @xmath683 are attached to the flags @xmath684 and @xmath685 .",
    "the relation @xmath652 implies that the sum of vectors @xmath686 and @xmath687 must be perpendicular to the vector @xmath688 , which is the direction of the remaining edge emanating from @xmath38 .",
    "that is , @xmath689 ( recall that @xmath690 for all @xmath132 ) .",
    "similarly , one sees that at a general vertex @xmath669 as above , the relation @xmath652 implies the equation @xmath691 ( recall @xmath692 ) .",
    "these ( together with @xmath690 ) are the relations imposed on the numbers @xmath665 .",
    "let us write by @xmath693 the equations obtained in this way ( note that @xmath358 is the number of vertices of @xmath694 , and we fix a one to one correspondence between the set of vertices of @xmath695 and the set @xmath696 ) .",
    "let @xmath697 be the complex vector space of dimension @xmath698 whose coordinates are given by @xmath665 , @xmath699 .",
    "let @xmath700 be a complex vector space of dimension @xmath358 whose coordinates are written by @xmath701 . then consider the linear map @xmath702 defined by @xmath703 then it is easy to see the following .      * step 2 .",
    "relations for @xmath480 .",
    "* now we study the relations imposed on the numbers @xmath480 .",
    "this part is more complicated than the case of @xmath665 .",
    "this is because the numbers @xmath480 concern with the cohomology of a smoothing of a pre - log curve of type @xmath596 , so that @xmath443s affect each other more globally than the degenerate case of the pre - log curve ( that is , the case of @xmath665 )",
    ".      also recall that we take the numbers @xmath595 as convergent laurent power series of the parameter @xmath497 ( which is the parameter of the smoothing of the degenerate curve ) and they satisfy the relation @xmath708 in the sense of definition [ def : ord ] .",
    "since the parameter @xmath497 is supposed to have very small norm , in the relations @xmath709 , the terms which have the smallest power of @xmath497 dominate the remaining terms .",
    "explicitly , when @xmath710 , the relation @xmath711 gives @xmath712 which does not depend on the choice of @xmath595 .",
    "when @xmath713 , then the relation @xmath714 gives @xmath715 when @xmath716 ( see definition [ def : exp ] ) , then it gives @xmath717 more generally , when @xmath718 , then @xmath719 gives @xmath720 to compare the relations imposed on @xmath480 and @xmath665 , we want to relate the equations @xmath709 to the vertices of @xmath695 , as we did in the case of @xmath665 .",
    "this can be done as follows .",
    "namely , let @xmath669 be a vertex of @xmath637 as above .",
    "then we have unbounded edges @xmath721 as in step 2 .",
    "then , assume that @xmath722 holds for all @xmath723 and @xmath724 .",
    "in this case , by the assumption @xmath725 , it follows that @xmath726 and the leading term of @xmath727 equals @xmath728 after a suitable normalization by multiplying a laurent power series .",
    "note that this is the same as the relation for @xmath665 associated to the vertex @xmath38 .",
    "since @xmath727 has higher order terms with respect to @xmath497 , the precise relation imposed on @xmath480 is of the form @xmath729 where @xmath255 is a positive integer which depends on @xmath595 .",
    "unfortunately , we can obtain only a part of the leading terms of @xmath730 in this way .",
    "namely , those vertices @xmath38 of @xmath643 which satisfy the condition @xmath731 are only a part of the set of vertices of @xmath643 .",
    "to remedy this , we proceed in the following way .",
    "first let us choose an unbounded edge of direction @xmath448 , @xmath447 .",
    "there is a unique path from this edge to the @xmath663 defined above .",
    "let @xmath732 be the vertices of @xmath643 which lie on this path .",
    "since @xmath695 is a 3-valent tree , the complement of a vertex @xmath733 has three connected components .",
    "let @xmath734 be the union of the vertex @xmath735 and the component which contains the unbounded edge of the direction @xmath448 . for @xmath663",
    ", we set @xmath736 .",
    "then it is easy to see the following .",
    "[ claim : imax ] there is a vertex @xmath735 ( we allow it to be @xmath663 ) with the property that if the directions of the unbounded edges contained in the subgraph @xmath734 are @xmath737 , then the corresponding laurent power series @xmath738 have the property that @xmath739 moreover , for each @xmath132 , there is a unique vertex @xmath740 in @xmath741 such that its associated subgraph @xmath742 is the maximal among those with the above property .",
    "[ claim:1 ] let @xmath743 be laurent power series of @xmath497 satisfying @xmath744 in the sense of definition [ def : ord ] .",
    "for each @xmath132 , define another series of laurent power series @xmath745 of @xmath497 for @xmath746 by @xmath747 then the set @xmath745 is also ordered , and if @xmath595 defines a tropical curve @xmath596 as in subsection [ subsec : localcorr ] , the relation @xmath748 holds for all @xmath749 and @xmath541 such that the unbounded edge of direction @xmath750 is contained in @xmath751}$ ] and that of direction @xmath752 is not contained in @xmath751}$ ] .",
    "[ claim:1.1 ] although the new set @xmath753 of laurent power series is ordered , its relation to the original order of @xmath595 is not straightforward , except the relation mentioned at the last of the claim above .",
    "for example , if we define @xmath754 then we have @xmath755 however , it is easy to see that @xmath756    claim [ claim:1 ] implies that if we rewrite the defining equations @xmath757 by replacing @xmath758 by @xmath759 so that we have the new equations @xmath760 then the constant terms are ordered in the sense of definition [ def : ord ] . in particular , from these laurent power series @xmath761 , we can construct a tropical curve as in subsection [ subsec : tropconst ] .",
    "it is easy to see that the resulting tropical curve is the same as the one constructed from the original @xmath463 .",
    "note that the vertex @xmath740 is a 1-valent vertex of the graph @xmath742 .",
    "so there is a unique vertex @xmath762 which shares an edge of @xmath742 with @xmath740 . when @xmath742 has only one vertex ( in this case @xmath742 is a half line ) , take @xmath763 .",
    "an important point is the following .",
    "this follows from the claims [ claim:1 ] and [ claim:1.1 ] .",
    "+ the polynomial @xmath765 in subsection [ subsec : localobst ] which gives the condition for the numbers @xmath480 is written in terms of the coordinate @xmath766 . we can equally write it in terms of the coordinate @xmath767 for any @xmath447 .",
    "then we obtain another set of coefficients @xmath768 , @xmath769 ( the coefficient @xmath493 is equal to @xmath770 with this notation ) . for any @xmath132 , the vanishing of @xmath768 , @xmath769 together with the conditions @xmath771",
    ", @xmath772 is necessary and sufficient for the numbers @xmath480 to define a section of @xmath773 .",
    "we identify the graph @xmath643 and its image @xmath637 .",
    "we prove this by induction with respect to the distance from the root vertex . here",
    "we give the length one to any bounded edge of @xmath643 ( including the edge @xmath777 one of whose ends is the root vertex ) .",
    "first , clearly @xmath778 for any @xmath132 where @xmath779 is the minimum among all @xmath780 , @xmath772 .",
    "so the unique vertex of @xmath643 whose distance from @xmath663 is one is identified with @xmath762 for these @xmath132 .",
    "now assume that we have proved the claim for all the vertices whose distance from the root vertex is less than or equal to @xmath781 .",
    "let @xmath782 be a vertex whose distance from the root vertex is @xmath783 . let @xmath784 be the other end of an edge containing @xmath782 whose distance from the root vertex is @xmath785 . then by the assumption of the induction , there are @xmath132 and @xmath520 such that @xmath784 equals @xmath774 for some @xmath775 .",
    "let @xmath775 , @xmath786 , be the set of the laurent polynomials as above .",
    "let @xmath38 be any vertex of @xmath695 .",
    "then there are sets of unbounded edges of @xmath695 , @xmath787 as in step 1 .",
    "then one and only one of the following holds .    * the inequalities @xmath788 hold for all @xmath789 and @xmath790 . in this case , @xmath791 for any @xmath792 . * the inequalities @xmath793 hold for all @xmath789 and @xmath790 . in this case , @xmath794 for any @xmath795 .",
    "let us assume the inequalities @xmath796 hold for all @xmath789 and @xmath797 .",
    "note that the complement @xmath798 consists of three connected components .",
    "one of them contains all the unbounded edges @xmath799 , and another contains @xmath800 .",
    "then there are following two cases .",
    "in the former case , consider the set of laurent polynomials @xmath801 , for any fixed @xmath802 .",
    "note that @xmath803 , @xmath804 . from this , it is easy to see that @xmath805 for some @xmath806 with respect to the set of laurent polynomials @xmath801 .",
    "explicitly , choose @xmath807 such that @xmath808 is one of the largest among @xmath809 , @xmath810 .    in the latter case",
    ", one can see that @xmath782 equals to @xmath811 for some @xmath812 with respect to the set of laurent polynomials @xmath775 .",
    "explicitly , choose @xmath813 such that @xmath814 is one of the largest among @xmath815 , @xmath816 .",
    "* the input is the convergent laurent power series @xmath817 . from this",
    ", we can define the line @xmath212 given by the equations @xmath818 , @xmath605 , in @xmath455 and the tropical curve @xmath596 obtained from them as in subsection [ subsec : localcorr1 ] .",
    "this can be seen as the `` tropicalization '' of the line by proposition [ prop : ord2 ] ( conversely , the line is a smoothing of a pre - log curve of type @xmath596 ) . * for each @xmath447 , also consider the set of laurent power series @xmath819 , and the coordinate @xmath767 of @xmath212 .",
    "( this corresponds to rewriting the defining equations of @xmath212 as @xmath820 ) . *",
    "choose @xmath821 and an unbounded edge of the direction @xmath656 , @xmath772 of @xmath596 .",
    "from this , we can choose a unique vertex @xmath822 of @xmath643 by claim [ claim : imax ] .",
    "when we consider all @xmath132 and @xmath520 , the set of these vertices @xmath823 equals the set @xmath824}$ ] of all vertices of @xmath695 .",
    "we saw in step 1 and step 2 that , to such a vertex @xmath822 , relations for the numbers @xmath480 and @xmath665 are associated .",
    "we write these relations by @xmath825 and @xmath826 , respectively .",
    "the relation @xmath827 is a linear equation purely written in terms of @xmath665 , while the relation @xmath828 is a laurent power series of @xmath497 whose coefficients are linear sums of @xmath480 .",
    "what is good about the vertices @xmath822 is the following , as we noted in step 2 .",
    "this follows from the construction .",
    "+ note that for several choices of @xmath132 and @xmath520 , the vertices @xmath822 will be the same . in this case",
    "the induced relations @xmath825 may differ , but their leading terms are the same up to suitable normalizations .",
    "using claim [ claim : compare ] , we can finish the proof of proposition [ prop : highval ] .",
    "we choose the pairs @xmath830 suitably so that the associated set of vertices @xmath831 equals @xmath824}$ ] .",
    "we write the associated equations for @xmath480 and @xmath665 by @xmath832 and @xmath833 , @xmath834 , respectively , where we normalize @xmath835 so that its coefficient of the leading term is equal to @xmath836 .",
    "let @xmath837 be the complex vector space of dimension @xmath698 whose coordinates are given by @xmath480 , @xmath699 .",
    "let @xmath838 be the complex vector space of dimension @xmath358 whose coordinates we write by @xmath839 .",
    "recall that the linear map @xmath843 has the maximal rank ( claim [ claim : rank ] ) .",
    "the leading part of @xmath140 is the same as @xmath704 , so by implicit function theorem the zero locus of @xmath140 is isomorphic to that of @xmath704 for sufficiently small @xmath498 . in particular , the set @xmath844 has dimension @xmath845 and irreducible .",
    "the equations @xmath848 give at most @xmath358 dimensional conditions .",
    "however , as we saw above , for @xmath498 sufficiently small , the condition @xmath849 gives @xmath358 dimensional transversal conditions .",
    "then since the locus @xmath844 is irreducible , it must coincide with the set @xmath847 .",
    "+ proposition [ prop : highval ] also follows from the proof of claim [ claim:4 ] .",
    "[ rem : corresp ] note that although the one to one correspondence between the sets @xmath850 and @xmath842 is not canonical , the proof shows that there is a natural correspondence between them modulo ambiguity of order @xmath497 .",
    "so far we considered tropical curves with a higher valent vertex whose image is locally isomorphic to the image of the tropical curve @xmath416 introduced at the beginning of subsection [ subsec : localobst ] .",
    "such a vertex corresponds to a line in a projective space . in this subsection",
    "we consider more general higher valent vertices .",
    "namely , let us take a 3-valent abstract tree @xmath381 with @xmath407 unbounded edges so that it is combinatorially isomorphic to @xmath406 .",
    "however , now we arrow the edges of @xmath381 to have nontrivial weights ( both on bounded and unbounded edges ) . then consider a proper map @xmath851 @xmath852 , with the following properties :    * the map @xmath853 contracts all the bounded edges of @xmath381 . * the map @xmath853 gives a structure of a tropical curve to @xmath381 . * the image of @xmath853 is not contained in a proper affine hypersurface of @xmath10 .",
    "we assume the map @xmath853 can be deformed into an immersive tropical curve @xmath854 ( note that even though @xmath381 is a tree , @xmath401 need not be deformed into an immersive curve , see figure [ fig : proj ] ) . the combinatorial type of the image @xmath855 is uniquely determined by the combinatorics of the abstract graph @xmath381 .    for applications , it is important to notice that the map @xmath853 may send some of the unbounded edges to the same image .",
    "although the image of these edges is a half line which corresponds to a toric divisor thorough the construction in subsection [ subsec : pre - logdef ] , a pre - log curve of type @xmath401 should intersect this toric divisor at several different points , contrary to the cases of conventional tropical curves .",
    "also , the weight of the image is represented by a tuple of positive integers .",
    "see @xcite .",
    "which can not be deformed into an immersive curve , even though the domain abstract graph is a tree .",
    "the edge @xmath44 in the abstract graph is contracted to the unique vertex of the image .",
    "the two upper edges of the abstract graph are mapped into the horizontal line in @xmath856 .",
    "similarly , the two lower edges are mapped into the other line . ]    on the other hand , the image @xmath855 of the immersive tropical curve @xmath857 can be obtained in the following way . namely , let us take a standard basis @xmath858 of @xmath529 .",
    "recall that the directions of the edges of the image @xmath414 are given by @xmath859 and @xmath860 .",
    "we write by @xmath861 and @xmath862 the unbounded edges of @xmath406 which are mapped to the edges of these directions by @xmath413 .",
    "we fix the natural identification @xmath863 of the abstract graphs @xmath406 and @xmath381 .",
    "let @xmath864 be the primitive integral vectors of the directions of the images of the edges @xmath865 of @xmath381 by @xmath866 .",
    "let @xmath867 be the weights of these edges .    then define a linear map @xmath868 by extending the map @xmath869 linearly .",
    "it is easy to see that @xmath414 is mapped by @xmath870 onto @xmath403 , and similarly , there is a suitable tropical curve @xmath531 which is a deformation of @xmath416 such that the image of @xmath531 by @xmath870 coincides with @xmath855 .",
    "moreover , if the integral lengths of the images of bounded edges of @xmath381 by @xmath866 are multiples of their weights by positive integers , then we can take @xmath531 so that it is defined over @xmath618 .",
    "the images of the tropical curves @xmath416 and @xmath871 can be seen as non - complete fans consisting of one dimensional cones .",
    "let @xmath872 and @xmath873 be the toric varieties defined by these fans .",
    "the map @xmath870 induces the map @xmath874 between toric varieties from @xmath872 to @xmath873 .",
    "note that @xmath873 is a toric variety associated to @xmath857 in the sense of definition [ toric ] . using this construction ,",
    "let us formulate the general local correspondence theorem .",
    "given a tropical curve @xmath401 , assume it has a deformation @xmath857 into an immersive tropical curve as above .",
    "let @xmath873 be a toric variety associated to @xmath857 .",
    "let @xmath875 be the fan in @xmath876 given as the closure of the cone over @xmath877 and @xmath878 be a degeneration of @xmath873 defined by @xmath875 .",
    "recall that the tropical curve @xmath857 is obtained from @xmath531 by composing the map @xmath870 .",
    "let @xmath879 be the fan in @xmath880 given as the closure of the cone over @xmath881 .",
    "this gives a degeneration @xmath882 of @xmath883 respecting @xmath531 .",
    "after a suitable refinement of the fan @xmath879 , the map @xmath888 induces a map of fans from @xmath879 to @xmath875 . moreover , the refinement of @xmath879 can be taken so that for any closed cone of @xmath879 , the map @xmath888 is an isomorphism onto a closed cone of @xmath875 .",
    "note that the map @xmath870 restricted to @xmath532 is an immersion . in particular , the inverse image of vertices of @xmath855 by @xmath889",
    "is discrete , so regarding them as vertices of @xmath532 , we obtain a refinement of the graph @xmath532 .",
    "this in turn induces a refinement of the fan @xmath879 , and it satisfies the required properties .",
    "+ we write the refinement of @xmath879 by the same notation . then the map @xmath888 induces a map @xmath890 from @xmath882 to @xmath878 .",
    "it is easy to see that this map sends pre - log curves of type @xmath531 to pre - log curves of type @xmath857 , and all the pre - log curves of type @xmath857 can be obtained in this way .",
    "also , a family of smoothings of a pre - log curve of type @xmath857 lifts to a family of smoothings of a pre - log curve of type @xmath531 .",
    "let @xmath633 be a pre - log curve of type @xmath857 in the central fiber of @xmath878 .",
    "the map @xmath633 can be smoothed to @xmath891 , where @xmath506 is the parameter of the deformation with small norm .",
    "note that the holomorphic curve @xmath891 is a pre - log curveof type @xmath401 .",
    "the construction so far can be summarized as follows .",
    "[ prop : localcorr2 ] the map @xmath891 is obtained by the composition of the pre - log curve @xmath892 of type @xmath416 ( that is , a line in @xmath455 ) which is of refined type @xmath531 for some deformation @xmath893 of @xmath413 , and the map @xmath890 .",
    "[ def : refinedtype2 ] a pre - log curve @xmath894 of type @xmath401 is called _ of refined type @xmath857 _ if it is obtained as in proposition [ prop : localcorr2 ] as the image of a curve of refined type @xmath531 .      in this subsection",
    "we generalize proposition [ prop : highval ] to general higher valent vertices .",
    "we use the same notation as in the previous subsection .",
    "let @xmath895 be a curve of type @xmath401 which is of refined type @xmath857 .",
    "assume that @xmath896 is obtained from a line @xmath897 of refined type @xmath531 .",
    "its logarithmic conormal sheaf @xmath898 can be pulled back by the map @xmath874 .",
    "note that a section of the sheaf @xmath899 can be seen as a 1-form on @xmath220 with values in @xmath900 , where @xmath901 is the lattice isomorphic to @xmath902 such that the fan defining the toric variety @xmath873 lies in @xmath903 .",
    "then the pull back @xmath906 can be seen as a sheaf on @xmath220 with values in @xmath907 .",
    "since the sheaf @xmath906 is naturally a subsheaf of @xmath908 , sections of @xmath909 can also be described by the numbers @xmath480 given in the equation ( [ eq : localobst ] ) in subsection [ subsec : localobst ] .",
    "note that the latter condition is the same as the condition that the set of the numbers @xmath480 belongs to the kernel of the linear map @xmath140 introduced in step 3 of subsection [ subsec : highvalobst ] for sufficiently small @xmath498 .      for a general point @xmath217 on @xmath220 ,",
    "the fiber of @xmath908 is the annihilator of the ( log ) tangent space of @xmath923 , which can be identified with a subspace of @xmath907 , and the fiber of @xmath906 is the subspace @xmath924 consisting of the vectors which also annihilate the kernel of the above map @xmath925 .",
    "so we need to show that if the numbers @xmath480 satisfy the conditions in the statement , the value at @xmath217 of the section of @xmath926 determined by @xmath480 is contained in @xmath927 .",
    "but this is easy to see , since given the vector valued residue @xmath928 at @xmath918 as in the statement , the corresponding section of @xmath926 is given by @xmath929 as in equation ( [ eq : localobst ] ) .",
    "since the vectors @xmath930 all annihilate the kernel of @xmath925 , the value at any point of @xmath220 also annihilates it .",
    "this proves the lemma .",
    "+ now we consider the degenerate side .",
    "the argument proceeds almost parallel to the above smoothed case .",
    "we use the same notations as above .",
    "namely , let @xmath401 and @xmath857 be tropical curves as before .",
    "the map @xmath866 is a deformation of @xmath853 into an immersive map .",
    "these tropical curves are obtained from a standard tropical curve @xmath416 and its deformation @xmath531 by composing a linear map @xmath870 .    as in the previous subsection ,",
    "take toric degenerations @xmath882 and @xmath878 of toric varieties @xmath872 and @xmath873 associated to @xmath416 and @xmath401 , respectively .",
    "the map @xmath870 gives rise to a map @xmath931 between toric varieties and it can be extended to a map between toric degenerations @xmath932 .",
    "then the log conormal sheaf @xmath936 of @xmath633 can be pulled back by @xmath890 as before , and it gives a subsheaf of the log conormal sheaf of @xmath15 . in turn , the log conormal sheaf of @xmath15 can be described by the numbers @xmath665 as in subsection [ subsec : highvalobst ] .",
    "what is relevant to us is the set of sections of the sheaf @xmath937 on @xmath93 . as in the smoothed case ,",
    "let @xmath910 be the point of @xmath93 which is mapped to the toric divisor of a component of @xmath934 corresponding to the unbounded edge @xmath410 of @xmath381 .",
    "the following is the degenerate version of lemma [ lem : genhigh ] , and since the proof is also parallel to it , we omit it .",
    "we use the same notation as in lemma [ lem : genhigh ] .      *",
    "the vector valued residue @xmath939 at @xmath910 is contained in @xmath913 . *",
    "the conditions @xmath690 for all @xmath447 hold , and the numbers @xmath665 belong to the kernel of the map @xmath704 introduced in step 1 of subsection [ subsec : highvalobst ] .",
    "now we can compare the degenerate and the smoothed cases as before .",
    "we consider a pre - log curve @xmath940 of type @xmath857 on the degenerate side . on the smoothed side",
    ", we consider the image of a line @xmath941 of refined type @xmath531 by the map @xmath874 .",
    "recall that , the image of @xmath942 is defined by the equations @xmath943 where @xmath944 with @xmath945 is the set of homogeneous coordinates of @xmath455 . here",
    "@xmath535 and @xmath463 are convergent laurent powe series of the variable @xmath497 , which is the parameter for the degeneration of the family @xmath882 . renumbering the variables",
    "@xmath499 if necessary , we can assume the polynomials @xmath463 satisfy the relation @xmath946 in the sense of definition [ def : ord ] ( see remark [ rem : order_p ] ) .",
    "the tropical curve constructed from it as in subsection [ subsec : localcorr ] equals @xmath531 , which is mapped to @xmath855 by the map @xmath870 .",
    "the argument so far establishes the description of the space of dual obstructions restricted to a component of a pre - log curve corresponding to a higher valent vertices of a tropical curve .",
    "now we consider the description of the dual obstruction spaces of the original pre - log curves .    in general situations ,",
    "the description is given using the local data of the dual obstruction spaces for holomorphic curves corresponding to each vertex .",
    "thus , the most general statement is the following .",
    "let @xmath3 be a tropical curve satisfying assumption a. let @xmath950 be a pre - log curve of type @xmath3 into a suitable toric degeneration defined respecting @xmath3 .",
    "we would like to give a description of elements of the space @xmath951 .",
    "as in the case of theorem [ thm : obstruction ] , which described the space @xmath367 when the tropical curve @xmath3 is immersive , one can prove that the space @xmath367 is determined by the contributions from each bouquet of @xmath66 .",
    "let @xmath360 be the loop part of @xmath952 ( see definition [ def : loops ] and remark [ rem : assump ] ) . then , as before , cut @xmath360 at each 3- or higher valent vertex .",
    "then we obtain a set of chains of segments @xmath364 .",
    "let @xmath365 be the linear subspace of @xmath299 spanned by the direction vectors of the segments of @xmath366 .",
    "then we can generalize theorem [ thm : obstruction ] as follows .",
    "a.   give the value zero to all the flags not contained in @xmath360 .",
    "b.   give a value in @xmath369 to each of the flags associated to the edges of @xmath366 .",
    "c.   the data in ( ii ) gives an element of @xmath367 if and only if the following conditions are satisfied .",
    "1 .   at each 3-valent vertex @xmath561 of @xmath66",
    ", @xmath371 holds as an element of @xmath372 . here",
    "@xmath373 are the data attached to the three flags in @xmath66 which have @xmath561 as the vertex .",
    "2 .   at each @xmath407-valent vertex ( @xmath953 )",
    "@xmath954 , the data in ( ii ) attached to the flags whose vertex is @xmath954 satisfies the condition in lemma [ lem : genhigh ] .",
    "3 .   the data in ( ii ) is compatible in the sense that the sum of the values attached to the two flags of any edge of @xmath366 is 0 .",
    "note that the numbers @xmath480 in lemma [ lem : genhigh ] are associated to edges of the tropical curve @xmath416 in @xmath529 , and the data in @xmath370 determines these numbers through the projection argument in subsection [ subsec : gendual ] .",
    "when the subspace spanned by the directions of the edges emanating from the higher valent vertex @xmath954 is strictly smaller than @xmath10 , there are also the @xmath955 parts of ( [ eq : localobst ] ) in subsection [ subsec : localobst ] ( these @xmath955 do not have local constraints at each vertex , contrary to @xmath480 ) . also note that the numbers @xmath480 and @xmath956 are associated to @xmath666 edges among the @xmath407 edges emanating from @xmath954 . the residue at the point corresponding to the remaining edge is determined from them by the residue theorem . for",
    "some choice of @xmath666 edges out of the total @xmath407 edges , the numbers @xmath480 constructed from the data in @xmath370 and this choice of the edges satisfy the condition @xmath957 above if and only if the numbers @xmath480 satisfy it for any choice of @xmath666 edges .",
    "the proof of the theorem is the same as that of theorem [ thm : obstruction ] .",
    "this is the most general form of the description of the space @xmath367 for pre - log curves corresponding to tropical curves satisfying assumption a.    to deduce some qualitative properties of the space @xmath367 , consider the following map associated to each pre - log curve of type @xmath3 .",
    "namely , for a 3-valent vertex @xmath561 of @xmath66 , let @xmath75 be the edges emanating from it . then attach to @xmath561 the linear subspace @xmath958 of @xmath959 given by @xmath960    similarly , for each @xmath358-valent vertex @xmath954 of @xmath66 ( @xmath961 ) , let @xmath962 be the edges emanating from it . then attach to @xmath954 the linear subspace @xmath963 of @xmath964 whose elements satisfy the condition of lemma [ lem : genhigh ] and the residue theorem ( add the data of @xmath956 when the subspace spanned by the directions of the edges emanating from @xmath954 is smaller than @xmath10 ) .      then there is a natural linear map @xmath968}}v_a \\to w\\ ] ] which sends an element @xmath969}}$ ] to the element of @xmath966 whose @xmath965-component @xmath970 is determined as follows .",
    "namely , if @xmath44 is an unbounded edge of @xmath66 , let @xmath971 be the unique vertex attached to it .",
    "then @xmath970 is the projection of @xmath972 to @xmath965 .",
    "if @xmath44 is a bounded edge of @xmath66 , let @xmath973 be the ends of it .",
    "then @xmath970 is the difference of the projections of @xmath974 and @xmath975 to @xmath965 ( it is well - defined up to the sign , but either sign will do ) .",
    "let @xmath3 be a tropical curve satisfying assumption a and let @xmath950 be a pre - log curve of type @xmath3 . here",
    "@xmath9 is a suitable toric degeneration defined respecting @xmath3 .",
    "let @xmath112 be a vertex of @xmath66 .",
    "recall that there are open subgraphs @xmath124 of @xmath13 associated to @xmath112 ( see definition [ def : oftype ] ) .",
    "each of these subgraphs corresponds to an irreducible component @xmath135 of @xmath93 . by assumption a , the map @xmath45 can be deformed into an immersive tropical curve @xmath979 .",
    "[ def : refinedtype3 ] a pre - log curve @xmath14 of type @xmath3 is called _ of refined type",
    "_ @xmath399 if for each vertex @xmath112 of @xmath66 , the restriction @xmath980 ( which is a pre - log curve of type @xmath123 ) is of refined type @xmath981 in the sense of definition [ def : refinedtype2 ] .",
    "[ cor : nonsuperabundantdim ] let @xmath950 be a pre - log curve of type @xmath3 which is of refined type @xmath399 as above .",
    "let @xmath982 be the dimension of the space @xmath367 calculated for @xmath399 .",
    "then the dimension @xmath254 of the dual obstruction space @xmath367 of the curve @xmath15 satisfies @xmath983    by proposition [ prop : genloc ] , the map @xmath978 associated to the pre - curve @xmath15 is a small perturbation of the map @xmath978 associated to a pre - log curve of type @xmath399 .",
    "thus , the statement follows from a basic fact from linear algebra .      this corollary is a kind of upper semi - continuity of the cohomology of flat families",
    ". it will be possible to prove it from general theory , but we choose the above proof based on the explicit estimate ( proposition [ prop : highval ] and its proof ) since it requires some combinatorially messy argument to formulate the situation to which general theory is applicable .",
    "moreover , it is not easy to construct a suitable flat family of curves since our deformation theory is obstructed in general .",
    "so this line of arguments would not simplify the proof very much .",
    "also , we can deduce from the current proof more detailed information about the range of the parameter @xmath497 on the base for which the corollary is valid .",
    "although the description of theorem [ thm : obstruction2 ] is quite simple , it is difficult to give a description as explicit as in theorem [ thm : obstruction ] for _ all _ pre - log curves of a given type when the tropical curve contains higher valent vertices .",
    "let @xmath13 be a weighted abstract graph as in the beginning of subsection [ subsec : pre ] , but now we allow that @xmath13 is not necessarily 3-valent .",
    "let @xmath111 be an embedding giving @xmath13 a structure of a tropical curve .",
    "we identify the graph @xmath13 with its image .",
    "let @xmath360 be the loop part of @xmath13 and @xmath984 } = \\{e_1 , \\dots , e_l\\}$ ] be the set of edges in @xmath360 seen as 1-chains of the simplicial homology group ( in particular , we choose an orientation for each @xmath410 ) .",
    "let @xmath985 be the primitive integral vector in the direction of @xmath410 .",
    "[ def : nonsuperabundant2 ] the tropical curve @xmath3 is _ non - superabundant _ if the following abundancy map @xmath986}}\\to hom(h_1(\\gamma ) , n_{\\bbb r}),\\ ] ] @xmath987\\mapsto \\sum_i\\ell_{e_i}a_iu_i   \\right)\\ ] ] is surjective .",
    "first we remark that this definition is the same as the following .",
    "let us write @xmath988 and choose @xmath358 edges @xmath989 from @xmath984}$ ] so that the graph @xmath990 is a tree .",
    "let @xmath991 be the quotient space , where @xmath363 is the primitive integral vector in the direction of @xmath913 .",
    "let @xmath992 and @xmath993 be the ends of @xmath913 .",
    "note that since @xmath990 is a tree , for every @xmath994}\\setminus\\{f_1 , \\dots , f_r\\}}$ ] there is a corresponding map from @xmath990 to @xmath30 with the length of @xmath410 given by @xmath995 ( the minus length means the direction inverse to the given direction in the original map @xmath45 ) .",
    "there are many such maps due to parallel transports , but the vectors @xmath996 , @xmath997 do not depend on the choice .",
    "[ lem : nonsuperabundant ] the tropical curve @xmath3 is non - superabundant in the sense of definition [ def : nonsuperabundant2 ] if and only if the map @xmath998}\\setminus\\{f_1 , \\dots , f_r\\ } }   \\to \\oplus_{i = 1}^rn_i,\\ ] ] @xmath999 is surjective . here",
    "@xmath1000 is the image of @xmath1001 in @xmath1002 .",
    "[ prop : immexist ] let @xmath3 be a non - superabundant tropical curve in the sense of definition [ def : nonsuperabundant2 ]",
    ". then it can be deformed into an embedded 3-valent tropical curve in the sense of definitions [ def : tropical curve ] and [ immersive ] .",
    "moreover , the deformed immersive tropical curve is also non - superabundant in the sense of definition [ def : nonsuperabundant2 ] .",
    "we identify @xmath13 and @xmath66 as noted above .",
    "let @xmath1003 be a higher valent vertex .",
    "it suffices to show that the star of any such @xmath38 can be deformed into a 3-valent graph while keeping the balancing condition and the homotopy type of the entire graph .    as in the above argument ,",
    "take edges @xmath989 of @xmath13 so that the graph @xmath990 is a tree .",
    "the interior @xmath1004 of these @xmath913 can be either contained or not contained in the star of @xmath38 .",
    "then perturb the star of @xmath38 so that it becomes a trivalent tree graph @xmath129 satisfying the balancing condition . since @xmath990 is a tree",
    ", we can replace the intersection of the star of @xmath38 and @xmath990 by the graph @xmath1005 without changing the homotopy type and the slopes of the other edges . on the other hand",
    ", the difference @xmath1006 ( which is clearly 0 in the original @xmath13 ) may have slightly changed through this process .",
    "however , due to lemma [ lem : nonsuperabundant ] , we can perturb the resulting graph so that the difference @xmath1006 becomes 0 .",
    "note that since the domain of the map of lemma [ lem : nonsuperabundant ] consists of the lengths of the part of the edges of @xmath13 ( and does not contain those of the newly introduced edges in @xmath129 ) , this perturbation can be done without changing @xmath129 .",
    "then the resulting graph can be completed by adding the edges @xmath913 to produce a tropical curve which has the same homotopy type as @xmath13 .",
    "note that the resulting tropical curve is still non - superabundant in the sense of definition [ def : nonsuperabundant2 ] ( since introducing the new edges makes the domain of the abundancy map larger , the surjectivity of the map is not affected ) . repeating this process to all the higher valent vertices ,",
    "we obtain an embedded 3-valent tropical curve which is a deformation of @xmath3 . + in particular , we see the following .",
    "it suffices to prove that a deformation of a given tropical curve , which is non - superabundant in the sense of definition [ def : nonsuperabundant2 ] , into an immersive tropical curve ( which exists by proposition [ prop : immexist ] ) is non - superabundant in the sense of definition [ def : superabundancy ] .",
    "this is equivalent to show that the space @xmath367 vanishes for pre - log curves of the type given by the deformed tropical curve .",
    "the existence of such a curve can be proved by the argument in ( * ? ? ?",
    "* proposition 5.7 ) and the surjectivity of the abundancy map , see the argument before corollary [ cor : abundancymap ] below .",
    "in fact , as we noted in remark [ rem : reg_highval ] ( 2 ) , the space @xmath367 makes sense even without the existence of a pre - log curve of the corresponding type , and the following argument is valid in this sense .",
    "now ( * ? ? ?",
    "* proposition 4.2 ) claims that , given a tropical curve , if the abundancy map is surjective , then the space @xmath367 vanishes for pre - log curves of the type given by the tropical curve .",
    "thus , tropical curves which are non - superabundant in the sense of definition [ def : nonsuperabundant2 ] is also non - superabundant in the sense of definition [ def : superabundancy ] .    1 .",
    "the statement of the corollary is a little imprecise in that the non - superabundant tropical curves in the sense of definition [ def : nonsuperabundant2 ] do not have the data of 3-valent domain graphs which we always assume to be associated to tropical curves .",
    "so the inclusion makes sense when we specify this data to each non - superabundant tropical curve in the sense of definition [ def : nonsuperabundant2 ] ( see also corollary [ cor : pre - loggen ] below ) .",
    "note that the latter set of the corollary can be strictly larger than the former .",
    "namely , a 3-valent embedded non - superabundant tropical curve can degenerate into a tropical curve which may not satisfy definition [ def : nonsuperabundant2 ] .",
    "for example , the picture on the right of remark [ rem : h ] can be obtained as a degeneration of non - superabundant embedded tropical curves , and so it is non - superabundant in the sense of definition [ def : superabundancy ] .",
    "however , it is easy to see that it does not satisfy the condition of definition [ def : nonsuperabundant2 ] .",
    "[ cor : pre - loggen ] let @xmath3 be a non - superabundant tropical curve in the sense of definition [ def : nonsuperabundant2 ] .",
    "let @xmath1007 be the set of higher valent vertices .",
    "the star of each @xmath1008 can be seen as an embedded tropical curve with one vertex .",
    "let @xmath1009 be any deformation of the star of @xmath1008 into an embedded 3-valent tropical curve .",
    "let @xmath1010 be the abstract graph obtained from @xmath13 by replacing the star of each @xmath1008 by @xmath1009 .",
    "the embeddings of @xmath13 and @xmath1009 into @xmath30 determine the combinatorial type of the graph @xmath1010 .",
    "then @xmath3 can be deformed into an embedded 3-valent tropical curve whose domain is @xmath1010 with this combinatorial type .      [ [ general - correspondence - theorem - for - non - superabundant - tropical - curves ] ] general correspondence theorem for non - superabundant tropical curves ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    as we discussed in ( * ? ? ?",
    "* proposition 7.3 ) , the deformation of tropical curves of a fixed type is closely related to the construction of a pre - log curve of the corresponding type . it is easy to see that if @xmath3 is a tropical curve satisfying assumption a where @xmath13 is a tree , then a pre - log curve of the corresponding type always exists , regardless of whether there are higher valent vertices or not .",
    "consider an embedded non - superabundant tropical curve @xmath3 in the sense of definition [ def : nonsuperabundant2 ] , and choose the edges @xmath1011 as before ( @xmath13 is not necessarily 3-valent ) . then cut each @xmath913 at the midpoint and extend the cut edges to infinity . also , add divalent vertices on the extended edges at the points where there were the midpoints and where the extended edges intersect other vertices ( see figure [ fig : cut_and_glue ] ) .",
    "the result can naturally be regarded as an immersed tropical curve of genus 0 .",
    "the midpoint @xmath536 of @xmath913 now becomes the common image of 2-valent vertices of two unbounded edges .",
    "let us write this tropical curve by @xmath1012 . by the remark in the preceding paragraph",
    ", there is a pre - log curve @xmath1013 of type @xmath1012 in the central fiber of a suitable toric degeneration .     at the midpoint ,",
    "extend the cut edges to infinity , and add suitable 2-valent vertices ( process ( a ) ) .",
    "we obtain a tropical curve @xmath1012 .",
    "then consider the pre - log curve of type @xmath1012 , and if the two components corresponding to the vertex @xmath536 coincide , then we can discard the other components corresponding to the 2-valent vertices on the new unbounded edges , and obtain another pre - log curve which is of type @xmath3 , with a 2-valent vertex @xmath536 added on the edge @xmath913 ( process ( b ) ) . ]",
    "let us write by @xmath1014 and @xmath1015 the components of @xmath1016 corresponding to the vertex @xmath536 ( as we noted above , since @xmath536 is the image of vertices on two different edges , there are two components of @xmath1016 corresponding to it ) .",
    "the images of these components lie in the same component of @xmath8 and are orbits of the one dimensional subtorus corresponding to the direction of @xmath913 , but these orbits are different in general .",
    "when these images coincide , then by discarding other components of @xmath1017 corresponding to the 2-valent vertices of the unbounded edges , one obtains a pre - log curve of positive genus ( see figure [ fig : cut_and_glue ] ) .",
    "let us write by @xmath1018 the torus which is the quotient of the big torus acting on the components of @xmath8 by the one dimensional sub - torus corresponding to the direction of @xmath913 .",
    "the difference of the positions of the above two orbits determines a point of @xmath1019 ( well - defined up to inversion .",
    "we fix one choice ) .",
    "the pre - log curve @xmath1020 can be regarded as the result of gluing of the components corresponding to the vertices of @xmath356 . by the argument in @xcite , the freedom of changing the lengths of the edges of @xmath984}\\setminus \\{f_1 , \\dots , f_r\\}$ ] , after tensoring by @xmath1021 ( here @xmath1022 acts on @xmath1021 by @xmath1023 ) , corresponds to transporting each component of @xmath1017 by the suitable torus action on the corresponding component of @xmath8 , keeping the homotopy type of the whole curve @xmath1020 .",
    "this determines the map @xmath1024}\\setminus \\{f_1 , \\dots , f_r\\}}\\to \\prod_{i=1}^r\\bbb g_i\\ ] ] which is the @xmath1021-tensored version of the map in lemma [ lem : nonsuperabundant ] .",
    "this implies the following proposition .",
    "let @xmath3 be an embedded non - superabundant tropical curve in the sense of definition [ def : nonsuperabundant2 ] ( note that in this case @xmath13 need not be 3-valent ) . for each vertex @xmath112 of @xmath66 ,",
    "take any torically transverse curve @xmath212 of type @xmath112 ( see definition [ def : typev ] )  in the corresponding component @xmath431 of the central fiber @xmath8 of a toric degeneration defined respecting @xmath3 .",
    "note that @xmath212 is a rational curve with @xmath1026 fixed marked points , where @xmath1026 is the number of the edges emanating from @xmath112 .",
    "[ prop : exist ] under the situation of the above paragraph , there is a pre - log curve of type @xmath3 whose component corresponding to @xmath112 is isomorphic to the given @xmath212 as a rational curve with marked points .",
    "now we can prove the following , which would be the optimal form of the correspondence theorem for non - superabundant tropical curves , and in particular shows that any tropical curve which is non - superabundant in the sense of definition [ def : superabundancy ] ( which includes those in the sense of definition [ def : nonsuperabundant2 ] by corollary [ cor : nonsuperabund ] ) can be realized by a map from a smooth irreducible holomorphic curve .",
    "let @xmath3 , @xmath1027 be a 3-valent tropical curve satisfying assumption a which is non - superabundant in the sense of definition [ def : superabundancy ] .",
    "let @xmath1028 be an immersive tropical curve which is a deformation of @xmath3 . by assumption",
    "a , such a deformation exists and its combinatorial type is uniquely determined by the isomorphism class of @xmath13 .",
    "let @xmath9 be a toric degeneration of a toric variety associated to @xmath3 defined respecting @xmath3 .",
    "let @xmath8 be the central fiber of @xmath9 .",
    "under this situation , we have the following .    [ thm : corresp ] there is a pre - log curve @xmath14 of type @xmath3 of refined type @xmath1028 .",
    "moreover , the irrducible component of the parameter space of pre - log curves of type @xmath3 contianing @xmath15 ( see the paragraph after remark [ rem : any ] ) contains a zariski open subset whose members are smoothable .",
    "[ lem : refineexist ] let @xmath3 be a non - superabundant tropical curve satisfying assumption a and @xmath1028 be a deformation of it into an immersive non - superabundant tropical curve . then there is a pre - log curve of type @xmath3 of refined type @xmath1028 .        by theorem [ thm : dim ] , the parameter space of the deformations of @xmath1028 has dimension @xmath1029 where @xmath358 is the genus of @xmath13 and @xmath160 is the number of the unbounded edges of @xmath13 .",
    "let @xmath38 be the number of vertices of @xmath13 .",
    "then since @xmath13 is a 3-valent graph , the number of the bounded edges of @xmath13 is @xmath1030 on the other hand , by euler s equality , we have @xmath1031 thus we have the equality @xmath1032    now choose @xmath358 bounded edges from @xmath13 as in the proof of proposition [ prop : immexist ] so that removing the interiors of them from @xmath13 results in a tree graph @xmath356 .",
    "the freedom to deform @xmath1033 restricted to @xmath356 is given by the parallel transports and changing the lengths of the bounded edges , so it has @xmath1034 parameters . on the other hand , when the dimension of the image of the abundancy map is @xmath1035 , the deformations of @xmath13 has extra @xmath1035 constraints than those of @xmath356 .",
    "thus , the dimension of the parameter space of the deformations of @xmath1033 is @xmath1036 comparing to the observation at the beginning of the proof , we have @xmath1037 note that the abundancy map is surjective if and only if @xmath1035 equals @xmath1038 .",
    "thus , the vanishing of the space @xmath367 is equivalent to the surjectivity of the abundancy map ( for 3-valent immersive curves ) .",
    "+ let us return to the proof of the lemma . by proposition [ prop : exist",
    "] , there exists a pre - log curve @xmath1039 of type @xmath1028 in the central fiber @xmath1040 of a suitable toric degeneration defined respecting @xmath1028 .    now take edges @xmath1011 from the loop part of @xmath13 so that @xmath990 is a tree as before . here",
    "@xmath358 is the genus of @xmath13 .",
    "we can choose @xmath913 from the edges of @xmath13 which are not contracted by the original map @xmath45 .",
    "then the map @xmath1041 defined before corollary [ cor : abundancymap ] is surjective .",
    "take a higher valent vertex @xmath112 of @xmath66 and let @xmath127 be an open subgraph of @xmath13 defined in definition [ def : oftype ] .",
    "let @xmath1042 be a pre - log curve of type @xmath123 of refined type @xmath1043 in a toric variety associated to @xmath123 .",
    "let @xmath1044 be the union of the components of @xmath1017 corresponding to the subgraph @xmath127 .",
    "note that the freedom to deform the degenerate curve @xmath1045 is ( not precisely but almost canonically similarly to remark [ rem : corresp ] ) the same as the freedom to deform @xmath1046 , and from this one sees that if the map @xmath1041 is surjective , then the similar map defined by replacing the parts @xmath1045 by @xmath1046 is also surjective ( see remark [ rem : varphi_0 ] below ) .",
    "this implies that there is a pre - log curve of type @xmath3 of refined type @xmath1028 .",
    "this proves the lemma . +",
    "take a pre - log curve @xmath14 of type @xmath3 which is of refined type @xmath1028 in the central fiber of a suitable toric degeneration defined respecting @xmath3 . since the map @xmath978 associated to a pre - log curve of type @xmath1028 is an injection by lemma [ lem : nonsup ] , the map @xmath978 associated to @xmath15 is also an injection by corollary [ cor : nonsuperabundantdim ] .",
    "in particular , for such curves the dual obstruction space @xmath367 is 0 and so they are smoothable .    thus , there is an open subset ( with respect to the classical topology ) in the irreducible component of the parameter space of pre - log curves of type @xmath3 including @xmath15 whose members are smoothable .",
    "since the map @xmath978 varies algebraically with respect to the variables parameterizing pre - log curves of type @xmath3 , the theorem follows .",
    "[ rem : varphi_0 ] in the proof of lemma [ lem : refineexist ] , the domain curve @xmath1016 of the map @xmath1047 has no moduli , since each component of it is a nonsingular rational curve with at most three special points . on the other hand , components @xmath135 of the domain curve @xmath93 of the map @xmath15 have in general positive dimensional deformation spaces .",
    "when we deform the map @xmath15 , we also deform these domain curves , otherwise we would not have the required surjectivity of the map similar to @xmath1041 .      1 .",
    "contrary to theorem [ thm : corresp ] , if @xmath3 is a tropical curve which is superabundant in the sense of definition [ def : superabundancy ] , then in general there may not exist a pre - log curve of its type in general , see examples [ ex:1 ] and [ ex:1.5 ] in the next subsection .",
    "2 .   given a non - superabundant tropical curve @xmath3",
    ", it would not be easy to see in general whether _ all _ the pre - log curves of its type have vanishing ( dual ) obstruction space or not , because we have to solve the complicated conditions generated by the existence of higher valent vertices .",
    "now we give a description of the parameter space of pre - log curves of type @xmath3 appeared in the theorem .",
    "recall that we defined a quotient graph @xmath126 of @xmath13 in definition [ def : intergraph ] . the map @xmath12 induces a natural map @xmath1048 which is an immersion and gives @xmath126 a structure of a tropical curve , though it is no longer 3-valent .",
    "then as in proposition [ prop : trop_moduli ] and definition [ def : moduli ] , we can also consider a parameter space of immersive tropical curves of combinatorial type @xmath1049 , and it is again the interior of a convex polytope , which we write by @xmath1050 .    on the side of pre - log curves ,",
    "let @xmath112 be a vertex of @xmath126 which is @xmath1051-valent .",
    "let @xmath431 be the irreducible component of @xmath8 corresponding to @xmath112 ( @xmath431 and @xmath1052 can be the same for different vertices @xmath112 and @xmath253 of @xmath126 ) .",
    "let @xmath1053 be the moduli stack of stable maps containing @xmath1054 . here",
    "@xmath212 is a nonsingular rational curve with @xmath68 marked points @xmath1055 associated to the @xmath1051 edges @xmath1056 emanating from @xmath112 .",
    "let @xmath1057 be its open subset consisting of the maps which are torically transverse , of type @xmath112 ( see definition [ def : typev ] ) , and maps @xmath536 to the toric divisor of @xmath431 corresponding to the edge @xmath410 .",
    "then the relevant parameter space of pre - log curves is the irreducible component of the fiber product @xmath1058 containing a pre - log curve of type @xmath3 of refined type @xmath1028 . here",
    "@xmath1059 means that for neighboring vertices @xmath112 and @xmath253 of @xmath126 , the maps @xmath1054 and @xmath1060 must be compatible in the sense that @xmath1061 , where @xmath536 and @xmath1062 are the marked points of @xmath212 and @xmath1063 , respectively , corresponding to the edge of @xmath126 connecting @xmath112 and @xmath253 .        in this subsection",
    ", we consider several examples of tropical curves relevant to the theory we developed so far .",
    "particular emphasis is put on examples which exhibit phenomena peculiar to higher valent vertices .",
    "we also prove a general result ( theorem [ thm : loop ] ) concerning the smoothablity of a pre - log curve corresponding to tropical curves of genus one which have higher valent vertices at the loop .",
    "this smoothability criterion has a very different form compared to the known criterion ( well - spacedness condition , see @xcite .",
    "a hint of it can be found in @xcite . ) , this plays a fundamental role in the study of the correspondence theorem for superabundant tropical curves of genus one in @xcite .",
    "here the vertex @xmath38 is the standard 4-valent vertex ( that is , the directions of the edges emanating from it are @xmath1064 and @xmath1065 ) .",
    "the direction of the edge @xmath1066 is @xmath664 and that of @xmath334 is @xmath1067 . the complement of the edges @xmath334 and @xmath1066 in @xmath66 , which we write by @xmath360 , is contained in an affine plane parallel to the plane spanned by @xmath1068 and @xmath1069 .",
    "the abstract 3-valent graph @xmath13 is isomorphic to the graph which resolves the vertex @xmath38 into two 3-valent vertices by introducing an edge of direction @xmath1070 .",
    "it is easy to see that this is a superabundant tropical curve .",
    "then there is no pre - log curve of type @xmath3 in any toric degeneration respecting @xmath3 .",
    "namely , since the part @xmath360 is contained in an affine plane , the function @xmath217 corresponding to @xmath1071 ( where @xmath1072 is the dual basis of @xmath1073 ) restricted to the part of a pre - log curve corresponding to @xmath360 has the constant value .",
    "so the curve corresponding to the vertex @xmath38 should have the same value of @xmath217 at the two points corresponding to the two bounded edges emanating from it .",
    "however , since the curve corresponding to @xmath38 is a line in @xmath1074 , this is impossible if we also require the torically transversality .            here",
    "the directions and the lengths of the edges emanating from the vertex @xmath253 ( drawn by bold lines in the figure ) are exactly the same as those emanating from the vertex @xmath112 , but all the edges emanating from @xmath253 have weight 2 , while all the other edges have weight 1 .",
    "assume that the direction vectors of the edges emanating from @xmath112 ( and also @xmath253 ) generates the lattice given by the intersection of @xmath1076 and the affine plane spanned by these edges .          by cutting at the trivalent vertices ,",
    "the loop part decomposes into three parts @xmath1077 and @xmath2 .",
    "let @xmath1078 and @xmath1079 be the two dimensional subspaces of @xmath383 spanned by the direction vectors of the edges contained in @xmath1077 and @xmath2 , respectively .",
    "let @xmath1080 and @xmath1081 be the one dimensional subspaces of the dual space @xmath1082 which annihilate vectors in @xmath1078 and @xmath1079 respectively .",
    "in particular , these generators can be thought of as affine coordinates of the projective plane @xmath1083 , and the lines ( in the sense of ( * ? ? ?",
    "* definition 5.2 ) , see subsection [ subsec : pre - logdef ] ) corresponding to the vertices @xmath112 and @xmath253 can be identified with lines in @xmath1083 .",
    "the line corresponding to the vertex @xmath112 is the line ( that is , a curve of degree one ) in the usual sense , but the line corresponding to the vertex @xmath253 has degree 2 and intersects each toric divisor with multiplicity 2 .",
    "now let @xmath1084 be affine coordinates of @xmath1083 mentioned above .",
    "then a torically transverse degree one curve can be described by the defining equation @xmath1085 where @xmath561 and @xmath954 are nonzero complex numbers .",
    "its intersection with the toric divisors have coordinates @xmath1086 and @xmath1087 in particular , writing @xmath1088 , @xmath1089 and @xmath1090 , we have @xmath1091 on the other hand , one can see that the same product of the coordinates for the intersection of a line in @xmath1083 corresponding to the vertex @xmath253 and the toric divisors is 1 .",
    "thus , there is no pre - log curve of the type of the above tropical curve .",
    "now the vertex @xmath38 is the standard 4-valent vertex magnified in the @xmath1092 direction by two times , and the edge @xmath334 has weight 2 .",
    "the part @xmath360 is not affected by this , and the condition that the component of a pre - log curve corresponding to the vertex @xmath38 should have the same value of the function @xmath217 corresponding to @xmath1071 at the two points corresponding to the two bounded edges can now be satisfied .",
    "namely , take any line ( in the usual sense ) in @xmath1074 whose @xmath217-coordinates at the intersections with the toric divisors corresponding to the edges of directions @xmath1093 and @xmath1094 are @xmath174 and @xmath1095 , respectively , where @xmath174 is any nonzero complex number .",
    "then the image of such a line by the map between toric varieties associated to the map magnifying the @xmath1092 direction by two times gives the desired pre - log curve corresponding to the vertex @xmath38 .",
    "thus , in this example there is a pre - log curve of type @xmath3 .",
    "now let @xmath14 be such a pre - log curve and let us calculate the dual obstruction based on theorem [ thm : obstruction2 ] .",
    "this calculation is done by solving the equations imposed on the numbers @xmath480 associated to the vertex @xmath38 , see subsection [ subsec : localobst ] .",
    "let @xmath333 be the edges emanating from the vertex @xmath38 in the directions @xmath1093 , @xmath1094 , respectively . according to the lemma [ lem : genhigh ] ,",
    "we attach to the edges @xmath333 and @xmath334 the numbers @xmath1096 , @xmath1097 and @xmath1098 , respectively .    since @xmath334 is an unbounded edge , the numbers @xmath1099 must be 0 .",
    "let @xmath434 be an affine coordinate of the component @xmath1100 of @xmath93 whose value is 0 at the node corresponding to the edge @xmath677 .",
    "let @xmath1101 and @xmath1102 be the values of @xmath434 at the node corresponding to the edge @xmath678 and the point corresponding to the unbounded edge @xmath334 , respectively .",
    "moreover , by condition ( iii)(c ) of theorem [ thm : obstruction2 ] , @xmath1103 and @xmath1104 must also be 0 .",
    "then the polynomial @xmath469 introduced in subsection [ subsec : localobst ] is @xmath1105    thus , for the given configuration @xmath15 of @xmath93 , an element of the dual obstruction space @xmath367 is given by the data @xmath480 which satisfy @xmath1106 and @xmath1107 since @xmath1101 is not 0 , these conditions imply that the space @xmath367 is @xmath398 . in other words , if there is a pre - log curve of its type given by the above tropical curve , then its obstruction automatically vanishes , though the tropical curve itself is superabundant .    however , for those tropical curves like the one in the right hand side of figure [ fig : diffdim ] , which is superabundant in the sense of definition [ def : nonsuperabundant2 ] , theorem [ thm : corresp ] guarantees the existence of pre - log curves of type @xmath3",
    "namely , if the given tropical curve @xmath3 allows a deformation into an imbedded non - superabundant tropical curve , then there is a pre - log curve of type @xmath3 ( and it is even smoothable ) .",
    "* let @xmath1109 be the set of flags of @xmath3 whose vertices are on the loop of @xmath66 .",
    "there is a natural direction @xmath1110 of @xmath10 determined by each @xmath919",
    ". then these directions span @xmath10 .",
    "note that this theorem does not insist anything on the existence of a pre - log curve of type @xmath3 , and the existence of such a curve is an assumption . as examples",
    "[ ex:1 ] and [ ex:2 ] show , the existence of such a curve is a nontrivial problem . in fact , the theorem states that it is the same as solving the problem of the smoothability of the given tropical curve .",
    "let us take a higher valent vertex @xmath1111 on the loop of @xmath66 .",
    "let @xmath1112 be the edges of @xmath66 emanating from @xmath1111 , and let @xmath1113 and @xmath1114 be the edges contained in the loop .",
    "we write by @xmath1115 the subspace of @xmath10 spanned by the directions of the edges @xmath1112 .",
    "let @xmath1116 be the dimension of @xmath1115 .",
    "take a basis @xmath1117 of @xmath1118 so that the first @xmath1116 vectors @xmath1119 is a basis of @xmath1115 .    by the argument in subsection [ subsec : localobst ] and subsection [ subsec : gendual ] , we attach numbers @xmath480 and @xmath1120 to the vertex @xmath1111 as in the expression ( [ eq : localobst ] ) in subsection [ subsec : localobst ] . here the tropical curve with only one vertex @xmath1111",
    "is obtained as the image of the standard tropical curve with one vertex by composing a linear map @xmath1121 see subsection [ subsec : localcorr ] .",
    "note that the vectors in the dual basis @xmath1122 can be seen as vectors in the dual space of @xmath1123 through the dual of this map ( the vectors @xmath1124 are regarded as zero vectors , which reflects the fact that there are no restrictions to the values of @xmath1120 ) .    by theorem [ thm : obstruction2 ] , it is easy to see that the numbers @xmath443 and @xmath1125 attached to the edges except @xmath1113 and @xmath1114 must be zero . in particular , @xmath1126 the equation @xmath1127 becomes in the form @xmath1128 where @xmath434 is a coordinate on @xmath1129 which is zero at the point corresponding to the edge @xmath1113 .",
    "substituting @xmath1130 , @xmath1131 , we have a series of equations @xmath1132 on the other hand , by the residue theorem we also have the equations @xmath1133 it follows that @xmath1134 .",
    "also , since @xmath463 , @xmath1135 are nonzero , the equation @xmath1136 can not be proportional to @xmath1137 , @xmath1131 .",
    "thus , all the numbers @xmath443 must be zero .",
    "this is implied at all higher valent vertices on the loop .",
    "so the only nonzero terms attached to higher valent vertices are @xmath955 associated to the directions in @xmath1138 which annihilate the subspace of @xmath30 spanned by the directions of the edges emanating from the higher valent vertex .",
    "then , by theorem [ thm : obstruction2 ] it follows that the space @xmath367 is naturally contained in the space @xmath1138 and a vector in @xmath367 must annihilate all the directions of the edges attached to a vertex in the loop . by assumption , these directions span @xmath30 , so the space @xmath367 must be zero .    [",
    "rem : supple ] if the directions of the edges emanating from vertices in the loop do not span @xmath30 , the space @xmath367 is identified with the annihilator subspace of the space spanned by these directions .",
    "the vanishing of the remaining obstruction is then argued by the method in @xcite      here two loops are contained in different planes . assuming the existence of a pre - log curve of type @xmath3 in the central fiber of a suitable toric degeneration",
    ", we calculate the dual obstruction space @xmath367 .    if the 4-valent vertex @xmath38 is resolved into two 3-valent vertices ( see figure [ fig:00c ] ) , then by theorem [ thm : obstruction ] , the space @xmath367 is two dimensional .",
    "we will see the effect of the existence of the 4-valent vertex to the space @xmath367 .    as in the previous example , we associate the numbers @xmath443 , @xmath1139 to the edges @xmath75 emanating from @xmath38 .",
    "let @xmath1140 be the integral generators of the directions of the edges @xmath75 , respectively ( in the direction emanating from @xmath38 ) .",
    "let @xmath1141 be the dual basis .",
    "we define the numbers @xmath443 using this dual basis of @xmath320 ( see ( 4 ) in subsection [ subsec : localobst ] ) . using the same notation as in the proof of theorem [ thm : loop ] , let us take the equation @xmath1142 becomes @xmath1143 as before , we take the coordinate @xmath434 on the component of the degenerate curve corresponding to the vertex @xmath38 so that @xmath467",
    ". then the equation implies the conditions @xmath1144 theorem [ thm : obstruction2 ] implies the further conditions @xmath1145 since @xmath1101 is nonzero , these equations imply @xmath1146 and the other @xmath443s are zero .",
    "these numbers can be extended to the whole loop part .",
    "thus , in this case the space @xmath367 is one dimensional and the generator of it has support on the whole loop part , contrary to the resolved curve ( the picture on the right of figure [ fig:00c ] ) , in that case the space @xmath367 is two dimensional and the generators are supported on the individual loops .",
    "so the 4-valent vertex cancels part of the dual obstruction , and mixes up the rest .    using the calculation in @xcite",
    ", we can deduce the criterion for the smoothability of genus two tropical curves which has @xmath3 as a subgraph .",
    "namely , extending the well - spacedness condition for genus one curves ( see @xcite ) , a curve in the following figure [ fig:00d ] is smoothable .    here the edge @xmath1147",
    "is not contained in the affine subplane spanned by the edges in the loop containing @xmath334 , and the edge @xmath1148 is not contained in the affine subplane spanned by the edges in the loop containing @xmath333 .",
    "moreover , the integral lengths of the edges @xmath1149 and @xmath1150 should be the same .",
    "algebraic analysis , geometry , and number theory ( baltimore , md , 1988 ) , 191224 , johns hopkins univ . press , baltimore , md , 1989 . adv .",
    "( 2012 ) , no . 3 , 853 - 875 .",
    "ams graduate studies in mathematics , volume 161 .",
    "different faces of geometry , 257 - 300 , int .",
    "( n.y . ) , 3 , kluwer / plenum , new york , 2004 .",
    "2005 ) , no .",
    "2 , 313377 .",
    "sanz - sol , marta ( ed . )",
    "proceedings of the icm , madrid , spain , august 22 - 30 , 2006 .",
    "volume ii : invited lectures .",
    "zurich , european math . soc .",
    ", 2006 , pp .",
    "827 - 852 . ,",
    "j. math . 134",
    "( 2012 ) , 14231472 .",
    "canad . j. math .",
    "67 ( 2015 ) , no . 3 , 667 - 695 .",
    "preprint , arxiv:0912.5090 .",
    "preprint , arxiv:1108.2802 .",
    "preprint , arxiv:1510.03350 . duke math",
    ". j. 135 ( 2006 ) , no .",
    "1 , 151 . in preparation .",
    "algebra and number theory 8 ( 2014 ) , 963 - 998 .",
    "thesis , technischen universitt kaiserslautern ( 2014 ) .",
    "vol 553 , issue 3 ( 2012 ) , 945 - 995 ."
  ],
  "abstract_text": [
    "<S> in this paper , we give a general deformation theoretical set up for the problem of the correspondence between tropical curves and holomorphic curves . using this formulation , the correspondence theorem for non - superabundant tropical curves </S>",
    "<S> is established rather generally . </S>",
    "<S> this formulation also gives an effective combinatorial description of the superabundant tropical curves , which will give the basis for the study of the correspondence between tropical curves and holomorphic curves for superabundant or obstructed cases @xcite . </S>",
    "<S> we also develop a general formalism to deal with tropical curves with higher valent vertices . </S>",
    "<S> these curves are indispensable in the study of superabundant tropical curves . </S>",
    "<S> we calculate the obstruction spaces associated to these curves , and observe several new phenomena peculiar to higher valent vertices . in particular , we give a new criterion for the smoothability of degenerate holomorphic curves associated to tropical curves with higher valent vertices , which is in a sharp contrast with the known well - spacedness condition . </S>"
  ]
}