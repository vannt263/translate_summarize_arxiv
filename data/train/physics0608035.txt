{
  "article_text": [
    "the portfolio optimization problem dates back to the pioneering work of markowitz  @xcite and is one of the main issues of risk management .",
    "given that the input data of any risk measure ultimately come from empirical observations of the market , the problem is directly related to the presence of noise in financial time series . in a more abstract ( model - based ) approach , one uses monte carlo simulations to get `` in - sample '' evaluations of the objective risk function . in both cases",
    "the issue is how to take advantage of the time series of the returns on the assets in order to properly estimate the risk associated with our portfolio .",
    "this eventually results in the choice of the risk measure , and a long debate in the recent years has drawn the attention on two important and distinct clues : the mathematical property of _ coherence _",
    "@xcite , and the noise sensitivity of the optimal portfolio . the rational behind",
    "the first of these issues lies in the need of a formal ( axiomatic ) translation of the basic common principles of risk management , like the fact that portfolio diversification should always lead to risk reduction .",
    "moreover , requiring a risk measure to be coherent implies the existence of a unique optimal portfolio and a well - defined variational principle , of obvious relevance in practical cases .",
    "the second issue is also a very delicate one . in a realistic experimental set - up",
    ", the number @xmath0 of assets included in a portfolio can be of order @xmath1 to @xmath2 , while the length of a trustable time series hardly goes beyond a few years , i.e. @xmath3 . a good estimate of any extensive observable would require the condition @xmath4 to hold , but this is rarely the case . instead , the ratio of assets to data points , @xmath5 , will be considered as a finite number .    in this note",
    "we address analytically the risk minimization problem by studying the dependence of the optimal portfolio on the ratio @xmath5 and on other potential external parameters .",
    "we first assume that the real distribution of returns is multinormal in order to keep the problem tactable from the analytical point of view .",
    "generalizations to more realistic returns distributions are also presented .",
    "our approch consists in writing down the empirical estimate of the risk measure and then reformulating the problem from the point of view of the statistical physics .",
    "we work out the analytical solution by means of the replica method  @xcite and thus get some insights on the optimal portfolios .",
    "the analytical solution confirms previous results on the existence of a phase transition  @xcite .",
    "the ratio @xmath5 plays the role of a control parameter . when it increases , there exists a sharply defined threshold value where the estimation error of the optimal portfolio diverges .",
    "a first account of our method , limited to the expected shortfall risk measure , has appeared in ref .  .",
    "here we give a more general presentation , studying other risk measures and more realistic distributions of returns .",
    "the paper is organized as follows . in section  [",
    "sect : general ] we introduce the notations we will use throughout the paper and we formulate the problem in its general mathematical form . in section  [ sect : ad ] we consider the case of the absolute deviation ( ad ) @xcite .",
    "we present the replica calculation of the optimal portfolio and compute explicitely a noise sensitivity measure introduced in ref .  .",
    "in section  [ sect : es ] we deal with portfolio optimization under expected shortfall  @xcite , which was shown to have a non - trivial phase diagram  @xcite and then studied analytically  @xcite .",
    "the striking point is that , for some values of the external parameters of the problem , the minimization problem is not well defined and thus can not admit a finite solution .",
    "we investigate here the same feature while considering realistic distribution of returns , so as to take into account volatility clustering .",
    "the replica approch then turns into a semi - analytic and extremely versatile technique .",
    "we discuss this point and then summarize our results in section  [ sect : conclu ] .",
    "we denote our portfolio by @xmath6 , where @xmath7 is the position on asset @xmath8 .",
    "we do not impose any restriction to short selling : @xmath7 is a real number . the global constraint induced by the total budget reads @xmath9 , where , due to a later mathematical convenience , we have chosen a slightly different normalization with respect to the previous literature . calling @xmath10 the return of the asset @xmath8 and assuming the existence of a well - defined probability density function ( pdf ) @xmath11 , one is interested in computing the pdf of the _ loss _",
    "@xmath12 associated to a given portfolio , i.e. @xmath13 the complete knowledge of this pdf would lead to the precise , though still probabilistic , evaluation of the loss , thus allowing for a straightforward optimization over the space of legal portfolios .",
    "this is actually a pretty difficult task and one usually restricts to some characteristic of this pdf ( e.g. its first moments , its tail beahvior ) , so as to capture the consequences of extremely bad events in the global loss .",
    "the actual p@xmath14 is not known in general , and integrals like the one in ( [ eq : pell ] ) are usually estimated by time series , coming from market oservations or synthetically produced by numerical simulations .",
    "whatever the chosen risk measure then , one typically faces cost functions ( to be optimized over all possible portfolios ) like @xmath15    \\ ,    \\label{eq : risk}\\ ] ] where @xmath16 is the whole time series of the return @xmath8 and where we denoted by @xmath17 other possible external parameters of the risk measure .",
    "the best known example of risk measure is of course the variance , as first suggested by markowitz . in that case",
    "the risk function is obtained by taking @xmath18 in ( [ eq : risk ] ) .",
    "the evaluation of the variance implies an empirical evaluation of the covariance matrix @xmath19 of the underlying stochastic process , and the extremely noisy character of any estimation of @xmath19 has been underlined a few years ago  @xcite .",
    "however , recent studies  @xcite have shown that the effect of the noise on the actual portfolio risk is not as dramatic as one might have expected .",
    "more in detail , a direct measure of this effect was introduced and explicitely computed in the simplest case of @xmath20 . in the next section ,",
    "we compute the same quantity as far as the absolute deviation of the loss is concerned .    in the statistical physics approach ,",
    "one studies the limit @xmath21 , while @xmath22 is finite .",
    "one introduces the partition function at inverse temperature @xmath23 : @xmath24   =     \\int \\prod_{i=1}^n dw_i\\      e^{-\\gamma\\;\\textrm{risk } [ { \\bf w } ; n , nt,\\lambda]}\\     \\delta\\left ( \\sum_{i=1}^n   w_i -n \\right ) \\ ,    \\label{eq : partfunc}\\ ] ] from which any observable will be computed . for instance",
    ", the optimal cost ( i.e. the minimum of the risk function in ( [ eq : risk ] ) ) is computed from @xmath25 =     \\lim_{n\\to\\infty } \\frac 1n    \\lim_{\\gamma\\to\\infty }    \\frac{-1}{\\gamma } \\log z^{(n)}_\\gamma[t,\\lambda;\\{x_i^{(\\tau)}\\ } ] \\ .",
    "\\label{eq : epsxit}\\ ] ] it turns out that this expression depends on the actual sample ( the time series @xmath26 ) used to estimate the risk measure .",
    "we are mainly interested in the average over all possible time series of this quantity , which we assume to be narrowly distributed around its mean value . taking the average of eq .",
    "( [ eq : epsxit ] ) means that we have to average the logarithm of the partition function according to the pdf @xmath27 .",
    "the so - called replica method allows to simplifiy this task as follows .",
    "we compute @xmath28 $ ] for integer @xmath29 and _ assume _ we can analytically continue this result to real @xmath29 : then @xmath30 = \\lim_{n\\to 0 } ( \\mathbb{e } \\left[z^n\\right]-1)/n $ ] .",
    "this is the strategy that we are going to use in the next sections and that will allow to compute the optimal portfolio .",
    "the absolute deviation measure ad@xmath31 $ ] is obtained by choosing @xmath32 in ( [ eq : risk ] ) .",
    "no other external parameters @xmath17 are present here .",
    "we assume a factorized distribution @xmath33     \\sim \\prod_{i,\\tau }     \\exp\\left(-\\frac { n ( x_i^{(\\tau)})^2}{2\\sigma^2_\\tau}\\right ) \\ ,    \\label{eq : pdffact}\\ ] ] where the volatilities @xmath34 are distributed according to a pdf which we do not specify for the moment . following the replica method , we introduce @xmath29 identical replicas of our portfolio and compute the average of @xmath35 : @xmath36\\ !    & \\sim & \\ !",
    "\\int \\prod_{a , b=1}^n dq^{ab } d\\hat q^{ab }    e^ {    n\\sum_{a , b=1}^n ( q^{ab}-1 ) \\hat q^{ab } - \\frac n2 \\textrm{tr } \\log \\hat q    -\\frac t2 \\textrm{tr } \\log q     + \\sum_\\tau\\log a_\\gamma(\\{q^{ab}\\};\\sigma_\\tau )    }    \\ , \\nonumber \\\\",
    "[ -3 mm ] \\label{eq : zn } \\\\    & &   a_\\gamma(\\{q^{ab}\\};\\sigma_\\tau ) =     \\int \\prod_{a=1}^n d u_\\tau^a \\exp\\bigg\\ {    - \\frac { 1}{2 \\sigma^2_\\tau } \\sum_{ab } ( q^{-1})^{ab } u^a_\\tau u^b_\\tau    -\\gamma\\sum_a |u_\\tau^a| \\bigg\\ }     \\nonumber \\ , \\end{aligned}\\ ] ] where we have introduced the overlap matrix @xmath37 as well as its conjugate @xmath38 , the lagrange multipliers introduced to enforce ( [ eq : qab ] ) . in the limit @xmath21 , @xmath39 finite , the integral in ( [ eq : zn ] ) can be solved by a saddle point method . due to the symmetry of the integrand by permutation of replica indices",
    ", there exists a replica - symmetric saddle point  @xcite : @xmath40 , @xmath41 for @xmath42 , and the same for @xmath38 .",
    "we expect the saddle point to be correct in view of the fact that the problem is linear . under this hypothesis , which will be only justified _ a posteriori _ by a direct comparison to numerical data , the replicated partition function in ( [ eq : zn ] ) gets simplified into @xmath43    & \\sim &     \\int dq_0\\int   d\\delta q     \\exp \\big[nn\\ s_\\gamma ( q_0,\\delta q)(1+\\mathcal{o}(n ) ) \\big ] \\ ,     \\label{eq : sad}\\\\    s_\\gamma ( q_0,\\delta q ) & = &    \\frac{(1-t ) q_0 -1}{2 \\delta q } + \\frac { 1-t}{2 } \\log\\delta q    + t \\ \\frac 1 t \\sum_\\tau \\frac 1n \\log a_\\gamma(q_0,\\delta",
    "q;\\sigma_\\tau )     \\ , \\nonumber \\\\    a_\\gamma(q_0,\\delta q ; \\sigma_\\tau ) & = &     \\int   \\frac{ds}{\\sqrt{2\\pi q_0 } } e^{-s^2/2 q_0 } \\left [ 1 + n \\int    du\\ e^{-\\frac{u^2 } { 2\\delta q\\sigma_\\tau^2 } + \\frac { s\\ u}{\\delta q    \\sigma_\\tau } -\\gamma |u| } + \\mathcal{o}(n^2 ) \\right ] \\ , \\nonumber \\end{aligned}\\ ] ] where @xmath44 and @xmath29 is the number of replicas ( which will eventually go to zero ) .",
    "we now assume that in the low temperature limit the overlap fluctuations are of order @xmath45 and introduce @xmath46 .",
    "one can show that if @xmath47 stays finite at low temperatures @xmath48 for the sake of clarity , we focus on the simple case @xmath49 . in the @xmath50 limit ,",
    "the saddle point equations for ( [ eq : sad ] ) are @xmath51 \\right)^{-1/2}\\ , \\label{eq : delta}\\end{aligned}\\ ] ] where @xmath52 . the minimum cost function , i.e. the average of eq .",
    "( [ eq : epsxit ] ) , is found to be @xmath53 .",
    "notice that ( [ eq:1 t ] ) only admits a solution for @xmath54 .",
    "there is no solution to the minimization problem if the ratio of assets to data points , @xmath5 , is smaller than 1 . on the other hand ,",
    "once this condition is fulfilled , the equation ( [ eq : delta ] ) gives a finite @xmath47 at any @xmath55 .",
    "the asymptotic behaviour of @xmath56 can be worked out analytically : we introduce @xmath57 and consider the limit @xmath58 .",
    "this leads to @xmath59 the full solution and a comparison with numerics are shown in fig .",
    "[ fig : enead ] ( left ) .",
    "[ ] [ ] [ 2.5]@xmath60 [ ] [ ] [ 2.5]@xmath61 ( var ) [ ] [ ] [ 2.5]@xmath62    we now address the issue of noise sensitivity , for which a measure was introduced in .",
    "the idea is the following : assume you know the true pdf of the loss ( [ eq : pell ] ) and you get some optimal @xmath63 by minimizing the absolute deviation of @xmath12 .",
    "we want to compare the optimal risk associated to @xmath64 with the one obtained by optimizing ( [ eq : risk ] ) , i.e. the empirical estimation of the same risk measure .",
    "a fair comparison is then @xmath65 , with @xmath66 }     { \\textrm{ad } \\big[{\\bf w}^{(0 ) } ; n\\big ] } \\ , \\ ] ] where the @xmath67 refer to the portfolio obtained by minimizing ( [ eq : risk ] ) .",
    "this is the quantity which we have computed by the replica approach . in our calculation we have assumed to deal with a factorized gaussian distribution of returns ( extensions to more realistic cases will be presented in the next section ) and it is straightforward to prove that in this case @xmath68 .",
    "this corresponds in our language to @xmath69 , which diverges like @xmath70 as @xmath71 .",
    "corrections to this leading behavior ( which is instead the full shape of @xmath61 in the variance minimization problem ) are needed in order to reproduce the data ( right panel of fig .",
    "[ fig : enead ] ) .",
    "the comparison with the markowitz optimal portfolio ( variance minimization ) indicates that the ad measure is actually less stable to perturbations : a geometric interpretation of this result can be found in ref .  .",
    "beside this fact , the interesting result is then the existence of a well defined threshold value @xmath72 at which the estimation error becomes infinite .",
    "this is due to the divergence of the variance of the optimal portfolio in the regime @xmath73 , where any minimization attempt is thus totally meaningless .",
    "for a fixed value of @xmath74 ( @xmath75 in the interesting cases ) the expected - shortfall ( es ) of a portfolio @xmath76 is obtained by choosing @xmath77var@xmath78 in ( [ eq : risk ] ) , where var stands here for the value - at - risk  @xcite . in practice ,",
    "it is computed from the minimization of a properly chosen objective function  @xcite : @xmath79     =     \\min_v \\left\\ {    v + \\frac 1{(1-\\beta ) t } \\sum_{\\tau=1}^t     \\left [       -v-\\sum_{i=1}^n w_i x_i^{(\\tau ) }      \\right]^+     \\right\\ }    \\ , \\ ] ] where @xmath80^+ \\equiv ( a+|a|)/2 $ ] .",
    "optimizing the es risk measure over all the possible portfolios satisfying the budget constraint is equivalent to the following linear programming problem :    * cost function : @xmath81  ; * variables : @xmath82  ; * constraints : @xmath83  .    in a previous work",
    "@xcite we solved the problem in the case where the historical series of returns is drawn from the oversimplified probability distribution ( [ eq : pdffact ] ) , with @xmath84 . here",
    "we do a first step towards dealing with more realistic data and assume that the series of returns can be obtained by a sequence of normal distributions whose variances depend on time : @xmath85 & \\sim &    \\prod_{\\tau,\\tau ' } \\exp\\left(-\\sigma_\\tau\\sigma_{\\tau ' }     g^{-1}_{\\tau,\\tau ' } \\right )    \\prod_\\tau q(\\sigma_\\tau ) \\",
    ",    \\label{eq : probsigma}\\end{aligned}\\ ] ] for some long range correlator @xmath86 which takes into account volatility correlations , and @xmath87 equal e.g. to a lognormal distribution",
    ".      a straightforward generalization of the replica calculation presented in ref .",
    "( and sketched in the previous section for a similar problem ) allows to compute the average optimal cost for a given volatility sequence @xmath88 , in the limit when @xmath21 and @xmath39 stays finite . this is given by @xmath89    \\ , \\\\",
    "\\tilde { \\varepsilon}(t,\\beta;v , q_0|\\{\\sigma_\\tau\\ } )     & \\equiv &    t(1-\\beta)v-\\frac{q_0}{2 } + \\frac{t}{2\\sqrt{\\pi } }    \\frac 1 t \\sum_{\\tau=1}^t    \\int_{-\\infty}^{+\\infty } \\!\\!ds\\   e^{-s^2 }     g(v/\\sigma_\\tau+s\\sqrt{2q_0};\\sigma_\\tau ) \\ , \\ \\ \\ \\",
    "\\label{eq : egs}\\end{aligned}\\ ] ] where @xmath90 and the function @xmath91 is equal to @xmath92 if @xmath93 , to @xmath94 is @xmath95 , and @xmath96 otherwise .",
    "the minimization over @xmath97 implies that @xmath98 as discussed in @xcite , the problem admits a finite solution if ( [ eq : egs ] ) is minimized by a finite value of @xmath47 .",
    "the feasible region is then defined by the condition @xmath99  , where @xmath100 and @xmath101 satisfy ( [ eq : speq ] ) .",
    "this theoretical setup suggests the following semi - analytic protocol for determining the phase diagram of realistic portfolio optimization problems .    1 .",
    "fix a value of @xmath102 $ ] , and take @xmath0 equal to the portfolio size you are interested in .",
    "2 .   for @xmath103 to @xmath104 ,",
    "such that @xmath105 $ ] , do the following : 1 .",
    "generate a sequence @xmath106 according to ( [ eq : probsigma ] ) and compute the @xmath107 function in ( [ eq : egs ] ) .",
    "2 .   minimize @xmath107 with respect to @xmath100 and @xmath101 according to ( [ eq : speq ] ) .",
    "3 .   repeat steps ( a ) and ( b ) for @xmath29 samples , and compute the mean value @xmath108 .",
    "plot @xmath109 vs. @xmath5 and find the value @xmath110 where this function changes its sign .    by repeating this procedure for several values of @xmath111",
    "we get the phase separation line @xmath110 vs. @xmath111 .",
    "a simple way of generating realistic volatility series consists in looking at the return time series as a cascade process  @xcite . in a multifractal model recently introduced  @xcite",
    "the volatility covariance decreases logarithmically : this is achieved by letting @xmath112 , where @xmath113 are gaussian variables and @xmath114 @xmath17 quantifying volatility fluctuations ( the so - called ` vol of the vol ' ) , and @xmath115 being a large cutoff .",
    "a few samples generated according to this procedure are shown in fig .",
    "[ fig : volclust ] .    the phase diagram obtained for different values of @xmath116",
    "is shown in fig .",
    "[ fig : pd ] .",
    "a comparison with the phase diagram computed in absence of volatility fluctuations shows that , while the precise shape of the separating curve depend on the fine details of the volatility pdf , the main message has not changed : there exists a regime , @xmath117 , where the small number of data with respect to the portfolio size makes the optimization problem ill - defined . in the `` max - loss ''",
    "limit @xmath118 , where the single worst loss contributes to the risk measure , the threshold value @xmath119 does not seem to depend on the volatility fluctuations . as @xmath111 gets smaller than @xmath120 , though , the presence of these fluctuations is such that the feasible regione becomes smaller than the ideal multinormal case .",
    "in this paper we have discussed the replica approach to portfolio optimization . the rather general formulation of the problem allows to deal with several risk measures .",
    "we have shown here the examples of absolute deviation , expected shortfall and max - loss ( which is simply taken as the limit case of es ) . in all cases",
    "we find that the optimization problem , when the risk measure is estimated by using time series , does not admit a feasible solution if the ratio of assets to data points is larger than a threshold value . as discussed in ref .",
    ", this is a common feature of various risk measures : the estimation error on the optimal portfolio , originating from in - sample evaluations , diverges as a critical value is approached . in the expected shortfall case ,",
    "we have also discussed a semi - analytic approach which is suitable for describing realistic time series .",
    "our results suggest that , as far as volatility clustering is taken into account , the phase transition is still there , the only effect being the reduction of the feasible region . as a general remark ,",
    "we have shown that the replica method may prove extremely useful in dealing with optimization problems in risk management .",
    "i.  kondor , lectures given at the summer school on `` risk measurement and control '' , rome , june 9 - 17 , 2005 ; i.  kondor , s.  pafka , and g.  nagy , _ noise sensitivity of portfolio selection under various risk measures , _ submitted to journal of banking and finance ."
  ],
  "abstract_text": [
    "<S> we use a replica approach to deal with portfolio optimization problems . </S>",
    "<S> a given risk measure is minimized using empirical estimates of asset values correlations . </S>",
    "<S> we study the phase transition which happens when the time series is too short with respect to the size of the portfolio . </S>",
    "<S> we also study the noise sensitivity of portfolio allocation when this transition is approached . </S>",
    "<S> we consider explicitely the cases where the absolute deviation and the conditional value - at - risk are chosen as a risk measure . </S>",
    "<S> we show how the replica method can study a wide range of risk measures , and deal with various types of time series correlations , including realistic ones with volatility clustering . </S>"
  ]
}