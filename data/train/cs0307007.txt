{
  "article_text": [
    "grid @xcite has emerged as a modern trend in computing , aiming to support the sharing and coordinated use of diverse resources by virtual organizations ( vo s ) in order to solve their common problems@xcite .",
    "it was originally driven by by scientific , and especially high - energy physics ( hep ) communities .",
    "hep experiments are a classic example of large , globally distributed vo s whose participants are scattered over many institutions and collaborate on studies of experimental data , primarily on data processing and analysis .",
    "our background is specifically in the development of large - scale , globally distributed systems for hep experiments .",
    "we apply grid technologies to our systems and develop higher - level , community - specific grid services ( generally defined in @xcite ) , currently for the two collider experiments at fermilab , d0 and cdf .",
    "these two experiments are actually the largest currently running hep experiments , each having over half a thousand users and planning to analyze repeatedly peta - byte scale data .",
    "the success of the distributed computing for the experiments depends on many factors . in the hep computing , which remains a principal application domain for the grid as a whole , jobs are _ data - intensive _ and therefore _",
    "data handling _ is one of the most important factors . for hep experiments such as d0 and cdf , data handling is the center of the meta - computing grid system @xcite .",
    "the sam data handling system @xcite was originally developed for the d0 collaboration and is currently also used by cdf .",
    "the system is described in detail elsewhere ( see , for example , @xcite and references therein ) . here",
    ", we only note some of the advanced features of the system  the ability to coordinate multiple concurrent accesses to storage systems @xcite and global data routing and replication @xcite .",
    "given the ability to distribute data on demand globally , we face the similar challenges of distributing the processing of the data .",
    "generally , for this purpose we need global job scheduling and information management , which is a term we prefer over `` monitoring '' as we strive to include configuration management , resource description , and logging .    in recent years",
    ", we have been working on the samgrid project @xcite , which addresses the grid needs of the experiments ; our current focus is in the jobs and information management ( jim ) , which is to complement the sam grid data handling system with services for job submission , brokering and execution as well as distributed monitoring .",
    "together , sam and jim form samgrid , a `` vo - specific '' grid system .    in this paper , we present some key ideas from our system s design . for job management",
    "per se , we collaborate with the condor team to enhance the middleware so as to enable scheduling of data - intensive jobs with flexible resource description . for information , we focus on describing the sites resources in the tree - like structures of xml , with subsequent projections onto the condor classified advertisements ( classad ) framework , monitoring with globus mds and other tools .    the rest of the paper is organized as follows .",
    "we discuss the relevant job scheduling design issues and condor enhancements in section [ sec : jobs ] . in section [ sec : info ] , we describe configuration management and monitoring . in section [ sec : status ] , we present the status of the project and interfaces with the experiments computing environment and fabric ; we conclude in section [ sec : summary ] .",
    "a key area in grid computing is job management , which typically includes planning of job s dependencies , selection of the execution cluster(s ) for the job , scheduling of the job at the cluster(s ) and ensuring reliable submission and execution .",
    "we base our solution on the framework @xcite , a powerful grid middleware commonly used for distributed computing .",
    "thanks to the particle physics data grid ( ppdg ) collaboration @xcite , we have been able to work with the condor team to enhance the framework and then implement higher - level functions on top of it . in this section , we first summarize the general enhancements and then proceed to actually describing how we schedule data - intensive jobs for d0 and cdf .      we have designed three principal enhancements for .",
    "these have all been successfully implemented by the condor team :    * original required users to either specify which grid site would run a job , or to use condor - g s glidein technology . we have enabled to use a matchmaking service to automatically select sites for users .",
    "* we have extended the classad language , used by the matchmaking framework to describe resources , to include externally supplied functions to be evaluated at match time .",
    "this allows the matchmaker to base its decision not only on explicitly advertised properties but also on opaque logic that is not statically expressible in a classad .",
    "other uses include incorporation of information that is prohibitively expensive to publish in a classad , such as local storage contents or lists of site - authorized grid users .",
    "* we removed the restriction that the job submission client had to be on the same machine as the queuing system and enabled the client to securely communicate with the queue across a network , thus creating a multi - tiered job submission architecture .",
    "fundamentally , these changes are sufficient to form a multi - user , multi - site job scheduling system for generic jobs .",
    "thus , a novelty of our design is that we use the standard grid technologies to create a highly reusable framework to the job scheduling , as opposed to writing our own resource broker , which would be specific to our experiments .    in the remainder of this section we described higher - level features for the job management , particularly important for data - intensive applications .",
    "classic matchmaking service ( mms ) gathers information about the resources in the form of published classads .",
    "this allows for a general and flexible framework for resource management ( e.g. jobs and resource matching ) , see @xcite .",
    "there is one important limitation in that scheme , however , which has to do with the fact that the entities ( jobs and resources ) have to be able to express all their relevant properties upfront and _ irrespective of the other party_.    recall that our primary goal was to enable co - scheduling of jobs and data . in data - intensive computing , jobs are associated with long lists of data items ( such as files ) to be processed by the job .",
    "similarly , resources are associated with long lists of data items located , in the network sense , near them .",
    "for example , jobs requesting thousands of files and sites having hundreds of thousands of files are not uncommon in production in the sam system .",
    "therefore , it would not be scalable to explicitly publish all the properties of jobs and resources in the classads .    furthermore , in order to rank jobs at a resource ( or resources for the job ) , we wish to include additional information that could nt be expressed in the classads at the time of publishing , i.e. , before the match .",
    "rather , we can analyze such an information during the match , _ in the context of the job request_. for example , a site may prefer a job based on similar _ already scheduled _",
    "data handling requests .",
    "another example of useful additional information , not specific to data - intensive computing , is the pre - authorization of the job s owner with the participating cite , by means of e.g. looking up the user s grid subject in the site s * gridmapfile*. such a pre - authorization is not a replacement of security , but rather a means of protecting the matchmaker from some blunders that otherwise tend to occur in practice .    the original mms scheme allowed for such additional information incorporation only in the _ claiming _ phase , i.e. , after the match when the job s scheduler actually contacts the machine . in the samgrid design ,",
    "we augment information processing by the mms with the ability _ to query _ the resources with a job in the context .",
    "this is pictured in figure [ fig : jim_architecture ] by arrows extending from the resource selector to the resources , specifically to the local data handling agents , in the course of matching .",
    "it is implemented by means of externally supplied ranking function whose evaluation involves remote call invocation at the resources sites .",
    "specifically , the resource classads in our design contain pointers to additional information providers ( data handling servers called stations ) :    .... station_id = foo ....    and the body of the mms ranking function called from the job classad    .... rank = fun(job_dataset ,              other.station_id ) ....    includes logic similar to this pseudo - code :    .... station = resolve(station_id , ... ) return station- >   get_preference(job_dataset , ... ) ....    in the next subsection , we discuss how we believe this will improve the co - scheduling of jobs with the data .",
    "the co - scheduling of jobs and data has always been critical for the sam system , where at least a subset of hep analysis jobs ( as of the time of writing , the dominating class ) have their latencies dominated by data access .",
    "please note that the sam system already implemented the advanced feature of retrieving multi - file datasets asynchronously with respect to the user jobs @xcite  this was done initially at the cluster level rather than at the grid level .    generally with the data - intensive jobs , we attempt to minimize the time to retrieve any missing data and the time to store output data , as these times propagate into the job s overall latency . as we try to minimize the grid job latency , we ensure that the design of our system , figure  [ fig : jim_architecture ] is such that the data handling latencies will be taken into account in the process of job matching .",
    "this is a principal point of the present paper , i.e. , while we do not yet possess sufficient real statistics that would justify certain design decisions , we stress that our system design enables the various strategies and supports considerations listed below .    in the minimally intelligent implementation , we prefer sites that contain most of the the job s data",
    ". our design does not rely on a replica catalogue because in the general case , we need _ local _ metrics computed by and available from the data handling system :    * the network speeds for connections to the sources of any missing data ; * the depths of the queues of data requests for both input and output ; * the network speeds for connections to the nearest destination of the output files .",
    "it is important that network speeds be provided by a high - level service in the data handling rather than by a low - level network sensor , for reasons similar to those why having e.g. a 56kbps connection to the isp does not necessarily enable one to actually download files from the internet with that speed .",
    "naturally , being able to submit jobs and schedule them more or less efficiently is necessary but not sufficient for a grid system .",
    "one has to understand how resources can be described for such decision making , as well as provide a framework for monitoring of participating clusters and user jobs .",
    "we consider these and other aspects of _ information management _ to be closely related to issues of grid configuration . in the jim project",
    ", we have developed a uniform configuration management framework that allows for generic grid services instantiation , which in turn gives flexibility in the design of the grid as well as inter - operability on the grid ( see below ) .    in this section ,",
    "we briefly introduce the main configuration framework and then project it onto the various samgrid services having to do with information .",
    "our main proposal is that grid sites be configured using a site - oriented schema , which describes both resources and services , and that grid instantiation at the sites be derived from these site configurations .",
    "we are not proposing any particular site schema at this time , although we hope for the grid community as a whole to arrive at a common schema in the future which will allow reasonable variations such that various grids are still instantiatable .",
    "figure [ fig : fw ] shows configuration derivation in the course of instantiation of a grid at a site .",
    "the site configuration is created using a meta - configurator similar to one we propose below .      in our framework",
    ", we create site and _ all _ other configurations by a universal tool which we call a _ meta - configurator _ , or configurator of configurators .",
    "the idea is to separate the process of querying the user for values of attributes from the _ schema _ that describes what those attributes are , how they should be queried , how to guess the default values , and how to derive values of attributes from those of other attributes .",
    "any concrete configurator uses a concrete schema to ask the relevant questions to the end user ( site administrator ) in order to produce that site s configuration .",
    "any particular schema is in turn derived from a meta - schema .",
    "thus , the end configuration can be represented as : @xmath0 where @xmath1 is a particular configuration , @xmath2 is the configuration operation , @xmath3 is a particular schema reflecting certain design , @xmath4 is the meta - schema , @xmath5 and @xmath6 are the inputs of the designer and the user , respectively .    in our framework ,",
    "configurations and schemas are structures of the same type , which we choose to be trees of nodes each containing a set of distinct attributes .",
    "our choice has been influenced by the successes of the xml technologies and , naturally , we use xml for representing these objects .    to exemplify , assume that in our _ present _ design , a grid * site * consists of one or more * clusters * each having a name and an architecture ( homogenous ) , as well as exactly one * gatekeeper * for grid access .",
    "example configuration is :    .... < ?",
    "xml version='1.0 ' ?",
    "> < site name='fnal '         schema_version='v0_3 ' >    < cluster name='samadams '              architecture='linux ' >      < gatekeeper ... >    < /cluster",
    "/site > ....    this configuration was produced by the following schema    .... < ?",
    "xml version='1.0 ' ?",
    "> < site cardinalitymin='1 '        cardinalitymax='1 '        name='inquire - default , fnal ' >     < cluster   cardinalitymin='1 '       name='set , clustername , inquire '       architecture=        ' inquire - default , exec , uname'/ > < /site > ....    in an interactive session with the site administrator as follows :    .... what is the name of the site ? [ fnal ] :    < return > what is the name of cluster     at the site ' fnal ' ?   samadams what is the architecture     of cluster ' samadams ' [ linux ] ?",
    "... ....    when the schema changes or a new cluster is created at the site , the administrator merely needs to re - run the tool and answer the simple questions again .      in the jim project , we have designed the grid job management as follows .",
    "we advertise the participating grid clusters to an information collector and grid jobs are matched @xcite with clusters ( resources ) based on certain criteria primarily having to do with the data availability at the sites .",
    "we have implemented this job management using condor - g @xcite with extensions that we have designed together with the condor team @xcite .    for the job management to work as described in section  [ sec : jobs ] , we need to advertise the clusters together with the * gatekeepers * as the means for condor to actually schedule and execute the grid job at the remote site .",
    "thus , our _ present _ design requires that each advertisement contain a cluster , a gatekeeper , a sam station ( for jobs actually intending to process data ) and a few other attributes that we omit here .",
    "our advertisement software then selects from the configuration tree all patterns containing these attributes and then applies a classad generation algorithm to each pattern .",
    "the selection of the subtrees that are classad candidates is based on the xquery language .",
    "our queries are generic enough as to allow for _ design evolution _ , i.e. to be resilient to some modifications in the schema . when new attributes are added to an element in the schema , or when the very structure of the tree changes due to insertion of a new element",
    ", our advertisement service will continue to advertise these clusters with or without the new information ( depending on how the advertiser itself is configured ) but the important factor is that this site will continue to be available to our grid .",
    "for example , assume that one cluster at the site from subsection  [ sec : metaconf ] now has a new grid gatekeeper mechanism from globus toolkit 3 , in addition to the old one :    .... < ?",
    "xml version='1.0 ' ?",
    "> < site name='fnal '         schema_version='v0_3 ' >    < cluster name='samadams '              architecture='linux ' >      < grid_accesses >         < gatekeeper ... >         < gatekeeper - gtk3 ... >      < /grid_accesses >      ... ....    assume further that our particular grid is not yet capable of taking advantage of the new middleware and we continue to be interested in the old * gatekeeper * from each cluster .",
    "our pattern was such that a * gatekeeper * is a descendant of the * cluster * so we continue to generate meaningful classads and match jobs with this site s cluster(s ) .",
    "in addition to advertising ( pushing ) of resource information for the purpose of job matching , we deploy globus mds-2 for pull - based retrieval of information about the clusters and activities ( jobs and more , such as data access requests ) associated with them .",
    "this allows us to enable web - based monitoring , primarily by humans , for performance and troubleshooting @xcite .",
    "we introduce ( or redefine in the context of our project ) concepts of * cluster * , * station * etc , and map them onto the ldap attributes in the oid space assigned to our project ( the fnal organization , to be exact ) by the iana@xcite .",
    "we also create additional branches for the mds information tree as to represent our concepts and their relations .",
    "we derive the values of the _ dn _",
    "s on the information tree from the site configuration . in this framework , it is truly straightforward to use xslt ( or a straight xml - parsing library ) to select the names and other attributes of the relevant pieces of configuration .",
    "for example , if the site has two clusters defined in the configuration file , our software will automatically instantiate two branches for the information tree .",
    "note that the resulting tree may of course be distributed within the site as we decide e.g. to run an mds server at each cluster , which is a separate degree of freedom .",
    "we have been mentioning that there are in fact several other grid projects developing high - level grid solutions ; some of the most noteworthy include the european datagrid @xcite , the crossgrid@xcite , and the nordugrid @xcite .",
    "inter - operability of grids ( or of solutions on the grid if you prefer ) is a well - recognized issue in the community .",
    "the high energy and nuclear physics intergrid @xcite and grid inter - operability @xcite projects are some of the most prominent efforts in this area .",
    "as we have pointed out in the introduction , we believe that inter - operability must include _ the ability to instantiate and maintain multiple grid service suites at sites_.    a good example of inter - operability in this sense is given by various cooperating web browsers which all understand the user s bookmarks , mail preferences etc .. of course , each browser may give a different look and feel to its `` bookmarks '' menu , and otherwise treat them in entirely different ways , yet most browsers tend to save the bookmarks in the common html format , which has _ de facto _ become the standard for bookmarks . our framework , proposed and described in this section , is a concrete means to facilitate this aspect of inter - operability .",
    "multiple grid solutions can be instantiated using a grid - neutral , site - oriented configuration in an xml - based format .",
    "we can go one step further and envisage that the various grids instantiated at a site have additional , separate configuration spaces that can easily be conglomerated into a _ grid instantiation database_. in practice , this will allow the administrators e.g. , to list all the globus gatekeepers with one simple query .",
    "to provide a complete computing solution for the experiments , one must integrate grid - level services with those on the fabric .",
    "ideally , grid - level scheduling complements , rather than interferes with , that of local batch systems . likewise , grid - level monitoring should provide services that are additional ( orthogonal ) to those developed at the fabric s facilities ( i.e. , monitoring of clusters batch systems , storage systems etc . ) .",
    "our experiments have customized local environments .",
    "cdf has been successfully using cluster analysis facility ( caf ) , see @xcite .",
    "d0 has been using mcrunjob @xcite , a workflow manager which is also part of the cms computing insfrastructure .",
    "an important part of the samgrid project is to integrate its job and information services with these environments .    for job management ,",
    "we have implemented gram - compliant job managers which pass control from grid - gram to each of these two systems ( which in turn are on top of the various batch systems ) .",
    "likewise , for the purposes of ( job ) monitoring , these systems supply information about their jobs to the xml databases which we deploy on the boundary between the grid and the fabric .",
    "( for resource monitoring , these advertise their various properties using the frameworks described above ) .",
    "we delivered a complete , integrated prototype of samgrid in the fall of 2002 .",
    "our initial testbed linked 11 sites ( 5 d0 and 6 cdf ) and the basic services of grid job submission , brokering and monitoring .",
    "our near future plans include further work on the grid - fabric interface and more features for troubleshooting and error recovery .",
    "we have presented the two key components of the samgrid , a sam - based datagrid being used by the run ii experiments at fnal . to the data handling capabilities of sam ,",
    "we add grid job scheduling and brokering , as well as information processing and monitoring .",
    "we use the standard middleware so as to maximize the reusability of our design . as to the information management",
    ", we have developed a unified framework for configuration management in xml , from where we explore resource advertisement , monitoring and other directions such as service instantiation .",
    "we are deploying samgrid at the time of writing this paper and learning from the new experiences .",
    "this work is sponsored in part by doe contract no .",
    "de - ac02 - 76ch03000 .",
    "our collaboration takes place as part of the doc particle physics data grid ( ppdg ) , @xcite collaboratory scidac project .",
    "we thank the many participants from the fermilab computing division , the d0 and cdf experiments , and the members of the condor team for fruitful discussions as well as the development of our software and other software that we rely upon .              v. white _ et al .",
    "_ , `` d0 data handling '' , plenary talk at the international symposium on computing in high energy physics ( chep ) 2001 , september 2001 , beijing china , in proceedings . l. carpenter _",
    "_ , `` sam overview and operational experience at the dzero experiment '' , ibidem .",
    "l. lueking _",
    "et al . _ , ` resource management in sam and the d0 particle physics data grid' , ibidem .",
    "i. terekhov _",
    ", `` distributed data access and resource management in the d0 sam system '' in proceedings of 10-th international symposium on high performance distributed computing ( hpdc-10 ) , ieee press , july 2001 ,",
    "san - fransisco , ca    v. white and i. terekhov , `` sam for d0 - a fully distributed data access system '' , talk given at vii international workshop on advanced computing and analysis techniques in physics research ( acat-2000 ) , october , 2000 , batavia , il .",
    "g. garzoglio , `` the sam - grid project : architecture and plan '' , in proceedings of _ the viii international workshop on advanced computing and analysis techniques in physics research ( acat-2002 ) _ , june 2002 , moscow , russia .",
    "r. raman , m. livny and m. solomon , `` matchmaking : distributed resource management for high throughput computing '' , in proceedings of the seventh ieee international symposium on high performance distributed computing , july 28 - 31 , 1998 , chicago , il .",
    "i.  terekhov and v.  white , `` distributed data access in the sequential access model in the d0 run ii data handling at fermilab '' , in proceedings of the 9-th international symposium on high performance distributed computing ( hpdc-9 ) , august 2000 , pittsburgh , pa"
  ],
  "abstract_text": [
    "<S> we describe some of the key aspects of the samgrid system , used by the d0 and cdf experiments at fermilab . </S>",
    "<S> having sustained success of the data handling part of samgrid , we have developed new services for job and information services . </S>",
    "<S> our job management is rooted in and uses enhancements that are general applicability for hep grids . </S>",
    "<S> our information system is based on a uniform framework for configuration management based on xml data representation and processing . </S>"
  ]
}