{
  "article_text": [
    "throughout the paper , we will be discussing sets of finite ranked trees , that is , trees in which the set of children of each inner node is linearly ordered ; @xmath5 designates a _ ranked alphabet _ , that is , @xmath16 where the @xmath17 are pairwise disjoint sets and @xmath18 is finite .",
    "an element of @xmath17 is said to have _",
    "rank _ @xmath19 .",
    "this section summarizes the main facts relative to the algebraic framework , which we will use to establish our main theorem .",
    "most of these results are taken from the authors earlier paper @xcite and are stated here without proof .",
    "preclone _ is a many - sorted algebra @xmath20 .",
    "the elements of @xmath21 are said to have _ rank _ @xmath19 , the element @xmath22 belongs to @xmath23 , and the composition operation @xmath24 associates with each @xmath25 and @xmath19-tuple @xmath26 ( with @xmath27 , @xmath28 ) , an element @xmath29 where @xmath30 .",
    "moreover , @xmath22 and @xmath24 satisfy the axioms given below .    for convenience , a tuple @xmath31 as above",
    "is written @xmath32 , we say that @xmath31 has _ total rank _",
    "@xmath33 , written @xmath34 , and we let @xmath35 be the set of @xmath19-tuples of total rank @xmath33 . note that @xmath36 for all @xmath33 .",
    "we also write @xmath37 for the @xmath38-sum of @xmath19 copies of @xmath22 , so that @xmath39 .",
    "the axioms defining preclones are the following :    @xmath40    where @xmath25 , @xmath41 with each @xmath42 , @xmath43 with each @xmath44 , @xmath45 , @xmath46 equal to the @xmath38-sum of the @xmath47 first @xmath48 s , @xmath49 equal to the @xmath38-sum of the @xmath50 next @xmath48 s , etc .",
    "it is interesting to remark that @xmath23 is naturally equipped with a monoid structure .",
    "_ sub - preclones _ of preclones are defined in the natural way .",
    "morphism of preclones _ ,",
    "@xmath51 , is a rank preserving map , which also preserves the unit element  and the composition operation .",
    "similarly , a congruence is an equivalence relation , that relates only elements of equal rank , and which is stable under the composition operation .",
    "the quotient of a preclone by a congruence is naturally endowed with a preclone structure , and the projection map is an onto morphism .",
    "the least sub - preclone of a preclone @xmath52 , containing a given subset @xmath1 is called _ the sub - preclone of @xmath52 generated by @xmath1_. if this preclone is @xmath52 itself , we say that @xmath52 is _ generated _ by @xmath1 .",
    "a preclone is _ finitely generated _ if it admits a finite set of generators .",
    "a preclone @xmath52 is said to be _ finitary _ if each @xmath21 is finite .",
    "observe that as soon as some @xmath53 , @xmath54 is non - empty , then infinitely many @xmath53 are non - empty , and hence @xmath52 is not finite",
    ".      the following examples will be essential for our study .",
    "[ [ trees - and - free - preclones ] ] trees and free preclones + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath5 be a ranked alphabet .",
    "the free preclone generated by @xmath5 , written @xmath55 , can be described as follows ( see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 2.2 ) ) .",
    "let @xmath56 be a sequence of variable names : we let @xmath57 be the set of finite trees , whose inner nodes are labeled by elements of @xmath5 ( where a rank @xmath7 letter labels a node with @xmath7 children ) , whose leaves are labeled by elements of @xmath58 , and whose _ frontier _ ( the left to right sequence of leaf labels ) contains exactly one occurrence of @xmath59 , ",
    ", @xmath60 , in that order ( that is , belongs to @xmath61 ) .",
    "the elements of @xmath57 are called _ trees of rank @xmath19 _ or _",
    "@xmath19-ary trees _ over @xmath5 .",
    "if @xmath62 is such a tree , we let @xmath63 be the set of nodes of @xmath62 with a label in @xmath5 ( @xmath64 stands for _ non - variable labeled _ ) . in the logical discussion to follow ( section  [ sec logically ] )",
    ", we will give the nodes in @xmath63 a particular rle .",
    "( 110,48)(0,-48 ) ( 15.0,0.0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(30,-30 ) ( n0)(5.0,-30 ) ( n1)(25,-30 ) ( 14,-17)@xmath65 ( 4,-34)@xmath59 ( 13,-33 ) ",
    "( 24,-34)@xmath60 ( 55.0,0.0)(40,-30 ) ( 55,0)(70,-30 ) ( 40,-30)(70,-30 ) ( n0)(45.0,-30 ) ( n1)(65,-30 ) ( 54,-17)@xmath65 ( 54,-29)@xmath19 ( 45,-30)(40,-45 ) ( 45,-30)(50,-45 ) ( 40,-45)(50,-45 ) ( 44,-40)@xmath66 ( 44,-48)@xmath47 ( 65,-30)(60,-45 ) ( 65,-30)(70,-45 ) ( 60,-45)(70,-45 ) ( 64,-40)@xmath67 ( 64,-48)@xmath68 ( 95.0,0.0)(80,-30 ) ( 95,0)(110,-30 ) ( 80,-30)(110,-30 ) ( 80.0,-31)(75,-45 ) ( 110,-31)(115,-45 ) ( 80.0,-31)(110,-31 ) ( 75,-45)(115,-45 ) ( 94,-17)@xmath65 ( 94,-29)@xmath19 ( 94,-39)@xmath31 ( 94,-48)@xmath33    @xmath55 is a preclone for the following operations : if @xmath69 and @xmath70 ( @xmath71 ) , then the composite tree @xmath72 is obtained by replacing the @xmath73-labeled leaf of @xmath65 by the root of @xmath74 , and by renumbering the variable labeled leaves of the resulting tree with consecutively indexed @xmath75 s , see figure  [ composition of trees ] . the unit element @xmath22 is the graph in @xmath76 consisting of a single node labeled @xmath59 .",
    "each element of @xmath5 can be identified with an element of @xmath77 : the letter @xmath78 is identified with the tree with @xmath79 nodes , consisting of the root , labeled @xmath80 , and the @xmath19 children of the root , labeled @xmath81 in this order .",
    "the elements of rank 0 , @xmath82 , are the ordinary @xmath5-labeled trees .",
    "[ words as trees ] as discussed in the introduction , our results can be seen as generalizations to trees of known results on recognizable word languages .",
    "this meta - statement can be made precise in the following fashion : if @xmath1 is a finite ( unranked ) alphabet , we can view @xmath1 as a ranked alphabet , all of whose elements have rank 1 .",
    "then the elements of @xmath83 can be seen as the words of the form @xmath84 , where @xmath85 . in particular , the monoid @xmath83 is isomorphic to , and will be identified with the free monoid @xmath2 .",
    "the sets @xmath86 ( @xmath87 ) are empty .",
    "[ [ preclone - of - transformations - preclone - of - an - automaton ] ] preclone of transformations , preclone of an automaton + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    if @xmath88 is a set , let @xmath89 be the set of @xmath19-ary transformations of @xmath88 , that is , the set of mappings @xmath90 .",
    "let also @xmath91 .",
    "composition of mappings endows @xmath92 with a preclone structure in the following sense : if @xmath93 , @xmath94 ( @xmath95 ) and @xmath96 , then @xmath72 maps @xmath97 to @xmath98    if @xmath5 is a ranked alphabet and @xmath88 is a @xmath5-algebra , each element @xmath78 determines naturally an @xmath19-ary transformation of @xmath88 .",
    "the sub - preclone of @xmath92 generated by @xmath5 is called the _ preclone associated _ with @xmath88 .",
    "[ automata and transition monoids ] let @xmath1 be an unranked alphabet , viewed as a ranked alphabet as in example  [ words as trees ] . an @xmath1-algebra @xmath88 is simply a set , equipped with an action of @xmath1 , that is , a deterministic complete automaton .",
    "each letter @xmath99 then defines a mapping @xmath100 .",
    "thus the preclone associated with @xmath88 has elements of rank 1 only , which form the usual transition monoid of the automaton , see @xcite .",
    "we note that @xmath5-algebras are natural objects in our context : a deterministic complete bottom - up tree automaton accepting trees in @xmath82 ( see @xcite ) , with state set @xmath88 , can be described as a finite @xmath5-algebra @xmath88 , equipped with a set @xmath101 of _ final states_.    [ [ the - preclones - t_exists - and - t_p ] ] the preclones @xmath9 and @xmath102 + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath103 be the boolean semiring @xmath104 , and let @xmath105 be the subset of @xmath106 whose rank @xmath19 elements are the @xmath19-ary  function and the @xmath19-ary constant @xmath107 , written respectively @xmath108 and @xmath109 ( by convention , @xmath110 is the nullary constant @xmath111 ) .",
    "then @xmath105 is a preclone , which is generated by the binary @xmath112 function and the nullary constants @xmath113 and @xmath114 .",
    "the set @xmath103 equipped with these 3 generators can be viewed as a finite tree automaton , and @xmath105 is the preclone associated with this automaton .",
    "it is interesting to note that the rank 1 elements of @xmath105 form a 2-element monoid , isomorphic to the multiplicative monoid @xmath115 , and known as @xmath116 in the literature on monoid theory , e.g. @xcite .",
    "similarly , if @xmath117 is an integer and @xmath118 , let @xmath119 be the subset of @xmath120 whose rank @xmath19 elements ( @xmath121 ) are the mappings @xmath122 for @xmath123 .",
    "again , @xmath119 is a finitely generated preclone , generated by the nullary constant 0 , the unary increment function @xmath124 and the binary sum @xmath125 .",
    "moreover , @xmath119 can be seen as the preclone associated with a @xmath126-element automaton , and its rank 1 elements form a monoid isomorphic to the cyclic group of order @xmath126 .",
    "[ [ preclone - generator - pairs ] ] preclone - generator pairs + + + + + + + + + + + + + + + + + + + + + + + +    if @xmath52 is a preclone and @xmath1 is a set of generators of @xmath52 , we say that @xmath127 is a _ preclone - generator pair _ , or _",
    "a  @xmath127 is said to be _ finitary _ if @xmath52 is finitary and @xmath1 is finite .",
    "the notions of sub-  and morphisms of  are defined naturally : @xmath127 is a _",
    "sub- _ of @xmath128 is @xmath129 ( so that @xmath52 is by construction a sub - preclone of @xmath130 ) ; and a _ morphism of _",
    "@xmath131 is a preclone morphism from @xmath52 to @xmath130 such that @xmath132 .",
    "let @xmath52 be a preclone and let @xmath133 .",
    "we say that @xmath134 is _ recognizable _ if there exists a morphism @xmath135 into a finitary preclone and a subset @xmath136 such that @xmath137 .",
    "then we say that @xmath134 is",
    "_ recognized by _",
    "@xmath130 , and by the morphism @xmath138 .",
    "if @xmath127 and @xmath128 are  and @xmath138 is a morphism between these , we say that @xmath134 is recognized by @xmath128 .",
    "let @xmath25 .",
    "context of @xmath65 in @xmath134 _ is a pair @xmath139 where @xmath140 is an element of @xmath52 and @xmath141 is an @xmath19-tuple of elements of @xmath52 , such that @xmath65 can be inserted under @xmath140 and above @xmath141 to produce an element of @xmath134 , see figure  [ contexts ] .",
    "we would like this condition to read @xmath142 , but it has to be a little more technical , to specify where precisely @xmath65 is attached under @xmath140 .    formally ,",
    "for each @xmath143 , @xmath14 , let @xmath144 be the set of _ @xmath19-ary contexts in @xmath145 _ , that is , the set of tuples of the form @xmath146 , where @xmath147 and @xmath148 , @xmath149 and @xmath150 with @xmath151 , see figure  [ contexts ] .",
    "( 75,59)(0,-59 ) ( 15.0,0.0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(30,-30 ) ( n0)(15.0,-30 ) ( 14,-17)@xmath140 ( 7,-28)@xmath152 ( 21,-28)@xmath153 ( 15.0,-30.0)(7,-45 ) ( 15,-30)(23,-45 ) ( 7,-45)(23,-45 ) ( 7.0,-46)(3.5,-56 ) ( 23,-46)(27.5,-56 ) ( 7.0,-46)(23,-46 ) ( 3.5,-56)(27.5,-56 ) ( 14,-52)@xmath141 ( 14,-44)@xmath19 ( 4,-60)@xmath154 ( 60.0,0.0)(45,-30 ) ( 60,0)(75,-30 ) ( 45,-30)(75,-30 ) ( 60.0,-30.0)(52,-45 ) ( 60,-30)(68,-45 ) ( 52,-45)(68,-45 ) ( 59,-17)@xmath140 ( 52,-28)@xmath152 ( 66,-28)@xmath153 ( 59,-40)@xmath65 ( 52.0,-46)(48.5,-56 ) ( 68,-46)(71.5,-56 ) ( 52.0,-46)(68,-46 ) ( 48.5,-56)(71.5,-56 ) ( 59,-52)@xmath141    if @xmath133 , @xmath25 , we say that a context @xmath155 is an _ @xmath134-context of @xmath65 _ if @xmath156 .",
    "we also let the set of 0-ary contexts in @xmath53 be the set @xmath157 of tuples @xmath158 where @xmath159 and @xmath149 ( the symbol @xmath160 is introduced here to preserve the uniformity of notation ) .",
    "we say that such a context is an @xmath134-context of @xmath161 if @xmath162 .",
    "next we say that elements of @xmath163 are _",
    "@xmath134-equivalent _ , written @xmath164 if @xmath65 and @xmath31 have the same @xmath134-contexts .",
    "the relation @xmath165 is a congruence , called the",
    "_ syntactic congruence _ of @xmath134 , the quotient preclone @xmath166 is called the _ syntactic preclone _ of @xmath134 , and",
    "the projection morphism is the _",
    "syntactic morphism_. finally , if @xmath1 is a set of generators of @xmath52 , the",
    "_ syntactic _ of @xmath134 is the pair @xmath128 where @xmath167 and @xmath168 is the image of @xmath1 in the syntactic morphism .",
    "we note the following result , proved in ( * ? ? ?",
    "* ; * ? ? ?",
    "* proposition 3.2 ) .",
    "[ prop syntactic ] let @xmath52 be a preclone , @xmath169 and @xmath133 .",
    "then the following statements hold .    *",
    "a morphism of preclones recognizes @xmath134 if and only if it it can be factored through the syntactic morphism of @xmath134 . *",
    "if @xmath130 is a sub - preclone or a quotient of @xmath170 , and if @xmath130 recognizes @xmath134 , then so does @xmath170 .",
    "* @xmath134 is recognizable if and only if its syntactic preclone is finitary . *",
    "the analogous statements hold for .",
    "we will be primarily concerned with the case where @xmath52 is a finitely generated free preclone , @xmath171 with @xmath5 a ranked alphabet .",
    "the subsets of each @xmath172 are called _",
    "tree languages_. in that case , the notion of recognizable tree languages defined above coincides with the classical notion of recognizability , and in particular , the syntactic preclone of a recognizable tree language @xmath173 coincides with the preclone of the minimal automaton of @xmath134 , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 3.2 ) .",
    "it is interesting to note that the syntactic @xmath5-algebra of @xmath134 @xcite is exactly the rank 0 part of the syntactic preclone of @xmath134 , and that the syntactic tree monoid @xcite of @xmath134 is the monoid of rank 1 elements of its syntactic preclone . in particular , if @xmath174 , then the syntactic preclone of @xmath134 is finitary if and only if its rank 0 part is finite .",
    "we now consider two important examples . in each ,",
    "the alphabet is a _ ranked boolean alphabet _",
    "@xmath175 , that is , a ranked alphabet such that whenever @xmath176 , then @xmath177 , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 3.3 ) for more details .",
    "[ lg texists ] for @xmath169 , let @xmath178 be the set of trees in @xmath179 containing at least one node labeled @xmath180 ( for some @xmath19 ) .",
    "then @xmath181 is recognizable and its syntactic preclone is @xmath105 defined in section  [ sec examples ] , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 3.3 ) .",
    "more generally , let @xmath182 be a morphism , with @xmath5 an arbitrary ranked alphabet .",
    "let @xmath183 and let @xmath184 be the complement of @xmath185 in @xmath5 .",
    "then the subsets of @xmath172 recognized by @xmath138 are @xmath186 , @xmath172 , @xmath187 and @xmath188 , the set of trees in @xmath172 with at least one occurrence of a letter in @xmath184 .    similarly , if @xmath189 are integers with @xmath123 and if @xmath190 consists of the trees in @xmath191 such that the number of nodes labeled @xmath180 ( for some @xmath19 ) is congruent to @xmath0 modulo @xmath126 , then @xmath190 is recognizable and its syntactic preclone is @xmath119 .",
    "if @xmath192 is a morphism , then the subsets of @xmath172 recognized by @xmath138 are the finite unions of the @xmath193 ( @xmath194 ) . for each such @xmath0 ,",
    "let @xmath195 for each @xmath196 , let @xmath197 be the number of nodes in @xmath63 labeled by a letter in @xmath198 , and let @xmath199 .",
    "then @xmath193 is the set of all @xmath200 such that @xmath201 .",
    "a _ pseudovariety of preclones _ is a class of finitary preclones which is closed under taking finite direct products , sub - preclones , quotients , finitary unions of @xmath202-chains and finitary inverse limits of @xmath202-diagrams , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 4 ) . here , we say that a union @xmath203 is _ finitary _ if @xmath130 is finitary . _",
    "finitary inverse limits _ of an @xmath202-diagram of the form @xmath204 are defined similarly .",
    "the definition of a _ pseudovariety of _ is similar : it is a class of finitary  which is closed under taking finite direct products , sub - preclones , quotients , and finitary inverse limits of @xmath202-diagrams ( there is no need to consider unions of @xmath202-diagrams , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 4.4 ) ) .",
    "we note the following proposition ( * ? ? ?",
    "* ; * ? ? ?",
    "* corollary 4.22 ) .",
    "[ 423 tcs ] let  be a pseudovariety of preclones and let @xmath52 be a finitary preclone such that , for all @xmath205 , there exists a morphism @xmath138 from @xmath52 into a preclone in  with @xmath206 . then @xmath207 .",
    "an analogous statement for pseudovarieties of  also holds .",
    "[ 424 tcs ] let  be a pseudovariety of  and let @xmath127 be a finitary  such that , for all @xmath205 , there exists a morphism @xmath138 from @xmath127 into a  in  with @xmath206 . then @xmath208 .",
    "this statement is proved in the same fashion as proposition  [ 423 tcs ] ( see @xcite ) , using also ( * ? ? ?",
    "* proposition 4.23 ) .    if @xmath209 is a class of finitary preclones ( resp . ) , there exists a least pseudovariety containing @xmath209 , which is said to be _ generated by @xmath209 _ and is denoted by @xmath210 , see ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 4.2 ) .",
    "we record in particular the following results , which follow from ( * ? ? ?",
    "* ; * ? ? ?",
    "* propositions 3.3 and 4.16 , corollary 4.8 ) .    [ prop psv gen ] let  be a class of finitary preclones ( resp . ) and let @xmath211 be the pseudovariety generated by . the syntactic preclone ( resp . ) of a recognizable tree language belongs to  if and only if it is a quotient of a sub - preclone ( resp .",
    "sub- ) of a direct product of elements of .",
    "[ cor 48 ] a pseudovariety of preclones ( resp . )",
    "is entirely determined by the syntactic preclones ( resp . )",
    "it contains .",
    "note that pseudovarieties of preclones can be seen as particular examples of pseudovarieties of , in the sense of proposition  [ psv pgs or preclones ] below .",
    "if  is a class of , we let @xmath212 be the class of preclones @xmath52 such that @xmath213 for some set @xmath1 .",
    "conversely , if @xmath214 is a class of preclones , we let @xmath215 be the class of finitary  @xmath127 such that @xmath216 .",
    "let us say that a class @xmath209 of  is _ full _ if membership of a  @xmath127 in @xmath209 depends only on @xmath52 ; that is , @xmath217 .",
    "[ psv pgs or preclones ] a pseudovariety  of  is full if and only if there exists a pseudovariety  of preclones such that @xmath218 and in that case ,  is the pseudovariety generated by @xmath219 .",
    "moreover , if @xmath209 is a full class of  and  is the pseudovariety generated by , then  is full as well and @xmath212 and @xmath219 generate the same pseudovariety of preclones .",
    "let  be a pseudovariety of preclones and let @xmath220 .",
    "the class  is full by definition .",
    "let us first verify that it is closed under taking sub- , quotients , finite direct products and finitary inverse limits of @xmath202-diagrams .",
    "suppose for instance that @xmath127 is a sub-  of @xmath128 with @xmath221 .",
    "then @xmath52 is a sub - preclone of @xmath130 , so @xmath222 and @xmath208 .",
    "the verification is equally routine for quotients and finite direct products . as for inverse limits of @xmath202-diagrams",
    ", it was shown ( * ? ? ?",
    "* ; * ? ? ?",
    "* proposition 4.23 ) that if @xmath223 , then @xmath224 .",
    "thus , if the @xmath225 are in , then the @xmath226 are in  and hence @xmath222 and @xmath208 .",
    "now let us show that if   is a class of finitely generated finitary preclones , then @xmath227 .",
    "let @xmath228 be a finitary  with @xmath229 : we want to show that @xmath230 .",
    "combining technical results from @xcite ( namely propositions 4.5 and 4.16 ) , we may assume that there exist preclones @xmath231 , ",
    ", @xmath226 in   such that @xmath232 for some morphism @xmath233 where @xmath170 is a sub - preclone of @xmath234 .",
    "since   consists of finitely generated preclones , let @xmath235 be a finite set of generators of @xmath236 .",
    "let @xmath168 be a finite subset of @xmath170 such that @xmath237 and for each @xmath238 , let @xmath239 be the projection of @xmath168 onto the @xmath238-th component .",
    "finally , let @xmath130 be the sub - preclone of @xmath170 generated by @xmath168 .",
    "then @xmath240 and @xmath128 is a sub-  of @xmath241 .",
    "this establishes that @xmath242 .",
    "let now  be a full class of finitary  and let @xmath243 .",
    "we verify that @xmath244 , which implies that @xmath210 is full .",
    "indeed , since  is full , we have @xmath217 and hence @xmath245 .",
    "the first part of the proof establishes that @xmath246 is a pseudovariety , so @xmath247 .",
    "moreover , the discussion in the previous paragraph , applied to @xmath248 , shows that @xmath249 . the expected equality follows .    applying this result to @xmath250 , a full pseudovariety of , and to @xmath251",
    ", shows that @xmath220 , as announced . finally , if @xmath252 for some other pseudovariety of preclones @xmath253 , then  and @xmath253 have the same finitely generated elements , and hence must be equal by proposition  [ cor 48 ] .",
    "this concludes the proof of the proposition .",
    "before we discuss varieties of tree languages , let us define quotients of tree languages .",
    "let @xmath254 , let @xmath255 be integers with @xmath256 and let @xmath257 .",
    "the _ left quotient _ of @xmath134 by @xmath258 is the subset of @xmath259 @xmath260 if @xmath261 , then the _ right quotient _ of @xmath134 by @xmath141 is @xmath262    [ remark syntactic class ] with the above notation , @xmath146 is an @xmath134-context of an element @xmath65 if and only if @xmath263 .",
    "moreover , if @xmath146 and @xmath264 are contexts such that @xmath265 and @xmath266 , then @xmath267 .",
    "we say that a morphism @xmath268 is a _ literal morphism _ if @xmath269 .",
    "variety of tree languages _",
    "a _ literal variety of tree languages _ ) is a collection @xmath270 , where @xmath5 runs over all ranked alphabets , @xmath7 runs over non - negative integers , such that each @xmath271 is a boolean algebra of recognizable languages in @xmath172 , and @xmath272 is closed under quotients and under inverse morphisms ( resp .",
    "inverse literal morphisms ) between free preclones . in particular",
    ", every variety of tree languages is a literal variety .    if  is a pseudovariety of preclones ( resp . ) , we let @xmath273 be such that @xmath271 is the class of languages in @xmath172 with syntactic preclone ( resp . ) in . if @xmath272 is a variety ( resp .",
    "literal variety ) of tree languages , let @xmath274 be the class of finitary preclones ( resp . finitary ) which only accept languages in @xmath272 .",
    "the following result was proved in @xcite .",
    "[ thm eilenberg ] the mappings @xmath275 and @xmath276 are mutually inverse lattice isomorphisms between the lattice of pseudovarieties of preclones ( resp . ) and the lattice of varieties ( resp .",
    "literal varieties ) of tree languages .",
    "we note the following corollary of theorem  [ thm eilenberg ] , which will be used in the sequel .",
    "[ eilenberg full ] let @xmath272 be a literal variety and let @xmath211 be the corresponding pseudovariety of . then  is full if and only if @xmath272 is a variety .",
    "[ variety of t exists ] let @xmath277 be the pseudovariety of preclones generated by @xmath9 , and let @xmath272 be the corresponding tree language variety . then a language @xmath254 is in @xmath271 if and only if @xmath134 is a boolean combination of languages of the form @xmath278 , @xmath279 , see example  [ lg texists ] and ( * ? ? ? * ; * ? ? ?",
    "* section 5.2.1 ) .",
    "more complex examples are discussed in ( * ? ? ?",
    "* ; * ? ? ?",
    "* section 5.2 ) , and the main results of this article provide further examples .",
    "let @xmath5 be a ranked alphabet .",
    "we will define tree languages by means of logical formulas .",
    "we consider the _ atomic formulas _ of the following form @xmath280 where @xmath281 , @xmath282 are positive integers , @xmath238 is less than or equal to the maximal rank of a letter in @xmath5 , and @xmath283 are first - order variables . if @xmath284 , subsets of @xmath285 will be defined by",
    "_ formulas of rank @xmath7 _ , composed using atomic formulas with @xmath286 $ ] , the boolean constants @xmath287 and @xmath107 , the boolean connectives and a family of generalized quantifiers called _ lindstrm quantifiers _ , defined in section  [ sec lind quantifiers ] below . as usual , each quantifier binds a first - order variable ( within the scope of the quantifier ) , and variables that are not bound are called _",
    "free_. a formula without free variables is called a _",
    "sentence_. we denote by @xmath288 the logic defined in this fashion .",
    "when a @xmath288-formula is interpreted on a tree @xmath289 , first - order variables are interpreted as nodes in @xmath63  and we assume @xmath290 , so that @xmath63 is non - empty",
    ". then @xmath291 holds if @xmath292 is labeled @xmath80 ( @xmath293 ) , @xmath294 holds if @xmath295 is a proper descendant of @xmath292 , and @xmath296 holds if @xmath295 is the @xmath238-th successor of @xmath292 .",
    "moreover , @xmath297 holds if @xmath292 is the root of @xmath62 and @xmath298 holds if the @xmath238-th successor of @xmath292 is labeled by @xmath75 , the @xmath299-th variable .",
    "finally , @xmath300 ( resp .",
    "@xmath301 ) holds if the index of the highest ( resp .",
    "least ) numbered variable labeling a leaf to the left ( resp .",
    "right ) of the frontier of the subtree rooted at @xmath292 is @xmath299 , see figure  [ fig leftj ] .",
    "the interpretation of lindstrm quantifiers is described in section  [ sec lind quantifiers ] .",
    "( 40,43)(0,-43 ) ( 20.0,0.0)(0,-40 ) ( 20,0)(40,-40 ) ( 0,-40)(40,-40 ) ( 20,-20)(10,-40 ) ( 20,-20)(30,-40 ) ( n0)(2.0,-40 ) ( n0)(8.0,-40 ) ( n0)(32.0,-40 ) ( n0)(38.0,-40 ) ( 22,-20)@xmath292 ( 1,-43)@xmath59 ( 7,-43)@xmath302 ( 31,-43)@xmath75 ( 37,-43)@xmath303    recall that formally , an _ interpretation _ is a mapping @xmath304 from the set of free variables of a formula @xmath138 ( or from a set containing the free variables of @xmath138 ) to the set @xmath63 of @xmath5-labeled nodes of a tree @xmath62 . if @xmath62 satisfies @xmath138 with this interpretation , we say that @xmath305 _ satisfies _ @xmath138 and we write @xmath306 . if @xmath138 is a sentence , we simply write @xmath307 .    in @xmath288-formulas , first - order variables are never interpreted as one of the @xmath73-labeled leaves .",
    "in fact , as far as logical constructs go , these particular leaves are not considered as proper nodes of the tree , but rather as place markers  which explains the fact that they are _ labeled _ by their position in the left - to - right order , and may be relabeled appropriately when trees are composed .",
    "when we deal with traditional trees , that is , trees in @xmath308 , this peculiarity disappears , and we observe that in that case , our atomic formulas ( @xmath309 , @xmath310 , @xmath311 and the @xmath312 ) are the atomic formulas of the usal logic on rooted ranked trees @xcite .",
    "[ atomic formulas on words ] let @xmath1 be an unranked alphabet , viewed as a ranked alphabet as in example  [ words as trees ] . then @xmath83 is equal to the set @xmath313 , and is isomorphic to the free monoid @xmath2 . in this situation ,",
    "the boundary of the trees in @xmath314 consist of a single node , labeled @xmath59 , that is @xmath315 and @xmath316 always evaluate to @xmath287 .",
    "thus the relevant atomic formulas are @xmath317 ( @xmath99 ) , @xmath294 , @xmath318 , @xmath297 and @xmath319 .",
    "note that in this case , @xmath297 is the predicate usually denoted by @xmath320 ( or @xmath321 ) and @xmath319 is the predicate @xmath322 ( or @xmath323 ) .",
    "that is , we have the same atomic formulas as in bchi s classical sequential calculus @xcite .",
    "the condition @xmath290 imposed to interpret formulas , is equivalent to the fact that logical formulas are not interpreted on the empty word .",
    "next to the atomic formulas defined above , we also use the following shorthand notation .",
    "let @xmath324 and let @xmath325 be the formula of rank @xmath7 @xmath326 } \\neg \\leftf_j(x)$ ] .",
    "then @xmath325 holds if no leaf situated to the left of the frontier of the subtree rooted at @xmath292 , is labeled by a variable .",
    "we observe that for different values of @xmath7 , we get different formulas @xmath325 , and our notation assumes that @xmath7 is clear from the context .",
    "similarly , if @xmath7 is clear from the context , we define @xmath327 to be the formula of rank @xmath7 @xmath328 } \\neg \\rightf_j(x)$ ] .",
    "its meaning is that no leaf situated to the right of the frontier of the subtree rooted at @xmath292 , is labeled by a variable .",
    "before we give formal definitions , we discuss an important example .",
    "[ ex introductory ] let us consider the first order formula @xmath329 , where @xmath138 is a formula with free variables in a set @xmath330 ( @xmath331 ) .",
    "let @xmath332 . recall that @xmath333 if there exists a node @xmath141 in @xmath63 such that @xmath334 ) \\models \\phi$ ] .",
    "for convenience , let @xmath335 denote the interpretation @xmath336 $ ] .",
    "we can express the satisfaction of @xmath337 in the following , more generalizable fashion : we label each node @xmath338 with @xmath339 if @xmath340 , with @xmath341 otherwise ( the variable labeled nodes are left unchanged ) . if @xmath342 denotes the resulting boolean - labeled tree , then @xmath343 if and only if @xmath342 belongs to the set of trees with at least one 1 label .",
    "to be formally accurate , the nodes of @xmath342 must be labeled by a ranked alphabet , that is , we need to have , for each rank @xmath19 , a letter @xmath344 and a letter @xmath345 . the definition of lindstrm quantifiers below generalizes this example .",
    "let @xmath175 be a ranked alphabet containing letters of rank @xmath19 for each @xmath19 such that @xmath346 and let @xmath347 be a family of rank @xmath7 formulas on @xmath5-trees .",
    "we say that this family is _ deterministic with respect to _ a first - order variable @xmath292 if for each tree @xmath289 , for each integer @xmath19 , and for each interpretation @xmath304 of the free variables in the @xmath348 mapping @xmath292 to a rank @xmath19 node of @xmath62 , then @xmath305 satisfies exactly one of the @xmath348 , @xmath349 .",
    "whenever needed , we will also assume that @xmath292 is not bound in any of the @xmath348 .",
    "[ first ex deterministic ] if @xmath350 , a very simple example of such a family is given by letting @xmath351 for each @xmath352 .",
    "[ ex boolean alphabet ] another natural example is given over a ranked boolean alphabet @xmath175 , that is , an alphabet such that whenever @xmath353 , then @xmath354 . if for each such @xmath19 , @xmath355 is logically equivalent to @xmath356 , then @xmath357 is deterministic with respect to any first order variable @xmath292 .    in later examples ,",
    "when dealing with ranked boolean alphabets , we will write @xmath358 instead of @xmath359 and we will assume that @xmath360 .",
    "then a deterministic family will simply be written @xmath361 .    with this notion ,",
    "we define ( _ simple _ ) _ lindstrm quantifiers _ , a definition adapted from @xcite to the case of finite trees .",
    "let @xmath362 be a language of rank @xmath7 trees and let @xmath347 be a family of rank @xmath7 formulas which is deterministic with respect to @xmath292 . then the quantified formula @xmath363 , where the quantifier @xmath364 binds the variable @xmath292 , is interpreted in the following manner",
    ".    given a tree @xmath289 and an interpretation @xmath304 of the free variables in the @xmath348 except for @xmath292 , we construct a tree @xmath365 as follows : @xmath62 and @xmath366 have the same underlying tree structure with the same variable - labeled nodes , that is , the same set of nodes and the same relations @xmath310 , @xmath367 , @xmath311 , @xmath368 , @xmath369 and @xmath370 .",
    "moreover , for each rank @xmath19 node @xmath141 of @xmath62 ( for some @xmath19 ) , let @xmath371 be the interpretation @xmath372 $ ] : then the node @xmath141 in @xmath373 is labeled by the unique element @xmath349 such that @xmath374 satisfies @xmath348 .",
    "the tree @xmath342 is called the _ characteristic tree _ determined by @xmath62 , @xmath304 and the formulas @xmath375 .",
    "if the @xmath375 have no free variable other than @xmath292 , we write @xmath376 for @xmath373 .",
    "finally , we say that @xmath305 _ satisfies _",
    "@xmath377 if @xmath378 .",
    "[ remark 25 ] with the above notation , we note that @xmath379 if and only if @xmath380 )      \\models p_\\delta(x)$ ] .",
    "since @xmath292 is the only free variable in @xmath381 , this is also equivalent to @xmath382 .",
    "[ ex define k ] suppose that @xmath350 and @xmath383 as in example  [ first ex deterministic ] .",
    "if @xmath196 , it is easily verified that the trees @xmath376 and @xmath62 are equal . in particular , if @xmath384 is a language of @xmath7-ary trees , then @xmath62 satisfies @xmath385 if and only if @xmath386 .",
    "[ example word lg ] let @xmath1 be an unranked alphabet , seen as a ranked alphabet as usual , suppose that @xmath387 for all @xmath388 and let @xmath389 .",
    "then @xmath390 can also be seen as a word language since @xmath391 is isomorphic to the free monoid @xmath392 , and the logic @xmath288 is analogous to the logic for word languages studied by sik and larsen in @xcite ( the latter does not include @xmath393 and @xmath394 among its atomic formulas ) .    in the next examples , @xmath175 is a ranked _",
    "boolean _ alphabet such that @xmath395 is non - empty whenever @xmath17 is , and @xmath396 is a family of formulas which is deterministic with respect to a first order variable @xmath292 , see example  [ ex boolean alphabet ] .",
    "[ example exists ] let @xmath397 denote the set of all trees in @xmath179 containing at least one node labeled @xmath180 ( for some @xmath19 ) , see example  [ lg texists ] . then the lindstrm quantifier @xmath364 is a generalization of the existential quantifier , as indicated in example  [ ex introductory ] .",
    "more precisely , @xmath305 satisfies @xmath398 if and only if there exists a node @xmath399 such that @xmath400 satisfies @xmath401 , where @xmath19 is the rank of @xmath141 and @xmath335 is the interpretation @xmath402 $ ] .",
    "let finally @xmath1 be an unranked alphabet , viewed as a ranked alphabet as in example  [ words as trees ] , and suppose that @xmath403",
    ". then @xmath404 ( where @xmath62 is viewed as a tree in @xmath83 ) if and only if @xmath405 ( where @xmath62 is viewed as a non - empty word in @xmath2 ) .",
    "[ example exists mod p ] in the same manner as in example  [ example exists ] , if @xmath406 , @xmath407 and @xmath408 denotes the set of those trees in @xmath191 such that the number of nodes labeled @xmath180 ( for some @xmath19 ) is congruent to @xmath0 modulo @xmath126 ( see example  [ lg texists ] ) , then the lindstrm quantifier @xmath409 is a generalization of a modular quantifier .",
    "more precisely , @xmath305 satisfies @xmath410 if and only if , for some @xmath19 , the number of nodes @xmath338 such that @xmath400 satisfies @xmath411 ( where @xmath19 is the rank of @xmath141 ) is congruent to @xmath0 mod @xmath126 .    if @xmath1 is an unranked alphabet , then @xmath412 ( where @xmath62 is viewed as a tree in @xmath83 ) if and only if @xmath413 ( where @xmath62 is viewed as a non - empty word in @xmath2 ) .",
    "[ example exists path ] let @xmath414 be the set of all trees in @xmath179 such that all the nodes along at least one path from the root to a leaf are labeled @xmath180 ( for appropriate values of @xmath19 ) .",
    "then @xmath305 satisfies @xmath415 if and only if there exists a root - to - leaf path such that , for every node @xmath338 along this path , @xmath416 ( where @xmath19 is the rank of @xmath141 ) .    if @xmath1 is an unranked alphabet , then @xmath412 ( where @xmath62 is viewed as a tree in @xmath83 ) if and only if @xmath417 ( where @xmath62 is viewed as a non - empty word in @xmath2 ) .",
    "[ example exists next ] let @xmath418 be the set of all trees in @xmath191 such that the children of the root are labeled @xmath180 ( for the appropriate @xmath19 )",
    ".    then @xmath305 satisfies @xmath419 if and only if , for every child @xmath141 of the root , @xmath416 ( where @xmath19 is the rank of @xmath141 ) .    if @xmath1 is an unranked alphabet , then @xmath412 ( where @xmath62 is viewed as a tree in @xmath83 ) if and only if @xmath420 ,  more formally , @xmath421  ( where @xmath62 is viewed as a non - empty word in @xmath2 ) .",
    "other next modalities can be expressed likewise , _",
    "e.g. _ , requesting that at least one ( resp .",
    "an even number , etc . ) of the children of the root satisfies the appropriate @xmath358 .",
    "let @xmath138 be a @xmath288-sentence of rank @xmath7 over @xmath5 .",
    "we denote by @xmath422 the set of trees in @xmath172 that satisfy @xmath138 , and we say that @xmath422 is _ defined _ by the formula @xmath138 .    for a class @xmath423 of tree languages , we let @xmath424 denote the fragment of @xmath288 consisting of the formulas in which all lindstrm quantifiers are of the form @xmath364 with @xmath425 .",
    "if @xmath138 is a @xmath424 sentence , we say that @xmath422 is _",
    "@xmath424-definable _ , and we let @xmath426 denote the class of @xmath424-definable tree languages .    [ expl - fo+mod2 ] let @xmath427 be the class of all the languages of the form @xmath178 on a boolean ranked alphabet .",
    "in view of the discussion in example  [ example exists ] , it is reasonable to say that @xmath428 is exactly the class of @xmath4-definable tree languages .",
    "examples  [ example exists ] and  [ example exists mod p ] show that if @xmath429 is the class of all languages of the form @xmath178 or @xmath430 , then @xmath431 is the class of @xmath432-definable tree languages",
    ".    it will be useful to associate a tree language also with the @xmath288-formulas that contain free variables ( as is done in ( * ? ? ?",
    "* section ii-2 ) for word languages ) .",
    "let @xmath433 be a finite set .",
    "we extend @xmath5 to the ranked alphabet @xmath434 , whose set of letters of rank @xmath33 ( @xmath435 ) is @xmath436 .",
    "we identify each @xmath437 with the pair @xmath438 .",
    "an element @xmath439 is said to _ occur _ in @xmath440 at node @xmath141 if the label of @xmath141 is of the form @xmath441 and @xmath442 .",
    "if each @xmath443 occurs exactly once in @xmath444 , then @xmath62 is called a _ @xmath433-structure of rank @xmath7 _ over @xmath5 .",
    "we note that a @xmath433-structure uniquely determines a tree @xmath445 and a mapping @xmath446 .",
    "conversely , any such pair @xmath305 determines a unique @xmath433-structure , written @xmath447 .",
    "now let @xmath138 be a rank @xmath7 @xmath288-formula with free variables in a set @xmath448 .",
    "let @xmath447 be a @xmath433-structure with @xmath449 . if @xmath450 , we write @xmath451 if @xmath452 ) \\models \\phi$ ] , where @xmath453 $ ] is the map from @xmath448 to @xmath63 determined by @xmath304 and @xmath454 . if @xmath455 , we write simply @xmath456 and we say that @xmath447 _ satisfies _ @xmath138 .",
    "we let @xmath422 be the set of @xmath448-structures satisfying @xmath138 .",
    "[ expl - atomic ] let @xmath457 , and let @xmath138 be the rank @xmath7 formula @xmath458 .",
    "let @xmath448 be a set containing @xmath292 .",
    "then @xmath422 is the collection of all @xmath448-structures of rank @xmath7 over @xmath5 such that some ( necessarily unique ) node has a label of the form @xmath459 with @xmath460 .",
    "it is immediate to observe that any two trees of equal rank in @xmath55 have the same contexts in @xmath422 , that is , the restriction of the syntactic congruence of @xmath422 to @xmath55 is the universal relation .",
    "the same holds for any atomic formula @xmath138 .",
    "we now explore the properties of the operator @xmath461 on families of languages .",
    "[ thm - closure ] @xmath461 is a closure operator on classes of languages .",
    "that is , for all language classes @xmath423 and @xmath462 , the following holds .",
    "* @xmath463 ; * if @xmath464 then @xmath465 ; * @xmath466 .    item ( 1 ) follows immediately from example  [ ex define k ] , and item ( 2 ) is immediate from the definition .",
    "the rest of section  [ sec closure operator ] is devoted to the proof of item ( 3 ) .",
    "let @xmath138 be a @xmath467-formula of rank @xmath7 over @xmath5 .",
    "we argue by induction on the structure of @xmath138 to show that there is an equivalent formula @xmath468 of @xmath424 , that is , a formula with the same free variables as @xmath138 and such that @xmath469 in @xmath470 for any finite set @xmath448 containing the free variables of @xmath138 .",
    "this will be sufficient to prove theorem  [ thm - closure ] .    if @xmath138 is an atomic formula , we let @xmath471 , since @xmath138 is also a @xmath424-formula . if @xmath472 ( resp .",
    "@xmath473 ) , we let @xmath474 ( resp .",
    "@xmath475 ) .",
    "the equivalence of @xmath138 and @xmath476 is easily verified .",
    "the last case occurs when @xmath138 is of the form @xmath477 , where @xmath478 and the @xmath375 form a family of rank @xmath7 formulas of @xmath467 over @xmath5 that is deterministic with respect to @xmath292 .",
    "in particular , @xmath479 where @xmath480 is a rank @xmath7 @xmath424-sentence over @xmath175 .    by induction , for each @xmath352 , there exists a @xmath424-formula @xmath481 equivalent to @xmath375 , so that @xmath138 is equivalent to @xmath482 .",
    "thus , we may assume that the @xmath375 are @xmath424-formulas .",
    "before we proceed with the end of the proof , we establish a technical fact .",
    "if @xmath483 is a formula and @xmath484 are variables , we denote by @xmath485 $ ] the formula obtained from @xmath483 by substituting the variable @xmath486 for all free occurrences of @xmath126 .",
    "( bound occurrences of @xmath486 in @xmath483 are renamed as usual . )",
    "let @xmath483 be a rank @xmath7 formula over @xmath175 .",
    "we then define @xmath487 to be the rank @xmath7 formula over @xmath5 obtained from @xmath483 by replacing each subformula of the form @xmath488 , where @xmath489 is any first - order variable , by the formula @xmath490 $ ] .",
    "since the quantifiers in @xmath483 also occur in @xmath491 , and the quantifiers in @xmath487 occur either in @xmath483 or in the @xmath375 , it is clear that @xmath483 is a @xmath424-formula if and only if @xmath487 is one . in the sequel",
    ", we assume that neither @xmath292 nor any free variable of one of the @xmath375 , is free in @xmath483 , and that no free variable has bound occurrences in the formulas under consideration .",
    "let us then assume that @xmath448 ( the finite set containing the free variables of @xmath138 and not containing @xmath292 ) also contains the free variables of @xmath483 .",
    "[ fact closure ] with the notation above , let @xmath196 , let @xmath492 be a function , and let @xmath493 be the characteristic tree determined by @xmath62 , @xmath304 and the formulas @xmath375",
    ". then we have @xmath494    we argue by induction on the structure of @xmath483 .",
    "suppose first that @xmath495 .",
    "then @xmath496 $ ] .",
    "let @xmath454 be the restriction of @xmath304 to @xmath497 and let @xmath498 be the characteristic tree determined by @xmath62 , @xmath454 and the @xmath490 $ ] .",
    "a node @xmath141 is labeled @xmath499 in @xmath500 if and only if @xmath501 ) \\models \\phi_\\delta$ ] .",
    "since @xmath489 does not occur in @xmath375 , this is equivalent to @xmath502 ) \\models \\phi_\\delta[z / x]$ ] , and hence to the labeling of @xmath141 by @xmath499 in @xmath498 .",
    "thus @xmath503 .",
    "then we have : @xmath504      & \\longleftrightarrow & ( t,[\\mu ; z\\mapsto \\lambda(z ) ] ) \\models      \\phi_\\delta[z / x ] \\textrm { by definition of $ \\mu$}\\\\ %           & \\longleftrightarrow & ( \\bar{t}_\\mu,[z \\mapsto \\lambda(z ) ] ) =      ( \\bar{t}_\\lambda,[z \\mapsto \\lambda(z)])\\models p_\\delta(z)\\\\ %           & \\longleftrightarrow &      ( \\bar{t}_\\lambda , \\lambda)\\models p_\\delta(z ) = \\chi .",
    "%      \\end{aligned}\\ ] ] if @xmath483 is another atomic formula ( namely , @xmath505 , @xmath506 , @xmath297 , @xmath507 , @xmath508 or @xmath509 with @xmath510 ) , then @xmath511 . since @xmath62 and @xmath342 have the same variable - labeled nodes and they differ only in the labeling of their nodes , and since @xmath483 does not depend on that labeling , we have in each case @xmath512 we have now established our claim for atomic formulas .",
    "the induction step is immediate if @xmath483 is of the form @xmath513 or @xmath514 .",
    "we now assume that @xmath515 where @xmath516 , @xmath517 , and @xmath518 is a family of rank @xmath7 formulas over @xmath175 with free variables in @xmath519 , which is deterministic with respect to @xmath489 .    by construction @xmath520 , and by induction hypothesis , for each node @xmath521 and for each @xmath522",
    ", we have @xmath523)\\models \\tilde\\chi_\\omega \\enspace \\longleftrightarrow \\enspace ( \\bar{t}_\\lambda,[\\lambda ; z \\mapsto w ] ) \\models \\chi_\\omega.\\ ] ] it follows in particular that @xmath524 is deterministic with respect to @xmath489 .",
    "moreover , the characteristic tree determined by @xmath62 , @xmath304 and @xmath525 is the same as that determined by @xmath342 , @xmath304 and @xmath526 .",
    "thus we have @xmath527 which concludes the induction and the proof .",
    "we now return to the proof of theorem  [ thm - closure ] .",
    "recall that @xmath528 and @xmath529 for some rank @xmath7 @xmath424-sentence @xmath483 over @xmath175 ( without free variables ) .",
    "we want to construct a formula in @xmath424 that is equivalent to @xmath138 and we claim that @xmath487 is such a formula .",
    "indeed , let @xmath200 , let @xmath304 be a mapping @xmath530 , and let @xmath531 be the characteristic tree determined by @xmath62 , @xmath304 and the @xmath375 . by definition , @xmath306 if and only if @xmath532 , that is , @xmath533 , or equivalently , @xmath534 .",
    "it was established in fact  [ fact closure ] that this is equivalent to @xmath535 , which concludes the proof .",
    "the objective of this section is to prove the closure properties summarized in theorem  [ thm - literalvar ] below .",
    "[ thm - literalvar ] @xmath426 is closed under boolean operations and inverse literal morphisms .",
    "moreover , @xmath426 is closed under left ( resp .",
    "right ) quotients if and only if any left ( resp .",
    "right ) quotient of a language in @xmath423 belongs to @xmath426 .    we now prove theorem  [ thm - literalvar ] , by considering separately each closure property .",
    "[ [ boolean - operations ] ] boolean operations + + + + + + + + + + + + + + + + + +    the fact that @xmath426 is closed under the boolean operations follows directly from the fact that @xmath424-formulas are closed under disjunction and negation .",
    "[ [ inverse - literal - morphisms ] ] inverse literal morphisms + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath536 be a rank - preserving mapping , and let us also denote by @xmath537 the induced morphism @xmath538 . note that if @xmath62 is a tree , then @xmath539 differs from @xmath62 only in the labeling of the nodes in @xmath63 .",
    "let @xmath138 be a rank @xmath7 @xmath424-formula over @xmath5 with free variables in a finite set @xmath448 .",
    "we show by structural induction on @xmath138 that there exists a rank @xmath7 @xmath424-formula @xmath540 over @xmath541 , with the same free variables as @xmath138 , and such that @xmath542 if and only if @xmath543 for any tree @xmath544 and any interpretation @xmath545 .",
    "if @xmath458 for some @xmath293 , we let @xmath546 , where the disjunction runs over the letters @xmath547 such that @xmath548 . if @xmath138 is another type of atomic formula , then @xmath138 does not depend on the labeling of the tree , and it suffices to choose @xmath549 .",
    "the inductive step for the boolean connectives is equally natural : if @xmath472 ( resp .",
    "@xmath473 ) , then we let @xmath550 ( resp .",
    "@xmath551 ) .",
    "suppose finally that @xmath138 is of the form @xmath552 .",
    "by induction , there exist formulas @xmath553 over @xmath541 such that , for each @xmath499 , @xmath554 if and only if @xmath555 for any tree @xmath544 , node @xmath141 in @xmath62 and mapping @xmath556 .",
    "it follows that the characteristic tree determined by @xmath62 , @xmath304 and @xmath557 , and the characteristic tree determined by @xmath539 , @xmath304 and @xmath558 coincide . as a result",
    ", we have @xmath542 if and only if @xmath543 .    [",
    "[ left - quotients ] ] left quotients + + + + + + + + + + + + + +    we now assume that any left quotient of a language in @xmath423 belongs to @xmath426 .",
    "let @xmath559 be non - negative integers and let @xmath560 .",
    "let also @xmath138 be a rank @xmath7 @xmath424-formula over @xmath5 with free variables in a finite set @xmath448 , and let @xmath561 be a @xmath433-structure of rank @xmath562 for some @xmath449 .",
    "( without loss of generality , we may assume that @xmath563 . )",
    "let @xmath564 .",
    "we prove by structural induction on @xmath138 that there exists a rank @xmath565 @xmath424-formula @xmath540 over @xmath5 , with free variables in @xmath566 and such that , for every tree @xmath567 and every mapping @xmath568 ( see figure  [ fig left quotients ] ) , we have @xmath569    if @xmath138 is a formula without free variables ( @xmath570 , @xmath571 , this shows that @xmath572 , and hence that @xmath426 is closed under left quotients .",
    "we now proceed with the proof .",
    "we first observe that @xmath63 may be viewed as a subset of @xmath573 : more precisely , the latter set is equal to the disjoint union of @xmath63 and @xmath574 .",
    "( 75,35)(0,-35 ) ( 15.0,0.0)(0,-20 ) ( 15,0)(30,-20 ) ( 0,-20)(30,-20 ) ( n0)(15.0,-20 ) ( 15.0,-20.0)(7,-35 ) ( 15,-20)(23,-35 ) ( 7,-35)(23,-35 ) ( 13.5,-12)@xmath575 ( 7,-18.5)@xmath152 ( 21,-18.5)@xmath153 ( 14,-30)@xmath62 ( 30,-12)a @xmath433-structure ( 30,-30)variables in @xmath566 are interpreted here    if @xmath138 is equal to @xmath576 , we let @xmath549 if @xmath577 , and @xmath578 ( resp .",
    "@xmath287 ) if @xmath579 and @xmath292 occurs at a node of @xmath575 for which the first component of the label is ( resp .",
    "is not ) @xmath80 .",
    "that is , if @xmath580 and @xmath575 satisfies ( resp .",
    "does not satisfy ) @xmath138 .",
    "let now @xmath581 ( resp .",
    "@xmath301 , @xmath298 ) with @xmath582 .",
    "if @xmath583 , we let @xmath584 if @xmath585 ( resp .",
    "@xmath586 if @xmath587 , @xmath588 if @xmath589 ) , and @xmath590 otherwise . if @xmath580 , then it does not depend on @xmath62 and @xmath304 whether @xmath591 or not , and we let @xmath578 or @xmath287 accordingly .",
    "if @xmath592 and @xmath593 , we let @xmath594 . if @xmath580 , we let @xmath578 or @xmath287 depending on whether @xmath595 .    now consider the case where @xmath596 . if @xmath597 , we let @xmath549 .",
    "if @xmath583 and @xmath598 , we let @xmath590 .",
    "if @xmath579 but @xmath599 , we let @xmath578 or @xmath287 depending whether the node of @xmath575 where @xmath292 occurs in an ancestor of the @xmath600-st variable leaf . finally , if @xmath601 , we let @xmath578 or @xmath287 depending whether @xmath602 .    the last case of an atomic formula occurs if @xmath138 is of the form @xmath603 .",
    "if @xmath604 , we let @xmath549 . if @xmath605 , we let @xmath578 or @xmath287 , depending on whether @xmath595 . if @xmath593 and @xmath598 , we let @xmath594 . finally , if @xmath580 and @xmath599 , let @xmath606 be the node of @xmath575 where @xmath292 occurs . if the @xmath238-th successor of @xmath606 is the ( @xmath607)-st variable leaf , we let @xmath608 ; otherwise we let @xmath590 .    as usual , if @xmath472 ( resp .",
    "@xmath473 ) , then we let @xmath550 ( resp .",
    "@xmath609 ) .",
    "we now consider the case where @xmath610 .",
    "we may assume that @xmath611 .",
    "let @xmath612 , let @xmath613 and let @xmath568 .",
    "let @xmath614 be the characteristic tree determined by @xmath615 , @xmath453 $ ] and @xmath616 .",
    "then , for any @xmath617 and for any @xmath499 , we have @xmath618 ) \\models p_\\delta(x )      & \\longleftrightarrow & ( s , [ \\lambda ; \\mu ; x\\mapsto v ] ) \\models      \\phi_\\delta \\\\      & \\longleftrightarrow & ( s , [ \\lambda ; x\\mapsto v ] ) \\models      \\phi_\\delta.\\end{aligned}\\ ] ] moreover , @xmath619 ) \\models \\phi \\enspace\\longleftrightarrow\\enspace ( s,\\lambda ) \\models \\phi \\enspace \\longleftrightarrow \\enspace \\bar s_\\lambda \\in k.\\ ] ]    for each @xmath352 , let @xmath553 be the formula associated with @xmath375 and @xmath575 by the induction hypothesis .",
    "let @xmath342 be the characteristic tree determined by @xmath62 , @xmath304 and @xmath620 .",
    "then , for any node @xmath338 , we have @xmath621 ) \\models \\phi_\\delta & \\longleftrightarrow & ( t,[\\lambda ; x\\mapsto v ] ) \\models \\phi'_\\delta\\\\ & \\longleftrightarrow & ( \\bar t_\\lambda,[x\\mapsto v ] ) \\models p_\\delta(x),\\end{aligned}\\ ] ] and hence @xmath614 is of the form @xmath622 for some tree @xmath623 which differs from @xmath140 only in the labeling of the nodes in @xmath624 .    for each @xmath625 , we let @xmath626 be the ( @xmath627)-structure obtained from @xmath575 by adding @xmath292 to the second component of the label of @xmath141 . then , for each @xmath628 , we let @xmath629 be the formula associated with @xmath375 and @xmath626 by the induction hypothesis . then we have @xmath630 ) \\models \\phi_\\delta \\\\ & \\longleftrightarrow & ( \\bar s_\\lambda , [ x\\mapsto v ] ) \\models p_\\delta(x).\\end{aligned}\\ ] ]    now , for each mapping @xmath631 , let @xmath632 be the tree obtained from @xmath140 by relabeling each node @xmath625 with @xmath633 .",
    "let also @xmath634 be the conjunction of the @xmath635 when @xmath141 runs over @xmath624 .",
    "then @xmath636 finally , let @xmath637 where the disjunction runs over all mappings @xmath638 .",
    "then the above discussion establishes that @xmath305 satisfies @xmath639 if and only if @xmath640 satisfies @xmath138 .",
    "moreover , since each @xmath641 is in @xmath426 , the formula @xmath639 is a @xmath467-formula , and by theorem  [ thm - closure ] , @xmath639 is equivalent to some @xmath424-formula @xmath540 , which concludes this proof .",
    "[ [ right - quotients ] ] right quotients + + + + + + + + + + + + + + +    the proof concerning the closure under right quotients is similar .",
    "we assume that every right quotient of a language in @xmath423 belongs to @xmath426 .",
    "let @xmath169 and let @xmath138 be a rank @xmath7 @xmath424-formula over @xmath5 with free variables in a finite set @xmath448 .",
    "let @xmath642 and @xmath449 , and let @xmath643 where each @xmath644 is a @xmath645-structure of rank @xmath646 , @xmath647 , @xmath648 and the @xmath645 form a partition of @xmath433 .",
    "let @xmath649 , @xmath650 $ ] and @xmath651 .",
    "we show by structural induction on @xmath138 that there exists a rank @xmath19 @xmath424-formula @xmath540 with free variables in @xmath566 such that , for every tree @xmath652 and every mapping @xmath653 ( see figure  [ fig right quotients ] ) , we have @xmath654    ( 90,26)(0,-31 ) ( 20.0,0.0)(5,-20 ) ( 20,0)(35,-20 ) ( 5,-20)(35,-20 ) ( 19,-13)@xmath62 ( 5.0,-21)(0,-31 ) ( 35,-21)(40,-31 ) ( 0.0,-31)(40,-31 ) ( 5,-21)(35,-21 ) ( 19.5,-27)@xmath575 ( 45,-13)variables in @xmath566 are interpreted here ( 45,-27)a @xmath38-sum of @xmath645-structures    we first consider the case of atomic formulas . if @xmath655 , we let @xmath549 if @xmath593 and @xmath656 or @xmath287 if @xmath580 , depending on whether @xmath575 satisfies @xmath138 .",
    "if @xmath592 , we let @xmath549 if @xmath593 , and @xmath287 if @xmath580 .",
    "if @xmath657 and @xmath593 , we let @xmath549 if @xmath658 for some @xmath537 such that @xmath659 , and @xmath594 otherwise . if @xmath580 and @xmath660 , we let @xmath578 or @xmath287 depending on whether @xmath661",
    "suppose now that @xmath662 .",
    "if @xmath597 , we let @xmath663 . if",
    "@xmath664 , we let @xmath578 or @xmath287 depending on whether one of the @xmath665 satisfies @xmath138 . if @xmath580 and @xmath599 , we let @xmath594 . finally ,",
    "if @xmath593 and @xmath598 , let @xmath666 be such that @xmath667 ( i.e. @xmath295 occurs in @xmath665 )",
    ". then we let @xmath668 .",
    "the situation is similar if @xmath669 .",
    "if @xmath597 , we let @xmath549 . if @xmath664 , we let @xmath578 or @xmath287 depending on whether one of the @xmath665 satisfies @xmath138 . if @xmath580 and @xmath599 , we let @xmath594 . finally , if @xmath593 and @xmath598 , let @xmath299 be such that @xmath670 .",
    "if @xmath295 does not occur at the root of @xmath665 , we let @xmath671 .",
    "if @xmath295 does occur at the root of @xmath665 , we let @xmath672 .",
    "finally , suppose that @xmath581 ( resp .",
    "@xmath301 ) . if @xmath580 , let @xmath238 be such that @xmath673 .",
    "then we let @xmath656 or @xmath287 according to whether @xmath674 and @xmath644 satisfies @xmath675 ( resp .",
    "@xmath676 ) . if @xmath593 , we let @xmath677 if @xmath678 ( resp .",
    "@xmath679 ) for some @xmath537 , and @xmath594 if @xmath299 is not of that form .    if @xmath472 ( resp .",
    "@xmath473 ) , then we let @xmath550 ( resp .",
    "@xmath551 ) , and we now assume that @xmath610 , with @xmath611 .",
    "let @xmath680 , let @xmath681 and let @xmath568 .",
    "let @xmath614 be the characteristic tree determined by @xmath615 , @xmath682 $ ] and @xmath683 . for each @xmath352 ,",
    "let @xmath553 be the formula associated with @xmath375 and @xmath575 by the induction hypothesis , and let @xmath342 be the characteristic tree determined by @xmath62 , @xmath304 and @xmath684 .",
    "then the tree @xmath614 is of the form @xmath685 for some tree @xmath686 which differs from @xmath140 only in the labeling of the nodes in @xmath624 .",
    "we continue as in the left quotient case . for each @xmath625 ,",
    "we let @xmath626 be the structure obtained from @xmath575 by adding @xmath292 to the second component of the label of @xmath141 and for each @xmath352 , we let @xmath629 be the formula associated with @xmath375 and @xmath626 by the induction hypothesis . as above , we verify that if @xmath632 is the relabeling of @xmath140 determined by the mapping @xmath687 , and if @xmath634 is the conjunction of the @xmath635 ( over the nodes @xmath688 ) , then @xmath689 we then let @xmath690 where the disjunction runs over all mappings @xmath638 , and we note that @xmath305 satisfies @xmath639 if and only if @xmath691 satisfies @xmath138 .",
    "since each @xmath692 is in @xmath426 , the formula @xmath639 is a @xmath467-formula , and hence is equivalent to a @xmath424-formula @xmath540 , which concludes the proof .",
    "we say that a fragment @xmath214 of @xmath288 _ admits relativization _ if properties @xmath693 and @xmath694 below hold .",
    "[ [ property - r1 ] ] property @xmath693 + + + + + + + + + + + + + + + + + + + + + + + + +    for all integers @xmath159 and @xmath695 , for each @xmath214-sentence @xmath138 of rank @xmath696 over an alphabet @xmath5 and for each first - order variable @xmath292 without occurrence in @xmath138 , there exists an @xmath214-formula @xmath697 $ ] of rank @xmath7 in the free variable @xmath292 with the following property . for each tree",
    "@xmath698 and for each node @xmath338 , @xmath699 satisfies @xmath697 $ ] if and only if    * if @xmath615 is the subtree of @xmath62 with root @xmath141 , then @xmath62 is of the form @xmath700 ( see figure  [ fig r1r2 ] ) , and * @xmath701 .    ( 75,39)(0,-39 ) ( 15,0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(9,-30 ) ( 9,-30)(15,-18 ) ( 15,-18)(21,-30 ) ( 21,-30)(30,-30 ) ( n0)(15.0,-18 ) ( 15,-21)(8,-35 ) ( 15,-21)(22,-35 ) ( 8,-35)(22,-35 ) ( 14,-12)@xmath0 ( 2,-33)@xmath152 ( 25,-33)@xmath153 ( 17,-18)@xmath141 ( 6,-39)@xmath154 ( 14,-31)@xmath615 ( 60,0)(45,-30 ) ( 60,0)(75,-30 ) ( 45,-30)(54,-30 ) ( 54,-30)(60,-18 ) ( 60,-18)(66,-30 ) ( 66,-30)(75,-30 ) ( n0)(60.0,-18 ) ( 60,-21)(53,-35 ) ( 60,-21)(67,-35 ) ( 53,-35)(67,-35 ) ( 52,-24)@xmath0 ( 47,-33)@xmath152 ( 70,-33)@xmath153 ( 62,-20)@xmath606 ( 59,-39)@xmath565 ( 59,-31)@xmath615 ( 57,-12)@xmath141 ( 58,-13)(54,-18 ) ( 58,-13)(60,-18 ) ( 57.5,-17)@xmath702 ( 58,-13)(66,-18 )    [ [ property - r2 ] ] property @xmath694 + + + + + + + + + + + + + + + + + + + + + + + + +    for all ranked alphabet @xmath5 , integer @xmath703 less than or equal to the maximal rank of a letter in @xmath5 and integers @xmath704 , for each rank @xmath565 @xmath214-sentence @xmath138 and for each first - order variable @xmath292 without occurrence in @xmath138 , there exists an @xmath214-formula @xmath705 $ ] of rank @xmath706 over @xmath5 in the free variable @xmath292 with the following property . for each tree @xmath707 and for each node @xmath338 , @xmath708 satisfies @xmath705 $ ] if and only if    * the rank of @xmath141 is greater than or equal to @xmath238 , and its @xmath238-th child , @xmath606 , has rank @xmath565 * if @xmath615 is the subtree of @xmath62 with root @xmath606 , then @xmath62 is of the form @xmath700 , and @xmath709 ( see figure  [ fig r1r2 ] ) .",
    "[ prop relativization conditions ] let @xmath423 be a class of tree languages containing @xmath710 and closed under the following operations .",
    "let @xmath711 , let @xmath175 be a ranked alphabet and let @xmath712 be a disjoint ranked alphabet such that @xmath713 if @xmath714 , and @xmath715 otherwise : if @xmath716 belongs to @xmath423 , then @xmath717 ; if @xmath718 belongs to @xmath423 , then @xmath719 .",
    "then @xmath424 admits relativization .",
    "we first consider property @xmath693 .",
    "let @xmath720 , let @xmath721 and let @xmath138 be a @xmath424 formula over @xmath5 , of rank @xmath696 , without any occurrence of @xmath292 .",
    "we show by structural induction on @xmath138 that there exists a rank @xmath7 @xmath424-formula @xmath722 $ ] where @xmath292 is a free variable and such that , for any tree @xmath196 , the following holds : if @xmath338 and @xmath723 with the tree @xmath615 rooted at @xmath141 , and if @xmath724 is an interpretation ( where @xmath448 is a set containing the free variables of @xmath138 and not containing @xmath292 ) , then @xmath725 ) \\models \\phi[\\not > x ] \\enspace \\longleftrightarrow \\enspace ( r,\\lambda ) \\models \\phi.\\ ] ] if @xmath726 with @xmath727 , we let @xmath728 = \\leftf_{j+\\ell}(y)$ ] , where @xmath729 . if @xmath730 with @xmath731 , we let @xmath728 = \\rightf_{j+\\ell}(y)$ ] . if @xmath732 with @xmath733 , we let @xmath728 = \\maxf_{i , j+\\ell-1}(y)$ ] . and",
    "if @xmath734 , we let @xmath728 = \\suc_{i}(y , x)$ ] .",
    "for all other atomic formulas , we let @xmath728 = \\phi$ ] .",
    "it is elementary to verify that these choices guarantee the expected equivalence .",
    "similarly , if @xmath735 ( resp .",
    "@xmath736 ) , we let @xmath728 = \\phi_1[\\not > x ] \\lor \\phi_2[\\not > x]$ ] ( resp .",
    "@xmath728 = \\neg\\phi_1[\\not > x]$ ] ) .",
    "let us now assume that @xmath737 where @xmath738 is in @xmath423 , @xmath739 and the @xmath375 are deterministic with respect to @xmath295 .",
    "let @xmath712 be a ranked alphabet disjoint from @xmath175 , with a single rank @xmath19 element @xmath740 for each @xmath19 such that @xmath741 ; and let @xmath742 .",
    "let @xmath743 ; then @xmath744 by assumption . for each @xmath352 , we let @xmath745 $ ] ; and we let @xmath746 for each @xmath747 . , we need to verify that @xmath748 is expressible : it is equivalent to @xmath749 where @xmath19 denotes the maximal rank of a letter in @xmath5 .",
    "the presence of a universal quantifier is acceptable since we have assumed that @xmath423 contains @xmath710 . ]",
    "we note that the @xmath750 have their free variables in @xmath751 . using the induction hypothesis , one verifies that @xmath752 is deterministic with respect to @xmath295 , and we let @xmath753 .",
    "then @xmath480 is a @xmath467-formula , and by theorem  [ thm - closure ] , there exists an equivalent @xmath424-formula @xmath754 .    by the induction hypothesis , for every @xmath606 in @xmath755 and @xmath756 , @xmath757 )",
    "\\models \\psi_\\delta$ ] if and only if @xmath758 ) \\models \\varphi_\\delta$ ] . also , @xmath757 ) \\models ( y > x)$ ] for all @xmath759 .",
    "thus , the characteristic tree determined by @xmath62 , @xmath760 $ ] and the @xmath750 is of the form @xmath761 , where @xmath762 is the characteristic tree determined by @xmath0 , @xmath304 and the @xmath763 , and where each @xmath764 is labeled in @xmath712 . thus , letting @xmath765 = \\psi'$ ] , we have the desired equivalence .",
    "let us now consider property @xmath694 .",
    "let @xmath766 , @xmath767 , let @xmath560 and let @xmath138 be a rank @xmath565 @xmath424-formula over @xmath5 without any occurrence of @xmath292 .",
    "we show by structural induction on @xmath138 that there exists a rank @xmath7 @xmath424-formula @xmath768 $ ] where @xmath292 is a free variable and such that , for any tree @xmath196 , the following holds : if @xmath338 , then @xmath725 ) \\models \\phi[\\ge xi ] \\enspace \\longleftrightarrow \\enspace \\cases { & $ v$ has rank at least $ i$ , \\cr         & $ t$ factors as $ t = r\\cdot ( \\k_1 \\oplus s \\oplus \\k_2)$ \\cr         & $ ( s,\\lambda ) \\models \\phi$,}\\ ] ] where @xmath615 is the subtree of @xmath62 rooted at the @xmath238-th successor of @xmath141 and @xmath769 .    if @xmath726 ( resp .",
    "@xmath770 , @xmath771 ) , we let @xmath768 = \\leftf_{k_1+j}(y)$ ] ( resp .",
    "@xmath772 , @xmath773 ) .",
    "if @xmath774 , we let @xmath768 = \\suc_i(x , y)$ ] . for all other atomic formulas , we let @xmath768 = \\phi$ ] . if @xmath735 ( resp .",
    "@xmath473 ) , we take @xmath768 = \\phi_1[\\ge xi ] \\lor \\phi_2[\\ge xi]$ ] ( resp .",
    "@xmath768 = \\neg\\phi_1[\\ge xi]$ ] ) .",
    "again , it is elementary to verify that these choices guarantee the expected equivalence .",
    "let us now assume that @xmath737 where @xmath775 is in @xmath423 , @xmath739 and the @xmath375 are deterministic with respect to @xmath295 .",
    "let @xmath712 and @xmath776 be as in the first part of the proof , and let @xmath777 ; then @xmath744 by assumption .    for each @xmath778 such that @xmath779 , let @xmath780 be the formula @xmath781 ( independent of @xmath19 ) , and let @xmath782 . by assumption",
    ", @xmath483 is a @xmath424-formula .",
    "moreover , @xmath783)$ ] satisfies @xmath483 if and only if @xmath141 has rank at least @xmath238 and @xmath606 is a descendant of the @xmath238-th child of @xmath141 .    for each @xmath784 , let @xmath785 , and for each @xmath352 , let @xmath786 \\land \\chi$ ] . by induction , the @xmath750 ( @xmath787 )",
    "are @xmath424-formulas with free variables in @xmath751 . using the induction hypothesis again , one verifies that @xmath752 is deterministic with respect to @xmath295 , and we let @xmath753 .",
    "then @xmath480 is a @xmath467-formula , and by theorem  [ thm - closure ] , there exists an equivalent @xmath424-formula @xmath754 .",
    "it follows as above that @xmath788 ) \\models \\psi'$ ] if and only if the rank of @xmath141 is at least @xmath238 and @xmath62 factors as @xmath789 with @xmath790 , where @xmath615 is the subtree of @xmath62 with root @xmath141 .",
    "this can be applied to the classes @xmath710 and @xmath429 discussed in example  [ expl - fo+mod2 ] .",
    "[ cor relativization ] the logics @xmath791 and @xmath792 admit relativization .",
    "let @xmath175 be a ranked boolean alphabet , let @xmath712 be a disjoint ranked alphabet as in the statement of proposition  [ prop relativization conditions ] , and let @xmath793",
    ". denote by @xmath740 the element of rank @xmath19 in @xmath712 , if it exists .",
    "let @xmath704 , and @xmath794 .",
    "let @xmath795 and @xmath796 .",
    "define , for each @xmath797 such that @xmath798 @xmath799 then a tree @xmath800 satisfies @xmath138 if and only if a letter of the form @xmath344 occurs at least once in @xmath62 ; @xmath801)$ ] satisfies @xmath483 ( resp .",
    "@xmath202 ) if some descendant ( resp .",
    "non - descendant ) of @xmath141 has its label in @xmath175 ( resp . in @xmath712 ) ; and @xmath62 satisfies @xmath480 if and only if @xmath62 can be factored as @xmath802 with all the nodes in @xmath803 labeled in @xmath712 and all the nodes in @xmath755 labeled in @xmath175 .",
    "it is immediate that @xmath134 is defined by the @xmath791-formula @xmath804 .",
    "now let @xmath805 and @xmath806 .",
    "define , for each @xmath797 such that @xmath807 @xmath808 then if @xmath800 , we have @xmath801 ) \\models \\omega$ ] ( resp .",
    "@xmath483 ) if some proper descendant ( resp .",
    "non proper - descendant ) of @xmath141 has its label in @xmath712 ( resp . in @xmath175 ) ; and @xmath62 satisfies @xmath480 if and only if @xmath62 can be factored as @xmath809 with all the nodes in @xmath755 labeled in @xmath712 and all the nodes in @xmath803 labeled in @xmath712 .",
    "it is immediate that @xmath134 is defined by the @xmath791-formula @xmath804 .",
    "the proof that @xmath792 admits relativization is similar .",
    "in this section , we introduce our main algebraic tool , the block product of preclones and of .",
    "this is a generalization of an operation on monoids that was introduced by rhodes and tilson @xcite , as a two - sided generalization of the more classical wreath product .",
    "let us first ( attempt to ) briefly summarize the spirit of the block product of monoids , which was introduced @xcite in relation with the description of bimachines ( eilenberg @xcite ) .",
    "let @xmath130 be a finite monoid and let @xmath810 be a morphism .",
    "the associated bimachine @xmath811 represents the simultaneous operations of left - to - right and right - to - left processing of a string in @xmath2 by @xmath812 : if @xmath813 , the @xmath238-th component of this processing is the triple @xmath814 , and the output of @xmath811 is the product of these components , namely the following string in @xmath815 : @xmath816 the idea of the block product is to capture the ( cascade ) product of this bimachine with an ordinary automaton , that is , to use the output of the bimachine as input for another automaton @xmath817 operating on alphabet @xmath818 .",
    "this translates to a monoid morphism @xmath819 into a finite monoid @xmath52 ( the transition monoid of @xmath817 )  which is entirely determined by the images of the triples @xmath820 . for each @xmath99 , let us denote by @xmath821 the map @xmath822 .",
    "then the composed machine output , on input @xmath823 is @xmath824 note that @xmath825 is the @xmath80-image ( the @xmath52-value ) of the effect of letter @xmath826 in bimachine @xmath811 , when @xmath826 is in a left - right context whose @xmath130-values are @xmath62 and @xmath827 .",
    "the map @xmath821 itself records the effect of letter @xmath826 in all possible contexts .",
    "the general definition of the block product of monoids is an abstraction of these ideas : @xmath828 is the set of pairs @xmath829 and the product @xmath830 is equal to @xmath831 , with @xmath832 this operation on monoids proved to be useful to decompose morphisms @xcite and to explain the connection between first - order logic and aperiodic monoids ( see @xcite ) .",
    "we now extend these ideas to preclones .",
    "the resulting definition is more complex as our contexts are not just left - right pairs ( see the definition of contexts in section  [ sec syntactic ] ) and we need to take into account the rank of elements . in particular",
    ", this leads to the definition of a sequence of block products @xmath833 ( @xmath834 ) .    formally , let @xmath52 and @xmath130 be preclones .",
    "we define preclones @xmath835 for each @xmath143 . recall ( section  [ sec syntactic ] ) that , for each @xmath836 , @xmath144 denotes the set of @xmath19-ary contexts in @xmath837 .",
    "the set of rank @xmath19 elements of @xmath833 is defined to be @xmath838    the identity @xmath22 is the pair @xmath839 , where @xmath840 , for all @xmath841 . as for the composition operation ,",
    "let @xmath842 , and let @xmath843 for each @xmath844 $ ] .",
    "let @xmath845 , where @xmath846 .",
    "then we let @xmath847 an element of @xmath848 , where @xmath849 is described as follows .    for each @xmath850 , we have @xmath851 , where @xmath729 .",
    "let @xmath852 be the @xmath38-sum of the first @xmath47 @xmath75 s , @xmath853 , let @xmath854 be the @xmath38-sum of the next @xmath50 @xmath75 s , etc , until @xmath855 is the @xmath38-sum of the last @xmath68 @xmath75 s , see figure  [ fig def block product ] .",
    "in particular , @xmath856 . for each @xmath857 $ ] , let @xmath858 be the total rank of @xmath859 , so that @xmath860 and @xmath861 .",
    "( 110,70)(0,-70 ) ( 15.0,0.0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(30,-30 ) ( n0)(15.0,-30 ) ( 14,-17)@xmath140 ( 7,-28)@xmath152 ( 21,-28)@xmath153 ( 15.0,-30.0)(5,-45 ) ( 15,-30)(25,-45 ) ( 5,-45)(25,-45 ) ( 5.0,-46)(1.5,-56 ) ( 25,-46)(29.5,-56 ) ( 5.0,-46)(25,-46 ) ( 1.5,-56)(29.5,-56 ) ( 14,-52)@xmath141 ( 14,-44)@xmath33 ( 14,-60)@xmath565 ( 55.0,0.0)(40,-30 ) ( 55,0)(70,-30 ) ( 40,-30)(70,-30 ) ( n1)(55.0,-30 ) ( 54,-17)@xmath140 ( 47,-28)@xmath152 ( 61,-28)@xmath153 ( 45.0,-46)(48,-46 ) ( 45.0,-46)(41.5,-56 ) ( 41.5,-56)(51.5,-56 ) ( 48,-46)(51.5,-56 ) ( 65,-46)(68.5,-56 ) ( 62,-46)(58.5,-56 ) ( 62,-46)(65,-46 ) ( 58.5,-56)(68.5,-56 ) ( 53,-52)@xmath862 ( 45,-52)@xmath852 ( 45,-44)@xmath47 ( 45,-60)@xmath863 ( 62,-52)@xmath864 ( 62,-44)@xmath68 ( 62,-60)@xmath865 ( 95.0,0.0)(80,-30 ) ( 95,0)(110,-30 ) ( 80,-30)(110,-30 ) ( n2)(95.0,-30 ) ( 95,-30)(83,-45 ) ( 95,-30)(107,-45 ) ( 83,-45)(107,-45 ) ( n3)(85.0,-45 ) ( n4)(100.0,-45 ) ( n3)(105.0,-45 ) ( 85,-45)(83,-53 ) ( 85,-45)(87,-53 ) ( 83,-53)(87,-53 ) ( 83,-54)(87,-54 ) ( 82,-60)(88,-60 ) ( 83,-54)(82,-60 ) ( 87,-54)(88,-60 ) ( 100,-45)(98,-53 ) ( 100,-45)(102,-53 ) ( 98,-53)(102,-53 ) ( 98,-54)(102,-54 ) ( 97,-60)(103,-60 ) ( 98,-54)(97,-60 ) ( 102,-54)(103,-60 ) ( 94,-17)@xmath140 ( 87,-28)@xmath152 ( 101,-28)@xmath153 ( 94,-39)@xmath65 ( 79,-51)@xmath66 ( 83.5,-63)@xmath852 ( 91,-58)@xmath862 ( 90,-51)@xmath866 ( 97,-63)@xmath867 ( 105,-45)(106,-60 ) ( 105,-45)(110,-60 ) ( 106,-60)(110,-60 ) ( 106,-61)(110,-61 ) ( 105,-67)(111,-67 ) ( 106,-61)(105,-67 ) ( 110,-61)(111,-67 ) ( 107,-70)@xmath864    for each @xmath844 $ ] , we observe that @xmath868 , and we let @xmath869 we note that @xmath870 , where @xmath871 and @xmath872 . then @xmath873 is an element of @xmath130 with rank @xmath874 .",
    "( of course , the integers @xmath875 and @xmath876 depend on @xmath238 even though our notation does not show it . )    in particular , @xmath877 is a context in @xmath878 , see figure  [ fig def block product ] .",
    "we are finally ready to define @xmath88 : @xmath879    the above definition satisfies the axioms of preclones .    let us first verify the axioms concerning the identity element .",
    "let @xmath880 and let @xmath881 .",
    "let @xmath882 .",
    "with reference to the notation in the definition above , we have @xmath883 and @xmath884 .",
    "it follows that @xmath885 , so @xmath886 .",
    "let now @xmath887 and let @xmath888 .",
    "let @xmath889 .",
    "then @xmath890 for some @xmath891 , and hence @xmath892 .",
    "thus @xmath893 .    next let @xmath894 ; for @xmath844 $ ] let @xmath895 and let @xmath896 } m_i$ ] ; for @xmath897 $ ] , let @xmath898 and let @xmath899 } p_j$ ] .    let @xmath900 } g_i$ ] and let @xmath901 } h_j$ ] .",
    "we also denote by @xmath46 the @xmath38-sum of the first @xmath47 @xmath48 s , @xmath49 the @xmath38-sum of the next @xmath50 @xmath48 s , etc , to @xmath902 the @xmath38-sum of the last @xmath68 @xmath48 s , so that @xmath903}\\bar h_i$ ] .",
    "the rank of @xmath904 is @xmath905 .",
    "we need to consider @xmath126-ary contexts in @xmath906 : let @xmath907 be such a context .",
    "then @xmath908 with @xmath909 .",
    "let @xmath852 denote the @xmath38-sum of the first @xmath875 @xmath73 s , @xmath854 the @xmath38-sum of the next @xmath876 @xmath73 s , etc to @xmath910 the @xmath38-sum of the last @xmath911 @xmath73 s . for @xmath844 $ ]",
    ", we also denote by @xmath912 the @xmath38-sum of the @xmath913 where @xmath48 is part of the summation defining @xmath904 .",
    "that is , @xmath914 ,  , @xmath915 .",
    "we first consider the product @xmath916 then we have @xmath917 , with @xmath918 where @xmath919 ( @xmath920 $ ] ) is @xmath921 @xmath922 and @xmath923 , so that @xmath924    ( 110,92)(0,-92 ) ( 15.0,0.0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(30,-30 ) ( n0)(15.0,-30 ) ( 14,-17)@xmath140 ( 7,-28)@xmath152 ( 21,-28)@xmath153 ( 15.0,-30.0)(8,-43 ) ( 15,-30)(23,-43 ) ( 8,-43)(23,-43 ) ( 14,-39)@xmath65 ( 8,-44)(6,-53 ) ( 23,-44)(25,-53 ) ( 8,-44)(23,-44 ) ( 6,-53)(25,-53 ) ( n3)(23.5,-53 ) ( 14,-49)@xmath31 ( 6,-54)(4,-63 ) ( 22,-54)(23,-63 ) ( 6,-54)(22,-54 ) ( 4,-63)(23,-63 ) ( 5.5,-59)@xmath925 ( 4,-64)(2,-73 ) ( 23,-64)(24,-73 ) ( 4,-64)(23,-64 ) ( 2,-73)(24,-73 ) ( 5.5,-69)@xmath926 ( 23.5,-53)(26,-73 ) ( 23.5,-53)(29,-73 ) ( 26,-73)(29,-73 ) ( 26,-74)(27,-83 ) ( 29,-74)(32,-83 ) ( 26,-74)(29,-74 ) ( 27,-83)(32,-83 ) ( 27,-81)@xmath927 ( 55.0,0.0)(40,-30 ) ( 55,0)(70,-30 ) ( 40,-30)(70,-30 ) ( n1)(55.0,-30 ) ( 54,-17)@xmath140 ( 47,-28)@xmath152 ( 61,-28)@xmath153 ( 55,-30)(48,-43 ) ( 55,-30)(63,-43 ) ( 48,-43)(63,-43 ) ( n4)(61.5,-43 ) ( 54,-39)@xmath65 ( 48,-44)(47.45,-46.5 ) ( 46.67,-50)(46,-53 ) ( 60,-44)(61,-53 ) ( 48,-44)(60,-44 ) ( 46,-53)(61,-53 ) ( 44,-49)@xmath928 ( 46,-54)(45.45,-56.5 ) ( 44.67,-60)(44,-63 ) ( 61,-54)(62,-63 ) ( 46,-54)(61,-54 ) ( 44,-63)(62,-63 ) ( 44,-59)@xmath929 ( 44,-64)(42,-73 ) ( 62,-64)(63,-73 ) ( 44,-64)(62,-64 ) ( 42,-73)(63,-73 ) ( 44.5,-69)@xmath930 ( 61.5,-43)(66,-73 ) ( 61.5,-43)(69,-73 ) ( 66,-73)(69,-73 ) ( 66,-74)(67,-83 ) ( 69,-74)(72,-83 ) ( 66,-74)(69,-74 ) ( 67,-83)(72,-83 ) ( 67,-81)@xmath931 ( 67,-84)(68,-93 ) ( 72,-84)(75,-93 ) ( 67,-84)(72,-84 ) ( 68,-93)(75,-93 ) ( 69,-90)@xmath932 ( 95.0,0.0)(80,-30 ) ( 95,0)(110,-30 ) ( 80,-30)(110,-30 ) ( n2)(95.0,-30 ) ( 94,-17)@xmath140 ( 87,-28)@xmath152 ( 101,-28)@xmath153 ( 95,-30)(88,-43 ) ( 95,-30)(103,-43 ) ( 88,-43)(103,-43 ) ( n5)(101.5,-43 ) ( 94,-39)@xmath65 ( 88,-44)(87.45,-46.5 ) ( 86.67,-50)(86,-53 ) ( 100,-44)(101,-53 ) ( 88,-44)(100,-44 ) ( 86,-53)(101,-53 ) ( 84,-49)@xmath928 ( 86,-54)(85.45,-56.5 ) ( 84.67,-60)(84,-63 ) ( 101,-54)(102,-63 ) ( 86,-54)(101,-54 ) ( 84,-63)(102,-63 ) ( 84,-59)@xmath929 ( 84,-64)(82,-73 ) ( 102,-64)(103,-73 ) ( 84,-64)(102,-64 ) ( 82,-73)(103,-73 ) ( 84.5,-69)@xmath930 ( 101.5,-43)(106,-73 ) ( 101.5,-43)(109,-73 ) ( 106,-73)(109,-73 ) ( 106,-74)(107,-83 ) ( 109,-74)(112,-83 ) ( 106,-74)(109,-74 ) ( 107,-83)(112,-83 ) ( 107,-80)@xmath932    moreover , @xmath933 , where @xmath934 ( @xmath844 $ ] ) is the context @xmath935 with @xmath873 equal to @xmath936 @xmath937 , @xmath938 , so that @xmath939 see figure  [ fig associativity ] . thus @xmath940 we compare this result with the product @xmath941 then we have @xmath942 , where @xmath943 ( @xmath844 $ ] ) is the context @xmath944 , where @xmath945 are defined above . next we compute @xmath946 : we have @xmath947 where @xmath948 ( @xmath949 $ ] ) is the context @xmath950 , @xmath951 and @xmath952 and @xmath953 are appropriate integers so that @xmath954 , see figure  [ fig associativity ] .",
    "we observe now that @xmath955 and @xmath956 for @xmath949 $ ] .",
    "so we have @xmath957 .",
    "similarly , for each @xmath958 $ ] , we have @xmath959 and we have verified that @xmath960 .",
    "we also define block products of .",
    "if @xmath127 and @xmath128 are  and @xmath143 , we define @xmath961 to be the sub-  of @xmath833 generated by those pairs @xmath962 such that for some @xmath778 , @xmath963 and @xmath964 for each @xmath965 .",
    "let @xmath127 and @xmath128 be  and let @xmath966 and @xmath967 be the natural morphisms , so that @xmath968 and @xmath969 for all @xmath99 and @xmath970 .",
    "let @xmath971 , and let @xmath972 be the natural morphism . by definition ,",
    "each @xmath78 ( @xmath778 ) is a pair @xmath973 with @xmath974 and @xmath975 .",
    "let @xmath976 be the morphism induced by the second component projection from @xmath5 to @xmath168 , and let @xmath977 , see figure  [ diagram beta ] .",
    "we now describe a way of computing @xmath978 for a tree @xmath979 , say @xmath980 .",
    "( 25,20)(0,-20 ) ( s)(0,-2)@xmath55",
    "( b)(25,-2)@xmath981 ( u)(0,-20)@xmath575 ( t)(25,-20)@xmath130 ( s , b)@xmath982 ( b , t)@xmath983 ( s , t)@xmath812 ( s , u)@xmath138 ( u , t)@xmath984    let @xmath985 .",
    "we define the tree @xmath986 by relabeling the nodes of @xmath62 in @xmath63 with elements of @xmath1 as follows .",
    "let @xmath292 be a node of @xmath62 of rank @xmath797 , let @xmath31 be the subtree of @xmath62 whose root is @xmath292 , and let @xmath987 be the subtrees whose roots are the children of @xmath292 , see figure  [ fig fact32 ] .",
    "let @xmath988 , let @xmath989 be the label of @xmath292 in @xmath62 and let @xmath990 be such that @xmath991 and @xmath992 .",
    "( 110,80)(0,-80 ) ( 15,0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(9,-30 ) ( 9,-30)(15,-18 ) ( 15,-18)(21,-30 ) ( 21,-30)(30,-30 ) ( n0)(15.0,-18 ) ( 15,-21)(8,-35 ) ( 15,-21)(22,-35 ) ( 8,-35)(22,-35 ) ( 14,-12)@xmath65 ( 2,-33)@xmath993 ( 25,-33)@xmath994 ( 17,-18)@xmath292 ( 13,-38)@xmath995 ( 14,-31)@xmath31 ( 54,1)@xmath80 ( 55,-2)(45,-10 ) ( 55,-2)(65,-10 ) ( 45,-10)(40,-25 ) ( 45,-10)(50,-25 ) ( 40,-25)(50,-25 ) ( 43.5,-21)@xmath996 ( 53,-21)@xmath862 ( 65,-10)(60,-25 ) ( 65,-10)(70,-25 ) ( 60,-25)(70,-25 ) ( 63,-21)@xmath997 ( 95.0,0.0)(80,-30 ) ( 95,0)(110,-30 ) ( 80,-30)(110,-30 ) ( n2)(95.0,-30 ) ( 94,-17)@xmath140 ( 87,-33)@xmath152 ( 101,-33)@xmath153 ( 95,-30)(85,-45 ) ( 95,-30)(105,-45 ) ( 85,-45)(105,-45 ) ( n5)(95,-45 ) ( 92,-39)@xmath998 ( 89,-43.5)@xmath993 ( 99,-43.5)@xmath994 ( 85,-46)(94,-46 ) ( 79,-55)(91,-55 ) ( 85,-46)(79,-55 ) ( 94,-46)(91,-55 ) ( 85,-52)@xmath852 ( 84,-58)@xmath875 ( 105,-46)(96,-46 ) ( 111,-55)(99,-55 ) ( 105,-46)(111,-55 ) ( 96,-46)(99,-55 ) ( 102,-52)@xmath999 ( 103,-58)@xmath1000 ( 95,-45)(90,-60 ) ( 95,-45)(100,-60 ) ( 90,-60)(100,-60 ) ( 90,-61)(100,-61 ) ( 89,-70)(101,-70 ) ( 90,-61)(89,-70 ) ( 100,-61)(101,-70 ) ( 92,-66.5)@xmath1001 ( 89,-71)(101,-71 ) ( 88,-80)(102,-80 ) ( 89,-71)(88,-80 ) ( 101,-71)(102,-80 ) ( 94,-76.5)@xmath854    let us write @xmath1002 , where @xmath993 and @xmath994 are integers such that the node @xmath292 is now labeled by a variable in @xmath65 ( that is , @xmath1003 and @xmath1004 in @xmath62 , and @xmath1005 ) .",
    "let @xmath852 be the @xmath38-sum of the first @xmath993 @xmath75 s , @xmath854 the @xmath38-sum of the next @xmath995 @xmath75 s and @xmath999 the @xmath38-sum of the last @xmath994 @xmath75 s .",
    "then we have @xmath1006 , @xmath1007 and @xmath1008 for some @xmath1009 ( and @xmath1010 ) .",
    "let then @xmath1011 , so that @xmath1012 , see figure  [ fig fact32 ] .",
    "we finally label the node @xmath292 in @xmath986 by @xmath1013 .",
    "the resulting tree @xmath986 is an element of @xmath86 .",
    "we now show the following fact .",
    "[ prop - tree ] with the notation above , @xmath1014 where @xmath1015 for each context @xmath1016 .",
    "the proof is by structural induction on @xmath62 .",
    "if @xmath1017 , then @xmath1018 for each @xmath1019 , and @xmath1020 , so the announced result holds .",
    "if @xmath62 consists of a single node , then @xmath1021 and @xmath1022 .",
    "now let @xmath1023 . with the notation above , we have @xmath1024 , @xmath1025 , @xmath1026 , and @xmath1027 .",
    "in particular , @xmath1028 .",
    "it follows that @xmath1029 and @xmath1030 .",
    "moreover , since @xmath1031 , we have @xmath1032 .",
    "this concludes the verification of the equality for one - node trees .",
    "let us now assume that @xmath979 ( @xmath11 ) has more than one node , let @xmath989 be the label of the root of @xmath62 , and let @xmath1033 be the subtrees of @xmath62 attached to the children of the root .",
    "let also @xmath1034 , so that @xmath1035 .",
    "let @xmath1036 .",
    "by induction , we have @xmath1037 where @xmath1038 , @xmath1039 , @xmath1040 and @xmath1041 and @xmath1042 are appropriate integers ( which depend on @xmath238 ) such that @xmath1043 we compare this value with @xmath1044 .",
    "if @xmath826 is the label of the root of @xmath986 and if @xmath1045 are the subtrees of @xmath986 attached to the children of the root , then @xmath1046 .",
    "we first discuss the value of @xmath826 . with reference to the notation in the definition of the labels of @xmath986 above , since @xmath1047 ,",
    "the integers @xmath1048 are all equal to @xmath341 and @xmath1049 .",
    "in particular , @xmath1050 .",
    "thus @xmath1051 .    to conclude",
    ", we need only to verify that @xmath1052 for each @xmath1053 $ ] , that is , each node @xmath292 of @xmath62 in @xmath1054 , has the same label in @xmath1055 and in @xmath1056 .",
    "but it is easy to see that the label of @xmath292 in both @xmath986 and @xmath1056 is of the form @xmath1057 where @xmath1058 is the label of @xmath292 in @xmath1059 and @xmath1060 is appropriate .",
    "we say that a pseudovariety @xmath211 of preclones is _ closed _ if every block product @xmath833 with @xmath1061 and @xmath169 belongs to .",
    "closed pseudovarieties of  are defined similarly .",
    "since the intersection of a family of closed pseudovarieties is closed , there exists a least closed pseudovariety containing any given class @xmath209 of finitary preclones ( resp .",
    "finitary ) .",
    "we now give a technical result on closed pseudovarieties , that will be used in the proof of our main result .",
    "we consider the situation where @xmath1062 are preclones and @xmath130 is a sub - preclone of @xmath170 .",
    "then the elements of @xmath1063 whose second component belongs to @xmath130 , form a sub - preclone of @xmath1063 which we denote by @xmath1064 .",
    "[ prop technique ] let @xmath211 be a closed pseudovariety of preclones .",
    "let @xmath1065 and let @xmath170 be a finitary preclone such that @xmath130 is a sub - preclone of @xmath170 . for each @xmath143 ,",
    "the product @xmath1066 belongs to @xmath211 .",
    "before we prove proposition  [ prop technique ] , we verify a technical lemma . in this lemma",
    ", we use the notation in the proposition .",
    "in particular , we need to consider contexts in both @xmath906 and @xmath1067 .",
    "we denote by @xmath144 ( resp .",
    "@xmath1068 ) the set of @xmath19-ary contexts in @xmath906 ( resp .",
    "@xmath1067 ) .",
    "[ lem - gen - block ] let @xmath52 , @xmath130 , @xmath170 and @xmath7 be as in proposition  [ prop technique ] and let @xmath1069 . there exists a morphism @xmath1070 such that , if @xmath1071 , then @xmath1072 is of the form @xmath1073 with @xmath1074 .",
    "let @xmath1075 and let @xmath1076 , @xmath1077 .",
    "we first define a mapping @xmath1078 .",
    "let @xmath1079 . by definition , @xmath1080 , and we let @xmath852 be the @xmath38-sum of the first @xmath875 @xmath73 s , @xmath854 be the @xmath38-sum of the last @xmath876 @xmath73 s , and @xmath1081 be the @xmath38-sum of the middle @xmath1082 @xmath73 s .",
    "in particular , there exist integers @xmath1083 such that @xmath1084 , @xmath1085 , @xmath1086 and @xmath1087 , see figure  [ fig lemma34 ] .",
    "we let @xmath1088    ( 30,82)(0,-82 ) ( 15.0,0.0)(0,-30 ) ( 15,0)(30,-30 ) ( 0,-30)(30,-30 ) ( n2)(15.0,-30 ) ( 14,-17)@xmath140 ( 7,-33)@xmath152 ( 21,-33)@xmath153 ( 15,-30)(5,-45 ) ( 15,-30)(25,-45 ) ( 5,-45)(25,-45 ) ( n5)(15,-45 ) ( 14,-39)@xmath0 ( 9,-43.5)@xmath875 ( 19,-43.5)@xmath876 ( 5,-46)(14,-46 ) ( -1,-55)(11,-55 ) ( 5,-46)(-1,-55 ) ( 14,-46)(11,-55 ) ( 5,-52)@xmath852 ( 4,-58)@xmath1041 ( 25,-46)(16,-46 ) ( 31,-55)(19,-55 ) ( 25,-46)(31,-55 ) ( 16,-46)(19,-55 ) ( 22,-52)@xmath854 ( 23,-58)@xmath1042 ( 15,-45)(10,-60 ) ( 15,-45)(20,-60 ) ( 10,-60)(20,-60 ) ( 13.5,-59)@xmath33 ( 10,-61)(20,-61 ) ( 9,-70)(21,-70 ) ( 10,-61)(9,-70 ) ( 20,-61)(21,-70 ) ( 14,-66.5)@xmath615 ( 9,-71)(21,-71 ) ( 8,-80)(22,-80 ) ( 9,-71)(8,-80 ) ( 21,-71)(22,-80 ) ( 14,-76.5)@xmath1081 ( 14,-83)@xmath486    the verification that @xmath1089 is straightforward , and we need to show that @xmath1090 defines a morphism of preclones .",
    "let @xmath1091 and let @xmath1092 ( @xmath1093 $ ] ) . for convenience , we let @xmath31 be the @xmath38-sum of the @xmath74 , so @xmath1094 with @xmath1095 .",
    "let @xmath1096 , so that @xmath1097 .",
    "moreover , let @xmath1098 .",
    "we need to verify that @xmath1099 .",
    "let @xmath1100 .",
    "for each @xmath1093 $ ] , let @xmath1101 be the appropriate @xmath38-sum of @xmath1102 s such that @xmath1103 .",
    "then @xmath1104 , where @xmath1105 , @xmath1106 is @xmath1107 and @xmath1108 are such that @xmath1109 .",
    "thus @xmath1110 is the composition of @xmath1111 with @xmath1112 where @xmath1113 is the appropriate grouping .",
    "observe that @xmath1114 is equal to @xmath1115    now , @xmath1116 . by definition of the block product ,",
    "this is equal to the composition of @xmath1117 with @xmath1118 where @xmath1119 is the appropriate grouping , @xmath1120 where @xmath1121 and @xmath1122 and @xmath1123 are appropriate integers .",
    "it is now a straightforward verification that @xmath1124 , which concludes the proof .    by proposition",
    "[ 423 tcs ] , it suffices to verify that distinct elements of equal rank in @xmath1125 can be separated by a morphism into an element of .",
    "so we consider @xmath1126 and @xmath1127 , rank @xmath19 elements of @xmath1128 . if @xmath1129 , the second component projection is a morphism into @xmath1130 which separates the two elements .",
    "if @xmath1131 , then @xmath1132 and we let @xmath1069 such that @xmath1133 . then the morphism @xmath1134 in lemma  [ lem - gen - block ] is a morphism into @xmath1135 which separates the two elements .    if @xmath127 and @xmath1136 are  and @xmath128 is a sub-  of @xmath1136 , recall that the block product @xmath1137 is generated by a ranked alphabet @xmath541 such that @xmath1138 .",
    "we let @xmath1139 be the sub-  of @xmath1137 generated by the subset @xmath5 of @xmath541 such that @xmath1140 for each @xmath33 .",
    "[ prop technique pg ] let @xmath211 be a closed pseudovariety of .",
    "let @xmath127 and @xmath128 be  in  and let @xmath1136 be a finitary  such that @xmath128 is a sub-  of @xmath1136 . for each @xmath143",
    ", the product @xmath1139 belongs to @xmath211 .",
    "we note that the morphism @xmath1134 in the proof of lemma  [ lem - gen - block ] , maps each generator of @xmath1141 to a generator of @xmath1142 , so @xmath1134 is also a morphism of  between these block products .    the same scheme as in the proof of proposition  [ prop technique ] can then be applied , using proposition  [ 424 tcs ] instead of proposition  [ 423 tcs ] .",
    "we conclude with a result on full pseudovarieties ( see section  [ sec var ] ) .",
    "[ prop full closure ] let  be a pseudovariety of preclones , let @xmath220 and let @xmath1143 and @xmath1144 be the closure of  and  respectively",
    ". then  and @xmath1144 are full and @xmath1145 .    in view of proposition  [ psv pgs or preclones ] , it suffices to show that @xmath1145 .",
    "we first verify that if @xmath1146 , then @xmath1147 , by induction on the construction of @xmath127 from elements of  by means of block products .",
    "if @xmath1148 , then @xmath1149 by definition and hence , @xmath1150 .",
    "now suppose that @xmath1151 and @xmath1152 . by definition of the block product of , @xmath1153 and",
    "hence @xmath1154 .",
    "now we show that if @xmath127 is a finitary  with @xmath1150 , then @xmath1155 .",
    "the proof is by induction on the construction of @xmath52 from elements of  by means of block products .",
    "if @xmath222 , then @xmath1156 by definition .",
    "now suppose that @xmath1157 and @xmath1158 .",
    "let @xmath1159 be the projection of @xmath1 onto @xmath1160 .",
    "each element of @xmath1 is of the form @xmath1161 with @xmath1162 .",
    "let @xmath1163 be the union of the ranges of the first components of elements of @xmath1 . then",
    ", if @xmath1164 is the sub - preclone of @xmath236 generated by @xmath239 , we have @xmath1165 .",
    "it follows that @xmath1146 .",
    "our main result is :    [ thm - main ] let @xmath423 be a class of recognizable tree languages such that each quotient of a language in @xmath423 belongs to @xmath426 and such that @xmath424 admits relativization . then a language is in @xmath426 if and only if its syntactic  belongs to the least closed pseudovariety of  containing the syntactic of the languages in @xmath423 .",
    "the proof of theorem  [ thm - main ] is based on propositions  [ prop - main1 ] and [ prop - main2 ] below .",
    "applications are considered in the next section .",
    "[ prop - main1 ] let @xmath423 be a class of recognizable tree languages such that @xmath424 admits relativization and let @xmath127 and @xmath128 be  such that every language recognizable by @xmath127 or @xmath128 belongs to @xmath426 .",
    "then every language recognizable by a block product of @xmath127 and @xmath128 also belongs to @xmath426 .",
    "let @xmath169 , @xmath971 , and @xmath1167 be the morphism induced by the identity map of @xmath5 .",
    "let @xmath134 be a tree language recognized by a morphism @xmath1168 .",
    "since @xmath138 is onto and @xmath1169 is free , there exists a morphism @xmath1170 such that @xmath1171 .",
    "in particular , @xmath1172 . in view of theorem  [ thm - literalvar ] , it suffices to show that every language recognized by @xmath138 lies in @xmath426 .",
    "this in turn reduces to showing that @xmath1173 for each @xmath1174 .",
    "we use the information obtained in fact  [ prop - tree ] on the computation of @xmath978 . as in that statement",
    ", we let @xmath1175 and @xmath967 be the natural morphisms , we let @xmath976 be the morphism induced by the second coordinate projection from @xmath5 to @xmath168 , and we let @xmath1176 . for each @xmath281",
    ", we let @xmath1177 .",
    "let @xmath1178 .",
    "for each @xmath652 , we have @xmath1179 , where @xmath1180 is described in fact  [ prop - tree ] .",
    "we note that @xmath1181 is recognized by @xmath128 , and hence is in @xmath426 .",
    "we denote by @xmath1182 a rank @xmath19 @xmath424-sentence defining @xmath1181 .",
    "recall ( from fact  [ prop - tree ] ) that @xmath1183 for all @xmath1016 . for each @xmath1184 , the tree language @xmath1185 is recognized by @xmath127 , and hence @xmath1186 .",
    "it now suffices to show that , for each @xmath1187 and @xmath1016 , there exists a rank @xmath19 @xmath424-sentence @xmath1188 defining the language @xmath1189 indeed , since @xmath144 is finite , it will follow that @xmath1190 is defined by the conjunction of @xmath1182 and the @xmath1188 ( @xmath1191 and @xmath1192 ) .",
    "we construct the sentence @xmath1188 in the form @xmath1193 ( where @xmath1194 is a rank @xmath19 @xmath424-formula on @xmath5 depending on @xmath826 and @xmath1019 ) .",
    "( the formula @xmath1188 is actually a @xmath467-formula but this is sufficient for our purpose in view of theorem  [ thm - closure ]  ( 3 ) . )",
    "let @xmath1195 and @xmath985 .",
    "for each @xmath1196 , let @xmath1197 , @xmath1198 and @xmath1199 ; and let @xmath875 , @xmath876 , @xmath1000 be the ranks of @xmath852 , @xmath854 and @xmath999 respectively .",
    "for each such @xmath282 , for @xmath797 , @xmath1200 , @xmath1201 , @xmath1202 , we let @xmath1203 \\land \\bigwedge_{\\ell \\in [ m]}\\chi_{c_\\ell}[\\ge x\\ell]\\ ] ] and we let @xmath1204 be the ( finite ) disjunction of the @xmath1205 when @xmath1206 it is elementary to verify that @xmath1207 if and only if node @xmath292 is labeled @xmath826 in @xmath986 .",
    "thus @xmath62 satisfies @xmath1188 if and only if @xmath1208 , if and only if @xmath1209 , which concludes the proof .",
    "[ prop - main2 ] let @xmath448 be a set of first order variables and let @xmath1210 .",
    "let @xmath616 be a family of rank @xmath7 @xmath288-formulas over @xmath5 , with free variables in @xmath1211 , deterministic with respect to @xmath295 , let @xmath1212 be a tree language and let @xmath1213 .",
    "let @xmath127 be a  recognizing @xmath390 , and let @xmath128 be a recognizing simultaneously the languages @xmath1214 ( @xmath352 ) .",
    "then the language @xmath422 ( a subset of @xmath1215 ) is recognized by @xmath1216 .",
    "let @xmath1217 be an onto morphism recognizing @xmath390 , and let @xmath1218 be an onto morphism recognizing each of the @xmath1219 ( @xmath1220 ) .",
    "we observe the following : if @xmath1221 is a @xmath1222-structure and @xmath295 occurs in the label of a rank @xmath19 node , then there exists a unique @xmath1223 such that @xmath1224 .",
    "indeed , the determinism of @xmath1225 with respect to @xmath295 shows that @xmath62 lies in exactly one of the @xmath1219 ( @xmath1226 : by hypothesis , @xmath1227 for each @xmath1228 , so @xmath1229 and @xmath1230 implies @xmath1231 .",
    "we consider the block product of  @xmath961 .",
    "for each @xmath1232 and @xmath449 ( so that @xmath1233 ) , we let @xmath1234 , where @xmath1235 is defined as follows .",
    "let @xmath1236 . if @xmath1237 is the @xmath812-image of some @xmath1222-structure , then we let @xmath1238 where @xmath1223 is uniquely determined by the property @xmath1239",
    ". otherwise , we choose @xmath1240 arbitrarily in @xmath1241 .",
    "note that @xmath1242 lies in the generator set of the  @xmath1243 .",
    "let now @xmath1244 and let @xmath1245 .",
    "then @xmath1246 , and @xmath1247 , where @xmath1248 is the natural morphism and @xmath986 is described in fact  [ prop - tree ] .",
    "in particular , let @xmath1249 be a rank @xmath19 node , labeled by @xmath1250 in @xmath62 and let @xmath62 factor as @xmath1251 where @xmath65 , @xmath993 and @xmath994 are such that @xmath1252 is the subtree of @xmath62 rooted at node @xmath292 .",
    "the label of @xmath292 in @xmath1253 is equal to @xmath1254 , for the computation of which we need to consider the tree @xmath1255 , that is , @xmath1256 , where @xmath827 is equal to @xmath62 with the label of @xmath292 changed to @xmath1257 .",
    "note that @xmath827 is a @xmath1222-structure , so @xmath292 is labeled by @xmath1258 ( @xmath1259 ) in @xmath986 if and only if @xmath1260 .",
    "going back to the definition of the interpretation of lindstrm quantifiers , this shows that @xmath1261 if and only if @xmath1262 . as a result ,",
    "@xmath1263 where @xmath1264 consists of the pairs @xmath1265 such that @xmath1266 , and hence @xmath422 is recognized by @xmath961 .",
    "we are now ready to complete the proof of theorem  [ thm - main ] .",
    "let @xmath209 be the class of syntactic  of the elements of @xmath423 , let @xmath211 be the pseudovariety of  generated by @xmath209 , and let @xmath1267 be the least closed pseudovariety containing .",
    "we first show that if @xmath134 is a tree language with syntactic  @xmath1268 , then @xmath1269 . in view of proposition",
    "[ prop psv gen ] , @xmath127 can be obtained from elements of @xmath209 by a succession of operations consisting of taking either a sub- , a quotient , a direct product or a block product .",
    "we let @xmath1270 be the least number of such operations , and we proceed by induction on @xmath1270 .    if @xmath1271 , then @xmath213 , that is , @xmath127 is the range of the syntactic morphism @xmath1272 of a language @xmath1273 in @xmath423 .",
    "we want to show that every language recognized by @xmath127 is in @xmath426 . as in the first lines of the proof of proposition  [ prop - main1 ]",
    ", this reduces to showing that for each @xmath1184 , we have @xmath1274 .",
    "now we deduce from remark  [ remark syntactic class ] that @xmath1275 where the intersection runs over all @xmath19-ary contexts @xmath146 over @xmath172 such that @xmath1276 meets @xmath1277 , and the union over the @xmath19-ary contexts that do not .",
    "moreover , by remark  [ remark syntactic class ] again , this union and this intersection are finite .",
    "it follows from theorem  [ thm - literalvar ] that @xmath1277 , and hence any language recognized by @xmath127 lies in @xmath426 .",
    "we now suppose that @xmath1278 .",
    "if @xmath127 is a sub-  or a quotient of a  @xmath1279 with @xmath1280 , proposition  [ prop syntactic ] establishes that @xmath134 is also recognized by @xmath128 , so every such language is in @xmath426 by induction hypothesis .",
    "if @xmath127 is the direct product of  @xmath128 and @xmath1136 with lesser @xmath1281-values , then by a standard argument , every language recognized by @xmath127 is a finite union of intersections of the form @xmath1282 , where @xmath134 is recognized by @xmath128 and @xmath1283 by @xmath1136 .",
    "in particular , such a language is in @xmath426 by theorem  [ thm - literalvar ] .",
    "if on the other hand , @xmath127 divides a block product of  with lesser @xmath1281-values , the inductive step follows directly from proposition  [ prop - main1 ] .",
    "this concludes the proof that every tree language recognized by a  in @xmath1144 is in @xmath426 .",
    "we now turn to the converse , namely showing that any tree language defined by a @xmath424-sentence has its syntactic  in @xmath1144 .",
    "this is implied by the following , more precise statement : if @xmath138 is a rank @xmath7 @xmath424-formula with free variables in a finite set @xmath448 , then @xmath422 is recognized by a morphism @xmath1284 such that @xmath1285 , where @xmath1286 denotes the sub-  of @xmath127 generated by @xmath1287 ( recall that @xmath5 is identified with the subset @xmath1288 of @xmath1289 ) .",
    "we prove this statement by structural induction on @xmath138 . if @xmath138 is an atomic formula and",
    "@xmath1290 is the syntactic morphism of @xmath422 , then @xmath1286 is trivial by example  [ expl - atomic ] , and hence lies in @xmath1144 . if @xmath472 , then by induction hypothesis , there exist morphisms @xmath1291 recognizing @xmath1292 with @xmath1293 , @xmath1294 .",
    "it is immediate that @xmath422 is recognizable by the target tupling @xmath1295 , and that @xmath1286 is a sub-  of the direct product @xmath1296 .",
    "since @xmath1297 is a pseudovariety , it follows that @xmath1286 is in @xmath1297 .",
    "the case where @xmath138 is of the form @xmath1298 , is also easily treated : any morphism recognizing @xmath1299 also recognizes its complement , namely @xmath422 .",
    "finally , suppose that @xmath138 is of the form @xmath1300 , where @xmath1301 is recognized by some @xmath213 . without loss of generality , we may assume that @xmath1302 . by induction , each @xmath1219 ( @xmath1220 )",
    "is recognized by a morphism @xmath1303 such that @xmath1304 .",
    "taking the target tupling of the @xmath1303 , we construct a morphism @xmath1305 recognizing each @xmath1219 and such that @xmath1306 ( since @xmath1307 is a sub-  of the direct product of the @xmath1308 ) . by proposition  [ prop - main2 ] ( and its proof ) , we find that @xmath422 is recognized by a morphism @xmath1309 , where the composition @xmath1310 agrees with @xmath983 ( here @xmath982 is the second component projection ) .",
    "in particular , @xmath1311 is contained in @xmath1307 .",
    "thus @xmath1312 is a sub-  of @xmath1313 , and hence @xmath1314 by proposition  [ prop technique pg ] .",
    "the first result follows directly from theorem  [ thm - main ] and proposition  [ prop full closure ] .",
    "[ first application ] let @xmath423 be a class of recognizable tree languages such that each quotient of a language of @xmath423 is in @xmath426 and such that @xmath424 admits relativization .",
    "let  be the least pseudovariety of  containing the syntactic  of elements of @xmath423 and let @xmath1144 be the least closed pseudovariety containing .",
    "the following holds .",
    "* @xmath426 is a literal variety of recognizable tree languages , associated with the pseudovariety @xmath1144 in the eilenberg correspondence ( theorem  [ thm eilenberg ] ) . *",
    "if @xmath423 is the class of languages recognized by a class   of preclones , then @xmath426 is a variety of recognizable tree languages .",
    "moreover , if  is the pseudovariety of preclones generated by   and @xmath1143 is the least closed pseudovariety of preclones containing , then @xmath1143 is the pseudovariety of preclones associated with @xmath426 .",
    "theorem  [ thm - main ] shows that @xmath426 consists of recognizable languages and theorem  [ thm - literalvar ] then shows that it is a literal variety .",
    "let  be the pseudovariety of associated with @xmath426 by theorem  [ thm eilenberg ] .",
    "then  and @xmath1144 contain the same syntactic  by theorem  [ thm - main ] , and proposition  [ cor 48 ] shows that this implies @xmath1315 .",
    "this concludes the proof of the first statement .",
    "we now suppose that @xmath423 is the class of tree languages recognized by the preclones in a class  . by definition , @xmath1316 and",
    "proposition  [ psv pgs or preclones ] shows that  is full and @xmath1317 proposition  [ prop full closure ] then shows that @xmath1144 is full and @xmath1145 .",
    "thus @xmath426 is a variety of tree languages ( corollary  [ eilenberg full ] ) and the corresponding pseudovariety of preclones is @xmath1318 .",
    "the following statement is an important consequence of theorem  [ first application ] , which motivated this work .",
    "@xmath1319 ( that is , the class of @xmath4-definable tree languages ) is a variety of tree languages and the corresponding variety of preclones is the least pseudovariety containing @xmath9 and closed under block product .    note that , by example  [ expl - fo+mod2 ] , @xmath1319 is the class of @xmath4-definable tree languages .",
    "recall that @xmath710 consists of the language @xmath1320 , where @xmath175 is a ranked boolean alphabet .",
    "now let @xmath1321 be the variety of tree languages corresponding to the pseudovariety @xmath277 generated by @xmath9 .",
    "according to example  [ variety of t exists ] , a language @xmath254 is in @xmath1321 if and only if it is a boolean combination of languages of the form @xmath278 , @xmath1322 .",
    "now the complement of @xmath278 in @xmath172 is the language of trees that contain at least a letter outside @xmath541 : therefore this complement is the inverse image of @xmath178 in the literal morphism from @xmath55 to @xmath1323 that maps @xmath541 to @xmath1324 and @xmath1325 to @xmath1326 . in view of the closure properties of @xmath1319 ( theorem  [ thm - literalvar ] ) , it follows that @xmath1327 and hence @xmath1328 by theorem  [ thm - closure ] .    by definition",
    ", @xmath1321 is a variety and as such , it is closed under taking quotients .",
    "the corresponding logic @xmath1329 is equivalent to @xmath791 ( since @xmath1330 ) and hence it admits relativization by corollary  [ cor relativization ] .",
    "thus we can apply theorem  [ first application ] to conclude the proof .    a similar reasoning , using both @xmath9 and the preclones @xmath102 ( see section  [ sec examples ] and examples  [ lg texists ] , [ example exists mod p ] , [ expl - fo+mod2 ] and corollary  [ cor relativization ] ) , yields the following result .    [ cor fo+mod ]",
    "the class of @xmath432-definable tree languages is a variety of tree languages and the corresponding variety of preclones is the least pseudovariety containing @xmath9 and the @xmath119 ( @xmath1331 ) and closed under block product .",
    "we reduced the characterization of the expressive power of certain naturally defined logics on trees , a chief example of which is given by first - order sentences , to an algebraic problem .",
    "this algebraic problem is set in a new algebraic framework , that of preclones , which the authors introduced in @xcite precisely for the purpose of discussing tree languages .",
    "it is worth stating again that the notion of algebraic recognizability resulting from this new framework coincides with the usual one : we simply gave ourselves a richer algebraic set - up to classify recognizable tree languages .",
    "our result does not yield ( yet ? ) a decidability result for , say , first - order definable tree languages , but we can now look for a solution of this problem based on the methods of algebra . in this process , it will probably be necessary to develop the structure theory of preclones , to get more precise results on the block product operation .",
    "a positive aspect of our approach is its generality : it is not restricted to the characterization of logics based on the use of lindstrm quantifiers , nor indeed to the characterization of logics .",
    "our key algebraic tool is the block product : this product was introduced by rhodes and tilson @xcite for monoids , to investigate the lattice of pseudovarieties of monoids and its application to the theory of formal languages ( of finite words ) , and we adapted its definition for preclones .",
    "the use of wreath products instead of block products ( the wreath product can be seen as a one - sided restriction of the block product ) can yield algebraic characterizations for other natural classes of recognizable tree languages , see @xcite .",
    "our approach also raises a number of questions . at a technical level first : it was shown in @xcite that for monoids , the block product can be expressed in terms of a double semidirect product , a two - sided generalization of the semidirect product .",
    "it might be convenient to have such a notion for preclones as well , and to derive analogues of the wreath product principle and the block product principle ( general descriptions of the languages recognized by a wreath product or a block product ) .",
    "this might yield , as in the finite word case , the characterization of the recognizing power of the block product of two varieties , the characterization of logical hierarchies within , etc .    at a more general level",
    ", we observe that in the word language case , the decidability of first - order definability does not stem from the analogue of our main result , namely the fact that a language is -definable if and only if its syntactic monoid is in the least pseudovariety containing @xmath115 and closed under block product .",
    "it follows rather from the characterization of that class of monoids as the aperiodic monoids , see the theorems of mcnaughton and papert on the equivalence of -definability and star - freeness , and of schtzenberger on the equivalence between star - freeness and aperiodicity .",
    "this characterization makes use in an essential way of the notion of star - freeness and of the structure theory of finite monoids .",
    "the question is therefore whether we can find a useful analogue of star - freeness for tree languages .",
    "there were attempts in this direction ( @xcite ) that established that the more natural notions of star - freeness for trees do not coincide with -definability .",
    "are we missing on an important concept ? taking the question from a different angle , can we directly develop the relevant fragment of a structure theory of finitary preclones , to prove decidability of -definability ?",
    "another , more general remark is the following .",
    "we are convinced that the algebraic concept of preclones is well suited for the study and the classification of recognizable languages of finite ranked trees .",
    "however , we are conscious that beyond its qualities ( the first of which is to allow results such as those proved in this paper ) , our algebraic framework is cumbersome , and perhaps intimidating .",
    "we argued in @xcite that several known results on the characterization of particular classes of tree languages can be expressed in a natural way in the language of preclones ,  but there might be an equivalent , yet lighter algebraic set - up .",
    "this remark is related with another question .",
    "other algebraic frameworks have been investigated in the literature since our results were announced in 2003 @xcite , in the ( considerable ) interval it took for this paper to be written and refereed .",
    "one of the more promising and elegant is the notion of _ forest algebras _ , introduced by bojaczyk and walukiewicz @xcite , initially to discuss languages of unranked , unordered trees .",
    "these authors also achieved the algebraic characterization of certain logically defined tree languages .",
    "more recent papers record interesting results using forest algebras , also to discuss ranked or ordered trees ( e.g. bojaczyk , sgoufin , straubing , walukiewicz @xcite ) , and it is tempting to wonder whether this algebraic approach and ours could be unified , since forest algebras may be seen as an unsorted version of preclones .",
    "possibly as a longer term project , one should consider the following .",
    "from the point of view of applications ( in the field of verification , the investigation of distributed computation models , of game theory , etc ) , being able to handle languages of infinite ( ranked ordered ) trees is important .",
    "discussing languages of infinite words as well as languages of finite words , was a topic of interest from the very beginnings of automata theory ( bchi ) , automata models were proposed quite early on , but the development of an algebraic model to handle them ( namely the notion of @xmath202-semigroups ) was very slow in coming , and was matured only in the late 1980s ( through work of arnold , perrin , pin , wilke , etc , see @xcite ) .",
    "can an analogous extension be developed for our preclones ?",
    "one key technical tool in dealing with recognizable languages of infinite words is ramsey s theorem , and the authors are unfortunately not aware of a relevant analogue of this theorem for trees .",
    "j. almeida , s. margolis , b. steinberg , m. volkov .",
    "representation theory of finite semigroups , semigroup radicals and formal language theory , arxiv : math/0702400v1 [ math.gr][arxiv:math/0702400v1 [ math.gr ] ]        m. bojaczyk , l. sgoufin .",
    "tree languages defined in first - order logic with one quantifier alternation , in ( l. aceto , i. damgrd , l.a .",
    "goldberg , m.m .",
    "halldrsson , a. inglfsdttir , i. walukiewicz eds . )",
    "_ icalp 2008 , part ii _",
    "notes in computer science * 5126 * , springer , 2008 , 233 - 245 ."
  ],
  "abstract_text": [
    "<S> we give an algebraic characterization of the tree languages that are defined by logical formulas using certain lindstrm quantifiers . </S>",
    "<S> an important instance of our result concerns first - order definable tree languages . </S>",
    "<S> our characterization relies on the usage of preclones , an algebraic structure introduced by the authors in a previous paper , and of the block product operation on preclones . </S>",
    "<S> our results generalize analogous results on finite word languages , but it must be noted that , as they stand , they do not yield an algorithm to decide whether a given regular tree language is first - order definable </S>",
    "<S> .    * classification * : acm : f.4.3 , f.4.1 . </S>",
    "<S> msc : 03b70 , 68q70 , 68q45    one of bret tilson s lasting contributions is the introduction ( with john rhodes ) of the notions of block product and two - sided semidirect product , and their use in the structure theory of finite monoids . </S>",
    "<S> this tool was initially introduced to derive iterated decompositions of morphisms and to refine the wreath product - based krohn - rhodes decomposition of finite monoids @xcite . </S>",
    "<S> it quickly found applications in formal language theory ( see @xcite among others ) . </S>",
    "<S> one of the more fruitful applications of this work has been in the investigation of the logical aspects of automata theory ( on finite words ) . </S>",
    "<S> for instance , the expressive power of first - order formulas with a certain quantifier depth , can be captured by monoids which divide an iterated block product of semilattices of the same length , see straubing s book @xcite .    </S>",
    "<S> automata are particularly well suited to discuss the behavior of terminating sequential systems ( languages of finite words ) , and this field of research has benefited from the start from the well - established connection between automata and monoid theory . </S>",
    "<S> there is however also much interest in automata - theoretic descriptions of languages of other structures than finite words , corresponding to other natural ideas of implementation and other natural models of computation ( infinite , branching , concurrent , timed , etc ) . </S>",
    "<S> this paper is a contribution to the investigation of an important problem of this sort : can we decide whether a regular tree language is first - order definable ? </S>",
    "<S> here trees are finite , ranked and ordered . </S>",
    "<S> the latter properties signify that the nodes of the trees are labeled with symbols of a given arity ( the rank of the node ) , and the children of a node of rank @xmath0 form a totally ordered set of cardinality @xmath0 . </S>",
    "<S> a tree language is said to be regular if it is accepted by a classical ( deterministic ) bottom - up tree automaton .    </S>",
    "<S> the notion of automata recognizability for ( finite ) word languages is easily translated to an algebraic notion of recognizability , expressed in terms of monoids : the set of all words on a given alphabet @xmath1 is a monoid ( the free monoid @xmath2 over that alphabet ) , and one shows that a language is recognized by a finite state automaton if and only if it is the inverse image of a set , under a morphism from @xmath2 into a _ finite _ monoid . </S>",
    "<S> moreover , if a language is recognizable , then there is a least finite monoid recognizing it , called its syntactic monoid . </S>",
    "<S> this point of view opens vast possibilities for the classification and the discussion of the properties of recognizable languages , which can be characterized in terms of the algebraic properties of their syntactic monoid , see eilenberg s variety theory @xcite . </S>",
    "<S> as the syntactic monoid of the language accepted by a given automaton is computable , this can lead to interesting decision algorithms .    </S>",
    "<S> it is well - known ( bchi , 1960 ) , that a language is recognizable if and only if it is definable in monadic second - order logic . it was also shown that a language is definable by a first - order formula if and only if its syntactic monoid is aperiodic . </S>",
    "<S> this statement is actually the combination of two classical theorems due to schtzenberger and to mcnaughton and papert . </S>",
    "<S> it can also be proved directly ( as in @xcite ) , using the krohn - rhodes decomposition theorem , which implies that a monoid is aperiodic if and only if it belongs to the least pseudovariety closed under block product and containing @xmath3 . as the syntactic monoid of a regular language is computable and as aperiodicity is decidable , it is also decidable whether a regular language is @xmath4-definable .    </S>",
    "<S> considering logically defined sets of trees ( or other discrete combinatorial structures ) is just as natural as for words . </S>",
    "<S> but the literature on these questions shows that classification and decision results are much harder to reach , in part because we lack the versatile and powerful algebraic tool provided in the word case by finite monoid theory . </S>",
    "<S> the weakness of our understanding of automata theory for tree languages is highlighted by the fact that the decidability of first - order definability is still an open problem .    for most discrete structures </S>",
    "<S> , there is no obvious algebraic structure that can be used in lieu of monoids , or at least no algebraic structure that gives rise to the same wealth of structure theorems and variety characterizations , see @xcite . in the tree case ( for finite , ranked and ordered trees ) </S>",
    "<S> , several propositions can be found in the literature , see the work of steinby , salehi , heuter , podelski , wilke , sik , etc @xcite . until recently none was very convincing in terms of its capacity to characterize significant classes of languages , but there are recent encouraging results expressed in terms of minimal tree automata , that is , in terms of @xmath5-algebras by benedikt and sgoufin @xcite , bojaczyk and walukiewicz @xcite , sik @xcite and sik and ivn @xcite . in a previous paper @xcite , the authors introduce a new algebraic framework  </S>",
    "<S> the so - called _ preclones _  to classify and discuss the properties of recognizable tree languages .    </S>",
    "<S> it turns out that the setting of preclones makes it natural to discuss not only the recognizable sets of trees , but also recognizable sets of trees with variables . </S>",
    "<S> variables can be seen as unlabeled leaves of the tree , and the rank of a tree is the number of such unlabeled leaves . </S>",
    "<S> alternately , one can regard these leaves as labeled by particular letters @xmath6 , in such a way that in a rank @xmath7 tree , the variable leaves are labeled @xmath8 from left to right .    </S>",
    "<S> we verified in @xcite that the notion of recognizability induced by the algebraic structure of preclones coincides with the usual notion of recognizable tree languages , that the syntactic preclone of a recognizable tree language is completely determined by the minimal deterministic bottom - up automaton of the language ( all very reassuring facts ) , and that these notions are robust enough to allow for an eilenberg - like development in terms of varieties of languages and pseudovarieties of preclones .    in this paper </S>",
    "<S> , we use this algebraic framework to derive an algebraic characterization of first - order definable tree languages , and more generally , of the classes of tree languages determined by certain families of lindstrm quantifiers . </S>",
    "<S> this characterization requires the introduction of a block product operation on preclones , a complex algebraic operation which generalizes tilson s block product of monoids . </S>",
    "<S> our main result implies that the first - order definable tree languages are exactly those languages whose syntactic preclone sits in the least pseudovariety of preclones closed under block product and containing @xmath9 , a very simple preclone whose properties were discussed in @xcite and which can be viewed as an analogue of the monoid @xmath10 . </S>",
    "<S> this result was announced without proof in the authors communication at fst - tcs  @xcite .    </S>",
    "<S> as it is , our result does not yield an algorithm to decide whether a given recognizable tree language is first - order definable . </S>",
    "<S> this question is briefly discussed in the conclusion of the paper , but whatever the case may be , such a decidability result remains one of the main goals in this field . </S>",
    "<S> our result however suggests the feasibility of an algebra - based solution .    </S>",
    "<S> the plan of this paper is as follows . </S>",
    "<S> section  [ algebraic ] summarizes the essential properties of preclones that are necessary for this study . </S>",
    "<S> section  [ sec logically ] introduces the logical apparatus we will use , including the lindstrm quantifiers and the closure properties of the associated operators on classes of languages . finally , in section  [ sec alg charact ] </S>",
    "<S> , we introduce the block product operation on preclones , and we prove our main results . </S>",
    "<S> the paper closes on a conclusion where we discuss certain questions raised by these results .    </S>",
    "<S> [ [ notation ] ] notation + + + + + + + +    let @xmath11 . </S>",
    "<S> we denote by @xmath12 $ ] the set @xmath13 if @xmath14 , the empty set if @xmath15 . </S>"
  ]
}