{
  "article_text": [
    "the ever increasing demand of wireless cellular data has motivated researchers to investigate the potentials of millimeter wave communication for the 5th generation of cellular technology .",
    "a substantial body of literature is currently available discussing physical measurements and formulations for millimeter wave channels @xcite , @xcite . as a logical next step",
    ", we aim at studying how the upper layers of the communication network stack work over millimeter wave physical channels . in this work",
    "we aim to develop the first millimeter wave module for the ns-3 network simulator @xcite that can be used to quantitatively analyze the performance of transport and application layer protocols over millimeter wave last - mile links .",
    "the ns-3 network simulator currently implements a wide range of network protocols across various layers of the communication network . due to this",
    "it is a valuable tool for researchers working on cross - layer design .",
    "the ns-3 simulator already hosts modules for the simulation of wifi , wimax and 3gpp - lte networks . in this paper",
    "we propose the first ns-3 module for the simulation of millimeter wave based communication systems .",
    "the simulation module described in this paper is designed to be a fully customizable model where the user can plug in various parameters , like carrier frequency , bandwidth , frame structure , etc . , describing the behavior of the millimeter wave channel and devices .",
    "in fact , the aim of this work is to enable researchers to flexibly use this module for various scenarios without the need of altering the source code .",
    "the rest of the article is organized as follows . in section [ secframew ] , we discuss the architecture of the mmw module .",
    "section [ secphy ] discusses the modeling of the physical layer .",
    "section [ maclayer ] follows with a discussion on the medium access control ( mac ) layer for our module .",
    "the interfacing of the various modules is discussed in section [ secsap ] . in section [ simures ]",
    ", we show the results obtained for a simple simulation scenario",
    ". finally , we list our future work items and conclude the paper in section [ concl ] .",
    "our framework includes a basic implementation of mmwave devices , which comprises the propagation and channel model , the physical ( phy ) layer , and the mac layer .",
    "the module completely is developed in c++ .",
    "the design of this module is inspired by the ns-3 lena module which , in our opinion , has a very robust architecture .",
    "[ classdiagram ] * gives the uml diagram of the most important classes in our mmwave module .",
    "we will provide details about the various classes and their interoperation in the following sections .",
    "the salient features of the mmwave phy layer are : ( i ) a fully customizable time division duplex ( tdd ) frame structure , ( ii ) a radio characterization that includes small and large scale channel variations , along with supporting multiple input multiple output ( mimo ) techniques such as beamforming , ( iii ) a decoding error model at the receiver , ( iv ) an interference model , and ( v ) a feedback loop for channel adaptation .",
    "the following parts give a detailed outline of the implementation specifics of the phy layer for the mmwave module .",
    "the authors in @xcite and @xcite contend that in order to reduce the latency over the air interface , the 5 g mmwave systems will be targeted towards tdd operation .",
    "the ns-3 module for mmwave implements a customizable tdd frame structure .",
    "each frame is subdivided into a number of subframes of fixed length specified by the user .",
    "each subframe in turn is split into a number of slots of a fixed duration .",
    "each slot comprises a specified number of ofdm symbols",
    ". a slot can be either * control * or * data * , assigned for either * uplink * ( ul ) or * downlink * ( dl ) .",
    "[ fig1 ] * shows an example of the tdd frame structure based on the work in @xcite .",
    "each frame of length 10ms is split in time into 10 subframes each of duration 1ms .",
    "each subframe is further divided into 8 slots where each slot is of length @xmath0 representing 30 orthogonal frequency division multiplexing ( ofdm ) symbols of length approximately @xmath1 .",
    "the first two slots are assigned for control in the downlink and in the uplink direction respectively .",
    "slots 3 to 5 are allocated for downlink and slots 5 to 8 for uplink data transmission .",
    "a switching gap of @xmath2 is introduced each time the allocated direction changes from uplink to downlink or vice versa . in the frequency domain",
    "the entire bandwidth of 1ghz is divided into 4 resource blocks ( rbs ) .",
    "each rb is subdivided into 18 sub - bands each of width 13.89 mhz making a total of 72 sub - bands for the entire bandwidth .",
    "each of these sub - bands is composed of 48 sub - carriers . in this case , the total number of resource elements for one slot would be : @xmath3 .",
    "the frame structure is completely customizable by the user . a common object of the _ mmwavephymaccommon _ class stores the user specified values of all the parameters used by the simulator .",
    "the parameters used to customize the frame structure are specified in table [ table1 ] .",
    "the value of the transmission time interval ( tti ) , which in our model is the duration of one slot , can be derived from the parameters in table [ table1 ] as , @xmath4 this is implemented by the function _",
    "mmwavephymaccommon::gettti()_.    similarly we can compute the bandwidth of one rb as , @xmath5    this is implemented by the function _ mmwavephymaccommon::getrbwidth()_. the total system bandwidth can thus be computed as , @xmath6 this is implemented by the function _",
    "mmwavephymaccommon::getsystembandwidth()_.    [ cols=\"<,<,<\",options=\"header \" , ]      the _ mmwaveenbphy _ and the _ mmwaveuephy _ models the physical layer for the base station and the user device respectively .",
    "broadly the physical layer ( i ) handles the transmission and reception of signals , ( ii ) simulate the start and the end of frames , subframes , and slots , ( iii ) deliver data packets and control messages received over the channel to the mac layer , ( iv ) model the decoding error for the received signal and calculate the metrics like the signal to interference and noise ratio ( sinr ) .",
    "the physical layer contains one instance of the _ mmwavespectrumphy _ class .",
    "the transmission procedure for data frames is performed by the _",
    "starttxdataframes_. for control messages the _ starttxcontrolframes _ is invoked .",
    "the reception procedure is performed by _ startrx _ method .",
    "the functionality of the _ startrx _ is further subdivided into _",
    "startrxdata _ and _ startrxcontrol_. based on the total band of frequency available for transmission , the phy computes the transmission power spectral density using the _ mmwavespectrumvaluehelper _ component and uses this value for the signal transmission .    after the reception of the data packets , the phy layer calculates the sinr of the received signal taking into account the mimo beamforming gains . the physical layer at the user device maps the calculated sinr into a channel quality indicator ( cqi ) , which is fed - back to the base station for the resource allocation .",
    "control signals are assumed to be ideally transmitted . as discussed in section [ errormodel ] ,",
    "the phy layer also incorporates the error model where a probabilistic approach is used to determine whether a packet should be dropped by the receiver .",
    "the correctly received packets are sent to the mac layer using the service access point ( sap ) discussed in section [ secsap ] .",
    "the physical layer handles the start and the end of frames , subframes and slots based on the tti derived from the user specified configurations .",
    "based on the resource allocation scheme decided by the _ mmwaveenbmac _",
    ", as described in section [ secmac ] , the phy decides the nature of the communication for a particular slot ( data / control ) and the direction of the message to transfer ( uplink / downlink ) . at the beginning of each slot",
    "the enodeb phy sends a _ subframeindication _ to the mac .",
    "the subframe indication for the first slot triggers the scheduling and resource allocation functions .",
    "the data packets and the control messages received from the mac are stored in the _ packetburstqueue _ and the _ controlmessagequeue _ , respectively , and are transmitted to the connected device in the allocated slots .",
    "[ b ! ]    as illustrated in fig .",
    "[ channelmodel ] , we need to take into account a number of procedures to capture characteristics of the mmwave propagation .",
    "the key contribution here relates to the computation of the multi - antenna gains , which is particularly critical for mmwave communications .    the link budget for the mmwave propagation channel is given by",
    ", @xmath7 where @xmath8 is the total received power in dbm , @xmath9 is the total transmit power , @xmath10 is the beamforming gain , and finally @xmath11 and @xmath12 represent the pathloss and shadowing , respectively .",
    "the mmwave pathloss model can be modeled with @xmath13 states , as reported in @xcite , line of sight(los ) , non - line of sight ( nlos ) and outage . for each link , the channel is determined through the following procedure :    * based on the distance between the ue and the enb , determine the probability of the link being in each of the three states using the model in @xcite @xmath14 ; * uniformly pick a reference value @xmath15 between 0 and 1 and compare with the probability associated with each channel state ; * _ if _",
    "@xmath16 , pick los channel ; + _ else if _",
    "@xmath17 , pick nlos channel ; + _ otherwise _ pick outage .    for each link , on determining the channel state ,",
    "the pathloss and shadowing is obtained by , @xmath18 = \\alpha+\\beta10log_{10}(d)+\\xi , \\quad \\xi \\sim n(0,\\sigma^{2}),\\ ] ] where @xmath19 represent shadowing , parameter @xmath20 represents the distance from receiver to transmitter , the values of parameter @xmath21 , @xmath22 , and @xmath23 for each channel scenario are given in @xcite .      due to the high pathloss ,",
    "multiple antenna with beam forming is essential to ensure acceptable range of communication in mmwave systems .",
    "we briefly discuss the associated concepts of channel matrices and beam forming in this respect .",
    "* channel matrix : * we model the mmwave channel as a combination of clusters , each composed of several subpaths .",
    "the channel matrix is described by the following : @xmath24 where , @xmath25 is the number of clusters , @xmath26 the number of subpaths in cluster k , @xmath27 the small - scale fading over frequency and time ; @xmath28is the spatial signature of the receiver , @xmath29 the spatial signature of the transmitter .",
    "the small - scale fading is generated based on the number of clusters , number of subpaths per cluster , doppler shift , power spread , delay spread and angle of arrival ( aoa ) as given in @xcite by , @xmath30 where , @xmath31 is the power spread ; @xmath32 is the maximum doppler shift ; @xmath33 is the aoa of the subpath relative to the direction of motion ; @xmath34 gives the delay spread , and @xmath35 is the carrier frequency .",
    "* beamforming : * in order to support phased - array antennas , a new _ antennaarraymodel _ class is developed , which contains a complex beamforming vector . for both transmitter and receiver , based on the channel matrices ,",
    "the beamforming vectors are computed using the power algorithm .",
    "the beamforming gain from transmitter @xmath36 to receiver @xmath37 is given as , @xmath38 where , @xmath39 is the channel matrix of @xmath40 link , @xmath41 is the beamforming vector of transmitter @xmath36 , when transmitting to receiver @xmath37 and @xmath42 the beamforming vector of receiver @xmath37 , when receiving from transmitter @xmath36 .      to reduce the computational complexity ,",
    "the channel matrices and beamforming vectors are pre - generated in @xmath43 .    * load files : * at the beginning of each simulation we load 100 instances of the spatial signature matrices , along with the beamforming vectors .",
    "then , a channel matrix instance per ue - enodeb pair is randomly picked to characterize the radio link . as we will discuss later",
    ", we simulate the long term fading by randomly picking an instance of the channel form the pre - generated files .",
    "* link initialization and channel matrix updates : * in the _ mmwavebeamforming _ class we define the a member _ m_channelmatrixmap _ ( * fig .",
    "[ classdiagram ] * ) to map the channel matrix instance to each radio link . during the simulation , the small - scale fading",
    "is calculated at every slot , based on eq.[eq : smallscale ] .",
    "the speed of the user is obtained directly from the mobility model .",
    "the remaining parameters are only subject to the environmental conditions , rural , urban etc . , and therefore assumed constant over the entire simulation time .",
    "the reference values for different environments were recorded during the our mmwave channel propagation measurement campaign reported in @xcite . on the other hand , for the large - scale fading",
    ", the spatial signature matrices are periodically updated with customizable interval , say 100 ms , to simulate a sudden change of the perceived channel .    [",
    "t ! ]    * beamforming vector : * when configuring each radio link , the beamforming vector is stored in the antenna array model of both base station and user side ; the former will store the beamforming vectors of all the ues , the latter will only store the beamforming vectors of the base stations within range .",
    "the beamforming parameters are defined using following structures :    .... struct beamformingparams {    complexvector_t   m_txw ;     complexvector_t   m_rxw ;     channelmatrix     m_channelmatrix ; } struct channelmatrix {    complex2dvector_t   m_txspatialmatrix ;    complex2dvector_t   m_rxspatialmatrix ; } ....    we can observe in * fig .",
    "[ channelgain ] * the channel gain trend obtained in a scenario where the number of antennas at the base station and mobile device is 64 and 16 , respectively , and the user is moving at a speed of 36 km / h .",
    "the beamforming gain with small - scale fading is calculated using on eq .",
    "[ eq : channelgain ] .",
    "the small - scale fading includes two components , frequency selective fading and time selective fading , caused by multipath effect and doppler effect , respectively .",
    "the spatial signatures and beamforming vectors are periodically updated with larger interval to capture the effects of long term fading which cause the sudden drop of beamforming gain around 100 ms .",
    "similar to ns-3 lena module , our mmwave module includes a error model for data packets according to the standard link - to - system mapping ( lsm ) techniques . by utilizing the lsm and the mutual information based effective sinr ( miesm ) @xcite",
    ", the receiver computes the error probability for each transport block ( tb ) and determines whether the packet can be decoded or not .",
    "the tb can be composed of multiple codeblocks ( cb ) and its size depends on the channel capacity .",
    "the block error probability ( bler ) of each cb depends on its size and associated mcs : @xmath44,\\ ] ] where @xmath45 is the mean mutual information per coded bit ( mmib ) of the codeblock @xmath36 , @xmath46 and @xmath47 corresponds to the mean and standard deviation of the gaussian cumulative distribution , respectively .",
    "now we can compute the tb block error rate : @xmath48 in case of failure , the phy layer does not forward the incoming packet to the upper layers and , at the same time , triggers a retransmission process .      albeit being presumably less threatening in the mmwave regime , because of the directionality of the multiantenna propagation , interference computation is still pretty relevant in terms of system level simulations .",
    "in fact , there might be some special spatial cases where interference is non negligible .",
    "therefore , we propose an interference computation scheme that takes into account the beamforming directions associated with each link",
    ".    we will use * fig .",
    "[ fig : interference ] * as a reference . as an example",
    ", we compute the sinr between @xmath49 and @xmath50 .",
    "to do so , we first need to obtain the channel gains associated with both the desired and interfering signals . following eq .",
    "[ eq : channelgain ] , we get @xmath51    we can now compute the sinr : @xmath52 where @xmath53 is the transmit power of @xmath49 , @xmath54 is the pathloss between between @xmath49 and @xmath50 , and @xmath55 is the thermal noise .",
    "[ t ! ]       in order to ensure reliable communication over a variable channel , feedback mechanisms are key in mostly all cellular communication systems .",
    "similar to lte we utilize the cqi feedback scheme for our module .",
    "the downlink cqi feedback message is generated by the _",
    "mmwaveuephy_. in our simulator the ue computes the cqi based on the sinr of the signal received in a particular data slot .",
    "the computation of cqi is the same as that for lte as given in @xcite and @xcite .",
    "the mac layer is developed using the class _ mmwavemac _ which is the base class for the _ mmwaveenbmac _ for the enodeb and the _ mmwaveuemac _ for the user .",
    "the chief function of this layer is to deliver data packets coming from the upper layers ( the net device in this case ) to the physical layer and vice - versa .",
    "in fact this layer is designed for the synchronous delivery of upper layer data packets to the phy layer which is key for proper data transfer in tdd mode .",
    "the enodeb mac layer is connected to the scheduler module using the mac - sched service access point ( sec .",
    "[ secsap2 ] ) .",
    "the relationship between the phy , mac and the scheduler module for the enodeb is depicted in fig .",
    "thus the mac layer communicates the scheduling and the resource allocation decision to the phy layer .",
    "the scheduler hosts the adaptive modulation and coding ( amc ) module .",
    "the following sub - sections discuss these features in depth .",
    "the working of the amc is similar to that for lte",
    ". the user measures the cqi for each downlink data slots it is allocated .",
    "the cqi information is then forwarded to the enodeb using the _ mmwavecqireport _ control message .",
    "the enodeb scheduler uses this information to compute the most suitable modulation and coding scheme for the communication link .",
    "the amc is implemented by the enodeb mac schedulers . during resource allocation , for the current frame work , the wide band cqi is used to generate the modulation and coding scheme ( mcs ) to be used and the transport block ( tb ) size that can be transmitted over the physical layer .",
    "the amc module provides this frame work for the unique mapping of the cqi , the mcs , spectral efficiency and the tb size .",
    "the tb size is calculated based on the values of the total number of subcarriers per resource block derived from the user customized configuration , the number of symbols per slot and the number of reference symbols per slot .",
    "a cyclic redundancy code ( crc ) length of 24 bits is used .      following the design strategy for the ns-3 lte module @xcite , the virtual class _ mmwavemacscheduler _ defines the interface for the implementation of mac scheduling techniques .",
    "the scheduler performs the scheduling and resource allocation for a subframe with both downlink and uplink slots .      the tdd scheme enforced by the scheduler module",
    "is based on the user specified parameter _",
    "`` tddcontroldatapattern '' _ given in table [ table1 ] .",
    "the slots specified for control are assigned alternately for downlink and uplink control channels .",
    "the data slots are equally divided between downlink and uplink slots with the first @xmath56 data slots allocated to downlink data and rest for uplink , where @xmath57 is the total number of data slots .",
    "this scheme minimizes the switching time between uplink and downlink data transmissions .",
    "the scheme described in fig .",
    "[ fig1 ] is an example of the implementation of the above algorithm with the default control data pattern .",
    "this module will be further enhanced in future to incorporate more advanced features like dynamic tdd .      using the _ mmwavephymaccommon _ object",
    ", the division of resources in the frequency domain can be customized as given in table [ table1 ] .",
    "the mac scheduler currently implements a simple round robin algorithm to allocate uplink and downlink data slots to the connected users .",
    "all the frequency elements in a particular slot are assigned to the same user .",
    "the control slots are not allocated to any particular user .",
    "any or all user can receive from and transmit to the base station in the control slots .    [ secmac ]    for the case of the round robin scheduler the use of the cqi is limited to the determination of the transport block size . in future",
    "the cqi information will be used to actively control the scheduling decisions .",
    "the interface between the phy and the mac and the mac and the scheduler are defined as service access points ( saps ) as given in @xcite . the relationship between the phy , mac and the scheduler through their associated saps",
    "are shown in * fig .",
    "[ fig2]*. the relationship between modules connected through saps can be viewed as that of service providers and users .",
    "the sap provider caters to the requirement of the sap user based on certain requests received from the user .",
    "the communication between the mac and the phy layer using the mac - phy sap is through the following processes :    * * subframe indication * : the subframe indication is sent by the phy layer to the mac at the beginning of each slot ( unlike lte where it is sent every subframe ) .",
    "the subframe indication for slot 1 for a particular subframe triggers the scheduling procedure for the enodeb mac .",
    "the subsequent indications are required for proper delivery of upper layer data . *",
    "* data transmission * : the enodeb mac maintains data queues for each of the connected ue and just one such queue is sufficient for the user device .",
    "based on the scheduling scheme and the allocated resources , the mac layer will send the scheduled number of packets ( given by the transport block size ) to the phy layer for transmission over the radio link .",
    "* * scheduling and allocation notifications * : the scheduling and resource allocation decision received by the enodeb mac from the scheduler is relayed to the phy layer using the _ mmwaveresourceallocation _ message .",
    "the phy of the base station in turn transmits this message to all the connected users notifying all the attached devices of the scheduling decision . *",
    "* cqi notification * : based on the sinr of the received data slots , the ue phy calculate the cqi and transmits it to the base station in the next uplink control slot .",
    "the enodeb phy on receiving the _ mmwavecqireport _ control message , relays it to the mac .",
    "the enodeb mac uses the service provided by the scheduler by the following processes :    * * trigger request and configuration indication * : on receiving the subframe indication for slot 1 of a particular subframe , the mac sends a _ scheduling trigger request _ to the scheduler for the @xmath58 subframe , where the delay is specified by the user using the parameter _",
    "l1l2controllatency_. the scheduler returns the scheduling and allocation decisions in the _ scheduling configuration indication _ in response to the trigger . *",
    "* cqi notification * : the enodeb mac on receiving the cqi information from the phy , sends it to the scheduler .",
    "the scheduler needs this information for future scheduling decisions .    0.4     0.4     0.4     0.4",
    "we validate our framework through a simple simulation scenario , where we consider one enodeb and one ue . the user is at an initial distance of @xmath59 m from the base station and moves towards the cell - edge with a constant velocity of @xmath60 m / s .",
    "the simulation configuration settings correspond to the default values shown in table [ table1 ] . on top of that",
    ", the enb has a transmit power of @xmath61 dbm and a receiver noise figure of @xmath62db .",
    "simulations are executed twice to capture the difference between the line of sight ( los ) and the non line of sight ( nlos ) scenario .",
    "the simulation results are reported in * fig .",
    "[ simres ] * . on the one hand , * figs .",
    "[ sinrlos ] * and * [ sinrnlos ] * show the variation of the downlink sinr with both time and frequency for the los and nlos case , respectively . on the other hand , in * figs .",
    "[ datarate ] * and * [ avgsinr ] * we can observe the decrease in downlink data rate and average downlink sinr with the increasing distance between the ue and the base station , for both los and nlos links .",
    "in this paper , a novel module for the simulation of mmwave cellular systems has been presented .",
    "the module , which is publicly available at @xcite , is highly customizable to facilitate researchers to use it flexibly and analyze different scenarios using varying configurations . a basic implementation of mmwave devices , mac layer , phy layer and channel models are developed . as part of our future work , we aim at introducing several enhancements , which include the _ integration _ of ( i ) higher layer modules for end - to - end performance analysis , ( ii ) a harq module , ( iii ) uplink power control , ( iv ) ns-3 based channel matrix generation and beamforming computation , ( v ) more sophisticated mac algorithms , ( vi ) relay devices and the _ evaluation _ of ( i ) multiple access strategies and ( ii ) transmission control protocol ( tcp ) performance over mmwave cellular networks .",
    "m. r. akdeniz , y. liu , m. k. samimi , s. sun , s. rangan , t. s. rappaport , and e. erkip , mmwave channel modeling and cellular capacity evaluation , _ ieee j. sel . areas commun . , _",
    "32(6 ) : 1164 - 1179 , jun . 2014 .",
    "a. ghosh , t.a .",
    "thomas , m.c .",
    "cudak , r. ratasuk , p. moorut , f.w .",
    "vook , t.s .",
    "rappaport , g.r .",
    "maccartney , s. sun , and s. nie , mmwave enhanced local area systems : a high data rate approach for future wireless networks , _ ieee j. sel .",
    "areas commun . _ ,",
    "1152 - 1163 , june 2014 .",
    "t. s. rappaport , s. sun , r. mazius , and h. zhao , y. azar , k. wang , g. n. wong , j. k. schulz , m. k. samimi , and f. gutierrez , jr .",
    ", millimeter wave mobile communications for 5 g cellular : it will work ! , _",
    "ieee access _ , ( 1 ) : 335 - 349 , 2013 ."
  ],
  "abstract_text": [
    "<S> the increasing demand of data , along with the spectrum scarcity , are motivating a urgent shift towards exploiting new bands . </S>",
    "<S> this is the main reason behind identifying mmwaves as the key disruptive enabling technology for 5 g cellular networks . indeed , utilizing new bands means facing new challenges ; in this context , they are mainly related to the radio propagation , which is shorter in range and more sensitive to obstacles . </S>",
    "<S> the resulting key aspects that need to be taken into account when designing mmwave cellular systems are _ directionality _ and _ link intermittency_. the lack of network level results motivated this work , which aims at providing the first of a kind open source mmwave framework , based on the network simulator ns-3 . </S>",
    "<S> the main focus of this work is the modeling of customizable channel , physical ( phy ) and medium access control ( mac ) layers for mmwave systems . </S>",
    "<S> the overall design and architecture of the model are discussed in details . </S>",
    "<S> finally , the validity of our proposed framework is corroborated through the simulation of a simple scenario .    [ modeling methodolgies ] [ environments ] </S>"
  ]
}