{
  "article_text": [
    "in the past decade quadcopters have been studied due to their relative simple fabrication in comparison to other aerial vehicles , which turns them into ideal platforms for modeling , simulation and implementation of control algorithms .",
    "the fact that they are unmanned vehicles naturally invites developers to explore tasks that require a high degree of autonomy .",
    "+ past works such as @xcite have set the base for developing quadcopter platforms from their construction to the automation techniques necessary to control the highly non - linear dynamics that characterize these vehicles .",
    "+ the scope of the quadcopter technology has changed over the years .",
    "the cost and sizes have been reduced , it is now a platform affordable for a broad type of public , from researchers to hobbyists .",
    "but beyond the economic revenue these vehicles generate , the manufacturers are searching for more autonomy , longer flight time , high data processing capabilities and adaptation to changing environments , hence the active research on quadcopters .     + a fairly new type of quadcopters are the so called `` nanoquads '' that are of considerably low size and weight , making them an ideal platform for indoor usage .",
    "the project proposed here considers the study of a commercial platform of a nanoquadcopter called `` crazyflie 2.0 '' developed by bitcraze company @xcite .",
    "weighting only 27 grams and having 9.2 cm of length and width , this nanoquad has rapidly become one of the preferred platforms for quadcopter research .",
    "+ for indoor control of quadcopters different localization techniques can be employed , for example the vicon motion capture system @xcite is one of the preferred systems for precise localization and it has been used widely in recent quadcopter studies @xcite .",
    "a recent low - cost technology based on ultra - wide band radio modules has proven effective for indoor localization in robotics systems and specially in quacopters @xcite .",
    "its low costs are inviting developers to create their own implementations and the system is getting more precise and robust . in a few words ,",
    "the system measures the distance between two ultra - wide band modules , normally called anchor and tag , by measuring the time of flight of an electromagnetic wave .",
    "thus , by the simple relationship between time , distance and velocity ( in this case , the speed of light ) , then the distance can be easily determined . by having at least three anchors constantly calculating the distance between them and a certain tag , a triangulation allows to calculate the position in space of the tag , knowing beforehand the fixed position of each anchor with respect to a frame .",
    "+ the uwb system can be implemented using a two - way ranging protocol or a one - way ranging protocol . in two - way ranging , the tag communicates with each anchor individually following a sequence to go through all the anchors and calculate each distance . on the other hand , in one - way ranging the tag constantly broadcasts messages that are received by every anchor and by precisely synchronising the clocks of the anchors then the distance between each of them and the tag are calculated .",
    "one - way ranging is particular useful for multi - robot localization applications as there exists no bottle - neck in the number of tags the system can support . in particular , for this project the two - way ranging system developed in @xcite was used to test the control loop behavior using different localization techniques .",
    "this system was developed using the decawave dmw1000 ultra - wide band module @xcite which offers an accuracy of 10 - 20 centimeters in distance measurements .",
    "the main objectives of the research project were :    1 .   develop the mathematical model that describes the dynamics of the crazyflie 2.0 quadcopter .",
    "2 .   create a simulation environment for testing position and trajectory tracking control algorithms .",
    "implement , test and compare different control architectures .",
    "4 .   evaluate the performance of a low - cost uwb - based localization system when integrated in the control loop .",
    "a set of small milestones were defined to help achieve the main objectives of the project :    1 .",
    "investigate past works to identify the physical and aerodynamical parameters of the crazyflie 2.0 . 2 .",
    "linearize the quadcopter s dynamics around hover state .",
    "3 .   study and identify the control architecture inside the crazyflie s firmware .",
    "4 .   design , simulate and implement an off - board position controller using data from the vicon positioning system .",
    "5 .   conceive a second control system , from simulation to implementation , to track more demanding trajectories .",
    "compare the performance of both controllers with in - flight data .",
    "compare the performance of the lqt controller using both the vicon and the uwb systems .",
    "in this section a mathematical model of the crazyflie 2.0 is proposed .",
    "this study was the basis on which the simulation environment was built and an important component in the design of controllers .",
    "thus , it was important to dedicate enough time to understand how the system works and identify correctly some physical parameters that were relevant for the simulation to be useful in the real case scenario .",
    "before any dynamic study of the quadcopter begins , it is necessary to define the coordinate frames of the body of the quadcopter ( non - inertial frame ) as well as the inertial frame , also called `` world frame '' , which in the case of this project refers to the coordinate frame set by the external positioning system ( vicon / uwb ) . following the conventions set by the `` bitcraze '' company when designing their quadcopter , as seen in the body - fixed frame",
    "is defined .    body - fixed frame and inertial frame . ]    in the aeronautic systems , a popular axes convention is to define a positive altitude downwards , the y axis pointing towards the east and the x axis pointing towards the true north .",
    "these types of frames are called ned frames ( north , east , down ) .",
    "it was decided to follow the convention used in the crazyflie 2.0 firmware , meaning a positive altitude upwards , which defines an enu frame ( east , north , up ) .",
    "another remark is that the origin of the body - fixed frame matches with the center of gravity of the quadcopter .",
    "+ another important remark is knowing the flight configuration of the quadcopter as there are two of them : configuration `` + '' or configuration `` x '' .",
    "the difference between them is the orientation of the x - y frame in terms of the arms of the quadcopter , as shown in taken from the manufacturer s website @xcite and modified accordingly .",
    "`` + '' configuration at the left and `` x '' configuration at the right . ]    in the modern conceptions of quadcopters the `` x '' configuration is prefered over the `` + '' configuration , mainly because in `` x '' it is easier to add a camera functionality as the quadcopter s arms will not be interfering with the images captured . by default",
    "the crazyflie 2.0 is in x mode , so for the rest of this project and during the mathematical modeling it will be considered that the quadcopter is in this configuration .",
    "the dynamic equations of the quadcopter proposed here take into account certain physical properties that are not necessarily perfectly valid in the real platform that is being used in this work , but they are good approximations that simplify greatly the study and comprehension of this type of vehicles . here",
    "are the hypothesis :    1 .",
    "the quadcopter is a rigid body that can not be deformed , thus it is possible to use the well - known dynamic equations of a rigid body .",
    "the quadcopter is symmetrical in its geometry , mass and propulsion system .",
    "the mass is constant ( i.e its derivative is 0 )",
    ".    the mechanical classic laws of motion are valid in inertial systems , so to be able to translate these equations into the body frame it is necessary to define a rigid transformation matrix from the inertial frame to the body - fixed frame , in which only the rotational part is meaningful to the discussion and is given by three successive rotations : first a rotation of an angle @xmath0 around the @xmath1 axis , then a rotation of an angle @xmath2 around the intermediate @xmath3 axis and finally a rotation of an angle @xmath4 around the intermediate @xmath5 axis .",
    "once these three rotations are calculated , the resulting transformation matrix is defined as : @xmath6$}\\label{eq : euler}\\ ] ] where @xmath4 , @xmath2 and @xmath0 represent the roll , pitch and yaw angles of the quadcopter s body .",
    "shows the direction of said angles in the crazyflie 2.0 body - fixed frame defined previously .",
    "euler angles in the quadcopter s body . ]",
    "the notation convention used during the mathematical analysis of the quadcopter s dynamics is exhibited in , where the state variables are defined .",
    ".[tab : notation]notation for vectors and states . [ cols=\"^,^,^\",options=\"header \" , ]     the experimental data confirms the robustness of the control system while using a positioning system with around 100 times greater standard deviation noise than the initial system .",
    "the tuning of the kalman filter to adapt to this new source of noise was vital to ensure a good compromise between filtering and precision in the estimations . even though there is a clear advantage on using more precise technology , such as the vicon , the system could still track the desired trajectories with an acceptable degree of precision while using a more cheaper system such as the uwb .",
    "+ the fact that the position integral gains for the x and y positions had to be lowered while using the uwb system , was a necessary compromise to ensure less oscillations while following the desired trajectory .",
    "such a compromise did not arise while using the vicon system , with which the quadcopter remained stable and followed smoothly the trajectories for a wide range of gain values .",
    "+ if the control system could only use the uwb system , then a more detailed study of how to compensate the different sources of noise and biases should be made .",
    "for instance , the uwb system looses precision when the tag is close to one of the anchors , or if the tag is facing away from one of the anchors .",
    "all this subtleties , if taken in account while designing the control system , could lead to a better performance than the one obtained and presented in this work .",
    "+ finally , the video found in @xcite shows a summary of the project s simulation and experimental results .",
    "the study was set out to explore the dynamics of an open source nanoquadcopter named crazyflie 2.0 , as well as creating a simulation environment for control design and then testing it in the real platform .",
    "this type of unmanned aerial vehicles is becoming the preferred platform for testing control algorithms of diverse natures , thus the inherent importance of conceiving a mathematical model of the vehicle that can predict , up to some extent , how the system will evolve over time .",
    "hence , the project started by a modeling of the nanoquadcopter and an identification of certain physical parameters , based in previous work .",
    "working in parallel with the literature and the quadcopter s embedded firmware was the main key in describing the system behavior just as it is in the real platform , an important milestone for future work as the dynamics of a system is the heart of every simulation environment .",
    "+ the second phase of the project was building the simulation that served as the first test - bench of the control architectures proposed . using both the non - linear dynamics and the linearised state space realisation of the system ,",
    "the simulation created is a solid testing environment to conceive all types of control systems .",
    "it was incredibly useful during the first stages of the project to get a better understanding of how the system worked .",
    "in addition , the simulation was used for designing both the pid position controller and the lqt trajectory tracker .",
    "+ an important conclusion is that the initial belief that all dynamics were decoupled as suggested during the linear modeling was not entirely true in the non - linear system .",
    "as observed in the simulations , there exists some interference between movements that , for instance , does not allow the quadcopter to describe a perfectly straight line trajectory when there are more than one movement involved ( a yaw rotation for example ) .     + the position pid tracker was tested for time - varying trajectories , such as circles and helices .",
    "even though the system could described these trajectories , there were some drawbacks and performance issues , for example not getting fast enough to the desired points which lead to errors in the desired trajectory .",
    "the fact that the task at hand was managed by a position tracker and not a trajectory tracker was the main reason of these discrepancies . to address the deficiencies of the pid controller ,",
    "a new control system was conceived using the lqt algorithm , which proved to have interesting characteristics while following step responses , mainly that it started moving before the command was asked in order to reduce the tracking error .",
    "the feature was possible thanks to the off - line calculation of the algorithm and the knowledge of the trajectory beforehand .",
    "+ the comparisons between the pid and the lqt controller indicate a clear superiority of the lqt in terms of reducing the trajectory tracking error , specially in the more demanding trajectories , in which the lqt algorithm reduced up to 4 times the rms errors obtained with the pid controller .",
    "directly related to the better tracking , the lqt incurred in higher levels of control effort than the pid , but it also eliminated the great command peaks seen in the motor time plots of the pid , thus getting rid of the undesired motor saturations that could lead to unstable states .",
    "+ there are two main drawbacks of the lqt algorithm with respect to the pid : the first one is the inability to specify trajectories for the heading ( yaw angle ) and the second one is the need to know the trajectory before its execution .",
    "taking in account these shortcomings , it is proposed as future work for this research to incorporate a method to control the yaw angle while keeping the good performance in the lqt algorithm , the author proposes a gain - scheduling method being the yaw angle the scheduling variable as a possible solution for this problem . as for the second drawback of the lqt algorithm , more research",
    "should be directed towards an on - line implementation thus making the controller useful in more complex tasks such as planning and execution missions in real - time .",
    "+ the gui created for trajectory generation proved to be a valuable asset to quickly test different types of trajectories , with varying difficulty .",
    "but the tool can be improved by adding physical constraints to the trajectory generation , as to assure the trajectory is feasible for the quadcopter to follow .",
    "future work in this area should explore feasible trajectory generation as proposed in works such as @xcite .",
    "+ the simulation versus experimental comparative time plots show that the simulation environment developed in this project was accurate to some extent , serving its purpose as a useful design tool for the controllers synthesized , but it had its limitations mainly due to unmodeled phenomena , which lead to the need of introducing high integral gains in the controllers to compensate the model errors and other perturbations of the system . as future work",
    ", it is suggested a more thorough model identification for the quadcopter , for example using numerical methods such as the closed - loop `` black box '' identification proposed in @xcite .   + the kalman filter approach for estimating the linear velocities from the position data proved to be successful using both the vicon and the uwb , specially with the latter in which the data had 100 times greater standard deviation noise .",
    "the vicon versus uwb experiments suggest that in both cases the lqt tracked the desired position , but with obvious different levels of smoothness and precision .",
    "even though both performances were satisfactory in terms of the scope of this work , future research into improving the control system while using the uwb position system would be ideal .",
    "starting from an identification of different sources of added noise and biases of the uwb system , upto different filtering techniques that are more appropriate than the classic kalman filter proposed in this project are the author s recommendations to improve the control system performance .",
    "+ this work represents a solid base for future research using this platform , with enough explanation in the calculus for newcomers in the area to understand the basic functioning of the system .",
    "the simulation environment was developed in a fashion that corresponds exactly with the equations shown in the mathematical model , which helps in the quick understanding of how everything works and saves time in comprehending an otherwise complex system , plus it is easily customizable for future users to develop their own controllers .",
    "the project successfully fulfilled its ultimate goal of characterizing the provided quadcopter platform and doing all the steps needed to develop an efficient control system for trajectory tracking .",
    "10 hanna , w. ( 2014 ) . _ modelling and control of an unmanned aerial vehicle _",
    "( b.eng thesis , charles darwin university ) .",
    "subramanian , g. p. ( 2015 ) .",
    "_ nonlinear control strategies for quadrotors and cubesats _",
    "thesis , university of illinois at urbana - champaign ) .",
    "greitzer , e. m. , spakovszky , z. s. , & waitz , i. a. ( 2006 ) .",
    "_ thermodynamics and propulsion . _ mechanical engineering , mit .",
    "corke , p. ( 2011 ) .",
    "_ robotics , vision and control : fundamental algorithms in matlab ( vol .",
    "_ springer .",
    "hartman , d. , landis , k. , mehrer , m. , moreno , s. , & kim , j.(2014 ) _ quadcopter dynamic modeling and simulation ( quadsim ) v1.00 _ ( senior design project , drexel university )    hoenig , w. , milanes , c. , scaria , l. , phan , t. , bolas , m. , & ayanian , n. ( 2015 ) .",
    "_ mixed reality for robotics_. in intelligent robots and systems ( iros ) , 2015 ieee / rsj international conference on ( pp .",
    "5382 - 5387 ) .",
    "ieee    elruby , a. y. , el - khatib , m. m. , el - amary , n. h. , & hashad , a. i. ( 2012 ) .",
    "_ dynamic modeling and control of quadrotor vehicle_. in fifteenth international conference on applied mechanics and mechanical engineering , amme ( vol .",
    "karwoski , k. ( 2011 ) .",
    "_ quadrocopter control design and flight operation_. ( internship final report , nasa usrp )    sonnevend , i. ( 2010 ) . _",
    "analysis and model based control of a quadrotor helicopter . _",
    "( bsc diploma work , pter pzmny catholic university , faculty of information technology , budapest , hungary ( supervisor : g. szederknyi ) )    habib , m. k. , abdelaal , w. g. a. , & saad , m. s. ( 2014 ) .",
    "_ dynamic modeling and control of a quadrotor using linear and nonlinear approaches_. ( m.s .",
    "thesis , the american university in cairo ) .",
    "landry , b. ( 2015 ) . _ planning and control for quadrotor flight through cluttered environments _",
    "( master s degree thesis , massachusetts institute of technology ) .",
    "dunkley , o. , engel , j. , sturm , j. , & cremers , d. ( 2014 ) .",
    "_ visual - inertial navigation for a camera - equipped 25 g nano - quadrotor_. in iros2014 aerial open source robotics workshop .",
    "xu , d. , wang , l. , li , g. , & guo , l. ( 2012 , august ) .",
    "_ modeling and trajectory tracking control of a quad - rotor uav . _ in proceedings of the 2012 international conference on computer application and system modeling .",
    "atlantis press .",
    "meyer , j. , sendobry , a. , kohlbrecher , s. , klingauf , u. , & von stryk , o. ( 2012 ) .",
    "_ comprehensive simulation of quadrotor uavs using ros and gazebo .",
    "_ in simulation , modeling , and programming for autonomous robots ( pp .",
    "400 - 411 ) .",
    "springer berlin heidelberg .",
    "suimez , e. c. ( 2014 ) .",
    "trajectory tracking of a quadrotor unmanned aerial vehicle ( uav ) via attitude and position control ( master s degree thesis , middle east technical university ) .",
    "oh , s. m. ( 2012 ) .",
    "_ modeling and control of a quad - rotor helicopter_. ( m.s .",
    "thesis , university of florida )    pounds , p. e. i. ( 2007 ) .",
    "_ design , construction and control of a large quadrotor micro air vehicle . _",
    "( doctoral dissertation , australian national university . )    tamami , n. , pitowarno , e. , & astawa , i. g. p. ( 2014 ) . _ proportional derivative active force control for x configuration quadcopter . _",
    "journal of mechatronics , electrical power , and vehicular technology , 5(2 ) , 67 - 74 .",
    "roo , m. ( 2015 ) .",
    "_ optimal event handling by multiple uavs . _",
    "( m.s . report , university of twente )    lehnert , c. , & corke , p. ( 2013 ) .",
    "_ av - design and implementation of an open source micro quadrotor_. ac on robotics and automation , eds .",
    "sabatino , f.(2015 ) .",
    "_ quadrotor control : modeling , nonlinear control design , and simulation . _",
    "( master s degree project , kth royal institute of technology ) .",
    "kader , s. a. , el - henawy , a. e. , & oda , a. n. ( 2014 ) .",
    "_ quadcopter system modeling and autopilot synthesis . _ in international journal of engineering research and technology ( vol .",
    "3 , no . 11 ( november-2014 ) ) .",
    "esrsa publications .",
    "naidu , d. s. ( 2002)._optimal control systems . _ crc press .",
    "mathworks(2015)._state estimation using time - varying kalman filter .",
    "_ retrieved may 16 , 2016 , from http://www.mathworks.com/help/control/getstart/estimating-states-of-time-varying-systems-using-kalman-filters.html    hoffmann , g. m. , waslander , s. l. , & tomlin , c. j. ( 2008)._quadrotor helicopter trajectory tracking control .",
    "_ in aiaa guidance , navigation and control conference and exhibit ( pp .",
    "1 - 14 ) .",
    "mueller , m. w. , & dandrea , r. ( 2013)._a model predictive controller for quadrocopter state interception .",
    "_ in european control conference ( pp",
    ". 1383 - 1389 ) .",
    "mu , s. , zeng , y. , & wu , p. ( 2008)._multivariable control of anaerobic reactor by using external recirculation and bypass ratio .",
    "_ journal of chemical technology and biotechnology , 83(6 ) , 892 - 903 .",
    "huang , h. , hoffmann , g. m. , waslander , s. l. , & tomlin , c. j. ( 2009)._aerodynamics and control of autonomous quadrotor helicopters in aggressive maneuvering .",
    "_ in robotics and automation , 2009 .",
    "ieee international conference on ( pp .",
    "3277 - 3282 ) .",
    "sujit , p. b. , saripalli , s. , & sousa , j. b. ( 2014)._unmanned aerial vehicle path following : a survey and analysis of algorithms for fixed - wing unmanned aerial vehicles_. ieee control systems , 34(1 ) , 42 - 59 .",
    "bouabdallah , s. , noth , a. , & siegwart , r. ( 2004)._pid vs lq control techniques applied to an indoor micro quadrotor_. in intelligent robots and systems , 2004.(iros 2004 ) . proceedings .",
    "2004 ieee / rsj international conference on ( vol .",
    "2451 - 2456 ) .",
    "peraire , j. , & widnall , s. ( 2009 ) _ lecture l28 - 3d rigid body dynamics_. mit opencourseware ,",
    "dynamics fall 2009 .",
    "available online : http://ocw.mit.edu .",
    "bitcraze(2015 ) .",
    "_ crazyflie 2.0 assembly instructions_. retrieved august 3 , 2016 , from https://wiki.bitcraze.io/projects:crazyflie2:userguide:assembly    bitcraze(2015 ) .",
    "_ crazyflie 2.0 main page_. retrieved august 5 , 2016 . from https://www.bitcraze.io/crazyflie-2/    vicon motion systems ( 2015 ) .",
    "_ vicon motion capture system main page_. retrieved august 5 , from https://www.vicon.com/    mueller , m. w. , hamer , m. , & dandrea , r. ( 2015 ) .",
    "_ fusing ultra - wideband range measurements with accelerometers and rate gyroscopes for quadrocopter state estimation_. in 2015 ieee international conference on robotics and automation ( icra ) ( pp .",
    "1730 - 1736 ) .",
    "rafrafi , w. , & le ny , j. ( 2016 ) .",
    "_ intgration dun systme radio  bande ultra - large pour la navigation de robots mobiles_. ( master s degree thesis , cole polytechnique de montral ) .",
    "decawave(2015 ) .",
    "_ scensor dwm1000 module product page_. retrieved august 11 , from http://www.decawave.com/products/dwm1000-module    luis , c. ( 2016 ) .",
    "_ trajectory tracking of a crazyflie 2.0 nanoquadcopter _ [ video file ] . retrieved august 13 , from https://youtu.be/c-sxovcyhjq",
    "the firmware used during this project was `` release 2016.02 '' found in https://github.com/bitcraze/crazyflie-release/releases , with the following changes :      .... # ifdef quad_formation_x int16_t r = control->roll / 2.0f ; int16_t p = control->pitch / 2.0f ; motorpower.m1 = limitthrust(control->thrust - r - p - control->yaw ) ; motorpower.m2 = limitthrust(control->thrust - r + p + control->yaw ) ; motorpower.m3 = limitthrust(control->thrust + r + p - control->yaw ) ; motorpower.m4 = limitthrust(control->thrust + r - p + control->yaw ) ; ....      .... attitudecontrollercorrectattitudepid(state->attitude.roll , -state->attitude.pitch , state->attitude.yaw ,                                  setpoint->attitude.roll , setpoint->attitude.pitch , attitudedesired.yaw ,                                  & ratedesired.roll , & ratedesired.pitch , & ratedesired.yaw ) ;    //bypass attitude controller if rate mode active      if ( setpoint->mode.roll = = modevelocity ) {        ratedesired.roll = setpoint->attituderate.roll ;      }      if ( setpoint->mode.pitch = = modevelocity ) {        ratedesired.pitch = setpoint->attituderate.pitch ;      }      if ( setpoint->mode.yaw = = modevelocity ) {        ratedesired.yaw = setpoint->attituderate.yaw ;      }"
  ],
  "abstract_text": [
    "<S> the primary purpose of this study is to investigate the system modeling of a nanoquadcopter as well as designing position and trajectory control algorithms , with the ultimate goal of testing the system both in simulation and on a real platform .    </S>",
    "<S> the open source nanoquadcopter platform named crazyflie 2.0 was chosen for the project . the first phase consisted in the development of a mathematical model that describes the dynamics of the quadcopter . </S>",
    "<S> secondly , a simulation environment was created to design two different control architectures : cascaded pid position tracker and lqt trajectory tracker . finally , the implementation phase consisted in testing the controllers on the chosen platform and comparing their performance in trajectory tracking .    </S>",
    "<S> our simulations agreed with the experimental results , and further refinement of the model is proposed as future work through closed - loop model identification techniques . </S>",
    "<S> the results show that the lqt controller performed better at tracking trajectories , with rms errors in position up to four times smaller than those obtained with the pid . </S>",
    "<S> lqt control effort was greater , but eliminated the high control peaks that induced motor saturation in the pid controller . </S>",
    "<S> the lqt controller was also tested using an ultra - wide band two - way ranging system , and comparisons with the more precise vicon system indicate that the controller could track a trajectory in both cases despise the difference in noise levels between the two systems .    </S>",
    "<S> cole polytechnique de montral    electrical engineering department    automation section        +   +      +   +    * *     +   +   +   + luis , c. , & le ny , j. ( august , 2016 ) . </S>",
    "<S> _ design of a trajectory tracking controller for a nanoquadcopter_. technical report , mobile robotics and autonomous systems laboratory , polytechnique montreal .     </S>",
    "<S> +   +   +  author :  supervisor :    carlos luis  jrme le ny </S>"
  ]
}