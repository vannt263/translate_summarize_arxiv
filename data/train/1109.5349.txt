{
  "article_text": [
    "the _ box - ball system _ ( bbs for short ) is a cellular automaton introduced by takahashi and satsuma in 1990 @xcite .",
    "it is a dynamical system of finitely many balls in an infinite number of boxes aligned on a line , whose time evolution is given by the following rule .",
    "we assume that each box can accommodate one ball at most .    1 .",
    "move the leftmost ball to its nearest right empty box .",
    "2 .   move the leftmost ball among the rest to its nearest right empty box .",
    "3 .   repeat ( ii ) until all the balls are moved exactly once .",
    "this defines an update corresponding to the one time step @xmath1 .",
    "we remark that the above evolution rule is invertible .",
    "let us show an example . by starting with the following configuration at time zero ,    = 1.0 mm    ( 100,8)(5,4 )    ( -2,6)`t=0 ` ( 10,10)(1,0)95 ( 10,5)(1,0)95 ( 15,5)(5,0)18(0,1)5    ( 17.5,7.5 ) ( 22.5,7.5 ) ( 27.5,7.5 ) ( 52.5,7.5 )    we obtain the configuration at @xmath2 as    = 1.0 mm    ( 100,5)(5,7 )    ( -2,6)`t=1 ` ( 10,10)(1,0)95 ( 10,5)(1,0)95 ( 15,5)(5,0)18(0,1)5    ( 32.5,7.5 ) ( 37.5,7.5 ) ( 42.5,7.5 ) ( 57.5,7.5 )    and so on , ...    = 1.0 mm    ( 100,22)(5,-6 )",
    "( -2,11)`t=2 ` ( 10,15)(1,0)95 ( 10,10)(1,0)95 ( 15,10)(5,0)18(0,1)5    ( 47.5,12.5 ) ( 52.5,12.5 ) ( 62.5,12.5 ) ( 67.5,12.5 )    ( -2,3)`t=3 ` ( 10,7)(1,0)95 ( 10,2)(1,0)95 ( 15,2)(5,0)18(0,1)5    ( 57.5,4.5 ) ( 72.5,4.5 ) ( 77.5,4.5 ) ( 82.5,4.5 )    ( 0,-8 )    ( -2,3)`t=4 ` ( 10,7)(1,0)95 ( 10,2)(1,0)95 ( 15,2)(5,0)18(0,1)5    ( 62.5,4.5 ) ( 87.5,4.5 ) ( 92.5,4.5 ) ( 97.5,4.5 )    one observes that  a series of three balls \" and  a series of one ball \" proceed to the right stably unless they are  too close \" to each other .",
    "the larger one is faster than the smaller one , so they eventually collide . after the collision ,",
    "it is non - trivial that they come back in the very original shape as @xmath3 , instead of being smashed into pieces like @xmath4 or getting glued together like @xmath5 .",
    "moreover , the collision has caused a _ phase shift _ ; observe that the trajectory of the larger ( smaller ) series has been shifted by @xmath6 to the right ( left ) .",
    "let us watch another example :    = 0.9 mm    ( 140,42)(10,3 )    ( -2,38)`t=0 ` ( 10,42)(1,0)150 ( 10,37)(1,0)150 ( 15,37)(5,0)29(0,1)5    ( 17.5,39.5 ) ( 22.5,39.5 ) ( 27.5,39.5 ) ( 32.5,39.5 )    ( 52.5,39.5 ) ( 57.5,39.5 ) ( 62.5,39.5 )    ( 77.5,39.5 )    ( -2,30)`t=1 ` ( 10,34)(1,0)150 ( 10,29)(1,0)150 ( 15,29)(5,0)29(0,1)5    ( 37.5,31.5 ) ( 42.5,31.5 ) ( 47.5,31.5 )    ( 67.5,31.5 ) ( 72.5,31.5 )    ( 82.5,31.5 ) ( 87.5,31.5 ) ( 92.5,31.5 )    ( -2,22)`t=2 ` ( 10,26)(1,0)150 ( 10,21)(1,0)150 ( 15,21)(5,0)29(0,1)5    ( 52.5,23.5 ) ( 57.5,23.5 ) ( 62.5,23.5 )    ( 77.5,23.5 )    ( 97.5,23.5 ) ( 102.5,23.5 ) ( 107.5,23.5 ) ( 112.5,23.5 )    ( -2,14)`t=3 ` ( 10,18)(1,0)150 ( 10,13)(1,0)150 ( 15,13)(5,0)29(0,1)5    ( 67.5,15.5 ) ( 72.5,15.5 )    ( 82.5,15.5 ) ( 87.5,15.5 )    ( 117.5,15.5 ) ( 122.5,15.5 ) ( 127.5,15.5 ) ( 132.5,15.5 )    ( -2,6)`t=4 ` ( 10,10)(1,0)150 ( 10,5)(1,0)150 ( 15,5)(5,0)29(0,1)5    ( 77.5,7.5 )    ( 92.5,7.5 ) ( 97.5,7.5 ) ( 102.5,7.5 )    ( 137.5,7.5 ) ( 142.5,7.5 ) ( 147.5,7.5 ) ( 152.5,7.5 )    here we have three series of @xmath7 , @xmath8 and @xmath9 balls from the left , and they are interchanged into the reverse order @xmath9 , @xmath8 and @xmath7 during @xmath10 . these behaviors of series of balls remind us of _ solitons _ in the theory of nonlinear waves .",
    "we call the number of balls in a series of balls before or after collisions an _ amplitude _ of the soliton .",
    "( a precise definition of solitons and their amplitude will be given later .",
    "see for example ( [ t : jun10a ] ) or ( [ k : ss ] ) . )    one can also set up the bbs with the periodic boundary condition @xcite .",
    "let @xmath11 be the number of boxes aligned on an oriented circle .",
    "we put @xmath12 balls into them .",
    "the balls are moved by the same rule as the previous ( i)(iii ) for the original ( infinite ) bbs except a minor adaptation to the fact that nothing can be  leftmost \" on a circle . in ( i ) , the procedure can be started from _ any _ chosen ball . in ( ii ) , the terms  leftmost \" and  nearest right \" are to be understood along the direction of the orientation of the circle . then the modified evolution rule is well - defined in the sense that the result is actually independent of the choice of the first ball to move .",
    "moreover it is again invertible .",
    "let us look at an example of @xmath13 and @xmath14 in the following , where we identify the left and right boundaries ( thick lines ) :    = 1.0 mm    ( 90,55)(0,1 )    ( 0,51)`t=0 ` ( 15,55)(1,0)60 ( 15,50)(1,0)60 ( 20,50)(5,0)11(0,1)5 ( 15,50)(0.2,0)2(0,1)5 ( 75,50)(0.2,0)2(0,1)5    ( 17.5,52.5 ) ( 22.5,52.5 ) ( 27.5,52.5 ) ( 47.5,52.5 )    ( 0,43)`t=1 ` ( 15,47)(1,0)60 ( 15,42)(1,0)60 ( 20,42)(5,0)11(0,1)5 ( 15,42)(0.2,0)2(0,1)5 ( 75,42)(0.2,0)2(0,1)5    ( 32.5,44.5 ) ( 37.5,44.5 ) ( 42.5,44.5 ) ( 52.5,44.5 )    ( 0,35)`t=2 ` ( 15,39)(1,0)60 ( 15,34)(1,0)60 ( 20,34)(5,0)11(0,1)5 ( 15,34)(0.2,0)2(0,1)5 ( 75,34)(0.2,0)2(0,1)5    ( 47.5,36.5 ) ( 57.5,36.5 ) ( 62.5,36.5 ) ( 67.5,36.5 )    ( 0,27)`t=3 ` ( 15,31)(1,0)60 ( 15,26)(1,0)60 ( 20,26)(5,0)11(0,1)5 ( 15,26)(0.2,0)2(0,1)5 ( 75,26)(0.2,0)2(0,1)5    ( 52.5,28.5 ) ( 72.5,28.5 ) ( 17.5,28.5 ) ( 22.5,28.5 )    ( 0,19)`t=4 ` ( 15,23)(1,0)60 ( 15,18)(1,0)60 ( 20,18)(5,0)11(0,1)5 ( 15,18)(0.2,0)2(0,1)5 ( 75,18)(0.2,0)2(0,1)5    ( 27.5,20.5 ) ( 32.5,20.5 ) ( 37.5,20.5 ) ( 57.5,20.5 )    ( 0,11)`t=5 ` ( 15,15)(1,0)60 ( 15,10)(1,0)60 ( 20,10)(5,0)11(0,1)5 ( 15,10)(0.2,0)2(0,1)5 ( 75,10)(0.2,0)2(0,1)5    ( 42.5,12.5 ) ( 47.5,12.5 ) ( 52.5,12.5 ) ( 62.5,12.5 )    ( 0,3)`t=6 ` ( 15,7)(1,0)60 ( 15,2)(1,0)60 ( 20,2)(5,0)11(0,1)5 ( 15,2)(0.2,0)2(0,1)5 ( 75,2)(0.2,0)2(0,1)5    ( 57.5,4.5 ) ( 67.5,4.5 ) ( 72.5,4.5 ) ( 17.5,4.5 )    one can observe that the larger soliton overtakes the smaller one repeatedly .",
    "the biggest difference from the infinite bbs is that the system has now a finite configuration space ; there are just @xmath15 states .",
    "thus , any state is cyclic , i.e. by starting with an arbitrary initial state one comes back to itself in a finite time .",
    "let us motivate our study on bbs from the viewpoint of solitons and integrability .",
    "nowadays , the term soliton is widely used to mean , somewhat loosely , various special solutions to nonlinear equations that exhibit particle like behavior or certain stability . in its original context of zabusky and kruskal @xcite",
    "however , it meant a solitary wave solution in an infinite dimensional nonlinear dynamical system ( kdv eq . mentioned below ) with more stringent properties as follows :    1 .",
    "particle - like propagation ( constant velocity , stability under _",
    "multi_-body collision ) , 2 .",
    "factorization of scattering ( pairwise scattering with phase shifts ) .",
    "existence of solitons is a signal of _ integrability _ , which at least postulates an infinite number of conserved quantities ( integrals of motion ) .",
    "the historically important and famous integrable systems of such kind are korteweg - de vries ( kdv ) equation and kadomtsev - petviashvili ( kp ) equation , which are prototypes of what is called a soliton equation . for finite dimensional systems ,",
    "the notion of integrability is clearer , i.e. it implies the existence of enough number of conserved quantities so that the initial value problem can be solved .",
    "the classic examples as euler , lagrange and kovalevskaya tops belong to this category .",
    "we remark that the toda equation is also an important dynamical system which is integrable either on finite or infinite lattices .    and",
    "so what about the bbs in which we have just observed  solitons \" ? are they really solitons that possess the above mentioned properties ? is bbs really integrable in some sense ?",
    "is it related to integrable systems known hitherto ?",
    "is there any good mathematical framework to analyse it ?",
    "the aim of this review article is to give an introductory exposition on a variety of aspects of bbs elucidated in the last two decades , where all the above questions will be answered affirmatively .",
    "it turns out that bbs originates in a _",
    "integrable system as well as in a _ classical _ integrable system .",
    "it is located at the very special point where the two systems meet by the procedures called _ crystallization _ and _ ultradiscretization _ , respectively .    by quantum integrable systems , we mean those associated with the yang - baxter relation @xcite .",
    "their symmetry is governed by _ quantum group _ @xmath16 meaning the @xmath17-deformation of the universal enveloping algebra @xmath18 of some affine lie algebra @xmath19 @xcite .",
    "typical examples are solvable lattice models in statistical mechanics such as the six - vertex model @xcite for @xmath20 and its generalizations .",
    "they are spin systems whose boltzmann weights are continuous functions of @xmath17 .",
    "the crystallization corresponds to taking the limit @xmath21 , where the models are frozen to the ground state and its profile turns out to reproduce the bbs dynamics exactly .    by classical integrable system ,",
    "we mean here integrable difference equations such as discrete kp equation and ( time - discretized versions of ) lotka - volterra equation , toda equation and so forth .",
    "these equations are already defined on lattices ( discrete space - time ) , but their dynamical variables are yet continuous .",
    "the ultradiscretization is a procedure to transform these nonlinear evolution equations and their solutions into piecewise - linear forms . leaving technical cautions aside ,",
    "it is achieved by switching from the original variable @xmath22 to @xmath23 by @xmath24 and taking the limit @xmath25 .",
    "being piecewise - linear , the resulting equations allow one to restrict the dynamical variables to a certain discrete set . in this way one reproduces evolution equations of bbs and obtains their solutions .    having the double , classical as well as quantum , origins of the integrability makes the study of bbs especially rich .",
    "one can import a variety of notions and techniques to understand and analyse bbs from the two theories .",
    "for instance from the theory of quantum integrable systems , we have ingredients like yang - baxter relation , quantum @xmath26 matrices , commuting transfer matrices , bethe ansatz , corner transfer matrices and so forth @xcite .",
    "similarly , the classical theory provides us with solitons , the inverse scattering method , tau functions , action - angle variables , isolevel set , spectral curves , linearization of flows etc @xcite .",
    "it turns out that they all survive the crystallization or the ultradiscretization rather miraculously .",
    "moreover , they allow a systematic ( lie algebraic ) generalization beyond the original bbs so that there are many kinds of balls or particles / anti - particles , boxes with capacity greater than one , and a family of commuting time evolutions etc .",
    "( nonetheless , we will mainly focus on the basic type @xmath27 case in this paper to be introductory . )",
    "compared with traditional integrable systems , certainly a novel feature of bbs is that its _ dependent _ ( or _ dynamical _ ) variables have also been discretized .",
    "this fact indicates and actually has led to a fruitful connection to the realm of _",
    "combinatorics_. from a mathematical point of view , the crystallization and the ultradiscretization are both connected and actually have partly motivated the fascinating subjects known as _ crystal base _",
    "@xcite in the representation theory of quantum group , _ geometric crystals _ @xcite as its geometric counterpart , and _ tropical geometry _",
    "@xcite in algebraic geometry .",
    "as the title of the article suggests , this review also contains elementary expositions and practical applications of these theories to bbs .    leaving the details to later sections , we present a rough schematic view of the relevant subjects as a summary .",
    "\\text{quantum group } & \\stackrel{q \\to 0}{\\longrightarrow }   & \\text{crystal base theory } & \\stackrel{0 \\leftarrow { \\varepsilon}}{\\longleftarrow }   & \\text{geometric crystal } \\\\[1 mm ] & & \\text{tropical geometry } & \\stackrel{0 \\leftarrow { \\varepsilon}}{\\longleftarrow } & \\text{algebraic geometry }   \\end{matrix}\\end{aligned}\\ ] ]      the main contents of each section are as follows : in  2.1 the basic notion of crystallization is illustrated with the simplest vertex model of @xmath29 .",
    " 2.2 is an exposition on @xmath27 crystal base theory , which is applied to describe the infinite bbs in  2.3 . in  2.4 , we briefly sketch various generalizations of bbs associated with affine lie algebras .",
    "we remark that  2.2 and  2.3 are essential to study bbs .    in  3.1 the physical background of kerov - kirillov - reshetikhin ( kkr ) bijection in the bethe ansatz",
    "is explained . the definition of kkr bijection for @xmath27 crystal is given in  3.2 with the concrete algorithm . in  3.3 we state that kkr bijection linearizes the time evolution of bbs , which enables us to solve the initial value problem of bbs .    in  4.1 the notions of tropicalization , ultradiscretization and min - plus algebra",
    "are introduced . in ",
    "4.2 , two kinds of evolution equations for bbs are provided , corresponding to the `` spatial '' and the `` soliton '' descriptions of bbs .",
    "the equations are the ultradiscretization of known integrable discrete systems .",
    "the first description is studied in  4.4 and  5.2 , and the second one is studied in  6.3 . in ",
    "4.3 , we briefly explain geometric crystal whose ultradiscretization gives the crystal structure . in ",
    "4.4 the general solution for bbs is given by the ultradiscrete tau function in a similar way to many soliton equations .",
    "in  5.1 the basic features of periodic bbs is explained and its general solution is constructed via ( modified ) kkr bijection in  5.2 .",
    "a remarkable feature is that the solution can be written in terms of tropical theta functions . in ",
    "5.3 we discuss more detail of periodic bbs from the viewpoint of torus decomposition of the isolevel set and fundamental periods of the time evolution .    ",
    "6.1 is an introduction to tropical curve theory which is the latest mathematical object in this article .",
    "this theory is applied in  6.2 to solve the tropical periodic toda lattice ( trop - ptoda ) . in ",
    "6.3 we show that the isolevel set of the periodic bbs is embedded in that of trop - ptoda .",
    "this embedding bridges two different approaches to the periodic bbs by the trop - ptoda and by the modified kkr bijection in  5.2 , from the viewpoint of the tropical geometric description of the isolevel sets .",
    "we show a flow chart of the sections in this article : @xmath30 where sections involving somewhat advanced or specialized topics are indicated by @xmath31 .",
    "we did not intend to make the reference exhaustive .",
    "it is a moderate but sufficient supply for interested readers to proceed and find further references .",
    "for simplicity , we concentrate on the @xmath33 case in this subsection .",
    "let us recall the six - vertex model and its fusion .",
    "consider the two dimensional square lattice , where each edge is assigned with a local variable taking values in @xmath34 . around each vertex , we allow the following 6 configurations with the respective boltzmann weights : @xmath35 where @xmath36 is called a _",
    "spectral parameter_. the other 10 configurations are assigned with 0 boltzmann weight .",
    "let @xmath37 .",
    "then ( [ k:6v ] ) is arranged in the _",
    "quantum @xmath26 matrix _ @xmath38 as @xmath39 here the indices run over @xmath34 and @xmath40 is the matrix unit acting as @xmath41 .",
    "schematically ( [ k : eqa : r ] ) is expressed as @xmath42 where the @xmath36-dependence is exhibited . the yang - baxter equation @xmath43 holds @xcite , where the indices signify the components in the tensor product as @xmath44 on which the both sides act .",
    "it is depicted as    @xmath45    the @xmath26 matrix @xmath46 is associated with the quantum affine algebra @xmath47 @xcite .",
    "there is an algebra homomorphism @xmath48 called coproduct , which enables one to construct the tensor product representation @xmath49 from any two representations @xmath50 and @xmath51 . setting @xmath52 with @xmath53 being the transposition of components , the quantum @xmath26 matrix is characterized by the condition @xmath54 for any @xmath55 .",
    "the asymmetry between the last two in ( [ k:6v ] ) is due to the special choice of the coproduct @xmath56 that suits the limit @xmath21 that will be considered in what follows .",
    "( the precise form of @xmath56 is not needed in this paper . )    starting from the six - vertex model , one can construct multi - state (  higher spin \" ) solvable vertex models by the _ fusion procedure _ @xcite .",
    "let @xmath57 be the irreducible @xmath58 module spanned by the @xmath59 fold @xmath17-symmetric tensors in @xmath60 .",
    "it is a @xmath17-analogue of the spin @xmath61 representation .",
    "concretely , @xmath62 and @xmath57 with @xmath63 is realized as the quotient @xmath64 , where @xmath65 .",
    "it is easy to see @xmath66 .",
    "we take the base vector of @xmath57 as @xmath67 , where @xmath68 and @xmath69 .",
    "the base will also be denoted by @xmath70 or by the sequence @xmath71 .",
    "obviously @xmath72 .",
    "the outcome of the fusion procedure is the fusion @xmath26 matrix @xmath73 given by @xmath74 where @xmath75 is specified by the weight conservation ( so called  ice rule \" ) as @xmath76 .",
    "the rhs of ( [ k : wjk ] ) is to be understood as @xmath77 unless this condition is satisfied . for @xmath78 ,",
    "one has @xmath79 and ( [ k : wjk ] ) reduces to ( [ k:6v ] ) . for @xmath80 , ( [ k : wjk ] ) reads explicitly as follows : @xmath81 here we have suppressed @xmath36 in the diagrams .",
    "( [ k : wt21 ] ) is regarded as the ( allowed ) local configurations and their boltzmann weights in a new vertex model where the horizontal and vertical edges take the 3 states @xmath82 and the 2 states @xmath34 , respectively .",
    "the weight conservation of @xmath83 means that the total number of letters 1 and 2 are preserved from nw to se .",
    "let us sketch how ( [ k : wt21 ] ) is obtained from ( [ k:6v ] ) .",
    "the yang - baxter equation ( [ k : ybe ] ) with @xmath84 shows that @xmath85 is preserved under the action of @xmath86 .",
    "therefore its action on @xmath87 can be restricted to @xmath88 .",
    "this yields the @xmath89 fusion leading to @xmath83 .",
    "similarly , @xmath90 can be deduced by restricting the composition ( @xmath91 defined in ( [ k : eqa : r ] ) ) @xmath92 to @xmath93 .",
    "one can furthermore fuse @xmath90 along the other component of the tensor product in a completely parallel fashion .",
    "the result yields the quantum @xmath26 matrix @xmath94 .",
    "the @xmath26 matrices so obtained again satisfy the yang - baxter equation in @xmath95 : @xmath96 it is depicted as ( [ k : ybe ] ) with the three lines to be interpreted as representing @xmath97 and @xmath98 .",
    "the quantum @xmath26 matrix @xmath99 gives rise to a fusion vertex model on a square lattice in a similar manner to ( [ k : re ] ) and ( [ k : r1 m ] ) .",
    "the local variables on the horizontal and vertical edges are taken from @xmath57 and @xmath100 , respectively . in terms of the linear operator @xmath101 , which is also called an @xmath26 matrix , the yang - baxter equation ( [ k : ybe2 ] )",
    "takes another familiar form : @xmath102 it is @xmath103 rather than @xmath99 that will be directly related to the combinatorial or birational @xmath26 introduced in the later sections .    an important object in the vertex models is the ( row to row ) _ transfer matrix_. for simplicity , we consider the basic case corresponding to @xmath90",
    ". then , the transfer matrix @xmath104 is defined by @xmath105 where each @xmath106 runs over @xmath34 and @xmath107 does over the set of base of @xmath57 labeled with @xmath108 .",
    "the array of the vertex diagrams means the product of the corresponding boltzmann weights ( [ k : wjk ] ) .",
    "we have assumed that the ( horizontal ) length of the lattice is @xmath11 and employed the periodic boundary condition .",
    "the transfer matrix allows one to express the partition function of the model ( for @xmath90 ) on @xmath109 lattice with the periodic boundary condition as @xmath110 .",
    "all the matrices @xmath111 act on the same space @xmath112 . using ( [ k : ybe2 ] )",
    ", one can show that they form a commuting family : @xmath113    now we are ready to discuss the main issue of the present section , namely , the _ crystallization _ limit @xmath114 .",
    "in ( [ k : wt21 ] ) , we see that only the 6 configurations in the left 3 columns survive . in terms of the @xmath26 matrix , the result may be stated that @xmath115 has the following action at @xmath116 : @xmath117 here @xmath118 and @xmath34 are to be understood as labels of the bases of @xmath119 and @xmath120 , respectively .",
    "apart from the factor @xmath36 , ( [ k : cr21 ] ) provides a bijection between the two sets .",
    "the same feature can be checked easily for the general @xmath59 case ( [ k : wjk ] ) .",
    "( it is immediately seen for @xmath78 by ( [ k:6v ] ) . )",
    "the configurations having non - vanishing matrix elements ( boltzmann weights ) at @xmath116 are the following : @xmath121 the limiting boltzmann weights are all 1 except the bottom right type , in which case it is @xmath36 . the configurations ( [ k : wtm1 ] )",
    "determine a bijection between the data on the nw to se , generalizing ( [ k : cr21 ] ) .",
    "in a physical terminology , the limit @xmath21 corresponds to the low temperature limit , where _ crystallization _ takes place .",
    "namely , spins are not allowed to thermally fluctuate and are frozen to the ground state configuration determined from their choice at the boundary of the lattice .",
    "here is an example of such a configuration : @xmath122 regard such a configuration on 2 dimensional lattice as successive downward transfer of the horizontal array of spins on vertical edges . then each step is a deterministic map corresponding to the crystallization of the transfer matrix ( [ k : rtm ] )",
    "the example ( [ k : hatten ] ) corresponds to @xmath123 .",
    "this is an origin of the bbs time evolutions @xmath124 .",
    "the spins on the horizontal edges are  hidden variables \" playing the role of _ carrier _ @xcite .    in the argument",
    "so far , one starts with @xmath17-dependent objects , e.g. fusion @xmath26-matrices and transfer matrices , and then consider their crystallization @xmath114 .",
    "in the subsequent sections , we explain how such procedures can be simplified and even more systematized by invoking the crystal theory of the quantum group @xmath58 @xcite .",
    "it provides a general framework to set up everything at @xmath116 from the outset .",
    "the labeling set of the bases of @xmath57 and the quantum @xmath26 matrix at @xmath116 will be formulated as _ crystal _ and _ combinatorial @xmath26 _ , respectively .",
    "the power of @xmath36 in ( [ k : cr21 ] ) is called the _ energy _ ( [ t : aug1a ] ) , which will also play an important role .",
    "the bbs and its generalizations will be constructed as the canonical dynamical systems associated with the crystalline vertex models .",
    "we remark that a similar approach to the bbs by the crystallization of the quantum lotka - volterra lattice has been undertaken in @xcite .",
    "the theory of crystal bases was founded by kashiwara @xcite as a representation theory of quantum group @xmath58 at @xmath116 .",
    "the notion of _ crystal _ is abstracted from the theory of crystal base @xcite . in this subsection we give a brief description of _ crystals _ and _ combinatorial @xmath26 _ which are basic ingredients in bbs .",
    "we remark that the notion of crystal lattice in the theory of crystal bases ( see @xcite for example ) is omitted in this review , and our attention is focused on the notion of crystal .",
    "let @xmath125 be an index set .",
    "a crystal @xmath126 is a set equipped with maps @xmath127 for @xmath128 , satisfying certain axiom . in this article we are exclusively concerned with the semiregular case of ( * ? ? ?",
    "then the relevant axiom is the following :    * for any @xmath129 and @xmath128 , there is @xmath130 such that @xmath131 , * @xmath132 , * for @xmath133 , @xmath134 is equivalent to @xmath135 .",
    "here we have omitted the items in the axiom involving the weight wt not used in this article .",
    "the @xmath136 and @xmath137 are called _",
    "kashiwara operators_. they serve as @xmath116 analogues of chevalley generators . for @xmath129",
    ", we set @xmath138    for our construction of bbs , we use the crystal @xmath139 associated with @xmath27 , where we take @xmath140 with @xmath141 . as a set @xmath139 is given by @xmath142 the elements of @xmath139 are also represented by young tableaux . for each @xmath143",
    "we associate a one - row semistandard tableau of length @xmath144 in which letter @xmath145 appears @xmath146 times .",
    "for instance let @xmath147 and @xmath148 .",
    "then the crystal @xmath149 is also written as @xmath150 in what follows all indices of @xmath151 are interpreted in @xmath152 , namely @xmath153 .",
    "the @xmath139 is the labeling set of the bases of the @xmath144-fold symmetric tensor representation ( an example of so - called kirillov - reshetikhin modules ) of @xmath154 .    for @xmath143 , let @xmath155 be maps defined by @xmath156 if their images fall into @xmath139 , or they are interpreted as @xmath77 otherwise . according to ,",
    "the maps @xmath157 are given by @xmath158    for any crystals @xmath159 one can define their tensor product @xmath160 . as a set it is a direct product @xmath161 , but it also has a crystal structure .",
    "any @xmath162 determines an element @xmath163 , and we understand @xmath164 .",
    "for @xmath163 the maps @xmath165 are given by @xmath166 where @xmath167 .",
    "the tensor product defined in this way satisfies the axioms of the crystals . by repeated use of this construction one",
    "can define tensor products of more than two crystals , where the ( co)associativity @xmath168 holds .",
    "in particular , this allows one to define the @xmath27 crystal @xmath169 for any set of positive integers @xmath170 .",
    "the crystals are represented by colored oriented graphs , known as _",
    "crystal graphs_. let us show an example . @xmath171 here the arrows with index @xmath145 represent the actions of @xmath137 .",
    "a tensor product of crystals is represented as follows .",
    "@xmath172 let us show two more examples .",
    "@xmath173 @xmath174      in general , two crystals @xmath160 and @xmath175 share a common crystal structure .",
    "combinatorial @xmath26 _ is the bijection between @xmath160 and @xmath175 that commutes with the actions of kashiwara operators .",
    "it is a @xmath32 limit of the quantum @xmath26 matrix @xmath176 in  2.1 . in other words",
    "it is a map @xmath177 which satisfies the following relations : @xmath178 in all the cases we consider in this article , the combinatorial @xmath26 is uniquely determined by demanding the above conditions .    by the definition",
    ", the inversion relation @xmath179 holds .",
    "the simplest case is @xmath180 , where the combinatorial @xmath26 reduces to the identity map . as a non - trivial example",
    ", we find that the combinatorial @xmath181 for @xmath182 is given by ( [ k : cr21 ] ) by comparing the crystal graphs ( [ t : cry : b12 ] ) and ( [ t : cry : b21 ] ) , modulo the power of @xmath36 ( which will be related to the energy function in ( [ t : aug1a ] ) ) . for @xmath59 general ,",
    "@xmath183 for @xmath184 is given by in the notation of .",
    "more generally , we shall present a simple algorithm for @xmath185 in  [ t:2 - 2 - 3 ] .    for the @xmath27 crystals there is a piecewise - linear formula for the combinatorial @xmath26 .",
    "given @xmath186 let @xmath187 , @xmath188 be defined by @xmath189    [ t : aug2a ] given @xmath190 define @xmath191 by ( [ t : udrpp ] ) . then",
    "all their elements are non - negative , hence @xmath192 .",
    "2 .   define @xmath193 by @xmath194 .",
    "then it is the combinatorial @xmath26 for the @xmath27 crystals , i.e. it satisfies the relations ( [ t : jun22_1 ] )",
    ".    one can prove it by showing the equivalence of the piecewise - linear formulas ( [ t : udrpp ] ) with an algorithm for the @xmath26 in  [ t:2 - 2 - 3 ] ( ( * ? ? ?",
    "another proof will be given , following an idea in ( * ? ? ?",
    "* th . 4.28 ) , as a consequence of the corresponding assertion in geometric crystals ( proposition [ t : aug16b ] ) .",
    "the formula of the combinatorial @xmath26 ( [ t : udrpp ] ) is characterized by the following relations @xmath195 with an extra constraint @xmath196 .",
    "the relations ( [ t : udtoda ] ) are consequence of @xmath197 and @xmath198 which follow from ( [ t : jun22_1 ] ) .",
    "a notion related to the combinatorial @xmath26 is the _ energy function _",
    "@xmath199 , for the @xmath27 crystals , @xmath200 is explicitly given by @xmath201 even if @xmath180 where we have @xmath202 , the energy function is not trivial and plays an important role in the theory of crystals and its applications @xcite .",
    "for the bbs , @xmath203 will be used at proposition [ t : prop:1 ] .",
    "there is a simple way to calculate the image of the combinatorial @xmath26 and the energy function without drawing the whole crystal graph , due to nakayashiki and yamada @xcite .",
    "we explain the algorithm along an example : @xmath204 given the left hand side we can obtain the right hand side by using the following diagram : @xmath205 we suppose @xmath206 but to guess the algorithm in the case @xmath207 is easy .",
    "represent @xmath208 by a pile of @xmath209 boxes in which there are @xmath146 dots in the @xmath145th highest box .",
    "do the similar for @xmath210 and then juxtapose these piles of boxes .",
    "repeat the following procedure ( 1)(3 ) to obtain @xmath211 pairs of connected dots .",
    "( all the dots are unconnected initially . )",
    "( 1 ) choose any unconnected dot a in the right pile .",
    "( 2 ) look for its partner b in the left pile which is an unconnected dot in the lowest position but higher than that of a. if there is no such dots , b is chosen among unconnected dots in the lowest position .",
    "( we call the former case _ unwinding _ and the latter",
    "_ winding_. ) ( 3 ) connect a and b. at the end we transfer all the unconnected dots from the left pile to the right one horizontally , yielding the piles for @xmath212 .",
    "the energy function ( [ t : aug1a ] ) is given by @xmath213 for the above example we have @xmath214    the algorithm for @xmath26 and @xmath203 will serve as the most substantial tool to check the examples in  [ t:2 - 2 - 4 ] and  [ t:2 - 3 ] .",
    "the most important property of the combinatorial @xmath26 is :    [ t : ybeq ] the following relation holds on @xmath215 : @xmath216    the relation ( [ t : aug16a ] ) is known as the _ yang - baxter equation_. we depict the relation @xmath194 by @xmath217{$x$ } }      \\put(0,11){\\makebox(0,0)[b]{$y$ } }      \\put(0,-11){\\makebox(0,0)[t]{$\\tilde{y}$ } }      \\put(11,0){\\makebox(0,0)[l]{$\\tilde{x}$ } } \\end{picture } } .\\ ] ]    [ t : aug1 g ] by using the algorithm in  [ t:2 - 2 - 3 ] , one can observe that the maps in the both sides of ( [ t : aug16a ] ) send an element in @xmath218 to the same element in @xmath219 . @xmath220",
    "it is also depicted as the following diagrams , where the lines represent crystals and their crossings stand for the combinatorial @xmath26s .",
    "( see ( [ t : july15a ] ) . )",
    "@xmath221      in this section we introduce a one - dimensional cellular automaton associated with @xmath27 crystals . for a more extensive presentation ,",
    "see @xcite .",
    "for any positive integer @xmath11 , we define a dynamical system on @xmath222 which generalizes the bbs in  1 . in the system one",
    "may regard @xmath223 as a box of capacity one containing a ball with color @xmath22 inside it , and @xmath224 as an empty box of capacity one .",
    "we call our dynamical system an @xmath27 bbs .",
    "it is a cellular automaton equipped with a family of commuting time evolutions @xmath225 defined in the sequel .",
    "let @xmath226 be the combinatorial @xmath26 and define @xmath227 , which is a map from @xmath228 to @xmath229 .",
    "then @xmath230 is a map from @xmath231 to @xmath232 . given an arbitrary @xmath233 let @xmath234 .",
    "it is depicted by @xmath235{$v$ } }      \\put(0,11){\\makebox(0,0)[b]{$b_1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$b_1'$ } }      \\put(11,0){\\makebox(0,0)[l]{$v_1 $ } } \\end{picture } } \\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,10){\\line(0,-1){20 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$b_2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$b_2'$ } }      \\put(11,0){\\makebox(0,0)[l]{$v_2 $ } } \\end{picture } } \\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,10){\\line(0,-1){20 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$$ } }      \\put(0,-11){\\makebox(0,0)[t]{$$ } }      \\put(11,0){\\makebox(0,0)[l]{$\\cdots\\cdots$ } } \\end{picture } } \\quad { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,10){\\line(0,-1){20 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$$ } }      \\put(0,-11){\\makebox(0,0)[t]{$$ } }      \\put(11,0){\\makebox(0,0)[l]{$v_{l-2}$ } } \\end{picture } } \\,\\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,10){\\line(0,-1){20 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$b_{l-1}$ } }      \\put(0,-11){\\makebox(0,0)[t]{$b_{l-1}'$ } }      \\put(11,0){\\makebox(0,0)[l]{$v_{l-1}$ } } \\end{picture } } \\,\\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,10){\\line(0,-1){20 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$b_l$ } }      \\put(0,-11){\\makebox(0,0)[t]{$b_l'$ } }      \\put(11,0){\\makebox(0,0)[l]{$v',$ } } \\end{picture } } \\ ] ] or simply by @xmath236 we assume that the conditions @xmath237 are satisfied in ( [ t : apr20 ] ) , and take @xmath238 then we have @xmath239 and the set @xmath240 coincides with @xmath241 as a set but the order of its elements gets shuffled . under this setting",
    "let @xmath242 and @xmath243 be the maps given by @xmath244 where @xmath245 .",
    "call @xmath246 the @xmath144-th _ time evolution _ and @xmath247 the @xmath144-th _",
    "energy_. we note that every summand of ( [ t : e ] ) vanishes for @xmath248 because of @xmath249 , which ensures the convergence of the energy in the limit @xmath250 .    in what follows",
    "we often use the symbol @xmath251 to indicate that its two sides are transformed to each other by the isomorphism ( composition of combinatorial @xmath26s ) of crystals .",
    "for instance , the relation ( [ t : july15a ] ) is expressed as @xmath252 .",
    "this notation allows one to write the relation ( [ t : t ] ) as a crystal version of `` lax equation '' @xmath253 where @xmath254 .",
    "an element in @xmath139 is regarded as a carrier which can carry at most @xmath144 balls .",
    "( the notion of carrier was introduced in @xcite in the case of @xmath182 . ) in the carrier @xmath255 , the count of balls with label @xmath256 is @xmath146 .",
    "the @xmath257 ( [ t : aug1d ] ) corresponds to a vacant carrier . in ( [ t : apr20 ] ) , a carrier runs from left to right , changing itself as @xmath258 .",
    "although it is nothing but a repeated use of the algorithm in ",
    "[ t:2 - 2 - 3 ] with @xmath259 , one can regard it as a successive loading / unloading processes of balls into / out of the carrier . to illustrate how the carrier works , as well as how the energy ( [ t : e ] ) is evaluated ,",
    "we show a few examples for ( [ t : apr20 ] ) .",
    "[ t : aug31b ] carriers with capacity @xmath260 and @xmath6 .",
    "consider the state at @xmath261 in example [ t : exp2 ] below . by the time evolution",
    "@xmath262 it evolves into the state at @xmath263 as follows .",
    "@xmath264{$1111 $ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1112 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1122 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1222 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$2222 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1222 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1122 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1123 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1223 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$4 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$3 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1224 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1234 $ } } \\end{picture } } \\ , { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$1334 $ } } \\end{picture } } \\ ] ] we added @xmath265 to each vertex which scores @xmath266 to the energy ( [ t : e ] ) . assuming that there are only @xmath9 s to the right of the first row , there are no more scoring vertices .",
    "hence we have @xmath267 . at the vertex with @xmath265",
    ", no winding pairs occur in the algorithm in ",
    "[ t:2 - 2 - 3 ] which makes the value of the energy function ( [ t : aug2b ] ) zero .",
    "if the state were evolved by @xmath268 , then the diagram would be as follows .",
    "@xmath264{$111 $ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$112 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$122 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$222 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$222 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$122 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$112 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$113 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$123 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$4 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$3 $ } }      \\put(11,0){\\makebox(0,0)[l]{$124 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$134 $ } } \\end{picture } } \\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$334 $ } } \\end{picture } } \\ ] ] hence @xmath269 . in the same way",
    ", @xmath270 would change the state as follows .",
    "@xmath264{$11 $ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$12 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$22 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$22 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$22 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$12 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$1 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$11 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )",
    "\\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$13 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$2 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$1 $ } }      \\put(11,0){\\makebox(0,0)[l]{$23 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$4 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$3 $ } }      \\put(11,0){\\makebox(0,0)[l]{$24 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\put(-2.3,-2.3){$\\bullet$ }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$2 $ } }      \\put(11,0){\\makebox(0,0)[l]{$34 $ } } \\end{picture } } \\!\\!\\!\\ ! { \\begin{picture}(40,40)(-20,-20 )      \\put(-10,0){\\line(1,0){20 } }      \\thicklines      \\put(0,9){\\line(0,-1){18 } }      \\put(-11,0){\\makebox(0,0)[r]{$$ } }      \\put(0,11){\\makebox(0,0)[b]{$3 $ } }      \\put(0,-11){\\makebox(0,0)[t]{$4 $ } }      \\put(11,0){\\makebox(0,0)[l]{$33 $ } } \\end{picture } } \\ ] ] hence @xmath271 .",
    "it is easy to see @xmath272 and @xmath273 for @xmath274 .",
    "based on the yang - baxter equation ( [ t : aug16a ] ) , one can prove the commutativity of the time evolutions and the conservation of the energy .",
    "* th.3.2)[t : aug1f ] the following relations are satisfied @xmath275 for any @xmath276 and state @xmath254 .    the @xmath144-th energy @xmath247 is the conserved quantity associated with the time evolution @xmath246 . under the conditions ( [ t : aug1c ] ) we define @xmath277 just by taking a formal limit @xmath278 in ( [ t : aug31a ] )",
    "in fact , @xmath279 holds if and only if @xmath280 is greater than or equal to the maximum amplitude of the solitons contained in @xmath281 .",
    "( this is due to theorem [ k : th : lin ] , especially .",
    "see for how to determine the amplitudes of solitons . )",
    "remark that @xmath282 serves as a shift operator which moves every ball to its right adjacent box .",
    "time evolutions of a state will be illustrated by drawing @xmath283 downwardly . for a state @xmath284 ,",
    "we omit the symbol @xmath285 and write it as @xmath286 .",
    "hence @xmath287 denotes the value at site @xmath145 and time @xmath288 . in what follows we write @xmath289 ( a dot ) instead of @xmath290 for simplicity .",
    "here is an example of the time evolution under @xmath277 :    .... t=3    .................. 322554433.6 ............................. t=4    ..................... 322 ... 5564433 ........................ t=5    ........................ 322 .. 5 .... 654433 .................. ....    the special time evolution @xmath277 admits an elementary algorithm due to takahashi @xcite generalizing the @xmath182 case in  1 , which is a ( non - local ) description without a carrier .",
    "[ t : jun15c ] @xmath291 where @xmath292 is an operator that works as follows .    1 .",
    "exchange the leftmost @xmath293 with its nearest right @xmath294 .",
    "2 .   exchange the leftmost @xmath293 among the rest of the @xmath293 s with its nearest right @xmath294 .",
    "3 .   repeat ( ii ) until all of the @xmath293 s are moved exactly once .",
    "[ t : apr21 ] we apply @xmath295 to the @xmath263 state in example [ t : exp1 ] to obtain the @xmath296 state .    ....",
    "t=4    ..................... 322 ... 5564433 ........................        ..................... 322 ... 55.44336 .......................        ..................... 322 ..... 5443365 ......................        ..................... 322 ..... 5 .. 336544 ....................        ...................... 223 .... 5 .... 654433 .................. t=5    ........................ 322 .. 5 .... 654433 .................. ....    a comparison of our formalism of bbs with that of the vertex models is summarized in the following table .    [ cols=\"^,^,^\",options=\"header \" , ]",
    "in this section we restrict ourselves to @xmath184 case and consider the box - ball system with the periodic boundary condition , which we call periodic bbs for short @xcite .",
    "an example of the time evolutions of this system appeared in  1 . compared with the infinite system ,",
    "there are many interesting features in periodic bbs which come from the finiteness of its phase space . for an attempt to generalize our formalism to the case of periodic @xmath27 bbs ,",
    "see @xcite .",
    "let us recall the formalism in ",
    "[ t:2 - 3 ] which is based on the crystal base theory .",
    "in the case of @xmath184 , the vertex diagrams for combinatorial @xmath26 ( [ t : july15a ] ) on @xmath297 look like those in ( [ k : wtm1 ] ) .",
    "let @xmath11 be the system size and @xmath298 be the number of balls .",
    "consider the diagram ( [ t : apr20 ] ) with not necessarily large @xmath11 .",
    "let @xmath299 to attain the periodic boundary condition we want to find @xmath300 such that @xmath301 .",
    "see ( [ k : hatten ] ) for an example .",
    "in general @xmath302 is a function of @xmath303 and @xmath304 .",
    "hence we can denote it by @xmath305 .",
    "* proposition 2.1)[t : july15d ] for any @xmath306 under the condition @xmath307 , the solution @xmath303 to the equation @xmath308 is unique and is given by @xmath309 , where @xmath310 .",
    "let @xmath311 . by setting @xmath312 in ( [ t : apr20 ] ) we define the time evolution operator @xmath246 by the relation ( [ t : t ] ) .",
    "that is , we have @xmath313 as elements of @xmath314 .",
    "we note that ( [ t : july25a ] ) is a periodic version of the lax equation ( [ t : aug31a ] ) .",
    "in particular @xmath282 yields a cyclic shift by one unit cell to the right .",
    "the evolution by @xmath277 admits the description without carrier given in  1 , which is also equivalent to the  arc rule \" in @xcite .",
    "[ t : aug3e ] in  [ t:5 - 1 ] we restrict ourselves to the case @xmath12 for simplicity .",
    "however , our formalism of the periodic bbs based on the crystal base theory also enables one to treat the case @xmath315 @xcite .",
    "the energy associated with @xmath246 is defined by ( [ t : e ] ) with @xmath316 , where the values of the energy function are given by @xmath317 for the bottom right diagram in ( [ k : wtm1 ] ) and @xmath318 otherwise .    in what follows ,",
    "we write for example @xmath319 simply as @xmath320 .",
    "[ t : july15c ] the time evolutions of @xmath321 by @xmath246 with @xmath322 and @xmath282 :    ....        t=0   222 ... 2 .....   |   222 ... 2 .....   |   222 ... 2 .....        t=1   ... 222.2 ....   |   .. 222 .. 2 ....   |   .222 ... 2 ....        t=2   ...... 2.222 .",
    "|   .... 222.2 ...   |   .. 222 ... 2 ...        t=3   22 ..... 2 ... 2   |   ...... 22.22 .",
    "|   ... 222 ... 2 ..",
    "t=4   .. 222 ... 2 ...   |   2 ....... 2.22   |   .... 222 ... 2 .",
    "t=5   ..... 222.2 ..   |   222 ...... 2 ..   |   ..... 222 ... 2        t=6   2 ....... 2.22   |   .. 222 ..... 2 .",
    "|   2 ..... 222 ... ....",
    "* th.2.2)[t : july15f ] the commutativity @xmath323 , and the conservation of the energy @xmath324 hold .",
    "_ let @xmath325 .",
    "see the following diagram    ( 80,55)(-20,0 )    ( 0,10)(1,0)8 ( 0,20)(1,0)8    ( 11,9)@xmath326 ( 12,19)@xmath326    ( 18,10)(1,0)8 ( 18,20)(1,0)8    ( 4,7)(0,1)5 ( 22,7)(0,1)5    ( 4,17)(0,1)5 ( 22,17)(0,1)5    ( -13,19)@xmath327 ( -10,9)@xmath328    ( 0,24 ) ( 0,14 ) ( 0,4 )    ( 28,9)@xmath329 ( 28,19)@xmath330    ( 32,10)(1,1)10 ( 32,20)(1,-1)10    ( 45,9)@xmath331 ( 45,19)@xmath332 ( -15,14)@xmath333    ( -1.8,35)(1,1)10 ( -1.8,45)(1,-1)10    ( -9,35)@xmath328 ( -13,45)@xmath327    ( 9,35)@xmath331 ( 10,45)@xmath332    ( 20,35)(1,0)8 ( 20,45)(1,0)8    ( 31,34)@xmath326 ( 32,44)@xmath326    ( 38,35)(1,0)8 ( 38,45)(1,0)8    ( 24,32.5)(0,1)4.7 ( 42,32.5)(0,1)4.7    ( 24,42.8)(0,1)5 ( 42,42.8)(0,1)5    ( 20,50 ) ( 20,39 ) ( 20,29.3 )    ( 47,35)@xmath331 ( 47,45)@xmath332    ( 65,9 ) ,    where the yang - baxter relation is used to move the symbol `` @xmath334 '' for the @xmath26 from the left to the right .",
    "consider what @xmath335 and @xmath336 should be .",
    "since @xmath325 we have @xmath337 and @xmath338 . hence by proposition [ t : july15d ] the equality @xmath339 holds . thus @xmath340 . then again by proposition [ t : july15d ] the equality @xmath341 holds , and we have @xmath342 .",
    "hence @xmath343 . for",
    "a proof of the conservation of the energy , see ( * ? ? ?",
    "* th.2.2 ) .",
    "@xmath344      here we construct action - angle variables of the periodic bbs , solve the initial value problem and present an explicit formula for @xmath345-soliton solutions in terms of tropical riemann theta function .",
    "these results were firstly obtained in @xcite .",
    "we are going to introduce the action variable of a state .",
    "it is equivalent to the list of amplitudes of solitons contained in a state , which is the conserved quantity .",
    "recall that a state @xmath346 is highest if the condition ( [ k : hp1 ] ) is satisfied .",
    "it is elementary to show that any state in @xmath347 can be made highest by a cyclic shift .",
    "namely , there exist a highest state @xmath348 and @xmath349 such that @xmath350 .",
    "given @xmath281 , such a pair @xmath351 is not necessarily unique .",
    "nevertheless one can show    ( * ? ? ?",
    "* proposition 3.3 ) ( i ) let @xmath352 be the configuration of the rigged configuration @xmath353 .",
    "( namely , @xmath352 is the young diagram denoted by @xmath354 in  [ subsec : kkr ] . )",
    "then @xmath352 is independent of the not necessarily unique choice of @xmath351 .",
    "+ ( ii ) the energy @xmath247 of @xmath281 is related to @xmath352 via @xmath355    due to ( i ) , the young diagram @xmath352 is uniquely determined from a state @xmath281 .",
    "we denote it by @xmath356 and call it _ action variable _ of @xmath281 .",
    "due to ( ii ) , it is a conserved quantity , namely , @xmath357 holds for any @xmath144 .",
    "let @xmath358 be the number of length @xmath359 rows in the young diagram @xmath356 .",
    "then ( [ k : mue ] ) is rephrased by the same formula as ( [ t : jun10a ] ) : @xmath360 in the context of the kkr bijection , @xmath361 is the number of length @xmath359 strings . on the other hand , @xmath361 is the number of amplitude @xmath359 solitons contained in @xmath281 .",
    "this is another manifestation of the _ soliton / string correspondence _ , which was observed earlier also in bbs on infinite lattice in ( [ k :",
    "we introduce the _ isolevel set _ of states characterized by the action variable @xmath362 for any young diagram @xmath352 such that @xmath363 .    [",
    "k : ex : pp ] take @xmath364 .",
    "it can be expressed as cyclic shifts of highest paths as @xmath365 , where @xmath366 , @xmath367 and @xmath368 .",
    "their image by the kkr map @xmath369 is given by @xmath370 they all lead to @xmath371 .",
    "[ k : ex : ils ] the isolevel sets @xmath372 with @xmath373 are given by @xmath374      let us observe example [ k : ex : pp ] . recall that in the infinite system , the time evolution @xmath282 is the uniform shift of all the riggings by @xmath9 .",
    "see ( [ k : rr ] ) .",
    "if we adopt the same feature also in the periodic bbs , the following identification should be made for the  periodic version \" of the rigged configuration :    @xmath375    here we have attached the vacancy @xmath376 on the left of the block of length @xmath145 strings .",
    "the riggings are no longer bounded by it .",
    "the basic idea in constructing angle variables is to introduce an appropriate equivalence relation among such extended riggings .",
    "we proceed to the precise definition .",
    "consider the isolevel set @xmath377 with @xmath378 . here",
    "@xmath379 are the length of the rows in @xmath352 and @xmath380 is the multiplicity of @xmath381 here and in  [",
    "i : pbbs - toda ] will denote the amplitude of solitons .",
    "they should not be confused with the ones in  [ sec : baa ] like @xmath382 or in ( [ k : hp1 ] ) and ( [ k : hp3 ] ) . ] .",
    "for instance @xmath383 in ( [ k : mit ] ) .",
    "we set @xmath384 where the latter is the vacancy @xmath385 ( [ k : paj ] ) with @xmath386 . recall that a rigged configuration @xmath387 is",
    "the data in which the vicinity of the block of length @xmath145 strings looks as @xmath388 we extend the integer sequence @xmath389 from @xmath390 to @xmath391 by imposing the _ quasi - periodicity _ as @xmath392 the resulting sequence will be denoted by @xmath393 and called a _ quasi - periodic extension _ of the rigging @xmath394 .",
    "( indices will be suppressed as @xmath395 . ) by the definition , @xmath396 ranges over the set @xmath397 where @xmath11-dependence enter ( [ k : jtm0 ] ) via @xmath376 ( [ k : ipj ] ) .",
    "now we introduce the equivalence relation on @xmath398 . for @xmath399 , define @xmath400 by @xmath401 let @xmath402 be the abelian multiplicative group generated by @xmath403 . define @xmath404 which is the set of equivalence classes of @xmath398 under @xmath402 .",
    "the image @xmath405\\in { \\mathcal j}_l(\\mu)$ ] of @xmath406 will also be written as @xmath396 for simplicity unless emphasis is preferable .",
    "elements of @xmath407 are called _",
    "angle variables_.    angle variables are also depicted as ( [ k : zurg ] ) . actually , infinitely many such diagrams that are transformable by @xmath402 all correspond to a single angle variable .",
    "for instance in ( [ k : mit ] ) , if the leftmost one is @xmath405 $ ] , then the middle and the rightmost ones are @xmath408 $ ] and @xmath409 $ ] , respectively .",
    "we introduce the time evolution @xmath410 on @xmath398 by @xmath411 and denote its induced action on @xmath407 also by @xmath246 .",
    "obviously , @xmath246 is linear and commutative .",
    "in particular we use the abbreviation @xmath412 for the uniform shift .",
    "readers are highly recommended to check that @xmath413 , which implies that any angle variable is invariant under @xmath414 as it should .",
    "let us assign an angle variable to each state in the isolevel set @xmath377 .",
    "namely , we are going to construct a _ direct scattering map _ @xmath415 .",
    "we do this by suitably adapting the kkr map @xmath369 to the periodic setting .",
    "let @xmath416 be the subset of @xmath377 consisting of highest paths .",
    "we consider the following scheme : @xmath417 .",
    "\\end{split}\\ ] ] first arrow : pick any @xmath351 such that @xmath418 .",
    "second arrow : apply the kkr map @xmath419 and quasi - periodically extend the so obtained rigging @xmath394 to @xmath396 followed by a uniform shift by @xmath420 .",
    "third arrow : take the image in @xmath407 ( identify by @xmath421 . in order to make sense of the scheme ( [ k : eq : pj ] ) as a definition of the map @xmath422 , the non - uniqueness in the first arrow must be canceled in the identification in the third arrow .",
    "it was indeed the case in the example ( [ k : mit ] ) .",
    "here comes the main result of this section .",
    "* th.3.11)[k : th : pmain ] @xmath422 is well - defined , bijective and makes the following diagram commutative .",
    "@xmath423 here @xmath246 on the left and right sides are defined by ( [ t : july25a ] ) and ( [ k : tmjt ] ) , respectively .",
    "the commutative diagram ( [ k : pbbscd ] ) is the periodic version of ( [ k : cd ] ) . according to theorem [ k : th : pmain ] , the nonlinear time evolution on @xmath377 is transformed to a straight motion on @xmath407 .",
    "this is a characteristic feature in finite dimensional integrable systems , where the dynamics is linearized , via what is called the eigenvector map , on jacobian variety ( or more precisely , abelian variety ) . in our setting here , the modified kkr map @xmath422 and the set of angle variables @xmath407 play the analogous roles to them . in ",
    "6.3 we will study this feature with tropical geometry , and see that @xmath407 corresponds to the lattice points of some tropical abelian variety .    theorem [ k : th : pmain ] led to the first complete solution of the initial value problem of the periodic bbs .",
    "it is obtained by going along the commutative diagram ( [ k : pbbscd ] ) as @xmath424 . the variety of time evolutions @xmath225 is reflected in the corresponding velocity vectors in ( [ k : tmjt ] ) .",
    "[ k : ex : sks ] let us derive a time evolution of the length @xmath425 path @xmath281 in example [ k : ex : pp ] : @xmath426 the angle variable of @xmath281 has been obtained in ( [ k : mit ] ) . using the leftmost representation , we find @xmath427 the vacancies are exhibited only in the leftmost diagram .",
    "the rightmost diagram is a rigged configuration and corresponds to the highest path @xmath428 .",
    "therefore the image of the rightmost angle variable by @xmath429 is @xmath430 giving the rhs of ( [ k : kotae ] ) .",
    "as this example indicates , to compute the inverse image @xmath431 , one first finds a representative of the angle variable @xmath396 of the form ( rigged configuration)@xmath432 with some @xmath433 .",
    "namely , one transforms @xmath396 into @xmath434 with an appropriate element @xmath435 so that @xmath436 becomes the quasi - periodic extention of some rigged configuration @xmath437 .",
    "then one applies the kkr map @xmath438 to get a highest path @xmath439 as @xmath440 .",
    "finally , the inverse image is obtained as @xmath441 .",
    "the fact that these procedures are always possible and the result is unique is guaranteed by theorem [ k : th : pmain ] .",
    "we note that the solution of the initial value problem based on the procedure called 10-elimination @xcite is equivalent @xcite to the preceding solution @xcite explained here .",
    "let us present an explicit formula of the path @xmath442 that corresponds to the given angle variable @xmath443 .",
    "this is a combinatorial analogue of the jacobi inversion problem , and the result is indeed expressed in terms of tropical riemann theta function . for simplicity",
    "we restrict ourselves to the case @xmath444 for all @xmath445 .",
    "( see @xcite for the general case , where the tropical riemann theta function with rational characteristics is involved . )",
    "we retain the notation ( [ k : ipj ] ) , where the latter reduces to @xmath446 .",
    "the angle variable @xmath447 can be presented simply as a @xmath448-dimensional vector @xmath449 with @xmath450 since the other components are specified as @xmath451 by the quasi - periodicity .",
    "it is easy to translate the identification by ( [ k : slide ] ) into this representation of @xmath396 , leading to the simple description @xmath452    the @xmath453 integer matrix @xmath454 is positive definite and has the origin in the study of bethe equation at @xmath116 @xcite .",
    "we introduce the tropical riemann theta function ( definition [ i : def : theta ] ) @xmath455 in which the @xmath454 is built in as the period matrix .",
    "we further introduce the @xmath448-dimensional vectors @xmath456 where the latter is the velocity corresponding to @xmath246 ( [ k : tmjt ] ) .",
    "* th.3.3)[k : th : udt ] the state @xmath457 corresponding to the angle variable @xmath458 is expressed as @xmath459 @xmath460    the time evolution by @xmath246 is attained just by replacing @xmath396 with @xmath461 .",
    "thanks to the quasi - periodicity ( [ i : theta - quasi ] ) , @xmath462 is invariant under the change @xmath463 .",
    "the invariance @xmath464 is due to @xmath465 .",
    "the matrix @xmath454 will be related to the period matrix @xmath466 of the tropical spectral curve of the tropical periodic toda lattice at proposition [ i : prop : omega - f ] .",
    "let us discuss the structure of the isolevel set of the periodic bbs .",
    "recall the definition of the isolevel set @xmath467 in ( [ k : ils ] ) .",
    "we use the notations @xmath468 in  [ subsec : general - sol ] .",
    "in contrast to the tropicalization of the periodic discrete toda lattice in  [ i : sec : ptoda ] where the isolevel set @xmath469 given by ( [ i : tc ] ) is isomorphic to a real torus @xmath470 , the set @xmath467 is a finite set . as we have shown in theorem",
    "[ k : th : pmain ] the set @xmath467 is identified with the set @xmath471 which was defined as a quotient set ( [ k : jde ] ) .",
    "the set @xmath467 can be regarded as a graph in the sense of graph theory .",
    "let @xmath472 be the abelian multiplicative group generated by @xmath225 .",
    "then @xmath472 acts on the isolevel set @xmath467 .",
    "if one represents the elements of @xmath467 by nodes and the actions of the time evolutions by arrows , then one has a colored oriented graph .",
    "the graph for @xmath467 has usually several connected components . from the viewpoint of the group action",
    "we say that the isolevel set @xmath467 decomposes into @xmath472-orbits .",
    "to begin with let us illustrate a few simple examples .",
    "first let us assume @xmath473 for all @xmath474 .",
    "then we have @xmath475 ( [ k : jfred ] ) which is the set of all integer points on the torus @xmath476 .",
    "we shall call @xmath477 itself a ( @xmath448-dimensional ) torus for short .",
    "[ t : july25b ] the isolevel set @xmath478 is depicted as follows .",
    "@xmath479 here the actions of @xmath282 and @xmath270 are represented by thin and thick arrows respectively .",
    "note that @xmath480 .",
    "the velocity vectors ( [ k : phvec ] ) are given by @xmath481 and @xmath482 which reflects the relation @xmath483 on this isolevel set .",
    "now we consider the case with @xmath484 where the graph for @xmath467 has indeed several connected components .",
    "let @xmath485 be the @xmath472-orbit of @xmath486 .",
    "[ t : aug4a ] the graph for the isolevel set @xmath487 is depicted as follows .",
    "@xmath488 here the actions of @xmath282 are represented by arrows .",
    "it is not necessary to consider @xmath489 because they effectively coincide with @xmath282 in the present case .",
    "the graph has two connected components , as @xmath490 .",
    "each connected component has the structure of a one - dimensional torus , @xmath491 and @xmath492 .",
    "the isolevel set in example [ t : aug4a ] has two connected components with different sizes .",
    "the difference reflects the _",
    "internal symmetry_. if the state has a larger internal symmetry , then it belongs to a smaller connected component .",
    "let us briefly discuss this notion here .",
    "the internal symmetry of a bbs state is represented by an integer vector @xmath493 .",
    "we demonstrate how one can read off @xmath494 from @xmath281 .",
    "given @xmath486 there exist a highest path @xmath495 and @xmath496 such that @xmath497 . by the kkr map in  [ subsec : kkr ]",
    "a rigged configuration is constructed from @xmath495 as @xmath498 where @xmath499 .",
    "we adopt the quasi - periodic extension for the angle variables ( [ k : quasi ] ) .",
    "now the integer @xmath500 is defined as the largest common divisor of @xmath501 and @xmath376 such that @xmath502 neither the action of @xmath400 in ( [ k : slide ] ) nor that of @xmath246 in ( [ k : tmjt ] ) changes the relation ( [ t : july27d ] ) .",
    "therefore theorem [ k : th : pmain ] ensures that the internal symmetry of @xmath281 is uniquely determined from the above procedure even if there is non - unique choice of @xmath495 .",
    "[ t : july27a ] take @xmath503 in example [ t : july27b ] .",
    "they are already highest . by the kkr map we obtain the following rigged configurations .",
    "@xmath504 in this example one has @xmath505 , hence @xmath506 .",
    "note that the configuration implies @xmath507 which imposes @xmath508 . while @xmath509 for @xmath510 , no such symmetry exists for @xmath281 .",
    "hence one has @xmath511 for @xmath281 , and @xmath512 for @xmath510 .",
    "[ t : july27e ] take @xmath513 with @xmath514 which is already highest . by the kkr map we obtain the following rigged configuration .",
    "@xmath515 here we have @xmath516 and @xmath517 , hence @xmath518 .",
    "observe that @xmath519 which implies @xmath520 .",
    "no such symmetry exists for @xmath521 ( and @xmath522 ) .",
    "hence one has @xmath523 .",
    "let @xmath524 then we have @xmath525 .",
    "so far the states of periodic bbs are classified as @xmath526 now we study the structure of a single connected component @xmath527 .",
    "let @xmath528 be a @xmath529 matrix defined as @xmath530 this matrix @xmath528 is a generalization of @xmath454 in ( [ k : jfred ] ) .",
    "then the structure of a connected component is stated as follows .",
    "* th.2)[t : july28e ] every connected component of the isolevel set @xmath467 has the structure of a @xmath448-dimensional torus @xmath531 .",
    "the time evolution @xmath246 is realized as the straight motion with a constant velocity vector @xmath532 on the torus .",
    "this result may be viewed as an ultradiscrete analogue of the classical arnold - liouville theorem @xcite .",
    "[ t : july27b ] take @xmath503 .",
    "they belong to two distinct connected components of the level set @xmath533 .",
    "the @xmath472-orbits @xmath534 and @xmath535 have the structure of two - dimensional tori @xmath536 and @xmath537 respectively , where @xmath538 @xmath539 and @xmath540 @xmath541 . they are depicted as follows . @xmath542 the nodes within and on the edges of the parallelograms represent the states of periodic bbs which belong to each of the connected components .",
    "every pair of the parallel edges of each parallelogram should be identified .",
    "thin and thick arrows represent the velocity vectors @xmath543 and @xmath544 respectively .",
    "the time evolution @xmath246 is invertible and the isolevel set @xmath467 is a finite set .",
    "therefore every path @xmath486 possesses the property @xmath545 for some integer @xmath546 .",
    "we say any such integer a _ period _ of @xmath281 .",
    "the minimum period is called the _ fundamental period _ of @xmath281 and denoted by @xmath547 .",
    "every period is a multiple of the fundamental period .",
    "a formula for the fundamental period under any @xmath246 was established in @xcite . here",
    "we show a derivation of the formula based on proposition [ t : july28e ] .",
    "note that @xmath547 is common to all the states in one connected component .",
    "hence it is determined by the action variable @xmath352 and the internal symmetry @xmath494 .    to avoid double indices we denote by @xmath548 the @xmath381-th column of the matrix @xmath454 ( [ t : july26bx ] ) , hence @xmath549 . for any @xmath550",
    "we define @xmath551 = ( \\boldsymbol{f}_1 , \\ldots , \\boldsymbol{f}_{i-1},\\boldsymbol{b } , \\boldsymbol{f}_{i+1 } , \\ldots , \\boldsymbol{f}_g).\\ ] ] let @xmath552 be a state of the periodic bbs , and @xmath553 .",
    "we define the least common multiple of nonzero rational numbers @xmath554 as @xmath555 for instance we let @xmath556 be @xmath6 rather than @xmath557 .",
    "now we have    ( * ? ? ?",
    "* th.4.9)[t : aug4b ] @xmath558 } , \\ldots , \\frac{\\det f } {   { \\gamma}_{i_g } \\det f_{g}[\\boldsymbol{h}_l ] } \\right),\\ ] ] where we exclude any entries of lcm such that @xmath559 = 0 $ ] .",
    "_ proof . _",
    "proposition [ t : july28e ] implies that @xmath547 is defined as the smallest positive integer @xmath345 such that the following linear equation has an integer solution @xmath560 : @xmath561 by demanding all these conditions on the expression @xmath562/\\det f$ ] of the solution to ( [ t : aug11b ] ) , one obtains the formula ( [ t : july28d ] ) .",
    "@xmath344    take @xmath503 in example [ t : july27b ]",
    ". then @xmath563 @xmath564 and @xmath565 & =   \\det \\begin{pmatrix } 1 & 2 \\\\ 1 & 6   \\end{pmatrix } = 4 , \\quad \\det f_2 [ \\boldsymbol{h}_1 ] =   \\det \\begin{pmatrix } 8 & 1 \\\\ 4 & 1   \\end{pmatrix } = 4 , \\nonumber\\\\ \\det f_1 [ \\boldsymbol{h}_2 ] & =   \\det \\begin{pmatrix } 1 & 2 \\\\ 2 & 6   \\end{pmatrix } = 2 , \\quad \\det f_2 [ \\boldsymbol{h}_2 ] =   \\det \\begin{pmatrix } 8 & 1 \\\\ 4 & 2   \\end{pmatrix } = 12 , \\nonumber\\\\ \\det f_1 [ \\boldsymbol{h}_3 ] & =   \\det \\begin{pmatrix } 1 & 2 \\\\ 3 & 6   \\end{pmatrix } = 0 , \\quad \\det f_2 [ \\boldsymbol{h}_3 ] =   \\det \\begin{pmatrix } 8 & 1 \\\\ 4 & 3   \\end{pmatrix } = 20.\\end{aligned}\\ ] ] hence @xmath566 for @xmath510 one has @xmath567 .",
    "hence @xmath568 for instance , one can deduce @xmath569 and @xmath570 .",
    "one can easily check these results by using the figures in ( [ t : aug4 g ] ) .",
    "when the internal symmetry is trivial , i.e. @xmath571 , proposition [ t : aug4b ] reduces to the result in @xcite .",
    "the number of the elements of the isolevel set @xmath467 is expressed by the formula @xcite @xmath572 where the @xmath529 matrix @xmath454 is defined as ( [ t : july26bx ] ) . while the former expression ( [ t : july26a ] ) was first obtained in the context of bethe ansatz (",
    "* th.3.5 ) , the latter one ( [ t : july26c ] ) was originally found as a formula for the cardinality @xmath573 and proved by elementary combinatorial arguments ( * ? ? ?",
    "* prop.2.2 ) .",
    "their equivalence is due to the relation @xmath574 .",
    "we demonstrate the decomposition of the isolevel set @xmath467 into connected components from the viewpoint of their cardinality .",
    "first we consider the case @xmath575 for all @xmath445 .",
    "then by ( [ t : july26a ] ) one has @xmath576 .",
    "actually this is a consequence of @xmath577 and ( [ k : jfred ] ) . in this case",
    "@xmath467 itself is a connected graph .",
    "next we consider general cases with @xmath578 .",
    "let @xmath579 be a pair of positive integers and @xmath580 any common divisor of @xmath59 and @xmath281 .",
    "we define @xmath581 where @xmath582 runs over all the common divisors of @xmath59 and @xmath281 that is a multiple of @xmath580 . here",
    "@xmath352 is the mbius function in number theory defined by @xmath583 ( this @xmath352 should not be confused with the young diagram . ) by the mbius inversion formula we have @xmath584 where @xmath580 runs over all the common divisors of @xmath59 and @xmath281 . by ( [ t : july26a ] ) and",
    "( [ t : july26f ] ) we obtain @xmath585 where the numbers @xmath586 turn out to be integers as a result of certain cyclic group actions @xcite .",
    "this formula is a consequence of the following fact .",
    "@xcite[t : july26i ] the @xmath587 in ( [ t : july26h ] ) is the multiplicity of the tori in @xmath467 .",
    "that is , the following relation is satisfied : @xmath588    [ t : july26j ] take @xmath589 with @xmath590 then we have @xmath591 and @xmath592 .",
    "the matrix @xmath454 is given by @xmath593 possible internal symmetries are @xmath594 , and @xmath595 . by using ( [ t : july26d ] ) and",
    "( [ t : july26h ] ) one has @xmath596 the configuration @xmath352 is common to that in example [ t : july27e ] .",
    "hence we can deduce that @xmath597 for @xmath513 .",
    "tropical geometry is the algebraic geometry of the min - plus algebra @xmath598 .",
    "we introduce the basic notion of the theory of tropical curves , following @xcite .      a _ tropical polynomial _",
    "@xmath599 of one variable @xmath600 is written as @xmath601 where @xmath125 is a finite subset of @xmath602 .",
    "one can regard @xmath599 as the tropicalization of a polynomial @xmath603 $ ] with the transformation @xmath604 and @xmath605 . in the same manner ,",
    "a tropical polynomial @xmath606 of two variables @xmath600 and @xmath607 is written as @xmath608    very roughly speaking , a _",
    "tropical curve _ is a finite graph ( i.e. a graph with a finite number of vertices and edges ) with a _",
    "metric structure_. in the following we only consider affine tropical curves in @xmath609 given by a tropical polynomial of two variables .",
    "fix a finite set @xmath125 and a tropical polynomial @xmath606 of two variables .",
    "the tropical curve @xmath610 given by @xmath606 is defined as @xmath611    see figure [ i : fig : trop - examples ] for examples of tropical curves , where ( i ) is a `` _ tropical line _ '' given by @xmath612 and ( ii ) is a `` _ tropical elliptic curve _ '' given by @xmath613 .",
    "the meaning of `` indifferentiable '' is seen at ( i ) as follows : let @xmath614 , @xmath615 and @xmath616 be three open domains divided by the tropical line .",
    "we write @xmath617 , @xmath618 and @xmath619 for the three boundaries , and @xmath53 for their intersection point @xmath620 .",
    "the function @xmath621 is `` differentiable '' at @xmath622 , namely we have @xmath623 in @xmath614 , @xmath624 in @xmath615 and @xmath625 in @xmath616 .",
    "the function @xmath606 is `` indifferentiable '' at @xmath626 where at least two of @xmath600 , @xmath607 and @xmath9 become the minimum .",
    "for instance , @xmath627 on @xmath628 , @xmath629 on @xmath630 , and @xmath631 at @xmath53 .",
    "= 0.8 mm    ( 100,65)(0,-5 )    ( 5,55)(i )    ( 5,30)(1,0)55 ( 58,26)@xmath600 ( 30,5)(0,1)55 ( 26,58)@xmath607 ( 26,31)@xmath632    ( 38,30)(0,-1)1 ( 37,26)@xmath9 ( 30,38)(-1,0)1 ( 26,37)@xmath9    ( 8,8)(1,1)30 ( 38,38)(1,0)20 ( 38,38)(0,1)20    ( 48,48)@xmath614 ( 38,18)@xmath615 ( 18,40)@xmath616 ( 34,38)@xmath53 ( 39,58)@xmath619 ( 58,35)@xmath617 ( 4,10)@xmath618    ( 72,55)(ii )    ( 80,30)(1,0)66 ( 85,-5)(0,1)65 ( 144,26)@xmath600 ( 87,58)@xmath607 ( 81,31)@xmath632    ( 118,27)@xmath7 ( 102,27)@xmath6 ( 85,38)(-1,0)1 ( 81,37)@xmath9 ( 85,14)(-1,0)1 ( 79,13)@xmath633    ( 101,14)(-1,-1)20 ( 101,14)(1,0)8 ( 109,14)(1,1)8 ( 109,14)(0,-1)16 ( 117,22)(1,0)16 ( 117,22)(0,1)16 ( 117,38)(1,1)8 ( 125,46)(1,0)16 ( 125,46)(0,1)12 ( 117,38)(-1,0)16 ( 101,38)(-1,1)20 ( 101,38)(0,-1)24    ( 97,14)@xmath23 ( 107,16)@xmath126 ( 116,18)@xmath634    the edges in tropical curves have rational slopes , and we associate each vertex with a _ primitive tangent vector _ which is a tangent vector given by a pair of coprime integers .",
    "( if one of the integers is zero , then let another be @xmath635 . )",
    "the primitive tangent vector is uniquely determined up to sign . for two vectors @xmath636 and @xmath637",
    ", we set @xmath638 .",
    "the following is the definitions of a _ smooth _ tropical curve and its _ genus_.    [ i : def : smoothness ] the tropical curve @xmath639 is smooth if the following two conditions hold :    * all vertices in @xmath610 are @xmath8-valent . * for each @xmath8-valent vertex @xmath640 ,",
    "let @xmath641 be the primitive tangent vectors which are outgoing from @xmath640 .",
    "then these vectors satisfy @xmath642 and @xmath643 for @xmath644 .    when a tropical curve @xmath610 is smooth , the _ genus _ of @xmath610 is dim@xmath645 .",
    "a smooth tropical curve is equipped with the _ metric structure _ as follows :    assume @xmath610 is a smooth tropical curve . let @xmath646 be the set of edges in @xmath610 , and let @xmath647 be the primitive tangent vector of @xmath648 .",
    "we define the length of edges @xmath649 by @xmath650 where @xmath651 is any norm in @xmath609 .",
    "both of the two tropical curves at figure [ i : fig : trop - examples ] are smooth .",
    "for instance , in ( ii ) , the @xmath8-valent vertex @xmath23 has outgoing primitive tangent vectors @xmath652 , @xmath653 and @xmath654 , and the conditions ( a ) and ( b ) in definition [ i : def : smoothness ] are satisfied .",
    "the genera of the curves ( i ) and ( ii ) are respectively @xmath77 and @xmath9 .",
    "the lengths of the edges are @xmath655 in ( ii ) , for example .",
    "we omit the metric structure for non - smooth tropical curves for simplicity .",
    "see @xcite .",
    "let @xmath610 be a smooth tropical curve whose genus @xmath448 is not zero .",
    "we fix @xmath448 generators @xmath656 of the fundamental group of @xmath610 ( i.e. generators of the cycles in @xmath610 ) .",
    "to describe the abelian integral on @xmath610 , we need some preparations : for each @xmath648 , we fix a linear map @xmath657 $ ] ( where we have only two choices ) . for @xmath658 , we define a _ fundamental path _ @xmath281 by @xmath659 . for a fundamental path @xmath660 ,",
    "we define @xmath661 \\subset [ 0,1]$ ] by @xmath662   =   \\begin{cases } [ \\alpha_e(p_1 ) , \\alpha_e(p_2 ) ] & \\text { if } \\alpha_e(p_1 ) \\leq \\alpha_e(p_2 ) \\\\ [ \\alpha_e(p_2 ) , \\alpha_e(p_1 ) ] & \\text { if } \\alpha_e(p_1 ) >",
    "\\alpha_e(p_2 ) \\end{cases}.\\ ] ] for two fundamental paths @xmath663 and @xmath664 , we define the addition rule only when @xmath665 and @xmath666 or @xmath667 , by @xmath668 we define a _ set of paths _",
    "@xmath669 on @xmath610 by @xmath670 then @xmath669 is an infinite dimensional vector space . for two fundamental paths @xmath663 and @xmath664 , we define @xmath671 & \\text { if } e = e ' \\end{cases } , \\\\ & l(p \\cap p ' ) =   \\begin{cases }   0 & \\text { if } e \\neq e ' \\\\ \\bigl|[p_1,p_2 ; \\alpha_e ] \\cap[p_1',p_2';\\alpha_e]\\bigr|",
    "\\cdot   l(e ) & \\text { if } e = e ' \\end{cases } , \\end{split}\\end{aligned}\\ ] ] and define a _",
    "bilinear form _ of fundamental paths by @xmath672 this naturally gives the bilinear form @xmath673 on @xmath669 .",
    "briefly speaking , the bilinear form of two paths @xmath281 and @xmath674 on @xmath610 is `` the length of the common part of @xmath281 and @xmath674 with the sign depending on the directions of the two paths '' .",
    "see figure [ i : fig : trop - example2 ] for the smooth tropical curve @xmath610 given by @xmath675 the genus of @xmath610 is @xmath6 , and we fix the basis @xmath676 and @xmath677 of the fundamental group of @xmath610 as depicted . the bilinear forms of @xmath676 and @xmath677 take the values as @xmath678 let us demonstrate how to compute @xmath679 : the common part of @xmath676 and @xmath677 is the edge @xmath680 .",
    "we set @xmath681 and @xmath682 which are fundamental paths on @xmath610 .",
    "then we have @xmath683 and @xmath684 , and the result follows .",
    "= 0.8 mm    ( 100,70)(-20,0 )    ( 10,10)(1,0)50 ( 58,6)@xmath600 ( 20,0)(0,1)66 ( 16,64)@xmath607    ( 20,10)(-2,-3)8 ( 20,10)(1,1)8 ( 28,18)(2,1)16 ( 44,26)(1,0)15 ( 20,54)(-2,3)8 ( 20,54)(1,-1)8 ( 28,46)(2,-1)16 ( 44,38)(1,0)15 ( 20,10)(0,1)44 ( 28,18)(0,1)28 ( 44,26)(0,1)12    ( 24,32)(4,25 ) ( 25.1,36)@xmath685 ( 22,31)@xmath686 ( 36,32)(12,15 ) ( 40.7,31)@xmath685 ( 34,31)@xmath687    ( 15,53)@xmath688 ( 16,11)@xmath632 ( 28,10)(0,-1)1 ( 27.5,6)@xmath9 ( 44,10)(0,-1)1 ( 43.5,6)@xmath8 ( 20,18)(-1,0)1 ( 16,17)@xmath6 ( 20,46)(-1,0)1 ( 16,45)@xmath689    ( 27.5,47)@xmath53 ( 27.5,15)@xmath690    now we introduce the abelian integral and the tropical jacobian variety for @xmath610 :    fix @xmath691 .",
    "the _ abelian integral _",
    "@xmath692 is given by @xmath693 where we choose a path @xmath694 from @xmath695 to @xmath53 .",
    "the map @xmath696 induces the map from a set of divisors @xmath697 on @xmath610 to @xmath698 @xmath699 where @xmath125 is a finite set and @xmath700 .",
    "[ i : def : omega ] the period matrix @xmath701 of @xmath610 is given by @xmath702 the tropical jacobian variety @xmath703 of @xmath610 is the @xmath448-dimensional real torus given by @xmath704    the matrix @xmath701 is symmetric and positive definite by definition , and @xmath703 is a tropical analogue of jacobian variety . by removing all infinite edges of @xmath610 , we obtain the maximal compact subgraph @xmath705 of @xmath610 . though the map @xmath696 depends on a choice of the path @xmath694 , the induced map @xmath706 does not depend on the choice and becomes injective .",
    "when @xmath707 , @xmath696 induces the isomorphism from @xmath705 to @xmath703 .",
    "the tropical curve of genus @xmath9 depicted at figure [ i : fig : trop - examples ] ( ii ) has the period matrix @xmath708 , and the jacobian variety @xmath709 . as for the tropical curve of genus @xmath6 depicted at figure [ i : fig : trop - example2 ] , the period matrix and the jacobian variety are respectively obtained as @xmath710      fix a positive integer @xmath448 and a symmetric and positive definite matrix @xmath711 .",
    "( here the matrix @xmath701 is not always a period matrix of some tropical curve . )",
    "[ i : def : theta ] the _ tropical riemann theta function _",
    "@xmath712 of @xmath713 is defined by @xmath714 we call the @xmath448-dimensional real torus given by @xmath715 the _ principally polarized tropical abelian variety_. ( if @xmath701 is the period matrix of a tropical curve @xmath610 , then @xmath716 is nothing but the tropical jacobian variety @xmath703 . )",
    "it is easy to see the following :    the function @xmath717 satisfies the quasi - periodicity : @xmath718    recall the riemann s theta function : @xmath719 where @xmath720 is symmetric and @xmath721 is positive definite . the function @xmath722 satisfies the periodicity and quasi - periodicity : @xmath723 for @xmath724 .",
    "remark that only the quasi - periodicity remains in the tropical case .",
    "we briefly present the results on the general solution for the tropicalization of the @xmath345-periodic toda lattice ( trop - ptoda ) following @xcite .",
    "this section offers not only an application of the tropical geometry , but also a preparation for the next section where we study the periodic bbs with the similar description to ",
    "[ i : sec : todabbs ] .",
    "we emphasize that the independent variables of the trop - p toda in this section are in @xmath725 , whereas in the next section their integer parts ( i.e. ultradiscretization ) will be studied .",
    "the trop - ptoda is given by the piecewise - linear evolution equation : @xmath726 on the phase space @xmath727 ( in @xcite , this system is called the ultradiscrete periodic toda lattice , where `` ultradiscrete '' means ",
    "tropical \" in our present terminology , hence the naming ",
    "trop p - toda \" here . )",
    "2.1 ) eq . is obtained as the tropicalization of the discrete toda lattice and with a periodic boundary condition @xmath728 , @xmath729 and the condition @xmath730 so that the tropicalization of @xmath731 is zero .    _ proof . _",
    "first we show that under @xmath345-periodic boundary condition , and are expressed as @xmath732 with a common denominator , the rhs of ( [ t : aug3b ] ) is rewritten as @xmath733 on the other hand , are equivalent to and under the substitution of variables @xmath734 .",
    "hence the birational @xmath26 given by ( [ t : eq : rpp ] ) is also equivalent to the @xmath735-periodic discrete toda lattice equation . from ( [ t : eq : rpp ] ) with the above variable substitution we obtain @xmath736 which becomes ( [ t : aug3c ] ) by the replacements @xmath737 .",
    "next we apply tropicalization to and .",
    "since the numerator of the second term in ( [ t : aug3b ] ) is a constant with respect to @xmath288 , the tropicalization of this numerator is constantly zero under the given condition on @xmath738 .",
    "thus and yield . @xmath344    the system has @xmath739 conserved quantities @xmath740 given by the tropical polynomials on @xmath741 as @xmath742 fix @xmath743 and define the isolevel set @xmath744 by @xmath745 and the affine tropical curve @xmath746 given by the indifferentiable points of @xmath747 we call @xmath746 the spectral curve of the trop - ptoda . for the derivation of the conserved quantities and @xmath606 , see ( * ? ? ?",
    "* ,  3.2 ) .",
    "we set @xmath11 and @xmath748 , @xmath749 for @xmath750 as @xmath751 the curve @xmath746 is smooth if and only if @xmath752 and @xmath753 for @xmath754 .",
    "the genus of the smooth @xmath746 is @xmath755 .",
    "see figure 3 for @xmath746 , where we set @xmath756 for simplicity .",
    "assume @xmath746 is smooth , and write @xmath448 for the genus , @xmath757 .",
    "fix the basis @xmath758 of the fundamental group @xmath759 as figure 3 . in what follows",
    "we denote by @xmath466 the period matrix of @xmath746 .",
    "the matrix @xmath760 is explicitly written as @xmath761 and we get the tropical jacobian variety of @xmath746 as @xmath762 .    [",
    "i : fig : curvetoda ] = 0.8 mm    ( 140,78)(-25,3 )    ( 20,10)(1,0)70 ( 0,10)(1,0)20 ( 91,9)@xmath600    ( 15,74)@xmath11 ( 20,6)@xmath77 ( 28,10)(0,-1)1 ( 27,6)@xmath763 ( 36,10)(0,-1)1 ( 35,6)@xmath764 ( 45,6)@xmath326 ( 56,10)(0,-1)1 ( 55,6)@xmath765 ( 68,10)(0,-1)1 ( 67,6)@xmath766    ( 20,10)(-1,-2)4 ( 20,10)(4,5)8 ( 28,20)(1,1)8 ( 36,28)(2,1)10 ( 53,35)(5,1)15 ( 68,38)(1,0)15    ( 20,75)(-1,2)4 ( 20,75)(4,-5)8 ( 28,65)(1,-1)8 ( 36,57)(2,-1)10 ( 53,50)(5,-1)15 ( 68,47)(1,0)15    ( 20,10)(0,1)65 ( 28,20)(0,1)45 ( 36,28)(0,1)29 ( 56,35.5)(0,1)14 ( 68,38)(0,1)9 ( 46,42)@xmath326    ( 24,42)(4,45 ) ( 26,32)(0,1)3 ( 22,29)@xmath767 ( 32,42)(4,27 ) ( 34,37)(0,1)3 ( 30,34)@xmath687 ( 62,42)(8,8 ) ( 66,41)(0,1)3 ( 61,41)@xmath768    the general solution for the trop - ptoda is obtained by the following theorem :    [ i : th : ptoda ] when @xmath746 is smooth , we have the following : + ( i ) ( * ? ? ?",
    "3.5 ) fix @xmath769 and define @xmath770 , where @xmath771 the general solution for the trop - ptoda is given by @xmath772 ( ii ) ( * ? ? ?",
    "1.3 ) this solution induces the isomorphism @xmath773 .",
    "in particular , the time evolution of the trop - ptoda is linearized on @xmath774 , whose velocity is @xmath775 .",
    "the case of @xmath776 . in this simplest case",
    "we can explicitly construct the isomorphism @xmath777 : @xmath778 the solution induces the inverse map of @xmath779 .",
    "let us consider the case of @xmath780 , where @xmath746 is depicted as    = 1.0 mm    ( 60,55)(-10,-12 )    ( 3,5)(1,0)60 ( 58,1)@xmath600 ( 15,-8)(0,1)50 ( 11,40)@xmath607 ( 16,2)@xmath632    ( 16,29)@xmath781 ( 15,20)(-1,0)1 ( 12,19)@xmath782 ( 15,14)(-1,0)1 ( 12,13)@xmath8 ( 33,5)(0,-1)1 ( 32,1)@xmath8    ( 23,17)(12,10 ) ( 22,11.2)@xmath783 ( 21,16)@xmath784    ( 15,5)(2,1)18 ( 33,14)(1,0)25 ( 33,14)(0,1)6 ( 15,29)(2,-1)18 ( 33,20)(1,0)25 ( 15,29)(-1,1)10 ( 15,5)(-1,-1)10 ( 15,5)(0,1)24    the following is an example of linearization , where one sees @xmath785 .",
    "we set @xmath786 :    @xmath787 \\texttt{t=0 }   & & ( 3,4,0,1 ) & & ( 0,7 ) & & 9 \\\\ \\texttt{t=1 } & & ( 3,1,0,4 ) & & ( 0,4 ) & & 12 \\\\ \\texttt{t=2 } & & ( 1,0,2,5 ) & & ( 0,1 ) & & 15 \\\\ \\texttt{t=3 } & & ( 0,2,3,3 ) & & ( 2,2 ) & & 2 \\equiv 18 \\\\ \\texttt{t=4 } & & ( 0,5,3,0 ) & & ( 3,5 ) & & 5 \\equiv 21 \\end{matrix}\\end{aligned}\\ ] ]    for general @xmath788 , the isomorphism @xmath789 is regarded as a composition of the injective map @xmath790 and the abelian integral @xmath696 , but @xmath777 becomes too complicated .",
    "the case of @xmath791 and @xmath792 .",
    "we have @xmath793 and @xmath794 .",
    "observe that the velocity in @xmath774 is indeed @xmath775 .",
    "@xmath795    \\texttt{t=0 } & ( 2 , 1 , 0 , 9 , 4 ,   3 ) & & ( 29 , -3 ) \\\\    \\texttt{t=1 } & ( 1 , 0 , 2 , 11 , 3 , 2 ) & & ( 31 , -1 ) \\\\    \\texttt{t=2 } & ( 0 , 2 , 4 , 10 , 2 , 1 ) & & ( 10 , -10 ) \\equiv ( 33,1 ) \\\\     \\texttt{t=3 } & ( 1 , 5 , 4 , 8 , 1 , 0 ) & & ( 12 , -8 ) \\\\    \\texttt{t=4 } & ( 2 , 7 , 4 , 5 , 0 ,   1 ) & & ( 14,-6 ) \\\\     \\texttt{t=5 } & ( 2 , 9 , 4 , 1 , 0 , 3 ) & & ( 16 , -4 ) \\\\ \\end{matrix }   \\end{aligned}\\ ] ]    theorem [ i : th : ptoda ] corresponds to a tropical version of @xcite where the general solution for the periodic toda lattice is studied by using ( complex ) algebraic geometry .",
    "when @xmath746 is not smooth , neither the structure of @xmath744 nor the solution has been clarified yet .",
    "it requires a further study on a degeneration of the period matrix @xmath466 and jacobian variety @xmath774 .    in @xcite , @xmath796s and @xmath466",
    "were derived by directly ultradiscretizing abelian integrals on the spectral curve of the periodic discrete toda lattice . by combining this strategy and tropical curve theory , theorem [ i : th : ptoda](i ) was proved in @xcite .      as a periodic version of  [ i : sec : todabbs ] , we have an embedding of the states of periodic bbs in those of the trop - ptoda @xcite . differently from the case of the original bbs ,",
    "this embedding is not always consistent with the time evolution of the trop - ptoda .",
    "we revisit the results in  [ k : ss : nsol ] with this embedding and tropical geometry .",
    "let @xmath797 be the isolevel set of the @xmath11-periodic bbs with the configuration @xmath798 .",
    "( recall we assume @xmath799 . ) set @xmath800 in ",
    "[ i : sec : ptoda ] , and fix @xmath801 at as @xmath802 then the embedding @xmath803 is defined as follows : among @xmath11 boxes , fix `` the leftmost box '' ( it can be any box ) and do the following procedure :    1 .",
    "if the leftmost box is occupied , then set @xmath804(the number of the first consecutive balls from the left ) , otherwise set @xmath805 .",
    "2 .   set @xmath806(the number of @xmath145-th consecutive empty boxes from the left ) for @xmath807 .",
    "if @xmath808 , set @xmath809(the number of the @xmath145-th consecutive balls from the left ) , otherwise set @xmath809(the number of the ( @xmath810)-th consecutive balls from the left ) for @xmath811 .    then we obtain @xmath812 note that we have @xmath813 or @xmath814 .",
    "[ i : ex : pbbs - toda ] the case of @xmath815 , @xmath816 and @xmath791 .",
    "we have @xmath817 .",
    "the evolution of the periodic bbs in @xmath797 is at the left , and its embedding in @xmath818 is in the center .",
    "the evolution of the trop - ptoda in @xmath744 is written at the right .    ....",
    "t=0    122211211    ( 0,1,3,2,1,2 )    ( 0,1,3,2,1,2 )        t=1    111122122    ( 0,4,2,1,2,0 )    ( 0,4,2,1,2,0 )        t=2    222111211    ( 3,3,1,2,0,0 )    ( 3,3,1,2,0,0 )        t=3    111222121    ( 0,3,3,1,1,1 )    ( 3,1,1,1,0,3 )   ....    the time evolution does not agree with the embedding at @xmath261 .",
    "let @xmath277 and @xmath819 be the time evolution operators in @xmath797 and @xmath744 respectively . as one observes in the above example ,",
    "in general the following diagram is _ not _ commutative : @xmath820 i.e. @xmath821 .",
    "4.4)[i : prop : t_cs ] let @xmath822 be a shift operator on @xmath744 given by @xmath823 we write @xmath824 for the quotient space of @xmath744 with respect to the action of @xmath822 .",
    "then the following diagram is commutative : @xmath825 the induced map @xmath826 gives one - to - one correspondence between @xmath797 and @xmath827 .",
    "in example [ i : ex : pbbs - toda ] , we have @xmath828 at @xmath261 , which indicates the commutativity of the diagram .",
    "now we come to the final stage of this section .",
    "set @xmath829 , thus gives with @xmath830 and @xmath831 .",
    "then the spectral curve @xmath746 is smooth , and the isolevel set @xmath744 is isomorphic with @xmath774 ( theorem [ i : th : ptoda ] ) . on the other hand , we have the important result on the periodic bbs , the one - to - one correspondence between @xmath797 and @xmath832 due to the map @xmath422 ( theorems [ k : th : pmain ] , [ k : th : udt ] ) .",
    "these results and proposition [ i : prop : t_cs ] are summarized as follows , which gives a tropical geometrical explanation for @xmath832 :    [ i : prop : omega - f ] ( i ) ( * ? ? ?",
    "* lemma 2.5 ) we keep the setting of @xmath774 and @xmath832 .",
    "let @xmath833 be the principally polarized tropical abelian variety where the matrix @xmath454 is defined by .",
    "let @xmath834 be a shift operator on @xmath774 given by @xmath835 \\mapsto [ ( z_1+l , z_2,\\ldots , z_g)].\\ ] ] then we have @xmath836 where @xmath837 is the quotient space of @xmath774 with respect to @xmath834 .",
    "+ ( ii ) ( * ? ? ?",
    "* eq .  ( 4.5 ) ) we have the following commutative diagram : @xmath838    we illustrate proposition [ i : prop : omega - f ] ( i ) by using example [ i : ex : pbbs - toda ] .",
    "the period matrices @xmath466 and @xmath454 of @xmath774 and @xmath839 are respectively @xmath840 by changing the basis of @xmath759 from @xmath841 to @xmath842 , the period matrix @xmath466 is transformed into @xmath843 ( of course we have @xmath844 . ) the shift operator @xmath834 acts on @xmath845 as @xmath846 \\mapsto [ ( z_1 + 9,z_2 + 9)]$ ] , and we have @xmath847 .",
    "this indicates @xmath848 .",
    "the authors thank miyuki takagi for valuable advice .",
    "r.  i. is partially supported by grant - in - aid for young scientists ( b ) ( 22740111 ) .",
    "a.  k. and t.  t. are partially supported by grand - in - aid for scientific research jsps no .",
    "195403931 and 22540241 .",
    "10              r.  j.  baxter , exactly solved models in statistical mechanics ( dover , 2008 ) .",
    "a.  berenstein and d.  kazhdan , geometric and unipotent crystals , gafa 2000 ( tel aviv , 1999 ) , geom .",
    "2000 , special volume , part i , 188236 .",
    "g.  hatayama , a.  kuniba and t.  takagi , simple algorithm for factorized dynamics of the @xmath852-automaton .",
    "symmetries and integrability of difference equations ( tokyo , 2000 ) , j. phys .",
    "48 , 1069710705 ( 2001 ) .",
    "v.  e.  korepin , n.  m.  bogoliubov and a.  g.  izergin , quantum inverse scattering method and correlation functions , cambridge monographs on mathematical physics ( cambridge university press , cambridge , 1993 ) .",
    "a. kuniba , m. okado , t. takagi and y. yamada , geometric crystal and tropical @xmath26 for @xmath855 , int .",
    "notices * 48 * ( 2003 ) 25652620 .",
    "a. kuniba , m. okado , r. sakamoto , t. takagi and y. yamada , crystal interpretation of kerov - kirillov - reshetikhin bijection , nucl .",
    "b[pm ] , 740 , 299327 ( 2006 ) .",
    "a. kuniba , m. okado , t. takagi and y. yamada , tropical @xmath26 and tau functions , commun .",
    "* 245 * ( 2004 ) 491517 .",
    "a. kuniba , m. okado and y. yamada , box - ball system with reflecting end , j. nonlin .",
    "* 12 * ( 2005 ) 475507 .",
    "a.  kuniba and t.  takagi , bethe ansatz , inverse scattering transform and tropical riemann theta function in a periodic soliton cellular automaton for @xmath856 , sigma symmetry integrability geom .",
    "methods appl .",
    "6 , paper 013 , 52 pp ( 2010 ) .",
    "y. yamada , a birational representation of weyl group , combinatorial @xmath26-matrix and discrete toda equation , in  physics and combinatorics 2000 \" , eds .",
    "a. n. kirillov and n. liskova ( world scientific , 2001 ) 305319 ."
  ],
  "abstract_text": [
    "<S> the box - ball system is an integrable cellular automaton on one dimensional lattice . </S>",
    "<S> it arises from either quantum or classical integrable systems by the procedures called crystallization and ultradiscretization , respectively . </S>",
    "<S> the double origin of the integrability has endowed the box - ball system with a variety of aspects related to yang - baxter integrable models in statistical mechanics , crystal base theory in quantum groups , combinatorial bethe ansatz , geometric crystals , classical theory of solitons , tau functions , inverse scattering method , action - angle variables and invariant tori in completely integrable systems , spectral curves , tropical geometry and so forth . in this review article </S>",
    "<S> , we demonstrate these integrable structures of the box - ball system and its generalizations based on the developments in the last two decades .    _ dedicated to the memory of professor miki wadati@xmath0 _ </S>"
  ]
}