{
  "article_text": [
    "constrained random graph processes provide both an interesting class of random graphs models and a natural source for constructions in graph theory .",
    "although the dependencies introduced by the constraints make such processes difficult to analyse , the evidence to date suggests that they are particularly useful for producing graphs of interest for certain extremal problems .",
    "here we consider the triangle - free random graph process , which is defined by sequentially adding edges , starting with the empty graph , chosen uniformly at random subject to the constraint that no triangle is formed .",
    "formally , let @xmath4 be the empty graph on @xmath0 vertices . at stage @xmath5",
    "we have a graph @xmath6 ; we denote its edge set by @xmath7 , and let @xmath8 be the set of pairs @xmath9 that are _ open _ , in that @xmath10 has no triangle .",
    "we obtain @xmath11 from @xmath6 by adding a uniformly random pair from @xmath8 .",
    "this process was introduced by bollobs and erds ( see @xcite ) , and first analysed by erds , suen and winkler @xcite , using a differential equations method introduced by ruciski and wormald @xcite for the analysis of the constrained graph process known as the ` d - process ' . one motivation for their work was that their analysis of the triangle - free process led to the best lower bound on the ramsey number @xmath1 known at that time .",
    "the ramsey number @xmath12 is the least number @xmath0 such that any graph on @xmath0 vertices contains a complete graph with @xmath13 vertices or an independent set with @xmath14 vertices . in general , very little is known about these numbers , even approximately .",
    "the upper bound @xmath15 was obtained by ajtai , komls and szemerdi @xcite , but for many years the best known lower bound , due to erds @xcite , was @xmath16 .",
    "the order of magnitude was finally determined by kim @xcite , who showed that @xmath17 .",
    "he employed a semi - random construction that is loosely related to the triangle - free process , thus leaving open the question of whether the triangle - free process itself achieves this bound ; this was conjectured by spencer @xcite and proved by bohman @xcite .",
    "there is now a large literature on the general @xmath18-free process , obtained by replacing ` triangle ' by any fixed graph @xmath18 in the definition ; see @xcite .",
    "however , the theory is still very much in its early stages : we conjectured that our lower bound for @xmath18 strictly 2-balanced , given in @xcite , gives the correct order of magnitude for the length of the process , but so far this has only been proved for some special graphs .",
    "in this paper we specialise to the triangle - free process , where we can now give an asymptotically optimal analysis .",
    "our improvement on previous analyses of this process exploits the self - correcting nature of key statistics of the process . for a treatment of self - correction in a simpler context",
    "see @xcite .",
    "the methods that we use to establish self - correction of the triangle - free process build on the ideas used recently by bohman , frieze and lubetzky @xcite for an analysis of the triangle - removal process . furthermore , the results of this paper have also been obtained independently and simultaneously by fiz pontiveros , griffiths and morris ; their proof also exploits self - correction , but is different to ours in some important ways .",
    "let @xmath19 be the maximal triangle - free graph at which the triangle - free process terminates .",
    "[ edges ] with high probability , every vertex of @xmath19 has degree @xmath20 .",
    "thus the number of edges in @xmath19 is @xmath21 with high probability .",
    "we also obtain the following bound on the size of any independent set in @xmath19 .",
    "[ indep ] with high probability , @xmath19 has independence number at most @xmath22 .",
    "an immediate consequence is the following new lower bound on ramsey numbers .",
    "the best known upper bound is @xmath23 , due to shearer @xcite .",
    "[ ramsey ] @xmath24 .",
    "these results are predicted by a simple heuristic .",
    "the graph @xmath25 that we get after @xmath5 steps of the triangle - free process should closely resemble the erds - rnyi random graph @xmath26 with @xmath27 , with the exception that @xmath26 should have many triangles while @xmath25 has none .",
    "in addition to theorems  [ edges ]  and  [ indep ] we show that this heuristic extends to all small subgraph counts ; in particular , we answer the question of which subgraphs appear in @xmath19 .",
    "suppose @xmath18 is a graph with at least @xmath28 vertices .",
    "the _ @xmath29-density _ of @xmath18 is @xmath30 .",
    "the _ maximum @xmath29-density _ @xmath31 of @xmath18 is the maximum of @xmath32 over subgraphs @xmath33 of @xmath18 with at least @xmath28 vertices .",
    "[ subgraphs ] let @xmath18 be a triangle - free graph with at least @xmath28 vertices .",
    "a.   if @xmath34",
    "then @xmath35 . b.   if @xmath36 then @xmath37 .",
    "thus , the small subgraphs that are likely to appear in @xmath38 are exactly the same as the triangle - free subgraphs that appear in the corresponding @xmath39 .    note that the lower bound on @xmath40 given by the triangle - free process is non - constructive ; for an explicit construction of a triangle - free graph on @xmath41 vertices with independence number less than @xmath14 see alon @xcite .",
    "alon , ben - shimon and krivelevich @xcite gave a construction that can be applied to @xmath19 to produce a _",
    "ramsey @xmath42 graph , at the cost of a worse constant in the lower bound on @xmath40 .",
    "the bulk of this paper is occupied with the analysis required for the lower bound in theorem [ edges ] . to prove this , we in fact prove much more generally that we can ` track ' several ensembles of ` extension variables ' for most of the process ; this is formalised as theorem [ good ] .",
    "the proof of theorem [ good ] is outlined in the next section , then implemented over the four following sections . in section 3",
    "we present some coupling and union bound estimates that are needed throughout the paper , and also prove theorem [ subgraphs ] , assuming theorem [ good ] . in sections 4 , 5 and 6 , we prove theorem [ good ] via a self - correcting analysis of three ensembles of random variables .",
    "section  7 is mostly occupied by the proof of theorem [ indep ] ; it also contains the proof of the upper bound in theorem [ edges ] , which is similar and easier .",
    "we conclude with some brief remarks in section  8 .",
    "in this section we outline the proof of the lower bound in theorem [ edges ] . we are guided throughout by the heuristic that @xmath25 should resemble @xmath26 with @xmath43 . before proceeding with the outline of the proof we mention a consequence of this heuristic that is central to the entire argument .",
    "we introduce a continuous time that scales as @xmath44 note that @xmath45 .",
    "we define @xmath46 to be the number of open _ ordered _ pairs in @xmath47 .",
    "( so @xmath48 . )",
    "this variable is crucial to our understanding of the process .",
    "we have @xmath49 , and the process ends exactly when @xmath50 .",
    "how do we expect @xmath51 to evolve ?",
    "if @xmath47 resembles @xmath26 then for any pair @xmath52 we should have @xmath53 we set @xmath54 and expect to have @xmath55 for most of the evolution of the process .",
    "this is exactly what we prove .",
    "we use dynamic concentration inequalities for a carefully chosen ensemble of random variables associated with the process .",
    "we aim to show @xmath56 for all variables @xmath57 in the ensemble , for some smooth function @xmath58 , which we refer to as the _ scaling _ of @xmath57 . here",
    "@xmath59 denotes the value of @xmath57 after @xmath5 steps of the process , and we scale time as @xmath60 . for each @xmath57",
    "we define a _ tracking variable _ @xmath61 and aim to show that @xmath62 satisfies @xmath63 , for some error functions @xmath64 .",
    "we use @xmath61 rather than @xmath58 so that we can isolate variations in @xmath57 from variations in other variables that have an impact on @xmath57 .",
    "the improvement to earlier analysis of the process comes from ` self - correction ' , i.e.  the mean - reverting properties of the system of variables .",
    "we take @xmath65 , where we think of @xmath66 as the ` main error term ' and @xmath67 as the ` martingale deviation term ' .",
    "we usually have @xmath68 , but there are some exceptions when @xmath14 is small and hence @xmath66 is too small .",
    "we require @xmath69 to be ` approximately non - increasing ' in @xmath14 , in that @xmath70 for all @xmath71 .",
    "we define the _ critical window _ @xmath72.\\ ] ] we aim to prove the _ trend hypothesis _ : @xmath73 is a supermartingale when @xmath74 .. the situation where the difference variable is negative can be treated in exactly the same way with reversed signs .",
    "we also remark that we need to ` freeze ' @xmath75 if @xmath57 becomes ` bad ' , as explained below . ]",
    "the trend hypothesis will follow from the _ variation equation _ for @xmath64 , which balances the changes in @xmath76 and @xmath77 .",
    "since errors can transfer from one variable to another , each variation equation is a differential inequality that can involve many of the error functions .",
    "we aim to track the process up to the time @xmath78 more precisely , we will define a stopping time @xmath79 such that if @xmath80 then every ` good ' variable in our ensemble satisfies the required estimates at step @xmath5 ( the distinction between ` good ' and ` bad ' variables is discussed in section  2.4 ) .",
    "setting @xmath81 , it will suffice to show that @xmath82 with high probability .",
    "if @xmath83 then it will follow that there exists @xmath84 and a ` good ' variable @xmath57 such that @xmath85 is too large .",
    "in this situation @xmath76 enters @xmath86 from below at some step @xmath87 , stays in @xmath88 for @xmath89 then goes above @xmath90 at step @xmath91 . during this time @xmath75",
    "is a supermartingale , with @xmath92 and @xmath93 , so we have an increase of at least @xmath94 against the drift of the supermartingale .",
    "then we use freedman s martingale inequality @xcite , which is as follows .    [",
    "freedman ] suppose @xmath95 is a supermartingale with respect to the filtration @xmath96 .",
    "suppose that @xmath97 for all @xmath5 and define @xmath98 .",
    "then for any @xmath99 we have @xmath100    to apply freedman s inequality , we estimate @xmath101 since @xmath69 is approximately non - increasing ( unless @xmath57 is a vertex degree variable ) , it suffices to have @xmath102 to get the required bound , with subpolynomial failure probability .",
    "we refer to this as the _ boundedness hypothesis_.    the lower bound of theorem  [ edges ] follows from an application of the union bound to the union of these events over all variables we consider and all points @xmath103 when such a variable might enter the critical interval .",
    "thus , after establishing the trend and boundedness hypotheses for all variables , we may conclude that @xmath63 for all @xmath104 with high probability .",
    "in other words , we can conclude @xmath82 with high probability .",
    "all definitions are with respect to the graph @xmath6 .",
    "sometimes we use a variable name to also denote the set that it counts , e.g.  @xmath105 is the number of ordered open pairs , and also denotes the set of ordered open pairs .",
    "we usually omit @xmath106 and @xmath107 from our notation , e.g.  @xmath108 means @xmath105 and @xmath109 means @xmath110 .",
    "we use capital letters for variable names and the corresponding lower case letter for the scaling .",
    "we express scalings using the ( approximate ) edge density and open pair density ; these are respectively @xmath111    the next most important variable in our analysis , after the variable @xmath112 defined above , is the variable @xmath113 which , for a fixed pair of vertices @xmath114 , is the number of vertices @xmath115 such that @xmath116 is an open pair and @xmath117 is an edge .",
    "it is natural that @xmath118 should play an important role in this analysis , as when the pair @xmath114 is added as an edge , the number of open edges that become closed is exactly @xmath119 .",
    "the motivation for introducing the ensembles of variables defined below is as follows : control of the global variables is needed to get good control of @xmath120 , control of the stacking variables is needed to get good control of @xmath113 , and controllable variables play a crucial role in our analysis of the stacking variables .",
    "we note that the proof of the fact that we can track the controllable variables ( up to the precision needed for our purposes ) is relatively short . in a certain sense",
    ", our results on controllable variables can be viewed as a triangle - free process analog of the concentration on subgraph extensions that follows from kim - vu polynomial concentration @xcite .",
    "( we remark in passing that a similar analog should hold for the triangle removal process , and the introduction of this idea would simplify the analysis of the triangle removal process recently given by bohman , frieze and lubetzky @xcite . )",
    "we begin with the variable that we are most interested in understanding : the number of open pairs .",
    "we also include two other variables that will allow us to maintain precise control on the number of open pairs .    * @xmath121 is the number of ordered open pairs .",
    "the scaling is @xmath122 .",
    "* @xmath123 is the number of ordered triples with @xmath28 open pairs .",
    "the scaling is @xmath124 .",
    "* @xmath125 is the number of ordered triples @xmath126 where @xmath127 is an edge and @xmath128 , @xmath129 are open pairs .",
    "the scaling is @xmath130 .",
    "we refer to @xmath108 , @xmath123 and @xmath125 as _ global _ variables .      in order to understand the evolution of @xmath108 , @xmath123 and @xmath125",
    ", we introduce a large collection of _ stacking variables_. the basic building blocks for the stacking variables are the following one - vertex extensions , which are defined for every ordered pair @xmath114 .    * @xmath131 is the number of vertices @xmath115 such that @xmath116 and @xmath117 are open pairs .",
    "the scaling is @xmath132 .",
    "* @xmath133 is the number of vertices @xmath115 such that @xmath116 is an open pair and @xmath117 is an edge .",
    "the scaling is @xmath134 .",
    "we also need information about the degree and the open degree of a vertex .",
    "* @xmath135 is the _ open degree _ of @xmath136 , defined as the number of vertices @xmath137 such that @xmath138 is open .",
    "the scaling is @xmath139 .",
    "* @xmath140 is the _ degree _ of @xmath136 , defined as the number of vertices @xmath137 such that @xmath138 is an edge .",
    "the scaling is @xmath141 .",
    "we refer to @xmath133 and @xmath131 as _ codegree variables _ , to @xmath142 as a _ degree variable _ , and to @xmath135 as an _ open degree variable_.    a _ stacking variable _ is an iterated extension variable , in which each iteration adds an extension from the collection @xmath143 , where @xmath144 is the vertex added in the previous extension , and @xmath9 is an open pair in the previous extension .",
    "we will only track a subset of the collection of the stacking variables , the @xmath145-bounded stacking variables , which are defined below .",
    "let @xmath146 be the set of sequences @xmath147 such that if @xmath148 occurs then it only does so as the last symbol of @xmath149 .",
    "for any @xmath150 and pair of vertices @xmath114 ( such that @xmath151 ) we define @xmath152 according to the following rules .",
    "each element of @xmath149 indicates the next extension to be added and specifies an open pair in this extension to be the next _ rung _ in the stacking variable .",
    "we initiate by letting @xmath153 be the _ active rung _ and letting @xmath154 be the _ last vertex_. suppose we have constructed @xmath155 steps of our stacking variable and that we have an active rung @xmath9 with last vertex @xmath144 . if @xmath156 then the next step is an @xmath157 extension with the single open pair in this extension the next rung .",
    "if @xmath158 then the next step is an @xmath159 extension and then there is no active rung : the variable terminates here .",
    "now suppose @xmath160 ; that is , suppose @xmath161 indicates an @xmath162 or @xmath163 extension on the active rung .",
    "the superscript indicates the _ direction _ of this extension .",
    "for @xmath163 it determines whether we add @xmath164 or @xmath165 , and the new open pair becomes the active rung .",
    "for @xmath162 it determines which of the two new open pairs becomes the active rung . in both cases",
    ", a superscript of o ( for ` outer ' ) indicates that the new active rung is incident with the last vertex , @xmath144 , while a superscript of i ( for ` inner ' ) indicates that the next active rung is not incident with @xmath144 ( i.e.  it is incident with @xmath166 ) .",
    "we say that an open pair of @xmath149 that is not a rung is a _",
    "stringer open pair_. note that each occurrence of @xmath162 in @xmath167 gives one stringer open pair .",
    "edges of @xmath168 are called _ stringer edges_. note that any rung is a cutset of @xmath149 .",
    "the simplest stacking variables are those of length @xmath169 , namely @xmath170 , @xmath171 , @xmath172 and @xmath173 .",
    "the last example illustrates the general phenomenon that when @xmath174 we obtain an extension based at the single vertex @xmath154 , which does not depend on @xmath136 . while we could denote this variable more simply by @xmath175 , it is convenient to have a unified notation for stacking variables that allows the base of the extension to have one or two vertices .",
    "formally , we can view @xmath176 as counting the number of injections @xmath177 $ ] such that @xmath178 , @xmath179 and @xmath180 is a vertex that plays the role in the extension defined by @xmath161 for @xmath181 .",
    "fix two rungs @xmath182 and @xmath183 , where @xmath184 and none of @xmath185 are @xmath186 or @xmath148 .",
    "let @xmath187 $ ] be the portion of @xmath188 induced by the set of vertices @xmath189 .",
    "we call this structure the _ triangular ladder _ of @xmath149 cut off by @xmath9 and @xmath127 .",
    "note that any stacking variable is a concatenation of some number of triangular ladders and paths of open pairs , possibly ending with a pendant edge .",
    "the concept of direction may be clarified by the following pictorial representation .",
    "we visualise @xmath187 $ ] as a horizontal strip of two rows , ` top ' and ` bottom ' , where @xmath166 and @xmath144 are the leftmost elements of the two rows , and @xmath190 and @xmath191 are the rightmost two elements of the two rows ( in some order ) .",
    "the remaining vertices are assigned so that rungs have one vertex in each row , whereas stringers lie within rows ( this uniquely defines the assignment ) .",
    "our convention for superscripts in @xmath162 and @xmath163 corresponds to walking between the rows and describing whether the new vertex is added on the same row or the opposite row ; thus @xmath79 indicates that the new vertex is added to the same row , and @xmath186 that it is added to the other row .",
    "conversely , any such drawing determines a unique order @xmath192 of vertices , which we call the _ stacking order _ , from which we can reconstruct @xmath149 .",
    "figure 1 illustrates a stacking variable corresponding to @xmath193 ( thick lines represent edges and thin lines represent open pairs ) .    .",
    "thick lines represent edges and thin lines represent open pairs . ]    to define the @xmath145-bounded stacking variables that play a key role in the proof , we need some additional terminology . consider a triangular ladder @xmath194 $ ] .",
    "we say that @xmath195 is a _ turning point _ in this ladder if the superscript of @xmath196 is @xmath186 .",
    "note that if @xmath197 is a turning point then it is in at least two rungs .",
    "the open pairs containing @xmath195 are @xmath198 and @xmath199 for @xmath200 , for some @xmath201 and @xmath202 , which are respectively the previous and next turning points ( or non - existent if there are no such turning points )",
    ". if @xmath195 is in the top row ( for example ) then @xmath203 and @xmath204 , @xmath200 are consecutive along the bottom row .",
    "we define three weights associated with @xmath205 as follows .",
    "the _ 1-weight _",
    "@xmath206 is the number of positions in @xmath167 that contain the symbols @xmath186 or @xmath148 .",
    "the _ 2-weight _ @xmath207 is the number of positions in @xmath167 that contain the symbols @xmath208 or @xmath209 .",
    "the _ weight _",
    "@xmath210 is @xmath211 .",
    "@xmath145-fan _ in @xmath167 is a sequence of @xmath212 consecutive positions of @xmath167 whose entries are in the set @xmath213 note that an @xmath145-fan corresponds to a sequence of @xmath214 vertices in the same row of a triangular ladder ( flipping the position of the last element of the sequence if the last element is @xmath215 ) .",
    "we say that a stacking variable @xmath149 is _",
    "@xmath145-bounded _ if it satisfies the following conditions .",
    "( note that the first of these is a condition on any @xmath205 which we copy here for ease of reference . )",
    "a.   if @xmath148 occurs in @xmath149 then it is the last symbol , b.   the sequences @xmath216 and @xmath217 do not appear in @xmath167 in any pair of positions other than the last two positions , c.   @xmath218 , d.   if @xmath219 then the last symbol in @xmath167 is @xmath186 , @xmath148 , @xmath208 or @xmath220 , and e.   @xmath168 does not contain an @xmath145-fan",
    ".    we let @xmath221 be the set of @xmath145-bounded stacking variables .",
    "note that such a variable has length at most @xmath222 .",
    "finally , we formulate a very general condition under which we have some control on a variable .",
    "suppose @xmath223 is a graph , @xmath224 is a spanning subgraph of @xmath223 and @xmath225 .",
    "we refer to @xmath226 as an _ extension_. suppose that @xmath227 $ ] is an injective mapping .",
    "we define the _ extension variables _ @xmath228 to be the number of injective maps @xmath229 $ ] such that    a.   @xmath230 restricts to @xmath231 on @xmath232 , b.   @xmath233 for every @xmath234 not contained in @xmath232 , and c.   @xmath235 for every @xmath236 not contained in @xmath232 .",
    "we call @xmath237 the _ underlying graph pair _ of @xmath238 .",
    "we introduce the abbreviations @xmath239 , @xmath240 } , \\quad \\text { and } \\quad o(v ) = ( e_{\\gamma}-e_j ) - ( e_{{\\gamma}[a]}-e_{j[a]}).\\ ] ] the _ scaling _ is @xmath241 .",
    "we expect @xmath242 , provided there is no subextension that is ` sparse ' , in that it has scaling much smaller than @xmath169 .",
    "given @xmath243 we write @xmath244 } - e_{j[b ] } } \\hat{q}^{(e_{{\\gamma}[b ' ] } - e_{j[b ' ] } ) - ( e_{{\\gamma}[b ] } - e_{j[b]})}.\\ ] ] for example , @xmath245 .",
    "note that if @xmath246 we have @xmath247 .",
    "note also that the letter ` s ' is used for scalings and stacking variables , but there is no possibility for confusion , as the use is determined by the form of the superscript .",
    "let @xmath248 .",
    "we say that @xmath57 is _ controllable at time @xmath249 _ if @xmath250 ( i.e.  at least one pair is open ) and for @xmath251 and @xmath252 we have @xmath253 where @xmath254 is a fixed global parameter that is sufficiently small given @xmath255 .",
    "we note in passing that this condition is essentially identical to the condition needed to prove concentration of subgraphs counts in @xmath39 using kim - vu polynomial concentration @xcite .",
    "( see lemma  [ kim - vu ] below . )",
    "we say that @xmath57 is _ controllable _ if it is controllable at time @xmath169 .",
    "recall that each variable @xmath57 has a tracking variable @xmath256 and we track the difference @xmath257 .",
    "we do this to isolate variations in @xmath57 from other variations in @xmath6 .",
    "the tracking variables are defined as follows .",
    "for the global variables we take @xmath258 if @xmath57 is a one - vertex extension with @xmath190 edges and @xmath191 open pairs we take @xmath259 that is , we set @xmath260 and @xmath261 and @xmath262 .    for the stacking variable @xmath263 with @xmath264 we have two cases , depending on the form of @xmath167 . if @xmath265 or @xmath266 we write @xmath267 , where @xmath268 is the last element of @xmath149 .",
    "then @xmath269    now suppose @xmath270 and @xmath271 .",
    "we say that the open pair @xmath272 and the pair @xmath273 ( which can be an edge or an open pair ) are _ partner pairs_. in this case we need to modify the tracking variable to take account of the rule concerning @xmath216 and @xmath217 in the definition of @xmath274 .",
    "we write @xmath275 , where @xmath268 is again the last element of @xmath167 , @xmath276 and @xmath277 where @xmath278 denotes the degree of the vertex @xmath191 .",
    "the estimates that we prove for controllable variables are much weaker than the estimates for the variables discussed above . for a controllable variable @xmath57",
    "we simply take the tracking variable to be the scaling @xmath154 .",
    "we begin with the constant @xmath145 .",
    "the value of @xmath145 depends on the length of time for which we want to track the process . throughout the paper we fix a global parameter @xmath279 , which can be taken arbitrarily small .",
    "we track the process until the time @xmath280 at which @xmath281 .",
    "thus @xmath78 we set @xmath282    now we turn to the error bounds for variables in our three ensembles of variables .",
    "we define parameters @xmath283 our error functions take the form @xmath284 where @xmath285 and @xmath286 is one of @xmath287 , or @xmath288 or @xmath289 . we take @xmath290 when @xmath57 is a stacking variable , @xmath291 when @xmath57 is a global variable , and @xmath292 when @xmath57 is a controllable general extension .",
    "the function @xmath293 is introduced to deal with some technicalities that arise for small @xmath14 .",
    "we let @xmath294 be a constant such that @xmath295 and let @xmath296 be any increasing smooth function such that @xmath297 for @xmath298 , @xmath299 for all @xmath14 and @xmath300 is finite .",
    "note that the power of @xmath14 in @xmath301 is chosen so that the dominant term in @xmath302 as @xmath303 does not contain a power of @xmath14 .",
    "all of our variables except for vertex degrees have at least one open pair ; thus @xmath302 has a non - negative power of @xmath304 , so is approximately non - increasing ( @xmath305 makes it increase by a constant factor ) .",
    "the constants @xmath306 are all polylogarithmic .",
    "we specify them now in advance of the analysis , but we will keep the notation general so that it is clear how to choose the constants . for all controllable variables",
    "we take @xmath307 . for the global variables we take @xmath308",
    "the constants for the stacking variables need to be chosen very carefully .",
    "the idea is that the constants should _ decrease _ as the length of @xmath149 increases , and there is a more substantial decrease for each occurrence of @xmath186 or @xmath148 . for a stacking variable @xmath309 we set @xmath310",
    "now we define various stopping times associated with the process .",
    "consider any variable @xmath57 in our ensembles , and write @xmath239 for some extension @xmath226 .",
    "we say that @xmath57 is _ bad _ ( at step @xmath5 ) if there is an edge @xmath311 in @xmath47 such that @xmath312 contains a triangle or a path of length two joining the vertices of an open pair .",
    "if @xmath57 is not bad we say that @xmath57 is _",
    "good_. note that if @xmath231 is bad then @xmath313 , so certainly it is not following its expected trajectory .",
    "for example , if @xmath114 is an edge then @xmath133 is bad .",
    "we let @xmath314 be the smallest @xmath315 such that @xmath57 is bad , or @xmath316 if there is no such time .",
    "as indicated earlier , we modify the definition above of the variable @xmath75 by defining @xmath317 for @xmath318 to ensure that it trivially satisfies the supermartingale condition .",
    "we only start tracking variables using differential equations at the point where we require a better bound than that given by coupling , in that the coupling bound does not rule out the variable entering its critical window .",
    "more precisely , we start tracking the variable @xmath57 at the first value @xmath319 such that @xmath320 and @xmath321 .",
    "it follows that @xmath322 for any @xmath323 for all variables in our ensembles .",
    "now we let @xmath324 be the smallest @xmath5 with @xmath325 such that @xmath326 , or @xmath316 if there is no such time .",
    "then we let @xmath327 , @xmath328 , @xmath329 respectively be the minimum of @xmath324 over all variables @xmath57 in the global , controllable , stacking ensemble .",
    "finally , we let @xmath330 .",
    "note that if @xmath331 then there is some @xmath57 such that @xmath332 , i.e.  @xmath85 is too large and @xmath57 is good at step @xmath91 , as required for the strategy described above .",
    "we emphasize that , since we can restrict our attention to @xmath333 , we may assume that @xmath334 for all good variables @xmath57 when verifying the trend and boundedness hypothesises .",
    "we prove the following theorem over the following four sections . in the next section",
    "we estimate errors in variables for small @xmath14 by coupling to the usual random graph .",
    "we then apply the strategy stated above to the global , stacking and controllable ensembles , respectively , in sections 4 , 5 and 6 .",
    "[ good ] with high probability @xmath335 .",
    "note that theorem [ edges ] follows immediately from theorem [ good ] .",
    "we will employ the following useful lemma extensively to estimate sums of products .",
    "the proof given here is due to patrick bennett .    *",
    "( product lemma ) * [ lem : pat ] suppose @xmath336 and @xmath337 are real numbers such that @xmath338 and @xmath339 for all @xmath340 .",
    "then we have @xmath341    the triangle inequality gives @xmath342 rearranging this inequality gives @xmath343    we conclude this section with some notation and conventions that are used throughout the paper .",
    "we use compact notation for one - step differences , writing @xmath344 for any sequence @xmath345 and @xmath346 for any function @xmath347 .",
    "we also use the following notational conventions :    * we use the ` o - tilde ' notation @xmath348 to mean @xmath349 for some absolute constant @xmath232 .",
    "* we use the abbreviation ` whp ' for ` with high probability ' ; all such statements will have subpolynomial failure probability , which will justify us taking a polynomial number of them in union bounds . *",
    "we denote the vertex set by @xmath350=\\{1,\\dots , n\\}$ ] .",
    "in this section we gather two types of estimates that can be made without using dynamic concentration , namely coupling and union bounds .",
    "we start by considering extension variables in the erds - rnyi random graph @xmath351 .",
    "suppose @xmath224 is a graph and @xmath352 .",
    "we refer to @xmath353 as an _ extension_. given an injective map @xmath227 $ ] , we let @xmath354 be the number of injective maps @xmath355 $ ] such that @xmath230 restricts to @xmath231 on @xmath232 and @xmath356 is an edge of @xmath351 for every @xmath357 . given @xmath358 we define the _ scaling _",
    "@xmath359}-e_{j[b]}}$ ] .",
    "note that if @xmath360 we have @xmath361 .",
    "we say that @xmath353 is _ strictly balanced with respect to @xmath351 _ if @xmath362 for all @xmath363 .",
    "extension series _ for @xmath353 , denoted @xmath364 , is constructed by the following rule .",
    "we let @xmath365 . for @xmath366 , if @xmath367 is not strictly balanced then we choose @xmath368 to be a minimal set @xmath369 with @xmath370 that minimises @xmath371 ; otherwise we choose @xmath372 , set @xmath373 and terminate the construction .    to control extensions we quote the following result of kim and vu ( * ? ? ?",
    "* theorem 4.2.4 ) in a weakened form that suffices for our purposes .",
    "[ kim - vu ] suppose @xmath353 satisfies @xmath374 for all @xmath375 in @xmath376 for some absolute constant @xmath377 .",
    "then there is an absolute constant @xmath378 such that whp @xmath379 for all injections @xmath227 $ ] .",
    "we also require a weaker estimate that also applies to sparse extensions , as given by the following union bound lemma .",
    "we include a brief proof as it illustrates a method we will also use for similar estimates in the triangle - free process .",
    "[ gnpbound ] if @xmath353 is strictly balanced then whp @xmath380 for all injections @xmath227 $ ] .",
    "* proof . *",
    "first we note that for any fixed @xmath355 $ ] restricting to @xmath231 on @xmath232 we have @xmath381}}$ ] .",
    "next we estimate the probability that there are @xmath13 extensions in @xmath354 that are disjoint outside of @xmath382 .",
    "an upper bound is @xmath383}})^s < ( 3s^{-1}s^{v_j}_a)^s$ ] , which is subpolynomial for @xmath384 . now we show by induction on @xmath385 that @xmath386 .",
    "the base case @xmath387 holds by the bound on disjoint extensions . by strict balance and the induction hypothesis , at most @xmath388 embeddings intersect any fixed embedding outside of @xmath382 .",
    "so @xmath389 .    for general extensions we obtain the following bound by applying the previous lemma to each step of the extension series , noting that @xmath390 for @xmath391 .",
    "[ gnp - general ] for any extension @xmath353 whp @xmath392 for all injections @xmath227 $ ] .",
    "our error functions are chosen to control the process for as long as possible , and the interesting range is @xmath393 .",
    "however , the powers of @xmath14 cause the functions to be badly behaved for small @xmath14 .",
    "so we need alternative estimates for @xmath394 , which we obtain by coupling to the usual erds - rnyi random graph process .",
    "we start tracking a variable @xmath57 using differential equations at the first time @xmath395 where we require a proportional error that is @xmath396 ( we will be more precise below ) . note that we have to exclude very small @xmath14 to obtain concentration , and we will see from the calculations below that @xmath397 is a natural starting point .",
    "let @xmath398 denote the erds - rnyi random graph process with @xmath0 vertices and @xmath399 edges , where at each time step we choose the next edge to be a random pair that is not yet an edge . to obtain the triangle - free process we modify @xmath398 by rejecting any pair that is closed , in that it forms a triangle with the edges already selected .",
    "after @xmath399 steps the selected edges form the triangle - free process @xmath6 at @xmath5 steps , where @xmath400 edges were rejected .",
    "the number of rejected edges is bounded by the number of triangles in @xmath398 ; call this @xmath401 .",
    "we can approximate @xmath398 by the binomial model where edges are chosen independently with probability @xmath402 . if @xmath403 for some @xmath404 then by lemma  [ kim - vu ] we have @xmath405 whp . we consider",
    "@xmath406 with @xmath407 so that @xmath408 . then @xmath409 , so we can approximate @xmath6 by @xmath410 with @xmath411 . recall that we aim to prove @xmath412 where @xmath413 for all variables that we track .",
    "we do this by showing that the probability that @xmath414 ever crosses the critical interval @xmath415 is very small . in order to circumvent technical issues with powers of @xmath14 when @xmath14 is small",
    "we begin the critical interval analysis at the smallest index @xmath5 such that @xmath416 and @xmath417 .",
    "recall that we denote this step by @xmath418 .",
    "let @xmath419 be the corresponding time .",
    "if the structure that is counted by @xmath57 has no edges ( i.e.  features only open pairs ) then we simply have @xmath420 and @xmath421 .",
    "the key point here is that the variable @xmath57 must not be in ( or beyond ) the critical interval at the moment that we begin the critical interval analysis for that variable .",
    "we now use the coupling with the erds - rnyi process to establish this property for all variables that we track .",
    "[ lem : beginning ] with high probability every tracked variable @xmath57 satisfies @xmath422 .",
    "* we begin with an arbitrary variable @xmath57 with the property that the structure counted by @xmath57 has no edge .",
    "we show that @xmath423 with high probability .",
    "let @xmath424 , using the notation for extension variables from the previous section .",
    "note that we take @xmath425 for the global variables @xmath426 .",
    "we have @xmath427 .",
    "since @xmath428 , it suffices to show that @xmath429 .",
    "note that @xmath430 is bounded by @xmath431 times the number of paths of length @xmath29 in @xmath398 ; call this @xmath432 .",
    "now , by chernoff bounds in @xmath398 whp every vertex has degree @xmath433 , which we roughly estimate as @xmath434 when @xmath435 . using",
    "this estimate on degrees we have @xmath436 , as desired .",
    "it remains to consider variables @xmath437 where @xmath438 .",
    "we consider @xmath125 first , as this is the only such variable with @xmath439 .",
    "( thus this is the only remaining variable with @xmath440 . )",
    "we can bound @xmath125 above by @xmath441 , as any copy of the structure counted by @xmath125 determines an ordered edge and a vertex .",
    "these structures are not counted if the non - edge pairs are either closed or edges .",
    "thus , we bound @xmath125 below by @xmath442 , where @xmath443 is the number of paths of length @xmath28 in @xmath444 . by the vertex degree estimate we have @xmath445 , so @xmath446 .",
    "this is well within the desired error bound .    for the remaining variables @xmath57 ( i.e.  stacking or controllable variables ) we have @xmath447 .",
    "fix such a variable @xmath448 .",
    "we bound @xmath449 above by @xmath450 in @xmath444 and below by @xmath451 in @xmath444 , where for @xmath452 we define @xmath453 to be the graph obtained from @xmath224 by adding a new vertex @xmath454 adjacent to @xmath166 and @xmath144 , and for @xmath455 we define @xmath453 to be the graph obtained from @xmath224 by adding @xmath9 as an edge .",
    "first suppose that @xmath57 is a stacking variable .",
    "considering @xmath57 one vertex at a time and applying lemma  [ kim - vu ] to each step we obtain @xmath456 for some @xmath457 .",
    "as @xmath458 is smaller than @xmath459 by a polynomial factor for any @xmath460 , we get the desired bound on @xmath461 from an application of lemma  [ gnp - general ] .",
    "now suppose @xmath57 is a controllable variable .",
    "to estimate @xmath354 at time @xmath462 we first note that since @xmath463 , we have @xmath464 . since @xmath465 , for any @xmath466 we have @xmath467}-e_{j[a ] } } s_a^b(1 ) \\ge t_v^{e(v ) } n^{\\delta } > l^{-1 } n^{3 { \\delta}/4}.\\ ] ] so we can again apply lemma  [ kim - vu ] to conclude that @xmath456 for some @xmath457 .",
    "it also follows from ( [ eq : early - control ] ) that for any @xmath468 the scaling @xmath458 is smaller than @xmath459 by a polynomial factor , and we again get the desired bound on @xmath469 from an application of lemma  [ gnp - general ] .      in this subsection",
    "we adapt the argument of lemmas  [ gnpbound ]  and  [ gnp - general ] to give a crude bound on general extension variables that holds throughout the triangle - free process . along the way",
    ", we will prove theorem  [ subgraphs ] , assuming theorem  [ good ] .",
    "first we need some estimates for @xmath105 and @xmath470 for any pair @xmath114 that hold throughout the process .",
    "[ qysmall ] on @xmath471 , whp @xmath472 for @xmath473 .",
    "also , whp for any non - edge @xmath114 we have @xmath474 for @xmath475 .",
    "* proof . *",
    "the bound for @xmath105 holds on the good event @xmath471 for @xmath395 .",
    "for @xmath476 it holds because @xmath477 , @xmath478 and @xmath479 .",
    "the bound for @xmath470 follows from @xmath480 for @xmath481 and @xmath255 small ,",
    "so we can assume @xmath482 .",
    "thus we are in the case @xmath483 . for @xmath484 , by lemma  [ kim - vu ] we estimate the number of triangles in @xmath398 by @xmath485 .",
    "thus we can couple @xmath6 to @xmath398 where @xmath486 .",
    "writing @xmath487 for the degree of @xmath154 in @xmath398 , by chernoff bounds whp @xmath488 .",
    "this gives the required upper bound on @xmath470 .",
    "we also have @xmath489 , where in @xmath398 we write @xmath490 for the number of triangles containing @xmath154 , and @xmath491 for the number of paths of length @xmath28 from @xmath136 to @xmath154 .",
    "each of @xmath490 and @xmath491 have scaling @xmath492 , so by lemma [ gnp - general ] whp both are at most @xmath493 , and we also have the required lower bound on @xmath470 .",
    "we need some further notation and terminology for general extensions in the triangle - free process , which mirrors that used previously for extensions in the erds - rnyi process .",
    "we say that @xmath226 is _ strictly balanced at time @xmath14 _ if @xmath494 for all @xmath495 .",
    "extension series at time @xmath14 _ for @xmath226 , denoted @xmath364 , is constructed by the following rule .",
    "we let @xmath365 .",
    "for @xmath366 , if @xmath496 is not strictly balanced then we choose @xmath368 to be a minimal set @xmath369 with @xmath497 that minimises @xmath371 ; otherwise we choose @xmath498 , set @xmath373 and terminate the construction .    in lemma [ extensions ]",
    "we will give a general estimate for extension variables in the triangle - free process .",
    "first we illustrate the argument in the following lemma , which shows that sparse graph pairs do not appear ; this is the main tool needed for the proof of theorem [ subgraphs ] . here",
    "we take @xmath499 , write @xmath500 , where @xmath231 is the unique map from @xmath501 to @xmath350 $ ] , and @xmath502 .    [ no - sparse ] suppose @xmath503 for some @xmath504 and time @xmath249 .",
    "then the probability that @xmath471 holds for @xmath505 but @xmath506 is at most @xmath507 .",
    "* suppose first that @xmath508 .",
    "here we appeal to the coupling with the erds - rnyi random graph process .",
    "it suffices to estimate the probability that @xmath224 appears in @xmath509 , where @xmath510 .",
    "the expected number of copies of @xmath224 is at most @xmath507 , so the required bound follows from markov s inequality .",
    "thus it suffices to consider @xmath511 .    to estimate @xmath512 , we take a union bound of events , where we specify the injection @xmath229 $ ] , and for @xmath357 we specify the _ selection step _ @xmath513 at which the process selects the edge @xmath356 .",
    "fix some choice and let @xmath514 be the specified event . for each @xmath505",
    "we estimate the probability that the selected edge is compatible with @xmath514 . at a selection step @xmath515 the selected edge",
    "is specified , so the probability is @xmath516 , where @xmath517 . for other @xmath5 , the required probability is @xmath518 , where @xmath519 is the number of ordered open pairs that can not be selected at step @xmath5 on @xmath514 .",
    "if @xmath5 is a selection step we write @xmath520",
    ". then we estimate @xmath521    now we estimate @xmath519 when @xmath5 is not a selection step . for @xmath522",
    "we use the trivial estimate @xmath523 , so suppose @xmath524 .",
    "suppose there are @xmath525 choices of @xmath357 with @xmath526 .",
    "then there are @xmath527 open pairs that must not become closed , namely the open pairs of @xmath528 and the @xmath525 pairs that have yet to be selected as edges .",
    "note that the number of choices of @xmath529 that close more than one such open pair is @xmath530 . by lemma [ qysmall ] all @xmath163-variables are @xmath531 , so we obtain @xmath532 . thus for @xmath533 we can write @xmath534 , where @xmath535 and @xmath536 .",
    "this holds for all @xmath5 if we set @xmath537 for @xmath522 .",
    "using the estimate @xmath538 we see that the contribution to @xmath539 from the first factor is @xmath540 since @xmath541 . from the second factor",
    "we obtain @xmath542 therefore @xmath543 summing over at most @xmath544 choices for @xmath230 and @xmath545 choices for the selection steps , we estimate @xmath546 .",
    "* proof of theorem [ subgraphs ] .",
    "* statement ( i ) is immediate from ( * ? ? ?",
    "* theorem 1.6(iii ) )",
    ". for ( ii ) , fix @xmath547 with @xmath548 .",
    "we can assume that the global parameter @xmath255 satisfies @xmath549 .",
    "note that if @xmath550 then @xmath551 for some spanning subgraph @xmath224 of @xmath33 . we have @xmath552",
    "thus the result follows from theorem [ good ] and lemma [ no - sparse ] .",
    "[ pre - extensions ] if @xmath553 for all @xmath468 at some time @xmath249 then whp @xmath554 for all injections @xmath227 $ ] .",
    "* proof . *",
    "it suffices to consider @xmath555 , as for smaller @xmath249 we can simply appeal to the coupling with the erds - rnyi random graph process and apply lemma [ gnp - general ] .",
    "the argument is similar to that of lemma [ no - sparse ] .",
    "we write @xmath556 and estimate the probability that there is a set of @xmath13 extensions @xmath557 in @xmath558 that are disjoint outside of @xmath382 .",
    "we take a union bound of events in which we specify @xmath559 , and for each @xmath560 and @xmath561 $ ] we specify the _ selection step _ @xmath562 at which the process selects the edge @xmath563 . fix some choice and let @xmath514 be the specified event . for each @xmath505",
    "we estimate the probability that the selected edge is compatible with @xmath514 . at a selection step @xmath564 the selected edge",
    "is specified , so the probability is @xmath565 , where @xmath566 . for other @xmath5 ,",
    "the required probability is @xmath518 , where @xmath519 is the number of ordered open pairs that can not be selected at step @xmath5 on @xmath514 .",
    "if @xmath5 is a selection step we write @xmath520 . then we estimate @xmath567 } ( 1+o(1))2q(t_{j , e})^{-1 } \\cdot \\prod_{i=1}^{i ' } ( 1 - n_i / q).\\ ] ]    now we estimate @xmath519 when @xmath5 is not a selection step",
    ". for @xmath568 we use the trivial estimate @xmath523 , so suppose @xmath569 .",
    "suppose there are @xmath525 choices of @xmath570 with @xmath571 .",
    "then there are @xmath572 open pairs that must not become closed , namely the @xmath573 open pairs specified by @xmath559 and the @xmath525 pairs that have yet to be selected as edges .",
    "note that the number of choices of @xmath529 that close more than one such open pair is @xmath574 , since @xmath575 . by lemma  [ qysmall ]",
    "all @xmath163-variables are @xmath531 , so we obtain @xmath576 .",
    "thus for @xmath577 we can write @xmath578 , where @xmath579 and @xmath536 .",
    "this holds for all @xmath5 if we set @xmath537 for @xmath568 .",
    "similarly to the proof of lemma  [ no - sparse ] , the contribution to @xmath539 from the first factor is @xmath580^s,\\ ] ] and from the second factor is @xmath581 } ( 1+o(1 ) ) \\hat{q}(t_{j , e})$ ] .",
    "therefore @xmath582 } 2n^{-2 } \\right)}.\\ ] ] summing over at most @xmath583 choices for @xmath559 and @xmath584 choices for the selection steps , the probability that such @xmath559 exist is at most @xmath585^s < ( 3s^{-1}v(t'))^s$ ] , which is subpolynomial .    in the case",
    "when @xmath226 is strictly balanced at time @xmath249 , the required bound on @xmath586 follows by induction as in the proof of lemma [ gnpbound ] .",
    "the general case follows by applying this to each step of the extension series .",
    "[ extensions ] whp for any extension @xmath587 on at most @xmath588 vertices and all injections @xmath227 $ ] we have @xmath589    * proof .",
    "* let @xmath590 be the extension series at time @xmath14 .",
    "for each step @xmath591,{\\gamma}[b_{i+1}])$ ] there are two cases .",
    "if @xmath592 then we can apply lemma  [ pre - extensions ] to bound the number of ways to make the step . on the other hand , if @xmath593 then this extension variable is controllable at time @xmath14 , and we bound the number of copies by lemma  [ controllable ] .",
    "in this section we prove that the global variables have the desired concentration , assuming that this is the case for all ensembles at earlier times .",
    "recall that we track each variable @xmath57 relative to a _ tracking random variable _",
    "@xmath594 to isolate variations in @xmath57 from variations in other variables that might have an impact on @xmath57 .",
    "recall that the global variables have scalings @xmath595 , @xmath596 and @xmath597 .",
    "we use the tracking variables @xmath598 ( note that the tracking variable for @xmath108 is in fact a deterministic function . )",
    "we show that the _ difference random variables _",
    "@xmath599 for @xmath600 are all small throughout the process . recall that @xmath327 is the minimum of the stopping times @xmath324 over all variables @xmath57 in the global ensemble , so the following theorem says that there is a very small probability that we reach the universal stopping time @xmath79 before step @xmath601 because a global variable @xmath57 fails to satisfy the required bounds @xmath602 .",
    "( note that a global variable can not be bad . )",
    "[ mainensemble ] @xmath603 .",
    "we organise the proof of theorem [ mainensemble ] into three subsections , in which we respectively verify the trend hypothesis , variation equations and boundedness hypothesis .      in this subsection , for each variable @xmath57 in the global ensemble , we give an upper bound on the one - step expected change in the difference variable , namely @xmath604 = { \\mathbb{e } } [ { \\mathcal{d}}v(i+1 ) - { \\mathcal{d}}v(i ) \\mid { \\mathcal{f}}_i],\\ ] ] under the assumption that @xmath57 is in its upper critical window , i.e.@xmath605 we consider the effect of each open pair and edge in the structure counted by @xmath57 separately ; the final expression is then obtained by linearity of expectation .",
    "when an open pair in a copy of the structure counted by @xmath57 is chosen or closed , we say that the copy is _ destroyed_. we balance the change in @xmath57 due to destructions with the change in @xmath606 due to the change in @xmath108 .",
    "( the case @xmath607 is handled differently as @xmath108 is tracked relative to the deterministic function @xmath109 . ) adding the edge @xmath608 can also create new copies of the structure counted by @xmath57 in which @xmath608 plays the role of one of the edges in the structure ; then we say that a copy of @xmath57 is _",
    "created_. the change in @xmath57 that comes from creations is balanced with the change in @xmath14 in @xmath256 .    to illustrate this mechanism consider @xmath609 , which we do not treat in this section but is a good example here .",
    "we write @xmath610 , where @xmath611 counts the number of creations and @xmath612 destructions up to time @xmath5 .",
    "recall that @xmath613 .",
    "we define @xmath614 and @xmath615 by writing @xmath616 now we can write @xmath617 where @xmath618 and @xmath619 . in this way we balance any change in @xmath118 with a corresponding changes in @xmath620 .",
    "in general , for a variable @xmath57 with underlying graph pair @xmath237 , we use the notation @xmath621 where for edges @xmath357 we let @xmath622 count the number of creations of @xmath57 up to time @xmath5 by the selection of @xmath311 , and for open pairs @xmath623 we let @xmath622 count the number of destructions of @xmath57 up to time @xmath5 by the closure or selection of @xmath311 .",
    "( actually , these are approximate expressions because a given copy of @xmath57 may be counted more than once , but we will see that this gives a negligible error term . ) we decompose the changes of the tracking variable as @xmath624 , where @xmath625 is the change in some term in @xmath256 that corresponds naturally to @xmath311 ( there is often an additional error term ) .",
    "we then use @xmath626 to balance @xmath627 for each @xmath311 .",
    "thus we write @xmath628 where @xmath629 .",
    "now we proceed to compute the impact on @xmath630 $ ] for each open pair and edge in the structure counted by global variables @xmath57 .",
    "we begin with destructions .",
    "the main point to note in these calculations is that each open pair gives a self - correction term of @xmath631 , which will later balance a corresponding @xmath632 term from the change in @xmath633 .",
    "the variable @xmath108 has the property that there is a larger extension that describes the situation when an open pair @xmath127 in @xmath108 is closed .",
    "we call destructions of this form _ simple destructions_. ( we will see examples of this type again in section  [ sec : stack ] where we treat the stacking variables . ) note that each triple in @xmath125 describes a way in which the addition of an edge closes a pair , so we have @xmath634 = 2 + 4s / q.\\ ] ] then @xmath635 & = { \\mathbb{e } } [ { \\delta}_i(q ) - { \\delta}_i(q ) \\mid { \\mathcal{f}}_i ] \\\\ & = - ( 2   + 4s / q ) + 8 t q n^{-3/2 } \\pm { \\widetilde}{o}(qn^{-3 } ) \\\\ & = - 8 t q n^{-3/2 } \\pm ( 8+o(e_q ) ) e_s t n^{1/2 } \\hat{q } + 8 t q n^{-3/2 } \\pm o(1 ) \\\\ & \\le -(f_q+g_q - ( 1+o(1))e_s ) 8tqn^{-3/2}. \\end{split}\\ ] ] in the last line we used @xmath636 when @xmath108 is in its upper critical window and @xmath637 .      for destructions ,",
    "it remains to consider those of @xmath123 and @xmath125 .",
    "these are not simple destructions , as no variable in the ensemble counts ways in which these structures are destroyed by the closure of open pairs .",
    "instead we will apply the product lemma from section  [ sec : overviewlower ] .",
    "let @xmath638 be @xmath639 or @xmath125 and let @xmath127 be an open pair in @xmath57 .",
    "for each open pair @xmath640 in @xmath25 let @xmath641 be the number of copies of the structure counted by @xmath57 that use @xmath642 as @xmath190 and @xmath643 as @xmath191 .",
    "so @xmath644 and @xmath645 .",
    "we note that @xmath646 so by the product lemma we can write @xmath647 & = { \\mathbb{e } } \\left [ { \\delta}_i(v^d ) - \\frac{{\\delta}_i(q)}{q } { \\mathcal{t}}v \\mid { \\mathcal{f}}_i \\right ] \\\\ & = \\sum_{{\\alpha}{\\beta}\\in q } 2q^{-1}(y_{{\\alpha}{\\beta } } + y_{{\\beta}{\\alpha } } ) v_{{\\alpha}{\\beta } } - ( 2 + 4sq^{-1 } ) q^{-1 } { \\mathcal{t}}v \\\\ & = 4sq^{-2 } v \\pm   o \\left ( e_y y e_{v_{{\\alpha}{\\beta } } } v_{{\\alpha}{\\beta } } \\right )   -   4sq^{-2 } { \\mathcal{t}}v \\pm o(v / q ) \\\\ & = ( 1 \\pm ( 1+o(1))e_s ) 8tn^{-3/2 } { \\mathcal{d}}v \\pm o ( e_y e_{v_{{\\alpha}{\\beta } } } ) tvn^{-3/2 } \\pm o(v / q ) \\\\ & \\ge \\left [ ( 1+o(1 ) ) ( f_v+g_v ) - o(e_y e_{v_{{\\alpha}{\\beta } } } ) - o(t^{-1}e^2 ) \\right ] 8tvn^{-3/2}. \\end{split}\\ ] ] this calculation holds for every open pair in the structures counted by @xmath123 and @xmath125 , but we also need a ` destruction fidelity ' term to correct for simultaneously closing the two open pairs in a single copy of the structure counted by @xmath57 . note that this can not occur for @xmath125 , as the configuration for closing the two open pairs in @xmath125 would make a triangle with the edge in @xmath125 . for @xmath123",
    "we need to estimate the number of @xmath648 s in which two adjacent pairs are edges and the other four pairs are open . by lemma  [ extensions ]",
    "there are at most @xmath649 such configurations , so the correction to @xmath650 $ ] is @xmath651 , assuming ( say ) @xmath652      finally , we turn to creations , which among the global variables occur only for @xmath125 .",
    "let @xmath653 and let @xmath127 be the edge in @xmath57 . recall that @xmath654 denotes the number of creations of @xmath57 through @xmath5 steps of the process ( which can only occur through the addition of an edge that plays the role of @xmath127 )",
    "let @xmath655 be the structure given by replacing the edge @xmath127 with an open pair , so @xmath656 .",
    "note that @xmath657 for each extension in @xmath658 the probability that the edge @xmath608 falls in the appropriate position to result in a creation counted in @xmath659 is @xmath660 , so we can write @xmath661 = 2q^{-1 } v^+$ ] .",
    "there is no ` creation fidelity ' term , as it is not possible for the added edge to close an open pair in @xmath662 .",
    "we match this change in @xmath57 with the change in @xmath663 that results from the one - step change in @xmath14 , which is @xmath664 .",
    "we have @xmath665 & = { \\mathbb{e } } [ { \\delta}_i(v^c ) - t^{-1}n^{-3/2 } { \\mathcal{t}}v \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1 } ( { \\mathcal{t}}v^{+ } \\pm v^+ e_{v^+ } ) -   t^{-1}n^{-3/2 } { \\mathcal{t}}v \\\\ & = \\pm ( 1+o(1 ) ) t^{-1 } e_{v^+ } vn^{-3/2}. \\end{split}\\ ] ]      gathering together the relevant creation and destruction calculations from the previous subsection , under the assumption that the variable considered is in its upper critical window , we have @xmath666 & \\le & - { \\left (   f_q+g_q - ( 1+o(1))e_s ) \\right ) } 8 t qn^{-3/2 } , \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{d } } r \\mid { \\mathcal{f}}_i ] & \\le & - ( 1+o(1 ) ) { \\left [   3(f_r+g_r ) - o(e_y e_x ) - o(t^{-1}e^2 ) \\right ] } 8 t rn^{-3/2 } , \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{d } } s \\mid { \\mathcal{f}}_i ] & \\le & - ( 1+o(1 ) ) { \\left [   2(f_s+g_s ) - \\tfrac{e_r}{8t^2 } - o(e_y e_y ) - o(t^{-1}e^2 ) \\right ] } 8 t sn^{-3/2}.\\end{aligned}\\ ] ] for each variable @xmath57 in the global ensemble we consider the sequence of random variables @xmath667 under the assumption that @xmath57 is in its upper critical window , we show that this sequence is a supermartingale , i.e.  that @xmath668 = { \\mathbb{e } } [ { \\delta}_i ( { \\mathcal{d}}v - v e_v ) \\mid { \\mathcal{f}}_i ] \\le 0.\\ ] ] note that @xmath669 we estimate the last term by @xmath670 , using the fact that we restrict our attention to @xmath671 .",
    "we write @xmath672 where @xmath57 has @xmath673 edges and @xmath674 open pairs not in @xmath232 . recalling that @xmath675",
    ", we see that we can cancel the @xmath676 term that occurs both in @xmath677 and in @xmath678 $ ] : this is the self - correction that is fundamental to the analysis .",
    "thus we obtain @xmath679 & \\le & - { \\left (   \\frac { e'_q}{8 t } + o(f_q ) - ( 1+o(1 ) ) ( g_q + e_s ) \\right ) }   8 t qn^{-3/2 } , \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{z } } r \\mid { \\mathcal{f}}_i ] & \\le & - { \\left (   \\frac { e'_r } { 8 t } + o(f_r ) - ( 1+o(1 ) ) ( 3g_r + o(e_y e_x ) ) - o(t^{-1}e^2 )   \\right ) } 8 t rn^{-3/2 } , \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{z } } s \\mid { \\mathcal{f}}_i ] & \\le &    - { \\left (   \\frac{e'_s}{8 t } + \\frac{e_s}{8t^2 } + o(f_s ) - ( 1+o(1 ) )",
    "( 2g_s + \\tfrac{e_r}{8t^2 } + o(e_y e_y ) ) - o(t^{-1}e^2 )   \\right ) } 8 t sn^{-3/2}.\\end{aligned}\\ ] ] we now show that the error functions that we have chosen grow quickly enough for each of these sequences to be supermartingales ( i.e.  the @xmath680 term will be dominant in each case ) .",
    "we stress that the @xmath681 regime behaves a bit differently from the rest of the process in the estimates that follow .",
    "now recall that our error functions have the form @xmath682 recall further that @xmath683 and note that the power of @xmath14 in @xmath684 is chosen so that the dominant term in @xmath685 as @xmath303 does not contain a power of @xmath14 . since @xmath686 we have @xmath687 therefore , we have @xmath688 we apply this observation to each global variable in turn .",
    "for @xmath108 we have @xmath679 & \\le &   - ( 1+o(1 ) ) { \\left [    ( f_q + ( \\tfrac{2 \\vartheta'}{8t\\vartheta }   + 2)g_q ) - ( g_q + e_s )   \\right ] } 8 t qn^{-3/2 } \\\\ & \\le & - ( 1+o(1 ) ) { \\left [   ( f_q - f_s ) + ( \\tfrac{\\vartheta'}{4t\\vartheta }   g_q + g_q - 2g_s )   \\right ] } 8 t qn^{-3/2}.\\end{aligned}\\ ] ] then the sequence @xmath689 forms a supermartingale provided @xmath690 ( note that @xmath691 dominates the remaining terms for @xmath692 . )",
    "next consider @xmath123 , where we have @xmath693 & \\le & - ( 1+o(1 ) ) { \\left [   f_r + ( \\tfrac { 2\\vartheta'}{8 t \\vartheta } + 2 ) \\cdot g_r   -   3g_r - o(e_y e_x ) - o(t^{-1}e^2 )   \\right ] } 8 t rn^{-3/2 } \\\\",
    "& \\le & - ( 1+o(1 ) )   { \\left [   f_r + ( \\tfrac { \\vartheta ' } { 4 t \\vartheta } - 1)g_r - o(f_y f_x ) - o(g_y g_x )   \\right ] } 8 t rn^{-3/2}.\\end{aligned}\\ ] ] then the sequence @xmath694 forms a supermartingale provided @xmath695 for this implies that the @xmath696 term dominates for @xmath681 and that the @xmath697 term dominates otherwise .",
    "the final global variable is @xmath125 , where we have @xmath698 & \\le &   -   ( 1+o(1 ) ) { \\left [   ( 1 + \\tfrac{1}{8t^2})f_s + ( \\tfrac{2 \\vartheta'}{8 t \\vartheta } + 2 ) \\cdot g_s \\right ] }   8 t sn^{-3/2 } \\\\ & & \\hskip1 cm     + ( 1+o(1 ) ) { \\left [   ( 2g_s + \\tfrac{e_r}{8t^2 } + o(e_y e_y ) ) + o(t^{-1}e^2 )   \\right ] } 8 t sn^{-3/2 } \\\\ &",
    "\\le & - ( 1+o(1 ) )   { \\left [   f_s + \\tfrac { f_s - f_r}{8t^2 } + \\tfrac { \\vartheta ' t g_s/ \\vartheta - g_r}{4t^2 } - o(f_y^2 ) - o(g_y^2 ) + o(g_s )   \\right ] } 8 t sn^{-3/2}.\\end{aligned}\\ ] ] then the sequence @xmath699 forms a supermartingale provided @xmath700 for this implies that the @xmath701 term dominates for @xmath681 and the @xmath702 term dominates otherwise .      to apply freedman s inequality , for each @xmath57 in the global ensemble we estimate @xmath703 and @xmath704 ; recall that it suffices to show @xmath705 for convenience we replace @xmath706 by @xmath707 in our calculations , as this does not change @xmath708 and only changes @xmath709 up to a constant factor .",
    "we can estimate the contribution to the variance from each pair in @xmath57 separately , using the simple observation that if random variables @xmath232 and @xmath710 each have variance at most @xmath154 then @xmath711 has variance at most @xmath712 .",
    "we start with some simple observations for estimating variances .    1 .",
    "if @xmath713 and @xmath714 then @xmath715 .",
    "this holds by convexity : @xmath716 is maximised when @xmath232 only takes the values @xmath717 and @xmath718 .",
    "then the maximum is when @xmath719 and @xmath720 , giving @xmath721 .",
    "2 .   if @xmath722 for some constant @xmath369 then @xmath723 .",
    "3 .   suppose @xmath125 is a finite subset of @xmath724 $ ] , @xmath232 is a random subset of @xmath125 ( with any distribution ) and @xmath710 is the sum of @xmath232 . then @xmath725 .",
    "4 .   if @xmath232 and @xmath710 each have variance at most @xmath57 then @xmath711 has variance at most @xmath726 . this follows from @xmath727 and the cauchy - schwarz inequality @xmath728 .",
    "the last observation allows us to estimate the variances for each pair in @xmath57 separately .",
    "to apply the first , we say that a martingale @xmath729 is @xmath730-bounded if @xmath731 for each @xmath5 .",
    "then we have @xmath732 .",
    "we adopt the notation @xmath733 , where @xmath734 indicates creation or destruction , and estimate @xmath735 = o(\\eta_{v^x } n_{v^x}).\\ ] ] note that we consider the martingale difference sequence @xmath736 $ ] , so we need to assume @xmath737 = o(\\eta_{v^x});\\ ] ] then the bound on @xmath738 follows from the first two observations .    here",
    "we estimate @xmath739 , i.e.  for the global variables we simply apply the hoeffding - azuma inequality .",
    "for @xmath108 we have @xmath740 , so it suffices to show @xmath741 and @xmath742 . the change in @xmath743 when the process chooses the edge @xmath744 is @xmath745 then @xmath746 , and",
    "the required bounds hold easily .",
    "for @xmath123 we have @xmath747 , so it suffices to show @xmath748 and @xmath749 . on choosing @xmath744 , for each open pair in @xmath123",
    "we have @xmath750 there is also a destruction fidelity correction for closing two open pairs in a single triple counted by @xmath123 , which occurs for open triples @xmath751 such that @xmath752 and @xmath753 are edges , and similarly interchanging @xmath136 and @xmath154 . by lemma [ extensions ]",
    "the number of such choices for @xmath127 is @xmath754 , which is negligible in comparison with @xmath755 .",
    "the required bounds hold easily .",
    "for @xmath125 we have @xmath756 , so it suffices to show @xmath757 and @xmath758 . on choosing @xmath744 , for both open pairs in @xmath125 we have @xmath759 also , for the edge in @xmath125 we have creation @xmath760 the required bounds hold easily .",
    "having verified the trend and boundedness hypotheses , the proof of theorem [ mainensemble ] is complete .",
    "in this subsection we formulate a general condition under which we can control the variable @xmath761 with accuracy @xmath762 .",
    "let @xmath248 . recall that @xmath57 is _ controllable at time @xmath249 _ if @xmath250 and for any @xmath251 we have @xmath763    note in particular that these bounds are required to hold for @xmath764 .",
    "note also that if @xmath57 is controllable and @xmath655 is obtained from @xmath57 by changing an edge to an open pair then @xmath655 is controllable .",
    "recall that @xmath328 is the minimum of the stopping times @xmath324 over all variables @xmath57 in the controllable ensemble .",
    "the following theorem says that there is a very small probability that we reach the universal stopping time @xmath79 before step @xmath765 because a good controllable variable @xmath57 fails to satisfy the required bound @xmath602 .",
    "[ controllable ] @xmath766 .",
    "it is convenient to consider the following modified extension variable . given an injective map @xmath229 $ ] , we say that a pair @xmath127 in @xmath767 is _",
    "@xmath230-open _ if there is no vertex @xmath768 such that @xmath128 , @xmath129 are edges and @xmath769 ; note that it is the last condition that distinguishes the definition from that of ` open ' .",
    "let @xmath770 be defined in the same way as @xmath228 , except that pairs that are required to be open in @xmath228 are only required to be @xmath230-open in @xmath771 .",
    "we will show that @xmath772 and @xmath773 , where @xmath774 .",
    "first consider the approximation of @xmath57 by @xmath775 . fix @xmath776 with @xmath311 not contained in @xmath232 .",
    "let @xmath777 and @xmath778 .",
    "we can estimate @xmath779 by the sum over all such @xmath311 of @xmath780 . by lemma  [ extensions ]",
    "we have @xmath781 , where @xmath710 is chosen to minimise @xmath782 .",
    "note that @xmath783 and @xmath784 by controllability .",
    "thus @xmath785 , which is at most @xmath786 for @xmath0 sufficiently large .",
    "here we recall that @xmath787 has the form described in subsection  [ sec : error ] , namely @xmath788 and note that @xmath789 .    to estimate @xmath775 we will apply freedman s inequality to @xmath790 , where @xmath791 ( under the assumption that @xmath792 is in the upper critical window ) .",
    "we begin with the boundedness hypothesis because it requires a delicate argument that uses ( [ eq : definecontrol ] ) in a crucial way .",
    "given @xmath301 as defined above , it suffices to show @xmath793 note that the one - step change in @xmath794 is @xmath795 , which is negligible in comparison with the required estimates .",
    "therefore , it suffices to consider changes in @xmath775 rather than @xmath796 .",
    "first consider the one - step change due to closing some @xmath797 .",
    "assume for the moment that @xmath798 .",
    "( the case @xmath799 is treated below ) .",
    "let @xmath800 be obtained from @xmath237 by ` gluing a @xmath163-variable on @xmath640 ' as follows .",
    "let @xmath801 be a new vertex , @xmath802 , @xmath803 and @xmath804 .",
    "note that this definition depends on the order of @xmath805 and @xmath806 .",
    "we analyse closures of @xmath311 by adding the edge corresponding to @xmath807 .",
    "let @xmath808 and @xmath809 , where all scalings are with respect to @xmath800 .",
    "we can bound the probability @xmath810 that @xmath238 is affected by closing an edge corresponding to @xmath311 by @xmath811 , using lemma  [ extensions ] and the assumption @xmath798 , as this event is contained in the event that the new edge is contained in an extension to the graph induced by the set @xmath812 that defines @xmath813 .",
    "furthermore , we can bound the magnitude of the change in @xmath814 by @xmath815 , applying lemma  [ extensions ] twice . then the one - step variance in @xmath775 satisfies @xmath816",
    "( note that we use @xmath817 . )",
    "now recall that @xmath818 and write @xmath819 .",
    "we have @xmath820 by construction of @xmath800 and @xmath821 since @xmath57 is controllable .",
    "thus @xmath822 , and we have @xmath823 which gives the required bounds ( [ eq:5target ] ) , provided that @xmath0 is sufficiently large .",
    "( note that @xmath824 . )",
    "we now turn to the one - step change due to destruction in the case @xmath799 . in this case",
    "we can not necessarily apply lemma  [ extensions ] as the extension we get by ` gluing a @xmath163-variable on @xmath640 ' has @xmath825 vertices . here",
    "we modify the argument slightly , getting the same bounds as above .",
    "first note that the bound on @xmath826 can be used exactly as above .",
    "if @xmath827 has @xmath828 vertices then first take the extension to @xmath829 and then extend to @xmath801 ; this gives the same estimate as above because @xmath57 is controllable .",
    "the bound on @xmath830 is slightly more delicate .",
    "consider the last step in the extension series for the extension from @xmath831 to @xmath832 in the argument above .",
    "let this extension be @xmath833 . if @xmath834 then the vertex @xmath801 can be dropped from @xmath369 and @xmath835 without influencing the extension .",
    "this gives an extension with at most @xmath836 vertices and lemma  [ extensions ] applies to give the same bound as above .",
    "so we can restrict our attention to the case @xmath837 .",
    "note the extension from @xmath838 to @xmath839 contains the edge @xmath840 and the open pair @xmath640 .",
    "so @xmath841 .",
    "now , if @xmath842 then we can apply lemma  [ pre - extensions ] directly to get the desired bound . on the other hand , if @xmath843 then @xmath844 , and in this case we can bound the number of extensions from @xmath838 to @xmath832 by first bounding the number of extension from @xmath838 to @xmath845 by @xmath846 and then bounding the number of extensions from @xmath847 to @xmath832 by an application of lemma  [ extensions ] ( using the fact that @xmath801 would play no role in such an extension ) . in every case we sacrifice at most a polylogarithmic factor in the bound on @xmath848 , and the estimates above hold .",
    "now consider the one - step change due to creating a copy of this extension .",
    "suppose that @xmath357 .",
    "let @xmath849 and @xmath850 .",
    "define @xmath851 where all scalings are with respect to @xmath852 .",
    "similarly to the case @xmath853 , we can estimate the probability @xmath810 that @xmath57 is affected by choosing a pair corresponding to @xmath311 by @xmath854 , and the magnitude @xmath848 of the effect by @xmath855 .",
    "here we have @xmath856 since @xmath857 is controllable we have @xmath858 , and we have @xmath859 which gives the required bound ( [ eq:5target ] ) for @xmath0 sufficiently large , since we must have @xmath860 in this case .",
    "we have verified the boundedness hypothesis , so lemma  [ controllable ] will follow from freedman s inequality , after we establish the trend hypothesis in the following subsection .",
    "assume @xmath761 is controllable and @xmath861 is in the upper critical window : @xmath862 .",
    "we give an upper bound on @xmath863 $ ] , i.e.  the one - step expected change in the difference variable .",
    "to organise the computations we gather terms according to each edge @xmath311 of @xmath223 .",
    "those with @xmath357 contribute positively ( creation ) ; those with @xmath853 contribute negatively ( destruction ) .",
    "we write @xmath864 and @xmath865 , where @xmath866 is the main term and @xmath867 is the ` fidelity ' error term . for @xmath357 we take @xmath868 equal to the number of @xmath869 such that @xmath356 is added at step @xmath870 .",
    "we can take the ` creation fidelity ' term as @xmath871 because we are tracking @xmath775 rather than @xmath57 .",
    "for @xmath853 we take @xmath866 equal to the number of @xmath872 such that @xmath356 is selected as @xmath608 or closed at step @xmath870 . the ` destruction fidelity '",
    "term @xmath867 bounds the number of such @xmath230 such that @xmath873 also closes @xmath874 for some @xmath875 with @xmath876 .",
    "recall that we write @xmath877 , where @xmath626 is @xmath878 for @xmath357 or @xmath879 for @xmath853 .",
    "we also write @xmath880 where @xmath881 .",
    "fix @xmath357 ( if @xmath882 ) and write @xmath883 .",
    "then @xmath884 & = { \\mathbb{e } } [ { \\delta}_i(v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1}v^+ - { \\mathcal{t}}v/(tn^{3/2 } ) \\\\ & = 2q^{-1}{\\mathcal{d}}v^+   \\\\ &   \\le ( 1+o(1 ) ) t^{-1 } e_{v^+ } v n^{-3/2}. \\end{split}\\ ] ]      fix @xmath853 .",
    "we have @xmath885 = 2q^{-1}\\sum_{f \\in v } ( 1+c_{f(e ) } \\pm l^4)$ ] , where @xmath886 bounds the number of open pairs that close @xmath356 and also @xmath874 for some other @xmath875 ( i.e.  this is the destruction fidelity term )",
    ". then @xmath887 & = 2q^{-1}\\sum_{f \\in v } ( 1+c_{f(e)}\\pm l^4 ) - { \\mathbb{e } } \\left [ \\frac { { \\delta}_i(q){\\mathcal{t}}v } { q } \\mid { \\mathcal{f}}_i \\right ]   \\\\ & = ( 1 \\pm e_y ) 8tn^{-3/2 } v \\pm o(l^4q^{-1}v ) - ( 1 \\pm o(e_s ) ) 8tn^{-3/2 } { \\mathcal{t}}v \\\\ & = 8tn^{-3/2 } { \\mathcal{d}}v \\pm 8tn^{-3/2 } e_y v \\pm o(e_s 8tn^{-3/2}v )   \\pm o(l^4q^{-1}v )   \\\\ &   \\ge \\left [ f_v + g_v - ( 1+o(1))e_y - o(e_s ) - o(l^4t^{-1}e^2 ) \\right ] 8 t v n^{-3/2}.\\end{aligned}\\ ] ] note that @xmath888 and @xmath889 .",
    "so we have the bound @xmath890 \\ge ( 1 + o(1 ) ) ( f_v + g_v - 2g_y ) 8 t v n^{-3/2}.\\ ] ]      as for the global ensemble , @xmath891 where we estimate the last term by @xmath892 .",
    "note that @xmath893 since @xmath307 for all @xmath57 in the controllable ensemble , we have @xmath894 .",
    "note further that @xmath895 ( and there is no @xmath896 term if @xmath897 ) . applying these observations we have @xmath898}{8tvn^{-3/2 } } & \\le ( 1+o(1 ) ) \\tfrac{e(v)}{8t^2 } e_{v^{+ * } }   - ( 1+o(1 ) ) o(v )   ( f_v + g_v - 2g_y ) \\\\",
    "& \\quad - \\left [ ( \\tfrac{e(v)}{8t^2 } - o(v ) ) e_{v^ * } + \\tfrac{e'_{v^*}}{8t}\\right ] + { \\widetilde}{o } ( e_{v^ * } t^{-1 } n^{-1 } ) + { \\widetilde}{o}(t^{-1 } n^{-1 } )   \\\\ & \\le \\tfrac{e(v)}{8t^2 } \\cdot \\tfrac{3}{2}(g_{v^+}-g_v ) + \\tfrac{o(v)}{2 } g_v    - \\tfrac{1}{2 } { \\delta}f_v \\\\ & \\quad - ( \\tfrac{{\\vartheta}'}{8 t { \\vartheta } } - \\tfrac{e(v)}{8t^2 } + \\tfrac{{\\delta}}{2 } ) \\cdot \\tfrac{3g_v}{2 }   + o(g_y )   + o ( e_{v^+}/t^2 ) + o(e_v ) \\\\ & \\le \\tfrac{g_v}{2 } ( o(v ) - \\tfrac{3{\\delta}}{2 } + \\tfrac { 3 e(v ) } { 4 t }   - \\tfrac{3 { \\vartheta } ' } { 8 t { \\vartheta } } ) - \\tfrac{1}{2 } { \\delta}f_v + o(g_y )   + o ( e_{v^+}/t^2 ) + o(e_v).\\end{aligned}\\ ] ] then @xmath899 \\le 0 $ ] , as @xmath900 dominates for @xmath901 , and @xmath902 dominates otherwise .",
    "in this section we establish control of all variables in the stacking ensemble .",
    "recall that @xmath329 is the minimum of the stopping times @xmath324 over all variables @xmath57 in the stacking ensemble .",
    "the following theorem says that there is a very small probability that we reach the universal stopping time @xmath79 before step @xmath601 because a good stacking variable @xmath57 fails to satisfy the required bound @xmath602 .",
    "[ stacking ] @xmath903 .    before proceeding with the trend and boundedness hypotheses and variation equations ,",
    "we discuss the extensions that require appeals to the controllable ensemble .",
    "this subsection concerns certain subextensions of stacking variables that will be needed in the trend hypothesis . in two very important cases we will appeal to the controllable ensemble for our estimates , and",
    "so we need to show that these extensions are indeed controllable .",
    "the two special structures that we need to consider are the following .",
    "* an _ @xmath904-fan _ at the triple @xmath905 , also called a _ @xmath906-extension _ at @xmath232 , is any extension of the form @xmath226 , where the base @xmath907 , @xmath908 has @xmath904 additional vertices @xmath909 , @xmath910 is a path of length @xmath911 in @xmath223 , and @xmath912 is open for @xmath913 $ ] .",
    "we emphasize that the pairs in the path @xmath914 can be either edges or open pairs .",
    "* let @xmath915 be the extension corresponding to some stacking variable @xmath916 such that @xmath917 .",
    "note that if @xmath918 is the last rung of @xmath167 then the extensions we get by stacking another copy of @xmath163 on @xmath182 are not in @xmath221 .",
    "backward extension _",
    "@xmath919 is the extension @xmath920 with @xmath921 , @xmath922 and @xmath923 .",
    "we now show that if we set @xmath924 then both of these extension variables are controllable at the time @xmath280 when @xmath925 .",
    "we begin with the @xmath904-fan .",
    "the minimum scaling of a @xmath906-extension is @xmath926 , which is achieved when the path belongs entirely to @xmath224 .",
    "fix @xmath710 with @xmath927 that minimises @xmath928 .",
    "we need to show that @xmath929 .",
    "we can assume that @xmath930 .",
    "then we can find @xmath931 in @xmath710 such that not both @xmath932 and @xmath933 are in @xmath710 .",
    "( here @xmath934 and @xmath935 . )",
    "but removing @xmath931 from @xmath710 reduces the scaling by at least @xmath936 .",
    "thus the minimum scaling is achieved by a single vertex extension of @xmath232 , which is at least @xmath937 .",
    "now consider a backward extension @xmath938 with @xmath939 , and fix @xmath710 with @xmath940 .",
    "we calculate @xmath941 going one vertex at a time . if @xmath942 does not contain some vertex @xmath943 such that @xmath944 or does not contain at least one vertex from each rung then by counting from the ends we see that @xmath945 . on the other hand , if @xmath710 indeed contains every @xmath197 such that @xmath946 and intersects every rung , then we claim that @xmath947 . to see this , first note that the number of vertices in @xmath710 in the interior of each triangular ladder must be at least half the number of turning points in the ladder rounded down .",
    "if @xmath149 has @xmath5 occurrences of the symbol @xmath186 then there are at most @xmath948 triangular ladders and @xmath168 has @xmath949 turning points that are on the interior of ladders .",
    "it follows that @xmath950 with this observation in hand , simply counting in the stacking order we have @xmath951      fix a stacking variable @xmath952 .",
    "assume @xmath761 is in the upper critical window : @xmath953 .",
    "we give an upper bound on @xmath954 $ ] , i.e.  the one - step expected change in the difference variable .",
    "to organise the computations we gather terms according to each edge @xmath311 of the underlying graph pair @xmath237 of @xmath149 .",
    "edges of @xmath149 contribute positively ( creation ) ; open pairs of @xmath149 contribute negatively ( destruction ) .",
    "we write @xmath955 where each @xmath956 includes a ` fidelity ' error term that accounts for the selection of edges that impact a given extension in more than one way .",
    "consider the case that @xmath957 , and @xmath958 or @xmath266 .",
    "we write @xmath959 , @xmath960 and recall that @xmath961 .",
    "we say that a pair @xmath311 is _ terminal _ if it belongs to @xmath268 , i.e.  it contains the final vertex of @xmath57 ; otherwise we say that @xmath311 is _",
    "internal_. for ease of notation , if @xmath962 then we write @xmath963 , and let @xmath964 be the variable that is identically equal to @xmath169 .",
    "we write @xmath965 , where @xmath626 is defined as follows .    a.   if @xmath311 is a terminal edge then @xmath966 , b.   if @xmath311 is a terminal open pair then @xmath967 , c.   if @xmath311 is internal then @xmath968 .    for each of these terms we will also include a ` fidelity ' error term : for terminal pairs the fidelity term is @xmath969 .    if @xmath970 and @xmath271 , we instead write @xmath971 , @xmath960 , @xmath276 and recall that @xmath972 in this case we say that only @xmath973 is terminal ; its treatment is exactly as ( i )  and  ( ii ) above .",
    "however , recall that @xmath272 and @xmath273 are partner pairs .",
    "we write @xmath974 and extend the above definition of @xmath626 as follows .",
    "a.   if @xmath311 is a partner edge then @xmath975 , b.   if @xmath311 is a partner open pair then @xmath976    we emphasise that we do not consider partner pairs to be terminal , even though one of them uses the last vertex of @xmath57 .",
    "recall that we view @xmath176 as counting the number of injections @xmath177 $ ] such that @xmath178 , @xmath179 and @xmath180 is a vertex that plays the role in the extension defined by @xmath161 for @xmath181 .",
    "we will also use the following notation :    * for any @xmath977 we let @xmath978 denote the prefix of @xmath149 of length @xmath144 . * if @xmath979 we let @xmath980 be obtained from @xmath149 by interchanging @xmath79 and @xmath186 in @xmath981 .    in the following subsections we use the following classification for a terminal open pair @xmath311 .",
    "a.   if @xmath311 is a rung and @xmath982 and @xmath983 both belong to @xmath274 we say that @xmath311 is _",
    "simple_. if @xmath311 is a stringer and @xmath984 and @xmath985 both belong to @xmath274 we say that @xmath311 is _",
    "simple_. b.   if @xmath986 and @xmath311 is the terminal rung we say that @xmath311 is _",
    "outer_. if @xmath987 , @xmath988 and @xmath311 is the terminal stringer then we say that @xmath311 is _",
    "outer_. c.   if @xmath311 is not simple or outer we say that @xmath311 is a _ fan end _ pair .",
    "we note that outer pairs are not simple , as adding @xmath209 to any @xmath989 with @xmath990 gives a variable not in @xmath274 : we apply this with @xmath991 when @xmath311 is the terminal rung or @xmath992 when @xmath311 is the terminal stringer .",
    "we also note that a fan end pair @xmath311 is aptly named , as in this case @xmath149 must end with an @xmath993-fan .",
    "we now calculate the contribution from each type of edge and open pair .",
    "the key point here is that every open pair yields a self - correcting term of the form @xmath994 .",
    "furthermore , the only open pairs that give significant error terms are terminal open pairs .",
    "thus , for any stacking variable there are only a small number of terms that need to be handled with care when we consider the variation equations .",
    "suppose that @xmath995 with @xmath996 is internal but not partner",
    ". set @xmath997 and let @xmath998 , @xmath999 and @xmath1000 .",
    "note that @xmath1001 is in @xmath274 , but @xmath1002 and @xmath1003 may or may not be in @xmath274 . in any case",
    "we have @xmath1004 ( the attentive reader might note that the first equality above is not technically correct : we should have replaced @xmath1005 by @xmath1006 .",
    "however , this gives an error term that is miniscule by comparison with the others , so we ignore it here , and in similar situations throughout this section . )    for each @xmath1007 let @xmath1008 count the number of _ forward extensions _ from @xmath1009 to copies of @xmath1010 , in which @xmath1011 , @xmath1012 $ ] and @xmath1013 $ ] .",
    "note that this is simply another variable in this ensemble , namely @xmath1014 , where @xmath1015 .",
    "we define @xmath1016 similarly ( recall that @xmath1017 ) .    since @xmath968 , applying lemma  [ lem : pat ] we have @xmath1018 \\\\ &   = { \\mathbb{e } } \\left [ { \\delta}_i ( v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i \\right ] \\\\ & = 2q^{-1 } \\sum_{f \\in w } ( y_{f(xy ) } + y_{f(yx ) } \\pm l^4 ) ( f_{f , \\pi } -   f_{f , \\pi^- } { \\mathcal{t}}u ) \\\\ & = ( 1 \\pm o(e_y e^{\\delta } ) ) \\left ( \\frac{2 v ( w^o + w^i ) } { qw } \\right ) - ( 1 \\pm o(e_y e^{\\delta } ) ) \\left ( \\frac {   2 v^- ( w^o + w^i ) } { q w } \\right ) { \\mathcal{t}}u   \\pm   \\frac { l^4v } { q } \\\\ & = \\frac{2 ( w^o + w^i ) { \\mathcal{d}}v } { q w } \\pm o(l^4vq^{-1 } ) \\pm o(e_y e^{\\delta } ) v t n^{-3/2 } \\\\ & \\ge ( 1+o(1 ) ) ( f_v + g_v - o(e_y e^{\\delta } ) - o(t^{-1 } l^4 e^2 ) ) 8tvn^{-3/2}.\\end{aligned}\\ ] ] ( note that using @xmath1019 is an overestimate for the error in the forward extensions , but we will incur such an error elsewhere , so we use the same formula here and throughout for simplicity . )      here we consider a partner open pair @xmath1020 with @xmath1021 . in this case",
    "@xmath970 , @xmath271 , @xmath1022 and @xmath1023 .",
    "note that if @xmath1024 then it is isomorphic to the case @xmath1025 , so we can restrict our attention to the latter .",
    "we write @xmath971 , @xmath960 , @xmath1026 , @xmath1027 and @xmath1028 .",
    "note that @xmath1004 for @xmath1029 we set @xmath1030 we have @xmath1018 \\\\ & = { \\mathbb{e } } [ { \\delta}_i(v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1 } \\sum_{f \\in v^- } \\sum_{z \\in x _ { f ( { \\alpha}_x ) } } ( y_{f({\\alpha}_x)z}+y_{z f({\\alpha}_x ) } \\pm l^4 ) \\left ( u _ { f ( { \\alpha}_x ) z } - \\hat{u}_f \\right ) \\\\ & = \\frac{2(w^o + w^i ) ( v - { \\mathcal{t}}v)}{qw } \\pm o ( e_y e^{\\delta}tv n^{-3/2 } )   \\pm o(l^4v / q)\\\\ & =   ( 1+o(1)){\\mathcal{d}}v 8 t n^{-3/2 } \\pm o ( e_y e^{\\delta}tv n^{-3/2 } )   \\pm o(l^4v / q ) \\\\ & \\ge ( 1+o(1 ) ) ( f_v + g_v - o(e_y e^{\\delta } ) - o ( l^4t^{-1}e^2 ) ) 8tvn^{-3/2}.\\end{aligned}\\ ] ]      let @xmath1031 be a simple rung , i.e.  the last rung of a ladder defined by @xmath149 with the property that @xmath982 and @xmath983 both belong to @xmath274 .",
    "we have @xmath885 = 2q^{-1}\\sum_{f \\in v } ( 1+c_{f(e ) } \\pm l^4)$ ] , where @xmath886 bounds the number of open pairs that close @xmath356 and also @xmath874 for some other @xmath875 ( we use lemma [ extensions ] ) .",
    "write @xmath1032 and @xmath1033 .",
    "note that @xmath1034 and @xmath1035 .",
    "since @xmath967 we have @xmath1036 = { \\mathbb{e } } \\left [ { \\delta}_i ( v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i \\right ] \\\\ & = 2q^{-1}(v^i + v^o \\pm l^4v ) - ( 2 + 4sq^{-1 } ) { \\mathcal{t}}v q^{-1 } \\\\ & = 2q^{-1}({\\mathcal{t}}v^i + { \\mathcal{t}}v^o   \\pm v^ie_{v^i } \\pm v^oe_{v^o } ) - ( 8 t n^{-3/2 } \\pm 4e_s s q^{-2 } ) { \\mathcal{t}}v \\pm o(l^4v / q ) \\\\ & = 8tn^{-3/2 } { \\mathcal{d}}v   \\pm ( 1+o(1 ) ) 8 t ( e_{v^i}/2 + e_{v^o}/2 + e_s ) vn^{-3/2 } \\pm o(l^4v / q ) \\\\ & \\ge ( 1+o(1 ) ) ( f_v + g_v - e_{v^i}/2 - e_{v^o}/2 - e_s - o(l^4 t^{-1}e^2 ) ) 8 t vn^{-3/2}.\\end{aligned}\\ ] ] the same calculation applies if @xmath311 is a simple stringer ( using @xmath1037 in place of @xmath167 ) .",
    "let @xmath1031 be an outer rung , i.e.  @xmath311 is terminal and @xmath917 .",
    "for each @xmath1038 let the variable @xmath1039 count the number of backward extensions @xmath1040 that map the last rung of @xmath152 to the open pair @xmath127 . recall that @xmath1041 is controllable and note that there can be no bad edge as @xmath145 is assumed to be large , so we can estimate @xmath1042 using lemma  [ controllable ] . since @xmath1043",
    "we have @xmath1044 & = { \\mathbb{e } } [ { \\delta}_i(v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1 } \\sum_{ab \\in q } x_{uvab } ( y_{ab}+y_{ba } \\pm",
    "l^4 ) - \\frac{4s + 2q}{q^2 } { \\mathcal{t}}v \\\\ & = 4q^{-1 } ( 1 \\pm o(e_y e^{\\delta } ) ) q^{-1 } vs -   4sq^{-2 } { \\mathcal{t}}v \\pm o(l^4v / q ) \\\\ & \\ge ( 1+o(1 ) ) ( f_v + g_v - o(e_y e^{\\delta } ) - o ( l^4t^{-1}e^2 ) ) 8tvn^{-3/2}.\\end{aligned}\\ ] ] the same calculation applies if @xmath311 is an outer stringer ( using @xmath1037 in place of @xmath167 ) .      for destruction",
    ", it remains to consider the case when @xmath1045 is a fan end , i.e.  @xmath149 ends with an @xmath993-fan and @xmath311 is the terminal rung .",
    "let @xmath1046 and @xmath1047 be obtained from @xmath149 by replacing the fan by an @xmath1048 or @xmath1049 extension .",
    "let @xmath1050 , @xmath1051 , @xmath1052 , @xmath1053 and @xmath1054 .",
    "we write @xmath1055 , where @xmath1056 denotes the forward extension , i.e.  the @xmath1057-extension from @xmath1058 ; recall that this is controllable , so we can estimate it using lemma  [ controllable ] . note that by lemma [ lem : pat ] we have @xmath1059 this implies @xmath1060 since @xmath967 we have @xmath1018 = { \\mathbb{e } } [ { \\delta}_i(v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1 } \\sum_{f \\in v^ * } ( y_{f(ab)}+y_{f(ba)}\\pm l^4 ) f_{f,\\pi } - \\frac{4s}{q^2 } { \\mathcal{t}}v   \\\\ & = \\frac{2(v^{*i } + v^{*o } ) v}{qv^ * } - \\frac{4s}{q^2 } { \\mathcal{t}}v \\pm o ( e_y e^{\\delta}tv n^{-3/2 } ) \\pm o(l^4v / q)\\\\ & = ( 1 \\pm \\tfrac{1}{2}(1+o(1))(e_{v^*}+e_{v^\\bullet}+e_{v^{*i}}+e_{v^{*o } } ) ) 8 t n^{-3/2 } v -   ( 1+e_s ) 8tn^{-3/2 } { \\mathcal{t}}v \\\\ & \\qquad \\pm o ( e_y e^{\\delta}tv n^{-3/2 } ) \\pm o(l^4v / q)\\\\ & \\ge ( f_v + g_v - ( 1+o(1 ) ) ( \\tfrac{1}{2}(e_{v^*}+e_{v^\\bullet}+e_{v^{*i}}+e_{v^{*o } } ) + e_s )   - o(e_y e^{\\delta } ) - o(l^4t^{-1}e^2 ) ) 8tvn^{-3/2}.\\end{aligned}\\ ] ]      suppose that @xmath1045 with @xmath1061 is an internal stringer edge of @xmath149 .",
    "let @xmath655 , @xmath1062 be the variables obtained from @xmath57 , @xmath964 when @xmath311 is replaced by an open pair",
    ". then @xmath1063 and @xmath1064 .    to estimate the creation fidelity term consider @xmath1065 and let @xmath1066 be obtained from @xmath655 by making @xmath1067 an edge .",
    "consider the construction of @xmath1066 one vertex at a time in @xmath149-order .",
    "we see the same extensions as for @xmath655 , except that at one step there is an extra edge incident to the new vertex .",
    "this reduces the scaling for this vertex by a factor of @xmath1068 .",
    "when we use lemma  [ extensions ] to bound the number of copies of @xmath832 , we do not get the full @xmath1069 reduction if @xmath1070 .",
    "however , @xmath638 must have at least two new vertices in order for creation fidelity to be an issue , and therefore @xmath1071 .",
    "note that @xmath1072 .",
    "so @xmath1073 , and by lemma  [ extensions ] we estimate @xmath1074 .    since @xmath968 we have @xmath1075 & = { \\mathbb{e } } \\left [ { \\delta}_i ( v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i \\right ] \\\\ & = 2q^{-1 } v^+ ( 1 \\pm o(l^{4|v| } e^2 ) ) - 2 q^{-1 } v^{+- } ( 1 \\pm o(l^{4|v|}e^2 ) ) \\cdot { \\mathcal{t}}u    \\\\ & = 2q^{-1 } ( v^+ - { \\mathcal{t}}v^+ ) \\pm o(l^{4|v|}e^2q^{-1}v^+ ) \\\\ & = ( 1+o(e_q ) ) 2q^{-1 } { \\mathcal{d}}v^+ \\pm o(l^{4|v|}e^2q^{-1}v^+ ) \\\\ & = \\pm \\left [ ( 1+o(1 ) ) t^{-1 } e_{v^+ } \\pm o(t^{-1}l^{4|v|}e^2 ) \\right ] v n^{-3/2}. \\\\",
    "\\end{split}\\ ] ]      suppose that @xmath1045 with @xmath1076 is the partner edge of @xmath149",
    ". we can write @xmath1077 .",
    "we estimate the creation fidelity term as for internal creation . then @xmath1044 & = { \\mathbb{e } } [ { \\delta}_i(v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i ] \\\\ & = 2q^{-1 } \\sum_{f \\in s^{\\pi^-}_{uv } } \\sum_{z \\in x _ { f ( { \\alpha}_x ) } } ( x_{f({\\alpha}_x)z } - x_{f({\\alpha}_x)}qn^{-2 } ) \\\\ & = 2q^{-1 } ( v^+(1 \\pm o(l^{4|v|}e^2 ) ) - { \\mathcal{t}}v^+ ) , \\\\ & = ( 1+o(e_q ) ) 2q^{-1}{\\mathcal{d}}v^+ \\pm o(l^{4|v|}e^2q^{-1}v^+),\\end{aligned}\\ ] ] which gives the same expression as for internal creation .",
    "finally , suppose that @xmath311 is the terminal edge of @xmath149 .",
    "then @xmath1078 is @xmath148 , @xmath1079 or @xmath209 , and if @xmath1080 then @xmath1081 ( otherwise @xmath311 would be partner ) .",
    "let @xmath655 be the variable obtained by changing @xmath311 to an open pair , i.e.  replacing @xmath163 by @xmath162 in @xmath1082 .",
    "note that @xmath1083 and @xmath1064 .",
    "we estimate the creation fidelity term as for internal creation .",
    "since @xmath1084 we have @xmath1075 & = { \\mathbb{e } } \\left [ { \\delta}_i ( v^e ) - { \\delta}_i({\\mathcal{t}}v^e ) \\mid { \\mathcal{f}}_i \\right ] \\\\ & = 2q^{-1 } v^+(1 \\pm o(l^{4|v|}e^2 ) ) - { \\mathcal{t}}v/(tn^{3/2 } ) , \\end{split}\\ ] ] which gives the same expression as for internal creation .",
    "now we combine all the estimates in this section to show that @xmath1085 forms a supermartingale .",
    "recall that @xmath1086 = \\sum_{e \\in \\pi } \\pm { \\mathbb{e } } [ { \\delta}_i({\\mathcal{d}}v^e ) \\mid { \\mathcal{f}}_i]$ ] , where the summand is positive for an edge and negative for an open pair .",
    "there are @xmath673 edges , each giving a creation term of @xmath1087 .",
    "there are @xmath674 open pairs , each giving a destruction term in which the main term is a self - correction term of @xmath1088 .",
    "there are additional error terms that come from terminal open pairs , which we denote by @xmath1089 ; the form of this error term depends on the form of the terminal open pair .",
    "the constants @xmath1090 are carefully chosen to ensure that this term does not spoil the supermartingale condition .    *",
    "if the terminal open pair is outer then there is no additional error term at all , i.e.  @xmath1091 in this case .",
    "* if the terminal open pair is simple then the error term is @xmath1092 note that @xmath1093 * if the terminal open pair is a fan end , i.e.  the last rung in an @xmath993-fan , then the error term is @xmath1094 note that the sequences defining @xmath775 and @xmath1095 each have @xmath1096 fewer symbols than @xmath149 , but also have an additional ` o ' or ` e ' . thus @xmath1097    observe that @xmath168 can have two terminal open pairs ( both simple , or one simple and one fan end ) , and we must add the estimates from both to get a worst case bound .",
    "writing @xmath1098 in the natural way , we have @xmath1099 we have @xmath1100}{8tvn^{3/2 } } & \\le \\frac{e(v)}{8 t } ( ( 1+o(1 ) ) t^{-1 } e_{v^+ } + o(t^{-1}l^{4|v|}e^2 )   )   - ( 1+o(1 ) ) o(v ) ( f_v + g_v ) \\\\ & \\quad \\quad + ( 1+o(1 ) ) e_{\\rm add } + o(e_y e^{\\delta } ) + o(l^4 t^{-1 } e^2).\\end{aligned}\\ ] ] as for general extensions we write @xmath1101 where we bound the last term by @xmath1102 .",
    "note that @xmath1103 since @xmath655 and @xmath57 have the same length and the same number of copies of o and e , we have @xmath1104 and so @xmath1105",
    ". we also have @xmath1106 ( and there is no @xmath896 term if @xmath1107 ) . thus @xmath1108}{8tvn^{-3/2 } } & \\le ( 1+o(1 ) ) \\tfrac{e(v)}{8 t } ( t^{-1 } e_{v^+ } + o(t^{-1}l^{4|v|}e^2 ) ) - ( 1+o(1 ) ) ( o(v ) ( f_v + g_v ) - e_{\\rm add }   ) \\\\ & \\quad + o(e_y e^{\\delta } ) + o(l^4 t^{-1 } e^2 ) - ( ( \\tfrac{e(v)}{8t^2 } - o(v ) ) e_v + \\tfrac{e'_v}{8 t } ) \\\\ & \\le \\tfrac{e(v)}{8t^2 } \\cdot 2(g_{v^+}-g_v ) + o(v ) g_v + ( 1+o(1))e_{\\rm add }    - f_v/2 \\\\ & \\quad - ( \\tfrac { { \\vartheta}'/{\\vartheta}}{8 t } - \\tfrac{e(v)}{8t^2 } + \\tfrac{1}{2})\\cdot 2g_v    + o(e_y e^{{\\delta } } )   + o(t^{-2}l^{4|v|}e^2 ) + o ( e_{v^+ } t^{-2 } ) + o(e_v ) \\\\ & \\le g_v \\left [ o(v )   +   \\tfrac{e(v)}{2 t }   - \\tfrac { { \\vartheta}'/{\\vartheta } } { 4 t } - 1 \\right ] + 2(1+o(1))g_{\\rm add } - \\tfrac { f_v}{2 } + ( 1+o(1 ) ) f_{\\rm add } \\\\ & \\quad + o(e_y e^{{\\delta } } )   + o(t^{-2}l^{4|v|}e^2 ) + o ( e_{v^+ } t^{-2 } ) + o(e_v).\\end{aligned}\\ ] ] since @xmath1109 dominates for @xmath681 and @xmath1110 dominates otherwise , we have @xmath899 \\le 0 $ ] .    finally , note",
    "that the above calculation would have still been valid if we had replaced @xmath1111 by @xmath1112 ; we will use this observation for open degree variables to control degree variables in the next subsection .",
    "we start by recalling we can not apply our general strategy to vertex degree variables , as the function @xmath1113 is not approximately non - increasing , so we give a separate argument for these variables .",
    "consider the degree variable @xmath1114 for any vertex @xmath136 and step @xmath1115 . for each @xmath1116 , the probability that we choose an edge incident to @xmath136",
    "is @xmath1117 using the observation in the previous subsection that we can bound the relative error in @xmath1118 by @xmath1119 .",
    "thus we can couple @xmath1114 to a sum of independent indicator variables with mean @xmath1120 since @xmath1121 and @xmath1122 we have @xmath1123 , so if we do not have @xmath1124 then @xmath1125 deviates from its mean by more than @xmath1126 . by chernoff bounds , whp this does not occur for any vertex @xmath136 .",
    "now recall that for any variable @xmath57 other than the vertex degrees , it suffices to show @xmath1127 and @xmath1128 .",
    "fix @xmath1129 , a non - edge @xmath114 , and let @xmath1130 .",
    "let @xmath237 be the underlying graph pair of @xmath149 and @xmath1131 .",
    "since @xmath1132 and @xmath1133 , it suffices to show @xmath1134    we analyse the contributions from each edge @xmath1135 $ ] separately .",
    "there are two cases , according to whether @xmath311 is an open pair or an edge .",
    "first suppose @xmath1136 is an open pair ( this can be either a rung or a stringer ) .",
    "let @xmath800 be obtained from @xmath237 by ` gluing a @xmath163-variable on @xmath1137 ' as follows .",
    "let @xmath801 be a new vertex , @xmath802 , @xmath1138 and @xmath1139 .",
    "note that this definition depends on the order of @xmath1140 and @xmath1141 .",
    "we analyse closures of @xmath311 by adding the edge corresponding to @xmath1142 .",
    "let @xmath1143 , @xmath1144 and @xmath809 , where all scalings are with respect to @xmath800 . let @xmath812 be the minimal set @xmath710 with @xmath1145 that achieves @xmath1146 . by lemma [ extensions ] , we can bound the probability @xmath810 that @xmath238 is affected by closing an ordered edge corresponding to @xmath311 by @xmath1147 as this event is contained in the event that the new edge is contained in an extension to @xmath812 .",
    "( we calculate the impact of closure of @xmath311 on the one - step variance of @xmath57 . for many edges we could get better bounds for inner open pairs by working instead with @xmath707 , noting that @xmath812 is the same for @xmath57 and @xmath1148 , but this is not necessary for the bounds we prove here . ) furthermore , we can bound the magnitude in the change in @xmath57 by @xmath1149 since @xmath817 , the one - step variance in @xmath57 satisfies @xmath816 we can bound @xmath813 from below by accounting for the scalings contributed by vertices in @xmath149 order .",
    "each vertex contributes at least an additional @xmath1150 to the scaling .",
    "if @xmath1151 it follows that @xmath1152 , which gives the desired bound on the one - step variance .    it remains to consider @xmath1153 .",
    "first consider the case @xmath1154 .",
    "we view the extension from @xmath232 to @xmath1155 as a sequence of two one - vertex extensions with the extension to @xmath801 taken last .",
    "note that each of these two steps is an extension in the stacking ensemble .",
    "if either of these steps is not a @xmath1156-extension then we have @xmath1157 ( there can not be any @xmath1158-extension as @xmath812 contains the open pair @xmath1159 ) .",
    "this gives the desired bound on the one - step variance .",
    "so we may assume that both steps are @xmath1156-extensions .",
    "now we can use stacking variables to estimate @xmath810 and @xmath848 , since @xmath1160 induces the extension @xmath1161 , and @xmath1162 , where @xmath1163 .",
    "then we can use the better bounds @xmath1164 and @xmath1165 in the above calculation , obtaining @xmath1166 .",
    "this suffices , as @xmath1167 and @xmath1168 .",
    "finally , consider @xmath1169 .",
    "here we have @xmath1170 , @xmath1171 and @xmath1172 .",
    "we bound @xmath848 by taking the extension from @xmath827 in two steps : first an extension from @xmath831 to a fan @xmath1173 and then a forward extension to the remainder of @xmath188 .",
    "we can estimate the latter with a proportional error of @xmath1174 .",
    "it remains to estimate the number of extensions to @xmath1173 .",
    "if we consider any time @xmath14 for which @xmath1173 is controllable then we have @xmath1175 , so again we can improve the above calculation to obtain @xmath1166 .",
    "this suffices as @xmath1176 and @xmath1168 . on the other hand ,",
    "if the fan @xmath1173 is not controllable at time @xmath14 then either @xmath1173 is an extension to a single vertex or @xmath1177 . if @xmath1177 we have @xmath1178 , which suffices as above . if @xmath1173 is an extension to a single vertex we estimate @xmath1179",
    "this gives @xmath1180 , which suffices as @xmath1181 .",
    "now suppose that @xmath357 is an edge and @xmath1182 where @xmath1183 .",
    "let @xmath1184 and @xmath1185 , where all scalings are with respect to @xmath852 .",
    "let @xmath812 be the minimal set @xmath710 with @xmath1186 that achieves @xmath1146 .",
    "now we have @xmath811 and @xmath1187 .",
    "it follows that the one - step variance in @xmath57 satisfies @xmath1188 again we calculate the scaling @xmath1189 one vertex at a time .",
    "each vertex contributes at least an additional @xmath1150 to the scaling , and @xmath1141 contributes at least @xmath1190 , since the edge @xmath182 is switched to an open pair in @xmath1191 . if @xmath1192 we have @xmath1193 , so @xmath1194 which is sufficient , as @xmath357 implies @xmath1195 .",
    "it remains to consider the case @xmath1196 , i.e.  @xmath1197 and @xmath311 creates the first @xmath163-extension of @xmath149 ( using the fact that @xmath57 is not a vertex degree variable ) .",
    "then @xmath1198 and @xmath1199 , so @xmath1200 , which suffices as @xmath1168 .",
    "thus we have verified the trend and boundedness hypotheses for stacking variables . by freedman s inequality , this completes the proof of theorem [ stacking ] , and so of the lower bound in theorem [ edges ] .",
    "after some establishing some preliminary facts in subsection  [ sec : pre ] , we will prove theorem  [ indep ] in section  [ sec : indep ] . then we will apply a similar and easier argument in section  [ sec : upper ] to obtain the upper bound that completes the proof of theorem  [ edges ] .",
    "we start with an observation that will be used many times in this section to estimate the one - step variances due to destruction .",
    "suppose @xmath57 is a variable , @xmath1201 is an open pair in @xmath57 , and we want to estimate the one - step variance @xmath1202 due to destruction of @xmath311 .",
    "suppose that at most @xmath718 configurations in @xmath57 can be closed in any given step .",
    "consider the bipartite graph @xmath18 with parts @xmath1203 , where @xmath1204 is the set counted by @xmath57 , @xmath1205 is the set of ordered open pairs , and @xmath1206 is adjacent to @xmath1207 if selecting @xmath191 as an edge closes @xmath356 . by assumption @xmath1208 for all @xmath1207 .",
    "we also have @xmath1209 . then @xmath1210    next we prove some lemmas on counting open pairs . for",
    "any set @xmath125 let @xmath1211 be the number of ordered open pairs in @xmath125 at time @xmath14 .",
    "for any sets @xmath1212 let @xmath1213 be the number of open pairs @xmath127 with @xmath1214 , @xmath1207 at time @xmath14 .",
    "[ opens ] whp for any set @xmath125 of size @xmath13 we have the following estimates .",
    "a.   suppose that @xmath1215 , @xmath1216 , @xmath1217 and any vertex has at most @xmath904 neighbours in @xmath125 .",
    "then @xmath1218 . b.   if @xmath1216 and @xmath1219 then @xmath1218 . c.   if @xmath1220 then @xmath1221 .",
    "* proof . *",
    "first consider statements ( i ) and ( ii ) .",
    "we use critical window analysis for @xmath1222 to prove the bound @xmath1223 , where @xmath1224 .",
    "this suffices as @xmath1225 .",
    "we use the window @xmath1226 $ ] , where @xmath1227 .",
    "first we use coupling to the erds - rnyi process to show that @xmath1228 does not enter the critical window at @xmath1229 .",
    "this follows from the trivial upper bound @xmath1230 , and the lower bound @xmath1231 , obtained by subtracting the number of paths of length @xmath29 starting in @xmath125 in the random graph .",
    "next we establish the trend hypothesis that @xmath1232 is a supermartingale while @xmath1228 is in its critical window .",
    "the expected change in @xmath1228 is @xmath1233 = - 2q^{-1 } \\sum_{ab \\in q_s } ( y_{ab}+y_{ba } ) = -8tn^{-3/2 } ( 1+o(e_y ) ) q_s.\\ ] ] we also note that @xmath1234 and @xmath1235 . using @xmath1236 and @xmath1237 by lemma [ qysmall ] , we have @xmath1238 \\le - ( 1+o(1))8tn^{-3/2 } \\hat{q}s^2 \\cdot ( e_o - g_o   - o(e_y ) +   ( \\tfrac{1}{8t(l+t ) } - 1 ) e_o ) \\le 0.\\ ] ]    for the boundedness hypothesis , we take a union bound over @xmath125 and apply freedman s inequality .",
    "write @xmath1239 and @xmath1240 for the maximum one - step change and variance of @xmath1228 .",
    "since @xmath1227 , it suffices to show that @xmath1241 , as by ( [ vard ] ) this also implies @xmath1242 .",
    "this holds by our assumptions , using @xmath1243 for ( i ) or @xmath1244 for ( ii ) .",
    "it remains to prove ( iii ) . in this case",
    "we write @xmath1245 .",
    "note that the bound is trivial for @xmath1246 , as @xmath1220 implies @xmath1247 .",
    "for @xmath1248 we use critical window analysis with the window @xmath1249 $ ] , where @xmath1250 .",
    "when @xmath1228 is in the critical window we estimate @xmath1251 \\le - ( 1 + o(1))8tn^{-3/2 } ( e_o - g_o)$ ] .",
    "we write @xmath1252 and note that @xmath1253 .",
    "thus we obtain the trend hypothesis @xmath1238 \\le - ( 1 + o(1))8tn^{-3/2 } \\cdot ( e_o - g_o +   ( \\tfrac{1}{8t(l+t ) } - 1 ) e_o ) \\le 0.\\ ] ] for the boundedness hypothesis we use @xmath1254 , which implies @xmath1255 , so we can apply freedman s inequality .",
    "we also need a bipartite version of lemma [ opens](i ) .",
    "the proof is essentially the same , so we omit it .",
    "[ opens - bip ] suppose @xmath1256 , @xmath1216 and @xmath1257",
    ". then whp we have @xmath1258 for any sets @xmath123 , @xmath125 of respective sizes @xmath1259 , @xmath13 such that any vertex that has a neighbor in one of these sets has at most @xmath904 neighbors in the other",
    ".    * proof .",
    "* we apply the same method as in lemma [ opens](i ) . for @xmath1222",
    "we prove @xmath1260 , where @xmath1261 .",
    "we use the window @xmath1249 $ ] , where @xmath1227 . at @xmath1229 , coupling to the random graph gives @xmath1262 , so @xmath1263 does not enter the critical window . the same calculation as before shows that @xmath1264 is a supermartingale while @xmath1263 is in its critical window .",
    "for the boundedness hypothesis , we have @xmath1265 and @xmath1266 .",
    "next we establish some density estimates . for a set @xmath125 ,",
    "let @xmath1267 denote the number of edges of @xmath1268 in @xmath125 .",
    "[ density ] whp for any set @xmath125 of size @xmath13    a.   if @xmath1269 then @xmath1270 , b.   if @xmath1220 then @xmath1271 .",
    "* for ( i ) , we estimate the probability that some such @xmath125 spans @xmath1272 edges , taking a union bound over @xmath125 and the steps at which the edges are chosen , for which there are @xmath1273 choices . for a specified step at time @xmath14 ,",
    "the probability of choosing an edge in @xmath125 is @xmath1274 , using lemma [ opens](ii ) .",
    "thus the failure probability @xmath1275 satisfies @xmath1276 then @xmath1277 .    for ( ii )",
    ", we estimate the probability of choosing an edge in @xmath125 as @xmath1278 by lemma [ opens](iii ) .",
    "then @xmath1279 so @xmath1280 .",
    "we can deduce a bound on the number of vertices of large degree in a given set .",
    "let @xmath1281 be the set of vertices that have degree at least @xmath1282 in @xmath125 .",
    "[ large - degs ] whp for any set @xmath125 of size @xmath13    a.   if @xmath1269 and @xmath1283 then @xmath1284 , b.   if @xmath1220 and @xmath1285 then @xmath1286",
    ".    * proof . * for ( i ) , suppose on the contrary that there is @xmath1287 of size @xmath1288 . then @xmath1289 is a set of size at most @xmath1290 that spans at least @xmath1291 edges , which contradicts lemma [ density](i ) .",
    "similarly , for ( ii ) , if there is @xmath1287 of size @xmath1292 then @xmath1293 and @xmath1294 edges , which contradicts lemma [ density ] .",
    "next we introduce absolute constants @xmath1295 .",
    "we emphasize that these constants are chosen in the order listed ; that is , @xmath1296 is chosen to be sufficiently large , @xmath1297 is chosen to be sufficiently large relative to @xmath1296 and @xmath1298 is chosen to be sufficiently large relative to @xmath1299 . ( in an attempt to make clear the role these constants play , we do not substitute actual values . but for concreteness we note that they can take the values @xmath1300 . ) these constants will control the polylogarithmic factors in our arguments . when these factors are unimportant we will use ` tilde ' notation : we write @xmath1301 and @xmath1302 if @xmath1303 for some absolute constant @xmath232 .",
    "given a vertex @xmath166 and a set @xmath18 , let @xmath1304 denote the number of ordered triples @xmath1305 of vertices such that @xmath1306 is open , @xmath1307 and @xmath127 , @xmath128 are edges .",
    "[ wxh ] whp for every set @xmath18 of size @xmath904 with @xmath1308 with the property that for any vertex @xmath190    a.   there are at most @xmath886 edges @xmath127 with @xmath1309 , and b.   there are at most @xmath1310 open pairs @xmath127 with @xmath1309 ,    we have @xmath1311 for all @xmath1312 .    * proof . * we start with some definitions .",
    "we say that a vertex @xmath190 is _ heavy with respect to @xmath18 _ at time @xmath14 if at least @xmath1313 pairs @xmath127 with @xmath1314 are open .",
    "we say that @xmath190 is _ obese with respect to @xmath18 _ at time @xmath14 if at least @xmath1315 pairs @xmath127 with @xmath1309 are open . for any obese vertex @xmath190",
    "we declare some subset of the open pairs @xmath1316 with @xmath1309 _ inactive _ so that the active open degree into @xmath18 is @xmath1317 .",
    "we stress that the status of an open pair as active or inactive can change back and forth in the course of the process , but once a pair is chosen as an edge its status as active or inactive remains the same for the rest of the process . for @xmath1318",
    "let @xmath1319 denote the number of ordered triples @xmath1305 of vertices such that @xmath1306 is open , @xmath1307 , the pairs @xmath127 and @xmath128 are both active , and their status depends on @xmath399 : if @xmath1320 then both are open , if @xmath1321 then both are edges , and if @xmath1322 then @xmath127 is open and @xmath128 is an edge",
    ". thus @xmath1323 has the same definition as @xmath1304 , with the additional condition that @xmath127 and @xmath128 are active at the steps they are chosen as edges .",
    "first we show that there is a negligible difference between @xmath1304 and @xmath1323 , so it suffices to bound the latter .",
    "let @xmath186 be the set of vertices that are obese with respect to @xmath18 .",
    "we claim that @xmath1324 for suppose not , and consider @xmath1325 of size @xmath1326 . then @xmath1327 and @xmath1328 .",
    "this contradicts lemma [ opens](iii ) , so @xmath1329 .",
    "applying lemma [ opens](iii ) again , we bound the number of open pairs in @xmath1330 by @xmath1331 .",
    "thus the probability that we choose an edge between an obese vertex and @xmath18 is at most @xmath1332 . by coupling with a binomial variable and taking a union bound over @xmath18 , whp for all @xmath18 we bound the number of edges in @xmath1330 by @xmath1333 . by assumption ( i )",
    "this gives @xmath1334 , which is negligible by comparison with the desired bound on @xmath1304 .",
    "for the remainder of the proof , we use critical window analysis to prove the bounds @xmath1335 for @xmath1319 we use the critical windows @xmath1336 $ ] , where @xmath1337 and @xmath1338 .",
    "this suffices as @xmath1339 for @xmath1340 and @xmath1341 .",
    "first we use coupling to the erds - rnyi process to show that the variables do not enter the critical windows for @xmath1342 . when @xmath1320 we use the trivial bound @xmath1343 ( since @xmath1344 is large compared with @xmath1345 ) .",
    "when @xmath1322 we bound @xmath1346 by picking @xmath1307 then a neighbour of @xmath768 . since the random graph has degrees @xmath1347 for @xmath1246 we obtain @xmath1348",
    "when @xmath1321 we bound @xmath1323 by picking @xmath1307 then a common neighbour , for which there are at most @xmath1349 choices in the erds - rnyi process , so @xmath1350 .",
    "next we prove the trend hypothesis , i.e.  that @xmath1351 is a supermartingale while @xmath1319 is in its critical window .",
    "we analyse the contributions to @xmath1352 $ ] separately according to each of the pairs @xmath1306 , @xmath127 , @xmath128 .",
    "note that we can not count the contribution of the destruction of @xmath127 or @xmath128 when @xmath190 is obese because we might only change the status of some inactive pair when such an active pair @xmath1316 is closed .",
    "let @xmath1353 denote the set of @xmath1309 such that @xmath127 is open and active .",
    "the contribution to @xmath1354 $ ] due to the closure of pair @xmath1355 or @xmath128 where @xmath190 is obese is at most @xmath1356 similarly , the contributions to @xmath1357 $ ] due to the closure of pair @xmath128 where @xmath190 is obese is at most @xmath1358 we will see shortly that these contributions are negligible .",
    "when we calculate the expected change due to destruction of @xmath127 or @xmath128 below we restrict our attention to vertices @xmath190 that are not obese .    in the calculation of the expected change in @xmath1351 we write @xmath1359 , noting that @xmath1360 , @xmath1361 , @xmath1362 .",
    "for each open pair @xmath640 we have a destruction term of @xmath1363 .",
    "this gives self - correction against a corresponding @xmath1364 term in @xmath1365 .",
    "for each edge we have a creation term of @xmath1366 .",
    "note that @xmath1367 and @xmath1368 .",
    "using @xmath1369 we obtain @xmath1370 & \\le - ( 1+o(1))8tn^{-3/2 } \\cdot ( 3(e_0-g_0 ) + ( \\tfrac{1}{8t(l+t ) } - 3 ) e_0 ) \\le 0 . \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{z}}w^1_{xh } \\mid { \\mathcal{f}}_i ] & \\le - ( 1+o(1))8tn^{-3/2 } \\cdot ( 2(e_1-g_1 ) - \\tfrac{1}{8t^2 } e_1 + ( \\tfrac{1}{4t^2 } - 2 ) e_1 ) \\le 0 . \\\\ { \\mathbb{e } } [ { \\delta}_i { \\mathcal{z}}w^2_{xh } \\mid",
    "{ \\mathcal{f}}_i ] & \\le - ( 1+o(1))8tn^{-3/2 } \\cdot ( e_2-g_2 - \\tfrac{1}{4l^2 t } e_2 + ( \\tfrac{1}{8t(l+t ) } - 1 ) e_2 ) \\le 0.\\end{aligned}\\ ] ]    it remains to show the boundedness hypothesis .",
    "note that since we can restrict our attention to @xmath1248 the functions @xmath1371 are approximately decreasing .",
    "for each pair @xmath311 in @xmath1319 let @xmath848 bound the one - step change and @xmath1202 the one - step variance due to @xmath311 . to apply freedman s inequality , since @xmath1338 , it suffices to show @xmath1372 and @xmath1373 , where @xmath1374 is the maximum _ positive _ one - step change in @xmath1375 . in some cases",
    "we will show the stronger statement @xmath1376 , which clearly gives the desired bound on @xmath1377 , and implies the desired bound for @xmath1202 by ( [ vard ] ) .",
    "first we note that the required bounds for creation hold trivially as @xmath1378 for @xmath1379 and @xmath1380 for @xmath1381 .    for destruction",
    "we obtain negative changes in @xmath1382 , so we only need to bound @xmath1202 .",
    "first we introduce some additional definitions .",
    "let @xmath1383 be the set of heavy vertices @xmath190 such that @xmath1384 is open .",
    "appealing to the control we maintain on @xmath1385 , we have @xmath1386 let @xmath268 be the set of vertices @xmath454 such that @xmath1387 is open and @xmath454 has at least @xmath1388 neighbors in @xmath401 .",
    "by lemma  [ large - degs ] we have @xmath1389 here we used @xmath1390 and @xmath1391 , which follows from the fact that we choose @xmath1298 to be large relative to @xmath1297 , to get the lower bounds on @xmath1282 required for lemma  [ large - degs ] .    now consider destruction for the variables",
    "@xmath1392 for @xmath1393 .",
    "we write @xmath1394 , where @xmath1395 accounts for the change in @xmath1396 that comes from the choice of an edge @xmath1397 where @xmath1398 , and @xmath1399 accounts for the rest . for @xmath1399",
    "the bound on @xmath1202 will follow from the bound on @xmath848 and ( [ vard ] ) .",
    "the contribution to @xmath848 from the closure of pairs @xmath127 or @xmath1400 is clearly sufficiently small .",
    "next consider the contribution from closure of pairs @xmath1401 where @xmath1402 is not heavy .",
    "for @xmath1320 this is @xmath1403 , which suffices as @xmath1404 is much larger as @xmath1297 is large relative to @xmath1296 . for @xmath1322 , appealing to condition ( i ) in the statement of the lemma , the contribution is at most @xmath1405 , which suffices as @xmath1406 and @xmath1407 is large relative to @xmath1296 . now consider the contribution from the closure of pairs @xmath1401 where @xmath190 is heavy ( but we do not select @xmath1408 with @xmath1409 ) . since we only consider active pairs and @xmath1248 ,",
    "this is at most @xmath1410 for @xmath1320 , or @xmath1411 for @xmath1322 .",
    "thus we have the required bound on @xmath848 for @xmath1399 .    for @xmath1340",
    "it remains to bound @xmath1202 for @xmath1395 .",
    "the probability that an edge @xmath1397 with @xmath1412 is chosen is at most @xmath1413 , and the resulting change in @xmath1414 is at most @xmath1415 for @xmath1416 , or @xmath1417 for @xmath1418 .",
    "suppose first that @xmath1419 .",
    "then for @xmath1320 we have @xmath1420 , which suffices as @xmath1421 .",
    "also , for @xmath1322 we have @xmath1422 , which suffices as @xmath1423 ( recalling that we restrict our attention to @xmath1248 ) .",
    "now suppose @xmath1424 .",
    "then for @xmath1320 we have @xmath1425 and for @xmath1322 we have @xmath1426 as @xmath1298 is chosen to be large relative to @xmath1427 these bounds suffice .",
    "it remains to bound @xmath1202 for destruction of @xmath1428 .",
    "let @xmath1001 be the set of vertices that are open to @xmath166 and have at least two neighbors in @xmath18 . by",
    "our bound on @xmath133 we have @xmath1429 .",
    "let @xmath1430 be the set of vertices that are open to @xmath166 and have at least @xmath1431 neighbors in @xmath1001 .",
    "note that by lemma  [ large - degs ] we have @xmath1432 here we used @xmath1433 and @xmath1434 , which follows from the fact that @xmath1435 is chosen to be large relative to @xmath1407 , to get the lower bound on @xmath1282 required for lemma  [ large - degs ] .",
    "we write @xmath1436 , where @xmath1395 accounts for the change in @xmath1428 that comes from the choice of an edge @xmath1397 where @xmath1437 , and @xmath1399 accounts for the rest . to",
    "bound @xmath1202 for @xmath1399 , note that by condition ( ii ) in the statement of the lemma we have @xmath1438 . for @xmath1395 ,",
    "suppose first that @xmath1439 .",
    "then @xmath1440 , which suffices as @xmath1441 .",
    "on the other hand , if @xmath1442 then @xmath1443 , which also suffices because @xmath1298 is chosen to be large relative to @xmath1427 .",
    "let @xmath1444 and @xmath1445 .",
    "we show whp @xmath1446 .",
    "note that @xmath1447 , so it suffices to bound @xmath1448 .",
    "we need to estimate the probability that there is an independent set @xmath294 of size @xmath1449 .",
    "we will take a union bound over all such sets @xmath294 together with information about how neighborhoods in @xmath1450 intersect @xmath1451 .",
    "we define a sequence of vertices @xmath1452 , where each @xmath1453 is chosen to maximise the number of neighbours in @xmath294 that are not also neighbors of some @xmath1454 for @xmath1455 . more precisely , the @xmath1456th ` hole ' is @xmath1457 , where @xmath1453 is chosen to maximise @xmath1458 .",
    "we stop the sequence if there are no vertices that give more than @xmath1459 new neighbours in @xmath294 .",
    "note that @xmath1460 for @xmath1461 $ ] , as @xmath294 is independent .",
    "we say that a hole is ` large ' if has size more than @xmath1462 .",
    "we let @xmath1463 be the set of @xmath1456 such that @xmath1464 is large , @xmath1465 { \\setminus}z_a$ ] , @xmath1466 , @xmath1467 , @xmath1468 . for @xmath1469",
    "we write @xmath1470 \\}$ ] , where @xmath1471 is selected at step @xmath1472 , and @xmath1472 is increasing in @xmath399 . for @xmath1473",
    "we specify the entire neighbourhood of @xmath1453 in @xmath1268 : we write @xmath1474 and @xmath1475 \\}$ ] , where @xmath1471 is selected at step @xmath1472 , and @xmath1472 is increasing in @xmath399 .",
    "we will estimate @xmath539 , where @xmath514 is the event that there is an independent set @xmath294 with some fixed choices of @xmath454 , @xmath1453 , @xmath1476 for @xmath1461 $ ] and @xmath1477 for @xmath1473 .",
    "we will refer to these choices of hole sizes , vertices with large neighborhoods in @xmath294 and vertex degrees as the _ initial data _ that defines @xmath1478 .",
    "note that by lemma [ large - degs ] we can assume @xmath1479 also , using our bounds on vertex degree variables , for @xmath1473 , @xmath1480 $ ] we can assume @xmath1481    now in addition to the initial data , we fix the independent set @xmath294 and the specific edges and appearance times @xmath1482 for @xmath1483 $ ] and @xmath1482 for @xmath1484 $ ] .",
    "we let @xmath1485 be the event @xmath294 is independent and all the specified edges appear at the specified steps of the process .",
    "note that @xmath1478 is a union of events of the form @xmath1486 . to estimate the probability of the event @xmath1487 , for each step",
    "@xmath5 we need to estimate the probability that the selected edge is compatible with @xmath1486 , conditional on the history of the process .",
    "we say @xmath5 is a _ selection step _",
    "if @xmath5 is one of @xmath1472 for @xmath1473 , @xmath1480 $ ] or @xmath1469 , @xmath1488 $ ] ; then the selected edge is specified by @xmath1486 , so the required probability is simply @xmath1489 . for other @xmath5 , the required probability is @xmath518 , where @xmath519 is the number of ordered open pairs that can not be selected at step @xmath5 when @xmath1486 occurs .",
    "if @xmath1490 is a selection step write @xmath520 and @xmath1491",
    ". then we estimate @xmath1492 to estimate @xmath519 , we classify open pairs that can not be selected at step @xmath5 as follows .",
    "* let @xmath1493 be the number of ordered open pairs of the form @xmath1494 for some @xmath1473 , @xmath1495 $ ] .",
    "* let @xmath1496 be the number of ordered open pairs of the form @xmath1497 or @xmath1498 where @xmath1499 and @xmath1500 .",
    "* let @xmath1501 be the number of ordered open pairs @xmath127 such that selecting @xmath1502 would close an open pair of the form @xmath1503 for @xmath1469 , @xmath1488 $ ] .",
    "* let @xmath1504 be the number of ordered open pairs in @xmath294 that are not contained within any hole .",
    "we write @xmath1505 , where @xmath1506 corrects for any overcounted pairs .    to estimate @xmath1493 , for @xmath1473 define @xmath1507 to be the value of @xmath1480 $ ] such that @xmath1508 , i.e.  @xmath1509 edges have been selected at @xmath1453 .",
    "let @xmath1510 and @xmath1511 .",
    "note that the number of ordered open pairs @xmath1494 with @xmath1512 , @xmath1513 is @xmath1514 .",
    "also , by the bound on codegrees , any vertex has at most @xmath886 neighbours in @xmath1515 .",
    "then by lemma [ opens](i ) whp @xmath1516 if @xmath1517 and @xmath1518 .",
    "since @xmath1519 this holds for @xmath1520 , so we can write @xmath1521 .",
    "the bound on co - degrees also implies that the number of open pairs that can be counted by more than one @xmath1522 is at most @xmath1523 , which is negligible .",
    "thus @xmath1524 using control on the open degree of vertices , we can also estimate @xmath1525 by @xmath1526    to estimate @xmath1501 , we say an open pair that closes @xmath1503 for some @xmath1469 , @xmath1488 $ ] is _ outer _ if it contains @xmath1453 or _ inner _ otherwise .",
    "we write @xmath1527 , where an ordered pair counted by @xmath1501 is counted by @xmath1528 if it is inner or @xmath1529 if it is outer .",
    "let @xmath1515 be the set of @xmath1530 with @xmath1488 $ ] such that @xmath1503 is still open , and write @xmath1531 .",
    "each @xmath1530 in @xmath1515 contributes @xmath1532 to @xmath1528 and @xmath1533 to @xmath1529 ; however , we need to account for open pairs that may be counted by more than one pair @xmath1503 . for outer pairs",
    ", this may occur for @xmath1503 and @xmath1534 with @xmath1469 and @xmath1535 . assuming that @xmath1536 , the number of such overcounted pairs is @xmath1537 by lemma  [ wxh ] .",
    "( note that we apply the upper bound on the size of a hole @xmath1538 with @xmath1539 here . ) summing over @xmath1469 , using @xmath1540 and @xmath1541 we obtain @xmath1542 next note that an inner pair for @xmath1503 contains @xmath1530 .",
    "furthermore , it can not be of the form @xmath1543 for some @xmath1544 with @xmath1545 . for this would require the edges @xmath1546 and @xmath1547 , which can not both exist by the hole construction procedure .",
    "thus there is no overcounting for inner open pairs , and we obtain @xmath1548 .",
    "we finally note that inner open pairs have at least one vertex in @xmath294 while outer open pairs have no vertex in @xmath294 ( since we may assume @xmath294 is an independent set ) , thus the collections of open pairs counted by @xmath1549 and @xmath1550 do not intersect . in total @xmath1551",
    "provided @xmath1552 is sufficiently large .",
    "now we turn to an estimate for @xmath1504 .",
    "we begin by defining a partition of @xmath1553 that plays a key role in this discussion .",
    "we write @xmath1554 and let @xmath1555 $ ] be such that @xmath1556 for @xmath1557 and @xmath1558 for @xmath1559 .",
    "let @xmath1560 and @xmath1561 .",
    "note that any vertex has degree at most @xmath1562 in @xmath1563 , by the hole construction procedure .",
    "let @xmath1564 be the set of ordered pairs counted by @xmath1565 with first vertex in @xmath1566 and let @xmath1567 be the set of ordered pairs counted by @xmath1568 with first vertex in @xmath369 . by lemma [ opens](i )",
    "whp @xmath1569 if @xmath1570 , so we can write @xmath1571",
    ". let @xmath1572 be the number of ordered open pairs in @xmath1563 that are not contained within any hole .",
    "then @xmath1573 next let @xmath401 be the set of vertices that have at least @xmath1574 neighbours in @xmath1575 .",
    "we can assume @xmath1576 by lemma  [ large - degs ] .",
    "it follows that @xmath1577 . applying lemma [ opens - bip ] with @xmath1578 and @xmath1579 ,",
    "whp @xmath1580 if @xmath1581 , so we can write @xmath1582 we can apply the same argument to open pairs between @xmath1563 and @xmath369 .",
    "let @xmath1583 be the set of vertices that have at least @xmath1584 neighbours in @xmath1563 .",
    "we can assume @xmath1585 by lemma  [ large - degs ] .",
    "since any vertex has at most @xmath1459 neighbours in @xmath369 , it follows that @xmath1586 . applying lemma [ opens - bip ] with @xmath1587 and @xmath1588 ,",
    "whp @xmath1589 if @xmath1590 , so we can write @xmath1591 .",
    "in total we obtain @xmath1592 also , applying lemma [ opens ] to @xmath369 we have @xmath1593 , so @xmath1594 ( for @xmath1595 we apply the same method as for @xmath1596 . )",
    "when @xmath1597 these two estimates will suffice : we have @xmath1598 when @xmath1599 we improve this estimate as follows .",
    "let @xmath1600 be such that @xmath1601 for @xmath1602 and @xmath1603 otherwise .",
    "note that @xmath1604 .",
    "we write @xmath1605 , where an open ordered pair counted by @xmath1504 is counted by @xmath1606 , @xmath1607 or @xmath1608 according as its first vertex is in @xmath1464 , @xmath1609 or @xmath369 . for @xmath1610",
    "$ ] we claim that @xmath1611 to see this , we first apply lemma  [ opens - bip ] for each @xmath1612 such that @xmath1613 to @xmath1614 and @xmath1615 .",
    "this is valid by the codegree bound , as each has size at least @xmath1616 , and any vertex with a neighbour in one set has at most @xmath1617 neighbours in the other .",
    "thus we obtain @xmath1618 .",
    "then we apply lemma  [ opens - bip ] with @xmath1619 and @xmath1620 , which is valid as any vertex with a neighbour in one set has at most @xmath1621 neighbours in the other ( by the hole construction procedure ) .",
    "thus we obtain @xmath1622 . since @xmath1623 this proves ( [ nkh ] ) . using the estimates from above for @xmath1624 and @xmath1564 we have @xmath1625    to estimate the overcount @xmath1506 , first note that there is no overcounting between @xmath1626 and @xmath1627 ; pairs counted by the former do not intersect @xmath294 while pairs counted by the latter do intersect @xmath294 .",
    "there is also no overcounted pair between @xmath1496 and @xmath1529 , as such a pair would have to contain @xmath1453 with @xmath1539 to lie in @xmath1529 and no such pair lies in @xmath1496 .",
    "there is no overcounted pair between @xmath1549 and @xmath1628 as the hole construction procedure ensures that no vertex in a hole @xmath1538 with @xmath1539 is also a neighbor of some vertex @xmath1629 such that @xmath1630 .",
    "it follows from the co - degree bound that the overcount between @xmath1493 and @xmath1504 is @xmath1631 . to bound the overcount between @xmath1493 and @xmath1496 , note that this is determined by naming vertices @xmath1632 such that @xmath1633 and a vertex @xmath191 in the ( final ) neighborhood of @xmath1634 .",
    "the number of choices for these is at most @xmath1635 .",
    "also , the overcount between @xmath1493 and @xmath1529 is determined by naming a vertex @xmath1207 , a vertex @xmath1453 such that @xmath1499 , and a vertex @xmath768 that is in the ( final ) common neighborhood of @xmath1453 and @xmath191 .",
    "the number of choices is bounded by @xmath1636 .",
    "this leaves the overcount between @xmath1504 and @xmath1637 , which is the most significant potential source of overcounting .    in order to bound the overcount between @xmath1568 and @xmath1528",
    "we introduce a definition .",
    "we say that a hole @xmath1464 with @xmath1469 is ` black ' if @xmath1453 has more than @xmath1638 neighbours in @xmath294 .",
    "let @xmath1639 be the set of vertices that belong to black holes , and let @xmath1640 be the corresponding set of vertices @xmath1453 . note that lemma  [ density](ii ) implies @xmath1641 .",
    "the contribution to @xmath1528 of pairs that would close edges incident to black holes is at most @xmath1642 .",
    "now consider overcounted pairs that would close pairs that are not incident to black holes .",
    "such a pair has the form @xmath1643 where @xmath1644 is an edge , so @xmath1645 by the hole construction procedure . if @xmath1646 then by the codegree bound there are at most @xmath1647 such edges @xmath1648 with the fixed @xmath1649 .",
    "these are only counted in our estimate for @xmath1568 while @xmath1650 , so the overcount for such a hole is at most @xmath1651 . for holes @xmath1464 such that @xmath1652 , recall that open pairs between @xmath1653 and @xmath1654 are only counted in our estimate for @xmath1504 if @xmath1655 .",
    "since @xmath1464 is not black , the number of choices for @xmath1656 is at most @xmath1657 .",
    "the total contribution of such pairs to @xmath1501 is at most @xmath1658 .",
    "thus @xmath1659    next we substitute @xmath1660 in the estimate for @xmath1661 given in ( [ eq : ek ] ) to obtain @xmath1662 where @xmath1663 we proceed to show that the contributions from @xmath1664 and @xmath1665 are negligible .",
    "the remaining terms will be used to balance the number of events in our union bound calculation .    to estimate @xmath1666 , note that @xmath1667 using @xmath1668 and @xmath1669 we have @xmath1670 similarly , we have @xmath1671 putting everything together we have @xmath1672 .",
    "similarly , for @xmath1673 we have @xmath1674 this gives @xmath1675 .",
    "we are now ready for the union bound bound calculation .",
    "recall that we have fixed the initial data that defines the event @xmath1676 ; that is , we have specified @xmath454 , the collection of vertices @xmath1677 , the collection of hole size @xmath1678 and the degrees of vertices @xmath1634 for @xmath1679 .",
    "the number of choices for the data that defines an event @xmath1486 is at most @xmath1680 ( note that we name the vertices in @xmath1681 by specifying the vertices in holes . ) to estimate @xmath1682 we apply ( [ eq : all1 ] ) to each such choice of @xmath1486 , using @xmath1683 and @xmath1684 for @xmath1473 , that @xmath1685 , @xmath1686 and @xmath1687 are at most @xmath1688 , and @xmath1689 by ( [ niao ] ) .",
    "this gives @xmath1690    it remains to show that @xmath1691 is sufficiently large .",
    "note that contribution from pairs with first vertex in @xmath369 is @xmath1692 and we have an error term bounded by @xmath1693 . for each hole",
    "@xmath1694 we consider the contribution from open pairs with first vertex in @xmath1464 .",
    "if @xmath1695 ( i.e.  @xmath1602 ) we obtain a term @xmath1696 in ( [ nk2 ] ) while @xmath1697 , i.e.  up to time @xmath1698 . the resulting contribution to @xmath1691 is @xmath1699 .",
    "if @xmath1603 we obtain a term @xmath1700 in ( [ nk1 ] ) and ( [ nk2 ] ) while @xmath1701 , i.e.  up to time @xmath1702 . the resulting contribution to @xmath1691 is @xmath1703 .",
    "thus we have @xmath1704 note that @xmath1705 implies @xmath1706 . recalling that @xmath1445 and @xmath1707 and @xmath1708 we have @xmath1709 as the number of choices of the initial data that defines @xmath514 is @xmath1710 and @xmath1711",
    ", this completes the proof .",
    "this proof is very similar to that of theorem  [ indep ] , but much simpler .",
    "the lower bound on degrees in @xmath19 follows from theorem [ good ] , so it remains to show the upper bound .",
    "let @xmath1712 .",
    "we take a union bound over every vertex @xmath166 , potential neighborhood @xmath232 , and set @xmath369 such that @xmath1713 of the event that    1 .",
    "@xmath232 is the neighborhood of @xmath166 in @xmath1714 , 2 .",
    "@xmath1715 spans no edge in @xmath1716 , and 3 .",
    "@xmath1717 is open in @xmath1714 for all @xmath1718 .",
    "we view @xmath369 as vertices that might be added to the neighborhood of @xmath154 between time @xmath280 and the end of the process .",
    "we show that whp there is no triple @xmath1719 with these properties .",
    "let @xmath1720 with @xmath1721 be fixed , where we write @xmath1722 we also specify an appearance time @xmath1723 for every edge @xmath1724 where @xmath1725 .",
    "let @xmath1726 be the event @xmath1727 is an independent set in @xmath1728 , all pairs joining @xmath166 and @xmath369 are open in @xmath1714 and all the specified edges appear at the specified steps of the process .",
    "in order to estimate the probability of the event @xmath1729 , for each step @xmath5 we need to estimate the probability that the selected edge is compatible with this event , conditional on the history of the process .",
    "we say @xmath5 is a _ selection step _",
    "if @xmath5 is one of @xmath1730 for @xmath1731 $ ] ; then the selected edge is specified by @xmath1732 , so the required probability is simply @xmath1489 . for other @xmath5 , the required probability is @xmath518 , where @xmath519 is the number of ordered open pairs that can not be selected at step @xmath5 when @xmath1732 occurs .",
    "if @xmath1733 is a selection step write @xmath520 . then we estimate @xmath1734 we write @xmath1735 , where @xmath1736 counts the ordered open pairs within @xmath232 and @xmath1737 counts those in @xmath1715 with at least one vertex in @xmath369 . following the proof of theorem  [ indep ] we have @xmath1738 where @xmath1739 for @xmath1740 and @xmath1741 .    following the argument in the previous section for estimating @xmath1742 we have @xmath1743 in order to estimate @xmath1744 we make the following crucial observation . if some vertex @xmath136 has degree at least @xmath1745 in @xmath369 then at time @xmath280 we have @xmath1746 .",
    "we can assume @xmath1408 is a non - edge as @xmath166 is open to @xmath369 , so this contradicts our estimate on @xmath163-variables .",
    "thus no such vertex @xmath136 exists .",
    "while @xmath1747 , which holds up to time @xmath1748 , we can apply lemmas [ opens ] and [ opens - bip ] to obtain @xmath1749 and @xmath1750 .",
    "this gives @xmath1751 now , taking the union over all possible choices of the data that specifies an event @xmath1732 , namely the choices of @xmath154 , @xmath1752 , @xmath232 , @xmath369 and the collection of times at which the edges joining @xmath154 to @xmath232 appear , we see that the probability that a triple @xmath1719 exists with the given conditions is at most @xmath1753 where the sum is taken over @xmath1752 in the interval @xmath1754 .",
    "since @xmath1755 , assuming @xmath1756 , this probability is at most @xmath1757 thus the required bound on degrees holds with high probability .",
    "we have determined @xmath1 to within a factor of @xmath3 , so we should perhaps hazard a guess for its asymptotics : we are tempted to believe the construction rather than the bound , i.e.  that @xmath1758 .",
    "we should note that we only have an upper bound on the independence number of the graph @xmath19 produced by the triangle - free process .",
    "so , formally speaking , the triangle - free process could produce a graph that gives a better lower bound on @xmath40 .",
    "but we believe that this is not the case ; that is , we conjecture that the bound on the independence number in theorem [ indep ] is asymptotically best possible .",
    "another natural direction for future research is to provide an asymptotically optimal analysis in greater generality for the @xmath18-free process .",
    "no doubt the technical challenges will be formidable , given the difficulties that arise in the case of triangles .",
    "but on an optimistic note , it is encouraging that one can build on two different proofs of this case ."
  ],
  "abstract_text": [
    "<S> the triangle - free process begins with an empty graph on @xmath0 vertices and iteratively adds edges chosen uniformly at random subject to the constraint that no triangle is formed . </S>",
    "<S> we determine the asymptotic number of edges in the maximal triangle - free graph at which the triangle - free process terminates . </S>",
    "<S> we also bound the independence number of this graph , which gives an improved lower bound on the ramsey numbers @xmath1 : we show @xmath2 , which is within a @xmath3 factor of the best known upper bound . </S>",
    "<S> our improvement on previous analyses of this process exploits the self - correcting nature of key statistics of the process . </S>",
    "<S> furthermore , we determine which bounded size subgraphs are likely to appear in the maximal triangle - free graph produced by the triangle - free process : they are precisely those triangle - free graphs with 2-density at most 2 . </S>"
  ]
}