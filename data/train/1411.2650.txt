{
  "article_text": [
    "after decades of study , our knowledge of the progenitor for gamma - ray bursts ( grbs ) is still limited due to the lack of direct observational constraints ( e.g. , * ? ? ?",
    "* ) . in the cgro / batse era",
    ", people suggested that the observed temporal behavior of grb prompt emission essentially reflects the temporal behavior of the central engine @xcite , which might provide clues about the progenitor .",
    "grbs were classified into two categories : long - duration , soft - spectrum class ( lgrbs ) and the short - duration , hard - spectrum class ( sgrbs ) , based on the bimodal distribution of grbs in the duration - hardness diagram @xcite .",
    "different type of progenitor were invoked for these two different class , i.e. , core collapse from wolf - rayet star for lgrbs @xcite and mergers of two compact stellar objects ( ns - ns and ns - bh systems ) for sgrbs @xcite .",
    "later observational results , such as the host galaxies types for each class , the supernova association identification for nearby grbs , the localization of the burst with respect to their host galaxy , etc ( * ? ? ?",
    "* for a review ) , seems to support such interpretations for the progenitor .",
    "recently , a number of grbs ( grbs 101225a , 111209a , 121027a and 130925a ) have attracted attention due to their unusually long prompt duration ( @xmath10 hours instead of tens of seconds ) compared to typical grbs @xcite , where  prompt \" refers to the initial emission phase , before the afterglow proper .",
    "it is worth noting that these  ultra - long \" grbs are not the only cases , similar ones were also seen historically in batse and konus - wind data ( e.g. * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ) . in these references",
    ", the  ultra - long \" grbs were defined based on their @xmath11-ray duration @xmath2 , when @xmath2 is comparable or even larger than @xmath8 s. some authors @xcite proposed that these  ultra - long \" grbs may issue from a new type of progenitor stars with much larger radii , such as blue supergiants @xcite , which could naturally explain their unusually long durations .",
    "however , it has been widely argued that the @xmath11-ray duration is not a good reflection of the intrinsic central engine activity @xmath0 , since _ swift _",
    "observations suggest that many grbs have an extended central engine activity time , manifested through flares @xcite and extended shallow plateaus @xcite in the x - ray light curves following the mev emission .",
    "most recently , @xcite performed a comprehensive study on a large sample of _ swift _ grbs , in which they redefined the burst duration as @xmath3 , based on both @xmath1-ray and the above x - ray light curve features .",
    "they found that within their `` good '' sample , 21.9% grbs have @xmath12 s and 11.5% grbs have @xmath13 s. they showed that grbs with exceedingly long @xmath3 do not necessarily have unusual @xmath2 and those four traditional  ultra - long \" grbs are not among the longest ones although they do have relatively long @xmath3 ( @xmath14 s ) .",
    "they conclude that , in the sense of @xmath3 , the existing evidence is inadequate to separate those traditional  ultra - long \" bursts from a new population . interestingly , there is an apparent bimodal distribution of @xmath3 in their results , separating around @xmath15 s ( see their fig 5 ) . although they claimed some selection effects that may strongly affect the distribution , the effects only apply to the first component ( @xmath16 s ) .",
    "therefore , based on @xmath3 , the second component ( distributed from @xmath17 s ) might be a real population that points toward a new type of progenitors .    compared to @xmath2 , which refers purely to mev - range emission",
    ", @xmath3 has the advantage of better reflecting @xmath0 , especially when late activity becomes more moderate .",
    "however , late time features need not necessarily be related to late central engine activity , since they might be due to the late internal collisions or refreshed external collisions @xcite from early ejected shells .",
    "therefore in some cases , @xmath3 might overestimate @xmath0 . before deciding whether @xmath2 or @xmath3 should be used to define  ultra - long \" bursts , or determining whether the  ultra - long \" grbs indeed require a new type of progenitor , it is crucial to gain a better understanding of the real distribution of @xmath0 .    here",
    "we develop a numerical method to study the behavior of the ratios @xmath18 and @xmath19 within the framework of the internal plus external shock @xcite .",
    "we estimate the distribution of @xmath0 using monte carlo simulations based on our models and on the observational data on the @xmath2 distribution of all _ swift _ grbs and the data on the @xmath3 distribution from @xcite .",
    "to better understand the intrinsic features of the ratios @xmath18 and @xmath19 , the values of @xmath2 and @xmath3 in the rest frame are essential . on the other hand , when estimating @xmath0 by comparing with observational results of @xmath2 and @xmath20 , the redshift correction should be considered .",
    "the paper is structured as follows : in section 2 , we describe our numerical method for estimating @xmath2 and @xmath3 in the framework of the internal plus external shock model .",
    "the simulation details for obtaining realizations of our method are illustrated in section 3 .",
    "we present the results for @xmath18 and @xmath19 under different initial conditions , as well as the estimation for distribution of @xmath0 in section 4 .",
    "we discuss our method and the results in section 5 . for convenience ,",
    "we collect the definition of the various timescales in table 1 .",
    "note that henceforth , in the rest of the manuscript , the redshift correction term ( @xmath21 ) for the timescales in the observer frame is omitted in all relevant formulae , for the sake for brevity .",
    "in the internal plus external shock model , a relativistic unsteady outflow is generated from the central engine within the ejection time @xmath22 @xcite , which produces highly time - variable shocks lying inside the external blast wave radius .",
    "for simplicity , the outflow can be represented as a succession of shells ejected with random values of the lorentz factor , mass and width . due to nonuniformities in the velocity ,",
    "mechanical collisions between adjacent shells occur , and a certain fraction of the relative kinetic energy is converted into internal energy by the resulting internal shocks .",
    "the internal energy thus generated is then radiated via synchrotron or inverse compoton scattering giving rise to the prompt @xmath11-ray emission .",
    "we will call such collisions  effective collisions \" when they produce detectable radiation .",
    "there are two timescales in the lab frame to describe the collision history , @xmath23 for the last mechanical collision , and @xmath24 for the last effective collision , where @xmath25 .",
    "their values in the observer frame are denoted @xmath26 and @xmath27 . besides internal collisions",
    ", the outermost shell will also interact with the external ambient medium , sweeping up an increasing amount of matter , which leads to its eventually slowing down .",
    "the trailing shells may collide with each other before interacting with the leading shell , but it is also possible that they collide againts the leading decelerating shell ( or shells ) before they have undergone internal collisions , which confines the possible values of @xmath26 and @xmath27 .    in previous numerical studies",
    "@xcite @xmath26 has been usually taken to be the prompt emission duration @xmath2 ( see section 5 for a detailed discussion about the difference between this work and previous works ) . as a better definition ,",
    "we propose to use @xmath27 to represent @xmath2 , taking also into account the detector properties for the detectability .",
    "specifically , we use three criteria to define  effective internal collisions for @xmath11-rays \" : firstly the lorentz factor ratio between two shells should be nominally @xmath28 @xcite ; secondly the peak radiation luminosity should be larger than the @xmath11-ray detector sensitivity @xmath29 ; and finally , the peak photon energy @xmath30 should be within the @xmath11-ray detector energy band .",
    "the final estimated prompt emission duration is denoted as @xmath31 , where @xmath32 .    when the leading shell sweeping up enough matter , its kinetic energy is converted into afterglow emission via external shock @xcite .",
    "although the afterglow timescale is no longer connected with @xmath22 , if  effective internal collisions for x - rays \" happen after the onset of the afterglow emission , or if energetic late shells collide onto the external blastwave ( effective refreshed collisions ) , then we expect observable signatures such as flares or plateaus , which may be detected superposed on the external shock afterglow signals ( at time @xmath33 ) . in this case , the central engine timescale inferred from the observations should be @xmath34 . in @xcite the x - ray light curve",
    "was fitted with a multi - segment broken power - law and @xmath20 was identified as the maximum of the steep ( decay slope steeper than @xmath35 ) to shallow transition time . in our model",
    ", @xmath33 is defined as the time when the last effective internal collision for x - rays or the last effective refreshed shock collision happens .",
    "the criterion for an effective internal collision for x - rays is similar to that for @xmath11-rays , but the x - ray detector properties are used . for an effective refreshed collision , the collision needs to be violent , or else the injection energy needs to be comparable to impulsive energy in the initial blastwave if the collision is mild to be of order unity ( see section [ sec : refreshed shock ] ) , i.e. , the injection energy should be comparable to the initial blastwave energy .",
    "the criteria for violent collisions are defined later in section 3.1.2 . ]",
    "although the definition of @xmath36 is not fully equivalent with @xmath3 , for a large enough sample , it should be adequate to represent the overall distribution feature of @xmath3 .    in principle , given the initial conditions , i.e. , the lorentz factor , mass and width of the shells , the ejection time intervals between shells and the ambient medium density , the dynamical processes in the system can be precisely described through the numerical simulations .",
    "this allows us to study the expected values of the ratios @xmath37 and @xmath38 in our model , which essentially represent the ratios @xmath18 and @xmath19 between the observed and the model - intrinsic features .",
    "these , in turn , provide an estimate of the intrinsic distributions of the @xmath0 , based on the observed values of @xmath2 and @xmath3 .",
    "the treatment of the two shell interaction is the basic element of this simulation .",
    "most of the interactions are internal collisions between two adjacent shells .",
    "only the interaction between the first and second shell should be treated differently when the first shell enters the deceleration phase , which is referred to as a refreshed collision @xcite .",
    "consider a rapid shell ( at @xmath39 ) with initial width @xmath40 , lorentz factor @xmath41 and mass @xmath42 , chasing a slower shell ( at @xmath43 ) , which has an initial width @xmath44 , lorentz factor @xmath45 and mass @xmath46 . in the lab frame",
    ", the shells will collide after @xmath47 at @xmath48 for simplicity , we assume the system behaves like an inelastic collision , so the two shells will merge to form a single new shell of width @xmath49 , lorentz factor @xmath50 and mass @xmath51 . using conservation of mass , energy and momentum , we can estimate the mass and lorentz factor of the merged shell as @xmath52 @xmath53 based on a detailed hydrodynamic calculation , @xcite proposed to estimate the width of merged shell as @xmath54 where @xmath55 is the speed of the forward shock propagating into the slow shell and @xmath56 is the speed of the reverse shock propagating into the fast shell .",
    "their corresponding lorentz factors are @xmath57 the internal energy of the merged shell is the difference between the kinetic energy before and after the collision : @xmath58 we define a free parameter @xmath59 as the fraction of the internal energy emitted in the detector energy band .",
    "the emission time scale ( in the lab frame ) can be estimated as the time taken by the reverse shock to cross the rapid shell : @xmath60 where @xmath61 is the width of the rapid shell , and @xmath62 where @xmath63 is the spreading radius of the rapid shell .",
    "the peak luminosity for this collision can thus be expressed as @xmath64 we assume that the energy @xmath30 of the spectral peak of the radiation can be estimated through the amati relation , which is an empirical relation between the isotropic emission energy @xmath65 and @xmath30 , generally valid among grbs @xcite and also within a single burst @xcite . here",
    ", we will assume the validity of this correlation for all effective internal collisions , and apply the relation @xmath66 to estimate @xmath30 as @xcite @xmath67 in this work , the detector sensitivities adopted are those of the _ swift _ bat and xrt instruments .",
    "for bat , the detector threshold is taken to be @xmath68 , and the energy band is @xmath69 @xcite . for xrt ,",
    "the sensitivity curve adopted is a broken power - law shape , with @xmath70 early on , which breaks to @xmath71 when @xmath72 at @xmath73 .",
    "the energy band is @xmath74 @xcite .",
    "these , together with the criteria discussed in section [ sec : modeldescription ] , are used to label a collision as an effective collision for @xmath11-rays , an effective collision for x - rays , or as not effective .",
    "after the collision , the remaining internal energy @xmath75 converts back into kinetic energy . in the following simulations , instead of considering the reacceleration details , we simply correct the bulk lorentz factor of the merged shell to account for this energy conversion .",
    "we also tested situations where this effect is neglected , and it turned out that the final results were not affected .",
    "this could be due to the fact that the energy conversion efficiency for an individual internal collision is typically low , only ( 1 - 10)% .",
    "the outermost shell will eventually slow down due to an external shock as it sweeps up the ambient medium . during the initial interaction ,",
    "a pair of shocks ( forward and reverse ) propagate into the ambient medium and into the shell , respectively @xcite .",
    "after the reverse shock crosses the shell , the blastwave enters a self - similar phase described by the blandford mckee self - similar solution @xcite .",
    "the deceleration radius @xmath76 beyond which the inertia from the circumburst medium is large enough and the lorentz factor of the blastwave starts to decrease as a power law with radius is , for a constant density external medium @xmath77 , given by @xmath78 where @xmath79 and @xmath80 are the initial kinetic energy and lorentz factor of the outermost shell . entering the self - similar phase ,",
    "the dynamics of the blast wave in the constant energy regime can be described as @xcite @xmath81 where @xmath82 is measured in the observer frame .    when the outermost shell is inside @xmath76 , its collision with the second outermost shell can be taken as an internal collision ( see section [ sec : internal shock ] ) .",
    "otherwise , the collision should be treated as a refreshed collision with the external shock .",
    "we denote the first outer shell with subscript @xmath83 and the second outer shell with @xmath84 .",
    "the refreshed collision will happen at @xmath85^{1/4 } , & \\quad { \\gamma}_1<{\\gamma}_2\\\\    r_{\\rm{1}}\\left(\\frac{\\gamma_{\\rm{2}}}{\\gamma_{\\rm{1}}}\\right)^{-2/3}+\\left[8\\gamma_{\\rm{1}}^2(r_{\\rm{1}}-r_{\\rm{2}})r_{\\rm{1}}^3\\right]^{1/4 } , & \\quad { \\gamma}_1>{\\gamma}_2 \\\\ \\end{array } \\right.\\ \\label{shellspreading}\\ ] ] and the collision time is @xmath86 .",
    "the detailed dynamics of such collisionis is complicated , involving three shocks and several distinct dynamical stages @xcite .",
    "for the purposes of this study , we adopt the following simple treatment : 1 ) after the complicated collision process and the relaxation stage ( at @xmath87 ) , the merged shell evolves with an initial total energy @xmath88 and an initial lorentz factor @xmath89 ; 2 ) between @xmath90 and @xmath87 , the shell 2 was assumed to inject its energy into shell 1 with a constant luminosity , which gives @xmath91 .",
    "therefore , the duration of the emission in the observer frame can be estimated as @xmath92 where @xmath93 is the relevant value for @xmath90 in the observer frame .",
    "the collision can be classified as either violent or mild , depending on whether a strong shock forms at the discontinuity between two colliding shells , which requires two criteria : 1 ) the injected shell should move supersonically with respect to the leading shell ; 2 ) the injected shell is energetic enough to further heat up the leading shell .",
    "quantitatively the criteria read ( noticing that the sound speed @xmath94 for the leading shell ) : @xmath95^{-1 } , \\label{eq : violent}\\end{aligned}\\ ] ] where @xmath96 is the relative lorentz factor between shells 1 and 2 , and @xmath97 is the spreading radius of shell 2 @xcite .",
    "we label the violent collisions or mild collisions with @xmath98 as effective refreshed collisions .",
    "consider an outflow consisting of @xmath99 shells .",
    "we assign an index @xmath100 , ( @xmath101 ) to each shell according to the order of the emission from the inner engine .",
    "each shell is characterized by four variables : a lorentz factor @xmath102 , a mass @xmath103 , a width @xmath104 and the radius @xmath105 is calculated as @xmath106 , where @xmath107 is the ejection time interval between shells , @xmath108 is the central engine radius , whose value does not affect the final results as long as it is smaller than @xmath109 . in this work ,",
    "we adopt @xmath110 . ] . at this initial stage , the initial lab frame time",
    "is set to @xmath111",
    ".    there will be @xmath112 collisions between different shells and eventually only one shell will be left , considering the confinement imposed by the external shock blastwave . for the @xmath113th collision ( at @xmath114 ) , we first find out all the groups of adjacent shells ordered with decreasing values of the lorentz factor .",
    "we denote with an index @xmath115 for the @xmath115th group and with an index @xmath116 for the shells in each group ( @xmath117 has the largest lorentz factor ) . with our results from  [",
    "sec : internal shock ] , we can estimate the collision time @xmath118 for the @xmath116 and @xmath119 shells in the @xmath115th group , and find the pair with the shortest @xmath118 among all the groups , assigning it the label @xmath120 . with the information of ( @xmath115,@xmath116 )",
    ", we can find the shell index of the next expected collision pair ( @xmath121,@xmath122 ) .",
    "note that one needs to check whether the outermost shell is already in the deceleration phase or not .",
    "if so , the outermost shell and the second outer shell should always be treated as the @xmath123 group .",
    "we then rearrange the shells as follows : for @xmath124 , each shell moves from its earlier position @xmath125 to @xmath126 the @xmath127 shells keep their other properties @xmath102 , @xmath103 and @xmath104 , while @xmath128 is the new merged shell with the new @xmath129 , @xmath130 and @xmath131 calculated based on section [ sec : internal shock ] ( or section [ sec : refreshed shock ] if the refreshed shock happen first ) .",
    "we delete the @xmath122 th shell . for @xmath132 , each shell s index",
    "is reduced by one , and has a new position @xmath133 they also keep their other properties .",
    "we then return to the calculation of the @xmath134 th step until all the shells have merged to form a single external blastwave , where the simulation stops .    in the lab frame",
    ", the @xmath113th collision would happen at @xmath135 for an observer at a luminosity distance @xmath136 from the central engine , the radiation from this collision would start to be detected at @xmath137 at the end of the simulation , we set the minimum of @xmath138 to be the origin of the observer time , since this is when the source triggered the detector .",
    "we thus have @xmath139 for internal collisions , the observer - frame emission duration @xmath140 is estimated as @xmath141 , where @xmath50 is the merged lorentz factor for that collision . for refreshed collisions , we take @xmath142 , where @xmath143 is the blastwave energy and @xmath144 is the subsequent injected energy for that collision .",
    "we search for the last effective internal collision for @xmath11-rays ( labelled as @xmath145 ) , the last effective internal collision for x - rays ( labelled as @xmath146 ) , and the last effective refreshed collision ( labelled as @xmath147 ) in the observer frame , leading to @xmath148      for each simulation , the initial conditions include the lorentz factor , mass and width of the shells ( @xmath11 , @xmath149 and @xmath150 ) , the ejection time intervals between shells ( @xmath151 ) , the ambient medium density and the redshift of the source . in this work , we assume a constant density for the ambient medium , with @xmath152 . for each simulation ,",
    "the source redshift is simulated based on the observed @xmath153 distribution of the observed grbs ( see figure 1(b ) in @xcite ) .",
    "other parameters are determined by the central engine , and these are very uncertain .",
    "we tested different distribution functions for each parameter , especially for the lorentz factor of the shells and the shell ejection time interval , which are more crucial for determining the observable timescales .",
    "we allow for one quiescent period in the central engine activity , that is , the shells may be ejected within one episode , or within two episodes separated by @xmath154 . as a nominal case , we assume that 100 shells are ejected in each episode .",
    "the second episode can either share the same set of initial conditions as the first one , or it can be less energetic by assigning a lower mass to each shell .",
    "details of the combinations of initial conditions are collected in table 2 , numbered as different models . here",
    "@xmath155 denotes a uniform distribution from @xmath156 to @xmath157 ; @xmath158 denotes a power - law distribution from @xmath156 to @xmath157 with index @xmath159 ; @xmath160 denotes a gaussian distribution with a mean @xmath156 and a standard deviation @xmath157 .",
    "the reason for selecting these models can be briefly summarized as follows : for one episode ejection , we assume that the plausible shell ejection time interval are distributed as @xmath161 , giving a total ejection timescale of @xmath162 for 100 shells . concerning the lorentz factor of the shells , we assume the most plausible parameters for each of the three distribution functions , e.g. @xmath163 , @xmath164 and @xmath165 , to ensure a mean value of the lorentz factor of @xmath166 .",
    "furthermore , we assume the mass of the shells is distributed with a uniform distribution in log space @xmath167 g , giving a total energy of @xmath168 . these combined assumptions are used to propose what we consider to be the three most plausible models for the initial conditions of the grb central engine , e.g. model 1 ( ran - type ) , 7 ( pl - type ) and 9 ( gauss - type ) . to account for the variability of the central engine properties , other specific models are also considered . for instance , model 2 is for cases when the shells have higher average lorentz factors ; models 3 , 8 and 10 are for cases when the total ejection timescale is @xmath169 s ; models 11 - 22 are for two episode ejection cases , where the second episode has the same or is less energetic compared to the first one , and the separation timescale between the two ejections is @xmath8 s or @xmath15 s.    note that for given model , the central engine activity time is calculated as @xmath170",
    "for each model , we run the simulation 500 times , and we analyze the thus obtained distributions of @xmath37 and @xmath38 in the rest frame . in figure 1",
    "we plot the results for selected models which are relevant for reflecting the main conclusions , which can be summarized as follows ( for easy identification , table 2 summarizes the corresponding subfigure numbers for the different models ) :    * when the initial @xmath11 s of the shells are distributed from 500 to 1000 , compared to the case when they are distributed from 50 to 500 , both @xmath37 and @xmath38 have a much narrower distribution around unity in the former case , due to a stronger confinement from the external blast wave . *",
    "different distribution functions for the initial @xmath11 s of shells affect only moderately the results .",
    "the ran and gauss functions give very similar results as long as they have similar distribution ranges .",
    "the results for @xmath171 are sensitive to the lower ending @xmath156 and the index @xmath159 of the distribution .",
    "smaller @xmath156 or @xmath159 tends to give more spread - out distributions and larger maximum values for both @xmath37 and @xmath38 .",
    "* when @xmath22 is of order of 100 s , the @xmath37 distribution has a sharp peak at unity , and a gaussian - shape spreading from 0 to 2 , depending on specific models .",
    "@xmath38 behaves as a fred - like ( fast rise exponential decay ) distribution from 1 to less than 10 , also depending on specific models . * for one - episode injection cases , when @xmath22 is of order of 100 s , @xmath37 has an upper limit of order of 10 , and @xmath38 has an upper limit of order of 100 ( for most cases , the upper limit is also of order 10 , except when @xmath11 has a pl distribution starting from 50 ) . on the other hand , when @xmath22 is of order 1000 s , @xmath37 has a very narrow distribution within @xmath172 and @xmath38 also has a relatively narrow distribution with an upper limit smaller than 10 .",
    "these results indicate that for one - episode injection , @xmath31 has an upper limit of order 1000 s , and @xmath36 has an upper limit of order @xmath15 s. these upper limits are set by the confinement of the blast wave and are model independent . * for two - episode injection cases , when the second episode is similar to the first one , @xmath37 has a very narrow distribution around unity , with some rare exceptions distributed around 0.1 ( due to the high redshift ) .",
    "also @xmath38 is mainly concentrated around unity , spreading up to @xmath6 .",
    "when the second episode is less energetic , @xmath31 is essentially determined by the first episode , which has an upper limit of order 1000 s , and the @xmath38 is distributed narrowly around unity . in short , @xmath36 reflects well the time @xmath22 during which the late central engine is active , whereas @xmath31 can be much smaller than @xmath22 , if the later injection is less energetic . * the overall internal collision efficiency ( total internal energy created from internal collision divided by total energy of ejected shells ) is distributed with a gaussian shape .",
    "the peak value for the ran and gauss models are around @xmath173 , while the pl models are less efficient , with a peak around @xmath174 .      in the above simulations , @xmath0 ( @xmath22 )",
    "are concentrated in a very narrow range , for a given model . in reality",
    ", @xmath0 should have a much wider distribution , in order to produce the observed distribution profiles of @xmath2 ( @xmath31 ) and @xmath3 ( @xmath36 ) .",
    "the observed distributions of @xmath2 of all _ swift _ bursts , and of @xmath3 in the good sample of @xcite , are plotted in figure 2 . with a better understanding about the relation between @xmath2 and @xmath0 , and also between @xmath3 and @xmath0",
    ", we can now provide a better estimate for @xmath0 .    since @xmath3 becomes very close to @xmath0 when @xmath175 s , the second component in the @xmath3 distribution ( from @xmath176 s ) should show a similar structure in the @xmath0 distribution .",
    "if we treat this late time activity as a second episode injection , it must be less energetic compared to the first one , since the @xmath2 distribution lacks a corresponding excess .",
    "based on the same argument , one continuous long episode is also ruled out . on the other hand , for the majority of cases when @xmath177 s , both @xmath3 and @xmath5 would be comparable to , or a slight overestimate of @xmath0 . since both @xmath2 and the first component for @xmath3 has a cutoff around @xmath178 s , another component for @xmath0",
    "is required , whose distribution profile should be similar to @xmath5 and the first component of @xmath3 , but with an overall shift .    as a good representation of the observed distributions ( the dashed lined histograms in figure 2",
    ", we propose a gaussian distribution for the first component of @xmath0 and a gaussian distribution in log space for the second one ( see figure 2a ) .",
    "the population ratio between the two components is @xmath179 .",
    "we apply the simulation results of three plausible models , e.g. , model 1 ( ran - type ) , 7 ( pl - type ) and 9 ( gauss - type ) to the first component . moreover , since the second component should be less energetic , we correspondingly apply the results of model 13 ( ran - type ) , 17 ( pl - type ) and 22 ( gauss - type ) to the second component . in principle , a distribution test could be used here to find out the best parameters for the @xmath0 distribution . due to an incomplete understanding of the real @xmath0 distribution profile , and an incomplete unnderstanding of relevant selection effects @xcite",
    ", we only show in figure 2 an example of a @xmath0 distribution that gives reasonable results for both @xmath2 and @xmath3 , instead of using a distribution test to find out the best parameters .    in this example",
    ", the first component is a @xmath180 and the second one is a @xmath181 in log space . the results are shown in figure 2 .",
    "we find that the proposed @xmath0 distribution provides a good match to the observational results , and it is largely insensitive to the initial conditions of the internal - external shock models used . if our estimates are indeed as robust as they appear , the following implications can be inferred :    \\1 ) for the first component , our model @xmath0 is smaller than 300 s within @xmath182 , and appears adequate to account for the rare observed tails of @xmath2 which extend to over @xmath8 s. this suggests that bursts with @xmath2 of order of @xmath8 s need not belong to a special population , and their relevant intrinsic central engine activity time may be even smaller than 300 s.    \\2 ) unlike the distribution structure of @xmath3 , there is an obvious gap between the two components of @xmath0 , indicating a more clearly bimodal distribution . in this sense",
    ", bursts with @xmath9 s might indeed belong to a new population , and it is more reliable to use @xmath3 to define  ultra - long \" grbs ;    \\3 ) for theultra - long \" grbs defined by @xmath3 , the late central engine activity tends to be much more moderate than the early activity .",
    "within the framework of the internal plus external shock model , we have developed a numerical code to study in greater detail the relationship between @xmath2 and @xmath0 , as well as between @xmath3 and @xmath0 , for a range of different initial conditions .    in the literature ,",
    "previous numerical simulations for internal shocks have been done , but aimed at different problems , e.g. , testing the ability of internal shock models to produce the temporal variability @xcite , studying the power density spectrum of grb lightcurves in internal shock model @xcite , studying the detailed radiation properties of internal shock models @xcite and modeling the x - ray flares @xcite .",
    "the main difference between our present study and the previous ones is that we use both the internal collision shock properties and the real detector sensitivities to estimate the prompt duration ; we consider the confinement imposed by the external blastwave to the late residual collisions ; for the first time , we use a detailed criterion to define effective refreshed collisions to calculate the observable central engine activity time ; for the first time , we randomly generate all the initial condition parameters with many different distribution functions , intercomparing the results .",
    "finally , since the real detector sensitivities are used , it is essential to assign a reasonable redshift to each simulated source for internal consistency . in this work",
    ", we rely on the actual observational grb redshift distribution information rather than assuming one average redshift for all the sources , as has been done in some previous works .",
    "such a treatment is also important when connecting intrinsic timescales in the rest frame with the corresponding values in the observer frame .",
    "\\1 ) at the shell injection stage , we assume that the shell is released with relativistic speed , rather than considering the acceleration process for the shells .",
    "this should not affect our results since the acceleration phase should finish well below the internal shock radius .",
    "\\2 ) we did not consider the details of the internal shock radiation . here to estimate @xmath183 we assumed that @xmath184 , i.e. , @xmath185 of the energy dissipated during collisions goes into radiation , and we used the amati relation to calculate the spectral peak energy @xmath30 .",
    "this value is adopted for keeping the overall radiation efficiency @xmath186 at @xmath187 , where @xmath188 is the isotropic gamma - ray energy and @xmath189 is the isotropic kinetic energy @xcite . to justify this assumption , we re - simulated all the results by using @xmath190 ( see pink lines in figures 1 ) .",
    "it turns out the results are almost independent on the @xmath59 value , especially for @xmath36 .",
    "the issue of whether @xmath184 ( or @xmath190 ) might be too large in the sense of the electron equipartition energy fraction @xmath191 would lead to the so - called  efficiency problem \" for the internal shock model ( * ? ? ? * and reference therein ) , which is out of the scope of this paper .",
    "however , it is still worth pointing out that the results in this work are also applicable to other internal collision relevant grb models , such as the internal- collision - induced magnetic reconnection and turbulence ( icmart ) model , which effectively increase the @xmath59 value by invoking a more efficient radiation process @xcite .",
    "\\3 ) when defining effective internal collisions for @xmath11-rays , the results is dependent on the adopted detector sensitivity limit , since sometimes the late time internal collisions only give marginally detectable signals .",
    "we justify this effect by decreasing @xmath29 to @xmath192 and re - simulate all the results for @xmath31 ( green lines in figures 1 ) .",
    "it turns out that the distribution of @xmath31 becomes slightly more spread out for lower detector sensitivities , but does not affect our main conclusions above .",
    "note that in a more precise treatment , the detailed detector trigger function would also be required @xcite .",
    "\\4 ) when defining effective internal collisions for x - rays , we used an x - ray detector sensitivity limit as a threshold . in reality",
    ", one needs to compare the peak flux of the relevant x - ray flares with the baseline of x - ray afterglows from the external shock .",
    "we did not calculate the external shock afterglow lightcurves since too many additional unknown free parameters would be involved .",
    "this might only affect the results concerning @xmath36 for very limited cases , i.e. , one - episode injection cases and @xmath36 are determined by weak residual internal collisions rather than refreshed collisions .",
    "\\5 ) in the simulations , we assume a constant density for the circumburst medium , with @xmath152 . if the actual density baseline is different , the dynamics of the external blastwave and thus its confinement of the late internal collisions would be affected , although the dependence of the blastwave dynamics on the value of @xmath113 is relatively small , as shown from equations [ eq : rdec ] and [ bm ] .",
    "we have tested such effects through some additional simulation runs for four constant values of the circumburst number density , e.g. , @xmath193 , @xmath152 , @xmath194 and @xmath195 .",
    "it turns out that for specific models such as the plausible models 1 , 7 and 9 , the deviation among the results for the different number densities are less than a factor of 2 for both @xmath37 and @xmath38 . on the other hand ,",
    "the medium density could be of a wind type instead of being constant .",
    "if so , the blastwave tends to start deceleration at a lower radius , which might lead to a stronger confinement of the late internal collisions .",
    "the consequences for our results of having such a wind can be estimated as follows .",
    "since the blastwave confinement starts to work at the deceleration radius , bursts with similar values of @xmath196 and @xmath197 ( the number density at @xmath196 ) should give similar results in our simulations , regardless of the exact density profile .",
    "for the commonly used free stratified wind model @xmath198 , with @xmath199 and @xmath200 @xcite , the deceleration radius is @xmath201 . comparing with our equ.([eq : rdec ] ) , we have @xmath202 , and @xmath203 .",
    "the results depend sensitively on the value of @xmath204 , which is very uncertain due to our poor knowledge of the grb progenitors , and in principle it could vary from 0.01 to 10 @xcite . one sees that for @xmath205 cases , as far as the confinement effect , the wind type medium should be comparable to a constant medium with @xmath206 , with the inference that for a wind medium , our results might be altered a factor of @xmath10 2 .",
    "although @xmath207 values are plausible , it is worth pointing out that more severe deviations might occurr for a wind type medium if @xmath204 is much larger than unity .",
    "\\6 ) within one ejection episode , the initial lorentz factors of all shells , no matter whether earlier or later ejected , are chosen randomly out of certain distribution functions ( ran , pl or gauss ) .",
    "the temporal variability of the distribution is not considered , since this is related to the activity details of the grb central engine , which is very uncertain , and at this point no numerical simulations have tackled this difficult problem yet . however , it is worth noting that if the distribution functions indeed suffer a temporal evolution , the present results could be altered .",
    "for instance , if the shells ejected later tend to have lower initial lorentz factors , internal collisions would become inefficient or even nonoperational at the late stages , leading to smaller values of @xmath31 . in this case , the value of @xmath36 could become either smaller or larger , depending on whether the late ejected shells are energetic enough to trigger effective refreshed collisions .",
    "\\7 ) when using the results of @xmath3 to estimate @xmath0 , a more careful treatment for the selection effects would give better results .",
    "two types of selection effects are essential : 1 ) effects due to the satellite properties @xcite ; 2 ) effects due to the sample selection criteria defined in @xcite .    in summary",
    ", we find that late internal collisions or refreshed external collisions from early ejected shells result in values of @xmath5 and @xmath3 larger than @xmath0 , usually by factors of @xmath6 .",
    "however this is only valid when @xmath4 s , owing to the confinement by the external blastwave . for @xmath7 s cases ,",
    "@xmath3 is always a good estimator for @xmath0 , and @xmath2 might be much smaller than @xmath0 when the late central engine activity is moderate .",
    "these conclusions are insensitive to the initial condition assumed for the models .",
    "we have used the results of our simulations to estimate the intrinsic distribution of central engine activity times @xmath0 , making use of the observational data for @xmath2 and @xmath3 .",
    "the results suggest a clear bimodal distribution of @xmath0 , a conclusion which is insensitive to the initial conditions used in the models . based on these results ,",
    "( i ) that bursts with @xmath2 of order of @xmath8 s need not belong to a special population , and ( ii ) that their intrinsic central engine activity time could be substantially smaller than 300 s. bursts with @xmath9 s might , on the other hand , belong a new population , and @xmath3 appears to be a reliable measure to define  ultra - long \" grbs .",
    "our results are also compatible with the late central engine activity of such bursts tending to become much more moderate than the early activity , as might be expected from a tapering off of the amount of fall - back material onto the central engine .",
    "further observations and a larger sample of ultra - long grbs will be required before firmer conclusions about this model can be drawn ."
  ],
  "abstract_text": [
    "<S> the gamma - ray burst ( grb ) central engine intrinsic activity time @xmath0 is usually described through either the @xmath1-ray duration @xmath2 or through a generalized burst duration @xmath3 which includes both the @xmath1-ray emission and ( when present ) an extended flaring x - ray plateau . here </S>",
    "<S> , we define a more specific operational description of @xmath0 , and within the framework of the internal - external shock model , we develop a numerical code to study the relationship between @xmath2 and @xmath0 , as well as between @xmath3 and @xmath0 , for different initial conditions . </S>",
    "<S> we find that when @xmath4 s , late internal collisions or refreshed external collisions result in values of @xmath5 and @xmath3 larger than @xmath0 , usually by factors of @xmath6 . </S>",
    "<S> for @xmath7 s , the @xmath3 is always a good estimator for @xmath0 , while @xmath2 can underpredict @xmath0 when the late central engine activity is moderate . </S>",
    "<S> we find a clear bimodal distribution for @xmath0 , based on our simulations as well as on the observational data for @xmath2 and @xmath3 . </S>",
    "<S> we suggest that @xmath3 is a reliable measure for defining  ultra - long \" grbs . </S>",
    "<S> bursts with @xmath2 of order @xmath8 s need not belong to a special population , while bursts with @xmath9 s , where the late central engine activity is more moderate and shows up in x - rays , may represent a new population . </S>",
    "<S> these conclusions are insensitive to the initial conditions assumed in the models . </S>"
  ]
}