{
  "article_text": [
    "many mobile broadband data users overpay for data plans , buying a data plan with sufficient monthly quota for their maximum needs even though the average consumption is only about 15% of the monthly quota  @xcite .",
    "analysis of cell phone data has also shown _",
    "quota dynamics _",
    "@xcite in users , i.e. , sensitivity to quota balance and time to the end of the quota period .",
    "one way to address these inefficiencies is to allow surplus bandwidth to be shared . in this paper",
    "we propose an auction - based protocol for such bandwidth - sharing .",
    "sellers have wireless broadband ( 3g/4 g ) devices with a wifi like wlan radio , and can share network access through tethering apps that allow them to act as routers .",
    "buyers have wifi devices and pay sellers to relay their data .    rather than finding optimal static allocations to users ,",
    "our focus is on dynamic prioritization of access to bandwidth .",
    "dynamic prioritization is more efficient because it can handle temporal heterogeneity in user demand .",
    "we design an auction protocol to prioritize network access in favor of those with highest value . in ensuring simplicity for users , we seek an incentive compatible design , so that truthful reporting of value and straightforward use of the shared bandwidth ( no delaying of traffic , no padding of traffic ) is optimal for a user .",
    "incentive compatibility is also useful in avoiding `` churn '' and system overhead that can occur if users can benefit by adapting reported values given reports of others .",
    "similar arguments have been made in the context of sponsored search markets  @xcite .",
    "our positive results are stated for users with linear ( per - byte ) valuation functions .",
    "give this , incentive compatibility requires that the cumulative quantity of network resources consumed by a user is non - decreasing in bid value , a property referred to as _",
    "monotonicity_. our main technical contribution is to establish conditions on user demand models for which a strict priority - queue approach to resource access control satisfies monotonicity . an important property satisfied by the demand models",
    "is that a user s cumulative consumption of network bandwidth over a user session weakly increases as a function of her total consumption up to any intermediate time .",
    "an additional technical challenge that we address is to ensure that users can not benefit through delayed use of allocated network resources , or by introducing fake traffic to increase demand .",
    "payments are computed by adopting an approach due to babaioff , kleinberg , and slivkins  @xcite ( bks ) .",
    "this involves adding an additional , random perturbation to bids .",
    "identical buyers .",
    "rather , the scheme randomly perturbs each bid before ranking them for the purpose of determining network prioritization . ] in a typical auction setting , the auctioneer knows how an allocation of resources would have changed given different bids .",
    "this counterfactual information is essential to standard payment schemes but unavailable here .",
    "it would require knowledge of how much bandwidth a user would consume under a different priority , but this requires knowledge that the network infrastructure does not have about a user s demand model .",
    "the only information available for the purpose of determining payments is the actual realization of consumption based on the actual assignment of priority .",
    "the introduction of random perturbation by the bks scheme avoids the need for this counterfactual information .",
    "we also extend our design so that it embraces open network architectures .",
    "in particular , we are robust to router devices that can install alternative routing software , for example to change prioritization schemes , or otherwise tamper with methods to compute payments .",
    "thus , we seek to align incentives on the sell side as well as the buy side of the market .",
    "our solution adopts lightweight cryptography and revenue pooling across sellers , and has the effect of aligning the interests of sellers with adopting routing policies that maximize total buyer value .",
    "this is sufficient for monotonicity of user allocations , which is in turn sufficient for buyer truthfulness .",
    "revenue pooling makes the market design appear simultaneously as a first - price market for sellers and a second - price market for buyers . for sellers ,",
    "this means they prefer to maximize the ( bid ) value of the allocation . for buyers , this retains the second - price - like bks scheme , and thus incentive compatibility .",
    "a simulation study confirms that the mechanism achieves arbitrarily close approximations to full allocative efficiency for simple demand models ( allocating the shared resource to those who value it the most ) , shows that reserve prices can increase efficiency of non - prioritized routing methods , demonstrates a scenario where sellers have practical efficiency - improving deviations , and examines the distributional effects of revenue pooling .",
    "we have also prototyped our scheme using the traffic control module in the linux kernel .",
    "sen et al .",
    "@xcite provide an exhaustive survey of the large literature on smart data pricing .",
    "we focus on describing work related to the specific techniques that we use .",
    "babaioff et al .",
    "@xcite and devanur et al .",
    "@xcite show that the unavailability of counterfactuals impedes the design of truthful mechanisms in the context of multi - armed bandit problems .",
    "we employ the bks scheme in a new application domain .",
    "the effect is that the payment scheme that we adopt accounts for varying user demand , providing an unbiased estimate of the cost imposed on other buyers by the prioritization associated with a buyer s device .",
    "in contrast , an earlier scheme due to varian and mackie - mason ( vmm )  @xcite adopts a myopic , per - packet viewpoint on the cost imposed on other users and is not incentive compatible when buyers have adaptive demand patterns .",
    "other approaches from dynamic mechanism design are unsuitable , either because they rely on counterfactual information  @xcite or rely on a probabilistic demand model  @xcite .",
    "vmm s work inspired other approaches , such as the progressive second - price auction  @xcite , and some follow - on work  @xcite .",
    "as with vmm , they also do not achieve incentive alignment in dynamic settings .",
    "they also assume the existence of a trusted router .",
    "godfrey et al .",
    "@xcite study incentive compatibility of congestion control mechanisms in networks .",
    "our technical analysis of the separation between bidders is similar to the separation between flows in this earlier model , but the domain of study and main results are otherwise incomparable .",
    "we consider user bidding and payments , whereas they analyze the effect of manipulations in forwarding strategies on network - wide congestion .    in a different domain , shneidman and parkes",
    "@xcite study the problem of faithful network protocols for bgp routing , where the algorithms adopted by network users must themselves form part of an equilibrium . in this sense ,",
    "our revenue pooling scheme attains faithfulness with respect seller routing algorithms",
    ".    also related is a large literature on the use of cryptographic solutions to provide trustworthy auctions ; e.g.  @xcite .",
    "however , these solutions incur too much overhead in the context of dynamic bandwidth prioritization . porter and shoham  @xcite",
    "provide an analysis of how the presence of cheating provides a second - price auction with first - price semantics .",
    "our revenue pooling scheme , used for aligning trust does the opposite : we give a second - price auction first - price semantics from the perspective of the auctioneer ( or seller , in our model ) , thereby mitigating incentives for manipulation ; the scheme borrows ideas from a random - sampling approach used in a very different domain , that of the design of revenue - optimal digital good auctions  @xcite .",
    "in this section we describe our model , also shown in fig .",
    "[ fig : bandex_model ] .",
    "* time and value : * time is modeled in discrete epochs . each buyer ( agent )",
    "@xmath0 has an allocation period @xmath1 $ ] , with @xmath2 and @xmath3 .",
    "this is the period of time over which the buyer associates value with receiving bandwidth .",
    "each buyer has constant value @xmath4 per byte ( a linear valuation ) , and bids once before sending data .    *",
    "routing : * we adopt a flow model of traffic , with a single flow modeling both upstream and downstream traffic for each buyer . the router s link to the internet",
    "is assumed to have fixed capacity @xmath5 .",
    "each buyer has bid @xmath6 , and receives a _ priority _ based on this reported value .",
    "we consider three schemes for network prioritization :    \\1 .",
    "first - in first - out ( fifo ) routes data in a first - in , first - out order as it arrives at the router .",
    "since we do not model the queue of a router directly , we model fifo as a within - epoch allocation proportional to within - epoch demand .",
    "fair queueing ( fq ) allocates bandwidth to all buyers evenly , dividing any unused capacity recursively : in each period , each of the @xmath7 buyers is guaranteed to be able to consume @xmath8 .",
    "any unused capacity is divided evenly among buyers with further demand , and this repeats until everyone is satisfied or capacity is exhausted .",
    "strict priority queueing ( spq ) first allocates capacity to the buyer with the highest bid in each epoch , up to @xmath9 or the demand of the buyer . then , capacity is allocated to the buyer with the second highest bid , and so forth , as long as capacity is available .",
    "ties are broken at random .",
    "[ sec : policies ]    let @xmath10 denote the network capacity available to buyer @xmath0 in epoch @xmath11 ( this depends on her bid , as well as the bid and network usage of others . )    * transport : * we assume that the local network between router and buyers is much faster than the router s link to the internet and neglect delays there .    * demand : * let @xmath12 ( bytes ) denote the cumulative amount of traffic ( upload or download ) associated with buyer @xmath0 up to and including time @xmath11 .",
    "this may be smaller than the total capacity available to buyer @xmath0 up to and including time @xmath11 because it depends on the buyer s demand .",
    "let @xmath13 ( bytes ) denote the demand of buyer @xmath0 during epoch @xmath11 , where @xmath14 is the cumulative amount of traffic ( upload or download ) used so far ; i.e. , @xmath15 .",
    "equivalently , this represents the maximum amount of network capacity that buyer @xmath0 wants to consume during the epoch .",
    "@xmath13 is a random variable , and we adopt @xmath16 to denote a specific realization .",
    "we consider demand models @xmath17 that satisfy the following condition :     values as being realized by `` nature '' when a buyer arrives , capturing the type of the buyer ( even if it is unknown to the buyer . ) ]    [ def : natural ] a demand model @xmath13 is _ natural _",
    "if all realizations @xmath16 satisfy for all @xmath11 , for all @xmath18 and all @xmath19 : @xmath20    a demand model is natural when getting more capacity earlier might increase demand in the future , and should not decrease future demand below the total amount given lower capacity .",
    "[ sec : natural - examples ] in presenting some examples of demand models that are natural in this sense , we focus on deterministic examples .",
    "randomized models can be created through random perturbations to the parameters of the example , and also through randomization over the different kinds of models .",
    "_ constant demand : _ a buyer @xmath0 who simply wants to send at some constant rate : @xmath21 .",
    "_ time - varying demand : _ a buyer @xmath0 with an arbitrary time - dependent generation process @xmath22 that generates data that must be sent immediately to be useful : @xmath23 .",
    "_ buffered demand : _ a buyer @xmath0 with an arbitrary time - dependent generation process @xmath22 that generates data , and wants to send as much of that as possible , buffering demand until it is allocated : @xmath24 .",
    "_ impatient buyer : _ [ example : impatient ] a buyer @xmath0 who sends until time @xmath25 , and then goes away if some minimum amount of service @xmath26 has not been met : @xmath27 this can be generalized to multiple thresholds , reduction to a lower , but non - zero rate , etc .",
    "_ increasing demand ( in rate ) _ a buyer that has @xmath28 , with @xmath29 weakly increasing .    _ increasing demand ( in total ) _ a buyer that has @xmath30 , with @xmath29 weakly increasing .",
    "this impatient buyer model illustrates that the requirement of `` natural '' demand functions allow those users to be modeled whose future value for network access falls if they do nt receive enough bandwidth .",
    "these demand models capture many realistic types of demand , but some demand functions do not fit our model . in particular , we do not allow demand to depend on recent usage , precluding models like `` if i have not been able to use the network in the last 30 seconds , give up '' .",
    "having introduced the basic elements of our model , we now describe some variations on payment schemes .",
    "a baseline comparison is provided by a fixed price payment scheme .",
    "this can be used together with the fifo and fq routing policies , where only the users who bid above the fixed price are considered by the prioritization schemes .",
    "the vmm mechanism provides a second comparison point .",
    "this mechanism uses the spq routing policy . for payments ,",
    "the original paper by varian and mackie - mason used a per - packet model , and charged the owner of each forwarded packet the _ immediate externality",
    "_ imposed by the packet .",
    "this is the value of the highest value packet that was dropped while the forwarded packet was in the router s queue .",
    "since we do not model the router queue directly , we adapt the idea behind the payment mechanism to our flow - based model by charging the immediate externality imposed by a buyer s flow in each period , computed using the standard vickrey - clarke - groves ( vcg ) mechanism , charging @xmath31 for each buyer @xmath0 in each period , where @xmath32 is the total ( reported ) value to all the other buyers in the ( counterfactual ) optimal allocation when @xmath0 is removed , and @xmath33 is the total ( reported ) value to all the other buyers in the real optimal allocation with @xmath0 included .",
    "vmm is a natural mechanism , and has inspired a lot of work on bandwidth pricing .",
    "however , the vmm approach is not incentive compatible in a setting with variable demand .",
    "consider the following :    * example 1 . *",
    "_ suppose that the router link capacity is 1 packet per second , and there is one buyer with value $ 3 per packet who wants to send one packet every second and a second buyer with value $ 2 per packet who wants to send a single packet , and keeps trying until she succeeds .",
    "truthful bidding by buyer 1 will result in the second buyer s packet being dropped every period , and a charge of $ 2 for each packet , representing the per - epoch externality on buyer 2 . on the other hand , a bid of less than $ 2 would  flush \" the packet of buyer 2 and then allow buyer 1 to send for the remaining epochs with payment $ 0 .",
    "the tradeoff is to reduce the amount of data forwarded by 1 packet in return for a significant reduction in total payment . _      in the example above , vmm over - estimates the externality because it does not have access to the information that buyer 2 only has a single packet to send .",
    "this information is not available , since we assume that demand models are not described by users or known by the prioritization scheme .",
    "in fact , even the user themselves may not know their future demand before it is realized .    in this domain ,",
    "the bks mechanism adopts the spq routing policy .",
    "payments are determined following a self - sampling approach , where a randomized perturbation to bids obviates the need for counterfactual information .",
    "the idea is to obtain an estimate of the network resources that a user would have consumed at some lower bid as a side - effect of the randomization .",
    "we adapt the scheme to also allow the seller to employ a _ reserve price _",
    "@xmath34 , which is the minimal per - byte price a seller will accept . , which has distribution function @xmath35 .",
    "in section 3.4 , the bks paper claims that @xmath36 for all @xmath37 , where @xmath38 is the distribution function for the canonical resampling procedure , but @xmath38 does nt satisfy their condition on @xmath39 : @xmath40 .",
    "@xmath35 does satisfy this condition . ]",
    "the scheme is parameterized by @xmath41 , which governs the probability of introducing a random perturbation into bids .    the scheme is most easily explained in terms of an _ allocation rule _ @xmath42 . for us",
    ", this encapsulates the combined effect of realized demand ( including possible strategic effects by users delaying demand or creating fake demand ) , the routing policy , the total capacity constraint on the router , and user bids . taken together , these elements define the total amount of traffic consumed by each user ( equivalently , the realized allocation ) .    the allocation @xmath43 generated by the rule is _ ex ante _ uncertain  it depends on realized demand @xmath44 , where @xmath45 denotes the realized demand by @xmath0 in each epoch , and is applied to randomly perturbed bids @xmath46 .",
    "the bks payment scheme works as follows :    _ given an allocation rule @xmath42 and a parameter @xmath47 , the bks procedure in our setting is : _    1 .   upon arrival ,",
    "each bidder @xmath0 submits a bid @xmath48 .",
    "2 .   the mechanism computes transformed bids @xmath49 @xmath50 @xmath0 : 1 .   with probability @xmath51 ,",
    "@xmath52 2 .",
    "[ item : resample ] else , compute a reduced bid : pick @xmath53 $ ] uniformly at random , and set @xmath54 3 .   for all epochs",
    ", the router uses the allocation rule @xmath55 applied to the transformed bids @xmath46 of the active users and given realized demand @xmath44 .",
    "4 .   given",
    "the amount of network data , @xmath56 , associated with each user @xmath0 , ( as realized by the allocation rule @xmath42 applied to transformed bids ) , collect payment from user @xmath0 as : 1 .",
    "collect @xmath57 .",
    "[ item : rebate ] if @xmath58 , give a _ rebate _ @xmath59",
    ". otherwise , @xmath60 .",
    "bids are perturbed , used for prioritized routing , the total number of bytes associated with a user is observed , and payments are made through a randomized adjustment via the rebate in step 4 .",
    "each user s rebate can be determined at the end of her allocation period , allowing the user s payment to be computed while other users are still active .    _",
    "a mechanism is _ truthful - in - expectation _ if a risk - neutral buyer maximizes expected utility by bidding truthfully , whatever the bids of others , where the expectation is taken with respect to random coin flips of the mechanism .",
    "_    an essential property for truthfulness is the _ ex post monotonicity _ of the allocation rule .",
    "let @xmath61 denote the allocation to buyer @xmath0 given some bid vector @xmath62 and demand vector @xmath63 .",
    "( we write @xmath62 to denote a generic bid vector and avoid confusion with the @xmath64 submitted as input to bks . )",
    "an allocation rule is _ ex post monotone _ if @xmath65 , for all bid vectors @xmath62 , all demand vectors @xmath63 , and all @xmath66 such that @xmath67 .",
    "this is _ ex post _ in the sense that whatever the bids and whatever the demand , a buyer s total traffic consumption weakly increases with her bid .",
    "we use the following result :    [ thm : bks - truthfulness ] applying the bks procedure with probability of perturbation @xmath68 to an allocation rule that is _ ex post _ monotone results in a truthful - in - expectation mechanism .",
    "the proof in @xcite shows that the scheme obtains an unbiased sample of an integral that defines the payment rule in the canonical approach of incentive - compatible mechanism design  @xcite .",
    "the allocation is the same as in the original allocation rule with probability at least @xmath69 , where @xmath7 is the number of buyers .",
    "* example 2 .",
    "* _ let s revisit the earlier example of manipulation in the vmm scheme . under bks ,",
    "when the first buyer s bid is not resampled , she pays $ 3 per packet , and has some total allocation @xmath70 .",
    "when her bid is resampled , the first buyer will have allocation @xmath70 or @xmath71 , depending on whether the resampled bid was below $ 2 .",
    "this will result in a large rebate , and in expectation , the first buyer s total payment will be essentially $ 2 , with the exact value depending on @xmath68 . _",
    "to establish truthfulness of the bks mechanism in our setting we need to show that spq combined with natural demand models implies that the allocation rule is _ ex post _ monotone . in our setting",
    ", the allocation rule is the process that determines the total network traffic used by each buyer over her allocation period .",
    "we first show that spq provides an isolation property on buyers , and then analyze the monotonicity of our allocation rule .",
    "[ lem:31 ] for any @xmath11 , capacity @xmath10 under spq is independent of how capacity is used by buyer @xmath0 in time @xmath72 , and weakly increases with bid @xmath73 .",
    "consider @xmath7 buyers , and order them by bids @xmath74 with ties broken at random .",
    "let s first consider the claim that capacity @xmath10 in epoch @xmath11 is independent of how the capacity is used by buyer @xmath0 in earlier epochs .",
    "proceed by strong induction . for buyer 1 , then this is immediate since the buyer always gets to use full the capacity of the channel . for buyer @xmath75 , given the induction hypothesis for buyers @xmath76 , buyer @xmath0 can not affect demand or allocation to higher priority buyers and is not affected by the use of the capacity by lower priority buyers .",
    "the result is that buyer @xmath0 gets all capacity that is unused by the higher priority buyers .",
    "the capacity @xmath10 is weakly increasing with bid value because of spq routing .",
    "in particular , if buyer @xmath75 gets a higher priority @xmath77 then her capacity in period @xmath11 will be the capacity unused by all buyers @xmath78 , whereas previously its capacity was that unused by all buyers @xmath79 .    given this lemma , we can now focus on an arbitrary buyer @xmath0 , and simplify notation by omitting the subscript @xmath0 .",
    "in particular , we use @xmath80 to denote the realized demand of the buyer in period @xmath11 ( keeping the dependence on total network capacity used so far silent ) , and @xmath81 to denote the buyer s realized capacity .",
    "both @xmath80 and @xmath81 are realizations of a random process ( the latter due to its dependence on the demand models of other buyers . )",
    "we first establish monotonicity and truthfulness properties of the mechanism under the assumption that the buyer is greedy in her use of the channel .",
    "given realized capacity @xmath81 and demand @xmath80 in epoch @xmath11 , a buyer using the _ greedy _ policy sends @xmath82 to the router in epoch @xmath11 .",
    "the greedy policy stipulates that the buyer makes her demand @xmath80 available to the router ( up to capacity @xmath81 ) , and neither pads the demand with fake traffic nor hides demand by introducing a delay .",
    "[ lemma : monotonicity ] if buyer @xmath0 s demand model is natural and routing is done using spq , then fixing bids of other buyers and realized demand , buyer @xmath0 s allocation up to and including any epoch @xmath11 under the greedy policy is _ ex post _ monotone in bid value @xmath73 .",
    "the proof uses the following lemma .",
    "[ lemma : maxforward ] if routing is done using spq and the demand function is natural , then for any @xmath11 , bid values and realized demand , following the greedy policy in every period up to and including @xmath11 maximizes the total amount of network capacity used by the buyer , @xmath83 , up to and including period @xmath11 .",
    "we proceed by induction on @xmath11 . by fixing bid values and fixing realized demand",
    "we have isolation .",
    "the base case is simple : if @xmath84 then using less than @xmath85 for any @xmath86 does not maximize @xmath87 .",
    "consider @xmath88 .",
    "suppose for contradiction that there is some natural demand function @xmath63 and realization of capacity @xmath9 such that using @xmath89 in every epoch @xmath90 does not maximize @xmath83 .",
    "let @xmath91 be a sequence of usage amounts that does maximize @xmath83",
    ".    if @xmath92 , setting @xmath93 increases the allocation in epoch @xmath11 and thus the total amount consumed , contradicting the fact that @xmath91 maximizes @xmath83 .    if @xmath93 , then there exists some @xmath94 such that @xmath95",
    ". let @xmath96 be the total amount used up to and including epoch @xmath97 under @xmath91 .",
    "consider a sequence @xmath98 of usage amounts that is greedy for all epochs @xmath99 , and let @xmath100 be the total used up to and including @xmath97 under @xmath98 . by the induction hypothesis",
    ", @xmath98 maximizes the amount used up to and including @xmath97 , so @xmath101 . because the demand function @xmath63 is natural , @xmath102 so @xmath98 is indeed a maximizing sequence , establishing a contradiction .    using this lemma",
    ", we obtain lemma  [ lemma : monotonicity ] .",
    ". then it would be the case that following the greedy policy and using the capacity @xmath103 in every epoch @xmath104 leads to a smaller allocation by epoch @xmath11 than using the greedy policy and using the capacity @xmath105 where @xmath106 for all @xmath104 ( and @xmath81 is the capacity under a higher bid @xmath107 , with this relationship between @xmath108 and @xmath81 following from lemma  [ lem:31 ] ) .",
    "but this is a contradiction with lemma  [ lemma : maxforward ] .",
    "if the buyer is restricted to the greedy policy , her demand is natural , and routing is done using spq then the bks mechanism is truthful and the dominant strategy is to submit a truthful bid @xmath109",
    ".    follows directly from lemma  [ lemma : monotonicity ] and the properties of bks in theorem  [ thm : bks - truthfulness ] .",
    "but we are also want to show that users can not benefit by delaying network usage , or padding traffic with fake packets .",
    "given spq routing and natural demand , the dominant strategy of a user in the bks mechanism is to bid its true value and follow the greedy policy .",
    "we first consider padding with fake traffic in some epochs .",
    "in particular , consider the final epoch @xmath11 in which the buyer does this , and for it to matter assume @xmath110 . fix any bid value @xmath73 ( perhaps untruthful ) .",
    "we establish that this weakly increases the buyer s expected payment without providing additional value ( since it is fake traffic . )",
    "the expected payment in bks is equal ( through the self - sampling approach ) to the myerson payment , and thus by the myerson  @xcite rule , we require @xmath111 where @xmath112 is the total allocation given bid @xmath113 with the padding in epoch @xmath11 and @xmath114 is the total allocation given bid @xmath113 without padding in epoch @xmath11 .",
    "this inequality holds since @xmath115 for all @xmath116 , since for lower values the buyer may at some point receive a lower priority at @xmath11 and thus be able to send less incremental traffic through padding , from which we have , @xmath117    second , consider holding back demand in some epochs such that not all the capacity is utilized .",
    "now that padding of demand has been precluded , it follows from monotonicity with respect to bid value , and the truthfulness of bks , that it is a weakly dominant strategy for a user to bid her true per - byte value .",
    "moreover , since the expected payment in bks is equal to the payments in the myerson auction , then @xmath118 for all alternate allocations @xmath119 obtained through demand reduction , where @xmath120 is the allocation achieved under the greedy policy , and @xmath121 and @xmath122 the expected payment in bks at allocation @xmath120 and @xmath123 respectively . from this",
    ", it follows immediately that the buyer can not benefit by holding back demand .    on this basis",
    ", we conclude that the bks mechanism has the `` truthful in expectation '' property in that it supports both truthful bidding and also straightforward revelation of demand ( and use of the capacity made available through spq applied to perturbed bids ) .",
    "we have assumed so far that the seller and router device can be trusted ; e.g. , to follow spq and bks pricing . however , a self - interested seller can do better by deviating from the scheme as currently described .",
    "this is a concern because it would also lead buy - side incentives to unravel .",
    "for example , consider the following profitable seller manipulations , and the failure of simple fixes :    \\(1 ) the simplest profitable manipulation for sellers is to simply never give rebates , justifying this by claiming that the randomized bid resampling in bks just happened to work out that way . a natural fix to this is to insist that the seller send the signed bids to a trusted central server for resampling .",
    "the central server would now know whether a buyer should pay her bid or get a rebate for a particular allocation , and since the server handles the accounting , it could appropriately credit or debit the buyer s account when it learned the final allocation .",
    "\\(2 ) if the seller can not tamper with the bid resampling process , it can still manipulate by reducing the allocation to resampled bidders , since they will be getting rebates and giving them service will reduce the seller s revenue . a partial fix to this",
    "is to note that to implement spq , the seller only needs to know the priority order of bidders , and not their bids , so bids can be encrypted when sent to the central server , which would report just the order to the router , keeping the seller ignorant of the bids .",
    "\\(3 ) unfortunately , the seller can still infer enough from the order to manipulate , even in a single allocation period .",
    "we omit the math here , but it can be shown that the expected revenue from the lowest priority user is negative , so the seller would have an incentive to reduce the user s allocation .    to preclude such manipulations , we propose a combination of lightweight cryptographic methods and incentive engineering . in particular ,",
    "we take advantage of the presence of _ multiple _ sellers in envisioned applications . precisely , we need enough sellers that share the same reserve price .",
    "the approach , align - trust , extends the bks scheme described so far , using a trusted central server for accounting and validation , logically inserting it between the buyer and seller .",
    "buyers pay the center directly , and the center pools the revenue across sellers in a particular way , making payments to sellers that address incentive concerns .",
    "we do not assume that the central server can observe or enforce anything about the sellers routing policy .",
    "we merely rely on it to verify the cryptographic signatures on buyer bids to ensure that sellers can not tamper with bids , to keep track of account balances for buyers and sellers , and to verify that bid perturbation is done correctly .",
    "we explain the approach in the next section .",
    "bks specifies that sellers should route packets using a highest - resampled - bid - first policy .",
    "one way to think about the problem with seller incentives in bks is that prioritizing in favor of buyers with resampled bids has negative value to sellers .",
    "( recall that a bid is only resampled with some probability @xmath68 . )",
    "we fix this by first paying sellers the perturbed bid value for data , rather than the rebate - adjusted , perturbed bid amount . from the seller s perspective , this makes the auction have `` first price '' semantics , and aligns incentives .",
    "because the bks mechanism also pays rebates to buyers , just paying the sellers based on perturbed bid amounts would leave the center with a deficit . instead",
    ", we compensate by taxing the sellers a percentage of their revenue .",
    "we ensure that sellers can only reduce their individual tax rate by improving efficiency , so sellers maximize revenue by routing to maximize efficiency ( i.e. , total value ) with respect to the resampled bids , which we establish is sufficient to retain incentives on the buy - side of the market .    for the purpose of align - trust ,",
    "we assume time is divided into _ accounting periods _ , perhaps a month long in practice .",
    "these periods encapsulate many bks style auctions , as various sellers provide bandwidth to buyers",
    ".    recall that bks allows a seller to adopt a reserve price to increase revenue . to align trust on the sell - side , we insist that each seller selects a reserve price from a small set of reserve prices .",
    "based on this , we can now consider the _ pool _ of sellers that select the same reserve price .",
    "we apply the following system - wide payment mechanism for the auctions involving these sellers :    consider an accounting period , and a set of sellers @xmath124 with the same reserve price .",
    "let @xmath125 be the set of buyers served by seller @xmath126 during the accounting period .    1 .",
    "charge each buyer the bks payment @xmath127 for each completed auction .",
    "credit each seller @xmath128 the _ first - price _",
    "revenue at the perturbed bids , without including the rebates : @xmath129 .",
    "2 .   randomly split the sellers in @xmath124 into two disjoint sets @xmath130 of equal size .",
    "let @xmath131 denote the total credit above reserve price to sellers in @xmath132 .",
    "let @xmath133 denote the total above - reserve payments from buyers associated with @xmath132 .",
    "define @xmath134 and @xmath135 similarly for sellers in @xmath136 . because the payments from buyers include the bks rebates , and the credits to sellers are at the first - price resampled bids @xmath46 , this leaves the center with a _ deficit _",
    "@xmath137 for each set .",
    "3 .   to make up the deficit , the center will tax the sellers .",
    "define the _ tax rate _ for each set as : @xmath138 collect @xmath139 from sellers in @xmath132 , charging tax rate @xmath140 uniformly across all sellers .",
    "collect @xmath141 from sellers in @xmath136 , charging tax rate @xmath142 uniformly across all sellers .",
    "this construction has several nice properties .",
    "first of all , as long as sellers continue to use spq it has no effect on buyer incentives , because align - trust is identical to bks from the buyer s point of view . in addition",
    ", we have :    the total payment in align - trust is exactly balanced .",
    "the reserve price payments effectively go directly from buyers to sellers .",
    "the total above - reserve payment to the system is @xmath143    a tax rate is admissible if it is no greater than one .",
    "this will be true with high probability when no seller accounts for a large fraction of rebates , as shown in the next lemma .",
    "the probability that the tax rate to a seller is greater than 1 falls exponentially quickly in the number of sellers , when the payments made to each seller in step 1 are independently distributed according to one of a finite set of distributions with bounded support .",
    "we call this assumption about the payment distribution the _ admissibility condition_.    suppose for convenience that the pool contains @xmath144 sellers , and let @xmath145 denote a random variable for the above - reserve credit made in step 1 to each of the sellers in @xmath132 .",
    "similarly , let @xmath146 denote a random variable for the total above - reserve credit made in step 1 to each of the sellers in @xmath136 .",
    "let s consider @xmath140 .",
    "for this to be bounded above by 1 , we need @xmath147 dividing through by @xmath26 , and writing @xmath148 ( where @xmath149 is the empirical mean ) , @xmath150 ( where @xmath151 is the empirical mean ) , and with @xmath152 , we want to bound the probability @xmath153 . for this",
    ", it is sufficient to bound the probability that @xmath154\\leq \\frac{z}{2 } \\text { and } e[x]-\\overline{x}\\leq \\frac{z}{2},\\ ] ] since in this case we have @xmath155 since @xmath156=e[y]$ ] by assumption .",
    "the probability @xmath157>\\frac{z}{2})$ ] , falls exponentially quickly in @xmath158 and @xmath26 by hoeffding s inequality , and similarly for @xmath159-\\overline{x}>\\frac{z}{2})$ ] .",
    "this completes the proof .",
    "we assume that the admissibility condition holds for the theoretical results that follow .",
    "in addition , from a seller s viewpoint , align - trust transforms the mechanism into a first - price auction ( with respect to perturbed bids ) with a tax collected on revenue , where the seller can not usefully manipulate his tax rate :    [ lem : align ] if the tax rate for a seller is weakly less than one , the seller s strict preference is to allocate in order to maximize the total value given perturbed bids .",
    "consider a seller @xmath126 in @xmath132 .",
    "the tax rate for @xmath126 is @xmath160 .",
    "@xmath161 depends only on sellers in @xmath136 , and @xmath162 is the sum of the revenues of other sellers in @xmath132 , which @xmath126 can not affect , and the total revenue for @xmath126 .",
    "increasing revenue lowers the tax rate facing @xmath126 , so as long as the tax rate is less than 1 , this is doubly good for @xmath126 .      under align - trust ,",
    "seller incentives are aligned with using a routing policy that maximizes total pre - tax revenue @xmath163 .",
    "this follows from lemma  [ lem : align ] .",
    "in this section , we examine the effect that this has on whether sellers want to follow spq , and on the effect of potential deviations on buy - side incentives .",
    "first , we characterize situations where sellers can not profit by deviating from spq .",
    "second , we look at situations when the seller may profit from using a different routing policy , and show that such deviations improve efficiency with respect to perturbed bids and preserve incentive alignment with truthful bidding for buyers .",
    "the crucial property that we need to retain under seller deviations is that of monotonicity , or a relaxed form of expected monotonicity .",
    "we first consider cases where the seller s selfish preference is to follow spq .",
    "the intuition is that deviating results in an immediate drop in revenue from sending lower priority traffic ahead of higher priority traffic , so in order for this to increase revenue , the seller has to expect to make up the lost revenue later .",
    "if this is not possible under a given demand model then spqis optimal for the seller . in the following , we consider _ ex post efficiency _ , which requires that an allocation rule maximizes total realized value whatever the bids and whatever the realized demand .",
    "the following lemma follows from lemma  [ lem : align ] , given admissibility .",
    "[ lemma : efficient - nonmanip ] if spq is _ ex post _ efficient ( with respect to perturbed bids ) , the seller can not increase his revenue by deviating from spq .",
    "we now specialize the natural demand models to understand when spq will be ex post efficient .",
    "a sufficient property is that the demand model be memoryless , so that it does not depend on the routing policy , with demand invariant to the total allocation made so far : @xmath164 for all @xmath165 and for all realizations of a user s random demand model .",
    "spq is greedy in regard to bid , and if there is no impact on future demand from a deviation from myopic value maximization in the current period then spq will maximize realized value , so applying lemma  [ lemma : efficient - nonmanip ] gives the following :    if the user demand models are memoryless , then the seller maximizes revenue by using spq , and the bks mechanism combined with align - trust retains truthfulness - in - expectation for buyers despite seller self - interest .    note that memoryless demand models are natural in the sense of our earlier definition .",
    "the seller can benefit by deviating from spq for some natural demand models .",
    "for example , consider the model of an impatient buyer , as in the example in section  [ sec : natural - examples ] .",
    "such a buyer will stop transmitting if it does not get some minimum amount of traffic by some time .",
    "if the seller knows this , it can sometimes increase revenue by increasing the buyer s priority , increasing her allocation over the minimum , and ensuring continuing transmission and continuing revenue .",
    "we first consider the extreme case in which the seller can form a perfect prediction of the future demand and bid values .",
    "let @xmath166 denote a set of routing policies considered by the seller , and let @xmath167 be the total allocation to @xmath0 under routing policy @xmath168 , given the realized demand of all buyers .",
    "[ lem : opt - is - monotone ] if the seller implements the optimal routing policy in @xmath166 , maximizing @xmath169 with respect to perturbed bids @xmath46 , then the implied allocation rule is _ ex post _ monotone and the resulting mechanism is truthful - in - expectation for buyers .",
    "the optimal allocation rule is _ ex post _ monotone . to see this ,",
    "consider the optimal allocation @xmath170 , denoting the total amount of capacity used by each buyer by her departure , based on perturbed bids @xmath171 .",
    "consider an alternate ( perturbed ) value @xmath172 , and new optimal allocation @xmath123 .",
    "since both @xmath14 and @xmath123 are available at bids @xmath46 and @xmath173 , then by optimality we have : @xmath174 where @xmath175 is the total ( perturbed ) bid for the allocation @xmath176 to all buyers except i. adding and collecting terms , we have @xmath177 and since @xmath172 we need @xmath178 .",
    "this is the condition for _ ex post _ monotonicity , and completes the proof .",
    "this illustrates the basic way in which the use of align - trust aligns incentives for sellers so that they act in a way that retains buy - side truthfulness .",
    "the assumption that the seller is computing the _ ex post _ optimal allocation with respect to realized demand and realized bids is very strong , and can be relaxed . rather than ex post monotone , a weaker property of _ monotone - in - expectation _ requires the expected total amount of bandwidth used by a buyer to be weakly increasing with bid value .",
    "the expectation is taken with respect to a probabilistic model of demand and bid values and also considering the random perturbation of bids in bks .",
    "the dominant - strategy equilibrium property for buyers no longer holds for this seller deviation , because the optimality of the seller s policy holds only in expectation , given distributional assumptions about other buyers . in its place , we adopt the standard notion of _ bayes - nash incentive compatibility _ , which in our case requires that truthful bidding and following the greedy policy maximizes a buyer s expected utility , given that other buyers do the same .",
    "[ thm : estimate - is - monotone ] if the seller implements a routing policy that is optimal in expectation , solving @xmath179,\\ ] ] forward from any time @xmath11 , where @xmath180 is the total additional allocation ( bytes ) to @xmath0 between @xmath11 and the departure time of @xmath0 , given perturbed bids @xmath46 , then the resulting mechanism is bayes - nash incentive compatible .",
    "consider buyer @xmath0 and arrival period @xmath181 . by the expected optimality of the routing policy , ( where the expectation is taken with respect to the probabilistic demand model of buyers and a distribution on perturbed bid values , itself induced by the bks randomization and a distribution on buyer values ) , we have @xmath182 where @xmath183 is the expected allocation to buyer @xmath0 forward from @xmath11 given perturbed bid @xmath49 , @xmath184 the expected allocation to other buyers forward from @xmath11 , @xmath185 denotes the expected value from this allocation given realized , perturbed bids reported so far and the distribution on future ( perturbed ) bids , @xmath172 is an alternate bid , and @xmath186 and @xmath187 denote the respective allocation quantities under this alternate bid .    proceeding in the same way as lemma  [ lem : opt - is - monotone ] , we can add and collect terms and obtain @xmath188 and conclude since @xmath172 that @xmath189 .",
    "this is the condition for monotone - in - expectation . from this",
    ", it then follows from the standard bks incentive arguments ( that in turn rely on monotonicity ) that the mechanism aligns incentives for buyers , with bayes - nash equilibrium adopted in place of truthful - in - expectation since monotonicity relies on the other buyers following the equilibrium , so that the seller s probabilistic model about the world is correct in regard to demand and bids .",
    "the weakening from truthfulness - in - expectation to bayes - nash equilibrium arises because the seller s policy is only optimal - in - expectation , and this in turn relies on the seller having a correct probabilistic model of buyer demand and thus equilibrium behavior by buyers .",
    "* example 3 . *",
    "_ an example to illustrate this idea : imagine a case where the seller knows that a buyer is impatient , with constant demand 10 in each round for the first 60 rounds , leaving after that if they do not get a minimum amount @xmath26 , drawn uniformly from @xmath190 $ ] .",
    "there is no uncertainty about this buyer s demand , and the seller computes his best estimates of the other buyers future demand .",
    "using these estimates , the seller can compute the probability that this buyer will reach each amount between 300 and 450 under spq routing .",
    "then it can consider switching the routing order in some rounds to increase the buyer s allocation , and consider how much that increases the likelihood of the buyer making it to her ( unknown ) @xmath26 and the likely future gains from that , versus the immediate revenue reduction such a deviation requires .",
    "the intuition for why this is still monotone should be clear if the buyer s traffic is worth more , there is a smaller revenue reduction from increasing her priority , and a larger potential future payoff , so the seller would be more likely to increase the buyer s allocation . _    buyers do not need to know whether the seller is using spq or an expected - efficiency maximizing policy , since bks remains monotone , and thus incentives are aligned with truthful bidding either way .",
    "the buyer only needs to believe that the seller is not irrationally reducing his expected revenue by changing priorities away from spq .",
    "another useful property is that these results hold for any set of routing policies @xmath166 considered by the router as long as the router always chooses the best policy ( in expectation ) from a fixed set , we still get monotonicity , and thus buyer truthfulness .",
    "we now present simulations that explore the quantitative difference between mechanisms , and illustrate the effects predicted by our theoretical analysis . we confirm that bks achieves arbitrarily close approximations to allocative efficiency for simple demand models , show that reserve prices can increase efficiency of non - prioritized routing methods , demonstrate a scenario where sellers have practical efficiency - improving deviations , and examine the distributional effects of revenue pooling .      we adopt a custom flow - level simulator , closely matching our theoretical model .",
    "each epoch is one second , and we run simulations for 10 minutes , or 600 epochs . demand and capacity are specified in kbps .",
    "the simulator supports arbitrary user demand models .",
    "we use a stochastic demand model motivated by patterns observed in real networks , somewhat simplifying the trace - based model described in  @xcite .",
    "a user s demand is composed of _ flows _ with total demand equal to the sum of the demands of the flows active at any time , flow arrival times are a poisson process , flow duration is sampled from a lognormal distribution , and each flow has poisson demand .",
    "we use the following parameters : flow durations have both mean and standard deviation 30 seconds , average flow inter - arrival times are 30 seconds , and each flow has average rate of either 10 or 30 kbps , as specified .",
    "this results in average demand equal to the average flow rate .",
    "[ fig : demand - trace ] shows an example demand trace of three such buyers , each with demand 10 kbps .",
    "the pattern is bursty both at short timescales , reflecting the poisson demand of each flow , and at longer timescales , reflecting the random flow arrival process .",
    "the simulator supports the spq , fq , and fifo routing policies described in section  [ sec : policies ] .",
    "unless otherwise specified , we simulate vmm with spq routing , bks with spq routing with priorities based on resampled bids , and fixed price with fq and fifo routing . the bks resampling frequency @xmath68 is 0.2 , chosen as a compromise between reducing the magnitude of rebates and not sacrificing efficiency .",
    "the results are not very sensitive to the choice of @xmath68 .",
    "we show the expected allocation over 1000 allocations for bks .",
    "we simulate truthful bidding for both bks and vmm , even though vmm is not a truthful mechanism .",
    "for memoryless demand models , this means that vmm results in the optimal allocation , acting as a benchmark for the truthful mechanisms .      from our analysis , we know that spq is efficient for memoryless demand models , but may not be efficient for other demand models . here , we look at both cases , and look at the magnitude of this effect in some scenarios .",
    "we also examine the drop in efficiency due to bid resampling in bks .",
    "[ fig : efficiency ] shows the social welfare ( sum of buyer and seller utilities ) for a scenario with three buyers .",
    "the first two have per - kb values 10 and 4 , and average demand 10 kbps each , simulating a high value and a medium value user .",
    "the last buyer has a per - kb value of only 1 , but has a higher average demand30 kbps .",
    "all buyers use the stochastic demand model described above , and we compare four different mechanisms  bks and vmm , both with spq routing and truthful bids , and fq and fifo , with a fixed price of 1 .",
    "( we study the effect of changing this fixed price in the next experiment ) . as the seller capacity increases , the social welfare increases for all the mechanisms , until all the demand is satisfied .",
    "the demand models in this simulation are memoryless , so spq routing for vmm is optimal given that we insist on truthful bidding .",
    "the small difference between the performance of vmm and bks is the efficiency cost of the sampling necessary for the truthfulness provided by bks .",
    "spq routing for bks is much more efficient than either of the non - prioritized fixed price policies .",
    "the difference between fq and fifo is also interesting  with fifo , the allocation is proportional to demand , so the low value , high - demand buyer gets three - fifth of the channel on average , reducing efficiency .        fig .",
    "[ fig : efficiency - vs - reserve ] shows the effect of reserve price on efficiency , in the same scenario , with seller capacity fixed at 25 kbps .",
    "raising the reserve price slightly to avoid allocating to the lowest value buyer improves efficiency for fifo and fq .",
    "since vmm and bks naturally prioritize high value data , raising the reserve price removes opportunities to        we now look at a case where a seller can profit by deviating from spq .",
    "the scenario is similar to the one above : three buyers , with per - kb values 10 , 4 , and 1 , and average demands 10 , 10 , and 30 kbps .",
    "however , now the high and medium value buyers depart after 90 seconds , and the low value buyer is impatient , leaving after 60 seconds if her allocation is less than 500 kb , and otherwise continuing to send for the full 600 seconds .",
    "if the seller fails to allocate at least 500 kb to the third buyer in the first minute , she misses out on forwarding extra traffic later , once the two higher value bidders are gone .",
    "[ fig : efficiency - impatient ] shows the efficiency of bks with spq and fq routing .",
    "for some intermediate capacities , the value - ignorant fq routing policy is better , because it results in the low priority buyer continuing to send . of course",
    ", if the seller knew the impatience threshold , it could use a better hybrid strategy , allocating just enough to buyer 3 to ensure she stays , and then allocating optimally to others .",
    "next , we study the effects of revenue pooling in align - trust , first looking at a simplified case where all sellers have the same buyer distribution , and then a more complex case where there are several seller distributions .",
    "we confirm our theoretical results , showing that the center will not have to run a deficit , and also show that pooling reduces the variance of seller revenue .",
    "[ fig : revenue - pooling - same ] shows the pooled revenue vs unpooled revenue for 200 sellers from a single distribution , with seller capacity 40 , buyers with per - kb values 2 and 3 and demand 10 kbps , a buyer with value 5 and demand 30 kbps , and no reserve price .",
    "in addition to the primary goal of making bks faithful for sellers , pooling drastically reduces the variance in seller revenue , with non - trivial pooled revenue for all sellers .",
    "this also shows that the tax rate for both pools is lower than 1 , as predicted by the theory .",
    "[ fig : revenue - pooling - varied ] shows the pooled revenue vs unpooled revenue for 200 sellers from four different settings : seller capacities 40 or 60 , and buyers with total demand 50 or 70 , with higher buyer value when demand is 70 .",
    "these are indicated by different markers .",
    "note the dramatic reduction in variance of pooled seller revenue for each seller category : without revenue pooling , some sellers have negative revenue while others have very high revenue .",
    "pooling reduces this variance , while preserving the relative ordering between seller types  sellers with higher non - pooled revenue have higher expected pooled revenue .",
    "our scheme has three main components : a protocol for buyers to send bids to the sellers , a priority queueing facility for sellers to allocate bandwidth to buyer flows according to bks , and a central server for revenue pooling and accounting .",
    "we have prototyped the first two components .",
    "an app on the buyer s side sends bids ( along with duration of validity of the bid ) to a service on the seller device .",
    "the seller device resamples the bids and uses them for allocating bandwidth , using the standard traffic control ( ` tc ` ) facilities in the linux kernel ( also used by android ) . specifically , upon receiving bids or updates to bids , the seller device sets ( ` tc ` ) filters to classify flows into one of a fixed number of priority classes based on their resampled bids , which enables the kernel to enqueue packets in the appropriate priority queue .",
    "thus , we get efficient strict priority queuing without any kernel modifications , with the caveat that we can only use a small fixed number of queues .",
    "this implies that we need to round down the resampled bids to the nearest priority level .",
    "however , this modification preserves truthfulness since the modified allocation function is still ( weakly ) monotone in bids .",
    "payments are made according to the un - rounded resampled bids .",
    "we have introduced an approach to prioritized bandwidth access in a dynamic environment .",
    "the method succeeds in aligning incentives on both the buy - side and the sell - side of the market for a variety of stochastic demand models .",
    "while auctions can introduce an extra burden on users over charging a flat fee , they can provide for efficient allocation and the complexity can be hidden through automated bidding agents  @xcite .",
    "there are many areas for future work .",
    "natural extensions to the theory include expanding to more expressive demand models , and considering valuation models other than linear per byte such as value per rate and multi - dimensional valuations .",
    "the bks scheme has been extended to handle the appropriate generalization of monotonicity through a self - sampling approach  @xcite , and the challenge would be design dynamic prioritization schemes that satisfy this cyclic monotonicity property for stochastic demand models .",
    "we make several assumptions that are useful in analysis and developing engineering insights , even if they might not quite hold in reality .",
    "more extensive and detailed packet level simulations would be useful to study situations where our assumptions such as natural demand models and linear per - byte valuations do not hold . analyzing real demand to determine the extent to which it confirms to our models",
    "is also future work .",
    "finally , developing our dynamic prioritization system prototype further by designing appropriate user interfaces for eliciting buyer values , integrating with applications to allow setting traffic values , and evaluating performance such as computational overhead and energy consumption also remains to be done ."
  ],
  "abstract_text": [
    "<S> we design a protocol for dynamic prioritization of data on shared routers such as untethered 3g/4 g devices . </S>",
    "<S> the mechanism prioritizes bandwidth in favor of users with the highest value , and is incentive compatible , so that users can simply report their true values for network access . </S>",
    "<S> a revenue pooling mechanism also aligns incentives for sellers , so that they will choose to use prioritization methods that retain the incentive properties on the buy - side . in this way </S>",
    "<S> , the design allows for an open architecture . </S>",
    "<S> in addition to revenue pooling , the technical contribution is to identify a class of stochastic demand models and a prioritization scheme that provides allocation monotonicity . </S>",
    "<S> simulation results confirm efficiency gains from dynamic prioritization relative to prior methods , as well as the effectiveness of revenue pooling .    </S>",
    "<S> = 1 </S>"
  ]
}