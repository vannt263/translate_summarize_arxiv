{
  "article_text": [
    "the main motivation of this paper is to clarify a delicate point in kontsevich s proof of the witten conjecture  @xcite .",
    "the conjecture concerns the intersection numbers of the first chern classes of some line bundles @xmath0 over the deligne - mumford compactification @xmath1 of the moduli space of @xmath2-pointed genus @xmath3 curves .    the proof by kontsevich uses in an essential way the cell decomposition of the space @xmath4 given by strebel differentials .",
    "this cell decomposition has a natural closure , and it is necessary to know the relation between this closure and the deligne - mumford compactification of the moduli space . in his paper kontsevich gives the answer , but the proof is only briefly sketched .",
    "a full proof was provided in a very thorough paper by e.  looijenga  @xcite ( and here we give a new proof ) .",
    "however many people are not sure what the exact implications of looijenga s results are .",
    "in particular , s.  p.  novikov still insists that there is a gap in kontsevich s proof .",
    "therefore we think that it is useful to give a complete account of the situation .",
    "this paper is essentially an overview , although it contains some new results ( theorems  [ thm : contfam ] and  [ thm : cont2 ] as well as a new proof of theorem  [ thm : homeomorphism ] ) .",
    "we assume that the notion of moduli space @xmath5 of riemann surfaces of genus @xmath3 with @xmath2 marked and numbered points is known , as well as the notion of a stable curve and that of the deligne - mumford compactification @xmath1 of the moduli space .",
    "we also use the standard notation @xmath6 for the line bundle over @xmath1 whose fiber over a point @xmath7 representing a stable curve @xmath8 is the cotangent line to @xmath8 at the @xmath9th marked point .      here is a sketch of what is to be or has been done to justify kontsevich s expressions of the first chern classes of the bundles @xmath6 .",
    "* 1 . * a quotient @xmath10 of the deligne - mumford compactification @xmath1 by some equivalence relation is constructed .",
    "the quotient is a compact hausdorff topological orbifold",
    ". the line bundles @xmath6 on @xmath1 are pull - backs of some line bundles over @xmath10 , which we will also denote by @xmath6 .",
    "the quotient @xmath10 has only singularities of real codimension at least  2 .",
    "therefore its fundamental homology class is well - defined . the fundamental homology class of @xmath1 is sent to the fundamental homology class of @xmath10 under the factorization .",
    "all these facts are quite simple once the equivalence relation is given .",
    "they are formulated in kontsevich s original paper , except for the fact that @xmath10 is hausdorff , which was proved by looijenga .",
    "* @xmath11 is homeomorphic to a cell complex @xmath12 .",
    "there is a piecewise affine projection from @xmath12 to @xmath13 that commutes with the projection from @xmath11 to @xmath13 .",
    "the cell complex and the homeomorphism were constructed by kontsevich , but he omitted the proof of continuity .",
    "the proof is one of the main results of looijenga s paper . here",
    "we give a different proof .",
    "* 3 . * for each line bundle @xmath6 , one constructs a cell complex @xmath14 together with a projection @xmath15 satisfying the following properties .",
    "each fiber of the projection is homeomorphic to a circle .",
    "the ( real ) spherization @xmath16 of the dual line bundle @xmath17 is isomorphic to the circle bundle @xmath14",
    ".    the bundles @xmath14 were constructed by kontsevich , the isomorphism of the two bundles is immediate .",
    "a connection on the bundle @xmath14 can be explicitly given .",
    "its curvature represents the first chern class of the bundle .",
    "the connection and the curvature were written out by kontsevich . however , they are only piecewise smooth forms defined on a cell complex that is not homeomorphic to a smooth orbifold",
    ". therefore one should explain why ( and in what sense ) the curvature indeed represents the first chern class correctly .",
    "this issue does not seem to have been raised in the literature .",
    "we deal with it here in section  [ sec : chern ] .",
    "thus the goal of this paper is to give a complete proof of the following theorem .",
    "consider a point @xmath18 .",
    "denote by @xmath19 the preimage of @xmath20 under the projection from @xmath12 to @xmath13 .",
    "then @xmath19 is also a cell complex .",
    "[ thm : int = int ] to each bundle @xmath6 one can assign a piecewise smooth @xmath21-form @xmath22 on the cell complex @xmath12 in such a way that @xmath23 for every @xmath24 .      this paper is organized as follows .    in section  [ sec : strebel ] we review the notion of strebel differentials for smooth curves and give , without proof , two examples of its degeneration as a curve tends to a singular stable curve in @xmath1 .    in section  [ sec : stable ] we review the notion of dualizing sheaf for a stable curve and define strebel differentials for nonsmooth stable curves .",
    "we show that strebel differentials with given perimeters @xmath25 form a continuous section of the vector bundle of quadratic differentials over @xmath1 . this theorem does not , as far as we know , appear in the literature .    in section  [ sec :",
    "compactifications ] we describe the compactification @xmath10 and the cell complex @xmath12 homeomorphic to @xmath11 .",
    "we prove that they are indeed homeomorphic , and also briefly sketch looijenga s proof  @xcite .    in section",
    "[ sec : chern ] we describe a framework that allows one to work with differential forms on cell complexes .",
    "the forms representing the connections on the bundles @xmath14 and their curvatures fit into this framework and thus their use is justified .",
    "i am greatful to e.  looijenga for pointing out the references  @xcite , @xcite , and  @xcite , to m.  kontsevich , s.  lando , c.  maclean , g.  shabat , and k.  strebel for useful discussions and for their interest in the subject , and to a.  zvonkin for his remarks on the text .",
    "let @xmath26 be a riemann surface .",
    "a _ simple differential _ on @xmath26 is a meromorphic section of its cotangent bundle . in a local coordinate @xmath27 , it can be written as @xmath28 , where @xmath29 is a meromorphic function .",
    "quadratic differential _ is a meromorphic section of the tensor square of the cotangent bundle . in a local coordinate @xmath27 , it can be written as @xmath30 .",
    "let @xmath31 be a quadratic differential and @xmath32 a point that is neither a pole nor a zero of  @xmath31 .",
    "then @xmath31 has a square root in the neighborhood of @xmath33 : it is a simple differential @xmath34 , unique up to a sign , such that @xmath35 .",
    "the integral @xmath36 is a biholomorphic mapping from a neighborhood of @xmath33 in @xmath26 to a neighborhood of @xmath37 in @xmath38 .",
    "the preimages of the horizontal ( vertical ) lines in @xmath38 under this mapping are called _ horizontal ( vertical ) trajectories _ of the quadratic differential @xmath31 . because @xmath34 is defined up to a sign these trajectories do not have a natural orientation .",
    "if @xmath33 is a double pole , then in the neighborhood of @xmath33 the quadratic differential @xmath31 has an expansion @xmath39 the complex number @xmath40 is called the _ residue _ of the double pole and does not depend on the choice of the local coordinate .    by a local analysis",
    ", it is easy to see that if @xmath33 is a @xmath41-tuple zero of @xmath31 , then there are @xmath42 horizontal trajectories issuing from @xmath33 . further , if @xmath33 is a simple pole , then there is a unique horizontal trajectory issuing from @xmath33 . finally , if @xmath33 is a double pole whose residue is a negative real number @xmath43 , then @xmath33 is surrounded by closed horizontal trajectories ( see figure  [ 1 ]  ( b ) ) .",
    "these trajectories , together with @xmath33 , form a topological open disc in @xmath26 . in the metric @xmath44 all these trajectories",
    "have the same length @xmath45 .",
    "the other possible cases are the case of a double pole with a positive real or a nonreal residue and the case of poles of order greater than  @xmath21 .",
    "we will not need them , so we leave them to the reader .",
    "now we are ready to formulate strebel s theorem .",
    "let @xmath26 be a connected ( not necessarily compact ) riemann surface without boundary with @xmath46 distinct marked and numbered points @xmath47 .",
    "we will be interested only in the case where @xmath26 is a surface of genus @xmath3 with a finite number of punctures .",
    "( the punctures and the marked points are two different things and are pairwise distinct .",
    ") however theorem  [ thm : strebel ] below is applicable to any hyperbolic surface @xmath26 , i.e. , whenever the universal covering of @xmath48 is the poincar disc .",
    "for example , @xmath26 can be a ring , a torus with a puncture , a surface of genus @xmath21 with a hole , or a surface of infinite genus",
    ".    in his book on quadratic differentials strebel proves the following theorem ( @xcite ,  theorem  23.5 and theorem  23.2 for @xmath49 ) .",
    "[ thm : strebel ] for any positive real numbers @xmath25 there exists a unique quadratic differential @xmath31 on @xmath26 satisfying the following conditions .",
    "( i )  it has double poles at the marked points and no other poles .",
    "( ii )  the residue at @xmath50 equals @xmath51 .",
    "( iii )  if we denote by @xmath52 the disc domain formed by the closed horizontal trajectories of @xmath31 surrounding @xmath50 , then @xmath53    a quadratic differential satisfying the above conditions is called a _ strebel differential . _    if @xmath26 is a compact surface of genus @xmath3 , then the nonclosed horizontal trajectories of a strebel differential @xmath31 form a connected graph embedded into @xmath26 .",
    "all its vertices ( situated at the zeroes of @xmath31 ) have degrees @xmath54 .",
    "its edges have natural lengths ( measured with the length measure @xmath55 ) .",
    "its faces are the disc domains @xmath52 and are in a one - to - one correspondence with the marked points .",
    "the perimeter of the @xmath9th face equals @xmath56 .",
    "each face @xmath52 , punctured at its marked point , has a natural flat riemannian metric @xmath44 . in this metric",
    "it is isometric to a semi - infinite cylinder whose base is a circle of length @xmath56 .",
    "an _ embedded _ or _ ribbon _",
    "graph is a connected graph endowed with a cyclic order of the half - edges issuing from each vertex .",
    "it is a standard fact that any given cyclic order allows one to construct a unique embedding of the graph into a surface .",
    "if an abstract graph is embedded into a surface , the cyclic order of the half - edges adjacent to a vertex is just the counterclockwise order .    on the set @xmath57 of the half - edges of the graph we introduce three permutations : @xmath58 is the product of the cyclic permutations assigned to the vertices , @xmath59 is the involution without fixed points that exchanges the half - edges of each edge , @xmath60 is the permutation whose cycles correspond to the faces of the ribbon graph .",
    "these permutations sum up all the information about the ribbon graph .",
    "[ prop : strips ] if we are given a ribbon graph with @xmath2 numbered faces , endowed with edge lengths , and such that each vertex has a degree at least @xmath61 , then there is a unique way to recover a riemann surface @xmath26 with @xmath2 marked points and to determine the perimeters @xmath56 in such a way that the ribbon graph is the graph of nonclosed horizontal trajectories of the corresponding strebel differential .    the construction given in the proof is described , for example , in  @xcite , section  2.2 .",
    "[ [ proof - of - propositionpropstrips . ] ] proof of proposition  [ prop : strips ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    to find the perimeters @xmath56 we just add up the lengths of the edges surrounding each face .",
    "the riemann surface is obtained in the following way . to every oriented edge of the ribbon graph",
    "we assign a strip @xmath62 \\times [ 0 , + i \\infty[$ ] in the complex plane , where @xmath63 is the length of the edge .",
    "this strip inherits the standard complex structure from the complex plane .",
    "now we construct our surface by gluing together the strips corresponding to all the oriented edges ( figure  [ fig : strips ] ) .",
    "first , for every edge , we glue together the two strips that correspond to the two ways of orienting this edge .",
    "the segment @xmath62 $ ] is identified with @xmath64 $ ] and the complex structure is extended in the natural way .",
    "now we glue together , along the sides @xmath65 , the strips that correspond to neighboring edges in the same face .",
    "the complex structure is extended naturally to @xmath660 , + i \\infty[$ ] .",
    "it remains to extend the complex structure to the vertices of the ribbon graph and to the @xmath2 punctured points .    at a vertex of degree @xmath67",
    "there are @xmath68 right angles of strips that meet together , that is , in whole , an angle of @xmath69 .",
    "let us place the vertex at the origin of the complex plane and put the strips on the plane one after another around the vertex ( so that the 5th strip will overlap with the 1st one , the 6th one with the 2nd one , and so on ) .",
    "if @xmath27 is the coordinate on the complex plane , we introduce a local coordinate at the neighborhood of the vertex using the function @xmath70 .    finally , consider a marked point and the semi - infinite cylinder formed by the strips that surround it .",
    "let @xmath71 be the height of a point in this cylinder and @xmath72 its argument ( the origin of the angles can be chosen arbitrarily ) .",
    "then @xmath73 is a local coordinate in the neighborhood of the marked point .",
    "the uniqueness of the riemann surface is proved in the following way .",
    "consider a strebel differential on a riemann surface .",
    "let us cut the riemann surface along the nonclosed horizontal trajectories of the strebel differential and along its vertical trajectories joining the marked points to the vertices of the ribbon graph ( the zeroes of the differential ) .",
    "we obtain the set of strips described above .",
    "therefore our riemann surface is necessarily glued of strips as in the above construction .",
    "denote by @xmath74 the polygon ( the face of the graph ) that forms the boundary of the @xmath9th disc domain @xmath52 .",
    "( if @xmath52 is adjacent to both sides of an edge @xmath75 , this edge appears twice in the polygon @xmath74 . )",
    "further , denote by @xmath76 the complex line tangent to @xmath26 at @xmath50 and by @xmath77 its real spherization .",
    "( here and below @xmath78 is the set of positive real numbers . )",
    "then there exists a canonical identification @xmath79 indeed , given a direction @xmath80 , there is a unique vertical trajectory of @xmath31 issued from @xmath50 in the direction @xmath81 .",
    "this trajectory meets the polygon @xmath74 at a unique point , and this point will be identified with @xmath81 .",
    "thus strebel s theorem allows us to define @xmath2 polygonal bundles @xmath14 over @xmath4 and these bundles can be identified with the circle bundles obtained by a real spherization of the complex line bundles @xmath17 .",
    "( recall that the fiber of the bundle @xmath6 is the cotangent line to @xmath26 at @xmath50 . )",
    "we are going to show that these polygonal bundles can be extended to @xmath82 , where @xmath1 is the deligne - mumford compactification , so that the identification above is preserved .      to extend the bundles @xmath14 over @xmath1 , we need to extend to stable curves the notion of strebel differentials . the construction is carried out in the next section . here",
    "we just give two examples , without any proofs .",
    "consider the case of a torus with one marked point that degenerates into a sphere with one marked point and two identified points ( see figure  [ figtorus ] ; the marked point is represented as a black dot ) .",
    "fix a positive real number @xmath45 . on every torus there exists a unique strebel differential with residue @xmath83 at the marked point .",
    "it determines a @xmath84-faced embedded ( ribbon ) graph composed of the nonclosed horizontal trajectories .",
    "this graph is either a hexagon whose opposite edges are glued together in pairs , or a quadrilateral whose opposite edges are glued together in pairs . in the figure we represented a hexagon .",
    "now , when the torus degenerates into a sphere , the lengths of the edges @xmath85 and @xmath86 tend to @xmath37 .",
    "thus , on the sphere we obtain a graph with only one edge of length @xmath87 .",
    "this edge joins the two identified points .",
    "if we put the identified points at @xmath37 and @xmath88 , and the marked point at @xmath84 , then the limit strebel differential on the sphere equals @xmath89 it has simple poles at the identified points @xmath37 and @xmath88 .",
    "now consider a sphere with four marked points that degenerates into a reducible curve consisting of two spherical components intersecting at one point ( figure  [ figsphere ] ) .",
    "assume that the first component contains the marked points @xmath90 and @xmath91 , while the second component contains the marked points @xmath92 and @xmath93 .",
    "fix 4 positive real numbers @xmath94 .",
    "we will assume that @xmath95 , but @xmath96 ( in order to obtain two different pictures on the two components ) .",
    "for any positions of the fixed points on the sphere @xmath97 , there is a unique strebel differential with residues @xmath51 at the marked points @xmath50 .",
    "this differential determines a @xmath98-faced graph on @xmath97 .",
    "as the curve approaches the degeneration described above , this graph necessarily becomes of a particular form .",
    "namely , it will contain a simple cycle , formed by several edges , separating the marked points @xmath90 and @xmath91 from the marked points @xmath92 and @xmath93 .",
    "in other words , the faces number @xmath84 and @xmath21 become adjacent as well as the faces @xmath61 and @xmath98 .",
    "when the curve degenerates , the lengths of all the edges in the above cycle tend to @xmath37 .    on the first component",
    "we obtain a graph with 2 vertices .",
    "the vertex at the nodal point has degree @xmath84 , the second vertex has degree @xmath61 .",
    "the corresponding quadratic differential has a simple pole at the nodal point and a simple zero at the other vertex ( and , of course , double poles at the marked points ) .    on the second component",
    "we obtain a graph with a unique vertex of degree @xmath21 at the nodal point .",
    "the corresponding quadratic differential does not have zeros or poles ( except the double poles at the marked points ) .",
    "let @xmath26 be a stable curve with @xmath2 marked points @xmath50 . a _ simple differential _",
    "@xmath34 on @xmath26 is a meromorphic differential defined on each component of @xmath26 and satisfying the following properties .",
    "( i )  it has at most simple poles at the marked points and at the nodal points , but no other poles .",
    "( ii )  for each nodal point , the sum of the residues of the poles of @xmath34 on the two components meeting at this point vanishes .",
    "one can readily check that simple differentials form a vector space @xmath99 of dimension @xmath100 ( if @xmath46 ) for any stable curve of arithmetic genus @xmath3 , whether it is smooth or not .",
    "indeed , consider a stable curve with several irreducible components @xmath101 .",
    "suppose @xmath101 is of genus @xmath102 , has @xmath103 marked points and @xmath104 nodal points .",
    "then we have @xmath105    now , according to the riemann - roch theorem , the dimension of the space of sections of a line bundle with first chern class @xmath106 , such that at most simple poles are allowed at @xmath67 fixed points , is equal to @xmath107 , whenever @xmath108 . in our case , on @xmath101 , @xmath109 ( the first chern class of the cotangent line bundle ) and @xmath110 .",
    "thus the dimension of the space of sections equals @xmath111 . adding these numbers for all the irreducible components @xmath101 and subtracting the total number @xmath112 of nodal points",
    "( because each nodal point gives a linear relation on the residues ) we obtain @xmath100 .    because the dimensions of the spaces @xmath99 are the same , these spaces form a holomorphic vector bundle @xmath113 over the space @xmath1 .",
    "this follows immediately from algebro - geometric arguments",
    ". indeed , denote by @xmath114 the universal curve over @xmath1 .",
    "then simple differentials form a sheaf on @xmath114 .",
    "it is called the _ relative dualizing sheaf _ and is the sheaf of sections of a line bundle ( the relative cotangent line bundle ) over @xmath114 .",
    "( see , for example ,  @xcite , chapter  iii , theorem  7.11 , where it is proved that the dualizing sheaf is the sheaf of sections of a line bundle for any algebraic variety that is locally a complete intersection , and an explicit construction of the sheaf is given .",
    "see also  @xcite , chapter  3 , section  a. ) the direct image of the relative dualizing sheaf on @xmath1 has the property that the dimensions of its fibers are the same . therefore the direct image is itself the sheaf of sections of a vector bundle ( see  @xcite , exercise 5.8 ) .",
    "the fact that the spaces @xmath99 form a holomorphic vector bundle can also be understood more intuitively .",
    "the space of pairs @xmath115 , where @xmath26 is a stable curve and @xmath34 a simple differential on it , can be given a complex structure in the following way .",
    "for any pair @xmath116 , one can calculate the integral of @xmath34 over any closed loop that does not contain marked or nodal points .",
    "the complex structure is introduced by requiring that these integrals be meromorphic functions on the space of pairs @xmath116 .",
    "( that these integrals can have poles is shown by the following example . consider a torus whose meridian is contracted , so that it degenerates into a sphere with two identified points .",
    "then the integral of a simple differential over the parallel will tend to @xmath88 . )",
    "now we repeat the above construction for quadratic differentials .",
    "let @xmath26 be a stable curve with @xmath2 marked points @xmath50 .",
    "a _ quadratic differential _",
    "@xmath31 on @xmath26 is a meromorphic quadratic differential defined on each component of @xmath26 and satisfying the following properties .",
    "( i )  it has at most double poles at the marked points and at the nodal points , but no other poles .",
    "( ii )  for each nodal point , the residues of the poles of @xmath31 on the two components meeting at this point are equal .",
    "the residue of a quadratic differential at a pole of order at most @xmath21 is equal to the coefficient of @xmath117 ( for any local coordinate @xmath27 ) .",
    "if the order of the pole is actually less than @xmath21 , we let the residue be equal to @xmath37 .    as",
    "above , the dimension of the space @xmath118 of quadratic differentials is the same for any stable curve @xmath26 and equals @xmath119 .    indeed ,",
    "if @xmath101 is an irreducible component of @xmath26 , that has genus @xmath102 and contains @xmath103 marked points and @xmath104 nodal points , then the dimension of the space of quadratic differentials on it is @xmath120 . adding these numbers for all the components and subtracting the total number @xmath112 of the nodal points",
    "( because each nodal point gives a linear relation on the residues ) , we obtain @xmath119 .    since the dimensions of the spaces @xmath118 are the same",
    ", they form a holomorphic vector bundle @xmath121 over @xmath1 .",
    "this follows from the same arguments as for simple differentials .",
    "the quadratic differentials form a sheaf on the universal curve @xmath114 : the sheaf of sections of the tensor square of the relative cotangent line bundle .",
    "the direct image of this sheaf on @xmath1 has the property that all its fibers are of the same dimension .",
    "therefore it is a sheaf of sections of a holomorphic vector bundle .",
    "here we define strebel differentials on stable curves .",
    "let @xmath26 be a stable curve with @xmath2 marked points .",
    "suppose we are given @xmath2 positive real numbers @xmath25 .",
    "[ def : unmarked ] we say that an irreducible component of a stable curve @xmath26 is _ marked _ if it contains at least one marked point and _ unmarked _ if it contains no marked points .",
    "[ def : stabstreb ] a _ strebel differential @xmath31 on a stable curve @xmath26 _ is a quadratic differential on @xmath26 satisfying the following properties . (",
    "i )  it has double poles at the marked points , at most simple poles at the nodal points , and no other poles .",
    "( ii )  the residue of the pole at the @xmath9th marked point @xmath50 equals @xmath51 .",
    "( iii )  the differential @xmath31 vanishes identically on the unmarked components .",
    "( iv )  let @xmath122 be a marked component of @xmath26 .",
    "let us puncture @xmath122 at the nodal points",
    ". for @xmath123 , denote by @xmath52 the disc domain formed by the closed horizontal trajectories of @xmath31 surrounding @xmath50 .",
    "then we have @xmath124    strebel differentials have at most simple poles at the nodes of @xmath26 ( unlike generic quadratic differentials , that have double poles ) .",
    "therefore the condition that the residues of the poles on the two components meeting at a nodal point must be equal is automatically satisfied , since both residues vanish .",
    "[ rem : stabstreb ] it follows from strebel s theorem , that ( once the positive numbers @xmath25 are given ) there exists a unique strebel differential @xmath31 on any stable curve @xmath26 .",
    "its restriction to unmarked components vanishes .",
    "its restriction to each marked component @xmath122 is the strebel differential on @xmath122 with punctures at the nodal points .",
    "indeed , it is easy to see that when we put the punctures back into the component @xmath122 , the corresponding strebel differential will have at most simple poles at these points , because there is only a finite number of nonclosed horizontal trajectories issuing from them .",
    "let @xmath125 be a smooth compact riemann surface with @xmath2 marked points , and let @xmath126 be obtained by puncturing @xmath125 at a finite number of points ( different from the marked points ) .",
    "given a list of positive real parameters @xmath25 , there is a unique strebel differential @xmath127 on @xmath125 and a unique strebel differential @xmath128 on @xmath126 . at first sight",
    ", one could think that they are the same ; but , in general , this is not true .",
    "indeed , if we restrict @xmath127 to @xmath126 , we will see that the disc domains of @xmath127 contain punctures at their interior , which is not allowed for a strebel differential .",
    "conversely , if we try to extend @xmath128 to @xmath125 by putting back the punctured points , we will , in general , obtain simple poles at these points .",
    "again , a strebel differential is not allowed to have poles outside the marked points .",
    "thus in the condition ( iv ) in definition  [ def : stabstreb ] above , it is important to puncture each component @xmath122 at the nodal points .",
    "as in the case of smooth compact riemann surfaces , the nonclosed horizontal trajectories of a strebel differential on a stable curve form a graph , embedded into the stable curve .",
    "more precisely , it is embedded into the union of the marked components of the stable curve .",
    "the vertices of the graph are of degrees @xmath54 , except for the vertices that lie at the nodal points and can have any degree @xmath129 .",
    "its edges have natural lengths ( measured , as before , with @xmath55 ) .",
    "its faces are in a one - to - one correspondence with the marked points , and the perimeter of the @xmath9th face equals @xmath56 .",
    "as before , if we denote by @xmath74 the polygon surrounding the @xmath9th face of the graph , by @xmath76 the complex line tangent to the marked point @xmath50 , and by @xmath130 its real spherization , we have a canonical identification @xmath79      in section  [ sec : compactifications ] we will need a formal definition of a graph formed by the nonclosed horizontal trajectories of a strebel differential on a stable curve .",
    "we give the definition here .",
    "to understand the definition below one must imagine that we have contracted to a point each unmarked component of the stable curve .",
    "thus we have obtained a graph embedded into a new ( usually singular ) curve .",
    "the unmarked components of the initial stable curve form a not necessarily connected subcurve in it .",
    "each connected component of this subcurve is contracted to a vertex of our graph . on each such vertex",
    "we will mark the arithmetic genus of the corresponding contracted component .    if a vertex @xmath131 of the graph lies at a node of the curve ,",
    "there is no longer any natural cyclic order on the half - edges issuing from it .",
    "instead , we will have a permutation ( with several cycles ) acting on these half - edges .",
    "each cycle of this permutation corresponds to a component of the curve at the neighborhood of @xmath131 .",
    "the cycle determines the counterclockwise cyclic order of the half - edges on the corresponding component .",
    "[ def : stabgraph ] a _ stable ribbon graph _ is a connected graph endowed with the following structure .",
    "( i )  a non - negative integer ( a _ genus defect _ ) is assigned to each vertex .",
    "( ii )  a permutation acting on the set of half - vertices issuing from each vertex is given .",
    "there are two types of vertices whose genus defect can not be equal to  @xmath37 : first , the vertices of degree  @xmath84 , second , the vertices of degree two such that the corresponding permutation of the two half - edges is a transposition .",
    "kontsevich ( @xcite , appendix b ) gives an equivalent definition of stable ribbon graphs .",
    "a stable ribbon graph is represented in figure  [ fig : stabgraph ] .",
    "its surface of embedding ( that can be uniquely reconstructed from the stable ribbon graph structure ) is shown in dotted lines .",
    "it is easy to define faces of a stable graph .",
    "let @xmath57 be the set of all the half - edges of the graph , @xmath58 the product of all the permutations ( with disjoint supports ) assigned to the vertices , and @xmath59 the involution without fixed points that switches two half - edges of each edge .",
    "then a face is a cycle of the permutation @xmath60 .",
    "the permutations @xmath58 , @xmath59 , and @xmath132 sum up all the structure of a stable ribbon graph , except the genus defect function .",
    "we will usually consider stable graphs with @xmath2 numbered faces .",
    "the _ genus _ of a stable ribbon graph is the arithmetic genus of its surface of embedding , plus the sum of genus defects of all its vertices .    in section  [ sec : compactifications ] we will see that stable graphs are obtained from ordinary ribbon graphs by edge contractions .    [",
    "prop : strips2 ] given a stable ribbon graph with @xmath2 numbered faces and endowed with edge lengths , we can find a set of perimeters @xmath25 and a stable curve such that the stable ribbon graph is the graph of nonclosed horizontal trajectories of the corresponding strebel differential .",
    "the marked components of the curve are uniquely determined .",
    "[ [ proof . ] ] proof .",
    "+ + + + + +    to find the perimeters we simply add up the lengths of the edges surrounding each face . to construct a stable curve we carry out the same operations of strip gluings as in the proof of proposition  [ prop : strips ] .",
    "this gives us the complex structure on the marked components .",
    "that it is unique is shown as in proposition  [ prop : strips ] .",
    "as for the unmarked components , their arithmetic genera are given by the genus defect function of the stable ribbon graph , but their complex structures and even their topologies can be chosen arbitrarily .      here",
    "we prove the continuity of the map that assigns to a stable curve and a list of perimeters in @xmath82 the corresponding strebel differential in the total space of the vector bundle @xmath121 of quadratic differentials over @xmath1 .",
    "in particular , strebel differentials with fixed perimeters form a continuous section of the vector bundle @xmath121 over @xmath1 .",
    "this fact does not seem to be stated explicitly in the literature , although it would not be a surprise for a specialist in teichmller spaces .",
    "we will need a rather well - known characterization of convergence in @xmath1 and in the total space of the vector bundle @xmath121 of quadratic differentials .",
    "we view a complex structure on a surface as an operator @xmath133 that multiplies each tangent vector by @xmath9 .",
    "we also remind the reader that quadratic differentials have at most double poles at the marked points , at most double poles with equal residues at the nodes , and no other poles .",
    "[ def : deformation ] a continuous map @xmath134 from a stable curve to another one is called a _ deformation _ if ( i )  the preimage of any node of @xmath126 is either a node of @xmath125 or a simple loop in the smooth part of @xmath125 , ( ii )  @xmath29 is an orientation - preserving diffeomorphism outside the nodes and loops , and ( iii )  @xmath29 sends the marked points to the marked points preserving their numbers .    for a summary of various properties of deformations and their relations with augmented teichmller spaces",
    "see  @xcite .",
    "see also  @xcite for related questions on the topology of the teichmller spaces .",
    "[ prop : teichmetric ] let @xmath135 be a converging sequence in @xmath121 and denote by @xmath136 and @xmath133 the complex structures on @xmath137 and @xmath26 .",
    "starting from some @xmath138 there exists a sequence of deformations @xmath139 such that :    ( i )  on any compact set @xmath140 the sequence of complex structures @xmath141 converges uniformly to @xmath133 ;    ( ii )  on any compact set @xmath142 the sequence of complex - valued symmetric @xmath21-forms @xmath143 converges uniformly to @xmath31 .",
    "[ [ sketch - of - a - proof . ] ] sketch of a proof .",
    "+ + + + + + + + + + + + + + + + + +    consider a point @xmath7 and the corresponding stable curve with marked points @xmath8 .",
    "let @xmath144 be a sufficiently small chart containing @xmath145 , where @xmath146 is an open ball in @xmath147 and @xmath148 a finite group acting on @xmath146 and stabilizing @xmath145 .",
    "the neighborhood of @xmath145 in @xmath1 is identified with @xmath149 .",
    "consider the part of the universal curve @xmath150 that lies over @xmath146 .",
    "it is a fiber bundle over @xmath146 whose fibers are stable curves parameterized by the points of @xmath146 .",
    "even as a smooth manifold @xmath151 is , of course , not a direct product with @xmath146 , because its fibers have different topologies .",
    "however , there exists a continuous function @xmath152 with the following properties .",
    "( i )  the restriction of @xmath29 to any fiber @xmath153 is a deformation @xmath154 in the sense of definition  [ def : deformation ] .",
    "( ii )  the function @xmath29 is smooth on @xmath151 outside the preimages of the nodes of @xmath8 .",
    "( iii )  the restriction of @xmath29 to @xmath8 is the identity map .",
    "the function @xmath29 is a kind of universal family of deformations over the open set @xmath146 .",
    "such a function can be constructed , for example , in the following way .",
    "first of all , let us choose the loops to be contracted by @xmath29 in each fiber @xmath153 .",
    "their free homotopy types are uniquely determined by the property that we must obtain the curve @xmath8 by pinching all these loops .",
    "we choose the loops themselves to be the shortest geodesics inside the corresponding homotopy classes , with respect to the unique complete metric of curvature @xmath155 on @xmath153 , compatible with the conformal structure . erasing all the loops and the nodes in each fiber we obtain a locally trivial fiber bundle over a contractible base @xmath146 .",
    "therefore we can trivialize it by a diffeomorphism @xmath156 commuting with the projections to @xmath146 .",
    "we take @xmath29 to be the second component of this diffeomorphism and we extend it to the loops in every fiber @xmath153 by sending them to the corresponding nodes of @xmath8 .    for @xmath138 big enough",
    ", @xmath137 lies in @xmath146 ( or , more precisely , in @xmath149 , but we can choose any lifting of @xmath137 to @xmath146 ) .",
    "for a compact set @xmath157 there is , on the whole set @xmath158 , a smooth linear operator @xmath159 acting on tangent planes to the fibers of @xmath151 .",
    "therefore the sequence @xmath160 converges uniformly on @xmath161 to the complex structure @xmath133 of the stable curve @xmath8 .",
    "this proves assertion  ( i ) of the proposition .",
    "now consider a holomorphic section of the vector bundle @xmath162 over @xmath146 .",
    "it is represented by a holomorphic section of a line bundle over the universal curve @xmath151 , namely , of the tensor square of the relative dualizing bundle .",
    "almost each fiber of this line bundle is naturally identified with the tensor square of the cotangent line to the corresponding stable curve at the corresponding point .",
    "the only exceptions are the fibers over the marked and the nodal points .",
    "first assume for simplicity that our sequence @xmath163 belongs to ( or , more precisely , is a restriction of ) some holomorphic section of @xmath162 .",
    "then , exactly as before , we conclude that if @xmath164 is a compact set , the sequence of quadratic differentials @xmath165 converges uniformly on @xmath161 to the quadratic differential @xmath31 . in general",
    ", the sequence @xmath163 does not belong to a holomorphic section of @xmath162 .",
    "then we have to consider a family of @xmath166 holomorphic sections of @xmath162 over @xmath146 , forming a basis of each of its fibers .",
    "the coordinates of the elements of the sequence @xmath163 in the basis formed by the sections converge to the coordinates of @xmath167 . applying to each section of the family the above argument",
    ", we conclude that sequence @xmath165 converges to @xmath31 uniformly on @xmath161 .",
    "this proves assertion  ( ii ) of the proposition .",
    "[ thm : contfam ] the strebel differentials with fixed parameters @xmath25 form a continuous nonvanishing section of the vector bundle @xmath121 of quadratic differentials over the deligne - mumford compactification @xmath1 .",
    "[ [ proof.-1 ] ] proof .",
    "+ + + + + +    let us fix a stable curve @xmath26 and consider a sequence of smooth curves @xmath137 that tends to @xmath26 in @xmath1 as @xmath138 tends to @xmath88 .",
    "by strebel s theorem ( theorem  [ thm : strebel ] ) and remark  [ rem : stabstreb ] there is a unique strebel differential @xmath168 on each curve @xmath137 and a unique strebel differential @xmath31 on @xmath26 .",
    "we will prove that @xmath168 tends to @xmath31 in the vector bundle @xmath121 , as @xmath138 tends to @xmath88 .",
    "this is enough to prove the theorem , since smooth curves form an open dense subset of @xmath1 .",
    "first of all , the sequence of quadratic differentials @xmath168 is bounded , therefore it has at least one limit point @xmath169 .",
    "we will prove that @xmath170 , which implies that the limit point is unique and is therefore a true limit .",
    "to do that , we study the limit quadratic differential @xmath169 and prove that it has all the properties of a strebel differential .    for shortness we will call just `` trajectories '' the horizontal trajectories of the differentials .",
    "the nonclosed trajectories of @xmath169 have a finite total length .",
    "*    let @xmath171 be a regular point that is neither a zero nor a pole of @xmath169 .",
    "let @xmath172 be a sequence of points of the curves @xmath137 that tends to @xmath145 in the universal curve @xmath173 over @xmath1 . by moving each @xmath174 slightly inside @xmath137",
    "we can assume that each @xmath174 belongs to a closed horizontal trajectory of @xmath168 , because the union of closed trajectories is dense in each curve @xmath137 .",
    "moreover , by extracting a subsequence we can assume that all these closed trajectories belong to the disc domains @xmath52 for the same @xmath9 .",
    "therefore each closed trajectory has the same length @xmath56 .",
    "we will prove that @xmath145 is contained either in a closed trajectory or in a nonclosed trajectory shorter than @xmath56 .",
    "suppose that moving along the trajectory through @xmath175 we have covered a segment of length @xmath176 without encountering a nonregular point ( a pole , a node , or a zero ) and without passing twice through the same point .",
    "the above segment has a compact neighborhood @xmath161 that does not contain marked points , nodes of @xmath26 , or zeroes of @xmath169 . using proposition  [ prop : teichmetric ]",
    "we can construct a sequence of deformations @xmath139 in such a way that the sequences of complex structures @xmath141 and of quadratic differentials @xmath143 converge uniformly on @xmath161 .",
    "therefore , for @xmath138 big enough , the trajectory through @xmath174 of the quadratic differential @xmath168 will also have a segment of length greater than @xmath56 .",
    "this is a contradiction .",
    "thus , if @xmath145 is a regular point of @xmath169 , the trajectory through @xmath145 is either closed or nonclosed of finite length .    by compactness of @xmath26 ,",
    "a nonclosed trajectory of finite length necessarily has two endpoints in @xmath26",
    ". these endpoints can be zeroes of @xmath169 , simple poles of @xmath169 ( including possible simple poles at the nodes of @xmath26 ) , or nodes of @xmath26 at which @xmath169 has no poles .",
    "since the number of such points is finite and there is only a finite number of nonclosed trajectories issuing from each of them , it follows that the total number of nonclosed trajectories is finite .    *",
    "each closed trajectory of @xmath169 bounds a disc with a unique marked point inside it . *",
    "if the trajectory @xmath177 through @xmath145 is closed , consider a compact tubular neighborhood @xmath161 of @xmath177 that does not contain marked points , nodes of @xmath26 , and zeroes of @xmath169 .",
    "we construct a sequence of deformations @xmath139 as in proposition  [ prop : teichmetric ] .    for @xmath138",
    "big enough @xmath178 contains a closed trajectory @xmath179 of the strebel differential @xmath168 .",
    "indeed , let @xmath63 be a real number greater than any of the perimeters @xmath56 .",
    "if we choose @xmath138 big enough and a point @xmath172 close enough to @xmath180 , a segment of length @xmath63 of the trajectory of @xmath168 through @xmath174 will be entirely contained in @xmath178 .",
    "but for a generic choice of @xmath174 the trajectory through @xmath174 is closed of length less than @xmath63 .",
    "therefore we have obtained a closed trajectory @xmath179 entirely contained in @xmath178 .",
    "its homotopy type is uniquely determined by @xmath161 .",
    "indeed , @xmath179 can neither bound a small disc inside @xmath178 ( because @xmath168 has no poles inside @xmath181 ) , nor have self - intersections .",
    "we know that this closed trajectory belongs to a disc domain @xmath182 of @xmath168 and that the restriction of @xmath183 to @xmath182 is a diffeomorphism .",
    "thus @xmath177 , just as @xmath179 , surrounds a disc that contains a unique marked point .",
    "note that we have always assumed that @xmath145 is not a zero of @xmath169 .",
    "therefore we still know nothing about the existence of irreducible components of @xmath26 on which @xmath169 vanishes identically .",
    "the poles of @xmath169 at the nodes of @xmath26 are at most simple .",
    "*    consider a nodal point @xmath145 of @xmath26 , and let us prove that the pole of @xmath169 at @xmath145 is not double , as for a generic quadratic differential , but at most simple ( on both components meeting at @xmath145 ) .",
    "suppose that this is not true , and both poles of @xmath169 are double ( and have the same residue , as is always the case for quadratic differentials ) .",
    "then the common residue is necessarily a negative real number .",
    "indeed , otherwise a neighborhood of @xmath145 entirely consists of nonclosed trajectories of @xmath169 of infinite lengths ( see figure  [ 1]a ) , which contradicts * 1*. if the common residue is a negative real number , then the point @xmath145 is surrounded ( on both components ) by concentric closed trajectories ( figure  [ 1]b ) . each of these trajectories must surround a unique marked point . but",
    "this would mean that @xmath26 is composed of @xmath21 spherical irreducible components with one marked point and one nodal point of each .",
    "this is impossible because the curve @xmath26 is stable .",
    "thus @xmath169 can not have double poles at nodal points .    to get a better insight why double poles are impossible at the nodes of @xmath26 , we have represented ( figures  [ 2 ] and  [ 3 ] ) two families of curves with quadratic differentials , degenerating to a nodal curve @xmath26 on which the limit quadratic differential has a double pole at a node .",
    "all the quadratic differentials in question have only a finite number of nonclosed horizontal trajectories .",
    "however , in the first case , the limit curve @xmath26 is not stable , while in the second case , the quadratic differentials before the limit have cylindric domains .",
    "* 4 . on components without marked points",
    "we have @xmath184 . *    now consider an unmarked component @xmath122 of @xmath26 ( see definition  [ def : unmarked ] ) .",
    "suppose @xmath169 is not identically equal to zero on this component .",
    "then @xmath169 has only a finite number of nonclosed trajectories on @xmath122 and these are of finite lengths .",
    "but , on the other hand , @xmath169 has no closed trajectories , because each closed trajectory surrounds a marked point and @xmath122 contains no marked points .",
    "this is a contradiction .    *",
    "the marked components are covered by the closures of the disc domains of @xmath169 .",
    "*    finally , consider the restriction of @xmath169 to a marked component @xmath122 ( see definition  [ def : unmarked ] ) .",
    "it has double poles with residues @xmath51 at the marked points ( and therefore it does not vanish ) .",
    "it has at most simple poles at the nodal points .",
    "each of its closed trajectories surrounds a unique marked point and therefore belongs to a disc domain .",
    "the total length of its nonclosed trajectories is finite and therefore @xmath122 is covered by the closures of the disc domains .",
    "thus ( by strebel s theorem ) @xmath169 is the unique strebel differential on @xmath185 with parameters @xmath56 .",
    "we have proved that @xmath170 .",
    "this completes the proof .",
    "[ thm : cont2 ] the map @xmath186 that assigns to a stable curve and a list of perimeters the corresponding strebel differential is continuous .",
    "[ [ proof.-2 ] ] proof .",
    "+ + + + + +    we consider a sequence of smooth curves @xmath137 tending to a stable curve @xmath26 , together with a sequence of @xmath2-tuples of positive real numbers @xmath187 tending to an @xmath2-tuple @xmath188 of positive real numbers .",
    "now we repeat the proof of theorem  [ thm : contfam ] without modifications .",
    "k.  strebel ( @xcite , theorem  23.3 ) proves that strebel differentials on any connected , not necessarily compact riemann surface ( of finite type and without boundary ) with @xmath2 marked points depend continuously on the parameters @xmath25 , in the topology of uniform convergence on compact sets outside the marked points .",
    "here we describe a compactification of @xmath5 that is different from the deligne - mumford one .",
    "this compactification , multiplied by @xmath13 , is isomorphic ( as a topological orbifold ) to a natural closure of the cell decomposition of @xmath4 given by strebel differentials .",
    "strebel s theorem allows one to divide the space @xmath4 into cells : two riemann surfaces endowed with perimeters @xmath189 and @xmath190 belong to the same cell if the nonclosed horizontal trajectories of the corresponding strebel differentials form isomorphic ribbon graphs ( without taking into account the lengths of the edges ) .",
    "the cell corresponding to a ribbon graph @xmath191 whose set of edges is @xmath192 , is isomorphic to @xmath193 , where @xmath194 is the ( finite ) group of automorphisms of the ribbon graph .",
    "a cell @xmath195 is a face of another cell @xmath196 iff the corresponding graph @xmath197 can be obtained from the graph @xmath198 by contracting several edges .",
    "gluing such cells together we obtain an orbifold cell complex homeomorphic to @xmath4 .",
    "now we construct a bigger cell complex whose cells correspond to stable ribbon graphs of genus @xmath3 with @xmath2 numbered faces .",
    "let us first define the operation of edge contracting in stable ribbon graphs .",
    "a cell @xmath195 of our new cell complex will be a face of another cell @xmath196 iff the corresponding stable graph @xmath197 can be obtained from the stable ribbon graph @xmath198 by contracting several edges .",
    "all the graphs considered below are stable ribbon graphs of genus @xmath3 with @xmath2 numbered faces ( see definition  [ def : stabgraph ] ) .",
    "ordinary ribbon graphs with @xmath2 numbered faces and such that their vertices have degrees at least  @xmath61 are particular cases of stable ribbon graphs ( the genus defect at all vertices being equal to  @xmath37 ) .",
    "let @xmath191 be a stable ribbon graph and @xmath75 its edge .",
    "we suppose that @xmath75 does not constitute a face on its own .",
    "recall that @xmath58 is the permutation of the half - edges obtained by multiplying all the permutations assigned to vertices ; @xmath59 is the involution exchanging the half - edges of each edge ; @xmath60 is the permutation whose cycles correspond to faces .",
    "the _ contraction of the edge _",
    "@xmath75 in the stable ribbon graph @xmath191 gives the following stable ribbon graph .",
    "the underlying combinatorial graph is just the underlying graph of @xmath191 with the edge @xmath75 contracted .",
    "if the edge @xmath75 is not a loop ( figure  [ fig : contraction]a ) , then the genus defect assigned to the vertex obtained by its contraction is the sum of the genus defects of the two initial vertices of @xmath75 .",
    "if @xmath75 is a loop based at a vertex @xmath131 and the two half - edges of @xmath75 belong to the same cycle of the permutation @xmath58 ( figure  [ fig : contraction]b ) , then the genus defect of @xmath131 does not change after the contraction .",
    "if @xmath75 is a loop and the half - edges of @xmath75 belong to two different cycles of @xmath58 ( figure  [ fig : contraction]c ) , then the genus defect increases by @xmath84 .    finally , the new permutations @xmath199 , @xmath200 , @xmath201 are defined as follows .",
    "let @xmath71 be a half - edge .",
    "then the half - edge @xmath202 is the first among the half - edges @xmath203 , @xmath204 ,  that is not a half - edge of @xmath75 .",
    "( in other words , from the point of view of a face whose boundary included the edge @xmath75 , this edge simply got contracted . )",
    "the permutation @xmath200 is defined in the obvious way ( by excluding from @xmath59 the cycle corresponding to @xmath75 ) .",
    "the permutation @xmath199 equals @xmath205 .",
    "this operation of edge - contracting might look complicated , but actually it is quite natural and describes what happens to the graph of nonclosed horizontal trajectories of a strebel differential as the length of one of its edges @xmath75 tends to  @xmath37 . from the point of view of each polygon @xmath74 surrounding a face nothing special happens : if @xmath75 was part of @xmath74 it simply gets contracted .",
    "simple topological considerations allow one to find what happens to the genus defect .",
    "the precise statement of this is given in theorem  [ thm : homeomorphism ] below .",
    "note that if an edge @xmath75 is the unique edge that surrounds a face , then it can not be contracted , because its length must remain equal to the perimeter @xmath56 of the corresponding face .",
    "the two propositions below are simple combinatorial exercises .",
    "edge contracting is commutative , in other words the result of a contraction of two edges does not depend on the order in which they are performed .",
    "thus it makes sense to talk about contracting a subset of the set of edges of a stable ribbon graph .",
    "consider a stable ribbon graph @xmath191 .",
    "let @xmath192 be the set of its edges , @xmath57 the set of its half - edges , and @xmath206 its structural permutations .",
    "decompose @xmath192 into a disjoint union @xmath207 .",
    "we are going to describe the result of the contraction of the edges of @xmath208 .",
    "decompose @xmath208 into the union of connected components , @xmath209 .",
    "first we introduce a structure of a stable ribbon graph on each of the @xmath210 .",
    "the underlying graph is just the subgraph of @xmath191 with edges @xmath210 .",
    "the permutation @xmath211 is the restriction of @xmath59 to the half - edges of @xmath210 .",
    "the image of a half - edge @xmath71 under @xmath212 is the first half - edge among @xmath213 , @xmath214 ,  to belong to an edge of @xmath210 .",
    "finally , @xmath215 .",
    "the genus defect function is the restriction of the genus defect function of @xmath191 to the subgraph .",
    "now we can introduce a structure of a stable ribbon graph on the set of remaining edges @xmath216 .",
    "the underlying graph is obtained from @xmath191 by contracting the edges of @xmath208 .",
    "the permutation @xmath200 is the restriction of @xmath59 to the half - edges of @xmath216 .",
    "the image of a half - edge @xmath71 under @xmath201 is the first half - edge among @xmath203 , @xmath204 ,  to belong to an edge of @xmath216 .",
    "finally , @xmath217 .",
    "if a vertex of the new graph is the result of the contraction of @xmath210 , then its genus defect is equal to the genus of the stable ribbon graph @xmath210 .",
    "the genus defects of the other vertices are the same as they were in the graph @xmath191 .",
    "[ prop : contraction ] the stable ribbon graph @xmath216 described above is the result of a contraction of the edges @xmath208 in the stable ribbon graph @xmath191 .",
    "now , using stable ribbon graphs , we can construct a new orbifold cell complex .",
    "[ def : a ] denote by @xmath12 the following orbifold cell complex .",
    "its cells are in a one - to - one correspondence with stable ribbon graphs with @xmath2 numbered faces . if @xmath191 is such a graph and @xmath192 the set of its edges , the corresponding cell @xmath218 is isomorphic to @xmath193 , where @xmath194 is the ( finite ) group of automorphisms of @xmath191 .",
    "a cell @xmath195 is a boundary cell of the cell @xmath196 if the corresponding stable ribbon graph @xmath197 can be obtained from the stable ribbon graph @xmath198 by contracting several edges @xmath219 .",
    "the cell @xmath195 is then glued to @xmath196 along @xmath220 .",
    "denote the @xmath14 the orbifold cell complex of pairs @xmath221 , where @xmath191 is a stable graph with @xmath2 numbered faces and @xmath145 a point lying on its @xmath9th face @xmath74 .",
    "the fact that @xmath14 indeed has a natural structure of a cell complex can be seen in the following way .",
    "consider a cell @xmath218 of @xmath12 .",
    "its preimage in the total space of @xmath14 ( under the projection to @xmath12 forgetting the point @xmath145 ) is naturally subdivided into cells .",
    "each cell is composed of the points @xmath221 such that @xmath145 lies on some given edge of the polygon @xmath74 , or such that @xmath145 coincides with one of the vertices of @xmath74 .",
    "these cells are then glued to each other in the obvious way .      in section  [ ssec : stabstreb ]",
    "we saw that a strebel differential on a stable curve vanished identically on the irreducible components that do not contain marked points .",
    "therefore it is a good idea to contract such components .",
    "let @xmath26 be a stable curve with @xmath2 marked points .",
    "consider the curve @xmath222 obtained from @xmath26 by contracting to a point each unmarked component ( i.e. , an irreducible component of @xmath26 that does not contain marked points ) .    on the curve @xmath222 we can define a genus defect function .",
    "it is a function with a finite support and with positive integer values , defined in the following way .",
    "consider the subcurve of @xmath26 composed of its unmarked components .",
    "each connected component of this subcurve is contracted to a point of @xmath222 and we assign to this point the arithmetic genus of the corresponding contracted component ( cf . definition  [ def : stabgraph ] ) .",
    "[ def : contraction ] we call the curve @xmath222 endowed with the genus defect function the _ contraction _ of @xmath26 .",
    "[ def : mr ] we call the _ minimal reasonable _ compactification of @xmath5 ( denoted by @xmath10 ) the quotient of the deligne - mumford compactification @xmath1 by the following equivalence relation : two points @xmath223 are equivalent if the corresponding contractions @xmath224 and @xmath225 are isomorphic .",
    "this compactification was defined in kontsevich s original paper  @xcite .",
    "looijenga ( @xcite , lemma  3.1 ) shows that it is a compact hausdorff topological orbifold .",
    "it is not known whether it can be given a natural algebraic structure .",
    "note that we have constructed @xmath10 together with a projection @xmath226 this projection contracts some subvarieties of @xmath1 of complex codimension at least @xmath84 .",
    "therefore the fundamental homology class of @xmath1 is sent to the fundamental homology class of @xmath10 .",
    "the line bundles @xmath6 over @xmath1 are pull - backs of some complex line bundles over @xmath10 , that we will also denote by @xmath6 .",
    "[ [ proof.-3 ] ] proof .",
    "+ + + + + +    this is almost obvious .",
    "indeed , if two curves @xmath125 and @xmath126 are equivalent in the sense of definition  [ def : mr ] , then the cotangent lines @xmath227 to marked points on both curves are naturally identified .",
    "the intersection numbers of the first chern classes @xmath228 are the same on any compactification @xmath229 of @xmath5 that can be projected on @xmath10 in such a way that the line bundles @xmath6 are obtained by pull - back from @xmath10 and the fundamental class of @xmath229 is sent to the fundamental class of @xmath10 .",
    "[ [ proof.-4 ] ] proof .",
    "+ + + + + +    this is again obvious .",
    "instead of calculating the intersection numbers on @xmath229 we can calculate them on @xmath10 and pull them back on @xmath229 .",
    "in particular all the intersection numbers are the same on @xmath1 and @xmath10    it is not known whether the compactifications @xmath10 can be endowed with the structure of singular algebraic varieties .",
    "it had been conjectured that this can be achieved using the semi - ampleness of the line bundles @xmath6 over @xmath1 . however , sean keel showed in  @xcite , section  3 that the semi - ampleness fails for @xmath230 ( although in finite characteristic it holds for any @xmath3 and @xmath2 , see  @xcite ) .    for @xmath231 , the algebraic version of the minimal reasonable compactification @xmath232",
    "was constructed by marco boggi  @xcite .",
    "he discribed it as a solution to a moduli problem using the construction that we give below .",
    "he also gave a description of @xmath232 using blow - ups of a projective space and studied the action of the symmetric group on it .",
    "the space @xmath232 was also defined and used in  @xcite v.  goryunov and s.  lando , although the authors did not know its exact interpretation as a moduli space .",
    "let us sum up the algebraic construction of @xmath232 .",
    "consider a smooth rational curve with @xmath2 marked points @xmath233 .",
    "consider a degree  @xmath84 rational function @xmath234 on @xmath97 having its pole at @xmath235 and such that @xmath236 such a function is unique , up to a multiplicative constant , therefore its values @xmath237 yield a map @xmath238 .",
    "putting together such maps for all @xmath9 , we obtain a map @xmath239 .",
    "we claim that the closure of the image of @xmath240 in @xmath241 is an algebraic model of the minimal reasonable compactification .",
    "more precisely , @xmath240 can be naturally extended to a holomorphic map @xmath242 that sends two stable curves to the same point if and only if their contractions ( definition  [ def : contraction ] ) are isomorphic .    let us sketch the proof of this fact .",
    "first of all , the family of functions @xmath234 can be extended to a family of functions on the compactification @xmath243 .",
    "the function @xmath234 on a stable curve @xmath26 with @xmath2 marked points is defined as follows .",
    "it is constant on each irreducible component of @xmath26 that does not contain @xmath235 . on the component that contains @xmath235 ,",
    "the function @xmath234 is of degree  @xmath84 and has a simple pole at @xmath235 . and , as before , we have @xmath236 such a function @xmath234 is , again , unique , up to a multiplicative constant .",
    "it is easy to see that the values of the function @xmath234 at the points @xmath244 allow one to reconstitute the complex structure on the component of @xmath26 that contains @xmath235 , but not on the other components .",
    "thus the function @xmath240 can be extended to @xmath243 and a point @xmath245 allows one to reconstitute the complex structure of the marked components of @xmath26 , but not that of the unmarked components .",
    "consider two stable curves @xmath125 and @xmath126 that are mapped to the same point of @xmath10 .",
    "let @xmath25 be a given list of perimeters ( positive real numbers ) .",
    "it is clear that the stable ribbon graphs formed by the nonclosed horizontal trajectories of the strebel differentials on @xmath125 and @xmath126 are the same , including the edge lengths .",
    "we can therefore define a map @xmath71 from @xmath11 to the cell complex @xmath12 of stable ribbon graphs with @xmath2 numbered faces and endowed with edge lengths ( see definition  [ def : a ] ) .",
    "[ thm : homeomorphism ] the map @xmath246 is an isomorphism of topological orbifolds . the polygonal bundles @xmath14 over @xmath12 are naturally identified with the real spherizations @xmath247 of the complex line bundles @xmath17 dual to @xmath6 .",
    "this theorem was formulated by m.  kontsevich without a proof .",
    "it follows from the main theorem ( theorem  8.6 ) of e.  looijenga s paper  @xcite .",
    "here we give a different proof .",
    "[ [ proof - of - theoremthmhomeomorphism . ] ] proof of theorem  [ thm : homeomorphism ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    the identification of @xmath247 with @xmath14 is immediate ( see the discussion in the end of section  [ ssec : stabstreb ] ) .    the bijectivity of @xmath71 is a reformulation of proposition  [ prop : strips2 ] .",
    "the continuity of @xmath71 and that of @xmath248 are equivalent . indeed , both spaces @xmath11 and @xmath12 have natural proper projections to @xmath13 .",
    "we know that the map @xmath71 is a bijection that commutes with the projections . therefore if @xmath71 or its inverse is continuous , then @xmath71 is a homeomorphism .",
    "thus the main task is to prove the continuity of @xmath71 , which we will do using theorem  [ thm : cont2 ] and proposition  [ prop : teichmetric ] .    *",
    "1 . a sequence of strebel differentials . *    consider a sequence of stable curves @xmath137 tending to a stable curve @xmath26 , together with a sequence of @xmath2-tuples @xmath249 of positive real numbers tending to an @xmath2-tuple @xmath250 of positive real numbers .    from theorem  [ thm : cont2 ]",
    "we know that in the vector bundle @xmath121 of quadratic differentials , the sequence of the corresponding strebel differentials @xmath168 on @xmath137 tends to the strebel differential @xmath31 on @xmath26 .",
    "moreover , according to proposition  [ prop : teichmetric ] , there is a sequence of deformations @xmath139 such that the sequence @xmath143 converges to @xmath31 , uniformly on any compact set @xmath251 .",
    "we must prove that in the cell complex @xmath12 , the sequence of stable graphs with edge lengths corresponding to @xmath168 tends to the stable graph with edge lengths corresponding to @xmath31 .",
    "* 2 . for @xmath138",
    "big enough , a disc domain of @xmath168 contains any compact set inside the corresponding disc domain of @xmath31 . *",
    "let @xmath252 be one of the marked points in the curve @xmath26 , let @xmath182 be the corresponding disc domain consisting of closed horizontal trajectories , and let @xmath253 be any compact set .",
    "then , for @xmath138 big enough , @xmath178 is contained in the disc domain of @xmath168 surrounding the marked point @xmath254 .",
    "indeed , consider a compact annulus @xmath255 surrounding @xmath161 .",
    "we suppose that @xmath255 is composed of closed trajectories of the disc domain @xmath182 and that @xmath256 .",
    "the annulus @xmath255 does not contain nodes of @xmath26 , nor zeroes or poles of @xmath31 .    in the proof of theorem  [ thm : contfam ] , paragraph *",
    "2 * , we proved that , for @xmath138 big enough , @xmath257 necessarily contains a closed horizontal trajectory of @xmath168 that makes exactly one turn around @xmath257 .",
    "this trajectory surrounds @xmath258 entirely .",
    "thus @xmath178 lies inside a disc domain of @xmath168 .    *",
    "3 . cutting the curve @xmath26 into pieces . *    for shortness",
    ", we call a _ disc neighborhood _ of a point @xmath171 any neighborhood of @xmath145 homeomorphic to an open disc .    to every marked point @xmath50 on @xmath26",
    "we assign a disc neighborhood @xmath259 .    to every vertex @xmath131 of the stable graph of the differential @xmath31 we assign an open set @xmath260 as follows .",
    "if @xmath131 is a zero of @xmath31 at a regular point of @xmath26 , then @xmath261 is just a disc neighborhood of @xmath131 . if @xmath131 is a node of @xmath26 such that both irreducible components intersecting at @xmath131 are marked ( contain marked points ) , then @xmath261 is the union of two disc neighborhoods of @xmath131 on both components . if @xmath131 is obtained by contracting one or more unmarked irreducible components of @xmath26 , then @xmath261 is the union of these unmarked components and of the disc neighborhoods of all the nodes at which they meet marked components .",
    "finally , to every edge @xmath75 we assign a compact set @xmath262 .",
    "it is homeomorphic to a closed disc and contains in its interior the part of @xmath75 that lies outside @xmath261 and @xmath263 , where @xmath131 and @xmath264 are the vertices of @xmath75 .",
    "moreover , we suppose that @xmath265 does not intersect the vertical trajectories of @xmath31 that join marked points to the vertices @xmath131 and @xmath264 .",
    "all these sets are represented in figure  [ fig : pieces ] .",
    "all the disc neighborhoods above can be chosen arbitrarily small .",
    "we denote by @xmath266 the stable ribbon graph endowed with edge lengths , assigned to the strebel differential @xmath31 .",
    "similarly , @xmath267 is the stable ribbon graph with edge lengths assigned to @xmath168 .",
    "* 5 . for @xmath138 big enough",
    ", the vertices of @xmath268 in @xmath137 lie inside the union of the sets @xmath269 over all the vertices @xmath131 of @xmath191 . *    indeed , consider the compact set @xmath270 obtained from @xmath26 by taking away all the open sets @xmath271 and @xmath261 .",
    "there are no zeroes or poles of @xmath31 nor nodes of @xmath26 in @xmath161 .",
    "therefore , for @xmath138 big enough , there are no vertices of @xmath268 in @xmath178 . on the other hand , according to * 3 * , there are no vertices of @xmath268 in @xmath272 , because @xmath272 belongs to the @xmath9th disc domain of @xmath168 .",
    "thus every vertex of @xmath268 lies inside @xmath269 for some vertex @xmath131 of @xmath191 .",
    "conversely , let us prove , that each set @xmath269 contains at least one vertex of @xmath268 .",
    "suppose @xmath131 is a @xmath67-tuple zero of @xmath31 at a regular point of @xmath26 .",
    "then we consider a circle surrounding @xmath131 and lying inside @xmath261 .",
    "as we go around this circle , the horizontal trajectories of @xmath31 make @xmath273 half - turns with respect to the tangent line to the circle .",
    "therefore the same is true for the horizontal trajectories of @xmath168 , for @xmath138 big enough .",
    "thus @xmath269 contains one or several zeroes of @xmath168 whose sum of multiplicities equals @xmath67 .",
    "suppose @xmath261 contains at least one node of @xmath26 .",
    "if @xmath269 also contains a node of @xmath137 there is nothing to prove , because this node is necessarily a vertex of @xmath268 .",
    "suppose that @xmath269 does not contain nodes .",
    "then it is a smooth riemann surface with holes .",
    "we must prove that @xmath168 has at least one zero on this surface .",
    "first of all , if we are given a quadratic differential without poles on a riemann surface @xmath274 of genus @xmath3 with @xmath41 holes , the number of its zeroes ( taking their multiplicities into account ) equals @xmath275 where @xmath276 is the total number of turns that the horizontal trajectories make with respect to the tangent lines to the boundary circles .",
    "recall that @xmath261 contains several unmarked components of @xmath26 and several small discs surrounding nodes of marked components .",
    "as above , we draw a circle inside each such small disc , surrounding the corresponding node .",
    "if the node is a vertex of degree @xmath67 , then , as we go around the circle , the horizontal trajectories make @xmath273 half - turns with respect to the tangent lines to the circle .",
    "therefore the same is true for @xmath277 , for @xmath138 big enough . since @xmath269 has either a positive genus or at least two holes , and since the number of turns is always negative , @xmath168 has at least one zero in @xmath269 .",
    "an injection from the set of edges of @xmath191 to the set of edges of @xmath268 .",
    "*    let @xmath75 be an edge of @xmath191 .",
    "we will assign to @xmath75 an edge of @xmath268 .",
    "later we will see that one obtains @xmath191 by contracting the edges of @xmath268 that are not assigned to any edge of @xmath191 .",
    "a vertical trajectory of a strebel differential usually joins two marked points ( that can happen to be the same ) and crosses exactly one nonclosed horizontal trajectory .",
    "( the exceptions are those vertical trajectories that join a marked point to a zero of the differential or to a node of the curve . )",
    "two vertical trajectories intersect the same nonclosed horizontal trajectory if and only if they join the same pair of marked points and , moreover , bound a region in the stable curve , that does not contain zeroes of poles of the strebel differential , nor nodes of the curve .    consider the vertical trajectory @xmath177 of @xmath31 through any point @xmath278 . by the choice of @xmath265 , we know that @xmath177 does not end at a vertex of @xmath191",
    ". therefore it joins some marked points @xmath50 and @xmath279 ( it can happen that @xmath280 )",
    ". denote by @xmath179 the vertical trajectory of @xmath168 through @xmath180 .",
    "for @xmath138 big enough , @xmath281 follows @xmath177 closely enough to enter the neighborhoods @xmath271 and @xmath282 .",
    "therefore it necessarily joins @xmath50 and @xmath279 , just as @xmath177 does ( because @xmath272 and @xmath283 lie inside the corresponding disc domains ) . according to the above remark , the vertical trajectory @xmath179 crosses exactly one nonclosed horizontal trajectory of @xmath168 , in other words , exactly one edge of @xmath268 .",
    "we denote this edge by @xmath284 and assign it to the edge @xmath75 of @xmath191 .    for @xmath138 big enough , the resulting edge does not depend on the choice of @xmath278 .",
    "indeed , two vertical trajectories of @xmath168 through two points of @xmath285 bound a region in @xmath137 , that does not contain zeroes or poles of @xmath168 or nodes of @xmath137 .",
    "therefore these two vertical trajectories cross the same edge of @xmath268 .",
    "let us prove that @xmath286 is an injection . consider two vertical trajectories of @xmath179 through @xmath287 and @xmath288 through @xmath289 , where @xmath75 and @xmath290 are two different edges .",
    "let us prove that they can not intersect the same edge of @xmath268 .",
    "if they cross the same edge of @xmath268 , it means that they join the same pair of marked points and , moreover , bound a region in @xmath137 , that does not contain zeroes or poles of @xmath168 or nodes of @xmath137 .",
    "it is easy to see that , if @xmath179 and @xmath288 join the same pair of marked points and bound a region in @xmath137 , then this region contains at least one set @xmath269 for some vertex @xmath131 of @xmath191 .",
    "but , according to * 4 * , this set contains at least one vertex of @xmath268 .",
    "thus @xmath179 and @xmath288 correspond to different edges of @xmath268 .",
    "this proves the injectivity of the map @xmath286 .    each edge @xmath284",
    "lies entirely inside @xmath291 , where @xmath131 and @xmath264 are the vertices of @xmath75 .",
    "indeed , @xmath284 is entirely contained inside the union of sets @xmath292 and @xmath293 over all edges and vertices of @xmath191 , because the complement of this union is covered by disc domains of @xmath168 .",
    "on the other hand , @xmath284 does not meet @xmath294 for any edge @xmath295 , because otherwise it would cross a vertical trajectory of @xmath168 that is should not cross .",
    "thus @xmath284 is contained in @xmath291 , because only @xmath269 and @xmath296 have common points with @xmath285 .",
    "for the same reason , an edge of @xmath268 that does not correspond to an edge of @xmath191 lies entirely in @xmath269 for some vertex @xmath131 .    *",
    "the difference of lengths between an edge @xmath75 of @xmath191 and the corresponding edge @xmath284 of @xmath268 is less than @xmath297 .",
    "the other edges of @xmath268 are shorter than @xmath297 . *    at present , we have proved the following .",
    "to each edge @xmath75 of @xmath191 joining to vertices @xmath131 and @xmath264 we can assign an edge @xmath284 of @xmath268 joining some points inside @xmath269 and @xmath296 .",
    "the image of @xmath284 under @xmath183 is contained inside the union of @xmath265 , @xmath261 , and @xmath263 .",
    "an edge of @xmath268 that does not correspond to an edge of @xmath191 lies inside @xmath269 for some vertex @xmath131 .",
    "all this , of course , is only true starting from some @xmath138 .",
    "consider an edge @xmath75 and let @xmath298 be its length .",
    "if we choose the disc neighborhoods @xmath261 of the vertices small enough , the length of the part of @xmath75 that lies outside the neighborhoods @xmath261 is greater than @xmath299 . consider the line @xmath300 , more precisely , its part lying in @xmath265 . by choosing @xmath265",
    "small enough and @xmath138 big enough , we see that the the length of @xmath301 measured with the differential @xmath143 differs from the length of @xmath302 measured with @xmath31 by less than @xmath297 .",
    "thus the length of @xmath284 is greater than @xmath303 .",
    "but the total sum of lengths of the edges of @xmath268 is fixed : it is equal to the sum of the perimeters @xmath304 , which is arbitrarily close to @xmath305 .",
    "therefore , for @xmath138 big enough , the length of each edge @xmath284 is arbitrarily close to that of @xmath75 , while the lengths of the edges of @xmath268 that do not correspond to edges of @xmath191 are arbitrarily small .    *",
    ". the genus defect function . *    the genus defect assigned to a vertex @xmath131 of @xmath191 is equal to the arithmetic genus of the open set @xmath261 , which is actually a singular noncompact complex curve . using proposition  [ prop : contraction ] , it is easy to see that this genus defect is indeed obtained by contracting the edges of @xmath268 that lie in @xmath269 .    *",
    "conclusion . *    thus , for @xmath138 big enough , the stable ribbon graph @xmath191 is obtained from @xmath268 by contracting some edges of length less than @xmath297 and by changing the lengths of the other edges by less than @xmath297 .",
    "this means that the graph @xmath268 lies in an @xmath297-neighborhood of @xmath191 in the cell complex @xmath12 . since",
    "@xmath297 can be chosen arbitrarily small , the sequence @xmath268 tends to @xmath191 in @xmath12 .",
    "this section is a very brief review of looijenga s paper  @xcite .",
    "we follow , as closely as possible , the notation introduced there .",
    "looijenga s main result is the continuity of a map similar to the map @xmath248 in our theorem  [ thm : homeomorphism ] . in other words",
    ", he proves that when one changes continuously the stable ribbon graph with edge lengths , the corresponding riemann surface glued from strips also changes continuously .",
    "the main problem is that if we consider a sequence of ordinary ribbon graphs @xmath268 converging in @xmath12 , the corresponding sequence of smooth curves does not necessarily converge in the deligne - mumford compactification @xmath1 , but only in the quotient @xmath10 .",
    "however , there is no simple criterion of convergence in @xmath10 . to solve this problem",
    ", looijenga constructs a more complicated cell complex , that turns out to be homeomorphic to @xmath82 .",
    "this is done roughly as follows . consider a stable ribbon graph @xmath191 and normalize its edge lengths ( by multiplying them by a constant ) so that their sum equals @xmath84 .",
    "choose a subset @xmath306 of the set of edges @xmath192 , and suppose the lengths of the edges of @xmath306 tend to @xmath37 . instead of forgetting everything about the lengths of the edges of @xmath306 ( as we do when we contract them to obtain a new stable ribbon graph ) , we normalize their lengths anew , so that their sum equals @xmath84 . among the edges of",
    "@xmath306 their can now be a new subset of edges @xmath307 whose lengths still tend to @xmath37 .",
    "we normalize them once again , so that their sum equals @xmath84 .",
    "and so on . using all this information",
    ", we can construct a cell complex with a projection onto @xmath12 , and such that a converging sequence in this complex induces a converging sequence of stable curves .",
    "looijenga s construction is a little more general than what is needed for kontsevich s proof , because he allows the perimeters @xmath25 to vanish ( but under the above normalization their sum remains equal to @xmath21 , so at least one perimeter must remain positive ) and studies what happens to strebel differentials and stable ribbon graphs in that case",
    ". therefore his definitions of stable graphs and of the minimal reasonable compactification are slightly different from ours .",
    "suppose the set of marked points @xmath308 is divided into two disjoint parts : @xmath309 , @xmath310 .",
    "here @xmath99 is the set of points such that the corresponding perimeters vanish , while @xmath311 is the set of points such that the corresponding perimeters do not vanish .",
    "[ [ stable - ribbon - graphs . ] ] stable ribbon graphs .",
    "+ + + + + + + + + + + + + + + + + + + + +    the natural modification of the notion of strebel differentials to this case is to consider the strebel differentials on our surface punctured at the points of the set @xmath99 ( and with double poles with given residues at the points of @xmath311 ) .",
    "it is easy to see that if one puts the points of @xmath99 back into the surface , the strebel differential will have at most simple poles at these points",
    ". therefore they will be vertices of the graph of nonclosed horizontal trajectories .",
    "thus the new stable graphs , instead of having @xmath2 numbered faces , have @xmath2 numbered faces or vertices .",
    "we do not give the precise definition of a stable ribbon graph in this setting ; it is a formalization of the properties of the graph of nonclosed horizontal trajectories of a strebel differential .",
    "[ [ minimal - reasonable - compactifications . ] ] minimal reasonable compactifications .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    in our definition of the minimal reasonable compactification , two points @xmath223 are identified if the stable curves @xmath8 and @xmath153 give the same curve when one contracts each of their components that do not contain marked points .",
    "analogously , @xmath312 is the quotient of @xmath1 in which two points @xmath223 are identified if the stable curves @xmath8 and @xmath153 give the same curve when one contracts each of their components that do not contain the marked points _ of the set @xmath311_.    [ [ teichmller - spaces . ] ] teichmller spaces",
    ". + + + + + + + + + + + + + + + + + + +    looijenga works with teichmller spaces rather than moduli spaces .",
    "the advantage of this approach is that the spaces considered are not orbifolds , but usual topological space .",
    "however one has to work with non locally compact topological spaces .",
    "let @xmath313 be the teichmller space of riemann surfaces of genus @xmath3 with @xmath2 marked points .",
    "its quotient by the action of the mapping class group @xmath314 is the moduli space @xmath5 .",
    "looijenga uses an augmented teichmller space @xmath315 constructed by harvey  @xcite .",
    "the space @xmath315 is endowed with a proper action of the mapping class group @xmath314 and there is a natural @xmath314-invariant surjective projection from @xmath315 onto the deligne - mumford compactification @xmath1 .    the space @xmath315 is constructed as follows .",
    "let @xmath26 be a smooth genus @xmath3 riemann surface with @xmath2 punctures .",
    "we can choose @xmath316 simple loops in @xmath26 in such a way that they cut @xmath26 into @xmath317 `` pants '' ( @xmath61-holed spheres ) .",
    "in the free homotopy class of each loop we can choose the shortest geodesic with respect to the unique complete metric of curvature @xmath155 on @xmath26 , compatible with the conformal structure .",
    "to each geodesic we can assign its length @xmath318 and the angle @xmath319 , with respect to some chosen gluing , at which the two pants adjacent to it are glued to each other .",
    "these lengths and angles are called the _ fenchel - nielsen coordinates _ in the teichmller space .",
    "it is well - known that they determine a real analytic diffeomorphism of the teichmller space onto the open octant @xmath320 ( see , for example ,  @xcite ) .",
    "now we simply add to the octant the boundary hyperplanes and endow the obtained closed octant with the usual topology .",
    "this corresponds to pinching the geodesics , but retaining the angles at which the adjacent pants were glued to each other .",
    "this operation can be carried out for all possible choices of @xmath316 geodesics and the points we adjoin to the teichmller space add up into the augmented teichmller space @xmath315 . for a smooth surface @xmath274 with @xmath2 marked points",
    "we define a _ stable complex structure _ to be a complex structure @xmath133 defined on @xmath321 , where @xmath322 is a finite set of simple loops , such that pinching the loops we obtain a stable curve .",
    "then , as a set , @xmath315 can be identified with the set of all stable complex structures on a given smooth surface @xmath274 with @xmath2 marked points , up to diffeomorphisms homotopic to the identity , relatively to the marked points .",
    "looijenga uses the following criterion of convergence on @xmath315 .",
    "let @xmath136 be a sequence of complex structures on a smooth surface @xmath274 with @xmath2 marked points and let @xmath133 be a stable complex structure on @xmath321 . if @xmath136 converges to @xmath133 uniformly on every compact set @xmath323 , then the sequence of curves @xmath324 converges to @xmath325 in the space @xmath315 .",
    "starting from @xmath315 , one can construct the analog of minimal reasonable compactifications for teichmller spaces .",
    "indeed , there is a @xmath314-invariant map @xmath326 for any subset @xmath311 of the set of marked points .",
    "we denote by @xmath327 the space obtained from @xmath315 by contracting to one point each connected component of the preimage of each point under this map .",
    "this space is still endowed with an action of @xmath314 , although it is not proper any longer .",
    "[ [ the - simplicial - complex - of - stable - graphs . ] ] the simplicial complex of stable graphs .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath274 be a fixed surface with @xmath2 marked points .",
    "consider the following infinite simplicial complex @xmath328 .",
    "consider the set of homotopy classes ( relatively to the marked points ) of simple non - oriented arcs in @xmath274 joining two ( possibly coinciding ) marked points and avoiding the other marked points .",
    "the homotopy class is called trivial if the corresponding arc is contractible in @xmath274 punctured at the marked points .",
    "a vertex of @xmath328 is a nontrivial homotopy class as above .",
    "a set of homotopy classes forms a simplex if the homotopy classes can by realized by loops that do not intersect ( except at their endpoints ) .",
    "there is a natural action of the mapping class group @xmath314 on @xmath328 .",
    "the quotient of @xmath328 by this action is a finite orbifold simplicial complex .",
    "one can prove that the quotient complex @xmath329 is isomorphic to the complex @xmath12 defined by stable ribbon graphs .",
    "( if a stable graph is a just a ribbon graph with @xmath2 numbered faces and with degrees of vertices @xmath54 , then the corresponding set of arcs is obtained by considering the dual graph : joining by arcs the centers of adjacent faces .",
    "when we contract an edge in the stable ribbon graph we must erase the corresponding arc . )    thus there are two equivalent ways of defining the same simplicial complex @xmath12 .",
    "the definition with isotopy classes of arcs is certainly more elegant , but stable ribbon graphs are needed anyway to make the connection with strebel differentials .",
    "[ [ a - quotient - of - t_gn - times - mbox - simplex . ] ] a quotient of @xmath330 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    finally , let @xmath331 be the standard @xmath2-simplex .",
    "we consider the topological space @xmath332 obtained from @xmath333 by the following factorization .",
    "consider a point @xmath145 in @xmath331 and let @xmath311 be the set of its nonzero coordinates ( a subset of @xmath334 ) .",
    "then the `` layer '' @xmath335 is factorized so as to obtain @xmath336 .",
    "@xcite [ thm : looijenga ] there is a natural bijective continuous map from the complex @xmath328 to @xmath332 .",
    "it is @xmath314-invariant and commutes with the projections of both spaces on the simplex @xmath331 .",
    "the above mapping is not a homeomorphism , but if we quotient both spaces by the action of @xmath314 it becomes a homeomorphism , because a continuous bijection between two compact topological spaces is necessarily a homeomorphism .",
    "if , in both spaces , we take the preimage of the interior of the simplex @xmath331 we immediately obtain theorem  [ thm : homeomorphism ] .    looijenga proves theorem  [ thm : looijenga ] by constructing an explicit trivialization of families of riemann surfaces as a ribbon graph tends to a stable ribbon graph and using the convergence criterion that we formulated in the paragraph on teichmller spaces .",
    "here we recall kontsevich s expression for the first chern classes @xmath228 .",
    "theorem  [ thm : homeomorphism ] allows us to work on the cell complex @xmath12 .",
    "kontsevich s expressions are cellwise smooth continuous differential forms , and we explain the framework in which such forms can be used .",
    "once we have found a homeomorphism @xmath71 between @xmath11 and the cell complex @xmath12 , we will no longer use the smooth structure of @xmath10 ( defined outside the singularities ) .",
    "instead , we use the natural piecewise smooth structure of the cell complex @xmath12 .",
    "the relation between the two is rather delicate and we wo nt discuss it here .",
    "( we remind the reader how to define the first chern class of a topological oriented circle bundle over any topological space @xmath229 homotopically equivalent to a cell complex .",
    "there exists a continuous map @xmath29 from @xmath229 to the infinite projective space @xmath337 such that the circle bundle over @xmath229 is isomorphic to the pull - back under @xmath29 of the canonical circle bundle over @xmath337 .",
    "the first chern class of the bundle is the pull - back under @xmath29 of the natural @xmath21-cohomology class of @xmath337 .",
    "it is an element of @xmath338 . )",
    "consider one of the polygonal bundles @xmath339 .",
    "kontsevich constructs an explicit @xmath84-form @xmath177 on each cell of the total space of @xmath340 , claiming that @xmath341 represents the first chern class of the line bundle @xmath6 over @xmath82 ( see  @xcite , lemma  2.1 ) .",
    "the @xmath84-form in question is the following .",
    "let @xmath45 be the perimeter of the polygon @xmath342 , @xmath67 its number of vertices , and @xmath343 the distances from the distinguished point of the polygon to its vertices ( as we go around the polygon counterclockwise ) .",
    "moreover , denote by @xmath344 , @xmath345 , the length of the edge that follows the @xmath9th vertex",
    ". then we have @xmath346      here we introduce a framework for working with cellwise smooth differential forms on cell complexes .",
    "it has appeared , for example , in sullivan s work  @xcite , but we give a complete exposition here , adapted to our needs .",
    "the results of this section can be considered as a far - reaching generalization of the fact that the newton - leibniz formula @xmath347 holds not only for differentiable functions @xmath29 , but also for continuous piecewise differentiable ones .",
    "a _ polytope _ in a real vector space is an intersection of a finite number of open or closed half - spaces such that its interior is non - empty .",
    "replacing , in the above intersection , some of the closed half - spaces by their boundary hyperplanes , we obtain a _ face _ of the polytope .",
    "a _ polytopal complex _ is a finite set @xmath229 of polytopes in real vector spaces , together with gluing functions satisfying the following conditions .",
    "( i )  each gluing function is an affine map that identifies a polytope @xmath348 with a face of another polytope @xmath349 .",
    "( for brevity , we will say that @xmath350 is a face of @xmath351 . )",
    "( ii )  if @xmath350 is a face of @xmath351 , which is a face of @xmath352 , then @xmath350 is a face of @xmath352 , and the corresponding gluing functions form a commutative diagram .",
    "( iii )  if @xmath348 is identified with a face of @xmath349 , no other polytope @xmath353 can be identified with the same face of @xmath351 .",
    "now we define differential forms on polytopal complexes .",
    "a differential form on a polytope is simply a differential form with smooth coefficients defined in some neighborhood of the polytope in the ambient vector space .",
    "[ def : forms ] a _ differential @xmath67-form _ on a polytopal complex is a set of differential @xmath67-forms defined on all the polytopes such that restricting the @xmath67-form to a face of a polytope coincides with the @xmath67-form on the face .    consider two squares lying in the half - planes @xmath354 and @xmath355 and having a common side on the @xmath356 axis .",
    "they form a polytopal complex .",
    "a differential @xmath84-form on this complex can be given , for example , by @xmath357 in the right - hand square , @xmath358 in the left - hand square , and @xmath359 on their common edge .",
    "moreover , we could have added to our complex a third square ( or another polygon ) such that the three of them would share a common edge .",
    "the @xmath84-form can then be extended to this new polygon .",
    "the de rham complex can be considered as a complex of sheaves on the polytopal complex @xmath229 .",
    "it suffices to prove that it is a flasque resolution of the constant sheaf @xmath362 on @xmath229 . in other words",
    ", we must prove that locally each closed differential form is exact ( except for the constant functions considered as @xmath37-forms ) .",
    "consider a point @xmath363 and a closed @xmath67-form @xmath177 defined in a sufficiently small neighborhood @xmath146 of @xmath145 .",
    "we will construct a @xmath364-form @xmath365 in @xmath146 , such that @xmath366 .",
    "the value of @xmath365 on @xmath367 vectors tangent to one of the polytopes is obtained by the following standard procedure .",
    "we construct on the @xmath367 vectors a small parallelepiped @xmath368 that fits entirely into the polytope .",
    "then we consider the cone with vertex @xmath145 and with base @xmath368 .",
    "the integral of @xmath365 over @xmath368 is , by definition , equal to the integral of @xmath177 over the cone . by letting the sides of @xmath368 tend to @xmath37 we find the value of @xmath365 on the @xmath367 vectors .",
    "it is obvious that @xmath365 is a @xmath364-form on the polytopal complex in the neighborhood of @xmath145 ( in the sense of definition  [ def : forms ] ) .",
    "it is easy to check that if @xmath369 , then @xmath366 .",
    "@xmath67-piece _ in a polytopal complex @xmath229 is an affine map from a compact @xmath67-dimensional polytope to a polytope of @xmath229 .",
    "@xmath67-chain _ in a polytopal complex @xmath229 is a finite linear combination @xmath26 of @xmath67-pieces with real coefficients .",
    "the _ boundary _ of a chain and the integral of a @xmath67-form over a @xmath67-chain are defined in the obvious way .",
    "the formula is obvious if @xmath26 is composed of a unique @xmath67-piece , because in that case the piece is contained in a unique polytope of @xmath229 . in the general case",
    "the formula is obtained by summing over the pieces of @xmath26 .",
    "recall the usual definition of the product in the space of cohomologies ( see  @xcite , chapter xiii ) .",
    "let @xmath229 be a polytopal complex and consider the polytopal complex @xmath371 with the two projections , @xmath372 and @xmath373 , on @xmath229 .",
    "for @xmath374 one defines @xmath375 by the formula @xmath376 where @xmath40 and @xmath377 are two cycles in @xmath229 .",
    "the product cycles @xmath378 span the whole homology group of @xmath371 , therefore the above formula defines the class @xmath379 unambiguously .",
    "it is clear that if differential forms @xmath177 and @xmath365 on @xmath229 represent the classes @xmath81 and @xmath131 , then the form @xmath380 represents the class @xmath379 .",
    "now , the product @xmath381 is defined by taking the restriction of @xmath379 to the diagonal of @xmath371 .",
    "thus it is represented by @xmath382 .",
    "a _ morphism _ of polytopal complexes @xmath383 is a set @xmath240 of affine maps @xmath384 , where @xmath350 is a polytope of @xmath385 and @xmath351 a polytope of @xmath386 .",
    "this set must satisfy the following natural conditions .",
    "at least one map should be defined on every polytope of @xmath385 . for",
    "every map @xmath387 its restrictions to the faces of @xmath350 must belong to @xmath240 .",
    "if the image of @xmath350 under @xmath29 belongs to a face of @xmath351 , the map from @xmath350 to this face should also belong to @xmath240 .",
    "if a point of @xmath350 has two different images under maps of @xmath240 , these images should be identified by gluing functions of the complex @xmath386 .",
    "let @xmath388 be a morphism of polytopal complexes such that the preimage of each point of @xmath389 is homeomorphic to a circle .",
    "( each such circle is naturally subdivided into @xmath37-cells and @xmath84-cells , and we do not require that these subdivisions be the same for different fibers . ) suppose that the circle bundle thus obtained is oriented .",
    "let @xmath177 be a @xmath84-form on the polytopal complex @xmath229 such that its integral over each fiber of @xmath240 equals @xmath84 and such that @xmath390 is a pull - back under @xmath240 of a @xmath21-form @xmath391 on @xmath389 .",
    "the stokes formula allows one to prove that @xmath391 represents the first chern class of the bundle .",
    "more precisely :    [ prop : chern ] if @xmath274 is a polytopal complex homeomorphic to a compact @xmath21-dimensional manifold without boundary , and @xmath392 a morphism of complexes , then @xmath393 is equal to the first chern class of the pull - back to @xmath274 of the circle bundle over @xmath389 .",
    "we can assume that @xmath274 is connected .",
    "denote by @xmath394 the pull - back to @xmath274 of the bundle @xmath229 .",
    "denote by @xmath40 the corresponding first chern class .",
    "one can easily construct a section of @xmath394 over the surface @xmath274 punctured at one point . over the punctured point the section will wind @xmath40 times around the fiber . such a section is a sub - complex of @xmath394 , homeomorphic to a @xmath21-dimensional surface with boundary .",
    "the integral of @xmath177 over the boundary equals @xmath40 .",
    "thus , according to the stokes formula , the integral of @xmath390 over the whole section also equals @xmath40 .",
    "but the integral of @xmath390 over the section equals the integral of @xmath391 over @xmath274 .",
    "the complex @xmath12 of stable ribbon graphs and the total space of the polygonal bundle @xmath340 are obviously polytopal complexes .",
    "the projection @xmath395 is a morphism of complexes as in proposition  [ prop : chern ] .",
    "( i )  as we go around the fiber , the distinguished point goes around the polygon @xmath342 counterclockwise .",
    "the coefficients @xmath396 remain constant , while each @xmath397 decreases from its initial value to @xmath37 and then from @xmath45 back to its initial value .",
    "thus the integral over the fiber of each @xmath398 equals @xmath155 and the sum of the coefficients @xmath396 equals @xmath84 .",
    "( ii )  a simple calculation gives @xmath399 on each cell .",
    "this @xmath21-form depends only on the lengths @xmath344 but not on the @xmath397s .",
    "therefore it is a lifting of a @xmath21-from from the base @xmath12 .",
    "thus @xmath391 is a @xmath21-form on the polytopal complex @xmath12 that represents minus the first chern class of the bundle @xmath340 . to calculate the intersection numbers of these chern classes one can multiply the @xmath21-forms @xmath391 and integrate them over the cells of highest dimension .               the arnoldfest : proceedings of the conference in honour of v.  i.  arnold for his 60th birthday , toronto 1997 , e.  bierstone , b.  khesin , a.  khovanskii , j.  e.  marsden , editors , american mathematical society , providence , ri 1999 , 209223 ."
  ],
  "abstract_text": [
    "<S> we define strebel differentials for stable complex curves , prove the existence and uniqueness theorem that generalizes strebel s theorem for smooth curves , prove that strebel differentials form a continuous family over the moduli space of stable curves , and show how this construction can be applied to clarify a delicate point in kontsevich s proof of witten s conjecture . </S>"
  ]
}