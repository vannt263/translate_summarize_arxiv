{
  "article_text": [
    "kmos@xcite is a fully cryogenic seeing limited multi - object integral field spectrometer , which is being built by a consortium of german and british institutes as one of the second generation vlt instruments .",
    "it is equipped with 24 integral field units , each with a 2.8@xmath02.8  field of view , that can be deployed on - the - fly using robotic arms anywhere within a 7  patrol field . the number and size of the ifus , and the spectral resolution ,",
    "have been chosen according to the key science driver , to study the morphology and kinematics of emission lines in high redshift galaxies .",
    "each of the 3 identical segments in the instrument comprises 8 pick - off arms ( including k - mirrors to keep the fields oriented correctly on sky ) , filter wheels , the integral field unit ( that uses mirrors to slice the image and re - arrange it along a pseudo - slit ) , and a spectrograph with a 2k@xmath02k hawaii-2rg detector .",
    "a number of gratings are available , allowing observations across various bands from 0.82.5  at a resolution of @xmath1 in order to enable science observations to probe between the bright atmospheric oh lines .",
    "an additional grating enables observation of the h and k bands simultaneously at a lower resolution .",
    "since the pixel scale is nominally 0.2 , a single exposure with kmos generates 336 slit spectra , each about 2000 pixels in the spectral direction and 14 pixels wide spatially .",
    "each slit spectrum is separated from its neighbours with a gap of a few blank pixels .",
    "although there are a large number of spectra , the absolute data volume is not excessive : in a typical night the instrument will produce only @xmath25gbyte of raw data ( although it could be up to @xmath250gbyte in the extreme case of short exposures ) .",
    "the pipeline modules ( recipes ) are written in c using the eso common pipeline library .",
    "they can be executed using the standard eso pipeline tools , either in the command line with _ esorex _ or with the _ gasgano _ gui .",
    "kmos is currently in its manufacturing phase , and has already had its technical first light@xcite . the preliminary acceptance in europe and first light on sky at the vlt in chile are both expected during 2011 .",
    "further details on specific aspects of the instrument , including hardware , software , control , and testing , can be found elsewhere in these proceedings .",
    "kmos itself is opto - mechanically a very complex instrument that slices images from 24 deployable pick - off arms in order to perform integral field spectroscopy ( also known as hyperspectral imaging ) .",
    "however , from an observer s perspective , configuring and using the instrument is rather straightforward . unlike many other integral field spectrometers",
    ", there is no choice of pixel scale . neither is it necessary to adjust the centre of the spectral bandpass , or optimise the slit width against resolution as can be the case for longslit spectrometers . and",
    "in contrast to most ` workhorse ' instruments , there are no additional options such as imaging or polarimetry . the only complex operation , allocating the 24 arms to specific science targets in the patrol field , is greatly assisted by an automated tool karma@xcite that optimizes the assignment taking into account optical and mechanical constraints , as well as target priorities .",
    "this simplicity in terms of configuration has a direct impact on the data processing , since each set of frames can be processed in essentially the same way . however , there are more subtle features , related to the observing modes@xcite , that need to be considered",
    ".    one of the observing modes that is expected to be used frequently is ` nod to sky ' . here",
    ", 24 targets are observed in every pair of pointings , with most of the arms on targets at the first position , and the remainder on targets during the second exposure after a nod . in this case , the sky background is removed simply by subtracting alternate exposures for each arm . but",
    "this means it is not always possible to classify an entire exposure as ` sky ' or ` object ' since some arms may be on sky and others on targets .",
    "consequently , classifications are made separately for each arm and the data for each ifu are processed independently .    with the ` stare ' mode ,",
    "the arms are on the same science target for multiple sequential exposures . for this mode ,",
    "the observer has the option of occasionally observing a sky pointing  in which case that can be used to remove the background . alternatively ,",
    "if the target is compact enough that it can be dithered within the ifu s field of view , the background can be recovered from sky pixels around the science target .",
    "another option , potentially one of the most efficient and effective uses of the ` stare ' mode , would be to have a single dedicated sky arm , so that the other 23 could always be on targets .",
    "ideally , one would subtract this sky exposure from all the other arms  with the advantage that it has monitored the background ( particularly the highly variable atmospheric oh lines ) _ during _ the science exposure and so provides the best background measurement .",
    "however , there are two issues that mean this method can only be applied in a rather restricted sense : ( i ) the effect of spatial and spectral curvature means that one must match corresponding arms in each segment ( e.g. arms 1 , 9 , and 17 ) , since only then do the detailed spectral profiles of the oh lines match exactly ; ( ii ) the ifus have differing orientations on sky so that , for example , the data for ifu9 would need to be rotated by 180@xmath3 , and that for ifu17 flipped , before they can subtracted from ifu1 .",
    "the third mode is ` mapping ' in which the arms are positioned as closely as possible and , with a sequence of 9 or 16 pointings , are used to map a large ( arcmin scale ) contiguous field .",
    "this imposes a requirement that the data processing software be able to handle a large number of cubes : 24 ifus and several exposures at each of 16 pointings leads to in excess of 1000 data cubes that must eventually be combined .",
    "various calibrations are required to process kmos data . the way in which they are associated , the input data required , and the output produced ,",
    "are summarised in fig .",
    "[ fig : cascade ] . the specific recipes or modules in this calibration cascade are described below . in order to make sure that the various calculations and fits performed are robust",
    ", we employ a routine that flags and rejects deviant values very efficiently , even when there are only 45 values in a sample .",
    "the key aspect is to begin with an estimate of the standard deviation based on a percentile clipping , and then improve on this with a few iterations .",
    "calibration cascade showing how the various calibration recipes are associated , what input data they require ( both from the instrument and externally ) , and what calibrations they produce .",
    ", height=207 ]      _ kmo_dark _ combines several raw dark frames , and in the process makes a first pass at identifying bad pixels .",
    "if the exposure time is very short , it also yields the read noise . and",
    "for very long exposures it provides a measure of the dark current .    _",
    "kmo_flat _ has two functions .",
    "the first is to combine several ` lamp on ' and ` lamp off ' frames to make a flatfield , in the process identifying additional bad pixels . for kmos",
    ", a bad pixel is defined as one that should be ignored ( for any reason ) during the cube reconstruction . as such",
    ", it also includes pixels that are simply not illuminated .",
    "the second function is to trace the edges of each slitlet in each ifu , and hence map the spatial curvature .",
    "this is a key process , and is implemented in a robust way with no prior assumptions about the location of the slitlet edges . as such , it works even if several ifus are out of action .",
    "the routine creates a pair of calibration frames called xcal ( see fig .",
    "[ fig : xcal ] ) and ycal in which the value of pixel denotes its spatial location with respect to the centre of its ifu along the right ascension and declination axes respectively .",
    "each pixel is also tagged with the identification of the ifu to which it belongs .    _",
    "kmo_wave_cal _ calculates the wavelength of each pixel , treating each slitlet completely independently .",
    "the initial identification of arc lines within a slitlet is done by comparing every possible pair of line separations with those from a linelist . with only the approximate scaling as a prior assumption ,",
    "this is a robust method that yields an unambiguous match between the data and line list .",
    "from this point , the lines are traced across each slitlet and hence the wavelength at every pixel can be interpolated .",
    "these are written into a frame called lcal .    _",
    "kmo_illuminate _ is a spatial sky flat .",
    "it measures variations in the illumination across the field of each ifu in order to correct for vignetting , either at the edge of the patrol field or if an arm is in the shadow of another .    _",
    "kmo_std_star _ is a standard recipe that both derives the atmospheric and instrument transmission as a function of wavelength , and also calculates the scaling factor for flux calibration .",
    "the crucial issue here is to remove the spectral features .",
    "this is assisted by temporarily dividing out a model atmosphere .",
    "one then divides out a solar spectrum that has been convolved to the same resolution ( or , for ab stars observed in the k - band , interpolate across br@xmath4 ) .",
    "afterwards , the model atmosphere is multiplied back in .",
    "a look - up table enables the code to estimate the stellar temperature and remove the intrinsic spectral slope .     the calibration frames for xcal in which the value of each pixel indicates the spatial distance along the x - axis ( right ascension ) of the ifu .",
    "the numbers along the top indicate to which ifu each section of data belongs .",
    "each ifu is arranged in 14 separate 2d slit spectra . for the first two detectors",
    "the ifus are oriented vertically on sky ; so each slitlet has a single value and values increase / decrease between slitlets ( left inset ) .",
    "the 3rd detector appears different because the orientation of the ifus is 90@xmath3 offset and so values increase across each slitlet ( right inset ) .",
    ", width=566 ]      monitoring the consistency and trends in the quality control ( qc ) parameters provides information about the status and health of the instrument .",
    "these parameters show that the instrument is functioning correctly and that data can be calibrated properly ( but do not necessarily reflect the quality of the data itself ) . rather than list them all explicitly ,",
    "a summary of the main classes , the recipe that generates them , and their purpose is given :    [ cols= \" < , < , < \" , ]",
    "generating fully reduced cubes from the raw kmos data is an intricate processes that has to fulfil a number of roles . for kmos",
    ", the software has been designed using the experience gained at mpe over more than a decade from both 3d@xcite and sinfoni@xcite .",
    "it incorporates the perspective of astronomers as well as programmers .",
    "the detailed processing steps may vary considerably between different observations , depending on the targets and the science that is being addressed .",
    "the software must be flexible enough to provide a high quality reduction for all possible science cases without overwhelming the astronomer with endless parameters .",
    "for kmos , this is achieved by making the pipeline modular . in practice",
    ", the pipeline can be run either in a monolithic way ( so that the appropriate modules are automatically executed sequentially ) or controlled on the command line , perhaps using a script . in the latter case , users can stop at any point , execute their own code , and then continue .",
    "a high fidelity ` science grade ' reduction may take some time to process .",
    "however , the pipeline must also provide rapid processing for the real - time display .",
    "this is achieved in several ways .",
    "unncessary steps can be omitted  for example flatfielding or telluric correction may not be needed to reconstruct an image of the target that is good enough for acquisition purposes .",
    "the speed of the reconstruction depends on the algorithm used .",
    "the fastest and simplest , ` nearest neighbour ' , is sufficient for acquisition .",
    "the most time consuming step is generating the neighbourhood map , which is the list of pixels on the detector that are closest to each pixel in the reconstructed cube ( see section  [ sec : recon ] ) . in the context here , re - using the neighbourhood map can make the reconstruction much faster , providing the 24 images for the real - time display within a few seconds .",
    "error propagation , to yield an estimate of the uncertainty in the final reduced cube , is performed in a fairly simple manner .",
    "an initial estimate of the error is made for each raw frame using the counts in each pixel , together with the known read noise and gain .",
    "this is then propagated in a standard way ( but ignoring cross terms when adding or multiplying frames ) . the same method can also be applied for most of the interpolation schemes outlined in section  [ sec : recon ] , in which the output value is just a weighted sum of input values .",
    "it is in the combining stage that the situation becomes more complex . here",
    ", systematics mean it is likely that combining the input noise estimates will underestimate the true noise . instead ,",
    "if there are enough values , one can derive a better estimate of the noise directly from their variance .",
    "this requires that each input value has the same weight , which is a reasonable assumption for near - infrared data taken with the same exposure times . estimating the noise for integrated spectra is also non - trivial , because of the correlations between pixels",
    "this has been analysed in some detail and it has been shown@xcite that the noise does not decrease as one might naively expect ; and that a scaling factor , which depends on the aperture size , must be applied .",
    "the data format itself is an additional complexity for the user , because of the need to handle , and associate in a single file , either data from 3 detectors or datacubes for 24 arms .",
    "for this reason , each kmos file can have multiple extensions , as illustrated in fig .",
    "[ fig : dataformat ] . for the detector",
    "based format ( e.g. raw data , dark frames , flatfields ) , there will be either three or six extensions depending on whether noise frames are included ; and each extension will have 2d data . for data products ( e.g. cubes , collapsed images , extracted spectra ) , there can be up to 48 extensions ; and the data in each extension can have 1 , 2 , or 3 dimensions .",
    "for this reason , there is a keyword in each extension that indicates what data is stored there .",
    "it also means that it is no longer straightforward for astronomers to work on the data without modifying their tools to deal with these data formats .",
    "overview of the kmos data format .",
    "a keyword extname in the extension indicates what data is there .",
    "example string values for this keyword are shown in the figure .",
    "far left : initially there are 3 raw frames based on the detector format ( i.e. 2k@xmath02k ) stored in 3 extensions .",
    "centre left : once the associated noise is calculated , the additional frames are interleaved to make 6 extensions .",
    "centre right : the reconstructed cubes ( or collapsed images or extracted spectra ) are each stored in a separate extension .",
    "far right : interleaving noise cubes yields up to 48 extensions . ,",
    "height=188 ]    simulations are a key aspect of testing the data processing . in order to make the recipes as robust as possible , we have tested them using two different sets of simulations . the first set aims to test the functionality using data that is representative of kmos .",
    "these data are generated directly in the 2d detector based format .",
    "as such , it is quick and easy to change anything , for example the curvature or dispersion .",
    "these simulations are useful for testing different scenarios , and for developing the recipes since the processing procedures can not rely on specific _ a priori _ knowledge about the data format .",
    "the second set of simulations aim to be much more realistic and quantitatively resemble kmos . generating them takes time since a 3d source is mapped onto the 2d detector using the known instrumental properties .",
    "these are important for testing the validity of the reconstruction .",
    "requiring that the pipeline recipes can process both sets of simulations leads to robustness and is a good indication that it will be able to deal with the real kmos data .",
    "flexure is a potential issue for kmos since the instrument itself rotates to maintain the field orientation , and so the gravity vector is constantly changing .",
    "the impact of flexure is simply to shift the location on the detector ( along both spectral and spatial axes ) at which data is recorded .",
    "preliminary estimates , based on models and end - to - end tests , indicate that within an individual frame , it should not be a problem . but across a long sequence of frames , in the worst case the shift may both be as much as about 0.5pixel . at this level , it must be corrected .",
    "fortunately , along both spectral and spatial axes flexure can be tracked using the oh emission lines .",
    "as we show below , both spatial and spectral flexure can be fully compensated using 2-pass processing without compromising the data quality .",
    "this is reflected in the workflow given in fig .",
    "[ fig : workflow2 ] .    uncorrected spectral flexure will result in poor background subtraction and also broadening of emission lines in the science target .",
    "it can be measured most easily in a reconstructed cube by comparing the wavelength of several spatially integrated oh lines to a reference . a method to do exactly this@xcite",
    "is frequently used on sinfoni data . with kmos",
    ", we have the advantage that the offset can be fed back into the calibration data and the cube reconstructed again , thus avoiding additional interpolations .",
    "uncorrected spatial flexure will result in a mismatch between the flatfield and the data ( i.e. some data will be lost ) , and also a shift of the target in the field of view .",
    "the former effect can be dealt with by taking flatfields when kmos is rotated to several different angles ( the number depending on the severity of the flexure ) .",
    "the software then needs to select the flatfield taken at the angle that best matches those of the science observations .",
    "this can therefore be fully compensated , although at the expense of longer daytime calibration requirements .",
    "the latter effect can be corrected in a similar way to the spectral flexure , by feeding the measured offset ( again most easily derived from a reconstructed cube ) into the calibration data and reconstructing the cube again .",
    "one possible workflow for the kmos pipeline .",
    "this is a standard workflow in which subtracting the sky is the first step , and in which each cube is reconstructed before they are shifted and aligned.,height=302 ]    the data processing pipeline is constructed from various modules ( recipes ) as illustrated in fig .",
    "[ fig : workflow1 ] .",
    "a user can either execute each recipe in turn , or use the pipeline recipe to execute them all automatically in sequence .",
    "the function of the main recipes used here are outlined below .",
    "each of these recipes works on all the extensions in the given data file .    _",
    "kmo_noise_map _ makes an initial estimate of the noise for raw frames from the counts , using the known read noise and gain .    _",
    "kmo_arithmetic _ performs simple mathematical operations on cubes using scalars , spectra , images , or other cubes ; and on images using either scalars or other images .",
    "the associated noise frames are propagated appropriately .    _",
    "kmo_reconstruct _ creates a 3d cube from its 2d data using the calibration files .",
    "the scheme and interpolation methods are described in section  [ sec : recon ] .    _",
    "kmo_shift _ performs sub - pixel shifts to align a set of cubes on the same wcs .",
    "noise is also propagated .    _",
    "kmo_combine _ combines cubes that are on the same wcs ( i.e. have only integer pixel shifts between them ) . as default ,",
    "only corresponding ifus are combined ; but for the ` mapping ' mode , all ifus are combined into a single product .",
    "one possible workflow for the kmos pipeline .",
    "this is an advanced workflow in which all the data are combined and reconstructed simultaneously in a single step , and the sky is subtracted afterwards in an optimal fashion ( i.e. minimising oh residuals ) . in the scheme shown here , the data are also corrected for spatial and spectral offsets / flexure , which are derived for each dataset after a temporary reconstruction step.,height=302 ]    in the second workflow shown in fig .",
    "[ fig : workflow2 ] there are some additional recipes which are based on those described above , which allow one to reconstruct a cube from multiple data sets , or to perform an optimal sky subtraction .",
    "in addition , there are a number of recipes and tools that are used only indirectly in the pipeline , but perform tasks that are frequently required .    _",
    "kmo_stats _ calculates a number of useful statistical measures .    _",
    "kmo_make_image _ collapses a cube spectrally to create an image .",
    "one can specify a global wavelength range , and also omit specific regions around bright oh lines .    _",
    "kmo_fit_profile _ fits various profile forms to a spectral or spatial ( 1d and 2d ) profile .",
    "this is useful for measuring the seeing , the spectral resolution , or aligning compact bright objects .    _",
    "kmo_extract_spec _ extracts an integrated spectrum , and can use different methods based on apertures or ( non - binary ) masks .    _ kmo_rotate _ rotates a cube , which can be useful if kmos was set at a non - zero rotator offset during observations .",
    "handling datacubes can be complex so we provide some extra more advanced tools that may be useful for an astronomer but are not used in the pipeline .",
    "these may require significant user interaction in order to optimise the parameters .    _",
    "kmo_cosmic _ is a 3d version of the very effective gradient method implemented in lacosmic@xcite to detect deviant pixels .    _",
    "kmo_voronoi _ is a spatial binning scheme based on voronoi tessellations that aims to achieve uniform signal - to - noise@xcite .",
    "this routine does not affect the spectral resolution .    _",
    "kmo_extract_pv _ creates a position - velocity diagram from the cube , as one would obtain from a 2d longslit spectrum .    _",
    "kmo_extract_moments _ derives the kinematics for an emission line using both moment calculations , and also by convolving the instrumental line profile with a gaussian ( so as to derive the intrinsic line properties ) .    _",
    "kom_fit_continuum _ allows the user to fit and subtract the continuum from each spectrum in a cube , in order to leave just the emission ( and absorption ) lines .",
    "interpolation is a crucial issue for integral field spectroscopy , since reconstructing 3d datacubes requires a significant amount of interpolation@xcite . in the classical approach",
    ", one needs to correct for bad pixels , straighten the spectral traces , linearise the dispersion , and finally align the slitlets ( or pixels ) . tuning the wavelength scale to correct for flexures between frames ( as described in section  [ sec : dataproc ] ) can introduce an additional interpolation step .",
    "poor management of the interpolation strategy or poor choice of the interpolation scheme can degrade the quality of the final data .",
    "for this reason , kmos makes use of an alternative perspective on the purpose of calibrations which allows one to view the data reconstruction in a different way . in principle",
    "this enables one to perform all the interpolation in a single step while at the same time permitting a far greater flexibility .",
    "this can be summarised as follows :    _ standard view _ :",
    "calibrations allow one to create the mathematical functions ( e.g. polynomials ) needed to correct the spectral and spatial curvature on the detector . with this perspective ( i ) bad pixels",
    "must be first corrected , ( ii ) the raw data itself sets the pixel scale of the calibrated product , and ( iii ) frames must be individually corrected first before they can be aligned and combined .",
    "_ alternative view _ : calibrations allow one to create look - up tables which associate each measured value on the detector with its spectral and spatial location in the final reconstructed data .",
    "this perspective means that ( i ) bad pixels are simply ignored because they do not appear in the look - up tables , ( ii ) one has the freedom to choose any spectral and spatial sampling in the processed product , and ( iii ) by including multiple frames in the loop - up table , one can combine and interpolate all the data simultaneously in one step .",
    "interpolation scheme illustrated in 2-dimensions .",
    "( a ) observed data are sampled regularly in the reference frame of the detector .",
    "( b ) this sampling is irregular in the reference frame of the reconstructed cube ; bad pixels can simply be omitted from the set of sampled points .",
    "( c ) one can freely specify the required gridding ( i.e. spatial / spectral pixel scale ) for the reconstructed data ; it is independent of the actual sampling .",
    "( d ) each required grid point is interpolated from sampled points which lie in its local neighbourhood .",
    "any suitable algorithm can be used for the interpolation . , height=226 ]    this alternative perspective , which is used for kmos , is outlined graphically in fig .  [",
    "fig : interp ] .",
    "the most important realisation is that in ` detector space ' there can be no concept of a wavelength or spatial axis .",
    "these concepts apply only to the final reconstructed cube .",
    "the detector is nothing more than the medium on which raw data values are recorded .",
    "the calibrations allow one to assign each measured value on the detector to a spatial / spectral location in the reconstructed cube .",
    "together , these locations provide an irregularly spaced sampling of that cube .",
    "the aim is thus to reduce the raw data and the calibrations to a list of values with their associated locations : @xmath5 data associated with bad pixels is simply excluded from the list and so does not contribute to the set of sampled locations .",
    "creation of this list is the first step .",
    "the second step is to specify the regular sampling ",
    "i.e. the spatial and spectral pixel size  that is required for the reconstructed cube .",
    "the third step is to interpolate each of these regularly gridded positions from sampled locations in the local neighbourhood . in a fourth step",
    ", one can determine any spectral ( or spatial ) offsets in the reconstructed cube and feed these back to create a new list with updated locations for each measured value .",
    "one can then re - interpolate the regular grid of points , leading to a final cube which has been reconstructed in a single interpolation and which has no offsets .",
    "it is possible to take this scheme further , by adding multiple frames to the look - up table that lists the data values and their associated locations . in doing so",
    ", one needs to include the spatial offsets between the frames , but this can be determined either from keywords in the frame headers or by measuring offsets directly from the temporarily reconstructed cubes of each individual frame . but",
    "ultimately , this allows one to perform a single interpolation that simultaneously reconstructs and combines ( and rotates ) multiple frames .",
    "this is the essence of the workflow illustrated fig .",
    "[ fig : workflow2 ] .",
    "there are several specific intepolation schemes that have been considered for kmos .",
    "not all of these will necessarily be implemented .",
    "_ nearest neighbour _ is a fast but approximate method .",
    "it may be a good choice for noisy data ( since it does not degrade the signal - to - noise at all ) when the highest spatial or spectral resolution is not required .    _ modified shepard s method_@xcite is a localised quadratic inverse distance weighted method .",
    "it is a relatively fast and accurate method@xcite .",
    "we have implemented a simplified version which interpolates from the data itself , rather than from a smooth quadratic function that is fit to the data .    _",
    "kriging_@xcite is a distance weighted scheme that is optimal in the sense that interpolated values have the smallest variance .",
    "its strength is that it takes into account correlations between neighbouring pixels based on the seeing and spectral resolution , and provides an estimate of the uncertainty .    _",
    "drizzling_@xcite is a linear reconstruction method introduced to cope with undersampled data .",
    "it is an ideal method to optimise the spatial resolution of the combined data when the observations were performed in excellent seeing , or the data sets taken at sub - pixel offsets .    _",
    "cubic spline _",
    "interpolation is a standard technique . for irregularly sampled data ( i.e. when reconstructing a cube ) it has to be applied in 3 successive 1d interpolations . but for shifting or rotating data that is already on a regular grid , a single bicubic spline interpolation is possible .",
    "one step that is implicit in all of the above methods is the creation of a neighbourhood map .",
    "this is the list of pixels in the detector based format that lie close to each pixel ( voxel ) in the reconstructed cube . for the nearest neighbour",
    ", there will be only one detector pixel for each cube voxel .",
    "but the other methods require lists of 20 or 30 detector pixels for each voxel in order to perform an appropriate interpolation .",
    "it is the creation of this neighbourhood map that takes most of the time .",
    "however , the mapping is fixed for any given set calibration frames ( xcal , ycal , and lcal ) and so can be re - used . for acquisition ,",
    "when speed is of the essence , the cubes will be reconstructed using a set of master neighbourhood maps that are updated only occasionally . by doing so",
    ", it will be possible to see the reconstructed data in quasi - real time .",
    "similarly , if astronomers are processing their data at home , the first time the interpolation is performed it will take some time .",
    "however , thereafter the neighbourhood map can be re - used , and reconstructing additional data sets will be very much faster .",
    "there are now many tools available for visualising 3d datacubes . however , the format of the data and the fact that there are 24 cubes for each exposure mean that most of these tools are not compatible with , or ideal for , kmos .",
    "qfitsview is a popular and verstile tool , that has been developed at mpe and has been included in eso s scisoft releases for several years .",
    "it is available from ` http://www.mpe.mpg.de/~ott/qfitsview ` , and is now being upgraded to handle kmos data .",
    "qfitsview already enables simple versions of many detailed analyses to be performed .",
    "however , it is not yet clear how best these should be applied when there are multiple datasets within a buffer .",
    "such issues will be considered on an ` as - needs ' basis , and the initial upgrade will address only more essential aspects as follows :    * recognise kmos files and open all extensions as subsets of a single buffer . * show a list of the extensions , with their ifu identification as well as whether the contents refer to are data or noise ; allow the user to select all or some of the datasets and display them . *",
    "simultaneously display a representation of as many spectra , images , or cubes as are selected , with an appropriate scaling . * for multiple cubes ,",
    "enable the user to change the representation of all datasets simultaneously to be a single wavelength slice , a combination of slices within a given wavelength range , or a continuum - subtracted line map . * save datasets as individual ` standard ' fitsfiles , i.e. having no extensions , and compatible with the tools with which most astronomers are more familiar ) ."
  ],
  "abstract_text": [
    "<S> kmos is a multi - object near - infrared integral field spectrometer with 24 deployable pick - off arms . </S>",
    "<S> data processing is inevitably complex . </S>",
    "<S> we discuss specific issues and requirements that must be addressed in the data reduction pipeline , the calibration , the raw and processed data formats , and the simulated data . </S>",
    "<S> we discuss the pipeline architecture . </S>",
    "<S> we focus on its modular style and show how these modules can be used to build a classical pipeline , as well as a more advanced pipeline that can account for both spectral and spatial flexure as well as variations in the oh background . </S>",
    "<S> a novel aspect of the pipeline is that the raw data can be reconstructed into a cube in a single step . </S>",
    "<S> we discuss the advantages of this and outline the way in which we have implemented it . </S>",
    "<S> we finish by describing how the qfitsview tool can now be used to visualise kmos data . </S>"
  ]
}