{
  "article_text": [
    "the sloan digital sky survey ( sdss ; @xcite ) is producing a deep imaging survey over about 10,000 square degrees , using a camera with a large format ccd array on a dedicated telescope at apache point observatory in new mexico ( @xcite ) .",
    "a sample of objects selected from this imaging survey is being targeted for a spectroscopic follow - up survey which is being conducted concurrently .",
    "about 900,000 of these spectroscopic targets will be galaxies ( @xcite ) , about 100,000 will be qsos ( @xcite ) , and about 100,000 will be selected by color to be intrinsically very red , luminous galaxies known as `` luminous red galaxies '' ( @xcite ) . in this paper , we will refer to all of these objects generically as `` tiled targets , '' or often simply `` targets . ''",
    "these targets are observed using two multi - object fiber spectrographs on the same telescope ( @xcite ) .",
    "each spectroscopic fiber plug plate , referred to as a `` tile , '' has a circular field - of - view with a radius of 1.49@xmath1 and can accommodate 640 fibers , 48 of which are reserved for observations of blank sky and spectrophotometric standards . because of the finite size of the fiber plugs , the minimium separation of fiber centers is @xmath2 . if , for example , two objects are within @xmath2 of each other , both of them can be observed only if they lie in the overlap between two adjacent tiles .",
    "simulations and early observations both suggest that 10% of targets in the sdss will be unobservable if they do not lie in overlaps of tiles ; about 30% of the sky will be covered by such overlaps .",
    "the goal of the sdss is to observe @xmath6 of the maximal set of targets which has no such collisions ( about 90% of all targets ) . in section [ sdss ]",
    "we give a more complete description of the details of the sdss .",
    "around 2,000 tiles will be necessary to provide fibers for all the targets in the survey . since each tile which must be observed contributes to the cost of the survey ( due both to the cost of production of the plate and to the cost of observing time ) , we desire to minimize the number of tiles necessary to observe all the desired targets . in order to maximize efficiency ( defined as the fraction of available fibers assigned to tiled targets )",
    "when placing these tiles and assigning targets to each tile , we need to address two problems .",
    "first , we must be able to determine , given a set of tile centers , how to optimally assign targets to each tile  that is , how to maximize the number of targets which have fibers assigned to them .",
    "this problem is non - trivial because the circular tiles overlap .",
    "second , we must determine the most efficient placement of the tile centers , which is non - trivial because the distribution of targets on the sky is non - uniform , due to the well - known clustering of galaxies on the sky .",
    "it turns out that the first problem can be solved in polynomial time , even in the presence of fiber collisions ( as long as targets are distributed across the sky in a reasonable way ) .",
    "the second problem belongs to a class of problems for which only exponentially expensive methods for finding the exact solution are known ( that is , it is `` @xmath7-complete '' ) , but we use a heuristic method developed by @xcite to find an approximate solution .",
    "this paper discusses the strategy used by the sdss to place its tiles using these methods .",
    "it is designed to run on a patch of sky consisting of a set of rectangles in a spherical coordinate system , known in sdss parlance as a `` chunk . ''",
    "much of the strategy was described by @xcite ; this paper provides more astronomical context and describes the method for resolving fiber collisions .",
    "section [ method ] describes the method .",
    "section [ tests ] shows example results from actual sdss data and from simulations .",
    "section [ sdss ] describes some technical aspects of the sdss .",
    "section [ conclusion ] summarizes our results .",
    "here we describe our method for placing each tile and allocating the fibers of each tile to the targets .",
    "first , we discuss the allocation of fibers given a set of tile centers . in the absence of fiber collisions ,",
    "this problem can be solved quickly and optimally , as shown in section [ nocollide ] .",
    "a method which is nearly optimal in the presence of fiber collisions is presented in section [ collide ] .",
    "second , in section [ tileplace ] , we discuss how to efficiently place the centers of the tiles .      given a distribution of targets on the sky and an _ a priori _ set of tile centers , one can find the optimal solution to the problem of allocating the targets to each tile , such that the maximum possible number of targets are assigned fibers . with circular tiles , which necessarily overlap ,",
    "this is a somewhat non - trivial problem .",
    "figure [ simple ] shows at the top a very simple example of a distribution of targets and the positions of two tiles we want to use to observe these targets .",
    "given that for each tile there is a finite number of available fibers , how do we decide which targets get allocated to which tile ? as realized by @xcite , this problem is equivalent to a network flow problem , which computer scientists have been kind enough to solve for us already ( _ e.g. _ , @xcite ) .",
    "the basic idea is shown in the bottom half of figure [ simple ] , which shows the appropriate network for the situation in the top half . using this figure as reference , we here define some terms which are standard in combinatorial literature and which will be useful here :    * node : the nodes are the solid dots in the figure",
    "; they provide either sources / sinks of objects for the flow or simply serve as junctions for the flow .",
    "for example , in this context each target and each tile corresponds to a node . * arc : the arcs are the lines connecting the nodes .",
    "they show the paths along which objects can flow from node to node . in figure",
    "[ simple ] , it is understood that the flow along the arc proceeds to the right .",
    "for example , the arcs traveling from target nodes to tile nodes express which tiles each target may be assigned to .",
    "* capacity : the minimum and maximum capacity of each arc is the minimum and maximum number of objects that can flow along it . for example , because each tile can accommodate only 592 fibers , the capacities of the arcs traveling from the tile nodes to the sink node is 592 . *",
    "cost : the cost per object along each arc is exacted for allowing objects to flow down a particular arc ; the total cost is the summed cost of all the arcs . in this paper ,",
    "the network is designed such that the minimum total cost solution is the desired solution .",
    "imagine that you have a flow of 7 objects which enters the network at the source node at the left .",
    "the goal is for the entire flow to leave the network at the sink node at the right for the lowest possible cost .",
    "the objects must travel along the arcs , from node to node .",
    "each arc has a maximum capacity of objects which it can transport , as labeled .",
    "( one can also specify a _ minimum _",
    "number , which will be useful later ) .",
    "each arc also has an associated cost , which is exacted per object which is allowed to flow across that arc .",
    "arcs link the source node to a set of nodes corresponding to the set of targets .",
    "each target node is linked by an arc to the node of each tile it is covered by . each tile node is linked to the sink node by an arc whose capacity is equal to the number of fibers available on that tile .",
    "none of these arcs has any associated cost . finally , an `` overflow '' arc links the source node directly to the sink node , for targets which can not be assigned to tiles .",
    "the overflow arc has effectively infinite capacity ; however , a cost is assigned to objects flowing on the overflow arc , guaranteeing that the algorithm fails to assign targets to tiles only when it absolutely has to .",
    "this network thus expresses all the possible fiber allocations as well as the constraints on the numbers of fibers in each tile . finding the minimum cost solution ( which can be done in polynomial time using the method of @xcite )",
    "then maximizes the number of targets which are actually assigned to tiles .    however , there are a couple of properties of the network flow solutions which must be treated with caution . first ,",
    "notice that in this example there are only three types of target nodes : those only in tile 1 , those only in tile 2 , and those in both .",
    ", and indeed @xcite describe doing so .",
    "we implement the more costly method in this situation because it is simpler and we can afford it computationally . ]",
    "when the network flow algorithm we use here chooses its solution , it does not guarantee that it chooses targets within each of these types randomly .",
    "thus , if the order of the target nodes as sent to the network flow algorithm are correlated with any target property ( for example , position on the sky ) , the distribution of that property in targets assigned to tiles will differ from the distribution in all of the targets .",
    "take for example the situation that the targets are sorted by right ascension .",
    "if the algorithm is unable to assign fibers to some of the targets , it is likely that the unassigned targets will be nodes that are close to each other in figure [ simple ] .",
    "therefore , they will also be clumped in right ascension .",
    "this is unacceptable if we desire a reasonable window function .",
    "thus , we randomize the order in which nodes are assigned to targets by this algorithm ; this prevents any correlation between target properties and whether a target gets a fiber .",
    "second , the particular method we use , provided by @xcite , has the interesting property that when a certain number of targets can not be allocated fibers , the algorithm preferentially chooses to exclude targets which are covered by more than one tile .",
    "this property has no effect on the overall efficiency of the solution , but because the method for fitting for tile positions presented in section [ tileplace ] will tend to put overlaps of tiles in preferentially overdense regions , it may introduce subtle correlations between the sampling rate and the density field .",
    "this behavior is important if the level of completeness in low is parts of the tiling region ; however , the uniformity of our completeness is high enough that this effect is not important .",
    "as described above , there is a limit of @xmath2 to how close two fibers can be on the same tile .",
    "if there were no overlaps between tiles , these collisions would make it impossible to observe @xmath8 of the sdss targets .",
    "because the tiles are circular , some fraction of the sky will be covered with overlaps of tiles , allowing some of these targets to be recovered . in the presence of these collisions ,",
    "the best assignment of targets to the tiles must account for the presence of collisions , and strive to resolve as many as possible of these collisions which are in overlaps of tiles .",
    "we approach this problem in two steps , for reasons described below .",
    "first , we apply the network flow algorithm of section [ nocollide ] to the set of `` decollided '' targets  the largest possible subset of the targets which do not collide with each other .",
    "second , we use the remaining fibers and a second network flow solution to optimally resolve collisions in overlap regions .",
    "the effect of fiber collisions is one which any analysis of the sdss data is going to face .",
    "the fact that most ( @xmath9 ) of the sky in the survey will be only covered by a single tile means that a certain number of objects will be missed for this reason .",
    "thus , the best that one can hope for in terms of sampling is that all unobserved targets have a close neighbor which _ was _ observed ; the redshift of the observed target would thus give us some prior information on the redshift of the unobserved target .",
    "furthermore , exactly where and how many targets one can recover in tile overlaps depends strongly on the locations of the tiles , and thus on the target density field . to evaluate the effect of this dependence on large - scale structure statistics , one would have to run the algorithm described here on a large number of mock catalogs .",
    "for these two reasons , we must take care that we identify a set of targets which we could observe no matter where the tiles are , and obtain as complete a sample as possible of _ these _ targets .    to identify this sample , we define the maximal subset of the targets which are all greater than @xmath2 from each other , which we refer to as the `` decollided '' set . to clarify what we mean by this maximal set , consider figure [ maximal ] .",
    "each circle represents a target ; the circle diameter is @xmath2 , meaning that overlapping circles are targets which collide .",
    "the set of solid circles is the `` decollided '' set .",
    "thus , in the triple collision at the top , it is best to keep the outside two rather than the middle one . to find this decollided set of targets , we run a friends - of - friends grouping algorithm on the targets with a @xmath2 linking length .",
    "the resulting groups are almost always of sufficiently low multiplicity that we can simply check all possibilities to find the best possible selection of targets which eliminates fiber collisions .",
    "we pick at random one of the set of equivalent `` best '' selections ; for example , if two objects collide , this algorithm simply picks one at random to be `` decollided . ''",
    "this determination is complicated slightly by the fact that some targets are assigned higher priority than others .",
    "for example , as explained in section [ tiledtargets ] , qsos are given higher priority than galaxies by the sdss target selection algorithms .",
    "what we mean here by `` priority '' is that a higher priority target is guaranteed never to be eliminated from the sample due to a collision with a lower priority object .",
    "thus , our true criterion for determining whether one set of assignments of fibers to targets in a group is more favorable than another is that a greater number of the highest priority objects are assigned fibers . in the case of a tie in the highest priority objects ,",
    "the next highest priority objects are considered , and so on .",
    "once we have identified our set of decollided objects , we use the network flow solution to find the best possible assignment of fibers to that set of objects .      after allocating fibers to the set of decollided targets",
    ", there will usually be unallocated fibers , which we want to use to resolve fiber collisions in the overlaps .",
    "we can again express the problem of how best to perform the collision resolution as a network , although the problem is a bit more complicated in this case . in the case of binaries and triples ,",
    "we design a network flow problem such that the network flow solution chooses the tile assignments optimally . in the case of higher multiplicity groups ,",
    "our simple method for binaries and triples does not work and we instead resolve the fiber collisions in a random fashion ; however , fewer than 1% of targets are in such groups , and the difference between the optimal choice of assignments and the random choices made for these groups is only a small fraction of that .    the design of the second network flow is similar to the first , with source and sink nodes ( connected by the overflow arc ) and a layer of tile nodes .",
    "however , instead of a layer of _ target _ nodes , we have a layer of nodes corresponding to each _ group _ ( as defined by the aforementioned friends - of - friends algorithm ) which has at least one member in an overlap of tiles .",
    "we thus ignore groups covered only by one tile , since we have already done as well as possible for those targets .",
    "note we include single - member groups in this process , which allows targets in overlaps which were previously guaranteed a fiber on one plate to be shuffled to another plate , if it proves desirable to do so .",
    "first , we need to set the properties of each arc connecting the source node to each group node . for each group , we find the maximum number of targets which could be observed , @xmath10 , taking advantage of the overlapping tiles , but regardless of the number of available fibers in each tile .",
    "we find @xmath10 by simply trying all possible target - to - tile configurations for that group , and picking the best solution ( again accounting for the relative priorities of the objects ) .",
    "a constraint on the best solution is that some subset of the targets in each group will have been allocated fibers as decollided targets in the first network flow .",
    "any `` best '' solution must guarantee that these targets will be assigned fibers again in the second network flow .",
    "in addition , these required targets clearly set a minimum number of targets to observe in each group , @xmath11 .",
    "each source - to - group arc will have its maximum and minimum capacity set according to these bounds .",
    "second , we need to set the properties of each arc connecting a group node to a tile node . in the case that @xmath12 , we determine the maximum number of targets which can be assigned to each tile , @xmath13 , given all the equivalent `` best '' sets of target - to - tile assignments .",
    "the minima @xmath14 are set to the minimum number of arcs in each tile , given all legal target - to - tile assignments .",
    "the group - to - tile arcs are then assigned these maximum and minimum capacities . under these conditions , in almost every case , any solution the network flow finds will be achievable , in the sense that it can be implemented without the occurrence of fiber collisions . see below for a discussion of the exceptions .    in the case that @xmath15 , the same prescription does not provide the assurance that the network flow will return a viable set of tile assignments , and instead we pick a particular `` best '' set of target - to - tile assignments for each such group in order to guarantee feasibility . in this case",
    ", the code chooses at random a particular realization of the `` best '' resolution of the fiber collisions , ( one must also be careful , in the @xmath15 case , to guarantee fibers to all of the decollided fibers which were picked in the first network flow solution ; this task is complicated but tractable ) .",
    "for the sake of concreteness , consider figure [ collisions ] , which shows a possible tile - target configuration and the networks which would be constructed to solve it .",
    "again , the solid circles indicate the `` decollided '' set of targets , which has 11 members , and for which the decollided network flow is run ( unmarked arcs have a capacity of unity ) . assuming all the decollided targets are obtained , we set up the network flow for the groups in the overlap as shown at the bottom .",
    "each source - to - group arc is marked by its maximum capacity @xmath10 followed by its minimum capacity @xmath11 in parentheses .",
    "as explained above , these minima are set by the fact that some of the targets are guaranteed spots because they were previously assigned tiles in the decollided solution .",
    "the group - to - tile capacities are set to the maximum possible on any given tile .",
    "again , setting things up this way allows the network flow solution to optimally allocate the overlap fibers ( at least for triples and binaries ) while still guaranteeing that a solution is possible and that fibers are assigned to all the decollided targets which had been previously selected .",
    "as mentioned above , there are cases for which these rules return unfeasible answers . under the conditions of the sdss , these cases are extraordinarily rare",
    "; we mention them because the same may not be true for every application .",
    "there are essentially two classes of failures .",
    "first , occasionally it happens that because part of a group is in an overlap and part is not , the `` best '' solution _ requires _ that more fibers be assigned to a tile than were assigned in the decollided solution .",
    "if , in conjunction with this occurrence , the tile in question is in a particularly dense region , it may already require all its fibers to cover the decollided targets .",
    "thus , applying the rules above creates a second network flow with no possible solution . in such cases",
    ", the code reverts to a `` fail - safe '' mode which only allows solutions to the group - to - tile problem which put the same number of decollided targets onto each tile as were assigned in the first network flow .",
    "second , and again very rarely , it occasionally happens that while the second network flow successfully returns a choice of fiber assignments , this choice makes it impossible to assign fibers to all the decollided targets which were guaranteed fibers in the first network flow , not because of a lack of fibers but because of geometrical considerations .",
    "again , the problem is associated with groups which straddle tile boundaries . in this case , the problem occurs when some targets in a group are in an overlap of three or more tiles , and others to be in an overlap of a lesser number of tiles . in the code",
    ", we simply warn the user that some decollided targets have been lost . on the basis of simulations",
    ", we expect ten to twenty of the million sdss targets to be lost due to this effect .",
    "once one understands how to assign fibers given a set of tile centers , one can address the problem of how best to place those tile centers .",
    "one can show that to solve this problem optimally is @xmath7-hard ( _ e.g. _  @xcite ) , but @xcite have developed a heuristic method which works well for the sorts of distributions of targets we deal with here .",
    "this method first distributes tiles uniformly across the sky and then uses a cost - minimization scheme to perturb the tiles to a more efficient solution .",
    "we need to choose some initial , nearly uniform covering of the region to be tiled , before perturbing it to improve the efficiency .",
    "we use two techniques .",
    "first , for sufficiently large chunks of sky , we draw the uniform tiling from an approximately uniform covering of the sphere provided by @xcite .",
    "these coverings are provided for discrete numbers of tiles ; the choice appropriate for the sdss target density ( about 120 per square degree ) is 7682 tiles over the whole sky .",
    "we throw away tiles whose centers are not in the chunk of sky of interest to us .",
    "second , for smaller chunks of sky ( which a small chunk of the uniform spherical covering is less likely to cover in a reasonable way ) we simply lay down a rectangle of tiles , with the centers of the tiles in each row offset in order to provide a complete covering .",
    "the method is essentially iterative .",
    "one starts with a uniform covering of tiles over the region in question , as described in the previous subsection .",
    "then , one allocates targets to the tiles , but instead of limiting a target to the tiles within a tile radius , one allows a target to be assigned to further tiles , but with a certain cost which increases with distance ( remember that the network flow accommodates the assignment of costs to arcs ) . for group - to - tile nodes in the second network flow solution",
    ", one defines the cost according the position of the group center .",
    "one uses exactly the same fiber allocation procedure as above .    in practice , we do not allow fibers to be assigned to any tile , but only those within @xmath16 times the tile radius .",
    "we assign a cost of the following form : @xmath17 & r > r_{\\mathrm{tile } } \\end{array},\\ ] ] where @xmath18 is the distance of the fiber from the center of the tile , @xmath19 is the radius of the tile , and @xmath20 is the logarithmic slope of the cost function .",
    "@xmath21 is a scale factor , set so that at @xmath22 the cost is equal to the cost of not assigning the fiber at all .    what this does is to give each tile some information about the distribution of targets outside of it",
    "then , once one has assigned a set of targets to each tile , one changes each tile position to that which minimizes the cost of its set of targets . to perform this minimization , we use powell s direction set method , as described by @xcite . then , with the new positons , one reruns the fiber allocation , perturbs the tiles again , and so on . as @xcite point out ,",
    "this method is guaranteed to converge to a minimum ( though not necessarily a global minimum ) , because the total cost must decrease at each step .",
    "the parameter @xmath20 sets the slope of the cost function ; the most advantageous value of @xmath20 depends in detail on the density and distribution of the targets .",
    "we generally set @xmath23 .",
    "high values in this range encourage tiles to take large excursions from their initial positions , since the slope of the cost function becomes higher at larger radii . under these conditions ,",
    "tiles are influenced by distant targets that they may never cover ; however , this behavior can be desirable for large chunks of sky for which the best solution may require large numbers of tiles to shift in unison .",
    "low values in this range are more conservative in the sense that tiles are encouraged to travel less far from their initial positions , since the slope of the cost function decreases with radius .",
    "this behavior is usually desirable for small chunks of sky , for which many tiles are sitting near an edge and large changes of position will usually uncover sky .",
    "perhaps a more general approach is to allow @xmath20 to be variable in some way throughout the minimization .",
    "depending on the overall survey goals , one can choose to which set of targets these costs apply .",
    "for the sdss , we are most interested in maximizing the fraction of decollided targets which are observed . for this reason , we assign cost _ only _ to the decollided targets , effectively ignoring the other objects when fitting for tile positions .",
    "in fact , during the iteration we do not even perform the second network flow .",
    "it is possible to assign fibers to a slightly larger fraction ( by about @xmath24 ) of all targets if all targets are included in the cost minimization .",
    "however , for the sdss this improvement would come at the cost of large numbers of gaps opening up between tiles , because the number of tiles necessary to observe all the targets is uncomfortably close to the number of tiles necessary to simply cover the available sky .",
    "this effect highlights an important facet of the tiling problem : inefficiency arises because tiles which are in underdense regions can not always be moved towards dense regions without leaving parts of the sky completely uncovered .",
    "a much higher target ( and thus tile ) density would mitigate this difficulty .    in practice",
    ", we also need to determine the appropriate number of tiles to use .",
    "thus , using a standard binary search , we repeatedly run the cost - minimization to find the minimum number of tiles necessary to satisfy the sdss requirements , namely that we assign fibers to @xmath4 of the decollided targets .",
    "in order to test how well this algorithm works , we apply it both to simulated and real data .",
    "first , we test the algorithm on a large solid angle sample drawn from an @xmath25-body simulation .",
    "second , we show results based on actual tiling solutions for a small chunk of sky in the sdss commissioning data .      for this exercise",
    ", we use the simulations of @xcite , which are collisionless @xmath25-body simulations of the growth of structure in a cobe - normalized cold dark matter ( cdm ) model with @xmath26 , @xmath27 , and @xmath28 . in this simulation , dark matter particles are chosen randomly to represent galaxies , and are assigned luminosities based on an assumed luminosity function .",
    "the location of an observer is chosen , a flux limit is assumed , and the galaxies in the simulation are `` observed . ''",
    "the resulting distribution of galaxies has about the same redshift distribution as do galaxies in the actual sdss survey , with a median @xmath29 .",
    "this procedure results in a surface density ( about 90 per square degree ) and an angular clustering of galaxies on the sky approximately the same as the sdss . in order to simulate the quasar and lrg samples",
    ", we distribute an extra 20 targets per square degree randomly on the sky ; although in three dimensions both populations are highly clustered , their large distance and sparse sampling make the approximation that they are randomly distributed in angle not bad for our purposes .",
    "we extract a section of the simulation about 3075 square degrees in solid angle ( a rectangle in spherical coordinates spanning the latitude range @xmath30 and the longitude range @xmath31 ) and consisting of 336,392 objects .",
    "the distribution of galaxies in this range is given in figure [ simgalaxies ] .",
    "this angular region is probably larger than any that will be available during the course of the sdss .    as initial conditions for this large `` chunk , '' we extract a portion of a nearly uniform covering of the sphere given by @xcite .",
    "we exclude any tiles whose centers are outside the official boundaries of the chunk .",
    "this procedure will leave missing targets near the edges ; these targets can be recovered when the adjacent region of sky is tiled . in any case ,",
    "any gaps which are left when the survey is completed can be accounted for in the window function , to the extent that those gaps are uncorrelated with the underlying density of galaxies . for our first test",
    ", we do not perturb the positions of the tiles at all , and assign the fibers to the uniformly distributed tiles .",
    "the results are shown in figure [ simuniform_dec ] ; here we show the tiles as circles and the missing decollided galaxies as squares .",
    "decollided galaxies which were assigned fibers and all collided galaxies are omitted from the plot .",
    "the statistics associated with this solution are given in the first column of table [ simtable ] .",
    "it is clear that although the overall completeness is high ( @xmath32 of decollided objects are assigned ) the small amount of incompleteness is concentrated in a few , dense regions of sky .",
    "the patch of incompleteness near the bottom center is about 8590% complete in the decollided objects on average ; the most incomplete sections of that are only 1030% complete .",
    "clearly it is unsatisfactory to have such a high rate of incompleteness concentrated in unusually dense regions of sky , even if the overall completeness of the survey is high .",
    "such a strong correlation of the sampling fraction with the galaxy density field poses difficulty estimating large - scale structure statistics .",
    "let us therefore perturb the tiles in an effort to increase the completeness and its uniformity .",
    "the result of applying the method described in section [ tileplace ] is shown in figure [ simperturbed_dec ] ; the resulting tiling statistics are given in the second column of table [ simtable ] .",
    "( note that one extra tile was added in the process ; this has a negligible effect on the statistics in table [ simtable ] ) .",
    "now there are only a handful of objects missing in the interior of the sample .",
    "all of the missing objects are concentrated at the edges .",
    "thus , while the overall completeness is increased a bit ( to @xmath33 of decollided objects ) , the real improvement is in the uniformity of the sample .    to show how the resolution of collisions works",
    ", we show as points in figure [ simperturbed_col ] the collided galaxies ( those which are not in the decollided set ) .",
    "we have zoomed into a section of the interior to make it easier to distinguish the points .",
    "these points represent the set of objects which would be eliminated due to fiber collisions if there was no overlap between tiles .",
    "open squares are placed over those which did not receive fibers .",
    "it is clear that in the underdense regions most of the collisions in overlaps of tiles are actually resolved . in the overdense regions , however ,",
    "almost all of the fibers are used to observe decollided targets , and few are left over to resolve collisions .",
    "overall , in these simulations , @xmath34 of the available targets were assigned fibers ; most of the missing ones are due to fiber collisions which were not able to be resolved .",
    "the efficiency of the tiling solution , quantified as the percentage of fibers which are used on tiled objects , is @xmath35 .",
    "we here show tiling results using this method from sdss commissioning data . in this phase of the survey ,",
    "there was not enough imaging data yet to define a chunk as large as in the simulations of the previous subsection , so we had to settle for a much smaller chunk of sky .",
    "this chunk ( known as `` chunk 7 '' ) of sky is 5 degrees wide and about 12 degrees long , and contains 6629 objects .",
    "it is the first chunk of sdss data on which this version of the code was used .",
    "the initial conditions were set up simply as a rectangular distribution of tiles .",
    "the tile positions were perturbed in order to maximize the number of decollided galaxies assigned to fibers . however , in this case the tiles move very little  the uniform initial conditions turn out to be close to a minimum in our cost function .",
    "the statistics of the solution are listed again in table [ simtable ] ; note that the efficiency is a bit low , mainly because this chunk is small .",
    "the positions of the targets and tiles are given in figure [ obsgalaxies ] .",
    "an obvious criticism of the tiling of this chunk is that we should only tile the center of the chunk , such that our tiles never cover sky which has not yet been imaged .",
    "then we would wait until later to observe edges of the chunk . in terms of the total number of tiles drilled",
    ", such an approach would be more efficient .",
    "however , doing this would leave the telescope idle when it could be taking spectra , so it is worth drilling a few more tiles than necessary in order to optimally use the available time . in any case",
    ", the fibers left unassigned to any main survey targets are assigned to other targets , mainly stars , first ( @xcite ) sources , and rosat ( @xcite ) sources , so the unassigned fibers are by no means wasted .",
    "there are a few technical details which may be useful to mention in the context of sdss data , since understanding these issues is crucial to understanding the window function when calculating large - scale structure statistics with the survey .",
    "first , we will describe which targets within the sdss are `` tiled '' in the manner described here , and how such targets are prioritized .",
    "second , we will discuss the method used by sdss to deal with the fact that the imaging and spectroscopy are performed within the same five - year time period .",
    "third , we will describe the tiling outputs which the sdss tracks as the survey progresses . throughout , we refer to the code which implements the algorithm described above as tiling .",
    "the information described in this section ( along with the spectroscopic results ) is necessary but not quite sufficient to calculate large - scale structure statistics for the survey .",
    "first , at later stages in the processing , fibers can be lost due to collisions with guide fibers , as well as with the center of the tile , where a post prevents any fiber from being placed within @xmath36 ( in later versions , we will adjust the algorithm described here to attempt to avoid placing tile centers so close to targets ) .",
    "second , some fields within each chunk are excluded for reasons such as bad seeing .",
    "finally , bright stars make it impossible to observe galaxies in a certain fraction of the sky , in a way which varies with galactic latitude .",
    "these masks need to be determined to study clustering on the largest scales in the survey .      only some of the spectroscopic target types identified by the target selection algorithms in the sdss are `` tiled . ''",
    "these types ( and their designations in the primary and secondary target bitmasks , as described in @xcite ) are listed in table [ tiled ] .",
    "they consist of most types of qsos , main sample galaxies , lrgs , hot standard stars , and brown dwarfs .",
    "these are the types of targets for which tiling is run and for which we are attempting to create a well - defined sample .",
    "once the code has guaranteed fibers to all possible `` tiled targets , '' remaining fibers are assigned to other target types by a separate code .",
    "all of these target types are treated equivalently , except that they assigned different `` priorities , '' designated by an integer .",
    "as described above , the tiling code uses them to help decide fiber collisions .",
    "the sense is that a higher priority object will never lose a fiber in favor of a lower priority object .",
    "the priorities are assigned in a somewhat complicated way for reasons immaterial to tiling , but the essense is the following : the highest priority objects are brown dwarfs and hot standards , next come qsos , and the lowest priority objects are galaxies and lrgs .",
    "qsos have higher priority than galaxies because galaxies are higher density and have stronger angular clustering .",
    "thus , allowing galaxies to bump qsos would allow variations in galaxy density to imprint themselves into variations in the density of qsos assigned to fibers , which we would like to avoid .",
    "for similar reasons , brown dwarfs and hot standard stars ( which have extremely low densities on the sky ) are given highest priority .",
    "each tile , as stated above , is 1.49@xmath1 degrees in radius , and has the capacity to handle 592 tiled targets .",
    "no two such targets may be closer than 55@xmath37 on the same tile .",
    "the _ modus operandi _ of the sdss makes it impossible to tile the entire 10,000 square degrees simultaneously , because we want to be able to take spectroscopy during non - pristine nights , based on the imaging which has been performed up to that point . in practice , periodically a `` chunk '' of data is processed , calibrated , has targets selected , and is passed to the tiling code . during the first year of the sdss , about one chunk per month has been created ; as more and more imaging is taken and more tiles are created , we hope to decrease the frequency with which we need to make chunks , and to increase their size .    the first chunk which is `` supported '' by the sdss",
    "is denoted chunk 4 .",
    "the first chunk for which the version of tiling described here was run is chunk 7 .",
    "chunks earlier than chunk 7 used a different ( less efficient ) method of handling fiber collisions .",
    "the earlier version also had a bug which artificially created gaps in the distribution of the fibers .",
    "the locations of the known gaps are given in @xcite for chunk 4 , since it is part of the sdss early data release .",
    "a chunk is defined as a set of rectangles on the sky ( defined in survey coordinates ; @xcite ) on the sky .",
    "all of these rectangle are designed to cover only sky which has been imaged and processed .",
    "most of each chunk consists of targets which have not been included in any previous chunk .",
    "however , if an earlier chunk was adjacent , targets may have been missed near its edges because they were not covered by tiles , so the areas near the edges of adjacent chunks are also included .",
    "thus , in general , chunks overlap .",
    "once a chunk is tiled , the position of each tile is stored .",
    "the tiles are assigned a global index for the survey known as a tileid .",
    "for each target , the tileid to which it is assigned is stored ( or @xmath38 if no fiber is assigned ) .",
    "in addition , the @xmath2 group to which it belonged ( indexed from 0 for each chunk independently ) is also stored as collisiongroup .",
    "finally , a mask parameter is created , whose three lowest bits are ( respectively ) : assigned , decollided , and covered . assigned",
    "means that a fiber was actually assigned to the target .",
    "decollided means that the target was designated a decollided target .",
    "covered means that the target was in an area observable by some tile .",
    "unfortunately , these parameters are not included in the sdss early data release .",
    "this paper describes a method for positioning tiles and assigning fibers to targets which is being used for the sdss .",
    "the method assigns fibers in a near - optimal manner , which is possible to do in polynomial time given the sorts of target distributions found in the sdss .",
    "we note that if the typical nearest - neighbor distance of targets is of order the fiber collision length , the groups found in the friends - of - friends algorithm become very large , and the solution is only possible in exponential time .",
    "the positioning of tiles is an @xmath7-complete problem ( @xcite ) ; we use the heuristic devised by @xcite to find an approximate solution .",
    "importantly , we define a set of decollided targets for which we can achieve nearly complete sampling ; this fact will make the survey easier to mimic when analyzing simulations .",
    "we have tested this method both on simulations and on sdss commissioning data .",
    "finally , we have described some of the technical details of the sdss itself .",
    "variations of this method may be useful for future surveys consisting of overlapping spectroscopic fields of view .",
    "the main lesson learned in developing this method is that inefficiencies arise primarily due to the need to completely cover the given area . to take the most perverse possible case ,",
    "if 592 objects were spread across the entire sky , 592 tiles would be necessary .",
    "one would rather have those 592 targets within the area of a single tile , which could assign fibers to all of them .",
    "thus , to minimize the number of tiles drilled , one needs a high enough target density that the number of tiles necessary to observe the targets easily covers the survey area .",
    "this allows the tiles more freedom to move to where they are most needed without uncovering areas of sky in underdense regions ; it also provides more overlaps , and thus more ability to resolve fiber collisions .",
    "since the resulting tiling would be nearly 100% efficient even for small chunks , there would be no loss of efficiency due to the piecemeal nature of the chunks . because of its scientific goals , spectroscopic instrumentation , and its budget , the sdss is not in this optimal regime .",
    "a large increase in target density ( factor of two ) would be desirable from the point of view solely of tiling efficiency ; however , the survey goals and technical considerations make such a change impossible .",
    "naturally , we feel that the loss of efficiency is not devastating , because the unused fibers are used to observe other interesting targets , but we mention it here as an issue that future surveys may wish to consider .",
    "we would like to thank daniel eisenstein , gillian knapp , don schneider , ravi sheth , michael strauss , and daniel van den berk for advice and comments .",
    "mb is supported by the doe and nasa grant nag 5 - 7092 at fermilab , and is grateful for the hospitality of the department of physics and astronomy at the state university of new york at stony brook , who kindly provided computing facilities on his frequent visits there .",
    "the sloan digital sky survey ( sdss ) is a joint project of the university of chicago , fermilab , the institute for advanced study , the japan participation group , the johns hopkins university , the max - planck - institute for astronomy ( mpia ) , the max - planck - institute for astrophysics ( mpa ) , new mexico state university , princeton university , the united states naval observatory , and the university of washington .",
    "apache point observatory , site of the sdss telescopes , is operated by the astrophysical research consortium ( arc ) .",
    "funding for the project has been provided by the alfred p.  sloan foundation , the sdss member institutions , the national aeronautics and space administration , the national science foundation , the u.s .",
    "department of energy , the japanese monbukagakusho , and the max planck society .",
    "the sdss web site is http://www.sdss.org/.    dum becker , r. h. , white , r. l. , & helfand , d. j.  1995 , , 450 , 559 cole , s. , hatton , s. , weinberg , d.  h. , & frenk , c.  s.  1998 , , 300 , 945 eisenstein , d.  j. , _ et al . _  2001 , in preparation goldberg , a.  v.  1997 , j.  algorithms , 22 , 1 gunn , j.  e. , carr , m.  a. , rockosi , c.  m. , sekiguchi , m. , _ et al . _",
    "1998 , , 116 , 3040 hardin , r.  h. , sloane , n.  j.  a. , & smith , w.  d. 2001 , published electronically at http://www.research.att.com/@xmath39njas/icosahedral.codes/ lupton , r.  h. , maley , f.  m. , & young , n.  1998 , j.  algorithms , 27 , 339 megiddo , n.  & supowit , k.  j.  1984 , siam j.  comput .",
    ", 13 , 182 press , w.  h. , teukolsky , s.  a. , vetterling , w.  t. , & flannery , b.  p.  1992",
    ", numerical recipes ( cambridge : cambridge univ .  press ) richards , g. , _ et al . _",
    "2001 , in preparation stoughton , c. , _ et al . _",
    "2001 , in preparation strauss , m.  a. , _ et al . _  2001 , in preparation",
    "uomoto , a. , _ et al . _  2001 , in preparation voges , w. , aschenbach , b. , boller ,",
    "_ 1999 , , 349 , 389 york , d. , _ et al . _  2000 , , 120 , 1579      lll +   +   + target_qso_hiz & 0x1 & high - redshift qso + target_qso_cap & 0x2 & qso at high galactic latitude + target_qso_skirt & 0x4 & qso at low galactic latitude + target_qso_first_cap & 0x8 & `` stellar '' first source at high galactic latitude + target_qso_first_skirt & 0x10 & `` stellar '' first source at low galactic latitude + target_galaxy_red & 0x20 & lrg + target_galaxy & 0x40 & main sample galaxy + target_galaxy_big & 0x80 & low surface brightness galaxy + target_galaxy_bright_core & 0x100 & low surface brightness galaxy with bright fiber magnitude + target_star_brown_dwarf & 0x8000 & brown dwarf +   +   +   + target_hot_std & 0x200 & hot subdwarf standard star +"
  ],
  "abstract_text": [
    "<S> the sloan digital sky survey ( sdss ) will observe around @xmath0 spectra from targets distributed over an area of about 10,000 square degrees , using a multi - object fiber spectrograph which can simultaneously observe 640 objects in a circular field - of - view ( referred to as a `` tile '' ) 1.49@xmath1 in radius . </S>",
    "<S> no two fibers can be placed closer than @xmath2 during the same observation ; multiple targets closer than this distance are said to `` collide . '' </S>",
    "<S> we present here a method of allocating fibers to desired targets given a set of tile centers which includes the effects of collisions and which is nearly optimally efficient and uniform . </S>",
    "<S> because of large - scale structure in the galaxy distribution ( which form the bulk of the sdss targets ) , a nave covering the sky with equally - spaced tiles does not yield uniform sampling . </S>",
    "<S> thus , we present a heuristic for perturbing the centers of the tiles from the equally - spaced distribution which provides more uniform completeness . for the sdss sample , we can attain a sampling rate of @xmath3 for all targets , and @xmath4 for the set of targets which do not collide with each other , with an efficiency @xmath5 ( defined as the fraction of available fibers assigned to targets ) . </S>"
  ]
}