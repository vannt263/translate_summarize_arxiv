{
  "article_text": [
    "experiments with cold trapped atoms rely on precise control of laser light amplitude and frequency . depending on the details of the experiments ,",
    "the duration of the laser pulse can range from a few seconds to a few micro - seconds . to meet these timing requirements ,",
    "switching of laser light is usually achieved by a combination of acousto - optical modulators ( aoms ) for fast switching and precise frequency tuning , and mechanical shutters to eliminate any leakage of the laser light .",
    "since aoms require radio - frequency ( rf ) signals ( typically with frequency from 0 to 500 mhz ) to operate , rf generators are indispensable in every modern atomic physics laboratory .",
    "while there are many commercially available rf generators in the market , they are not optimized to control multiple aoms in atomic physics experiments .",
    "for example , most rf generators requires a few milli - seconds to reprogram the frequency and/or the amplitude .",
    "some devices have a frequency - shift - key ( fsk ) functionality , but that only allows users to quickly alternate between two fixed frequencies . to overcome this limitation ,",
    "multiple rf generators combined with rf switches can be used . as the number of laser sources increases with the complexity of the experiment ,",
    "the space these devices take up in the laboratory can be significant . moreover ,",
    "incautious wiring among these devices can lead to unwanted electromagnetic interferences between rf sources and other electronics .",
    "hence , a compact multi - channel rf source with robust frequency and amplitude control is desirable since it simplifies the experimental setup .    in this paper",
    ", we report on our development of a compact fpga - based multi - channel rf - generator and pulse sequencer @xcite .",
    "the system contains a multi - channel ttl digital pulse sequencer with a timing resolution of 40 ns and 16 channels of direct - digital synthesized ( dds ) rf generator with a frequency tuning resolution of better than 1 mhz , which is especially beneficial in operating optical atomic clocks .",
    "each dds channel is capable of amplitude switching with a rise - time of 60 ns and consecutively switching rf frequency within 1.0 @xmath1s .",
    "additionally , users can independently program amplitude and frequency ramps of each dds channel independently , making the unit suitable for a wide range of experiments .",
    "the unit also has a built - in frequency counter for counting electrical pulses from photo - multiplier tube ( pmt ) , which is widely used to detect fluorescence from trapped atoms or ions .",
    "the counter is capable of time - tagging the arrival of the photons at the pmt referenced to the timing of the pulse sequence with a resolution of 10 ns .",
    "only a single usb cable is required between the pulse sequencer and a control computer .",
    "the system ( not including power supplies and 2 ghz reference clocks ) takes up a volume of @xmath2 @xmath3 which fits in a 3u 19-inch standard rack .",
    "the block diagram of a typical setup of a complete system is shown in fig .  [",
    "fig : block_diagram ] .",
    "the core of the system is an fpga module xem6010 from opal kelly ( ok fpga ) , which connects to a user - interface computer via a single usb cable for data - transfer @xcite .",
    "the ok fpga unit controls the timing of the pulse sequence using its on - board oscillator @xcite ( or an externally referenced clock via one of the ttl input channel ) and outputs the digital ttl signals to control devices such as mechanical shutters or relays . for counting electrical pulses from a pmt ,",
    "the ok unit receives a ttl signal from one of its input .    to generate rf signals",
    ", the ok unit receives data ( containing frequency , amplitude and phase for each dds channel ) from a computer and distribute the data to all 16 dds boards . to increase flexibility",
    ", each dds board also has a cyclone iv ( altera ) fpga to store rf signal data and settings .",
    "each fpga on the dds board then programs ad9915 ( analog devices ) dds chip with desired frequency , phase and amplitude .",
    "each dds board requires a 2 ghz reference signal to operate properly .",
    "we use pci connectors to attach each dds board to the main pcb ( see fig .  [",
    "fig : dds_pcb_duo ] ) for ease of installing and removing each individual board .",
    "the pci bus contains a 16-bit bus and a few auxiliary signal lines for data - transfer between each dds board and the main ok fpga .",
    "additionally , each dds boards receives power directly from the pci bus to simplify electrical connections .",
    "we can see in fig .",
    "[ fig : dds_pcb_duo ] that the only connections are the 2 ghz input reference clock and an output rf signal for each dds board .",
    "the main functionality of the main ok fpga is to generate multi - channel ( at least 32 channels ) digital ttl pulses with timing programmable by the user .",
    "we define the data structure of the pulse sequence by the initial states of each ttl channel and the time in which each channel changes its state . in this way , memory",
    "used to store a pulse - sequence is determined by the complexity of the pulse sequence and not by the length of the pulse sequence ( see ref .",
    "all the pulse sequence data is transferred into the memory of the ok fpga before the starting of the pulse sequence . during the executing of the pulse sequence ,",
    "the internal counter of the ok fpga steps through the data stored in the memory .",
    "then the ttl outputs change their states accordingly .",
    "hence , there is no data transfer between the fpga and the computer when the pulse sequence is running , eliminating any potential time delay during the pulse sequence .",
    "( the timing of the pulse sequence is determined faithfully by the on - board ( or externally referenced ) clock . ) for our current design , the ttl pulses generator has a timing resolution of 40 ns .",
    "the switching time of the ttl signal is approximately 6 ns .",
    "a separated counter in the ok fpga is dedicated to counting electrical pulses from a pmt , which is widely used to detect fluorescence from trapped atoms or ions .",
    "the ok fpga is able to time - tag the arrival of the pmt signal ( with a timing resolution of 10 ns ) relative to the start of the pulse sequence .",
    "the time - tagged data is stored temporarily in the internal memory of the fpga which can be read out collectively later to reduce overheads in data - transfer .",
    "this is beneficial in running an experiment that requires long measurement time to build up statistics .",
    "this feature is demonstrated in ref .",
    "@xcite where fluorescence from trapped ions is collected during many experimental runs before the all the time - tag data is read by the computer at the end of the pulse sequence .",
    "another functionality of the ok fpga is to distribute rf signal data to all the dds boards ( described in the next section ) via a 16-bit differential bus .",
    "single - ended signals from the ok fpga are converted to differential signals using max3030 and max3094 ( maxim ) data converters to reject common - mode noise induced along the signal path .",
    "each dds board consists of a cyclone iv fpga and a dds chip ( ad9915 from analog devices ) . the block diagram is shown in fig .",
    "[ fig : dds_pcb_duo ] . before the starting of a pulse sequence",
    ", the fpga receives data from the main ok fpga and store it in a built - in memory in the fpga .",
    "each memory address in the fpga is a 128-bit wide word used to store data for frequency , amplitude , phase , frequency ramping rate and amplitude ramping rate ( see table [ table : bit ] ) . during the operation of the pulse sequence ,",
    "the fpga on the dds board waits for a digital ttl pulse from the main ok fpga to step to the next memory address .",
    "the fpga then programs the dds chip with the dds data from this memory block .",
    "programming of frequency and phase is performed directly to the dds chip via a 16-bit bus between the fpga and the dds chip ( see table [ table : bit ] ) . for amplitude tuning ,",
    "we control the variable - gain amplifier ( vga ) adl5330 ( analog devices ) which provides 60 db dynamic range of amplitude tuning .",
    "the control voltage ( 0 to 1.2 v ) for the vga is generated from a high - speed ad9744 ( analog devices ) 14-bit digital - to - analog converter chip .",
    "this independent control over the frequency and amplitude allows us to perform frequency and amplitude ramping separately , which is impossible with the built - in digital ramp functionality of the dds chip .",
    "we incorporate directly in the fpga two independent counters with programmable counting rates .",
    "this allows us to generate more complex ramping patterns for other applications .",
    "the layout of the printed circuit - board ( pcb ) of the dds board is shown in fig .",
    "[ fig : dds_pcb_duo ] .",
    "the pcb is a 4-layer board design with two inner planes used for ground and power .",
    "the analog part ( left side ) and the digital part ( right side ) have separated sets of voltage regulators to reduce electrical interference .",
    "there is also an auxiliary usb port for the purpose of using the dds board as a stand - alone rf source .",
    "since the communication between the pc and the pulse - sequencer unit is done through the main ok fpga module via a single usb cable , all data transfer is handled by the frontpanel api provided by opal kelly . for us",
    ", we use the provided api in python programming language .",
    "however , our experimental control software framework ( labrad@xcite ) allows an interface between various programming language , including labview .",
    "the details of the experimental control software is beyond the scope of this paper and we refer interested readers to ref .",
    "@xcite for full descriptions of the software .",
    "however , we would like to point out that to program a new pulse sequence to the ok fpga , we do not have to recompile the hardware description code for the fpga .",
    "the pulse sequence is written to the ok fpga directly in python data structure .",
    "an application software for controlling the pulse sequencer unit can be downloaded at a git repository given in ref .",
    "@xcite which also includes design files for the pcb of the dds board and vhdl source codes for all the fpgas used in our setup .",
    "an ability to change the amplitude and/or the frequency of the rf signal ( that drives the aoms ) rapidly is crucial in atomic physics experiments , especially in the case where the laser pulse duration is in the time scale of a few micro - seconds .",
    "[ fig : trace_data ] shows the measured signal from one of the dds channels where we set the main ok fpga to trigger the dds board at @xmath4 ( shown in trace [ fig : trace_data]d ) to switch both the amplitude ( from low to high ) and the frequency ( trace [ fig : trace_data]a and b ) .    to understand the amplitude / frequency switching behaviour of the dds channel as shown in trace [ fig : trace_data]a , b and c , we describe here the protocol used for frequency / amplitude programming the dds chip via the on - board fpga ( dds fpga ) .",
    "once the dds board receives a ttl trigger from the ok fpga , the dds fpga advances its memory address to the next one and checks if there is a change in the amplitude and/or the frequency @xcite .",
    "if there is only a change in the amplitude , the dds fpga sends data to the ad9744 dac chip to update the control voltage to the vga .",
    "( no data is sent to the dds chip . )",
    "this task takes approximately 350 ns after triggering which is determined by the time to program the dac chip and the response of the vga .",
    "this is shown in trace [ fig : trace_data]b .",
    "however , if the amplitude changes to / from a completely off state , then in addition to the dac chip , the dds fpga has to also program the dds chip to turn off / on the rf output signal .",
    "this is shown in trace [ fig : trace_data]c , where the rf amplitude is switched from a completely off state .",
    "this task takes approximately 200 ns longer to complete compared to trace [ fig : trace_data]b because of the additional time it takes to program the dds chip .",
    "if there is a change in the frequency , then the dds fpga has to program the dds chip with new frequency data .",
    "this task takes approximately 1.0 @xmath1s after triggering . in trace [",
    "fig : trace_data]a we change both the amplitude and the frequency .",
    "we can see that the amplitude switching is faster ( and identical to trace [ fig : trace_data]b ) but the frequency switching takes longer to complete .",
    "it is important to note that delay in programming is well - defined in terms of a number of clock cycles .",
    "the delay can be compensated in the control software .",
    "for example , if we want the frequency to switching exactly at @xmath5 = 0.0 @xmath1s , then we can trigger the dds board at @xmath5 = -1.0 @xmath1s to obtain the desired timing .",
    "we also demonstrate fast frequency modulation by alternating one of the dds channel between two fixed frequency , as shown in fig .",
    "[ fig : freq_sw ] .      in cold atom precision spectroscopy experiments ,",
    "we often implement a ramsey - type interferometric scheme . in this case , the phase of the laser light is directly controlled by the phase of the rf signal driving the aom .",
    "the ad9915 dds chip is capable of arbitrarily changing the phase of the rf signal by changing the phase offset in the internal phase accumulator . in fig .",
    "[ fig : phase_data ] , the main ok fpga signals the dds channel b to change the phase by 180  in three successive events given by digital pulses shown in trace [ fig : phase_data]c . by comparing to a reference signal of dds channel a",
    ", we can see that there is a delay of approximately 500 ns in phase switching .",
    "since the delay is well - defined by a number of clock cycles the dds fpga takes to program the dds chip , we can compensate this delay in a control software .",
    "we successfully implemented the phase control capability in the work performed in ref .",
    "@xcite . in this work",
    ", a signal measured from trapped ions is used to feedback to the phase of the clock laser in a ramsey - type interferometric scheme .      in some scenarios ,",
    "fast amplitude and frequency switching of the rf signal driving aoms are not desirable .",
    "for example , we might change the frequency of the laser light stabilized to a frequency comb by changing the reference frequency of the beat signal between the two .",
    "if the change in the reference frequency is too sudden , the stabilization circuit might not be able to follow . in this case , a slow change in the rf frequency is more desirable .    for each dds channel , we implement a ramping capability for both frequency and amplitude by means of additional counters in the fpga in each dds board .",
    "[ fig : amp_ramp_data ] shows a case where one of the dds channel is configure to ramp down the amplitude ( trace b ) compared to a sudden switching ( trace a ) . in this case , the ramping rate is set to 20 db / ms .",
    "[ fig : freq_ramp_data ] shows a capability of frequency ramping ( trace b ) compared to a fixed rf frequency in trace a. in this case the ramping rate is set to be 7 mhz / ms .",
    "we note that the dds channel is capable of ramping both the amplitude and frequency simultaneously since they are two dedicated counters in the fpga in each dds board .",
    "we note that both frequency and amplitude ramping can be implemented at the same time",
    ".      recent work on optical atomic clocks achieve the frequency precision in the mhz scale routinely@xcite .",
    "it is then desirable to have rf sources that are capable of fine frequency tuning reaching the level below 1 mhz without sacrificing fast switching capability shown in the previous sections .    in fig .",
    "[ fig : fine_freq_matome ] , we set one of the dds channel to output frequencies of 0 , 50 , 10 and 0 @xmath1hz offset from 15.225 354 543 00 mhz . to be able to resolve small frequency changes , we average the frequency readouts measured using a frequency counter ( agilent 53230a ) for 5 minutes for each frequency setting . in this measurement",
    ", the 2 ghz reference clock for the dds is referenced to the frequency counter .",
    "* phase noise : * we measured the phase noise of the dds output and compared to the phase noise of the 2 ghz reference clock in fig .  [",
    "fig : phase_noise_data ] .",
    "we found that the noise relative to the reference clock is similar to the specification of the ad9915 chip@xcite .",
    "* cross - talk : * we tested for cross - talk between two adjacent dds channels by setting the rf power of one channel to maximum and looking for pick - up rf signal at the other channel ( also set at maximum rf power ) . at the noise floor of @xmath6 dbc of our spectrum analyzer , we did not see any rf pick - up in the adjacent dds channel .",
    "* output power : * the output power as a function of the dds frequency is shown in fig .",
    "[ fig : output_power ] .",
    "the roll - off at low and high frequency is due to a finite bandwidth of the tc1 - 1 - 1t+ ( mini - circuits ) transformer and adl5330 variable gain amplifier on the dds board .",
    "data shown in fig .  [ fig : output_power ] is taken without any on - board low pass filter .    * power consumption and temperature : * for each dds channel , the required current for the power supplies are approximately 400 , 600 and 150 ma for 5v ( digital ) , 5v ( analog ) and 8v ( analog ) , respectively . without active air - flow cooling and room temperature of 25  c ,",
    "the dds chips heats up to approximate 45  c during a normal operation .",
    "we have presented a pulse - sequencer and rf generators unit suitable for experiments in atomic physics where the amplitude and frequency of laser lights are controlled by aoms and mechanical shutters .",
    "sub - mhz frequency tuning of the rf generators makes the system suitable for optical atomic clock , where mhz frequency resolution of the laser light frequency is routinely achieved .",
    "additionally , the timing of the pulse - sequence , ranging from sub - micro - seconds to seconds , together with frequency and amplitude ramping functionality , adds robustness to the pulse sequencer to be applicable to a wide variety of experiments with trapped atoms and ions .",
    "t. p. would like to thank h. hffner and m. ramm for support and assistance during the development of the pulse sequencer system in berkeley .",
    "this work is supported by riken s foreign postdoctoral researcher program .",
    "s , a triggering pulse is sent to the dds board from the main ok fpga to update the dds configuration .",
    "* trace a * shows a case when both the amplitude and the frequency are changed at the same time .",
    "( slight change in the rf amplitude after frequency switching is due to the response of the measuring oscilloscope . ) * trace b and c * show the case when the dds switches the amplitude from completely off ( c ) compared to from a low but non - zero amplitude ( b ) . *",
    "trace d * is one of the ttl output for timing reference .",
    ", scaledwidth=45.0% ]                            the system presented in this paper is a major upgrade ( especially the dds board and pci connectors ) over the first version of a complete system developed in berkeley in 2009 - 2014 ( see ref .",
    "@xcite for a full description of the system ) which has been successful in running various ion trapping experiments .",
    "the berkeley dds board ( with ad9910 analog devices chip ) was partly based on a prototype board from rainer blatt s group ( university of innsbruck , austria ) .",
    "a triggering ttl pulse from the main ok fpga is sampled by a clock on each dds board .",
    "hence , jitter in the triggering timing for each dds board is less than one period of the clock on the dds board .",
    "this is on the order of 10 ns for our system .",
    "this jitter can be reduced further by referencing the clock used by the ok fpga to the same one as the dds board ."
  ],
  "abstract_text": [
    "<S> we present a compact fpga - based pulse sequencer and radio - frequency ( rf ) generator suitable for experiments with cold trapped ions and atoms . </S>",
    "<S> the unit is capable of outputting a pulse sequence with at least 32 ttl channels with a timing resolution of 40 ns and contains a built - in 100 mhz frequency counter for counting electrical pulses from a photo - multiplier tube ( pmt ) . </S>",
    "<S> there are 16 independent direct - digital - synthesizers ( dds ) rf sources with fast ( rise - time of @xmath060 ns ) amplitude switching and sub - mhz frequency tuning from 0 to 800 mhz . </S>"
  ]
}