{
  "article_text": [
    "the study of continuous analogues of petri nets dates back to the works of david and alla  @xcite and silva and colom  @xcite in 1987 .",
    "it has given rise to a large scope of research in the field of petri nets .",
    "whereas classical ( discrete ) petri nets belong to the class of discrete event dynamic systems , the circulation of tokens in continuous petri nets is a continuous phenomenon : tokens are assumed to be fluid , _ i.e. _ , a transition can fire an infinitesimal quantity of tokens . in this way",
    ", the continuous dynamics can be represented by a system of ordinary differential equations or differential inclusions .",
    "continuous petri nets are usually introduced as a relaxed approximation of petri nets , that helps understanding some of the properties of the underlying discrete model , allowing one to overcome the state space explosion that can occur in the latter .",
    "the continuous framework can also be seen as a scaling limit of a class of stochastic petri nets ( see  @xcite ) , where the marking @xmath0 of place @xmath1 in the fluid model is the finite limit of @xmath2 , with @xmath3 being a scaling ratio tending to infinity , and where the firing times of transitions follow a poisson distribution .",
    "an important effort has been devoted to the comparison between continuous nets and their discrete counterparts .",
    "for example , the relationship between reachability of continuous petri nets and of discrete petri nets is well understood ( see  @xcite ) . a recent introduction to continuous models",
    "can be found in @xcite , while a more extensive reference is @xcite .    in order to evaluate the long - term performance of petri nets",
    ", one has to characterize the stationary or steady states of the petri nets dynamics .",
    "cohen , gaubert and quadrat  @xcite introduced an approximation of a discrete petri net by a fluid , piecewise affine dynamics with finite delays , and showed that the limit throughput does exist for a class of consistent and free choice petri nets . in the more recent work of gaujal and giua  @xcite , the result is extended to larger classes of petri nets , and the stationary throughputs are computed as the solutions of a linear program .",
    "the results obtained using this fluid approximation hardly apply to the discrete model , up to a remarkable exception identified by bouillard , gaujal and mairesse  @xcite ( bounded petri nets under total allocation ) .",
    "this reference illustrates the many difficulties that arise from the discrete setting ( _ e.g. _ , some firing sequences may lead to a deadlock ) .",
    "in the continuous dynamics setting , with time attached to transitions , recalde and silva  @xcite showed that the steady states of free choice petri nets as well as upper bounds of the throughputs in larger classes of petri nets can be determined by linear programming .",
    "however , in general , the asymptotic throughputs are non - monotone with respect to the initial marking or the firing rates of the transitions  @xcite .",
    "an example of oscillations in infinite time around a steady state is also given in  @xcite .",
    "we propose a continuous dynamics of petri nets where time is attached to places and not to transitions .",
    "the main novelty is that it handles a class of petri nets in which tokens can be routed according to priority rules ( section  [ sec : semantics ] ) .",
    "we initially studied this class in  @xcite in the discrete setting , motivated by an application to the performance analysis of an emergency call center .",
    "we show that the continuous dynamics can equivalently be expressed in terms of _",
    "policies_. a policy is a map associating with every transition one of its upstream places . in this way , the dynamics of the petri net can be written as an infimum of the dynamics of subnets induced by the different policies .",
    "the policies reaching the infimum indicate the places which are bottleneck in the petri net . on any time interval in which a fixed policy reaches the infimum , the dynamics reduces to a linear dynamics ( section  [ sec : policies ] ) .",
    "we characterize the stationary solutions in terms of the policies of the petri net .",
    "this allows us to set up a correspondence between the ( ultimately affine ) stationary solutions of the discrete dynamics that were described in  @xcite and the stationary solutions of the continuous dynamics ( section  [ sec:4 ] ) .",
    "we also relate the continuous stationary solutions to the initial marking of the petri net .",
    "this relies on restrictive assumptions , in particular the semi - simplicity of a 0 eigenvalue of a matrix associated with a policy .",
    "we finally provide some numerical simulations of the continuous dynamics .",
    "we consider a model of emergency call center with two hierarchical levels for handling calls , originating from a real case study ( 17 - 18 - 112 call center in the paris area )  @xcite . on this petri net ,",
    "numerical experiments illustrate the convergence of the trajectory towards the stationary solution .",
    "this exhibits an advantage of the continuous setting in comparison to the discrete one , in which , for certain values of the parameters , the asymptotic throughputs computed by simulations differ from the stationary solutions ( section  [ sec : numerical experiments ] ) .",
    "the motivation of this work stems from our previous study  @xcite , in which we addressed the same class of petri nets with priorities in the discrete setting , and applied it to the performance analysis of an emergency call center .",
    "the discrete dynamics is shown there to be given by piecewise affine equations ( tropical analogues of rational equations ) .",
    "the idea of modeling priority rules by piecewise affine dynamics originated from farhi , goursat and quadrat  @xcite , who applied it to a special class of road traffic models . in the discrete setting , limit time - periodic behaviors can occur .",
    "they may lead to asymptotic throughputs different from the affine stationary solutions of the dynamics , a pathology which motivates our study of a continuous version of the dynamics .",
    "the `` continuization '' of our dynamics draws inspiration from the original continuous model where time is attached to transitions . in particular , the situation in which the routing of a token at a given place is influenced by the firing times of the output transitions through a race policy has received much attention , see  @xcite . here , we address the situation in which the routing is specified by priority or preselection rules which are independent of the processing rates .",
    "to do so , it is convenient to attach times to places , instead of attaching firing rates to transitions .",
    "we point out in remark  [ rk : comparison ] that our model can be reduced to a variant of the standard continuous model  @xcite in which we allow immediate transitions and require non - trivial routings to occur only at these transitions .",
    "a benefit of our presentation is to allow a more transparent comparison between the continuous model and the discrete time piecewise affine models studied in  @xcite .",
    "the use of the term `` policy '' refers to the theory of markov decision processes , owing to the analogy between the discrete time dynamics and the value function of a semi - markovian decision process .",
    "note that in the context of continuous petri nets , policies are also known as `` configurations '' , see  @xcite for an example .",
    "a petri net consists of a set @xmath4 of places , a set @xmath5 of transitions and a set of arcs @xmath6 .",
    "every arc is given a valuation in @xmath7 .",
    "each place @xmath8 is given an initial marking @xmath9 , which represents the number of tokens initially occurring in the place .",
    "we denote by @xmath10 the valuation of the arc from transition @xmath11 to place @xmath1 , with the convention that @xmath12 if there is no such arc .",
    "similarly , we denote by @xmath13 the valuation of the arc from place @xmath1 to transition @xmath11 , with the same convention .",
    "we set @xmath14 .",
    "the @xmath15 matrix @xmath16 is referred to as the _ incidence matrix _ of the petri net , and its transpose matrix @xmath17 as its _ token flow matrix_. we also denote by @xmath18 ( resp .",
    "@xmath19 ) the @xmath20 matrix with entry @xmath21 ( resp .",
    "@xmath22 ) , so that @xmath23 .",
    "we limit our attention to _ pure _ petri nets , _ i.e. _ , petri nets with no self - loop : for every pair @xmath24 , at least one of @xmath10 and @xmath13 is zero .",
    "we denote by @xmath25 the set of upstream places of transition @xmath11 and by @xmath26 the set of downstream places of transition @xmath11 .",
    "similarly , we use the notation @xmath27 and @xmath28 to refer to the sets of input and output transitions of a place @xmath1 .      in this paper",
    ", we consider a class of petri nets in which places are either free choice or subject to priority .",
    "recall that a place @xmath29 is said to be _",
    "free choice _ if either all the output transitions @xmath30 satisfy @xmath31 ( _ conflict _ , see figure  [ fig : configuration](a ) ) , or @xmath32 ( _ synchronization _ , see figure  [ fig : configuration](b ) ) .",
    "a place is _ subject to priority _ if its tokens are routed to output transitions according to a priority rule .",
    "we refer to figure  [ fig : configuration](c ) for an illustration . for the sake of simplicity , we assume that each place subject to priority has exactly two output transitions , and that any transition has at most one upstream place subject to priority . given a place @xmath1 subject to priority , we denote by @xmath33 and @xmath34 its two output transitions , with the convention that @xmath33 has priority over @xmath34 .",
    "for the sake of readability , we use the notation @xmath35 and @xmath36 when the place @xmath1 is clear from context .",
    "the set of transitions such that every upstream place @xmath1 satisfies @xmath32 is referred to as @xmath37 and the set of free choice places that have at least two output transitions is referred to as @xmath38 .",
    "we denote by @xmath39 the set of places subject to priority .",
    "the sets @xmath40 , @xmath37 and @xmath41 form a partition of @xmath5 .",
    "figure  [ fig : configuration ] hence summarizes the three possible place / transition patterns that can occur in this class of petri nets .",
    "we now equip the petri net with a continuous semantics . given a transition @xmath11 , we associate a flow @xmath42 which represents the instantaneous firing rate of transition @xmath11 at time @xmath43",
    ". we also associate with each place @xmath1 a _ marking _",
    "@xmath44 , which is a continuous real valued function of the time @xmath43 . in the case of _ discrete _ timed petri nets , one typically requires that every token stays a minimum time in the place ,  at this stage , the token may be considered as _ under processing _  before becoming available for the firing of output transitions . to capture this property in the continuous setting , we assume that the marking @xmath44 can be decomposed as @xmath45 , where @xmath46 is the quantity of tokens under processing and @xmath47 is the quantity of tokens waiting to contribute to the firing of an output transition .",
    "we associate with each place @xmath1 a time constant @xmath48 .",
    "each token entering in a place is processed with the rate @xmath49 .",
    "this leads to the following differential equation : @xmath50 the evolution of the number of tokens waiting in place @xmath1 is described by the relation : @xmath51 moreover , for all transition @xmath11 , we require that @xmath52 in particular , this implies that at least one place @xmath53 verifies @xmath54 . in this case , means that each of the upstream places @xmath1 that has a zero quantity of waiting tokens ( @xmath55 ) must satisfy @xmath56 , and that at least one of these places satisfies @xmath57 .",
    "in other words , there is at least one _ bottleneck _ upstream place @xmath1 of @xmath11 , which has no waiting tokens and whose outgoing flow @xmath58 coincides with its processing flow @xmath59 .",
    "the relation provided in   can be simplified in the case of conflict and synchronization patterns . in more detail ,",
    "if @xmath11 has a unique upstream place @xmath1 , and this place is free choice ( conflict ) , then   reduces to : @xmath60 now , if @xmath11 has several upstream places , which are all free choice ( synchronization ) , then reads as : @xmath61 this equation also holds if @xmath62 and if the upstream place of @xmath11 has a single output transition .",
    "we respectively denote by @xmath63 , @xmath64 and @xmath65 the vectors of entries @xmath46 , @xmath47 and @xmath42 .",
    "albeit the dynamics that we presented so far is piecewise affine , a trajectory @xmath66 may be discontinuous . indeed , in  , the set of the places over which the minimum is taken may change over time .",
    "if at time @xmath43 , there is a new place @xmath53 such that @xmath47 cancels , and if the quantity @xmath67 is sufficiently small , then the minimum in   ( and subsequently the flow @xmath42 ) discontinuously jumps to the latter value .",
    "initial conditions of the dynamics are specified by a pair @xmath68 such that the minimum in   makes sense , _",
    "i.e. _ , at least one @xmath69 is equal to @xmath70 for each set of places @xmath25 .",
    "one can easily show that if the set @xmath71 is nonempty for all transition @xmath72 at time @xmath73 , then it remains nonempty for all time @xmath74 .",
    "the dynamics   may admit different trajectories for a given initial condition .",
    "these correspond to different routings of tokens in places with several output transitions .",
    "however , each of these trajectories satisfies the conservation law : @xmath75 where @xmath76 is the token flow matrix of the petri net .",
    "recall that a _ p - invariant _ of the petri net refers to a nonnegative solution @xmath77 of the system @xmath78 . in the discrete",
    "setting , a p - invariant corresponds to a weighting of places that is constant for any reachable marking , meaning that the quantity @xmath79 is preserved under any firing of transition .",
    "an analogous statement holds in the continuous setting :    given a p - invariant @xmath77 of the petri net , the quantity @xmath80 is independent of  @xmath43 .",
    "in particular , if the entries of @xmath77 are all positive , then the petri net is bounded , _",
    "i.e. _ , each function @xmath81 is bounded .",
    "the proof consists in multiplying both sides of   by the invariant @xmath77 .",
    "it follows that the derivative of @xmath80 is zero .",
    "if the entries of @xmath77 are all positive , then @xmath82 is an upper bound to the marking of any place @xmath1 .",
    "the following proposition collects several homogeneity properties of the continuous dynamics :    [ thm : prop2 ] let @xmath83 be a trajectory solution of the dynamics   , with the initial markings @xmath84 , and the holding times @xmath85 and let @xmath86 , then :    a.   @xmath87 is a trajectory solution of the dynamics , associated with the initial markings @xmath88 . b.   @xmath89 is a trajectory solution of the dynamics , associated with the holding times @xmath90 and the same initial conditions . c.   let @xmath91 be a vector of the kernel of @xmath76 , and @xmath92 be the @xmath93 diagonal matrix such that @xmath94 ,",
    "then @xmath95 is a trajectory solution of the dynamics , associated with the initial markings @xmath96 .",
    "the first two statements derive easily from the homogeneity properties of equations  . for the third statement , one can note that adding @xmath97 to the @xmath42 and adding @xmath98 to the @xmath99 in   does not change the right hand sides of   and  , or the expression within the minimum in  . for   and  , this is due to the fact that @xmath100 .",
    "we now complete the description of the continuous dynamics by additional equations which arise from the specification of routing rules .",
    "such rules occur in the following two situations :    given @xmath101 , we suppose that tokens are routed according to a stationary distribution specified by weights @xmath102 associated with each output transition @xmath11 .",
    "therefore , @xmath103    let @xmath104 , and @xmath105 and @xmath106 be the two output transitions , as illustrated in ( c ) .",
    "in order to specify that the flow is routed in priority to transition @xmath105 , we require that : @xmath107    the expression of @xmath108 in  , when @xmath109 , indicates that only the outgoing flow from @xmath110 that is not already consumed by the priority transition @xmath105 is available to @xmath106 .",
    "the first two properties of homogeneity in proposition  [ thm : prop2 ] are still satisfied by the dynamics extended by the routing rules  .    [ rk : comparison ] we already mentioned in the introduction that our model differs from the standard continuous petri net model in which transitions are equipped with firing rates , in the sense that in the latter model , the flows of the output transitions of a given place are pairwise independent . to overcome this limitation ,",
    "_ immediate transitions _ have been introduced  @xcite .",
    "these transitions come with the specification of routing rules , for instance , in the case of conflict pattern . in this way",
    ", our model could be reduced to a classical continuous model enriched with immediate transitions . in this reduction , we require timed transitions to have exactly one upstream place and one downstream place , so that all the routing is determined by immediate transitions , which inherit the equations defined in our place - timed dynamics .    simply put , our model is the continuous analogue of discrete petri nets equipped with `` holding durations '' , in which tokens are frozen during processing , whereas the usual continuous petri net model can be seen as the continuous analogues of petri nets with `` enabling durations '' , in which transitions preempt tokens .",
    "we refer to  @xcite for a discussion on the meaning of time in petri nets .",
    "the analysis of the piecewise affine dynamical system   leads to introduce the notion of _ policy_. fixing a policy allows one to solve the dynamics on a region where it is linear .",
    "we shall see in that policies also arise in the characterization of stationary solutions .    even if our continuous dynamics holds for more general classes of petri nets , we focus in the following on strongly connected , autonomous petri nets , so that each transition has at least one upstream place .",
    "we observe that the dynamics of petri nets with free choice and priority routing   , and   is linear on each region where the arguments of the minimum operators do not change .",
    "more precisely , at any time @xmath43 , for any transition @xmath72 , there exists a place @xmath53 such that @xmath55 and @xmath1 is the unique upstream place of @xmath11 or @xmath1 realizes the minimum in the expression , or of @xmath42 .",
    "place @xmath1 is then referred to as the _ bottleneck place _ of transition @xmath11 at time @xmath43 .",
    "we define a _ policy _ @xmath111 as a function from @xmath5 to @xmath4 , which maps any transition @xmath11 to one of its upstream places @xmath112 .",
    "a policy is meant to indicate the bottleneck place of each transition @xmath11 .",
    "we denote by @xmath113 the _ selection matrix _ associated with  @xmath111 , that is , the @xmath15 matrix such that @xmath114 if @xmath115 , and @xmath70 otherwise .",
    "in particular , @xmath114 implies that @xmath116 .",
    "note that , if @xmath1 realizes the minimum in one of the equations  , or   for some transition , then @xmath1 also realizes the minimum in  .",
    "the converse is not true if places are subject to priority . for @xmath1 denoting a priority place and @xmath105 its priority output transition , if @xmath1 realizes the minimum in   for transition @xmath105 , then , @xmath1 does not necessarily realize the minimum in  .",
    "in other words , our definition of a bottleneck place is dependent on the routing rules of the net .",
    "we point out that notions comparable to policies are used in  @xcite in the context of continuous petri nets with time attached to transitions .",
    "the dynamics of a petri net can be expressed in terms of the different policies of the net : at any time @xmath43 , there is a policy @xmath117 ( we can note @xmath118 if we want to emphasize the dependence on time ) such that @xmath119 and @xmath120    now , for any policy @xmath111 , we denote by @xmath121 the @xmath122 matrix such that the right - hand side of this system of equations reads @xmath123 , where @xmath65 is the vector of the @xmath124 . in particular , the above system writes @xmath125 where @xmath126 is the vector of the @xmath127 .",
    "the diagonal entries of @xmath121 are positive . moreover ,",
    "if we order each transition of type @xmath105 before its associated transition @xmath106 , the matrix @xmath121 becomes lower triangular .",
    "hence , @xmath121 is invertible .",
    "matrix @xmath121 can be seen as a specification of the downstream token flow matrix of the petri net @xmath19 ( introduced in section  [ sec : notations ] ) , associated with the policy @xmath111 .    with this notation ,",
    "the continuous dynamics of petri nets with free choice and priority routing reads :    [ eq : matrix_dyn_system ] @xmath128    where the infimum must be understood for the partial order over @xmath129 induced by @xmath130 .",
    "note that there is at least one policy @xmath117 ( depending on @xmath43 ) attaining the infimum .",
    "it suffices to choose the policy @xmath117 introduced earlier ( _ i.e. _ , to choose a policy that attains the minimum componentwise ) .    by choosing an upstream place for each transition",
    ", a policy actually defines a candidate `` bottleneck net '' of the petri net , that is , a subnet with all the transitions of the original petri net , and such that each transition has a unique upstream place . on each of these subnets ,",
    "the dynamics is linear and yields a unique trajectory for a given initial condition .",
    "the trajectory is solved on a subnet of the original petri net , but one can easily recover the solution over the whole petri net .",
    "this applies to the original dynamics of the system , on any time interval over which the infimum is reached by a constant policy , as stated in the following proposition .",
    "[ thm : fc_prio_unicity ] suppose that there is a policy @xmath117 which reaches the infimum in   for all time @xmath43 in the interval @xmath131 $ ] .",
    "then the dynamics of the petri net with free choice and priority routing reduces to a linear system , which admits a unique solution , given the initial conditions @xmath132 .",
    "if @xmath117 reaches the infimum for any @xmath133 $ ] , then the continuous dynamics of the petri net reads :    [ eq : const_pi_dyn_system ] @xmath134    which is a linear system .",
    "we multiply   by @xmath135 , and replace the term @xmath136 by its expression given in  .",
    "this leads to : @xmath137    let @xmath92 be the @xmath93 diagonal matrix such that @xmath94 , then @xmath138 is the @xmath122 diagonal matrix such that @xmath139 .",
    "equation   then writes @xmath140 .",
    "this leads to : @xmath141 which is an ordinary differential system .",
    "moreover , the @xmath142 can be obtained from the @xmath143 by  , so that this system admits a unique solution @xmath144 for all @xmath133 $ ] .",
    "given this solution @xmath144 , one can successively solve the differential system in @xmath145 given by   and the differential system in @xmath146 given by  , whose initial conditions are known , so that the whole dynamics admits a unique trajectory .",
    "in this section , we prove that the stationary solutions of the continuous and discrete dynamics of a timed petri net with free - choice and priority routing are the same . to do so , we first recall in section  [ sec : stationary_discrete ] the formulation of the discrete dynamics and the associated stationary solutions given in  @xcite .      the discrete dynamics of petri nets with free choice and priority is expressed in terms of _ counter variables _ associated with transitions and places . given a transition @xmath11",
    ", the counter variable @xmath147 denotes the number of firings of  @xmath11 that occurred up to time @xmath43 included .",
    "similarly , the counter variable of place @xmath1 is a function @xmath148 which represents the number of tokens that have visited place @xmath1 up to time @xmath43 included ( taking into account the initial marking ) . on top of being non - decreasing ,",
    "the counter variables are _ cdlg _ functions , which means that they are right continuous and have a left limit at any time .    in this",
    "setting , the parameter @xmath149 associated with the place @xmath1 represents a minimal holding time .",
    "it is shown in  @xcite that , if tokens are supposed to be fired as early as possible , the counter variables satisfy the following equations ( we generalize the equations to the case with valuations ) :    [ eq : discrete ] @xmath150 @xmath151    where @xmath105 ( @xmath106 ) is the priority ( non priority ) output transition of @xmath104 .    note that if all the holding times @xmath149 are integer multiples of a fixed time @xmath152 , the left limit @xmath153 in   can be replaced by @xmath154 .",
    "this is helpful in particular to simulate these equations .    in the setting of  @xcite ,",
    "all conflicts are solved by a stationary distribution routing .",
    "the equivalent of the routing rule introduced to solve conflicts in the continuous setting is obtained here by allowing the tokens to be shared in fractions , so that the counter functions take real values .",
    "this corresponds to a _",
    "fluid approximation _ of the discrete dynamics . in this",
    "setting , for each @xmath101 and @xmath155 , we fix @xmath156 , giving the proportion of the tokens routed from @xmath1 to @xmath11 .",
    "we have : @xmath157    the stationary solutions of the discrete dynamics are defined as functions @xmath158 and @xmath159 satisfying the relations   and which ultimately behave as affine functions , _",
    "i.e. _ , @xmath160 and @xmath161 for all @xmath43 large enough . in this case , @xmath162 ( resp .",
    "@xmath163 ) represents the asymptotic throughput of place @xmath1 ( resp .",
    "transition @xmath11 ) .",
    "we have shown in  ( * ? ? ?",
    "* theorem  3 ) that these stationary solutions are precisely given by following system ( we generalize the equations to the case with valuations ) :    [ eq : fixpoint_germ_rho ] @xmath164    [ eq : fixpoint_germ_u ] @xmath165 @xmath166 @xmath167 \\big ( ( u_p - \\rho_p \\tau_p - a^-_{q_-p}u_{q_-})/a^-_{q_+p } , \\\\",
    "\\min_{r \\in q_+{^{\\textrm{in}}}\\setminus \\{p\\ } , \\ , \\rho_{q_+ } = \\rho_r } ( u_r - \\rho_r \\tau_r)/a^-_{q_+r } \\big ) \\end{multlined } \\quad & \\text{if } \\rho_{q_- } = 0 \\ , ,   \\\\",
    "\\min_{r \\in q_+{^{\\textrm{in}}}\\setminus \\{p\\ } , \\ , \\rho_{q_+ } = \\rho_r } ( u_r - \\rho_r \\tau_r)/a^-_{q_+r } \\quad & \\text{otherwise , } \\end{dcases}\\label{eq : fixpoint_germ4_u } \\\\",
    "u_{q_- } & = \\begin{dcases } \\min \\begin{multlined}[t ] \\big ( ( u_p - \\rho_p \\tau_p - a^-_{q_+p } u_{q_+})/a^-_{q_-p } , \\\\ \\min_{r \\in q_-{^{\\textrm{in}}}\\setminus \\{p\\ } , \\ ,",
    "\\rho_{q_- } = \\rho_r } ( u_r - \\rho_r \\tau_r)/a^-_{q_-r } \\big ) \\end{multlined } \\quad & \\!\\!\\ ! \\text{if } \\rho_{q_- } + \\rho_{q_+ } = \\rho_p \\ , ,   \\\\",
    "\\min_{r \\in q_-{^{\\textrm{in}}}\\setminus \\{p\\ } , \\ , \\rho_{q_- } = \\rho_r } ( u_r - \\rho_r \\tau_r)/a^-_{q_-r } \\quad & \\text{otherwise .",
    "} \\end{dcases}\\label{eq : fixpoint_germ5_u}\\end{aligned}\\ ] ]    the above equations are expressed in a more compact form in  @xcite , using a semiring of germs of affine functions , which encodes lexicographic minimization operations .      in the continuous",
    "setting , we define a _ stationary solution _ as a solution @xmath168 of the continuous dynamics such that for any place , @xmath169 is constant and @xmath170 is affine ( @xmath171 is constant ) .",
    "the following theorem provides a characterization of the stationary solutions .",
    "[ th:1 ] a triple @xmath168 of vectors of resp .",
    "@xmath172 , @xmath172 and @xmath173 functions from @xmath174 to @xmath174 , with all the @xmath175 constant and all the @xmath176 affine , is a stationary solution of the continuous dynamics if and only if the following conditions hold :    @xmath177    note that the existence of an @xmath178 that satisfies   provides a simple algebraic necessary condition to the existence of a stationary flow in a petri net .",
    "this corresponds to the net being _ partially repetitive _ ( see  @xcite for a definition ) .",
    "equations   and   are derived from   and  , with @xmath179 for a stationary solution .    in a stationary solution , for any place @xmath1",
    ", @xmath180 is constant , so that one can not have @xmath181 , otherwise this would yield @xmath182 .",
    "therefore , by  , @xmath183 , and by  , we can replace @xmath184 by @xmath185 , and get  .    as the @xmath186 are constant , if , for some place @xmath1 and at some time @xmath187 , @xmath188 , then @xmath189 , ( otherwise it would contradict @xmath190 for @xmath191 or for @xmath192 ) .",
    "hence , the set of places @xmath1 such that @xmath54 is independent of time for @xmath193 .    moreover , the @xmath175 are constant , so that , if a policy @xmath111 attains the minimum in   at some time , then it attains the minimum at any time .",
    "this means that , if @xmath194 is a solution of the continuous dynamics , then there exists a policy @xmath117 such that : @xmath195 now , by   again , we can replace @xmath196 by @xmath185 in the above equation , and we get equations   and  .",
    "conversely , suppose that a triple of functions @xmath168 satisfies the conditions of the theorem , with policy @xmath117 .",
    "we prove that the the relations given in   describing the dynamics are satisfied .",
    "first , and   are derived from   and  , with @xmath197 .",
    "we also note that , in equations   and  , replacing the term @xmath185 by @xmath196 ( by  ) leads to the following equations : @xmath198    equations   and   show that @xmath117 attains the equality in  .",
    "hence , in order to prove  , it is sufficient to prove that , for any @xmath111 , we have @xmath199 we prove this inequality row by row .",
    "let @xmath11 be a transition .",
    "we distinguish the following cases :    * if @xmath200 , then @xmath201 for any @xmath111 ( for any choice of an upstream place of @xmath11 ) so that   follows from  . * if @xmath11 has a unique upstream place @xmath1 , with @xmath101 , then for any @xmath111 , @xmath202 so that   follows from  . *",
    "assume now that @xmath105 is the priority transition of a place @xmath1 subject to priority .",
    "then , by  , @xmath203 and for @xmath204 , @xmath205 . finally , for any @xmath206 , @xmath207 .",
    "this proves  .",
    "* let @xmath106 be the non priority transition of a place @xmath1 subject to priority .",
    "then @xmath208 for any policy @xmath111 , so that   follows from  .",
    "as a consequence of , we obtain a correspondence between the stationary solutions of the continuous dynamics and the stationary solutions of the discrete dynamics . in order to highlight the parallel between the discrete and the continuous setting , we denote by @xmath209 the processing flow @xmath210 for every place  @xmath1 .",
    "[ coro : corresp ]    a.   suppose @xmath168 defines a stationary solution of the continuous dynamics",
    ". then , for the initial marking @xmath211 , setting @xmath212 , @xmath213 , and @xmath214 yields a stationary solution of the discrete dynamics .",
    "b.   conversely , suppose @xmath215 is a stationary solution of the discrete dynamics .",
    "then , defining @xmath216 , setting @xmath217 for every place @xmath1 , and defining @xmath218 according to   and yields a stationary solution of the continuous dynamics .",
    "both statements are straightforward .",
    "we point out that   reads @xmath219 and that   are equivalent to @xmath220 .",
    "the same relationship between the @xmath221 and the @xmath209 was established in the proof of theorem  [ th:1 ] .",
    "an important problem is to relate the stationary flow to the initial marking . on top of the relations given by the invariants of the petri nets ,",
    "most results in this direction are limited to nets without priorities , as they rely on monotonicity properties of the dynamics .",
    "the next theorem identifies , however , a somehow special situation in which such a relation persists even in the presence of priority .",
    "this applies in particular to the petri net of the next section .",
    "if a trajectory of the continuous petri net converges towards a stationary solution @xmath222 , if for this trajectory , there exists a policy @xmath111 that reaches the infimum in   at any time , and if @xmath70 is a semi - simple eigenvalue of @xmath223 associated with this policy , then @xmath224 is uniquely determined by the initial marking .",
    "( recall that the eigenvalue @xmath225 of a matrix @xmath226 is said to be _ semi - simple _ if the dimension of its eigenspace is equal to its algebraic multiplicity , that is , to the multiplicity of @xmath225 as the root of the characteristic polynomial of @xmath226 .",
    "in particular , if @xmath70 is a semi - simple eigenvalue of @xmath226 , then the kernel of @xmath226 and its range space are complementary subspaces . )    under the conditions of the theorem , there exists a policy @xmath111 such that , for any @xmath43 , @xmath227 as shown in the proof of proposition  [ thm : fc_prio_unicity ] .    since @xmath70 is a semi - simple eigenvalue of @xmath228 , the same property holds for the matrix @xmath229 .",
    "therefore , the kernel of this matrix and its range space are complementary subspaces .",
    "we denote by @xmath230 the projection onto the former along the latter .    by  , we obtain that @xmath231 , so that @xmath232 is independent of time , and @xmath233 moreover , as @xmath222 is a stationary solution of the continuous dynamics , equation   holds and @xmath234 belongs to the kernel of @xmath235 .",
    "therefore , @xmath236",
    "in this section , we illustrate our results on the model of an emergency call center with two treatment levels , introduced in  @xcite . in this simplified model of an emergency call center , emergency calls are handled by a first level of operators who dispatch them into three categories : extremely urgent , urgent and non urgent .",
    "non - urgent calls ( proportion @xmath237 of the calls ) are entirely processed by level  1 operators .",
    "extremely urgent ( @xmath238 ) and urgent calls ( @xmath239 ) are transfered to level  2 operators .",
    "extremely urgent calls have priority over urgent calls ( but can not interrupt a talk between an operator of level  2 and an urgent call ) .",
    "this emergency call center can be modeled by a petri net with free choice and priority routing , as depicted in figure  [ fig : call_center ] .",
    "place @xmath240 is a conflict place with a fluid stationary routing , with proportions @xmath238 , @xmath239 , @xmath237 , representing the dispatching of calls into the categories `` extremely urgent '' , `` urgent '' and `` non urgent '' respectively .",
    "every arc has a valuation equal to one .",
    "the initial marking @xmath241 ( resp .",
    "@xmath242 ) of place @xmath243 ( @xmath244 ) denotes the available number of operators of level  1 ( level  2 ) in the call center .",
    "it was observed in  @xcite that the discrete dynamics has a pathological feature : when certain arithmetic relations between the time delays are satisfied , the discrete time trajectory may not converge to a stationary solution , and its asymptotic throughput may differ from the throughput of the stationary solution .",
    "it follows from our correspondence result ( corollary  [ coro : corresp ] ) that the continuous dynamics has the same stationary solutions .",
    "we shall observe that , in this continuous setting , the trajectory converges towards a stationary solution , so that the former pathology vanishes .    to compute the ( fluid approximation ) of the discrete dynamics",
    ", simulations have been performed in exact ( rational ) arithmetics , using the gmp library  @xcite .",
    "the throughput of transitions @xmath245 and @xmath246 ( see figure  [ fig : call_center ] ) , for the discrete dynamics , are compared in   to the throughputs of the stationary solutions , computed by equations   and  .",
    "is subject to priority routing .",
    "the initial markings of the places different from @xmath243 and @xmath244 are null .",
    "the holding times @xmath247 are the following : @xmath248 . ]",
    "the dynamics expressed by   , and   belongs to the class of hybrid automata @xcite , which can handle piecewise linear but discontinuous dynamics like ours .",
    "we simulate our dynamics with the tool spaceex  @xcite , which is a verification platform for hybrid systems .",
    "the particularity of spaceex is that it computes a sound over - approximation of the trajectories .    at the scale of figure  [ fig : phasesdiagramm ] ,",
    "the lower and upper bounds to the values of the throughputs , computed by spaceex , coincide with the shape of the stationary throughputs curve .",
    "table  [ tab:1 ] compares the numerical values of these lower and upper bounds to the stationary throughputs for a few values of @xmath249 .",
    "we observe that the over - approximation computed by spaceex provides an accurate estimate of the stationary throughput computed via equations  . this tends to show that the continuous dynamics converges towards the stationary throughputs , unlike the discrete dynamics .",
    "note that the experiments made with spaceex did not terminate for @xmath250 : this seems to be related with the larger number of switches between the states of the automaton at this frontier between two different phases .",
    ".lower and upper bounds of the throughputs of the continuous dynamics computed by spaceex , and comparison to the stationary throughputs [ cols=\">,>,>,>,>,>,>\",options=\"header \" , ]",
    "we introduced a hybrid dynamical system model for continuous petri nets having both free choice and priority places , and showed that there is a correspondence between the stationary solutions of the continuous dynamics and the discrete one .",
    "an advantage of the continuous setting is that some pathologies of the discrete model ( failure of convergence to a stationary solution ) may vanish .",
    "this is the case in particular on a case study ( emergency call center ) . we leave it for further work to see under which generality the convergence to the stationary solution",
    "can be established .",
    "xavier allamigeon , vianney buf , and stphane gaubert .",
    "performance evaluation of an emergency call center : tropical polynomial systems applied to timed petri nets . in _ formats _ ,",
    "pages 1026 .",
    "springer , 2015 .",
    "goran frehse , colas le  guernic , alexandre donz , scott cotton , rajarshi ray , olivier lebeltel , rodolfo ripado , antoine girard , thao dang , and oded maler .",
    "spaceex : scalable verification of hybrid systems . in _ cav",
    "_ , pages 379395 .",
    "springer , 2011 .",
    "cristian mahulea , laura recalde , and manuel silva . on performance monotonicity and basic servers semantics of continuous petri nets . in _",
    "discrete event syst . , 2006 8th international workshop on _ , pages 345351 .",
    "ieee , 2006 .",
    "manuel silva and jos  manuel colom . on the structural computation of synchronic invariants in p / t nets . in _",
    "8th european workshop on application and theory of petri nets _ ,",
    "volume 340 , pages 237258 , 1987 ."
  ],
  "abstract_text": [
    "<S> we study a continuous dynamics for a class of petri nets which allows the routing at non - free choice places to be determined by priorities rules . </S>",
    "<S> we show that this dynamics can be written in terms of policies which identify the bottleneck places . </S>",
    "<S> we characterize the stationary solutions , and show that they coincide with the stationary solutions of the discrete dynamics of this class of petri nets . </S>",
    "<S> we provide numerical experiments on a case study of an emergency call center , indicating that pathologies of discrete models ( oscillations around a limit different from the stationary limit ) vanish by passing to continuous petri nets . </S>"
  ]
}