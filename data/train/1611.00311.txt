{
  "article_text": [
    "the bv - brst formalism for classical and quantum field theory , especially in the topological case , was studied by schwartz , kontsevich and many others @xcite @xcite using ideas from homological algebra in a geometric way .",
    "recently , following this perspective , costello @xcite formulated a precise definition of perturbative classical and quantum field theories in the bv formalism , applicable to many examples of physical interest , and in particular well - defined in the necessary infinite dimensional setting . further ,",
    "inspired by the work of beilinson and drinfeld @xcite on 2-dimensional conformal field theories and lurie @xcite on topological field theories , costello and gwilliam @xcite formulated a theory of local observables for general classical and quantum field theories ; their work constructs , from the differential geometric input data of a classical or quantum field theory , a factorization algebra of @xmath1 or @xmath2 algebras on the manifold underlying the field theory .",
    "this foundational work has led to the exploration of many interesting classical and quantum field theories and their applications to related areas of pure mathematics @xcite",
    "@xcite @xcite @xcite @xcite @xcite @xcite @xcite .    in this paper",
    ", we develop the framework of _ degenerate _ classical field theories in the bv formalism , extending the work of costello to include a much larger class of examples of classical field theories , which need not have a lagrangian description .",
    "further , we formulate the notions of phase spaces and boundary conditions for classical field theories on manifolds with boundary , and from a classical field theory together with a choice of boundary condition for it , we construct a possibly degenerate classical field theory on the boundary , which we call the _ boundary theory _ ; this theory governs the behaviour , in the presence of the specified boundary condition , of the observables of the bulk theory that depend only on the values of the fields near the boundary . finally , for any degenerate classical field theory on a manifold @xmath3",
    ", we construct a classical field theory on @xmath4 , called the _ universal bulk theory _ , and a canonical boundary condition for it , such that the corresponding theory of boundary observables is the given degenerate theory ; moreover , we show that this bulk theory is indeed universal among all theories on @xmath4 which yield the given degenerate theory on @xmath3 as a theory of boundary observables corresponding to some boundary condition .",
    "we also study in detail many interesting examples of these ideas , recovering several important relationships between classical field theories .",
    "in particular , we study many theories that have deep connections to representation theory : the kapustin",
    " witten twists of @xmath0 supersymmetric yang ",
    "mills , 3d chern  simons theory , the chiral wess  zumino  witten model and the corresponding affine kac  moody poisson vertex algebra , chiral toda theory and the corresponding classical affine @xmath5-algebra , and a new 3d field theory , which we call _ whittaker theory _ , occuring as the theory of boundary observables for kapustin  witten theory , corresponding to the boundary condition @xmath6-dual to that which yields chern - simons .",
    "we hope that the foundational work occuring here , especially extended to the quantum level , will be used to yield new results , as well as original or better motivated proofs of existing ones , in related areas of pure mathematics .",
    "to begin our overview , we describe schematically the theory of phase spaces , boundary conditions and boundary theories , in the language of global derived symplectic geometry of @xcite ; although we will not formally work in this setting , we will often explain our motivation from the global perspective .",
    "afterwards , we will outline the formulation of perturbative classical field theory used here , and describe our results more precisely .",
    "consider an @xmath7-dimensional field theory with a lagrangian description : for a closed @xmath7-manifold @xmath8 , we have a space of fields @xmath9 on @xmath8 , and an action functional @xmath10 . in the classical bv formalism ,",
    "the moduli space of the solutions to the corresponding euler  lagrange equations on a closed @xmath7-manifold @xmath8 is the @xmath11-shifted symplectic space defined by @xmath12 , which is manifestly symplectic as a lagrangian intersection inside a @xmath13-shifted symplectic space .",
    "this @xmath11-shifted symplectic structure is an essential part of the description of a classical field theory in the bv formalism , and moreover , is required for quantization . as an example , chern ",
    "simons theory gives @xmath14 , which inherits the aksz symplectic structure .",
    "the situation when the spacetime manifold @xmath8 has a nonempty boundary is more subtle . in this case",
    ", @xmath15 does not admit a canonical @xmath11-shifted symplectic structure , and so does not describe a well - defined field theory on the manifold with boundary .",
    "however , the phase space of the theory on the boundary @xmath16 , which is defined to be the space of germs of solutions near the boundary @xmath17 , admits a canonical @xmath13-shifted symplectic structure .",
    "for instance , for chern  simons theory , if @xmath18 , then one has @xmath19 .",
    "further , if one considers a lagrangian @xmath20 , then @xmath21 has a canonical @xmath11-shifted symplectic structure .",
    "thus , a _ classical boundary condition _ is defined to be a lagrangian @xmath20 , as this is the appropriate data such that @xmath22 , the space of solutions to the euler  lagrange equations on @xmath8 satisfying the given boundary condition @xmath23 at the boundary @xmath17 , is again @xmath11-shifted symplectic and thus describes a well - defined classical field theory .",
    "now , we restrict our attention to theories which are topological in the direction normal to the boundary of the manifold ; our constructions rely essentially on this simplifying assumption throughout . in this case , restricting to a small collar neighbourhood @xmath24 of @xmath17 in @xmath8 , we know that all functions on @xmath25 can be chosen to depend only on the values of the fields restricted to the boundary @xmath17 , where the fields must satisfy the boundary condition @xmath23 . thus , we expect that @xmath23 should in some sense carry the structure of a field theory , via this relationship to @xmath26 . moreover , it is generally expected that the functions on a lagrangian in a @xmath13-shifted symplectic space should carry a homotopy @xmath1 structure .",
    "our essential observation is that this @xmath1 structure describes the information of being a field theory that @xmath23 inherits from its relationship to @xmath26 , and @xmath23 together with this @xmath1 structure is an example of a degenerate classical field theory , which we call the boundary theory .",
    "finally , for each a homotopy @xmath1 space @xmath27 , there is a @xmath13-shifted symplectic space @xmath28 , called its derived poisson centre , in which @xmath29 is a lagrangian , and such that @xmath29 inherits its given @xmath1 structure @xmath30 as a lagrangian in this space .",
    "given a degenerate classical field theory , we construct a classical field theory of one dimension higher on a manifold @xmath8 with boundary , such that its phase space @xmath31 is given by the derived poisson centre corresponding to the @xmath1 structure underlying the degenerate classical field theory , and prove that it is universal among theories producing the given degenerate classical field theory as a boundary theory .    we have now described the basic narrative of this paper schematically in global terms .",
    "of course , understanding the global derived stacks describing the spaces of solutions to the euler ",
    "lagrange equations modulo gauge transformations and their shifted symplectic structures for interesting physical examples is very difficult in general .",
    "further , the most common method of analysis of field theory at the quantum level is by perturbation theory , which does not require a global description of the space of solutions to the euler  lagrange equations .",
    "thus , we will only attempt to study the formal neighbourhood of a given point in this space of solutions .",
    "formal pointed spaces have been studied extensively algebraically , using ideas from rational homotopy theory , deformation theory and algebraic geometry , with the conclusion that any such space can be described by its @xmath11-shifted tangent complex at the geometric point , viewed as a homotopy lie algebra ( see e.g. @xcite @xcite @xcite @xcite @xcite ) .",
    "we will work with @xmath32 algebras as a concrete model for homotopy lie algebras , and refer to their corresponding formal spaces as _ formal moduli problems_. thus , we will to describe the space @xmath15 of solutions to the euler  lagrange equations of a classical field theory as a formal moduli problem @xmath29 corresponding to an @xmath32 algebra @xmath33x$ ] .",
    "a crucial concept in classical and quantum field theory which can still be understood at the perturbative level is that of local observables , which , at least classically , are simply the functions on the space @xmath15 that depend only on the values of the fields in a given open set @xmath34 . since the euler ",
    "lagrange equations corresponding to a local action functional are differential equations , their solutions restrict , and so the spaces of solutions form a presheaf @xmath35 on @xmath8 .",
    "correspondingly , the spaces of functions on the spaces of solutions to the euler  lagrange equations form a precosheaf @xmath36 and these are precisely the spaces of classical observables local to the open set @xmath34 .    combining these insights",
    ", we will describe the space of solutions to the euler ",
    "lagrange equations underlying a classical field theory as a presheaf @xmath37 on @xmath8 of formal moduli problems , or equivalently as the corresponding presheaf of @xmath32 algebras @xmath38{{\\mathscr{x}}}$ ] .",
    "in fact , the presheaves of @xmath11-shifted tangent complexes to the solutions to the euler  lagrange equations of a local action functional have a natural strict model defined in terms of differential geometry , called a _ local @xmath32 algebra _ , coming from their description as solutions to differential equations on spaces of sections of a vector bundle over @xmath8 ; we define _ local moduli problems _ as the presheaves @xmath37 of formal moduli problems corresponding to local @xmath32 algebras @xmath39 .    in their work on classical field",
    "theory , costello and gwilliam @xcite study extensively the geometry of local moduli problems : they formulate an appropriate notion of local @xmath7-shifted symplectic structure @xmath40 on a local moduli problem @xmath37 , define a classical field theory as a local moduli problem @xmath37 together with a local @xmath11-shifted symplectic form @xmath40 on @xmath37 , and prove the expected equivalence between classical field theories in this sense and local action functionals , the usual defining data of a classical field theory .",
    "further , they show that the precosheaf of strict dg @xmath1 algebras @xmath41 representing the observables of the classical field theory determines a @xmath1 factorization algebra ; this is the essential algebraic object they extract from the differential geometric input data of the classical field theory .    in this paper , we first review the above work of costello and gwilliam , fixing our conventions and notation .",
    "our original work then begins with the formulation of the notion of a local ( homotopy ) @xmath11-shifted poisson structure @xmath42 on a local moduli problem , and the definition of a ( weak ) degenerate classical field theory as a local moduli problem @xmath37 together with a local ( homotopy ) @xmath11-shifted poisson structure @xmath42 .",
    "this is a large generalization of the class of classical field theories introduced by costello and gwilliam , allowing us to describe many more examples of theories , which need not admit a lagrangian description .",
    "in particular , the boundary theories constructed in the later part of the paper will in general be degenerate classical field theories in this sense .",
    "the primary motivating result about our formulation of degenerate classical field theories is the following :    let @xmath43 be a degenerate classical field theory on @xmath8 . then @xmath41 determines a @xmath1 factorization algebra on @xmath8 .    the locality conditions in our definition of shifted poisson structure , as well as the original definition of local moduli problem , were chosen to ensure this result .",
    "we emphasize the factorization structure in this result is a significant amount of additional information ; for example , in the case of chiral conformal field theory , this information is equivalent to that of a poisson vertex algebra or coisson algebra , rather than just a poisson algebra .    in the next section of the paper we study classical field theories on manifolds with boundary , their phase spaces , boundary conditions , and induced boundary theories , in this local , formal framework . given a ( non - degenerate ) classical field theory @xmath44 on a manifold @xmath8 with boundary @xmath17",
    ", we define the phase space of @xmath44 on @xmath17 as a local moduli problem @xmath45 on @xmath17 together with a local @xmath13-shifted symplectic form @xmath46 on @xmath45 which can be constructed from the data of @xmath44 ; to state this result most easily , we at this point restrict our attention to theories which have the property of being topological in the direction normal to the boundary of the manifold .",
    "next , we define the notion of a proper , local boundary condition for @xmath44 : this is a local moduli problem @xmath47 on @xmath17 , together with a homotopically strict map @xmath48 of local moduli problems such that @xmath47 is in a certain sense a lagrangian in @xmath45 with respect to its @xmath13-shifted symplectic structure .",
    "our main result is then that under these hypotheses , there is a natural local homotopy @xmath11-shifted poisson structure :    let @xmath44 be a classical field theory on a manifold with boundary @xmath8 , and @xmath48 a proper , local boundary condition for @xmath44 . then there is a canonical local homotopy @xmath11-shifted poisson structure @xmath42 on @xmath47 , defining a weak degenerate classical field theory .",
    "we define the boundary theory associated to @xmath44 and @xmath47 as the resulting weak degenerate classical field theory on @xmath17 .",
    "finally , we formulate the notion of derived poisson centre for a weak degenerate classical field theory @xmath49 on a closed manifold @xmath3 as another local moduli problem @xmath50 on @xmath3 together with a canonical local , @xmath13-shifted symplectic structure .",
    "further we construct a ( non - degenerate ) classical field theory @xmath51 on @xmath4 which has phase space on @xmath3 given by the local derived poisson centre @xmath52 , and thus a canonical boundary condition given by the natural map @xmath53 ; by construction , this boundary condition yields the original degenerate classical field theory @xmath54 as its boundary theory , and moreover this theory is the universal such theory yielding @xmath54 as a boundary theory .    in the remaining section ,",
    "we give a detailed discussion of several interesting examples to which we can apply this formalism .",
    "we begin by discussing topological classical mechanics valued in a @xmath13-shifted symplectic formal moduli problem @xmath29 ; its phase space is just the target formal moduli problem @xmath29 itself , and its boundary conditions are simply strict derived lagrangians @xmath55 with underlying vector space map injective .",
    "more generally , in the framework of degenerate classical field theories , we can consider topological classical mechanics valued in a @xmath13-shifted poisson formal moduli problem ; the universal bulk theory of this yields the well - studied poisson sigma model .",
    "next , we discuss 3 dimensional classical chern ",
    "simons theory with gauge group @xmath56 : the phase space of this theory on a manifold @xmath8 with boundary given by a compact riemann surface @xmath57 is a perturbative encoding of @xmath58 , which inherits its @xmath13-shifted symplectic structure as a twisted cotangent bundle of @xmath59 . one natural choice of lagrangian in this space is the cotangent fibre over the trivial bundle ; the resulting boundary condition yields as a boundary theory the perturbative chiral wzw model , our first example of a degenerate classical field theory , which has corresponding @xmath1 factorization algebra giving the affine kac  moody poisson vertex algebra .",
    "another natural lagrangian in @xmath58 is the space @xmath60 of @xmath56-opers on @xmath57 , introduced by @xcite .",
    "the perturbative incarnation of this lagrangian gives a boundary condition yielding chiral toda theory , another example of an interesting degenerate field theory , as its boundary theory .",
    "the @xmath1 factorization algebra corresponding to classical chiral toda theory recovers the classical brst complex for drinfeld ",
    "sokolov reduction @xcite @xcite , yielding the classical affine @xmath5-algebra , as a poisson vertex algebra .    the universal bulk theory of chern ",
    "simons theory is the kapustin ",
    "witten twist of @xmath0 supersymmetric yang - mills , studied by @xcite to explain the geometric langlands program in terms of quantum field theory .",
    "we discuss this theory itself in detail , and define in our context a twisted version of the nahm pole boundary condition of @xcite @xcite which is s - dual to the boundary condition recovering chern  simons .",
    "we study the 3d boundary theory corresponding to this boundary condition , which we call the whittaker theory , and briefly describe its expected role in relation to geometric representation theory .",
    "finally , we wish to mention the related work of cattaneo , mnev , and reshetikhin @xcite @xcite on field theories on manifolds with boundary in the bv formalism . while this paper has some overlap with their work , and certainly shares a common general perspective , the technical results and examples presented here are nicely complimentary to those occuring in their papers .",
    "in particular , we introduce the framework of degenerate field theories , and using this we are able to describe the notion of boundary theory presented here .",
    "we would like first to thank kevin costello , for all his help in developing our perspectives on classical and quantum field theory in general .",
    "further , we would like to thank ryan grady and brian williams for several useful discussions on this material , as well as their efforts in ongoing collaboration with the authors on extensions of the present work .",
    "we also thank pavel safronov for useful discussions .      here",
    "is a collection of conventions we use throughout the work .    * a generic spacetime manifold",
    "is denoted by @xmath8 .",
    "@xmath61 is the sheaf of smooth functions on @xmath8 , @xmath62 is the sheaf of differential operators on @xmath8 , and @xmath63 is the sheaf of densities . *",
    "a generic space is denoted by @xmath29 . in particular , by abuse of notation , we write a formal moduli problem as @xmath29 . on the other hand",
    ", @xmath64 stands for a generic @xmath32-algebra .",
    "if the two notations appear in the same place , one should think of @xmath65x$ ] and @xmath66 by the fundamental theorem of deformation theory . * for a formal moduli space @xmath29 and the corresponding @xmath32 algebra @xmath67 , one defines @xmath68 to be the vector bundle corresponding to a @xmath67-module @xmath69 $ ] and @xmath70 to be corresponding to a @xmath71-module @xmath72 $ ] .",
    "* we use the script font to indicate sheafiness on @xmath8 : @xmath37 will denote a presheaf of formal moduli problems and @xmath39 a presheaf of @xmath32-algebras . for each open set @xmath34 , we write the assignments as @xmath73 and @xmath74 , respectively .",
    "* for @xmath75 sheaves of sections of vector bundles , we let @xmath76 and @xmath77 denotes the spaces of differential and polydifferential operators . * for @xmath39 the sheaf of sections of a vector bundle @xmath78 , for example those underlying the presheaves of @xmath32 algebras above",
    ", we will introduce several notations : @xmath79 will denote the sheaf of distributional sections of @xmath78 .",
    "@xmath80 will denote the cosheaf of compactly supported sections of @xmath78 .",
    "@xmath81 will denote the sheaf of sections of the dual bundle @xmath82 .",
    "@xmath83 will denote the sheaf of sections of the verdier dual bundle @xmath84 .",
    "@xmath85 will denote the cosheaf of compactly supported , distributional sections of the verdier dual bundle @xmath86 . note that this is the linear dual of @xmath39 in the category of nuclear frechet speaces .",
    "@xmath87 will denote the sheaf of sections of the infinite jet bundle @xmath88 . *",
    "the notation @xmath89 without subscript when applied to infinite dimensional vector spaces denotes the completed , projective tensor product in the category of nuclear frechet spaces .",
    "in this section , we begin by reviewing the work of costello @xcite and costello and gwilliam @xcite on classical field theories : we first define local @xmath32 algebras and their corresponding local moduli problems , the primary objects of study in their formulation of classical field theory . then",
    ", we define local @xmath32 modules and vector bundles on local moduli problems , their geometric counterpart .",
    "further , we introduce the notion of local sections of a vector bundle on a local moduli problem , and explain that the defining data of a local @xmath32 algebra , as well as the chevalley  eilenberg differentials on various related geometric spaces , can be understood in terms of local vector fields on a formal moduli problem .",
    "next , we recall the definition of a strictly local @xmath7-shifted symplectic structure introduced , and of a classical field theory in the bv formalism in these terms , as well as the main result of @xcite on classical field theories , which constructs a @xmath1 factorization algebra of local observables from the differential geometric input data of a classical field theory .",
    "finally , we state the expected equivalence between classical field theories in this sense and local action functionals satisfying the classical master equation .    in the final subsection of this section",
    ", we begin our original work by defining local ( homotopy ) @xmath11-shifted poisson structures on local moduli problems and then defining degenerate classical field theories in these terms .",
    "our first main result is theorem @xmath90 , which states that the local observables of degenerate classical field theory also form a @xmath1 factorization algebra .      as we have discussed in the introduction",
    ", we will describe the space of solutions to the euler ",
    "lagrange equations of a classical field theory in terms of a presheaf of formal moduli problems .",
    "further , it will be convenient to describe each of the formal moduli problems @xmath73 in terms of its @xmath11-shifted tangent complex @xmath91{{\\mathscr{x}}}_u$ ] .",
    "the @xmath32 algebra structure on @xmath74 encodes all the geometric information about the formal moduli problem @xmath73 , and our calculations will often be most easily understood in these terms .",
    "moreover , the locality constraint on the presheaf @xmath37 of formal moduli problems coming from the euler  lagrange equations of a classical field theory is easily phrased in terms of the corresponding presheaf of @xmath11-shifted tangent complexes @xmath39 as follows :    a _ local @xmath32 algebra _ on @xmath8 is a smooth graded vector bundle @xmath78 on @xmath8 , with sheaf of sections @xmath39 , together with a collection of polydifferential operators @xmath92\\}_{n\\in{{\\mathbb n}}^+}\\ ] ] making @xmath39 into a presheaf on @xmath8 of @xmath32 algebras .    a _ local moduli problem _",
    "@xmath37 on @xmath8 is a presheaf of formal moduli problems with presheaf of @xmath11-shifted tangent complexes @xmath93{{\\mathscr{x}}}$ ] modeled by a local @xmath32 algebra @xmath39 on @xmath8 .",
    "a local @xmath32 algebra @xmath39 is called _ abelian _ if @xmath94 for @xmath95 and _ trivial _ if @xmath94 for @xmath96 .    for each local moduli problem @xmath37 with corresponding local @xmath32 algebra @xmath93{{\\mathscr{x}}}={{\\mathscr{g}}}$ ] , we let @xmath97 , the chevalley ",
    "eilenberg cochains on @xmath39 , be the precosheaf of cdgas defined by : @xmath98)\\ ] ] equipped with the chevalley  eilenberg differential , defined using precomposition with the polydifferential operators defining the @xmath32 structure maps of @xmath39 .",
    "further , we define @xmath99 of mollified local observables , as the sub precosheaf of cdgas of @xmath41 defined by @xmath100)\\ ] ]    let @xmath101 be a vector bundle over @xmath8 with sheaf of sections @xmath102 and @xmath103 $ ] with sheaf of sections @xmath39",
    ". then we can consider @xmath39 a trivial @xmath32 algebra with corresponding local moduli problem @xmath37 satisfying @xmath104 which is simply the space of formal power series on @xmath105 .",
    "thus , we can identify @xmath73 with the affine space @xmath105 , and so think of @xmath37 as the sheaf of infinite dimensional affine spaces given by @xmath102 itself .",
    "similarly , given an abelian @xmath32 algebra @xmath106 $ ] , we can identify the corresponding local moduli problem @xmath37 with the sheaf of dg affine spaces @xmath102 .",
    "next , we define the notion of maps of local @xmath32 algebras and correspondingly of local moduli problems :    let @xmath107 be local @xmath32 algebras on @xmath8 with underlying vector bundles @xmath108 .",
    "a _ homotopically strict , strictly local map _ @xmath109 of local @xmath32 algebras is a map @xmath110 of vector bundles on @xmath8 such that the induced map on sections @xmath111 satisfies @xmath112 for each @xmath113 , where @xmath114 are the @xmath32 brackets of @xmath107 , respectively .",
    "let @xmath115 be local moduli problems .",
    "map of local moduli problems _",
    "@xmath116 is a homotopically strict , strictly local map of local @xmath32 algebras @xmath117{{\\mathscr{x}}}\\to t_0[-1]{{\\mathscr{y}}}$ ] .",
    "many examples of local moduli problems come from the formal geometry of mapping stacks , and a simple local version of the aksz formalism can be used to yield the local @xmath11-shifted symplectic structures on these local moduli problems needed to define classical field theories . towards extracting local moduli problems from the formal geometry of mapping spaces ,",
    "we give a breif discussion of the relationship between global derived and local perturbative descriptions of mapping spaces and their domain spaces :    [ rmk : algebraic vs smooth ] there are at least two categories one might want to work with in the context of field theories , that is , algebraic and smooth categories .",
    "the modern references are @xcite for the algebraic framework and @xcite @xcite for the smooth framework .",
    "the algebraic framework is handy to use and captures the global algebraic structure of the moduli spaces of the solutions to the equations of motion better , especially when a subtle algebraic structure needs to be considered , for instance , in the context of the geometric langlands program @xcite . on the other hand ,",
    "the smooth framework is more flexible and hence is amenable to dealing with a general class of field theories .",
    "the spaces of interest for a field theory include a real manifold @xmath8 or a complex manifold @xmath29 which we assume is by abuse of notation the complex points of a smooth variety @xmath29 for a nice comparison . in derived symplectic geometry",
    ", one uses the homotopy type of @xmath8 to define the betti stack @xmath118 , and we also introduce the dolbeault stack @xmath119 and the de rham stack @xmath120 . on the other hand , in the smooth category , one works with @xmath121 , @xmath122 , and @xmath123 .",
    "we list here the closest pairs to be compared in the two categories along with several moduli spaces of @xmath56-bundles one can consider on them . +    [ cols=\"^,^\",options=\"header \" , ]      + note that in the smooth perturbative description , @xmath124 and @xmath125 would have the same presentation , because @xmath126 can be written as @xmath127 if @xmath29 is regarded as a real manifold : this is the reason why we might want to use the algebraic language when describing the global moduli space and why one can freely decide the global algebraic model while working with a fixed smooth perturbative model .",
    "on the other hand , @xmath128 in the smooth category clearly has more information than the one of @xmath129 from the homotopy type of @xmath8 , which is crucial for our discussion throughout .",
    "also , @xmath127 has much better flexibility than @xmath120 which is purely of an algebraic nature .    in our text",
    ", we decide to use advantages of both presentations in the following way .",
    "first of all , from the global algebraic description of the moduli space , using the adjunction of the mapping stack @xmath130 , one can always move the algebraic dependence to the target . often times the remaining dependence on the domain",
    "is given by either @xmath131 or @xmath120 , in which case we read it as @xmath127 . in this way",
    ", we can simultaneously capture the algebraic dependence of interest and retain the flexibility we need to work in the perturbative description of field theory .",
    "specific examples are to be discussed in section [ section : examples ] .      in this subsection , we introduce the notions of local @xmath32 modules and vector bundles on local moduli problems , discuss various spaces of sections of these vector bundles , define the tangent and cotangent bundles to a local moduli problem and discuss their natural geometric features .",
    "a vector bundle over a local moduli problem should give , for each open set @xmath132 of @xmath8 , a derived space of sections @xmath133 which is a dg - module of @xmath134 in a local way . the correct model for this structure",
    "is the following :    let @xmath39 be a local @xmath32 algebra .",
    "a _ local @xmath32 module _ for @xmath39 is a smooth graded vector bundle @xmath135 on @xmath8 with sheaf of sections @xmath136 , together with a differential operator @xmath137 $ ] satisfying @xmath138 , and a collection of polydifferential operators @xmath139\\}_{n\\in{{\\mathbb n}}}\\ ] ] making @xmath136 into a presheaf on @xmath8 of @xmath32 algebra modules for the presheaf of @xmath32 algebras @xmath39 .",
    "let @xmath37 be a local moduli problem and @xmath38{{\\mathscr{x}}}$ ] .",
    "we define a _ vector bundle _ @xmath140 on @xmath37 as a local @xmath32 module @xmath136 for @xmath39 .",
    "given a local @xmath32 algebra @xmath39 and a local @xmath32 module @xmath136 for @xmath39 , we define @xmath141 and @xmath142 , the spaces of mollified and general chevalley ",
    "eilenberg cochains on @xmath39 with coefficients in @xmath136 , to be the assignments to each @xmath34 the @xmath134-dg - modules defined by @xmath143)\\otimes { { \\mathscr{v}}}_u \\quad\\quad \\text{and}\\quad\\quad \\bar c_c^\\bullet({{\\mathscr{g}}};{{\\mathscr{v}}})_u=\\widehat{{\\textup{sym}}}^\\bullet({{\\mathscr{g}}}_u^*[-1])\\otimes   ( \\bar { { \\mathscr{v}}}_c)_u\\ ] ] respectively , each equipped with their chevalley ",
    "eilenberg differentials , defined using precomposition with the polydifferential operators defining the structure maps of the local @xmath32 module .",
    "let @xmath37 be a local moduli problem , @xmath38{{\\mathscr{x}}}$ ] , and @xmath140 a local vector bundle on @xmath37 corresponding to a local @xmath32 module @xmath136 for @xmath39 .",
    "the families @xmath144 and @xmath145 of spaces of _ mollified _ and _ general sections _ of the local vector bundle @xmath140 on @xmath37 assign to each @xmath34 the @xmath134 dg - modules @xmath146 each equipped with their chevalley  eilenberg differentials .",
    "note that @xmath144 does not define a presheaf or precosheaf on @xmath8 in general , and indeed this is not our expectation .",
    "we will see below that @xmath140 defines a presheaf on @xmath8 in the category of vector bundles over formal moduli problems covering the presheaf @xmath37 ; however , the bundle maps need nt induce maps on spaces of sections .",
    "as usual , applying functorial vector space operations to a vector bundle @xmath140 on a local moduli problem @xmath37 yields new vector bundles : the categories of smooth graded vector bundles on @xmath8 and usual @xmath32 modules both admit direct sums , degree shifts , and tensor , symmetric and alternating products , and each in a compatible way , so that these operations extend naturally to vector bundles over local moduli problems ; these operations are denoted as usual .",
    "let @xmath37 a local moduli problem with @xmath38{{\\mathscr{x}}}$ ] , and let @xmath78 denote the smooth graded vector bundle underlying the local @xmath32 algebra @xmath39 .",
    "then the @xmath32 structure maps for @xmath39 define a @xmath39-module structure on @xmath147 $ ] .",
    "we define the corresponding vector bundle on @xmath37 to be the tangent bundle and denote it by @xmath148 .",
    "thus , we have @xmath149)\\ ] ] further , for each @xmath34 the vector fields on @xmath73 yield infinitesimal automorphisms of @xmath73 : we have a map @xmath150)_u\\to { { \\textup{der}}}^k({{\\mathcal{o}}}({{\\mathscr{x}}})_u)\\ ] ] where @xmath151 denotes the cohomological degree @xmath152 derivations of the cdga @xmath134 .",
    "since the relevant categories of vector spaces are infinite dimensional , one must be a bit more careful about defining the dual bundle of a bundle @xmath140 over a local moduli problem @xmath37 .",
    "we define the local verdier dual vector bundle @xmath153 on @xmath37 as corresponding to the @xmath32 module @xmath154 ; this is defined as having underlying vector bundle @xmath155 together with @xmath156\\}_{n\\in{{\\mathbb n}}}\\ ] ] which are defined by taking the formal adjoint , in the @xmath136 variables , of the polydifferential operators defining the local @xmath32 module structure maps for @xmath140 .",
    "one sense in which this is an appropriate notion of dual bundle is that there exists a pairing @xmath157 which is non - degenerate on each @xmath34 .",
    "we define the cotangent bundle to a local moduli problem @xmath37 by @xmath158 .",
    "in particular , we have @xmath159)$ ] .",
    "further , there exists a map of families of @xmath41-dg - modules @xmath160 giving the family of de rham differentials on the local moduli problem @xmath37 over @xmath8 .",
    "next , we introduce another sub precosheaf of cdgas @xmath161 of @xmath41 , which is defined by the condition that covector component the de rham differential of such a function is mollified .",
    "in particular , functions in @xmath99 which are mollified in all their variables are of this class .",
    "formally , we define @xmath161 by the pullback square : @xmath162 \\ar[d ] & \\widehat { { \\textup{sym}}}^\\bullet({{\\mathscr{g}}}^*[-1])\\otimes { { \\mathscr{g}}}^!_c \\ar[d ]   \\\\   { { \\mathcal{o}}}({{\\mathscr{x } } } ) \\ar[r]^{{d_{{\\textup{dr } } } } }    & \\bar \\gamma_c({{\\mathscr{x}}},{{\\mathbb{l}}}_{{\\mathscr{x } } } )   } \\ ] ]    finally , we define the total space of a vector bundle :    let @xmath37 be a local moduli problem with corresponding local @xmath32-algebra @xmath38{{\\mathscr{x}}}$ ] , and let @xmath140 a vector bundle on @xmath37 corresponding to a local @xmath32 module @xmath136 for @xmath39 .",
    "we define the _ total space _ @xmath163 as the local moduli problem defined by @xmath164|{{\\mathscr{v}}}|={{\\mathscr{g}}}\\ltimes { { \\mathscr{v}}}[1]\\ ] ]    note that in particular , we have an isomorphism of precosheaves of vector spaces @xmath165      in this subsection , we introduce a notion of local sections of a vector bundle over a local moduli problem . the primary motivation for this notion is proposition @xmath166 , which states that the structure maps of a local @xmath32 algebra @xmath38{{\\mathscr{x}}}$ ] can be interpreted as cohomological local vector fields on the local moduli problem @xmath167 corresponding to @xmath39 equipped with the trivial local @xmath32 structure . in the next subsection , we will also use this description together with the notion of strictly local @xmath11-shifted symplectic structure to explain how local action functionals give rise to local @xmath32 algebras describing the spaces of solutions to the euler ",
    "lagrange equations corresponding to the actions .    in general ,",
    "we define the notion of local sections of a vector bundle on a local moduli problem as follows :    let @xmath39 a local @xmath32 algebra and @xmath136 a @xmath39-module .",
    "we define the _ local chevalley ",
    "eilenberg cochains @xmath168 on @xmath39 with coefficients in @xmath136 _ by @xmath169 equipped with the restriction of the usual chevalley ",
    "eilenberg differential .",
    "let @xmath37 a local moduli problem with @xmath93{{\\mathscr{x}}}={{\\mathscr{g}}}$ ] and @xmath140 a vector bundle over @xmath37 corresponding to the @xmath39-module @xmath136 .",
    "the _ family @xmath170 of spaces of local sections of @xmath140 over @xmath37 _ is defined by @xmath171    note that since polydifferential operators restrict , spaces of local sections always form presheaves on @xmath8 . in terms of this definition",
    ", we have the following description of local @xmath32 algebra structures :    [ dtla ] let @xmath78 be a smooth vector bundle on @xmath8 with sheaf of sections @xmath39 , and let @xmath167 be the sheaf of affine spaces corresponding to @xmath39 thought of as a trivial local @xmath32 algebra .",
    "the following are equivalent :    * a collection of polydifferential operators @xmath172\\}_{n\\in{{\\mathbb n}}^+}\\ ] ] making @xmath39 into a local @xmath32 algebra . * a vector field @xmath173)_m\\ ] ] with zero constant coefficient term and satisfying @xmath174 .      in this subsection",
    "we define the notion of a strictly local shifted symplectic structure @xmath40 on local moduli problem @xmath37 , and define a ( non - degenerate ) classical field theory as a local moduli problem equipped with such a structure .",
    "further , we recall the main result of @xcite on classical field theories , which states that the observables of a classical field theory form a @xmath1 factorization algebra on the underlying manifold .",
    "let @xmath37 a local moduli problem with @xmath93{{\\mathscr{x}}}={{\\mathscr{g}}}$ ] a local @xmath32 algebra with underlying vector bundle @xmath78 .",
    "strictly local @xmath152-shifted symplectic structure _",
    "@xmath40 on @xmath37 is a bundle map @xmath175\\ ] ] which is an isomorphism on each fibre , antisymmetric in @xmath78 , and satisfies @xmath176    we let @xmath177 $ ] denote the inverse of @xmath40 , which is interpreted as a non - degenerate shifted poisson tensor on @xmath37 ; we will see that such @xmath178 can be interpreted as a closed element of an appropriate space of bivector fields .",
    "the equation @xmath179 is simply the statement that @xmath180 is a symplectic vector field for @xmath40 , which we interpret equivalently in terms of @xmath178 , and for which the precise definition follows from proposition @xmath181 .",
    "we use the terminology strictly local to emphasize that @xmath40 and correspondingly @xmath178 are required to be bundle maps ; when we generalize this notion to that of local @xmath11-shifted poisson structures , we allow for arbitrary differential operators between the sheaves of sections of these bundles .    given a strictly local symplectic structure on @xmath37",
    ", we obtain an isomorphism of families of @xmath41 dg - modules between the spaces of regular sections @xmath182):\\pi_\\omega\\ ] ] and analogously between the spaces of general and local sections . note that this claim for local sections uses the hypothesis that @xmath40 is given by a bundle map .",
    "we now make the main definition of this section :    a _ classical field theory _ on @xmath8 is a local moduli problem @xmath37 over @xmath8 equipped with a strictly local @xmath11-shifted symplectic structure @xmath40 on @xmath37 .",
    "note that for quantizing classical field theories in the formalism of costello and gwilliam , one also needs to require an ellipticity constraint on the differential operators defining the local moduli problem ; we will not discuss this subtlety here .",
    "the motivation for this definition is the equivalence in proposition @xmath183 given in the following subsection , which states that classical field theories in this sense are equivalent to the presheaves of formal moduli spaces of solutions to the euler  lagrange equations of a local action functional .",
    "further , the precosheaves of spaces of functions @xmath41 corresponding to a classical field theory inherit a non - degenerate poisson bracket from the local symplectic form .",
    "the spaces of functions @xmath134 are interpreted as the observables of the classical field theory supported on the open set @xmath34 , and their poisson bracket satisfies a physical locality condition which is crucial for quantization :    let @xmath37 be a local moduli problem over @xmath8 and @xmath40 a strictly local @xmath11-shifted symplectic structure on @xmath37 . then @xmath161 defines a @xmath1 factorization algebra on @xmath8 , with poisson bracket @xmath184 for @xmath185 .",
    "in particular , for @xmath186 disjoint open subsets of @xmath8 , the precosheaf @xmath161 of @xmath1 algebras satisfies @xmath187 for arbitrary @xmath188 , where @xmath189 , and similarly for @xmath135 , are the precosheaf structure maps .      in this section",
    "we recall the equivalence between classical field theories in the bv formalism as defined above and local action functionals satisfying the classical master equation ; this equivalence is the primary motivation for the given definitions of local moduli problem and classical field theory .",
    "let @xmath101 be a smooth graded vector bundle on @xmath8 with sheaf of sections @xmath102 , which we think of as the space of all fields and antifields in the bv formalism , and let @xmath190 denote the sheaf of sections of the infinite jet bundle @xmath191 of @xmath101 .",
    "recall that there is a natural flat connection on @xmath191 making @xmath190 into a sheaf of left modules for the sheaf of differential operators @xmath62 on @xmath8 , and that @xmath63 the sheaf of densities on @xmath8 is naturally a right @xmath62 module .",
    "further , letting @xmath103 $ ] and @xmath39 the sheaf of sections of @xmath78 , recall that the formal moduli problem @xmath167 corresponding to @xmath39 describes @xmath102 as a sheaf of affine spaces , on which local action functionals should in some sense define functions .",
    "the sheaf of local action functionals on @xmath102 is defined by @xmath192 where @xmath193 denotes dual in the category of sheaves of @xmath61 modules .",
    "note that @xmath194 is the sheaf of sections of a vector bundle whose fibre over each point @xmath195 given by the space of formal power series in the values of the field and its derivatives at the point @xmath196 , which is essentially the usual space of lagrangian functions without a fixed density to integrate against . taking the tensor product over @xmath62 with the sheaf of densities gives the space of lagrangian densities modulo the natural relations imposed from integration by parts , which is precisely the desired space of local action functionals .",
    "note that elements of @xmath197 do not define functions on @xmath105 for each @xmath34 because there is no compactness condition to guarentee the integral converges .",
    "however , the lagrangian densities do define functions on the spaces of compactly supported sections , and via this their de rham differentials can be understood as local vector fields :    there exists a natural de rham differential map @xmath198    now , given a strictly local @xmath11-shifted symplectic pairing @xmath40 on @xmath199 , corresponding physically to the duality pairing on @xmath102 between fields and anti - fields , we in particular obtain an isomorphism @xmath200)\\ ] ] from this , we define the hamiltonian vector field corresponding to @xmath201 as @xmath202 . from proposition @xmath166",
    ", we have that such a vector field is equivalent to a local @xmath32 algebra structure on @xmath203 $ ] given that it satisfies @xmath204 . toward stating an equivalent condition on action functionals to ensure their hamiltonian vector fields are hamiltonian , we would like to introduce a @xmath1 bracket on the space of local action functionals . however , the space of local action functionals is not closed under multiplication as functions , and so we only obtain a lie algebra structure :    there exists a differentiation pairing @xmath205)\\otimes { { \\mathcal{o}}}_{{\\textup{loc}}}(\\tilde { { \\mathscr{x}}})\\to   { { \\mathcal{o}}}_{{\\textup{loc}}}(\\tilde { { \\mathscr{x}}})[1]\\quad\\quad\\text{denoted by}\\quad\\quad q\\otimes f \\to q(f)\\ ] ] such that the bracket @xmath206 $ ] defined by @xmath207 defines a 1-shifted lie algebra structure on @xmath208 .",
    "further , the map @xmath209)\\ ] ] is a map of 1-shifted lie algebras .    in terms of this bracket , we have @xmath210 which vanishes for all @xmath34 and @xmath211 if and only if @xmath212 .",
    "thus , we have    [ slla ] let @xmath78 be a smooth vector bundle on @xmath8 with sheaf of sections @xmath39 , @xmath167 be the sheaf of affine spaces corresponding to @xmath39 thought of as a trivial local @xmath32 algebra , and @xmath40 a strictly local @xmath11-shifted symplectic structure on @xmath199 .",
    "the following are equivalent :    * a collection of polydifferential operators @xmath172\\}_{n\\in{{\\mathbb n}}^+}\\ ] ] making @xmath39 into a local @xmath32 algebra such that @xmath40 defines a strictly local symplectic structure on the local moduli problem @xmath37 corresponding to @xmath39 . * a vector field @xmath173)_m\\ ] ] with zero constant coefficient term and satisfying @xmath174 and @xmath179 * an action functional @xmath213 satisfying @xmath212 .",
    "again , the precise definitions needed to make sense of the expression @xmath214 are given in terms of the corresponding poisson tensor @xmath178 in proposition @xmath181 below .",
    "motivated by the above proposition , we recover the classical definition :    an action functional @xmath215 satisfies the _ classical master equation _ if @xmath216      this subsection marks the beginning of the original work of this paper .",
    "we formulate the definition of spaces of multilocal @xmath11-shifted polyvector fields , describe their basic geometric properties , and in terms of these give the key definition of general local @xmath11-shifted poisson structures on local moduli problems and degenerate classical field theories .",
    "further , this section includes the first main theorem of this paper , which states that the observables of a degenerate classical field theory yield a @xmath1 factorization algebra on the underlying space .",
    "let @xmath37 be a local moduli problem and @xmath38{{\\mathscr{x}}}$ ] the corresponding local @xmath32 algebra with underlying vector bundle @xmath78 .",
    "define the _ sheaf of @xmath11-shifted , multilocal @xmath217-polyvector fields _ by @xmath218)\\otimes_{c^\\infty_m } { { \\textup{sym}}}^j({{\\mathcal{j}}}({{\\mathscr{g}}}^!)^\\vee[1])\\ ] ] equipped with the chevalley ",
    "eilenberg differential defined below .",
    "note that these spaces define sheaves on @xmath8 , as with the local spaces of sections defined previously .",
    "we will denote the space of all @xmath11-shifted , multilocal polyvector fields , and its completion , by @xmath219    in order to define the notion of multilocal poisson bivector , and to introduce the chevalley ",
    "eilenberg differential on all the spaces of multilocal polyvector fields , we will need to discuss the schouten bracket of multilocal vector fields .",
    "[ sb ] there exists a map , called the schouten bracket , of sheaves of vector spaces on @xmath3 @xmath220:\\gamma_{m{{\\textup{loc}}}}({{\\mathscr{x}}},{{\\textup{sym}}}^j{{\\mathbb t}}_{{\\mathscr{x}}})\\otimes\\gamma_{m{{\\textup{loc}}}}({{\\mathscr{x}}},{{\\textup{sym}}}^l{{\\mathbb t}}_{{\\mathscr{x}}})\\to \\gamma_{m{{\\textup{loc}}}}({{\\mathscr{x}}},{{\\textup{sym}}}^{j+l-1}{{\\mathbb t}}_{{\\mathscr{x}}})\\ ] ] giving @xmath221 the structure of a graded lie algebra .",
    "note that as with usual polyvector fields , @xmath222 forms a sub lie algebra of @xmath223 and this acts on @xmath224 for each @xmath225 .",
    "the other observation necessary for defining the chevalley  eilenberg differentials on these spaces of polyvector fields is that the notions of local and multilocal vector fields coincide :    [ lvi ] there exists an isomorphism of presheaves of lie algebras @xmath226 where the lie algebra structure on @xmath222 is given by the schouten bracket above , and the lie algebra structure on @xmath227 is inherited from @xmath228 .",
    "in particular , the image under this isomorphism of the vector field @xmath229)$ ] defining the local @xmath32 structure on @xmath39 defines a cohomological degree @xmath230 differential on @xmath231 for each @xmath232 , which we define to be the chevalley ",
    "eilenberg differential . in keeping with the usual interpretation of the schouten bracket",
    ", we use the notation @xmath233\\ ] ] for @xmath234 and @xmath235 .",
    "we can now define the desired spaces of @xmath11-shifted ( homotopy ) poisson structures on local moduli problems :    let @xmath37 be a local moduli problem with @xmath38{{\\mathscr{x}}}$ ] the corresponding local @xmath32 algebra .",
    "a _ local @xmath11-shifted poisson structure _ on @xmath37 is a cohomological degree @xmath230 multilocal bivector field @xmath236\\ ] ] such that @xmath237=0\\ ] ]    more generally , a _ local @xmath11-shifted homotopy poisson structure _ on @xmath37 is a cohomological degree @xmath230 , non - homogeneous , multilocal polyvector field @xmath238\\ ] ] satisfying the equations @xmath239=0\\ ] ] defining a @xmath11-shifted homotopy poisson structure .",
    "as we will see , this notion strongly generalizes the notion of strictly local @xmath11-shifted symplectic structure on a local moduli problem @xmath37 and thus the notion of classical field theory , and will allow us to consider many interesting examples which do not satisfy the previously given definition of classical field theory .",
    "our main theorem about local @xmath11-shifted poisson structures is the following :    [ dftf ] let @xmath37 be a local moduli problem over @xmath8 , equipped with a local @xmath11-shifted poisson structure @xmath240 $ ] . then @xmath161 defines a @xmath1 factorization algebra on @xmath8 .    in particular , we still have the desired physical property , crucial for constructing factorization algebras at the quatum level , that for @xmath186 disjoint open subsets of @xmath8 , the precosheaf @xmath161 of @xmath1 algebras satisfies @xmath241 for arbitrary @xmath188 , where @xmath189 , and similarly for @xmath135 , are the precosheaf structure maps",
    ". motivated by this , we make the following definition :    a _ degenerate classical field theory _ is a local moduli problem @xmath37 together with a strict local dg @xmath1 structure on @xmath37 .",
    "we will discuss many examples of degenerate classical field theories , and see that they provide models at the classical level of many interesting quantum field theories which do not admit lagrangian descriptions .",
    "in this section , we introduce the notions of phase spaces and boundary conditions for classical field theories on manifolds with boundary in the language outlined in the previous section .",
    "further , given a fixed classical field theory on a manifold with boundary together with a choice of boundary condition for it , we construct the corresponding boundary theory as a degenerate classical field theory on the boundary , as described in the introduction .",
    "finally , we construct the universal bulk theory of a given degenerate classical field theory .",
    "we begin by giving a construction , in the setting of finite type formal moduli problems , of a model of the expected @xmath242-shifted poisson structure on a certain class of derived lagrangians in @xmath7-shifted symplectic spaces , and recall the notion of the derived poisson centre of an @xmath242-shifted poisson space .",
    "this first subsection provides an essential toy model of the main constructions of the remainder of the section .      in this subsection",
    "we give an explicit model for the @xmath242-shifted homotopy poisson structure , and corresponding homotopy @xmath243 structure , on a derived lagrangian in an @xmath7-shifted symplectic formal moduli problem .",
    "since our goal is to prove an analogue of this result in the setting of local moduli problems , where we insist on having strict models for all of the objects involed , we only provide this construction in an analogously strict sense and do not discuss its homotopical invariance .",
    "closely related constructions to this one have appeared in @xcite , @xcite .",
    "let @xmath29 be a formal moduli problem over @xmath152 with corresponding @xmath32 algebra @xmath33x$ ] finite dimensional as a vector space and denote the @xmath32 brackets of @xmath67 by @xmath244 .",
    "further , let @xmath245)$ ] a strict , constant - coefficient , @xmath7-shifted symplectic structure on @xmath29 , which is determined by a linear map @xmath246\\ ] ] which is an isomorphism of vector spaces satisfying an invariance condition in terms of the @xmath32 brackets @xmath247 ; this condition can be described as requiring @xmath248 , for @xmath249)$ ] the degree @xmath230 cohomological vector field corresponding to the chevalley ",
    "eilenberg differential on @xmath250 .",
    "the condition @xmath248 can also be interpreted as requiring that the vector field @xmath251 be symplectic with respect to @xmath40 , and in the formal setting any such vector field is a hamiltonian vector field corresponding to a cohomological degree @xmath252 function @xmath253 $ ] .",
    "further , the condition @xmath254 is equivalent to the condition @xmath212 ; this is the finite dimensional toy model of the result stated in proposition @xmath183 , although given for arbitrary @xmath7 .",
    "let @xmath255 be another formal moduli problem over @xmath152 with corresponding @xmath32 algebra @xmath256l_+$ ] finite dimensional and denote the @xmath32 brackets of @xmath257 by @xmath258 .",
    "further , let @xmath259 be a map of formal moduli problems such that the corresponding @xmath32 map @xmath260 is strict , and is injective as a map of the underlying vector spaces . under these conditions ,",
    "the map @xmath55 is lagrangian if and only if the induced map @xmath261 $ ] is zero .",
    "we will call such lagrangians as _ proper_.    to construct the @xmath242-shifted homotopy poisson structure on a proper lagrangian @xmath55 , choose a complimentary vector subspace @xmath262 such that the induced map @xmath263 $ ] also vanishes .",
    "this choice is convenient for the explicit desciption we give here , but the construction will in fact only depend on it up to homotopy .",
    "now , the vector space isomorphism @xmath264 $ ] induces an isomorphism @xmath265\\ ] ] so that we have an isomorphism of vector spaces @xmath266 $ ] . in terms of this isomorphism",
    ", we have the isomorphism of vector spaces @xmath267 = \\widehat{{\\textup{sym}}}^\\bullet ( { { \\mathfrak{g}}}^*[-1])[n+1 ] \\cong \\widehat{{\\textup{sym}}}^\\bullet({{\\mathfrak{l}}}_+^*[-1])\\otimes_k \\widehat{{\\textup{sym}}}^\\bullet({{\\mathfrak{l}}}_+[1-n])[n+1]\\ ] ] and thus we can decompose @xmath253 $ ] as @xmath268)\\otimes_k { { \\textup{sym}}}^j({{\\mathfrak{l}}}_+[1-n])[n+1 ] \\cong \\gamma(l_+ , { { \\textup{sym}}}^j ( { { \\mathbb t}}_{l_+}[-n]))[n+1]\\ ] ] so that we obtain a sequence of elements of the @xmath269 shift of the @xmath242-shifted polyvector fields on @xmath255 . note that the lagrangian condition implies @xmath270 always vanishes , and that @xmath271 \\quad\\quad\\text{and}\\quad\\quad s_2 \\in \\gamma(l_+ , { { \\textup{sym}}}^2 { { \\mathbb t}}_{l_+})[1-n]\\ ] ] although these are not a priori closed elements for the cohomological differentials on these complexes .",
    "further , the condition that @xmath272 is a strict @xmath32 map which is injective on the underlying vector spaces implies that the vector field @xmath273 must equal the cohomological vector field @xmath274 defining the @xmath32 structure on @xmath257 .",
    "now , the classical master equation on @xmath6 can be decomposed into components corresponding to symmetric power in @xmath257 as above , yielding a sequence of equations relating the @xmath275 . from these , we obtain :    let @xmath29 a formal moduli problem with strict @xmath7-shifted symplectic structure @xmath40 and with @xmath32 structure given by an action functional @xmath253 $ ] , let @xmath276 a proper lagrangian , and fix a complimentary vector space @xmath277 to @xmath272 .",
    "define @xmath278 for @xmath279 the components of @xmath6 in the decomposition above induced by @xmath280 .",
    "then @xmath42 defines an @xmath242-shifted homotopy poisson structure on @xmath255 .",
    "an alternative way of understanding this construction is via the notion of derived poisson centre , which comes from thinking of a lagrangian as a coisotropic rather than isotropic subspace .",
    "this notion has appeared in @xcite in the affine case ; we will define it here for formal moduli problems and later give the analogous construction for local moduli problems .",
    "let @xmath78 be a formal moduli problem with @xmath281l$ ] the corresponding @xmath32-algebra and let @xmath282))[n+1]\\ ] ] recall that the @xmath32 @xmath283-module corresponding to the vector bundle @xmath284 $ ] on @xmath78 is @xmath285 $ ] so that we have an isomorphism of @xmath286 algebras @xmath287l ) = c^\\bullet({{\\mathfrak{l}}}\\ltimes { { \\mathfrak{l}}}^*[n-2];k ) \\cong \\gamma(l , \\widehat{{\\textup{sym}}}^\\bullet({{\\mathbb t}}_l[-n]))\\ ] ] where @xmath288l:=|{{\\mathbb{l}}}_l[n]|$ ] , and the later space is the completion of the space of @xmath242-shifted polyvector fields of all degrees , equipped with the schouten bracket , which is of cohomological degree @xmath289 . under this isomorphism , @xmath42 corresponds to a cohomological degree @xmath252 function on @xmath288l$ ] , which determines a cohomological degree @xmath230 hamiltonian vector field @xmath290l,{{\\mathbb t}}_{t^*[n]l}[1])$ ] .",
    "we have :    let @xmath78 be a formal moduli problem and @xmath291))[n+1]$ ] an @xmath242-shifted polyvector field of mixed degree @xmath292 and of cohomological degree @xmath252 .",
    "then @xmath293l}+q_{\\bar\\pi } \\quad \\in \\   \\gamma(t^*[n]l,{{\\mathbb t}}_{t^*[n]l}[1])\\ ] ] is square zero if and only if @xmath42 defines an @xmath242-shifted homotopy poisson structure on @xmath78 , where @xmath294l}$ ] is the cohomological vector field defining the @xmath32-algebra structure on @xmath93(t^*[n]l)$ ] .    in the case where @xmath42 does define an @xmath242-shifted homotopy poisson structure , the above cohomological vector field",
    "defines a new @xmath32 algebra yielding a formal moduli problem deforming @xmath288l$ ] , which is a twisted cotangent bundle , denoted by @xmath295l $ ] .",
    "further , since the deformation is hamiltonian , the deformed cohomological vector field is again symplectic for the @xmath7-shifted symplectic structure on @xmath288l$ ] and thus the twisted cotangent bundle @xmath295l$ ] is also an @xmath7-shifted symplectic formal moduli problem .",
    "further , note that such twistings preserve the zero section map @xmath296l$ ] .    in terms of this space , the model for the @xmath242-shifted homotopy poisson structure on a proper lagrangian @xmath297 , for @xmath29 an @xmath7-shifted symplectic formal moduli problem",
    ", can be understood as follows : there is a unique twisted cotangent bundle @xmath298 deforming @xmath299 which has total space isomorphic to @xmath29 as an @xmath7-shifted symplectic formal moduli problem , intertwining the maps @xmath297 and @xmath300l$ ] ; the hamiltonian function corresponding to the deformation of the cohomological vector field defining this twisting is precisely the same data as an @xmath242-shifted homotopy poisson structure on @xmath78 . in this sense",
    ", the construction of @xmath295l$ ] from the poisson structure on @xmath78 is an inverse to the procedure of constructing the @xmath242-shifted homotopy poisson structure on @xmath78 described above for proper lagrangians @xmath297 .",
    "let @xmath29 an @xmath7-shifted symplectic formal moduli problem and @xmath301 a lagrangian for @xmath29 with @xmath242-shifted poisson structure @xmath42 .",
    "then there exists a map @xmath302l\\to x$ ] of @xmath7-shifted symplectic formal moduli problems such that @xmath303 ^ -{f } \\ar[drr]_{{\\sigma_0 } } & & t^*_{\\bar\\pi}[n]l \\ar[d]^{{\\tilde f } }   \\\\    & & x } \\ ] ] commutes .",
    "motivated by this universal property , we make the following definition :    let @xmath78 be a formal moduli problem with @xmath242-shifted homotopy poisson structure @xmath42 .",
    "the _ derived poisson centre _",
    "@xmath304 of @xmath78 is the @xmath7-shifted symplectic formal moduli problem @xmath305l\\ ] ]      in this subsection , we define the phase space of a classical field theory on a manifold with boundary , in terms of the formalism of local moduli problems , using a simplifying assumption that the classical field theory is topological in the direction normal to the boundary of the manifold .",
    "let @xmath8 be a manifold with boundary , @xmath306 , @xmath307 , and @xmath308 the interior of a collar neighbourhood of @xmath17 in @xmath8 .",
    "we define a classical field theory @xmath44 on @xmath8 as simply one defined on @xmath309 , and will define the phase space of @xmath44 on @xmath3 as a local moduli problem @xmath45 equipped with an appropriately local @xmath13-shifted symplectic structure . to simplify this problem ,",
    "we restrict our attention to field theories which are topological in the direction normal to @xmath57 , in a precise sense described below , which will in particular ensure the @xmath13-shifted symplectic structure on @xmath310 is strictly local .",
    "we first state a condition on the underlying local moduli problem of the classical field theory , followed by an additional constraint on the symplectic form in the case that the preceeding condition is satisfied :    let @xmath37 a local moduli problem on a manifold with boundary @xmath8 , with @xmath38{{\\mathscr{x}}}$ ] , @xmath78 the vector bundle underlying @xmath39 , and @xmath247 the @xmath32 brackets on @xmath39 .",
    "then @xmath37 is _ topological normal to @xmath3 _ if @xmath311 for @xmath312 a vector bundle on @xmath3 with sheaf of sections @xmath313 , and moreover @xmath314 for @xmath315\\}_{n\\in{{\\mathbb n}}^+}$ ] a family of polydifferential operators making @xmath313 into a local @xmath32 algebra on @xmath3 , and where @xmath316 denotes the multiplication of @xmath7 elements .",
    "let @xmath44 a classical field theory on @xmath8 such that @xmath37 is topological normal to @xmath3 .",
    "then @xmath44 is _ topological normal to @xmath3 _ if @xmath317=l^![-3]\\ ] ] for @xmath318 $ ] a strictly local @xmath13-shifted symplectic structure on the local moduli problem @xmath45 corresponding to @xmath313 , and @xmath319 $ ] is the inverse of the isomorphism induced by contraction with the volume form .    under these conditions ,",
    "we define the phase space of the classical field theory :    let @xmath44 a classical field theory on @xmath8 which is topological normal to @xmath320 .",
    "the _ phase space of @xmath44 on @xmath3 _ is the local moduli problem @xmath45 over @xmath3 corresponding to @xmath313 above , equipped with the required strictly local @xmath13-shifted symplectic structure @xmath46 on @xmath45 .",
    "note that the @xmath13-shifted , strictly local symplectic structure @xmath321 $ ] induces an isomorphism @xmath322 so that we ahve a @xmath13-shifted symplectic variant of proposition @xmath183 , giving an equivalence between the data of the @xmath32 brackets @xmath323 and a cohomological degree @xmath230 local action functional @xmath324 $ ] satisfying the @xmath13-shifted classical master equation @xmath325    any local moduli problem over @xmath3 equipped with a strictly local @xmath13-shifted symplectic structure has classical field theory on @xmath326 giving it as the phase space , with underlying local moduli problem defined by @xmath327 .",
    "this fact will be essentially used in the construction of the universal bulk theory .      in this subsection",
    ", we define the notion of a local boundary condition for a classical field theory on a manifold with boundary .",
    "let @xmath8 be a manifold with boundary @xmath306 , @xmath328 a classical field theory on @xmath8 which is topological normal to @xmath3 , and @xmath329 the phase space of @xmath44 on @xmath3 .",
    "a _ proper local boundary condition _ for @xmath330 on @xmath3 is :    * a local moduli problem @xmath47 over @xmath3 , with @xmath331{{\\mathscr{l}}}_+$ ] the defining local @xmath32 algebra with underlying vector bundle denoted @xmath255 * a homotopically strict , strictly local map @xmath332 of local moduli problems over @xmath3 , with underlying bundle map @xmath333 injective . *",
    "a choice of complimentary subbundle @xmath334 to @xmath255 in @xmath312    such that @xmath255 and @xmath335 are lagrangian subbundles of @xmath312 with respect the strictly local @xmath13-shifted symplectic structure @xmath336 , in the sense that @xmath337 .",
    "unpacking this definition , we have that the @xmath32 brackets @xmath338\\}_{n\\in{{\\mathbb n}}^+}$ ] defining @xmath47 are given by @xmath339 where @xmath340 are the @xmath32 brackets defining @xmath45 .",
    "further , since @xmath318 $ ] is an isomorphism , the lagrangian condition implies that @xmath341 \\quad\\quad\\text{and}\\quad\\quad \\omega^{{\\partial}}|_{l_-}:l_-\\xrightarrow{\\cong } l_+^![-2]\\ ] ] have the stated codomains and moreover are isomorphisms of vector bundles on @xmath3 .      in this subsection",
    "we explain our main construction : given a classical field theory @xmath44 on a manifold @xmath8 with boundary @xmath342 such that @xmath44 is topological normal to @xmath3 , for each proper , local boundary condition @xmath48 , we construct a local @xmath242-shifted homotopy poisson structure on @xmath47 .",
    "in particular , when this @xmath1 structure is strict , @xmath47 defines a degenerate classical field theory on @xmath3 .",
    "the construction proceeds precisely as in the finite dimensional toy model given in subsection @xmath343 :    let @xmath38{{\\mathscr{x}}},{{\\mathscr{g}}}^{{\\partial}}={{\\mathbb t}}_0[-1]{{\\mathscr{x}}}^{{\\partial}}$ ] and @xmath331{{\\mathscr{l}}}_+$ ] , and let @xmath344 denote the sheaf of sections of the chosen complimentary lagrangian subbundle @xmath335 to @xmath255 in @xmath312 .",
    "then we have a direct sum decomposition as sheaves of @xmath345-modules @xmath346 , and from the bundle isomorphism @xmath347 $ ] we further obtain @xmath348 $ ] in the same category .",
    "this gives a further isomorphisms of sheaves of @xmath345-modules @xmath349)\\otimes_{c^\\infty_m } \\widehat { { \\textup{sym}}}^\\bullet ( { { \\mathcal{j}}}({{\\mathscr{l}}}_+^!)^\\vee[1 ] ) \\cong \\gamma_{m{{\\textup{loc}}}}({{\\mathscr{l}}}_+ , \\widehat{{\\textup{sym}}}^\\bullet { { \\mathbb t}}_{{{\\mathscr{l}}}_+})\\ ] ] as in the finite dimensional case , we can now decompose the cohomological degree @xmath230 action @xmath350 $ ] describing the local @xmath32 structure on @xmath313 in terms of the polyvector field degree : @xmath351\\ ] ] from the arguements given in the finite dimensional case , we have that @xmath352 and that @xmath353)$ ] corresponds to @xmath354)$ ] , the vector field defining the @xmath32 structure on @xmath355 , under the isomorphism given in proposition @xmath356 .",
    "moreover , we have    let @xmath8 be a manifold with boundary @xmath342 , @xmath44 a classical field theory on @xmath8 which is topological normal to @xmath3 , @xmath357 $ ] the action functional encoding the @xmath32 structure on @xmath45 , and @xmath48 a proper boundary condition",
    ". then @xmath358\\ ] ] defines a local @xmath242-shifted homotopy poisson structure on @xmath47 .",
    "as we will see , in many examples the homotopy @xmath1 structure on @xmath47 is in fact a strict dg @xmath1 structure , and in this case we refer to the resulting degenerate classical field theory @xmath359 on @xmath3 as the boundary theory of @xmath44 on @xmath8 .      in this subsection",
    "we define the notion of the local derived poisson centre of a local moduli problem equipped with a local @xmath242-shifted homotopy poisson structure .",
    "further , we formulate the definition of the universal bulk theory corresponding to such an object .",
    "let @xmath54 be a local moduli problem over @xmath3 and @xmath360 $ ] a local @xmath242-shifted homotopy poisson structure on @xmath54 .",
    "further , let @xmath361 denote the local moduli problem representing the total space of the cotangent bundle to @xmath54 .",
    "note that we have an isomorphism of precosheaves on @xmath3 of lie algebras @xmath362 where the lie algebra structure on @xmath363 is inherited from the local @xmath13-shifted poisson structure corresponding to the canonical strictly local @xmath13-shifted symplectic structure on @xmath364 , and the lie algebra structure on @xmath365 is given by the schouten bracket .",
    "we can thus interpret @xmath42 as a cohomological degree @xmath230 local action functional , with corresponding hamiltonian vector field @xmath366)$ ] and we have :    let @xmath54 be local moduli problem over @xmath3 and @xmath360 $ ] .",
    "then @xmath367)\\ ] ] is square zero if and only if @xmath42 defines a local @xmath242-shifted homotopy poisson structure on @xmath54 , where @xmath368 is the local vector field defining the local @xmath32 structure on @xmath93 t^*{{\\mathscr{l}}}$ ] .    in the case",
    "where @xmath42 does define a homotopy @xmath1 structure on @xmath54 , the above local cohomological vector field defines a local @xmath32 algebra on @xmath3 , and we let @xmath369 denote the corresponding local moduli problem on @xmath3 . as in the finite dimensional toy model , the strictly local , @xmath13-shifted symplectic form on @xmath364 induces one on @xmath369 , and we have a homotopically strict , strictly local map @xmath370 of local moduli problems on @xmath3 .",
    "let @xmath54 be local moduli problem over @xmath3 and @xmath360 $ ] a local @xmath242-shifted homotopy poisson structure on @xmath54 .",
    "the _ local derived poisson centre _ is the local moduli problem @xmath371 over @xmath3 , equipped with its induced strictly local @xmath13-shifted symplectic structure .",
    "as discussed in subsection @xmath372 , for any local moduli problem @xmath373 on @xmath3 with a strictly local , @xmath13-shifted symplectic form @xmath40 , there is a natural classical field theory on @xmath4 with underlying moduli problem @xmath327 , yielding @xmath374 as its phase space .",
    "we now formulate the definition of the universal bulk theory :    let @xmath54 be local moduli problem over @xmath3 and @xmath360 $ ] a local @xmath242-shifted homotopy poisson structure on @xmath54 .",
    "we define the _ universal bulk theory _ corresponding to @xmath49 to be @xmath375 where @xmath52 is the local derived poisson centre of @xmath376 .",
    "in this section , we systematically present many examples of the formalism developed in the previous sections .",
    "we proceed by first motivating the construction in terms of global derived stacks , then explaining the precise description of the field theory in terms of the language introduced in the previous sections .",
    "our first example of a classical field theory is topological classical mechanics , the classical limit of topological quantum mechanics .",
    "this example demonstrates the main ideas of the previous sections in the simplest possible setting .",
    "let @xmath135 be a ( @xmath13-shifted ) symplectic vector space .",
    "topological classical mechanics valued in @xmath135 is a 1-dimensional aksz - type classical field theory described by @xmath377 .",
    "the phase space of this theory on @xmath378 is just the symplectic vector space @xmath135 and its boundary conditions are lagrangian subspaces @xmath379 .",
    "more generally , this construction works for any symplectic variety @xmath29 , and working perturbatively around a point @xmath380 is equivalent to the linear case with @xmath381 .    for the local , formal description ,",
    "let @xmath382 $ ] be the shift of @xmath135 by @xmath383 , viewed as a trivial @xmath32 algebra ; this should be thought of as the @xmath11-shifted tangent complex @xmath384x$ ] to a point @xmath380 .",
    "then @xmath385 defines a local @xmath32 algebra and the symplectic form on @xmath135 gives rise to a strictly local @xmath11-shifted symplectic structure on @xmath39 via the usual aksz construction .",
    "more generally , let @xmath67 be an arbitrary @xmath32 algebra and @xmath386 $ ] define a @xmath13-shifted symplectic structure on the formal moduli problem @xmath29 corresponding to @xmath67 ; this analogously describes the @xmath11-shifted tangent complex to an arbitrary , potentially singular and stacky point in a global derived stack @xmath199",
    ". then the local @xmath32 algebra @xmath387 again has a local @xmath11-shifted symplectic structure coming from the aksz construction , and the corresponding perturbative classical field theory describes topological classical mechanics in perturbation theory around the point @xmath388 , or equivalently , topological classical mechanics valued in the formal neighbourhood of @xmath196 in @xmath199 ; this theory was studied in detail in @xcite . the phase space of this theory on @xmath389 is the @xmath13-shifted symplectic formal moduli problem @xmath29 corresponding to the @xmath32 algebra @xmath67 , and its boundary conditions are just proper derived lagrangians @xmath390 .",
    "further , the boundary theory corresponding to a given boundary condition @xmath390 is just the formal moduli problem @xmath78 , equipped with its @xmath11-shifted poisson structure",
    ". note that since @xmath391 is @xmath13 dimensional , all of the locality conditions on the phase space and boundary conditions are trivial , and thus the boundary theory construction in this case reduces to the finite dimensional model presented in subsection @xmath343 .",
    "moreover , within the framework of degenerate classical field theories , we can generalize this to consider topological classical mechanics valued in a formal moduli problem @xmath29 with an arbitrary @xmath13-shifted ( homotopy ) poisson structure @xmath30 . the universal bulk theory constructed from this more general class",
    "is given by @xmath392 x ) $ ] , which is the well - studied poisson @xmath393-model",
    "@xcite @xcite @xcite .      *",
    "( 2-dimensional topological yang  mills theory ) in the case @xmath394 for a semi - simple group @xmath56 , the classical field theory described by @xmath395 b{{\\mathfrak{g}}})$ ] is called 2-dimensional topological yang  mills theory .",
    "this theory is going to play a crucial role for our description of derived hamiltonian reduction from the physical point of view .",
    "of course , nothing prevents one from considering an @xmath32 algebra @xmath67 here . *",
    "( b - model ) for a calabi ",
    "yau manifold @xmath29 , the classical field theory underlying the b - model is described by @xmath395 x   ) $ ] .      for a semi - simple group @xmath56 , chern  simons theory with gauge group @xmath56 on a 3-manifold @xmath8",
    "has @xmath396 as the solutions to the equations of motion on @xmath8 .",
    "the phase space of chern - simons on a manifold @xmath8 with boundary @xmath397 is @xmath398 .",
    "recall from remark [ rmk : algebraic vs smooth ] that in the perturbative setting , @xmath398 is indistinguishable from @xmath58 , so we might as well think of working with @xmath58 as the phase space on @xmath57 . in this way , the boundary conditions we consider are going to admit natural descriptions and their relationship with the kapustin  witten twists and geometric langlands program will become clear .",
    "indeed , the discussion on the universal bulk theory of chern  simons theory , which we claim to be kapustin  witten theory , is deferred to the next subsection because it deserves its own treatment , admitting another interesting boundary theory .    as the moduli space of solutions to the equations of motion on @xmath34 is @xmath399 , a presheaf @xmath37 of formal moduli problems on @xmath8",
    "is given by @xmath400 for a fixed flat bundle @xmath401 which by abuse of notation is regarded as a point in @xmath399 for each open set @xmath132 , for instance , the trivial flat bundle .",
    "accordingly , we have @xmath402 , \\text { and } l_n=0 \\text { for } n\\geq 3.\\ ] ]    a symplectic pairing @xmath403 $ ] or @xmath404 $ ] is given by @xmath405 using the integration pairing on @xmath406 and a symmetric invariant non - degenerate pairing on @xmath67 .",
    "one can check that the action functional is @xmath407 \\right)\\ ] ] for @xmath408 .",
    "we introduce critical chern  simons theory , which we claim to be the limit of chern ",
    "simons theory compatible with a chosen complex structure on a boundary @xmath57 . in order to see the dependence on a complex structure clearly as discussed in remark [ rmk : algebraic vs smooth ]",
    ", we first use a trick of treating chern  simons theory as topological classical mechanics with the target @xmath58 using the adjunction of a mapping stack : @xmath411 in this perspective , critical chern  simons theory is topological classical mechanics with the target @xmath412 , where we think of the level as corresponding to the twisting parameter of @xmath413 and the critical level corresponding to no twisting .",
    "hence , as a theory over @xmath414 , it is described by @xmath415 , \\text { and } l_n=0\\text { for } n\\geq 3.\\ ] ] the phase space @xmath409 is given by @xmath416 ,   \\text { and } l_n=0\\text { for } n\\geq 3.\\ ] ] note that critical chern ",
    "simons theory is not topological in the @xmath57 direction .      as @xmath413 is a twisted cotangent bundle of the moduli space @xmath59 of holomorphic @xmath56-bundles on @xmath57",
    ", it has the twisted cotangent fiber @xmath417 at the trivial bundle as a proper lagrangian , and hence a classical boundary condition of chern  simons theory on @xmath418 .",
    "as the @xmath11-shifted tangent complex of @xmath59 is @xmath419 , the one for @xmath417 is @xmath420 , { { \\bar\\partial}})$ ] .",
    "locally , we can express @xmath421 ^ -{{{\\bar\\partial } } }   \\ar[dr]_-{{{\\partial } } }   &   \\omega^{0,1}_\\sigma \\otimes { { \\mathfrak{g}}}\\ar[dr]^{{{\\partial } } } \\\\ & \\omega^{1,0}_\\sigma \\otimes { { \\mathfrak{g}}}\\ar[r]^-{{{\\bar\\partial } } }     &   \\omega^{1,1}_\\sigma \\otimes { { \\mathfrak{g } } } , } \\ ] ] and can choose the local boundary condition @xmath422 ^ -{{{\\bar\\partial } } }     &   \\omega^{1,1}_\\sigma \\otimes { { \\mathfrak{g}}}).}$ ]    thus , the induced boundary theory has underlying local @xmath32 algebra @xmath423\\oplus(\\omega^{1,1}_\\sigma\\otimes{{\\mathfrak{g}}})[-2 ] \\qquad \\text{with } \\quad l_1 = { { \\bar\\partial}}_\\sigma \\otimes { { \\mathbbm{1}}}_{{\\mathfrak{g}}}\\text { and } l_n=0\\text { for } n\\geq 2\\ ] ] note that this is an abelian local @xmath32 algebra , which is the appropriate notion of free field theory in the degenerate context .",
    "moreover , the induced local @xmath11-shifted poisson structure on @xmath424 is given by @xmath425\\ ] ] under the identifications @xmath426 ) { { \\ \\hookrightarrow\\ } } { { \\textup{diff}}}({{\\mathscr{g}}}^!,{{\\mathscr{g}}})[2 ]   \\\\ \\wedge\\otimes [ \\ ; , \\ ; ] & \\in\\ { { \\textup{dens}}}_m\\otimes_{{{\\mathcal{d}}}_m } { { \\mathcal{j}}}({{\\mathscr{g}}})^\\vee[-1]\\otimes_{c^\\infty_m } { { \\textup{sym}}}^2({{\\mathcal{j}}}({{\\mathscr{g}}}^!)^\\vee[1 ] ) { { \\ \\hookrightarrow\\ } } { { \\textup{polydiff } } } ( { { \\mathscr{g}}}\\otimes { { \\mathscr{g}}}^!,{{\\mathscr{g}}})[1 ] \\end{aligned}\\ ] ]    this poisson structure is evidently a @xmath11-shifted analogue of the standard poisson structure on the classical affine kac - moody poisson vertex algebra ; further , our techniques apply globally over riemann surfaces , so the data we recover is actually analogous to a coisson algebra . moreover , the underlying local moduli problem is free , and free bv quantization of this degenerate classical field theory yields the twisted factorization envelope construction of @xmath427 , for which the associated factorization algebra of quantum observables has been shown to recover the affine kac - moody vertex algebra .",
    "an explicit proof of this claim will be given in a forthcoming note .",
    "if we instead chose the lagrangian @xmath428 ^ -{{{\\partial } } }     &   \\omega^{1,1}_\\sigma \\otimes { { \\mathfrak{g } } } ) , } $ ] this would define the anti - chiral wzw model . by reducing chern ",
    "simons theory along an interval with fixed boundary conditions giving the chiral and anti - chiral wzw models , respectively , one can obtain the full wzw model .",
    "another famous lagrangian of @xmath58 is the moduli space @xmath60 of opers .",
    "recall that an oper is a holomorphic @xmath56-connection with a @xmath429-reduction modulo @xmath3-valued gauge transformations .",
    "a crucial difference from other examples considered is that an oper is in particular an irreducible , flat @xmath56-connection and hence we can not perturb around the trivial flat connection , which is completely reducible .",
    "rather , for an @xmath430 embedding in @xmath67 , say @xmath431 , we use an element @xmath432 to define a holomorphic connection @xmath433 on the trivial bundle , which is an oper .",
    "we work around this flat connection so that the shifted tangent complex @xmath434 has differential @xmath435dz$ ] given by the induced connection on the adjoint bundle , for which we use the same notation .",
    "perturbatively around @xmath436 , the phase space of chern - simons is given by @xmath437 ^ -{{{\\partial } } }   \\ar[drr]^-{{{\\partial } } }   & &   ( \\omega^{1,\\bullet}_\\sigma \\otimes { { \\mathfrak{n}}}_- , { { \\bar\\partial}})\\\\ ( \\omega^{0,\\bullet}_\\sigma \\otimes { { \\mathfrak{n } } } , { { \\bar\\partial } } ) \\ar[rr]^-{{{\\partial}}+ [ f,-]dz }     & &   ( \\omega^{1,\\bullet}_\\sigma \\otimes \\mathfrak{b } , { { \\bar\\partial } } ) , } \\ ] ] in which the moduli space of opers corresponds to the lagrangian @xmath438 ^ -{{{\\partial}}+ [ f,-]dz }     & &   ( \\omega^{1,\\bullet}_\\sigma \\otimes \\mathfrak{b } , { { \\bar\\partial } } ) } \\right)$ ] .",
    "the resulting local @xmath32 algebra for the boundary theory is given by @xmath439 \\qquad \\text{with } \\quad l_1 = d_f \\otimes { { \\mathbbm{1}}}_{{\\mathfrak{g } } } , \\ ; l_2 = \\wedge \\otimes [ \\;,\\ ; ] ,   \\text { and } l_n=0\\text { for } n\\geq 3 , \\ ] ] where we abuse notation to write @xmath440 $ ] to mean the restriction of the bracket on @xmath67 , which is non - degenerate only when pairing between @xmath441 and @xmath442 .    for the critical level",
    ", one has to consider the higgs version of opers @xmath443 inside @xmath444 . accordingly",
    ", critical toda theory is described by @xmath445 \\qquad \\text{with } \\quad l_1 = [ f,-]dz \\otimes { { \\mathbbm{1}}}_{{\\mathfrak{g } } } , \\ ; l_2 = \\wedge \\otimes [ \\;,\\ ; ] ,   \\text { and } l_n=0\\text { for } n\\geq 3 .\\ ] ]        another important example we mention here is kapustin - witten @xmath446 twists of @xmath0 supersymmetric yang - mills theory @xcite . in the work of the second author with c. elliott @xcite ,",
    "rigorous mathematical descriptions of the a- and b - twist as classical field theory are provided .",
    "indeed , the same method can be applied to identify all the @xmath446 twists .    for the interest of geometric langlands program",
    ", it would be wise to work after compactification along a fixed smooth proper curve @xmath57 .",
    "in other words , we consider the moduli space of solutions to the equations of motion for the case where the spacetime 4-manifold @xmath29 is of the form @xmath447 with a compact riemann surface @xmath57 . except for the a - twist ,",
    "they are all described by @xmath448 { \\mathrm}{flat}_g(\\sigma )   ) $ ] , where @xmath449 is the poisson structure of @xmath58 and @xmath450 { \\mathrm}{flat}_g(\\sigma ) $ ] is the twisted cotangent bundle by @xmath449 . here",
    "different @xmath449 corresponds to different twisting parameter : in particular , @xmath451 corresponds to the b - twist .",
    "similarly , a - twist is described by @xmath452 { \\mathrm}{higgs}_g(\\sigma )   ) $ ] , where @xmath30 is the poisson structure of @xmath444 .    to compare with chern ",
    "simons theory , recall the description of chern  simons theory in terms of topological classical mechanics after compactification along @xmath57 , that is , @xmath453 .",
    "its universal bulk theory is @xmath392 { \\mathrm}{flat}_g(\\sigma )   ) $ ] , where @xmath449 is the poisson structure of @xmath58 . as the level @xmath454 of chern  simons theory determines the poisson structure of @xmath58 , we know that the universal bulk theory of chern  simons theory is the kapustin  witten twists",
    ". moreover , the limit @xmath455 corresponds to the limit @xmath456 , and hence the classical limit of chern ",
    "simons theory gives the b - twist . on the other hand , critical chern ",
    "simons theory @xmath457 has the a - twist @xmath458 { \\mathrm}{higgs}_g(\\sigma )   ) $ ] as the universal bulk theory .",
    "one might wonder if @xmath459 { \\mathrm}{higgs}_g(\\sigma )   ) $ ] also has a natural interpretation in terms of quantum field theory .",
    "indeed , it is a version of the kapustin twist of the 4d @xmath0 theory as first introduced by kapustin in the context of @xmath460 theory @xcite .",
    "one has the analogy @xmath461    finally , let us describe the kapustin ",
    "witten theory in a local formal setting . for the b - twist @xmath462bg )",
    "$ ] , one has @xmath463),\\ ] ] where the @xmath32 structure on @xmath464 $ ] is best understood from the identification @xmath465= { { \\mathbb{t}}}_0 [ -1 ] ( t^*[3]bg ) $ ] . for a generic twist @xmath466bg )",
    "$ ] , one has @xmath467",
    "\\ar[r]^-{{{\\mathbbm{1 } } } }   &   \\omega^\\bullet_x \\otimes { { \\mathfrak{g}}}}\\right),\\ ] ] where the poisson vector becomes the identity map understood as the differential .",
    "in particular , the theory is perturbatively trivial .",
    "similarly , for the kapustin twist @xmath459 { \\mathrm}{higgs}_g(\\sigma )   ) $ ] , one has @xmath468),\\ ] ] and for the a - twist @xmath469 { \\mathrm}{higgs}_g(\\sigma )   ) $ ] , one has @xmath470",
    "\\ar[r]^-{{{\\mathbbm{1 } } } }   &   ( \\omega^\\bullet_c , d_c ) \\otimes ( \\omega^{\\bullet,\\bullet}_\\sigma , { { \\bar\\partial } } ) \\otimes { { \\mathfrak{g}}}}\\right),\\ ] ] which again is perturbatively trivial .",
    "we introduce another boundary theory of kapustin  witten theory . again after compactification along @xmath57 , kapustin ",
    "witten theory is described by @xmath448 { \\mathrm}{flat}_g(\\sigma )   ) $ ] .",
    "we consider a 3-dimensional theory @xmath471 ( { \\mathrm}{op}_g(\\sigma)/ { \\mathrm}{flat}_g(\\sigma ) ) ) $ ] , where @xmath472 ( { \\mathrm}{op}_g(\\sigma)/ { \\mathrm}{flat}_g(\\sigma))$ ] is the shifted conormal bundle of @xmath60 in @xmath473{\\mathrm}{flat}_g(\\sigma)$ ] .",
    "we call this theory a _ whittaker theory_.    in the work of gaiotto  witten @xcite ,",
    "s - dual boundary condition of chern ",
    "simons theory is described , under the name of nahm pole boundary conditions .",
    "we think of what we wrote as its nice clean description . moreover , in the work of gaitsgory @xcite , the equivalence of factorization categories between representations of quantum group and the twisted whittaker category was proved .",
    "we claim that it is the mathematical manifestation of the s - duality : that is , chern  simons theory with gauge group @xmath56 and level @xmath454 is s - dual to whittaker theory with gauge group @xmath474 and level @xmath475 , under which the duality between the categories of line defects realizes the equivalence of gaitsgory .",
    "this is the reason why we call it whittaker theory .",
    "we will further investigate this theory in future work .    in the local formal setting ,",
    "whittaker theory for the b - twist , or level @xmath476 , described by the mapping stack @xmath477 ( { \\mathrm}{op}_g(\\sigma)/ { \\mathrm}{flat}_g(\\sigma ) ) ) $ ] becomes @xmath478 ) , \\ ] ] because @xmath479 ( { \\mathrm}{op}_g(\\sigma)/ { \\mathrm}{flat}_g(\\sigma ) ) $ ] can be identified with @xmath480   { \\mathrm}{op}_g(\\sigma)$ ] under the identification @xmath481{\\mathrm}{flat}_g(\\sigma ) \\simeq t[1 ] { \\mathrm}{flat}_g(\\sigma)$ ] . for a generic level @xmath471 ( { \\mathrm}{op}_g(\\sigma)/ { \\mathrm}{flat}_g(\\sigma ) ) ) $ ] , one has @xmath482",
    "\\ar[r]^-{{{\\mathbbm{1 } } } }   &   \\omega^1_{m^1 } \\otimes { { \\mathscr{g}}}_{\\text{toda }   } } \\right),\\ ] ] which is perturbatively trivial .",
    "also , critical whittaker theory is described by @xmath483 ( { \\mathrm}{op}^ { { \\mathrm}{higgs } } _ g(\\sigma)/ { \\mathrm}{higgs}_g(\\sigma ) ) ) $ ] .",
    "then the local formal description is @xmath484   \\ar[r]^-{{{\\mathbbm{1 } } } }   &   \\omega^1_{m^1 } \\otimes { { \\mathscr{g}}}_{\\text{ctoda }   } } \\right).\\ ] ]"
  ],
  "abstract_text": [
    "<S> we introduce a framework for degenerate classical field theories in the bv formalism , which allows us to discuss many interesting examples of theories which do not admit a lagrangian description . </S>",
    "<S> further , we study phase spaces and boundary conditions for classical field theories on manifolds with boundary , and from a fixed classical field theory together with a choice of boundary condition , construct a degenerate classical field theory on the boundary . </S>",
    "<S> we apply these ideas to many physically interesting examples including the kapustin  </S>",
    "<S> witten twists of @xmath0 supersymmetric yang  mills , chern  simons theory , the chiral wess  zumino  witten model , chiral toda theory , and a new 3d classical field theory called whittaker theory . </S>"
  ]
}