{
  "article_text": [
    "random sketches have become an important tool in building unusually efficient algorithms for approximate representation of large data sets .",
    "one of their major applications is to data streams .",
    "to put our work into perspective , we start by describing briefly the data streaming context .",
    "we then list some of the major contributions and discuss our results .",
    "consider an integer  valued signal @xmath18 , defined over a `` very large '' domain , so that it is not feasible to store and/or process it in real time .",
    "the signal is updated or acquired sequentially in time , starting with the zero signal at time zero .",
    "following , for example , gilbert _",
    "et al .  _",
    "@xcite ( see also muthukrishnan @xcite and the seminal work of henzinger , raghavan and rajagopalan @xcite ) , we focus on two streaming models : _ ( i ) _ _ cash register _ , and _",
    "( ii ) _ _ aggregate_. in case _ ( i ) _ , data pairs @xmath19 are observed successively ( in arbitrary order in @xmath20 ) and on each data arrival , the @xmath21th component of the signal is updated incrementally ( like a cash register ) : @xmath22 . in case _",
    "( ii ) _ , the data pairs @xmath23 are observed directly ( again in arbitrary order in @xmath20 ) . in this case , a given index @xmath20 appears at most once and the corresponding @xmath24 s are not updated incrementally multiple times .",
    "model _ ( i ) _ is more general and more widely used .",
    "both models , however , have found important applications in many areas such as on - line processing of large data bases , network traffic monitoring , computational geometry , etc .",
    "( see , e.g.  gilbert , kotidis , muthukrishnan and strauss @xcite , cormode and muthukrishnan @xcite , indyk @xcite ) .",
    "much of the work on sketches was motivated by the seminal paper of alon , matias and szegedy @xcite . for a detailed review of methodologies and applications in this emerging area in theoretical computer science see muthukrishnan @xcite .",
    "_ random sketches _ are statistical summaries of the signal @xmath1 , which can be updated sequentially ( as the stream is observed ) using little processing time , processing space and computations .",
    "many algorithms involving random sketches have been proposed , see e.g.  muthukrishnan @xcite and the references therein .",
    "they provide as a common feature , approximations to various queries ( functionals ) on the signal @xmath1 , within a factor of @xmath25 , with probability at least @xmath26 , where @xmath27 and @xmath28 are `` small '' error and probability parameters chosen in advance .",
    "typically , this is realized by algorithms consuming an amount @xmath29 of storage , and even smaller order of processing time per stream item @xmath1 . here",
    "@xmath30 denotes the size of the range of the values @xmath31 in the cash register model or @xmath24 in the aggregate model . in many applications ,",
    "one may be willing to sacrifice deterministic approximations at the expense of stochastic approximations , which are valid with high probability and are easy to compute .",
    "indyk @xcite has pioneered the use of @xmath12stable distributions in random sketches ( see also , feingenbaum , kannan , strauss and viswanathan @xcite , fong and strauss @xcite , cormode @xcite and cormode and muthukrishnan @xcite ) .",
    "the @xmath12stable ( @xmath13 ) sketch of the signal @xmath1 is defined as : [ e : sj ] s_j(f ) : = _ i=1^n f(i ) x_j(i ) ,  j=1,  ,k , where the @xmath4 random variables @xmath32 are independent with a @xmath12stable distribution .",
    "the stability ( sum  stability , see the appendix ) property of the @xmath12stable distribution implies that [ e : sj - stable ] s_j(f ) _",
    "i=1^n |f(i)|^p ) ^1/p x_1(1 ) = f__p x_1(1 ) ,  j=1 ,  , k , where @xmath16 means equal in distribution .",
    "also , by the linearity of the inner product , the sketch @xmath33 of @xmath1 can be updated sequentially , in both , _ cash register _ and _ aggregate _ streaming models with @xmath34 operations per pair @xmath19 or @xmath35 , where the @xmath32 s are generated efficiently , on demand ( see below ) . in his seminal work , indyk @xcite ,",
    "used @xmath36 ( cauchy distributions for the @xmath32 s ) and the median statistic @xmath37 to estimate the norm @xmath38 of the signal .",
    "it was shown that for any @xmath39 and @xmath28 , the norm @xmath40 is estimated within a factor of @xmath41 with probability at least @xmath26 , provided that [ e : indyk ] k ( 1/ ) ) . moreover , by using the results of nisan @xcite , these estimates were shown to be realized with @xmath42 bits of storage , needed primarily to store _ truly random bits _ or _",
    "seeds _ for the pseudorandom generator . roughly speaking ,",
    "these seed bits are used to efficiently generate any one of the @xmath43 variables @xmath5 s on demand , when a data pair @xmath19 or @xmath35 is observed .    exploiting the linearity of sketches and the properties of the stable distributions , indyk @xcite also developed approximate embeddings of high  dimensional signals @xmath44 in @xmath45 , where @xmath46 .",
    "this allowed efficient approximate solutions to difficult nearest neighbor search algorithms in high dimensions , see e.g.  datar _",
    "other authors also used stable distributions to construct efficient stochastic approximation algorithms , see e.g.  cormode and muthukrishnan @xcite .    here , we propose a novel type of random sketches , called _ max ",
    "stable sketches_. namely , consider a _",
    "non  negative _ signal @xmath47 .",
    "the @xmath6max  stable sketch of @xmath1 is defined as : [ e : ej ] e_j(f ) : = _ 1i n f(i ) z_j(i ) ,  j=1,  ,k , where the @xmath4 random variables @xmath5 are independent standard @xmath6frchet , that is , [ e : frechet ] \\ { z_j(i ) x } = _ ( x ) : = \\ {    ll \\ { -x^- } & ,  x>0 + 0 & ,  x0 ,    . and where @xmath11 is an arbitrary positive parameter .    the max ",
    "stable sketches can only be maintained in the _ aggregate _ streaming model , that is , when any given index value @xmath20 is observed at most once in the stream .",
    "this is so because the operation `` max '' is not linear .",
    "indeed , if the signal values @xmath24 were incremented sequentially ( as in the cash register model ) , then to be able to update the max  stable sketch of @xmath1 , one would have to know the whole signal thus far , which is not feasible .",
    "other than the _ aggregate _ model , a natural streaming context for max ",
    "stable sketches is when the _ cash register _ is updated in a max  incremental fashion : @xmath48 in this setting , max ",
    "stable sketches can be maintained sequentially .    in the spirit of @xmath12stable sketches , the max  stability of",
    "the @xmath5 s implies ( see the appendix ) : @xmath49 therefore , as in indyk @xcite , for any @xmath39 and @xmath28 , we can estimate the norm @xmath50 within a factor of @xmath25 , with probability at least @xmath26 , if @xmath51 following the ideas in indyk @xcite , we show by using results of nisan @xcite , that this can be realized with real algorithms of space @xmath52 processing time per stream item @xmath35 . note that @xmath11 can be chosen arbitrarily large , whereas one is limited to @xmath13 in the @xmath12stable case . since the max",
    "stable sketches are non  linear , being able to approximate @xmath53 for any @xmath11 , does not imply approximation of the distance @xmath54 in the @xmath10norm of two signals based on their sketches . therefore , our results do not contradict the findings of saks and sun @xcite .",
    "the recent paper of indyk and woodruff @xcite provides algorithms for approximating @xmath10norms for @xmath55 which essentially match the theoretical lower bounds on the complexity in saks and sun @xcite .",
    "the strengths of max ",
    "stable sketches lie in approximating max ",
    "linear functionals .    .",
    "cormode and muthukrishnan @xcite , consider the problem of estimating the norm of the dominant of several signals , that is , _",
    "dominance norms_. given non ",
    "negative signals @xmath56 @xmath57 , the goal is to estimate the norm @xmath58 , where [ e : f - star ] f^*(i ) : = _ 1rr f_r(i ) ,  1i n. such type of problems are of interest when monitoring internet traffic , for example , where @xmath59 stands for the number of packets transmitted by ip address @xmath20 in its @xmath60th transmission .",
    "the signal @xmath61 then represents _ worst case scenario _ in terms of traffic load on the network and its norm or various other characteristics are of interest to network administrators .",
    "other applications of dominance norms arise when studying electric grid loads and in finance ( for more details , see cormode and muthukrishnan @xcite and the references therein ) .",
    "a novel area of applications of max ",
    "stable sketches arises in privacy , see ishai , malkin , strauss and wright @xcite .",
    "suppose that we only have access to the max ",
    "stable sketches @xmath62 of the signals @xmath63 in . in view of _ max",
    " linearity _ , we then have @xmath64 that is , one can recover the max  stable sketch of the dominant signal @xmath61 by taking component  wise maxima of the sketches of the signals @xmath65 .",
    "therefore , the quantity @xmath66 , which is the dominance norm of the signals @xmath65 , can be readily estimated from the sketch @xmath67 by using medians or sample moments . moreover , this can be done with precision within a factor of @xmath68 and with probability at least @xmath26 , provided that @xmath69 . in practice , one deals with finite precision calculations and pseudo  random number generators of bounded space . in this setting , as in the case of approximating plain norms , one can compute dominance norms by using an algorithm with processing space @xmath70 , and @xmath71 per item processing time .",
    "our approach consumes less randomness , space and improves significantly on the processing time in the method of cormode and muthukrishnan @xcite ( see theorem 2 therein ) .",
    "in addition to norms and dominance norms , one can use max ",
    "stable sketches to recover large values of the signal exactly .",
    "we construct a point estimate @xmath72 of @xmath73 , @xmath74 , based on an _ ideal precision _ @xmath6max  stable sketch of size @xmath75 , such that for any @xmath39 and @xmath28 , [ e : fhat ] \\ { f(i_0 ) = f(i_0 ) } 1- ,  f(i_0 ) > f _ _  k . real algorithms of space @xmath76 and smaller order of per stream item processing time exist . here",
    "@xmath77 and the signal @xmath1 is supposed to take integer values .",
    "observe that one can easily maintain the largest @xmath78 values of the signal exactly .",
    "although , our method does not improve on the naive approach , the proposed estimator may be useful when the signal is not directly observable but its max  stable sketch is available .",
    "this is particularly useful in applications related to privacy , see the forthcoming paper of ishai , malkin , strauss and wright @xcite .",
    "important ideas exploiting min ",
    "stability have been successfully used in the literature .",
    "cohen @xcite assigns to the items of a positive signal independent exponential variables with parameters equal to the signal values .",
    "the minima of independent exponentials is an exponential variable with parameter equal to the sum of the parameters of the individual components .",
    "therefore , by keeping only the minima of such exponential variables corresponding to certain ranges of the signal values , one can estimate the sum of the signal values in these ranges .",
    "this can be done efficiently , in small space and time , by taking independent copies of such minima , see theorem 2.3 in cohen @xcite .",
    "this approach can be viewed as a dual approach to that of the max  stable sketches .",
    "indeed , the reciprocal of an exponential variable is @xmath6frchet with @xmath79 .",
    "we provide here a more general framework where @xmath8 can be arbitrary positive parameter and therefore we can estimate not only sums but @xmath10norms .",
    "in fact , going a step further , we estimate efficiently _ dominance norms _ of several signals and show that relatively large values can be recovered exactly with high probability .",
    "alon , duffield , lund and thorup @xcite suggest an interesting random priority sampling scheme .",
    "it assigns random priority @xmath80 to an item @xmath20 which has weight @xmath81 , where the @xmath82 s are independent uniformly distributed random numbers in @xmath83 . in our scenario",
    "@xmath84 corresponds to the signal value @xmath24 .",
    "however , instead of taking maxima of the priorities @xmath85 over @xmath20 , these authors consider the top@xmath86 largest priority items . by using a statistic , relative to the @xmath87st largest priority , they can estimate efficiently and with high probability the sum of the weights @xmath84 for relatively small @xmath88 s .",
    "this is an interesting approach and it differs from that of the max ",
    "stable sketches in two major aspects : _",
    "( i ) _ the random priorities @xmath85 have pareto distribution with heavy ",
    "tail exponent @xmath89 , whereas we employ frchet distributions to be able to use their max ",
    "stability property ; _ ( ii ) _ in priority sampling , one keeps the top@xmath86 values , whereas max ",
    "stable sketches keep different realizations of the maximal `` priority '' .",
    "the second difference between max ",
    "stable sketches and the priority sampling scheme of alon , duffield , lund and thorup @xcite is crucial since the top@xmath86 priorities are _ dependent _ random variables .",
    "this fact , we believe , makes the rigorous analysis of the variance in the priority sampling scheme rather difficult ( see conjecture 1 in the last reference ) .",
    "nevertheless , priority sampling involves generating only @xmath90 independent realizations , where @xmath90 is the size of the signal .",
    "it is thus computationally more efficient than our method and the method of cohen @xcite ( see also section 1.5.6 in alon , duffield , lund and thorup @xcite for a discussion ) .    in summary , the max ",
    "stable sketches proposed here are natural when dealing with _ dominance norms _ and @xmath10norms for arbitrarily large @xmath11 . their properties , moreover , can be established precisely and rigorously related to the nature of the signal @xmath1 . max ",
    "stable sketches complement and improve on existing techniques , and can offer a new `` non  linear '' dimension in stochastic approximation algorithms .",
    "we show here that max ",
    "stable sketches can be used to estimate norms and certain distances between two signals . for simplicity",
    ", we deal here with ideal precision sketches . in an extended version of the paper",
    "we show that efficient real algorithms exist by using the results of nisan @xcite .",
    "we first focus on estimating the norm @xmath91 from the @xmath6max  stable sketch @xmath2 of @xmath1 ( see ) . introduce the quantities @xmath92 for some @xmath93 , and @xmath94 see and below for motivation . by using the max  stability property of @xmath6frchet distributions , we obtain the following result .    [",
    "t : norm ] let @xmath39 and @xmath28 .",
    "then , for all @xmath95 , we have @xmath96 provided that @xmath97 . here",
    "the constant @xmath98 depends only on @xmath8 and @xmath99 , in the case of the @xmath100 estimator .",
    "the idea of the proof is given in the appendix .",
    "it relies on the fact that @xmath101 have finite variances for all @xmath95 and uses the central limit theorem .",
    "more general results where @xmath102 will be given in an extended version of the paper .",
    "the last result indicates that the quantities @xmath103 and @xmath104 approximate @xmath50 up to a factor of @xmath68 with probability at least @xmath26 . this can be achieved with an ideal  precision sketch of size @xmath105 .",
    "consider two signals @xmath106 and let @xmath107 be their _ ideal precision _ max ",
    "stable sketches .",
    "observe that the max ",
    "stable sketches are non  linear and therefore even if @xmath108 , the sketch @xmath109 does not equal @xmath110 .",
    "nevertheless , one can introduce a distance between the signals @xmath1 and @xmath111 , other than the norm @xmath54 which can be computed by using the sketches @xmath112 and @xmath113 .    consider the functional @xmath114",
    "one can verify that @xmath115 is a metric on @xmath116 .",
    "this metric , rather than the norm @xmath54 , is more natural when dealing with max  stable sketches ( see , stoev and taqqu @xcite ) .",
    "observe that @xmath117 by the max ",
    "linearity of max ",
    "stable sketches , we get @xmath118 ( see , below ) . therefore , the terms in the last expression can be estimated in terms the estimators @xmath100 and @xmath119 above .",
    "namely , we define @xmath120 for some @xmath93 , and @xmath121    [ t : dist ] let @xmath39 , @xmath28 and @xmath122 .",
    "if [ e : separation ] _ ( f , g ) f g _ _ ^ , then , for all @xmath123 , we have [ e : dist ] \\{|(f , g ) /(f , g ) - 1 | ( / ) } 1 - 3 , provided that @xmath124 . here the constant @xmath98 depends only on @xmath8 and @xmath99 , in the case of the @xmath125 estimator . here",
    "@xmath126 stands for either @xmath127 or @xmath125 .",
    "the idea of the proof is given in the appendix .",
    "the condition is essential .",
    "indeed , by taking indicator signals @xmath128 and @xmath129 , we get that @xmath130 therefore , if condition of type was not present , one would be able to efficiently estimate the intersection of the two sets @xmath131 and @xmath132 with small relative error , which is proved to be a hard problem ( see , razborov @xcite and also section 4 in cormode and muthukrishnan @xcite ) .",
    "let now @xmath56 @xmath57 be @xmath133 non  negative signals defined over large domain .",
    "our goal is to approximate their dominance @xmath10norm , that is , the norm @xmath134 of the signal @xmath135    as argued in the introduction , such problems arise in internet traffic monitoring , electric grid management and also in finance . the seminal paper of cormode and muthukrishnan @xcite addresses the problem of dominance norm estimation in the special case @xmath79 .",
    "it was shown therein that the problem has a small space and time approximate solution , valid with high probability .",
    "the main tool used used in the last work are @xmath12(sum)stable sketches of the data where the stability index @xmath136 is taken to have very small values . here , we propose an alternative solution to the dominance norm problem , which is superior in terms of time and space consumption and also works when dealing with @xmath137 for an arbitrary @xmath11 . in the end of this section",
    ", we also show the connection between our approach and that of cormode and muthukrishnan @xcite .",
    "let @xmath138 be the @xmath6max  stable sketches of the signals @xmath139 . by max ",
    "linearity of the max ",
    "stable sketch : [ e : f * ] e_j ( f^ * ) = _",
    "1rr e_j(f_r ) ,  j , where @xmath140 , @xmath141 .",
    "hence , by using sample medians for example , we get @xmath142    our first results on @xmath10norm approximation imply :    [ t : dom ] let @xmath39 and @xmath28 . for all @xmath95 : @xmath143 provided @xmath144 here",
    "the constant @xmath98 depends only on @xmath8 and @xmath99 , in the case of the @xmath145 estimator .",
    "the proof of this result follows from the max ",
    "linearity of the max ",
    "stable sketches ( see ) and theorem [ t : norm ] above .",
    "we now make some remarks on the differences between our approach and that of cormode and muthukrishnan @xcite .",
    "* remarks : *    * note that the statement of lemma 1 in the last reference is mathematically incorrect .",
    "one can not have @xmath8 in the right  hand side since limit has been taken as @xmath146 in the left ",
    "hand side therein .",
    "the correct statement is as follows : + _ let @xmath147 be symmetric @xmath6stable random variables with constant scale coefficients @xmath148 .",
    "then , as @xmath146 , we have @xmath149 where @xmath150 is a standard @xmath151frchet random variable , that is , @xmath152 . observe that @xmath153 , where @xmath154 is an exponential random variable with mean @xmath89 .",
    "see exercise 1.29 , p.  54 in samorodnitsky and taqqu @xcite . _",
    "+ therefore , the continuity of the cumulative distribution function of the limit @xmath150 implies that the medians of the distributions of @xmath155 converge , as @xmath156 , to the median of @xmath150 which is @xmath157 ( see below ) .",
    "( note that here we use @xmath8 as in cormode and muthukrishnan @xcite whereas the parameter @xmath8 plays a different role in relation below . ) * the method of cormode and muthukrishnan @xcite uses @xmath12(sum)stable sketches with very small @xmath136 .",
    "the @xmath12stable distributions involved in these sketches have infinite moments of all orders greater than @xmath158 and in practice take extremely large values .",
    "this poses a number of practical challenges in storing and in fact precisely generating these random sketches .",
    "our method does involve heavy  tailed random variables but they are not as _ extremely heavy  tailed _ and have good computational properties .",
    "furthermore , frchet distributions can be simulated more efficiently than sum  stable distributions ( see the appendix ) . therefore ,",
    "in practice we expect our method to be more robust than the one of cormode and muthukrishnan @xcite .",
    "* the storage and per item processing times of our method are significantly less than those of cormode and muthukrishnan @xcite .",
    "max  stable sketches can be also used to recover relatively large values of the signal exactly with high probability .",
    "this problem has in fact a deterministic solution by using a naive algorithm in small space and time .",
    "namely , as the signal is being observed ( in the aggregate or time series model ) we simply maintain a vector of the top@xmath159 largest values .",
    "stable sketches however , can be very helpful if no direct access to the signal is available either due to security , computational , power or privacy restrictions ( see ishai , malkin , strauss and wright @xcite ) .",
    "we first present the main ideas using ideal algorithms which assume infinite precision and random variables which can be perfectly generated .",
    "we then remove these idealizations .",
    "consider a non  negative signal @xmath160 .",
    "let @xmath11 and let @xmath161 be an _",
    "ideal _ @xmath6max  stable sketch of @xmath1 defined in . given an @xmath162 , set [ e : gk ] g_j(i_0 ) : = e_j(f ) z_j(i_0 ) = _ 1i n f(i ) z_j(i ) z_j(i_0 ) ,  j=1 ,  , k , and define the _ point query _",
    "estimate @xmath72 as the smallest of the @xmath163 .",
    "if @xmath164 denote the sorted @xmath165 s : @xmath166 then the _ point query _",
    "estimate @xmath72 is [ e : fhat - def ] f(i_0 ) : = g_(1)(i_0 ) = _ 1j k g_j ( i_0 ) .",
    "we also introduce the following criterion : @xmath167 which serves as a proxy for @xmath168 , as indicated in the following theorem .",
    "[ t : pointwise ] let @xmath169 , @xmath28 and @xmath74 .    *",
    "( i ) * if @xmath170 and @xmath171 ( see ) , then [ e : t : pointwise - i ] \\ { f(i_0 ) = f(i_0 ) } 1- .    *",
    "( ii ) * * ( a ) * @xmath172 implies @xmath173 .    *",
    "( ii ) * * ( b ) * if for some @xmath174 , @xmath175 where @xmath176 is given in , then [ e : t : pointwise - ii ] \\ { criterion ( i_0 ) = 1 } 1- .",
    "we now address the algorithmic implementation of the point query problem and its criterion .",
    "this is more involved now than in the case of norms and therefore we present a detailed argument here . following indyk @xcite , suppose now that the signal is only of finite precision e.g.@xmath177 and suppose , moreover , that our pseudorandom numbers can only take values in the set @xmath178 .",
    "let @xmath179 be infinite precision independent uniform random numbers in @xmath83 .",
    "we shall base our algorithms on discretized versions of the ideal standard @xmath6frchet variables @xmath180 , where @xmath181 is the inverse cumulative distribution function of a standard @xmath6frchet variable .",
    "fix a small parameter @xmath182 ( to be specified ) , and suppose that [ e : uj - gamma ] u_j(i ) ,  i = 1 ,  , n ,  j=1,  ,k .",
    "this is not a limitation since this happens with probability at least @xmath183 which is at least @xmath26 provided that @xmath184 .",
    "this is so because @xmath185 , @xmath186 and since @xmath187 @xmath188 .",
    "let now @xmath189 be a multiple of @xmath190 , nearest to @xmath179 , which is also in the set @xmath191\\cap v_l$ ] .",
    "let @xmath192 and let @xmath193 be a multiple of @xmath190 in the set @xmath194 , nearest to @xmath195 .",
    "observe that @xmath196 and , as in indyk @xcite , by the mean value theorem , [ e : beta - precision ] |z_j(i ) - z_j^*(i)| _",
    "y|d_^-1(y)/dy| = o ( . and",
    "therefore , [ e : wtilde - z - z ] |z_j(i ) - z_j(i)| : = o(1/ l ^1 + 1/ ) ,  i=1,  ,n ,   j=1,  ,k .",
    "[ t : pointwise - algorithm ] let @xmath197 , @xmath198 and @xmath199 .",
    "suppose that [ e : t : pointwise - algorithm ] 2(1 + c _ ) ( _ 1i n f(i)^)^1/ f(i_0 ) d ( _ i= i_0 f(i)^)^1/ , where @xmath200 .    if the precision @xmath201 in is such that @xmath202 , then there exists an algorithm , implementing the point estimator @xmath72 so that [ e : t : pointwise - algorithm - c ] \\ { f(i_0 ) = f(i_0 ) } 1 - 3 , holds .",
    "this can be done in space @xmath203 with the same order of bit  wise operations per stream item .    the proof is given in the appendix .",
    "the infinite precision was essential in proving that @xmath204 implies @xmath205 .",
    "we can not expect this when using real algorithms where the @xmath5 s have finite precision .",
    "the following result shows , however , that there is nevertheless an algorithm such that @xmath204 implies that @xmath205 holds with high probability , independently of the nature of the signal @xmath1 .",
    "[ t : criterion - algorithm ] let the point estimator @xmath72 and its criterion be based on a max",
    " stable sketch in terms of the finite precision variables @xmath206 as in . if @xmath207^{1/\\alpha}))$ ] , then [ e : criterion - algorithm ] (\\ { f(i_0 ) = f(i_0)}\\{criterion(i_0)=1 } ) , where the constant @xmath208 does not depend on the signal @xmath1 .",
    "the last probability bound is also valid for an algorithm requiring storage @xmath209 and the same order of operations per stream item .    the proof is given in the appendix .",
    "* remarks : *    1 .",
    "relation shows that our criterion may falsely indicate that @xmath210 only with small probability .",
    "2 .   our point query and its criterion algorithms have features of both las vegas and monte carlo randomized algorithms .",
    "namely , they give _ exact _ results , as las vegas algorithms do , however their computational time is fixed and sometimes ( with low probability ) they fail to give correct results . as in monte",
    "carlo algorithms , the probability of getting exact results grows with the size of the max  stable sketch .",
    "we would like to thank anna gilbert , martin strauss and joel tropp for their remarks and encouragement .",
    "martin strauss helped us understand better the results of nisan @xcite .",
    "a random variable @xmath150 is said to be max ",
    "stable if , for any @xmath211 , there exist @xmath212 and @xmath213 , such that [ e : max - stable - def ] \\{az , bz ",
    "} c z + d , where @xmath214 and @xmath215 are independent copies of @xmath150 .",
    "this definition resembles the definition of sum  stability where the operation `` max '' is the summation .",
    "recall that @xmath154 is sum ",
    "stable if for any @xmath216 , there exist @xmath212 and @xmath213 , such that @xmath217 both sum  stable and max  stable distributions arise as the limit distributions when taking sums and maxima , respectively , of independent and identically distributed ( iid ) random variables . for more details on sum ",
    "stable and max ",
    "stable variables , see e.g.  samorodnitsky and taqqu @xcite and resnick @xcite .",
    "we will only review in more detail the class of @xmath6frchet max  stable variables .",
    "a random variable @xmath150 is said to be @xmath6frchet , for some @xmath11 , if @xmath218 and zero otherwise ( for @xmath219 ) , where @xmath148 .",
    "if @xmath220 , then @xmath150 is said to be _ standard _ @xmath6frchet .",
    "@xmath221 one can check by using independence that holds for any @xmath6frchet @xmath150 .",
    "more generally , let @xmath227 be iid @xmath6frchet with scale coefficients @xmath148 , and let @xmath228 . then , by independence , for any @xmath229 , @xmath230 and thus @xmath231 and where @xmath150 is a standard @xmath6frchet variable .",
    "that is , the weighted maxima @xmath232 is an @xmath6frchet variable with scale coefficient @xmath233 equal to @xmath50 .",
    "@xmath221 the @xmath6frchet variables are heavy  tailed .",
    "namely , by using the taylor series expansion of @xmath237 , one can show that @xmath238 where @xmath239 means @xmath240 .",
    "thus , the moments @xmath241 of @xmath150 are finite only if @xmath242 .",
    "however , when @xmath242 , these moments can be easily evaluated .",
    "we have [ e : zp ] ez^p = _ 0^z^p d \\{-^z^- } = ^p _ 0^u^-p/ e^-u du = ^p ( 1-p/ ) , where in the last integral we used the change of variables @xmath243 and where @xmath244 denotes the gamma function .        @xmath221 the @xmath6frchet variables can be easily simulated . if @xmath248 are independent uniformly distributed variables in @xmath83 , then @xmath249 are independent standard @xmath6frchet . indeed , for all @xmath229 , @xmath250        therefore ,",
    "the result in the case of the sample  median based estimator follows from lemma 2 in indyk @xcite , for example , since the derivative of @xmath254 at @xmath255 is bounded .",
    "the result in the case of the moment estimator follows from the central limit theorem , since the variables @xmath256 have zero expectations and finite variances .",
    "@xmath257      proof of theorem [ t : dist ] : we consider only @xmath258 .",
    "the argument for the estimator @xmath127 is similar .",
    "suppose that @xmath75 is as in theorem [ t : norm ] , so that with probabilities at least @xmath26 , we have @xmath259 @xmath260 , and @xmath261 .    thus , by the union bound of probabilities , with probability at least @xmath262 we have [ e : rho-1+epsilon ] _ , r(f , g ) = 2 fg__^(1+o ( ) ) - f__^(1+o ( ) ) - g__^(1+o ( ) ) .",
    "now , since @xmath263 we get , from , that @xmath264 the last relation is valid with probability at least @xmath262 , which implies .",
    "@xmath257      proof of theorem [ t : pointwise ] : observe that by , and , @xmath265 where @xmath266 denotes `` max '' . now",
    "@xmath267 is independent of @xmath268 and , by max ",
    "stability ( see appendix ) , it equals in distribution @xmath269 .",
    "hence [ e : fz ] f(i_0 ) f(i_0 ) _ 1j k \\ { z_j(1)^-1 ( _ i= i_0 f(i)^)^1/ z_j(2 ) } = : f(i_0 ) _",
    "1jk c_f(i_0 ) z_j(2)/z_j(1 ) , where @xmath270 . by using again the independence in @xmath271",
    ", we get @xmath272 by lemma [ l : xi / eta ] , the probability in equals @xmath273 , and hence [ e : ff ] \\ { f(i_0 ) = f(i_0 ) } = 1 - ( ^k = 1 - ( _ i = i_0 f(i)^_i f(i)^ ) ^k = 1 - ( 1 - f(i_0)^f__^ ) ^k",
    ". now @xmath274 implies @xmath275 . by choosing @xmath276",
    ", we get @xmath277 .",
    "since @xmath278 for all @xmath279 , we get that @xmath280 , for all @xmath281 , which completes the proof of part * ( i)*.    we now prove part * ( ii ) * * ( a)*. observe that [ e : g = xi ] ( g_(1)(i_0),g_(2)(i_0 ) ) ( f(i_0)_(1)(i_0 ) ) , f(i_0)_(2)(i_0 ) ) , where @xmath282 is the sorted sample of independent random variables @xmath283 . since the joint distribution of @xmath284 and @xmath285 has a density , it follows that @xmath286 .",
    "hence , in view of , with probability 1 , we have [ e : rhs ] \\{criterion ( i_0 ) = 1 } \\{g_(1)(i_0 ) = g_(2)(i_0 ) } = \\{f(i_0 ) _",
    "( 2)(i_0)}. the right  hand side of occurs only if @xmath205 , which completes the proof of * ( ii ) ( a)*.    we now turn to part * ( ii ) * * ( b ) * and estimate @xmath287 .",
    "we have , @xmath288 where @xmath289 .",
    "reasoning as in part * ( i ) * , we get by lemma [ l : xi / eta ] , @xmath290 , since @xmath291 .",
    "we thus need to choose @xmath75 s which satisfy the inequality @xmath292 . for @xmath293 , we have @xmath294 , and hence it suffices to have @xmath295 , or simply , [ e : wtilde - k ] k + , where we used that @xmath296 .",
    "let @xmath297 and @xmath298 , for some @xmath299 ( to be specified ) . then , since @xmath300 , it follows that holds if @xmath301 . since @xmath302",
    ", we get that holds if @xmath303 the last is equivalent to @xmath304 and @xmath305 .",
    "we have that @xmath306 for all @xmath307 , and thus for @xmath308 we obtain : [ e : ctheta ] 2 ^ -/(+ ) c_^/(+ ) 1/e   c_1+^1+/ + 1 , where we add @xmath89 in the last relation to ensure that @xmath309 .",
    "@xmath257    proof of theorem [ t : pointwise - algorithm ] : we will first show that [ e:2.16 ] \\ { f(i_0 ) = f(i_0 ) } 1- 2 , where @xmath310 is defined as @xmath72 but based on _ truly independent _",
    "variables @xmath206 which satisfy . recall that relation holds if holds .",
    "choose @xmath182 and @xmath311 so that @xmath312 , where @xmath132 denotes the event @xmath313 .",
    "as in the proof of theorem [ t : pointwise ] , @xmath314 observe that , since @xmath132 holds , by , @xmath315 , where @xmath316 .",
    "thus , by using also that @xmath317 , we get [ e : t : pointwise - algorithm-1.1 ] \\{f(i_0 ) = f(i_0 ) } b f(i_0 ) _ 1jk ( z_j(i_0)-)^-1 ( _ i = i_0 f(i ) z_j(i ) + s_f(i_0 ) ) } = : b c. since @xmath312 by relation it follows that , to establish , it is enough to show that @xmath318 , where @xmath208 denotes the second event in the right  hand side of .",
    "indeed , @xmath319 .",
    "the event @xmath208 , however , involves ideal precision frchet random variables where their corresponding @xmath179 s are not bound to satisfy condition .",
    "we can therefore manipulate @xmath208 as in the proof of theorem [ t : pointwise ] * ( i)*.    since @xmath320 where @xmath321 , by independence : @xmath322 where @xmath323 and @xmath324 .",
    "we now bound above the expectation in the last relation . note that @xmath325 for all @xmath326 .",
    "thus , by and as in relation below , @xmath327 where @xmath328 .",
    "let now @xmath75 be such that @xmath329 , that is , @xmath330 .",
    "then , in view of , @xmath331 , provided that @xmath332 or , equivalently , if @xmath333 .",
    "the last inequality holds if @xmath334 thus , to prove , it remains to show that @xmath335 if holds and @xmath336 , where @xmath201 is the `` precision '' parameter in .",
    "we have that @xmath337 , and thus @xmath338 since @xmath339 .",
    "one can show that @xmath340 , and hence @xmath341 .",
    "hence , @xmath342 for all @xmath197 , which implies .",
    "now , consider a point estimator @xmath72 , defined as @xmath310 , but with @xmath206 replaced by pseudo ",
    "random variables , with the same precision ( i.e.  taking values in the set @xmath343 ) .",
    "we will argue that a pseudo  random number generator exists so that [ e : f - tilde = f - hat ] \\ { f(i_0 ) = f(i_0 ) } 1- , for some @xmath310 based on independent @xmath206 s .",
    "this , in view of , would imply .",
    "we first need to hold with probability at least @xmath26 with @xmath182 such that @xmath344 .",
    "this can be achieved by taking @xmath345 .",
    "now , to ensure that holds , it suffices to take @xmath346 .",
    "therefore , one needs @xmath347 bits to represent each @xmath206 .",
    "hence our algorithm uses @xmath348 random bits . as in indyk @xcite , by using the results of nisan @xcite , for each @xmath349 one can generate pseudo ",
    "random @xmath350 s , which are `` very close '' to some independent @xmath189 s by using only @xmath351 truly random seeds .",
    "these @xmath352 s would `` fool '' our algorithm with probability at least @xmath26 since it uses only @xmath353 space for computations with random bits .",
    "that is , one has . in summary , we need to store @xmath354 bits , needed primarily for the truly random seeds , and to perform about @xmath355 of bit  wise operations per each stream item , in order to maintain the sketch . @xmath257      therefore , the probability in is bounded above by : @xmath363 we now focus on bounding the last probability . since the @xmath364 s are independent and discrete random variables , we have [ e : sum - atoms ] \\{_1(i_0 ) = _ 2(i_0 ) } = _ x : \\{_1(i_0 ) = x } ^2 .",
    "let @xmath122 and observe that @xmath365 and @xmath366 for all @xmath367 .",
    "thus , in view of , @xmath368 since the @xmath369 s are ideal precision , independent and @xmath6frchet , @xmath370 where @xmath321 .",
    "therefore , @xmath371 where @xmath372 denotes dominance in distribution .",
    "similarly @xmath373 , where @xmath374 .",
    "thus , @xmath375 where the last inequality follows from the fact that @xmath376 and @xmath377 have continuous cumulative distribution functions @xmath378 .",
    "thus , for the probability in , we get : [ e : crit - alg-2 ] \\{_1(i_0 ) = _ 2(i_0 ) } _ x > 0 ( f__*(x ) - f_^*(x ) ) + ( 1-(1-\\{-(/)^-})^n ) . by taking @xmath379",
    ", we can make the second term in the right  hand side of smaller than @xmath380 ( lemma [ l : crit - alg-1 ] ) .",
    "indeed , the second term is a monotone increasing function of @xmath381 .",
    "hence by setting @xmath382 the upper bound in becomes @xmath383^{1/\\alpha})^{-\\alpha}\\ } = n \\exp\\ { -\\ln(nk^2/\\delta)\\ } = \\delta / k^2 $ ] .",
    "also , by lemma [ l : crit - alg-2 ] , the first term in the right  hand side of , is bounded above by @xmath384 , for all @xmath385 .",
    "thus , in view of , the probability in is bounded above by @xmath386 , which can be made smaller than @xmath387 by taking @xmath388 and @xmath389 .",
    "this implies that @xmath390^{1/\\alpha}))$ ] would ensure that holds .",
    "observe that the constant in the last @xmath391bound does not depend on the signal @xmath1 . @xmath257",
    "[ l : crit - alg-2 ] let @xmath400 and @xmath401 , for some @xmath212 and @xmath402 , where @xmath214 and @xmath215 are independent standard @xmath6frchet variables .",
    "then , we have @xmath403 where @xmath404 and @xmath405 .",
    "we have that @xmath406 where @xmath407 and @xmath408 . by lemma [ l : xi / eta ]",
    ", we have that @xmath409 where @xmath410 . by the mean value theorem ,",
    "since @xmath411 is monotone decreasing in @xmath412 , the last expression is bounded above by : @xmath413 where the last inequality follows from the fact that @xmath414 , @xmath415 , with @xmath416 and @xmath417 . by using the mean value theorem again",
    ", we obtain that , for some @xmath418,$ ] the right  hand side of is bounded above by @xmath419 for all @xmath402 .",
    "@xmath257              cormode , g. & muthukrishnan , s. ( 2003_a _ ) , _ algorithms - esa 2003 _ , vol .",
    "2832 of _ lecture notes in computer science _ ,",
    "springer , chapter estimating dominance norms of multiple data streams , pp .",
    "148 160 .",
    "datar , m. , immorlica , n. , indyk , p. & mirrokni , v.  s. ( 2004 ) , locality  sensitive hashing scheme based on p  stable distributions , _ in _ ` scg ' 04 : proceedings of the twentieth annual symposium on computational geometry , acm press , new york , ny , usa , pp .  253262",
    ".    feigenbaum , j. , kannan , s. , strauss , m. & viswanathan , m. ( 1999 ) , an approximate l1-difference algorithm for massive data streams , _ in _ ` focs ' 99 : proceedings of the 40th annual symposium on foundations of computer science , ieee computer society , washington , dc , usa , p.  501 .",
    "fong , j.  h. & strauss , m. ( 2000 ) , an approximate lp - difference algorithm for massive data streams , _ in _ ` stacs ' 00 : proceedings of the 17th annual symposium on theoretical aspects of computer science , springer - verlag , london , uk , pp .",
    "193204 .",
    "indyk , p. ( 2003 ) , better algorithms for high - dimensional proximity problems via asymmetric embeddings , _ in _ ` soda ' 03 : proceedings of the fourteenth annual acm - siam symposium on discrete algorithms , society for industrial and applied mathematics , philadelphia , pa , usa , pp .",
    "539545 .",
    "indyk , p. & woodruff , d. ( 2005 ) , optimal approximations of the frequency moments of data streams , _ in _ ` stoc ' 05 : proceedings of the thirty - seventh annual acm symposium on theory of computing , acm press , new york , ny , usa , pp",
    ".  202208 .",
    "saks , m. & sun , x. ( 2002 ) , space lower bounds for distance approximation in the data stream model , _ in _ ` stoc ' 02 : proceedings of the thiry - fourth annual acm symposium on theory of computing , acm press , new york , ny , usa , pp .  360369 ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be a non  negative signal , defined over a very large domain and suppose that we want to be able to address approximate aggregate queries or point queries about @xmath1 . to answer queries about @xmath1 , we introduce a new type of random sketches called _ max  </S>",
    "<S> stable sketches_. the ( ideal precision ) max  stable sketch of @xmath1 , @xmath2 , is defined as : @xmath3 where the @xmath4 random variables </S>",
    "<S> @xmath5 s are independent with standard @xmath6frchet distribution , that is , @xmath7 , where @xmath8 is an arbitrary positive parameter . </S>",
    "<S> max  </S>",
    "<S> stable sketches are particularly natural when dealing with maximally updated data streams , logs of record events and dominance norms or relations between large signals . by using only max  </S>",
    "<S> stable sketches of relatively small size @xmath9 , we can compute in small space and time : _ ( i ) _ the @xmath10norm , @xmath11 , of the signal _ ( ii ) _ the distance between two signals in a metric , related to the @xmath10norm , and _ ( iii ) _ dominance norms , that is , the norm of the maxima of several signals . </S>",
    "<S> in addition , we can also derive point queries about the signal .    as is the case of @xmath12stable , @xmath13 , ( sum  stable ) additive sketches , see indyk @xcite , max  </S>",
    "<S> stability ensures that @xmath14 with @xmath15 where @xmath16 means equal in distribution . </S>",
    "<S> we derive @xmath17 probability bounds on the relative error for distances and dominance norms . </S>",
    "<S> this can be implemented by efficient algorithms requiring small space even when the computational precision is finite and a limited amount of random bits are used . </S>",
    "<S> our approach in approximating dominance norms improves considerably on existing techniques in the literature . </S>"
  ]
}