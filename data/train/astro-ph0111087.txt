{
  "article_text": [
    "with the advent of automatic telescopes and the use of large facilities in service mode , efficient automatic scheduling of the night observations and operations is becoming more important .",
    "the problem may be summarized as how to observe as much as possible sources , minimizing the loss of observing time , ensuring optimal observations as far as possible , including several levels of priority and constraints , calibrating observations , and taking into account that night operations may be interrupted at any time by bad weather , failure of any device , or by an unexpected event . in the usual configuration an observer is allocated a given amount of time ( hours or nights ) which are usually pre - allocated at a given ( block of ) nights .",
    "a mixed approach has been introduced for the eso vlt and ntt @xcite with the use of the concept of `` observation blocks '' , defined as programmable units .",
    "each accepted proposal is described in terms of `` observation blocks '' which are then handled by 3 schedulers , in charge respectively of the long term , the medium term and the short term timeline , with a degree of reactivity growing from the long to the short term .",
    "the complexity of the system comes primarily from the need to cope with observations performed by guest as well as service observers , and in addition from the multi - telescope nature of the vlt . in a somewhat different approach , brezina ( 1998 ) defines individual groups of observations sent to the telescope via a centralized system , the `` principal astronomer '' , with pre - allocated priorities and time constraints .",
    "the system chooses the best sequence which optimizes an objective function .",
    "however , too observations as well as changes in schedule are hardly taken into account by this system .",
    "the primary goal of the _ tlescope  action rapide pour les objets transitoires _",
    "( rapid action telescope for transient objects , hereafter tarot , @xcite@xcite ) is the simultaneous observation of cosmic gamma - ray bursts ( hereafter grb ) at gamma - ray and visible wavelengths . for that purpose ,",
    "tarot is able to move to any location on the sky upon the receipt of a position transmitted via the internet by the grb coordinate network @xcite .",
    "grb counterpart observations use less than 10% of the telescope time , including the time needed to follow the source after the immediate observation , both the same , and the following nights ( typically 8 - 10h every 10 nights ) . during the 90% remaining useful time tarot",
    "observes various categories of sources , e.g. agn , x - ray binaries , detection of exo - planets , etc . ,",
    "usually connected with celestial variability .",
    "one of the peculiarities of tarot of relevance for the topic of telescope scheduling is its reactivity to any unprogrammed event , and the absence of people in charge of the telescope service , at night , as well as during the day .",
    "for that reason we developed a scheduling system , the majordome , in charge of the telescope schedule and which is the interface between the users and the satellites which give sources to point and the telescope control system ( tcs ) .",
    "it has for mission to handle the user requests ( routine program ) , as well as the un - programmed events , usually the bad weather , and sometime grb alerts .",
    "in this paper we present our framework for telescope scheduling activities and its first implementation called the majordome . in the next section",
    "we describe the tarot telescope since it was the instrument used to test the method presented here . in section 3",
    "we present the requirements we imposed on the scheduling task and the measures we used to control the quality of the solution . in section 4",
    "we develop the present implementation and the relations between the majordome and the other tarot modules . in section 5",
    "the results obtained both on simulated and real data are presented .",
    "section 6 is devoted to the discussion , the conclusion , and the perspectives for the second version of the majordome which is currently under development .",
    "tarot-1 is a fully autonomous 25 cm aperture telescope .",
    "its @xmath0 field of view matches well the hete uncertainty in localization of the sources ( particularly for the hete-1 wxm , since tarot-1 was designed before its unsuccessful launch ) .",
    "table 1 summarizes the present main technical characteristics of tarot-1 .",
    "note that tarot performs only imaging .",
    "@xmath1    filters b+v and r+i are broad band filters covering the spectral range of respectively the cousin b and v , and r and i filters .",
    "tarot-1 is fully autonomous , i.e. there is no human intervention either night and day , excepted for the weekly replacement of the dat archive medium , and low level maintenance , e.g. to verify the camera vacuum ( once per month ) , cleaning of the optics ( 6 months ) etc . , or low level diagnostic or emergency intervention in case of a failure ( as an illustration this happened when one of the drives of the sliding roof failed in winter ) .    figure 1 summarizes the different software modules and their connections .",
    "all are functionally independent , and the the communications are made through tcp / ip socket processes .",
    "observation requests are sent to the majordome via a web interface , and handled as described in the following sections .",
    "should a grb occurs , its coordinates are received from the gcn , and the majordome immediately schedules the observation : in that case , the typical slewing times range from 1 to 2 seconds .",
    "too observations represents however a minor perturbation of the schedule , with a 10% probability of occurrence in the case of batse @xcite , and , as of 2003 , swift @xcite , and much less for hete-2 @xcite .",
    "the telescope control system is in charge of all the housekeeping of the instrument , and actually sends the orders to the telescope , auxiliary equipement , and triggers the camera . in case of bad weather conditions ( high wind , rain , temperatures too close to the dew point , etc . ) , the roof is closed , as it is the case if the electric supply fails . in the other cases ,",
    "the operations are permitted , while eventually the processing software may reject certain frames , and their corresponding observation blocks ( see below ) .",
    "because of the large pixel size ( 3.6 arcsec ) , the relatively high sky background over the calern , and the absence of guiding , the length of a single exposure has to be limited to 5 minutes",
    ". in practice , burst frames last 20 seconds to one minute , and most of the other observations last less than two minutes .",
    "this represents a major difference with the framework of large telescopes , especially if we consider spectroscopic observations .",
    "however , we consider that the generality of the algorithms presented here allows the adaptation of the solution to longer exposures .",
    "this is one of the goals of our present work on the second version of the majordome software .",
    "in the remaining of this paper we call a _ request _ a set of observations requested by a given user",
    ". they may be not contiguous .",
    "an _ observation block _ is a set of contiguous images scheduled together.though this is the general case , the individual observations of an _ observation block _ may point to different areas of the sky , as it is the case for mosaic pointings generated from a batse grb alert , or in the case of alternative pointing between the target and calibration frames .",
    "the _ observation block _ is the unit of programmation and of validation .",
    "each individual frame is defined by its duration , ccd configuration , filter ... finally , as explained above , the observation block is composed of individual _",
    "frames_.    in our approach any user can send a request at any time . these requests will be taken into account by the program at the next majordome program restart , or at a pre - established time , usually during daytime , or after any interruption .",
    "the lifetime of a request is one year from the submission date .",
    "this means that a request has no pre - allocated time ( at least in the absence of any constraint ) , the limitation of 1 year being there only to avoid that a request not processed for any reason during this year remains in the database _ ad vitam aeternam_. some observational constraints may be affected to this request , like the moon , etc .. there are 5 types of observations :    * the user can request a `` constrained observation '' ( co ) , i.e. it should be scheduled only during a given time interval . in the case of tarot , it can be either minutes , days , or even months .",
    "the requested time , as well as the flexibility around this time should be given .",
    "* the request can call for `` periodic not constrained '' ( pnco ) observations , i.e. regularly spaced observations . the period , as well as its uncertainty",
    "should be given at request time .",
    "this period has no special limits , i.e. it can be minutes ( and even less ) , days or more .",
    "the program has the freedom to schedule the observations at any time , provided that all observations can fit the night , for short periodic observations .",
    "* in the case of `` periodic constrained '' observations ( pco ) , the user gives the period and also the phase ( the constraint on the date of the first observation ) .",
    "* finally an observation may not be `` constrained '' nor `` periodic '' at all . in this case",
    ", we call it a `` non constrained observation '' ( nco ) . * a somewhat specific type of `` alert observations '' ( ao ) has been added . in the case of tarot",
    ", requests for observations of this type are sent directly to the majordome by the gcn , using a socket type internet connection .",
    "the transfer time between the nasa gsfc and the cesr as measured from several months of observations is about 250 ms .",
    "if the alert comes from a batse trigger , then the uncertainty of the localization is larger than the field of view , and a mosaic _ observation block _ is generated .",
    "usually tarot spends the remaining of the night observing the burst location , and eventually part of the following nights .",
    "this means that alerts are unpredictable events with an impact on the overall telescope schedule .",
    "alert observations occupy about 10% of the telescope time .",
    "though the alert processing is somewhat specific to tarot , it has a lot of analogies with less atypical target opportunity observations ( toos ) on classical telescopes .",
    "the specific limits of tarot are at present that an _ observation block _ should have at most 6 individual observations of duration less than 5 minutes .",
    "as explained above , this last limit is due to the high sky background of the calern observatory .",
    "also , given that the majordome scheduling horizon is at present one night , larger blocks may produce a loss of efficiency . in the specific case of tarot ,",
    "this is not a problem since this telescope is mainly devoted to the observation of transient and variable objects , and that deep sky exposures are beyond its scope .",
    "we note also that the unit of validation is the _ observation block _ , i.e. if any of the individual observation of a given observation block is not performed or considered as valid ( e.g. if they are clouds on one of the frames ) , then all the _ block _ observations should be re - scheduled .",
    "finally there are four priority levels : periodic or constrained observations are in the highest level , and we defined three levels for nco observations .",
    "the sum of the three first levels ( the periodic and/or constrained observation levels and the two first level for ncos ) should be close to 100% of the foreseen observing time . the third level of ncos will be scheduled only as `` filling '' observations if there is some remaining time , or if no other higher priority observation can be scheduled at that time .",
    "of course , the amount of periodic or constrained observations should be limited to a small fraction ( on the order of 20% ) , in order to control the distribution of the types of scheduled observations .      the quality of a given timeline solution for any telescope should be quantified .",
    "here we describe the measures we used :    * the efficiency of the system , i.e. the ratio of the effective observing time ( including `` bad frames '' due to external events and the readout dead time ) over the total operational night time should be as high as possible . *",
    "the high priority levels should be served first .",
    "* the number of observations scheduled close to their transit should be as high as possible .",
    "* the probability to schedule short and long observations should be the same , e.g. the majordome should not introduce a `` duration preference '' .",
    "* the program should not give any preference to any part of the sky , i.e. it should respect the parity given in the request database ( i.e. no north or south preference ) .",
    "* the telescope moves should be minimized .",
    "it has to be noted that several of these measures could be used also in the decision process for a given timeline .",
    "however the quality measure is done after the telescope has performed the observations .",
    "also , as described below , there are other parameters which have an impact on the computation of the optimized solution :    * co and pco requests : since these requests have to be scheduled at a precise date , their insertion in the telescope timeline will occur as soon as possible and do nt have a specific criterion of quality .",
    "* nco requests : these request should be observed close to their transit . *",
    "pnco requests : same as above , excepted that as soon as one of the observations is scheduled , the others become `` constrained ''",
    "as explained in section 2 the majordome is the software that takes control over the telescope control system ( tcs ) during night operations , i.e. at night when no other event prevents the telescope from observing ( e.g. bad weather ) .",
    "the observation requestor is a module that enables the users to send a request to the telescope .",
    "the observation requests are then put in the request database . just before night time , or after any interruption ( weather , alert ... ) the majordome scans this database and builds a timeline for the night , or the remaining of it . at night time , in the absence of any other event ( e.g. rain ) the majordome sends the observation orders to the telescope control system ( tcs ) .",
    "whenever the frame has been downloaded from the camera , it is analyzed by our automatic taitar data processing software @xcite .",
    "if the _ observation block _ has been successfully observed , the information is sent to the majordome , and the corresponding request is removed from the request database as soon as the observation block has been completely observed .",
    "all links between the various software modules of tarot are established using a socket type connection .",
    "the scheduling program is divided in 2 main parts :    * the _ selection _ procedure . *",
    "the _ run _ procedure .",
    "the _ selection procedure _ selects from the request database all the visible ones for the period of time where the scheduling is needed .",
    "( the next night for a normal procedure , or part of the night in case of rescheduling during the night , the remaining of it if the operations resume after an interruption ) .",
    "this selection is based on the following tests :    * minimal visibility of the object .",
    "an observation can be made only if the object is at that time above the walls of the tarot building .",
    "this means that the declination should be above than @xmath2 , and a constraint on the rising and setting time of the object .",
    "* night observation : the object has to be visible between astronomical twilight and dawn .",
    "however _ alert _ observations may be scheduled during nautical dawn or twilight .",
    "other observation types may be scheduled also during these intervals , like satellite or comet searches . *",
    "minimal moon distance : when processed , the object has to be at least @xmath3 away from the moon .",
    "we define the `` night window '' of a request as the time during which it meets all the above criteria ( visibility , moon constraint , etc . ) for a given night .",
    "the `` observation window '' of a request is the union of all the night window of a request during its validity period ( one year or less ) .",
    "the procedure produces a subset of the database made of the requests which can be scheduled , because the intersection of their `` night windows '' and the actual night is non null .    the _ run procedure _ schedules a subset of requests selected by the _ selection procedure_. it does its job in two steps : first , co , and pco requests are scheduled , and then it places the pnco and nco requests .",
    "we call _ scheduling horizon _ the non null time interval between the end and the beginning of two observations ( figure 2 ) .",
    "observations are ordered by their requested date .",
    "the first one is placed at its earliest starting time .",
    "the running date , @xmath4 becomes the date of the first observation plus its duration .",
    "then , for every observation i in the list ( @xmath5 ) :    case 1 : no overlapping ( figure 2 ) : observation i is scheduled at its earliest starting time , and the running date @xmath4 becomes the current starting time of i plus its duration .",
    "case 2 : overlapping ( figure 3 ) : if it is possible to delay observation i , or to invert the occurrence of i and i-1 , taking into account their tolerance on the starting date and the end of their night window , then i is scheduled at the running date @xmath4 ( figure 3a ) , and the running date becomes @xmath4 plus the duration of observation i ( or i-1 ) . else ,",
    "observation i is rejected ( figure 3b ) , even if it is one of the scheduled occurrence of a pco observation .      at present for pnco observations , which encompass usually the whole night",
    ", we sequence the first observation as soon as possible , after pco and constrained observation have been placed .",
    "to do that we follow the above defined rules .",
    "as soon as the first observation of the periodic sequence has been scheduled , the others become _ de facto _ constrained , and they are sequenced according to the rules defined for pco observations .    though",
    "this placement is not satisfactory from the principles , in fact , for periods shorter than 3 hours , there is always an observation sequenced near its transit time .",
    "however , in order to get a better optimized version of our method , in the next version we will implement a global solution which will enable a better placement of pnco observations , especially when they run on the long time , or , on the contrary , when the total duration encompassed by the observations is short compared to the night length .      during this step",
    "we will try to schedule the nco observations within the scheduling horizons ( see above).we use the pairwise interchange algorithm@xcite between observation tasks , in order to minimize an evolution function taking into account the airmass . by scheduling co and pco ,",
    "we have defined several _",
    "scheduling horizons_. nco and pnco have to be scheduled within these intervals .",
    "let us coinsider a given observation i associated with a nco request ( figure 4 ) :    * @xmath6 is the transit time of i. * @xmath7 is the instant of the beginning of observation i. * @xmath8 is the duration of observation i. * @xmath9 is a measure of the distance between the transit and scheduling times .",
    "we use as the measure for @xmath9 :    @xmath10    we will adopt @xmath11 , the mean distance to transit as a quality criterion of a solution where :    @xmath12    % ajouter equa num\\ ] ]    here , n is the number of observations .    for every scheduling horizon ,",
    "the corresponding timeline is built progressively .",
    "we take the best scheduling of two successive observations , taking into account their characteristics ( here the distance to the transit ) .",
    "\\a ) best scheduling of two consecutive observations    let us now consider two ncos a and b and a current date @xmath13 .",
    "we have for @xmath13 , the choice to schedule a - b or b - a ( figure 5 ) .",
    "* case 1 : a and b have different priorities : when two nco have different priorities , the higher priority holder imposes the sequence that minimizes its distance to transit .",
    "* case 2 : a and b have the same priorities , but the number of possible remaining transits ( up to the end of the observing window ) for a is greater than for b. in that case , b has higher priority over a. * case 3 : same priorities and same number of transits : when two observations are equivalent , we choose the sequence that minimizes the contribution to @xmath11 .",
    "we do not compute @xmath11 , but we compare the following numbers @xmath14 and @xmath15 , where @xmath14 is the sum of distances to transit of the observations a and b when a is programmed in first place ( @xmath16 and b is scheduled in second position ( @xmath17 ) :    @xmath18\\ ] ]    @xmath19\\ ] ]    if @xmath20 , then we choose the a - b sequence , otherwise the b - a one .",
    "\\b ) global scheduling algorithm within the scheduling horizons    observations are ordered by growing distance to the transit .",
    "we consider the scheduling horizons in the chronological order . for a given horizon h",
    ":    * we place the first observation of the list whose duration is consistent with h ( if this is not possible we consider the next horizon ) . *",
    "we fill h adding progressively the observation compatible with the remaining duration .",
    "any new observation is scheduled against the preceding one according to the rule developed in ",
    "a ) . when no new observation can be introduced in the remaining duration interval",
    ", then we consider the next horizon .",
    "should an alert occurs , e.g. from the hete-2 satellite , a new timeline is immediately built for the remaining of the night with only the alert observations .",
    "the majordome sends to the tcs the first alert observation .",
    "this procedure takes less than one second .",
    "a new pco request is built and inserted in the request database , for follow - up observations beginning the following night .      since tarot has a somewhat high rate of interruption ( 30% of them due to bad weather and 10% because of a gcn alert )",
    ", our algorithm should not require too much cpu .",
    "we have tested the majordome on a 233 mhz pc pentium ii with 128 mb of ram . with the present tarot camera it takes less than 600 seconds to establish a timetable for the night , with a database of 1500 requests of different types , and 300 to 400 images schedules ( about 100 observation blocks ) .",
    "the main parameters which have an impact on the computing time are the size of the request database , and the number of observation blocks it is possible to schedule .",
    "this last parameters depends on the length of the night , and more generally of the horizon ( i.e. the larger the horizon , the larger the number of possible combinations ) , and , at least for tarot , the total time taken for each exposure : for tarot , this last parameter was dramatically reduced when we replaced the camera , since the readout time was reduced from 30 seconds to 2 seconds .",
    "we have tested our method on both real and simulated request databases .",
    "table 1 summarizes the characteristics and the results for the scheduling with the simulated request database . :",
    ".characteristics and results obtained with the simulated request database [ cols= \" < , < , < , < , < \" , ]      the efficiency @xmath21 of the system is simply defined as the ratio of the effective observing time by the total operational night time .",
    "@xmath22cumulated observing time / total operational night time    the above database leads to @xmath23 .",
    "as it can be naturally inferred , the efficiency of the schedule is closely related to the number and distribution of co , pco and even pnco requests . in the above example",
    ", the pco + co requests represent about 28% of the total night duration .",
    "if we add the pnco , more than 40% percent of the observations have a constrain of any type .",
    "if this number is lowered to about 10 - 15% , then the efficiency grows up to 90 or 95% .",
    "since the algorithm gives a local solution and tries first to schedule requests at transit time , the consequence is a loss of efficiency when too many requests are near the same right ascension .",
    "we did not observe however any north - south preference , or even duration preference , since this last criterion is only marginally taken into account .      the nco are designed to be scheduled near their transit time with a certain tolerance ( 60 minutes ) . on figure 6 , we can clearly see that this is indeed the case .",
    "some nco have to use their tolerance , depending on the number of requests already scheduled and on the distribution of cos and pcos previously scheduled .",
    "the majordome is now routinely operating the tarot instrument .",
    "the advantage of this software is its ability to cope with various situations , while ensuring an efficient scheduling and optimal observations .",
    "we have identified two main ways to improve the majordome : first the present majordome works on a local solution .",
    "a more global approach would be desirable both for the efficiency of the scheduling , to allow observations having the same transit time to be adequately scheduled over a longer period , to better manage priorities based on the length of the celestial window .",
    "another advantage of long - term scheduling is that the user may know in advance the approximate date of her / his observation , with a certain level of confidence . in order to overcome this difficulty we are working on long - term request pre - allocation ( giving an approximate date of consideration for the scheduler ) , and mid - term scheduling .",
    "request pre - allocation is also a mean to give a better balance between short and long duration observations .",
    "of course , these efforts should not be made at the expanse of the reactivity in case of alerts or bad weather , nor prevent the insertion of new requests at any time , particularly when a too occurs .",
    "on the other hand one may be tempted to use the same system to compute the timeline for a longer period , i.e. to use the current algorithm with a larger horizon .",
    "as it has been described above , this solution will produce unacceptable computing times , and may also lead to inefficiencies , since in the version described here we scan the whole database each time the majordome starts the computation of a new timeline .",
    "the solution we foresee would benefit of the advantages of the current majordome , used with a mid - term horizon ( e.g. a week ) , and a pre - placement of the _ observation blocks _ on the long term .",
    "this may also an advantage for the scheduling of periodic observations when the period is large .",
    "secondly , we are working on a more flexible majordome , adding several criteria to the requests , like observations at dark / grey / moon time , between clouds ( in case of partial coverage ) , during photometric nights only ... we are also introducing other observation types , like repeated observations , when the user needs only to compare regions of the sky at different times , but with a soft constraint on the observation dates .",
    "we designed the majordome as a software whose goal was to schedule requests not on the basis of a pre - allocated time , but in an optimal way .",
    "in other words the user is only guaranteed that if her / his observation has enough priority , it will be observed in the best possible conditions , but he does not know exactly when it will be observed , though we are trying now to give a good guess of this date .    from the point of view of the ability to cope with unexpected events , alerts or bad weather , the majordome proved already its usefulness , since a new timeline is computed in few seconds as a response of any interruption , eventually inserting new , urgent observations .",
    "the tlescope  action rapide pour les objets transitoires ( tarot-1 ) has been funded by the institut national des sciences de lunivers ( insu ) of the centre national de la recherche scientifique ( cnrs ) , and has been built by the centre detude spatiale des rayonnements ( cesr / cnrs ) , the laboratoire dastronomie spatiale ( las / cnrs ) , the technical division of the institut national des sciences de lunivers ( insu - dt ) , and is hosted by the observatoire de la cte dazur ( oca ) .",
    "we thank the anonymous referee for her / his helpful comments            bresina , john l. 1998 , _",
    "stochastic heuristic search and evaluation methods for constrained optimization .",
    "dissertation , department of computer science .",
    "rutgers university .",
    "new brunswick , nj ."
  ],
  "abstract_text": [
    "<S> we have developped a new method for the scheduling of astronomical automatic telescopes , in the framework of the autonomous tarot instrument . </S>",
    "<S> the majordome software can handle a variety of observations , constrained , periodic , etc . , and produces a timeline for the night , which may be modified at any time to take into account the specific conditions of the night . </S>",
    "<S> the majordome can also handle target of opportunity observations without delay . </S>"
  ]
}