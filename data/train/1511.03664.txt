{
  "article_text": [
    "the doppler velocity technique now has two decades of success in enabling extrasolar planetary detections .",
    "it has produced candidates with masses approaching that of earth , and has been especially successful in detecting long period planets . in recent years , doppler velocity confirmations have proven vital to gaining an understanding of the planetary candidates discovered by photometric space missions , especially kepler .",
    "doppler velocity campaigns are responsible for 31% of the 1854 confirmed planetary discoveries in the past three decades , but they account for 87% of the 330 confirmed planets with periods longer than 1 year@xcite .",
    "ground - based facilities , furthermore , are amenable to the operation of long - term surveys due to their relativity low construction and operational costs along with their ability to be upgraded as instrumentation improves .    in order to find analogs of our own solar system , we need to extend the catalog of successful radial velocity ( rv ) planet detections to encompass longer - period planets ( particularly true jupiter analogs ) and smaller mass , short - period planets .",
    "this means observing efforts must increase their temporal baselines and cadence of observation to more effectively populate each planet s rv phase curve .",
    "the automated planet finder , located at the mt .",
    "hamilton station of uco / lick observatory , combines a 2.4-m telescope with a purpose - built , high - resolution echelle spectrograph , and is capable of 1@xmath0  doppler velocity precision@xcite .",
    "eighty percent of the telescope s observing time is specifically dedicated to the detection of extrasolar planets .",
    "this time is shared evenly between two exoplanet research groups , one at uc santa cruz and one at uc berkeley .",
    "time is allocated in whole night segments , with a schedule developed quarterly by the telescope manager .",
    "target lists and operational software are developed separately as the two exoplanet groups are focused on different types of planet detection / follow up . for",
    "a description of the uc berkeley planet detection efforts , please see fulton et .",
    "al , 2015@xcite .",
    "the remaining 20% of telescope time is dedicated to at - large use by the university of california community .",
    "all users are allowed to request specific nights if it is beneficial to their science goals ( for example : to obtain rv values while a planet transits its star ) , and such requests are taken into account by the telescope manager when setting the schedule .",
    "the apf leverages a number of inherent advantages to improve efficiency .",
    "for example , its levy spectrometer , a high - resolution prism cross - dispersed echelle spectrograph with a maximum spectral resolving power of r@xmath1 , is optimized for high precision rv planet detection @xcite . a full description of the design and the individual components of the apf is available in vogt et al .",
    "( 2014 ) @xcite .",
    "to support long - running surveys , we have developed a dynamic scheduler capable of making real - time observing decisions and running the telescope without human interaction . through automation and optimization",
    ", we increase observing efficiency , decrease operating costs and minimize the potential for human error .",
    "the scheduler s target selection is driven by balancing scientific goals ( what we _ want _ to observe based on scientific interest , required data quality , and desired cadences ) and engineering constraints ( what we _ can _ observe based on current atmospheric conditions and physical limitations of the telescope ) . to address these criteria ,",
    "we need to know how the velocity precision extracted from a given stellar spectrum depends on inputs that can be monitored before and during each observation .",
    "we have assessed the influences of the various inputs by analyzing 16 months of data taken on the apf between june 2013 & october 2014 .",
    "the plan of this paper is as follows : in  [ sect : data ] we describe the current apf radial velocity catalog , paying special attention to the variety of spectral types and the frequency of observations . in ",
    "[ sect : inputs ] we evaluate the relations between velocity precision and parameters including stellar color and v band magnitude , airmass , seeing , date of observation and atmospheric transparency and we explain how these relations inform the nightly decision - making process executed by the observing software . in  [ sect : dismissedinputs ] we outline the parameters that were assumed to be important prior to on - sky observations , but that have since been determined to have little relevance . in  [ sect : heimdallr ] we describe how the relevant relations are integrated into the scheduling software , and we discuss its structure , its dependencies , and its capabilities . in ",
    "[ sect : compare ] we discuss other automated and semi - automated observatories and highlight both the similarities and differences between those systems and that employed by the apf . finally we conclude in  [ sect : campaigns ] by reviewing the application of the apf s automated observing strategy to the telescope s current and upcoming observing scientific campaigns .",
    "this paper differs from most publications discussing precision radial velocity work in that all of the plots , equations and discussions presented are based on individual , un - binned exposures of stars .",
    "it is well known that pulsation modes ( p - modes ) in stars cause oscillations on the stellar surface , adding noise to the rv signal . it has also been well documented that the noise imparted by these p - modes in late - type stars can be averaged over by requiring total observation times longer than the @xmath2 minute periods typical of the pulsation cycles @xcite",
    ". thus the majority of radial velocity publications , especially those dealing with exoplanet detections , present _ binned _ velocities and error values .",
    "that is , they take multiple , individual _ exposures _ of a star during the night and then combine ( bin ) them to create one final _ observation _ with its own velocity and internal error estimate @xcite .",
    "the binned observations therefore contain more photons than any individual exposure , but , more importantly , average over the pulsation modes on the star , and therefore exhibit a measurably smaller scatter ( figure [ fig : bin_unbin ] ) .",
    "these terms , exposure and observation , will be used specifically throughout this paper to help make clear to the reader whether we are talking about an exposure - a single instance of the shutter being open and collecting photons from the star , or an observation - the combination of all exposures taken of a star over the course of a night .",
    "similarly , exposure time will refer to the open shutter time during one exposure and observation time will refer to the total open shutter time spent on a target between all exposures . in the case of the star s observation consisting of only one exposure , then the observation time is equivalent to the exposure time .",
    "our radial velocity dataset for the rv standard star hd 185144 showing the individual exposures ( open circles in black ) and the resulting binned velocities ( solid circles in red ) .",
    "the binned velocities have a much smaller rms value ( 0.99 @xmath0  for the first 120 days and 1.72 @xmath0  over the entire 400 day span , compared to the 1.72 @xmath0  and 2.06 @xmath0  exhibited by the un - binned data over the same respective time spans ) due to their increased signal - to - noise .",
    "additionally the individual exposures are each @xmath360 seconds long while the binned velocities span at least @xmath35min , so they average over the p - modes of the star",
    ". this paper uses the individual exposure data when carrying out all further analyses and calibrations .",
    "the change in the rms values between the first 120 days and the full data set is largely due to a change in observing strategy .",
    "after the first 4 months we started observing hd 185144 less frequently and with fewer exposures in each observation to allow for more targets to be observed each night.,height=302 ]      the apf s star list is made up of legacy targets first observed as part of the lick - carnegie exoplanet campaign using the hires spectrograph on the keck i telescope .",
    "stars for the lick - carnegie survey were selected based on three main criteria :    * spectral type between g and m : stars with spectral types earlier than f5 experience oscillations that can produce pseudo - keplerian signals , and are fast rotators with few spectral lines so they are avoided * single stars : no stars with companions closer than 5 \" , as this can lead to scattered light from the nearby companion making its way into the spectrograph slit and contaminating the target star s signal * quiet stars : only stars without large amounts of emission in the ca ii h & k line cores are permitted , as core emission in these lines is an indicator of stellar chromospheric activity @xcite which complicates the data reduction process and can produce pseudo - keplerian signals .",
    "the resulting lick - carnegie target list is comprised of @xmath31800 stars , which have been monitored using keck / hires over the past two decades .",
    "when creating the initial target list for the apf , the lick - carnegie star list was culled for targets with v magnitudes brighter than 12 and declinations above -20@xmath4 . in order to efficiently prove the apf s capabilities , we selected stars with suspected short - period planets ( p < 100 days ) that required only 1 - 2 more rounds of phase coverage to verify . the presence and the false - alarm probabilities of these short - period ,",
    "keplerian signals were determined by analyzing the existing keck / hires rv datasets using the publicly available systemic console @xcite .",
    "systemic allows users to fit planetary signals to rv data and derive the orbital properties , while also providing tools to handle error estimation and assess orbital stability .",
    "this selection process resulted in a list of 127 stars .",
    "the calibrations described in this paper are based on data taken with the apf between june 2013 and october 2014 .",
    "the data set includes precision doppler observations of 80 of the 127 stars selected from the lick - carnegie survey and this is before the development / inclusion of the dynamic scheduler , thus all data in this paper were obtained using fixed star lists .",
    "our precision doppler observations encompass spectra of 80 stars and incorporate 600 hours of open shutter time .",
    "the stars span spectral types from early g to mid m , have 3.5 < v < 12 , and are all located within 160 pc ( figure [ fig : apf_cmd ] ) .    every apf star has a set of observations containing between one and seven hundred exposures .",
    "individual exposures are restricted to a maximum length of fifteen minutes to avoid cosmic ray accumulation and to minimize uncertainty when calculating the photon - weighted midpoint times .",
    "additionally , we enforce a total observing time limit of one hour per target per night to ensure that telescope time is not wasted on observing faint objects when conditions are poor .    for each individual exposure , the @xmath5 ( the average fwhm of the star over the integration time ) of the guide camera s seeing disk",
    "is logged in the fits image header , along with the total number of photons from the exposure meter and the total exposure time .",
    "colors , magnitudes and distances for the stars are obtained from simbad @xcite .",
    "color - magnitude diagram for stars observed with apf and used in the analysis described herein .",
    "color coding represents the number of exposures that have been obtained for each star .",
    "our dataset spans a wide range in color and magnitude and contains stars with spectral types from f6 to m4.,height=302 ]    all spectra are analyzed using the data reduction techniques described in detail by butler et al .",
    "( 1996)@xcite , which produces a measurement of the stellar rvs and associated internal uncertainties .",
    "the reduction pipeline analyzes each exposure s extracted spectrum in 2  chunks and determines the radial velocity shift for each chunk individually .",
    "the final reported velocity is the average over all the chunks , while the internal uncertainty is defined as the rms of the individual chunk velocity values about the mean , divided by the square root of the number of chunks .",
    "thus the internal uncertainty represents errors in the fitting process , which are dominated by the photon noise .",
    "the internal uncertainty does not include potential systematic errors associated with the instrument , nor does it account for astrophysical noise ( or `` jitter '' ) associated with the star and , therefore , represents only a lower limit to the accuracy of the data for finding companions .",
    "we use the apf s 737 individual exposures of hd 185144 ( sigma draconis , hr 7462 ) , a bright rv standard star , to estimate the precision with which we can measure radial velocities .",
    "it should be noted that the radial velocity values produced by our analysis pipeline are all relative velocities and thus have a mean value of zero .",
    "we examine the unbinned , or individual , exposures , finding that star s mean internal uncertainty is @xmath6 @xmath0and that the mean of the absolute values of its velocity measurements is @xmath7 @xmath0 . because @xmath8 includes effects from the internal uncertainty _ in addition _ to other sources of error such as the stellar jitter and the instrument systematics ,",
    "its value is always higher than the internal uncertainty value for a given exposure .",
    "the difference between these two parameters implies an additional quadrature offset of @xmath9 @xmath0 , which we then generalize as @xmath10 @xmath0(figure [ fig:185144_unc ] ) .",
    "we take this offset value to represent the additional error contributions from all other systematics , including the known 5 - 15 minute pulsation modes of the star that the binned data averages over and the systematics from the instrument . if , instead , we compared the mean internal uncertainty to the standard deviation of the velocity measurements ( @xmath11 @xmath0 ) we would require a larger additional offset term ( @xmath12 @xmath0 ) @xmath0  for hd 185144 .",
    "this value is notably smaller than the standard deviation of the individual velocities , @xmath11 @xmath0 , because we deliberately acquired 6 observations of hd 185144 in order to both average over the pulsation modes and achieve a high precision for the final binned observations . ] .",
    "we note , however , that the data are strongly affected by the velocities of exposures that fall in the outlying , non - gaussian tail .",
    "we thus choose to determine our error estimate using the mean of the absolute values of the velocity measurements ( instead of the standard deviation of the velocities ) as it mitigates the influence of the outliers .",
    "we use the relations of wright et al .",
    "( 2005)@xcite , which presents radial velocity jitter estimates at the 20@xmath13 percentile , median and 80@xmath13 percentile levels to assess the expected stellar activity for hd 185144 .",
    "we find an estimated median jitter of @xmath14 @xmath0 , and a 20@xmath13 percentile value of @xmath15 @xmath0 .",
    "noting that the @xmath16 percentile value matches the @xmath17 for our exposures , obtained over a timespan of 400 days , suggests that the star is in fact intrinsically quiet .",
    "that is to say , we expect only 20% of stars with the same evolution metric , activity metric ( both described by wright 2005 ) and b - v color as hd 185144 to have activity levels less than @xmath15 @xmath0 .",
    "given that we measure @xmath7 @xmath0 , hd 185144 is , at a minimum , much quieter than expected based on its color , activity and evolution .",
    "even so , it is reasonable to expect that some fraction of the observed uncertainty is due to the star itself ( astrophysical noise ) or currently unknown planets rather than instrumental effects , thus indicating that the instrument is performing very well .",
    "radial velocities from apf exposures on the star hd 185144 [ g9v , @xmath18 = 4.68 ] , 737 points in total .",
    "the internal uncertainty estimates produced by the data reduction pipeline are noticeably smaller than the actual spread in the data .",
    "the internal error does not account for telescope systematic errors or sources of astrophysical noise in the star .",
    "our average internal uncertainty is @xmath19 = 1.0 @xmath0(blue line ) but we find the mean absolute value of the hd185144 velocity measurements to be @xmath8 = 1.8 @xmath0(purple line ) .",
    "we adopt an estimate that the additional systematic uncertainty in our velocity precision is @xmath20 = 1.5 @xmath0 .",
    ", height=302 ]    to verify that the size of the offset between @xmath19 and @xmath8 is not specific to the hd 185144 data set , we compare the mean values of these parameters for every star observed by the apf during the time span of figure [ fig:185144_unc ] .",
    "that is , we apply the same procedure detailed above for hd 185144 to all stars observed during the same date range , and then compute and compare the mean values of @xmath19 and @xmath8 for each star s set of exposures ( figure [ fig : muabs_meanintunc ] ) .",
    "as expected , the values for the mean of the absolute radial velocity values are always higher than the mean internal uncertainty values because @xmath8 includes the effects of the internal uncertainty combined with additional sources of error such as the stellar jitter and instrument systematics .",
    "additionally some of these stars are planet hosts , and thus display even higher @xmath8 values because of the planet s influence . however the quietest , non - planet hosting stars are able to reach @xmath8 values of slightly less than 2 @xmath0 , suggesting that the additional error offset value determined using hd 185144 ( @xmath10 @xmath0 ) is appropriate .",
    "mean values of @xmath19 and @xmath8 for each star observed during the same time span as the hd 185144 analysis presented in figure [ fig:185144_unc ] .",
    "the @xmath8 values are always larger because they include the internal uncertainty _ in addition _ to other effects such as stellar jitter and instrument systematics . for bright , quiet stars it is possible to reach @xmath8 values of 1.8 @xmath0.,height=302 ]",
    "to create an efficient and scientifically informative exoplanet survey we must balance scientific interest in a range of target stars with the observing limitations presented by the weather and the telescope s physical constraints .",
    "there are a number of criteria of astronomical importance . for each star ,",
    "the following parameters are utilized by the scheduling software to determine whether the star is given a high rating for observation :    * observing priority - a numerical rating that reflects the observers assessment of potential keplerian signals in the rv data . * desired cadence - dictates the desired wait time between observations of a specific target . * desired precision - the average allowable internal velocity uncertainty for measurements of a specific target .",
    "both observing priority and cadence are determined via the observers examination of the star s existing data set . as mentioned in section [ sect : data ] , we use the publicly available systemic console to analyze our rv data sets .",
    "the console produces a lomb - scargle periodogram from the selected rv data set , which displays peaks corresponding to periodic signals in the data . when a peak surpasses the analytic _ false alarm probability _",
    "( fap ) threshold defined by this method , the observers note the period and the half - amplitude of the signal and use those values to decide upon an observing cadence and desired level of precision that will fill out the signal s phase curve quickly and with data points of the appropriate snr .",
    "the desired precision is further refined if the observers have some knowledge of the star s stellar activity , as this sets a lower limit to the attainable precision .",
    "details on the fitting procedures and the statistical capabilities of the systemic console are described in detail in meschiari et .",
    "al , 2009 .    for each star",
    ", this information ( along with other characteristics such as right ascension , declination , the v magnitude and the b - v color ) is stored in an on - line google spreadsheet accessible to team members and the telescope software .",
    "this database of target stars drives the survey design and target selection while also being easily accessed , understood and updated by observers .      in perfect conditions ( no clouds , no loss of light due to seeing )",
    "all stars that are physically available and deemed in need of a new observation ( based on their cadence ) are simply ranked by observing priority and position in the night sky and then observed one after another , until dawn .",
    "cloud cover and atmospheric turbulence , however , make such conditions rare .",
    "furthermore , stars with low declinations spend only short periods at low air mass .",
    "consequently there are a substantial number of constraints that affect the quality of an exposure . in order to maximize the scientific impact of each night s exposures ,",
    "the conditions must be evaluated dynamically , and data taken only when the desired precision listed in the database is likely to be attainable .    to identify the targets that can be expected to attain their desired precision within the one hour observing time limit",
    ", the observing program must link the night - time conditions and the physical characteristics of each star with the resulting internal uncertainty over a given exposure time . to this end",
    ", we first relate the internal uncertainty of a given exposure to the number of photons that fall in the iodine ( i@xmath21 ) line - dense region of the spectrum ( i.e. the @xmath22  bandpass ) where our radial velocity analysis is performed .",
    "we fit the relation between internal uncertainty and photons in the iodine region separately for the g and k star data set ( comprised of 2790 g star exposures and 957 k star exposures ) and the m star data set ( comprised of 837 m star exposures ) .",
    "because information on a star s rv value comes from the location of its spectral lines , we expect the m stars - which contain many more spectral lines - to achieve better precision for the same number of photons .",
    "this expectation is validated by figure [ fig : i2_uncert ] where a vertical offset between the g / k star best - fit line and the m star best - fit line is evident .",
    "comparing the zero points for the best - fit lines ( table 1 ) , we find a factor of 2 difference between the stellar groups .",
    "thus the m stars reach the same level of internal uncertainty with half the number of photons required by the g and k star population . additionally , the slopes of both best - fit lines are close to the _",
    "m_=  -2 expected for shot - noise limited observations with _",
    "-1.58 and -1.73 for the g / k and m stars , respectively .",
    "the fact that the slopes are shallower than _",
    "m_=  -2 , indicating performance better than shot - noise limited , is reasonable as the internal uncertainty only accounts for the errors resulting from the extraction of the spectrum from the original fits files .",
    "we emphasize that this is just a piece of the error budget , and does not include other random or systematic errors .     observations of g ( blue ) , k ( green ) and m ( red ) type stars during the 1.5 years of apf / levy observations .",
    "we plot the individual 2,790 g star exposures , 957 k star exposures and 837 m star exposures .",
    "the gray diamonds represent m star data obtained using keck / hires as part of the lick - carnegie planet survey where the keck / hires pixels have been scaled to match the same   /pixel scale as the apf / levy ( @xmath23 /pixel ) .",
    "we find that the g and k stars have the same zero point and the same slope , so we combine these two data sets for this analysis .",
    "the green and blue dashed line represents the best - fit to the apf / levy s combined g and k star dataset , while the red line shows the best - fit to the apf / levy m star data set which is fit separately due to the increase of spectral lines in later spectral types .",
    "as expected , the apf / levy m stars show higher data precision for the same number of photons in the @xmath24 region of the spectrum . the percent errors quoted on the figure",
    "are calculated using the scatter in the difference between the observed @xmath24 photons and the @xmath24 photons from the best - fit lines , so they represent the scatter of the sample and not the error on the mean .",
    "the dark gray line is the best - fit to the keck / hires m star data set . comparing this to",
    "the red line reveals that the apf requires 5.75x fewer photons in the @xmath24 region to achieve velocity precision comparable to keck / hires on m stars down to at least m@xmath25=10.,height=377 ]    the functional form of these best - fit lines is given by equation [ eq : i2_unc ] .",
    "note that the numeric values for each variable ( in the case of eq [ eq : i2_unc ] , a and b ) are listed in table 1 .",
    "this format will be used for all relations presented in ",
    "[ sect : inputs ] .",
    "functional form of the fits applied in figure [ fig : i2_uncert ] :    @xmath26    the gray points in figure [ fig : i2_uncert ] correspond to spectra of m stars obtained with keck / hires since november 2002 as part of the lick - carnegie planet search .",
    "there are 168 stars represented , all with b - v @xmath27 1.2 , resulting in 8872 individual exposures . in order to compare these individual velocities to those obtained on the apf in a meaningful way , we rescale the keck / hires pixels so that they represent the same range of   per pixel as those on the the apf / levy .",
    "this involves two different scaling factors as the hires instrument underwent a detector upgrade in 2004 that changed its pixel size from 24@xmath28 to 15@xmath28 , resulting in different sampling values . applying these factors",
    "means that all of the data shown in figure [ fig : i2_uncert ] represents the median number of @xmath29 per pixel , where each pixel covers @xmath23 - the native value for the apf / levy in the @xmath24 region .",
    "the figure shows that for m stars , the apf requires @xmath35.75x fewer photons in the @xmath30 region to achieve velocity precision comparable to keck@xcite , which is proportional to the ratio of the resolutions , @xmath31 . for hires , the `` throughput '' ( the resolving power times the angular size of the slit ) is 39,000 `` @xcite and for the apf it is 114,000''@xcite .",
    "normally hires was used with the 0.861 `` slit giving a filled aperture resolution of 45k while for the levy a 1 '' slit is used , so the ratio of the resolutions is 2.5 .",
    "the levy demonstrates a larger than expected improvement over hires which could be explained by the increased number of lines in the iodine region for m dwarfs .",
    "further investigation is beyond the scope of the current paper but we plan to include such analysis in a future publication .",
    "we note that the excellent seeing at mk means that some data were observed with a much higher effective r , up to 90k , which may explain the large scatter we see in figure 5 . ]",
    "speed estimates for the apf / levy , carried out last year@xcite , show that the telescope and instrument together are approximately 6x slower than keck / hires .",
    "combining these two effects indicates that the apf has essentially the same speed - on - sky as keck / hires for precision rvs of m stars .",
    "this is not altogether unexpected , as hires was never specifically optimized for precision rv work .",
    "the apf s levy spectrograph was purpose - built for high - precision , rv science and therefore features much higher spectral resolution and finer wavelength sampling than hires . both of these factors , as well as the significantly higher system efficiency of the apf / levy optical train over that of keck / hires@xcite ,",
    "combine to make apf as fast as keck / hires for precision rv work on m dwarfs , at least down to m@xmath25=10 .    where n@xmath32 is the median number of photons per pixel in the i@xmath21 region for a given exposure , and @xmath33 is the estimated internal uncertainty for the resulting radial velocity value .    to assess whether the exposures of these stars represent a gaussian distribution , we compare the standard rms and the scatter calculated using a tukey s biweight method around each fit .",
    "the tukey s biweight scatter provides a more robust statistic for data drawn from a non - gaussian distribution as it less heavily weights the outliers , which are assumed not to be part of a normal distribution @xcite . for the g and k star fit ,",
    "the standard rms is 0.182 while the biweight scatter is 0.186 .",
    "similarly , for the m stars , the standard rms is 0.151 while the biweight scatter comes out to 0.155 .    in the limit of a true gaussian distribution",
    ", these two metrics would produce the same result . employing a bootstrap analysis of each method",
    ", we find the standard deviation of both the rms and the biweight scatter of the g and k star sample to be 0.002 .",
    "similarly , the standard deviation of both the rms and the biweight scatter of the m star sample is 0.003 .",
    "noting the similarity of these standard deviations with the actual offsets found between the rms and biweight scatter , we determine that the observations for both sets of stars are drawn from a mostly gaussian distribution .        knowing the median number of photons per pixel in the iodine region required to achieve a given level of rv precision enables us to determine the expected exposure time for a star _ if _ we know how quickly those photons accumulate . to determine this rate and the relation between the final exposure meter value and the number of photons in the @xmath24 region ( used to set upper bounds on observing time ) we study a subset of the year of apf data described in section [ sect : data ] .",
    "cuts are applied to the main data set to select only those observations taken on clear nights and in photometric conditions , as non - photometric data will induce skew in the results .",
    "first , we select only exposures with seeing @xmath34 , which results in 935 individual observations .",
    "we then perform separate , multi - variate linear regressions on the photon accumulation rate in the @xmath24 region of the spectrum and the photon accumulation rate for the exposure meter ( eq [ eq : linregress_i2 ] , eq [ eq : linregress_expmeter ] ) on all remaining data points . in each case , we calculate the variance of deviations from the best - fitting relation for all of the data .",
    "we also calculate the variance for all of the points on a given night .",
    "we then reject nights using the f - ratio test .",
    "namely , if the standard deviation of a given night is more than twice the standard deviation of the population as measured by the tukey s biweight then all observations from that night are rejected .",
    "this results in data sets of 865 exposures used in the @xmath24 photon accumulation rate regression and 816 exposures in the exposure meter photon accumulation rate regression .",
    "points that fall significantly below the regression line are most likely due to clouds while those falling above the line are likely due to erroneous readings from the exposure meter .",
    "once the nights with large variance have been removed , we repeat the regressions on the remaining points to determine the actual fits described in section [ sec : regressions ] . in figures [ fig : linregress_i2 ] and [ fig : linregress_expmeter ] the points in color are those used to perform the linear regressions , while the points in gray are those we rejected after they were deemed non - photometric .",
    "figure [ fig : i2_expmeter ] uses the same set of data as figure [ fig : linregress_expmeter ] in order to keep only the normally distributed exposure meter readings .      to determine the predicted observation time of a star",
    ", we perform a multi - variate linear regression using the trimmed dataset resulting from the procedure described in the previous section .",
    "the regression estimates the rate at which photons accumulate in the pixels of the iodine region of the spectrum , and accounts for [ 1 ] the star s v magnitude , [ 2 ] its b - v color , [ 3 ] slit loss due to the current seeing conditions , [ 4 ] the airmass based on the star s location and [ 5 ] the modified date of the observation ( figure [ fig : linregress_i2 ] ) .",
    "the modified date is calculated by subtracting the maximum date from each observation following the selection process described above .",
    "this makes the zero point of the relationship the value at the time of the last photometric observation .",
    "we use the modified date parameter to address the degradation of the telescope s mirror coatings over time . when the mirrors are recoated it will introduce a discontinuity in this parameter , and we will then adjust the zero point of all regression fits based on the new throughput estimates and watch for any changes that develop in the slope of the regressions .    the multi - parameter fit over these five variables results in a best - fit plane ,",
    "of which we present a projection in figure [ fig : linregress_i2 ] . to help visualize the goodness of fit",
    ", we plot the data on one axis , the linear regression combination on the other and place a 1:1 line on top .",
    "this approach is also used when plotting the linear regression in figure [ fig : linregress_expmeter ] .",
    "multi - variate linear regression of the iodine pixel photon accumulation rate which incorporates stellar color , stellar magnitude , atmospheric seeing and airmass .",
    "colored points are used in calculating the regression , while gray points have been rejected as non - photometric data as described in section [ sec : dataselection ] .",
    "the black line is a 1:1 relationship , and the grey dashed line shows the relation offset by one standard deviation , which is the limit we use operationally .",
    "the strong correlation between the data and the regression line enables prediction of the rate of photon accumulation in the spectrum s iodine region ( a value not calculated until the data reduction process ) using the stellar properties and ambient conditions . we can thus estimate the observation time required to meet a specific median i2 photon value , and , in conjunction with figure [ fig : i2_uncert ] , a radial velocity precision.,height=302 ]    the regression gives :    @xmath35    with    @xmath36    where r@xmath37 is the photon accumulation rate in the iodine region , _ z _ is the angle of the star relative to zenith",
    ", mjd is a modified julian date and @xmath38 is the fraction of the starlight that traverses the spectrograph slit .    by dividing the number of @xmath30 region photons necessary to meet our desired rv precision ( derived from eqn [ eq : i2_unc ] ) with the photon accumulation rate in the @xmath30 region calculated using eqn [ eq : linregress_i2 ] , we can determine the predicted observation time for a star for a specified internal uncertainty in a given set of conditions .",
    "these predicted observation times account for atmospheric conditions such as seeing and airmass , but do not address the issue of atmospheric transparency .",
    "the apf lacks an all - sky camera with sufficient sensitivity to assess the brightness of individual stars , meaning that we can not evaluate the relative instantaneous transparency of different regions of the sky .",
    "instead we must determine the transparency during each individual observation by comparing the rate of photon accumulation we observe with what is expected for ideal transparency .",
    "although the @xmath24 region photons provide a straightforward way to determine the predicted exposure times , the number of iodine region photons is available only after the final fits file for an observation has been reduced to yield a radial velocity measurement .",
    "thus we can not monitor in real time the rate at which they are registered by the detector to assess the cloud cover .",
    "instead , we compute a transparency estimate during each exposure using the telescope s exposure meter . the exposure meter is created by using series of 2d images from the guider camera that are updated every 1 - 30 seconds depending on the brightness of the target . rather than guiding on light reflected off a mirrored slit aperture , as is traditionally done",
    ", the apf uses a beamsplitter to provide 4% of incoming light to the guider camera as a fully symmetric , unvignetted seeing disk .",
    "this allows a straightforward way to monitor how well the telescope is tracking its target and provide realtime corrections to both under and over guiding - both of which smear out the telescope s point spread function on the ccd and result in broader full width at half maximum values for spectral lines .",
    "guide cameras that utilize the reflected light off of a mirrored slit aperture are significantly more sensitive to these problems in good seeing , as the majority of the light falls through the spectrograph slit . in our experience , the loss of 4% of the star s light is acceptable if it ensures that the telescope s guiding is steady throughout the night and across the different regions of the sky .",
    "after each guiding exposure is completed , the guide camera then passes the 2d fits images it creates to the sourceextractor software @xcite which analyzes each image and provides statistics on parameters such as the flux and full - width at half - maximum ( fwhm ) , which are in turn used to evaluate the current atmospheric seeing .",
    "these guide camera images are also used to meter the exposures .",
    "each image is integrated over the rectangular aperture corresponding to the utilized spectrograph slit , with background photons ( determined using adjacent , background - estimating rectangles ) subtracted off to determine the number of star - generated photons accumulated by the guide camera .",
    "analysis of the existing apf data suggests that the exposure meter rate ( much like the iodine photon accumulation rate ) depends on the star s color , its v magnitude , the atmospheric seeing ( in the form of slit losses ) , the airmass and the date of observation . a multi - variate linear regression to the exposure meter rate over these five terms results in the correlation displayed in figure [ fig : linregress_expmeter ] .",
    "because the exposure meter is rapidly updated , we can monitor photon accumulation in real - time during an observation .",
    "atmospheric seeing is already incorporated into the @xmath39 term in the linear regression ( eqns [ eq : v_corr ] , [ eq : linregress_expmeter ] ) , so any decrease from the expected exposure meter rate likely stems from an increase in clouds and corresponding decrease in atmospheric transparency .",
    "the ratio of expected exposure meter rate to observed exposure meter rate provides a  slowdown \" factor that the scheduler tracks throughout the night and multiplies by the predicted ` clear night ' observation times calculated using eqn [ eq : linregress_i2 ] to determine a best guess exposure duration .",
    "multi - variate linear regression to the exposure meter photon accumulation rate , as measured on the apf guider , which incorporates stellar color , stellar magnitude , atmospheric seeing and airmass .",
    "colored points are used in calculating the regression , while gray points have been rejected as described in section [ sec : dataselection ] .",
    "the black line is a 1:1 relation , and the grey dashed line shows the relation offset by one standard deviation , which is the limit we use operationally .",
    "the strong correlation permits prediction of the expected exposure photon accumulation rate for a given star in photometric conditions , and thus provides a measure of the transparency .",
    "any decrease in exposure photon accumulation rate from what is predicted is presumed to arise from decreases in atmospheric transparency brought about by cloud cover.,height=302 ]    the regression in figure [ fig : linregress_expmeter ] gives :    @xmath40    where r@xmath41 is the photon accumulation rate on the exposure meter , @xmath42 , @xmath43 , @xmath44 and c@xmath41 have the same meanings as in eqn [ eq : linregress_i2 ] but for the exposure meter photon accumulation rate instead of the iodine photon accumulation rate , _ z _ is the star s zenith angle , and v@xmath45 is defined in eqn [ eq : v_corr ] .      finally , because of the scatter seen in figures [ fig : linregress_i2 ] and [ fig : linregress_expmeter ] , we must ensure that exposures end when photons sufficient to achieve the desired rv precision have accumulated instead of continuing on for extra seconds or minutes .",
    "photons in the @xmath24 region ca nt be monitored during the observation .",
    "however the apf data set shows a strong relationship between the number of photons obtained in the @xmath24 region of the spectrum and the photons registered by the exposure meter , which is monitored in realtime .",
    "the telescope s guide camera , which is used for the exposure meter , has a broad bandpass and is unfiltered .",
    "this generates a strong color - dependent bias when comparing the guider photons to those that fall in the much narrower @xmath24 region .",
    "we apply a quadratic b - v color correction term to produce the relation shown in figure [ fig : i2_expmeter ] . combining this with the equations identified in figure [ fig : i2_uncert ] ,",
    "we obtain relations that allow us to relate the desired internal precision to the corresponding number of photons in the iodine region of the spectrum , and then to the number of photons required on the exposure meter .",
    "the resulting exposure meter threshold is used to place an upper limit on the exposure .",
    "this is particularly useful on nights with patchy clouds , where the cloud cover estimate calculated during the previous observation can be significantly higher than the cloud cover in other parts of the sky - resulting in artificially high predicted observation times . in this case , the exposure meter can be used to stop an observation if the desired photon count is reached early , improving efficiency .",
    "color - corrected relationship between the photons in the @xmath24 region of the spectrum and the photons registered by the exposure meter .",
    "the black line shows the best - fit , and the grey dashed line shows the relation offset by one standard deviation , which is the limit we use operationally . to increase telescope efficiency",
    ", we require a way to ensure observations do nt continue when the number of iodine region photons necessary to achieve the desired internal uncertainty has already been achieved .",
    "as described in section [ sec : regressions ] there is no way to measure the @xmath24 region photon accumulation in real time .",
    "however , the tight correlation between @xmath24 photons and photons on the exposure meter ( which does update in real time ) displayed here allows us to set a maximum exposure meter value based on our desired precision level .",
    "thus the observation software will end the exposure when the specified exposure meter value is met , even if the open shutter time falls short of the predicted observation time .",
    "this is particularly useful for cases where the cloud cover used in calculating the predicted observation time is actually more than the cloud cover on the target , which would result in an erroneously long observation.,height=302 ]    fit applied in figure [ fig : i2_expmeter ] :    @xmath46    where r is the ratio of photons on the exposure meter to photons in the iodine region of the spectrum .",
    "the above relations are combined to enable the scheduling algorithm to select scientifically optimal targets .",
    "the following list summarizes the combination scheme . +",
    "* steps to determining an object s predicted observation time and exposure meter cut - off *    1 .",
    "query spreadsheet for stellar attributes ( v , b - v , required precision , ra , dec , observing priority ) .",
    "2 .   use equation [ eq : i2_unc ] to determine the desired number of photons in the @xmath30 region of the spectrum .",
    "3 .   use equation [ eq : linregress_i2 ] to calculate the observation time required to obtain the desired total number of @xmath24 region photons in ideal transparency conditions .",
    "4 .   multiply the slowdown factor , calculated during the previous observation using eqn [ eq : linregress_expmeter ] , with the ideal transparency observation time estimates to get the predicted observation time in current conditions .",
    "calculate the exposure meter threshold based on the required number of @xmath30 region photons using eqn [ eq : i2_expmeter ] .",
    "we find scatters of 11.5% and 11.1% in figures [ fig : linregress_i2 ] and [ fig : i2_expmeter ] respectively ( table 1 ) .",
    "this means that , even on a photometric night , we may not accumulate the number of photons in the @xmath24 region necessary for the desired precision as the photon arrival rate could be too low . to increase the likelihood of getting enough photons to reach the desired number of photons in the @xmath24 region",
    ", we increase the observation time estimate and the exposure meter threshold by 11.5% and 11.1% , or one standard deviation . by implementing this padding factor",
    "we ensure that 84% of the time we observe a target , we will obtain the desired number of @xmath30 photons .",
    "however , this does not necessarily guarantee that we will achieve the desired internal uncertainty , due to the scatter in the relation between the @xmath24 region photons and the uncertainty estimates seen in figure [ fig : i2_uncert ] and quantified in table 1 .    using these predicted observation times",
    ", the scheduler can evaluate whether any potential target can be observed at its desired precision within the one - hour observation time limit .",
    "combining the predicted observation times with the targets coordinates determines whether it will remain within the allowed @xmath47 elevation range during the exposure .",
    "stars that satisfy all these criteria are then ranked based on their observing priority , time past cadence requirement , and distance from the moon , with the highest scoring star being selected for observation .",
    "the scheduler then transmits the necessary information for the selected star , including its expected observation time and exposure meter threshold , to the observing software , breaking up the total observation time into a number of individual exposures if necessary .",
    "exposures obtained during 2013 and 2014 indicate that some factors initially suspected to be important need not impact target selection considerations .",
    "for example , the original observing protocol avoided targets within 45@xmath4 of the direction of any wind above 5 mph to avoid wind shake in the telescope .",
    "we find , however , no discernible increase in the internal uncertainty ( indicated by the color scale in figure [ fig : wind_plot ] ) as a function of wind speed or direction .",
    "this resilience likely stems from an effective wind shielding mode for the dome shutters , which opens them just enough to ensure that there is no vignetting of the target star @xcite .",
    "in addition , substantial effort has been put into tuning the telescope s servo motors in order to  stiffen \" the telescope and thus mitigate the effect of wind gusts that do manage to enter the dome @xcite .",
    "windspeed ( point size ) and direction ( azimuthal position ) plotted for 3155 individual exposures reveals no strong correlation between pointing near / into the wind and the estimated internal uncertainty displayed in the color bar .",
    "the exposures represented in this figure were obtained before we had the means to determine condition - based exposure times .",
    "thus all exposures were run until the reached their exposure meter threshold , or up to a static maximum exposure time of 900s and then terminated , regardless of the number of photons collected by the exposure meter .",
    "this means the wind based effects are not being mitigated by longer exposure times , and wind direction can thus be ignored when deciding which stars are considered viable targets for the next observation.,height=302 ]    we also previously assigned higher priority to targets with elevation in the 60 - 70@xmath4 range , removing scientifically interesting targets that were closer to the horizon from consideration . as shown in figure [ fig : el_error ] , however , there is no significant loss in velocity precision as a function of elevation from 90@xmath4 down to 20@xmath4 thanks to the telescope s atmospheric dispersion corrector ( adc ) which works down to 15@xmath4 .",
    "the telescope has a hard observing limit of 15@xmath4 because of the adc s range and because working at lower elevations leads to vignetting by the dome shutters .",
    "we still enforce an elevation range of @xmath47 to avoid mechanical problems in telescope tracking at the high elevations .. working at elevations approaching our lower limit does result in longer predicted observation times ( due to the airmass term ) which can result in stars being skipped over in favor of other , higher elevation targets .",
    "the radial velocity precision as a function of the elevation shows no strong correlation , once we compare observations with a fixed exposure meter value . as our linear regressions in figure 4 and 5 account for the decline in the photon accumulation rate with decreasing elevation",
    ", we do not need to add an additional term to account for other elevation effects such as increased seeing .",
    "similar to the figure [ fig : wind_plot ] , the observations presented here were taken before the adaptive exposure time software was in use .",
    "thus every exposure has a static maximum exposure time of 900s and the low elevation effects are not being mitigated by allowing for longer exposures .",
    "the telescope s adc only functions down to 15@xmath4 , the same elevation at which the telescope begins to vignette on the dome shutter , thus providing the lower limit for our observations.,height=302 ]    finally , we no longer assign a weighting value to the slew time necessary to move between targets .",
    "the apf is capable of moving at 3@xmath48  in azimuth and 2@xmath48  in elevation , which means that a direct slew to a target across the sky would take only one minute .",
    "because the ccd takes approximately 40 seconds to read out each observation , this slew time factor is small enough to be considered unimportant .",
    "furthermore , with the introduction of the wind shielding mode , the telescope s movement was altered so that it must first drop to a  safe elevation \" of @xmath49 before rotating to the target azimuth and then moving upwards to the appropriate elevation .",
    "this is done to protect the primary mirror from falling debris while the dome shutters are reconfigured to minimize wind - effects for the next observation during the slew .",
    "an additional result is that all slews take approximately the same amount of time , which provides justification for discounting slew time as an input to target selection .",
    "in section [ sect : inputs ] , we described a method to predict observation times for targets given their precision requirements and the current atmospheric conditions . to automate the determination of these observation times and the selection of the optimal target at any time throughout the night we have implemented a dynamic scheduler ( written in python ) called heimdallr .",
    "heimdallr runs all of the apf s target selection efforts and interfaces with pre - existing telescope control software so that , once it submits an observation request , it waits until that set of exposures is completed before reactivating .",
    "telescope safety , system integrity , and alerts about current weather conditions are monitored by two services called apfmon and checkapf .",
    "each of these software sets has the ability to override heimdallr if they detect conditions that pose a threat to , or represent a problem with , the telescope .",
    "this ensures that the facility s safety is always given priority .",
    "additionally , while directing the night s operations , heimdallr uses other pre - existing utilities including openatnight , prep - obs and closeup which , as their names suggest , open the facility prior to nightfall ( or when night time conditions warrant ) , prepare the instrument and optical train for observing , and close the facility , securing the telescope when conditions warrant .",
    "the setting of the guider camera , the configuration of dome shutters and the control of telescope movement to avoid interference with the cables wrapped around the telescope base is handled by yet another utility called scriptobs .      typically , heimdallr initiates in the afternoon and prompts the instrument control software to focus the instrument by obtaining a dewar focus cube ( series of exposures of the quartz halogen lamp taken through the iodine cell ) using the standard observation slit .",
    "once the software determines a satisfactory value for the instrument s dewar position ( via a simple linear least squares parabolic fit to the focus values ) , it proceeds to take all of the calibration exposures that are required by the data reduction pipeline . upon completing these tasks ,",
    "heimdallr then waits until dusk , at which point it consults checkapf to ensure that there are no problematic conditions in the weather and then apfmon to ensure facility readiness . if both systems report safe conditions , it then opens the dome , allowing the telescope to thermalize with the outside air .",
    "heimdallr runs a main loop that continuously monitors a variety of keywords supplied by the telescope . at 6@xmath4 twilight ,",
    "the telescope is prepped for observing and begins by choosing a rapidly rotating b star from a pre - determined list .",
    "the b star has no significant spectral lines in the @xmath24 region and serves as a focus source for the telescope s secondary mirror while also allowing the software to determine the current atmospheric conditions ( as described in section [ sec : regressions ] ) .    at 9@xmath4 twilight",
    ", heimdallr accesses the online database of potential targets and parses it to obtain all the static parameters described in section 3.1 .",
    "it then checks the current date and time and eliminates from consideration those stars not physically available .",
    "the scheduler then employs the stars coordinates , b - v colors and v magnitudes , combined with the seeing and atmospheric transparency determined during the previous observation , to calculate the predicted observation time for each target given their desired precision levels .",
    "stars unable to reach the desired precision within the one hour maximum observation time are eliminated from the potential target list .",
    "the remaining stars are ranked based on scientific priority and time past observing cadence .",
    "the star with the highest score is passed to scriptobs to initiate the exposure(s ) .",
    "when the exposures finish , heimdallr updates the star s date of last observation in the database with the photon - weighted midpoint of the last exposure and begins the selection process anew .    when the time to 9@xmath4 morning twilight becomes short enough that no star will achieve its desired level of precision before the telescope must close , heimdallr shuts the telescope using closeup and initiates a series of post - observing calibration exposures .",
    "once the calibrations finish , heimdallr exits .",
    "in addition to making dynamic selections from the target database during the night , heimdallr can also be initiated in a fixed list or ranked fixed list operational mode .",
    "the fixed list mode allows observers to design a traditional starlist that heimdallr will move through , sending one line at a time to scriptobs .",
    "any observations that are not possible ( due to elevation constraints ) will be skipped and the scheduler will simply move to the next line .",
    "the ranked fixed list option allows users to provide a target list that heimdallr parses to determine the optimal order of observations .",
    "that is , after finishing one observation from the list , the scheduler will then perform a weighting algorithm similar to what is employed by the dynamic use mode to determine which line of the target list is best observed next .",
    "heimdallr keeps track of all the lines it has already selected , so that they do not get initiated twice , and will re - analyze the remaining lines after each observation to select the optimal target .",
    "this option is especially useful for observing programs that have a large number of possible targets but do nt place a strong emphasis on which ones are observed during a given night .",
    "there are a number of automated and semi - automated facilities that perform similar observations .",
    "examples include harps - n , carmenes , the robo - ao facility at palomar and the las cumbres observatory global telescope ( lcogt ) network . in order to place the apf s operations in context relative to these other observatories",
    ", we will briefly discuss the approaches of these other dedicated radial velocity facilities ( carmenes , harps - n , and the nres addition to lcogt ) and of the more general facility with queue scheduling ( robo - ao ) .",
    "we will then highlight the common approaches along with discussing what is simpler for our facility as it is dedicated to a single - use .",
    "radial velocity surveys generally require tens or hundreds of observations of the same star to detect planetary companions .",
    "traditionally , high - precision velocities were obtained on shared - use facilities and observing time was limited .",
    "more recently , however , purpose built systems ( such as harps ) have presented the opportunity to obtain weeks or months of contiguous nights .",
    "the harps - n instrument , installed on the telescopio nazionale galileo at roque de los muchachos observatory in the canary islands , is a premier system for generating high - precision velocities . at present , it is primarily devoted to kepler planet candidate follow up and confirmation .",
    "the system allows users to access xml standard format files that define target objects using the short - term - scheduler gui ( sts ) to guide the process and then assemble the objects into an observing block .",
    "when an observer initiates an observation , these blocks and their associated observing preferences are passed to the harps - n sequencer software , which places all of the telescope subsystems into the appropriate states , performs the observation , and then triggers the data reduction process @xcite .",
    "thus , while the building of target lists has been streamlined , nightly observation planning still requires attention from an astronomer or telescope technician .",
    "the forth - coming calar alto carmenes instrument is expecting first light in 2015 .",
    "+ carmenes will also be used to obtain high - precision stellar radial velocity measurements on low - mass stars .",
    "its automated scheduling mechanism relies on a two - pronged approach : the off - line scheduler which plans observations on a weekly to nightly time scale based on target constraints that can be known in advance , and the on - line scheduler which is called during the evening if unexpected weather or mechanical situations arise and require adapting the previously calculated nightly target list @xcite .",
    "finally , the lcogt network will soon implement the network of robotic echelle spectrographs ( nres ) , six high resolution optical echelle spectrographs slated for operation in late 2015 .",
    "like all instruments deployed on the lcogt network , the scheduling and observing of nres will be autonomous .",
    "users submit observing requests via a web interface which are then passed to an adaptive scheduler which works to balance the requests observing windows with the hard constraints of day and night , target visibility , and any other user specified constraints ( e.g. exposure time , filter , airmass ) .",
    "if the observation is selected by the adaptive scheduler , it creates a  block \" observation tied to a specific telescope and time .",
    "this schedule is constructed 7 days out , but rescheduling can occur during the night if one or more telescopes become unavailable due to clouds , or if new observing requests arrive or existing requests are canceled . in this event , the schedule is recalculated , and observations are reassigned among the remaining available sites @xcite .",
    "robo - ao is the first fully automated laser guide star adaptive optics instrument .",
    "it employs a fully automated queue scheduling system that selects among thousands of potential targets at a time with an observation rate of @xmath50 objects @xmath51 .",
    "its queue scheduling system employs a set of xml format files which use keywords to determine the required settings and parameters for an observation .",
    "when requested , the queue system runs each of the targets through a selection process , which first eliminates those objects that can not be observed , and then assigns a weight to the remaining targets to determine their priority in the queue at that time .",
    "the optimal target is chosen , and the scheduler passes all observation information to the robotic system and waits for a response that the observations were successfully executed .",
    "once the response is received , the observations are marked as completed and the relevant xml files are updated @xcite .",
    "we have designed this system based on our rv observing program carried out over the past 20 years at keck and other facilities .",
    "this experience , coupled with the preexisting software infrastructure , has guided the development of both the dynamic scheduler software itself and our observing strategy .",
    "comparison to these other observing facilities and the strategies they employ emphasizes some shared design decisions .",
    "for example , the apf has a similar target selection approach to that of the robo - ao system .",
    "both utilize a variety of user specified criteria to eliminate those targets unable to meet the requirements and then rank the remaining targets , passing the object with the highest score to the observing software .",
    "additionally , as is common with all of the observing efforts mentioned above , our long term strategy is driven by our science goals and is in the hands of the astronomers involved with the project .",
    "several differences are also notable .",
    "the first is that we lack an explicit long term scheduling component in our software .",
    "our observing decisions are made in real time in order to address changes in the weather and observing conditions that occur on minute to hour time scales , and to maximize the science output of nights impacted by clouds or bad seeing .",
    "however , for a successful survey there must also be a longterm observing strategy for each individual target .",
    "we address this need via a desired cadence and required precision for every potential target . by incorporating the knowledge of how often each star needs to be observed and a way to assess whether the evening s conditions are amenable to achieving the desired precision level , heimdallr adheres to the longterm observing strategy outlined by our observing requirements and does nt need to generate separate multi - week observing lists .",
    "a second difference is that the final output of the scheduler is a standard star list text file , one line in length .",
    "this format has been in use in uco - supported facilities such as lick and keck observatories for more than 20 years , and thus is familiar to the user community .",
    "the file is a simple ascii text file with key value pairs for parameters and a set of fixed fields for the object name and coordinates .",
    "this permits ready by - eye verification of the next observation if desired and allows the user to quickly construct a custom observing line that can be inserted into the night s operations if needed .",
    "observers can furthermore easily make a separate target list in this format for observations when not using the dynamic scheduler ( see sec [ sect : modes ] )    finally , we use a google spreadsheet for storing target information and observing requirements , as opposed to a more machine - friendly format such as xml .",
    "although lick observatory employs a firewall to sharply limit access to the apf hosts , it only operates on the incoming direction .",
    "thus it is straightforward and non - compromising from a security standpoint for our internal computers to send a request to google and pull the relevant data back onto the mountain machines .",
    "this approach provides team members with an accessible , easy - to - read structure that is familiar and easily exportable to a number of other formats .",
    "google s version control allows for careful monitoring of changes made to the spreadsheet and ensures that any accidental alterations can be quickly and easily undone .",
    "the use of the google software also allows interaction with a browser , so no custom gui development is required .",
    "therefore , we are taking advantage of existing software to both minimize our development effort , and make it as easy as possible to have the scientists update and maintain the core data files that control the observations .",
    "the apf has operated at high precision for over a year , and has demonstrated precision levels of @xmath52 @xmath0on bright , quiet stars such as sigma draconis@xcite . the telescope s slew rate permits readout - limited cycling and 80 - 90% open shutter time , allowing for 50 - 100 doppler measurements on clear nights .",
    "heimdallr s design dovetails with the need to automate the continued selective monitoring of more than 1,000 stars observed at high doppler precision at keck over the past 20 years @xcite .",
    "the apf achieves a superior level of rv precision and much - improved per - photon efficiency in comparison to keck / hires for target stars with v < 10 . as a primary user",
    ", we can employ the apf on 100 + nights per year in the service of an exoplanet detection survey .    at present",
    ", 127 stars have been prioritized for survey - mode observation with the apf .",
    "this list emphasizes stars that benefit from the telescope s more northern location , and gives preference to stars that display prior evidence of planetary signals .",
    "we adopt a default cadence of 0.5 observations per night . when a star is selected , it is observed in a set of 5 - 15 minute exposures with the additional constraint that the total of a night s sequential exposures ( the observation time ) on the star is less than an hour . additionally , information obtained at keck has , in some cases , permitted estimates for the stellar activity of specific target stars . in these cases ,",
    "observation times can be adjusted to conform to a less stringent desired precision .    with its ability to predict observation times",
    ", heimdallr readily achieves efficiencies that surpass the use of fixed lists , and indeed , its performance is comparable to that of a human observer monitoring conditions throughout the night .",
    "heimdallr is readily adopted to oversee a range of observational programs , and a particularly attractive usage mode for apf arises in connection with nasa s transiting exoplanet survey satellite ( tess ) mission .",
    "tess is scheduled for launch in 2017 , and is the next transit photometry planet detection mission in nasa s pipeline @xcite .",
    "transit photometry observations of potential planet signatures generally require follow - up confirmation , with rv being the most common .",
    "currently there is a dearth of high - precision rv facilities in the northern hemisphere , and harps - n is heavily committed to kepler planet candidate follow up .",
    "nasa recently announced plans to develop an instrument for the 3.5 m wiyn telescope at kitt peak observatory capable of extreme precision doppler spectrography to be used for follow up of tess planet candidates @xcite .",
    "however such an instrument will require time for development and commissioning and thus is not a viable candidate for pre - launch observations of tess target stars .",
    "the apf s year - round access to the bright stars near the north ecliptic pole , which will obtain the most observation time from tess , makes it an optimal facility to conduct surveys in support of the satellite s planet detection mission .    at present , comparatively little is known about the majority of tess s target stars .",
    "we have little advance knowledge of which stars host properly inclined , short - period transiting planets observable by the satellite .",
    "we will thus start with a default value for the observing cadence and be poised to adapt quickly should hints of planetary signatures start to emerge .",
    "additionally , initial desired precisions ( and the corresponding observation times ) must rest on the suspected stellar jitter of the targets .",
    "the availability of on - line databases to track all of the science - based criteria will be crucial for moving back and forth quickly between this project and further lick - carnegie follow up .",
    "evaluations of the value of apf coverage are governed by three scientific criteria ( priority , cadence and required precision ) , along with supporting physical characteristics ( ra , dec , v and b - v ) for each target .",
    "thus when beginning rv support for tess , heimdallr can easily be instructed to reference the tess database when determining the next stellar target ( instead of the lick - carnegie list ) .",
    "tess observations also provide an excellent test bed for experimenting with alternate observational strategies .",
    "for example , sinukoff et al .",
    "( 2014)@xcite stated that obtaining three 5-minute exposures of a star spaced approximately two hours apart from one another during the night results in a 10% increase in precision over taking a singe 15 minute exposure .",
    "the tess stars that will be monitored by the apf are all located in the north ecliptic pole region , meaning that the slew times will be almost negligible .",
    "it is thus likely that an observing mode that subdivides exposures to improve precision could be very valuable . in short ,",
    "the apf is extremely well matched to the tess mission .",
    "we are pleased to acknowledge support from the nasa tess mission through mit sub award # 5710003702 .",
    "we are also grateful for partial support of this work from nsf grant ast-0908870 to ssv , and nasa grant nnx13af60 g to rpb .",
    "this material is based upon work supported by the national aeronautics and space administration through the nasa astrobiology institute under cooperative agreement notice nnh13zda017c issued through the science mission directorate .",
    "this research has made use of the simbad database , operated at cds , strasbourg , france .",
    "s.  s. vogt , m.  radovan , r.  kibrick , r.  p. butler , b.  alcott , s.  allen , p.  arriagada , m.  bolte , j.  burt , j.  cabak , k.  chloros , d.  cowley , w.  deich , b.  dupraw , w.  earthman , h.  epps , s.  faber , d.  fischer , e.  gates , d.  hilyard , b.  holden , k.  johnston , s.  keiser , d.  kanto , m.  katsuki , l.  laiterman , k.  lanclos , g.  laughlin , j.  lewis , c.  lockwood , p.  lynam , g.  marcy , m.  mclean , j.  miller , t.  misch , m.  peck , t.  pfister , a.  phillips , e.  rivera , d.  sandford , m.  saylor , r.  stover , m.  thompson , b.  walp , j.  ward , j.  wareham , m.  wei , and c.  wright , `` apf - the lick observatory automated planet finder , '' _ publications of the asp _ * 126 * , 359379 ( 2014 ) .",
    "b.  j. fulton , l.  m. weiss , e.  sinukoff , h.  isaacson , a.  w. howard , g.  w. marcy , g.  w. henry , b.  p. holden , and r.  i. kibrick , `` three super - earths orbiting hd 7924 , '' _ astrophysical journal _ * 805 * , 175 ( 2015 ) .",
    "m.  v. radovan , g.  f. cabak , l.  h. laiterman , c.  t. lockwood , and s.  s. vogt , `` a radial velocity spectrometer for the automated planet finder telescope at lick observatory , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _ , _",
    "society of photo - optical instrumentation engineers ( spie ) conference series _ * 7735 * , 4 ( 2010 ) .",
    "n.  c. santos , f.  bouchy , m.  mayor , f.  pepe , d.  queloz , s.  udry , c.  lovis , m.  bazot , w.  benz , j .- l .",
    "bertaux , g.  lo curto , x.  delfosse , c.  mordasini , d.  naef , j .-",
    "sivan , and s.  vauclair , `` the harps survey for southern extra - solar planets .",
    "ii . a 14 earth - masses exoplanet around @xmath53 arae , '' _ astronomy & astrophysics _ * 426 * , l19l23 ( 2004 ) .",
    "x.  dumusque , n.  c. santos , s.  udry , c.  lovis , and x.  bonfils , `` planetary detection limits taking into account stellar noise .",
    "ii . effect of stellar spot groups on radial - velocities , '' _ astronomy & astrophysics _ * 527 * , a82 ( 2011 ) .",
    "j.  burt , s.  s. vogt , r.  p. butler , r.  hanson , s.  meschiari , e.  j. rivera , g.  w. henry , and g.  laughlin , `` the lick - carnegie exoplanet survey : gliese 687 - a neptune - mass planet orbiting a nearby red dwarf , '' _ the astrophysical journal _ * 789 * , 114 ( 2014 ) .",
    "r.  w. noyes , l.  w. hartmann , s.  l. baliunas , d.  k. duncan , and a.  h. vaughan , `` rotation , convection , and magnetic activity in lower main - sequence stars , '' _ astrophysical journal _ * 279 * , 763777 ( 1984 ) .",
    "s.  meschiari , a.  s. wolf , e.  rivera , g.  laughlin , s.  vogt , and p.  butler , `` systemic : a testbed for characterizing the detection of extrasolar planets .",
    "i. the systemic console package , '' _ publications of the asp _ * 121 * , 10161027 ( 2009 ) .",
    "m.  wenger , f.  ochsenbein , d.  egret , p.  dubois , f.  bonnarel , s.  borde , f.  genova , g.  jasniewicz , s.  lalo , s.  lesteven , and r.  monier , `` the simbad astronomical database .",
    "the cds reference database for astronomical objects , '' _ astronomy and astrophysics _ * 143 * , 922 ( 2000 ) .",
    "s.  s. vogt , s.  l. allen , b.  c. bigelow , l.  bresee , b.  brown , t.  cantrall , a.  conrad , m.  couture , c.  delaney , h.  w. epps , d.  hilyard , d.  f. hilyard , e.  horn , n.  jern , d.  kanto , m.  j. keane , r.  i. kibrick , j.  w. lewis , j.  osborne , g.  h. pardeilhan , t.  pfister , t.  ricketts , l.  b. robinson , r.  j. stover , d.  tucker , j.  ward , and m.  z. wei , `` hires : the high - resolution echelle spectrometer on the keck 10-m telescope , '' in _ instrumentation in astronomy viii _ , d.  l. crawford and e.  r. craine , eds .",
    ", _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 2198 * , 362 ( 1994 ) .",
    "k.  lanclos , m.  peck , m.  saylor , r.  i. kibrick , and s.  l. allen , `` tuning a 2.4-meter telescope ... blindfolded , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _ , _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 9145 * , 4 ( 2014 ) .",
    "r.  cosentino , c.  lovis , f.  pepe , a.  collier cameron , d.  w. latham , e.  molinari , s.  udry , n.  bezawada , m.  black , a.  born , n.  buchschacher , d.  charbonneau , p.  figueira , m.  fleury , a.  galli , a.  gallie , x.  gao , a.  ghedina , c.  gonzalez , m.  gonzalez , j.  guerra , d.  henry , k.  horne , i.  hughes , d.  kelly , m.  lodi , d.  lunney , c.  maire , m.  mayor , g.  micela , m.  p. ordway , j.  peacock , d.  phillips , g.  piotto , d.  pollacco , d.  queloz , k.  rice , c.  riverol , l.  riverol , j.  san juan , d.  sasselov , d.  segransan , a.  sozzetti , d.  sosnowska , b.  stobie , a.  szentgyorgyi , a.  vick , and l.  weber , `` harps - n : the new planet hunter at tng , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _ , _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 8446 * , 1 ( 2012 ) .    a.  garcia - piquer , j.  gurdia , j.  colom , i.  ribas , l.  gesa , j.  c. morales , a.  prez - calpena , w.  seifert , a.  quirrenbach , p.  j. amado , j.  a. caballero , and a.  reiners , `` carmenes instrument control system and operational scheduler , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _",
    ", _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 9152 * , 21 ( 2014 ) .",
    "j.  d. eastman , t.  m. brown , j.  hygelund , j.  van eyken , j.  r. tufts , and s.  barnes , `` nres : the network of robotic echelle spectrographs , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _ , _ society of photo - optical instrumentation engineers ( spie )",
    "conference series _ * 9147 * , 16 ( 2014 ) .",
    "r.  l. riddle , k.  hogstrom , a.  papadopoulos , c.  baranec , and n.  m. law , `` the robo - ao automated intelligent queue system , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _ , _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 9152 * , 1 ( 2014 ) .",
    "g.  r. ricker , j.  n. winn , r.  vanderspek , d.  w. latham , g.   .",
    "bakos , j.  l. bean , z.  k. berta - thompson , t.  m. brown , l.  buchhave , n.  r. butler , r.  p. butler , w.  j. chaplin , d.  charbonneau , j.  christensen - dalsgaard , m.  clampin , d.  deming , j.  doty , n.  de lee , c.  dressing , e.  w. dunham , m.  endl , f.  fressin , j.  ge , t.  henning , m.  j. holman , a.  w. howard , s.  ida , j.  jenkins , g.  jernigan , j.  a. johnson , l.  kaltenegger , n.  kawai , h.  kjeldsen , g.  laughlin , a.  m. levine , d.  lin , j.  j. lissauer , p.  macqueen , g.  marcy , p.  r. mccullough , t.  d. morton , n.  narita , m.  paegert , e.  palle , f.  pepe , j.  pepper , a.  quirrenbach , s.  a. rinehart , d.  sasselov , b.  sato , s.  seager , a.  sozzetti , k.  g. stassun , p.  sullivan , a.  szentgyorgyi , g.  torres , s.  udry , and j.  villasenor , `` transiting exoplanet survey satellite ( tess ) , '' in _ society of photo - optical instrumentation engineers ( spie ) conference series _",
    ", _ society of photo - optical instrumentation engineers ( spie ) conference series _ * 9143 * , 20 ( 2014 ) ."
  ],
  "abstract_text": [
    "<S> we report initial performance results emerging from 600 hours of observations with the automated planet finder ( apf ) telescope and levy spectrometer located at uco / lick observatory . </S>",
    "<S> we have obtained multiple spectra of 80 g , k and m - type stars , which comprise 4,954 individual doppler radial velocity ( rv ) measurements with a median internal uncertainty of 1.35 @xmath0 .    </S>",
    "<S> we find a strong , expected correlation between the number of photons accumulated in the 5000 - 6200  iodine region of the spectrum , and the resulting internal uncertainty estimates . </S>",
    "<S> additionally , we find an offset between the population of g and k stars and the m stars within the data set when comparing these parameters . as a consequence of their increased spectral line densities , </S>",
    "<S> m - type stars permit the same level of internal uncertainty with 2x fewer photons than g - type and k - type stars . when observing m stars , we show that the apf / levy has essentially the same speed - on - sky as keck / hires for precision rvs .    in the interest of using the apf for long - duration rv surveys , we have designed and implemented a dynamic scheduling algorithm . </S>",
    "<S> we discuss the operation of the scheduler , which monitors ambient conditions and combines on - sky information with a database of survey targets to make intelligent , real - time targeting decisions .    </S>",
    "<S> : jennifer burt , uco / lick observatory , 1156 high st , santa cruz , usa , 95060 ; e - mail : </S>"
  ]
}