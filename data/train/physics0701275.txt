{
  "article_text": [
    "particle identification in the belle experiment is based upon a composite system of subdetectors , as illustrated in fig .",
    "[ belle_pid ] .",
    "this hybrid system consists of ionization loss measurements ( de / dx ) in the central drift chamber ( cdc ) , cherenkov light emission measurement in the barrel and endcap aerogel chernkov counters ( acc ) , and flight time measurement in the time of flight ( tof ) system . as indicated in the lower section of this figure",
    ", the three systems work together to cover the momentum range of interest . of these recording systems ,",
    "the tof system makes the most severe demands on time resolution .",
    "indeed , given the 2ns spacing between rf buckets ( and possible collisions ) , it is not known at recording time to which collision a given particle interaction in the tof system corresponds .",
    "= 3.2 in    precision time recording in a very high rate environment requires an encoding scheme capable of continuous recording , with a minimum of deadtime per logged event . at the time of the construction of the belle experiment  @xcite at the kek",
    "b - factory  @xcite , a decision was made to unify the entire detector readout ( except for the silicon vertex detector ) on the lecroy 1877 multi - hit tdc module .",
    "this fastbus module is based upon the mtd132a asic  @xcite , which has a 0.5ns resolution encoding , comparable to a number of similar devices  @xcite .",
    "given the limited manpower for daq system development and maintenance , this proved to be a wise choice .",
    "the intrinsic time resolution was quite adequate for recording the timing information from the cdc , as well as the amplitude information ( through use of a charge - to - time converter ) for the cdc and acc .",
    "the challenge then was to be able to record pmt hits with 20ps resolution , using a multi - hit tdc having 500ps least count , and for collisions potentially separated by only 2ns .",
    "this latter constraint meant that traditional techniques using a common start or stop could not be applied , since the bunch collision of interest was not known at the time at which the hits need to be recorded .",
    "moreover , in order to avoid incurring additional error due to comparing a separate fiducial time , it is desirable to directly reference all time measurements to the accelerator rf clock .",
    "the solution adopted was a so - called time stretcher circuit , developed by one of the authors in conjunction with the lecroy corporation  @xcite .",
    "this work built upon valuable lessons learned in developing a similar recording system for the particle identification detector system of the cplear experiment  @xcite .",
    "the principle of operation is seen in fig .",
    "hits are time - dilated with respect to the accelerator clock and recorded at coarser resolution , but in direct proportion to the stretch factor employed .",
    "statistically , by also logging the raw hits , this stretch factor can be determined from the data .",
    "= 3.2 in    as seen in fig .",
    "[ ts ] , four timing edges are recorded for each hit signal .",
    "the leading edge corresponds to the actual output time of the discriminator .",
    "this rising edge is paired with a falling edge , corresponding to the 2nd accelerator reference clock ( rf clock divided by 16 ) occuring after the initial hit timing .",
    "the interval of interest is then bounded to be between about 16 - 32 ns . with a tdc least count of 0.5ns , a factor of twenty time expansion",
    "is needed  the stretch factor . in the figure",
    "the third edge corresponds to the time - expanded version of the interval between the rising and falling edges .",
    "a benefit of this technique is that it provides self - calibration . by recording a large number of events",
    ", the stretch factor can be extracted from the data itself since the raw and expanded signals are recorded .",
    "a 4th edge is provided , two clock rising edges after the 3rd edge , to provide a return to known state before next pulse .",
    "an obvious drawback in this scheme is that the deadtime for each hit will be something like 320 - 640ns , as will be discussed later .    in more detail",
    ", the signal chain of the current belle tof electronics  @xcite , is sketched in fig .",
    "[ toffee ] .",
    "= 3.2 in    high and low level discriminators are used , with the high - level used to reject background photon hits in the tof and a low - level threshold used to provide the best possible leading edge timing .",
    "the charge of triggered events is also recorded with a charge to time ( q - to - t ) asic , which is recorded with the same common tdc module .",
    "charge recording is needed to correct for amplitude dependent timing effects in the discriminator itself .",
    "the tof readout system has worked well for almost a decade . increased luminosity ( already 60% over design ) has lead to much higher single channel rates than had been specified in the design . from the beginning ,",
    "the maximum design specification was 70khz of single particle interaction rate for each channel . at this rate",
    "the expected inefficiency would be a few percent , comparable to the geometric inefficiency ( due to cracks between scintillators ) .    already the world s highest luminosity collider , the kekb accelerator  @xcite can now produce in excess of one million b meson pairs per day . upgrade",
    "plans call for increasing this luminosity by a factor of 30 - 50 , providing huge data samples of 3rd generation quark and lepton decays . precise interrogation of standard model predictions will be possible , if a clean operating environment can be maintained .",
    "extrapolation of current occupancies to this higher luminosity mandates an upgrade of the readout electronics .",
    "the current system already suffers from significant loss of efficiency with higher background rates , as may be seen in fig .",
    "[ occ ] .",
    "in considering an upgrade to the tof readout electronics , it is worthwhile to consider the needs of an upgraded pid system for belle . a comparative study of the belle system , as depicted in fig .",
    "[ belle_pid ] , with that of babar  @xcite pid system is informative .",
    "it is clear in fig .",
    "[ pidbakeoff ] the direct internally reflected cherenkov ( dirc ) detector of babar has a higher efficiency and lower fake rate than the hybrid tof / acc scheme used by belle .",
    "= 5.5 in    indeed , it was realized in the construction stage of belle that such a dirc - type detector would have merits , and prototypes were explored  @xcite . while these results were very promising ,",
    "the schedule risks led the collaboration to stick with technologies in which significant time and effort had already been invested .",
    "thinking about an upgrade , it is reasonable to revisit the choice of technology . in the intervening decade",
    ", significant progress has been made in the development of ring imaging cherenkov ( rich ) detectors  @xcite , as well as detectors based upon the arrival time of the cherenkov photons , such at the correlated cherenkov timing ( cct )  @xcite and time of propagation ( top )  @xcite counters .    because of the great cost encumbered in the procurement and construction of the csi crystal calorimeter , it is planned not to upgrade the barrel section . as a consequence , the volume available for the tof / acc replacement detector is rather limited .",
    "therefore a rich type detector has not been pursued .",
    "the most promising technologies to date are those illustrated in fig .",
    "[ pidconcept ] .",
    "the top concept uses timing in place of one of the projected spatial dimensions to reconstruct the cherenkov emission ring .",
    "a focusing dirc is principally using geometry to reconstruct the cherenkov ring segments .",
    "however , in this case precision timing is still very useful for two important reasons .",
    "first it allows for the possibility of using timing to correct for chromatic dispersion in the emission angle of the cherenkov photon . and",
    "second , fine timing allows time of flight to be measured using the quartz radiator bar .",
    "therefore , in both of the viable detector options considered , a large number of fine timing resolution recording channels are required . in the case of a finely segmented focusing dirc  @xcite option",
    ", the number of readout channels could be comparable to that of the current silicon vertex detector .",
    "clearly if such a detector is to be viable , significant integration of the readout electronics will be essential .",
    "not shown is a proposal for a multi - segmented tof detector consisting of short scintillator bars .",
    "while this option remains viable ( and the electronics presented would work well with such a system ) , the pid performance degradation of such a system is probably unacceptable . of the choices listed ,",
    "the most attractive in terms of performance is a focusing dirc detector , if the issues of the photodetector and readout can be addressed .",
    "either as an upgrade of only the readout electronics or as a prototype for a higher channel count pid detector , it is worth considering improvements to the existing readout .",
    "the time stretcher technique has worked very well and belle has been able to maintain approximately 100ps resolution performance with the tof system .",
    "a slow degradation with time is consistent with loss of light output .",
    "detailed monte - carlo simulation  @xcite has been able to reproduce much of the performance of the tof system and the degradation is consistent with light loss due to crazing of the scintillator surface .",
    "a larger concern is the significant degradation of tof system performance due to high hit rates .",
    "while the multi - hit tdc is capable of keeping up with high rates ( though the limited number of recorded edges ( 16 ) also leads to inefficiency ) , by its very nature , the time stretcher output can not be significantly reduced .",
    "recently , the clock speed was doubled , to help reduce this effect . nevertheless , at ever higher hit rates , the deadtime leads to ever increasing inefficiency .",
    "= 5.5 in    a logical solution to this problem is to introduce a device which has buffering .",
    "also , while taking the effort to reduce the deadtime , it makes sense to consider a much more compact form - factor .",
    "this was done with the thought toward moving to a larger number of readout channels in a future belle pid upgrade  @xcite , as mentioned earlier .",
    "one proposed solution is the monolithic time stretcher ( mts ) chip , a prototype of which is shown in fig .",
    "[ mts1 ] .",
    "the fundamental logic of the device is identical to that currently in use with two major changes :    1 .",
    "high density 2 .",
    "multi - hit    high density is achieved by replacing discrete emitter - coupled logic components on daughter cards with a full custom integrated circuit .",
    "this higher integration permits having multiple time stretcher channels for each input . by toggling to a secondary output channel",
    ", the deadtime can be significantly reduced . once a hit is processed in one output channel ,",
    "the next is armed to process a subsequent hit .    in fig .",
    "[ mts1 ] the 8 channel repeating structure of each time stretcher circuit is clearly seen in the die photograph .",
    "the basics of the time - stretcher circuit are visible in fig .",
    "[ ts_ckt ] .",
    "a one - shot circuit at the upper left leads to an immediate output signal , as well as starts charging current @xmath0 .",
    "pipelining of the hit signal continues for two clock cycles after which current @xmath0 is switched off and discharge current @xmath1 is switched on .",
    "a comparator monitors the voltage induced on the storage capacitor due to charging and discharging , providing an output signal to indicate the stretched time when the voltage is discharged .",
    "= 5.8 in    = 5.8 in    the stretch factor is given by the ratio of the two currents : @xmath2 .",
    "each input channel of the mts1 has two time stretcher circuits , the second corresponding to the secondary output when the primary channel is active .",
    "each output is recorded by a separate tdc channel . with this configuration at 10% deadtime for a single channel of time stretcher",
    "can be reduced to 1% .",
    "as the the incremental cost of additional tdc channels is rather low , it is possible consider additional buffering depths , which would reduce the deadtime by the @xmath3 , where n is the buffer depth , though that was not explored beyond a depth of two in this device .",
    "reduction of cross - talk and electro - magnetic interference is enhanced by the use of low voltage differential signalling ( lvds ) @xcite .",
    "mts1 is fabricated in the taiwan semiconductor manufacturing corporation @xmath4 m cmos process .",
    "when considering a photodetector with a large number of channels , the form factor of this device is very attractive , as shown for comparison in fig .",
    "[ mts_comp ] , a substantial reduction in size has been achieved . on the left",
    "is a 16-channel fastbus - sized time stretcher card used currently in the belle experiment .",
    "inset is a test board with one of the mts1 packaged devices for comparison , where a dime has been placed on the board for scale .",
    "= 3.2 in    with this level of integration it becomes feasible to consider integration of the time stretcher and tdc electronics on detector , as is being done for detector subsystems in the lhc experiments .      in order to test the performance of the mts1 , a multi - hit tdc should be used . as a demonstration of the power of this time stretching technique , an field programmable gate array ( fpga )",
    "can be used as this tdc  @xcite , where the results from a simple gray - code counter implementation of the hit time recording may be seen in fig .",
    "[ timing_resol ] .",
    "the rms of the distribution is about 840ps for the xilinx spartan-3 device used .",
    "this resolution could be improved by use of a faster fpga , though is sufficient to obtain the test results shown below .",
    "indeed , it is worth noting that this combined time - stetcher + fpga technique is very powerful for two important reasons :    1 .   low - cost , high - density tdc implementation 2 .",
    "deep and flexible hit buffering and trigger matching logic    = 3.2 in    a test sweep of the mts1 input is shown in fig .  [ mts1_linear ] , where it should be noted that due to the encoding scheme it is only meaningful to scan within a time expansion clock cycle period .",
    "a scan of expansion ratios was performed and the best results were obtained for stretch factors of 40 - 50 .",
    "= 3.2 in    as can be seen , there is some non - linearity in the expanded time .",
    "this is more clearly seen when a plot of the residual distribution is made by subtracting off the linear fit , as shown in fig .",
    "[ mts1_resid ] .",
    "a periodic structure is seen , roughly consistent with the expansion clock period , if the negative timing dips are correlated to transition edges .",
    "= 3.2 in      as with the hptdc device  @xcite developed at cern for the alice detector , a fine calibration is needed to obtain a precision comparable to the current belle system .",
    "applying such a calibration , determined in a separate data set , significantly improved linearity and residuals are obtained .",
    "the subsequent results are histogrammed in fig .",
    "[ mts1_resol ] .",
    "= 3.2 in    as can be seen , the timing resolution fits well to a double gaussian , with a narrow sigma less than 20ps , which is comparable to ( and actually slightly better than ) the existing belle system .",
    "this result is consistent with the expectation from the fpga tdc used , where    @xmath5    and the measured sigma is about 15ps .",
    "it is possible that a finer resolution fpga tdc would allow for an even more precise timing determination .    in practice",
    "the systematic effects of the upstream discriminator and its amplitude dependent threshold crossing ( and comparator overdrive ) dependence make any further improvements difficult .",
    "nevertheless it is an interesting question for future exploration .",
    "this timing resolution is comparable to that obtained with the hptdc after careful non - linearity calibration .",
    "the broader gaussian distribution and significant non - gaussian tails are correlated with expansion clock feedthrough to the ramping circuit .",
    "this could be improved in a future version with better layout isolation .",
    "the @xmath6 m process used only had 3 metal routing layers available and migration to a finer feature size process would allow for dedicated shields and better power routing .      in order to reduce deadtime a second time - stretcher circuit , with a separate output ,",
    "is provided for each input channel .",
    "this second circuit becomes armed when the primary stretcher circuit is running .",
    "use of such a scheme can significantly reduce data loss due to arrival of subsequent hit during operation of the first stretcher circuit .",
    "the factor may be expressed as    @xmath7    where n is the number of buffer stages .",
    "for n=2 , the case prototyped here , a large existing deadtime of 20% could be reduced to 4% . moreover",
    ", this technique can be extended to an even larger number of buffer channels , a realistic possibility when using a low cost fpga - based tdc . in the case of 4 outputs ,",
    "a 20% single time stretcher deadtime would become a completely negligible @xmath8 .",
    "apart from the arming circuitry , the second time stretcher channel is identical to the primary .",
    "testing was performed with double - pulse events and the result for the second channel is seen in fig .",
    "[ mts1_buff ] .",
    "= 3.2 in    note that these secondary channels have a time - stretch factor that is systematically smaller .",
    "as the same reference currents are mirrored in all channels , it is believed that this is due to ramp window reduction due to latency in the arming logic .",
    "an important check of performance of the mts1 is the impact of time stretcher operation on one channel while another is operating .",
    "this has been performed in fig .",
    "[ nts32_crosstalk ] , where the timing of the first channel is fixed and the timing relation of the signal in channel 2 is varied .",
    "= 3.2 in    the impact of operation of this second channel is clear during the ramping portion of the readout cycle , as well as the threshold crossing at the end of the ramping interval .",
    "while this effect can be calibrated out to some extent , just like effects of the clock feedthrough , this perturbation to the circuit would be better mitigated through better isolation in the ic layout .",
    "an improved layout paired with future , higher clock frequency fpgas could open the possibility of very dense channel count , sub-10ps resolution tdc recording .    for many applications",
    "the hptdc is perfectly suitable and gives comparable time resolution to the mts1 + fpga tdc . in both cases",
    "a non - linearity correction is required to obtain this resolution . however the time encoding itself is only part of the issue for obtaining excellent timing resolution from a detector output .",
    "correction for time slew in the discriminator threshold crossing is critical .",
    "moreover the addition of many channels of high - speed discriminator inside a detector is a noise and power concern .",
    "compact , high - speed waveform recording  @xcite may be a promising next evolutionary step in the readout of precision timing detectors .",
    "this work was supported by the us - japan foundation and the department of energy advanced detector research award number de - fg02 - 06er41424 .",
    "g. blanar and r. sumner , _",
    "new time digitizer applications in particle physics experiments _ , proc . of the first international conference on electronics for future colliders ,",
    "editors g. blanar and r. sumner , lecroy corporation , new york ( 1991 ) ; technical data sheet , mtd132a , from lecroy corporation , 700 chestnut ridge road , chestnut ridge , ny 11977 . + _ a short list , not meant to be comprehensive : _",
    "w. earle , e. hazen , b. safford , g. varner , `` a deadtimeless multihit tdc for the new g-2 experiment '' , prepared for 4th international conference on electronics for future colliders , chestnut ridge , ny , 11 - 12 may 1994 , pp 223 - 232 .",
    "m. passaseo , e. petrolo , s. veneziano , `` design of a multihit tdc integrated circuit for drift chamber readout '' , prepared for 5th international conference on electronics for future colliders , chestnut ridge , ny , 10 - 11 may 1995 , pp 139 - 142 .",
    "+ h. kichimi , y. yoshimura , t. browder , b. casey , m. jones , s. olsen , m. peters , j. rodriguez , g. varner , y. zheng , y. choi , d. kim , j. nam , _ `` the belle tof system '' _ , nucl .",
    ". meth . * a453*:315 - 320 , 2000 .",
    "nam , y.i .",
    "choi , d.w .",
    "kim , j.h .",
    "kim , b.c.k .",
    "casey , m. jones , s.l .",
    "olsen , m. peters , j.l .",
    "rodriguez , g. varner , y. zheng , n. gabyshev , h. kichimi , j. yashima , j. zhang , t.h .",
    "kim and y.j .",
    "kwon , `` a detailed monte carlo simulation for the belle tof system '' , nucl .",
    ". meth . * a 491 * 54 - 68 ( 2002 ) .",
    "low - voltage differential signaling ( lvds ) uses high - speed analog circuit techniques to provide multi - gigabit data transfers on copper interconnects .",
    "it is defined under the electronic industries alliance ( eia)-644 - 1995 standard ."
  ],
  "abstract_text": [
    "<S> identifying light mesons which contain only up / down quarks ( pions ) from those containing a strange quark ( kaons ) over the typical meter length scales of a particle physics detector requires instrumentation capable of measuring flight times with a resolution on the order of 20ps . in the last few years a large number of inexpensive , multi - channel time - to - digital converter ( tdc ) chips have become available . </S>",
    "<S> these devices typically have timing resolution performance in the hundreds of ps regime . </S>",
    "<S> a technique is presented that is a monolithic version of `` time stretcher '' solution adopted for the belle time - of - flight system to address this gap between resolution need and intrinsic multi - hit tdc performance . </S>"
  ]
}