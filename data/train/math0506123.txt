{
  "article_text": [
    "for an infinite cardinal @xmath1 , the set @xmath19 , ordered by end - extension , @xmath20 , is the complete binary tree on @xmath1 with root the empty sequence , @xmath21 .",
    "by @xmath22 denote the _ meet _ of @xmath23 and @xmath24 , namely the longest initial segment of both @xmath23 and @xmath24 .",
    "call two elements @xmath23 and @xmath24 of @xmath19 _ incomparable _ if neither is an end - extension of the other . the lexicographic order for us will be the partial order @xmath25 on @xmath19 defined by @xmath26 if @xmath23 and @xmath24 are incomparable and @xmath27 and @xmath28 .",
    "we also define a linear order @xmath29 on @xmath19 by letting @xmath30 if and only if one of the following conditions holds : ( 1 ) @xmath31 ; ( 2 ) @xmath32 ; ( 3 ) @xmath33 ; or ( 4 ) @xmath23 and @xmath24 are incomparable and @xmath26 .",
    "let us recall the definition of a ( strongly ) @xmath1-dense linear order : it is a linear order @xmath34 on a set @xmath35 in which for every two subsets @xmath36 of @xmath35 of size @xmath8 satisfying the property that for all @xmath37 and @xmath38 the relation @xmath39 holds , there is @xmath40 such that @xmath41 for all @xmath37 and @xmath38 . since",
    "@xmath42 or @xmath43 may be taken empty here , the definition in particular implies that there are no endpoints in the order .",
    "the adjective ` strongly ' is used to distinguish this type of ordering from the strictly weaker notion in which for any @xmath39 in @xmath35 one is required to have @xmath1 many @xmath44 with @xmath41 .",
    "such orders were first studied by felix hausdorff in 1908 ( @xcite ) and have been of continuous interest since . a recent paper on the subject , where one can also find a number of further references , is @xcite by m. damonja and katherine thompson , where they give a classification of @xmath1-dense linear orders which are also @xmath1-scattered . in this paper we shall only deal with strongly @xmath1-dense linear orders so we shall omit the adjective ` strongly ' from our notation .",
    "it is easy to check that for regular @xmath1 the structure @xmath45 is a @xmath1-dense linear order ( see [ lem.density ] ) . in case that @xmath46 then of course this order has cardinality @xmath1 .",
    "all @xmath1 that we shall work with will satisfy this additional cardinal arithmetic assumption .",
    "it is well known and easily proved using a back - and - forth argument that in this case the @xmath1-dense linear order of size @xmath1 is unique up to isomorphism , and that it is a @xmath1-saturated homogeneous model of the theory of a dense linear order with no endpoints .",
    "( in fact these properties are equivalent to @xmath47 , as follows from saharon shelah s classification theory , see @xcite ) .    for @xmath48",
    ", @xmath49 is a countable dense linear order with no endpoints , so it has the order type @xmath50 of the rationals .",
    "an unpublished result of fred galvin as quoted in @xcite is that @xmath51 ^ 2_{<\\omega,2}$ ] , see the notation below .",
    "denis  c. devlin @xcite proved that @xmath52 where the value of @xmath53 is the @xmath54-th tangent number .",
    "the notation here means that for every @xmath54 , when one colors @xmath55^n$ ] with finitely many colors ( this is the role of the part @xmath56 in the subscript ) , there is a copy @xmath9 of @xmath57 with the property that @xmath11^n$ ] is colored in at most @xmath53 colors . at the same time , @xmath53 is the smallest number for which such a statement holds .",
    "tangent numbers may be computed using the power series @xmath58 .",
    "proof used the language of category theory .",
    "a proof of this theorem using trees was sketched in in the farah - todorcevic book @xcite ; a complete proof was given by vojkan vuksanovic @xcite in which he uses the special case for the complete binary tree @xmath59 of keith r. milliken s theorem ( @xcite ) about weakly embedded subtrees . since many of the notions used by vuksanovic generalize to arbitrary infinite @xmath1 in place of @xmath60 , one may wonder if his proof may be used to obtain a partition theorem for @xmath1-dense linear orders .",
    "here we use some of these ideas along with new insights to get such a theorem .",
    "our work was also inspired by the strong diagonalization of norbert sauer in @xcite , the approach to similarities in a triple paper by claude laflamme , sauer and vuksanovic @xcite , and the use of collapses both in the shelah @xcite version of the halpern - luchli theorem and in another paper of vuksanovic @xcite .",
    "one difficulty of the generalization was that the special case of milliken s theorem on binary trees was only known to be valid for @xmath59 , not for an arbitrary @xmath1 .",
    "in particular , suppose @xmath1 is uncountable and @xmath61 is a well - ordering of @xmath19 with the property that whenever @xmath23 is shorter than @xmath24 then also @xmath62 .",
    "define a coloring of the height @xmath63 complete binary trees strongly embedded in @xmath19 by @xmath64 if and only if the lexicographic order and the @xmath61-order agree on the leaves of @xmath65 . for any strongly embedded copy of @xmath19 , this coloring on the binary trees generated by pairs of nodes on the @xmath60th level is essentially the sierpinski partition , so has edges of both colors .",
    "milliken s theorem for weakly embedded subtrees follows from his theorem for strongly embedded subtrees , and to prove it , he uses a generalization of the halpern - luchli theorem due independently to richard laver and david pincus ( see @xcite ) .",
    "here we are able to generalize part of d. devlin s theorem starting with a theorem of shelah from @xcite , which is a generalization of the halpern - luchli theorem @xcite .",
    "we slightly improve shelah s theorem to colorings of antichains rather than only level sets .",
    "let us now state our main result for large dense linear orders .",
    "[ thm.partition ] for every natural number @xmath5 there is a value @xmath66 such that for any cardinal @xmath1 which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath67 is some cardinal satisying @xmath68 , the @xmath1-dense linear order @xmath10 satisfies @xmath69    in theorem [ thm.upper.bound.1 ] , the positive partition relation is shown to hold for @xmath3 the number of _ sparse vip @xmath5-types _ ( defined in section [ sec.upper.bnd.1 ] ) .",
    "the sparse vip @xmath5-types are closely related to those unique @xmath5-element _ strongly diagonal _ subsets of @xmath70 that are representatives of the `` essential types '' in @xcite .",
    "if we close such a strongly diagonal set under initial segments and add a _ vip level order _ , we obtain a sparse vip @xmath5-type , and all sparse vip @xmath5-types are obtained in this way .    in theorem [ thm.lower.bound.1 ]",
    "we show that the negative partition relation holds for the same value of @xmath3 . in theorem [ thm.canon.1 ]",
    "we show that for @xmath1 as in theorem [ thm.partition ] there is a _ canonical partition _ @xmath71 of @xmath12^m$ ] .",
    "that is , a partition whose classes are _ persistent _ and _ indivisible_. we say @xmath72 is _ persistent _ if for every @xmath1-dense @xmath73 the set @xmath74^m\\cap c_j$ ] is non - empty .",
    "we say @xmath72 is _ indivisible _ if for every coloring of @xmath72 with fewer than @xmath1 many colors , there is a @xmath1-dense subset @xmath75 on which @xmath74^m\\cap c_j$ ] is monochromatic .",
    "richard rado @xcite constructed a ( strongly ) universal countable graph in 1964 .",
    "that is , he constructed a countable graph for which every countable graph is an induced subgraph . by a _",
    "@xmath1-rado graph _ we mean a graph @xmath76 of size @xmath1 with the property that for every two disjoint subsets @xmath42 , @xmath43 of @xmath76 , each of size @xmath8 , there is @xmath77 connected to all points of @xmath42 and no point of @xmath43 .",
    "the existence of such @xmath76 follows from the assumption @xmath46 .",
    "note that a @xmath1-rado graph embeds every graph with at most @xmath1-many vertices .",
    "that is , it is universal for the family of graphs of size at most @xmath1 . for @xmath48 , this graph",
    "is also called the infinite random graph .",
    "interest in rado graphs and the uncountable continues .",
    "let @xmath78 denote the @xmath60-rado graph .",
    "recently gregory cherlin and simon thomas @xcite have shown that for any infinite cardinals @xmath79 , the assumption @xmath80 is equivalent to the existence of a graph @xmath81 of size lambda which is elementarily equivalent to @xmath78 and which has a vertex whose set of neighbours has size @xmath1 .",
    "here is our main result on @xmath1-rado graphs .",
    "[ thm.rpartition ] for every natural number @xmath5 there is a value @xmath82 such that for any cardinal @xmath1 which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath67 is some cardinal satisying @xmath68 , the @xmath1-rado graph @xmath83 @xmath84    in theorem [ thm.upper.bound.2 ] , the positive partition relation is shown to hold for @xmath85 the number of _ vip @xmath5-types _ ( defined in section [ sec.upper.bnd.1 ] ) .",
    "the vip @xmath5-types are closely related to those unique @xmath5-element _ strongly diagonal _ subsets of @xmath70 that are representatives of the `` essential types '' used by laflamme , sauer and vuksanovic in @xcite and by vuksanovic in @xcite for the countable rado graph .",
    "if we close such a strongly diagonal set under initial segments and add a _ vip level order _ , we obtain a vip @xmath5-type , and all vip @xmath5-types are obtained in this way .    in theorem [ thm.lower.bound.2 ]",
    "we show that the negative partition relation holds for the same value of @xmath85 .",
    "it is not known if the large cardinal assumptions used in the proof of shelah s theorem from @xcite are optimal ; in section [ sec.remarks ] we comment more on this as well as on the consistency strength of these requirements .",
    "we note that in conjunction with a result of andrs hajnal and pter komjth from @xcite our theorem gives some necessary indestructibility conditions on @xmath1 from shelah s theorem .",
    "the paper also includes a section with a proof of the particular variant of shelah s theorem that we need .    for the remainder of the paper an unattributed @xmath5 will mean a natural number with @xmath86 and @xmath1 a cardinal satisfying the hypotheses of theorem [ thm.partition ] for some number @xmath5 .",
    "in particular , @xmath47 and @xmath1 is a strong limit .",
    "the paper is organized as follows . in section [ sec.uni ] , we define the notion _",
    "@xmath61-similarity _ , and state the special variant of shelah s theorem that we will use .    in section [ sec.upper.bnd.1 ]",
    ", we define the notions of _ diagonal _ , vip order and sparse vip @xmath5-type and use them together with our variant of shelah s theorem to prove theorem [ thm.upper.bound.1 ] .    in section [ sec.almost.perfect ] , we show that for any @xmath87 with @xmath88 , one can build an _ almost perfect _",
    "@xmath1-dense subtree inside the tree of nodes of @xmath19 with a @xmath1-dense set of extensions in @xmath65 .",
    "in section [ sec.lower.bnd.1 ] , we use the construction techniques of section [ sec.almost.perfect ] to prove theorem [ thm.lower.bound.1 ] by showing all sparse vip @xmath5-types are embeddable in every sparse diagonal @xmath1-dense subset .    in section [ sec.sparse.vip.types ] , we show the critical numbers @xmath3 for the @xmath1-dense linear order are bounded below by @xmath89 and bounded above by @xmath90 $ ] , and indicate how one may compute the value of @xmath3 recursively .",
    "we conclude the section with a table of small values of @xmath3 quoted from an upcoming paper by jean larson @xcite .",
    "in section [ sec.shproof ] we prove the variant of shelah s theorem that we use , formulating it using colorings of antichains . in section [ sec.remarks ]",
    "we comment on the necessity of the use of large cardinals in our theorem and in shelah s theorem and the way that the results of this paper shed light on that question .",
    "we also give some open questions .",
    "in section [ sec.upper.bnd.2 ] , we use nuanced diagonalization to prove theorem [ thm.upper.bound.2 ] giving the upper bound on the critical values @xmath91 for @xmath1-rado graphs    in section [ sec.lower.bnd.2 ] , we prove a reduction theorem for the translations to tree form of increasing embeddings of the @xmath1-rado graph @xmath83 : for every such translation with range @xmath92 there is always a particularly nice form of a diagonalization which has range a subset of @xmath92 and is itself the translation of an increasing embedding of @xmath83 into itself .",
    "we use this reduction to prove theorem [ thm.lower.bound.2 ] . by showing",
    "every vip @xmath5-type is embeddable in the range of these particularly nice diagonalizations .",
    "the remainder of this introduction is devoted to background information , including some definitions , notation , and the statements of some theorems that will be used as tools . for any cardinal @xmath67 , let @xmath93^\\lambda$ ] denote the collection of all subsets of @xmath42 of cardinality @xmath67 , and let @xmath93^{<\\lambda}$ ] denote the collection of all subsets of @xmath42 of cardinality less than @xmath67 .    for any tree @xmath94 ,",
    "a node @xmath23 is a _ leaf of @xmath95 _ or _ terminal node of @xmath95 _ if for all @xmath96 , one has @xmath97 .",
    "the notion of the meet of two nodes has already been defined , in the first paragraph of the introduction .",
    "if @xmath23 is a node of @xmath95 and both @xmath98 and @xmath99 have extensions in @xmath95 , then we call @xmath23 a _ splitting node of @xmath95_. for any subset @xmath100 , let @xmath101 denote the _ meet closure _ of @xmath65 , i.e. the set @xmath102 . note that @xmath103 and that @xmath101 is closed under meets and has a unique node of the smallest length .    [ def.is ] for any tree @xmath95 of sequences ordered by end extension , and any node @xmath104 , define the _ set of immediate successors of @xmath23 in @xmath95 _ as @xmath105    [ def.level ] for any tree @xmath95 of sequences under end extension , the _ @xmath106th level of @xmath95 _ , in symbols @xmath107 , is the set of all nodes @xmath108 for which @xmath106 is the order type of the set of predecessors of @xmath24 , namely @xmath109 . for @xmath104 the length @xmath110 is defined to be @xmath106 if and only if @xmath111 . call @xmath95 an _ @xmath106-tree _",
    "if each branch of @xmath95 has order type @xmath106 .    the above notion of an @xmath106-tree in the case that @xmath106 is a cardinal differs from the usual notion of an @xmath106-tree ( see e.g. @xcite ) , which is defined as a tree of height @xmath106 all of whose levels have size @xmath112",
    "we trust that no confusion will arise , but emphasize that our definition is given above .",
    "note that for the complete binary tree @xmath113 , the levels of @xmath95 are @xmath114 for @xmath115 . call @xmath116 a _ level set _ if @xmath117 for some @xmath106 .",
    "milliken ( see definition 1.2 of @xcite ) defined a notion of strongly embedded tree which can be simplified in the case of a binary tree .",
    "the key idea is that there are _ splitting levels _",
    "( see the range of @xmath118 below ) ; all nodes of a strongly embedded tree split at splitting levels as much as is possible , and no splitting occurs elsewhere .",
    "another way to say this is that a strongly embedded subtree of height @xmath106 is a copy of @xmath119 in @xmath19 where levels are mapped to levels .",
    "note that a strongly embedded subtree @xmath65 of @xmath19 is _ not _ required to be an induced subtree of @xmath19 , in the sense that it is not required that @xmath65 is closed under @xmath20 .",
    "[ def.strong.tree ] a subset @xmath87 is _ a strongly embedded subtree of @xmath19 _ if    \\(1 ) @xmath120 is an @xmath106-tree for some @xmath121 ;    \\(2 ) @xmath65 has a root and every non - maximal node @xmath122 has exactly one extension of @xmath98 and one extension of @xmath99 in @xmath123 ;    \\(3 ) there is a _ level assignment function _",
    "@xmath124 which is a strictly increasing function such that for all @xmath125 , @xmath126 ;    \\(4 ) for any limit @xmath125 , for any @xmath127 , there is @xmath128 such that @xmath129 .",
    "note of course that part ( 4 ) above is irrelevant for strongly embedded trees of height @xmath130 , as originally studied by milliken .",
    "as mentioned above , strongly embedded subtrees of @xmath19 are copies of full binary trees of height @xmath131 where levels are mapped to levels . the precise statement of this is the content of lemma [ lem.strong.embed ] .",
    "[ def.strong.embed ] for any subsets @xmath132 and @xmath133 of @xmath19 , a function @xmath134 is a",
    "_ strong embedding _ if it is an injection with the following preservation properties :    1 .   ( extension ) @xmath135 if and only if @xmath136 ; 2 .   ( level order ) @xmath137 if and only if @xmath138 and @xmath139 if and only if @xmath140 ; 3 .",
    "( passing number ) if @xmath141 , then @xmath142 .",
    "[ lem.strong.embed ] an @xmath106-tree @xmath87 is strongly embedded in @xmath19 if and only if there is a strong embedding @xmath143 whose range is @xmath65 .    if @xmath144 is a strong embedding , then there is a level assignment function @xmath145 witnessing the strong embedding in that for all @xmath125 , if @xmath146 , then @xmath147 and the immediate successors of @xmath148 in the range of @xmath149 are @xmath150 and @xmath151 , which are both in @xmath152 .",
    "thus if @xmath149 is a strong embedding its image is a strongly embedded tree .",
    "for the other direction , suppose @xmath153 is a strongly embedded @xmath106-tree and @xmath124 is the level assignment function that witnesses it .",
    "we shall define @xmath149 on @xmath154 such that @xmath149 maps @xmath155 into @xmath156 for all @xmath125 , as follows .",
    "let @xmath157 be the root of @xmath65 .",
    "given @xmath158 non - maximal and of height @xmath159 , let @xmath160 for @xmath161 be the unique extension of @xmath162 in @xmath163 . for @xmath125 limit and @xmath164 , note that @xmath165 is an element of @xmath166 and that it must have an extension in @xmath167 , as @xmath65 is an @xmath106-tree . by requirement",
    "( 4 ) in [ def.strong.tree ] , this extension is unique and we choose it as @xmath168 .",
    "now @xmath149 is a strong embedding whose image is @xmath65 .",
    "let us finish the section by proving the above mentioned fact that for regular @xmath1 the order @xmath169 on @xmath166 is @xmath1-dense .",
    "[ lem.density ] the order @xmath170 is @xmath1-dense if and only if @xmath1 is a regular cardinal .",
    "suppose that @xmath1 is regular and @xmath171 are both of size @xmath8 and such that for all @xmath37 and @xmath38 we have @xmath172 ( we write this as @xmath173 ) .",
    "let @xmath174 .",
    "if @xmath37 and @xmath175 then there is @xmath38 such that @xmath176 , in particular @xmath177 . by the transitivity of @xmath169 we obtain @xmath178 , and hence @xmath179 .",
    "let @xmath180 be the minimal ordinal such that all elements of @xmath181 have length @xmath182 , so by the regularity of @xmath1 we have @xmath183 .",
    "we define @xmath184 by defining @xmath185 for @xmath186 by recursion on @xmath106 . if @xmath187 we set @xmath188 , and we set @xmath189 otherwise .",
    "we claim that @xmath190 .",
    "if @xmath38 then the length of @xmath191 is less than the length of @xmath44 and hence either @xmath192 or @xmath191 and @xmath44 are incomparable . in the first case we have defined @xmath44 so that @xmath193 . in the second case ,",
    "if @xmath106 is the length of @xmath194 and @xmath195 , then @xmath196 so we have defined @xmath188 , contradicting the choice of @xmath106 .",
    "so @xmath197 and @xmath188 .",
    "in both cases we have @xmath198 , and hence @xmath199 .",
    "if @xmath37 and @xmath200 then we claim @xmath201 . otherwise , since the length of @xmath202 is strictly less than that of @xmath44 we have @xmath203 , so @xmath204 must be a member of @xmath205 , a contradiction .",
    "if @xmath202 and @xmath44 are incomparable we can similarly show that @xmath206 .",
    "in any case @xmath207 and we have proved that @xmath208 .",
    "this proves that @xmath209 is @xmath1-dense .",
    "suppose now that @xmath1 is singular and @xmath210 for @xmath211 is an increasing sequence of limit ordinals with limit @xmath1 , and with @xmath212 .",
    "for all @xmath213 let @xmath214 be the sequence in @xmath215 which is constantly equal to 1 , and let @xmath216 . we then have @xmath217 , yet we claim that there is no @xmath218 with @xmath208 .",
    "namely , let @xmath219 for some @xmath115 and let @xmath213 be such that @xmath220 .",
    "then @xmath221 , so @xmath208 can not hold .",
    "this proves that @xmath209 is not @xmath1-dense .",
    "an argument similar to the first part of the above proof is presented in the proof of lemma [ lem.cofinal.dense ] .",
    "in this section we state a particular variant of a theorem of shelah .",
    "his theorem was stated as a generalization of the laver - pincus version of the halpern - luchli theorem , and the variant we state is a generalization of milliken s ramsey theorem for finite weakly embedded subtrees .",
    "before we can state shelah s theorem , we need the definition of two subsets being @xmath61-similar , where @xmath61 is a level ordering of @xmath19 :    [ def.level.order ] say that @xmath61 is a _ level ordering _ of @xmath19 or alternatively that @xmath61 is _ an ordering of the levels _ of @xmath19 , if @xmath61 extends the length order , i.e. @xmath61 is a linear order of @xmath19 and @xmath222 implies @xmath62 .",
    "milliken s theorem for weakly embedded subtrees requires us to recognize subtrees of the same embedding type .",
    "we will be counting the number of types of particularly nice trees at a later point in the paper , so it is convenient to relate these types to specific finite examples called _",
    "similarity trees_.    [ def.sim.tree ] a _ similarity tree _ is a finite subtree of @xmath59 closed under initial segments and such that every level contains at least one leaf ( terminal ) node or meet of leaf nodes ( split point ) .",
    "an _ ordered similarity tree _ is a similarity tree @xmath24 with an ordering @xmath223 of its levels .    for a finite subset @xmath224 of @xmath19",
    "we define as @xmath225 the subtree @xmath226 of @xmath59 that includes the root and is of minimal possible height such that there is a strong embedding from @xmath227 onto the closure @xmath228 of the set @xmath229 of terminal nodes of @xmath226 . if @xmath61 is a given order of @xmath19 then @xmath230 is the order on @xmath225 induced by the strong embedding from @xmath225 to @xmath224 and @xmath61 .    to illustrate the definition ,",
    "consider a specific antichain : @xmath231 further suppose that @xmath61 is the following ordering of the levels : @xmath232 ; @xmath233 ; and @xmath234 .",
    "the corresponding similarity tree is @xmath235 where @xmath236 the induced ordering of the levels is @xmath237 ; @xmath238 ; and @xmath239 .",
    "[ def.ordered.sim ] suppose that @xmath61 is an ordering of the levels of @xmath19 .",
    "two antichains @xmath224 and @xmath226 in @xmath19 are _ similar _ if @xmath240 , and _",
    "@xmath61-similar _ if the ordering @xmath61 induces the same ordering @xmath241 on the collapsed trees . in this case",
    "we call @xmath242 the _ ordered similarity type _ of @xmath243 and @xmath244",
    ".    we remark that if @xmath224 and @xmath226 are @xmath61-similar antichains , then @xmath225 and @xmath245 are subtrees of @xmath19 having the same _ weak embedding type _ , a notion which appears in various places in the literature , see e.g. @xcite and @xcite .",
    "the notion of @xmath61-similarity given above is a translation of the definition of similarity by shelah in definition 2.2 @xcite .",
    "it also corresponds to the notion of _ strong similarity _ from @xcite , which coincides with the notion of _ similarity _ of that paper when restricted to _",
    "strongly diagonal sets_.    theorem  [ thm.shl ] below is a variant of shelah s lemma 4.1 of @xcite together with conclusion 4.2 where it is called  @xmath246 ( even with ( 3 ) ) \" .",
    "in fact , except for the assertion that @xmath149 preserves @xmath61 and that we are dealing with coloring of antichains rather than level sets ( a level set is a subset of @xmath247 for some @xmath115 ) , our theorem  [ thm.shl ] is equivalent to shelah s conclusion  4.2 from that paper with option  ( 3)(b ) .",
    "the fact that @xmath149 preserves @xmath61 implies that option  ( 3)(a ) is automatically satisfied as well .",
    "lemma  [ thm : endhom ] , which is the main lemma in the proof of theorem  [ thm.shl ] , is equivalent to shelah s lemma  4.1 with option  ( 3)(a ) . in shelah",
    "s notation the superscript @xmath248 of lemma 4.1 indicates that one gets a strongly embedded tree @xmath95 , and the subscript @xmath249 means that the coloring restricted to @xmath5-element level sets of @xmath95 is _ homogeneous _ , i.e. is constant on subsets whose collapses under the level assignment function of @xmath95 are @xmath61-similar .",
    "the star orderings , @xmath250 , in this option , are defined from the @xmath251 orderings , @xmath252 .",
    "we use @xmath61 in place of @xmath252 , and will define the order of interest at a later point .",
    "we write @xmath253 for @xmath254 .",
    "thus given a strong embedding @xmath255 , @xmath256 is translated by @xmath257 , which holds if and only if @xmath62 .",
    "we also note that the statement of the theorem as we give it only refers to a dense set of elements @xmath258 . a proof of theorem  [ thm.shl ] will be given in section [ sec.shproof ] .",
    "the following notation is introduced for convenience .",
    "write @xmath259 for the set of all extensions @xmath260 in @xmath19 .",
    "[ thm.shl][shelah @xcite ] suppose that @xmath261 and @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 .",
    "then for any coloring @xmath262 of the @xmath5-element antichains of @xmath19 into @xmath263 colors , and any well - ordering @xmath61 of the levels of @xmath19 , there is a strong embedding @xmath264 and a dense set of elements @xmath258 such that    1 .",
    "@xmath265 for all @xmath62 from @xmath259 , and 2 .",
    "@xmath266)=d(e[b])$ ] for all @xmath61-similar @xmath5-element antichains @xmath202 and @xmath191 of @xmath259 .",
    "in this section we prove a limitation of colors result for @xmath1-dense linear orders using shelah s theorem [ thm.shl ] .",
    "we turn to some ideas from work of sauer , laflamme and vuksanovic and others for ways to guarantee that the @xmath5-element sets of our yet to be chosen transverse set have a minimal number of ( unordered ) weak embedding types .",
    "the notions of _ diagonal _ set and _ strongly diagonal _ set are used in @xcite , for example .",
    "our definitions below are simplifications of those definitions to the special case of binary trees .",
    "[ def.diagonal ] call @xmath267 _ diagonal _ if it is an _ antichain _ ( its elements are pairwise incomparable ) , and its meet closure , @xmath268 , is transverse .",
    "call it _ strongly diagonal _ if , in addition , for all all @xmath269 and all @xmath270 , the following implication holds : @xmath271    [ lem.diag ] for any finite diagonal set @xmath272 , its meet closure has @xmath273 elements and @xmath274 .",
    "thus for positive @xmath261 , the number of ordered similarity types of @xmath5-element diagonal sets is finite .    in the case of @xmath1-dense linear orders , we are particularly interested in _ sparse diagonal _ sets .    [ def.sparse ] call @xmath267 _ sparse _",
    "if for all @xmath269 and @xmath275 the following implication holds : @xmath276    notice that if @xmath42 is a sparse diagonal set , then it is a strongly diagonal set .",
    "however , a strongly diagonal subset need not be sparse .",
    "we are interested in a special collection of level orders .",
    "we call them _ @xmath92-vip orders _ since the elements of @xmath92 are very important points , with special roles to play in the orders , and these roles continue to be played even when finite subsets are collapsed .",
    "[ def.vip ] suppose @xmath95 is a subtree of @xmath19 and @xmath277 . call @xmath61",
    "a _ pre-@xmath92-vip order _ on @xmath278 if @xmath92 is transverse and @xmath61 is a well - ordering of the levels of @xmath95 such that for every @xmath279 , @xmath262 is the @xmath61-least element of its level , @xmath280 , and for all @xmath281 , @xmath61 satisfies the following condition :    1 .   if @xmath282 , then @xmath283 , and    if @xmath92 is diagonal , call @xmath61 a _ @xmath92-vip order _ if it is a pre-@xmath284-vip order which also satisfies the following condition for all @xmath285 and for all @xmath286 :    1 .   if @xmath287 and @xmath288 , then @xmath283 .",
    "it is not difficult to construct a pre-@xmath92-vip order for a transverse set @xmath92 .",
    "[ lem.exist.vip ] if @xmath289 is transverse , then there is a pre-@xmath92-vip order of @xmath19 .",
    "if @xmath289 is a sparse diagonal set and @xmath61 is a pre-@xmath65-vip order for some @xmath65 with @xmath290 , then @xmath61 is a @xmath92-vip order .",
    "let @xmath291 be any well - ordering of the levels of @xmath19 .",
    "use recursion to define a pre-@xmath92-vip order @xmath61 by adjusting @xmath291 separately on each level which has an element of @xmath92 .",
    "note that if @xmath289 is a sparse diagonal set , and @xmath61 is a pre-@xmath65-vip order for some @xmath65 with @xmath290 , then the second clause never applies so @xmath61 is a @xmath92-vip order .    now that we have at least some idea of the level order we will use , we define a family of ordered similarity types which is rich enough to have all the ordered similarity types of @xmath5-element subsets of sparse diagonal sets @xmath277 for a @xmath92-vip level ordering @xmath61",
    ".    [ def.sparse.type ] call @xmath292 an _ @xmath5-type _ if it is a downward closed subtree of @xmath70 whose set @xmath35 of leaves is an @xmath5-element strongly diagonal set . call @xmath293 a",
    "_ vip @xmath5-type _ if @xmath292 is a @xmath5-type and @xmath291 is an @xmath35-vip order .",
    "if @xmath35 is sparse , then @xmath292 is called a _ sparse @xmath5-type _ and @xmath293 is called a _ sparse vip",
    "@xmath5-type_.    [ lem.sparse.type1 ] assume @xmath277 is a strongly diagonal set and @xmath61 is an ordering of the levels of @xmath19 which is a @xmath92-vip order .",
    "then for all @xmath5-element sets @xmath294 , @xmath242 is a vip @xmath5-type , and if @xmath92 is sparse , then @xmath242 is a sparse vip @xmath5-type .",
    "the collapse of any @xmath5-element strongly diagonal set @xmath224 is a subtree closed under initial segments whose set of leaves , @xmath35 , is strongly diagonal .",
    "moreover , since the order @xmath61 is @xmath224-vip , it follows that @xmath230 is @xmath35-vip .",
    "if , in addition , @xmath92 is sparse , then @xmath225 is also sparse , by definition of collapse .    in order to apply shelah s theorem",
    ", we shall need an ordering of the levels of @xmath19 and a conveniently chosen subset of @xmath19 the antichains of which will realize the smallest possible number of weak embedding types . toward that end ,",
    "we introduce _ cofinal transverse _ subsets of @xmath19 .",
    "[ def.cofinal ] a subset @xmath153 is _ cofinal above @xmath258 _ if for all @xmath295 there is some @xmath122 with @xmath296 . if @xmath297 , we say @xmath65 is _",
    "cofinal_.    [ def.transverse ] call @xmath267 _ transverse _ if distinct elements of @xmath42 have different lengths .    by recursion",
    "one can construct a cofinal transverse subset of @xmath19 .",
    "[ lem.cofinal.transverse ] there is a cofinal transverse subset of @xmath19 .",
    "[ lem.cofinal.dense ] if @xmath87 is cofinal above @xmath258 and transverse , then @xmath298 is @xmath1-dense .",
    "suppose @xmath299 are two disjoint subsets of size less than @xmath1 with @xmath172 for all @xmath37 and @xmath38 .",
    "use the fact that @xmath259 is @xmath1-dense to find @xmath300 with @xmath301 for all @xmath37 and @xmath38 .",
    "let @xmath106 be a limit ordinal larger than the length of any element of @xmath181 .",
    "let @xmath302 be the extension of @xmath303 by zeros of length @xmath106 and let @xmath44 be an extension of @xmath304 in @xmath65",
    ". since @xmath302 and @xmath44 are longer than any element of @xmath181 , they are not in @xmath42 nor in @xmath43",
    ". then @xmath305 and @xmath306 for all @xmath38 .",
    "thus @xmath44 is the required witness showing @xmath88 is @xmath1-dense .",
    "[ def.sparse.diag.map ] assume @xmath307 and @xmath87 is cofinal and transverse .",
    "call @xmath308 a _ sparse diagonalization of @xmath19 into @xmath309 _ if @xmath310 is an injective @xmath311-preserving map such that @xmath312 $ ] is a sparse diagonal subset , @xmath313 and the following conditions hold :    1 .",
    "[ item.meet.lift.1 ] for all three element diagonal sets @xmath314 , if @xmath315 , then @xmath316 ; 2 .",
    "[ item.meet.length.1 ] for all @xmath317 , if @xmath318 , then @xmath319 ; 3 .   for all sparse diagonal @xmath320 , @xmath321)$ ] .    if @xmath297 , then we call @xmath308 a _ sparse diagonalization of @xmath19 into @xmath65_.    [ lem.1.diag.map][first diagonalization lemma ] assume @xmath322 , @xmath323 and @xmath87 is cofinal and transverse",
    ". then there is a sparse diagonalization @xmath324 of @xmath19 into @xmath309 .",
    "let @xmath61 be a well - ordering of the levels of @xmath19 .",
    "let @xmath325 list the elements of @xmath19 in @xmath61-increasing order ( recall that @xmath326 is assumed ) .",
    "define functions @xmath327 and @xmath324 on @xmath19 by recursion on @xmath106 .",
    "to start the recursion , notice that @xmath328 , and let @xmath329 be an element of @xmath309 of minimal length .",
    "if @xmath330 has been defined , let @xmath331 be an element of @xmath309 extending @xmath332 and let @xmath333 be an element of @xmath309 extending @xmath334 .",
    "note that @xmath335",
    ".    suppose @xmath336 , @xmath337 and @xmath338 have been defined for all @xmath125 , and @xmath339 for some @xmath340 .",
    "let @xmath341 be the least ordinal @xmath180 strictly greater than @xmath342 for all @xmath125 .",
    "then let @xmath330 be an element of @xmath309 extending the extension by zeros of @xmath343 of length @xmath341 .",
    "suppose @xmath336 , @xmath337 and @xmath338 have been defined for all @xmath125 , and @xmath344 is a limit ordinal .",
    "let @xmath345 .",
    "let @xmath341 be the least ordinal @xmath180 strictly greater than @xmath346 and strictly greater than @xmath342 for all @xmath125 .",
    "let @xmath330 be an element of @xmath309 extending the extension by zeros of @xmath347 of length @xmath341 .    by construction , @xmath348 and",
    "hence @xmath349 and @xmath324 are injective .",
    "moreover , the ranges of all three are subsets of @xmath309 , so for @xmath350 $ ] , the meet closure satisfies @xmath351 .",
    "below we shall show that @xmath290 .    for all @xmath115 ,",
    "one has @xmath352 and if @xmath106 is a limit then for all @xmath125 we have @xmath353 . thus",
    "if @xmath354 , then @xmath355 , so different elements of the union of the ranges of @xmath348 , @xmath349 and @xmath324 have different lengths .",
    "consider two distinct elements , @xmath356 . by a case analysis",
    "below , we show that their images are incomparable , the @xmath311-order between @xmath357 and @xmath358 is preserved by @xmath324 and we show how to express the meet @xmath359 as one of @xmath360 , @xmath336 and @xmath331 .",
    "for the first case , suppose @xmath357 and @xmath358 are incomparable .",
    "then @xmath361 . let @xmath180 be such that @xmath362",
    ". then @xmath363 and @xmath364 . from the definition of @xmath348 , @xmath349 and @xmath324",
    ", it follows that @xmath365 and @xmath366 , so @xmath356 and @xmath367 .    for the second case , suppose @xmath368 .",
    "then , since @xmath357 and @xmath358 are distinct and @xmath356 , it follows that @xmath369 .",
    "consequently @xmath370 , @xmath371 , and @xmath372 , so @xmath367 .",
    "for the third case , suppose @xmath373 .",
    "then , since @xmath357 and @xmath358 are distinct and @xmath356 , it follows that @xmath374 .",
    "consequently @xmath375 , @xmath376 .",
    "since @xmath377 and @xmath378 , it follows that @xmath367 .    by the above analysis",
    ", @xmath324 preserves the @xmath311-order and sends distinct elements of @xmath19 to incomparable elements .",
    "thus the image of @xmath324 is an antichain .",
    "moreover , for @xmath379 , the meet , @xmath380 , is one of @xmath381 and @xmath382 , and the latter occurs only if @xmath383 .",
    "thus different elements of the meet closure of the image of @xmath324 have different lengths .",
    "it follows that the image of @xmath324 is diagonal .",
    "moreover , by construction , the meet closure of the image @xmath92 of @xmath324 is a subset of @xmath309 .    to complete the proof of the lemma",
    ", we must show that the image @xmath92 is sparse .",
    "first use induction on @xmath384 to show that for all @xmath354 , the following two statements hold :    1 .",
    "@xmath385 ; 2 .",
    "( @xmath386 or @xmath387 ) if and only if ( @xmath386 and @xmath387 ) if and only if ( @xmath388 and @xmath389 ) .",
    "next suppose @xmath23 and @xmath24 in the meet closure of @xmath390 $ ] are such that @xmath391 and @xmath392 .",
    "without loss of generality , we assume that @xmath24 is in the image of @xmath324 , since we know it has an extension in the image , and let @xmath358 be such that @xmath393 . by construction , since @xmath392 , either @xmath394 or @xmath395 for some @xmath396 . if @xmath354 , then @xmath33 by the second statement above since @xmath397 . if @xmath398 , then @xmath399 since @xmath338 is an extension of @xmath400 . in this case , @xmath33 as well .",
    "thus the image of @xmath92 is sparse .",
    "[ lem.embed.sparse ] suppose @xmath61 is ordering of the levels of @xmath19 . if @xmath255 is a strong embedding which preserves @xmath61 on @xmath259 and @xmath401 is an @xmath5-element sparse diagonal subset , then @xmath402),\\prec_{e[a]})$ ] .    under the hypotheses of the lemma , since @xmath149 is a strong embedding , @xmath403)={\\operatorname{clp}}(a)$ ] . since @xmath149 preserves order on @xmath259 , @xmath404}=\\prec_a$ ] .",
    "[ thm.upper.bound.1 ] let @xmath405 and suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 . then for @xmath3 equal to the number of vip @xmath5-types , @xmath406    suppose @xmath407^m\\to\\mu$ ] is a fixed coloring for some @xmath408 .",
    "use lemma [ lem.cofinal.transverse ] to find @xmath153 cofinal and transverse .",
    "lemma [ lem.exist.vip ] to find a pre-@xmath65-vip order @xmath61 of the levels of @xmath19 .",
    "apply shelah s theorem [ thm.shl ] to the restriction to antichains to obtain a strong embedding @xmath149 and a node @xmath258 such that @xmath149 preserves @xmath61 on @xmath259 and @xmath262 is constant on @xmath5-element subsets of the same @xmath61-ordered similarity type .",
    "apply the first diagonalization lemma [ lem.1.diag.map ] to find a sparse diagonalization @xmath324 of @xmath19 into @xmath309 .",
    "let @xmath409 $ ] .",
    "note that @xmath61 is a @xmath92-vip order , since @xmath61 is a pre-@xmath65-vip order . by lemma [ lem.sparse.type1 ] , all @xmath61-ordered",
    "similarity types of @xmath5-element subsets of @xmath92 are sparse vip @xmath5-types .",
    "let @xmath410 $ ] .",
    "by lemma [ lem.embed.sparse ] , all @xmath61-ordered similarity types of @xmath5-element subsets of @xmath6 are sparse vip @xmath5-types .    since @xmath324 is a sparse diagonalization and @xmath149 a strong embedding , @xmath411 and @xmath412 are both @xmath1-dense .",
    "since @xmath262 is constant on @xmath5-element subsets of @xmath6 of the same @xmath61-ordered similarity type , it follows that @xmath262 takes on no more colors than the number @xmath3 of sparse vip @xmath5-types .",
    "in this section , in preparation for computing some small values of @xmath413 , we show that , for an arbitrary @xmath153 with @xmath88 @xmath1-dense , the set of all nodes @xmath258 with a @xmath1-dense set of extensions in @xmath65 forms an _ almost perfect subtree _ ( defined later in this section ) .",
    "we use the almost perfect subtree to construct a @xmath1-dense diagonal subset of an arbitrary @xmath153 with @xmath88 @xmath1-dense .",
    "[ lem.grow ] suppose @xmath1 satisfies @xmath46 ( so @xmath1 is a regular cardinal ) , @xmath153 , and @xmath88 is a @xmath1-dense linear order . for all @xmath414 ,",
    "the set @xmath309 is either empty , a singleton or @xmath1-dense .",
    "fix @xmath323 .",
    "if @xmath309 is empty or a singleton , there is nothing to prove .",
    "so suppose @xmath415 and @xmath416 are two different extensions of @xmath258 . notice that @xmath417 .",
    "without loss of generality , assume @xmath418 .",
    "if @xmath224 and @xmath226 are incomparable and @xmath419 , then either @xmath420 or @xmath421 or @xmath422 . in all three cases @xmath423 .    if @xmath224 and @xmath226 are comparable , then either @xmath424 or @xmath425 .",
    "hence for any @xmath229 with @xmath419 , one of @xmath224 and @xmath226 is a subset of @xmath229 . in either case @xmath423 .",
    "since @xmath65 is @xmath1-dense , it has a @xmath1-dense subset @xmath426 with @xmath427 . by the above two paragraphs",
    ", every element of @xmath426 is an extension of @xmath258 , so @xmath309 is @xmath1-dense .",
    "[ def.t(s ) ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "let @xmath428 be the set of all @xmath429 for which @xmath430 , is @xmath1-dense .",
    "we plan to show that @xmath428 is an almost perfect tree .",
    "the first step is to show that arbitrarily high above every node there is a _ densely splitting node_.    [ def.w(s ) ] define @xmath431 by @xmath432 and call the elements of @xmath433 _ densely splitting nodes of @xmath65_.    [ lem.split.continue ] suppose @xmath46 , @xmath153 and @xmath88 is a @xmath1-dense linear order",
    ". then @xmath433 is non - empty .",
    "assume toward a contradiction that for all @xmath434 , one or both of @xmath435 and @xmath436 have cardinality less than @xmath1 .",
    "by lemma [ lem.grow ] , it follows that for all @xmath434 , one or both of @xmath437 and @xmath438 have cardinality less than @xmath63 .",
    "define @xmath325 by recursion and prove by induction that @xmath439 is @xmath1-dense for all @xmath106 .    to start the recursion ,",
    "let @xmath328 .",
    "then @xmath440 which is @xmath1-dense .",
    "if @xmath441 and @xmath442 is @xmath1-dense , then let @xmath443 if @xmath444 is @xmath1-dense , and @xmath445 otherwise .",
    "since @xmath446 , by lemma [ lem.grow ] and a cardinality argument , @xmath439 is @xmath1-dense .",
    "if @xmath106 is a limit ordinal , let @xmath447 . by assumption , for all @xmath125 , if @xmath448 , then @xmath449 is not @xmath1-dense , so has cardinality less than @xmath63 .",
    "it follows that @xmath450 . hence by lemma [ lem.grow ] , @xmath439 is @xmath1-dense .",
    "note that @xmath451 is a branch through @xmath19 .",
    "every element @xmath23 of @xmath65 is either an initial segment of this branch or there is some @xmath384 such that @xmath452 .",
    "recall our assumption that for all @xmath125 , if @xmath448 , then @xmath449 is not @xmath1-dense , so it has cardinality less than @xmath63 .",
    "it follows that @xmath453 , contradicting the assumption that @xmath65 is @xmath1-dense .",
    "thus the lemma follows .",
    "[ lem.room ] suppose @xmath46 , @xmath153 and @xmath88 is a @xmath1-dense linear order",
    ". then for every @xmath454 , every @xmath455 , and every @xmath115 , there is @xmath456 such that @xmath457 and @xmath458 .",
    "fix @xmath454 , @xmath455 and @xmath115 . without loss of generality ,",
    "assume @xmath459 .",
    "since @xmath460 , it follows that @xmath461 is @xmath1-dense by lemma [ lem.grow ] .    since @xmath46 , the set of nodes of @xmath19 of length at most @xmath106 has cardinality less than @xmath1 , but @xmath461 has cardinality @xmath1 because it is @xmath1-dense .    by the pigeonhole principle",
    ", there is some @xmath462 which has @xmath1 many extensions in @xmath461 .",
    "it follows that @xmath463 and that @xmath464 is @xmath1-dense by lemma [ lem.grow ] . by lemma [ lem.split.continue ]",
    "there is an extension @xmath465 in @xmath433 , so the lemma follows .",
    "[ lem.t(s ) ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "then @xmath466 is a rooted tree , @xmath467 , and for all @xmath468 , for all @xmath469 , there is some @xmath470 with @xmath471 and @xmath472 .",
    "since @xmath428 is closed under initial segments , @xmath466 is a rooted tree . by definition of @xmath433 , it is a subset of @xmath428 . by lemma [ lem.room ] , every element of @xmath95 has extensions of arbitrarily large length which are densely splitting nodes .    to prove that @xmath428 is an almost perfect tree , we need to be able to prove that it has certain continuity properties at limit levels . toward that end ,",
    "we introduce the notion of a _ limit of densely splitting nodes of @xmath65_.    [ def.robust ] suppose @xmath1 is a regular cardinal , @xmath87 , and @xmath88 is @xmath1-dense .",
    "say @xmath473 _ is a limit of densely splitting nodes of @xmath65 _ if @xmath474 is a limit ordinal and for unboundedly many @xmath475 , @xmath476 is in @xmath433 .",
    "if @xmath24 is a limit of densely splitting nodes of @xmath65 , then say it is _ evenhanded in @xmath65 _ if for @xmath477 , the set @xmath478 is unbounded in @xmath474 .",
    "[ lem.robust ] suppose @xmath46 , @xmath153 and @xmath88 is a @xmath1-dense linear order .",
    "further suppose that @xmath229 is a limit of densely splitting nodes of @xmath65 .",
    "if @xmath229 is evenhanded in @xmath65 , then @xmath229 has an extension in @xmath433 .    for each @xmath479 with @xmath480",
    ", let @xmath481 be an element of @xmath65 extending @xmath482 .",
    "let @xmath42 be the set of @xmath481 for @xmath479 with @xmath480 and @xmath483 , and let @xmath484",
    ".    then @xmath485 .    if @xmath486 and @xmath487 , then @xmath488 .",
    "suppose @xmath486 and @xmath487 .",
    "assume toward a contradiction that @xmath489 .",
    "use the fact that @xmath229 is evenhanded in @xmath65 to choose @xmath50 and @xmath490 strictly greater than @xmath491 such that @xmath492 , @xmath493 , @xmath494 and @xmath495",
    ". then @xmath496 and @xmath497 , so @xmath498 .",
    "by definition of @xmath308 , @xmath499 and @xmath500 .",
    "consequently @xmath501 , and @xmath502 .",
    "it follows that both @xmath503 and @xmath504 are in the same @xmath311-relationship with @xmath258 as is @xmath229 , which is not possible because either @xmath505 and @xmath506 contradicting the fact that @xmath498 . thus @xmath507 . in other words , @xmath488 .",
    "since @xmath65 is @xmath1-dense , there is a @xmath1-dense set @xmath508 with @xmath509 .",
    "by the claim , @xmath510 .",
    "it follows that @xmath511 is @xmath1-dense , so by lemma [ lem.split.continue ] , @xmath229 has an extension in @xmath433 .",
    "[ def.favor ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "say @xmath429 _ favors @xmath340 above @xmath23 in @xmath428 _ if @xmath512 , either @xmath468 or @xmath24 is a limit of densely splitting nodes of @xmath65 , and for all @xmath513 with @xmath514 , @xmath515 .",
    "[ lem.favor.alt ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "further suppose @xmath516 , @xmath517 favors @xmath518 above @xmath519 in @xmath428 , and @xmath520 favors @xmath251 above @xmath519 in @xmath428 .",
    "then at least one of @xmath517 and @xmath520 is in @xmath428 .",
    "if one of @xmath517 and @xmath520 is not a limit of densely splitting nodes of @xmath65 , then it is in @xmath428 by definition of favor .",
    "so assume both are limits of densely splitting nodes of @xmath65 .    for each @xmath470 with @xmath521 , let @xmath522 be an extension of @xmath523 , and",
    "let @xmath42 be the set of these elements .",
    "similarly , for each @xmath470 with @xmath524 , let @xmath525 be an extension of @xmath526 , and let @xmath43 be the set of these elements",
    ". then @xmath527 .",
    "if @xmath528 and @xmath529 , then @xmath258 extends @xmath530 and either @xmath531 or @xmath532 or @xmath533 .",
    "suppose @xmath258 satisfies the hypotheses .",
    "then by definition of @xmath311 , @xmath534 . assume toward a contradiction that none of the three conclusions holds .",
    "then @xmath535 .",
    "let @xmath536 be an element of @xmath433 with @xmath537 and @xmath538 .",
    "then @xmath539 , so @xmath540 , contradicting @xmath541 .",
    "the set of all @xmath486 such that @xmath528 , and @xmath533 has cardinality @xmath8 .",
    "otherwise , by the pigeonhole principle and the previous claim , there is some @xmath542 with @xmath543 such that the set of @xmath486 with @xmath533 and @xmath544 has cardinality @xmath1 .",
    "it follows that @xmath545 , and , by lemma [ lem.grow ] , that @xmath546 .",
    "thus @xmath513 contradicts the assumption that @xmath517 favors @xmath518 above @xmath519 .",
    "the proofs of the next two claims are similar to those above , so they are left to the reader .",
    "if @xmath547 and @xmath529 , then @xmath258 extends @xmath548 and either @xmath549 or @xmath550 or @xmath551 .",
    "the set of all @xmath486 such that @xmath528 , and @xmath533 has cardinality @xmath8 .",
    "let @xmath508 be a @xmath1-dense subset with @xmath509 .",
    "since the inequalities @xmath552 hold , either @xmath553 or @xmath554 has cardinality @xmath1 .",
    "if @xmath555 has cardinality @xmath1 , then @xmath556 has cardinality @xmath1 , so by lemma [ lem.grow ] , @xmath517 is in @xmath95 .",
    "similarly , if @xmath557 has cardinality @xmath1 , then @xmath520 is in @xmath95",
    ". thus the lemma follows .",
    "[ lem.min.w(s ) ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense . for all @xmath468 there is a minimal extension of @xmath24 in @xmath433 .",
    "that is , there is @xmath470 such that @xmath471 and @xmath558 for all @xmath559 .    by lemma [ lem.grow ] ,",
    "@xmath560 is non - empty . by definition of @xmath433 ,",
    "the meet of two incomparable elements of it is also in the set .",
    "it follows that @xmath560 has an element of minimum length , and this element is the desired minimal extension .",
    "[ lem.favor.split ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense . for all @xmath561 and all @xmath562 , there is some extension @xmath226 of @xmath224 with @xmath563 such that @xmath226 favors one of @xmath251 , @xmath518 above @xmath224 .",
    "fix @xmath224 in @xmath433 .    for as long as possible ,",
    "define a @xmath20-increasing sequence @xmath564 of extensions of @xmath565 which favor @xmath251 above @xmath224 , with @xmath566 . to start the recursions with @xmath567 ,",
    "let @xmath568 .",
    "if @xmath106 is a limit ordinal and @xmath569 has been defined for @xmath570 , then let @xmath571 . if @xmath441 , @xmath569 has been defined , and @xmath572 , then let @xmath573 if @xmath574 , and otherwise let @xmath564 be the one - point extension of @xmath569 which is a subset of the extension of @xmath569 of minimal length in @xmath433 . if @xmath441 , @xmath569 has been defined , and @xmath575 , then @xmath159 is a limit ordinal , @xmath569 is a limit of densely splitting nodes of @xmath65 and the recursion stops with its definition .    also , for as long as possible , define a @xmath20-increasing sequence @xmath576 of extensions of @xmath577 which favor @xmath518 above @xmath224 , with @xmath578 . to start the recursion with @xmath567 , let @xmath579 . if @xmath106 is a limit ordinal and @xmath580 has been defined for @xmath570 , then let @xmath581 . if @xmath441 , @xmath580 has been defined , and @xmath582 , then let @xmath583 if @xmath584 , and otherwise let @xmath576 be the one - point extension of @xmath580 which is a subset of the extension of @xmath580 of minimal length in @xmath433 . if @xmath441 , @xmath580 has been defined , and @xmath585 , then @xmath159 is a limit ordinal , @xmath580 is a limit of densely splitting nodes of @xmath65 and the recursion stops with its definition .    by construction , for all @xmath106 with",
    "@xmath564 defined , @xmath564 favors @xmath251 above @xmath224 in @xmath428 .",
    "similarly , for all @xmath106 with @xmath576 defined , @xmath576 favors @xmath518 above @xmath224 in @xmath428 .",
    "if one of the recursions continues for all @xmath115 , the lemma follows .",
    "assume toward a contradiction that @xmath569 is defined but @xmath586 is not , and that @xmath580 is defined but @xmath587 is not . then @xmath575 and @xmath585 , contradicting lemma [ lem.favor.alt ] .",
    "[ def.almost.perfect ] a subset @xmath588 is an _ almost perfect tree _ if it is a rooted induced subtree of @xmath19 closed under initial segments such that the following conditions hold :    1 .",
    "for all @xmath108 , for all @xmath115 , there is an extension @xmath589 of @xmath24 of length at least @xmath106 which is a densely splitting node ( both @xmath590 and @xmath591 are in @xmath95 ) ; 2 .   for all @xmath592",
    ", if @xmath23 is an evenhanded limit of densely splitting nodes of @xmath95 , then @xmath23 is in @xmath95 ; 3 .   for all @xmath593",
    ", if @xmath594 , both @xmath23 and @xmath24 are limits of densely splitting nodes of @xmath95 , and for some @xmath224 , @xmath23 favors @xmath251 above @xmath224 and @xmath24 favors @xmath518 above @xmath224 , then one of @xmath23 and @xmath24 is in @xmath95 .",
    "[ lem.1.almost.perfect ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "then @xmath428 is almost perfect .",
    "apply lemmas [ lem.t(s ) ] , [ lem.robust ] and [ lem.favor.split ] .",
    "[ lem.2.almost.perfect ] suppose @xmath46 and @xmath588 is almost perfect .",
    "let @xmath7 be the set of all limit ordinals @xmath595 such that every node of @xmath95 of length less than @xmath106 extends to a densely splitting node of @xmath95 of length less than @xmath106 . then @xmath7 is closed unbounded in @xmath1 , and for all @xmath596 , for all @xmath597 , the set @xmath598 has cardinality at least @xmath599 .",
    "use the definition of almost perfect to show that @xmath7 is non - empty and unbounded .",
    "it follows immediately from the definition of @xmath7 that it is closed .    fix attention on @xmath596 and @xmath597 .",
    "let @xmath600 , and suppose @xmath601 is a sequence such that if @xmath602 for @xmath603 or @xmath490 limit , and @xmath604 mod @xmath605 for @xmath455 , then @xmath606 .",
    "define @xmath607 by recursion and show by induction that every element of it has length @xmath112 .    to start the recursion ,",
    "let @xmath608 be the minimal densely splitting node of @xmath95 extending @xmath609 .",
    "it has length less than @xmath106 by the definition of @xmath7 .",
    "suppose @xmath610 and @xmath611 has been defined on elements smaller than @xmath50 . if @xmath612 , let @xmath613 be a densely splitting node of @xmath95 which extends @xmath614 of length less than @xmath106 .",
    "such a node exists by the definition of @xmath7 .    if @xmath50 is a limit ordinal , then @xmath615 is a limit of densely splitting nodes of @xmath95 and has length a limit ordinal less than @xmath106 since @xmath616 .",
    "the properties of @xmath617 guarantee that this union is evenhanded , so by the definition of an almost perfect tree , @xmath618 is in @xmath95 .",
    "let @xmath613 be a densely splitting node of length less than @xmath106 extending @xmath618 , which exists by definition of @xmath7 .",
    "this completes the definition of @xmath607 .",
    "let @xmath619 be the union of this sequence .",
    "then @xmath619 is a limit of densely splitting nodes in @xmath65 and is evenhanded , so it is an element of @xmath95 . since @xmath608 is an extension of @xmath609",
    ", so is @xmath619",
    ".    if @xmath619 has length @xmath106 , then let @xmath620 be this union , and notice that it is in @xmath95 .",
    "otherwise let @xmath621 be an extension of @xmath619 of length @xmath106 in @xmath95 , which must exist by the definition of an almost perfect tree .",
    "notice that if @xmath622 are two distinct sequences with the property that @xmath602 for @xmath603 or @xmath490 limit and @xmath604 mod @xmath605 for @xmath455 implies @xmath623 , then @xmath624 .    since no constraints have been placed on @xmath625 for @xmath626 mod @xmath605 , there are @xmath627 sequences @xmath601 with the special property described above .",
    "thus the set @xmath628 has cardinality at least @xmath627 , and the lemma follows .",
    "[ lem.nearly.perfect ] suppose @xmath46 , @xmath87 and @xmath88 is @xmath1-dense .",
    "let @xmath629 be the set of all limit ordinals @xmath595 such that every @xmath630 has proper extensions in both @xmath631 and @xmath632",
    ". then @xmath629 is closed unbounded in @xmath1 .",
    "use the definition of @xmath95 and lemmas [ lem.grow ] and [ lem.split.continue ] to show that @xmath629 is non - empty and unbounded .",
    "it follows immediately from the definition of @xmath629 that it is closed .    [ lem.diag.in.s ] suppose that @xmath1 is an inaccessible limit of inaccessible cardinals and @xmath65 is a subset of @xmath19 with @xmath88 @xmath1-dense . then there is a diagonal set @xmath633 such that @xmath411 is @xmath1-dense .",
    "let @xmath61 be a total order on @xmath19 satisfying @xmath634 .",
    "define @xmath635 by setting @xmath636 to be the minimal extension of @xmath24 in @xmath433 . by lemma [ lem.min.w(s ) ]",
    ", @xmath637 is well - defined .",
    "let @xmath638 be such that @xmath639 is an extension of @xmath24",
    ".    by recursion on @xmath61 , define functions @xmath640 , @xmath641 , and @xmath642 as follows .    to start the recursion , note that the @xmath61-least element is @xmath21 , define @xmath643 , and let @xmath644 .",
    "if @xmath645 has been defined , let @xmath646 , and set @xmath647 .",
    "to continue the recursion , suppose @xmath648 has @xmath649 and for all @xmath650 , both @xmath651 and @xmath652 have been defined , with @xmath653 and @xmath308 defined from them as above .",
    "let @xmath654 be the least ordinal greater than @xmath655 for all @xmath650 .",
    "if @xmath441 is a successor and @xmath656 for some @xmath226 , then let @xmath645 be an extension in @xmath433 of @xmath657 of length greater than @xmath654 .",
    "since @xmath428 is almost perfect and @xmath433 is the set of densely splitting nodes of @xmath428 , such a node exists .    if @xmath595 is a limit ordinal , then @xmath658 has length a limit ordinal .",
    "since @xmath659 extends @xmath660 for all @xmath661 , the definition of @xmath662 on nodes of successor length guarantees that @xmath659 is a limit of densely splitting nodes of @xmath65 and evenhanded . hence by lemma [ lem.robust ] , it has an extension in @xmath433 .",
    "it follows that @xmath659 is in @xmath428 .",
    "let @xmath645 be an extension of @xmath659 in @xmath433 of length greater than @xmath654 .",
    "let @xmath92 be the range of @xmath308 .",
    "then @xmath92 is a subset of @xmath65 , and the meet closure of @xmath92 is a subset of union of the ranges of @xmath662 , @xmath653 and @xmath308 . since @xmath663",
    ", the lengths of these sequences are strictly increasing .",
    "also , by construction , if @xmath650 , then @xmath664 . so different elements of the meet closure of @xmath92 have different lengths .    by induction",
    ", one can show that @xmath662 preserves @xmath20 and length order . by definition of @xmath662 , @xmath653 and @xmath308",
    ", we have the following properties :    1 .   if @xmath224 and @xmath226 are incomparable with @xmath665 , then @xmath666 and @xmath667 ; 2 .",
    "if @xmath668 , then @xmath669 and @xmath670 ; 3 .   if @xmath425 , then @xmath671 and @xmath667 .",
    "it follows that any two elements of @xmath92 are incomparable , that is , @xmath92 is an antichain .",
    "hence @xmath92 is diagonal . by construction",
    ", @xmath92 is a subset of @xmath65 . by the above three properties , @xmath308 preserves @xmath311 , so @xmath92 is @xmath1-dense .",
    "in this section , we show that all sparse vip @xmath5-types can be embedded in any sparse diagonal set @xmath92 with @xmath411 @xmath1-dense , and derive a lower bound result for @xmath10 .",
    "[ def.compact ] call an ordering @xmath61 of the levels of @xmath19 _ small _ if @xmath672 has order type @xmath673 for each cardinal @xmath115 .    [ lem.compact.cofinal ] suppose @xmath61 is a small ordering of the levels of @xmath19 and @xmath115 is a cardinal . for all @xmath23 with @xmath674 , the interval @xmath675 is cofinal in @xmath672",
    ".    for all @xmath23 with @xmath674 , the interval @xmath675 has cardinality @xmath673 .",
    "hence such an interval has order type @xmath673 under @xmath61 .",
    "[ lem.compact.embed ] suppose @xmath1 is a limit cardinal , @xmath676 is a small ordering of the levels of @xmath19 and @xmath323 . for all @xmath677 and orderings @xmath291 of the levels of @xmath678 , there is an order preserving strong embedding @xmath679 of @xmath680 into @xmath681 , i.e. @xmath682 implies @xmath683 .",
    "furthermore , @xmath679 may be chosen such that for all @xmath23 , the length of @xmath684 is a cardinal .",
    "use induction on @xmath54 . for @xmath685",
    ", there is only the empty sequence , and any embedding of this single point to a point @xmath259 whose length is a cardinal works .",
    "suppose the lemma is true for @xmath5 and @xmath291 is an ordering of the levels of @xmath678 for @xmath686 .",
    "let @xmath687 be an order preserving strong embedding obtained from the induction hypothesis .",
    "we define an extension @xmath679 of @xmath688 as follows .",
    "let @xmath689 enumerate in increasing @xmath291-order the nodes of @xmath690 .",
    "pick a cardinal @xmath106 larger than the level at which @xmath691 is embedded , and define by recursion on @xmath213 nodes @xmath692 in @xmath693 such that @xmath694 and @xmath695 if @xmath696 .",
    "lemma [ lem.compact.cofinal ] guarantees that this recursion is possible .",
    "[ thm : hl ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "further suppose @xmath61 is well ordering of the levels of @xmath698 and @xmath676 is a small ordering of the levels of @xmath698 .",
    "then there is a strong embedding @xmath149 and a node @xmath258 such that @xmath149 preserves @xmath676 and @xmath61 and @xmath676 agree on all pairs in @xmath699 $ ] .",
    "apply shelah s theorem [ thm.shl ] to the coloring @xmath407 ^ 2\\to 2 $ ] defined using the boolean value operator @xmath700 by @xmath701 to get a strong embedding @xmath255 and an element @xmath414 such that for all @xmath702 with @xmath703 one has @xmath704 and the color of @xmath705 depends only on the @xmath676-ordered similarity type of the pair @xmath706 .    if @xmath222 , then @xmath138 , so @xmath61 and @xmath676 agree on @xmath707 , since both are level orders . similarly ,",
    "if @xmath708 , then @xmath61 and @xmath676 agree on @xmath707 .",
    "next consider pairs @xmath709 with @xmath594 , @xmath26 and @xmath703 .",
    "note that since cohen forcing on @xmath1 does not add bounded subsets to @xmath1 , our assumptions in particular imply that @xmath1 must be a limit cardinal .",
    "suppose @xmath106 is a cardinal larger than @xmath710 but @xmath8 .",
    "then @xmath711\\subseteq { { ^{\\gamma}}}2 $ ] is infinite for some @xmath183 .",
    "let @xmath712 be a sequence which is increasing in both the @xmath25 and @xmath676 orders . since @xmath149 is a strong embedding ,",
    "the sequence @xmath713 is @xmath25-increasing , and can not be decreasing in @xmath61 . since @xmath714 implies @xmath704 , it follows that @xmath676 and @xmath61 agree on pairs @xmath715 with @xmath594 , @xmath26 and @xmath703 .    finally consider pairs @xmath709 with @xmath594 , @xmath716 and @xmath703 .",
    "for @xmath106 as in the previous case , let @xmath717 be a sequence which is decreasing in the @xmath25 order and increasing in the @xmath676 order .",
    "then @xmath713 is @xmath25-decreasing , and can not be decreasing in @xmath61 .",
    "thus by an argument like that above , @xmath676 and @xmath61 agree on pairs @xmath715 with @xmath594 , @xmath716 and @xmath703 .    for the following definition , recall the notation @xmath718 from definition [ def.t(s ) ] .",
    "[ def.semi-strong ] suppose @xmath277 is diagonal and @xmath411 is @xmath1-dense .",
    "a function @xmath719 is a _ semi - strong embedding _",
    "if @xmath248 preserves extension and lexicographic order , maps levels to levels , and for every @xmath720 , there is some @xmath721 such that @xmath722 and @xmath723 .",
    "[ lem.semi-strong ] suppose @xmath1 is inaccessible and @xmath277 is diagonal and @xmath411 is @xmath1-dense . then there is a semi - strong embedding @xmath719 .    let @xmath724 be the set of all limit @xmath595 such that for all @xmath725 , @xmath24 is a limit of densely splitting points of @xmath718 and for all @xmath125 , there is @xmath726 such that @xmath727 . by lemma [ lem.nearly.perfect ] , @xmath7 is closed unbounded .",
    "define @xmath248 on @xmath693 by recursion on @xmath115 , using the assumption that @xmath1 is inaccessible . to start the recursion ,",
    "let @xmath728 be an element of @xmath718 on the @xmath729 level of @xmath19 , where @xmath729 is the least infinite cardinal in @xmath7 .",
    "if @xmath106 is a limit and @xmath248 has been defined on @xmath119 , then let @xmath341 be a cardinal in @xmath7 greater than @xmath730 , and for each @xmath731 , let @xmath732 be an element of @xmath733 which is an evenhanded limit of densely splitting points of @xmath718 extending @xmath734 .",
    "suppose @xmath735 is a successor and @xmath248 has been defined on @xmath119 .",
    "let @xmath341 be a cardinal in @xmath7 greater than @xmath736 .",
    "recall that by lemma [ lem.min.w(s ) ] every node of @xmath718 has a minimal extension to a densely splitting node ( one in @xmath433 ) .",
    "also , by lemma [ lem.robust ] , every evenhanded extension of a node of @xmath718 has an extension to a densely splitting node . for @xmath737 and @xmath738 the minimal length densely splitting node properly extending @xmath24 , let @xmath732 be an evenhanded extension of @xmath739 of length @xmath341 .",
    "use induction to show that @xmath248 preserves extension and lexicographic order . by its construction and the choice of @xmath7 ,",
    "the remaining conditions are satisfied for all @xmath23 .    for the following definition , recall the notion of a sparse @xmath5-type from definition [ def.sparse.type ] .",
    "[ thm : qk ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "if @xmath740 is a sparse diagonal set with @xmath411 @xmath1-dense and @xmath61 is a @xmath92-vip order of the levels of @xmath19 , then every sparse vip @xmath5-type @xmath293 is realized as @xmath242 for some @xmath294 .",
    "the assumptions imply that @xmath1 is inaccessible , so lemma [ lem.semi-strong ] applies .",
    "let @xmath719 be a semi - strong embedding from lemma [ lem.semi-strong ] .",
    "define @xmath741 by @xmath742 .",
    "let @xmath743 be defined by @xmath744 where @xmath745 is the minimal extension of @xmath746 in @xmath92 as guaranteed by definition [ def.semi-strong ] .    for @xmath747 and @xmath748 ,",
    "define well - orderings @xmath749 on @xmath693 as follows : let @xmath750 and set @xmath751 if and only if @xmath752 .",
    "let @xmath676 be any small well - ordering of the levels of @xmath19 . call a triple @xmath753",
    "_ local _ if @xmath754 , @xmath755 , @xmath756 , and @xmath757 , and @xmath758 .",
    "let @xmath262 be a coloring of the triples of @xmath19 defined as follows : if @xmath753 is not local , let @xmath759 and otherwise set @xmath760    apply shelah s theorem [ thm.shl ] to @xmath262 and @xmath676 to obtain a strong embedding @xmath255 and a node @xmath258 such that for triples from @xmath761 $ ] , the coloring depends only on the @xmath676-ordered similarity type of the triple .",
    "then two local triples @xmath753 and @xmath762 of @xmath95 are colored the same if and only if @xmath763    hence for @xmath108 and for both ordered similarity types of incomparable pairs of same length nodes from @xmath95 , the orderings @xmath764 must always agree with one of @xmath676 and its converse on @xmath95 .",
    "since @xmath61 is a well - ordering of the levels of @xmath19 , the orderings @xmath765 are well - orderings of @xmath693 , so they must agree with @xmath676 in both cases .",
    "assume that @xmath292 has @xmath766 leaves and let @xmath35 be the set of these leaves .",
    "then @xmath292 is a subtree of @xmath767 and every level of @xmath767 has exactly one element of @xmath768 . extend @xmath291 defined on @xmath292 to @xmath769 defined on all of @xmath767 in such a way that the extension is still a @xmath768-vip order .",
    "apply lemma [ lem.compact.embed ] to get an order preserving strong embedding @xmath679 of @xmath770 into @xmath771 .",
    "let @xmath772 enumerate the elements of @xmath768 in increasing order of length . note that @xmath773 .",
    "for @xmath774 , define @xmath775 where @xmath776 if @xmath777 and @xmath778 if @xmath779 .",
    "finally define @xmath780 by recursion on @xmath774 . for @xmath781 ,",
    "let @xmath782 . for @xmath783 , consider three cases for elements of @xmath784 .",
    "if @xmath779 , let @xmath785 .",
    "if @xmath777 , let @xmath786 .",
    "note that in both of these cases , @xmath787 . if @xmath788 has length @xmath789 , then there is a unique immediate successor in @xmath292 , @xmath98 . in this case , let @xmath790 .",
    "since @xmath679 sends @xmath769-increasing pairs to @xmath676-increasing pairs and @xmath149 is a @xmath676 order preserving strong embedding , their composition sends sends @xmath769-increasing pairs to @xmath676-increasing pairs . since for @xmath791 , the order @xmath676 agrees with @xmath792 on @xmath793 where @xmath794 , it follows that @xmath617 sends @xmath769-increasing pairs to @xmath61-increasing pairs .",
    "since @xmath248 preserves extension and lexicographic order , @xmath617 does as well . by",
    "construction @xmath617 sends levels to levels , meets to meets ( split nodes ) and leaves to leaves ( terminal nodes ) .",
    "let @xmath795 $ ] be the image under @xmath617 of the leaves of @xmath292",
    ". then @xmath796 , as required .",
    "[ thm.lower.bound.1 ] let @xmath5 be a natural number and suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 .",
    "then for @xmath14 equal to the number of sparse vip @xmath5-types , the @xmath1-dense linear order @xmath10 satisfies @xmath797    let @xmath153 be a cofinal transverse subset obtain from lemma [ lem.cofinal.transverse ] .",
    "let @xmath61 be a pre-@xmath65-vip order on @xmath19 obtained from lemma [ lem.exist.vip ] .",
    "let @xmath798 be a @xmath311-preserving injection such that @xmath350 $ ] is a sparse diagonal set with @xmath290 .",
    "notice that @xmath411 is @xmath1-dense , since @xmath324 is @xmath311-preserving .",
    "let @xmath799 ,  , @xmath800 be an enumeration of the sparse vip @xmath5-types .",
    "define @xmath801^m\\to r$ ] by @xmath802 where for @xmath803 $ ] , @xmath804 .",
    "suppose @xmath267 is a subset with @xmath805 @xmath1-dense and @xmath806 .",
    "since @xmath324 is @xmath311-preserving , its image @xmath807\\subseteq d$ ] is a sparse diagonal set with the property that @xmath808 is @xmath1-dense . thus by theorem [ thm : qk ] , the sparse vip @xmath5-type @xmath809 is realized as @xmath242 for some @xmath810 . since @xmath324 is injective , there is an @xmath5-element subset @xmath811 with @xmath812=x$ ] and @xmath813 .",
    "since @xmath42 and @xmath213 were arbitrary , in every @xmath1-dense subset @xmath267 , every color @xmath213 is realized by some @xmath5-element subset .",
    "therefore , the theorem follows .",
    "recall the definition of canonical partition introduced immediately after the statement of theorem [ thm.partition ] .",
    "[ thm.canon.1 ] let @xmath5 be a natural number and suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 .",
    "for @xmath3 equal to the number of sparse vip @xmath5-types , there is a canonical partition of the @xmath5-element subsets of @xmath814^m,{<_{\\text{q}}})$ ] into @xmath3 parts .    use lemma [ lem.cofinal.transverse ] to find @xmath153 cofinal and transverse .",
    "use lemma [ lem.exist.vip ] to find @xmath61 a pre-@xmath65-vip order on @xmath19 .    for all @xmath323 , let @xmath815 be a sparse diagonalization of @xmath19 into @xmath309 . use recursion on @xmath61 to define @xmath816 such that for all @xmath429",
    ", @xmath817 is an extension of @xmath24 with @xmath818 disjoint from the union over all @xmath62 of @xmath819 $ ] .",
    "since the order type of @xmath820 is less than @xmath1 and each @xmath819 $ ] is a sparse diagonal subset of @xmath65 , it is always possible to continue the recursion .",
    "define @xmath821 as follows . for @xmath24 with @xmath822 , @xmath823 , and @xmath824 ,",
    "let @xmath825 .",
    "let @xmath799 , @xmath826 ,  , @xmath800 enumerate the sparse vip @xmath5-types .",
    "let @xmath827 be the set of all @xmath5-element subsets @xmath42 for which @xmath828),\\prec_{h[a]})$ ] is either @xmath799 or not a sparse vip @xmath5-type . for positive @xmath829 ,",
    "let @xmath72 be the set of all @xmath5-element subsets @xmath42 of @xmath19 for which @xmath828),\\prec_{h[a]})=(\\tau_j,{\\lessdot}_j)$ ] .",
    "then @xmath830 is a partition of @xmath831^m$ ] into @xmath637 sets .    to see that each class of @xmath832 is indivisible ,",
    "suppose @xmath833 is a fixed coloring for some @xmath834 .",
    "extend @xmath262 to all of @xmath831^m$ ] by setting @xmath835 if @xmath836 and @xmath837 or by setting @xmath838 if @xmath839 and @xmath837 .",
    "apply shelah s theorem [ thm.shl ] to the restriction to antichains to obtain a strong embedding @xmath149 and a node @xmath258 such that @xmath149 preserves @xmath61 on @xmath259 and @xmath262 is constant on @xmath5-element subsets of the same @xmath61-ordered similarity type .",
    "let @xmath106 be the order type of @xmath840 .",
    "then @xmath841 is a @xmath1-dense subset . since @xmath118 agrees with @xmath842 on @xmath841 and @xmath842",
    "is @xmath311-preserving , @xmath843 $ ] is a @xmath1-dense subset of @xmath844 .",
    "since @xmath842 is a sparse diagonalization , the set @xmath92 is a sparse diagonal set with @xmath845 .",
    "thus by lemma [ lem.sparse.type1 ] , all @xmath61-ordered similarity types of @xmath5-element subsets of @xmath92 are sparse vip @xmath5-types .",
    "let @xmath846 $ ] .",
    "by lemma [ lem.embed.sparse ] , all @xmath61-ordered similarity types of @xmath5-element subsets of @xmath847 are sparse vip @xmath5-types .",
    "it follows that @xmath848^m\\cap c_j$ ] is @xmath262-monochromatic .",
    "hence each @xmath72 is indivisible .    to see that each class of @xmath832 is persistent ,",
    "suppose @xmath849 is @xmath1-dense and @xmath829 .",
    "by lemma [ lem.split.continue ] , there is a node @xmath850 in @xmath851 , the set of densely splitting nodes of @xmath847 .",
    "thus @xmath852 has a @xmath1-dense set of extensions in @xmath847 . in other words , @xmath853 is @xmath1-dense .",
    "let @xmath854 be the longest initial segment of @xmath852 consisting only of zeros .",
    "then @xmath855 . let @xmath24 be the @xmath106th element of @xmath19 in the @xmath61 order .",
    "since @xmath118 agrees with @xmath856 on @xmath841 , it follows that @xmath857 $ ] is a sparse diagonal set with the property that @xmath858,{<_{\\text{q}}})$ ] is @xmath1-dense .",
    "thus by theorem [ thm : qk ] , the sparse vip @xmath5-type @xmath859 is realized as @xmath242 for some @xmath860 $ ] . since @xmath118 is injective ,",
    "there is an @xmath5-element subset @xmath861 with @xmath862=x$ ] , and @xmath863 as required .",
    "in this section we give closed form upper and lower bounds for the number of sparse vip @xmath5-types that facilitate comparisons with d. devlin s theorem for @xmath864 .",
    "we then describe a recursive procedure for computing the number of sparse vip @xmath5-types .    in figure",
    "[ fig.tau * ] , we give a picture of a specific example of a sparse vip @xmath865-type , which we will call @xmath866 , so we can use it in later examples to illustrate a variety of definitions . to translate the figure into a representation in which each node is a sequence of @xmath251 s and @xmath518 s , note that the root is the empty sequence and",
    "only line segments with positive slope represent @xmath518 s .",
    "we have circled the nodes in the meet closure of the set @xmath35 of leaves of @xmath867 ; these nodes are the designated elements for any ordering of the levels which makes @xmath867 a sparse vip @xmath865-type . for only three pairs of nodes",
    "does the requirement that @xmath866 be a sparse vip @xmath865-type fail to specify the order , and between each such pair we have indicated the order .",
    "( 9,9)(0,1 ) ( 4,1)(2,1)2 ( 4,1)(-2,1)2 ( 2,2)(1,1)1 ( 2,2)(-1,1)1 ( 6,3)(1,1)1 ( 6,3)(-1,1)1 ( 7,6)(1,1)1 ( 7,6)(-1,1)1 ( 6,2)(0,1)1 ( 1,3)(0,1)2 ( 3,3)(0,1)1 ( 5,4)(0,1)4 ( 7,4)(0,1)2 ( 8,7)(0,1)2 ( 4,1)(0,0)@xmath868 ( 4,1)(0,0)@xmath869 ( 2,2)(0,0)@xmath868 ( 2,2)(0,0)@xmath869 ( 6,2)(0,0)@xmath868 ( 1,3)(0,0)@xmath868 ( 3,3)(0,0)@xmath868 ( 6,3)(0,0)@xmath868 ( 6,3)(0,0)@xmath869 ( 1,4)(0,0)@xmath868 ( 3,4)(0,0)@xmath868 ( 3,4)(0,0)@xmath869 ( 5,4)(0,0)@xmath868 ( 7,4)(0,0)@xmath868 ( 1,5)(0,0)@xmath868 ( 1,5)(0,0)@xmath869 ( 5,5)(0,0)@xmath868 ( 7,5)(0,0)@xmath868 ( 5,6)(0,0)@xmath868 ( 7,6)(0,0)@xmath868 ( 7,6)(0,0)@xmath869 ( 5,7)(0,0)@xmath868 ( 6,7)(0,0)@xmath868 ( 6,7)(0,0)@xmath869 ( 8,7)(0,0)@xmath868 ( 5,8)(0,0)@xmath868 ( 5,8)(0,0)@xmath869 ( 8,8)(0,0)@xmath868 ( 8,9)(0,0)@xmath868 ( 8,9)(0,0)@xmath869 ( 2,3)(0,0)@xmath870 ( 6,4)(0,0)@xmath870 ( 6,5)(0,0)@xmath871     +    [ lem.char.m.type ] if @xmath292 is a sparse @xmath5-type and @xmath35 is the set of its leaves , then @xmath872 .    by definition , @xmath292 is closed under initial segments .    before introducing a lemma on properties of the leaves of a sparse @xmath5-type",
    ", we list the leaves of @xmath867 ( see figure  [ fig.tau * ] on page  ) with the lexicographically least one at the top of the stack , and continuing in increasing order down the stack .    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ @xmath873@xmath874@xmath875@xmath876@xmath877 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    [ lem.small.prop ] suppose @xmath292 is a sparse @xmath5-type whose set of leaves is @xmath878 listed in @xmath25-increasing order",
    ". then    1 .",
    "@xmath879 ; 2 .",
    "@xmath880 is a sequence of all zeros ; 3 .   if @xmath881 , then @xmath882 and @xmath883 ; 4 .   if @xmath881 , then for all @xmath884 with @xmath885 , @xmath886",
    "the first item follows from the fact that @xmath887 is a subset of @xmath284 of size @xmath888 . since @xmath92 is diagonal , all its elements have different lengths from among @xmath889 .",
    "since @xmath284 has @xmath890 elements , all of different lengths , it follows that for all @xmath891 , there is some @xmath892 with @xmath893 .",
    "now the second item holds , since for all @xmath894 , @xmath895 , either because @xmath896 and @xmath897 or because @xmath292 is sparse .",
    "then the third item follows from the definition of lexicographic order in a binary tree .    for the fourth item , fix attention on some @xmath881 .",
    "notice that if @xmath898 and @xmath899 , then @xmath900 , since @xmath901 .",
    "also , if @xmath902 and @xmath903 , then @xmath904 , since @xmath905 .",
    "now the fourth item follows from the previous two statements and the fact that @xmath292 is sparse .",
    "next we associate with each sparse @xmath5-type a sequence which is characteristic .",
    "[ def.alternate ] suppose @xmath292 is a sparse @xmath5-type whose set of leaves is @xmath878 listed in @xmath25-increasing order .",
    "define @xmath906 by @xmath907    [ lem.pi.one-one ] if @xmath292 and @xmath908 are sparse @xmath5-types and @xmath909 , then @xmath910 .",
    "let @xmath911 and @xmath912 be the sets of leaves of @xmath292 and @xmath908 .",
    "list @xmath92 and @xmath913 in increasing lexicographic order as @xmath880 , @xmath914 ,  ,",
    "@xmath915 and @xmath916 , @xmath917 ,  , @xmath918 .",
    "then for all @xmath919 , @xmath920 by definition of @xmath921 . also , for @xmath881 , @xmath922 .",
    "use induction on @xmath919 and the previous lemma to show @xmath923 .",
    "[ def.perm ] a function @xmath924 is an _ alternating permutation _ if it is a permutation , for all even @xmath925 , @xmath926 and for all odd @xmath925 , @xmath927 .",
    "the study of alternating permutations and the alternating group dates back to andr @xcite in 1881 , and continues to be an active area of investigation ( see @xcite for example ) .",
    "[ lem.pi.corr ] for all positive integers @xmath5 , @xmath921 is a bijection between the collection of sparse @xmath5-types and the the set of alternating permutations on @xmath928",
    ".    properties of meets guarantee that @xmath929 is an alternating permutation whenever @xmath292 is a sparse @xmath5-type . by the previous lemma , @xmath921 is one - to - one .    to see that it is onto ,",
    "suppose @xmath930 is an alternating permutation .",
    "let @xmath880 be the sequence of zeros of length @xmath931 .",
    "continue the recursion by defining @xmath914 , @xmath932 ,  , @xmath915 , by setting @xmath933 to be the sequence of of length @xmath934 which extends @xmath935 with all zeros .",
    "since @xmath936 is a permutation , all elements of @xmath937 have different lengths , and @xmath92 is an antichain listed in @xmath25-increasing order . also by construction , @xmath938 , so @xmath92 is diagonal . by construction , @xmath939 for all @xmath894 .",
    "use induction on @xmath213 to show that for all @xmath881 and all @xmath940 , if @xmath941 , then for some @xmath942 , @xmath943 and @xmath899 .",
    "it follows that @xmath92 is sparse .",
    "let @xmath944 .",
    "then the set of leaves of @xmath292 is @xmath92 and @xmath292 is a sparse @xmath5-type . by construction @xmath945 .",
    "since @xmath936 was arbitrary , the mapping @xmath921 is onto .",
    "the above proof was inspired by the counting of _ joyce trees _",
    "( named by ross street @xcite ) in a paper by joyce @xcite applying category theory to physics .",
    "the meet closure of an @xmath5-element diagonal subset of @xmath946 is an example of a joyce tree .",
    "they are counted up to a certain equivalence , and each equivalence class has exactly one example whose closure under initial segment is a sparse @xmath5-type .",
    "we also used ideas from a counting argument by vuksanovic in @xcite .",
    "[ lem.size.alt ] the number of alternating permutations on @xmath890 is @xmath89 , where @xmath89 is the @xmath5-th tangent number , defined recursively by @xmath947 and @xmath948    an exponential generating function for the sequence @xmath949 , where @xmath949 is the number of alternating permutations on @xmath54 , is @xmath950 ( see stanley s _ enumerative combinatorics i _",
    "@xcite ) . since the terms corresponding to @xmath951 in this series have even powers and the terms corresponding to @xmath952 have odd powers , an exponential generating function for @xmath953 , where @xmath953 is the number of alternating permutations on @xmath928 is @xmath952 .",
    "it is not difficult to show directly that the number of alternating permutations on @xmath890 satisfies the above recurrence . for notational convenience ,",
    "let @xmath847 denote the set @xmath890 . given a @xmath954 element subset @xmath955 and alternating permutations @xmath956 on @xmath954 and @xmath957 on @xmath958 ,",
    "use the unique order preserving maps @xmath916 from @xmath959 to @xmath960 and @xmath917 from @xmath961 to @xmath962 to @xmath963 .",
    "( see @xcite for details ) .",
    "[ cor.size.alt ] the set of sparse @xmath5-types has cardinality @xmath89 , where @xmath89 is the @xmath5-th tangent number , and @xmath964 where @xmath3 is the number of sparse vip @xmath5-types .    the next goal is to provide a closed form upper bound for the number of sparse vip @xmath5-types as a product of @xmath89 times a constant factor .",
    "we start by looking at the size of levels of @xmath965 for @xmath42 an @xmath5-element diagonal set .",
    "[ def.row.size ] suppose @xmath966 is a diagonal set .",
    "enumerate @xmath268 in increasing order of length as @xmath967 and define @xmath968    note that for @xmath5-element diagonal subsets of @xmath946 , the lengths of the elements of the meet closure are @xmath969 .",
    "[ lem.level.size ] for @xmath405 , and any @xmath5-element diagonal subset @xmath970 whose meet closure is listed in increasing order as @xmath967 , the cardinality of level @xmath213 of @xmath965 is @xmath971 moreover , if @xmath972 , then @xmath973 and @xmath974 .",
    "use induction to compute the size of @xmath975 in two different ways . to start the inductions ,",
    "note that for @xmath776 and @xmath976 , @xmath977 and @xmath978 are singletons , so @xmath979 and @xmath980 .",
    "also , since @xmath981 is meet of two elements and @xmath982 are the shortest elements , we have @xmath983 .",
    "since @xmath984 are the longest elements , we have @xmath985 is also a doubleton , thus @xmath986 . counting up from @xmath776",
    ", we get the values in the formula for @xmath987 , since the value for @xmath988 is one more than the value for @xmath989 if @xmath990 and one less if @xmath991 .",
    "thus for @xmath992 , @xmath993 .",
    "counting down from @xmath976 , we get the values in the displayed formula , since the value for @xmath994 is one more than the value for @xmath989 if @xmath995 and one less if @xmath996 .",
    "thus for @xmath992 , @xmath997 .",
    "the values @xmath998 and @xmath999 are achieved if @xmath42 is a comb whose leaves listed in increasing order as @xmath1000 satisfy @xmath1001 and for @xmath881 , @xmath1002 .",
    "[ def.v(a ) ] for any @xmath5-element diagonal subset @xmath970 , let @xmath1003 be the number of pairs @xmath1004 where @xmath61 is a @xmath268-vip order of @xmath965 .    [ lem.v(a).bnd ] for any @xmath5-element diagonal subset @xmath970 , the number of @xmath42-vip orders of @xmath965 is bounded above : @xmath1005    recall that every level of @xmath965 has an element of @xmath268 .",
    "for the first inequality , note that in every @xmath42-vip order , the element of @xmath268 on each level is the least element of the level . the righthand side of the first inequality is the count of level orders that satisfy this constraint . for the second inequality , use the estimates of lemma [ lem.level.size ] and the fact that @xmath1006 .",
    "[ lem.up.set ] the number of sparse vip @xmath5-types at bounded above by @xmath1007 .    by lemma [ cor.size.alt ]",
    "the number of sparse @xmath5-types is @xmath89 , so the lemma follows from lemma [ lem.v(a).bnd ] .    using notions from finite combinatorics , such as reverse raney sequences , and a fine analysis of sparse @xmath5-types",
    ", it is possible to calculate a closed form lower bound for the values of @xmath3 .",
    "this is done in an upcoming paper @xcite by j. larson , one of the conclusions of which is    [ thm.up.sparse][larson @xcite ] for all @xmath405 , @xmath1008 .",
    "figure [ fig.rvalue ] summarizes the calculation from @xcite of values of @xmath3 for @xmath1009 . a comparison with @xmath89 is also included .",
    "in this section we proof of theorem [ thm.shl ] based on shelah s proof @xcite together with ideas from @xcite . the major part of the proof is dedicated to the proof of lemma  [ thm : endhom ] below ; following this we show that this lemma implies theorem  [ thm.shl ] .",
    "[ thm : endhom ] assume @xmath405 and that @xmath1 is measurable in the model obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath1011 .",
    "then for any well ordering @xmath61 of the levels of @xmath19 and coloring @xmath1012^m\\to\\sigma$ ] of the @xmath5-element level sets of @xmath19 with @xmath263 colors there is a strong embedding @xmath1013 such that whenever @xmath1014^m$ ] and @xmath125 are such that the members of @xmath1015 are distinct , and @xmath23 and @xmath1016 are ordered the same way by @xmath61 , then we have @xmath1017)=d(e[s{{\\upharpoonright}}\\beta])$ ] .",
    "we actually use a slightly stronger version of lemma  [ thm : endhom ] , although we will indicate how this can be avoided at the cost of a slight strengthening of the hypothesis :    [ thm : endhomx ] suppose that @xmath1 and @xmath5 are as in lemma  [ thm : endhom ] , and that for each @xmath1018 we have a coloring @xmath1019 of the @xmath5-element level sets of @xmath19 in fewer than @xmath1 colors . then there is a strong embedding @xmath149 such that whenever @xmath23 and @xmath159 are as in lemma  [ thm : endhom ] we have @xmath1020)=d_\\xi(e[s{{\\upharpoonright}}\\beta])$ ] for each @xmath1018    we will give the proof of lemma  [ thm : endhom ] , and will indicate in footnotes how this should be modified to prove lemma  [ thm : endhomx ] .",
    "let @xmath1021 and @xmath61 be as in lemma  [ thm : endhom ] , and let @xmath1022 be the the forcing notion adding @xmath67 many cohen subsets of @xmath1 .",
    "thus a condition in @xmath1022 is a function @xmath884 with domain @xmath1023^{<\\kappa}$ ] and with values @xmath1024 .",
    "we abuse notation by writing @xmath1025 if @xmath1026 is stronger than @xmath884 , that is , if @xmath1027 and @xmath1028 for each @xmath1029 .    for @xmath1030 let @xmath1031 be a name for the @xmath213th cohen subset of @xmath1 , and",
    "let @xmath1032 be a name for the @xmath1-complete ultrafilter @xmath1033 on @xmath1 assumed to exist in the generic extension .",
    "for any @xmath1034^{<\\omega}$ ] there is a unique @xmath1035 such that @xmath1036 ; we write @xmath1037 for this @xmath679 and let @xmath1038 be a name for @xmath1037 . , this becomes @xmath1039 for each @xmath1018 . ]",
    "if @xmath1040 then we write @xmath1041 for @xmath1042 .",
    "if @xmath1043 is an order preserving map between subsets of @xmath67 then @xmath1044 is the map defined by @xmath1045 , and if @xmath1046 then we define @xmath1047 where @xmath1048 is the unique order preserving map .",
    "[ thm : wu ] there is a set @xmath1049^\\kappa$ ] and a function @xmath1050^{\\le m}\\to[\\lambda]^{\\le\\kappa}$ ] satisfying the following conditions :    1 .",
    "[ item : w1]if @xmath1051^{\\le m}$ ] then @xmath1052 , and @xmath1053 contains a maximal antichain of conditions @xmath884 deciding the value of @xmath1038 . , @xmath1053 contains a maximal antichain of conditions deciding the value of @xmath1054 for each @xmath1018 . ] 2 .",
    "[ item : w2 ] if @xmath1055^{\\le m}$ ] and @xmath1056 , then @xmath1057 , the function @xmath1058 maps @xmath609 to @xmath1059 , and for all @xmath1060 and @xmath1035 , @xmath1061 3 .",
    "[ item : w3 ] if @xmath1062^{\\le m}$ ] then @xmath1063 , and if @xmath1055^{\\le m}$ ] then @xmath1064 .    because @xmath1022 has the @xmath1065-chain condition , there are sets @xmath1066^{\\le\\kappa}$ ] such that clause  1 is satisfied when @xmath1067 is substituted for @xmath1068",
    ". we can also arrange that @xmath1069 whenever @xmath1070 .",
    "now define an equivalence relation on @xmath1071^{\\le 2m}$ ] as follows : two sets @xmath609 and @xmath1059 in @xmath1071^{\\le 2m}$ ] are equivalent if they satisfy the following two conditions :    1 .",
    "@xmath1056 , and if @xmath1072 then clause  2 above holds with @xmath1073 and @xmath1074 substituted for @xmath1075 and @xmath1076 .",
    "[ item : b ] suppose that @xmath1077 , with @xmath1078^{\\le m}$ ] , and that @xmath1079 and @xmath1080 are the subsets of @xmath1059 such that @xmath1081 .",
    "then this isomorphism extends to an isomorphism @xmath1082    there are only @xmath1083 equivalence classes , and therefore the assumption that @xmath1084 implies that there is @xmath1085^\\kappa$ ] such that any pairs @xmath1086^{k}$ ] are equivalent for all @xmath1087 .",
    "it follows that clauses  1 and  2 are satisfied when @xmath1067 and @xmath1088 are substituted for @xmath1068 and @xmath1089 .",
    "now define @xmath1090^{\\le m}\\and \\bigcap x\\subseteq u\\,\\right\\}},\\ ] ] and let @xmath1091 where @xmath1092 is the increasing enumeration of @xmath1088 .",
    "we claim that @xmath1068 and @xmath1089 are as required .",
    "first note that we only need to consider finite sets @xmath1093 in . to see this ,",
    "suppose @xmath1094 , fix a set @xmath1095 , and pick @xmath1096 such that @xmath1097 and for each @xmath1098 there is a set @xmath1099 such that @xmath1100 .",
    "then @xmath1101 , @xmath1102 , and @xmath1103 .",
    "now note that condition  ( [ item : b ] ) can be extended to arbitrary finite sets : if @xmath1104 and @xmath1105 are subsets of @xmath1106^{<\\omega}$ ] such that @xmath1107 then @xmath1108 to see this , note that  condition  ( [ item : b ] ) implies that @xmath1109 whenever @xmath1086^{s}$ ] for some @xmath1110 .",
    "let @xmath1111 and @xmath1112 be the increasing enumerations .",
    "it follows that @xmath1113 ; and for each @xmath1114 and @xmath1115 and @xmath1116 we have @xmath1117 , and @xmath1118 .",
    "this easily implies  .",
    "a consequence of this is that the intersection @xmath1119 in   does not depend on @xmath1093 , but only on the isomorphism type of @xmath1120 where @xmath1121 .",
    "the proof of this proceeds by induction on the size of the set of ordinals in @xmath1122 on which two sets @xmath1093 and @xmath1123 with the same isomorphism type differ .",
    "let @xmath1124 and @xmath1125 be the least corresponding pair of ordinals which differ between @xmath1093 and @xmath1123 .",
    "assuming without loss of generality that @xmath1126 , let @xmath1127 be the set obtained by replacing @xmath1128 by @xmath1129 in @xmath1123 .",
    "then @xmath1130 by the induction hypothesis . to see that @xmath1131 , pick some @xmath1132 with @xmath1133",
    ". then @xmath1134 , and the members of @xmath1135 are not moved in the isomorphism   between @xmath1136 and @xmath1137 .",
    "this implies that the union in   can be taken to be finite , since there are only finitely many such isomorphism classes , and hence @xmath1138 .",
    "if @xmath1055^{s}$ ] for some @xmath1139 then it follows that @xmath1057 , since the fact that @xmath1089 contains only limit members of @xmath1088 implies that for each set @xmath1093 contributing an intersection to @xmath1075 there is an isomorphic set @xmath1123 contributing an intersection to @xmath1076 .",
    "furthermore this isomorphism between @xmath1075 and @xmath1076 preserves the isomorphism between @xmath1073 and @xmath1074 , so the equivalence   in clause  [ item : w2 ] of claim  [ thm : wu ] holds for @xmath1068 as well as for @xmath1067 .",
    "finally , the definition of @xmath1075 easily implies clause  [ item : w3 ] of claim  [ thm : wu ] .",
    "we are now ready to construct the promised strong embedding @xmath149 . for sets @xmath1051^{\\le m}$ ]",
    "define @xmath1140 .",
    "for @xmath115 let @xmath1141 be the set of one to one functions @xmath23 with @xmath1142^{\\le    m}$ ] and @xmath1143 .",
    "if @xmath1144 , @xmath125 , and the members of @xmath1145 are all distinct then we will abuse notation by writing @xmath1146 for the function @xmath1147 with @xmath1148 defined by @xmath1149 .",
    "the sets @xmath1141 include the empty function @xmath21 as a member , and we will abuse the notation by taking the function @xmath1150 to be different from @xmath1151 whenever @xmath1152 .",
    "we use recursion on @xmath115 to define an ordinal @xmath1153 and a map @xmath1154 , along with conditions @xmath1155 for each @xmath1156 . several times in the following construction",
    "we will use the observation that this , together with the fact from claim  [ thm : wu ] that @xmath1157 for all @xmath1158^{\\le m}$ ] , implies that @xmath1159 and @xmath1160 are compatible whenever @xmath1161 is a function .",
    "hence @xmath1162 is a condition for any one to one function @xmath292 with @xmath1163 and @xmath1164 . in particular",
    "this is true for all @xmath1165 .",
    "the construction will satisfy the following induction hypotheses :    1 .",
    "[ item : psorder ] if @xmath1166 preserves order , then @xmath1167 .",
    "[ item:0 ] if @xmath125 and the sets @xmath1168 are distinct then @xmath1169 .",
    "3 .   [ item:1 ] @xmath1170)$ ] whenever @xmath23 is an order isomorphism between @xmath1171 and @xmath1172 . this should hold for @xmath1173 for all @xmath1174 .",
    "[ item:2 ] if @xmath1175 and @xmath1176 then @xmath1177 .",
    "clause  [ item : psorder ] asserts that @xmath1159 depends , up to isomorphism , only on @xmath1178 and the order which @xmath23 induces on that set .",
    "clause  [ item:1 ] will imply the required end - homogeneity , since if @xmath125 then @xmath1179 forces that @xmath1180 , and consequently @xmath1181)=d(e[{\\operatorname{dom } } (    s{{\\upharpoonright}}\\beta)])$ ] whenever @xmath61 orders @xmath1178 and @xmath1182 alike .",
    "for @xmath54 small enough that @xmath1183 we can define @xmath1184 , along with @xmath1185 and @xmath1186 for all @xmath1187 .",
    "the construction for @xmath106 with @xmath1188 consists of three steps .",
    "the first step defines conditions @xmath1189 which will satisfy clauses  [ item : psorder ] and  [ item:0 ] ( with @xmath1189 instead of @xmath1159 ) and satisfies clause  [ item:1 ] to the extent that @xmath1190 the second step will define @xmath1191 and define @xmath1154 so that if the ordering given to @xmath1178 by @xmath23 agrees with the given ordering @xmath61 then @xmath1192)$ ] has the value @xmath1193 determined in the first step .",
    "the final step consists of setting @xmath1194 except for the adjustments necessary to satisfy clause  [ item:2 ] .",
    "the first step is divided into two cases , depending on whether or not @xmath106 is a limit ordinal .",
    "[ [ case-1-alpha - is - a - limit - ordinal . ] ] case 1 : @xmath106 is a limit ordinal .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath1195 .",
    "for @xmath1196 let @xmath1197 , and for @xmath1156 , let @xmath1198 note that the induction hypothesis implies that @xmath1199 .",
    "furthermore @xmath1189 satisfies clause  [ item:0 ] , and by the induction hypothesis this implies that @xmath1189 satisfies  .    [ [ case-2-alpha - is - a - successor - ordinal . ] ] case 2 : @xmath106 is a successor ordinal .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath441 , set @xmath1200 , and set @xmath1201 for each @xmath1202 . for each @xmath1156",
    "such that the members of @xmath1203 are distinct set @xmath1204 .",
    "if the members of @xmath1203 are not distinct then set @xmath1205 .",
    "let @xmath1206 enumerate the set of @xmath1156 such that @xmath1207 is an initial segment of @xmath1089 of length @xmath5 .",
    "thus for every @xmath1144 there is a unique ordinal @xmath1208 and order preserving map @xmath308 such that @xmath1209 .",
    "now define @xmath1210 for each @xmath1211 and @xmath1156 by recursion on @xmath1211 : if @xmath213 is a limit ordinal then @xmath1212 .",
    "for a successor ordinal @xmath1213 , suppose that @xmath1210 is defined for all @xmath1156 and set @xmath1214 .",
    "now choose @xmath1215 in @xmath1216 so that @xmath1217 decides the value , @xmath1217 decides @xmath1218 for each @xmath1174 .",
    "] of @xmath1219 , and for each @xmath1220 set @xmath1221 .",
    "to finish up , define @xmath1222 , as in clause  [ item : psorder ] , for all @xmath1220 and all order preserving functions @xmath1223 ; and set @xmath1224 for all other @xmath1156 .",
    "now complete the first step of the construction by setting @xmath1225",
    ".    for the second step of the construction let @xmath1226 be a one to one map which preserves the given ordering @xmath61 on @xmath693 .",
    "such a map exists since @xmath1227 .",
    "now set @xmath1228^{\\le m}\\,\\right\\}}$ ] .",
    "this is a condition , and @xmath1217 decides the value of @xmath1229})$ ] for each @xmath1230^{m}$ ] .",
    "now , since @xmath1032 is forced to be a @xmath1-complete ultrafilter in the generic extension , there is a condition @xmath1231 and an ordinal @xmath1232 such that @xmath1233\\,\\right\\}})=\\name      d(\\tau[y]))\\footnote{for lemma~\\ref{thm : endhomx } this should hold      for $ d_{\\xi}$ for each $ \\xi<\\kappa$.}\\ ] ] for each @xmath1230^{m}$ ] .",
    "we can assume without loss of generality that for each @xmath1202 , we have @xmath1234 .",
    "set @xmath1235 and complete the definition of @xmath1236 by setting @xmath1237 . finally complete the definition of @xmath1159 by setting @xmath1238 unless @xmath1239 for some @xmath224 , in which case define @xmath1240 by setting @xmath1241 .",
    "this completes the definition of the embedding @xmath149 , and hence of the proof of the end homogeneity lemma  [ thm : endhom ] .",
    "[ thm : prese ] suppose that @xmath61 and @xmath1242 are well orderings of @xmath19 .",
    "then there is a strong embedding @xmath1243 such that for a dense set of nodes @xmath429 , we have @xmath1244 for all @xmath1245 and @xmath1246 .",
    "define @xmath1247 ^ 2\\to{{^{\\sigma}}}2 $ ] by setting @xmath1248 equal to the boolean value @xmath1249 .",
    "apply lemma  [ thm : endhom ] to get a strong embedding @xmath1243 so that if @xmath1250 are in @xmath693 then @xmath1251 depends only on whether or not @xmath1252 .",
    "we want to find , for any given node @xmath24 , a node @xmath1253 such that @xmath1254 for all @xmath1255 for @xmath469 such that @xmath1250 , @xmath1256 . it will be sufficient to show that we can do this for any one @xmath1246 and for one of the two cases @xmath1252 or @xmath1257 .",
    "we will do it for @xmath1252 , and will indicate the change for @xmath1258 .",
    "suppose , for the sake of contradiction , that for every @xmath1253 there is a level set @xmath1259 such that @xmath1250 , @xmath1256 and @xmath1252 but @xmath1260 . by the end - homogeneity",
    "the same will be true of any @xmath1261 such that @xmath1262 .",
    "define an infinite sequence of pairs @xmath1263 of nodes as follows : set @xmath1264 .",
    "if @xmath1265 is defined then let @xmath1266 be nodes of the same length , extending @xmath1265 , such that @xmath1267 and @xmath1260 for all @xmath1268 and @xmath1269 such that @xmath1252 .",
    "now fix @xmath115 such that @xmath1270 for each @xmath677 , and choose @xmath1271 for each @xmath677 .",
    "the nodes @xmath1272 have the properties that @xmath1273 for each @xmath1274 , and @xmath1275 for each @xmath1274 such that @xmath1276 .",
    "now apply ramsey s theorem to get an infinite subset @xmath1277 such that the boolean values @xmath1278 are constant for @xmath1279^{2}$ ] .",
    "since @xmath61 is a well order we must have @xmath1280 for all @xmath1274 in @xmath1093 , but then @xmath1281 is an infinite descending @xmath1282-sequence , contradicting the assumption that @xmath1282 is a well order .",
    "the proof for the case @xmath1257 is the same except that the pair @xmath1283 satisfies @xmath1284 for @xmath1285 and @xmath1269 .",
    "suppose that @xmath1 , @xmath5 , @xmath61 , and @xmath1019 are as in lemma  [ thm : endhomx ] .",
    "then there is a strongly embedded tree @xmath278 of height @xmath1 such that @xmath1286 whenever @xmath23 and @xmath1287 are @xmath61-similar members of @xmath1288^m$ ] . and @xmath1129 is smaller than the number of split levels of @xmath95 below @xmath106 .",
    "let @xmath1243 be the strong embedding given by lemma  [ thm : endhomx ] . by corollary  [ thm : prese ]",
    "there is a strong embedding @xmath1289 and a @xmath429 such that , for all @xmath1290 we have @xmath1291 } e'(s')\\iff s \\mathrel{e^{-1}[\\prec ] } s'$ ] . then @xmath1292 $ ] is as required .",
    "[ thm : shlvar ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 .",
    "then for any coloring @xmath262 of the @xmath5-element antichains of @xmath19 into @xmath263 colors , and any well - ordering @xmath61 of the levels of @xmath19 , there is a strong embedding @xmath1293 such that @xmath1294 for all @xmath61-similar @xmath5-element antichains @xmath202 and @xmath191 of @xmath95 .",
    "first we show that this lemma implies theorem  [ thm.shl ] :    let @xmath1243 satisfy the conclusion of lemma  [ thm : shlvar ] . by corollary  [ thm : prese ]",
    "there is a strong embedding @xmath1289 and an dense set of nodes @xmath323 such that @xmath62 if and only if @xmath1295 for all @xmath1296 .",
    "the composition @xmath1297 satisfies the conclusion of theorem  [ thm.shl ] .",
    "the maximum height of a similarity tree with @xmath5 terminal nodes is equal to the number of meets plus the number of terminal nodes , which is @xmath1298 .",
    "we will define a sequence @xmath1299 of strongly embedded subtrees , using a reverse recursion on @xmath1300 starting with @xmath1301 .    for @xmath1300",
    "we assume as a recursion hypothesis that @xmath1302 has the following homogeneity property :    _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ suppose that @xmath1303^{m}$ ] are @xmath61-similar antichains , with the common collapse @xmath1304 , and suppose that @xmath1305 where @xmath1306 and @xmath1307 are the maps witnessing this similarity",
    ". then @xmath1308 . _",
    "_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _    note that this puts no constraint on @xmath1309 , and it implies that @xmath1310 satisfies the conclusion of lemma  [ thm : shlvar ] .    for each @xmath115 ,",
    "each antichain @xmath1311^{<m}$ ] , and each ordered similarity tree @xmath1312 consider the following coloring @xmath1313 of the @xmath1314-element level sets @xmath1315^{\\le m}$ ] : if @xmath1316 is an antichain , and @xmath1317 , then @xmath1318 where @xmath1319^{m}$ ] is any antichain such that @xmath1320 . if @xmath1316 is not an antichain , if @xmath1321 , or if no such antichain @xmath226 exists then set @xmath1322 .",
    "lemma  [ thm : shlvar ] implies that there is a strongly embedded subtree @xmath1323 on which @xmath1324 whenever the nodes @xmath1325 for @xmath1326 are distinct , and the sets @xmath224 and @xmath1327 are both in @xmath1328 and are ordered the same way by @xmath61 .",
    "thus @xmath1328 satisfies the recursion hypothesis .",
    "we note that the proof of theorem  [ thm.shl ] does not require that the ultrafilter @xmath1033 be normal , and hence is valid for @xmath48 .",
    "this is essentially harrington s proof of the halpern - luchli theorem , which may be found in the farah - todorcevic book @xcite .",
    "harrington s proof served as a starting point for shelah in @xcite .",
    "there are a number of remaining open questions suggested by the results presented so far so we comment on some of them .",
    "is theorem  [ thm.shl ] ( or lemma  [ thm : endhom ] ) consistent with the gch ? is the conclusion of theorem  [ thm.shl ] compatible with @xmath35 , namely can there be an uncountable cardinal @xmath1 in @xmath35 which satisfies that conclusion ?    note that the hypothesis of lemma  [ thm : endhom ] implies that the gch fails at almost every @xmath115 . indeed for almost every @xmath115 the power set of @xmath106 in @xmath1329 is a generic extension obtained by adding @xmath1330 cohen subsets of @xmath106 to some ground model @xmath1331 , where @xmath1332 , since this is true in the generic extension of @xmath1329 obtained by adding @xmath67 cohen subsets to @xmath1 , and this extension does not add bounded subsets to @xmath1 .",
    "the latter part of the question was asked by michael hruak .",
    "see below for an argument showing that such a @xmath1 must be weakly compact .    can theorem  [ thm.shl ]",
    "be strengthened to require that @xmath1333\\subseteq{\\prec}$ ] ?",
    "it would be sufficient to prove this for level sets in @xmath831^{2}$ ] , as this would imply the corresponding modification of corollary  [ thm : prese ]",
    ". a positive solution would be likely to also give a positive answer to the next question :    is the relation @xmath1334 consistent ?",
    "that is , is it consistent that for any @xmath1335^{<\\omega}\\to\\sigma$ ] for some @xmath263 , there is a strongly embedded tree @xmath95 such that @xmath1336^{m}]$ ] is finite for each @xmath261 ?    shelah observes that the corresponding variation of lemma  [ thm : endhom ] follows from the assumption that @xmath1 is measurable after adding @xmath67 cohen subsets of @xmath1 , where @xmath1337 .",
    "this may be easily seen by examining the proof of lemma  [ thm : endhom ] given here , which requires only minor changes .",
    "however the top - down proof of theorem  [ thm.shl ] from lemma  [ thm : endhom ] given here does not work with the superscript @xmath1338 .",
    "it should be noted that in spite of the use of the ultrafilter @xmath1033 in the construction , the set of splitting levels of the homogeneous strongly embedded subtree @xmath95 is not in any sense a member of @xmath1033 ; indeed it is far from being even stationary .",
    "this follows from the fact that the set of splitting levels of @xmath95 need not contain any fixed points , even for @xmath1339 , which in turn follows from the observation that @xmath1340 contains only @xmath106 many strongly embedded subtrees , each of which has @xmath673 many branches .",
    "thus we can color , for each cardinal @xmath106 , the members of @xmath693 with @xmath673 colors in such a way that any strongly embedded subtree of @xmath1340 contains branches with every color .",
    "what is the large cardinal strength of the conclusion of theorem  [ thm.shl ] ?",
    "it is easy to see that a supercompact cardinal whose supercompactness was made indestructible to @xmath1341-directed closed forcing using laver s method @xcite , satisfies the assumptions of the theorem .",
    "a much better upper bound is available .",
    "namely , work of gitik in @xcite ( mentioned also as @xcite in @xcite ) , together the erds - rado theorem , implies that a model satisfying the hypothesis of theorem  [ thm.shl ] can be constructed by forcing over a model of @xmath1342 .    on the other hand , it is easy to see that theorem  [ thm.shl ] implies that @xmath1 is weakly compact . to show that @xmath1343 , let the function @xmath1344 ^ 2\\to 2 $ ] be given and define a coloring @xmath118 of the two element antichains in @xmath19 by by @xmath1345 if @xmath594 and @xmath1346 otherwise .",
    "if @xmath95 is the strongly embedded tree whose existence is guaranteed by shelah s theorem [ thm.shl ] then there are two possible @xmath61-similarity classes of @xmath63-element level sets , one in which the lexicographic order of the pair agrees with the @xmath61-order and the other in which these two orders disagree . by a sierpinski argument , at the @xmath60th level of @xmath95 , there are pairs of both classes with meets on the same level . since the coloring of these level sets depends only on the lengths of the pair and their meet , both @xmath61-similarity classes receive the same color .",
    "it follows that @xmath308 is monochromatic on pairs from the set of @xmath106 for which @xmath106 is a splitting level of @xmath95 .    as a consequence of theorem  [ thm.partition ] and an earlier result of hajnal and komjth ( @xcite )",
    "we obtain the following theorem which shows that the conclusion of theorem  [ thm.shl ] does not follow from any large cardinal hypothesis .",
    "this suggests that the use of an ultrafilter in a generic extension , as opposed to one in @xmath1329 , is a necessary part of the proof .",
    "[ thm.largecard ] the conclusion of theorem  [ thm.shl ] does not follow from any large cardinal hypothesis on @xmath1 .",
    "hajnal and komjth @xcite show that there is a forcing of size @xmath1347 which adds an order type @xmath490 of size @xmath1347 with the property that @xmath1348 ^ 2_{\\omega_1}$ ] for every order type @xmath1349 , regardless of its size .",
    "that is , there is a coloring of the pairs of @xmath1349 into @xmath1347 many colors such that every suborder of type @xmath490 gets all the colors .",
    "the conclusion of our theorem  [ thm.partition ] states , in contrast , that the ordering @xmath1350 has , for any coloring of its pairs , a subset of the full order type @xmath1350 which gets only finitely many colors .",
    "this subset contains subsets of every order type of size less than @xmath1 , since @xmath1350 is a @xmath1341-universal linear order .",
    "hence theorem  [ thm.partition ] can not hold in the hajnal - komjth extension , and so shelah s theorem from which it is derived , can not either .",
    "in this section we prove a limitation of colors result for @xmath1-rado graphs orders using shelah s theorem [ thm.shl ] . by a @xmath1-rado graph we mean",
    "a graph @xmath76 of size @xmath1 with the property that for every two disjoint subsets @xmath42 , @xmath43 of @xmath76 , each of size @xmath8 , there is @xmath77 connected to all points of @xmath42 and no point of @xmath43 .",
    "the existence of such @xmath76 follows from the assumption @xmath46 is regular .    in order to apply shelah s theorem ,",
    "we need a method of embedding @xmath1-rado graphs into @xmath19 and a well - ordering of the levels of @xmath19 that is compatible with that embedding .",
    "we observe that any @xmath1-rado graph is isomorphic to one whose universe is @xmath1 , and generalize the approach used by erds , hajnal and psa @xcite to embed such a graph into @xmath19 .",
    "[ def.translate ] given a @xmath1-rado graph @xmath1351 , the _ tree embedding of @xmath1352 into @xmath19 _ is the function @xmath1353 defined by @xmath1354 , and for @xmath595 , @xmath1355 is defined by @xmath1356 if and only if @xmath1357 .",
    "[ lem.sigma.cofinal ] for any @xmath1-rado graph @xmath1351 , the range of the tree embedding @xmath617 of @xmath1352 into @xmath19 is a cofinal transverse subset of @xmath19 .    by definition of @xmath617 , for all @xmath115 , @xmath1358 , so the range of @xmath617 is transverse .    to see that the range is cofinal , suppose @xmath720",
    "let @xmath1359 and let @xmath42 be the set of all @xmath1360 with @xmath1361 . since @xmath1352 is a @xmath1-rado graph , there is an element @xmath1362 such that @xmath1363 for all @xmath1364 and @xmath1365 for all @xmath1366 .",
    "it follows that @xmath1367 .",
    "thus @xmath1368 $ ] is cofinal in @xmath19 .",
    "our next goal in this section is a translation of questions about isomorphisms of @xmath1-rado graphs into themselves to questions about @xmath19 . toward that end , we define _ passing number preserving maps_. this notion was used in the proof of the limitation of colors result by laflamme , sauer and vuksanovic @xcite for the countable rado graph , which is also known as the ( infinite ) random graph .",
    "[ def.pnp ] for @xmath593 with @xmath1369 , call @xmath1370 the _ passing number _ of @xmath24 at @xmath23 . call a function @xmath1371 _ passing number preserving _ or a _ pnp map _ if it preserves    1 .",
    "length order : @xmath222 implies @xmath1372 ; and 2 .",
    "passing numbers : @xmath222 implies @xmath1373 .",
    "the first lemma states that any induced subgraph of a @xmath1-rado graph @xmath1351 has an induced subgraph which is isomorphic to the @xmath1-rado graph by an isomorphism that also preserves @xmath870 .",
    "[ lem.rado.increasing ] for any cardinal @xmath1 with @xmath46 , any @xmath1-rado graph @xmath1351 and any @xmath1374 with @xmath1375 there is a @xmath870-increasing map @xmath1376 with @xmath1377,e{{\\upharpoonright}}g[\\kappa])$ ] .    fix attention on a particular @xmath1-rado graph @xmath1378 and a specific induced subgraph @xmath1379 isomorphic to @xmath1352 .",
    "let @xmath1380 be the isomorphism .",
    "since @xmath47 , by the mapping extension property , for any @xmath183 and any subset @xmath1381 , there are cofinally many @xmath1382 with @xmath1383 .",
    "define @xmath1384 and @xmath1376 by recursion .",
    "let @xmath1385 and @xmath1386 .",
    "suppose @xmath1387 and @xmath1388 have been defined such that @xmath229 is increasing , for all @xmath125 , @xmath1389 , and @xmath1388 is an increasing isomorphism of @xmath1390 into @xmath1379 .",
    "let @xmath1362 be so large that if @xmath1391 , then @xmath1392 .",
    "let @xmath1393 .",
    "let @xmath1394 be such that @xmath1395 .",
    "let @xmath1396 .",
    "since @xmath118 is an isomorphism , a pair @xmath1397 is in @xmath913 if and only if the pair @xmath1398 is in @xmath913 .",
    "it follows that @xmath1399 .",
    "therefore by induction , @xmath308 is the desired increasing isomorphism into @xmath1400 .",
    "[ lem.rado.iso.1 ] suppose @xmath1351 is a @xmath1-rado graph with tree embedding @xmath617 and @xmath1401 $ ] . for any @xmath870-increasing map @xmath1402 with @xmath1377,e{{\\upharpoonright}}g[\\kappa])$ ] ,",
    "the composition @xmath1403 is a pnp map .",
    "let @xmath1404 for some @xmath870-increasing isomorphism of @xmath1352 into itself .",
    "suppose @xmath1405 and @xmath1406",
    ". then @xmath1407 and @xmath1408 .",
    "since @xmath308 is @xmath870-increasing , @xmath1409 .",
    "hence @xmath1410 .",
    "moreover , @xmath1411 if and only if @xmath1412 .",
    "since @xmath308 is an isomorphism , @xmath392 if and only if @xmath1413 . by definition of tree embedding , it follows that @xmath392 if and only if @xmath1414 . thus @xmath248 is a pnp map from @xmath65 into @xmath65 .    by much the same reasoning",
    ", one can show the converse .",
    "[ thm.1.translate][translation theorem ] suppose @xmath1351 is a @xmath1-rado graph with tree embedding @xmath617 and @xmath1401 $ ] .",
    "for any pnp map @xmath1415 , the composition @xmath1416 is an @xmath870-increasing map with @xmath1377,e{{\\upharpoonright}}g[\\kappa])$ ] .",
    "let @xmath1417 for some pnp map @xmath1415 .",
    "suppose @xmath1418 .",
    "then @xmath1419 . since @xmath248 is a pnp map , @xmath1420 ,",
    "so @xmath308 is a @xmath870-increasing map .    by the definition of the tree embedding",
    ", @xmath1421 is an edge of @xmath1352 if and only if @xmath1422 .",
    "since @xmath248 is a pnp map , it follows that @xmath1421 is an edge of @xmath1352 if and only if @xmath1423 .",
    "apply the definition of tree embedding to @xmath1424 and @xmath1425 , to see that @xmath1421 is an edge of @xmath1352 if and only if @xmath1426 is an edge .",
    "thus @xmath308 is a @xmath870-increasing isomorphism of @xmath1352 into itself .",
    "the next definition identifies sufficient conditions for a map to carry a strongly diagonal set to one of the same @xmath5-type .",
    "[ def.polite ] call a map @xmath1371 _ polite _ if it satisfies the following conditions for all @xmath1427 :    1 .",
    "( preservation of lexicographic order ) if @xmath224 and @xmath226 are incomparable and @xmath665 , then @xmath1428 and @xmath1429 are incomparable and @xmath1430 ; 2 .",
    "( meet regularity ) if @xmath314 is diagonal and @xmath315 , then @xmath1431 ; 3 .",
    "( preservation of meet length order ) if @xmath318 , then @xmath1432 .    call it _ polite to strongly diagonal sets _ if it is a pnp map which satisfies the above conditions for all @xmath1427 with @xmath1433 a strongly diagonal set .",
    "the next lemma follows immediately from the above definition .",
    "[ lem.preserve.polite ] strong embeddings are polite and polite to strongly diagonal sets .",
    "the collection of polite embeddings is closed under composition as is the collection of embeddings polite to strongly diagonal sets .",
    "[ lem.diag.to.diag ] suppose @xmath1434 is a map which is polite to strongly diagonal sets and whose image is a strongly diagonal set .",
    "then for any strongly diagonal set @xmath42 , @xmath1435)$ ] and there is a pnp map @xmath1436)}^{\\wedge}}$ ] such that for all @xmath1437 in @xmath42 , @xmath1438 .",
    "fix a strongly diagonal set @xmath42 .",
    "let @xmath1439 for @xmath37 and let @xmath1440 for @xmath1441 .",
    "the proof of the lemma for @xmath42 proceeds by a series of claims .",
    "the map @xmath1442 is well - defined .",
    "we must show that for all @xmath1443 , if @xmath1444 , then @xmath1445 . if @xmath1446 or @xmath1447 , then @xmath1448 since @xmath42 is diagonal . in this case",
    "the claim follows immediately , so assume @xmath1449 and @xmath1450 .",
    "if @xmath1451 is non - empty , then the claim follows from the assumption of meet regularity .",
    "so assume @xmath1451 is empty .",
    "since @xmath1452 is a three element diagonal set and @xmath1453 is an initial segment of all three elements , either @xmath1454 or @xmath1455 .",
    "hence by meet regularity , either @xmath1456 or @xmath1457 , and the claim follows .    the map @xmath1442 preserves length order .",
    "assume @xmath1458 satisfy @xmath222 .",
    "let @xmath1459 be such that @xmath1460 and @xmath1461 be such that @xmath1462 .",
    "by preservation of meet length order , since @xmath318 , it follows that @xmath1463 .",
    "the map @xmath1442 is a pnp map such that for all @xmath1437 in @xmath42 , @xmath1464 .    by the definition of @xmath1442 and the previous claims",
    ", it is enough to show that @xmath1442 preserves passing numbers .",
    "suppose @xmath23 and @xmath24 are in @xmath268 and @xmath222 . since any element @xmath1465 of the closure of @xmath42 is either in @xmath42 or has a proper extension @xmath24 in @xmath42 with @xmath1466 , we may assume without loss of generality that @xmath24 is in @xmath42 .",
    "if @xmath1467 , then the conclusion follows since @xmath1468 is a pnp map .",
    "so suppose @xmath1460 for @xmath224 and @xmath226 distinct elements of @xmath42 .",
    "consider @xmath22 .",
    "either it has the same length as @xmath23 or it is shorter .    if @xmath1469 , then @xmath1470 by the previous claim . in this case ,",
    "@xmath1471 , since @xmath42 and its image under @xmath1468 are both strongly diagonal .",
    "if @xmath1472 , then @xmath135 .",
    "let @xmath1473 be such that @xmath1474 .",
    "then the value of @xmath1475 and @xmath1476 are determined by the lexicographic order of the pairs @xmath1477 and @xmath1478 . since @xmath1468 preserves lexicographic order , @xmath1479 , as required .",
    "@xmath1435)$ ] .",
    "enumerate @xmath268 in increasing order of length as @xmath1480 for some @xmath408 .",
    "let @xmath1481 $ ] .",
    "then @xmath43 is a strongly diagonal set since it is a subset of a strongly diagonal set .",
    "enumerate @xmath1482 in increasing order of length as @xmath1483 for some @xmath1484 .    since @xmath1442 is a pnp map that carries @xmath268 onto @xmath1482 , it is a bijection from @xmath268 to @xmath1482 .",
    "since the order type of @xmath1485 is @xmath106 and the order type of @xmath1486 is @xmath159 , it follows that @xmath1487 and @xmath1488 .    for @xmath1489 , let @xmath1490 and @xmath1491 .",
    "let @xmath1492 and @xmath1493 .",
    "use induction to prove that for all positive @xmath1494 , @xmath1495 . to start the induction ,",
    "observe that @xmath1496 , so @xmath1497 .",
    "for the limit case , assume @xmath106 is a limit ordinal and for all @xmath125 , @xmath1498 . in this case , @xmath1495 , since @xmath1499 and @xmath1500 .",
    "for the successor case , assume @xmath441 and @xmath1501 .",
    "let @xmath1502 be the increasing enumeration of @xmath1503 and let @xmath1504 be the increasing enumeration of @xmath1505 .",
    "then @xmath1506 is the similarity tree whose set of leaves is @xmath1507 and @xmath1508 is the similarity tree whose set of leaves is @xmath1509 .",
    "moreover @xmath1510 is the similarity tree whose set of leaves is @xmath1511 and @xmath1512 is the similarity tree whose set of leaves is @xmath1513 . for @xmath1514",
    ", @xmath1515 is the passing number of @xmath202 at @xmath1516 .",
    "since @xmath1442 preserves passing numbers and carries elements of @xmath42 to elements of @xmath43 and elements of @xmath1517 to elements of @xmath1518 , it follows that @xmath1495 in this case as well .",
    "therefore by induction , @xmath1519 , and since @xmath1520 and @xmath1521 , the claim follows .    since @xmath42 was an arbitrary strongly diagonal set , by the last two claims , the lemma follows .",
    "our next goal is to prove the existence of a _",
    "pnp diagonalization_.    [ def.thin.diag.map ] suppose @xmath323 and @xmath87 .",
    "call @xmath248 a _ pnp diagonalization into @xmath309 _",
    "if @xmath248 is a polite injective @xmath311-preserving pnp map whose range is a strongly diagonal subset @xmath92 with @xmath313 . call @xmath248 a _ pnp diagonalization",
    "_ if it is a pnp diagonalization into @xmath1522 .",
    "an extra quality we desire for our diagonalization is _ level harmony _ , which will be used in the section on lower bounds .",
    "[ def.harmony ] suppose @xmath1523 is an injective map .",
    "define @xmath1524 by @xmath1525 . the function _",
    "@xmath248 has level harmony _ if @xmath1526 is an extension and @xmath25-order preserving map such that for all @xmath593 , the following conditions hold :    1 .",
    "@xmath1527 ; 2 .",
    "@xmath222 implies @xmath1528 ; 3 .",
    "@xmath594 implies @xmath1529 .",
    "[ lem.2.diag.map][second diagonalization lemma ] suppose @xmath323 and that @xmath87 is cofinal and transverse .",
    "then there is a pnp diagonalization into @xmath309 which has level harmony .",
    "our plan is to approach the problem in pieces by using recursion to define three functions , @xmath1530 so that @xmath324 is the desired diagonalization , @xmath1531 , @xmath1532 is the minimal extension in @xmath65 of @xmath1533 , @xmath1534 , and @xmath1535 .    for notational convenience ,",
    "if @xmath324 has been defined on @xmath119 , then we let @xmath1536 be the least @xmath490 such that @xmath1537 for all @xmath1538 .",
    "also , if @xmath349 has been defined on @xmath1539 , then we let @xmath1540 be the least @xmath490 such that @xmath1541 for all @xmath1542 .",
    "let @xmath61 be a well - ordering of the levels of @xmath19 .",
    "we use recursion on @xmath115 to define the restrictions to @xmath1543 of @xmath348 , @xmath349 and @xmath324 so that the following properties hold :    1 .",
    "extension and lexicographic order : 1 .",
    "the restriction of @xmath348 to @xmath1544 is extension and @xmath25-order preserving ; 2 .   for all @xmath1545",
    ", @xmath1546 is the minimal extension in @xmath309 of @xmath1547 ; 3 .   for all @xmath1545",
    ", @xmath1548 is an extension in @xmath309 of @xmath1549 ; 4 .   for all @xmath1550",
    ", @xmath1551 is an extension of @xmath1552 and @xmath1553 is an extension of @xmath1554 ; 2 .",
    "length order : 1 .   for all",
    "@xmath1555 and @xmath1556 , if @xmath62 , then @xmath1557 and @xmath1558 ; 3 .",
    "passing number : 1 .   for all @xmath1555 and @xmath1556 , if @xmath62 and @xmath97 , then @xmath1559 and @xmath1560 ; 2 .   for all @xmath1555 and @xmath1556 , if @xmath62 and @xmath97 , then @xmath1561 and @xmath1562 ; 3",
    ".   for all",
    "@xmath1555 and @xmath1550 , @xmath1563 ; 4 .",
    "for all @xmath1564 , if @xmath62 , then @xmath1565 .",
    "suppose @xmath115 is arbitrary and for all @xmath125 , the restrictions to @xmath155 of @xmath348 , @xmath349 and @xmath324 have been defined . to maintain length order",
    ", we first define @xmath348 and @xmath349 by recursion on @xmath61 restricted to level @xmath1543 .",
    "so suppose @xmath1566 and for all @xmath62 , @xmath348 and @xmath1546 have been defined .",
    "use extension and @xmath25-order properties to identify an element @xmath1567 of which @xmath1568 is to be an extension .",
    "if @xmath1569 , set @xmath1570 .",
    "if @xmath106 is a limit ordinal , let @xmath1571 be @xmath1572 .",
    "if @xmath106 is a successor ordinal and @xmath1573 , let @xmath1574 .",
    "next determine an ordinal @xmath1575 sufficiently large that if @xmath1568 is at least that length , it will satisfy the length order property .",
    "if @xmath24 is the @xmath61-least element of length @xmath106 , let @xmath1576 .",
    "if @xmath24 has a @xmath61-immediate predecessor @xmath1465 of length @xmath106 , let @xmath1577 .",
    "if @xmath24 is a @xmath61-limit of elements of length @xmath106 , then let @xmath1575 be the supremeum of @xmath1578 for @xmath23 of length @xmath106 with @xmath62 .",
    "next define an extension @xmath1579 of @xmath1571 of length @xmath1575 so that the passing number properties are satisfied by @xmath1579 . if @xmath1569 , then @xmath1580 , @xmath1570 , @xmath1581 and @xmath1582 . if @xmath595 is a limit ordinal , then by induction on @xmath125",
    ", @xmath1583 is an increasing sequence .",
    "moreover , the limit of this sequence is the length of @xmath1571 .",
    "it follows that @xmath1571 satisfies the passing number properties for @xmath1584 .",
    "let @xmath1579 be the sequence extending @xmath1571 by zeros , as needed , to a length of @xmath1575 .",
    "if @xmath106 is a successor ordinal and @xmath1585 , then let @xmath1579 be the extension of @xmath1571 of length @xmath1575 such that for all @xmath50 with @xmath1586 , @xmath1587 if @xmath1588 for some @xmath23 with @xmath1589 , and @xmath1590 otherwise .",
    "next let @xmath1568 be an extension in @xmath309 of @xmath1591 and let @xmath1532 be an extension in @xmath309 of @xmath1592 as required by the extension and lexicographic order properties .",
    "the careful reader may now check that the various properties hold for the restrictions of @xmath348 and @xmath349 to @xmath1543 .    use a similar process to define the restriction of @xmath324 to @xmath1543 by recursion on @xmath61 restricted to @xmath1543 .",
    "suppose that @xmath1566 and for all @xmath62 , @xmath1548 has been defined .",
    "let @xmath1593 .",
    "if @xmath24 is the @xmath61-least element of length @xmath106 , let @xmath1594 .",
    "if @xmath24 has a @xmath61-immediate predecessor @xmath1465 of length @xmath106 , let @xmath1595 .",
    "if @xmath24 is a @xmath61-limit of elements of length @xmath106 , then let @xmath1596 be the supremum of @xmath1597 for @xmath23 of length @xmath106 with @xmath62 .",
    "next define an extension @xmath1591 of @xmath1598 of length @xmath1596 so that the passing number properties are satisfied by @xmath1591 . if @xmath1569 , there are no passing number properties that need be checked , and we set @xmath1599 .",
    "if @xmath595 , then let @xmath1591 be the extension by zeros of @xmath1598 of length @xmath1596 .",
    "since @xmath1568 and @xmath1532 satisfy the passing numbers properties , it follows that @xmath1591 does as well , since all passing numbers longer than @xmath1600 will be zero .",
    "finally let @xmath1601 be an extension in @xmath309 of @xmath1591 .",
    "the careful reader may now check that the various properties hold for the restriction of @xmath324 to @xmath1543 .",
    "this completes the recursive construction of @xmath348 , @xmath349 and @xmath324 . by induction ,",
    "the various properties hold for all @xmath115 .",
    "thus @xmath1602 is extension and @xmath25-order preserving , and by the length order property , different elements of the union of the ranges of @xmath348 , @xmath349 and @xmath324 have different lengths .",
    "it also follows that these three maps are injective .",
    "moreover the union of their ranges is a subset of @xmath309 . by the extension and lexicographic order properties and the length order property",
    ", @xmath324 has level harmony .    by the passing number properties ,",
    "@xmath324 is a pnp map . by the extension and lexicographic order properties ,",
    "@xmath324 preserves @xmath311-order .    by the extension and lexicographic order properties",
    ", @xmath324 carries incomparable elements into incomparable elements and preserves @xmath25-order . by the length order property ,",
    "@xmath324 preserves meet length order . since @xmath1531 preserves extension , @xmath324 satisfies meet regularity .",
    "thus @xmath324 is polite .    from the extension and lexicographic order properties",
    ", it follows that the meet closure of @xmath1603 is the union of the ranges of @xmath324 , @xmath348 and @xmath349 and all elements of the range of @xmath324 are incomparable .",
    "hence @xmath92 is an antichain and @xmath313 is transverse , so @xmath92 is diagonal .",
    "note that passing numbers of @xmath518 were introduced only to keep @xmath348 extension and @xmath25-order preserving , to ensure @xmath1604 so that @xmath311-order is preserved , and to ensure @xmath324 is a pnp map .",
    "it follows that @xmath284 is strongly diagonal .    therefore , @xmath324 is the required pnp diagonalization into @xmath309 with level harmony .",
    "[ lem.poly.diag ] suppose @xmath87 is cofinal and transverse",
    ". then there are a diagonal set @xmath92 , maps @xmath1605 and a pre-@xmath65-vip order @xmath61 such that for all @xmath429 , the following conditions hold :    1 .",
    "@xmath1606 is a pnp diagonalization with level harmony into @xmath430 ; 2 .",
    "the meet closure of the set @xmath1607 is a subset of @xmath65 disjoint from @xmath1608 for all @xmath62 ; and 3 .",
    "@xmath61 is a @xmath1609-vip order .",
    "use lemma [ lem.exist.vip ] to find @xmath1610 , a pre-@xmath65-vip order on @xmath19 . by lemma [ lem.cofinal.dense ]",
    ", @xmath65 is dense .",
    "apply the second diagonalization lemma [ lem.2.diag.map ] to each @xmath429 to obtain @xmath1611 , a pnp diagonalization into @xmath430 which has level harmony .",
    "use recursion on @xmath61 to define @xmath816 , @xmath1612 and @xmath1613 such that for all @xmath429 , @xmath1607 , @xmath817 is an extension of @xmath24 with @xmath818 disjoint from the union over all @xmath62 of @xmath1608 .",
    "since the order type of @xmath820 is less than @xmath1 and each @xmath1614 is a strongly diagonal set whose meet closure is a of @xmath65 , it is always possible to continue the recursion .",
    "use induction on the recursive construction to show that the meet closures of the sets @xmath1609 are disjoint .",
    "let @xmath1615 .",
    "then @xmath92 is transverse since it is a subset of @xmath65 and @xmath65 is transverse",
    ". let @xmath61 agree with @xmath1610 on all pairs from different levels , and use recursion on @xmath115 to define @xmath61 from @xmath1610 as follows .",
    "if there is no element of @xmath92 in @xmath693 then @xmath61 and @xmath1610 agree on @xmath693 .",
    "so suppose @xmath1616 and @xmath1617 . for each @xmath125",
    ", let @xmath1618 be the set of all @xmath1619 such that @xmath1620 and @xmath1621 . since @xmath1610 is a pre-@xmath65-vip order , if @xmath1622 , then @xmath1623 in the sense that for every element @xmath224 of @xmath1618 and @xmath226 of @xmath1624 , one has @xmath1625 .",
    "use the fact that @xmath1609 is a diagonal set to partition @xmath1626 into disjoint pieces where for @xmath455 , @xmath1627 .",
    "let the restriction of @xmath61 to @xmath693 be such that for each @xmath125 , @xmath1628 and otherwise @xmath61 agrees with @xmath1610 .",
    "then the restriction of @xmath61 to @xmath693 is a well - order , since the restriction of @xmath1610 is and because @xmath1610 is a pre-@xmath65-vip order .",
    "since the restriction of @xmath61 to each level is a well - order , it follows that @xmath61 is a well - ordering of the levels of @xmath19 . for each @xmath429",
    ", since @xmath1610 is a pre-@xmath65-vip order , it follows that @xmath61 is a pre-@xmath1629-vip order , so by construction , @xmath61 is a @xmath1609-vip order .",
    "[ thm.upper.bound.2 ] let @xmath405 and suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath68 . then for @xmath85 equal to the number of vip @xmath5-types , any @xmath1-rado graph @xmath1351 satisfies @xmath1630    let @xmath1631 be the tree embedding and set @xmath1632",
    ". then by lemma [ lem.sigma.cofinal ] , @xmath65 is cofinal and transverse .",
    "apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "fix a coloring @xmath1633^m\\to\\mu$ ] where @xmath408 .",
    "define @xmath407^m\\to\\mu$ ] by @xmath1634)$ ] .",
    "apply shelah s theorem [ thm.shl ] to the restriction of @xmath262 to @xmath5-element antichains to obtain a strong embedding @xmath149 and a node @xmath258 such that @xmath149 preserves @xmath61 on @xmath259 and @xmath266)=d(e[b])$ ] for all @xmath61-similar @xmath5-element antichains @xmath202 and @xmath191 of @xmath259 .",
    "now @xmath1635 is a strongly diagonal set and @xmath61 is @xmath1636-vip .",
    "let @xmath1637 $ ] .",
    "since @xmath1638 $ ] is a subset of @xmath1636 , @xmath1638 $ ] is a strongly diagonal set since @xmath1636 is .",
    "also , @xmath61 is @xmath1638$]-vip level order on the downwards closure under initial segments of @xmath1638 $ ] , since @xmath61 is a @xmath1636-vip level order . since @xmath149 is a strong embedding , @xmath92 is a strongly diagonal set .",
    "since @xmath149 preserves @xmath61 on @xmath259 and @xmath1638\\subseteq d_w\\subseteq{\\operatorname{cone}}(w)$ ] , it follows that the restriction of @xmath61 to the downward closure of @xmath92 is a @xmath92-vip order .",
    "hence for all @xmath1639^m$ ] , the ordered similarity type @xmath242 is a vip @xmath5-type .",
    "finally let @xmath1640= \\sigma^{-1}\\circ \\varphi_0\\circ e\\circ\\varphi_w\\circ \\sigma[\\kappa]$ ] .",
    "note that @xmath1641 $ ] , so for all @xmath5-element subsets @xmath609 of @xmath847 , the image , @xmath1642[u]\\subseteq d$ ] , is a strongly diagonal set , and @xmath242 is a vip @xmath5-type .",
    "since @xmath348 , @xmath149 and @xmath815 are all pnp maps , so is their composition . by the first translation theorem [ thm.1.translate ] ,",
    "this mapping is an isomorphism of @xmath1352 into itself .",
    "we claim that @xmath44 is constant on @xmath5-element subsets of @xmath847 whose images under @xmath1643 are @xmath61-similar .",
    "consider two such @xmath5-element subsets @xmath1644 of @xmath847 .",
    "let @xmath1645 and @xmath1646 be the subsets of @xmath1 for which @xmath1647=u$ ] and @xmath1648=v$ ] .",
    "let @xmath1649 $ ] and @xmath1650 $ ]",
    ". then @xmath202 and @xmath191 are @xmath5-element strongly diagonal subsets of @xmath259 .",
    "notice that @xmath1651]$ ] and @xmath1652]$ ] .",
    "thus @xmath1653 $ ] and @xmath1654 $ ] are @xmath61-similar .",
    "since @xmath149 is a strong embedding which preserves @xmath61 on @xmath259 , it follows that @xmath202 and @xmath191 are @xmath61-similar . by the application of shelah s theorem above , @xmath266)=d(e[b])$ ] . from the definition of @xmath262 it follows that @xmath1655]=d(e[a])$ ] and @xmath1656]=d(e[b])$ ] .",
    "consequently , @xmath1657 .",
    "since the image under @xmath1658 of any @xmath5-element subset of @xmath847 is similar to a vip @xmath5-type and any two @xmath61-similar subsets receive the same color from @xmath44 , the @xmath5-element subsets of @xmath847 are colored with at most @xmath3 colors , so the theorem follows .",
    "the computation of lower bounds for rado graphs is a bit more complicated than the computation for @xmath1-dense linear orders .",
    "we reduce the problem by showing for suitable @xmath1 that if @xmath277 is the range of a pnp diagonalization with level harmony and @xmath61 is a @xmath92-vip level order , then every vip @xmath5-type is realized as @xmath242 for some @xmath294 .",
    "this theorem is the companion to theorem [ thm : qk ] .",
    "its proof uses a pnp diagonalization with level harmony in place of a semi - strong embedding .",
    "[ thm : gk ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "further suppose @xmath1523 is a pnp diagonalization with level harmony , @xmath1659 $ ] , and @xmath61 is a @xmath92-vip order of the levels of @xmath19 . then every vip @xmath5-type @xmath293 is realized as @xmath242 for some @xmath294 .",
    "apply shelah s theorem [ thm.shl ] to @xmath262 and @xmath676 to obtain a strong embedding @xmath255 and an element @xmath258 so that for triples from @xmath761 $ ] , the coloring depends only on the @xmath676-ordered similarity type of the triple .",
    "thus for @xmath108 , the orderings @xmath1670 must always agree with one of @xmath676 and its converse on @xmath95 on pairs @xmath1671 with @xmath1672 local and @xmath1673 .",
    "similarly , they must always agree with one of @xmath676 and its converse on @xmath95 on pairs @xmath1671 with @xmath1672 local and @xmath1674 . since @xmath61 is a well - order , all of the orderings @xmath1670 are also well - orders .",
    "thus they always agree with @xmath676 .",
    "let @xmath293 be an arbitrary vip @xmath5-type .",
    "let @xmath35 be the set of leaves of @xmath292 .",
    "then @xmath292 is a subtree of @xmath1675 and every level of @xmath1675 has exactly one element of @xmath768 .",
    "extend @xmath291 defined on @xmath292 to @xmath769 defined on all of @xmath767 in such a way that the extension is still a @xmath768-vip order .        finally define @xmath1680 by recursion on @xmath1678 . for @xmath781 ,",
    "let @xmath1681 . for @xmath783 , consider three cases for elements of @xmath784 .",
    "if @xmath779 , let @xmath1682 . if @xmath777 , let @xmath1683 .",
    "note that in both these cases , @xmath1684 .",
    "if @xmath788 has length @xmath789 , then there is a unique immediate successor in @xmath292 , @xmath1685 . in this case , let @xmath1686 .",
    "since @xmath679 sends @xmath769-increasing pairs to @xmath676-increasing pairs and @xmath149 is a @xmath676-order preserving strong embedding , their composition sends sends @xmath769-increasing pairs to @xmath676-increasing pairs . since for @xmath791 , the order @xmath676 agrees with @xmath792 on @xmath793 where @xmath794 , it follows that @xmath1687 sends @xmath769-increasing pairs to @xmath61-increasing pairs .",
    "since @xmath1526 preserves extension and lexicographic order and @xmath1527 , @xmath1687 preserves extension and lexicographic order . by",
    "construction @xmath1687 sends levels to levels , meets to meets and leaves to leaves .",
    "let @xmath1688 $ ] be the image under @xmath1687 of the leaves of @xmath292 . by construction , @xmath1689 .",
    "also @xmath1690 , as required .",
    "we would like to define a coloring of the @xmath5-tuples of @xmath1 using @xmath3 colors such that for any @xmath1374 with @xmath1379 isomorphic to our rado graph @xmath1352 , every color is the color of some @xmath5-tuple from @xmath1400 .    by lemma [ lem.rado.increasing ] ,",
    "there is an @xmath870-increasing map @xmath1380 such that the graph @xmath1691,e{{\\upharpoonright}}h[\\kappa])$ ] is isomorphic to @xmath1352 . by lemma [ lem.rado.iso.1 ] , @xmath1692 is a pnp map . by the previous theorem ,",
    "every vip @xmath5-type can be realized in the range of a pnp diagonalization with level harmony . by the translation theorem ,",
    "a pnp map gives rise to an induced subgraph of the rado graph which is isomorphic to the whole graph .",
    "our plan is to define a coloring @xmath44 using @xmath3 as follows .",
    "apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "in particular , @xmath348 is a pnp diagonalization into @xmath65 with level harmony , @xmath1693 $ ] is a strongly diagonal set and @xmath61 is a @xmath92-vip order . enumerate the vip @xmath5-types as @xmath1694 ; define @xmath262 on @xmath5-element subsets of @xmath1695 by @xmath1696 if @xmath1697),\\prec_{{\\operatorname{clp}}(\\varphi_0[x])})= ( \\tau_j,{\\lessdot}_j)$ ] ; and set @xmath1698)$ ] .",
    "then for every isomorphic copy @xmath1400 of the rado graph , the associated pnp map @xmath1699 described above has the property that different colors of @xmath5-element subsets of @xmath847 are distinguished by the ordered similarity types of elements of the range of @xmath1699 .",
    "thus it is enough to show there is a pnp diagonalization @xmath248 with level harmony whose range is a subset of @xmath1699 , and use theorem [ thm : gk ] with @xmath248 to show that all the colors appear in every isomorphic copy .    we show that for any pnp map @xmath308 with range a strongly diagonal set there is a pnp diagonalization @xmath248 with level harmony with @xmath1700 in theorem [ thm.thin.inside ] below .",
    "we work by successive approximation , using the next lemma .",
    "[ lem.curly.d ] let @xmath1701 be the collection of pnp maps whose domain is @xmath1695 and whose range is a strongly diagonal subset of @xmath1695 .",
    "then @xmath1701 is closed under composition as are the following subfamilies :    1 .",
    "maps in @xmath1701 with meet regularity ; 2 .",
    "maps in @xmath1701 with meet regularity that preserve lexicographic order of incomparable pairs ; 3 .   maps in @xmath1701 that are polite on strongly diagonal sets ; 4 .",
    "maps in @xmath1701 that are polite .",
    "apply lemma [ lem.preserve.polite ] and use the definitions of terms to see that the various families are closed under composition .",
    "since strong embeddings preserve all the properties in question , and carry strongly diagonal sets to strongly diagonal sets , their composition with any function in one of the various families is also in that family .",
    "[ lem.harmony ] suppose @xmath1703 and @xmath65 is cofinal and transverse .",
    "further suppose @xmath248 is polite to strongly diagonal sets and has range a strongly diagonal set @xmath92 with @xmath1704 and @xmath308 is a pnp diagonalization which has level harmony .",
    "then @xmath1705 is a pnp diagonalization into @xmath309 which has level harmony .",
    "first notice that @xmath248 and @xmath308 are in @xmath1701 , so by lemma [ lem.curly.d ] , their composition is a polite pnp map whose range is a strongly diagonal set .",
    "since @xmath311 agrees with the lexicographic order on incomparable pairs , @xmath308 preserves @xmath311 and sends all pairs to incomparable pairs , the composition @xmath1705 preserves @xmath311 . since @xmath308 is injective with range a strongly diagonal set and @xmath248 is a pnp map , the composition is injective .",
    "thus , since the range of @xmath1705 is a subset of the range of @xmath248 , the composition , @xmath1705 , is a pnp diagonalization into @xmath309 .",
    "suppose @xmath26 .",
    "since @xmath308 has level harmony , @xmath1719 , @xmath1711 and @xmath1720 . hence @xmath1721",
    "thus @xmath1722 and @xmath1723 .",
    "since @xmath248 preserves meet length order , it follows that @xmath1724 and @xmath1725 .",
    "suppose @xmath512 .",
    "then @xmath1737 , since @xmath308 has level harmony .",
    "since @xmath248 satisfies preservation of meet length order , @xmath1738 . by claim [ claim.hat.self ] , @xmath1728 , so @xmath1734 . thus",
    "to show @xmath1739 , it is enough to show @xmath1740 .",
    "so suppose @xmath1743 and @xmath1744 . since @xmath308 has level harmony , @xmath1711 and @xmath1745 .",
    "by claim [ claim.hat.self ] , @xmath1746 where @xmath1747 .",
    "for notational convenience , let @xmath1748 .",
    "for the first subcase , suppose @xmath1749 . then @xmath1750 , so @xmath1751 .",
    "since the range of @xmath308 is strongly diagonal and @xmath248 is polite , it follows that @xmath1752 , so @xmath1753 . for the second subcase , in which @xmath1754 , interchange the roles of @xmath1755 and @xmath1756 .",
    "the parallel argument concludes with the inclusion @xmath1757 .",
    "[ lem.meet.reg ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "further suppose @xmath1774 is a pnp map whose range is a strongly diagonal set .",
    "then there is a pnp map @xmath248 which satisfies meet regularity and whose range is a subset of the range of @xmath308 .",
    "apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "say a three element subset @xmath1775 listed in increasing lexicographic order _",
    "witnesses meet regularity for @xmath308 _ if it is diagonal and either ( @xmath1776 and @xmath1777 ) or ( @xmath1778 and @xmath1779 ) .",
    "say a three element subset @xmath1775 listed in increasing lexicographic order _ refutes meet regularity for @xmath308 _ if it is diagonal , @xmath1776 implies @xmath1780 and @xmath1778 implies @xmath1781 .",
    "define a coloring @xmath302 on three element subsets of @xmath1695 by @xmath1782 if @xmath224 is strongly diagonal and witnesses meet regularity for @xmath308 , @xmath1783 if @xmath224 is strongly diagonal and refutes meet regularity for @xmath308 and @xmath1784 otherwise .",
    "apply shelah s theorem [ thm.shl ] to @xmath302 and @xmath61 to obtain a strong embedding @xmath149 and @xmath1785 such that @xmath149 preserves @xmath61 on @xmath259 and for all three element subsets @xmath224 of @xmath1786 $ ] , the value of @xmath1787 depends only on the @xmath61-ordered similarity type of @xmath224 .",
    "since @xmath1790 is a pnp map which witnesses meet regularity and whose range is a strongly diagonal set , it is enough to show that every strongly diagonal subset @xmath1791 witnesses meet regularity for @xmath308 .",
    "let @xmath1796 be a cardinal larger than @xmath1797 .",
    "for @xmath1798 , let @xmath1799 be the sequence of length @xmath1800 if @xmath1801 and of length @xmath1802 if @xmath1803 for some limit ordinal @xmath1804 and @xmath677 such that @xmath1805 note that the length of @xmath1799 is always odd and at least @xmath605 , and that for odd @xmath1806 , @xmath1807 .",
    "for @xmath125 , by construction , @xmath1808 . using the above calculations , the careful reader may check that for @xmath125 , one has @xmath1809 .",
    "notice that @xmath1810 . for @xmath1811 ,",
    "let @xmath1812 , set @xmath1813 and let @xmath1814 .      since each @xmath1817 is a strongly diagonal set , it either witnesses or refutes meet regularity for @xmath308 . since each @xmath1817 is a subset of @xmath95 , either they all witness or all refute meet regularity for @xmath308 .",
    "since @xmath1790 satisfies meet regularity , @xmath1818 .",
    "suppose each @xmath1817 refutes meet regularity .",
    "then @xmath1819 for @xmath1820 .",
    "since @xmath1796 is a cardinal larger than @xmath1821 , by the pigeonhole principle , there are @xmath1822 with @xmath1823 .",
    "this contradiction shows that each @xmath1817 witnesses meet regularity , so by choice of @xmath302 , @xmath149 and @xmath258 , the claim follows .",
    "notice that since that since @xmath1824 and @xmath292 has an elements of the meet closure of the leaves of lengths @xmath1794 , we must have @xmath1825 . as in the previous case ,",
    "there is only one vip level order on @xmath292 .",
    "let @xmath1826 and let @xmath1827 .",
    "we proceed much as in the previous case , except we start by constructing @xmath1828 and @xmath1829 such that for all @xmath125 , @xmath1830 .",
    "then we set @xmath1831 , @xmath1832 , and @xmath1833 . in the previous case we had only @xmath1834 ,",
    "so in this case we will use the pigeonhole principle to select a collection of @xmath106 s for which the behavior of @xmath308 on @xmath357 is sufficiently uniform to reduce this case to one like the previous one .    for @xmath1803 , where @xmath1835 or @xmath180 limit ,",
    "let @xmath1799 be the sequence of length @xmath1836 such that @xmath1837 note that the length of @xmath1799 is always even and its cantor normal form has an even finite part that is at least @xmath63 .",
    "also , for positive even @xmath50 , @xmath1838 . for @xmath125 , by construction , @xmath1808 . for @xmath1839 , let @xmath1840 be the sequence of length @xmath1841 such that @xmath1842 , @xmath1843 , @xmath1844 , and for all @xmath50 with @xmath1845 , @xmath1846 .",
    "then for all @xmath1847 , @xmath1848 . using these definitions and calculations , the careful reader may check that for @xmath125 , one has @xmath1849 .",
    "since each @xmath1817 is a strongly diagonal set , it either witnesses or refutes meet regularity for @xmath308 .",
    "since each @xmath1817 is a subset of @xmath95 , either they all witness or all refute meet regularity for @xmath308 .",
    "suppose each @xmath1817 refutes meet regularity .",
    "then @xmath1856 for @xmath1820 .    in particular , for all @xmath125 from @xmath42 , one has @xmath1857 now we have a contradiction that @xmath1858 is a set of @xmath1796 distinct initial segments of @xmath884 and @xmath1859 .",
    "this contradiction shows that each @xmath1817 witnesses meet regularity , so by choice of @xmath302 , @xmath149 and @xmath258 , the claim follows .",
    "notice that since that since @xmath1860 and @xmath292 has an elements of the meet closure of the leaves of lengths @xmath1794 , we must have @xmath1861 . as in the previous case ,",
    "there is only one vip level order on @xmath292 .",
    "let @xmath1826 and let @xmath1827 .",
    "we proceed much as in the previous case , except we start by constructing @xmath1483 and @xmath1862 such that for all @xmath125 , @xmath1863 .",
    "then we set @xmath1864 , @xmath1812 , and @xmath1865 .    for @xmath1866 , where @xmath1835 or @xmath180 limit ,",
    "let @xmath1867 be the sequence of length @xmath1868 such that for @xmath1869 where @xmath1870 or @xmath1382 limit , @xmath1871 and @xmath1872 , @xmath1873 note that the length of @xmath1867 is always even and its cantor normal form has an even finite part that is at least @xmath63 . for @xmath125 , by construction , @xmath1808 , and @xmath1874 .",
    "for @xmath1811 , let @xmath1875 be the sequence of length @xmath1876 such that @xmath1877 , @xmath1878 , @xmath1879 , and for all @xmath50 with @xmath1880 , @xmath1881 .",
    "then for all @xmath1882 , @xmath1848 . using these definitions and calculations , the careful reader may check that for @xmath125 , one has @xmath1883 .",
    "since @xmath65 is cofinal and transverse , its intersection with @xmath1884 is cofinal above @xmath957 and transverse .",
    "thus by lemma [ lem.cofinal.dense ] , @xmath298 is @xmath1-dense .",
    "then @xmath1885 is an almost perfect tree by lemma [ lem.nearly.perfect ] .",
    "[ claim.x.from.u ] if @xmath1886 and @xmath1887 are incomparable elements of @xmath1888 such that @xmath1889 a densely splitting point of @xmath309 and @xmath1890 if and only if @xmath1891 , then there are @xmath1892 and @xmath1893 with @xmath1894 such that @xmath1895 has the same ordered similarity type as @xmath293 .",
    "let @xmath1898 be the set of all limit ordinals @xmath595 such that every @xmath1899 has proper extensions in both @xmath631 and @xmath632 by lemma[lem.nearly.perfect ] , @xmath1898 is closed and unbounded in @xmath1 .",
    "define @xmath1902 by recursion as follows and prove by induction that for all @xmath1903 , @xmath1904 is a densely splitting point of @xmath1905 .",
    "to start the recursion , let @xmath1906 . if @xmath1904 has been defined and @xmath455 , let @xmath1907 be an extension of @xmath1908 of length less than @xmath67 which is a densely splitting node of @xmath309 and let @xmath1909 be an extension of @xmath1910 of length less than @xmath67 which is a densely splitting node of @xmath309 .",
    "if @xmath1911 is a limit ordinal and @xmath1912 has been defined for all @xmath1913 , let @xmath1904 be an extension of @xmath1914 of length less than @xmath67 which is a densely splitting node of @xmath309 . if @xmath1912 has been defined for all @xmath1915 , let @xmath1904 be @xmath1916 . since @xmath1888 is an almost perfect tree and for each @xmath23 of limit length @xmath180 , the node @xmath1914 is an even - handed limit of densely splitting points , the recursion is well - defined .",
    "let @xmath1920 and let @xmath1921 be an injection with @xmath1922 for all @xmath1467 .",
    "such an injection exists since @xmath1888 is almost perfect .",
    "define @xmath1610 on @xmath42 by @xmath1923 if and only if @xmath1924 .",
    "notice that @xmath1610 is a well - order , since @xmath61 is a well order .",
    "since @xmath118 preserves lexicographic order , we can find @xmath1925 such that both @xmath1926 and @xmath1927 have cardinality @xmath627 .",
    "thus there are @xmath1928 and @xmath1834 with @xmath1929 and @xmath1930 , @xmath1931 .",
    "that is there are pairs from @xmath42 where the lexicographic order and the @xmath1610-order agree and where they disagree .",
    "use the fact that @xmath1888 is almost perfect to find be an element @xmath191 of @xmath65 extending @xmath1937 of length greater than @xmath1920 and to find an element @xmath1646 of @xmath65 extending @xmath1938 of length greater than @xmath1939 .",
    "then @xmath1895 has the same ordered similarity type as @xmath293 .",
    "define by recursion sequences @xmath1946 for @xmath455 , @xmath1829 @xmath1828 and @xmath1947 as follows . to start the recursion ,",
    "let @xmath1948 and @xmath1949 .",
    "if @xmath1950 and @xmath1951 have been defined with @xmath1952 and @xmath1953 , then apply claim [ claim.x.from.u ] to @xmath1950 and @xmath1951 to obtain @xmath1954 and @xmath1955 such that @xmath1956 has the same ordered similarity type as @xmath293 and the following inequalities hold : @xmath1957 note that @xmath1958 .      by construction ,",
    "the sequence @xmath1964 is increasing in length .",
    "fix attention on a specific pair @xmath1820 . since @xmath1965",
    ", it follows from the definition of @xmath1951 that @xmath1966 .",
    "thus @xmath1967 and @xmath1968 have the same @xmath61-ordered similarity type , namely @xmath293 .",
    "furthermore , @xmath1969 and @xmath1970 .    for @xmath1798 ,",
    "let @xmath1971 and let @xmath1972 .",
    "for @xmath1820 , let @xmath1973 .",
    "since @xmath149 preserves meets , it follows that @xmath1974 and @xmath1975 .",
    "since @xmath149 is a strong embedding which preserves @xmath61 on @xmath259 , and @xmath1976 , it follows that @xmath1977 and @xmath1968 have the same @xmath61-ordered similarity type , namely @xmath293 .      by claims [ claim.x.short ] , [ claim.x.med ] , [ claim.x.long ] and [ claim.x.special ]",
    ", we have shown that @xmath293 witnesses meet regularity for @xmath308 . since @xmath293 was an arbitrary vip @xmath5-type , every",
    "such type witness meet regularity for @xmath308 .",
    "thus @xmath1978 is a pnp map with meet regularity whose range is a subset of the range of @xmath308 .",
    "[ lem.lex.preserve ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "further suppose @xmath1774 is a pnp map which satisfies meet regularity and whose range is a strongly diagonal set .",
    "then there is a pnp map @xmath248 which satisfies meet regularity and preserves lexicographic order and whose range is a subset of the range of @xmath308 .",
    "apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "let @xmath1979 be the @xmath63-type whose leaves are @xmath1980 and @xmath1981 .",
    "let @xmath1979 be the @xmath63-type whose leaves are @xmath1982 and @xmath1983 .",
    "let @xmath1984 be the @xmath63-type whose leaves are @xmath1980 and @xmath1985 .",
    "let @xmath1986 be the @xmath63-type whose leaves are @xmath1982 and @xmath1987 .",
    "then for all @xmath1988 ^ 2 $ ] , the set @xmath225 is one of @xmath1979 , @xmath1989 , @xmath1984 and @xmath1986 .",
    "apply shelah s theorem [ thm.shl ] to @xmath1990 and @xmath61 to obtain a strong embedding @xmath149 and @xmath1785 such that @xmath149 preserves @xmath61 on @xmath259 and for all pairs @xmath224 of @xmath1786 $ ] , the value of @xmath1993 depends only on the @xmath61-ordered similarity type of @xmath224 .",
    "let @xmath1788 .",
    "then @xmath1349 is a pnp diagonalization into @xmath309 .",
    "we claim that @xmath1994 is a pnp map which satisfies meet regularity and preserves lexicographic order .",
    "clearly the range of @xmath248 is a subset of the range of @xmath308 .",
    "since @xmath308 is a pnp map , for any pair @xmath224 from @xmath699 $ ] with @xmath1996 or @xmath1997 , we must have @xmath1998 or @xmath1999 . similarly , for any pair @xmath224 from @xmath2000 $ ] with @xmath1997 or @xmath2001 , we must have @xmath1999 or @xmath2002 .          now @xmath2009 and @xmath2010 .",
    "let @xmath2011 , @xmath2012 and @xmath2013 . set @xmath2014 and @xmath2015 . since @xmath1790 is a polite pnp map , by lemma [ lem.diag.to.diag ] , we have @xmath1997 and @xmath2016 .    since @xmath1995 satisfies meet regularity , @xmath2017 .",
    "that is , @xmath1755 and @xmath2018 are on the same side of @xmath2019 .",
    "let @xmath2020 .",
    "then @xmath2021 . if @xmath2022 then @xmath1992)=\\tau_1 $ ] and @xmath2023)=\\tau_0 $ ] , so @xmath308 sends @xmath518 to @xmath518 and @xmath251 to @xmath251 .",
    "otherwise @xmath2024 . in this case",
    "@xmath1992)=\\tau_0 $ ] and @xmath2023)=\\tau_1 $ ] , so @xmath308 sends @xmath518 to @xmath251 and @xmath251 to @xmath518 .        notice that @xmath1790 sends pairs from @xmath1695 to incomparable pairs from @xmath259 .",
    "for incomparable pairs , @xmath1790 preserves the similarity type by lemma [ lem.diag.to.diag ] .",
    "hence by the above claims , for any incomparable pair @xmath229 from @xmath1695 with @xmath2028 , we have @xmath2029)=\\tau_i$ ] .",
    "therefore @xmath248 is a pnp map which satisfies meet regularity and preserves lexicographic order and has range a subset of the range of @xmath308 .",
    "[ thm.thin.inside ] suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "if @xmath1774 is a pnp map whose range is a strongly diagonal set whose meet closure is a subset of @xmath1401 $ ] , then there is a pnp diagonalization @xmath2030 into @xmath65 with level harmony .",
    "apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "apply lemma [ lem.meet.reg ] to @xmath308 to obtain a pnp map @xmath2031 which satisfies meet regularity and whose range is strongly diagonal subset of the range of @xmath308 .",
    "apply lemma [ lem.lex.preserve ] to @xmath2031 to obtain a pnp map @xmath118 which satisfies meet regularity and preserves lexicographic order and whose range is a strongly diagonal subset of @xmath2032 .",
    "define a coloring @xmath2033 on three element antichains @xmath2034 listed in increasing order of length as follows :",
    "@xmath2035 if @xmath2036 and @xmath2037 ; @xmath2038 if @xmath2036 and @xmath2039 ; and @xmath2040 otherwise .",
    "apply shelah s theorem [ thm.shl ] to @xmath2033 and @xmath61 to obtain a strong embedding @xmath149 and @xmath1785 such that @xmath149 preserves @xmath61 on @xmath259 and for all pairs @xmath224 of @xmath1786 $ ] , the value of @xmath2041 depends only on the @xmath61-ordered similarity type of @xmath224 .",
    "let @xmath1788 .",
    "then @xmath1349 is a pnp diagonalization into @xmath309 with level harmony .",
    "we claim that @xmath2042 is a pnp map which satisfies meet regularity and preserves lexicographic order .",
    "clearly the range of @xmath2043 is a subset of the range of @xmath308 .    since @xmath1790 is a pnp map which witnesses meet regularity and preserves lexicographic order , and whose range is a strongly diagonal set , by lemma [ lem.lex.preserve ] , the function @xmath2043 satisfies meet regularity and preserves lexicographic order .",
    "assume toward a contradiction that @xmath2044 $ ] is a strongly diagonal set listed in increasing order of length with @xmath2036 and @xmath2046 .",
    "then @xmath2038 . let @xmath2047 and list the elements of @xmath202 in increasing order of length as @xmath2048 .",
    "then @xmath2049 .",
    "let @xmath1826 and let @xmath1796 be an uncountable cardinal greater than @xmath2050 . using the proof of claim [ claim.x.short ] as a guide , construct a sequence @xmath1828 such that for all @xmath1798 , @xmath2051 and for all @xmath1820 , @xmath1809 and @xmath2052 .",
    "set @xmath2053 for all @xmath1798 . for @xmath1820 ,",
    "let @xmath2054 .",
    "thus for all @xmath1820 , @xmath2055 .",
    "there is only one vip order @xmath291 on @xmath292 . since @xmath1349 is a pnp diagonalization into @xmath309",
    ", @xmath61 is a pre-@xmath65-vip order , and @xmath149 preserves @xmath61 on @xmath259 , it follows that @xmath2056 , since both are vip @xmath605-types and @xmath2055 .",
    "since @xmath2033 takes the same value on all triples from @xmath699 $ ] of the same @xmath61-ordered similarity type , it follows that @xmath2057 for all @xmath1820 .",
    "since the range of @xmath118 is a strongly diagonal set , the inequalities must be strict .",
    "since @xmath1796 is an uncountable cardinal greater than @xmath2050 , by the pigeonhole principle , there are @xmath1913 with @xmath2058 .",
    "thus we have reached the contradiction that @xmath2059 must have length short and greater than or equal to @xmath2060 .",
    "thus the claim follows .",
    "if @xmath1446 , then the claim follows from claim [ claim.low.meet ] .",
    "so assume @xmath1449 .",
    "then one of @xmath224 and @xmath226 is either @xmath609 or @xmath745 , so @xmath2063 .",
    "let @xmath229 be the unique one of @xmath224 and @xmath226 which is not in @xmath2064 .",
    "then @xmath2065 .",
    "by meet regularity , @xmath2066 .",
    "let @xmath2067 . since @xmath2043 preserves lexicographic order , @xmath2068 .",
    "it follows that @xmath2069 .",
    "if @xmath2072 or @xmath2073 , then the claim follows from claim [ claim.low.meet ] .",
    "so assume @xmath2074 . since @xmath1453 is a proper initial segment of @xmath2075 , either @xmath2076 or @xmath2077 .",
    "consequently , either @xmath2078 or @xmath2079 . in the first case , the claim follows from claim [ claim.trio.meet ] applied to @xmath314 and in the second case , it follows from claim [ claim.trio.meet ] applied to @xmath2080 .        if one of @xmath609 and @xmath745 is an initial segment of the other .",
    "since @xmath1790 is a pnp map , @xmath2084 is shorter than both @xmath2085 and @xmath2086 .",
    "if neither is an initial segment of the other , the @xmath2084 is shorter than than both @xmath2085 and @xmath2086 since @xmath1790 preserves meet length order .",
    "thus by claim [ claim.low.meet ] applied to @xmath2087 , @xmath2088 and the claim follows .",
    "let @xmath1427 be arbitrary with @xmath318 .",
    "consider the set @xmath1433 .",
    "it must have at least two elements and at most four .",
    "if it has three or four elements , then @xmath2062 by one of claims [ claim.trio.meet ] , [ claim.pine ] and [ claim.scales ] .",
    "if it has two elements , say @xmath229 and @xmath258 with @xmath2089 , then there are only three possible meets , listed here in increasing order of length : @xmath2090 , @xmath2091 and @xmath2092 . since @xmath2043 is a pnp map , @xmath2093 .",
    "since the range of @xmath2043 is strongly diagonal set , @xmath2094 and @xmath2095 are incomparable , so @xmath2096 is a proper initial segment of both @xmath2094 and @xmath2095 .",
    "thus @xmath2043 preserves meet length order .",
    "since @xmath2043 satisfies meet regularity and preserves both lexicographic order and meet length order , it is polite .",
    "we saw above that @xmath2043 is a pnp map whose range is a subset of the range of @xmath308 . recall that @xmath1349 is a pnp diagonalization with level harmony into @xmath309 .",
    "thus by lemma [ lem.harmony ] , the function @xmath2097 is a pnp diagonalization into @xmath65 with @xmath2098 .",
    "note that for @xmath15 , there are four @xmath5-types and each of them admits a single vip order .",
    "any copy of an uncountable rado @xmath1352 has an induced subgraph which is a countable rado graph . since laflamme",
    ", sauer and vuksanovic @xcite have shown that these four types must appear in translations of every induced subgraph of the countable rado graph which is itself isomorphic to the countable rado graph , it follows from their work that @xmath2099 . for larger values of @xmath5",
    ", we use shelah s theorem .",
    "suppose @xmath1 is an uncountable cardinal with @xmath46 , @xmath83 is a @xmath1-rado graph and @xmath2100 .",
    "does @xmath2101 ?",
    "that is , does the lower bound hold even when @xmath1 does not satisfy the hypothesis of shelah s theorem ?    [ thm.lower.bound.2 ]",
    "let @xmath2102 be a natural number and suppose that @xmath1 is a cardinal which is measurable in the generic extension obtained by adding @xmath67 cohen subsets of @xmath1 , where @xmath697 .",
    "further suppose @xmath83 is a @xmath1-rado graph .",
    "then for @xmath91 equal to the number of vip @xmath5-types , @xmath83 satisfies @xmath2103    apply lemma [ lem.poly.diag ] to obtain a pre-@xmath65-vip order @xmath61 and a sequence @xmath1612 such that for all @xmath429 , the three listed properties of the lemma hold .",
    "enumerate the vip @xmath5-types : @xmath799 , @xmath826 ,  , @xmath800 .",
    "define a coloring @xmath407^m\\to r$ ] by @xmath2104 if @xmath1697),\\prec_{\\varphi_0[x]})=(\\tau_i,{\\lessdot}_i)$ ] .",
    "then @xmath1633^m\\to r$ ] defined by @xmath1698)$ ] is a coloring of the @xmath5-element subsets of @xmath1 with @xmath637 colors .    to prove the theorem",
    ", we must show that every isomorphic copy of @xmath83 contains sets of every color . toward that end ,",
    "let @xmath2105 be an arbitrary set such that @xmath2106 and let @xmath2107 be the isomorphism and let @xmath829 be arbitrary . by lemmas [ lem.rado.increasing ] and [ thm.1.translate ]",
    ", we may assume that @xmath2108 is a pnp map with domain @xmath65 .",
    "hence @xmath2109 is a pnp map with domain @xmath19 whose range is a strongly diagonal subset of @xmath65 and @xmath2110 .",
    "apply theorem [ thm.thin.inside ] to @xmath308 obtain a pnp diagonalization @xmath2111 into @xmath65 with level harmony .",
    "since @xmath61 is a pre-@xmath65-vip order , it is also a @xmath92-vip order for @xmath2112 .    by theorem [ thm : gk ] applied to @xmath248 and @xmath92 , there is some @xmath2113 such that @xmath2114 .",
    "recall that @xmath1700 .",
    "let @xmath202 be such that @xmath2115=x$ ] .",
    "then @xmath2116]$ ] is well - defined and by definition of @xmath617 and @xmath1687 , we can see that @xmath2117 .",
    "let @xmath2118 $ ] .",
    "then @xmath2119=g[a]=y$ ] by definition of @xmath308 and choice of @xmath202 .",
    "so @xmath1696 , by definition of @xmath262 .",
    "thus @xmath1698)=j$ ] .",
    "since @xmath847 and @xmath679 were arbitrary , every isomorphic copy of @xmath83 contains sets of every color .",
    "figure [ fig.rplusvalue ] summarizes the calculation from @xcite of values of @xmath85 for @xmath1009 . a comparison with @xmath2120 , the number of @xmath5-types ,",
    "is also included , where @xmath2120 is the critical value for finite colorings of @xmath5-tuples of the countable rado graph ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be a strongly @xmath1-dense linear order of size @xmath1 for @xmath1 a suitable cardinal . </S>",
    "<S> we prove , for @xmath2 , that there is a finite value @xmath3 such that the set @xmath4^m$ ] of @xmath5-tuples from @xmath6 can be divided into @xmath3 many classes , such that whenever any of these classes @xmath7 is colored with @xmath8 many colors , there is a copy @xmath9 of @xmath10 such that @xmath11^m\\cap c$ ] is monochromatic . as a consequence </S>",
    "<S> we obtain that whenever we color @xmath12^m$ ] with @xmath8 many colors , there is a copy of @xmath10 all @xmath5-tuples from which are colored in at most @xmath3 colors . in other words , </S>",
    "<S> the partition relation @xmath13 holds for some finite @xmath14 .    </S>",
    "<S> we show that @xmath3 is the minimal value with this property . </S>",
    "<S> we were not able to give a formula for @xmath3 but we can describe @xmath3 as the cardinality of a certain finite set of types . </S>",
    "<S> we also give an upper and a lower bound on its value and for @xmath15 we obtain @xmath16 , while for @xmath17 we have @xmath18 , the @xmath5th tangent number . </S>",
    "<S> the paper also contains similar positive partition results about @xmath1-rado graphs .    </S>",
    "<S> a consequence of our work and some earlier results of hajnal and komjth is that a theorem of shelah known to follow from a large cardinal assumption in a generic extension , does not follow from any large cardinal assumption on its own . </S>"
  ]
}