{
  "article_text": [
    "there are several methods for measuring flows in surface layers of the sun .",
    "local helioseismology uses information about solar oscillations  frequency shifts and travel time variations  to infer the structure of solar interior and to determine flow patterns just below the surface ( _ e.g. _ @xcite , @xcite ) . the local correlation tracking method measures apparent motion of specific structures to determine the flow field ( _ e.g. _ motions of granules ",
    "@xcite , @xcite , or magnetic elements ",
    "@xcite , @xcite ) .",
    "a similar method is feature tracking , which evaluates motions of well defined isolated features .",
    "direct doppler measurements provide in general just the line - of - sight component of the velocity vector , but when applied to large datasets , these can provide statistically robust information about properties of the surface flows ( _ e.g. _ the discovery of supergranulation by @xcite , @xcite or @xcite , @xcite ) .",
    "however , the results obtained by different methods may have discrepancies .",
    "these can be caused by the nature of the methods , _",
    "e.g. _ due to different types of averaging , and also because of the use of different datasets from different instruments .",
    "in addition , various disturbing effects may be important .",
    "therefore , we decided to compare the results obtained by two different methods , time - distance helioseismology and local correlation tracking ( lct ) , using the same set of data : high - cadence dopplergrams , covering almost one carrington rotation , obtained from michelson doppler imager ( mdi , @xcite , @xcite ) .    solar acoustic waves ( @xmath1  modes )",
    "are excited in the upper convection zone and travel between various points on the surface through the interior .",
    "the travel time of acoustic waves is affected by variations of the speed of sound along the propagation paths and also by mass flows .",
    "time - distance helioseismology measurements @xcite and inversions ( @xcite , @xcite , @xcite , @xcite ) provide a tool to study three - dimensional flow fields in the upper part of the solar convection zone with relatively high spatial resolution .",
    "the local correlation tracking ( lct ) method was originally designed for removing seeing - induced distortions in sequences of solar images @xcite , and later used for mapping motions of granules in series of white - light images of the photosphere @xcite .",
    "this method works on the principle of best match : local displacements in the image frames are determined for each position by cross - correlating pairs of sub - frames within a pre - defined spatial window ( correlation window ) , and then the corresponding velocities are calculated from these displacements .",
    "[ svanda : lct_under ] in some studies it has been shown that lct technique underestimates the real velocities due to the smoothing of processed data by the correlation window .",
    "for example , in the study by @xcite ( @xcite ) based on synthetic dopplergrams , it was found that the lct code used also in this study underrepresents the magnitudes of velocities by a factor of 1.13 . in @xcite ( @xcite ) ,",
    "the correction factor with the same meaning was found to be 1.5 .",
    "however , georgobiani s study was done using a another lct code applied to simulated data and the results were compared with time - distance method applied to @xmath2  modes .",
    "this means that the correction factor is different for different parameters used in the lct method and , therefore , it should be determined ( calibrated ) empirically for each particular study .",
    "application of lct to mdi dopplergrams by @xcite ( @xcite ) showed the underestimation by more than 30% .",
    "other studies also find the underrepresenting of magnitudes by lct ( @xcite , @xcite  20  % , @xcite , @xcite  25  % ) .",
    "both methods provide surface or near - surface velocity vector fields .",
    "however , the results of these methods can be interpreted differently . while local helioseismology measures intrinsic plasma motions ( through advection of acoustic waves ) , lct measures apparent motions of structures ( granules or magnetic elements ) .",
    "it is known that some structures do not necessarily follow the flows of the plasma on the surface .",
    "fox example , supergranulation appears to rotate faster than the plasma ( @xcite , @xcite ) , which may be caused by travelling waves ( @xcite , @xcite ) or may be explained also as a projection effect ( @xcite , @xcite ) .",
    "some older studies ( _ e.g. _ @xcite , @xcite ) also suggest that the difference in flow properties measured on the basis of structures motions and plasma motions is caused by a deeper anchor depth of these structures .",
    "an evolution of the pattern may also play a significant role ( _ e.g. _ due to emergence of magnetic elements ) .",
    "another possiblity is that surface structures are not coherent features , but patterns traveling with a different group velocity than the surface plasma velocity , such as occurs for the features present in simulations of travelling - wave convection ( _ e.g. _ , @xcite , @xcite ) .",
    "some attempts to compare the results of local helioseismology and the lct method for large scales , with characteristic size 100  mm and more , have been carried out by @xcite ( @xcite ) , but his results were inconclusive .",
    "the correlation coefficient describing the match of the velocity maps obtained by local helioseismology and the lct method was close to zero .",
    "nevertheless , there were compact and continuous regions of characteristic size from 30 to 60 heliographic degrees with a good agreement between the two methods , so that one could not conclude that the results were completely different . in his study",
    ", many factors could be significant : the techniques were applied to different types of datasets ( lct was applied to low resolution magnetograms acquired at the wilcox solar observatory and the time - distance method used mdi dopplergrams ) .",
    "both techniques had very different spatial resolution , and also the accuracy of the measurements was not well known .",
    "we decided to avoid these problems and analyze the same data set from the mdi instrument on soho .",
    "mdi provides approximately two months of continuous high - cadence ( one - minute cadence ) full - disc dopplergrams each year . this _ dynamics program _ provides data suitable for helioseismic studies , and also for the local correlation tracking of supergranules .",
    "thus , this is a perfect opportunity to compare the performance and results of two different techniques using the same set of data , and to avoid effects of observations with different instruments or in different conditions .",
    "the selected dataset consists of 27 data - cubes from march 12 , 2001 , 0:00  ut to april 6 , 2001 , 0:31  ut , where each third day was used , and in these days three 8.5-hour long data - cubes were processed ( so that every third day in the described interval was fully covered by measurements ) .",
    "each data - cube is composed of 512 dopplergrams with spatial resolution of 1.98@xmath3 at a one - minute cadence .",
    "all of the frames of each data - cube were tracked with rigid rate of 2.871  @xmath4rads@xmath5 , remapped with postel s projection with a resolution of 0.12@xmath0px@xmath5 ( 1500  kmpx@xmath5 at the center of the disc ) , and only a central meridian region was selected for further processing ( with size of 256@xmath6924  px covering @xmath7 in longitude and running from @xmath8 to @xmath9 in latitude ) , so that effects of distortions due to the projection do not play a significant role .",
    "tracked data - cubes were used to perform the time - distance analysis . from all the frames in each data - cube , the mean dopplergram ( like figure  [ examples ] left )",
    "was subtracted to suppress the influence of velocity structures like supergranulation and to highlight the signals of @xmath1  modes .",
    "@xmath10  modes have their origin in the solar convection zone and travel through the solar interior to the surface .",
    "the travel - time of the wave depends on the speed of sound and on the velocity of the mass flow in the layers of the solar interior , through which the bulk is travelling . in the time - distance technique",
    ", the travel times of waves from the point in the photosphere ( central point ) to a surrounding annuli around this point are measured .",
    "the radius of each annulus selects wavemodes that propagate down to a specific depth , before being refracted upward toward the photosphere .",
    "travel times are measured by the cross - correlation between doppler velocities in the central point and velocities in the selected annuli around this point .",
    "the mass flow velocities in the interior are calculated from the differences of travel times from the central point to the surrounding annuli and the travel times from the surrounding annuli to the central point when the state properties in the affected layers of the solar interior are known . in this study ,",
    "the theoretical ray approximation is derived from the solar model s ( @xcite , @xcite ) . dividing the annuli into sectors",
    ", the underlying flow field of selected orientations can be infered .",
    "for details see @xcite ( @xcite ) , @xcite ( @xcite ) , or @xcite ( @xcite ) .    during the process , the surface gravity wave ( @xmath2  mode )",
    "is filtered out from the @xmath11@xmath12 diagram before computing the travel times , because it has different dispersion characteristics than the @xmath1  modes used in this study .",
    "@xmath13  modes , if not filtered out , will disturb @xmath1  modes measurements , and it is also not straightforward to perfrom inversions if not separating two different modes .",
    "the @xmath1  mode inversions are less sensitive to the surface flows than @xmath2  mode data , but still recover the large - scale flows well .",
    "the time - distance inversion results were smoothed by a gaussian with fwhm of 30  px to match the resolution to the lct method , and only the horizontal components ( @xmath14 , @xmath15 ) of the full velocity vector were used .",
    "while for the time - distance method the @xmath1  modes of solar oscillations play a crucial role , they significantly influence the performance of the lct method in a negative way .",
    "the oscillations are clearly visible in the dopplergrams , causing random errors in the calculation of displacements .",
    "therefore , before applying the lct method , the oscillation signals must be suppressed . for our high - cadence data it is possible to do this using temporal averaging . according to @xcite ( @xcite ) or more recently @xcite ( @xcite ) it is better to use a gaussian type of temporal averaging than the boxcar one .",
    "we average the dopplergrams over a 31-minute period with weights given by the formula @xmath16-\\exp\\left[{\\frac{b^2}{2a^2}}\\right ] \\left(1+\\frac{b^2-(\\delta t)^2}{2a^2}\\right),\\ ] ] where @xmath17 is the time between a given frame and the central one ( in minutes ) , @xmath18  minutes and @xmath19  minutes .",
    "we verified that this filter suppresses the solar oscillations in the 24 mhz frequency band by a factor of more than five hundred .",
    "the other issue significantly influencing the performance of the lct method is the change of contrast and background intensity caused by solar rotation . due to tracking the doppler images with rotation ,",
    "the magnitude of the line - of - sight component of the solar rotational velocity changes from frame to frame and affects the lct results .",
    "the method interprets these changes as a motion towards the east , mainly in the central part of the solar disc , where the contrast in the structures of dopplergrams is very low ( see figure  [ examples ] left ) .",
    "we suppress the influence of the moving background by subtraction of a third - order polynomial surface fit .",
    "we have tested that this provides almost the same results as the other possible procedures : local removal of the mean values and unsharp masking .",
    "subtraction of the polynomial fit is not so sensitive to anomalies in the dopplergrams , caused by regions with strong magnetic field .",
    "the lct method used in this study is described by the following parameters : the time - lag between correlated frames is 120 frames ( two hours ) , the correlation window has a gaussian shape with fwhm of 30 px , the correlation is measured by the sum of absolute differences of subframes ( it is faster than calculation of the correlation coefficient and provides the same results ) , the extremum position is calculated using the nine - point method @xcite . for each data - cube ,",
    "the results of all the correlated pairs are averaged , so that the method provides an averaged flow field over 8.5  hours in the same sense as the time - distance analysis .",
    "the results containing 27 horizontal flow fields were statistically processed to obtain the cross - calibration curves for these methods .",
    "it is generally known ( see discussion in section 1 , page  ) that the lct method slightly underestimates the velocities ; thus , the results should be corrected by a certain factor . from the comparison of the @xmath20-component of velocity ( cf .",
    "figure  [ vx , vy ] left ) we obtained parameters of a linear fit given by ( numbers in parentheses denote a @xmath21-error of the regression coefficient ) @xmath22 the correlation coefficient between @xmath23 and @xmath24 is @xmath25 .",
    "we assume that the time - distance measurements for @xmath24 are correct and the magnitude of the lct measurements , @xmath23 , must be corrected according to the slope of equation  ( [ vx_fit ] ) .",
    "this correction factor has a value of 1.12 , which is in perfect agreement with the correction factor of 1.13 found in the tests of the same lct code using synthetic dopplergrams with the same resolution and similar lct parameters @xcite .",
    "we assume that both velocity components obtained with the lct method should be corrected by this factor .",
    "the regression line of @xmath15 component ( figure  [ vx , vy ] right ) is @xmath26 after the slope correction using the @xmath14 fits , the regression curve is slightly different : @xmath27 with the correlation coefficient between @xmath28 and @xmath29 close to 0.47 .",
    "the slope of the linear fit differs significantly from the expected value 1.0 .",
    "we have tested that this asymmetry is not related to the lct technique .",
    "the tests did not show any preference in direction of flows measured by lct or any dependence of the results on the size of the field of view ( which is not a square ) .",
    "also in the recent study by @xcite ( @xcite ) , based on synthetic data , the asymmetry between the zonal and the meridional components was not encountered .",
    "it is possible that a drift of the supergranular pattern towards the equator ( such as found by @xcite , ) might cause an asymmetry between measurements of the north - south and east - west velocities .",
    "however , this process does not explain why the meridional velocities from both techniques seem to be proportional to each other .",
    "a systematic drift would rather be depicted as a constant , or a shift depending on the latitude . however , the meridional components of velocities are generally rather small , so the errors of the measurements can play a significant role and the proportional behavior can be only apparent . such an effect is not seen in the experiments with test data , so we do not favor this explanation .    a second explanation is based on unspecified asymmetries influencing travel - time measurements , for instance , due to different sensitivity of the mdi instrument to @xmath1  modes propagating in the east  west and north  south directions . @xcite",
    "( @xcite ) did not find such an asymmetry using @xmath2-mode time - distance and lct applied to realistic numerical simulation .",
    "the asymmetry in the east  west and north  south directions observed by @xmath1  mode time - distance helioseismology was on the contrary noticed in a recent study based on numerically simulated data ( @xcite , @xcite ) .",
    "this evidence suggests the asymmetry arises only in @xmath1  mode inversions such as those studied here , and should be investigated further in more detail .    in this study we decided to correct the @xmath30-component of the time - distance results .",
    "the final calibration formulae providing the best statistical agreement between the velocities calculated using both methods are :    @xmath31    where the index _ corr _ denotes the corrected value , and the index _ calc _ denotes the original calculated value .",
    "after the corrections , as presented in the histogram in figure  [ histy ] , the differences between the directions of the velocity vectors ( @xmath32 ) calculated by these techniques are quite reasonable .",
    "the mean value of the distribution is 43.56@xmath0 , however , the mean value is not a good indicator in this case because the distribution function is not normal .",
    "the median value is 24.02@xmath0 and 66.6  % of points have the difference in the corresponding vector directions less than 45@xmath0 .    instead of computation of the correlation coefficient of the arguments of both vector fields",
    ", we decided to compute a magnitude - weighted cosine of @xmath32 , because it provides more robust results .",
    "this quantity is given by @xmath33 where @xmath34 is the time - distance vector field , @xmath35 is the lct vector field and the summation is performed over all vectors in the field .",
    "the closer this quantity is to one , the better is the agreement between both vector fields .",
    "larger vectors are weighted more than smaller ones .",
    "we have found that in our case @xmath36 .      ' '' ''    in addition to the detailed comparison of the vector fields , we compare the mean flows , the differential rotation , and the meridional circulation .",
    "these flows can be quite simply calculated from the results of both techniques . in both cases ,",
    "they provide the mean zonal and mean meridional flows for carrington rotation 1974 .",
    "the results are displayed in figure  [ mean ] , where the differential rotation curves are compared with a standard profile from @xcite ( @xcite ) in the left panel .",
    "it can be clearly seen that the latitudinal profiles for both techniques are very similar and also that the mean velocities do not differ much in magnitude .",
    "the correlation coefficients are @xmath37 for the zonal flow and @xmath38 for the meridional flow . in the differential rotation curves ,",
    "the lct results give a little slower rotation , which is also seen from equation  ( [ vx_fit ] ) .",
    "the mean difference of average zonal velocities obtained by both techniques is 14.1  ms@xmath5 .",
    "we conclude that for the mean flows the results obtained by the techniques agree very well .      for a detailed comparison of the flow fields",
    ", we selected one data cube , representing 8.5-hour measurements centered at 4:16  ut march 24 , 2001 , @xmath39=214.3@xmath0 ( see the averaged mdi dopplergram and magnetogram in figure  [ examples ] ) . in this map , the correlation coefficient for the @xmath20-component of the velocity is @xmath40 , for the @xmath30-component @xmath41 , and for the vector magnitude : @xmath42 .",
    "the vector plots of the flow fields obtained by both techniques , shown in figure  [ arrows ] , in general seem to be quite similar to each other . however , many differences can be seen .",
    "the regions where the differences are most significant correspond to relatively small ( under 50  ms@xmath5 ) velocities .",
    "this is clear from the map of the differences between the vector directions , displayed in figure  [ difphases ] .",
    "the histogram of the differences between the directions of the corresponding vectors ( @xmath32 ) is presented in figure  [ histy ] .",
    "values of @xmath43 slightly anti - correlate with the average magnitude of the corresponding vectors ( @xmath44 ) .",
    "we think that this is due to uncertainties of both techniques . from our tests using synthetic data",
    ", it became clear that the inaccuracy of the lct code is 15  ms@xmath5 for velocities smaller than 100  ms@xmath5 and 25  ms@xmath5 for velocities larger than 100  ms@xmath5 , for both components @xcite .",
    "we think that the 10  % accuracy for the time - distance velocity vectors is a reasonable estimate .",
    "as is stated in @xcite ( @xcite ) , cross - talk effects between horizontal and vertical components of flow velocities affect the time - distance inversion results .",
    "the cross - talk effect prevents us from inverting the vertical velocity correctly , but it does not block the determination of horizontal velocities ( @xcite , @xcite ) . however , the vertical velocities are not discussed in this paper because they are not measured by the lct technique .",
    "obviously , inaccuracy in one component may cause a significant change of the direction of the horizontal vector for small velocities and , hence , the agreement of both techniques in such areas is not as good as in the areas of high velocities .",
    "the vector velocity field may be also influenced by the temporal evolution of the traced pattern .",
    "we have tested using the full - disc mdi dopplergrams that temporal changes at mesogranular and smaller scales are effectively filtered out by a @xmath11@xmath12 filter .",
    "the temporal evolution of the supergranular pattern may , in the worse case , significantly influence the calculated vector velocity field in the close ( roughly equal to the fwhm of the chosen correlation window ) vicinity of a rapidly changing ( _ e.g. _ disappearing ) supergranule .",
    "flow velocity fields on the solar surface obtained by two different techniques , time - distance helioseismology and local correlation tracking ( lct ) , were compared . despite the fact that the first technique uses @xmath1  modes of solar oscillations to compute the velocity field ( in the data , large - scale structures like supergranulation",
    "are suppressed ) , while the other one uses large - scale supergranulation pattern from averaged doppler images as tracers for the velocity vectors determination ( and requires @xmath1  modes removal ) , we found that both results match reasonably well .",
    "we have confirmed some recent studies that the lct method slightly underestimates the actual velocities ( as the consequence of a smoothing procedure ) , and determined empirical correction factors .",
    "after the corrections , the match in global velocity structures , mean zonal and meridional flows , is very good .",
    "the results of a detailed comparison of the vector velocity fields are not so satisfactory . however , the correlation coefficient for individual components of the flows is positive and significant , so we conclude that a meaningful match is found .",
    "it is shown that the largest disagreement is caused by very small velocities in some regions , where the errors of both methods become quite significant .",
    "m.  . has been supported by esa - pecs under grant no .",
    "8030 and by the czech science foundation under grant 205/04/2129 . m.  .",
    "would like also thank to the members of the solar group of stanford university for all the support during his stay at stanford and to his ph .",
    "d. thesis advisers , mirek klvaa and michal sobotka , for valuable help when tuning the lct method .",
    "the mdi data were kindly provided by the soho / mdi consortium .",
    "soho is the project of international cooperation between esa and nasa .",
    "we also thank marc  l.  derosa , whose comments helped significantly to improve the paper .",
    "ambro , p. , 2005",
    ", in _ large - scale structures and their role in solar activity asp conference series _ , vol .",
    "346 , proceedings of the conference held 1822 october , 2004 in sunspot , new mexico , usa . edited by k. sankarasubramanian , m. penn , a. pevtsov , p.  3 ."
  ],
  "abstract_text": [
    "<S> we present a direct comparison between two different techniques time - distance helioseismology and a local correlation tracking method for measuring mass flows in the solar photosphere and in a near - surface layer : we applied both methods to the same dataset ( mdi high - cadence dopplergrams covering almost the entire carrington rotation 1974 ) and compared the results . </S>",
    "<S> we found that after necessary corrections , the vector flow fields obtained by these techniques are very similar . </S>",
    "<S> the median difference between directions of corresponding vectors is 24@xmath0 , and the correlation coefficients of the results for mean zonal and meridional flows are 0.98 and 0.88 respectively . </S>",
    "<S> the largest discrepancies are found in areas of small velocities where the inaccuracies of the computed vectors play a significant role . </S>",
    "<S> the good agreement of these two methods increases confidence in the reliability of large - scale synoptic maps obtained by them . </S>"
  ]
}