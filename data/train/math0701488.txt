{
  "article_text": [
    "problem 109 in section 7.2.1.3 of donald knuth s _ the art of computer programming _",
    "@xcite lists the following sequence . @xmath8",
    "the noteworthy property of this sequence is discovered by listing every consecutive triple , including the two formed by wrapping the sequence cyclically .",
    "here we have @xmath9 not only are the triples distinct , but they are still distinct when considered as unordered multisets . in fact",
    ", each 3-multiset of @xmath10=\\{1,2,3,4,5\\}$ ] appears exactly once .",
    "such a sequence is called a _ universal cycle for @xmath11-multisets of @xmath10$]_. in this paper we will use the shortened term _ mcycle _ , and in particular _",
    "@xmath0-mcycle _ , to refer to a universal cycle for @xmath0-multisets of @xmath1 $ ] , just as the term _ ucycle _ has come to refer to a universal cycle for @xmath0-subsets of @xmath1 $ ] .",
    "universal cycles for a wide range of combinatorial structures were introduced in @xcite , and @xcite contains the most up - to - date knowledge on ucycles for subsets . in this work",
    "we concern ourselves with @xmath0-mcycles for @xmath12 .",
    "note that any permutation of @xmath1 $ ] is a 1-mcycle , and any eulerian circuit ( which exists if and only if @xmath3 is odd ) of the complete graph ( with loops ) on @xmath3 vertices is a 2-mcycle .",
    "the main conjecture is the following .",
    "[ bign ] for @xmath0 large enough in terms of @xmath3 , universal cycles for @xmath0-multisets of @xmath1 $ ] exist if and only if @xmath3 divides @xmath2 .    that the condition above is necessary follows from the fact that each symbol is in the same number of multisets and hence must appear equally often in the cycle .",
    "our preceding comments indicate that the conjecture is true for @xmath13 . in section [ genpf ]",
    "we prove the following theorem .",
    "[ genthm ] let @xmath14 and @xmath15 .",
    "then , for @xmath12 and @xmath16 , mcycles for @xmath0-multisets of @xmath1 $ ] exist whenever @xmath3 is relatively prime to @xmath0 .",
    "this theorem verifies the conjecture for @xmath17 , but leaves open the case @xmath18 for @xmath19 ( the case @xmath20 does nt satisfy the necessary condition ) and many cases for @xmath21 .",
    "more to the point , knuth suggests in his solution to problem 109 that perhaps a @xmath0-mcycle of @xmath1 $ ] exists if and only if a @xmath0-ucycle of @xmath22 $ ] exists ( since then the two necessary conditions coincide ) .",
    "our proof of theorem [ genthm ] sheds light on a correspondence in this direction .    because of the difficulty of extending these results for other values of @xmath0 , it is worth considering other methods of construction .",
    "sections [ indpf ] and [ convpf ] re - prove the special case of @xmath17 from theorem [ genthm ] using different methods that show promise of being extended to larger @xmath0 . in section [ indpf ]",
    "we describe an inductive technique that is an extension of a method developed by anant godbole and presented at the 2004 banff conference on generalizations of de  bruijn cycles and gray codes . in section [ convpf ]",
    "we outline a technique to convert @xmath11-ucycles into @xmath11-mcycles on the same ground set . while this technique is limited by the fact that the ground set remains unchanged , and",
    "thus divisibility considerations will make it difficult to generalize for @xmath23 , it is a step in the right direction .",
    "what is apparent in the sequence ( [ 3mc5 ] ) is that each block has the same difference sequence modulo 5 , namely @xmath24 .",
    "this is a key property of our constructions , as it has been in the construction of all ucycles to date .",
    "this motivates the following definitions ( the same terminology as in @xcite except that `` form '' replaces `` @xmath25-set '' ) .",
    "let @xmath26 , @xmath27 , be a @xmath0-multiset of @xmath1 $ ] .",
    "define its _ form _ , @xmath28 by @xmath29 , where indices are computed modulo @xmath0 and arithmetic is performed modulo @xmath3 ( where @xmath3 is used in place of @xmath30 as the modular representative ) .",
    "two forms are _ equivalent _ if one is a cyclic permutation of the other .",
    "two forms belong to the same _ class _ whenever one is any permutation of the other .",
    "for example , with @xmath31 and @xmath32 , each of the 30 multisets",
    "@xmath33 belongs to the form @xmath34 . also",
    ", the two forms @xmath35 make up the class @xmath36 $ ] .",
    "we will maintain the use of braces , parentheses , and brackets in order to distinguish the various objects from one another .",
    "the main idea of the proof is to build a transition digraph whose edges correspond to the set of all forms . in the case that no bad patterns ( to be defined in the next section ) exist ,",
    "we show that the digraph is eulerian , thereby listing all forms by traversing an eulerian circuit .",
    "from there we repeat the circuit @xmath3 times in order to list all sets .",
    "note that this repetition is what gives rise to the block structure found in the 3-mcycle ( [ 3mc5 ] ) .",
    "we begin by choosing a representative for each class .",
    "we distinguish one of the coordinates of the form @xmath37 ( because of the equivalence among its cyclic permutations we may assume it to be @xmath38 ) in the representation @xmath39 so as to infer the ordering @xmath40 of all its multisets .",
    "this singled out coordinate is therefore unused in the linear listing of each of these multisets .",
    "similarly , we may represent a class by @xmath41 $ ] , signifying that @xmath38 is distinguished ( unused ) in each of its forms .",
    "it is important , then , that @xmath38 be unique in order to avoid ambiguity  this is the reason for wanting good patterns . for example , with @xmath19 and @xmath42 , we can choose @xmath43 $ ] to represent [ 1,1,0,5 ] .",
    "this determines the representations @xmath44 and @xmath45 of its three forms , of which @xmath46 denotes the ( ordered ) forms @xmath47 , @xmath48 and @xmath49 .",
    "based on these choices we define the _ transition graph _ @xmath50 as follows .",
    "we define the _ prefix _ , resp .",
    "_ suffix _ , of the form representation @xmath39 to be @xmath51 , resp . @xmath52 .",
    "our use of double parentheses denotes that these are the vertices in the transition graph @xmath50 whose directed edges are precisely the representations involved .    ,",
    "height=240 ]    for example , figure [ t53 ] shows the transition graph @xmath53 , which was used to construct the 3-mcycle ( [ 3mc5 ] ) .",
    "the forms are represented by @xmath54 , @xmath55 , @xmath56 and @xmath57 .",
    "the form @xmath58 corresponds to the directed edge @xmath59 , and so on .",
    "the eulerian circuit 0011022 corresponds to a listing of all forms and produces the differences in the first block , 0001224 , along with the first digit , 1 , of the next block . since the sum @xmath60",
    ", each block shifts by 1 , and since 1 is relatively prime to 5 each integer occurs as the starting digit of some block .",
    "hence , each 3-multiset of @xmath10 $ ] occurs exactly once .",
    "it turns out , however ( see the insertion technique in @xcite ) , that having the sum relatively prime to @xmath3 is an unnecessary component in the general construction process .    in @xcite the analogous transition graph @xmath61",
    "is defined for @xmath0-subsets of @xmath1 $ ] .",
    "for example , figure [ g83 ] shows the transition graph @xmath62 , which can be used to construct a ucycle for 3-subsets of @xmath63 $ ] .",
    "the forms in this case are represented by @xmath64 , @xmath65 , @xmath66 and @xmath67 . the eulerian circuit 1122133 generates the ucycle @xmath68 as above .    ,",
    "height=240 ]      in @xcite we find the following fact .",
    "[ eulucyc ] if @xmath61 is eulerian for some choice of representations of classes , then there exists a ucycle for @xmath0-subsets of @xmath1 $ ] .    the same arguments ( as described in section [ meth ] ) that prove fact [ eulucyc ] yield the analogous result for mcycles , which we therefore state without proof .",
    "[ eulmcyc ] if @xmath50 is eulerian for some choice of representations of classes , then there exists an mcycle for @xmath0-multisets of @xmath1 $ ] .",
    "the key is that the obvious isomorphism between @xmath53 and @xmath62 holds in general .",
    "[ iso ] for every choice of representatives for the classes for @xmath0-subsets of @xmath22 $ ] there exists choices of representatives for the classes for @xmath0-multisets of @xmath1 $ ] so that the corresponding transition graphs @xmath69 and @xmath50 are isomorphic .",
    "of course , the theorem holds in reverse as well , with the roles of @xmath70 and @xmath71 swapped , but we do not need that fact to prove theorem [ genthm ] .    simply shift every digit of every class and corresponding representation down by one . clearly @xmath72 $ ] is a class for @xmath0-subsets of @xmath22 $ ] if and only if @xmath73 $ ] is a class for @xmath0-multisets of @xmath1 $ ] .",
    "the same can be said for forms and for subsets / multisets .",
    "now we borrow the final fact from @xcite .",
    "[ eulg ] let @xmath74 , @xmath75 , and @xmath76 .",
    "then the transition graph @xmath61 is eulerian for @xmath12 and @xmath77 with @xmath78 .    in light of lemma [ iso ] and",
    "the knowledge that @xmath79 we arrive at the following result .",
    "[ eult ] let @xmath80 and @xmath15 .",
    "then the transition graph @xmath50 is eulerian for @xmath12 and @xmath16 with @xmath78 .    the combination of lemmas [ eulmcyc ] and [ eult ] yields theorem [ genpf ] , with the exception that @xmath81 instead of 4 .",
    "however , a specific example for the case @xmath82 is given by the sequence @xmath83 in ( [ sequences ] ) at the end of section [ indpf ] , below .",
    "this concludes the proof of theorem [ genthm ]",
    ".    note that this result is weaker than conjecture [ bign ] because the relative primality condition replaces the divisibility condition .    to understand the limitations of this method we combine classes as follows .",
    "we see that the collection of all classes is the collection of all unordered partitions of the integer @xmath3 into @xmath0 parts .",
    "each class defines a partition of @xmath0 according to the number of parts of the same size .",
    "two classes belong to the same _ pattern _ if they define the same partition of @xmath0 .",
    "we say that a pattern is _ good _ if some part has size 1 and _ bad _ otherwise . by continuing the example from section [ defs ] ( @xmath84 ) , the 5 classes @xmath85 , [ 2,2,2,12,12 ] , [ 4,4,4,9,9 ] , [ 8,8,8,3,3 ] , { \\rm\\ and\\ } [ 10,10,10,0,0]\\ ] ]",
    "make up the pattern @xmath86 .",
    "( note that the class @xmath87 $ ] is skipped from this sequence because it belongs to the pattern @xmath88 . ) in this case there are 7 patterns in all : @xmath89 of which only @xmath88 and @xmath86 are bad .",
    "the underlying mathematics for lemma [ eult ] comes from the result of @xcite that no bad patterns exist if and only if @xmath12 and @xmath78 .",
    "as noted in the introduction , one of the main results of this work is an inductive proof of theorem [ genthm ] in the case that @xmath17 .",
    "[ indthm ] for @xmath90 , @xmath11-mcycles of @xmath1 $ ] exists provided @xmath91 .    for @xmath17",
    ", the condition @xmath92 implies that @xmath93 or @xmath94 ( mod 3 ) .",
    "we will show that for @xmath95 , universal cycles on multisets exist whenever @xmath3 satisfies @xmath96 i.e. @xmath97 .",
    "we will prove this by induction on @xmath3 as follows .",
    "we will start with a @xmath11-mcycle on @xmath98 $ ] of the form @xmath99 , where @xmath99 is the concatenation of the substrings @xmath100 and @xmath101 , where each of these strings is a substring over the alphabet @xmath98 $ ] with specific properties . from this string",
    ", we will construct a @xmath11-mcycle on @xmath1 $ ] of the form @xmath102 , where @xmath103 , @xmath104 , @xmath105 is a cyclic permutation of @xmath106 , and @xmath107 and @xmath108 are to be described later .    before describing the proof itself , we will define some terminology that will be useful for describing universal cycles .",
    "we say that a cyclic string @xmath109 _ contains _ the multiset collection @xmath110 if @xmath111 , @xmath112 , @xmath113 , @xmath114 , @xmath115 , @xmath116 , where each of these multisets must be distinct .",
    "clearly @xmath117 , since this is the number of @xmath11-multisets on @xmath1 $ ] .",
    "for a string @xmath109 , we call the _ head _ of @xmath118 the substring @xmath119 and the _ tail _ of @xmath118 the substring @xmath120",
    ".    now , consider the collection of all 3-multisets over @xmath1 $ ] .",
    "we shall partition this collection into four subcollections .",
    "let @xmath121 be the collection of all 3-multisets over @xmath98 $ ] , and let @xmath122 be the collection of all @xmath11-multisets over @xmath123 and @xmath124 $ ] which contain at least one element from @xmath123 .",
    "let @xmath125 be the collection of all 3-multisets with one or two elements from @xmath126 and one or two elements from @xmath123 , and let @xmath127 be the collection of all 3-multisets with one element from each of @xmath124 $ ] , @xmath126 , and @xmath123 .",
    "we can see that @xmath128 and @xmath127 are disjoint , and that their union is the collection of all 3-multisets on @xmath1 $ ] , as desired .",
    "now , let @xmath83 be a @xmath11-mcycle on @xmath124 $ ] , and since @xmath129 must occur somewhere in @xmath83 and the beginning of @xmath83 is arbitrary , we shall have @xmath83 begin with @xmath129",
    ". we shall also select @xmath83 so that its tail is @xmath130 .",
    "thus @xmath83 , when considered as a cyclic string , contains all @xmath11-multisets over @xmath124 $ ] , and when considered as a non - cyclic string , contains all @xmath11-multisets except @xmath131 and @xmath132 .",
    "let @xmath106 be a string over @xmath98 $ ] such that @xmath133the concatenation of @xmath83 and @xmath106is a @xmath11mcycle over @xmath98 $ ] .",
    "it is not clear that such a @xmath106 must exist , but we shall find a specific example shortly . in the example we will find , @xmath106 will begin with @xmath134 and will end with @xmath135 . since @xmath106 begins with @xmath134 , the string @xmath133 contains the multisets @xmath136 .",
    "we can see that the cyclic string @xmath133 contains all of the multisets in @xmath121 , and that when @xmath133 is considered as a non - cyclic string , it contains @xmath137 .",
    "now , consider the string @xmath105 obtained by taking @xmath106 and replacing each instance of @xmath138 by @xmath139 , @xmath140 by @xmath141 , and @xmath142 by @xmath3 .",
    "since @xmath106 contained all multisets over @xmath98 $ ] which contained at least one element from @xmath126 , we have that @xmath105 contains all multisets over @xmath123 and @xmath124 $ ] which contain at least one element from @xmath123 , i.e. @xmath105 contains all the multisets in @xmath122 .",
    "since the head of @xmath106 is @xmath134 , the head of @xmath105 is also @xmath134 , and since @xmath106 ends with @xmath135 , @xmath105 ends with @xmath143 . if we consider the cyclic string @xmath144 , we can see that this string contains all the multisets in @xmath145 , while the non - cyclic version of this string is missing the multisets @xmath146 .    for notational convenience , we will use the following assignments : @xmath147 and @xmath148 .",
    "now , we will construct the strings @xmath107 and @xmath108 . to do so",
    ", we shall consider the case where @xmath3 is even and where @xmath3 is odd .",
    "for @xmath3 even , consider the following string :    @xmath149    we can see that this string contains every multiset in @xmath127 , as well as the multisets @xmath150 , @xmath151 , @xmath152 , @xmath153 and @xmath154 .",
    "now , the following string ( found with the aid of a computer ) contains all of the multisets in @xmath155 , @xmath151 , @xmath152 , @xmath156 , @xmath157 : @xmath158    note that while the multisets @xmath159 and @xmath160 are not present in the above string @xmath161 , they are present in the concatenation of @xmath161 with @xmath162 . similarly , while @xmath161 does not contain @xmath163 and @xmath164 , these multisets are present in the concatenation of @xmath105 with @xmath161 .",
    "now , we can see that the string @xmath165 is a universal cycle over @xmath1 $ ] because the non - cyclic string @xmath144 contained all the multisets in @xmath166 , and it is precisely the multisets @xmath167 and @xmath168 which are obtained by the wrap - around of the tail of @xmath162 with the head of @xmath83 .",
    "the head and tail of the other strings has been engineered so as to ensure that each multiset occurs precisely once .",
    "now , consider the case where @xmath3 is odd .",
    "the corresponding strings @xmath169 and @xmath170 are @xmath171 and @xmath172 the string @xmath169 contains the same multisets as @xmath162 , with the exception that @xmath169 does not contain the nine multisets @xmath173 , and the string @xmath170 contains the same multisets as @xmath161 , with the exception that it contains the additional nine multisets listed above .",
    "the concatenation of @xmath169 and @xmath170 with the other strings works the same way as their even counterparts .",
    "this completes the induction proof , since the string @xmath133 is a @xmath11-mcycle over @xmath98 $ ] ( taking the place of @xmath83 in the previous iteration of the induction ) , and the string @xmath174 extends this @xmath11-mcycle to @xmath1 $ ] ( taking the place of @xmath106 in the previous iteration of the induction ) . also note that @xmath174 begins with @xmath134 and ends with @xmath143 , as required for the induction hypothesis .",
    "thus , all that remains is the find a base case from which the induction can proceed . a possible base case",
    "( there are many ) for @xmath175 is @xmath176 which would lead to @xmath177 where `` 0 '' denotes 10 and the spacings have been added to increase readability .",
    "a possible base case for @xmath178 is @xmath179 the corresponding strings @xmath180 and @xmath108 can be found using the method outlined above .",
    "[ convthm ] any @xmath11-ucycle of @xmath1 $ ] can be converted to a @xmath11-mcycle of @xmath1 $ ] .    before giving the proof , we introduce two terms .",
    "we call each element of @xmath1 $ ] a _ letter _ , and each @xmath181 in the ucycle @xmath182 a _ character_. to summarize , a 3-mcycle on @xmath1 $ ] is made up of @xmath2 characters , each of which equals one of @xmath3 letters",
    ".    to demonstrate the proof s technique , we will first use an argument similar to it to create 2-mcycles from 2-ucycles .",
    "we start with this 2-ucycle on @xmath10 $ ] : @xmath183 then , we repeat the first instance of every letter to create the following 2-mcycle : @xmath184 the technique works because repeating a character @xmath181 as above adds the multiset @xmath185 to the ucycle and has no other effect .    to use this technique on 3-ucycles ,",
    "we repeat not single characters , but pairs of characters . for example",
    ", changing @xmath186 to @xmath187 has only the effect of adding the 3-multisets @xmath188 and @xmath189 to the cycle . in order to use this technique",
    ", we will need to know which consecutive pairs of letters appear in a 3-ucycle .",
    "for instance , the following 3-ucycle ( generated using methods from @xcite ) on @xmath63 $ ] contains every unordered pair of letters as consecutive characters but @xmath190 , @xmath191 , @xmath192 , and @xmath193 : @xmath194 this ucycle is missing 4 pairs , which happens to be @xmath195 .",
    "this is no coincidence : in fact , this is the most number of pairs that a 3-ucycle can fail to contain .",
    "[ missingpairs ] no two unordered pairs not appearing as consecutive characters in a 3-ucycle have a letter in common .",
    "a 3-ucycle can hence be missing at most @xmath195 pairs of letters .",
    "suppose that we have a 3-ucycle that contains neither @xmath196 and @xmath197 as consecutive characters , nor @xmath196 and @xmath198 as consecutive characters , where @xmath199 $ ] .",
    "then the 3-ucycle does not contain the 3-subset @xmath200 , because all permutations of @xmath200 contain either @xmath196 and @xmath197 consecutively , or @xmath196 and @xmath198 consecutively .",
    "but this is a contradiction , as a 3-ucycle by definition contains all 3-subsets .",
    "hence , no two pairs of characters missing in the 3-ucycle can have a letter in common . by the pigeonhole principle",
    ", the 3-ucycle can be missing at most @xmath195 pairs of letters .",
    "@xmath201    _ proof of theorem [ convthm ] .",
    "_ let @xmath118 be a 3-ucycle on @xmath1 $ ] .",
    "let @xmath202 be a permutation of @xmath1 $ ] such that    * @xmath203 equals the first character in @xmath118 . *",
    "@xmath204 equals the last character in @xmath118 . *",
    "if @xmath205 is even , the list @xmath206 contains all unordered pairs of letters not contained as consecutive characters in @xmath118 , which is possible by our lemma .",
    "( if @xmath118 is missing exactly @xmath195 pairs of letters , these pairs will be exactly the pairs missing from @xmath118 .",
    "if @xmath118 is missing fewer than @xmath195 pairs of letters , then the pairs consist of all missing pairs of letters , plus the remaining letters paired arbitrarily . )",
    "+ if @xmath205 is odd , one of the following lists contains all unordered pairs of letters not contained as consecutive characters in @xmath118 : 1 .",
    "@xmath207 2 .",
    "@xmath208 3 .",
    "@xmath209 + this is possible by our lemma .",
    "there can be at most @xmath210 missing pairs of letters in @xmath118 , and depending on whether @xmath203 , @xmath204 , or both is a member of a missing pair , one of the above lists can contain all the missing pairs .",
    "( as in the even case , it does not present any problems if @xmath118 is missing fewer than @xmath210 pairs . )",
    "construct @xmath211 by repeating the first instance of every unordered pair of letters in @xmath118 except for @xmath212 @xmath213 @xmath214 .",
    "the cycle @xmath211 now contains all multisets except @xmath215 @xmath216 now , add the string @xmath217 to the end of @xmath211 to create @xmath218 .",
    "this provides exactly the missing multisets , creating a 3-mcycle .    as a finall illustration , when @xmath219 we start with the 3-ucycle @xmath220 the 3-ucycle @xmath118 does not contain the pairs @xmath190 , @xmath191 , @xmath192 , and @xmath193 . hence , we set @xmath221 note that @xmath203 equals the first character of @xmath118 , and @xmath222 equals the last .",
    "now , we repeat the first instance of every unordered pair except for @xmath190 , @xmath223 , @xmath192 , @xmath224 , @xmath193 , @xmath225 , @xmath191 , and @xmath226 .",
    "( note that four of these pairs do not appear in @xmath118 .",
    "if some of these pairs actually did appear in @xmath118 , because @xmath118 was missing fewer than @xmath195 pairs of letters , it would not affect the proof . )",
    "@xmath227 finally , we add the string @xmath228 to complete the mcycle . @xmath229",
    "the proofs in sections [ indpf ] and [ convpf ] suggest natural extensions to the @xmath19 and larger cases .",
    "moreover , they may prove useful by their introduction of new techniques for approaching ucycles .",
    "the section 3 proof is notable for its use of induction , a technique which has not yet been used to create ucycles .",
    "this is especially promising in light of the many potential base cases provided by jackson @xcite for @xmath230 .",
    "the section 4 proof , while it is tied to ucycles , is not tied to any particular approach for creating ucycles , which is not true of the technique in section [ genpf ] . since the necessary condition for the existence of ucycles for @xmath0-subsets of @xmath1 $ ] is that @xmath3 divides @xmath231 , and since @xmath232 , we see that the condition for @xmath0-mcycles of @xmath1 $ ] is the same as the condition for @xmath0-ucycles of @xmath22 $ ] .",
    "thus it is reasonable to assume that some sort of transformation between the two exists , as knuth suggests .    for values of @xmath3 and @xmath0 for which mcycles do exist",
    ", one interesting question is how many mcycles exist .",
    "clearly each mcycles has @xmath233 representations , since there are @xmath233 permutations of @xmath234 .",
    "however , when searching for mcycles using a computer , vast numbers of _ distinct _ ( i.e. not differing merely by a permutation of @xmath234 ) mcycles were found .",
    "currently , it is not clear whether @xmath235 , the number of distinct mcycles for a given value of @xmath3 and @xmath0 , is a function that can be approximated well ."
  ],
  "abstract_text": [
    "<S> a _ universal cycle _ for @xmath0-multisets of @xmath1=\\{1,\\ldots , n\\}$ ] is a cyclic sequence of @xmath2 integers from @xmath1 $ ] with the property that each @xmath0-multiset of @xmath1 $ ] appears exactly once consecutively in the sequence . </S>",
    "<S> for such a sequence to exist it is necessary that @xmath3 divides @xmath2 , and it is reasonable to conjecture that this condition is sufficient for large enough @xmath3 in terms of @xmath0 . </S>",
    "<S> we prove the conjecture completely for @xmath4 and partially for @xmath5 . </S>",
    "<S> these results also support a positive answer to a question of knuth .    </S>",
    "<S>  ( ( ) ) @xmath6 ) @xmath7 ] </S>"
  ]
}