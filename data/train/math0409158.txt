{
  "article_text": [
    "the relevance of non - well - founded trees to mathematics and computer science was made clear by the work of peter aczel @xcite .",
    "he used them in order to extend the set - theoretic universe by non - well - founded sets .",
    "traditionally , the axiom of foundation allows sets to be represented only by well - founded trees , but aczel s anti - foundation axiom extends this possibility to all non - well - founded trees .    in computer science ,",
    "non - well - foundedness of trees enables one to describe circular ( and , more generally , non - terminating ) phenomena . for this reason",
    ", they have been used in the theory of concurrency and specification , as well as in the study of semantics for programming languages with coinductive types @xcite .",
    "categorically , non - well - founded trees over a given signature form what we call its m - type , that is the final coalgebra for the polynomial functor determined by the signature itself , much like well - founded trees form its initial algebra , usually called the w - type of the signature .    in this paper , we look at properties of categories with m - types . specifically , we prove that they are closed under slicing , formation of coalgebras ( for a cartesian comonad ) , and sheaves ( for an internal site ) .",
    "these constructions have proved useful in topos theory , leading to the formulation of various independence results @xcite .",
    "our motivation for studying them in this setting , is the potential for application to the theory of non - well - founded sets and to polymorphism of coinductive types .",
    "the core of the proof , in each case , is to show existence of certain final coalgebras . generally , this is not an easy task .",
    "it is obvious that some functors can not have a final coalgebra ( for example the powerset functor in any elementary topos , by cantor s argument ) .",
    "however , playing with the structure of our categories and restricting our attention to particular classes of functors , we can obtain partial results ( see for instance @xcite ) .    in the present work",
    ", we shall focus on locally cartesian closed pretoposes .",
    "the internal logic of these categories forces us to think of trees in a constructive ( and predicative ) way . for this purpose",
    ", we choose to use the language of paths @xcite ; to this end we shall require the existence of a natural number object .",
    "in formalising our arguments , we encountered a category of objects , which we call proto - coalgebras .",
    "we have no notice of them being ever introduced before .    as a byproduct of our work with proto - coalgebras and paths",
    ", we could reformulate in our setting a result by santocanale @xcite .",
    "we are grateful to jaap van oosten and ieke moerdijk for their useful comments on an earlier version of this paper .",
    "throughout the paper , will denote a locally cartesian closed pretopos with a natural number object . to any morphism in",
    ", we can then associate a _ polynomial functor _ , defined as @xmath0 or , more formally , as @xmath1 where the exponential is taken in the slice category @xmath2 . in the internal language of , an element of @xmath3 is a pair @xmath4 , where @xmath5 and assigns to each element in the fibre over @xmath6 an element in @xmath7 . notice in particular that there is an obvious map mapping the pair @xmath4 to @xmath6 .",
    "this makes @xmath3 into an object over @xmath8 , namely the exponential of @xmath9 and @xmath10 .",
    "notice also that the action of @xmath11 on maps lives over @xmath8 , i.e.  for a map in the following commutes :    the _ w - type _ associated to @xmath10 is defined to be the initial algebra for the functor @xmath12 . in , this is the set of all well - founded trees built over the signature determined by @xmath10 , having one term constructor of arity @xmath13 for each element @xmath14 .",
    "initiality allows for definition of maps on trees by structural induction . in this same context",
    ", the final @xmath11-coalgebra turns out to be the set of all trees ( including the non - well - founded ones ) built over the same signature .",
    "we shall call a final @xmath11-coalgebra the _ m - type _ associated to @xmath10 , and we shall denote it by @xmath15 we shall often denote the inverse of @xmath16 by @xmath17 ( or just @xmath18 , when @xmath10 is understood ) .",
    "this will map the pair @xmath4 to the tree @xmath19 , consisting of a root labelled by @xmath6 and having children indexed by the elements of the fibre of @xmath10 over @xmath6 , in such a way that the subtree appended to the branch labelled by @xmath20 is @xmath21 .",
    "mediating arrows to final coalgebras correspond to functions to trees defined by coinduction ( for a clear description , look at @xcite ) .",
    "we say that _ has m - types _",
    ", if terminal coalgebras exist for every polynomial functor . a _ coinductive pretopos _ will be a locally cartesian closed pretopos with a natural number object which has m - types .",
    "it is the purpose of this paper to prove the closure of coinductive pretoposes under slicing , formation of coalgebras for a cartesian comonad and formation of sheaves over an internal site .",
    "but , before proceeding , we state some general properties of m - types which will be needed later .",
    "first of all let s note that , by lambek s lemma @xcite , the coalgebra map @xmath16 is an isomorphism .",
    "in particular , this determines a _ root _ map which , by an abuse of notation , will be denoted again by @xmath22 .",
    "we are confident that this will generate no confusion .    given a pullback diagram in we can think of @xmath23 as a morphism of signatures , since the fibre over each @xmath24 is isomorphic to the fibre over @xmath25 .",
    "it is therefore reasonable to expect , in such a situation , an induced morphism between @xmath26 and @xmath27 , when these exist .",
    "in fact , as already pointed out in @xcite , such a pullback square induces a natural transformation such that    tilderoot = .",
    "post - composition with @xmath28 turns any @xmath29-coalgebra into one for @xmath11 .",
    "in particular , this happens for @xmath26 , thus inducing a unique coalgebra homomorphism as in notice that , by and , the morphism @xmath30 preserves the root maps .",
    "the reader who is familiar with the language of trees will not find it surprising that , in order to carry out some calculations , we introduce the notion of _ path _ @xcite . the reason for doing so",
    "is that paths allow us to identify properties of trees in a predicative way . making an essential use of the internal logic of a locally cartesian closed pretopos with a natural number object",
    ", we can define paths not just for the w - type and the m - type of a polynomial functor , but for _ any _ coalgebra .",
    "assume we are given a @xmath11-coalgebra @xmath31 a finite sequence of odd length @xmath32 is called a _ ( finite ) path _ in @xmath33 , if every @xmath34 is in @xmath7 , every @xmath35 is in @xmath36 and for every @xmath37 we have    relinpath x_i+1 = ( x_i)(b_i ) .    more precisely , if @xmath38 , then we are asking that @xmath39 . in the particular case when @xmath7 is the final coalgebra @xmath27 , a path @xmath40 in this sense coincides precisely with a path in the usual sense in the non - well - founded tree @xmath41 .",
    "we will therefore say that such a path _ lies _ in @xmath41 , and by extension , a path @xmath42 lies in @xmath43 for any coalgebra @xmath33 .",
    "all paths in a coalgebra @xmath33 are collected in the subobject    any morphism of coalgebras induces a morphism    pathcoalghom    between the respective objects of paths .",
    "a path @xmath44 is sent by @xmath45 to @xmath46 .",
    "furthermore , given a path @xmath47 in @xmath48 and an @xmath49 such that @xmath50 , there is a unique path @xmath51 starting with @xmath49 such that @xmath52 .",
    "( proof : define @xmath53 inductively for every @xmath54 using and put @xmath55 . )    in fact , in order to introduce the concept of path , we need even less than a coalgebra : it is sufficient to have a common environment in which to read equation . given a map in , consider the category @xmath56 of @xmath11-_proto - coalgebras_. its objects are pairs of maps where @xmath57 is monic .",
    "an arrow between @xmath58 and @xmath59 is a pair of maps @xmath60 making the following commute : notice that there is an obvious inclusion functor    icoalgprotocol ,    mapping a coalgebra to the pair @xmath61 .    for a proto - coalgebra as in",
    ", one can introduce the notion of a path in the following way .",
    "we shall call an element @xmath62 _ branching _ if @xmath63 lies in the image of @xmath57 . then",
    ", we call a sequence of odd length @xmath64 a _ path _ if it satisfies the properties :    1 .",
    "@xmath65 is branching for all @xmath54 ; + 2 .",
    "@xmath66 for all @xmath54 ; + 3 .",
    "@xmath67 for all @xmath54 ;    where @xmath68 is the ( unique ) element in @xmath69 such that @xmath70 .",
    "an element @xmath71 is called _ coherent _ , if all paths starting with @xmath72 end with a branching element .",
    "so , all coherent elements are automatically branching , and their children , identified through @xmath57 , are themselves coherent .",
    "the internal language of makes it possible to identify the object of coherent elements in any proto - coalgebra .",
    "this can be shown to be the intersection of the chain @xmath73 of subobjects of @xmath7 defined inductively as follows : @xmath74 ; @xmath75 is the pullback given a subobject @xmath76 & x_{n-1}}$ ] , @xmath77 is the pullback    intuitively , a branching element is one whose image under @xmath78 is in @xmath3 , hence it has some _ branches _ determined by the fibres of @xmath10 .",
    "however , nothing ensures that the children nodes will be themselves branching .",
    "the subobject @xmath73 above is the object of those elements in @xmath7 for which we can follow a path for at least @xmath79-many steps , that is , we can find branching children up to @xmath79 consecutive generations .",
    "the intersection @xmath80 of the @xmath73 is then the object of coherent elements , for which we know that all their children nodes are still coherent .",
    "hence , we can define on @xmath80 a @xmath11-coalgebra structure .",
    "in fact , this is the biggest coalgebra which we can embed in @xmath81 , i.e.  a coreflection of the latter for the inclusion functor @xmath82 of .",
    "adjprotocol the assignment @xmath83 & coh(\\gamma)}$ ] mapping any @xmath11-proto - coalgebra to the object of coherent elements in it , determines a right adjoint @xmath84 to the functor .",
    "consider a proto - coalgebra and build the object @xmath80 of coherent elements in @xmath7 . because any coherent element @xmath85 is also branching",
    ", we can find a ( necessarily unique ) pair @xmath4 such that @xmath86 . by defining @xmath87",
    "we equip @xmath80 with a @xmath11-coalgebra structure ( notice that , @xmath72 being coherent , so are the elements in the image of @xmath88 ) .",
    "the coalgebra @xmath89 clearly fits in a commutative diagram    let now @xmath90 be any other @xmath11-coalgebra .",
    "then , given a coalgebra morphism the pair @xmath91 clearly determines a proto - coalgebra morphism from @xmath92 to @xmath81 .",
    "conversely , any proto - coalgebra morphism has the property that @xmath93 is branching for any @xmath94 .",
    "using an opportune extension to proto - coalgebras of the morphism @xmath45 described in above , one can then easily check that elements in the image of @xmath23 are coherent .",
    "hence , @xmath23 factors through the object @xmath80 , inducing a coalgebra morphism from @xmath90 to @xmath89 .",
    "it is now easy to check that the two constructions are mutually inverse , thereby describing the desired adjunction .",
    "a particular subcategory of proto - coalgebras arises when we have another endofunctor @xmath95 on and an injective natural transformation @xmath96&f}$ ] . in this case",
    ", any @xmath95-coalgebra has an obvious @xmath11-proto - coalgebra associated to it , namely @xmath97 .",
    "the assignment @xmath98 determines a functor , which is clearly faithful .",
    "restradjprotocol the adjunction @xmath99 of restricts to an adjunction @xmath100 , where takes to @xmath101 .",
    "consider a @xmath11-coalgebra @xmath102 and an @xmath95-coalgebra @xmath103 .",
    "then , a simple diagram chase , using the naturality of @xmath57 , shows that @xmath95-coalgebra morphisms from @xmath104 to @xmath103 correspond bijectively to morphisms of proto - coalgebras from @xmath105 to @xmath106 , hence to @xmath11-coalgebra homomorphisms from @xmath102 to @xmath107 , by .",
    "the crucial point of the proof that coinductive pretoposes are closed under the various constructions we are going to consider , will always be that of showing existence of m - types .",
    "the machinery to do so will be set up in this section .",
    "traditionally , one can recover non - well - founded trees from well - founded ones , whenever the signature has one specified constant .",
    "in fact , the constant allows for the definition of truncation functions , which cut a tree at a certain depth and replace all the term constructors at that level by that specified constant .",
    "the way to recover non - well - founded trees is then to consider sequences of trees @xmath108 such that each @xmath109 is the truncation at depth @xmath79 of @xmath110 for all @xmath111 .",
    "each such sequence is viewed as the sequence of approximations of a given tree .    in our context",
    ", we call a map _ pointed _ , when the signature it represents has a specified constant symbol , i.e.  if there exists a global element such that the following is a pullback :    the next two statements make clear that , instead of starting with well - founded trees , i.e.  with the w - type for @xmath10 , we can build these approximations from any fixed point of @xmath11",
    ".    mtypforpointedf if for some pointed @xmath10 in , @xmath11 has a fixed point ( that is , a ( co)algebra for which the structure map is an isomorphism ) , then it also has a final coalgebra .",
    "assume @xmath7 is an algebra whose structure map is an isomorphism .",
    "observe , first of all , that @xmath7 has a global element @xmath112 namely @xmath113 , where @xmath114 is the point of @xmath10 and @xmath88 is the unique map from @xmath115 to @xmath7 .",
    "define , by induction , the following truncation functions : @xmath116    using these maps , we can define the object @xmath117 , consisting of all sequences @xmath118 with the property : @xmath119    on @xmath117 , we define a @xmath11-coalgebra structure as follows . given a sequence @xmath120 , observe that @xmath121 is independent of @xmath79 and is some element @xmath122 .",
    "hence , each @xmath123 is of the form @xmath124 for some , and we define by putting @xmath125 for every @xmath126 ; then @xmath127 .",
    "thus , @xmath117 has the structure of a @xmath11-coalgebra , and we claim it is the terminal one .",
    "to show this , given another coalgebra , we wish to define a map of coalgebras .",
    "this means defining maps for every @xmath128 , with the property that @xmath129 for all @xmath130 .",
    "intuitively , @xmath131 maps a state of @xmath48 to its `` unfolding up to level @xmath79 '' , which we can mimic in @xmath7 .",
    "formally , they are defined inductively by @xmath132    it is now easy to show , by induction on @xmath79 , that @xmath133 for all @xmath111 . for @xmath134 ,",
    "both sides of the equation become the constant map @xmath114 .",
    "supposing the equation holds for a fixed @xmath79 and any @xmath111 , then for @xmath135 and any @xmath136 we have @xmath137 we leave to the reader the verification that @xmath138 is the unique @xmath11-coalgebra morphism from @xmath7 to @xmath117 .",
    "fixptimpmtype if fixed points exist in for all @xmath11 ( with @xmath10 pointed ) , then has m - types .",
    "let be a map .",
    "we freely add a point to the signature represented by @xmath10 , by considering the composite ( with the point ) .",
    "notice that the obvious pullback determines , by , a ( monic ) natural transformation ; hence , by , the functor has a right adjoint .",
    "now observe that @xmath139 has a fixed point , by assumption , hence a final coalgebra by .",
    "this will be preserved by the right adjoint of @xmath140 , hence @xmath11 has a final coalgebra .",
    "this proof gives a categorical counterpart of the standard set - theoretic construction : add a dummy constant to the signature , build infinite trees by sequences of approximations , then select the actual m - type by taking those infinite trees which involve only term constructors from the original signature .",
    "this last passage is performed by the coreflection functor of , since branching elements are trees in the m - type of @xmath141 whose root is not @xmath114 , and coherent ones are trees with no occurrence of @xmath114 at any point .    from this last theorem",
    ", we readily deduce the following result , first pointed out to us by abbott , altenkirch and ghani ( this was , in fact , one of the motivations for looking at this topic ) . here ,",
    "we call _ predicative topos _ a locally cartesian closed pretopos with w - types",
    ".    wtypesmtypes @xcite every predicative topos is a coinductive pretopos .",
    "every predicative topos has a natural number object , namely the w - type associated to the left inclusion",
    ". since the w - type associated to a ( pointed ) map @xmath10 is a fixed point for @xmath11 , also has all m - types by the previous theorem .    because , as pointed out in @xcite , an elementary topos with a natural number object has all w - types , so is a predicative topos , this also establishes ( in a very roundabout fashion ) :    @xcite any elementary topos with a natural number object has m - types .",
    "together , these corollaries provide us with a substantial class of examples of coinductive pretoposes .",
    "it is still an open question whether there is any relevant examples of a coinductive pretopos that is not a predicative topos .",
    "although is clearly helpful in proving that certain categories have m - types , it is even more so , when combined with the following observation . given any monic morphism , we can think of it as identifying branching elements in @xmath7 , giving at the same time an explicit description of their children .",
    "we can therefore form the chain @xmath142 of `` elements in @xmath7 with @xmath79 generations of children '' .",
    "the intersection of the @xmath73 ( the object of coherent elements in @xmath7 ) will then be a @xmath11-coalgebra ; in fact , a fixed point for @xmath11 .",
    "injalgimpfixpt let be a locally cartesian closed pretopos with a natural number object , and a map in it .",
    "then , any prefixed point ( i.e.  an algebra whose structure map is monic ) has a subalgebra that is a fixed point .    any prefixed point can be seen as a @xmath11-proto - coalgebra its coreflection @xmath143 , as defined in , is a @xmath11-coalgebra ( in fact , the largest ) fitting in the following commutative square : now , consider the image under of the coalgebra . the morphism of proto - coalgebras transposes through @xmath144 to a morphism , which is a right inverse of by the universal property of @xmath145 . hence , we have @xmath146 , proving that @xmath78 and @xmath147 are mutually inverse .",
    "putting together and , we get at once the following :    injalgimpmtype if in a locally cartesian closed pretopos with a natural number object we have prefixed points for every polynomial functor , then has m - types .    as an application of the techniques in this section , we present the following result , which is to be compared with the one by santocanale in @xcite . an immediate corollary of his theorem 4.5 is that m - types exist in every locally cartesian closed pretopos with with a natural number object , for maps of the form where @xmath8 is a finite sum of copies of @xmath148 .",
    "notice that such an object @xmath8 has _",
    "decidable equality _",
    ", i.e.  the diagonal has a complement in the subobject lattice of @xmath149 .",
    "we extend the statement above to _ all _ maps whose codomain has decidable equality .",
    "decidableequality let be a locally cartesian closed pretopos with a natural number object , and a morphism in .",
    "if @xmath8 has decidable equality , then the m - type for @xmath10 exists .    without loss of generality , we may assume that @xmath10 is pointed ; in fact , if we replace @xmath8 by @xmath150 and @xmath10 by @xmath141 as in , then @xmath151 also has decidable equality , and the existence of an m - type for the composite @xmath141 implies that of an m - type for @xmath10 ( see the proof of ) .",
    "then , by and , it is enough to show that @xmath11 has a prefixed point .",
    "let @xmath152 be the object of all finite sequences of the form @xmath153 where @xmath154 for all @xmath54 .",
    "( like paths in a coalgebra , this object @xmath152 can be constructed using the internal logic of . ) now , let @xmath155 be the object of all decidable subobjects of @xmath152 ( these can be considered as functions @xmath156 ) . define the map taking a pair @xmath157 to the subobject @xmath158 of @xmath152 defined by the following clauses :    1 .   @xmath159 iff @xmath160 .",
    "2 .   @xmath161 iff @xmath162 and @xmath163 .",
    "( here , @xmath164 is the symbol for concatenation . )",
    "@xmath158 is obviously decidable , so @xmath57 is well - defined . to see that it is monic , suppose @xmath165 and @xmath166 are equal",
    "then , @xmath167 and , for every @xmath126 and @xmath168 , @xmath169 so @xmath170 and @xmath57 is monic . hence , @xmath171 is a prefixed point for @xmath11 and we are finished .",
    "decidableelements to obtain the m - type for @xmath10 from @xmath155 , one should first deduce a fixed point @xmath172 from it , as in .",
    "this means selecting the coherent elements of @xmath155 , and these turn out to be those decidable subobjects @xmath158 of @xmath152 satisfying the following properties :    1 .",
    "@xmath173 for a unique @xmath174 ; 2 .   if @xmath175 , then there exists a unique @xmath176 for any @xmath177 such that @xmath178 .",
    "now , we should turn this fixed point into the m - type for @xmath10 ( as in ) , but this step is redundant , since our choice of @xmath155 is such that @xmath172 already is the desired m - type .",
    "we start by considering preservation of the coinductive pretopos structure under slicing .",
    "let @xmath82 be an object in a locally cartesian closed pretopos with a natural number object .",
    "then , it is well - known that the slice category @xmath179 has again the same structure , and the reindexing functor for any map in preserves it .",
    "so , we can focus on showing the existence of m - types in @xmath179 and their preservation under reindexing .",
    "we shall first concentrate on the existence , proving a `` local existence '' result , from which we derive a global statement .",
    "then , we shall investigate the action of the reindexing functors .",
    "let us consider a map in @xmath179 .",
    "we shall denote by @xmath11 the polynomial functor determined by @xmath10 ( or , more precisely , by @xmath180 ) in , and by @xmath181 the polynomial endofunctor determined in @xmath179 .",
    "the functor can be extended to a functor ; in fact , @xmath69 lives over @xmath8 via the root map , and the composite defines the desired extension .",
    "pifsubfunctor there is an injective natural transformation of endofunctors on @xmath179 @xmath182    fix an object in @xmath179 .",
    "then , unfolding the definitions , we have @xmath183 and @xmath184 where makes @xmath8 into an object over @xmath82 .",
    "the pullback @xmath185 fits into the equaliser diagram hence @xmath186 is a map over @xmath8 , since @xmath187 .",
    "moreover , @xmath186 is monic in @xmath2 , and so is @xmath188 , thus giving the desired monomorphism , which is easily seen to live over @xmath82 .",
    "naturality is also readily checked .",
    "pifequaliser in the internal language of , the map @xmath189 realises @xmath190 as the subobject of @xmath3 consisting of those pairs @xmath191 such that for all @xmath192 it holds @xmath193 . in other words , @xmath194 is the equaliser = 1em where @xmath195 maps @xmath5 to @xmath196 .",
    "if we think of the elements of @xmath8 as term constructors , this is just saying that @xmath197 applies each @xmath6 just to elements of @xmath7 which sit in the same fibre over @xmath82 .    using the @xmath194 of , we can build an m - type for @xmath10 in @xmath179 , whenever @xmath27 exists in .",
    "localmtypeslice let be a locally cartesian closed pretopos with a natural number object and @xmath82 an object in .",
    "consider a map over @xmath82 , such that the functor has a final coalgebra .",
    "then , @xmath10 has an m - type in @xmath179 .",
    "let be the m - type associated to @xmath10 in .",
    "@xmath27 can be considered as an object over @xmath82 , by taking the composite @xmath198 of the root map with the map , and",
    "@xmath199 then becomes the final @xmath200-coalgebra , as one can easily check .",
    "the adjunction determined by the natural transformation as in takes the final @xmath200-coalgebra @xmath199 to its coreflection @xmath201 , and because right adjoints preserve limits , this is the final @xmath181-coalgebra .",
    "the injective natural transformation @xmath194 of identifies branching elements in @xmath200 as those obtained by applying a term constructor in @xmath8 to elements living in its same fibre over @xmath82 , as discussed in .    the coreflection process used to build @xmath201 out of the m - type @xmath199 , helps understanding which elements of the latter do actually belong to the former .",
    "trees in @xmath201 are coherent for the notion of branching determined by @xmath181 , hence , not only the children of the root node live in its same fibre over @xmath82 , but all the children of the children do too , and so on for any node in the tree . in other words , @xmath201 consists of those trees in @xmath27 all nodes of which live in the same fibre over @xmath82 . as such",
    ", the object @xmath201 can also be described as the equaliser = 1em where @xmath202 is the map coinductively defined as @xmath203    as an immediate consequence of , we get the following :    for any given object @xmath82 of a coinductive pretopos , the slice category @xmath179 is again a coinductive pretopos .",
    "this last result could have also been proved directly by combining and . however , the proof of shows that the construction is actually simpler .",
    "more specifically , notice that , in this case , we obtain the m - type for a map @xmath10 directly after the coreflection , and we do not need to add any dummy variable , nor to build sequences of approximations .",
    "we now look at the reindexing functors .",
    "suppose we are given a morphism in , and consider the induced functor , with left adjoint @xmath204 ( we shall denote by @xmath205 the unit of this adjunction ) . recall that the reindexing functors , in this case , do always preserve the cartesian closed structure of each slice .",
    "now , consider a morphism @xmath10 as in , inducing a map in @xmath206 and a pullback square    by the beck - chevalley property for this square , and the fact that @xmath207 preserves exponentials , we then have , for any object @xmath208 in @xmath179 , @xmath209 let us write for the isomorphism , and @xmath210 for its transpose under the adjunction @xmath211 .    given any coalgebra in @xmath179 , we can map it to a coalgebra @xmath212 this determines a functor .",
    "now , given a coalgebra in @xmath206 , a morphism determines a commutative square which transposes under @xmath211 to the square @xmath213_{\\sigma_x\\delta } \\ar[rr]^-{\\widehat{\\phi } } & &       x \\ar[d]^{\\gamma } \\\\",
    "\\sigma_xp_{x^{*}f}^jy \\ar[r]_-{\\sigma_xp_{x^{*}f}^j\\phi } &      \\sigma_xp_{x^{*}f}^jx^{*}x \\ar[r]_-{\\widehat{\\theta } } & p_f^ix . } \\ ] ] by simple diagram chasing , one shows that @xmath214 hence , the functor assigning to @xmath215 the composite @xmath216 ^ -{\\sigma_x\\delta } &       \\sigma_xp_{x^*\\!f}^jy \\ar[rr]^-{\\sigma_xp_{x^*\\!f}^j\\eta } & &      \\sigma_xp_{x^*\\!f}^jx^*\\sigma_xy \\ar[r]^-{\\widehat{\\theta } } &      \\sigma_xy } \\ ] ] is a left adjoint to @xmath217 .",
    "in particular , this implies that the image of the m - type @xmath218 for @xmath10 in @xmath179 , along the right adjoint @xmath217 is the final @xmath219-coalgebra in @xmath206 , i.e.@xmath220 is the m - type for @xmath221 .",
    "this proves the following .",
    "reindexing for any map in a coinductive pretopos , the reindexing functor preserves the structure of a coinductive pretopos .",
    "in this section , we turn our attention to the construction of categories of coalgebras for a cartesian comonad @xmath222 ( by _ cartesian _ we mean that @xmath217 preserves finite limits ) . as for the slicing case , we already know that most of the structure of a coinductive pretopos is preserved by taking coalgebras for @xmath217 :    if is a locally cartesian closed pretopos with natural number object , then so is @xmath223 for a cartesian comonad @xmath224 on .",
    "theorem 4.2.1 on page 173 of @xcite gives us that @xmath225 is cartesian , in fact locally cartesian closed , and that it has a natural number object .",
    "the two additional requirements of having finite disjoint sums and being exact are easily verified , since the forgetful functor creates finite limits .    given a morphism @xmath10 of @xmath217-coalgebras",
    ", this determines a polynomial functor , while its underlying map @xmath226 determines the endofunctor @xmath227 on .",
    "the two are related as follows :    pfsubcoalg let be a map of @xmath217-coalgebras .",
    "then , there is an injective natural transformation whose mate under the adjunction @xmath228 we shall denote by    in order to prove this result , we first need to introduce a couple of lemmas ( the proof of the second can also be found in @xcite ) .",
    "expcoalg let be a cartesian closed category and @xmath217 be a cartesian comonad on it .",
    "then , for any object @xmath7 in and any coalgebra @xmath48 , the exponential @xmath229 exists and is equal to @xmath230",
    ".    the forgetful functor is left adjoint to the cofree coalgebra functor . moreover ,",
    "@xmath231 preserves products because it creates them ; hence , the following bijective correspondence : @xmath232    equivslices every @xmath217-coalgebra @xmath233 in @xmath223 , determines a cartesian comonad @xmath234 on @xmath2 and an isomorphism between @xmath235 and @xmath236 which respects the forgetful functors and .",
    "the comonad @xmath234 is computed on an object @xmath237 in @xmath2 by taking the following pullback : then , there is a natural one - to - one correspondence between the dotted arrows over @xmath8 and @xmath238 in it is now easy to show that if @xmath239 is a @xmath234-coalgebra , then the corresponding @xmath240 is a @xmath217-coalgebra , and vice versa .",
    "hence , the isomorphism .",
    "moreover , @xmath241 therefore , the action of the forgetful functors is respected .",
    "note that both horizontal arrows in the pullback are monic , because @xmath242 is a retraction of the @xmath217-coalgebra @xmath23 .",
    "recall that @xmath243 is the source of the exponential @xmath244 in the category @xmath245 .",
    "however , this can be more easily computed in the category of @xmath234-coalgebras .",
    "first of all , since @xmath217 preserves products , the object @xmath246 corresponds , through the isomorphism of , to @xmath247 .",
    "then , using , the exponential takes the form @xmath248 , and fits in the following pullback square , which is an instance of : now notice that the top - right entry of the diagram is exactly @xmath249 , hence the map @xmath194 therein defines the @xmath7-th component of the desired natural transformation . @xmath250 +    we are now ready to formulate a local existence result for m - types in categories of coalgebras .",
    "localmtypecoalg let be a map of @xmath217-coalgebras .",
    "if the underlying map @xmath226 has an m - type in , then the functor has a final coalgebra in @xmath223 .",
    "the natural transformation @xmath194 of allows us to turn any @xmath227-coalgebra into a @xmath11-proto - coalgebra .",
    "in particular , for the m - type in , we get the proto - coalgebra whose coreflection @xmath251 is final in . to see this ,",
    "consider another coalgebra @xmath33 ( therefore , @xmath7 is a @xmath217-coalgebra , and is a homomorphism of @xmath217-coalgebras ) . to give a morphism of @xmath11-coalgebras from @xmath33 to @xmath252",
    "is the same , through @xmath144 , as giving a map in @xmath223 which is a morphism of @xmath11-proto - coalgebras , i.e. that makes the following commute : this transposes , through @xmath228 , to the following diagram in , where @xmath253 is the natural transformation defined in : but finality of @xmath117 implies that there is precisely one such @xmath254 for any coalgebra @xmath33 , hence finality is proved .",
    "mtypescoalg if is a coinductive pretopos and @xmath255 is a cartesian comonad on , then the category @xmath223 of ( eilenberg - moore ) coalgebras for @xmath217 is again a coinductive pretopos .",
    "notice that could also be deduced by , in conjunction with .",
    "however , analogously to what happens in the slicing case , shows that we do not need to perform the whole construction , since the coreflection step gives directly the final coalgebra .",
    "in particular , this result shows stability of coinductive pretoposes under the glueing construction , since this is a special case of taking coalgebras for a cartesian comonad ( see @xcite ) .",
    "in this section , we turn our attention to formation of sheaves for an internal site in a coinductive pretopos .",
    "our aim is to show that the resulting category is again a coinductive pretopos .",
    "the structure of the proof mimics the one for w - types in @xcite , but we now make use of the finality of m - types and , implicitly , of the language of paths .",
    "we start by considering an internal category  in a coinductive pretopos , with object of objects @xmath256 and domain and codomain morphisms indicated by , respectively .",
    "we shall assume  to have pullbacks and to come equipped with a collection @xmath257 of covering families , satisfying the axioms of a site ( * ? ? ?",
    "* def.2 p.111 ) .",
    "notice that the category of presheaves is then the category of coalgebras for a cartesian comonad on the slice category @xmath258 ( see for instance ( * ? ? ?",
    "* example a.4.2.4  ( @xmath259 ) ) ) . by the results of the previous sections ,",
    "we get at once    the presheaf category is a coinductive pretopos .    before proceeding to the sheaf case",
    ", we find it useful to have a closer look at the construction of m - types for categories of presheaves .",
    "this will provide a concrete description of the m - types , and at the same time set some notation about polynomial functors in presheaf ( and sheaf ) categories .",
    "first of all , we need to introduce the functor which takes a presheaf to its `` underlying object '' @xmath260 .",
    "this is just the composite of the forgetful functor with .",
    "let be a morphism of presheaves .",
    "then , the `` fibre '' @xmath261 of @xmath10 over @xmath262 for an object @xmath263 in  is a presheaf , whose action on @xmath264 is described in the internal language of as @xmath265 and restriction along a morphism is defined as @xmath266    the image @xmath3 of a presheaf @xmath7 is defined on an object @xmath263 of  as    pfpresh p_f(x)(c)=\\{(a , t)a(c ) , } ,    where @xmath88 is a presheaf morphism .",
    "restriction along a morphism is defined as @xmath267 where @xmath268 .",
    "but the presheaf morphism @xmath10 also induces a map @xmath269 whose fibre over @xmath270 is precisely @xmath271 .",
    "this induces a polynomial endofunctor on , which acts on an object @xmath48 as @xmath272 notice that we can always think of @xmath273 as the underlying object of a presheaf , whose section over @xmath263 are those elements of @xmath273 of the form @xmath274 .",
    "given a morphism for which @xmath275 , this induces a map .",
    "restriction along @xmath23 is then defined by @xmath276 .",
    "in particular , @xmath277 induces an endofunctor , which verifies the equation    pfprpsh |fx|=p_f|x|= \\{((a , c),t)a(c ) , }    for any presheaf @xmath7 on . because each morphism of presheaves @xmath278 induces a map on the underlying objects , it is clear by and that @xmath11 is a subfunctor of @xmath95 .",
    "we shall denote by @xmath57 the corresponding injective natural transformation .    by , we can then determine an m - type for @xmath10 by giving a final coalgebra for the functor @xmath95 and taking its coreflection in .",
    "the latter is readily obtained from the m - type @xmath279 for @xmath277 in . in fact , as we saw above , the object @xmath280 has a presheaf structure , and we can translate it on @xmath26 via the isomorphism @xmath281 , which then becomes a presheaf morphism . to see that it is the final @xmath95-coalgebra",
    ", it is now enough to observe that , given any other @xmath95-coalgebra , finality of @xmath26 determines a unique morphism of @xmath29-coalgebras which is easily seen to be a morphism of presheaves .",
    "we have just given a proof of the following local existence result :    consider a map in .",
    "if the induced map @xmath277 has an m - type in , then @xmath10 has an m - type in .",
    "the natural transformation @xmath57 , in this case , selects as branching only those trees @xmath282 in @xmath26 for which the map is the underlying map of a presheaf morphism .",
    "the reader who is familiar with the language of @xcite , will recognise that trees coherent for @xmath57 are those called _",
    "natural _ there .",
    "once again , it is already known that the category of sheaves for an internal site in a locally cartesian closed pretopos with a natural number object has again the same structure , so , as in the previous cases , all we need to show is that has m - types .",
    "analogously to what is done in @xcite , we get the result by showing the following .    let be a morphism of sheaves , and @xmath283 the corresponding m - type in .",
    "then , is a sheaf .",
    "the proof will work as follows .",
    "first , we shall define a presheaf @xmath284 , which is the separated presheaf associated to ( see @xcite ) .",
    "then , we will show that @xmath284 is a @xmath11-coalgebra with mediating morphism ; moreover , the unit is a coalgebra homomorphism .",
    "this will imply that @xmath285 , hence @xmath205 is mono , i.e.   is separated .",
    "existence of the glueing of a compatible family will be shown to be determined by @xmath286 , and this will prove to be a sheaf .",
    "the presheaf @xmath284 is defined on an object @xmath263 in  as @xmath287        \\mbox{the $ t_i$ 's are compatible }      \\end{array }      \\right\\}/\\sim\\ ] ] where @xmath288 if there is a common refinement of @xmath289 and @xmath290 on which the @xmath291 s and the @xmath292 s agree .",
    "more precisely , we require the existence of a covering family @xmath293 such that every @xmath294 factors as @xmath295 and @xmath296 for opportune maps @xmath297 and @xmath298 , with @xmath299 .",
    "we shall indicate the equivalence class of a pair @xmath300 by enclosing it in square brackets .    by the stability axiom for a site , a given morphism in  induces , via pullback , a restriction of a covering family @xmath289 over @xmath263 to a covering family @xmath301 as below",
    ": we can then define the restriction morphism of @xmath284 by letting    restrm+ [ \\{c_i},t_i]= [ \\{d_i},t_i_i ] .",
    "we now need to show that @xmath302 is a well - defined map and that it satisfies the functoriality properties , thus making @xmath284 into a presheaf .",
    "we shall go through this calculation in some detail , in order to illustrate the kind of arguments used .",
    "analogous forms of reasoning will occur several times in this proof .",
    "all the successive details will then be omitted .",
    "consider the two related pairs @xmath303 it is clearly enough to consider the case where the covering family @xmath290 is a refinement of the family @xmath289 , say via maps @xmath304 , in such a way that for each @xmath194 there is a @xmath253 with @xmath305 . pulling back the families @xmath289 and @xmath290 along @xmath306",
    ", we get covering families @xmath301 and @xmath307 as below : the maps @xmath304 pull back to maps @xmath308 such that @xmath309 , hence @xmath307 is a refinement of @xmath301 .",
    "moreover , we have @xmath310 whence @xmath311=[\\{d'_j\\},s_j\\cdot\\beta'_j]$ ] .",
    "this proves that restriction along @xmath306 is well - defined .",
    "now we show that this restriction operation defines a presheaf structure on @xmath284 .",
    "preservation of identities is easily verified . as for composition , consider an element @xmath312 $ ] in @xmath313 and composable maps @xmath314 then , we want to show that    dotbetapresh ( \\{e_i},t_i_i)~(\\{e_i},t_i_i_i ) ,    where the maps @xmath315 , @xmath316 , @xmath317 , @xmath318 and @xmath319 arise as shown by the pullback diagrams below : by pullback - pasting , there are obvious induced isomorphisms such that @xmath320 and @xmath321 . therefore , the family @xmath322 is a refinement of @xmath323 ; moreover , @xmath324 which proves .",
    "so , @xmath284 is a presheaf , and there is an obvious presheaf morphism , whose component on an object @xmath263 maps a tree @xmath325 to @xmath326 $ ] .",
    "equation immediately implies that @xmath205 is natural .",
    "we shall soon show that it is also a coalgebra morphism , but first we have to equip @xmath284 with a @xmath11-coalgebra structure .    for this , we need a presheaf morphism .",
    "this will associate to an element @xmath327 $ ] in @xmath313 a pair @xmath4 with @xmath6 in @xmath328 and a presheaf morphism .",
    "suppose for each @xmath194 that @xmath329 , with .",
    "then , since the @xmath291 s form a compatible family , so do the @xmath330 s , thus determining a unique amalgamation @xmath6 such that @xmath331 , because is a sheaf . in order to define the action of @xmath88 , consider an element @xmath332 in @xmath333 ( so that and @xmath334 ) .",
    "the compatible family @xmath289 restricts along @xmath306 to a compatible family @xmath301 as in , and we define @xmath335.\\ ] ] by a standard calculation ( of the kind shown above ) , it is easy to show that @xmath88 defines a presheaf morphism and that the definition of both @xmath6 and @xmath88 does not depend on the choice of the representative for @xmath95 . hence , the morphism @xmath57 is well - defined , and again by similar arguments , we can then show that it defines a presheaf morphism .",
    "so , we now have a coalgebra @xmath57 on the presheaf @xmath284 , for which it is easily checked that the presheaf morphism @xmath205 defined above is in fact a coalgebra homomorphism .",
    "moreover , there is a unique map of coalgebras , determined by the finality of .",
    "the composite @xmath336 is then a coalgebra morphism from to itself , therefore it must be the identity .",
    "in particular , this implies that @xmath205 is monic , i.e.   is separated . to complete the proof of the statement",
    ", we now need to show that every compatible family has an amalgamation .",
    "in fact , it turns out that the glueing of a family @xmath95 is determined by its image under @xmath286 .    more precisely , given a covering family @xmath337 over @xmath263 and a matching family of trees @xmath338",
    ", we want to show that @xmath339)$ ] is the amalgamation of the @xmath291 s ; that is , @xmath340 for all @xmath194 . to this end , fix an index @xmath341 , and restrict the covering family @xmath289 along the map @xmath342 as below : we then have that @xmath343)\\cdot c_{i_0 }        & = & \\widehat{m}([\\{c_i\\},t_i]\\cdot c_{i_0 } ) \\\\      & = & \\widehat{m}([\\{d_i\\},t_i\\cdot c'_i ] )    \\end{aligned}\\ ] ] but clearly , the covering family @xmath301 also forms a refinement of @xmath344 , and since the @xmath291 s are a matching family ( hence , in particular , for the pullbacks in we have that @xmath345 ) , it follows at once that @xmath346 whence , because @xmath347 , @xmath348)\\cdot c_{i_0 }      = \\widehat{m}([\\{\\id_{c_{i_0}}\\},t_{i_0 } ] )      = \\widehat{m}\\eta(t_{i_0 } ) = t_{i_0}.\\ ] ]    [ exvreg ] notice that this is the only proof we have given where we make use of the exactness of coinductive pretoposes . in any other argument regularity would have been enough .    piecing this result together with the remarks at the beginning of this section , we get at once the following :    let be a coinductive pretopos and @xmath349 an internal site in . then , the category of sheaves over  in is again a coinductive pretopos .",
    "the original motivation for writing this paper was to set the categorical framework in which to work with non - well - founded trees .",
    "the natural continuation of this research is two - folded , with applications to set theory and type theory .",
    "the reason to expect such relationships to exist is the well - established correspondence between categories with w - types , martin - lf type theory , and aczel s constructive set theory ( the formal system @xmath350 ) ( see for example @xcite ) .",
    "we suggest that this correspondence should have a counterpart in the non - well - founded world , between coinductive pretoposes , martin - lf type theory with coinductive types , and aczel s non - well - founded set theory ( @xmath351 ) .",
    "this would provide the ground for successive research in various directions .",
    "reveals that there are links between the well - founded and the non - well - founded world .",
    "in particular , it shows that within martin - lf type theory we can use well - founded types to model certain coinductive types .",
    "an analogous connection arises from the work of lindstrm @xcite , where it is shown how to construct non - well - founded sets in martin - lf type theory . making the correspondence above clear ,",
    "should bring the two approaches together .",
    "peter aczel .",
    "the type theoretic interpretation of constructive set theory . in _ logic colloquium 77 ( proc .",
    "conf . , wrocaw , 1977 ) _ , volume  96 of _ stud .",
    "logic foundations math .",
    "_ , pages 5566 .",
    "north - holland , 1978 .",
    "peter aczel and nax mendler . a final coalgebra theorem . in _",
    "category theory and computer science ( manchester , 1989 ) _ , volume 389 of _ lecture notes in comput .",
    "_ , pages 357365 .",
    "springer , berlin , 1989 .",
    "peter johnstone , john power , toru tsujishita , hiroshi watanabe , and james worrell . the structure of categories of coalgebras .",
    ", 260(1 - 2):87117 , 2001 .",
    "coalgebraic methods in computer science ( lisbon , 1998 ) .",
    "luigi santocanale .",
    "logical construction of final coalgebras . in h.",
    "peter gumm , editor , _ proc .  of 6th wksh .  on coalgebraic methods in computer science , cmcs03 , warsaw , 5 - 6 apr",
    "2003 _ , volume 82(1 ) of _ electronic notes in theoretical computer science_. elsevier , amsterdam , 2003 .",
    "myles tierney .",
    "sheaf theory and the continuum hypothesis . in _",
    "toposes , algebraic geometry and logic ( conf . , dalhousie univ . ,",
    "halifax , n.s . , 1971 )",
    "_ , pages 1342 .",
    "lecture notes in math .",
    ", vol . 274 .",
    "springer , berlin , 1972 ."
  ],
  "abstract_text": [
    "<S> non - well - founded trees are used in mathematics and computer science , for modelling non - well - founded sets , as well as non - terminating processes or infinite data - structures . </S>",
    "<S> categorically , they arise as final coalgebras for polynomial endofunctors , which we call m - types . in order to reason about trees , </S>",
    "<S> we need the notion of path , which can be formalised in the internal logic of any locally cartesian closed pretopos with a natural number object . in such categories , </S>",
    "<S> we derive existence results about m - types , leading to stability of locally cartesian closed pretoposes with a natural number object and m - types under slicing , formation of coalgebras ( for a cartesian comonad ) , and sheaves for an internal site . </S>"
  ]
}