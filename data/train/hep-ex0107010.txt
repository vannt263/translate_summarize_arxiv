{
  "article_text": [
    "of 920gev protons and 27.6gev electrons ( positrons ) are studied with the hera accelerator at desy .",
    "the h1 experiment is situated at one of the two interaction points , where electrons and protons collide at a frequency of 10.4mhz .",
    "the h1 detector is described in detail elsewhere @xcite .",
    "electron - proton interactions are triggered by a four - stage trigger ( l1  l4 ) , which reduces the data rate to about 10hz .",
    "the first level ( l1 ) is a dead time free hardware trigger with a decision time of 2.3@xmath0s . at this step , trigger information is fully pipelined and the trigger rate is reduced to about 1khz .",
    "a refinement of the l1 decision is performed by l2 within 23@xmath0s , which reduces the trigger rate to about 200hz . after a positive trigger decision on l2 ,",
    "readout is started , which takes about 1ms . during this time , a negative trigger decision on l3 can abort the readout of the detector . in the case of a negative l3 trigger decision aborting the detector readout , a considerable reduction of dead time can only be achieved if the l3 decision time is less than 100@xmath0s . after finishing or aborting readout the trigger pipelining is restarted .",
    "finally the data are passed to a processor farm ( l4 ) , where events are fully reconstructed within 100ms .    during an extended shutdown in 2000/2001",
    "the hera accelerator is upgraded to gain sensitivity for rare processes by delivering a fivefold increase in luminosity .",
    "consequently higher interaction and background rates are expected .",
    "events with high momentum transfers @xmath1 which are triggered by calorimeter based signals can still be triggered with high efficiency after the upgrade .",
    "for exclusive final states at low @xmath2 , where the background rate is largest , an upgrade of the existing track trigger is necessary .",
    "therefore , the h1 collaboration decided to build a fast track trigger ( ftt ) @xcite , which provides trigger signals to the trigger levels",
    "the ftt is able to reconstruct tracks of charged particles with high resolution and to find particle resonances .",
    "a multifunctional processing board has been developed by eth zrich in collaboration with supercomputing systems ( scs ) @xcite to solve various different processing tasks at l1 and l2 .",
    "after shortly summarizing the ftt system a detailed description is given about this multifunctional processing board .",
    "the input of the ftt is based on charge and time information of the inner central jet chamber ( cjc1 ) with 24  radial wire layers and the outer central jet chamber ( cjc2 ) with 32  radial wire layers .",
    "trigger signals are built from 3  groups of 3  selected wires each in cjc1 and one group in cjc2 as shown in fig .",
    "[ cjc ] .",
    "-@xmath3 view of a charged particle track in the central jet chambers ( cjcs ) .",
    "a track segment is defined by a group of three layers of hit wires .",
    "there are in total four of such trigger groups .",
    "a track segment is described by the azimuth  @xmath4 and the curvature  @xmath5.,title=\"fig : \" ] + -@xmath3 view of a charged particle track in the central jet chambers ( cjcs ) .",
    "a track segment is defined by a group of three layers of hit wires .",
    "there are in total four of such trigger groups .",
    "a track segment is described by the azimuth  @xmath4 and the curvature  @xmath5.,title=\"fig : \" ] +    a track segment is defined by a three layer coincidence matching a predefined hit pattern of vertex constrained tracks .",
    "track segments are described by the curvature @xmath6 , the azimuth  @xmath4 and the declination  @xmath7 .",
    "the main task of l1 is to find track segments and to make a trigger decision based on coarsely linked tracks . at l2",
    "the track segments are linked to tracks .",
    "the accuracy of track parameters is improved by a 3-dimensional track fit . after a positive trigger decision",
    ", these track parameters are passed to the l3 processor farm , where the event is fully reconstructed also taking into account other detector information .",
    "the ftt can process up to 48  tracks per event , which is fully sufficient for 98% of all events of interest .",
    "analog cjc signals of the existing readout system are tapped by adapter cards and sent to the front end modules ( fem ) , see fig .",
    "[ fttoverview ] .",
    "+   +    signals are digitized at 80mhz using an 8-bit linear fadc and are fed into shift registers .",
    "a farm of field programmable gate arrays ( fpgas ) from altera ( apex 20k400e ) searches for predefined track segment hit patterns .",
    "track segment parameters are looked up from a list of valid masks stored in srams .",
    "finally , they are sent via merger cards to the linker cards for track linking . for a fast trigger decision",
    "coarse linking is performed on the l1 linker card while the l2 linker card exploits full resolution .      on the l2 linker card ,",
    "track segments from the four trigger groups are linked to tracks exploiting full resolution .",
    "the track linking is performed by a fast and highly parallel algorithm which searches for matching track segment parameters .",
    "track segments assigned to single particle tracks are sent to a total of 6 fitter cards , where digital signal processors ( dsps ) perform a 3-dimensional helix fit . after fitting ,",
    "track parameters are sent to the l2 decider card , where a trigger decision is formed based on kinematical or topological track quantities .",
    "a processor farm at l3 will reconstruct the event and search for particle resonances also in high multiplicity events .",
    "the farm consists of up to 16  commercial cpu vme boards ( mvme 2400 ) equipped with a 450mhz powerpc750 .",
    "studies have shown that one processor board has sufficient processing power to search for specific final state topologies or decay channels within 100@xmath0s .",
    "for the integration of the various different processing tasks of the ftt into hardware a multifunctional processing board has been developed by eth zrich in collaboration with scs .",
    "this board may function as a l1 and a l2 linker card , as a fitter card and as a l2 decision card .",
    "the same board is also used as a merger card to connect the large number of front end modules of the l1 system to the two single l1 and l2 linker cards .",
    "the multiple use of the same board design for different tasks considerably reduces development and production costs . depending on the main purpose of the board",
    ", expensive components like high density circuits ( fpga , dsp ) may be omitted if not required .",
    "the multifunctional processor board is a compound of a main board equipped with four dsps and two large fpgas and up to four i / o interconnector cards ( so - called `` piggyback '' cards ) which serve as fast i / o interface between multifunctional processor boards .",
    "two of them are plugged on the top and two are plugged on the bottom of the main board . a block diagram of the multifunctional board is shown in fig .  [ l2block ] .",
    "+   +      the main board is a 14-layer pcb board fitting in a double height ( 6u ) vme crate . for vme access , data distribution and monitoring via the backplane ,",
    "the board is equipped with a din96 vme connector and a user - defined , metric connector .",
    "the core of the l2 main board is formed by the four floating - point dsps ( texas instruments tms320c6701 ) @xcite and a large fpga ( altera apex 20k600e ) @xcite .",
    "mathematical algorithms , like track fitting , run on dsps while the large fpga is predestined for complex and associative logic like the linking of track segments .",
    "in addition , the fpga serves as an i / o data controller with bidirectional connections to all fast i / o interconnector cards and is also connected to a second fpga ( altera apex 20k200e ) which serves as controller for the four dsps . to extend the internal 64 kb dsp ram for memory extensive applications ( e.g. lookup table ) an external sram of 512 kb is connected to each of the dsps .",
    "a third , smaller fpga ( altera flex epf10k30a ) is used as a vme interface .",
    "data controller , dsp controller , vme interface and a dual ported ram ( dpram ) are connected to a local bus . at startup ,",
    "the dsp code is loaded via the vme interface into the dpram , from which each dsp can download its own program code by using a switch .",
    "since multi - processor busses are poorly supported by the tms320c6701 , each of them is connected to the controller via an individual bus .      for data transmission between different multifunctional processing boards",
    "a high - speed lvds channel link is used .",
    "this 48-bit wide link runs at about 104mhz thus providing a total data throughput of @xmath8 .",
    "the i / o cards are equipped with a lvds transmitter ( national ds90c387 ) and a lvds receiver ( national ds90cf388 )  @xcite . a small fpga ( altera apex 20k60e ) serves as controller and data switch between the lvds input , the lvds output and the bidirectional connection to the main board .",
    "the main tasks of the fpga are the buffering of data coming from the different inputs and the data distribution .",
    "the priorities for the receiving and the sending of data can be programmed in a flexible way depending on the application .",
    "a few piggyback cards have the transmitter replaced by a second receiver .",
    "this is required for the merger cards since in total six lvds input streams per merger board are needed .",
    "both fpgas , the data controller and the dsp controller , run at a frequency of 104mhz .",
    "this frequency can either be generated from a local oscillator or be derived by clock multiplication from the 10.4mhz hera clock signal which has the frequency of electron - proton collisions .",
    "the 104mhz clock is also conducted to the i / o interconnector card and may be used for data transmission by the lvds channel link . in both cases",
    "it is essential to have a high - quality clock with small jitter because a 7-fold multiplexing of up to 728mhz is used internally by the lvds channel link and even a small jitter would impair the data transfer quality .",
    "there are independent clock domains from the receiving side of the lvds channel link running asynchronously to the local mainboard clock at 104mhz .",
    "incoming signals are buffered and synchronised in an asynchronous fifo on the i / o interconnector card .",
    "another clock domain of 41.5mhz is required for the dsps .",
    "this clock is generated by a local oscillator .",
    "the required frequency of 166mhz for the dsp is derived by an internal phase - locked loop in the dsp .",
    "the last clock domain is formed by the local bus running at 10.4mhz .",
    "all devices of the main board use the lvttl standard of 3.3v with exception of some vme devices which are operated at 5v ttl .",
    "the core of the apex fpgas needs 1.8v .",
    "these voltages are supplied via the customized backplane .",
    "the 1.9v for the dsp core is generated directly on the main board from the 3.3v .",
    "the data transfer between different multifunctional processor boards is realized by a messaging system which is based on routing tables .",
    "dynamic routing tables increase the flexibility of the ftt system and ease maintenance . in the case of an extension or modification of the system ,",
    "the programming of the remaining cards can be kept and only the routing tables have to be modified . in that scheme every programmable component ( fpga , dsp ) is able to send , receive or forward a message to other components . in the current ftt implementation ( fig .",
    "[ fttoverview ] ) about 500 different messages are needed , each having a so - called channel number assigned .",
    "the channel number is represented by the first 9 bits of a 48-bit word .",
    "the remaining bits may be used to transmit data , i.e. track segment information , as well as control words .",
    "a routing table in every programmable component is used as a lookup to send messages to an intermediate or final destination .",
    "individual routing tables are generated for all programmable components so that transfer delays of messages are minimized .",
    "the routing tables are implemented in internal rams and contain a dynamic and a static partition , the latter being loaded when configuring the board .",
    "the static partition already allows a minimal communication between boards and the vme interface . afterwards the dynamic partition of the routing table is written during startup .",
    "in the following the application - specific software of the multifunctional processing boards is discussed with emphasis on the track finding and track fitting algorithms to be implemented in the programmable devices .",
    "the main purpose of the merger cards is the collection of track segments from the six different fem inputs , the multiplexing of data , and the forwarding to one of the two linker cards ( l1/l2 ) .",
    "the user code is rather simple and is not further discussed here . since the main task is the buffering of data in fifos , the equipment of the mainboard with dsps is not required .",
    "the main purpose of this card is the fast track linking and triggering for l1 .",
    "input data to the l1 linker card are track segments from the four radial trigger groups in the cjc as identified by the 30 fems and are forwarded by the merger cards .",
    "the track segments are filled into four corresponding , coarsely binned @xmath9 histograms .",
    "the histograms are stored in registers of the large data controller fpga .",
    "track segment matches are defined by a coincidence of at least two out of four trigger groups .",
    "the search is performed in all bins of the histogram simultaneously .",
    "a peak finder algorithm takes into account track segments from adjacent bins as well .",
    "finally the track multiplicities above momentum thresholds and the track topology ( e.g. two back - to - back tracks ) are used to form a trigger decision on l1 .",
    "the complete linking algorithm written in vhdl requires about 10000 fpga logic cells using a histogram of size @xmath10 bins .",
    "a dsp is not used here .",
    "in contrast to the track linking at l1 , where time requirements are most stringent , the main constraint of the track linking at l2 comes from the high - resolution requirement",
    ". the track segment storage and linking is schematically shown in figure  [ l2linker ] .",
    "+   +    similar to l1 , the algorithm for track linking is implemented in the data controller fpga . however ,",
    "in contrast to the l1 linker card , received track segments are written into arrays ( containing the @xmath9 locations in a `` virtual '' histogram ) rather than stored directly into a real histogram .",
    "the virtual histogram is divided into 40  bins of @xmath5 and 640  bins of @xmath4 and has a much higher resolution compared to l1 .",
    "it is obvious that the standard way of filling a histogram having about 50000 bins is not appropriate for track segment storage and search . to solve that problem so - called content addressable memories ( cams )",
    "are used .",
    "a cam can be regarded as inverse ram where the input patterns are compared with pre - loaded values and matches are indicated by the corresponding address location in a single step . in particular , the combination of a cam with a tagged ram ( one - to - one correspondence of addresses ) allows a simple and condensed implementation of a large lookup table .",
    "that combination makes it possible in a very efficient way to store the non - zero entries of a large histogram with 50000 bins and to search for specific entries in a single step without the need for running a loop and sequential processing . this combined cam and ram functionality , which is ideal for the implementation of any search task in general ,",
    "can be embedded very efficiently in the apex 20ke family of fpgas .    in our example",
    "the cam is filled with the addresses of the track segment location in the histogram , the @xmath9 bin .",
    "additional information , i.e. track segment parameters , are stored in the tagged ram .",
    "in addition , the track segment locations are filled into four so - called lists of seeds which correspond to the four different trigger groups . by running a loop the list of seeds is worked through .",
    "the track segment locations are read and presented to the cams . if track segments with identical histogram locations are found in at least two trigger groups , a track segment link is defined .    in order to take into account migration effects between bins due to the limited detector resolution ,",
    "bins adjacent to the seed location are also considered . the precise peak position of a cluster of linked track segments",
    "is found by running a peak finder algorithm which is based on a @xmath11 sliding window and maximizes the number of matched track segments . to be able to perform the two tasks ( track segment search and peak finding ) in a highly parallel manner several cams are installed per trigger group . in total 100 cams",
    "are implemented such that all track segments in a @xmath12 array around a track segment seed in each of the four radial layers can be searched through in parallel .",
    "the peak finder algorithm is highly parallel and basically needs only one step to define a good track link .    the complete algorithm ( i.e. the receiving of data , the filling of the cams and rams , the cluster finding around seeds and the peak finding ) is fully pipelined and runs at 104mhz .",
    "the linker card is designed to link up to 48 tracks , which are afterwards distributed to a system of six daisy - chained fitter cards .",
    "the fitter cards perform helix fits of tracks to gain precision .",
    "a single dsp on a fitter card starts as soon as all linked track segments of the same track have arrived .",
    "in a first step , a non - iterative circle fit @xcite in the @xmath13-@xmath4 plane is performed by constraining the track to originate in @xmath14 and @xmath3 from the primary vertex position of the electron - proton collision .",
    "the circle fit takes about 330 clock cycles . in a second step ,",
    "a fit in the @xmath13-@xmath15 plane is the radius and @xmath15 is the coordinate along the beam axis ] is performed , which determines the declination of the track and takes about 200 clock cycles .",
    "the primary vertex position in  @xmath15 is provided by the central proportional chamber of the h1 detector via a special interface card . after fitting",
    ", the final track parameters are sent via the daisy - chained lvds channel link to the l2 decision card .",
    "for the ftt system it is foreseen that one dsp performs up to two track fits per event .",
    "all tracks are collected and track - based quantities are evaluated to form the l2 trigger decision .",
    "these quantities can be track multiplicities above thresholds , momentum sums or simple topological criteria ( jets ) .",
    "the reconstructed tracks are processed in the data controller fpga within the remaining about @xmath16 of the l2 latency .",
    "exclusive final states , like particle resonances , may be identified using the dsps .",
    "simulations have shown that it is possible to calculate invariant masses of all two track combinations in an event with low track multiplicity @xmath17 .",
    "a positive l2 trigger decision is sent via the user defined backplane to the h1 central trigger . in the case of a positive trigger decision",
    "all track parameters are sent to the power - pc farm of the ftt  l3 system for further event processing .",
    "the l2 latency of the h1 trigger of 19.7@xmath0s gives a strict upper limit on the ftt available time for generating a trigger decision .",
    "an overview of the estimated timing at l2 is given in table  [ tab : timing ] .",
    "all values are considered to be conservative for an event with the maximum number of 48 tracks .",
    "first tracks are expected to have finished fitting already after 8.5@xmath0s .",
    "therefore , an interleaving of tasks ( e.g. start fitting before all tracks are linked ) will considerably reduce the overall processing time .",
    ".estimation of the overall timing at l2 under the assumption that one dsp performs two track fits .",
    "an interleaving of tasks ( e.g. fitting during linking ) is not taken into account and would reduce the l2 latency . [ cols=\"<,^,^\",options=\"header \" , ]     [ tab : timing ]",
    "a multifunctional processing board has been presented for the first and second level system of the new fast track trigger , which is built for the h1 experiment .",
    "the system fulfills the hardware and timing requirements and is able to reconstruct up to 48 tracks with high resolution .",
    "it integrates several tasks like merging of data , track linking , track fitting , and triggering , implemented in a single board design with fpgas and dsps .",
    "the multifunctional processing board can be flexibly utilized by using up to four high speed i / o interconnector cards ."
  ],
  "abstract_text": [
    "<S> the electron - proton collider hera is being upgraded to provide higher luminosity from the end of the year 2001 . in order to enhance the selectivity on exclusive processes a fast track trigger ( ftt ) with high momentum resolution </S>",
    "<S> is being built for the h1 collaboration . </S>",
    "<S> the ftt will perform a 3-dimensional reconstruction of curved tracks in a magnetic field of 1.1tesla down to 100mev in transverse momentum . </S>",
    "<S> it is able to reconstruct up to 48 tracks within 23@xmath0s in a high track multiplicity environment . </S>",
    "<S> the ftt consists of two hardware levels l1 , l2 and a third software level . </S>",
    "<S> analog signals of 450  wires are digitized at the first level stage followed by a quick lookup of valid track segment patterns .    for the main processing tasks at the second level such as linking , fitting and deciding , </S>",
    "<S> a multifunctional processing board has been developed by the eth zrich in collaboration with supercomputing systems ( zrich ) . </S>",
    "<S> it integrates a high - density fpga ( altera apex 20k600e ) and four floating point dsps ( texas instruments tms320c6701 ) . </S>",
    "<S> this presentation will mainly concentrate on second trigger level hardware aspects and on the implementation of the algorithms used for linking and fitting . </S>",
    "<S> emphasis is especially put on the integrated cam ( content addressable memory ) functionality of the fpga , which is ideally suited for implementing fast search tasks like track segment linking .    </S>",
    "<S> hera , h1 collaboration , trigger , track trigger , processor board , supercomputing systems , dsp , fpga , cam , lvds </S>"
  ]
}