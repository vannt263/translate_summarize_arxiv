{
  "article_text": [
    "2008 the magnetic spectrometer , dedicated to the detection of charged kaons , has operated at the 1.5gev electron beam of the mainz microtron mami at the institut fr kernphysik in mainz , germany .",
    "the spectrometer is maintained by the a1 collaboration with a focus on the study of @xmath0 coincidence reactions .",
    "a new coordinate detector has been developed for the  spectrometer s electron - arm .",
    "the detector consists of two vertical planes ( called @xmath2 and @xmath3 ) of fiber arrays .",
    "the package will be supplemented by one or two horizontal planes ( called @xmath4 and @xmath5 ) .",
    "the track information is used to reconstruct the target coordinates and particle momentum , and the time information is used to determine the time - of - flight of the detected particle from target to the detection planes .",
    "the vertical detector system , comprising a total of 18432 fibers and covering an active area of @xmath6 1940 mm @xmath7 300 mm , is divided into detector segments of 384 fibers each . these consist of four - layered arrays where",
    "columns of four fibers are coupled to one common read - out channel of a multi - anode photomultiplier ( mapmt ) . in the electron - arm of the spectrometer the accepted particles are crossing the focal plane with an inclination angle of 5070@xmath8 with respect to the normal of the plane . to accommodate this geometry",
    "the fiber arrays are constructed in a hexagonal packing with columns slanted by 60@xmath8 .        for the double - arm operation of the spectrometer",
    "the 1.5gev electron beam must be steered through the spectrometer after impinging on a nuclear target .",
    "the fiber detectors are operated close to zero degree scattering angle and in close proximity to the electron beam .",
    "the electromagnetic background in the spectrometer is enormous and for small detection angles is dominated by mller scattering .",
    "this background is considered to be the limiting factor for the reaction rates that can be recorded .",
    "thus , the large number of detector channels and the high particle fluxes require a flexible and sophisticated trigger logic and a nearly dead - time free read - out scheme .",
    "for the fast signals of the 144 mapmts from the vertical planes of the fiber detector in the electron arm new front - end electronics have been developed .",
    "the bases of three neighboring mapmts are mounted directly on 96-channel front - end boards .",
    "these boards are used to provide the appropriate voltages to the mapmt bases and to distribute the analog signals with a minimum of time jitter to eight rj-45 connectors .",
    "the form - factor of the board follows the geometry of the fiber detector that is aligned with the focal plane of the electron - arm of the  spectrometer .",
    "the signals ( approx .",
    "100mv pulse - height ) are then transported over 15 m via cat-7 patch cables that are electromagnetically well shielded and that show small losses .",
    "the signal digitization is performed with double - threshold discrimination ( dtd ) chips .",
    "eight chips , each digitizing 4 input channels , are operated on a single 6u card that processes the signals of one mapmt .",
    "details of the front - end cards and the dtd operation are described in ref .",
    "the cards have been developed at the electronics department of the institut fr kernphysik at the johannes gutenberg - universitt , mainz .",
    "the output signals are made available in lvds standard on the front - side in a 68-pin robinson - nugent connector for the readout modules , and on the back - side in a vhdci connector for the trigger generation .",
    "the scheme of the front - end , trigger , and data acquisition electronics is shown in fig .",
    "[ fig : daq - scheme ] .",
    "a sophisticated trigger logic to be implemented in the fpga has been developed according to two different scenarios :    1 .",
    "for the in - beam tests of the electron - arm detectors the trigger system was based on a fast clustering algorithm to define the hit positions and thus the charged particle track , and a hit multiplicity cut to reject spurious hits .",
    "the trigger was prepared to minimize accidental trigger rates and to reject background events that do not originate in the target .",
    "2 .   in hypernuclei",
    "electro - production experiments the trigger decision will also include the correlation between the momenta , _",
    "i.e. _ the hit positions in the focal - planes of the spectrometers .",
    "this sensitivity to the reaction kinematics allows to select a given missing - mass range by the trigger . the temporal correlation between hits",
    "is used to identify and reject pile - up and to select specific particles via time - of - flight .",
    "the possibility exists to expand the system to future additional detector components like the cherenkov detector , which is under development .",
    "accordingly , the trigger must satisfy the following requirements :    1 .",
    "detection of signal clusters in each detector plane ; 2 .",
    "reconstruction of particle tracks through both planes ; 3 .   coincidence and acceptance test for all reconstructed particle tracks ; 4 .",
    "expandability to a missing - mass trigger by combination with the hadron - arm trigger ; 5 .   on - line access and control of trigger parameters ; 6 .",
    "a fast trigger decision .",
    "the trigger is derived by vuprom ( vme universal processing module ) boards that were developed at the experiment electronics department of gsi for general purpose logic operations with 256 i@xmath9o channels each  @xcite . a photograph of a second generation vuprom2 module is shown in fig .  [ fig : vuprom2 ] .",
    "during the last 2 years , first modules were applied as tracking triggers in experiments at gsi and at mami  @xcite .",
    "the first large - scale installation of a vuprom system with several thousand input channels is now in operation for the triggering of both the hadron arm and the electron arm instrumentation of the  spectrometer .",
    "the electron - arm trigger setup comprises 37 vuprom modules .",
    "each vuprom module has a 6u vme formfactor and is equipped with a virtex-4 fpga chip containing over 40k logic cells , capable of operating at 400mhz and connected to a dsp with 128mbytes sdram .",
    "the fpga can be accessed via a jtag connector .",
    "for fast programming of all modules the vme - bus is used to access on each board a 256mbit flash memory that is divided in 8 address spaces .",
    "after start - up or restart of the module the fpga configuration is read from two address spaces of the flash memory , thus up to four independent configurations can be stored on - board .",
    "a cpld supports the fpga control and the flash memory access for the fpga configuration .",
    "the dsp is intended for complex trigger calculations . a display on",
    "the front panel is accessible from the dsp and can be used to show status information of the module .",
    "the trigger calculation results can be forwarded to front panel or to the vme backplane bus .",
    "eight high density vhdci connectors with 32 differential input or output channels each are implemented on the front panel , with four connectors on the vuprom main board hard - wired as three inputs and one output , and four piggyback options with free configuration . additionally , standard lemo in- and outputs ( ttl and nim level ) are available .",
    "thus , output and control information is accessible during trigger operation and the trigger system can be easily reconfigured and adopted to the experimental requirements .",
    "a scheme of the trigger implementation is shown in fig .  [",
    "fig : trigger - scheme ] .",
    "the modules are arranged in four stages .",
    "the signals from both detector planes are processed in parallel and hit information is transmitted to the next stage by setting bits in an 32-bit wide output bus .",
    "the coincidence and output layers combine the signals from the two planes .",
    "a total of 37 modules is needed to satisfy all the requirements on the trigger .",
    "block diagrams of the implemented logic in all four stages are shown in fig .  [",
    "fig : logic ] .",
    "each box represents one functional unit , thin arrows represent single logic signals , parallel signals between components are represented as thick arrows .",
    "the color code reflects the main purpose of the component : green colored units and signals are part of trigger signal processing , yellow colored components are part of the trigger control , and debug or monitoring components are colored blue .",
    "each detector plane has 2304 trigger channels for which 72 vhdci inputs in the first stage are needed .",
    "this stage uses 12 vuprom modules with 6 vhdci inputs each for a single plane , with every module serving 192 neighboring channels .",
    "one vhdci output is used to transmit information to the next stage , one vhdci output is used for debugging . due to the geometrical arrangement of the fibers",
    ", a particle hit always causes a cluster of correlated signals in neighboring channels .",
    "signal clusters are identified by requiring a signal in @xmath10 neighboring channels and the absence of a signal in the next higher and lower channel within a given time period .",
    "this scheme , shown in fig .",
    "[ fig : clusterfinder ] ensures that the found cluster is exactly of the size @xmath10 .",
    "short pulses which are the result of different delays in the input signals are suppressed by a pulse - width discriminator ( pwd ) .",
    "the pwd splits the signal into two parts with one part delayed .",
    "both signals are then fed to an and gate , such that only signals with a length greater than the delay produce an output signal",
    ". clusters with a size above the given upper boundary are discarded to reduce background from scattered particles , because these hit the detector planes under large angles with respect to the normal on the detector plane .",
    "extremely small clusters can only be produced by noise .",
    "the upper and lower boundary for the accepted cluster sizes can be set online via the vme bus and can be adapted to experimental conditions .",
    "the second stage consists of 6 modules with the purpose of reducing the number of channels by a factor of 2 by executing an or between neighboring channels and providing the signal information on several outputs in parallel .    in the third stage",
    "the position information from the first stage of the @xmath2-plane and the second stage of the @xmath3-plane are combined .",
    "the stage consists of 5 different logic units and a multiplexer to chose the logic for the output .",
    "a 6  :  1 reduction unit serves as an or gate for all channels .",
    "one unit checks for temporal coincidences between the @xmath2- and @xmath3-planes . a 2  :",
    "1 reduction unit produces an or output for the channels coming from the @xmath2-plane . for the @xmath3-plane a 4  :",
    "1 reduction unit is implemented .",
    "as the outputs of the reduction stage are connected to several inputs of the coincidence stage , a signal of the @xmath3-plane can be processed in different modules .",
    "the input signals are connected to and gates , so that an output signal is only produced when a given signal size is found .",
    "further information on the logic units is given in @xcite . ]     +    if a correlation of the hit positions is required , a coincidence matrix is used to perform an acceptance test for the reconstructed tracks : the allowed combinations of hit positions in both planes are stored in a binary matrix that was externally computed .",
    "an output signal is produced when a cluster is found on both detector planes and the corresponding matrix element is non - zero .",
    "each vuprom in the third stage evaluates a range of 384 channels of the @xmath2-plane and up to 1536 channels of the @xmath3-plane .",
    "this setup was chosen to cover the angular acceptance known from simulations with the highest possible granularity .",
    "the position resolution for the acceptance test is 6 channels in the @xmath2-plane ( 4.98 mm ) and 12 channels in the @xmath3-plane ( 9.96 mm ) .",
    "the output consists of a single module that receives the information of accepted trajectories from the third stage and produces the trigger output signal .",
    "two parallel logic units are implemented , one is a coincidence unit between signals of the @xmath2- and @xmath3-planes , the other is an or gate . if a trigger is based on coincidences independent of the hit position , this decision needs to be taken by the output stage .",
    "because of the varying complexity of the four trigger stages , each one has a different latency .",
    "the input stage latency is 68ns , the reduction stage latency 22ns , the coincidence stage latency 2330ns depending on the selected trigger type , and the output stage latency is 30ns .",
    "the through - put time for raw signals is 104ns , the generation of a @xmath2 and @xmath3 trigger needs 143ns , and additional tracking conditions require extra 7ns .",
    "there is no event - by - event variation of the latencies and a time jitter of @xmath111.5ns is occurring in each stage , producing a total jitter of @xmath113ns .",
    "the fraction of occupied slices in the fpga is 45% for the first stage , 7% for the reduction stage , 62% for the coincidence stage , and 8% in the output stage .",
    "in our setup the function of the trigger control system ( tcs ) is to distribute from a single source the trigger and time reference to the readout modules .",
    "the tcs is based on the compass system , using a laser module and passive optical splitters , which in turn is based on the encoding method and distribution principles of the time and trigger control ( ttc ) system developed for the lhc experiments  @xcite .",
    "a central component of the trigger distribution is the tcs controller , a 6u vme module , that itself is triggered by a first level trigger ( flt ) from the vuprom system .",
    "our system consists of one ttc laser crate that operates at 155.52mhz , two layers of optical 32-channel splitters and a total of 37 tcs receivers .",
    "the receivers decode the trigger and deliver it to the readout modules housed in the same vme crate .",
    "the architecture of the subsequent data acquisition ( daq ) system and the synchronization of the read - out units are following the setup of the compass experiment  @xcite .    upon arrival of the trigger",
    "signal the signal times are picked off by 144 tdc mezzanine boards that are plugged into the common read - out driver modules developed for the compass experiment , named catch .",
    "these 9u vme modules are equipped with 4 slots for mezzanine cards with 32 channels each .",
    "each tdc mezzanine card hosts 4 dead - time free @xmath121 chips , developed by the faculty of physics at the university of freiburg  @xcite .",
    "the @xmath121 tdc performs digitization and readout asynchronously and without any dead time .",
    "the heart of the tdc is an asymmetric ring oscillator representing the actual time in a bit value .",
    "the phased - locked - loop in each of the @xmath121 is precisely synchronized to the 38.88mhz reference clock provided by the tcs system .",
    "the chips accept falling , rising or both edges of the input signals , and stores them with the time - stamps in an internal memory .",
    "the measuring unit has a dynamic range of 62054 time steps .",
    "the length of an individual step is determined by the clock frequency , @xmath13 , the number of delay units in the ring oscillator , @xmath14 19 , and the settings of two pre - scalers , @xmath15 23 and @xmath16 2  @xcite . for the read - out of the fiber detector",
    ", the normal resolution mode with 8 channels of @xmath17 118ps resolution ( least significant bit ) has been chosen .",
    "the resolution is identical in all channels , each channel has multi - hit capability , and the double pulse resolution is typically 20ns . with this setting a dynamic range of 62054 @xmath7",
    "118ps @xmath18 7.3@xmath19s can be used for the trigger signal generation .",
    "an incoming trigger signal is digitized by the same time measurement unit as the hit - signals .",
    "a programmable trigger latency time is subtracted from the measured trigger time to account for the time needed to form and to distribute the trigger .",
    "a hit is considered to coincide with a trigger if its time stamp is within a defined trigger window following the latency corrected trigger time  @xcite .",
    "the 37 catch modules combine the data of 32 @xmath7 4 @xmath18 128 read - out channels each and transmit these sub - events via optical s - link to read - out buffer pc ( rob ) located in a radiation shielded bunker .",
    "s - link multiplexer modules reduce the number of optical links .",
    "the fiber detector read - out system comprises three 9u vme crates .",
    "each crate can be filled with a maximum of 16 catch modules providing the readout of 128 @xmath7 12 @xmath18 1536 channels . the setup is located @xmath20 5 m from the detector front - end , shielded from the electromagnetic radiation by the yoke of the magnet and a shielding wall .    the data acquisition , analysis and experiment control software used by the a1 collaboration consists of three major packages , aqua , cola and mezzo , written in c++ and java  @xcite .",
    "mezzo is used to operate and monitor experimental devices , cola simulates and analyzes the data , and the data acquisition is done by aqua ( data acquisition for a1 experiments ) .",
    "the aqua system is controlled through a gui ( graphics user interface ) on a host machine . before the start of a run",
    "its conditions can be set in this interface . at the beginning of each run , the program proceeds to set and read the slow control diagnostics from mezzo .",
    "also an automatic logbook entry is made in the sql database .",
    "the rob processors receive the data , pack it into aqua - defined structures , and send it via a tcp / ip protocol to a central machine in the counting room that collects data streams from different spectrometer arms and stores it in run - files . on this single machine ,",
    "data which belong to one physics event are combined in an event building process and consistency checks are performed on the data integrity .",
    "the event identification is achieved by matching a 16-bit event number which includes a 3-bit event type definition .",
    "when using the spectrometer s electron - arm in coincidence with the hadron arm or with one of the other spectrometers , the catch based daq is fully integrated into the existing data acquisition without effecting the total dead - time .",
    "118ps ) of a signal coming from the corresponding dtd channel .",
    "different signal types are seen in this event : ( 1 ) single random hits , ( 2 ) a signal cluster with ( 3 ) after - pulse , and ( 4 ) the trigger reference time .",
    "a magnification of the signal cluster produced by the charged particle crossing is shown in the bottom panel .",
    "further information on the cluster analysis is given in @xcite.,title=\"fig : \" ]   118ps ) of a signal coming from the corresponding dtd channel .",
    "different signal types are seen in this event : ( 1 ) single random hits , ( 2 ) a signal cluster with ( 3 ) after - pulse , and ( 4 ) the trigger reference time .",
    "a magnification of the signal cluster produced by the charged particle crossing is shown in the bottom panel .",
    "further information on the cluster analysis is given in @xcite.,title=\"fig : \" ]",
    "the read - out and trigger electronics for the electron - arm was successfully tested during two beam - times in july and august 2009 . the  spectrometer as realized in the spectrometer hall",
    "is depicted schematically in fig .",
    "[ fig : kaos - optics ] , where ray - traced positively and negatively charged tracks for different momenta and emission angles are shown .",
    "the solid angle from the target covered by the fiber detector was 6.4msr .",
    "a 585mev electron beam was used on a ch@xmath21 target of 1.5 mm ( 130mg@xmath9@xmath22 ) thickness , resulting in an electron",
    " electron luminosity of @xmath23 3.1 @xmath7 10@xmath24@xmath25s@xmath26 at a beam - current of 100na .",
    "large particle fluxes , dominated by mller scattering of the electrons , lead to high background rates in the fiber detectors at their exposed position at 810@xmath8 .",
    "the contribution of particles inside the acceptance of the spectrometer to the signal rate in the detector is several orders of magnitude lower .",
    "raw signal rates of more than 1mhz were observed for beam - currents above 100na .",
    "the measured rates for different trigger types are shown in table  [ tab : triggerrates ] for beam - currents of 10 and 100na .",
    "note that the beam - current measurement became imprecise for low currents .",
    ".measured trigger rates in the electron - arm of the  spectrometer during beam - tests at mami in 2009 .",
    "the current of the 585mev electron beam on a 130mg@xmath9@xmath22 thick ch@xmath21 target varied between 10 and 100na . [ cols= \" < , > , > \" , ]     [ tab : triggerrates ]    -plane of the electron - arm instrumentation as a function of electron beam current compared to the calculated scattering rates of ( mller scattering , elastic@xmath9quasi - elastic scattering at h and c nuclei , and coherent scattering at c nuclei ) .",
    "values for the differential cross - sections are shown as well . ]",
    "[ fig : events ] shows a typical event of the fiber detector taken during the in - beam tests .",
    "the data of 288 tdc channels is shown with each cross representing the leading edge time ( in time steps of @xmath27 118ps ) of a signal coming from the corresponding dtd channel .",
    "signal types are classified into ( 1 ) single random hits , ( 2 ) signal clusters , ( 3 ) after - pulses , and ( 4 ) trigger reference time .",
    "a magnification of the signal cluster is shown in the bottom panel .",
    "the cluster is spread over 7 channels and 7 time steps , corresponding to 0.8ns .",
    "it is known that charged particles crossing the fiber detector produce the latter type of signals  @xcite . in the analysis software",
    "the clusters were identified based on a hierarchical agglomerative cluster algorithm . in deducing the hit times an iteration over all hits in a plane including multiple hits in a channel was performed , and clusters of correlated hit times were searched for .",
    "the cluster with the time closest to the trigger signal time was retained , and within the cluster the time of the leading signal was chosen as hit time . a minimum temporal and spatial distance between signals in a cluster have been defined before the analysis took place .    in fig .",
    "[ fig : rates ] the raw signal rate in the @xmath2-plane of the electron - arm detector is compared to the calculated rates of mller scattering , elastic@xmath9quasi - elastic scattering at h and c nuclei , and coherent scattering at c nuclei .",
    "the momentum of mller electrons scattered into the direction of the electron - arm detector was only @xmath28 4050mev@xmath29 , so most of these electrons were deflected in the fringe field of the dipole , _ cf . _",
    "[ fig : kaos - optics ] , or scattered on the vacuum chamber walls . taking these losses into account ,",
    "the measured rate is in good agreement with the calculated rates for scattering on the nuclei with a contribution from mller scattering .",
    "signals of type ( 1 ) or ( 3 ) could be filtered out by the clustering algorithm of the trigger system .",
    "the rate then dropped by a factor 10 .",
    "the tests have shown that a reliable triggering on signal clusters is achieved with the vuprom boards .",
    "the background reduction in this spectrometer geometry can be deduced from the numbers shown in table  [ tab : triggerrates ] and can be factored into two parts .",
    "the first factor was determined to be 1  :  10 requiring the right cluster sizes and therefore rejecting direct scattering products .",
    "the second factor was measured to be 1  :  200 requiring coincident events in both planes and therefore rejecting a high degree of particle background .",
    "the trigger logic is inefficient only for events with simultaneous temporal and spatial pile - up , _",
    "i.e. _ when a background particle hits the same cluster at the same time period as a particle coming through the spectrometer . for the in - beam tests",
    "such events could be neglected . in a later extension , when the logic will include conditions on the reaction kinematics , a trigger efficiency @xmath30 100% will be inevitable . to avoid the generation of fake triggers in the first stage all signals are passed through pulse - width discriminators so that the cluster size determination is not affected by asynchronous signals .",
    "the performance of the full trigger system is currently under study using further test - beams at mami and dedicated setups in the laboratory .",
    "an fpga - based trigger and daq system with more than 4000 readout channels has been installed for the fast signals of the fiber detector in the  spectrometer s electron - arm .",
    "the system was operating successfully in several beam - times where sophisticated trigger conditions have distinguished background particles from particles passing through the spectrometer .",
    "the reduction of the raw signal rate to the trigger rate was of the order 1  :  2000 for the conditions experienced in the tests .",
    "we deeply appreciate the support of our colleagues from the compass collaboration and the staffs of the collaborating institutions involved in the daq electronics development .          .",
    "gsi experiment electronics . darmstadt .",
    "[ online ] .",
    "available : http://www.gsi.de/informationen/wti/ee/elekt_entwicklung/    vuprom2_e.html[http://www.gsi.de / informationen / wti / ee / elekt_entwicklung/    vuprom2_e.html ]        s.  snchez majos , p.  achenbach , r.  bhm , l.  nungesser , s.  minami , j.  pochodzalla , and t.  r. saito , `` application of the vme logic module vulom as a trajectory trigger for the kaos spectrometer , '' in _ scientific report 2007_.1em plus 0.5em minus 0.4emgsi , darmstadt , jul .",
    "2008 , p. 170 .",
    "g.  braun _",
    "et  al . _ ,",
    "`` f1  an eight channel time - to - digital converter chip for high rate experiments , '' presented at the fifth workshop on electronics for lhc experiments ( leb99 ) , snowmass , 2024 september 1999 .",
    "[ online ] .",
    "available : arxiv : hep - ex/9911009    m.  o. distler , h.  merkel , and m.  weis , `` data acquisition and analysis for the 3-spectrometer - setup at mami , '' presented at the 12th ieee conference on real - time computer applications in nuclear , particle and plasma physics ( rt2001 ) , valencia , spain , 48 june 2001 ."
  ],
  "abstract_text": [
    "<S> the  spectrometer is maintained by the a1 collaboration at the mainz microtron mami with a focus on the study of @xmath0 coincidence reactions . </S>",
    "<S> for its electron - arm two vertical planes of fiber arrays , each comprising approximately 10000 fibers , are operated close to zero degree scattering angle and in close proximity to the electron beam . </S>",
    "<S> a nearly dead - time free daq system to acquire timing and tracking information has been installed for this spectrometer arm . </S>",
    "<S> the signals of 144 multi - anode photomultipliers are collected by 96-channel front - end boards , digitized by double - threshold discriminators and the signal time is picked up by state - of - the - art f1 time - to - digital converter chips . in order to minimize background rates a sophisticated trigger logic </S>",
    "<S> was implemented in newly developed vuprom modules . </S>",
    "<S> the trigger performs noise suppression , signal cluster finding , particle tracking , and coincidence timing , and can be expanded for kinematical matching @xmath1 coincidences . </S>",
    "<S> the full system was designed to process more than 4000 read - out channels and to cope with the high electron flux in the spectrometer and the high count rate requirement of the detectors . </S>",
    "<S> it was successfully in - beam tested at mami in 2009 . </S>"
  ]
}