{
  "article_text": [
    "a sequential algorithm transforms an input sequence @xmath0 into an output sequence @xmath1 where , for all @xmath2 , @xmath3 depends on @xmath4 and @xmath5 only .",
    "typically , the output variables are elements of some combinatorial family @xmath6 , each @xmath7 has a size parameter @xmath8 and @xmath4 is an element of the set @xmath9 of objects of size @xmath10 . in the probabilistic analysis of such algorithms ,",
    "one starts with a stochastic model for the input sequence and is interested in certain aspects of the output sequence .",
    "the standard input model assumes that the @xmath11 s are the values of a sequence @xmath12 of independent and identically distributed random variables . for random input of this type ,",
    "the output sequence then is the path of a markov chain @xmath13 that is adapted to the family @xmath6 in the sense that @xmath14 clearly , @xmath15 is highly transient  no state can be visited twice .",
    "the special case we are interested in , and which we will use to demonstrate an approach that is generally applicable in the situation described above , is that of binary search trees and two standard algorithms , known by their acronyms bst ( binary search tree ) and dst ( digital search tree ) . these are discussed in detail in the many excellent texts in this area , for example in @xcite and @xcite .",
    "various functionals of the search trees , such as the height @xcite , the path length @xcite , the node depth profile @xcite , the subtree size profile @xcite , the wiener index @xcite and the silhouette @xcite have been studied , with methods spanning the wide range from generatingfunctionology to martingale methods to contraction arguments on metric spaces of probability distributions ( neither of these lists is complete ) .",
    "many of the results are asymptotic in nature , where the convergence obtained as @xmath16 may refer to the distributions or to the random variables themselves .",
    "as far as strong limit theorems are concerned , a significant step toward a unifying approach was made in the recent paper @xcite , where methods from discrete potential theory were used to obtain limit results on the level of the combinatorial structures themselves : in a suitable extension of the state space @xmath6 , the random variables @xmath17 converge almost surely as @xmath16 , and the limit generates the tail @xmath18-field of the markov chain .",
    "the results in @xcite cover a wide variety of structures ; search trees are a special case .",
    "it should also be mentioned here that the use of boundary theory has a venerable tradition in connection with random walks ; see @xcite and  @xcite .",
    "our aims in the present paper are the following .",
    "first , we use the algorithmic background for a direct proof of the convergence of the bst variables @xmath17 , as @xmath16 , to a limit object @xmath19 , and we obtain a representation of @xmath19 in terms of the input sequence @xmath20 .",
    "second , we introduce the subtree size metric on finite binary trees .",
    "this leads to a reinterpretation of the above convergence in terms of metric trees .",
    "we also introduce a family of weighted variants of this metric , with parameter @xmath21 , and then identify the critical value @xmath22 with the property that the metric trees converge for @xmath23 and do not converge if @xmath24 . the value",
    "@xmath22 turns out to also be the threshold for compactness of the limit tree .",
    "third , we use convergence at the tree level to ( re)obtain strong limit theorems for three tree functionals  the path length , the wiener index and a metric version of the silhouette .",
    "these topics are treated in the next three sections , where each has its own introductory remarks .",
    "we first introduce some notation , mostly specific to binary trees , then discuss the two search algorithms and the associated markov chains and finally recall the results from @xcite related to these structures , including an alternative proof of the main limit theorem .",
    "we write @xmath25 for the distribution of a random variable @xmath15 and @xmath26 , @xmath27 , @xmath28 for the various versions of the conditional distribution of @xmath15 given ( the value of ) a random variable @xmath29 or a @xmath18-field @xmath30 .",
    "further , @xmath31 is the one - point mass at @xmath32 , @xmath33 is the indicator function of the set @xmath34 [ so that @xmath35 , @xmath36 denotes the binomial distribution with parameters @xmath2 and @xmath37 , @xmath38 is the beta distribution with parameters @xmath39 and @xmath40 is the uniform distribution on the unit interval .",
    "we also write @xmath41 for the uniform distribution on a finite set @xmath42 .    with @xmath43",
    "let @xmath44 be the set of 01 sequences of length @xmath45 , @xmath46 , the set of all finite 01 sequences and the set of all infinite 01 sequences , respectively .",
    "the set @xmath47 has @xmath48 , the `` empty sequence , '' as its only element , and @xmath49 is the length of @xmath50 , that is , @xmath51 if @xmath52 . for each node",
    "@xmath53 we use @xmath54 to denote its left and right direct descendant ( child ) and its direct ancestor ( parent ) .",
    "we write @xmath55 for @xmath53 , @xmath56",
    "if @xmath57 and @xmath58 for @xmath59 , that is , if @xmath60 is a prefix of @xmath61 ; the extension to @xmath62 is obvious .",
    "the prefix order is a partial order only , but there exists a unique minimum @xmath63 to any two nodes @xmath64 , their last common ancestor ; again , this can be extended to elements of @xmath65 .",
    "another ordering on @xmath66 can be obtained via the function @xmath67 $ ] , @xmath68 this will be useful in various proofs , and also in connection with illustrations .    by a",
    "_ binary tree _ we mean a subset @xmath69 of the set @xmath66 of nodes that is prefix stable in the sense that @xmath70 and @xmath71 implies that @xmath72 .",
    "informally , we regard the components @xmath73 of @xmath60 as a routing instruction leading to the vertex @xmath60 , where  0 means a move to the left , 1 a move to the right and the empty sequence is the root node",
    ". the edges of the tree @xmath69 are the pairs @xmath74 , @xmath75 .",
    "a node is external to a tree if it is not one of its elements , but its direct ancestor is ; we write @xmath76 for the set of external nodes of @xmath69 . finally , @xmath77 is the size of the subtree of @xmath69 rooted at @xmath60 ( or the number of descendants of @xmath60 in @xmath69 , including @xmath60 ) .",
    "let @xmath78 denote the ( countable ) set of finite binary trees , @xmath79 those of size ( number of nodes ) @xmath10 .",
    "the single element of @xmath80 is @xmath81 , the tree that consists of the root node only .",
    "let @xmath82 be a sequence of pairwise distinct real numbers .",
    "the bst ( binary search tree ) algorithm stores these sequentially into labeled binary trees @xmath83 , @xmath2 , with @xmath84 and @xmath85 .",
    "for @xmath86 we have @xmath87 and @xmath88 . given @xmath83 , we construct @xmath89 as follows : starting at the root node we compare the next input value @xmath5 to the value @xmath90 attached to the node @xmath60 under consideration , and move to @xmath91 if @xmath92 and to @xmath93 otherwise , until an `` empty '' node @xmath60 ( necessarily an external node of @xmath4 ) is found",
    ". then @xmath94 and @xmath95 , @xmath96 for all @xmath97 .",
    "now let @xmath20 be a sequence of independent random variables with @xmath98 for all @xmath99 , and let @xmath17 be the random binary tree associated with the first @xmath10 of these . by construction , the label functions @xmath100 are monotone with respect to the @xmath101-order of the tree nodes , that is , with @xmath101 as in ( [ eq : defbeta ] ) , @xmath102 in particular , if we number the external nodes of @xmath17 from the left to the right , then the number of the node that receives @xmath103 is the rank of this value among @xmath104 , hence uniformly distributed on @xmath105 .",
    "this shows that the ( deterministic ) bst algorithm , when applied to the ( random ) input @xmath20 , results in a markov chain @xmath106 with state space @xmath78 , start at @xmath107 and transition probabilities @xmath108 in words : we obtain @xmath109 by choosing one of the @xmath110 external nodes of @xmath17 uniformly at random and joining it to the tree .",
    "we refer to this construction as the _ bst chain_.    for the dst ( digital search tree ) algorithm , the input values are infinite 01 sequences , that is , elements of @xmath111 .",
    "given @xmath112 we again obtain a sequence @xmath1 of labeled binary trees , but now we use the components @xmath113 , @xmath114 , of the next input value @xmath5 as a routing instruction through @xmath4 , moving to @xmath91 from an occupied node @xmath52 if @xmath115 and to @xmath93 otherwise . as in the bst case",
    "we assume that the @xmath11 s are the values of a sequence of independent and identically distributed random variables @xmath116 , where the distribution of the @xmath116 s is now a probability measure @xmath117 on the measurable space @xmath118 , with @xmath119 the @xmath120-field generated by the projections on the sequence elements , @xmath121 , @xmath122 .",
    "this @xmath18-field is also generated by the sets @xmath123 it is easy to check that the intersection of two such sets is either empty or again of this form .",
    "this implies that @xmath117 is completely specified by its values @xmath124 ,",
    "@xmath50 , and the dst analogue of ( [ eq : transbst ] ) then is @xmath125 by the _ dst chain with driving distribution @xmath117 _ we mean a markov chain @xmath106 with state space @xmath78 , start at @xmath81 and transition mechanism given by ( [ eq : transdst ] ) .",
    "we refer the reader to doob s seminal paper @xcite and to the recent textbook @xcite for the main results of , background on and further references for the boundary theory for transient markov chains . for the bst chain the doob ",
    "martin compactification has recently been obtained in @xcite : it can be described as the closure @xmath126 of the embedding of @xmath78 into the compact space @xmath127^{{\\mathbb{v}}}$ ] , endowed with pointwise convergence , that is given by the standardized _ subtree size functional _",
    "@xmath128 with @xmath18 as defined in ( [ eq : sts ] ) .",
    "further , the elements of the boundary @xmath129 may be represented by probability measures @xmath117 on @xmath118 , with convergence @xmath130 of a sequence @xmath131 in @xmath78 meaning that @xmath132 and @xmath133 for all @xmath50 if we have a sequence @xmath134 of elements of @xmath129 instead .",
    "the general theory implies that @xmath17 converges almost surely to a limit @xmath19 with values in @xmath129 ; @xcite also contains a description of @xmath135 .",
    "the proof given there does not make use of the algorithmic background , but takes the transition mechanism ( [ eq : transbst ] ) as its starting point .",
    "we now show that this background leads to a direct proof of @xmath136 , and to a representation of @xmath19 in terms of the input sequence .",
    "we need some more notation .",
    "on @xmath66 we define a metric @xmath137 by @xmath138 on @xmath66 itself this gives the discrete topology , and the completion of @xmath66 with respect to @xmath137 leads to @xmath139 , a compact and separable metric space .",
    "this is also the ends compactification if we regard @xmath66 as the complete rooted binary tree .",
    "we extend the @xmath140 s to @xmath141 by @xmath142 because of @xmath143 these sets are open and closed .",
    "further , @xmath144 hence @xmath145 is a @xmath146-system that generates @xmath147 .",
    "together these facts imply that weak convergence of probability measures @xmath148 to a probability measure @xmath117 on @xmath149 is equivalent to @xmath150 in view of @xmath151 and @xmath152 convergence in the doob ",
    "martin topology is therefore equivalent to the weak convergence of probability measures on the metric space @xmath153 if we represent finite subsets @xmath42 of @xmath66 by the uniform distribution @xmath154 on @xmath149 .",
    "moreover , any sequence @xmath134 of probability measures on @xmath149 is tight , as @xmath141 is compact , and therefore has a limit point by prohorov s theorem @xcite , page  37 .",
    "if @xmath155 is a convergent sequence for each @xmath50 , then there is only one such limit point , which means that @xmath148 converges weakly to some probability measure @xmath117 and that ( [ eq : wconvt ] ) holds .",
    "finally , let @xmath156 be the time that the node @xmath60 becomes an element of the bst sequence .",
    "it is easy to see that the @xmath157 s are finite with probability 1 .",
    "[ thm : dmconv ]",
    "let @xmath106 be the sequence of binary trees generated by the bst algorithm with input a sequence @xmath20 of independent and identically distributed random variables with @xmath158 .    with probability 1",
    "the sequence @xmath159 converges weakly to a random probability measure @xmath19 on @xmath118 as @xmath16 .",
    "for each @xmath50 , @xmath160 , with @xmath161 , @xmath162 as in ( [ eq : deftau ] ) , and @xmath163 the augmented order statistics associated with @xmath164 , we have @xmath165    the random variables @xmath166 are independent , and @xmath167 for all @xmath50 .",
    "let @xmath60 , @xmath157 , @xmath168 and @xmath169 , @xmath170 , be as in part ( b ) of the theorem . the order property ( [ eq : orderpropbst ] ) of the labeled binary search trees implies that for a node @xmath61 with label @xmath171 , @xmath172 , the relation @xmath173 is equivalent to @xmath174 .",
    "hence , by the law of large numbers , @xmath175 with probability 1 for every @xmath50 .",
    "in view of @xmath176 the one - point sets with elements from @xmath66 are open in the topology on @xmath141 .",
    "as @xmath159 assigns at most the value @xmath177 to such a set , it follows with the portmanteau theorem @xcite , page 11 , that any limit point of this sequence is concentrated on @xmath65 .",
    "parts ( a ) and ( b ) of the theorem now follow with the above general remarks on weak convergence of probability measures on @xmath178 .    for the proof of ( c ) we use the following well - known fact : the conditional distribution of @xmath179 , given @xmath164 and given that the value lands in an interval @xmath180 of the augmented order statistics , is the uniform distribution on @xmath181 , which implies that @xmath182 is the distribution of the normalized distance @xmath183 to the left endpoint of @xmath181 . for different @xmath184-values these relative insertion positions",
    "are independent , hence @xmath185 , @xmath50 , are independent and uniformly distributed on the unit interval .",
    "we note the following consequence of the representation in part ( c ) of the theorem : for a fixed @xmath50 let @xmath186 with @xmath187 for @xmath188 be the path that connects @xmath60 to the root node .",
    "we then have @xmath189 \\\\[-8pt ]",
    "\\eqntext{\\displaystyle\\mbox{with } \\tilde\\xi_{u(j)}:= \\cases { \\xi_{u(j ) } , & \\quad $ \\mbox{if } u(j+1)=u(j)0 $ , \\vspace*{2pt } \\cr 1-\\xi_{u(j ) } , & \\quad $ \\mbox{if } u(j+1)=u(j)1$.}}\\end{aligned}\\ ] ] note that the factors @xmath190 , @xmath191 , are independent and that they all have distribution @xmath182 .",
    "theorem [ thm : dmconv ] confirms the view expressed in @xcite , pages 191 and 218 , that in specific cases embeddings ( or boundaries ) can generally be obtained directly on using the then available additional structure ; here this turns out to be the algorithmic representation of the markov chain . however , there are two additional benefits of the general theory : first , because of the space ",
    "time property ( [ eq : time - space ] ) the limit @xmath19 generates the tail @xmath18-field @xmath192 associated with the sequence @xmath106 .",
    "this may serve as a starting point for the unification of strong limit theorems for functionals @xmath193 , @xmath194 of the discrete structures : if @xmath195 converges to @xmath196 in a `` reasonable '' space , then the limit  @xmath196 , which is @xmath197-measurable , must be a function of @xmath19 ; see , for example , @xcite , lemma 1.13 .",
    "the second general result is extremely useful in the context of the calculations that arise in specific applications of the theory : the conditional distribution of the chain @xmath106 given the value of @xmath19 is again a markov chain , where the new transition probabilities can be obtained from the limit value and the old transition probabilities by a procedure that is known as doob s @xmath198-transform . in the present situation it turns out that the conditional distribution of the bst chain , given @xmath199 , is the same as that of the dst chain driven by @xmath117 .",
    "we refer the reader to @xcite for details ; the last statement appears there only for a specific  @xmath117 , but the generalization to an arbitrary probability measure @xmath117 in the boundary is straightforward .",
    "roughly , the embedded jump chains at the individual nodes are plya urns ; for these the boundary has been obtained in @xcite , and from the general construction of the doob  martin boundary it is clear that the outcome is unaffected by the step from a markov chain to its embedded jump chain .",
    "we collect some consequences in the following proposition , where @xmath200 are the elements of the natural filtration of the bst chain .",
    "[ prop : conddistrnodes ] with the notation and assumptions as in theorem [ thm : dmconv ] , @xmath201 and , for all @xmath202 , @xmath203 further , the variables @xmath204 are conditionally independent given @xmath205 .",
    "all trees in this paper are subgraphs of the complete binary tree , which has @xmath66 as its set of nodes and @xmath206 as its set of edges ; in particular , our trees are specified by their node sets @xmath69 . in a tree metric @xmath207",
    "the distance of any two nodes @xmath208 is the sum of the distances between successive nodes on the unique path from @xmath60 to @xmath61 , which means that such a metric is given by its values @xmath209 ,",
    "@xmath70 , @xmath210 .",
    "for example , the metric @xmath137 in section  [ subsec : dm ] has @xmath211 , and the canonical tree distance @xmath212 is given by @xmath213 . for our trees",
    "the prefix order further leads to @xmath214 metric trees may also be interpreted as graphs with edge weight , where the edge @xmath74 receives the weight @xmath209 .",
    "our aim in this section is to rephrase the convergence of the bst sequence as a convergence of metric trees , and to show that this view leads to convergence with respect to stronger topologies .",
    "the situation here is much simpler than for aldous s continuum random tree where the gromov  hausdorff convergence of equivalence classes of metric trees is used ; see @xcite and the references given there .",
    "in fact , the search trees considered here have node sets that grow monotonically to the full @xmath66 , so we may define convergence of a sequence @xmath215 of metric binary trees to @xmath216 to mean that @xmath217 which of course is equivalent to @xmath218 for all @xmath50 , @xmath160 . note that @xmath137 and @xmath212 are both local metrics in the sense that @xmath219 does not depend on the tree @xmath69 as long as @xmath220 .",
    "motivated by the view in section  [ subsec : dm ] of finite and infinite binary trees as probability measures @xmath117 on @xmath149 , we now introduce the ( relative ) _ subtree size metric _ , which assigns @xmath221 to the distance of @xmath222 and @xmath60 , that is , @xmath223 if @xmath224 , and @xmath225 for the complete tree and a probability measure @xmath117 on @xmath226 , where we assume that @xmath227 for all @xmath50 .",
    "again , there is an algorithmic motivation : in terms of the bst mechanism , the weight of an edge @xmath74 is the ( relative ) number of times this edge has been traversed in the construction of the tree .",
    "these metrics depend on their tree in a global manner .    with this terminology in place we may now rephrase the convergence in theorem [ thm : dmconv ] as the convergence in the sense of ( [ eq : treeconvweak ] ) of the finite metric trees @xmath228 to the infinite metric tree @xmath229 , almost surely and as @xmath16 .    by construction",
    "martin compactification is the weakest topology that allows for a continuous extension of the functions @xmath230 , @xmath50 . for the analysis of tree functionals stronger modes of convergence turn out to be useful ;",
    "for example , do we have uniform convergence in ( [ eq : treeconvweak ] ) ? also , subtree sizes decrease along paths leading away from the root node , so we may consider a weight factor for the distance of a node to its parent that depends on the depth of the node : for all @xmath21 , we define the _ weighted subtree size metric _ with _ weight parameter _ @xmath231 by @xmath232 in the finite and infinite case , respectively . of course , with @xmath233 the subtree size metric reappears .",
    "[ thm : hconv ] let @xmath234 be the smaller of the two roots of the equation @xmath235 , @xmath236 .",
    "let @xmath17 , @xmath2 and @xmath19 be as in theorem [ thm : dmconv ] .    for @xmath23 ,",
    "the metric space @xmath237 is compact with probability 1 .    for @xmath238 ,",
    "the metric space @xmath237 has infinite diameter with probability 1 .    for @xmath23 , the metric spaces @xmath239",
    "converge uniformly to@xmath240 as @xmath16 in the sense of @xmath241    for @xmath238 , and with @xmath242 for @xmath243 , @xmath244    we embed the metric trees into the linear space @xmath245 of all functions @xmath246 via @xmath247 probability measures @xmath117 on @xmath149 become elements of @xmath245 by identifying  @xmath117 with the function @xmath248 . in particular , we now write @xmath249 instead of @xmath250 . for @xmath21",
    "let @xmath251 be the set of all @xmath252 with @xmath253 clearly , this gives a family of nested separable banach spaces , with @xmath254 we now show that , with the above identification , @xmath255 and that , for @xmath23 and as @xmath16 , @xmath256 clearly , ( [ eq : xinfinl1 ] ) implies that @xmath257 with probability 1 if @xmath23 .",
    "the basis for our proof of ( [ eq : xinfinl1 ] ) and ( [ eq : xinfinl2 ] ) is the connection of bst trees to branching random walks , a connection that has previously been used by several authors , especially for the analysis of the height of search trees ; see the survey @xcite and the references given there .",
    "let @xmath258 , @xmath259 , be a numbering of the nodes from @xmath260 such that @xmath261 with @xmath101 as defined in ( [ eq : defbeta ] ) .",
    "the key observation is that the variables @xmath262 are the positions of the members of the @xmath45th generation in a branching random walk with offspring distribution @xmath263 and with @xmath264 for the point process of the positions of the children relative to their parent .",
    "biggins  @xcite obtained several general results for such processes that we now specialize to the present offspring distribution and point process of relative positions .",
    "let @xmath265 and @xmath266 note that @xmath267 and that , by definition of @xmath22 , @xmath268 finally , let @xmath269 be the number of particles in generation @xmath45 that are located to the left of @xmath270",
    ".    now suppose that @xmath23 .",
    "let @xmath271 and @xmath272 .",
    "we adapt the upper bound argument in @xcite to our present needs : for all @xmath273 and @xmath274 , with @xmath275 , @xmath276 by ( [ eq : rho2a ] ) , @xmath277 . choosing the optimal @xmath278 , which with ( [ eq : thetaopt ] ) is easily seen to be greater than @xmath279 , leads to @xmath280 with a finite constant @xmath32 that does not depend on @xmath45 .",
    "hence @xmath281 which in turn implies ( [ eq : xinfinl1 ] ) by monotone convergence .",
    "suppose now that @xmath282 , so that @xmath283 by ( [ eq : rho2a ] ) for @xmath284 .",
    "by @xcite , theorem 2 , @xmath285 with probability 1 .",
    "in particular , and again with probability 1 , @xmath286 clearly , this implies ( [ eq : xinfinl2 ] ) .    for the proof of ( [ eq : liminl ] ) we first consider the random variables @xmath287 , @xmath2 , for some fixed @xmath50 .",
    "we wish to relate these to @xmath288 $ ] , with @xmath205 as in ( [ eq : natfilt ] ) . for this",
    ", we use the representation of @xmath19 in terms of @xmath204 given in section  [ subsec : dm ] , together with proposition [ prop : conddistrnodes ] .",
    "we may assume that @xmath289 .",
    "the representation ( [ eq : prodxinfty ] ) , the conditional independence of the @xmath290-variables given  @xmath205 , and the well - known formula for the first moment of beta distributions together lead to @xmath291 = \\prod _ { j=0}^{k-1}e[\\tilde\\xi_{u(j)}| { \\mathcal{f}}_n ] = \\prod_{j=0}^{k-1 } \\frac{\\sigma(x_n , u(j+1))+1}{\\sigma(x_n , u(j)0 ) + \\sigma(x_n , u(j)1)+2}.\\ ] ] in view of @xmath292 the product telescopes to @xmath293 = \\frac{\\sigma(x_n , u ) + 1}{n+1}\\qquad \\mbox{for all } u\\in x_n.\\ ] ] we now introduce @xmath294.\\ ] ] then @xmath295 is a vector - valued martingale . for @xmath296",
    "we have by part ( a ) of the theorem that @xmath257 with probability 1 and that @xmath297 , hence @xmath298 almost surely and in mean in @xmath251 by proposition v-2 - 6 in @xcite .    in our present representation of trees as functions on @xmath66 we have @xmath299 which implies that @xmath300 for all @xmath2 . as @xmath136 pointwise with probability 1 by theorem [ thm : dmconv ]",
    "we can now use a suitable version of the dominated convergence theorem , such as that given in @xcite , theorem 1.21 , to obtain that @xmath17 converges to @xmath19 in @xmath251 as @xmath301 , again almost surely and in mean .",
    "it remains to show that the tree statements in the theorem follow from the linear space statements ( [ eq : xinfinl1 ] ) , ( [ eq : xinfinl2 ] ) and ( [ eq : liminl ] ) .",
    "for ( a ) we prove that the limiting metric space is totally bounded . from ( [ eq : xinfinl1 ] ) and the definition of the norm we obtain for any given @xmath302 a @xmath303 such that @xmath304 which by the definition of the weighted subtree size metric means that all nodes @xmath61 with @xmath305",
    "have a distance from their predecessor at level @xmath45 that is less than @xmath306 .",
    "as there are only finitely many nodes of level less than @xmath45 this shows that the whole of @xmath141 may be covered by a finite number of @xmath306-balls .",
    "of course , this argument is meant to be applied to each element of a suitable set of probability 1 separately .    for ( b ) we simply note that ( [ eq : xinfinl2 ] ) implies that , with probability 1 , @xmath307 if @xmath282 .",
    "this also gives ( d ) .    finally , for all @xmath50 , @xmath160 , @xmath308 the upper bound does not depend on @xmath60 , hence ( c )",
    "follows on using ( [ eq : distviamin ] ) .",
    "we note that the convergence of metric trees considered in theorem [ thm : hconv ] implies the convergence with respect to the gromov ",
    "hausdorff distance of the corresponding equivalence classes of metric trees ; see @xcite , section  7.3.3 .",
    "-data , for @xmath309 ( left ) and @xmath310 ( right ) , respectively ; see text for details . ]",
    "the subtree size metric also leads to a visualization of search trees : we use the function @xmath101 defined in ( [ eq : defbeta ] ) to map nodes to points in the unit interval , and above the @xmath69-coordinate @xmath311 we draw a line parallel to the @xmath312-axis from @xmath313 to @xmath314 . in order to obtain a visually more pleasing result we may add lines that run parallel to the @xmath69-axis , connecting nodes with the same parent . in figure  [",
    "fig : pitrees ] we have carried this out for the trees arising from two separate input sequences for the bst algorithm , with the data obtained from alternating blocks of length 10 of digits in the decimal expansion of @xmath315 .",
    "the upper part refers to the odd and the lower to the even numbered blocks . in both cases",
    "we have given the trees for @xmath309 and @xmath310 , and with @xmath233 .",
    "vertically , the trees are from the same distribution ; moving horizontally to the right , we have almost sure convergence .",
    "in this section we show how the above results can be used in connection with the asymptotic analysis of tree functionals .",
    "here is the recipe : we start with a functional @xmath316 of the trees , with ( deterministic ) functions @xmath317 on @xmath318 that have values in some separable banach space @xmath319 .",
    "we suspect that @xmath195 converges almost surely to some limit variable @xmath196 as @xmath320 . we know that",
    "if this is the case , then @xmath321 for some @xmath322 defined on @xmath129 ( as always , almost surely ) .",
    "we do not know what @xmath322 is , but if we manage to rewrite the @xmath317 s in terms of subtree sizes , then theorem [ thm : dmconv ] may lead to an educated guess . on that basis",
    "we next consider @xmath323 $ ] , assuming that @xmath324 .",
    "this gives an @xmath325-valued martingale . by the associated convergence theorem",
    "we then have that @xmath326 converges to @xmath196 almost surely and in mean . finally ,",
    "a simple inspection of @xmath327 may reveal that @xmath328 is asymptotically negligible  indeed , if @xmath195 converges to @xmath196 , then @xmath328 _ must _ tend to 0 .    in the first three subsections we work out the details of the above strategy for path lengths , for a tree index and for an infinite dimensional tree functional .",
    "the final subsection is a collection of remarks on other functionals and related tree structures , indicating further applications of the method , but also its limitations .",
    "the potential - theoretic approach can provide additional insight ; for example , we will relate a martingale introduced in connection with tree profiles to doob s @xmath198-transform .    throughout this section",
    "we abbreviate @xmath250 to @xmath249 .      the first tree functional we consider is the _ internal path length _ , @xmath329 which may be rewritten as @xmath330 let @xmath331 be the harmonic numbers .",
    "it is well known that @xmath332 where @xmath333 is euler s constant .",
    "we need two auxiliary statements ; we omit the ( easy ) proofs .",
    "[ lem : intformula ] for all @xmath202 , @xmath334    for a random variable @xmath335 with distribution @xmath336 lemma [ lem : intformula ] leads to @xmath337 the next lemma is a summation by parts formula for binary trees .",
    "[ lem : telescope ] for any function @xmath338 , @xmath339    major parts of the following theorem are known ; we will give details later in order to be able to refer to the proof for a comparison of the methods used .",
    "let @xmath106 be the bst chain , and let @xmath19 be its limit , as in theorem  [ thm : hconv ] .",
    "[ thm : ipl ] let @xmath340 be defined by @xmath341    the limit @xmath342 exists almost surely and in quadratic mean .",
    "as @xmath16 , @xmath343 almost surely and in quadratic mean .    from the representation of @xmath19 given in section  [ subsec : dm ] , we know that the random variables @xmath344 are independent and uniformly distributed on the unit interval , and that @xmath249 is a function of the @xmath345 s with @xmath346 . in particular , for all nodes @xmath60 , the two factors in the sum appearing in the definition of @xmath196 are independent .",
    "let @xmath347 be the @xmath18-field generated by the @xmath348 s with @xmath349 , and put @xmath350 then these properties lead to @xmath351 & = & y_k + e \\biggl [ \\sum _ { |u|=k+1}x_\\infty(u ) c \\biggl(\\frac{x_\\infty(u0)}{x_\\infty(u ) } \\biggr)\\big | { \\mathcal{g}}_k \\biggr ] \\\\",
    "& = & y_k + \\sum_{|u|= k+1 } x_\\infty(u ) ec(\\xi_u ) \\\\ & = & y_k,\\end{aligned}\\ ] ] where we have used the fact that @xmath352 .",
    "further , with the same arguments , @xmath353 & = & e \\biggl [ \\biggl ( \\sum_{|u|=k+1 } x_\\infty(u ) c(\\xi_u ) \\biggr)^2 \\big| { \\mathcal{g}}_k \\biggr ] \\\\",
    "& = & \\sum_{|u|=k+1 } x_\\infty(u)^2 ec ( \\xi_u)^2,\\end{aligned}\\ ] ] so that @xmath354 we also have @xmath355 , and using ( [ eq : prodxinfty ] ) we get @xmath356 so that @xmath357 taken together these calculations show that @xmath358 is an @xmath359-bounded martingale , and an appeal to the corresponding martingale limit theorem completes the proof of ( a )",
    ". in particular , @xmath196 is well defined , and even has finite second moment .    for",
    "the proof of ( b ) let @xmath360 $ ] , @xmath2 , so that @xmath295 is again a martingale bounded in @xmath359 .",
    "our plan is to show that @xmath361 is sufficiently close to the transformed internal path length that appears in ( [ eq : convipl ] ) .    using again the stochastic structure of @xmath19 we are thus led to consider the conditional expectations @xmath288 $ ] and @xmath362 $ ] , @xmath50 and @xmath2 . from proposition [ prop : conddistrnodes ] we know that , for all @xmath363 , @xmath364 and that the @xmath185 s are conditionally independent given @xmath205 .",
    "hence lemma [ lem : intformula ] can be applied [ see also ( [ eq : expxlogx ] ) ] , resulting in @xmath365 & = & 1 + \\frac{2\\tau(x_n , u0)+2\\tau ( x_n , u1)}{\\sigma(x_n , u0)+\\sigma(x_n , u1)+2 } \\nonumber \\\\[-8pt ] \\\\[-8pt ] \\nonumber & & { } -2 h \\bigl(\\sigma(x_n , u0)+\\sigma(x_n , u1)+2 \\bigr),\\end{aligned}\\ ] ] where the function @xmath366 is given by @xmath367 for each fixed @xmath2 , almost sure convergence of @xmath368 $ ] to @xmath369 $ ] as @xmath370 follows from @xmath371-e[y_\\infty|{\\mathcal{f}}_n ]",
    "\\bigr\\|_2 \\le\\| y_k - y_\\infty \\|_2,\\ ] ] the upper bound in ( [ eq : taily ] ) and the borel  cantelli lemma .",
    "together with the conditional independence of @xmath249 and @xmath372 given @xmath205 , this leads to @xmath373 e \\bigl[c(\\xi_u)| { \\mathcal{f}}_n \\bigr].\\ ] ] from ( [ eq : condexpc ] ) we obtain @xmath374=0 $ ] for @xmath375 , and , clearly , @xmath376 taken together , ( [ eq : telescprod2 ] ) , ( [ eq : condexpc ] ) , ( [ eq : sumrepr ] ) and ( [ eq : splitnodes ] ) lead to @xmath377 which in turn gives @xmath378 lemma [ lem : telescope ] can be applied to the second sum , and the assertion finally follows from @xmath379 and @xmath380 for @xmath381 .",
    "almost sure convergence of the standardized internal path length for the bst sequence has been obtained in @xcite , and convergence in distribution , together with a fixed point relation for the limit distribution , in @xcite .",
    "our method may been seen as an amalgamation of r ' egnier s martingale approach and rsler s approach , where the latter has come to be known as the contraction method in the analysis of algorithms : we obtain a strong limit , but we do not need to `` find the martingale '' ( a task familiar to many an applied probabilist ) .",
    "the approach suggested in the present paper , to look at convergence of the full objects via a suitable completion of the state space of the underlying combinatorial markov chain , leads to a representation of the almost sure limit .",
    "this gives the martingale by projection via conditional expectations , and from the representation one can also read off a fixed point relation for the distribution of the limit .",
    "the canonical graph distance @xmath382 of any two nodes @xmath60 and @xmath61 in a finite connected graph @xmath383 with node set @xmath384 is the minimum length of a path ( sequence of edges ) that connects @xmath60 and @xmath61 in @xmath383 .",
    "the sum of these distances is the _ wiener index _ of the graph , @xmath385 introduced by the chemist h. wiener .",
    "some background together with pointers to the literature is given in @xcite , which is also our main reference in this subsection .",
    "among other results it is shown in @xcite that for the bst sequence @xmath106 the rescaled wiener indices , @xmath386 converge in distribution as @xmath16 .",
    "again , we project a suitable functional @xmath387 of the limit tree @xmath19 to a function @xmath388 $ ] of @xmath17 that is sufficiently close to @xmath389 . this will give a strong limit theorem , that is , it turns out that the rescaled wiener indices in fact converge almost surely for the random binary trees generated by the bst algorithm for i.i.d .",
    "input , and it will also lead to a representation of the limit @xmath390 as a function of @xmath19 .",
    "we begin by rewriting the wiener index in terms of subtree sizes , similar to the transition from ( [ eq : ipla ] ) to ( [ eq : iplb ] ) in the analysis of the internal path length . for a binary tree @xmath69 , @xmath391",
    "this may be proved by induction , using the left and right subtrees in the induction step ; see @xcite , page 70",
    ". using ( [ eq : distviamin ] ) , ( [ eq : iplb ] ) , ( [ eq : wi ] ) and ( [ eq : wia ] ) we now obtain @xmath392 it is a benefit of working with almost sure convergence that we can deal with the constituents on the right - hand side of ( [ eq : wirepr ] ) separately ( which means that we can make use of theorem [ thm : ipl ] ) , whereas in connection with convergence in distribution one needs to consider the joint distribution of @xmath393 and @xmath394 ; see @xcite .",
    "[ thm : wi ] the series @xmath395 converges almost surely and in quadratic mean , and , as @xmath16 , @xmath396 again almost surely and in quadratic mean , where the limit is given by @xmath397 with @xmath196 as in theorem [ thm : ipl ] .",
    "almost sure convergence in ( [ eq : defyinfty ] ) follows with theorem [ thm : hconv ] , and the moment calculations below show that @xmath398 .",
    "in particular , @xmath399 \\to z_\\infty\\ ] ] almost surely and in quadratic mean .",
    "again , the markov property implies that @xmath361 can be written as a function of @xmath17 . in order to obtain this function",
    "we first consider a fixed node @xmath50 .    from ( [ eq : prodxinfty ] ) we get @xmath400 from ( [ eq : nodebeta ] ) and the known formula for the second moment of beta distributions",
    "we obtain , considering the cases @xmath401 and @xmath402 separately , @xmath403\\\\ & & \\qquad = \\frac{(\\sigma(x_n , u(j+1 ) ) + 1 ) ( \\sigma(x_n , u(j+1 ) ) + 2 ) } { ( \\sigma(x_n , u(j)0 ) + \\sigma(x_n , u(j)1 ) + 2 ) ( \\sigma(x_n , u(j)0 ) + \\sigma(x_n , u(j)1 ) + 3 ) } .\\end{aligned}\\ ] ] using the conditional independence statement in proposition [ prop : conddistrnodes ] , we see that we have a telescoping product again , so that @xmath404 = \\frac{(\\sigma(x_n , u ) + 1 ) ( \\sigma(x_n , u ) + 2)}{(n+1)(n+2 ) } \\qquad\\mbox{for all } u\\in x_n\\cup\\partial x_n.\\ ] ] the set @xmath405 can be written as the disjoint union of the subtrees rooted at the @xmath110 external nodes of @xmath17 , and we have @xmath406 = e \\bigl[(1- \\xi_u)^2|{\\mathcal{f}}_n \\bigr ] = \\tfrac{1}{3}\\qquad \\mbox{for all } u\\notin x_n.\\ ] ] therefore , @xmath407 \\\\ & & \\qquad= \\frac{1}{(n+1)(n+2)}\\sum_{u\\in\\partial x_n } \\bigl(\\sigma ( x_n , u)+1 \\bigr ) \\bigl(\\sigma(x_n , u)+2 \\bigr ) \\sum _ { v\\in{\\mathbb{v}},v\\ge u } \\biggl(\\frac{1}{3 } \\biggr)^{|v|-|u| } \\\\ & & \\qquad= \\frac{2}{(n+1)(n+2)}\\sum_{u\\in\\partial x_n } \\sum _ { k=0}^\\infty2^k \\biggl(\\frac{1}{3 } \\biggr)^k \\\\ & & \\qquad= \\frac{6}{n+2}\\end{aligned}\\ ] ] in view of @xmath408 for @xmath409 . taken together",
    "this gives @xmath410 using ( [ eq : iplb ] ) we get @xmath411 so that , with ( [ eq : wirepr ] ) , @xmath412 where @xmath413 tends to 0 almost surely and in quadratic mean . from theorem [ thm : ipl ] we know that @xmath414 in the same sense .",
    "combining the last two statements we obtain ( [ eq : thmwi ] ) , with @xmath390 as in ( [ eq : thmwirepr ] ) .      in our third application",
    "we consider an infinite - dimensional tree functional .",
    "each element @xmath415 of @xmath65 defines a path through a binary tree via the sequence @xmath416 of nodes given by @xmath417 , @xmath418 . in @xcite",
    "the `` silhouette '' @xmath419 of @xmath224 was introduced in an attempt to obtain a search tree analogue of the famous harris encoding of simply generated trees : with each path @xmath61 , we record its exit level when passing through @xmath69 , that is , @xmath420 the tree silhouette can be visualized as a function on the unit interval via the binary expansion @xmath421 it was shown in @xcite that for the bst chain @xmath106 some smoothing is necessary to obtain an interesting limit for the stochastic processes@xmath422 as @xmath16 .",
    "we have seen in the previous sections that for search trees it makes sense to replace the canonical tree distance implicit in the above definition of @xmath419 by the subtree size metric .",
    "a corresponding variant of the silhouette is the _ metric silhouette _",
    ", @xmath423 again , our aim is to obtain a strong limit theorem in the bst situation , together with a representation of the limit as a function of @xmath19 .",
    "in addition , and going beyond the individual arguments @xmath62 , we regard @xmath424 as a random function on @xmath65 . with @xmath425 as in ( [ eq : defdv ] ) this is a compact and separable metric space ( @xmath66 is open in the completion @xmath141 that we introduced in section  [ subsec : dm ] ) .",
    "we write @xmath426 for the space of continuous functions @xmath427 . together with @xmath428",
    "this is a separable banach space .",
    "remember that the values of @xmath19 are probability measures on @xmath118 .",
    "let @xmath429 $ ] be defined by @xmath430 this is the logarithmic potential of the random measure @xmath19 with respect to @xmath425 ; see @xcite , page 62 . finally , we recall that a real function @xmath431 on the metric space @xmath432 is said to be ( globally ) hlder continuous with exponent @xmath433 if there exists a constant @xmath434 such that @xmath435    [ thm : msil ] let @xmath436 with @xmath22 as in theorem [ thm : hconv ] .",
    "@xmath437 .    with probability 1 ,",
    "@xmath438 is hlder continuous with exponent @xmath433 for all @xmath439 .",
    "as @xmath16 , @xmath440    because of @xmath441 for all @xmath442 we have@xmath443 and @xmath444 for all @xmath114 so that @xmath445    now let @xmath433 be as in the statement of the theorem ; we may assume that . let @xmath446 .",
    "by theorem [ thm : hconv ] there exists a set of probability 1 such that for all  @xmath447 in this set , @xmath448 . we fix such an @xmath449 and drop it from the notation . because of @xmath450 for all @xmath50 and ( [ eq : sigma ] ) , we then have @xmath451 for all @xmath452 , which implies @xmath453 in particular , @xmath454 by ( [ eq : xinfinl1 ] ) in the proof of theorem [ thm : hconv ] .    similarly , if @xmath442 are such that @xmath455 , then @xmath456 by definition of @xmath231 .",
    "this proves ( b ) .    for the proof of ( c )",
    "we first consider the random functions @xmath457 defined by @xmath458,\\qquad v\\in\\partial{\\mathbb{v}}.\\ ] ] with @xmath459 we get , using monotone convergence for conditional expectations and @xmath205-measurability of @xmath460 , @xmath461 + \\sum _ { k = j+1}^\\infty e \\bigl[x_\\infty \\bigl(v(k ) \\bigr)| { \\mathcal{f}}_n \\bigr ] \\\\ & = & \\sum_{k=1}^j \\frac{\\sigma(x_n , v(k))+1}{n+1 } + \\frac{\\sigma(x_n , v(j))+1}{n+1 } \\sum_{k = j+1}^\\infty \\biggl ( \\frac{1}{2 } \\biggr)^{k - j } \\\\ & = & \\frac{1}{n+1 } \\bigl ( { \\operatorname{msil}}(x_n ) ( v)+j \\bigr ) + \\frac{1}{n+1}.\\end{aligned}\\ ] ] here we have used our formula ( [ eq : telescprod2 ] ) for @xmath462 $ ] and its extension to nodes outside @xmath17 that can be obtained as in the proof of theorem [ thm : wi ] .",
    "let @xmath463 be the height of @xmath224 .",
    "taking the supremum over @xmath62 we get @xmath464 it is easy to show that the right - hand side converges to 0 with probability 1 ( see @xcite for techniques and results on the height ) , so it remains to prove that @xmath457 converges almost surely and in mean to @xmath438 in the separable banach space @xmath465 .",
    "this , however , is again immediate from the vector - valued martingale convergence theorem given in @xcite , page 104 .",
    "-data , with @xmath309 ( blue ) and @xmath310 ( black ) . ]",
    "figure  [ fig : metrsilh ] shows the metric silhouette for the trees in figure  [ fig : pitrees ] .",
    "note that the continuity in theorem [ thm : msil ] refers to the space @xmath466 ; for example , @xmath467 with @xmath468 for all @xmath469 is a cauchy sequence with respect to euclidean distance , but its inverse under the function @xmath470 defined in ( [ eq : phidef ] ) that we used for the illustration is not a cauchy sequence in @xmath432 . loosely speaking , the function  @xmath101 `` flattens ''",
    "the node set @xmath66 .",
    "the fill ( or saturation ) level @xmath471 and height @xmath472 of a tree @xmath473 are defined by @xmath474 respectively . for these tree functionals ,",
    "the following asymptotic results are well known : @xmath475 both almost surely . here",
    "@xmath476 and @xmath477 are the two solutions of the equation @xmath478 .",
    "the survey @xcite gives details and references , and explains the relation to branching processes .    in situations such as these ,",
    "where the almost sure limit is a constant , projection on the sub-@xmath18-fields @xmath205 would simply return the constant , hence no simplification arises .",
    "both the fill level and height of a tree as well as its path length ( see section  [ subsec : pl ] ) can be written as functionals of the tree s node profile . recall that @xmath49 denotes the length of @xmath50 .",
    "let @xmath479 be the number of external ( resp",
    ". , internal ) nodes of @xmath224 at depth @xmath45 . applied to the bst sequence @xmath106",
    ", this gives sequences @xmath480 and @xmath481 of random functions on the nonnegative integers via @xmath482 and @xmath483 , the external and internal node profile of the binary search tree .",
    "clearly , @xmath484 and @xmath485 so such profiles go some way toward a unifying approach to tree functionals and indeed , they have been studied extensively ; see @xcite . a  crucial role in @xcite",
    "is played by a parametrized family of martingales introduced in @xcite . in order to connect this to the point of view of the present paper we rephrase the basic idea using our terminology and notation .",
    "fix some @xmath486 .",
    "the external profile @xmath487 of @xmath17 can be regarded as the counting density of a random finite measure on @xmath488 with total mass @xmath110 and value @xmath489 at @xmath490 of its generating function .",
    "let @xmath61 be the random node that is added to @xmath17 to obtain @xmath109 .",
    "it is easy to see that @xmath491 in the bst mechanism the node @xmath61 is chosen uniformly at random from the @xmath110 external nodes of @xmath17 , hence @xmath492 & = & e \\biggl[\\sum _ { v\\in\\partial x_n } \\bigl(y_n+z^{|v|}(2z-1 ) \\bigr ) 1_{\\{x_{n+1}=x_n\\cup\\{v\\}\\ } } \\big|{\\mathcal{f}}_n \\biggr ] \\\\ & = & y_n e \\biggl[\\sum_{v\\in\\partial x_n}1_{\\{x_{n+1}=x_n\\cup\\{v\\}\\ } } \\big|{\\mathcal{f}}_n \\biggr ] \\\\ & & { } + ( 2z-1 ) e \\biggl[\\sum_{v\\in\\partial x_n } z^{|v| } 1_{\\{x_{n+1}=x_n\\cup\\{v\\}\\ } } \\big |{\\mathcal{f}}_n \\biggr ] \\\\ & = & y_n + \\frac{2z-1}{n+1}\\sum_{v\\in\\partial x_n } z^{|v| } \\\\",
    "& = & \\frac{n+2z}{n+1 } y_n,\\end{aligned}\\ ] ] which means that @xmath493 with @xmath494 is a martingale .",
    "obviously , the martingale is strictly positive whenever @xmath495 .",
    "because of the space  time property it can therefore be written as @xmath496 with some positive harmonic function @xmath198 on @xmath78 , which depends on @xmath495 , and which in the present context is given by @xmath497 moreover , the distribution @xmath498 of the corresponding @xmath198-transform , which is the markov chain with transition probabilities @xmath499 is such that for all @xmath2 the restriction @xmath500 of @xmath498 to @xmath205 has density @xmath501 with respect to the restriction @xmath502 to @xmath205 of the distribution @xmath503 of the original bst chain .",
    "here we have used that both chains start with the tree @xmath504 , and that @xmath505 .",
    "a straightforward calculation yields @xmath506 for all @xmath224 , @xmath507 .",
    "note that this agrees with the transition mechanism of the bst chain if @xmath508 or @xmath509 .",
    "for general @xmath495 a corresponding chain may be constructed by a marking mechanism that makes use of an additional spine variable .",
    "this idea was introduced in the context of branching processes ; for search trees it has been used in @xcite , to which paper we refer for more details .",
    "the following direct construction of a markov chain with transitions as in ( [ eq : tiltedmc ] ) may be of interest : given @xmath17 , we choose an external node @xmath60 with probability proportional to  @xmath510 . with probability @xmath511 we then accept @xmath60 as the node @xmath61 to be added to @xmath17 ; if @xmath60 is rejected , then @xmath61 is chosen uniformly at random from the other @xmath10 external nodes of @xmath17 .    in the first three subsections of the present section we began our analysis by relating the functionals in question to the subtree sizes .",
    "as the latter fully describe the tree this must also be possible in the profile context . for @xmath224 , @xmath495 let @xmath512 each @xmath513 with @xmath514 is either an internal or an external node of @xmath69 , which means that @xmath515 .",
    "also , the number of internal nodes with depth at least @xmath45 is the sum of all subtree sizes of the nodes with level exactly equal to @xmath45 , that is , @xmath516 which leads to @xmath517 ( note that the bracketed term vanishes for @xmath508 and @xmath509 ) .",
    "this could serve as the basis for an analysis along the lines of the first three subsections .",
    "we do not pursue this here but show instead that the general theory can be used to obtain an interpretation of the function that represents the limit of jabbour s martingale in terms of the doob ",
    "martin limit of the bst sequence : recall that @xmath518 is the density associated with the change of measure from @xmath502 to @xmath500 . if the convergence @xmath519 is in @xmath520 ( see below ) , then @xmath521 is a density of @xmath498 with respect to @xmath503 .",
    "thus we have @xmath522 , with @xmath322 a density of the distribution of @xmath19 under the transformed measure @xmath498 with respect to the distribution of @xmath19 under the original @xmath503 .",
    "it is shown in @xcite that @xmath520-convergence holds if and only if the parameter @xmath490 is inside a specific bounded interval @xmath523 , that @xmath524 if @xmath525 , and that , with @xmath526 as in ( [ eq : fillheightconstants ] ) , @xmath527 and @xmath528 .",
    "these two phase transitions are related to the asymptotics of the maximum and minimum node size respectively at a specific level of the limit @xmath19 : if @xmath490 is too small , then nodes close to the root are favored too much by @xmath529 ; if @xmath490 is too large , then too much weight is given to nodes far away from the root .",
    "in both cases @xmath498 is then singular with respect to @xmath503 . for the weighted subtree size metric considered in section  [ sec : results ] only one of these caveats matters in",
    "that node sizes must not be inflated too much .",
    "hence there is only one such phase transition , which should be related to the height constant , and indeed , a straightforward calculation shows that @xmath530 .",
    "finally , let us mention that the approach toward strong asymptotics of dynamic data structures that we have developed in detail for binary search trees should be applicable in many related situations .",
    "the necessary modifications may be minor , such as for the discounted path length that appears in @xcite , or straightforward , as for the random recursive trees that are often treated in parallel with binary trees ( see , e.g. , @xcite for the wiener index ) , or they may be challenging , for example , when we wish to amplify the weak convergence results for node depth profiles obtained in @xcite for a wide class of trees to strong limit theorems as we have done for the wiener index in section  [ subsec : wi ] .",
    "of course , convergence in distribution and convergence along paths are rather different phenomena ; see figures  [ fig : pitrees ] and [ fig : metrsilh ] .",
    "it is interesting that for a given dynamical structure we may have a strong limit theorem ( with nontrivial limit ) for some aspects ( functionals ) , but not for others ; see @xcite for such results in connection with the subtree size profile of binary search trees .",
    "i thank the referee for the stimulating comments , and for providing several valuable references ."
  ],
  "abstract_text": [
    "<S> we consider random binary trees that appear as the output of certain standard algorithms for sorting and searching if the input is random . </S>",
    "<S> we introduce the subtree size metric on search trees and show that the resulting metric spaces converge with probability  1 . </S>",
    "<S> this is then used to obtain almost sure convergence for various tree functionals , together with representations of the respective limit random variables as functions of the limit tree . </S>"
  ]
}