{
  "article_text": [
    "cms is a general purpose detector at the large hadron collider ( lhc ) at cern .",
    "its innermost tracking device is the pixel detector , which consists of three barrel layers and two endcap disks both up and downstream@xcite .",
    "its basic building blocks are highly segmented silicon sensors with corresponding readout chips ( rocs ) .",
    "each sensor segment ( pixel cell ) is connected to a charge sensitive amplifier in the corresponding pixel unit cell ( puc ) of the roc via an indium bump of about @xmath0 m diameter . in the first barrel layer ,",
    "the active area is 4.3 cm from the interaction point . at this short distance",
    "the density of produced particles will be as high as @xmath1sec@xmath2@xmath3 at the full lhc design luminosity of @xmath4sec@xmath2@xmath3 . due to inclined tracks and lorentz drift of the produced signal charge in the 4 t magnetic field",
    "several pixels might be hit by a single track forming hit clusters . in order to improve position reconstruction for clusters through signal interpolation",
    "the amount of charge produced in each pixel is measured .",
    "the rocs have to record position and charge for all hit pixels with a time resolution of 25ns , which is the time between two lhc bunch crossings .",
    "these information have to bo stored on - chip during the cms first level trigger latency of 3.2@xmath5s after which they are either read out or discarded .",
    "the rocs are read out serially via 40mhz analog links .",
    "+ the first prototype of the readout chip has been developed in the radiation hard dmill process @xcite . in order to improve performance and yield and to reduce costs ,",
    "the design has been migrated to a commercial process with much smaller feature size@xcite .",
    "the second iteration of the translated chip , psi46v2 , is going to be the production version and is described in this article . + in section two the architecture of psi46v2 is described .",
    "section three focusses on the analog readout scheme and in section four measurements of the performance are presented .",
    "the readout chip psi46v2 has been fabricated in a commercial 5-metal layer 0.25@xmath5 m process available through cern .",
    "the design has been made radiation tolerant by following special layout rules as proposed in @xcite .",
    "the chip integrates 1.3 million transistors in an area of 7.9mm@xmath6 9.8 mm .",
    "it can be divided into 3 functional blocks : a control and supply block in the chip periphery , an array of pixel unit cells organized in double columns , and the double column peripheries which control readout and trigger validation within double columns .",
    "the total number of pixels is 80@xmath652 with a pixel size of @xmath7 m @xmath8 m .",
    "the chip periphery houses various control and supply circuits .",
    "it contains    * a serial programming interface .",
    "this is an i@xmath9c - like protocol , modified to run at a speed of 40 mhz . to accommodate this high speed the possibility to read back configuration data had to be given up",
    "nevertheless , there is a limited readback possibility through the analog data stream as will be shown below .",
    "two low voltage differential signal ( lvds ) pairs are needed for clock and data lines . * a fast signal decoder .",
    "first level triggers and commands for reset and calibration signal injection are coded into a single lvds signal .",
    "this signal has to be decoded and distributed over the chip .",
    "* 21 8-bit digital - to - analog converters ( dacs ) , five 4-bit dacs and one 3-bit dac to adjust offsets , gains , thresholds , supply voltages , timings , etc .",
    "* 2 control registers to set the trigger latency , readout speed ( 40 mhz/20mhz ) and range for calibration pulses and to enable / disable the roc . * a bandgap voltage reference and 6 voltage regulators .",
    "three of them can be wire - bonded to external filter capacitors .",
    "this leads to a good immunity against power ripple and reduces chip - to - chip cross talk .",
    "the roc needs two external power supplies , 1.5v for the analog section and 2.5v for digital part .",
    "it consumes a total of about 120 mw which corresponds to only @xmath10w per pixel .",
    "the voltage regulators are programmable and hence the voltages can be set for each chip separately . * an analog event generator .",
    "this is a circuit that collects the pixel hit information from the double columns and generates the output data stream as described in section 3 .",
    "* an on - chip temperature sensor for monitoring cooling performance . *",
    "a cluster multiplicity counter .",
    "this is a fast trigger signal that could be used by the cms first level trigger or for self - triggering in the lab when no external trigger is available .",
    "two thresholds can be set for this mechanism : one sets the minimal number of hits within a double column below which hits are considered as background and are ignored , whereas the other one tunes the number of hit double columns above which a trigger signal is issued .",
    "note , that even below this threshold a signal proportional to the number of clusters is available .",
    "a sketch of the puc is shown in figure [ fig : puc ] .",
    "it can be divided into an analog part ( top ) and the digital logic ( bottom ) .",
    "the thick lines on the right are bus lines running along the double column .",
    "+ the signal from the sensor enters a two stage charge sensitive pre - amplifier / shaper system .",
    "alternatively , calibration signals can be injected through either a 4.8ff injection capacitor connected directly to the amplifier input node , or via the sensor through the air gap between a top metal plate in the roc and the sensor .",
    "the former is used for trimming the comparator threshold while the later can be used to test the bump bond connections@xcite . a globally programmable current source at the input node compensates for sensor leakage current .",
    "+ zero suppression is performed with a comparator .",
    "a global threshold can be programmed for the whole chip . in order to compensate for local transistor mismatches",
    "each pixel has a 4-bit dac to trim the threshold .",
    "furthermore , a mask bit allows to disable noisy pixels .",
    "once the comparator is above threshold the shaper output signal is stored in a sample - and - hold circuit ( see below ) .",
    "the double column periphery is notified immediately through a fast hard - wired column or .",
    "the pixel becomes insensitive and waits for a column readout token .",
    "when it arrives the analog signal is sent to the periphery together with the pixel row address .",
    "the token is then passed on and",
    "the pixel resumes data taking .",
    "thus , dead - time is short but depends on the hit rate .",
    "the time needed for a column scan to finish is @xmath11 50ns + ( 50ns@xmath6 number of hits ) .",
    "+ the shaper output signal is sampled after a fixed time delay which is controlled by a global register ( i.e. once per roc ) .",
    "the signal within the sample - and - hold circuit follows the rising edge of the shaper output quite fast while it decays much slower .",
    "this makes the peak of the signal sufficiently flat and the circuit is not very sensitive to this time delay .",
    "due to timewalk and device mismatch the exact peaking time depends somewhat on the pulse height and varies a bit from pixel to pixel .",
    "the relative error in the measured pulse height due to a non perfect sampling point has been measured and is shown in figure [ fig : error ] .",
    "if the delay is optimised for low signal charges ( 3500 electrons in figure [ fig : error ] ) , the relative error for large signals is only a few per cent .",
    "downloading the full detector configuration at run start will take @xmath12 0.5 minute @xcite .",
    "if needed , pixels can be reprogrammed during lhc machine orbits reserved for sub - detector calibration , however only at a limited rate .",
    "thus single event upset ( seu ) in the trim and mask bit storage cells has to be considered .",
    "a simple trick has been adopted to protect storage cells from seu .",
    "this is illustrated in figure [ fig : seu ] .",
    "if node ( a ) collects a large enough amount of charge , produced by a nuclear reaction , the stored logic level can be changed .",
    "the presence of the capacitor aided by miller effect increases the critical charge and thus reduces the probability of an upset .",
    "the seu cross section for both protected and unprotected storage cells has been measured at psi for 300 mev / c pions .",
    "the result is @xmath13cm@xmath9 per storage cell for protected and @xmath15cm@xmath9 for unprotected cells .",
    "this is an improvement of 2 orders of magnitude .",
    "in psi46v2 all storage cells in the pucs are protected ( 4 trim bits and one mask bit ) . in case of an seu",
    "the flipped bits have to be reprogrammed through control links .",
    "each link serves several modules / pannels . in the worst case",
    "one link controls 4 modules plus 4 half - modules in each of the two innermost barrel layers , i.e. a total of 192 rocs or 96 rocs per layer . at high luminosity lhc operation",
    "the expected seu rate for this control link is @xmath16hz .",
    "this means that in about 8 hours 0.1% of the pixels changed their threshold .",
    "the occupancy of each pixel can be monitored online and pixels that show significant changes will be reprogrammed .",
    "the double column periphery controls the transfer of hit information from the pixels to the storage buffers ( column drain mechanism ) and performs trigger verification",
    ". a schematic view of the logic is shown in figure [ fig : peri ] .",
    "+        when the asynchronous fast column or signal arrives at the periphery three actions are performed :    1 .   the present value of a bunch crossing counter ( wbc ) is latched into one of 12 time stamp buffer cells .",
    "this is needed later on for trigger validation .",
    "the hits for this bunch crossing are acknowledged by the periphery .",
    "this tells the pixels to associate any later hits with another column drain and its corresponding bunch crossing .",
    "there are one active and up to two pending column drains allowed .",
    "hits of any further bunch crossing are lost .",
    "a column drain is initiated by sending out a readout token to the first pixel .",
    "+    a pixel without a hit belonging to the active column drain just bypasses the token .",
    "this has been measured to happen at a rate of about 3.3 ghz , i.e. the token arrives at the first hit pixel within less than 50ns or 2 clock cycles .",
    "hit information is transferred in parallel into the data buffer , one pixel per two clock cycles .",
    "the data buffer has a depth of 32 units .",
    "each unit consists of a marker bit one analog and nine digital storage cells for pulse height and row address respectively .",
    "the marker bit indicates the beginning of a new event and thus is used to synchronize entries in the time stamp and the data buffers .",
    "+ the oldest entry in the time stamp buffer is permanently compared to a second bunch crossing counter ( sbc ) which is delayed with respect to the wbc by a programmable amount which corresponds to the first level trigger latency . in case of agreement",
    "the time stamp is deleted and the presence of the cms first level trigger signal is checked . either the corresponding data is discarded or the column is set into readout mode . in this mode , the double column stops data acquisition in order to prevent overwriting of valid data .",
    "it waits for the readout token to arrive and sends data to the chip periphery .",
    "afterwards the double column resets itself and hence can not have further valid hits for the duration of the trigger latency .",
    "data loss also occurs when one of the buffers is completely filled up . in case of a full data buffer a double column gets reset . if the time stamp buffer is full , data acquisition is paused until the next buffer cell is freed .",
    "[ table : loss ]    a couple of design inherent data loss mechanisms have been mentioned so far .",
    "they are summarized in table [ table : loss ] for barrel modules , a luminosity of @xmath17sec@xmath2@xmath3 and @xmath18 khz first level trigger rate .",
    "a large contribution , labeled readout , comes from the fact that a double column is insensitive between the time it validates a trigger and the time it finishes the readout .",
    "this stresses the importance of having short readout times .",
    "therefore an analog readout scheme running at 40 mhz ( alternatively it can be switched to 20 mhz ) has been adopted where the pixel address is coded into 6 discrete levels .",
    "pixel address and signal pulse height can be transferred in 6 clock cycles .",
    "+ in the endcap part of the detector several sensor tiles of different size are organized in so called blades which contain 24 rocs on the front side and 21 rocs on the back side . in the barrel , sensors connected to 16 ( 8) rocs are called modules ( half modules ) .",
    "the rocs of each side of a blade or of a ( half ) module are read out in a daisy chained way . a token bit , controlled by a special token bit manager chip ( tbm,@xcite ) ,",
    "is sent to the first roc .",
    "the roc sends its data to the tbm and passes the token bit to the next roc , until the token bit gets back to the tbm .",
    "the tbm amplifies the signals from the rocs , adds a header and a trailer and drives the signals out to the detector supply tube",
    ". + the readout of a single pixel hit is shown in figure [ fig : ro ] .",
    "it starts with a header of 3 clock cycles .",
    "a large negative signal level well outside of the range of pixel data ( ultra - black ) followed by a zero differential level ( black ) separates the individual rocs in the blade / module data stream .",
    "no other identification is sent . in order to get the roc i d",
    "the daq unit has to count the chip headers . in the third clock cycle of the chip header a signal inversely proportional to the value of the last addressed dac",
    "this is the only way information about the configuration of the rocs can be read back .",
    "it follows the double column address ( 2 cycles ) , the row address ( 3 cycles ) and the analog pulse height for each hit pixel .",
    "figure [ fig : memory ] shows the signal output of a barrel module as it arrives at the electro - optical converter .",
    "shown are two different address level sequences . as can be seen ,",
    "the risetime of the signals is short enough to allow for a tolerance of the sampling point in the daq unit of @xmath19 6ns . the measured sampling distribution for a roc is shown in figure [ fig : levels ] .",
    "the address levels are clearly separated and allow a reliable reconstruction of the pixel addresses .",
    "in this section lab measurements of the performance of the roc are shown .",
    "figure [ fig : anout ] shows the pulse height response to calibration signal injection .",
    "it is slightly non - linear at low charges and saturates for high charges above about 2 mips .",
    "injection capacitances have been calibrated with x - ray sources .",
    "k@xmath20 lines of 6 different isotopes between 8.04kev and 44.2kev have been used .",
    "these measurements are also shown in figure [ fig : anout ] . + it is important to have a threshold distribution as uniform as possible .",
    "on one hand the threshold must be set well above the amplifier noise in order not to flood the system with random hits . on the other hand",
    "the position resolution depends almost linearly on the threshold ( see @xcite ) .",
    "the width of a gaussion fit to the untrimmed threshold distribution of a roc is around 300 electrons as shown in figure [ fig : trim ] ( a ) .",
    "adjusting the trim bits is one of the most important steps in the module characterization process @xcite .        after trimming",
    ", the threshold dispersion can be improve considerably to typically 80 electrons as shown in figure [ fig : trim ] ( b ) .",
    "the intrinsic noise of the preamp / shaper has been measured to be @xmath21 electrons @xcite .",
    "+ the threshold described so far is not directly relevant .",
    "the time between a particle crossing the sensor and the comparator going above threshold depends on the created ionization charge .",
    "therefore it might happen that for low pulses the hit signal is delayed to the next bunch crossing and hence is lost during trigger validation .",
    "this timewalk can be measured by delaying the injected calibration pulses with respect to the chip clock .",
    "the result of such scans is shown in figure [ fig : timewalk ] for three different thresholds .",
    "for an absolute threshold of 2500 electrons it is shown that the effectively usable threshold ( in - time threshold ) is at about 3200 electrons , i.e. the time difference between a signal of 3200 electrons and very high charges above 100k electrons is below 25ns .",
    "+ test structures containing the analog section of the puc have been irradiated with gamma rays up to a total dose of 13.2 mrad .",
    "this corresponds to the absorbed dose in 2 years at high luminosity lhc operation for the 7 cm barrel layer or 1 year for the innermost layer .",
    "figure [ fig : irrad ] shows the outputs of the shaper and the sample - and - hold circuit in transparent mode .",
    "curves ( a ) show the response for unirradiated structures .",
    "after irradiation , the analog signals become somewhat slower ( b ) , but can be brought back close to the original waveform by reprogramming the feedback settings ( c ) . +",
    "the final version of the cms pixel readout chip has been designed in a @xmath22 m process .",
    "it is fully functional and measurements of the performance have been presented .",
    "the threshold can be tuned to values below 2500 electrons with a uniformity of 80 electrons . due to timewalk the in - time",
    "threshold is somewhat higher at 3200 electrons .",
    "the readout uses an analog scheme with address levels coded into 6 levels .",
    "this has been proven to work reliably at 40 mhz as address decoding was 100% correct .",
    "the cms collaboration , cms tracker technical design report , cern / lhcc 98 - 6 m. dentan et al . , ieee trans . nucl .",
    "43 ( 1996 ) 1763 m. barbero et al . ,",
    "design and test of the cms pixel readout chip , nucl .",
    "instr . and meth .",
    "a517 ( 2004 ) 349 w. erdmann , the 0.25@xmath5 m front - end for the cms pixel detector , nucl .",
    "instr . and meth . a 549 ( 2005 )",
    "153 w. snoeys et al . , layout techniques to enhance the radiation tolerance of standard cmos technologies demonstrated on a pixel detector readout chip , nucl instr . and meth .",
    "a439 ( 2000 ) 349 a. starodumov et al , qualification procedures of the cms pixel barrel modules , these proceedings d. kotlinski , the control and readout system of the cms pixel barrel detector , these proceedings e.bartz , the 0.25@xmath5 m token bit manager chip for the cms pixel readout , proceedings of the 11@xmath23 workshop on electronics for lhc and future experiments , heidelberg , germany"
  ],
  "abstract_text": [
    "<S> the readout chip for the cms pixel detector has to deal with an enormous data rate . on - chip </S>",
    "<S> zero suppression is inevitable and hit data must be buffered locally during the latency of the first level trigger . </S>",
    "<S> dead - time must be kept at a minimum . </S>",
    "<S> it is dominated by contributions coming from the readout . to keep it low </S>",
    "<S> an analog readout scheme has been adopted where pixel addresses are analog coded . </S>",
    "<S> + we present the architecture of the final cms pixel detector readout chip with special emphasis on the analog readout chain </S>",
    "<S> . measurements of its performance are discussed .    ,    ,    ,    ,    ,    ,    cms , pixel detector , readout chip 29.40.wk , 29.40.gx , 85.40.-e </S>"
  ]
}