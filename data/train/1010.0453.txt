{
  "article_text": [
    "several stochastic processes appearing in applied probability may be viewed as growing connected subsets of a directed acyclic graph that evolve according to the following dynamics : initially , all vertices of the graph are unoccupied , particles are fed in one - by - one at a distinguished source vertex , successive particles proceed along directed edges according to an appropriate stochastic mechanism , and each particle comes to rest once it encounters an unoccupied vertex .",
    "if we picture the source vertex as being at the `` top '' of the graph , then successive particles `` trickle down '' the graph until they find a vacant vertex that they can occupy .",
    "we are interested in the question : `` what is the asymptotic behavior of such a ( highly transient ) set - valued markov chain ? '' for several of the models we consider , any finite neighborhood of the source vertex will , with probability one , be eventually occupied by a particle and so a rather unilluminating answer to our question is to say in such cases that the sequence of sets converges to the entire vertex set @xmath3 .",
    "implicit in the use of the term `` converges '' in this statement is a particular topology on the collection of subsets of @xmath3 ; we are embedding the space of finite subsets of @xmath3 into the cartesian product @xmath4 and equipping the product space with the usual product topology .",
    "a quest for more informative answers can therefore be thought of as a search for an embedding of the state space of the chain into a topological space with a richer class of possible limits .",
    "an ideal embedding would be one such that the chain converged almost surely to a limit and the @xmath2-field generated by the limit coincided with the tail @xmath2-field of the chain up to null events . for trickle - down processes ,",
    "the doob - martin compactification provides such an embedding , and so our aim is to develop a body of theory that enables us to identify the compactification for at least some interesting examples .",
    "moreover , a knowledge of the doob - martin compactification allows us to determine , via the doob @xmath5-transform construction , all the ways in which it is possible , loosely speaking , to condition the markov chain to behave for large times .",
    "this allows us to construct interesting new processes from existing ones or recognize that two familiar processes are related by such a conditioning .",
    "a prime example of a markov chain that fits into the trickle - down framework is the _ binary search tree ( bst ) process _ , and so we spend some time describing the bst process in order to give the reader some concrete motivation for the definitions we introduce later .",
    "the bst process and the related _ digital search tree ( dst ) processes _ that we consider in section  [ s : bst_and_dst ] arise from considering the behavior of tree - based searching and sorting algorithms.[p : bst ] the trickle - down mechanism is at the heart of both algorithms : the vertices of the complete rooted binary tree are regarded as potential locations for the storage of data values @xmath6 that arrive sequentially in time .",
    "we interpret these values as labels of particles .",
    "the particles are fed in at the root vertex , which receives @xmath7 , and they are routed through the tree until a free vertex is found .",
    "how we travel onwards from an occupied vertex depends on the algorithm : in the bst case we assume that the input stream consists of real numbers and we compare the value @xmath8 to be inserted with the content @xmath9 of the occupied vertex , moving to the left or right depending on whether @xmath10 or @xmath11 , whereas in the dst case the inputs @xmath12 are taken to be infinite 0 - 1 sequences , and we move from an occupied vertex of depth @xmath13 to its left or right child if the @xmath14 component of @xmath12 is 0 or 1 respectively .",
    "if the input is random and we ignore the labeling of the vertices by elements of the input data sequence , then we obtain a sequence of subtrees of the complete binary tree ; the @xmath15-th element of the sequence is the subtree consisting of the vertices occupied by the first @xmath15 particles .    binary trees in general and their role in the theory and practice of computer science are discussed in @xcite .",
    "several tree - based sorting and searching algorithms are described in @xcite . in particular ,",
    "a class of trees ( generalizing binary search trees as well as digital search trees ) with a construction similar to our trickle - down process is introduced in @xcite .",
    "an introduction to the literature on tree - valued stochastic processes arising in this connection is @xcite .",
    "historically , real valued functionals such as the path length or the insertion depth of the next item were investigated first , with an emphasis on the expected value for random input as a function of the amount of stored data ( that is , of the number of vertices in the tree ) . in recent years ,",
    "several infinite - dimensional random quantities related to the shape of the trees such as the node depth profile @xcite , the subtree size profile @xcite and the silhouette @xcite have been studied .    in the present paper",
    "we develop a framework for trickle - down processes that contains the bst and dst processes as special cases . as a consequence ,",
    "we obtain limit results for the sequence of random trees themselves , using a topology on the space of finite binary trees that is dictated by the underlying stochastic mechanism .",
    "we also establish distributional relationships ; for example , we show that the markov chains generated by the bst and the dst algorithms are related via @xmath5-transforms  see theorem  [ t : dst_is_h - transform ] .    in order to motivate our later formal definition of trickle - down processes",
    ", we now reconsider the bst process from a slightly different point of view by moving away somewhat from the search tree application and starting with a bijection from classical enumerative combinatorics ( see , for example , @xcite ) between permutations of the finite set @xmath16 : = \\{1,2,\\ldots , n\\}$ ] and certain trees with @xmath15 vertices labeled by @xmath16 $ ] .",
    "denote by @xmath17 the set of finite tuples or _ words _ drawn from the alphabet @xmath18 ( with the empty word @xmath19 allowed )  the symbol @xmath20 emphasizes that this is a disjoint union .",
    "write an @xmath21-tuple @xmath22 more simply as @xmath23 .",
    "define a directed graph with vertex set @xmath24 by declaring that if @xmath25 and @xmath26 are two words , then @xmath27 is a directed edge ( that is , @xmath28 ) if and only if @xmath29 and @xmath30 for @xmath31 . call this directed graph",
    "the _ complete rooted binary tree_. say that @xmath32 for two words @xmath25 and @xmath26 if @xmath33 and @xmath34 ; that is , @xmath32 if there exist words @xmath35 with @xmath36 .",
    "a _ finite rooted binary tree _ is a non - empty subset @xmath37 of @xmath24 with the property that if @xmath38 and @xmath39 is such that @xmath28 , then @xmath40 .",
    "the vertex @xmath19 ( that is , the empty word ) belongs to any such tree @xmath37 and is the _ root _ of @xmath37 .",
    "see figure  [ fig : binary_tree ] .        if @xmath41 , then a _ labeling _ of @xmath37 by @xmath16 $ ] is a bijective map @xmath42 $ ] .",
    "suppose that @xmath43 is an ordered listing of @xmath16 $ ] .",
    "define a permutation @xmath44 of @xmath16 $ ] by @xmath45 , @xmath46 $ ] .",
    "there is a unique pair @xmath47 , where @xmath37 is a finite rooted binary tree with @xmath41 and @xmath0 is a _ labeling _ of @xmath37 by @xmath16 $ ] , such that    * @xmath48 , * if @xmath49 and @xmath32 , then @xmath50 , * if @xmath49 , @xmath51 , then @xmath52 . * if @xmath49 , @xmath53 , then @xmath54 .    the labeling may be constructed inductively as follows .",
    "if @xmath55 , then we just have the tree consisting of the root @xmath19 labeled with @xmath56 .",
    "for @xmath57 we first remove @xmath15 from the list @xmath43 and build the labeled tree @xmath58 for the resulting listing of @xmath59 $ ] .",
    "the labeled tree for @xmath43 is of the form @xmath47 , where @xmath60 for @xmath61 , @xmath62 , @xmath0 restricted to @xmath63 is @xmath64 , and , setting @xmath65 , @xmath66    to illustrate this construction , take @xmath67 and consider the ordered listing @xmath68 of the set @xmath69 $ ] to be @xmath70 .",
    "see table  [ tab : permutation ] for the resulting permutation , written in the usual two line format .",
    "[ table1 ]    .permutation of @xmath69 $ ] with @xmath70 as the corresponding ordered listing @xmath68 . [",
    "cols=\"^,^,^,^,^,^,^,^,^,^\",options=\"header \" , ]     the successive ordered listings of @xmath71 , [ 2 ] , \\ldots , [ 9]$ ] implicit in the recursive construction are @xmath72 as illustrated in figure  [ fig : binary_sort_tree ] , the label @xmath56 is inserted at the root , the label @xmath73 trickles down to the vertex @xmath56 , the label @xmath74 trickles down to the vertex @xmath75 , the label @xmath76 trickles down to the vertex @xmath77 , and so on until the label @xmath78 trickles down to the vertex @xmath79 .",
    "$ ] with @xmath80 . for the sake of clarity",
    ", the coding ( see figure  [ fig : binary_tree ] ) of the vertices as elements of @xmath24 is not shown .",
    "the correspondence between the labeling by the set @xmath69 $ ] and the vertices as elements of @xmath24 is @xmath81 , @xmath82 , @xmath83 , @xmath84 , @xmath85 , @xmath86 , @xmath87 , @xmath88 , @xmath89 .",
    ", scaledwidth=100.0% ]    now let @xmath90 be a sequence of independent identically distributed random variables that each have the uniform distribution on the interval @xmath91 $ ] .",
    "for each positive integer @xmath15 define a uniformly distributed random permutation @xmath92 of @xmath16 $ ] by requiring that @xmath93 if and only if @xmath94 for @xmath95 .",
    "that is , @xmath96 and the corresponding ordered list @xmath97 , @xmath98 , is such that @xmath99 .",
    "the corresponding ordered list for @xmath100 is thus obtained by inserting @xmath101 into one of the @xmath102 `` slots '' between the successive elements of the existing list or into one of the two `` slots '' at the beginning and end of the list , with all @xmath101 possibilities being equally likely .    applying the procedure above for building labeled rooted binary trees to the successive permutations @xmath103 produces a sequence of labeled trees @xmath104 , where @xmath105 has @xmath15 vertices labeled by @xmath16 $ ] .",
    "this sequence is a markov chain that evolves as follows .",
    "given @xmath105 , there are @xmath101 words of the form @xmath106 such that @xmath107 is not a vertex of the tree @xmath105 but the word @xmath108 is .",
    "pick such a word uniformly at random and adjoin it ( with the label @xmath101 attached ) to produce the labeled tree @xmath109 .",
    "if we remove the labels from each tree @xmath105 , then the resulting random sequence of unlabeled trees is also a markov chain that has the same distribution as the sequence of trees generated by the bst algorithm when the input stream consists of independent random variables that all have the same continuous distribution function .",
    "in essence , at step @xmath101 of the bst algorithm there are @xmath101 vertices that can be added to the existing tree and the rank of the input value @xmath110 within @xmath111 determines the choice of this `` external vertex '' : for i.i.d .",
    "continuously distributed random input , this rank is uniformly distributed on @xmath112 , resulting in a uniform pick from the external vertices ( see also the discussion following ) .",
    "see figure  [ fig : binary_tree_external ] for an example showing the external vertices of the finite rooted binary tree of figures  [ fig : binary_tree ] and  [ fig : binary_sort_tree ] .",
    "vertices connected by the solid edges , and its @xmath75 external vertices , the vertices connected to the tree by dashed edges . for simplicity ,",
    "the coding of the vertices as elements of @xmath24 is not shown.,scaledwidth=100.0% ]    from now on we will refer to any markov chain on the space of finite rooted binary trees with this transition mechanism as `` the '' bst process and denote it by @xmath113 .    we note in passing that the labeled permutation trees @xmath114 can be reconstructed from @xmath105 , but a similar reconstruction of the history of the process from its current value is not possible if we consider the sequence of labeled trees obtained by labeling the vertices of the tree in the binary search tree algorithm with the input values @xmath115 that created the tree .",
    "write @xmath116 ( respectively , @xmath117 ) for the number of vertices in @xmath118 of the form @xmath119 ( resp .",
    "@xmath120 ) . that is , @xmath116 and @xmath117 are the sizes of the `` left '' and `` right '' subtrees in @xmath118 below the root @xmath19 .",
    "then , @xmath121 and @xmath122 are , respectively , the number of `` slots '' to the left and to the right of @xmath56 in the collection of @xmath101 slots between successive elements or at either end of the ordered list @xmath123 .",
    "it follows that the sequence of pairs @xmath124 , @xmath125 , is itself a markov chain that evolves as the numbers of black and white balls in a classical plya urn ( that is , as the process describing the successive compositions of an urn that initially contains one black and one white ball and at each stage a ball is drawn uniformly at random and replaced along with a new ball of the same color ) .",
    "more precisely , conditional on the past up to time @xmath15 , if @xmath126 , then @xmath127 takes the values @xmath128 and @xmath129 with respective conditional probabilities @xmath130 and @xmath131 .",
    "more generally , suppose for a fixed vertex @xmath132 that we write @xmath133 ( respectively , @xmath134 ) for the number of vertices in @xmath118 of the form @xmath135 ( resp .",
    "@xmath136 ) .",
    "that is , @xmath133 and @xmath134 are the sizes of the `` left '' and `` right '' subtrees in @xmath118 below the vertex @xmath137 . put @xmath138 and @xmath139 for @xmath140 ; that is , @xmath141 is the first time that the subtree of @xmath118 rooted at @xmath137 has @xmath142 vertices .",
    "then , the sequence @xmath143 , @xmath140 , obtained by time - changing the sequence @xmath144 , @xmath125 , so that we only observe it when it changes state is a markov chain with the same distribution as @xmath145 , @xmath125 .",
    "it follows from this observation that we may construct the tree - valued process @xmath113 from an infinite collection of independent , identically distributed plya urns , with one urn for each vertex of the complete binary tree @xmath24 , by running the urn for each vertex according to a clock that depends on the evolution of the urns associated with vertices that are on the path from the root to the vertex .    more specifically , we first equip each vertex @xmath39 with an associated independent @xmath146-valued _ routing instruction _",
    "process @xmath147 such that @xmath148 evolves like the pair of counts in a plya urn with an initial composition of one black and one white ball .",
    "then , at each point in time we feed in a new particle at the root @xmath19 . at time",
    "@xmath77 the particle simply comes to rest at @xmath19 . at time",
    "@xmath56 the root is occupied and so the particle must be routed to either the vertex @xmath77 or the vertex @xmath56 , where it comes to rest , depending on whether the value of @xmath149 is @xmath150 or @xmath151 .",
    "we then continue on in this way : at time @xmath152 we feed a particle in at the root @xmath19 , it is routed to the vertex @xmath77 or the vertex @xmath56 depending on whether the value of @xmath153 is @xmath150 or @xmath151 , the particle then trickles down through the tree until it reaches an unoccupied vertex . at each stage of the trickle - down , if the particle is routed to a vertex @xmath137 that is already occupied , then it moves on to the vertex @xmath154 or the vertex @xmath155 depending on whether the value of @xmath156 is @xmath150 or @xmath151 , where @xmath157 is the number of particles that have passed through vertex @xmath137 and been routed onwards by time @xmath15 .",
    "the resulting sequence of trees is indexed by @xmath158 rather than @xmath159 , and if we shift the indices by one we obtain a sequence indexed by @xmath159 that has the same distribution as @xmath113 .",
    "it is well - known ( see @xcite ) that the doob - martin compactification of the state space @xmath160 of the classical plya urn results in a doob - martin boundary that is homeomorphic to the unit interval @xmath91 $ ] : a sequence of pairs @xmath161 from @xmath160 converges to a point in the boundary if and only if @xmath162 and @xmath163 for some @xmath164 $ ] .",
    "we can , of course , identify @xmath91 $ ] with the space of probability measures on a set with two points , say @xmath18 , by identifying @xmath164 $ ] with the probability measure that assigns mass @xmath165 to the point @xmath56 .",
    "it is a consequence of results we prove in section  [ s : general_trickle ] that this result `` lifts '' to the binary search tree process : the doob - martin boundary is homeomorphic to the space of probability measures on @xmath166 equipped with the weak topology corresponding to the product topology on @xmath166 and a sequence @xmath167 of finite rooted binary trees converges to the boundary point identified with the probability measure @xmath168 if and only if @xmath169 and for each @xmath170 @xmath171 where we extend the partial order @xmath172 on @xmath24 to @xmath173 by declaring that two distinct elements of @xmath166 are not comparable and @xmath39 is dominated by @xmath174 if @xmath137 is a prefix of @xmath107 .",
    "an outline of the remainder of the paper is the following . in section  [ s : trickle_general ] we give a general version of the trickle - down construction in which the complete rooted binary tree @xmath175 is expanded to a broad class of directed acyclic graphs with a unique `` root '' vertex and",
    "the independent plya urns at each vertex are replaced by independent markov chains that keep a running total of how many particles have been routed onwards to each of the immediate successors of the vertex .",
    "for example , we could take the graph to be @xmath176 with directed edges of the form @xmath177 and @xmath178 ( so that the root is @xmath179 ) and take the markov chain at vertex @xmath180 to correspond to successive particles being routed independently with equal probability to either @xmath177 or @xmath178 .",
    "this gives a process somewhat reminiscent of sir francis galton s _ quincunx _  a device used to illustrate the binomial distribution and central limit theorem in which successive balls are dropped onto a vertical board with interleaved rows of horizontal pins that send a ball striking them downwards to the left or right `` at random '' .",
    "we illustrate the first few steps in the evolution of the set of occupied vertices in figure  [ fig : quincunx_evolve ] .     with directed edges of the form @xmath177 and @xmath178 .",
    "the root @xmath179 is drawn at the top . dashed lines show that paths taken by successive particles as they pass through occupied vertices until they come to rest at the first unoccupied vertex they encounter.,scaledwidth=100.0% ]    we give a brief overview of the theory of doob - martin compactifications in section  [ s : martin_general ] .",
    "we present our main result , a generalization of the facts about the doob - martin boundary of the binary search tree process we have stated above , in section  [ s : general_trickle ] .",
    "it says for a large class of trickle - down processes that if the convergence of a sequence to a point in the doob - martin boundary for each of the component markov chains is determined by the convergence of the proportions of points that are routed to each of the immediate successors , then the doob - martin boundary of the trickle - down process is homeomorphic to a space of probability measures on a set of directed paths from the root that either have infinite length or are `` killed '' at some finite time .",
    "we then consider special cases of this general result in section  [ s : bst_and_dst ] , where we investigate the binary and digital search tree processes , and in section  [ s : rrt_and_crt ] , where we study random recursive tree processes that are related to a hierarchy of chinese restaurant processes .",
    "more specifically , we show in section  [ s : bst_and_dst ] that , as we already noted above , the doob - martin boundary of the bst process may be identified with the space of probability measures on @xmath166 equipped with the weak topology corresponding to the product topology on @xmath166 , that every boundary point is extremal , that the _ digital search tree _",
    "process is a doob @xmath5-transform of the bst process with respect to the extremal harmonic function corresponding to the fair coin - tossing measure on @xmath166 , and that an arbitrary doob @xmath5-transform may be constructed from a suitable `` trickle - up '' procedure in which particles come in successively from the `` leaves at infinity '' of the complete rooted binary tree @xmath175 ( that is from @xmath166 ) and work their way up the tree until they can move no further because their path is blocked by an earlier particle .",
    "we observe in section  [ s : rrt_and_crt ] that the _ random recursive tree ( rrt ) process _  see @xcite for a review  can be built from the above sequence @xmath181 of uniform permutations in a manner analogous to the construction of the bst process by using a different bijection between permutations and trees .",
    "the rrt process is also a trickle - down process similar to the bst process , with the tree @xmath175 replaced by the tree @xmath182 and the plya urn routing instructions replaced by the markov chain that gives the block sizes in the simplest _ chinese restaurant process _ model of growing random partitions .",
    "we extend this construction to incorporate pitman s two - parameter family of chinese restaurant processes and then investigate the associated doob - martin compactification .",
    "we identify the doob - martin boundary as a suitable space of probability measures , show that all boundary points are extremal , demonstrate that @xmath5-transform processes may be constructed via a `` trickle - up '' procedure similar to that described above for the bst process , and relate the limit distribution to the _ griffiths  engen  mccloskey ( gem ) distributions_. similar nested hierarchies of chinese restaurant processes appear in @xcite and in @xcite in the statistical context of mixture models , hierarchical models , and nonparametric bayesian inference .",
    "a commonly used probability distribution on the set of permutations of a finite set is the mallows @xmath0 model ",
    "see @xcite  for which the uniform distribution is a limiting case .",
    "this distribution extends naturally to the set of permutations of @xmath159 , and applying the obvious generalization of the above bijection between finite permutations and labeled finite rooted subtrees of the complete rooted binary tree @xmath24 leads to an interesting probability distribution on infinite rooted subtrees of @xmath24 . in section  [ s : mallows ]",
    "we relate this distribution to yet another model for growing random finite trees that we call the _ mallows tree process_. we show that the doob - martin boundary of this markov chain is a suitable space of infinite rooted subtrees of @xmath24 .",
    "we outline a parallel analysis in section  [ s : q_chain ] for a somewhat similar process that is related to schtzenberger s non - commutative @xmath1-binomial theorem and its connection to weighted enumerations of `` north - east '' lattice paths .",
    "the routing instruction processes that appear in the trickle - down construction of the mallows tree process have the feature that if we know the state of the chain at some time , then we know the whole path of the process up to that time .",
    "we observe in section  [ sec : memory ] that such processes may be thought of as markov chains on a rooted tree with transitions that always go to states that are one step further from the root .",
    "as one might expect , the doob - martin compactification in this case is homeomorphic to the usual end compactification of the tree .",
    "we use this observation to describe the doob - martin compactification of a certain markov chain that takes values in the set of compositions of the integers and whose value at time @xmath15 is uniformly distributed over the compositions of @xmath15 .",
    "as we have already remarked , our principal reason for studying the doob - martin compactification of a trickle - down chain is to determine the chain s tail @xmath2-field .",
    "the doob - martin compactification gives even more information about the asymptotic behavior of the chain , but it is not always easy to compute .",
    "we describe another approach to determining the tail @xmath2-field of certain trickle - down chains in section  [ s : freezing ] .",
    "that result applies to the mallows tree process and the model related to the non - commutative @xmath1-binomial theorem",
    ". we also apply it in section  [ s : catalan_trees ] to yet another markov chain model of growing random trees from @xcite .",
    "the latter model , which turns out to be of the trickle - down type , has as its state space the set of finite rooted binary trees and is such that if it is started at time @xmath77 in the trivial tree @xmath183 , then the value of the process at time @xmath15 is equally likely to be any of the @xmath184 rooted binary trees with @xmath15 vertices , where @xmath185 is the _ @xmath186 catalan number_. even though we can not determine the doob - martin compactification of this chain , we are able to show that its tail @xmath2-field is generated by the random infinite rooted subtree of the complete binary tree that is the ( increasing ) union of the successive values of the chain . also , knowing the tail @xmath2-field allows us to identify the poisson boundary  see section  [ s : martin_general ] for a definition of this object .",
    "we observe that there is some similarity between the trickle - down description of the binary search tree process and the _ internal diffusion limited aggregation model _ that was first named as such in @xcite after it was introduced in @xcite .",
    "there particles are fed successively into a fixed state of some markov chain and they then execute independent copies of the chain until they come to rest at the first unoccupied state they encounter .",
    "the digital search tree process that we discuss in section  [ s : bst_and_dst ] turns out to be internal diffusion limited aggregation model for the markov chain on the complete rooted binary tree that from the state @xmath137 moves to the states @xmath154 and @xmath155 with equal probability .",
    "finally , we note that there are a number of other papers that investigate the doob - martin boundary of markov chains on various combinatorial structures such as young diagrams and partitions ",
    "see , for example , @xcite .",
    "we begin by introducing a class of directed graphs with features generalizing those of the complete binary tree @xmath24 considered in the introduction .",
    "let @xmath187 be a countable directed acyclic graph . with a slight abuse of notation ,",
    "write @xmath188 to indicate that @xmath137 is a vertex of @xmath187 . given two vertices @xmath189 ,",
    "write @xmath28 if @xmath27 is a directed edge in @xmath187 .",
    "suppose that there is a unique vertex @xmath190 such that for any other vertex @xmath137 there is at least one finite _ directed path _",
    "@xmath191 from @xmath190 to @xmath137 .",
    "define a _ partial order _ on @xmath187 by declaring that @xmath192 if @xmath193 or there is a finite directed path @xmath194 .",
    "note that @xmath190 is the unique minimal element of @xmath187 .",
    "suppose further that the number of directed paths between any two vertices is finite : this is equivalent to supposing that the number of directed paths between @xmath190 and any vertex is finite .    for each vertex @xmath188 , set @xmath195 and @xmath196 that is , @xmath197 and @xmath198 are , respectively , the immediate predecessors and the immediate successors of @xmath137 .",
    "suppose that @xmath198 is non - empty for all @xmath188 .",
    "thus , any path @xmath191 is the initial piece of a semi - infinite path @xmath199    we next introduce the notion of _ routing instructions _ that underlies the construction of a sequence of connected subsets of @xmath187 via a trickle - down mechanism analogous to that described in the introduction for the bst : at each point in time a particle is fed into @xmath190 and trickles down through @xmath187 according to the routing instructions at the occupied vertices it encounters until it finds a vacant vertex to occupy .",
    "let @xmath200 be the space of functions on the set of successors of @xmath201 that take values in the non - negative integers .",
    "let @xmath202 , @xmath203 , be the function that takes the value @xmath56 at @xmath107 and @xmath77 elsewhere .",
    "that is , if we regard @xmath202 as a vector indexed by @xmath198 , then @xmath202 has @xmath56 in the @xmath204 coordinate and @xmath77 elsewhere .",
    "formally , a routing instruction for the vertex @xmath205 is a sequence @xmath206 of elements of @xmath207 with the properties :    * @xmath208 , * for each @xmath209 , @xmath210 for some @xmath211 .",
    "the interpretation of such a sequence is that , for each @xmath212 , the component @xmath213 counts the number of particles out of the first @xmath15 to pass through the vertex @xmath137 that are routed onwards to vertex @xmath212 .",
    "the equation @xmath210 indicates that the @xmath186 such particle is routed onwards to the vertex @xmath211 .    for @xmath214 we put latexmath:[\\[\\label{e :",
    "def_norm }    @xmath206 for the vertex @xmath137 satisfies @xmath216 for all @xmath217 .    for each vertex @xmath205",
    ", suppose that we have a non - empty set @xmath218 of routing instructions for @xmath137 .",
    "put @xmath219 .",
    "depending on convenience , we write a generic element of @xmath220 in the form @xmath221 or the form @xmath222 . recall that @xmath223 is an element of @xmath207 , and",
    "so it has coordinates @xmath224 for @xmath225 .",
    "given @xmath226 , each vertex @xmath137 of @xmath227 has an associated _ clock _",
    "@xmath228 such that @xmath229 counts the number of particles that have passed through @xmath137 by time @xmath15 and been routed onwards to some vertex in @xmath198 . for",
    "each @xmath230 and @xmath231 the integers @xmath229 , @xmath232 , are defined recursively ( with respect to the partial order on @xmath187 ) as follows :    * @xmath233 , * @xmath234 , @xmath235",
    ".    in particular , @xmath236 .",
    "the equation in ( b ) simply says that the number of particles that have been routed onwards from the vertex @xmath137 by time @xmath15 is equal to the number of particles that have passed through vertices @xmath107 with @xmath237 and have been routed in the direction of @xmath137 , excluding the first particle that reached the vertex @xmath137 and occupied it .",
    "we say that the sequence @xmath238 given by @xmath239 is the _ result of the trickle - down construction for the routing instruction _ @xmath226 .",
    "[ e : quincunx ] suppose that the directed graph @xmath187 has @xmath176 as its set of vertices and directed edges of the form @xmath177 and @xmath178 .",
    "the root is @xmath179 .",
    "* figure  [ fig : quincunx ] shows the state at time @xmath240 ( that is , the values of @xmath241 for @xmath242 ) generated by routing instructions whose initial pieces are @xmath243 @xmath244 when the states @xmath245 and @xmath246 that comprise @xmath198 , the immediate successors of @xmath137 , are taken in that order . *",
    "the clock @xmath247 , which translates from `` real time '' to the `` local time '' at the vertex @xmath248 by counting the particles that pass through this vertex , has a corresponding sequence of states that begins @xmath249 , @xmath250 . *",
    "the configuration @xmath251 consists of a pair @xmath252 for every @xmath242 .",
    "each such pair records the onward routings by time @xmath253 to the immediate successors @xmath254 of @xmath137 . following through the construction gives @xmath255 , @xmath256 , @xmath257 , @xmath258 , with all the other components of @xmath251 being @xmath179 .",
    "for example , the value @xmath257 indicates that by time @xmath253 the vertex @xmath151 has been occupied , @xmath73 particles have been sent onwards to the vertex @xmath259 , and @xmath77 particles have been sent onwards to the other immediate successor @xmath260 . *",
    "looking at the state @xmath241 , @xmath188 , at time @xmath240 we can not reconstruct the relevant initial segments of the routing instructions but we can see , for example , that * * @xmath261 particles have been fed into the root @xmath179 : the first of these stayed at the root , @xmath262 of the remainder were routed onwards to @xmath150 and the other @xmath262 were routed onwards to @xmath151 ( that is , @xmath263 and @xmath264 ) ; * * of the @xmath262 particles routed from the root towards @xmath150 , the first stayed there , @xmath73 of the remainder were routed onwards to @xmath265 and the other @xmath74 were routed onwards to @xmath259 ( that is , @xmath266 and @xmath267 ) ; * * of the @xmath262 particles routed from the root towards @xmath151 , the first stayed there , @xmath74 of the remainder were routed onwards to @xmath259 and the other @xmath73 were routed onwards to @xmath260 ( that is , @xmath268 and @xmath269 ) .     on @xmath270 .",
    "see the text for details.,scaledwidth=100.0% ]    for each vertex @xmath205 , write @xmath271 for the set of vectors that can appear as an entry in an element of @xmath218 .",
    "that is , @xmath272 if and only if @xmath273 for some sequence @xmath274 , where , of course , @xmath275 .",
    "note that the set @xmath276 is countable .",
    "let @xmath277 denote the subset of @xmath278 consisting of points @xmath279 that can be constructed as @xmath280 for some @xmath281 and some @xmath282 ; that is , @xmath8 appears as the value at time @xmath283 in the result of the trickle - down construction for the routing instruction @xmath2 .",
    "clearly , if a sequence @xmath284 belongs to @xmath277 , then @xmath285    given two points @xmath286 , say that @xmath287 if for some @xmath288 with @xmath289 and some @xmath226 we have @xmath290 and @xmath291 for all @xmath188 .",
    "[ r : hit_condition ] note that if @xmath287 , then @xmath292 for all @xmath188 and @xmath212 .",
    "moreover , if @xmath287 , then @xmath293    [ e : dag_tree ] suppose that @xmath187 is a _ tree_. this amounts to imposing the extra condition that for each vertex @xmath188 there is a * unique * directed path from @xmath190 to @xmath137 . for each @xmath188 take @xmath218 to be the set of all allowable routing instructions for @xmath137 , so that the corresponding set @xmath294 is @xmath200 .",
    "in this case , there is a bijection between @xmath277 and finite subtrees of @xmath187 that contain the root @xmath190 .",
    "an element @xmath295 determines a finite rooted subtree @xmath37 by @xmath296 in other words , the tree @xmath37 consists of those vertices of @xmath187 that are occupied by the first @xmath297 particles .",
    "conversely , if @xmath37 is a finite subtree of @xmath187 that contains @xmath190 , then the corresponding element of @xmath277 is @xmath298 that is , @xmath8 appears as the result of the trickle down construction at some time @xmath15 and for each pair of vertices @xmath188 and @xmath212 the integer @xmath299 gives the number of particles that have been routed onwards from vertex @xmath188 to vertex @xmath212 by time @xmath15 .",
    "the partial order @xmath300 on @xmath277 is equivalent to containment of the associated subtrees . from now on ,",
    "when @xmath187 is a tree we sometimes do not mention this bijection explicitly and abuse terminology slightly by speaking of @xmath277 as the set of finite subtrees of @xmath187 that contain the root @xmath190 .",
    "[ e : trail ] in example  [ e : dag_tree ] , the set @xmath294 of states for the routing instructions at any vertex @xmath188 is all of @xmath200 . at the other extreme we have what we call the _ single trail _ routing : as always , the first item is put into the root , but now , in the step from @xmath15 to @xmath101",
    ", the new item follows the trail @xmath301 left by the last one and then chooses @xmath302 from @xmath303 . in this case ,",
    "@xmath304 , where @xmath77 is the zero vector in @xmath200 .",
    "examples of this type appear in section  [ sec : memory ] .",
    "[ r : dag_tree ] in the setting of example  [ e : dag_tree ] , the sequence @xmath305 in @xmath277 constructed by setting @xmath306 for some @xmath226 corresponds to a sequence of growing subtrees that begins with the trivial tree @xmath307 and successively add a single vertex that is connected by a directed edge to a vertex present in the current subtree , and this correspondence is bijective . in example",
    "[ e : trail ] , a sequence @xmath305 in @xmath277 corresponds to the sequence of initial segments of some infinite directed path , @xmath308 through @xmath187 , and this correspondence is also bijective .",
    "we now choose the routing instructions randomly in order to produce an @xmath277-valued stochastic process .    for each @xmath309 ,",
    "let @xmath310 be a transition matrix whose rows and columns are indexed by some subset @xmath311 such that @xmath312 , and @xmath313 for @xmath314 implies that @xmath315 for some @xmath212 .",
    "let @xmath218 be the set of sequences @xmath316 in @xmath317 that satisfy @xmath208 and @xmath318 for all @xmath319 .",
    "then @xmath218 is a set of routing instructions for the vertex @xmath137 .",
    "define , as in the previous subsection , @xmath320 to be the set of elements of @xmath321 that can appear as an entry in an element of @xmath218 .",
    "note that @xmath322 : the set @xmath320 consists of the states that are reachable by a markov chain with transition matrix @xmath310 started from the state @xmath323 .",
    "we will suppose from now on that @xmath324 .",
    "write @xmath147 for the corresponding @xmath294-valued markov chain with its associated collection of probability measures @xmath325 , @xmath326 .",
    "a realization of the process @xmath327 starting from the zero vector in @xmath200 will serve as the routing instruction for the vertex @xmath137 ; that is , the @xmath186 particle that trickles down to @xmath137 and finds @xmath137 occupied will be routed onward to the immediate successor @xmath212 specified by @xmath328 . by assumption , and with @xmath77 the zero vector in @xmath200 , @xmath327 has positive probability under @xmath329 of hitting any given state in @xmath294",
    ". we will refer to @xmath327 as the _ routing chain for the vertex _",
    "@xmath137 . let @xmath330 , where the component processes @xmath327 are independent and have distribution @xmath329 .    with @xmath331 the clocks defined in section  [ ss : routing ] , set @xmath332 thus ,",
    "@xmath333 is an @xmath334-valued stochastic process with non - decreasing paths and initial value @xmath323 . when @xmath335 , the value of the process @xmath336 at time @xmath15 is a vector @xmath337 : the non - negative integer @xmath157 records the number of particles that have trickled down to the vertex @xmath137 by time @xmath15 , found @xmath137 already occupied , and have been routed onwards .",
    "define @xmath338 by construction , @xmath339 is a markov chain on the countable state space @xmath277 under the probability measure @xmath340 .",
    "the paths of @xmath341 start from the state @xmath323 and increase strictly in the natural partial order on @xmath277 .",
    "the random vector @xmath342 gives for each immediate successor @xmath212 of @xmath137 the number of particles that have trickled down to @xmath137 by time @xmath15 , found @xmath137 already occupied , and have been routed onwards towards @xmath107 .",
    "by standard arguments , we can construct a measurable space @xmath343 , a family of probability measures @xmath344 and an @xmath277-valued stochastic process @xmath345 such that @xmath346 under @xmath347 is a markov chain with @xmath348 and the same transition mechanism as @xmath341 .",
    "[ r : hereditary ] note that if @xmath349 is a subset of @xmath187 with the property that @xmath350 for all @xmath351 , then @xmath352 is a markov chain under @xmath347 .",
    "moreover , the law of the latter process under @xmath347 agrees with its law under @xmath353 for any @xmath354 with @xmath355 for all @xmath351 .",
    "we restrict the following sketch of doob - martin compactification theory for discrete time markov chains to the situation of interest in the present paper .",
    "the primary reference is @xcite , but useful reviews may be found in ( * ? ? ?",
    "* chapter 10 ) , ( * ? ? ? * chapter 7 ) , @xcite , ( * ? ? ?",
    "* chapter iv ) , ( * ? ? ?",
    "* chapter iii ) .",
    "suppose that @xmath356 is a discrete time markov chain with countable state space @xmath357 and transition matrix @xmath358 .",
    "define the _ green kernel _ or _ potential kernel _ @xmath359 of @xmath358 by @xmath360 for @xmath361 and assume that there is a reference state @xmath362 such that @xmath363 for all @xmath364 .",
    "this implies that any state can be reached from @xmath365 and that every state is transient . for the chains to which we apply the theory , the state space @xmath357 is a partially ordered set with unique minimal element @xmath365 and transition matrix @xmath358 such that @xmath366 unless @xmath33 , so that the sample paths of the chain are _ increasing _ and @xmath367 for all @xmath361 .",
    "a function @xmath368 is said to be _ excessive _ ( respectively , _ regular _ ) if @xmath369 for all @xmath370 ( respectively , @xmath371 for all @xmath370 ) .",
    "excessive functions are also called _ non - negative superharmonic functions_. similarly , regular functions are also called _ non - negative harmonic functions_. given a finite measure @xmath168 on @xmath357 , define a function @xmath372 by @xmath373 for @xmath370 .",
    "the function @xmath374 is excessive and is called the _ potential _ of the measure @xmath168 .",
    "the riesz decomposition says that any excessive function @xmath375 has a unique decomposition @xmath376 , where @xmath5 is regular and @xmath377 is the potential of a unique measure @xmath378 .    note for any excessive function @xmath375 that @xmath379 , and",
    "so @xmath380 implies that @xmath381 .",
    "therefore , any excessive function is a constant multiple of an element of the set @xmath382 of excessive functions that take the value @xmath56 at @xmath365 . the set @xmath382 is a compact convex metrizable subset of the locally convex topological vector space @xmath383 .    the _ martin kernel with reference state @xmath365 _ is given by @xmath384 that is",
    ", @xmath385 is the potential of the unit point mass at @xmath386 normalized to have value @xmath56 at the point @xmath362 . for each @xmath364 the function",
    "@xmath385 belongs to @xmath382 and is non - regular .",
    "moreover , @xmath385 is an extreme point of @xmath382 and any extreme point of @xmath382 that is not of the form @xmath385 for some @xmath364 is regular .",
    "it also follows from the riesz decomposition that the map @xmath387 given by @xmath388 is injective .",
    "therefore , we can identify @xmath357 with its image @xmath389 that sits densely inside the compact closure @xmath390 of @xmath391 in @xmath382 . with the usual slight abuse of terminology",
    ", we treat @xmath357 as a subset of @xmath390 and use the alternative notation @xmath392 for @xmath390 .",
    "the construction of the compact metrizable space @xmath392 from @xmath357 using the transition matrix @xmath358 and the reference state @xmath365 is the _ doob - martin compactification _ of @xmath357 and the set @xmath393 is the _ doob - martin boundary _ of @xmath357 .    by definition ,",
    "a sequence @xmath394 in @xmath357 converges to a point in @xmath392 if and only if the sequence of real numbers @xmath395 converges for all @xmath396 .",
    "each function @xmath397 extends continuously to @xmath392 and we call the resulting function @xmath398 the _ extended martin kernel_.    the set of extreme points @xmath399 of the convex set @xmath390 is a @xmath400 subset of @xmath390 and any regular function @xmath401 ( that is , any regular function @xmath5 with @xmath402 ) has the representation @xmath403 for some unique probability measure on @xmath390 that assigns all of its mass to @xmath404 .",
    "the primary probabilistic consequence of the doob - martin compactification is that for any initial state @xmath405 the limit @xmath406 exists @xmath407-almost surely in the topology of @xmath390 and the limit belongs to @xmath399 , @xmath407-almost surely .    if @xmath5 is a regular function ( not identical to @xmath77 ) , then the corresponding _",
    "doob @xmath5-transform _ is the markov chain @xmath408 with state space @xmath409 and transition matrix @xmath410 when @xmath5 is strictly positive , the doob - martin compactification of @xmath357 and its set of extreme points are the same for @xmath358 and @xmath411 .",
    "the regular function @xmath5 is extremal if and only if the limit @xmath412 is almost surely equal to a single point @xmath9 for some @xmath413 , in which case @xmath414 and @xmath415 .",
    "in particular , @xmath5 is extremal if and only if the tail @xmath2-field of @xmath408 is trivial . in this case",
    ", the transformed chain @xmath408 may be thought of as the original chain @xmath356 conditioned to converge to @xmath9 .",
    "the original chain is a mixture of such conditioned chains , where the mixing measure is the unique probability measure @xmath378 supported on @xmath404 such that @xmath416 .",
    "further , @xmath378 is the distribution of @xmath417 under @xmath418 .",
    "the doob - martin boundary provides a representation of the non - negative harmonic functions .",
    "we close this review section with a brief discussion of a measure theoretic boundary concept that has a more direct relation to tail @xmath2-fields in the trickle - down case .",
    "the set @xmath419 of all _ bounded _ harmonic functions is a linear space and indeed a banach space when endowed with the supremum norm .",
    "the _ poisson boundary _ is a measure space @xmath420 with the property that @xmath421 and @xmath419 are isomorphic as banach spaces .",
    "the doob - martin boundary @xmath422 together with its borel @xmath2-field and the distribution @xmath378 of @xmath417 under @xmath418 provides such a measure space .",
    "our models have the specific feature that , loosely speaking , ` time is a function of space ' : the state space @xmath357 of a trickle - down chain @xmath423 may be written as the disjoint union of the sets @xmath424 let @xmath425 be the tail @xmath2-field of the chain .",
    "consider now the map that takes a bounded , @xmath425-measurable random variable @xmath341 to the function @xmath426 defined by @xmath427 for all @xmath428 , on each @xmath429 separately .",
    "note that @xmath430 $ ] . using martingale convergence and the markov property",
    ", it follows that this map is a banach space isomorphism between @xmath431 and @xmath419 .    for any embedding in which the chain converges to a limit @xmath417",
    ", this limit is @xmath425-measurable .",
    "the limit in the doob - martin compactification of a transient chain generates the invariant @xmath2-field up to null sets , where for a chain @xmath356 with state space @xmath357 , an event @xmath432 is invariant if there is a product measurable subset @xmath433 such that for all @xmath319 the symmetric difference @xmath434 has zero probability . in our models ,",
    "the limit @xmath417 in the doob - martin compactification generates the tail @xmath2-field , because it is possible to reconstruct the value of the time parameter from the state of the process at an unspecified time .",
    "conversely , from the tail @xmath2-field we may obtain the poisson boundary but not , in general , the doob - martin boundary .",
    "for each @xmath435 , let @xmath310 be a transition matrix on @xmath436 with the properties described in section [ ss : trickle_down_chains ] .",
    "the following result is immediate from the construction of the trickle - down chain @xmath346 and remark  [ r : hit_condition ] .",
    "[ l : hit_prob_is_product ] consider elements @xmath279 and @xmath437 of @xmath277 .",
    "write @xmath438 and @xmath439 . then , @xmath440 the product is zero unless @xmath287 ( equivalently , @xmath441 for all @xmath188 ) .",
    "only finitely many terms in the product differ from @xmath56 , because @xmath442 ( equivalently , @xmath443 ) for all but finitely many values of @xmath188 .",
    "[ c : martin_kernel_is_product ] the martin kernel of the markov chain @xmath346 with respect to the reference state @xmath190 is given by @xmath444 where @xmath445 is the martin kernel of the markov chain @xmath327 with respect to reference state @xmath446 .",
    "the product is zero unless @xmath287 ( equivalently , @xmath441 for all @xmath188 ) .",
    "only finitely many terms in the product differ from @xmath56 , because @xmath447 for all but finitely many values of @xmath188 .",
    "it suffices to note that @xmath448 and @xmath449and then apply lemma  [ l : hit_prob_is_product ] .",
    "[ e : bst ] consider the bst process from the introduction .",
    "recall that in this case the directed graph @xmath187 is the complete binary tree @xmath24 and each of the processes @xmath148 is the classical plya urn in which we have an urn consisting of black and white balls , we draw a ball uniformly at random at each step and replace it along with one of the same color , and we record the number of black and white balls present in the urn at each step .",
    "note that if we start the plya urn with @xmath450 black and @xmath451 white balls , then the probability that we ever see @xmath452 black balls and @xmath453 white balls is the probability that after @xmath454 steps we have added @xmath455 black balls and @xmath456 white balls .",
    "the probability of adding the extra balls in a particular specified order is @xmath457 ( the fact that this probability is the same for all orders is the fundamental exchangeability fact regarding the plya urn ) .",
    "the probability of adding the required extra balls of each color in some order is therefore @xmath458 hence , @xmath459 for @xmath460 , and so @xmath461    suppose that @xmath286 with @xmath287 .",
    "it follows from corollary  [ c : martin_kernel_is_product ] that @xmath462    recall from example  [ e : dag_tree ] that we may associate @xmath8 and @xmath9 with the two subtrees @xmath463 and @xmath464 in which case @xmath465 for @xmath466 and @xmath467 ( respectively , @xmath468 for @xmath469 and @xmath467 ) .",
    "note for @xmath470 that @xmath471 and that @xmath472 similar relations exist for @xmath9 and @xmath37 .",
    "it follows that @xmath473 @xmath474 @xmath475 and @xmath476 so we arrive at the simple formula @xmath477    this formula may also be obtained without using corollary  [ c : martin_kernel_is_product ] as follows . with a slight abuse of notation , we think of the process @xmath356 as taking values in the set of finite subtrees of @xmath24 containing the root @xmath19 .",
    "we first want a formula for @xmath478 when @xmath63 and @xmath37 are two such trees with @xmath479 .",
    "for ease of notation , set @xmath480 and @xmath481 .",
    "it is known ( see , for example , @xcite ) that @xmath482 write @xmath483 for the `` external vertices '' of @xmath63 ; that is , the elements of @xmath24 that are connected to a vertex of @xmath63 by a directed edge , but are not vertices of @xmath63 themselves ( recall figure  [ fig : binary_tree_external ] ) .",
    "denote by @xmath484 , @xmath485 the subtrees of @xmath37 that are rooted at these vertices ; that is , the @xmath484 are the connected components of @xmath486 . in order for the bst process to pass from @xmath63 to @xmath37",
    "it needs to place the correct number @xmath487 of vertices into each of these subtrees and , moreover , the subtrees have to be equal to @xmath484 , for @xmath485 . the process that tracks the number of vertices in each subtree is , after we add the vector @xmath488 , a multivariate plya urn model starting with @xmath489 balls , all of different colors .",
    "thus , the probability that each subtree has the correct number of vertices is @xmath490 using a standard argument for the plya urn ( * ? ? ?",
    "* chapter 4.5 ) .",
    "moreover , it is apparent from the recursive structure of the bst process that , conditional on @xmath489 subtrees receiving the correct number of vertices , the probability the subtrees are actually @xmath491 is @xmath492 thus , @xmath493 and follows upon taking the appropriate ratio .",
    "with example  [ e : bst ] in mind , we now begin to build a general framework for characterizing the doob - martin compactification of a trickle - down chain in terms of the compactifications of each of the routing chains .",
    "[ p : component_convergence ] suppose @xmath494 is a sequence in @xmath277 such that @xmath495 exists in the doob - martin topology of @xmath496 for each @xmath188 .",
    "then , @xmath494 converges in the doob - martin topology of @xmath277 to a limit @xmath497 and the value at @xmath498 of the extended martin kernel is @xmath499 .",
    "the assumption that @xmath495 exists in the doob - martin topology of @xmath496 for each @xmath188 implies that @xmath500 exists for each @xmath188 and @xmath326 .",
    "this limit is , by definition , the value @xmath501 of the extended martin kernel .",
    "we need to show for all @xmath295 that @xmath502 exists and is given by @xmath503 .",
    "it follows from corollary  [ c : martin_kernel_is_product ] that @xmath504 .",
    "we also know from that result that we may restrict the product to the fixed , finite set of @xmath137 for which @xmath505 , and hence we may interchange the limit and the product .",
    "proposition  [ p : component_convergence ] shows that if the sequence @xmath494 in @xmath277 is such that for each @xmath188 the component sequence @xmath506 converges in the doob - martin compactification of @xmath294 , then @xmath494 converges in the doob - martin compactification of @xmath277 .    establishing results in the converse direction is somewhat tricky , since @xmath504 might converge because @xmath507 converges to @xmath77 for some particular @xmath508 , and so we are not able to conclude that @xmath509 converges for all @xmath188 .",
    "instances of this possibility appear in section  [ s : mallows ] and section  [ s : q_chain ] .",
    "the following set of hypotheses gives one quite general setting in which it is possible to characterize the doob - martin compactification of @xmath277 in terms of the compactifications of the component spaces @xmath294 .",
    "these hypotheses are satisfied by a number of interesting examples such as the binary search tree and the random recursive tree processes ( see example  [ ex : bst_ratios ] and example  [ ex : space_time_rw ] below as well as section  [ s : bst_and_dst ] and section  [ s : rrt_and_crt ] ) . the key condition is part ( iii ) of the following set of hypotheses : it requires that the doob - martin boundary of the routing chain for the vertex @xmath137 may be thought of as a set of subprobability measures on @xmath198 that arise as the vector of limiting proportions of particles that have been routed onward to the various elements of @xmath198 .",
    "[ h : convergence_equivalent_ratios ] suppose that the following hold for all @xmath188 .",
    "* writing @xmath510 for @xmath326 , the sets @xmath511 are finite for all @xmath281 , so that if @xmath512 is a sequence from @xmath294 , then the two conditions @xmath513 and @xmath514 are equivalent . * in order that a sequence @xmath512 from @xmath294 is such that @xmath515 converges as @xmath516 for all @xmath326 , it is necessary and sufficient that either @xmath517 or that the equivalent conditions and hold and , in addition , @xmath518 * if @xmath519 and @xmath520 are two sequences from @xmath294 such that @xmath521 and @xmath522 for all @xmath523 and both @xmath524 and @xmath525 converge for all @xmath326 , then @xmath526 for all @xmath326 if and only if @xmath527 for all @xmath212 .",
    "it follows that there is a natural bijection between @xmath528 , where @xmath529 is the doob - martin compactification of @xmath294 , and the set @xmath530 of subprobability measures on @xmath198 that are limits in the vague topology of probability measures of the form @xmath531 where @xmath512 is a sequence from @xmath294 that satisfies . *",
    "the bijection between @xmath532 and @xmath530 is a homeomorphism if the former set is equipped with the trace of the doob - martin topology and the latter set is equipped with the trace of the vague topology .",
    "* there is a collection @xmath533 such that if @xmath512 is a sequence from @xmath294 that satisfies and @xmath534 exists for all @xmath535 , then @xmath536 exists for all @xmath326 .",
    "moreover , if @xmath519 and @xmath520 are two sequences from @xmath294 that both satisfy and @xmath537 for all @xmath535 , then @xmath526 for all @xmath326 .",
    "* suppose that @xmath512 is a sequence from @xmath294 such that holds and @xmath515 converges as @xmath516 for all @xmath326 .",
    "let @xmath538 be the subprobability vector of limiting proportions defined by .",
    "the extended martin kernel is such that @xmath539 whenever @xmath540 for some @xmath212 with @xmath541 , whereas if @xmath542 for some @xmath212 , then there exists a sequence @xmath543 from @xmath294 such that @xmath544 , @xmath545 for @xmath546 , and @xmath547 . *",
    "a subprobability vector @xmath548 belongs to @xmath530 if and only if there is a sequence @xmath549 such that @xmath550    [ ex : bst_ratios ] hypothesis  [ h : convergence_equivalent_ratios ] holds if @xmath551 for all @xmath188 ( for example , if @xmath552 ) , @xmath553 , and the markov chains @xmath554 are such that @xmath148 are all plya s urns starting with one black ball and one white ball .",
    "this is a consequence of the results in @xcite .",
    "indeed , the same is true if for arbitrary @xmath187 with @xmath198 finite for all @xmath188 we take @xmath553 and let @xmath327 be an urn scheme of the sort considered in @xcite where there is a ( not necessarily integer - valued ) finite measure @xmath555 on @xmath198 that describes the initial composition of an urn with balls whose `` colors '' are identified with the elements of @xmath198 , balls are drawn at random and replaced along with a new ball of the same color , and @xmath556 records the number of balls of the various colors that have been drawn by time @xmath15 . in this general case ,",
    "the extended martin kernel is given by @xmath557 } \\prod_{v \\in \\beta(u ) } ( \\rho^v)^{\\xi^v},\\ ] ] where @xmath558 , @xmath510 , and @xmath559 denotes the value @xmath560 that the probability measure @xmath548 assigns to @xmath561 raised to the power @xmath562 .",
    "we may take the set @xmath563 in this case to be the coordinate vectors @xmath202 , @xmath212 , where @xmath202 has a single @xmath56 in the @xmath204 component and @xmath77 elsewhere .",
    "the set @xmath530 consists of all the probability measures on the finite set @xmath198 .",
    "[ ex : space_time_rw ] hypothesis  [ h : convergence_equivalent_ratios ] also holds if the set @xmath198 is finite for all @xmath188 , @xmath553 , and the routing chain @xmath327 is given by @xmath564 , where the @xmath565 are independent , identically distributed @xmath294-valued random variables with distribution that has support the set of coordinate vectors .",
    "if @xmath566 is the probability that the common distribution of the @xmath565 assigns to the coordinate vector @xmath202 , then the extended martin kernel is given by @xmath567 results of this type go back to @xcite and are described in @xcite .",
    "once again , we may take @xmath563 to be the set of coordinate vectors , and once again @xmath530 consists of all the probability measures on the finite set @xmath198 .    in order to state a broadly applicable result in the converse direction of proposition [ p : component_convergence ]",
    "we first need to develop some more notation and collect together some auxiliary results .",
    "adjoin a point @xmath568 to @xmath187 and write @xmath569 for the set of sequences of the form @xmath570 where either @xmath571 for all @xmath319 and @xmath572 or , for some @xmath573 , @xmath571 for @xmath574 , @xmath575 , and @xmath576 for @xmath577 .",
    "we think of @xmath569 as the space of directed paths through @xmath187 that start at @xmath190 and are possibly `` killed '' at some time and sent to the `` cemetery '' @xmath568 .",
    "write @xmath578 for the countable collection of subsets of @xmath569 of the form @xmath579 , where @xmath319 , @xmath580 for @xmath581 , and @xmath582 .",
    "denote by @xmath583 the @xmath2-field generated by @xmath578 .",
    "the following result is elementary and we leave its proof to the reader .",
    "[ l : probs_on_i_infty ] any probability measure on the measurable space @xmath584 is specified by its values on the sets in @xmath578 .",
    "the space of such probability measures equipped with the coarsest topology that makes each of the maps @xmath585 , @xmath586 , continuous is compact and metrizable .",
    "consider the case of lemma  [ l : probs_on_i_infty ] where the measure @xmath168 describes the dynamics of a markov process .",
    "that is , for each @xmath188 there is a subprobability measure @xmath587 on @xmath198 such that if the process is in state @xmath137 , then the next step is with probability @xmath588 to @xmath107 , and with probability @xmath589 to @xmath568 .",
    "label @xmath188 with @xmath590 if @xmath137 is _ reachable _ from @xmath190 ( in the classical sense of markov chains ) , and with @xmath591 otherwise .",
    "denote by @xmath592 and @xmath593 the sets of vertices labeled with @xmath590 and @xmath591 , respectively .",
    "clearly , in order to specify the distribution @xmath168 of the markovian path starting from @xmath190 it suffices to have the subprobability measures @xmath587 only for @xmath594 .",
    "note that the labeling @xmath595 has the two properties    * the vertex @xmath190 is labeled with @xmath590 ; * if for some @xmath596 every vertex @xmath467 is labeled with @xmath597 , then @xmath107 is also labeled with @xmath597 .",
    "let us now switch perspectives and start from a labeling instead of a collection of subprobability measures .",
    "[ d : admissible ] say that a labeling of @xmath187 with the symbols @xmath590 and @xmath597 is _ admissible _ if it satisfies the above two properties . write @xmath598 ( resp .",
    "@xmath599 ) for the subset of vertices labeled with @xmath590 ( resp .",
    "@xmath597 ) .    note that if @xmath600 is an admissible labeling of @xmath187 , @xmath570 is a directed path in @xmath187 with @xmath601 , and we define a sequence @xmath602 in @xmath603 by @xmath604 then @xmath602 is an element of @xmath569 .",
    "[ d : compatible ] given an admissible labeling @xmath600 of @xmath187 , say that a collection @xmath605 , where @xmath587 is a subprobability measure on @xmath198 for @xmath606 , is _",
    "compatible _ with the labeling if a vertex @xmath607 is in @xmath599 if and only if @xmath608 or @xmath609 for @xmath610 .",
    "for an admissible labeling @xmath600 of @xmath187 and a collection of subprobability measures as in definition [ d : compatible ] , compatibility of the subprobability measures with the labeling is equivalent to the equality @xmath611 , where @xmath612 is the set of vertices that are reachable from @xmath190 under the markovian dynamics specified by the subprobability measures .",
    "the assertions ( i ) , ( ii ) and ( iii ) in the following lemma , with @xmath612 and @xmath593 instead of @xmath613 and @xmath614 , are obvious .",
    "the proof of the lemma is then clear from the previous remark .",
    "[ l : equiv_compat_and_probs ] consider an admissible labeling of @xmath187 with the symbols @xmath590 and @xmath597 and a compatible collection of subprobability measures @xmath605 .",
    "* there is a unique probability measure @xmath168 on @xmath584 for which the mass assigned to the set @xmath615 is @xmath616 * the vertex @xmath137 belongs to @xmath599 if and only if @xmath617 whenever @xmath618 . * if @xmath619 and @xmath212 , then @xmath620 for any choice of @xmath621 such that the denominator is positive . in particular , it is possible to recover the labeling and the collection @xmath605 from the probability measure @xmath168 .",
    "[ t : main ] suppose that hypothesis  [ h : convergence_equivalent_ratios ] holds .",
    "denote by @xmath622 the set of pairs @xmath623 , such that @xmath600 is an admissible labeling of @xmath187 and @xmath624 is a compatible collection of subprobability measures .    *",
    "if a sequence @xmath494 in @xmath277 converges to a point in the doob - martin boundary @xmath625 , then there exists @xmath626 satisfying @xmath627 moreover , if two such sequences converge to the same point then the corresponding elements of @xmath622 coincide . *",
    "conversely , if @xmath626 , then there is a sequence @xmath494 in @xmath277 that converges to a point in the doob - martin boundary @xmath625 and satisfies .",
    "moreover , any two such sequences converge to the same point , establishing a bijection between @xmath622 and @xmath628 . * for @xmath295 and @xmath629",
    ", the value of the extended martin kernel is @xmath630 * let @xmath631 be the set of probability measures on @xmath569 constructed from elements of @xmath622 via the bijection of lemma  [ l : equiv_compat_and_probs ] .",
    "equip @xmath631 with the trace of the metrizable topology introduced in lemma  [ l : probs_on_i_infty ] .",
    "the composition of the bijection between @xmath631 and @xmath622 and the bijection between @xmath622 and @xmath628 is a homeomorphism between @xmath631 and @xmath628 .",
    "consider part ( i ) .",
    "suppose that the sequence @xmath494 converges to a point in @xmath628 ; that is , @xmath632 and no subsequence converges in the discrete topology on @xmath277 to a point of @xmath277 .",
    "thus , @xmath633    because of and hypothesis  [ h : convergence_equivalent_ratios](i ) , it follows that @xmath634    consider @xmath635 .",
    "define @xmath295 by setting @xmath636 . by the consistency condition ,",
    "this completely specifies @xmath8 . note that @xmath637 if @xmath638 . by corollary",
    "[ c : martin_kernel_is_product ] , @xmath639 and so @xmath640 exists .",
    "since this is true for all @xmath635 , it follows from hypothesis  [ h : convergence_equivalent_ratios](v ) that @xmath641 exists for all @xmath642 .",
    "hence , by hypothesis  [ h : convergence_equivalent_ratios](ii ) @xmath643 exists for all @xmath644 .",
    "write @xmath645 for the subprobability vector defined by the limits .    if @xmath646 for some @xmath644 , then , from hypothesis  [ h : convergence_equivalent_ratios](vi ) , @xmath647 for any @xmath295 with @xmath648  no matter what the values of @xmath649 are for @xmath650 .",
    "consequently , in order to understand what further constraints are placed on the sequence @xmath494 by the assumption that holds , we need only consider choices of @xmath295 with the property that @xmath651 for all @xmath644 such that @xmath646 .",
    "note from the consistency condition that for this restricted class of @xmath8 we must have @xmath637 for all @xmath652 such that all directed path from @xmath190 to @xmath451 necessarily passes through @xmath644 with @xmath646 .",
    "suppose that @xmath653 .",
    "fix a vertex @xmath654 such that @xmath655 and @xmath535 . from hypothesis",
    "[ h : convergence_equivalent_ratios](vi ) , there exists @xmath656 such that @xmath657 , and @xmath658 for @xmath659 .",
    "define @xmath295 by setting @xmath660 and @xmath661 . by the consistency condition ,",
    "this completely specifies @xmath8 . note that @xmath637 if @xmath662 . by corollary",
    "[ c : martin_kernel_is_product ] , @xmath663 and , by the choice of @xmath664 , @xmath665 converges to a non - zero value as @xmath516 .",
    "therefore , @xmath666 exists .",
    "since this is true for all @xmath535 , it follows from hypothesis  [ h : convergence_equivalent_ratios](v ) that @xmath667 exists for all @xmath326 .",
    "hence , by hypothesis  [ h : convergence_equivalent_ratios](ii ) , @xmath668 exists for all @xmath212 .",
    "write @xmath669 for the resulting subprobability measure .",
    "continuing in this way , we see that , under the assumption , if holds then there is a labeling of @xmath187 with the symbols @xmath590 and @xmath597 such that the following are true :    * the vertex @xmath190 is in @xmath598 ; * if a vertex @xmath137 is in @xmath598 , then the limiting subprobability measure @xmath670 exists ; * a vertex @xmath596 belongs to @xmath599 if and only if every vertex @xmath467 belongs to @xmath599 or @xmath609 for every vertex @xmath610 .",
    "thus , the labeling @xmath600 is admissible and the collection @xmath624 are compatible , so @xmath671 is an element of @xmath622 .",
    "suppose that @xmath494 and @xmath672 are two sequences from @xmath277 that converge to the same point in @xmath628 .",
    "then , @xmath673 and @xmath674 as @xmath675 , @xmath676 @xmath677 and @xmath678 it is clear that the vertices of @xmath187 that are labeled with the symbol @xmath590 ( resp .",
    "@xmath597 ) for the sequence @xmath494 must coincide with the vertices of @xmath187 that are labeled with the symbol @xmath590 ( resp .",
    "@xmath597 ) for the sequence @xmath672 , and @xmath679 for the common set of vertices @xmath188 labeled with @xmath590 .",
    "this completes the proof of part ( i ) .",
    "moreover , it follows from what we have just done that if @xmath295 and the convergent sequence @xmath494 is associated with @xmath680 , then @xmath681 this establishes part ( iii ) once we show part ( ii ) .",
    "now consider part ( ii ) .",
    "fix @xmath682 . by hypothesis  [ h : convergence_equivalent_ratios](vii ) , for each @xmath619 there is a sequence @xmath549 such that @xmath683 choose sequences @xmath549 for @xmath684 arbitrarily and set @xmath685 . define a sequence @xmath494 from @xmath277 by setting @xmath686 for @xmath319 and @xmath188 .",
    "it is clear from the arguments for part ( i ) that @xmath494 converges to a point in @xmath628 and holds .",
    "moreover , it follows from the same arguments that any two convergent sequences satisfying must converge to the same point . this establishes ( ii ) .",
    "the proof of ( iv ) is straightforward and we omit it .",
    "recall the binary search tree ( bst ) process from the introduction .",
    "we observed in example  [ ex : bst_ratios ] that hypothesis  [ h : convergence_equivalent_ratios ] holds for the bst process .",
    "recall from example  [ e : dag_tree ] that we can identify @xmath277 in this case with the set of finite subtrees of the complete binary tree @xmath24 that contain the root @xmath19 .",
    "moreover , it follows from the discussion in section  [ s : general_trickle ] that @xmath628 is homeomorphic to the set of probability measures on @xmath166 equipped with the weak topology corresponding to the usual product topology on @xmath166 .",
    "we therefore abuse notation slightly and take @xmath277 to be set of finite subtrees of @xmath24 rooted at @xmath19 and take @xmath628 to be the probability measures on @xmath166 .    with this identification",
    "the partial order @xmath300 on @xmath277 is just subset containment and the martin kernel is given by @xmath687 where we recall from example  [ e : bst ] that @xmath688 .",
    "a sequence @xmath167 in @xmath277 with @xmath689 converges in the doob - martin compactification of @xmath277 if and only if @xmath690 converges for all @xmath39 . moreover , if the sequence converges , then the limit can be identified with the probability measure @xmath168 on @xmath166 such that @xmath691 for all @xmath39 .",
    "recall that the partial order on @xmath24 is such that if @xmath25 and @xmath692 are two words , then @xmath192 if and only if @xmath137 is an initial segment of @xmath107 , that is , if and only if @xmath693 and @xmath30 for @xmath31 .",
    "extend this partial order to @xmath173 by declaring that any two elements of @xmath166 are not comparable and @xmath32 for @xmath694 and @xmath695 when @xmath30 for @xmath31 . given @xmath696 , set @xmath697 that is , @xmath698 is the mass assigned by @xmath168 to the set of infinite paths in the complete binary tree that begin at the root and that pass through the vertex @xmath137 .",
    "the extended martin kernel is given by @xmath699    note from the construction of the bst process that its transition matrix is @xmath700 ( this is also apparent from ) .",
    "set @xmath701 for @xmath696 .",
    "the doob @xmath5-transform process corresponding to the regular function @xmath702 has state space @xmath703 and transition matrix @xmath704    it follows that the @xmath5-transformed process results from a trickle - down construction . for simplicity",
    ", we only verify this in the case when @xmath705 for all @xmath706 , so that the state - space of the @xmath5-transformed process is all of @xmath277 , and leave the formulation of the general case to the reader .",
    "the routing chain on @xmath707 has transition matrix @xmath310 given by @xmath708 and @xmath709 in other words , we can regard the routing chain as the space - time chain corresponding to the one - dimensional simple random walk that has probability @xmath710 of making a @xmath711 step and probability @xmath712 of making a @xmath713 step .",
    "we have the following `` trickle - up '' construction of the @xmath5-transformed process .",
    "suppose on some probability space that there is a sequence of independent identically distributed @xmath166-valued random variables @xmath714 with common distribution @xmath168 .",
    "for an initial finite rooted subtree @xmath715 in the state space of the @xmath5-transformed process , define a sequence @xmath716 of random finite subsets of @xmath24 inductively by setting @xmath717 and @xmath718 , @xmath719 , where @xmath720 with the convention @xmath721 .",
    "that is , at each point in time we start a particle at a `` leaf '' of the complete binary tree @xmath24 picked according to @xmath168 and then let that particle trickle up the tree until it can go no further because its path is blocked by previous particles that have come to rest .",
    "it is clear that @xmath716 is a markov chain with state space the appropriate set of finite rooted subtrees of @xmath24 , initial state @xmath715 , and transition matrix @xmath722 .",
    "it follows from the trickle - up construction and kolmogorov s zero - one law that the tail @xmath2-field of the @xmath5-transformed process is trivial , and hence @xmath168 is an extremal point of @xmath723 .",
    "alternatively , @xmath168 is extremal because it is clear from the strong law of large numbers that the @xmath5-transformed process converges to @xmath168 .",
    "consider the special case of the @xmath5-transform construction when the boundary point @xmath168 is the `` uniform '' or `` fair coin - tossing '' measure on @xmath166 ; that is , @xmath168 is the infinite product of copies of the measure on @xmath18 that assigns mass @xmath724 to each of the subsets @xmath725 and @xmath726 . in this case , the transition matrix of the @xmath5-transformed process is @xmath727 where we write @xmath728 for the length of the word @xmath137 ; that is , @xmath729 when @xmath730 .",
    "this transition mechanism is that of the _ digital search tree ( dst ) process_. we have therefore established the following result .",
    "[ t : dst_is_h - transform ] the digital search tree process is the doob @xmath5-transform of the binary search tree process associated with the regular function @xmath731 , @xmath732 . the regular function @xmath5 is extremal and corresponds to the uniform probability measure on @xmath166 thought of as an element of the doob - martin compactification of the state space @xmath277 of the bst process .",
    "consequently , the doob - martin compactification of the dst process coincides with that of the bst process .    the digital search tree ( dst ) algorithm is discussed in  @xcite and in  ( * ?",
    "* chapter  6 ) .",
    "the process in theorem  [ t : dst_is_h - transform ] appears as the output of the dst algorithm if the input is a sequence of independent and identically distributed random 0 - 1 sequences with distribution @xmath168 , where @xmath168 is the fair coin tossing measure . in the literature",
    "this assumption is also known as the symmetric bernoulli model ; in the general bernoulli model the probability @xmath733 for an individual digit  1 is replaced by an arbitrary @xmath734 . in our approach",
    "we do not need any assumptions on the internal structure of the random 0 - 1 sequences and we can work with a general distribution @xmath168 on @xmath166 .",
    "any such dst processes `` driven by @xmath168 '' is an @xmath5-transform of the bst process , provided that @xmath735 for all @xmath201 , and the trickle - up construction shows that the conditional distribution of the bst process , given that its limit is @xmath168 , is the same as the distribution of the dst process driven by @xmath168 .    in the symmetric bernoulli model ,",
    "the sample paths of the dst process converge almost surely to the single boundary point @xmath168 in the doob - martin topology , where @xmath168 is the uniform measure on @xmath166 .",
    "we now investigate the distribution of the limit of the sample paths of the bst process .",
    "there are several routes we could take .",
    "recall that the routing chains for the bst process are essentially plya urns ; that is , the routing chain @xmath736 for the vertex @xmath39 makes the transition @xmath737 with probability @xmath738 and the transition @xmath739 with probability @xmath740 .",
    "it is a well - known fact about the plya urn that , when @xmath741 , the sequence @xmath742 , @xmath743 , converges almost surely to a random variable of the form @xmath744 , where @xmath745 is uniformly distributed on @xmath91 $ ] .",
    "it follows that if we write @xmath113 for the bst process , then almost surely @xmath746 where the pairs @xmath747 , @xmath39 , are independent , the random variables @xmath748 and @xmath749 are uniformly distributed on @xmath91 $ ] , and @xmath750 .",
    "thus , the limit of the bst chain is the random measure @xmath751 on @xmath166 such that @xmath752 for all @xmath39 .",
    "another approach is to observe that , from the trickle - up description of the @xmath5-transformed processes described above and the extremality of all the boundary points , we only need to find a random measure on @xmath166 such that if we perform the trickle - up construction from a realization of the random measure , then we produce the bst process .",
    "it follows from the main result of @xcite that the random measure @xmath751 has the correct properties .",
    "yet another perspective is to observe that , by the general theory outlined in section  [ s : martin_general ] , the distribution of the limit is the unique probability measure @xmath753 on @xmath628 such that @xmath754 in the present situation the right hand side evaluates to @xmath755,\\ ] ] where @xmath756 is a random measure on @xmath166 with distribution @xmath753 . rather than simply verify that taking @xmath757 , where @xmath758 as above , has the requisite property",
    ", we consider a more extensive class of random probability measures with similar structure , compute the corresponding regular functions , and identify the transition matrices of the resulting @xmath5-transform processes .",
    "let the pairs @xmath759 , @xmath39 , be independent and take values in the set @xmath760 .",
    "define a random probability measure @xmath761 on @xmath166 by setting @xmath762 for all @xmath39 .",
    "the corresponding regular function is @xmath763 \\\\ & = ( \\#{\\mathbf{s } } ) !   \\ , { \\mathbb{e}}\\left[\\prod_{u\\in { \\mathbf{s } } } n_u \\right ] \\\\",
    "& = ( \\#{\\mathbf{s } } ) ! \\ , { \\mathbb{e}}\\left[\\prod_{u\\in { \\mathbf{s } } }   \\prod_{\\emptyset < v \\le u } r_v \\right ] \\\\ & = ( \\#{\\mathbf{s } } ) ! \\ ,   { \\mathbb{e}}\\left[\\prod_{u \\in { \\mathbf{s}}\\setminus \\{\\emptyset\\ } }   r_u^{\\ # { \\mathbf{s}}(u ) } \\right ] \\\\ & = ( \\#{\\mathbf{s } } ) ! \\ , \\prod_u a_u(\\ # { \\mathbf{s}}(u0 ) , \\ # { \\mathbf{s}}(u1 ) ) , \\\\ \\end{split}\\ ] ] where the last product is over @xmath24 and @xmath764.\\ ] ]    with this notation , the probability that the resulting @xmath5-transform of the bst process makes a transition from @xmath63 to @xmath765 is @xmath766 because @xmath767 unless @xmath768 .    the ratios in have a simple form :",
    "if @xmath769 and @xmath770 , then @xmath771 and @xmath772    suppose now that each @xmath773 has a beta distribution with parameters @xmath774 and @xmath775 , ( so that @xmath776 has a beta distribution with parameters @xmath775 and @xmath774 and the pair @xmath759 has a dirichlet distribution with parameters @xmath774 and @xmath775 ) .",
    "then , @xmath777 and the factors in and are @xmath778 respectively .",
    "as expected , the bst chain arises as the special case @xmath779 for all @xmath137 .",
    "the chain with @xmath780 for some fixed @xmath781 appears in connection with the median - of-@xmath782 version of the algorithms quicksort and quickselect ( find ) ",
    "see @xcite .",
    "a special case of the above construction arises in connection with dirichlet random measures .",
    "recall that a _ dirichlet random measure _ ( sometimes called a _ ferguson random measure _ ) _ directed by a finite measure _ @xmath378 on @xmath166 is a random probability measure @xmath783 on @xmath166 with the property that , for any borel partition @xmath784 of @xmath166 , the random vector @xmath785 has a dirichlet distribution with parameters @xmath786 .",
    "in particular , @xmath787 has a beta distribution with parameters @xmath788 and @xmath789 .",
    "it follows easily from lemma  [ l : dirichlet_fact ] below that if @xmath790 and @xmath791 for all @xmath137 in the above construction of a random probability measure using beta distributed weights , then the result is a dirichlet random measure directed by @xmath378 .",
    "( we note that the random measures that appear as the limit of the bst and median - of-(@xmath792 ) processes are * not * dirichlet . )",
    "[ l : dirichlet_fact ] suppose that @xmath793 is a dirichlet distributed random vector with parameters @xmath794 .",
    "then , the three pairs @xmath795 are independent dirichlet distributed random vectors with respective parameters @xmath796 , @xmath797 , and @xmath798 .    note that @xmath793 has the same distribution as @xmath799 where the @xmath800 are independent and @xmath801 has the gamma distribution with parameters @xmath802 . moreover ,",
    "the latter random vector is independent of the sum @xmath803 .",
    "now , @xmath804 has the same distribution as @xmath805 by the fact above , @xmath806 @xmath807 @xmath808 and @xmath809 are independent , and so @xmath810 @xmath808 and @xmath809 are independent .",
    "recall from the introduction how the binary search tree process arises from a classical bijection between permutations of @xmath16 : = \\{1,2 , \\ldots , n\\}$ ] and a suitable class of labeled rooted trees .",
    "the random recursive tree process arises from a similar , but slightly less well - known , bijection that we now describe .",
    "we begin with a definition similar to that of the complete binary tree in the introduction .",
    "denote by @xmath811 the set of finite tuples or _ words _ drawn from the alphabet @xmath159 ( with the empty word @xmath19 allowed ) .",
    "write an @xmath21-tuple @xmath812 more simply as @xmath23 .",
    "define a directed graph with vertex set @xmath813 by declaring that if @xmath25 and @xmath26 are two words , then @xmath27 is a directed edge ( that is , @xmath28 ) if and only if @xmath29 and @xmath30 for @xmath31 . call this directed graph the _ complete harris - ulam tree_.",
    "a _ finite rooted harris - ulam tree _ is a subset @xmath37 of @xmath813 with properties :    * @xmath814 , * if @xmath815 , then @xmath816 for @xmath817 and @xmath818 for @xmath819 .    as in the binary case",
    "there is a canonical way to draw a finite rooted harris - ulam tree in the plane , see figure  [ fig : harris - ulam_tree ] for an example .",
    "further , we can similarly define a vertex @xmath820 to be an external vertex of the tree @xmath37",
    "if @xmath821 and if @xmath822 is again a harris - ulam tree . note that , in contrast to the binary case , external vertices are now specified by their immediate predecessor ; in particular , a harris - ulam tree with @xmath15 vertices has @xmath15 external vertices .",
    "given a permutation @xmath44 of @xmath16 $ ] , set @xmath823 for @xmath824 .",
    "construct a finite rooted harris - ulam tree with @xmath101 vertices labeled by @xmath16 \\cup \\{0\\}$ ] from @xmath43 recursively , as follows .",
    "denote by @xmath825 the tree consisting of just the root @xmath19 labeled with @xmath77 .",
    "suppose for @xmath826 that a tree @xmath827 with @xmath405 vertices labeled by @xmath828 has already been defined .",
    "assume that @xmath829 .",
    "if @xmath830 , set @xmath831 .",
    "otherwise , set @xmath832 , where @xmath833 .",
    "let @xmath137 be the vertex in @xmath827 labeled by @xmath834 .",
    "put @xmath835 , adjoin the vertex @xmath836 to @xmath827 to create the tree @xmath837 , and label this new vertex with @xmath405 .",
    "for example , @xmath56 is always the first child of @xmath77 ( occupying the vertex @xmath56 in the complete harris - ulam tree ) and @xmath73 is either the second child of @xmath77 ( occupying the vertex @xmath73 in the complete harris - ulam tree ) or the first child of @xmath56 ( occupying the vertex @xmath838 in the complete harris - ulam tree ) , depending on whether @xmath73 appears before or after @xmath56 in the list @xmath43 .",
    "see figure  [ fig : recursive_tree ] for an instance of the construction with @xmath67 .",
    "clearly , @xmath44 can be reconstructed from the tree and its vertex labels .",
    "$ ] with @xmath839 . for the sake of clarity",
    ", the harris - ulam coding of the vertices as elements of @xmath813 is not shown .",
    "the correspondence between the labels from @xmath69 \\cup \\{0\\}$ ] and the coding of the vertices by elements of @xmath813 is @xmath840 , @xmath841 , @xmath842 , @xmath843 , @xmath844 , @xmath845 , @xmath846 , @xmath847 , @xmath848 , @xmath849 .,scaledwidth=100.0% ]    as in the introduction , given a sequence @xmath90 of independent identically distributed random variables that are uniform on the unit interval @xmath91 $ ] , define a random permutation @xmath92 of @xmath16 $ ] for each positive integer @xmath15 by setting @xmath96 . applying the bijection to @xmath92",
    ", we obtain a random labeled rooted tree and a corresponding unlabeled rooted tree that we again denote by @xmath105 and @xmath118 , respectively . both of these processes are markov chains with simple transition probabilities .",
    "for example , given @xmath118 we pick one of its @xmath101 vertices uniformly at random and connect a new vertex to it to form @xmath850 .",
    "thus , @xmath113 is the simplest _ random recursive tree _ process ( see , for example , @xcite for a survey of such models ) .    as with the bst and dst processes , we think of building the sequence @xmath113 by first building a growing sequence of finite rooted harris - ulam trees labeled with the values of the input sequence @xmath851 and then ignoring the labels .",
    "the transition rule for the richer process takes a simple form : attach a new vertex labeled with @xmath852 to the root if @xmath852 is smaller than each of the previous variables @xmath853 ; if not , then attach a new vertex labeled with @xmath852 to the existing vertex that is the labeled with the rightmost of the smaller elements .",
    "in contrast to the binary search tree situation , the labeled versions of the trees @xmath854 can now be determined from the labeled version of @xmath118 . however ,",
    "if we remove the labels then we are in the same situation as in the bst case : the next tree is obtained by choosing an external vertex of the current tree uniformly at random and attaching it to the current tree .",
    "suppose that in the tree @xmath118 the root has @xmath13 offspring .",
    "let @xmath855 denote the number of vertices in the subtrees rooted at each of these offspring , so that @xmath856 . note that in constructing @xmath850 from @xmath118 , either a new vertex is attached to the @xmath857 subtree with probability @xmath858 or it is attached to the root and begins a new subtree with probability @xmath859 .",
    "thus , the manner in which the number and sizes of subtrees rooted at offspring of the root evolve is given by the number and sizes of tables in the simplest _ chinese restaurant process _ : the @xmath186 customer to enter the restaurant finds @xmath13 tables in use with respective numbers of occupants @xmath855 and the customer either sits at the @xmath857 table with probability @xmath858 or starts a new table with probability @xmath859 .",
    "it is clear from the construction of @xmath113 that if we begin observing the subtree below one of the offspring of the root at the time the offspring first appears and only record the state of the subtree at each time it grows , then the resulting tree - valued process has the same dynamics as @xmath113 .",
    "iterating this observation , we see that we may think of @xmath113 as an infinite collection of hierarchically nested chinese restaurant processes and , in particular , that @xmath113 arises as an instance of the trickle - down construction .",
    "rather than just investigate the doob - martin compactification of @xmath113 we first recall the definition of pitman s two - parameter family of processes to which the simple chinese restaurant process belongs  see @xcite for background and an extensive treatment of the properties of these processes .",
    "we then apply the trickle - down construction to build a tree - valued markov chain that uses these more general processes as routing instructions .",
    "analogous finitely nested chinese restaurant processes have been used in hierarchical bayesian inference @xcite .",
    "a member of the family of chinese restaurant processes is specified by two parameters @xmath860 and @xmath664 that satisfy the constraints @xmath861 or @xmath862 at time @xmath863 the state of the process is a partition @xmath864 of the set @xmath865 $ ] with @xmath866 blocks that are thought of as describing the composition of @xmath866 occupied tables .",
    "the next customer arrives at time @xmath867 and decides either to sit at an empty table with probability @xmath868 thereby adjoining an extra block @xmath869 to the partition and increasing the number of blocks by @xmath56 , or else to sit at an occupied table @xmath870 of size @xmath871 with probability @xmath872 thereby replacing the block @xmath452 by the block @xmath873 and leaving the number of blocks unchanged .",
    "the probability that the partition of @xmath874 $ ] we see at time @xmath1 is @xmath875 with block sizes @xmath876 is @xmath877 note that if @xmath878 and @xmath879 for some @xmath880 , then , with probability one , the number of blocks in the partition is always at most @xmath751 .",
    "we are only interested in the process that records the number and size of the blocks .",
    "this process is also markov .",
    "the probability that the random partition at time @xmath1 has block sizes @xmath881 is @xmath882 the ordering of the blocks in this formula is their order of appearance : @xmath883 is the size of the initial table , @xmath884 is the size of the table that began receive customers next , and so on .    more generally , the probability that we go from the partition @xmath885 at time @xmath863 to the partition @xmath875 at time @xmath886 is @xmath887 the corresponding probability that we go from a partition with block sizes @xmath888 at time @xmath863 to one with block sizes",
    "@xmath889 at time @xmath886",
    "is @xmath890    we can think of the block size process as a markov chain with state space @xmath891 when @xmath892 and @xmath893 , or @xmath894 when @xmath878 and @xmath879 for some @xmath880 . for two states",
    "@xmath895 and @xmath896 with @xmath897 , @xmath898 when @xmath899 , @xmath900 when @xmath901 , @xmath902 , and @xmath903 , the martin kernel is @xmath904^{-1 } \\\\",
    "& \\quad \\times \\frac { ( q - p ) ! } { ( b_1-a_1 ) ! (",
    "( q - p)-(b_1-a_1 ) ) ! } \\frac { ( b_1 - 1 ) ! ( q - b_1 ) ! }",
    "{ ( q-1 ) ! } \\\\ & \\quad \\times \\frac { ( ( q - p ) - ( b_1-a_1 ) ) ! } { ( b_2-a_2 ) ! ( ( q - p)-(b_1-a_1 ) - ( b_2-a_2 ) ) ! } \\frac { ( b_2 - 1 ) ! ( q - b_1-b_2 ) ! } { ( q - b_1 - 1 ) ! } \\\\ & \\qquad \\cdots \\\\ & \\quad \\times \\frac { ( ( q - p ) - ( b_1-a_1 ) - \\cdots - ( b_{m-1}-a_{m-1 } ) ) ! } { ( b_m - a_m ) ! ( ( q - p)-(b_1-a_1 ) - \\cdots - ( b_m - a_m ) ) ! } \\\\ & \\quad \\times \\frac { ( b_m-1 ) ! ( q - b_1- \\cdots -b_m ) ! } { ( q - b_1-\\cdots - b_{m-1}-1)!}.\\\\ \\end{split}\\ ] ] this expression can be rearranged to give @xmath905^{-1 } \\\\ & \\quad \\times   \\frac { ( q - p ) ! } { ( ( q - p)-(b_1-a_1 ) - \\cdots - ( b_m - a_m ) ) ! } \\\\ & \\qquad \\times \\frac { ( b_1 - 1 ) ! } { ( b_1-a_1 ) ! } \\cdots \\frac { ( b_m-1 ) ! } { ( b_m - a_m ) ! } \\\\ & \\qquad \\times \\frac { ( q - b_1 ) ! } { ( q-1 ) ! }   \\frac { ( q - b_1-b_2 ) ! } { ( q - b_1 - 1 ) ! } \\cdots \\frac { ( q - b_1-b_2-\\cdots -b_m ) ! } { ( q - b_1-b_2-\\cdots - b_{m-1}-1 ) ! } \\\\ & \\quad = \\frac { ( \\theta+1)(\\theta+2 ) \\cdots ( \\theta+p-1 ) } { ( \\theta+\\alpha)(\\theta+2 \\alpha ) \\cdots ( \\theta+(m-1)\\alpha ) } \\left[\\prod_{k=1}^m ( 1-\\alpha ) ( 2-\\alpha ) \\cdots ( a_k-1-\\alpha)\\right]^{-1 } \\\\ & \\qquad \\times   \\left[(q - p+1 ) ( q - p+2 ) \\cdots ( q-1)\\right]^{-1 } \\\\ & \\qquad \\times   \\prod_{k=1}^m ( b_k - a_k+1 ) \\cdots ( b_k-1 )   \\prod_{k=1}^{m-1 } \\left(q - \\sum_{\\ell=1}^k b_\\ell\\right).\\\\ \\end{split}\\ ] ]    if @xmath906 is a sequence from @xmath907 such that @xmath908 for all @xmath909 , then @xmath910 . in this case , it is not hard to see that @xmath911 exists for @xmath912 if and only if @xmath913 exists for all @xmath914 .",
    "furthermore , for @xmath915 as above @xmath916^{-1 } \\\\ & \\quad \\times \\rho_1^{a_1 - 1 } \\cdots \\rho_m^{a_m-1 } \\\\ & \\quad \\times ( 1 - \\rho_1)(1-\\rho_1-\\rho_2 ) \\cdots ( 1-\\rho_1-\\rho_2-\\cdots-\\rho_{m-1 } ) \\\\ & = : k({\\mathbf{a } } , \\rho ) . \\\\ \\end{split}\\ ] ]    note that @xmath911 exists for all @xmath912 if and only if the limit exists for all @xmath912 of the form @xmath917 ( that is , for all @xmath912 with entries in @xmath18 ) .",
    "note also that the extended martin kernel has the property that @xmath918    recall that if @xmath919 is as above , then the transition probabilities of the block size process are given by @xmath920    the doob @xmath5-transform corresponding to the regular function @xmath921 therefore has transition probabilities given by @xmath922 that is , @xmath923    note that the parameters @xmath860 and @xmath664 do not appear in this expression for the transition probabilities .",
    "it follows that for a given @xmath751 the block size chains all arise as doob @xmath5-transforms of each other .",
    "we can build a markov chain @xmath716 with transition matrix @xmath924 and initial state @xmath925 as follows .",
    "let @xmath926 be a sequence of independent identically distributed random variables taking values in @xmath927 \\cup \\{\\infty\\}$ ] with @xmath928 for @xmath929 $ ] and @xmath930 ( the latter probability is always @xmath77 when @xmath751 is finite ) .",
    "define @xmath716 inductively by setting @xmath931 and , writing @xmath932 : w_{nj } = 0\\}$ ] with the usual convention that @xmath933 , @xmath934 for @xmath719 .",
    "it is clear from this construction and kolmogorov s zero - one law that the tail @xmath2-field of the chain is trivial , and so the regular function @xmath935 is extremal .",
    "fix an admissible pair of parameters @xmath860 and @xmath664 for the two - parameter chinese restaurant process .",
    "set @xmath936 when @xmath892 and @xmath937 when @xmath878 .",
    "put @xmath927 : = { \\mathbb{n}}$ ] for @xmath938 and @xmath927:=\\{1 , \\ldots , m\\}$ ] otherwise .",
    "consider the trickle - down construction with the following ingredients .",
    "the underlying directed acyclic graph @xmath187 has vertex set @xmath927^\\star:=\\bigsqcup_{k=0}^\\infty [ m]^k$ ] , the set of finite tuples or words drawn from the alphabet @xmath927 $ ] ( with the empty word @xmath19 allowed ) and directed edges are defined in a manner analogous to that in subsection  [ ss : rrt_and_perms ]  when @xmath927 = { \\mathbb{n}}$ ] we just recover the complete harris - ulam tree of subsection  [ ss : rrt_and_perms ] .",
    "thus , @xmath187 is a tree rooted at @xmath19 in which we may identify @xmath198 , the set of offspring of vertex @xmath188 , with @xmath927 $ ] for every vertex @xmath137 . with this identification , we take the routing chain for every vertex to be the chinese restaurant block size process with parameters @xmath860 and @xmath664 .",
    "we may think of the state space @xmath277 of the trickle - down chain @xmath356 as the set of finite subsets @xmath37 of @xmath187 with the property that if a word @xmath939 , then @xmath940 and @xmath941 for @xmath942 .",
    "that is , when @xmath927 = { \\mathbb{n}}$ ] we may think of @xmath277 as the set of finite rooted harris - ulam trees from subsection  [ ss : rrt_and_perms ] , and when @xmath751 is finite we get an analogous collection in which each individual has at most @xmath751 offspring .",
    "the partial order on @xmath943^\\star$ ] is the one we get by declaring that @xmath192 for two words @xmath189 if and only if @xmath65 and @xmath106 with @xmath693 and @xmath944 , just as for the complete binary tree . by analogy with the notation introduced in example  [ e : bst ] for finite rooted binary trees , write @xmath945 for @xmath946 and @xmath947^\\star$ ] .",
    "it follows from the discussion in subsection  [ ss : crps ] that hypothesis  [ h : convergence_equivalent_ratios ] holds .",
    "we may identify the set @xmath569 with @xmath948^\\infty \\sqcup \\bigsqcup_{k=0}^\\infty ( [ m]^k \\times \\{\\diamond\\}^\\infty)\\ ] ] for each vertex @xmath188 the collection @xmath530 consists of all probability measures on @xmath198 when @xmath751 is finite and all subprobability measures on @xmath198 when @xmath949",
    ". we may therefore identify @xmath628 with the probability measures on @xmath569 that assign all of their mass to @xmath927^\\infty$ ] when @xmath751 is finite and with the set of all probability measures on @xmath569 when @xmath949 .",
    "we may extend the partial order by declaring that @xmath32 for @xmath950^\\star$ ] and @xmath951^\\infty \\sqcup \\bigsqcup_{k=0}^\\infty ( [ m]^k \\times \\{\\diamond\\}^\\infty ) $ ] if and only if @xmath65 and @xmath952 with @xmath34 .",
    "the following result summarizes the salient conclusions of the above discussion .",
    "consider the chinese restaurant tree process with parameters @xmath953 , where @xmath878 and @xmath954 for some @xmath880 or @xmath892 and @xmath955 , in which case we define @xmath949 .",
    "we may identify the state space @xmath277 of this process as the set of finite rooted harris - ulam trees where the vertices are composed of digits drawn from @xmath927 $ ] .",
    "when @xmath956 ( resp .",
    "@xmath938 ) , the doob - martin boundary @xmath628 is homeomorphic to the space of probability measures on @xmath927^\\infty$ ] ( resp .",
    "@xmath927^\\infty \\sqcup \\bigsqcup_{k=0}^\\infty ( [ m]^k \\times \\{\\diamond\\}^\\infty)$ ] ) equipped with the topology of weak convergence . with this identification",
    ", a sequence @xmath167 of finite rooted harris - ulam trees converges in the topology of the doob - martin compactification @xmath723 to the ( sub)probability measure @xmath168 in the doob - martin boundary @xmath628 if and only if @xmath957 and @xmath958^\\infty \\sqcup \\bigsqcup_{k=0}^\\infty ( [ m]^k \\times \\{\\diamond\\}^\\infty ) :   u < v\\right\\}\\ ] ] for all @xmath947^\\star$ ] .",
    "suppose that @xmath938 .",
    "consider the sequence @xmath167 of finite rooted harris - ulam trees given by @xmath959 , where the notation @xmath960 indicates @xmath73 followed by @xmath13 @xmath56s .",
    "this sequence of trees converges in the topology of @xmath723 to the probability measures on @xmath927^\\infty \\sqcup \\bigsqcup_{k=0}^\\infty ( [ m]^k \\times \\{\\diamond\\}^\\infty)$ ] that puts mass @xmath724 at the point @xmath961 and mass @xmath724 at the point @xmath962 .",
    "the calculations of the extended martin kernel and doob @xmath5-transform transition probabilities associated with a given @xmath696 are straightforward but notationally somewhat cumbersome , so we omit them . they show that there is the following `` trickle - up '' construction of a markov chain @xmath716 with initial state @xmath963 and the @xmath5-transform transition probabilities ( compare the analogous construction for the chinese restaurant process itself in subsection  [ ss : crps ] ) .",
    "let @xmath714 be a sequence of independent , identically distributed @xmath569-valued random variables with common distribution @xmath168 .",
    "suppose that @xmath277-valued random variables @xmath964 have already been defined .",
    "put @xmath965 , with the convention @xmath721 , and @xmath966 , again with the convention @xmath721 .",
    "set @xmath967 .",
    "for example , if @xmath968 and @xmath168 is the unit point mass at the sequence @xmath969 , then @xmath970 for @xmath209 ; that is , @xmath971 consists of the root @xmath19 and the first @xmath15 children of the root .",
    "it is clear from the kolmogorov zero - one law that the tail @xmath2-field of @xmath716 is trivial for any @xmath168 , and so any @xmath168 is extremal .    by analogy with the definition of the bst process in section [ s : bst_and_dst ] , we define @xmath118 to be the set of vertices occupied by time @xmath15",
    "( so that @xmath972 ) . put , for each vertex @xmath137 , @xmath973 .",
    "the distribution of the random probability measure @xmath974 on @xmath927^\\infty$ ] defined by @xmath975^\\infty\\ , : \\ , u < w \\ }   : = \\lim_{n\\to \\infty}\\ # t_n(u)/\\#t_n , \\quad u\\in [ m]^\\star,$ ] may be derived from known properties of the two - parameter chinese restaurant process ( see , for example , theorem 3.2 of @xcite ) . for @xmath976^\\star$ ] put @xmath977 where the random variables @xmath978 , @xmath976^\\star$ ] , @xmath929 $ ] , are independent and @xmath979 has the beta distribution with parameters @xmath980 .",
    "that is , the sequence @xmath981}$ ] has a _ griffiths  engen  mccloskey ( gem ) distribution _ with parameters @xmath953 .",
    "then , @xmath974 is distributed as the random probability measure on @xmath927^\\infty$ ] that for each @xmath947^\\star$ ] assigns mass @xmath982 to the set @xmath983^\\infty : u < w\\}$ ] .",
    "the _ @xmath0 model _ of mallows @xcite produces a random permutation of the set @xmath16 $ ] for some integer @xmath125 .",
    "one way to describe the model is the following .",
    "we place the elements of @xmath16 $ ] successively into @xmath15 initially vacant `` slots '' labeled by @xmath16 $ ] to obtain a permutation of @xmath16 $ ] ( if the number @xmath405 goes into slot @xmath386 , then the permutation sends @xmath405 to @xmath386 ) . to begin with",
    ", each slot is equipped with a bernoulli random variable .",
    "these random variables are obtained by taking @xmath15 independent bernoulli random variables with common success probability @xmath984 and conditioning on there being at least @xmath56 success .",
    "the number @xmath56 is placed in the first slot for which the associated bernoulli random variable is a success .",
    "thus , the probability that there are @xmath13 vacant slots to the left of @xmath56 is @xmath985 now equip the remaining @xmath102 vacant slots ( that is , every slot except the one in which @xmath56 was placed ) with a set of bernoulli random variables that is independent of the first set .",
    "these random variables are obtained by taking @xmath102 independent bernoulli random variables with common success probability @xmath863 and conditioning on there being at least @xmath56 success .",
    "place the number @xmath73 in the first vacant slot for which the associated bernoulli is a success .",
    "the probability that there are @xmath13 vacant slots to the left of @xmath73 is @xmath986 continue in this fashion until all the slots have been filled .    the analogous procedure can be used to produce a permutation of @xmath159 .",
    "now the procedure begins with infinitely many slots labeled by @xmath159 , and at each stage there is no need to condition on the almost sure event that there is at least one success .",
    "after each @xmath987 is inserted , the current number of vacant slots to the left of the slot in which @xmath283 is placed is distributed as the number of failures before the first success in independent bernoulli trials with common success probability @xmath863 , and these random variables are independent .",
    "we note that this distribution on permutations of @xmath159 appears in @xcite in connection with @xmath1-analogues of de finetti s theorem .",
    "suppose now that @xmath44 is a permutation of the set @xmath382 , where @xmath988 $ ] or @xmath989 .",
    "let @xmath990 .",
    "that is , if we think of @xmath44 as a list of the elements of @xmath382 in some order , then @xmath991 is the index of @xmath56 .",
    "put @xmath992 and @xmath993 .",
    "note that @xmath44 maps @xmath994 to @xmath995 and @xmath996 to @xmath997 or @xmath998 , and that @xmath994 ( respectively , @xmath996 ) is the set of elements of @xmath382 that appear before ( respectively , after ) @xmath56 in the ordered listing of @xmath382 defined by @xmath44 .    if @xmath999 $ ] , write @xmath1000 for the unique increasing bijection from @xmath995 to @xmath994 and @xmath1001 for the unique increasing bijection from @xmath1002 to @xmath996 . if @xmath1003 , define @xmath1000 and @xmath1001 similarly , except that now @xmath1001 maps @xmath159 to @xmath996 .",
    "define permutations @xmath1004 and @xmath1005 of @xmath995 and @xmath1002 ( if @xmath999 $ ] ) or @xmath995 and @xmath159 ( if @xmath1003 ) by requiring that @xmath44 restricted to @xmath994 is @xmath1006 and that @xmath44 restricted to @xmath996 is @xmath1007 .",
    "in other words , @xmath1008 is the index of the @xmath1009 smallest element of @xmath994 in the ordered listing of @xmath382 defined by @xmath44 , and @xmath1010 is the index of the @xmath1009 smallest element of @xmath996 in the ordered listing of @xmath382 defined by @xmath44 .",
    "note that @xmath44 is uniquely specified by the objects @xmath991 , @xmath994 , @xmath996 , @xmath1004 , and @xmath1005 .",
    "the following lemma is immediate from the construction of the mallows model .",
    "[ l : mallows_decomposition ] suppose that @xmath1011 is a random permutation of either @xmath16 $ ] or @xmath159 that is distributed according to the mallows model with parameter @xmath863 .",
    "then , conditional on @xmath1012 , the permutations @xmath1013 and @xmath1013 are independent and distributed according to the mallows model with parameter @xmath863 .",
    "recall from the description of the bst process in the introduction how it is possible to construct from a permutation @xmath44 of @xmath16 $ ] a subtree of the complete binary tree @xmath175 that contains the root @xmath19 and has @xmath15 vertices .",
    "the procedure actually produces a tree labeled with the elements of @xmath16 $ ] , but we are only interested in the underlying unlabeled tree . essentially the same construction produces an infinite rooted binary tree labeled with @xmath159 from a permutation @xmath44 of @xmath159 .",
    "this tree has the property that if a vertex @xmath65 belongs to the tree , then there only finitely many vertices @xmath107 such that @xmath1014 .",
    "the following result is immediate from lemma  [ l : mallows_decomposition ] and the recursive nature of the procedure that produces a rooted subtree of @xmath175 from a permutation .",
    "[ p : mallows_as_trickle ] let @xmath356 be the markov chain that results from the trickle - down construction applied when the directed graph @xmath187 is the infinite complete binary tree @xmath24 and all the routing chains have the common transition matrix @xmath1015 on the state space @xmath146 , where @xmath1016 @xmath1017 and @xmath1018 we may regard @xmath356 as a markov chain taking values in the set of finite subtrees of @xmath24 that contain the root @xmath19 , in which case @xmath1019 and @xmath1020 is an infinite subtree of @xmath24 that contains @xmath19 .",
    "then , @xmath417 has the same distribution as the random tree constructed from a random permutation of @xmath159 that is distributed according to the mallows model with parameter @xmath863 .",
    "we call the markov chain @xmath356 of proposition  [ p : mallows_as_trickle ] the _ mallows tree process_.      consider the markov chain on @xmath146 with transition matrix @xmath1015 introduced in proposition  [ p : mallows_as_trickle ] .",
    "we call this chain the _ mallows urn _ , because its role as a routing chain for the mallows tree process is similar to that played by the plya urn in the construction of the bst process .",
    "when started from @xmath179 , a sample path of the mallows urn process looks like @xmath1021 , where @xmath1022 for @xmath1023 .",
    "the probability that the mallows urn process visits the state @xmath1024 starting from the state @xmath180 is @xmath1025 in particular , the probability that the process visits @xmath1024 starting from @xmath179 is @xmath1026    taking , as usual , @xmath179 as the reference state , the martin kernel for the mallows urn process is thus @xmath1027 or , equivalently , @xmath1028    it follows that if @xmath1029 is a sequence for which @xmath1030 then , in order for the sequence @xmath1031 to converge , it must either be that @xmath1032 for some @xmath1033 for all @xmath15 sufficiently large and @xmath1034 , in which case the limit is @xmath1035 or that @xmath1036 with no restriction on @xmath1037 , in which case the limit is @xmath1038    consequently , the doob - martin compactification @xmath1039 of the state space of the mallows urn process is such that the doob - martin boundary @xmath1040 can be identified with @xmath1041 , the usual one - point compactification of @xmath158 .    with this identification ,",
    "the state space of the @xmath5-transformed process corresponding to the boundary point @xmath1023 is @xmath1042 and the transition probabilities are @xmath1043 @xmath1044 and @xmath1045 thus , a realization of the @xmath5-transformed process starting from @xmath179 is the deterministic path @xmath1046 .",
    "similarly , the state space of the @xmath5-transformed process corresponding to the boundary point @xmath1047 is @xmath1048 and a realization of the @xmath5-transformed process starting from @xmath179 is the deterministic path @xmath1049 .",
    "recall from example  [ e : dag_tree ] that we may identify the state space @xmath277 of the mallows tree process with the set of finite subtrees of the complete binary tree @xmath552 that contain the root @xmath19 , and with this identification the partial order @xmath300 is just subset containment .",
    "consider @xmath63 in @xmath277 and a sequence @xmath1050 from @xmath277 such that @xmath169 as @xmath675 . given a vertex @xmath137 of @xmath24",
    "write , as in section  [ s : bst_and_dst ] , @xmath1051 and define @xmath1052 similarly .",
    "note that in this setting the consistency condition becomes @xmath1053 and @xmath1054 .",
    "write @xmath1055 when @xmath1056 , put @xmath1057 and @xmath1058    from corollary  [ c : martin_kernel_is_product ] and , the martin kernel of the mallows tree process is @xmath1059    note that if @xmath1056 and @xmath1060 , then @xmath1061 . therefore ,",
    "when @xmath1056 , @xmath1062 counts the number of vertices of the form @xmath154 such that the subtree below @xmath154 in @xmath63 is the same as the subtree below @xmath154 in @xmath1063 and @xmath1064 .",
    "similarly , @xmath1065 if and only if for all vertices of the form @xmath154 , the subtree below @xmath154 in @xmath63 is the same as the subtree below @xmath154 in @xmath1063 whenever @xmath1064 . hence ,",
    "if @xmath1056 , then @xmath1066 where @xmath1067 .",
    "thus , @xmath1068    suppose that @xmath1069 .",
    "for any @xmath63 such that @xmath1070 , @xmath1071 must be @xmath77 for all @xmath15 sufficiently large , because the subtree below @xmath77 in @xmath63 can not equal the subtree below @xmath77 in @xmath1063 for all @xmath15 .    on the other hand , if @xmath1072 , then @xmath1073 , where @xmath1074 is the tree obtained from @xmath1063 by deleting all vertices @xmath107 with @xmath1075 .",
    "consequently , if @xmath1069 , then in order to check whether @xmath1076 converges for all @xmath732 , it suffices to replace @xmath1063 by @xmath1074 and restrict consideration to @xmath63 such that @xmath1072 .",
    "moreover , the limits of @xmath1076 and @xmath1077 are the same , so the sequences @xmath167 and @xmath1078 correspond to the same point in the doob - martin compactification .",
    "now suppose that @xmath1079 ( so that @xmath1080 must hold ) .",
    "it is clear that if @xmath1076 converges for all @xmath732 with @xmath1072 , then the sets @xmath1081 are equal for all @xmath15 sufficiently large .",
    "let @xmath1082 be the subtree of @xmath1083 obtained by deleting from @xmath1083 any vertex @xmath107 such that @xmath53 for some @xmath137 with @xmath1084 . applying the above arguments recursively",
    ", a necessary and sufficient condition for the sequence @xmath1050 to converge to a point in the doob - martin compactification is that whenever @xmath1085 for some @xmath137 , then the set @xmath1086 are equal for all @xmath15 sufficiently large .",
    "moreover , the sequences @xmath1050 and @xmath1087 converge to the same limit point .",
    "of infinite rooted binary trees with a single infinite spine .",
    "the beginning of the infinite spine is the thick line .",
    "the `` blobs '' hanging off the left side of the spine represent finite subtrees .",
    "any vertex that has a `` left '' child with infinitely many descendants has no `` right '' child.,scaledwidth=100.0% ]    suppose that @xmath1050 and hence @xmath1087 converges in the doob - martin compactification .",
    "set @xmath1088 note that @xmath1089 is an infinite subtree of @xmath24 containing the root @xmath19 and if @xmath1090 for some @xmath39 , then @xmath1091 ( that is , @xmath1092 ) .",
    "equivalently , there is a unique infinite path @xmath1093 in @xmath1089 and this path is such that if @xmath1094 , then @xmath1095 .",
    "let @xmath1096 be the set of subtrees with this property .",
    "we can think of a subtree @xmath1097 as consisting of the infinite `` spine '' @xmath1098 to which are attached the finite subtrees @xmath1099 for those @xmath319 such that @xmath1100  see figure  [ fig : single_spine_tree ] .",
    "we have @xmath1101 where @xmath1102 is defined to be @xmath56 or @xmath77 depending on whether or not for all vertices of the form @xmath154 with @xmath1064 the subtree below @xmath154 in @xmath63 is the same as the subtree below @xmath154 in @xmath1089 .",
    "recall that we write @xmath728 for the length of a word @xmath1103 ; that is , @xmath729 when @xmath730 .",
    "note that if @xmath1097 , then the sequence @xmath1050 in @xmath277 defined by @xmath1104 converges in the doob - martin compactification of @xmath277 and the tree @xmath1089 constructed from this sequence is just @xmath37 .",
    "finally , observe that if we extend @xmath1105 for @xmath732 and @xmath1097 by @xmath1106 then for any distinct @xmath1107 there exists @xmath732 such that @xmath1108 .",
    "the important elements of the above discussion are contained in the following result .",
    "[ t : mallows ] consider the mallows tree chain with state space @xmath277 consisting of the set of finite rooted binary trees .",
    "let @xmath1096 be the set of infinite rooted binary trees @xmath37 such that @xmath1109 for some @xmath39 implies @xmath1110 .",
    "equip @xmath1111 with the topology generated by the maps @xmath1112 , @xmath319 , defined by @xmath1113 , where on the right we equip the countable set @xmath277 with the discrete topology .",
    "the doob - martin compactification @xmath723 is homeomorphic to @xmath1111 , and this homeomorphism identifies the doob - martin boundary @xmath628 with @xmath1096 .",
    "the limit in the doob - martin topology of the mallows tree chain @xmath356 started from the trivial tree @xmath19 is just the @xmath1096-valued random variable @xmath1020 introduced in proposition  [ p : mallows_as_trickle ] . almost surely , the spine of @xmath417 ( that is , the unique infinite path from the root @xmath19 ) is equal to the rightmost path @xmath1114 in the complete infinite binary tree .",
    "it is straightforward to check that each of the harmonic functions @xmath1115 , @xmath1097 is extremal .",
    "if we order the alphabet @xmath18 so that @xmath77 comes before @xmath56 and equip the set of words @xmath24 with the corresponding lexicographic order , then the state space of the @xmath5-transformed process corresponding to an infinite tree @xmath1097 is the set of finite subtrees @xmath63 of @xmath37 such that if @xmath1116 , then every predecessor of @xmath137 in the lexicographic order also belongs to @xmath63 .",
    "a realization of the @xmath5-transformed process started from @xmath19 is the deterministic path that adds the vertices of @xmath37 one at a time in increasing lexicographic order .",
    "as in the bst and dst cases , the mallows tree process can be regarded as a markov chain which moves from a tree @xmath37 to a tree @xmath63 of the form @xmath1117 , where the new vertex @xmath107 is an external vertex of @xmath37 ( see the discussion following ) .",
    "this implies that the transition probabilities can be coded by a function @xmath863 that maps pairs @xmath1118 , @xmath1119 and @xmath107 an external vertex of @xmath37 , to the probability that the chain moves from @xmath37 to @xmath1120 .    in the bst case one of the @xmath1121 external vertices of @xmath37 is chosen uniformly at random , that is , @xmath1122 , whereas we have @xmath1123 in the dst case . for mallows trees",
    ", we have the following stochastic mechanism .",
    "let @xmath137 be the vertex of @xmath37 that is greatest in the lexicographic order .",
    "denote by @xmath1124 the indices at which the corresponding entry of @xmath137 is a @xmath77 ( we set @xmath1125 if every entry of @xmath137 is a @xmath56 ) .",
    "write @xmath1126 , @xmath1127 , for the external vertices of @xmath37 that arise if the @xmath77 in position @xmath1128 is changed to @xmath56 .",
    "put @xmath1129 and @xmath1130 .",
    "then , we choose @xmath1126 with probability @xmath1131 , @xmath1132 , and @xmath1133 and @xmath1133 with probabilities @xmath1134 and @xmath1135 respectively , where @xmath1136 .    note that not all markov chains of the vertex - adding type can be represented as trickle - down processes .",
    "indeed , a distinguishing feature of the trickle - down chains within this larger class is the fact that the restriction of the function @xmath1137 to the external vertices of the left subtree of @xmath37 depends on @xmath37 only via the number of vertices in the right subtree of @xmath37 .",
    "similar restrictions hold with left and right interchanged , and also for the subtrees of non - root vertices .",
    "fix parameters @xmath1138 and @xmath1139 , and define a transition matrix @xmath1015 for the state space @xmath146 by @xmath1140 and @xmath1141 for @xmath1142 . we note that this @xmath73-parameter family of processes is a special case of the @xmath74-parameter family studied in @xcite , where it is shown to have a number of interesting connections with graph theory . in the next subsection , we use markov chains with the transition matrix @xmath1015 as the routing chains for a trickle - down process on @xmath552 in the same way that we have used the plya and mallows urn processes .    note that , by a simple borel - cantelli argument , almost surely any sample path of a markov chain @xmath1143 with transition matrix @xmath1015 is such that @xmath1144 for some @xmath761 ( so that @xmath1145 ) .",
    "we want to compute the probability that the chain goes from @xmath180 to @xmath1024 for @xmath1146 and @xmath1147 .",
    "observe that the probability the chain goes from @xmath180 to @xmath1024 via @xmath1148 is @xmath1149    observe also that if @xmath1150 is the probability the chain goes from @xmath180 to @xmath1151 via @xmath245 and @xmath1152 is the probability the chain goes from @xmath180 to @xmath1151 via @xmath246 , then @xmath1153 .",
    "it follows by repeated applications of this observation that the probability the chain goes from @xmath180 to @xmath1024 along some `` north - east '' lattice path @xmath2 is @xmath1154 where @xmath1155 is the area in the plane above the line segment @xmath1156 \\times \\{j\\}$ ] and below the curve obtained by a piecewise linear interpolation of @xmath2 .",
    "hence , the probability that the chain hits @xmath1024 starting from @xmath180 is @xmath1157 where the sum is over all `` north - east '' lattice paths @xmath2 from @xmath180 to @xmath1024 .    as explained in (",
    "* chapter 10 ) , the evaluation of the sum is a consequence of the non - commutative @xmath1-binomial theorem of @xcite ( see also @xcite ) , and @xmath1158    taking , as usual , @xmath179 as the reference state , the martin kernel for the chain is thus @xmath1159 for @xmath1146 and @xmath1147 ( and @xmath77 otherwise ) .",
    "the doob - martin compactification of a chain with transition matrix @xmath1015 is identified in ( * ? ? ?",
    "* section 4 ) , but for the sake of completeness we present the straightforward computations . if @xmath1029 is a sequence such that @xmath1030 , then , in order for @xmath1160 to converge , we must have either that @xmath1032 for some @xmath1033 for all @xmath15 sufficiently large and @xmath1034 , in which case the limit is @xmath1161 for @xmath1162 ( and @xmath77 otherwise ) , or that @xmath1036 with no restriction on @xmath1037 , in which case the limit is @xmath1163 consequently , the doob - martin compactification @xmath1039 of the state space is such that @xmath1164 can be identified with @xmath1041 , the usual one - point compactification of @xmath158 .    with this identification , the @xmath5-transformed process corresponding to the boundary point @xmath1023 has state space @xmath1165 , and transition probabilities @xmath1166 @xmath1167 and @xmath1168 similarly , the @xmath5-transformed process corresponding to the boundary point @xmath1047 has state space @xmath1169 and transition probabilities @xmath1170      suppose that we apply the trickle - down construction with @xmath552 and all of the routing chains given by the @xmath1-binomial urn of subsection  [ ss : q_walk ] , in the same manner that the bst process and the mallows tree process were built from the plya urn and the mallows urn , respectively .",
    "just as for the latter two processes , we may identify the state space @xmath277 with the set of finite subtrees of @xmath24 that contain the root @xmath19 .",
    "we call the resulting tree - valued markov chain the _ @xmath1-binomial tree process_.    recalling theorem  [ t : mallows ] and comparing the conclusions of subsection  [ ss : q_walk ] with those of subsection  [ ss : mallows_urn_compact ] , the following result should come as no surprise .",
    "we leave the details to the reader .",
    "[ t : q - binomial ] consider the @xmath1-binomial tree chain with state space @xmath277 consisting of the set of finite rooted binary trees .",
    "let @xmath1096 be the set of infinite rooted binary trees @xmath37 such that @xmath1109 for some @xmath39 implies @xmath1110 .",
    "equip @xmath1111 with the topology generated by the maps @xmath1112 , @xmath319 , defined by @xmath1113 , where on the right we equip the countable set @xmath277 with the discrete topology .",
    "the doob - martin compactification @xmath723 is homeomorphic to @xmath1111 , and this homeomorphism identifies the doob - martin boundary @xmath628 with @xmath1096 .",
    "moreover , each boundary point is extremal .",
    "recall the mallows urn model of subsection  [ ss : mallows_urn_compact ] and the @xmath1-binomial urn model of subsection  [ ss : q_walk ] .",
    "these markov chains have the interesting feature that if we know the state of the chain at some time , then we know the whole path of the process up to that time . in this section",
    "we examine the doob - martin compactifications of such chains with a view towards re - deriving the results of subsection  [ ss : mallows_urn_compact ] and subsection  [ ss : q_walk ] in a general context .",
    "we also analyze a trickle - down process resulting from a composition - valued markov chain .",
    "we return to the notation of section  [ s : martin_general ] : @xmath1171 is a transient markov chain with countable state space @xmath357 , transition matrix @xmath358 and reference state @xmath362 such that @xmath1172    we suppose that the chain @xmath346 has _ perfect memory _ , by which we mean that the sets @xmath1173 are disjoint , and that there is a map @xmath1174 with the property that @xmath1175 note that this implies that the tail @xmath2-field associated with the process @xmath346 is the same as the @xmath2-field @xmath1176 generated by the full collection of variables of the process .",
    "suppose that we construct a directed graph @xmath1177 that has @xmath357 as its set of vertices and contains a directed edge @xmath180 if and only if @xmath1178 . by the assumption on @xmath365 , for any @xmath1179 , @xmath125 , there is a directed path @xmath1180 . also , it follows from the perfect memory assumption that a directed edge @xmath180 must have @xmath1181 and @xmath1182 for some @xmath15 .",
    "moreover , if @xmath180 is such a directed edge , then there is no @xmath1183 for which @xmath1184 is also a directed edge .",
    "combining these observations , we see that the directed graph @xmath1177 is a rooted tree with root @xmath365 .",
    "the function @xmath375 is simply the map that assigns to any vertex @xmath1185 its parent . for @xmath1179 , @xmath125 , the unique directed path from @xmath365 to @xmath386",
    "is @xmath1186 .",
    "suppose from now on that the tree @xmath1177 is _ locally finite _ ; that is , for each @xmath370 , there are only finitely many @xmath364 with @xmath1187 .    as usual",
    ", we define a partial order @xmath172 on @xmath1177 ( @xmath1188 ) by declaring that @xmath1189 if @xmath405 appears on the unique directed path from the root @xmath365 to @xmath386 .",
    "we now recall the definition of the _ end compactification _ of @xmath1177 . this object can be defined in a manner reminiscent of the definition of the doob - martin compactification as follows .",
    "we map @xmath1177 injectively into the space @xmath1190 of real - valued functions on @xmath1177 via the map that takes @xmath1191 to the indicator function of the set @xmath1192 . the closure of the image of @xmath1177 is a compact subset of @xmath1190 .",
    "we identify @xmath1177 with its image and write @xmath1193 for the closure .",
    "the compact space @xmath1193 is metrizable and a sequence @xmath394 from @xmath1177 converges in @xmath1193 if and only if @xmath1194 converges for all @xmath1195 , where @xmath1196 is the indicator function of the set @xmath1197 .",
    "the boundary @xmath1198 can be identified with the infinite directed paths from the root @xmath365 .",
    "we can extend the function @xmath1196 continuously to @xmath1193 .",
    "we can also extend the partial order @xmath172 to @xmath1193 by declaring that @xmath1199 for any @xmath1200 and @xmath1201 for @xmath1202 if and only if @xmath1203 .    [ t : perfect_memory ] let @xmath346 be a chain with state space @xmath357 , reference state @xmath365 , perfect memory , and locally finite associated tree @xmath1177 .",
    "then , the associated martin kernel is given by @xmath1204 the doob - martin compactification of @xmath357 is homeomorphic to the end compactification of @xmath1177 . the extended martin kernel is given by @xmath1205    by definition , @xmath1206 by assumption , the numerator is @xmath77 unless @xmath1189 . if @xmath1189 , then the denominator is @xmath1207 and the claimed formula for the doob - martin kernel follows .",
    "the remainder of the proof is immediate from the observation that the manner in which the end compactification is constructed from the functions @xmath1196 , @xmath370 , is identical to the manner in which the doob - martin compactification is constructed from the functions @xmath1208 , @xmath370 .",
    "the mallows urns process satisfies the conditions of theorem  [ t : perfect_memory ] .",
    "the tree @xmath1177 has @xmath176 as its set of vertices , and directed edges of the form @xmath1209 and @xmath178 , @xmath1210 .",
    "the perfect memory property survives the lift from urn to tree .",
    "the `` parenthood '' function @xmath375 takes a tree @xmath37 in the state space of the mallows tree process and simply removes the vertex of @xmath37 that is greatest in the lexicographic order .",
    "this description of the state space of the mallows tree process as a `` tree - of - trees '' also makes its doob - martin compactification easier to understand .",
    "we know from section  [ ss : mallows_tree_compact ] that points in the doob - martin boundary can be identified with rooted binary trees with a single infinite path  the `` spine ''  with nothing dangling off to the right of the spine .",
    "it is , of course , easy to construct a sequence of finite rooted binary trees that tries to grow more than one infinite path : for example , let @xmath1063 be the tree that consists of the two vertices @xmath1211 and the vertices in @xmath24 on the directed paths connecting them to the root @xmath19 .",
    "the sequence @xmath1212 must have a subsequence with a limit point in the compact space @xmath723 or , equivalently , it must have a subsequence that converges to a limit in the end compactification @xmath1193 of the tree @xmath1177 . from the above description of the parenthood function @xmath375",
    ", we see for a tree @xmath1213 that @xmath1214 if and only if one of the following three conditions hold :    * @xmath63 consists of the two vertices @xmath1215 and @xmath1216 for some @xmath289 and their prefixes in @xmath24 ; * @xmath63 consists of the vertex @xmath1217 for some @xmath289 and its prefixes in @xmath24 ; * @xmath63 consists of the single vertex @xmath1218 .",
    "it follows that @xmath1214 for all @xmath15 sufficiently large if and only if @xmath63 is the tree consisting of some element of @xmath1219 and its prefixes in @xmath24 .",
    "thus , @xmath1063 converges in the end compactification of @xmath1177 to @xmath1220 as @xmath1221 , where we can regard @xmath1089 as the single infinite path tree consisting solely of the infinite spine @xmath1222 .",
    "we note that the sequence @xmath1212 of finite rooted binary trees converges even in the doob - martin compactification of the binary search tree process to a point in the boundary .",
    "indeed ( see the first paragraph of section  [ s : bst_and_dst ] ) , we can identify this latter point with the probability measure on @xmath166 that puts mass @xmath724 at each of the points @xmath1223 and @xmath1224 .",
    "[ e : composition ] a _ composition _ of an integer @xmath230 is an element @xmath1225 of @xmath813 with the property that @xmath1226 .",
    "we recall the standard proof of the fact that there are @xmath1227 such compositions for a given @xmath15 : one thinks of placing @xmath15 balls on a string and defines a composition by placing separators into some of the @xmath102 gaps between the balls .",
    "a combinatorially equivalent bijection arises from deleting the last of these balls , labeling the balls to the left of each separator by 1 and labeling the remaining balls by @xmath77 .",
    "we can now construct a markov chain @xmath1228 such that @xmath1229 is uniformly distributed on the set of compositions of @xmath15 and @xmath1229 is a prefix of @xmath1230 for all @xmath230 : the state space is @xmath1231 and the allowed transitions are of the form @xmath1232 both with probability @xmath733 . here",
    "@xmath1233 represents the only composition @xmath1234 of @xmath55 . attaching the digit @xmath56 to the state representing",
    "a composition of @xmath15 means that the new composition , now of @xmath101 , has an additional summand of size @xmath56 at the end , whereas adding @xmath77 corresponds to increasing the last summand of the old composition by @xmath56 .",
    "a construction of this type , which relates random compositions to samples from a geometric distribution , has been used in  @xcite  see also the references given there .",
    "the chain @xmath1228 certainly has the perfect memory property and the associated tree @xmath1177 is just the complete rooted binary tree structure on @xmath24 from the introduction .",
    "it follows from theorem  [ t : perfect_memory ] that the doob - martin compactification is homeomorphic to @xmath173 , the end compactification of @xmath24 .",
    "note that we can also think of the chain @xmath1235 as a result of the trickle - down construction in which the underlying directed acyclic graph @xmath187 is the complete rooted binary tree , the routing instruction chains all have state space @xmath1236 , and transition matrices are all of the form @xmath1237 the chain is of the single trail type described in example  [ e : trail ] . for processes of this type",
    "there are usually several possibilities for the underlying directed graph ; here we may take @xmath1238 instead of the complete rooted binary tree if we interpret appending @xmath77 as a move to the right and appending @xmath56 as a move up .    for several of the chains",
    "@xmath423 that we have considered in the previous sections there is a `` background chain '' @xmath1239 with the perfect memory property in the sense that there is a function @xmath1240 with @xmath1241 for all @xmath230 , where @xmath382 and @xmath1242 are the respective state spaces .",
    "for example , random recursive trees are often considered together with their labels and are then of the perfect memory type  see figure  [ fig : recursive_tree ] .",
    "conversely , we can always extend the state space @xmath382 of a given chain by including the previous states , taking the new state space @xmath1242 to be the set of words from the alphabet @xmath382 , to obtain a background chain of the perfect memory type .",
    "for example , the plya urn then leads to a single trail chain in the sense of example  [ e : trail ] , with underlying directed graph @xmath1243 and transitions @xmath1244 and @xmath1245 .",
    "as mentioned in the introduction , our initial motivation for studying the doob - martin compactifications of various trickle - down chains was to understand the chains tail @xmath2-fields .",
    "determining the compactification requires a certain amount of knowledge about the hitting probabilities of a chain , and this information may not always be easy to come by . in this section",
    "we consider a family of trickle - down chains for which it is possible to describe the tail @xmath2-field directly without recourse to the more extensive information provided by the doob - martin compactification .",
    "the class of processes to which this approach applies includes the mallows tree and @xmath1-binomial tree process that we have already analyzed , as well as the catalan tree process of section  [ s : catalan_trees ] below that we are unable to treat with doob - martin compactification methods .",
    "we begin with a lemma that complements a result from @xcite on exchanging the order of taking suprema and intersections of @xmath1246-fields .",
    "[ l : commuting_sigma - fields ] suppose that on a probability space @xmath1247 there is a collection of independent sub-@xmath2-fields @xmath1248 , @xmath281 , and another collection of sub-@xmath2-fields @xmath1249 , @xmath1250 , with the properties @xmath1251 @xmath1252 @xmath1253 and @xmath1254 then , the two sub-@xmath2-fields @xmath1255 and @xmath1256 are equal up to null sets .",
    "we first establish that @xmath1257 it suffices to check for each @xmath1258 that @xmath1259 but this follows from the observation that @xmath1260 for every @xmath319 .",
    "we now verify that @xmath1261 up to null sets . for this",
    "it suffices to show that any bounded random variable @xmath341 that is measurable with respect to @xmath1255 , satisfies the equality @xmath1262= z \\quad \\text { a.s . } \\ ] ] by a monotone class argument , we may further suppose that @xmath341 is measurable with respect to @xmath1263 for some @xmath1258 .",
    "our assumptions guarantee that for all @xmath217 and @xmath1264 @xmath1265 and @xmath1266 from these inclusions , the backwards and forwards martingale convergence theorems and the assumed independence of the @xmath1267 , @xmath1268 we see that @xmath1269 \\\\ & \\quad = \\lim_{n \\rightarrow \\infty } { \\mathbb{e}}\\left[z \\ , \\big | \\ , \\bigvee_{m \\in { \\mathbb{n}}_0 } { \\mathcal{g}}_{m , n}\\right ] \\\\ & \\quad = \\lim_{n \\rightarrow \\infty } \\lim_{m \\rightarrow \\infty } { \\mathbb{e}}\\left[z \\ , | \\ , { \\mathcal{g}}_{m , n}\\right ] \\\\ & \\quad = \\lim_{n \\rightarrow \\infty } \\lim_{m \\rightarrow \\infty } { \\mathbb{e}}\\left [   { \\mathbb{e}}\\left[z \\ , | \\ , { \\mathcal{g}}_{m , n } \\vee { \\mathcal{h}}_{m+1 } \\vee \\cdots \\vee { \\mathcal{h}}_m\\right ]         \\ , | \\ ,   { \\mathcal{g}}_{m , n}\\right ] \\\\ & \\quad = \\lim_{n \\rightarrow \\infty } \\lim_{m \\rightarrow \\infty } { \\mathbb{e}}\\left [   { \\mathbb{e}}\\left[z \\ , | \\ , { \\mathcal{g}}_{m , n}\\right ]         \\ , | \\ ,   { \\mathcal{g}}_{m , n}\\right ] \\\\ & \\quad = \\lim_{n \\rightarrow \\infty } { \\mathbb{e}}\\left[z \\ , | \\ , { \\mathcal{g}}_{m , n}\\right ] \\\\ & \\quad = { \\mathbb{e}}\\left[z \\ , \\big | \\ , \\bigcap_{n \\in { \\mathbb{n}}_0 } { \\mathcal{g}}_{m , n}\\right ] = z \\quad \\text { a.s . } , \\\\ \\end{split}\\ ] ] as required .    by the assumptions of the trickle - down construction , @xmath1270 is nondecreasing @xmath325-almost surely for every @xmath188 , @xmath212 and @xmath326 . therefore , @xmath1271 exists @xmath325-almost surely in the usual one - point compactification @xmath1272 of @xmath158 .",
    "recall for the mallows tree and @xmath1-binomial tree processes that @xmath552 and that the routing chains in both cases all had the property @xmath1273 and @xmath1274 , @xmath325-almost surely .",
    "we see from the following result that it is straightforward to identify the tail @xmath2-field for a trickle - down process if all of its routing chains exhibit this kind of behavior .",
    "another example is the catalan tree process defined in section  [ s : catalan_trees ] below ",
    "see proposition  [ p : catalan_tail ] .",
    "[ p : tail_identify ] suppose that @xmath198 is finite for all @xmath188 .",
    "fix @xmath295 .",
    "suppose that @xmath1275 , @xmath1276-a.s .",
    "for all @xmath188 .",
    "then , the tail @xmath2-field @xmath1277 is generated by @xmath1278 up to @xmath347-null sets .    by the standing hypotheses on @xmath187 and",
    "the assumption that @xmath198 is finite for all @xmath188 , we can list @xmath187 as @xmath1279 in such a way that @xmath1280 implies @xmath1281 ( that is , we can put a total order on @xmath187 that refines the partial order @xmath172 in such a way that the resulting totally ordered set has the same order type as @xmath158 ) . for each @xmath1282 , put @xmath1283 . by remark  [ r : hereditary ] , each process @xmath1284 is a markov chain .",
    "now , @xmath1285 by construction , @xmath1286 thus , by lemma  [ l : commuting_sigma - fields ] , @xmath1287 up to @xmath347-null sets . to show the claimed assertion",
    ", it thus suffices to check that for all @xmath1288 @xmath1289 we establish this via induction as follows .    for brevity",
    "we suppose that @xmath447 for all @xmath188 . in this way",
    "we avoid the straightforward but somewhat tedious notational complications of the general case . by assumption",
    ", there is a @xmath347-a.s .",
    "unique random element @xmath1290 such that @xmath1291 .",
    "with @xmath347-probability one , @xmath1292 for all @xmath1293 and @xmath15 sufficiently large .",
    "thus , @xmath1294 is generated by @xmath1295 up to @xmath347-null sets .",
    "suppose we have shown for some @xmath1282 that @xmath1296 up to @xmath347-null sets .",
    "now , @xmath1297 because @xmath1298 , it follows from our inductive hypothesis that @xmath1299 up to @xmath347-null sets .",
    "in particular , the @xmath1272-valued random variable @xmath1300 is @xmath1301-measurable up to @xmath347-null sets .    on the event @xmath1302",
    ", there is a unique random element @xmath1303 such that @xmath1304 and @xmath1305 for each @xmath1306 and @xmath15 sufficiently large .",
    "note that @xmath1307 for each @xmath1306 .",
    "it follows that @xmath1308 \\\\ & \\quad \\subseteq \\sigma\\{x_\\infty^u : u \\in { \\mathbf{j}}_{p+1}\\ } \\\\",
    "\\end{split}\\ ] ] up to @xmath347-null sets .",
    "furthermore , on the event @xmath1309 , @xmath1310 for all @xmath15 sufficiently large , and so @xmath1311 \\\\ & \\quad \\subseteq \\sigma\\{x_\\infty^u : u \\in { \\mathbf{j}}_{p+1}\\ } \\\\ \\end{split}\\ ] ] up to @xmath347-null sets .",
    "this completes the induction step , and thus the proof of the proposition .",
    "[ r : single_spine ] when @xmath187 is a tree and we are in the situation of proposition [ p : tail_identify ] , then @xmath417 may be thought of as an infinite rooted subtree of @xmath187 with a single infinite directed path from the root @xmath190 .",
    "regarding @xmath356 as a tree - valued process , we have @xmath1312 .",
    "equivalently , @xmath417 is the limit of the finite subsets @xmath1229 of @xmath187 if we identify the subsets of @xmath187 with the cartesian product @xmath1313 in the usual way and equip the latter space with the product topology .",
    "let @xmath1314 denote the set of subtrees of the complete rooted binary tree @xmath24 that contain the root @xmath19 and have @xmath15 vertices .",
    "the set @xmath1314 has cardinality @xmath184 , where @xmath1315 is the _",
    "@xmath186 catalan number_. a special case of a construction in @xcite gives a markov chain @xmath356 with state space the set of finite rooted subtrees of @xmath24 such that @xmath1316 that is , if the chain begins in the trivial tree @xmath183 , then its value at time @xmath15 is uniformly distributed on @xmath1317 .",
    "moreover , the construction in @xcite is an instance of the trickle - down construction in which @xmath552 and all of the routing chains have the same dynamics .    for the sake of completeness , we reprise some of the development from @xcite",
    ". begin with the ansatz that there is indeed a trickle - down process @xmath356 with @xmath552 and identical routing chains such that holds .",
    "identify the state spaces of the routing chains with @xmath146 and write @xmath1015 for the common transition matrix .",
    "we have @xmath1318      combining these observations , we can calculate the entries of the transition matrix @xmath1015 iteratively and , as observed in @xcite , the entries of @xmath1015 are non - negative and the rows of @xmath1015 sum to one .",
    "we refer to the resulting markov chain as the _ catalan urn process_. note that if the random tree @xmath1177 is uniformly distributed on @xmath1317 then , conditional on the event @xmath1325 , the random trees @xmath1326 and @xmath1327 are independent and uniformly distributed on @xmath1328 and @xmath1329 , respectively .",
    "thus , a trickle - down construction with each routing chain given by the catalan urn process does indeed give a tree - valued chain satisfying .",
    "observe that @xmath1330 it follows from that @xmath1331 for all @xmath1023 .",
    "moreover , @xmath1332 from the well - known fact that the generating function of the catalan numbers is @xmath1333 hence , if @xmath1334 is a markov chain with transition matrix @xmath1015 and laws @xmath1335 , then @xmath1336 with @xmath1337        as we noted in remark  [ r : single_spine ] , the tree @xmath417 has a single infinite path from the root @xmath19 .",
    "denote this path by @xmath1339 . for @xmath125 , define @xmath1340 by @xmath1341 .",
    "it is apparent from the trickle - down construction and the discussion above that the sequence @xmath1342 is i.i.d . with @xmath1343 .",
    "moreover , if we set @xmath1344 and put @xmath1345 so that @xmath118 is either empty or a subtree of @xmath24 rooted at @xmath19 , then the sequence @xmath113 is i.i.d . and independent of @xmath1342 with @xmath1346 and @xmath1347    note that if @xmath1348 is * any * sequence of random subtrees of @xmath175 such that @xmath1349 is uniformly distributed on @xmath1317 for all @xmath319 , then @xmath1349 converges in distribution to a random tree that has the same distribution as @xmath417 , where the notion of convergence in distribution is the one that comes from thinking of subtrees of @xmath175 as elements of the cartesian product @xmath1350 equipped with the product topology  see remark  [ r : single_spine ] .",
    "the convergence in distribution of such a sequence @xmath1348 and the above description of the limit distribution have already been obtained in  @xcite using different methods . for a similar weak convergence result for uniform random trees , see @xcite and the survey ( * ? ? ?",
    "* section  2.5 ) . also , if we define rooted finite @xmath1351-ary trees for @xmath1352 as suitable subsets of @xmath1353 in a manner analogous to the way we have defined rooted finite binary trees , then it is shown in @xcite that it is possible to construct a markov chain that grows by one vertex at each step and is uniformly distributed on the set of @xmath1351-ary trees with @xmath15 vertices at step @xmath15  in particular , there is an almost sure ( and hence distributional ) limit as @xmath675 in the same sense as we just observed for the uniform binary trees .",
    "we have not investigated whether this process is the result of a trickle - down construction .",
    "lastly , we note that there are interesting ensembles of trees that ca nt be embedded into a trickle - down construction or , indeed , into any markovian construction in which a single vertex is added at each step ; for example , it is shown in @xcite that this is not possible for the ensemble obtained by taking a certain critical galton - watson tree with offspring distribution supported on @xmath1354 and conditioning the total number of vertices to be @xmath125 .",
    "* acknowledgments . *",
    "the authors thank heinrich von weizscker for his role in bringing them together to work on the problems considered in the paper .",
    "they also thank sasha gnedin and the referee for a number of helpful comments and pointers to the literature .",
    "david aldous and j.  michael steele , _ the objective method : probabilistic combinatorial optimization and local weak convergence _ ,",
    "probability on discrete structures , encyclopaedia math .",
    "110 , springer , berlin , 2004 , pp .  172 .",
    "p.  diaconis and w.  fulton , _ a growth model , a game , an algebra , lagrange inversion , and characteristic classes _ , rend .",
    "sem . mat .",
    "torino * 49 * ( 1991 ) , no .  1 , 95119 ( 1993 ) , commutative algebra and algebraic geometry , ii ( italian ) ( turin , 1990 ) .                            a.  gnedin and j.  pitman , _ exchangeable gibbs partitions and stirling triangles _ , zap .",
    "nauchn . sem .",
    "otdel . mat .",
    "inst . steklov .",
    "( pomi ) * 325 * ( 2005 ) , no .",
    "predst . din .",
    "i algoritm .",
    "12 , 83102 , 244245 .",
    "pawe hitczenko and guy louchard , _ distinctness of compositions of an integer : a probabilistic analysis _ , random structures algorithms * 19 * ( 2001 ) , no .  3 - 4 , 407437 ,",
    "analysis of algorithms ( krynica morska , 2000 ) .",
    "svante janson , _ ideals in a forest , one - way infinite binary trees and the contraction method _ , mathematics and computer science , ii ( versailles , 2002 ) , trends math .",
    ", birkhuser , basel , 2002 , pp .  393414 .",
    ", _ conditioned galton - watson trees do not grow _ , fourth colloquium on mathematics and computer science algorithms , trees , combinatorics and probabilities , discrete math .",
    "proc . , ag ,",
    "assoc . discrete math .",
    ", nancy , 2006 , pp .  331334 .",
    "norman  l. johnson and samuel kotz , _ urn models and their application _ , john wiley & sons , new york - london - sydney , 1977 , an approach to modern discrete probability theory , wiley series in probability and mathematical statistics .      , _ the art of computer programming .",
    "volume 3 _ , addison - wesley publishing co. , reading , mass .- london - don mills , ont . , 1973 ,",
    "sorting and searching , addison - wesley series in computer science and information processing .",
    "john  g. kemeny , j.  laurie snell , and anthony  w. knapp , _ denumerable markov chains _ , second ed . , springer - verlag , new york , 1976 , with a chapter on markov random fields , by david griffeath , graduate texts in mathematics , no .",
    "40 .",
    "j.  pitman , _ combinatorial stochastic processes _ , lecture notes in mathematics , vol . 1875",
    ", springer - verlag , berlin , 2006 , lectures from the 32nd summer school on probability theory held in saint - flour , july 724 , 2002 , with a foreword by jean picard .",
    "l.  c.  g. rogers and david williams , _ diffusions , markov processes , and martingales .",
    "vol . 1 _ , cambridge mathematical library , cambridge university press , cambridge , 2000 , foundations , reprint of the second ( 1994 ) edition .",
    "richard  p. stanley , _ enumerative combinatorics . vol . 1 _ , cambridge studies in advanced mathematics , vol .  49 , cambridge university press , cambridge , 1997 , with a foreword by gian - carlo rota , corrected reprint of the 1986 original"
  ],
  "abstract_text": [
    "<S> it is possible to represent each of a number of markov chains as an evolving sequence of connected subsets of a directed acyclic graph that grow in the following way : initially , all vertices of the graph are unoccupied , particles are fed in one - by - one at a distinguished source vertex , successive particles proceed along directed edges according to an appropriate stochastic mechanism , and each particle comes to rest once it encounters an unoccupied vertex . </S>",
    "<S> examples include the binary and digital search tree processes , the random recursive tree process and generalizations of it arising from nested instances of pitman s two - parameter chinese restaurant process , tree - growth models associated with mallows @xmath0 model of random permutations and with schtzenberger s non - commutative @xmath1-binomial theorem , and a construction due to luczak and winkler that grows uniform random binary trees in a markovian manner . </S>",
    "<S> we introduce a framework that encompasses such markov chains , and we characterize their asymptotic behavior by analyzing in detail their doob - martin compactifications , poisson boundaries and tail @xmath2-fields . </S>"
  ]
}