{
  "article_text": [
    "rmy s algorithm @xcite iteratively generates a sequence of random binary trees @xmath8 in a markovian manner in such a way that @xmath9 is uniformly distributed on the set of binary trees with @xmath1 vertices ( see @xcite for a textbook discussion of this procedure ) . here",
    "( and throughout this paper ) a _ binary tree _ is a finite rooted tree in which every vertex has zero or two children and the tree is _ planar _ , so it is possible to distinguish between the _ left _ and _ right _ children of a vertex with two children .",
    "a binary tree has @xmath1 vertices for some @xmath10 : @xmath11 leaves and @xmath4 interior vertices .",
    "the number of binary trees with @xmath1 vertices is the _ catalan number _",
    "@xmath12 @xcite .",
    "writing @xmath13 for the set of finite words drawn from the alphabet @xmath14 ( with the empty word @xmath15 allowed ) , any binary tree can be identified with a unique finite subset @xmath16 that has the properties :    * @xmath17 , * @xmath18 .",
    "the empty word @xmath19 is the root of the tree .",
    "see figure  [ fig : binary_tree ] for an example of this representation .",
    ".,height=170 ]    rmy s algorithm begins by setting @xmath20 to be the unique binary tree @xmath21 with @xmath7 vertices ( a root and two leaves ) .",
    "supposing that @xmath22 have been generated , the algorithm generates @xmath23 as follows ( see figure  [ fig : remy_move_1 ] , figure  [ fig : remy_move_2 ] , and figure  [ fig : remy_move_3 ] for a depiction of the steps that make up a single iteration of the algorithm ) .    *",
    "pick a vertex @xmath24 of @xmath9 uniformly at random . *",
    "cut off the subtree of @xmath9 rooted at @xmath24 and set it aside .",
    "* attach a copy of the tree @xmath21 with @xmath7 vertices to the end of the edge in @xmath9 that previously led to @xmath24 .",
    "* re - attach the subtree that was rooted at @xmath24 in @xmath9 uniformly at random to one of the two leaves in the copy of @xmath21 .",
    "we call the two new vertices that are produced in the above iteration _ clones _ of @xmath24 .     uniformly at random.,width=245 ]     and attach a copy of @xmath21 to the end of the edge that previously led to @xmath24.,width=245 ]     to one of the two leaves of the copy of @xmath21 , and re - label the vertices appropriately .",
    "the solid circle is the new location of @xmath24 and the open circles are the clones of @xmath24.,width=245 ]    it is not too difficult to see that the algorithm does produce uniformly distributed binary trees . indeed",
    ", suppose that the algorithm is modified so that it starts with the leaves of @xmath21 labeled with @xmath6 and @xmath25 , with each of the two labelings being equally likely , a random leaf ",
    "labeled tree that we denote by @xmath26 .",
    "suppose further that we begin the @xmath27 step with a leaf  labeled binary tree @xmath28 that has @xmath11 leaves labeled with @xmath29 : = \\{1 , \\ldots , n+1\\}$ ] in some order and that this step produces a random leaf  labeled binary tree @xmath30 labeled with @xmath31 $ ] as follows .",
    "* use the same randomization as in the algorithm described above to produce a tree with a single new leaf . *",
    "leave the labels of the old leaves unchanged .",
    "* label the new leaf with @xmath32 .",
    "it will certainly suffice to show that this enhanced algorithm produces a sequence @xmath33 such that for all @xmath10 the random leaf ",
    "labeled binary tree @xmath28 is uniformly distributed on the set of binary trees with @xmath1 vertices that have their @xmath11 leaves labeled by @xmath29 $ ] .",
    "this , however , is almost immediate from an inductive argument and the observation that in order for the value of @xmath30 to be a particular labeled binary tree , there is a unique possibility for the value of @xmath28 , the choice of vertex @xmath24 to clone , and the left - right choice for re - attaching the subtree below @xmath24 ; see @xcite for more details .",
    "following @xcite , we note that this argument also shows that if we let @xmath34 be the common value of @xmath35 as @xmath36 ranges over the binary trees with @xmath1 vertices and their @xmath11 leaves labeled by @xmath29 $ ] , then @xmath37 , so that @xmath38 .",
    "it follows that the number of binary trees with @xmath1 vertices and their @xmath11 leaves labeled by @xmath29 $ ] is @xmath39 and so the number of binary trees with @xmath1 vertices and @xmath11 leaves is @xmath40 as expected .",
    "as well as counting the number of binary trees with @xmath1 vertices for @xmath10 , the catalan number @xmath41 counts the number of functions @xmath42 such that @xmath43 and @xmath44 for @xmath45 .",
    "it is shown in @xcite that there are particular bijections @xmath46 ( sometimes credited to ukasiewicz or dwass ) between the former and latter sets such that if @xmath47 , then @xmath48}$ ] converges almost surely in the supremum norm to a standard brownian excursion a similar result is given in ( * ? ? ?",
    "* exercise 7.4.11 ) where @xmath9 is represented as a function from @xmath49 to @xmath50 using a coding where one `` walks around the outside '' of the tree visiting left children before right children ( so that each edge is traversed twice , leaves are visited once , and other vertices are visited three times ) , and recording the distance from the root to the vertex visited at each step  this coding , or a minor modification of it , is sometimes called the harris path of the tree .    the standard brownian excursion induces a random metric space that is , up to a scaling factor , aldous brownian continuum random tree ( crt ) @xcite .",
    "more precisely , if @xmath51}$ ] is the standard brownian excursion , then @xmath52 } e_u$ ] , @xmath53 $ ] defines a pseudo - metric on @xmath54 $ ] that becomes a metric on the collection of equivalence classes for the equivalence relation @xmath55 , and the latter random metric space is a random @xmath5-tree that is , by definition , a scaled version of the brownian crt ( see @xcite for a general treatment of @xmath5-trees directed at probabilists ) .",
    "this definition carries with it a natural rooting and hence a natural genealogical structure : the most recent common ancestor of the equivalence classes containing @xmath56 and @xmath57 is the equivalence class of the almost surely unique @xmath58 $ ] such that @xmath59 } e_u$ ] .",
    "the brownian crt with this rooting is almost surely binary in the sense that almost surely for all @xmath60 $ ] coming from distinct equivalence classes the most recent common ancestors of the pairs @xmath61 are not all equal .",
    "moreover , this construction also endows the brownian crt with a natural planar structure : for @xmath62 $ ] coming from distinct equivalence classes , the equivalence class containing @xmath56 may be consistently declared to be below and to the left of the most recent common ancestor of the two equivalence classes ( and the equivalence class containing @xmath57 is below and to the right ) if @xmath63 } e_u = e_s\\ }   < \\min\\{r : \\min_{v \\in [ r , t ] } e_v = e_t\\}$ ] ( in other words , the time parameter in the brownian excursion induces a traversal of the points of the brownian crt that starts and ends at the root , and we say that one equivalence class is below and to the left of the most recent common ancestor it shares with another equivalence class if this traversal encounters the former equivalence class before the latter )",
    ".    conversely , it is observed in @xcite that if one samples i.i.d .",
    "uniformly distributed points @xmath64 from @xmath54 $ ] and lets @xmath65 be the binary tree spanned by the equivalence classes of @xmath66 for @xmath10 ( more fully , one takes the subtree of the re - scaled brownian crt thought of as a random @xmath5-tree but equipped with the additional rooting and left ",
    "right ordering described above , forgets the metric structure on the subtree , but keeps the rooting and left ",
    "right ordering ) , then @xmath67 has the same distribution as @xmath68 ; that is , @xmath67 is an instance of rmy s chain .    as we shall explain soon , these last two results and several more are parallels of classical results about the simplest plya urn scheme in which one starts with an urn containing one black and one white ball and at each step one picks a ball uniformly at random and replaces it along with another of the same color .",
    "if we write @xmath69 for the number of new black balls that have been added to the urn up to and including the @xmath0 step of the plya urn chain , then @xmath70 is a markov chain with the following properties . for each @xmath10 the random variable @xmath69",
    "is uniformly distributed on @xmath71 and @xmath72 converges almost surely as @xmath73 to a random variable @xmath74 that is uniformly distributed on the interval @xmath54 $ ] .",
    "if @xmath75 is a sequence of @xmath14-valued random variables that are conditionally independent given @xmath74 with @xmath76 , then @xcite @xmath77 has the same distribution as @xmath78 .",
    "it follows from this observation and the hewitt  savage zero  one law that the tail @xmath79-field of the plya urn chain is generated up to null sets by the random variable @xmath74 . by the martingale convergence theorem ,",
    "the vector space of bounded harmonic functions for the plya urn chain ( that is , the _ poisson boundary _ of the chain ) can thus be identified with @xmath80 of the unit interval equipped with lebesgue measure .",
    "another consequence is the well - known fact that the colors of the successive balls form an exchangeable sequence and so the backward dynamics of the plya urn chain from step @xmath4 to step @xmath81 can be thought of as removing one of the @xmath4 added balls present at step @xmath4 uniformly at random and discarding it .    we will show that the backward transitions of the rmy chain are as follows .    *",
    "pick a leaf uniformly at random .",
    "* delete the chosen leaf and its sibling ( the sibling may or may not be a leaf ) .",
    "* close up the gap if there is one ( there will be a gap if the sibling is not a leaf ) .",
    "note how these dynamics are reminiscent of the backward transitions of the plya urn chain .",
    "it is a consequence of the exchangeability inherent in these dynamics and the hewitt  savage zero ",
    "one law that the tail @xmath79-field of the rmy chain is generated up to null sets by the limiting brownian crt augmented by the additional rooting and left ",
    "right ordering described above .",
    "more precisely , we may assume that the entire rmy chain has been built from a brownian excursion ( equivalently , the augmented brownian crt ) and an independent , identically distributed sequence @xmath82 of random variables that are each uniformly distributed on @xmath54 $ ] .",
    "if the first @xmath11 of these random variables are permuted in any way , then the values of the rmy chain from time @xmath4 onwards are unchanged , and so the hewitt  savage zero ",
    "one law gives that the tail @xmath79-field of the rmy chain is , up to null sets , contained in the @xmath79-field generated by the augmented brownian crt .",
    "conversely , since one can build the brownian crt as an almost sure limit ( as @xmath73 ) of the rescaled rmy chain , the tail @xmath79-field is equal to the @xmath79-field generated by the augmented brownian crt up to null sets .",
    "hence the poisson boundary of the rmy chain can be identified with @xmath80 of a space of suitably defined `` rooted , planar , binary '' @xmath5-trees equipped with the distribution of the augmented brownian crt or , equivalently , with @xmath80 of the space of continuous excursion paths indexed by @xmath54 $ ] equipped with the standard brownian excursion measure .",
    "the rmy chain is not the only markov chain which at step @xmath4 produces uniformly distributed binary trees with @xmath1 vertices .",
    "another example is the markov chain proposed in @xcite which , unlike the rmy chain , has the property that the state at time @xmath4 is a subtree of the state at time @xmath11 for all @xmath10 .",
    "the poisson boundary of this chain , which was described in @xcite , turns out to be quite different from that of the rmy chain .",
    "the object of the present paper is to go further and investigate the _ doob  martin compactification _ of the rmy chain . before giving a formal definition of the doob ",
    "martin compactification in section [ s : martin_general ] , let us illustrate the concept with the archetypal example of the plya urn chain .",
    "given @xmath83 , let @xmath84 be the bridge process obtained by conditioning the initial segment @xmath85 of the plya urn chain on the event @xmath86 .",
    "the backward transitions of such a bridge are the same as those of the plya urn chain itself and it is not hard to show that if @xmath87 is a sequence such that @xmath88 as @xmath89 , then the finite - dimensional distributions of the corresponding bridges converge if and only if @xmath90 $ ] exists .",
    "it is a classical result ( * ? ? ?",
    "* chapter 10 ) that a sequence @xmath87 such that @xmath88 as @xmath89 converges in the doob ",
    "martin compactification of the plya urn chain if and only if @xmath90 $ ] exists and , as we recall in section  [ s : martin_general ] , a general result from @xcite establishes the equivalence between convergence of bridges and convergence in the doob ",
    "martin compactification under suitable conditions .",
    "it follows that the doob  martin boundary of the plya urn chain is ( homeomorphic to ) the unit interval @xmath54 $ ] .",
    "there is thus a nonnegative harmonic function associated with each point @xmath91 $ ] and the corresponding doob @xmath92-transform process can be interpreted as @xmath77 conditioned on the event @xmath93 . as one would expect , the distribution of the doob @xmath92-transform process is nothing other than that of the process of partial sums of independent , identically distributed bernoulli random variables with success probability @xmath94 .",
    "we will investigate the bridges of the rmy chain and thereby identify its doob  martin boundary .",
    "this boundary of the space of ( finite ) binary trees determines the compact convex set of nonnegative harmonic functions normalized to take the value @xmath6 at the binary tree with two leaves .",
    "we show that the set of extreme points of the the latter compact convex set corresponds bijectively to the doob  martin boundary , and hence the boundary delineates all the ways that the rmy chain can be conditioned to `` behave at infinity '' in such a way that any randomness disappears asymptotically in the sense that the tail @xmath79-field of the conditioned chain is trivial .",
    "we will show that a sequence of finite binary trees with the number of vertices going to infinity converges in the doob ",
    "martin topology if and only if for all @xmath2 the sequence of random binary trees spanned by @xmath3 leaves sampled uniformly at random from those of the @xmath0 tree in the original sequence converges in distribution as @xmath73 .",
    "moreover , two convergent sequences converge to the same limit if and only if the corresponding limit distributions of these `` sampled subtrees '' are the same for all @xmath2 .",
    "( the analogous fact is also true for the plya urn : a sequence of states converges in the doob ",
    "martin topology if and only if for any @xmath2 when we sample @xmath2 balls uniformly at random from the urn composition specified by the @xmath0 state , the distribution of the number of black balls in the sample converges as @xmath73 .",
    ") this type of convergence of a sequence of large combinatorial objects in terms of the convergence in distribution of randomly sampled sub - objects of a given but arbitrary size is similar to a notion of convergence of finite graphs investigated in the theory of graph limits where a sequence of graphs with increasing numbers of vertices converges if for each @xmath2 the distributions of the random finite graphs induced by @xmath2 vertices sampled uniformly at random converge ( see @xcite for a recent monograph and @xcite for some examples of papers in this area ) .",
    "a binary tree encodes two partial orders on its set of vertices ( one vertex can be below and to the left ( respectively , right ) of another vertex ) , and so the work in @xcite on limits of large partially ordered sets is particularly close in spirit to our work .",
    "a further connection between our work and graph limits is the result of @xcite that the above notion of graph convergence is nothing other than convergence in the doob ",
    "martin topology for the graph - valued _ erds  rnyi chain _ in which at each step an additional vertex is added with the possible edges connecting it to each of the existing vertices independently present with probability @xmath95 and absent with probability @xmath96 for some fixed @xmath97 ( the doob ",
    "martin compactification does not depend on the value of @xmath95 ) .",
    "one of the major achievements of the theory of graph limits has been to obtain concrete representations of the limit objects corresponding to a convergent sequence of graphs as so - called _ graphons_. a graphon is a symmetric borel function @xmath98 ^ 2 \\to [ 0,1]$ ] and a random graph with the distribution of the limit of the randomly sampled subgraphs of size @xmath2 corresponding to a convergent sequence of graphs is obtained by choosing @xmath2 points @xmath99 uniformly at random from @xmath54 $ ] and connecting vertex @xmath100 and @xmath101 with conditional probability @xmath102 .",
    "in our main result , theorem  [ t : main ] , we obtain a similar concrete representation of a point in the doob  martin boundary of the rmy chain as a rooted @xmath5-tree @xmath103 equipped with a probability measure @xmath104 and a function @xmath105 $ ] . the limit in distribution of the subtrees spanned by @xmath3 uniformly chosen leaves",
    "is obtained by , loosely speaking , looking at the subtree of @xmath103 spanned by independent random points @xmath106 with distribution @xmath104 and declaring that with probability @xmath107 leaf @xmath100 is below and to the left while @xmath101 is below and to the right of the most recent common ancestor of leaves @xmath100 and  @xmath101 . like all transient markov chains , the rmy chain has the property that @xmath9 converges almost surely as @xmath73 in the doob ",
    "martin topology to a random element of the doob  martin boundary .",
    "the distribution of the limit may be identified with that of the augmented brownian crt described above : the underlying @xmath5-tree and its root come from the brownian excursion , and the probability measure on the @xmath5-tree is the one lifted by the brownian excursion from lebesgue measure on @xmath54 $ ] . in this case",
    "the function @xmath108 takes values in the set @xmath14 and is determined by the left  right ordering coming from the brownian excursion .",
    "we will see that it is not always possible to have the left ",
    "right ordering be induced from one on the underlying @xmath5-tree @xmath103 and that cases do arise where it is necessary to work with functions @xmath108 that take values strictly between @xmath109 and @xmath6 .",
    "briefly , the strategy of the proof of theorem [ t : main ] will be as follows .",
    "\\(i ) first we determine the backward transition dynamics of the rmy chain in section  [ s : infinite_bridges ] .",
    "understanding the doob ",
    "martin compactification is equivalent to understanding all markov chains with initial state @xmath21 that have these backward transition dynamics .",
    "we call any such chain @xmath110 an _ infinite rmy bridge _ : the class of infinite rmy bridges corresponds bijectively with the class of doob @xmath92-transforms of the original rmy chain as @xmath92 ranges over the nonnegative harmonic functions for the original chain normalized so that @xmath111 .",
    "this class of nonnegative harmonic functions is a compact convex set , and an arbitrary such function has a unique representation as an integral over extremal elements . for a general markov chain , an extremal nonnegative harmonic function corresponds to a point in the doob  martin boundary , but there may be points in the doob  martin boundary that correspond to harmonic functions which are not extremal .",
    "we show that this is not the case for the rmy chain , and it follows that the elements of the doob  martin boundary of the rmy chain correspond bijectively to the infinite rmy bridges that are _ extremal _ in the sense that they are not nondegenerate mixtures of infinite rmy bridges ( equivalently , to the infinite rmy bridges that have trivial tail @xmath79-fields ) .",
    "\\(ii ) a key tool for obtaining a concrete characterization of the extremal infinite rmy bridges will be the introduction of an auxiliary labeling of the @xmath11 leaves of the tree @xmath112 by @xmath29:= \\{1,\\ldots , n+1\\}$ ] that has the properties that the labeling is uniformly distributed over the @xmath113 possible labelings for each @xmath4 and the new leaf added at step @xmath11 is labeled with @xmath32 while the other leaves keep the labels they had at step @xmath4 .",
    "such a labeling scheme is `` projective '' in the sense that the leaf  labeled subtree of @xmath114 spanned by the leaves with labels in @xmath115 $ ] coincides with the leaf  labeled version of @xmath116 ; more precisely , @xmath116 embeds into @xmath114 in the manner defined in section  [ dmker ] via an injective map from the vertices of @xmath116 into the vertices of @xmath114 that maps leaves to leaves in such a way that the image of the leaf labeled @xmath117 in @xmath116 is mapped to the leaf labeled @xmath117 in @xmath114 for @xmath118 $ ] .",
    "as we observe in section  [ s : n_tree ] , for any @xmath119 $ ] there are twelve possibilities for how the leaves labeled @xmath120 in the tree @xmath116 sit in relation to each other ; for example , one possibility is that the most recent common ancestor of @xmath100 and @xmath101 is a descendant of the most recent common ancestor of @xmath100 and @xmath117 which is also the most recent common ancestor of @xmath101 and @xmath117 , that @xmath100 is below and to the left and @xmath101 is below and to the right of their most recent common ancestor , that @xmath100 is below and to the left and @xmath117 is below and to the right of their most recent common ancestor , and that @xmath101 is below and to the left and @xmath117 is below and to the right of their most recent common ancestor .",
    "moreover , knowing which of these possibilities holds for each triple @xmath120 uniquely determines the tree @xmath116 and its leaf labels .",
    "a key feature of this labeling is that the relative positions of the leaves labeled @xmath120 in the tree @xmath116 is the same as the relative positions of the leaves labeled @xmath120 in the tree @xmath114 .",
    "because of this consistency there is a well - defined random array indexed by @xmath121 that for any indices @xmath122 records for all @xmath2 such that @xmath123 $ ] which of the twelve possibilities holds for the relative positions of the leaves labeled @xmath120 in the tree @xmath116 .",
    "this random array is jointly exchangeable .",
    "it is possible to reconstruct the entire leaf  labeled version of the infinite rmy bridge @xmath110 from this array , and hence the infinite rmy bridge itself by then simply discarding the leaf labels .",
    "the infinite rmy bridge is extremal if and only if this jointly exchangeable random array is ergodic in the usual sense for jointly exchangeable random arrays .",
    "\\(iii ) in sections [ s : r_tree ] , [ s : probmeas ] and [ s : leftright ] we use ideas related to those in @xcite and the aldous  hoover  kallenberg theory of jointly exchangeable random arrays to obtain a concrete description of the jointly exchangeable random arrays that can arise from extremal infinite rmy bridges , and it is the ingredients in this description that appear in our above sketch of the statement of theorem  [ t : main ] . the @xmath14-valued random variables @xmath124 figuring in the actual statement of theorem  [ t : main ] indicate whether leaf @xmath100 is below and to the left while @xmath101 is below and to the right of the most recent common ancestor of leaves @xmath100 and @xmath101 , with the above - mentioned @xmath107 as the corresponding probabilities .",
    "we restrict the following sketch of doob  martin compactification theory for discrete time markov chains to the situation of interest in the present paper .",
    "the primary reference is @xcite , but useful reviews may be found in ( * ? ? ?",
    "* chapter 10 ) , ( * ? ? ? * chapter 7 ) , @xcite , ( * ? ? ? * chapter 7 ) , ( * ? ? ?",
    "* chapter iii ) .",
    "suppose that @xmath125 is a discrete time markov chain with countable state space @xmath126 and transition matrix @xmath127 .",
    "suppose in addition that @xmath126 can be partitioned as @xmath128 , where @xmath129 for some distinguished state @xmath130 , each set @xmath131 is finite , and the transition matrix @xmath127 is such that @xmath132 unless @xmath133 and @xmath134 for some @xmath135 .",
    "define the _ green kernel _ or _ potential kernel _",
    "@xmath136 of @xmath127 by @xmath137 @xmath138 , and assume that @xmath139 for all @xmath140 , so that any state can be reached with positive probability starting from @xmath130 .",
    "the rmy chain belongs to this class .",
    "the state space @xmath126 of the rmy chain is the set of all binary trees , the distinguished state @xmath130 is the binary tree @xmath21 with @xmath7 vertices , and @xmath131 is the set of binary trees with @xmath141 vertices .    if @xmath142 is a @xmath143-a.s",
    ". bounded random variable that is measurable with respect to the tail @xmath79-field of @xmath125 , then @xmath144 = h(x_n)$ ] for some bounded harmonic function @xmath92 ; that is @xmath145 for @xmath146 . by the martingale convergence theorem , @xmath147 @xmath143-a.s .",
    "conversely , if @xmath92 is a bounded harmonic function , then @xmath148 exists @xmath143-a.s . and",
    "the limit random variable is @xmath143-a.s .",
    "equal to a random variable that is measurable with respect to the tail @xmath79-field of @xmath125 .    in order to characterize the bounded harmonic functions ( and hence the tail @xmath79-field ) , it certainly suffices to determine what the nonnegative harmonic functions are .",
    "the key to doing so is the introduction of the _ doob  martin kernel with reference state @xmath130 _ given by @xmath149 observe that @xmath150 and so the function @xmath151 is , in some sense , `` almost harmonic '' and becomes closer to being harmonic as @xmath117 `` goes to infinity '' . with this intuition in mind ,",
    "it is natural to investigate sequences @xmath152 in @xmath126 such that the sequence of real numbers @xmath153 converges for all @xmath154 .",
    "these considerations lead to the following construction . if @xmath155 with @xmath156 , then @xmath157 , and so @xmath126 can be identified with the collection of functions @xmath158 , @xmath140 .",
    "note that @xmath159 and so the set of functions @xmath160 is a pre - compact subset of @xmath161 equipped with the usual product topology .",
    "its closure @xmath162 is the _ doob  martin compactification _ of @xmath126 .",
    "the set @xmath163 is the _ doob  martin boundary _ of @xmath126 . by construction",
    ", a sequence @xmath152 in @xmath126 converges to a point in @xmath162 if and only if the sequence of real numbers @xmath153 converges for all @xmath154 , and each function @xmath164 extends continuously to @xmath162 .",
    "the resulting function @xmath165 is the _ extended doob - martin kernel_.    a specific subset @xmath166 , the _ minimal _ boundary , of the full boundary @xmath167 is of particular importance from a geometric as well as probabilistic point of view .",
    "let @xmath168 be the set of harmonic functions @xmath169 with @xmath170 .",
    "this is a compact convex set , and its extreme points are those harmonic functions @xmath171 with the property that @xmath172 implies @xmath173 whenever @xmath174 and @xmath175 .",
    "we have @xmath176 for all @xmath177 , and we write @xmath166 for the set of those boundary points that correspond to extremal harmonic functions .",
    "the set @xmath166 is a @xmath178 . with this notation in place",
    ", any @xmath171 has a unique representation @xmath179 where @xmath104 is a probability measure that assigns all of its mass to @xmath166 .    a first major probabilistic consequence of the doob ",
    "martin compactification is that the limit @xmath180 exists @xmath143-almost surely in the topology of  @xmath162 and that the distribution of this limit is given by the measure @xmath104 representing the trivial element @xmath181 of @xmath168 .    in terms of analysis ,",
    "the vector space @xmath182 of bounded harmonic functions endowed with the supremum norm is a banach space ( the _ poisson boundary _ of the markov chain ) and this banach space is isomorphic to the @xmath80 space associated with the measure space consisting of @xmath167 equipped with its borel @xmath79-field and the probability measure given by the distribution of @xmath183 under @xmath143 .",
    "the tail @xmath79-field of @xmath125 coincides @xmath143-almost surely with the @xmath79-field generated by @xmath183 and so the poisson boundary captures how the process can `` go to infinity '' and what probabilities are associated with the various alternatives .    the second consequence of the doob ",
    "martin compactification is that not only does it contain information about how the markov chain behaves at large times when `` left to its own devices '' , but also , somewhat loosely speaking , how it can be conditioned to behave at large times .",
    "each @xmath184 belongs to a unique @xmath131 whose index @xmath4 we denote by @xmath185 .",
    "if the chain starts in state @xmath130 , then @xmath185 is the only time that there is positive probability the chain will be in state @xmath101 .",
    "write @xmath186 for the _ bridge _ obtained by starting the chain in state @xmath130 and conditioning it to be in state @xmath101 at time @xmath185 .",
    "this process is a markov chain with forward transition probabilities @xmath187 moreover , @xmath188 and so @xmath186 has the same backward transition probabilities as @xmath125 .",
    "suppose now that @xmath189 is a sequence of elements of the state space @xmath126 that converges to infinity in the one - point compactification of @xmath126 or , equivalently , @xmath190 as @xmath89 .",
    "as observed in @xcite , such a sequence @xmath189 converges in the doob ",
    "martin topology if and only if finite initial segments of the corresponding bridges converge in distribution .",
    "moreover , two sequences of states converge to the same limit if and only if the limiting distributions of finite initial segments are the same . for a sequence @xmath189 that converges to the point @xmath191 in the doob  martin boundary ,",
    "the limiting distributions of the initial segments define the distribution of an @xmath126-valued process @xmath192 that is markovian with forward transition probabilities @xmath193 given by @xmath194 where @xmath195 and @xmath196 and the same backward transition probabilities as @xmath125 .",
    "this markov chain @xmath192 is an @xmath92-transform using the harmonic function @xmath92 .",
    "moreover , if @xmath197 is a sequence of points in the doob  martin boundary , then @xmath198 for some point @xmath191 in the doob  martin boundary if and only if the initial segments of @xmath199 converge in distribution to the corresponding initial segments of @xmath200 .",
    "we call any markov process @xmath201 with @xmath202 and the same backward transition probabilities as @xmath125 an _ infinite bridge _ for @xmath125 .",
    "the distribution of an infinite bridge is a mixture of distributions of infinite bridges that have trivial tail @xmath79-fields , and we call the latter _ extremal _ infinite bridges . if @xmath189 converges to a point @xmath191 in the doob  martin boundary , then the corresponding harmonic function @xmath203 is extremal if and only if the limit infinite bridge @xmath192 is extremal .",
    "we return from the general setting of the previous section to consideration of the rmy chain . given two binary trees @xmath204 and",
    "@xmath205 with @xmath206 and @xmath207 vertices , we wish to derive a formula for the multi - step transition probability @xmath208 and hence obtain a formula for the doob ",
    "martin kernel with reference state @xmath21 , since @xmath209 where we recall that the @xmath210 catalan number @xmath211 is the number of binary trees with @xmath206 vertices . for this",
    "we need the notion of one binary tree being embedded in another , and this requires us to introduce some preliminary definitions .    to begin",
    ", we define a partial order @xmath212 on the vertices of a binary tree by declaring that @xmath213 for two vertices @xmath94 and @xmath24 if @xmath214 and @xmath94 is on the ( unique ) path leading from the root to @xmath24 .",
    "we say that @xmath24 is _ below _",
    "@xmath94 . given two vertices @xmath215 and @xmath191",
    ", there is a unique vertex @xmath216 such that @xmath217 , @xmath218 , and @xmath219 for any other vertex @xmath220 such that @xmath221 and @xmath222 .",
    "we say that @xmath216 is the _ most recent common ancestor _ of @xmath215 and @xmath191 and write @xmath223 .",
    "if @xmath213 and the unique path from @xmath94 to @xmath24 passes through the left ( resp .",
    "right ) child of @xmath94 , then we write @xmath224 ( resp .",
    "@xmath225 ) and say that @xmath24 is _ below and to the left _",
    "_ below and to the right _ ) of @xmath94 . note that @xmath226 and @xmath227 are partial orders with the property that if two vertices of the tree are comparable in one order , then they are not comparable in the other .",
    "note also that @xmath213 if and only if @xmath224 or @xmath225 .",
    "if we think of a binary tree as a subset of @xmath228 , then for two vertices @xmath229 and @xmath230 we have :    * @xmath213 if and only if @xmath231 and @xmath232 for @xmath233 , * the most recent common ancestor @xmath234 of @xmath94 and @xmath24 is the vertex @xmath235 , where @xmath236 ( where the maximum of the empty set is @xmath109 ) and @xmath237 for @xmath238 , * @xmath224 if and only if @xmath231 , @xmath232 for @xmath233 , and @xmath239 , * @xmath225 if and only if @xmath231 , @xmath232 for @xmath233 , and @xmath240 .",
    "an _ embedding _ of a binary tree @xmath204 into a binary tree @xmath205 is a map from the vertex set of @xmath204 into the vertex set of @xmath205 such that the following hold .    *",
    "the image of a leaf of @xmath204 is a leaf of @xmath205 . *",
    "if @xmath241 are vertices of @xmath204 such that @xmath24 is below and to the left ( resp .",
    "right ) of @xmath94 , then the image of @xmath24 in @xmath205 is below and to the left ( resp .",
    "right ) of the image of @xmath94 in @xmath205 .",
    "figure  [ fig : embedding_example ] illustrates this definition .     with @xmath7 vertices into a particular tree @xmath205 with @xmath242 vertices.,width=377 ]    note that an embedding of @xmath204 into @xmath205 is uniquely determined by the images of the leaves of @xmath204 , because if @xmath215 and @xmath191 are vertices of @xmath204 , then the image of the most recent common ancestor of @xmath215 and @xmath191 in @xmath204 must be the most recent common ancestor in @xmath205 of the images of @xmath215 and @xmath191 .",
    "write @xmath243 for the number of embeddings of @xmath204 into @xmath205 . for",
    "@xmath244 , write @xmath245 for the complete binary tree with @xmath246 leaves , that is the binary tree with @xmath246 leaves such that every leaf is graph distance @xmath117 from the root .",
    "( in the representation of binary trees as subsets of @xmath247 , @xmath245 is the subset consisting of words with length at most @xmath117 and the leaves are the words with length @xmath117 . )    [ e : complete_binary_embedding ] we want to identify the number @xmath248 of embeddings of a given tree @xmath204 into @xmath245 , the complete binary tree with @xmath246 leaves .    it will be useful to introduce the infinite complete binary tree .",
    "this is the set @xmath249 . for distinct points",
    "@xmath215 and @xmath191 in @xmath250 with @xmath251 and @xmath252 , set @xmath253 , where @xmath254 .",
    "we say that @xmath215 is below and to the left of @xmath255 and @xmath191 is below and to the right of @xmath255 if @xmath256 and @xmath257 .",
    "using the same notation , put @xmath258 and set @xmath259 for @xmath260 .",
    "then @xmath261 is a metric on @xmath250 that induces the ( compact ) product topology on @xmath250 .",
    "we can equip @xmath250 with the probability measure @xmath262 that is the product of the uniform probability measures on each of the factors ( that is , @xmath262 is fair coin - tossing measure ) .",
    "the @xmath262-measure of any ball with diameter @xmath263 is @xmath263 .",
    "if @xmath264 are distinct points in @xmath250 , then these points induce a ( finite ) binary tree with @xmath3 leaves in the obvious way : we may identify the most recent common ancestor of the leaves corresponding to @xmath265 and @xmath266 with @xmath267 and say that the point corresponding to @xmath265 is below and to the left of the most recent common ancestor of the points corresponding to @xmath265 and @xmath266 in the reduced tree if @xmath265 is below and to the left of @xmath267 , etc . call this tree @xmath268 .",
    "observe that @xmath269 for any permutation @xmath270 of @xmath271 .",
    "suppose that the tree @xmath204 has @xmath3 leaves .",
    "if the leaves of an embedding of @xmath204 into @xmath245 are @xmath272 for @xmath273 and we set @xmath274 for any choice of @xmath275 , @xmath273 , then @xmath276 .",
    "conversely , if @xmath277 , @xmath273 , are such that @xmath276 and @xmath278 for @xmath279 , then putting @xmath272 for @xmath273 gives the leaves of an embedding of @xmath204 into @xmath245 .    with the notation @xmath280 it follows that @xmath281 indeed , the left hand side counts the fraction of all those of the ( in total @xmath282 ) mappings from @xmath115 $ ] to @xmath283 $ ] which correspond to an embedding of @xmath204 into @xmath245 .",
    "in particular , @xmath284    [ t : transition_prob ] suppose that @xmath204 and @xmath205 are two binary trees with , respectively , @xmath206 and @xmath207 vertices .",
    "then , the probability that the rmy chain transitions from @xmath204 to @xmath205 in @xmath4 steps is @xmath285 where @xmath286 is the number of ways of embedding @xmath204 into @xmath205 .",
    "we condition on the event @xmath287 and say that a vertex of @xmath288 is a _",
    "clonal descendant _ of a vertex @xmath289 if it is @xmath24 itself , a clone of @xmath24 , a clone - of - a - clone of @xmath24 , etc .",
    "we can then decompose @xmath288 into connected pieces according to their clonal descent from the vertices of @xmath204  see figure  [ fig : clonal_descent ] for a schematic representation of such a decomposition .     via clonal descent from the vertices of the tree @xmath290.,width=340 ]    it follows from the definition of the rmy chain that the numbers of clonal descendants of the @xmath206 vertices of @xmath204 are the result of @xmath4 steps in a _ plya urn _ that starts with @xmath206 balls of different colors and at each stage a ball is chosen uniformly at random and replaced along with * two * balls of the same color .    because the rmy chain generates uniformly distributed binary trees , it further follows that conditional on the various numbers of clonal descendants , the respective binary trees of clonal descendants are independent and uniformly distributed .",
    "moreover , a straightforward induction shows that , conditional on the trees of clonal descendants , the ancestral vertices from @xmath204 are located at independently and uniformly chosen leaves of their respective trees of clonal descendants .    therefore , if we label the vertices of @xmath204 with @xmath291 , then the conditional probability given @xmath287 that the operation of a further @xmath4 steps of rmy s algorithm results in a binary tree @xmath205 enhanced with a particular clonal descent decomposition in which @xmath292 vertices are clonal descendants of vertex @xmath101 of @xmath204 for @xmath293 is @xmath294 } { ( 2m+1 ) \\times ( 2m+3 ) \\times \\cdots \\times ( 2(m+n)-1 ) } \\\\ & \\qquad   \\times \\prod_{j=1}^{2m+1 } \\frac{1}{c_{n_j } } \\prod_{j=1}^{2m+1}\\frac{1}{n_j+1 } \\\\ & \\quad = n !",
    "\\frac{1}{(2m+1 ) \\times ( 2m+3 ) \\times \\cdots \\times ( 2(m+n ) - 1 ) } \\frac{1}{2^{n}},\\\\ \\end{split}\\ ] ] and the result is immediate .    an alternative method for proving theorem  [ t : transition_prob ] is to use arguments similar to those used in the introduction to show that rmy s algorithm does indeed generate uniform random binary trees .",
    "more precisely , let @xmath295 be a tree with @xmath3 leaves labeled by @xmath115 $ ] and let @xmath36 be a tree with @xmath296 leaves labeled by @xmath297 $ ] .",
    "recalling the construction of the enhanced chain @xmath33 , the conditional probability of the event @xmath298 given the event @xmath299 is either zero if the leaf  labeled binary tree induced by the leaves of @xmath36 labeled with @xmath115 $ ] is not @xmath295 or @xmath300 if it is , because , as in the introduction , the leaf  labeling dictates the order in which vertices must be cloned , as well as the associated choices of left - right re - attachments .",
    "if @xmath204 and @xmath205 are unlabeled binary trees with @xmath3 and @xmath296 leaves , respectively , then for any labeling of the leaves of @xmath204 to give a leaf  labeled binary tree @xmath295 , the number of ways of labeling @xmath205 to give a leaf  labeled binary tree @xmath36 such that the leaf  labeled binary tree induced by the leaves labeled with @xmath115 $ ] is just @xmath301 , because any admissible labeling of @xmath205 corresponds to an embedding of @xmath204 into @xmath205 composed with a labeling ( with @xmath302 ) of those leaves of @xmath205 that are not in the image of @xmath204 .",
    "[ cor37 ] suppose that @xmath204 and @xmath205 are two binary trees with , respectively , @xmath206 and @xmath207 vertices .",
    "then , the corresponding doob ",
    "martin kernel is @xmath303    this is immediate from the definition of the doob ",
    "martin kernel and theorem  [ t : transition_prob ] .    given @xmath304 and a binary tree @xmath205 with @xmath207 vertices for some @xmath10 ,",
    "define @xmath305 to be the random binary tree embedded in @xmath205 that is obtained by picking @xmath3 leaves of @xmath205 uniformly at random without replacement  see figure  [ fig : embeddings ] .     when @xmath306 , @xmath307 and @xmath205 is the binary tree with @xmath308 vertices depicted twice on the left side along with an indication of its representation as a subset of @xmath228 . picking",
    "the @xmath309 leaves @xmath310 , @xmath311 and @xmath312 out of the @xmath313 leaves of @xmath205 as shown in the top row results in a realization of @xmath305 that has leaves @xmath314 , @xmath311 and @xmath6 in its representation as a subset of @xmath228 , while picking the leaves @xmath315 , @xmath312 and @xmath316 of @xmath205 as shown in the bottom row results in a realization of @xmath305 that has leaves @xmath109 , @xmath317 and @xmath316 in its representation as a subset of @xmath228.,height=188 ]    [ c : d - m_sampling ] suppose that @xmath204 and @xmath205 are two binary trees with , respectively , @xmath206 and @xmath207 vertices",
    ". then , @xmath318    it suffices to observe that @xmath319    the following result is immediate from corollary  [ c : d - m_sampling ] .",
    "it shows that convergence of a sequence of binary trees to a point in the doob  martin boundary is equivalent to the convergence in distribution of the random embedded subtrees resulting from sampling a finite number of leaves uniformly at random .",
    "thus convergence in our setting is , as remarked in the introduction , analogous to the notion of convergence of dense graph sequences as explored in the theory of graph limits , where a sequence of larger and larger graphs converges to a limit if the random subgraphs defined by restriction to a finite number of vertices sampled uniformly at random converge in distribution ( see , for example , ( * ? ? ?",
    "* chapter 13 ) ) .",
    "the latter notion of convergence is metrized by a very natural metric called the _ cut metric _ that is , a priori , unrelated to sampling from a graph and it would be interesting to know if there is an analogous object that metrizes the notion of convergence of binary trees in our setting .",
    "[ c : d - m_sampling1 ] a sequence @xmath320 of binary trees with the number of leaves of @xmath321 going to infinity as @xmath89 converges in the doob ",
    "martin compactification if and only if for each @xmath304 the sequence of random binary trees @xmath322 converges in distribution . moreover , two such convergent sequences of binary trees @xmath323 and @xmath324 converge to the same point in the doob  martin boundary if and only if for all @xmath304 the limiting distribution of @xmath325 as @xmath89 coincides with the limiting distribution of @xmath326 as @xmath89 .",
    "[ e : complete_binary_converges ] recall that @xmath327 is the complete binary tree with @xmath246 leaves .",
    "it follows from corollary [ cor37 ] , the last equality in example  [ e : complete_binary_embedding ] and corollary  [ c : d - m_sampling1 ] that the sequence @xmath328 converges in the doob ",
    "martin topology with @xmath329 for a binary tree @xmath204 with @xmath3 leaves .",
    "equivalently , @xmath330    the latter probability can be evaluated quite explicitly .",
    "let @xmath331 be independent , identically distributed @xmath250-valued random variables with common distribution @xmath262 .",
    "we label the balls of @xmath250 that have diameter @xmath332 with the elements of @xmath333 by declaring that @xmath334 is the unique ball containing all points of the form @xmath335 for arbitrary @xmath336 .",
    "there is a random integer @xmath337 such that @xmath338 for some @xmath339 , but @xmath340 and @xmath341 .",
    "observe that @xmath342 for @xmath343 .",
    "moreover , given that @xmath344 and @xmath345 , the set of locations of the @xmath346 that fall in @xmath347 and the set of locations of the @xmath346 that fall in @xmath348 are independent , with the former random set being conditionally distributed as @xmath92 i.i.d .",
    "draws from the probability measure @xmath262 restricted to @xmath347 and renormalized to be a probability measure , and with the latter random set being conditionally distributed as @xmath349 i.i.d",
    ". draws from the probability measure @xmath262 restricted to @xmath348 and renormalized to be a probability measure .",
    "label the internal vertices of @xmath204 with @xmath350 .",
    "let @xmath351 ( resp .",
    "@xmath352 ) be the number of leaves of @xmath204 that are below and to the left ( resp . below and to the right ) of vertex @xmath353 and write @xmath354 for the the total number of leaves below the vertex labeled @xmath353 .",
    "it follows that @xmath355 where the second equality results from a telescope product along the binary tree @xmath204 .",
    "in particular , the function that maps @xmath204 to @xmath356 is harmonic for the rmy chain .",
    "we can write this function more compactly as @xmath357 where the product is over the interior vertices of @xmath204 , and @xmath358 is the number of leaves below the interior vertex @xmath24 .",
    "it is instructive to check directly that this function is indeed harmonic .",
    "suppose that in one step of the chain starting from the tree @xmath204 with @xmath206 vertices the vertex @xmath24 of @xmath204 is chosen to be cloned .",
    "this produces a tree @xmath205 with @xmath206 old vertices that we can identify with the vertices of @xmath204 and two new vertices that we will call @xmath215 and @xmath191 , with @xmath215 an interior vertex and @xmath191 a leaf .",
    "if @xmath214 is an interior vertex of @xmath204 that is on the path from the root to @xmath24 ( that is , @xmath94 is an ancestor of @xmath24 ) , then @xmath359 . for any other interior vertex @xmath94 of @xmath204",
    "we have @xmath360 .",
    "lastly , @xmath361 , where we put @xmath362 if @xmath24 is a leaf of @xmath204 .",
    "therefore , if @xmath24 is an interior vertex of @xmath204 , then @xmath363 \\\\ & \\qquad \\times \\left(2^{\\ # { \\mathbf{s}}(v)-1 } - 1\\right)^{-1 } \\times \\left(2^{\\ # { \\mathbf{s}}(v ) } - 1\\right)^{-1 } \\\\ & \\qquad \\times \\left[\\prod_{u \\not \\le v }   \\left(2^{\\ # { \\mathbf{s}}(u ) - 1 } - 1\\right)^{-1}\\right ] , \\\\ \\end{split}\\ ] ] whereas if @xmath24 is a leaf , then @xmath364 \\times \\left[\\prod_{u \\not \\le v }   \\left(2^{\\ # { \\mathbf{s}}(u ) - 1 } - 1\\right)^{-1}\\right ] .",
    "\\\\ \\end{split}\\ ] ]    writing @xmath365 for the set of internal vertices of @xmath204 and @xmath366 for the leaves , we therefore see that harmonicity of @xmath367 is equivalent to @xmath368    this , however , is clear by induction .",
    "it is certainly true if @xmath204 is the trivial binary tree with a single vertex or the binary tree @xmath21 with three vertices .",
    "assuming for some binary tree @xmath204 with @xmath3 leaves that it is true for all binary trees with fewer leaves , we see from a consideration of the the left and right subtrees below the root of @xmath204 that the sum in question is @xmath369 = 1,\\ ] ] as required .    the one - step transition probability for the corresponding doob @xmath92-transformed chain is , for binary trees @xmath204 and @xmath205 with @xmath206 and @xmath370 vertices , @xmath371^{-1 } \\\\ & \\qquad \\times \\frac{1}{2(2m+1 ) } n({\\mathbf{s}},\\tt ) \\\\ & \\qquad \\times 1 \\times 3 \\times \\cdots \\times ( 2m+1 ) \\times \\prod_v \\left(2^{\\ # \\tt(v ) - 1 } - 1\\right)^{-1 } \\\\ &",
    "\\quad = \\frac{1}{2 }   \\frac { \\prod_u   \\left(2^{\\ # { \\mathbf{s}}(u ) - 1 } - 1\\right ) } { \\prod_{v } \\left(2^{\\ # \\tt(v ) - 1 } - 1\\right ) } n({\\mathbf{s}},\\tt ) , \\\\ \\end{split}\\ ] ] where the products in @xmath94 run over the interior vertices of @xmath204 and the products in @xmath24 run over the interior vertices of @xmath205 .",
    "it is apparent from the above that one step of the @xmath92-transformed chain starting from the state @xmath204 can be described as follows .",
    "* pick a vertex @xmath24 of @xmath204 with probability @xmath372 * cut off the subtree rooted at @xmath24 and set it aside . *",
    "attach a copy of the tree @xmath21 with @xmath7 vertices to the end of the edge that previously led to @xmath24 . *",
    "re - attach the subtree rooted at @xmath24 uniformly at random to one of the two leaves in the copy of @xmath21 .",
    "given a binary tree @xmath205 with @xmath373 vertices , write @xmath374 for the bridge process obtained by conditioning @xmath375 on the event @xmath376 .",
    "recall from section  [ s : martin_general ] that a sequence @xmath320 with @xmath377 converges in the doob ",
    "martin topology if and only if for each @xmath378 the random @xmath353-tuple @xmath379 converges in distribution .",
    "moreover , the various limits define a set of consistent distributions and hence the distribution of a markov chain @xmath110 with @xmath380 .",
    "note that if @xmath381 are binary trees with @xmath206 and @xmath370 vertices , respectively , then , using theorem [ t : transition_prob ] , @xmath382    therefore , any finite bridge @xmath383 and any limit of finite bridges @xmath110 evolves one step backward in time as follows :    * pick a leaf uniformly at random .",
    "* delete the chosen leaf and its sibling ( which may or may not be a leaf ) .",
    "* if the sibling is not a leaf , then close up the resulting gap by attaching the subtree below the sibling to the parent of the chosen leaf and the sibling .    as we have already explained in the introduction , understanding the doob ",
    "martin compactification is equivalent to understanding all markov chains with initial state @xmath21 that have these backward transition dynamics .",
    "we call any such a process an _ infinite rmy bridge_.    [ e : coin_tossing_bridge ] suppose that @xmath320 is the binary tree depicted in figure  [ fig : infinite_bridge_example_part1 ] .     of example  [ e : coin_tossing_bridge ] .",
    "this tree has @xmath384 vertices and consists of a single spine with leaves hanging off to the left and right alternately.,height=188 ]    it is not hard to see that the sequence @xmath320 converges in the doob ",
    "martin topology and that the value at time @xmath4 of the corresponding limit bridge @xmath110 can be represented as the subset of @xmath247 that consists of the vertices @xmath385 , where @xmath386 are independent @xmath14-valued random variables with @xmath387 for @xmath388 , plus the vertices @xmath389 , where @xmath390 for @xmath388 . in other words , @xmath112 consists of a `` spine '' that moves to the left or right depending on the successive tosses of a fair coin plus the minimal set of extra leaves that are required to yield a valid binary tree  see figure  [ fig : infinite_bridge_example_part2 ] .",
    "we stress that @xmath391 is not obtained by simply appending an extra independent fair coin toss @xmath392 to the end of the sequence @xmath386 .",
    "rather , if we write @xmath393 for the coin tosses that correspond to @xmath112 and @xmath394 for the coin tosses that correspond to @xmath391 , then @xmath394 is obtained from @xmath393 by inserting an additional independent toss uniformly at random into one of the @xmath11 `` slots '' associated with the latter sequence  before the first toss , between two successive tosses , or after the last toss .     of the infinite rmy bridge arising from the sequence of trees depicted in figure  [ fig : infinite_bridge_example_part1 ] .",
    "the random tree consists of leaves hanging off a single spine that moves to the left or right according to successive tosses of a fair coin.,height=226 ]    [ e : mbfulltree ] we know from example  [ e : complete_binary_converges ] that if @xmath327 is the complete binary tree with @xmath246 leaves , then the sequence @xmath328 converges in the doob ",
    "martin topology .",
    "moreover , it is clear that the value at time @xmath4 of the corresponding infinite rmy bridge @xmath110 is obtained by picking @xmath11 points from @xmath250 independently according to the probability measure @xmath262 and taking the finite binary tree they induce  see figure  [ fig : complete_binary_tree_example ] .",
    "is the complete binary tree with @xmath246 leaves , then @xmath395 exists in the doob ",
    "martin topology .",
    "the random value at time @xmath4 of the resulting infinite rmy bridge can be built by choosing @xmath11 points independently and uniformly at random from the leaves at infinity of the infinite complete binary tree and constructing the tree they induce.,height=188 ]",
    "consider a binary tree @xmath396 with @xmath32 leaves . label the leaves of @xmath396 with",
    "@xmath31 $ ] uniformly at random ( that is , all @xmath397 labelings are equally likely ) .",
    "now apply the following deterministic procedure to produce a binary tree @xmath398 with @xmath11 leaves and a labeling of those leaves by @xmath29 $ ] .",
    "* delete the leaf labeled @xmath32 , along with its sibling ( which may or may not be a leaf ) .",
    "* if the sibling of the leaf labeled @xmath32 is also a leaf , then assign the sibling s label to the common parent ( which is now a leaf ) . *",
    "if the sibling of the leaf labeled @xmath32 is not a leaf , then attach the subtree below the sibling to the common parent with its leaf labels unchanged and leave all other leaf labels unchanged .",
    "clearly , the distribution of @xmath398 is that arising from one step starting from @xmath396 of the backward rmy dynamics ( that is , the common backward dynamics of all infinite rmy bridges ) .",
    "moreover , the labeling of @xmath398 by @xmath29 $ ] is uniformly distributed over the @xmath113 possible labelings .",
    "now suppose that @xmath110 is an infinite rmy bridge .",
    "for some @xmath399 , let @xmath400 be a random binary tree with the same distribution as @xmath401 .",
    "label @xmath400 uniformly at random with @xmath402 $ ] to produce a labeled binary tree @xmath403 .",
    "apply the above deterministic procedure successively for @xmath404 to produce labeled binary trees @xmath405 , where @xmath406 has @xmath11 leaves labeled by @xmath29 $ ] for @xmath407 .",
    "write @xmath408 for the underlying binary tree obtained by removing the labels of @xmath406 .",
    "it follows from the observation above that the sequence @xmath409 has the same joint distribution as @xmath410 .",
    "note that the distribution of the sequence @xmath411 is uniquely determined by the distribution of @xmath401 and hence , _ a fortiori _",
    ", by the joint distribution of @xmath110 .",
    "note also that if we perform this construction for two different values of @xmath399 , say @xmath412 , to produce , with the obvious notation , sequences @xmath413 and @xmath414 , then @xmath413 has the same distribution as @xmath415 .    by kolmogorov",
    "s extension theorem we may therefore suppose that there is a markov process @xmath416 such that for each @xmath10 the random element @xmath417 is a leaf - labeled binary tree with @xmath11 leaves labeled by @xmath29 $ ] and the following hold .",
    "* the binary tree obtained by removing the labels of @xmath417 is @xmath112 .",
    "* for every @xmath10 , the conditional distribution of @xmath417 given @xmath112 is uniform over the @xmath113 possible labelings of @xmath112 . * in going backward from time @xmath11 to time",
    "@xmath4 , @xmath418 is transformed into @xmath417 according to the deterministic procedure described above .",
    "the distribution of @xmath419 is uniquely specified by the distribution of @xmath110 and the above requirements . because of this distributional uniqueness , we refer to @xmath416 as * the * _ labeled version _ of @xmath110 and @xmath110 as the _ unlabeled version _ of @xmath416 . in a similar vein",
    ", we will talk about objects such as the `` leaf of @xmath112 labeled with @xmath420 $ ] . ''",
    "we have just described the construction of a labeled infinite rmy bridge from an unlabeled one . using the doob  martin boundary",
    ", we can view this construction from a slightly different point of view as follows .",
    "[ r : qy ] recall that for binary trees @xmath204 and @xmath205 with @xmath11 and @xmath32 leaves , respectively , the backwards transition probability @xmath421 is the same for all infinite rmy bridges @xmath110 . for @xmath191 in the doob",
    " martin boundary of the rmy chain , write @xmath422 for the distribution of the infinite rmy bridge associated with @xmath191 ; that is , @xmath422 is the distribution of the doob @xmath92-transform of the rmy chain for the harmonic function @xmath423 .",
    "thus @xmath422 assigns mass @xmath424 to the set of paths that begin with the sequence of states @xmath425 .",
    "the distribution of an arbitrary infinite rmy bridge is of the form @xmath426 for some probability measure @xmath104 concentrated on the doob  martin boundary of the rmy chain , and this representation is unique if @xmath104 is required to be concentrated on the minimal boundary . for labeled binary trees @xmath295 and @xmath36 with @xmath11 and @xmath32 leaves , respectively ,",
    "write @xmath427 for the backwards transition probability common to all labeled infinite rmy bridges @xmath416 .",
    "the construction of a labeled infinite rmy bridge @xmath416 corresponding to an infinite rmy bridge @xmath110 can be described as follows : if @xmath110 has distribution @xmath426 , then @xmath416 has distribution @xmath428 , where @xmath429 is the probability measure that assigns mass @xmath430 to the set of paths that begin with the sequence of states @xmath431 and @xmath432 is the binary tree obtained by removing the labels from @xmath433",
    ".    it will be convenient for later use to be more concrete about the structure of the extra randomness introduced by labeling .",
    "[ d : choice_variables ] define a sequence of random variables @xmath434 by setting @xmath435 $ ] if the leaf labeled @xmath11 in @xmath417 ( and hence the one removed to form @xmath436 from @xmath112 and @xmath437 from @xmath417 ) is the @xmath438 smallest of the leaves of @xmath112 in the lexicographic order on @xmath228 ( recall that @xmath439 is smaller than @xmath440 in the lexicographic order if there is some @xmath441 such that @xmath442 for @xmath443 , @xmath444 , and @xmath445 ) . for any @xmath10 it is clear that @xmath446 are independent and that @xmath447 is uniformly distributed on @xmath29 $ ] .    by construction",
    ", @xmath448 is a measurable function of @xmath449 and @xmath112 .",
    "it might be expected from this observation that the entire labeled infinite rmy bridge @xmath416 ( and hence , _ a fortiori _ , the infinite rmy bridge @xmath110 ) may be constructed from @xmath434 and `` boundary conditions '' in the tail @xmath79-field @xmath450 .",
    "the next result shows that this is indeed the case .",
    "[ l : tail_relation ] for an infinite rmy bridge @xmath110 , its labeled version @xmath416 , and the selection sequence @xmath434 , @xmath451    because @xmath452 is a measurable function of @xmath417 for @xmath231 , the first two @xmath79-fields are clearly equal , and since @xmath434 and @xmath110 are measurable functions of @xmath416 , it is also clear that these two @xmath79-fields both contain the third @xmath79-field .",
    "now @xmath452 is a measurable function of @xmath112 and @xmath453 for @xmath231 , and so to complete the proof it suffices to show that @xmath454    that is , setting @xmath455 , @xmath456 , and @xmath457 , it is enough to establish that @xmath458 let @xmath459 , @xmath460 , @xmath461 , be the conditional probability kernel on @xmath462 given @xmath463 .",
    "because each @xmath79-field @xmath464 is countably generated , the desired equality will follow from the implication ( d ) @xmath465 ( a ) of the main theorem of @xcite if we can show that there is a countably generated @xmath79-field @xmath466 such that @xmath467 for @xmath468-a.e .",
    "because @xmath463 and @xmath469 are independent , @xmath470 restricted to @xmath469 coincides with @xmath468 restricted to @xmath469 for @xmath468-a.e .",
    "now @xmath471 , @xmath460 , @xmath461 , is certainly the conditional probability kernel on @xmath462 given the trivial @xmath79-field @xmath472 .",
    "moreover , since @xmath473 obviously holds , it follows from the implication ( a ) @xmath465 ( d ) of the main theorem of @xcite that such a countably generated @xmath466 does indeed exist .",
    "alternatively , because @xmath462 is countably generated , @xmath474 contains a countable dense subset @xmath475 .",
    "let @xmath476 be a collection of random variables that contains a version of @xmath477 $ ] for each @xmath478 .",
    "it is clear that @xmath476 is dense in @xmath479 and it suffices to take @xmath466 to be the @xmath79-field generated by @xmath476 .",
    "we now want to use the labeled infinite rmy bridge to build an infinite binary - tree - like structure for which the set @xmath480 plays the role of the leaves .",
    "interior vertices in this infinite binary - tree - like structure have a left child and a right child , but we show that if we forget about this ordering , then there is an @xmath5-tree such that , loosely speaking , the tree - like structure is that of the tree spanned by countably many points picked independently according to a certain probability measure on the @xmath5-tree .",
    "the @xmath5-tree is nonrandom when the infinite rmy bridge is extremal , but even in that case further randomization may be necessary to reconstitute the left versus right ordering of children .",
    "as will become clear in section  [ s : leftright ] , example  [ e : coin_tossing_bridge ] gives rise to a situation in which additional randomization is required to `` distinguish left from right '' after the countable collection of points has been sampled in order to fully reconstitute the binary tree - like structure ; that is , it is not possible to impose a planar structure on the @xmath5-tree so that the left versus right ordering of children in the subtree spanned by the sampled points is inherited from the planar structure on the @xmath5-tree .",
    "the essential point here is that there is no borel subset @xmath481 of the unit interval with lebesgue measure @xmath482 such that if @xmath74 is a uniform random variable on the unit interval the random variables @xmath74 and @xmath483 are independent .",
    "however , no such additional randomization is necessary in example  [ e : mbfulltree ] and the associated @xmath5-tree can be augmented with a planar structure that induces the desired one on the subtree spanned by the sampled points .    if @xmath484 $ ] are the labels of two leaves of @xmath112 that are represented by the words @xmath485 and @xmath486 in @xmath247 , then set @xmath487_n : = u_1 \\ldots u_m = v_1 \\ldots v_m$ ] , where @xmath488 .",
    "that is , @xmath487_n$ ] is the _ most recent common ancestor _ in @xmath112 of the leaves labeled @xmath100 and @xmath101 .",
    "note that @xmath489_n$ ] is just the leaf labeled @xmath100 and every internal vertex of @xmath112 is of the form @xmath487_n$ ] for at least one pair @xmath490 with @xmath491 .",
    "define an equivalence relation @xmath492 on the cartesian product @xmath493 by declaring that @xmath494 if and only if @xmath495_n = [ i'',j'']_n$ ] for some ( and hence all ) @xmath4 such that @xmath496 $ ] .",
    "we write @xmath497 for the equivalence class of the pair @xmath490 .",
    "we will see that we can think of the equivalence classes as being the vertices of a binary - tree - like object .",
    "for @xmath498 the equivalence class of the pair @xmath499 has only one element and it will sometimes be convenient to denote this equivalence class simply by @xmath100 . with this convention , we regard @xmath497 as being the most recent common ancestor of the leaves @xmath100 and @xmath101 .    define a partial order @xmath226 on the set of equivalence classes by declaring for @xmath500 that @xmath501 if and only if for some ( and hence all ) @xmath4 such that @xmath496 $ ] we have @xmath495_n = u_1 \\ldots u_k$ ] and @xmath502_n = u_1 \\ldots u_k    0 v_1 \\ldots v_\\ell$ ] for some @xmath503 .",
    "we interpret the ordering @xmath501 as the `` vertex '' @xmath504 being below and to the left of the `` vertex '' @xmath505 .",
    "similarly , we define another partial order @xmath227 by declaring that @xmath506 if and only if for some ( and hence all ) @xmath4 such that @xmath496 $ ] we have @xmath495_n = u_1 \\ldots u_k$ ] and @xmath502_n = u_1 \\ldots u_k    1 v_1 \\ldots v_\\ell$ ] for some @xmath503 .",
    "we interpret the ordering @xmath506 as the `` vertex '' @xmath504 being below and to the right of the `` vertex '' @xmath505 .    [",
    "r : didendritic_properties ] the equivalence relation @xmath492 and the partial orders @xmath226 and @xmath227 have a number of simple properties that it is useful to record .    * for @xmath507 , @xmath508 . * for @xmath509 ,",
    "@xmath510 unless @xmath511 . * for @xmath507 with @xmath491 , either @xmath512 and @xmath513 , or @xmath514 and @xmath515 . * for @xmath516 , if @xmath517 , then @xmath518 . * for @xmath516 , if @xmath519 , then @xmath520 . * for @xmath521 , if @xmath522 and @xmath519 , then @xmath523 . * for @xmath521 , if @xmath524 and @xmath517 , then @xmath525 .",
    "an equivalence relation on @xmath493 and two partial orders on the associated equivalence classes form a _ didendritic system _ if they satisfy the conditions listed in remark  [ r : didendritic_properties ] .",
    "( we have coined the word `` didendritic '' from the greek roots `` @xmath526 '' = `` two , twice or double '' and `` @xmath527 '' = `` of or pertaining to a tree , tree - like '' as an adjective meaning `` binary tree - like '' . )    from now on , we will use the notations @xmath492 , @xmath528 , @xmath226 , and @xmath227 to denote the equivalence relation , equivalence classes , and the two partial orders of an arbitrary didendritic system .    [",
    "r : didendritic_to_bridge ] given a didendritic system @xmath529 and @xmath10 , there is a unique binary tree with @xmath11 leaves labeled by @xmath530 , @xmath420 $ ] , and internal vertices labeled by @xmath497 , @xmath484 $ ] , @xmath491 . using the representation of binary trees as subsets of @xmath228 , the root @xmath15 is labeled by the unique equivalence class @xmath531 , @xmath532 $ ] , such that there is no equivalence class @xmath533 , @xmath534 $ ] , for which @xmath535 or @xmath536 .",
    "if the equivalence class @xmath537 , @xmath538 $ ] , is the label of the vertex @xmath539 of the tree and the equivalence class @xmath540 , @xmath541 $ ] is such that @xmath517 ( respectively , @xmath519 ) and there is no equivalence class @xmath542 with @xmath543 ( respectively , and @xmath544 ) and @xmath545 or @xmath546 , then @xmath547 ( respectively , @xmath548 ) is a vertex of the tree with label @xmath540 .",
    "if a labeled binary tree is constructed in this way and another one is constructed from the same didendritic system with @xmath4 replaced by @xmath11 , then the first labeled binary tree can be produced from the second as follows .",
    "* the leaf labeled @xmath549 is deleted , along with its sibling ( which may or may not be a leaf ) .",
    "* if the sibling of the leaf labeled @xmath32 is also a leaf , then the common parent ( which is now a leaf ) is assigned the sibling s label . *",
    "if the sibling of the leaf labeled @xmath32 is not a leaf , then the subtree below the sibling is attached to the common parent .",
    "the labelings of the vertices in the subtree are unchanged and the common parent is assigned the sibling s label .",
    "[ def5_8 ] given a didendritic system @xmath550 and a permutation @xmath79 of @xmath480 such that @xmath551 for all but finitely many @xmath498 , the didendritic system @xmath552 is defined by    * @xmath553 if and only if @xmath554 , * @xmath555 is the equivalence class of the pair @xmath490 for the equivalence relation @xmath556 , * @xmath557 if and only if @xmath558 , * @xmath559 if and only if @xmath560 .",
    "a random didendritic system @xmath550 is _ exchangeable _ if for each permutation @xmath79 of @xmath480 such that @xmath551 for all but finitely many @xmath498 the random didendritic system @xmath561 has the same distribution as @xmath562 .    in view of the similarity of the procedure described before definition  [ def5_8 ] and the procedure described at the beginning of this section ,",
    "the following result is obvious and shows that characterizing the family of infinite rmy bridges is equivalent to characterizing the family of exchangeable random didendritic systems .",
    "the random didendritic system corresponding to the labeled version of an infinite rmy bridge is exchangeable .",
    "conversely , the sequence of random labeled binary trees produced from an exchangeable random didendritic system by the procedure described in remark  [ r : didendritic_to_bridge ] is an infinite rmy bridge .    with this result in mind ,",
    "we now explore what sort of information is required to uniquely specify a didendritic system . from remark  [ r : didendritic_to_bridge ] , the subtree spanned by three distinct labeled leaves @xmath563 is one of twelve isomorphism types that we depict in figure  [ fig : all_three_leaf_trees ] along with notations for each one .",
    "leaves of a leaf  labeled binary tree .",
    "going left to right and from top to bottom , we denote these types by @xmath564 , @xmath565 , @xmath566 , @xmath567 , @xmath568 , @xmath569 , @xmath570.,width=340 ]    [ l : puzzling ] any didendritic system @xmath529 is uniquely determined by the isomorphism types of the subtrees spanned by all triples of distinct labeled leaves .",
    "observe that , @xmath517 for @xmath516 if and only if either one of the following six conditions holds or one of the three similar sets of six conditions with the roles of @xmath92 and @xmath100 interchanged or the roles of @xmath117 and @xmath101 interchanged holds :    * @xmath571 , * @xmath572 , * @xmath573 , * @xmath574 , * @xmath575 , * @xmath576 .",
    "moreover , @xmath577 ( that is , @xmath578 if and only if for all @xmath579 , @xmath580 and @xmath581 .",
    "[ r : didentritic_array ] it follows from lemma  [ l : puzzling ] that any didendritic system has a unique coding as an array indexed by @xmath121 , where the @xmath122 entry records the isomorphism type of the subtree spanned by the leaves labeled @xmath120 .",
    "the triply indexed random array corresponding to an exchangeable random didendritic system is jointly exchangeable in the usual sense for random arrays ( see , for example , ( * ? ? ?",
    "* section 7.1 ) ) .",
    "[ d : partialorder ] define a third partial order @xmath212 on the set of equivalence classes of @xmath493 by declaring that @xmath582 if either @xmath517 or @xmath519 .",
    "we interpret the ordering @xmath582 as the `` vertex '' @xmath540 being below the `` vertex '' @xmath537 .",
    "it is easy to see that if @xmath537 and @xmath540 are two equivalence classes , then there is a unique `` most recent common ancestor '' @xmath542 such that @xmath583 , @xmath584 , and if @xmath531 also has these two properties , then @xmath585 .",
    "moreover , we can choose @xmath586 so that @xmath587 and @xmath588 .",
    "indeed , for any @xmath10 we can , by remark  [ r : didendritic_to_bridge ] , think of the equivalence classes @xmath589\\}$ ] as the vertices of a binary tree with its leaves labeled by @xmath29 $ ] .",
    "when the didendritic system was constructed from the labeled version @xmath590 of an infinite rmy bridge @xmath591 , this leaf  labeled binary tree is just @xmath417 .",
    "[ l : partial_order_plus_left - right ] any didendritic system @xmath529 is uniquely determined by the equivalence relation @xmath492 , the partial order @xmath212 , and a determination for each pair of distinct labeled leaves @xmath507 whether @xmath592    because of lemma  [ l : puzzling ] , it suffices to show that it is possible to reconstruct from the given data the isomorphism types of the subtrees spanned by all triples of distinct labeled leaves . for distinct @xmath563 , the isomorphism type assignment @xmath564 is equivalent to @xmath593 and @xmath594 similar observations for the other eleven isomorphism types establish the result .",
    "[ r : jointly_exchangeable ] we have seen that any infinite rmy bridge @xmath110 has a uniquely defined labeled version @xmath416 ( in the sense that the distribution of the sequence @xmath416 is uniquely specified by the distribution of the sequence @xmath110 ) and also that a labeled infinite rmy bridge corresponds , via a bijection between infinite bridge paths and didendritic systems , to a unique exchangeable random didendritic system .    our aim is to find concrete representations of the extremal infinite rmy bridges ( recall that an infinite rmy bridge is extremal if it has a trivial tail @xmath79-field ) . to this end",
    ", it will be useful to relate the extremality of an infinite rmy bridge to properties of the associated exchangeable random didendritic system .",
    "we say that an exchangeable random didendritic system @xmath562 is _ ergodic _ if @xmath595 for all permutations @xmath79 of @xmath480 such that @xmath551 for all but finitely many @xmath498 implies that @xmath596 by classical results on ergodic decompositions ( see , for example ( * ? ? ?",
    "* theorem  a 1.4 ) ) , an exchangeable random didendritic system with distribution @xmath597 is ergodic if and only if there is no decomposition @xmath598 , where @xmath599 are distinct distributions of exchangeable random didendritic systems , @xmath600 , and @xmath601 .",
    "also , it follows from remark  [ r : didentritic_array ] and a result of aldous ( see , for example , ( * ? ? ?",
    "* lemma  7.35 ) ) that ergodicity is further equivalent to the independence of the exchangeable random didendritic systems induced by disjoint subsets of @xmath480 , where here we extend the definition of a didendritic system in the obvious manner to allow an equivalence relation and partial orders that are defined on an underlying countable ( possibly finite ) set other than @xmath480 .",
    "[ p : extremal_vs_ergodic ] an infinite rmy bridge is extremal if and only if the associated exchangeable random didendritic system is ergodic .",
    "let @xmath602 be the set of sequences of binary trees that can arise as a sample path of an infinite rmy bridge and let @xmath603 be the set of sequences of leaf  labeled binary trees that can arise as a sample path of a labeled infinite rmy bridge .",
    "the distribution @xmath604 of an infinite rmy bridge has a unique representation of the form @xmath605 for a probability measure @xmath104 concentrated on the minimal doob ",
    "martin boundary of the rmy chain , where @xmath422 is the distribution of the infinite rmy bridge corresponding to the boundary point @xmath191 .",
    "the infinite rmy bridge is extremal if and only if @xmath104 is a point mass , which is in turn equivalent to the condition that it is not possible to write @xmath606 , where @xmath607 are distributions of infinite rmy bridges , @xmath600 , and @xmath601 .",
    "recall from remark  [ r : qy ] that if @xmath605 is the distribution of an infinite rmy bridge , where @xmath422 is the distribution of the infinite rmy bridge corresponding to the boundary point @xmath191 , then @xmath608 is the distribution of the associated labeled infinite rmy bridge , where @xmath429 is the distribution of the labeled infinite rmy bridge corresponding to the boundary point @xmath191 .",
    "writing @xmath609 for the map that removes the labels from each tree in a path , we see that the map @xmath610 is bijective with inverse @xmath611 given by @xmath612 when @xmath613 is the distribution of a labeled infinite rmy bridge .",
    "it is clear that if @xmath614 are distributions of infinite rmy bridges , @xmath600 , @xmath601 , and @xmath606 , then @xmath615 .",
    "similarly , if @xmath616 are distributions of labeled infinite rmy bridges , @xmath600 , @xmath601 , and @xmath617 , then @xmath618 . in short , an infinite rmy bridge has a nontrivial tail @xmath79-field if and only if it is distributed as a nontrivial mixture of infinite rmy bridges , and this in turn is equivalent to the associated labeled infinite rmy bridge being distributed as a nontrivial mixture of labeled infinite rmy bridges .",
    "let @xmath619 be the set of didendritic systems .",
    "write @xmath620 for the map that takes a sequence that can arise as a sample path of a labeled infinite rmy bridge and turns it into a didendritic system .    because @xmath621 is a bijection , a probability measure @xmath622 on @xmath603 that is",
    "the distribution of a labeled infinite rmy bridge is a nontrivial mixture @xmath623 , where @xmath600 , @xmath601 , and @xmath624 are distinct distributions of labeled infinite rmy bridges , if and only if @xmath625 , where @xmath599 are distinct probability measures on @xmath619 ( in which case @xmath626 and @xmath627 ) .",
    "combining all of the above equivalent conditions establishes the result .",
    "[ r : extremal_vs_ergodic ] the equivalence of proposition  [ p : extremal_vs_ergodic ] is central to the subsequent development and so we sketch the following alternative `` bare hands '' proof that is also interesting in its own right .",
    "consider an infinite rmy bridge @xmath110 , its labeled version @xmath416 , the corresponding sequence @xmath434 defined in definition  [ d : choice_variables ] , and the associated exchangeable random didendritic system @xmath550 .",
    "fix @xmath304 . for @xmath628 ,",
    "let @xmath629 be the random partially leaf  labeled tree that is obtained from @xmath417 by removing those labels that belong to @xmath115 $ ] .",
    "thus , @xmath3 leaves of @xmath629 have no labels and the remaining @xmath630 leaves are labeled by elements of @xmath29 \\setminus [ m+1]$ ] .",
    "the @xmath79-field consisting of events of the form @xmath631 where @xmath481 is such that @xmath632 for all permutations @xmath79 of @xmath480 that fix @xmath633 $ ] is @xmath468-a.s .",
    "equal to @xmath634 .    to establish proposition  [ p : extremal_vs_ergodic ]",
    "it will therefore suffice to show that the @xmath79-field @xmath635 is @xmath468-trivial if and only if the @xmath79-field @xmath450 is @xmath468-trivial .",
    "the former @xmath79-field contains the latter , and hence it further suffices to show that if the latter @xmath79-field is @xmath468-trivial , then so is the former .",
    "we therefore suppose from now on that @xmath450 is @xmath468-trivial .    for any @xmath636 ,",
    "the random partially leaf  labeled tree @xmath629 is a measurable function of @xmath637 and @xmath638 , so that @xmath639 for any @xmath640 .",
    "an argument similar to that in the proof of lemma  [ l : tail_relation ] combined with the @xmath468-triviality of @xmath641 gives @xmath642    since @xmath643 is @xmath468-trivial by kolmogorov s zero - one law , it follows that @xmath635 is also @xmath468-trivial , as required .",
    "the next result shows that identifying the doob  martin boundary of the rmy chain is equivalent to characterizing the extremal infinite rmy bridges .",
    "[ c : all_minimal ] if @xmath191 is an element of the doob  martin boundary of the rmy chain , then the corresponding nonnegative harmonic function @xmath644 is extremal ; equivalently , the corresponding infinite rmy bridge is extremal .",
    "there is thus a bijective correspondence between the doob  martin boundary of the rmy chain and the set of extremal infinite rmy bridges .",
    "suppose that @xmath645 is a sequence of binary trees , where @xmath646 has @xmath647 leaves and @xmath648 as @xmath649 .",
    "suppose , moreover , that @xmath650 for some @xmath191 in the doob  martin boundary of the rmy chain .",
    "we have to show that the harmonic function @xmath644 is extremal .",
    "writing @xmath110 for the infinite rmy bridge associated with @xmath191 , this is equivalent to showing that the tail @xmath79-field of @xmath110 is @xmath468-a.s .",
    "trivial . by proposition  [ p : extremal_vs_ergodic ] , this is further equivalent to establishing that the exchangeable random didendritic system @xmath562 associated with @xmath110 is ergodic , which , as we observed in remark  [ r : jointly_exchangeable ] , is the same as proving that the exchangeable random didendritic systems @xmath562 induces on disjoint ( finite ) subsets of @xmath480 are independent ( recall from remark  [ r : jointly_exchangeable ] our comment about generalizing the notion of a didendritic system from the setting where the underlying set is @xmath480 to the setting where the underlying set is an arbitrary countable set ) .",
    "recall that @xmath651 denotes the rmy bridge to @xmath646 . for any @xmath378",
    ", @xmath652 converges in distribution to @xmath653 as @xmath649 .",
    "we can build a labeled version @xmath654 of @xmath651 in much the same way that we built a labeled version of an infinite rmy bridge : @xmath655 consists of the binary tree @xmath656 with its @xmath657 leaves labeled uniformly at random with @xmath658 $ ] and the backward evolution of such a labeled finite rmy bridge is the same as that of the labeled infinite rmy bridge .",
    "it is clear that @xmath659 converges in distribution to @xmath660 as @xmath649 for all @xmath378 : indeed , @xmath659 and @xmath660 are just @xmath652 and @xmath653 , respectively , equipped with uniform random labelings of their @xmath661 leaves by @xmath662 $ ] .",
    "suppose that @xmath663 .",
    "the labeled binary tree @xmath659 ( respectively , @xmath655 ) can be coded bijectively by an exchangeable random didendritic system @xmath664 ( respectively , @xmath665 ) on the finite set @xmath662 $ ] ( respectively , @xmath666 $ ] ) , and @xmath664 is the didendritic system on @xmath662 $ ] induced by @xmath665 .",
    "the labeled tree @xmath660 can be coded bijectively by an exchangeable random didendritic system @xmath667 on the finite set @xmath662 $ ] , and @xmath667 is the didendritic system on @xmath662 $ ] induced by @xmath562 .",
    "it follows from the convergence in distribution of @xmath659 to @xmath660 as @xmath649 for all @xmath378 that @xmath664 converges in distribution to @xmath667 as @xmath649 for all @xmath378 .",
    "let @xmath668 denote the set of twelve possible isomorphism types for a labeled binary tree with three leaves .",
    "we know from lemma  [ l : puzzling ] that @xmath562 can be coded bijectively by a jointly exchangeable random array @xmath669 , say , indexed by @xmath670 with values in @xmath668 .",
    "similarly , @xmath664 , @xmath665 , and @xmath667 can be coded bijectively by arrays that we denote by @xmath671 , @xmath672 , and @xmath673 .",
    "the array @xmath671 ( respectively , @xmath674 ) is just the subarray of @xmath672 ( respectively , @xmath669 ) consisting of the entries indexed by @xmath675 , \\ , \\text{$i , j , k$ distinct}\\}$ ] .",
    "it follows from the convergence of @xmath664 in distribution to @xmath667 that @xmath671 converges in distribution to @xmath674 as @xmath649 for all @xmath378 .",
    "suppose that @xmath676 are disjoint finite subsets of @xmath480 .",
    "we need to show that the exchangeable random didendritic systems that @xmath562 induces on these sets are independent .",
    "this is equivalent to establishing that the subarrays of @xmath669 consisting of entries indexed by @xmath677 , @xmath678 , are independent .",
    "taking @xmath353 so that @xmath679 $ ] , this is the same as proving that the subarrays of @xmath674 consisting of entries indexed by these same sets of triples are independent .",
    "we can build the array @xmath671 using the binary tree @xmath646 and random variables @xmath680 that form a sequence of uniform random draws without replacement from the leaves of @xmath646 : the @xmath122 entry of the array is the isomorphism type of the subtree of @xmath646 spanned by the leaves @xmath681 .",
    "let @xmath682 be an element not in @xmath668 , take @xmath683 to be independent uniform random draws ( with replacement ) from the leaves of @xmath646 , and define an array @xmath684 with the same index set as @xmath671 but with values in @xmath685 by letting the @xmath122 entry of the array be the isomorphism type of the subtree of @xmath646 spanned by the leaves @xmath686 if @xmath686 are distinct and @xmath682 otherwise .",
    "a familiar coupling argument shows that it is possible to construct @xmath680 and @xmath683 on the same probability space in such a way that @xmath687 depends on @xmath646 only through @xmath688 and converges to zero as @xmath648 ; more specifically , we first construct @xmath683 , set @xmath689 if @xmath690 are distinct and let @xmath691 be some other independent sequence of uniform draws without replacement from the leaves of @xmath646 otherwise .",
    "thus , @xmath692 depends on @xmath693 only through @xmath694 and converges to zero as @xmath695 .",
    "the subarrays of @xmath684 consisting of entries indexed by @xmath677 , @xmath678 , are obviously independent because they are built from the binary tree @xmath646 and the disjoint collections of random variables @xmath696 , @xmath678 .    combining the convergence in distribution of @xmath671 to @xmath673 as @xmath649 , the convergence to zero as @xmath649 of the total variation distance between the distribution of @xmath671 and the distribution of @xmath684 , and the observation that the subarrays of @xmath684 consisting of entries indexed by @xmath677 , @xmath678 , are independent",
    ", it is clear that the subarrays of @xmath674 indexed by these same sets of triples are independent , as required .",
    "with corollary  [ c : all_minimal ] in hand , the task of identifying the doob  martin boundary of the rmy chain reduces to characterizing the extremal infinite rmy bridges , where we stress that such a characterization will also determine the topological structure of the boundary because convergence of boundary points is equivalent to convergence of finite - dimensional distributions of the corresponding infinite rmy bridges .",
    "the construction of section  [ s : n_tree ] used the labeled version of an infinite rmy bridge ( equivalently , an exchangeable random didendritic system ) to provide an embedding of @xmath480 as the leaves of a tree - like combinatorial object whose vertices correspond to equivalence classes of the didendritic system s equivalence relation . in this section",
    "we embed this tree - like object into an @xmath5-tree by constructing a metric on the set of equivalence classes .",
    "we assume throughout this section that @xmath529 is an ergodic exchangeable random didendritic system and that @xmath416 is the labeled version of the associated extremal infinite rmy bridge .",
    "consider @xmath507 .",
    "for @xmath697 set @xmath698 ( recall our convention of writing @xmath95 for the equivalence class @xmath699 ) .    by construction ,",
    "the sequence of random variables @xmath700 is exchangeable .",
    "hence , by de finetti s theorem and the strong law of large numbers , @xmath701 exists almost surely .",
    "[ l : genuine_metric ] almost surely , @xmath702 is a ultrametric on @xmath480 .",
    "that is , almost surely the following hold .",
    "* for all @xmath507 , @xmath703 , and @xmath704 if and only if @xmath705 .",
    "* for all @xmath507 , @xmath706 .",
    "* for all @xmath563 , @xmath707 .",
    "_ a fortiori _ , @xmath702 is almost surely a metric on @xmath480 .",
    "we first show for fixed distinct @xmath507 that @xmath708 almost surely . by exchangeability , de finetti s theorem and the strong law of large numbers , the event @xmath709 coincides almost surely with the event @xmath710 . for @xmath484",
    "$ ] the event @xmath711 , \\",
    ", p \\notin \\{i , j\\}\\ } = \\{\\nexists p \\in [ n+1 ] \\setminus \\{i , j\\ }    : \\langle i , j \\rangle \\le p\\}$ ] is the event that in the representation of @xmath417 as a subset of @xmath228 labeled by @xmath29 $ ] , there is an interior vertex @xmath712 such that @xmath100 labels @xmath713 and @xmath101 labels @xmath714 or _ vice versa _ ( that is , the two leaves of @xmath417 labeled by @xmath100 and @xmath101 are siblings and form what is often called a `` cherry '' ) .",
    "now , the number of cherries in @xmath417 is at most @xmath715 , and so the probability that @xmath100 and @xmath101 label the leaves of the same cherry is at most @xmath716 .",
    "thus , @xmath717 , \\ , p \\notin \\{i , j\\}\\ }   = 0.\\ ] ]    it is clear that almost surely @xmath718 and @xmath706 .",
    "lastly , for @xmath563 we have that @xmath719 or one of the two other similar inequalities obtained by cyclically permuting @xmath120 holds .",
    "therefore , @xmath720 almost surely or one of the two other similar inequalities obtained by cyclically permuting @xmath120 holds .    for @xmath721 define an equivalence relation @xmath722 on @xmath480 by declaring that @xmath723 if and only if @xmath724 .",
    "note that we can identify @xmath480 with the equivalence classes of @xmath725 .",
    "we now extend the metric @xmath702 to a metric on the set @xmath726 of pairs of the form @xmath727 , where @xmath721 and @xmath728 is an equivalence class of @xmath722 . given",
    "an equivalence class @xmath481 of @xmath729 and an equivalence class @xmath728 of @xmath722 , set @xmath730 and @xmath731 + [ h((a , s),(b , t ) ) - t]).\\ ] ] for @xmath507 we have @xmath732 and so @xmath733 , confirming that we have an extension of the original definition of @xmath702 .",
    "it is straightforward to check that this extension of @xmath702 is a metric on @xmath726 that satisfies the _ four - point condition _ ; that is , for @xmath734 elements @xmath735 at least one of the following conditions holds    * @xmath736 , * @xmath737 , * @xmath738 .",
    "it is , moreover , not difficult to show that the metric space @xmath739 is connected and hence it is an @xmath5-tree ( see ( * ? ? ?",
    "* example  3.41 ) for more details ) .",
    "the completion @xmath740 of @xmath739 is also an @xmath5-tree that is complete and separable .",
    "there is a natural partial order on the @xmath5-tree @xmath741 defined by the requirement that the pair @xmath742 precedes the pair @xmath727 if @xmath743 and @xmath744 .",
    "if we consider the subtree of @xmath740 ( equivalently , of @xmath741 ) spanned by the set @xmath745\\}$ ] , then combinatorially we have a leaf  labeled tree .",
    "the vertices of this combinatorial tree correspond to pairs of the form @xmath746 , @xmath747 $ ] , where @xmath748 is the equivalence class @xmath749 .",
    "moreover , the combinatorial tree inherits the partial order from @xmath741 and the vertex @xmath746 is the most recent common ancestor of the leaves @xmath750 and @xmath751 in this partial order .",
    "we claim that this leaf  labeled tree with its partial order is isomorphic to @xmath417 , with the vertex @xmath746 corresponding to the vertex @xmath487_n$ ] and , in particular , the leaf @xmath750 corresponding to the leaf @xmath100 .",
    "this is equivalent to showing the following .    for distinct @xmath752 $ ] , @xmath753_n = [ j , k]_n < [ i , j]_n$ ] if and only if @xmath754 .",
    "it suffices to show that @xmath753_n = [ j , k]_n$ ] if and only if @xmath755 and @xmath756_n < [ i , j]_n$ ] if and only if @xmath757 .",
    "note that @xmath753_n = [ j , k]_n$ ] if and only if it is not the case that @xmath753_n < [ j , k]_n$ ] or @xmath753_n > [ j , k]_n$ ] .",
    "similarly , @xmath755 if and only if it is not the case that @xmath758 or @xmath759",
    ". it will thus further suffice to show for distinct @xmath752 $ ] that @xmath756_n < [ i , j]_n$ ] if and only if @xmath757 .",
    "it is clear that if @xmath757 , then @xmath760 and hence @xmath756_n < [ i , j]_n$ ] . for the reverse implication , we certainly have that @xmath756_n < [ i , j]_n$ ] ( and hence @xmath760 ) implies that @xmath761 , and thus we only need to rule out the possibility of equality .    by exchangeability , de finetti s theorem and the strong law of large numbers ,",
    "the event @xmath762 coincides almost surely with the event @xmath763 in order to show that the probability of the latter event is zero , it suffices to show that for @xmath764 the probability of the event @xmath765_m < [ i , j]_m\\ } \\cap \\{\\nexists p \\in [ m+1 ] \\setminus \\{k\\ } :   [ j , k]_m \\le p , \\ ; [ i , j]_m   \\not",
    "\\le p\\}\\ ] ] converges to zero as @xmath766 . in words ,",
    "the last event occurs when the sibling of the most recent common ancestor in @xmath452 of the leaves labeled @xmath100 and @xmath101 is a leaf and that leaf is labeled by @xmath117 .",
    "if we condition on @xmath116 and the locations of the leaves labeled @xmath100 and @xmath101 , then the conditional probability of the last event is either @xmath767 or @xmath109 , depending on whether the sibling of the most recent common ancestor of the leaves labeled @xmath100 and @xmath101 is a leaf , and so the ( unconditional ) probability of the last event certainly converges to zero as @xmath766 .",
    "write @xmath768 for the subtree of @xmath726 ( and hence of @xmath769 ) spanned by the set @xmath770 and let @xmath771 be the closure of @xmath768 in @xmath769 .",
    "we denote the restriction of the metric @xmath702 to @xmath771 also by @xmath702 . from the above considerations we infer",
    "immediately the following .",
    "there is an injective mapping from the set of equivalence classes @xmath772 , @xmath507 , of the ergodic didendritic system @xmath529 into the complete , separable @xmath5-tree @xmath771 constructed above such that the distance @xmath773 defined by coincides with the distance in @xmath771 between the images of equivalence classes @xmath774 and @xmath775 .    from now on we will , with a slight abuse of notation , think of the equivalence classes @xmath497 , @xmath507 , ( including the leaves @xmath776 , @xmath498 ) as being elements of the @xmath5-tree @xmath777 .",
    "consider two equivalence classes @xmath537 and @xmath540 . recall that the most recent common ancestor of @xmath537 and @xmath540 is of the form @xmath542 , where @xmath587 and @xmath588 . in terms of the metric @xmath702 , @xmath353 and @xmath2 are any such pair for which @xmath778 .",
    "we therefore have @xmath779 + [ d(\\ell , m ) - d(j , k ) ] ) \\\\ & = d(h , j ) \\vee d(h , k ) \\vee d(i , j ) \\vee d(i , k ) - \\frac{1}{2}(d(h , i ) + d(j , k ) ) .",
    "\\\\ \\end{split}\\ ] ] in particular , @xmath780 as we would expect .",
    "[ r : root_of_t ] it follows from the construction of @xmath771 that @xmath781 . for @xmath10 , let @xmath782 be the most recent common ancestor of @xmath783 with respect to the partial order @xmath212",
    "note that @xmath784 for distinct @xmath484 $ ] .",
    "the successive points @xmath785 are linearly ordered along a geodesic ray in @xmath771 . because @xmath771 is a complete separable @xmath5-tree with a finite diameter",
    ", it follows that @xmath786 is a cauchy sequence and hence convergent to a point @xmath787 .",
    "we can , as with any rooted @xmath5-tree , define a partial order on @xmath771 by declaring that @xmath215 precedes @xmath191 if and only if @xmath788 and @xmath215 belongs to the geodesic segment @xmath789 $ ] between @xmath790 and @xmath191 ( equivalently , @xmath791 \\subsetneq [ \\rho , y]$ ] ) .",
    "the following result is now immediate .",
    "[ p : partial_order_extends ] the partial order on @xmath771 defined by the root @xmath790 extends the partial order @xmath212 on the equivalence classes @xmath792 , and the most recent common ancestor of @xmath793 and @xmath794 is the equivalence class @xmath542 such that @xmath795   = [ \\rho , \\langle h , i \\rangle ] \\cap [ \\rho , \\langle j , k \\rangle]$ ] .",
    "[ e : coin_tossing_tree ] consider the infinite rmy bridge in example  [ e : coin_tossing_bridge ] .",
    "a concrete realization of the @xmath5-tree @xmath777 can be constructed as follows .",
    "let @xmath796 be a sequence of independent random variables that each have the uniform distribution on @xmath54 $ ] .",
    "take the interval @xmath797 $ ] and build an @xmath5-tree by , for each @xmath10 , attaching one end of a closed line segment of length @xmath798 to the point @xmath799 $ ] and labeling the other end of the line segment with @xmath4 .",
    "the distance between @xmath100 and @xmath101 in the resulting @xmath5-tree is then @xmath800 for @xmath491 we can identify @xmath497 with @xmath801 $ ] . for @xmath491 and @xmath802",
    "we have @xmath803 if @xmath804 and @xmath805 if @xmath806 .",
    "note that , as required , the distance between @xmath100 and @xmath101 is @xmath807 the root @xmath790 is the point @xmath482 in the interval @xmath797 $ ] .",
    "[ e : mbfulltree_real ] consider the infinite rmy bridge in example  [ e : mbfulltree ] .",
    "a concrete realization of the @xmath5-tree @xmath777 can be constructed as follows .",
    "take the complete binary tree @xmath228 and join two elements of the form @xmath808 and @xmath809 with a segment of length @xmath810 .",
    "this gives an @xmath5-tree such that if @xmath811 and @xmath812 are elements of @xmath228 for which @xmath813 , then the distance between the corresponding points in the @xmath5-tree is @xmath814 we can identify @xmath777 with the completion of this @xmath5-tree .",
    "there is a bijective correspondence between @xmath250 and the points `` added '' in passing to the completion .",
    "the distance between the points in the completion corresponding to @xmath815 and @xmath816 in @xmath250 with @xmath813 is @xmath817",
    "throughout this section , let @xmath777 be the @xmath5-tree constructed in section  [ s : r_tree ] from an ergodic exchangeable random didendritic system @xmath550 ( equivalently , from the labeled version @xmath416 of an extremal infinite rmy bridge @xmath110 ) .",
    "recall from proposition  [ p : partial_order_extends ] that we can extend the partial order @xmath212 to all of @xmath771 .",
    "suppose that @xmath818 is a a complete separable @xmath5-tree with finite diameter .",
    "a _ leaf _ of @xmath818 is a point @xmath819 such that there do not exist two points @xmath820 for which @xmath215 is in the interior of the segment between @xmath191 and @xmath216 .",
    "the @xmath5-tree @xmath818 is spanned by its set of leaves .",
    "an _ isolated leaf _ of a complete separable @xmath5-tree @xmath818 is a leaf @xmath819 such that for some @xmath597 the open ball of radius @xmath597 centered at @xmath215 is a half - open line segment with @xmath215 at the closed end of the segment .",
    "there is a maximal such @xmath597 and we write @xmath821 for the corresponding half - open line segment . for a leaf @xmath215 that is not isolated , we set @xmath822 .",
    "the _ core _ of @xmath818 is the subtree @xmath823 spanned by the set of points of the form @xmath824 as @xmath215 ranges over the leaves of @xmath818 .",
    "it is not hard to show that @xmath823 is a closed @xmath5-tree and that @xmath824 is the unique point of @xmath823 that is closest to the leaf @xmath215 and so we think of @xmath824 as the _ point of attachment _ of @xmath215 to the core .",
    "also , if for a leaf @xmath819 we let @xmath825 be the closure of the subtree of @xmath818 spanned by the leaves of @xmath818 other than @xmath215 , then @xmath826 .",
    "[ l : core_properties ]    * the core of @xmath771 is the closure of the subtree spanned by the set @xmath827 . * for all @xmath498 , @xmath828 and if @xmath152 is any sequence in @xmath829 such that @xmath830 , then @xmath831 . * for @xmath498 , @xmath832 . * for @xmath507 with @xmath491 , @xmath833 . * for @xmath507 with @xmath491 ,",
    "the most recent common ancestor of @xmath834 and @xmath835 in the partial order that the core @xmath836 inherits from @xmath771 is @xmath497 and @xmath837 * under our standing ergodicity assumption , the isometry class of @xmath836 together with the partial order on @xmath836 inherited from the partial order @xmath212 are both constant almost surely .",
    "parts ( a ) , ( b ) and ( c ) are straightforward and are left to the reader . for part ( d )",
    "suppose that @xmath838 for @xmath491 . by part ( c ) , @xmath839 .",
    "thus , by part ( b ) , @xmath840 and @xmath841 .",
    "this is not possible unless @xmath100 and @xmath101 are both isolated . by the definition of @xmath773",
    ", there are infinitely many @xmath842 such that @xmath843 . for any such @xmath95",
    "we must have either @xmath844 or @xmath845 , so that @xmath846 or @xmath847 , but this contradicts @xmath840 .",
    "part ( e ) is also clear and is left to the reader .    for part ( f ) , note first of all that if @xmath79 is a permutation of @xmath480 such that @xmath551 for all but finitely many @xmath498 and @xmath848 is the random didendritic system defined in definition  [ def5_8 ] , then the the isometry class of @xmath836 as a random complete separable metric space is unchanged if we replace @xmath529 by @xmath848 .",
    "our standing ergodicity assumption gives that the isometry class of @xmath836 is constant almost surely .",
    "the root @xmath790 defined in remark  [ r : root_of_t ] is an element of @xmath836 .",
    "it is clear that the location of @xmath790 is unchanged if we replace @xmath550 by @xmath552 , and so the restriction of the random partial order @xmath212 to @xmath836 is also constant .",
    "[ e : coin_tossing_core ] consider the @xmath5-tree @xmath771 constructed in example  [ e : coin_tossing_tree ] from the infinite rmy bridge introduced in example  [ e : coin_tossing_bridge ] .",
    "the core of @xmath771 is the interval @xmath797 $ ] .",
    "consider the maps @xmath849 and @xmath850 given by @xmath851 and @xmath852 , @xmath10 .",
    "define the exchangeable random didendritic systems @xmath853 and @xmath854 by @xmath855 @xmath856 @xmath857 and @xmath858 define the partial orders @xmath859 and @xmath860 on @xmath861 , respectively , by declaring that @xmath862 or , equivalently , @xmath863    by exchangeability , the random didendritic systems @xmath864 , @xmath865 and @xmath562 have the same distribution . by the ergodicity of @xmath562 , the random didendritic systems @xmath864 and @xmath865 are independent . construct random partially ordered @xmath5-trees @xmath866 and @xmath867 from @xmath864 and @xmath865 in the same manner that @xmath868 was constructed from @xmath562 .    by de finetti s theorem and the strong law of large numbers , @xmath869 for any @xmath507 .",
    "therefore , the distance between @xmath117 and @xmath353 in @xmath870 ( resp .",
    "@xmath871 ) is the same as the distance between @xmath872 and @xmath873 ( resp . @xmath874 and @xmath875 ) in @xmath771 , and hence we may ( and will ) identify @xmath870 and @xmath871 with the closures in @xmath771 of the respective sets @xmath876 and @xmath877 .",
    "the set @xmath878 is the closure of the subtree spanned by the set of attachment points @xmath879 and , by part ( a ) of lemma  [ l : core_properties ] , also the closure of the subtree spanned by the set of points @xmath880 .",
    "it is clear that @xmath881 and @xmath882 .",
    "it follows from remark 11.2 and the second proof of proposition 3.16 in @xcite that almost surely for any @xmath883 and @xmath884 , there exists @xmath885 ( resp .",
    "@xmath886 ) with @xmath887 and hence @xmath888 .    for the benefit of the reader , we sketch the argument from @xcite in our notation . fix @xmath889 and a deterministic sequence @xmath890 such that @xmath891 , @xmath892 , and @xmath893 for all @xmath894 . set @xmath895 .",
    "define an exchangeable equivalence relation @xmath896 on @xmath897 by declaring that @xmath898 , @xmath899 , @xmath491 , if @xmath900 for some @xmath901 .",
    "note that if @xmath898 , @xmath899 , @xmath491 , then @xmath902 the crucial observation , stated and proved as ( 11.4 ) of @xcite , is that almost surely the exchangeable equivalence relation @xmath896 does not have any singleton equivalence classes .",
    "it then follows from kingman s paintbox construction of exchangeable equivalence relations that almost surely for any @xmath884 there exists @xmath885 ( respectively , @xmath886 ) with @xmath120 distinct and @xmath903 , and hence @xmath904    let @xmath905 and @xmath906 be the analogues of @xmath907 for @xmath866 and @xmath867 .",
    "for @xmath498 we have that @xmath908 , the closest point in @xmath909 to @xmath100 ( where we stress that @xmath100 labels an element of @xmath871 ) , is an element of @xmath910 .",
    "it follows from the exchangeability inherent in our construction that @xmath911 is an exchangeable sequence of random elements of @xmath912 . by our standing ergodicity assumption and",
    "de finetti s theorem , the random elements in this sequence are independent and identically distributed , and it is a consequence of part ( d ) of lemma  [ l : core_properties ] that their common distribution is , prefiguring the notation in the statement of proposition  [ p : up_to_left_right ] below , a diffuse probability measure @xmath104 on the @xmath5-tree @xmath913 that is contained in @xmath771 and rooted in @xmath914 . the probability measure @xmath104 and the @xmath5-tree @xmath103 are the objects addressed in this section s title",
    ".    for @xmath507 with @xmath491 , part ( e ) of lemma  [ l : core_properties ] gives that @xmath915 is the most recent common ancestor of @xmath908 and @xmath916 in the partial order @xmath860 .",
    "moreover , @xmath917 if and only if @xmath918 \\cap [ \\rho,\\pi_+(j ) ] \\subseteq [ \\rho,\\pi_+(i ) ] \\cap [ \\rho,\\pi_+(p)]$ ] or @xmath918 \\cap [ \\rho,\\pi_+(j ) ] \\subseteq [ \\rho,\\pi_+(j ) ] \\cap [ \\rho,\\pi_+(p)]$ ] , where @xmath791 $ ] is the geodesic segment between @xmath790 and @xmath215 in @xmath919 , and so if we write @xmath920 for the distance between @xmath507 , @xmath491 , in @xmath871 , we have from part ( e ) of lemma  [ l : core_properties ] that @xmath921 \\cap [ \\rho,\\pi_+(j ) ] \\subseteq [ \\rho,\\pi_+(i ) ] \\cap [ \\rho,\\pi_+(p)]\\ } \\\\ & \\quad \\cup \\{[\\rho,\\pi_+(i ) ] \\cap [ \\rho,\\pi_+(j ) ] \\subseteq [ \\rho,\\pi_+(j ) ] \\cap [ \\rho,\\pi_+(p)]\\ } \\bigr ) . \\\\ \\end{split}\\ ] ]    because @xmath867 has the same distribution as @xmath868 , we have established the following result .    [",
    "p : up_to_left_right ] suppose that @xmath492 , @xmath528 and @xmath212 are the equivalence relation on @xmath493 , the equivalence classes and the partial order on those equivalence classes arising from an ergodic exchangeable random didendritic system ( equivalently , from the labeled version of an extremal infinite rmy bridge ) .",
    "there is a complete separable @xmath5-tree @xmath103 , a point @xmath922 , and a diffuse probability measure @xmath104 on @xmath103 such that the following hold .",
    "let @xmath923 be i.i.d .",
    "random elements of @xmath103 with common distribution @xmath104 .",
    "define a random equivalence relation @xmath924 on @xmath493 by declaring that @xmath925 if and only if @xmath926 , and @xmath927 for @xmath491 and @xmath802 if and only if @xmath928 \\cap [ \\theta,\\xi_j ] = [ \\theta,\\xi_k ] \\cap [ \\theta,\\xi_\\ell]$ ] , where @xmath929 $ ] is the geodesic segment between @xmath930 and @xmath215 , in @xmath103 .",
    "denote the equivalence class containing @xmath931 by @xmath932 .",
    "define a partial order @xmath933 on the set of equivalence classes by declaring that @xmath934 for all @xmath491 and that @xmath935 for @xmath491 and @xmath802 if @xmath928 \\cap [ \\theta,\\xi_j ]   \\subsetneq [ \\theta,\\xi_k ] \\cap [ \\theta,\\xi_\\ell]$ ] .",
    "the object @xmath936 has the same distribution as @xmath937 .",
    "throughout this section , let @xmath777 be the @xmath5-tree constructed in section  [ s : r_tree ] from an ergodic exchangeable random didendritic system @xmath550 ( equivalently , from the labeled version @xmath416 of an extremal infinite rmy bridge @xmath110 ) .",
    "let @xmath103 , @xmath930 and @xmath104 be the objects described in proposition  [ p : up_to_left_right ] .",
    "thus , @xmath103 is a complete separable @xmath5-tree , @xmath930 is an element of @xmath103 , and @xmath104 is a diffuse probability measure on @xmath103 .",
    "further , let @xmath923 be i.i.d .",
    "random elements of @xmath103 with common distribution @xmath104 .",
    "we may suppose that @xmath938 if and only if @xmath926 and that @xmath939 for @xmath491 and @xmath802 if and only if @xmath928 \\cap [ \\theta,\\xi_j ] = [ \\theta,\\xi_k ] \\cap [ \\theta,\\xi_\\ell]$ ] , where we recall that @xmath929 $ ] is the geodesic segment between @xmath930 and @xmath215 in @xmath103 .",
    "recall from lemma  [ l : partial_order_plus_left - right ] that if we know the equivalence relation @xmath492 and the partial order @xmath212 of the didendritic system @xmath562 , then the partial orders @xmath226 and @xmath227 ( and hence the didendritic system ) is uniquely determined by the specification for all distinct @xmath507 whether @xmath940 and @xmath941 or @xmath942 and @xmath943 .",
    "it follows from the exchangeability and ergodicity of @xmath562 that the random array @xmath949 is jointly exchangeable and ergodic and , indeed , the random array @xmath950 is also jointly exchangeable and ergodic .",
    "therefore , by the aldous  hoover ",
    "kallenberg theory of such random arrays , we may suppose that on some extension of our underlying probability space there exist i.i.d .",
    "random variables @xmath951 , and @xmath952 that are uniform on @xmath54 $ ] and a function @xmath953)^2 \\times [ 0,1 ] \\to \\{0,1\\}$ ] such that @xmath954 where @xmath955 for @xmath956 ( here @xmath212 is the usual order on @xmath480 ) ( see ( * ? ? ? * theorem 7.22 , lemma 7.35 ) ) . because @xmath957 , the function @xmath958 has the property @xmath959 .",
    "if @xmath563 are distinct we have @xmath960 on the event @xmath961 \\cap [ \\theta , \\xi_j ] = [ \\theta , \\xi_i ] \\cap [ \\theta , \\xi_k ] \\subsetneq [ \\theta , \\xi_j ] \\cap [ \\theta , \\xi_k]\\}$ ] .",
    "that is , @xmath962 on the latter event .",
    "similarly , @xmath963 on the event @xmath964 \\cap [ \\theta , \\xi_i ] = [ \\theta , \\xi_j ] \\cap [ \\theta , \\xi_k ] \\subsetneq [ \\theta , \\xi_i ] \\cap [ \\theta , \\xi_k]\\}$ ] .      the intuition for being true is firstly that if we had @xmath968 for all @xmath969 , so that @xmath970 is a cherry , then there could be a need to use the randomization provided by @xmath971 to build @xmath972 ; that is , @xmath973 could depend on @xmath971 .",
    "however , cherries do not occur with positive probability because of lemma  [",
    "l : genuine_metric ] .",
    "moreover , on the event where @xmath974 for at least one , and hence infinitely many , @xmath969 , it follows that @xmath975 for all such @xmath117 , which ca nt happen if @xmath976 has a genuine functional dependence on @xmath977 , and hence only the extra randomization provided by @xmath978 ( rather than that provided by @xmath979 and @xmath971 ) might be needed to build @xmath972 .",
    "similarly , on the event where @xmath980 for at least one , and hence infinitely many , @xmath969 , it follows that @xmath981 for all such @xmath117 and only the extra randomization provided by @xmath979 ( rather than that provided by @xmath978 and @xmath971 ) might be needed to build @xmath972 .",
    "lastly , on the event where @xmath982 for at least one , and hence infinitely many , pairs @xmath983 , it follows that @xmath984 for all such pairs @xmath985 and there is no need for the extra randomization provided by @xmath978 , @xmath979 or @xmath971 to build @xmath972 .",
    "[ lemma8_1 ] consider on some probability space @xmath986 independent random elements @xmath987 , @xmath988 , @xmath989 of some borel space @xmath990 and @xmath991 , @xmath992 , @xmath993 of some borel space @xmath994 .",
    "suppose that @xmath987 , @xmath988 , @xmath989 have the same diffuse probability distribution @xmath604 and that @xmath991 , @xmath992 , @xmath993 have the same diffuse probability distribution @xmath995 .",
    "write @xmath728 for the subset of @xmath996 that consists of triplets with distinct entries .",
    "given an ordered listing @xmath120 of @xmath997 and a set @xmath998 , put @xmath999 .",
    "suppose that there is a set @xmath1000 such            for @xmath1012 with @xmath1013 we have @xmath1014 and @xmath1015 thus , @xmath1016 and @xmath1017 the last two equations specify the value of @xmath1018 as a quantity depending on @xmath1019 alone except for those pairs @xmath1019 such that @xmath1020 but the set of such pairs has zero @xmath1021-measure by assumption .",
    "the function @xmath1022 is not arbitrary ; it must satisfy some obvious consistency conditions .",
    "for example , for distinct @xmath563 when @xmath1023 , it must be the case that @xmath940 if and only if @xmath1024 , and this translates into the requirement that when @xmath1025 \\cap [ \\rho,\\xi_j ]   = [ \\rho , \\xi_i ] \\cap [ \\rho , \\xi_k ]   \\subsetneq   [ \\rho , \\xi_j ] \\cap [ \\rho , \\xi_k]$ ] it must be the case that @xmath1026 if and only if @xmath1027 , which in turn translates into the requirement that for @xmath1028-a.e . @xmath1029)^3 $ ] when @xmath1030 \\cap [ \\theta , y ] = [ \\theta , x ] \\cap [ \\theta , z ] \\subsetneq [ \\theta , y ] \\cap [ \\theta , z]$ ] it must be the case that @xmath1031 .",
    "the next result specifies fully these consistency conditions and combines , without the need for significant further argument , the development leading to proposition  [ p : up_to_left_right ] with the considerations so far in this section about resolving `` left  vs ",
    "right '' to give a complete characterization of the family of ergodic exchangeable random didendritic systems and hence a concrete description of the family of extremal infinite rmy bridges .",
    "the result is thus an explicit determination of the doob  martin boundary of the rmy chain .",
    "the only point that deserves some added explanation is the claim of ergodicity in the statement of the converse ; however , this follows from the observation made in remark  [ r : jointly_exchangeable ] that ergodicity of an exchangeable random didendritic system ( on @xmath480 ) is equivalent to the independence of the exchangeable random didendritic systems it induces on disjoint subset of @xmath480 .",
    "[ t : main ] consider a complete separable @xmath5-tree @xmath103 , a point @xmath922 , a diffuse probability measure @xmath104 on @xmath103 , and a borel function @xmath967)^2 \\to \\{0,1\\}$ ] .",
    "let @xmath1032 be lebesgue measure on @xmath54 $ ] .",
    "suppose that the following hold .    * for @xmath1033-a.e .",
    "@xmath1034 , two of the three geodesic segments @xmath1030 \\cap [ \\theta , y]$ ] , @xmath1030 \\cap [ \\theta , z]$ ] , @xmath1035 \\cap [ \\theta , z]$ ] are equal and these two are strictly contained in the third .",
    "* for @xmath1028-a.e .",
    "@xmath1029)^3 $ ] , @xmath1030 \\cap [ \\theta , y ] = [ \\theta , x ]",
    "\\cap [ \\theta , z ] \\subsetneq [ \\theta , y ] \\cap [ \\theta , z]$ ] implies that @xmath1031 . * for @xmath1036-a.e .",
    "@xmath1037)^2 $ ] , @xmath1038 .",
    "let @xmath1039 be i.i.d .",
    "random elements of @xmath1040 $ ] with common distribution @xmath1041 .",
    "there is an ergodic exchangeable random didendritic system @xmath529 defined as follows .",
    "the random equivalence relation @xmath492 on @xmath493 is given by declaring that @xmath1042 and @xmath1043 \\cap [ \\theta,\\xi_j ] = [ \\theta,\\xi_k ] \\cap [ \\theta,\\xi_\\ell].\\ ] ] the random partial orders @xmath226 and @xmath227 on the corresponding set of equivalence classes @xmath792 are specified by declaring for @xmath507 , @xmath491 , that @xmath1044            now consider the infinite rmy bridge of example  [ e : mbfulltree ] . here",
    "@xmath103 is the @xmath5-tree @xmath771 of example  [ e : mbfulltree_real ] .",
    "the leaves of @xmath103 are in a bijective correspondence with @xmath250 and @xmath104 may be identified with the fair coin - tossing measure @xmath262 on @xmath250 introduced in example  [ e : complete_binary_embedding ] .",
    "there is no need for genuine randomization in this case . indeed , for @xmath1048-a.e .",
    "@xmath1049 we have either @xmath1050 for @xmath1051-a.e . @xmath1052 or @xmath1053 for @xmath1051-a.e .",
    "@xmath1052 . that is",
    ", we can just take the @xmath5tree @xmath103 and augment it with _ deterministic _ left ",
    "right choices because in this case for any @xmath1054 we have @xmath1055 for infinitely many other @xmath985 .",
    "the resulting representation of the infinite rmy bridge coincides with the one given in example  [ e : mbfulltree ] .    as we remarked in the introduction , the distribution of the limit in the doob ",
    "martin topology of the rmy chain ( that is , the probability measure that appears in the poisson boundary of the rmy chain ) is concentrated on points that can be represented in terms of ensembles @xmath1045 such that @xmath1022 takes values in @xmath14 .",
    "theorem  [ t : main ] gives a concrete characterization of the family of ergodic exchangeable random didendritic systems or , equivalently , the family of extremal infinite rmy bridges .",
    "consequently , it gives an explicit description of the points in the doob  martin boundary of the rmy chain .",
    "of course , the ingredients appearing in the representation afforded by the result are not unique .",
    "also , the doob  martin boundary is not just a set : it carries a metrizable topological structure",
    ". however , a sequence of representations corresponds to a convergent sequence of boundary points if and only if the restrictions of the associated exchangeable random didendritic systems to finite subsets of @xmath480 converge in distribution .",
    "that is , a sequence of representations corresponds to a convergent sequence of boundary points if and only if for all @xmath2 the sequence of random binary trees built by sampling @xmath3 points according to the associated sampling measure and determining left  versus ",
    "right orderings using extra randomness as necessary converges in distribution .",
    "* acknowledgment*. rudolf grbel thanks julian gerstenberg for many stimulating discussions .",
    "we thank stephan gufler for pointing out a gap in a previous version of section 7 and showing us how to repair it .                  c.  borgs , j.  t. chayes , l.  lovsz , v.  t. ss , and k.  vesztergombi , _ convergent sequences of dense graphs .",
    "i. subgraph frequencies , metric properties and testing _ , adv . math .",
    "* 219 * ( 2008 ) , no .  6 , 18011851 .          bo  chen and matthias winkel , _ restricted exchangeable partitions and embedding of associated hierarchies in continuum random trees _ , ann .",
    "henri poincar probab",
    "* 49 * ( 2013 ) , no .  3 , 839872 .",
    "steven  n. evans , _ probability and real trees _ , lecture notes in mathematics , vol .",
    "1920 , springer , berlin , 2008 , lectures from the 35th summer school on probability theory held in saint - flour , july 623 , 2005 .",
    "hans fllmer , _ phase transition and martin boundary _ , sminaire de probabilits , ix ( seconde partie , univ .",
    "strasbourg , strasbourg , annes universitaires 1973/1974 et 1974/1975 ) , springer , berlin , 1975 , pp .",
    "lecture notes in math .",
    "465 .",
    "john  g. kemeny , j.  laurie snell , and anthony  w. knapp , _ denumerable markov chains _ , second ed . , springer - verlag , new york , 1976 , with a chapter on markov random fields , by david griffeath , graduate texts in mathematics , no .",
    "40 .",
    "philippe marchal , _ constructing a sequence of random walks strongly converging to brownian motion _ , discrete random walks ( paris , 2003 ) , discrete math . theor .",
    ", ac , assoc . discrete math .",
    "nancy , 2003 , pp .",
    "181190 ( electronic ) .",
    "j.  pitman , _ combinatorial stochastic processes _ , lecture notes in mathematics , vol .",
    "1875 , springer - verlag , berlin , 2006 , lectures from the 32nd summer school on probability theory held in saint - flour , july 724 , 2002 , with a foreword by jean picard .",
    "l.  c.  g. rogers and david williams , _ diffusions , markov processes , and martingales .",
    "vol . 1 _ , cambridge mathematical library , cambridge university press , cambridge , 2000 , foundations , reprint of the second ( 1994 ) edition",
    ".      richard  p. stanley , _ enumerative combinatorics .",
    "vol . 1 _ , cambridge studies in advanced mathematics , vol .  49 , cambridge university press , cambridge , 1997 , with a foreword by gian - carlo rota , corrected reprint of the 1986 original ."
  ],
  "abstract_text": [
    "<S> rmy s algorithm is a markov chain that iteratively generates a sequence of random trees in such a way that the @xmath0 tree is uniformly distributed over the set of rooted , planar , binary trees with @xmath1 vertices . </S>",
    "<S> we obtain a concrete characterization of the doob  martin boundary of this transient markov chain and thereby delineate all the ways in which , loosely speaking , this process can be conditioned to `` go to infinity '' at large times . </S>",
    "<S> a ( deterministic ) sequence of finite rooted , planar , binary trees converges to a point in the boundary if for each @xmath2 the random rooted , planar , binary tree spanned by @xmath3 leaves chosen uniformly at random from the @xmath0 tree in the sequence converges in distribution as @xmath4 tends to infinity  a notion of convergence that is analogous to one that appears in the recently developed theory of graph limits .    </S>",
    "<S> we show that a point in the doob  martin boundary may be identified with the following ensemble of objects : a complete separable @xmath5-tree that is rooted and binary in a suitable sense , a diffuse probability measure on the @xmath5-tree that allows us to make sense of sampling points from it , and a kernel on the @xmath5-tree that describes the probability that the first of a given pair of points is below and to the left of their most recent common ancestor while the second is below and to the right . </S>",
    "<S> two such ensembles represent the same point in the boundary if for each @xmath2 the random , rooted , planar , binary trees spanned by @xmath3 independent points chosen according to the respective probability measures have the same distribution . </S>",
    "<S> also , the doob  martin boundary corresponds bijectively to the set of extreme point of the closed convex set of nonnegative harmonic functions that take the value @xmath6 at the binary tree with @xmath7 vertices ; in other words , the minimal and full doob  martin boundaries coincide . </S>",
    "<S> these results are in the spirit of the identification of graphons as limit objects in the theory of graph limits .     corresponding author . </S>",
    "<S> sne supported in part by nsf grant dms-0907630 , nsf grant dms-1512933 , and nih grant 1r01gm109454 - 01 . </S>",
    "<S> aw supported in part by dfg priority program 1590 . ] </S>"
  ]
}