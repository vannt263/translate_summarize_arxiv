{
  "article_text": [
    "regions are an effective optical tracer of ongoing massive star formation .",
    "even a single early - type star produces enough lyman continuum photons to ionize a quantity of gas sufficient to produce readily detectable recombination lines in galaxies at distances of many mpc .",
    "observations in the balmer lines ( predominantly h@xmath1 ) and other nebular emission lines ( e.g. [ ] @xmath6 6548,6584 , [ ] @xmath6 6717,6731 , and [ ] @xmath7 5007 ) enable estimation of physical conditions within discrete regions ( @xcite , @xcite ( @xmath8 ) , @xcite ) .",
    "conversely , measurement of the region luminosity function can indicate global patterns in the process of star cluster formation ( @xcite ( hereafter keh89 ) , @xcite , @xcite , @xcite ) . an excellent review of the field is provided by @xcite .",
    "we sought a fully - automated technique for determination of the positions , fluxes , and sizes of regions in galaxies .",
    "such a tool is crucial for efficient and reproducible characterization of their star formation properties , especially if meaningful intercomparison between datasets is a primary goal .",
    "another advantage of an automated approach over conventional measurement by visual inspection is that many systematic effects , like that of reduced spatial resolution for more distant galaxies or of differences in limiting sensitivity , can be quantitatively ascertained .",
    "well - resolved images of spiral and irregular galaxies reveal that massive star clusters often form in close proximity , usually leading to a confused and rather inhomogeneous distribution of ionized gas .",
    "this inherent clumpiness makes automated photometry difficult .",
    "photometric accuracy can be further hindered by the presence of a variable background of diffuse ionized gas ( dig ) .",
    "in complex environments of this nature it is practically impossible to cleanly separate the contribution of neighboring extended objects to the observed surface brightness distribution .",
    "methods of correcting for source overlap in the special case of stellar photometry ( e.g. daophot , @xcite ; allframe , @xcite ) can not be applied without accurate models for the intrinsic structure of every source . at present",
    "it is infeasible to construct a comprehensive set of models spanning the observed properties of resolved regions in nearby galaxies . _",
    "any automated photometric procedure optimized for regions must consequently provide adaptivity to the actual source morphology .",
    "this can be accomplished using an iterative approach to `` grow '' sources from an initial guess at the shape .",
    "_ we have developed * hii_phot _ * , a user - friendly procedure written in idl which employs such a method .",
    "@xcite demonstrated the potential of an automated photometry procedure for regions based on a simple iterative growth mechanism .",
    "their method , called percent - of - peak photometry ( ppp ) , involved growth from local maxima down to a constant fraction of the difference between each peak and its local background . in the grand - design spiral ngc  3398 and the flocculent spiral ngc  4414 , ppp successfully reproduced the lf obtained through standard fixed - threshold photometry ( ftp ) .",
    "@xcite have recently applied ppp during their analysis of four nearby dwarf galaxies .",
    "unfortunately , mccall and collaborators are unable to recover more than a small percentage of the observed flux for even the brightest sources when using ppp .",
    "this stems from the fact that they can only grow to 70% of peak before the automated method becomes susceptible to rapid growth and merging of adjacent regions .",
    "our present research was inspired by the desire to overcome this limitation using criteria to carefully regulate growth in saddle points between neighboring regions .",
    "also , we hoped to recover all the observed flux rather than only that contributed by each region s brightest pixels by defining larger `` seeds '' with a better match in shape to the source structure ( rather than growing from a single pixel ) .",
    "mccall et al . argued that the flux detected using ppp was directly proportional the total source flux , but their line of reasoning assumed an idealized stromgren sphere geometry for all regions .",
    "it is difficult to imagine that this assumption could be satisfied in general .",
    "this paper is organized in the following manner .",
    "section  [ sec : hiiphotcode.procedure ] presents the concepts and algorithms employed within * hii_phot_*. section  [ sec : hiiphotcode.m51.obs ] contains a very brief description of the m51 dataset used for illustrating the capabilities of the procedure . section  [ sec : hiiphotcode.results ] presents the population of regions in m51 , including a new , more sensitive luminosity function ( lf ) .",
    "finally , we conclude in section  [ sec : hiiphotcode.summary ] with a summary and view toward the near future .",
    "* hii_phot _ * is a completely automated method for photometry of regions .",
    "our algorithm is sufficiently general to work well for distant galaxies , but provides the most substantial benefit during analysis of narrowband images of complicated , highly - resolved systems .",
    "below is an explicit description of the procedure .      following the discussion of astronomical object recognition recently presented by @xcite , hereafter tbw98 , @xcite ; and @xcite , hereafter mtb99 , we recognize that an ideal technique for decomposition of narrowband images into individual objects might employ : ( 1 ) calculation of projected physical models describing all anticipated source morphologies , ( 2 ) cross - correlation of image data with each model to find tentative matches , and finally ( 3 ) pruning of the composite detection list to correct for multiple detections of the same source . regrettably , this direct approach is not currently viable due to a lack of sufficient computing power and a comprehensive set of models .",
    "one practical alternative might be to select a set of sufficiently diverse empirical models and evaluate the degree to which they match the data at some limited set of sky positions .",
    "* hii_phot _ * employs this strategy , followed by an iterative growing procedure to permit departures from the idealized models .",
    "the * hii_phot _ * collection of empirical models includes six basic morphologies , each considered at various sizes and with major - to - minor axis ratios ranging from one to two , stepping by 0.25 .",
    "we permit different position angles , sampling with an increment of 15 . in each morphology ,",
    "the predicted surface brightness of the radially symmetric ( base ) model is computed as :    @xmath9    figure  [ fig : normalized.model.cuts ] shows a model - center cross - cut for every morphological class .",
    "each profile has been normalized to unit peak brightness .",
    "we include gaussians by setting r@xmath10  =  0 , whereas ring models of varied `` shell thickness '' ( relative to the ring diameter ) are generated by taking r@xmath11 and adopting various @xmath12 ratios .",
    "specific choices of @xmath12 were selected in order to sample thin rings , thick rings , and centrally depressed structures .",
    "note that in fig .",
    "[ fig : normalized.model.cuts ] we varied r@xmath10 with the intent of producing sources having the same characteristic size .",
    "as mentioned above , each radially symmetric base model is stretched and rotated in numerous ways for comparison with the data .",
    "the essential challenge when incorporating these parameterized `` guess morphologies '' into * hii_phot _ * is finding a way to limit the number of sky positions at which any model must be compared with the data . because we use",
    "at least 100 stretched / rotated variants for each base model of a given size , together with typically 50 base model sizes , it is prohibitive to compute a cross - correlation between each model and the entire image plane ( as implemented by tbw98 for the case of shells ) . instead , we determine a list of `` tentative match '' sky coordinates for each model by tabulating significant local maxima in the convolution of the data with an appropriately - sized circular gaussian . in this manner",
    ", we detect structures with dissimilar morphology but having about the same size in a single pass .",
    "our technique works because we only look for regions of a given characteristic size on images that have been smoothed to remove source structure on smaller scales .",
    "even the most well - resolved ring ( for instance ) will end up looking like a gaussian after some degree of spatial smoothing .",
    "we use `` lowered '' gaussian kernels ( as also employed in daophot , @xcite ) as a means of removing slowly varying background structure from the galaxy image during our multi - resolution , convolution - based procedure .",
    "each gaussian kernel was truncated at a radius of 1.5@xmath13 and offset with a constant in order to provide an integral over the kernel of zero .",
    "we tabulate solely those convolution maxima which have peaks exceeding a @xmath0 threshold .",
    "variance associated with random fluctuations in the convolution of each gaussian kernel with our data is measured in a user - selected sky region .",
    "modest flat - fielding errors are not problematic due to our use of a lowered gaussian as the convolution kernel .    after compiling a list of tentative centroid positions for sources of each characteristic size , direct comparison between a set of stretched / rotated models ( gaussians and rings ) and",
    "the data is accomplished by calculation of a noise - corrected version of pearson s linear correlation coefficient , @xmath14 .",
    "( as described in detail by mtb99 , this statistic allows robust estimation of `` goodness of fit '' and completeness .",
    "note that @xmath14 is invariant under linear scaling of the data , so the flux of a region and the level of its local background are irrelevant .",
    "only the best match ( highest @xmath14 ) model together with it s value of @xmath14 are retained for each tentative source .",
    "the entire list of tentative sources is sorted by the @xmath14 value of the entries .",
    "we then employ a cutoff , @xmath15 , in the correlation coefficient in order to retain only the best matches .",
    "for this paper we adopted @xmath16 , although the median value was @xmath17 .",
    "remember that so far we are only creating a ranked list of possible detections .",
    "having this sorted list of potential detections , we next eliminate multiple detections associated with the same observed emission .",
    "this is accomplished by defining `` footprints '' in the image for each source . beginning with the highest ranked detection , we loop over all regions allowing each one to `` claim '' pixels of the input image .",
    "each detection is allowed to place a footprint if the following conditions are satisfied : ( 1 ) the associated model centroid has not been claimed , ( 2 ) 90% of the data flux inside the model s 20% isophotal boundary remains unclaimed , and ( 3 ) the detection s signal - to - noise is greater than @xmath18 .",
    "( see section  [ sec : hiiphotcode.flux.and.sn ] for a detailed discussion of signal - to - noise in the context of * hii_phot_*. we introduce a formal analysis based on uncertainties associated with the independent line+continuum and continuum images , rather than merely the continuum - subtracted image . )",
    "regions satisfying these conditions take as a footprint all unclaimed pixels within the 20% isophotal level of their best - match model .",
    "effectively , our footprint convention allows simultaneous rejection of multiple detections ( naturally leaving only the best - match model ) and introduces a buffer between neighboring regions",
    ". one can think of this procedure as a detailed fitting process in which all sources are compared with a finite number of relatively well - matched models .",
    "due to line - of - sight projection , one should anticipate overlapping regions in most galaxies ( even if perfectly face - on , due to the finite disk thickness ) .",
    "note that our methodology makes it possible to separately detect and analyze sources even when they have complete spatial overlap if their morphologies are sufficiently distinct .",
    "if a compact , highly significant source first places a footprint in an area containing many surface brightness enhancements with a range in size , the probability is substantial that a larger , less significant source will overlap the initial detection .",
    "this large detection will be allowed into the catalog provided the compact region does not contain more than 10% of the observed flux within the big model s 20% isophotal boundary ( presuming the other standard conditions for a footprint are also met ) .",
    "the * hii_phot _ * procedure naturally treats partially overlapping and fully overlapping detections in this manner .    figure  [ fig : hiiphot.demo ] illustrates the complete * hii_phot _ * procedure by showing the same image section within a continuum subtracted h@xmath1 image of m51 at various stages of the processing . in particular , fig .",
    "[ fig : hiiphot.demo]a shows our * hii_phot _ * footprints .",
    "the image data has been scaled logarithmically to keep from saturating the inner portions of the galaxy .",
    "scaling is identical in each panel so as to facilitate comparison between panels [ fig : hiiphot.demo]c[fig : hiiphot.demo]f .",
    "all marked regions are associated with a convolution peak ( @xmath19 or better ) at either original or somewhat degraded resolution .",
    "[ fig : high.contrast ] shows two small subsections of fig .  [",
    "fig : hiiphot.demo]c ( see description further below ) with linear scaling in order to demonstrate the significance of low surface brightness detections which are difficult to appreciate in fig .",
    "[ fig : hiiphot.demo ] .",
    "not all of the detections shown in fig .",
    "[ fig : high.contrast ] are used in the construction of our region lf , as we demand that every `` photometric source '' have a final signal - to - noise ratio in excess of five .",
    "nevertheless , all detections plotted are thought to be genuine , having been originally discovered using * hii_phot _ * and later confirmed by visual inspection of individual continuum - subtracted images ( before cr - rejection ) viewed at various resolutions .",
    "recall that we never make use of ( and draw no conclusions from ) these intrinsically questionable detections .",
    "essentially they should be considered candidates , until deeper observations become available .    because our empirical models are only a first order approximation to actual source structure",
    ", footprints often contain pixels that are not bright enough to justifiably remain in the final boundary of the region .",
    "we account for this by rejecting all pixels which fall outside a `` bounding isophote '' defined by 50% of the median data value found within each footprint ( where the median is measured relative to an estimated local background ) .",
    "we call these trimmed footprints `` seeds '' since they are composed of only those pixels destined to belong to a region , but do not yet reflect changes associated with the iterative growth procedure .",
    "our procedure ensures that all seed boundaries follow isophotal contours within footprint boundaries , although the specific cutoff varies depending on the distribution of pixel intensities within any given region . notice that this conservative approach makes it possible for ring - like footprints to reject pixels which fall within the object s central surface brightness depression .",
    "[ fig : hiiphot.demo]b shows the * hii_phot _ * seeds for our subsection of m51 . in practice ,",
    "our particular implementation of the `` seed '' convention is motivated by the following arguments : ( 1 ) multi - pixel seeds provide a `` head start '' for the iterative growth process , making it easier to reliably separate adjacent regions , ( 2 ) defining seeds as a data - regulated subset of model footprints allows the first true excursion of region boundaries from our set of empirical models .      given a set of seed pixels associated with every region in a galaxy , it might seem a simple matter to iteratively add pixels to each region until reaching the maximum extent of all nebulae .",
    "in fact , the implementation of a well - behaved iterative growing algorithm is far from trivial and there is no established convention for determining the `` edge '' of an region .",
    "@xcite encountered difficulty in growing their sources to isophotal cutoffs fainter than about 70% of the local peak .",
    "potential inhomogeneity in the diffuse background level and crowding of regions having remarkably different flux conspire to make the ppp method less suitable except in a limited set of well - behaved circumstances . * hii_phot _ * attempts to carefully control the rate of growth in saddle points between regions by introducing a slowly declining threshold which determines the set of pixels considered for growth during a given iteration .",
    "pixels having values below this global threshold are ignored until later iterations . in this way , neighboring regions approach their saddle point at an equal rate no matter what the difference in peak value or total counts between sources .",
    "iterative growth commences by setting the global threshold for pixel consideration equal to the highest bounding isophote and is reduced by 0.02 dex before each subsequent iteration .",
    "regions as a whole are considered for growth only if the median value of the pixels in a seed s `` exterior perimeter '' exceeds the slowly declining threshold .",
    "this implies that only the seed having the highest bounding isophote is considered during the first iteration .",
    "any time that more than one region is allowed to grow during an iteration , * hii_phot _ * cycles through the active regions in order of decreasing correlation coefficient , @xmath14 .",
    "qualified pixels ( lying above the global threshold ) which are adjacent to or diagonal from any pixel already belonging to the region being augmented are potentially added to the source if they are not claimed by other regions .",
    "that is , pixels from the exterior perimeter of a region can be added if they are bright enough .",
    "we also require that at least 50% of the perimeter pixels are added during any given iteration .",
    "if this is not the case , we postpone growth until the global threshold declines further , so as to simultaneously add most of an entire isophotal ring .",
    "growth for a particular region continues in this manner until either : ( 1 ) the observed surface brightness profile flattens sufficiently , or ( 2 ) no more qualified pixels can ever be reached due to being surrounded by other regions or because of the intrinsic data values .",
    "note that regions can `` stall '' for many iterations and do not immediately cease growing just because neighbor pixels can not be considered ( as a result of the global threshold ) .",
    "in other words , our iterative procedure amounts to carefully adding lower isophotal contours to all qualified regions after specifically accounting for a slightly unequal start brought about by our adaptive definition of seed boundaries .",
    "figure  [ fig : growth.schematic ] shows schematic representations of a hypothetical source being considered for iterative growth . in panel ( 4a ) , the dark shaded pixels belong to the region s interior perimeter set during active iteration @xmath20 , whereas lighter colored pixels compose the exterior perimeter group .",
    "the current region boundary is indicated with a heavy solid line .",
    "median values for the interior / exterior perimeter sets will be used to determine if the surface brightness profile has flattened sufficiently in order to stop further growth ( in subsequent iterations ) .",
    "some of the lightly shaded pixels have been marked with a circle .",
    "these exterior perimeter pixels have values above the global threshold and will be added to the region during iteration @xmath20 .",
    "note that more than 50% of the lightly shaded pixels fall into this category .",
    "if this had not been the case , growth for this region would stall until the * hii_phot _ * global threshold declined enough to allow a majority of the exterior perimeter pixels to augment the region .",
    "panel ( [ fig : growth.schematic]b ) is similar to panel ( [ fig : growth.schematic]a ) , except that it has been drawn for the following iteration , @xmath21 .",
    "the question of how to determine whether a surface brightness profile has `` flattened '' is somewhat difficult to treat on anything other than pragmatic grounds .",
    "presently there is no established connection between the rate of surface brightness decline and specific physical conditions within an nebula .",
    "originally we demanded that regions grow until the difference in median values between interior and exterior perimeter pixel sets indicated the surface brightness profile was no longer declining .",
    "this choice resulted in very large regions and significant bumping of adjacent regions , since in crowded fields brightness profiles rarely flatten out before encountering a neighbor .",
    "our reason for requiring that the surface brightness profile flatten completely was that we sought to fairly treat all regions , regardless of their environment . using this procedure we effectively determined groups of pixels most plausibly associated with the same ionizing source .",
    "that is , for this methodology , our `` regions '' included compact cores and related diffuse emission ( dig ) .",
    "although interesting in its own right , this non - conventional definition of an region makes it difficult to compare the current results with previous work and we sought a more flexible alternative .    in the end , we elected to permit an array of different stopping points ranging from very little growth to nearly the generous `` flat result '' described above .",
    "this amounted to adopting a series of cutoffs in terminal surface brightness slope , [ 10 , 4 , 2 , 1.5 , and 1 ] em / pc , then running the growth procedure from beginning to end for each .",
    "notice that the specific cutoff values given here are only appropriate if the calibrated narrowband data are expressed in the conventional units of em , @xmath22  pc , and must be rescaled for any other case . in section  [ sec : hiiphotcode.hiilf ]",
    ", we show that this approach allows us to directly address systematic uncertainty in region fluxes ( and the resulting luminosity function ) associated with our decision to stop growth at a given point . figs .",
    "[ fig : hiiphot.demo]c and  [ fig : hiiphot.demo]e present images of the m51 subsection with region boundaries marked for two different values of the terminal surface brightness slope . in fig .",
    "[ fig : hiiphot.demo]c growth has stopped at a slope of 10 em / pc , leaving a substantial fraction of diffuse emission possibly associated with discrete regions remaining outside the * hii_phot _ * boundaries .",
    "[ fig : hiiphot.demo]e shows the result for growth continuing until surface brightness profiles flatten to 1 em / pc .",
    "notice how isolated regions do eventually stop growing on their own , while the crowded central area has effectively been subdivided into numerous chunks ( each plausibly associated with an embedded ionizing source ) .",
    "the behavior of the iterative growth procedure is further illustrated in fig .",
    "[ fig : iterative.growth ] , which shows another section of m51 at several stages of growth . for reference ,",
    "all the results presented in this paper are based on a terminal profile slope of 1.5 em / pc , midway between the degree of growth shown in panels ( e ) and ( f ) of fig .",
    "[ fig : iterative.growth ] .",
    "one important advantage of adopting terminal surface brightness slopes ( specified in physical units ) is that our procedure is relatively robust to changes in signal - to - noise .",
    "one can think of other criteria for stopping growth that are not as reliable .",
    "for instance , we initially tried to quantify the `` stopping point '' for region growth in terms of various critical multiples of the formal error in the dimensionless surface brightness slope .",
    "this procedure appeared promising when analyzing our basic dataset , but was found to introduce substantial bias in the definition of region boundaries during experiments in which the signal - to - noise was globally reduced by factors ranging from 2 through 5 . in short ,",
    "as the test images were made noisier , growth stopped progressively sooner despite the fact that the underlying observed surface brightness profiles were no different .",
    "our adopted procedure is substantially more well - behaved under these circumstances and generates luminosity functions which are statistically indistinguishable at all but the lowest luminosities . sadly , loss of low luminosity sources is unavoidable with degraded signal - to - noise no matter how regions are grown .      for regions embedded in a background of diffuse ionized gas",
    "it is important to accurately estimate the dig flux contribution to the observed counts within a region s boundary . in past studies",
    ", most authors have gauged the background contribution by interactively selecting one or more positions near each region they thought to be representative of the level underlying the source .",
    "our method works as follows : ( 1 ) after final region boundaries are available , we define as `` background '' pixels all those unclaimed pixels within a projected distance of 250  pc from the boundary of an region , ( 2 ) next we select a uniformly - spaced set of `` control points '' to represent these background data , only accepting those which are at least 75% surrounded by other background pixels within a circular domain of 250  pc diameter , ( 3 ) we then compute the median value of all background pixels within the domain of each control point , and ( 4 ) we finally compute a surface fit to these median values .",
    "our surface - fitting procedure generates a low - order solution on small scales by interpolating between the 3 nearest control points at every position , but in a global sense the product is a very high - order surface .",
    "the result is essentially an image of the diffuse emission present in the original data and therefore represents an excellent means of quantifying the diffuse fraction in galaxies ( e.g. @xcite ) .",
    "note that we compute a different surface - fit for each requested version of the region boundaries , as the degree of iterative growth will influence pixel membership in background annuli and therefore the estimated background level for each emission line source . figs .",
    "[ fig : hiiphot.demo]d and [ fig : hiiphot.demo]f show the diffuse background for the growth states illustrated in figs .",
    "[ fig : hiiphot.demo]c and [ fig : hiiphot.demo]e , respectively .",
    "note how the level of diffuse emission is estimated to be substantially lower in the second case .      the output of * hii_phot _ * consists of several images and one catalog detailing properties of all detected regions .",
    "the catalog tabulates the following quantities among others : i d # , right ascension , declination , pixel position , number of pixels contained by the region , effective fwhm , major axis fwhm , axial ratio , position angle , total flux after correction for background emission , @xmath23 uncertainty in total flux after correction , and the peak surface brightness inside the region .",
    "see section  [ sec : hiiphotcode.flux.and.sn ] for a description of how total corrected flux and its error are calculated .",
    "note that right ascension , declination , pixel position , and fwhm values refer to the best - fitting empirical model associated with each region , so from before region growth .",
    "the images produced by * hii_phot _ * include : ( 1 ) a copy of the continuum - subtracted line image with the various `` after growth '' boundaries marked , ( 2 ) several versions of the background surface fit ( corresponding to different levels of growth ) , and ( 3 ) integer maps delineating the position and extent of each footprint , seed , and grown region .",
    "these integer maps can be used for supplementary analysis if identically gridded images at different wavebands are available . among the most obvious applications are computation of line ratios or equivalent width for emission line objects . finally , the * hii_phot _ * user has the option of dumping postage stamp collages depicting each source in the catalog .",
    "the background - corrected emission line flux of an region is computed using the continuum image ( @xmath24 ) , the line+continuum image ( @xmath25 ) , and our * hii_phot _ * surface fit to diffuse background emission remaining in the continuum - subtracted line image after growth of sources ( @xmath26 ) . in this derivation",
    "we assume that @xmath24 , @xmath25 , and @xmath26 remain in adus .",
    "additionally , we require that no sky background has been subtracted from either @xmath24 or @xmath25 .",
    "this is essential if photon noise is to be properly modeled during estimation of signal - to - noise . for region",
    "@xmath27 ( composed of pixels @xmath28 ) the background corrected emission line flux , @xmath29 , is calculated as :    @xmath30    where @xmath31 is the continuum scaling factor appropriate for region @xmath27 . in practice we hold @xmath31 constant for all regions .",
    "the formal @xmath23 uncertainty , @xmath32 , associated with @xmath29 is given by the quadratic sum of standard deviations associated with individual terms of eq .",
    "[ flux ] :    @xmath33    as written here , the units of @xmath29 and @xmath32 are adus , while @xmath34 is the gain in terms of electrons per adu .",
    "to convert into physically meaningful units we multiply by an appropriate calibration factor .",
    "we assume that @xmath24 and @xmath25 are both essentially sky - noise limited , implying the following relations :    @xmath35    @xmath36    in these expressions , @xmath37 and @xmath38 are the number of images ( assumed to have comparable exposure ) combined to create @xmath25 and @xmath24 , respectively .",
    "multiplicative factors @xmath39 and @xmath40 have values near unity or slightly higher in order to account for the possibility that read - noise may still make a small contribution to the noise budget in the * hii_phot _ * sky region .",
    "@xmath41 and @xmath42 are each measured within the sky region of the input images , implying appropriate values for @xmath39 and @xmath40 .",
    "this information then constrains a photon noise model for the data , as we can fold @xmath39 and @xmath40 together with @xmath34 to represent an effective gain ( @xmath43 and @xmath44 ) for @xmath25 and @xmath24 .",
    "next , we estimate the level of noise per pixel in the brighter , interesting portions of @xmath25 and @xmath24 .",
    "the relevant equations are :    @xmath45    @xmath46    eqns .",
    "[ deltal ] and [ deltac ] specify most of the terms in eq .",
    "[ delta.flux ] .",
    "variance in the diffuse background level , @xmath47 , is determined empirically on the basis of the measured standard deviation near control points used during the background fitting process .",
    "note that we convert such measurements to electrons before computation of @xmath32 .",
    "two comments must be put forward at this point .",
    "our assumption of sky - noise limited imagery is a conservative approach . by adopting eqs .",
    "[ sigmalsky][deltac ] , we guarantee that @xmath48 and @xmath49 will always be predicted accurately or overestimated .",
    "if readnoise contributes substantially to the standard deviation of pixel values in the user - selected sky region , the measured values of @xmath50 and @xmath51 insure that it will contribute an identical fraction of the estimated noise - budget for pixels that are substantially brighter ( due to observed emission from the object of interest ) . in reality , this is not the case  detector readnoise is independent of the observed pixel intensity .",
    "overprediction of error terms @xmath52 and @xmath53 is the unavoidable consequence .",
    "furthermore , we argue that our procedure for evaluating the source signal - to - noise ratio ( @xmath54 ) , is more accurate than the traditional method based only on continuum - subtracted data , especially in the limit of bright continuum emission .",
    "previous studies have usually gauged the standard deviation per pixel in one or more selected `` sky areas , '' then added this term in quadrature based on the number of pixels in a region .",
    "this implies that their estimated signal - to - noise is independent of the original observed datavalues .",
    "identical sources located in various positions on top of a variable background of ( continuum or line ) emission will be assigned identical signal - to - noise , even though the true uncertainty increases for sources embedded in a bright background .",
    "we obtained narrowband images of the m51/ngc5195 system as part of a separate project concerning diffuse ionized gas ( dig ) in spiral galaxies ( @xcite ) .",
    "these data were obtained in 1992 march using the no.1 0.9 m telescope at kitt peak .",
    "three h@xmath1 + [ ] and two [ ] images of 20 min integration were recorded in addition to a set of offband continuum exposures .",
    "the bandpass of each filter was approximately 75 .",
    "complete details concerning our observations and image reduction can be found in @xcite .",
    "for the present analysis a slightly different flux calibration was used . the continuum - subtracted image originally presented in greenawalt et al .",
    "was calibrated by comparison with the photometric data of @xcite .",
    "an identical procedure was employed by @xcite in a detailed study of 616 m51 regions .",
    "because we sought to compare our photometry directly with rand s , we bootstrapped to his flux scale using a sample of 10 bright , moderately isolated regions .",
    "the magnitude of this recalibration amounted only to @xmath5510% , most likely attributable to the use of different regions by rand and greenawalt .",
    "the 1@xmath13 noise of our continuum - subtracted line image is at an h@xmath1 emission measure ( em ) of 9.9  pc  @xmath22 at @xmath56 fwhm resolution .",
    "this corresponds to a surface brightness of @xmath57  erg @xmath58 s@xmath59 arcsec@xmath60 , or 3.5 rayleighs .",
    "our noise implies a limiting ( 5@xmath13 ) point source flux of @xmath61  erg @xmath58 s@xmath59 , or equivalently an h@xmath1 luminosity of @xmath62  erg s@xmath59 , neglecting any background confusion . for this calculation and the analysis below ,",
    "we have assumed a distance of 9.6 mpc to m51 ( @xcite ) . at this distance ,",
    "the @xmath56  seeing prevailing during our observations corresponds to a linear resolution of 84  pc .",
    "no correction was attempted for extinction , in order to facilitate comparison with earlier region surveys . in reality ,",
    "@xcite report on extinction toward a large sample of m51 s most luminous regions , finding about 2 visual magnitudes in most cases .",
    "this should be kept in mind when interpreting our results .",
    "we detected 1618 regions in the field of view of our observations , excluding sources located in m51 s interacting companion ngc5195 .",
    "of the total sample , 1229 regions were classified as `` photometric - quality '' detections having @xmath63 .",
    "only these 1229 regions have been considered in the analysis described below .",
    "[ fig : m51.grow ] displays our continuum - subtracted h@xmath1 image , with all source boundaries marked .",
    "note that the extent of each region has been determined using a terminal surface brightness slope of 1.5 em / pc .",
    "all results in the rest of the paper correspond to this choice , unless stated otherwise .",
    "the image has been logarithmically scaled in order to preserve contrast over a wide range in surface brightness .",
    "notice the hand - drawn loop surrounding ngc  5195 .",
    "it indicates the region specifically excluded from our m51 * hii_phot _ * survey .      in this section",
    "we compare our region catalog with the list compiled by @xcite , hereafter r92 , based on visual inspection and classification .",
    "we highlight the overall correspondence between our results and those of r92 , but also describe variations attributable to procedural differences .",
    "we include a look at catalog completeness as a function of luminosity and morphological properties .",
    "the most straightforward comparison between both catalogs is the total number of detected regions .",
    "our detection list encompasses the entire galaxy , even the outer disk and confused nuclear portions not considered by rand , suggesting we should find more sources than previously reported . however , other competing factors need to be considered as well :    \\(1 ) during the definition of footprints , * hii _ phot _ * considers if a set of neighboring peaks is best described as a collection of individual regions or should be grouped into one or more composite aggregations . r92",
    "always classified each neighboring peak as a separate source .",
    "\\(2 ) * hii_phot _ * is perfectly consistent during the evaluation of marginal detections .",
    "our estimate of signal - to - noise for each detection is evaluated on the basis of both the line+continuum and continuum datasets rather than just the continuum - subtracted line image ( see section  [ sec : hiiphotcode.flux.and.sn ] ) .",
    "\\(3 ) the catalogs were generated using images having different intrinsic sensitivity .",
    "the 1@xmath13 noise in our data was @xmath57  erg @xmath58 s@xmath59 arcsec@xmath60 , whereas rand s imagery went down to @xmath64  erg @xmath58 s@xmath59 arcsec@xmath60 ( em = 5  pc  @xmath22 ) , when evaluated at comparable spatial resolution .",
    "\\(4 ) contamination by emission - line objects other than traditional regions is a concern in our catalog . as a fundamental part of the r92 source selection process , each tentative detection was individually checked in a number of ways .",
    "rand demanded that every source be centrally peaked , have a limited degree of circular symmetry , and possess a peak flux exceeding the background by more than 50% .",
    "* hii_phot _ * does not use any of these criteria .",
    "this means that our procedure is much more likely to result in a catalog containing `` objects '' such as localized enhancements in the widespread curtain of dig , whether they be ionized on the spot by an embedded ob field star or by leakage from an region in a neighboring part of the galaxy , possibly hundreds of pc away .",
    "we elected to accept detections of this sort for three reasons : ( 1 ) they are intrinsically interesting , ( 2 ) they have little effect on the derived slope of the region luminosity function , and ( 3 ) eliminating such detections from the catalog would either require human intervention or an extra _ a priori _ constraint on the properties of detected regions .",
    "note that contamination by planetary nebulae is equally unlikely in the r92 and * hii_phot _ * catalogs , since they would be too faint at a distance of 9.6  mpc .",
    "@xcite show that in the magellanic clouds there are no planetary nebulae with log l@xmath65 , suggesting that both region catalogs are probably uncontaminated by pne .    in the range of galactocentric radius examined by rand ( 1  kpc @xmath66 15  kpc ) , he reported 616 individual regions .",
    "* hii_phot _ * detected 1184 complexes with fluxes @xmath67 in the same area .",
    "some of these objects are composed of multiple components .",
    "although the total number of regions tabulated by * hii_phot _ * is more than reported by r92 , we find that the agreement is substantially better in the range log l@xmath68 .",
    "rand detected 67 regions of this luminosity class , whereas we have 80 .",
    "the astute reader might ask how many of the regions detected by * hii_phot _ * are exactly the same sources described by r92 .",
    "we explicitly checked this issue , finding that * hii_phot _ * misses only 2 of the 616 regions of r92 . at the position of these two sources",
    ", we inspected our data and found no evidence for a significant detection .",
    "note that our assessment of correspondence between the r92 source list and the * hii_phot _ * catalog was completed by way of manual inspection . during this process",
    "we demanded not only positional agreement , but also similar size between detections considered as being one in the same .",
    "it is important to note that due to the different methods of photometry it is unlikely that most sources had exactly the same effective boundary .",
    "figures  [ fig : logl.vs.logl ] and  [ fig : log.loverl.vs.logl ] present a comparison of the measured luminosities for the regions in common to both our catalog and the r92 source list .",
    "[ fig : logl.vs.logl ] shows that there is a clear correlation ( having slope @xmath69 ) between the luminosities measured by rand and * hii_phot_*. a limited number of regions fall substantially below the main cloud of datapoints .",
    "these sources most likely represent cases in which * hii_phot _ * broke a single r92 detection into one principal region and a small number of fainter peripherial sources .",
    "figure  [ fig : log.loverl.vs.logl ] more clearly indicates a very subtle systematic change in the ratio of * hii_phot_*/r92 luminosities as a function of source strength .",
    "we find that * hii_phot _ * tends to return slightly higher flux levels for very faint sources in comparison to the measurements of r92 .",
    "this trend only begins in earnest at luminosities well below rand s estimated completeness limit ( at l@xmath70  erg  s@xmath59 ) . as shown in the next section , this systematic bias and the inherent scatter in fig .",
    "[ fig : logl.vs.logl ] has very little ( if any ) influence on the region lf .    so what are the detections `` missed '' by r92 ? in the area surveyed by rand , we find that @xmath5580% of the regions picked up by * hii_phot _ * ( but not listed in r92 ) have an h@xmath71 luminosity less than @xmath72  erg  s@xmath59 .",
    "morphologically it is clear why most of them were not included in r92  often they are rather diffuse and/or elongated .",
    "sometimes these faint sources fall in the bright halo of a more significant region . in this case , interactive inspection of our continuum - subtracted line image typically reveals a relatively compact source superimposed on the brighter neighbor .",
    "figure  [ fig : r92.lfcomp ] presents a comparison of the r92 differential luminosity function and our * hii_phot _ * result for exactly the same sources . above their turnover points ,",
    "both luminosity functions can be modeled as power law distribution ( as first suggested by keh89 ) . using only the data for regions in bins with log  l@xmath73 ( those thought to be complete in r92 ) and assuming the standard functional form ,",
    "@xmath74    we find that @xmath75 , whereas @xmath76 .",
    "( for these fits we assumed simple counting statistics in order to assign a variance to each value of the lf .",
    "the weights used during @xmath77 minimization were inversely proportional to the variance of each bin , essentially giving the most influence to bins with the highest number of detections and reducing the influence of under - populated bins .",
    "this procedure is appropriate as long as no bins suffering from incompleteness are included in the fit . )",
    "the fact that there is no significant difference between the results plotted in fig .",
    "[ fig : r92.lfcomp ] indicates that our * hii_phot _ * flux measurement technique does not introduce bias into the observed region luminosity functions .",
    "restoring the regions ignored for our comparison with r92 , fig .",
    "[ fig : m51.lf ] presents an observed lf for all 1229 of the m51 sources detected by * hii_phot _ * with @xmath78 .",
    "the weighted power - law slope for this distribution is @xmath79 , including only bins for which log  l@xmath73 .",
    "notice the break in the power - law at a luminosity of 10@xmath80 erg  s@xmath59 .",
    "our results confirm that m51 has a type ii lf , as originally defined by keh89 .",
    "for the purpose of comparison , fig .",
    "[ fig : m51.lf ] also presents the differential luminosity function from r92 - including the 2 sources not detected by * hii_phot _ * ( this explains the slight difference with respect to fig .  [",
    "fig : r92.lfcomp ] ) .",
    "rand estimated that his lf was complete down to log l@xmath81 = 37.6 . in the text",
    "below , we carefully address incompleteness in the * hii_phot _ * catalog . in any case ,",
    "[ fig : m51.lf ] shows that our observed lf is marginally steeper than reported in r92 .",
    "this probably reflects the enhanced sensitivity of our procedure at low luminosities and for relatively diffuse regions .",
    "note that our lf is subject to a systematic uncertainty associated with our choice of when to stop growing regions .",
    "in particular , the observed lf slope varies substantially if growth is stopped early or allowed to continue until region surface brightness profiles are more nearly flat .",
    "the lf slope quoted above ( @xmath82 ) was obtained by growing regions until a terminal surface brightness slope of 1.5 em / pc . if we had instead",
    "adopted a 1 em / pc cutoff , the lf slope would have been shallower ( @xmath83 ) . in the case of minimal growth ,",
    "the lf slope approaches @xmath84 .",
    "we view this systematic difference as more of a change in the definition of an region , rather than uncertainty in our nominal result .",
    "the key point is that this `` bias '' can be properly addressed in a study of a sample of spirals by adopting the same procedure for all galaxies .",
    "it is important to assess incompleteness effects .",
    "we investigated systematic trends such as the loss of faint , or bright but relatively diffuse , regions using simulations in which artificial sources were added to our original images .",
    "these altered data were subsequently reprocessed using * hii_phot_*.    blending due to limited spatial resolution can induce catalog incompleteness in crowded environments and flatten the observed lf at the faint end .",
    "regions tend to be inherently clumpy in terms of their spatial distribution , especially along spiral arms .",
    "this implies that the distribution of artificial regions should not be uniform across an image , but instead that additional regions should be placed preferentially in areas having recent star formation .",
    "two ways to achieve this result are described below :    \\(1 ) select a representative subset of detected regions in a galaxy and permit limited random walks away from actual tabulated positions , adding an artificial region in each slightly - randomized location .",
    "\\(2 ) use our * hii_phot _ * surface fit to the diffuse emission throughout a galaxy as a weighting function for the probability of placing an artificial region in any particular spot .",
    "we elected to use the second method , as it provided more flexibility . for comparison",
    ", we also produced simulated images in which we distributed artificial sources at random .",
    "we sought to reflect the intrinsic morphological diversity of regions in the prescription employed to generate artificial regions , rather than just adding unresolved sources of varied luminosity .",
    "our incompleteness testing procedure allowed 3 types of simulated region : ( 1 ) small elliptical gaussians , fwhm@xmath85  pc , of varied axial ratio and position angle ; ( 2 ) large elliptical gaussians , fwhm@xmath86  pc , of varied axial ratio and position angle ; and ( 3 ) background - subtracted copies of actual regions extracted from the original data ( mean fwhm@xmath87  =  134  pc ) , scaled down to varying flux levels . in all cases ,",
    "photon noise was added to each source before adding it into the line+continuum image being modified .",
    "note that all direct image modification was performed on line+continuum images , since they are the relevant `` observable '' data .",
    "afterwards , continuum subtraction was performed to compute a modified continuum - free line image .",
    "* hii_phot _ * was run using the modified continuum - subtracted line image , the modified line+continuum image , and the original continuum image .    fig .",
    "[ fig : m51.lf ] suggests that our observed m51 lf might begin suffering from incompleteness for sources as bright as @xmath88  erg  s@xmath59 ( just above the turnover point ) .",
    "we chose to insert 100 artificial regions of each type at 5 distinct luminosity values , log@xmath89 , and @xmath90 .",
    "obviously each combination of source type , luminosity , and spatial distribution was investigated during a separate trial .",
    "the goal was to reliably constrain the true ( `` corrected '' ) lf down to log@xmath91 .",
    "because actual ( and simulated ) regions have a spatial extent defined by irregular boundaries , one can not simply inter - compare center positions for each detection in order to determine if simulated regions have been recovered .",
    "each simulated source was assigned a code indicating whether it was : ( 1 ) recovered cleanly , ( 2 ) recovered as a blend , ( 3 ) essentially unrecovered , but partially blended with one other region , ( 4 ) essentially unrecovered , but partially blended with multiple regions , or ( 5 ) completely unrecovered .",
    "sources were considered to be `` recovered '' ( codes 1 and 2 ) if a single detection boundary encompassed pixels that contained at least 2/3 of the inserted region s footprint flux ( above the 20% isophote of the simulated source ) , otherwise the source was labeled `` unrecovered '' ( codes 3 , 4 , and 5 ) .",
    "for successfully recovered sources , cleanliness of recovery was judged by the fraction of total detection flux contributed by the simulated region . if a simulated region contributed at least 50% of the total flux in a detection , then it was assumed to be a clean recovery ( code 1 ) .",
    "otherwise , blended recovery was indicated ( code 2 ) . for unrecovered synthetic sources ,",
    "we evaluated the number of neighboring detections claiming at least one pixel of the unrecovered source footprint . if no pixels belonging within the simulated region s",
    "20% isophote were part of an * hii_phot _ * detection , then the artificial source was considered _",
    "completely _ unrecovered ( code 5 ) .",
    "likewise , if one and only one * hii_phot _ * detection claimed a pixel belonging to the unrecovered source footprint , the synthetic source was labeled essentially unrecovered , single blend ( code 3 ) . if more than one detection claimed a synthetic footprint pixel , then code 4 ( multiple blend ) was indicated . as a tool for determining the dependence of recovery statistics and photometric accuracy on variations in the local environment",
    ", we also classified the degree of crowding in the vicinity of each simulated region .    before discussing the results of our completeness testing procedure",
    ", we note that the simulations provide a way to quantify the accuracy of our photometry as a function of luminosity . because we know the exact flux of all simulated regions added to an image",
    ", we can determine the standard deviation of flux measurements for cleanly recovered sources .",
    "we examined the distribution of fractional flux discrepancy , defined as @xmath92 , for each cleanly recovered artificial source without close neighbors .",
    "we find that the standard deviation of fractional flux discrepancy increases with decreasing source luminosity ( as expected ) , ranging from 0.1 for log@xmath93 up to 0.3 for log@xmath94 .",
    "fractional flux discrepancy values were negligible for log@xmath95 . the measurement scatter is significantly reduced for small sources .",
    "furthermore , the median value of fractional flux discrepancy is very near zero for all but our faintest artificial sources .",
    "tables  [ tab : weightedsim ] and  [ tab : uniformsim ] present the end results of our completeness testing procedure for m51 . specifically , we have tabulated the percentage of simulated detections falling in each of the five recovery categories for all region types and luminosity values .",
    "table  [ tab : weightedsim ] indicates the values for source placement via weighting the distribution of artificial sources to regions of star formation , while table  [ tab : uniformsim ] shows what was recovered for the uniform source distribution .    as expected the simulations",
    "indicate our lf begins to be substantially incomplete by log  l@xmath81 = 37.4 ( about @xmath96 ) . at this luminosity , nearly one third of the `` actual '' variety synthetic regions",
    "could not be recovered by * hii_phot _ * ( see table  [ tab : weightedsim ] ) .",
    "we do find that small sources are easiest to recover .",
    "large gaussians were much more susceptible to blending with one or more sources .",
    "actual regions appear to be intermediate  harder to recover than 100  pc gaussians ( @xmath97 psf fwhm ) , but significantly easier than 200  pc gaussians ( @xmath98 psf fwhm ) .",
    "these statements hold for both the weighted and uniform source distributions .",
    "table  [ tab : weightedsim ] , which shows the results for our weighted distribution tests , is most appropriate for the galaxy at large .",
    "however , the uniform distribution recovery statistics should be used when looking at completeness issues in uncrowded regions .",
    "the results of our completeness testing procedure allowed us to perform monte carlo simulations designed to gauge systematic bias due to blending of faint , indistinct regions with brighter sources in observed luminosity functions .",
    "a separate paper will discuss the detailed findings of this investigation in a more general context .",
    "however , we were able to show that for the m51 completeness statistics ( presented in tables  [ tab : weightedsim ] and  [ tab : uniformsim ] ) the slope of the luminosity function above the low luminosity turnover was rather insensitive to `` upward contamination '' ( see r92 ) potentially brought about via blending .",
    "this result is actually somewhat of a coincidence related to the specific observed power law slope of the m51 lf .",
    "for intrinsically steeper luminosity functions , having @xmath99 for instance , blending can lead to a shift in the turnover point ( to higher l ) and create an artificial hump at slightly higher l ( in excess of the true number of sources per bin ) .",
    "shallower lfs than m51 are less susceptible to blending effects , but suffer severely from non - detection of low luminosity regions . for such systems ,",
    "the turnover of the lf becomes rather broad and fitting a power law slope to bins just above the turnover leads to an underestimate of the true @xmath1 ( that is , we are fooled to think the lf is shallower than it actually is ) . as stated above , the m51 power law slope ( @xmath82 ) is just shallow enough to avoid severe upward contamination , but not yet flat enough to substantially change the histogram character near the turnover point .",
    "consequently , we conclude the observed m51 lf slope is rather robust to systematic bias and suspect that the true ( unobservable ) lf slope falls within the quoted uncertainty range for @xmath1 .      systematic application of * hii_phot _ * to a large sample of galaxies will be able to address the effects of limited spatial resolution and sensitivity on observed region luminosity functions . both of these observational characteristics",
    "are directly related to the distance for the object of interest .",
    "we can gauge the intrinsic bias related to limited resolution and sensitivity by deriving two lfs for each galaxy , one at the actual distance of the observed system and another using data which has been degraded to make the observations appear as if the galaxy was at the distance of our most - removed system .",
    "although not really an issue in the present context , since we are studying a single galaxy which is already moderately distant ( 9.6 mpc ) , this section has been included to demonstrate the technique and show that it is rather easy to realize given the * hii_phot _ * procedure .",
    "we adopted a conservative procedure for generating image sets corresponding to the same galaxy at various distances . instead of merely convolving the continuum - subtracted line image , then regridding , and adding noise ( as is typically done ) ,",
    "we independently transform the line+continuum and continuum images , only then creating the continuum - subtracted result .",
    "this procedure is required to accurately keep track of the photon statistics associated with continuum emission underlying regions .",
    "neglecting this `` hidden '' noise may result in an overestimate of sensitivity when mimicking the effects of increased distance to a system .",
    "the following step - by - step summary explicitly outlines our procedure :    \\(1 ) select a `` blank sky '' region within the field of view of the continuum - subtracted line image .",
    "\\(2 ) determine the median level and standard deviation of this sky region in both the line+continuum and continuum images .",
    "\\(3 ) subtract the respective sky level from the line+continuum and continuum images .",
    "\\(4 ) determine the total number of galaxy counts in each image .",
    "\\(5 ) convolve with an appropriate gaussian kernel ( having peak of unity ) in order to reduce the spatial resolution in both images .",
    "\\(6 ) regrid the convolved line+continuum and continuum images to a scale which results in the same psf as the original data .",
    "\\(7 ) scale down the number of counts in each regridded image to be consistent with the totals determined in step 4 .",
    "that is , @xmath100 , where @xmath101 and @xmath102 are the original and increased distances to the galaxy , respectively .",
    "\\(8 ) add the appropriate sky level back into each image .",
    "\\(9 ) based on the assumption that the original data were sky - noise - limited , add photon noise according to a model derived from our blank sky region ( see step  2 ) .",
    "this model insures that the magnitude of simulated noise is higher in bright parts of the image .",
    "\\(10 ) using the distant images created in steps 1 - 9 , perform continuum subtraction to compute the line only image .",
    "for the present demonstration , we generated datasets corresponding to the appearance of m51 at distances of 15 , 30 , and 45  mpc ( having psf fwhm @xmath55 130 , 260 , and 390  pc respectively ) .",
    "[ fig : lf.distance.demo ] shows a comparison of the lfs obtained by running *",
    "hii_phot _ * on these degraded data .",
    "the dotted line traces the actual observed m51 lf , presented earlier in fig .",
    "[ fig : m51.lf ] .",
    "two effects are rather striking .",
    "the completeness limit at low luminosities increases in a smooth but dramatic fashion . moving from 9.6 mpc to 15 mpc , the rapid loss of faint , isolated point sources takes place and our incompleteness limit ( in this case judged by the lf turnover ) rises slightly faster than one might expect according to the inverse square law .",
    "this effect is mitigated as the galaxy gets even more distant .",
    "perhaps blending allows a small fraction of adjacent weak sources to be recovered as single ( brighter ) objects . the second striking effect shown in fig .",
    "[ fig : lf.distance.demo ] is the influence of blending on the slope of the lf .",
    "it is clear that the lfs tabulated for 30 and 45 mpc have substantially shallower power - law slopes than the 9.6 mpc lf over a limited range of luminosity .",
    "indeed , the best - fit lf slope ranges from @xmath103 for the original data , to @xmath104 for the case of m51 at 45 mpc ( fitting only sources with log  l@xmath105 ) .",
    "this effect is brought about by blending of regions ( as spatial resolution is degraded ) with some help from catalog incompleteness .",
    "blending also explains the increased apparent luminosity of the brightest regions as the galaxy becomes more distant , although this effect is not illustrated by fig .",
    "[ fig : lf.distance.demo ] ( due to the choice of bin size ) .",
    "it is worth noting that above a limiting luminosity , the original and degraded lfs are essentially identical within the errors .",
    "for this example , the completeness tests of section  [ sec : hiiphotcode.incompleteness.blending ] imply that all versions of the m51 data in fig .",
    "[ fig : lf.distance.demo ] are complete above log  l@xmath81 @xmath55 38.6 . in the few histogram bins above this limit",
    ", minimal difference between the various lfs is apparent .",
    "the results of r92 included a demonstration of changes in region properties for those sources located in interarm gaps .",
    "we can classify arm / interarm status based on masking of the diffuse background image produced by * hii_phot_*. using this technique we confirm the difference in lf slope observed by rand for arm versus interarm region populations .",
    "a simple way to designate regions as belonging in the arm or interarm populations relies on masking of the * hii_phot _ * surface fit to the diffuse emission remaining after definition of region boundaries .",
    "these images typically show very conspicuous spiral structure .",
    "we experimented with several isophotal cutoffs to obtain a boundary that closely resembled that of r92 .",
    "although the present goal was to see if we could develop a masking technique to efficiently reproduce the classification scheme of rand ( who carefully subdivided the entire sample of regions on the basis of spiral arm morphology ) , a more appropriate characterization of our new method would be one in which the isophotal mask is used to segregate regions on the basis of their local star forming environment . under the assumption that more dig is found in areas of enhanced recent star formation",
    ", the `` arm '' regions identified by our mask could be thought of as sources that lie within especially active star forming areas of the galaxy . in the end , a cutoff at an h@xmath1 em of 30  pc  @xmath22 worked well in both contexts for m51 ( with @xmath106 ) .",
    "[ fig : m51.arm.vs.interarm ] shows the arm and interarm lfs created using the mask described above .",
    "the straight lines are weighted power - law fits to the data for regions brighter than log  l@xmath81 = 37.6 and 37.0 , for arm and interarm respectively .",
    "our simulations of the previous section suggest that the catalog of interarm sources is complete to lower luminosities than the general population .",
    "this was the motivation behind choosing different lower limits for arm and interarm power - law fits .",
    "we find that there is a difference in slope between the two populations .",
    "the spiral arm population is best - fit with @xmath107 , whereas the interarm regions have a much steeper power - law slope given by @xmath108 .",
    "the brightest regions are found almost exclusively within the spiral arms .",
    "only two interarm regions in m51 are more luminous than l@xmath81 = 10@xmath109  erg  s@xmath59 .      we find that there is a correlation between the h@xmath1 luminosity of a region and its projected surface area ( psa ) . fig .",
    "[ fig : logl.vs.logpsa ] shows a plot of log l@xmath81 versus log psa .",
    "our data is best - fit by a line of slope 1.71 , substantially higher than the predicted value of 1.5 for a classical ( radiation bounded ) stromgren sphere of constant density .",
    "the scatter about the fit is rather large , especially for small regions .",
    "note that we have chosen to present the correlation between log l@xmath81 and log psa , rather than log of region effective radius ( r@xmath87 ) , because projected surface area is more directly related to our observations in the case of sources having irregular shape .",
    "we suspect that the slightly steeper than expected slope in fig .",
    "[ fig : logl.vs.logpsa ] could be related to clumping within regions .",
    "the diffuse fraction in spiral galaxies remains of substantial interest for studies of ism morphology and energetics .",
    "defined as the ratio of dig h@xmath1 luminosity to total h@xmath1 luminosity ( @xcite ) , the diffuse fraction has been estimated in a number of ways by different authors .",
    "the most common techniques are based on isophotal masking ( e.g. @xcite , @xcite , @xcite ) , although authors usually disagree on precise methodology .",
    "classification of dig has also been accomplished using explicit identification of traditional regions ( @xcite ) and using maps of h@xmath1 equivalent width ( @xcite ) .",
    "it is remarkable that the results obtained using diverse methods are quite similar , with a diffuse fraction of @xmath110 being common for spiral galaxies ( @xcite ) .",
    "nevertheless , the diversity of methods employed makes it difficult to compare results in a detailed manner and accurately address relative uncertainties .",
    "there are a few obvious drawbacks to each of the techniques previously used to estimate the diffuse fraction .",
    "in particular , inspection of the fig .  2 in @xcite , fig .",
    "4b in @xcite , and fig .",
    "8 in @xcite reveals many instances of faint but highly localized h@xmath1 emission being lumped into the dig",
    ". these sources could be compact regions or even planetary nebulae .",
    "attributing the flux of these faint discrete sources to dig tends to artificially boost the diffuse fraction by a small ( perhaps insignificant ) amount .",
    "secondly , several authors have pointed out that the total dig luminosity should receive a contribution from locations in which regions are projected onto a slowly varying , diffuse background . the most commonly adopted solution is to assume that pixels occupied by an region each contribute the mean dig intensity when totaling up dig .",
    "this is undoubtedly an underestimate , as regions often have prominent dig haloes , implying that the dig superimposed on regions will typically be brighter than average .",
    "* hii_phot _ * addresses both of these problems , because it first measures flux associated with all discrete emission line sources and then individually estimates a background level for each region .",
    "we calculate the diffuse fraction by independently totaling : ( 1 ) f@xmath111 , the background - corrected flux associated with all detected regions ( except those with @xmath112 ) , and ( 2 ) f@xmath113 , the flux of the entire image .",
    "the diffuse fraction is then given by ( f@xmath114f@xmath111)/f@xmath113 . this is the method of @xcite , but accomplished in a repeatable automated manner . by computing the diffuse fraction for various requested stopping - points during the iterative growth process , we can accurately constrain the diffuse fraction and also place an upper limit on the amount of dig ionized in the field , apparently unrelated to classical regions .    using region boundaries established by our nominal 1.5 em / pc terminal surface brightness slope , we find that the diffuse fraction for m51 is @xmath115 .",
    "the uncertainty quoted here only accounts for the possibility of variation in the sky background .",
    "other uncertainties such as those associated with continuum subtraction and growth termination criteria will also play a role , as will flat - fielding errors .",
    "in fact , as described below , these factors may actually dominate the diffuse fraction uncertainty .    just over half of the observed h@xmath1 emission from m51",
    "can be unambiguously associated with classical regions .",
    "[ fig : m51.bkgd ] presents portions of our * hii_phot _ * surface fit to control points located in the diffuse emission not overlapped by regions . in this plot",
    ", we have only shown the diffuse background surface fit for pixels covered by an region - all other areas show the original data .",
    "panels ( d ) and ( f ) of fig .",
    "[ fig : hiiphot.demo ] present the entire smoothly varying surface fit for comparison .",
    "note that there is still substantial spatial correlation between areas of bright dig and obvious concentrations of regions .",
    "indeed , bright rims around a significant number of regions can be seen in fig .",
    "[ fig : m51.bkgd ] . taken together ,",
    "these facts seem to imply that we have not yet recovered all the h@xmath1 emission which is powered by lyman continuum photon sources inside traditional regions .",
    "it is entirely possible that our 1.5 em / pc growth limit remains too conservative and should really be lowered if we want to accurately characterize the massive stars in regions",
    ".    figs .",
    "[ fig : hiiphot.demo]e and  [ fig : iterative.growth]f represent the case in which regions were grown to encompass all apparently associated emission down to the sensitivity limit of the current data ( by adopting a 1 em / pc stopping point during the iterative procedure ) . estimating the diffuse fraction with this set of region boundaries leads us to conclude that _ at most _",
    "38% of m51 s h@xmath1 luminosity might originate via ionization by some mechanism other than leakage of lyman continuum photons from regions .",
    "we do not mean to say that the conventional diffuse fraction is 0.38 , but instead that a substantial fraction of the dig emission in m51 can not be plausibly tied to specific regions with the current data .",
    "this emission is still somewhat spatially correlated with the local density of regions , but ionization by `` field '' sources such as ob stars not in associations ( hoopes et al .",
    "1999 , in prep ) may be largely responsible .",
    "our determination of the nominal diffuse fraction for m51 is clearly subject to systematic uncertainties related to our choice of the terminal surface brightness slope and uncertainty in the determination of the scale factor used during continuum - subtraction . both of these can be empirically gauged . by computing the diffuse fraction",
    "immediately after growth commences ( with a 10 em / pc cutoff , see fig .",
    "[ fig : iterative.growth]c ) , we obtain a hard upper limit of 0.68 . at the very least , 32% of the h@xmath1 emission from m51",
    "is contained within the cores of classical regions .",
    "systematic changes related to error in continuum - subtraction are easily measured by producing new versions of the line - only image then recomputing the background surface - fit and region fluxes .",
    "we generated `` test '' h@xmath1 images by varying the continuum - subtraction scale factor @xmath116 3% ( 1 @xmath13 ) from our best - guess value . in the case of 1.5 em / pc nominal growth boundaries ,",
    "this resulted in diffuse fractions of 0.40 and 0.49 , respectively for increased and decreased continuum emission .",
    "we note in passing that the diffuse fraction is also potentially influenced by extinction variations across the face of a galaxy .",
    "the optical depth towards regions is probably elevated with respect to field dig .",
    "unfortunately , correcting for this systematic error would be rather difficult even in the case of measured balmer decrements , given the unavoidable uncertainty in the geometry of emitting and absorbing volumes .",
    "we have developed a new idl procedure , which we have designated * hii_phot _ * , which is capable of performing fully - automated , repeatable photometry of regions .",
    "the procedure can detect and accurately characterize faint sources embedded in crowded fields , even in the presence of a substantially inhomogeneous , diffuse h@xmath1 background .",
    "in this paper we have applied * hii_phot _ * to the analysis of the grand - design spiral m51 , studied previously by r92 and keh89 .",
    "our results are in general agreement with these authors , although we detect more than twice the number of regions described by r92 . in total",
    ", we find 1229 sources above @xmath0 having luminosity greater than about 10@xmath117 erg  s@xmath59 .",
    "the lf obtained from this catalog of @xmath0 sources is reasonably well fit by a power law distribution having @xmath1 = 1.75 @xmath116 0.06 , below a break in the observed number of regions near log l@xmath81 = 38.9 .",
    "this break confirms the earlier classification of m51 as exhibiting a type ii lf .    in the near future",
    ", we plan to apply * hii_phot _ * for the analysis of an extensive galaxy sample for which high - quality , sensitive narrowband observations already exist .",
    "the sample will contain substantially more galaxies than observed by keh89 . given the * hii_phot _ * code",
    ", it will be trivial to `` reobserve ''",
    "each of the galaxies at a common distance in order to inter - compare lfs in the absence of bias associated with different degrees of blending due to limited resolution and sensitivity . as a predecessor to this large study",
    ", we present * hii_phot _ * results for a smaller sample of 11 spirals in thilker et al .",
    "( 2000 , paper ii ) .",
    "therein we also develop a procedure for fitting hii lfs with predictions from population synthesis models of star cluster formation and evolution .",
    "dat gratefully acknowledges the support and encouragement of rb and rw , his dissertation advisors .",
    "dat further acknowledges the congenial staff of nfra for their hospitality during many collaborative trips to work with rb .",
    "veronica fierro has also been of great help to the authors , finding bugs in our code via repeated trial - and - error throughout the development stage of * hii_phot_*. dat has been funded through the nasa graduate student researcher program ( ngt-51640 ) and by nsf grant ast9617014 to ramw .",
    "the * hii_phot _ * idl source code and explanatory documentation will soon be available by request from dat .",
    "contact dthilker@nrao.edu for details .",
    "banfi , m. , rampazzo , r. , chincarini , g. & henry , r. b. c. 1993 , , 280 , 373 evans , i. n. & dopita , m. a. 1985 , , 58 , 125 feinstein , c. 1997 , , 112 , 29 ferguson , a. m. n. , wyse , r. f. g. , gallagher , j. s. , iii & hunter , d. a. 1996 , , 111 , 2265 ferland , g. j. , korista , k. t. , verner , d. a. , ferguson , j. w. , kingdon , j. b. & verner , e. m. 1998 , , 110 , 761 greenawalt , b. e. 1998 , ph.d .",
    "thesis , 16 greenawalt , b. , walterbos , r. a. m. , thilker , d. & hoopes , c. g. 1998 , , 506 , 135 hoopes , c. g. , walterbos , r. a. m. & greenwalt , b. e. 1996 , , 112 , 1429 kennicutt , r. c. , jr . ,",
    "edgar , b. k. & hodge , p. w. 1989 , , 337 , 761 kingsburgh , r. l. & mccall , m. l. 1998 , , 116 , 2246 mashchenko , s. y. , thilker , d. a. & braun , r. 1999 , , 343 , 352 mccall , m. , straker , r. w. & uomoto , a. k. 1996 , , 112 , 1096 oey , m. s. & clarke , c. j. 1998 , , 115 , 1543 osterbrock , d. e. 1989 , research supported by the university of california , john simon guggenheim memorial foundation , university of minnesota , et al .",
    "mill valley , ca , university science books , 1989 , 422 p. rand , r. j. 1992 , , 103 , 815 sandage , a. & tammann , g. a. 1974 , , 194 , 559 stetson , p. b. 1987 , , 99 , 191 stetson , p. b. 1994 , , 106 , 250 thilker , d. 1999 , interstellar turbulence , 104 thilker , d. a. , braun , r. & walterbos , r. .",
    "m. 1998 , , 332 , 429 van der hulst , j. m. , kennicutt , r. c. , crane , p. c. & rots , a. h. 1988 , , 195 , 38 vassiliadis , e. , dopita , m. a. , morgan , d. h. & bell , j. f. 1992 , , 83 , 87 veilleux , s. , cecil , g. & bland - hawthorn , j. 1995 , , 445 , 152 walterbos , r. a. m. & braun , r. 1994 , , 431 , 156 wang , j. , heckman , t. m. & lehnert , m. d. 1999 , , 515 , 97 wyder , t. k. , hodge , p. w. & skelton , b. p. 1997",
    ", , 109 , 927    cccccccc + source & log @xmath118 & @xmath119 & recovered & recovered & essentially & essentially & completely + type & & & cleanly & as a blend & unrecovered & unrecovered & unrecovered + & & & & & ( single blend ) & ( multiple blend ) & + & ( erg s@xmath59 ) & & ( % ) & ( % ) & ( % ) & ( % ) & ( % ) +   +   + 100 pc gaussian , @xmath97psf & 37.8 & 79 & 78 & 22 & 0 & 0 & 0 + 100 pc gaussian , @xmath97psf & 37.4 & 32 & 67 & 30 & 0 & 3 & 0 + 100 pc gaussian , @xmath97psf & 37.0 & 13 & 50 & 43 & 3 & 4 & 0 + 100 pc gaussian , @xmath97psf & 36.6 & 5 & 27 & 59 & 2 & 10 & 2 + 100 pc gaussian , @xmath97psf & 36.2 & 2 & 4 & 44 & 19 & 19 & 14 +   +   + 200 pc gaussian , @xmath98psf & 37.8 & 79 & 43 & 25 & 0 & 32 & 0 + 200 pc gaussian , @xmath98psf & 37.4 & 32 & 30 & 26 & 1 & 43 & 0 + 200 pc gaussian , @xmath98psf & 37.0 & 13 & 21 & 14 & 5 & 60 & 0 + 200 pc gaussian , @xmath98psf & 36.6 & 5 & 2 & 15 & 8 & 66 & 9 + 200 pc gaussian , @xmath98psf & 36.2 & 2 & 0 & 18 & 11 & 66 & 5 +   +   + actual region & 37.8 & 79 & 59 & 21 & 0 & 20 & 0 + actual region & 37.4 & 32 & 40 & 29 & 0 & 31 & 0 + actual region & 37.0 & 13 & 34 & 18 & 6 & 42 & 0 + actual region & 36.6 & 5 & 9 & 31 & 12 & 43 & 5 + actual region & 36.2 & 2 & 2 & 15 & 22 & 47 & 14 +   +    cccccccc + source & log @xmath118 & @xmath119 & recovered & recovered & essentially & essentially & completely + type & & & cleanly & as a blend & unrecovered & unrecovered & unrecovered + & & & & & ( single blend ) & ( multiple blend ) & + & ( erg s@xmath59 ) & & ( % ) & ( % ) & ( % ) & ( % ) & ( % ) +   +   + 100 pc gaussian , @xmath97psf & 37.8 & 79 & 93 & 7 & 0 & 0 & 0 + 100 pc gaussian , @xmath97psf & 37.4 & 32 & 82 & 18 & 0 & 0 & 0 + 100 pc gaussian , @xmath97psf & 37.0 & 13 & 86 & 13 & 0 & 0 & 1 + 100 pc gaussian , @xmath97psf & 36.6 & 5 & 47 & 43 & 3 & 5 & 2 + 100 pc gaussian , @xmath97psf & 36.2 & 2 & 8 & 40 & 15 & 13 & 25 +   +   + 200 pc gaussian , @xmath98psf & 37.8 & 79 & 67 & 7 & 1 & 25 & 0 + 200 pc gaussian , @xmath98psf & 37.4 & 32 & 55 & 10 & 2 & 33 & 0 + 200 pc gaussian , @xmath98psf & 37.0 & 13 & 23 & 21 & 11 & 44 & 1 + 200 pc gaussian , @xmath98psf & 36.6 & 5 & 8 & 9 & 19 & 54 & 12 + 200 pc gaussian , @xmath98psf & 36.2 & 2 & 0 & 13 & 22 & 47 & 21 +   +   + actual region & 37.8 & 79 & 84 & 8 & 0 & 10 & 0 + actual region & 37.4 & 32 & 68 & 15 & 0 & 17 & 0 + actual region & 37.0 & 13 & 46 & 18 & 3 & 32 & 1 + actual region & 36.6 & 5 & 23 & 16 & 21 & 30 & 10 + actual region & 36.2 & 2 & 6 & 19 & 16 & 33 & 27 +   +"
  ],
  "abstract_text": [
    "<S> we have developed a robust , automated method , hereafter designated * hii_phot _ * , which enables accurate photometric characterization of regions while permitting genuine adaptivity to irregular source morphology . </S>",
    "<S> * hii_phot _ * utilizes object - recognition techniques to make a first guess at the shapes of all sources , then allows for departure from such idealized `` seeds '' through an iterative growing procedure . </S>",
    "<S> photometric corrections for spatially coincident diffuse emission are derived from a low - order surface fit to the background after exclusion of all detected sources . </S>",
    "<S> we present results for the well - studied , nearby spiral m51 in which 1229 regions are detected above the @xmath0 level . </S>",
    "<S> a simple , weighted power - law fit to the measured h@xmath1 luminosity function ( lf ) above log l@xmath2 gives @xmath3 , despite a conspicuous break in the lf observed near l@xmath4 . </S>",
    "<S> our best - fit slope is marginally steeper than measured by rand ( 1992 ) , perhaps reflecting our increased sensitivity at low luminosities and to notably diffuse objects . </S>",
    "<S> regions located in interarm gaps are preferentially less luminous than counterparts which constitute m51 s grand - design spiral arms and are best fit with a power - law slope of @xmath5 . </S>",
    "<S> we assign arm / interarm status for regions based upon the varying surface brightness of diffuse emission as a function of position throughout the image . using our measurement of the integrated flux contributed by resolved regions in m51 </S>",
    "<S> , we estimate the diffuse fraction to be approximately 0.45  in agreement with the determination of greenawalt et al . </S>",
    "<S> ( 1998 ) . </S>",
    "<S> automated processing of degraded narrowband datasets is undertaken in order to gauge ( distance - related ) systematic effects associated with limiting spatial resolution and sensitivity . </S>"
  ]
}