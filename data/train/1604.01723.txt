{
  "article_text": [
    "if @xmath2 is a finite set of positive integers , then a _ decreasing plane tree on @xmath2 _ is a rooted plane tree with vertex set @xmath2 in which each nonroot vertex is smaller than its parent .",
    "decreasing plane trees play a significant role in computer science . in that field , one is often interested in listing the vertices of the tree in some meaningful order . a scheme by which one reads these vertices is a _",
    "tree traversal_. two of the most common tree traversals are known as _ postorder _ and _ preorder _ ; both are defined recursively .    to read a decreasing binary plane tree (  binary \" means that each vertex has at most two children ) in postorder",
    ", we first read the left subtree of the root in postorder .",
    "we then proceed to read the right subtree in postorder before finally reading the root .",
    "this postorder traversal easily generalizes to any decreasing plane tree .",
    "namely , we read the subtrees of the root in postorder from left to right before finally reading the root .",
    "as an example , the postorder of each tree in figure [ fig1 ] is @xmath3 . to read a tree in preorder",
    ", we read the root first , and then proceed to read the subtrees of the root from left to right in preorder .",
    "alternatively , one can find the preorder reading of a tree by first reflecting the tree through a vertical axis and then taking the reverse of the postorder reading of the resulting tree . because of this simple connection between the preorder and postorder , we will concern ourselves primarily with the postorder traversal ; analogous results for the preorder traversal will follow trivially .",
    "tree traversals have been incredibly useful tools in combinatorics and computer science .",
    "for example , the postorder reading has been instrumental in the study of the deterministic stack - sorting algorithm @xcite . in fact , the study of this stack - sorting algorithm was the original motivation for developing the results in this article .",
    "however , there has been surprisingly little research concerning the combinatorics of the tree traversals themselves . in this article , we investigate the following very natural question .",
    "[ quest1 ] if @xmath0 is a set of decreasing plane trees and @xmath1 is a permutation , then how many trees in @xmath0 have postorder @xmath1 ?    before proceeding ,",
    "let us establish some terminology .",
    "we consider two major types of unlabeled plane trees .",
    "the first , which we call a @xmath4-ary plane tree , is either an empty tree or a root along with a @xmath4-tuple of @xmath4-ary plane trees .",
    "therefore , the ordinary generating function @xmath5 for @xmath4-ary plane trees satisfies the equation @xmath6 the second type depends on a set @xmath7 of nonnegative integers with @xmath8 .",
    "each of these trees , which we call @xmath7-trees , consists of a root along with a @xmath9-tuple of @xmath7-trees for some @xmath10 . when @xmath11 , @xmath7-trees are commonly known as unary - binary trees .",
    "the ordinary generating function @xmath12 for @xmath7-trees satisfies the functional equation @xmath13    if @xmath2 is a finite set of positive integers , then a _ decreasing @xmath4-ary plane tree on _",
    "@xmath2 is a @xmath4-ary plane tree whose vertices are labeled with the elements of @xmath2 so that the label of any nonroot vertex is smaller than the label of its parent ( distinct vertices are given distinct labels , and all elements of @xmath2 are used as labels ) .",
    "similarly , a _",
    "decreasing @xmath7-tree on _ @xmath2 is an @xmath7-tree whose vertices are labeled with the elements of @xmath2 so that the label of any nonroot vertex is smaller than the label of its parent . in both types of trees , we will speak of the @xmath14 child of a vertex .",
    "this is simply the @xmath14 child from the left .",
    "[ exam1 ] in this example let @xmath15 .",
    "figure [ fig1 ] shows two decreasing plane trees . as decreasing @xmath7-trees",
    ", they are identical . in both trees ,",
    "the first child of @xmath16 is @xmath17 and the second child of @xmath16 is @xmath18 .",
    "however , if we instead view the trees as decreasing @xmath19-ary trees , then they are distinct . in this case , in the tree on the right",
    ", the first child of @xmath16 is @xmath17 , the fourth child of @xmath16 is @xmath18 , and the second and third children of @xmath16 are empty .",
    "this contrasts the situation in the tree on the left , in which the first and second children of @xmath16 are @xmath17 and @xmath18 while the third and fourth children of @xmath16 are empty .",
    "[ fig1 ]    we will give a bijective method for attacking question [ quest1 ] when @xmath0 is the collection of decreasing @xmath20-trees .",
    "we then show how our method applies to general decreasing @xmath7-trees and decreasing @xmath4-ary plane trees with only slight modifications . in the end",
    ", we apply a special case of our results to gain new information about the deterministic stack - sorting algorithm .",
    "a _ descent _ of a permutation @xmath21 is an index @xmath22 such that @xmath23 ( we do not consider @xmath24 to be a descent ) .",
    "a _ descent top _ is simply an entry in a descent position .",
    "that is , a descent top is an entry @xmath25 such that @xmath23 .",
    "we denote by @xmath26 the postorder reading of a decreasing plane tree @xmath27 .",
    "we convene to let @xmath28 and @xmath29=\\{1,2,\\ldots , m\\}$ ] .",
    "our method relies on a geometric construction of objects that we call _ valid hook configurations_. the purpose of this section is to describe this construction .    given a permutation @xmath30",
    ", we obtain a standard diagram for @xmath1 by plotting the points of the form @xmath31 in the plane .",
    "a _ hook _ in this diagram is the union of two line segments .",
    "one is a vertical line segment connecting a point @xmath31 to a point @xmath32 , where @xmath33 and @xmath34 .",
    "the second is a horizontal line segment connecting the points @xmath32 and @xmath35 .",
    "one can think of drawing a hook by starting at the point @xmath31 , moving upward , and then turning right to meet with the point @xmath35 .",
    "the point @xmath31 is the _ southwest endpoint _ of the hook while @xmath35 is the _ northeast endpoint _ of the hook .",
    "we let @xmath36 and @xmath37 denote the southwest and northeast endpoints , respectively , of the hook @xmath38 .    in a valid hook configuration of @xmath1",
    ", each entry can be the southwest endpoint of at most one hook , but an entry can be the northeast endpoint of several hooks .",
    "if @xmath22 is a descent of @xmath1 , then we require @xmath31 to be the southwest endpoint of a hook . on the other hand ,",
    "if @xmath35 is a northeast endpoint of some hook , then at least one of the hooks with northeast endpoint @xmath35 must have a southwest endpoint @xmath39 for some descent @xmath40 of @xmath1 .",
    "we also insist that if @xmath35 is a northeast endpoint of some hook , then there is some hook whose northeast endpoint is @xmath35 and whose southwest endpoint is @xmath41 .",
    "finally , in order for a configuration of hooks to be valid , we impose a restriction on the projections of hooks onto the @xmath42-axis .",
    "let @xmath38 and @xmath43 be hooks , and let @xmath44 and @xmath45 be their respective projections onto the @xmath42-axis ( which are intervals ) .",
    "let @xmath46 , @xmath47 , @xmath48 , and @xmath49 .",
    "if @xmath50 contains more than one point and @xmath51 , then we require @xmath52 .",
    "any configuration of hooks that satisfies these criteria is valid .",
    "valid hook configurations are of fundamental importance in the development of our results , so we will make their definition formal .",
    "[ def1 ] let @xmath53 .",
    "we say that an @xmath54-tuple @xmath55 is a _ valid hook configuration of _",
    "@xmath1 if @xmath56 are hooks in the diagram of @xmath1 that satisfy the following properties .",
    "a.   if @xmath57 for each @xmath58 $ ] , then @xmath59 . b.   if @xmath22 is a descent of @xmath1 , then @xmath60 for some @xmath58 $ ] . c.   if @xmath61 for some @xmath58 $ ] , then there exist @xmath62 $ ] such that the @xmath42-coordinate of @xmath63 is a descent of @xmath1 , @xmath64 , and @xmath65 .",
    "d.   if @xmath66 $ ] , @xmath67 , @xmath68 , @xmath69 , @xmath70 , @xmath51 , and @xmath71\\cap[i',j']\\right|>1 $ ] , then @xmath72\\subseteq[i',j']$ ] .",
    "let @xmath73 and @xmath74 .",
    "let @xmath75 denote the set of valid hook configurations of @xmath1 .",
    "let us take a moment to briefly explain the necessity of some of the technical notions introduced in definition [ def1 ] .",
    "we are going to use the valid hook configurations of a permutation @xmath1 to construct trees whose postorders are @xmath1 . in such a tree , the entries @xmath76 such that @xmath77 will be the parents of the descent tops of @xmath1 .",
    "furthermore , the hooks will become edges in the tree .",
    "more precisely , if @xmath77 , then @xmath25 will be a child of @xmath76 if and only if @xmath31 is the southwest endpoint of some hook whose northeast endpoint is @xmath35 .",
    "we require property ( b ) for this reason .",
    "this is also why property ( c ) guarantees that each element of @xmath78 is the northeast endpoint of some hook whose southwest endpoint is @xmath31 for some descent @xmath22 .",
    "moreover , this explains why each point can be the southwest endpoint of at most one hook while it can be the northeast endpoint of multiple hooks ( a node in a tree can have at most one parent , but it can have multiple children ) .",
    "property ( c ) also states that if @xmath35 is a northeast endpoint of a hook , then it must be a northeast endpoint of some hook whose southwest endpoint is @xmath41 . indeed ,",
    "if @xmath35 is a northeast endpoint of some hook , then @xmath76 will not be a leaf in the tree we construct .",
    "since @xmath1 is the postorder of this tree , this implies that the entry @xmath79 must be the rightmost child of @xmath76 .",
    "hence , @xmath41 and @xmath35 must be connected by a hook .",
    "there are some immediate consequences of the criteria in the above definition that are useful to keep in mind .",
    "first , the only way that two hooks can intersect in exactly one point is if that point is the northeast endpoint of one of the hooks and the southwest endpoint of the other . also , no entry in the diagram can lie above a hook . more formally , if @xmath80 is a hook with @xmath67 and @xmath68 , then @xmath81 for all @xmath82",
    "indeed , suppose instead that @xmath83 for some @xmath82",
    ". then @xmath1 must have a descent @xmath84 such that @xmath85 . according to criterion ( b ) in the above definition , @xmath86 for some hook @xmath87 .",
    "let @xmath70 .",
    "since @xmath88 and @xmath89\\subseteq[i , j]\\cap [ i',j']$ ] , condition ( d ) in the above definition states that we must have @xmath72\\subseteq [ i',j']$ ] . however , this is impossible because @xmath90 .",
    "after drawing a diagram of a permutation @xmath1 with a valid hook configuration @xmath91 @xmath92 , we can color the diagram with @xmath93 colors @xmath94 as follows . first , if @xmath67 and @xmath68 , then we refer to the line segment connecting the points @xmath95 and @xmath35 as the _ top part _ of the hook @xmath80 .",
    "assign @xmath80 the color @xmath96 for each @xmath58 $ ] .",
    "color each point @xmath39 as follows .",
    "start at @xmath39 , and move directly upward until hitting the top part of a hook .",
    "color @xmath39 the same color as the hook that you hit .",
    "if you hit multiple hooks at once , use the color of the hook that was hit whose southwest endpoint if farthest to the right .",
    "if you do not hit the top part of any hook , give @xmath39 the color @xmath97 .",
    "note that if @xmath98 for some @xmath99 $ ] , then we ignore the hook @xmath80 while moving upward from @xmath39 to find the hook that is to lend its color to @xmath39 .",
    "moreover , if @xmath100 , then we give @xmath39 the color @xmath101 , where @xmath102 is the largest element of @xmath29 $ ] such that @xmath103 .",
    "[ exam2 ] figure [ fig2 ] depicts the colored diagram obtained from a valid hook configuration of the permutation @xmath104 .",
    "[ fig2 ]    [ rem2 ] we convene to say that the identity permutation @xmath105 has a single empty valid hook configuration that induces a colored diagram in which every point is given the color @xmath97 .    if @xmath53 , then each valid hook configuration @xmath106 partitions @xmath107 $ ] into color classes .",
    "let @xmath108 be the set of entries @xmath109 such that @xmath110 is assigned the color @xmath111 . if we let @xmath112 , then @xmath113 is a composition of @xmath24 into @xmath93 parts .",
    "let @xmath114 denote the number of hooks in the valid hook configuration @xmath115 .",
    "in the next section , we show that the number of decreasing @xmath20-trees whose postorder is @xmath1 is given by @xmath116 where @xmath117 is the @xmath118 catalan number . in section 4 ,",
    "we refine this enumeration and provide analogous results aimed at answering question [ quest1 ] for other collections of tress @xmath0 .",
    "[ rem1 ] suppose @xmath119 and @xmath77 .",
    "if @xmath35 is given the color @xmath111 in the colored diagram of @xmath1 induced by @xmath115 , then @xmath120 and @xmath121 .",
    "indeed , the hook colored @xmath111 is the hook with southwest endpoint @xmath41 and northeast endpoint @xmath35 .",
    "before we proceed to the next section , we record the following simple but useful lemma , which essentially states that the color classes mentioned above form increasing subsequences in @xmath1 .",
    "[ lem1 ] let @xmath53 , and let @xmath106 .",
    "let @xmath122 . if @xmath123 , where @xmath124 , then @xmath125 .",
    "suppose instead that @xmath126 and @xmath127 for some @xmath128 $ ] .",
    "there is some descent @xmath22 of @xmath1 such that @xmath129 .",
    "let us choose @xmath22 maximally . according to part ( b ) of definition [ def1 ] , @xmath60 for some @xmath58 $ ] .",
    "let @xmath68 .",
    "then @xmath130 , so @xmath131 because @xmath22 is the largest descent of @xmath1 that is less than @xmath132 . it follows that @xmath133 lies below the hook @xmath80 while @xmath134 does not .",
    "since @xmath135 is supposed to be the lowest hook lying above @xmath133 , @xmath135 must lie below @xmath80 . since @xmath134 lies below @xmath135 but",
    "does not lie below @xmath80 , this means that @xmath135 lies below @xmath80 but does not lie _ completely _ below @xmath80 . in other words , we have contradicted part ( d ) of definition [ def1 ] .",
    "throughout this section , let @xmath136 .",
    "let @xmath106 . at the end of the previous section , we defined @xmath108 to be the set of entries @xmath109 such that @xmath110 is given the color @xmath111 in the colored diagram induced by @xmath115 . for each @xmath137 , let @xmath138 be a decreasing @xmath20-tree on @xmath108 whose postorder lists the elements of @xmath108 in increasing order . let @xmath139 . choosing each tree @xmath138 amounts to choosing the ( unlabeled ) @xmath20-tree with @xmath112 vertices that serves as the underlying shape of @xmath138 ; the labeling of @xmath138 is then completely determined by the requirement that @xmath140 , the postorder of @xmath138 , be in increasing order . therefore , the number of ways to choose the tree @xmath138 is equal to the number of @xmath20-trees with @xmath141 vertices , which is @xmath142 .",
    "it follows that the number of ways to choose @xmath143 is @xmath144 .",
    "[ exam3 ] figure [ fig3 ] shows one possible collection of trees @xmath145 that could arise from the permutation @xmath1 and the valid hook configuration @xmath115 given in example [ exam2 ] .",
    "observe that the postorder of each one of these trees is in increasing order .",
    "[ fig3 ]    we are going to describe a procedure for building @xmath20-trees whose postorders are @xmath1 from the valid hook configuration @xmath115 and the collection of trees @xmath146 .",
    "we will then show that this procedure provides a one - to - one correspondence between pairs @xmath147 and decreasing @xmath20-trees whose postorders are @xmath1 .",
    "this is how we obtain the formula for the number of decreasing @xmath20-trees with postorder @xmath1 .",
    "the procedure works by constructing a sequence of decreasing @xmath20-trees @xmath148 , where the vertices of @xmath149 are the entries @xmath150",
    ". the final tree in the sequence , @xmath151 , will be the @xmath20-tree with postorder @xmath1 that we want . to begin the procedure ,",
    "let @xmath152 be the tree consisting of the single vertex @xmath153 . now , suppose we have built the trees @xmath154 .",
    "we will build the tree @xmath155 from @xmath156 by attaching @xmath109 as a leaf under one of the vertices of @xmath156 .",
    "we consider two cases .",
    "case 1 : suppose @xmath157 . in this case , @xmath110 is the southwest endpoint of a unique hook @xmath158 .",
    "let @xmath159 . to build the tree @xmath155 from @xmath156 , attach @xmath109 as child of @xmath76 so that @xmath109 is the first ( leftmost ) child of @xmath76 in the tree @xmath155 .",
    "case 2 : suppose @xmath160 . in this case ,",
    "let @xmath101 be the color assigned to @xmath161 ( so @xmath162 ) .",
    "let @xmath163 be the largest element of the set @xmath164 $ ] such that @xmath165 .",
    "let @xmath166 be the parent of @xmath167 in the tree @xmath168 . to build the tree @xmath155 from @xmath156 , attach @xmath109 as child of @xmath166 so that @xmath109 is the first ( leftmost ) child of @xmath166 in the tree @xmath155 .    in case 2",
    ", we need to make sure that @xmath163 always exists and that the parent @xmath166 of @xmath167 in @xmath168 exists and is also a vertex in @xmath156 . to show that @xmath163 exists , we need to show that there is some @xmath169 $ ] such that @xmath170 .",
    "if @xmath171 , then we may set @xmath172 , so assume @xmath173 .",
    "recall from part ( c ) of definition [ def1 ] that if @xmath77 , then @xmath174 .",
    "therefore , @xmath175 . let @xmath176 . the points @xmath110 and @xmath161 must both lie below @xmath135 , so @xmath177 .",
    "this means that @xmath178 $ ] and @xmath179 , so we may set @xmath180 .",
    "now , lemma [ lem1 ] tells us that the entries @xmath181 such that @xmath182 form an increasing subsequence of @xmath1 . consequently , @xmath183 .",
    "it follows that @xmath167 can not be the root of @xmath168 , so @xmath167 has a parent @xmath166 in @xmath168 . because @xmath168 is a decreasing tree , @xmath184",
    "therefore , @xmath185 by lemma [ lem1 ] . because @xmath163 was chosen to be the _",
    "largest _ element of @xmath164 $ ] such that @xmath165 , it follows that @xmath186 .",
    "thus , @xmath166 is a vertex in @xmath156 .",
    "[ fig4 ]    figure [ fig4 ] shows the tree @xmath151 that results from this procedure when @xmath1 , @xmath115 , and @xmath143 are the permutation , the valid hook configuration , and the @xmath187-tuple of trees given in example [ exam2 ] and example [ exam3 ] .",
    "observe that each of the trees @xmath145 is , in some sense , embedded in this tree @xmath151 .",
    "for example , the green tree @xmath188 is an actual subgraph of @xmath151 .",
    "if we imagine deleting the vertex @xmath189 and then contracting the edge that joined the vertices @xmath187 and @xmath189 , we will see a copy of the blue tree @xmath190 sitting inside of the larger tree . by appealing to the description of the above procedure",
    ", the reader may convince herself that this phenomenon will always occur for all of the trees @xmath146 .",
    "more precisely , if @xmath25 and @xmath76 are vertices of a tree @xmath138 , then @xmath25 is in the @xmath14 subtree ( meaning the @xmath14 subtree from the left ) of @xmath76 in @xmath151 if and only if @xmath25 is in the @xmath191 subtree of @xmath76 in @xmath138 .",
    "we make use of this fact in the proof of the following proposition .",
    "[ prop1 ] let @xmath148 be the sequence of decreasing @xmath20-trees constructed in the above procedure .",
    "the postorder reading of the tree @xmath155 is @xmath192 . in particular , @xmath193 .",
    "we prove the proposition by inducting backward on @xmath194 , noting first that the claim is trivial if @xmath195 .",
    "suppose @xmath196 , and assume that @xmath197 . because @xmath155 is built by attaching @xmath109 to the tree @xmath156 as a leaf , the postorder of @xmath155 is obtained by inserting @xmath109 somewhere into @xmath198 .",
    "in other words , there are strings @xmath199 and @xmath200 such that @xmath201 and @xmath202 . in order to complete the proof of the proposition ,",
    "we need to show that @xmath199 is empty . this amounts to showing that @xmath109 precedes @xmath203 in @xmath198 .",
    "suppose first that @xmath157 .",
    "let @xmath204 be the hook with @xmath205 , and let @xmath206 .",
    "note that the point @xmath161 is given the color @xmath207 .",
    "it follows from the description of the procedure used to build the sequence of trees @xmath154 that @xmath203 is a descendant of @xmath76 in @xmath156 ( therefore , also in @xmath155 ) . in @xmath155 ,",
    "the vertex @xmath109 is a leaf which is the leftmost child of @xmath76 .",
    "consequently , @xmath109 precedes @xmath203 in @xmath198 .    next , suppose @xmath160 .",
    "preserve the notation from the description of the procedure in case 2 above .",
    "lemma [ lem1 ] tells us that @xmath208 because @xmath209 .",
    "we constructed @xmath168 so that its postorder would be in increasing order , so @xmath167 precedes @xmath203 in @xmath210 . in the paragraph preceding this proposition , we mentioned that @xmath168 is embedded in @xmath151 .",
    "therefore , @xmath167 precedes @xmath203 in @xmath211 .",
    "moreover , @xmath167 must be a descendant of @xmath166 in @xmath151 because @xmath167 is a descendant of @xmath166 in @xmath168 . now",
    ", suppose that @xmath203 precedes @xmath109 in @xmath198 .",
    "then @xmath203 precedes @xmath109 in @xmath211 , so @xmath203 appears between @xmath167 and @xmath109 in @xmath211 .",
    "because @xmath167 and @xmath109 are both descendants of @xmath166 in @xmath151 , @xmath203 must be a descendant of @xmath166 in @xmath151 .",
    "consequently , @xmath203 is a descendant of @xmath166 in @xmath155 .",
    "however , this implies that @xmath109 precedes @xmath203 in @xmath198 because @xmath109 is a leaf which is the leftmost child of @xmath166 in @xmath155 .",
    "now that we have shown that the above procedure creates a tree @xmath151 with postorder @xmath1 , our goal is to show that each decreasing @xmath20-tree with postorder @xmath1 is obtained in this way from a unique pair @xmath147 . in the following theorem ,",
    "let @xmath212 denote the tree @xmath151 that our procedure produces from the valid hook configuration @xmath115 and the tuple of decreasing @xmath20-trees @xmath143",
    ". it might be useful to keep example [ exam2 ] , example [ exam3 ] , and figure [ fig4 ] in mind during the following proof .",
    "let @xmath27 be a decreasing @xmath20-tree whose postorder reading is @xmath213 .",
    "there is a unique pair @xmath147 such that @xmath214 .",
    "let @xmath215 be the set of entries @xmath76 of @xmath1 such that @xmath76 is a parent of a descent top of @xmath1 in @xmath27 .",
    "suppose @xmath216 , where @xmath55 and @xmath139 . according to definition [ def1 ] ,",
    "a point @xmath35 is a northeast endpoint of a hook in @xmath115 if and only if it is the northeast endpoint of a hook whose southwest endpoint is @xmath31 for some descent @xmath22 of @xmath1 .",
    "referring to case 1 of the procedure , this happens if and only if @xmath76 is the parent of @xmath25 in @xmath27 .",
    "therefore , @xmath78 is precisely the collection of points @xmath35 such that @xmath217 .",
    "we can now determine exactly what the hooks in @xmath115 must be by observing that the points in @xmath218 correspond to the children in @xmath27 of the points @xmath76 such that @xmath77 .",
    "more precisely , there is a hook @xmath38 in @xmath115 with @xmath219 and @xmath47 if and only if @xmath217 and @xmath220 is a child of @xmath76 in @xmath27 .",
    "hence , @xmath115 is uniquely determined by @xmath27 .",
    "the paragraph preceding the proof of proposition [ prop1 ] tells us that each tree @xmath138 is embedded in @xmath27 .",
    "more precisely , if @xmath137 and @xmath221 , then @xmath25 is in the @xmath14 subtree of @xmath76 in @xmath138 if and only if @xmath25 is in the @xmath14 subtree of @xmath76 in @xmath27 .",
    "therefore , @xmath143 is uniquely determined by @xmath27 .",
    "we have shown that there is at most one pair @xmath147 such that @xmath216 .",
    "on the other hand , it turns out that these properties of @xmath115 and @xmath143 , which are necessary for @xmath216 , are sufficient .",
    "we may define a valid hook configuration @xmath222 by requiring that there is a hook in @xmath115 with southwest endpoint @xmath31 and northeast endpoint @xmath35 if and only if @xmath25 is a child of @xmath76 in @xmath27 and @xmath217 . for each @xmath223 , define a decreasing @xmath20-tree @xmath224 on @xmath225 by insisting that for any @xmath226 , @xmath25 is in the @xmath14 subtree of @xmath76 in @xmath224 if and only if @xmath25 is in the @xmath14 subtree of @xmath76 in @xmath27 .",
    "let @xmath227 . with these definitions , @xmath228 .",
    "we are now able to obtain the formula .",
    "recall the definition of @xmath75 from definition [ def1 ] .",
    "for any @xmath119 , recall that @xmath229 denotes the number of hooks in @xmath115 and that @xmath141 denotes the number of points @xmath31 that are given the color @xmath111 in the colored diagram induced by @xmath115 .",
    "[ thm2 ] let @xmath53 .",
    "the number of decreasing @xmath20-trees with postorder @xmath1 is @xmath230    theorem [ thm1 ] tells us that there is a one - to - one correspondence between decreasing @xmath20-trees with postorder @xmath1 and pairs of the form @xmath147 . in the beginning paragraph of this section",
    ", we showed that for any given @xmath119 , the number of ways to choose @xmath143 is @xmath231 .",
    "we continue to let @xmath21 be an arbitrary permutation in @xmath232 .    in the last section",
    ", we gave a procedure for constructing a sequence of decreasing @xmath20-trees @xmath148 such that @xmath193 .",
    "the purpose of this section is to show how modifying that procedure can lead to results similar to theorem [ thm2 ] concerning different types of decreasing plane trees .",
    "recall from the introduction that we defined two important types of plane trees : @xmath7-trees and @xmath4-ary plane trees .",
    "if @xmath7 is a set of nonnegative integers with @xmath8 , then an @xmath7-tree is constructed from a root along with a @xmath9-tuple of @xmath7-trees for some @xmath10 .",
    "if @xmath4 is a positive integer , then a @xmath4-ary plane tree is either empty or is a root along with a @xmath4-tuple of ( possibly empty ) @xmath4-ary plane trees . if @xmath2 is a set of positive integers , then a decreasing plane tree ( of either type ) on @xmath2 is a plane tree whose vertices have been labeled with the elements of @xmath2 so that the label of any nonroot vertex is smaller than the label of its parent .",
    "[ def3 ] if @xmath119 and @xmath233 $ ] , let @xmath234 denote the number of hooks in @xmath115 with northeast endpoint @xmath35 .",
    "if @xmath235 , define @xmath236 to be the set of valid hook configurations @xmath119 such that @xmath237 for all @xmath233 $ ] .    according to the definition of @xmath78 in definition [ def1 ] , @xmath77 if and only if @xmath238 .",
    "in the proof of theorem [ thm1 ] , we were given a decreasing @xmath20-tree @xmath27 with @xmath213 and showed that @xmath214 for a unique pair @xmath147 .",
    "we let @xmath215 be the set of entries @xmath76 such that @xmath76 was a parent of a descent top of @xmath1 in @xmath27 .",
    "it then turned out that @xmath217 if and only if @xmath77 . the number of children of each vertex @xmath217 was @xmath234 , the number of hooks in @xmath115 with northeast endpoint @xmath35 . furthermore , if @xmath239 and @xmath76 was a vertex in @xmath138 , then the number of children of @xmath76 in @xmath27 was equal to the number of children of @xmath76 in @xmath138 .",
    "we will make use of these observations in the proofs of the following theorems .",
    "[ thm3 ] let @xmath7 be a set of nonnegative integers with @xmath8 .",
    "let @xmath240 denote the number of @xmath7-trees with @xmath102 vertices .",
    "the number of decreasing @xmath7-trees with postorder @xmath1 is @xmath241    the proof is very similar to those of theorems [ thm1 ] and [ thm2 ] because a decreasing @xmath7-tree is just a special type of decreasing @xmath20-tree . as mentioned in the paragraph",
    "preceding this theorem , each tree @xmath27 with postorder @xmath1 corresponds to a pair @xmath147 . if @xmath77 , then the number of children of @xmath76 in @xmath27 is @xmath234 .",
    "this is the reason for summing over the set @xmath236 .",
    "because the number of children of each of the other vertices of @xmath27 must be an element of @xmath7 , the tuple of trees @xmath139 must be such that each tree @xmath138 is a decreasing @xmath7-tree whose postorder is in increasing order .",
    "this explains why we have replaced the product @xmath242 from theorem [ thm2 ] with the product @xmath243 .",
    "we can also modify our techniques in order to count decreasing @xmath4-ary trees .",
    "[ thm4 ] let @xmath4 be a positive integer .",
    "let @xmath244 denote the number of @xmath4-ary plane trees with @xmath102 vertices .",
    "the number of decreasing @xmath4-ary plane trees with postorder @xmath1 is @xmath245\\cup\\{0\\}}(\\pi)}\\left(\\prod_{j=1}^n{d\\choose w_{j}(\\mathscr h)}\\right)\\left(\\prod_{t=0}^{\\vert \\mathscr h\\vert}e_d(q_t(\\mathscr h))\\right).\\ ] ]    we have made two simple modifications to the ideas used in the proof of theorem [ thm3 ] .",
    "the first is that we have replaced @xmath246 with @xmath247 because we are considering different types of trees .",
    "the second is the introduction of the factors of the form @xmath248 .",
    "the reason for these new factors comes from the fact that vertices in decreasing @xmath4-ary trees can have empty subtrees . for each @xmath77",
    ", there are @xmath249 ways to choose which of the @xmath4 subtrees of @xmath76 are nonempty .",
    "when @xmath239 , the factor @xmath249 does not change anything because @xmath250 .",
    "the following theorems serve to refine the enumerative results we have found so far .",
    "we omit their proofs because they are straightforward consequences of ideas that we have already used , especially the observations mentioned in the paragraph immediately preceding theorem [ thm3 ] .",
    "we need some notation before stating these results .",
    "if @xmath200 is a set of nonnegative integers , let @xmath251 denote the set of all decreasing plane trees ( of either of our two types ) in which there are exactly @xmath163 vertices @xmath252 such that the number of children of @xmath252 is an element of @xmath200 .",
    "if @xmath115 is a valid hook configuration of @xmath1 , let @xmath253 be the set of all @xmath254 such that the color @xmath255 is not used in the colored diagram induced by @xmath115 to color a point in @xmath78 .",
    "we let @xmath256 .",
    "for example , the colors @xmath257 and @xmath258 ( pink and teal ) are used in example [ exam2 ] to colors the points in @xmath78 .",
    "therefore , in that example , we have @xmath259 and @xmath260 . if @xmath261 , where @xmath262 , then we let @xmath263 . in other words ,",
    "the tuple @xmath264 is obtained by starting with the tuple @xmath265 and removing all of the coordinates @xmath266 such that the color @xmath255 is used to color a point in @xmath78 .",
    "[ thm5 ] let @xmath267 with @xmath8 .",
    "let @xmath268 be the set of @xmath269 such that @xmath270 .",
    "let @xmath271 be the number of @xmath7-trees in @xmath251 with @xmath102 vertices .",
    "the number of decreasing @xmath7-trees @xmath272 with @xmath213 is @xmath273 where the innermost sum ranges over all nonnegative integers @xmath274 that sum to @xmath275 .",
    "[ thm6 ] let @xmath276\\cup\\{0\\}$ ] .",
    "let @xmath277\\cup\\{0\\}}(\\pi;r , u)$ ] be the set of @xmath278\\cup\\{0\\}}(\\pi)$ ] such that @xmath270 .",
    "let @xmath279 be the number of @xmath4-ary plane trees in @xmath251 with @xmath102 vertices .",
    "the number of decreasing @xmath4-ary plane trees @xmath272 with @xmath213 is @xmath280\\cup\\{0\\}}(\\pi;r , u)}\\left(\\prod_{j=1}^n{d\\choose w_{j}(\\mathscr h)}\\right)\\sum_{j_0+j_1+\\cdots+j_{\\widehat{\\vert\\mathscr h\\vert}}=p - u}\\prod_{t=0}^{\\widehat{\\vert\\mathscr h\\vert}}e_d(\\widehat q_t(\\mathscr h);r , j_t),\\ ] ] where the innermost sum ranges over all nonnegative integers @xmath274 which sum to @xmath275 .",
    "it may seem as though theorems [ thm5 ] and [ thm6 ] provide unnecessarily lengthy expressions by merely summing over appropriate sets .",
    "as these theorems stand , they appear too complicated to be of much use .",
    "however , our real interest lies in some special cases in which the given expressions simplify considerably .",
    "recall from definition [ def1 ] that if @xmath119 and @xmath77 , then @xmath35 is the northeast endpoint of at least two hooks : one with southwest endpoint @xmath41 and one with southwest endpoint @xmath31 for some descent @xmath22 of @xmath1 .",
    "it is natural to consider the set of valid hook configurations @xmath115 in which each point in @xmath78 is a northeast endpoint of _ exactly _ two hooks . in the notation of definition [ def3 ] , this is the set @xmath281 .",
    "it is particularly easy to work with this set of valid hook configurations because the number of hooks in any such configuration must be twice the number of descents of @xmath1 .",
    "the following corollary invokes the numbers @xmath282 for certain sets @xmath283 .",
    "these numbers are known and are listed in table [ tab1 ] .",
    "@xmath200 & @xmath282 & @xmath284 + @xmath285 & @xmath286 & @xmath287 + @xmath288 & @xmath289 & @xmath290 + @xmath291 & @xmath292 & @xmath293 + @xmath294 & @xmath295 & @xmath296 +    [ cor1 ] let @xmath53 be a permutation with exactly @xmath40 descents .",
    "let @xmath297 .",
    "let @xmath298 if @xmath299 , and let @xmath300 if @xmath301 .",
    "the number of decreasing @xmath294-trees @xmath272 with @xmath213 is @xmath302 where the numbers @xmath303 are assumed to be nonnegative integers .    set @xmath11 in theorem [ thm5 ] .",
    "note that @xmath304 because a point can not be the northeast endpoint of exactly one hook .",
    "suppose @xmath305 .",
    "each point in @xmath78 is the northeast endpoint of two hooks , exactly one of which has a southwest endpoint @xmath31 for some descent @xmath22 of @xmath1 .",
    "therefore , @xmath306 and @xmath307 . by definition , @xmath308 . because @xmath309 whenever @xmath77",
    ", @xmath310 is empty if @xmath311 and @xmath301 .",
    "similarly , @xmath310 is empty when @xmath312 and @xmath299 . when @xmath313 and @xmath301 , @xmath314 . when @xmath315 and @xmath299 , @xmath314 .",
    "[ exam4 ] by definition , @xmath316 is the set of all decreasing plane trees with @xmath194 leaves .",
    "according to table [ tab1 ] , @xmath317 if @xmath318 .",
    "therefore , corollary [ cor1 ] tells us that if @xmath53 has exactly @xmath40 descents , then the number of decreasing @xmath294-trees with exactly @xmath319 leaves that have postorder @xmath1 is @xmath320 it is understood that the numbers @xmath303 in the sum are positive .    in the next corollary ,",
    "recall the definition of the numbers @xmath279 from theorem [ thm6 ] .",
    "when @xmath321 and @xmath283 , these numbers are given in table [ tab1 ] .",
    "[ cor2 ] let @xmath53 be a permutation with exactly @xmath40 descents .",
    "let @xmath297 .",
    "let @xmath298 if @xmath299 , and let @xmath300 if @xmath301 .",
    "the number of decreasing binary plane trees @xmath272 with @xmath213 is @xmath322 where the numbers @xmath303 are assumed to be nonnegative integers .",
    "set @xmath321 in theorem [ thm5 ] .",
    "the simplification of the formula in theorem [ thm6 ] results from the same argument used to simplify the formula from theorem [ thm5 ] in the proof of corollary [ cor1 ] . in this case",
    ", we must also consider the expression @xmath248 .",
    "this product simplifies to @xmath17 because @xmath321 and @xmath323 for all @xmath233 $ ] and @xmath305 .",
    "[ exam5 ] according to table [ tab1 ] , @xmath324 if @xmath318 . therefore , corollary [ cor1 ] tells us that if @xmath53 has exactly @xmath40 descents , then the number of decreasing binary plane trees with exactly @xmath319 leaves that have postorder @xmath1 is @xmath325 because @xmath326 , this expression simplifies further to @xmath327",
    "in his 1990 ph.d . thesis ,",
    "julian west @xcite studied a function @xmath328 that transforms permutations into permutations through the use of a vertical stack .",
    "we call the function @xmath328 the _ deterministic stack - sorting algorithm_. given an input permutation @xmath329 , the permutation @xmath330 is computed as follows . at any point in time during the algorithm , if the leftmost entry in the input permutation is larger than the entry at the top of the stack or if the stack is empty , the leftmost entry in the input permutation is placed at the top of the stack .",
    "otherwise , the entry at the top of the stack is annexed to the right end of the growing output permutation .",
    "for example , @xmath331 .",
    "example [ exam5 ] has a natural interpretation in terms of the deterministic stack - sorting algorithm .",
    "this is because the map @xmath328 is intimately related to the postorder readings of decreasing binary plane trees .",
    "if we are given any decreasing binary plane tree , we can read its labels in _ symmetric order _ by first reading the left subtree of the root in symmetric order , then reading the root , and finally reading the right subtree of the root in symmetric order .",
    "if we let @xmath332 denote the set of decreasing binary plane trees on @xmath107 $ ] , then the map @xmath333 that sends a tree to its symmetric order reading is a bijection @xcite .",
    "furthermore , one can show that @xmath334 for any @xmath335 ( * ? ? ?",
    "* corollary 8.22 ) .",
    "therefore , the preimages of a permutation @xmath53 under @xmath328 are in bijective correspondence with the decreasing binary plane trees with postorder @xmath1 ( the bijection being the map @xmath7 ) .",
    "a leaf of a decreasing binary plane tree corresponds to a valley in the tree s symmetric order reading ( a valley of a permutation @xmath336 is an index @xmath337 such that @xmath338 ) .",
    "therefore , we may rephrase the result from example [ exam5 ] as follows :    [ cor3 ] if @xmath53 is a permutation with exactly @xmath40 descents , then the number of permutations @xmath335 that have exactly @xmath319 valleys and that satisfy @xmath339 is given by @xmath327    corollary [ cor3 ] provides a method for calculating a refined enumeration of the preimages of any permutation @xmath1 under @xmath328 .",
    "the reader may very well ask  what about the _ total _ number of preimages of @xmath1 under @xmath328 ? \" west originally asked about preimages of permutations under @xmath328 , and he defined the _ fertility _ of a permutation to be the total number of these preimages @xcite .",
    "subsequently , bousquet - mlou gave a method for determining whether or not the feritility of any permutation is @xmath340 ( that is , whether or not a permutation is in the image of @xmath328 ) , and she stated that it would be interesting to find a method for computing the fertility of any given permutation @xcite .",
    "fortunately , we have such a method ( reliant on the construction of the set @xmath281 ) .    [ thm7 ]",
    "if @xmath53 is a permutation with exactly @xmath40 descents , then the number of permutations @xmath335 such that @xmath339 is given by @xmath341    set @xmath321 in theorem [ thm4 ] , and use the fact that @xmath342\\cup\\{0\\}}(\\pi)=\\mathcal h_{\\{0,2\\}}(\\pi)$ ] . by definition , @xmath343 for all @xmath344 $ ] and @xmath305 .",
    "therefore , the first product in the summation in theorem [ thm4 ] simplifies to @xmath17 .",
    "the second product becomes @xmath345 .",
    "this is because @xmath346 , the number of ( unlabeled ) binary plane trees with @xmath141 vertices , is the catalan number @xmath347 .",
    "finally , note that if @xmath111 is a color used to color an element of @xmath78 in the colored diagram of @xmath1 induced by @xmath115 , then @xmath348 by remark [ rem1 ] .",
    "therefore , the product simplifies further to @xmath349 .    as a final application",
    ", we count the number of preimages of a permutation under @xmath328 which have a fixed number of descents . in the following theorem ,",
    "recall that the narayana number @xmath350 is defined by @xmath351 .",
    "[ thm8 ] if @xmath53 has exactly @xmath40 descents and @xmath54 is a nonnegative integer , then the number of permutations @xmath335 which have exactly @xmath54 descents and satisfy @xmath339 is given by @xmath352 where the numbers @xmath303 in the sum are nonnegative integers that sum to @xmath353 .",
    "the descents of a permutation @xmath354 are in one - to - one correspondence with the right edges of the decreasing binary plane tree @xmath355 .",
    "therefore , we are really counting the number of decreasing binary plane trees that have exactly @xmath54 right edges and that have postorder @xmath1 .",
    "choose some @xmath305 .",
    "observe that if @xmath77 , then @xmath309 .",
    "this means that for any collection of trees @xmath356 , @xmath76 will have two children in @xmath212 .",
    "in particular , @xmath76 will have a right child in @xmath212 .",
    "consequently , @xmath212 will automatically have @xmath40 right edges that attach the @xmath40 elements of the set @xmath357 to their right children .",
    "we now need to choose a collection of trees @xmath356 such that the total number of right edges in all of the trees @xmath358 is @xmath353 .",
    "if @xmath111 is a color used to color a point in @xmath78 in the colored diagram of @xmath1 induced by @xmath115 , then the number of vertices of @xmath138 is @xmath121 by remark [ rem1 ] .",
    "such a tree has no right edges , and there is only one way to choose each such tree .",
    "therefore , we are left to choose the trees @xmath359 for @xmath360 .",
    "let @xmath361 , where @xmath362 .",
    "choose a collection of nonnegative integers @xmath303 with @xmath363 .",
    "it is well known that @xmath364 is the number of unlabeled binary plane trees with @xmath365 vertices that have exactly @xmath366 right edges .",
    "therefore , the number of ways to choose the trees @xmath367 so that each tree @xmath368 has exactly @xmath369 right edges is @xmath370 .",
    "the result now follows by summing over all possible @xmath303 and all possible @xmath305 .",
    "the formulas given in this paper include sums over sets of the form @xmath236 , where @xmath235 and @xmath53 . for this reason , it would be interesting to have a method for efficiently generating all of the valid hook configurations in the set @xmath236 if we are given @xmath7 and @xmath1 . alternatively ,",
    "suppose we fix @xmath7 and let @xmath371 be a specific family of permutations ( such as the family of layered permutations or the family of involutions ) .",
    "we would be interested in calculating ( or at least estimating ) the number of hooks in the set @xmath236 for each @xmath372 .",
    "the author would like to thank mikls bna for very helpful advise concerning the submission and organization of this paper .",
    "the author would also like to thank the anonymous referees for their useful suggestions ."
  ],
  "abstract_text": [
    "<S> given a set @xmath0 of decreasing plane trees and a permutation @xmath1 , how many trees in @xmath0 have @xmath1 as their postorder ? using combinatorial and geometric constructions , we provide a method for answering this question for certain sets @xmath0 and all permutations @xmath1 . </S>",
    "<S> we then provide applications of our results to the study of the deterministic stack - sorting algorithm . </S>"
  ]
}