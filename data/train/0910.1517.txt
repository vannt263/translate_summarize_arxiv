{
  "article_text": [
    "radio astronomy started with single dishes .",
    "the sensitivity and resolution of a single dish radio telescope is limited by its physical aperture area . due to the larger wavelengths involved , the resolution of even the largest such radio telescope  the arecibo dish , which is 300 m in diameter  is poor compared to its optical counterparts . to overcome this limitation ,",
    "radio astronomers have evolved the technique of interferometry which synthesizes large apertures using multiple single dishes .",
    "the first multi - element radio interferometer for astronomy was built by sir martin ryle @xcite .",
    "an interferometer measures the cross - correlation between the signals for a given pair of antennae .",
    "the instantaneous value of this cross - correlation ( also called `` visibility '' ) estimates one fourier component of the two dimensional brightness distribution in the sky plane .",
    "the frequency of the measured fourier component depends on the vector distance between the two antennae , projected onto a plane normal to the direction of the source ( also called  baseline \" ) . for an array of @xmath0 antennae , at any",
    "given time , there will be @xmath1 such baselines and corresponding visibility measurements . due to the rotation of the earth ,",
    "the baseline vectors change with time , allowing many more fourier components to be measured . by taking a 2-d fourier transform of the measured visibilities ( after appropriate calibration )",
    ", one can obtain the sky brightness distribution @xcite , with a resolution that corresponds to an aperture size equal to the largest separation in the array .",
    "some of the major aperture synthesis interferometer arrays in operation today are , the very large array ( vla ) of nrao , the westerbork synthesis radio telescope ( wsrt ) of astron , the australia telescope compact array ( atca ) of atnf , the giant metrewave radio telescope ( gmrt ) of ncra .",
    "the gmrt consists of an array of 30 antennae , each of 45 m diameter , spread over a region of 25 km diameter , and operating at 5 different wave bands from 150 mhz to 1450 mhz @xcite . amongst the multi - element earth rotation aperture synthesis telescopes operating at meter wavelengths , the gmrt has the largest collecting area .",
    "the gmrt can also be configured in array mode , where it acts as a single dish by adding the signals from individual dishes @xcite .",
    "this mode of operation is used for studying compact objects like pulsars , which are effectively point sources even for the largest interferometric baselines .",
    "the maximum instantaneous operating bandwidth at any frequency band is 33 mhz .",
    "each antenna provides signals in two orthogonal polarizations , which are processed through a heterodyne receiver chain and brought to the central receiver building , where they are converted to baseband signals and fed to the digital backend consisting of correlator and pulsar receiver .",
    "the existing gmrt hardware backend uses application specific integrated circuit based design approach , which is fairly efficient and optimized for its prime scientific goals , but has limited flexibility .",
    "it also suffers from some limitations due to quantization effects in the hardware pipeline .",
    "the pulsar receiver , which uses digital signal processing chips , is somewhat more flexible in its configuration and capabilities . with the growing impact of the gmrt",
    ", there is a strong need felt by the user community for a flexible and more powerful backend which can support new regimes of observations .",
    "some examples of these are : ( i ) spectral line observations requiring higher frequency resolution over larger bandwidths ( ii ) pulsar searches and surveys for transient sources requiring higher time resolution across a wide field of view , including the capability of forming multiple phased array beams within the primary field of view . furthermore , like most low frequency radio telescopes",
    ", the gmrt is also affected by local radio frequency interference ( rfi )  both narrow spectral lines and broadband , impulsive signals . to produce data with high dynamic range and low noise",
    ", it is essential to detect and filter out such rfi signals , at various stages in the processing pipeline .",
    "the existing gmrt hardware backend is not designed to address such issues .",
    "a software based backend can be an attractive option to overcome these limitations .    a software backend is a real - time or off - line processing pipeline that runs on a supercomputer or cluster of computers .",
    "the rapid growth in general purpose computing power during the last few years had made it possible to compete with the processing speeds of dedicated hardware . besides this , fast data transport links between computers are now possible due to the availability of high speed gigabit networking .",
    "storage media have also gone through a revolution in the last few years , in terms of capacity and throughput .",
    "all these recent advancements have made it attractive to attempt designs of software backends for radio astronomy .",
    "this is aided by the fact that the computing required for the processing of signals from a multi - element interferometric array is very well suited for implementation on multi - processor computers .",
    "use of commercial off - the - shelf ( cots ) components and software processing blocks significantly reduces the several years of development time required for hardware backends .",
    "it also makes the upgrades much easier , by replacing with faster computers without spending effort in rebuilding the processing blocks again .",
    "the algorithms implemented in software are much more flexible ; new features can be added easily , and new regions of parameter space can be explored very conveniently .",
    "design of correlators using off - the - shelf general purpose computers is not an entirely 21st century approach .",
    "very long baseline interferometric ( vlbi ) observations , where the distances between the antennae are much greater than in conventional interferometers , were started with the recording of raw voltage samples from each antenna onto magnetic media .",
    "the recorded data from all the antennae in the vlbi network were correlated off - line using general purpose computers .",
    "the first such software correlator was implemented on ibm mainframes ( system 360/50 ) at the nrao by the nrao - cornell vlbi group around 1967 @xcite .",
    "the input data were from a mark i tape recording system , albeit with a rather modest operating bandwidth of 360 khz @xcite . over the next few decades ,",
    "the increase in complexity of the vlbi systems  due to increase in bandwidths and number of antennae @xmath2 resulted in a switch towards specialized hardware correlators to process the data , e.g. very long baseline array ( vlba ) of nrao , joint institute for vlbi in europe ( jive ) , the canadian s2 system .",
    "this was the era where hardware / firmware options were found to provide realistic solutions @xcite .",
    "however , moore s law was slowly catching up with these requirements , and by the late 1990s , the availability of computing power ( including distributed parallel processing ) and high speed , high density data storage capabilities renewed the interest of the radio astronomy community in software processing . in 1990 , a gated cross - correlator for mark ii vlbi was devised by petit et al . @xcite .",
    "the difx vlbi correlator @xcite designed by the swinburne university of technology , which extensively employs parallel processing techniques , is the most recent milestone in this regard .",
    "however , all these projects are mostly for off - line processing of recorded data .",
    "phillips et al .",
    "@xcite demonstrated real - time e - vlbi for an array of four telescopes from the australian long baseline array , with 16 mhz of observing bandwidth , using the difx correlator . however , the work described here to develop a software based backend for the gmrt is probably the first implementation of a fully _ real - time _",
    "software pipeline as a regular observatory backend for a medium sized array .",
    "the upcoming bluegene - l based central processing unit for the lofar telescope @xcite will be another such fully real - time backend .",
    "the ibm cell processor based e - vlbi correlator is also aimed for real - time data transport and software based processing @xcite .",
    "the recently developed gmrt software backend ( gsb ) , built using mainly cots components , is a fully real - time backend that supports all the features of the existing hardware backend of the gmrt .",
    "in addition , it provides substantially enhanced spatial and temporal resolutions .",
    "furthermore , it supports a baseband recording mode where raw voltage signals from all the antennae can be recorded to disk for specialized off - line processing to maximize the science return . in this paper",
    ", we describe our design and implementation of this 32 antennae , 33 mhz , dual polarization , fully real - time software backend for the gmrt .",
    "the basic design requirements for the gsb are to support two main modes : ( i ) a real - time correlator and beamformer for an array of 32 numbers of dual polarized signals with a maximum bandwidth of 33 mhz , ( ii ) a baseband recorder for the above signals , accompanied by off - line correlation and beamforming .",
    "the details of the design concepts and considerations for these modes of operations are described below .      at the gmrt ,",
    "the dual polarized voltage signals from each antenna are processed through superheterodyne receivers and finally brought to a central location for further processing .",
    "the intermediate frequency signals from each antenna are then down - converted to baseband signals and fed to the digital signal processing backend . within the backend",
    ", these signals need to be nyquist sampled , and given to a spectral correlator that can estimate the visibility products for each baseline , for multiple spectral channels .",
    "the spectral correlator can be of either fx or xf type , depending on whether the cross - multiplication is done after or before the frequency analysis @xcite .",
    "for the gsb , a fx correlator approach is utilized , where the input signals first get channelized using a fast fourier transform ( fft ) implementation , before being cross - multiplied and accumulated . in order to preserve good dynamic range in presence of rfi , a minimum of 4 bit sampling is required . at the lower frequencies of the gmrt , where the rfi is more severe , the usable bandwidths are smaller , and 8 bit sampling is required .",
    "the delay correction , @xmath3 , required to time align the sampled data streams from the different antennae has two main contributions : ( i ) the geometrical path delay of the wavefront reaching a given antenna ( with respect to a reference antenna ) , @xmath4 , which depends upon the direction of the source ( @xmath5 ) and the baseline vector ( @xmath6 ) between the two antennae as ( see pages 68 - 73 of @xcite for detailed descriptions and figures ) @xmath7    and ( ii ) the fixed delay , @xmath8 , which arises due to the fixed path length differences from the antenna to the backend ( mostly cable lengths plus other instrumental delays ) .",
    "a gmrt specific delay model @xcite is used to calculate this total antenna based delay and its rate of change ( @xmath9 ) . for the gmrt , the gsb needs to provide a maximum tunable delay @xmath3 of 128 @xmath10s , with an accuracy of 2 ns @xcite to match the performance of the hardware correlator .    in a digital backend",
    ", the delay correction implementation is decomposed into two parts .",
    "the first part is an integer delay ( @xmath11 ) correction , which is applied in integer multiples of the sampling clock , and results in the data streams being aligned to within @xmath12 1 sample .",
    "it is usually implemented by block shifting of the sampled time series data streams .",
    "the second part is a fractional sample time correction ( fstc ) , which takes care of the residual delay of less than one sample interval ( @xmath13 ) . in a fx correlator , it is usually implemented in the fourier domain by multiplying the spectral channel data with a phase gradient .",
    "in addition to the above mentioned delay corrections , there is an additional phase correction of the signal from each antenna , called fringe correction ( or fringe de - rotation ) , that needs to be carried out .",
    "this is a broad - band phase correction which arises from the fact that the @xmath3 is corrected at a baseband frequency , @xmath14 , instead of the sky frequency , @xmath15 .",
    "the total phase correction as a function of frequency and time is @xmath16\\tau_{frac } \\pm [ \\nu_{rf } - \\nu_{bb}]\\tau_{tot})\\ ] ] where @xmath17 is the baseband frequency of the @xmath18 spectral channel , @xmath15 is the sky frequency corresponding to the lower edge of the band , and @xmath14 is the baseband frequency at the lower edge .",
    "the difference between these two is the local oscillator frequency , @xmath19 , used for the frequency translation .",
    "the `` @xmath12 '' sign signifies the passband convention ( `` @xmath20 '' for @xmath15 @xmath21 @xmath19 and `` @xmath2 '' for @xmath15 @xmath22 @xmath19 ) .",
    "fringe correction can be implemented either before or after the fft . in pre - fft fringe correction ,",
    "the time domain voltage signal is multiplied with a phase correction factor , whereas in post - fft fringe case , the correction is carried out by multiplying the spectral channel data of each time sample with a complex phase factor .",
    "post - fft fringe correction ( combined with fstc correction ) is computationally advantageous and works well in cases of low fringe rates and relatively small number of spectral channels , such that the change in fringe phase over one fft cycle is negligible . for a low frequency , moderate array size telescope like the gmrt ,",
    "the maximum fringe rate is @xmath12 5 hz . for fft length of 1024 points , this results in a worst case decorrelation of 0.18@xmath23 due to the variation of the fringe phase during one fft cycle , which is quite acceptable .",
    "hence , for the gsb , post - fft fringe correction is sufficient .",
    "a fx correlator computes the instantaneous cross power spectrum between every pair of antennae , by cross multiplying the fft data from the corresponding frequency channels of the selected antennae .",
    "these products are integrated for the desired time scale to obtain the time sequences for the complex visibilities for different spectral channels , for all baselines .",
    "this multiply - accumulate ( mac ) operation is repeated for data from each of the polarizations , e.g. right - circular polarization ( r ) and left - circular polarization ( l ) . beside these total intensity products , the gsb ,",
    "when in full polar mode , also needs to provide all the four products ( @xmath24 , @xmath25 , @xmath26 , @xmath27 ) required to reconstruct the stokes parameters . for the gsb ,",
    "the default value of the desired time resolution for the final visibility data is 2 s. in some special cases , the gsb is required to output the visibilities at a faster rate .    for a correlator ,",
    "the computational costs are as follows . for the fft block , for @xmath0-point transforms of signals from @xmath28 antennae with @xmath29 polarizations over a total bandwidth of @xmath30 ( in hz ) ,",
    "the computational load is @xmath31@xmath32 complex operations per second ( cops ) .",
    "the computational cost for the post - fft fringe and fstc corrections is a further @xmath33 cops . for the mac operations ,",
    "the requirement is @xmath34 cops , where @xmath35 is the number of polar products per baseline . using a conversion factor of 4 for cops to real floating point operations ( flops ) , this works out to a compute requirement of 181 gflops for 2048 point spectral decomposition , 8.25 gflops for the phase correction , and 280 gflops for the mac operations , in total intensity mode , for the gmrt specifications .",
    "a beamformer is effectively a highly sensitive single dish built from an array of telescopes . for the gmrt array ,",
    "the beamformer specification is to provide two modes of operations : ( i ) an incoherent array mode , where the voltage samples from the selected antennae are added after converting to intensities , ( ii ) a coherent or phased array mode , where the voltage signals from the selected antennae are first added , and then converted to intensity samples @xcite .",
    "both these modes require antenna based gain offsets and time delays to be corrected prior to the addition of the signals . furthermore , for the coherent beamformer mode",
    ", it is also required to calibrate out antenna based phase offsets @xcite , both for broadband and narrowband spectral variations .",
    "the incoherent array beam has the same field - of - view as the primary beam of a single antenna , but with an enhanced sensitivity of @xmath36 times that of a single antenna , for an array of @xmath28 antennae .",
    "however , the coherent array beam is much narrower than that of a single antenna , being similar to the synthesized beam obtained from the array of @xmath28 antennae , and has a sensitivity improvement of @xmath28 times than that of a single antenna .",
    "thus , the incoherent array mode is more useful for rapidly covering large areas of the sky , as would be needed in large scale pulsar surveys , whereas the coherent array mode is ideal for studies of known pulsars and for high - sensitivity searches for pulsars in compact targets such as globular clusters and supernova remnants .",
    "both the incoherent and coherent beamformers produce total intensity signals as the final outputs .",
    "in addition to this , the coherent beamformer is also required to give all the voltage cross products needed to derive the stokes parameters of the incoming radiation . for pulsar observations , incoherent and coherent array outputs",
    "need to be corrected for the effect of dispersion in the interstellar medium ( ism ) .",
    "in most cases , the dedispersion process employs incoherent dedispersion , which corrects for the pulse smearing across the frequency band , but is limited by the dispersion delay within the spectral channels . for exact correction ,",
    "the nyquist sampled pre - detected voltage signals from the phased array output can be put through the coherent dedispersion technique which preserves the full time resolution of the data @xcite .    for an array of @xmath28 antennae each with a bandwidth of @xmath30 ( in hz ) and @xmath29 polarizations ,",
    "the incoherent beamformer cost is @xmath37 ( multiplication ) cops @xmath20 @xmath37 ( addition ) cops .",
    "for the gmrt , this translates to 12.5 gflops .",
    "similarly for the coherent beamformer , for @xmath38 beams ( covering different parts of the primary beam ) , each with @xmath35 polar products , the cost is @xmath39 ( addition ) cops @xmath20 @xmath40 ( multiplication ) cops . for a single beam in total intensity mode ,",
    "this is equal to 4.5 gflops .",
    "the beamforming costs are thus negligible compared to the correlation costs .",
    "the gsb implements a high performance computing platform using off - the - shelf commodity machines .",
    "a highly optimized software pipeline has been developed to achieve the design goals of the gsb , with a minimum of hardware investment .",
    "the details of the hardware and the software architectures of the gsb are described below .      a schematic view of the configuration of the gsb cluster is shown in fig .",
    "[ fig:1 ] . the basic design uses a linux cluster of 48 intel xeon nodes , which are interconnected via two independent 48-port commercial gigabit switches with sustained switching bandwidth of 11 gb / s .",
    "the nodes are segregated into three kinds ( called layers ) , in terms of compute capabilities and usage .",
    "layer-1 consists of 16 acquisition nodes which are xeon 2.4 ghz single core dual processors , each having a 64 bit , peripheral computer interface ( pci ) based four channel analog to digital converter ( adc ) card .",
    "this card can acquire data from 4 analog inputs , operating at either 4-bit , 33 mhz or 8-bit , 16 mhz bandwidth mode .",
    "this results in a sustained data throughput rate of 132 mb / s on the pci bus of each acquisition node .",
    "the total input data rate to the acquisition cluster is thus 2 gb / s .",
    "the 16 acquisition nodes , each handling 4 analog inputs , provide a 64 channel capability to the gsb , which takes care of the 30 antennae , dual polarization requirement of the gmrt , while still leaving scope for 4 additional test signals to be connected .",
    "each adc board is equipped with on - board phase - lock - loop and trigger logic to synchronize the adc sampling clocks and start of acquisition across all the 64 inputs .",
    "the clock synchronization reference signal is derived from the observatory s frequency standard , which is a rubidium atomic clock , and the trigger synchronization signal is derived from the time standard , which is a gps receiver , and these are distributed to each of the 16 boards , as shown in fig .",
    "[ fig:1 ] .",
    "there are programmable variable gain amplifiers at the input of each adc , which provide a facility to digitally control the gain of each antenna s baseband signal .",
    "layer-2 consists of 16 numbers of xeon 2.3 ghz quad core dual processor nodes .",
    "these nodes handle the bulk of the computational load of the main processing pipeline .",
    "layer-3 consists of 16 numbers of xeon 3 ghz dual core dual processor nodes , each with 4 tb of sata disk storage .",
    "these nodes primarily work as a recording cluster in the raw dump mode , but also take part in the computations , for modes with higher compute requirement than can be handled by layer-2 alone ( e.g. 33 mhz full polar mode of operation ) .",
    "each of the 48 nodes in the cluster has dual gigabit on - board ethernet links for establishing inter - node connectivity .",
    "in addition to the 48 acquisition and compute nodes which form the core of the cluster , there are a few peripheral nodes attached to the system .",
    "the main gateway to the gsb is a manager node ( called _ gsbm1 _ in fig .",
    "[ fig:1 ] ) , which provides the primary interface to the outside world .",
    "it provides the control and configuration information from the central control software system of the gmrt , which includes details of the antenna connectivity to the acquisition nodes , current frequency and source settings of the antennae , antenna specific gain and phase updates , command signals to start the data recording for a new scan , and other related operations .",
    "this node also receives the final visibility results from the gsb cluster and passes them to a machine that does the long term accumulation and records the data files on disk .",
    "these files are finally converted to standard fits files , which can be loaded into the aips data analysis package .",
    "there are two other machines ( called _ gsbm2 _ and _ gsbm3 _ in fig .",
    "[ fig:1 ] ) that are attached to the cluster to receive the incoherent array and phased array beam data .",
    "these nodes record the beam data to local disks after some preprocessing , as required .",
    "the gsb code is a parallel pipeline running on the 48 cluster nodes and the peripheral machines , described in sec [ sec:5 ] . since the different layers of nodes are performing different but inter - related jobs , proper synchronization between all of them is required .",
    "efficient transmission of large volumes of data between them is also needed .",
    "these are achieved by using message passing interface ( mpi ) as the main tool for communication and synchronization between the nodes .",
    "special care is taken to ensure that all the nodes reach well defined synchronization barriers after processing a specific block of data .",
    "in addition , openmp based multi - threading techniques are used on the computing nodes in order to optimize and balance the different computing tasks required to be performed on the data .",
    "further , intel ipp routines and vector programming are exploited to get the best performance from the compute nodes .",
    "[ fig:2 ] shows the software flow of the gsb code .",
    "the upper panel shows the software flow for the real - time data acquisition part running on the layer-1 nodes , while the lower panel shows the software flow for the real - time computing part running on the layer-2 / layer-3 nodes .",
    "the bulk of the code runs in a continuous loop in parallel sections ( delineated by the vertical lines in fig .",
    "[ fig:2 ] that mark mpi synchronization barrier points ) that execute on both kinds of nodes , except for a small part that runs sequentially , once in the beginning , on the layer-1 nodes ( on the left of the synchronization barrier in fig .",
    "[ fig:2 ] ) .",
    "this sequential part of the code performs the initial set - up of the acquisition cards ( depending on the mode of operation selected by the user ) and arms the cards to trigger the data acquisition at the next gps pulse .",
    "it also allows for setting the gain for each input signal using a gain calibration table , which can be adjusted to optimally exercise the 8-bit samplers .",
    "after that , the code enters into the parallel sections that execute between successive mpi barrier points , on all the nodes . on the acquisition nodes , the main tasks for this part of the code are to poll for new buffer of data from the adc board and to transfer the buffer to the compute nodes .",
    "the data are transferred from the on - board memory of the adc card to the local memory of the acquisition nodes via interrupt driven direct memory access .",
    "the data rate achieved for these transfers is 150 mb / s .",
    "the size of each buffer received by the acquisition nodes is 32 mb , consisting of 8 mb from each of 4 antennae input signals .",
    "this acquisition block corresponds to a time slice of 251 ms , for both the 16 mhz , 8 bit mode and the 33 mhz , 4 bit mode of the gsb .",
    "the timestamp for each data block is derived from the local gsb time - server which is tied to the observatory time server through network time protocol ( ntp ) .",
    "the acquisition nodes use a double buffer ping - pong scheme : while data for one block are being acquired in one buffer , the data from the previous acquisition block ( sitting in the other buffer ) , are transferred to the compute nodes .",
    "the data for each block from the 16 acquisition nodes is transferred to the 16 compute nodes in a time - division - multiplex ( tdm ) mode wherein each compute node receives one time slice ( of 1/16@xmath41 of a data block ) from all the nodes , containing data of 15 ms duration .",
    "this tdm data sharing scheme ensures that all computations required for obtaining the visibilities for all baselines as well as the beam outputs , for a given time slice , can all be carried out on a single compute node . for the modes of the gsb where extra computing load is needed , requiring the layer-3 nodes also to participate ,",
    "the above concept is extended to generate 32 time slices of the original buffer of data , which are processed by the 32 compute nodes of layer-2 and layer-3 .",
    "the length of the time slices going to layer-2 and layer-3 nodes are adjusted to cater to the different compute capabilities of the nodes in these two layers .",
    "on each compute node , we run parallel pipelines using an openmp based multi - threaded environment .",
    "this is done in order to optimally utilize the multiple cores of the compute nodes .",
    "the number of threads is kept equal to the number of cores .",
    "for some tasks , such as receiving the data from the layer-1 nodes over the network , a single thread resource is sufficient to carry out the job . in other cases , such as the fft and mac operations ,",
    "3 to 4 threads are found to balance the load most optimally . in most of these cases ,",
    "devoting all 8 threads to the same task was found to be sub - optimal .",
    "hence , the software flow on each compute node has 3 multi - threaded parallel pipelines ( as shown in the lower panel of the fig .",
    "[ fig:2 ] ) , as opposed to a model where all the jobs are done sequentially by a single multi - threaded pipeline . to make this work , the parallel sections operate on different blocks of data ( labeled as block # s n , n-1 , n-2 and n-3 in fig . [ fig:2 ] ) , corresponding to different time slices .",
    "this requires the data blocks to be buffered at the end of each of the main stages of operations : after network transfer , after fft , and after mac and beamforming operations .",
    "each of this is a double buffer that is used in a ping - pong manner .",
    "the details of the 3 parallel sections running on the compute nodes are as follows .",
    "the first is a single thread section ( the top pipeline shown in the bottom half of fig .",
    "[ fig:2 ] ) that handles handshaking with the layer-1 nodes and the network transfer in tdm mode , calculation of all delay and fringe parameters ( as described in sect .",
    "[ sec:2 ] ) for the current time slice ( labeled as block # @xmath0 ) being processed .",
    "in addition , this pipeline also transfers the reduced results ( e.g. visibility and beam data ) from the ( @xmath42)@xmath41 block to the corresponding peripheral nodes .",
    "the second pipeline is a section with 4 threads ( middle computation pipeline shown in fig .",
    "[ fig:2 ] ) that performs data reordering ( demultiplexing the 4 antennae data streams from each acquisition node and unpacking 4 bit data samples into 8 bits for the 33 mhz , 4 bit mode ) , integer delay correction , fft and post - fft fringe and fstc correction @xmath2 all of these on the ( @xmath43)@xmath41 block .",
    "the integer delay correction is implemented by offsetting the memory read pointer of the array when it is read in by the fft routine . in order to have seamless delay correction of data samples between different time slices on different nodes , there needs to be some overlap of data samples from successive time slice blocks @xmath2 this is ensured during the network transfer of data from the acquisition nodes to the compute nodes .",
    "the number of time samples in the overlap section is predicated by the largest delay that needs to be compensated , and it set to cover @xmath44 240 @xmath10s , which is more than the maximum requirement for the gmrt array , specified in sect .",
    "[ sec:2 ] .",
    "the post - fft fringe and fstc corrections are carried out by using precomputed sine and cosine values at discrete phase steps , stored as a look - up table .",
    "the table has 1440 steps , allowing a delay correction accuracy of 0.042 ns , more than the requirement specified in sect .",
    "[ sec:2 ] .",
    "this pipeline also has an optional component ( shown by the dotted box in fig .",
    "[ fig:2 ] ) which implements some simple rfi removal algorithms , described in detail in sect . [ sec:18 ] .",
    "the third pipeline ( lower computation pipeline shown in fig . [ fig:2 ] ) is a section with 3 threads that carries out the mac and beamforming operations , working on the ( @xmath45)@xmath41 data block . depending on the operating mode of the gsb that is selected , the mac section produces either self - polar or full - polar visibilities for all the baselines , integrated over the time slice duration of the block , which is 15 ms .",
    "the beamformer produces one incoherent and one coherent array beam at the raw fft time resolution , covering the duration of the time slice . depending on the selected mode",
    ", the coherent array beam data can be the raw voltages for each polarization , or the self - polar intensities for each polarization , or the full - polar intensities .",
    "the visibility data need to be further integrated over the different time slices from each node . to overcome the many - to - single network congestion that would occur",
    "if the visibilities were sent from each compute node directly to the peripheral manager node , we have employed a tree based reduction technique , where nearby compute nodes form groups to integrate data within themselves , during successive iterations of the parallel section .",
    "finally the local group heads send the reduced volume of data to the manager . for the beamformer , in order to preserve the high time resolution , the data from successive time slices can not be integrated . instead , the full resolution data are sent out sequentially from the individual nodes of the cluster to the receiving peripheral nodes , one each for the incoherent and coherent array beams . as we use different peripheral nodes for different beams ,",
    "this helps us to separate out the network transmission paths for different beams .",
    "the maximum output rate for the integrated visibility data is 4 mb / s and for the beamformer data it is 128 mb / s for each of the beams , if only total intensity samples are sent . for the pre - detected voltage data in the phased array beam , the output rate",
    "is also maintained at 128 mb / s by reducing the number of bits per sample . in the default conditions , the gsb produces 512 spectral visibility products for all baselines at a time resolution of 2 s , and single incoherent and coherent beams with a time resolution of 30 @xmath10s , for both the 16 and 33 mhz bandwidth modes of operation .",
    "the total theoretical _ scalar _ compute power of the 16 layer-2 nodes is 295 gflops , which is less than the total requirement , even for the basic modes of operations , which is @xmath44 490 gflops ( sect .",
    "[ sec:2 ] and [ sec:3 ] ) .",
    "further , since these are highly data intensive operations , there are significant overheads due to frequent and large volume data input - output ( i / o ) operations to and from the memory , which increase the disparity between available and required capabilities .",
    "use of the 16 layer-3 nodes for computing can partially takes care of the problem .",
    "however , their main role is to enable the raw data recording ( and read - back ) mode of the gsb . in order to support the 24@xmath467 observatory backend mode of the gsb , where a raw data recording run can be immediately followed by a real - time correlation run ( during which , the layer-3 nodes could be busy in analysis or re - transmission of the earlier recorded data )",
    ", it became important to fit the real - time computing completely on the layer-2 nodes .",
    "this required significant amount of optimization of the code , using techniques such as vectorized processing to utilize the full _ vector _ compute power of the cluster , which can be a factor of 8 more compared to its scalar capabilities , for the 16-bit arithmetic - logic - units ( alus ) . in this",
    "context , use of fixed point processing over floating point processing provides a significant enhancement in computing power .",
    "optimizing the memory performance by reducing the memory i / o overheads to a minimum , is also an important part of the code optimization .",
    "we discuss all these issues in detail in the sections [ sec:11 ] and [ sec:12 ] .      in the baseband recording mode , the gsb cluster supports the streaming of raw voltage samples ( at nyquist rate ) from the antennae into an array of storage disks .",
    "the adc samples from a given acquisition node travel directly to its recording counterpart in layer-3 , through the dual gigabit ethernet connections . the recording cluster of 16 nodes , each with 4 tb of storage , provides a total storage capacity of 64 tb , which can support recording for 18 hrs of observations .",
    "similar to the compute pipeline for the real - time mode , the pipeline for the baseband recording mode is also based on an openmp , multi - threaded environment , bounded by software synchronization barriers .",
    "[ fig:3 ] shows the software flow for the gsb baseband recorder . the acquisition part of the code ( shown in the upper panel of fig .",
    "[ fig:3 ] ) which runs on the layer-1 nodes , is very similar to the real - time acquisition code ( as described in the sect .",
    "[ sec:6 ] ) , except for the scheme used for transfer of data over the network . instead of time",
    "slicing the data buffer in tdm mode , layer-1 nodes initiate pair - wise transfers , where each acquisition node sends the full block of data of 32 mb to its recording counterpart .        on a recording node ( shown in lower panel of the fig .",
    "[ fig:3 ] ) , there are 2 different processes running , that are connected by a common shared memory ring buffer .",
    "there is a single thread sequential pipeline to receive the current data block ( # @xmath0 ) from the corresponding acquisition node and to write the data into the ring buffer having a depth of 8 data blocks ( i.e. total size of 256 mb ) .",
    "this process is bounded by a synchronization barrier , common with the acquisition nodes .",
    "data buffering using a shared memory ring buffer is a very useful technique for smoothing out the occasional glitches in disk i / o performance , and helps significantly in avoiding loss of data , and a consequent loss of synchronization with other data streams .",
    "the concurrent process for reading the shared memory uses a single thread to read one block of data at a time , and then branches into 5 parallel sections ( bottom half of fig .",
    "[ fig:3 ] ) .",
    "the upper pipeline uses 3 threads to perform data reordering as described in sect .",
    "[ sec:6 ] , reduction of the data samples to 4-bit or 2-bit ( for the 16 mhz and 33 mhz modes , respectively ) , and packing of 2 or 4 such samples to construct a byte  all of this on the previous block ( # n-1 ) of data .",
    "the lower 4 pipelines are designed to perform the disk writing , where each single thread takes care of data for one antenna .",
    "there are 4 numbers of 1 tb disks connected on each node , and data from each antenna streams into a separate disk .",
    "each of the disk i / os performs at a sustained rate of 80 mb / s with the aid of a xfs filesystems .",
    "each recorded data buffer is accompanied with a timestamp derived from the ntp server , in addition to the synchronization of the main start of acquisition with a gps minute edge .",
    "the recorded data samples along with timestamps are processed off - line .",
    "the gsb cluster ( layer-2 and/or layer-3 ) can be configured to play the role of the off - line analysis cluster .",
    "we have also successfully ported the gsb off - line analysis pipeline on the main compute facility at ncra @xmath2 a 72 node , 230 gflops ( theoretical scalar peak ) , itanium cluster with infiniband ( ib ) inter - node connectivity .",
    "this cluster is linked to the gsb with a dedicated 8 gbps fibre link , which allows for close to real - time transfer rates for the baseband recorded data .",
    "the data is loaded into a network attached storage of @xmath44 32 tb , connected with the itanium cluster .",
    "the scalar compute power of the itanium cluster is comparable to that of layer-3 of the gsb , and it benefits similarly from vector optimization and fixed - point implementation techniques .",
    "however , in overall performance , the itanium cluster performs significantly slower than the layer-3 cluster of the gsb , as it is fed with data from a single storage unit , instead of the distributed storage of the gsb .",
    "we have also ported the gsb code on the green machine supercomputer at the center for astrophysics and supercomputing of the swinburne university of technology .",
    "the off - line pipeline running on any of these clusters is a floating point version of the real - time code , and employs all possible instances of the code optimization ( as described in detail in the next section ) .",
    "high performance computing involves breaking large amount of data into smaller blocks and then performing calculations in parallel on those data blocks .",
    "once these calculations are completed , the results are funneled to other processes that use them as input .",
    "the data passing between processes is handled by mpi . in order to turn moore s law into actual performance gain ,",
    "modern multiprocessor architectures include performance boosting features like multi - level caches , data prefetching , multiple execution units and special instruction sets for compute - intensive operations .      the intel processor s multi - core resources can be used optimally with the aid of optimized libraries such as the intel integrated performance primitives ( ipp ) library .",
    "this has helped us significantly to improve the performance of our code , compared to the use of other general purpose signal processing libraries ( e.g. fftw ) .",
    "our benchmark results show that the ipp based 1-d single precision real - to - complex fft is more than a factor of 3 times faster than the fftw , for transform lengths of interest to us ( fig .",
    "[ fig:4 ] ) .",
    "our real - time processing pipeline uses the ipp based 16-bit fixed point 1-d real fft .",
    "this is found to achieve the same compute throughput as the ipp 32-bit floating point fft , as it uses floating point arithmetic for the internal butterfly stages .",
    "however , the memory i / o throughput is reduced by a factor of two when using the fixed point version .",
    "the sustained real - time performance of the cluster requires stable , high speed data sharing between the three layers of nodes .",
    "the network performance of the cluster has been optimized and runs at a sustained rate of 240 + mb / s between any pair of nodes , using the dual gigabit connectivity offered by the two switches .",
    "this throughput comfortably takes care of all the real - time inter - node data transfer requirements @xmath2 both for forward transfer of data from the acquisition to the compute nodes and for transfer of results back from the compute nodes to the peripheral machines .",
    "the following three main aspects were found to be of importance in the network optimization .",
    "firstly , in a multi - processing environment , dedicating the network interrupt request to a given processor ( called irq affinity ) improves the resource sharing across various parallel processes . in our code",
    ", a single openmp thread handles all the network transfers , and at the hardware level all the network interrupts are localized to a single processor .",
    "secondly , since the host processor is interrupted for every network packet arrived , a reduction of the rate of interrupts helps to improve the transfer efficiency .",
    "this is controlled by adjusting the packet size or maximum transmission unit ( mtu ) . by the use of `` jumbo frames '' , where the mtu size was increased from the default value of 1.5 kb to upto 8 kb ,",
    "the overheads were reduced significantly , achieving as much as 30@xmath23 increase in network bandwidth ( shown in fig .",
    "[ fig:5 ] ) .",
    "all the network transfer in the final gsb code runs with a 8 kb packet size .",
    "thirdly , optimal network performance was also found to depend on the mode of transfer and the mpi communication protocol used .",
    "we found that the mpi many - to - many communication routine written using simultaneous pair - wise point - to - point nonblocking send - receive ( _ mpi@xmath47isend _ and _ mpi@xmath47irecv _ ) provides 5@xmath23 more throughput than the available collective communication calls like _",
    "further , we found that uni - directional transfer rates are 6@xmath23 more than the bi - directional transfer rates , and most importantly , the sustained network performance is much more stable and reliable .",
    "this was one of the main motivations for going for a separate layer of simple , inexpensive acquisition nodes , as compared to a model where the acquisition and computing is on the same set of nodes , as the former results in all the data transfers being unidirectional .      in order to fully utilize the power of the multi - core processors ,",
    "proper load balancing using multiple threads is a very important factor .",
    "care has to be taken during optimization to reduce the effect of thread synchronization delays .",
    "the multi - threaded parallel code of the gsb uses the following programming model :    \\1 . domain decomposition or thread - level parallelism : the compute intensive tasks ( e.g data reordering , fft , fringe and fstc corrections ) in a given pipeline use the data divided into small subsets , where each thread can process smaller pieces of data independently .",
    "\\2 . functional decomposition or task - level parallelism : the tasks with different functionalities are distributed on different sets of threads running in parallel , e.g. fft , mac @xmath20 beamformer and network transfer are on different threading blocks . the number of threads allocated to each task is adjusted to achieve optimal load balancing .",
    "further , in order to get optimal compute performance in tasks which are highly i / o intensive , the application needs to be tuned to ( i ) fulfill a majority of data accesses from processor cache ( ii ) reduce memory latency to obtain peak memory bandwidth . for this",
    "we have taken the following steps , illustrated by the section of the code that does data reordering , delay correction , followed by fft and fringe / fstc phase correction .",
    "first , data loading into cache is performed in contiguous blocks of size equal to a cache line ( 64 bytes ) .",
    "further , we have taken care of proper data alignment to prevent data split across the cache boundary , as data unaligned to cache line boundary leads to double memory access . for the code that fetches the 4 antennae data , instead of fetching the samples one at a time , we load them in chunks that are integer multiples of 4 bytes for the data reordering loop to operate on , which eliminates 3 extra cycles of memory access .",
    "the reordered data for the full buffer are loaded back into memory .",
    "when reading this data back for delay correction and fft , it is read in for one antenna at a time , in units that are multiples of the fft lengths .",
    "this ensures optimal cache locking , as the successive operations of conversion of 8 bit samples to 16 bits , 16-bit fixed point fft , fringe and fstc correction using pre - loaded phase look - up table are all implemented for these smaller segments of data .",
    "further , the phase corrected spectral data are directly loaded into memory using non - temporal store instructions , which in turn helps to reduce the cache pollution . as a result of all these optimizations , we have reduced the total memory i / o time to an extent that it takes only about 66% of the data buffer time , assuming the specified rate of @xmath44 5 gb / s for the processor to memory bandwidth .",
    "performance is a function of processor clock frequency and number of instructions executed per clock cycle . for a given processor architecture , performance of a code",
    "can be increased by reducing the number of instructions it takes to execute specific tasks .",
    "the simd technique allows for code vectorization via the use of a single instruction stream capable of operating on multiple data elements in parallel .",
    "for example , the 128-bit streaming simd extension ( sse ) instructions supported by intel s xeon processors , enable simultaneous processing of 16 adc data samples , each of 8 bits width .",
    "this improves the efficiency of data reordering section of the gsb code . for in - place fft and fringe correction , where the data samples are 16-bit wide for the fixed point version of the gsb code",
    ", 8 data elements can be processed simultaneously .",
    "there are 4 multiplications executed in a given instruction cycle .",
    "for this to happen successfully , the manipulation of data needs to be done with vector instructions , aligned at the 128-bit boundaries .",
    "further , special sse instructions are available that flush the phase corrected spectral data from the processor s registers directly to main memory , without going through the cache , thus minimizing cache pollution . for the mac operations ,",
    "the input data buffer is arranged so as to optimize cache blocking .",
    "the full vectorized mac loads 4 frequency channels ( complex samples ) for a given antenna in a single sse data register .",
    "this allows 4 mac operations ( complex multiplication followed by complex addition with the sum being in register ) to be carried out simultaneously , handling 4 frequency channels .",
    "after few integrations it is advantageous to write back the summed product directly into the memory to maintain the cache coherency and load the next set of 4 frequency channels which are still in the cache .     beamformer performance .",
    "the values listed on the side of the bars are the actual , achieved figures.,scaledwidth=60.0% ]    to reduce the memory bandwidth requirements and gain maximum compute benefits , the gsb real - time code is tuned to operate in the fixed point integer domain .",
    "the theoretical compute power available for integerized vector processing on a single layer-2 compute node is 76 gflops for fft ( which uses 4 threads ) and 57 gflops for mac @xmath20 beamformer ( which uses 3 threads ) .",
    "our optimized _ real - time _",
    "code is benchmarked to give a sustained performance of 35 gflops ( i.e. @xmath44 46@xmath23 of theoretical peak ) for fft and 54 gflops ( i.e. @xmath44 94@xmath23 of theoretical peak ) for mac @xmath20 beamformer , on a single compute node ( see fig .",
    "[ fig:6 ] ) .",
    "these are purely compute benchmarks , and do not include any i / o overheads .",
    "the factor of two reduction in the performance of the fft is due to the fact that the fixed point ipp based fft actually uses floating point arithmetic for its internal stages .",
    "the total achieved _ vector _ compute power for the full 16 nodes of layer-2 is 1.4 tflops .",
    "this achieved compute power is almost 3 times of the real - time requirement of 490 gflops .",
    "this is because , as explained in sect .",
    "[ sec:11 ] , about 66% of the time goes in i / o operations and the pure compute time available is only 33% .",
    "this signifies that without code vectorization , we would have been more than factor of 2 off from the real - time requirements .",
    "in the following we describe some of the main steps which have been carried out to test and validate the performance of the gsb , to get it ready for release as a regular backend for the gmrt .",
    "as explained earlier , the gsb code supports both 32-bit floating point and 16-bit fixed point operation .",
    "the primary trade - offs between these modes are that the floating point has better precision and higher dynamic range than the fixed point , and also has a shorter development cycle , since one does nt generally need to worry about issues such as overflow , underflow , and truncation / round - off errors , which can reduce the accuracy of the fixed point code . on the other hand ,",
    "fixed point code is almost always computationally faster , especially in the case of vectorized processors .",
    "hence , to optimize performance , the real - time version of the gsb code primarily uses fixed point computations upto the mac stage , after which the data are converted to floating point for the long - term accumulation .",
    "the off - line version of the gsb code is a fully floating point processing pipeline . in the real - time code ,",
    "the signal level is tuned to minimize the effect of finite word length , i.e the overflow on the most significant bits or quantization on the least significant bits .",
    "similarly , the integer fringe look - up table is properly scaled to fit the phase corrected spectral data into the lower significant half of a 32-bit register , after 16-bit multiplication .",
    "this eliminates the possibility of introducing bias by truncation .",
    "the correlation product is 32-bit wide , which is finally accumulated in floating point form , to avoid the chances of overflow during longer integrations .    ''",
    "symbols are for fixed point code , red `` @xmath20 '' symbols are for floating point code .",
    "the results are from data of 18 minutes duration , where the individual data samples have time and frequency resolutions of 2 seconds and 32.55 khz.,scaledwidth=80.0% ]        to check the numerical accuracy of the fixed point code , we have compared its results with those from the floating point code , using a recorded sample baseband data sets .",
    "[ fig:7 ] shows an example , where the ratio of mean to root - mean - square ( rms ) power as a function of spectral channel number for the auto spectrum of a single antenna , using the point source calibrator quasar 3c147 as a test source , is used as a comparison diagnostic .",
    "the individual data samples are of 2 seconds time resolution and 32.55 khz frequency resolution , and the total data span used for the computations is 18 m. the results from the fixed point and floating point codes are quite similar ( including the degradation due to rfi near channels 420 and 480 ) , except for a small degradation ( @xmath44 1.5% ) of the mean to rms ratio for the fixed point results compared to the floating point , which is due to a small increase in the rms due to the fixed point arithmetic .",
    "[ fig:8 ] shows a more direct and detailed comparison where the ratio of the complex visibility values obtained for the fixed and floating code is used as a diagnostic .",
    "the center of the distribution is shifted from [ 1,0 ] to [ 0,0 ] by removing the dc from the real part of the ratio . in the ideal case of no difference between the fixed and floating point calculations",
    ", all the data points would have ended up at [ 0,0 ] in this plot . the observed distribution shows a fairly symmetric spread around [ 0,0 ] , with a rms of 0.02 .",
    "there is a small offset in the mean value of less than 10% of the rms , which is due to slight inaccuracies in the scaling factors for the fixed and floating point pipelines .",
    "however , this is not of relevance here , as the numerical accuracy of the fixed point to the floating point comparison is represented by the spread of the numbers after division , rather than by the offset .",
    "this result again signifies a degradation ( of @xmath44 2% ) in going from floating point to fixed point arithmetic . this small degradation is a minor price for the significant computational speed - up that the fixed point code provides .      in order to validate the correlator mode of the gsb , we have compared the results from our off - line code with those from the swinburne difx correlator @xcite running on the same baseband recorded data sets . for validating our real - time code ,",
    "we have carried out extensive test runs with the gmrt , having the hardware backend running in parallel with the gsb . some of the results from these tests and comparisons are presented below .",
    "gsb baseband data recorded for the point source calibrator 3c147 was used to compare the performance between the gsb ( off - line floating point code ) and the difx , both running on the itanium cluster at the ncra .",
    "self and cross visibility spectra were computed for both codes , with time and frequency resolutions of 2 seconds and 32.55 khz , for the 13 minutes duration of the test data .",
    "sample auto spectra and cross spectra from individual baselines , were used as the comparison diagnostic ( see fig . [ fig:9 ] and [ fig:10 ] for examples of this ) .",
    "although these pipelines have very different implementations , with different delay correction models and different fringe correction procedures ( difx uses calc based delay generation and pre - fft fringe correction ) , there are no significant differences seen in the results .",
    "the overall shapes of the 2 seconds integrated auto spectra , after scaling by a constant factor to match the amplitudes , agree very well ( fig .",
    "[ fig:9 ] ) .",
    "the rms of the intensity fluctuations in individual spectral channels of these spectra , calculated over the 13 minutes duration of the test data , were also found to match to within 1% level .",
    "[ fig:10 ] shows a comparison of the signal to noise ratio ( mean visibility amplitude divided by the rms deviation ) for different spectral channels , for a given baseline from the data set . the mean and rms were computed from the 13 minutes duration of data .",
    "the agreement is found to be very good .",
    "all these comparisons provide an independent and valuable check of the gsb computational pipeline .",
    "we have carried out extensive tests to validate the performance of the real - time code of the gsb , including comparisons with the hardware backend running in parallel . here",
    "we report a sample comparative study that was done using observations at l - band ( 1280 - 1296 mhz ) of the gmrt for a duration of @xmath44 8.5 hrs on a quasar j1609 + 266 .",
    "the gsb was operated in 16 mhz bandwidth mode with 256 spectral channels across the band , whereas the gmrt hardware correlator generated 128 spectral channels across the same band .",
    "both the correlators were configured to compute 16 seconds integrated visibility products for both polarizations .",
    "[ fig:11 ] compares the auto spectra produced by these two backends , for 2 gmrt antennae .",
    "the pass band shapes are very similar .",
    "however , spectra from the hardware correlator show small scale undulations , whereas the gsb spectra are much smoother in nature .",
    "this illustrates the improved performance of the gsb with respect to quantization effects due to limited precision that affect the hardware backend ",
    "the gsb with 16-bit fringe multiplier has comparatively less quantization noise .",
    "the typical effect of this is @xmath44 20 to 50 % improvement in the rms noise in the final images made with gsb data .",
    "further detailed comparisons between the gmrt hardware backend and the gsb , to refine the quantitative measure of the improvement , are expected to be carried out once the gsb is available for regular use .",
    "the long - term stability of the results from the gsb are illustrated in fig .",
    "[ fig:12 ] , which shows the visibility phases from the gsb data for 7 baselines over a duration of 8.5 hrs .",
    "the phases show very small variations ( @xmath44 @xmath12 10 deg ) over the entire duration .",
    "the final image of the field made using the full duration gsb data is shown in fig .",
    "[ fig:13 ] .",
    "the central strong source , j1609 + 266 , has a strength of 4.83 jy .",
    "signal detected at half power beam width ( 15 ) away is 34 @xmath10jy , which is 1.5 times the thermal limit .",
    "the dynamic range achieved in this map is 1.4@xmath48 .    .",
    "( courtesy : subhashis roy),scaledwidth=100.0% ]            in fig .",
    "[ fig:14 ] we show an example of the enhanced spectral resolution capabilities of the gsb . full bandwidth , high resolution spectra with 8192 spectral channels from the gsb are compared against the regular 128 channel spectra .",
    "the data were taken on the calibrator source 3c48 at 244 mhz .",
    "the better detectability of the narrow spectral features in the high spectral resolution data is clearly demonstrated , allowing possibilities for better excision of such unwanted signals .      as discussed in sect .",
    "[ sec:3 ] , the gsb beamformer is designed to produce incoherent and coherent array beams simultaneously .",
    "the beam formation involves addition of pre or post detected samples from individual antennae .",
    "prior to addition , the power levels at the sampler inputs need to be equalized , which can be done with the help of programmable attenuators in the gmrt analog receiver chain .",
    "in addition , the gsb has its own variable gain amplifiers at the input of each sampler which are used for finer adjustments .",
    "further , for coherent beam formation , we need to calibrate out the antenna based phase offsets before the voltages can be added .",
    "antenna based phases are solved for using the recorded cross - correlations on a calibrator source , and then these phases are applied after the fft stage , as an additional term in the fringe and fstc corrections .",
    "[ fig:15 ] demonstrates the phasing of the array .",
    "s , folded using presto .",
    "pulsar main pulse and inter - pulse are now seen clearly as separate , sharp pulses .",
    "there is a small indication of scattering tail.,scaledwidth=100.0% ]    as an example of the incoherent array mode of operation of the gsb beamformer , fig .",
    "[ fig:16 ] shows the single pulse time series for the pulsar b0329 + 54 at 610 mhz .",
    "signals from both polarizations of 15 antennae were added after conversion to intensity in the beamformer .",
    "there were 512 channels across the bandwidth of 16.66 mhz , and the sampling rate was 30 @xmath10s ( which is a factor of 4 better than the best time resolution achievable with the hardware backend ) . during off - line analysis ,",
    "the recorded data were incoherently dedispersed to remove the effect of interstellar dispersion using the presto analysis package .",
    "the resulting time series clearly shows strong , single pulses .",
    "this demonstrates the basic operation of the gsb beamformer .",
    "[ fig:17 ] shows a sample result from the coherent phased array mode of operation of the gsb beamformer .",
    "psr b1937 + 21 , one of the fastest known millisecond pulsars with a periodicity of 1.55 ms , was observed at 325 mhz using 16 antennae , after phasing the array on a calibrator source .",
    "the voltage signals for each polarization were summed separately in the gsb , and the resulting signals were converted to intensities and added to obtain the total power signal .",
    "the data were recorded with 256 spectral channels across 16.66 mhz ( 65.1 khz spectral resolution ) , with 30.72 @xmath10s time resolution . during off - line analysis using presto",
    ", the data were incoherently dedispersed and then folded synchronously with the doppler corrected topocentric pulsar period to obtain the average pulse profile .",
    "the top left panel of the figure shows this average profile as 2 consecutive pulses .",
    "the profile has 51 time bins , and shows two emission components which appear quite broad and overlapping with each other because of the uncorrected dispersive effects within the individual spectral channels . for this pulsar , with a dm of 71.0398 pc / cc ,",
    "this residual smearing at 325 mhz for 65.1 khz spectral resolution works out to be 1.1 ms  this is substantial , compared to the pulsar period .",
    "the gsb has the capability to improve upon the above situation by using coherent dedispersion , as it provides for a mode where the pre - detected voltages from the coherent array sum for each polarization can be recorded for off - line processing .",
    "our coherent dedispersion pipeline first converts these spectral voltage data into the corresponding broadband time - series , by carrying out an inverse fft operation .",
    "the resulting voltage time series data are then put through the deconvolution process where we correct for the dispersion by multiplying the input data with the inverse transform of the ism dispersion kernel @xcite in the fourier domain .",
    "the corrected voltage time series data for both polarizations are then converted to intensities and added together to produce the total power time series , which is integrated to the desired time resolution .",
    "the improvement achieved from this processing is illustrated in fig .",
    "[ fig:18 ] , which shows the coherently dedispersed profile for psr b1937 + 21 , reduced to the same final time resolution ( 30 @xmath10s ) as in fig .",
    "[ fig:17 ] .",
    "the improvement in the shape of the profile between these two figures is striking , and illustrates the power of coherent dedispersion , which is one of the enhanced capabilities that the gsb provides .        for a quantitative comparison between the hardware backend and the gsb , fig .",
    "[ fig:19 ] shows the pulse profiles obtained for a millisecond pulsar j1300 + 1240 , whose period is 6.22 ms .",
    "the same set of 20 gmrt antennae were added in both the hardware backend and the gsb phased array beamformer , and the data recording was exactly concurrent in time .",
    "the hardware backend data have 256 spectral channels ( 62.5 khz spectral resolution ) and 128 @xmath10s time resolution , while the gsb data have 512 spectral channels ( 32.55 khz spectral resolution ) and 30.72 @xmath10s time resolution . in order to compare with the hardware backend ,",
    "the gsb data were degraded by a factor of 2 in spectral resolution and a factor of 4 in time resolution .",
    "the final folded profiles shown in fig .",
    "[ fig:19 ] are quite similar .",
    "the off - pulse mean values were subtracted from the original profiles and the these were scaled to the same amplitude to make the comparison . while the on - pulse deflections are same for the original profiles ,",
    "there is a @xmath44 30% lower off - pulse rms estimated for the gsb data with respect to the hardware backend .",
    "this is similar to the typical improvement in rms achieved for the imaging data with the gsb .",
    "besides providing enhanced flexibility in the basic parameter space , such as better time and frequency resolution and coherent dedispersion capabilities ( which have been demonstrated in the previous sections ) , the gsb also holds the promise of adding several new capabilities to the gmrt data processing pipeline .",
    "one of the most useful of these is the ability to add new algorithms for rfi detection and mitigation .",
    "rfi is an ever increasing problem for radio astronomy , especially at the lower frequencies which the gmrt operates at .",
    "there are several approaches to rfi detection and mitigation . as a preliminary attempt , aimed to tackle the impulsive , broad - band rfi that is more often seen at the gmrt",
    ", we have implemented a time - domain rfi blanker that acts on the pre - detected voltage data .",
    "we use the median of absolute deviation ( mad ) to derive an estimator for discriminating the outliers in the voltage data stream , rather than the more traditional approach that uses the variance .",
    "this is because the mad estimator is more robust in the presence of large outliers such as would be produced by strong rfi spikes .",
    "the mad for a block of n data points is defined as : @xmath49    where @xmath50 is the median for the n data points represented by the voltage samples , @xmath51 .",
    "the mad thus estimates the median of the absolute value of the deviation of individual samples from @xmath50 .",
    "the threshold for discrimination is derived from the mad estimator , assuming the underlying distribution for the rfi free voltage samples to be a normal distribution , and can be expressed as @xmath52    where @xmath53 is a user settable parameter , with typical values of 2.5 to 3.0 .",
    "the data samples crossing the threshold are replaced by pre - computed gaussian distributed noise samples , which are ensured to be independent for different antennae .    ''",
    "symbols represent data after filtering ; red , `` @xmath20 '' are data points before filtering.,scaledwidth=80.0% ]    '' symbols represent data after filtering ; red , `` @xmath20 '' are data points before filtering.,scaledwidth=80.0% ]        , showing the improvement after applying time - domain mad filtering , scaledwidth=80.0% ]    fig .",
    "[ fig:20 ] shows an example of testing this algorithm .",
    "gmrt data recorded at 156 mhz was chosen , as it is usually very much affected by rfi .",
    "this can be seen in the figure as the large spikes in the total intensity data , which is from a single antenna and has been averaged to 1 ms time resolution ( red curve with `` @xmath20 '' symbols ) .",
    "most of these rfi spikes are attributable to spark discharges from power lines , which are broadband and quasi - periodic in nature .",
    "this can be seen in the power spectrum of the intensity signal ( fig .",
    "[ fig:21 ] ) , which exhibits significant power at 50 hz , 100 hz and higher harmonics .",
    "the results from the mad filtering of the raw voltage data are also shown in fig .",
    "[ fig:20 ] and fig .",
    "[ fig:21 ] ( green curves with `` @xmath46 '' symbols ) @xmath2 the improvement in signal quality is quite significant .",
    "the fraction of data samples replaced by the filtering is only 2 - 3% .",
    "[ fig:22 ] presents the amplitude of fringe and delay corrected cross - visibility data for a short gmrt baseline , plotted in frequency - time space , from the same 156 mhz observations .",
    "all the patterns with periodic modulations seen in this figure are due to underlying rfi .",
    "the modulations are due to the fact that terrestrial sources get fringe rotated at the fringe frequency applied for the sky signal .",
    "the mad based rfi excision is also effective in filtering out most of these features ( fig .",
    "[ fig:23 ] ) , leaving behind a much cleaner data set .",
    "the raw data are off from the thermal - limit by factor of 10 , whereas the filtered results ( both the self power and cross - visibility data ) are off only by a factor of 2.5 .",
    "this results in an improvement in sensitivity by a factor of 4 , with a very small amount of data being discarded .",
    "there is significant scope for further improvements in filtering techniques that can be deployed with the gsb .    amongst other enhanced capabilities that the gsb can provide ,",
    "the gated correlator mode is of significant interest and potential .",
    "besides allowing the possibility of detecting low - level , off - pulse radio emission from the pulsars , this mode can allow pulsars , which are ideal point source phase calibrators , to be used for calibrating visibilities ( including in - field calibration capabilities ) .",
    "this has been recently demonstrated for the gsb , as part of the gmrt eor ( epoch of reionization ) experiment @xcite . in a similar vein",
    ", the gsb software can easily be adapted to provide the additional facility of gain calibration using a switching noise source at the front - end of each antenna .",
    "the gsb can also be used as a rfi localization tool , employing specialized near field imaging techniques to map out the location of rfi sources around the observatory .",
    "another specialized mode of the gsb that is expected to have wide ranging applications is the raw voltage recording mode .",
    "furthermore , the capability of producing multiple beams @xmath2 either from different sub - sets of antennae in incoherent addition mode , or multiple phased array beams covering different directions within the primary beam @xmath2 has significant potential for wide - field searches for pulsars and transients .",
    "the gsb , even with its enhanced features and extended parameter space , had a development cycle of about 3.5 years , whereas hardware correlators like the gmrt hardware correlator or the evla and alma correlators , typically have much longer design and development cycles , extending up to 10 years .",
    "considering that both hardware and software correlators benefit from moore s law , the 10 year design phase spans a factor of 128 for the hardware system , whereas the software design loses by factor of 4 only .",
    "thus , software backend design cycles stand to gain more from moore s law .",
    "hence , though the general - purpose computer is less efficient in terms of the gate count , with the aid of highly optimized code , faster development cycle and easy upgrade , software based processing appears to be a more cost effective solution .",
    "our current cost estimate for the gsb ( given in table [ tab:1 ] ) translates to $ 190 per correlator baseline ( this includes the cost of the acquisition also ) .",
    "furthermore , the compute to power ratio for our gsb implementation works to a fairly efficient value of 260 mflops / watt , based on the measured power consumption of the layer-2 nodes and the peak compute rating achieved by them . using the same rating",
    ", we get a compute - per - cost ratio of 45 mflops/$.    the gsb concept can be expanded to bigger sized backends . at the gmrt",
    ", we are exploring at possibilities of a 400 mhz bandwidth , 32 station correlator and beamformer .",
    "the 16 adc boards operating at 33 mhz bandwidth for 32 antennae can easily be reconfigured to support a 4-bit , 100 mhz , 16 antennae or a 4-bit , 200 mhz , 8 antennae backend .",
    "based on the design experience with the 33 mhz gsb , our extrapolated figures for a 400 mhz version ( gsb - hbw ) are also given in table [ tab:1 ] .",
    "the cost of the compute engines for the current 33 mhz design and also for the projected 400 mhz design are tabulated in the last column .",
    "the cost for the 400 mhz design is for 2011 estimates , considering a factor of 4 performance gain due to operation of moore s law . with present technology",
    ", the 400 mhz backend will require ten - fold more resources than our current gsb system . in order to benefit from the moore s law predicted cost / performance gain , we also need to adapt new computing technology .",
    "looking towards the future , intel s new i7 core architecture with integrated memory controller to reduce memory latency and to operate at higher memory bandwidth ( 25 gb / s ) will be a big aid for data - intensive higher bandwidth backends .",
    "there is also expected to be a large jump in vector processing capability with the introduction of 256-bit advanced vector extension ( avx ) registers .",
    "this will provide a big functional enhancement in arithmetic as well as data processing aspects .",
    "furthermore , gpu ( graphical processing unit ) based processing is going to be a big driving force towards machines that can provide 1 tflop per compute node .",
    "10 g base - t ten gigabit ethernet is going to bridge the gap in high speed data sharing .",
    "all these upcoming advancements in the computing industry will extend moore s law well into the next decade and , rather than increasing the number of processing elements linearly with bandwidth and/or number of antennae / baselines , they will make software signal processing using assembled low - cost clusters with gpus more and more attractive as a solution to the growing needs .",
    "[ tab:1 ]    .current gsb cost budget along with the extrapolated figures for 400 mhz [ cols=\"^,^,^,^,^,^,^,^,^,^,^,^,^,^,^,^,^,^ \" , ]     @xmath54 : this is the figure for the required compute power .",
    "+ @xmath55 : the dollar value shown is the dollars at the time of purchase .",
    "we have described our design and implementation of a 33 mhz bandwidth , 32 station , dual polarization , fully _ real - time _ software backend system for the gmrt .",
    "our approach has allowed relatively rapid development of a fairly sophisticated and flexible backend receiver system , which will greatly enhance the productivity of the gmrt .",
    "we have successfully validated the backend and it has now been released for regular use . we have also demonstrated some of the versatile features of the new backend , and described its capabilities for rfi mitigation and other enhanced features .",
    "we believe this is the first instance of a software based @xmath56 backend for an intermediate sized array like the gmrt .",
    "our approach holds promise for future developments for bigger radio telescopes and wider bandwidths .",
    "we would like to thank many of the staff members from ncra who have helped at various stages of implementing the gsb as an observatory backend .",
    "we acknowledge santaji katore and nilesh raskar for their contribution towards building a graphical user interface for the gsb .",
    "we are grateful to subhashis roy for help in analyzing and debugging the performance of the gsb , working on several test data sets , and also for providing the high dynamic range image of the j1609 + 266 field .",
    "we thank sharwari kulkarni for her contribution in implementing the narrow - band module for the gsb , to support the high spectral resolution observing mode .",
    "we specially thank the computer group at the gmrt ( mangesh umbarje and sumit mirajkar ) for extensive help at various stages of assembling and testing the gsb cluster and network .",
    "we thank rajaram nityananda and jayaram chengalur for their useful comments during the design phase .",
    "we also thank dipankar bhattacharya for useful discussions during implementation of the coherent dedispersion pipeline of the gsb .",
    "we acknowledge adam deller for helping in the comparative study of the results from the gsb with the difx .",
    "finally , we thank b. ajithkumar and his group at the gmrt , for building the new 32 mhz baseband system that feeds the analog signals to the gsb .",
    "the gmrt is run by the national centre for radio astrophysics of the tata institute of fundamental research .",
    "gupta , y. , gothoskar , p. b. , joshi , b. c. , vivekanand , m. , swain , r. , sirothia , s. and bhat , n.d.r .",
    ", 2000 , _ pulsar research with the gmrt : a status report",
    "_ , iau colloq .",
    "177 , pulsar astronomy , ed .",
    "m. kramer , n. wex , and r. wielebinski ( asp conf .",
    "202 ; san francisco : asp ) , 277 .",
    "pen , ue - li , chang , tzu - ching , hirata , c. m. , peterson , j. b. , roy , j. , gupta , y. , odegova , j. and sigurdson , k. , 2009 , _ the gmrt eor experiment : limits on polarized sky brightness at 150 mhz _ ,",
    "mnras , 399 , 181 .",
    "phillips c. j. , deller a. , amy s. w. , tingay s. j. , tzioumis a. k. , reynolds j. e. , jauncey d. l. , stevens j. , ellingsen s. p. , dickey j. , fender r. p. , tudose v. , nicolson g. d. , 2007 , _ detection of compact radio emission from circinus x-1 with the first southern hemisphere e - vlbi experiment _ , mnras , 380 , 11 .",
    "romein , j. w. , broekema , p. c. , meijeren , e. van , schaaf , k. van der and zwart , w. h. , 2006 , _ astronomical real - time streaming signal processing on a blue gene / l supercomputer _ , acm symposium on parallel algorithims and architectures ( spaa 2006 ) , 59 , cambridge , ma .",
    "swarup , g. , ananthakrishnan , s. , subrahmanya , c. r. , rao , a. p. , kulkarni , v. k. and kapahi , v. k.,1997 , _ the giant metrewave radiotelescope _ , in high sensitivity radio astronomy , ed .",
    "n. jackson and r. j. davis ( cambridge : cambridge university press ) ."
  ],
  "abstract_text": [
    "<S> the new era of software signal processing has a large impact on radio astronomy instrumentation . </S>",
    "<S> our design and implementation of a 32 antennae , 33 mhz , dual polarization , fully real - time software backend for the gmrt , using only off - the - shelf components , is an example of this . </S>",
    "<S> we have built a correlator and a beamformer , using pci - based adc cards and a linux cluster of 48 nodes with dual gigabit inter - node connectivity for real - time data transfer requirements . </S>",
    "<S> the highly optimized compute pipeline uses cache efficient , multi - threaded parallel code , with the aid of vectorized processing . </S>",
    "<S> this backend allows flexibility in final time and frequency resolutions , and the ability to implement algorithms for radio frequency interference rejection . </S>",
    "<S> our approach has allowed relatively rapid development of a fairly sophisticated and flexible backend receiver system for the gmrt , which will greatly enhance the productivity of the telescope . in this paper </S>",
    "<S> we describe some of the first lights using this software processing pipeline . </S>",
    "<S> we believe this is the first instance of such a real - time observatory backend for an intermediate sized array like the gmrt . </S>"
  ]
}