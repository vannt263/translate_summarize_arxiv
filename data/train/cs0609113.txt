{
  "article_text": [
    "the notion of recognizability emerged in the 1960s ( eilenberg , mezei , wright , and others , cf .",
    "@xcite ) and has been the subject of considerable attention since , notably because of its close connections with automata - theoretic formalisms and with logical definability , cf .",
    "@xcite for some early papers .",
    "recognizability was first considered for sets ( languages ) of finite words , cf . @xcite and the references contained in op .",
    "the general idea is to use the algebraic structure of the domain , say , the monoid structure on the set of all finite words , to describe some of its subsets , and to use algebraic considerations to discuss the combinatorial or logical properties of these subsets .",
    "more precisely , a set of words is said to be recognizable if it is a union of classes in a ( locally ) finite congruence .",
    "the same concept was adapted to the case of finite trees , traces , finite graphs , etc , cf .",
    "@xcite , where it always entertains close connections with logical definability @xcite .",
    "it follows rather directly from this definition of ( algebraic ) recognizability that a finite  or finitary  algebraic structure can be canonically associated with each recognizable subset @xmath1 , called its syntactic structure",
    ". moreover , the algebraic properties of the syntactic structure of @xmath1 reflect its combinatorial and logical properties .",
    "the archetypal example is that of star - free languages of finite words : they are exactly the languages whose syntactic monoid is aperiodic , cf .",
    "they are also exactly the languages that can be defined by a first - order sentence of the predicate @xmath2 ( @xmath3 $ ] ) , cf .",
    "@xcite , and the languages that can be defined by a temporal logic formula , cf .",
    "in particular , every algorithm we know for deciding the @xmath3$]-definability of a regular language @xmath1 , works by checking , more or less explicitly , whether the syntactic monoid of @xmath1 is aperiodic .",
    "let @xmath0 be a ranked alphabet . in this paper , we are interested in sets of finite @xmath0-labeled trees , or tree languages .",
    "it has been known since the 1960s @xcite that the tree languages that are definable in monadic second order logic are exactly the so - called regular tree languages , that is , those accepted by bottom - up tree automata . moreover , deterministic tree automata suffice to accept these languages , and each regular tree language admits a unique , minimal deterministic automaton . from the algebraic point of view , the set of all @xmath0-labeled trees can be viewed in a natural way as a ( free ) @xmath0-algebra , where @xmath0 is now seen as a signature . moreover",
    ", a deterministic bottom - up tree automaton can be identified with a finite @xmath0-algebra , with some distinguished ( final ) elements .",
    "thus regular tree languages are also the recognizable subsets of the free @xmath0-algebra .",
    "the situation however is not entirely satisfying , because we know very little about the structure of finite @xmath0-algebras , and very few classes of tree languages have been characterized in algebraic terms , see @xcite for attempts to use @xmath0-algebra - theoretic considerations ( and some variants ) for the purpose of classifying tree languages . in particular , the important problem of deciding whether a regular tree language is @xmath3$]-definable remained open @xcite . based on the word language case ,",
    "it is tempting to guess that an answer to this problem ought to be found using algebraic methods .    in this paper",
    ", we introduce a new algebraic framework to handle tree languages .",
    "more precisely , we consider algebras called preclones ( they lack some of the operations and axioms of clones @xcite ) .",
    "precise definitions are given in section  [ sec - preclones ] .",
    "let us simply say here that , in contrast with the more classical monoids or @xmath0-algebras , preclones have infinitely many sorts , one for each integer @xmath4 . as a result , there is no nontrivial finite preclone .",
    "the corresponding notion is that of finitary preclones , that have a finite number of elements of each sort .",
    "an important class of preclones is given by the transformations @xmath5 of a set @xmath6 .",
    "the elements of sort ( or rank ) @xmath7 are the mappings from @xmath8 into @xmath6 and the ( preclone ) composition operation is the usual composition of mappings .",
    "note that @xmath5 is finitary if @xmath6 is finite .",
    "it turns out that the finite @xmath0-labeled trees can be identified with the @xmath9-sort of the free preclone generated by @xmath0 .",
    "the naturally defined syntactic preclone of a tree language @xmath1 is finitary if and only if @xmath1 is regular .",
    "in fact , if @xmath10 is the syntactic @xmath0-algebra of @xmath1 , the syntactic preclone is the sub - preclone of @xmath11 generated by the elements of @xmath0 ( if @xmath12 is an operation of rank @xmath13 , it defines a mapping from @xmath14 into @xmath10 , and hence an element of sort @xmath13 in @xmath11 ) .",
    "note that this provides an effectively constructible description of the syntactic preclone of @xmath1 .",
    "it is important to note that the class of recognizable tree languages in the preclone - theoretic sense , is exactly the same as the usual one  we are simply adding more algebraic structure to the finitary minimal object associated with a regular tree language , and thus , we give ourselves a more expressive language to capture families of tree languages .    in order to justify the introduction of such an algebraic framework",
    ", we must show not only that it offers a well - structured framework , that accounts for the basic notions concerning tree languages , but also that it allows the characterization of interesting classes of tree languages .",
    "the first objective is captured in the definition of varieties of tree languages , and their connection with pseudovarieties of finitary preclones , by means of an eilenberg - type theorem .",
    "this is not unexpected , but it requires combinatorially much more complex proofs than in the classical word case , the details of which can be found below in section  [ sec eilenberg ] .    as for the second objective ,",
    "we offer several elements .",
    "first the readers will find in this paper a few simple but hopefully illuminating examples , which illustrate similarities and differences with the classical examples from the theory of word languages .",
    "second , we discuss a couple of important recent results on the characterization of certain classes of tree languages : one concerns the tree languages that are definable in the first - order logic of successors ( @xmath15 ) , and is due to benedikt and sgoufin @xcite ; the second one concerns the tree languages defined in the logics @xmath16 and @xmath17 , and is due to bojaczyk and walukiewicz @xcite .",
    "neither of these remarkable results can be expressed directly in terms of syntactic @xmath0-algebras ; neither mentions preclones ( of course ) but both use mappings of arity greater than 1 on @xmath0-algebras , that is , they can be naturally expressed in terms of preclones , as we explain in sections  [ sec fosuc ] and [ sec efex ] .",
    "it is also very interesting to note that the conditions that characterize these various classes of tree languages include the semigroup - theoretic characterization of their word language analogues , but can not be reduced to them .",
    "another such result , and that was our original motivation to introduce the formalism of preclones , is a nice algebraic characterization of @xmath3$]-definable tree languages ( and a number of extensions of @xmath3 $ ] , such as the introduction of additional , modular quantifiers ) , briefly discussed in section  [ sec foinf ] .",
    "let us say immediately that we do not know yet whether this characterization can be turned into a decision algorithm ! in order to keep this paper within a reasonable number of pages , this characterization will be the subject of another paper by the same authors @xcite .",
    "the main results of this upcoming paper can be found , along with an outline of the present paper , in @xcite .",
    "to summarize the plan of the paper , section  [ algebraic ] introduces the algebraic framework of preclones , discussing in particular the all - important cases of free preclones , in which tree languages live ( section  [ sec free preclone ] ) , and of preclones associated with tree automata ( section  [ sec examples preclones ] ) .",
    "section  [ sec representation ] discusses in some details the notion of finite determination for a preclone , a finiteness condition different from being finitary , which is crucial in the sequel .",
    "section  [ sec magmoids ] is included for completeness ( and can be skipped at first reading ) : its aim is to make explicit the connection between our preclones and other known algebraic structures , namely magmoids and strict monoidal categories .",
    "recognizable tree languages are the subject of section  [ grand sec recog ] . here",
    "tree languages are meant to be any subset of some @xmath18 , and the preclone structure on @xmath19 naturally induces a notion of recognizability , as well as a notion of syntactic preclone ( section  [ sec recog ] ) . as pointed out earlier , the usual recognizable tree languages , that is , subsets of @xmath20 , fall nicely in this framework , and there is a tight connection between the minimal automaton of such a language and its syntactic preclone ( section  [ sec regular tree ] ) .",
    "specific examples are given in section  [ sec more examples trees ] .",
    "pseudovarieties of finitary preclones are discussed in detail in section  [ sec psv ] . as it turns out , this notion is not a direct translate of the classical notion for semigroups or monoids , due to the infinite number of sorts .",
    "the technical treatment of these classes is rather complex , and we deal with it thoroughly , since it is the foundation of our construction .",
    "we show in particular that pseudovarieties are characterized by their finitely determined elements ( section  [ sec psv vs fd ] ) , and we describe the pseudovarieties generated by a given set of finitary preclones , showing in particular that membership in a 1-generated pseudovariety is decidable ( section  [ psv generated ] ) .    finally , we introduce varieties of tree languages and we establish the variety theorem in section  [ sec eilenberg ] . section  [ sec examples tree varieties ] presents the examples described above , based on the results by benedikt and sgoufin @xcite and by bojaczyk and walukiewicz @xcite .",
    "in this section , we introduce the notion of preclones , a multi - sorted kind of algebra which is our central tool in this paper . in the sequel ,",
    "if @xmath7 is an integer , @xmath21 $ ] denotes the set of integers @xmath22 .",
    "in particular , @xmath23 $ ] denotes the empty set .",
    "let @xmath6 be a set and let @xmath24 denote the set of @xmath7-ary transformations of @xmath6 , that is , mappings from @xmath8 to @xmath6 .",
    "let then @xmath5 be the sequence of sets of transformations @xmath25 , which will be called the _ preclone of transformations _ of @xmath6 .",
    "the set @xmath26 of transformations of @xmath6 is a monoid under the composition of functions .",
    "composition can be considered on @xmath5 in general : if @xmath27 and @xmath28 ( @xmath29 ) , then the composite @xmath30 , defined in the natural way , is an element of @xmath31 where @xmath32}m_{i}$ ] : @xmath33 for all @xmath34 , @xmath35 , @xmath36 .",
    "this composition operation and its associativity properties are exactly what is captured in the notion of a preclone .    in general , a _",
    "preclone _ is a many - sorted algebra @xmath37 .",
    "the elements of the sets @xmath38 , where @xmath7 ranges over the nonnegative integers , are said to have _ rank _ @xmath7 . the _ composition operation",
    "_ @xmath39 associates with each @xmath40 and @xmath41 , an element @xmath42 , of rank @xmath43}m_i$ ] .",
    "we usually write @xmath44 for @xmath45 . finally , the constant @xmath46 is in @xmath47 .",
    "moreover , we require the following three equational axioms : @xmath48 where @xmath49 are as above , @xmath50 ( @xmath51 $ ] ) , and if we denote @xmath52}m_{j}$ ] by @xmath53}$ ] , then @xmath54}+1 } \\oplus \\cdots \\oplus h_{m_{[i]}}$ ] for each @xmath55 $ ] ; @xmath56 where @xmath40 and @xmath46 appears @xmath7 times on the left hand side of the last equation .",
    "note that axiom ( 1 ) generalizes associativity , and axioms ( 2 ) and ( 3 ) can be said to state that @xmath46 is a neutral element .",
    "the elements of rank 1 of a preclone form a monoid .",
    "it is immediately verified that @xmath5 , the preclone of transformation of a set @xmath6 , is indeed a preclone for the natural composition of functions , with the identity function @xmath57 as @xmath46 .",
    "preclones are an abstraction of sets of @xmath7-ary transformations of a set , which generalizes the abstraction from transformation monoids to monoids .",
    "clones @xcite , or equivalently , lawvere theories @xcite are another more classical abstraction .",
    "readers interested in the comparison between clones and preclones will have no difficulty tracing their differences in the sequel .",
    "we will simply point out here the fact that , in contrast with the definition of the clone of transformations of @xmath6 , each of the @xmath58 arguments of the composite @xmath59 above is used in exactly one of the @xmath60 s , the first @xmath61 in @xmath62 , the next @xmath63 in @xmath64 , etc .",
    "we observe that a preclone with at least one element of rank greater than 1 must have elements of arbitrarily high rank , and hence can not be finite .",
    "we say that a preclone @xmath10 is _ finitary _ if and only if each @xmath38 is finite . for instance , the preclone of transformations @xmath5 is finitary if and only if the set @xmath6 is finite .    the notions of _ morphism _ between preclones , _ sub - preclone _ , _ congruence _ and _ quotient _ are defined as usual @xcite .",
    "note that , as is customary for multi - sorted algebras , a morphism maps elements of rank @xmath7 to elements of the same rank , and a congruence only relates elements of the same rank .    to facilitate discussions , we introduce the following short - hand notation .",
    "an @xmath7-tuple @xmath65 of elements of @xmath10 will often be written as a formal @xmath66-sum : @xmath67 . moreover , if @xmath68 ( @xmath29 ) , we say that @xmath69 has _ total rank",
    "_ @xmath70}m_{i}$ ] . finally , we denote by @xmath71 the set of all @xmath7-tuples of total rank @xmath58 . with this notation , @xmath72 .",
    "the @xmath7-tuple @xmath73 is denoted by @xmath74 .",
    "if @xmath75 is a subset of @xmath10 , we also denote by @xmath76 the set of @xmath7-tuples of elements of @xmath75 , of total rank @xmath58 .",
    "observe that a preclone morphism @xmath77 , naturally extends to a map @xmath78 for each @xmath79 , by mapping @xmath69 to @xmath80 .    for technical reasons , it will often be preferable to work with pairs @xmath81 consisting of a preclone @xmath10 and a ( possibly empty ) set @xmath82 of generators of @xmath10 .",
    "we call such pairs _ preclone - generators pairs _ , or .",
    "the notions of morphisms and congruences must be revised accordingly : in particular , a morphism of  from @xmath81 to @xmath83 must map @xmath82 into @xmath84 .",
    "a @xmath85-pair @xmath81 is said to be finitary if @xmath10 is finitary and @xmath82 is finite .    besides preclones of transformations of the form @xmath24 , fundamental examples of preclones and  are the free preclones and the preclones associated with a tree automaton .",
    "these are discussed in the next sections .",
    "let @xmath0 be a ranked alphabet , say , @xmath86 , and let @xmath87 be a sequence of variable names .",
    "we let @xmath88 be the set of finite trees whose inner nodes are labeled by elements of @xmath0 ( according to their rank ) , whose leaves are labeled by elements of @xmath89 , and whose _ frontier _ ( the left to right sequence of variables appearing in the tree ) is the word @xmath90 : that is , each variable occurs exactly once , and in the natural order .",
    "note that @xmath20 is the set of finite @xmath0-labeled trees .",
    "we let @xmath91 .",
    "( 49,38)(0,-38 ) ( n0)(24.0,-5.0 )    ( n1)(8.0,-25.0 )    ( n2)(40.0,-25.0 )    ( n0,n1 )    ( n1,n2 )    ( n0,n2 )    ( n3)(11.0,-25.0 )    ( n4)(11.0,-27.0)@xmath92    ( n5)(19.0,-25.0 )    ( n6)(19.0,-27.0)@xmath93    ( n9)(26.5,-27.0)@xmath94    ( n7)(34.0,-25.0 )    ( n8)(34.0,-27.0)@xmath95    ( n3,n4 )    ( n5,n6 )    ( n7,n8 )    ( n9)(24.0,-17.0)@xmath96    ( 49,38)(0,-38 ) ( n0)(24.0,-5.0 )    ( n1)(8.0,-25.0 )    ( n2)(40.0,-25.0 )    ( n0,n1 )    ( n1,n2 )    ( n0,n2 )    ( n3)(11.0,-25.0 )    ( n5)(19.0,-25.0 )    ( n9)(26.5,-27.0)@xmath94    ( n7)(34.0,-25.0 )    ( n9)(24.0,-17.0)@xmath96    ( n10)(8.0,-33.0 )    ( n11)(14.0,-33.0 )    ( n12)(16.0,-33.0 )    ( n13)(22.0,-33.0 )    ( n14)(31.0,-33.0 )    ( n15)(37.0,-33.0 )    ( n3,n10 ) ( n3,n11 ) ( n11,n10)@xmath62    ( n5,n12 ) ( n5,n13 ) ( n13,n12)@xmath64    ( n7,n14 ) ( n7,n15 ) ( n15,n14)@xmath97    if @xmath98 and @xmath99 , the composite tree @xmath100 is obtained by substituting the root of the tree @xmath60 for the variable @xmath101 in @xmath96 for each @xmath102 , and renumbering consecutively the variables in the frontiers of @xmath103 .",
    "let also @xmath104 be the tree with a single vertex , labeled @xmath105 .",
    "then @xmath106 is a preclone .",
    "each letter @xmath12 of rank @xmath7 can be identified with the tree with root labeled @xmath107 , where the root s children are leaves labeled @xmath108 .",
    "it is easily verified that every rank - preserving map from @xmath0 to a preclone @xmath10 can be extended in a unique fashion to a preclone morphism from @xmath19 into @xmath10 .",
    "that is :    @xmath19 is the free preclone generated by @xmath0 , and @xmath109 is the free @xmath85-pair generated by @xmath0 .    if @xmath110 for each @xmath111 , then @xmath112 for all @xmath111 , and @xmath113 can be assimilated with the set of all finite words on the alphabet @xmath114 .",
    "if at least one @xmath115 with @xmath116 is nonempty , then infinitely many @xmath88 are nonempty , and if in addition @xmath117 , then each @xmath118 is nonempty .",
    "we already discussed preclones of transformations and free preclones .",
    "the next important class of examples is that of preclones ( and ) associated with @xmath0-algebras and tree automata .",
    "we also discuss a few simple examples of preclones that will be useful in the sequel .",
    "let @xmath0 be a ranked alphabet as above and let @xmath6 be a _",
    "@xmath0-algebra _ : that is , @xmath6 is a set and each element @xmath119 defines an @xmath7-ary transformation of @xmath6 , _",
    "i.e. _ , a mapping @xmath120 . recall that @xmath6 , equipped with a set @xmath121 of _ final states _ , can also be described as a ( deterministic , bottom - up ) _ tree automaton _ accepting trees in @xmath122 , cf .",
    "@xcite .",
    "more precisely , the mapping @xmath123 induces a morphism of @xmath0-algebras from @xmath20 , viewed here as the initial @xmath0-algebra ( _ i.e. _ , the algebra of @xmath0-terms ) , to @xmath6 , say , @xmath124 , and the tree language accepted by @xmath6 is the set @xmath125 of trees which evaluate to an element of @xmath126 .",
    "now , since the elements of @xmath127 can be viewed also as elements of @xmath24 , the mapping @xmath128 also extends to a preclone morphism @xmath129 , whose restriction to the rank 0 elements is exactly the morphism @xmath130 .",
    "the range of @xmath131 is called the _ preclone associated with @xmath6 _ , and the _ @xmath85-pair associated with @xmath6 _ , written @xmath132 , is the pair @xmath133 .",
    "we observe in particular that a morphism of @xmath0-algebras @xmath134 induces a morphism of  @xmath135 in a functorial way .",
    "conversely , if @xmath6 is a set and @xmath129 is a preclone morphism such that @xmath136 , letting @xmath137 endows the set @xmath6 with a structure of @xmath0-algebra , for which the associated preclone is the range of @xmath131 .    in the sequel , when discussing decidability issues concerning preclones , we will say that a preclone is _ effectively given _ if it is given as the preclone associated with a finite @xmath0-algebra @xmath6 , that is , by a finite set of generators in @xmath5 . by definition ,",
    "such a preclone is finitary .",
    "the following examples of preclones and  will be discussed throughout the rest of this paper .",
    "[ define texists ] let @xmath138 be the 2-element set @xmath139 , and let @xmath140 be the subset of @xmath141 whose rank @xmath7 elements are the @xmath7-ary  function and the @xmath7-ary constant @xmath142 , written respectively @xmath143 and @xmath144 .",
    "one verifies easily that @xmath140 is a preclone , which is generated by the binary @xmath145 function and the nullary constants @xmath146 and @xmath147 .",
    "that is , if @xmath0 consists of these three generators , @xmath140 is the preclone associated with the @xmath0-automaton whose state set is @xmath138 .",
    "moreover , the rank 1 elements of @xmath140 form a 2-element monoid , isomorphic to the multiplicative monoid @xmath148 , and known as @xmath149 in the literature on monoid theory , e.g. @xcite .",
    "[ define tp ] let @xmath150 be an integer , @xmath151 and let @xmath152 .",
    "we let @xmath153 be the subset of @xmath154 whose rank @xmath7 elements ( @xmath155 ) are the mappings @xmath156 for @xmath157 .",
    "it is not difficult to verify that @xmath153 is a preclone , and that it is generated by the nullary constant 0 , the unary increment function @xmath158 and the binary sum @xmath159 .    as in example",
    "[ define texists ] , @xmath153 can be seen as the preclone associated with a @xmath150-state automaton . moreover , its rank 1 elements form a monoid isomorphic to the cyclic group of order @xmath150 .    [ define tpath ] let again @xmath139 , and let @xmath160 be the subset of @xmath141 whose rank @xmath9 elements are the nullary constants @xmath146 and @xmath147 , and the rank @xmath7 elements ( @xmath161 ) are the @xmath7-ary constants @xmath144 and @xmath162 , and the @xmath7-ary partial disjunctions @xmath163 ( if @xmath164 $ ] , @xmath163 is the disjunction of the @xmath102-th arguments , @xmath165 ) .",
    "one verifies easily that @xmath160 is a preclone , which is generated by the binary @xmath145 function , the nullary constants @xmath146 and @xmath147 , and the unary constant @xmath166 .",
    "the rank 1 elements of @xmath160 form a 3-element monoid , isomorphic to the multiplicative monoid @xmath167 with @xmath168 for @xmath169 , known as @xmath170 in the literature on monoid theory , e.g. @xcite .",
    "section [ preclone vs tree automata ] shows the importance of the representation of preclones as preclones of transformations .",
    "it is not difficult to establish the following analogue of cayley s theorem .",
    "[ prop - rep1 ] every preclone can be embedded in a preclone of transformations .",
    "suppose that @xmath10 is a preclone and let @xmath6 be the disjoint union of the sets @xmath171 , @xmath172 . for each @xmath173",
    ", let @xmath174 be the function @xmath175 given by @xmath176 the assignment @xmath177 defines an injective morphism @xmath178 .",
    "this result however is not very satisfactory : it does not tell us whether a finitary preclone can be embedded in the preclone of transformations of a finite set .",
    "it is actually not always the case , and this leads to the following discussion .",
    "let @xmath179 .",
    "we say that a preclone @xmath10 is _ @xmath180-determined _ if distinct elements can be separated by @xmath180-ary equations .",
    "formally , let @xmath181 denote the following equivalence relation : for all @xmath182 ( @xmath4 ) , @xmath183 note that for each @xmath184 , @xmath181 is the identity relation on @xmath185 .",
    "we call @xmath10 _ @xmath180-determined _ if the relation @xmath181 is the identity relation on each @xmath171 , @xmath172 , and we say that @xmath10 is _ finitely determined _ if it is @xmath180-determined for some integer @xmath180 .",
    "we also say that a @xmath85-pair @xmath81 is @xmath180-determined ( resp .",
    "finitely determined ) if @xmath10 is .",
    "the preclone of transformations of a set is 0-determined .",
    "we observe the two following easy lemmas .    for each @xmath180 , @xmath181 is a congruence relation .",
    "let @xmath186 be @xmath187-equivalent .",
    "for each @xmath188 $ ] , let @xmath189 , such that @xmath190 . we want to show that @xmath191 .",
    "let @xmath32}m_{i}$ ] and let @xmath192 for some @xmath193 . then @xmath194 is an @xmath58-tuple , and we let @xmath195 be the tuple of the first @xmath61 terms of @xmath194 , @xmath196 consist of the next @xmath63 elements , etc , until @xmath197 , which consists of the last @xmath198 elements of @xmath194 . note that each @xmath199 lies in some @xmath200 and that @xmath201}\\ell_{i } = \\ell$ ] . in particular",
    ", @xmath202 for each @xmath102 and we have @xmath203    [ simk k determined ] for each @xmath179 , the quotient preclone @xmath204 is @xmath180-determined .",
    "let @xmath205 and let @xmath206,[g]\\in t_{n}$ ] , where @xmath206 $ ] denotes the @xmath181-equivalence class of @xmath96 ( necessarily in @xmath38 ) .",
    "let @xmath193 and assume that @xmath206\\cdot [ h ] = [ g]\\cdot [ h]$ ] for each @xmath207 .",
    "then @xmath208 for each @xmath194 .",
    "but @xmath209 and @xmath210 lie in @xmath211 , and we already noted that @xmath187 is the identity relation on @xmath211 ( since @xmath193 ) .",
    "thus @xmath212 for all @xmath213 , and since this holds for each @xmath184 , we have @xmath214 , and hence @xmath206 = [ g]$ ] .",
    "we say that a preclone morphism @xmath215 is _ @xmath180-injective _ if it is injective on each @xmath211 with @xmath216 .",
    "the next lemma , relating @xmath180-determination and @xmath180-injectivity , will be used to discuss embeddability of a finitary preclone in the preclone of transformations of a finite set .",
    "[ prop - k - injective ] let @xmath10 be a @xmath180-determined preclone .",
    "if @xmath215 is a @xmath180-injective morphism , then @xmath217 is injective .    if @xmath218 for some @xmath219 , then @xmath220 , for all @xmath213 with @xmath184 .",
    "since @xmath217 is @xmath180-injective , it follows @xmath212 for all @xmath213 with @xmath193 , and since @xmath10 is @xmath180-determined , this implies @xmath221 .",
    "[ prop - emb - finite ] let @xmath10 be a finitary and finitely determined preclone .",
    "then there is a finite set @xmath6 such that @xmath10 embeds in @xmath5 .",
    "if in addition @xmath10 is 0-determined , the set @xmath6 can be taken equal to @xmath222 .",
    "we modify the construction in the proof of proposition  [ prop - rep1 ] .",
    "let @xmath223 be such that @xmath10 is @xmath180-determined , and let @xmath224 , where the sets @xmath225 are assumed to be pairwise disjoint and @xmath226 is a new symbol , not in any of those sets .",
    "for each @xmath40 ( @xmath4 ) , let @xmath227 be the function defined by @xmath228 it is easy to check that @xmath217 is a morphism .",
    "by lemma  [ prop - k - injective ] , @xmath217 is injective .    to conclude",
    ", we observe that if @xmath229 , we can choose @xmath230 since @xmath231 is possible if and only if each @xmath232 .    for later use",
    "we also note the following technical results .",
    "[ prop - extension ] let @xmath10 and @xmath233 be preclones , with @xmath233 @xmath180-determined .",
    "let @xmath75 be a ( ranked ) generating set of @xmath10 and let @xmath234 be a rank - preserving map , whose range includes all of @xmath235 , for each @xmath184 .",
    "then @xmath217 can be extended to a preclone morphism @xmath236 iff for all @xmath237 , @xmath172 , and for all @xmath238 with @xmath184 , @xmath239    condition  ( [ eq - extension ] ) is obviously necessary , and we show that it is sufficient .",
    "let @xmath240 , @xmath4 . any possible image of @xmath96 by a preclone morphism",
    "is an element @xmath241 such that , if @xmath242 for some @xmath184 and if @xmath243 is such that @xmath244 , then @xmath245 . since @xmath233 is @xmath180-determined and each @xmath185 ( @xmath193 ) is in the range of @xmath217 , the element @xmath246 is completely determined by @xmath96 .",
    "that is , if an extension of @xmath217 exists , then it is unique .",
    "we now show the existence of this extension .",
    "we want to assign an image to an arbitrary element @xmath96 of @xmath10 , and we proceed by induction on the height of an expression of @xmath96 in terms of the elements of @xmath75 ; such an expression exists since @xmath75 generates @xmath10 .",
    "if @xmath247 , we let @xmath248 .",
    "note also that if @xmath249 , then we let @xmath250 .",
    "if @xmath251 , then @xmath252 for some @xmath253 and some @xmath254 . by induction , the elements @xmath255",
    "are well defined for each @xmath55 $ ] .",
    "we then let @xmath256 .    to show that @xmath257 is well - defined",
    ", we consider a different decomposition of @xmath96 , say , @xmath258 with @xmath259 . if @xmath96 has rank @xmath193 , then @xmath213 and @xmath260 , so @xmath261 and @xmath262 for some @xmath263 and @xmath264 . by condition  ( [ eq - extension ] ) , we have @xmath265 and by symmetry , @xmath266 .",
    "so @xmath267 is well defined on all the elements of @xmath10 of rank at most @xmath180 .",
    "now if @xmath96 has rank @xmath268 , let @xmath269 with @xmath270 .",
    "then there exists @xmath271 such that @xmath272 .",
    "note that @xmath273 and @xmath274 are well defined , in @xmath275 and in @xmath276 respectively .",
    "in particular , @xmath277 is well defined , and equal to @xmath278 .",
    "similarly , @xmath279 is well defined , equal to @xmath280 .",
    "it follows that @xmath281 by symmetry , @xmath282 , and since @xmath233 is @xmath180-determined , we have @xmath283 .",
    "thus , @xmath267 is well defined on @xmath10 .    by essentially the same argument , one verifies that @xmath284 preserves composition .",
    "[ cor - extension ] let @xmath10 and @xmath233 be @xmath180-determined preclones that are generated by their elements of rank at most @xmath180 .",
    "if there exist bijections from @xmath285 to @xmath235 for each @xmath184 , that preserve all compositions of the form @xmath286 , where @xmath173 , @xmath287 with @xmath288 , then @xmath10 and @xmath233 are isomorphic .    using the fact that @xmath10 is generated by its elements of rank at most @xmath180 and @xmath233 is @xmath180-determined , proposition  [ prop - extension ] shows that the given bijections extend to a morphism from @xmath10 to @xmath233 .",
    "this morphism is onto since @xmath233 as well is generated by its rank @xmath180 elements .",
    "it is also @xmath180-injective by construction , and hence it is injective by lemma  [ prop - k - injective ] since @xmath10 is @xmath180-determined .",
    "the point of this short subsection is to verify the close connection between the category of preclones and the category of _ magmoids _ , cf .",
    "@xcite , which are in turn a special case of _ strict monoidal categories _ , cf .",
    "we recall that a magmoid is a category @xmath289 whose objects are the nonnegative integers equipped with an associative bifunctor @xmath66 such that @xmath290 .",
    "a morphism of magmoids is a functor that preserves objects and @xmath66 .",
    "we say that a magmoid @xmath289 is _ determined by its scalar morphisms _ if each morphism @xmath291 can be written in a unique way as a @xmath66-sum @xmath292 , where each @xmath293 is a morphism with source @xmath294 . moreover , there is a morphism @xmath9 to @xmath7 if and only if @xmath295 ( in which case there is a unique morphism ) .",
    "the category of preclones is equivalent to the full subcategory of magmoids spanned by those magmoids which are determined by their scalar morphisms .    with each preclone @xmath10",
    ", we associate a category whose objects are the nonnegative integers and whose morphisms @xmath296 are the elements of @xmath71 , that is , the @xmath7-tuples of elements of @xmath10 of total rank @xmath58 . composition is defined in the following way : let @xmath297 and @xmath298 , and suppose that @xmath299 , @xmath188 $ ] ( so that @xmath70}m_{i}$ ] ) . for each @xmath102 , let @xmath300 .",
    "then we let @xmath301 the identity morphism at object @xmath7 is the @xmath7-tuple @xmath302 .",
    "note that when @xmath295 , this is the unique morphism @xmath303 , and there are no morphisms from @xmath9 to @xmath7 if @xmath304 .",
    "one may then regard @xmath66 as a bifunctor @xmath305 that maps a pair @xmath306 with @xmath307 and @xmath308 to the morphism @xmath309 from @xmath310 to @xmath311 .",
    "then @xmath10 , equipped with the bifunctor @xmath66 , is a magmoid .",
    "moreover , @xmath10 , as a magmoid , is determined by its scalar morphisms .",
    "it is clear that each preclone morphism determines a functor between the corresponding magmoids which is the identity function on objects and preserves @xmath66 and is thus a morphism of magmoids .",
    "conversely , if @xmath289 is a magmoid determined by its scalar morphism , then its morphisms with sourse @xmath294 constitute a preclone @xmath10 , moreover , @xmath289 is isomorphic to the magmoid determined by @xmath10 .",
    "as discussed in the introduction , the theory of ( regular ) tree languages is well developped @xcite ( see also section  [ preclone vs tree automata ] above ) . here",
    "we slightly extend the notion of tree languages , to mean any subset of some @xmath18 , @xmath312 . in the classical setting , tree languages are subsets of @xmath20 .",
    "the preclone structure on @xmath19 , described in section  [ algebraic ] , leads in a standard fashion to a definition of recognizable tree languages @xcite .",
    "this is discussed in some detail in section  [ sec recog ] . as we will see in section  [ sec regular tree ]",
    ", recognizability extends the classical notion of regularity for tree languages , and it gives us richer algebraic tools to discuss these languages .",
    "further examples are given in section  [ sec more examples trees ] .",
    "suppose that @xmath313 is a preclone morphism , or a morphism @xmath314 .",
    "we say that a subset @xmath1 of @xmath315 is _ recognized by @xmath316 _ if @xmath317 , or equivalently , if @xmath318 for some @xmath319 .",
    "moreover , we say that @xmath1 is recognized by @xmath10 , or by @xmath81 , if @xmath1 is recognized by some morphism @xmath320 or @xmath314 .",
    "finally , we say that a subset @xmath1 of @xmath315 is _ recognizable _ if it is recognized by a finitary preclone , or @xmath85-pair . as usual , the notion of recognizability can be expressed equivalently by stating that @xmath1 is _ saturated _ by some _ locally finite _ congruence on @xmath19 , that is , @xmath1 is a union of classes of a congruence which has finite index on each sort @xcite .    with every subset @xmath321 , recognizable or not , we associate a congruence on @xmath19 , called the _ syntactic congruence _ of @xmath1 .",
    "this relation is defined as follows .",
    "first , an _ @xmath7-ary context in @xmath315 _ is a tuple @xmath322 where    * @xmath323 are nonnegative integers , * @xmath324 , and * @xmath325 , with @xmath326 .",
    "@xmath322 is an _",
    "@xmath1-context _ of an element @xmath327 if @xmath328 .",
    "recall that @xmath329 denotes the @xmath66-sum of @xmath180 terms equal to @xmath46 .",
    "below , when @xmath330 and @xmath331 are clear from the context ( or do not play any role ) , we will write just @xmath332 to denote the context @xmath322 .",
    "( 49,44)(0,-44 ) ( n0)(24.0,0.0 )    ( n1)(4.0,-20.0 )    ( n2)(44.0,-20.0 )    ( n3)(24.0,-20.0 )    ( n4)(24.0,-12.0)@xmath333    ( n0,n1 )    ( n0,n2 )    ( n3,n1)@xmath334    ( n2,n3)@xmath335    ( n5)(24.0,-20.0 )    ( n6)(9.0,-35.0 )    ( n7)(39.0,-35.0 )    ( n11)(24.0,-30.0)@xmath96    ( n5,n6 )    ( n6,n7 )    ( n7,n5 )    ( n8)(15.0,-35.0 )    ( n9)(12.0,-43.0 )    ( n10)(18.0,-43.0 )    ( n8,n10 )    ( n10,n9)@xmath105    ( n9,n8 )    ( n15)(24.0,-40.0)@xmath94    ( n12)(33.0,-35.0 )    ( n13)(31.0,-43.0 )    ( n14)(36.0,-43.0 )    ( n12,n14 )    ( n14,n13)@xmath336    ( n13,n12 )    for each @xmath337 , we let @xmath338 if and only if @xmath96 and @xmath246 have the same @xmath1-contexts .    the relation @xmath339 , associated with a subset @xmath1 of @xmath340 , is a preclone congruence which saturates @xmath1 .",
    "suppose that @xmath341 and @xmath342 with @xmath343 , @xmath344 , @xmath345 and @xmath346 for each @xmath347 .",
    "we prove that @xmath348 .",
    "let @xmath349 be the rank of @xmath60 and @xmath350 , so that @xmath32}m_i$ ] and consider any @xmath58-ary context @xmath351 in @xmath315 .",
    "then @xmath352 with @xmath353 .",
    "thus , @xmath354 is an @xmath58-tuple , and we let @xmath355 be the @xmath66-sum of the first @xmath61-terms of @xmath354 , @xmath356 be the @xmath66-sum of the following @xmath63-terms of @xmath354 , etc , until finally @xmath357 is the @xmath66-sum of the last @xmath198 terms of @xmath354 . in particular , we may write @xmath358 .    since @xmath359 , we have @xmath360 it suffices to consider the @xmath7-ary context @xmath361 , where @xmath362 stands for @xmath363 .",
    "moreover , since @xmath346 , we have @xmath364 for each @xmath35 . to justify this statement , it suffices to consider the following @xmath349-ary context ( for @xmath60 and @xmath350 ) , @xmath365 where @xmath366 is the sum of the ranks of @xmath367 , and @xmath368 is the sum of the ranks of @xmath369 .",
    "we now have @xmath370 this completes the proof that @xmath371 is a congruence .",
    "next we observe that an element @xmath372 is in @xmath1 if and only if the @xmath180-ary context @xmath373 is an @xmath1-context of @xmath96 : it follows immediately that @xmath371 saturates @xmath1 .",
    "we denote by @xmath374 the quotient @xmath85-pair @xmath375 , called the _",
    "syntactic @xmath85-pair _ of @xmath1 .",
    "@xmath376 is the _",
    "syntactic preclone _ of @xmath1 and the projection morphism @xmath377 , or @xmath378 , is the _",
    "syntactic morphism _ of @xmath1 .",
    "we note the following , expected result .",
    "[ cor - synt morph ] the syntactic congruence of a subset @xmath1 of @xmath379 is the coarsest preclone congruence which saturates @xmath1 .",
    "a preclone morphism @xmath380 ( resp .",
    "a morphism of  @xmath381 ) recognizes @xmath1 if and only if @xmath316 can be factored through the syntactic morphism @xmath382 .",
    "in particular , @xmath1 is recognizable if and only if @xmath339 is locally finite , if and only if @xmath383 is finitary .",
    "let @xmath384 be a congruence saturating @xmath1 and assume that @xmath385 are @xmath384-equivalent .",
    "let @xmath351 be an @xmath7-ary context : then @xmath386 , and since @xmath384 saturates @xmath1 , @xmath387 iff @xmath388 .",
    "since this holds for all @xmath7-ary contexts in @xmath315 , it follows that @xmath389 .",
    "we also note that syntactic preclones are finitely determined .",
    "[ syntactic finitely determined ] the syntactic preclone of a subset @xmath1 of @xmath379 is @xmath180-determined .",
    "we show that if @xmath390 and @xmath391 for all @xmath392 with @xmath184 , then @xmath389 , that is , @xmath96 and @xmath246 have the same @xmath1-contexts .",
    "let @xmath351 be an @xmath1-context of @xmath96 .",
    "note in particular that @xmath393 with @xmath394 .",
    "it follows that @xmath395 , and that @xmath396 .",
    "moreover @xmath397 is an @xmath1-context of @xmath398 .",
    "but in that case , @xmath397 is also an @xmath1-context of @xmath399 , and hence @xmath351 is an @xmath1-context of @xmath246 , which concludes the proof .",
    "we now turn to tree languages in the usual sense , that is , subsets of @xmath20 . for these sets ,",
    "there exists a well - known notion of ( bottom - up ) tree automaton , whose expressive power is equivalent to monadic second - order definability , to certain rational expressions , and to recognizability by a finite @xmath0-algebra @xcite ( see section  [ preclone vs tree automata ] ) .",
    "the tree languages captured by these mechanisms are said to be _",
    "regular_. it is an essential remark ( theorem  [ syntactic gp ] below ) that the regular tree languages are exactly the subsets of @xmath20 that are recognized by a finitary preclone .",
    "recall that the minimal tree automaton of a regular tree language is the least deterministic tree automaton accepting it , and the @xmath0-algebra associated with this automaton is called the _",
    "syntactic @xmath0-algebra _ of the language .",
    "it is characterized by the fact that the natural morphism from the initial @xmath0-algebra to the syntactic @xmath0-algebra of @xmath1 , factors through every morphism of @xmath0-algebra which recognizes @xmath1 ( see section  [ preclone vs tree automata ] and @xcite ) .",
    "[ syntactic gp ] a tree language @xmath400 is recognizable if and only if it is regular .",
    "moreover , the syntactic preclone ( resp .",
    "@xmath85-pair ) of @xmath1 is the preclone ( resp .",
    "@xmath85-pair ) associated with its syntactic @xmath0-algebra .",
    "let @xmath6 be the syntactic @xmath0-algebra of @xmath1 , let @xmath81 be its syntactic @xmath85-pair , and let @xmath401 be its syntactic morphism .",
    "as discussed in section  [ preclone vs tree automata ] , the @xmath85-pair associated with @xmath6 , @xmath132 , recognizes @xmath1 , and hence the syntactic morphism of @xmath1 factors through an onto morphism of  @xmath402 . in particular , if @xmath1 is regular , then @xmath6 is finite , so @xmath132 is finitary , and so is @xmath81 : thus @xmath1 is recognizable .",
    "conversely , assume that @xmath1 is recognizable . since @xmath81 is finitary and 0-determined ( proposition  [ syntactic finitely determined ] ) , so @xmath81 is isomorphic to a sub-@xmath85-pair of @xmath403 by proposition  [ prop - emb - finite ] . using again the discussion in section  [ preclone vs tree automata ] , @xmath222 has a natural structure of @xmath0-algebra ( via the morphism @xmath404 ) , such that @xmath405 and such that @xmath222 recognizes @xmath1 as a @xmath0-algebra .",
    "in particular , @xmath1 is recognized by a finite @xmath0-algebra , and hence @xmath1 is regular .",
    "moreover , the recognizing morphism @xmath406 is the restriction to @xmath20 of @xmath404 , the syntactic morphism of @xmath1 .",
    "therefore there exists an onto morphism of @xmath0-algebras @xmath407 , which in turn induces a morphism of preclones from @xmath405 onto @xmath132 .",
    "since @xmath6 and @xmath222 are finite , it follows that the morphisms between them described above are isomorphisms , and this implies that @xmath132 is isomorphic to @xmath81 .    while not difficult , theorem  [ syntactic gp ] is important because it shows that we are not introducing a new class of recognizable tree languages .",
    "we are simply associating with each regular tree language a finitary algebraic structure which is richer than its syntactic @xmath0-algebra ( a.k.a .",
    "minimal deterministic tree automaton ) .",
    "this theorem also implies that the syntactic @xmath85-pair of a recognizable tree language has an effectively computable finite presentation .    if @xmath408 , the definition of the syntactic congruence of @xmath1 involves the consideration of @xmath7-ary contexts in @xmath20 .",
    "such contexts are necessarily of the form @xmath409 , where @xmath410 and @xmath411 , which somewhat simplifies matters .      the examples in this section are directly related with the preclones discussed in section  [ simple examples ] .",
    "let @xmath412 be a ranked _",
    "boolean _ alphabet , that is , a ranked alphabet such that each @xmath413 is either empty or equal to @xmath414 , and @xmath415 and at least one @xmath413 ( @xmath416 ) are nonempty .",
    "let @xmath312 be an integer .",
    "[ [ verifying - the - occurrence - of - a - letter ] ] verifying the occurrence of a letter + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath417 be the set of all trees in @xmath418 containing at least one vertex labeled @xmath419 ( for some @xmath7 ) .",
    "then @xmath417 is recognizable , by a morphism into the preclone @xmath140 ( see example  [ define texists ] ) .",
    "let @xmath420 be the morphism of preclones given by @xmath421 ( @xmath422 ) and @xmath423 whenever @xmath424 .",
    "it is not difficult to verify that @xmath425 .",
    "moreover , @xmath426 contains a generating set of @xmath140 , so @xmath316 is onto , and the syntactic morphism of @xmath417 factors through @xmath316 . but",
    "@xmath140 has at most 2 elements of each rank , so any proper quotient @xmath289 of @xmath140 has exactly one element of rank @xmath7 for some integer @xmath7 .",
    "one can then show that @xmath289 can not recognize @xmath417 .",
    "thus the syntactic @xmath85-pair of @xmath417 is @xmath427 .",
    "if @xmath0 is any ranked alphabet such that @xmath428 and at least one @xmath127 ( @xmath116 ) is nonempty , if @xmath429 is a proper nonempty subset of @xmath0 , and @xmath430 is the set of all trees in @xmath431 containing at least a node labeled in @xmath429 , then @xmath430 too has syntactic preclone @xmath140 .",
    "the verification of this fact can be done using a morphism from @xmath19 to @xmath432 , mapping each letter @xmath107 of rank @xmath7 to @xmath419 if it is in @xmath429 , to @xmath433 otherwise .    [ [ counting - the - occurrences - of - a - letter ] ] counting the occurrences of a letter + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath434 be integers such that @xmath157 and let @xmath435 consist of the trees in @xmath418 such that the number of vertices labeled @xmath419 ( for some @xmath7 ) is congruent to @xmath13 modulo @xmath150 .",
    "then @xmath435 is recognizable , by a morphism into the preclone @xmath153 ( see example  [ define tp ] ) .",
    "let indeed @xmath436 be the morphism given by @xmath437 and @xmath438 whenever @xmath424 .",
    "then one verifies that @xmath439 .",
    "moreover , @xmath426 contains a generating set of @xmath153 , so @xmath316 is onto , and the syntactic morphism of @xmath435 factors through @xmath316 .",
    "an elementary verification then establishes that no proper quotient of @xmath153 can recognize @xmath435 , and hence the syntactic @xmath85-pair of @xmath435 is @xmath440 .",
    "as above , this can be extended to recognizing the set of all trees in @xmath18 where the number of nodes labeled in some proper nonempty subset @xmath429 of @xmath0 is congruent to @xmath13 modulo @xmath150 .",
    "using the same idea , one can also handle tree languages defined by counting the number of occurrences of certain letters modulo @xmath150 threshold @xmath441 .",
    "it suffices to consider , in analogy with the mod @xmath150 case , the languages of the form @xmath442 , and the preclone @xmath443 , a sub - preclone of @xmath444 , whose rank @xmath7 elements are the mappings @xmath445 , where the sum is taken modulo @xmath150 threshold @xmath441 . note that this notion generalizes both above examples , since @xmath446 and that @xmath447 .",
    "[ [ identification - of - a - path ] ] identification of a path + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath448 be the set of all the trees in @xmath418 such that all the vertices along at least one maximal path from the root to a leaf are labeled @xmath419 ( for the appropriate values of @xmath7 ) .",
    "then @xmath448 is recognized by the preclone @xmath160 ( see example  [ define tpath ] ) .",
    "let indeed @xmath449 be the morphism given by @xmath450 , @xmath451 and @xmath452 ( @xmath453 ) .",
    "one can then verify that @xmath454 .",
    "[ [ identification - of - the - modality ] ] identification of the  modality + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath455 consist of all the trees in @xmath418 such that each maximal path has length at least two and the children of the root are labeled @xmath419 ( for the appropriate @xmath7 ) .",
    "we show that @xmath455 is recognizable .",
    "recall that @xmath139 , and let @xmath456 be the morphism given as follows :    * @xmath457 is the nullary constant @xmath458 , * @xmath459 is the nullary constant @xmath460 , * if @xmath461 , then @xmath462 is the @xmath7-ary map @xmath463 * if @xmath461 , then @xmath464 is the @xmath7-ary map @xmath465",
    ".    one can verify by structural induction that for each element @xmath466 , the second component of @xmath467 is @xmath142 if and only if the root of @xmath468 is labeled @xmath419 for some @xmath7 , and the first component of @xmath467 is @xmath142 if and only if every child of the root of @xmath468 is labeled @xmath419 for some @xmath7 , that is , if and only if @xmath469 .",
    "thus @xmath455 is recognized by the morphism @xmath316 .",
    "in the usual setting of one - sorted algebras , a pseudovariety is a class of finite algebras closed under taking finite direct products , sub - algebras and quotients .",
    "because we are dealing with preclones , which are infinitely sorted , we need to consider finitary algebras instead of finite ones , and to adopt more constraining closure properties in the definition .",
    "( we discuss in remark  [ cor - relative ] an alternative approach , which consists in introducing stricter finiteness conditions on the preclones themselves , namely in considering only finitely generated , finitely determined , finitary preclones . )",
    "we say that a class of finitary preclones is a _ pseudovariety _ if it is closed under finite direct product , sub - preclones , quotients , finitary unions of @xmath470-chains and finitary inverse limits of @xmath470-diagrams . here",
    ", we say that a union @xmath471 of an @xmath470-chain of preclones @xmath472 , @xmath172 is finitary exactly when @xmath233 is finitary .",
    "finitary inverse limits @xmath473 of @xmath470-diagrams @xmath474 , @xmath172 are defined in the same way .    to be perfectly rigorous , we actually require pseudovarieties to be closed under taking preclones _ isomorphic to _ a finitary @xmath470-union or to a finitary inverse limit of an @xmath470-diagram of their elements .",
    "[ def inverse limit ] recall that the inverse limit @xmath233 of the @xmath470-diagram @xmath475 , written @xmath476 if the @xmath477 are clear , is the sub - preclone of the direct product @xmath478 whose set of elements of rank @xmath58 consists of those sequences @xmath479 with @xmath480 such that @xmath481 , for all @xmath172 .",
    "we call the coordinate projections @xmath482 the _ induced projection morphisms_.    ( 80,22)(0,-22 ) ( n0)(20.0,-2.0)@xmath233    ( n2)(20.0,-20.0)@xmath483    ( n3)(0.0,-20.0)@xmath94    ( n4)(6.0,-10.0)@xmath94    ( n5)(40.0,-20.0)@xmath472    ( n6)(60.0,-20.0)@xmath94    ( n8)(80.0,-20.0)@xmath484    ( n9)(47.0,-10.0)@xmath94    ( n0,n2)@xmath485    ( n0,n5)@xmath486    ( n3,n2 )    ( n2,n5)@xmath487    ( n5,n6 )    ( n6,n8 )    the inverse limit has the following universal property . whenever @xmath10 is a preclone and the morphisms @xmath488 satisfy @xmath489 for each @xmath172 , then there is a unique morphism @xmath490 with @xmath491 , for all @xmath7 .",
    "this morphism @xmath492 maps an element @xmath493 to the sequence @xmath494 .",
    "[ limit of finitary not finitary ] here we show that the inverse limit of an @xmath470-diagram of 1-generated finitary preclones needs not be finitary .",
    "let @xmath495 , where @xmath107 has rank 1 and consider the free preclone @xmath19 .",
    "note that @xmath19 has only elements of rank 1 , and that @xmath113 can be identified with the monoid @xmath496 .",
    "for each @xmath172 , let @xmath497 be the congruence defined by letting @xmath498 if and only if @xmath499 , or @xmath500 .",
    "let @xmath501 .",
    "then @xmath472 is again @xmath107-generated , and it can be identified with the monoid @xmath502 under addition threshold @xmath7 .",
    "in particular , @xmath472 is a finitary preclone .",
    "since @xmath503-equivalent elements of @xmath19 are also @xmath497-equivalent , there is a natural morphism of preclones from @xmath483 to @xmath472 , mapping @xmath107 to itself , and the inverse limit of the resulting @xmath470-diagram is @xmath19 itself , which is not finitary .",
    "pseudovarieties of preclones can be characterized using the notion of _ division _ : we say that a preclone @xmath10 _ divides _ a preclone @xmath233 , written @xmath504 , if @xmath10 is a quotient of a sub - preclone of @xmath233 .",
    "it is immediately verified that a nonempty class of finitary preclones is a pseudovariety if and only if it is closed with respect to division , binary direct product , finitary unions of @xmath470-chains and finitary inverse limits of @xmath470-diagrams .",
    "it is immediate that the intersection of a collection of pseudovarieties of preclones is a pseudovariety .",
    "it follows that if  is a class of finitary preclones , then the pseudovariety generated by  is well defined , as the least pseudovariety containing . in particular , the elements of this pseudovariety , written @xmath505 , can be described in terms of the elements of , taking subpreclones , quotients , direct products , finitary unions of @xmath470-chains and inverse limits of @xmath470-diagrams .",
    "see section  [ psv generated ] below .",
    "we discuss other examples in section [ sec examples tree varieties ] .",
    "we first explore the relation between pseudovarieties and their finitely determined elements , then we discuss pseudovarieties generated by a class of preclones , and finally , we explore some additional closure properties of pseudovarieties .",
    "[ prop - limit ] let @xmath10 be a preclone .    1 .",
    "@xmath10 is isomorphic to the inverse limit @xmath506 of an @xmath470-diagram , where each @xmath507 is an @xmath7-determined quotient of @xmath10 .",
    "2 .   if @xmath10 is finitary , then @xmath10 is isomorphic to the union of an @xmath470-chain @xmath508 , where each @xmath472 is the inverse limit of an @xmath470-diagram of finitely generated , finitely determined divisors of @xmath10 .",
    "let @xmath509 ( where @xmath510 is defined in section  [ sec representation ] ) and let @xmath511 be the corresponding projection .",
    "since @xmath512-related elements of @xmath10 are also @xmath510-related , there exists a morphism of preclones @xmath513 such that @xmath514 .",
    "thus the @xmath515 determine a morphism @xmath516 , such that @xmath517 for each @xmath518 ( remark  [ def inverse limit ] ) .",
    "moreover , since @xmath510 is the identity relation on the elements of @xmath10 of rank at most @xmath7 , we find that for each @xmath519 , @xmath515 establishes a bijection between the elements of rank @xmath180 of @xmath10 and those of @xmath507 . in particular , @xmath520 is injective since each element of @xmath10 has rank @xmath180 for some finite integer @xmath180 .",
    "furthermore , for each @xmath519 , @xmath521 establishes a bijection between the elements of rank @xmath180 , and it follows that each element of rank @xmath180 of @xmath522 is the @xmath520-image of its @xmath180-th component .",
    "that is , @xmath520 is onto .",
    "finally , lemma  [ simk k determined ] shows that each @xmath507 is @xmath7-determined .",
    "this concludes the proof of the first statement .",
    "we now assume that @xmath10 is finitary , and we let @xmath523 be the sub - preclone generated by the elements of @xmath10 of rank at most @xmath58",
    ". then @xmath523 is finitely generated , and the first statement shows that @xmath523 is the inverse limit of an @xmath470-diagram of finitely generated , finitely determined quotients of @xmath523 , which are in particular divisors of @xmath10 .",
    "the following corollary follows immediately .",
    "[ cor - k - faithful ] every pseudovariety of preclones is uniquely determined by its finitely generated , finitely determined elements .",
    "we can go a little further , and show that a pseudovariety is determined by the syntactic preclones it contains .",
    "[ subdirect product of syntactic ] let @xmath10 be a finitely generated , @xmath180-determined , finitary preclone , let @xmath82 be a finite ranked set and let @xmath524 be an onto morphism .",
    "then @xmath10 divides the direct product of the syntactic preclones of the languages @xmath525 , where @xmath526 runs over the ( finitely many ) elements of @xmath10 of rank at most @xmath180 .",
    "it suffices to show that if @xmath527 for some @xmath4 and @xmath528 for each @xmath529 , @xmath193 , then @xmath530 .",
    "first , suppose that @xmath468 and @xmath531 have rank @xmath532 , and let @xmath533 .",
    "then @xmath534 is a @xmath525-context of @xmath468 , so it is also a @xmath525-context of @xmath531 , and we have @xmath535 .",
    "now , if @xmath468 and @xmath531 have rank @xmath536 , let @xmath537 for some @xmath270 .",
    "since @xmath217 is onto , there exists an element @xmath538 such that @xmath539 . for each @xmath529 , @xmath540 , we have @xmath528 , and hence also @xmath541 .",
    "the previous discussion shows therefore that @xmath542 , that is , @xmath543 .",
    "since @xmath10 is @xmath180-determined , it follows that @xmath544 .",
    "[ psv determined by syntactic ] every pseudovariety of preclones is uniquely determined by the syntactic preclones it contains .",
    "this follows directly from corollary [ cor - k - faithful ] and proposition [ subdirect product of syntactic ] .",
    "let @xmath545 denote respectively the operators of taking all isomorphic images , homomorphic images , subpreclones , finite direct products , finitary inverse limits of an @xmath470-diagram , and finitary @xmath470-unions over a class of finitary preclones .",
    "the following fact is a special case of a well - known result in universal algebra .",
    "[ lem - hsp ] if @xmath546 is a class of finitary preclones , then @xmath547 is the least class of finitary preclones containing @xmath546 , closed under homomorphic images , subpreclones and finite direct products .",
    "next , we observe the following elementary facts .",
    "[ elementary psv ] for all classes @xmath546 of finitary preclones , we have @xmath548    to prove the first inclusion , suppose that @xmath10 is the direct product of the finitary preclones @xmath549 , @xmath550 $ ] , where each @xmath549 is a limit of an @xmath470-diagram of preclones @xmath551 in @xmath546 determined by a family of morphisms @xmath552 , @xmath179 . for each @xmath180 ,",
    "let @xmath553 be the direct product @xmath554}s^{(i , k)}$ ] , and let @xmath555 } \\varphi_{i , k}\\colon t^{(k+1 ) } \\to t^{(k)}$ ] .",
    "it is a routine matter to verify that @xmath10 is isomorphic to the limit of the @xmath470-diagram determined by the family of morphisms @xmath556 , @xmath179 .",
    "thus , @xmath557 .",
    "now , for each @xmath188 $ ] , let @xmath558 be an @xmath470-chain of finitary preclones in @xmath546 .",
    "let us assume that each @xmath559 is finitary , and let @xmath560 } s^{(i)}$ ] .",
    "if @xmath561 , then each @xmath562 belongs to @xmath563 , for some @xmath564 .",
    "thus @xmath565 } s^{(i , k)}$ ] , where @xmath566 , and we have shown that @xmath567}s^{(i , k)}$ ] , so that @xmath568 .    to prove the third inclusion , let @xmath233 be a sub - preclone of @xmath569 , the finitary inverse limit of an @xmath470-diagram @xmath570 of elements of @xmath546 .",
    "let @xmath571 be the natural projections ( restricted to @xmath233 ) , and let @xmath572 .",
    "then @xmath472 is a subpreclone of @xmath507 for each @xmath7 .",
    "moreover , the restrictions of the @xmath521 to @xmath483 define an @xmath470-diagram of subpreclones of elements of @xmath546 , and it is an elementary verification that @xmath573 . since @xmath233 is finitary , we have proved that @xmath574 .    as for the last inclusion , let @xmath233 be a subpreclone of a finitary union @xmath575 with @xmath576 , for all @xmath312 .",
    "let @xmath577 for each @xmath179 .",
    "then each @xmath553 is a subpreclone of @xmath578 and @xmath579 .",
    "it follows that @xmath580 .",
    "our proof of the third inclusion actually yields the following result .",
    "[ smart proof ] if a finitary preclone @xmath10 embeds in an inverse limit @xmath581 , then @xmath10 is isomorphic to a ( finitary ) inverse limit @xmath473 , where each @xmath472 is a finitary sub - preclone of @xmath507",
    ".    we can be more precise than lemma  [ elementary psv ] for what concerns finitely generated , finitely determined preclones .",
    "[ union vs finitely determined ] let @xmath233 be a preclone which embeds in the union of an @xmath470-chain @xmath582 . if @xmath233 is finitely generated , then @xmath233 embeds in @xmath507 for all large enough @xmath7 .",
    "since @xmath233 is finitely generated , its set of generators is entirely contained in some @xmath578 , and hence @xmath233 embeds in each @xmath507 , @xmath583 .",
    "[ lem - hu ] let @xmath233 be a quotient of the union of an @xmath470-chain @xmath582 .",
    "if @xmath233 is finitely generated , then @xmath233 is a quotient of @xmath507 for all large enough @xmath7 .",
    "let @xmath217 be a surjective morphism from @xmath584 onto @xmath233 .",
    "since @xmath233 is finitely generated , there exists an integer @xmath180 such that @xmath585 contains all the generators of @xmath233 , and this implies that the restriction of @xmath217 to @xmath578 ( and to each @xmath507 , @xmath583 ) is onto .",
    "[ invlim vs finitely determined ] let @xmath233 be a preclone which embeds in the inverse limit @xmath586 of an @xmath470-diagram , and for each @xmath7 , let @xmath587 be the natural projection ( restricted to @xmath233 ) . if @xmath233 is finitary , then for each @xmath180 , @xmath515 is @xmath180-injective for all large enough @xmath7 . if in addition @xmath233 is finitely determined , then @xmath233 embeds in @xmath38 for all large enough @xmath7 .",
    "since @xmath233 is finitary , @xmath588 is finite for each integer @xmath180 , and hence there exists an integer @xmath589 such that @xmath515 is injective on @xmath588 for each @xmath590 . in particular , for each integer @xmath180 , @xmath515 is @xmath180-injective for all large enough @xmath7 .",
    "the last part of the statement follows from lemma  [ prop - k - injective ] .    [ lem - hl ] let @xmath233 be a quotient of the finitary inverse limit @xmath591 of an @xmath470-diagram . if @xmath233 is finitely determined , then @xmath233 is a quotient of a sub - preclone of one of the @xmath507 .",
    "let @xmath592 and let @xmath593 be the corresponding projection .",
    "let also @xmath77 be an onto morphism , and let @xmath223 be an integer such that @xmath233 is @xmath180-determined .",
    "by lemma  [ invlim vs finitely determined ] , @xmath515 is @xmath180-injective for some integer @xmath7 .    consider the preclone @xmath594",
    ". then we claim that the assignment @xmath595 defines a surjective morphism @xmath596 .",
    "the only nontrivial point is to verify that this assignment is well defined .",
    "let @xmath597 and suppose that @xmath598 .",
    "we want to show that @xmath599 , and for that purpose , we show that @xmath600 for each @xmath601 , @xmath193 ( since @xmath233 is @xmath180-determined ) .",
    "since @xmath217 is onto , there exists @xmath602 such that @xmath603 .",
    "in particular , @xmath604 and similarly , @xmath605 .",
    "moreover , we have @xmath606 .",
    "now @xmath607 and @xmath608 lie in @xmath211 , and @xmath515 is injective on @xmath211 , so @xmath609 .",
    "it follows that @xmath610 , and hence @xmath611 .",
    "we are now ready to describe the finitely generated , finitely determined elements of the pseudovariety generated by a given class of finitary preclones .",
    "[ psv generated by finitely determined ] let @xmath546 be a class of finitary preclones .",
    "a finitely generated , finitely determined , finitary preclone belongs to the pseudovariety @xmath505 generated by @xmath546 if and only if it divides a finite direct product of preclones in @xmath546 , i.e. , it lies in @xmath547 .",
    "it is easily verified that @xmath612 , where @xmath613 and @xmath614 .",
    "we show by induction on @xmath7 that if @xmath233 a finitely generated , finitely determined preclone in @xmath615 , then @xmath616 .",
    "the case @xmath295 is trivial and we now assume that @xmath617 . by lemma  [ elementary psv ]",
    ", @xmath233 lies in @xmath618",
    ". then lemma  [ lem - hu ] shows that @xmath233 is in fact in @xmath619 , which is equal to @xmath620 by lemma  [ lem - hsp ] , and is contained in @xmath621 by lemma  [ elementary psv ] again",
    ". now lemma  [ lem - hl ] shows that @xmath233 lies in fact in @xmath622 , and we conclude by induction that @xmath623 .    if @xmath546 is a class of finitary preclones , then @xmath624 .",
    "the containment @xmath625 is immediate . to show the reverse inclusion",
    ", we consider a finitary preclone @xmath626 .",
    "then @xmath627 , where @xmath472 denotes the subpreclone of @xmath233 generated by the elements of rank at most @xmath7 .",
    "now each @xmath472 is finitely generated , and by proposition  [ prop - limit ] , it is isomorphic to the inverse limit of the @xmath470-diagram formed by the finitely generated , finitely determined preclones @xmath628 , @xmath629 . by the proposition  [ psv generated by finitely determined",
    "] , each of these preclones is in @xmath547 , so @xmath630 .",
    "[ cor - relative ] as indicated in the first paragraph of section  [ sec psv ] , proposition  [ psv generated by finitely determined ] hints at an alternative treatment of the notion of pseudovarieties of preclones , limited to the consideration of finitely generated , finitely determined , finitary preclones .",
    "say that a class @xmath546 of finitely generated , finitely determined , finitary preclones is a _ relative pseudovariety _",
    "if whenever a finitely generated , finitely determined , finitary preclone @xmath10 divides a finite direct product of preclones in @xmath546 , then @xmath10 is in fact in @xmath546 . for each pseudovariety @xmath631 ,",
    "the class @xmath632 of all its finitary , finitely generated , finitely determined members is a relative pseudovariety , and the map @xmath633 is injective by corollary  [ cor - k - faithful ] .",
    "moreover , proposition  [ psv generated by finitely determined ] can be used to show that this map is onto .",
    "that is , the map @xmath633 is an order - preserving bijective correspondence ( with respect to the inclusion order ) between pseudovarieties and relative pseudovarieties of preclones .",
    "proposition  [ psv generated by finitely determined ] also leads to the following useful result . recall that a finitely generated preclone @xmath10 is effectively given if we are given a finite generating set @xmath82 as transformations of finite arity of a given finite set @xmath6 , see section  [ preclone vs tree automata ] .",
    "[ decide 1-generated psv ] let @xmath10 and @xmath233 be effectively given , finitely generated , finitely determined preclones .",
    "then it is decidable whether @xmath233 belongs to the pseudovariety of preclones generated by @xmath10 .",
    "let @xmath82 ( resp .",
    "@xmath84 ) be the given set of generators of @xmath10 ( resp .",
    "@xmath233 ) and let@xmath631 be the pseudovariety generated by @xmath10 . by corollary",
    "[ psv generated by finitely determined ] , @xmath634 if and only if @xmath233 divides a direct power of @xmath10 , say , @xmath635 . since @xmath84 is finite , almost all the sets @xmath636 are empty .",
    "we claim that the exponent @xmath58 can be bounded by @xmath637 indeed , there exists a sub - preclone @xmath638 and an onto morphism @xmath639 . since @xmath84 generates @xmath233 , we may assume without loss of generality that this morphism defines a bijection from a set @xmath640 of generators of @xmath641 to @xmath84 , and in particular , we may identify @xmath636 with @xmath642 , a subset of @xmath643 .",
    "next , one verifies that if @xmath58 is greater than the bound in the claim , then there exist @xmath644 such that for all @xmath180 and @xmath645 , the @xmath102-th and the @xmath646-th components of @xmath468 are equal  but this implies that the exponent can be decreased by @xmath294 .",
    "thus , it suffices to test whether or not @xmath233 divides @xmath647 , where @xmath58 is given by the above formula .",
    "but as discussed above , this holds if and only if @xmath648 contains a set @xmath640 and a rank preserving bijection from @xmath640 to @xmath84 which can be extended to a morphism from the sub - preclone of @xmath647 generated by @xmath640 to @xmath233 . by proposition  [ prop - extension ] , and since @xmath10 and @xmath233 are effectively given and @xmath233 is finitely determined , this can be checked algorithmically .      here",
    "we record additional closure properties of pseudovarieties of preclones .",
    "[ lem - inv - embed ] let @xmath631 be a pseudovariety of preclones and let @xmath233 be a finitary preclone .",
    "if @xmath233 embeds in the inverse limit of an @xmath470-diagram of preclones in @xmath631 , then @xmath649 .",
    "the lemma follows immediately from corollary  [ smart proof ] .",
    "[ prop311 ] let @xmath631 be a pseudovariety of preclones and let @xmath10 be a finitary preclone . if for each @xmath155 , there exists a morphism @xmath650 such that @xmath651 and @xmath487 is injective on elements of rank exactly @xmath7 , then @xmath652 .",
    "without loss of generality we may assume that each @xmath487 is surjective .",
    "for each @xmath172 , consider the direct product @xmath653 , which is in @xmath631 , and let @xmath654 denote the natural projection of @xmath483 onto @xmath472 .",
    "let also @xmath488 be the target tupling of the morphisms @xmath655 , @xmath656 , let @xmath233 be the inverse limit @xmath657 determined by the morphisms @xmath654 , and let @xmath658 be the corresponding projection morphisms .",
    "note that each @xmath659 is @xmath7-injective , and equals the composite of @xmath660 and @xmath654 .",
    "thus , there exists a ( unique ) morphism @xmath661 such that the composite of @xmath492 and @xmath486 is @xmath659 for each @xmath7 .",
    "it follows from the @xmath7-injectivity of each @xmath659 , that @xmath492 is injective .",
    "thus , @xmath10 embeds in the inverse limit of an @xmath470-diagram of preclones in @xmath631 , and we conclude by lemma  [ lem - inv - embed ] .",
    "we note the following easy corollary of proposition  [ prop311 ] .",
    "[ cor - sep ] let @xmath631 be a pseudovariety of preclones .",
    "let @xmath10 be a finitary preclone such that distinct elements of equal rank can be separated by a morphism from @xmath10 to a preclone in @xmath631",
    ". then @xmath662 .",
    "for any distinct elements @xmath663 of equal rank @xmath7 , let @xmath664 be a morphism such that @xmath665 and @xmath666 . for any integer @xmath7 ,",
    "let @xmath521 be the target tupling of the finite collection of morphisms @xmath667 with @xmath186 .",
    "then @xmath521 is injective on @xmath171 and we conclude by proposition  [ prop311 ] .      the formal treatment pseudovarieties of  is similar to the above treatment of pseudovarieties of preclones  but for the following remarks .",
    "we define a _ pseudovariety of _ to be a class of finitary  closed under finite direct product , sub- , quotients and finitary inverse limits of @xmath470-diagrams .",
    "our first remark is that , in this case , we do not need to mention finitary unions of @xmath470-chains : indeed , finitary  are finitely generated , so the union of an @xmath470-chain , if it is finitary , amounts to a finite union .",
    "next , the notion of inverse limit of @xmath470-diagrams of  needs some clarification .",
    "consider a sequence of morphisms of , say @xmath668 .",
    "that is , each @xmath669 is a preclone morphism from @xmath670 to @xmath507 , which maps @xmath671 into @xmath672 .",
    "we can then form the inverse limit @xmath506 of the @xmath470-diagram determined by the preclone morphisms @xmath669 , and the inverse limit @xmath673 determined by the set mappings @xmath521 .",
    "the inverse limit @xmath674 of the @xmath470-diagram determined by the morphisms of  @xmath669 ( as determined by the appropriate universal limit , see remark  [ def inverse limit ] ) is the @xmath85-pair @xmath81 , where @xmath675 and @xmath10 is the subpreclone of @xmath506 generated by @xmath82 .",
    "recall that this inverse limit is called finitary exactly when @xmath10 is finitary and @xmath82 is finite ( see example  [ limit of finitary not finitary ] ) .",
    "we now establish the close connection between this inverse limit and the inverse limit of the underlying @xmath470-diagram of preclones , when the latter is finitary .",
    "let @xmath668 be an @xmath470-diagram of .",
    "let @xmath676 and let and @xmath677 . if @xmath10 is finitary , then @xmath678 .",
    "we need to show that @xmath82 generates @xmath10 . without loss of generality",
    ", we may assume that each @xmath669 maps @xmath671 surjectively onto @xmath672 , and we denote by @xmath679 the restriction of @xmath521 to @xmath671 . by definition , @xmath82 is the inverse limit of the @xmath470-diagram given by the @xmath679 , and we denote by @xmath680 the corresponding projection .",
    "we also denote by @xmath679 and @xmath681 the extensions of these mappings to preclone morphisms @xmath682 and @xmath683 .",
    "it is not difficult to verify that @xmath684 is the inverse limit of the @xmath470-diagram given by the @xmath679 , and that the @xmath681 are the corresponding projections .",
    "( 50,22)(0,-22 ) ( n0)(18.0,-2.0)@xmath82    ( n2)(18.0,-20.0)@xmath671    ( n3)(0.0,-20.0)@xmath94    ( n4)(4.0,-10.0)@xmath94    ( n5)(38.0,-20.0)@xmath672    ( n6)(45.0,-20.0)@xmath94    ( n9)(41.0,-10.0)@xmath94    ( n0,n2)@xmath685    ( n0,n5)@xmath686    ( n3,n2 )    ( n2,n5)@xmath687    ( 52,22)(0,-22 ) ( n0)(20.0,-2.0)@xmath684    ( n2)(20.0,-20.0)@xmath688    ( n3)(0.0,-20.0)@xmath94    ( n4)(6.0,-10.0)@xmath94    ( n5)(43.0,-20.0)@xmath689    ( n9)(45.0,-10.0)@xmath94    ( n10)(52.0,-20.0)@xmath94    ( n0,n2)@xmath685    ( n0,n5)@xmath686    ( n3,n2 )    ( n2,n5)@xmath687    moreover , each @xmath690 is onto ( even from @xmath82 to @xmath691 ) .",
    "let indeed @xmath692 .",
    "since the @xmath679 are onto , we can define by induction a sequence @xmath693 such that @xmath694 for each @xmath583 .",
    "this sequence can be completed with the iterated images of @xmath695 by @xmath696 ,  ,",
    "@xmath697 to yield an element of @xmath82 whose @xmath180-th projection is @xmath695 .",
    "since @xmath672 generates @xmath507 , the morphism @xmath698 induced by @xmath699 is surjective .",
    "moreover , the composites @xmath700 and @xmath701 coincide .",
    "( 60,52)(0,-52 ) ( n0)(0.0,-2.0)@xmath684    ( n1)(0.0,-52.0)@xmath10    ( n2)(30.0,-18.0)@xmath688    ( n3)(30.0,-36.0)@xmath670    ( n4)(60.0,-18.0)@xmath689    ( n5)(60.0,-36.0)@xmath507    ( n0,n4)@xmath686    ( n0,n2)@xmath685    ( n1,n5)@xmath486    ( n1,n3)@xmath485    ( n2,n3)@xmath660    ( n4,n5)@xmath702    ( n2,n4)@xmath687    ( n3,n5)@xmath487    ( n0,n1)@xmath131    it follows that the morphisms @xmath703 and @xmath704 coincide , and hence there exists a morphism @xmath705 such that @xmath706 for each @xmath7 . since @xmath681 and @xmath702 are onto , it follows that each @xmath515 is surjective .",
    "we now use the fact that @xmath10 is finitary . by lemma  [ invlim vs finitely determined ]",
    ", @xmath515 is @xmath180-injective for each large enough @xmath7 .",
    "let now @xmath707 .",
    "we want to show that @xmath708 .",
    "let @xmath589 be such that @xmath515 is @xmath180-injective for each @xmath590 .",
    "we can choose an element @xmath709 such that @xmath710 .",
    "then , by induction , we can construct a sequence @xmath711 of elements such that @xmath712 for each @xmath155 . we need to show that @xmath713 for each @xmath7 .",
    "this equality is immediate for @xmath714 , and we assume by induction that it holds for some @xmath590 .",
    "we have @xmath715 since @xmath515 and @xmath485 are surjective , since they are injective on @xmath716 , and since @xmath717 , we find that @xmath521 is injective on @xmath718 , and hence @xmath719 , as expected .    thus @xmath720 and @xmath721 , which concludes the proof that @xmath10 is generated by @xmath82 .",
    "let @xmath722 be a collection of nonempty classes of recognizable tree languages @xmath723 , where @xmath0 runs over the finite ranked alphabet and @xmath180 runs over the nonnegative integers .",
    "we call @xmath724 a _ variety of tree languages _ , or a _ tree language variety _",
    ", if each @xmath725 is closed under the boolean operations , and @xmath724 is closed under inverse morphisms between free preclones generated by finite ranked sets , and under quotients defined as follows .",
    "let @xmath723 be a tree language , let @xmath334 and @xmath335 be nonnegative integers , @xmath726 and @xmath727 .",
    "then the _ left quotient _ @xmath728 and the _ right quotient _ @xmath729 are defined by @xmath730 that is , @xmath728 is the set of elements of @xmath88 for which @xmath731 is an @xmath1-context , and @xmath732 is the set of elements of @xmath88 for which @xmath733 is an @xmath1-context . below we will write just @xmath734 for @xmath728 if @xmath334 and @xmath335 are understood , or play no role .",
    "a _ literal variety of tree languages _ is defined similarly , but instead of closure under inverse morphisms between finitely generated free preclones , we require closure under inverse morphisms between finitely generated free .",
    "thus , if @xmath723 is in a literal variety @xmath724 and @xmath735 is a preclone morphism with @xmath736 finite and @xmath737 , then @xmath738 is also in @xmath724 .",
    "the aim of this section is to prove an eilenberg correspondence between pseudovarieties of preclones ( resp . ) , and varieties ( resp .",
    "literal varieties ) of tree languages . for each pseudovariety @xmath631 of preclones ( resp . ) , let @xmath739 , where @xmath725 denotes the class of the tree languages @xmath740 whose syntactic preclone ( resp .",
    "@xmath85-pair ) belongs to @xmath631 .",
    "it follows from proposition  [ cor - synt morph ] that @xmath741 consists of all those tree languages that can be recognized by a preclone ( resp .",
    "@xmath85-pair ) in @xmath631 .",
    "conversely , if @xmath742 is a variety ( resp . a literal variety ) of tree languages , we let @xmath743 be the class of all finitary preclones ( resp . ) that only accept languages in @xmath742 , _",
    "i.e. _ , @xmath744 belongs to @xmath742 , for all morphisms @xmath745 ( resp .",
    "@xmath746 ) , @xmath223 and @xmath319 .",
    "[ thm - eilenberg ] the mappings @xmath747 and @xmath748 are mutually inverse lattice isomorphisms between the lattice of pseudovarieties of preclones ( resp . ) and the lattice of varieties ( resp .",
    "literal varieties ) of tree languages .",
    "we only prove the theorem for pseudovarieties of  and literal varieties of tree languages .",
    "it is clear that for each pseudovariety @xmath631 of finitary , if @xmath739 , then each @xmath725 is closed under complementation and contains the languages @xmath749 and @xmath379 .",
    "the closure of @xmath725 under union follows in the standard way from the closure of @xmath631 under direct product : if @xmath750 are recognized by morphisms into  @xmath81 and @xmath751 in @xmath631 , then @xmath752 is recognized by a morphism into @xmath753 .",
    "thus @xmath725 is closed under the boolean operations .",
    "we now show that @xmath724 is closed under quotients .",
    "let @xmath754 be in @xmath725 , let @xmath755 be a morphism recognizing @xmath1 with @xmath756 and @xmath757 , and let @xmath758 .",
    "let @xmath759 be an @xmath7-ary context , that is , @xmath760 , @xmath761 and @xmath762 .",
    "now let @xmath763 .",
    "then for any @xmath764 , @xmath765 if and only if @xmath766 , if and only if @xmath767 iff @xmath768 .",
    "thus , @xmath769 , which is therefore in @xmath770 . now let @xmath771 .",
    "it follows as above that @xmath772 and hence @xmath773 .",
    "before we proceed , let us observe that we just showed the following : if @xmath774 is a recognizable tree language , then for each @xmath172 there are only finitely many distinct sets of the form @xmath775 , where @xmath351 is an @xmath7-ary context of @xmath315 .",
    "next , let @xmath776 be a morphism of  and @xmath777 .",
    "if @xmath1 is recognized by a morphism @xmath778 , then @xmath738 is recognized by the composite morphism @xmath779 , and the closure of @xmath724 by inverse morphisms between free  follows immediately .",
    "thus the mapping @xmath747 does associate with each pseudovariety of  a literal variety of tree languages , and it clearly preserves the inclusion order .    now consider the mapping @xmath748 : we first verify that if @xmath742 is a literal variety of tree languages , then the class @xmath743 is a pseudovariety . recall that , if @xmath780 , then any language recognized by @xmath81 is also recognized by @xmath83 , so if each language recognized by @xmath83 belongs to @xmath742 , then the same holds for @xmath81 .",
    "note also that any language recognized by the direct product @xmath781 is a finite union of intersections of the form @xmath782 , where @xmath1 is recognized by @xmath81 and @xmath289 by @xmath83 ; thus @xmath743 is closed under binary direct products .",
    "finally , if @xmath783 is the finitary inverse limit of an @xmath470-diagram of finitary , then lemma  [ invlim vs finitely determined ] shows that the languages recognized by @xmath81 are recognized by almost all of the @xmath784 .",
    "thus @xmath785 , which concludes the proof that @xmath743 is a pseudovariety of .",
    "let @xmath742 be a literal variety of tree languages , and let @xmath786 .",
    "we now show that @xmath787 .",
    "since @xmath724 consists of all the tree languages recognized by a @xmath85-pair in @xmath788 , it is clear that @xmath789 .",
    "now let @xmath790 , and let @xmath791 be its syntactic @xmath85-pair . to prove that @xmath792 , it suffices to show that if @xmath793 is a morphism of  and @xmath794 , then @xmath795 . since a morphism of  maps generators to generators , up to renaming and identifying letters ( which can be done by morphisms between free )",
    ", we may assume that @xmath316 is the syntactic morphism of @xmath1 .",
    "thus @xmath796 is an equivalence class @xmath797 $ ] in the syntactic congruence of @xmath1 , and hence @xmath798 where @xmath799 denotes the complement of @xmath1 . if @xmath468 has rank @xmath7 , the intersections in this formula run over @xmath7-ary contexts @xmath351 , and as observed above , these intersections are in fact finite .",
    "it follows that that @xmath800 .",
    "this concludes the verification that @xmath787 , so @xmath801 is the identity mapping , and in particular @xmath747 is surjective and @xmath748 is injective .    it is clear that both maps @xmath747 and @xmath748 preserve the inclusion order . in order to conclude that they are mutually reciprocal bijections , it suffices to verify that @xmath747 is injective . if @xmath631 and @xmath802 are pseudovarieties such that @xmath803 , then a tree language is in @xmath724 if and only if its syntactic preclone is in @xmath631 , if and only if its syntactic preclone is in @xmath802 .",
    "thus @xmath631 and @xmath802 contain the same syntactic preclones , and it follows from corollary  [ psv determined by syntactic ] that @xmath804 .",
    "three further variety theorems for finite trees exist in the literature .",
    "they differ from the variety theorem proved above since they use a different notion of morphism , quotient , and syntactic algebra .",
    "the variety theorem in @xcite is formulated for tree language varieties over some fixed ranked alphabet and the morphisms are homomorphisms between finitely generated free algebras , whereas the `` general variety theorem '' of @xcite allows for tree languages over different ranked alphabets and a more general notion of morphism , closely related to the morphisms of free pg - pairs .",
    "on the other hand , the morphisms in @xcite are much more general than those in either @xcite or the present paper , they even include nonlinear tree morphisms that allow for the duplication of a variable .",
    "another difference is that the tree language varieties in @xcite involve only left quotients , whereas the one presented here ( and the varieties of @xcite ) are defined using two sided quotients .",
    "the notion of syntactic algebra is also different in these papers : minimal tree automata in @xcite , a variant of minimal tree automata in @xcite , minimal clone ( or lawvere theory ) in @xcite , and minimal preclone , or pg - pair , here .",
    "we refer to ( * ? ? ?",
    "* section 14 ) for a more detailed comparative discussion .",
    "as noted above , the abundance of variety theorems for finite trees is due to the fact that there are several reasonable ways of defining morphisms and quotients , and a choice of these notions is reflected by the corresponding notion of syntactic algebra .",
    "no variety theorem is known for the 3-sorted algebras proposed in @xcite .",
    "let @xmath0 be a finite ranked alphabet and let @xmath806 be a tree language accepted by a preclone in @xmath807 .",
    "then the syntactic preclone @xmath10 of @xmath1 lies in @xmath805 .",
    "recall that a syntactic preclone is finitely generated and finitely determined : it follows from proposition  [ psv generated by finitely determined ] that @xmath10 divides a product of a finite number of copies of @xmath140 . by a standard argument , @xmath1 is therefore a ( positive ) boolean combination of languages recognized by a morphism from @xmath19 to @xmath140 .",
    "now let @xmath808 be a morphism .",
    "as discussed in section  [ sec more examples trees ] , a tree language in @xmath19 recognized by @xmath131 is either of the form @xmath430 for some @xmath809 , or it is the complement of such a language .",
    "from there , and using the same reasoning as in the analogous case concerning word languages , one can verify that a language @xmath810 is accepted by a preclone in @xmath805 if and only if @xmath1 is a boolean combination of languages of the form @xmath430 ( @xmath809 ) , or equivalently , @xmath1 is a boolean combination of languages of the form @xmath811 , @xmath812 , where @xmath813 is the set of all @xmath0-trees of rank @xmath180 , for which the set of node labels is exactly @xmath429 .    similarly  and referring again to section  [ sec more examples trees ] for notation  one can give a description of the variety of tree languages associated with the pseudovariety @xmath814 , or the pseudovariety @xmath815 , using the languages of the form @xmath816 or @xmath817 instead of the @xmath417 .",
    "in a recent paper @xcite , benedikt and sgoufin considered the class of @xmath818$]-definable tree languages .",
    "note that the logical language used in @xmath818 $ ] does not allow the predicate @xmath2 , and @xmath818 $ ] is a fragment of @xmath3 $ ] .",
    "we refer the reader to @xcite for precise definitions , and we point out here that the characterization established there can be expressed in the framework developed in the present paper .",
    "more precisely , the results of benedikt and sgoufin establish that @xmath818$]-definable tree languages form a variety of languages , and that the corresponding pseudovariety of preclones consists of the preclones @xmath10 such that    * the semigroup @xmath819 satisfies @xmath820 and @xmath821 for all elements @xmath822 such that @xmath823 and @xmath824 and for @xmath825 ; * for each @xmath826 , @xmath827 such that @xmath828 , and @xmath829 , @xmath830 .",
    "it is clearly argued in @xcite that @xmath818$]-definable tree languages are exactly the locally threshold testable languages , for general model - theoretic reasons , but that this fact alone does not directly yield a decision procedure .",
    "the result stated above is analogous to the characterization of @xmath818$]-definability for recognizable word languages - more precisely , condition ( 1 ) suffices for languages of words and their syntactic semigroups .",
    "condition ( 2 ) , which makes sense in trees but not in words , must be added to the other one to characterize @xmath818$]-definability for tree languages .",
    "bojaczyk and walukiewicz also characterized interesting logically defined classes of tree languages @xcite .",
    "again , their results are not couched in terms of preclones , but they can conveniently be expressed in this way .",
    "these authors consider three fragments of @xmath831 : @xmath832 , @xmath833 and @xmath834 . here",
    "@xmath17 ( resp .",
    "@xmath16 ) denotes the modality whereby a tree @xmath835 satisfies @xmath836 ( resp .",
    "@xmath837 ) if some child of the root ( resp .",
    "some node properly below the root ) of @xmath835 satisfies @xmath217 .",
    "the set of formulas constructed using one or both of these modalities , plus boolean operations and letter constants form the logical languages @xmath832 , @xmath833 and @xmath834 .",
    "bojaczyk and walukiewicz first observe that a tree language @xmath1 is @xmath832-definable if and only if there exists an integer @xmath180 such that membership of a tree @xmath835 in @xmath1 depends only on the fragment of @xmath835 consisting of the nodes of depth at most @xmath180 .",
    "they then show that these tree languages form a variety , and the corresponding pseudovariety of preclones consists of the preclones @xmath10 such that the semigroup @xmath819 satisfies @xmath838 for each idempotent @xmath839 .",
    "note that this is exactly the same characterization as for languages of finite words @xcite .    for the characterization of @xmath833-definable languages , let us first define the following relation on a preclone @xmath10 :",
    "if @xmath840 , we say that @xmath841 if @xmath842 for some @xmath843 .",
    "it is easily verified that @xmath844 is a quasi - order .",
    "( the direction of the order is reversed from that used by bojaczyk and walukiewicz , to enhance the analogy with the @xmath845- and @xmath846-orders in semigroup theory ) .      * @xmath819 satisfies the pseudo - identity @xmath847 ( where @xmath848 designates the unique idempotent which is a power of @xmath468 ) ; that is , @xmath819 is @xmath846-trivial , and equivalently , the relation @xmath844 is an order relation ; * @xmath849 for each @xmath850 and @xmath851 , and for each permutation @xmath520 of @xmath21 $ ] ; * @xmath852 for each @xmath853 and @xmath851 such that @xmath854 ; * if @xmath855 and @xmath856 are such that , for each @xmath857 , we have @xmath858 , then @xmath859 for each @xmath853 and @xmath860 .",
    "bojaczyk and walukiewicz also give an interesting characterization of the @xmath833-definable languages in terms of so - called _ type dependency_. in particular , they show that a tree language is @xmath833-definable if and only if its syntactic preclone @xmath10 is such that , whenever @xmath861 is the syntactic equivalence class of a letter in @xmath115 , and the @xmath862 s are syntactic equivalence classes of trees in @xmath122 , then the value of a product @xmath863 depends only on @xmath861 and on the set @xmath864 .",
    "we obtained an algebraic characterization of @xmath3$]-definable regular tree languages in terms of pseudovarieties of preclones , as is reported in @xcite .",
    "a detailed report of this result will appear in @xcite , and the present paper lays the foundations for this proof .",
    "let us note here that this characterization is analogous to the characterization of @xmath3$]-definable languages of finite words in the following sense : it is established in @xcite that @xmath3$]-definable tree languages form a variety of tree languages , whose associated pseudovariety of preclones is the least pseudovariety containing the preclone @xmath140 and closed under a suitable notion of block product .",
    "it was pointed out in example  [ define texists ] that the rank 1 elements of @xmath140 form the 2-element monoid @xmath865 , and it is a classical result of language theory that the least pseudovariety of monoids containing @xmath149 and closed under block product is associated with the variety of @xmath3$]-definable word languages @xcite .",
    "it is also known that , in the word case , this pseudovariety is exactly that of aperiodic monoids , and membership in it is decidable , which shows that @xmath3$]-definability is decidable for recognizable word languages . at the moment",
    ", we do not have an analogue of this result , and we do not know whether @xmath3$]-definability is decidable for regular tree languages .",
    "our result @xcite actually applies to a larger class of logically defined regular tree languages , based on the use of lindstrm quantifiers .",
    "first - order logic is thus a particular case of our result , which also yields ( for instance ) an algebraic characterization of first - order logic with modular quantifiers added .",
    "h. comon , m. dauchet , r. gilleron , f. jacquemard , d. lugiez , s. tison , m. tommasi , _ tree automata techniques and applications _ , available on : http://www.grappa.univ-lille3.fr/tata ( release october 2002 ) .",
    "b. courcelle , the expression of graph properties and graph transformations in monadic second order logic . in : g.",
    "rozenberg ( ed . ) _ handbook of graph grammars and computing by graph transformations _ , vol .",
    "1 , world scientific , 1997 , 313400 ."
  ],
  "abstract_text": [
    "<S> we propose a new algebraic framework to discuss and classify recognizable tree languages , and to characterize interesting classes of such languages . </S>",
    "<S> our algebraic tool , called preclones , encompasses the classical notion of syntactic @xmath0-algebra or minimal tree automaton , but adds new expressivity to it . </S>",
    "<S> the main result in this paper is a variety theorem _  la _ eilenberg , but we also discuss important examples of logically defined classes of recognizable tree languages , whose characterization and decidability was established in recent papers ( by benedikt and sgoufin , and by bojaczyk and walukiewicz ) and can be naturally formulated in terms of pseudovarieties of preclones . finally , this paper constitutes the foundation for another paper by the same authors , where first - order definable tree languages receive an algebraic characterization . </S>"
  ]
}