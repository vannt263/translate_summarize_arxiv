{
  "article_text": [
    "in a series of papers , borgs , chayes , lovsz , ss , szegedy and vesztergombi ( see @xcite and the references therein ) introduced several natural metrics for graphs , and showed that they are equivalent , in that if @xmath9 is a sequence of graphs with @xmath10 , then if @xmath9 is cauchy with respect to one of these metrics then it is cauchy with respect to all of them .",
    "moreover , there is a natural completion of the space of graphs with respect to any of these metrics , consisting of ( equivalence classes of ) _ graphons _ ,",
    "i.e. , symmetric measurable functions @xmath2",
    "^ 2\\to [ 0,1]$ ] . throughout this paper",
    "we assume without loss of generality that @xmath11 has @xmath0 vertices ; we do not require @xmath11 to be defined for all @xmath0 , but only for a sequence @xmath12 . while the results just mentioned apply to all sequences @xmath9 , they are meaningful only for _ dense _ graphs , where @xmath13 .",
    "more precisely , any sequence with @xmath14 converges to the zero graphon .",
    "a different connection between graphs and objects related to graphons arises in the work of bollobs , janson and riordan  @xcite . throughout this paper , by a _ kernel _",
    "@xmath3 we shall mean a symmetric integrable function @xmath2 ^ 2\\to [ 0,\\infty)$ ] ; note that graphons are a special case of kernels .",
    "roughly speaking , in  @xcite an arbitrary kernel @xmath3 was used to define a sparse inhomogeneous random graph @xmath15 , although the details are rather involved .    in",
    "@xcite we extended the definitions of three of the metrics mentioned above , the cut metric @xmath16 , the count ( or subgraph ) metric @xmath17 , and the partition metric @xmath18 , to sparse graphs . in each case one fixes a normalizing function @xmath19 and adapts the definition of the metric to graphs with @xmath20 ; for the details see the definitions in the relevant sections here .",
    "in addition to discussing the relationships between the different metrics , we also discussed the close connection between metrics and random graph models , concentrating on the case where @xmath21 is chosen so that @xmath22 .",
    "here we shall continue this investigation , but now considering the case @xmath23 .",
    "when studying , for example , the random graph @xmath24 , there are many possibilities for @xmath25 as a function of @xmath0 ; which is most natural depends on what kind of properties one is interested in . nevertheless , there are two canonical ranges of particular interest : the _ dense _ case , @xmath26 , and the _ ( extremely ) sparse _ case , @xmath27 , the minimum sensible density .",
    "here we are not only studying random graphs , but it is still true that the most natural special cases are the densest graphs , those with @xmath5 edges , studied by lovsz and szegedy  @xcite and borgs , chayes , lovsz , ss and vesztergombi  @xcite , for example , and the sparsest graphs , those with @xmath1 edges , as studied by bollobs , janson and riordan  @xcite . here",
    "we consider the second range , taking @xmath28 as our normalizing density .",
    "one might expect that graphs with @xmath1 edges are somehow simpler than denser graphs , but in fact the reverse is often the case , particularly for the random graph @xmath24 . as a trivial example , note that there is significant variation in the vertex degrees in @xmath29 , while the degrees in @xmath24 are concentrated around their mean if @xmath22 .",
    "for this reason , we expect graphs with @xmath1 edges to be much harder to work with in the present context , which turns out to be the case .",
    "indeed , as we shall see , hardly any of the results in  @xcite apply to such graphs .",
    "one advantage of the extremely sparse case is that there is a unique natural normalization : except where explicitly indicated otherwise , in this paper we fix @xmath23 as our normalizing function .",
    "we shall discuss several metrics in turn , starting with the cut metric . before doing so ,",
    "let us recall a few definitions from ( for example )  @xcite .    throughout this paper , by a _ kernel _ we mean an integrable function @xmath2 ^ 2\\to[0,\\infty)$ ] with @xmath30 for all @xmath31 , @xmath32 .",
    "rearrangement _ of a kernel @xmath3 is any kernel @xmath33 defined by @xmath34 , where @xmath35\\to[0,1]$ ] is a measure - preserving bijection .",
    "we write @xmath36 if there is a rearrangement @xmath33 of @xmath3 with @xmath37 a.e .",
    "a kernel @xmath3 is of _ finite type _ if there is a finite partition @xmath38 of @xmath6 $ ] such that @xmath3 is constant on each set @xmath39 .",
    "given a graph @xmath11 with @xmath0 vertices and a normalizing function @xmath19 , we write @xmath40 for the finite - type kernel associated to @xmath11 , defined by partitioning @xmath6 $ ] into @xmath0 intervals @xmath41 of length @xmath42 and setting @xmath40 equal to @xmath43 on @xmath44 if @xmath45 , and to equal to @xmath46 otherwise . note that the definition of @xmath40 depends on our normalizing function @xmath19 .",
    "given subsets @xmath47 , @xmath48 of @xmath49 , we write @xmath50 for the number of edges of @xmath51 from @xmath47 to @xmath48 , i.e. , the number of ordered pairs @xmath52 with @xmath53 , @xmath54 and @xmath55 . suppressing the dependence on @xmath11",
    ", we write @xmath56 for the normalized density of edges from @xmath47 to @xmath48 in @xmath11 .    as in  @xcite , given a kernel @xmath3 and a normalizing function @xmath19 , we write @xmath57 for the random graph defined by choosing vertex types @xmath58 independently and uniformly from @xmath6 $ ] , and , given these types , joining each pair @xmath59 of vertices with probability @xmath60 , independently of all other pairs .",
    "when @xmath23 this is a special case of the sparse inhomogeneous model of bollobs , janson and riordan  @xcite ; in  @xcite the sequence @xmath58 is not assumed to be i.i.d .",
    ", so the model there is much more general . on the other hand , in  @xcite",
    "there are certain technical assumptions , including that @xmath3 is continuous almost everywhere .",
    "these assumptions are not needed here , since the i.i.d .",
    "sequence case is always well behaved ; see the discussion in  @xcite or  @xcite .",
    "when @xmath61 and @xmath3 is bounded by @xmath62 , then @xmath57 is what is called a _",
    "@xmath3-random graph _ by lovsz and szegedy  @xcite .",
    "often in what follows we consider sequences @xmath9 of random graphs , i.e. , sequences of probability distributions on @xmath0-vertex graphs . in general , there is no canonical coupling between these distributions for different @xmath0 , so formally we should only consider convergence in probability .",
    "however , in many cases the error bounds one obtains are strong enough to give almost sure convergence for any coupling , and one can in any case ensure almost sure convergence by passing to a suitable subsequence . since the relevant ` in probability ' notions of ( for example )",
    "cauchy sequences are perhaps unfamiliar and distracting , we shall often implicitly fix a coupling and consider almost sure convergence instead .    as usual , when discussing random graphs we say that a sequence of events @xmath63 holds _ with high probability _ , or _",
    "if @xmath64 as @xmath65 .",
    "we write @xmath66 to denote convergence in probability .",
    "if @xmath67 is a sequence of random variables and @xmath68 a function , then @xmath69 means @xmath70 .",
    "let us briefly recall the definitions of the cut norm of frieze and kannan  @xcite , and the cut metric , defined for kernels and dense graphs by borgs , chayes , lovsz , ss and vesztergombi  @xcite , and adapted to sparse graphs in  @xcite .",
    "given an integrable function @xmath2 ^ 2\\to { { \\mathbb r}}$ ] , its _ cut norm _",
    "is @xmath71 } \\left|\\int_{s\\times t } { \\kappa}(x , y ) { \\,d}x{\\,d}y\\right|,\\ ] ] where the supremum is over all pairs of measurable subsets of @xmath6 $ ] .",
    "the _ cut metric _ is defined for kernels by @xmath72 where the infimum is over all rearrangements of @xmath73 .",
    "the cut metric is extended to graphs by mapping a graph @xmath11 to the corresponding finite - type kernel @xmath40 .",
    "note that this mapping depends on the normalizing function @xmath19 , so when applying the cut metric to graphs we should more properly speak of the _ @xmath25-cut metric_. however , all our metrics will depend on the normalizing function @xmath25 , so most of the time we shall not indicate this dependence .    in the dense and intermediate ranges ,",
    "one of the key results used in the study of the cut metric is some form of szemerdi s lemma  @xcite . in the extremely sparse",
    "setting , there is no way to apply szemerdi s lemma : the ` bounded density ' assumption considered in  ( * ? ? ?",
    "* section 4 ) can only be satisfied if @xmath74 , and there is no reasonable way to define an @xmath75-regular partition so that such a thing exists at all !",
    "correspondingly , many of the nice properties of the cut metric fail when @xmath23 , as we shall now see .    given a graph @xmath51 and a kernel @xmath3 , let @xmath76 .",
    "as shown in  @xcite , when @xmath22 then , under suitable mild assumptions , any sequence @xmath9 had a subsequence converging to some ( bounded ) kernel .",
    "here such convergence is impossible , except in the trivial case where @xmath77 almost everywhere ( in which case @xmath78 simply says that @xmath74 ) .",
    "this is easy to see for bounded kernels ( using  ( * ? ? ?",
    "* lemma  4.2 ) ) , but in fact holds for arbitrary kernels .",
    "set @xmath23 , let @xmath3 be a symmetric measurable function on @xmath6 ^ 2 $ ] with @xmath79 , and let @xmath9 be a sequence of graphs with @xmath80 .",
    "then @xmath81 is bounded away from zero .",
    "suppose not ; then , passing to a subsequence , we have @xmath78 .",
    "hence there are rearrangements @xmath82 of @xmath3 such that @xmath83 note that @xmath84 so @xmath85 .",
    "in particular , @xmath11 has @xmath1 edges .",
    "let @xmath86 be a largest matching in @xmath11 .",
    "we claim that there is a constant @xmath87 such that , for @xmath0 large enough , @xmath86 contains at least @xmath88 edges .",
    "otherwise , passing to a subsequence , we may assume that @xmath89 .",
    "writing @xmath90 for the vertex set of @xmath86 , and @xmath91 for its complement , we have @xmath92 .",
    "let @xmath93 be the subset of @xmath6 $ ] corresponding to @xmath91 under the rearrangement @xmath94 .",
    "then , from , @xmath95 .",
    "writing @xmath96 for lebesgue measure , we have @xmath97 , so from basic properties of integration it follows that @xmath98 ^ 2}{\\kappa}$ ] , which is positive by assumption .",
    "this contradiction proves the claim .",
    "fix @xmath87 for which the claim above holds .",
    "since @xmath3 is integrable , we have @xmath99 as @xmath100 , where @xmath101 ^ 2\\to \\{0,1\\}$ ] is the indicator function of the event that @xmath102 . in particular , there is a @xmath103 with @xmath104 .",
    "fix an @xmath0 with @xmath105 , noting that if @xmath106 ^ 2 $ ] satisfies @xmath107 , then @xmath108 choosing @xmath0 large enough , we may assume from that there is a @xmath109 with @xmath110    let @xmath111 be a matching in @xmath11 with @xmath112 ; such a matching exists by our claim .",
    "let @xmath113 and @xmath114 .",
    "identifying subsets of @xmath115 with subsets of @xmath6 $ ] in the natural way , from we have @xmath116 let @xmath117 be a random subset of @xmath47 obtained by selecting each vertex independently with probability @xmath118 , and let @xmath119 be the complementary subset of @xmath48 , defined by @xmath120 .",
    "the edges of our matching never appear as edges from @xmath117 to @xmath119 . on the other hand ,",
    "any other edge @xmath121 , @xmath122 , from @xmath47 to @xmath48 has probability @xmath123 of appearing .",
    "hence , @xmath124 similarly , writing @xmath106 ^ 2 $ ] for the union of the @xmath125 @xmath42-by-@xmath42 squares corresponding to the edges @xmath126 , we have @xmath127 combining the last three displayed equations using the triangle inequality , and noting that @xmath128 , it follows that @xmath129 using . on the other hand , from , @xmath130 always holds , which implies a corresponding upper bound on the difference of the expectations . since @xmath131",
    ", we obtain a contradiction , completing the proof .",
    "the argument above in fact shows much more .",
    "[ nocauchy ] with @xmath23 , a sequence @xmath9 of graphs with @xmath80 is cauchy with respect to @xmath16 if and only if @xmath74 .",
    "if @xmath74 then @xmath9 is trivially cauchy , so we may assume that @xmath9 is cauchy .",
    "on the one hand , if there is some @xmath87 such that infinitely many @xmath11 contain a matching of size at least @xmath88 then , passing to a subsequence , we may assume that all @xmath11 do .",
    "the argument above then shows that for any kernel @xmath3 , if @xmath0 is large enough then @xmath132 . applying this with @xmath133 shows that @xmath9 can not be cauchy .",
    "on the other hand , if the largest matching in @xmath11 has size @xmath134 , then @xmath11 contains @xmath135 vertices spanning no edges , which implies that @xmath136 for any fixed kernel @xmath3 .",
    "taking @xmath133 , since @xmath137 is cauchy it follows that @xmath138 as @xmath139 , i.e. , that @xmath74 .    theorem  [ nocauchy ] shows that one can not hope to extend the results of borgs , chayes , lovsz , ss and vesztergombi  @xcite for the dense version of @xmath16 , or those of  @xcite for the sparse version with @xmath22 , to the present extremely sparse case .",
    "it may still make sense , however , to use @xmath16 as a measure of the similarity of two graphs @xmath140 , @xmath141 with the same number @xmath0 of vertices .",
    "for this purpose , as in the denser context , there is a more natural metric @xmath142 , defined as the minimum over graphs @xmath143 with @xmath144 and @xmath143 isomorphic to @xmath140 of the maximum over @xmath145 of @xmath146 .",
    "( this corresponds to only allowing rearrangements of @xmath6 $ ] that map vertices , i.e. , intervals @xmath147 $ ] , into vertices . ) in the extremely sparse case , it is not so clear what it means for @xmath148 to tend to zero , if @xmath11 , @xmath149 are graphs with @xmath0 vertices .",
    "for example , consider the following concrete question :    fix @xmath87 , and let @xmath11 and @xmath149 be independent instances of the erds ",
    "rnyi random graph @xmath29 .",
    "does the expected value of @xmath148 tend to @xmath46 as @xmath65 ?",
    "if we consider graphs that are even a little denser , i.e. , @xmath24 with @xmath22 , then the answer is trivially yes , defining @xmath150 with respect to this density , of course .",
    "indeed , there is no need to rearrange the vertices of @xmath149 in this case : it is immediate from chernoff s inequality that whp every cut in @xmath24 has size within @xmath151 of its expectation .",
    "as we shall see , in the extremely sparse case the situation is rather different .",
    "firstly , with @xmath152 , rearrangement is certainly necessary : we must match all but @xmath134 of the @xmath153 isolated vertices of @xmath11 with isolated vertices of @xmath149 .",
    "in fact , matching up almost all the small components of @xmath11 with isomorphic small components of @xmath149 , it is not hard to see that the question above reduces to a question about the giant component of @xmath29 .",
    "in particular , if @xmath154 , then the answer is yes , for the rather uninteresting reason that @xmath11 can be made isomorphic to @xmath149 by adding and deleting @xmath155 edges .",
    "as we shall see , this is the only possibility for a positive answer !    for two graphs @xmath140 , @xmath141 with the same number of vertices , the _ ( normalized ) edit distance _ between @xmath140 and @xmath141 is the minimum number of edge changes ( additions or deletions ) needed to turn one of the graphs into a graph isomorphic to the other , divided by @xmath156 : @xmath157 usually , one would leave the edit distance unnormalized ; here we normalize for consistency with our notation for @xmath150 .",
    "it seems that axenovich , kzdy and martin  @xcite were the first to define the edit distance explicitly , although implicitly the notion had been used much earlier , e.g. , by erds  @xcite and simonovits  @xcite in 1966 , and in many subsequent papers . if @xmath158 , then , trivially , @xmath159 . in general",
    ", @xmath150 may be _ much _ smaller than @xmath160 ; for example , in the dense case where @xmath61 , two independent instances of the random graph @xmath161 are very close in @xmath150 , but far apart in @xmath160 .",
    "one can construct sparse examples by ` cheating ' : take two instances of @xmath162 padded with @xmath163 isolated vertices .",
    "although @xmath150 and @xmath160 are in general very different , in the extremely sparse case it turns out that they are closely related , at least for well behaved graphs .",
    "[ dcde ] let @xmath23 , and let @xmath9 and @xmath164 be sequences of graphs with @xmath165 edges , with @xmath166 .",
    "suppose that any @xmath134 vertices of @xmath11 meet @xmath134 edges of @xmath11 , and that the same holds for @xmath149 .",
    "then @xmath167 if and only if @xmath168 .    as noted above ,",
    "@xmath169 , so our task is to show that if @xmath167 , then @xmath168 . relabelling the vertices of @xmath149 , we may assume that @xmath170 .",
    "let @xmath171 be a constant such that @xmath172 .",
    "suppose first that @xmath173 ( or @xmath174 ) contains a matching @xmath175 of size at least @xmath88 , for some constant @xmath87 .",
    "set @xmath176 , and select each edge of @xmath175 with probability @xmath177 , independently of the others .",
    "write @xmath178 for the set of edges obtained , and @xmath179 for the vertex set of @xmath178",
    ". then @xmath180))$ ] , the expected number of edges of @xmath11 spanned by @xmath179 , is at least @xmath181 , considering only edges in @xmath175 . on the other hand ,",
    "if @xmath182 has both ends in the vertex set of @xmath175 , then the probability that both endpoints of @xmath183 are included in @xmath179 is @xmath184 , so @xmath185))\\le a^2e(g_n ' ) \\le a^2cn$ ] . recalling that @xmath186 , it follows that @xmath187)- e(g_n'[v])\\bigr ) } \\ge acn - a^2cn = c^2n/(4c ) = \\theta(n).\\ ] ] choosing a set",
    "for which the random difference is at least its expectation , we see that @xmath188 , a contradiction .    from the above",
    "we may assume that the largest matchings in @xmath189 and in @xmath190 have size @xmath134 .",
    "but then there is a set @xmath179 of @xmath134 vertices that meets every edge of the symmetric difference @xmath191 . by assumption",
    ", @xmath179 meets only @xmath134 edges of @xmath192 , so it follows that @xmath193 , so @xmath168 .",
    "note that lemma  [ dcde ] becomes false if the condition that @xmath134 vertices meet @xmath134 edges is omitted , as shown by the example mentioned earlier , where @xmath11 and @xmath149 are two instances of the random graph @xmath162 , each with @xmath163 isolated vertices added .",
    "lemma  [ dcde ] applies to two independent instances @xmath140 , @xmath141 of the random graph @xmath29 .",
    "hence , @xmath194 if and only if @xmath195 .",
    "it is not too hard to see that the latter condition can not hold for any @xmath196 .",
    "[ th_notclose ] for every @xmath196 there is a @xmath197 such that , if @xmath140 and @xmath141 are independent instances of @xmath29 , then whp the unnormalized edit distance between @xmath140 and @xmath141 is at least @xmath198 .",
    "in other words , normalizing with @xmath23 , we have @xmath199 whp .",
    "let us start with an observation about @xmath29 .",
    "let @xmath200 be constants ; we shall estimate the probability of the event @xmath201 that @xmath202 contains all but at most @xmath198 edges of some graph @xmath203 isomorphic to @xmath204 , where @xmath204 is any given graph with @xmath205 vertices and at least @xmath206 edges , and @xmath207 .",
    "there are @xmath208 choices for the vertex set of @xmath203 , and then at most @xmath209 graphs @xmath203 with this vertex set isomorphic to @xmath204 . finally , given @xmath203",
    ", there are crudely at most @xmath210 choices for the edges of @xmath203 to omit , while the probability that @xmath29 contains the remaining edges is at most @xmath211 .",
    "hence , @xmath212 if @xmath177 , @xmath213 and @xmath214 are constants with @xmath215 , then the final probability is @xmath216 .    turning to the proof of the theorem , if @xmath217 , then the event @xmath201 holds for any @xmath218 . if @xmath219 , then @xmath140 itself has @xmath0 vertices and @xmath220 edges , so setting @xmath221 and @xmath222 for any @xmath223 , whp @xmath140 has a subgraph @xmath204 with @xmath224 .",
    "setting @xmath225 , whp we have @xmath226 from which the result follows .    if @xmath227 , then the original results of erds and rnyi  @xcite ( see also  @xcite ) imply that there are functions @xmath228 and @xmath229 with @xmath230 such that the largest component of @xmath29 has @xmath231 vertices and @xmath232 edges .",
    "fixing @xmath233 with @xmath234 , it follows that whp @xmath235 contains a subgraph @xmath204 with at most @xmath236 vertices and at least @xmath206 edges .",
    "taking @xmath237 , the result follows as above .    using the results of bollobs , janson and riordan  @xcite",
    ", the proof above may be extended easily to the much more general model @xmath238 , although one first needs to decide what the appropriate statement is . as in  @xcite , let @xmath239 be the integral operator associated to @xmath3 , defined by @xmath240 and let @xmath241 be its @xmath242-norm .",
    "roughly speaking , it was shown in  @xcite that @xmath238 has a giant component if and only if @xmath243 .",
    "( there is a slight caveat here : the results of  @xcite assume that @xmath3 is continuous almost everywhere ; this assumption is only needed due to the more general choice of the vertex types made there .",
    "it is easy to see that these results apply to general @xmath3 if we choose the vertex types i.i.d .",
    ", as we do in the definition of @xmath238 ; this is discussed in  @xcite . )",
    "more precisely , it is shown in  @xcite that if @xmath3 satisfies a certain irreducibility condition , then @xmath238 has a ` giant component ' with @xmath244 vertices and @xmath245 edges , for constants @xmath246 and @xmath247 satisfying @xmath248 whenever @xmath243 ( see theorems 3.1 and 3.5 and proposition 10.1 in  @xcite ) . since any kernel effectively contains an irreducible kernel ( see lemma 5.17 of  @xcite ) , it follows that if @xmath3 is any kernel with @xmath243 , then there are constants @xmath200 depending only on @xmath3 such that , whp , @xmath249 has a ( connected ) subgraph @xmath204 with at most @xmath236 vertices and at least @xmath206 edges . setting @xmath250 , the observation at the start of the proof of theorem  [ th_notclose ] shows that , for any @xmath251 , the probability that @xmath29 contains all but @xmath198 edges of such a graph @xmath204 is @xmath216 .",
    "if @xmath3 is bounded , then we may couple @xmath252 and @xmath253 so that the former is a subgraph of the latter , and it follows that whp independent copies @xmath140 and @xmath141 of @xmath238 are at edit distance at least @xmath254 .",
    "if @xmath3 is unbounded then we can approximate with bounded kernels as in  @xcite ; we omit the details , noting only that , considering bounded kernels @xmath255 tending up to @xmath3 , there is some @xmath256 such that @xmath257 .",
    "then for any @xmath258 , the argument above shows that independent copies of @xmath238 and @xmath259 are whp at distance at least @xmath260 , which does not depend on @xmath261 .",
    "this bound still applies if @xmath261 tends to infinity slowly enough , but then @xmath259 and @xmath238 are very close in @xmath160 .    as shown in  ( * ? ? ?",
    "* proposition 8.11 ) , the graph @xmath238 satisfies the assumptions of lemma  [ dcde ] . putting the pieces together",
    ", we have thus proved the following result .",
    "let @xmath3 be a kernel with @xmath243 , and let @xmath11 and @xmath149 be independent instances of @xmath238 .",
    "then there is a constant @xmath262 such @xmath263 and @xmath264 hold whp.@xmath265    in fact , standard martingale arguments show that each of @xmath266 and @xmath267 is concentrated about its mean , which is thus bounded away from zero .",
    "we omit the details , which are very similar to those in the proof of theorem  [ dpconc ] below .",
    "as noted above for @xmath29 , the condition @xmath243 is necessary : otherwise , from the results of bollobs , janson and riordan  @xcite , @xmath238 consists almost entirely of small tree components , with the number of copies of any given tree concentrated .",
    "it follows easily that @xmath266 and hence @xmath267 converge to @xmath46 in probability ( and almost surely ) in this case .",
    "since it seems that we can not do much with the cut metric @xmath16 in the extremely sparse case , let us now turn our attention to the count or subgraph metric @xmath17 .",
    "as in  @xcite , given two graphs @xmath268 and @xmath51 we write @xmath269 for the number of _ homomorphisms _ from @xmath268 to @xmath51 , i.e. , the number of maps @xmath270 such that @xmath271 implies @xmath272 , and @xmath273 for the number of _ embeddings _ of @xmath268 into @xmath51 , i.e. , the number of injective homomorphisms from @xmath268 to @xmath51 . if @xmath11 has @xmath0 vertices , we normalize the homomorphism and subgraph counts by setting @xmath274 where @xmath19 is our normalizing edge density , here @xmath42 , and @xmath275 is the number of possible embeddings of @xmath268 . in  @xcite ,",
    "the subgraph metric @xmath17 is defined by choosing a certain set @xmath276 of _ admissible _ graphs , and defining @xmath17 so that @xmath9 is cauchy if and only if @xmath277 converges as @xmath65 for each @xmath278 .",
    "let @xmath268 be a connected graph which is not a tree .",
    "the denominator in the definition of @xmath279 or @xmath277 is @xmath280 , which is order @xmath62 if @xmath268 is unicyclic , and tends to zero if @xmath268 contains two or more cycles .",
    "this suggests that , in this range , the parameters @xmath281 and @xmath282 make sense only if @xmath268 is a tree , i.e. , that we should take for @xmath276 the set @xmath283 of ( isomorphism classes of ) finite trees .",
    "indeed , with @xmath268 unicyclic , convergence of @xmath277 simply means that for large @xmath0 , every @xmath11 contains the same number of copies of @xmath268 .",
    "this condition is very far from the kind of global graph property we are looking for . since the expected number of copies of a connected graph @xmath268 in @xmath29 tends to infinity if and only if @xmath268 is tree , roughly speaking we do not expect to see small cycles in graphs with @xmath1 edges",
    "of course , there are natural examples of extremely sparse graphs containing many short cycles , but we should handle these differently ; see section  [ ss_nontree ] . for now , we shall consider graphs that , like @xmath29 , contain few short cycles .",
    "more formally , throughout this section we assume that @xmath9 is _ asymptotically treelike _ , in the sense that @xmath284 for any connected @xmath268 that is not a tree . under a suitable assumption on the degrees in @xmath11 , it suffices to impose condition for cycles .    under the assumption , it is easy to see that the parameters @xmath285 and @xmath286 are essentially equivalent . in particular , up to a @xmath216 error , for any tree @xmath287 , @xmath288 can be written as a linear combination of the parameters @xmath289 , @xmath290 , and vice versa .",
    "we shall work with @xmath291 , which is more natural .",
    "adjusting the normalizing constant very slightly , we shall simply set @xmath292 as in  @xcite , we assume that the normalized counts of all admissible subgraphs remain bounded . in other words , we shall assume that @xmath293 for each tree @xmath287 .",
    "in fact , it will be convenient to make the stronger assumption that the tree counts are _ exponentially bounded _ , i.e. , that there is a constant @xmath171 such that @xmath294 for every tree @xmath287 .",
    "for example , taking @xmath287 to be a star , this condition implies that the @xmath295th moment of the degree of a random vertex of @xmath11 is at most @xmath296 as @xmath65 . as in  @xcite , writing @xmath297 for the set of isomorphism classes of finite graphs , and enumerating the set @xmath283 of isomorphism classes of finite trees as @xmath298 , define a map @xmath299 where @xmath300 is the subset of @xmath297 consisting of graphs satisfying the tree - count bounds above , and @xmath301 $ ] .",
    "we then define the ( tree ) subgraph distance @xmath302 between two graphs @xmath140 and @xmath141 as @xmath303 , where @xmath304 is any metric on @xmath305 giving rise to the product topology .",
    "( it is not clear whether @xmath17 is a metric or only a pseudometric , but this is not important . )",
    "defining @xmath306^k } \\prod_{ij\\in e(f)}{\\kappa}(x_i , x_j)\\prod_{i=1}^k { \\,d}x_i,\\ ] ] as before , we may extend @xmath307 to bounded kernels @xmath3 by mapping @xmath3 to @xmath308 , and it then makes sense to consider the question of when @xmath309 .    unlike the cut metric , it is certainly possible to have convergence in the metric @xmath17 .",
    "indeed , it is easy to check that @xmath310 converges in probability to @xmath311 for any tree @xmath287 and any bounded kernel @xmath3 , and one can then show that @xmath312 in probability and ( coupling suitably ) with probability @xmath62 .    in this section , the main questions we shall consider are : which points @xmath305 of @xmath6^{\\mathcal{t}}$ ] are realizable as limits of sequences @xmath313 , where @xmath9 is asymptotically treelike and has bounded tree counts , and how do these limit points relate to kernels ?",
    "in fact , we shall reformulate these questions slightly .",
    "recall that in the definition of @xmath314 , the tree @xmath287 is labelled .",
    "let us also regard @xmath287 as rooted , with root vertex @xmath62 , say .",
    "letting @xmath315 denote a vertex of @xmath11 chosen uniformly at random , @xmath291 is simply the expected number of embeddings from @xmath287 into @xmath11 mapping the root to @xmath315 . letting @xmath287 run over stars , the numbers @xmath291",
    "give the moments of the degree of @xmath315 ; assuming these moments converge , and that the limiting moments are exponentially bounded , a standard result implies that they determine the limiting degree distribution .",
    "( for an example of two non - negative integer valued distributions with the same finite moments , see janson  @xcite , taking , for example , @xmath316 and @xmath317 in example 2.12 . ) more generally , the parameters @xmath291 for all finite trees @xmath287 provide a sort of moment characterization of the local neighbourhood of @xmath315 .",
    "presumably , if these tree counts are exponentially bounded , then they characterize the distribution of the local neighbourhood of @xmath315 .",
    "( it should not be hard to adapt the proof that convergence of exponentially bounded moments implies convergence in distribution based on the jordan  bonferroni inequalities : consider the event that certain edges are present , forming a copy of some given tree @xmath287 with @xmath315 as the root , and apply inclusion  exclusion to calculate the probability that certain other edges are absent , so @xmath287 is the local neighbourhood of @xmath315 ; we have not checked the details . ) in fact , for this something weaker than exponentially bounded tree counts should be enough , but exponential boundedness is a natural assumption , as it is the global analogue of the ( perhaps too restrictive ) local condition that all degrees are uniformly bounded . in any case , it makes more sense to study the distribution of local neighbourhoods directly , rather than its moments .    for @xmath318 ,",
    "let @xmath319 denote the subgraph of @xmath11 formed by all vertices within graph distance @xmath320 of @xmath315 , regarded as a rooted graph with root @xmath315 .",
    "let @xmath321 denote the set of isomorphism classes of rooted trees of height at most @xmath320 , i.e. , such that every vertex is within distance @xmath320 of the root .",
    "finally , for @xmath322 , let @xmath323 where @xmath315 is a vertex of @xmath11 chosen uniformly at random , and @xmath324 denotes isomorphism as rooted graphs .",
    "officially , the subscript @xmath320 is necessary in the notation , since if @xmath325 , then @xmath326 and @xmath327 are different conditions . in practice , we work with the disjoint union @xmath328 of the sets @xmath321 , @xmath329 , so each @xmath330 comes with a height @xmath320 which we do not indicate in the notation ; @xmath287 may or may not contain vertices at distance @xmath320 from the root .",
    "since each @xmath331 lies in @xmath6 $ ] , any sequence @xmath9 has a subsequence on which @xmath331 converges for every @xmath287 .",
    "we would like to study the set @xmath332 of possible limits @xmath333 arising from asymptotically treelike sequences with exponentially bounded tree counts .",
    "we start with some simple observations . first note that if @xmath9 is asymptotically treelike , then @xmath334 as @xmath65",
    "with @xmath320 fixed ; this is simply the statement that only @xmath134 vertices have cycles in their @xmath320-neighbourhoods . in general , such a statement does not carry over to the limit , since infinite sums are not continuous with respect to pointwise convergence .",
    "recall that we are assuming that the tree counts in @xmath9 are ( exponentially ) bounded .",
    "it is easy to check that , under this assumption , for any @xmath318 and any @xmath335 , there exists an @xmath175 such that , for large enough @xmath0 , at most @xmath336 vertices @xmath315 have more than @xmath175 edges in their @xmath320-neighbourhoods .",
    "( in the terminology of probability theory , for each @xmath320 the sequence @xmath337 of random variables given by @xmath338 is ` tight ' , where @xmath315 is a uniformly chosen random vertex of @xmath11 .",
    "equivalently , the random variables @xmath319 , @xmath339 , are themselves tight . ) in other words , for large @xmath0 , at least @xmath340 of the mass of the distribution @xmath341 is concentrated on a fixed , finite set of trees . under this condition ,",
    "pointwise convergence implies convergence in @xmath342 , and it follows that @xmath343 whenever @xmath344 . in other words , @xmath25 gives a probability distribution on @xmath321 for each @xmath320 .",
    "given a finite or infinite rooted tree @xmath287 , we may define the _ restriction _ of @xmath287 to height @xmath320 to be the subtree @xmath345 of @xmath287 induced by all vertices within distance @xmath320 of the root , which we naturally regard as an element of @xmath321 .",
    "if @xmath9 is asymptotically treelike , then , for any @xmath322 , we have @xmath346 ( the @xmath216 correction appears because of the possibility that the @xmath347 neighbourhood of a random vertex @xmath315 contains a cycle while the @xmath320 neighbourhood does not . ) using @xmath342 convergence , it follows that @xmath348 whenever @xmath344 . in other words , the distribution on @xmath321 is obtained from that on @xmath349 by the natural restriction operation .",
    "this last fact allows us to combine the distributions on @xmath321 given by @xmath350 into a single probability distribution on the set @xmath351 of ( finite or infinite ) locally finite rooted trees .",
    "of course , we take for the set of measurable events the @xmath352-field generated by the sets @xmath353 for @xmath329 and @xmath322 .",
    "we say that a probability distribution @xmath354 on @xmath351 is the _ local limit _ of a sequence @xmath9 of graphs with @xmath80 if @xmath355 holds for every @xmath318 and every @xmath322 .",
    "we should like to know which probability distributions @xmath354 on @xmath351 arise as local limits of asymptotically treelike , exponentially bounded sequences @xmath9 .",
    "( for a closely related question of aldous and lyons  @xcite , see section  [ ss_nontree ] . )",
    "we shall give some examples of such distributions in the next section , arising from random graphs .",
    "here , we give a trivial example : fix @xmath356 and let @xmath354 be the distribution that is concentrated on one point of @xmath351 , the ( infinite ) @xmath304-regular tree .",
    "this distribution arises as a local limit if we take @xmath11 to be a random @xmath304-regular graph with @xmath0 vertices .",
    "having given a trivial example of a distribution that can arise , let us give a trivial example of one that can not .",
    "let @xmath354 be any distribution concentrated on the two trees @xmath357 in which every vertex has degree @xmath358 or @xmath359 , and the neighbours of a vertex of degree @xmath358 have degree @xmath359 and vice versa .",
    "( there are two such trees since our trees are rooted . ) considering graphs @xmath11 in which the vertices have degrees @xmath358 and @xmath359 , there is no ` local reason ' why the neighbourhoods of a random vertex @xmath315 should nt look like the first few generations of @xmath354 . however , unless @xmath354 satisfies an extra condition , there is of course a global reason : there are as many edges from vertices of degree @xmath358 to vertices of degree @xmath359 as vice versa .",
    "thus , if all edges join vertices of different degrees , we must have @xmath360 times as many degree @xmath358 vertices as degree @xmath359 vertices , and if @xmath354 is to arise as a local limit , it must assign probabilities @xmath361 and @xmath362 to the trees in which the root has degree @xmath358 and @xmath359 , respectively .",
    "more generally , consider the following two ways of picking a ( not uniformly ) random vertex of @xmath11 .",
    "( a ) pick a vertex @xmath315 with probability proportional to its degree .",
    "( b ) pick a vertex @xmath363 with probability proportional to its degree , then choose an edge incident with @xmath363 uniformly , and let @xmath315 be the other end of this edge .",
    "it is easy to see that ( a ) and ( b ) give the same distribution for the vertex @xmath315 - indeed , we are simply choosing an edge @xmath183 of @xmath51 at random , and then picking an end of @xmath183 at random . in ( b ) we ` change our minds ' after picking the random end , which makes no difference .",
    "the equivalence of ( a ) and ( b ) gives rise to a consistency condition on our distributions @xmath354 .",
    "let @xmath354 be any probability distribution on @xmath351 in which the expected degree of the root is finite .",
    "( any distribution in @xmath332 will have this property , due to the bounded average degree of graphs in @xmath11 . )",
    "then we may define the ` root - sized - biased ' version @xmath364 of @xmath354 to be the distribution @xmath354 biased by the degree of the root .",
    "in other words , for any @xmath365 and @xmath322 , @xmath366 where the @xmath367 denotes the degree of the root of @xmath287 , and @xmath368 is simply the expectation of the degree of the root of a @xmath354-random @xmath357 .",
    "let us define the _ shift _ @xmath369 of @xmath364 to be the distribution on @xmath351 obtained as follows : first choose a @xmath357 according to the distribution @xmath364 . then pick a neighbour @xmath315 of the root uniformly from among the @xmath367 neighbours .",
    "finally , let @xmath370 be the tree obtained from @xmath287 by taking @xmath315 as the root .",
    "since the restriction of @xmath371 to height @xmath320 is determined by the restriction of @xmath287 to height @xmath347 , it is easy to check that this does define a probability distribution @xmath369 on @xmath351 .    using the equivalence of the procedures ( a ) and ( b ) above for picking a random vertex of @xmath11 , it is easy to see that",
    "if @xmath354 arises as the local limit of one of our sequences @xmath9 , then @xmath354 is _ shift invariant _ , in that @xmath372 .",
    "it is tempting to believe that this condition is sufficient , but in fact , as pointed out to us by gbor elek , this is not the case , as we shall now explain .",
    "an infinite graph is called _ quasi - transitive _ if the action of its automorphism group on the vertex set induces a finite number of orbits , i.e. , if there are only finitely many different ` types ' of vertices in the graph .",
    "a quasi - transitive tree may be described by a square matrix @xmath373 specifying , for each @xmath374 and @xmath375 , the number of type-@xmath375 neighbours each vertex of type @xmath374 has . also , given any square matrix @xmath376 with non - negative integer entries in which @xmath377 if and only if @xmath378 , one can construct a corresponding quasi - transitive tree .",
    "( this correspondence is not one - to - one ; it may be that vertices corresponding to different rows of @xmath376 end up having the same type .",
    "for example , if each row of @xmath376 has the same sum @xmath304 , then @xmath287 is simply the @xmath304-regular tree .",
    "it is easy to describe conditions on @xmath376 under which this kind of ` collapse ' does not happen . )",
    "[ et234 ] * a non - unimodular tree .",
    "* let @xmath287 be the infinite ( unrooted ) tree corresponding to the matrix @xmath379 thus vertices in @xmath287 have degree 2 , 3 or 4 , each vertex has one neighbour of the ` next ' degree ( where @xmath358 follows @xmath380 ) , and 1 , 2 or 3 neighbours of the previous degree .",
    "there are three rooted trees corresponding to @xmath287 ; let us call these @xmath381 , @xmath382 and @xmath383 , where the root of @xmath384 has degree @xmath374 .",
    "suppose that @xmath354 is a probability distribution on @xmath351 supported on @xmath385 , and giving mass @xmath386 to @xmath384 .",
    "suppose also that @xmath354 is the local limit of an asymptotically treelike sequence @xmath9 .",
    "then , considering the @xmath62-neighbourhood of a random vertex , the convergence assumption implies that @xmath11 has @xmath387 vertices of each degree @xmath374 , @xmath388 .",
    "considering the 2-neighbourhood , we also see that @xmath389 vertices of degree @xmath358 , i.e. , all but @xmath134 vertices of degree @xmath358 , have one neighbour of degree @xmath359 and one of degree @xmath380 .",
    "hence the number of edges of @xmath11 from degree 2 vertices to degree 3 vertices is @xmath389 .",
    "but , similarly , all but @xmath134 of the @xmath390 vertices of degree 3 have two neighbours of degree 2 , so there are @xmath391 edges from degree 3 vertices to degree 2 vertices .",
    "hence , @xmath392 .",
    "similar arguments show that @xmath393 and @xmath394 .",
    "together these equations imply that @xmath395 for all @xmath374 , contradicting @xmath396 .",
    "thus there is no probability distribution supported on @xmath385 that is a local limit .",
    "a little calculation shows that taking @xmath397 , @xmath398 and @xmath399 gives a shift - invariant distribution supported on @xmath385 , so this shift - invariant distribution is not a local limit .",
    "the reason for the terminology ` non - unimodular ' above will become clear in section  [ ss_nontree ] . a different example of a non - unimodular tree is given in example  3.1 of benjamini , lyons , peres and schramm  @xcite , corresponding to the matrix @xmath400    the argument leading to @xmath392 in the example above can be generalized . in this argument , we drew an oriented edge from a vertex @xmath31 to a neighbour @xmath32 if the local neighbourhood ( in this case the @xmath358-neighbourhood ) of @xmath31 satisfied a certain rule ( that @xmath31 had degree @xmath358 and @xmath32 degree @xmath359 ) .",
    "we can of course use any such rule . for this",
    "it turns out to be useful to consider _ doubly rooted trees _ , i.e. , trees with an ordered pair of adjacent distinguished vertices @xmath31 and @xmath32 .",
    "formally , we shall consider @xmath401 , the set of triples @xmath402 in which @xmath403 is a rooted locally finite tree and @xmath32 is a neighbour of @xmath31 .",
    "( we do not quotient by isomorphisms at this stage . )",
    "similarly , we consider the set @xmath404 of finite doubly rooted trees in which all vertices are within distance @xmath320 of @xmath31 .",
    "let @xmath405 be any _ isomorphism invariant _ set of doubly rooted trees of radius @xmath320 .",
    "we say that a ( potentially ) infinite doubly rooted tree @xmath406 is in @xmath376 if its restriction to the @xmath320-neighbourhood of the root is in @xmath376 .",
    "note that if @xmath31 and @xmath32 are adjacent vertices of @xmath287 , then @xmath407 is to be viewed as a tree rooted at @xmath32 , with a second distinguished vertex @xmath31 .",
    "we claim that if @xmath354 is a local limit , then @xmath408 where the expectation is over the choice of a random rooted tree @xmath403 with distribution @xmath354 .",
    "the argument is as above so let us just outline it : let @xmath9 be a sequence of finite graphs converging to @xmath354 in the appropriate sense . in each @xmath11 , draw a directed edge from a vertex @xmath31 to a neighbour @xmath32 if and only if @xmath409 , where @xmath410 is the @xmath320-neighbourhood of @xmath31 in @xmath11 .",
    "now the limiting fraction of vertices of @xmath11 whose @xmath320-neighbourhood has a certain form is given by @xmath354 .",
    "it follows that the expected out - degree of a random vertex of @xmath11 converges to the left - hand side of . on the other hand ,",
    "the limiting fraction of vertices of @xmath11 whose @xmath411-neighbourhood has a certain form is again given by @xmath354 . from the @xmath411-neighbourhood of @xmath31 one",
    "can obtain the @xmath320-neighbourhood of each neighbour @xmath32 of @xmath31 , and thus decide whether we drew an edge from @xmath32 to @xmath31 .",
    "it follows that the expected in - degree converges to the right - hand side of . since in any finite",
    "directed graph , the average out- and in - degrees are equal , follows .",
    "let @xmath324 denote isomorphism of doubly - rooted trees .",
    "in the above , we took @xmath376 to be any subset of @xmath412 such that whether @xmath413 holds is determined by the @xmath320-neighbourhood of @xmath31 for some @xmath414 . in general , we can consider arbitrary subsets of @xmath412 that may be approximated by such subsets , i.e. , arbitrary measurable subsets of @xmath412 .",
    "also , replacing a subset by its characteristic function , there is no need to restrict to @xmath46-@xmath62 functions .",
    "this leads us to the following definition .",
    "let @xmath354 be a probability measure on @xmath351",
    ". then @xmath354 is called _ involution invariant _ if for every non - negative measurable function @xmath415 on @xmath412 we have @xmath416 where the expectation is over the @xmath354-random rooted tree @xmath403 , and the sum is over all neighbours @xmath32 of @xmath31 .",
    "note that @xmath415 must be isomorphism invariant , but if the root @xmath31 of @xmath287 has degree @xmath304 , then there are @xmath304 terms in the sums above , even if several of these correspond to isomorphic doubly - rooted trees .",
    "note also that it suffices to consider functions @xmath415 that are characteristic functions of measurable sets .",
    "we have seen above that if @xmath354 is a local limit then @xmath354 must be involution invariant .",
    "this observation was first made ( in a slightly different context ) by benjamini and schramm  @xcite ; we return to this in section  [ ss_nontree ] .",
    "we do not know whether this necessary condition on @xmath354 is sufficient .",
    "( see also question  [ qglim ] . )",
    "[ qtlim ] does every involution - invariant probability distribution on @xmath351 arise as the local limit of some sequence @xmath9 of graphs with @xmath80 ?",
    "the sequence @xmath9 above will necessarily be asymptotically treelike ( otherwise the total weight of @xmath354 would be less than @xmath62 , so @xmath354 would not be a probability distribution ) . however , in the question above we have lost the condition that the tree counts of @xmath9 be exponentially bounded .",
    "such a condition may or may not be needed to get sensible limiting behaviour . to avoid possible complications , in the first draft of this paper we posed the following variant of question  [ qtlim ] .",
    "[ qtlimd ] let @xmath417 be given , and let @xmath354 be an involution - invariant probability distribution on the set of trees @xmath357 with maximum degree at most @xmath418",
    ". must @xmath354 arise as the local limit of some sequence @xmath9 of graphs with all degrees at most @xmath418 ?",
    "question  [ qtlimd ] has now been answered in the affirmative by elek  @xcite .",
    "let us finish this section by noting that there is a certain class of distributions for which the answer to the questions above is trivially yes , namely the class of probability distributions @xmath354 on _ finite _ rooted trees .",
    "it is easy to check that a distribution @xmath354 on the set of finite rooted trees ( a subset of @xmath351 ) corresponds in the natural way to a distribution on unrooted trees if and only if @xmath354 is involution invariant . in this case",
    "it is easy to construct forests @xmath11 with the appropriate limiting distribution of trees .",
    "we have seen in the previous section that the metric @xmath17 , defined using only tree counts , makes sense in the extremely sparse case ( @xmath23 ) , in that there are non - trivial convergent sequences : unlike the cut metric , @xmath17 is not ` too strong ' to be meaningful . here",
    "we ask whether it is ` too weak ' to be useful , i.e. , whether too many sequences converge that ` should not ' .",
    "of course this is rather a vague question , so we concentrate on a precise special case : we have seen that for any bounded kernel we have @xmath312 with probability 1 , so we ask : which kernels are distinguished by @xmath17 ?",
    "in other words , when do two kernels @xmath419 and @xmath73 satisfy @xmath420 for every tree @xmath287 ? as in the previous section , we shall change viewpoint slightly , considering the distribution of local neighbourhoods , rather than counting subgraphs .    adopting the terminology of bollobs , janson and riordan  @xcite ,",
    "let @xmath421 be an arbitrary probability space . by a _ kernel _ on @xmath421",
    "we mean an integrable , symmetric , non - negative function on @xmath422 .",
    "so far we have almost always taken @xmath423 $ ] and @xmath96 lebesgue measure , but the notation is more convenient if we are rather more general here .",
    "as in  @xcite ( but taking the special case where the vertex types are i.i.d . )",
    ", suppressing the dependence on @xmath421 in the notation , we may form a random graph @xmath238 as follows : let @xmath424 be i.i.d .  with the distribution @xmath96 , and then , given @xmath425 , join each pair of vertices @xmath426^{(2)}$ ] with probability @xmath427 , independently of the other pairs .",
    "we say that vertex @xmath374 has _ type _",
    "@xmath428 and call @xmath421 the _ type space_.    let @xmath429 be the multi - type poisson galton ",
    "watson branching process naturally associated to @xmath3 : we start in generation @xmath46 with a single particle whose type is distributed according to @xmath96 .",
    "a particle of type @xmath31 has children whose types form a poisson process on @xmath430 with the distribution @xmath431 : the number of such children in a measurable set @xmath432 is poisson with mean @xmath433 . as usual , the children of different particles are independent , and independent of the history .",
    "this branching process is the key to the analysis of the random graph @xmath238 in  @xcite .",
    "the branching process @xmath429 is of course simply a random rooted tree with labels attached to the vertices , giving the type of each vertex . forgetting the labels",
    ", we may regard @xmath429 as a random rooted tree ; we write @xmath434 for the corresponding probability measure on @xmath351 .",
    "it is not hard to check that if @xmath3 is bounded , then @xmath434 provides the correct local approximation for @xmath238 : in the notation of the previous section , for each @xmath322 we have @xmath435 this is the distributional equivalent of the convergence in moments given by @xmath436 for every tree @xmath287 .    in the light of the comments above , we should like to answer the following question : when do two different branching processes @xmath437 and @xmath438 give rise to the same random tree ?",
    "in other words , when is @xmath439 ?",
    "it is not hard to check that , at least for bounded @xmath3 , the counts @xmath440 determine @xmath434 and vice versa , so this is the same question as that asked at the start of the section . since @xmath441 directly describes the local structure of @xmath238 , we consider the present branching process formulation more informative .",
    "there is an obvious case when @xmath439 : let @xmath442 be a kernel on @xmath443 .",
    "we say that @xmath419 _ refines _",
    "@xmath73 , and write @xmath444 , if there is a measure - preserving map @xmath445 such that for @xmath446-almost every @xmath447 we have @xmath448 for all measurable @xmath449 .",
    "( this is a very different notion to that appearing in ( * ? ? ? * subsection 2.4 ) , despite the superficial similarity to @xmath450 . ) in other words , if we take a particle of @xmath437 and look at the distribution of the images under @xmath451 of the types of its children , then this distribution depends only on the image of the type of the original particle , and it does so according to the kernel @xmath73 . from this description it is immediate that if @xmath444 , then @xmath439 .    from now on we shall concentrate on the finite - type case , i.e. , take @xmath430 to be finite .",
    "note that there is a natural correspondence between this case and the case of kernels @xmath3 on @xmath6 ^ 2 $ ] that are piecewise constant on rectangles . in this case",
    "@xmath452 simply means that the types associated to @xmath419 may be grouped together to form the types associated to @xmath73 , and the distribution of the grouped types of the children of a particle in @xmath437 is what it should be in @xmath438 .",
    "the relation @xmath453 is clearly transitive .",
    "hence the natural conjecture is that two kernels give the same distribution on trees if and only if they have a common refinement .",
    "or should it be if and only if they are both refinements of a common ` coarsening ' ?",
    "in fact , somewhat surprisingly , the two are equivalent !    [ updown ] let @xmath419 and @xmath73 be finite - type kernels .",
    "then the following are equivalent : ( i ) there is a finite - type kernel @xmath454 with @xmath455 and @xmath456 , and ( ii ) there is a finite - type kernel @xmath457 with @xmath458 and @xmath459 .",
    "let @xmath442 have type - space @xmath443 .",
    "since the definition of @xmath453 ignores sets of measure zero , we may assume that each @xmath460 is a strictly positive measure on the finite set @xmath461 .",
    "we start by showing that ( ii ) implies ( i ) .",
    "suppose then that @xmath458 and @xmath459 .",
    "let @xmath457 have type space @xmath462 .",
    "then each of @xmath437 , @xmath438 may be viewed as @xmath463 with ` extra labels ' on the vertices , indicating the subtypes in @xmath461 .",
    "we wish to add labels of both kinds simultaneously .",
    "it is easy to write down a way of doing so .",
    "let @xmath464 be the map witnessing @xmath465 .",
    "let @xmath466 be the set of pairs @xmath467 with @xmath468 , and set @xmath469 summing first over all @xmath470 and @xmath471 mapping to a given @xmath472 , it is easy to check that @xmath473 is a probability measure on the finite set @xmath466 .",
    "it remains to define an appropriate kernel .    for @xmath474 , @xmath475 , set @xmath476 whenever the denominator is non - zero , and set @xmath477 otherwise .    since , despite appearances , the definitions above are symmetric with respect to @xmath419 and @xmath73 , to establish ( i ) it suffices to show that @xmath478 .",
    "of course , in doing so we shall map @xmath479 to @xmath470 .",
    "this map is measure preserving .",
    "since @xmath480 is of finite type , all we must check is that for any @xmath479 and @xmath481 , a particle of type @xmath474 in @xmath482 has the right number of children of ( subtypes of ) type @xmath295 . in other words",
    ", we must show that @xmath483 if @xmath484 is zero then @xmath485 is also zero ( since @xmath486 ) , so both sides are zero .",
    "otherwise , the left hand side above is simply @xmath487 recalling that @xmath468 , the final fraction is @xmath62 since @xmath488 is a map witnessing @xmath489 : the numerator and denominator both express , for a particle of type @xmath490 ( and hence of type @xmath491 ) , the expected number of children of type @xmath492 .",
    "this completes the proof that ( ii ) implies ( i ) .",
    "suppose now that ( i ) holds , i.e. , that @xmath419 and @xmath73 have a common refinement @xmath454 .",
    "each type in the corresponding type space maps to some @xmath493 and some @xmath490 .",
    "it is easy to see that we may group together all types mapping to the same pair @xmath474 , obtaining a common refinement of @xmath419 and @xmath73 that we also denote @xmath454 , with type space @xmath466 a subset of @xmath494 .",
    "as before , we delete any types with measure zero .",
    "we may regard @xmath466 as the edge set of a bipartite graph @xmath51 with vertex classes @xmath495 and @xmath496 ; we shall construct the common coarsening @xmath457 as a kernel with type space the set of components of @xmath51 . since @xmath497 ,",
    "the map from @xmath466 to @xmath495 given by @xmath498 is measure preserving .",
    "in other words , for each @xmath375 , writing @xmath499 for @xmath474 , @xmath500 similarly , @xmath501 . for each component @xmath171 of @xmath51 , set @xmath502 ; this defines a probability measure on the set @xmath503 of components of @xmath51 .",
    "if @xmath171 has vertex set @xmath504 , @xmath505 , then from , @xmath506 hence the map @xmath507 mapping each @xmath508 to the component in which it lies is measure preserving . similarly for the corresponding map @xmath509 .",
    "fix two components @xmath171 and @xmath510 of @xmath51 , which need not be distinct . for each edge @xmath511",
    "set @xmath512 the expected number of children in @xmath510 of a particle in @xmath513 of type @xmath183 .",
    "writing @xmath514 , we may rewrite @xmath515 as follows : @xmath516 where the second step is from @xmath478 .",
    "this quantity does not depend on @xmath375 , so if @xmath517 , @xmath518 are edges of @xmath171 meeting at a vertex of @xmath519 , then @xmath520 .",
    "a similar argument , using @xmath521 , gives the same conclusion for edges meeting at a vertex of @xmath522 .",
    "since @xmath171 is connected , it follows that @xmath515 is constant on the edges of @xmath171 .",
    "let us write the common value as @xmath523 .",
    "then , for each @xmath524 , @xmath525 and similarly , for each @xmath526 , @xmath527 these last two identities establish @xmath486 and @xmath459 respectively , completing the proof .",
    "the statement of theorem  [ updown ] makes sense in the general case , without the restriction to finite - type kernels , but the proof as written does not .",
    "it is easy to adapt the proof that ( ii ) implies ( i ) to the general case , but it does not seem to be easy to prove that ( i ) implies ( ii ) in general . indeed , it is not impossible that this implication is false in the general case .    our main aim in this section is to prove the following result .",
    "[ bpdist ] let @xmath419 and @xmath73 be finite - type kernels .",
    "then @xmath439 if and only if there is a kernel @xmath457 with @xmath458 and @xmath459 .",
    "the proof will be a little involved ( although most of the difficulties are notational rather than actual ) , so we shall start by illustrating a very simple special case of the basic idea .",
    "let @xmath3 be a kernel on the ( finite ) type space @xmath421 .",
    "in fact , our initial remarks will apply to general kernels .",
    "let @xmath357 denote a random rooted tree with distribution @xmath434 , so @xmath287 is obtained from @xmath429 by forgetting the types of the particles . also , let @xmath528 denote the subtree of @xmath287 corresponding to the first @xmath320 generations of @xmath429 .",
    "we shall show that the distribution of @xmath529 is determined by a certain function of @xmath3 , and vice versa .",
    "we start by writing out the much simpler case @xmath530 .",
    "the tree @xmath531 is simply a star , so its distribution is determined by the distribution of the degree of the root , i.e. , the distribution of the number @xmath532 of children of the initial particle of @xmath429 . as in  @xcite , for each @xmath533 , let us write @xmath534 for the _ expected degree _ of @xmath31 , i.e. , the expected number of children of a particle of type @xmath31 .",
    "( the reason for the subscript @xmath62 will become clear later . ) also , let @xmath535 denote the _ ( first order ) expected degree distribution _ of @xmath3 , i.e. , the distribution of @xmath536 when @xmath31 is chosen according to the distribution @xmath96 . from the definition of @xmath429 , given the type of the root , @xmath532 has a poisson distribution with mean @xmath536 .",
    "thus the unconditional distribution of @xmath532 is the mixed poisson distribution @xmath537 , defined in the discrete case by @xmath538 where the sum is over the finite set of possible values of @xmath539 .",
    "it follows that the distribution @xmath539 determines the distribution of @xmath532 , and hence of @xmath531 .",
    "the reverse is also true , since the distribution of @xmath537 determines that of @xmath539 .",
    "( this is trivial in the discrete case , using the tail of @xmath540 for large @xmath295 to identify the maximum possible value of @xmath539 and its probability , then subtracting off the corresponding contribution to the sum in  , identifying the next largest possible value , and so on .",
    "the general case is not hard , using the generating function of the distribution @xmath537 . )",
    "let @xmath31 be a type with @xmath541 . from the definition of @xmath429 , the types of the children of a particle of type @xmath31 form a poisson process on @xmath430 with intensity measure @xmath542 , defined by @xmath543 .",
    "in order to understand the distribution of @xmath381 , we consider the _ offspring expected degree distribution _",
    "@xmath544 , the image of @xmath545 under the map @xmath546 .",
    "thus , if @xmath542 were a probability measure , @xmath544 would be the distribution of @xmath547 when @xmath548 has the distribution @xmath542 ; in general , neither @xmath542 nor @xmath544 is a probability measure : they both have total mass @xmath549 .",
    "similarly , for @xmath550 , we define @xmath551 to be the image of the measure @xmath545 under the map @xmath552 .",
    "thus @xmath553 note that for a given @xmath31 , @xmath554 is a real number , @xmath544 is a measure on the reals , @xmath555 is a measure on the set of measures on the reals , and so on .",
    "if @xmath3 is of finite type , then all these measures are discrete . by the _",
    "@xmath295-th order expected degree distribution _",
    "@xmath556 of @xmath3 , we mean the distribution of @xmath551 when @xmath31 is chosen randomly with distribution @xmath96",
    ".    we shall deduce theorem  [ bpdist ] from the following lemma .",
    "[ l_claim1 ] fix @xmath557 , and let @xmath3 be a finite - type kernel . then the distribution @xmath558 determines the distribution of @xmath559 and vice versa .",
    "the restriction to finite - type kernels is presumably not needed here , but simplifies the proofs , avoiding any possible difficulties associated to choosing the right notion of convergence .",
    "note that we have already proved the case @xmath560 .",
    "before proving lemma  [ l_claim1 ] , let us show that theorem  [ bpdist ] does indeed follow .",
    "if @xmath458 and @xmath459 , then @xmath561 ; the content of the theorem is the reverse implication . we shall show that if @xmath3 is a finite - type kernel , then one can define a ( finite - type ) kernel @xmath457 with @xmath562 in a way that depends only on @xmath434 ; this clearly implies the result .",
    "given a finite - type kernel @xmath3 on @xmath421 , define an equivalence relation @xmath563 on @xmath430 by @xmath564 if @xmath565 for every @xmath295 .",
    "if @xmath566 , then there is some smallest @xmath567 such that @xmath568 .",
    "let @xmath569 be an upper bound on the set @xmath570 , which exists since @xmath430 is finite . since @xmath571 determines @xmath551 , we have @xmath572",
    "whenever @xmath566 , so @xmath573 note that @xmath569 is determined by the set @xmath558 , @xmath574 : we may take @xmath569 to be the smallest integer such that the distribution of @xmath575 ( which then determines that of @xmath576 ) has property .",
    "let us define a type space @xmath503 whose elements are the possible values of @xmath577 , @xmath578 , and a corresponding @xmath579 given by the @xmath96-probability of the corresponding set of ( equivalent ) types @xmath533 .",
    "note that @xmath503 and @xmath579 depend only on the distribution of @xmath577 , and hence are determined by @xmath580 .",
    "we map @xmath430 to @xmath503 in the obvious way ; this map is measure preserving by definition .",
    "the distribution of @xmath581 over children @xmath32 of a particle of type @xmath31 is determined by @xmath582 , and hence , from , by @xmath577 .",
    "it follows that the distribution of the @xmath503-types of the children depends only on the @xmath503-type of @xmath31 .",
    "this is exactly the statement that there is a kernel @xmath583 on @xmath462 with @xmath584 .",
    "the kernel @xmath583 is determined by the distribution of @xmath585 , i.e. , by @xmath586 .",
    "hence , @xmath583 is determined by the sequence @xmath558 , @xmath587 . using lemma  [ l_claim1 ]",
    "it follows that @xmath583 is determined by the distribution of @xmath559 for all @xmath295 , and thus by @xmath434 .",
    "as noted above the existence of such a @xmath583 with @xmath584 suffices to prove the theorem .",
    "it remains to prove lemma  [ l_claim1 ] .",
    "note the lemma makes two separate statements ; in proving theorem  [ bpdist ] we only used one of these , that the distribution of @xmath559 determines that of @xmath558 .",
    "we shall prove lemma  [ l_claim1 ] by induction ; for this we need both statements .",
    "in fact , to make the induction work , we shall need to prove a little more .",
    "let @xmath3 be a kernel on the finite type - space @xmath421 .",
    "the measure @xmath96 plays two roles in the branching process @xmath429 : it appears in the distribution of the offspring of a particle , and also in the distribution of the type of the initial particle",
    ". it will be convenient to generalize @xmath429 slightly as follows : let @xmath588 be any probability measure on @xmath430 , and let @xmath589 be the branching process defined as @xmath429 , but starting with a single particle of type distributed according to @xmath588 .",
    "note that @xmath589 depends on @xmath96 as well as @xmath588 , and that @xmath590 .",
    "let @xmath591 denote the distribution of @xmath551 when @xmath31 is chosen randomly with distribution @xmath588 , so @xmath592 .",
    "also , let @xmath593 denote the random rooted tree obtained from the first @xmath295 generations of @xmath589 by forgetting the types of the particles .",
    "the following lemma is slightly stronger than lemma  [ l_claim1 ] , which can be recovered by setting @xmath594 .",
    "[ l_claim2 ] fix @xmath557 , let @xmath3 be a finite - type kernel on @xmath421 , and let @xmath588 be a probability measure on @xmath430 . then ( i ) the distribution @xmath591 determines the distribution of @xmath593 , and ( ii ) the distribution of @xmath593 determines @xmath591 .",
    "we start with the easier statement , namely part ( i ) , which we prove by induction on @xmath295 ; as noted above , the case @xmath560 is trivial : @xmath531 is a star the degree of whose root has the mixed poisson distribution @xmath595 .",
    "suppose then that @xmath596 and that ( i ) holds with @xmath295 replaced by @xmath597 .",
    "it is easy to see that it suffices to prove ( i ) with @xmath588 concentrated on a single type @xmath31 , in which case @xmath598 .",
    "let us fix the type @xmath578 of the root , writing @xmath599 for the branching process @xmath429 started with a single particle of type @xmath31 .",
    "let @xmath600 denote the first generation of @xmath601 .",
    "given @xmath600 , the descendants of a particle @xmath315 in @xmath600 have the distribution of @xmath602 , where @xmath32 is the type of @xmath315 , and the subtrees corresponding to different @xmath315 are independent . by induction , the distribution of the first @xmath597 generations of the descendants of @xmath315 are determined by @xmath603 . hence , given @xmath600 , the conditional distribution of @xmath559 depends only on the multiset @xmath604 , where @xmath32 runs over the types in @xmath600 .",
    "given the type @xmath31 of the root , the types of the particles in @xmath600 form a poisson process on @xmath430 with intensity measure @xmath542 .",
    "hence , @xmath175 is a poisson process on the appropriate space of distributions with intensity measure @xmath551 . in particular , the distribution of @xmath175 , and hence that of @xmath559 , is determined by @xmath551 , completing the proof of part ( i ) by induction .",
    "we now turn to the reverse implication , part ( ii ) , which we again prove by induction .",
    "for @xmath560 the argument is as before : the degree of the root in @xmath605 has a mixed poisson distribution @xmath595 , which determines @xmath606 .",
    "suppose then that @xmath596 , and that ( ii ) holds with @xmath295 replaced by @xmath597 , i.e. , that for any probability measure @xmath607 on @xmath430 , the distribution of @xmath608 determines @xmath609 .",
    "this time we can not simply condition on the type of the root , as we are given the distribution of @xmath559 without types .",
    "it is here that we shall use the fact that @xmath430 is finite .    for any realization @xmath287 of the random tree @xmath593 , let @xmath610 denote the empirical distribution of the branches of @xmath287 , i.e. , the subtrees of @xmath287 of height @xmath597 rooted at the neighbours of the root of @xmath287 .",
    "thus @xmath610 is a distribution on @xmath611 , the set of rooted trees of height @xmath597 , and the weight @xmath610 assigns to a tree @xmath371 is just the number of branches of @xmath287 that are isomorphic to @xmath371 divided by the total number of branches .",
    "let @xmath612 denote the type of the root of @xmath589 , and @xmath613 its degree .",
    "given that @xmath614 and @xmath615 , the types of the particles in @xmath600 are independent with the distribution @xmath616 , the normalized version of @xmath542 .",
    "hence their descendants are independent copies of the branching process @xmath617 , and the corresponding branches are @xmath618 independent samples from the distribution @xmath619 .",
    "let us view the empirical distribution @xmath620 as a point @xmath621 in the space @xmath6^{{\\mathcal{t}^{\\mathrm r}}_{k-1}}$ ] taken with the supremum norm .",
    "this point is random , since it depends on the realization of @xmath589 . from the law of large numbers and the comments above , as @xmath622 the random point @xmath621 obtained",
    "after conditioning on @xmath614 and @xmath615 converges in probability to the single point @xmath623^{{\\mathcal{t}^{\\mathrm r}}_{k-1}}$ ] .    since all we are given is the distribution of @xmath593 , we can not condition on the type of the root . we can however condition on its degree , @xmath613 .",
    "let @xmath624 be the largest value of @xmath536 for @xmath578 with @xmath625 . as @xmath622 , @xmath626 if @xmath627 , and to zero otherwise . from the comments above , as @xmath622",
    ", the distribution of @xmath628 given that @xmath615 tends to the discrete distribution taking each value @xmath619 with probability @xmath629 .",
    "hence , the distribution @xmath593 determines what distributions are possible for @xmath619 with @xmath627 , and the probability of each ( a sum of @xmath630 over @xmath631 such that @xmath632 ) .    by induction , for each possible distribution @xmath619 there is a unique corresponding distribution @xmath633 .",
    "since we know @xmath624 , and the measure @xmath634 is simply obtained by multiplying the probability measure @xmath633 by the constant factor @xmath624 , we recover the possible distributions @xmath634 for @xmath31 with @xmath627 , and the @xmath25-probability of each .",
    "in other words , we recover the distribution @xmath635 where @xmath25 is the probability measure defined by @xmath636 .    by part ( i ) , the distribution @xmath635 determines the distribution of @xmath637 , which is simply that of @xmath593 conditioned on @xmath612 lying in the set @xmath638 . since we recover this distribution",
    "_ exactly _ , we also recover the conditional distribution of @xmath593 given that @xmath639 , i.e. , we recover the distribution @xmath640 , where @xmath607 is the distribution @xmath588 conditioned on @xmath641 . repeating the argument above",
    ", we can recover the part of @xmath642 coming from the largest possible @xmath643-value of the root , i.e. , the part of @xmath591 coming form the second largest value , and so on .",
    "this shows that the distribution of @xmath593 does determine that of @xmath591 , completing the proof of ( ii ) by induction .",
    "theorem  [ bpdist ] shows that there are many examples of different kernels that give rise to the same branching process , and hence to the same distribution of tree counts in the corresponding random graphs @xmath238 .",
    "one extremely special case concerns homogeneous kernels : we say that @xmath3 is _ homogeneous with degree @xmath251 _ if @xmath644 for almost every @xmath31 . in this case , @xmath429 seen without types becomes a standard single - type galton ",
    "watson branching process @xmath645 in which each particle has a poisson number of children with mean @xmath251 . writing @xmath251",
    "also for the constant kernel taking the value @xmath251 , theorem  [ bpdist ] shows that @xmath646 if and only if @xmath3 is homogeneous with degree @xmath251 .",
    "( this special case is essentially trivial , however : one need consider only the first generation of the branching process . )    in the denser case , i.e. , whenever @xmath22 , lemma  4.10 of  @xcite tells us that the sequence @xmath57 converges to @xmath3 in the cut metric with probability  @xmath62 , so it follows that the models @xmath647 and @xmath648 are genuinely different unless @xmath649 , i.e. , unless @xmath419 and @xmath73 are equivalent in the sense of ( * ? ? ?",
    "* subsection 2.4 ) , in which case the models are trivially the same . when @xmath23 , we have seen that there are many pairs @xmath650 of kernels where the random graphs @xmath651 and @xmath652 are presumably different , but are not distinguished by their tree counts .",
    "this suggests that we need better methods of distinguishing very sparse graphs .",
    "however , as we shall see in this next sections , while this is true , the question of which pairs of kernels give rise to equivalent models is not so easy .",
    "in the spirit of the rest of the paper , we say that two graphs with @xmath0 vertices are _ essentially the same _ if one can be changed into a graph isomorphic to the other by adding and deleting @xmath151 edges , where @xmath19 is our normalizing function , as usual .",
    "( of course , the definition makes formal sense only for two sequences . ) otherwise , they are _ essentially different_. in all previous sections , graphs that were essentially the same were treated as equivalent , in the sense that their distance in any of the metrics we considered tends to zero .",
    "let @xmath23 , and let @xmath3 be a kernel whose corresponding branching process always dies out . in the notation of bollobs , janson and riordan  @xcite",
    ", we assume that the operator @xmath239 corresponding to the kernel @xmath3 satisfies @xmath653 , i.e. , @xmath3 is _ ( weakly )",
    "subcritical_. from the results in  @xcite , almost all vertices of @xmath238 are in small tree components : more precisely , given any @xmath335 , there is a @xmath569 such that , whp , all but at most @xmath336 vertices of @xmath238 are in tree components with size at most @xmath569 . furthermore , the asymptotic number of copies of a given tree @xmath287 in @xmath238 is determined by the probability of @xmath287 in the distribution @xmath434 .",
    "it follows that if @xmath419 and @xmath73 are subcritical kernels , then @xmath651 and @xmath652 are ( whp ) essentially the same if and only if @xmath439 .",
    "hence , in the subcritical case , the random graph @xmath238 depends only on the branching process @xmath429 .",
    "of course , this rather trivial observation does not extend to the supercritical case",
    ".    given two real numbers @xmath654 , let @xmath655 denote the @xmath358-by-@xmath358 ` chessboard ' kernel defined as follows : @xmath656 to form the random graph @xmath657 , we partition the vertex set randomly into two parts , and then take each cross - edge to be present with probability @xmath658 , and each other edge with probability @xmath659 .",
    "note that @xmath655 is homogeneous with constant @xmath660 . also , if @xmath661 , then @xmath655 is simply the constant kernel taking the value @xmath661 .    for @xmath23 , perhaps the simplest example of two sequences of essentially different graphs",
    "not distinguished by their tree counts is given by the random graphs @xmath662 and @xmath663 , i.e. , the usual erds  rnyi random graph @xmath664 and ( essentially ) the random bipartite graph @xmath665 .",
    "how do we know that these graphs are different ?",
    "for the obvious reason that one is bipartite , with almost equal vertex classes , while the other is not .",
    "indeed , the smallest balanced cut in @xmath664 has size of order @xmath1 : this follows , for example , from the result of luczak and mcdiarmid  @xcite that removing @xmath134 edges from the giant component of @xmath29 , @xmath196 , leaves a connected component with only @xmath134 fewer vertices than the original giant .",
    "note that one has to be a little careful here : writing @xmath228 for the largest solution to @xmath666 , so @xmath667 is the typical size of the giant component in @xmath29 , we need @xmath668 ; otherwise , it is easy to construct a balanced cut with @xmath134 edges across it . note that both @xmath664 and @xmath665 have balanced cuts with a range of sizes : the difference between the two graphs can be seen in the difference between these ranges .    in the discussion above we considered balanced partitions of the vertex set of a graph into two pieces",
    "of course , it makes sense to consider any fixed number @xmath295 of pieces ; this leads us to consider the _ partition metric _",
    "@xmath18 defined in  @xcite for any normalizing function @xmath19 , but in fact motivated by the present case .",
    "let us recall the definitions from  @xcite , writing @xmath669 for the normalized density of edges from @xmath47 to @xmath48 in @xmath11 as in  .",
    "fix throughout a normalizing function @xmath19 and a constant @xmath670 ; we shall only consider graphs @xmath11 with @xmath0 vertices and at most @xmath671 edges",
    ".    given a graph @xmath11 with @xmath672 and @xmath673 , for each partition @xmath674 of @xmath49 into non - empty parts let @xmath675 be the matrix encoding the normalized densities of edges between the parts of @xmath676 . since @xmath677 is symmetric , we may think of this matrix as an element of @xmath678 . for @xmath679 ,",
    "let @xmath680 where @xmath676 runs over all balanced partitions of @xmath49 into @xmath295 parts , i.e. , all partitions @xmath681 with @xmath682 .",
    "recall that @xmath683 , so @xmath684 .",
    "since each part of a balanced partition has size at least @xmath685 , the entries of any @xmath686 are thus bounded by @xmath687 , and @xmath688 is a subset of the compact space @xmath689^{k(k+1)/2}$ ] .    as in  @xcite , let @xmath690 denote the set of non - empty compact subsets of @xmath691 , and let @xmath692 be the hausdorff metric on @xmath690 , defined with respect to the @xmath693 distance , say .",
    "thus @xmath694 where @xmath695 denotes the @xmath696-neighbourhood of @xmath305 in the @xmath693 metric .",
    "since @xmath697 is compact , by standard results ( see , for example , dugundji  @xcite ) , the space @xmath698 is compact . for technical reasons we add the empty set to @xmath690 , considering @xmath699 , setting @xmath700 ,",
    "say , for any @xmath701 , so the empty set is an isolated point in the compact metric space @xmath702 .",
    "finally , let @xmath703 , and let @xmath704 be the map defined by @xmath705 for every graph @xmath11 with @xmath0 vertices and at most @xmath671 edges , noting that @xmath688 is empty if @xmath706 .",
    "then we may define the _ partition metric _ @xmath18 by @xmath707 where @xmath304 is any metric on @xmath708 giving rise to the product topology .    as noted in  @xcite",
    ", @xmath18 is indeed a metric on the set @xmath297 of isomorphism classes of finite graphs . also , since each space @xmath702 is compact , @xmath9 is cauchy with respect to @xmath18 if and only if there are non - empty compact sets @xmath709 such that @xmath710 for each @xmath295 .",
    "in particular , convergence in @xmath18 is equivalent to convergence of the set of partition matrices for each fixed @xmath295 .    in the dense case ,",
    "a metric equivalent to @xmath18 was introduced independently by borgs , chayes , lovsz , ss and vesztergombi  @xcite .",
    "the definitions above may appear rather unnatural : the set @xmath688 of possible density matrices is perhaps more naturally seen as a multiset , with one element for each of the @xmath711 balanced partitions of @xmath712 $ ] into @xmath295 ( ordered ) parts ; the hausdorff metric ignores the multiplicities of the points of these sets . for multisets",
    "@xmath713 , @xmath714 in a metric space @xmath715 with @xmath716 , ( a version of ) their _ matching distance _ is given by @xmath717 where @xmath718 runs over all _ bijections _ between @xmath713 and @xmath714 ( as multisets ) .",
    "in other words , we pair up the points of @xmath713 with those of @xmath714 and measure the maximum distance between corresponding points , minimized over pairings . for graphs",
    "@xmath11 , @xmath149 with the same number of vertices , it may make sense to use @xmath719 instead of @xmath692 to measure the distance between @xmath688 and @xmath720 , defining the _ partition matching distance _",
    "@xmath721 accordingly .",
    "in fact , @xmath719 can easily be extended to multisets @xmath713 , @xmath714 with different numbers of elements : simply replace each point of @xmath713 by @xmath722 points , and each point of @xmath714 by @xmath723 points , then compute the matching distance .",
    "in other words , minimize over ` fractional bijections ' @xmath718 above ; if @xmath724 this does not change the minimum distance .",
    "extending @xmath719 in this way , we could thus define @xmath725 for any two graphs @xmath51 , @xmath726 .",
    "however , the resulting metric behaves much less well than @xmath18 : for example , not all ( sparse ) sequences will have subsequences that are cauchy , in contrast to @xmath18 , which , as noted above , is defined via a metric on a compact space . even worse , it is easy to see that the sequence @xmath727 will not converge in the partition matching metric .    the matching distance and the hausdorff distance share what might appear to be an undesired property : they are strongly influenced by atypical partitions @xmath676 . surely , for multisets , it would be more natural to weight points by their multiplicity , replacing by @xmath728 recall , however , that our main aim in introducing the partition metric is to distinguish in a sensible way such pairs of graphs as the uniform random graph @xmath729 and the random bipartite graph @xmath730 .",
    "it is very easy to see that for almost all partitions of @xmath731 into a fixed number @xmath295 of parts , each part contains almost equal numbers of vertices from the two vertex classes of @xmath149 .",
    "it follows that almost all ( in the multiset sense ) density matrices arising from @xmath149 are very close to each other and to almost all density matrices arising from @xmath11 .",
    "the whole point of the partition metric is that it accords significant weight to atypical partitions , in particular , to the partition of @xmath149 corresponding to its two vertex classes .",
    "for this reason we now return to considering @xmath688 as a set rather than a multiset , and stay with the definition of @xmath18 above based on the hausdorff metric .",
    "as noted in  @xcite , we may extend the map @xmath732 , and hence @xmath18 , to kernels in a natural way : instead of partitioning the vertex set into @xmath295 almost equal parts , we partition @xmath6 $ ] into @xmath295 exactly equal parts .",
    "we omit the details , noting only that as shown by borgs , chayes , lovsz , ss and vesztergombi  @xcite , one should take the closure of the resulting set of density matrices , which need not itself be closed ; see their example 4.4 .    as for the cut metric ,",
    "it is easy to check that it makes little difference whether we define @xmath18 for graphs directly , or by going via kernels ; the next lemma is from ( * ? ? ?",
    "* section 6 ) .",
    "[ dpsame ] let @xmath19 satisfy @xmath733 , and let @xmath9 be a sequence of graphs with @xmath734 and @xmath735 .",
    "then @xmath736 as @xmath65.@xmath265    although the partition metric was defined in  @xcite , the real motivation for its study comes from the present extremely sparse setting .",
    "indeed , as shown in  ( * ? ? ? * section 6 ) , whenever @xmath22 then ( for sequences @xmath11 satisfying a mild additional condition ) @xmath16 and @xmath18 are essentially equivalent .",
    "[ dpdc ] let @xmath22 , and let @xmath9 be a sequence of graphs with @xmath80 satisfying the bounded density assumption  ( * ? ? ?",
    "* assumption 4.1 ) .",
    "let @xmath3 be a bounded kernel .",
    "then @xmath737 if and only if @xmath78.@xmath265      let us return to our main focus in this paper , the extremely sparse case @xmath23 .",
    "our hope was that in this setting the partition metric might play the role of the cut metric in the denser setting , showing , for example , that a random sequence @xmath738 has a limit with probability @xmath62 , and that this limit is different for different @xmath3 .",
    "for @xmath16 , in the denser setting , the limit was @xmath3 itself , but here we can not hope for this . indeed , it is very easy to check that in @xmath29 , the largest and smallest balanced cuts have sizes that differ from @xmath739 ( the expected size of a random cut ) by order @xmath0 . indeed , using the greedy algorithm to assign vertices one by one to a part of the bipartition , it is easy to construct such a cut . for the best current bounds on the largest cut in @xmath29 ,",
    "see @xcite , @xcite and @xcite ( for related results , see @xcite , @xcite , @xcite , @xcite , @xcite ) . as pointed out to us by christian borgs",
    ", one can describe the problem in the language of statistical physics : when @xmath23 , the entropy and energy terms balance .",
    "more precisely , a given cut is ` only ' exponentially unlikely to have @xmath740 fewer edges than the expected number ( as opposed to superexponentially unlikely when @xmath22 ) , but there are exponentially many cuts , so some atypical cuts will exist .",
    "despite the observation above , it is extremely likely that @xmath738 is cauchy with respect to @xmath18 with probability @xmath62 , i.e. , that there is a limit point ( depending only on @xmath3 ) in the space @xmath741 defined above , even though this limit is not given by @xmath3 in the way one might expect .",
    "[ q3 ] for any bounded kernel @xmath3 , the random sequence @xmath238 is cauchy with respect to @xmath18 with probability @xmath62 .",
    "note that the analogue of conjecture  [ q3 ] with @xmath22 is trivial , since chernoff s inequality shows that @xmath57 and @xmath3 are close in the cut metric , and hence in @xmath18 .",
    "while conjecture  [ q3 ] is very likely to be true , it may also be rather hard to prove , since it would imply the convergence of many quantities associated to @xmath29 ( such as the normalized size of the largest cut ) that are not known to converge .",
    "for example , one can use partitions to pick out the size of the largest independent set within @xmath134 ( in this sparse setting , an almost independent set , spanning @xmath134 edges , contains an independent set of almost the same size ) , so conjecture  [ q3 ] implies the following statement : there is a function @xmath742 such that the independence number of @xmath29 is @xmath743 as @xmath65 with @xmath251 fixed ; in particular , the independence number is concentrated for each @xmath0 . while concentration is well known and easy to prove , at the moment it is not known that the independence number ca nt ` jump around ' as @xmath0 increases , although of course this is extremely implausible . for a discussion of this ,",
    "see , for example , gamarnik , nowicki and swirszcz  @xcite ; surprisingly , for @xmath744 , convergence is known : it follows from results of karp and sipser  @xcite .",
    "the same concentration applies to @xmath18 , as shown by the following result .",
    "[ dpconc ] let @xmath3 be a bounded kernel , let @xmath596 be fixed , and let @xmath745 .",
    "for each @xmath0 there is a set @xmath746 such that @xmath747 converges to @xmath46 in probability .",
    "since @xmath691 is compact , from the definition of the hausdorff metric it is enough to show that for any given point @xmath748 the random variable @xmath749 is concentrated around its mean as @xmath65 . for each @xmath335 , taking an @xmath696-net in @xmath691 , one can then find ( discrete ) sets @xmath750 such that @xmath751 holds whp .",
    "since holds whp for any fixed @xmath696 , it also holds whp for some function @xmath752 tending to zero ; taking @xmath753 then gives the result .    roughly speaking , since the real - valued random variable @xmath754 changes by order @xmath42 if we add or delete an edge of @xmath11 , concentration of @xmath754 follows by standard martingale arguments .",
    "one must be a little careful , however , for two reasons .",
    "firstly , we can not afford to use the edge - exposure martingale , since it has too many steps .",
    "using vertex exposure , one must consider the possibility of large degrees .",
    "secondly , the ` type variables ' @xmath58 introduce some dependence between edges .",
    "there are many ways of working around these problems .",
    "one possibility is as follows .",
    "let @xmath755 .",
    "we may couple @xmath11 and @xmath756 in a natural way so that @xmath757 .",
    "indeed , first construct @xmath149 , then choose the types @xmath58 , then keep each edge @xmath499 of @xmath149 with probability @xmath758 , independently of the others .",
    "it is easy to see that the set of edges remaining has the distribution of @xmath11 .",
    "( this construction is also used by bollobs , janson and riordan  @xcite . )    for the moment , let us condition on @xmath149 , fixing a possible graph @xmath149 with @xmath759 and @xmath760 , say .",
    "we can construct @xmath11 from @xmath149 using a sequence of @xmath761 independent uniform @xmath762 $ ] random variables : one , @xmath428 , for each vertex , and one , @xmath763 , for each edge @xmath499 of @xmath149 .",
    "indeed , we simply keep the edge @xmath499 of @xmath149 if and only if @xmath764 . changing one of the @xmath763",
    "adds or deletes at most one edge of @xmath11 , and so changes @xmath754 by at most @xmath765 .",
    "changing one of the @xmath428 only affects the presence in @xmath11 of edges of @xmath149 incident with vertex @xmath374 . by assumption , there are at most @xmath766 such edges , so changing @xmath428 changes @xmath754 by at most @xmath767 .",
    "since we make only @xmath165 choices , it follows using the hoeffding ",
    "azuma inequality that , given @xmath149 with the above properties , @xmath754 is concentrated about its mean @xmath768 .",
    "since almost every @xmath756 satisfies the bounds on @xmath769 and @xmath770 above , it remains only to show that @xmath768 is concentrated .",
    "for this it is more convenient to consider the graph @xmath771 obtained as follows : choose @xmath772 edges independently and uniformly at random from all @xmath773 possible edges , deleting any repeated edges .",
    "it is easy to see that @xmath771 and @xmath29 may be coupled to agree within @xmath155 edges . since adding or deleting an edge of @xmath51 changes @xmath774 by at most @xmath765 , it suffices to prove concentration of @xmath768 when @xmath149 has the distribution @xmath771 .",
    "but this is immediate from the hoeffding ",
    "azuma inequality , since @xmath771 is constructed from @xmath165 independent choices each of which changes this expectation by at most @xmath765 .",
    "the result above shows that the random sets @xmath688 become concentrated as @xmath65 .",
    "the problem is that the points they become concentrated around might in principle jump around as @xmath0 varies .    even without a proof of conjecture  [ q3 ] , it still makes good sense to ask whether @xmath18 at least separates different random graph models @xmath238 . as before ,",
    "let us write @xmath775 for the normalized edit distance between two graphs @xmath140 , @xmath141 with @xmath158 , i.e. , for @xmath776 times the minimal number of edge changes ( additions or deletions ) that must be made to @xmath140 to produce a graph isomorphic to @xmath141 . by a _ random graph model _ we simply mean a sequence of probability measures on the sets of @xmath0-vertex graphs .",
    "we say that two random graph models are _ essentially equivalent _ if one can couple the corresponding @xmath0-vertex random graphs @xmath11 and @xmath149 so that @xmath777 .    [ q4 ]",
    "let @xmath23 , and let @xmath419 and @xmath73 be bounded kernels such that the models @xmath651 and @xmath652 are not essentially equivalent .",
    "then the expected @xmath18 distance between @xmath651 and @xmath652 is bounded below as @xmath65 .",
    "note that the distance between the @xmath0 vertex graphs is concentrated by theorem  [ dpconc ] .",
    "of course , any proof of conjecture  [ q4 ] is likely to involve understanding for which pairs of kernels the corresponding models @xmath238 are essentially equivalent .",
    "we discuss this briefly in the next section .",
    "we have already seen a rather simple example of two kernels that are not equivalent ( in the sense of ( * ? ? ?",
    "* subsection 2.4 ) ) , which nonetheless give rise to essentially equivalent sparse random graphs : we may take any two non - equivalent kernels @xmath419 , @xmath73 corresponding to the same subcritical branching process .",
    "of course , the corresponding random graphs have a rather simple structure , since they are made up of ( essentially ) only small tree components . unfortunately , ( or interestingly , depending on ones point of view ) a simple modification of this example gives examples with more complex structure .",
    "[ scc ] let @xmath196 be constant , and let @xmath419 and @xmath73 be bounded kernels corresponding to the same subcritical branching process .",
    "writing @xmath778 for the pointwise sum of the constant kernel @xmath251 and the kernel @xmath442 , the models @xmath779 , @xmath780 , are essentially equivalent . to see this",
    ", we realize @xmath779 by first constructing @xmath781 , and then adding each non - edge with probability @xmath782 , and then adding each non - edge with a tiny probability to get the edge probabilities exactly right .",
    "we can ignore the last step since it adds @xmath783 edges .",
    "constructing the graphs @xmath781 first , we may relabel the vertices of these graphs so that they coincide apart from @xmath155 edges .",
    "we may then add each possible edge to both graphs simultaneously with probability @xmath782 to obtain ( essentially ) the required coupling of the graphs @xmath779 .",
    "in general , we believe the following is an interesting question .",
    "[ kkq ] for which pairs of supercritical kernels @xmath419 , @xmath73 are the models @xmath651 and @xmath652 essentially equivalent ?    certainly , any such pair must satisfy @xmath439 , otherwise the models are distinguished by their tree counts . a simple answer to question  [ kkq ] would be important for the general understanding of the sparse inhomogeneous model of bollobs , janson and riordan  @xcite .",
    "since question  [ kkq ] is rather open ended , let us focus on one particular example : the pair consisting of the constant kernel @xmath251 and the kernel @xmath784 defined in  , with @xmath785 .",
    "the cases @xmath214 positive and @xmath214 negative may behave differently , although we do not expect this to be the case . for @xmath786 , or @xmath787",
    ", one can construct @xmath788 from @xmath789 by deleting each edge independently with a certain probability , and then adding in each non - edge with an appropriate probability .",
    "it follows that if @xmath789 and @xmath29 are essentially equivalent , then so are @xmath788 and @xmath29 .",
    "hence there is an interval @xmath790 such that @xmath789 and @xmath29 are essentially equivalent for all @xmath791 , but for no @xmath792\\setminus i(c)$ ] .",
    "the construction in example  [ scc ] shows that @xmath793\\subset i(c)$ ] whenever @xmath196 . on the other hand , it is not hard to show that for @xmath251 large , the most extreme balanced cuts in @xmath29 contain @xmath794 edges ; for the best known bound on the largest cut see @xcite , @xcite and @xcite . since a typical @xmath789 clearly contains a balanced cut with @xmath795 edges , it follows that @xmath796 $ ] for @xmath251 large , where @xmath376 is an absolute constant .",
    "it is not hard to convince oneself that the second bound is closer to the truth , although we do not have a proof .",
    "in fact , we believe that the endpoints of @xmath790 are exactly @xmath797 for every @xmath798 , although we make no guess as to whether these endpoints are included .",
    "[ c5 ] let @xmath196 and @xmath799 be constants . if @xmath800 , then the models @xmath789 and @xmath29 are essentially equivalent .",
    "if @xmath801 , then they are not .",
    "the model @xmath789 is a special case of the _ planted bisection _",
    "model @xmath802 : for any @xmath19 and @xmath803 , the graph @xmath802 is constructed by partitioning its vertex set @xmath712 $ ] at random into two ( almost ) equal parts , and then joining any two vertices in the same part with probability @xmath25 , and two vertices in different parts with probability @xmath804 .",
    "the question of reconstructing the vertex partition given only the graph has received considerable attention , generally with emphasis on polynomial - time algorithms for @xmath25 , @xmath804 satisfying suitable conditions ; see , for example , boppana  @xcite , and , for a linear expected time algorithm , bollobs and scott  @xcite .",
    "most such results are for graphs with average degree tending to infinity , but coja - oghlan  @xcite proved results that include the extremely sparse case , showing that one can find a minimum balanced cut in @xmath789 in polynomial time whenever @xmath805 .",
    "the connection with conjecture  [ c5 ] is rather loose , but nonetheless interesting .",
    "let us present another question that does seem to be closely related to conjecture  [ c5 ] .",
    "[ qroot ] when does the branching process @xmath806 forget the type of the root ?    to spell out what we mean by question  [ qroot ] , let @xmath529 be the random labelled tree corresponding to the first @xmath320 generations of @xmath807 , with each vertex labelled by the type of the corresponding particle . here",
    "we take the types to be @xmath62 and @xmath358 , corresponding to @xmath808 and @xmath809 .",
    "note that each particle has @xmath810 children of its own type , and @xmath811 of the opposite type .",
    "recall that , since @xmath812 , the distribution of @xmath529 without labels is simply that of the first @xmath320 generations of a single - type branching process . let @xmath813 be the tree obtained from @xmath529 by forgetting the labels of all vertices _ other than those at distance @xmath320 from the root _ , and let @xmath814 be the probability , conditional on @xmath813 , that the root has type @xmath62 , so @xmath814 is a random variable depending on @xmath815 via @xmath813 .",
    "we say that @xmath815 _ forgets the type of the root _ if @xmath816 as @xmath817 .",
    "it is easy to couple the branching processes @xmath818 and @xmath819 started with particles of type @xmath62 and @xmath358 , respectively , so that the tree structures always agree , and the expected number of label mismatches in level @xmath320 is @xmath820 .",
    "it follows that @xmath815 forgets the type of the root if @xmath821 .",
    "although we have not checked the details , we believe that @xmath815 forgets the type of the root if and only if @xmath822 ; this is based on linearizing the natural recurrence describing the distribution of @xmath823 in terms of that of @xmath814 .",
    "( actually , one works with the distribution of @xmath814 given that the root has type @xmath62 . )",
    "this argument certainly shows that @xmath815 can not forget the type of the root if @xmath801 ; the reverse implication is not so clear .",
    "although we certainly have no proof , it seems likely that if @xmath807 forgets the type of the root , then the models @xmath789 and @xmath29 are essentially equivalent . roughly speaking ,",
    "suppose that , given the global structure of @xmath789 , seen without types , we can somehow form a good guess as to which vertices at graph distance @xmath824 from a given vertex @xmath315 are of type @xmath62 and which of type @xmath358 .",
    "even then , @xmath315 itself is ( almost ) equally likely to be of either type .",
    "this strongly suggests that one can get essentially no information about the vertex types from the graph , and hence that the types do not matter to the graph .",
    "this vague heuristic is very far from a proof , however !    in summary , it seems very likely that the answers to conjecture  [ c5 ] and question  [ qroot ] are closely related . in turn",
    "they may well be related to the question of when the maximum / minimum balanced cut distinguishes @xmath789 from @xmath29 .",
    "we do not even have a guess as to the form of a more general answer to question  [ kkq ] .",
    "so far , we have mainly considered locally acyclic graphs ( the exception is section  [ ss_par ] ) .",
    "this is natural when considering the metric @xmath17 , for which only counts of trees make sense when using the @xmath23 special case of the normalization used in  @xcite .",
    "it is also natural when considering the random graph model @xmath238 .",
    "however , there are many natural sequences of graphs with @xmath1 edges that are not treelike .",
    "a simple example is given by taking @xmath11 to consist of @xmath825 vertex disjoint triangles , for @xmath0 a multiple of three . clearly , this graph is not close to any locally treelike graph",
    ". it would be nice to have a notion of when two general graphs with @xmath1 edges are close , as well as a more general random model generating such graphs .",
    "what distinguishes the union of @xmath825 triangles from a hamilton cycle @xmath826 , say ?",
    "the simplest answer is the number of triangles . throughout this section",
    "we consider sequences @xmath9 with exponentially bounded tree counts , i.e. , we assume that there is a constant @xmath171 such that @xmath827 for every tree @xmath287 .",
    "this condition is certainly satisfied if the graphs @xmath11 have bounded maximum degree , for example , and the reader may wish to think of this case for simplicity .",
    "in fact , as in section  [ treecounts ] , something weaker than exponential boundedness probably suffices , but exponential boundedness is a natural assumption . if @xmath9 has exponentially bounded ( or indeed simply bounded ) tree counts , then the number of embeddings or homomorphisms from any fixed graph @xmath268 into @xmath11 is @xmath165 .    for each fixed @xmath268 , let @xmath828 and let @xmath829 . as in section  [ treecounts ] or in  @xcite",
    ", we can use the ( now differently normalized ) subgraph counts @xmath830 or @xmath831 to define a metric @xmath832 , by first mapping @xmath11 to @xmath833 as noted above , each coordinate is bounded for the sequences we consider , so @xmath830 maps into a compact subset @xmath305 of @xmath834 .",
    "using any metric @xmath304 on @xmath305 giving rise to the product topology , we may then define @xmath835 .    as in section  [ treecounts ]",
    ", one can view the ( limiting ) counts @xmath836 as giving the moments of a certain distribution that we could instead study directly .",
    "let @xmath837 be the set of isomorphism classes of connected finite rooted graphs with radius at most @xmath320 , i.e. , with every vertex at graph distance at most @xmath320 from the root .",
    "also , let @xmath838 be the set of all locally finite rooted ( finite or infinite ) graphs .",
    "as in section  [ treecounts ] , for @xmath839 let @xmath840 where @xmath315 is a vertex of @xmath11 chosen uniformly at random , and @xmath319 is the subgraph of @xmath11 induced by the vertices within distance @xmath320 of @xmath315 , viewed as a rooted graph with root @xmath315 .",
    "since each @xmath841 lies in @xmath6 $ ] , trivially , any sequence @xmath9 has a subsequence along which @xmath841 converges to some @xmath842 for every @xmath320 and every @xmath839 .",
    "furthermore , as in section  [ treecounts ] , if @xmath9 has bounded tree counts then it is easy to check that @xmath843 , so @xmath814 is a probability distribution on @xmath837 .",
    "furthermore , these probability distributions for different @xmath320 are consistent in the natural sense , and so may be combined to form a probability distribution on @xmath838 .",
    "for this reason , we say that a probability distribution @xmath354 on @xmath838 is the _ local limit _ of the sequence @xmath9 if @xmath844 for every @xmath365 and every @xmath839 , where for @xmath845 , the graph @xmath846 is the subgraph of @xmath51 induced by the vertices within distance @xmath320 of the root .    of course one can define a corresponding metric @xmath847 , by mapping each graph to the point @xmath848^{{\\mathcal{g}^{\\mathrm r}}_t}$ ] , and then applying any metric on @xmath305 giving rise to the product topology . just as for tree counts , under suitable assumptions ,",
    "the local limit @xmath354 determines the limiting subgraph counts @xmath830 and vice versa .",
    "( one ` suitable assumption ' is bounded maximum degree .",
    "in fact , as in section  [ treecounts ] , exponentially bounded tree counts will almost certainly do . )",
    "thus the metrics @xmath832 and @xmath847 are equivalent .",
    "as before , it seems more natural to study the distribution of the neighbourhoods of vertices directly , rather than the subgraph counts , which are essentially moments of this distribution .",
    "this notion of local limit is extremely natural .",
    "in fact , benjamini and schramm  @xcite used the same notion ( but for a random rather than deterministic sequence ( @xmath11 ) ) to define a ` distributional limit ' of certain random planar graphs ; they showed that the random walk on the limiting graph is recurrent with probability @xmath62 . the same notion in slightly different generality",
    "was studied by aldous and steele  @xcite , under the name ` local weak limit ' , and aldous and lyons  @xcite , where the term ` random weak limit ' is used .",
    "returning to basic questions about this notion of limit , perhaps the first is : which probability distributions on @xmath838 can arise in this way ? as in section  [ treecounts ] , a necessary condition is that the distribution @xmath354 must be _ involution invariant _ , meaning that @xmath849 for any non - negative isomorphism invariant function @xmath415 defined on triples @xmath850 , where @xmath51 is a locally finite graph and @xmath31 and @xmath32 are adjacent vertices of @xmath51 . here",
    "the expectation is over the @xmath354-random rooted graph @xmath851 , and the sum is over neighbours of @xmath31 .",
    "the following question is due to aldous and lyons  @xcite .",
    "[ qglim ] does every involution - invariant probability distribution on @xmath838 arise as the local limit of some sequence @xmath9 of graphs with @xmath80 ?    just as in the tree case , it may make sense to restrict to graphs with bounded maximum degree , asking the analogue of question  [ qtlimd ] . note that it does not matter here whether we consider a sequence of deterministic finite graphs , or a sequence of distributions on @xmath0-vertex graphs : for the purposes of question  [ qglim ] , a distribution on connected @xmath0-vertex graphs may be well approximated by a much larger finite graph whose components have approximately the right distribution .",
    "since this question seems to be rather important , let us briefly describe its history ; for more details we refer the reader to aldous and lyons  @xcite .",
    "firstly , as noted above , the question is from  @xcite , where it is stated as an especially important open question .",
    "( lyons  @xcite referred to a proof of a positive answer to question  [ qglim ] , but in a note added in proof said that this proof was incorrect . )    benjamini and schramm  @xcite were the first to note that any distribution that is a local limit must be involution invariant .",
    "in fact , they noted that it must satisfy an _ a priori _ stronger condition they called the ` intrinsic mass transport principle ' .",
    "( this is the same as involution invariance except that one considers a function @xmath415 defined on triples @xmath850 where @xmath31 and @xmath32 are any vertices of @xmath51 , not necessarily adjacent vertices . )",
    "aldous and steele  @xcite introduced the somewhat simpler condition of involution invariance . as shown by aldous and lyons  @xcite , involution invariance and the intrinsic mass transport principle are equivalent .",
    "aldous and lyons  @xcite use the term ` unimodular ' for an involution invariant probability distribution on @xmath838 .",
    "the motivation comes from a very special case : suppose that @xmath354 is supported on a single rooted graph @xmath851",
    ". then @xmath51 must be vertex transitive . in this case",
    ", @xmath354 is involution invariant if and only if @xmath51 is unimodular , in the sense that its automorphism group is unimodular , i.e. , its left - invariant haar measure is also right - invariant .",
    "unimodular transitive graphs have been studied for some time , quite independently of the question of local limits ( and well before this arose ) ; see , for example , benjamini , lyons , peres and schramm  @xcite . for a simple description of unimodularity in this context ,",
    "see , for example , timar  @xcite .",
    "it is perhaps surprising that there exist ( bounded degree ) vertex transitive graphs that are non - unimodular .",
    "one example is the ` grandmother graph ' @xmath51 shown in figure  [ fig_gm ] , introduced by trofimov  @xcite in a slightly different context .",
    "this is the graph obtained by arranging the vertices of the 3-regular tree into levels so that every vertex in level @xmath0 has one neighbour in level @xmath852 , its parent , and two in level @xmath853 , its children , and then joining every vertex to its grandparent and grandchildren in addition to its parent and children .",
    "as can be seen from figure  [ fig_gm ] , from the 2-neighbourhood of a vertex in @xmath51 one can identify its parent in the original 3-regular tree .",
    "let @xmath354 be the distribution on @xmath838 supported only on the ( rooted ) grandmother graph @xmath51 , and let @xmath854 be the function taking the value @xmath62 if @xmath51 is the grandmother graph and @xmath32 is the parent of @xmath31 , and @xmath46 otherwise ; this function is isomorphism invariant .",
    "for this @xmath354 and @xmath415 , the left hand side of is the number of parents of the root , i.e. , 1 , and the right hand side is the number of children ( the number of vertices whose parent the root is ) , i.e. , 2 . thus @xmath51 is not unimodular .",
    "other examples of non - unimodular transitive graphs include the diestel  leader graphs introduced in a different context in  @xcite .",
    "as noted by aldous and lyons  @xcite , a positive answer to ( their slightly more general form of ) question  [ qglim ] would have major implications in group theory , since it would essentially imply that all finitely generated groups are ` sofic ' .",
    "this group property was initially introduced ( in a slightly different form ) by gromov  @xcite ; the term ` sofic ' was coined by weiss  @xcite .",
    "the key point is that several well - known conjectures in group theory have been proved for sofic groups ; see elek and szab  @xcite for example . for a brief survey of the topic of sofic groups ,",
    "see pestov  @xcite .    returning to metrics on sparse graphs , in one sense , the metric @xmath847 associated to the notion of local convergence seems to be the most natural measure of ` similarity ' between general sparse graphs . however , while this notion captures local information well , it still loses global information : if @xmath9 has a certain local limit @xmath354 , then the graphs @xmath855 formed by taking the disjoint union of two copies of @xmath11 have the same local limit .",
    "( indeed , @xmath856 for every connected graph @xmath268 . )",
    "this shows that @xmath847 fails to capture the global structure of the graph , and suggests that it makes sense to consider @xmath847 and @xmath18 together ; we shall do so in the next section .",
    "for fully dense graphs , with @xmath5 edges , the results of borgs , chayes , lovsz , ss and vesztergombi  @xcite show that one single metric , say @xmath16 , effectively captures several natural notions of local and global similarity .",
    "indeed , convergence in @xmath16 is equivalent to convergence in the partition metric @xmath18 ( a natural global notion ) and to convergence in @xmath17 , i.e. , convergence of all small subgraph counts , a natural local notion .    in the extremely sparse case ,",
    "we have considered two metrics , the partition metric @xmath18 and the local metric @xmath847 , which respectively capture global and local similarity . of course",
    ", one would like a single metric capturing both notions , and also the interaction between local and global properties .",
    "fortunately , there is a natural combination of @xmath18 and @xmath847 .",
    "let @xmath11 be a graph with @xmath0 vertices , and @xmath557 an integer .",
    "we shall think of @xmath11 as having @xmath1 edges , though this is only relevant when we come to sequences @xmath9 .",
    "let @xmath674 be a partition of the vertex set of @xmath11 , which we may think of as a ( not necessarily proper ) @xmath295-colouring of @xmath11 .",
    "this time , for variety , we do not insist that the parts have almost equal sizes ; this makes essentially no difference .",
    "let @xmath857 be the set of isomorphism classes of @xmath295-coloured connected rooted graphs with radius at most @xmath320 .",
    "for each @xmath858 , let @xmath859 be the probability that the @xmath320-neighbourhood of a random vertex of the coloured graph @xmath860 is isomorphic to @xmath268 as a coloured rooted graph , so @xmath861 is a probability distribution on @xmath857 .",
    "finally , let @xmath862 where @xmath676 runs over all @xmath295-partitions of @xmath49 .",
    "thus @xmath863 is a finite subset of the space @xmath864 of probability distributions on @xmath857 . of course",
    ", one can view @xmath863 as a multiset , in which case it has exactly @xmath865 elements , one for each colouring .",
    "however , as for the partition metric in section  [ ss_par ] , it turns out to be better to ignore the multiplicities .",
    "the space @xmath864 of probability distributions on @xmath857 is naturally viewed as a metric space , with the total variation distance @xmath866 between two distributions as the metric . in other words , regarding @xmath864 as a subset of the unit ball of @xmath867 in @xmath868 , we simply take the @xmath867-metric on this set .",
    "let @xmath692 denote the hausdorff distance between compact subsets of @xmath864 , defined with respect to @xmath866 .",
    "then we may define the _ coloured neighbourhood metric _ @xmath869 by @xmath870 say .",
    "( as before , we can instead use any metric on @xmath871 giving rise to the product topology . ) if we restrict our attention to graphs with maximum degree at most some constant @xmath418 , then the corresponding sets @xmath857 are finite , so each @xmath864 is compact , and any sequence @xmath9 has a subsequence that is cauchy with respect to @xmath869 , and in fact converges to a limit point consisting of one compact subset of @xmath864 for each @xmath295 , @xmath320 .",
    "in fact , it is not hard to check that whenever @xmath9 has bounded tree counts ( i.e. , contains @xmath165 copies of any fixed tree @xmath287 ) , it has a convergent subsequence with respect to @xmath869 .",
    "of course , as before , we can combine the limiting subsets of @xmath864 as @xmath320 varies .",
    "also , as in section  [ ss_par ] , there may be circumstances in which it is better to view @xmath863 as a multiset after all , and use the matching distance between such multisets to define a _ coloured neighbourhood matching metric _ @xmath872 .",
    "taking just @xmath560 above , we recover the notion of local limit . on the other hand ,",
    "the set @xmath873 used to define the partition metric can be recovered from @xmath874 .",
    "( the latter set codes , for each partition , how many vertices there are in each part , and how many neighbours in each part each vertex has . from this information",
    "one can calculate the number of edges between each pair of parts . )",
    "it follows that if @xmath9 is cauchy with respect to @xmath869 , then it is cauchy with respect to both @xmath847 and @xmath18 . in other words , @xmath869 is a ` joint refinement ' of @xmath847 and @xmath18 .",
    "[ qmodel ] given a metric @xmath304 , can we find a ` natural ' family of random graph models with the following two properties : ( i ) for each model , the sequence of random graphs @xmath9 generated by the model is cauchy with respect to @xmath304 with probability @xmath62 , and ( ii ) for any sequence @xmath9 with @xmath80 that is cauchy with respect to @xmath304 , there is a model from the family such that , if we interleave @xmath9 with a sequence of random graphs from the model , the resulting sequence is still cauchy with probability @xmath62 .    as noted in  @xcite , for any of @xmath16 , @xmath17 or @xmath18 the answer is yes in the dense case , since @xmath9 is cauchy if and only if @xmath78 for some kernel @xmath3 , while the dense inhomogeneous random graphs @xmath875 converge to @xmath3 in @xmath16 with probability @xmath62 .",
    "thus our family consists of one model @xmath4 for each kernel @xmath3 ( to be precise , for each equivalence class of kernels under the relation @xmath563 defined in ( * ? ? ? * subsection 2.4 ) ) . in the sparse case , but with @xmath22 , some partial answers are given in  @xcite , but the situation is much more complicated .    here , with @xmath23 , @xmath238 is very unsatisfactory as a model for an _ arbitrary _ sequence of sparse graphs , since it produces graphs with essentially no cycles . the following natural model proposed by bollobs ,",
    "janson and riordan  @xcite is rather more general . in the uniform case ,",
    "generalizing @xmath29 , assign a weight @xmath876 to each fixed graph @xmath268 . to generate a random graph with @xmath0 vertices , starting from the empty graph , for each @xmath268 add each of the @xmath877 possible copies of @xmath268 with probability @xmath878 , deleting any duplicate edges .",
    "note that , on average , we add @xmath1 copies of each graph @xmath268 .",
    "the point is that this model produces graphs with @xmath1 edges , but ( in general ) @xmath1 triangles , and indeed @xmath1 copies of any fixed graph @xmath268 .    in the general case , bollobs , janson and riordan  @xcite",
    "start from a _ kernel family _ @xmath879 consisting of one kernel @xmath880 for each isomorphism type of connected finite graph @xmath268 ; the kernel @xmath880 is simply a measurable function on @xmath6^{v(f)}$ ] that is symmetric under the action of the automorphism group of @xmath268 . to construct the random graph @xmath881 , choose @xmath58 independently and uniformly from @xmath6 $ ] , and then for each @xmath268 and each set @xmath882 of @xmath883 vertices , insert a copy of @xmath268 with vertex set @xmath884 with probability @xmath885 . for full details , see  @xcite .",
    "while the model @xmath881 is much more general than @xmath238 , it still has its limitations .",
    "it is not hard to see that the asymptotic degree distribution of @xmath881 will be a mixture of compound poisson distributions ( rather than the mixture of poisson distributions one obtains for @xmath238 ) . in particular",
    ", there is no kernel family for which @xmath881 produces graphs in which ( almost ) all vertices have degree @xmath359 , say . a positive answer to question  [ qmodel ] for either of the metrics @xmath847 or @xmath869 would involve , among other things ,",
    "models that produce graphs with arbitrary given degree distributions ( with finite expectation , say , or perhaps bounded , to keep things simple ) . of course this is easy , but such an answer would require much more  it would require producing all possible distributions of local structure . even for @xmath847 , this is likely to be hard , since one would presumably have to first understand the possible limiting distributions , which would involve answering question  [ qglim ] .",
    "for @xmath869 , much more is needed : one needs to understand the possible combinations of local and global structure .",
    "let us give one very simple example of the kind of model we have in mind , associated to @xmath847 in the extremely sparse case .",
    "let parameters @xmath0 and @xmath304 be given ; we shall think of @xmath304 fixed as @xmath886 . assuming that @xmath887 is a multiple of three",
    ", let @xmath888 be the random graph obtained as follows : start with @xmath0 vertices , each of which has @xmath304 ` stubs ' associated to it .",
    "take a uniformly random partition of the set of @xmath887 stubs into @xmath889 triplets , and add a triangle corresponding to each triplet , sitting on the vertices that the stubs in the triplet are associated to .",
    "in general , @xmath888 is a multigraph , but it will be very close to a simple graph ( in fact , @xmath888 will be simple with probability bounded away from @xmath46 ) .",
    "the model @xmath888 is a natural ` triangle version ' of the random regular graph , generated via the configuration model .",
    "( since the first draft of this paper was written , newman  @xcite has described a natural inhomogeneous version of this model . )    it is not hard to see that in @xmath888 every ( or , if we make the graph simple , almost every ) vertex has degree @xmath890 , and is in exactly @xmath304 ( edge - disjoint ) triangles .",
    "furthermore , other than this , @xmath888 has no local structure : the local limit of the sequence @xmath888 is an infinite tree of triangles .",
    "thus @xmath888 is an appropriate model for certain cauchy sequences in @xmath847 .",
    "of course one can construct many other models along these lines , but it is hard to imagine that all cauchy sequences can be covered in this way !",
    "as we have seen , in the extremely sparse case , question  [ qmodel ] is likely to be very hard to answer for the metrics we have considered .",
    "nonetheless , it may be possible to answer the same question for weaker metrics , or to provide partial answers .",
    "such partial answers would hopefully provide great insight into the structure of the set of sparse graphs .",
    "d.  aldous and j.m .",
    "steele , the objective method : probabilistic combinatorial optimization and local weak convergence , in _",
    "probability on discrete structures _ ,",
    "_ encyclopaedia math .",
    "sci . _ * 110 * , springer ( 2004 ) , pp .",
    "172 .",
    "a.  bertoni , p.  campadelli and r.  posenato , an upper bound for the maximum cut mean value , in _ graph - theoretic concepts in computer science _",
    "( berlin , 1997 ) , lecture notes in computer science * 1335 * , springer , berlin , 1997 , pp",
    ".  7884 .",
    "b.  bollobs and o.  riordan , metrics for sparse graphs , in _ surveys in combinatorics 2009 _ , london math .",
    "lecture note series * 365 * , s. huczynska , j.d .",
    "mitchell and c.m.roney-dougal eds , cup ( 2009 ) , pp .",
    "212 - 287 .          c.  borgs , j.t .",
    "chayes , l.  lovsz , v.t .",
    "ss and k.  vesztergombi , counting graph homomorphisms , in _ topics in discrete mathematics _",
    "( eds . m. klazar , j. kratochvil , m. loebl , j. matousek , r. thomas , p. valtr ) , springer ( 2006 ) , pp 315371 .    c.  borgs , j.t .",
    "chayes , l.  lovsz , v.t .",
    "ss and k.  vesztergombi , convergent sequences of dense graphs i : subgraph frequencies , metric properties and testing , _ advances in math . _",
    "* 219 * ( 2008 ) , 18011851 .",
    "d.  coppersmith , d.  gamarnik , m.t .",
    "hajiaghayi and g.b .",
    "sorkin , random max sat , random max cut , and their phase transitions , in _ proceedings of the fourteenth annual acm - siam symposium on discrete algorithms _",
    "( baltimore , md , 2003 ) , acm , new york , 2003 , pp .",
    "364373 .",
    "d.  gamarnik , t.  nowicki and g.  swirszcz , maximum weight independent sets and matchings in sparse random graphs .",
    "exact results using the local weak convergence method , _ random structures algorithms _ * 28 * ( 2006 ) , 76106 .          a.v .",
    "kostochka and l.s .",
    "melnikov , on a lower bound for the isoperimetric number of cubic graphs , in _",
    "probabilistic methods in discrete mathematics _",
    "( petrozavodsk , 1992 ) , _ progr .",
    "pure appl . discrete math . _ * 1 * , vsp , utrecht , 1993 , pp .",
    "251265 .",
    "e.  szemerdi , regular partitions of graphs , in _ problmes combinatoires et thorie des graphes _ ( colloq .",
    "cnrs , univ .",
    "orsay , orsay , 1976 ) , _ colloq .",
    ". cnrs _ * 260 * , cnrs , paris ( 1978 ) , pp ."
  ],
  "abstract_text": [
    "<S> recently , bollobs , janson and riordan introduced a family of random graph models producing inhomogeneous graphs with @xmath0 vertices and @xmath1 edges whose distribution is characterized by a kernel , i.e. , a symmetric measurable function @xmath2 ^ 2 \\to [ 0,\\infty)$ ] . to understand these models </S>",
    "<S> , we should like to know when different kernels @xmath3 give rise to ` similar ' graphs , and , given a real - world network , how ` similar ' is it to a typical graph @xmath4 derived from a given kernel @xmath3 .    </S>",
    "<S> the analogous questions for dense graphs , with @xmath5 edges , are answered by recent results of borgs , chayes , lovsz , ss , szegedy and vesztergombi , who showed that several natural metrics on graphs are equivalent , and moreover that any sequence of graphs converges in each metric to a graphon , i.e. , a kernel taking values in @xmath6 $ ] .    </S>",
    "<S> possible generalizations of these results to graphs with @xmath7 but @xmath8 edges are discussed in a companion paper  @xcite ; here we focus only on graphs with @xmath1 edges , which turn out to be much harder to handle . </S>",
    "<S> many new phenomena occur , and there are a host of plausible metrics to consider ; many of these metrics suggest new random graph models , and vice versa . </S>"
  ]
}