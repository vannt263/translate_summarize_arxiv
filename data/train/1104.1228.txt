{
  "article_text": [
    "azimuth disambiguation of the transverse field in vector magnetograph data is a key problem determining reliability of the physical researches utilizing the knowledge of full vector of the photospheric magnetic field .",
    "apparently complete and exact solution to this problem is hardly possible because of high level of noise in transverse field data and impossibility of spatial resolution of real pattern of the magnetic field ( whose thin structure is significantly less than the spatial resolution of modern magnetographs ) . in this connection ,",
    "the main requirement for algorithms of the azimuth disambiguation is to reach invariably high quality that could describe adequately ( with minimum distortions ) the physically significant real structural elements of magnetic configurations . also of importance is the code efficiency with regions regardless of their location on the solar disc ; this allows us to use data on all available measurements , including those near the limb .",
    "to perform on - line processing of continuously incoming data , the final preparation time should be comparable to time of measurement data acquisition .",
    "currently , the best codes providing invariably high quality and meeting the requirements for physical investigation are the codes based on the simulated annealing algorithm ( different variants of the `` minimum energy '' method ( me ; , ) .",
    "quality of the code outcome is significantly higher than the results of other the results available numerous codes @xcite .",
    "unfortunately , me codes are among the most long - term : the required time goes up with increasing number of nodes of data grid",
    ". therefore they are not suitable for real - time processing of continuous data flow with high spatial resolution .",
    "the sdo / hmi instrument , for instance , generates vector magnetogram with resolution of 4096x4096 once every 12 minutes .",
    "a fast npfc algorithm @xcite is now examined in order to be used in data flow processing , since it represents the best compromise between quality and time required for processing .",
    "quality of the npfc algorithm is ranked second among well - known methods , though it is inferior to that of me codes .",
    "it does not always show invariably satisfactory results in different real configurations of magnetic regions , particularly in those near the limb .    in this paper , we present examples of the azimuth disambiguation of model and real ambiguous magnetograms with the use of three codes : the new super fast and quality ( sfq ) , npfc , and sme @xcite .",
    "we show that quality of the sfq outcome far surpasses that of npfc .",
    "besides , sfq is much faster than npfc .",
    "moreover , time for the azimuth disambiguation of vector - magnetograph data with any spatial resolution ( including sdo / hmi measurements of the full disc ) may be significantly reduced due to the sfq parallelization into several processes .",
    "this suggests potential on - line processing of current data flow .",
    "the sfq method is a two - step processing system .",
    "step 1 involves preliminary azimuth disambiguation , using special metric ( grid difference metric ) relying on reference information of the potential field .",
    "step 2 ( cleaning ) comprises application of smoothing masks in several scales .",
    "our solution does not use random search ( like in me ) or convergent iterations ( like in npfc ) that s why it is very fast .",
    "the key point of the method is application of the `` grid difference metric '' defining measure of difference between the initial ambiguous field @xmath0 and the potential ( reference ) field @xmath1 .",
    "metric is constructed for each node @xmath2 , @xmath3 of the magnetogram grid as follows :    @xmath4 ^{2}};\\nonumber\\\\ \\delta _ { 0}=f = f^{i+1,j}-f^{i , j},\\delta _ { 1}=f = f^{i ,",
    "j}-f^{i , j+1};\\\\ b_{0}=b_{x},b_{1}=b_{y}.\\nonumber\\end{aligned}\\ ] ]    metric ( [ eq:1 ] ) is then used as a conditional mask to determine common sign for transverse components of the preliminary field @xmath5 : @xmath6 according to definition of metric ( [ eq:1 ] ) , its application is valid only for nodes with locally continuous @xmath0 ( i.e. , random distribution over azimuth direction nodes fails for @xmath7 ) .",
    "consequently , requirement that initial distribution of the transverse field be locally continuous in most nodes is a necessary condition .",
    "this requirement is easily satisfied , for instance , if a component of the transverse field ( @xmath8 or @xmath9 ) is assumed to be everywhere positive .",
    "the potential reference field can be obtained using the standard method for the fft extrapolation over the longitudinal component @xmath10 . in our case",
    ", we used the potential extrapolation in quasi - spherical geometry @xcite and subsequent extrapolation of the field into nodes of the initial magnetogram grid .",
    "we think that the principle of construction of metric @xmath11 ( [ eq:1 ] ) is similar to the metric used in the most effective me method : @xmath12 indeed , close inspection of the equation shows that , formally , terms in the right part of identity ( [ eq:3 ] ) are the particular linear combinations of differences ( [ eq:1 ] ) . for simplicity of comparison , we will confine ourselves to the case of flat approximation and @xmath13 .",
    "we attach certain physical meaning to summands of ( 3 ) .",
    "the first summand in ( [ eq:3 ] ) provides minimisation of vertical current .",
    "this term is responsible for nodes in which local continuity of the transverse ambiguous field is disturbed . in other nodes ,",
    "it does not depend on azimuth direction of the transverse field .",
    "the second summand in ( [ eq:3 ] ) is the divergence simulation ; it reflects correlation of some differences between the test and reference fields ( i.e. , it performs function analogous to ( [ eq:1 ] ) .",
    "it is thus reasonable to suppose that the main positive function of the azimuth selection in both cases is performed by differential relations between the test and reference fields .",
    "we do not assign value of a geometric object s element ( similar to the value of field derivatives making up tensor components of vector field derivatives ) to each difference @xmath14 in ( [ eq:1 ] ) .",
    "we consider these differences as formal functions of two near points , reflecting local coupling between the test and reference fields .",
    "this approach allows us to consider all magnetogram nodes as equivalent ( regardless of their location in the visible part of the photosphere ) and relieves us of having to use additional grids and geometric transformations .",
    "notice that the npfc method ( which is referred to as nonpotential ) uses approximation @xmath15 @xcite when deducing equations for current component @xmath16 in indirect form .",
    "this condition implies differential reference relation with the potential field .      the necessity to clean the preliminary magnetogram after step 1 is caused by the peculiar features of our application of metric ( [ eq:1 ] ) .",
    "let us suppose that we apply step 1 to a noise - free magnetogram of the potential field . in this case",
    ", we would probably observe the following : solution to the disambiguation problem is rigorous in the main continuum of points in whose vicinities initial distribution of the transverse field is continuous .",
    "random chains of isolated contrast ( bad ) pixels on transverse component images would be observed only on lines of the local discontinuity of data .",
    "almost all these bad pixels may be cleaned at one go through comparing with the smoothed transverse field @xmath17 : @xmath18    typical distribution of bad pixels after step 1 processing of real magnetograms is well exemplified by images of transverse components @xmath19 of hinode / sot sp data ( level 2 ) in the magnetic region ar10930 for two its locations - near the disc centre ( fig .",
    "[ fig:1 ] ) and near the limb ( fig . [ fig:2 ] ) .",
    "figures show that the general pattern of the transverse field is satisfactorily neat already after step 1 processing regardless of bad pixels ; noteworthy is the fact that the outcome quality near the limb is comparable to that near the centre .",
    "this suggests that the chosen metric ( [ eq:1 ] ) is quite effective , irrespective of proximity to the limb .",
    "close inspection of images in figures [ fig:1 ] and [ fig:2 ] shows that there are many bad microfragments ( groups of adjacent bad pixels ) .",
    "it is obvious that single application of ( [ eq:4 ] ) for many of such microfragments may be insufficient . on the other hand ,",
    "it is reasonable to expect that multiple application of ( [ eq:4 ] ) , given relevant smoothing parameters , may lead to the `` collapse '' of fragments due to the motion of their boundaries towards the decrease in absolute magnitude of the transverse field . in practice , most types of bad fragments have the necessary feature : closed fragments , as a rule , collapse ( towards the necessary side ) , whereas open fragments ( part of the boundary in the weak noisy field is not seen ) transfer their boundaries to the noise region .    we have conducted numerous tests and selected the following type of cleaning ( step 2 ) .",
    "two types of smoothing procedures are used for cleaning . in terms of the idl code",
    ", they have the form : + a ) smoothig(s ) - sbx = smooth(bx , s,@xmath20edge)-bx / float(s2 ) & sby = smooth(by , s,@xmath20edge)-by / float(s2 ) + b ) median(s ) - sbx = median(bx , s,@xmath20even ) & sby = median(bx , s,@xmath20even ) + here , @xmath21 is the size of smoothing window . in this form ,",
    "smoothing in each node of the grid is performed only in adjacent nodes , exclusive of node values .",
    "this modification enhances features of the collapse .",
    "either of smoothing types a ) or b ) for the chosen parameter @xmath22 is repeatedly used with subsequent procedure ( [ eq:4 ] ) in the cycle with the exit condition : number of iterations reaches 300 or number of modified pixels is less than 5 or 0.01 % of the total amount of pixels .    the final cleaning ( step 2 ) is the following set of consecutive cycles : + loop1 - _ median_(3 ) ; + loop2 - _ smoothig_(19 ) ; + loop3 - _ smoothig_(9 ) ; + loop4 - _ smoothig_(5 ) ; + loop5 - _ smoothig_(3 ) .",
    "+ we have used this scheme for all the examples of calculations of model and real magnetograms given before .",
    "to compare sfq with other codes , we have processed all ambiguous magnetograms of known models used by and to estimate the majority of known methods for the azimuth disambiguation :    * http://www.cora.nwra.com/ambiguity_workshop/2005/data_files/barnes_tpd7.sav * http://www.cora.nwra.com/ambiguity_workshop/2005/data_files/fan_simu_ts56.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/tpd10/tpd10a.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/tpd10/tpd10b.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/tpd10/tpd10c.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/flowers/flowers13a.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/flowers/flowers13b.sav * http://www.cora.nwra.com/ambiguity_workshop/2006_workshop/flowers/flowersc.sav    all processing results are presented on http://bdm.iszf.irk.ru/sfq_disambig/models.zip by the set of graphs of transverse components of the field ( to make a visual estimate ) and by the corresponding set of digital idl sav files ( to make quantitative assessment of vector magnetograms quality ) .",
    "the following type of testing of @xmath23-disambiguation methods relies on the answer vector model of the photospheric field of a real magnetic region .",
    "such a model can be easily obtained through fixing vector components of the real component with removed @xmath23-ambiguity ( reference magnetogram ) by the reference method providing most reliable results .",
    "the answer model is the field components of the reference magnetogram transformed into the carrington spherical coordinate system , with interpolation into nodes of the uniform spherical grid .",
    "the resulting field is then used to generate answer magnetograms simulating transit of the selected magnetic configuration across the sun s disc . transforming answer magnetograms into ambiguous ones and comparing their processing effects ,",
    "we can obtain quantitative assessment for the method under study .",
    "such an approach to modelling allows us to present peculiarities of vector data and features of the real magnetic structure to a great extent in the model .",
    "degree of quality of the quantitative assessment depends on quality of the reference magnetogram .",
    "disambiguation errors in the reference magnetogram affect quality of the following tests .",
    "tests in section [ sect : known_models ] do not have this disadvantage ; on the other hand , there is no assurance that they properly represent real peculiarities of data .",
    "when making the answer vector model in our study , we used vector data on the sot / sp level 2 ( 12 - 17 december 2006 ) in ar 10930 and the reference sme method of @xmath23 disambiguation @xcite . using the model obtained as basis , we simulated transit of a fixed magnetic structure across the disc by a set of answer magnetograms corresponding to moments of ar 10930 real measurement data . to make quantitative assessment ,",
    "we used standard parameters from and : @xmath24    parameter values of @xmath23-disambiguation ( [ eq : metrics ] ) of model magnetograms for three methods ( sfq , sme , and npfc ) are presented is tables 1 - 6 .",
    "the first and second columns show position of magnetograms on the disc : the first corresponds to the time of real magnetograms with the same position on the disc ; the second demonstrates angular distance from the disc centre to the centre of an arbitrarily chosen region . under close examination",
    ", we see that the sfq quality in these tables is closer to sme .",
    "npfc demonstrates the worst quality near the limb .",
    "when approaching the limb , most sfq parameters seem more preferable than sme . besides , it is easily seen that the sfq quality all along the region transit is almost always on the same high level , whereas results of other methods deteriorate to a variable degree when approaching the limb .",
    "the last line of the table does not correspond to the time of the real magnetogram .",
    "parameters of this line show the sfq efficiency in the artificial position of the region when major part of the strong field stricture is behind the limb .",
    "images of transverse components of the answer magnetogram and sfq magnetogram in this case are presented in fig .",
    "[ fig : aranswer ] and [ fig : aranswersfq ] , respectively .",
    "this example proves that we can apply the sfq method for @xmath23 disambiguation of full - disc magnetograms without significant distortions of magnetic structures on the limb .",
    "all other images corresponding to tables 1 - 6 are available on :    http://bdm.iszf.irk.ru/sfq_disambig/answer_ar10930_model.zip : :     transverse components of answer magnetograms ; http://bdm.iszf.irk.ru/sfq_disambig/sfq_ar10930_model.zip : :     transverse components of sfq magnetograms ; http://bdm.iszf.irk.ru/sfq_disambig/sme_ar10930_model.zip : :     transverse components of sme magnetograms ; http://bdm.iszf.irk.ru/sfq_disambig/npfc_ar10930_model.zip : :     transverse components of npfc magnetograms",
    "complete set of graphics files containing results of @xmath23-disambiguation of real hinode / sot sp ( level  2 ) magnetogram data of ar 10930 by three methods is available on :    http://bdm.iszf.irk.ru/sfq_disambig/sfq_ar10930.zip : :     transverse components of sfq magnetograms ; http://bdm.iszf.irk.ru/sfq_disambig/sme_ar10930.zip : :     transverse components of sme magnetograms ; http://bdm.iszf.irk.ru/sfq_disambig/npfc_ar10930.zip : :     transverse components of npfc magnetograms .",
    "let us comment on these results , using two cases of the magnetic field location - near the centre ( fig .",
    "[ fig : ar10930_1]-[fig : ar10930_1_npfc ] ) and near the limb ( fig .",
    "[ fig : ar10930_2]-[fig : ar10930_2_npfc ] ) .    fig .",
    "[ fig : ar10930_1]-[fig : ar10930_1_npfc ] illustrate similar quality of disambiguation by the three methods . when the magnetic region is at its nearest to the limb ( fig .",
    "[ fig : ar10930_2]-[fig : ar10930_2_npfc ] ) , only sfq code copes with the task successfully . throughout this series of magnetograms , only sfq code demonstrates satisfactory quality .",
    "sme provides good quality for all magnetograms except for the last one .",
    "npfc maintains satisfactory level of quality from 12 december 2006 , 20:30:05 ( lc=50.1348770 ) , to 15 december 2006 , 05:45:05 ( lc=50.1348770 ) .",
    "unlike other codes , sfq maintains stable level of quality regardless of distance to the limb .",
    "this is consistent with the quantitative analysis presented in section [ sect : answer ] .      in this subsection , we demonstrate disambiguation of sdo / hmi data obtained 2 july 2010 for the entire disc in original spatial resolution .",
    "initial data were taken from http://sun.stanford.edu/~todd /hmical",
    "/ vectorb/[http://sun.stanford.edu/~todd /hmical / vectorb/ ] .",
    "we divided data into 10x10 rectangular fragments and sequentially applied the sfq code to them .",
    "[ fig : hmi ] presents the result of fragment assembly ( file containing this image in full resolution and fits files of the field components are available on http://bdm.iszf.irk.ru/sfq_disambig/20100702_010000_hmi.zip ) .",
    "it takes about one hour to disambiguate with core 2 quad ( 2.6 ghz ) workstation .",
    "the result that we have obtained demonstrates good quality for all large - scale and small - scale magnetic structures with magnitudes higher than the noise level throughout the disc .",
    "notice that the corrected magnetogram has a patchwork structure in the field of very weak fields .",
    "this is due to extremely low signal - to - noise ratio in the regions with very weak fields",
    "this paper presents a new code for the azimuth disambiguation of vector magnetograms . among all",
    "well - known algorithms for the azimuth disambiguation , sfq is the fastest ( more than 4 times faster as compared to the npfc algorithm ) . besides , our algorithm provides invariably high quality in all parts of the solar disc .",
    "this statement has been proved by testing on well - known analytical models and using real data from hinode sot / sp and sdo / hmi instruments . in the case of real magnetograms ,",
    "the method is efficient near the limb where other algorithms ( me and npfc ) do not give reliable results . due to the high speed and quality of disambiguation",
    ", the sfq method can be applied to process sdo / hmi vector magnetograms in full resolution ( 4096x4096 ) and in almost real - time mode .",
    "leka ,  k.  d. , barnes ,  g. ; crouch ,  a.:2009 , the second hinode science meeting : beyond discovery - toward understanding asp conference series , vol .",
    "415 , proceedings of a meeting held 29 september through 3 october 2008 at the national center for atmospheric research , boulder , colorado , usa . edited by b. lites , m. cheung , t. magara , j. mariska , and k. reeves .",
    "san francisco : astronomical society of the pacific , 2009 , p.365"
  ],
  "abstract_text": [
    "<S> the paper presents the possibility of fast and quality azimuth disambiguation of vector magnetogram data regardless of location on the solar disc . </S>",
    "<S> the new super fast and quality ( sfq ) code of disambiguation is tried out on well - known models of , and an artificial model based on observed magnetic field in ar 10930 @xcite . </S>",
    "<S> we make comparison of hinode sot sp vector magnetograms of ar 10930 disambiguated with three codes : sfq , npfc @xcite , and sme @xcite . </S>",
    "<S> we illustrate the sfq disambiguation on sdo / hmi full disk magnetic field observations . </S>",
    "<S> the preliminary examination indicates that the sfq algorithm provides better quality than npfc and is comparable to sme . </S>",
    "<S> in contrast to other codes , sfq supports relatively high quality which does not depend on the distance to the limb ( unlike all other algorithms the presented one remain efficient even when the magnetigram position is very close to the limb ) . </S>"
  ]
}