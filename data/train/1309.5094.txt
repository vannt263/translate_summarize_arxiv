{
  "article_text": [
    "in various economic contexts , institutions hold assets to cover future random liabilities .",
    "banks and insurance companies are required by the authorities to hold regulatory capital to cover the risks they take .",
    "pension funds face random future liabilities due to longevity risk and the structure of the pension plans which may involve variable annuity - type features .",
    "the problem of managing a portfolio of assets under the condition of covering future liabilities or benchmarks , in particular in the context of pension plans , is commonly known as asset - liability management ( alm ) @xcite .    the present study is mainly motivated by the alm problem of a nuclear power plant operator . in several countries ,",
    "energy companies operating nuclear power plants are required by law to hold decomissioning funds , to cover the future costs of decontaminating and dismantling the plants , as well as the treatment and long - term storage of the radioactive waste . in france , this obligation was introduced by the law n@xmath0 2006 - 739 of june 28 , 2006 relative to sustainable management of radioactive substances and waste . according to this law , the three major players of the civil nuclear industry in france ( edf , areva and cea ) must hold portfolios of assets dedicated to future nuclear decomissioning charges @xcite",
    ". the value of these dedicated assets must be sufficient to cover the discounted value of future liabilities .",
    "the discount rate is determined by the operator , but the law stipulates that `` it may not exceed the rate of return , as anticipated with a high degree of confidence , of the hedging portfolio , managed with sufficient security and liquidity '' . computing the highest possible discount rate is therefore equivalent to finding the cheapest portfolio which covers the future liabilities with a high degree of confidence .",
    "the law does not define the notions such as `` high degree of confidence '' in a precise manner , but it is clear that since the future liabilities are subject to considerable uncertainty , some kind of probabilistic risk measure criterion such as shortfall probability or value at risk should be used .    in other contexts ,",
    "the regulator stipulates that a specific probabilistic criterion should be used to measure the potential losses arising from not being able to cover the liabilities .",
    "basel ii framework uses the value at risk to determine regulatory capital for banks . under the european solvency ii directive ,",
    "insurance companies are required to evaluate the amount of capital necessary to cover their liabilities for a time horizon of one year with a probability of @xmath1 . under such frameworks",
    ", companies must therefore hold enough assets to limit the losses with respect to a random future benchmark in the sense of a probabilistic loss measure .",
    "motivated by these issues , in this paper , we consider the problem of an economic agent , who has random liabilities payable at a finite set of future dates , with expected shortfall constraints imposed at each payment date .",
    "we consider two related questions : how to find the least expensive portfolio which allows to satisfy the constraints ( hedge the liabilities ) at each date , and how to determine the relationship between the probabilistic constraints at different dates .",
    "for the latter issue , we propose three different formulations : with the european style constraints , the bound is imposed on the expected shortfall at each date , computed at @xmath2 ; in the time - consistent constraint , the bound is imposed at each payment date on the next period s shortfall ; finally , in the lookback - style constraint , the bound is imposed on the expectation of the maximal shortfall over all dates .    in the literature ,",
    "the problem of hedging a single random liability under a probabilistic constraint has been introduced and studied mainly in the complete market continuous - time setting in @xcite , where explicit solutions were obtained in the black - scholes model .",
    "this was generalized to markovian contexts in @xcite using stochastic control and viscosity solutions and later extended to other classes of stochastic target problems in @xcite . a related strain of literature deals with portfolio management under additional constraint of outperforming a stochastic benchmark at a given date @xcite or a deterministic benchmark at all future dates @xcite .",
    "the problem of hedging multiple stochastic benchmarks at a finite set of future dates , has , however , received little attention in the literature .    in our paper , motivated by practical concerns that the liability constraints must be verified at pre - specified given dates , we place ourselves in the discrete - time setting .",
    "to find the least expensive hedging portfolio , we adopt the classical complete market framework , which allows us to reformulate the problem as the one of finding the smallest discrete - time supermartingale satisfying a set of stochastic constraints .",
    "this can be seen as an extension of the classical notion of snell envelope , which arises in the problem of superhedging an american contingent claim  see ( * ? ? ?",
    "* section 6.5 ) .",
    "the market completeness assumption implies that in our context , the randomness of the future liabilities is mainly determined by `` hedgeable '' risk factors , such as the market risk , the interest rate risk , the inflation etc .",
    ", rather than by unpredictable random events like changes in the regulatory framework .    under the market completeness assumption , it is easy to find a strategy for hedging all future liabilities almost surely .",
    "the main difficulty of our problem is due to the fact that the constraints are given by expected loss functions and therefore probabilistic in nature .",
    "furthermore , we are concerned with general discrete - time processes where the markovian property holds no longer .",
    "our main contribution is to investigate the interplay between the probabilistic constraints at different dates , and to characterize the solution via dynamic programming in a general context .",
    "we consider three types of different risk constraints which concern respectively the expected loss at all liability payment dates , the time - consistent conditional loss in a dynamic manner and the maximum of all loss scenarios .",
    "for each of the three constraint styles that we use , we obtain a recursive formula for the least expensive hedging portfolio .",
    "explicit examples are then developed for specific loss functions .",
    "our paper is structured as follows . in section [ problem.sec ]",
    "we introduce three different formulations of the multi - objective hedging problem according to the three different constraint styles .",
    "section [ solution.sec ] presents a non - markovian dynamic programming approach to the solution .",
    "section [ examples2d.sec ] provides explicit examples in the case of two payment dates , and section [ examplesnd.sec ] contains some explicit results for the @xmath3-dimensional case .",
    "finally , technical lemmas are proven in the appendix .",
    "we start with a filtered probability space @xmath4 , where @xmath5 is a trivial @xmath6-field and @xmath7 . on this space",
    ", we consider a financial market model with a risk - free asset @xmath8 and @xmath9 risky assets @xmath10 .",
    "the risky assets are assumed to be adapted to the filtration @xmath11 . without loss of generality ,",
    "we take the risk - free asset to be a constant process : @xmath12 .",
    "we assume that there exists a class of admissible portfolio strategies which does not need to be made precise at this point . to guarantee absence of arbitrage and completeness",
    ", we make the following assumption : there exists a probability @xmath13 equivalent to @xmath14 such that all admissible self - financing portfolios are @xmath13-supermartingales , and for any @xmath13-supermartingale @xmath15 , there exists an admissible portfolio @xmath16 , which satisfies @xmath17 for all @xmath18 $ ] .    given a finite sequence of deterministic moments @xmath19",
    ", we study the problem of an economic agent , who is liable to make a series of payments @xmath20 at dates @xmath21 , where for each @xmath22 , @xmath23 is @xmath24-measurable and satisfies @xmath25<\\infty$ ] .",
    "this may model for example the cashflows associated to a variable annuity insurance contract , or to a long - term investment project .",
    "the portfolio of the agent , whose value is denoted by @xmath26 is effectively used to make the payments , and therefore satisfies @xmath27 .",
    "we assume that the agent has some tolerance for loss , which means that the negative part of @xmath28 must be bounded in a certain probabilistic sense ( to be made precise later in this section ) .    to work with self - financing portfolios we introduce the portfolio augmented with cumulated cash flows : @xmath29 as well as the benchmark process @xmath30 the agent is therefore interested in finding the cheapest portfolio process @xmath31 which outperforms , in a certain probabilistic sense , at dates @xmath21 , the benchmark process @xmath32 .",
    "due to our market completeness assumption , this is equivalent to finding the @xmath13-supermartigale @xmath33 with the smallest initial value which dominates the benchmark in a probabilistic sense at dates @xmath21 .",
    "introduce a discrete filtration @xmath34 defined by @xmath35 . for a @xmath11-supermartingale @xmath33 ,",
    "the discrete - time process @xmath36 defined by @xmath37 is a @xmath38-supermartingale , and conversely , from a @xmath38-supermartingale @xmath39 one can easily construct a @xmath40-supermartingale @xmath41 which coincides with @xmath39 at dates @xmath42 .",
    "therefore , our problem can be reformulated in the discrete time setting as the problem of finding a discrete - time @xmath13-supermartingale @xmath41 with respect to the filtration @xmath43 with the smallest initial value , such that for @xmath44 , @xmath45 dominates in a probabilistic sense the discrete - time benchmark @xmath46 ( we use the same letter for discrete and continuous - time benchmark ) .",
    "there are many natural ways of introducing risk tolerance into our multiperiod hedging problem . in this paper ,",
    "following @xcite , we consider that a bound is imposed on the expected shortfall , weighted by a loss function @xmath47 . throughout this paper",
    ", we will always assume that the following condition on @xmath48 is satisfied .",
    "[ assumption 1 ] the function @xmath47 is convex , decreasing and bounded from below .",
    "the above assumptions are natural to describe a loss function .",
    "a typical example will be a `` call '' function .",
    "in particular , when @xmath49 , we take the positive part of the loss and the situations when the liability is hedged will not be penalized . in some cases , we need stronger assumptions to get explicit results . the following assumption",
    "[ assumption 2 ] allows us to include widely - used utility functions .",
    "for example , when @xmath50 with @xmath51 , then assumption [ assumption 2 ] is satisfied .",
    "[ assumption 2 ] the function @xmath52 is strictly convex , strictly decreasing , bounded from below and of class @xmath53 .",
    "in addition , the derivative @xmath54 satisfies the inada s condition @xmath55 and @xmath56 .",
    "we next describe the three different constraints for our problem as follows .",
    "[ [ european - style - constraint ] ] european - style constraint + + + + + + + + + + + + + + + + + + + + + + + + +    * find the minimal value of @xmath57 such that there exits a @xmath13-supermartingale @xmath58 with @xmath59 \\leq \\alpha_k\\ \\text{for}\\ k=1,\\dots , n.\\label{consteu}\\end{aligned}\\ ] ] we denote the set of all @xmath13-supermartingales satisfying by @xmath60 .    [ [ time - consistent - constraint ] ] time - consistent constraint + + + + + + + + + + + + + + + + + + + + + + + + + +    * find the minimal value of @xmath57 such that there exits a @xmath13-supermartingale @xmath58 with @xmath61 \\leq \\alpha_k,\\,\\ , a.s . \\,\\",
    "k=1,\\dots , n.\\label{consttc}\\end{aligned}\\ ] ] we denote the set of all @xmath13-supermartingales satisfying by @xmath62 .",
    "the time - consistent constraint has an interesting interpretation as an `` american - style '' guarantee .",
    "[ prop american ] let @xmath41 be an @xmath43-adapted process .",
    "then the condition @xmath63\\leq \\alpha_k , \\ , a.s .",
    "\\quad k=1,\\cdots , n\\ ] ] is equivalent to : for all @xmath43-stopping times @xmath64 and @xmath6 taking values in @xmath65 such that @xmath66 , @xmath67\\leq 0.\\ ] ]    let @xmath68 , @xmath69 .",
    "the condition is equivalent to the fact that the process @xmath70 is a @xmath14-supermartingale .",
    "equation then follows from doob s theorem .",
    "conversely , assume that holds and let @xmath71 for @xmath72 .",
    "taking @xmath73 and @xmath74 , we get from , @xmath75\\leq 0.\\ ] ] since @xmath76 and @xmath77 are arbitrary , this proves the supermartingale property of @xmath70 .    [",
    "[ lookback - style - constraint ] ] lookback - style constraint + + + + + + + + + + + + + + + + + + + + + + + + +    * find the minimal value of @xmath57 such that there exits a @xmath13-supermartingale @xmath58 with @xmath78 \\leq 0.\\label{constlb}\\end{aligned}\\ ] ]",
    "we denote the set of all @xmath13-supermartingales satisfying by @xmath79 .",
    "[ [ relationship - between - different - types - of - constraints ] ] relationship between different types of constraints + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    for a given family of bounds @xmath80 , we denote by @xmath81 , @xmath82 and @xmath83 ( or @xmath84,@xmath85 and @xmath86 when there is no ambiguity ) the infimum value of @xmath57 where @xmath58 belongs to , respectively , @xmath60 , @xmath87 and @xmath79 .",
    "the following proposition shows that @xmath88    [ pro : inclusion ] the following inclusion holds true : @xmath89 .",
    "clearly , @xmath90 .",
    "the inclusion @xmath91 follows from the alternative representation for the time - consistent constraint .    when @xmath92 , the three constraint types coincide .",
    "in addition , the value function has an explicit form in some particular cases .",
    "[ n1.prop]let @xmath92 and assume that @xmath93 .    1 .",
    "let assumption [ assumption 2 ] hold true and assume that there exists @xmath94 with @xmath95<\\infty$ ] , where @xmath96 . then @xmath97 + \\mathbb e^{\\mathbb q}[i(\\lambda^ * z)],\\ ] ] where @xmath98 is the inverse function of @xmath99 and @xmath100 is the unique solution of @xmath101 = \\alpha$ ] .",
    "2 .   assume that @xmath102 .",
    "then , @xmath103 + l^{-1}(\\alpha)\\ ] ] where @xmath104 .",
    "the first part is a particular case of proposition [ prop : value function time consistent ] which will be shown below .",
    "this result is also very similar to the solution of the classical concave utility maximization problem for which we refer the reader for example to ( * ? ? ?",
    "* theorem 2.0 ) .",
    "the second part is obtained by using the jensen s inequality .",
    "the following proposition is a natural generalization of the second case of proposition [ n1.prop ] and describes another situation when the three value functions coincide .",
    "however , we need an extra hypothesis for @xmath105 .",
    "assume that @xmath106 , @xmath107 for @xmath108 and @xmath109 \\geq s_k + l^{-1}(\\alpha_k)\\label{assterm.eq}\\end{aligned}\\ ] ] for any @xmath110 , where @xmath104 .",
    "then , @xmath111+l^{-1}(\\alpha_n).\\ ] ]    assumption is implied for example by the following assumptions .    *",
    "the process @xmath112 is a submartingale . *",
    "the process @xmath113 is a submartingale and @xmath114 for @xmath115 .    from proposition [ n1.prop ] , by removing all constraints except the terminal one , we get @xmath116+l^{-1}(\\alpha_n).\\ ] ] to show the reverse inequality , let @xmath117.\\ ] ] by assumption , @xmath118 , which means that @xmath119",
    ". therefore , @xmath120+l^{-1}(\\alpha_n).\\ ] ] the proof is completed by applying proposition [ pro : inclusion ] .",
    "in this section , we solve our optimization problem for the three types of constraints .",
    "the main method consists of using the dynamic programming principle where the constraints are to be verified at each payment date .",
    "we begin by the european - style constraint which consists of a family of expectation constraints .",
    "denote by @xmath121 the infimum value of @xmath57 where @xmath122 .",
    "the following result characterizes @xmath121 by using a family of @xmath14-supermartingales , each of which corresponds to one expectation constraint .",
    "[ pro : first condition v0 ] @xmath121 equals the infimum value of @xmath57 such that there exist a @xmath13-supermatingale @xmath123 and a family of @xmath14-supermartingales @xmath124 , @xmath110 , satisfying @xmath125 and @xmath126 .",
    "denote by @xmath127 the set of all @xmath128 which satisfy the conditions in the proposition and by @xmath129 the infimum value of the related @xmath57 . if @xmath130 , then @xmath131\\geq\\mathbb e^{\\mathbb p}[l(m_k - s_k)].\\ ] ] therefore @xmath122 , which implies @xmath132 .",
    "conversely , given a @xmath133-supermartingale @xmath122 , we construct processes @xmath124 such that @xmath125 and @xmath134 $ ] for @xmath135 .",
    "the condition @xmath136\\leq\\alpha_k$ ] implies that @xmath124 is a @xmath14-supermartingale .",
    "it follows that the inverse inequality @xmath137 holds true as well .    for the dynamic solution",
    ", we will introduce the value - function process @xmath138 for @xmath110 .",
    "note that , instead of a family of real - valued bounds @xmath80 for @xmath139 , the value function @xmath138 will take as parameters a family of random variables which describe the evolution of the successive bounds on the expected shortfall .",
    "for @xmath140-measurable random variables @xmath141 , let @xmath142 be the essential infimum of all @xmath143 such that there exists a @xmath13-supermartingale @xmath144 with @xmath145\\leq n^t$ ] for any @xmath146 .",
    "we denote by @xmath147 the set of all such @xmath13-supermartingales which start from @xmath77 . by convention ,",
    "let @xmath148 and @xmath149 coincide with the set of all @xmath150-measurable random variables .",
    "we have in particular @xmath151 : \\mathbb e^{\\mathbb p}[l(m_n - s_n)|\\mathcal f_{n-1}]\\leq n^n\\}\\\\ & = \\mathbb e^{\\mathbb q}[s_n|\\mathcal f_{n-1 } ] + \\text{essinf}_{m\\in\\mathcal    f_n}\\{\\mathbb e^{\\mathbb q}[m|\\mathcal f_{n-1 } ] : \\mathbb e^{\\mathbb p}[l(m)|\\mathcal f_{n-1}]\\leq n^n\\}. \\ ] ] in fact , if @xmath152 is a @xmath13-supermartingale such that @xmath153\\leq n^n$ ] , then @xmath154,m_n)$ ] is also a @xmath13-martingale satisfying this condition and one has @xmath155 $ ] .",
    "similarly to proposition [ pro : first condition v0 ] , we can prove that @xmath142 equals the essential infimum of @xmath143 such that there exists a @xmath13-supermartingale @xmath144 together with a family of @xmath14-supermartingales @xmath156 such that @xmath157 and that @xmath158 for any @xmath146 .",
    "[ lem : filtrant ] let @xmath159 , then there exists a supermartingale @xmath160 such that @xmath161 .    by definition , @xmath145\\leq n^t$ ] and @xmath162\\leq n^t$ ] for any @xmath146 .",
    "let @xmath76 be the set @xmath163 , which is @xmath140-measurable .",
    "for any @xmath164 , let @xmath165 .",
    "since @xmath71 , @xmath166 is a @xmath13-supermartingale .",
    "moreover , @xmath167 and @xmath168= \\indic_a\\mathbb e^{\\mathbb p}[l(m_t'-s_t)|\\mathcal f_k]+\\indic_{a^c}\\mathbb e^{\\mathbb p}[l(m_t - s_t)|\\mathcal f_k]\\leq n^t,\\ ] ] therefore @xmath160 .",
    "the following result characterizes the value - function process in a backward and recursive form .",
    "[ eu main result ] @xmath142 equals the essential infimum of all @xmath169 such that there exist @xmath170 and a family of @xmath14-supermartingales @xmath171 , @xmath172 , @xmath173 which satisfy the following conditions  : @xmath174=m_k,\\\\   n_k^i = n^i \\text { for   $ i\\in\\{k+1,\\ldots , n\\}$},\\\\   n_{k+1}^{k+1}\\geq l(m_{k+1}-s_{k+1}),\\\\ m_{k+1}\\geq v_{k+1}(n_{k+1}^{k+2},\\ldots , n_{k+1}^n ) . \\end{cases}\\ ] ]    by definition , the theorem is true for @xmath175 . in the following ,",
    "we treat the case @xmath176 by induction .",
    "denote by @xmath177 the essential infimum defined in the theorem .",
    "let @xmath178 be an @xmath179-measurable random variable and @xmath171 , @xmath172 , @xmath173 be @xmath14-supermartingales which verify the conditions in .",
    "note that the fourth condition , together with the essential infimum property , imply ( e.g. ( * ? ? ?",
    "* v.18 ) ) the existence of a sequence of random variables @xmath180 in @xmath181 such that @xmath182 .",
    "moreover , the previous lemma shows that the sequence @xmath180 can be supposed decreasing without loss of generality . by a similar argument as in proposition [ pro : first condition v0 ] , there exist @xmath13-supermartingales @xmath183 and @xmath14-supermartingales @xmath184 , @xmath172 , @xmath185 such that @xmath186 we extend each @xmath187 to a @xmath14-supermartingale on @xmath188 by taking @xmath189 , @xmath190 .",
    "let @xmath191 $ ] for any @xmath192 .",
    "note that the @xmath13-supermartingale @xmath193 and the @xmath14-supermartingales @xmath171 , @xmath194 verify the conditions which characterize @xmath142 .",
    "therefore @xmath195 for any @xmath192 , which implies that @xmath196\\leq   \\mathbb e^{\\mathbb q}[m_{k+1}|\\mathcal f_t],\\ ] ] where the second inequality comes from the relation @xmath182 and the fact that the sequence @xmath180 is decreasing .",
    "hence we obtain @xmath197 .",
    "conversely , let @xmath144 be a @xmath13-supermartingale and @xmath198 be @xmath14-supermartingales such that @xmath199 and that @xmath200 for any @xmath201 . without loss of generality , we assume @xmath202 $ ] .",
    "the conditions in are easily verified for @xmath178 , @xmath198 except the last one .",
    "note that for any @xmath201 , the condition @xmath200 implies @xmath203\\geq\\mathbb e^{\\mathbb p}[l(m_i - s_i)|\\mathcal f_{k+1}],\\ ] ] where the first inequality comes from the fact that @xmath204 is a @xmath14-supermartingale .",
    "therefore , @xmath205 , which leads to the inverse inequality .    the supermartingale condition in the previous theorem can be made simpler where only @xmath179-measurable random variables are concerned .",
    "in particular , we consider the case of real - valued bounds .",
    "[ cor : dynamic ] @xmath206 equals the essential infimum of all conditional expectations @xmath207 $ ] , @xmath208 such that there exist @xmath179-measurable random variables @xmath209 satisfying the following conditions : @xmath210=\\alpha_i \\text { for } i\\in\\{k+2,\\ldots , n\\},\\\\ \\mathbb e^{\\mathbb p}[l(m - s_{k+1})|\\mathcal f_k]\\leq \\alpha_{k+1},\\\\ m\\geq v_{k+1}(n^{k+2},\\ldots , n^n).\\\\ \\end{cases}\\ ] ]    denote by @xmath211 the essential infimum defined in the corollary .",
    "we begin with @xmath179-measurable random variables @xmath41 , @xmath212 satisfying the conditions in .",
    "let @xmath213 and @xmath214 $ ] .",
    "we then construct @xmath14-supermartingales @xmath198 with @xmath215 for @xmath201 , @xmath216 and @xmath217 for @xmath218 .",
    "therefore , @xmath219 .",
    "note that the essential infimum @xmath211 remains unchanged if we replace the first condition of by `` @xmath220\\leq \\alpha_i$ ] _ for any _",
    "@xmath218 '' since the function @xmath221 is descreasing with respect to each coordinate .",
    "let @xmath170 and @xmath198 satisfy the conditions in .",
    "we choose @xmath222 and @xmath223 for @xmath218 . by , @xmath224 and @xmath220\\leq n_k^i=\\alpha_i$ ] .",
    "moreover , since @xmath225 , one has @xmath226\\geq\\mathbb",
    "e^{\\mathbb p}[l(m - s_{k+1})|\\mathcal f_k].\\ ] ] hence @xmath227 .      for the time - consistent constraint ,",
    "we consider the loss function at each payment date given the market information at the previous time step .",
    "the constraint is written by using conditional expectations .",
    "the dynamic programming structure in this setting is relatively simple since it only involves two successive dates .",
    "recall that @xmath62 is the set of all @xmath13-supermartingales @xmath58 with @xmath61 \\leq \\alpha_k\\ \\text{for}\\ k=1,\\dots , n.\\end{aligned}\\ ] ] in a dynamic manner , denote by @xmath228 the set of all @xmath13-supermartingales @xmath144 verifying the condition @xmath229\\leq\\alpha_t\\text { for } t = k+1,\\ldots , n.\\ ] ] note that @xmath230 is the set of all integrable @xmath150-measurable random variables and @xmath231 coincides with @xmath62 . define the value - function process @xmath232 in a backward manner as follows  : @xmath148 , and for @xmath110 , let @xmath233 : m\\geq v_k,\\text { and } \\mathbb e^\\mathbb p[l(m - s_k)|\\mathcal    f_{k-1 } ] \\leq \\alpha_k\\}\\ ] ]    [ pro : tcprogdy ] for any @xmath234 , @xmath235    the case where @xmath236 is trivial . in the following , we assume that the equality @xmath237 has been proved .",
    "let @xmath238 be an element in @xmath239 .",
    "there then exists a @xmath13-supermartingale @xmath240 such that @xmath229\\leq\\alpha_t\\text { for } t = k,\\ldots , n,\\ ] ] which implies that @xmath241 .",
    "therefore @xmath242 by the induction hypothesis .",
    "combining this with the condition @xmath243 $ ] , we obtain by definition that @xmath244\\leq m_{k-1}$ ] .",
    "hence @xmath245 .    for the converse inequality ,",
    "let @xmath246 such that @xmath247 and @xmath248\\leq\\alpha_k$ ] . by the induction hypothesis and an argument similar to lemma [ lem : filtrant ]",
    ", there exists a family @xmath193 of @xmath13-supermartingales indexed by @xmath192 such that @xmath249\\leq\\alpha_t\\text { for } t = k+1,\\ldots , n,\\ ] ] and @xmath140-measurable sequence @xmath250 is decreasing and @xmath251 . for each @xmath192 , let @xmath252 , @xmath253 $ ] and @xmath254 for @xmath146 . then @xmath255 is a @xmath13-supermartingale .",
    "moreover , @xmath256\\leq\\alpha_t\\text { for } t = k,\\ldots , n,\\ ] ] which implies @xmath257 . therefore @xmath258\\ ] ] for any @xmath192 . by taking the limit when @xmath259 goes to the infinity , one obtains @xmath260 $ ] by @xmath251 . since @xmath41 is arbitrary , @xmath261 . the result is thus proved .    by the previous proposition , we can calculate the smallest initial capital @xmath139 by using the recursive formula for the value function . with extra regularity condition on the loss function @xmath48",
    ", we can obtain a more explicit result as follows .",
    "[ prop : value function time consistent ] let @xmath48 be a loss function satisfying assumption [ assumption 2 ] and let @xmath262 be the inverse function of @xmath99 .",
    "suppose in addition that for any @xmath110 , @xmath263 and there exists a strictly negative random variable @xmath264 such that @xmath265<+\\infty\\,\\text { where } z_k = \\mathbb e^\\mathbb p[\\frac{d\\mathbb q}{d\\mathbb p}\\,|\\ , \\mathcal f_k].\\ ] ] then the value function @xmath266 satisfies @xmath267 a.s . for @xmath268 where @xmath269 is given by @xmath270\\end{aligned}\\ ] ] where @xmath271 is the solution of @xmath272 = \\alpha_n,\\label{lambdastep1}\\end{aligned}\\ ] ] and for @xmath273 , @xmath274 \\\\+ \\mathbb e^\\mathbb q\\left[\\left\\{s_k - \\widehat v_k+      i(\\lambda_{k-1 } z_k / z_{k-1})\\right\\}^+\\big| \\mathcal f_{k-1}\\right]\\mathbf 1_{\\mathbb e^\\mathbb p[l(\\widehat v_k - s_k)|\\mathcal f_{k-1 } ] >",
    "\\alpha_k},\\end{gathered}\\ ] ] where @xmath275 is the solution of @xmath276 = \\alpha_k.\\end{aligned}\\ ] ]    @xmath277 + _ step 1 .",
    "existence of @xmath278 .",
    "_  for any @xmath110 ,",
    "let @xmath279 be the set of strictly negative @xmath280-measurable random variables @xmath281 such that @xmath282 \\leq \\alpha_k.\\end{aligned}\\ ] ] by using the dominated convergence theorem , the condition @xmath283 and assumption imply that the family @xmath279 is not empty .",
    "let @xmath284 be the essential infimum of this family .",
    "note that @xmath279 is stable by taking the infimum of finitely many random variables .",
    "therefore @xmath284 can be written as the limit of a decreasing sequence in @xmath279 .",
    "the continuity of the functions @xmath98 and @xmath48 , together with the monotone convergence theorem , show that @xmath284 lies in the family @xmath279 .",
    "it remains to show the equality .",
    "if the equality does not hold , then for sufficiently small @xmath285 , the set @xmath286 of @xmath287 such that @xmath288(\\omega ) \\leq \\alpha_k\\ ] ] has a strictly postive measure .",
    "this implies that @xmath289 also lies in @xmath279 , which leads to a contradiction .",
    "_ step 2 . representation for @xmath290 . _  by proposition [ pro : tcprogdy ] , @xmath291+\\essinf_{m\\in \\mathcal f_n}\\{\\mathbb e^{\\mathbb q } [ m|\\mathcal f_{n-1 } ] : \\mathbb e^{\\mathbb p}[l(m)|\\mathcal f_{n-1}]\\leq \\alpha_n\\}\\ ] ] taking @xmath292 , we see that @xmath293 . on the other hand , for every strictly negative random variable @xmath294 , @xmath295 where @xmath296 is the legendre transformation of @xmath48 .",
    "note that one has @xmath297 .",
    "so @xmath298\\\\ & \\geq \\essinf_{m\\in \\mathcal f_n}\\{\\mathbb e^{\\mathbb q } [ m|\\mathcal f_{n-1 } ] :   \\mathbb e^{\\mathbb p}[l^*(\\lambda z_n / z_{n-1 } ) + \\lambda m z_n / z_{n-1}|\\mathcal f_{n-1}]\\leq \\alpha_n\\}\\\\ & = \\essinf_{m\\in \\mathcal f_n}\\{\\mathbb e^{\\mathbb q } [ m|\\mathcal f_{n-1 } ] :   \\mathbb e^{\\mathbb p}[l^*(\\lambda z_n / z_{n-1})|\\mathcal f_{n-1 } ] + \\lambda \\mathbb e^{\\mathbb q}[m |\\mathcal f_{n-1}]\\leq \\alpha_n\\}\\\\ & = \\frac{\\alpha_n -\\mathbb e^{\\mathbb p}[l^*(\\lambda z_n / z_{n-1 } )    |\\mathcal f_{n-1 } ] } { \\lambda}\\\\ & = \\frac{\\alpha_n -\\mathbb e^{\\mathbb p}[l(i(\\lambda    z_n / z_{n-1 } ) ) |\\mathcal f_{n-1 } ] } { \\lambda } + \\mathbb e^{\\mathbb q } [ i(\\lambda    z_n / z_{n-1 } ) |\\mathcal f_{n-1 } ] , \\ ] ] where the last equality comes from the relation @xmath299 .",
    "taking @xmath278 to be the solution of , we find that @xmath300 , which proves the desired representation of @xmath290 .",
    "general case .",
    "_  we now proceed to the proof of the general case by induction on @xmath77 .",
    "assume that we have already established the equality @xmath301 .",
    "by proposition [ pro : tcprogdy ] and this induction hypothesis , @xmath302\\,:\\,m\\geq\\widehat v_k,\\ ; \\mathbb e^{\\mathbb p}[l(m - s_k)|\\mathcal f_{k-1}]\\leq\\alpha_k\\}.\\ ] ] we choose @xmath303 > \\alpha_k},\\ ] ] which is bounded from below by @xmath304 and satisfies @xmath305\\leq\\alpha_k$ ] .",
    "in fact , it is clear that this inequality holds on the set @xmath306\\leq \\alpha_k\\}$ ] .",
    "moreover , on the set @xmath306",
    "> \\alpha_k\\}$ ] , one has @xmath307 , so @xmath308=\\mathbb e^{\\mathbb p}[l(i(\\lambda_{k-1}z_k / z_{k-1})\\vee ( \\widehat{v}_k - s_k))|\\mathcal f_{k-1}]\\]]which implies @xmath305\\leq\\alpha_k$ ] on this set by the definition of @xmath284 .",
    "hence @xmath309=\\widehat{v}_{k-1}.\\ ] ]    the opposite inequality @xmath310 is straightforward on the set @xmath306\\leq \\alpha_k\\}$ ] .",
    "it remains to establish the inequality on the set @xmath306",
    "> \\alpha_k\\}$ ] .",
    "we have by a variable change @xmath311\\\\ & = \\essinf_{}\\{\\mathbb e^{\\mathbb q}[m|\\mathcal f_{k-1}]:m\\geq 0,\\ ; \\mathbb e^{\\mathbb p}[l(m+\\widehat{v}_k - s_k)|\\mathcal f_{k-1}]\\leq\\alpha_k\\},\\\\ & \\geq\\essinf_{m\\in\\mathcal f_k , m\\geq 0}\\{\\mathbb e^{\\mathbb    q}[m|\\mathcal f_{k-1}]:\\mathbb e^{\\mathbb p}[l^*\\big(\\lambda { z_{k}\\over z_{k-1}}\\big)+\\lambda(m+\\widehat{v}_k - s_k ) { z_{k}\\over z_{k-1}}\\big|\\mathcal f_{k-1}]\\leq\\alpha_k\\}\\\\ & = \\essinf_{m\\in\\mathcal f_k , m\\geq 0}\\{\\mathbb e^{\\mathbb q}[m|\\mathcal f_{k-1}]:\\mathbb e^{\\mathbb p}[l^*\\big(\\lambda { z_{k}\\over z_{k-1}}\\big)|\\mathcal f_{k-1}]+\\lambda\\mathbb e^{\\mathbb q}[m+\\widehat{v}_k - s_k|\\mathcal f_{k-1}]\\leq\\alpha_k\\}\\\\ & = \\essinf_{m\\in\\mathcal f_k , m\\geq 0}\\big\\{\\mathbb e^{\\mathbb q}[m|\\mathcal f_{k-1}]:\\\\&\\qquad \\mathbb e^{\\mathbb q}[m|\\mathcal f_{k-1}]\\geq\\frac{\\alpha_k-\\mathbb    e^{\\mathbb p}[l(i(\\lambda { z_k\\over z_{k-1}}))|\\mathcal f_{k-1}]}{\\lambda } + \\mathbb e^{\\mathbb q}[s_k-\\widehat{v}_k+ i\\big(\\lambda { z_k\\over z_{k-1}}\\big)\\big|\\mathcal f_{k-1}]\\big\\ } \\end{split}\\ ] ] for any strictly negative @xmath312 .",
    "on the set @xmath306 > \\alpha_k\\}$ ] , the last constraint above can be replaced by @xmath313\\geq\\frac{\\alpha_k-\\mathbb e^{\\mathbb p}[l(i(\\lambda      z_k / z_{k-1})\\vee(\\widehat{v}_k - s_k))|\\mathcal      f_{k-1}]}{\\lambda}\\\\+\\mathbb e^{\\mathbb q}[\\big(s_k-\\widehat{v}_k+    i(\\lambda z_k / z_{k-1})\\big)+|\\mathcal f_{k-1}].\\end{gathered}\\ ] ] now we choose @xmath278 to be the solution of to obtain the following constraint @xmath314\\geq \\mathbb e^{\\mathbb q}[\\big(s_k-\\widehat{v}_k+i(\\lambda_{k-1}z_k / z_{k-1})\\big)+|\\mathcal f_{k-1}].\\ ] ] therefore on the set",
    "@xmath306 > \\alpha_k\\}$ ] , we have @xmath315\\geq \\mathbb e^{\\mathbb q}[\\big(s_k-\\widehat{v}_k+i(\\lambda_{k-1}z_k / z_{k-1})\\big)^+|\\mathcal f_{k-1}],\\ ] ] which implies the inequality @xmath310 .",
    "the theorem is thus proved .    in the risk - neutral case",
    "where @xmath106 , we can relax assumption [ assumption 2 ] and obtain a similar result under assumption [ assumption 1 ] only .",
    "[ time_consistent_riskneutral : propo ] we assume that @xmath102 and that for any @xmath110 , @xmath263 .    1 .",
    "the value function satisfies @xmath267 a.s .",
    "for @xmath268 where @xmath316 + l^{-1}(\\alpha_n)\\\\   \\widehat v_{k-1 } & = \\mathbb e [ \\widehat v_k|\\mathcal f_{k-1 } ] \\\\ & + \\mathbb e\\left[\\left\\{s_k -   \\widehat v_k+      \\lambda_k\\right\\}^+\\big| \\mathcal f_{k-1}\\right]\\mathbf 1_{\\mathbb e[l ( \\widehat v_k - s_k)|\\mathcal f_{k-1 } ] > \\alpha_k},\\ , k < n,\\end{aligned}\\ ] ] where @xmath317 is the solution of @xmath318 = \\alpha_k.\\label{eqlambda}\\end{aligned}\\ ] ] 2 .",
    "if the loss function @xmath319 , with @xmath320 for all @xmath77 , then the value function satisfies @xmath267 a.s .",
    "for @xmath268 where @xmath321 - \\alpha_n\\\\ \\widehat v_{k-1 } & = \\max\\{\\mathbb e[\\widehat v_k|\\mathcal f_{k-1 } ] , \\mathbb e[\\widehat v_k \\vee s_k - \\alpha_k|\\mathcal f_{k-1}]\\}. \\end{aligned}\\ ] ]    1 .",
    "the formula for @xmath290 follows directly from jensen s inequality .",
    "we prove the general case by induction .",
    "assume that we have already established the equality @xmath322 . to prove the formula for @xmath323",
    ", we first follow step 1 in the proof of proposition [ prop : value function time consistent ] to establish the existence of @xmath324 . next , let @xmath325>\\alpha_k}.\\ ] ] clearly , @xmath247 .",
    "in addition , @xmath326 & = \\mathbb e[l(\\widehat v_k -s_k + \\left\\{s_k - \\widehat v_k + \\lambda_k\\right\\}^+\\mathbf 1_a ) |\\mathcal f_{k-1}]\\\\ & = \\mathbf 1_a \\mathbb e[l(\\lambda\\vee(\\widehat v_k -s_k ) ) |\\mathcal f_{k-1 } ] + \\mathbf 1_{a^c } \\mathbb e[l(\\widehat v_k -s_k ) |\\mathcal f_{k-1}]\\\\ & \\leq \\alpha_k,\\end{aligned}\\ ] ] where we denote @xmath327>\\alpha_k\\}\\in \\mathcal f_{k-1}$ ] .",
    "this proves that @xmath328 .",
    "+ the opposite inequality only needs to be shown on the set @xmath76 . as in the proof of proposition [ prop : value function time consistent ] , we have , @xmath329 = \\essinf_{m\\in \\mathcal f_k , m\\geq 0}\\{\\mathbb e[m|\\mathcal f_{k-1 } ] : \\mathbb e[l(m+\\widehat{v}_k - s_k)|\\mathcal f_{k-1}]\\leq\\alpha_k\\}.\\ ] ] let @xmath41 be any random variable satisfying the constraints . then , by convexity , @xmath330 \\\\",
    "& \\leq    \\mathbb e[l'(\\lambda_k \\vee ( \\widehat v_k - s_k ) ) ( \\lambda_k \\vee ( \\widehat v_k - s_k)- m-\\widehat v_k + s_k)|\\mathcal f_{k-1 } ] \\\\ & = \\mathbb e[\\mathbf 1_{\\lambda_k \\geq \\widehat v_k -    s_k}l'(\\lambda_k ) ( \\lambda_k -m - \\widehat v_k + s_k)-\\mathbf",
    "1_{\\lambda_k < \\widehat v_k -    s_k}l'(\\widehat v_k - s_k ) m|\\mathcal f_{k-1}]\\\\ & = l'(\\lambda_k)\\mathbb e [ ( \\lambda_k - \\widehat v_k + s_k)^+-m|\\mathcal f_{k-1 } ] -\\mathbb e[(l'(\\widehat v_k - s_k)-l'(\\lambda_k))^+ m|\\mathcal f_{k-1}],\\end{aligned}\\ ] ] where @xmath331 denotes any number belonging to the subdifferential of the convex function @xmath48 at the point @xmath332 , defined by @xmath333 since @xmath334 , this implies @xmath335 \\geq 0.\\ ] ] by the assumption of the proposition , on the set @xmath336 , @xmath337 and @xmath324 may not be the solution of equation .",
    "therefore , @xmath338 almost surely , and @xmath339 \\leq 0\\ ] ] on @xmath76 , which finishes the proof .",
    "2 .   the formula for @xmath290 follows from part 1 . when @xmath340\\leq \\alpha_k$ ] , @xmath341\\geq \\mathbb e[v_k\\vee s_k - \\alpha_k|\\mathcal f_{k-1}]$ ] , and the formulas hold true .",
    "assume then that @xmath342>\\alpha_k$ ] .",
    "first we observe that @xmath343 a.s .",
    ", otherwise on the set where @xmath344 , @xmath345 and the conditional expectation can not be equal to @xmath346 .",
    "therefore , @xmath347 = \\mathbb e[s_k|\\mathcal f_{k-1 } ] + \\mathbb e[\\lambda_k \\vee ( v_k - s_k)|\\mathcal f_{k-1 } ] \\\\ &   = e[s_k|\\mathcal f_{k-1 } ] + \\mathbb e[(\\lambda_k \\vee ( v_k - s_k))^+|\\mathcal f_{k-1 } ] - \\mathbb e[(\\lambda_k \\vee ( v_k - s_k))^-|\\mathcal f_{k-1}]\\\\ &   = e[s_k|\\mathcal f_{k-1 } ] + \\mathbb e [ ( v_k - s_k)^+|\\mathcal f_{k-1 } ] - \\mathbb e[l(\\lambda_k \\vee ( v_k - s_k))|\\mathcal f_{k-1}]\\\\ & = \\mathbb e [ v_k \\vee s_k|\\mathcal f_{k-1 } ] - \\alpha_k.\\end{aligned}\\ ] ]      the lookback constraint involves the maximum value of the loss function during the whole period .",
    "so the dynamic programming structure takes into account this variable .",
    "recall that @xmath79 denotes the set of all @xmath13-supermartingales @xmath58 with @xmath348 \\leq 0.\\ ] ] define @xmath349 , where @xmath350 is a pair of @xmath140-measurable random variables , to be the essential infimum of all @xmath143 such that there exist a @xmath13-supermartingale @xmath144 and a @xmath14-supermartingale @xmath351 verifying @xmath352 we denote the set of all such @xmath13-supermartingales @xmath144 by @xmath353 . by convention , let @xmath354    @xmath355    let @xmath58 and @xmath356 be respectively @xmath13 and @xmath14 supermartingales which verify with @xmath357",
    ". then @xmath358 therefore @xmath359\\geq\\mathbb e^{\\mathbb p}[\\max_{k\\in\\{1,\\ldots , n\\}}\\{l(m_k - s_k)-\\alpha_k\\}].\\ ] ] hence @xmath360 . therefore @xmath361    conversely , given a @xmath13-supermartingale @xmath58 in @xmath79 , we can choose @xmath362 and @xmath363 $ ] , @xmath364 and @xmath365 to construct a @xmath14-supermartingale @xmath356 verifying the condition with @xmath357 .",
    "thus @xmath366 .",
    "the result is proved .",
    "[ lookback : recursive ] @xmath349 equals the essential infimum of all @xmath207 $ ] , @xmath208 such that there exists a random variable @xmath367 satisfying@xmath368=n_k,\\\\ m\\geq v_{k+1}\\big(n,\\max(z_k , l(m - s_{k+1})-\\alpha_{k+1})\\big ) .",
    "\\end{cases}\\ ] ]    denote by @xmath369 the essential infimum defined in the theorem .",
    "let @xmath41 and @xmath39 be random variables which verify . by an argument similar to lemma [ lem :",
    "filtrant ] , there exists a decreasing sequence of random variables @xmath180 in @xmath370 such that @xmath371 . moreover , there exist @xmath13-supermartingales @xmath183 and @xmath14-supermartingales @xmath372 verifying @xmath373 and @xmath374 . let @xmath191 $ ] and @xmath375 . the processes @xmath193 and @xmath376 are respectively @xmath13 and @xmath14 supermartingales which satisfy the condition .",
    "therefore , @xmath377 for any @xmath192 , which implies @xmath207\\geq v_k(n_k , z_k)$ ] .",
    "so @xmath378 .",
    "conversely , let @xmath144 and @xmath379 be respectively @xmath13-supermartingale and @xmath14-supermartingale which verify the condition .",
    "without loss of generality , we may assume @xmath202 $ ] and that @xmath379 is a @xmath14-martingale .",
    "note that @xmath380 can also be written as @xmath381 by the definition of @xmath221 , @xmath382 which shows that @xmath178 and @xmath383 verify the conditions in .",
    "therefore @xmath202\\geq\\widetilde v_k(n_k , z_k)$ ] .",
    "since @xmath144 is arbitrary , we obtain @xmath384 .",
    "in this section , we apply the dynamic programming results obtained in the previous section under the three types of constraints and we give the explicit form of the smallest hedging portfolio value in the setting of two time steps .      in the following , we assume that the function @xmath48 satisfies assumption [ assumption 2 ] .",
    "we have by corollary [ cor : dynamic ] , @xmath386 \\text { s.t . }",
    "\\mathbb e^{\\mathbb    p}[l(m - s_2)|\\mathcal f_1]\\leq \\alpha_2\\}\\ ] ] by proposition [ prop : value function time consistent ] , @xmath387+\\mathbb e^{\\mathbb      q}[i(c(\\alpha_2)z_2/z_1)|\\mathcal f_1],\\ ] ] where @xmath388 is the @xmath389-measurable random variable such that @xmath390=\\alpha_2.\\ ] ] and @xmath391.\\ ] ]    we then use again to compute the value of @xmath392 , which identifies with the essential infimum of @xmath393 $ ] , @xmath394 such that @xmath395\\leq \\alpha_1 $ ] and that there exists @xmath396 verifying @xmath397=\\alpha_2 $ ] and @xmath398 .",
    "namely , @xmath399\\,:\\ , \\mathbb e^{\\mathbb p}[l(m - s_1)]\\leq \\alpha_1,\\,\\mathbb e^{\\mathbb p}[v_1^{-1}(m)]\\leq \\alpha_2\\}.\\ ] ]      consider the loss function where @xmath50 , with @xmath51 .",
    "direct computations yield @xmath400 , @xmath401 and @xmath402",
    ". therefore , @xmath403 from which we deduce @xmath404-\\frac{\\log(\\alpha_2 + 1)}{p}-\\frac 1p{\\mathbb    e^{\\mathbb p}[z_2/z_1\\log(z_2/z_1)|\\mathcal f_1]}.\\ ] ] denote by @xmath405}.\\ ] ] from we have that @xmath406-d_1).\\ ] ] hence @xmath392 is the infimum of the expectations",
    "@xmath393=\\mathbb e^{\\mathbb p}[z_1m]$ ] , where @xmath394 such that @xmath407\\leq \\alpha_1\\;\\text { and } \\ ; \\mathbb e[l(m-\\mathbb e^{\\mathbb q}[s_2|\\mathcal f_1]-d_1)]\\leq \\alpha_2.\\ ] ] we will use lagrange multiplier method ( with kuhn - tucker conditions ) to study this problem . if @xmath394 realizes the infimum of @xmath393 $ ] subjected to the constraints , then @xmath41 verifies the first order condition @xmath408-d_1)}=0,\\ ] ] where @xmath278 and @xmath409 are respectively positive solutions to the equations @xmath410-s_1+d_1)))}\\bigg]=1+\\alpha_1\\ ] ] and @xmath411+d_1)+\\mu)}\\bigg]=1+\\alpha_2.\\ ] ] we introduce the notation @xmath412-s_1+d_1))$ ] and rewrite the above equations as @xmath413=p(1+\\alpha_1)\\;\\quad\\text{and}\\quad\\;\\mathbb e^{\\mathbb q}\\big[\\frac{x}{\\lambda+\\mu x}\\big]=p(1+\\alpha_2),\\ ] ] from which we obtain @xmath414 by taking a linear combination .",
    "moreover , the quotient of the two equations shows that @xmath415 verifies the following equation ( provided that @xmath416 ) @xmath417 where @xmath418 $ ] .",
    "note that @xmath419,\\qquad \\lim_{t\\rightarrow+\\infty}\\frac{f(t)}{1-tf(t)}=\\mathbb e^{\\mathbb q}[x]^{-1}.\\ ] ]    * suppose that @xmath420>\\frac{1+\\alpha_1}{1+\\alpha_2}>\\mathbb e^{\\mathbb q}[x]^{-1}.\\ ] ] the two constraints in are saturated .",
    "we can use numerical methods to compute the value of @xmath415 and then use the relation to find explict value of @xmath278 and @xmath409 . *",
    "if @xmath421^{-1},\\ ] ] then only the first constraint in is saturated and one should take @xmath422 . in this case the first order condition becomes @xmath423 with @xmath424 .",
    "therefore , one has @xmath425 thus we obtain @xmath426-\\frac{1}{p}\\log(1+\\alpha_1)-\\frac{1}{p } \\mathbb e^{\\mathbb p}[z_1\\log z_1].\\ ] ] * if @xmath427,\\ ] ] then only the second constraint in is saturated , and one has @xmath428 . in this case the first order condition becomes @xmath429-d_1)}=0\\ ] ] with @xmath430 .",
    "therefore , one obtains @xmath431+d_1-\\frac{1}{p}\\log((1+\\alpha_1)z_1)\\\\ & = \\mathbb e^{\\mathbb q}[s_2|\\mathcal f_1]-\\frac{1}{p}\\mathbb e^{\\mathbb p}[z_2/z_1\\log ( z_2/z_1)|\\mathcal f_1]-\\frac{1}{p}\\log((1+\\alpha_1)z_1 ) .",
    "\\end{split}\\ ] ] finally , we obtain @xmath432-\\frac{1}{p}\\log(1+\\alpha_2)-\\frac 1p\\mathbb e^{\\mathbb    p}[z_2\\log z_2].\\ ] ]      the computation of @xmath433 is identical to in the european case : @xmath434 . by proposition",
    "[ pro : tcprogdy ] , @xmath435 : \\mathbb e^{\\mathbb p}[l(m - s_1)]\\leq \\alpha_1 , v_1^{-1}(m ) \\leq \\alpha_2\\}.\\ ] ]      from as in the european case , @xmath436-\\frac{\\log(\\alpha_2 + 1)}{p } + d_1.\\ ] ] by proposition [ prop : value function time consistent ] , @xmath139 may be found using the following algorithm :    * compute @xmath437 $ ] . *",
    "if @xmath438 \\leq \\alpha_1 $ ] then the constraint at date @xmath439 is not binding , and the solution is given by @xmath440 $ ] . *",
    "if @xmath438 > \\alpha_1 $ ] then the constraint at date @xmath439 is binding and we proceed as follows : * * compute @xmath441 by solving the equation @xmath442 = \\alpha_1.\\ ] ] * * the solution is given by @xmath443 + \\mathbb e^{\\mathbb q}[\\{s_1 - v_1 + i(\\lambda    z_1)\\}^+].\\ ] ]      by proposition [ lookback : recursive ] , @xmath444 : \\mathbb e^{\\mathbb p}[\\max(z , l(m - s_2 ) -    \\alpha_2)|\\mathcal f_1 ] < y\\right\\}\\ ] ]    so the value function @xmath445 coincides with as in the european and the american cases .",
    "we then have the minimal capital at the initial time as @xmath446 : \\exists",
    "n \\in \\mathcal f_1 : \\mathbb e^{\\mathbb p}[n]=0 , m\\geq v_1(n , l(m - s_1)-\\alpha_1)\\}.\\ ] ] however , it is more difficult to obtain explicit results as ou for the lookback - style constraint .      as we have already mentioned , in the three cases , the value functions @xmath433 at time @xmath447 coincide . in the risk - neutral case",
    "where @xmath106 , we have @xmath448 , so @xmath449+l^{-1}(\\alpha_2).\\ ] ] for the initial value at time @xmath2 , we have the following results :    * _ european - style constraint : _ @xmath450 : \\mathbb e[l(m - s_1)]\\leq \\alpha_1 , \\mathbb e[l(m-\\mathbb e[s_2|\\mathcal f_1])]\\leq \\alpha_2\\}\\ ] ] * _ american - style constraint : _ @xmath451 : \\mathbb e[l(m - s_1)]\\leq \\alpha_1 , l(m-\\mathbb e[s_2|\\mathcal f_1])\\leq \\alpha_2\\}\\ ] ] * _ lookback - style constraint : _ @xmath452 : \\mathbb e[\\max\\ { l(m - s_1)-\\alpha_1 , l(m-\\mathbb e[s_2|\\mathcal f_1])-\\alpha_2\\}]\\leq 0\\}.\\ ] ]    in the risk - neutral case , the results hold under assumption [ assumption 1 ] instead of assumption [ assumption 2 ] .",
    "we are particularly interested in the loss function @xmath453 where explicit results are obtained , thanks to lemma [ 2dim ] in the appendix ( for the time - consistent constraint the result follows by taking @xmath454 and @xmath455 - \\alpha_2 $ ] ) : @xmath456-\\alpha_1,\\mathbb e[s_2]-\\alpha_2,\\mathbb e[(s_1\\vee\\mathbb e[s_2|\\mathcal f_1])]-\\alpha_1-\\alpha_2\\big),\\\\ v_0^{tc } & = \\max\\big(\\mathbb e[s_2 ] - \\alpha_2 , \\mathbb e[s_1 \\vee ( \\mathbb e[s_2|\\mathcal f_1 ] - \\alpha_2)]-\\alpha_1\\big),\\\\ v_0^{lb } & = \\mathbb e[\\max\\big(s_1 - \\alpha_1,(\\mathbb e[s_2|\\mathcal f_1 ] - \\alpha_2)\\big ) ] .",
    "\\end{aligned}\\ ] ]      we compare the cost for hedging two objectives under the three probabilistic constraints in a numerical example .    in figure [ exploss.fig ] , we consider the risk - neutral case where @xmath102 and the loss function is given by @xmath457 .",
    "the model is as follows : @xmath458 and @xmath459 where @xmath460 , @xmath461 and @xmath462 and @xmath463 are standard normal random variables with correlation @xmath464 .",
    "we fix the loss tolerance at the first date to be @xmath465 and plot the hedging value @xmath139 for three different constraint styles as a function of the loss tolerance at the second date @xmath466 .",
    "not surprisingly , all the three curves are decreasing w.r.t . the constraint level @xmath466",
    "moreover , among the three constraints we consider , the european constraint corresponds to the lowest hedging cost and the lookback constraint to the highest one , which is coherent with proposition [ pro : inclusion ] .",
    "finally , the cost of almost sure hedging is higher than the three probabilistic constraints .     in this case.,scaledwidth=80.0% ]",
    "for the multi - objective hedging problem , it is in general difficult to get explicit solutions by using the recursive formulas . in this section ,",
    "we first present a situation where the explicit solution may be obtained for the expected loss and then extend our framework to discuss the conditional value at risk .    our first result deals with the expected loss constraint given as a call function under a risk - neutral probability .",
    "[ incloss.cor]let @xmath49 .",
    "assume that @xmath106 , @xmath467 and that the process @xmath468 is non - decreasing . then , @xmath469 - \\alpha_k\\}\\label{exploss}\\end{aligned}\\ ] ]    for any @xmath470",
    ", we have @xmath471\\leq\\alpha_k,\\,k=1,\\dots , n\\ } \\\\ & \\geq \\inf_{m\\in \\mathcal f_k}\\ { \\mathbb e[m ] : \\mathbb e[(s_k - m)^+]\\leq \\alpha_k\\ } = \\mathbb e[s_k ] - \\alpha_k,\\end{aligned}\\ ] ] and therefore , @xmath472 - \\alpha_k\\}\\ ] ] on the other hand , jensen s inequality yields @xmath473 \\leq \\mathbb e[(s_k - m_n)^+]$ ] , so @xmath474\\leq \\alpha_k,\\,k=1,\\dots , n\\ } \\\\ & = \\inf_{m\\in \\mathcal f_n}\\ { \\mathbb e[m ] : \\mathbb e[(s_k - m)^+]\\leq \\alpha_k,\\,k=1,\\dots , n\\}.\\end{aligned}\\ ] ] since @xmath475 is non - decreasing , then follows by lemma [ exploss.lm ] in appendix .",
    "we have up to now considered risk constraints given by ( conditional ) expected loss . in the literature and in practice ,",
    "the risk constraint is often described by using risk measures .",
    "let us now extend our framework to cover loss constraints expressed in terms of the conditional value at risk .",
    "we once again assume that @xmath476 and denote by @xmath477 the set of all supermartingales @xmath58 such that @xmath478\\leq\\alpha_k$ ] for any @xmath110 , where @xmath479 is the risk measure defined by @xmath480 : \\frac{d \\tilde{\\mathbb p}}{d\\mathbb p } \\leq \\frac{1}{1-\\lambda}\\},\\label{cvarproba}\\end{aligned}\\ ] ] where @xmath481 represents the loss .",
    "it is also well known to satisfy @xmath482\\ ] ] and @xmath483 + z\\right\\}.\\end{aligned}\\ ] ] the minimum above is attained , so that one can write @xmath484 + z\\right\\}.\\label{varexp}\\end{aligned}\\ ] ] moreover , the simplified formula @xmath485\\ ] ] holds whenever @xmath70 has continuous distribution .",
    "we define @xmath486    let us start with some simple observations :    * from one deduces immediately that @xmath487 $ ] , which means ( see the proof of proposition [ incloss.cor ] ) that @xmath488 - \\alpha_k\\}.\\label{simpleobs}\\end{aligned}\\ ] ] * for @xmath92 , the choice @xmath489 attains the optimal value in . but in this case @xmath490 = \\alpha_1 $ ] , which implies that the lower bound above is also attained : @xmath491 - \\alpha_1.\\end{aligned}\\ ] ] * since in our case the loss is always positive , the equality may be simplified as @xmath492 + z\\right\\}.\\end{aligned}\\ ] ]    the following representation reduces the problem to that of hedging under expected loss constraints .    [ glemma ] @xmath493 where @xmath494 is a shorthand for @xmath495 $ ] , @xmath496 and @xmath497 + z_k \\leq \\alpha_k , \\,k=1\\ldots n\\}\\end{gathered}\\ ] ]    for every @xmath498 fixed , the set @xmath477 contains the set of supermartingales @xmath58 satisfying @xmath499 + z_k \\leq \\alpha_k,\\ , k\\in\\{1\\ldots n\\}$ ] , which shows that @xmath500 on the other hand , for any @xmath501 , there exists an @xmath43-supermartingale @xmath58 satisfying @xmath502\\leq \\alpha_k,\\ , k\\in \\{1,\\dots , n\\}$ ] and such that @xmath503 since the infimum in is attained , we can also find @xmath498 such that @xmath499 + z_k \\leq \\alpha_k,\\ , k\\in\\{1\\ldots n\\}$ ] .",
    "but this means that @xmath504 which completes the proof since @xmath505 is arbitrary .",
    "we close this section by presenting a particular case when the solution of problem is completely explicit .",
    "if @xmath506 is an increasing process , then @xmath507 - \\alpha_n.\\ ] ]    if the process @xmath508 is increasing , by proposition [ incloss.cor ] , @xmath509 - ( 1-\\lambda ) \\alpha_k - \\lambda z_k\\ } = \\mathbb e[s_n ] - ( 1-\\lambda)\\alpha_n - \\lambda z_n.\\ ] ] observe now that @xmath510 - \\alpha_n.\\ ] ] combining this with , the proof is complete .",
    "[ 2dim ] let @xmath511 be a probability space , @xmath512 and @xmath513 .",
    "then , @xmath514 : \\mathbb e[(x - m)^+]\\leq \\alpha,\\mathbb e[(y - m)^+]\\leq \\beta \\ } \\\\= \\max\\{\\mathbb e[x-\\alpha ] , \\mathbb e[y-\\beta ] , \\mathbb e[x\\vee y - \\alpha - \\beta]\\}. \\end{gathered}\\ ] ] and @xmath515 : \\mathbb e[\\max((x - m)^+- \\alpha,(y - m)^+- \\beta)]\\leq 0 \\ } \\\\= \\mathbb e[(x-\\alpha)\\vee ( y - \\beta ) ] . \\end{gathered}\\ ] ]    _ first part . _ by considering only one of the two constraints , we have clearly @xmath516 , \\mathbb e[y-\\beta]\\}.\\ ] ] in addition , @xmath517 and so @xmath518.\\ ] ] to finish the proof , we need to find @xmath519 which satisfies the constraint and realizes the equality .",
    "assume first that @xmath520 \\geq \\mathbb e[x-\\alpha]\\quad \\text{et}\\quad \\mathbb e[x\\vee y - \\alpha - \\beta ] \\geq \\mathbb e[y-\\beta].\\ ] ] this is equivalent to @xmath521\\geq \\alpha\\quad \\text{and}\\quad \\mathbb e[(y - x)^+]\\geq \\beta.\\ ] ] in this case we can take @xmath522 } - \\beta \\frac{(y - x)^+}{\\mathbb e[(y - x)^+]}\\ ] ]",
    "if @xmath523\\geq \\mathbb e[x\\vee y - \\alpha - \\beta ]   \\quad \\text{and}\\quad \\mathbb \\mathbb e[x-\\alpha ] \\geq \\mathbb e[y-\\beta],\\ ] ] we take @xmath524.\\ ] ] if finally @xmath525\\geq \\mathbb e[x\\vee y - \\alpha - \\beta ]   \\quad \\text{and}\\quad \\mathbb \\mathbb e[y-\\beta ]",
    "\\geq \\mathbb e[x-\\alpha],\\ ] ] then we can take @xmath526.\\ ] ]    _ _ second part.__since @xmath527 satisfies the constraint , @xmath528 $ ] .",
    "on the other hand , @xmath529 : \\mathbb e[\\max((x - m)^+- \\alpha,(y - m)^+- \\beta)]\\leq 0 \\ } \\\\ & \\geq \\inf_{m\\in \\mathcal f}\\ { \\mathbb e[m ] : \\mathbb e[\\max(x - m- \\alpha , y - m- \\beta)]\\leq 0 \\ } \\\\ & = \\inf_{m\\in \\mathcal f}\\ { \\mathbb e[m ] : \\mathbb e[\\max(x- \\alpha , y- \\beta)]\\leq m \\}\\\\ & = \\mathbb e[(x-\\alpha)\\vee ( y-\\beta)].\\end{aligned}\\ ] ]      [ exploss.lm ] let @xmath511 be a probability space , @xmath530 with @xmath531 a.s . and @xmath532",
    ". then , @xmath533 : \\mathbb e[(z_k - m)^+]\\leq \\alpha_k , k=1,\\dots , n\\ } = \\max_{k=1,\\dots , n } \\{\\mathbb e[z_k ] - \\alpha_k\\}\\ ] ]      1 .",
    "assume that there exists @xmath470 such that @xmath534 - \\alpha_k \\geq   \\mathbb e[z_{k+1 } ] - \\alpha_{k+1}\\label{wrong}\\end{aligned}\\ ] ] then the constraint @xmath535",
    "\\leq \\alpha_{k}$ ] implies @xmath536 \\leq \\alpha_{k+1}$ ] since @xmath537 \\leq \\mathbb e[(z_{k } - m)^+ ] + \\mathbb e[z_{k+1}-z_k ] \\leq \\alpha_{k } + \\alpha_{k+1 } - \\alpha_{k } = \\alpha_{k+1}.\\ ] ] we can then remove the constraint @xmath536 \\leq \\alpha_{k+1}$ ] without modifying the value function . repeating the same argument for all other indices @xmath77",
    "satisfying , we can assume with no loss of generality that , @xmath538 - \\alpha_1 < \\dots",
    "< \\mathbb e[z_n ] - \\alpha_n.\\label{right}\\end{aligned}\\ ] ] we then need to prove that @xmath533 : \\mathbb e[(z_k - m)^+]\\leq \\alpha_k,\\,k=1,\\dots , n\\ } = \\mathbb e[z_n ] - \\alpha_n.\\ ] ] 2 .   removing all the constraints except the last one , it is easy to see that @xmath533 : \\mathbb e[(z_k - m)^+]\\leq \\alpha_k,\\,k=1,\\dots , n\\ } \\geq \\mathbb e[z_n ] - \\alpha_n.\\ ] ] to finish the proof , it is then enough to find @xmath41 which satisfies the constraints and is such that @xmath539 = \\mathbb e[z_n ] - \\alpha_n$ ] .",
    "3 .   if @xmath540\\geq \\alpha_n$ ] , we let @xmath541 \\geq \\alpha_n\\}\\ ] ] and @xmath542 -    \\mathbb e[z_n ] +    \\alpha_n}{\\mathbb e[z_{k^*+1 } ] - \\mathbb e[z_{k^ * } ] } \\in [ 0,1].\\ ] ] otherwise , let @xmath543 and @xmath544.\\ ] ] by construction , @xmath545 = \\mathbb e[z_n ] - \\alpha_n $ ] and since @xmath546 , also @xmath547 = \\alpha_n$ ] . to check the other constraints , observe that if @xmath548 then @xmath549 a.s . and so @xmath550 = 0 $ ] . on the other hand , if @xmath551 then @xmath552 a.s .",
    "and so by @xmath553 = \\mathbb e[z_k ] - \\mathbb e[m ] = \\mathbb e[z_k ] - \\mathbb e[z_n ] + \\alpha_n < \\alpha_k.\\ ] ]"
  ],
  "abstract_text": [
    "<S> motivated by the asset - liability management of a nuclear power plant operator , we consider the problem of finding the least expensive portfolio , which outperforms a given set of stochastic benchmarks . for </S>",
    "<S> a specified loss function , the expected shortfall with respect to each of the benchmarks weighted by this loss function must remain bounded by a given threshold . </S>",
    "<S> we consider different alternative formulations of this problem in a complete market setting , establish the relationship between these formulations , present a general resolution methodology via dynamic programming in a non - markovian context and give explicit solutions in special cases .    _ </S>",
    "<S> key words : _ multiple risk constraints , expected loss , asset liability management , snell envelope , dynamic programming . </S>"
  ]
}