{
  "article_text": [
    "we introduce the subject by a simple example .",
    "consider an equivalence relation @xmath9 on a set @xmath0 .",
    "( to fix ideas , let @xmath0 be the plane and let the equivalence classes of @xmath9 be given by a tiling of @xmath0 . ) then , among the parts of @xmath0 we have the closed parts , that is those subsets @xmath10 such that @xmath11 so that @xmath4 is an union of equivalence classes .",
    "the inclusion @xmath12 of closed parts in all the parts of @xmath0 , has both left and right adjoints @xmath13 giving the best `` outer and inner approximations of a part @xmath4 by closed parts : @xmath14 note that for any singleton part @xmath15 , @xmath16 is the equivalence class of @xmath17 .",
    "it is intuitively clear that the coreflection and the reflection are given explicitly by [ eq1 ] x",
    "p x p [ eq2 ] x p x p where @xmath18 is the meets '' predicate : @xmath4 meets @xmath19 if they have a non - void intersection : @xmath20 ( warning : the similarity of this symbol with the cotensor operator @xmath21 is fortuitous ) .",
    "dropping the symmetry condition , let @xmath0 be a poset .",
    "now , a part @xmath4 of @xmath0 may be donward or upward closed .",
    "so we have the inclusions @xmath22 of lower and upper parts in all the parts of @xmath0 , which have left and right adjoints @xmath23 explicitly given by [ eq3 ] x px p x px p + [ eq4 ] x p x p x p x p which are the non - symmetrical version of the  ( [ eq1 ] ) and  ( [ eq2 ] ) above .    in section  [ posets ]",
    "we prove the formulas  ( [ eq3 ] ) and  ( [ eq4 ] ) in such a way that they can be generalized in a natural way to the set - valued context .",
    "in fact , after preparing the setting in section  [ cats ] and section  [ complements ] , we show in section  [ proof ] that the coreflection and the reflection of a category @xmath4 over @xmath0 in df s and dof s over @xmath0 have the following form [ eq5 ] ( p)x = ( x , p ) ( p)x = ( x , p ) + [ eq6 ] ( p)x = ( x , p ) ( p)x = ( x , p ) which are exactly the set - valued versions of  ( [ eq3 ] ) and  ( [ eq4 ] ) .",
    "( note that @xmath24 and @xmath25 correspond to the representable presheaves . ) while the former are immediate , the latter rest on the ( partially defined ) omplement operator \" given by exponentials on discrete basis : @xmath26 which takes a df @xmath6 in the functor @xmath27 valued in dof ( and vice versa ) and allows to prove the almost obvious two - valued formula p q p q in the set - valued context too : ( p , q ) ( p , q ) that the formulas  ( [ eq5 ] ) and  ( [ eq6 ] ) actually give the desired coreflection and reflection is also checked in section  [ proof ] .    among the various applications of the theory discussed in section  [ applications ]",
    "there are :    * a treatment of limits and colimits which makes clear the relevance of the reflection in df s . *",
    "an analysis of ( weak ) atoms in @xmath28 , that is those categories @xmath17 over @xmath0 such that ( x , a ) ( x , a ) for any df or dof @xmath6 . among them",
    "we find not only the objects of @xmath0 , but also the idempotent arrows in @xmath0 .",
    "the reflections of atoms are , as presheaves on @xmath0 , the retracts of representable functors ; so they generate the cauchy completion of @xmath0 , displaying it as the karoubi envelope of @xmath0 . * a proof of the kan extensions formulas for set functors .",
    "* applications of the formulas in ther \" contexts ; e.g. we show how they give in a very pictorial way the reflection of graphs in evolutive sets .",
    "in fact , one of the themes of the present work is that of treating on an equal footing the coreflections and the reflections : while the former are easily analyzed by figures via the @xmath29 functor , a similar direct analysis is now possible for the latter using the tensor functor instead .",
    "the symmetry or duality of the two approaches is due to the fact that we use atomic shapes .",
    "the present paper has evolved from the preprint  @xcite and the presentation of a part of it at the international conference on category theory ( ct06 ) held at white point in june 2006 . while  @xcite aimed toward a more general setting , we here develop several new items . among them",
    "there is a natural presentation of strong dinaturality and a corresponding analysis of ends and coends in section  [ cats ] ; a more careful study of the uality \" in @xmath28 in section  [ complements ] , which is obtained by isolating some key features of the classical duality in @xmath30 and between sieves and cosieves of a poset in section  [ posets ] ; and the treatment of limits in section  [ applications ] , which gives a clearer perspective on some points studied in  @xcite .    it is the author s opinion that basic category theory still needs clarification , both for divulgation purposes and as a basis for further research .",
    "we hope to show that a careful analysis of the dialectical relationships between categories over a base and discrete fibrations , along with an explicit consideration of the tensor functor , is a step in this direction .",
    "_ acknoweledgements .",
    "_ useful discussions with r.j .",
    "wood and vincent schmitt are gratefully acknoweledged .",
    "i also acknoweledge the deep influence of the work of lawvere and of par ( in particular  @xcite ) .",
    "my general attitude in preparing the present work was that of oticing , cultivating , and teaching helpful examples of an elementary nature \" in category theory , as advocated in  @xcite .",
    "in this section we derive in several ways the formulas for the reflection and coreflection of the parts of a poset in lower and upper parts . in so doing , we introduce the conceptual frame that will serve for the corresponding analysis in the set - valued context as well : the reflection and coreflection of categories over a base in discrete fibrations .    note though that we are not claiming that there is a general enriched theory subsuming the two - valued and set - valued cases as particular instances . on the contrary ,",
    "the question of the existence of such a theory is one of the points that may deserve further research .      in this section",
    "we consider @xmath31 as the truth values category , and so denote its arrows by @xmath32 the category @xmath31 is cartesian closed , the product being nd \" , and exponentials being all equal to @xmath33 except @xmath34 following  @xcite , a poset @xmath0 is a @xmath31-category , that is @xmath35 is the truth value of the dominance of @xmath17 by @xmath36 .",
    "( note that @xmath37 is a way to express equality in @xmath31 . )",
    "a functor @xmath38 corresponds to a subset @xmath39 of the underlying set of @xmath0 by @xmath40 such a subet is a ower set `` or ieve '' or rder ideal `` : @xmath41 dually , a functor @xmath42 corresponds to an pper set '' or osieve \" : @xmath43 if we denote by @xmath44 the categories of lower and upper sets , we have the inclusions @xmath22 that have left and right adjoints : @xmath23 observe that each singleton part @xmath15 has reflections given by the representable ( or principal ) sieve @xmath45 @xmath46 and the representable cosieve @xmath47 @xmath48 that is ( yoneda lemma ) @xmath49 for any lower part @xmath6 and any upper part @xmath50 .",
    "if we denote by @xmath51 the iscrete `` and bjects '' functors ( see section  [ 3sub3 ] ) , the counit of the adjunction @xmath52 is the functor that includes the discrete category associated to @xmath0 in @xmath0 itself .",
    "note that @xmath53 . in our case",
    ", we can pose @xmath54 and consider the above inclusions as induced by @xmath55 and @xmath56 , so that the left and right kan extensions along these functors give their left and right adjoints .",
    "thus , the reflection @xmath57 can be obtained by the coend formula for left kan extensions : @xmath58 that is @xmath59 so the coend in question ( the tensor product of functors on @xmath60 ) reduces to the meets \" predicate @xmath61 on @xmath30 ( @xmath4 meets @xmath19 iff they have a non - void intersection ) giving the reflection formula  ( [ eq4 ] ) : @xmath62 similarly the coreflection is given by the end formula : @xmath63 that is @xmath64 so that the end in question reduces to the inclusion predicate on @xmath30 , giving the coreflection formula  ( [ eq3 ] ) : @xmath65 this method would fail in the set - valued context , since our main concern , the inclusion of df s in categories over a base is not a kan - like functor ( note e.g. that @xmath28 is not a presheaf category ) .",
    "one can obtain the coreflection formula in a more straightforward manner by using the singleton parts as figures : @xmath66 where only the adjunction laws have been used .      to derive the reflection formula it seems natural to use duality .",
    "this can be done in a simple - minded way ( see section  [ 2sub7 ] ) or in a more wise \" manner that allows a similar derivation in the set - valued context ( see section  [ 2sub9 ] ) .",
    "duality has two aspects : complementation , that is related to exponentiation , and negation , that is complementation in the truth - values category which lifts to functors valued therein . of course the two aspects are strictly related .",
    "let @xmath67 be any bounded poset , that is a poset with a maximum ( a terminal object ) @xmath68 and a minimum ( an initial object ) @xmath69 .",
    "there are functors @xmath70 given by    1 .",
    "@xmath71 2 .",
    "@xmath72 3 .",
    "@xmath73    so we may interpret @xmath74 as giving the truth value of the proposition ",
    "@xmath17 is a maximum of @xmath67 \" , and @xmath75 as giving the truth value of the proposition ",
    "@xmath17 is not a minimum of @xmath67 \" or ",
    "@xmath17 is not empty \" .    if @xmath67 is also a meet semilattice ( that is , it has products ) then it is natural to define the meets `` predicate as follows : @xmath76 that is v@xmath17 meets @xmath36 iff their meet is not empty '' .    if the functor @xmath77 has a right adjoint , we call it the omplement \" of @xmath17 and denote it by @xmath78 : @xmath79    to motivate the above definition , recall that if the exponential @xmath80 , characterized by @xmath81 , exists then it is called the elative pseudocomplement `` of @xmath17 with respect to @xmath36 .",
    "if @xmath82 exists in the bounded semilattice @xmath67 then it is called the pseudocomplement '' of @xmath17 .",
    "[ 24prop1 ] an element @xmath17 of a bounded semilattice @xmath67 has complement @xmath83 iff the pseudocomplement @xmath84 exists .",
    "if this is the case , @xmath85 is the pseudocompement of @xmath17 itself , while @xmath86 is a obviously a maximum of @xmath67 .    in one direction ,",
    "if @xmath84 exists ( and since @xmath87 always exists ) , the desired right adjoint can be obtained by composition of adjoints : @xmath88 . in the other direction",
    "@xmath89 which gives the required adjunction law .",
    "so the pseudocomplement @xmath78 is only a trace of a functor @xmath90 , namely its value at @xmath91 .",
    "the fact that the other value is @xmath92 conceals its significance , making it superfluous in the two - valued context . on the contrary",
    ", it becomes essential in the set - valued context .",
    "let @xmath67 be a bounded semilattice .",
    "the meets `` predicate therein allows a very natural definition of atom : an element @xmath93 is an tom '' of @xmath67 when for any @xmath94 @xmath95 that is , if we see the elements of @xmath67 as parts `` , an atom is o small '' to be included in any part that it meets , but also big enough \" to meet any part in which it is included ( in particular it meets itself ) .",
    "the second condition excludes the bottom @xmath69 .",
    "let @xmath67 be the poset of positive natural numbers ordered by divisibility .",
    "since @xmath96 and @xmath97 , two numbers meet each other in @xmath67 iff they have a common divisor greater than @xmath98 .",
    "thus the atoms of @xmath67 are the prime numbers .",
    "so in this case the atoms coincide with the prime elements , that is those elemets such that the representable @xmath99 preserves the finite sups ( i.e. the finite s ) .",
    "[ 25prop1 ] if an atom of @xmath67 has complement then it is a completely prime element . in particular , the atoms of a heyting algebra are completely prime .    indeed , the complement @xmath83 of the atom @xmath93 is the right adjoint of @xmath100 so that @xmath99 preserves all sups ( colimits ) .",
    "[ 25prop2 ] the singleton parts @xmath15 are atoms in @xmath30 : @xmath101 for any part @xmath102 .",
    "if @xmath67 is a bounded meet semilattice , pseudocomplementation @xmath103 is in general only a partially defined functor .",
    "if @xmath104 , pseudocomplementation is usually called egation `` @xmath105 and is an isomorphism which induces @xmath106 giving isomorphisms @xmath107 explicitly , for any @xmath38 , @xmath8 is ( the opposite of ) @xmath108 , and similarly for any @xmath109 : [ 26eq1 ] a : x ax d : x dx in @xmath30 , relative pseudocomplemets ( exponentials ) are computed pointwise '' : @xmath110 in particular , pseudocomplementation in @xmath30 [ 26eq2 ] ( -) : = - : x ( x ) is the isomorphism given by [ 26eq3 ] p : x px= px by comparing  ( [ 26eq1 ] ) and  ( [ 26eq3 ] ) we have the following commutative diagrams , whose rows are isomorphisms : [ 26eq4 ] each one of the diagrams  ( [ 26eq4 ] ) can be obtained from the other by substituting @xmath0 with @xmath111 ( the lower row remains unchanged , since @xmath112 ) ; furthermore each one can be merged with the opposite of the other giving [ 26eq5 ] whose horizontal compositions are identities . for future reference",
    ", we summarize the above considerations in the following proposition    [ 26prop1 ] the pseudocomplement of a lower part is an upper part , and conversely .",
    "equivalently , the complement of a lower part is valued in upper parts , and conversely .",
    "more generally , note that if @xmath6 and @xmath50 are a lower and an upper part , then their exponential @xmath113 in @xmath30 is an upper part ( and dually @xmath114 is a lower part ) . indeed , since @xmath30 is in fact a boolean algebra , @xmath113 is the union of two upper parts @xmath115 alternatively , observe that , since exponentials are computed pointwise \" , if @xmath116 @xmath117 remarkably , this holds also for discrete fibrations and discrete opfibrations , when the exponential is taken in @xmath28 ( see proposition  [ 31prop1 ] ) .      the duality summarized by diagrams  ( [ 26eq4 ] ) and  ( [ 26eq5 ] ) can be used to reduce the reflection to the known coreflection of section  [ 2sub3 ] .",
    "indeed , in general a left adjoint of a functor @xmath118 is a right adjoint of @xmath119 .",
    "so to find the left adjoint to @xmath120 we look for the right adjoint to @xmath121 .",
    "but by diagram  ( [ 26eq4 ] ) the latter is the ame \" as @xmath122 via the isomorphisms @xmath123 and @xmath124 .",
    "explicitly , we have @xmath125 , that is @xmath126 this method too would fail in the set - valued context , since we have no such duality between df s and dof s .",
    "we now prove an djunction - like \" property of the meets predicate on @xmath30 which is based on the complement functor and allows us to derive directly the reflection formula .",
    "[ 28prop1 ] let @xmath0 be a poset , @xmath6 a lower part and @xmath50 an upper part of @xmath0 . then for any part of @xmath4 of @xmath0 @xmath127    we prove the first one , the other being symmetrical : @xmath128 where we have used proposition  [ 24prop1 ] and proposition  [ 26prop1 ] .",
    "the following proposition is almost obvious , but we record it since it will be generalized in the set - valued context :    [ 28prop2 ] if @xmath6 and @xmath129 are both lower sets ( or both upper sets ) , then @xmath130 where the right - hand condition may be seen in @xmath30 or equivalently in @xmath131 , as a natural transformation between the complements @xmath132 .",
    "briefly , the trong contraposition law `` holds .",
    "furthermore , lower parts are properly analyzed by upper parts ( and conversely ) via the meets '' predicate : @xmath133 where the right - hand side refers to functors @xmath134 : @xmath135      we are now in a position to derive the reflection formula in a way straightforwardly generalizable to the set - valued context . since singleton parts are atoms in @xmath30 ( see proposition  [ 25prop2 ] ) , we can analyze parts @xmath4 not only with figures like in section  [ 2sub3 ] but also with the meets \" predicate : @xmath136 where we used twice the adjunction - like properties of proposition  ( [ 28prop1 ] ) .",
    "we stress the similarity between the derivations of the reflection and coreflection formulas by posing them side by side : @xmath137",
    "we collect some facts that will be needed in the sequel .",
    "but in so doing we hopefully also cast some new light on categorical concepts such as strong dinaturality , components , coends and exponentials in @xmath28 .",
    "we denote by @xmath138 and @xmath139 the full subcategories of @xmath28 of discrete fibrations and discrete opfibrations : @1@c=3pcx @^(->[r]^-i & & x @_(->[l]_-j by a well - known argument , we have equivalences [ 31eq1 ] ^x x ^x x and so also full and faithful functors [ 31eq2 ] @1@c=3pc ^x @^(->[r ] & & ^x @_(->[l ] when opportune , we do not distinguish notationally a df and the corresponding presheaf ; e.g. , if @xmath6 is a presheaf we may say v@xmath6 over @xmath0 `` to emphasize that we are thinking of it as a category over @xmath0 via the above equivalence ( the ategory of elements '' ) .    any object @xmath140 of the base category @xmath0 is a category over @xmath0 . if @xmath141 is a category over @xmath0 , the product @xmath142 in @xmath28 has as total category the fiber @xmath143 over @xmath17 .",
    "similarly , for any arrow @xmath144 in @xmath0 , we have a fiber \" @xmath145 which is in fact a category over @xmath31 , as displayed by the right - hand pullback : @r=3pc@c=3pc px & p ^ + ^x & x @r=3pc@c=3pc pf & p ^ + ^f & x exponentials in @xmath28 may not exist ( for example , @xmath140 is not exponentiable if there is another object @xmath146 in @xmath0 ; see e.g.  @xcite for an account on exponentiability in @xmath28 ) .",
    "when they do , the objects of @xmath147 over @xmath17 are the functors @xmath148 , while the arrows of @xmath147 over @xmath149 are the functors in @xmath150 over @xmath31 .    discrete fibrations and opfibrations are exponentiable . the following particular case ( which corresponds to proposition  [ 26prop1 ] ) is worth noticing :    [ 31prop1 ] if @xmath6 is a df and @xmath50 a dof over @xmath0 then the exponential @xmath151 in @xmath28 is a dof ( and , by duality",
    ", @xmath152 is a df ) .    by the above description of exponentials , the objects over @xmath17 of @xmath151 are the _ mappings _ @xmath153 .",
    "furthermore , arrows over @xmath149 in @xmath151 are morphisms @xmath154 in @xmath155 . but @xmath156 and @xmath157 have discrete fibers and no non - trivial compositions ; they look like these :    @xmath158{b_1 } \\\\ { a_2 } & & & & \\ar[lllld]{b_2 } \\\\ { a_3 } & & & & \\ar[lllluu ] { b_3 } \\\\ { a_4 } & & & & \\ar[lllluuu]{b_4 } } \\\\\\ ] ] @xmath159 & & & & { d_1 } \\\\",
    "{ c_2}\\ar[rrrru ] & & & & { d_2 } \\\\ { c_3}\\ar[rrrr ] & & & & { d_3 }",
    "\\\\ { c_4}\\ar[rrrruuu ] & & & &   } \\ ] ] and the morphisms @xmath154 over @xmath31 are uniquely determined by the mappings @xmath153 ; indeed , any such a mapping forces an arrow mapping which , on its own turn , forces @xmath160 .",
    "for example , if @xmath161 then the arrow in @xmath156 starting from @xmath162 is forced to be mapped to the arrow in @xmath157 starting from @xmath163 , so that in particular @xmath164 , and so on .",
    "then @xmath151 is indeed a dof .",
    "explicitly , as a covariant presheaf @xmath151 is the composite @xmath165 ^ -\\delta & x\\times x \\ar[r]^-{a\\times d } & \\set\\op\\times\\set \\ar[r]^-\\hom & \\set } \\ ] ] that is , @xmath166 and ( d^a)f = df^af&:&dx^axdy^ay + & & hdfhaf the categories over @xmath0 that are both df s and dof s are called discrete bifibrations ( dbf s ) and correspond to presheaves or to covariant presheaves that act by bijections ; the direct link between these associates to @xmath167 the @xmath168 defined by @xmath169 and @xmath170 . in particular , if @xmath0 is a grupoid any df or dof is a bifibration , and there is an isomorphism @xmath171 defined by @xmath172 .",
    "[ 31prop2 ] if @xmath129 and @xmath173 are discrete bifibrations over @xmath0 then also the exponential @xmath174 in @xmath28 is a discrete bifibration . in particular ,",
    "if @xmath0 is a grupoid , exponentials in @xmath175 are computed as in @xmath28 .",
    "for example , if @xmath176 , their exponential in @xmath177 is given by @xmath178 and ( b^c)f = bf^cf&:&bx^cxby^cy + & & hbfhcf    among the dbf s there are the constant ones : @xmath179 with @xmath180 .",
    "[ 31prop3 ] if @xmath6 is a df and @xmath50 a dof over @xmath0 then the exponential @xmath181 in @xmath28 is a dof and @xmath182 is a df . explicitly , as a covariant presheaf @xmath183 , that is : @xmath184 and ( s)^a f = s^af&:&s^axs^ay + & & hhaf      so as the concept of natural transformation between presheaves @xmath185 is subsumed by that of morphism between the corresponding df s over @xmath0 : @xmath186 we now show how also the strong dinatural transformations ( also known as barr dinatural \" , see  @xcite and  @xcite ) between set - functors @xmath187 can be seen as morphisms between suitably constructed categories over @xmath0 : @xmath188 giving them a very natural status",
    ".    given a functor @xmath189 , we define a category over @xmath0 as follows :    * the objects over @xmath15 are the elements of @xmath190 ; * given @xmath191 in @xmath0 , there is at most one arrow from @xmath192 to @xmath193 over @xmath149 , and this is the case iff @xmath194 .",
    "so we can name this arrow also by @xmath149 .",
    "we only have to check composition : if @xmath195 and @xmath196 then @xmath197 and @xmath198 .",
    "so h(x , gf)a = h(x , g)(h(x , f)a ) = h(x , g)(h(f , y)b ) = h(f , g)b + = h(f , z)(h(y , g)b ) = h(f , z)(h(g , z)c ) = h(gf , z)c as in the case of presheaves and df s , we often refer to this category as v@xmath199 over @xmath0 \" ( or simply as @xmath199 ) .",
    "[ 32ex1 ] the following particular cases are worth noting :    1 .",
    "if @xmath199 is constant , then @xmath199 over @xmath0 is the corresponding constant dbf .",
    "if @xmath199 is dummy in one variable , that is if it factors through a projection , then we find again the df or dof of section  [ 3sub1 ] .",
    "if @xmath0 is a grupoid , @xmath199 over @xmath0 is the bifibration corresponding to @xmath200 ^ -{\\delta_x } & & x\\times x \\ar[rrr]^-{(-)\\inv\\times x } & & & x\\op\\times x \\ar[rr]^-h & & \\set}\\ ] ] 4 .",
    "given @xmath167 and @xmath201 , let @xmath202 , that is @xmath199 is the composite @xmath203 ^ -{a\\times d } & & \\set\\times\\set \\ar[rr]^-\\times & & \\set}\\ ] ] then @xmath199 over @xmath0 is the product of @xmath6 and @xmath50 over @xmath0 ( that is , of the df @xmath6 and the dof @xmath50 in @xmath28 ) .",
    "5 .   given @xmath204 ,",
    "let @xmath205 , that is the composite @xmath203 ^ -{a\\times b } & & \\set\\op\\times\\set \\ar[rr]^-\\hom & & \\set}\\ ] ] then it is easy to see that @xmath199 over @xmath0 is the exponential @xmath206 in @xmath28 . 6 .",
    "if @xmath199 is @xmath207 then @xmath199 over @xmath0 has the endomorphisms in @xmath0 as objects , and given @xmath208 and @xmath209 , @xmath210 is an arrow @xmath211 in @xmath199 iff @xmath212 .",
    "so @xmath199 over @xmath0 is the endomorphism category @xmath213 , where @xmath214 is the monoid of natural numbers .",
    "if @xmath215 is an endofunctor on @xmath0 , and @xmath199 is @xmath216 then @xmath199 over @xmath0 is the category of v@xmath217-algebras \" with the forgetful functor to @xmath0 .",
    "( the commutative squares below correspond to the arrows in @xmath199 in the last three examples . )",
    "@r=3.5pc@c=3.5pc ax ^af_h & ay ^k + bx ^bf & by @r=3.5pc@c=3.5pc x ^f_h & y ^k + x ^f & y @r=3.5pc@c=3.5pc fx ^ff_h & fy ^k + x ^f & y    while in the first four examples above , @xmath199 over @xmath0 is exponentiable in @xmath28 , this is not true in general .",
    "e.g. , let @xmath0 be the category with three objects and the following non - identity arrows @xmath218_l\\ar@<0.5ex>[rr]^{f_1}\\ar@<-0.5ex>[rr]_{f_2}\\ar@/^1.5pc/@<0.5ex>[rrrr]^g & & y \\ar[rr]^h & & z } \\ ] ] with @xmath219 , @xmath220 , @xmath221 .",
    "if @xmath199 is the endomorphism category of @xmath0 as in example 6 above , then @xmath222 in @xmath199 and @xmath223 in @xmath0 , but this factorization can not be lifted to @xmath199 , since @xmath224 is not an arrow @xmath225 .",
    "now , given @xmath226 , what is a morphism in @xmath28 among the corresponding categories over @xmath0 ?",
    "first of all , we need to give a family of mappings @xmath227 .",
    "if there is a functor over @xmath0 with such a family as object mapping , it is uniquely determined . and",
    "this is the case if and only if for any @xmath191 in @xmath0 , whenever @xmath195 is an arrow in @xmath199 , @xmath228 is an arrow in @xmath229 too .",
    "explicitly , the @xmath230 define a morphism @xmath231 in @xmath28 if and only if the following diagram commutes for any @xmath191 in @xmath0 : @xmath232^{\\alpha_x } & & k(x , x)\\ar[dr]^{k(x , f ) } &   \\\\",
    "\\pb_f\\ar[ur]\\ar[dr ] &                           & &                         & k(x , y )   \\\\                     & h(y , y)\\ar[rr]^{\\alpha_y } & & k(y , y)\\ar[ur]_{k(f , y ) } &   \\\\   } \\ ] ] where the pullback @xmath233 [ 32eq1 ] @r=3.5pc@c=3.5pc _ f & h(x , x ) ^h(x , f ) + h(y , y ) ^h(f , y ) & h(x , y ) expresses the pairs of objects @xmath234 of @xmath199 such that @xmath195 is an arrow in @xmath199 .",
    "so morphisms @xmath231 over @xmath0 correspond to the strong dinatural transformations @xmath231 .",
    "of course , if [ 32eq2 ] @r=3.5pc@c=3.5pc h(y , x ) ^h(f , x)_h(y , f ) & h(x , x ) ^h(x , f ) + h(y , y ) ^h(f ,",
    "y ) & h(x , y ) is a pullback for any @xmath191 , then dinatural transformations with domain @xmath199 are already strongly dinatural . here",
    "are some typical cases when this is the case for any codomain category :    [ 32prop1 ] let @xmath189 .",
    "each of the following conditions implies that  ( [ 32eq2 ] ) is a pullback for any @xmath191 , and so also that @xmath235 for any @xmath236 :    1 .",
    "@xmath199 is constant .",
    "@xmath199 is dummy in one variable .",
    "3 .   @xmath0 is a grupoid .",
    "4 .   @xmath237 ( see examples  [ 32ex1 ] ) .",
    "for example , let s check the last case ( the other ones are simpler ) : [ 32eq3 ] let s denote by @xmath238 the projections of @xmath239 , and similarly the other projections . given @xmath240 and @xmath241 which make the diagram  ( [ 32eq3 ] ) commute ,",
    "if @xmath242 exists we have @xmath243 and similarly , @xmath244 so that @xmath242 must have the form @xmath245 . now to check e.g. that @xmath246 we compose with projections : @xmath247 ^x , x_1(afdx)^y , y_1_y , ^x , x_2_x = af^y , x_1^y , y_1_y , ^x , x_2_x = af^y , y_1_y + = ^x , y_1(afdy)_y = ^x , y_1(axdf)_x = ^x , x_1_x the third case of the above proposition , that is when @xmath0 is a grupoid , can be reversed in the following sense :    if the  ( [ 32eq2 ] ) are pullbacks for any @xmath199 and @xmath149 then @xmath0 is a grupoid .    let @xmath248 ; the pair @xmath249 is in the pullback  ( [ 32eq1 ] ) for any @xmath191 .",
    "then , if  ( [ 32eq2 ] ) is such a pullback , there is an arrow @xmath250 in @xmath251 such that @xmath252 in section  [ 3sub5 ] we shall apply some of the results illustrated to the calculus of ends and coends .      in order to properly generalize the meets `` operator of section  [ 2sub4 ] to the set - valued context",
    ", we need to consider categories @xmath67 that have components , that is there exist functors @xmath253 called the omponents '' , the iscrete `` and the points '' functors .",
    "the objects of @xmath67 isomorphic to those of form @xmath179 ( for a set @xmath180 ) are said to be discrete or constant , while elements of @xmath254 are called points and those of @xmath255 components of the object @xmath256 .",
    "if @xmath67 is a category with components , then it is such in an essentially unique way , since in this case @xmath257 is terminal in @xmath67 , @xmath179 is the copower @xmath258 ( that is the sum of @xmath259 copies of @xmath260 ) and the points functor is represented by @xmath260 .    among categories with components , of pivotal importance is the category of ( irreflexive ) graphs : @xmath261 since the terminal graph is the loop , @xmath262 is the set of the loops of the graph @xmath0 , while the discrete graphs are sums of loops .",
    "our attitude in the present paper is of considering the category @xmath263 as primitive , rather than as a presheaf category : consider a graph as made up of nodes and arrows between them ; arrows are immaterial , so that they can cross each other , and yet each one bounds his domain and codomain nodes .",
    "the set @xmath264 of the components of a graph @xmath0 is what you get by shrinking its arrows to a zero length .",
    "the adjunction @xmath265 expresses the fact that in order to map a graph to a discrete graph , one has to perform a similar process , before eventually doing further identifications ( now the arrows are shrinked to loops , but the effect on the nodes is the same ) .",
    "usually one says : he components of @xmath0 are the equivalence classes in @xmath266 of the least equivalence relation @xmath9 on the nodes of @xmath0 which contains the relation @xmath267 defined by @xmath268 iff there exists an arrow @xmath191 in @xmath0 `` .",
    "this follows from the fact that , since a discrete graph is in fact an equivalence relation , @xmath269 factors through @xmath270 and its left adjoint @xmath271 also factors through @xmath272 ( here exists an arrow '' ) , @xmath273 ( he least equivalence relation `` , which in turn could be factorized explicitly though symmetrical relations : v@xmath274 iff there is a sequence @xmath275 such that @xmath276 or @xmath277 '' ) and @xmath278 ( he equivalence classes `` ) .",
    "of course , other factorizations are possible , such as that through categories with involution ( reversible categories):@xmath279 ( see  @xcite ) ; then one would say he components of @xmath0 are the equivalence classes of the equivalence relation on the nodes of @xmath0 given by @xmath274 iff there exists an undirected path @xmath280 in @xmath0 '' .    while these factorizations of the left adjoint may be useful to compute it ( e.g. to prove that two nodes re in the same component \" , that is are mapped to the same element by the unit @xmath281 of the adjunction ) , from a conceptual point of view they conceal , rather than explain , the simplicity of the above sketched idea of the direct adjunction .",
    "( on the contrary , one can see the above categories as categories of special graphs , or graphs with structure , so that their own components functors are subsumed by that on graphs . )",
    "of course , one can say that graphs are presheaves on the category @xmath282\\ar@<-0.5ex>[r ] & \\bullet}$ ] , so that components are given by the colimit ( coequalizer ) functor @xmath283 . but",
    "concretely colimits in @xmath284 are given by the components of a graph ( of the corresponding discrete fibration , see section  [ 3sub4 ] ) .",
    "so we would reduce the components of a graph to those of a more involved graph ( the ubdivision graph \" of kan ) .",
    "if @xmath0 is a graph , @xmath285 also has components : if @xmath141 is a graph over @xmath0 , its points are the sections of @xmath286 , while its components are those of the total graph @xmath4 .",
    "the category @xmath287 of categories also has components : @xmath288 the points being the objects of the category , while the components are those of the underlying graph .",
    "similarly we have @xmath289 components being given by those of the total category .",
    "the discrete objects @xmath179 of @xmath28 are those discrete bifibrations that correspond to the constant presheaves with value @xmath180 .      of course",
    ", any presheaf category @xmath290 has components @xmath291 usually @xmath74 and @xmath75 are known as the limit and the colimit functors , while as @xmath292 one can use the diagonal functor : @xmath293",
    "the important fact is that , since @xmath294 factors ( up to an isomorphism ) through @xmath295 , [ 34eq0 ] @r=4pc@c=4pc ^x @_(->[d ] & ^-@2-[d ] + & _ - these functors can be obtained by restricting the corresponding ones of @xmath28 : [ 34eq1 ] so that the limit of @xmath296 is the set of sections of @xmath6 over @xmath0 , while its colimit is the set components of @xmath6 over @xmath0 ( that is , the components of the graph of the category of elements of @xmath6 ) .",
    "more explicitly , we have the following chain of natural isomorphisms : @xmath297 thus @xmath298 and @xmath299 .",
    "[ 34rmk1 ] we have just seen that colimits of set functors @xmath167 are given by the components of the df @xmath6 over @xmath0 .",
    "conversely , the components of any category @xmath300 can be expressed as the colimit of a functor @xmath301 , for _ any _ df @xmath302 with total category @xmath4 . in particular",
    "@xmath4 is a df @xmath303 on itself , corresponding to the functor @xmath304 , the terminal object in @xmath305 , so that @xmath306      as remarked in proposition  [ 32prop1 ] , if the domain is constant strong dinaturality reduces to standard dinaturality : @xmath307 so we have @xmath308 and we conclude @xmath309 for coends in general the situation is slightly different : @xmath310 so that we can only conclude that @xmath311 where @xmath312 is a representing object for @xmath313 .",
    "but , as shown in the example below , in general @xmath314 .    let us test the above concepts in the case @xmath315 . recall that @xmath316 over @xmath0 is the endomorphism category of @xmath0",
    "( see the sixth of examples  [ 32ex1 ] ) .",
    "* @xmath317 is the set of its sections : families of endomorphisms @xmath318 , such that @xmath319 for any @xmath191 in @xmath0 .",
    "this is the well - known enter \" of @xmath0 .",
    "* @xmath320 , wherein two endomorphisms @xmath321 and @xmath322 are identified whenever @xmath319 , with @xmath191 in @xmath0 .",
    "* @xmath323 is obtained by identifying the two compositions @xmath324 and @xmath325 of two cycles of arrows in @xmath0 : @xmath326^f & & y\\ar@/^/[ll]^g } \\ ] ]    that @xmath327 is then seen already in the simple case @xmath328 ( denote by @xmath191 its non - identity arrow ) : @xmath329 and @xmath330 are identified in the strong coend by @xmath149 , while they are not identified in the standard coend since there are no non - trivial two - cycles .",
    "so @xmath331 is a terminal set , while @xmath323 has two elements .",
    "a similar conclusion holds for the commutative monoid @xmath332 with @xmath333 idempotent , while in general if @xmath0 is a commutative monoid @xmath334 is the set of arrows of @xmath0 .",
    "if @xmath0 is a grupoid , we know from proposition  [ 32prop1 ] that @xmath335 ; in fact they give the conjugacy classes of @xmath0 .",
    "[ 35rmk1 ] following the fifth of examples  [ 32ex1 ] , we have @xmath336 that is we find again the well - known expression of the set of natural transformations as an end .",
    "the above considerations are summarized by the following commutative diagrams ( which subsume diagrams  ( [ 34eq1 ] ) about limits and colimits ) , where @xmath337 is the category whose arrows are strong dinatural transformations :",
    "following section  [ posets ] , we now generalize some aspects of the two - valued duality to the set - valued context : the meets `` predicate becomes a ensor '' functor , @xmath338 , which allows to define the omplement `` of @xmath339 as the right adjoint to @xmath340 .",
    "once more , it appears that @xmath28 encloses and clarifies well - known concepts : in this case , the tensor functor on @xmath28 extends the classical tensor product @xmath341 , while each complement functor @xmath342 xtends '' the right adjoints of @xmath343 .",
    "if @xmath67 has components and products we can naturally generalize the meets `` predicate of section  [ posets ] obtaining the functor : @xmath344 we may call functors isomorphic to some @xmath345  - representable '' functors .",
    "it is worth stressing that non isomorphic objects may t - represent isomorphic functors ; an example is given by two graphs in @xmath263 with the same thin reflection or by any two _ reflexive _ graphs with the same number of components .",
    "on the other hand , in the category of presheaves on a grupoid it is true that @xmath346 if @xmath67 is also ( cartesian ) closed , then the dual or complementary roles played by the functors @xmath347 and @xmath348 are more evident , as summarized in the following proposition :    [ 41prop1 ] let @xmath67 be a cartesian closed category with components , then @xmath349 the last two being adjunctions with parameter @xmath339",
    ".    in general , the copower functor @xmath350 , left adjoint to the representable @xmath351 , may exist without being given by the formula displayed in equation  ( [ 41eq2 ] ) ( as in the case of categories with a zero object , on which the functors @xmath75 , @xmath292 and @xmath74 become constant ) . on the other hand",
    ", we will shortly show that if @xmath340 has a right adjoint then it has the form displayed in  ( [ 41eq1 ] ) .",
    "[ 41def1 ] if there is a universal arrow @xmath352 from @xmath340 to the set @xmath259 , we denote @xmath129 by @xmath353 and call it he @xmath259-complement of @xmath6 `` .",
    "in particular , if @xmath353 exists for any set @xmath259 , we say that @xmath6 as complement '' and call functor @xmath354 , right adjoint to @xmath340 , he complement of @xmath6 \" .",
    "[ 41prop2 ] if @xmath67 has products and components , an object @xmath339 has an @xmath259-complement iff the exponential @xmath181 exists ( that is , iff there is a universal arrow from @xmath355 to the set @xmath179 ) .",
    "if this is the case , @xmath356 in particular , @xmath6 has complement iff the exponential @xmath181 exists for any set @xmath259 .",
    "if this is the case ( that is , if @xmath6 is xponentiable for discrete basis \" ) then @xmath357    if @xmath181 exists , its universality with respect to @xmath340 and @xmath259 is given by the following chain of bijections , natural in @xmath358 : @xmath359 in the other direction , if @xmath353 exists , we have @xmath360 which gives the universality of it with respect to @xmath355 and @xmath179 . in general , the adjunction with parameter @xmath339 : @xmath361 is only partially defined .",
    "let @xmath67 be a category with products and components .",
    "following section  [ 2sub5 ] , we say that an object @xmath339 is a trong atom \" if there are bijections @xmath362 natural in @xmath358 .",
    "for example , if @xmath363 is the category of graphs , the dot graph ( one object and no arrows ) is a strong atom .",
    "the set - valued correspective of proposition  [ 25prop1 ] ( to which we refer for the proof ) is the following :    [ 42prop1 ] if a strong atom @xmath6 of @xmath67 has complement then it is a absolutely presentable object ( that is , @xmath351 preserves all colimits ) . in particular , if @xmath67 is cartesian closed then its strong atoms are absolutely presentable objects .",
    "often the above condition is too strong to be interesting .",
    "but it can be relativized by restricting the class of objects against which to test atomicity .    in our main concern , @xmath364 , we say that a category @xmath4 over @xmath0 is a eft atom `` if there is a natural bijection as above @xmath365 but restricted to the @xmath366 .",
    "dually , @xmath4 is a ight atom '' if @xmath367 natural in @xmath368 .",
    "we say that @xmath369 is an atom if it is both a left and a right atom .",
    "we shall study thoroughly atoms in section  [ 6sub2 ] , where we shall also see that the distinction between left and right atoms is illusory .",
    "for now we just record    [ 42prop2 ] any object @xmath17 of the base category @xmath0 is an atom : for any df or dof @xmath6 @xmath370    in general @xmath371 and @xmath372 are the components and the objects of the fiber category over @xmath17 .",
    "but a category @xmath67 is discrete iff @xmath373 , and so if @xmath4 has discrete fibers then @xmath374 .",
    "we now show that @xmath375 extends the usual tensor product of set functors .",
    "recall that given @xmath167 and @xmath201 , if @xmath202 like in examples  [ 32ex1 ] , then [ 43eq1 ] ad : = h is called the tensor product of @xmath6 and @xmath50 .",
    "we have seen that @xmath199 over @xmath0 is the product of @xmath6 and @xmath50 over @xmath0 , and that in this case @xmath376 ( see proposition  [ 32prop1 ] ) .",
    "so we have @xmath377 that is , the following diagram commutes : [ 43eq2 ] so the tensor product is reduced directly to the components of a category over @xmath0 .",
    "usually it is reduced to the components of the same ( total ) category but seen as a dof over a df over @xmath0 : a colimit of the set functor @xmath378 on the category of elements of @xmath6 .",
    "the two constructions are clearly equivalent , but the former is more direct and symmetrical",
    ". the other possibility would be the reduction of the coend  ( [ 43eq1 ] ) to a colimit via the ubdivision category `` or the wisted arrow category '' ( see  @xcite ) .",
    "but so doing would mean to consider the components of a more involved total category ( whose objects are given by all the @xmath379 , not only those with @xmath380 ) .",
    "observe that ually \" the diagrams @xmath381 ^ -\\nat\\ar@{_{(}->}[dd ] & & { \\set}\\ar@2{-}[dd ] \\\\ \\\\ { \\catx\\times\\catx }                  \\ar[rr]^-\\hom                        & & { \\set } } \\qq\\qq \\xymatrix { { \\set^x\\!\\!\\times\\set^x } \\ar[rr]^-\\nat\\ar@{_{(}->}[dd ] & & { \\set}\\ar@2{-}[dd ] \\\\ \\\\ { \\catx\\times\\catx }        \\ar[rr]^-\\hom                        & & { \\set } } \\ ] ] express the fullness of the inclusions  ( [ 31eq2 ] ) .",
    "now we turn to complements in @xmath28 and will see in what sense the dualities of section  [ posets ] can be generalized to the set - valued context .",
    "we have seen in section  [ 2sub6 ] that the truth value category @xmath31 is very peculiar in that the functor @xmath382 is an isomorphism , which we usually call egation `` and which in turn induces a duality between lower and upper parts of a poset @xmath383 .",
    "the point to be made presently is that for the category of sets there is not a single dualizing object playing the role of false '' ; rather , we must consider the whole bunch of functors @xmath384 as the egation `` in @xmath284 , which in turn induce a bunch of negation operators @xmath385 these are not isomorphisms , but negation is classical in that a presheaf @xmath6 is recoverable from the bunch ( in fact a functor on @xmath284 ) of covariant presheaves @xmath386 .",
    "furthermore , once again , the negation operator extends , at least partially , to the environment @xmath28 making it possible to derive the formulas for the reflection in discrete fibrations : the @xmath259-negation of a presheaf is the ame '' as the @xmath259-complement in @xmath28 of the corresponding df , as in the two - valued case .",
    "( in  @xcite , it is proposed a definition of negation in a locally cartesian closed category or in any hyperdoctrine , that is similar to our definition of complement but is parametrized by objects over 1 , rather than by sets ) .",
    "let us begin with complements in the category of sets . since @xmath284 is cartesian closed and @xmath387 are the identity functors , any set @xmath259 has the complement functor @xmath388 which we call also the egation `` of @xmath259 , since we are thinking to @xmath284 as a ruth - values '' category .",
    "so the @xmath389-negation of @xmath259 is simply @xmath390 , where @xmath391 is the functor @xmath392 as for the complement operator on @xmath28 , @xmath393 in general it is only partially defined .",
    "anyway corollary  [ 31prop2 ] can now be rephrased as follows :    [ 44prop1 ] any df @xmath6 on @xmath0 has a complement @xmath394 which is valued in dof s ( and conversely ) .",
    "so the @xmath259-complement of a df on @xmath0 is a dof ( and conversely ) .    on the other hand ,",
    "as sketched before , the dof @xmath353 can also be seen as induced directly by negation in @xmath284 : @xmath395 gives a functor @xmath396 expicitly , for any @xmath167 , @xmath386 is the opposite of @xmath397 , that is @xmath398",
    "so @xmath386 corresponds to the exponential @xmath181 in @xmath28 for the df @xmath6 , as described in corollary  [ 31prop2 ] , and we can construct exponentials in @xmath28 in such a way that the following diagram commutes for all @xmath180 : [ 44eq1 ] where the lower arrow is the partially defined functor which takes a category over @xmath0 in its @xmath259-complement . incorporating the parameter @xmath259 explicitly in the diagram , we get so , recalling diagram  ( [ 43eq2 ] ) , we conclude that @xmath399 is an adjunction with parameter @xmath400 .",
    "indeed , this is the usual closed structure on a fragment of the closed bicategory of distributors .",
    "so , the point to be stressed is that the above lassical \" adjunction extends to the adjunction @xmath401 of section  [ 4sub1 ] , with parameter @xmath6 in @xmath138 .      like in section  [ 2sub8 ]",
    "we now prove an djunction - like \" property of the tensor functor on @xmath28 which allows to derive directly the reflection formula .",
    "[ 45prop1 ] let @xmath0 be a category , @xmath6 a df and @xmath50 a dof on @xmath0 .",
    "then for any @xmath369 with reflections @xmath2 in df s and @xmath402 in dof s , there are natural bijections",
    "@xmath403    we prove the first one , the other being symmetrical .",
    "for any set @xmath259 @xmath404 where we have used proposition  [ 44prop1 ] .",
    "the result follows by yoneda .",
    "the following proposition can be interpreted as the fact that complementation in @xmath28 is classical , when restricted to df s and dof s ( compare it with proposition  [ 28prop2 ] ) ; in particular , it is possible to ecover \" a df ( or presheaf ) from its negation :    [ 45prop2 ] if @xmath6 and @xmath129 are both df s ( or both dof s ) , then there is a natural bijection [ 45eq1 ] ( a , b ) ( b , a ) briefly , the trong contraposition law \" holds .",
    "furthermore , df s are properly analyzed by dof s ( and conversely ) via the tensor functor : there is a natural bijection @xmath405    by section  [ 4sub4 ] , the isomorphism  ( [ 45eq1 ] ) may be interpreted equivalently using preshaves instead of df s : @xmath406 where @xmath407 are given by @xmath408 . by the isomorphism @xmath409 , @xmath8 corresponds to the functor @xmath410 given by @xmath411 and natural transformations @xmath412 correspond to natural transformations @xmath413 , that is families of mappings @xmath414 such that both the diagrams [ 45eq2 ] commute for any @xmath415 in @xmath0 and any @xmath416 in @xmath284 . by yoneda ,",
    "the former of  ( [ 45eq2 ] ) implies that @xmath417 for a unique map @xmath418 , so that the latter becomes [ 45eq3 ] but if @xmath259 has more than one element , then for any @xmath419 in @xmath284 , @xmath420 and so the commutativity of  ( [ 45eq3 ] ) for any @xmath259 and @xmath415 implies that also @xmath421 ^ -{h_y}\\ar[dd]_{au } & & by\\ar[dd]^{bu } \\\\ \\\\ ax \\ar[rr]^-{h_x }              & & bx              } \\ ] ] commutes for any @xmath415 in @xmath0 , giving a natural transformation @xmath422 . in the other direction , any such @xmath423 induces @xmath424 , and the two processes are clearly each other inverses .",
    "the last part of the proposition follows from the fact that @xmath425 by a general property of adjunctions with parameters ( see e.g.  @xcite ) .",
    "we begin by showing that the reflections of the objects of the base category in df s have a very familiar form .",
    "then we derive the reflection and coreflection formulas for general categories over @xmath0 .",
    "finally , we verify that the formulas give indeed the desired reflection and coreflection .",
    "first note that the representable functors on @xmath0 correspond to slices of @xmath0 : @xmath426 over @xmath0 is @xmath427 , and dually @xmath428 over @xmath0 is @xmath429 .",
    "thus for any df @xmath6 , @xmath430 , and the yoneda lemma may then be rephrased as @xmath431 on the other hand , since also ( see section  [ 4sub2 ] ) @xmath432 , we have @xmath433 that is    [ 51prop1 ] the reflections of an object - atom @xmath17 of the base category @xmath0 in df s and dof s are given by : @xmath434    since also @xmath435 ( see proposition  [ 42prop2 ] ) , by proposition  [ 45prop1 ] we get @xmath436 that is , recalling diagram  ( [ 43eq2 ] ) , we have proved the o - yoneda lemma \" :    [ 51prop2 ] for any presheaf @xmath167 and any @xmath15 @xmath437    moreover , if @xmath438 is the functor @xmath439 then the ddendum `` to the yoneda lemma ( see  @xcite ) may be rephrased by saying that the equivalence  ( [ 31eq1 ] ) can be obtained as @xmath440 ually '' if we define @xmath441 by @xmath442 , the co - yoneda lemma may be rephrased by saying that @xmath443 is an equivalence . in fact ,",
    "the functors  ( [ 51eq2 ] ) and  ( [ 51eq4 ] ) are isomorphic ( see  @xcite ) .",
    "we are now in a position to derive the ( coreflection and the ) reflection formula in a straightforward manner , exactly like in section  [ 2sub9 ] , using the object - atoms @xmath15 ( see section  [ 4sub2 ] ) as test shapes both for figures ( the elements of @xmath444 ) and for  - figures \" ( the elements of @xmath445 ) .",
    "though in the following propositions we should use the hypothetical form f the reflection ( coreflection ) exists then it has the form  \"",
    ", we do not since it will be proved in the next section that these formulas actually give the desired coreflection and reflection for any category over @xmath0 .",
    "[ 52prop1 ] the fibers of the coreflections @xmath3 and @xmath446 of a category @xmath4 over @xmath0 in df s and dof s have the form @xmath447",
    "@xmath448 where only the adjunction laws have been used .",
    "[ 52prop2 ] the fibers of the reflections @xmath2 and @xmath402 of a category @xmath4 over @xmath0 in df s and dof s have the form @xmath449",
    "@xmath450 where we used twice the adjunction - like properties of proposition  [ 45prop1 ] .",
    "it is worth stressing the strong similarity between the derivations of the reflection and coreflection formulas .    to obtain the arrows of , say , @xmath402 ( that is , the action of @xmath0 on its fibers ) we should look at the reflections in @xmath138 of the arrows in @xmath0 . if @xmath191 is an arrow in @xmath0 , its reflection @xmath451 as a category @xmath144 over @xmath0 is @xmath427 again ; and the domain and codomain inclusions over @xmath0 , @xmath452 and @xmath453 become @xmath454 so we get the following proposition , of which the yoneda and co - yoneda lemmas are particular cases ( see section  [ 5sub1 ] ) :    [ 52prop3 ] the coreflection @xmath3 and the reflection @xmath2 are given as presheaves by @xmath455      as it often happens , after having derived the form of a supposed adjoint functor , one has to check that what he got really does the job .",
    "we concentrate on dof s , though by duality one clearly has specular results for df s .",
    "we begin by analyzing morphisms in @xmath28 to and from dof s .",
    "if the codomain is a dof , such a morphism is easily seen to be determined by its object mapping :    [ 53prop1 ] given a category @xmath4 over @xmath0 and a dof @xmath50 on @xmath0 , a mapping @xmath456 over @xmath0 between the objects of the total categories of @xmath4 and @xmath50 extends ( uniquely ) to a functor over @xmath0 iff @xmath457 for any @xmath458 over @xmath191 .    on the other hand ,",
    "a morphism in @xmath28 with a dof as domain has the following form , which is simply the general form adapted to the arrows of a dof :    [ 53prop2 ] a functor @xmath456 over @xmath0 from the dof @xmath50 to @xmath4 is given by its object mapping over @xmath0 : @xmath459 and by its arrow mapping over @xmath0 : @xmath460 ( with @xmath461 ) which is a graph morphism and respects identities and compositions :    1 .",
    "@xmath462 2 .",
    "@xmath463 and @xmath464    now we describe more concretely @xmath402 and @xmath446 . observing that @xmath465 and so @xmath466 , we get the following more familiar version of proposition  [ 52prop2 ] and corollary  [ 52prop3 ] ( see  @xcite and  @xcite ) :    [ 53prop3 ] the reflection of a category @xmath4 over @xmath0 in discrete opfibrations is given by @xmath467 for any @xmath15 , and @xmath468 = [ \\la a , \\pi a{\\mathop{\\to}\\limits}^{fh}y\\ra ] \\in \\comp(p / y)\\ ] ] for any @xmath191 in @xmath0 and @xmath469 \\in \\comp(p / x)$ ] .    as for the coreflection , from proposition  [ 52prop1 ] ,",
    "corollary  [ 52prop3 ] and proposition  [ 53prop2 ] we straightforwardly get :    [ 53prop4 ] the coreflection of a category @xmath4 over @xmath0 in discrete opfibrations is given by @xmath470 for any @xmath15 ; hence each @xmath471 is a mapping @xmath472 for any arrow in @xmath0 with domain @xmath17 , and a mapping @xmath473 for any two consecutive arrows in @xmath0 with domain @xmath17 , such that @xmath474 is an arrow in @xmath4 over @xmath475 and    1 .",
    "@xmath476 2 .",
    "@xmath477    furthermore , for any @xmath191 in @xmath0 , @xmath478 is given by @xmath479    [ 53prop5 ] the morphism @xmath480 which takes an object @xmath423 over @xmath17 to the component @xmath481 $ ] in @xmath482 is a universal morphism to a dof .",
    "so the formula of proposition  [ 52prop2 ] gives indeed the reflection of @xmath4 .",
    "first , we have to check that @xmath483 is indeed a morphism . by proposition  [ 53prop3 ] , for any @xmath458 in @xmath4 over @xmath191 ,",
    "@xmath484 = [ \\la a , x { \\mathop{\\to}\\limits}^f y\\ra ] = [ \\la b , y { \\mathop{\\to}\\limits}^\\id y\\ra]\\ ] ] where the last equality follows from the arrow @xmath485 in @xmath486 .",
    "so the condition of proposition  [ 53prop1 ] is fulfilled .    as for universality ,",
    "given any morphism @xmath487 to a dof , suppose that @xmath488 .",
    "then @xmath489 $ ] , so that @xmath490 = \\dbf\\phi(h[\\la a , x { \\mathop{\\to}\\limits}^\\id x\\ra ] ) = h(\\dbf\\phi[\\la a , x { \\mathop{\\to}\\limits}^\\id x\\ra ] ) = h(\\phi a)\\ ] ] which gives the unicity of @xmath491 .",
    "@xmath492^{\\phi_p}\\ar[dr]_\\phi   &   \\up p \\ar@{ .. >}[d]^{\\dbf\\phi }    \\\\                                  &   d                                 } \\ ] ] so we have to check that @xmath491 defined by @xmath490 = h(\\phi a)\\ ] ] is indeed a morphism @xmath493 in @xmath28 :    1 .",
    "@xmath491 is well - defined : if @xmath458 in @xmath4 over @xmath494 is an arrow @xmath495 to @xmath496 in @xmath486 ( that is @xmath497 ) then by proposition  [ 53prop1 ] @xmath498 2 .",
    "@xmath491 is a morphism in @xmath28 ( or in @xmath499 ) , since for any @xmath500 in @xmath0 @xmath501 = \\dbf\\phi [ \\la a , x{\\mathop{\\to}\\limits}^{fh } z\\ra ] = fh(\\phi a ) = f\\dbf\\phi[\\la a , x{\\mathop{\\to}\\limits}^h y\\ra]\\ ] ] 3 .",
    "@xmath488 , since for any @xmath502 , @xmath503 ) = \\id_x(\\phi a ) = \\phi a $ ] .",
    "[ 53prop6 ] the morphism @xmath504 which takes any @xmath471 to the object @xmath505 in @xmath4 over @xmath17 , and any arrow @xmath506 in @xmath446 over @xmath149 to the arrow @xmath507 in @xmath4 over @xmath149 is a universal morphism from a dof .",
    "so the formula of proposition  [ 52prop1 ] gives indeed the coreflection of @xmath4 .",
    "first , we have to check that @xmath483 is indeed a morphism in @xmath28 , that is that the conditions of proposition  [ 53prop2 ] are fulfilled . but these follow directly from the corresponding ones about the @xmath508 in @xmath509 ( see proposition  [ 53prop4 ] ) :    1 .",
    "@xmath510 ; but + @xmath511 and @xmath512 as required .",
    "2 .   @xmath513 and + @xmath514    as for universality , given any morphism @xmath515 from a dof , suppose that @xmath516 . then @xmath517 , so that @xmath518 and similarly @xmath519 , giving the unicity of @xmath491 .",
    "@xmath520_{\\dbf\\phi}\\ar[dr]^\\phi   &    \\\\ p\\rup \\ar[r]^{\\phi_p }                   &   p } \\ ] ] so we have to check that @xmath491 defined by @xmath521 is indeed a morphism @xmath493 in @xmath28 :    1 .",
    "@xmath491 is well - defined , that is @xmath522 is indeed a morphism @xmath523 , that is the conditions of proposition  [ 53prop4 ] : are fulfilled . but these follow directly from the corresponding ones about @xmath456 ( see proposition  [ 53prop2 ] ) : 1 .",
    "@xmath524 ; but + @xmath525 and @xmath526 , as required .",
    "2 .   @xmath527 and + @xmath528 2 .",
    "@xmath491 is a morphism in @xmath28 ( or in @xmath499 ) , since for any @xmath191 in @xmath0 + @xmath529 and similarly + @xmath530 3 .",
    "@xmath516 , since for any @xmath461 , @xmath531 , and similarly for any arrow @xmath532 in @xmath50 .",
    "as suggested by richard wood , the reflection and coreflection of a category over @xmath0 in discrete fibrations can be factorized through fibrations over @xmath0 .",
    "indeed , the inclusion @xmath533 factors ( up to equivalence ) through fibrations as follows @xmath534 where the last inclusion is given by the grothendieck construction .",
    "while the functor @xmath535 clearly has both left and right adjoints @xmath536 given pointwise \" by components and points on @xmath287 , the same is true also for the grothendieck functor .",
    "its left adjoint @xmath537 is simply given by slicing : @xmath538 ( see also  @xcite ) .",
    "its right adjoint takes @xmath4 to the functor @xmath539 such that @xmath540 is the category whose objects are the morphisms @xmath541 like in proposition  [ 53prop4 ] , while an arrow @xmath542 is given by mappings @xmath543 such that    1 .",
    "@xmath544 is an arrow in @xmath4 over @xmath330 2 .",
    "@xmath545 3 .",
    "@xmath546 .",
    "while for any @xmath210 , the functor @xmath547 is given by + @xmath548 , @xmath549 on objects , and + @xmath550 on arrows .",
    "in section  [ 6sub1 ] we analyze reflections and coreflections in df s in relation with a hange of base \" given by a functor @xmath551 , showing also their interdependence with kan extensions .",
    "the relevance of the reflection @xmath57 in df s over @xmath0 for the study of colimits of functors @xmath552 was shown thoroughly in  @xcite . in section  [ 6sub2 ] ,",
    "we present those facts in a more conceptual way , resting on the universal property of @xmath57 .",
    "we begin with an unusual operative definition of ( co)limits : the colimit of @xmath553 is its reflection in the full subcategory of principal \" ( or representable ) df s : those with a terminal object . thus @xmath554 can be seen as an intermediate step of this reflection .    in section  [ 4sub2 ]",
    "we have seen that any object @xmath15 is an atom in @xmath28 . in section  [ 6sub3 ]",
    "we show that the same is true for any idempotent @xmath333 in @xmath0 , and that the reflections of atoms are the retracts of representable functors .",
    "in section  [ 6sub4 ] we present nother `` context in which one can apply the reflection formula , which allows in particular a direct and intuitive calculation of the best left approximation '' of a graph with an ( idempotent , bijective or @xmath555-periodic ) evolutive set .    whenever opportune , we will be more careful about notations regarding categories over a base : referring to a category over @xmath0 we shall write e.g. @xmath556 , rather than only @xmath4 as before . accordingly , its reflection will be denoted by @xmath557 rather than by @xmath2 .",
    "dual statements , obtained by dualizing the base category , are often left to the reader .",
    "note that @xmath558 gives an isomorphism @xmath559 , such that the following diagrams commute : @xmath560 ^ -i \\ar@2{-}[d ]       & \\catx \\ar@2{-}[d ]       & { \\dof x } \\ar[l]_-j \\ar@2{-}[d ]   \\\\ { \\dof{x\\op } } \\ar[r]^-j              & \\catx\\op                & { \\df{x\\op } } \\ar[l]_-i            } \\qq\\qq \\xymatrix@r=1.5pc@c=3pc {   { \\df x } \\ar@2{-}[d ]    & \\catx \\ar@2{-}[d]\\ar[l]_-{\\down\\,(-)}\\ar[r]^-{\\up\\,(- ) }    & { \\dof x }   \\ar@2{-}[d ]   \\\\ { \\dof{x\\op } }           & \\catx\\op   \\ar[l]_-{\\up\\,(- ) } \\ar[r]^-{\\down\\,(- ) }          & { \\df{x\\op } }             } \\ ] ] briefly , @xmath561 and @xmath562 .",
    "furthermore , @xmath563 , @xmath564 , @xmath565 and @xmath566 .",
    "recall that any functor @xmath551 gives rise to a pair of adjoint functors @xmath567 where @xmath568 is given by composition with @xmath149 , while @xmath569 is obtained by the following pullback in @xmath287 : @xmath570 \\ar[d]_{f^ * p }   & p \\ar[d]^ p    \\\\ x     \\ar[r]^f                 & y                } \\ ] ] note that @xmath571 factors through @xmath572 and @xmath573 up to isomorphisms ; indeed , the components of a category over a base are given by those of the total category ( see section  [ 3sub3 ] ) and @xmath4 and @xmath574 have the same total category . as a consequence also",
    "@xmath575 factors through @xmath569 and @xmath576 ( up to isomorphisms ) : [ 61eq2 ] @r=3.5pc@c=3.5pc ^f _ ! ^ & ^ + @2-[r ] & @r=3.5pc@c=3.5pc & _ -f^ * + _ @2-[r ] & _ furthermore , the pair @xmath577 satisfies the frobenius law , that is the morphism [ 61eq1 ] f_!_1(_qf_!_2 ) : f_!(pf^*q ) f _ !",
    "pq is an isomorphism for any @xmath369 and @xmath578 , @xmath579 being the counit of the adjunction .",
    "this follows essentially from the fact that the composition of the two pullback squares below , expressed by @xmath580 , gives another pullback , expressed by @xmath581 : @xmath582\\ar[d ] & f^*q \\ar[r ] \\ar[d]_{f^*q } & q\\ar[d]^q    \\\\",
    "p\\ar[r]^p                 &   x     \\ar[r]^f             & y                } \\ ] ] as it is easily checked ( see  @xcite ) , this implies that @xmath569 preserves existing exponentials . in particular , by  ( [ 61eq2 ] )",
    ", @xmath569 preserves complements : [ 61eq0 ] @r=3.5pc@c=3.5pc ^(s)^- & _ f^*^(s)^- + ( ) & ( ) _ f^ * the following adjunction - like property holds :          we have the following chain of natural bijections : @xmath588 now we turn to kan extensions of set functors .",
    "first recall that pullbacks preserve df s and dof s : if @xmath50 over @xmath589 is in @xmath590 then @xmath591 is in @xmath139 .",
    "so @xmath592 restricts to @xmath593 and @xmath594 : @xmath595^i & { \\df y}\\ar[l]_{f^*}\\ar[d]^i \\\\",
    "\\catx             & \\caty\\ar[l]_{f^ * }                  } \\qq\\qq \\xymatrix@r=3.5pc@c=3.5pc { { \\dof x } \\ar[d]^j & { \\dof y}\\ar[l]_{f^*}\\ar[d]^j \\\\   \\catx              & \\caty\\ar[l]_{f^ * }                  } \\ ] ] in terms of presheaves @xmath596 can be defined by composition : @xmath597    [ 61rmk1 ] thus also diagram  ( [ 61eq0 ] ) restricts to [ 61eq01 ] @r=3.5pc@c=3.5pc ^x ^_s & ^y _ f^*^_s + ( ^x ) & ( ^y)_f^ * e.g. , if @xmath583 is a quotient obtained by adding aws `` ( commutative diagrams ) to @xmath0 , then @xmath569 is full and faithful and we can say that complementation in @xmath28 preserves ( or better , reverses ) algebraic laws '' . for example , let @xmath0 be the free category on @xmath598\\ar@<1ex>[r ] & y \\ar[l]}$ ] , and let @xmath368 be a dof which happens to be a reflexive graph . then its complements ( in particular @xmath599 given by @xmath600\\ar@<1ex>[r ] & \\p(dx ) \\ar[l]}$ ] ) are cylinders ( mappings with two sections ) ; conversely , the complements of cylinders are reflexive graphs ( see  @xcite ) .",
    "since in the diagram below the square of right adjoint arrows commutes up to isomorphisms , so does also the square of left adjoint arrows : @r=4pc@c=4pc @<1ex>[r]^f_!_@<-1ex>[d]_(-)^ & @<1ex>[l]^f^*@<-1ex>[d]_(-)^ + x @<1ex>[r]^_f_@<-1ex>[u]_j & y@<1ex>[l]^f^*@<-1ex>[u]_j              as it was the case for the _ coreflection _ formula of proposition  [ 52prop1 ] , the nd formula \" for _ right _ kan extensions can be obtained directly as follows ( we use remark  [ 35rmk1 ] in the last step ) : @xmath613      given a functor @xmath552 and an object @xmath15 , a cone from @xmath614 to @xmath17 is a family of arrows @xmath615 , such that @xmath616 for any @xmath617 in @xmath4 . if @xmath191 is an arrow in @xmath0 , the family @xmath618 a cone with vertex @xmath36 .",
    "so we have a functor @xmath619 this functor can be substantiated in two ways , that lead to two different points of view on limits and colimits .",
    "the usual way is to see a cone as a natural transformation from @xmath614 to @xmath620 , so that one defines @xmath621 but a cone from @xmath614 to @xmath17 is also the object mapping @xmath622 of a functor @xmath623 over @xmath0 ( see proposition  [ 52prop1 ] ) , and we can define the above functor equivalently as @xmath624 thus , while for any fixed @xmath614 we get isomorphic functors [ 62eq0 ] ( , x/- ) ( , - ) we in fact have two different modules one \" @xmath625 both representable on the right .    since a colimit of @xmath614 is a representing object for @xmath626 , we have also two different operative definitions of the colimit _ functor _ : either as the partially defined left adjoint @xmath627 to the functor @xmath628 , or as the partially defined left adjoint @xmath629 to the functor @xmath630 .",
    "dually , we have two limit functors @xmath631 respectively right adjoint to @xmath628 and left adjoint to @xmath632 .    * since @xmath633 , unlike @xmath634 , is always full and faithful , the counit @xmath635 of the adjunction @xmath636 is an isomorphism .",
    "( indeed , this follows also from the fact that @xmath427 has a terminal object over @xmath17 , that is @xmath637 . )",
    "the unit @xmath638 is again the universal cone . * the two colimit functors ( which agree on each single @xmath552 as an object of two different categories )",
    "can be merged in a single @xmath639 ( see  @xcite ,  @xcite and  @xcite ) where the upercomma category `` @xmath640 is the grothendieck category associated to the 2-representable functor @xmath641 ( which includes both @xmath28 and all the @xmath642 as subcategories ) . indeed , we have the further module one '' ( which includes the other ones ) @xmath643 where @xmath644 is the full and faithful functor which sends an object @xmath15 to the corresponding category over @xmath0 . *",
    "if @xmath645 , then @xmath199 over @xmath0 is the forgetful functor @xmath646 from @xmath217-algebras to @xmath0 ( see the last of examples  [ 32ex1 ] ) ; then the strong dinatural transformations @xmath647 are the cones @xmath648 , as in  @xcite .    since @xmath427 is a df ( associated to the representable @xmath426 ) , the functor @xmath633 factors through @xmath649 .",
    "thus its left adjoint @xmath650 also factors through @xmath554 .",
    "more explicitly , we have the following chain of isomorphisms : @xmath651 so that @xmath652 exists iff @xmath653 exists , and if this is the case @xmath654 where @xmath655 is the reflection of @xmath552 in discrete fibrations ; dually @xmath656 , either one existing if the other one does",
    ".      the above considerations can be parametrized : given a functor @xmath583 , one can compose the adjunctions @xmath577 and @xmath657 as follows : @xmath658^{f_!}_\\bot\\ar@/^2pc/@<1ex>[rr]_{\\colim(f\\circ- ) }    & \\caty \\ar@<1ex>[l]^{f^ * } \\ar@<1ex>[r]^\\colim_\\bot   &   y \\ar@<1ex>[l]^{y/-}\\ar@/^2pc/@<1ex>[ll]_{f/- } } \\ ] ] so we have the partially defined adjunction with parameter @xmath583 : [ 62eq1 ] ( f- ) f/- : y ( alternatively , one easily checks directly that @xmath659 . ) since the category @xmath660 over @xmath0 is the df associated to @xmath661 , the functor @xmath662 factors through @xmath649 .",
    "thus its left adjoint @xmath663 also factors through @xmath554 .",
    "more explicitly , we have ( f,- ) ( f , y/- ) ( , f/- ) ( , f/- ) + ( f , y/- ) ( f,- ) thus @xmath664 exists iff @xmath665 exists , and if this is the case @xmath666 furthermore , the weak colimits of @xmath667 coincide with those of @xmath668 .",
    "in particular we have proved in a very direct manner the following proposition :    [ 62prop2 ] if two functors @xmath552 and @xmath669 with the same codomain have isomorphic reflections @xmath670 , then for any @xmath583 @xmath671 either side existing if the other one does .",
    "furthermore , @xmath672 and @xmath673 have the same weak colimits .",
    "rephrasing proposition  [ 53prop1 ] , a morphism @xmath678 in @xmath28 is given by a family of morphisms @xmath679 , in @xmath28 , such that for any @xmath617 in @xmath4 , @xmath680 in @xmath50 . by the universality of @xmath681 , the latter corresponds to a family of morphisms @xmath682 , in @xmath28 , such that for any @xmath617 in @xmath4 , @xmath683 in @xmath50 ; that is @xmath684 , as required by the cone condition , since @xmath685 .    [ 62prop3 ] the cone @xmath686 in @xmath139 , corresponding to the unit @xmath687 of the reflection @xmath688 in dof s , is a universal cone .",
    "briefly , @xmath689 is the colimit of @xmath690 ( or the limit of @xmath691 ) .            * if in lemma",
    "[ 62prop21 ] we take @xmath694 , then we have a bijection @xmath695 which is the same that we would obtain by applying directly the yoneda embedding @xmath696 to the cones @xmath697 .",
    "* alternatively , following  @xcite , one can prove corollary  [ 62prop3 ] by noting that since colimits in @xmath290 are computed pointwise , [ 62eq3 ] ( ( ) ) x ( ( ) x ) x(-,x ) ( /x ) ( ) x conversely , by corollary  [ 62prop3 ] , the  ( [ 62eq3 ] ) above gives a new proof of the reflection formula . * a further proof of corollary  [ 62prop3 ] can be obtained noticing that morphisms @xmath698 in @xmath28 correspond also to cones @xmath699 in @xmath284 , considering @xmath50 as a presheaf .",
    "( this fact also allows another proof of the second assertion in proposition  [ 61prop3 ] , as explained in  @xcite . )",
    "then we have @xmath700        1 .",
    "a category over a base and its reflections @xmath701 and @xmath702 have the same components .",
    "the functor @xmath614 is initial iff @xmath703 .",
    "3 .   the unit @xmath704 is an initial functor between the respective total categories .",
    "the object @xmath15 is the absolute limit of @xmath614 iff @xmath705 .",
    "the object @xmath15 is an absolute weak limit of @xmath614 iff @xmath701 is a retract of @xmath706 in @xmath139 .    1 .   by remark  [ 34rmk1 ] , for any @xmath556 in @xmath28 we have @xmath707",
    "the same result follows from the fact that since in the diagram below the square of right adjoint arrows commutes up to isomorphisms , so does also the square of left adjoint arrows : @xmath708^{\\comp}_{\\bot}\\ar@<-1ex>[d]_{\\down\\,(-)}^{\\adj } & { \\set}\\ar@<1ex>[l]^{\\disc}\\ar@2{-}[d ] \\\\   { \\df x } \\ar@<1ex>[r]^{\\comp}_{\\bot}\\ar@<-1ex>[u]_{i }            & { \\set}\\ar@<1ex>[l]^{\\disc }              } \\ ] ] 2 .",
    "apply corollary  [ 62prop4 ] with @xmath709 , the terminal df .",
    "3 .   by point 2",
    "just proved , we must show that for any dof @xmath50 over @xmath402 and any @xmath710 over @xmath402 , @xmath456 factors uniquely over @xmath402 as in the diagram below : @xmath711^\\eta \\ar@/^1.5pc/[rr]^\\phi \\ar[dr]_\\eta \\ar@/_1.5pc/[ddr]^p &   \\up p \\ar[d]^\\id \\ar@{ .. >}[r]^s   & d \\ar[dl]^d \\ar@/^1.5pc/[ddl ]                  \\\\                                                                       &   \\up p \\ar[d]^{\\up\\,\\,p }           &                     \\\\                                                                       &   x                                 &                      } \\ ] ] since @xmath712 is a dof over @xmath0 , and by the universality of @xmath713 over @xmath0 , @xmath714 factors over @xmath0 as @xmath715 .",
    "then @xmath716 , so that @xmath717 , again by the universality of @xmath713 over @xmath0",
    ". thus @xmath718 is a morphism over @xmath689 , giving the existence of the desired factorization . as for unicity",
    ", another such @xmath718 would give another factorization through @xmath713 of @xmath456 over @xmath0 .",
    "( note that this proof is not specifically linked to the situation now considered , unlike those given in  @xcite ,  @xcite , and  @xcite . )",
    "4 .   apply corollary  [ 62prop4 ] with @xmath719 .",
    "note that each cone @xmath720 in @xmath0 , corresponding to @xmath721 in @xmath28 , induces by universality [ 62eq4 ] @r=3pc@c=3pc & @ .. >[d]^ + ^ & x / x recalling corollary  [ 62prop3 ] and the first of remarks  [ 62rmk1 ] , we may see @xmath722 as the universally induced morphism @xmath723 in @xmath28 , through which the cone @xmath724 factors .",
    "then the cone @xmath720 in @xmath0 is an absolute limit iff the cone @xmath725 is a limit in @xmath139 ( or in @xmath28 ) iff @xmath722 is an isomorphism .",
    "if the cone @xmath720 in @xmath0 is an absolute weak limit in @xmath0 , then the cone @xmath726 is a weak limit .",
    "thus the universally induced @xmath722 , as in  ( [ 62eq4 ] ) above , has a retraction .",
    "the reverse implication will be proved in  [ 63rmk3 ] .    * if @xmath727 , the adjunction  ( [ 62eq1 ] ) becomes the adjunction @xmath401 of section  [ 4sub4 ] , with parameter @xmath6 in @xmath138 . *",
    "since @xmath728 is a df over @xmath0 , the adjunction  ( [ 62eq1 ] ) restricts to [ 62eq2 ] ( f- ) f/- : yx^x which displays the weighted colimit construction ( as a functor of the weight @xmath400 ) @xmath729 as the left adjoint to the functor @xmath730 ( of course the @xmath6 in @xmath731 is intended over @xmath0 so that the colimit is taken on the ategory of elements `` of the corresponding presheaf ) .",
    "thus , at least in the non - enriched context , the paradigmatical adjunction  ( [ 62eq2 ] ) ( as illustrated e.g. in  @xcite ) is nothing but a particular case of the more general  ( [ 62eq1 ] ) .",
    "( see also  @xcite , where the restriction of  ( [ 62eq0 ] ) to df s is referred to as the oyoneda lemma '' on page  62 . ) + note that from proposition  [ 62prop2 ] we have @xmath732      we begin by recalling some well - known facts about idempotents and their splitting in @xmath284 and @xmath177 .",
    "let @xmath733 be the monoid which represents the idempotent arrows of categories , that is the one whose unique non - identity arrow is idempotent .      1 .   the idempotent @xmath735 in @xmath0 splits .",
    "the functor @xmath333 has a limit .",
    "the functor @xmath333 has a colimit .",
    "the pair @xmath736 has an equalizer .",
    "the pair @xmath736 has a coequalizer .",
    "now let @xmath737 an idempotent mapping , and @xmath738 the corresponding functor . as a dof over @xmath733 , the category @xmath333 is ( apart from the identities ) exactly what we would call the raph of the endomapping @xmath333 \" .",
    "[ 63prop01 ] for any functor @xmath738 , its limit , given by the @xmath739 ( the set of fixed points of the endomapping @xmath737 ) , and its colimit , given by the components of @xmath333 over @xmath733 , are canonically isomorphic .        for any dof @xmath50",
    ", @xmath743 gives @xmath744 , while @xmath745 gives the components @xmath746 which , over @xmath733 , is the graph of @xmath747 as in corollary  [ 63prop01 ] .",
    "dually , @xmath333 is also a left atom .",
    "since @xmath389 is a right atom , for any dof @xmath50 one has the following bijections , natural in @xmath368 : @xmath751 and similarly for any df @xmath6 .",
    "the second part follows from corollary  [ 63prop1 ] .      1 .   in particular , for any idempotent @xmath752 in @xmath0 , @xmath753 where @xmath754 .",
    "but the reflection formula ( or co - yoneda ) gives @xmath755 , so that @xmath756 that is , @xmath757 is the subfunctor of @xmath758 given by the arrows fixed by composition with @xmath333 : @xmath759 dually , @xmath760 2 .   in particular , for any idempotents @xmath761 in @xmath0 and @xmath762 , @xmath763 is the subset of @xmath764 fixed by @xmath765 . by the above remark , this is the set of arrows in @xmath766 fixed also by @xmath333 , that is the arrows @xmath500 such that @xmath767 .",
    "dually @xmath768 is the set of arrows @xmath191 such that @xmath769 .        1 .",
    "@xmath50 is a retract in @xmath177 of the representable functor @xmath770 , associated to the idempotent @xmath772 .",
    "@xmath50 is isomorphic to the subfunctor @xmath773 of @xmath770 .",
    "@xmath50 is isomorphic to the quotient of @xmath770 given by @xmath774 .",
    "@xmath50 is the reflection of the idempotent atom @xmath333 : @xmath775 .    by proposition  [ 63prop0 ] , the retract",
    "@xmath50 is the limit of @xmath776 ; but the latter is computed pointwise , so that 1 is equivalent to 2 and 3 by corollary  [ 63prop01 ] . that 4 is equivalent to 2 follows from the first of remarks  [ 63rmk1 ] ; alternatively note that the functor in 3 is @xmath777 , and the latter is @xmath778 by the reflection formula .",
    "let @xmath780 be an universal element of @xmath781 .",
    "then @xmath782 is the component of a pair @xmath783 over , say , @xmath784",
    ": @xmath785,\\q a\\in ax_0,\\ , d\\in dx_0\\ ] ] let @xmath786 be the unique morphism in @xmath177 such that @xmath787 $ ] : @xmath788 = ( a\\otimes\\iota)u = \\comp(a\\times\\iota)[\\la a , d \\ra ] = [ \\la a,\\iota d \\ra]\\ ] ] and let @xmath789 be the unique morphism in @xmath177 such that @xmath790",
    ". then @xmath791 \\,\\mapsto\\ , [ \\la a , d \\ra]\\ ] ] so that @xmath792 , as required .",
    "note that @xmath50 splits the idempotent @xmath793 which corresponds to the idempotent @xmath794 in @xmath0 .",
    "trivially 3 implies 4 , and 4 implies 1 and 2 by proposition  [ 63prop11 ] . from proposition  [ 63prop12 ] and",
    "corollary  [ 63prop02 ] it follows that 1 implies that @xmath801 .",
    "furthermore , @xmath802 where proposition  [ 63prop11 ] have been used again .",
    "thus 1 implies 3 . by duality",
    "we also have the equivalence between 2 and 3 ( note that 3 is autodual ) .            1 .",
    "@xmath6 is a retract of a representable functor .",
    "2 .   @xmath806 for an idempotent atom @xmath333 in @xmath28 .",
    "3 .   @xmath807 for an atom @xmath389 in @xmath28 .",
    "@xmath343 is representable .",
    "@xmath808 for a @xmath809",
    "@xmath343 has a left adjoint .",
    "@xmath810 has a right adjoint .",
    "@xmath811 preserves all limits .",
    "@xmath810 preserves all colimits .",
    "@xmath6 is a left adjoint module .",
    "we have already seen the equivalence between the first five properties .",
    "if @xmath812 , then @xmath813 . if @xmath814 , then @xmath815 . for the equivalence between the last three properties and 4 and 5",
    ", we refer again to  @xcite , where they are proved in an enriched context .",
    "[ 63rmk3 ] we can now complete the proof of proposition  [ 62prop5 ] , showing that if @xmath689 is a retract of a representable functor @xmath428 then @xmath17 is an absolute weak limit of @xmath614 . by corollary  [ 63prop02 ] , @xmath816 , for an idempotent @xmath735 .",
    "but @xmath735 itself is a cone from @xmath17 to @xmath817 , and it is weakly universal : @xmath818_f \\ar[dr]^f   &                     \\\\                         x \\ar[r]^e                   &   x \\ar@(ur , dr)^e     } \\ ] ] furthermore , this weak limit is clearly absolute .",
    "then , by proposition  [ 62prop2 ] , @xmath17 is also an absolute weak limit of @xmath614 .    by proposition  [ 63prop2 ]",
    ", for any atom @xmath585 there exists an idempotent @xmath735 in @xmath0 such that @xmath819 and @xmath820 .",
    "this idempotent is not unique , since e.g. if @xmath333 splits as @xmath821 , then @xmath822 .",
    "anyway , by the above remark , any atom has an absolute weak ( co)limit .",
    "if the conditions of the above proposition are satisfied , we could say that @xmath823 onverges `` to its ( co)limit .",
    "in particular , any split idempotent in @xmath0 converges to its retracts , and a category is cauchy complete iff any atom converges .",
    "furthermore , any functor @xmath583 is ontinuous '' : if @xmath823 converges to @xmath17 , then @xmath824 converges to @xmath825 ( see corollary  [ 61prop12 ] ) .",
    "recall that the cauchy completion of a category can be obtained as the full subcategory of @xmath290 generated by the retracts of representable functors ( see e.g.  @xcite ) .",
    "but we have seen that the latter have the form @xmath826 or @xmath757 , and so we get the first part of the following proposition .",
    "the second part follows from the second of remarks  [ 63rmk1 ] .    the reflections of atoms ( or of idempotent atoms ) in df",
    "s generate the cauchy completion of @xmath0 .",
    "furthermore , given two idempotent arrows @xmath735 and @xmath827 in @xmath0 , @xmath828 is the set of arrows @xmath191 such that @xmath769 .",
    "so the cauchy completion is the same thing as the aroubi envelope \" of @xmath0 ( see  @xcite , @xcite and  @xcite ) .",
    "let @xmath0 be a graph in @xmath263 .",
    "a graph @xmath4 over @xmath0 is a ( graph ) opfibration if for any @xmath149 in @xmath0 , the fiber @xmath145 ( defined like in section  [ 3sub1 ] ) s \" a mapping .",
    "fibrations are defined dually .",
    "so we have the inclusions @xmath829 of fibrations and opfibrations in graphs over @xmath0 .",
    "these have left and right adjoints @xmath23 as can be shown in two ways :    * since @xmath263 is a presheaf category , @xmath830 is also a presheaf category , namely on the total category of the df @xmath0 ; the above inclusions may be seen as induced by functors from this category , so that the reflection and coreflection are given by the left and the right kan extensions along these functors . *",
    "the functor @xmath831 given by @xmath832 where @xmath833 is the free category `` functor , is a full and faithful functor whose values are ( up to isomorphisms ) the fl functors '' to @xmath834 ( see e.g.  @xcite ) ; and @xmath835 is a graph fibration iff @xmath836 is a df .",
    "so the reflection of the category @xmath837 over @xmath834 in df s ( being itself a ufl functor ) gives also the reflection of @xmath838 in graphs fibrations : @r=4pc@c=4pc _ ( - ) & ^(- ) + x ^~ &      * every node @xmath15 , as a graph over @xmath0 , is a strong atom in @xmath830 since @xmath839 ( note that the fiber @xmath143 is _ always _ discrete ) .",
    "* the reflections @xmath840 and @xmath841 are given by @xmath842 and @xmath843 .",
    "* any graph over @xmath0 has a complement ( since @xmath830 is cartesian closed ) ; like in section  [ 3sub1 ] , one sees that the complement of a fibration is valued in opfibrations , and vice versa . *",
    "the above facts are all what is needed to prove the reflection formulas @xmath449 as was done for categories over a base . of course",
    ", one has also the coreflection formulas @xmath447    in particular , if @xmath0 is the terminal graph ( the oop \" ) , we have the inclusions @xmath844 of anti - evolutive sets and evolutive sets ( or left and right endomappings ) in graphs .",
    "the reflections of the dot atom @xmath845 ( see section  [ 4sub2 ] ) are the infinite chain and anti - chain : @xmath846 & { \\bullet}\\ar[r ] & { \\bullet}\\ar[r ] & { \\bullet}\\ar[r ] & { \\bullet}\\ar@{ .. >}[r ] &   } \\ ] ] @xmath847 & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & \\ar@{ .. >}[l ] } \\ ] ] so the reflection @xmath402 of a graph @xmath4 in evolutive sets is given by the set @xmath848 , with the action given by the right shift of the anti - chain @xmath849 : @xmath850\\,\\mapsto\\ , [ n+1,x]\\ ] ]      1 .",
    "let @xmath4 be the graph @xmath851 & { \\bullet } } \\q $ ] which is not a ( right ) endomapping because there are no arrows out of one node . applying the reflection formula , we multiply @xmath4 with the anti - chain @xmath852 , getting the graph @xmath853 & { \\bullet}\\ar[ul ] & { \\bullet}\\ar[ul ] & { \\bullet}\\ar[ul ] &   \\ar@{ .. >}[ul ]   } \\ ] ] with an infinite number of components , which are the nodes of the reflection of @xmath4 . furthermore",
    ", the action on it is given by translation , which sends any component in the one on its right .",
    "so @xmath402 is the chain @xmath854 & { \\bullet}\\ar[r ] & { \\bullet}\\ar[r ] & { \\bullet}\\ar[r ] & { \\bullet}\\ar@{ .. >}[r ] &   } \\ , $ ] , wherein the missing codomains in @xmath4 have been added . on the other hand , there are no chains in @xmath4 ( that is , @xmath855 ) , so that the coreflection @xmath446 is the void endomapping : the nodes with no codomains have been deleted .",
    "2 .   let @xmath4 be the graph @xmath856\\ar[r ] & { \\bullet}\\ar@(ur , dr ) } \\qq $ ] which is not a ( right ) endomapping because there are two arrows out of one node .",
    "applying the reflection formula , we multiply @xmath4 with the antichain @xmath852 , getting the two - components graph @xmath857 & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & \\ar@{ .. >}[l ]     \\\\ { \\bullet } & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & { \\bullet}\\ar[l ] & \\ar@{ .. >}[l ]     \\\\ { \\bullet } & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & \\ar@{ .. >}[ul]\\ar@{ .. >}[uul ]   } \\ ] ] so the reflection of @xmath4 has two nodes . furthermore , the action on it is given again by right translation , so that the second component is a fixed point and we get @xmath858 & { \\bullet}\\ar@(ur , dr )   } \\ ] ] wherein the multiple codomains in @xmath4 have been identified . on the other hand , there are four chains in @xmath4 so that @xmath446 has four nodes : @xmath859 & { \\bullet}\\ar[r ] & { \\bullet}\\ar@(ur , dr ) } \\ ] ] that is , the nodes with multiple codomains have been splitted .",
    "if @xmath860 & { \\bullet}\\ar[l]\\ar[r ] & { \\bullet } } \\ , $ ] , @xmath861 is the graph @xmath862 & { \\bullet}\\ar[ul ] & { \\bullet}\\ar[ul ] & { \\bullet}\\ar[ul ] & \\ar@{ .. >}[ul ]     \\\\ { \\bullet } & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & { \\bullet}\\ar[ul]\\ar[uul ] & \\ar@{ .. >}[ul]\\ar@{ .. >}[uul ]   } \\ ] ] so that @xmath863 & { \\bullet}\\ar@(ur , dr )   } \\q\\,\\ , $ ] again .",
    "one should compare this example with the technique used in  @xcite to compute the same reflection .",
    "an example where both the phenomena of adding and identifying codomains , are present is given by the graph @xmath864\\ar[r ] & { \\bullet } } \\q $ ] , whose reflection is again the chain .",
    "5 .   if @xmath865 & { \\bullet } } \\,$ ] , @xmath866 & { \\bullet}\\ar@(ur , dr ) } \\q\\,\\ , $ ] and @xmath867 , then @xmath868 , @xmath869 and @xmath870 are all the loop ( identification prevails in @xmath868 ) . as for coreflections",
    ", @xmath871 is the loop , @xmath872 is the sum of a loop and a left infinite chain ending with a loop on the right , and @xmath873 is the set @xmath874 of sequences in a two - element set , under the action @xmath875 .",
    "@xmath876 and @xmath877 can be defined as the full subcategories of @xmath263 generated by the objects orthogonal respectively to [ 64eq1 ] @1@c=2pc = & & & @ .. >[r ] & @1@c=2pc = & & & & @ .. >[l ] meaning the morphism of graphs from the dot @xmath845 to the chain ( respectively , the anti - chain ) which sends the unique node of @xmath845 to the highlighted node .",
    "similarly , orthogonality with respect to [ 64eq3 ] = @1@c=2pc & @(ur , dr ) = @1@c=2pc & @(ur , dr ) [ 64eq4 ] @1@c=2pc = @ .. >[r ] & & & & & @ .. >[r ] & [ 64eq5 ] _",
    "n = @r=1.5pc@c=1.5pc & @/^/@ .. >[dl ] + & ( n arrows ) defines respectively the full subcategories @xmath878 and @xmath879 of left and right idempotent endomappings , and the full subcategories @xmath880 of bijective endomappings and @xmath881 of n - periodic bijective endomappings .",
    "so we have the following inclusions : [ 64eq6 ] @r=2pc@c=2pc & & + @<.5ex>@ .. >[rr ] & & @<.5ex>@ .. >[ll ] + @<.5ex>@/_1pc/@ .. >[rr ] & @ .. >@(ul , ur ) & @<.5ex>@/^1pc/@ .. >[ll ] + & _",
    "n@ .. >@(dl , dr ) &    [ 64rmk1 ] all the above categories are equivalent to presheaf categories , and all the above inclusions correspond to functors induced by epimorphism between the corresponding categories of shapes .",
    "so they have left and right adjoints given by kan extensions .",
    "but also in this case , a direct application of the formulas gives easier computations of these adjoints .",
    "* the effect of complementation in @xmath263 is displayed by the dotted arrows in diagram  ( [ 64eq6 ] ) : the complement of a left ( right ) idempotent endomapping is valued in right ( left ) idempotent endomappings ; the complement of a bijective endomapping is valued in bijective endomappings ; the complement of a @xmath555-periodic endomapping is valued in @xmath555-periodic endomappings .",
    "these facts may be seen as a consequence of remark  [ 61rmk1 ] and remark  [ 64rmk1 ] .",
    "* since the  ( [ 64eq1 ] ) , ( [ 64eq3 ] ) , ( [ 64eq4 ] ) and  ( [ 64eq5 ] ) are all orthogonal to themselves , they serve also as the reflections of the dot graph @xmath845 in the corresponding subcategories ( where the highlighted morphism from @xmath845 now gives universal arrow ) .    the above facts are all what is needed to prove the reflection formulas of graphs in each of the above subcategories ; e.g. , @xmath882 gives the nodes of the reflection of the graph @xmath4 in ( right ) idempotent mappings .",
    "of course , one has also the corresponding coreflection formulas ; e.g. , @xmath883 gives the nodes of the coreflection of the graph @xmath4 in ( right ) idempotent mappings .",
    "* it is easy to see that if @xmath4 is connected ( that is , @xmath884 ) then @xmath885 has @xmath886 components , where @xmath555 is the number of nodes that are not codomains of any arrow .",
    "so the reflection in ( right ) idempotent mappings acts on each component mantaining such nodes , and collapsing the rest of it to the fixed point . *",
    "the reflection @xmath887 of a graph @xmath4 in bijective endomappings is obtained by taking the components of @xmath888 . for the graphs of examples  [ 64ex1 ] we obtain either @xmath889 itself or the fixed point @xmath890 . if @xmath891 & \\bullet \\ar@/^/[r ] & \\bullet \\ar@/^/[l ] } \\,$ ] , then @xmath402 and @xmath446 are both @xmath892 . *",
    "the reflection @xmath887 of a graph @xmath4 in @xmath555-periodic endomappings is obtained by taking the components of @xmath893 .",
    "since , as is easily checked , @xmath894 we deduce that @xmath895 has @xmath896 nodes and so , being connected by corollary  [ 62prop5 ] , @xmath897 any bijective endomapping @xmath4 is a sum of cycles : @xmath898 , so that @xmath899    * the graphs  ( [ 64eq3 ] ) and  ( [ 64eq5 ] ) are instances of the following @xmath900 & \\bullet\\ar@{ .. >}[r ] & \\bullet\\ar[r ]    & \\bullet\\ar@{ .. >}@/^/[dl ] \\\\                                                             &                    & \\bullet\\ar[u ]    &                            }   \\qv                                                        \\ee(n , m)\\op \\ , = \\q \\xymatrix@r=1.5pc@c=1.5pc { \\circ & \\bullet\\ar[l ] & \\bullet\\ar@{ .. >}[l]\\ar[d ]    & \\bullet\\ar[l ]       \\\\                                                        &                &   \\bullet\\ar@{ .. >}@/_/[ur ]    &                      } \\ ] ] where @xmath901 is the length of the cycle , while @xmath902 is the length of the chain . as before , these graphs allow to compute the reflection ( and coreflection ) in the corresponding full subcategories of @xmath263 , with the usual formulas . * obviously , when the graph @xmath4 grows bigger , it becomes more and more difficult to visualize the components of @xmath861 .",
    "so an appropriate software would be helpful .",
    "note that if @xmath4 is finite , then also when @xmath849 is infinite , only a finite portion of the product is needed to capture the reflection .",
    "the size of this portion depends on that of @xmath4 itself .",
    "kelly ( 1982 ) , _ basic concepts of enriched category theory _ , london mathematical society lecture note series , 64 , cambridge university press .",
    "republished in _ reprints in theory and appl .",
    "_ no . 10 ( 2005 ) 1 - 136",
    "lawvere ( 1989 ) , _ qualitative distinctions between some toposes of generalized graphs _ , proceedings of the ams symposium on categories in computer science and logic , contemporary mathematics , vol .",
    "92 , 261 - 299 .",
    "lawvere ( 1996 ) , _ adjoints in and among bicategories _ , proceedings of the 1994 conference in memory of roberto magari , logic & algebra , lectures notes in pure and applied algebra , 180:181 - 189 , ed .",
    "ursini aglian , marcel dekker , inc .",
    "basel , new york ."
  ],
  "abstract_text": [
    "<S> some basic features of the simultaneous inclusion of discrete fibrations and discrete opfibrations in categories over a base category @xmath0 are considered . in particular </S>",
    "<S> , we illustrate the formulas @xmath1 which give the reflection @xmath2 and the coreflection @xmath3 of a category @xmath4 over @xmath0 in discrete fibrations . the explicit use of the ensor functor \" @xmath5 given by the components of products , allows a vast generalization of the corresponding analysis in the two - valued context . for any df @xmath6 , </S>",
    "<S> the functor @xmath7 has a right adjoint @xmath8 valued in dof s ( and vice versa ) ; such a complement operator , which in the two - valued case reduces to the classical complementation between lower and upper parts of a poset , turns out to be an effective tool in the set - valued context as well .    </S>",
    "<S> various applications of the formulas and of the accompanying conceptual frame are presented . </S>"
  ]
}