{
  "article_text": [
    "we consider a discrete - time financial market wherestocks and , possibly , options are available as hedging instruments . the market is governed by a set @xmath0 of probability measures , not necessarily equivalent , whose role is to determine which events are negligible ( polar ) , and which ones are relevant .",
    "we thus unify two approaches : on the one hand , the framework of model uncertainty , where each @xmath1 is seen as a possible model for the stocks and a robust analysis over the class @xmath0 is performed . on the other hand , model - free approach , where no attempt is made to model the stocks directly , but one sees the distribution of the stocks as partially described by the current prices of the traded options  an ill - posed inverse problem .",
    "both approaches typically lead to a set @xmath0 which is nondominated in the sense that there exists no reference probability measure with respect to which all @xmath1 are absolutely continuous .",
    "we answer three fundamental questions of mathematical finance in this context .",
    "the first one is how to formulate a condition of market viability and relate it to the existence of consistent pricing mechanisms .",
    "the condition @xmath2 stated below postulates that there is no trading strategy which yields a nonnegative gain that is strictly positive on a relevant event ; that is , an event that has positive probability for at least one @xmath1 .",
    "we obtain a version of the `` '' stating that @xmath2 holds if and only if there exists a family @xmath3 of martingale measures which is equivalent to @xmath0 in the sense that @xmath3 and @xmath0 have the same polar sets .",
    "the next question is the one of superhedging : for a contingent claim @xmath4 , what is the minimal price @xmath5 that allows the seller to offset the risk of @xmath4 by trading appropriately in the given stocks and options ?",
    "we show in the `` '' below that @xmath6 $ ] , which corresponds to the absence of a duality gap in the sense of convex analysis , and moreover that an optimal superhedging strategy exists . from these two theorems",
    ", it will follow that the precise range of arbitrage - free prices of @xmath4 is given by the open interval @xmath7 if @xmath8 , and by the singleton @xmath5 otherwise .",
    "this latter case occurs if and only if @xmath4 can be replicated ( up to a polar set ) by trading in the hedging instruments .",
    "finally , we obtain a version of the `` , '' stating that the market is complete ( i.e. , all claims are replicable ) if and only if @xmath3 is a singleton .",
    "in addition to these main financial results , let us mention two probabilistic conclusions that arise from our study .",
    "the first one is a nondominated version of the optional decomposition theorem , stating that a process which is a supermartingale under all of the ( not necessarily equivalent ) martingale measures @xmath9 can be written as the difference of a martingale transform and an increasing process .",
    "second , our theory can be used to prove an intriguing conjecture of @xcite ; namely , that every martingale inequality ( in finite discrete time ) can be reduced to a deterministic inequality in euclidean space ; cf .",
    "remark  [ rk : martineq ] .",
    "the main difficulty in our endeavor is that @xmath0 can be nondominated , which leads to the failure of various tools of probability theory and functional analysis ; in particular , the dominated convergence theorem , komls lemma ( in the sense of @xcite ) and important parts of the theory of @xmath10 spaces . as a consequence ,",
    "we have not been able to reach general results by using separation arguments in appropriate function spaces , which is the classical approach of mathematical finance in the case where @xmath0 is a singleton .",
    "instead , we proceed in a `` local '' fashion ; our basic strategy is to first answer our questions in the case of a one - period market with deterministic initial data and then `` glue '' the solutions together to obtain the multi - period case . to solve the superhedging problem in the one - period case ,",
    "we show in a first step that ( the nontrivial inequality of ) the duality holds for certain approximate martingale measures , and in a second step , we use a strengthened version of the to show that a suitable perturbation allows one to turn an approximate martingale measure into a true one . to perform the gluing",
    ", we tailor our theory such as to be compatible with the classical theory of analytic sets .    in the remainder of the",
    ", we detail the notation , state the main financial results and review the extant literature . in section  [",
    "se : existence ] , we obtain the existence of optimal superhedging strategies ; this part is formulated in a more general setting than the main results because we do not resort to a local analysis . in section  [",
    "se : oneperiod ] , we prove the and the in the one - period case . in section  [ se : multiperiodwithoutopt ] , we obtain the same theorems in the multi - period case , under the hypothesis that only stocks are traded . in section  [ se :",
    "multiperiodwithopt ] , we add the options to the picture and prove the main results ( as well as a slightly more precise form of them ) .",
    "section  [ se : optdecomp ] discusses the optional decomposition theorem , and the collects some results of martingale theory that are used in the body of the paper .",
    "given a measurable space @xmath11 , we denote by @xmath12 the set of all probability measures on @xmath13 .",
    "if @xmath14 is a topological space , @xmath15 denotes its borel @xmath16-field , and we always endow @xmath12 with the topology of weak convergence ; in particular , @xmath12 is polish whenever @xmath17 is polish .",
    "the _ universal completion _ of @xmath13 is the @xmath18-field @xmath19 , where @xmath20 is the @xmath21-completion of @xmath13 . if @xmath14 is polish , @xmath22 is _ analytic _ if it is the image of a borel subset of another polish space under a borel - measurable mapping . a function @xmath23 $ ] is _ upper semianalytic _ if the super - level set @xmath24 is analytic for all @xmath25 . any borel set is analytic , and any analytic set is universally measurable [ i.e. , measurable for the universal completion of @xmath15 ] ; similarly , any borel function is upper semianalytic , and any upper semianalytic function is universally measurable .",
    "we refer to @xcite , chapter  7 , for these facts . given @xmath27",
    ", we define the @xmath21-expectation for _ any _ measurable function @xmath28 by @xmath29:= e_p\\bigl[f^+\\bigr]-e_p \\bigl[f^-\\bigr]\\qquad   \\mbox{with the convention } \\infty-\\infty:= -\\infty.\\ ] ] the term _ random variable _ is reserved for measurable functions with values in @xmath30 .",
    "we shall often deal with a family @xmath31 of measures .",
    "then a subset @xmath22 is called _",
    "@xmath0-polar _ if @xmath32 for some @xmath33 satisfying @xmath34 for all @xmath1 , and a property is said to hold _",
    "@xmath0-quasi surely _ or _",
    "_ if it holds outside a @xmath0-polar set .",
    "( in accordance with this definition , any set is @xmath0-polar in the trivial case @xmath35 . )      let @xmath36 be the time horizon , and let @xmath37 be a polish space .",
    "for @xmath38 , let @xmath39 be the @xmath40-fold cartesian product , with the convention that @xmath41 is a singleton .",
    "we denote by @xmath42 the universal completion of @xmath43 and write @xmath44 for @xmath45",
    ". this will be our basic measurable space and we shall often see @xmath46 as a subspace of @xmath44 . for each @xmath47 and @xmath48 ,",
    "we are given a nonempty convex set @xmath49 of probability measures ; we think of @xmath50 as the set of possible models for the @xmath40th period , given state @xmath51 at time @xmath40 . intuitively , the role of @xmath50 is to determine which events at the `` node '' @xmath52 are negligible ( polar ) , and which ones are relevant ( have positive probability under at least one model ) .",
    "we assume that for each @xmath40 , @xmath53 this ensures that @xmath54 admits a universally measurable selector ; that is , a universally measurable kernel @xmath55 such that @xmath56 for all @xmath57 .",
    "if we are given such a kernel @xmath58 for each @xmath59 , we can define a probability @xmath21 on @xmath14 by fubini s theorem , @xmath60 where we write @xmath61 for a generic element of @xmath62 .",
    "the above formula will be abbreviated as @xmath63 in the sequel .",
    "we can then introduce the set @xmath64 of possible models for the multi - period market up to time @xmath65 , @xmath66 where , more precisely , each @xmath58 is a universally measurable selector of @xmath54 . or equivalently , to state the same in reverse , @xmath0 is the set of all @xmath27 such that any decomposition @xmath63 into kernels @xmath58 satisfies @xmath67 up to a @xmath68-nullset .",
    "let @xmath69 , and let @xmath70 be borel - measurable for all @xmath38 .",
    "we think of @xmath71 as the ( discounted ) prices of @xmath72 traded _ stocks _ at time @xmath40 .",
    "moreover , let @xmath73 be the set of all predictable @xmath74-valued processes , the _ trading strategies_. given @xmath75 , the corresponding wealth process ( from vanishing initial capital ) is the discrete - time integral @xmath76 where @xmath77 is the price increment , and @xmath78 is a shorthand for the inner product @xmath79 on @xmath74",
    ".    moreover , let @xmath80 , and let @xmath81 be borel - measurable .",
    "each @xmath82 is seen as a traded _ option _ which can be bought or sold at time @xmath83 at the price @xmath84 ; without loss of generality , @xmath85 .",
    "following @xcite , the options can be traded only statically ( i.e. , at @xmath83 ) , which accounts for the difference in liquidity and other market parameters compared to stocks . given a vector @xmath86 , the value of the corresponding option portfolio is then given by @xmath87 , and a pair @xmath88 is called a _ semistatic hedging strategy . _    as in any model of mathematical finance , a no - arbitrage condition is needed for the model to be viable .",
    "the following formulation seems natural in our setup .",
    "[ def : na ] condition @xmath2 holds if for all @xmath88 , @xmath89    we observe that @xmath2 reduces to the classical condition `` @xmath90 '' in the case where @xmath0 is a singleton .",
    "more generally , if @xmath91 holds for all @xmath1 , then @xmath2 holds trivially , but the converse is false .    the two extreme cases of our setting occur when @xmath0 consists of all measures on @xmath14 and when @xmath0 is a singleton .",
    "[ ex : canonicalsetup ] ( i ) let @xmath92 and let @xmath93 be the coordinate - mapping process ; more precisely , @xmath94 is fixed and @xmath95 for @xmath96 and @xmath97 .",
    "moreover , let @xmath98 for all @xmath52 ; then @xmath0 is simply the collection of all probability measures on @xmath14 .",
    "we emphasize that a @xmath0-q.s .",
    "inequality is in fact a pointwise inequality in this setting , as @xmath0 contains all dirac measures .",
    "consider the case without options ( @xmath99 ) ; we show that @xmath2 holds . indeed",
    ", suppose there exists @xmath75 such that @xmath100 for all @xmath101 and @xmath102 for some @xmath103 .",
    "then , if we consider the smallest @xmath104 such that @xmath105 and let @xmath106 , the path @xmath107 satisfies @xmath108 a contradiction .",
    "we note that in this canonical setup , a contingent claim is necessarily a functional of @xmath93 .",
    "we can generalize this setting by taking @xmath109 for some @xmath110 and defining @xmath93 to be the first @xmath72 coordinates of the coordinate - mapping process .",
    "then , the remaining @xmath111 components play the role of nontradable assets , and we can model claims that depend on additional risk factors .",
    "\\(ii ) suppose we want to retrieve the classical case where we have a single measure @xmath21 .",
    "given @xmath27 , the existence of conditional probability distributions on polish spaces @xcite , theorem  1.1.6 , page 13 , implies that there are borel kernels @xmath112 such that @xmath113 , where @xmath114 is the restriction @xmath115 .",
    "if we then take @xmath116 , the borel - measurability of @xmath117 implies that @xmath118 is borel for all @xmath40 , and we have @xmath119 as desired .",
    "similarly as in the classical theory , the absence of arbitrage will be related to the existence of linear pricing mechanisms .",
    "a probability @xmath120 is a _ martingale measure _ if @xmath93 is a @xmath121-martingale in the filtration @xmath122 .",
    "we are interested in martingale measures @xmath121 which are absolutely continuous with respect to @xmath0 in the sense that @xmath123 whenever @xmath124 is @xmath0-polar ; it seems natural to denote this relation by @xmath125 .",
    "let us also introduce a stronger notion of absolute continuity : we write @xmath126 we shall use this stronger notion , mainly because it is better suited to the theory of analytic sets which will be used extensively later on .",
    "( however , a posteriori , one can easily check that our main results hold also with the weaker notion @xmath125 . )",
    "if @xmath121 is a martingale measure , then @xmath121 is consistent with the given prices of the traded options @xmath82 if @xmath127=0 $ ] for @xmath128 .",
    "we thus define the set @xmath129\\\\[-8pt ] & & \\hphantom{\\bigl\\ { }   q\\mbox { is a martingale measure and } e_q\\bigl[g^i\\bigr]=0\\mbox { for } i=1,\\dots , e \\bigr\\}.\\nonumber\\end{aligned}\\ ] ]    our first main result states that @xmath2 is equivalent to @xmath3 being sufficiently rich , in the sense that any @xmath3-polar set is @xmath0-polar . in this case",
    ", @xmath3 is equivalent to @xmath0 in terms of polar sets , which yields an appropriate substitute for the classical notion of an equivalent martingale measure . in the body of this paper",
    ", we shall work with the seemingly stronger condition ( ii ) below ; it turns out to be the most convenient formulation for our theory .",
    "[ fft ] the following are equivalent :    @xmath2 holds ;    for all @xmath1 there exists @xmath9 such that @xmath130 ;    @xmath0 and @xmath3 have the same polar sets .    the following result , which is the main goal of our study , establishes the dual characterization for the superhedging price @xmath5 of a contingent claim @xmath4 and the existence of an optimal superhedging strategy .",
    "we use the standard convention @xmath131 .",
    "[ st ] let @xmath2 hold , and let @xmath132 be upper semianalytic",
    ". then the minimal superhedging price @xmath133 satisfies @xmath134 \\in(-\\infty,\\infty],\\ ] ] and there exist @xmath88 such that @xmath135-q.s .",
    "we remark that the supremum over @xmath3 is not attained in general .",
    "for instance , if @xmath136 while @xmath93 is constant and @xmath99 , we have @xmath137=\\sup_{\\omega\\in\\omega } f(\\omega)$ ] , which clearly need not be attained . on the other hand , the supremum is attained if , for instance , @xmath4 is a bounded continuous function , and @xmath3 is weakly compact",
    ".    the also yields the following lagrange duality : if @xmath138 is the set of _ all _ martingale measures @xmath139 ( not necessarily consistent with the prices of the options @xmath82 ) , then @xmath140.\\ ] ]    [ rk : martineq ] the implies that every martingale inequality can be derived from a deterministic inequality , in the following sense . consider the canonical setting of example  [ ex : canonicalsetup ] , and let @xmath4 be as in the theorem .",
    "then @xmath3 is the set of all martingale laws , and hence the inequality @xmath141\\leq a$ ] holds for every martingale @xmath142 starting at @xmath143 if and only if @xmath144\\leq a$ ] .",
    "thus the theorem implies that any martingale inequality of the form @xmath141\\leq a$ ] can be deduced from a completely deterministic ( `` pathwise '' ) inequality of the form @xmath145 by taking expectations .",
    "this fact is studied in more detail in @xcite .",
    "a random variable @xmath4 is called _ replicable _ if there exist @xmath146 and @xmath88 such that @xmath147-q.s .",
    "we say that the market is _ complete _ if all borel - measurable functions @xmath132 are replicable .",
    "similarly as in the classical theory , we have the following result .    [ sft ]",
    "let @xmath2 hold and let @xmath132 be upper semianalytic .",
    "the following are equivalent :    @xmath4 is replicable ;    the mapping @xmath148 $ ] is constant ( and finite ) on @xmath3 ;    for all @xmath1 there exists @xmath9 such that @xmath149 and @xmath150=\\pi(f)$ ] .    moreover , the market is complete if and only if @xmath3 is a singleton .",
    "regarding ( iii ) , we remark that the existence of _ one _ @xmath9 with @xmath150=\\pi(f)$ ] is not sufficient for @xmath4 to be replicable . regarding ( ii ) , we observe that if the market is complete , the unique element @xmath9 satisfies @xmath150\\in{\\mathbb{r}}$ ] for all real - valued borel functions @xmath4 .",
    "this readily implies that @xmath121 must be supported by a finite set .",
    "our main financial results are , of course , extensions of the classical case where @xmath0 is a singleton ; see , for example , @xcite and the references therein . our local way of proving the is certainly reminiscent of arguments for the dalang ",
    "morton  willinger theorem in @xcite and @xcite . to the best of our knowledge , our approach to the is new , even in the classical case .    in the setting where no options are traded , and @xmath0 is supposed to consist of martingale measures in the first place",
    ", there is a substantial literature on superhedging under `` volatility uncertainty , '' where @xmath93 is a ( continuous - time ) process with continuous trajectories ; see , among others , @xcite .",
    "these results were obtained by techniques which do not apply in the presence of jumps . indeed ,",
    "an important difference to our setting is that when @xmath93 is a continuous ( hence predictable ) process , and each @xmath1 corresponds to a complete market , the optional decomposition coincides with the doob  meyer decomposition , which allows for a constructive proof of the . in discrete time",
    ", a duality result ( without existence ) for a specific topological setup was obtained in @xcite ; see also @xcite for the case of american and game options . a comparable result for",
    "the continuous case was given in @xcite .",
    "the existence of optimal superhedging strategies in the discrete - time case was established in @xcite for the one - dimensional case @xmath151 ; its result is generalized by our theorem  [ th : optimalstrategy ] to the multidimensional case , with a much simpler proof using the arguments of @xcite .",
    "an abstract duality result was also provided in @xcite , but it remained open whether there is a duality gap with respect to ( @xmath16-additive ) martingale measures .    roughly speaking , the model - free approach corresponds to the case where @xmath0 consists of all probability measures on @xmath14 . starting with @xcite",
    ", one branch of this literature is devoted to finding explicitly a model - independent semi - static hedging strategy for a specific claim , such as a barrier option , when a specific family of options can be traded , such as call options at specific maturities .",
    "we refer to the survey @xcite which features an extensive list of references .",
    "needless to say , explicit results are not within reach in our general setting .    a more related branch of this literature , starting with @xcite , studies when a given set ( finite or not ) of option prices is generated by a martingale measure and , more generally , is consistent with absence of arbitrage ; see @xcite .",
    "the recent paper @xcite is the closest to our study . in the setting of example  [ ex : canonicalsetup ] with @xmath151 , it provides a version of the and the absence of a duality gap , possibly with infinitely many options , under certain continuity and compactness conditions .",
    "the arguments hinge on the weak compactness of a certain set of measures ; to enforce the latter , it is assumed that options with specific growth properties can be traded .",
    "adapting the terminology of the previous papers to our context , our condition @xmath2 excludes both model - independent and model - dependent arbitrage .",
    "this is crucial for the validity of the in a general context .",
    "for instance , it is not hard to see that the theorem does not hold under the no - arbitrage condition of @xcite ; the reason is that , in a typical case , the superhedging price @xmath5 will be arbitrage - free for some models @xmath1 and fail to be so for others . on a related note ,",
    "let us stress that the equivalence in our version of the provides not just one martingale measure as in @xcite , but a family @xmath3 equivalent to @xmath0 .",
    "this concept seems to be new , and is important for our general version of the .",
    "finally , let us remark that in general , optimal superhedging strategies do not exist when infinitely many options are traded .",
    "in the case where all options ( or equivalently , all call options ) at one or more maturities are available for static hedging , consistency with the option prices is equivalent to a constraint on the marginals of the martingale measures . in this case , the problem dual to superhedging is a so - called martingale optimal transport problem .",
    "following work of beiglbck , henry - labordre and penkner @xcite in discrete time and galichon , henry - labordre and touzi @xcite in continuous time , this can be used to prove the absence of a duality gap under certain regularity conditions , and in specific cases , to characterize a dual optimizer and a superhedging strategy .",
    "see also @xcite for recent developments .",
    "the present study is also related to the theory of nonlinear expectations , and we make use of ideas developed in @xcite in that context . in particular , the dynamic version of the superhedging price used in the proof of the in section  [ se : multiperiodwithoutopt ] takes the form of a conditional sublinear expectation . in that section ,",
    "we also make heavy use of the theory of analytic sets and related measurable selections ; see @xcite for an extensive survey .",
    "in this section , we obtain the existence of optimal superhedging strategies via an elementary closedness property with respect to pointwise convergence .",
    "the technical restrictions imposed on the structure of @xmath152 and @xmath93 in the are not necessary for this , and so we shall work in a more general setting : for the remainder of this section , @xmath0 is any nonempty collection of probability measures on a general measurable space @xmath44 with filtration @xmath153 , and @xmath154 is any collection of @xmath155-measurable , @xmath74-valued random variables @xmath71 . to wit , the process @xmath93 is _ not necessarily adapted_. the purpose of this unusual setup is the following .",
    "static hedging with options can be incorporated as a special case of a non - adapted stock : suppose we want to model dynamic trading in ( typically adapted ) stocks @xmath156 as well as static trading in @xmath155-measurable random variables ( options ) @xmath157 at initial prices @xmath158 ( @xmath155-measurable at least , but typically @xmath159-measurable )",
    ". then we can define the @xmath160 dimensional process @xmath161 by @xmath162 for @xmath163 and @xmath164 for @xmath165 . since @xmath166 and @xmath167 for @xmath168 , dynamic trading in @xmath161 is then equivalent to dynamic trading in @xmath93 and static ( @xmath159-measurable ) trading in @xmath157 .    in view of the previous remark",
    ", we do not have to consider the case with options explicitly ; that is , we take @xmath99",
    ". the only role of the filtration is to determine the set @xmath73 of trading strategies ; as in the , this will be the set of all predictable processes .",
    "( the arguments in this section could easily be extended to situations such as portfolio constraints . ) for @xmath75 , the wealth process @xmath169 is defined as in ( [ eq : defsint ] ) , and the condition @xmath2 says that @xmath170-q.s . implies @xmath171-q.s .",
    "we write @xmath172 for the set of all nonnegative random variables .",
    "the following result states that the cone @xmath173 of all claims which can be superreplicated from initial capital @xmath174 is closed under pointwise convergence .",
    "[ th : closedness ] let @xmath175 .",
    "if @xmath2 holds , then @xmath173 is closed under @xmath0-q.s .",
    "convergence ; that is , if @xmath176 and @xmath177 is a random variable such that @xmath178-q.s .",
    ", then @xmath179 .    before",
    "stating the proof , let us show how this theorem implies the existence of optimal superreplicating strategies .",
    "[ th : optimalstrategy ] let @xmath2 hold , and let @xmath4 be a random variable .",
    "then @xmath180 and there exists @xmath75 such that @xmath181-q.s .",
    "the claim is trivial if @xmath182 .",
    "suppose that @xmath183 .",
    "then , for all @xmath184 , there exists @xmath185 such that @xmath186-q.s . and hence @xmath187 that is , @xmath188 for all @xmath184",
    ". now theorem  [ th : closedness ] yields that @xmath189 is in @xmath173 , which clearly contradicts @xmath2 .    on the other hand , if @xmath5 is finite , then @xmath190 for all @xmath184 and thus @xmath191 by theorem",
    "[ th : closedness ] , which yields the existence of @xmath192 .",
    "proof of theorem  [ th : closedness ] we follow quite closely the arguments from @xcite ; as observed in @xcite , they can be used even in the case where @xmath93 is not adapted .",
    "let @xmath193 be a sequence in @xmath173 which converges @xmath0-q.s . to a random variable @xmath177",
    "; we need to show that @xmath194 for some @xmath195 and @xmath196 .",
    "we shall use an induction over the number of periods in the market .",
    "the claim is trivial when there are zero periods .",
    "hence , we show the passage from @xmath197 to @xmath65 periods ; more precisely , we shall assume that the claim is proved for any market with dates @xmath198 , and we deduce the case with dates @xmath199 .    for any real matrix @xmath142 ,",
    "let @xmath200 be the number of rows in @xmath142 which vanish identically .",
    "now let @xmath201 be the random @xmath202-matrix whose columns are given by the vectors @xmath203 .",
    "then @xmath204 is a random variable with values in @xmath205 . if @xmath206-q.s .",
    ", we have @xmath207 for all @xmath208 , so that setting @xmath209 , we conclude immediately by the induction assumption . for the general case ,",
    "we use another induction over @xmath210 ; namely , we assume that the result is proved whenever @xmath211-q.s . , and we show how to pass to @xmath212 .    indeed , assume that @xmath213 ; we shall construct @xmath192 separately on finitely many sets forming a partition of @xmath14 . consider first the set @xmath214 by a standard argument ( e.g. , @xcite , lemma  2 ) , we can find @xmath159-measurable random indices @xmath215 such that on @xmath37 , @xmath216 converges pointwise to a ( finite ) @xmath159-measurable random vector @xmath217 . as the sequence @xmath218 converges to @xmath219-q.s . on @xmath37",
    ", we can now apply the induction assumption to obtain @xmath220 and @xmath221 such that @xmath222 and therefore @xmath223 on @xmath37 .",
    "it remains to construct @xmath192 on @xmath224 let @xmath225 as @xmath226 , there exist @xmath159-measurable random indices @xmath215 such that @xmath227 converges pointwise to an @xmath159-measurable random vector @xmath228 , and clearly @xmath229 on @xmath230 .",
    "moreover , on @xmath230 , we have @xmath231 and hence @xmath232 is the @xmath0-q.s .",
    "limit of @xmath233 by the induction assumption , it follows that there exist @xmath234 such that @xmath235 on @xmath236 .",
    "therefore , @xmath237 since otherwise the trading strategy @xmath238 would violate@xmath2 . as @xmath229 on @xmath230 , we have that for every @xmath239 , at least one component @xmath240 of @xmath241 is nonzero .",
    "therefore , @xmath242 defines an @xmath159-measurable partition of @xmath230 .",
    "we then consider the vectors @xmath243 note that @xmath244 by ( [ eq : gnonneg ] ) .",
    "hence , we still have @xmath245 .",
    "however , on @xmath230 , the resulting matrix @xmath246 now has @xmath247 since we have created an additional vanishing row : the @xmath248th component of @xmath249 vanishes on @xmath250 by construction , while the @xmath248th row of @xmath201 can not vanish on @xmath251 by the definition of @xmath228 .",
    "we can now apply the induction hypothesis for indices greater or equal to @xmath252 to obtain @xmath192 on @xmath230 . recalling that @xmath253",
    ", we have shown that there exist @xmath75 and @xmath221 such that @xmath194 .",
    "in this section , we prove the and the in the one - period case ; these results will serve as building blocks for the multi - period case .",
    "we consider an arbitrary measurable space @xmath44 with a filtration @xmath254 , where @xmath255 , and a nonempty convex set @xmath64 .",
    "the stock price process is given by a deterministic vector @xmath94 and an @xmath256-measurable , @xmath74-valued random vector @xmath257 .",
    "we write @xmath258 for @xmath259 and note that @xmath121 is a martingale measure simply if @xmath260=0 $ ] ; recall the convention ( [ eq : conventionexpectation ] ) .",
    "moreover , we have @xmath261 .",
    "we do not consider hedging with options explicitly ( i.e. , we again take @xmath99 ) as there is no difference between options and stocks in the one - period case .",
    "thus we have @xmath262=0\\}$ ] .      in the following version of the fundamental theorem",
    ", we omit the equivalent condition ( ii@xmath263 ) stated in the ; it is not essential , and we shall get back to it only in remark  [ rk : proofsformainres ] .    [ th : ftap1 ] the following are equivalent :    @xmath2 holds ;    for all @xmath1 there exists @xmath9 such that @xmath130 .    for the proof",
    ", we first recall the following well - known fact ; cf .",
    "@xcite , theorem vii.57 , page 246 .",
    "[ le : integrableprobab ] let @xmath264 be a sequence of random variables , and let @xmath27 .",
    "there exists a probability measure @xmath265 with bounded density @xmath266 such that @xmath267<\\infty$ ] for all @xmath208 .",
    "the following lemma is a strengthening of the nontrivial implication in theorem  [ th : ftap1 ] . rather than just showing the existence of a martingale measure ( i.e. , @xmath268=0 $ ] for some @xmath269 ) ,",
    "we show that the vectors @xmath268 $ ] fill a relative neighborhood of the origin ; this property will be of key importance in the proof of the duality .",
    "we write @xmath270 for the relative interior of a set @xmath271 .    [",
    "le : relint ] let @xmath2 hold , and let @xmath4 be a random variable",
    ". then @xmath272\\dvtx   r\\in{\\mathfrak{p}}(\\omega ) , r \\lll{\\mathcal{p } } , e_r\\bigl[|\\delta s|+|f|\\bigr]<\\infty \\bigr\\}\\subseteq{\\mathbb{r}}^d.\\ ] ] similarly , given @xmath1 , we also have @xmath272\\dvtx   r\\in{\\mathfrak{p}}(\\omega ) , p \\ll r \\lll{\\mathcal{p } } , e_r\\bigl[|\\delta s|+|f|\\bigr]<\\infty \\bigr\\}\\subseteq{\\mathbb{r}}^d.\\ ] ]    we show only the second claim ; the first one can be obtained by omitting the lower bound @xmath21 in the subsequent argument .",
    "we fix @xmath21 and @xmath4 ; moreover , we set @xmath273 for @xmath274 and @xmath275<\\infty\\bigr\\}.\\ ] ] note that @xmath276 as a consequence of lemma  [ le : integrableprobab ] .",
    "given @xmath277 , we denote @xmath278\\dvtx   r\\in\\theta\\bigr\\}\\subseteq { \\mathbb{r}}^k;\\ ] ] then our claim is that @xmath279 for @xmath280 .",
    "it is convenient to show more generally that @xmath281 for all @xmath282 and all @xmath274 .",
    "we proceed by induction .",
    "consider first @xmath283 and @xmath282 ; then @xmath284 consists of a single number @xmath285 . if @xmath286 , the result holds trivially , so",
    "we suppose that there exists @xmath287 such that @xmath288 \\neq0 $ ] .",
    "we focus on the case @xmath288 > 0 $ ] ; the reverse case is similar .",
    "then , @xmath2 implies that @xmath289 satisfies @xmath290 for some @xmath291 . by replacing @xmath292 with @xmath293",
    "we also have that @xmath294 , and finally lemma  [ le : integrableprobab ] allows to replace @xmath295 with an equivalent probability @xmath296 such that @xmath297<\\infty$ ] ; as a result , we have found @xmath298 satisfying @xmath299<0 $ ] . but then @xmath300 defined by @xmath301}\\ ] ] satisfies @xmath302 and @xmath303<0 $ ] for @xmath304 chosen small enough .",
    "now set @xmath305 for each @xmath306 ; then @xmath307\\dvtx   \\lambda\\in(0,1 ) \\bigr\\ } \\subseteq{\\operatorname{ri}}\\bigl\\ { e_{r}\\bigl[\\delta s^i\\bigr]\\dvtx   r \\in\\theta\\bigr\\},\\ ] ] which was the claim for @xmath283 .",
    "let @xmath308 be such that @xmath279 for all @xmath309 ; we show hat @xmath279 for all @xmath277 .",
    "suppose that there exists @xmath310 such that @xmath311 .",
    "then , the convex set @xmath312 can be separated from the origin ; that is , we can find @xmath313 such that @xmath314 and @xmath315\\dvtx   r\\in\\theta \\biggr\\}.\\ ] ] using an argument similar to that which precedes ( [ eq : densityargumentforrelint ] ) , this implies that @xmath316-q.s .",
    ", and thus @xmath317-q.s . by @xmath2 . as @xmath314",
    ", there exists @xmath318 such that @xmath319 , and we obtain that @xmath320 using the definition of the relative interior , the assumption that @xmath311 then implies that @xmath321 , where @xmath322 is the vector obtained from @xmath284 by deleting the @xmath323th entry .",
    "this contradicts our induction hypothesis .",
    "proof of theorem  [ th : ftap1 ] ( i ) implies ( ii ) : this is a special case of lemma  [ le : relint ] , applied with @xmath324 .",
    "\\(ii ) implies ( i ) : let ( ii ) hold , and let @xmath325 be such that @xmath326-q.s .",
    "suppose that there exists @xmath1 such that @xmath327 . by ( ii ) , there exists a martingale measure @xmath121 such that @xmath328 .",
    "thus @xmath329 , contradicting that @xmath330=0 $ ]",
    ".      we can now establish the in the one - period case .",
    "recall that convention ( [ eq : conventionexpectation ] ) is in force .",
    "[ th : duality1 ] let @xmath2 hold , and let @xmath4 be a random variable",
    ". then @xmath331 = \\pi(f ) : = \\inf \\bigl\\{x\\in{\\mathbb{r}}\\dvtx   \\exists h\\in { \\mathbb{r}}^d\\mbox { such that } x+ h\\delta s\\geq f \\ { \\mathcal{p}}\\mbox{-q.s . } \\bigr\\}.\\nonumber \\\\\\end{aligned}\\ ] ] moreover , @xmath332 , and there exists @xmath325 such that @xmath333-q.s .",
    "the last statement is a consequence of theorem  [ th : optimalstrategy ] . for the proof of ( [ eq : dualityoneperiod ] )",
    ", the inequality `` @xmath334 '' is the nontrivial one ; that is , we need to find @xmath335 such that @xmath336\\to\\pi(f)$ ] .",
    "our construction proceeds in two steps . in the subsequent lemma",
    ", we find `` approximate '' martingale measures @xmath337 such that @xmath338\\to\\pi(f)$ ] ; in its proof , it is important to relax the martingale property as this allows us to use arbitrary measure changes . in the second step ,",
    "we replace @xmath337 by true martingale measures , on the strength of the fundamental lemma : it implies that if @xmath339 is any probability with @xmath340 $ ] close to the origin , then there exists a perturbation of @xmath339 which is a martingale measure .",
    "[ le : approxoptimalmartmeas ] let @xmath2 hold , and let @xmath4 be a random variable with @xmath341 . there exist probabilities @xmath342 , @xmath184 such that @xmath343\\to0 \\quad \\mbox{and}\\quad   e_{r_n}[f]\\to0.\\ ] ]    it follows from lemma  [ le : integrableprobab ] that the set @xmath344",
    "< \\infty \\bigr\\}\\ ] ] is nonempty .",
    "introduce the set @xmath345\\dvtx",
    "p\\in\\theta \\bigr\\ } \\subseteq{\\mathbb{r}}^{d+1};\\ ] ] then our claim is equivalent to @xmath346 , where @xmath347 denotes the closure of @xmath348 in @xmath349 .",
    "suppose for contradiction that @xmath350 , and note that @xmath348 is convex because @xmath0 is convex .",
    "thus , @xmath351 can be separated strictly from the origin ; that is , there exist @xmath352 with @xmath353 and @xmath354 such that @xmath355.\\ ] ] using again a similar argument as before ( [ eq : densityargumentforrelint ] ) , this implies that @xmath356 suppose that @xmath357 ; then this yields that @xmath358 which implies that @xmath359 and thus contradicts the assumption that @xmath360 .",
    "hence , we must have @xmath361 . but as @xmath362 , there exists @xmath363 such that @xmath364-q.s . , and then ( [ eq : proofapproxoptmartmeas ] ) yields @xmath365 which contradicts @xmath2 .",
    "this completes the proof .",
    "[ le : martingalecorrector ] let @xmath2 hold , let @xmath4 be a random variable and let @xmath366 be such that @xmath367 and @xmath368<\\infty $ ]",
    ". then there exists @xmath9 such that @xmath369<\\infty$ ] and @xmath370-e_r[f]\\bigr| \\leq c \\bigl(1 + \\bigl|e_{r}[f]\\bigr| \\bigr)\\bigl|e_{r}[\\delta s]\\bigr|,\\ ] ] where @xmath371 is a constant independent of @xmath339 and @xmath121 .",
    "let @xmath372<\\infty\\}$ ] and @xmath373\\dvtx   r'\\in\\theta\\bigr\\}.\\ ] ] if @xmath374 , then @xmath287 is itself a martingale measure , and we are done .",
    "so let us assume that the vector space @xmath375 has dimension @xmath376 , and let @xmath377 be an orthonormal basis .",
    "lemma  [ le : relint ] shows that @xmath378 ; hence , we can find @xmath379 and @xmath380 such that @xmath381=\\pm e_{i},\\qquad   1\\leq i\\leq k.\\ ] ] note also that @xmath382 do not depend on @xmath339 .",
    "let @xmath383 be such that @xmath384=\\sum_{i=1}^{k}\\lambda_{i}e_{i}$ ] .",
    "then we have @xmath385|$ ] and @xmath386=\\int\\delta s \\,d\\mu\\qquad   \\mbox{for } \\mu:= \\sum _ { i=1}^{k } \\lambda_i^+ \\alpha^{+}_{i } p^{+}_{i } + \\lambda_i^-\\alpha^{-}_{i } p^{-}_{i},\\ ] ] where @xmath387 and @xmath388 denote the positive and the negative part of @xmath389 .",
    "define the probability @xmath121 by @xmath390 then @xmath391 and @xmath392=0 $ ] by construction .",
    "moreover , @xmath393-e_r[f]\\bigr| & = & \\biggl{\\vert}\\frac{1}{1+\\mu(\\omega)}\\int f \\,d\\mu - \\frac{\\mu(\\omega ) } { 1+\\mu(\\omega ) } e_r[f]\\biggr{\\vert}\\\\ & \\leq&\\biggl{\\vert}\\int f \\,d\\mu\\biggr{\\vert}+ \\mu(\\omega ) \\bigl{\\vert}e_r[f]\\bigr{\\vert}\\\\ & \\leq & c|\\lambda| \\bigl(1 + \\bigl|e_r[f]\\bigr|\\bigr),\\end{aligned}\\ ] ] where @xmath394 is a constant depending only on @xmath395 and @xmath396 $ ] . it remains to recall that @xmath397 the last claim holds by theorem  [ th : optimalstrategy ] , so @xmath398 .",
    "let us first assume that @xmath4 is bounded from above ; then @xmath399 , and by a translation we may even suppose that @xmath360 . by theorem  [ th : ftap1 ]",
    ", the set @xmath3 of martingale measures is nonempty ; moreover , @xmath150\\leq\\pi(f)=0 $ ] for all @xmath9 by lemma  [ le : easyineq ] .",
    "thus , we only need to find a sequence @xmath335 such that @xmath336\\to0 $ ] .",
    "indeed , lemma  [ le : approxoptimalmartmeas ] yields a sequence @xmath342 such that @xmath400\\to0 $ ] and @xmath338\\to0 $ ] . applying lemma  [ le : martingalecorrector ] to each @xmath337",
    ", we obtain a sequence @xmath401 such that @xmath402<\\infty$ ] and @xmath403-e_{r_n}[f]\\bigr| \\leq c \\bigl(1 + \\bigl|e_{r_n}[f]\\bigr|\\bigr)\\bigl|e_{r_n}[\\delta s]\\bigr|\\to0;\\ ] ] as a result , we have @xmath336\\to0 $ ] as desired .    it remains to discuss the case where @xmath4 is not bounded from above . by the previous argument",
    ", we have @xmath404 = \\pi(f \\wedge n ) , \\qquad n\\in{\\mathbb{n}};\\ ] ] we pass to the limit on both sides . indeed ,",
    "on the one hand , we have @xmath405 \\nearrow\\sup _ { q\\in{\\mathcal{q}}}e_q[f]\\ ] ] by the monotone convergence theorem ( applied to all @xmath121 such that @xmath406<\\infty$ ] ) . on the other hand",
    ", it also holds that @xmath407 because if @xmath408 , then @xmath409 for all @xmath208 and thus @xmath410 by theorem  [ th : closedness ] , and in particular @xmath411 .",
    "in this section , we establish the and the in the market with @xmath65 periods , in the case where only stocks are traded .",
    "we first fix some terminology .",
    "let @xmath44 be any measurable space , and let @xmath412 be a topological space .",
    "a mapping @xmath413 from @xmath14 into the power set of @xmath412 will be denoted by @xmath414 and called a random set or a set - valued mapping .",
    "we say that @xmath413 is measurable ( in the sense of set - valued mappings ) if @xmath415 it is called closed - valued if @xmath416 is closed for all @xmath101 .",
    "[ rk : setmeasurabilityspecialcases ] the mapping @xmath413 is called weakly measurable if @xmath417 this condition is indeed weaker than ( [ eq : defmblsetvalued ] ) , whenever @xmath412 is metrizable @xcite , lemma  18.2 , page 593 . if @xmath418 , then ( [ eq : defweaklymblsetvalued ] ) is equivalent to ( [ eq : defmblsetvalued ] ) ; cf .",
    "@xcite , proposition  1a .",
    "another useful notion of measurability refers to the graph of @xmath413 , defined as @xmath419 in particular , if @xmath14 and @xmath412 are polish spaces and @xmath420 is analytic , then @xmath413 admits a universally measurable selector @xmath421 on the ( universally measurable ) set @xmath422 ; that is , @xmath423 satisfies @xmath424 for all @xmath51 such that @xmath425 .",
    "given a nonempty family @xmath426 of probability measures on @xmath427 , let @xmath428 then @xmath429 is the smallest closed set @xmath430 such that @xmath431 for all @xmath432 . in particular , if @xmath64 , @xmath433 is measurable , and @xmath434 is the associated family of laws , then @xmath435 is the smallest closed set @xmath430 such that @xmath436 for all @xmath1 .",
    "let @xmath437 be a countable basis of the topology of @xmath74 and let @xmath438 . since the intersection @xmath439 is countable , we see that @xmath440 for all @xmath432 .",
    "the rest is clear .",
    "[ le : supportmbl ] let @xmath441 be polish spaces , let @xmath442 have nonempty values and analytic graph , and let @xmath443 be borel .",
    "then the random set @xmath444 , @xmath445 is closed - valued and universally measurable . moreover , its polar cone @xmath446 , @xmath447 is nonempty - closed - valued and universally measurable , and it satisfies @xmath448    consider the mapping @xmath449 which associates to @xmath101 and @xmath450 the law of @xmath451 under @xmath21 , @xmath452 if @xmath453 is continuous and bounded , it is elementary to check that @xmath454 is separately continuous [ using the weak convergence on @xmath455 , as always ] and thus borel .",
    "a  monotone class argument then shows that @xmath449 is borel whenever @xmath453 is borel .",
    "consider also the random set consisting of the laws of @xmath451 , @xmath456 its graph is the image of @xmath457 under the borel mapping @xmath458 ; in particular , @xmath459 is again analytic by @xcite , proposition  7.40 , page 165 .",
    "now let @xmath460 be an open set ; then @xmath461 where @xmath462 denotes the canonical projection @xmath463 .",
    "since @xmath464 is semicontinuous and in particular borel , this shows that @xmath465 is the continuous image of an analytic set , thus analytic and in particular universally measurable . in view of remark  [ rk : setmeasurabilityspecialcases ] , it follows that @xmath466 is universally measurable as claimed .",
    "moreover , @xmath466 is closed - valued by its definition .",
    "finally , the polar cone @xmath467 is then also universally measurable @xcite , proposition  1h , corollary  2 t , and it is clear that @xmath467 is closed - valued and contains the origin .    it remains to prove ( [ eq : polarconeqs ] ) .",
    "let @xmath101 .",
    "clearly , @xmath468 implies that @xmath469 for all @xmath470 , so @xmath471 is contained in the right - hand side of ( [ eq : polarconeqs ] ) .",
    "conversely , let @xmath472 ; then there exists @xmath473 such that @xmath474 , and thus @xmath475 for all @xmath476 in an open neighborhood @xmath477 of @xmath478 . by the minimality property of the support @xmath479 , it follows that there exists @xmath470 such that @xmath480 .",
    "therefore , @xmath481 and @xmath471 is not contained in the right - hand side of ( [ eq : polarconeqs ] ) .",
    "the assertion of lemma  [ le : supportmbl ] can not be generalized to the case where @xmath453 is universally measurable instead of borel ( which would be quite handy in section  [ se : superhedmultiperiod ] below ) . indeed , if @xmath482 $ ] , @xmath483 and @xmath484 for some @xmath485 , then @xmath486 .",
    "but there exists a universally measurable subset @xmath271 of @xmath487\\times[0,1]$ ] whose projection is not universally measurable ; cf .",
    "the proof of @xcite , 439 g .",
    "we now consider the setup as detailed in section  [ se : intromainres ] , for the case when there are no options ( @xmath99 ) . in brief , @xmath488 , where @xmath489 is the @xmath40-fold product of a polish space @xmath37 ( and often identified with a subset of @xmath14 ) and @xmath490 is the universal completion of @xmath491 .",
    "the set @xmath0 is determined by the random sets @xmath492 , which have analytic graphs , and @xmath71 is @xmath43-measurable .",
    "it will be convenient to write @xmath493 as a function on @xmath494 , @xmath495 since the random variable @xmath496 on @xmath37 will be of particular interest .",
    "indeed , @xmath497 determines a one - period market on @xmath498 under the set @xmath49 . endowed with deterministic initial data ,",
    "this market is of the type considered in section  [ se : oneperiod ] , and we shall write @xmath499 for the no - arbitrage condition in that market .",
    "the following result contains the for the multi - period market , and also shows that absence of arbitrage in the multi - period market is equivalent to absence of arbitrage in all the one - period markets , up to a polar set .",
    "[ th : ftap ] the following are equivalent :    @xmath2 holds ;    @xmath500 is @xmath0-polar for all @xmath501 ;    for all @xmath1 there exists @xmath9 such that @xmath130 .    before stating the proof ,",
    "let us isolate some preliminary steps .",
    "[ le : nalocal ] let @xmath502 .",
    "the set @xmath503 is universally measurable , and if @xmath2 holds , then @xmath504 is @xmath0-polar .",
    "we fix @xmath40 and set @xmath505 for @xmath48 .",
    "let @xmath506 , and let @xmath507 be its polar cone .",
    "our first claim is that @xmath508 indeed , suppose that @xmath509 ; then ( [ eq : polarconeqs ] ) shows that @xmath510-q.s .",
    "implies @xmath511-q.s . , and hence @xmath499 holds . on the other hand , if there exists @xmath468 such that @xmath512 , then we have @xmath513-q.s . while @xmath514 is not @xmath515-polar , meaning that @xmath499 is violated .",
    "therefore , ( [ eq : naandsupport ] ) holds .",
    "since @xmath516 is universally measurable by lemma  [ le : supportmbl ] , it follows from the representation ( [ eq : naandsupport ] ) ( and , e.g. , @xcite , proposition  1a ) that @xmath504 is universally measurable .",
    "it remains to show that @xmath504 is @xmath0-polar under @xmath2 .",
    "suppose for contradiction that there exists @xmath517 such that @xmath518 ; then we need to construct ( measurable ) arbitrage strategies @xmath519 and measures @xmath520 under which @xmath521 makes a riskless profit with positive probability , for @xmath522 .",
    "in other words , we need to select @xmath523-a.s . from @xmath524>0\\bigr\\},\\qquad   \\omega\\in n_t.\\ ] ] to this end , note that by modifying as in @xcite , lemma  7.27 , page 173 each member of a universally measurable castaing representation @xcite , corollary 18.14 , page 601 of @xmath467 , we can find a borel - measurable mapping @xmath525 with nonempty closed values such that @xmath526 this implies that @xmath527 is borel @xcite , theorem  18.6 , page 596 .",
    "let @xmath528>0\\bigr\\},\\qquad \\omega\\in\\omega_t.\\ ] ] after using a monotone class argument to see that the function @xmath529\\ ] ] is borel , we deduce that ( with a minor abuse of notation ) @xmath530",
    "\\cap \\bigl[{\\mathfrak{p}}(\\omega _ 1)\\times{\\operatorname{graph}}\\bigl(\\lambda^\\circ _ { * } \\bigr)\\bigr ] \\cap\\{\\psi>0\\}\\ ] ] is an analytic set .",
    "now , we can apply the jankov ",
    "von neumann theorem @xcite , proposition  7.49 , page 182 to obtain a universally measurable function @xmath531 such that @xmath532 on @xmath533 .",
    "by the definition of @xmath504 and ( [ eq : lambdastar ] ) , we have @xmath534 so that @xmath471 is @xmath523-a.s . an arbitrage on @xmath504 . on the universally measurable @xmath523-nullset @xmath535",
    ", we may redefine @xmath536 to ensure that @xmath471 takes values in @xmath467 .",
    "similarly , on @xmath537 , we may define @xmath21 to be any universally measurable selector of @xmath54 .",
    "setting @xmath538 and @xmath539 for @xmath540 , we have thus defined @xmath75 and @xmath541 such that @xmath542 and @xmath543-q.s . for all @xmath101",
    "( [ eq : polarconeqs ] ) . as any @xmath544 satisfies a decomposition of the form @xmath545 for some selector @xmath546 of @xmath54 , fubini s theorem yields that @xmath170-q.s . on the other hand ,",
    "let @xmath547 where @xmath548 is any universally measurable selector of @xmath549 , for @xmath550 .",
    "then @xmath551 , while @xmath518 and ( [ eq : halmostarbitrage ] ) imply that @xmath552 .",
    "this contradicts @xmath2 and completes the proof that @xmath504 is @xmath0-polar .",
    "we recall the following result of doob ; it based on the fact that the borel @xmath16-field of @xmath37 is countably generated ; see @xcite , theorem v.58 , page 52 and the subsequent remark .    [",
    "le : radonnikodymmbl ] let @xmath553 be borel .",
    "there exists a borel function @xmath554 such that @xmath555 for all @xmath556 and @xmath557 ; that is , @xmath558 is a version of the radon  nikodym derivative of the absolutely continuous part of @xmath559 with respect to @xmath560 , on the borel @xmath18-field of @xmath37 .",
    "[ le : martmeasselection ] let @xmath501 , let @xmath561 be borel , and let @xmath562=0\\bigr\\ } , \\qquad \\omega\\in\\omega_t.\\ ] ] then @xmath563 has an analytic graph and there exist universally measurable mappings @xmath564 such that @xmath565    given @xmath48 , we write @xmath566 for @xmath567 .",
    "let @xmath568 be borel .",
    "as a first step , we show that the random set @xmath569\\\\[-8pt ] & & \\hphantom{\\bigl\\ { } e_q\\bigl[x^\\omega\\bigr]=0 , \\hat{p } \\in{\\mathcal{p}}_t(\\omega ) , p(\\omega)\\ll q\\ll\\hat { p}\\bigr\\}\\nonumber\\end{aligned}\\ ] ] has an analytic graph . to this end , let @xmath570=0\\bigr\\ } , \\qquad \\omega \\in\\omega_t.\\ ] ] since the function @xmath571\\ ] ] is borel , we see that @xmath572 next , consider the random set @xmath573 moreover , let @xmath574 + e_{r}[d\\hat{r}/dr],\\end{aligned}\\ ] ] where @xmath575 and @xmath576 are the jointly borel - measurable radon ",
    "nikodym derivatives as in lemma  [ le : radonnikodymmbl ]",
    ". then @xmath577 if and only if @xmath578 .",
    "since lemma  [ le : radonnikodymmbl ] and @xcite , proposition  7.26 , page 134 , imply that @xmath579 is borel , we deduce that @xmath580 as a result , we obtain that @xmath581 \\cap\\phi ( \\omega),\\qquad   \\omega\\in\\omega_t\\ ] ] has an analytic graph . thus , the jankov ",
    "von neumann theorem @xcite , proposition  7.49 , page 182 , allows us to find universally measurable selectors @xmath582 for @xmath583 on the universally measurable set @xmath584 .",
    "setting @xmath585 and @xmath586 on @xmath587 completes the construction , as by theorem  [ th : ftap1 ] , @xmath588 is possible only if @xmath499 does not hold or @xmath589 .",
    "it remains to show that @xmath563 has an analytic graph .",
    "using the same arguments as for the measurability of @xmath590 , but omitting the lower bound @xmath591 , we see that the random set @xmath592\\\\[-8pt ] & & \\hphantom{\\bigl\\ { } e_q\\bigl [ \\delta s_{t+1}(\\omega,\\cdot)\\bigr]=0 , \\hat{p}\\in{\\mathcal{p}}_t ( \\omega ) , q\\ll\\hat{p}\\bigr\\}\\nonumber\\end{aligned}\\ ] ] has an analytic graph . moreover , we observe that @xmath593 is the image of @xmath594 under the canonical projection @xmath595 , so that @xmath593 is indeed analytic .",
    "proof of theorem  [ th : ftap ] lemma  [ le : nalocal ] shows that ( i ) implies ( ii ) .",
    "let ( iii ) hold ; then a set is @xmath0-polar if and only if it is @xmath3-polar .",
    "let @xmath195 be such that @xmath170-q.s . for all @xmath9 , we have @xmath596-a.s . , and",
    "as lemma  [ le : genmartingales ] shows that the local @xmath121-martingale @xmath169 is a true one , it follows that @xmath597-a.s .",
    "hence , ( i ) holds .",
    "it remains to show that ( ii ) implies ( iii ) .",
    "let @xmath1 ; then @xmath598 for some universally measurable selectors @xmath599 of @xmath492 , @xmath600 .",
    "we first focus on @xmath83 .",
    "using theorem  [ th : ftap1 ] , we can find @xmath601 and @xmath602 such that @xmath603 .",
    "next , consider @xmath604 . by changing @xmath605 on a @xmath606-nullset ( hence a @xmath114-nullset )",
    ", we find a borel kernel which takes values in @xmath607-a.e . ; we again denote this kernel by @xmath605 .",
    "as any @xmath608-nullset is a @xmath114-nullset , this change does not affect the identity @xmath609 . in view of ( ii )",
    ", we can apply lemma  [ le : martmeasselection ] to find universally measurable kernels @xmath610 and @xmath611 such that @xmath612 @xmath610 takes values in @xmath613-a.s .",
    "( and hence @xmath614-a.s . ) , and @xmath611 takes values in @xmath615-a.s .",
    "let @xmath616 then ( [ eq : qabscont1 ] ) and fubini s theorem show that @xmath617 and so we can proceed with @xmath618 as above , using @xmath619 instead of @xmath608 as a reference measure , and continue up to @xmath620 . we thus find kernels @xmath621 and we define @xmath622 by construction , we have @xmath623 and @xmath624 ; in particular , @xmath625 . moreover , the fact that @xmath626 holds @xmath627-a.s . and fubini s theorem yield that @xmath93 is a generalized martingale under @xmath121 in the sense stated before lemma  [ le : genmartingales ] .",
    "[ we do not have that @xmath628 , which is the missing part of the martingale property .",
    "] however , lemma  [ le : genmartingales ] and lemma  [ le : locmartmeas ] imply that there exists @xmath629 under which @xmath93 is a true martingale , which completes the proof .",
    "we continue with the same setting as in the preceding subsection ; that is , the setup detailed in section  [ se : intromainres ] for the case when there are no options ( @xmath99 ) .",
    "our next aim is to prove the in the multi - period market where only stocks are traded . to avoid some integrability problems in the subsequent section , we use a slightly smaller set of martingale measures : given a random variable ( `` weight function '' ) @xmath630",
    ", we define @xmath631<\\infty\\}$ ] .",
    "[ th : duality ] let @xmath2 hold , let @xmath630 be a random variable and let @xmath632 be an upper semianalytic function such that @xmath633 . then @xmath634 = \\pi(f):= \\inf \\{x \\in{\\mathbb{r}}\\dvtx   \\exists h\\in{\\mathcal{h}}\\mbox { such that } x+ h{\\stackrel{\\mbox{\\tiny$\\bullet$}}{}}s_t\\geq f\\ { \\mathcal{p}}\\mbox { -q.s . }",
    "\\}.\\ ] ]    we shall give the proof through two key lemmas .",
    "first , we provide a measurable version of the one - step duality ( theorem  [ th : duality1 ] ) .",
    "then , we apply this result in a recursive fashion , where the claim is replaced by a dynamic version of the superhedging price .",
    "the relevance of upper semianalytic functions in this context is that semianalyticity is preserved through the recursion , whereas borel - measurability is not . for the next statement ,",
    "recall the random set @xmath563 introduced in lemma  [ le : martmeasselection ] .",
    "[ le : localsuperhedgeselection ] let @xmath2 hold , let @xmath501 and let @xmath635 be upper semianalytic",
    ". then @xmath636\\ ] ] is upper semianalytic .",
    "moreover , there exists a universally measurable function @xmath637 such that @xmath638 for all @xmath48 such that @xmath499 holds and @xmath639-q.s .",
    "it is easy to see that the mapping @xmath640 $ ] is continuous when @xmath4 is bounded and uniformly continuous . by a monotone class argument",
    ", the same mapping is therefore borel when @xmath4 is bounded and borel . using @xcite , proposition  7.26 , page 134 , and @xcite , proposition  7.48 , page 180 , it follows that @xmath641 $ ] is upper semianalytic when @xmath4 is . after recalling from lemma  [ le : martmeasselection ] that the graph of @xmath563 is analytic , it follows from the projection theorem in the form of @xcite , proposition  7.47 , page 179 , that @xmath642 is upper semianalytic .    to avoid dealing with too many infinities in what follows , set @xmath643",
    "then @xmath644 is universally measurable and we have @xmath645 unless @xmath646 . consider the random set @xmath647 we show below that @xmath648 is universally measurable and that @xmath413 admits a universally measurable selector @xmath649 on that set . before stating the proof , let us check that this fact implies the lemma . indeed",
    ", define also @xmath650 on @xmath651 . for @xmath51 such that @xmath652 , there are two possible cases . either @xmath653 ; then",
    "necessarily @xmath654 , and in this case ( [ eq : onestepsuperhedgele ] ) is trivially satisfied for our choice @xmath655 . or , there exists no @xmath656 solving ( [ eq : onestepsuperhedgele ] ) with @xmath521 replaced by @xmath657 ; but then it follows from theorem  [ th : duality1 ] that we must be in one of three sub - cases : either @xmath522 [ i.e. , @xmath499 fails ] , or @xmath658 is not @xmath515-polar , or @xmath659 is not @xmath515-polar .",
    "in the first two sub - cases , the lemma claims nothing .",
    "if we are not in the first two sub - cases and @xmath659 is not @xmath50-polar , it follows via theorem  [ th : ftap1 ] and lemma  [ le : locmartmeas ] that @xmath654 , so ( [ eq : onestepsuperhedgele ] ) is again trivially satisfied for @xmath655 . on the other hand ,",
    "if @xmath425 , then our selector @xmath521 solves ( [ eq : onestepsuperhedgele ] ) unless @xmath660 ; that is , @xmath661 .",
    "however , it follows from theorem  [ th : duality1 ] that then again either @xmath522 or @xmath658 is not @xmath50-polar .    as a result , it remains to construct a universally measurable selector for @xmath413 . to this end",
    ", it will be necessary to consider the _ difference _ @xmath662 which , in general , fails to be upper semianalytic .",
    "for that reason , we shall consider a larger class of functions . given a polish space @xmath663 , recall that we are calling a function @xmath664 on @xmath665 upper semianalytic if for any @xmath25 , the set @xmath666 is analytic , or equivalently , the nucleus of a suslin scheme on @xmath667 .",
    "let us denote more generally by @xmath668 $ ] the set of all nuclei of suslin schemes on a paving @xmath13 ; the mapping @xmath669 is called the suslin operation .",
    "moreover , let @xmath670 $ ] be the set of all @xmath671-valued functions @xmath664 such that @xmath672 $ ] for all @xmath25 .",
    "hence , if @xmath13 is the borel @xmath16-field of a polish space , @xmath670 $ ] is the set of upper semianalytic functions in the classical sense . however , we shall extend consideration to the class @xmath673 $ ] , where @xmath674 is the universal @xmath18-field on @xmath675 .",
    "it is a convex cone containing both @xmath676 $ ] and the linear space of @xmath677-measurable functions ; in particular , it contains the function @xmath662 .    on the other hand ,",
    "the class @xmath678 $ ] shares the main benefits of the classical upper semianalytic functions .",
    "this is due to the following fact ; it is a special case of @xcite , theorem  5.5 ( by the argument in the proof of that theorem s corollary and the subsequent scholium ) , in conjunction with the fact that @xmath679={\\mathcal{u}}(\\omega_t)$ ] since @xmath674 is universally complete @xcite , proposition  7.42 , page 167 .",
    "[ le : genselectionthm ] let @xmath680 $ ] . then @xmath681 and there exists a @xmath674-measurable mapping @xmath682 such that@xmath683 .",
    "we can now complete the proof of lemma  [ le : localsuperhedgeselection ] by showing that @xmath684 is universally measurable and @xmath413 admits a universally measurable selector @xmath649 on that set .",
    "fix @xmath685 .",
    "given @xmath48 , we have @xmath686 if and only if @xmath687 moreover , we have @xmath688 $ ] as explained above .",
    "note that for any @xmath689 , the condition @xmath690-a.s . holds if and only if @xmath691\\leq0",
    "\\mbox{for all } \\tilde { p}\\ll p,\\ ] ] and by an application of lemma  [ le : integrableprobab ] , it is further equivalent to have this only for @xmath692 satisfying @xmath693<\\infty$ ]",
    ". therefore , we introduce the random set @xmath694<\\infty\\bigr\\}.\\ ] ] by the same arguments as at the end of the proof of lemma  [ le : martmeasselection ] , we can show that @xmath695 has an analytic graph ( in the classical sense ) .",
    "define also @xmath696;\\ ] ] the next step is to show that @xmath697 is universally measurable .",
    "indeed , following the arguments in the very beginning of this proof , the first term in the difference @xmath691= e_{\\tilde{p}}\\bigl[f(\\omega,\\cdot)\\bigr]- { \\mathcal{e}}_t(f ) ' ( \\omega ) - y e_{\\tilde{p}}\\bigl[\\delta s_{t+1}(\\omega,\\cdot)\\bigr]\\ ] ] is an upper semianalytic function of @xmath698 ; that is , in @xmath699 $ ] .",
    "moreover , the second term can be seen as a @xmath700-measurable function of @xmath698 , and the third is even borel . as a result ,",
    "@xmath701 $ ] is in @xmath702 $ ] .",
    "thus , by the projection theorem in the form of lemma  [ le : genselectionthm ] , @xmath703>c \\bigr\\ } \\in{\\mathcal{u}}(\\omega_t)\\ ] ] for all @xmath25 .",
    "that is , @xmath697 is universally measurable for any fixed @xmath471 .    on the other hand , fix @xmath48 and @xmath704 .",
    "then the function @xmath705 is lower semicontinuous because it is the supremum of the continuous functions @xmath706\\wedge m= \\bigl(e_{\\tilde{p}}\\bigl[f(\\omega,\\cdot)\\bigr]- { \\mathcal{e}}_t(f ) ' ( \\omega ) - y e_{\\tilde { p}}\\bigl[\\delta s_{t+1}(\\omega,\\cdot)\\bigr ] \\bigr)\\wedge m\\ ] ] over @xmath707 .",
    "[ to be precise , @xmath708 may be infinite for some @xmath51 . for such @xmath51 ,",
    "the function @xmath705 is semicontinuous in that it is constant .",
    "] by lemma  [ le : semicaratheodory ] below , it follows that @xmath709 is @xmath710-measurable . passing to the supremum over @xmath704",
    ", we obtain that @xmath711 is @xmath712-measurable as well . as a result , we have that @xmath713 now , lemma  [ le : genselectionthm ] yields that @xmath714 and that @xmath413 admits a @xmath715-measurable selector on that set , which completes the proof of lemma  [ le : localsuperhedgeselection ] .",
    "the following statement was used in the preceding proof ; it is a slight generalization of the fact that carathodory functions are jointly measurable .",
    "[ le : semicaratheodory ] let @xmath716 be a measurable space and let @xmath717 be a function such that @xmath718 is @xmath13-measurable for all @xmath719 and @xmath720 is lower semicontinuous for all @xmath721",
    ". then @xmath722 is @xmath723-measurable .",
    "let @xmath724 be a dense sequence in @xmath74 . for all @xmath725 , we have @xmath726 where @xmath727 is the open ball of radius @xmath728 around @xmath729 .",
    "the right - hand side is clearly in @xmath723 .",
    "we now turn to the second key lemma for the proof of theorem  [ th : duality ] .",
    "recall that @xmath730<\\infty\\}$ ] .",
    "[ le : superhedconstruction ] let @xmath2 hold , let @xmath132 be upper semianalytic and bounded from above and let @xmath630 be a random variable such that @xmath633",
    ". then there exists @xmath75 such that @xmath634 + h{\\stackrel{\\mbox{\\tiny$\\bullet$}}{}}s_t \\geq f \\qquad { \\mathcal{p}}\\mbox{-q.s.}\\ ] ]    let @xmath731 ; note that the composition is well defined by lemma  [ le : localsuperhedgeselection ] .",
    "we first show that there exists @xmath195 such that @xmath732 define @xmath733 , and let @xmath124 be the set of all @xmath734 such that @xmath499 fails for some @xmath501 .",
    "then @xmath124 is a universally measurable , @xmath0-polar set by lemma  [ le : nalocal ] . using lemma  [ le : localsuperhedgeselection ] , there exist universally measurable functions @xmath735 such that @xmath736 for all @xmath737 .",
    "recalling that any @xmath1 is of the form @xmath598 for some selectors @xmath58 of @xmath54 , it follows by fubini s theorem that @xmath738 that is , ( [ eq : superhedwithce ] ) holds for @xmath75 defined by @xmath739 .",
    "next , we show that @xmath740;\\ ] ] together with ( [ eq : superhedwithce ] ) , this will imply the result .",
    "( the reverse inequality of this dynamic programming principle is also true , but not needed here . )",
    "recall from below ( [ eq : tildexi ] ) that the graph of the random set @xmath741=0 , \\hat{p}\\in{\\mathcal{p}}_t(\\omega ) , q\\ll\\hat{p}\\bigr\\}\\ ] ] is analytic .",
    "we may see its section @xmath742 as the set of controls for the control problem @xmath743 $ ] ; indeed , @xmath744 is precisely the projection of @xmath742 onto the first component . as in the proof of lemma  [ le : localsuperhedgeselection ]",
    ", we obtain that the reward function @xmath745 $ ] is upper semianalytic .",
    "given @xmath304 , it then follows from the jankov ",
    "von neumann theorem in the form of @xcite , proposition  7.50 , page 184 , that there exists a universally measurable selector @xmath746 of @xmath747 such that @xmath748 is an @xmath749-optimal control ; that is , @xmath750 \\geq\\sup_{q\\in { \\mathcal{q}}_t(\\omega ) } e_q\\bigl[{\\mathcal{e}}^{t+1}(f ) ( \\omega,\\cdot)\\bigr]-{\\varepsilon}\\nonumber\\\\[-8pt]\\\\[-8pt ] \\eqntext{\\mbox{for all $ \\omega$ such that } \\tilde { \\xi}_t(\\omega)\\neq{\\varnothing}.}\\end{aligned}\\ ] ] define also @xmath751 and @xmath752 as an arbitrary ( universally measurable ) selector of @xmath54 on @xmath753 ; note that the latter set is contained in the @xmath0-polar set @xmath124 by theorem  [ th : ftap1 ] .",
    "now let @xmath754 as in the proof of theorem  [ th : ftap ] , we then have @xmath755 ( thus @xmath756 ) , and @xmath93 is a generalized martingale under @xmath757 .",
    "moreover , recalling that @xmath4 is bounded from above , we may apply fubini s theorem @xmath65 times to obtain that @xmath758 \\leq\\cdots\\leq t{\\varepsilon}+ e_{q^{\\varepsilon}}[f].\\ ] ] by lemma  [ le : genmartingales ] and lemma  [ le : locmartmeas ] , there exists @xmath759 such that @xmath760\\geq e_{q^{\\varepsilon}}[f]$ ] .",
    "thus , we have @xmath761.\\ ] ] as @xmath304 was arbitrary , we conclude that ( [ eq : dpp ] ) holds . in view of ( [ eq : superhedwithce ] )",
    ", the proof is complete .",
    "proof of theorem  [ th : duality ] by the same argument as below ( [ eq : dualityproofreductionbddabove ] ) , we may assume that @xmath4 is bounded from above .",
    "the inequality `` @xmath334 '' then follows from lemma  [ le : superhedconstruction ] , whereas the inequality `` @xmath762 '' follows from lemma  [ le : easyineq ] .",
    "in this section , we prove the main results stated in the .",
    "the setting is as introduced in section  [ se : intromainres ] ; in particular , there are @xmath72 stocks available for dynamic trading and @xmath763 options available for static trading .",
    "our argument is based on the results of the preceding section : if @xmath764 , we can apply the already proved versions of the fundamental theorem and the to study the option @xmath765 ; similarly , we shall add the options @xmath766 one after the other in an inductive fashion . to avoid some technical problems in the proof ,",
    "we state the main results with an additional weight function @xmath630 that controls the integrability ; this is by no means a restriction and actually yields a more precise conclusion ( remark  [ rk : proofsformainres ] ) .",
    "we recall the set @xmath3 from ( [ eq : defcq ] ) as well as the notation @xmath767<\\infty\\}$ ] .",
    "[ th : mainweighted ] let @xmath630 be a random variable and suppose that @xmath768 for @xmath128 .",
    "the following are equivalent :    a.   @xmath2 holds ; b.   for all @xmath1 there exists @xmath769 such that @xmath130 .",
    "let @xmath2 hold , and let @xmath632 be an upper semianalytic function such that @xmath633",
    ". then @xmath133 satisfies @xmath770 \\in(-\\infty,\\infty],\\ ] ] and there exist @xmath88 such that @xmath135-q.s .",
    "let @xmath2 hold , and let @xmath632 be an upper semianalytic function such that @xmath633 .",
    "the following are equivalent :    a.   @xmath4 is replicable ; b.   the mapping @xmath148\\in{\\mathbb{r}}$ ] is constant on @xmath771 ; c.   for all @xmath1 there exists @xmath769 such that @xmath149 and @xmath150=\\pi(f)$ ] .",
    "we proceed by induction ; note that if @xmath2 holds for the market with options @xmath772 , then it also holds for the market with options @xmath773 for any @xmath774 .    in the case",
    "@xmath99 , there are no traded options . then ( a ) follows from theorem  [ th : ftap ] and lemma  [ le : locmartmeas ] , and ( b ) holds by theorem  [ th : duality ] . to see ( c )",
    ", suppose that ( i ) holds ; that is , @xmath775-q.s .",
    "for some @xmath776 and @xmath75 . using that @xmath777",
    ", we deduce via lemma  [ le : genmartingales ] that @xmath150=x$ ] for all @xmath769 , which is ( ii ) . in view of ( a ) , ( ii ) implies ( iii ) .",
    "let ( iii ) hold , let @xmath75 be an optimal superhedging strategy as in ( b ) , and let @xmath778 . then @xmath779-q.s .",
    ", but in view of ( iii ) and ( a ) , we have @xmath780-q.s . , showing that @xmath192 is a replicating strategy .",
    "next , we assume that the result holds as stated when there are @xmath781 traded options @xmath772 , and we introduce an additional ( borel - measurable ) option @xmath782 with @xmath633 in the market at price @xmath783 .",
    "we first prove ( a ) .",
    "let @xmath2 hold .",
    "if @xmath4 is replicable , we can reduce to the case with at most @xmath763 options , so we may assume that @xmath4 is not replicable . let @xmath5 be the superhedging price when the stocks and @xmath772 are available for trading ( as stated in the theorem ) ; we have @xmath332 by ( b ) of the induction hypothesis .",
    "if @xmath784 , then as @xmath4 is not replicable , we obtain an arbitrage by shortselling one unit of @xmath4 and using an optimal superhedging strategy for @xmath4 , which exists by ( b ) of the induction hypothesis .",
    "therefore , @xmath785 .",
    "together with ( b ) of the induction hypothesis , we have @xmath786.\\ ] ] as @xmath148 $ ] is not constant by ( c ) of the induction hypothesis and@xmath369<\\infty$ ] for all @xmath769 , it follows that there exists @xmath787 such that @xmath788 < \\pi(f).\\ ] ] a similar argument applied to @xmath789 ( which is borel - measurable and not replicable like @xmath4 ) yields @xmath790 such that @xmath791 < f_0 < e_{q_+}[f ] < \\pi(f).\\ ] ] now let @xmath1 . by ( a ) of the induction hypothesis",
    ", there exists @xmath792 such that @xmath793 . by choosing suitable weights @xmath794 such that @xmath795",
    ", we have that @xmath796=f_0.\\ ] ] this completes the proof that ( i ) implies ( ii ) .",
    "the reverse implication can be shown as in the proof of theorem  [ th : ftap ] , so ( a ) is established . moreover , the argument for ( c ) is essentially the same as in the case @xmath99 .",
    "next , we prove ( b ) .",
    "the argument is in the spirit of theorem  [ th : duality1 ] ; indeed , ( [ eq : qpmforopt ] ) states that the price @xmath797 is in the interior of the set @xmath798\\dvtx",
    "q\\in{\\mathcal{q}}_\\varphi\\}$ ] and will thus play the role that the fundamental lemma ( lemma  [ le : relint ] ) had in the proof of theorem  [ th : duality1 ] .",
    "we continue to write @xmath4 for @xmath799 and let @xmath800 be an upper semianalytic function such that @xmath801 .",
    "let @xmath802 be the superhedging price of @xmath800 when the stocks and @xmath803 are available for trading . recall that @xmath804 by theorem  [ th : optimalstrategy ] which also yields the existence of an optimal strategy .",
    "let @xmath805 be the set of all martingale measures @xmath806 which satisfy @xmath807=0 $ ] for @xmath808 ( whereas we continue to write @xmath771 for those martingale measures which have that property for @xmath809 ) .",
    "then we need to show that @xmath810.\\ ] ] as above , we may assume that @xmath4 is not replicable given the stocks and @xmath772 , as otherwise we can reduce to the case with @xmath763 options .",
    "the inequality @xmath811\\ ] ] follows from lemma  [ le : easyineq ] ; we focus on the reverse inequality @xmath812.\\ ] ] suppose first that @xmath813 ; then we have @xmath814 . in this situation",
    ", we claim that @xmath815\\to f_0,\\qquad   e_{q_n } \\bigl[f'\\bigr]\\to\\pi'\\bigl(f'\\bigr).\\hspace*{-31pt}\\ ] ] before proving this claim , let us see how it implies ( [ eq : dualityoptclaimineq ] ) .",
    "indeed , as @xmath4 is not replicable , there exist measures @xmath816 as in ( [ eq : qpmforopt ] ) . given @xmath817 from ( [ eq : dualityoptclaimapprox ] ) ,",
    "we can then find weights @xmath818 $ ] such that @xmath819 and @xmath820=f_0=0;\\ ] ] that is , @xmath821 .",
    "moreover , since @xmath336\\to f_0 $ ] , the weights can be chosen such that @xmath822 . using that @xmath823<\\infty$ ] as @xmath801",
    ", we conclude that @xmath824\\to\\pi ' \\bigl(f'\\bigr),\\ ] ] which indeed implies ( [ eq : dualityoptclaimineq ] ) .",
    "we turn to the proof of ( [ eq : dualityoptclaimapprox ] ) . by a translation",
    "we may assume that @xmath825 ; thus , if ( [ eq : dualityoptclaimapprox ] ) fails , we have @xmath826\\dvtx   q\\in{\\mathcal{q}}_\\varphi\\bigr\\}}\\subseteq{\\mathbb{r}}^2.\\ ] ] then , there exists a separating vector @xmath827 with @xmath353 such that @xmath828.\\ ] ] but by ( b ) of the induction hypothesis , we know that @xmath829 = \\pi\\bigl(yf+zf'\\bigr).\\ ] ] moreover , by the definitions of @xmath830 and @xmath831 , we clearly have @xmath832 for any random variable @xmath421 .",
    "finally , the definition of @xmath831 shows that @xmath833 , because @xmath4 is available at price @xmath783 for hedging .",
    "hence , we have @xmath834 \\geq\\pi'\\bigl(zf ' \\bigr),\\ ] ] which clearly implies @xmath835 . if @xmath836 , the positive homogeneity of @xmath831 yields that @xmath837 , contradicting our assumption that @xmath825 .",
    "thus , we have @xmath357 . to find a contradiction , recall that we have already shown that there exists some @xmath838 .",
    "then , ( [ eq : ineqpiprime ] ) yields that @xmath839=e_{q'}[zf']$ ] and hence @xmath840>0=\\pi'(f')$ ] as @xmath357 , which contradicts ( [ eq : dualityoptclaimeasyineq ] ) .",
    "this completes the proof of ( [ eq : dualityoptclaimineq ] ) in the case @xmath841 .    finally , to obtain ( [ eq : dualityoptclaimineq ] ) also in the case @xmath842",
    ", we apply the above to @xmath843 and let @xmath844 , exactly as below ( [ eq : dualityproofreductionbddabove ] ) .",
    "this completes the proof of  ( b ) .",
    "[ rk : proofsformainres ] given the options @xmath157 and @xmath4 , we can always choose the weight function @xmath845 ; that is , the presence of @xmath846 in theorem  [ th : mainweighted ] is not restrictive .",
    "the theorem implies the main results as stated in the .",
    "indeed , the implication from ( i ) to ( ii ) in the as stated in section  [ se : intromainres ] follows immediately from ( a ) , and it is trivial that ( ii ) implies ( ii@xmath847 ) . the fact that ( ii@xmath847 ) implies ( i ) is seen as in the proof of theorem  [ th : ftap ] .",
    "the of section  [ se : intromainres ] is a direct consequence of ( b ) and lemma  [ le : easyineq ] .",
    "the equivalence of ( i)(iii ) in the then follows from ( c ) ; in particular , if @xmath3 is a singleton , the market is complete .",
    "conversely , if the market is complete , then using @xmath848 , we obtain from ( ii ) that @xmath849 is constant on @xmath3 for every @xmath850 . as any probability measure on the universal @xmath16-field @xmath155",
    "is determined by its values on @xmath15 , this implies that @xmath3 is a singleton .",
    "in this section , we derive a nondominated version of the optional decomposition theorem of @xcite and @xcite , for the discrete - time case . as in section  [ se : multiperiodwithoutopt ] , we consider the setting introduced in section  [ se : intromainres ] in the case without options ( @xmath99 ) .",
    "let @xmath2 hold , and let @xmath851 be an adapted process such that @xmath852 is upper semianalytic and in @xmath853 for all @xmath9 and @xmath854 .",
    "the following are equivalent :    @xmath851 is a supermartingale under each @xmath9 ;    there exist @xmath75 and an adapted increasing process @xmath855 with @xmath856 such that @xmath857    it follows from lemma  [ le : genmartingales ] that ( ii ) implies ( i ) .",
    "we show that ( i ) implies ( ii ) ; this proof is similar to the one of theorem  [ th : duality ] , so we shall be brief .",
    "recall the operator @xmath858 from lemma  [ le : localsuperhedgeselection ] .",
    "our first aim is to show that for every @xmath47 , we have @xmath859 let @xmath9 and @xmath304 .",
    "following the same arguments as in ( [ eq : qepsoptimizer ] ) , we can construct a universally measurable @xmath749-optimizer @xmath860 ; that is , @xmath861+{\\varepsilon}\\geq \\sup_{q\\in { \\mathcal{q}}_t(\\omega ) } e_q\\bigl[v_{t+1}(\\omega,\\cdot ) \\bigr ] \\equiv{\\mathcal{e}}_t(v_{t+1 } ) ( \\omega)\\nonumber\\\\ \\eqntext{\\mbox{for all $ \\omega \\in\\omega_t\\setminus n_t$},}\\end{aligned}\\ ] ] where @xmath862 is universally measurable and @xmath0-polar ( hence @xmath3-polar ) by lemma  [ le : nalocal ] .",
    "let @xmath863 where @xmath864 is an arbitrary selector of @xmath865 for @xmath550 .",
    "then @xmath93 is a generalized martingale under @xmath806 and @xmath866 = e_{q'}[v_{t+1}|{\\mathcal{f}}_t](\\omega ) \\qquad \\mbox{for $ q'$-a.e .",
    "$ \\omega$}\\ ] ] by fubini s theorem , where the conditional expectation is understood in the generalized sense ; cf .",
    "as both sides of this identity are @xmath42-measurable and @xmath867 on @xmath42 , we also have that @xmath866 = e_{q'}[v_{t+1}|{\\mathcal{f}}_t](\\omega)\\qquad   \\mbox{for $ q$-a.e .",
    "$ \\omega$.}\\ ] ] finally , by a conditional version of lemma  [ le : locmartmeas ] , there exists a martingale measure @xmath868 with @xmath869 on @xmath42 such that @xmath870\\geq e_{q'}[v_{t+1}| { \\mathcal{f}}_t ] \\qquad q\\mbox{-a.s.},\\ ] ] and since @xmath851 is a @xmath871-supermartingale by ( i ) , we also have @xmath872 \\qquad q   \\mbox{-a.s.}\\ ] ] collecting the above ( in)equalities , we arrive at @xmath873 since @xmath304 and @xmath9 were arbitrary , we deduce that @xmath874-q.s . , and as theorem  [ th : ftap ] shows that @xmath3 and @xmath0 have the same polar sets , we have established ( [ eq : proofoptdecompdpp ] ) .    for each @xmath47 , lemma  [ le : localsuperhedgeselection ]",
    "yields a universally measurable function @xmath875 such that @xmath876 for all @xmath877 . by fubini s theorem and ( [ eq : proofoptdecompdpp ] ) , this implies that @xmath878 define @xmath75 by @xmath739 ; then it follows that @xmath879 that is , ( ii ) holds with @xmath880 .",
    "for ease of reference , we collect here some known facts about the classical ( dominated ) case that are used in the body of the paper .",
    "let @xmath881 be a probability space , equipped with a filtration @xmath882 .",
    "an adapted process @xmath142 is a _ generalized martingale _",
    "if @xmath883=m_t \\qquad p \\mbox{-a.s.},\\qquad   t=0,\\dots , t-1\\ ] ] holds in the sense of generalized conditional expectations , that is , with the definition @xmath883:=\\lim_{n\\to\\infty } e_p\\bigl[m_{t+1}^+\\wedge n|{\\mathcal{f}}_t\\bigr ] - \\lim _ { n\\to\\infty } e\\bigl[m_{t+1}^-\\wedge n|{\\mathcal{f}}_t \\bigr]\\ ] ] and the convention that @xmath884 . to wit , if @xmath885 , then @xmath142 is simply a martingale in the usual sense .",
    "we refer to @xcite for further background and the proof of the following fact .",
    "[ le : genmartingales ] let @xmath142 be an adapted process with @xmath886 .",
    "the following are equivalent :    @xmath142 is a local martingale ;    @xmath887 is a local martingale whenever @xmath192 is predictable ;    @xmath142 is a generalized martingale .",
    "if @xmath888<\\infty$ ] , these conditions are further equivalent to :    @xmath142 is a martingale .",
    "let @xmath93 be an adapted process with values in @xmath74 .",
    "the following is a standard consequence of lemma  [ le : genmartingales ] .",
    "[ le : easyineq ] let @xmath4 and @xmath889 be @xmath155-measurable , and let @xmath121 be a probability measure such that @xmath127=0 $ ] for all @xmath252 and @xmath890 is a local @xmath121-martingale . if there exist @xmath776 and @xmath88 such that @xmath891-a.s",
    ", then @xmath150 \\leq x$ ] .    if @xmath406=\\infty$ ] , then @xmath150=-\\infty$ ] by our convention ( [ eq : conventionexpectation ] ) and the claim is trivial .",
    "suppose that @xmath406<\\infty$ ] ; then @xmath892 implies @xmath893 .",
    "therefore , @xmath169 is a @xmath121-martingale by lemma  [ le : genmartingales ] and we conclude that @xmath894 \\geq e_q[f]$ ] .",
    "[ le : locmartmeas ] let @xmath121 be a probability measure under which @xmath890 is a local martingale , let @xmath630 be a random variable and let @xmath4 be a random variable satisfying @xmath633 .",
    "there exists a probability measure @xmath629 under which @xmath93 is a martingale , @xmath895<\\infty$ ] , and @xmath896\\geq e_{q}[f]$ ] .    as @xmath121 is a local martingale measure , the classical no - arbitrage condition @xmath897 holds . by lemma  [ le : integrableprobab ]",
    "there exists a probability @xmath898 such that @xmath899<\\infty$ ] .",
    "we shall use @xmath523 as a reference measure ; note that @xmath900 is equivalent to @xmath901 .",
    "it suffices to show that @xmath902 \\leq\\pi(f)\\leq\\sup _ { q\\in{\\mathcal{q}}^*_\\varphi } e_q[f],\\ ] ] where @xmath5 is the @xmath523-a.s .",
    "superhedging price , @xmath903 is the set of all @xmath904 such that @xmath890 is a local @xmath121-martingale , and @xmath905 is the set of all @xmath904 such that @xmath906<\\infty$ ] and @xmath93 is a @xmath121-martingale .",
    "the first inequality follows from lemma  [ le : easyineq ] .",
    "the second inequality corresponds to a version of the classical with an additional weight function .",
    "it can be obtained by following the classical kreps ",
    "yan separation argument , where the usual space @xmath907 is replaced with the weighted space @xmath908 of random variables @xmath453 such that @xmath909<\\infty$ ] .",
    "indeed , the dual @xmath910 with respect to the pairing @xmath911 $ ] is given by the space of all random variables @xmath912 such that @xmath913 is @xmath21-a.s . bounded .",
    "as a consequence , the separation argument yields a martingale measure @xmath914 , for if @xmath915 is positive and normalized such that @xmath916=1 $ ] , then the measure @xmath121 defined by @xmath917 satisfies @xmath906=e_p[z\\varphi]<\\infty$ ]",
    ". the arguments are known ( see , e.g. , @xcite , theorem  4.1 ) , and so we shall omit the details .",
    "the authors thank mathias beiglbck and jan obj for their constructive comments ."
  ],
  "abstract_text": [
    "<S> we consider a nondominated model of a discrete - time financial market where stocks are traded dynamically , and options are available for static hedging . in a general measure - theoretic setting , we show that absence of arbitrage in a quasi - sure sense is equivalent to the existence of a suitable family of martingale measures . in the arbitrage - free case , we show that optimal superhedging strategies exist for general contingent claims , and that the minimal superhedging price is given by the supremum over the martingale measures . </S>",
    "<S> moreover , we obtain a nondominated version of the optional decomposition theorem . </S>"
  ]
}