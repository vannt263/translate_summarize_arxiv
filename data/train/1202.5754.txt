{
  "article_text": [
    "k. fukaya constructed in @xcite a 3-manifold invariant by using his morse homotopy theory , which is defined by considering several morse functions simultaneously .",
    "fukaya s invariant is conjectured to coincide with the 2-loop part of chern ",
    "simons perturbation theory of axelrod  singer and kontsevich ( @xcite ) .",
    "the universal form of the 3-manifold invariant of chern ",
    "simons perturbation theory has values in a space of graphs and is known to be universal among ohtsuki s finite type invariants if restricted to homology spheres ( @xcite ) .",
    "fukaya s invariant is defined by counting graphs in a manifold whereas chern ",
    "simons perturbation theory invariant is defined by an integration over the configuration space of a 3-manifold .    behind the work of @xcite , there is a work of physics due to witten that the open string theory on the cotangent bundle of a 3-manifold is equivalent to the chern ",
    "simons perturbation theory ( @xcite ) .",
    "indeed , in @xcite , it has been proved mathematically that the 0-loop open string theory on the cotangent bundle of a manifold is equivalent to the morse homotopy theory , which had been independently developed by betz ",
    "cohen ( @xcite ) and by fukaya ( @xcite ) .",
    "there is also a discussion in @xcite about a relationship between the higher genus open string theory and chern  simons perturbation theory .    0 fukaya s invariant has clearer geometric meaning than the configuration space integral construction of chern ",
    "simons perturbation theory : fukaya s invariant is defined by counting numbers of graph flows and by taking a rational linear combination .",
    "thus the rationality of the invariant follows immediately from the definition .    in @xcite ,",
    "fukaya considered triads of morse functions @xmath0 on @xmath1 and for pairs @xmath2 , @xmath3 , of a closed 3-manifold @xmath1 and acyclic flat @xmath4-bundles @xmath5 , he defined some number @xmath6 .",
    "he showed that the difference @xmath7 depends only on the equivalence class of @xmath8 .",
    "the essential points in his construction may be the following",
    "several morse functions are considered at once and graph - shaped flows along the gradients are counted .",
    "the moduli spaces of the flows form compact 0-dimensional manifolds for a generic triad of morse functions",
    ". 2 .   graphs with an edge separated in the middle by critical points ( as in figure  [ fig : edges ] ) are considered and a linear combination of the numbers of ( possibly separated ) graph - flows is considered . here",
    "the coefficients are endomorphisms between tensor products of the morse complexes ( with twisted coefficients ) .",
    "3 .   for each coefficient in the linear combination , combinatorial propagators ( or chain contractions ) of morse complexes are composed and then the trace is taken to obtain a number .",
    "the aim of this paper is to construct graph - valued invariants of homology 3-spheres , i.e. , closed 3-manifolds @xmath1 with @xmath9 , by using morse homotopy theory , as a higher order generalization of @xcite . in this paper",
    ", we generalize the idea of fukaya to graphs with loop numbers ( the first betti numbers ) @xmath10 for homology 3-sphere @xmath1 with the trivial connection . to give an explicit formula for our invariant for all orders",
    ", we introduce an appropriate graph complex for morse homotopy theory being based on kontsevich s graph complex in @xcite and formulate the formal cancellation mechanism among different graphs , that will be necessary in the proof of invariance of our invariant , in the graph complex .",
    "the principal term @xmath11 of our invariant is defined by substituting the numbers of graph - flows into cycles in our graph complex .    the proof that our invariant is well - defined is done by a cobordism argument for a 1-parameter family of smooth functions on @xmath1 without higher singularities . the main point in the cobordism argument",
    "is that the relations among the numbers of moduli spaces of graph - flows in 1-parameter family are similar to the relations in the graph complex . in this paper",
    ", we consider graphs for all orders , so we attempt to give full details of the structure of a manifold with corners of a moduli space and of arguments of orientations etc .",
    "the moduli space of graph - flows will be described as the transversal intersections of several submanifolds of the configuration space of @xmath1 or the direct product of the configuration space of @xmath1 with @xmath12 $ ] . to make such definition easier , we will not use , in the cobordism argument , the argument of time dependent trajectories of @xcite .",
    "instead , we confirm the invariance one at a time by using a similar bifurcation analysis as in @xcite .    also , in this paper , we consider only the trivial connection contribution and define an invariant not by taking the difference as in @xcite . to obtain an invariant not by taking the difference",
    ", we need to introduce an anomaly correction term appropriately . in @xcite ,",
    "the existence of such a correction term in the 2-loop case was a conjecture . in this paper",
    ", we introduce an anomaly term @xmath13 by taking some linear combination of the numbers of infinitesimal graph - flows in a configuration space bundle over a compact 4-manifold having @xmath1 as a boundary .",
    "the key point for the correction term to work well is the spin cobordism invariance of the anomaly term @xmath13 .",
    "namely , the spin cobordism invariance allows us to define an analogue of the signature defect , which includes @xmath13 instead of the relative @xmath14-class in the sigunature defect , and it gives the desired correction term .",
    "there are analogues of our graph complex and the moduli spaces of graph - flows for circle - valued morse theory .",
    "the generalization to circle - valued morse function would give an invariant of 3-manifolds with the first betti number 1 .",
    "we plan to discuss this in @xcite .    finally , we mention m.  futaki s work @xcite .",
    "futaki discovered in @xcite some singular phenomena that are missed in @xcite . in @xcite , the coefficients in the linear combination of graphs are defined by contracting holonomies along graph - flows by @xmath15-invariant tensors .",
    "however , futaki observed with a concrete calculation that when the dumbbell graph contribution is nontrivial ( homology 3-sphere with the trivial connection is not the case ) , the holonomy matrix will suddenly jump at the point on which a trivalent vertex passes through a critical point and thus the invariance fails .",
    "since we construct an invariant via an intersection theory considering only the trivial connection contribution , the coefficients in the linear combination in our definition can be given without using holonomy matrix , so the same problem do not occur .",
    "( see also remark  [ rem : cp - nonsing ] . )",
    "the organization of the present paper is as follows . in chapter 2",
    "we introduce our graph complex and construct a cycle in it . the cycle condition in the graph complex",
    "is a formal description of the cancellation of singular flows that appear in the proof of invariance of our invariant . in chapter 3 , we give definitions of fukaya s moduli spaces of graph - flows and the moduli space of infinitesimal graph - flows , and then consider their compactifications and orientations .",
    "also , the definition of our invariant will be given and the main theorem , which says that our invariant is actually an invariant , is stated ( theorem  [ thm : z_invariant ] ) . in chapter 4 , we consider the compactification and orientation for the moduli space of graph - flows in 1-parameter family of smooth functions . in chapter 5 , in accordance with the contents in previous chapters ,",
    "we prove the invariance of our invariant by a cobordism argument .",
    "for each of the four types of bifurcations that may occur generically , we confirm the invariance one at a time .",
    "we denote by @xmath16 the space of @xmath17 functions @xmath18 on a compact manifold @xmath1 for sufficiently large @xmath19 and we equip @xmath16 the @xmath17-topology . for a @xmath17 function @xmath20 on a manifold @xmath1 ,",
    "we denote by @xmath21 the subset of @xmath1 of critical points of @xmath20 .",
    "let @xmath22 ( resp .",
    "@xmath23 ) denote the subset of @xmath21 consisting of morse singularities ( resp .",
    "birth / death points , or @xmath24-singularities ) . for a morse function @xmath20 , a critical point @xmath25 of @xmath20 and a metric @xmath26 on a manifold , we denote by @xmath27 ( resp .",
    "@xmath28 ) the descending manifold ( resp .",
    "ascending manifold ) of @xmath29 at @xmath25 .",
    "we denote by @xmath30 the space of sections of a fiber bundle @xmath31 . for a sequence of submanifolds @xmath32 of a smooth riemannian manifold @xmath33",
    ", we say that the intersection @xmath34 is _ transversal _ if for each point @xmath35 in the intersection , the subspace @xmath36 spans the direct sum @xmath37 .",
    "the convention for orientations of manifolds is given in appendix  [ s : ori ] .",
    "by a _ graph _ , we mean a finite graph with each edge oriented , i.e. , an ordering of the boundary vertices of an edge is fixed , and without self - loop . for a graph @xmath38 , let @xmath39 ( resp .",
    "@xmath40 ) be the set of univalent vertices of @xmath38 that are inputs ( resp .",
    "outputs ) .",
    "let @xmath41 be the set of vertices of valence @xmath42 (  white vertex \" ) .",
    "let @xmath43 be the set of vertices of valence @xmath44 (  black vertex \" ) .",
    "an _ admissible graph _ is a graph such that    1 .",
    "@xmath45 , 2 .",
    "a bijection @xmath46 is fixed , and 3 .",
    "each bivalent vertex has one incoming and one outgoing edges .    a _ compact edge _ of @xmath38 is an edge connecting two black vertices .",
    "a _ separated edge _ of @xmath38 is a pair of edges @xmath47 with @xmath48 , @xmath49 , @xmath50 such that @xmath51 .",
    "a _ broken edge _ of @xmath38 is a pair of edges @xmath52 with @xmath48 , @xmath53 .",
    "a _ broken separated edge _ of @xmath38 is either a triple @xmath54 or a triple @xmath55 , with @xmath48 , @xmath56 such that @xmath57 .",
    "let @xmath58 , @xmath59 , @xmath60 , @xmath61 be the set of compact , separated , broken , broken separated edges respectively .",
    "a _ regular edge _ of @xmath38 is either a compact edge or a separated edge of @xmath38 .",
    "let @xmath62 be the set of regular edges of @xmath38 .",
    "let @xmath63 .",
    "see figure  [ fig : edges ] .",
    "a _ labeled graph _ is an admissible graph @xmath38 equipped with bijections @xmath64 and @xmath65 .",
    "let @xmath66 , @xmath67 , @xmath68 , be a sequence of finitely based acyclic chain complexes over @xmath69 . for @xmath70",
    ", we define a",
    "_ @xmath71-colored graph _ as a labeled graph @xmath72 such that on each white vertex of @xmath73 a basis vector @xmath74 is attached for each @xmath75 .    for each edge @xmath76 in a @xmath71-colored graph , we define its _ degree _ by @xmath77 where @xmath78 denotes the degree of @xmath35 .",
    "we define the _ degree _ of a @xmath71-colored graph by @xmath79 we will call a @xmath71-colored graph with degree @xmath80 , with @xmath81 vertices and with @xmath82 a _ @xmath71-colored graph of type @xmath83_. we define the _ closure _ @xmath84 of @xmath38 as the graph obtained from @xmath38 by identifying white vertices of each pair @xmath85 .",
    "an example of a @xmath71-colored graph of type @xmath86 is given in example  [ ex : phi ] .",
    "let @xmath87 be the set of pairs @xmath88 , where    1 .",
    "@xmath38 is a @xmath71-colored graph of type @xmath83 with connected closure @xmath84 , 2 .",
    "@xmath89 is an orientation of the real vector space @xmath90 where @xmath91 is the set of  half - edges \" ,    let @xmath92 be the vector space over @xmath93 spanned by @xmath87 , quotiented by the relation @xmath94 the bijection @xmath95 and the edge orientation of a graph @xmath38 defines a canonical graph orientation @xmath96",
    ". in the following , we assume that all graphs are oriented by canonical orientation , namely , if a graph is oriented by the opposite orientation to the canonical one , then we represent the oriented graph by minus of the canonically oriented one .    let @xmath97 be the subspace of @xmath98 spanned by graphs with only compact edges .",
    "the sequence of complexes @xmath71 is unnecessary to represent a graph in @xmath97 , so there are canonical isomorphisms between @xmath97 for different sequences @xmath71 . identifying @xmath97 for all @xmath71 ,",
    "we simply write @xmath99    we define a linear map @xmath100 by @xmath101 where for @xmath102 ( @xmath103 are vertices ) the induced orientation of @xmath104 is formally given by @xmath105 .",
    "it follows from the identity @xmath106 that @xmath107 . also , we define another linear map @xmath108 by @xmath109 , where @xmath110 where @xmath111 is the naturally induced one .",
    "( note that @xmath112 . )",
    "the reason for the signs in the formula will be explained in  [ ss : ori_mg ] .",
    "we shall introduce some relations in the space of graphs to bring them closer to the moduli space of graph flows .",
    "let @xmath114 , @xmath115 , denote the graph .",
    "let @xmath38 be a @xmath71-labeled graph with @xmath116 and with basis vectors @xmath35 and @xmath117 attached on the input and output white vertex respectively . to specify that @xmath38 has such an edge ,",
    "we will write @xmath118 . this notation enables us to express the graph obtained from @xmath38 by replacing @xmath35 and @xmath119 with @xmath120 and @xmath121 respectively , as @xmath122 .",
    "we will write @xmath123 the graph obtained from @xmath38 by replacing the separated edge @xmath73 with a compact edge .",
    "let @xmath124 where    1 .",
    "@xmath125 , i.e. , @xmath126 , 2 .",
    "@xmath127-relation is given by @xmath128 ( @xmath129 etc .",
    "is a composition of two graphs at the univalent vertices , on which @xmath130 is attached .",
    "@xmath131 etc .",
    "is the incidence coefficient of @xmath130 in @xmath132 . ) , 3 .",
    "@xmath133-relation is given by @xmath134    we denote by @xmath135 the equivalence class in @xmath136 represented by @xmath38 .",
    "the relation @xmath137 will correspond to the fact that the signed number of boundaries of a moduli space that is an oriented 1-manifold is 0 .      in the following ,",
    "we assume that @xmath139 , i.e. , @xmath140 . in such a case",
    ", we write @xmath141 the subspace of @xmath98 spanned by graphs with no bivalent vertices .",
    "we consider a linear combination @xmath142 where the sum is taken over all @xmath71-colored graphs in @xmath143 of type @xmath144 , each equipped with canonical orientation .",
    "so we consider all possible labellings and edge orientations .",
    "the @xmath145-cycle condition @xmath146 is equivalent to a system of linear equations among coefficients @xmath147 .",
    "we call the linear system the _ @xmath148-relation_. by considering @xmath147 as formal variables , we get a universal cycle .",
    "namely , we define the space @xmath149 to be the quotient space of @xmath141 by the @xmath148-relation and the _ label change relation _ , which identifies two labeled oriented graphs with isomorphic underlying graph when one is obtained from another by even swappings of labels or of edge orientations .",
    "we denote by @xmath150 $ ] the equivalence class in @xmath149 represented by @xmath38 .",
    "then we put @xmath151\\otimes\\gamma      \\in \\cala_{n , m}(\\vec{c})\\otimes\\calg_{n , m}(\\vec{c}).\\ ] ] clearly , @xmath152 is a @xmath153-cycle .",
    "we will need a @xmath154-cycle later does not satisfy @xmath155 , the word ",
    "@xmath156-cycle \" does not in fact make sense .",
    "but we merely say that an element of @xmath141 is a @xmath156-cycle if it lies in the kernel of @xmath156 .",
    "] . to make @xmath152 a @xmath154-cycle , we define the _ @xmath157-relation _ in @xmath149 by @xmath158      + \\sum_{{{y_i\\in c_*^{(i)}}\\atop{d(y_i)=d(p_i)-1}}}\\partial_{q_iy_i}^{(i)}\\cdot\\left[\\gamma(p_i , y_i)_i\\right ]      -\\delta_{p_iq_i}\\cdot\\left[\\gamma(\\emptyset,\\emptyset)_i\\right]=0,\\ ] ] for each @xmath159 , @xmath160 ( @xmath161 ) , @xmath162 .",
    "[ lem : dg=0 ] @xmath163 in @xmath164 .",
    "we have seen that @xmath165 .",
    "so it suffices to show that @xmath166 .",
    "we show that @xmath167 vanishes in @xmath168 , where @xmath169 we denote by @xmath170 the equivalence class of @xmath38 in @xmath171 .",
    "since the left hand side of the identity of lemma  [ lem : dg=0 ] lies in the image from @xmath172 , it suffices to check the assertion in the space @xmath172 . in @xmath172",
    ", we have @xmath173\\otimes\\langle d'\\gamma \\rangle_1\\\\      & = \\sum_{i=1}^m\\sum_{{{\\gamma'(p_i , q_i)_i}\\atop{d(p_i)=d(q_i ) } } }          \\bigl(d'^*\\gamma'(p_i , q_i)_i\\bigr)\\otimes\\langle\\gamma'(p_i , q_i)_i\\rangle_1,\\end{aligned}\\ ] ] where the second sum of the second line is taken over graphs of degree @xmath174 , @xmath160 ( @xmath161 ) , @xmath162 such that @xmath175 and where @xmath176 is the linear map defined by @xmath177\\otimes\\langle d'\\gamma\\rangle_1$}\\bigr).\\ ] ] this is well - defined since there is a canonical reduced presentation in @xmath171 .",
    "but @xmath178 , @xmath179 , is precisely the left hand side of the definition of the @xmath157-relation .      for a finitely generated , based free acyclic chain complex @xmath180 , @xmath181",
    ", we consider the @xmath69-module @xmath182 of endomorphisms @xmath183 of homogeneous degree @xmath184 . the boundary operator @xmath185 is defined by @xmath186 then the pair @xmath187 forms a chain complex . by the canonical isomorphism @xmath188 and the knneth theorem",
    ", one can show that the complex @xmath187 is acyclic .",
    "for example , @xmath189 is a cycle iff @xmath190 . in particular",
    ", @xmath191 is a cycle and hence is a boundary .",
    "so there exists @xmath192 such that @xmath193 we will call such an endomorphism @xmath194 a _ combinatorial propagator _ for @xmath180 .",
    "if two such endomorphisms @xmath195 are given , then the difference @xmath196 is a @xmath197-cycle , since @xmath198 .",
    "so there exists @xmath199 such that @xmath200      we will construct a @xmath154-cycle in @xmath136 by using combinatorial propagators and the trace in @xcite .",
    "let @xmath38 be a @xmath71-labeled graph @xmath38 with @xmath201 on the input and @xmath202 on the output .",
    "we put @xmath203 . for a sequence @xmath204 of endomorphisms @xmath205 , @xmath206",
    ", we define the trace of @xmath38 by @xmath207 where smooth is the smoothing operator : @xmath208    in particular , since each @xmath209 is acyclic , there exists a combinatorial propagator , i.e. , an endomorphism @xmath210 of homogeneous degree 1 such that @xmath211 . as a special case of the above definition",
    ", the trace by combinatorial propagators @xmath212 defines a linear map @xmath213 let @xmath214 .",
    "since @xmath215 , the map @xmath216 descends to a well - defined map @xmath217    [ lem : tr(xi)=0 ] @xmath218 .",
    "hence @xmath219 induces a well - defined map @xmath220    for @xmath221 with @xmath179 , we have @xmath222          + \\sum_{{{y_i\\in p_*^{(i)}}\\atop{d(y_i)=d(p_i)-1}}}\\partial_{q_iy_i}^{(i)}\\cdot[\\gamma(p_i , y_i)_i ]          -\\delta_{p_iq_i}\\cdot[\\gamma(\\emptyset,\\emptyset)_i ]          \\bigr]\\\\      = & \\btr_{\\ldots,\\partial^{(i)}g^{(i)}+g^{(i)}\\partial^{(i)},\\ldots}\\bigl [ [ \\gamma(p_i , q_i)_i]\\bigr]-\\btr_{\\vec{g}}\\bigl[\\delta_{p_iq_i}\\cdot[\\gamma(\\emptyset,\\emptyset)_i]\\bigr]\\\\      = & \\btr_{\\ldots,\\mathrm{id},\\ldots}\\bigl[[\\gamma(p_i , q_i)_i]\\bigr]-\\btr_{\\vec{g}}\\bigl[\\delta_{p_iq_i}\\cdot[\\gamma(\\emptyset,\\emptyset)_i]\\bigr]\\\\      = & \\delta_{p_iq_i}\\btr_{\\ldots,\\mathrm{id},\\ldots}\\bigl[[\\gamma(p_i , q_i)_i]-[\\gamma(\\emptyset,\\emptyset)_i]\\bigr]=0.\\\\      \\end{split}\\ ] ]    [ lem : tr_closedness ] the following assertions hold .",
    "( @xmath223 )    1 .",
    "2 .   @xmath225 does not depend on the choice of combinatorial propagators @xmath226 .",
    "the assertion ( 1 ) is immediate from lemmas  [ lem : dg=0 ] and  [ lem : tr(xi)=0 ] and from the fact that @xmath227 commutes with @xmath145 and @xmath156 .",
    "now we shall prove ( 2 ) .",
    "we prove the assertion for @xmath228 and @xmath229 , where @xmath194 and @xmath230 are two combinatorial propagators for @xmath231 . as mentioned in ",
    "[ ss : acyclic_cpx ] , there exists an endomorphism @xmath232 such that @xmath233 .",
    "then we have @xmath234\\otimes\\langle\\gamma(p_1,q_1)_1\\rangle\\bigr]\\\\      & = \\ttr'_{\\partial^{(1)}h - h\\partial^{(1)},\\ldots }          \\bigl[\\sum_{{{\\gamma(p_1,q_1)_1}}}[\\gamma(p_1,q_1)_1]\\otimes\\langle\\gamma(p_1,q_1)_1\\rangle\\bigr]\\\\      & = \\ttr'_{h,\\ldots }          \\bigl[\\sum_{{{\\gamma(p_1,q_1)_1}}}\\sum_{{{x_1\\in p^{(1)}_*}\\atop{d(x_1)=d(p_1)+1 } } }          \\partial_{x_1p_1}^{(1)}\\cdot[\\gamma(x_1,q_1)_1]\\otimes\\langle\\gamma(p_1,q_1)_1\\rangle\\\\      & \\hspace{11mm}-\\sum_{{{\\gamma(p_1,q_1)_1}}}\\sum_{{{y_1\\in p^{(1)}_*}\\atop{d(y_1)=d(q_1)-1 } } }          \\partial_{q_1y_1}^{(1)}\\cdot[\\gamma(p_1,y_1)_1]\\otimes\\langle\\gamma(p_1,q_1)_1\\rangle",
    "\\bigr]\\\\      & = \\ttr'_{h,\\ldots }          \\bigl[\\sum_{{{\\gamma(p_1,q_1)_1}}}\\sum_{{{x_1 } } }          [ \\gamma(x_1,q_1)_1]\\otimes\\langle\\partial^{(1)}(x_1,p_1)*\\gamma(p_1,q_1)_1\\rangle\\\\      & \\hspace{11mm}-\\sum_{{{\\gamma(p_1,q_1)_1}}}\\sum_{{{y_1 } } }          [ \\gamma(p_1,y_1)_1]\\otimes\\langle\\gamma(p_1,q_1)_1*\\partial^{(1)}(q_1,y_1)\\rangle          \\bigr]\\\\      & = \\ttr'_{h,\\ldots}\\bigl [          \\sum_{{{p_1',q_1'\\in p^{(1)}_*}\\atop{d(p_1')=d(q_1')+2}}}\\sum_{\\gamma(p_1',q_1')_1 }          [ \\gamma(p_1',q_1')_1]\\otimes\\langle          ( \\partial^{(1)}*\\gamma-\\gamma*\\partial^{(1)})(p_1',q_1')_1\\rangle          \\bigr ] .",
    "\\end{split}\\ ] ] we show that this vanishes .",
    "we write @xmath235=(c_*^{(1)},\\ldots,\\widehat{c}_*^{(j)},\\ldots , c_*^{(m)})$ ] and @xmath236=(\\eta_1,\\ldots,\\widehat{\\eta}_j,\\ldots,\\eta_m)$ ] for simplicity . if we define @xmath237}(\\vec{c}[j])\\to \\calg_{n , m,\\vec{\\eta}}(\\vec{c})$ ] by @xmath238 then @xmath239-relation . by the relation @xmath137 of @xmath136 , the following identities hold in @xmath240",
    "@xmath241\\otimes          \\langle(d+d')\\gamma(p_1',q_1')_1\\rangle\\bigr]\\\\      & = \\ttr'_{h,\\ldots}\\bigl [          \\asum{p_1',q_1'\\in p^{(1)}_*}{d(p_1')=d(q_1')+2 }          \\asum{\\gamma'(p_1',q_1')_1\\in}{\\bigoplus_j\\calg_{n-1,m-1,(2,1,\\ldots,1)[j]}(\\vec{c}[j ] ) }          [ d^*\\gamma'(p_1',q_1')_1]\\otimes\\langle\\gamma'(p_1',q_1')_1\\rangle\\\\      & \\hspace{11mm}+\\asum{p_1',q_1'\\in p^{(1)}_*}{d(p_1')=d(q_1')+2 }          \\asum{\\gamma(p_1',q_1')_1\\in}{\\calg_{n , m,(2,1,\\ldots,1)}(\\vec{c } ) }          [ \\gamma(p_1',q_1')_1]\\otimes\\langle d'\\gamma(p_1',q_1')_1\\rangle\\bigr]\\\\      & = \\ttr'_{h,\\ldots}\\bigl [          \\asum{p_1',q_1'\\in p^{(1)}_*}{d(p_1')=d(q_1')+2 }          \\sum_{\\gamma(p_1',q_1')_1 }          [ \\gamma(p_1',q_1')_1]\\otimes              \\langle(\\partial^{(1)}*\\gamma-\\gamma*\\partial^{(1)})(p_1',q_1')_1\\rangle\\\\      & \\hspace{11mm}+\\asum{p_1',q_1'\\in p^{(1)}_*}{d(p_1')=d(q_1')+2 }          \\sum_{i\\neq 1}\\asum{p_i , q_i\\in p^{(i)}_*}{d(p_i)=d(q_i)+1 }          \\sum_{\\gamma(p_1',q_1')_1(p_i , q_i)_{i } }          [ \\gamma(p_1',q_1')_1(p_i , q_i)_{i}]\\\\      & \\hspace{61mm}\\otimes          \\langle(\\partial^{(i)}*\\gamma+\\gamma*\\partial^{(i)})(p_1',q_1')_1(p_i , q_i)_{i}\\rangle\\\\      & \\hspace{11mm}+\\asum{p_1',q_1'\\in p^{(1)}_*}{d(p_1')=d(q_1')+2 }          \\sum_{\\gamma(p_1',q_1')_1 }          \\asum{e\\in\\comp(\\gamma(p_1',q_1')_1)}{e\\neq 1 }          [ \\gamma(p_1',q_1')_1]\\otimes          \\langle d_e'\\gamma(p_1',q_1')_1\\rangle\\bigr ] . \\end{split}\\ ] ] here the fourth row agrees with ( [ eq : tr - tr ] ) and the vanishing of the last three rows can be shown as follows : for each @xmath242 with @xmath243 , we have @xmath244\\\\      & \\hspace{55mm}\\otimes          \\langle(\\partial^{(i)}*\\gamma+\\gamma*\\partial^{(i)})(p_1',q_1')_1(p_i , q_i)_{i}\\rangle\\bigr]\\\\      & = \\ttr'_{h,\\ldots,\\partial^{(i)}g^{(i)}+g^{(i)}\\partial^{(i)},\\ldots}\\bigl [          \\asum{p_i',q_i'\\in p^{(i)}_*}{d(p_i')=d(q_i ' ) }          \\sum_{\\gamma(p_1',q_1')_1(p_i',q_i')_{i } }          [ \\gamma(p_1',q_1')_1(p_i',q_i')_{i}]\\\\      & \\hspace{55mm}\\otimes\\langle\\gamma(p_1',q_1')_1(p_i',q_i')_{i}\\rangle\\bigr]\\\\      & = \\ttr'_{h,\\ldots,\\mathrm{id},\\ldots}\\bigl [          \\sum_{p_i'\\in p^{(i ) } _ * }          \\sum_{\\gamma(p_1',q_1')_1(p_i',p_i')_{i } }          [ \\gamma(p_1',q_1')_1(p_i',p_i')_{i } ]          \\otimes\\langle\\gamma(p_1',q_1')_1(p_i',p_i')_{i}\\rangle\\bigr ] .",
    "\\end{split}\\ ] ] this cancels with the corresponding term in @xmath245\\otimes          \\langle d_e'\\gamma(p_1',q_1')_1\\rangle\\bigr].\\ ] ]",
    "suppose given a sequence @xmath247 of @xmath17 morse functions on a @xmath145-dimensional smooth homology sphere @xmath1 for @xmath248 and a riemannian metric @xmath26 on @xmath1 . throughout this section",
    "we assume that @xmath145 is odd .",
    "suppose that @xmath249 is morse ",
    "smale for each @xmath75 .",
    "recall that a pair of morse function and a metric is morse ",
    "smale if all the intersections of the descending manifolds and the ascending manifolds are transversal .",
    "let @xmath250 be the morse complex associated to @xmath249 , namely , @xmath251 is the free @xmath69-module generated by the ( finite ) set @xmath252 of critical points of @xmath253 and @xmath254 is defined by @xmath255 where @xmath256 is a level surface that lies just below the level of @xmath25 and @xmath257 is an oriented 0-dimensional manifold .",
    "take a pair of critical points @xmath258 and @xmath259 arbitrarily , and consider the quotient @xmath260 then @xmath261 together with the induced boundary @xmath262 forms an acyclic chain complex .",
    "we put @xmath263    for a @xmath71-colored graph @xmath72 of type @xmath144 with @xmath139 , we define the source and the target maps @xmath264 as @xmath265 , @xmath266 .",
    "we define the subsets @xmath267 of the set of labels @xmath268 of edges as the subsets consisting of labels of edges with @xmath269 for example , @xmath270 is the subset of labels of incoming compact edges at the @xmath75-th vertex and @xmath271 is the subset of labels of incoming separated edges at the @xmath75-th vertex .",
    "let @xmath272 be the 1-parameter group of diffeomorphisms associated to @xmath273 considered with respect to a metric @xmath26 .",
    "for @xmath274 , let @xmath275 be the space of points @xmath276 such that    1 .   for all @xmath277 , @xmath278 , there exists @xmath279 such that @xmath280 , 2 .",
    "@xmath281 for @xmath277 , @xmath282 , 3 .",
    "@xmath283 for @xmath277 , @xmath284 .",
    "[ rem : cp - nonsing ] since @xmath285 for a critical point @xmath25 of @xmath20 , we allow for a point @xmath286 of @xmath287 that @xmath288 coincides with a critical point of @xmath289 .",
    "we will see below that such a point is not a singular point of @xmath287 .",
    "let @xmath290 be a @xmath71-colored graph with @xmath291 inputs ( and @xmath291 outputs ) and with only regular edges .",
    "for simplicity , we assume that the noncompact edges in @xmath59 are labeled ( via @xmath292 ) by @xmath293 .",
    "let @xmath294 be the pair of basis vectors attached on the edge labeled @xmath75 .",
    "we define a smooth map @xmath295 by @xmath296 where @xmath297 and @xmath298 .",
    "let @xmath299 be the subset consisting of all the points of the form @xmath300 for @xmath301 .",
    "then @xmath287 is the image of @xmath302 under the projection onto @xmath303 and the projection induces an embedding .",
    "[ ex : phi ] we consider the following graph , for example . @xmath304 the map @xmath305 is defined by @xmath306 then @xmath287 is the image of @xmath302 under the projection onto @xmath307 , where @xmath308    let @xmath309 be a small neighborhood of a morse function in @xmath16 , so that the set of critical points does not change on @xmath309 . by considering @xmath310 for all @xmath311 for a fixed riemannian metric @xmath26 on @xmath1 , we get a smooth map @xmath312 where we consider @xmath313 as a subspace of @xmath314 .",
    "[ lem : phi_transversal ] the smooth map @xmath315 is transversal to @xmath316 .",
    "we show that every normal vector @xmath317 lies in the image of the differential @xmath318 on points of @xmath316 .",
    "now suppose that a point @xmath319 lies in the image of @xmath315 .",
    "we first prove the claim in the case where each @xmath288 does not belong to @xmath320 .",
    "suppose that there exist @xmath321 and @xmath322 such that @xmath323 for some @xmath324 .",
    "then there exists a local coordinate @xmath325 of a neighborhood @xmath326 of @xmath288 in @xmath1 such that @xmath327 , @xmath328 , @xmath329 ( image of a constant field ) . here , we may assume without loss of generality that @xmath330 agrees with @xmath331 for some @xmath332",
    "now for small constants @xmath333 , @xmath334 and @xmath335 , we define a @xmath336-function @xmath337 by @xmath338 we define a @xmath336-function @xmath339 by @xmath340 for a constant @xmath341 . by this deformation , the negative gradient , after passing through the part @xmath342 , shifts by a multiple of @xmath343 . therefore , for some @xmath344 and @xmath345 , we have @xmath346 this shows that the differential of @xmath315 is surjective at any point of @xmath347 , @xmath348 .    if @xmath288 agrees with @xmath349 for some @xmath324 and if the @xmath324-th edge of @xmath38 is one of the following forms : @xmath350 then by a suitable deformation of @xmath351 on a small neighborhood of @xmath352 the position of @xmath352 shifts in an arbitrary direction .",
    "this shows the transversality for @xmath353 case .",
    "[ prop : m_mfd ] suppose that @xmath290 has no bivalent vertex , i.e. , @xmath354 .",
    "for a generic choice of @xmath355 , the space @xmath287 is an oriented smooth manifold of dimension @xmath356 moreover , @xmath355 can be chosen so that this property is satisfied simultaneously for all graphs @xmath38 in @xmath357 for a fixed triple @xmath358 .",
    "it follows from lemma  [ lem : phi_transversal ] that @xmath359 is a ( infinite dimensional ) smooth submanifold of codimension @xmath360 .",
    "let @xmath361 be the restriction of the projection .",
    "since the projection @xmath362 is a fredholm map of index @xmath363 , the projection @xmath364 is fredholm of index @xmath365 hence for a regular value @xmath366 of @xmath364 , the fiber is a smooth manifold of dimension @xmath367 . by the sard ",
    "smale theorem , the set of regular values of @xmath364 is dense .",
    "the second statement follows from the fact that there are only finitely many graphs in @xmath368 for a fixed @xmath358 and that finite intersection of dense subsets is dense too .      for a morse function @xmath20 and a metric @xmath26 on @xmath1 , we define @xmath369 we shall construct a natural compactification of @xmath370 .",
    "to explain the idea for the compactification of @xmath370 , we introduce the notion of a _ ( gradient ) trajectory with nodes _ as a sequence of points @xmath371 such that there is a sequence @xmath372 with @xmath373 for each @xmath75 .",
    "then it is obvious that @xmath374 , or @xmath375 .",
    "so , to describe a nonsingular trajectory connecting @xmath376 and @xmath377 , the intermediate nodes @xmath378 are unnecessary . however ,",
    "to describe a broken trajectory as a limit of non - singular trajectories , they are necessary . for example , suppose a 1-parameter family @xmath379 of nonsingular trajectories between two nodes , say @xmath380 and @xmath381 , converges to a twice broken trajectory @xmath157 , broken at two critical points @xmath25 and @xmath382 , as @xmath383",
    ". see figure  [ fig : convergence ] .",
    "the positions of @xmath384 and @xmath385 are not enough to determine @xmath157 uniquely , since there may be not only one possibility for the trajectory connecting @xmath25 and @xmath382 .",
    "if we consider intermediate point , say @xmath386 , on @xmath379 , that converges to a point @xmath387 with @xmath388 , then the position of @xmath387 determines the trajectory between @xmath25 and @xmath382 uniquely , and thus the limit @xmath157 is determined uniquely as well . if the limit is @xmath184-times broken trajectory , then it suffices to consider appropriate family of nodes @xmath389 to describe the limiting behavior .",
    "this observation suggests that the moduli space should be defined as the space of  equivalence classes \" of trajectories with nodes , where we say that two trajectories with nodes @xmath390 and @xmath391 respectively are equivalent if @xmath392 and @xmath393 .",
    "then it will turn out that the limiting behavior of the moduli space near the end is nonsingular , in the sense that the moduli space can be considered as the interior of a smooth manifold with corners .",
    "see proposition  [ prop : bm2_mfd ] for precise statement .      from now on we shall construct a compactification of @xmath370 .",
    "one can easily check the following lemma .",
    "[ lem : ordered ] for any @xmath17 morse function @xmath18 , there is an arbitrarily @xmath17-small deformation of @xmath20 in @xmath16 such that all the critical values of the resulting morse function are distinct .",
    "so , in the following , we assume that @xmath20 is chosen as in lemma  [ lem : ordered ] . since",
    "a smooth function on @xmath1 that is sufficiently close in @xmath16 to a morse function is again a morse function , we may assume that @xmath20 is morse .",
    "suppose that the singular set @xmath394 is ordered so that @xmath395 for each @xmath396 .",
    "we put @xmath397 . for a small number @xmath333 ,",
    "let @xmath398 , @xmath399 and @xmath400 .",
    "note that @xmath401 contains exactly one critical point of @xmath20 .",
    "( see figure  [ fig : wk ] . ) for a pair of subsets @xmath402 of @xmath1 , we write @xmath403 we choose a small open cover @xmath404 of @xmath401 . for each @xmath405 , we shall describe @xmath406 and its compactification .",
    "there are three cases for @xmath405 :    1 .",
    "@xmath407 , 2 .",
    "@xmath408 ( and thus @xmath409 ) , 3 .",
    "@xmath410 and @xmath409 .",
    "* case ( 1 ) : * in this case , the negative gradient trajectory starting from any point @xmath35 of @xmath411 intersects @xmath412 .",
    "we denote the intersection point on @xmath412 by @xmath413 .",
    "then the mapping @xmath414 defines a smooth embedding @xmath415 and we have @xmath416 .",
    "one can see that there are no ends of @xmath417 in the image of the interior of @xmath411 , so it is not necessary to compactify the moduli space here , namely , we define @xmath418    * case ( 2 ) : * in this case , @xmath406 is a submanifold of @xmath419 diffeomorphic to @xmath420 . by morse s lemma ,",
    "there is a local coordinate of a neighborhood @xmath421 of @xmath422 on which @xmath20 agrees with @xmath423 one can choose a metric on @xmath1 so that the metric on @xmath421 corresponds to the standard metric on @xmath424 .",
    "we choose @xmath425 and @xmath411 so small that a neighborhood of @xmath426 in @xmath412 is included in @xmath421 and that @xmath427 . by the local coordinate of @xmath421 , we have the following local description .",
    "@xmath428 to simplify the argument , we replace @xmath412 with @xmath429 which is tangent to @xmath412 along @xmath430 .",
    "this replacement does not cause any trouble since we are interested only in the local form of the moduli space of trajectories on a neighborhood of @xmath431 . under the local coordinate of @xmath421",
    ", @xmath432 can be considered as a subset of @xmath433 , and similarly @xmath434 , where @xmath435 .    by solving the differential equation @xmath436",
    "we obtain @xmath437 where @xmath438 .",
    "namely , @xmath439 agrees with the image of the restriction of an embedding @xmath440 given by the formula in ( [ eq : m2(ul ) ] ) to @xmath441 .",
    "now we shall construct a compactification of @xmath439 as the compactification of the embedding considered above .",
    "let @xmath442 be the embedding defined by @xmath443 where @xmath438 .",
    "the image of @xmath444 has a canonical compactification as follows .",
    "let @xmath445 denote the total space of the tautological oriented half - line ( @xmath446 ) bundle over the oriented grassmannian @xmath447 .",
    "let @xmath448 be the map defined by @xmath449 in the following diagram : @xmath450 ^ -{\\varphi } \\ar[rd]_-{\\pi } &          \\r^i\\times s_{\\sqe}^{i-1 } \\ar[r]^-{\\mathrm{pr}_2 } \\ar[d]^-{\\mathrm{pr}_1 } &           s_{\\sqe}^{i-1}\\\\      & \\r^i &      } \\ ] ] where @xmath451 is the embedding , which maps a point @xmath452 on a half - line @xmath453 ( starting at the origin ) to the pair @xmath454 . here",
    ", @xmath455 is the image of the zero section of the tautological bundle @xmath456 , that is diffeomorphic to @xmath457 .",
    "moreover , the restriction of @xmath364 to the complement of @xmath458 is a diffeomorphism onto @xmath459 and the restriction of @xmath460 to @xmath459 agrees with @xmath444 .",
    "so @xmath461 is a compactification of @xmath462 to a smooth submanifold with boundary .",
    "( in fact , @xmath445 is the blow - up of @xmath463 in @xmath464 . )",
    "the compactification of @xmath439 is obtained from @xmath465 , as follows .",
    "let @xmath466 be the embedding defined by @xmath467 and let @xmath468 be its compactification : @xmath469 this is just the direct product of @xmath465 with the identity on @xmath470 .",
    "let @xmath471 be the embedding defined by @xmath472 and let @xmath473 be the embedding defined by @xmath474 now the following lemma is evident .",
    "[ lem : phi_compact ] the following assertions hold .",
    "1 .   @xmath475 .",
    "2 .   @xmath476 in @xmath477 .",
    "3 .   @xmath478 is a smooth submanifold with boundary .",
    "hence @xmath480 .",
    "namely , @xmath481 is the space of once broken trajectories .",
    "we define @xmath482 if @xmath411 is small enough , then the image of @xmath411 under the negative gradient flow is included in a small neighborhood of @xmath483 in @xmath484 .",
    "since @xmath484 is tangent to @xmath412 along @xmath430 , the negative gradient flow gives a canonical embedding @xmath485 that induces a diffeomorphism @xmath486 .",
    "we define @xmath487    * case ( 3 ) : * in this case , the negative gradient flow gives an isotopy @xmath488\\ ] ] for every @xmath489 , such that @xmath490 .",
    "put @xmath491 . if @xmath411 is small enough",
    ", then for some choice of @xmath492 , the open set @xmath493 is included in @xmath421 ( a neighborhood of morse s lemma ) . then the image of the compactification of @xmath494 under the diffeomorphism @xmath495 gives a compactification @xmath496 of @xmath406 .",
    "now we define @xmath497 where @xmath496 and @xmath498 are glued along @xmath499 through the inclusion induced maps .",
    "the compactifications @xmath500 , @xmath501 , @xmath502 are similarly defined .",
    "lemma  [ lem : phi_compact ] and its analogues imply the following proposition .",
    "[ prop : dm(w , l ) ] @xmath503 ( resp .",
    "@xmath500 , @xmath501 ) is a smooth submanifold of @xmath504 ( resp .",
    "@xmath505 , @xmath506 ) with corners , with @xmath507\\tcoprod \\delta_{l_k}\\ ] ] ( resp .",
    "@xmath508 , @xmath509 ) .",
    "the restriction of @xmath502 on the complement of @xmath510 is a smooth submanifold of @xmath511 with corners , with @xmath512\\cup_{(p_k , p_k ) } \\delta_{w_k}.\\ ] ]      we will construct a compactification of @xmath513 , @xmath514 , by patching together the various compactifications obtained above . first , we construct a compactification of @xmath515 . the moduli space @xmath515 can be identified with the intersection of @xmath516 with @xmath517 .",
    "it is easy to see that the intersection is transversal .",
    "moreover , the transversality extends to the compactifications for a generic @xmath29 , as in the following lemma .",
    "[ lem : glue_m2 ] @xmath518 is transversal to @xmath519 if @xmath29 satisfies the morse ",
    "smale condition .",
    "let @xmath35 be a point on the intersection .",
    "the orthogonal complement of @xmath520 is @xmath521 , where @xmath522 is the orthogonal complement of @xmath523 .",
    "so it suffices to show that @xmath524 projects surjectively onto @xmath521 .",
    "but this follows from the morse ",
    "smale condition .    for a morse ",
    "smale pair @xmath29 , we define @xmath525,\\ ] ] where @xmath526 is the projection @xmath527 .",
    "if @xmath29 is morse  smale , @xmath528 is a smooth manifold with corners , whose boundary is given by @xmath529\\\\      \\cup\\,&\\mathrm{pr}\\bigl [      \\calm_2(f;w_k , l_k)\\times \\partial\\bcalm_2(f;l_k , l_{k-1})\\cap \\widehat{\\delta}_{l_k }      \\bigr]\\\\      \\cup\\,&\\mathrm{pr}\\bigl [      \\partial\\bcalm_2(f;w_k , l_k)\\times \\partial\\bcalm_2(f;l_k , l_{k-1})\\cap \\widehat{\\delta}_{l_k }      \\bigr ] .",
    "\\end{split}\\ ] ] the interior of @xmath528 is canonically diffeomorphic to @xmath515 .    by repeating similar extensions inductively , we will obtain a compactification @xmath530 of @xmath513 as a submanifold of @xmath531 with corners whose boundary is given by the subspace of broken trajectories .",
    "we consider the gluing of @xmath530 and @xmath532 to construct @xmath533 as follows .",
    "we consider @xmath534 as a submanifold of @xmath530 and let @xmath535 be the inclusion .",
    "let @xmath536 be the codimension 0 embedding given by @xmath537 namely , @xmath538 forgets the node @xmath539 .",
    "this is an embedding since @xmath540 does not include critical point of @xmath20 .",
    "then we define @xmath541 where the gluing map is given by @xmath542 .    extending in this way",
    ", we will finally obtain the moduli space @xmath543 .",
    "moreover , a similar extension is valid also for the second factor @xmath544 and we will finally get @xmath545",
    ". we will write @xmath546 let @xmath547 be the closure of the lift of the diagonal @xmath548 in @xmath549 .",
    "the following proposition is evident .",
    "[ prop : bm2_mfd ] let @xmath29 be a morse ",
    "smale pair that is ordered as in lemma  [ lem : ordered ] .",
    "then @xmath549 is a smooth compact manifold with corners on the complement of @xmath547 , whose boundary is given by the space of broken trajectories .",
    "the interior of @xmath549 is canonically diffeomorphic to the interior of @xmath370 .",
    "[ rem : m2_nomfd ] the compactification @xmath549 is not a submanifold of @xmath550 whereas @xmath370 is a submanifold of @xmath550 .",
    "there is a canonical continuous extension @xmath551 of the inclusion @xmath552 , that assigns to each trajectory with nodes the pair of boundary nodes .",
    "the image of @xmath553 is not a submanifold of @xmath550 with corners since the dimension of some faces of the boundary decreases .      by proposition  [ prop : dm(w , l ) ] , the subspace @xmath554 of @xmath503 is a smooth submanifold of @xmath555 .",
    "so , one could construct a compactification @xmath556 by a similar construction as above if one starts from @xmath554 .",
    "we write @xmath557 one could also construct a compactification @xmath558 similarly for some @xmath559 . by a similar argument as given in the proof of proposition  [ prop : bm2_mfd ] , the following well - known proposition follows .",
    "let @xmath29 be a morse ",
    "smale pair that is ordered as in lemma  [ lem : ordered ] .",
    "then @xmath560 ( resp .",
    "@xmath561 ) has a natural compactification to a smooth manifold with corners @xmath562 ( resp .",
    "@xmath563 ) , whose codimension @xmath184 stratum is @xmath564      for a closed @xmath145-dimensional manifold @xmath1 , the configuration space @xmath303 is a smooth submanifold of @xmath565 , that is the complement of the closed subset @xmath566 there is a natural filtration @xmath567 with @xmath568 the difference @xmath569 is a disjoint union of smooth submanifolds of @xmath570 .",
    "this property allows one to iterate ( real ) blow - ups along the filtration from the deepest one : first , one can consider the blow - up @xmath571 along the @xmath145-dimensional submanifold @xmath572 of @xmath565 . recall that a blow - up replaces a submanifold with its normal sphere bundle . since the closure of @xmath573 in @xmath571 is also a disjoint union of smooth submanifolds ( with boundaries ) , one can apply another blow - up along it , and so on .",
    "after the blow - ups along all the strata of @xmath574 of codimension @xmath575 , one obtains a smooth compact manifold with corners @xmath576 .    we will need a precise description of the boundary of @xmath576 in the proof of invariance of @xmath577 , so we shall briefly recall it here .",
    "the space @xmath576 has a natural stratification corresponding to bracketings of the @xmath81 letters @xmath578 , e.g. , @xmath579 ( see @xcite ) . roughly speaking",
    ", a pair of brackets corresponds to a face created by one blow - up .",
    "for example , the face corresponding to @xmath579 is obtained by a sequence of blow - ups corresponding to a sequence @xmath580 .",
    "the codimension one ( boundary ) strata of @xmath576 correspond to bracketings of the form @xmath581 , with only one pair of brackets .",
    "the stratum @xmath582 of @xmath583 corresponding to the bracketings @xmath584 is the face created by the blow - up along the closure of the following submanifold of @xmath565 : @xmath585 in the result of the previous blow - ups .",
    "more precisely , @xmath582 can be naturally identified with the blow - ups of the total space of the normal @xmath586-bundle of @xmath587 along the intersection with the closures of deeper diagonals that correspond to deeper bracketings .",
    "the fiber of the normal @xmath586-bundle over a point @xmath588 is @xmath589 where the coordinate @xmath590 corresponds to @xmath591 ( where it makes sense ) via a local framing of @xmath592 .",
    "the stratum @xmath582 is a fiber bundle over @xmath593 .",
    "we denote the fiber of @xmath582 over a point of @xmath593 by @xmath594 .",
    "there is a canonical identification of @xmath594 with the subset of @xmath595 consisting of configurations @xmath596 such that @xmath597 and @xmath598 .",
    "we denote by @xmath599 the closure of the image of the inclusion @xmath600 .",
    "the base space @xmath593 is naturally diffeomorphic to @xmath601 and we denote by @xmath602 the projection @xmath603 .",
    "so @xmath582 has the structure of the pullback of the associated @xmath599-bundle of @xmath604 ( @xmath599 is an @xmath605-space ) pulled back by @xmath606 .",
    "the definition of @xmath607 for a subset @xmath608 corresponding to the bracketing @xmath609 is similar .",
    "it will turn out that the faces of @xmath583 corresponding to coincidence of two points are special among the codimension one strata of @xmath576 .",
    "we denote by @xmath610 (  pri \" for principal ) the union of the faces corresponding to coincidence of two points and we denote by @xmath611 (  hi \" for hidden ) the union of all the faces corresponding to coincidence of at least three points .",
    "we shall construct a compactfication @xmath612 of @xmath287 .",
    "we shall first give another definition of @xmath287 using @xmath370 .",
    "for simplicity , we again assume that the non - compact edges in @xmath59 are labeled ( via @xmath292 ) by @xmath293 .",
    "we define an embedding @xmath613 as follows . for simplicity",
    ", we only give a definition of @xmath614 for @xmath38 of example  [ ex : phi ] . in that case , we define @xmath615 let @xmath616 be the subspace of @xmath617 defined by @xmath618 then there exists a canonical diffeomorphism @xmath619 and one may see that @xmath620    we will construct a compactification of @xmath621 . there is a straightforward extension @xmath622 of @xmath614 . for example , for @xmath38 of example  [ ex : phi ] , @xmath623 where @xmath624 ( resp .",
    "@xmath625 ) be the continuous map that assigns the terminal point ( resp .",
    "source point ) in a ( possibly broken ) trajectory , that extend the inclusions @xmath626 ( resp .",
    "@xmath627 ) . there is a canonical embedding @xmath628 , that induces a diffeomorphism onto the interior .",
    "then we define @xmath629 the following proposition follows immediately .",
    "1 .   @xmath630 .",
    "the space @xmath631 is compact .",
    "2 .   on a neighborhood @xmath326 of a point on the strata of codimension @xmath632 of @xmath633 ,",
    "@xmath634 is transversal to @xmath616 .",
    "thus @xmath635 is a smooth submanifold with boundary .",
    "3 .   @xmath636 + @xmath637\\cap(\\bcalm_\\gamma(\\vec{f})\\cap\\bpsi_{\\vec{f}}(u))$ ] .",
    "+ namely , the codimension one stratum of @xmath631 consists of flows having 1 .",
    "one once broken edge , or 2 .",
    "one subgraph collapsed into a point .    by remark  [ rem : m2_nomfd ]",
    ", @xmath631 may not be a smooth submanifold of @xmath576 on the image from the strata of codimension @xmath10 .",
    "to make this smooth submanifold , one needs to replace @xmath576 with @xmath638 for some positive integer @xmath19 .",
    "then @xmath634 induces an embedding of the smooth manifold @xmath639 .",
    "let @xmath18 be a morse function and @xmath26 be a metric on @xmath1 that is morse  smale .",
    "we emphasize that we are assuming that @xmath642 is odd .",
    "we shall describe the induced orientation on the codimension 1 stratum @xmath643 of broken trajectories @xmath644 with @xmath645 that is broken at a critical point @xmath19 when @xmath29 is morse  smale .",
    "we consider @xmath643 as a submanifold of @xmath550 . in the following we use the orientation convention of appendix  [ s : ori ] .",
    "let @xmath291 be a point on @xmath646 that is close to @xmath19 and choose a small neighborhood @xmath647 of @xmath291 in @xmath1 , which is so small that @xmath647 is included in a local model @xmath648 of the morse lemma around @xmath19 .",
    "let @xmath649 and let @xmath650 .",
    "choose a local coordinate @xmath651 on the morse model @xmath648 so that @xmath652 corresponds to @xmath19 .",
    "if @xmath653 agrees on @xmath648 with the standard quadratic form @xmath654 , then we put @xmath655 .",
    "we shall describe the orientation of @xmath656 that is induced from the orientation of @xmath562 .",
    "suppose that @xmath657 , @xmath658 ( so that @xmath659 ) .",
    "let @xmath660 be the embedding defined by @xmath661 where @xmath662 and let @xmath663 be its compactification as above ( see ( [ eq : phi  ] ) ) .",
    "then we have @xmath664 note that the image of @xmath665 agrees with the following subspace @xmath666    let @xmath667 . by symmetry",
    ", we need only to consider the orientations on a neighborhood @xmath668 of @xmath669 .",
    "moreover we assume for simplicity that @xmath670 .",
    "we put @xmath671 for @xmath672 , @xmath673 , where these make sense .",
    "this gives @xmath674 we also consider @xmath675 as a submanifold of @xmath676 via the embedding @xmath677 .",
    "the orientation of @xmath675 , considered as a submanifold of @xmath676 , induced from ( [ eq : ori_d_given ] ) is @xmath678 hence we obtain @xmath679 this induces the following orientation on the boundary : @xmath680 note that the inward normal direction of @xmath681 corresponds to the outward normal direction of @xmath682 ( recall that @xmath682 corresponds to the boundary face of @xmath683 ) .",
    "so the dual of the inward vector field with respect to the standard metric is given by @xmath684 . then apply ( [ eq : ind_ori_boundary ] ) .",
    "given these data , we compute @xmath685 as follows .",
    "@xmath686 so we have @xmath687 where @xmath684 corresponds to the dual of @xmath688 with respect to the standard metric",
    ". therefore , @xmath689 this agrees with the orientation of @xmath690 induced from @xmath691 given above in ( [ eq : odd ] ) .",
    "[ lem : ind_ori_d ] the normal orientation on @xmath692 induced from @xmath691 agrees with @xmath693 .",
    "suppose that @xmath657 and @xmath694 ( so that @xmath695 ) .",
    "the orientation of @xmath696 is described as follows .",
    "let @xmath697 be the embedding defined by @xmath698 where @xmath438 and let @xmath699 be its compactification .",
    "then we have @xmath700 note that the image of @xmath665 agrees with the following subspace @xmath701    let @xmath702 and we consider the orientations on a neighborhood @xmath668 of @xmath703 .",
    "moreover we assume that @xmath704 for simplicity .",
    "we put @xmath705 for @xmath672 , @xmath673 , where these make sense .",
    "this gives @xmath706 we also consider @xmath707 as a submanifold of @xmath676 via the embedding @xmath708 .",
    "the orientation of @xmath707 , considered as a submanifold of @xmath676 , induced from ( [ eq : ori_a_given ] ) is @xmath709 hence we obtain @xmath710 this induces the following orientation on the boundary : @xmath711    given these data , we compute @xmath712 as follows .",
    "@xmath713 so we have @xmath714 where @xmath715 corresponds to the dual of @xmath688 .",
    "therefore , @xmath716 this agrees with @xmath717 of the orientation of @xmath718 induced from @xmath719 given above in ( [ eq : oda ] ) .",
    "[ lem : ind_ori_a ] the normal orientation on @xmath720 induced from @xmath719 agrees with @xmath721 .",
    "0 suppose that @xmath722 , @xmath723 and @xmath724 ( so that @xmath725 , @xmath695 ) .",
    "we put @xmath726 then we have @xmath727 hence @xmath728 on the other hand , we can consider @xmath729 as a submanifold of @xmath676 as above .",
    "then we have @xmath730 thus the induced orientation from @xmath731 on the bounary is @xmath732 this gives the following lemma .",
    "[ lem : o(m)o(m ) ] the orientation on @xmath733 induced from @xmath731 agrees with @xmath734 .      to describe orientation of @xmath549",
    ", we need to describe orientations of @xmath736 for all charts @xmath737 .",
    "it suffices to describe orientations of the basic cases @xmath738 , @xmath739 , since the orientations of any pieces @xmath736 are canonically induced from the basic ones .",
    "the orientation of @xmath740 is as follows .",
    "let @xmath697 and @xmath699 be the same as above ( in ( [ eq : phi_2 ] ) ) .",
    "then as above we have @xmath741    let @xmath702 and we consider the orientations on a neighborhood @xmath668 of @xmath742 .",
    "we put @xmath743 for @xmath672 , @xmath673 , where these make sense .",
    "this gives @xmath744 we also consider @xmath738 as a submanifold of @xmath676 via the embedding @xmath708 .",
    "the orientation of @xmath738 , considered as a submanifold of @xmath676 , induced from the standard orientation @xmath745 of @xmath326 is @xmath746 hence we obtain @xmath747 this induces the following orientation on the boundary : @xmath748 for @xmath120 close to @xmath749 .",
    "now the normal orientation of @xmath750 is as follows .",
    "@xmath751 therefore , @xmath752 this agrees with @xmath753 of the normal orientation of @xmath754 induced from @xmath755 given above . 0",
    "let @xmath756 be the embedding defined similarly as ( [ eq : phi  ] ) and let @xmath757 be the diffeomorphism defined by @xmath758 .",
    "the orientation of @xmath759 can be described as follows : @xmath760 hence the induced orientation on @xmath761 pulled back by @xmath762 is given by @xmath763    we put @xmath764 for @xmath672 , @xmath765 .",
    "we fix a canonical orientation of @xmath766 by the rule @xmath767 , i.e. , we put @xmath768 also , we fix a canonical orientation @xmath769 by the rule @xmath770 , i.e. , we put @xmath771 since @xmath145 is odd .",
    "thus we get @xmath772 let @xmath773 be the inclusion induced map .",
    "then the image of @xmath774 agrees with @xmath775 .",
    "[ lem : ind_ori_m2 ] the normal orientation on @xmath740 induced from @xmath776 agrees with @xmath753 of the orientation that is mapped from the orientation of @xmath777 fixed above ( in ( [ eq : oaod ] ) ) , through @xmath774 .",
    "( note that @xmath778 . )",
    "[ lem : ind_ori_m2 ] the normal orientation on @xmath740 induced from @xmath755 agrees with @xmath779 .        for a graph @xmath38 without bivalent vertices ,",
    "the moduli space @xmath287 can be defined as the intersection of submanifolds of @xmath303 , as follows .",
    "suppose for simplicity that the separated edges of @xmath38 are labeled @xmath781 .",
    "let @xmath782 be the projection @xmath783 and let @xmath784 and @xmath785 be the submanifolds of @xmath303 defined by @xmath786 where @xmath787 .",
    "note that @xmath788 , @xmath789 .",
    "then we have @xmath790 where the intersection is transversal .",
    "let @xmath791 and @xmath792 be differential forms that represent normal orientations of @xmath793 and @xmath794 , and that are locally defined on a neighborhood @xmath795 of a crossing point in @xmath303 .",
    "we represent orientation of @xmath287 by a wedge product of @xmath796 s and @xmath797 s .",
    "now we assume that @xmath798 , so that @xmath799 and @xmath800 are even .",
    "we shall define a standard orientation of @xmath287 from the orientation of @xmath38 , as follows .",
    "recall that the orientation @xmath801 of @xmath38 is an orientation of the real vector space @xmath802 and we write @xmath803 .",
    "the @xmath804 part determines an orientation of @xmath303 and the @xmath805 part together with the orientations of the descending manifolds determine @xmath797 s and @xmath796 s .",
    "then we define the standard orientation of @xmath287 by the formula @xmath806 since @xmath799 and @xmath807 are even , the order of wedge product does not matter .",
    "the same rule equally works for graphs in @xmath808 , @xmath809 etc . without bivalent vertices , since in that case only one @xmath794 is odd codimensional , so again the orientation of @xmath287 is canonically determined from the graph orientation .    for a graph in @xmath92 without bivalent vertices",
    "such that there is exactly one @xmath559 with @xmath810 , exactly one @xmath559 with @xmath811 and otherwise @xmath160 , let @xmath812 and @xmath813 be such that @xmath814 , @xmath815 .",
    "then we define a standard orientation of @xmath287 by @xmath816    we also consider orientations of @xmath287 for graphs @xmath817 with only one bivalent vertex . for three possiblilies for the position of the bivalent vertex in @xmath38 ,",
    "we define a standard orientation of @xmath287 as follows .",
    "1 .   @xmath818 , @xmath819 .",
    "let @xmath820 be the graph obtained from @xmath38 by removing the segment @xmath821 . in this case",
    ", @xmath287 is canonically diffeomorphic to @xmath822 .",
    "we define @xmath823 2 .",
    "@xmath824 , @xmath825 .",
    "let @xmath820 be the graph obtained from @xmath38 by removing the segment @xmath826 . in this case",
    ", @xmath287 is canonically diffeomorphic to @xmath827 .",
    "we define @xmath828 3 .   @xmath829 . in this case",
    ", the orientation of @xmath287 is determined by the intersection of @xmath830 ( codimension @xmath831 ) with the intersection of @xmath793 s and @xmath794 s .",
    "we define @xmath832 as @xmath833      suppose that @xmath835 has no bivalent vertices .",
    "we shall compare the orientation of a face of @xmath836 induced from @xmath832 and the standard orientation of the same face of @xmath836 fixed in ",
    "[ sss : std_ori ] .",
    "suppose that @xmath290 has no bivalent vertex and that there is only one number @xmath559 with @xmath810 and @xmath837 for @xmath838 .",
    "let @xmath812 be such that @xmath814 .",
    "as in  [ sss : std_ori ] , we consider @xmath287 as the intersection of the chains @xmath794 s and @xmath793 s in @xmath303 .    choose a number @xmath184 such that @xmath839 and put @xmath840 then @xmath841 let @xmath842 be one of the graphs that appear in the sum @xmath843 .",
    "we shall describe the orientation on the face @xmath844 of @xmath836 corresponding to @xmath842 , induced from the standard orientation of @xmath287 .",
    "1 .   @xmath845 . by lemma  [ lem : ind_ori_d ] ,",
    "the orientation of @xmath846 induced from the standard one @xmath847 is given by @xmath848 this agrees with the standard orientation fixed in  [ sss : std_ori ] .",
    "2 .   @xmath849 . by lemma  [ lem : ind_ori_a ] ,",
    "the induced orientation of @xmath850 induced from the standard one @xmath851 is given by @xmath852 this differs from the standard orientation by @xmath853 .",
    "3 .   @xmath854",
    ". the induced orientation on the boundary is as in lemma  [ lem : ind_ori_m2 ] , which agrees with @xmath753 of the standard orientation ( [ eq : oh ] ) .",
    "now we have seen that the signs in the formula of the definition of @xmath156 is consistent with the induced orientations on the boundary of @xmath631 .",
    "namely , we have the following proposition .",
    "[ prop : dbm ] suppose that @xmath855 . for @xmath856 without bivalent vertices",
    ", we have @xmath857 as oriented 0-dimensional manifolds .",
    "fix a smooth riemannian manifold @xmath842 and a graph @xmath38 with only compact edges that is a subgraph of a graph in @xmath858 .",
    "we consider the moduli space of a singular graph with @xmath38 collapsed into a point .",
    "since @xmath38 is a subgraph of a graph in @xmath858 , it may have vertices of valence @xmath42 that is a part of a black vertex .",
    "we call such a vertex a bivalent or a univalent black vertex .",
    "suppose that @xmath38 has @xmath81 vertices and @xmath859 edges .",
    "we consider the trivial bundles @xmath860 note that @xmath842 is not necessarily @xmath145 dimensional .",
    "let @xmath861 be the gauss map that assigns the unit vector @xmath862 and let @xmath863 be the map defined by @xmath864 .",
    "suppose given a smooth section @xmath865 of @xmath364 .",
    "since @xmath866 is obviously transversal to @xmath867 on each fiber , the subset @xmath868 forms a smooth subbundle of @xmath869 .",
    "now we define @xmath870 for a sequence @xmath871 of sections of the sphere bundle @xmath364 .",
    "one can also define @xmath872 for a section @xmath873 of the trivial @xmath874-bundle over @xmath842 similarly .",
    "the formula ( [ eq : intersection ] ) also defines an orientation of @xmath875 if the intersection is transversal .",
    "[ lem : m - local_mfd ] for a generic choice of @xmath873 , the moduli space @xmath875 is a smooth submanifold of @xmath876 of codimension @xmath877 .",
    "if @xmath842 is compact , then so is @xmath875 .",
    "note that @xmath878 is a smooth submanifold of codimension @xmath879 . by the transversality theorem",
    ", one can deform @xmath873 slightly and inductively so that the intersection ( [ eq : intersection ] ) is transversal in the above sense .",
    "thus for a generic choice of @xmath873 , @xmath875 is a smooth submanifold .",
    "[ lem : symmetry ] suppose that @xmath38 has a bivalent black vertex @xmath291 and that the edges of @xmath38 including the vertex @xmath291 are @xmath880 and @xmath881 .",
    "let @xmath820 be the labeled graph obtained from @xmath38 by exchenging labels for edges @xmath880 and @xmath881 .",
    "then there is an involution @xmath882 which leaves @xmath883 invariant and reverses the orientation .",
    "let @xmath884 be a point on @xmath875 .",
    "suppose that the vertices @xmath291 , @xmath885 and @xmath886 of @xmath38 correspond to @xmath887 , @xmath888 and @xmath889 respectively .",
    "then the automorphism of @xmath890 which sends @xmath887 to @xmath891 gives rise to the desired involution .",
    "[ lem : dilation ] suppose that @xmath38 has a univalent black vertex @xmath291 and @xmath892 .",
    "then @xmath875 admits a smooth free @xmath893-action .",
    "suppose that the edge of @xmath38 including the vertex @xmath291 is @xmath894 . since @xmath892 , there is a dilation of the trajectory corresponding to @xmath894 in a graph flow , which is independent of overall dilation .",
    "this gives a desired @xmath893-action .",
    "now we consider the case @xmath855 , @xmath856 , in which case @xmath631 is 1-dimensional by proposition  [ prop : m_mfd ] . for a subset @xmath895 of @xmath896 ,",
    "let @xmath897 denote the subgraph of @xmath38 with @xmath898 such that @xmath899 .",
    "let @xmath900 be the subsequence corresponding to @xmath901 . according to the description of @xmath583 in  [ ss : fm ] ,",
    "the face of @xmath836 corresponding to the face @xmath607 is diffeomorphic via the induced map by a trivialization @xmath902 ( framing ) , to @xmath903 which is at most a 0-dimensional oriented manifold . by lemma  [ lem : symmetry ]",
    ", we have @xmath904 if @xmath897 has a bivalent black vertex . by lemma  [ lem : dilation ] , if @xmath905 and if @xmath897 has a univalent vertex , then @xmath906 since @xmath907 , the subgraph @xmath897 must have bivalent or univalent black vertices . thus proposition  [ prop : dbm ]",
    "implies the following lemma .",
    "[ prop : dm = md ] suppose that @xmath855 , @xmath856 .",
    "then we have @xmath908      now we assume that @xmath855 , @xmath909 , @xmath910 .      by proposition  [ prop :",
    "m_mfd ] , for any graph @xmath911 without bivalent vertices the moduli space @xmath631 is a compact @xmath463-dimensional submanifold of @xmath912 .",
    "so the number of the components can be counted with signs if we orient @xmath631 by the standard orientation of  [ ss : ori_mg ] .",
    "let @xmath913 be the number of components counted with signs .",
    "then the correspondence @xmath914 defines a linear map @xmath915    let @xmath916 be the image of @xmath917 under @xmath918 .",
    "there is a unique linear map @xmath919 such that @xmath920 .    that the @xmath127-relation and @xmath133-relation are included in the kernel of @xmath921",
    "is obvious from the definition of the moduli space @xmath631 and the morse complex .",
    "we show that @xmath922 is included in the kernel of @xmath921 . but",
    "this follows immediately from proposition  [ prop : dm = md ] . the proof is completed .",
    "now we define @xmath923\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f})\\in\\cala_{2k,3k}. \\end{split}\\ ] ] by lemma  [ lem : tr_closedness ] , @xmath924 does not depend on the choice of @xmath226 .",
    "however it may still depend on the choice of @xmath355 .",
    "we need to consider a correction term to make this an invariant of @xmath1 .",
    "let @xmath926 be the subspace of all @xmath927 such that one of the following holds :    1 .",
    "@xmath652 is not a critical point of @xmath20 , 2 .",
    "@xmath652 is a nondegenerate critical point of @xmath20 ( @xmath928 ) , 3 .",
    "@xmath652 is a birth / death singularity of @xmath20 ( @xmath929 ) .",
    "since @xmath925 is @xmath930-invariant , we can consider the associated subbundle @xmath931 of the jet bundle @xmath932 with the structure group @xmath930 if @xmath842 is an oriented smooth @xmath145-manifold . by k. igusa s lemma saying that the  framed \" version of @xmath925 is weakly contractible ( @xcite ) , one obtains the following lemma immediately .",
    "let @xmath1 be a closed oriented @xmath145-manifold and let @xmath33 be a compact oriented @xmath933-manifold with @xmath934 .",
    "suppose that there exists a rank @xmath145 subbundle @xmath935 of @xmath936 with @xmath937 .",
    "then any section @xmath938 has an extension @xmath939 .",
    "now we shall define a correction term .",
    "we consider @xmath940 as the one point compactification @xmath941 .",
    "let @xmath942 for some large @xmath492 .",
    "choose a compact spin 4-manifold @xmath33 with @xmath934 and choose a point @xmath943 and a small open ball @xmath944 including @xmath945 .",
    "fix a diffeomorphism @xmath946 which sends @xmath945 to @xmath945 . since @xmath947 ,",
    "if a framing @xmath948 on @xmath949 is given , then one can find a compact spin 4-manifold @xmath33 with @xmath934 and with a spin structure that is compatible with the spin structure of @xmath1 determined by @xmath948 .",
    "we fix @xmath948 such that it agrees on @xmath950 with the pullback of the standard one on @xmath951 by @xmath952 .",
    "we extend the trivial stabilization @xmath953 on @xmath954 to a 4-framing @xmath955 on @xmath956 , which is possible since @xmath940 is stably parallelizable .",
    "[ lem : km ] suppose that @xmath955 is compatible with the spin structure on @xmath33 .",
    "then @xmath955 extends to a framing on @xmath33 if and only if @xmath957 and @xmath958 , where @xmath959 denotes the relative pontrjagin number .",
    "[ lem : km2 ] we have @xmath960 mod 2 .",
    "moreover , @xmath961 can be changed by @xmath962 by changing @xmath948 by a fiberwise @xmath963-action given by a section @xmath964 .    by lemma  [ lem : km2 ]",
    ", there is a unique framing @xmath948 with @xmath957 .",
    "moreover , since @xmath965 is a parallelizable spin 4-manifold and since @xmath966 , one can find a pair @xmath967 satisfying the condition of lemma  [ lem : km ] , if @xmath968 mod 2 and @xmath969 .",
    "the following lemma follows from the proof of ( * ? ? ?",
    "* theorem  2.6 ) .    for a @xmath69-homology 3-sphere @xmath1 ( with a canonical spin structure ) , there exists a simply - connected compact spin 4-manifold @xmath33 with @xmath934 as the spin boundary such that @xmath968 mod 2 and @xmath969 .",
    "there is another extension of @xmath948 that is canonical .",
    "the standard framing @xmath970 on @xmath971 can be replaced within @xmath951 so that it extends to a framing of @xmath972 .",
    "we denote the resulting framing of @xmath972 by @xmath973 .",
    "moreover @xmath973 can be choosen so that the signature defect vanishes : @xmath974 such a choice is canonical up to homotopy ( @xcite ) .",
    "then by gluing the pullback @xmath975 with @xmath976 , we obtain a honest framing @xmath977 of @xmath604 .",
    "the two framings @xmath977 and @xmath955 define the bundle monomorphism @xmath978 note that @xmath979 is unique up to homotopy in the sense that if one changes the honest framing @xmath948 within @xmath980 by a map @xmath981 , then @xmath977 and @xmath955 may change while @xmath979 will not change .",
    "now let @xmath967 be a pair satisfying the condition of lemma  [ lem : km ] .",
    "then one can find a sub 3-framing @xmath982 of @xmath936 that extends @xmath948 and that is a sub 3-framing of @xmath955 .",
    "the 3-framing @xmath982 spans a rank 3 subbundle @xmath935 of @xmath936 .",
    "let @xmath983 be the associated @xmath925-bundle to @xmath935 .",
    "then @xmath979 induces a bundle isomorphism @xmath984 . for each @xmath75 ,",
    "let @xmath985 be a section of @xmath983 given by @xmath986 and put @xmath987 .",
    "we define @xmath988\\cdot\\#\\calm_{\\gamma}^\\loc(-\\mathrm{grad}_0j^1\\vec{\\rho}_w)\\in\\cala_{2k,3k},\\ ] ] where the moduli space @xmath989 is considered inside the trivial @xmath990-bundle over @xmath991 associated to the restriction of the @xmath971-bundle @xmath935 .    [ lem : m_finite ] for a generic choice of the extension @xmath992 , the number + @xmath993 is finite .",
    "we put @xmath994 for simplicity .",
    "since @xmath995 is a smooth 1-dimensional submanifold of @xmath33 , we may assume without loss of generality that @xmath996 if @xmath997 .",
    "we shall show that the projection of @xmath875 on @xmath33 is disjoint from a neighborhood of @xmath998 and hence from a neighborhood of @xmath999 .",
    "let @xmath820 be the graph obtained from @xmath38 by replacing @xmath1000 with @xmath1001 . by a similar argument as in the proof of lemma  [ lem : m - local_mfd ]",
    ", one sees that @xmath1002 is a smooth submanifold of @xmath1003 of codimension @xmath1004 , i.e. , a 2-dimensional submanifold .",
    "so , for a generic choice of @xmath873 , the projection of @xmath1002 on @xmath33 is disjoint from a neighborhood of @xmath998 due to a dimensional reason .",
    "recall from definition that @xmath1005 is the intersection of @xmath1002 with @xmath1006 .",
    "hence for a generic choice of @xmath873 , the projection of @xmath875 on @xmath33 is disjoint from a neighborhood of @xmath998 . by lemma  [ lem : m - local_mfd ] ,",
    "the restriction of @xmath875 to the complement of a neighborhood of @xmath999 is compact .",
    "so , for a generic choice of @xmath873 , @xmath875 is a compact 0-dimensional submanifold .",
    "we say that two compact spin 4-manifolds @xmath33 and @xmath1007 with @xmath1008 are _ relatively spin cobordant _ if there is a compact spin 5-manifold @xmath1009 with @xmath1010 whose spin structure is an extension of those of @xmath33 and @xmath1011 .",
    "[ prop : spin - cob_inv ] let @xmath33 and @xmath1007 be two compact spin 4-manifolds with @xmath1008 and @xmath1012 . if @xmath33 and @xmath1007 are relatively spin cobordant , then the following assertions hold .    1 .",
    "there exists a framing @xmath948 of @xmath949 such that @xmath955 can be extended to 4-framings of both @xmath936 and @xmath1013 .",
    "hence one can find sequences of sections @xmath1014 and @xmath1015 with @xmath1016 .",
    "2 .   for any such extensions @xmath992 and @xmath1017 , which are generic in the sense of lemma  [ lem : m_finite ] , we have @xmath1018    \\(1 ) put @xmath1019)\\cup_{g'}(-w'),\\ ] ] where the gluing maps @xmath1020 and @xmath1021 are the natural ones . by assumption",
    ", we have @xmath1022=0\\in\\omega_4^\\mathrm{spin}$ ] .",
    "then by the isomorphism @xmath1023 and by hirzebruch s signature theorem @xmath1024\\rangle$ ] for @xmath842 closed , it holds that @xmath1025 for any choice of @xmath948 .",
    "hence by choosing @xmath948 suitably , we may assume that @xmath1026 by lemma  [ lem : km2 ] .",
    "thus by lemma  [ lem : km ] , such a @xmath955 extends to 4-framings on both @xmath33 and @xmath1007 .",
    "\\(2 ) one obtains a 4-framing @xmath1027 on @xmath1028 by gluing the framings on @xmath936 , @xmath1013 and @xmath1029 on @xmath1030)$ ] that are compatible at @xmath1031 .",
    "the sub 3-framing of @xmath1027 that extends @xmath948 spans a rank 3 subbundle @xmath1032 of @xmath1028 .",
    "one obtains a section @xmath1033 of @xmath1034 by gluing @xmath992 and @xmath1017 together at the boundary . by definition of @xmath13 ,",
    "we have @xmath1035    since @xmath842 is spin null - cobordant , there exists a compact spin 5-manifold @xmath1009 with @xmath1036 .",
    "we want a parallelizable one for such a @xmath1009 .",
    "we consider the obstruction to extending the stable framing @xmath1037 of @xmath1038 over a 5-framing on @xmath1039 .",
    "since @xmath1009 is spin and since @xmath1040 , @xmath1041 and @xmath1042 , the first obstruction @xmath1043 to the extension lies in the group @xmath1044 .",
    "it is easy to see that any class in @xmath1045 can be realized by an embedding @xmath1046 .",
    "since @xmath1009 is spin , the normal bundle @xmath1047 of the image of @xmath20 is trivial .",
    "so by a surgery along a framed embedding @xmath1048 , the homology class @xmath1049 $ ] can be eliminated .",
    "moreover , by choosing @xmath1050 suitably , we may assume that the resulting 5-manifold of the surgery is spin again since @xmath1051 is surjective .",
    "now we assume @xmath1052 by doing surgeries as in the previous paragraph , if necessary .",
    "then the next obstruction @xmath1053 for the extension lies in the group @xmath1054 . to eliminate @xmath1053 , we consider the connected sum @xmath1055 between the interiors",
    ". then one can check that the obstruction @xmath1056 vanishes in any case .",
    "this change makes both sides of ( [ eq : spin - cob_inv ] ) just multiplied by 2 .",
    "so we may assume without trouble that the obstruction @xmath1057 vanishes in advance .",
    "thus we assume that we have a framed 5-manifold @xmath1058 , that extends @xmath1059 .",
    "then a sub 3-framing of @xmath1060 defines a rank 3 subbundle @xmath1061 of @xmath1039 , that is an extension of @xmath1032 .",
    "moreover there is an extension @xmath1062 of @xmath1033 .",
    "we put @xmath1063 .",
    "let @xmath820 be the graph obtained from @xmath38 by replacing @xmath1000 with @xmath1001 .",
    "we identify the total space of the associated @xmath990-bundle to @xmath1061 with @xmath1064 via @xmath1060 .",
    "let @xmath1065 be the projection .",
    "then as mentioned in the proof of lemma  [ lem : m_finite ] , @xmath1002 is a smooth submanifold of @xmath1064 of codimension @xmath1066 , i.e. , 3-dimensional . on the other hand",
    ", @xmath1067 is a codimension 3 submanifold of @xmath1064 . for a generic choice of @xmath1068 ,",
    "the intersection of the two submanifolds is transversal and hence the intersection is a 0-dimensional submanifold .",
    "take a point @xmath1069 and a small neighborhood @xmath1070 of @xmath35 in @xmath1064 so that @xmath1070 contains exactly one intersection point .",
    "let @xmath1071 . by a suitable small deformation of @xmath1072",
    ", we may assume that    1 .",
    "@xmath1073 is a morse point of @xmath1074 and @xmath1075 , 2 .",
    "@xmath1076 is tangent to @xmath1061 .",
    "( this is possible since @xmath998 is transversal to @xmath1061 . )",
    "we consider the blow - up @xmath1077 and consider the closure of @xmath1078 in @xmath1079 .",
    "we denote the closure by @xmath1080 .",
    "since @xmath1002 is transversal to @xmath1081 , the closure @xmath1080 is a smooth submanifold of @xmath1079 with boundary . on the other hand , @xmath1082 has the closure @xmath1083 in @xmath1084 , that is a smooth submanifold with boundary .",
    "since @xmath1085 consists only of morse points , we may assume that the intersection of @xmath1083 and @xmath1080 is transversal ( even on the boundary ) and forms a 1-dimensional smooth submanifold of @xmath1079 with boundary .",
    "now we define @xmath1086 by the assumption ( 2 ) , the boundary of @xmath1087 lies in the fiber @xmath1088 of the normal sphere bundle @xmath1089 at @xmath1073 .",
    "let @xmath1090 denote the graph obtained from @xmath38 by reversing the orientation of the edge labeled @xmath559 . since @xmath1091 is transversal to @xmath1092 and since on a neighborhood of @xmath998 there is a symmetry between the moduli spaces @xmath1093 and @xmath1094 due to the symmetry of the standard model of a morse point , the intersection of @xmath1095 with @xmath1096 consists of two points in @xmath1097 that are in an antipodal position by the assumption ( 1 ) .",
    "hence one can check that @xmath1098\\cdot\\#\\partial\\bcalm_{\\gamma}^\\loc(\\vec{\\gamma};u_x)+[\\gamma^*]\\cdot\\#\\partial\\bcalm_{\\gamma^*}^\\loc(\\vec{\\gamma};u_x)\\\\ = & [ \\gamma]\\bigl(\\#\\partial\\bcalm_{\\gamma}^\\loc(\\vec{\\gamma};u_x)-\\#\\partial\\bcalm_{\\gamma^*}^\\loc(\\vec{\\gamma};u_x)\\bigr)\\\\ = & [ \\gamma]\\bigl(\\#\\partial\\bcalm_{\\gamma}^\\loc(\\vec{\\gamma};u_x)-\\#\\partial\\bcalm_{\\gamma}^\\loc(\\vec{\\gamma};u_x)\\bigr)=0 \\end{split}\\ ] ] since the symmetry reverses the orientation of @xmath1099 , and the inward normal vectors at @xmath1100 and @xmath1101 are opposite",
    ". see figure  [ fig : involution_ij ] .",
    "hence we have @xmath1102\\cdot\\#\\partial\\calm_\\gamma^\\loc(\\vec{\\gamma})\\\\      & = z_{2k,3k}^\\mathrm{anomaly}(\\vec{\\rho}_x)-\\sum_{\\gamma\\in\\calg_{2k,3k}}[\\gamma]\\cdot\\#\\calm_{d\\gamma}^\\loc(\\vec{\\gamma } ) .",
    "\\end{split}\\ ] ] by the relation of @xmath1103 , the second term in the second row vanishes .",
    "this together with ( [ eq : z(rho ) ] ) gives the desired identity .",
    "next we consider general pairs of spin 4-manifolds @xmath33 , @xmath1007 with @xmath1012 which may not be relatively spin cobordant .",
    "we choose 3-framings @xmath1104 and @xmath948 on @xmath1105 so that @xmath1106 then by lemma  [ lem : km ] , @xmath955 extends to a 4-framing of @xmath33 and @xmath1107 extends to a 4-framing of @xmath1007 .",
    "but in general @xmath948 may not be homotopic to @xmath1104 , so we may not have a 4-framing of @xmath1108)\\cup_{g'}(-w')$ ] , namely , @xmath842 may be just almost parallelizable .",
    "although we do not have a framing of @xmath842 , we have a natural rank 3 ( possibly nontrivial ) subbundle @xmath1032 of @xmath1028 that agrees with @xmath1109 on @xmath1110 $ ] , which extends those determined by @xmath1104 and @xmath948 . by choosing a generic section @xmath1111",
    ", one can also define @xmath1112 . by a similar argument",
    ", one can define @xmath1113 for any almost parallelizable , closed , connected , spin 4-manifold with @xmath1114 .",
    "let @xmath1115 denote the set of spin cobordism classes of almost parallelizable , closed , connected , spin 4-manifolds @xmath842 with @xmath1114 .",
    "by proposition  [ prop : spin - cob_inv ] , the correspondence @xmath1116 for generic @xmath1033 defines a well - defined map @xmath1117 the set @xmath1115 has a group structure given by connected sum .",
    "more precisely , if @xmath842 is an almost parallelizable , closed , connected , spin 4-manifold with @xmath1114 , then there is a framing on @xmath1118 .",
    "if @xmath1119 is another almost parallelizable , closed , connected , spin 4-manifold with @xmath1120 , then by forming the boundary connected sum @xmath1121 and capping by @xmath1122 along the boundary in a natural way , we will obtain an almost parallelizable , closed , conneced , spin 4-manifold @xmath1123 with @xmath1124 that is diffeomorphic to @xmath1125 .",
    "this defines an abelian group structure on @xmath1115 on which the inverse of @xmath842 is given by @xmath1126 .",
    "[ lem : z_hom ] the map @xmath1127 is a group homomorphism .",
    "if @xmath1022=0\\in\\omega_4^\\mathrm{spin}(2)$ ] , then we have @xmath1128\\rangle$ ] so the stabilization of the 4-framing on @xmath1129 induced from that of @xmath1118 extends over @xmath1122 .",
    "this implies that @xmath842 is stably parallelizable .",
    "then the proof of proposition  [ prop : spin - cob_inv ] shows that @xmath1130 for any generic @xmath1131 .",
    "the additivity of @xmath13 follows from the fact that @xmath13 is spin cobordism invariant , as shown in the proof of proposition  [ prop : spin - cob_inv ] , and that @xmath1132 and @xmath1133 are spin cobordant .",
    "hence @xmath13 is a homomorhism .",
    "let @xmath33 and @xmath1007 be compact , connected , spin 4-manifolds with @xmath1008 , @xmath1012 and suppose that @xmath1134 .",
    "then for each @xmath1135 there exists a constant @xmath1136 such that @xmath1137 hence @xmath1138 does not depend on the choice of @xmath1139 such that @xmath934 , @xmath958 , @xmath1140 .    by lemma  [ lem : z_hom ] ,",
    "@xmath13 is a restriction of a homomorphism @xmath1141 .",
    "so there exists a constant @xmath1136 such that @xmath1142 for @xmath1143)\\cup_{g'}(-w')$ ] .",
    "hence @xmath1144    here is the main theorem .",
    "[ thm : z_invariant ] for @xmath1135 , there is a constant @xmath1136 such that @xmath1145 does not depend on the ( generic ) choices made .",
    "thus @xmath1146 is an invariant of diffeomorphism type of @xmath1 .",
    "proof of the theorem is given in ",
    "[ s : proof_main ] .",
    "theorem  [ thm : z_invariant ] allows us to put @xmath1147 .",
    "@xmath1148 is nontrivial . in particular",
    ", the sequence @xmath1149 recovers all ohtsuki s finite type invariants ( @xcite ) over @xmath93 .",
    "@xmath1148 agrees with the configuration space integral invariant of axelrod  singer ( @xcite ) and kontsevich ( @xcite ) .",
    "we shall extend the moduli spaces @xmath370 and @xmath287 to those for 1-parameter families of functions @xmath1150 , @xmath1151 $ ] and metrics @xmath1152 . to connect two morse functions on a manifold in the space of smooth functions , 1-parameter families of morse functions are not enough .",
    "the following fact is known .",
    "two morse functions on a manifold can be connected by a 1-parameter family of smooth functions with only morse and birth / death singularities .",
    "thus , the following bifurcations , that may change the topology of moduli spaces , may happen finitely many times in a generic 1-parameter family .    1 .",
    "level exchange point , i.e. , the point where the order of the critical values changes .",
    "birth / death point .",
    "gradient @xmath1153-intersection point , i.e. , a point where a descending manifold and an ascending manifold of the same index @xmath75 intersect transversally .",
    "we may assume that no two different bifurcations overlap on a single time .",
    "in the following , we will call such a 1-parameter family a _",
    "generic 1-parameter family_.    it is convenient to represent bifurcations in a 1-parameter family by the graph of critical values , equipped with the information of gradient @xmath1153-intersections . see figure  [ fig : graphic ] for an example .",
    "such a diagram is called a _ graphic _ ( @xcite ) . in a graphic",
    ", a level exchange point corresponds to a crossing of two curves , a gradient @xmath1153-intersection between a pair of critical points is represented by a dotted arrow , and a birth / death point corresponds to beaks .",
    "when we associated an acyclic chain complex @xmath261 to a morse function @xmath1154 in  [ ss : m_g ] , we have chosen a pair @xmath1155 of critical points .",
    "we show that two such choices can be connected by a pair of connected critical point loci in a generic 1-parameter family of functions .",
    "let @xmath1156 be two @xmath17 morse functions and take pairs @xmath1157",
    ", @xmath1158 of critical points of @xmath1159 respectively .",
    "[ lem:1-acyclic ] there is a generic 1-parameter family of @xmath17 functions @xmath1160}$ ] on @xmath1 , considered as a single @xmath17-map @xmath1161\\to \\r$ ] , such that    1 .",
    "@xmath1162 has only morse or birth / death singularities for each @xmath1163 , 2 .",
    "there are critical point loci @xmath1164 and @xmath1165 in @xmath1161 $ ] for @xmath1166 that are nondegenerate on every fiber @xmath1167 , with @xmath1168 , @xmath1169 , @xmath1170 , @xmath1171 .",
    "thus we may assume the acyclicity through a generic 1-parameter family .",
    "one can raise the level of a neighborhood of @xmath1172 freely so that the level of @xmath1172 is higher than other critical values of @xmath1173 .",
    "similarly , one can lower the level of a neighborhood of @xmath1174 so that the level of @xmath1174 is lower than other critical values of @xmath1173 . for a small number @xmath1175",
    ", we define @xmath1176 in @xmath1177 as a 1-parameter family that gives the rising of @xmath1172 and the falling of @xmath1174 .",
    "we also do the same for @xmath1178 , i.e. , we define @xmath1176 in @xmath1179 as a 1-parameter family that gives the rising of @xmath1180 and the falling of @xmath1181 as @xmath1163 decreases . here",
    "we may assume that @xmath1182 and @xmath1183 .",
    "we put @xmath1184 , @xmath1185 , @xmath1186 $ ] and @xmath1187 $ ] for a small number @xmath1188 .",
    "take smooth sections @xmath1189\\to m\\times [ \\ve,1-\\ve]$ ] with disjoint images and their fiberwise tubular neighborhoods @xmath1190 and @xmath1191 , so that @xmath1192 then one can find a family of @xmath17 functions @xmath1193\\ ] ] such that    1 .",
    "@xmath1194 and @xmath1195 , 2 .",
    "@xmath1196 is nonsingular on the boundary , 3 .",
    "@xmath1196 takes the maximum value @xmath1197 on @xmath1198 and @xmath1199 , 4 .",
    "@xmath1196 takes the minimum value @xmath1200 on @xmath1201 and @xmath1202 , 5 .",
    "@xmath1196 has only morse or birth / death singularities .",
    "now the existence of the extension of @xmath1196 on @xmath1203 so that the result is as desired , is straightforward .",
    "let @xmath1204 $ ] be a closed interval in @xmath12 $ ] .",
    "for a generic 1-parameter family @xmath1205 , @xmath1206 , the moduli space @xmath1207 is defined similarly as @xmath287 by replacing @xmath1208 in the definition of @xmath287 with @xmath1176 if @xmath1163 is generic .",
    "note that if @xmath1209 , then @xmath1207 is defined only on the complement of birth / death parameters in @xmath1210 , since the set of critical points changes at birth / death parameters . for graphs @xmath38 with the dimension of the moduli space being negative ( see the formula of proposition  [ prop : m_mfd ] ) , the moduli space @xmath1207 is empty at a generic parameter @xmath1163 , but we will see that @xmath1207 may be non - empty at finitely many non - generic parameters in @xmath1210 if @xmath1211 .",
    "we check the transversality on the moduli space @xmath1207 , considered as the intersection , only for the graph @xmath38 of example  [ ex : phi ] since other cases are similar .",
    "we fix the underlying sequence @xmath71 of acyclic complexes for the graph as the restriction at @xmath1212 of the family of acyclic morse complexes obtained in ",
    "[ ss : acyclic ] .",
    "suppose that @xmath1204 $ ] does not include birth / death parameters and that @xmath1213 is generic in the sense of proposition  [ prop : m_mfd ] .",
    "we decompose @xmath38 into two parts : @xmath1214 the moduli space @xmath1215 , @xmath1216 , is given by @xmath1217 where @xmath1218 is defined by @xmath1219 and @xmath1220 .",
    "the genericity of @xmath1221 implies that @xmath1215 is a smooth submanifold of @xmath307 of dimension @xmath1222 . on the other hand , the moduli space @xmath1223 is given by the @xmath1224-dimensional manifold @xmath1225",
    "then we have @xmath1226 where @xmath1227 is the projection defined by @xmath1228 . by the transversality theorem",
    ", we may assume after a suitable small deformation of the family @xmath1229 that the intersection is transversal , and hence @xmath1230 is a smooth submanifold of dimension @xmath1231 the deformation can be chosen so small that it does not affect the genericity of @xmath1232 .",
    "more generally , we have the following proposition .    [",
    "prop : ms_mfd ] suppose that @xmath290 has no bivalent vertex .",
    "for a generic choice of a 1-parameter family @xmath1233 , the space @xmath1234 is an oriented smooth manifold of dimension @xmath1235      we construct a compactification of the moduli space @xmath1236 , where @xmath1237 $ ] is an open interval that does not include birth / death parameters , i.e. , @xmath1238 is a 1-parameter family of morse functions .      in the construction of @xmath549 ( in  [ ss : mod_short ] ) , we assumed that the critical values of @xmath20 are all distinct .",
    "however , in 1-parameter family , the loci of critical values can not in general be ordered because of crossings of curves in a graphic . instead , we consider the moduli space of  semi - short \" trajectories that are close to an exchanging pair of critical point loci .",
    "let @xmath1239 be a point on which a level exchange bifurcation occurs and choose a small neighborhood @xmath1240 of @xmath452 in @xmath1210 so that there are no other bifurcations on @xmath1240 .",
    "we shall construct a compactification of @xmath1241 .",
    "let @xmath1242 be the pair of critical point loci of @xmath1243 that are in a level exchange position .",
    "then there exists a smooth functions @xmath1244 such that    1 .",
    "@xmath1245 for all @xmath1246 , 2 .   for each @xmath1246 , there are no critical points of @xmath1176 in @xmath1247 $ ] except @xmath1248 and @xmath1249 .",
    "we put @xmath1250 , @xmath1251 , @xmath1252 $ ] , @xmath1253 .",
    "let @xmath1254 we take small neighborhoods @xmath1255 and @xmath1256 of @xmath1257 and @xmath1258 in @xmath1259 respectively .",
    "let @xmath1260 be the union of @xmath1261 and the subset of @xmath1262 consisting of points @xmath1263 such that @xmath1264 for some @xmath1265 and for a point @xmath1266 .",
    "in other words , @xmath1267 be the union of @xmath1268 and the image of the negative gradient flow from @xmath1269 .",
    "the subset @xmath1270 of @xmath1262 is similarly defined .    since @xmath1271",
    ", we may assume that any trajectory starting from @xmath1255 are disjoint from trajectories starting from @xmath1256 .",
    "thus we have @xmath1272 and in particular , the two moduli spaces are disjoint as subspaces of @xmath1273 .",
    "since each of @xmath1274 and @xmath1274 has only one end for broken trajectories , the compactifications @xmath1275 can be defined in a similar way as  [ ss : comp_m2 ] ( using parameterized morse lemma ( * ? ? ? * appendix ) ) .",
    "so it may be natural to define @xmath1276 then we construct an extension of @xmath1277 to @xmath1278 as follows .",
    "let @xmath1279 be an open subset such that    1 .",
    "@xmath1280 , 2 .",
    "@xmath1281 , @xmath1282",
    ".    then the negative gradient flow carries @xmath1283 diffeomorphically onto an open subset @xmath1284 of @xmath1262 .",
    "obviously , @xmath1284 satisfies the following conditions :    1 .",
    "@xmath1285 , 2 .",
    "@xmath1286 , @xmath1282 .",
    "since there are no ends in @xmath1287 for broken trajectories , we define @xmath1288 now we define @xmath1289 where they are glued along @xmath1290 and @xmath1291 via the inclusions .",
    "the compactifications @xmath1292 , @xmath1293 etc . can be constructed by a similar gluing construction from moduli spaces of trajectories around a single critical point locus .    over the interval @xmath1240",
    ", we may assume that critical point loci except @xmath25 and @xmath382 are ordered , and after a suitable small deformation of the family of morse pairs that does not change the graphic , we may assume that @xmath1294 is morse ",
    "smale for all @xmath1295 .",
    "so similar extensions as in  [ ss : comp_m2 ] works for other critical point loci and we will finally get a compactification @xmath1296 by the same construction at all the level exchange points @xmath1297 , we will obtain a compactification on @xmath1298 .",
    "we would like to extend the compactifications of moduli spaces on @xmath1298 , obtained in  [ ss : mod_level_ex ] , over the whole of @xmath1210 .",
    "we assume @xmath1299 .",
    "let @xmath1300 , @xmath1301 be a sequence of mutually disjoint open intervals such that    1 .",
    "@xmath1302 , 2 .",
    "@xmath1303 , 3 .",
    "@xmath1304 .",
    "see figure  [ fig : graphic_2 ] .",
    "we shall construct a compactification @xmath1305 of @xmath1306 connecting @xmath1307 and @xmath1308 .",
    "over each @xmath1309 , the critical values are ordered everywhere , so we can separate critical point loci into small pieces by families of level surfaces .",
    "we already have a compactification on each piece which includes only one critical point locus . however , there is a problem in making the intersection between two moduli spaces as in lemma  [ lem : glue_m2 ] , because an analogue of the morse ",
    "smale condition for 1-parameter family , which requires the morse ",
    "smale condition on each fiber , fails .",
    "instead , we consider as follows : although we can not require fiberwise morse ",
    "smale condition , we can require the transversality between a family of descending manifolds and a family of ascending manifolds .",
    "this requirement suffices for the moduli space to be a smooth submanifold of a fiber bundle over @xmath1309 ( with fiber @xmath1310 ) , though it may not be a subbundle .",
    "3.1 of @xcite for detail .",
    "let @xmath1311 and @xmath1312 . by changing the 1-parameter family @xmath1313 of metrics on @xmath1 over @xmath1309",
    ", one can show by a similar argument as the proof of the genericity of morse  smale condition , that generically @xmath1314 s and @xmath1315 s intersect mutually transversal in the trivial @xmath1-bundle over @xmath1309 .",
    "thus we will get the following proposition , which is an analogue of proposition  [ prop : bm2_mfd ] .    for a generic 1-parameter family , @xmath1306 has a canonical compactification @xmath1305 to a smooth manifold with corners , whose codimension @xmath184 stratum consists of families of @xmath184 times broken trajectories .",
    "hence we have a canonical compactification @xmath1316 of @xmath1317 over @xmath1210 .    by using the compactification @xmath1316",
    ", one can also define the compactification @xmath1318 of @xmath1319 .",
    "then we have the following corollary .",
    "[ cor : comp_m_1-para ] if @xmath38 does not have bivalent vertices , then on a neighborhood of the strata of codimension @xmath632 , @xmath1318 is a smooth manifold with boundary , that is a smooth submanifold of @xmath1320 with boundary .",
    "the boundary consists of flows with a broken trajectory or with a subgraph collapsed .",
    "let @xmath1321 $ ] be a death parameter in a generic 1-parameter family and let @xmath1322 $ ] be a small open interval around @xmath1323 .",
    "let @xmath1324 be the death point at @xmath1323 . by the parametrized normal form lemma for birth / death singularity ( e.g. , ( * ?",
    "* appendix ) , @xcite ) , there is a local coordinate on a neighborhood @xmath1325 of @xmath1326 in @xmath1327 on which @xmath1176 agrees with @xmath1328 where @xmath452 is a rescaling of @xmath1163 and @xmath1329 is a smooth function of @xmath452 , and one can deform the metric on @xmath1325 so that it agrees on @xmath1325 with the restriction of the standard metric on @xmath424 .",
    "the negative gradient field of @xmath1330 with respect to the standard metric is @xmath1331 so , on @xmath1332 , there are no critical points of @xmath1330 . at @xmath1333 , there is only one critical point at the origin , and on @xmath1334 , there are exactly two critical points @xmath1335 of @xmath1330 .",
    "we shall describe how a pair of trajectories going from / to critical points of @xmath1330 on @xmath1334 are glued together into a single trajectory on @xmath1332 .",
    "the integral curve @xmath1336 , @xmath1337 of @xmath1338 is determined by the system of differential equations : @xmath1339 for each given initial point @xmath1340 .",
    "in @xmath1332 , the solution of ( [ eq : ode ] ) is given by @xmath1341    for a small number @xmath333 , let @xmath1342 and @xmath1343 be the subsets of @xmath424 given by @xmath1344 since @xmath1345 , one may see that any trajectory of @xmath1330 in @xmath1332 and in @xmath1325 intersects both @xmath1342 and @xmath1343 .",
    "conversely , for any point @xmath291 of @xmath1346 ( resp .",
    "@xmath1347 ) , there exists a unique ( shift equivalence class of ) gradient trajectory of @xmath1330 which intersects @xmath1346 ( resp .",
    "@xmath1347 ) at @xmath291 .",
    "so there is a one - to - one correspondence between a point on @xmath1342 or @xmath1343 and a gradient trajectory of @xmath1330 .",
    "now suppose that an integral curve @xmath644 of @xmath1338 starts at a point of @xmath1348 .",
    "we shall describe the point @xmath1349 . if @xmath1350 at @xmath1351 , then by ( [ eq : ode ] ) , @xmath1352 for @xmath1353 .",
    "we put @xmath1354 for simplicity .",
    "then @xmath1355 has the following expansion ( convergent on @xmath1356 ) : @xmath1357 the point @xmath1358 can be expressed by using @xmath1355 as follows .",
    "@xmath1359 if we put @xmath1360 , then the integral curve starting at the point @xmath1361 intersects @xmath1343 at the point @xmath1362 this observation suggests a way to glue trajectories .      in @xmath1334 , the ascending / descending manifolds of @xmath1330 are described as follows .",
    "see figure  [ fig : p_pm ] .",
    "@xmath1364 hence @xmath1365    one may check that this holds also for @xmath1333 , in which case @xmath1366 .",
    "we define a map @xmath1367 by @xmath1368 we consider the space of gradient trajectories of @xmath1330 or pairs of gradient trajectories of @xmath1330 intersecting both @xmath1348 and @xmath1369 , as a subspace of @xmath1370 . by ( [ eq : lald ] ) , the part @xmath1371\\times \\r^{d-1})$ ] is the space of pairs @xmath1372 of integral curves of @xmath1338 satisfying the conditions @xmath1373 on the other hand , by ( [ eq : start ] ) and ( [ eq : goal ] ) , the part @xmath1374 is the space of negative gradient trajectories of @xmath1330 , @xmath1332 , near the origin .",
    "[ prop : gluing ] the map @xmath465 is smooth and is an embedding .",
    "hence any smooth path @xmath157 on @xmath461 that goes from @xmath1334 to @xmath1333 with non - degenerate tangent on @xmath1375 has a smooth extension on @xmath1332 part . in other words , a pair @xmath1372 of integral curves of @xmath1338 as ( [ eq : g_pm ] ) above are glued together at @xmath1333 into a single trajectory if the pair goes along the path @xmath157 ( as in figure  [ fig : gluing_edge ] ) .    for the proof of proposition  [ prop : gluing ]",
    ", we need two lemmas .    there exist series @xmath1376[\\sqrt{u}]$ ] , @xmath1377 , that are well - defined as @xmath336 differentiable functions on @xmath1378 such that @xmath1379    we prove the lemma by induction on @xmath81 .",
    "the case @xmath1380 is obvious .",
    "suppose the assertion holds true for @xmath81 .",
    "then we have @xmath1381 .",
    "\\end{split}\\ ] ] by ( [ eq : tau ] ) , one may see that @xmath1382[\\sqrt{u}],\\quad",
    "\\frac{up_n'(u)}{p_n(u)}\\in\\r[[u]][\\sqrt{u}],\\\\      & \\lim_{u\\to 0}\\tan^{-1}\\frac{2\\ve\\sqrt{u}}{u-\\ve^2}=0,\\quad          \\lim_{u\\to 0}uq'_n(u)=0,\\quad \\lim_{u\\to 0}\\frac{up'_n(u)}{p_n(u)}<\\infty . \\end{split}\\ ] ] this implies that the right hand side of ( [ eq : dn ] ) is of the form @xmath1383 for some @xmath336 differentiable function @xmath1384[\\sqrt{u}]$ ] with @xmath1385 that is well - defined on @xmath1378 .",
    "the proof completes if we put @xmath1386 .",
    "[ lem : dn=0 ] for all @xmath1377 , @xmath1387    since @xmath1388 , it suffices to show that @xmath1389 the assertion follows if we show that @xmath1390 .",
    "we put @xmath1391 .",
    "then we have @xmath1392 and hence @xmath1393 .",
    "so we must have @xmath1394 .",
    "we put @xmath1395 then lemma  [ lem : dn=0 ] shows that @xmath1396 is @xmath336 differentiable .",
    "the map @xmath465 can be rewritten as @xmath1397 this shows that @xmath465 is @xmath336 differentiable . that the jacobian matrix has full rank is obvious from the definition of @xmath465 on @xmath1363 .",
    "hence @xmath465 is an embedding .",
    "recall that @xmath1398 $ ] is a death parameter .",
    "let @xmath1399 be the pair of critical points of @xmath1400 for sufficiently small number @xmath1188 , such that @xmath1401 and such that they are eliminated on @xmath1402 after passing through the death point @xmath1326 .",
    "let @xmath1403 be a graph with no bivalent vertices and let @xmath1404 be the graph obtained from @xmath1405 by replacing the edge @xmath1406 with a compact edge .    if @xmath855 and if @xmath1407 , then by proposition  [ prop : m_mfd ] , @xmath1408 for @xmath798 .",
    "since the moduli space is oriented , the number @xmath1409 can be counted with signs .",
    "[ cor : glue_bd ] suppose @xmath855 and @xmath1407 .",
    "the embedding @xmath465 induces a smooth cobordism between @xmath1410 and @xmath1411 .",
    "hence we have @xmath1412      for a graph @xmath911 , we consider the orientation of @xmath1413 induced from @xmath1414 .",
    "choose a number @xmath184 in @xmath839 and put @xmath1415 then @xmath1416 let @xmath842 be a graph obtained from @xmath38 with one edge replaced by a broken edge so that @xmath1417 is 0-dimensional .",
    "suppose for simplicity that separated edges of @xmath38 are labeled @xmath781 .",
    "we shall describe the orientation of the face @xmath844 of @xmath1413 corresponding to @xmath842 , induced from the standard orientation of @xmath1234 .",
    "we define the standard orientation of @xmath1234 by the formula @xmath1418    1 .",
    "@xmath845 . for @xmath1417",
    "to be 0-dimensional , @xmath1419 or @xmath1420 .",
    "the same statement as lemma  [ lem : ind_ori_d ] holds true even if @xmath1421 is replaced with a 1-parameter family of descending manifolds of @xmath25 .",
    "the orientation of @xmath1422 induced from the standard one @xmath1423 is given by @xmath1424 this agrees with the standard orientation @xmath1425 .",
    "2 .   @xmath849 . for @xmath1417",
    "to be 0-dimensional , @xmath1426 or @xmath1427 .",
    "if @xmath1428 in the statement of lemma  [ lem : ind_ori_a ] is replaced with a 1-parameter family of ascending manifolds of @xmath382 , then the induced orientation would be @xmath1429 since the sign @xmath1430 in the formula ( [ eq : o(a ) ] ) becomes @xmath1431 .",
    "thus , the orientation of @xmath1432 induced from the standard one @xmath1433 is given by @xmath1434 this differs from the standard orientation by @xmath1435 .",
    "3 .   @xmath854 . the induced orientation on the boundary is as in lemma  [ lem : ind_ori_m2 ] , which agrees with @xmath753 of the standard orientation ( [ eq : oh ] ) .",
    "[ lem : inv_ordered ] suppose that @xmath1166 is ordered and has no @xmath1153-intersections over @xmath1204 $ ]",
    ". then @xmath1436    by corollary  [ cor : comp_m_1-para ] and the observation of  [ ss : ori_1-para ] , we have @xmath1437 as oriented manifolds .",
    "hence by lemmas  [ lem : symmetry ] and [ lem : dilation ] , we have @xmath1438 if @xmath38 in the formula ( [ eq : dmgj ] ) is replaced with @xmath1439 , then the right hand side of ( [ eq : dmgj ] ) becomes @xmath1440 for the correction terms of @xmath1441 and @xmath1442 , we may choose the same spin 4-manifold @xmath33 .",
    "then we choose generic sections @xmath992 and @xmath1443 of @xmath1444 for the correction terms of @xmath1441 and @xmath1442 respectively , as in  [ ss : correction ] . then by the proof of proposition  [ prop : spin - cob_inv ] , we have @xmath1445 this completes the proof .",
    "[ lem : inv_exchange ] suppose that @xmath1446 is a level exchange point for the 1-parameter family @xmath1447 .",
    "then @xmath1448    the proof is the same as lemma  [ lem : inv_ordered ] .",
    "we say that a birth / death point @xmath1326 in a 1-parameter family @xmath1449}$ ] , say at @xmath1212 , is _ almost independent _ if on a neighborhood of @xmath1323 in @xmath12 $ ] the descending and ascending manifolds of @xmath1326 are disjoint from all the other descending and ascending manifolds of critical points except those of the pair @xmath1450 chosen in lemma  [ lem:1-acyclic ] .",
    "a 1-parameter family @xmath1451}$ ] of pairs of generalized morse functions and metrics on @xmath1 can be deformed so that every birth / death points are almost independent .",
    "[ lem : inv_bd ] suppose that @xmath1446 is a parameter on which an almost independent birth / death point @xmath1326 occurs .",
    "then @xmath1448    we prove the lemma only for death point since the case of birth point is symmetric .",
    "if @xmath1452 is the critical point pair at @xmath1453 that disappears on @xmath1454 , then the morse complex at @xmath1453 is the direct sum @xmath1455 , where @xmath1456 is the reduced morse complex at @xmath1457 and @xmath1458    choose a combinatorial propagator @xmath194 of @xmath1459 .",
    "the acyclic complex @xmath1460 has a unique combinatorial propagator @xmath1461 , defined by @xmath1462 .",
    "we consider @xmath194 and @xmath1461 as homogeneous degree 1 maps of @xmath1455 by setting @xmath1463 and @xmath1464",
    ". then one can check that @xmath1465 is a combinatorial propagator for @xmath1455 .",
    "we need only to check the identity of the lemma in the case where a gluing of trajectories happens at @xmath1326 .",
    "suppose that the separated edge labeled by @xmath184 in a graph flow of @xmath1466 converges to a broken edge as @xmath1467 and that @xmath25 and @xmath382 converges to @xmath1326 .",
    "then by corollary  [ cor : glue_bd ] we have @xmath1468\\bigr]\\cdot      \\#\\bcalm_{\\gamma(p , q)_k}(\\vec{f}_{s_0-\\ve } )      + \\ttr_{\\cdots , g',\\cdots}\\bigl[[\\gamma(\\emptyset,\\emptyset)_k]\\bigr ]      \\cdot\\#\\bcalm_{\\gamma(\\emptyset,\\emptyset)_k}(\\vec{f}_{s_0-\\ve})\\\\      & = \\ttr_{\\cdots , g,\\cdots}\\bigl[[\\gamma(\\emptyset,\\emptyset)_k]\\bigr ]      \\bigl(\\#\\bcalm_{\\gamma(p , q)_k}(\\vec{f}_{s_0-\\ve } )      + \\#\\bcalm_{\\gamma(\\emptyset,\\emptyset)_k}(\\vec{f}_{s_0-\\ve})\\bigr)\\\\      & = \\ttr_{\\cdots , g,\\cdots}\\bigl[[\\gamma(\\emptyset,\\emptyset)_k]\\bigr]\\cdot      \\#\\bcalm_{\\gamma(\\emptyset,\\emptyset)_k}(\\vec{f}_{s_0+\\ve } ) . \\end{split}\\ ] ] the proof of the invariance of the other terms in @xmath1469 is the same as lemma  [ lem : inv_ordered ] and [ lem : inv_exchange ] since @xmath1326 is almost independent .",
    "suppose that a gradient @xmath1153-intersection between critical points ( loci ) @xmath25 and @xmath382 occurs at @xmath1212 .",
    "for a small number @xmath1175 , the underlying @xmath69-modules of @xmath1470 and @xmath1459 are the same .",
    "we put @xmath1471 $ ] , @xmath1472 and @xmath1473 .",
    "let @xmath1474 be the homomorphism of homogeneous degree 0 , defined for each critical point ( locus ) @xmath1475 by @xmath1476 we denote the boundary operators of @xmath1470 and @xmath1459 by @xmath127 and @xmath197 respectively .",
    "[ lem : dh ] under the assumption above , we have @xmath1477 or equivalently , @xmath1478 .    more explicitly , if @xmath1479 and if @xmath1480 is any other critical point of index @xmath1481 , then it follows from lemma  [ lem : dh ] that @xmath1482 and that the difference of @xmath197 and @xmath127 is given by @xmath1483 in particular , we have @xmath1484",
    ".    we know from corollary  [ cor : comp_m_1-para ] what happens at @xmath1323 , so it suffices to check that the signs are correct .",
    "we may assume without loss of generality that only the ascending manifold of @xmath382 changes as @xmath1163 moves within @xmath1210 if @xmath1485 is small enough .",
    "so we may replace the problem with the intersection orientations in a single fiber in which the ascending manifold of @xmath382 moves around , depending on a parameter @xmath1206 .",
    "there is a small neighborhood of @xmath1486 that is a subspace of @xmath1487 for some small open ball @xmath647 in a morse model @xmath1488 around @xmath25 ( for the quadratic form @xmath1489 ) . by an analogue of lemma  [ lem : ind_ori_a ] ,",
    "the normal orientation @xmath1490 at @xmath1491 induces an orientation @xmath1492 on the space of ( partially parametrized ) broken trajectories .",
    "we assume without loss of generality that @xmath1493 and that the points @xmath35 and @xmath1494 lie on the same gradient trajectory . since @xmath1495 is a @xmath145-form , @xmath1496 and @xmath1497 , the orientation ( [ eq : dh_1 ] ) induces the following orientation on the intersection with @xmath1498 : @xmath1499 this gives the sign of the incidence coefficient of @xmath382 in @xmath1500 .    similarly , for a critical point @xmath1501 of index @xmath1502 , a small neighborhood of @xmath1503 can be considered as a subspace of @xmath1504 for some small open ball @xmath647 in a morse model @xmath1505 around @xmath382 ( for the quadratic form @xmath1489 ) .",
    "then by an analogue of lemma  [ lem : ind_ori_d ] , the normal orientation @xmath1506 at @xmath1507 induces an orientation @xmath1508 on the space of ( partially parametrized ) broken trajectories .",
    "we assume without loss of generality that @xmath1509 and that the points @xmath120 and @xmath1510 lie on the same gradient trajectory .",
    "since @xmath1511 , ( [ eq : dh_3 ] ) induces the following orientation on the intersection with @xmath1512 : @xmath1513 this gives the sign of the incidence coefficient of @xmath1501 in @xmath1514 .",
    "the induced orientations ( [ eq : dh_2 ] ) and ( [ eq : dh_4 ] ) give the desired identities @xmath1515 and @xmath1516 .",
    "choose a combinatorial propagator @xmath194 for @xmath1517 .",
    "then one can check that the endomorphism @xmath1518 is a combinatorial propagator for @xmath1519 .",
    "one can check that @xmath1520 and hence @xmath1521    we put @xmath1522 and @xmath1523 .",
    "we define the operator @xmath1524 by @xmath1525 , where @xmath1526 and @xmath1527 is the induced one .",
    "the reason for the sign has been explained in ",
    "[ ss : ori_1-para ] .",
    "[ lem : inv_i / i ] suppose that @xmath1446 is a point on which a gradient @xmath1153-intersection between critical points ( loci ) @xmath25 and @xmath382 occurs in a 1-parameter family @xmath1229 .",
    "then @xmath1528    as oriented manifolds , we may assume that @xmath1529 if @xmath1485 is small enough .",
    "hence we have @xmath1530 we put @xmath1531 and @xmath1532 .",
    "we have @xmath1533\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f}_{s_0+\\ve } )      -\\sum_{\\gamma\\in\\calg_{2k,3k}(\\vec{c}')}\\ttr_{\\vec{g}}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f}_{s_0-\\ve})\\\\      & = \\sum_\\gamma\\ttr_{\\vec{g}'}\\bigl[[\\gamma]\\bigr]\\cdot\\bigl(\\#\\bcalm_\\gamma(\\vec{f}_{s_0-\\ve})+\\#\\bcalm_{d''\\gamma}(\\vec{f}_j)\\bigr)-\\sum_\\gamma\\ttr_{\\vec{g}}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f}_{s_0-\\ve})\\\\      & = \\sum_\\gamma\\ttr_{g'-g,\\ldots}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f}_{s_0-\\ve})+\\sum_\\gamma\\ttr_{\\vec{g}'}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_{d''\\gamma}(\\vec{f}_j)\\\\      & = \\sum_\\gamma\\ttr_{gh - hg,\\ldots}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_\\gamma(\\vec{f}_{s_0-\\ve } )          + \\sum_\\gamma\\ttr_{\\vec{g}'}\\bigl[[\\gamma]\\bigr]\\cdot\\#\\bcalm_{d''\\gamma}(\\vec{f}_j)\\\\      & = \\ttr_{g,\\ldots}\\bigl[\\sum_{{{p_1,q_1}\\atop{d(p_1)=d(q_1)+1 } } }          \\sum_{\\gamma(p_1,q_1)_1 }          [ \\gamma(p_1,q_1)_1]\\cdot\\#\\bcalm_{(\\gamma*h - h*\\gamma)(p_1,q_1)_1}(\\vec{f}_j)\\bigr]\\\\          & \\hspace{5mm}+\\ttr_{\\vec{g}'}\\bigl[\\sum_{{{p_1,q_1}\\atop{d(p_1)=d(q_1)+1 } } }          \\sum_{\\gamma(p_1,q_1)_1 }          [ \\gamma(p_1,q_1)_1]\\cdot\\#\\bcalm_{d''\\gamma(p_1,q_1)_1}(\\vec{f}_j)\\bigr]\\\\      & = \\sum_{p_1,q_1}\\sum_{\\gamma(p_1,q_1)_1}\\ttr_{g'-g,\\ldots}\\bigl[[\\gamma(p_1,q_1)_1]\\bigr ]          \\cdot\\#\\bcalm_{d''\\gamma(p_1,q_1)_1}(\\vec{f}_j)\\\\      & = \\sum_{p_1,q_1}\\sum_{\\gamma(p_1,q_1)_1}\\ttr_{gh - hg,\\ldots}\\bigl[[\\gamma(p_1,q_1)_1]\\bigl ]          \\cdot\\#\\bcalm_{d''\\gamma(p_1,q_1)_1}(\\vec{f}_j)\\\\      & = -\\sum_{p_1,q_1}\\sum_{\\gamma(p_1,q_1)_1}\\ttr_{g,\\ldots}\\bigl[[\\gamma(p_1,q_1)_1]\\bigl ]          \\cdot\\#\\bcalm_{d''d''\\gamma(p_1,q_1)_1}(\\vec{f}_j)\\\\      & = 0 \\end{split}\\ ] ] since @xmath1484 and @xmath1520 .",
    "this completes the proof .",
    "lemmas  [ lem : inv_ordered ] , [ lem : inv_exchange ] , [ lem : inv_bd ] , [ lem : inv_i / i ] show that @xmath1534 is invariant under all possible bifurcations listed in ",
    "[ ss : bifurcations ] .",
    "this completes the proof .",
    "for a @xmath145-dimensional orientable manifold @xmath1 , we will represent an orientation on @xmath1 by a nowhere vanishing @xmath145-form of @xmath1535 and denote by @xmath1536 .",
    "if @xmath1 is a submanifold of an oriented @xmath156-dimensional manifold @xmath1537 , then we define @xmath1536 from an orientation @xmath1538 of the normal bundle of @xmath1 by the rule @xmath1539 note that @xmath1538 is defined canonically by the hodge star operator : @xmath1540 .",
    "if @xmath1 has boundary @xmath1541 , we provide an induced orientation on @xmath1541 from @xmath1536 as follows : let @xmath81 be an inward normal vector field on @xmath1541 , then we define @xmath1542 in other words , if @xmath1543 is the dual of @xmath1544 with respect to the metric and if @xmath1545 for @xmath1546 and @xmath1547 , then @xmath1548 .",
    "this change induces a change on normal orientation @xmath1538 as follows : @xmath1549 .",
    "so we have @xmath1550          suppose @xmath1 and @xmath1559 are two oriented submanifolds of @xmath1537 of dimension @xmath75 and @xmath1560 that intersect transversally .",
    "the transversality implies that at an intersection point @xmath35 , the form @xmath1561 is a non - trivial @xmath1562-form .",
    "we define @xmath1563      i would like to thank professor kenji fukaya for encouraging me to write my result for publication .",
    "i would also like to thank professor masamichi takase for valuable comments on invariants of spin 4-manifolds .",
    "i am supported by jsps grant - in - aid for young scientists ( b ) 70467447 ."
  ],
  "abstract_text": [
    "<S> we give a higher order generalization of fukaya s morse homotopy theoretic approach to 2-loop chern  </S>",
    "<S> simons perturbation theory . in this paper </S>",
    "<S> , we construct a sequence of invariants of homology 3-spheres with values in a space of trivalent graphs ( jacobi diagrams ) by using morse homotopy theory .     </S>",
    "<S> ( 2012 ) </S>"
  ]
}