{
  "article_text": [
    "szemerdi s regularity lemma @xcite has impressive applications in many areas of modern graph theory , including extremal graph theory , ramsey theory and property testing . roughly speaking",
    ", it says that any graph can be approximated by an average with respect to a partition of its vertex set into a bounded number of classes , the number of classes depending only on the accuracy of the desired approximation , and not on the number of vertices in the graph .",
    "a key property of this approximation is that it leads to a ` counting lemma ' , allowing an accurate prediction of the number of copies of any small fixed graph spanned by some specified classes of the partition .",
    "we refer the reader to @xcite for a survey of the regularity lemma and its applications . an analogous theory for hypergraphs has only been developed very recently , with independent and rather different approaches given by rdl et al .",
    "( e.g.  @xcite ) and gowers @xcite , subsequently reformulated and developed in @xcite . in a very short space of time the power of this hypergraph theory has already been amply demonstrated , e.g.  by a multidimensional generalisation of szemerdi s theorem on arithmetic progressions @xcite and a linear bound for the ramsey number of hypergraphs with bounded maximum degree @xcite .",
    "the blow - up lemma is a powerful tool developed by komls , sarkzy and szemerdi @xcite for using the regularity lemma to embed spanning subgraphs of bounded degree .",
    "an informal statement is that graphs with sufficient regularity and no atypical vertices behave as if they were complete for the purpose of embedding bounded degree graphs .",
    "in @xcite they used it to prove seymour s conjecture on the minimum degree needed to embed the @xmath0th power of a hamilton cycle , and the alon - yuster conjecture on the minimum degree needed for a graph to have an @xmath1-factor , for some fixed graph @xmath1 ( a question finally resolved in @xcite ) .",
    "there are many other applications to embedding spanning subgraphs , see the survey @xcite .",
    "there are also several results on embedding spanning subhypergraphs , such as perfect matchings or ( various definitions of ) hamilton cycles , see the survey @xcite . for the most part",
    ", the proofs of the known hypergraph results have not needed any analogue of the blow - up lemma .",
    "an exception is an embedding lemma for some special spanning subhypergraphs proved in @xcite for loose hamilton cycles in @xmath2-graphs , although the ` absorbing ' method of rdl , ruciski and szemerdi was subsequently shown to be a simpler method for hamilton cycles @xcite .",
    "another partial hypergraph blow - up lemma is to embedding bounded degree subgraphs of linear size , obtained independently in @xcite and in @xcite ( for @xmath2-graphs ) .",
    "the application to linear ramsey numbers of bounded degree hypergraphs was also subsequently proved by simpler means in @xcite .",
    "however , one would not necessarily expect that embedding lemmas can always be avoided by using alternative methods , so a hypergraph blowup lemma would be a valuable tool .    in this paper",
    "we prove such a result that gives conditions for embedding any spanning hypergraph of bounded degree .",
    "we will not attempt a formal statement of our result in this introduction , as it will take us a considerable amount of work to set up the necessary notation and terminology , particularly for the key notion of super - regularity , which has some additional subtleties that do not appear in the graph case .",
    "the proof will be by means of a randomised greedy embedding algorithm , which is very similar that used in @xcite .",
    "however the analysis is more involved , due both to the additional complications of hypergraph regularity theory , and the need to work with an approximating hypergraph rather than the true hypergraph ( see section 3 for further explanation ) .",
    "there are many potential applications of our theorem to hypergraph generalisations of results for graphs that were obtained with the graph blow - up lemma .",
    "we will illustrate the method by proving a hypergraph generalisation of a result of khn and osthus ( * ? ? ? * theorem 2 ) on packing bipartite graphs .",
    "the rest of this paper is organised as follows . in the next section",
    "we prove the blow - up lemma of komls , sarkzy and szemerdi @xcite .",
    "this is mostly for expository purposes , although there are some small differences in our proof , and it will be useful to refer back to the basic argument when discussing additional complications that arise for hypergraphs .",
    "we will prove our main result at first in the special case of @xmath2-graphs ( with some additional simplifications ) ; this case is already sufficiently complex to illustrate the main ideas of our proofs . in section 3",
    "we discuss hypergraph regularity theory ( following the approach of rdl et al . ) and motivate and define super - regularity for @xmath2-graphs .",
    "we prove the @xmath2-graph blow - up lemma in section 4 . in section 5",
    "we develop some additional theory that is needed for applications of the @xmath2-graph blow - up lemma , based on the regular approximation lemma of rdl and schacht @xcite .",
    "we also give a ` black box ' reformulation of the blow - up lemma that will be more easily accessible for future applications .",
    "we illustrate this by generalising a result in @xcite to packing tripartite @xmath2-graphs . the final section concerns the general hypergraph blow - up lemma . as well as generalising from @xmath2-graphs to @xmath0-graphs",
    ", we allow additional generalisations that will be needed in future applications , including restricted positions and complex - indexed complexes ( defined in that section ) .",
    "the proof is mostly similar to that for @xmath2-graphs , so we only give full details for those aspects that are different .",
    "we conclude with some remarks on potential developments and applications of the blow - up lemma .",
    "* notation.*we will introduce a substantial amount of terminology and notation throughout the paper , which is summarised in the index . before starting our discussion",
    "we establish the following basic notation .",
    "we write @xmath3=\\{1,\\cdots , n\\}$ ] .",
    "if @xmath4 is a set and @xmath0 is a number then @xmath5 , @xmath6 and @xmath7 .",
    "@xmath8 denotes an unspecified real number in the interval @xmath9 $ ] .",
    "it is convenient to regard a finite set @xmath4 as being equipped with the uniform probability measure @xmath10 , so that we can express the average of a function @xmath11 defined on @xmath4 as @xmath12 .",
    "@xmath1 consists of a @xmath13 and an _ edge set _",
    "@xmath14 , each edge being some @xmath0-tuple of vertices .",
    "we often identify @xmath1 with @xmath14 , so that @xmath15 is the number of edges in @xmath1 .",
    "a _ @xmath0-complex _ @xmath1 consists of a vertex set @xmath13 and an edge set @xmath14 , where each edge is a subset of the vertex set of size at most @xmath0 , that is a _ simplicial complex _ ,",
    "i.e.  if @xmath16 and @xmath17 then @xmath18 .",
    "for @xmath19 the _ neighbourhood _ @xmath20-graph or @xmath20-complex is @xmath21 , and @xmath22 is the _ degree _ of @xmath23 .",
    "we also write @xmath24 . a _ walk _ in @xmath1 is a sequence of vertices for which each consecutive pair are contained in some edge of @xmath1 , and the distance between two vertices is the length of the shortest walk connecting them .",
    "the _ vertex neighbourhood _",
    "@xmath25 is the set of vertices at distance exactly @xmath26 from @xmath27 ( so @xmath27 itself is not included ) .",
    "we will often have to consider hierarchies involving many real parameters , and it will be useful to use the notation @xmath28 to mean that there is an increasing function @xmath29 so that the following argument is valid for @xmath30",
    ". the parameter @xmath31 will always be sufficiently large compared to all other parameters , and we use the phrase _ with high probability _ to refer to an event that has probability @xmath32 , i.e.  the probability tends to @xmath26 as @xmath31 tends to infinity .",
    "this section is mostly expository .",
    "we introduce the basic notions of regularity and super - regularity for graphs and prove the blow - up lemma of komls , sarkzy and szemerdi .",
    "this will serve as a warm - up to the hypergraph blow - up lemma , as our proof even in the graph case differs slightly from the original in a few details ( although the general approach is the same ) .",
    "it will also be helpful to establish our notation in this simplified setting , and to refer back to the basic argument when explaining why certain extra complications arise for hypergraphs . to streamline the proof we focus on a slightly simplified setting , which still contains all the ideas needed for the general case .",
    "we hope that the general reader will find this section to be an accessible account of a proof that has a reputation for difficulty !",
    "we start with a brief summary of the key notions in graph regularity , referring the reader to @xcite for more details .",
    "consider an @xmath33-partite graph @xmath34 with vertex set @xmath35 partitioned as @xmath36 .",
    "let @xmath37 be the bipartite subgraph of @xmath34 with parts @xmath38 and @xmath39 , for @xmath40 .",
    "the _ density _ of @xmath37 is @xmath41 .",
    "given @xmath42 , we say that @xmath37 is _ @xmath43-regular _ if for all subsets @xmath44 and @xmath45 with @xmath46 and @xmath47 , writing @xmath48 for the bipartite subgraph of @xmath34 with parts @xmath49 and @xmath50 , we have @xmath51 .",
    "then we say that @xmath34 is @xmath43-regular if each @xmath37 is @xmath43-regular .",
    "informally , we may say that each @xmath37 behaves like a random bipartite graph , up to accuracy @xmath43 .",
    "this statement is justified by the counting lemma , which allows one to estimate the number of copies of any fixed graph @xmath52 , up to accuracy @xmath53 , using a suitable product of densities .",
    "for now we just give an example : if we write @xmath54 for the set of triangles formed by the graphs @xmath55 , @xmath56 , @xmath57 , then @xmath58 remarkably , this powerful property can be applied in any graph @xmath34 , via szemerdi s regularity lemma , which can be informally stated as saying that we can decompose the vertex set of any graph on @xmath31 vertices into @xmath59 parts , such that all but at most @xmath60 edges belong to bipartite subgraphs that are @xmath43-regular .",
    "the blow - up lemma arises from the desire to embed _ spanning _ graphs in @xmath34 , meaning that they use every vertex in @xmath35 .",
    "suppose that @xmath61 for @xmath62 .",
    "the argument used to prove the counting lemma can be generalised to embed any bounded degree graph @xmath1 provided that all components of @xmath1 have size @xmath63 , and @xmath64 vertices of @xmath34 are allowed to remain uncovered .",
    "however , one can not guarantee an embedding of a spanning graph : the definition of @xmath43-regularity does not prevent the existence of isolated vertices , so we may not even be able to find a perfect matching .",
    "this observation naturally leads us to the stronger notion of super - regularity .",
    "we say that @xmath37 is _ @xmath65-super - regular _ if it is @xmath43-regular and every vertex has degree at least @xmath66 .",
    "it is well - known that one can delete a small number of vertices from a regular pair to make it super - regular ( see lemma [ 2del ] ) .",
    "we say that @xmath34 is _ @xmath67-super - regular _ if each @xmath37 is either empty or @xmath65-super - regular for some @xmath68 .",
    "now we can state the graph blow - up lemma .",
    "[ 2blowup ] * ( graph blow - up lemma ) * suppose @xmath1 is an @xmath33-partite graph on @xmath69 and @xmath34 is an @xmath33-partite graph on @xmath36 , where @xmath70 for @xmath62 and @xmath71 is only non - empty when @xmath37 is non - empty .",
    "if @xmath1 has maximum degree at most @xmath72 and @xmath34 is @xmath67-super - regular , where @xmath73 , then @xmath34 contains a copy of @xmath1 , in which for each @xmath62 the vertices of @xmath38 correspond to the vertices of @xmath74 .    informally speaking ,",
    "theorem [ 2blowup ] embeds any bounded degree graph into any super - regular graph .",
    "note that arbitrary part sizes are allowed in @xcite , but for simplicity we start by considering the case when they are all equal .",
    "the proof is via a random greedy algorithm for embedding @xmath1 in @xmath34 , which considers the vertices of @xmath4 in some order and embeds them to @xmath35 one at a time .",
    "we start by giving an informal description of the algorithm .",
    ": :    list the vertices of @xmath1 in a certain order , as follows .",
    "some vertices at mutual distance at least @xmath75 are    identified as buffer vertices and put at the end of the list .",
    "the    neighbours of the buffer vertices are put at the start of the list .",
    "( the rationale for this order is that we hope to embed these    neighbours in a nice manner while there is still plenty of room in the    early stages of the algorithm , and then the buffer vertices still have    many suitable places at the conclusion . ) during the algorithm a queue    of priority vertices may arise : it is initially empty .",
    ": :    choose the next vertex @xmath27 to be embedded , either from the    queue if this is non - empty , or otherwise from the list .",
    "the image    @xmath76 of @xmath27 is chosen randomly in    @xmath77 among those free spots that do not unduly restrict    the free spots for those unembedded neighbours of @xmath27 .",
    "if    some unembedded vertex has too few free spots it is added to the    queue .",
    "stop when all non - buffer vertices have been embedded .",
    "if the    number of vertices that have ever been in the queue becomes too large    before this point then abort the algorithm as a failure ( this is an    unlikely event ) .",
    ": :    choose a system of distinct representatives among the free slots for    the unembedded vertices to complete the embedding .",
    "( this will be    possible with high probability . )",
    "now we will formally describe the random greedy algorithm to construct an embedding @xmath78 such that @xmath79 for every @xmath80 .",
    "first we introduce more parameters with the hierarchy @xmath81 to assist the reader we list here the role of each parameter for easy reference .",
    "parameters @xmath43 , @xmath82 and @xmath83 are used to measure graph regularity .",
    "parameter @xmath84 plays the role of @xmath85 in @xcite : it is used to distinguish various cases at the conclusion of the algorithm when selecting the system of distinct representatives .",
    "parameter @xmath86 plays the role of @xmath84 in @xcite : it is a universal lower bound on the proportion of vertices in a class of @xmath34 free to embed any given vertex of @xmath1 .",
    "the _ queue threshold _",
    "parameter @xmath87 corresponds to @xmath88 in @xcite : the maximum proportional size for the queue before we will abort with failure .",
    "the _ buffer _",
    "parameter @xmath89 corresponds to @xmath90 in @xcite : the proportional size of the buffer .",
    "we also introduce two probability parameters that are not explicitly named in @xcite , although they are key to the proof .",
    "parameter @xmath91 appears in lemma [ 2main ] in the upper bound for the probability that any given set @xmath92 will be significantly under - represented in the free images for a vertex .",
    "parameter @xmath93 appears in lemma [ 2-x - to - v ] as a lower bound for the probability that a given unused vertex will be free as an image for a given buffer vertex at the conclusion of the algorithm .",
    "note that the _ queue admission _",
    "parameter @xmath94 is similar to but slightly different from the corresponding parameter @xmath95 in @xcite : for any vertex @xmath96 and time @xmath97 we will compare @xmath98 to an earlier free set @xmath99 , where @xmath100 is the most recent time at which we embedded a neighbour of @xmath96 .",
    "initialisation and notation .",
    ": :    we choose a buffer set @xmath101 of vertices at mutual    distance at least @xmath75 in @xmath1 so that    @xmath102 for    @xmath62 .",
    "the maximum degree property of    @xmath1 implies that we can construct @xmath103 simply    by selecting vertices one - by - one greedily . for any given vertex in    @xmath1",
    "there are fewer than @xmath104 vertices within    distance @xmath75 , so at any point in the construction of    @xmath103 we have excluded at most @xmath105    vertices from any given @xmath74 .",
    "thus we can construct    @xmath103 if we choose @xmath106 .",
    "+    let @xmath107 be the vertices with a    neighbour in the buffer . since @xmath1 has maximum degree    @xmath72 we have    @xmath108 for    @xmath62 , if we choose    @xmath109 .",
    "+    we use @xmath97 to denote time during the algorithm , by which    we mean the number of vertices of @xmath1 that have been    embedded . at time",
    "@xmath97 we denote the queue by    @xmath110 and write @xmath111    for the vertices that have ever been in the queue by time",
    "initially we set @xmath112 .",
    "+    we order the vertices in a list @xmath113 that starts with    @xmath114 and ends with @xmath103 . within @xmath114",
    ",    we arrange that @xmath115 is consecutive for each    @xmath116 .",
    "this is possible by the mutual distance    property in @xmath103 , which implies that the neighbourhoods    @xmath115 , @xmath116 are mutually disjoint .",
    "we    denote the vertex of @xmath1 selected for embedding at time    @xmath97 by @xmath117",
    ". this will be the first vertex    of @xmath118 , unless the queue is non - empty , when this    takes priority .",
    "+    we write @xmath119 for the vertices that are",
    "_ free _ to    embed a given vertex @xmath27 of @xmath1 .",
    "initially we    set @xmath120 , where we write @xmath121 for    that part @xmath38 of @xmath34 corresponding to the    part @xmath74 of @xmath1 that contains    @xmath27 .",
    "we also write    @xmath122 for the    unembedded vertices of @xmath74 and    @xmath123 for the    available positions in @xmath38 .",
    "we let    @xmath124 and    @xmath125 .",
    "initially we set    @xmath126 and @xmath127 .",
    ": :    at time @xmath97 , while there are still some unembedded    non - buffer vertices , we select a vertex to embed @xmath128    according to the following _ selection rule_. if the queue    @xmath110 is non - empty then we let @xmath27 be any    member of the queue ; otherwise we let @xmath27 be the first    vertex of the list @xmath118 .",
    "( a first in first out rule    for the queue is used in @xcite , but this is not essential to the    proof . ) we choose the image @xmath76 of @xmath27    uniformly at random among all elements @xmath129    that are ` good ' , a property that can be informally stated as saying    that if we set @xmath130 then the free sets at time    @xmath97 for the unembedded neighbours of @xmath27 will    have roughly their ` expected ' size .    +    to define this formally , we first need to describe the update rule for    the free sets when we embed @xmath27 to some vertex    @xmath131 .",
    "first we set @xmath132 .",
    "we will have    @xmath133 at all subsequent times    @xmath134 .",
    "then for any unembedded @xmath96 that    is not a neighbour of @xmath27 we set    @xmath135 .",
    "thus the size of    @xmath98 decreases by @xmath26 if @xmath96    belongs to the same part of @xmath4 as @xmath27 , but    otherwise is unchanged .",
    "finally , for any unembedded    @xmath136 we set    @xmath137 .",
    "now we say that    @xmath129 belongs to the _ good _ set    @xmath138 if for every unembedded    @xmath136 we have    @xmath139 .",
    "here    @xmath140 denotes that density @xmath141 for    which @xmath142 and @xmath143 .",
    "+    having chosen the image @xmath76 of @xmath27 as a    random good element @xmath131 , we conclude the iteration by    updating the list @xmath118 and the queue    @xmath144 .",
    "first we remove @xmath27 from whichever    of these sets it was taken .",
    "then we add to the queue any unembedded    vertex @xmath96 for which @xmath98 has become ` too    small ' .",
    "to make this precise , suppose    @xmath145 , and let @xmath100    be the most recent time at which we embedded a vertex in    @xmath146 , or @xmath147 if there is no such time .",
    "( note that if @xmath136 then @xmath148 . )",
    "we    add @xmath96 to @xmath110 if    @xmath149 .",
    "this defines    @xmath150 and @xmath110 .",
    "+    repeat this iteration until the only unembedded vertices are buffer    vertices , but abort with failure if at any time we have    @xmath151 for some    @xmath62 . let @xmath152 denote the time at    which the iterative phase terminates ( whether with success or    failure ) . conclusion .",
    ": :    when all non - buffer vertices have been embedded , we choose a system of    distinct representatives among the free slots @xmath153 for    the unembedded vertices",
    "@xmath154 to complete the    embedding , ending with success if this is possible , otherwise aborting    with failure .",
    "now we analyse the algorithm described above and show that it is successful with high probability .",
    "we start by recording two standard facts concerning graph regularity .",
    "the first fact states that most vertices in a regular pair have ` typical ' degree , and the second that regularity is preserved by restriction to induced subgraphs .",
    "we maintain our notation that @xmath34 is an @xmath33-partite graph on @xmath36 .",
    "we fix any pair @xmath155 , write @xmath37 for the bipartite subgraph spanned by @xmath38 and @xmath39 and denote its density by @xmath156 .",
    "we give the short proofs of these facts here , both for completeness and as preparation for similar hypergraph arguments later .",
    "[ 2neighbour ] * ( typical degrees ) * suppose @xmath37 is @xmath43-regular",
    ". then all but at most @xmath157 vertices in @xmath38 have degree @xmath158 in @xmath39",
    ".    * proof .",
    "* we claim that there is no set @xmath159 of size @xmath160 such that every @xmath161 has degree less than @xmath162 in @xmath39 . for the pair @xmath163",
    "would then induce a subgraph of density less than @xmath164 , contradicting the definition of @xmath43-regularity .",
    "similarly , there is no set @xmath159 of size @xmath160 such that every @xmath161 has degree greater than @xmath165 in @xmath39 .",
    "[ 2restrict ] * ( regular restriction ) * suppose @xmath37 is @xmath43-regular , and we have sets @xmath44 and @xmath45 with @xmath166 and @xmath167 .",
    "then the bipartite subgraph @xmath48 of @xmath37 induced by @xmath49 and @xmath50 is @xmath168-regular of density @xmath169 .",
    "* proof . *",
    "since @xmath37 is @xmath43-regular we have @xmath169 . now consider any sets @xmath170 and @xmath171 with @xmath172 and @xmath173 .",
    "then @xmath174 and @xmath175 , so @xmath176 and @xmath177 induce a bipartite subgraph of @xmath37 with density @xmath178",
    ". therefore @xmath48 is @xmath168-regular .",
    "our next lemma shows that the definition of good vertices for the algorithm is sensible , in that most free vertices are good . before giving the lemma",
    ", we observe that the number of free vertices in any given class does not become too small at any point during the algorithm .",
    "we can quantify this as @xmath179 , for any @xmath62 and time @xmath97 . to see this , note that we stop the iterative procedure when the only unembedded vertices are buffer vertices , and during the procedure a buffer vertex",
    "is only embedded if it joins the queue .",
    "[ good ] * ( good vertices ) * suppose we embed a vertex @xmath128 of @xmath1 at time @xmath97",
    ".    then @xmath180 , and for every unembedded vertex @xmath96 we have @xmath181 .    *",
    "* we argue by induction on @xmath97 . at time",
    "@xmath182 the first statement is vacuous , as we do not embed any vertex at time @xmath147 , and the second statement follows from the fact that @xmath183 has size @xmath31 for all @xmath96 .",
    "now suppose @xmath184 .",
    "by induction we have @xmath185 for every unembedded vertex @xmath96 .",
    "then by lemma [ 2restrict ] , for any unembedded @xmath136 , the bipartite subgraph of @xmath34 induced by @xmath186 and @xmath187 is @xmath82-regular of density @xmath188 . applying lemma [ 2neighbour ]",
    ", we see that there are at most @xmath189 vertices @xmath129 that do not satisfy @xmath190 . summing over at most @xmath72 neighbours of @xmath27 and applying the definition of good vertices in the algorithm we obtain the first statement that @xmath191 .",
    "next we prove the second statement .",
    "consider any unembedded vertex @xmath96 .",
    "let @xmath100 be the most recent time at which we embedded a neighbour of @xmath96 , or @xmath147 if there is no such time . if @xmath192 then we embedded some neighbour @xmath193 of @xmath96 at time @xmath100 . since we chose the image @xmath194 of @xmath195 to be a good vertex , by definition we have @xmath196 .",
    "if @xmath96 is not in the queue then the rule for updating the queue in the algorithm gives @xmath197 . on the other hand ,",
    "suppose @xmath96 is in the queue , and that it joined the queue at some time @xmath198 . since @xmath96 did not join the queue at time @xmath199 we have @xmath200 . also , between times @xmath201 and @xmath97 we only embed vertices that are in the queue : the queue can not become empty during this time , as then we would have embedded @xmath96 before @xmath27 . during this time we embed at",
    "most @xmath202 vertices in @xmath203 , as we abort the algorithm if the number of vertices in @xmath204 that have ever been queued exceeds this .",
    "thus we have catalogued all possible ways in which the number of vertices free for @xmath96 can decrease .",
    "it may decrease by a factor no worse than @xmath205 when a neighbour of @xmath96 is embedded , and by a factor no worse than @xmath94 before the next neighbour of @xmath96 is embedded , unless @xmath96 joins the queue .",
    "also , if @xmath96 joins the queue we may subtract at most @xmath202 from the number of vertices free for @xmath96 .",
    "define @xmath206 to be the number of neighbours of @xmath96 that are embedded before @xmath96 joins the queue if it does , or let @xmath207 be the degree of @xmath96 if @xmath96 does not join the queue .",
    "now @xmath96 has at most @xmath72 neighbours , and @xmath208 , so @xmath209 .",
    "next we turn our attention to the time period during which we are embedding @xmath114 , which we will refer to as the _ initial phase _ of the algorithm .",
    "we start by observing that the queue remains empty during the initial phase , and so @xmath114 is embedded consecutively in the order given by the list @xmath210 . to see this",
    ", we use a similar argument to that used for the second statement in lemma [ good ] .",
    "consider any unembedded vertex @xmath96 and suppose that the queue has remained empty up to the current time @xmath97 .",
    "then we have embedded at most @xmath211 vertices in @xmath203 . also , if we embed a neighbour @xmath195 of @xmath96 the algorithm chooses a good image for it , so by definition of good , the number of free images for @xmath96 decreases by a factor no worse than @xmath212 when we embed @xmath195 .",
    "since @xmath96 has at most @xmath72 neighbours we get @xmath213 .",
    "this shows that no unembedded vertex @xmath96 is added to the queue during the initial phase .",
    "now we want to show that for any buffer vertex @xmath116 there will be many free positions for @xmath27 at the end of the algorithm .",
    "this is the point in the argument where super - regularity is essential .",
    "a vertex @xmath214 will be free for @xmath27 if it is not used for another vertex and we embed @xmath115 in @xmath215 during the initial phase .",
    "our next lemma gives a lower bound on this probability , conditional on any embedding of the previous vertices not using @xmath216 .",
    "we fix some @xmath116 and write @xmath217 , with vertices listed in the order that they are embedded .",
    "we let @xmath218 be the time at which @xmath219 is embedded .",
    "since @xmath114 is embedded consecutively we have @xmath220 for @xmath221 .",
    "we also define @xmath222",
    ". since vertices in @xmath103 are at mutual distance at least @xmath75 in @xmath1 , at time @xmath223 , when we have only embedded vertices from @xmath114 , no vertices within distance @xmath224 of @xmath27 have been embedded .",
    "( this is the only place at which mutual distance @xmath75 is important . )",
    "[ 2-x - to - v ] * ( initial phase ) * for any @xmath214 , conditional on any embedding of the vertices @xmath225 that does not use @xmath216 , with probability at least @xmath93 we have @xmath226 .",
    "* we estimate the probability that @xmath226 using arguments similar to those we are using to embed @xmath1 in @xmath34 .",
    "we want to track the free positions within @xmath215 for each unembedded vertex in @xmath115 , so we hope to not only embed each vertex of @xmath115 in @xmath215 but also to do so in a ` good ' way , a property that can be informally stated as saying that the free positions within @xmath215 will have roughly their expected size . to define this formally ,",
    "suppose @xmath227 and we are considering the embedding of @xmath219 .",
    "we interpret quantities at time @xmath218 with the embedding @xmath228 , for some unspecified @xmath229 .",
    "we say that @xmath230 is _ good for @xmath216 _ , and write @xmath231 , if for every unembedded @xmath136 we have @xmath232 .",
    "we let @xmath233 denote the event that @xmath234 is chosen in @xmath235 .    we claim that conditional on the events @xmath236 for @xmath237 and the embedding up to time @xmath238 , the probability that @xmath233 holds is at least @xmath239 . to see this we argue as in lemma [ good ] .",
    "first we show that @xmath240 for every unembedded neighbour @xmath96 of @xmath27 .",
    "note that initially @xmath241 has size at least @xmath242 by super - regularity of @xmath34 . up to time @xmath223 we embed at most @xmath243 vertices in @xmath204 , and do not embed any neighbours of @xmath96 by the distance property mentioned before the lemma . at time",
    "@xmath244 with @xmath237 , we are conditioning on the event that the algorithm chooses an image for @xmath245 that is good for @xmath216 , so the number of free images for @xmath96 within @xmath215 decreases by a factor no worse than @xmath246 .",
    "thus we indeed have @xmath247 .",
    "next , by lemma [ 2restrict ] , for any unembedded @xmath136 , the bipartite subgraph of @xmath34 induced by @xmath248 and @xmath249 is @xmath82-regular of density @xmath250 . applying lemma [ 2neighbour ]",
    ", we see that there are at most @xmath251 vertices @xmath230 that do not satisfy @xmath252 . summing over at most @xmath72 neighbours of @xmath219",
    "we see that @xmath253 . also , by lemma [ good ] we have @xmath254 , so @xmath255 since @xmath228 is chosen uniformly at random from @xmath256 , we see that @xmath233 holds with probability at least @xmath239 , as claimed .",
    "to finish the proof , note that if all the events @xmath233 hold then we have @xmath226 .",
    "multiplying the conditional probabilities , this holds with probability at least @xmath257 .",
    "our next lemma is similar to the ` main lemma ' of @xcite .",
    "an informal statement is as follows .",
    "consider any subset @xmath258 of a given class @xmath74 , and any ` not too small ' subset @xmath92 of vertices of @xmath38 that could potentially be used for @xmath258 .",
    "then it is very unlikely that no vertices in @xmath92 will be used and yet only a small fraction of the free positions for every vertex in @xmath258 will belong to @xmath92 .",
    "[ 2main ] * ( main lemma ) * suppose @xmath62 , @xmath259 and @xmath260 with @xmath261 .",
    "let @xmath262 be the event that ( i ) no vertices are embedded in @xmath92 before the conclusion of the algorithm , and ( ii ) for every @xmath263 there is some time @xmath100 such that @xmath264 .",
    "then @xmath265 .    *",
    "* we start by choosing @xmath266 with @xmath267 so that vertices in @xmath268 are mutually at distance at least @xmath2 ( this can be done greedily , using the fact that @xmath1 has maximum degree @xmath72 ) .",
    "it suffices to bound the probability of @xmath269 .",
    "note that initially we have @xmath270 for any @xmath271 .",
    "also , if no vertices are embedded in @xmath92 , then @xmath272 can only be less than @xmath273 for some @xmath96 and @xmath97 if we embed a neighbour of @xmath96 at time @xmath97 .",
    "it follows that if @xmath269 occurs , then for every @xmath274 there is a first time @xmath100 when we embed a neighbour @xmath195 of @xmath96 and have @xmath275 .",
    "by lemma [ good ] we have @xmath276 , and by choice of @xmath100 we have @xmath277 , so @xmath278",
    ". then by lemma [ 2restrict ] , the bipartite subgraph of @xmath34 induced by @xmath279 and @xmath280 is @xmath82-regular of density @xmath281 .",
    "applying lemma [ 2neighbour ] , we see that there are at most @xmath282 ` exceptional ' vertices @xmath283 that do not satisfy @xmath284 to be good , in that @xmath285 , so we can only have @xmath275 by choosing an exceptional vertex @xmath131 . but @xmath131 is chosen uniformly at random from @xmath286 possibilities ( by lemma [ good ] ) .",
    "it follows that , conditional on the prior embedding , the probability of choosing an exceptional vertex for @xmath131 is at most @xmath287 .",
    "since vertices of @xmath268 have disjoint neighbourhoods , we can multiply the conditional probabilities over @xmath274 to obtain an upper bound of @xmath288 .",
    "recall that this bound is for a subset of @xmath269 in which we have specified a certain neighbour @xmath195 for every vertex @xmath274 .",
    "taking a union bound over at most @xmath289 choices for these neighbours gives @xmath290 .",
    "now we can prove the following theorem , which implies theorem [ 2blowup ] .",
    "[ 2hp ] with high probability the algorithm embeds @xmath1 in @xmath34 .",
    "* proof . *",
    "first we estimate the probability of the iteration phase aborting with failure , which happens when the number of vertices that have ever been queued is too large .",
    "we can take a union bound over all @xmath62 and @xmath259 with @xmath291 of @xmath292 .",
    "suppose that the event @xmath293 occurs .",
    "then @xmath294 is a large set of unused vertices , yet it makes up very little of what is free to any vertex in @xmath258 . to formalise this , note that by definition , for every @xmath263 there is some time @xmath97 such that @xmath149 , where @xmath295 is the most recent time at which we embedded a neighbour of @xmath96 . since @xmath92 is unused we have @xmath296",
    ", so @xmath297 . however , we noted before lemma [ good ] that @xmath298 , so since @xmath299 we have @xmath264 .",
    "taking a union bound over all possibilities for @xmath206 , @xmath258 and @xmath92 , lemma [ 2main ] implies that the failure probability is at most @xmath300 , since @xmath301 .",
    "now we estimate the probability of the conclusion of the algorithm aborting with failure .",
    "recall that buffer vertices have disjoint neighbourhoods , the iterative phase finishes at time @xmath152 , and @xmath302 . by hall",
    "s criterion for finding a system of distinct representatives , the conclusion fails if and only if there is some @xmath62 and @xmath303 such that @xmath304 .",
    "we divide into cases according to the size of @xmath23 .",
    ": :    by lemma [ good ] we have @xmath306 for    every unembedded @xmath96 , so this case can not occur . @xmath307 .",
    ": :    in this case we use the fact that    @xmath308 is a large    set of unused vertices which is completely unavailable to any vertex    @xmath96 in @xmath23 : we have    @xmath309 ,    yet @xmath310 , so    @xmath311 . as above ,    taking a union bound over all possibilities for @xmath206 ,    @xmath23 and @xmath92 , lemma [ 2main ] implies that the    failure probability is at most    @xmath312 , since    @xmath313 . @xmath314 . : :    in this case we claim that with high probability    @xmath315 , so in fact hall s    criterion holds .",
    "it suffices to consider sets    @xmath303 of size exactly    @xmath316 .",
    "the claim fails if there is some    @xmath317 such that @xmath318 for    every @xmath319 .",
    "since @xmath216 is unused , it must    be that we failed to embed @xmath146 in    @xmath215 for each @xmath319 . by lemma",
    "[ 2-x - to - v ] , these events have probability at most @xmath320    conditional on the prior embedding .",
    "multiplying the conditional    probabilities and taking a union bound over all    @xmath62 , @xmath321 and    @xmath303 of size    @xmath316 , the failure probability is at most    @xmath322 .",
    "this estimate uses the bounds    @xmath323 ,    @xmath324    and @xmath325 .    in all cases",
    "we see that the failure probability is @xmath326 .",
    "when considering how to generalise regularity to @xmath2-graphs , a natural first attempt is to mirror the definitions used for graphs .",
    "consider an @xmath33-partite @xmath2-graph @xmath1 with vertex set @xmath35 partitioned as @xmath36 .",
    "let @xmath327 be the tripartite sub-@xmath2-graph of @xmath1 with parts @xmath38 , @xmath39 and @xmath328 , for any @xmath329 .",
    "the _ density _ of @xmath327 is @xmath330 .",
    "given @xmath42 , we say that @xmath327 is _ @xmath43-vertex - regular _ if for all subsets @xmath44 , @xmath45 and @xmath331 with @xmath46 , @xmath47 and @xmath332 , writing @xmath333 for the tripartite sub-@xmath2-graph of @xmath1 with parts @xmath49 , @xmath50 and @xmath334 , we have @xmath335 .",
    "there is a decomposition theorem for this definition analogous to the szemerdi regularity lemma .",
    "this is often known as the ` weak hypergraph regularity lemma ' , as although it does have some applications , the property of vertex - regularity is not strong enough to prove a counting lemma .    to obtain a counting lemma one needs to take account of densities of triples of @xmath1 with respect to sets of pairs of vertices , as well as densities of pairs with respect to sets of vertices .",
    "thus we are led to define regularity for simplicial complexes .",
    "we make the following definitions .",
    "[ def - complex ] suppose @xmath4 is a set partitioned as @xmath69 .",
    "we say @xmath336 is _",
    "@xmath33-partite _ if @xmath337 for @xmath62 .",
    "write @xmath338 for the _ complete _ collection of all @xmath33-partite subsets of @xmath4 .",
    "we say that @xmath1 is an _ @xmath33-partite @xmath2-complex _ on @xmath69 if @xmath1 consists of @xmath33-partite sets of size at most @xmath2 and is a simplicial complex , i.e.  if @xmath339 then @xmath340 .",
    "the _ index _ of an @xmath33-partite set @xmath23 is @xmath341 . for @xmath342",
    "$ ] we write @xmath343 for the set of @xmath344 with index @xmath345 , when this set is non - empty .",
    "if there are no sets @xmath344 with @xmath345 we can choose to either set @xmath346 or let @xmath343 be _ undefined _ , provided that if @xmath343 is defined then @xmath347 is defined for all @xmath348 . when not explicitly stated , the default is that @xmath343 is undefined when there are no sets of index @xmath349 . for any @xmath344",
    "we write @xmath350 for the naturally defined @xmath351-partite @xmath351-graph in @xmath1 containing @xmath23 .    to put this definition in concrete terms ,",
    "whenever the following sets are defined , @xmath352 is a subset of @xmath74 , @xmath353 is a bipartite graph with parts @xmath352 and @xmath354 , and @xmath355 is a @xmath2-graph contained in the set of triangles spanned by @xmath353 , @xmath356 and @xmath357 . of course , the interesting part of this structure is the @xmath2-graph together with its underlying graphs .",
    "we also have @xmath358 , which is usually equal to @xmath359 , i.e.  the set of size @xmath26 whose element is the empty set , although it could be empty if all other parts are empty .",
    "it is most natural to take @xmath360 for @xmath62 .",
    "we often allow @xmath352 to be a strict subset of @xmath74 , but note that if desired we can make such a complex ` spanning ' by changing the ground set to @xmath361 , where @xmath362 , @xmath62 . when unspecified , our default notation is that @xmath1 is an @xmath33-partite @xmath2-complex on @xmath69 .",
    "we will see later in definitions [ def - restrict ] and [ def- * ] why we have been so careful to distinguish the cases @xmath343 empty and @xmath343 undefined in definition [ def - complex ] .",
    "[ def - more ] to avoid clumsy notation we will henceforth frequently identify a set with a sequence of its vertices , e.g.  writing @xmath363 and @xmath364 .",
    "we also use concatenation for set union , e.g.  if @xmath365 then @xmath366 . for any",
    "@xmath342 $ ] we write @xmath367 for the subcomplex of @xmath1 consisting of all defined @xmath368 with @xmath369 .",
    "we also write @xmath370 .",
    "similarly , for any @xmath336 we write @xmath371 and @xmath372 . for any set system",
    "@xmath92 we let @xmath373 be the complex generated by @xmath92 , which consists of all subsets of all sets in @xmath92 .",
    "it is clear that intersections and unions of complexes are complexes .",
    "we clarify exactly what these constructions are with the following definition .",
    "[ def - iu ] suppose @xmath1 and @xmath374 are @xmath33-partite @xmath2-complexes on @xmath69 .",
    "the _ union _",
    "@xmath375 is the @xmath33-partite @xmath2-complex where @xmath376 is defined whenever @xmath377 or @xmath378 is defined .",
    "the _ intersection _",
    "@xmath379 is the @xmath33-partite @xmath2-complex where @xmath380 is defined whenever @xmath377 and @xmath378 are defined .",
    "we often specify complexes as a sequence of sets , e.g.@xmath381 has parts @xmath55 , @xmath382 for @xmath383 , @xmath359 and is otherwise undefined .",
    "now we come to a key definition .",
    "[ def - regular ] we let @xmath384 be the set of triangles formed by @xmath71 , @xmath385 and @xmath386 .",
    "we say that a defined triple @xmath327 is _ @xmath43-regular _ if for every subgraph @xmath34 of @xmath1 with @xmath387 we have @xmath388 we also say that the entire @xmath2-complex @xmath1 is _",
    "@xmath43-regular _ if every defined triple @xmath327 is @xmath43-regular and every defined graph @xmath71 is @xmath43-regular .",
    "thus @xmath327 is @xmath43-regular if for any subgraph @xmath34 with ` not too few ' triangles of index @xmath389 , the proportion of these triangles in @xmath34 of index @xmath389 that are triples in @xmath327 is approximately equal to the proportion of triangles in @xmath1 of index @xmath389 that are triples in @xmath327 .",
    "note that we never divide by zero in definition [ def - regular ] , as @xmath390 .",
    "the definition applies even if every @xmath327 is undefined , in which case we can think of @xmath1 as a @xmath224-complex with every graph @xmath71 being @xmath43-regular",
    ". it also applies even if every @xmath71 is undefined , in which case we can think of @xmath1 as a @xmath26-complex ( with no regularity restriction ) .",
    "is @xmath43-regular _ in the complex @xmath1 _ , as the definition depends on the graphs @xmath71 , @xmath385 and @xmath386 .",
    "for the sake of brevity we will omit this qualification , as it is not hard to see that when sufficiently regular these graphs are ` almost ' determined by @xmath327 : if say @xmath71 had many pairs not contained in triples of @xmath327 then @xmath391 would have many triangles none of which are triples of @xmath327 , contradicting the definition of @xmath43-regularity . ]",
    "this concept of regularity in @xmath2-complexes is more powerful than vertex regularity , in that it does admit a counting lemma .",
    "in order to apply it we also need an analogue of the szemerdi regularity lemma , stating that a general @xmath2-complex can be decomposed into a bounded number of pieces , most of which are regular .",
    "such a result does hold , but there is an important technical proviso that one can not use the same parameter @xmath43 to measure regularity for both graphs and triples in the complex . in general , one needs to allow the densities of the graphs @xmath71 to be much smaller than the parameter used to measure the regularity of triples .",
    "this is known as a _ sparse _ setting , as contrasted with a situation when all densities are much larger than @xmath43 , which is known as a _ dense _ setting .    in the sparse setting ,",
    "a counting lemma does hold , but we could nt find any way to generalise the proof of the blow - up lemma . to circumvent this difficulty we will instead apply the regular approximation lemma of rdl and schacht",
    ". informally stated , this allows us to closely approximate any @xmath2-graph @xmath392 by another @xmath2-graph @xmath34 , so that the @xmath2-complex @xmath393 generated by @xmath34 can be decomposed ( in a certain sense ) into @xmath43-regular complexes .",
    "we will come to the formal statement later in the paper , but we mention it here to motivate the form of the blow - up lemma that we will prove .",
    "we will allow ourselves to work in the dense setting of @xmath43-regular complexes , but we have to take account of the approximation of @xmath392 by @xmath34 by ` marking ' the edges @xmath394 as forbidden .",
    "if we succeed in embedding a given @xmath2-graph @xmath1 in @xmath34 without using @xmath395 then we have succeeded in embedding @xmath1 in @xmath392 .",
    "( a similar set - up is used for the embedding lemma in @xcite . )",
    "we will refer to the pair @xmath396 as a _ marked complex_.    in the remainder of this section we first motivate and then explain the definition of super - regularity for @xmath2-graphs .",
    "it turns out that this needs to be significantly more complicated than for ordinary graphs .",
    "it is not sufficient to just forbid vertices of small degree . to see this ,",
    "consider as an example a @xmath75-partite @xmath2-complex @xmath34 on @xmath397 , with @xmath398 , @xmath383 that is almost complete : say there are complete bipartite graphs on every pair of classes and complete @xmath2-graphs on every triple of classes , except for one vertex @xmath27 in @xmath399 for which the neighbourhood @xmath400 is triangle - free .",
    "we can easily choose each @xmath401 to have size @xmath402 by dividing each class @xmath74 , @xmath403 into two parts .",
    "then @xmath1 is @xmath404-regular with densities @xmath405 and has minimum degrees at least @xmath402 in each triple , but @xmath27 is not contained in any tetrahedron @xmath406 , so we can not embed a perfect @xmath406-packing .",
    "another complication is that the definition of super - regularity for @xmath2-graphs is not ` local ' , in the sense that super - regularity of a graph @xmath34 was defined by a condition for each of its bipartite subgraphs @xmath37 .",
    "instead , we need to define super - regularity for the entire structure @xmath407 , where @xmath34 is an @xmath33-partite @xmath2-complex and @xmath395 is a set of marked edges . to explain this point we need to look ahead to the analysis of the algorithm that we will use to prove the blow - up lemma .",
    "first we need an important definition that generalises the process of restricting a graph to a subset of its vertex set : we may also consider restricting a complex to a subcomplex in the following manner .",
    "[ def - restrict ] suppose @xmath1 and @xmath34 are @xmath33-partite @xmath2-complexes on @xmath69 and @xmath34 is a subcomplex of @xmath1 .",
    "the _ restriction _",
    "@xmath408 $ ] is the @xmath33-partite @xmath2-complex on @xmath69 , where @xmath408_i$ ] is defined if and only if @xmath343 is defined , and @xmath408_i$ ] consists of all @xmath409 such that @xmath410 for every @xmath411 such that @xmath412 is defined .    to put this in words ,",
    "a given set @xmath23 in @xmath1 belongs to the restriction @xmath408 $ ] if every subset @xmath92 of @xmath23 belongs to @xmath34 , provided that the part of @xmath34 corresponding to @xmath92 is defined . at this point",
    "we will give some examples to illustrate definition [ def - restrict ] and clarify the distinction between parts being empty or undefined in definition [ def - complex ] .",
    "consider a @xmath2-partite @xmath224-complex @xmath1 on @xmath413 such that @xmath414 , @xmath415 and @xmath416 are non - empty graphs .",
    "suppose @xmath34 is a @xmath2-partite @xmath26-complex on @xmath413 .",
    "if @xmath417 , @xmath418 and @xmath419 are defined then @xmath408 $ ] is the @xmath2-partite @xmath224-complex on @xmath413 with @xmath408_i = g_i$ ] and @xmath408_{ij}$ ] equal to the bipartite subgraph of @xmath71 spanned by @xmath382 and @xmath420 .",
    "this corresponds to the usual notion of restriction for graphs .",
    "note that all of the sets @xmath408_i$ ] and graphs @xmath408_{ij}$ ] are defined and some may be empty .",
    "however , if any of the @xmath382 is undefined then it behaves as if it were equal to @xmath421 .",
    "for example , if @xmath417 is undefined and @xmath418 is defined then @xmath408_1 = h_1 $ ] and @xmath408_{12}$ ] is the bipartite subgraph of @xmath414 spanned by @xmath422 and @xmath418 .",
    "this highlights the importance of distinguishing between @xmath417 being empty or @xmath417 being undefined .",
    "note that definition [ def - restrict ] is monotone , in the sense that adding sets to any given defined part @xmath423 of @xmath34 does not remove any sets from any given part @xmath408_j$ ] of the restriction @xmath408 $ ] .",
    "we record the following obvious property for future reference : @xmath424_i = g_i \\mbox { when } g_i \\mbox { is defined.}\\ ] ]    another obvious property used later concerns the _ empty complex _",
    "@xmath425 , which satisfies @xmath426=h$ ] for any complex @xmath1 .",
    "next we will reformulate the definition of regularity for @xmath2-complexes using the restriction notation .",
    "first we make the following definitions .",
    "[ def - density ] suppose @xmath1 is an @xmath33-partite @xmath2-complex on @xmath69 . for any @xmath342",
    "$ ] we let @xmath427 denote the set of @xmath428 such that any strict subset @xmath429 belongs to @xmath430 when defined .",
    "when @xmath343 is defined and @xmath431 , we define the _ relative density ( at @xmath349 ) _ of @xmath1 as @xmath432 .",
    "we also call @xmath433 the _ @xmath349-density _ of @xmath1 .",
    "we define the _ absolute density _ of @xmath343 as @xmath434 .    to illustrate definition [ def - density ] , note that @xmath435 and @xmath436 when defined .",
    "if @xmath71 is defined then @xmath437 and @xmath438 is the density of the bipartite graph @xmath71 with parts @xmath421 and @xmath439 .",
    "we have @xmath440 , so @xmath441 in the case when @xmath442 and @xmath443 . also , if @xmath71 , @xmath386 and @xmath385 are defined then @xmath444 is the set of triangles in @xmath1 of index @xmath389 .",
    "we also note that if any of the @xmath71 is undefined it behaves as if it were equal to @xmath445 , e.g.  if @xmath71 is undefined and @xmath386 and @xmath385 are defined then @xmath446 is the set of triangles in @xmath447 . as an illustration of definition [ def - restrict ]",
    ", we note that @xmath448_i$ ] , recalling that @xmath338 is the complex of @xmath33-partite sets and @xmath449 .",
    "now suppose @xmath1 is a @xmath2-partite @xmath2-complex on @xmath413 such that @xmath450 is defined and @xmath451 .",
    "suppose @xmath452 is a @xmath224-complex such that @xmath55 , @xmath56 and @xmath57 are defined",
    ". then @xmath453 and @xmath454 .",
    "by definition [ def - restrict ] we have @xmath408_{123 } = h_{123 } \\cap g^*_{123}$ ] and @xmath408^*_{123}=g^*_{123}$ ] , so by definition [ def - density ] @xmath455 ) = |h \\cap g^*_{123}|/|g^*_{123}|$ ] .",
    "therefore @xmath450 is @xmath43-regular if whenever @xmath456 we have @xmath455 ) = d_{123}(h ) \\pm { \\epsilon}$ ] .    for the remainder of this section we let @xmath1 be an @xmath33-partite @xmath2-complex on @xmath69 , and @xmath34 be an @xmath33-partite @xmath2-complex on @xmath36 , with @xmath457 for @xmath62 .",
    "we want to find an embedding @xmath458 of @xmath1 in @xmath34 .",
    "our algorithm will consider the vertices of @xmath4 in some order and embed them one at a time . at some time @xmath97 in the algorithm , for each @xmath344 there will be some @xmath351-graph @xmath459 consisting of those sets @xmath460 that are _ free _ for @xmath23 , in that mapping @xmath23 to @xmath461 is _ locally consistent _ with the embedding so far .",
    "these free sets will be _ mutually consistent _ , in that @xmath462 is a complex for every @xmath344 .",
    "we use the convention that @xmath463 is undefined for any @xmath464 . note that ( [ 3free ] ) applies even for @xmath464 .",
    "initially we define @xmath465 for all @xmath344 .",
    "now suppose we have defined @xmath466 for all @xmath344 and then at time @xmath97 we embed some vertex @xmath161 to some vertex @xmath129 .",
    "_ we will use this notation consistently throughout the paper .",
    "_ then for any @xmath344 containing @xmath27 we can only allow sets in @xmath463 that correspond to mapping @xmath27 to @xmath131 , i.e.  @xmath467 , which is our notation for @xmath468 . also , for any @xmath23 in the neighbourhood complex @xmath469 , i.e.  a set @xmath23 not containing @xmath27 such that @xmath470 , in order for @xmath463 to be mutually consistent with @xmath471 , we can only allow sets in @xmath463 that are in the neighbourhood of @xmath131 , i.e.  @xmath472 , which is our notation for @xmath473 . finally , we need to consider the effect that embedding @xmath27 has for sets @xmath23 that do not contain @xmath27 and are not even in the neighbourhood complex @xmath469 . such a set @xmath23 may contain a set @xmath474 in @xmath469 , so that @xmath475 is affected by the embedding of @xmath27 .",
    "then mutual consistency requires for that any set @xmath476 , the subset of @xmath461 corresponding to @xmath474 must belong to @xmath475 .",
    "we need to include these restrictions for all subsets @xmath474 of @xmath23 . also , as we are using the vertex @xmath131 to embed @xmath27 we have to remove it from any future free sets .",
    "thus we are led to the following definition .",
    "( lemma [ consistent ] will show that it is well - defined . )    * ( update rule ) * [ def - update ] suppose @xmath27 is embedded to @xmath131 at time @xmath97 and @xmath344 .",
    "if @xmath477 we define @xmath478 . if @xmath479 we define @xmath480_s { \\setminus}y.\\ ] ]    note that @xmath481 is either @xmath482 if @xmath483 or obtained from @xmath484 by deleting the element in @xmath23 of index @xmath485 if @xmath486 .",
    "thus @xmath487 is @xmath33-partite .",
    "also , the notation ` @xmath488 ' means that we delete all sets containing @xmath131 ; this can have an effect only when @xmath486 .",
    "we will show below in lemma [ consistent ] that definition [ def - update ] makes sense , but first we will give an example to illustrate how it works .",
    "[ eg1 ] suppose that @xmath1 and @xmath34 are @xmath75-partite @xmath2-complexes , and that we have @xmath75 vertices @xmath489 , @xmath383 that span a tetrahedron @xmath406 in @xmath1 , i.e.  @xmath1 contains every subset of @xmath490 .",
    "suppose also that we have the edges @xmath491 and @xmath492 and all their subsets for some other @xmath75 vertices @xmath493 , @xmath383 , and that there are no other edges of @xmath1 containing any @xmath494 or @xmath495 , @xmath383 .",
    "initially we have @xmath496 for every @xmath344 .",
    "suppose we start the embedding by mapping @xmath497 to some @xmath498 at time @xmath26 . applying definition [ def - update ] to sets @xmath23 containing @xmath497 gives @xmath499 , @xmath500 for @xmath501 , and @xmath502 for @xmath503 .",
    "next we consider some examples of definition [ def - update ] for sets not containing @xmath497 .",
    "we have @xmath504 for @xmath501",
    ". then @xmath505_i { \\setminus}v_1 = g(v_1)_i$ ] .",
    "similarly , we have @xmath506 for @xmath503 .",
    "for @xmath507 we have @xmath508 therefore @xmath509_{234 } { \\setminus}v_1 $ ] consists of all triples in @xmath510 that also form a triangle in the neighbourhood of @xmath511 , and so complete @xmath511 to a tetrahedron in @xmath34 .    for @xmath512",
    ", we have @xmath513 , so @xmath514_{23 } { \\setminus}v_1 $ ] consists of all pairs in @xmath57 that contain a @xmath56-neighbour of @xmath511 . for @xmath515 ,",
    "@xmath516 is the empty complex , so @xmath517_2 { \\setminus}v_1 = f_{x'_2}(0)$ ] is unaffected .",
    "( recall that @xmath518=j$ ] for any complex @xmath519 . )",
    "finally we give two examples in which the deletion of @xmath511 has some effect . for @xmath520 , we have @xmath521 , @xmath522 , and @xmath523",
    ". then @xmath524 { \\setminus}v_1 $ ] , so @xmath525 consists of all triples @xmath152 in @xmath526 not containing @xmath511 such that @xmath527 is a neighbour of @xmath511 . for @xmath528",
    ", @xmath529 is the empty complex , so @xmath530 consists of all pairs in @xmath56 that do not contain @xmath511 .",
    "now we prove a lemma which justifies definition [ def - update ] and establishes the ` mutual consistency ' mentioned above , i.e.  that @xmath531 is a complex .",
    "first we need a definition .",
    "[ def - set - restrict ] suppose @xmath336 is @xmath33-partite and @xmath532 .",
    "we write @xmath533 .",
    "we also write @xmath534 for any @xmath33-partite set @xmath152 with @xmath535 .    [ consistent ] suppose @xmath336 is @xmath33-partite and @xmath184 . if @xmath479 then @xmath536 is a subcomplex of @xmath537 and @xmath538 { \\setminus}y$ ]",
    "is a complex . if @xmath477 then @xmath467 , @xmath539 and @xmath540 is a complex .",
    "* proof . *",
    "note that @xmath541 is a complex .",
    "we prove the statement of the lemma by induction on @xmath97 .",
    "the argument uses the simple observation that if @xmath519 is any complex and @xmath216 is a vertex of @xmath519 then @xmath542 and @xmath543 are subcomplexes of @xmath519 .",
    "first suppose that @xmath479 . since @xmath537 is a complex by induction hypothesis",
    ", @xmath544 is a subcomplex of @xmath545 , and so of @xmath537 .",
    "for any @xmath546 write @xmath547 { \\setminus}y$ ] . then @xmath548 is a complex , since restriction to a complex gives a complex , and removing all sets containing @xmath131 preserves the property of being a complex .",
    "furthermore , @xmath549 by definition [ def - update ] .",
    "we also have @xmath550 , since a set @xmath551 of index @xmath474 belongs to @xmath552 if and only if it belongs to @xmath537 , and any @xmath553 belongs to @xmath554 if and only if it belongs to @xmath536 .",
    "therefore @xmath555 { \\setminus}y$ ] is a complex .",
    "now suppose that @xmath477",
    ". then @xmath467 by definition . next ,",
    "note that @xmath556 is a complex , and @xmath557_{s{\\setminus}x } = f_s(t-1)(y)$ ] by equation ( [ eq : res ] ) .",
    "since @xmath23 is @xmath33-partite , deleting @xmath131 has no effect , and we also have @xmath558 . therefore @xmath559 is a complex .",
    "we will also use the following lemma to construct @xmath463 iteratively from @xmath560 .",
    "[ build - update ] suppose that @xmath344 , @xmath561 , @xmath479 and @xmath562 .",
    "write @xmath563 . then @xmath564 $ ] .    *",
    "* first note that for any @xmath92 with @xmath565 we have @xmath566 $ ] .",
    "now suppose @xmath567",
    ". then @xmath568 and @xmath569 for every @xmath570 , so @xmath571 $ ] .",
    "conversely , suppose that @xmath571_s$ ] .",
    "for any @xmath572 with @xmath573 we have @xmath574 , so @xmath575 .",
    "also @xmath576 is undefined for @xmath577 ; in particular , our assumption that @xmath562 means that @xmath578 is undefined . therefore @xmath579 for every @xmath546 such that @xmath576 is defined , i.e. @xmath580_s$ ] . also , if @xmath486 , then writing @xmath581 , we have @xmath582 , so @xmath583 . therefore @xmath580_s { \\setminus}y = f_s(t)$ ] .",
    "we referred to ` local consistency ' when describing the update rule because it only incorporates the effect that embedding @xmath27 has on sets containing at least one neighbour of @xmath27 . to illustrate this , recall that in example [ eg1 ] above we have @xmath584 .",
    "now @xmath1 contains @xmath585 and @xmath497 is embedded to @xmath511 , so @xmath586 must be embedded to a vertex in @xmath587 .",
    "also , @xmath1 contains @xmath512 , so any image of @xmath515 must have a neighbour in @xmath587 .",
    "this may not be the case for every vertex in @xmath418 , so there is some non - local information regarding the embedding that has not yet been incorporated into the free sets at time @xmath26 . in light of this",
    ", we should admit that our description of sets in @xmath463 as ` free ' is a slight misnomer , as there may be a small number of sets in @xmath463 that can not be images of @xmath23 under the embedding .",
    "this was the case even for the graph blow - up lemma , in which we described vertices in @xmath119 as ` free ' images for @xmath27 but then only allowed the use of @xmath588 .",
    "on the other hand , our definition of free sets is relatively simple , and does contain enough information for the embedding . to see this , note that by definition of restriction @xmath531 is a subcomplex of @xmath589 at every time @xmath97 , and when all vertices of @xmath23 are embedded by @xmath458 we have @xmath590 with @xmath591 .",
    "furthermore , by removing all sets that contain @xmath131 in the definition of @xmath463 we ensure that no vertex is used more than once by @xmath458 .",
    "therefore it does suffice to only consider local consistency in constructing the embedding , provided that the sets @xmath463 remain non - empty throughout .",
    "the advantage is that we have the following simple update rule for sets @xmath23 that are not local to @xmath27 .",
    "[ not - local ] if @xmath23 does not contain any vertex in @xmath592 then @xmath593 .    *",
    "note that @xmath594 is the empty complex",
    ".    we will also need to keep track of the marked triples @xmath395 during the embedding algorithm .",
    "initially , we just have some triples in @xmath34 that are marked as forbidden for any triple of @xmath1 . then , as the algorithm proceeds , each pair of @xmath1 is forbidden certain pairs of @xmath34 , and each vertex of @xmath1 is forbidden certain vertices of @xmath34 .",
    "we adopt the following notation .",
    "[ def - mark ] for any triple @xmath595 we write @xmath596 for the subset of @xmath597 that is unembedded at time @xmath97 .",
    "we define the marked subset of @xmath598 corresponding to @xmath597 as @xmath599    in words , @xmath600 consists of all sets @xmath461 in @xmath598 that can not be used as images for @xmath596 in the embedding , because when we add the images of the embedded part @xmath601 of @xmath597 we obtain a marked triple . to illustrate this ,",
    "suppose that in example [ eg1 ] we have some marked triples @xmath395 . at time @xmath602 we map @xmath497 to @xmath511 , and then the free set for @xmath603 is @xmath604 .",
    "since the edges @xmath605 are marked as forbidden , we will mark @xmath606 as forbidden by defining @xmath607 . as another illustration , recall that @xmath608 consists of all triples in @xmath510 that also form a triangle in the neighbourhood of @xmath511 .",
    "then @xmath609 consists of all triples in @xmath610 that also form a triangle in the neighbourhood of @xmath511 .    for any triple @xmath597 containing @xmath27 such that @xmath611 we will choose @xmath612",
    "this will ensure that @xmath613 .",
    "the following lemma will enable us to track marked subsets .",
    "the proof is obvious , so we omit it .",
    "[ track - mark]@xmath614    * if @xmath615 then @xmath616 and @xmath617 .",
    "* if @xmath618 then @xmath619 and @xmath620 .",
    "we need one more definition before we can define super - regularity .",
    "it provides some alternative notation for describing the update rule , but it has the advantage of not referring explicitly to any embedding or to another complex @xmath1 .    [ def-3preplus ] suppose @xmath34 is an @xmath33-partite @xmath2-complex on @xmath36 , @xmath62 , @xmath621 and @xmath349 is a subcomplex of @xmath622}{\\le 3}$ ] .",
    "we define @xmath623 $ ] .",
    "we will now explain the meaning of definition [ def-3preplus ] and illustrate it using our running example [ eg1 ] . to put it in words , @xmath624 is the restriction of @xmath34 obtained by only taking those sets @xmath410 such that any subset of @xmath92 indexed by a set @xmath23 in @xmath349 belongs to the neighbourhood @xmath625 , provided that the corresponding part @xmath626 is defined . in example",
    "[ eg1 ] we have @xmath627 and @xmath628_2 = g(v_1)_2 $ ] .",
    "choosing @xmath629 we have @xmath630 and so @xmath631 .",
    "similarly , choosing @xmath632 we have @xmath633 and @xmath634_{23 } = g(v_1)_{23 } = g^{i_{v_1}}_{23}$ ] .",
    "also , choosing @xmath635 we see that @xmath636 consists of all triples in @xmath510 that also form a triangle in the neighbourhood of @xmath511 . in general",
    ", we can use this notation to describe the update rule for any complex @xmath1 if we embed some vertex @xmath27 of @xmath1 to some vertex @xmath216 of @xmath34 at time @xmath26 . if @xmath637 we have @xmath638 as before .",
    "if @xmath479 we let @xmath639 and then @xmath640 .    finally , we can give the definition of super - regularity .",
    "[ def-3super ] ( super - regularity ) suppose @xmath34 is an @xmath33-partite @xmath2-complex on @xmath36 and @xmath641 .",
    "we say that the marked complex @xmath407 is @xmath642-_super - regular _",
    "if    \\(i ) @xmath34 is @xmath43-regular , and @xmath643 if @xmath644 and @xmath645 is defined ,    \\(ii ) for every @xmath62 , @xmath621 and @xmath23 such that @xmath646 is defined , @xmath647 if @xmath648 and @xmath625 is an @xmath82-regular @xmath224-complex with @xmath649 for @xmath650 ,    \\(iii ) for every vertex @xmath216 and subcomplex @xmath349 of @xmath622}{\\le 3}$ ] , @xmath651 if @xmath652 , and @xmath624 is an @xmath82-regular @xmath2-complex with densities ( when defined ) @xmath653    just as one can delete a small number of vertices from an @xmath43-regular graph to make it super - regular , we will see later ( lemma [ 3del ] ) that one can delete a small number of vertices from an @xmath43-regular marked @xmath2-complex to make it super - regular . for",
    "now we will just explain the meaning of definition [ def-3super ] with reference to our running example .",
    "first we remark that the parameters in the definition are listed according to their order in the hierarchy , in that @xmath654 .",
    "thus we consider a dense setting , in which the regularity parameters @xmath43 and @xmath82 are much smaller than the density parameters @xmath655 and @xmath656 .",
    "however , one should note that the marking parameter @xmath657 has to be larger than the density parameter @xmath655 , which is the source of some technical difficulties in our arguments .",
    "we will bound the marked sets by a increasing sequence of parameters that remain small throughout the embedding .",
    "for now we just see what the definition of super - regularity tells us about the first step .    condition ( i ) just says that @xmath34 is a regular complex and gives lower bounds for the relative densities of its parts . condition ( ii )",
    "is analogous to the minimum degree condition in the definition of super - regularity for graphs .",
    "the second part of the condition says that the neighbourhood is a regular complex , and that its relative densities are approximately what one would expect ( we will explain the formulae later ) .",
    "the first part says that the proportion of marked edges through any vertex is not too great .",
    "we need this to control the proportion of free sets that we have to mark as forbidden during the embedding algorithm . to illustrate this ,",
    "suppose that in example [ eg1 ] we have some marked triples @xmath395 . at time @xmath602 we map @xmath497 to @xmath511 , and then the free set for @xmath603 is @xmath604 .",
    "since the edges @xmath605 are marked as forbidden , we will mark @xmath658 as forbidden .",
    "condition ( ii ) ensures that not too great a proportion is forbidden .",
    "note that the density of the neighbourhood complex @xmath659 will be much smaller than the marking parameter @xmath657 , so this does not follow if we only make the global assumption that @xmath395 is a small proportion of @xmath34 .    condition ( iii ) is the analogue to condition ( ii ) for the restrictions that embedding some vertex can place on the embeddings of sets not containing that vertex .",
    "a very simple illustration is the case @xmath660 , which gives @xmath661 when defined .",
    "( this could also be obtained from condition ( ii ) by summing over vertices @xmath216 . ) for a more substantial illustration , consider example [ eg1 ] and the subcomplex @xmath635 .",
    "we noted before the definition that @xmath636 consists of all triples in @xmath510 that also form a triangle in the neighbourhood of @xmath511 .",
    "the second part of condition ( iii ) ensures that @xmath662 is a regular complex , and that its relative densities are approximately what one would expect ( again , we will explain the formulae later ) .",
    "the first part of condition ( iii ) again is needed to control the proportion of free sets that are marked .",
    "we will mark @xmath663 as forbidden in @xmath608 , and the condition says that this is a small proportion .",
    "again , since the neighbourhood of @xmath511 is sparse relative to @xmath34 , this does not follow only from a global assumption that @xmath395 is a small proportion of @xmath34 .    as another illustration of condition ( iii ) ,",
    "suppose that we modify example [ eg1 ] by deleting the edge @xmath664 from @xmath1 .",
    "then @xmath665 and @xmath509_{234 } { \\setminus}v_1 $ ] consists of all triples @xmath666 such that @xmath667 and @xmath668 are edges in the neighbourhood of @xmath511 .",
    "taking @xmath669 we have @xmath636 .",
    "so condition ( iii ) tells us that also with this modified @xmath1 , after embedding @xmath497 to @xmath511 the complex @xmath670 is regular and we do not mark too much of @xmath608 as forbidden .",
    "in this section we prove the following blow - up lemma for @xmath2-graphs .",
    "[ 3blowup ] * ( @xmath2-graph blow - up lemma ) * suppose @xmath1 is an @xmath33-partite @xmath2-complex on @xmath69 of maximum degree at most @xmath72 , @xmath407 is an @xmath642-super - regular @xmath33-partite marked @xmath2-complex on @xmath36 , where @xmath671 for @xmath62 , @xmath645 is defined whenever @xmath377 is defined , and @xmath672 .",
    "then @xmath673 contains a copy of @xmath1 , in which for each @xmath62 the vertices of @xmath38 correspond to the vertices of @xmath74 .",
    "theorem [ 3blowup ] is similar in spirit to theorem [ 2blowup ] : informally speaking , we can embed any bounded degree @xmath2-graph in any super - regular marked @xmath2-complex . ( the parallel would perhaps be stronger if we had also introduced marked edges in the graph statement ; this can be done , but there is no need for it , so we preferred the simpler form . )",
    "we remark that we used the assumption @xmath70 in theorem [ 2blowup ] for simplicity , but the assumption @xmath674 works with essentially the same proof , and is more useful in applications .",
    "( arbitrary part sizes are permitted in @xcite , but this adds complications to the proof , and it is not clear why one would need them , so we will not pursue this option here . ) there are various other generalisations that are useful in applications , but we will postpone discussion of them until we give the general hypergraph blow - up lemma .",
    "theorem [ 3blowup ] is already sufficiently complex to illustrate the main ideas of our approach , so we prove it first so as not to distract the reader with additional complications .",
    "the section contains six subsections , organised as follows . in the first subsection we present the algorithm that we will use to prove theorem [ 3blowup ] , and",
    "also establish some basic properties of the algorithm . over the next two subsections",
    "we develop some theory : the second subsection contains some useful properties of restriction ( definition [ def - restrict ] ) ; the third contains some properties of regularity for @xmath2-graphs , which are similar to but subtly different from known results in the literature",
    ". then we start on the analysis of the algorithm , following the template established in the proof of theorem [ 2blowup ] .",
    "the fourth subsection concerns good vertices , and is analogous to lemma [ good ] .",
    "the fifth subsection concerning the initial phase is the most technical , containing three lemmas that play the role of lemma [ 2-x - to - v ] for @xmath2-graphs .",
    "the final subsection concerns the conclusion of the algorithm , and is analogous to lemma [ 2main ] and theorem [ 2hp ] .      as for the graph blow - up lemma",
    ", we will prove theorem [ 3blowup ] via a random greedy algorithm to construct an embedding @xmath78 such that @xmath675 for every edge @xmath676 of @xmath1 . in outline",
    ", it is quite similar to the algorithm used for graphs , but when it comes to details the marked edges create significant complications .",
    "we introduce more parameters with the hierarchy @xmath677 most of these parameters do not require any further comment , as we explained their role in the graph blow - up lemma , and they will play the same role here .",
    "we need many more ` annotated @xmath43 ' parameters to measure regularity here , but this is merely a technical inconvenience .",
    "the parameters @xmath678 with @xmath679 and @xmath680 satisfy @xmath681 when @xmath682 or @xmath683 and @xmath684 .",
    "because of the marked edges , we also have new ` annotated @xmath657 ' parameters , which are used to bound the proportion of free sets that are marked .",
    "it is important to note that the buffer parameter @xmath89 and queue admission parameter @xmath94 are larger than the marking parameter @xmath657 , which in turn is larger than the density parameter @xmath655 .",
    "the result is that the queue may become non - empty during the initial phase , and then the set @xmath114 of neighbours of the buffer @xmath103 will not be embedded consecutively in the order given by the original list @xmath210 . to cope with this",
    ", we need a modified selection rule that allows vertices in @xmath114 to jump the queue .",
    "initialisation and notation .",
    ": :    we choose a buffer set @xmath101 of vertices at mutual    distance at least @xmath685 in @xmath1 so that    @xmath686 for    @xmath62 . since @xmath687    for @xmath62 and @xmath1 has maximum degree    @xmath72 we can construct @xmath103 simply by selecting    vertices one - by - one greedily . for any given vertex",
    "there are at most    @xmath688 vertices at distance less than @xmath685 ,    so at any point in the construction we have excluded at most    @xmath689 vertices from any given    @xmath74 .",
    "thus we can construct @xmath103 provided that    @xmath690 .",
    "+    let @xmath691 be the set of vertices    with a neighbour in the buffer .",
    "then    @xmath692 for    @xmath62 .",
    "+    we order the vertices in a list @xmath113 that starts with    @xmath114 and ends with @xmath103 . within @xmath114",
    ",    we arrange that @xmath25 is consecutive for each    @xmath116 .",
    "we denote the vertex of @xmath1    selected for embedding at time @xmath97 by @xmath117",
    ".    this will usually be the first vertex of @xmath118 , but we    will describe some exceptions to this principle in the selection rule    below .",
    "+    we denote the queue by @xmath110 and write    @xmath111 .",
    "we denote the vertices    jumping the queue by @xmath693 and write    @xmath694 .",
    "initially we set    @xmath695 .",
    "+    we write @xmath463 for the sets of @xmath645 that    are _ free _ to embed a given set @xmath23 of @xmath1 .",
    "we    also use the convention that @xmath463 is undefined if    @xmath464 .",
    "initially we set @xmath496    for @xmath344 .",
    "we also write    @xmath122 for the    unembedded vertices of @xmath74 and    @xmath123 for the    free positions in @xmath38 .",
    "we let    @xmath124 and    @xmath125 .",
    ": :    at time @xmath97 , while there are still some unembedded    non - buffer vertices , we select a vertex to embed @xmath128    according to the following _ selection rule_. informally , the rule is    that our top priority is to embed any vertex neighbourhood    @xmath25 with @xmath116 as a consecutive    sequence before embedding @xmath27 itself or any other vertex    with distance at most @xmath75 from @xmath27 , and our    second priority is to embed vertices in the queue .",
    "formally , the rule    is :    +    * if @xmath696 we select    @xmath128 to be any element of @xmath697 ,    * if @xmath698 and    @xmath699 we consider any element    @xmath700 of @xmath144 .    * * if the distance from @xmath700 to all vertices in the buffer    @xmath103 is at least @xmath701 then we select    @xmath702 .    *",
    "* otherwise , there is a vertex @xmath703 at distance at    most @xmath75 from @xmath700 , and @xmath704 is    unique by the mutual distance property of @xmath103 .",
    "if there    are any unembedded elements of @xmath705 , we choose one    of them to be @xmath128 , choosing @xmath700 itself    if @xmath706 , and put all other unembedded    vertices of @xmath705 in @xmath693 . if all of    @xmath705 has been embedded we choose    @xmath702 .    *",
    "if @xmath707 we let    @xmath128 be the first vertex of @xmath118 .",
    "+    we choose the image @xmath76 of @xmath27 uniformly    at random among all elements @xmath129 that are    ` good ' , a property that can be informally stated as saying that if we    set @xmath130 then the free sets @xmath463    will be regular , have the correct density , and not create too much    danger of using an edge marked as forbidden .",
    "now we will describe the    formal definition .",
    "note that all expressions at time @xmath97    are to be understood with the embedding @xmath130 , for    some unspecified vertex @xmath131 .",
    "+    * definitions . *",
    "+    \\1 . for a vertex @xmath27",
    "we write @xmath708 for    the number of elements in @xmath25 that have been    embedded at time @xmath97 . for a set @xmath23",
    "we write    @xmath709 .",
    "we also define    @xmath710 as follows . when @xmath652 we let    @xmath711 . when @xmath712 we let    @xmath713 , where @xmath714 is the    maximum value of @xmath715 over vertices    @xmath700 embedded at time @xmath716 with    @xmath717 ; if there is no such vertex @xmath700    we let @xmath711",
    "+    \\2 . as in definition",
    "[ def - update ] , for any @xmath33-partite set    @xmath23 we define @xmath718 if    @xmath477 or    @xmath719_s { \\setminus}y$ ]    if @xmath479 . for any sets",
    "@xmath546 we write    @xmath720 ; there is no    ambiguity , as the density is the same for any @xmath23    containing @xmath474 .",
    "we say that @xmath23 is _ unembedded _ if every vertex of    @xmath23 is unembedded , i.e.  @xmath721 for    @xmath722 .",
    "we define an _ exceptional _ set    @xmath723 by saying @xmath131    is in @xmath724 if and only if for    every unembedded @xmath725 ,    @xmath726 lemma [ 3exceptional ] will imply that    @xmath727 is small compared to @xmath186 .",
    "4 .    as in definition",
    "[ def - mark ] , for any triple @xmath595 we    write @xmath596 for the subset of @xmath597 that is    unembedded at time @xmath97 and    @xmath728 .",
    "we define    @xmath729    intuitively , these sets consist of vertices @xmath131 to which    it is _ dangerous _ to embed @xmath27 .",
    "lemma [ 3marked ] will show    that only a small proportion of free vertices are dangerous .",
    "let @xmath730 be the set of all triples    @xmath595 with    @xmath731 .",
    "we obtain    the set of _ good _ elements @xmath138 from    @xmath186 by deleting @xmath727 and    @xmath732 for every @xmath733 .",
    "+    we embed @xmath27 as @xmath130 where    @xmath131 is chosen uniformly at random from the good elements    of @xmath186 .",
    "we conclude the iteration by updating    @xmath118 , @xmath144 and @xmath697 .",
    "first we remove @xmath27 from whichever of these sets it was    taken .",
    "then we add to the queue any unembedded vertex @xmath96    for which @xmath98 has become ` too small ' . to make this    precise ,",
    "suppose @xmath145 , and let    @xmath100 be the most recent time at which we embedded a    vertex in @xmath734 , or @xmath147 if there is no    such time .",
    "( note that if @xmath735 then    @xmath148 . )",
    "we add @xmath96 to @xmath110 if    @xmath149 .",
    "this defines    @xmath150 , @xmath110 and @xmath693 .",
    "+    repeat this iteration until the only unembedded vertices are buffer    vertices , but abort with failure if at any time we have    @xmath151 for some    @xmath62 . let @xmath152 denote the time at    which the iterative phase terminates ( whether with success or    failure ) . conclusion .",
    ": :    suppose @xmath154 is unembedded at time @xmath152    and we embed the last vertex of @xmath25 at time    @xmath736 .",
    "we define the following _ available _ sets for    @xmath27 .",
    "we let @xmath737 be obtained from    @xmath738 by removing all sets    @xmath739 for triples @xmath597 containing    @xmath27 .",
    "we let @xmath740 .",
    "we    choose a system of distinct representatives for    @xmath741 to complete the embedding , either    ending with success if this is possible , or aborting with failure if    it is not possible .    to justify this algorithm",
    ", we need to show that if it does not abort with failure then it does embed @xmath1 in @xmath673 .",
    "we explained in the previous section why the ` local consistency ' of the update rule implies that it embeds @xmath1 in @xmath34 , so we just need to show that no marked edge is used .",
    "this follows from the following lemma .",
    "[ itworks ] suppose @xmath27 is the last unembedded vertex of some triple @xmath597 at time @xmath742 .    then @xmath743 .",
    "if @xmath744 then @xmath745 .",
    "* proof . *",
    "note that @xmath611 , @xmath746 and @xmath747 is a set of size @xmath26 .",
    "if we were to choose @xmath748 then we would get @xmath749 and so @xmath750 .",
    "on the other hand , if we choose @xmath751 then we get @xmath752 and so @xmath753 .",
    "therefore @xmath743 .",
    "the second statement is now clear .",
    "it will often be helpful to use the following terminology pertaining to increments of @xmath708 .",
    "we think of time as being divided into _ @xmath27-regimes _ , defined by the property that vertices of @xmath25 are embedded at the beginning and end of @xmath27-regimes , but not during @xmath27-regimes .",
    "thus the condition for adding a vertex @xmath96 to the queue is that the free set for @xmath96 has shrunk by a factor of @xmath94 during the current @xmath96-regime .",
    "note that each vertex @xmath27 defines its own regimes , and regimes for different vertices can intersect in a complicated manner .",
    "note that any vertex neighbourhood contains at most @xmath754 vertices .",
    "thus in the selection rule , any element of the queue can cause at most @xmath754 vertices to jump the queue .",
    "note also that when a vertex neighbourhood jumps the queue , its vertices are immediately embedded at consecutive times before any other vertices are embedded .",
    "we collect here a few more simple observations on the algorithm .",
    "[ 3observe]@xmath614    for any @xmath62 and time @xmath97",
    "we have @xmath755 .    for any @xmath97 we have @xmath756 .",
    "we have @xmath757 for any vertex , @xmath758 when @xmath652 , @xmath759 when @xmath648 , and @xmath760 when @xmath761 .",
    "thus the @xmath43-subscripts are always defined in @xmath762 .    for any @xmath735 we have @xmath763 , so for any @xmath344 that intersects @xmath25 we have @xmath764 .    if @xmath764 then @xmath765 .    if @xmath96 is embedded at time @xmath766 and @xmath767 then @xmath768 .",
    "* proof . * as in the graph blow - up lemma , we stop the iterative procedure when the only unembedded vertices are buffer vertices , and during the procedure a buffer vertex is only embedded if it joins the queue .",
    "therefore @xmath769 , so ( i ) holds . the fact that an element of the queue can cause at most @xmath754 vertices to jump the queue gives ( ii )",
    ". statements ( iii ) and ( iv ) are clear from the definitions .",
    "statement ( v ) follows because @xmath710 and @xmath770 are obtained from @xmath771 and @xmath772 by adding constants that are maxima of certain sets , and the set at time @xmath97 includes the set at time @xmath742 . for ( vi ) note that @xmath773 , with @xmath774 and @xmath775 by ( iv ) and ( v ) .      before analysing the algorithm in the previous subsection",
    ", we need to develop some more theory . in this subsection",
    "we prove a lemma that justifies various manipulations involving restrictions ( definition [ def - restrict ] ) .",
    "we often consider situations when several restrictions are placed on a complex , and then it is useful to rearrange them .",
    "we define _ composition _ of complexes as follows .",
    "[ def- * ] we write @xmath776 to mean that @xmath477 or @xmath23 is undefined .",
    "suppose @xmath34 and @xmath777 are @xmath33-partite @xmath2-complexes on @xmath69 .",
    "we define @xmath778 if @xmath645 or @xmath779 is defined and say that @xmath780 if @xmath781 and @xmath782 for any @xmath411 .",
    "we say that @xmath783 are _ separate _ if there is no @xmath650 with @xmath645 and @xmath779 both defined .",
    "given complexes @xmath784 we write @xmath785 .",
    "similarly we write @xmath786 for the composition of a collection of complexes @xmath787 .    note that @xmath788 . to illustrate the relation @xmath789 , we note that if @xmath34 is a subcomplex of @xmath1 then @xmath408 $ ] is the set of all @xmath344 such that @xmath781 for all @xmath411 .",
    "it follows that @xmath790 $ ] , see ( vi ) in the following lemma .",
    "more generally , the composition @xmath791 describes ` mutual restrictions ' , i.e.  restrictions that @xmath34 places on @xmath777 and restrictions that @xmath777 places on @xmath34 .",
    "we record some basic properties of definition [ def- * ] in the following lemma .",
    "since the statement and proof are heavy in notation , we first make a few remarks to indicate that the properties are intuitive . property ( i )",
    "says that mutual restrictions can be calculated in any order .",
    "property ( ii ) says that a neighbourhood in a mutual restriction is given by the mutual restriction of the neighbourhoods and the original complexes .",
    "property ( iii ) says that separate restrictions act independently .",
    "the remaining properties give rules for rearranging repeated restrictions .",
    "the most useful cases are ( v ) and the second statement in ( vi ) , which convert a repeated restriction into a single restriction ( the other cases are also used , but their statements are perhaps less intuitive ) .",
    "one should note that the distinction made earlier between ` empty ' and ` undefined ' is important here ; e.g. @xmath778 undefined implies that @xmath645 and @xmath779 are undefined , but this is not true with ` undefined ' replaced by ` empty ' .",
    "[ * props ] suppose @xmath1 is an @xmath33-partite @xmath2-complex and @xmath792 are subcomplexes of @xmath1 .    *",
    "* is a commutative and associative operation on complexes , * @xmath793 for any @xmath794 , * if @xmath783 are separate then @xmath795 and @xmath408[g']=h[g'][g]=h[g \\cup g']$ ] , * @xmath408[g*g']=h[g'][g*g']$ ] , * if @xmath777 is a subcomplex of @xmath408 $ ] then @xmath408[g']=h[g*g']$ ] . *",
    "if @xmath777 is a subcomplex of @xmath34 then @xmath796 $ ] and @xmath408[g[g']]=h[g'][g[g']]=h[g][g']$ ] .",
    "if also @xmath779 is defined whenever @xmath645 is defined then @xmath408[g']=h[g']$ ] .",
    "* proof . *",
    "( i ) by symmetry of the definition we have commutativity @xmath797 .",
    "next we show that @xmath791 is a complex .",
    "suppose @xmath798 .",
    "since @xmath799 we have @xmath800 . since @xmath801 we have @xmath781 and @xmath782 .",
    "therefore @xmath802 , so @xmath791 is a complex .",
    "now we show associativity , i.e.  @xmath803 .",
    "suppose @xmath804 .",
    "we claim that for any @xmath411 we have @xmath781 , @xmath782 and @xmath805 . to see this",
    ", we apply the definition of @xmath806 to get @xmath807 and @xmath805 . if @xmath808 we have @xmath781 and @xmath782 .",
    "otherwise , @xmath809 is undefined , so @xmath412 and @xmath810 are undefined .",
    "this proves the claim .",
    "now @xmath804 implies that @xmath811 , so @xmath812 or @xmath813 . if @xmath813 then by the claim we have @xmath782 and @xmath805 for @xmath814 , so @xmath815 .",
    "therefore @xmath816 .",
    "also , if @xmath411 with @xmath817 defined then , for any @xmath818 , since @xmath819 , the claim gives @xmath820 and @xmath821 .",
    "therefore @xmath822 .",
    "this shows that @xmath823 , so @xmath824 .",
    "also , @xmath825 , so @xmath803 .",
    "\\(ii ) suppose @xmath826 .",
    "then @xmath781 and @xmath782 for any @xmath411 .",
    "applying this to @xmath827 for any @xmath828 gives @xmath829 and @xmath830 .",
    "thus @xmath831 .",
    "conversely , suppose that @xmath794 and @xmath831 .",
    "then @xmath781 , @xmath782 , @xmath832 and @xmath833 for any @xmath834 , so @xmath835 .",
    "\\(iii ) suppose @xmath836 .",
    "then @xmath837 and @xmath810 is undefined , since @xmath783 are separate .",
    "therefore @xmath835 , so @xmath838 .",
    "similarly @xmath839 , so @xmath795 .",
    "next we note that @xmath840 $ ] : if @xmath841 then @xmath344 and @xmath412 is undefined for any @xmath842 .",
    "similarly @xmath843 $ ] , so @xmath408[g']$ ] and @xmath844[g]$ ] are well - defined .",
    "now suppose @xmath845[g']$ ] .",
    "since @xmath845 $ ] , for any @xmath411 we have @xmath781 . since @xmath845[g']$ ] , for any @xmath411 we have @xmath782 .",
    "this shows that @xmath846[g]$ ] and @xmath847 $ ] .",
    "applying the same argument to any @xmath846[g]$ ] we deduce that @xmath408[g']=h[g'][g ] { \\subseteq}h[g \\cup g']$ ] .",
    "conversely , if @xmath848 $ ] then for any @xmath411 we have @xmath849 . since @xmath783 are separate , we have @xmath781 and @xmath782 . therefore @xmath845[g']=h[g'][g]$ ] .",
    "it follows that @xmath408[g']=h[g'][g]=h[g \\cup g']$ ] .",
    "\\(iv ) we first show that @xmath408[g*g ' ] { \\subseteq}h[g'][g*g']$ ] .",
    "suppose @xmath845[g*g']$ ] . then @xmath845 { \\subseteq}h$ ] .",
    "since @xmath845[g*g']$ ] , for any @xmath411 we have @xmath807 .",
    "consider any @xmath411 such that @xmath810 is defined .",
    "then @xmath809 is defined , so @xmath850 .",
    "therefore @xmath846 $ ] .",
    "now consider any @xmath411 such that @xmath809 is defined .",
    "since @xmath845[g*g']$ ] we have @xmath808",
    ". therefore @xmath846[g*g']$ ] .",
    "similarly , @xmath844[g*g ' ] { \\subseteq}h[g][g*g']$ ] , so equality holds .",
    "\\(v ) first we show that @xmath851 { \\subseteq}h[g][g']$ ] .",
    "suppose @xmath852 $ ] .",
    "then @xmath344 . also , for any @xmath411 we have @xmath807 , and so @xmath781 and @xmath782 .",
    "this implies that @xmath845 $ ] , and then that @xmath845[g']$ ] .",
    "now we show that @xmath408[g']{\\subseteq}h[g*g']$ ] .",
    "suppose @xmath845[g']$ ] . then @xmath845 { \\subseteq}h$ ] .",
    "since @xmath845 $ ] , for any @xmath411 we have @xmath781 . since @xmath845[g']$ ]",
    ", for any @xmath411 we have @xmath782 .",
    "thus for any @xmath853 we have @xmath854 and @xmath820 , so @xmath807 .",
    "therefore @xmath852 $ ] .",
    "\\(vi ) we first note that @xmath796 $ ] is immediate from definitions [ def- * ] and [ def - restrict ] .",
    "then @xmath408[g[g']]=h[g'][g[g']]$ ] follows from ( iv ) .",
    "now we show that @xmath408[g[g']]=h[g][g']$ ] .",
    "suppose that @xmath845[g[g']]$ ] .",
    "then @xmath845 $ ] .",
    "consider any @xmath411 such that @xmath810 is defined .",
    "since @xmath845[g[g']]$ ] we have @xmath855_a$ ] , and so @xmath856",
    ". therefore @xmath845[g']$ ] .",
    "conversely , suppose that @xmath845[g']$ ] .",
    "consider any @xmath411 such that @xmath857_a$ ] is defined .",
    "then @xmath412 is defined , so @xmath837 , since @xmath845 $ ] .",
    "also , for any @xmath818 with @xmath858 defined we have @xmath859 , since @xmath845[g']$ ] .",
    "therefore @xmath855_a$ ] .",
    "this shows that @xmath845[g[g']]$ ] .",
    "the second statement is immediate .      in this subsection",
    "we record some useful properties of hypergraph regularity , analogous to the standard facts we mentioned earlier for graph regularity .",
    "similar results can be found e.g.  in @xcite , but with stronger assumptions on the hierarchy of parameters . however , with the same proof , we obtain lemma [ 3neighbour1 ] under weaker assumptions on the parameters , which will be crucial to the proof of lemma [ 3exceptional ] .",
    "we start with two analogues to lemma [ 2neighbour ] , the first concerning graphs that are neighbourhoods of a vertex , and the second sets that are neighbourhood of a pair of vertices .",
    "[ 3neighbour1 ] * ( vertex neighbourhoods ) * suppose @xmath860 and @xmath861 and @xmath34 is a @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 .",
    "suppose also that @xmath56 , @xmath55 are @xmath43-regular , and @xmath57 , @xmath526 are @xmath864-regular .",
    "then for all but at most @xmath865 vertices @xmath866 we have @xmath867 for @xmath868 and @xmath869 is an @xmath870-regular graph of relative density @xmath871",
    ".    * proof . *",
    "first we apply lemma [ 2neighbour ] to see that all but at most @xmath872 vertices in @xmath417 have degree @xmath873 in @xmath874 , for @xmath868 .",
    "let @xmath875 be the set of such vertices .",
    "it suffices to show the claim that all but at most @xmath876 vertices @xmath877 have the following property : if @xmath878 and @xmath879 are sets with @xmath880 and @xmath881 , then the bipartite subgraph @xmath882 spanned by @xmath883 and @xmath884 has @xmath885 edges , and the bipartite subgraph @xmath886 spanned by @xmath883 and @xmath884 has @xmath887 edges .",
    "suppose for a contradiction that this claim is false .",
    "note that for any @xmath877 and sets @xmath878 , @xmath879 with @xmath880 , @xmath881 we have @xmath888 for @xmath868 so @xmath885 since @xmath57 is @xmath864-regular . then without loss of generality , we can assume that we have vertices @xmath889 with @xmath890 , and sets @xmath891 , @xmath892 with @xmath893 and @xmath894 , such that @xmath895 for @xmath896 .",
    "define tripartite graphs @xmath897 and @xmath898 .",
    "we can count the number of triangles in these graphs as @xmath899 .",
    "now @xmath890 , @xmath900 , @xmath901 , @xmath902 and @xmath903 for @xmath896 , @xmath868 , so @xmath904 since @xmath526 is @xmath864-regular we have @xmath905 . therefore @xmath906 but we also have @xmath907 contradiction .",
    "this proves the required claim .",
    "[ 3neighbour2 ] * ( pair neighbourhoods ) * suppose @xmath908 and @xmath34 is an @xmath43-regular @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 .",
    "then for all but at most @xmath909 pairs @xmath910 we have @xmath911",
    ".    * proof . * introduce another parameter @xmath864 with @xmath912 . by lemma",
    "[ 3neighbour1 ] , for all but at most @xmath913 vertices @xmath866 we have @xmath914 for @xmath915 and @xmath869 is an @xmath864-regular graph of relative density @xmath916 .",
    "let @xmath875 be the set of such vertices @xmath866 .",
    "then for any @xmath877 , applying lemma [ 2neighbour ] to @xmath869 , we see that for all but at most @xmath917 vertices in @xmath918 , the degree of @xmath919 in @xmath869 satisfies @xmath920 since @xmath921 , this estimate holds for all pairs @xmath910 except for at most @xmath922 .",
    "next we give an analogue of lemma [ 2restrict ] , showing that regularity is preserved by restriction .",
    "[ 3restrict ] * ( regular restriction ) * suppose @xmath860 , @xmath34 is a @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 , @xmath526 is @xmath43-regular , and @xmath923 is a @xmath224-complex with @xmath924",
    ". then @xmath925_{123}$ ] is @xmath168-regular and @xmath926)=(1\\pm\\sqrt{{\\epsilon}})d_{123}(g)$ ] .    * proof . *",
    "since @xmath526 is @xmath43-regular , @xmath927_{123}| = |g \\cap j^*_{123}| = ( d_{123}(g ) \\pm { \\epsilon})|j^*_{123}|$ ] and @xmath926 ) = |g[j]_{123}|/|g[j]^*_{123}|=|g[j]_{123}|/|j^*_{123}| = d_{123}(g ) \\pm { \\epsilon}$ ] .",
    "now consider any subcomplex @xmath92 of @xmath519 with @xmath928 . then @xmath929 , so since @xmath526 is @xmath43-regular , @xmath927 \\cap a^*_{123}| = |g \\cap a^*_{123}| = ( d_{123}(g ) \\pm { \\epsilon})|a^*_{123}| = ( d_{123}(j[g ] ) \\pm \\sqrt{{\\epsilon}})|a^*_{123}|$ ] , i.e.  @xmath925_{123}$ ] is @xmath168-regular .",
    "it is worth noting the special case of lemma [ 3restrict ] when @xmath519 is a @xmath26-complex . then @xmath925 $ ]",
    "is obtained from @xmath34 by discarding some vertices , i.e.  a restriction according to the traditional definition . in particular",
    ", we see that regularity implies vertex regularity ( the weak property mentioned at the beginning of section [ 3reg ] ) .",
    "we also record the following consequence of lemma [ 3restrict ] .",
    "[ 3restrict ] suppose @xmath860 , @xmath34 is a @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 and @xmath526 is @xmath43-regular .",
    "suppose also @xmath930 , @xmath923 is a @xmath224-complex with all densities @xmath931 and @xmath932 , @xmath933 , @xmath934 are @xmath864-regular .",
    "then @xmath925_{123}$ ] is @xmath168-regular and @xmath926)=(1\\pm\\sqrt{{\\epsilon}})d_{123}(g)$ ] .",
    "* we have @xmath935 by the triangle counting lemma ( [ eq : tri ] ) .",
    "the result now follows from lemma [ 3restrict ] .",
    "next we note a simple relationship between relative and absolute densities .",
    "[ 3absolute ] suppose @xmath860 , @xmath34 is a @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 and @xmath34 is @xmath43-regular",
    ". then @xmath936 .    *",
    "* @xmath937 by ( [ eq : tri ] ) .",
    "the following more technical lemma will be useful in the proof of lemma [ 3marked ] .",
    "later we will give a more general proof that is slicker , but conceptually more difficult , as it uses the ` plus complex ' of definition [ def - plus ] .",
    "for the convenience of the reader , in the @xmath2-graph case we will use a proof that is somewhat pedestrian , but perhaps easier to follow .",
    "[ 3technical ] suppose @xmath908 , @xmath34 is a @xmath75-partite @xmath2-complex on @xmath938 with all densities @xmath863 and @xmath34 is @xmath43-regular .    * for any @xmath939 and subcomplex @xmath349 of @xmath940 , let @xmath941 be the set of vertices @xmath942 such that @xmath943 for all @xmath944 .",
    "let @xmath945 be the set of @xmath939 such that we do not have @xmath946",
    ". then @xmath947 . *",
    "for any @xmath948 and subcomplex @xmath949 of @xmath950 let @xmath951 be the set of vertices @xmath942 such that @xmath952 for all @xmath953 .",
    "let @xmath954 be the set of @xmath955 such that we do not have @xmath956",
    ". then @xmath957 .    *",
    "proof . * introduce auxiliary constants with a hierarchy @xmath958 .",
    "we consider selecting the vertices @xmath959 , @xmath960 , @xmath961 of @xmath461 in turn , at each step identifying some exceptional sets @xmath461 for which the stated estimate on @xmath941 might fail .",
    "first we choose @xmath959 so that @xmath962 and @xmath963 is an @xmath964-regular graph of relative density @xmath965 for distinct @xmath966 in @xmath967 . applying lemma [ 3neighbour1 ] with @xmath968 and @xmath969",
    ", we see that this holds for all but at most @xmath970 vertices @xmath971 .",
    "then the number of exceptional sets @xmath461 at this stage is at most @xmath972 .",
    "now let @xmath973 be the @xmath224-complex defined as follows .",
    "we define the singleton parts by @xmath974 equals @xmath975 if @xmath976 or @xmath977 if @xmath978 , @xmath979 equals @xmath980 if @xmath981 or @xmath418 if @xmath982 , and @xmath983 equals @xmath984 if @xmath985 or @xmath419 if @xmath986 .",
    "we define the graphs by restriction to the singleton parts of the following : @xmath987 if @xmath981 or @xmath988 if @xmath982 , @xmath989 if @xmath985 or @xmath990 if @xmath986 , @xmath991 if @xmath992 or @xmath57 if @xmath993 .",
    "then @xmath994 is @xmath995-regular by lemma [ 2restrict ] .",
    "the graph densities @xmath996 are either @xmath997 or @xmath998 , according as we restrict @xmath963 or @xmath37 .",
    "let @xmath999 $ ] .",
    "then @xmath1000 is @xmath964-regular with @xmath1001 by corollary [ 3restrict ] .",
    "next we choose @xmath960 so that @xmath1002 for @xmath1003 and @xmath1004 is an @xmath1005-regular graph of relative density @xmath1006 . by lemma [ 3neighbour1 ]",
    "this holds for all but at most @xmath1007 vertices @xmath1008 , so similarly to above , the number of exceptional sets @xmath461 at this stage is at most @xmath1009 .",
    "let @xmath1010 be the @xmath224-complex in which @xmath1011 is @xmath1012 if @xmath1013 or @xmath1014 if @xmath1015 , @xmath1016 is @xmath1017 if @xmath1018 or @xmath1019 if @xmath1020 , and @xmath1021 is @xmath1004 if @xmath1018 or @xmath1022 if @xmath1020 .",
    "then @xmath1021 is @xmath1023-regular by lemma [ 2restrict ] , with @xmath1024 either @xmath1025 or @xmath1026 , according as we restrict @xmath1004 or @xmath1022 .",
    "now we choose @xmath961 so that @xmath1027 . by lemma [ 2neighbour ]",
    "this holds for all but at most @xmath1028 vertices @xmath1029 , giving at most @xmath1030 exceptional sets @xmath461 here . in total , the number of exceptional sets at any stage is fewer than @xmath1031 . by construction , @xmath941 equals @xmath1032 if @xmath1033 or @xmath1011 if @xmath1034 .",
    "if @xmath461 is not exceptional then we can estimate @xmath1035 by tracing back through the stages . at stage 3",
    "we multiply @xmath1036 by @xmath1037 if @xmath1033 , where @xmath1024 is @xmath1025 if @xmath1018 or @xmath1026 if @xmath1020 , where @xmath1001 and @xmath1038 is @xmath1039 if @xmath985 or @xmath1040 if @xmath986 .",
    "thus we obtain a factor of @xmath1041 whenever @xmath1042 . at stage 2 , we obtain @xmath1036 from @xmath1043 by multiplying by @xmath1044 if @xmath1013 , where @xmath1045 is @xmath1046 if @xmath981 or @xmath1047 if @xmath982 . thus we obtain a factor of @xmath1041 whenever @xmath1048 , @xmath1049 .",
    "finally , at stage 1 , we obtain @xmath1043 from @xmath1050 by multiplying by @xmath1051 if @xmath976 . combining all factors",
    "we obtain @xmath1052 .",
    "this proves ( i ) .",
    "the proof of ( ii ) is similar and much simpler ( alternatively it could be deduced from ( i ) ) .",
    "we consider selecting the vertices @xmath1053 and @xmath1054 of @xmath1055 in turn .",
    "we choose @xmath1053 so that @xmath1056 .",
    "we let @xmath1057 be @xmath977 if @xmath978 or @xmath1058",
    "if @xmath976 , and @xmath1059 be the restriction of @xmath988 to @xmath418 and @xmath1057 .",
    "then @xmath1059 is @xmath964-regular with @xmath1060 .",
    "we choose @xmath1054 so that @xmath1061",
    ". then @xmath951 is @xmath1062 if @xmath1013 or @xmath1057 if @xmath1063 .",
    "now @xmath1064 is obtained from @xmath1050 by multiplying by @xmath1065 if @xmath976 and @xmath1066 if @xmath1013 , so @xmath956 .",
    "it is clear that there are at most @xmath1067 exceptional sets @xmath1055 .",
    "finally we give another formulation of the neighbourhood lemmas [ 3neighbour1 ] and [ 3neighbour2 ] , showing that most vertices and pairs are close to ` average ' .",
    "[ 3average ] suppose @xmath908 , @xmath34 is a @xmath2-partite @xmath2-complex on @xmath862 with all densities @xmath863 and @xmath34 is @xmath43-regular",
    ". then    * for all but at most @xmath1068 vertices @xmath866 we have @xmath1069 , * for all but at most @xmath1067 pairs @xmath910 we have @xmath1070",
    ".    * proof .",
    "* by lemma [ 3neighbour1 ] with @xmath968 and @xmath1071 , for all but at most @xmath1068 vertices @xmath866 , @xmath1072 for @xmath915 and @xmath1073 . for such @xmath216 we have @xmath1074 . also , @xmath1075 by lemma [ 3absolute ] , so @xmath1076 , giving ( i )",
    ". for ( ii ) , lemma [ 3absolute ] gives @xmath1077 .",
    "then by lemma [ 3neighbour2 ] , replacing @xmath82 with @xmath1078 , for all but at most @xmath909 pairs @xmath910 , @xmath1079 .",
    "we start the analysis of the algorithm by showing that most free vertices are good .",
    "our first lemma handles the definitions for regularity and density in the algorithm .",
    "@xmath614 [ 3exceptional ] the exceptional set @xmath727 defined by @xmath762 satisfies @xmath1080 , and @xmath463 is @xmath1081-regular with @xmath1082 for every @xmath344 .",
    "* we argue by induction on @xmath97 . at time",
    "@xmath182 the first statement is vacuous .",
    "the second statement at time @xmath147 follows from the fact that @xmath496 and our assumption that @xmath407 is @xmath642-super - regular : condition ( i ) in definition [ def-3super ] tells us that @xmath645 is @xmath43-regular , with @xmath643 if @xmath644 .",
    "also @xmath1083 if @xmath1084 , as we assumed that @xmath1085 in the hypotheses of theorem [ 3blowup ] .",
    "now suppose @xmath184 and @xmath1086 is unembedded , so @xmath479 .",
    "we consider various cases for @xmath23 to establish the bound on the exceptional set and the regularity property , postponing the density bound until later in the proof .",
    "we start with the case when @xmath1087 .",
    "suppose first that @xmath1088 with @xmath1089 .",
    "by induction @xmath1090 is @xmath1091-regular and @xmath1092 for every @xmath1093 .",
    "write @xmath1094 and @xmath1095 .",
    "we claim that @xmath1096 .",
    "this holds by lemma [ 3observe ] : ( iv ) gives @xmath1097 , ( v ) gives @xmath1098 , and ( vi ) gives @xmath1099 .",
    "now applying lemma [ 3neighbour1 ] , for all but at most @xmath1100 vertices @xmath129 we have @xmath1101 , @xmath1102 , and @xmath1103 is an @xmath1104-regular graph with @xmath1105 .",
    "since @xmath1096 we have @xmath762 when @xmath1088 for such @xmath131 .",
    "note that it is important for this argument that lemma [ 3neighbour1 ] makes no assumption of any relationship between @xmath1106 and @xmath1107 . for future reference",
    "we also note that the density bounds at time @xmath742 imply that @xmath1108 ; we will show a lower bound of @xmath86 later , but this interim bound will be useful before then .",
    "the argument when @xmath1109 has size @xmath26 is similar and more straightforward . by lemma [ 2neighbour ] , for all but at most @xmath1110 vertices @xmath129 we have @xmath1111 .",
    "also , we have @xmath1112 by lemma [ 3observe](vi ) , so @xmath762 holds when @xmath1113 for such @xmath131 .",
    "we also note for future reference that @xmath1114 . in the argument",
    "so far we have excluded at most @xmath1115 vertices @xmath129 for each of at most @xmath1116 sets @xmath1087 with @xmath761 or @xmath648 ; this gives the required bound on @xmath727 .",
    "we also have the required regularity property of @xmath463 , but for now we postpone showing the density bounds .",
    "next we consider the case when @xmath344 and @xmath562 . if @xmath1113 has size @xmath26 then @xmath1117 , so @xmath1118 , say .",
    "next suppose that @xmath1088 has size @xmath224 .",
    "recall that lemma [ build - update ] gives @xmath1119_s$ ] .",
    "then @xmath1120 is the bipartite subgraph of @xmath1121 induced by @xmath1122 and @xmath1123 .",
    "we have @xmath1124 if @xmath1125 or @xmath1126 if @xmath1127 .",
    "similarly , @xmath1128 if @xmath1129 or @xmath1130 if @xmath1131 . since we choose @xmath1132 , if @xmath1125 then @xmath1133 , and if @xmath1127 then @xmath1134 . similarly , if @xmath1129 then @xmath1135 , and if @xmath1131 then @xmath1136",
    "now @xmath1121 is @xmath1137-regular , so by lemma [ 2restrict ] , @xmath1120 is @xmath1138-regular and @xmath1139 .",
    "this gives the required regularity property for @xmath1120 in the case that @xmath1140 intersects @xmath25 , when we have @xmath1098 by lemma [ 3observe](v ) .",
    "in fact , we are only required to show that @xmath1120 is @xmath1141-regular , but this stronger regularity property will be useful for the case when @xmath1140 and @xmath25 are disjoint . now consider the case that @xmath1140 and @xmath25 are disjoint .",
    "let @xmath201 be the most recent time at which we embedded a vertex @xmath700 with a neighbour in @xmath1140 .",
    "then by lemma [ not - local ] , @xmath1142 is obtained from @xmath1143 just by deleting all sets containing any vertices that are embedded between time @xmath1144 and @xmath97 .",
    "thus @xmath1120 is the bipartite subgraph of @xmath1145 spanned by @xmath1122 and @xmath1123 .",
    "now @xmath1146 is @xmath1147-regular , by the stronger regularity property just mentioned above . since @xmath1148 , lemma [ 2restrict ] gives the required regularity property for @xmath1120 . for future reference",
    ", we note that in either case the bound @xmath1149 implies that @xmath1150 .",
    "continuing with the case when @xmath344 and @xmath562 , we now suppose that @xmath652 .",
    "again we use @xmath1119_s$ ] . if @xmath572 , whether @xmath573 or @xmath577 , we have shown above that @xmath1151 , and if @xmath1152 that @xmath475 is @xmath1153-regular . since @xmath466 is @xmath1154-regular , corollary [ 3restrict ] implies that @xmath463 is @xmath1155-regular and @xmath1156 .",
    "this gives the required regularity property for @xmath463 in the case that @xmath23 intersects @xmath25 , when we have @xmath765 . as above , although we are only required to show that @xmath463 is @xmath1081-regular , this stronger regularity property will be useful for the case when @xmath23 and @xmath25 are disjoint .",
    "suppose @xmath23 and @xmath25 are disjoint .",
    "let @xmath201 be the most recent time at which we embedded a vertex @xmath700 with a neighbour in @xmath23 .",
    "then by lemma [ not - local ] , @xmath531 is obtained from @xmath1157 just by deleting all sets containing any vertices that are embedded between time @xmath1144 and @xmath97 .",
    "equivalently , @xmath1158 $ ] .",
    "now @xmath1159 is @xmath1160-regular , by the stronger regularity property just mentioned above . since @xmath1161 , corollary [ 3restrict ] gives the required regularity property for @xmath463 .",
    "now we have established the bound on @xmath727 and the regularity properties , so it remains to show the density bounds .",
    "first we consider any unembedded @xmath344 with @xmath652 .",
    "we claim that @xmath1162_s.\\ ] ] to see this we use induction . in the base case @xmath182",
    "we have @xmath496 and @xmath1163 = g_{s^\\le}[g_{s^<}]=g_{s^\\le}$ ] , so @xmath1163=g_s$ ] . for @xmath1164 , lemma [ build - update ]",
    "gives @xmath1119_s$ ] , i.e.  @xmath463 consists of all triples in @xmath466 that form triangles in @xmath1165 .",
    "the induction hypothesis gives @xmath1166_s$ ] , and so we can write @xmath1167[f_{s^<}(t)]_s$ ] .",
    "now @xmath1168 , so lemma [ * props](vi ) gives @xmath1169[f_{s^<}(t ) ] = g_{s^\\le}[f_{s^<}(t-1)[f_{s^<}(t ) ] ] = g_{s^\\le}[f_{s^<}(t)]$ ] .",
    "this proves ( [ refwants ] ) .",
    "also , we showed above that for every @xmath572 , we have @xmath1151 , and if @xmath1152 then @xmath475 is @xmath1153-regular .",
    "since @xmath645 is @xmath43-regular , corollary [ 3restrict ] shows that @xmath463 is @xmath168-regular and @xmath1170 .",
    "this gives the required bound @xmath1171 , although we will also use the stronger bound of @xmath1172 below .",
    "next consider any unembedded pair @xmath1173 .",
    "let @xmath716 be the most recent time at which we embedded a vertex @xmath700 with @xmath1174 , or let @xmath1175 if there is no such vertex @xmath700 .",
    "note that we have @xmath1176 if @xmath1089 .",
    "for @xmath1177 , let @xmath1178 be the @xmath26-complex @xmath1179 .",
    "we claim that @xmath1180_{vw}$ ] for @xmath1181 .",
    "this follows by induction , similarly to the argument when @xmath652 .",
    "when @xmath1182 the claim follows from @xmath1183=f_{vw^\\le}(t')$ ] . for @xmath1184 , we have @xmath1185 , so lemma [ build - update ] gives @xmath1186_{vw}$ ] . since @xmath1187_{vw}$ ] by induction , lemma [ * props](vi ) gives @xmath1188[j(t^*)]_{vw } = f_{vw^\\le}(t')[j(t^*)]_{vw}$ ] , as claimed .",
    "now we claim that @xmath1189 , where we temporarily use @xmath1190 to denote the number of embedded vertices @xmath700 at time @xmath97 with @xmath1174 . to see this ,",
    "we argue by induction , noting that initially @xmath1191 .",
    "also , if @xmath1192 then @xmath1193_{vw}$ ] , so @xmath1194 by lemma [ 2restrict ] .",
    "now suppose that @xmath1195 , so that @xmath201 and @xmath700 are defined above . by induction",
    "we have @xmath1196 .",
    "also @xmath1197 by the lower bound just proved for relative densities of triples , so @xmath762 gives @xmath1198 .",
    "since @xmath1199_{vw}$ ] , lemma [ 2restrict ] gives @xmath1200 , as claimed .",
    "since @xmath1201 we have @xmath1202 , say .",
    "in particular we have the required bound of @xmath1203 .",
    "finally we consider any unembedded vertex @xmath96 .",
    "let @xmath1204 be the most recent time at which we embedded a neighbour @xmath193 of @xmath96 , or @xmath1205 if there is no such time . if @xmath192 then by @xmath762 and the above bound for pair densities we have @xmath1206 .",
    "now we consider cases according to whether @xmath96 is in the list @xmath118 , the queue @xmath144 or the queue jumpers @xmath697 .",
    "suppose first that @xmath1207 .",
    "then the rule for updating the queue in the algorithm gives @xmath197 .",
    "next suppose that @xmath1208 , and @xmath96 first joined @xmath1209 at some time @xmath198 . since @xmath96 did not join the queue at time @xmath199 we have @xmath200 . also , between times @xmath201 and @xmath97 we only embed vertices that are in the queue or jumping the queue , or otherwise we would have embedded @xmath96 before @xmath27 .",
    "now @xmath1210 , otherwise we abort the algorithm , and @xmath1211 by lemma [ 3observe](ii ) , so we embed at most @xmath1212 vertices in @xmath203 between times @xmath201 and @xmath97 .",
    "thus we have catalogued all possible ways in which the number of vertices free for @xmath96 can decrease .",
    "it may decrease by a factor of @xmath1213 when a new @xmath96-regime starts , and by a factor @xmath94 during a @xmath96-regime before @xmath96 joins the queue .",
    "also , if @xmath96 joins the queue or jumps the queue it may decrease by at most @xmath1212 in absolute size .",
    "since @xmath96 has at most @xmath754 neighbours , and @xmath1214 , we have @xmath1215 .    in the preceding proof we needed to track the @xmath43-subscripts in great detail to be sure that they always fall in the range allowed by our hierarchy",
    ". from now on it will often suffice and be more convenient to use a crude upper bound of @xmath83 for any epsilon parameter .",
    "we summarise some useful estimates in the following lemma .",
    "[ 3crude]@xmath614    * if @xmath725 then @xmath1216 + and @xmath1217 .",
    "* if @xmath562 then @xmath1218 .",
    "* if @xmath344 then @xmath1219 .",
    "* if @xmath1220 then @xmath1221 * if @xmath1220 then @xmath1222 for all but at most @xmath1223 sets @xmath1224 . * statements ( iii - v ) hold replacing @xmath531 by @xmath1225 $ ] for any @xmath1226-regular subcomplex @xmath1227 of @xmath531 , such that @xmath1228 when defined .    * proof . * the first formula in ( i ) is a weaker form of @xmath762 .",
    "for the second formula , suppose first that @xmath1229 has size @xmath26",
    ". then @xmath1230 . in the case",
    "when @xmath1231 has size @xmath224 we have @xmath1232 for @xmath474 equal to @xmath919 , @xmath216 or @xmath1233 .",
    "since @xmath1234 , the formula follows from the same calculations as in lemma [ 3average](i ) .",
    "this proves ( i ) . for ( ii ) , note that if @xmath761 then @xmath1235 has size @xmath1236 or @xmath1237 . also , if @xmath644 we have @xmath1119_s$ ] by lemma [ build - update ] .",
    "statement ( ii ) then follows from lemma [ 2restrict ] if @xmath648 or lemma [ 3restrict ] if @xmath652 . for ( iii )",
    "we apply lemma [ 3absolute ] when @xmath652 or the identity @xmath1238 when @xmath1239 .",
    "statement ( iv ) follows by definition of absolute density and ( iii ) . for ( v )",
    "we apply lemma [ 3average ] . for ( vi )",
    "we apply regular restriction to see that @xmath1225 $ ] is @xmath1226-regular and then the same proofs .",
    "our next lemma concerns the definitions for marked edges in the algorithm .",
    "[ 3marked]@xmath614    * for every triple @xmath595 we have @xmath1240 , and in fact + @xmath1241 for @xmath733 .",
    "* for every @xmath27 and triple @xmath733 we have @xmath1242",
    ".    * proof . *",
    "throughout we use the notation @xmath1243 , @xmath1244 , @xmath1245 .",
    "\\(i ) to verify the bound for @xmath182 we use our assumption that @xmath407 is @xmath642-super - regular .",
    "we take @xmath660 , when for any @xmath216 we have @xmath1246 by definition [ def-3preplus ] .",
    "then condition ( iii ) in definition [ def-3super ] gives @xmath1247 .",
    "since @xmath1248 , @xmath1249 and @xmath1250 we have the required bound .",
    "now suppose @xmath1164 .",
    "when @xmath733 we have @xmath1251 by definition , since the algorithm chooses @xmath1252 .",
    "now suppose @xmath1253 , and let @xmath198 be the most recent time at which we embedded a vertex @xmath700 with @xmath1254 .",
    "then @xmath1255 , @xmath1256 , and @xmath1257 by the previous case .",
    "for any @xmath1258 , we can bound @xmath1259 using the same argument as that used at the end of the proof of lemma [ 3exceptional ] .",
    "we do not embed any neighbour of @xmath96 between time @xmath1144 and @xmath97 , so the size of the free set for @xmath96 can only decrease by a factor of @xmath94 and an absolute term of @xmath1260 . since @xmath1261 we have @xmath1262 . by lemma [ build - update ] , for every @xmath1263",
    ", @xmath463 is obtained from @xmath1159 by restricting to the @xmath26-complex @xmath1264 . if @xmath644 then regular restriction ( lemmas [ 2restrict ] and [ 3restrict ] ) gives @xmath1265 .",
    "now @xmath1266 , by lemma [ 3crude](iii ) , and similarly @xmath1267 .",
    "this gives @xmath1268 therefore @xmath1269 .",
    "\\(ii ) first we consider the case @xmath1270",
    ". then @xmath1271 and @xmath1272 by lemma [ 3observe](vi ) . also @xmath1273 and @xmath1274",
    "( see lemma [ track - mark ] ) , so @xmath1275 if @xmath1276 has size @xmath26 then @xmath1277 by lemma [ itworks ] , so @xmath1278 by ( i ) .",
    "if @xmath1279 then @xmath1280 by lemma [ 3crude ] when @xmath1132 .",
    "now @xmath1281 we also have an upper bound @xmath1282 where the last inequality holds by ( i ) .",
    "therefore @xmath1283    now we consider the case when @xmath1284 .",
    "then @xmath1285 .",
    "note that when @xmath733 we have @xmath1286 , so @xmath1287 .",
    "suppose first that @xmath1288 .",
    "then @xmath1289 and @xmath1290 ( see lemma [ track - mark ] ) , so @xmath1291 similarly to the previous case , by lemma [ 3crude ]",
    "we have @xmath1292 we also have @xmath1293 .",
    "this sum counts all pairs @xmath1294 with @xmath1295 , @xmath129 and @xmath1296 , so we can rewrite it as @xmath1297 by lemma [ 3crude](v ) we have @xmath1298 for all but at most @xmath1299 sets @xmath1300 .",
    "therefore @xmath1301 combining this with the lower bound on @xmath1302 we obtain @xmath1303 now @xmath1304 by ( i ) , and @xmath1305 by lemma [ 3crude](iv ) , so @xmath1306    it remains to consider the case when @xmath1284 and @xmath1307 . since @xmath1286 we have @xmath1279 .",
    "then @xmath1308 $ ] by lemma [ build - update ] and @xmath1290 , so @xmath1309| } { |f_{{\\overline}{e}^\\le}(t-1)[f_{{\\overline}{e}^<}(t)]| } > \\theta_{\\nu^ * } \\right\\}.\\ ] ] let @xmath349 be the subcomplex of @xmath1310 consisting of all @xmath1311 with @xmath1087 . then @xmath1312 $ ] if and only if @xmath1313 and @xmath1314 for all @xmath944",
    "when we choose @xmath1132 , lemma [ 3crude ] gives @xmath1216 for @xmath1315 by ( i ) , @xmath1218 for @xmath1311 with @xmath1316 by ( ii ) , and @xmath1317 ) = ( 1 \\pm { \\epsilon } _ * ) \\prod_{s { \\subseteq}{\\overline}{e } } d_s(f(t-1 ) ) \\prod_{{\\emptyset}\\ne s \\in i } d_{sx}(f(t-1))\\ ] ] by ( vi ) , so @xmath1318| = ( 1 \\pm 20{\\epsilon}_*)|f_{{\\overline}{e}^\\le}(t-1)| \\prod_{{\\emptyset}\\ne s \\in i } d_{sx}(f(t-1)).\\ ] ] as in the previous cases we have @xmath1319| \\\\ & > & \\theta_{\\nu^ * } \\sum_{y \\in d_{x , e}(t-1){\\setminus}e_x(t-1 ) } |f_{{\\overline}{e}^\\le}(t-1)[f_{{\\overline}{e}^<}(t)]| \\\\ & > & ( 1 - 20{\\epsilon}_*)\\theta_{\\nu^ * } ( |d_{x , e}(t-1)|-{\\epsilon}_*|f_x(t-1)| ) \\    for any @xmath1300 ,",
    "let @xmath1320 be the set of @xmath129 such that @xmath1321 for all @xmath944 .",
    "let @xmath945 be the set of @xmath1300 such that we do not have @xmath1322 then @xmath1323 by lemma [ 3technical ] .",
    "now @xmath1324|$ ] , which counts all pairs @xmath1294 with @xmath1295 and @xmath1325 , so @xmath1326 combining this with the lower bound on @xmath1302 we obtain @xmath1327 now @xmath1304 by ( i ) and all densities are at least @xmath1328 , so again we have @xmath1329    the following corollary is now immediate from lemmas [ 3exceptional ] and [ 3marked ] . recall that @xmath138 is obtained from @xmath186 by deleting @xmath727 and @xmath732 for @xmath733 , and note that since @xmath1 has maximum degree at most @xmath72 we have @xmath1330 .",
    "[ 3ok ] @xmath1331 .",
    "this subsection concerns the initial phase of the algorithm , during which we embed the neighbourhood @xmath114 of the buffer @xmath103 .",
    "there are several issues that make the analysis of this phase significantly more complicated than that of the graph blow - up lemma ( which was given in lemma [ 2-x - to - v ] ) .",
    "as we mentioned earlier , the buffer @xmath103 is larger than before , so we embed many more vertices during the initial phase , and the queue may open .",
    "one potential problem is that there may be some vertex @xmath216 and class @xmath38 so that @xmath1332 is used excessively by the embedding  this is a concern , since @xmath1333 .",
    "the first lemma in this subsection shows that with high probability this does not happen .",
    "our goal is to show that for any vertex @xmath116 there will be many _ available _",
    "vertices @xmath214 such that we embed @xmath469 in @xmath1334 during the initial phase",
    ". then if @xmath216 is not used before the conclusion of the algorithm we will be able to embed @xmath27 as @xmath1335 .",
    "we need to ensure that for every neighbour @xmath96 of @xmath27 and for every triple @xmath597 of @xmath1 containing a neighbour of @xmath96 , the choice of image for @xmath96 is good , in that the subcomplex of the free sets for @xmath1336 that is consistent with mapping @xmath27 to @xmath216 is suitably regular and does not have too many marked edges . as in lemma",
    "[ 2-x - to - v ] , we aim to give a lower bound on the probability of this event , conditional on the previous embedding .",
    "the third lemma in this subsection achieves this .",
    "the marked edges also add a complication to the conclusion of the algorithm , in which we need to verify hall s condition for a system of distinct representatives of the available images for the unembedded buffer vertices .",
    "we need to show that for that any @xmath1337 that is not too small , the probability that @xmath1338 does not contain a vertex available for @xmath27 is quite small .",
    "this is achieved by the second lemma in this subsection .",
    "we present it before the lemma on mapping @xmath27 to @xmath216 because its proof is similar in spirit and somewhat simpler .",
    "first we recall the key properties of the selection rule during the initial phase .",
    "although the queue may become non - empty , jumping ensures that we embed all vertex neighbourhoods @xmath25 , @xmath116 at consecutive times , and before @xmath27 or any other vertices at distance at most @xmath75 from @xmath27 . then lemma [",
    "not - local ] implies that if we start embedding @xmath25 just after some time @xmath223 then @xmath1339 consists of all vertices in @xmath203 that have not yet been used by the embedding , for every @xmath96 at distance at most @xmath2 from @xmath27 .",
    "we also recall that @xmath1340 , @xmath1341 , @xmath1342 and @xmath1343 by lemma [ 3observe](ii ) .",
    "thus for any @xmath96 at distance at most @xmath2 from @xmath27 we have @xmath1344 .    [ ahsuper ]",
    "suppose @xmath1345 is a supermartingale , i.e.  a sequence of random variables satisfying @xmath1346 , and that @xmath1347 , @xmath1348 , for some constants @xmath1349 .",
    "then for any @xmath1350 , @xmath1351    let @xmath1352 be the time at which we embed the last vertex of @xmath114 , ending the initial phase",
    ". then @xmath1353 by ( [ eq:3fresh ] ) .",
    "our first lemma shows that there are many available vertices in all neighbourhoods at time @xmath1352 .",
    "note that by super - regularity the assumption @xmath1354 in the lemma holds for every @xmath1355 such that @xmath1356 is defined .",
    "[ 3uniform ] with high probability , for every vertex @xmath1357 and @xmath1358 with @xmath1354 we have @xmath1359    * proof .",
    "* suppose @xmath1354 .",
    "the ratio @xmath1360 only decreases when we embed a vertex in @xmath1361 .",
    "we separate the analysis according to two effects .",
    "one effect is that we embed a vertex @xmath1362 to an image @xmath1363 , where @xmath1361 is not too large a fraction of the free images for @xmath96 .",
    "the other effect is that we we embed a vertex @xmath1362 to an image @xmath1363 , and the embedding of some neighbour @xmath195 of @xmath96 previously caused the fraction of @xmath1361 in the free images for @xmath96 to increase significantly . to analyse these effects we write @xmath1364 for the time at which a vertex @xmath96 is embedded and define the following sets :    *",
    "let @xmath1365 be the set of embedded vertices @xmath1362 such that @xmath1363 and @xmath1366 * let @xmath1367 be the set of embedded vertices @xmath1368 such that @xmath1369 for some @xmath1370 .",
    "we claim that any vertex embedded in @xmath1361 up to time @xmath1352 is either in the queue , or in @xmath1371 , or an @xmath1-neighbour of some @xmath1372 for some @xmath1373 . to see this ,",
    "suppose @xmath96 is embedded in @xmath1361 and is neither in the queue nor in @xmath1371 .",
    "since @xmath1374 we have @xmath735 for some @xmath116 .",
    "suppose we start embedding @xmath25 just after time @xmath223 .",
    "then @xmath1375 has size at least @xmath1376 by ( [ eq:3fresh ] ) , so @xmath1377 .",
    "we also have @xmath1378 , since @xmath1379 .",
    "since @xmath1380 , there must be some @xmath1381 , @xmath1382 so that at time @xmath1383 we embed some @xmath1384 and get @xmath1385 .",
    "here we recall that we embed @xmath25 consecutively and so @xmath1386 .",
    "now for any @xmath1387 , @xmath1388 , since @xmath1389 we have @xmath1390 therefore @xmath1372 , where @xmath1391 , which proves the claim .",
    "since any @xmath195 has at most @xmath754 neighbours we deduce that @xmath1392    consider @xmath1393 .",
    "we claim that @xmath1394 is a supermartingale . to see this ,",
    "suppose we embed some vertex @xmath1395 at time @xmath1364 .",
    "we can assume that @xmath1396 and @xmath1397 , or otherwise @xmath1398 by definition , so @xmath1399 and @xmath1400 .",
    "since @xmath1401 is chosen randomly in @xmath1402 of size at least @xmath1403 ( by corollary [ 3ok ] ) , we have @xmath1404 = { \\mathbb{p}}(\\phi(z ) \\in g(v)_j ) = \\frac{|g(v)_j \\cap ok_z(t_z-1)|}{|ok_z(t_z-1)| } \\\\ & < \\frac{2|g(v)_j \\cap f_z(t_z-1)|}{|f_z(t_z-1)| } < 2^{2d+1}d_j(g(v)).\\end{aligned}\\ ] ] we also have @xmath1405 , so the decrease in the second term of @xmath1406 more than compensates for the increase in the first , i.e.  @xmath1407 < 0 $ ] .",
    "thus we have a supermartingale .",
    "since @xmath1408 , @xmath1409 by ( [ eq:3fresh ] ) , and @xmath1410 , theorem [ ahsuper ] gives @xmath1411   \\le { \\mathbb{p}}\\big [ z_j(m)>2^{2d+2}d_j(g(v))\\sqrt{\\delta_b}|v_j| \\big ] \\\\ &",
    "< 2\\exp \\big[-(2^{2d}d_j(g(v))\\sqrt{\\delta_b}|v_j|)^2/2t_i\\big ] < e^{-\\sqrt{n } } , \\quad \\mbox { } ( \\mbox{say , for sufficiently large } n).\\end{aligned}\\ ] ]    next consider @xmath1412 , where @xmath1413 consists of all vertices in @xmath1414 with at least one @xmath1-neighbour in @xmath1415 that have been embedded at time @xmath97 .",
    "we claim that @xmath1416 is a supermartingale . to see this ,",
    "suppose we embed some vertex @xmath1417 at time @xmath1418 .",
    "consider @xmath1419 : we can assume this set is non - empty , otherwise @xmath1420 , so @xmath1421 .",
    "we can also assume that @xmath1422 and @xmath1423 for some @xmath1370 , otherwise @xmath1424 by definition , so @xmath1425 and @xmath1426 .    by lemmas",
    "[ 3exceptional ] and lemma [ 2restrict ] , @xmath1427 $ ] is @xmath1428-regular .",
    "applying lemma [ 2neighbour ] , we see that there are at most @xmath1429 ` exceptional ' vertices @xmath1430 such that embedding @xmath1431 will not satisfy @xmath1432 on the other hand , the algorithm chooses @xmath1431 to satisfy @xmath762 , so @xmath1433 .",
    "thus we have @xmath1434 , unless we choose an exceptional vertex @xmath131 . but",
    "@xmath131 is chosen uniformly at random from @xmath1435 possibilities ( by corollary [ 3ok ] ) , so @xmath131 is exceptional with probability at most @xmath1436 . therefore @xmath1437",
    "< 3{\\epsilon}_{12d,2}$ ] .",
    "we also have @xmath1438 , so the decrease in the second term of @xmath1439 more than compensates for the increase in the first , i.e.  @xmath1440 < 0 $ ] .",
    "thus we have a supermartingale .",
    "we also have @xmath1441 .",
    "also , @xmath1409 by ( [ eq:3fresh ] ) , so @xmath1442 , since @xmath1 has maximum degree @xmath72 .",
    "then theorem [ ahsuper ] gives @xmath1443 < { \\mathbb{p}}\\big[y_{\\ell , j}(t)>d_u\\sqrt{\\delta_b}|v_{j}|\\big ] \\\\ & < 2\\exp\\big[-(d_u\\sqrt{\\delta_b}|v_{\\ell}|)^2/2t_i\\big ] < e^{-\\sqrt{n } } , \\quad \\mbox { } ( \\mbox{say , for sufficiently large } n).\\end{aligned}\\ ] ]    taking a union bound over @xmath1444 and @xmath1445 , with high probability we have @xmath1446 and @xmath1447 .",
    "therefore ( [ eq:3uniform ] ) gives @xmath1448 since @xmath1449 and @xmath1450 .",
    "for the remainder of this subsection we fix a vertex @xmath116 and write @xmath1451 , with vertices listed in the order that they are embedded . since @xmath1 has maximum degree @xmath72 we have @xmath1452 .",
    "we let @xmath218 be the time at which @xmath219 is embedded . by the selection rule",
    ", @xmath25 jumps the queue and is embedded at consecutive times : @xmath220 for @xmath221 . for convenience",
    "we also define @xmath222 .",
    "note that since @xmath1 is an @xmath33-partite complex , no vertex of @xmath25 lies in @xmath1453 .",
    "the selection rule also ensures that at time @xmath223 no vertices at distance at most @xmath75 from @xmath27 have been embedded , so for any @xmath96 with distance at most @xmath2 from @xmath27 we have @xmath1454 .",
    "( the need for this property in lemma [ 3-x - to - v ] explains why we needed to choose the buffer vertices at mutual distance at least @xmath685 . )",
    "note that the argument of the lemma [ 3uniform ] can be applied replacing the sets @xmath1361 by any sufficiently large subsets of @xmath420 , provided that they are sufficiently few in number to use a union bound .",
    "for example , we can define a complex @xmath1455 for any @xmath1456 , and show that with high probability , for every @xmath1456 with @xmath1457 and @xmath1358 with @xmath1458 we have @xmath1459 .",
    "it follows that with high probability every @xmath735 would have many available vertices in @xmath1460 throughout the initial phase , even if we did not use queue jumping in the selection rule . however , the analysis is simpler if we do use queue jumping , and then we only need the version of lemma [ 3uniform ] stated above .",
    "recall that the available set @xmath737 is obtained from @xmath738 by removing all sets @xmath739 for triples @xmath597 containing @xmath27 . here",
    "if @xmath27 is unembedded at the conclusion of the algorithm at time @xmath152 we will embed @xmath27 in @xmath740 .",
    "our second lemma shows that for that any @xmath1337 that is not too small , the probability that @xmath1338 does not contain a vertex available for @xmath27 is quite small .",
    "[ 3initial ] for any @xmath1337 with @xmath1462 , conditional on any embedding of the vertices @xmath1463 that does not use any vertex of @xmath1338 , we have @xmath1464 < \\theta_*$ ] .    * proof . * we apply similar arguments to those we are using for the entire embedding , defining variants of various structures that incorporate restriction to @xmath1338 .",
    "suppose @xmath227 and that we are considering the embedding of @xmath219 .",
    "we interpret quantities at time @xmath218 with the embedding @xmath228 , for some as yet unspecified @xmath229 .",
    "write @xmath1465 . at time",
    "@xmath223 we have @xmath1466 , so @xmath1467 .",
    "since @xmath1468 we have @xmath1469 , so @xmath1470 for convenient notation we will use @xmath1471 $ ] to denote restriction of hypergraphs and complexes to @xmath1472 , in that for @xmath637 we write @xmath1473 $ ] for @xmath1474 $ ] and @xmath1475 $ ] for @xmath1474_s$ ] .",
    "we define _ exceptional _ sets @xmath1476 by the property that @xmath131 is in @xmath1477 if and only if    @xmath1478 .",
    "@xmath1479    thus if we embed @xmath219 to @xmath1480 , then the intersection of the free set for @xmath27 with @xmath1338 is roughly what would be ` expected ' .",
    "next , to control marked edges , we define _ dangerous _ vertices similarly to before , except that here we incorporate the restriction to @xmath1472 . for any triple @xmath597 containing @xmath27",
    "we define @xmath1481 , @xmath1482 is the event that property @xmath1479 above holds . *",
    "@xmath1483 , @xmath1482 is the event that for every triple @xmath597 containing @xmath27 we have @xmath1484| \\le \\theta_{\\nu'_{e^{t_j}}(t_j ) } |f_{e^{t_j}}(t_j)[w_j]|.\\ ] ] * @xmath1485 , @xmath1486 is the event that @xmath234 is chosen in @xmath1487 , defined to be the subset of @xmath1488 obtained by deleting the sets @xmath1489 and @xmath1490 for @xmath597 containing @xmath27 . for convenient notation",
    "we also define @xmath1491 to be the event that holds with probability @xmath26 .",
    "we divide the remainder of the proof into a series of claims .",
    "* claim a. * the events @xmath1492 , @xmath1493 and @xmath1491 hold",
    ".    * proof . * as noted above , we have @xmath1494 , so @xmath1492 holds .",
    "also , @xmath1491 holds by definition , so it remains to show @xmath1493 .",
    "consider any triple @xmath1495 containing @xmath27 .",
    "recall that all vertices at distance at most @xmath75 from @xmath27 are unembedded .",
    "then @xmath1496 , and by lemma [ not - local ] , @xmath1497 is the restriction of @xmath1498 to the @xmath26-complex @xmath1499 , so @xmath1500 $ ] is the restriction of @xmath1498 to @xmath1501 . since @xmath34 is @xmath43-regular , @xmath1500 $ ] is @xmath82-regular by regular restriction and @xmath1502 ) = ( 1\\pm{\\epsilon}')d_s(g)$ ] for @xmath1503 , @xmath561 .",
    "then @xmath1504|=(1\\pm 20{\\epsilon}')|w||f_z(t_0)||f_{z'}(t_0)|\\prod_{s { \\subseteq}e,|s| \\ge 2}d_s(g)\\ ] ] by lemma [ 3absolute ] . now",
    "@xmath1505| = \\sum_{v \\in w } |m_{e , e}(t_0)(v)| \\le \\sum_{v \\in w } |m_e(v)| \\le \\theta \\sum_{v \\in w } |g_e(v)|\\ ] ] by condition ( ii ) of super - regularity ( definition [ def-3super ] ) .",
    "this condition also says for any @xmath1506 that @xmath1507 is @xmath82-regular and @xmath1508 for @xmath1509 , so @xmath1510 here we note that @xmath1511 , as our hypotheses for theorem [ 3blowup ] include the assumption @xmath1085 for @xmath62 .",
    "equation ( [ eq:3fresh ] ) gives @xmath1512 and @xmath1513 , so @xmath1514|}{|f_e(t_0)[w]| } < \\frac{(1 + 5{\\epsilon}')\\theta|v_z||v_{z'}|}{(1 - 20{\\epsilon}')|f_z(t_0)||f_{z'}(t_0)| } < ( 1 + 30{\\epsilon}')(1 - 2\\sqrt{\\delta_b})^{-2}\\theta < \\theta_0.\\ ] ]    * claim b. * if @xmath1485 holds then @xmath1515 and @xmath1483 hold .    *",
    "* this follows directly from the definitions : if @xmath1480 then @xmath1479 holds , and if @xmath1516 then @xmath1517| \\le \\theta_{\\nu'_{e^{t_j}}(t_j ) } |f_{e^{t_j}}(t_j)[w_j]|$ ] .",
    "* claim c. * if @xmath1518 holds then @xmath1519 .    *",
    "* by lemma [ 3exceptional ] , @xmath1520 is @xmath1521-regular , so by lemma [ 2restrict ] , @xmath1522 $ ] is @xmath1523-regular . then by lemma [ 2neighbour ] , for all but at most @xmath1524 vertices @xmath229 we have @xmath1525 . since @xmath1518 holds , @xmath1526 .",
    "also , by @xmath762 , for @xmath1527 we have @xmath1528 .",
    "now @xmath1529 , so @xmath1530 , and @xmath1531 . combining all estimates , for all but at most @xmath1532 vertices",
    "@xmath1533 we have @xmath1534    * claim d. * if @xmath1518 and @xmath1535 hold then for any @xmath597 containing @xmath27 we have @xmath1536    * proof . * denote @xmath1537 , @xmath1538 and @xmath1539 .",
    "suppose @xmath1518 and @xmath1535 hold .",
    "by @xmath1518 we have @xmath1540 .",
    "consider any triple @xmath597 containing @xmath27 .",
    "we bound @xmath1490 with a similar argument to that used in lemma [ 3marked ] .",
    "* case d.1 .",
    "* first consider the case @xmath1541 . then @xmath1542 and @xmath1287 .",
    "since @xmath1543 , lemma [ consistent ] gives @xmath1544 = f_{{\\overline}{e}}(t_j-1)(y)[w_j ] = f_{{\\overline}{e}}(t_j-1)[w_{j-1}](y)$ ] .",
    "similarly , @xmath1545",
    "= m_{{\\overline}{e},e}(t_j-1)(y)[w_j ] = m_{{\\overline}{e},e}(t_j-1)[w_{j-1}](y)$ ] , so @xmath1546 be the set of @xmath1533 such that we do not have @xmath1547(y)|=(1\\pm{\\epsilon}_*)|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|/|f_{z_j}(t_j-1)|.\\ ] ] applying lemma [ 3crude](vi ) with @xmath1548 gives @xmath1549 .",
    "( note that we need @xmath1527 as this is implicitly assumed to apply lemma [ 3crude ] . )",
    ". then @xmath1551 by lemma [ 3exceptional ] .",
    "now @xmath1552(y)|   > \\theta_{\\nu^ * } \\sum_{y \\in d^w_{z_j , e}(t_j-1 ) { \\setminus}b_{z_j } } |f_{{\\overline}{e}}(t_j-1)[w_{j-1}](y)| \\\\ & \\qquad >   ( 1-{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^w_{z_j , e}(t_j-1)|-2{\\epsilon}_*|f_{z_j}(t_j-1)| )    we also have an upper bound @xmath1552(y)|",
    "\\le \\sum_{y \\in f_{z_j}(t_j-1 ) } |m_{{\\overline}{e},e}(t_j-1)[w_{j-1}](y)| \\\\ & \\qquad = |m_{{\\overline}{e},e}(t_j-1)[w_{j-1}]| < \\theta_{\\nu } |f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|\\end{aligned}\\ ] ] where the last inequality holds by @xmath1535 . therefore @xmath1553    * case d.2 .",
    "* next consider the case @xmath1554 . then @xmath1555 .",
    "also @xmath1556 , so @xmath1287 .",
    "suppose first that @xmath1557 .",
    "then @xmath1558=f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}](y)$ ] and @xmath1559 = m_{{\\overline}{e},e}(t_j-1 ) \\cap f_{{\\overline}{e}}(t_j)[w_j]$ ] , so @xmath1560(y)| } {   |f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}](y)| } > \\theta_{\\nu^ * } \\right\\}.\\ ] ] similarly to the previous case , letting @xmath1561 be the set of @xmath1533 such that we do not have @xmath1562(y)|=(1\\pm{\\epsilon}_*)|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]|/|f_{z_j}(t_j-1)|,\\ ] ] we have @xmath1549 .",
    "with @xmath1550 we have @xmath1563(y)| \\\\ & > & \\theta_{\\nu^ * } \\sum_{y \\in d^w_{z_j , e}(t_j-1 ) { \\setminus}b_{z_j } } |f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}](y)| \\\\ & > &   ( 1-{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^w_{z_j , e}(t_j-1)|-2{\\epsilon}_*|f_{z_j}(t_j-1)| ) \\frac{|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]|}{|f_{z_j}(t_j-1)|}.\\end{aligned}\\ ] ] we also have @xmath1564(y)|$ ] .",
    "this last sum counts all pairs @xmath1294 with @xmath1565 $ ] , @xmath229 and @xmath1566(t_j-1)$ ] , so we can rewrite it as @xmath1567 } |f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}](p)|$ ] .",
    "then lemma [ 3crude ] gives @xmath1562(p)| = ( 1 \\pm { \\epsilon } _ * ) \\frac{|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|}\\ ] ] for all but at most @xmath1568|$ ] sets @xmath1569 $ ] .",
    "therefore @xmath1570|(1+{\\epsilon } _ * ) \\frac{|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| } + { \\epsilon}_*|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]||f_{z_j}(t_j-1)|.\\ ] ] combining this with the lower bound on @xmath1302 we obtain @xmath1571|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| } \\ + \\ { \\epsilon}_*\\frac{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]||f_{z_j}(t_j-1)|}{|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]| } .\\end{aligned}\\ ] ] now @xmath1572| < \\theta_{\\nu } |f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|$ ] by @xmath1535 . also , since @xmath1573 , and since @xmath1574=f_{z_j}(t_j-1)$ ] , we can apply lemma [ 3crude](vi ) with @xmath1548 to get @xmath1575||f_{z_j}(t_j-1)|}{|f_{{\\overline}{e } z_j}(t_j-1)[w_{j-1}]| } \\le 2d_u^{-1 } \\ll { \\epsilon}_*^{-1}$ ] , so @xmath1576    * case d.3 . *",
    "it remains to consider the case when @xmath1554 and @xmath1577 .",
    "since @xmath1556 we have @xmath1578 ( otherwise we are in case d.2 ) .",
    "now @xmath1579 $ ] by lemma [ build - update ] , so @xmath1580=f_{{\\overline}{e}^\\le}(t_j-1)[f_{{\\overline}{e}^<}(t_j)[w_j]]$ ] by lemma [ * props ] . also , @xmath1559 = m_{{\\overline}{e},e}(t_j-1 ) \\cap f_{{\\overline}{e}}(t_j)[w_j]$ ] by lemma [ track - mark ] , so @xmath1581_{{\\overline}{e}}| } {   |f_{{\\overline}{e}^\\le}(t_j-1)[f_{{\\overline}{e}^<}(t_j)[w_j]]_{{\\overline}{e}}| } > \\theta_{\\nu^ * } \\right\\}.\\ ] ] let @xmath1582 .",
    "then @xmath1583 $ ] if and only if @xmath1584 , for @xmath1585 we have @xmath1586 , i.e.  @xmath1587 , and for @xmath1588 we have @xmath1589 $ ] , i.e.  @xmath1590 $ ] .",
    "when we choose @xmath1527 , lemma [ 3crude ] gives @xmath1591 for @xmath1311 with @xmath1316 and @xmath1592 for @xmath1315 .",
    "let @xmath1593 denote @xmath1594):=d_s(f_{{\\overline}{e}^\\le}(t_j)[w_j])$ ] if @xmath477 or @xmath1595 if @xmath479 .",
    "if @xmath1480 then @xmath1596 , so regular restriction gives @xmath1597 for @xmath1311 , @xmath1598 and @xmath1599 .",
    "applying lemma [ 3crude ] we have @xmath1600_{{\\overline}{e } } ) = ( 1 \\pm { \\epsilon } _ * ) \\prod_{s { \\subseteq}{\\overline}{e } } d'_s \\\\ & = ( 1 \\pm 30{\\epsilon } _ * ) \\frac{|w_j|}{|f_x(t_j-1)| } \\prod_{s { \\subseteq}{\\overline}{e } } d_s(f(t_j-1 ) ) \\prod_{{\\emptyset}\\ne s \\in i } d_{sz_j}(f(t_j-1)).\\end{aligned}\\ ] ] also , @xmath1601| = ( 1 \\pm { \\epsilon } _ * ) \\frac{|w_{j-1}|}{|f_x(t_j-1)|}|f_{{\\overline}{e}}(t_j-1)|$ ] by lemma [ 3crude ] . if @xmath1480 then @xmath1602 , so @xmath1603_{{\\overline}{e}}| = ( 1 \\pm 40{\\epsilon}_*)|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|\\prod_{{\\emptyset}\\ne s \\in i } d_{sz_j}(f(t_j-1)).\\ ] ] similarly to the previous cases , now with @xmath1604 , we have @xmath1605_{{\\overline}{e}}| \\\\ & > & \\theta_{\\nu^ * } \\sum_{y \\in d^w_{z_j , e}(t_j-1 ) { \\setminus}b_{z_j } } |f_{{\\overline}{e}^\\le}(t_j-1)[f_{{\\overline}{e}^<}(t_j)[w_j]]_{{\\overline}{e}}| \\\\ & > &   ( 1 - 40{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^w_{z_j , e}(t_j-1)|-2{\\epsilon}_*|f_{z_j}(t_j-1)| ) \\\\ & & \\times\\ |f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| \\prod_{{\\emptyset}\\ne s \\in i } d_{sz_j}(f(t_j-1)).\\end{aligned}\\ ] ] for any @xmath1606 , let @xmath1320 be the set of @xmath229 such that @xmath1587 for all @xmath944 .",
    "let @xmath945 be the set of @xmath1606 such that we do not have @xmath1607 then lemma [ 3technical ] gives @xmath1608 .",
    "also , since @xmath1609*w_{j-1}=f_{{\\overline}{e}^<}(t_j)[w_j]$ ] , lemma [ * props](iv ) gives @xmath1610 = f_{{\\overline}{e}^\\le}(t_j-1)[w_{j-1}][f_{{\\overline}{e}^<}(t_j)[w_j]].\\ ] ] now latexmath:[${\\sigma}\\le \\sum_{y \\in f_{z_j}(t_j-1 ) }    which counts all pairs @xmath1294 with @xmath1565 $ ] and @xmath1325 , so @xmath1612|(1 \\pm { \\epsilon}_*)|f_{z_j}(t_j-1)| \\prod_{{\\emptyset}\\ne s \\in i } d_{sz_j}(f(t_j-1 ) ) \\\\ & + \\ { \\epsilon}_*|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]||f_{z_j}(t_j-1)|.\\end{aligned}\\ ] ] combining this with the lower bound on @xmath1302 we obtain @xmath1613|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| } + { \\epsilon } _ * \\prod_{{\\emptyset}\\ne s \\in i } d_{sz_j}(f(t_j-1))^{-1}.\\end{aligned}\\ ] ] now @xmath1572| < \\theta_{\\nu } |f_{{\\overline}{e}}(t_j-1)[w_{j-1}]|$ ] by @xmath1535 , and all densities are at least @xmath1328 , so again we have @xmath1614 this proves claim d.    * claim e. * conditional on the events @xmath1615 , @xmath403 , @xmath1616 and the embedding up to time @xmath238 , the probability that @xmath1485 does not hold is at most @xmath1617 .",
    "* proof . *",
    "since @xmath1518 and @xmath1535 hold , claim c gives @xmath1519 and claim d gives @xmath1618 for any @xmath597 containing @xmath27 .",
    "we also have @xmath1619 by corollary [ 3ok ] . since @xmath234 is chosen uniformly at random in @xmath256 , the probability that @xmath1620 or @xmath1621 for any @xmath597 containing @xmath27 is at most @xmath1622 .",
    "this proves claim e.    to finish the proof of the lemma , suppose that all the events @xmath1623 , @xmath403 , @xmath227 hold .",
    "then @xmath1624 gives @xmath1625 .",
    "also , since all of @xmath1626 has been embedded at time @xmath1627 , for every triple @xmath597 containing @xmath27 we have @xmath1628 , and @xmath1629 by @xmath1630 . now @xmath1631 is obtained from @xmath1632 by deleting all @xmath1633 for triples @xmath597 containing @xmath27 , so @xmath1634 . in particular , @xmath1631 is non - empty .",
    "if any event @xmath1623 fails then @xmath1485 fails ( by claim b ) and so by claim e and a union bound over @xmath1635 we can bound the failure probability by @xmath1636 .",
    "our final lemma in this subsection is similar to the previous one , but instead of asking for a set @xmath1338 of vertices to contain an available vertex for @xmath27 , we ask for some particular vertex @xmath216 to be available for @xmath27 . recall that @xmath1637 and we start embedding @xmath25 at time @xmath1638 .",
    "[ 3-x - to - v ] for any @xmath214 , conditional on any embedding of the vertices @xmath1463 that does not use @xmath216 , with probability at least @xmath93 we have @xmath1639 , so @xmath1640 .",
    "* we estimate the probability that @xmath1639 using arguments similar to those we are using to embed @xmath1 in @xmath1641 .",
    "the structure of the proof is very similar to that of lemma [ 3initial ] . here",
    "we will see the purpose of properties ( ii ) and ( iii ) in the definition of super - regularity , which ensure that every @xmath214 is a potential image of @xmath27 .",
    "for @xmath735 we write @xmath1642 we consider a vertex @xmath96 to be _ allocated _ if @xmath96 is embedded or @xmath1643 . for @xmath1644 unembedded",
    "we define @xmath1645 as follows . when @xmath652 we let @xmath1646 .",
    "when @xmath712 we let @xmath1647 , where @xmath714 is the maximum value of @xmath1648 over allocated vertices @xmath700 with @xmath717 ; if there is no such vertex @xmath700 we let @xmath1646 . thus @xmath1645 is defined similarly to @xmath710 , replacing ` embedded ' with ` allocated ' .",
    "we have @xmath1649 and lemma [ 3observe](iii - vi ) hold replacing @xmath1650 with @xmath1651 .",
    "suppose @xmath227 and that we are considering the embedding of @xmath219 .",
    "we interpret quantities at time @xmath218 with the embedding @xmath228 , for some as yet unspecified @xmath229 .",
    "we define _ exceptional _ sets @xmath1652 by @xmath1653 if and only if for every unembedded @xmath1654 , @xmath1655    here we use the notation @xmath1656 .",
    "let @xmath258 be the set of vertices at distance at most @xmath2 from @xmath27 in @xmath1 and let @xmath1657 .",
    "for any @xmath1658 and unembedded @xmath344 we define @xmath1659.\\ ] ] thus @xmath1660 consists of all sets @xmath1661 such that @xmath1662 for all @xmath1663 with @xmath573 . for any triple @xmath597",
    ", we use the notation @xmath1537 , @xmath1664 and @xmath1665 similarly to the previous lemma , replacing @xmath1650 with @xmath1651 . for @xmath1658 and @xmath1666",
    "we define sets of _ dangerous _ vertices by @xmath1667    the strategy of the proof is to analyse the event that all the complexes @xmath1668 are well - behaved , meaning informally that they are regular , have roughly expected densities and do not have too many marked edges",
    ". the regularity and density properties will hold if we choose @xmath1669 , and the marked edges will be controlled if we choose @xmath1670 .",
    "we think of @xmath1671 as the _ sphere of influence _",
    ", as it defines the sets which we restrict to be in the neighbourhood of @xmath216 .",
    "our eventual goal is that all sets in @xmath469 should be embedded in @xmath625 , but to achieve this we need to consider arbitrary choices of @xmath1658 . for later use in the proof we record here some properties of @xmath1671 that follow directly from the definitions .",
    "* @xmath1672 .",
    "* @xmath1673 is @xmath1488 if @xmath1674 or @xmath1675 if @xmath1676 .",
    "* @xmath1677 , so @xmath1678 , as defined in the description of the algorithm . * if @xmath1679 then @xmath1680 by ( i ) , since @xmath1681 , so + @xmath1682 . *",
    "if @xmath1683 and @xmath1087 then @xmath1684 .",
    "write @xmath1685 . recall that @xmath1686 is the set of triples @xmath597 with @xmath1687 .",
    "we consider the following events :    * @xmath1515 , @xmath1486 is the event that property @xmath1688 above holds .",
    "we also define @xmath1492 to be the event that @xmath1689 for every @xmath735 .",
    "* @xmath1483 , @xmath1482 is the event that for every triple @xmath1690 and @xmath1691 we have @xmath1692 * @xmath1485 , @xmath1482 is the event that for every triple @xmath1690 , @xmath1691 and @xmath1693 , + @xmath1694 is @xmath1695-regular for @xmath561 , with @xmath1696 * @xmath1697 , @xmath1486 is the event that @xmath234 is chosen in @xmath235 , defined to be the subset of @xmath1675 obtained by deleting the sets @xmath1698 and @xmath1699 for all @xmath1666 , @xmath1691 , @xmath1700 .",
    "we also define @xmath1701 to be the event that holds with probability @xmath26 .    by property ( iv ) above , an equivalent definition of @xmath235 is the subset of @xmath1675 obtained by deleting the sets @xmath1698 and @xmath1699 for all @xmath1666 and @xmath1702",
    ". also , since @xmath256 is obtained from @xmath1488 by deleting @xmath1703 and @xmath1704 for @xmath1666 we have @xmath1705 .",
    "we will use the following notation throughout : @xmath1671 is a subset of @xmath258 , @xmath1679 , @xmath1706 , @xmath1707 .",
    "we divide the remainder of the proof into a series of claims .",
    "* claim a. * the events @xmath1492 , @xmath1493 , @xmath1491 and @xmath1701 hold with high probability .",
    "* @xmath1701 holds by definition . for any @xmath735 , @xmath1708 by condition ( ii ) of super - regularity",
    ", so @xmath1492 holds with high probability by lemma [ 3uniform ] .",
    "next recall that no vertex at distance within @xmath75 of @xmath27 has been embedded at time @xmath223 , so @xmath1454 for any @xmath96 within distance @xmath2 of @xmath27 .",
    "( this is why we choose the buffer vertices to be at mutual distance at least @xmath685 .",
    ") we have @xmath1709 by ( [ eq:3fresh ] ) and @xmath1710 by @xmath1492 . for any @xmath1711 with @xmath561 ,",
    "@xmath1712 is the restriction of @xmath645 to @xmath1713 . since @xmath645 is @xmath43-regular , @xmath1712 is @xmath82-regular with @xmath1714 .",
    "it also follows that @xmath1715 .",
    "now we show that @xmath1491 holds .",
    "consider any triple @xmath1690 and @xmath1691 .",
    "suppose @xmath1716 .",
    "there are two cases according to whether @xmath944 .",
    "suppose first that @xmath944 . by property ( v )",
    "above , @xmath1717 is the restriction of @xmath1718 to @xmath1719 . if @xmath648 then @xmath1718 is @xmath82-regular and @xmath1508 by condition ( ii ) of super - regularity .",
    "then by regular restriction @xmath1720 is @xmath1721-regular and @xmath1722 . also ,",
    "if @xmath761 then @xmath1723 by definition .",
    "this gives the properties required by @xmath1491 when @xmath944 .",
    "in fact , we have the stronger statements in which @xmath1724 is replaced by @xmath1725 , say . on the other hand , if @xmath1316 then @xmath1726 is the restriction of @xmath1727 to @xmath1728 .",
    "since @xmath1727 is @xmath82-regular and @xmath1729 is @xmath1725-regular for @xmath1730 , by regular restriction @xmath1731 is @xmath1721-regular with @xmath1732 .",
    "thus @xmath1491 holds .",
    "it remains to show that @xmath1493 holds .",
    "we will abuse notation and let @xmath349 also denote the subcomplex @xmath1733 of @xmath622}{\\le 3}$ ] .",
    "then @xmath1734 as defined in definition [ def-3preplus ] .",
    "by property ( iii ) of super - regularity @xmath1735 and @xmath1736 is @xmath82-regular with @xmath23-density ( for @xmath1737 ) equal to @xmath1738 if @xmath944 or @xmath1739 otherwise .",
    "now @xmath1740 is @xmath1741 if @xmath1742 or @xmath1743 otherwise , and similarly @xmath1744 is @xmath1460 if @xmath1742 or @xmath1745 otherwise .",
    "either way we have @xmath1746 by the estimates recalled above .",
    "for @xmath561 we showed above that @xmath1747 is @xmath1748 if @xmath944 or @xmath1749 if @xmath1316 . recalling that @xmath1750 for @xmath1751 with @xmath1752 , lemma [ 3absolute ] gives @xmath1753 now @xmath1754 , giving even a stronger bound on the marked edges than is needed . thus @xmath1493 holds .",
    "* claim b. * suppose @xmath1755 holds .",
    "if @xmath1756 then @xmath1515 and @xmath1485 hold , and if @xmath1757 then @xmath1483 holds .",
    "thus @xmath1755 and @xmath1697 imply @xmath1515 , @xmath1483 and @xmath1485",
    ".    * proof .",
    "* suppose @xmath1756 .",
    "then @xmath1515 holds by definition .",
    "@xmath1485 follows from @xmath1515 similarly to the case @xmath1758 considered in claim a. to see this , consider any triple @xmath1690 and @xmath1691 .",
    "suppose @xmath1716 is unembedded .",
    "if @xmath1683 and @xmath1759 then @xmath1760 satisfies @xmath1688 by @xmath1515 , so we have the properties required by @xmath1485 .",
    "in fact , we have the stronger statements in which @xmath1695 is replaced by @xmath1761 . for any other @xmath23",
    "we use the definition of @xmath1762 as the restriction of @xmath1763 to @xmath1764 . note that by lemmas [ build - update ] and [ * props ] we get the same result if we replace @xmath1765 by @xmath1766 for those @xmath1767 .",
    "now @xmath1768 is @xmath1769-regular for @xmath546 by lemma [ 3exceptional ] , @xmath1765 is @xmath1769-regular for @xmath1770 , @xmath1771 and @xmath1766 is @xmath1772-regular for @xmath1730 by @xmath1755 .",
    "so by regular restriction @xmath1660 is @xmath1695-regular with @xmath1773 .",
    "thus @xmath1485 holds .",
    "next consider any triple @xmath1690 and @xmath1691 .",
    "suppose @xmath1757 .",
    "if @xmath1666 then by definition we have @xmath1774 , which is a stronger bound than required . on the other hand , if @xmath1775 then consider the most recent time @xmath1776 when we embedded @xmath245 with @xmath1777 , setting @xmath1778 if there is no such time .",
    "then @xmath1779 , and by the stronger bound at time @xmath1780 we have @xmath1781 .",
    "( recall that we also obtained a stronger bound for @xmath1493 in claim a. ) now @xmath1782 is obtained from @xmath1783 by deleting at most @xmath754 vertices @xmath1784 , @xmath1785 and the sets containing them , so @xmath1786 ; this can be seen by regular restriction and lemma [ 3absolute ] , or simply from the fact that a trivial bound for the number of deleted sets has a lower order of magnitude for large @xmath31 .",
    "therefore @xmath1787 , so @xmath1483 holds .    * claim c. * if @xmath1518 and @xmath1755 hold then @xmath1788 .",
    "* for any @xmath344 we write @xmath1789 and @xmath1790 .",
    "consider any unembedded @xmath1654 .",
    "* case c.1 .",
    "* suppose first that @xmath1791 has size @xmath26 .",
    "note that @xmath1792 by the analogue of lemma [ 3observe ] for @xmath1651 .",
    "we consider two cases according to whether @xmath1793 .",
    "* case c.1.i . *",
    "suppose that @xmath1793",
    ". then @xmath1794 .",
    "since @xmath1795 , using @xmath1755 we have @xmath1796 and @xmath1797 is @xmath1798-regular .",
    "we also have @xmath1799 . by lemma [ 2neighbour ] , for all but at most @xmath1800 vertices @xmath1801 we have @xmath1802 , so @xmath1803 also if @xmath1527 then @xmath762 gives @xmath1804 thus for such @xmath131 we have the required estimate @xmath1805 .",
    "* case c.1.ii . *",
    "suppose that @xmath1806 .",
    "since @xmath1807 and @xmath1808 we have @xmath1809,\\ ] ] i.e.  @xmath1810 is the bipartite subgraph of @xmath1811 induced by @xmath1812 and @xmath1813 .",
    "then we have @xmath1814 .",
    "now @xmath1815 is @xmath1816-regular by lemma [ 3exceptional ] and @xmath1817 by @xmath1755 .",
    "then by lemmas [ 2restrict ] and [ 2neighbour ] , for all but at most @xmath1818 vertices @xmath1801 we have @xmath1819 .",
    "this gives @xmath1820 we also have @xmath1821 if @xmath1527 by @xmath762 and @xmath1822 by lemma [ 2restrict ] , and using @xmath1806 .",
    "thus for such @xmath131 we have the required estimate @xmath1805",
    ".    * case c.2 . *",
    "the remaining case is when @xmath1823 has size @xmath224 .",
    "note that @xmath1824 is @xmath33-partite , as @xmath1825 and @xmath1808 .",
    "note also that @xmath1826 .",
    "consider the complex @xmath1827.\\ ] ] we claim that @xmath1828 . to see this ,",
    "note first that @xmath1829 $ ] by lemma [ build - update ] .",
    "then by lemma [ * props ] we can write @xmath1830 and so @xmath1831 here we used @xmath1832=f_{z'z^\\le}(t_j)$ ] and @xmath1833 . to put the above identity in words : @xmath1834 is the bipartite subgraph of @xmath1835 induced by @xmath1836 and @xmath1837 . also , @xmath1838 here we used @xmath1839 and @xmath1832=f_{z'z^\\le}(t_j)$ ] .",
    "we also recall that @xmath1840 , so @xmath573 for any @xmath1841 .",
    "note that @xmath1842 is a @xmath26-complex containing @xmath359 , @xmath1843 if @xmath1793 and @xmath1844 if @xmath1845",
    ". as in case c.1 , we have @xmath1846 if @xmath1793 or @xmath1847 if @xmath1806 , and similarly @xmath1848 if @xmath1845 or @xmath1849 if @xmath1850 .",
    "thus @xmath1851 is also equal to @xmath1852 , which proves that @xmath1853 .    for any @xmath1854 , @xmath1855 is @xmath1856-regular by lemma [ 3exceptional ] if @xmath1857 and , using property ( v ) above , @xmath1766 is @xmath1858-regular by @xmath1755 if @xmath573 . by lemma [ 3restrict ] ,",
    "@xmath1859 is @xmath1860-regular with @xmath1861 similarly , by lemma [ 2restrict ] , if @xmath1854 , @xmath1152 , @xmath577 then @xmath1862 is @xmath1858-regular with @xmath1863 . on the other hand , if @xmath1854 , @xmath1152 , @xmath573 then @xmath1864 is @xmath1865-regular with @xmath1866 by @xmath1755 .",
    "in particular , @xmath1867 now by lemma [ 3neighbour1 ] , for all but at most @xmath1868 vertices @xmath1801 , @xmath1828 is @xmath1869-regular and @xmath1870",
    ". also , @xmath1871 if @xmath1527 by @xmath762 , and @xmath1872 by lemmas [ 3exceptional ] and [ 3restrict ] .",
    "thus @xmath1873 combining the estimates for all cases we have at most @xmath1874 exceptional vertices @xmath131 , so this proves claim c.    * claim d. * if @xmath1518 , @xmath1535 and @xmath1755 hold then for any @xmath1666 , @xmath1691 , @xmath1875 we have @xmath1876    * proof . * note that @xmath1287 by lemma [ 3observe ] , since @xmath1666 .    *",
    "* first consider the case @xmath1541 . then @xmath1542 and @xmath1877 .",
    "we will show that @xmath1878 before proving this in general we will illustrate a few cases of this statement .",
    "suppose that @xmath1270 , say @xmath1879 for some @xmath96 .",
    "if @xmath96 is embedded then @xmath1880 and @xmath1881 , so @xmath1882 . if @xmath96 is not embedded then @xmath1883 and @xmath1884 , @xmath1885 is @xmath1886 if @xmath1887 or @xmath1888 otherwise , and @xmath1889 is the bipartite subgraph of @xmath1890 spanned by @xmath1891 and @xmath1885 .",
    "also , we have @xmath1892 if @xmath1893 , i.e.  @xmath1894 and @xmath1895 for all @xmath1896 , @xmath1087 .",
    "equivalently , ( i ) @xmath1897 , ( ii ) for @xmath1898 , @xmath1087 we have @xmath1899 , i.e.  @xmath1900 , and ( iii ) if @xmath1901 we have @xmath1902 , i.e.  @xmath1903 . thus @xmath1904 .",
    "on the other hand , suppose that @xmath1284 and consider the case that @xmath597 is unembedded , i.e.  @xmath1905 say .",
    "then @xmath1906 is the bipartite subgraph of @xmath1907 spanned by @xmath1908 and @xmath1909 , where we write @xmath1907 for @xmath1910 if @xmath1911 or @xmath1912 otherwise , @xmath1908 for @xmath1913 if @xmath1887 or @xmath1914 otherwise , and @xmath1909 for @xmath1915 if @xmath1916 or @xmath1912 otherwise .",
    "recall that @xmath1913 is @xmath1843 if @xmath1793 ( see case c.1.i ) or @xmath1917 if @xmath1806 ( see case c.1.ii ) .",
    "similar statements hold for @xmath1836 . also , if @xmath1918 then @xmath1919 is the complex @xmath519 defined in case c.2 , so as shown there @xmath1920 .",
    "we deduce @xmath1921 from the case @xmath1922 of the following more general statement , which will also be used in cases d.2 and d.3 : @xmath1923 to see this , note that @xmath1924 $ ] for any @xmath1925 by definition [ def - update ] ( deleting @xmath131 has no effect ) , so by lemma [ * props ] we have @xmath1926 since @xmath1927 .",
    "now by definition and lemma [ * props ] we have @xmath1928 = f_{az_j^\\le}(t_j-1 ) * \\bigodot_{s \\in i ' } f_{sx^\\le}(t_j-1)(v ) , \\mbox { so } \\\\ & f(t_j-1)^{z'*v}(y)_{a^\\le } = f_{a^\\le}(t_j-1)*\\bigodot_{s \\in i } f_{sx^\\le}(t_j-1)(v ) \\\\ & \\hspace{0.3\\textwidth } * f_{az_j^\\le}(t_j-1)(y)*\\bigodot_{s \\in i ' } f_{sx^\\le}(t_j-1)(vy ) \\\\ & = f_{az_j^\\le}(t_j-1)(y)*\\bigodot_{s \\in i } f_{sx^\\le}(t_j-1)(v ) * \\bigodot_{s \\in i ' } f_{sx^\\le}(t_j-1)(vy).\\end{aligned}\\ ] ] here we used @xmath1929 . on the other hand , @xmath1930 = f_{a^\\le}(t_j)*\\bigodot_{s \\in i}f_{sx^\\le}(t_j)(v )",
    "\\\\ & = f_{a^\\le}(t_j ) * \\bigodot_{s \\in i}\\left ( f_{sx^\\le}(t_j-1)(v ) * f_{sz_j^\\le}(t_j-1)(y ) * f_{sxz_j^\\le}(t_j-1)(yv ) \\right)\\\\ & = f_{az_j^\\le}(t_j-1)(y)*\\bigodot_{s \\in i } f_{sx^\\le}(t_j-1)(v)*\\bigodot_{s ' \\in i ' } f_{s'x^\\le}(t_j-1)(vy ) = f(t_j-1)^{z'*v}(y)_{a^\\le}.\\end{aligned}\\ ] ] in the second equality above we substituted for @xmath1931 , and in the third we set @xmath1932 and used @xmath1933 .",
    "this proves @xmath1934 , and so @xmath1921 .",
    "now @xmath1935 by lemma [ track - mark ] , so we have @xmath1936 . recalling that @xmath1937",
    ", we have @xmath1938 also , @xmath1939 is @xmath1428-regular by @xmath1755 , so writing @xmath1561 for the set of vertices @xmath1940 for which we do not have @xmath1941 , we have @xmath1942 by lemma [ 3average ] .",
    "now @xmath1943 where the last inequality holds by @xmath1535",
    ". therefore @xmath1944    * case d.2 . *",
    "next consider the case @xmath1554 and @xmath1557 . then @xmath1555 and @xmath1945 .",
    "also , by ( @xmath1946 ) we have @xmath1947 .",
    "now @xmath1948 by lemma [ track - mark ] and @xmath1949 , so @xmath1950 . since @xmath1937 , we have @xmath1951 also , since @xmath1557 we have @xmath1952 for some triple @xmath1953 , so applying @xmath1755 to @xmath1954 we see that @xmath1955 is @xmath1428-regular",
    ". then writing @xmath1561 for the set of vertices @xmath1940 for which we do not have @xmath1956 , we have @xmath1942 by lemma [ 3average ] .",
    "now @xmath1957 .",
    "this sum counts all pairs @xmath1294 with @xmath1958 , @xmath1801 and @xmath1959 , so @xmath1960 . by lemma [ 3crude](vi )",
    "we have @xmath1961 for all but at most @xmath1962 sets @xmath1963 .",
    "therefore @xmath1964 combining this with the lower bound on @xmath1302 gives @xmath1965 now @xmath1966 , @xmath1967 by @xmath1535 , and @xmath1968 by lemma [ 3crude ] and @xmath1755 , so @xmath1969    * case d.3 .",
    "* it remains to consider the case when @xmath1554 and @xmath1577 . since @xmath1666 and @xmath1577 we have @xmath1578 .",
    "then @xmath1579 $ ] by lemma [ build - update ] .",
    "also , we claim that @xmath1970.\\ ] ] to see this , consider @xmath1311 and @xmath1971 . then by definition @xmath1661 and @xmath1972 for all @xmath1770 with @xmath573 . since @xmath1973 it follows that @xmath1974 .",
    "also , for any @xmath1975 with @xmath1976 , @xmath1977 and @xmath1978 we have @xmath1979 and @xmath1980 , so @xmath1981 .",
    "thus @xmath1982 $ ] .",
    "conversely , suppose that @xmath1311 and @xmath1982_s$ ] . if @xmath1983 then @xmath1984 .",
    "now suppose @xmath1985",
    ". then @xmath1606 and @xmath1979 for @xmath572 , so @xmath1986 .",
    "also , for @xmath572 we have @xmath1981 , so @xmath1980 for all @xmath1987 with @xmath1978 . therefore @xmath1971 .",
    "this proves @xmath1988 .",
    "note also that since @xmath1989 we can replace @xmath1671 by @xmath1990 in @xmath1988 .",
    "since @xmath1948 and @xmath1991 we have @xmath1992 $ ]",
    ". then @xmath1993_{{\\overline}{e}}\\right| } { \\left| f(t_j-1)^{z'*v}_{{\\overline}{e}^\\le}[f(t_j)^{z'*v}_{{\\overline}{e}^<}]_{{\\overline}{e}}\\right| } > \\theta_{\\nu^ * } \\right\\}.\\ ] ] next note that by @xmath1755 and lemma [ 3absolute ] we have @xmath1994 now consider @xmath1756 . by claim",
    "b we can apply the properties in @xmath1485 with this choice of @xmath131 , so we also have @xmath1995 now @xmath1595 is @xmath1996 for @xmath1997 by @xmath762 or @xmath1998 for @xmath1999 by lemma [ 3crude ]",
    ". therefore @xmath2000 , where @xmath2001 to see the second equality above , note that for any @xmath2002 with @xmath2003 , applying @xmath1755 to any triple @xmath2004 with @xmath2005 , since @xmath2006 we have @xmath2007 .",
    "we deduce that @xmath2008_{{\\overline}{e}}\\right| = ( 1\\pm 50{\\epsilon}_*)\\left|f(t_j-1)^{z'*v}_{{\\overline}{e}}\\right| d^*\\ ] ] for such @xmath1756 .",
    "now @xmath2009_{{\\overline}{e } } \\right| \\\\ & > \\theta_{\\nu^ * } \\sum_{y \\in d^{z'*v}_{z_j , e}(t_j-1){\\setminus}b_{z_j } } \\left|   f(t_j-1)^{z'*v}_{{\\overline}{e}^\\le}[f(t_j)^{z'*v}_{{\\overline}{e}^<}]_{{\\overline}{e } } \\right| \\\\ & >   ( 1 - 50{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^{z'*v}_{z_j , e}(t_j-1)|-\\sqrt{{\\epsilon}_*}|f_{xz_j}(t_j-1)(v)|)\\ \\left|f(t_j-1)^{z'*v}_{{\\overline}{e}}\\right| d^*.\\end{aligned}\\ ] ] ( note that we used the estimate @xmath2010 , by lemma [ 3exceptional ] and claim c. ) we also have @xmath2011_{{\\overline}{e } } \\right|$ ] .",
    "this sum counts all pairs @xmath1294 with @xmath1958 , @xmath1801 and @xmath2012 for all @xmath2013 , @xmath1997 ; there is no need to consider @xmath1999 , as by lemma [ build - update ] we get the same expression if we replace the restriction to @xmath2014 by @xmath2015 for such @xmath23 .",
    "note that @xmath2016 and @xmath2017 @xmath2018 @xmath2019 by ( @xmath1946 ) .",
    "given @xmath461 , let @xmath2020 be the set of @xmath1801 satisfying this condition , and let @xmath2021 be the set of @xmath1963 such that we do not have @xmath2022 lemma [ 3technical ] applied with @xmath2023 and @xmath2024 gives @xmath2025 .",
    "then @xmath2026 combining this with the lower bound on @xmath1302 we obtain @xmath2027 now @xmath2028 , and @xmath2029 by @xmath1535 ( since @xmath2030 ) .",
    "then @xmath2031 this completes the proof of claim d.    * claim e. * conditional on the events @xmath1615 , @xmath383 , @xmath1616 and the embedding up to time @xmath238 we have @xmath2032 .",
    "* proof . *",
    "suppose @xmath1518 , @xmath1535 and @xmath1755 hold .",
    "then claim d gives @xmath2033 for any @xmath1666 , @xmath1691 , @xmath1875 .",
    "also @xmath2034 by @xmath1755 and since @xmath2035 . as @xmath2036 by lemma [ 3exceptional ]",
    ", @xmath2037 has size @xmath2038 by claim c. since @xmath1 has maximum degree at most @xmath72 we have at most @xmath2039 choices for @xmath1666 then @xmath2040 choices for @xmath1691 , so @xmath2041 .",
    "now @xmath234 is chosen uniformly at random in @xmath2042 , and @xmath1705 .",
    "then claim e follows from @xmath2043    to finish the proof of the lemma , note that if all the events @xmath1623 , @xmath383 , @xmath227 hold , then the events @xmath1697 imply that @xmath1639 .",
    "multiplying the conditional probabilities given by claim e over at most @xmath754 vertices of @xmath25 gives probability at least @xmath2044 .",
    "the algorithm will be successful if the following two conditions hold .",
    "firstly , it must not abort during the iterative phase because of the queue becoming too large .",
    "secondly , there must be a system of distinct representatives for the available images of the unembedded vertices , which all belong to the buffer @xmath103 . recall that @xmath2045 is the available set for @xmath116 at the time @xmath736 when",
    "the last vertex of @xmath25 is embedded .",
    "since @xmath25 has been embedded , until the conclusion of the algorithm at time @xmath152 , no further vertices will be marked as forbidden for the image @xmath27 , and no further neighbourhood conditions will be imposed on the image of @xmath27 , although some vertices in @xmath737 may be used to embed other vertices in @xmath1453 .",
    "thus the set of vertices available to embed @xmath27 at time @xmath152 is @xmath2046 .",
    "therefore we seek a system of distinct representatives for @xmath2047 .",
    "we start with the ` main lemma ' , which is almost identical to lemma [ 2main ] .",
    "for completeness we repeat the proof , giving the necessary modifications .    [",
    "3main ] suppose @xmath62 , @xmath259 and @xmath260 with @xmath261 .",
    "let @xmath262 be the event that ( i ) no vertices are embedded in @xmath92 before the conclusion of the algorithm , and ( ii ) for every @xmath263 there is some time @xmath100 such that @xmath2048",
    ". then @xmath265 .    *",
    "* we start by choosing @xmath266 with @xmath2049 so that vertices in @xmath268 are mutually at distance at least @xmath2 ( this can be done greedily , using the fact that @xmath1 has maximum degree @xmath72 ) .",
    "it suffices to bound the probability of @xmath269 .",
    "note that initially we have @xmath2050 for all @xmath2051 .",
    "also , if no vertices are embedded in @xmath92 , then @xmath272 can only be less than @xmath273 for some @xmath96 and @xmath97 if we embed a neighbour of @xmath96 at time @xmath97 .",
    "it follows that if @xmath269 occurs , then for every @xmath274 there is a first time @xmath100 when we embed a neighbour @xmath195 of @xmath96 and have @xmath275 .    by lemma [ 3exceptional ] ,",
    "the densities @xmath2052 , @xmath2052 and @xmath2053 are all at least @xmath86 and @xmath2054 is @xmath83-regular . applying lemma [ 2neighbour ]",
    ", we see that there are at most @xmath2055 ` exceptional ' vertices @xmath283 that do not satisfy @xmath2056 . on the other hand , the algorithm chooses @xmath1431 to satisfy @xmath762 , so @xmath2057 .",
    "thus we can only have @xmath275 by choosing an exceptional vertex @xmath131 . but @xmath131 is chosen uniformly at random from @xmath2058 possibilities ( by corollary [ 3ok ] ) .",
    "it follows that , conditional on the prior embedding , the probability of choosing an exceptional vertex for @xmath131 is at most @xmath2059 .",
    "since vertices of @xmath268 have disjoint neighbourhoods , we can multiply the conditional probabilities over @xmath274 to obtain an upper bound of @xmath2060 .",
    "recall that this bound is for a subset of @xmath269 in which we have specified a certain neighbour @xmath195 for every vertex @xmath274 .",
    "taking a union bound over at most @xmath2061 choices for these neighbours gives @xmath2062 .",
    "now we can prove the following theorem , which implies theorem [ 3blowup ] .",
    "the proof is quite similar to the graph case , except that the marked edges create an additional case when verifying hall s criterion , which is covered by lemma [ 3initial ] .",
    "[ 3final ] with high probability the algorithm embeds @xmath1 in @xmath1641 .",
    "* proof . *",
    "first we estimate the probability of the iteration phase aborting with failure , which happens when the number of vertices that have ever been queued is too large .",
    "we can take a union bound over all @xmath62 and @xmath259 with @xmath291 of @xmath292 .",
    "suppose that the event @xmath293 occurs .",
    "then for every @xmath263 there is some time @xmath97 such that @xmath149 , where @xmath295 is the most recent time at which we embedded a neighbour of @xmath96 . since @xmath294 is unused we have @xmath296",
    ", so @xmath2063",
    ". however , we have @xmath298 by lemma [ 3observe](i ) , so since @xmath299 we have @xmath2048 .",
    "taking a union bound over all possibilities for @xmath206 , @xmath258 and @xmath92 , lemma [ 3main ] implies that the failure probability is at most @xmath2064 , since @xmath301 .",
    "now we estimate the probability of the conclusion of the algorithm aborting with failure . by hall",
    "s criterion for finding a system of distinct representatives , the conclusion fails if and only if there is @xmath62 and @xmath303 such that @xmath2065 . recall that @xmath302 by lemma [ 3observe](i ) and buffer vertices have disjoint neighbourhoods .",
    "we divide into cases according to the size of @xmath23 .",
    ": :    for every unembedded @xmath96 and triple @xmath597    containing @xmath96 we have @xmath2066 by    lemma [ 3exceptional ] and    @xmath2067 by lemma [ 3marked ] .",
    "since @xmath96 has degree at most @xmath72 we have    @xmath2068 , so this case    can not occur . @xmath2069 .",
    ": :    we use the fact that    @xmath2070 is a large    set of unused vertices which can not be used by any vertex    @xmath96 in @xmath23 : we have    @xmath2071 ,    yet @xmath2072    has size at most @xmath2073 by lemma [ 3marked ] ,    so    @xmath2074 .    as",
    "above , taking a union bound over all possibilities for    @xmath206 , @xmath23 and @xmath92 , lemma [ 3main ]    implies that the failure probability is at most    @xmath2075 ,    since @xmath2076 . @xmath2077 .",
    ": :    we use the fact that    @xmath2078 satisfies    @xmath2079 for every    @xmath319 .",
    "now    @xmath2080 ,    so by lemma [ 3initial ] , for each @xmath96 the event    @xmath2081 has probability at most    @xmath1636 when we embed @xmath734 ,    conditional on the prior embedding .",
    "multiplying the conditional    probabilities and taking a union bound over all possibilities for    @xmath206 , @xmath23 and @xmath1338 , the failure    probability is at most    @xmath2082 ,    since @xmath2083 . @xmath314 . : :    we claim that with high probability    @xmath2084 , so in fact hall s    criterion holds .",
    "it suffices to consider sets    @xmath303 of size exactly    @xmath316 .",
    "the claim fails if there is some    @xmath317 such that @xmath2085 for    every @xmath319 . since @xmath216 is unused we have    @xmath2086 , and by lemma [ 3-x - to - v ] , for each    @xmath96 the event @xmath2086 has probability at    most @xmath320 when we embed @xmath734 ,    conditional on the prior embedding .",
    "multiplying the conditional    probabilities and taking a union bound over all    @xmath62 , @xmath321 and    @xmath303 of size    @xmath316 , the failure probability is at most    @xmath2087 .",
    "this estimate uses the bounds    @xmath2088 ,    @xmath324    and @xmath325 .    in all cases",
    "we see that the failure probability is @xmath326 .",
    "to demonstrate the utility of the blow - up lemma we will work through an application in this section . to warm up ,",
    "we sketch the proof of khn and osthus ( * ? ? ?",
    "* theorem 2 ) on packing bipartite graphs using the graph blow - up lemma .",
    "then we generalise this result to packing tripartite @xmath2-graphs .",
    "we divide this section into four subsections , organised as follows . in the first subsection",
    "we illustrate the use of the graph blow - up lemma , which is based on a decomposition obtained from szemerdi s regularity lemma and a simple lemma that one can delete a small number of vertices from a regular pair to make it super - regular .",
    "the second subsection describes some more hypergraph regularity theory for @xmath2-graphs : the regular approximation lemma and counting lemma of rdl and schacht . in the third subsection",
    "we give the @xmath2-graph analogue of the super - regular deletion lemma , which requires rather more work than the graph case .",
    "we also give a ` black box ' reformulation of the blow - up lemma that will be more accessible for future applications .",
    "we then apply this in the fourth subsection to packing tripartite @xmath2-graphs .",
    "in this subsection we sketch a proof of the following result of khn and osthus .",
    "first we give some definitions . for any graph @xmath52 , an _",
    "@xmath52-packing _ is a collection of vertex - disjoint copies of @xmath52 .",
    "we say that a graph @xmath34 is _ @xmath2089-regular _ if the degree of every vertex in @xmath34 lies between @xmath2090 and @xmath2091 .",
    "[ 2pack ] for any bipartite graph @xmath52 with different part sizes and @xmath2092 there is a real @xmath42 and positive integers @xmath2093 such that any @xmath2094-regular graph @xmath34 on @xmath2095 vertices contains an @xmath52-packing covering all but at most @xmath2096 vertices .",
    "note that the assumption that @xmath52 has different part sizes is essential .",
    "for example , if @xmath2097 is a @xmath75-cycle and @xmath34 is a complete bipartite graph with parts of size @xmath2098 and @xmath2099 then any @xmath52-packing leaves at least @xmath2100 vertices uncovered .",
    "also , we can not expect to cover all vertices even when the number @xmath11 of vertices of @xmath52 divides @xmath31 , as @xmath34 may be disconnected and have a component in which the number of vertices is not divisible by @xmath11 .    without loss of generality we can assume @xmath52 is a complete bipartite graph @xmath2101 for some @xmath2102 .",
    "it is convenient to assume that @xmath34 is bipartite , having parts @xmath92 and @xmath103 of sizes @xmath2103 .",
    "this can be achieved by choosing @xmath92 and @xmath103 randomly : if @xmath34 is @xmath2094-regular then with high probability the induced bipartite graph is @xmath2104-regular .",
    "then we refine the partition @xmath2105 using the following ` degree form ' of szemerdi s regularity lemma .",
    "[ srl - deg ] suppose @xmath2106 and @xmath2107 is a bipartite graph with @xmath2108 .",
    "then there are partitions @xmath2109 and @xmath2110 for some @xmath2111 such that @xmath2112 for @xmath896 for some @xmath2113 and @xmath2114 , and a spanning subgraph @xmath777 of @xmath34 such that @xmath2115 for every vertex @xmath27 and every pair @xmath2116 with @xmath2117 induces a bipartite subgraph of @xmath777 that is either empty or @xmath43-regular of density at least @xmath2118 .",
    "lemma [ srl - deg ] can be easily derived from the usual statement of szemerdi s regularity lemma ( see e.g.  ( * ? ? ?",
    "* lemma 41 ) for a non - bipartite version ) .",
    "we refer to the parts @xmath2119 and @xmath2120 with @xmath896 as _ clusters _ and the parts @xmath2121 and @xmath2122 as _ exceptional _ sets .",
    "we write @xmath2123 for the bipartite subgraph of @xmath777 induced by @xmath2119 and @xmath2124 .",
    "there is a naturally associated _ reduced graph _",
    ", in which vertices correspond to clusters and edges to dense regular pairs : @xmath2125 is a weighted bipartite graph on @xmath2126,[t])$ ] with an edge @xmath155 of weight @xmath156 whenever @xmath2123 is @xmath43-regular of density @xmath68 .",
    "we choose the parameter @xmath2118 to satisfy @xmath2127 .",
    "the next step of the proof is to select a nearly - perfect matching in @xmath2125 , using the defect form of hall s matching theorem . using the fact that @xmath34 is @xmath2094-regular one can show that for any @xmath2128 $ ] we have @xmath2129 ( say ) so @xmath2125 has a matching of size @xmath2130 .",
    "the details are given in lemma 11 of @xcite .",
    "now it is straightforward to find an @xmath52-packing covering all but at most @xmath2131 vertices . for each edge @xmath155 of the matching in @xmath2125",
    "we greedily remove copies of @xmath2101 while possible , alternating which of @xmath2119 and @xmath2124 contains the part of size @xmath2132 to maintain parts of roughly equal size .",
    "while we still have at least @xmath2133 vertices remaining in each of @xmath2119 and @xmath2124 , the definition of @xmath43-regularity implies that the remaining subgraph @xmath2123 has density at least @xmath2134 .",
    "then the kvari - ss - turn theorem @xcite implies that we can choose the next copy of @xmath2101 . we can estimate the number of uncovered vertices by @xmath2135 in clusters not covered by the matching , @xmath2136 in clusters covered by the matching , and @xmath2100 in @xmath2137 , so at most @xmath2131 vertices are uncovered .",
    "however , we want to prove the stronger result that there is an @xmath52-packing covering all but at most @xmath2138 vertices . to do this we first move a small number of vertices from each cluster to the exceptional sets so as to make the matching pairs super - regular .",
    "this is a standard property of graph regularity ; we include the short proof of the next lemma for comparison with the analogous statement later for hypergraphs .",
    "[ 2del ] suppose @xmath2107 is an @xmath43-regular bipartite graph of density @xmath2118 with @xmath2139 .",
    "then there are @xmath2140 and @xmath2141 with @xmath2142 such that the restriction @xmath2143 of @xmath34 to @xmath2144 is @xmath2145-super - regular .",
    "* let @xmath2146 .",
    "then @xmath2147 , otherwise @xmath2148 would contradict the definition of @xmath43-regularity for @xmath2105 .",
    "similarly @xmath2149 has @xmath2150 .",
    "let @xmath2151 be obtained from @xmath92 by deleting a set of size @xmath2133 containing @xmath2121 .",
    "define @xmath2152 similarly",
    ". then @xmath2142 .",
    "for any @xmath2153 , @xmath2154 with @xmath2155 , @xmath2156 we have @xmath2157 , @xmath2158 , so @xmath2159 has density @xmath2160 by @xmath43-regularity of @xmath34 .",
    "thus @xmath2143 is @xmath2161-regular . also , for any vertex @xmath27 of @xmath2143 we have @xmath2162 , so @xmath2143 is @xmath2145-super - regular .",
    "we make the matching pairs @xmath2163-super - regular and move all discarded vertices and unmatched clusters into the exceptional sets . for convenient notation , we redefine @xmath2164 and @xmath2165 , where @xmath2166 , to be the parts of the super - regular matched pairs , and @xmath2121 , @xmath2122 to be the new exceptional sets .",
    "thus @xmath2167 for @xmath2168 and @xmath2169 .",
    "we will select vertex - disjoint copies of @xmath2101 to cover @xmath2137 .",
    "we want to do this in such a way that the matching pairs remain super - regular ( with slightly weaker parameters ) and the uncovered parts of the clusters all have roughly equal sizes . then we will be able to apply the graph blow - up lemma ( theorem [ 2blowup ] ) to pack the remaining vertices in each matching pair almost perfectly with copies of @xmath2101 .",
    "( we assumed @xmath70 in theorem [ 2blowup ] for simplicity , but it is easy to replace this assumption by @xmath2170 , say . ) the sizes of the uncovered parts in a pair may not permit a perfect @xmath2101-packing , but it is easy to see that one can cover all but at most @xmath2171 vertices in each pair .",
    "taking @xmath2172 we will thus cover all but at most @xmath2096 vertices .",
    "it remains to show how to cover @xmath2137 with vertex - disjoint copies of @xmath2101 .",
    "first we set aside some vertices that we will not use so as to preserve the super - regularity of the matching pairs .",
    "for each matching pair @xmath155 we randomly partition @xmath2119 as @xmath2173 and @xmath2124 as @xmath2174 .",
    "we will only use vertices from @xmath2175 and @xmath2176 when covering @xmath2137 . by chernoff bounds , with high probability these partitions have the following properties :    1 .",
    "all parts @xmath2177 , @xmath2178 , @xmath2179 , @xmath2180 have sizes @xmath2181 .",
    "every vertex @xmath27 has at least @xmath2182 neighbours in @xmath2183 .",
    "whenever a vertex @xmath27 has @xmath2184 neighbours in a cluster @xmath2119 it has @xmath2185 neighbours in each of @xmath2177 , @xmath2178 ; a similar statement holds for clusters @xmath2124 .",
    "each of @xmath2186 and @xmath2187 have size at least @xmath2188 for every matching edge @xmath155 and @xmath2189 , @xmath2190 .",
    "now we cover @xmath2137 by the following greedy procedure .",
    "suppose we are about to cover a vertex @xmath2191 , say @xmath2192 .",
    "we consider a cluster to be _ heavy _ if we have covered more than @xmath2193 of its vertices .",
    "since @xmath2194 we have covered at most @xmath2195 vertices by copies of @xmath2101 , so there are at most @xmath2196 heavy clusters .",
    "since @xmath34 is @xmath2094-regular , @xmath27 has at least @xmath2197 neighbours in @xmath2198 by property 2 .",
    "at most @xmath2199 of these neighbours lie in heavy clusters and at most @xmath2200 of them lie in clusters @xmath2124 where @xmath27 has at most @xmath2201 neighbours .",
    "thus we can choose a matching pair @xmath155 such that @xmath27 has at least @xmath2201 neighbours in @xmath2124 , so at least @xmath2202 neighbours in @xmath2179 by property 3 .",
    "since @xmath2116 is @xmath2161-regular , @xmath2203 has density at least @xmath205 , so by kvari - ss - turn we can choose a copy of @xmath2204 with @xmath2205 vertices in @xmath2177 and @xmath2132 vertices in @xmath2206 .",
    "adding @xmath27 we obtain a copy of @xmath2101 covering @xmath27 .",
    "thus we can cover @xmath2137 , only using vertices from @xmath2183 , and by avoiding heavy clusters we never cover more than @xmath2207 vertices in any cluster . for each matching edge @xmath155 ,",
    "the uncovered part of @xmath2123 is @xmath2208-regular , and has minimum degree at least @xmath2209 by property 4 .",
    "thus it is super - regular , and as described above we can complete the proof via the blow - up lemma .      in order to apply regularity methods to @xmath2-graphs",
    "we need a result analogous to the szemerdi regularity lemma , decomposing an arbitrary @xmath2-graph into a bounded number of @xmath2-complexes , most of which are regular .",
    "this was achieved by frankl and rdl @xcite , but as we mentioned in section [ 3reg ] , in this sparse setting the parameters are not suitable for our blow - up lemma .",
    "we will instead use the regular approximation lemma , which provides a dense setting for an approximation of the original @xmath2-graph . for @xmath2-graphs",
    "this result is due to nagle , rdl and schacht @xcite and in general to rdl and schacht @xcite .",
    "a similar result was proved by tao @xcite . for simplicity",
    "we will just discuss the lemma for @xmath2-graphs , although the statement for @xmath0-graphs is very similar .",
    "note also that we will formulate the results using the notation established in this paper .",
    "we start with a general definition .",
    "[ def - partition ] suppose that @xmath2210 is an @xmath33-partite set .",
    "a _ partition @xmath0-system _",
    "@xmath461 on @xmath35 is a collection of partitions @xmath2211 of @xmath2212 for every @xmath2213}{\\le k}$ ] .",
    "we say that @xmath461 is a _ partition @xmath0-complex _ if every two sets @xmath2214 in the same cell of @xmath2211 are _ strongly equivalent _ , defined as in @xcite to mean that @xmath2215 and @xmath2216 belong to the same cell of @xmath2217 for every @xmath2218 .",
    "given @xmath2219 we write @xmath2220 for the cell in @xmath2211 containing @xmath23 .",
    "we write @xmath2221 when there is no danger of ambiguity . for any @xmath546",
    "we write @xmath2222 and say that @xmath2223 _ lies under _ or is _ consistent _ with @xmath2224 .",
    "we define the _ cell complex _ @xmath2225 .",
    "we can use a partition @xmath224-complex to decompose a @xmath2-graph as follows .",
    "[ def - partition2 ] suppose @xmath34 is an @xmath33-partite @xmath2-graph on @xmath35 and @xmath461 is a partition @xmath224-complex on @xmath35 .",
    "we define @xmath2226 $ ] to be the coarsest partition @xmath2-complex refining @xmath461 and the partitions @xmath2227 for @xmath812 .",
    "we make a few remarks here to explain the structures defined in definitions [ def - partition ] and [ def - partition2 ] .",
    "the partition @xmath224-complex @xmath461 has vertex partitions and graph partitions .",
    "the vertex partitions @xmath2228 are of the form @xmath2229 for some @xmath2230 , for @xmath62 .",
    "the graph partitions @xmath2231 are of the form @xmath2232 for some @xmath2233 , for @xmath2234 . by strong equivalence , any bipartite graph @xmath2235 is spanned by some pair @xmath2236 : it can not cut across several such pairs .",
    "we also say that @xmath2237 and @xmath2238 lie under or are consistent with @xmath2235 .",
    "a choice of @xmath2239 , singleton parts @xmath2237 , @xmath2238 , @xmath2240 and graph parts @xmath2235 , @xmath2241 , @xmath2242 such that the singleton parts are consistent with the graph parts is called a _ triad_.",
    "( this terminology is used by rdl et al . )",
    "if we consider the set of triangles in a triad , then we obtain a partition of the @xmath33-partite triples of @xmath35 as we range over all triads .",
    "another way to describe this is to say as in @xcite that @xmath2214 are _ weakly equivalent _ when @xmath2243 are in the same cell of @xmath2217 for every strict subset @xmath2244 .",
    "let @xmath2245 denote the partition of @xmath2212 into weak equivalence classes .",
    "then @xmath2246 is the partition of @xmath2247 by triads as described above . the partition @xmath2-complex @xmath2226 $ ] has two cells for each triad : for each cell @xmath2096 of @xmath2246 we have cells @xmath2248 and @xmath2249 of @xmath2226_{ijk}$ ] . for embeddings in @xmath34 only the cells @xmath2248 are of interest , but we include both for symmetry in the definition .",
    "we make the following further definitions .",
    "[ def - partition3 ] suppose @xmath461 is a partition @xmath0-complex .",
    "we say that @xmath461 is _ equitable _ if for every @xmath2250 the @xmath2251-cells all have equal size , i.e.  @xmath2252 for every @xmath2253 , @xmath2254 , @xmath2255}{k'}$ ] .",
    "we say that @xmath461 is _ @xmath2256-bounded _ if @xmath2257 for every @xmath92 .",
    "we say that @xmath461 is _ @xmath43-regular _ if every cell complex @xmath2258 is @xmath43-regular .",
    "we say that @xmath33-partite @xmath2-graphs @xmath392 and @xmath34 on @xmath35 are _",
    "@xmath1106-close _ if @xmath2259 for every @xmath2213}{3}$ ] .",
    "here @xmath2260 denotes symmetric difference .",
    "the following is a slightly modified version of the regular approximation lemma ( * ? ? ?",
    "* theorem 14 ) .",
    ", so technically we are using a simplified form of ( * ? ? ?",
    "* lemma 25 ) , ( ii ) a weaker definition of ` equitable ' is given in @xcite , that the singleton cells have equal sizes , but in fact they prove their result with the definition used here , and ( iii ) we omit the parameter @xmath864 in our statement , as by increasing @xmath33 we can ensure that all but at most @xmath2261 edges are @xmath33-partite . ] the reader should note the key point of the constant hierarchy : although the closeness of approximation @xmath1106 may be quite large ( it will satisfy @xmath2262 , the regularity parameter @xmath43 will be much smaller .",
    "( rdl - schacht @xcite ) [ ral ] suppose integers @xmath2263 and reals @xmath2264 satisfy @xmath2265 and that @xmath392 is an @xmath33-partite @xmath2-graph on an equitable @xmath33-partite set of @xmath31 vertices @xmath36 , where @xmath2266 .",
    "then there is an @xmath2256-bounded equitable @xmath33-partite partition @xmath224-complex @xmath461 on @xmath35 and an @xmath33-partite @xmath2-graph @xmath34 on @xmath35 that is @xmath1106-close to @xmath392 such that @xmath2226 $ ] is @xmath43-regular .",
    "as we mentioned earlier , @xmath43-regular @xmath2-complexes are useful because of a counting lemma that allows one to estimate the number of copies of any fixed complex @xmath519 , using a suitable product of densities .",
    "first we state a counting lemma for tetrahedra , analogous to the triangle counting lemma in [ eq : tri ] .",
    "suppose @xmath2267 and @xmath34 is an @xmath43-regular @xmath75-partite @xmath2-complex on @xmath2268 with all relative densities @xmath2269 .",
    "then @xmath2270}$ ] is the set of tetrahedra in @xmath34 .",
    "we have the estimate @xmath2271 } ) : = \\frac{|g^*_{[4]}|}{|v_1||v_2||v_3||v_4| } = ( 1\\pm\\gamma)\\prod_{s{\\subseteq}[4]}d_s(g).\\ ] ] this follows from a result of kohayakawa , rdl and skokan ( * ? ? ?",
    "* theorem 6.5 ) : they proved a counting lemma for cliques in regular @xmath0-complexes",
    ".    more generally , suppose @xmath519 is an @xmath33-partite @xmath2-complex on @xmath2272 and @xmath34 is an @xmath33-partite @xmath2-complex on @xmath36 .",
    "we let @xmath2273 denote the set of all @xmath33-partite maps from @xmath258 to @xmath35 : these are maps @xmath2274 such that @xmath2275 for each @xmath206 .",
    "we say that @xmath458 is a _ homomorphism _ if @xmath2276 . for @xmath342",
    "$ ] we let @xmath2277 also denote the characteristic function of @xmath423 , i.e.  @xmath2278 is @xmath26 if @xmath2279 and @xmath147 otherwise .",
    "the following general dense counting lemma from @xcite gives an estimate for _ partite homomorphism density _",
    "@xmath2280 of @xmath519 in @xmath34 , by which we mean the probability that a random @xmath33-partite map from @xmath258 to @xmath35 is a homomorphism from @xmath519 to @xmath34 .",
    "we use the language of homomorphisms for convenient notation , but note that we can apply the same estimate to the density of embedded copies of @xmath519 in @xmath34 , as most maps are injective .",
    "( rdl - schacht @xcite , see theorem 13)[3count ] to have more than one vertex : this version can easily be deduced from the case @xmath2281 , @xmath62 by defining an auxiliary complex with the appropriate number of copies of each @xmath38 ( see @xcite ) . ]",
    "suppose @xmath2282 , that @xmath519 and @xmath34 are @xmath33-partite @xmath2-complexes with vertex sets @xmath2272 and @xmath36 respectively , that @xmath2283 , and @xmath34 is @xmath43-regular with all densities @xmath2269 .",
    "then @xmath2284 = ( 1 \\pm \\gamma ) \\prod_{a \\in j } d_a(g).\\ ] ]",
    "suppose that we want to embed some bounded degree @xmath2-graph @xmath1 in another @xmath2-graph @xmath392 on a set @xmath35 of @xmath31 vertices , where @xmath31 is large .",
    "we fix constants with hierarchy @xmath2285 .",
    "we delete at most @xmath2286 vertices so that the number remaining is divisible by @xmath2286 , take an equitable @xmath33-partition @xmath36 , and apply theorem [ ral ] to obtain an @xmath2256-bounded equitable @xmath33-partite partition @xmath224-complex @xmath461 on @xmath35 and an @xmath33-partite @xmath2-graph @xmath34 on @xmath35 that is @xmath1106-close to @xmath392 such that @xmath2226 $ ] is @xmath43-regular . since @xmath34 is so regular , our strategy for embedding @xmath1 in @xmath392 will be to think about embedding it in @xmath34 , subject to the rule that the edges @xmath394 are marked as ` forbidden ' . recall that we refer to the pair @xmath407 as a marked complex .",
    "to apply the @xmath2-graph blow - up lemma ( theorem [ 3blowup ] ) we need the following analogue of lemma [ 2del ] , showing that we can enforce super - regularity by deleting a small number of vertices .",
    "[ 3del ] suppose that @xmath2287 , and @xmath407 is a marked @xmath33-partite @xmath2-complex on @xmath2288 such that when defined @xmath645 is @xmath2289-regular , @xmath661 and @xmath643 if @xmath644 .",
    "then we can delete at most @xmath2290 vertices from each @xmath382 , @xmath62 to obtain an @xmath2291-super - regular marked complex @xmath2292 .",
    "* the idea is to delete vertices which cause failure of the regularity , density or marking conditions in definition [ def-3super ] ( super - regularity ) .",
    "however , some care must be taken to ensure that this process terminates .",
    "there are three steps in the proof : firstly , we identify sets @xmath2293 of vertices in @xmath382 that cause the conditions on marked edges to fail ; secondly , we identify sets @xmath2294 of vertices in @xmath382 that either cause the regularity and density conditions to fail or have atypical neighbourhood in some @xmath2295 ; thirdly , we delete the sets @xmath2293 and @xmath2294 and show that what remains is a super - regular pair .",
    "* fix @xmath62 .",
    "we will identify a set @xmath2293 of vertices in @xmath382 that are bad with respect to the conditions on marked edges in the definition of super - regularity . for any @xmath2296 such that @xmath2297 is defined we let @xmath2298 be the set of vertices @xmath621 for which @xmath2299 . for any triple @xmath23 such that @xmath645 is defined and subcomplex @xmath349 of @xmath2300 such that @xmath2301 is defined for all @xmath2302 we let @xmath2303 be the set of vertices @xmath621 for which @xmath2304 .",
    "let @xmath2293 be the union of all such sets @xmath2298 and @xmath2303 .",
    "we will show that @xmath2305 .",
    "first we bound the sets @xmath2298 .",
    "let @xmath2306 be the set of vertices @xmath621 such that we do not have @xmath2307 and @xmath626 is @xmath43-regular with @xmath2308 for @xmath2309 .",
    "since @xmath2297 is @xmath2289-regular we have @xmath2310 by lemma [ 3average ] and lemma [ 3neighbour1 ] .",
    "therefore @xmath2311 .",
    "we also have an upper bound @xmath2312 by the hypotheses of the lemma .",
    "this gives @xmath2313 .",
    "now we bound @xmath2303 .",
    "define @xmath2314 to equal @xmath2306 if @xmath2315 or @xmath2316 if @xmath2317 .",
    "if @xmath2318 then by regular restriction @xmath2319 is @xmath168-regular and @xmath2320 is @xmath2321 if @xmath2322 or @xmath2323 otherwise . by lemma [ 3absolute ]",
    "we have @xmath2324 and @xmath2325 .",
    ". then @xmath2327 for any @xmath460 , let @xmath941 be the set of @xmath621 such that @xmath2328 for all @xmath2322 .",
    "let @xmath945 be the set of @xmath460 such that we do not have @xmath2329 .",
    "then @xmath2330 by lemma [ 3technical ] .",
    "now @xmath2331 , which counts all pairs @xmath2332 with @xmath2333 and @xmath2334 , so @xmath2335 combining this with the lower bound on @xmath1302 we obtain @xmath2336 since @xmath2337 and @xmath2338 we deduce that @xmath2339 .    in total",
    "we deduce that @xmath2340 .",
    "* next we come to the regularity and density conditions .",
    "recall that @xmath625 is @xmath43-regular with @xmath2308 for @xmath2309 when @xmath2341 , where @xmath2310 .",
    "now suppose @xmath37 is defined and let @xmath2342 be the set of @xmath621 such that @xmath2343 . we claim that @xmath2344 . to prove this",
    ", we can assume that @xmath2345 , otherwise @xmath2342 is empty . since @xmath37 is @xmath2289-regular , @xmath2346 $ ] is @xmath43-regular by lemma [ 2restrict ] .",
    "then the bound on @xmath2342 follows from lemma [ 2neighbour ] .",
    "let @xmath2294 be the union of all the sets @xmath2306 and @xmath2342 .",
    "then @xmath2347 , say",
    ".    * step 3 .",
    "* now we show that deleting @xmath2348 from @xmath382 for every @xmath62 gives an @xmath2291-super - regular marked complex @xmath2292 . to see this , note first that the above upper bounds on @xmath2293 and @xmath2294 show that we have deleted at most @xmath2349-proportion of each @xmath382 . since @xmath34 is @xmath2289-regular with @xmath643 if @xmath644 , regular restriction implies that @xmath2350 is @xmath43-regular with @xmath2351 if @xmath644 and @xmath2352 for @xmath2353 .",
    "this gives property ( i ) of super - regularity .",
    "now suppose @xmath37 is defined and @xmath2354 .",
    "then @xmath2355 and @xmath2356 since @xmath2357 .",
    "since @xmath2358 and @xmath2359 we have @xmath2360 next suppose that @xmath2297 is defined and @xmath2354 .",
    "then @xmath2361 and @xmath2362 is @xmath43-regular , so @xmath2363 and @xmath2364 is @xmath82-regular by regular restriction .",
    "also , since @xmath2365 we have @xmath2366 . since @xmath2367 we have @xmath2368 .",
    "this gives property ( ii ) of super - regularity .",
    "finally , consider any triple @xmath23 such that @xmath645 is defined and subcomplex @xmath349 of @xmath2300 such that @xmath2301 is defined for all @xmath2302 .",
    "since @xmath2369 , @xmath2319 is @xmath168-regular and @xmath2320 is @xmath2321 if @xmath2322 or @xmath2323 otherwise . for @xmath2370",
    ", we have @xmath2371 if @xmath2372 or @xmath2373 if @xmath2374 . then by regular restriction , for @xmath1752 with @xmath546 , @xmath2375 is @xmath82-regular with @xmath2376 equal to @xmath2377 if @xmath2322 or @xmath2378 otherwise .",
    "also , by lemma [ 3absolute ] we have @xmath2379 since @xmath2380 we have @xmath2381 , so @xmath2382 .",
    "this gives property ( iii ) of super - regularity , so the proof is complete .    for some applications it may be important to preserve exact equality of the part sizes , i.e.  start with @xmath2383 for @xmath2353 and delete exactly @xmath2384 vertices from each @xmath382 to obtain super - regularity",
    "this can be achieved by deleting the sets @xmath2293 and @xmath2294 of lemma [ 3del ] , together with some randomly chosen additional vertices to equalise the numbers . with high probability these additional vertices intersect all vertex neighbourhoods in approximately the correct proportion , and",
    "then the same proof shows that the resulting marked complex is super - regular .",
    "we omit the details .    for applications",
    "it is also useful to know that super - regularity is preserved when one restricts to subsets that are both large and have large intersection with every vertex neighbourhood .",
    "[ 3super - restrict]*(super - regular restriction ) * suppose @xmath2385 and @xmath407 is a @xmath642-super - regular marked @xmath33-partite @xmath2-complex on @xmath2386 with @xmath1085 for @xmath2353 .",
    "suppose also that we have @xmath44 for @xmath62 , write @xmath2387 , @xmath2388 $ ] , @xmath2389 $ ] , and that @xmath2390 and @xmath2391 whenever @xmath2392 , @xmath2393 and @xmath37 is defined .",
    "then @xmath2394 is @xmath2395-super - regular .",
    "* proof . *",
    "the argument is similar to step 3 of the previous lemma .",
    "suppose @xmath652 , @xmath645 is defined , @xmath2396 , @xmath2397 . by definition [ def-3super](i ) for @xmath407 , @xmath589 is @xmath43-regular with @xmath2398 for @xmath2399 , @xmath2400 . by assumption",
    "we have @xmath2401 for @xmath2370 , so regular restriction implies that @xmath2402 is @xmath82-regular with @xmath2403 for @xmath2399 , @xmath2400 .",
    "this gives definition [ def-3super](i ) for @xmath2394 .",
    "similarly , by definition [ def-3super](ii ) for @xmath407 , writing @xmath2315 , @xmath2404 is @xmath82-regular with @xmath2405 for @xmath2406 and @xmath2407 . by assumption",
    "we have @xmath2408 and @xmath2409 , so regular restriction implies that @xmath2410 is @xmath2411-regular with @xmath2412 for @xmath2406 .",
    "also @xmath2413 so @xmath2414 .",
    "this gives definition [ def-3super](ii ) for @xmath2394 .",
    "finally , consider any triple @xmath23 such that @xmath645 is defined and subcomplex @xmath349 of @xmath2300 such that @xmath2301 is defined for all @xmath2302 . by definition [ def-3super](iii ) for @xmath407 , @xmath651 , @xmath2319 is @xmath82-regular and @xmath2320 is @xmath2415 if @xmath2322 or @xmath2416 otherwise . by assumption @xmath2417 is @xmath2418 if @xmath2372 or @xmath2408 if @xmath2374 .",
    "then by regular restriction , for @xmath1752 with @xmath546 , @xmath2419 is @xmath2411-regular with @xmath2420 equal to @xmath2421 if @xmath2322 or @xmath2422 otherwise .",
    "also , by lemma [ 3absolute ] we have @xmath2423",
    ". therefore @xmath2424 .",
    "this gives definition [ def-3super](iii ) for @xmath2394 .",
    "now we will present a ` black box ' reformulation that goes straight from regularity to embedding , bypassing super - regularity and the blow - up lemma .",
    "this more accessible form of our results will be more convenient for future applications of the method .",
    "first we give a definition .",
    "[ def-3robust]*(robustly universal ) * suppose @xmath519 is an @xmath33-partite @xmath2-complex on @xmath2425 with @xmath2426 for @xmath2353 .",
    "we say that @xmath519 is _",
    "@xmath2427-robustly @xmath72-universal _ if whenever    * @xmath2428 with @xmath2429 such that @xmath2430 , @xmath2431 $ ] satisfy @xmath2432 whenever @xmath652 , @xmath2433 is defined , @xmath2396 , @xmath2434 , * @xmath374 is an @xmath33-partite @xmath2-complex on @xmath2435 of maximum degree at most @xmath72 with @xmath2436 for @xmath62 ,    then @xmath2437 contains a copy of @xmath374 , in which vertices of @xmath2438 correspond to vertices of @xmath2439 for @xmath62 .",
    "now we show that one can delete a small number of vertices from a regular complex with a small number of marked triples to obtain a robustly universal pair .",
    "[ 3robust ] suppose @xmath2440 , that @xmath34 is an @xmath43-regular @xmath33-partite @xmath2-complex on @xmath2386 with @xmath643 for @xmath644 when defined and @xmath2441 for @xmath62 , and @xmath2442 with @xmath661 when defined .",
    "then we can delete at most @xmath2290 vertices from @xmath382 for @xmath62 to obtain @xmath2350 and @xmath2443 so that    * @xmath2444 and @xmath2445 whenever @xmath652 , @xmath645 is defined , @xmath2396 , @xmath2397 , and * @xmath2446 is @xmath2427-robustly @xmath72-universal .",
    "* define additional constants with @xmath2447 .",
    "applying lemma [ 3del ] , we can delete at most @xmath2290 vertices from each @xmath382 to obtain an @xmath2448-super - regular marked complex @xmath2292 on some @xmath2449 .",
    "we will show that @xmath2450 is @xmath2451-robustly @xmath72-universal . to see this suppose @xmath652 , @xmath645 is defined , @xmath2396 , @xmath2452 . by definition [ def-3super](i ) and",
    "lemma [ 3absolute ] we have @xmath2453 .",
    "writing @xmath2315 , by definition [ def-3super](ii ) we have @xmath2454 so @xmath2455 .",
    "now suppose that @xmath2456 and @xmath374 are given as in definition [ def-3robust ] applied to @xmath519 .",
    "then @xmath2457,m^\\sharp[v'])$ ] is @xmath2458-super - regular by lemma [ 3super - restrict ] .",
    "applying theorem [ 3blowup ] , @xmath2459 $ ] contains a copy of @xmath374 , in which vertices of @xmath2438 correspond to vertices of @xmath49 for @xmath62 .      in this subsection",
    "we illustrate the @xmath2-graph blow - up lemma by proving the following generalisation of theorem [ 2pack ] to packings of tripartite @xmath2-graphs .",
    "[ 3pack ] for any @xmath2-partite @xmath2-graph @xmath52 in which not all part sizes are equal and @xmath2460 there is a real @xmath42 and positive integers @xmath2093 such that if @xmath34 is a @xmath2-graph on @xmath2461 vertices @xmath35 such that every vertex @xmath216 has degree @xmath2462 and every pair of vertices @xmath2463 has degree @xmath2464 then @xmath34 contains an @xmath52-packing that covers all but at most @xmath2096 vertices .",
    "we start by recording some auxiliary results that will be used in the proof .",
    "first we need a result of erds on the number of copies of a @xmath0-partite @xmath0-graph .",
    "[ erdos ] ( erds @xcite ) for any @xmath2465 and @xmath0-partite @xmath0-graph @xmath52 on @xmath11 vertices there is @xmath2466 so that if @xmath1 is a @xmath0-graph on @xmath31 vertices with at least @xmath2467 edges then @xmath1 contains at least @xmath2468 copies of @xmath52 .    next we need azuma s inequality on martingale deviations .",
    "[ azuma ] ( azuma @xcite ) suppose @xmath1345 is a martingale , i.e.  a sequence of random variables satisfying @xmath2469 , and that @xmath1347 , @xmath1348 , for some constants @xmath1349 . then for any @xmath1350 , @xmath2470    we also need the following theorem of kahn , which is a linear programming generalisation of a theorem of pippenger on matchings in regular hypergraphs with small codegrees .",
    "( a _ matching _ is a set of vertex - disjoint edges . )",
    "suppose @xmath1 is a @xmath0-graph and @xmath2471 .",
    "write @xmath2472 and @xmath2473 for @xmath2474 .",
    "let @xmath2475 .",
    "say that @xmath97 is a _ fractional matching _ if @xmath2476 for every @xmath2477 .",
    "[ kahn ] ( kahn @xcite ) for any @xmath42 there is @xmath2478 so that if @xmath1 is a @xmath0-graph on @xmath31 vertices and @xmath97 is a fractional matching of @xmath1 with @xmath2479 then @xmath1 has a matching of size at least @xmath2480 .",
    "now we will prove theorem [ 3pack ] .",
    "we may suppose that @xmath52 is complete @xmath2-partite , say @xmath2481 on @xmath2482 .",
    "we introduce parameters with the hierarchy @xmath2483 we delete at most @xmath2286 vertices of @xmath34 so that the number remaining is divisible by @xmath2286 , take an equitable @xmath33-partition @xmath36 , and apply theorem [ ral ] to obtain an @xmath2256-bounded equitable @xmath33-partite partition @xmath224-complex @xmath461 on @xmath35 and an @xmath33-partite @xmath2-graph @xmath777 on @xmath35 that is @xmath1106-close to @xmath34 such that @xmath2484 $ ] is @xmath43-regular .",
    "since @xmath461 is @xmath2256-bounded , for every graph @xmath2485 with @xmath2486 , the densities @xmath2487 , @xmath2488 and @xmath2489 are all at least @xmath2490 .",
    "we refer to singleton parts in @xmath461 as _ clusters_. let @xmath2491 be the size of each cluster . by means of an initial partition we may also assume that @xmath2492 . let @xmath2493 be the edges marked as ` forbidden ' .",
    "next we define the _",
    "reduced @xmath2-graph _ @xmath2125 , a weighted @xmath2-graph in which vertices correspond to clusters and triples correspond to cells of @xmath2484 $ ] that are useful for embedding , in that they have large density and few marked edges .",
    "let @xmath2494 be an @xmath33-partite set with @xmath2495 for @xmath62 , where @xmath2496 and @xmath2497 .",
    "we identify @xmath2294 with @xmath2498 $ ] , although it is to be understood that @xmath2294 and @xmath2499 are disjoint for @xmath2500 , and label the cells of @xmath2228 as @xmath2501 .",
    "we identity an @xmath33-partite triple @xmath2502 with @xmath2503 , where @xmath2504 .",
    "write @xmath2505 and @xmath2506 $ ] .",
    "we say that @xmath23 is an edge of @xmath2125 with _ weight _ @xmath2507_s|/n$ ] if @xmath2508_s| > d_3|k(s')_s|$ ] and @xmath2509_s| < \\sqrt{\\nu}|k(s')_s|$ ] .",
    "we define the _ weighted degree _",
    "@xmath2510 of a vertex @xmath1355 in @xmath2125 to be the sum of @xmath2511 over all @xmath2512 .",
    "we will delete a small number of vertices from @xmath2125 to obtain a @xmath2-graph @xmath2513 that is almost regular with respect to weighted degrees .",
    "for any @xmath2514}{3}$ ] and @xmath2515 we define @xmath2516_s| > \\sqrt{\\nu}|k(s')_s|\\ } \\mbox { and } z_{i , a } = \\{j \\in z_i : |b^j_{i , a}| >",
    "\\nu^{1/4}a_1 ^ 2\\}.\\ ] ] then @xmath2517| > \\sum_{j \\in z_{i , a } } \\sum_{s \\in b^j_{i , a } }   \\sqrt{\\nu}|k(s')_s| > |z_{i , a}| \\cdot \\nu^{1/4}a_1 ^ 2 \\cdot \\sqrt{\\nu}n_1 ^ 3.\\ ] ] since @xmath777 is @xmath1106-close to @xmath34 ( see definition [ def - partition3 ] ) we have @xmath2518 , so @xmath2519 .",
    "let @xmath2520 be obtained by deleting all sets @xmath2521 from @xmath1671 and let @xmath2522 $ ] .",
    "since @xmath2523 we have @xmath2524 for @xmath2353 .",
    "now we estimate the weighted degrees @xmath2525 in @xmath2513 .",
    "suppose @xmath2526 .",
    "we have @xmath2527_s|$ ] .",
    "there are at most @xmath2528 triples @xmath2529 containing @xmath1355 , so at most @xmath2530 triples in @xmath2531_s$ ] for such @xmath23 with @xmath2508_s| < d_3|k(s')_s|$ ] .",
    "there are at most @xmath2532 triples @xmath2533 with @xmath2534 , so at most @xmath2535 triples in @xmath2531_s$ ] for such @xmath23 .",
    "since @xmath2526 we have @xmath2536 , so there are at most @xmath2537 triples in @xmath2531_s$ ] for triples @xmath23 with @xmath2534 and @xmath2509_s| > \\sqrt{\\nu}|k(s')_s|$ ]",
    ". finally , there are at most @xmath2538 triples that are not @xmath33-partite . altogether , at most @xmath2539 triples contributing to @xmath2525 do not belong to @xmath2531_s$ ] with @xmath2512 .",
    "since @xmath2462 for all @xmath2540 and @xmath2541 we have @xmath2542_s| =   n^{-1 } \\sum_{v \\in c_{i , j } } |g(v)| \\pm 3d_3/2 = c_1 \\pm 2d_3.\\ ] ]    define @xmath2543 by @xmath2544 .",
    "then @xmath2545 for @xmath2546 , so @xmath97 is a fractional matching .",
    "we have @xmath2547 also , the trivial bound @xmath2548 gives @xmath2549 .",
    "applying theorem [ kahn ] , there is a matching in @xmath2513 of size at least @xmath2550 , i.e.  at most @xmath2551 vertices are not covered by the matching .",
    "we can use an edge @xmath23 of the matching as follows . consider the partition @xmath2552 of @xmath2553 by weak equivalence , i.e.  we have a cell of @xmath2552 corresponding to each triad of consistent bipartite graphs indexed by @xmath23 .",
    "the cells lying over @xmath2554 give a partition of @xmath2555 , which we denote by @xmath2556 . since @xmath461 is",
    "@xmath2256-bounded we have @xmath2557 .",
    "furthermore , since @xmath461 is equitable , the triangle counting lemma ( [ eq : tri ] ) gives @xmath2558 for any @xmath2559 .",
    "now at most @xmath2560 triples of @xmath2531_s$ ] can lie in cells @xmath2561 with @xmath2562 ; otherwise we would have at least @xmath2563 such cells , giving @xmath2509| \\ge ( 1-{\\epsilon}')2\\nu^{1/4}a_s \\cdot \\nu^{1/4}(1-{\\epsilon}')|k(s')_s|/a_s > ( 1 - 3{\\epsilon}')2\\sqrt{\\nu}|k(s')_s|$ ] , contradicting @xmath2564 .",
    "since @xmath2508_s| > d_3|k(s')_s|$ ] and @xmath2565 , more than @xmath2566 triples of @xmath2531_s$ ] lie in cells @xmath2561 with @xmath2567 , so we can choose such a cell @xmath2561 with @xmath2568 .",
    "fix such a cell @xmath2561 for each matching edge @xmath23 and let @xmath2569 be the associated cell complex of @xmath2484 $ ] , i.e.  @xmath2570 and for @xmath572 , @xmath2571 is the cell of @xmath2572 underlying @xmath2561",
    ". then @xmath2569 is @xmath43-regular .",
    "also , @xmath2573 , so writing @xmath2574 we have @xmath2575 . at this stage , if we were satisfied with an @xmath52-packing covering all but @xmath63 vertices , we could just repeatedly remove copies of @xmath52 from each @xmath2576 . in @xmath2569 and",
    "the ` extension lemma ' to bound the number of copies of @xmath52 using an edge in @xmath2577 .",
    "alternatively one could start the proof with the ` regular decomposition lemma ' instead of the regular approximation lemma , then find @xmath52 using the sparse counting lemma .",
    "] however , we want to cover all but at most @xmath2096 vertices , so we will apply the blow - up lemma , using the black box form in the previous subsection . by lemma [ 3robust ]",
    "we can delete at most @xmath2578 vertices from each cluster so that each @xmath2579 becomes a pair @xmath2580 such that @xmath2581 is @xmath2582-robustly @xmath2583-universal .",
    "now we gather together all the removed vertices into an exceptional set @xmath2121 .",
    "this includes at most @xmath2286 vertices removed at the start of the proof , at most @xmath2584 vertices in parts indexed by @xmath2585 , at most @xmath2586 vertices in parts not covered by the matching , and at most @xmath2587 vertices deleted in making the pairs robustly universal",
    ". therefore @xmath2588 . for convenient notation",
    "we denote the clusters of @xmath2589 by @xmath2590 , @xmath2591 , @xmath2592 .",
    "thus @xmath2121 and @xmath2590 , @xmath2591 , @xmath2592 for matching edges @xmath23 partition the vertex set of @xmath34 . to cover the vertices of @xmath2121 by copies of @xmath52 we need the following claim .",
    "* claim . *",
    "any vertex @xmath216 belongs to at least @xmath2593 copies of @xmath52 in @xmath34 .",
    "* let @xmath2594 be the set of all pairs @xmath2595 such that @xmath2596 and @xmath2597 .",
    "there are @xmath2598 choices for @xmath2599 , and for each @xmath2599 the minimum degree property gives at least @xmath2600 choices for @xmath152 .",
    "therefore @xmath2601 .",
    "let @xmath2602 be the set of all @xmath2603 such that there are at least @xmath2604 pairs @xmath2596 with @xmath2605 .",
    "then @xmath2606 , so @xmath2607 for each @xmath152 in @xmath2602 , since @xmath2608 , theorem [ erdos ] implies that the sets @xmath2596 with @xmath2605 span at least @xmath2609 copies of @xmath2610 .",
    "each of these gives a copy of @xmath52 containing @xmath216 when we add @xmath2611 .",
    "summing over @xmath152 in @xmath2602 and dividing by @xmath2612 ( a crude estimate for overcounting ) we obtain ( since @xmath2613 ) at least @xmath2593 copies of @xmath52 containing @xmath216 .",
    "next we randomly partition each set @xmath2614 as @xmath2615 , each vertex being placed independently into either class with probability @xmath2582 .",
    "the reason for this partition is that , as in the proof of theorem [ 2pack ] , we will be able to use the sets @xmath2616 when covering the vertices in @xmath2121 , whilst preserving the vertices in @xmath2617 so as to maintain super - regularity .",
    "theorem [ azuma ] gives the following properties with high probability :    1 .",
    "@xmath2618 and @xmath2619 are @xmath2620 for every @xmath23 and @xmath1355 , 2 .   for every @xmath23 and @xmath1355 and each vertex @xmath2621 , letting @xmath2622 denote the singleton classes of @xmath2623 , @xmath2624 and @xmath2625 are @xmath2626 for @xmath2627 , and 3 .",
    "for any vertex @xmath216 of @xmath34 , there are at least @xmath2628 copies of @xmath52 in which all vertices , except possibly @xmath216 , are in @xmath2629 .    in fact",
    ", the first two properties are simple applications of chernoff bounds ( in which the martingale is just a sum of independent variables ) . for the third property we use a vertex exposure martingale .",
    "fix @xmath216 and let @xmath1671 be the random variable which is the number of copies of @xmath52 in which all vertices , except possibly @xmath216 , are in @xmath2629 . since @xmath2588 , the claim gives @xmath2630 .",
    "order the vertices of @xmath2631 as @xmath2632 , where @xmath2633 , and define the random variable @xmath2294 as the conditional expectation of @xmath1671 given whether @xmath2634 is in @xmath2616 or @xmath2617 for @xmath2635 . then @xmath2636 and @xmath2637 .",
    "also @xmath2638 , using a crude upper bound on the number of copies of @xmath52 containing @xmath216 and some other vertex @xmath2639 .",
    "now by theorem [ azuma ] we have @xmath2640 .",
    "now we cover @xmath2121 by the following greedy procedure .",
    "suppose we are about to cover a vertex @xmath2641 .",
    "we consider a cluster to be _ heavy _ if we have covered more than @xmath2642 of its vertices . since @xmath2643 we have covered at most @xmath2644 vertices by copies of @xmath52",
    ", so there are at most @xmath2645 heavy clusters . as shown above ,",
    "there at least @xmath2628 copies of @xmath52 that we can use to cover @xmath216 . at",
    "most @xmath2646 of these use a heavy cluster , so we can cover @xmath2121 while avoiding heavy clusters .",
    "next we restrict to the vertices not already covered by the copies of @xmath52 covering @xmath2121 , where we will use robust universality to finish the packing . recall that each @xmath2647 is @xmath2582-robustly @xmath2583-universal . by properties ( 1 ) and ( 2 ) of the partitions @xmath2648 , on restricting to the uncovered vertices we obtain @xmath2649 that satisfies conditions ( i ) in definition [ def-3robust ] .",
    "( property ( i ) of theorem [ 3robust ] and @xmath2650 shows that the @xmath2651 errors are negligible . )",
    "also , any @xmath52-packing has maximum degree less than @xmath2583 , so satisfies condition ( ii ) in definition [ def-3robust ] .",
    "thus we can assume that @xmath2649 is complete , in that we can embed any @xmath52-packing in @xmath2649 , subject only to the constraints given by the sizes of the uncovered parts of each cluster .",
    "now it is not hard to finish the proof with a slightly messy ad hoc argument , but we prefer to use the elegant argument of kmlos ( * ? ? ?",
    "* lemma 12 ) .",
    "denote the classes of @xmath2649 by @xmath2652 . since we avoided heavy clusters we have @xmath2653 for @xmath403 .",
    "let @xmath2654 ^ 3 : \\alpha_1 \\le \\alpha_2 \\le \\alpha_3 , \\sum_{i=1}^3 \\alpha_i = 1\\}$ ] .",
    "we can associate a ` class vector ' @xmath2655 to a @xmath2-partite set @xmath413 by @xmath2656 , for some permutation @xmath2657 chosen to put the classes in increasing order by size . for @xmath2658 write @xmath2659 if @xmath2660 and @xmath2661 .",
    "since the classes of @xmath52 are not all of equal size and @xmath2662 we have @xmath2663 . by a theorem of hardy , littlewood and plya , this implies that there is a doubly stochastic matrix @xmath395 such that @xmath2664 . by birkhoff",
    "s theorem @xmath395 is a convex combination of permutation matrices @xmath2665 , @xmath2666 .",
    "thus we can write the class vector of @xmath519 as @xmath2667 , which is a convex combination of the permutations of the class vector of @xmath52 .",
    "in fact , although the constant is not important , since @xmath2668 has dimension @xmath2 , we can apply carathodory s theorem to write @xmath2669 , @xmath2670 as a convex combination using only @xmath2 permutations of @xmath2671 .",
    "finally , to pack copies of @xmath52 in @xmath2649 we can use @xmath2672 copies of @xmath52 permuted according to @xmath961 , for @xmath403 . at most @xmath2673 vertices of any @xmath2674",
    "are left uncovered because of the rounding , so in total at most @xmath2675 vertices will remain uncovered .",
    "this completes the proof .    as for theorem [ 2pack ]",
    ", we needed to assume that not all part sizes of @xmath52 are equal and we could not expect to cover all vertices .",
    "some assumption on the degrees of pairs was convenient , as without it a nearly regular @xmath2-graph can have some vertices that do not belong to any copies of @xmath52 .",
    "for example , let @xmath2676 be a tripartite @xmath2-graph on @xmath862 with @xmath2677 such that every vertex @xmath216 has degree @xmath2678 .",
    "form @xmath34 from @xmath2676 by adding new vertices @xmath2679 where @xmath2680 and edges so that @xmath2681 are pairwise disjoint graphs of size @xmath2682 contained in @xmath2683 .",
    "then @xmath34 has @xmath2684 vertices and @xmath2685 for every vertex @xmath216 .",
    "however , for every new vertex @xmath2686 , every pair @xmath2687 is only contained in the edge @xmath2688 , so @xmath2686 is not contained in any @xmath2689 ( say ) .",
    "this example does not show that the assumption on pairs is necessary , as we can still cover all but @xmath97 vertices , but it at least indicates that it may not be so easy to remove the assumption . for simplicity we assumed that every pair has many neighbours , but it is clear from the proof that this assumption can be relaxed somewhat .",
    "the bottleneck is the claim , which can be established under the weaker assumption that for every vertex @xmath216 there are at least @xmath2690 pairs @xmath2599 in @xmath625 with @xmath2691 , for some @xmath2692 depending on @xmath52 .",
    "finally , we remark that one can apply the general hypergraph blow - up lemma in the next section and the same proof to obtain the following result ( we omit the details ) . for any @xmath0-partite @xmath0-graph @xmath52 in which not all part sizes are equal and @xmath2460",
    "there is a real @xmath42 and positive integers @xmath2093 such that if @xmath34 is an @xmath0-graph on @xmath2461 vertices @xmath35 such that every vertex @xmath216 has degree @xmath2693 and every @xmath2694-tuple @xmath23 of vertices has degree @xmath2695 then @xmath34 contains an @xmath52-packing that covers all but at most @xmath2096 vertices .",
    "in this section we present the general blow - up lemma . besides working with @xmath0-graphs for any @xmath2696",
    ", we will introduce the following further generalisations :    * restricted positions : a small number of sets in @xmath1 may be constrained to use a certain subset of their potential images in @xmath34 ( provided that these constraints are regular and not too sparse ) . * complex - indexed complexes : a structure that provides greater flexibility , in particular the possibility of embedding spanning hypergraphs ( such as hamilton cycles ) .",
    "we divide this section into five subsections organised as follows .",
    "the first subsection contains various definitions needed for the general case , some of which are similar to those already given for @xmath2-complexes and some of which are new . in the second subsection we state the general blow - up lemma and the algorithm that we use to prove it .",
    "the third subsection contains some properties of hypergraph regularity , analogous to those proved earlier for @xmath2-graphs .",
    "we give the analysis of the algorithm in the fourth subsection , thus proving the general blow - up lemma .",
    "since much of the analysis is similar to that for @xmath2-graphs we only give full details for those aspects of the general case that are different .",
    "the last subsection contains the general cases of the lemmas to be used in applications of the blow - up lemma , namely lemmas [ 3del ] , [ 3super - restrict ] ( super - regular restriction ) and [ 3robust ] ( robust universality ) .",
    "[ def - indexed ] we say @xmath2125 is a _ multicomplex _",
    "on @xmath2697 $ ] if it consists some number of copies ( possibly 0 ) of every @xmath342 $ ] which are partially ordered by some relation , which we denote by @xmath2698 , such that whenever @xmath2699 is a copy of some subset @xmath349 of @xmath2697 $ ] and @xmath519 is a subset of @xmath349 , there is a unique copy @xmath2700 of @xmath519 with @xmath2701 .",
    "we say that @xmath2125 is a _ multi-@xmath0-complex _ if @xmath2702 for all @xmath2703 .",
    "suppose @xmath35 is a set partitioned as @xmath36 .",
    "suppose each @xmath38 , @xmath62 is further partitioned as @xmath2704 , where @xmath2705 ranges over all copies of @xmath206 in @xmath2125 .",
    "we say @xmath34 is an _",
    "@xmath2125-indexed complex _ on @xmath35 if it consists of disjoint parts @xmath423 for @xmath2703 ( possibly undefined ) , such that @xmath2706 for singletons @xmath2707 , and @xmath2708 is a complex whenever @xmath423 is defined .",
    "we say that an @xmath2125-indexed complex @xmath519 on @xmath35 is an _",
    "@xmath2125-indexed subcomplex _ of @xmath34 if @xmath2709 when defined .",
    "we say @xmath1456 is _",
    "@xmath33-partite _ if @xmath2710 for @xmath62",
    ". the _ multi - index _",
    "@xmath2711 of @xmath23 is that @xmath2703 with @xmath2279 . if @xmath812 we write @xmath2712 for the part of @xmath34 containing @xmath23 .",
    "we emphasise that @xmath2698 is more restrictive than the inclusion relation ( also denoted @xmath2698 ) between copies considered merely as subsets of @xmath2697 $ ] . to avoid confusion we never ` mix ' subsets with copies of subsets . thus , if @xmath2703 then @xmath348 means @xmath2713 and @xmath2714 is in the relation @xmath2698 . also , if @xmath2703 then @xmath2715 means @xmath2716 and @xmath2717 is in the relation @xmath2698 .",
    "we also write @xmath2707 to mean @xmath2716 when the meaning is clear from the context . as in definition",
    "[ def - more ] , we henceforth simplify notation by writing @xmath206 instead of @xmath2718 .",
    "we are adopting similar notation for complex - indexed complexes as for usual complexes for ease of discussing analogies between the two situations .",
    "thus we typically denote a singleton multi - index by @xmath206 and a set multi - index by @xmath349 .",
    "if we need to distinguish a multi - index from the index of which it is a copy , we typically use the notation that @xmath2705 is a copy of @xmath206 and @xmath2719 is a copy of @xmath349 .",
    "[ eg3 ] figure [ pic - indexed ] depicts an example of an @xmath2125-indexed complex @xmath34 in which @xmath2125 is a multi-@xmath2-complex on @xmath2720 $ ] ( not all parts have been labelled ) .",
    "the multi - indices have been represented as ordered pairs @xmath2721 , where @xmath2722}{\\le 3}$ ] and @xmath97 is a number ( arbitrarily chosen ) to distinguish different copies of @xmath92 .",
    "an example of the inclusion structure is @xmath2723 , since the intended interpretation of our picture is that for every triple in @xmath2724 its restriction to index @xmath2725 lies in @xmath2726 .",
    "other examples are @xmath2727 and @xmath2728 , but @xmath2729 and @xmath2730 , since the intended interpretation of our picture is that there are triples in @xmath2731 such that their restriction to index @xmath2732 is a pair in @xmath2733 not belonging to @xmath2734 .",
    "complex - indexed complexes arise naturally from the partition complexes needed for regular decompositions of hypergraphs , as in theorem [ ral ] .",
    "suppose @xmath461 is an @xmath33-partite partition @xmath0-complex on @xmath35 .",
    "recall that @xmath2224 denotes the cell containing a set @xmath23 .",
    "we can index the cells of @xmath461 by a multicomplex @xmath2125 on @xmath2697 $ ] , where for each cell @xmath2224 we form a copy @xmath2711 of its ( usual ) index @xmath2735 .",
    "the elements of @xmath2125 are partially ordered by a relation @xmath2698 which corresponds to the consistency relation @xmath2736 discussed above , i.e.  @xmath2737 exactly when @xmath2222 .",
    "one could think of @xmath461 as a ` complete @xmath2125-indexed @xmath0-complex ' , in that it contains every @xmath33-partite set of size at most @xmath0 , although we remark that many partition @xmath0-complexes @xmath461 will give rise to the same multicomplex @xmath2125 , so the phrase is ambiguous .",
    "note that if we do not allow sets in @xmath2125 to have multiplicity more than @xmath26 then an @xmath2125-indexed complex is precisely an @xmath33-partite complex .",
    "the reason for working in the more general context is that @xmath2125-indexed complexes are the structures that naturally arise from an application of theorem [ ral ] , so a general theory of hypergraph embedding will need to take this into account . in particular , in order to use every vertex of @xmath35 we need to consider every part of the partition @xmath2228 of @xmath38 for @xmath62 , i.e.  we need multi - index copies of each index @xmath206 .",
    "the multi - index copies of larger index sets are useful because it may not be possible to choose mutually consistent cells .",
    "to illustrate this point , it may be helpful to consider an example of a @xmath75-partite @xmath2-complex where each triple has constant density ( say @xmath2738 ) and there is no tetrahedron @xmath406 .",
    "a well - known example of rdl is obtained by independently orienting each pair of vertices at random and taking the edges to be all triples that form cyclic triangles .",
    "( a similar example is described in @xcite . )",
    "then we can not make a consistent choice of cells in any @xmath75-partite subcomplex so that each cell has good density . however , by working with indexed complexes one can embed using cells from each of the four triples , provided that the choice of cells is locally consistent .",
    "much of the notation we set up for @xmath33-partite @xmath2-complexes extends in a straightforward manner to @xmath2125-indexed complexes for some multi-@xmath0-complex @xmath2125 on @xmath2697 $ ] . throughout",
    "we make the following replacements : replace ` @xmath2 ' by ` @xmath0 ' , ` @xmath33-partite ' by ` @xmath2125-indexed ' , ` @xmath342 $ ] ' by ` @xmath2703 ' , ` index ' by ` multi - index ' , @xmath2735 by @xmath2711 , and understand @xmath2698 as the partial order of multi - indices . thus we define @xmath2739 , @xmath2740 , etc .  as in definition",
    "[ def - more ] .",
    "we define restriction of @xmath2125-indexed complexes as in definition [ def - restrict ] , and more generally composition of @xmath2125-indexed complexes @xmath34 and @xmath777 as in definition [ def- * ] : we define @xmath778 if @xmath2741 is defined and say that @xmath780 if @xmath781 and @xmath782 for any @xmath411 . lemma [ * props ] applies to @xmath2125-indexed complexes , with the same proof .    as in definition",
    "[ def - set - restrict ] , if @xmath336 is @xmath33-partite and @xmath2742 we write @xmath533 .",
    "we also write @xmath2743 for any @xmath33-partite set @xmath152 with @xmath2744 .",
    "as in definition [ def - density ] we write @xmath2745 for the set of @xmath33-partite @xmath2746-tuples @xmath23 with @xmath2747 such that @xmath2748 when defined for all @xmath429 .",
    "when defined we have relative densities @xmath2749 and absolute densities @xmath2750 .",
    "( recall that @xmath2715 means @xmath2751 according to @xmath2125 . )    to define regularity we adopt the reformulation using restriction notation already discussed for @xmath2-complexes . for any @xmath2703 such that @xmath423 is defined we say that @xmath423 is _ @xmath43-regular _ if for every subcomplex @xmath519 of @xmath34 with @xmath2752 and @xmath2753 undefined we have @xmath2754)=d_i(g ) \\pm { \\epsilon}$ ] .",
    "note that if @xmath2755 we have @xmath925_i = g_i$ ] , so @xmath423 is automatically @xmath43-regular for any @xmath43 .",
    "we say that @xmath34 is _ @xmath43-regular _ if whenever any @xmath423 is defined it is @xmath43-regular .",
    "[ rem : nhood ] some care is needed when forming neighbourhoods in complex - indexed complexes .",
    "the usual definition defines @xmath2756 and @xmath2757 .",
    "however the expression @xmath2758 may be ambiguous , as there may be several multi - indices @xmath949 such that @xmath2759 , where @xmath2760 .",
    "we avoid this ambiguous expression unless the meaning is clear from the context .",
    "the expression @xmath2761 is unambiguous : it means @xmath2762 .",
    "henceforth we suppose @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] , @xmath1 is an @xmath2125-indexed complex on @xmath2763 and @xmath34 is an @xmath2125-indexed complex on @xmath2764 , with @xmath457 for @xmath2707 . as before we want to find an embedding @xmath458 of @xmath1 in @xmath34 , via an algorithm that considers the vertices of @xmath4 in some order and embeds them one at a time . at some time @xmath97 in the algorithm , for each @xmath344 there will be some @xmath351-graph @xmath459 consisting of those sets @xmath460 that are ` free ' for @xmath23 , in that mapping @xmath23 to @xmath461 is ` locally consistent ' with the embedding so far .",
    "these free sets will be ` mutually consistent ' , in that @xmath2765 is a complex . with the modifications",
    "already mentioned , we can apply the following definitions and lemmas ( and their proofs ) to the general case : definition [ def - update ] ( the update rule ) , lemma [ consistent ] ( consistency ) , lemma [ build - update ] ( iterative construction ) and lemma [ not - local ] ( localisation ) .",
    "just as some triples were marked as forbidden for @xmath2-graphs , in the general case some @xmath0-tuples @xmath395 will be marked as forbidden .",
    "definition [ def - mark ] ( @xmath600 ) applies in general when @xmath595 is a @xmath0-tuple .",
    "[ def - super ] ( super - regularity ) suppose @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] , @xmath34 is an @xmath2125-indexed complex on @xmath2764 and @xmath2767 .",
    "we say that @xmath407 is @xmath2768-_super - regular _ if        \\(iii ) for every submulticomplex @xmath349 of @xmath2125 , if @xmath645 is defined , @xmath2707 and @xmath621 , then @xmath651 if @xmath2769 , and @xmath624 is @xmath82-regular with densities ( when defined ) @xmath2777    we remark that the parameters in definition [ def - super ] will satisfy the hierarchy @xmath2778 .",
    "thus we work in a dense setting with regularity parameters much smaller than density parameters .",
    "note that we have two density thresholds @xmath2779 and @xmath2118 , where @xmath2779 is a lower bound on the @xmath23-densities when @xmath2771 and @xmath2118 is a lower bound on the @xmath23-densities when @xmath2769 .",
    "the marking parameter @xmath657 again lies between these thresholds .",
    "next we will formalise the notation @xmath2780 used for @xmath2-complexes by defining @xmath2781 as an object in its own right : a _ complex - coloured complex_.    [ def - coloured ] suppose @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] , @xmath1 is an @xmath2125-indexed complex on @xmath2763 and @xmath34 is an @xmath2125-indexed complex on @xmath2764 .",
    "@xmath1-coloured complex @xmath52 ( in @xmath34 ) _ consists of @xmath351-graphs @xmath2782 such that @xmath2783 is a complex for @xmath344 .",
    "we allow @xmath2784 to be undefined for some @xmath344 .",
    "we say that an @xmath1-coloured complex @xmath519 is an _ @xmath1-coloured subcomplex _ of @xmath52 if @xmath2785 when defined .",
    "the _ restriction _",
    "@xmath2786 $ ] is the @xmath1-coloured complex with @xmath2786_s = f_{s^\\le}[j_{s^\\le}]_s$ ] .",
    "when @xmath2781 is an @xmath1-coloured complex at time @xmath97 we use @xmath2787 and @xmath463 interchangeably .",
    "we let @xmath34 also denote the @xmath1-coloured complex @xmath52 in @xmath34 such that @xmath2788 for all @xmath344 . when @xmath349 is a subcomplex of @xmath1 we let @xmath2789 denote the @xmath1-coloured complex that consists of @xmath2784 for every @xmath944 and is otherwise undefined .",
    "we use the terminology ` coloured ' in analogy with various combinatorial questions involving hypergraphs in which each set can be assigned several colours . in our case a set @xmath2790 is assigned as colours all those @xmath344 for which @xmath2791 .",
    "note also that if we had the additional property that the parts @xmath2784 , @xmath344 were mutually disjoint , i.e.  any set in @xmath34 has at most one colour from @xmath1 , then @xmath52 would be an @xmath1-indexed complex .",
    "( we make this comment just to illustrate the definition : we will not have cause to consider any @xmath1-indexed complexes . )    in the proof of theorem [ 3blowup ] there were several places where we divided the argument into separate cases . this will not be feasible for general @xmath0 , so we will introduce some more notation , which may at first appear somewhat awkward , but will repay us by unifying cases into a single argument .",
    "[ def - plus ] suppose @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] , @xmath1 is an @xmath2125-indexed complex on @xmath2763 and @xmath34 is an @xmath2125-indexed complex on @xmath2764 .",
    "fix @xmath161 .    *",
    "we define a multi-@xmath2792-complex @xmath2793 on @xmath2794 $ ] as follows .",
    "there is a single multi - index copy of @xmath2795 , also called @xmath2795 .",
    "suppose @xmath2796 , where @xmath2797 is a copy of some @xmath2798 $ ] .",
    "consider @xmath2699 such that @xmath2719 is a copy of @xmath342 $ ] .",
    "if @xmath2799 we let @xmath2800 be a copy of @xmath2801 . if @xmath2802 and @xmath2803 for any @xmath2713 we let @xmath2804 be a copy of @xmath2805 .",
    "we extend @xmath2698 by the rules ( when defined ) @xmath2806 for @xmath2807 ; @xmath2808 for @xmath2809 ; @xmath2810 for @xmath2811 and @xmath2812 ; @xmath2813 ; and @xmath2814 for @xmath2815 .",
    "* let @xmath2816 consist of a single new vertex that we consider to be a copy of @xmath27 .",
    "let @xmath2817 be the @xmath2793-indexed complex @xmath2818 on @xmath2819 , where @xmath2820 is @xmath2821 if @xmath2822 or @xmath2823 if @xmath2824 . if @xmath2822 we write @xmath2825 .",
    "if @xmath2826 we write @xmath2827 .",
    "if @xmath2828 we write @xmath2829 .",
    "note that @xmath2830 and @xmath2831 .",
    "* let @xmath2832 be a new set of vertices disjoint from @xmath35 having the same size as @xmath2833 .",
    "we think of @xmath2832 as a copy of @xmath121 , in that for each @xmath214 there is a copy @xmath2834 .",
    "let @xmath2835 be the @xmath2793-indexed complex @xmath2836 on @xmath2837 , where @xmath2838 is @xmath2839 if @xmath2762 or @xmath2840 if @xmath2841 . if @xmath2762 we write @xmath2842 .",
    "if @xmath2843 we write @xmath2844 .",
    "if @xmath2845 we write @xmath2846 .",
    "note that @xmath2847 and @xmath2848 . * if @xmath2849 or @xmath2850 we write @xmath2851 .",
    "* suppose @xmath52 is an @xmath1-coloured complex in @xmath34 .",
    "we define @xmath2817-coloured complexes @xmath2852 and @xmath2853 .",
    "suppose @xmath349 is an @xmath2125-indexed subcomplex of @xmath1 .",
    "the _ plus complex _ is @xmath2854 $ ] .",
    "[ eg2 ] as in example [ eg1 ] , suppose that @xmath1 and @xmath34 are @xmath75-partite @xmath2-complexes , that we have @xmath75 vertices @xmath489 , @xmath383 that span a tetrahedron @xmath406 in @xmath1 , that we have the edges @xmath491 and @xmath492 and all their subsets for some other @xmath75 vertices @xmath493 , @xmath383 , and that there are no other edges of @xmath1 containing any @xmath494 or @xmath495 , @xmath383 .",
    "we can think of @xmath1 and @xmath34 as @xmath2125-indexed complexes with @xmath2855}{\\le 3}$ ] , i.e.  we have one copy of each subset of @xmath2720 $ ] of size at most @xmath2 .",
    "we work through definition [ def - plus ] , setting @xmath2856 .",
    "@xmath2793 is the subcomplex of @xmath2857 $ ] that contains @xmath2855}{\\le 3}$ ] and all sets @xmath2858 with @xmath2859}{\\le 3}$ ] .",
    "@xmath2817 is the @xmath2793-indexed complex on @xmath2860 where @xmath2861 and @xmath2817 consists of all sets @xmath23 and @xmath2862 with @xmath344 .",
    "@xmath2835 is the @xmath2793-indexed complex on @xmath2863 where @xmath2864 and @xmath2835 consists of all sets @xmath23 and @xmath2865 with @xmath812 and @xmath2866 .",
    "note that @xmath2817 and @xmath2835 are @xmath701-partite @xmath75-complexes .",
    "let @xmath2867 be the @xmath1-coloured @xmath2-complex in which @xmath2868 for all @xmath344 .",
    "we will describe the plus complex @xmath2869 . for any @xmath344 we have @xmath2870 by equation ( [ eq : res ] ) .",
    "similarly , for any @xmath2871 we have @xmath2872 .",
    "( recall that @xmath2871 iff @xmath2873 . ) for example , @xmath2874 . if @xmath2875 then @xmath2876 consists of all @xmath2877 such that for all @xmath546 we have @xmath2878 and @xmath2879 if @xmath2880 . for example",
    ", @xmath2881 consists of all @xmath75-tuples @xmath2882 where @xmath2883 and @xmath2884 are in @xmath526 .",
    "now suppose , as in example [ eg1 ] , that we start the embedding by mapping @xmath497 to some @xmath498 .",
    "let @xmath2885 be the @xmath1-coloured @xmath2-complex given by the update rule : this is worked out in example [ eg1 ] and formally defined in definition [ def - update ] .",
    "we can also describe it using the plus complex .",
    "for example , we saw that @xmath2886 consists of all triples in @xmath510 that form a triangle in the neighbourhood of @xmath511 , i.e.  form a tetrahedron with @xmath511 .",
    "we can write this as @xmath2887 , as by definition @xmath2888 exactly when @xmath2889 is a tetrahedron .",
    "another example from example [ eg1 ] is that @xmath2890 consists of all triples @xmath939 not containing @xmath511 such that @xmath2891 is a neighbour of @xmath511 .",
    "we can write this as @xmath2892 , as by definition @xmath2893 exactly when @xmath2894 and @xmath2895 .",
    "note that the plus complex in definition [ def - plus](v ) depends on @xmath1 , but we suppress this in the notation , as @xmath1 will always be clear from the context .",
    "we have also suppressed @xmath27 from the notation in @xmath2793 ( etc ) .",
    "one should note that the definition of @xmath2896 is rather different than @xmath2835 and @xmath2817 . to clarify this definition , we note that @xmath2897 , and also that @xmath2898 , so one could also write @xmath2899 $ ] . to justify the definition of the plus complex , we note that @xmath2900 and @xmath2896 are @xmath2817-coloured complexes in @xmath2835 , as @xmath2901 is the copied version of the complex @xmath2902 for any @xmath344 .",
    "then @xmath2903 is an @xmath2817-coloured complex in @xmath2835 , with @xmath2904 for @xmath344 and @xmath2905 for @xmath944 .",
    "regarding @xmath2835 as an @xmath2817-coloured complex in @xmath2835 , the plus complex @xmath2906 is a well - defined @xmath2817-coloured complex in @xmath2835 . by equation ( [ eq : res ] ) we have @xmath2907 as noted in remark [ rem : nhood ]",
    ", some care must be taken to avoid ambiguity when defining neighbourhoods .",
    "we adopt the following convention : @xmath2908    note that we set @xmath2909 in example [ eg2 ] , and indeed this is the typical application of this definition . the reason for allowing general @xmath349 is for proving the analogue of lemma [ 3-x - to - v ] in the general case .",
    "next we prove a lemma which confirms that the plus complex does describe the update rule in general , when we map @xmath27 to @xmath130 at time @xmath97 .",
    "* by definition [ def - update ] we have @xmath2912 { \\setminus}y$ ] .",
    "thus @xmath476 exactly when @xmath2913 , @xmath2914 and @xmath2915 for all @xmath546 with @xmath573 .",
    "since @xmath2915 @xmath2018 @xmath2916 , definition [ def - plus ] gives @xmath476 exactly when @xmath2914 and @xmath2917 .",
    "we also note that the plus complex can describe the construction @xmath624 in a similar manner . for the following identity",
    "we could take @xmath2918 , considered as an @xmath2125-indexed complex with exactly one set @xmath2919 for every @xmath2564 .",
    "actually , the identity makes sense for any @xmath2125-indexed complex @xmath1 , when we interpret each @xmath2125-indexed complex as an @xmath1-coloured complex as in definition [ def - coloured ] , i.e.  @xmath624 is the @xmath1-coloured complex @xmath52 in @xmath624 with @xmath2920 for all @xmath344 , and similarly for @xmath2921 .",
    "now we come to the general blow - up lemma .",
    "first we give a couple of definitions .",
    "suppose @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] .",
    "we write @xmath2929 for the number of multi - indices in @xmath2125 . for @xmath2564 ,",
    "the _ degree _ of @xmath23 is the number of @xmath2930 with @xmath2931 .",
    "* @xmath2932 , * @xmath2125 is a multi-@xmath0-complex on @xmath2697 $ ] of maximum degree at most @xmath2933 with @xmath2934 , * @xmath1 is an @xmath2125-indexed complex on @xmath2763 of maximum degree at most @xmath72 , @xmath34 is an @xmath2125-indexed complex on @xmath2764 , @xmath645 is defined whenever @xmath377 is defined , and @xmath671 for @xmath2707 , * @xmath2935 and @xmath407 is @xmath2768-super - regular , * @xmath1227 is an @xmath1-coloured complex in @xmath34 with @xmath2936 defined only when @xmath2937 , where @xmath2938 for all @xmath2707 , and for @xmath344 , when defined @xmath2939 is @xmath82-regular with @xmath2940 ,      we make some comments here to explain the statement of theorem [ blowup ] .",
    "an informal statement is that we can embed any bounded degree @xmath2125-indexed complex in any super - regular marked @xmath2125-indexed complex , even with some restricted positions .",
    "the restricted positions are described by assumption ( v ) : for some sets @xmath344 we constrain the embedding to satisfy @xmath2944 , for some @xmath1-coloured complex @xmath1227 that is regular and dense and is not defined for too many vertices .",
    "note that we now allow the embedding to use all @xmath2929 parts of @xmath35 , provided that @xmath2125 is of bounded degree .",
    "thus this theorem could be used for embedding spanning hypergraphs , such as hamilton cycles . even in the graph case",
    ", embedding spanning subgraphs is a generalisation of the graph blow - up lemma in @xcite .",
    "a blow - up lemma for spanning subgraphs was previously given by csaba @xcite ( see @xcite for another application ) .",
    "restricted positions have arisen naturally in many applications of the graph blow - up lemma , and will no doubt be similarly useful in future applications of the hypergraph blow - up lemma . in particular , a simplified form of the condition ( where @xmath2939 is only defined when @xmath761 ) is used in a forthcoming work @xcite on embedding loose hamilton cycles in hypergraphs .",
    "we allow a general @xmath1-coloured complex @xmath1227 as the proof is the same , and it would be needed for embedding general hamilton cycles .",
    "we prove theorem [ blowup ] with an embedding algorithm that is very similar to that used for theorem [ 3blowup ] .",
    "we introduce more parameters with the hierarchy @xmath2945 the roles of the parameters from theorem [ 3blowup ] are exactly as before .",
    "our generalisations to @xmath2125-indexed complexes and restricted positions have introduced some additional parameters , so one should note how they fit into the hierarchy .",
    "the restricted positions hypothesis has two parameters @xmath2946 and @xmath2947 .",
    "parameter @xmath2946 controls the number of restricted positions and satisfies @xmath2948 .",
    "parameter @xmath2947 gives a lower bound on the density relative to @xmath34 of the constraints and satisfies @xmath2949 .",
    "the indexing complex @xmath2125 has two parameters @xmath2950 and @xmath2933 .",
    "parameter @xmath2950 is a bound for @xmath2929 and can be very large , provided that @xmath31 is even larger .",
    "parameter @xmath2933 bounds the maximum degree of @xmath2125 and satisfies @xmath2951 .",
    "initialisation and notation .",
    ": :    write @xmath2952 .",
    "we    choose a buffer set @xmath101 of vertices at mutual    distance at least @xmath685 in @xmath1 so that    @xmath686 for @xmath2707    and @xmath2953 .",
    "since    @xmath687 for @xmath2707 and    @xmath1 has maximum degree @xmath72 we can construct    @xmath103 by selecting vertices one - by - one greedily .",
    "every    vertex neighbourhood in @xmath1 has size less than    @xmath2954 , so there are at most @xmath2955 vertices    at distance less than @xmath685 from any vertex of    @xmath1 .",
    "similarly , there are at most @xmath2956    multi - indices @xmath2957 at distance less than    @xmath685 from any fixed multi - index @xmath2707 .",
    "thus    at any stage we have excluded at most    @xmath2958 vertices from    @xmath74 , since @xmath2959 .",
    "similarly ,    since @xmath2960 for all    @xmath2957 we have    @xmath2961 .",
    "since    @xmath2962 we can construct @xmath103 greedily .",
    "let @xmath691 be the set of all    vertices that have a neighbour in the buffer .",
    "then @xmath114 is    disjoint from @xmath2963 , as we chose @xmath103 disjoint    from @xmath2964 . also ,    @xmath2965    for any @xmath2707 .",
    "+    for @xmath344 we set @xmath2966_s$ ] .",
    "we define @xmath113 , @xmath110 ,    @xmath2967 , @xmath693 , @xmath2968 ,    @xmath2969 , @xmath2970 as in the    @xmath2-graph algorithm .",
    "we let    @xmath2971 and    @xmath2972 .",
    ": :    at time @xmath97 , while there are still some unembedded    non - buffer vertices , we select a vertex to embed @xmath128    according to the same selection rule as for the @xmath2-graph    algorithm .",
    "we choose the image @xmath76 of    @xmath27 uniformly at random among all elements    @xmath129 that are ` good ' ( a property defined    below ) .",
    "note that all expressions at time @xmath97 are to be    understood with the embedding @xmath130 , for some    unspecified vertex @xmath131",
    ".    +    * definitions .",
    "*    +    \\1 . for a vertex @xmath27",
    "we write @xmath708 for    the number of elements in @xmath25 that have been    embedded at time @xmath97 . for a set @xmath23",
    "we write    @xmath709 .",
    "we also define    @xmath710 as follows . when @xmath2769 we let    @xmath711 . when @xmath2771 we let    @xmath713 , where @xmath714 is the    maximum value of @xmath715 over vertices    @xmath700 embedded at time @xmath716 with    @xmath717 ; if there is no such vertex @xmath700    we let @xmath711",
    "+    \\2 . for any @xmath33-partite set @xmath23",
    "we define    @xmath718 if @xmath477 or    @xmath719_s { \\setminus}y$ ]    if @xmath479 .",
    "we define an _ exceptional _ set    @xmath723 by saying @xmath131    is in @xmath724 if and only if for    every unembedded @xmath725 ,    +    @xmath2973 ,    and @xmath463 is    @xmath2974-regular",
    ".    @xmath2975    +    \\3 .",
    "we define @xmath596 , @xmath600 ,    @xmath732 and @xmath730 as in the    @xmath2-graph algorithm , replacing ` triple ' by    ` @xmath0-tuple ' .",
    "we obtain the set of _ good _ elements    @xmath138 from @xmath186 by deleting    @xmath727 and @xmath732 for every    @xmath733 .",
    "+    we embed @xmath27 as @xmath130 where    @xmath131 is chosen uniformly at random from the good elements    of @xmath186 .",
    "we update @xmath150 ,    @xmath110 and @xmath693 as before , using the same    rule for adding vertices to the queue .",
    "we repeat until the only    unembedded vertices are buffer vertices , but abort with failure if at    any time we have @xmath151 for    some @xmath2707 .",
    "let @xmath152 denote the time at    which the iterative phase terminates ( whether with success or    failure ) . conclusion .",
    ": :    when all non - buffer vertices have been embedded , we choose a system of    distinct representatives among the available slots @xmath2976    ( defined as before ) for @xmath154 to complete the    embedding , ending with success if possible , otherwise aborting with    failure .    similarly to lemma [ itworks ]",
    ", the algorithm embeds @xmath1 in @xmath673 unless it aborts with failure .",
    "furthermore , when @xmath2939 is defined we have @xmath2966_s={\\gamma}_s$ ] , so we ensure that @xmath2944 .",
    "note that any vertex neighbourhood contains at most @xmath2977 vertices .",
    "thus in the selection rule , any element of the queue can cause at most @xmath2977 vertices to jump the queue .",
    "note also that when a vertex neighbourhood jumps the queue , its vertices are immediately embedded at consecutive times before any other vertices are embedded .",
    "we collect here a few more simple observations on the algorithm",
    ".                  * proof . *",
    "the proofs of ( i ) and ( iii - vi ) are similar to those in lemma [ 3observe ] so we omit them . for ( ii )",
    "we have to be more careful to get a good bound inside each part .",
    "note that we only obtain a new element @xmath27 of @xmath2981 when @xmath27 is a neighbour of some @xmath2982 and some @xmath96 within distance @xmath75 of @xmath27 is queued .",
    "in particular @xmath96 is within distance @xmath701 of @xmath27 .",
    "given @xmath206 , there are at most @xmath2983 choices for @xmath2984 , at most @xmath2985 choices for @xmath96 , then at most @xmath2986 choices for @xmath27 . therefore @xmath2987 .        ( rdl - schacht @xcite ,",
    "see theorem 13 ) [ count ] suppose @xmath2988 , that @xmath519 and @xmath34 are @xmath33-partite @xmath0-complexes with vertex sets @xmath2272 and @xmath36 respectively , that @xmath2283 , and @xmath34 is @xmath43-regular with all densities at least @xmath2118 .",
    "then @xmath2989 = ( 1 \\pm \\gamma ) \\prod_{a \\in j } d_a(g).\\ ] ]      [ absolute ] suppose @xmath2992 , @xmath34 is a @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 and @xmath34 is @xmath43-regular .",
    "then @xmath2994 } ) = ( 1 \\pm { \\epsilon}')\\prod_{s { \\subseteq}[k]}d_s(g)$ ]",
    ".      [ neighbour1 ] * ( vertex neighbourhoods ) * suppose @xmath34 is a @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 and @xmath2995 for each @xmath2996 $ ] .",
    "suppose that each @xmath423 is @xmath2997-regular .",
    "then for all but at most @xmath2998 } \\eta'_{ik } |g_k|$ ] vertices @xmath2999 , for every @xmath3000 $ ] , @xmath2758 is @xmath3001-regular with @xmath3002",
    ".    * proof . *",
    "the argument is similar to that in lemmas [ 2neighbour ] and [ 3neighbour1 ] .",
    "we show the following statement by induction on @xmath3003 : for any subcomplex @xmath3004 of @xmath3005^\\le$ ] , for all but at most @xmath3006 vertices @xmath2999 , for every @xmath3007 , @xmath2758 is @xmath3001-regular with @xmath3002 .",
    "the base case is @xmath3008 , or less trivially any @xmath3004 with @xmath3009 for all @xmath3007 , by lemmas [ 2neighbour ] and [ 3neighbour1 ]",
    ".    for the induction step , fix any maximal element @xmath349 of @xmath3004 . by induction hypothesis , for all but at most @xmath3010 vertices @xmath2999 , for every @xmath3011",
    ", @xmath3012 is @xmath3013-regular with @xmath3014 .",
    "let @xmath3015 be the set of such vertices .",
    "it suffices to show the claim that all but at most @xmath3016 vertices @xmath3017 have the following property : if @xmath3018 is a subcomplex of @xmath3019 with @xmath3020 then @xmath3021_i| = ( 1 \\pm \\eta'_i/2)d_i(g)|(j^v)_i^*|$ ] and @xmath3022_i| = ( 1 \\pm \\eta'_{ik}/2)d_{ik}(g)|g[j^v]_i|$ ] .",
    "suppose for a contradiction that this claim is false .",
    "let @xmath3023 . by theorem [ count ] ,",
    "for any @xmath3017 we have @xmath3024 then for any @xmath3025 with @xmath3020 we have @xmath3026 , so @xmath3021_i| = ( d_i(g ) \\pm",
    "\\eta_i)|(j^v)_i^*| = ( 1 \\pm \\eta'_i/2)d_i(g)|(j^v)_i^*|$ ] , since @xmath423 is @xmath2997-regular .",
    "so without loss of generality , we can assume that we have vertices @xmath3027 with @xmath3028 , and subcomplexes @xmath3029 with @xmath3030 such that @xmath3031_i| < ( 1 - \\eta'_{i'k}/2)d_{ik}(g)|g[j^{v_i}]_i|$ ] for @xmath896 .",
    "define complexes @xmath3032_i",
    "\\cup \\{v_is : s \\in j^{v_i}\\}$ ] and @xmath898 .",
    "we have @xmath3033_i|$ ] .",
    "now @xmath3034_i| > ( d_i(g ) - \\eta_i)|(j^{v_i})_i^*|$ ] , @xmath3035 , @xmath3036 and @xmath3028 , so @xmath3037 since @xmath3038 is @xmath3039-regular we have @xmath3040)_{ik } = d_{ik}(g ) \\pm \\eta_{ik}$ ]",
    ". therefore @xmath3041_i|$ ] .",
    "but we also have @xmath3042_i| < \\sum_{i=1}^t ( 1 - \\eta'_{i'k}/2)d_{ik}(g)|g[j^{v_i}]_i| < ( d_{ik}(g)-\\eta_{ik})\\sum_{i=1}^t |g[j^{v_i}]_i|,\\ ] ] contradiction .",
    "this proves the claim , and so completes the induction .",
    "[ neighbour - set ] * ( set neighbourhoods ) * suppose @xmath2992 and @xmath34 is an @xmath43-regular @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 .",
    "then for any @xmath3043 $ ] and for all but at most @xmath3044 sets @xmath3045 , for any @xmath3046 { \\setminus}a$ ] , @xmath3047 is @xmath82-regular with @xmath3048 ( and @xmath3049 as usual ) .",
    "* for convenient notation suppose that @xmath3050 $ ] for some @xmath3051 .",
    "introduce additional constants with the hierarchy @xmath3052 .",
    "we prove inductively for @xmath3053 that for all but at most @xmath3054}|$ ] sets @xmath3055}$ ] , for any @xmath3046 { \\setminus}[t]$ ] , @xmath3056 is @xmath3057-regular with @xmath3058 } d_{ti}(g)$ ] .",
    "the base case @xmath602 is immediate from lemma [ neighbour1 ] with @xmath82 replaced by @xmath964 . for the induction step ,",
    "consider @xmath3055}$ ] such that for any @xmath3046 { \\setminus}[t]$ ] , @xmath3056 is @xmath3057-regular with @xmath3058 } d_{ti}(g)$ ] .",
    "we have @xmath3059 , so we can apply lemma [ neighbour1 ] to @xmath3056 with @xmath3060 , @xmath3061 and @xmath2118 replaced by @xmath3062 .",
    "then for all but at most @xmath3063 vertices @xmath3064 , for every @xmath3046 { \\setminus}[t+1]$ ] , @xmath3065 is @xmath3066-regular with @xmath3067 } d_{ti}(g)$ ] .",
    "also , since @xmath3068}| > \\frac{1}{2}d^{2^{t+1 } } \\prod_{i=1}^{t+1 } |v_i|$ ] by theorem [ count ] , the number of pairs @xmath3069 for which this fails is at most @xmath3054}| \\cdot |v_{t+1}| + |g_{[t]}| \\cdot { \\epsilon}'_t|g(s)_{t+1}| < { \\epsilon}_{t+1 } |g_{[t+1]}|$ ] .",
    "we omit the proofs of the next three lemmas , as they are almost identical to those of the corresponding lemmas [ 3restrict ] , [ 3restrict ] and [ 3average ] , replacing @xmath3070 by @xmath3071 $ ] and using theorem [ count ] instead of the triangle - counting lemma .",
    "[ restrict ] * ( regular restriction ) * suppose @xmath34 is a @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 , @xmath3072}$ ] is @xmath43-regular , where @xmath3073 , and @xmath923 is a @xmath2694-complex with @xmath3074}|>\\sqrt{{\\epsilon}}|g^*_{[k]}|$ ]",
    ". then @xmath925_{[k]}$ ] is @xmath168-regular and @xmath3075}(g[j])=(1\\pm\\sqrt{{\\epsilon}})d_{[k]}(g)$ ] .",
    "[ restrict ] suppose @xmath34 is a @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 and @xmath3072}$ ] is @xmath43-regular , where @xmath3073 .",
    "suppose also that @xmath923 is a @xmath2694-complex , and when defined , @xmath3076 and @xmath2753 is @xmath864-regular , where @xmath930 .",
    "then @xmath925_{[k]}$ ] is @xmath168-regular and @xmath3075}(g[j])=(1\\pm\\sqrt{{\\epsilon}})d_{[k]}(g)$ ] .    [",
    "average ] suppose @xmath34 is a @xmath0-partite @xmath0-complex on @xmath2993 with all densities @xmath863 and @xmath34 is @xmath43-regular , where @xmath2992 .",
    "then for any @xmath3043 $ ] and for all but at most @xmath3044 sets @xmath3045 we have @xmath3077 { \\setminus}a}| = ( 1 \\pm { \\epsilon}')|g_{[k]}|/|g_a|$ ] .            * proof .",
    "* by definition we have @xmath2966_s$ ] . condition ( i ) of definition",
    "[ def - super ] tells us that @xmath645 is @xmath43-regular with @xmath2770 .",
    "hypothesis ( v ) of theorem [ blowup ] says that when defined @xmath3081 is @xmath82-regular with @xmath3082 for @xmath546 . if @xmath2939 is defined then @xmath3083 is @xmath82-regular with @xmath3084",
    "otherwise , by lemma [ restrict ] , @xmath2939 is @xmath168-regular with @xmath3085 .",
    "the estimate @xmath3080 follows by applying theorem [ count ] to @xmath3086 and @xmath589 .",
    "note that @xmath3087 , so one of the @xmath2947 factors compensates for the error terms in theorem [ count ] .",
    "* we argue by induction on @xmath97 . at time",
    "@xmath182 the first statement is vacuous and the second follows from lemma [ res - props ] , since @xmath2770 for @xmath344 .",
    "now suppose @xmath184 and @xmath1086 is unembedded , so @xmath479 .",
    "we consider various cases for @xmath23 to establish the bound on the exceptional set and the regularity property , postponing the density bound until later in the proof .",
    "we start with the case when @xmath1087 . by induction @xmath1090",
    "is @xmath1091-regular and @xmath1092 for every @xmath3088 .",
    "write @xmath3089 and @xmath3090 . by lemma [ neighbour1 ] , for all but at most @xmath3091 vertices @xmath129",
    ", @xmath3092 is @xmath1104-regular with @xmath3093 . also , we claim that @xmath3094 .",
    "this holds by lemma [ observe ] : ( iv ) gives @xmath764 , ( v ) gives @xmath765 , and ( vi ) gives @xmath3095 .",
    "thus we have @xmath2975 for such @xmath131 .",
    "we also note for future reference that @xmath3096 . in the argument",
    "so far we have excluded at most @xmath3097 vertices @xmath129 for each of at most @xmath3098 sets @xmath1087 ; this gives the required bound on @xmath727 .",
    "we also have the required regularity property of @xmath463 , but for now we postpone showing the density bounds .",
    "next we consider the case when @xmath344 and @xmath562 .",
    "we show by induction on @xmath351 that @xmath463 is @xmath1081-regular with @xmath3099 , and moreover @xmath463 is @xmath1155-regular when @xmath23 intersects @xmath25 .",
    "note that if @xmath23 intersects @xmath25 then we have @xmath765 by lemma [ observe](v ) .",
    "for the base case when @xmath1113 has size @xmath26 we have @xmath1117 , so @xmath1118 . for",
    "the induction step , suppose that @xmath561 .",
    "recall that lemma [ build - update ] gives @xmath1119_s$ ] . since @xmath466 is @xmath1154-regular , by lemma [ restrict ]",
    ", @xmath463 is @xmath1155-regular with @xmath1156 .",
    "this gives the required property in the case when @xmath23 intersects @xmath25 .",
    "next suppose that @xmath23 and @xmath25 are disjoint .",
    "let @xmath201 be the most recent time at which we embedded a vertex @xmath700 with a neighbour in @xmath23 .",
    "then by lemma [ not - local ] , @xmath531 is obtained from @xmath1157 just by deleting all sets containing any vertices that are embedded between time @xmath1144 and @xmath97 .",
    "equivalently , @xmath3100 $ ] .",
    "now @xmath1159 is @xmath1160-regular with @xmath3101 and @xmath1161 , so @xmath463 is @xmath1081-regular with @xmath3102 by lemma [ restrict ] .",
    "now we have established the bound on @xmath727 and the regularity properties , so it remains to show the density bounds .",
    "first we consider any unembedded @xmath344 with @xmath2769 .",
    "then @xmath3103_s$ ] , similarly to ( [ refwants ] ) in lemma [ 3exceptional ] . by lemma [ res - props ]",
    ", @xmath3104 is @xmath82-regular with @xmath3105 . also , we showed above for every @xmath572 that @xmath475 is @xmath1153-regular with @xmath3106 .",
    "now lemma [ restrict ] shows that @xmath463 is @xmath3107-regular with @xmath3108 .",
    "in particular we have @xmath3109 , though we also use the bound @xmath3110 below .",
    "next we show for @xmath3111 that @xmath3112 .",
    "we argue by induction on @xmath97 and reverse induction on @xmath351 , i.e.  we assume that the bound holds for larger sets than @xmath23 . when @xmath2769 we have already proved @xmath3113 .",
    "let @xmath716 be the most recent time at which we embedded a vertex @xmath700 with @xmath717 , or let @xmath1175 if there is no such vertex @xmath700 .",
    "note that we may have @xmath1176 if @xmath1087 .",
    "let @xmath2968 be the @xmath26-complex @xmath1264 .",
    "as in lemma [ 3exceptional ] we have @xmath3114_s$ ] , so lemma [ restrict ] gives @xmath3115 .",
    "also , @xmath2975 gives @xmath3116 , where @xmath3117 by induction .",
    "thus the @xmath23-density starts with @xmath3118 , loses a factor no worse than @xmath2582 before we embed some @xmath700 with @xmath717 , then loses a factor no worse than @xmath3119 on at most @xmath72 occasions when we embed some @xmath700 with @xmath717 .",
    "this gives @xmath3120 .",
    "in particular we have @xmath3109 , though we also use the bound @xmath3121 below .",
    "finally we consider any unembedded vertex @xmath96 .",
    "suppose that the current @xmath96-regime started at some time @xmath1204 .",
    "if @xmath192 then we embedded some neighbour @xmath193 of @xmath96 at time @xmath100 .",
    "by @xmath2975 and the above bound for pair densities we have @xmath3122 .",
    "now we consider cases according to whether @xmath96 is in the list @xmath118 , the queue @xmath144 or the queue jumpers @xmath697 .",
    "suppose first that @xmath1207 .",
    "then the rule for updating the queue in the algorithm gives @xmath197 .",
    "next suppose that @xmath1208 , and @xmath96 first joined @xmath1209 at some time @xmath198 . since @xmath96 did not join the queue at time @xmath199 we have @xmath200 . also , between times @xmath201 and @xmath97 we only embed vertices that are in the queue or jumping the queue , or otherwise we would have embedded @xmath96 before @xmath27 .",
    "now @xmath3123 for @xmath2707 , or otherwise we abort the algorithm , and @xmath3124 by lemma [ observe](ii ) , so we embed at most @xmath3125 vertices in @xmath203 between times @xmath201 and @xmath97 .",
    "thus we have catalogued all possible ways in which the number of vertices free for @xmath96 can decrease .",
    "it may decrease by a factor of @xmath3126 when a new @xmath96-regime starts , and by a factor @xmath94 during a @xmath96-regime before @xmath96 joins the queue .",
    "also , if @xmath96 joins the queue or jumps the queue it may decrease by at most @xmath3125 in absolute size .",
    "since @xmath96 has at most @xmath754 neighbours , and @xmath3127 , we have @xmath3128",
    ".    from now on it will often suffice and be more convenient to use a crude upper bound of @xmath83 for any epsilon parameter .",
    "the estimates in lemma [ 3crude ] hold in general ( we can replace @xmath3129 by @xmath3130 in ( vi ) ) .",
    "we also need some similar properties for plus complexes . in the following statement @xmath2817",
    "is to be understood as in definition [ def - plus ] but with @xmath27 replaced by @xmath96 .",
    "* @xmath3133 is @xmath3134-regular . * if @xmath344 then @xmath3135 .",
    "+ if @xmath3136 then @xmath3137 is @xmath3138 if @xmath3139 , @xmath3140 or @xmath26 otherwise .",
    "* for all but at most @xmath3141 sets @xmath3142 we have + @xmath3143 .",
    "* @xmath3144 . * @xmath614 + @xmath3145 * statements ( iii - v ) hold replacing @xmath3146 by @xmath3147 $ ] for any @xmath3148-regular subcomplex @xmath1227 of @xmath3146 , such that @xmath3149 when defined .    * proof . *",
    "if @xmath344 then @xmath3150 .",
    "now suppose @xmath3151 , say @xmath3152 with @xmath340 .",
    "then by definition [ def - plus ] , @xmath3153_{s^\\le}$ ] consists of all @xmath3154 with @xmath3155 and @xmath3156 when defined for all @xmath3157 .",
    "thus we can write @xmath3158_{s^\\le}$ ] .",
    "note that @xmath3159 is @xmath43-regular with @xmath3160 for any @xmath3161 .",
    "thus ( i ) and ( ii ) follow by regular restriction .",
    "the other statements of the lemma can be proved as in lemma [ 3crude ] .",
    "\\(i ) to verify the bound for @xmath182 we use our assumption that @xmath407 is @xmath2768-super - regular .",
    "we take @xmath660 , when for any @xmath216 we have @xmath1246 by definition [ def - preplus ] .",
    "then condition ( iii ) in definition [ def - super ] gives @xmath1247 .",
    "since @xmath1248 we have @xmath3162 , where @xmath3163 by lemma [ res - props ] . since @xmath3164 we have @xmath3165 .",
    "now suppose @xmath1164 .",
    "when @xmath733 we have @xmath1251 by definition , since the algorithm chooses @xmath1252 .",
    "now suppose @xmath1253 , and let @xmath198 be the most recent time at which we embedded a vertex @xmath700 with @xmath1254 .",
    "then @xmath1255 , @xmath1256 , and @xmath3166 by the previous case .",
    "for any @xmath1258 , we can bound @xmath1259 using the same argument as that used at the end of the proof of lemma [ exceptional ] .",
    "we do not embed any neighbour of @xmath96 between time @xmath1144 and @xmath97 , so the size of the free set for @xmath96 can only decrease by a factor of @xmath94 and an absolute term of @xmath1212 . since @xmath1261 we have @xmath3167 . by lemma [ build - update ] , for every @xmath1263",
    ", @xmath463 is obtained from @xmath1159 by restricting to the @xmath26-complex @xmath1264 . if @xmath3168 then lemma [ restrict ] gives @xmath1265 .",
    "now @xmath1266 by lemma [ absolute ] , so @xmath3169 therefore @xmath3170 .",
    "\\(ii ) the argument when @xmath1270 is identical to that in lemma [ 3marked ] , so we just consider the case when @xmath1284 .",
    "then @xmath1285 .",
    "note that when @xmath733 we have @xmath1286 , so @xmath1287 . by lemma",
    "[ plus - update ] we have @xmath3171 . since @xmath1290 we have @xmath3172 , and in the second inequality we applied lemma [ plus - props ] , with a factor @xmath3173 rather than @xmath3174 to account for the error from deleting @xmath131 ( which has a lower order of magnitude ) .",
    "we also have @xmath3175 .",
    "this counts all pairs @xmath1294 with @xmath1295 , @xmath129 and @xmath3176 , so we can rewrite it as @xmath3177 . by lemma",
    "[ plus - props ] we have @xmath3178 for all but at most @xmath3179 sets @xmath3180 .",
    "since @xmath3181 we have @xmath3182 combining this with the lower bound on @xmath1302 we obtain @xmath3183 now @xmath1304 by ( i ) and @xmath3184 , by lemma [ plus - props ] , so @xmath3185    the following corollary is now immediate from lemmas [ exceptional ] and [ marked ] .",
    "recall that @xmath138 is obtained from @xmath186 by deleting @xmath727 and @xmath732 for @xmath733 , and note that since @xmath1 has maximum degree at most @xmath72 we have @xmath3186 .",
    "next we consider the initial phase of the algorithm , during which we embed the neighbourhood @xmath114 of the buffer @xmath103 .",
    "we give three lemmas that are analogous to those used for the @xmath2-graph blow - up lemma .",
    "first we recall the key properties of the selection rule during the initial phase .",
    "since @xmath1 has maximum degree @xmath72 we have @xmath3187 for all @xmath27 .",
    "we embed all vertex neighbourhoods @xmath25 , @xmath116 at consecutive times , and before @xmath27 or any other vertices at distance at most @xmath75 from @xmath27 . then lemma [ not - local ] implies that if we start embedding @xmath25 just after some time @xmath223 then @xmath3188 consists of all vertices in @xmath3189 that have not yet been used by the embedding , for every @xmath96 at distance at most @xmath2 from @xmath27 . recall that @xmath3190_z$ ]",
    "is either a set of restricted positions @xmath3191 with @xmath3192 or is @xmath3193 if @xmath3191 is undefined .",
    "we chose @xmath103 disjoint from @xmath2952 , so @xmath3194 is disjoint from @xmath2963 .",
    "thus for @xmath3195 we have @xmath1339 .",
    "we also recall that @xmath1340 , @xmath1341 , @xmath1342 and @xmath3196 by lemma [ 3observe](ii ) .",
    "since @xmath3197 , for any @xmath96 at distance at most @xmath2 from @xmath27 we have @xmath3198 .",
    "we omit the proof , which is almost identical to that for @xmath2-graphs .",
    "the only modifications are to replace @xmath754 by @xmath2977 , @xmath3129 by @xmath3199 , and @xmath3200 by a sum over at most @xmath2933 neighbours @xmath3201 of @xmath206 ; the estimates are still valid as @xmath2959 .",
    "next we fix a vertex @xmath116 and write @xmath1451 , with vertices listed in the order that they are embedded .",
    "we let @xmath218 be the time at which @xmath219 is embedded . by the selection rule",
    ", @xmath25 jumps the queue and is embedded at consecutive times : @xmath220 for @xmath221 . for convenience",
    "we also define @xmath222 .",
    "note that no vertex of @xmath25 lies in @xmath1453 .",
    "our second lemma shows that for that any @xmath1337 that is not too small , the probability that @xmath1338 does not contain a vertex available for @xmath27 is quite small .",
    "* proof . *",
    "the proof is very similar to that of lemma [ 3initial ] , so we will just describe the necessary modifications .",
    "we note that since @xmath3194 is disjoint from @xmath2963 we do not need to consider restricted positions in this proof .",
    "suppose @xmath227 and that we are considering the embedding of @xmath219 .",
    "we interpret quantities at time @xmath218 with the embedding @xmath228 , for some as yet unspecified @xmath229 .",
    "we define @xmath1472 , @xmath1471 $ ] , @xmath1489 , @xmath1490 and the events @xmath1623 as before ( replacing triples with @xmath0-tuples ) .",
    "the proofs of claims a , b , c , e and the conclusion of the proof are almost identical to before . we need to modify various absolute constants to take account of the dependence on @xmath0 , e.g.  changing @xmath3206 to @xmath3207 in claim a , @xmath2732 to @xmath3208 in claim e , and @xmath1452 to @xmath3209 .",
    "also , when we apply equation ( [ eq : fresh ] ) instead of ( [ eq:3fresh ] ) we will replace @xmath3210 by @xmath3211 .    to complete the proof of the lemma it remains to establish claim d. this requires more substantial modifications , similar to those in lemma [ marked",
    "] , so we will give more details here .",
    "suppose that @xmath1518 and @xmath1535 hold and @xmath597 is a @xmath0-tuple containing @xmath27 .",
    "as before we write @xmath1537 , @xmath1538 , @xmath1539 and @xmath3212 .",
    "again we have @xmath1551 .",
    "we are required to prove that @xmath3213 .",
    "the proof of case d.1 when @xmath1541 is exactly as before , so we just consider the case @xmath1554 .",
    "in lemma [ 3initial ] we divided this into cases d.2 and d.3 , but here we will give a unified argument .",
    "suppose that @xmath1554 .",
    "then @xmath1555 .",
    "also @xmath1556 , so @xmath1287 . by lemma",
    "[ plus - update ] we have @xmath3214 .",
    "now @xmath3215 , so @xmath3216 = ( f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}{\\setminus}y)(y^c)[w_j ] = ( f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}]{\\setminus}y)(y^c).\\ ] ] since @xmath3217 we have @xmath3218{\\setminus}y)(y^c)| } {        we used @xmath3220 and lemma [ plus - props ] with @xmath1548 , as usual denoting the exceptional set by @xmath1561 ; the factor @xmath3173 rather than @xmath3174 accounts for the error from deleting @xmath131 ( which has a lower order of magnitude ) .",
    "we also have latexmath:[${\\sigma}\\le \\sum_{y \\in f_{z_j}(t_j-1 ) }    this counts all pairs @xmath1294 with @xmath1565 $ ] , @xmath229 and @xmath3222 $ ] , so we can rewrite it as @xmath1567 } |f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}](p)|$ ] . by lemma",
    "[ plus - props ] , we have @xmath3223(p)| = ( 1 \\pm { \\epsilon}_*)\\frac{|f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}]|}{|f(t_j-1)^{h+z_j}_{{\\overline}{e}}[w_{j-1}]|}\\ ] ] for all but at most @xmath3224|$ ] sets @xmath3225 $ ] .    since @xmath3226 we have @xmath1570|(1+{\\epsilon } _ * ) \\frac{|f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}]|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| } + { \\epsilon}_*|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]||f_{z_j}(t_j-1)|.\\ ] ] combining this with the lower bound on @xmath1302 we obtain @xmath3227|}{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]| } + { \\epsilon}_*\\frac{|f_{{\\overline}{e}}(t_j-1)[w_{j-1}]||f_{z_j}(t_j-1)|}{|f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}]|}.\\end{aligned}\\ ] ] now @xmath1572| < \\theta_{\\nu } |f_{{\\overline}{e}}(t_j-1)|$ ] by @xmath1535 and @xmath3228||f_{z_j}(t_j-1)|}{|f(t_j-1)^{h+z_j}_{{\\overline}{e}z_j^c}[w_{j-1}]| }   \\le d_u^{-2^k } \\ll { \\epsilon}_*^{-1},\\ ] ] by lemma [ plus - props ] , so @xmath3229    our final lemma for the initial phase is similar to the previous one , but instead of asking for a set @xmath1338 of vertices to contain an available vertex for @xmath27 , we ask for some particular vertex @xmath216 to be available for @xmath27 .      * proof . *",
    "we follow the proof of lemma [ 3-x - to - v ] , indicating the necessary modifications .",
    "we note again that since @xmath3194 is disjoint from @xmath2963 , restricted positions have no effect on any @xmath3195 .",
    "however , we need to consider all vertices within distance @xmath2 of @xmath27 , so some of these may have restricted positions .",
    "the bound in equation ( [ eq : fresh ] ) will be adequate to deal with these . by remark [ rem : nhood ]",
    "we also need to clarify the meaning of neighbourhood constructions , which are potentially ambiguous : @xmath3230 is @xmath3231 when @xmath2822 or undefined when @xmath3232 .    for @xmath735",
    "we define @xmath3233 as before .",
    "we also define @xmath3234 for @xmath3235 with @xmath3168 . as before ,",
    "we define @xmath1645 similarly to @xmath710 , replacing ` embedded ' with ` allocated ' .",
    "suppose @xmath227 and that we are considering the embedding of @xmath219 .",
    "we interpret quantities at time @xmath218 with the embedding @xmath228 , for some as yet unspecified @xmath229 .",
    "we define @xmath3236 as before , except that the condition for @xmath648 now applies whenever @xmath561 .",
    "we define @xmath258 , @xmath374 , @xmath1762 and @xmath3237 as before .",
    "properties ( i - iv ) of @xmath1671 hold as before .",
    "we define the events @xmath1623 as before .",
    "recall that we used the notation @xmath1658 , @xmath3238 , @xmath1706 , @xmath1707 .",
    "here we also define @xmath3239 and @xmath3240 . using the plus complex notation",
    "we can write @xmath3241 to see this , we need to show that @xmath1971 @xmath2018 @xmath3242 . recall that @xmath1660 consists of all sets @xmath1661 such that @xmath1662 for all @xmath546 with @xmath1730 . also , from definition [ def - plus](v ) we have @xmath3242 if and only if @xmath3243 ( this is the restriction from @xmath52 ) and @xmath3244 for every @xmath546 with @xmath3245 .",
    "since @xmath1730 @xmath2018 @xmath3245 , this is equivalent to the condition for @xmath1660 , as required .",
    "the proof of claim a is similar to before . instead of the bound @xmath3246 from equation ( [ eq:3fresh ] )",
    "we use @xmath3247 from equation ( [ eq : fresh ] ) .",
    "we again have @xmath1710 for @xmath735 by lemma [ uniform ] , using the fact that @xmath3248 .",
    "again , @xmath1701 holds by definition and lemma [ uniform ] implies that @xmath1492 holds with high probability .",
    "the arguments for @xmath1493 and @xmath1491 are as before , modifying the absolute constants to take account of their dependence on @xmath0 .",
    "( in the @xmath1493 argument we have @xmath3249 , where we let @xmath519 also denote the submulticomplex @xmath3250 of @xmath2125 . ) the proofs of claims b and e and the conclusion of the lemma are also similar to before . as usual",
    "we replace triple by @xmath0-tuple , @xmath754 by @xmath2977 and @xmath3129 by @xmath3199 . also , in claim e we previously estimated @xmath2039 choices for @xmath597 then @xmath2040 choices for @xmath1671 ; here we estimate @xmath3251 choices for @xmath597 then @xmath3252 choices for @xmath1671 . to complete the proof of the lemma it remains to establish claims c and",
    "d. these require more substantial modifications , so we will give the details here .",
    "we start with claim c. suppose that @xmath1518 and @xmath1755 hold .",
    "we are required to prove that @xmath1788 . for any @xmath344",
    "we write @xmath1789 and @xmath1790 .",
    "consider any unembedded @xmath1654 .",
    "note that @xmath3253 . applying the definitions",
    ", it suffices to show that for all but at most @xmath3254 vertices @xmath3255 , @xmath3256 is @xmath3257-regular with @xmath3258 .",
    "we claim that @xmath3259 to see this we apply definition [ def - plus ] , which tells us that for @xmath3260 , @xmath3261 and @xmath3262 we have @xmath3263 exactly when @xmath3264 and @xmath3265 for all @xmath3088 , @xmath3266 .",
    "therefore @xmath3267 consists of all @xmath3260 such that @xmath3268 and @xmath3269 for all @xmath3088 , @xmath3266 . by definition [ def - update",
    "] this is equivalent to @xmath3270 , i.e.  @xmath3271 as claimed .",
    "( we do not need to delete @xmath131 as @xmath23 and @xmath27 are in @xmath3272 . )    by definition [ def - plus ] , @xmath3273 is @xmath3274 if @xmath3275 or consists of all @xmath3154 with @xmath3276 , @xmath3277 and @xmath3278 for @xmath3279 with @xmath3266 .",
    "thus @xmath3280 is @xmath3281 if @xmath3275 or @xmath3282_{sz_j}^c$ ] if @xmath3283 .",
    "either way we can see that is @xmath3284-regular : in the first case we write @xmath3285 and use @xmath1755 ; in the second case we use lemma [ restrict ] and the fact that @xmath3286 is a copy of @xmath3287 , which is @xmath3288-regular by lemma [ exceptional ] . also by @xmath1755 , @xmath3289 is @xmath3290 if @xmath3275 or @xmath3291 if @xmath3283 .",
    "similarly , @xmath3292 is @xmath1865-regular with @xmath3293 .",
    "since @xmath3294 we have @xmath3295 . by lemma [ neighbour1 ] , for all but at most @xmath3296 vertices @xmath1801 , writing @xmath3297 , @xmath3298 is @xmath864-regular with @xmath3299 this gives the required regularity property for @xmath3256 .",
    "next , @xmath2975 gives @xmath3300 so since @xmath3253 we have @xmath3301 .",
    "this proves claim c.    it remains to prove claim d. suppose that @xmath1518 , @xmath1535 and @xmath1755 hold , @xmath1666 , @xmath1691 and @xmath1875 .",
    "as before we write @xmath1537 , @xmath1664 , @xmath1665 , @xmath2037 .",
    "since @xmath1666 we have @xmath1287 .",
    "we are required to prove that @xmath3302 .",
    "the proof of case d.1 when @xmath1541 is exactly as before , so we just consider the case @xmath1554 .",
    "suppose that @xmath1554",
    ". then @xmath1555 . by lemma",
    "[ plus - update ] we have @xmath3303 we claim that @xmath3304 for the first equality we use ( @xmath3305 ) to get @xmath3306 and substitute @xmath3307 from lemma [ plus - update ] . for the second equality we apply definition [ def - plus ] as follows .",
    "suppose @xmath1311 .",
    "we have @xmath3308 exactly when @xmath3309 and @xmath3310 for all @xmath546 with @xmath3245 .",
    "equivalently , @xmath3260 , @xmath3311 for @xmath3312 with @xmath3313 , @xmath3314 and @xmath3315 for @xmath546 with @xmath3245 and @xmath3316 with @xmath3317 .",
    "note that it is equivalent to assume @xmath3318 , as otherwise the @xmath3319 condition is covered by the @xmath3320 condition .",
    "writing @xmath3321 and using @xmath3322 we have      on the other hand , we have @xmath3326 exactly when @xmath3327 and @xmath3328 for all @xmath3312 with @xmath3313 .",
    "equivalently , @xmath3260 , @xmath3329 for @xmath546 with @xmath3330 , @xmath3311 and @xmath3331 for @xmath3312 with @xmath3313 and @xmath3332 with @xmath3333 .",
    "note that it is equivalent to assume @xmath3334 , as otherwise the @xmath3335 condition is covered by the @xmath474 condition .",
    "writing @xmath3336 and using @xmath3337 we have      this proves ( [ eq : d ] ) .",
    "now , since @xmath3217 we have latexmath:[\\[d^{z'*v}_{z_j , e}(t_j-1 ) = \\left\\ { y \\in f_{z_j}(t_j-1 ) : \\frac{|m_{{\\overline}{e},e}(t_j-1 ) \\cap ( f(t_j-1)^{j'+v}(v^c)^{h+z_j}_{{\\overline}{e}z_j^c } { \\setminus}y)(y^c)| } {    writing @xmath1561 for the set of vertices @xmath3341 for which we do not have @xmath3342 we have @xmath3343 by lemma [ average ] . here we use the fact that the ` double plus ' complex is @xmath3134-regular ; this proof of this is similar to that of lemma [ plus - props](i ) : @xmath3344 is @xmath3345-regular , @xmath3346 is @xmath3347-regular by lemma [ neighbour1 ] , @xmath3348 is @xmath3134-regular",
    ". then latexmath:[\\[\\begin{aligned } { \\sigma } & : = \\sum_{y \\in d^{z'*v}_{z_j , e}(t_j-1 ) } |m_{{\\overline}{e},e}(t_j-1 ) \\cap ( f(t_j-1)^{j'+v}(v^c)^{h+z_j}_{{\\overline}{e}z_j^c } { \\setminus}y)(y^c)| \\\\ & > \\theta_{\\nu^ * } \\sum_{y \\in d^{z'*v}_{z_j , e}(t_j-1){\\setminus}b'_{z_j } }    & >   ( 1 - 2{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^{z'*v}_{z_j , e}(t_j-1)|-{\\epsilon}_*|f(t_j-1)_{xz_j}(v)|)\\ \\frac{|f(t_j-1)^{j'+v}(v^c)^{h+z_j}_{{\\overline}{e}z_j^c}|}{|f(t_j-1)_{xz_j}(v)| } \\\\ & = ( 1 - 2{\\epsilon}_*)\\theta_{\\nu^ * } ( |d^{z'*v}_{z_j , e}(t_j-1)|/|f(t_j-1)_{xz_j}(v)|-{\\epsilon } _ * )      this counts all pairs @xmath1294 with @xmath3350 , @xmath1801 and @xmath3351 , so we can rewrite it as @xmath3352 sets @xmath3353 , we have @xmath3354 ( recall that the ` double plus ' complex is @xmath3134-regular and use lemma [ average ] . )",
    "therefore @xmath3355 combining this with the lower bound on @xmath1302 we have @xmath3356 , definition [ def - plus ] and equation ( [ eq:+ ] ) give @xmath3357 , so @xmath3358 by @xmath1535 .",
    "we also have @xmath3359(v ) ( the statement is only for @xmath2781 , but the estimate for the densities is valid for any @xmath3134-regular complex ) . therefore @xmath3360    the analysis for the conclusion of the algorithm is very similar to that for @xmath2-graphs , with the usual modifications to absolute constants to account for their dependence on @xmath0 .",
    "the only important difference is to take account of restricted positions .",
    "lemma [ 3main ] ( the ` main lemma ' ) holds , provided that we assume that the set @xmath258 is disjoint from the set @xmath2963 of vertices with restricted positions .",
    "we applied lemma [ 3main ] in the proof of theorem [ 3final ] to show that it is very unlikely that the iteration phase aborts with failure .",
    "this required an estimate for the probability that a given set @xmath259 of size @xmath3361 is contained in @xmath3362 ( the vertices that have ever been queued ) .",
    "since @xmath2938 and @xmath3363 , we can apply the same argument to @xmath3364 , which has size at least @xmath3365 .",
    "the remainder of the proof of theorem [ 3final ] is checking hall s condition for the sets @xmath3366 , where @xmath3367 .",
    "no changes are required here , as we chose the buffer @xmath103 to be disjoint from @xmath2963 .",
    "this completes the proof of theorem [ blowup ] .",
    "we conclude with some lemmas that will be useful when applying the blow - up lemma .",
    "we start with the analogue of lemma [ 3del ] , showing that one can delete a small number of vertices to enforce super - regularity .",
    "[ del ] suppose @xmath3368 , we have a multi-@xmath0-complex @xmath2125 on @xmath2697 $ ] with maximum degree at most @xmath2933 , and @xmath407 is an @xmath2125-indexed marked complex on @xmath2764 such that when defined @xmath645 is @xmath2289-regular , @xmath661 , @xmath2770 when @xmath3168 and @xmath2269 when @xmath2769 .",
    "then we can delete at most @xmath2290 vertices from each @xmath382 , @xmath2707 to obtain an @xmath3369-super - regular marked complex @xmath2292 .",
    "* proof . *",
    "the proof is similar to that of lemma [ 3del ] , so we will just sketch the necessary modifications . similarly to before , for any @xmath3370 such that @xmath2772 , @xmath2769 and @xmath645 is defined we let @xmath3371 be the set of vertices @xmath621 for which @xmath3372 .",
    "we also let @xmath3373 be the set of vertices @xmath621 such that we do not have @xmath3374 and @xmath2774 is @xmath43-regular with @xmath3375 for @xmath3376 . as before we have @xmath3377 and @xmath3378 .",
    "next , consider any @xmath0-tuple @xmath23 containing at least one neighbour of @xmath206 in @xmath2125 such that @xmath645 is defined , and any subcomplex @xmath349 of @xmath3379 such that @xmath3380 is defined for all @xmath2302 .",
    "we let @xmath2303 be the set of vertices @xmath621 for which @xmath2304 .",
    "note that we only need to consider @xmath23 containing at least one neighbour of @xmath206 in @xmath2125 , as otherwise we have @xmath3381 , and @xmath661 by assumption .",
    "we let @xmath2314 be the union of all @xmath3382 with @xmath3383 , @xmath3384 .",
    "recall from lemma [ pre - to - plus ] that @xmath3385 .",
    "if @xmath2369 then @xmath3386 is @xmath168-regular by regular restriction and @xmath3387 by lemma [ average ] . then @xmath3388 satisfies @xmath3389 we also have @xmath3390 , which counts all pairs @xmath2332 with @xmath2333 , @xmath621 and @xmath3391 . by lemma [ average ]",
    "we have @xmath3392 for all but at most @xmath3393 sets @xmath3394 .",
    "since @xmath3395 we have @xmath3396 combining this with the lower bound on @xmath1302 and using @xmath3397 we obtain @xmath3398 .",
    "let @xmath2293 be the union of all such sets @xmath3371 and @xmath2303 .",
    "since @xmath3399 we have @xmath2305 as in step 1 of lemma [ 3del ] .",
    "we define @xmath2342 , @xmath2294 and obtain @xmath3400 as in step 2 of lemma [ 3del ] .",
    "now we delete @xmath2348 from @xmath382 for every @xmath2707 ; as in step 3 of lemma [ 3del ] this gives an @xmath3369-super - regular marked complex @xmath2292 .",
    "[ super - restrict]*(super - regular restriction ) * suppose @xmath3401 , we have a multi-@xmath0-complex @xmath2125 , and @xmath407 is a @xmath2768-super - regular marked @xmath2125-indexed complex on @xmath2764 with @xmath1085 for @xmath2707 .",
    "suppose also that we have @xmath44 for @xmath2707 , write @xmath3402 , @xmath2388 $ ] , @xmath2389 $ ] , and that @xmath2390 and @xmath3403 whenever @xmath3202 with @xmath648 lies over @xmath3404 and @xmath3405 .",
    "then @xmath2394 is @xmath3406-super - regular .",
    "more generally , the same proof shows that super - regularity is preserved on restriction to a dense regular subcomplex @xmath1227 , provided that the singleton parts of @xmath1227 have large intersection with every vertex neighbourhood .",
    "more precisely , suppose @xmath407 is as in lemma [ super - restrict ] and @xmath1227 is an @xmath82-regular subcomplex of @xmath34 with @xmath3407 when defined and @xmath3408 whenever @xmath3202 with @xmath648 lies over @xmath3404 , @xmath3405 and @xmath3409 is defined .",
    "then @xmath2394 is @xmath3410-super - regular .",
    "next we will reformulate the blow - up lemma in a more convenient ` black box ' form .",
    "the following definition of robustly universal is more general than that used for @xmath2-graphs , in that it allows for restricted positions .",
    "[ def - robust ] * ( robustly universal ) * suppose @xmath2125 is a multi-@xmath0-complex @xmath2125 and @xmath519 is an @xmath2125-indexed complex on @xmath3411 with @xmath2426 for @xmath2707 .",
    "we say that @xmath519 is _",
    "@xmath3412-robustly @xmath72-universal _ if whenever    * @xmath2428 with @xmath2429 such that @xmath3413 , @xmath2431 $ ] satisfy @xmath2432 whenever @xmath2769 , @xmath2433 is defined , @xmath2396 , @xmath2434 , * @xmath374 is an @xmath2125-indexed complex on @xmath3414 of maximum degree at most @xmath72 with @xmath2436 for @xmath2707 , * @xmath3415 with @xmath3416 for all @xmath2707 , and @xmath3417 with @xmath3418 for @xmath2937 ,      more generally , one can allow restrictions to regular subcomplexes in both conditions ( i ) and ( iii ) of definition [ def - robust ] , but for simplicity we will not formulate the definition here . as before , one can delete a small number of vertices from a regular complex with a small number of marked @xmath0-tuples to obtain a robustly universal complex . as for theorem [ 3robust ] ,",
    "the proof is immediate from lemma [ super - restrict ] , definition [ def - robust ] and theorem [ blowup ] .",
    "[ robust ] suppose @xmath3423 , we have a multi-@xmath0-complex @xmath2125 on @xmath2697 $ ] with maximum degree at most @xmath2933 and @xmath2934 , @xmath34 is an @xmath43-regular @xmath2125-indexed complex on @xmath2764 with @xmath3424 for @xmath3425 , @xmath2770 when @xmath3168 and @xmath2269 when @xmath2769 , and @xmath2442 with @xmath661 when defined .",
    "then we can delete at most @xmath2290 vertices from @xmath382 for @xmath2707 to obtain @xmath2350 and @xmath2443 so that      finally , we mention that one can allow much smaller densities in the restricted positions , provided that one makes an additional assumption to control the marking edges .",
    "we can replace @xmath2947 by @xmath2779 in condition ( v ) of theorem [ blowup ] , provided that we add the following additional assumptions :    * @xmath3429 when @xmath2769 , @xmath2939 is defined , @xmath2772 and @xmath3430 , * @xmath3431^{i_v})_s| \\le \\theta|g[{\\gamma}]^{i_v}_s|$ ] for any submulticomplex @xmath349 of @xmath2125 , when @xmath2769 , @xmath621 and @xmath3432 .    note that these conditions ensure that the marked edges are controlled in @xmath3433 $ ] exactly as in conditions ( ii ) and ( iii ) of super - regularity , so the proof goes through as before . in this general form",
    "there is no simplification to be gained by reformulating the statement in a black box form .",
    "we suppressed this refined form in the statement of theorem [ blowup ] to avoid overburdening the reader with technicalities , but we note that it may be needed in some applications .",
    "indeed , one may well have to generate restricted positions using neighbourhood complexes in @xmath34 , and then @xmath2947 will be of the order of the densities in @xmath34 .",
    "the theory of regularity and super - regularity for hypergraphs is considerably more involved than that for graphs . as explained in section [ 3reg ] , these technicalities can not be avoided , but the black box reformulation in lemma [ robust ] should make the hypergraph blow - up lemma more convenient for future applications .",
    "the graph blow - up lemma has had many applications in modern graph theory , so it is natural to look for hypergraph generalisations of these results .",
    "however , many such applications build on basic results for graphs for which the hypergraph analogue is unknown .",
    "for example , in our application in section [ apps ] we only needed a matching , and were able to rely on kahn s matching theorem , which is already quite a difficult result .",
    "thus one may expect it will take longer for the hypergraph blow - up lemma to achieve its full potential .",
    "another question for future research is to obtain an algorithmic version of our theorem , along the lines of the algorithmic graph blow - up lemma in @xcite . in applications",
    "this could be combined with an algorithmic version of hypergraph regularity given by @xcite .",
    "a rather different direction of research would be along the lines of the ` infinitary ' versions of hypergraph regularity theory , whether probabilistic @xcite , analytic @xcite , model theoretic @xcite or algebraic @xcite .",
    "it is natural to ask whether the blow - up lemma has an interpretation in any of these frameworks .",
    "further refinements could include estimating the number of embeddings , rather than just proving the existence of a single embedding as in this paper . here",
    "it may be helpful to note that one can combine lemma [ x - to - v ] with martingale estimates to show that with high probability there will be at least @xmath3434 vertices @xmath3435 such that @xmath1639 .",
    "we also note that small improvements to the tail decay of our martingales may be obtained from the optional sampling theorem ( see e.g.  @xcite p.  462 ) .",
    "one could also try to obtain ( nearly ) perfect edge - decompositions of super - regular complexes into copies of a given bounded degree hypergraph .",
    "for example , one could ask for hypergraph generalisations of a result of frieze and krivelevich @xcite that one can cover almost all edges of an @xmath43-regular graph by edge - disjoint hamilton cycles",
    ".    * acknowledgements . *",
    "i thank daniela khn , deryk osthus , richard mycroft and mathias schacht for drawing my attention to a significant oversight in an earlier version of this paper . that version contained a weaker version of the blow - up lemma , which assumed a dense environment that can not be guaranteed in many applications .",
    "in particular it was not adequate for the application that i give in this paper .",
    "i also thank the anonymous referees , daniela khn , deryk osthus and richard mycroft for carefully reading and commenting extensively on various versions of this paper , and mathias schacht for explaining @xcite to me .",
    "t. austin , on exchangeable random variables and the statistics of large graphs and hypergraphs , _ probability surveys _ * 5 * ( 2008 ) , 80145 .",
    "k. azuma , weighted sums of certain dependent random variables , _ thoku math .",
    "j. _ * 19 * ( 1967 ) , 357367 .",
    "j. komls and m. simonovits , szemerdi s regularity lemma and its applications in graph theory , combinatorics , paul erds is eighty , vol .",
    "2 ( keszthely , 1993 ) , 295352 , bolyai soc . math .",
    ", 2 , jnos bolyai math .",
    "budapest , 1996 .",
    "e. szemerdi , regular partitions of graphs , problmes combinatoires et thorie des graphes ( colloq .",
    "cnrs , univ .",
    "orsay , orsay , 1976 ) , pp .",
    "399401 , colloq .",
    "cnrs , 260 , cnrs , paris , 1978 ."
  ],
  "abstract_text": [
    "<S> we obtain a hypergraph generalisation of the graph blow - up lemma proved by komls , sarkzy and szemerdi , showing that hypergraphs with sufficient regularity and no atypical vertices behave as if they were complete for the purpose of embedding bounded degree hypergraphs . </S>"
  ]
}