{
  "article_text": [
    "the aim of this paper is to review some technical aspects on diffusion approximation arising in queues and their networks in heavy traffic .",
    "we only consider open networks which have exogenous arrivals .",
    "the diffusion approximation is meant to use a diffusion process for approximation . here , a diffusion process is a continuous time strong markov process which is characterized by a stochastic integral equation using a brownian motion and continuous processes with bounded variations ( e.g. , see ( [ eqn : diffusion process 1 ] ) for this integration ) .",
    "this diffusion process has a continuous path , and is called it diffusion in some literature , but we will just call it a diffusion process . a comprehensive introduction about",
    "it can be found in harrison @xcite ( see also kushner @xcite for control problems ) .",
    "mathematical details can be found in section 5 of protter @xcite .",
    "queueing models can not be described by diffusion processes in general because customers are discrete in nature , and therefore their sample paths are not continuous",
    ". however , analytical studies on queueing models are generally very hard particularly for queueing networks except for special cases .",
    "this motivates to use diffusion processes for their approximations because diffusion processes are characterized by fewer modeling parameters , that is , fewer primitive data , and have simpler state spaces .",
    "for example , the first two moments including covariances are typical primitive data for diffusion processes .",
    "thus , diffusion approximation may be considered as a two - moment approximation .",
    "their state spaces are finite dimensional vector spaces , while queueing processes require supplementary states for describing their dynamics .",
    "those two features are analytical advantages of diffusion approximation .",
    "however , one must be careful of such simplification because important information might be lost .",
    "another motivation for diffusion approximation comes from queueing dynamics . in general , queues and their networks",
    "are input - output systems , and inputs and outputs can be described by additive processes .",
    "for example , a counting process of arriving customers and accumulated workload brought by customers are such additive processes .",
    "if the additive process has independent or weakly dependent increments , then it is natural to use brownian motion for approximation . in this case , queueing characteristics such as queue lengths are functionals of brownian motion , which may not be easily analyzed particularly for the multi - dimensional case , but fewer primitive data are advantage to study feature of the original model .",
    "diffusion approximation is so versatile , and the literature about it is so huge .",
    "it is hard to survey its whole area .",
    "thus , we focus on three things .",
    "the first is about a method to derive diffusion approximations .",
    "we are only interested in those approximations supportable by theory .",
    "namely , they should be asymptotically exact under certain limiting operations . because objects of our interest are a stochastic process and its stationary distribution",
    ", the limiting operation is convergence in distribution under scaling of state ( and time if necessary ) . here , we will show that scaling in time may not be necessary if we are only concerned with the stationary distribution .",
    "this is different from the standard approach of diffusion approximation , but may not be surprising because the stationary distribution is independent of time .",
    "furthermore , kingman @xcite uses such scaling for the waiting time of a single server queue .",
    "the next step is to derive approximations based on those limiting results .",
    "however , this step is often ignored in the literature because it may be considered obvious .",
    "for example , the limiting processes and distributions may be considered as approximations themselves .",
    "here is a gap between mathematical results and approximations . to fill this gap ,",
    "we go back to the original idea of kingman @xcite .",
    "he proposes an approximation for the stationary waiting time distribution for a single server queue by moving a scaling factor into the limiting distribution .",
    "we think this is a right way to have theoretical support .",
    "of course , we may be motivated by intuitive arguments , and should not exclude heuristics .",
    "however , it also is important to legitimize them by theory .",
    "the second is about a class of queueing models .",
    "our primary interest is in queueing networks , but also consider some of single node queues because they are components of network systems .",
    "key features of a queueing network are routing of customers and idling of servers .",
    "there are two types of routing , choosing next nodes or next types .",
    "the latter is used for a multi - class queueing network . in either case , we assume markovian routing , which means that nodes or types are chosen with given probabilities only depending on the current nodes or types , respectively , independently of everything else",
    ". if exogenous arrivals at nodes are subject to independent renewal processes , if service times at each server are @xmath0 ( independent identically distributed ) and if service discipline is first - come first - served , fcfs for short , then this network model is called a generalized jackson network , gjn for short .",
    "this network is a main subject of this review .",
    "the third is about objects for approximations . as we mentioned above , a stochastic process describing a model",
    "is a primary object .",
    "however , from the application viewpoint , its stationary distribution is also very important .",
    "other objects are moments and tail asymptotics of the stationary distribution .",
    "note that the weak convergence of the sequence of stochastic processes does not imply that of their stationary distributions .",
    "that is , the exchange of those limits needs proofs .",
    "if it is possible , the approximation is considered to have better support .",
    "similarly , the convergence of the sequence of the stationary distributions does not imply the convergences of their moments and tail asymptotics .",
    "if they do so , we may say the approximation has better quality .",
    "theoretical support for diffusion approximation generally requires a heavy traffic condition . under this condition ,",
    "the traffic intensity at each node is close to unit , and therefore the behavior of a small queue at a fixed node is ignorable .",
    "in other words , diffusion approximation is for the behavior of a large queue .",
    "this greatly simplifies diffusion approximation for a single queue . on the other hand , in a queueing network , there are multiple queues at different nodes , and they may not simultaneously get large .",
    "for example , there may be idle servers when some queues are large .",
    "this is a crucial aspect of the queueing network , and should not be excluded in its approximation .",
    "thus , it is interesting to see how such a behavior is implemented in diffusion approximation .",
    "historically , the study of diffusion approximation started from single node queues . among them , a @xmath1 queue is known as a basic model .",
    "this model assumes that customers arrive according to a renewal process , there is a single server and service times are @xmath0 even this simple model is known to be hard to get the stationary distribution in closed form .",
    "this motivated kingman @xcite to originate a two - moment approximation for the stationary waiting time distribution of the @xmath1 queue in heavy traffic .",
    "this approximation is generalized for a @xmath2 queue with homogeneous servers by kllerstrm @xcite .",
    "those studies directly consider the stationary distribution , so do nothing with diffusion approximation .",
    "in particular , scaling is taken only for state , as we already mentioned",
    ". however , their stationary distributions are identical with those obtained by the standard diffusion approximations ( e.g. , compare ( [ eqn : w convergence 1 ] ) with corollary  [ cor : gjn 1 ] together with ( [ eqn : w 2 ] ) ) .",
    "independent of those studies , borovkov @xcite studied diffusion approximation for the transient behavior of a many server queue .",
    "it refers to provkov s 1963 paper , but we are unable to get this paper",
    ". however , iglehart and whitt @xcite credited that those russian work is one of the origin of diffusion approximation .",
    "thus , the work may be the first one to study diffusion limits for a single queue by scaling state and time .",
    "the book @xcite of borovkov is a good source for those studies .",
    "a next step was an extension from a single queue to a feedforward network .",
    "this step was firstly taken by seminal papers of iglehart and whitt .",
    "they obtained diffusion processes as weak limits of the sequence of suitably scaled processes , called a diffusion scaling , in @xcite .",
    "their results are basically for a single queue because functional relations of input and output of a single queue are essential . for example",
    ", they only studied a marginal process of a given node , but were unable to study a joint process for multiple nodes .",
    "however , there are two things to be notable .",
    "the first is an idea for process limit , that is , a weak limit of the sequence of stochastic processes .",
    "the second is that a reflecting brownian motion is obtained as one of the process limits .",
    "this means that the diffusion approximation is more than a stochastic process version of the central limit theorem .",
    "this approximation is referred to as a functional limit theorem under normalization similar to that of the central limit theorem .",
    "a similar approach is also studied for a single queue in @xcite .",
    "a real step toward a queueing network was taken by harrison @xcite , who considered a tandem queue with two nodes , and got a two - dimensional reflecting brownian motion on the nonnegative orthant .",
    "it still uses an explicit functional relation of input and output , but it was a big step to move from one - dimensional diffusion process to the two - dimensional one .",
    "harrison and reiman @xcite studied this reflecting process for an arbitrary dimension .",
    "it is a multidimensional reflecting brownian motion on the nonnegative orthant .",
    "because it has a semi - martingale representation , it is called a semi - martingale reflecting brownian motion , srbm for short .",
    "those studies were culminated by the work of reiman @xcite .",
    "it obtains srbm as a weak limit of suitably scaled processes for gjns , where scaling is taken for both state and time .",
    "this scaling is called diffusion scaling , and the weak limit is called a diffusion limit .    another source for diffusion approximation is heuristic arguments . a queueing network including gjn is analytically intractable except for some special cases .",
    "typical examples for this exceptional case are a jackson network and its extensions , called product form networks due to kelly @xcite ( see @xcite for further development in this line ) .",
    "they are analytically tractable , but require stronger assumptions .",
    "thus , there have been many attempts for heuristic approximations for a gjn , particularly for its stationary distribution .",
    "for example , the diffusion approximation of kobayashi @xcite is one of the earliest work . among them",
    ", queueing network analyzer , qna for short , proposed by whitt @xcite , is well known .",
    "this is a heuristic approximation based on the product form solution and the two - moment approximation for the queue length at each node .",
    "the concept of qna has been widely accepted , and similar types of approximations have been considered for more complicated network models ( e.g. , see @xcite ) .",
    "however , it lacks the theoretical supports which we have discussed .",
    "a theoretical improvement of qna was studied by harrison and nguyen @xcite .",
    "they propose another approximation concept , called qnet , incorporating information from a diffusion limit for the sequence of gjns in heavy traffic .",
    "this limiting process is an srbm .",
    "we note that this qnet is different from qnet ( alternatively spelled as q - net ) which has been developed for business solutions by ibm .",
    "the srbm is much simpler than the gjn , and its primitive data can be expressed by the mean and covariances of brownian motion and the reflecting matrix .",
    "an approximation based on it may be considered as a two - moment approximation . however , the stationary distribution of the srbm is still hard to get except for either one - dimensional case or the skew - symmetric case .",
    "the latter corresponds to the jackson network , and has a similar product form solution .",
    "thus , qnet requires approximation for the stationary distribution of the srbm . for this",
    ", it uses either the product form or numerically approximated solution for the stationary distribution .",
    "thus , qnet may not be fully supported by theory .",
    "nevertheless , qna and qnet had great impacts on theoretical studies for diffusion approximation through their design concepts and practical applications using their software packages .    in present days , diffusion approximations",
    "have been studied in various models including those with customer abandonment and using a different scaling in state , namely , increasing the number of servers , which is called halfin - whitt regime .",
    "we will briefly discuss them .",
    "this paper is made up by seven sections . in section  [",
    "sect : single - class ] , we introduce a stochastic model for the gjn , that is , generalized jackson network , with a single - class of customers .",
    "this section have four subsections .",
    "in section  [ sect : primitive ] , we start with a sample path level of modeling , then introduce stochastic assumptions for describing a gjn in section  [ sect : stochastic ] .",
    "we are devoted to the single node case of the gjn , that is , the @xmath3 queue , in sections [ sect : kingman ] and [ sect : extension to queue length ] .",
    "a main interest of these two subsections is to see how we should scale state and/or time to get a two - moments approximation for the stationary distribution . for this",
    ", we first review kingman s @xcite approximation for the waiting time in section  [ sect : kingman ] , which is only scaled by state . in section  [",
    "sect : extension to queue length ] , we then consider the queue length process in continuous - time , and show that scaling is only required for state similarly to the waiting time case .",
    "they are turned out to be identical with the corresponding diffusion approximations .",
    "we conjecture that similar approximations can be obtained for the gjn with an arbitrary number of nodes .",
    "in section  [ sect : diffusion ] , we consider a diffusion approximation for a stochastic process .",
    "this section is divided into four subsections . in section  [",
    "sect : srbm ] , we formally define the srbm on a nonnegative multidimensional orthant , and derive a stationary equation to characterize the stationary distribution of srbm , which is called a basic adjoint relationship , bar for short ( e.g. , see @xcite ) . in section  [ sect : basic ] , we present basic results for deriving a diffusion process as process limit . in section  [",
    "sect : process limit ] .",
    "those results will be used to derive the srbm from the queue length processes of the gjns under scaling state and time .",
    "we finally review the case that each node may have multiple servers in section  [ sect : extension to many servers ] .",
    "in section  [ sect : quality ] , we consider quality of diffusion approximations for the stationary distribution of the gjn and some other characteristics . for the single node case , that is , a single queue ,",
    "this approximation can be directly obtained for the stationary distribution as discussed in section  [ sect : extension to queue length ] . in other words ,",
    "a limiting process is not needed to get a weak limit of the stationary distribution .",
    "this also would be the case for the network case .",
    "however , in the literature , the srbm is firstly obtained as a process limit , then the stationary distributions of the gjns under diffusion scaling are shown to weakly converges to that of the srbm .",
    "surprisingly , this verification has been relatively recently done by gamarnik and zeevi @xcite then by budhiraja and lee @xcite under weaker assumptions .",
    "we also review about diffusion approximations for moments and tail asymptotics of the stationary distribution .",
    "in section  [ sect : multi - class ] , we consider a multi - class queueing network .",
    "that is , types are attributed to customers , and nodes are exclusively attributed to types .",
    "thus , the type of a customer uniquely specifies its service node .",
    "each type at each node has its own primitive data , inter - arrival times ( if it specifies exogenous arrivals ) and service times .",
    "customers may change their types when their services are completed .",
    "we assume that this change of types is markovian .",
    "this network can not be handled by single - class networks in general because there may be more than one types of customers at a single node . in the nineties ,",
    "multi - class queueing networks were highlighted because such models are found useful in production lines and unconventional stability conditions have been reported ( e.g. , see @xcite ) .",
    "these facts in addition to analytical difficulty stimulated people to study diffusion approximation for a multi - class queueing network .",
    "harrison and nguyen @xcite proposed a grand design for such diffusion approximation with some conjectures .",
    "right after that , dai and wang @xcite negatively answered to those conjectures .    for a multi - class queueing network ,",
    "a problem is under what conditions diffusion approximation exists in what sense .",
    "harrison @xcite suggested to consider non - conventional diffusion approximation , but there seems no good alternative at least for open queueing networks .",
    "thus , we here only consider the conventional diffusion approximation by diffusion scaling and srbm .",
    "as for the conditions , state - space collapse and the completely-@xmath4 condition for reflection matrix @xmath5 have been recognized as key features .",
    "we review diffusion approximation for a multi - class queueing network in this line .",
    "in section  [ sect : halfin - whitt ] , we review another type of diffusion approximations . consider a @xmath6 queue . for each fixed @xmath7",
    ", we can employ the standard diffusion approximation for this model .",
    "however , it ignores information on the number of busy servers , equivalently , the number of idle servers , so this approximation may be too rough for large @xmath7 .",
    "this motivated halfin and whitt @xcite to increase both of the arrival rate and the number @xmath7 of servers for a @xmath8 queue while keeping the service time distribution , which is exponential in this model .",
    "this approximation also assumes heavy traffic condition , and called halfin - whitt regime .",
    "its limiting process is also a diffusion process but state - dependent .",
    "this approximation and its variants have been largely studied because they can be used for call center application .",
    "we finally give some concluding remarks in section  [ sect : concluding ] .",
    "we first introduce a stochastic process for a single - class queueing model . here",
    ", a single - class means that there is only one customer type , in other words , customers have no type .",
    "we assume that the model is open , and has exogenous arrivals .",
    "the system is composed of a finite number of nodes which have single waiting lines with possibly multiple servers , where waiting capacity is assumed to be infinite .",
    "service times are attached at each servers .",
    "we assume that customers are served in the first - come first - served manner .",
    "if there are multiple nodes , customers may be routed to other nodes .      in this section ,",
    "we assume that each node has a single server for simplicity .",
    "we describe this model starting at time @xmath9 by the following notations .",
    "let @xmath10 be the set of nodes , where @xmath11 is a positive integer . for node @xmath12 ,",
    "the sequence of service times @xmath13 is attached , where @xmath14 is the set of natural numbers .",
    "denote the set of nodes which have exogenous arrivals by @xmath15 , and , for @xmath16 , let @xmath17 be the inter - arrival time between the @xmath18-th and @xmath19-th exogenous arrivals at node @xmath20 for @xmath21 .",
    "note that @xmath17 may be @xmath9 , which means a batch arrival .",
    "let @xmath22 is the set of all nonnegative integers .",
    "for @xmath23 , let @xmath24 be the number of customers who are routed to node @xmath25 among the first @xmath26 departures from node @xmath20 , where @xmath27 .",
    "this @xmath25 may be @xmath9 , which means that customers leave the network .",
    "thus , @xmath28 specify this queueing network .",
    "we call them primitive data . to exclude trivial case , we assume that @xmath29 .    for @xmath16 and @xmath30 ,",
    "let @xmath31 then the first two of the primitive data in ( [ eqn : primitive 1 ] ) can be replaced by @xmath32 we denote the counting processes for arrivals and service completions at node @xmath20 by @xmath33 where @xmath34 for @xmath35 .",
    "then , ( [ eqn : primitive 3 ] ) is equivalent to ( [ eqn : primitive 2 ] ) , so can be used for the primitive data as well .",
    "the advantage of ( [ eqn : primitive 3 ] ) is that the nodes which have no arrivals are not necessarily distinguished .",
    "namely , we have just put @xmath34 for such nodes .",
    "it should be noted that @xmath36 counts exogenous arrivals at node @xmath20 but @xmath37 may not count departures from node @xmath20 .",
    "the latter does so if the server is always busy up to time @xmath38 .",
    "so far , we have assumed nothing about probability laws on those primitives , but we can define queue length and workload in sample path sense .",
    "let @xmath39 be the number of customers at node @xmath20 at time @xmath38 , and @xmath40 be the total busy time of the server at node @xmath20 up to time @xmath38 .",
    "then , it is easy to see that , for @xmath41 and @xmath12 , @xmath42 because @xmath43 is the number of departing customers from node @xmath20 in the time interval @xmath44 $ ] , where @xmath45 is the indicator function of the statement `` @xmath46 '' , which takes 1 if the statement is true , and vanishes otherwise .",
    "conversely , it is not hard to see that @xmath47 and @xmath48 for @xmath12 are uniquely determined by ( [ eqn : l 1 ] ) and ( [ eqn : u 1 ] ) .",
    "hence , we can define them by those equations .",
    "since @xmath49 is the total number of customers arrived at node @xmath20 by time @xmath38 , the workload @xmath50 at node @xmath20 can be defined as @xmath51 let @xmath52 and @xmath53 be the vectors whose @xmath20-th entries are @xmath39 and @xmath50 , respectively .",
    "thus , we have obtained the mappings from the primitive data and the initial data @xmath54 and @xmath55 to @xmath56 and @xmath57 .",
    "these mappings are called reflection mappings . in what follows",
    "we mainly consider the queue length process @xmath58 because similar arguments can be applied for @xmath59 with help of @xmath58 .",
    "we now introduce the following stochastic assumptions on the primitive data ( [ eqn : primitive 1 ] ) .",
    "* @xmath60 with @xmath16 , @xmath13 and @xmath61 with @xmath12 are independent .",
    "* @xmath60 for @xmath16 and @xmath13 for @xmath12 are sequences of @xmath0 random variables taking values in @xmath62 , and , for each @xmath20 , @xmath17 and @xmath63 have finite and positive first moments , which are denoted by @xmath64 and @xmath65 , respectively .",
    "let @xmath66 for @xmath67 and @xmath68 for @xmath35 .",
    "thus , @xmath69 is the exogenous arrival rate at node @xmath12 .",
    "similarly , the service rate at node @xmath20 is denoted by @xmath70 .",
    "* @xmath61 is a discrete - time @xmath71-dimensional counting process with @xmath0 increments for each @xmath12 , and the increment @xmath72 takes values 0 or 1 , and has the distribution given by @xmath73 let @xmath74 be the @xmath11-dimensional square matrix whose @xmath75 entry is @xmath76 for @xmath77 , and let @xmath78 be the @xmath71-dimensional square matrix whose @xmath75 entry is @xmath76 for @xmath79 , where @xmath80 for @xmath81 and @xmath82 .",
    "we assume that @xmath78 is stochastic and irreducible , which means that customers will leave the network in finite times with probability one .",
    "the @xmath11-node queueing network satisfying those three sets of the conditions is called a generalized jackson network , gjn for short .    under the assumptions ( [ sect : single - class]a)([sect : single - class]c )",
    ", we can construct a markov process for @xmath58 supplemented by auxiliary characteristics .",
    "to this end , let @xmath83 and @xmath84 be the residual times for the next exogenous arrival and service completion , respectively , at node @xmath20 at time @xmath38 , where @xmath85 for @xmath35 and @xmath86 if the server at node @xmath20 is idle at time @xmath38 .",
    "they are formally defined as @xmath87 denote the vectors whose @xmath20-th entries are @xmath83 and @xmath83 by @xmath88 and @xmath89 .",
    "then , it is not hard to see that @xmath90 is a markov process .",
    "furthermore , it is a strong markov process ( see , e.g. , @xcite ) .",
    "we refer to this process as a supplemented markov process for the gjn .",
    "we next consider the stability of this markov process , that is , the condition under which the stationary distribution exists . recall that @xmath69 is the exogenous arrival rate at node @xmath12 .",
    "consider the set of the following traffic equations for variables @xmath91 with @xmath12 .",
    "@xmath92 denote the @xmath11-dimensional vectors whose entries are @xmath69 and @xmath91 by @xmath93 and @xmath94 , respectively .",
    "since @xmath95 is invertible by ( [ sect : single - class]c ) , the solution @xmath94 for the equations ( [ eqn : traffic 1 ] ) is given by @xmath96 where @xmath97 is the transposition of @xmath74 . because @xmath29 and the irreducibility of @xmath78 in ( [ sect : single - class]c ) , @xmath94 is positive .",
    "let @xmath98 , and denote the @xmath11-dimensional vector whose @xmath20-th entry is @xmath99 by @xmath100 .",
    "then , it is well known that the supplemented markov process is stable if and only if @xmath101 where the inequality of vectors represents entry - wise inequalities ( see , e.g. @xcite ) .      in this and",
    "next sections , we consider the @xmath3 queue , as a pilot example for diffusion approximation . as we mentioned in section  [ sect : introduction ] , kingman @xcite is the first one to get the approximation which corresponds with diffusion approximation .",
    "he directly considered the stationary distribution of the waiting times in the @xmath3 queue , and derived a limiting distribution under a certain scaling , using the first two moments of the interarrival and service times . in his formulation ,",
    "no continuous - time parameter is involved , which is different from those in the previous two sections",
    ". nevertheless , his approximation agrees with that obtained from diffusion approximation .    here",
    "two questions arise .",
    "is a similar approximation possible for the stationary distribution of the queue length process @xmath102 ?",
    "if so , how it is related to diffusion approximation  ? to address those questions for the @xmath3 queue , which is the single node case of gjn , we first summarize kingman s @xcite approximation for the stationary waiting time distribution , and make clear how approximation is produced from the limiting distribution .",
    "we then answer the questions in the next section .",
    "we use the same notations of the gjn introduced in the previous two sections , but drop the index specifying a node for simplicity . for example , @xmath103 and @xmath104 stand for @xmath105 and @xmath106 .",
    "we further drop the time index @xmath38 for those characteristics in the steady state like @xmath107 and @xmath108 .",
    "let @xmath109 be the waiting time , also called delay , of the @xmath26-th arriving customer .",
    "obviously , we have @xmath110 however , this expression is not so useful because continuous - time process @xmath104 is involved . instead of it , kingman directly considers the stationary distribution , using so called lindley s equation . assume that @xmath111 , and let @xmath112 be a random variable subject to the stationary distribution of @xmath109 , then the distributional invariance of one step transition in the steady state yields lindley s equation : @xmath113 where @xmath114 are independent , and @xmath115 stands for the equality in distribution .",
    "in this formulation , no continuous - time process is needed .",
    "kingman s @xcite idea is to scale the waiting time @xmath112 in the steady state by @xmath116 and to prove that @xmath117 weakly converges to the exponential distribution with unit mean , which is the stationary distribution of a one - dimensional srbm , as @xmath118 , under the finiteness conditions on some moments of @xmath119 and @xmath120 .",
    "see theorem 1 of kllerstrm @xcite for a comprehensive proof . based on this convergence , kingman @xcite suggests the following approximation for the stationary waiting time @xmath112 .",
    "@xmath121 here , it is notable to distinguish the following two steps .    3",
    "prove a weak convergence , that is , convergence in distribution , under appropriate changes of primitive data .",
    "derive an approximation from ( s1 ) .",
    "( s1 ) is a purely mathematical issue , while ( s2 ) is not more than proposal .",
    "nevertheless , we have a clear rule for ( s2 ) as we observed for the above @xmath112 .",
    "namely , the scaling factor is moved into the stationary distribution for approximation .",
    "when we are discussing about diffusion approximation , we often only consider ( s1 ) .",
    "this is because ( s2 ) is automatically done according to the rule .",
    "kingman s as well as kllerstrm s arguments are very clear , but lack the idea of a sequence of models for the convergence .",
    "such a sequence makes clear how the primitive data are changed . for this",
    ", we here introduce a sequence of the @xmath3 queues indexed by @xmath26 , where the primitive data of the @xmath26-th system are denoted by @xmath122 and @xmath123 .",
    "denote the stationary waiting time of the @xmath26-th queue by @xmath124 .",
    "define @xmath125 as @xmath126 then , theorem 1 of kllerstrm @xcite reads as @xmath127 if the following conditions are satisfied .",
    "@xmath128    because of ( [ eqn:1-node asym c3 ] ) , @xmath129 are uniformly bounded in @xmath26 , and therefore ( [ eqn:1-node asym c1 ] ) is equivalent to @xmath130 which is further equivalent to @xmath131 if @xmath132 is uniformly away from @xmath9 .",
    "thus , we may divide ( s1 ) into further two steps .",
    "3    set up a sequence of models indexed by positive integer @xmath26 .",
    "scale the state space of the @xmath26-th system , and derive the limiting distribution .",
    "in particular , if we choose @xmath133 and @xmath134 for @xmath135 in such a way that @xmath136 where @xmath137 and @xmath138 are positive constants , then ( [ eqn : w convergence 1 ] ) becomes @xmath139 since @xmath140 .",
    "this shows that , in ( s1 - 2 ) , @xmath124 can be scaled by @xmath141 .",
    "we next consider diffusion approximation for the stationary distribution of @xmath102 , which is the queue length including customers being served , that is , the number of customers in system . in this case , continuous - time is involved , and one may think that it would be easier to consider scaling a process rather than scaling a stationary distribution .",
    "this may be the reason why diffusion approximation on the queue length has been much less studied through the stationary equation , while process limits have been well studied as we shall see in section  [ sect : process limit ] .",
    "we here challenge diffusion approximation for @xmath102 through the stationary equation , and like to answer whether or not time scaling is really needed . intuitively , no time scaling is needed because the stationary distribution is independent of time .",
    "kingman s approximation supports this .",
    "however , this has not yet been confirmed , while process limit mandatorily requires state and time scaling to get a diffusion process .",
    "to attack this problem , we use slightly stronger assumptions on the tails of the inter - arrival time @xmath119 and the service time @xmath120 .",
    "we here recall the simplified notation system introduced in the previous section , which drops the index for a node .",
    "let @xmath142 and @xmath143 be the moment generating functions of @xmath119 and @xmath120 , respectively .",
    "that is , @xmath144 assume the following light tail conditions .",
    "* there exist @xmath145 such that @xmath146    these conditions are a bit stranger than what we actually need , but typically assumed to study large deviations ( e.g. , see @xcite ) .",
    "for @xmath147 , @xmath148 and some function @xmath149 which will be determined later , let @xmath150 and let @xmath151 be the counting process for departing customers . since @xmath152 has jumps at instants when @xmath153 or @xmath154 is increased , it is obvious to see that @xmath155 where @xmath156 .",
    "let @xmath157 be the expectations under the palm distributions with respect to @xmath158 .",
    "namely , for @xmath159 and a continuous function @xmath160 on @xmath161 , @xmath162 as long as the expectations are well defined , where @xmath163 .",
    "assume that @xmath164 is subject to the stationary distribution , which is also assumed to exist .",
    "then , taking the expectation of both sides of ( [ eqn : rcl path ] ) yields @xmath165 where the expectations are all finite for @xmath147 , @xmath148 .",
    "this formula is called a rate conservation law in the literature ( e.g. , see @xcite ) .",
    "hence , letting @xmath166 we have the stationary equation for @xmath147 , @xmath148 : @xmath167    choose @xmath168 , @xmath169 and @xmath149 for @xmath170 in such a way that @xmath171 then , they do exist by the assumption ( [ eqn:1-node condition 0 ] ) , and ( [ eqn:1-node se 1 ] ) boils down to @xmath172 where @xmath173 and @xmath174 are finite because @xmath147 and @xmath175 by the cycle formula , where the singularity of the right - hand term at the origin can be removed as it can be seen from the middle term .",
    "we next note that @xmath168 and @xmath169 have nice representations as functions of @xmath176 . for this ,",
    "we define logarithmic moment generating functions for counting processes @xmath177 and @xmath178 as @xmath179 these functions play important roles in the theory of large deviations ( e.g. , see @xcite ) .",
    "we here note the following fact , which is immediate from theorem 1 of @xcite ( see also lemma 4.1 of @xcite in a more general context ) .",
    "[ lem:1-node logarithmic ] under the assumption ( [ eqn:1-node condition 0 ] ) , let @xmath180 and @xmath181 be the solutions @xmath168 and @xmath169 of ( [ eqn:1-node condition ] ) , then @xmath182    we here sketch a proof for the first equation of ( [ eqn:1-node logarithmic ] ) to see the reason why it is obtained ( see @xcite for a complete proof ) .",
    "the second equation can be proved similarly .",
    "define function @xmath183 for a given constant @xmath184 as @xmath185 it is easy to see that @xmath183 satisfies the following renewal equation .",
    "@xmath186 if we choose @xmath184 such that @xmath187 , then this renewal equation has a proper interval distribution , and therefore we can see that @xmath188 converges to a finite constant by the key renewal theorem as long as @xmath189 is finite around a neighborhood of @xmath184 .",
    "this is always the case under the assumption ( [ eqn:1-node condition 0 ] ) . on the other hand , from the definition of @xmath183 , @xmath190 dividing both sides of this equation by @xmath38 and letting @xmath38 to infinity , we have ( [ eqn:1-node logarithmic ] ) .    for scaling @xmath191 , we expand @xmath192 and @xmath193 as polynomials of @xmath176 around the origin .    [",
    "lem : taylor 1 ] under the same assumptions of lemma  [ lem:1-node logarithmic ] , we have , as @xmath194 , @xmath195    this lemma is easily obtained from ( [ eqn:1-node condition ] ) and ( [ eqn:1-node logarithmic ] ) . for convenience of the reader , we prove it in appendix  [ app : taylor 1 ] .",
    "we are now ready to consider a scaled limit for a sequence of the @xmath3 queues , indexed by @xmath26 .",
    "assume that those queues are all stable , that is , @xmath196 for all @xmath197 .",
    "as we did , characteristics of the @xmath26-th queue are indexed by superscript @xmath198 . by lemma",
    "[ lem:1-node logarithmic ] , ( [ eqn:1-node se 2 ] ) for the @xmath26-th system can be written as @xmath199 divide both sides of this equation by @xmath176 and applying lemma  [ lem : taylor 1 ] , we have @xmath200 where we have used the fact that @xmath201 .",
    "let us consider what is an appropriate scaling factor for @xmath202 .",
    "denote it by @xmath203 .",
    "that is , we scale @xmath202 as @xmath204 .",
    "this can be done by replacing @xmath176 by @xmath205 in ( [ eqn:1-node se 3 ] ) .",
    "we first assume that @xmath206 as @xmath207 because we hardly expect to have a reasonable limiting distribution otherwise .",
    "we then examine ( [ eqn:1-node se 3 ] ) , and easily see that we have a meaningful limiting distribution only when @xmath208 is proportional to @xmath209 . under this limiting operation",
    ", it is preferable for the terms on the residual times to vanish .",
    "namely , we like to verify the following conditions . @xmath210 among these conditions , ( [ eqn:1-node extra 2 ] ) is easily verified if the previous conditions ( [ eqn:1-node asym c3 ] ) and ( [ eqn:1-node asym c4 ] ) are satisfied because ( [ eqn:1-node asym c3 ] ) implies that @xmath211 is uniformly bounded in @xmath26 .",
    "however , they may not be sufficient for ( [ eqn:1-node extra 1 ] ) .",
    "so far , we here use the following simple assumption .",
    "we now arrive at the following theorem , which corresponds to kingman s approximation for the queue length in the steady state .",
    "[ thr:1-node l asym ] for a sequence of the stable @xmath3 queues satisfying ( [ eqn:1-node condition 0 ] ) for @xmath213 , if the conditions ( [ eqn:1-node asym c3 ] ) , ( [ eqn:1-node asym c1a ] ) , ( [ eqn:1-node asym c4 ] ) and ( [ eqn:1-node extra 3 ] ) hold and if @xmath196 for @xmath197 , then @xmath214    we already explained major ideas to have this theorem , but its full proof requires careful arguments .",
    "since they are technical , we defer them into appendix  [ app : theorem l asym ] .",
    "note that the exponential distribution ( [ eqn:1-node l asym ] ) is identical with the stationary distribution of the srbm , which will given in corollary  [ cor : gjn 1 ] .",
    "thus , theorem  [ thr:1-node l asym ] concludes that time scaling is not needed to get the limiting distribution corresponding to that of srbm .",
    "we here only considered a single node queue , but can expect a similar result for a general gjn although we have to work on the stationary equation instead of the stationary distribution because the latter is unknown for @xmath215 .",
    "thus , we may have a completely different story about diffusion approximation for the stationary distribution of a queueing network in heavy traffic . as we will see in section  [ sect : quality",
    "] , this approach is closely related to a study on the tail decay rates of the stationary distributions .    in",
    "what follows , we will review another story , which requires scaling in both state and time .",
    "we review diffusion approximation for a single class gjn introduced in sections [ sect : primitive ] and [ sect : stochastic ] by an srbm , that is , semi - martingale reflecting brownian motion on a nonnegative orthant .",
    "this is now standard , and can be found in a text book ( e.g. , see @xcite ) .",
    "nevertheless , it is good to see how the diffusion approximation is derived because it is a prototype for diffusion approximations for stochastic processes .",
    "we have observed that the supplemented markov process may be useful to consider a limit of the stationary distributions .",
    "however , this is not the case for a limit of processes because an evolution in time needs to match scaling in state . instead of it ,",
    "the sample path characterizations ( [ eqn : l 1 ] ) and ( [ eqn : u 1 ] ) are known to be useful . to see this , let @xmath216 , and we rewrite ( [ eqn : l 1 ] ) as @xmath217 where the @xmath20-th entry of @xmath218 is given by @xmath219 and the @xmath20-th entry of @xmath220",
    "is given by @xmath221 clearly , @xmath222 is the total idle time of the server at node @xmath20 by time @xmath38 , and therefore @xmath223 is non - decreasing in @xmath38 .",
    "furthermore , @xmath223 increases only when @xmath224 .",
    "these are precisely what are meant by ( [ eqn : u 1 ] ) , and we have @xmath225 thus , ( [ eqn : l 1 ] ) and ( [ eqn : u 1 ] ) imply ( [ eqn : l 2 ] ) and ( [ eqn : y 1 ] ) .",
    "conversely , for a given @xmath226 , @xmath227 is uniquely determined by ( [ eqn : l 2 ] ) and ( [ eqn : y 1 ] ) as will be given in theorem  [ thr : reflection map 1 ] below .",
    "thus , we have the reflection mapping from @xmath226 to @xmath227 , which is denoted by @xmath228 .",
    "this mapping will be used to study process limit for diffusion approximation .",
    "a basic idea for diffusion approximation is to replace @xmath218 in ( [ eqn : l 2 ] ) by a @xmath11-dimensional brownian motion @xmath229 with a drift vector @xmath230 satisfying @xmath231 .",
    "namely , @xmath232 roughly speaking , @xmath233 is an independent incremental process with continuous sample path .",
    "the reader who is not familiar with brownian motion may refer to section 5.3 of @xcite for a short summary .",
    "thorough introductions are found in @xcite .",
    "for this @xmath218 , we rewrite ( [ eqn : l 2 ] ) and ( [ eqn : y 1 ] ) for a nonnegative @xmath11-dimensional process @xmath234 and a nondecreasing @xmath11-dimensional process @xmath220 as @xmath235    let @xmath236 be the set of functions from @xmath237 to @xmath238 which are right continuous and have left - hand limit . in general , finding a solution @xmath239 in @xmath240 satisfying ( [ eqn : z 1 ] ) and ( [ eqn : y 2 ] ) for a given @xmath241 and @xmath226 with @xmath242 is called a skorohod problem . the following theorem answers",
    "this problem for @xmath216 .",
    "[ thr : reflection map 1 ] let @xmath216 . for each function @xmath243",
    ", there exists a unique pair of nonnegative function @xmath244 and a nondecreasing function @xmath245 with @xmath246 which satisfy @xmath247 furthermore , the mapping @xmath248 and @xmath249 from @xmath250 to @xmath251 and @xmath252 are lipschitz continuous .",
    "namely , there exist constants @xmath253 and @xmath254 for each @xmath38 such that , for @xmath255 and @xmath256 , @xmath257 for @xmath258 , where @xmath259 is the euclidean metric in the vector space @xmath238 .",
    "if we choose @xmath226 of ( [ eqn : x 2 ] ) and take @xmath260 for @xmath250 in this theorem , we have a unique solution @xmath239 of ( [ eqn : z 1 ] ) and ( [ eqn : y 2 ] ) . here , it is important for @xmath5 to be @xmath261 , which is always the case for gjn .",
    "however , some other models may require more general matrix @xmath5 , which is indeed the case for a multi - class queueing network ( see section  [ sect : multi - class ] ) . thus , we first define @xmath239 for a general square matrix @xmath5 .    [ den : srbm ] continuous @xmath11-dimensional processes @xmath262 and @xmath263 are called a semimartingale reflecting brownian motion , srbm for short , and a regulator , respectively , if there exists a family of probability measures @xmath264 on some filtration @xmath265 and the following conditions are satisfied for @xmath266 under @xmath267-almost surely for every @xmath268 .",
    "* @xmath269 is a @xmath11-dimensional brownian motion with drift vector @xmath230 , that is , given by ( [ eqn : x 2 ] ) , and @xmath233 is @xmath265-martingale .",
    "* @xmath270 is a @xmath265-adapted nondecreasing process with @xmath271 .",
    "* @xmath272 is a @xmath265-adapted process . *",
    "( [ eqn : z 1 ] ) and ( [ eqn : y 2 ] ) are satisfied .",
    "to use this definition , it is important to see when @xmath273 and @xmath274 uniquely exist . from theorem  [ thr :",
    "reflection map 1 ] , we can see that , if @xmath216 , then they uniquely exist , which is independent of a choice of @xmath267 .",
    "this existence problem was completely solved by reiman and williams @xcite for necessity and by taylor and williams @xcite for sufficiency .",
    "the answer is :    [ thr : srbm 1 ] the srbm @xmath273 uniquely exists if and only if @xmath5 is a completely-@xmath4 matrix , which is a square matrix whose all principal submatrices are @xmath4-matrices , where an @xmath19-dimensional square matrix @xmath275 is called an @xmath4-matrix if there is an @xmath19-dimensional vector @xmath276 such that @xmath277 .",
    "it is easy to see that @xmath261 is a special case of a completely-@xmath4 matrix because we can choose @xmath278 for the @xmath279 , where @xmath280 is the @xmath11-dimensional vector whose entries are all units .    in the remaining part of this section ,",
    "we assume that @xmath5 is a completely @xmath4-matrix , so the srbm @xmath272 exists .",
    "we denote the covariance matrix of the brownian motion @xmath229 by @xmath281 , and assume that @xmath282 is non - singular .",
    "thus , @xmath283 is the primitive data . clearly , this srbm is a markov process with respect to filtration @xmath265 , and its dynamics is specified by it integration formula .",
    "namely , let @xmath284 be the set of twice continuously differentiable and bounded functions from @xmath237 to @xmath238 , then , for @xmath285 , computing the difference @xmath286 by the integration with respect to the integrator @xmath287 yields the following formula almost surely .",
    "@xmath288 where @xmath289 if one is not familiar with it integration , he may have a trouble with the second integration term in ( [ eqn : ito 1 ] ) .",
    "this term is so called an integration by quadratic variations , which arise from unbounded variation of the sample path of a brownian motion . on the other hand ,",
    "the integration with respect to @xmath290 in the first integration is just a riemann integral , whose expectation vanishes .",
    "we now have nice text books for it integration .",
    "for example , chung and williams @xcite is recommended for first reading .",
    "we next consider a stable srbm , that is , an srbm which has a stationary distribution .",
    "the stability condition has not yet been completely obtained in terms of the primitive data for @xmath291 ( see @xcite ) . however ,",
    "if @xmath5 is an @xmath292-matrix , which is a matrix of the form @xmath293 for some nonnegative matrix @xmath294 such that @xmath293 is invertible , then the srbm is stable if and only if @xmath295 in particular , this is the stability condition for @xmath216 since this @xmath5 is an @xmath292-matrix .",
    "we return to a general @xmath5 which is completely @xmath4 , and assume that the srbm is stable .",
    "we denote its stationary distribution by @xmath296 , and define measure @xmath297 on @xmath298 as @xmath299 where @xmath300 is the borel @xmath301-field on @xmath298 , and @xmath302 stands for the expectation under @xmath296 , that is , under the condition that @xmath241 is subject to @xmath296 .",
    "obviously , @xmath297 is a finite measure because @xmath303 is bounded for @xmath304 $ ] . in the literature ( e.g. ,",
    "see @xcite ) , the measure @xmath297 is called a palm measure with respect to the random measure generated by @xmath305 . since @xmath223 does not increases for @xmath306 , this measure concentrates on the face @xmath307 given by @xmath308 let us take the expectation of ( [ eqn : ito 1 ] ) under @xmath296 , then it is immediate to have the part ( a ) of the following theorem .",
    "[ thr : bar ] let @xmath5 be a completely @xmath4-matrix .",
    "( a ) if the srbm has the stationary distribution @xmath296 , then , for @xmath309 , @xmath310 } \\rangle } \\nu_{i}(d{{\\boldsymbol x } } ) = 0,\\end{aligned}\\ ] ] where @xmath311 is the inner product @xmath312 of vectors @xmath313 , and @xmath314}$ ] is the @xmath20-th column of @xmath5 .",
    "( b ) conversely , if there are a probability distribution @xmath296 on @xmath315 and finite measures @xmath297 on @xmath316 for @xmath12 , then @xmath296 is the stationary distribution of the srbm , and ( [ eqn : nu i ] ) holds .",
    "[ rem : bar ] ( [ eqn : bar 1 ] ) for all @xmath309 is equivalent to @xmath317 } , { { \\boldsymbol \\theta } } \\rangle } \\tilde{\\varphi}_{i}({{\\boldsymbol \\theta } } ) = 0 , \\qquad { { \\boldsymbol \\theta } } \\le { { \\boldsymbol 0}},\\end{aligned}\\ ] ] where @xmath318 and @xmath319 are the moment generating functions of the stationary distribution @xmath296 and the palm measure @xmath297 , respectively .",
    "( [ eqn : bar 2 ] ) is immediate from ( [ eqn : bar 1 ] ) with @xmath320 for @xmath321 .",
    "the converse is also easy to see at least intuitively because laplace transform uniquely determines a distribution and measure on the nonnegative orthant . a detailed proof for the converse is given in appendix d of the arxiv version @xcite .",
    "this equation ( [ eqn : bar 1 ] ) is called a basic adjoint relationship , bar for short ( e.g. , see @xcite ) . since ( [ eqn : bar 1 ] )",
    "is nothing but a stationary equation , ( b ) must be true intuitively .",
    "however , its proof is technically quite involving ( see @xcite ) .      for diffusion approximation , we will consider a sequence of stochastic processes which converges to some stochastic process .",
    "recall that this limit is called a process limit . to formally define this convergence ,",
    "we need topology or metric on the set of functions .",
    "we summarize some basic tips for them .",
    "the reader may skip this subsection if it is familiar with them .",
    "the materials here can be found in standard text books @xcite .",
    "the book chapter @xcite is a good reference for or readers .",
    "let @xmath322 be a complete and separable normed space with norm @xmath323 , and let @xmath324 ( @xmath325 ) be the set of all functions from an interval @xmath326 to @xmath322 which are continuous ( are right - continuous and have left - hand limits , respectively ) . for @xmath327 , we omit @xmath328 , so @xmath329 and @xmath330",
    "are simply denoted by @xmath331 or @xmath332 , which we already used for @xmath333 or @xmath236 in section  [ sect : srbm ] .    stochastic processes which we consider are functions from the sample space @xmath334 to either @xmath331 or @xmath332 .",
    "in particular , a sample path of a brownian motion belongs to @xmath331 with @xmath335 , while a sample path for the gjn belongs to @xmath332 .",
    "thus , we need topology or metric on both @xmath331 and @xmath332 to consider diffusion approximation . they can be defined through metrics on @xmath336 , s)$ ] and @xmath337 , s)$ ] for each @xmath338 .",
    "let @xmath339 } \\|x(u ) - y(u)\\|_{s } , \\qquad x , y \\in c([0,t],s ) \\mbox { or } d([0,t],s),\\end{aligned}\\ ] ] which is called a uniform norm .",
    "@xmath336 , s)$ ] typically uses this uniform norm as its metric . on the other hand",
    ", @xmath337 , s)$ ] uses @xmath340-metric , which is defined as @xmath341,s),\\end{aligned}\\ ] ] where @xmath342 is the set of strictly increasing and continuous function from @xmath44 $ ] to @xmath44 $ ] , @xmath343 and @xmath344 for @xmath345 $ ] . as one can see from its definition , @xmath340-metric is to minimize discontinuity of functions by a suitable time scaling .",
    "let @xmath346 for @xmath347 and @xmath348 be stochastic processes whose sample paths are in @xmath332 .",
    "then , @xmath349 is said to converge to @xmath350 in distribution , which is denoted by @xmath351 , if , for any bounded continuous function @xmath160 from @xmath332 to @xmath161 , @xmath352 we also refer to this convergence as weak convergence .",
    "the following theorem is an immediate consequence of these definitions .",
    "[ thr : continuous ] let @xmath353 be a continuous mapping from @xmath332 to @xmath332 , and assume that @xmath351 for the sequence of stochastic processes @xmath349 and that of @xmath350 whose sample paths in @xmath332 , then we have @xmath354    another useful tool is to replace convergence in distribution by almost surely convergence . for this , sample paths for the sequence of stochastic processes must be suitably chosen , but it is quite useful to prove the weak convergence of functionals of those stochastic processes .",
    "a random variable version of this theorem is not hard to prove ( e.g. , see @xcite ) , but its proof is quite technical for stochastic processes .",
    "[ thr : skorohod ] for the sequence of stochastic processes @xmath349 and that of @xmath350 whose sample paths are in @xmath332 , if @xmath351 , then there exist stochastic processes @xmath355 and @xmath356 such that they have the same distributions as those of @xmath349 and @xmath350 , respectively , and @xmath355 almost surely converges to @xmath356 as @xmath207 .    in general",
    ", verifying the convergence condition ( [ eqn : convergence 1 ] ) is not easy .",
    "a typical situation is to use a finite dimensional convergence of @xmath349 in distribution .",
    "namely , for each @xmath357 , each sequence @xmath358 and each bounded continuous function @xmath359 from @xmath360 to @xmath161 , @xmath361 clearly , @xmath351 implies this finite dimensional convergence in distribution , but its converse is generally not true although the limiting distribution of @xmath349 is uniquely identified if it exists ( e.g. , see @xcite ) . for the converse to be true , an extra condition is required .",
    "a typical condition for this is tightness .",
    "the sequence of @xmath349 is said to be tight if , for any @xmath362 , there exists a compact set @xmath363 of @xmath332 such that @xmath364 this tightness also may not be easy to verify .",
    "so , various sufficient conditions have been studied in the literature ( e.g. , see @xcite ) . those are quite technical , and we will not get into their details .    another useful technique is a random change of time .",
    "[ lem : random change ] let @xmath365 be the sequence of processes whose sample paths are in @xmath332 , and let @xmath366 be the sequence of non - decreasing non - negative valued processes . if there are @xmath367 and nondecreasing @xmath366 such that @xmath368 and if @xmath369 , then @xmath370 , where the composition @xmath371 is defined as @xmath372 .    we finally refer to process versions of the central limit theorems ( called lindeberg - feller theorems , e.g. ,",
    "see theorem 7.2.1 of @xcite ) .",
    "they are all sources of diffusion approximation .",
    "[ thr : donsker ] for each @xmath197 , let @xmath373 , @xmath374 ,  be independent and identically distributed random variables with finite mean @xmath375 and finite variance @xmath376 .",
    "assume that @xmath377 and define @xmath378 as @xmath379 } ( \\tau^{(n)}_{\\ell } - m^{(n)}),\\end{aligned}\\ ] ] then @xmath380 , where @xmath381 $ ] is the largest integer not greater than real number @xmath382 , and @xmath383 is the standard brownian motion .",
    "[ rem : donsker ] the conditions ( [ eqn : sigma convergence ] ) and ( [ eqn : lindeberg 3 ] ) guarantees for lindeberg condition to hold ( see theorem 27.3 of @xcite ) .    a similar scaling limit can be obtained for the counting process @xmath384 , which is defined as @xmath385 the next theorem is obtained from theorem  [ thr : donsker ] using lemma  [ lem : random change ] ( e.g. , see @xcite for details ) .",
    "[ thr : counting ] assume that there exist positive and finite @xmath386 and @xmath301 such that @xmath380 holds under the assumptions of theorem  [ thr : donsker ] .",
    "let @xmath387 .",
    "assume that @xmath388 and define @xmath389 then @xmath390 .    from lemma  [ lem : taylor 1 ]",
    ", we can see that the variance @xmath391 as @xmath392 .",
    "this is the reason why @xmath393 appears in the normalizing factor above . for convenience of the reader",
    ", we directly verify this fact in appendix  [ app : donsker counting ] .",
    "we now consider a process limit of the joint queue length process @xmath394 of the gjn under suitable scaling in time and state .",
    "a key step for obtaining this limit is to change @xmath395 of ( [ eqn : x 1 ] ) to the following @xmath396 by replacing accumulated busy times @xmath40 and @xmath397 by deterministic time @xmath38 .",
    "@xmath398 where @xmath399 .",
    "we denote the vector whose @xmath20-th coordinate is @xmath396 by @xmath400 .",
    "one can guess that the process @xmath401 converges to a brownian motion under normalization .",
    "for this , we require additional conditions on the finiteness of variances . denote generic random variables which have the same distributions as @xmath17 and @xmath63 respectively by @xmath402 and @xmath403 . in what follow ,",
    "we assume :    * @xmath402 and @xmath403 have finite variances , which are denoted respectively by @xmath404 and @xmath405 , where we let @xmath406 for @xmath35 , and @xmath407    the condition ( [ eqn : non - trivial 1 ] ) is just to exclude a trivial case in a simple way , but can be weakened as we will see later .",
    "we next introduce the sequence of the gjn s for diffusion approximation .",
    "we index those gjn s by positive integer @xmath26 . for the @xmath26-th gjn ,",
    "all random elements as well as constant parameters are indexed by @xmath26 such as @xmath408 , @xmath409 , @xmath410 , @xmath411 , @xmath412 and so on , while keeping the non - indexed notations for the original gjn satisfying the assumptions ( [ sect : single - class]a)([sect : single - class]c ) and ( [ sect : diffusion]a ) .",
    "in particular , we will not change the routing matrix @xmath74 , so @xmath5 is unchanged .",
    "we define the @xmath26-th gjn by @xmath413 keeping the other primitive data , where we recall that @xmath414 is the total arrival rate at node @xmath20 , which is obtained by ( [ eqn : traffic 1 ] ) .",
    "then , it is easy to see that @xmath415 on the other hand , the variances of @xmath416 and @xmath417 are unchanged , that is , @xmath418 instead of those assumptions , one can choose @xmath419 as long as the following two sets of conditions are satisfied ( e.g. , see @xcite ) .",
    "* @xmath420 , @xmath421 , @xmath422 , @xmath423 , and + @xmath424 for some @xmath425 .",
    "* @xmath426 for some @xmath427 .    in what follows",
    "we simply assume ( [ eqn : tn 1 ] ) and ( [ eqn : sn 1 ] ) . obviously , ( [ sect : diffusion]b ) is satisfied for this case , and ( [ sect : diffusion]c ) is not needed because lindeberg condition for the central limit theorem is automatically satisfied in this case . for the @xmath26-th gjn , we define diffusion scaling processes by @xmath428 we would like to show that @xmath429 has the same limiting process as that of @xmath430 . for this , we use the following fact .",
    "[ lem : u 2 ] @xmath431 converges to @xmath38 in probability as @xmath207 .    by this lemma and lemma  [",
    "lem : random change ] , we have @xmath432 where @xmath433 stands to have the same distribution asymptotically as @xmath207 .",
    "thus , for @xmath434 to weakly converges to an srbm , it remains to show that @xmath435 weakly converges to a @xmath11-dimensional brownian motion with a constant drift term , where @xmath436 by ( [ eqn : tn 1 ] ) , but we keep the notation @xmath410 for arguments to be parallel for service times . letting @xmath437 it follows from theorem  [ thr : counting ] that @xmath438 where @xmath439 is the standard brownian motion .",
    "we here choose @xmath439 to be independent for @xmath16 .",
    "let @xmath440 is the random vector whose @xmath20-th coordinate is @xmath441 .",
    "we similarly define @xmath442 .",
    "it is immediate from ( [ eqn : ei to b1 ] ) that @xmath443 where @xmath444 is the diagonal matrix whose @xmath20-th diagonal entry is @xmath445 , and @xmath446 is the @xmath11-dimensional standard brownian motion , which means that its covariance matrix is the identity matrix .",
    "note that the right - hand side of ( [ eqn : tilde n e ] ) is @xmath447-dimensional brownian motion because @xmath68 for @xmath35 .",
    "similarly , we have @xmath448 where @xmath449 is the @xmath11-dimensional standard brownian motion . by the modeling assumptions , we can choose @xmath449 to be independent of @xmath446 .",
    "let @xmath450 be the random vector whose @xmath20-th component is given by @xmath451 then , it follows from ( [ eqn : tilde n s ] ) that @xmath452 where @xmath453 is the covariance matrix whose @xmath454-entry is given by @xmath455    we define @xmath456 as the random vector whose @xmath20-th component is given by @xmath457 ) - [ nt ] p_{ji } \\big),\\end{aligned}\\ ] ] and define the fluid scaling of @xmath458 as @xmath459 let us compute the covariance matrix of @xmath460 , whose @xmath461-entry is given by @xmath462 where recall that @xmath399 .",
    "let @xmath463 since @xmath464 almost surely as @xmath207 and @xmath465 ) - [ n \\lambda_{sj } t ] p_{ji}\\big),\\end{aligned}\\ ] ] applying lemma  [ lem : random change ] yields @xmath466 where @xmath467 is the @xmath11-dimensional standard brownian motion which is independent of @xmath446 and @xmath449 , and @xmath468 is the @xmath11-dimensional covariance matrix whose @xmath454-entry is given by @xmath469 which comes from ( [ eqn : cv phi ] ) .",
    "finally , the last term in the formula for @xmath470 is @xmath471_{i},\\end{aligned}\\ ] ] where the last equality comes from ( [ eqn : sr 1 ] ) .    summarizing all the computations",
    ", we have that @xmath472 weakly converges to the brownian motion with the covariance matrix @xmath282 whose @xmath454-entry @xmath473 is @xmath474 and drift vector @xmath230 whose @xmath20-entry @xmath475 is given by @xmath476    combing this with ( [ eqn : tilde x 1 ] ) and theorem  [ thr : reflection map 1 ] and applying theorem  [ thr : continuous ] , we arrive at the following theorem .",
    "[ thr : gjn 1 ] assume ( [ sect : single - class]a)([sect : single - class]c ) , and define the @xmath26-th gjn by ( [ eqn : tn 1 ] ) and ( [ eqn : sn 1 ] ) and the routing matrix @xmath74 , then the diffusion scaled process @xmath477 converges in distribution to the srbm @xmath272 with the primitive data @xmath478 , where @xmath282 by ( [ eqn : cv 1 ] ) . thus , this srbm is always stable .",
    "[ rem : gjn 1 ] if we assume ( [ sect : diffusion]b ) and ( [ sect : diffusion]c ) instead of ( [ eqn : tn 1 ] ) and ( [ eqn : sn 1 ] ) , then the limiting srbm has primitive data @xmath479 , which is stable if and only if @xmath480 .",
    "the following corollary is immediate from theorems [ thr : bar ] and [ thr : gjn 1 ] and ( [ eqn : cv 1 ] ) .",
    "[ cor : gjn 1 ] under the assumptions of theorem  [ thr : gjn 1 ] , if @xmath481 , then the limiting srbm has the stationary distribution given by @xmath482 where @xmath483 is a random variable subject to the stationary distribution .",
    "let @xmath484 .",
    "since ( [ eqn : sr 1 ] ) implies that @xmath485 we have the following approximation for the stationary queue length process @xmath58 .",
    "@xmath486 where @xmath273 is the srbm with the primitive data @xmath487 .",
    "we have not discussed about the workload process @xmath53 .",
    "let @xmath488 , then one may guess that @xmath489 and therefore , as @xmath490 for all @xmath12 , @xmath491    we check that ( [ eqn : w 2 ] ) indeed holds true . for simplicity , we assume that @xmath492 and @xmath493 . then , using ( [ eqn : l 1 ] ) for the @xmath26-th gjn and the fact that @xmath494 where @xmath495 is the attained service time of a customer being served at node @xmath20 if any while @xmath496 if no customer in service there , the workload representation ( [ eqn : wl 1 ] ) for the @xmath26-th gjn is rewritten as @xmath497 since @xmath498 , which can be checked by fluid approximation , we have @xmath499 hence , @xmath500 and theorem  [ thr : gjn 1 ] yields ( [ eqn : w 2 ] ) .",
    "we have derived theorem  [ thr : gjn 1 ] along the line due to reiman @xcite .",
    "some years later , chen and mandelbaum @xcite simplified a part of the proof using skorohod representation of theorem  [ thr : skorohod ] .",
    "this does not have so much benefit for proving theorem  [ thr : gjn 1 ] , but it does for extensions or modifications of the gjn .",
    "a closed gjn in @xcite is such an example .",
    "theorem  [ thr : gjn 1 ] can be extended for the case where each node may have multiple servers and their service times may have different distributions , while keeping @xmath501 service times at each server .",
    "this extension is already mentioned in @xcite , but was firstly proved in @xcite . the basic idea for this extension",
    "is called a sandwich method ( see also @xcite for a single node queue ) .",
    "we present this extension following chen and shanthikumar @xcite .",
    "assume that node @xmath20 has @xmath502 servers and the @xmath25-th server there has service times @xmath503 with finite mean service time @xmath504 and variance @xmath505 .",
    "define the counting process of departures from this server by @xmath506 as @xmath507 and let @xmath508 be the total time when the @xmath25-th server at node @xmath20 is busy in the time interval @xmath44 $ ] .",
    "then , for the gjn with multiple servers at nodes , @xmath395 of ( [ eqn : x 1 ] ) are changed to @xmath509 but we can keep @xmath52 of ( [ eqn : l 2 ] ) with @xmath218 whose @xmath20-th component is this @xmath395 .",
    "however , we can not uniquely determine @xmath52 and @xmath220 by ( [ eqn : l 2 ] ) and ( [ eqn : y 1 ] ) obviously because the information for @xmath510 is not sufficient , where @xmath511    we modify @xmath218 similar to @xmath400 of ( [ eqn : x 3 ] ) as @xmath512 we next let @xmath228 be the reflection map for ( [ eqn : l 2 ] ) and ( [ eqn : y 1 ] ) with @xmath226 of ( [ eqn : x 5 ] ) .",
    "since @xmath513 is the minimal solution , we have @xmath514 on the other hand , for the @xmath11-dimensional vector @xmath515 whose @xmath20-th component is the number of servers @xmath502 at node @xmath20 , it can be shown that @xmath516 is the maximal element in the set : @xmath517_{i } ) d y_{i}(t ) \\le c_{i } , i \\in j , \\forall t \\ge 0 \\big\\},\\end{aligned}\\ ] ] where where @xmath518 is the set of non - decreasing functions , and therefore @xmath519 thus , we have @xmath520    we are now ready to introduce the sequence of the gjn with multiple servers at each node .",
    "for the @xmath26-th gjn , we use the following notation at each node @xmath20 .",
    "the mean arrival rate and the variance of the inter - arrival time are denoted by @xmath410 and @xmath521 , which are the same as those for the single server case . for the @xmath25-th server of node @xmath20 , the mean service rate and the variance of the service time",
    "are denoted by @xmath522 and @xmath523 .",
    "we assume that there exist constants @xmath69 , @xmath524 , @xmath525 and @xmath526 such that @xmath527 then , ( [ eqn : psi 2a ] ) , ( [ eqn : psi 2b ] ) and ( [ eqn : x 5 ] ) for the @xmath26-th gjn concludes the following theorem .",
    "[ thr : diffusion 1 ] under the assumptions ( [ eqn : root n 1 ] ) ( [ eqn : heavy traffic 1 ] ) and ( [ eqn : lindeberg 4 ] ) , the diffusion scaled process @xmath528 converges in distribution to the srbm @xmath273 with the primitive data @xmath283 , where @xmath282 and @xmath230 are given by @xmath529    this theorem tells us that the diffusion approximation for the gjn with heterogeneous many servers at all nodes is identical with that for the gnj with single servers at all nodes with the mean service rate and the variance of service times at node @xmath25 , respectively , given by @xmath530 and @xmath531 in particular , if servers are identical at each node , that is , @xmath532 and @xmath533 , then the above variance becomes @xmath534 , and therefore the result is compatible with kingman s conjecture for the stationary waiting time in the @xmath535 queue for @xmath536 , which is proved by kllerstrm @xcite .",
    "we have discussed about the diffusion approximation through a process limit .",
    "this may not imply the weak convergence for the stationary distribution .",
    "let @xmath537 and @xmath538 be random vectors subject to the stationary distributions of the diffusion scaled process @xmath539 and the srbm @xmath273 , respectively . then",
    ", the following implication , which is referred to as continuity of the stationary distribution , is important for application because the stationary distribution is widely used for performance evaluation .",
    "@xmath540 however , this continuity does not automatically hold in general , and it requires a proof .",
    "similar continuity also may be considered for characteristics of the stationary distribution such as moments and tail asymptotics .",
    "those continuity can be considered as quality support for the diffusion approximation , and therefore their verifications are important for application . in this section ,",
    "we review the current status for those continuity .      as already mentioned in section  [ sect : introduction ] , this continuity has been verified by gamarnik and zeevi @xcite and budhiraja and lee @xcite .",
    "they use the fact that the tightness for the sequence of @xmath537 , that is , the sequence of the stationary distributions , is sufficient to prove ( [ eqn : continuity 1 ] ) . this is because we can construct a stationary process for the @xmath26-th gjn taking its stationary distribution as the initial distribution at time @xmath9 and choose the subsequence of those stationary distributions which weakly converges to a distribution by the tightness .    in @xcite , uniformly light tails over @xmath26 ( see ( 1 ) and ( 2 ) of @xcite for their precise definitions ) are assumed for sequences of the inter - arrival time @xmath416 and the service time @xmath417 , where we dropped the index @xmath541 from @xmath408 and @xmath409 . this convention for indexed random variables",
    "will be used in what follows if their distributions are only concerned .",
    "then , it is proved that there are positive constants @xmath542 and @xmath543 for a positive vector @xmath544 such that @xmath545 see theorem 7 of @xcite .",
    "this is a stronger result more than what is needed for the tightness , and gives an exponential upper bound for the tails of the stationary distribution of the corresponding srbm , which implies that the moment with any order has the continuity .",
    "furthermore , a finer upper bound is obtained in @xcite . however",
    ", those bounds may not be so interesting because a stable srbm is known to have the light tailed stationary distribution if reflection matrix @xmath5 is an @xmath292-matrix .    in @xcite , ( [ eqn : continuity 1 ] )",
    "is proved under the standard uniformly integrable assumptions for @xmath546 and @xmath547 .",
    "furthermore , they proved that , if @xmath548^{p})$ ] for @xmath16 and @xmath549^{p})$ ] for @xmath12 are uniformly finite over @xmath26 and if certain asymptotic condition on @xmath550 and @xmath551 are satisfied ( see ( i ) in ( a8.p ) of @xcite ) , then the moment with order less than @xmath552 of the stationary distribution also has the continuity ( see theorem 3.1 of @xcite ) .",
    "however , it is known from the finite moment condition for the @xmath1 queue that @xmath553^{p+1 } ) = \\infty$ ] if @xmath554^{p } ) = \\infty$ ] at least for @xmath16 ( e.g. , see theorem 2.1 of section x of @xcite ) .",
    "thus , we can not have the continuity for the @xmath555-th moment of the stationary distribution in this case because the limiting distribution , which is the stationary distribution of the srbm , always has light tail and therefore has finite moments for all order ( e.g. , see @xcite ) .",
    "we may say that the diffusion approximation by srbm is not good if service time distributions have heavy tails although the continuity holds for the stationary distribution as long as the uniformly integrability holds .    as we demonstrated in section  [ sect : extension to queue length ] , the continuity of the stationary distribution has been directly verified for the single node case of the gjn . as suggested there , the same verification may be possible for a general gjn .",
    "since no time scaling is required for this limiting operation , this continuity has a stronger aspect than the obtained in @xcite and @xcite .",
    "furthermore , more information on the convergence may be obtained .",
    "in fact , we will see such an example for the tail decay rate of the stationary distribution in the next section . however , a large part of this approach is still open for future study .",
    "the continuity of the tail decay rate of the stationary distribution is studied for a feedforward queueing network with deterministic service times by majewski @xcite .",
    "this network is assumed to have multi - class customers and fcfs discipline .",
    "see section  [ sect : multi - class ] for a multi - class queueing network .",
    "it seems that the feedforward assumption and deterministic service times greatly simplifies arguments but its application is limited .",
    "it is claimed that the continuity holds for the tail decay rate , precisely , for the large deviations rate function ( see theorem 9 of @xcite ) .",
    "for a general routing but single - class and two node gjn , the author @xcite recently obtained the tail decay rate of the marginal stationary distribution in an arbitrary direction , assuming a markov modulated poisson arrivals and phase type service time distributions , which includes the special case that an arrival process is renewal with a phase type inter - arrival distribution . for simplicity , we assume this renewal arrival .    in the rest of this subsection , we will discuss the continuity on those decay rates .",
    "assume that @xmath556 .",
    "recall that @xmath36 is the number of exogenous arrivals at node @xmath20 during the time period @xmath44 $ ] , and define the logarithmic generating functions similar to ( [ eqn:1-node gamma ] ) as @xmath557 because @xmath402 has a phase - type distribution , the assumption ( [ sect : single - class]d ) is satisfied for @xmath402 , and therefore these functions are well defined for all @xmath170 .",
    "we similarly define @xmath558 for the counting process @xmath37 for service completions , that is , departures , from node @xmath20 during a busy period .",
    "similarly in section  [ sect : extension to queue length ] , we denote the moment generating functions of @xmath559 is denoted by @xmath560 then we have the following facts similar to lemma  [ lem:1-node logarithmic ] .    [",
    "lem : logarithmic 1 ] @xmath561 has a unique inverse @xmath562 whose domain is @xmath161 , and , for @xmath135 and @xmath563 , @xmath564    we next consider a logarithmic moment generating function for customers movement at their departure .",
    "recall that departures from node @xmath20 are routed to node @xmath25 according to the markovian routing function @xmath565 .",
    "hence , if a server at node @xmath20 is busy for all time up to @xmath38 , then we define the logarithmic moment generating function for departing and routing customers for busy node @xmath20 as @xmath566 let @xmath567 for @xmath568 , then it is not hard to see that @xmath569    we are now ready to present main results . for this , we need some notations",
    ". let @xmath570 which stands for the logarithmic generating function for the total net flow .",
    "the following notations are geometric objects .",
    "@xmath571    let @xmath572 be the moment generating function of @xmath573 subject to the marginal stationary distribution with respect to the numbers of customers at nodes 1 and 2 , and define @xmath574 as @xmath575 which is referred to as a convergence domain of @xmath576 .",
    "denote the two extreme points of @xmath577 by @xmath578 using these points , we define the vector @xmath579 by @xmath580    we refer to the following results ( see @xcite for their proofs ) .",
    "[ thr : decay rate 1 ] for the two node generalized jackson network under phase type setting , if it is stable , then @xmath581 , and , for any non - zero vector @xmath582 , @xmath583    note that this theorem shows that the decay rates are determined by ( [ eqn : gamma e ] ) and ( [ eqn : gamma d ] ) .",
    "hence , we can expect that theorem  [ thr : decay rate 1 ] hold beyond the phase - type setting and more general routing mechanism .",
    "it is also notable that these decay rates are obtained in the exactly same way as those of the stationary distribution of the two - dimensional srbm ( see theorems 2.1 , 2.2 and 2.3 of @xcite ) . to prove the continuity of the decay rates , we here briefly present results in @xcite .",
    "let @xmath584 be the two dimensional srbm with the primitive data @xmath283 , and assume that @xmath5 is a completely-@xmath4 matrix and the stability condition @xmath585 is satisfied .",
    "define the following functions and sets .",
    "@xmath586 } , { { \\boldsymbol \\theta } } \\rangle } , \\qquad i = 1,2,\\\\   & \\widetilde{\\gamma } = \\{{{\\boldsymbol \\theta } } \\in { \\mathbb{r}}^{2 } ; \\widetilde{\\gamma}_{+}({{\\boldsymbol \\theta } } ) < 0\\ } , \\qquad \\widetilde{\\gamma}_{i } = \\{{{\\boldsymbol \\theta } } \\in \\widetilde{\\gamma } ; \\widetilde{\\gamma}_{3-i}({{\\boldsymbol \\theta } } ) < 0\\},\\\\   & \\widetilde{\\gamma}_{\\max } = \\{{{\\boldsymbol \\theta } } \\in { \\mathbb{r}}^{2 } ; \\exists { { \\boldsymbol \\theta } } ' \\in \\widetilde{\\gamma } , { { \\boldsymbol \\theta } } < { { \\boldsymbol \\theta}}'\\ } , \\end{aligned}\\ ] ] where we recall that @xmath314}$ ] is the @xmath20-th column of @xmath5 .",
    "let @xmath538 be a random vector subject to the stationary distribution of @xmath272 .",
    "note that this stationary distribution is uniquely determined by @xmath587 and @xmath588 ( see remark  [ rem : bar ] for its reason ) .",
    "recall that @xmath589 . define the convergence domain of @xmath318 as @xmath590 we also define @xmath591 and @xmath592 in the exactly same way as @xmath593 and @xmath579 . then ,",
    "similar to theorem  [ thr : decay rate 1 ] , we have the following results from theorems 2.1 , 2.2 and 2.3 in @xcite , in which finer tail asymptotics are obtained , but we do not use them here .    [",
    "thr : decay rate 2 ] for the two node generalized jackson network under phase type setting , if it is stable , then @xmath594 , and , for any non - zero vector @xmath582 , @xmath595    we now consider the sequence of the gjns whose joint queue length processes under diffusion scaling weakly converge to a stable srbm .",
    "for this , we use the same notations and assumptions in section  [ sect : single - class ] .",
    "for example , recall that @xmath596 and @xmath597 are the arrival and service rates and the variances of the inter - arrival and service times , respectively .",
    "we assume the heavy traffic condition ( [ sect : diffusion]b ) with @xmath598 and regularity condition ( [ sect : diffusion]c ) .",
    "then , the covariance matrix @xmath282 and the drift vector @xmath230 of this srbm are given by ( [ eqn : cv 1 ] ) and ( [ eqn : drift 1 ] ) , respectively , and @xmath216 .",
    "the logarithmic generating function of the @xmath26-th system under diffusion scaling is defined as @xmath599 hence , by lemmas [ lem : taylor 1 ] and [ lem : logarithmic 1 ] , for @xmath600 , @xmath601 and therefore it follows from ( [ eqn : gamma d ] ) that , for @xmath563 and @xmath602 , @xmath603    from these facts , we can see that @xmath604 thus , in the view of theorems [ thr : decay rate 1 ] and [ thr : decay rate 2 ] , we are very close to have the continuity of the decay rates .",
    "however , the second equation of ( [ eqn : gamma continuity ] ) is a bit short to prove the following theorem . we give a complete proof in appendix  [ app : decay ] .",
    "[ thr : decay rate continuity ] for a sequence of two node gjns with phase type @xmath605 and @xmath606 , if they are stable and satisfy the condition ( [ eqn : sn 1 ] ) , then the convergence domain @xmath607 of the moment generating function of the stationary distribution of the @xmath26-th gjn converges to the domain @xmath608 for the limiting srbm , and therefore the decay rate of @xmath609 for any non - zero @xmath610 converges to that of the limiting srbm .",
    "we discuss how diffusion approximation is obtained for a multi - class queueing network with fcfs service discipline , following williams @xcite .",
    "we modify the gjn for this .",
    "we denote the set of customer types by @xmath611 .",
    "type @xmath612 customers are served only at node @xmath613 , and changed to type @xmath614 customer after service completion with probability @xmath615 independent of everything else .",
    "similarly , @xmath402 and @xmath403 are changed to @xmath616 and @xmath617 , respectively , for @xmath618 .",
    "let @xmath619 be the counting processes for exogenous arrivals , total arrivals , potential service completions , departures of type @xmath612 customers .",
    "let @xmath620 be the number of customers and the accumulated service time for type @xmath612 customers .",
    "let @xmath621 be the workload and the accumulated idle time at node @xmath20 at time @xmath38 , respectively . for simplicity , we assume that @xmath622 and @xmath623 . then , they satisfy the following set of equations for @xmath12 and @xmath618 . recall that the composition @xmath371 is defined as @xmath372 for appropriate functions @xmath160 and @xmath353 .",
    "@xmath624 where @xmath625 .",
    "one can see that ( [ eqn : mul l 1 ] ) with ( [ eqn : mul na 1 ] ) , ( [ eqn : mul w 1 ] ) with ( [ eqn : mul y 1 ] ) , and ( [ eqn : mul wy 1 ] ) are parallel to ( [ eqn : l 1 ] ) , ( [ eqn : wl 1 ] ) and ( [ eqn : y 2 ] ) of a single - class queueing network .",
    "an essential feature here is that the workload @xmath53 plays a key role while the queue length @xmath52 did so in the single - class case .",
    "it also indicates the lack of information because @xmath52 is higher dimensional than @xmath53 . to fill this gap",
    ", we need to specify service discipline among customer types at each node .",
    "once the service discipline is specified , we can fully characterize @xmath53 and @xmath52 by ( [ eqn : mul na 1])([eqn : mul wy 1 ] ) .",
    "for example , if the service discipline is fcfs independent of types , then the following conditions are sufficient .",
    "@xmath626 which represents that the type @xmath612 customers arriving up to time @xmath38 will depart up to time @xmath627",
    ". however , this is said in principle , and it is almost impossible to compute them . on the other hand , one may guess that the number of each type customers in node @xmath20 would be proportional to their arrival rate in heavy traffic because the queue there would be very long and service does not discriminate types .",
    "this is called a state - space collapse , which will be formally defined below .",
    "thus , if the state - space collapse occurs , then we may compute @xmath52 from the lower dimensional @xmath53 .",
    "this is exactly a key idea to get diffusion approximation for a multi - class queueing network .",
    "we now introduce the sequence of the multi - class gjn s .",
    "they are indexed by natural numbers similar to those of the single - class gjn s .",
    "thus , the @xmath26-th system have the following notations . @xmath628 and @xmath629 are the inter - arrival ( from the outside ) and service times of type @xmath612 customers .",
    "it is assume that they are @xmath0 for each fixed @xmath26 and @xmath618 .",
    "counting processes of type @xmath612 customers and their mean rates are denoted by @xmath630 and @xmath631 for @xmath632 .",
    "routing function , the number of type @xmath612 customers , the total workload brought by @xmath19 customers of type @xmath612 are denoted by @xmath633 , @xmath634 , @xmath635 for @xmath618 .",
    "the workload and total idle time at node @xmath20 are denoted by @xmath636 , @xmath637 for @xmath12 .",
    "vectors and matrix whose entries are given by them are denoted by @xmath638 and @xmath639 for @xmath632 , @xmath640 , @xmath411 , @xmath641 , @xmath642 and @xmath643 , respectively .",
    "we also introduce @xmath644 matrices @xmath645 and @xmath646 , @xmath647 matrix @xmath648 , where @xmath649 .",
    "we define the traffic intensity @xmath650 , where the total arrival rate of type @xmath612 customer @xmath651 is given by @xmath652    we define fluid scaling versions of the above processes as @xmath653 ) , \\\\   & { \\overline}{l}^{(n)}_{k}(t ) = \\frac 1n l^{(n)}_{k}(nt ) , \\qquad { \\overline}{v}^{(n)}_{sk}(t ) = \\frac 1n v^{(n)}_{sk}([nt]),\\\\   & { \\overline}{w}^{(n)}_{i}(t ) = \\frac 1n w^{(n)}_{i}(nt ) , \\qquad { \\overline}{y}^{(n)}_{i}(t ) = \\frac 1n y^{(n)}_{i}(nt).\\end{aligned}\\ ] ] similarly , diffusion scaling versions are defined as @xmath654 ) - p_{kk'}[nt]\\big ) \\\\   & \\widehat{l}^{(n)}_{k}(t ) = \\frac 1{\\sqrt{n } } l^{(n)}_{k}(nt),\\qquad { \\overline}{v}^{(n)}_{sk}(t ) = \\frac 1{\\sqrt{n } } \\big ( v^{(n)}_{sk}([nt ] ) - m^{(n)}_{sk } [ nt ] ) \\big),\\\\   & \\widehat{w}^{(n)}_{i}(t ) = \\frac 1{\\sqrt{n } } w^{(n)}_{i}(nt ) , \\qquad \\widehat{y}^{(n)}_{i}(t ) = \\frac 1{\\sqrt{n } } y^{(n)}_{i}(nt),\\\\   & \\widehat{v^{(n)}_{sk } \\circ",
    "n^{(n)}_{ak}}(t ) = \\frac 1{\\sqrt{n } } \\big ( v^{(n)}_{sk } \\circ n^{(n)}_{ak}(nt ) - \\lambda^{(n)}_{ak } m^{(n)}_{sk } nt\\big),\\\\   & \\widehat{\\phi^{(n)}_{kk ' } \\circ n^{(n)}_{dk}}(t ) = \\frac 1{\\sqrt{n } } \\big ( \\phi^{(n)}_{kk ' } \\circ n^{(n)}_{dk}(nt ) - \\lambda^{(n)}_{dk } p^{(n)}_{kk ' } nt\\big).\\end{aligned}\\ ] ]    from those definitions , we have @xmath655 similarly , @xmath656    substituting ( [ eqn : dif phi 1 ] ) into the @xmath26-th diffusion scaling version of ( [ eqn : mul na 1 ] ) , we have @xmath657 substituting the @xmath26-th diffusion scaling version of ( [ eqn : mul l 1 ] ) into this equation , we have @xmath658 which is expressed as , in vector - matrix notation , @xmath659 hence , multiplying @xmath660 from the left , we have @xmath661    we further substitute ( [ eqn : dif na 1 ] ) into the @xmath26-th diffusion version of ( [ eqn : mul w 1 ] ) , then , using ( [ eqn : dif vs 1 ] ) and again ( [ eqn : dif na 1 ] ) , arrive at @xmath662    we now formally define the state space collapse according to @xcite .",
    "[ dfn : collapse 1 ] state space collapse is said to hold for @xmath663 nonnegative matrix @xmath664 , which is called a lifting matrix , if @xmath665-entry of @xmath664 vanishes if @xmath666 and , for each @xmath41 , @xmath667 where @xmath668 stands for convergence in probability .",
    "assume that state space collapse holds for the sequence of lifting matrices @xmath664 , and @xmath664 converges to @xmath669 .",
    "in particular , we assume fcfs service discipline .",
    "then , as we expected , it can be proved that the condition ( [ eqn : state space collapse 1 ] ) holds if @xmath670 and therefore @xmath671    we write the condition ( [ eqn : state space collapse 1 ] ) as @xmath672 and substitute @xmath434 into ( [ eqn : dif w 1 ] ) , then we have @xmath673 define @xmath674 as @xmath675 because of ( [ eqn : cmd 1 ] ) , we have @xmath676    we now assume the heavy traffic conditions : for some constant @xmath677 , @xmath678 where @xmath679 and @xmath651 is given by @xmath680 for diffusion approximation , we assume the finiteness of variances .",
    "let @xmath681 where we use the convention that @xmath682 if @xmath683 , and assume that @xmath684 because we did not choose specific sequences for the inter - arrival times @xmath628 and the service times @xmath629 as we did for the single - class gjn , we here require the following lindeberg type conditions . @xmath685    under these assumptions , it can be proved the following convergence in distribution .",
    "@xmath686 where @xmath449 , @xmath446 and @xmath687 are independent @xmath688 , @xmath689 and @xmath688 dimensional standard brownian motions , and @xmath690 is the @xmath691 covariance matrix defined by @xmath692_{\\ell \\ell ' } = \\left\\{\\begin{array}{ll }    p_{k \\ell } ( 1 - p_{k \\ell } ) , \\quad & \\ell ' = \\ell,\\\\    - p_{k \\ell } p_{k \\ell ' } , & \\ell ' \\ne \\ell .",
    "\\end{array } \\right.\\end{aligned}\\ ] ]    let @xmath693 , and assume that @xmath694 is invertible .",
    "let @xmath695 . taking ( [ eqn : dif w 2 ] ) and ( [ eqn : dif vs 2])([eqn : dif phi k 1 ] ) into account ,",
    "define @xmath218 as @xmath696 since @xmath697 is well defined for sufficiently large @xmath26 , and for such @xmath26 , ( [ eqn : dif w 2 ] ) is can be written as @xmath698 where @xmath699    it can be shown that @xmath700 .",
    "furthermore , @xmath701 increases only when @xmath702 .",
    "similar to the reflection mapping , if @xmath5 is a completely @xmath4-matrix , this suggests that ( [ eqn : dif w 3 ] ) implies that there are unique nonnegative @xmath59 and @xmath274 such that @xmath703 this implication is actually proved in @xcite .",
    "one also needs to check the tightness for @xmath704 and @xmath705 .",
    "[ thr : multi - class gjn ] under the assumptions ( [ eqn : heavy 1 ] ) and ( [ eqn : mul variance 1])([eqn : dif phi k 1 ] ) , if the service discipline is fcfs and if @xmath706 is invertible and its inverse is a completely @xmath4-matrix , then we have @xmath707 furthermore , this convergence still holds for any head of line service discipline as long as the state collapse condition holds for some sequence @xmath664 converging @xmath708 .    for the multi - class gjn",
    ", there is no results about the continuity of the stationary distribution .",
    "the difficulty for this case is remarked in section 5 of @xcite .",
    "as we have observed in section  [ sect : extension to many servers ] , the diffusion approximation by srbm is still possible for the gjn with many server nodes .",
    "however , it ignores the influence of the number of idle servers which varies from 0 to the total number of servers at one node .",
    "so , the approximation may be too coarse .",
    "on the other hand , if there are infinitely many servers at a node , one may apply the central limit theorem to get asymptotics for approximation . in this case",
    ", there is no queue , and this is another extreme .",
    "furthermore , the limiting process is gaussian , and therefore not a diffusion process .",
    "so , we will not discuss about them .",
    "comprehensive discussions about such a limiting process is found in section 9 of @xcite .",
    "one may wonder what approximation is possible between those two extremes .",
    "this motivated halfin and whitt @xcite to increase the number @xmath26 of servers as well as the arrival rate of customers in a single queue with many servers while keeping service time distributions . in this case",
    ", a network model may be too complicate because different nodes may have different numbers of customers .",
    "so , this type of limits has been studied mainly for a single node , that is , a single queue .",
    "we here refer to results in @xcite for such a model .",
    "assume that the @xmath26-th system has @xmath26 servers , and let @xmath709 be the number of customers in system at time @xmath38 .",
    "customers arrives according to a renewal process , and their service times are @xmath0 .",
    "an arriving customer has to wait if all servers are busy .",
    "an important assumption here is that the service time distribution is exponential .",
    "this is the crucial assumption which makes analysis possible and results tractable .",
    "we will use the following notations .",
    "@xmath710 is the arrival rate of customers , @xmath711 is the service rate , @xmath712 .",
    "we assume the following heavy traffic condition .",
    "there is a constant @xmath713 such that @xmath714 we further assume the following condition on the moments of the inter - arrival time @xmath715 for the @xmath26-th system .",
    "@xmath716 define the following diffusion scaling for the number of customers in system .",
    "@xmath717    the following theorems are obtained by halfin and whitt @xcite .",
    "[ thr : hw 1 ] assume ( [ eqn : heavy 2])([eqn : third 1 ] ) .",
    "if @xmath718 , then @xmath719 , where @xmath720 is a diffusion process characterized by the following stochastic integration .",
    "@xmath721 where @xmath383 is the standard brownian motion , and @xmath722 and @xmath723 are given by @xmath724    [ thr : hw 2 ] assume ( [ eqn : heavy 2])([eqn : third 1 ] ) , and let @xmath725 and @xmath726 be random variables subject to the stationary distributions of @xmath727 and @xmath728 , respectively , of theorem  [ thr : hw 1 ] , then @xmath729 .",
    "furthermore , let @xmath730 and let @xmath731 be the standard normal distribution function , then @xmath732 and @xmath733    this approximation is popular for the performance evaluation of call centers , and there have been several attempts for its generalization concerning the service time distribution ( e.g. , see @xcite ) . in particular , reed",
    "@xcite identifies the limiting process @xmath728 for @xmath727 as the solution of a certain integral equation .",
    "however , it is hard to see the property of this solution .",
    "so , gamarnik and goldberg @xcite ) derive bounds for the tail probability of the stationary distribution .",
    "from the diffusion approximations in sections [ sect : single - class ] , [ sect : diffusion ] and [ sect : multi - class ] , we can see the following facts .    2    for both single - class and multi - class queueing networks ,",
    "srbm is obtained as a process limit of the sequence of diffusion scaling processes .",
    "the srbm for a single - class gjn is determined by the asymptotic means and variances of the counting processes @xmath734 and @xmath735 and random routing function @xmath565 .",
    "the srbm for a multi - class gjn requires the asymptotic mean and variance of the accumulated workload @xmath736 in addition to those for a single - class queueing network .",
    "for ( [ sect : concluding]b ) , we can get those data of @xmath734 and @xmath735 from their logarithmic moment generating functions as defined in ( [ eqn : gamma e ] ) .",
    "those logarithmic generating functions play important roles in the stationary equation of the gjn , which is the reason why they arise in the tail decay rate of the stationary distribution in section  [ sect : continuity tail ] .",
    "although srbm is very important for diffusion approximation , very little is known about its stationary distribution for the more than two dimensional case .",
    "thus , it is often to use a product form stationary distribution , which is obtained only when the so called skew symmetric condition holds .",
    "however , a choice of the primitive data is very limited under this condition .",
    "thus , it would be very nice if we can find some features of the stationary distribution .",
    "the author and his colleagues @xcite recently studied to decompose the stationary distribution of srbm into two marginals .",
    "they show that , if the stationary distribution is decomposable , then the marginal distributions are obtained as lower dimensional srbm , and their primitive data are identified .",
    "this suggests that we may have more flexible choice of the primitive data than the skew symmetric case , so we may have a better approximation .",
    "there are two interesting observations in section  [ sect : extension to queue length ] and appendix  [ app : decay ] .",
    "one is the fact that time scaling is not essential to get the limit of a sequence of the stationary distributions for diffusion compatible approximation .",
    "this may be useful for simulation to get the stationary distribution of the srbm .",
    "another is that large deviations rate functions are closely related to diffusion approximation through logarithmic moment generating function .",
    "both observations may not be surprising , but it is notable that they are mathematically confirmed .",
    "i am grateful to hideaki yamashita of tokyo metropolitan university for inviting me to write this paper .",
    "i appreciate invaluable comments and suggestions from kenichi kawanishi of gunma university .",
    "i also thank anonymous referees and masahiro kobayashi of science university of tokyo for their thoughtful comments .",
    "this work is supported by japan society for the promotion of science under grant no .",
    "we only prove the first formula of ( [ eqn : taylor 1 ] ) because ( [ eqn : taylor 2 ] ) can be obtained similarly . by the assumption ( [ eqn:1-node condition 0 ] ) , @xmath737 with complex variable @xmath738",
    "is analytic in a neighborhood of the origin in the complex plain @xmath739 .",
    "since @xmath740 @xmath741 has a unique root @xmath742 which is analytic in @xmath743 in a neighborhood of the origin by the implicit function theorem ( e.g. , see theorem 3.11 of the volume ii of @xcite ) .",
    "hence , @xmath744 is analytic in a neighborhood of the origin , and therefore , it follows from taylor expansion that @xmath745 obviously , @xmath746 . by differentiating both sides of @xmath747 , we have @xmath748 where @xmath168 is a function @xmath176 , namely , @xmath180 , but we drop @xmath176 for simplicity .",
    "this implies that @xmath749 . differentiating ( [ eqn : taylor a1 ] )",
    ", we have @xmath750 which yields that @xmath751 .",
    "thus , we obtain ( [ eqn : taylor 1 ] ) .",
    "let @xmath752 . since ( [ eqn:1-node extra 1 ] ) and ( [ eqn:1-node extra 2 ] ) hold , ( [ eqn:1-node se 3 ] ) yields , for @xmath753 , @xmath754 where the condition ( [ eqn:1-node asym c3 ] ) is tacitly used to the small order terms @xmath755 as @xmath207 . to complete the proof ,",
    "we need to show that @xmath756 for this , denote the right - hand side of ( [ eqn:1-node sd 2 ] ) by @xmath757 .",
    "then , by a triangular inequalities , we have @xmath758 from ( [ eqn:1-node sd 1 ] ) , the first absolute term in the right - hand side of this inequality vanishes as @xmath207 .",
    "thus , we only need to show that its second absolute term vanishes as @xmath207 . for this",
    ", we write down it in terms of expectations for @xmath753 . @xmath759",
    "the right - hand side converges to @xmath9 by the bounded convergence theorem because @xmath753 and @xmath203 converges to @xmath9 .",
    "this completes the proof of theorem  [ thr:1-node l asym ] because the convergence of laplace transfers implies the convergence of the corresponding distributions .",
    "we check the normalizing factor to be correct in theorem  [ thr : counting ] . for this",
    ", we derive a limiting distribution for the one - dimensional marginal .",
    "it follows from the definition of @xmath384 that @xmath760 \\quad \\mbox{if and",
    "only if } \\quad \\sum_{\\ell=1}^{[kt ] } \\tau^{(n)}_{\\ell } < nt.\\end{aligned}\\ ] ] hence , @xmath761 - \\lambda^{(n ) } nt ) \\quad \\\\    & \\mbox{if and only if } \\quad \\frac 1{\\sqrt{[kt]}\\sigma^{(n ) } } \\sum_{\\ell=1}^{[kt ] } ( \\tau^{(n)}_{\\ell } - m^{(n ) } ) < \\frac 1{\\sqrt{[kt ] } \\sigma^{(n ) } } ( nt - m^{(n)}[kt]).\\end{aligned}\\ ] ] we let @xmath762 so that @xmath763 } \\sigma^{(n ) } } ( nt - m^{(n)}[kt])$ ] converges to an arbitrarily given @xmath764 .",
    "then , @xmath765 \\sim \\lambda^{(n ) } \\sqrt{[kt ] } \\sigma^{(n ) } x,\\end{aligned}\\ ] ] where we recall that @xmath387 , and therefore @xmath766 - \\lambda^{(n ) } nt ) \\sim - \\frac{\\lambda^{(n ) } \\sqrt{[kt ] } \\sigma^{(n ) } x } { \\sqrt{(\\sqrt{[kt ] } \\sigma^{(n ) } x + m^{(n)}[kt])t } } \\sim - \\frac{\\lambda^{(n ) } \\sigma^{(n ) } x } { \\sqrt{m^{(n ) } } } = - \\sqrt{(\\lambda^{(n)})^{3 } } \\sigma^{(n ) } x,\\\\   & [ kt ] \\sim \\lambda^{(n ) } nt \\sim \\lambda nt\\end{aligned}\\ ] ] thus , we have @xmath767}\\sigma^{(n ) } } \\sum_{\\ell=1}^{[\\lambda nt ] } ( \\tau^{(n)}_{\\ell } - m^{(n ) } ) < x \\big).\\end{aligned}\\ ] ] since the right - hand side is the standard normal distribution function , @xmath768 correctly appears in the theorem .",
    "we only need to prove that ( [ eqn : gamma continuity ] ) implies the convergence of @xmath607 to @xmath608 .",
    "a major problem is to show that @xmath769 in the second formula of ( [ eqn : gamma continuity ] ) is a right scaling factor . for this",
    ", we first derive the stationary equation similar to ( [ eqn:1-node se 1 ] ) for a general gjn .",
    "the reason why we consider general @xmath11 rather than @xmath556 is that there are not so much difference between them and the general case may have own interest . for",
    "@xmath77 and @xmath770 , let @xmath771 where @xmath772 represents the expectation with respect to the palm measure concerning @xmath773 for @xmath135 , which is defined similarly to ( [ eqn : palm 1 ] ) .",
    "we then apply the rate conservation law similarly to ( [ eqn : rcl path ] ) for the following @xmath152 .",
    "@xmath774 this yields the following formula for @xmath775 , where @xmath776 .",
    "@xmath777    we next choose @xmath778 and @xmath779 in such a way that @xmath780 denote these @xmath781 and @xmath782 by @xmath783 and @xmath784 , and let @xmath785 and @xmath786 be their vectors , then we arrive at @xmath787 for @xmath556 , it follows from ( [ eqn : logarithmic 1 ] ) and ( [ eqn : gamma d ] ) that @xmath788    we now consider the @xmath26-th gjn with @xmath556 , and its characteristics are indexed by superscript `` @xmath198 '' .",
    "hence , recalling the definition of @xmath789 , ( [ eqn : gjn se 2 ] ) becomes , for @xmath775 , @xmath790 where we have used the fact that @xmath791 because @xmath622 implies that @xmath792 .",
    "thus , using the diffusion scaling @xmath793 of ( [ eqn : logarithmic diffusion ] ) and substituting @xmath794 into the first variable @xmath795 of @xmath796 in ( [ eqn : gjn se 3 ] ) , we have , under diffusion scaling , @xmath797    since @xmath798 as @xmath207 for @xmath799 by ( [ eqn : gamma continuity ] ) , we have , using similar arguments in appendix  [ app : theorem l asym ] , @xmath800 since @xmath801 has the order @xmath769 as @xmath207 , this and the fact that ( [ eqn : gjn se 4 ] ) converges to the bar ( [ eqn : bar 2 ] ) of the limiting srbm concludes @xmath802 and therefore @xmath803 is a right term to converge to @xmath804 so that the continuity of the stationary distribution holds . since @xmath805 and @xmath806 have the same sign and @xmath807 @xmath808 if and only if @xmath809 , which is the condition to determine @xmath810 for theorem  [ thr : decay rate 1 ] .",
    "this completes the proof of theorem  [ thr : decay rate continuity ] .",
    "w. glynn : diffusion approximations . in d.",
    "p. heyman and m.  j. sobel ( eds . ) : _ stochastic models _ , volume  2 of _ handbooks in operations research and management science _",
    "( north holland , amsterdam , 1990 ) , 145198 .",
    "j.  m. harrison : balanced fluid models of multiclass queueing networks : a heavy traffic conjecture .",
    "in f.  kelly and r.  j. williams ( eds . ) : _ stochastic networks _ ,",
    "volume  71 of _ the i m a volumes in mathematics and its applications _",
    "( springer , new york , 1995 ) , 120 .          j.  m. harrison and v.  nguyen",
    ": some badly behaved closed queueing networks . in f.",
    "p. kelly and r.  j. williams ( eds . ) _ stochastic networks _ , volume  71 of _",
    "the i m a volumes in mathematics and its applications _",
    "( springer , new york , 1995 ) , 117124 .                              p.",
    "k. kumar : scheduling queueing networks : stability , performance analysis and design . in f.",
    "kelly and r.  j. williams ( eds . ) : _ stochastic networks _ ,",
    "volume  71 of _ the i m a volumes in mathematics and its applications _ ( springer - verlag , new york , 1995 ) , 2170 ."
  ],
  "abstract_text": [
    "<S> diffusion processes have been widely used for approximations in the queueing theory . </S>",
    "<S> there are different types of diffusion approximations . among them </S>",
    "<S> , we are interested in those obtained through limits of a sequence of models which describe queueing networks . </S>",
    "<S> such a limit is typically obtained by the weak convergence of either stochastic processes or stationary distributions . </S>",
    "<S> we already have nice reviews and text books for them </S>",
    "<S> . however , this area is still actively studied , and it seems getting hard to have a comprehensive overview because mathematical results are highly technical . </S>",
    "<S> we try to fill this gap presenting technical background . </S>",
    "<S> although those diffusion approximations have been well developed , there remains a big problem , which is difficulty to get useful information from the limiting diffusion processes . </S>",
    "<S> their state spaces are multidimensional , whose dimension corresponds to the number of nodes for a single - class case and the number of customer types for a multi - class case . </S>",
    "<S> we now have a better view for the two dimensional case , but still know very little about the higher dimensional case . </S>",
    "<S> this intractability is somehow against a spirit of diffusion approximation . </S>",
    "<S> this motivates us to reconsider diffusion approximation from scratch . for this </S>",
    "<S> , we highlight the stationary distributions , and make clear a mechanism to produce diffusion approximations . </S>"
  ]
}