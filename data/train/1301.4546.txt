{
  "article_text": [
    "in supercomputer simulations , postprocessing has become a bottleneck during the overall research cycle .",
    "this is because the disk i / o and the network bandwidths can not keep pace with the exponential growth in the computer processor speed . to resolve this imbalance , the user has to apply a data reduction method to the output data in supercomputer simulations .",
    "one approach is to compress the raw numerical data directly .",
    "discrete fourier transforms and wavelet transforms are often used for this purpose . another approach to output data reduction",
    "is to apply the visualization during runtime .",
    "this approach , which is known as in - situ visualization , is effective for reducing the data size because images are two - dimensional .",
    "in - situ visualization poses new challenges for visualization researchers .",
    "new difficulties arise because today s supercomputers are massively parallel machines .",
    "the target data for visualization are divided into pieces , which are distributed in network - connected memories .",
    "thus , new visualization methods and algorithms need to be implemented on supercomputers for in - situ visualization .",
    "they require good parallel scaling to avoid degradation of the simulation s scale .",
    "these challenges have focused the attention of the high performance computing ( hpc ) community on in - situ visualization .",
    "recent studies of in - situ visualization for hpc are reviewed in section  [ sec : related work ] .",
    "a key point of in - situ visualization is the correct settings for two types of parameters : visualization parameters and camera parameters .",
    "visualization parameters include applied visualization methods and their states and values .",
    "the camera parameters include the viewpoint position , direction , field of view , and viewing frustum culling .",
    "a simple in - situ visualization with one fixed camera but without steering is described conceptually in fig .",
    "[ fig : concept_01_04_combined]a , where a three - dimensional ( 3-d ) space is spanned by three bases : the camera parameters , the visualization parameters , and the simulation time .",
    "the white ball in this figure represents a visualization shot taken in the 3-d space .",
    "after the simulation task is finished , the visualized images are sent to a local disk drive on the data analyzer s pc .",
    "the white arrow in the figure indicates data transfer .",
    "after this in - situ visualization , the sequential images are shown as a movie on the pc s display .    in most simulations ,",
    "the key phenomena or events usually appear in localized , discrete spots in the whole simulation region .",
    "if this type of `` hotspot '' is next to the range of the camera view , the user has to reset the camera positions in the so - called scenario file and resubmit a simulation job , unless the steering simulation approach is taken .",
    "in the steering simulation , the analyzer can control the simulation and the visualization parameters dynamically during runtime . a steering simulation with an in - situ visualization is illustrated in fig  [ fig : concept_01_04_combined]b .",
    "the visualized images are transferred to the analyzer during the runtime of the simulation ; see the white arrow in fig .",
    "[ fig : concept_01_04_combined]b . by observing the images on the pc monitor ,",
    "the analyzer can change the visualization parameters dynamically to focus on a hotspot .",
    "the dashed line with an arrow in fig .",
    "[ fig : concept_01_04_combined]b represents the feedback control from the analyzer to the simulation and visualization .",
    "although this kind of the steering simulation is an effective approach for hpc , it is not always possible because supercomputer simulations are usually performed in batch jobs .    without steering ,",
    "the in - situ visualization loses interactivity completely , which is critically important for obtaining insights from the simulation .",
    "this paper proposes a method that facilitates the interactive viewing of the visualization results generated by the in - situ visualization of a batch - job supercomputer simulation .",
    "the key concept used by the method proposed in this paper is to produce a cluster of in - situ visualizations with different visualization and camera parameters at once and to analyze the output image data interactively during postprocessing .",
    "the proposed method can be regarded , in some sense , as a generalization of the so - called bullet - time method , which is used in the film industry , where cameras are placed along a specified path and pictures are taken sequentially with short time intervals .",
    "this method is used to make a slow motion movie of the target object , which appears to be taken by a camera moving at an impossibly high speed .",
    "figure  [ fig : concept_01_04_combined]c shows a conceptual description of the bullet - time method where the visualization is obtained using four different cameras . similar to fig .",
    "[ fig : concept_01_04_combined]a , the output data is a sequence of images , which is then sent to the analyzer .    in our method , we use as many in - situ visualizations as possible and analyze the output image data later in an interactive manner , as shown in fig .  [",
    "fig : concept_01_04_combined]d .",
    "any information on the simulated phenomena is expected to be in the image dataset so the analyzer can explore the image space dynamically .    when an output movie from an in - situ visualization is compressed to a reasonable size , such as 100  mb ,",
    "the total output data size is _ only _ 100  tb , even if the number of applied in - situ visualization is one million .",
    "this is still smaller than the size of the raw numerical data in exascale simulations , which would be in the order of pb .",
    "when we select only the camera position among the camera parameters , our proposed method requires that we place many cameras inside and outside the simulation region and that we use them all in the in - situ visualization in parallel , as shown in fig .",
    "[ fig : many_camera ] .",
    "this configuration of cameras reminds us of the `` 3d dome '' or `` 3d room '' constructed by kanade et al .  for capturing human motion in a room - sized space to construct a virtual reality  @xcite .",
    "our method can be regarded as an extension of the 3d room concept to scientific visualization .",
    "an important difference is that we explore not only in the camera space , but also in the visualization space , in our in - situ visualization method .",
    "the output data of our proposed method is a dataset containing many ( thousands to millions ) movie files .",
    "when the camera number is sufficiently high , we can find practically any image from any position in the dataset  although a large part of the dataset would be useless .",
    "therefore , the user can `` rotate '' a visualized object with the mouse , by extracting an appropriate sequence of image files from the movie dataset .    to demonstrate the feasibility of the proposed method",
    ", we performed a batch simulation on a pc cluster system where @xmath0 cameras were placed around the simulation region .",
    "three types of in - situ visualization methods were used by all of the cameras during runtime .",
    "the output data comprised @xmath1 sets of mpeg movie files .",
    "we also developed an interactive movie player so a sequence of images can be extracted from the dataset .",
    "in - situ visualization has a long history .",
    "johnson et al .",
    "@xcite conducted a general review of steering simulation and visualization .",
    "examples of in - situ visualization in peta - scale simulations and their technical challenges ( especially those caused by massively parallel processing ) are summarized in  @xcite .",
    "they show that in - situ visualization is a promising solution for peta and exascale simulations",
    ". a natural extension of the online dynamical control of simulation is the end - to - end approach  @xcite , where even mesh generation , which is usually conducted in the preprocessing stage , is performed on supercomputers .",
    "they developed a steering simulation for seismic wave propagation where the visualization images were shown in real time .",
    "huang et al .  developed a steering simulation and visualization framework for environmental science where dynamical control over the internet was implemented  @xcite .",
    "their user interface was constructed on web browsers .",
    "ellsworth et al .",
    "developed an in - situ visualization system on the colombia supercomputer for running a weather forecasting model  @xcite .",
    "( our experimental system described in section  [ sec : appseic ] is similar to their system because multiple mpeg files are generated by multiple in - situ visualizations .",
    "however , their movies are shown separately in each panel of a tiled display system , whereas ours are used as a database . )",
    "esnard et al .",
    "developed an in - situ visualization system where the parallel visualization processing can run on a different computer system from the simulation computer system  @xcite . in their development ,",
    "special emphasis was placed on producing a steering environment with existing simulation codes .",
    "many in - situ visualizations , with or without steering , have been designed and developed for particular simulation problems .",
    "however , general visualization frameworks with high parallel scalability have also become available recently .",
    "whitlock et al .",
    "@xcite developed a library _ libsim _ that facilitates in - situ visualizations using visit , which is one of the most sophisticated parallel visualization tools available today .",
    "their paper also contained a concise review of the history and the latest status of the in - situ visualization research .",
    "fabian et al .",
    "@xcite reported the development of a coprocessing library for _ paraview _ , which is another sophisticated parallel visualization tool . using that library",
    ", it is possible to utilize the various visualization functions provided by _ paraview _ during runtime , which is decoupled from the simulation .",
    "the latest case studies of in - situ visualization using _ visit _ and _ paraview _ can be found in  @xcite .",
    "one of the key points of our approach to interactive in - situ visualization is the configuration of multiple cameras . in an extreme case",
    ", cameras can be placed in a 3-d distribution as densely as possible inside and around the simulation region . in our feasibility test in the present study , we placed only @xmath0 cameras with a 2-d distribution on a spherical surface at a fixed radius from the center of the simulation region , to ensure that the test was at a moderate level .",
    "all of the cameras pointed at the center .",
    "there are only five regular polyhedra so it is not a straightforward task to place more than 20 cameras on a spherical surface in a uniform manner .",
    "placing cameras on each grid point of a spherical coordinate system , or the so - called latitude - longitude mesh , does not work well because it leads to concentrations of cameras around the poles .",
    "reducing the number of cameras at higher latitudes is not a good idea because camera motion along a constant longitude will lead to a lack of viewpoints  ( fig .",
    "[ fig : sphere_model_top ] ) . to avoid this problem",
    ", we use a yin - yang grid  @xcite where two congruent component grids , which are a part of low latitude region of the latitude - longitude mesh , are combined with a partial overlap to cover a spherical surface ( fig .",
    "[ fig : camera_yin - yang_combined ] ) .    .",
    "a yin - yang grid configuration is used to avoid concentrations of cameras near the poles .",
    "( a ) a set of 65 cameras is placed on the yin - grid , which is a low - latitude subset of the spherical polar coordinates .",
    "( b ) another set of 65 cameras is placed on the yang grid , which has the same shape as the yang - grid but with a rotated configuration .",
    "( c ) the yin- and yang - grids are combined to cover the entire spherical surface .",
    ", scaledwidth=80.0% ]",
    "the camera position is not the only parameter that can be explored using our method , e.g. , see the parameter axis in fig .  [",
    "fig : concept_01_04_combined]d . different visualization methods and their internal parameters such as the isosurface level , slice position , and color functions",
    "can also be explored using our method .",
    "an ultimate aim of our method is to obtain many ( hopefully thousands ) different visualization parameters from each camera . in this test , however , we only used three different visualization parameters .",
    "the full details are provided in the next section .",
    "the total number of output movie files is @xmath2 @xmath3 .",
    "these movie files contain a lot of information that would be useless without a proper player .",
    "a movie player for pcs usually performs a simple task , i.e. , it reads a source movie file and shows the sequence of images contained in the source file on the screen .",
    "thus , we need a generalized player that can read multiple ( @xmath2 in the present test and millions in the future ) source files and display a sequence of images derived from them .",
    "the play should be interactive , i.e. , the source should be instantly and smoothly changed based on a user s input such as a mouse motion or keystroke .",
    "we have developed an interactive movie player using the opencv library .",
    "a snapshot is shown in fig .",
    "[ fig : demo ] .",
    "our movie player can retrieve a sequence of images from different movie files and display them on the window as a single movie .",
    "the player we developed has three functions : ( i ) to stop and play the motion ; ( ii ) to change the source movie ; and ( iii ) to zoom in / out of a scene .",
    "the zoom in / out function was implemented using the image magnification function provided by opencv .",
    "if we placed many more cameras in a fully 3-d distribution , we would be able to perform the zoom in / out function by changing the source cameras .",
    "the aim of the method proposed in this paper is to cover the whole visualization parameter space by applying the in - situ visualizations at once . as shown in fig .",
    "[ fig : concept_01_04_combined]d , the visualization parameter space is covered not only by the camera position but also by the applied visualization methods and their internal parameters . in this experiment , we have used just one visualization method ( volume rendering ) with three different types of target data . in exascale applications",
    ", we will apply @xmath4 different visualization methods and parameters for each camera .",
    "the movie player that we have developed in this study can extract any image sequence from different movie files in the loaded movie dataset , so there are no technical restrictions on interactive changes in the visualization parameters , even in the present version of the movie player .",
    "for example , we can smoothly change the isosurface level by a keystroke or mouse drag if we have isosurface visualizations for each camera with sufficient different isosurface levels .    as for the volume rendering ,",
    "it is difficult to specify a proper range of the transfer function beforehand .",
    "we would not , however , take a special care for the range setting , by accepting the possibility that large part of the volume rendering images is useless due to unsuitable transfer functions , as we have already accepted the possibility that many cameras are taking images from useless angles in the proposed method . a point in this method",
    "is to find valuable information afterwards in a large amount of movie database .",
    "in our feasibility study , we performed a seismic wave propagation simulation using our proposed in - situ visualization method .",
    "the simulation and visualization codes were developed by furumura and chen .",
    "the details of the codes are described in their paper  @xcite , so we briefly summarize only the key features related to our in - situ visualization experiment .",
    "this simulation solves the time development of seismic waves in cartesian coordinates @xmath5 .",
    "the basic variables are the displacement field @xmath6 of a viscoelastic medium and its velocity @xmath7 .",
    "the viscoelastic equations of motion are solved for them using a high - order finite difference method .",
    "a pseudo - spectral method can also be selected in their code if the spatial accuracy is critically important .",
    "however , we used only the finite difference method in this test .",
    "one - dimensional domain decomposition is applied on the @xmath8 ( vertical ) axis for the parallel simulation .",
    "the rectangular simulation region is divided into horizontal slates .",
    "this code has good , almost linear , scaling up to more than 1000 processors in the earth simulator supercomputer  @xcite .",
    "hybrid parallelization is used with mpi and openmp .",
    "furumura and chen also developed visualization tools for their seismic wave propagation simulation .",
    "these tools were derived from a highly optimized parallel visualization package  @xcite , which was developed in the geofem framework  @xcite for the earth simulator supercomputer .",
    "the original visualization package was designed to use unstructured cell data . in this visualization tool for seismic wave propagation",
    ", however , they were applied to a cartesian structured mesh .",
    "various visualization methods based on parallel ray castings were implemented in the original package of geofem . in this test",
    ", we used only one type of visualization method , i.e. , volume rendering for scalar fields .",
    "although the visualization tools used in this experiment originate from the geofem package for unstructured cell data , the source code has been converted into a version that can be applied directly to cartesian structured mesh data .",
    "therefore , we could apply the visualization to the simulation data without converting the data format .",
    "more sophisticated visualization packages such as visit and paraview are now available .",
    "these modern packages provide highly scalable parallel rendering that can be integrated with the simulation code , so they would be a much better choice for the rendering engine of the in - situ visualization method proposed in this paper for general simulations . however , we used the geofem - derived visualization tool in this prototype experiment simply because it was strongly coupled to the seismic wave propagation simulation .",
    "we will implement our method with paraview in the future .",
    "seismic waves have two modes : s - waves ( shear mode ) and p - waves ( compressional mode ) .",
    "we defined two scalar fields @xmath9 ( for s - wave ) and @xmath10 ( for p - wave ) , and we applied the in - situ volume rendering visualization to the two fields @xmath11 and @xmath12 .",
    "we performed test runs on a pc cluster system where the simulation grid size was @xmath13 .",
    "the number of mpi processes was 40 .",
    "as mentioned above , 130 cameras were placed spherically on the yin - yang grid points , i.e. , 65 for yin and 65 for yang .",
    "each camera performed three visualization tasks : volume rendering for the s - wave , the p - wave , and both of them .",
    "visualization snapshots were captured 60 times during one simulation task .",
    "the images were saved in the ppm format and the size of each image was @xmath14 mb .",
    "the total size of all the images was @xmath15 ) .",
    "after the simulation task , each set of sequential images captured by a single camera was combined into a movie file in the mpeg format using the ffmpeg library .",
    "( we will implement runtime compression in the future . )",
    "the compression rate was about @xmath16 ; the total ppm image set of @xmath17  gb was converted into mpeg files with a total size of @xmath18  gb .",
    "if we would save the raw numerical data from @xmath12 and @xmath11 with single - point precision for postprocessing , it would amount to @xmath19 ) .",
    "our movie data ( @xmath18  gb ) was an order of magnitude smaller than this .",
    "this gap will increase further in larger scale simulations .",
    "the total number of movie files produced during this experiment was @xmath2  @xmath20 .",
    "the 390 mpeg files of @xmath18  gb were transferred to a pc , as shown in fig .",
    "[ fig : demo ] , and they were loaded into the interactive movie player described in section  [ sec : ivmm ] .",
    "figure  [ fig : omatomego18 - 2 ] shows a sequence of snapshots with an interactive view of the in - situ visualization movie data .",
    "the propagation of the p - wave ( orange ) and s - wave ( green ) can be observed in the movie displayed in a pc window . typing a key on",
    "the keyboard sends a signal to the movie player , which changes the source movie file ( or changes the camera angle ) .",
    "the user can observe these phenomena from any one of the spherically distributed 130 cameras shown in fig .",
    "[ fig : camera_yin - yang_combined ] . image retrieval from the movie dataset is smooth and fast .",
    "the user can change the camera position while the seismic wave propagates in the window . despite the relatively small number of cameras , the change of view",
    "is so smooth that the user might think that this is a normal postprocessing visualization .",
    "figure  [ fig : p_s_ps ] shows snapshots of the interactive switching of visualization tasks . at the beginning , the p - wave and s - wave are visualized in the window . at this point , the movie player is retrieving an image sequence from a movie file , which contains images of the p - wave and s - wave .",
    "when the viewer types a key , the movie player changes the source file and starts to retrieve image sequence from the new source , which may contain only the s - wave images .",
    "thus , the window will show wave propagation .",
    "the user does not experience any delay during this switch .",
    "another keystroke produces an instant switch in the visualization task to focus on p - wave propagation .",
    "figure  [ fig : zoom_scene ] shows the zoom function available in the movie player . as mentioned in section  [ sec : ivmm ] , we will place a high density of cameras in the most uniform 3-d configuration possible in our final implementation in the future .",
    "thus , if we need to focus on a small area in the simulation region , our interactive movie player will extract other image sequences captured by a camera located closer to the target region . in the current test , however , we implemented the zoom function by magnifying images captured by a fixed camera .    .",
    "in this paper , we have proposed a new in - situ visualization method for exascale simulations .",
    "this method can generate numerous ( hopefully millions ) in - situ visualizations simultaneously based on thousands of different visualizations captured by many ( possibly thousands ) different cameras .",
    "the output of this simulation strategy is movies , rather than numbers .",
    "when a simulation produces one million movies , the total output data size is only 100  tb if each movie is compressed to 100  mb .",
    "it should be noted that a size of 100  tb will be quite small in the coming exascale era .",
    "the output data would be much larger if a user tries to save raw numerical data with the same temporal resolution for standard postprocessing visualization .    in our experiment ,",
    "each in - situ visualization movie was compressed to @xmath14 mb for each visualization parameter ( including the camera position ) and visualization method .",
    "the pixel size of a movie was @xmath21 and the frame number was 60 .",
    "the frame number of 60 would need to be increased in future exascale applications and each image would require finer resolution because the phenomena simulated in future simulations are expected to have higher complexity .",
    "however , we would not have to produce visualizations of `` ultra - fine '' resolution movies , even if `` ultra - fine '' simulations are performed .",
    "this is because if we need to analyze a fine structure in a simulation region , there would be a camera close to that spot and visualization movies could be captured at a moderate resolution , e.g. , @xmath22 pixels ( uxga ) , which would provide the necessary information .",
    "therefore , a movie file size of @xmath23 mb would be a reasonable estimate .    an output of one million movies can be analyzed during postprocessing using our proposed method .",
    "our specially designed movie player reads the one million movie files and displays a sequence of images in a window . after obtaining an appropriate image sequence from different movie files",
    ", we can `` rotate ''",
    "the visualization objects effectively while the dynamic phenomena are displayed in the window .",
    "we can also change the visualization method by using different internal parameters , provided the corresponding in - situ visualizations have been applied during the simulation task .    to demonstrate the feasibility of our proposed method",
    ", we performed a simulation where 390 in - situ visualizations were generated .",
    "we also developed a movie player that reads 390 movie files and displays a movie in a pc window . using this player",
    ", we confirmed that it was possible to `` rotate '' a visualized object interactively and to change the visualization task in real time by a single keystroke while the movie was playing .",
    "clearly , the size of our experiment was far from the exascale range .",
    "the major difference is in the size of the output dataset . in our experiment ,",
    "the number of the movie files was only 390 , whereas that would be @xmath24 in exascale tasks because 1000 cameras will be placed in and around the simulation region , and each camera will capture 1000 different visualizations . since a set of visualizations by different cameras is an embarrassingly parallel problem , the scalability for the number of cameras does not matter as long as plenty number of computer nodes are available .    the size of each movie file will not increase dramatically even with the development of exascale applications , provided that researchers view the movies on monitor windows with 2k to 4k pixel widths . in our experiment , reading 390 movie files ( 1.7 gb ) required 1.88 s when using an apple imac ( sata 7200 rpm ) and 1.42 s with an hp z800 ( sata 7200 rpm ) . extrapolating the read time in a linear manner",
    ", it will take @xmath25 s if we load @xmath24 movie files in the memory and the memory size required is @xmath26 tb .",
    "we can not predict the main memory size available and the i / o bandwidth of storage devices in the exascale era , but it is possible that we will need to take special care when handling such a large dataset .",
    "a possible solution is a prefetch mechanism , which would allow the dynamic loading of part of the movie dataset that is expected to be required by the user s next request .",
    "we will implement this prefetch mechanism in our movie player .",
    "our proposed method can be summarized as follows : ( i ) identify the potential ranges for the visualization and the camera parameters that will be of interest to the user ; ( ii ) discretize the parameter subspace at as fine a level as possible ; ( iii ) apply in - situ visualizations to all of the discrete parameters ( the white balls in fig .",
    "[ fig : concept_01_04_combined]d ) and save the output movies ; and ( iv ) explore the movie data space using an interactive movie player .",
    "any information required for the analysis will be present in the movie dataset .    in conclusion , our experiment suggests that this method of in - situ visualization with interactive viewing will be practical for peta and exascale supercomputing .",
    "we thank professor furumura for providing the simulation and volume rendering codes for seismic wave propagation . this work was supported by grant - in - aid for scientific research ( kakenhi ) 23340128 and the takahashi industrial and economic research foundation .",
    "t.  tu , h.  yu , l.  ramirez - guzman , j.  bielak , o.  ghattas , k .-",
    "ma , d.  ohallaron , from mesh generation to scientific visualization : an end - to - end approach to parallel supercomputing , acm / ieee sc 2006 conference ( sc06 ) ( 2006 ) , doi:10.1109/sc.2006.32 .",
    "d.  ellsworth , b.  green , c.  henze , p.  moran , t.  sandstrom , concurrent visualization in a production supercomputing environment . , ieee transactions on visualization and computer graphics 12  ( 5 ) ( 2006 ) 9971004 , doi:10.1109/tvcg.2006.128 .",
    "a.  esnard , n.  richart , o.  coulaud , a steering environment for online parallel visualization of legacy parallel simulations , 2006 tenth ieee international symposium on distributed simulation and real - time applications ( 2006 ) 714 , doi:10.1109/ds - rt.2006.7 .",
    "b.  whitlock , j.  m. favre , j.  s. meredith , parallel in situ coupling of simulation with a fully featured visualization system , in : eurographics symposium on parallel graphics and visualization , 2011 , pp .",
    "101109 .",
    "n.  fabian , k.  moreland , the paraview coprocessing library : a scalable , general purpose in situ visualization library , in : ieee symposium on large data analysis and visualization ( ldav ) 2011 , ieee , 2011 , pp .",
    "8996 , doi:10.1109/ldav.2011.6092322 .",
    "l.  chen , i.  fujishiro , k.  nakajima , optimizing parallel performance of unstructured volume rendering for the earth simulator , parallel computing 29  ( 3 ) ( 2003 ) 355371 , doi:10.1016/s0167 - 8191(02)00251-x ."
  ],
  "abstract_text": [
    "<S> in the coming era of exascale supercomputing , in - situ visualization will be a crucial approach for reducing the output data size . </S>",
    "<S> a problem of in - situ visualization is that it loses interactivity if a steering method is not adopted . in this paper </S>",
    "<S> , we propose a new method for the interactive analysis of in - situ visualization images produced by a batch simulation job . </S>",
    "<S> a key idea is to apply numerous ( thousands to millions ) in - situ visualizations simultaneously . </S>",
    "<S> the viewer then analyzes the image database interactively during postprocessing . </S>",
    "<S> if each movie can be compressed to 100  mb , one million movies will only require 100  tb , which is smaller than the size of the raw numerical data in exascale supercomputing . </S>",
    "<S> we performed a feasibility study using the proposed method . </S>",
    "<S> multiple movie files were produced by a simulation and they were analyzed using a specially designed movie player . </S>",
    "<S> the user could change the viewing angle , the visualization method , and the parameters interactively by retrieving an appropriate sequence of images from the movie dataset . </S>"
  ]
}