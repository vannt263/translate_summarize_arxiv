{
  "article_text": [
    "takagi s continuous nowhere differentiable function is defined by @xmath3 where @xmath4 , the distance from @xmath5 to the nearest integer . since its initial discovery in 1903 by takagi @xcite and subsequent rediscovery by van der waerden @xcite , hildebrandt @xcite and others ,",
    "much has been written about this function .",
    "arguably the simplest proof of the nowhere - differentiability of @xmath0 was given by billingsley @xcite , and his argument was adapted by cater @xcite to show that @xmath0 does not possess a finite _ one - sided _ derivative at any point . in 1959 , kahane @xcite showed that the maximum value of @xmath0 is @xmath6 , and the set of points where this is attained is a cantor set of hausdorff dimension @xmath7 .",
    "later still , with the increased popularity of fractals following b. mandelbrot s work , @xmath0 became known as an example of a self - affine function , although its hausdorff dimension of @xmath8 classifies it as a  borderline fractal \" .",
    "many other properties of the takagi function and various of its generalizations have been investigated .",
    "nonetheless , the takagi function itself has been slow to give up some of its deepest secrets . for example",
    ", it has only recently been established at which set of points @xmath9 has an infinite derivative ( allaart and kawamura @xcite , krppel @xcite ) , and there are still many open questions regarding the level sets of @xmath0 .",
    "this paper aims to answer some of these questions .",
    "it complements recent work on the level sets of the takagi function by knuth @xcite , buczolich @xcite , maddock @xcite , and lagarias and maddock @xcite",
    ".    for @xmath10 $ ] , define @xmath11 : t(x)=y\\}.\\ ] ] thus , @xmath12 is the level set at level @xmath2 of the takagi function . since @xmath13 for all @xmath14 , the simplest level set is @xmath15 . at the other extreme ,",
    "kahane @xcite showed that @xmath16 is the set of all @xmath17 $ ] whose binary expansion @xmath18 satisfies @xmath19 for all @xmath20 .",
    "this is equivalent to saying that the quarternary expansion of @xmath5 contains only @xmath8 s and @xmath21 s . as a result",
    ", @xmath16 is a cantor set of hausdorff dimension @xmath7 .",
    "surprisingly , a more general study of the level sets of @xmath0 was apparently not undertaken until 2005 , when knuth @xcite published an algorithm for determining @xmath12 for rational @xmath2 .",
    "a few years later , buczolich @xcite showed that almost all level sets ( with respect to lebesgue measure ) are finite . shortly afterwards",
    ", maddock @xcite proved that the hausdorff dimension of any level set of @xmath0 is at most @xmath22 , and conjectured an upper bound of @xmath7 ; his conjecture was recently proved by de amo et al .",
    "lagarias and maddock @xcite introduced the concept of a _ local level set _ to prove a number of new results .",
    "for instance , they show that the _ average _ cardinality of all level sets is infinite , and that the set of ordinates @xmath2 for which @xmath12 has strictly positive hausdorff dimension is of full hausdorff dimension 1 . combined with the result of buczolich",
    ", these results sketch a complex picture of the totality of level sets of the takagi function .",
    "the aim of the present paper is to give more direct proofs of some of the above - mentioned results , and to explore the sizes of the level sets in more detail , both from the probabilistic perspective and from the point of view of baire category .",
    "the results can be summarized by saying that most level sets are finite when viewed probabilistically , but most are uncountably infinite when viewed through the lens of baire category .",
    "first , in section [ sec : prelim ] , we state the well - known fact that the graph of @xmath0 contains everywhere miniature copies of itself , which we call _ humps_. these humps are classified both by their generation and their order ( or size ) , and for many results in the paper it is important to count carefully the number of humps of a given order , either overall or in a given generation .",
    "this counting involves the famous catalan numbers .",
    "section [ sec : probability ] views the level sets from a probabilistic perspective .",
    "the results in this section are not new , but we show that they can all be derived with little effort from a single key observation : lemma [ lem : bijection ] below shows that when all the humps of generation @xmath8 are removed from the graph of @xmath0 , what remains is a set which intersects every horizontal line between @xmath23 and @xmath24 in exactly two points .",
    "the ideas of the proof are implicit in the proof of buczolich ( * ? ? ?",
    "* theorem 9 ) , but we identify them more explicitly here to show how much more can be done with them .",
    "we use the lemma first to derive buczolich s result that almost all level sets are finite ( theorem [ thm : finite - ae ] ) . then",
    ", in theorem [ thm : infinite - expectation ] , we use it to prove a result of lagarias and maddock @xcite , which states that the average cardinality of the level sets is infinite .",
    "the last theorem in this section involves the notion of _ local level set _ , introduced by lagarias and maddock @xcite .",
    "a local level set is a set of abscissas @xmath5",
    "which can be obtained from one another by certain combinatorial operations on their binary expansions that leave the value of @xmath9 unchanged  see section [ subsec : local ] for a precise definition .",
    "we give an alternative and more elementary proof of one of their results , namely that the average number of local level sets contained in a randomly chosen level set is @xmath25 ( theorem [ thm : local - level - sets ] ) .",
    "our proof takes full advantage of the fact that almost all level sets are finite .",
    "section [ sec : baire ] examines the level sets from the point of view of baire category , and the results there contrast sharply with those of section [ sec : probability ] . to the best of the author s knowledge , the results of this section are new .",
    "we first show in theorem [ thm : topology ] that , for each finite number @xmath26 , the set of ordinates @xmath2 for which @xmath27 is nowhere - dense , and hence the set @xmath28 : |l(y)|<\\infty\\}$ ] is of the first category .",
    "this basic result is then refined in several ways .",
    "for example , in theorem [ thm : s - uncountable ] the set @xmath29 of ordinates @xmath2 with _ uncountably _ infinite level sets is shown to be residual , and a fairly explicit description of this set is given .",
    "this includes the observation that @xmath29 does not contain any dyadic rational points . to end the paper ,",
    "we show in theorem [ thm : infinite - local - level - sets ] that most level sets ( in the sense of baire category ) contain infinitely many _",
    "level sets , and that a continuum of level sets even contain uncountably many local level sets . seen in this light",
    ", the last result of section [ sec : probability ] appears quite remarkable .    in section [ sec : general ] we generalize several of the main results to a version of the takagi function in which the summands are multiplied by arbitrary signs .",
    "the bottom line is the same : almost all level sets are finite , but the average cardinality of the level sets is infinite , and the typical level set is uncountable .",
    "the idea of a local level set remains relevant , and we show that the average number of local level sets contained in a level set is between @xmath25 and @xmath21 .    in a separate paper @xcite ,",
    "we focus on the cardinalities of the finite level sets of @xmath0 .",
    "one of the main results of that paper is that any even positive integer is the cardinality of some level set .",
    "we show that more than 60% of all level sets",
    "( in the sense of lebesgue measure ) have exactly two elements , and examine which other cardinalities occur with positive probability when an ordinate @xmath2 is chosen at random .",
    "however , this question is still not fully resolved .    in recent years",
    ", the takagi function has appeared in a surprising range of applications .",
    "for instance , trollope @xcite and delange @xcite discovered that @xmath0 was the missing piece of the puzzle in the binary digital sum problem in number theory .",
    "the takagi function also arises naturally in the limit in certain counting problems in graph theory ; see frankl et al .",
    "@xcite or guu @xcite .",
    "it plays a role in analyzing the attractors of certain chaotic dynamical systems ( see yamaguti et al .",
    "@xcite ) , and can even be used to state an equivalent formulation of the riemann hypothesis ( see balasubramanian et al .",
    "more recently , tabor and tabor @xcite reported that @xmath0 is the extremal case in a study of approximate convexity .",
    "this wide range of different contexts in which the takagi function appears makes it likely that almost any intrinsic aspect of this function will find some use , thereby justifying its continued study .",
    "in this paper , @xmath30 will always denote cardinality ; the diameter of a set @xmath31 will be denoted by @xmath32 .",
    "we denote by @xmath33 the set of nonnegative integers , by @xmath34 the set of positive integers , and by @xmath35 the projection of a set @xmath36 onto the @xmath2-axis .",
    "we first recall some known facts about the takagi function , and introduce important notation and terminology .",
    "one of the most important aspects of @xmath0 for the purposes of this paper is its symmetry with respect to @xmath37 : @xmath38$}. \\ ] ]    next , define the _ partial takagi functions _ @xmath39 each function @xmath40 is piecewise linear with integer slopes .",
    "in fact , the slope of @xmath40 at a non - dyadic point @xmath5 is easily expressed in terms of the binary expansion of @xmath5 .",
    "we define the binary expansion of @xmath41 by @xmath42 with the convention that if @xmath5 is dyadic rational , we choose the representation ending in all zeros . for @xmath43 ,",
    "let @xmath44 denote the excess of @xmath45 digits over @xmath8 digits in the first @xmath46 binary digits of @xmath5 .",
    "then it follows directly from that the slope of @xmath40 at a non - dyadic point @xmath5 is @xmath47 .",
    "the takagi function itself can be expressed in terms of the sequence @xmath48 via the formula @xmath49 as shown by lagarias and maddock ( * ? ? ?",
    "* section 2 ) ; see also lemma [ lem : general - d - expression ] below .",
    "this formula yields an easy proof of the following important fact .",
    "[ lem : equivalence ] if @xmath50 for every @xmath51 , then @xmath52 .",
    "let @xmath53 , and enumerate the elements of @xmath54 as @xmath55 .",
    "if @xmath56 for @xmath57 ( where possibly @xmath58 ) , then it must be the case that @xmath59 for @xmath60 .",
    "since @xmath61 , it follows that the part of the summation in over @xmath60 is the same for @xmath5 as for @xmath62 .",
    "this can be repeated for all intervals @xmath63 $ ] on which @xmath64 .",
    "hence , @xmath52 .    later in this section we will sketch an alternative proof which does not rely on the formula , but which exploits more intuitively the symmetry and self - similarity properties of the graph of @xmath0 .",
    "an important consequence of lemma [ lem : equivalence ] is that , if @xmath65 for infinitely many indices @xmath51 , then the level set @xmath66 contains a cantor set , as there are @xmath67 many points @xmath62 such that @xmath50 for each @xmath51 .",
    "the next lemma is well known ( e.g. kahane @xcite ) , but a short proof is included in order to keep this paper self - contained .",
    "the term ` balanced ' in the following definition is taken from lagarias and maddock @xcite .",
    "[ def : balanced ]    a dyadic rational of the form @xmath68 is called _ balanced _ if @xmath69 .",
    "if there are exactly @xmath51 indices @xmath70 such that @xmath71 , we say @xmath5 is a balanced dyadic rational of _ generation _ @xmath51 . by convention",
    ", we consider @xmath72 to be a balanced dyadic rational of generation @xmath45 .",
    "the set of all balanced dyadic rationals is denoted by @xmath73 . for each @xmath74 , the set of balanced dyadic rationals of generation @xmath51",
    "is denoted by @xmath75 .",
    "thus , @xmath76 .    the following lemma states in a precise way that the graph of @xmath0 contains everywhere small - scale similar copies of itself .",
    "let @xmath77 denote the graph of @xmath0 over the unit interval @xmath78 $ ] .",
    "[ lem : similar - copies ] let @xmath79 , and let @xmath80 be a balanced dyadic rational .",
    "then for @xmath81 $ ] , we have @xmath82 in other words , the part of the graph of @xmath0 above the interval @xmath83 $ ] is a similar copy of the full graph @xmath84 , reduced by a factor @xmath85 and shifted up by @xmath86 .",
    "this follows immediately from the definition , since the slope of @xmath87 over the interval @xmath83 $ ] is equal to @xmath88 , and @xmath89 .",
    "[ def : humps ]    for a balanced dyadic rational @xmath90 as in lemma [ lem : similar - copies ] , define @xmath91 , \\qquad j(x_0)=t(i(x_0)),\\\\ k(x_0)=i(x_0)\\times j(x_0),\\\\ h(x_0)=\\mathcal{g}_t\\cap k(x_0).\\end{gathered}\\ ] ] by lemma [ lem : similar - copies ] , @xmath92 is a similar copy of the full graph @xmath84 ; we call it a _ hump_. its height is @xmath93 , and we call @xmath26 its _ order_. by the _ generation _ of the hump @xmath92 we mean the generation of the balanced dyadic rational @xmath94 . a hump of generation @xmath8 will be called a _ first - generation hump_. by convention , the graph @xmath84 itself is a hump of generation @xmath45 . if @xmath95 for every @xmath96 , we call @xmath92 a _ leading hump_. see figure [ fig : humps ] for an illustration of these concepts .",
    "we denote by @xmath97 the set of all humps , and by @xmath98 the subset of @xmath99 consisting of all leading humps .",
    "it is clear that each hump of generation @xmath51 is a subset of a hump of generation @xmath100 .",
    "note also that the projections of the first - generation humps onto the @xmath5-axis have disjoint interiors .",
    "we can now sketch a more geometric proof of lemma [ lem : equivalence ] .",
    "let @xmath17 $ ] , and assume that @xmath5 is not dyadic rational .",
    "given a fixed number @xmath26 such that @xmath69 , there is a unique point @xmath62 such that @xmath101 for all @xmath102 , but @xmath103 for all @xmath104 .",
    "note that @xmath105 with @xmath90 for some integer @xmath46 .",
    "it is easy to see that @xmath106 . by lemma [ lem : similar - copies ] ,",
    "the graph of @xmath0 above @xmath107 is a hump , and is hence symmetric about its central vertical axis .",
    "therefore , @xmath52 .",
    "if @xmath5 and @xmath62 are any two non - dyadic points satisfying the hypothesis of lemma [ lem : equivalence ] , @xmath62 can be obtained from @xmath5 by countably many operations of the above type , so a simple application of the continuity of @xmath0 gives that @xmath52 .",
    "clearly , if the lemma holds for non - dyadic points , it holds for dyadic points as well , again by continuity of @xmath0 .",
    "many of the results in this paper depend on a careful count of humps of a given order .",
    "this involves the _ catalan numbers _ @xmath108 it is well known that @xmath109    [ lem : hump - count ] let @xmath79 .",
    "\\(i ) there are @xmath110 humps of order @xmath26 .",
    "\\(ii ) there are @xmath111 leading humps of order @xmath26 .",
    "each hump of order @xmath26 corresponds uniquely to a path of @xmath26 steps starting at @xmath112 , taking steps @xmath113 or @xmath114 , and ending at @xmath115 .",
    "there are @xmath110 such paths , proving ( i ) .",
    "it is well known that exactly @xmath111 of these paths stay on or above the horizontal axis ( see feller @xcite ) , which gives ( ii ) .",
    "finally , we will need the following two facts about dyadic rational abscissas .",
    "[ lem : dyadics - are - endpoints ] let @xmath5 be a dyadic rational in @xmath116 .",
    "then    \\(i ) @xmath5 is an endpoint of some interval @xmath107 with @xmath117 ; and    \\(ii ) the level set @xmath66 is infinite .",
    "let @xmath14 be a dyadic rational with terminating binary expansion @xmath118 , so that @xmath119 .",
    "let @xmath120 be the number of @xmath45 s among @xmath121 . if @xmath122 , we can simply write @xmath5 as @xmath123 and see that @xmath5 is balanced of order @xmath124 , so @xmath5 is the left endpoint of @xmath125 . in this case ,",
    "the right endpoint of @xmath125 is @xmath126 .",
    "if @xmath127 , put @xmath128",
    ". then @xmath62 is balanced of order @xmath129 , and @xmath5 is the right endpoint of @xmath130 .",
    "this proves ( i ) .",
    "note that in both cases , we have constructed a dyadic rational point @xmath62 such that @xmath131 ( by lemma [ lem : similar - copies ] , since @xmath5 and @xmath62 are the two endpoints of an interval @xmath107 for some @xmath117 ) , and the last  1 \" in the binary expansion of @xmath62 occurs later than the last  1 \" in the binary expansion of @xmath5 . since @xmath5 was arbitrary , this implies ( ii ) .",
    "we will see in section [ sec : baire ] that @xmath66 is in fact countable when @xmath5 is dyadic .",
    "[ cor : all - dyadics ] every dyadic rational in @xmath116 is contained in @xmath132 .",
    "this follows from lemma [ lem : dyadics - are - endpoints ] since each @xmath107 with @xmath117 is contained in some @xmath133 with @xmath134 .",
    "in this section we give more direct proofs of two known results , namely that almost every level set ( with respect to lebesgue measure ) is finite , but that the expected cardinality of a level set chosen at random is infinite .",
    "we also give a conceptually easier proof of a recent result by lagarias and maddock @xcite concerning local level sets .",
    "it is natural to think about these results in a probabilistic setting , so we define a probability measure @xmath135 on the range @xmath136 $ ] by @xmath137,\\ ] ] where @xmath31 ranges over the lebesgue subsets of @xmath136 $ ] , and @xmath138 denotes lebesgue measure on the line .",
    "we let @xmath139 denote the corresponding expectation operator ; that is , @xmath140 for a lebesgue measurable function @xmath141\\to{\\mathbb{r}}\\cup\\{\\infty\\}$ ] .",
    "[ lem : leading - humps ] ( i ) for every hump @xmath142 there is a leading hump @xmath143 of the same order and generation as @xmath142 , such that @xmath144 .",
    "\\(ii ) for every leading hump @xmath143 , there are only finitely many humps @xmath142 such that @xmath144 .",
    "\\(i ) let @xmath145 , where @xmath94 is a balanced dyadic rational of order @xmath26 .",
    "there is a unique balanced dyadic rational @xmath146 of order @xmath26 such that @xmath147 for all @xmath96 . by lemma [ lem : equivalence ] ,",
    "@xmath148 . by definition",
    ", @xmath149 is a leading hump of order @xmath26 and of the same generation as @xmath142 .",
    "hence @xmath143 is the same size as @xmath142 and sits at the same height in the graph of @xmath0 .",
    "therefore , @xmath143 is as required .",
    "\\(ii ) this is immediate from lemma [ lem : hump - count ] .",
    "recall that @xmath150 denotes the set of first - generation balanced dyadic rationals .",
    "define a subset @xmath151 of @xmath78 $ ] by @xmath152\\backslash\\bigcup_{x_0\\in{\\mathcal{b}}_1}i(x_0 ) .",
    "\\label{eq : xstar}\\ ] ] in other words , @xmath151 is obtained by removing all the dyadic closed intervals above which the graph of @xmath0 has a first - generation hump . by corollary [ cor : all - dyadics ]",
    ", @xmath151 does not contain any dyadic rationals other than @xmath45 and @xmath8 .",
    "note that @xmath151 is symmetric , so the restriction of @xmath0 to @xmath151 is symmetric as well .",
    "the importance of @xmath151 is made clear by the following proposition , which will be used repeatedly throughout this paper .",
    "[ lem : bijection ] the takagi function @xmath0 maps @xmath151 onto @xmath153 $ ] .",
    "moreover , @xmath0 is strictly increasing on @xmath154 .",
    "the proof of the proposition uses the following auxiliary functions .",
    "let @xmath155 and define piecewise linear approximants of @xmath156 by @xmath157 thus , @xmath158 permanently  fixes \" each first - generation flat segment in the piecewise linear approximations of @xmath0 .",
    "[ lem : t - star ] the functions @xmath156 and @xmath158 have the following properties :    \\(i ) @xmath158 is continuous and nondecreasing on @xmath153 $ ] for every @xmath51 ;    \\(ii ) @xmath159 uniformly on @xmath78 $ ] ;    \\(iii ) @xmath156 is continuous and nondecreasing on @xmath153 $ ] .    statement ( i )",
    "is obvious for @xmath160 , as @xmath161 . in the transition from @xmath158",
    "to @xmath162 , each horizontal line segment stays fixed , and each line segment of strictly positive integer slope @xmath26 is replaced with two connecting line segments of slopes @xmath163 and @xmath164 , respectively , which meet the original line segment at its endpoints .",
    "thus , it follows inductively that ( i ) holds for every @xmath165 .    statement ( ii ) follows from the uniform convergence of @xmath166 to @xmath0 by the following argument .",
    "let @xmath17 $ ] .",
    "if @xmath167 , then @xmath168 .",
    "suppose instead that @xmath105 , with @xmath169 . if @xmath170 , then the flat segment above @xmath107 has already been fixed by @xmath158 , and so @xmath171 . finally , if @xmath172 , then @xmath173 since @xmath174 in this case , the first term on the right hand side of the above inequality can be made uniformly small by choosing @xmath51 sufficiently large , using the uniform continuity of @xmath0 . since @xmath175 uniformly , an examination of the three cases above allows us to conclude statement ( ii )",
    "statement ( iii ) , of course , is a direct consequence of ( i ) and ( ii ) .",
    "we show first that @xmath0 maps @xmath151 onto @xmath153 $ ] .",
    "we have @xmath176 and @xmath177 , so lemma [ lem : t - star](iii ) implies that @xmath178)=[0,\\frac12]$ ] .",
    "let an ordinate @xmath179 $ ] be given , and set @xmath180 .",
    "( the minimum is well defined by the continuity of @xmath156 . )",
    "suppose , by way of contradiction , that @xmath181 for some @xmath182 .",
    "then @xmath183 .",
    "since @xmath94 is balanced of generation 1 and lies in @xmath153 $ ] , its binary expansion is of the form @xmath184 for some @xmath26 .",
    ". then @xmath146 is balanced , and the right endpoint of @xmath133 is @xmath94 .",
    "thus , @xmath186 .",
    "but @xmath187 from above , so this contradicts the definition of @xmath188 since @xmath189 .",
    "we conclude therefore that @xmath190 , and as a result , @xmath191 , as desired .",
    "next , we show that @xmath0 is strictly increasing on @xmath154 .",
    "observe first that , if @xmath192 , then @xmath193 for all @xmath120 .",
    "this is true since @xmath194 means that @xmath195 , and @xmath196 changes by @xmath197 at each step , so it could not become negative without first becoming zero , in which case @xmath5 would not lie in @xmath151 .",
    "let @xmath198 with @xmath199 .",
    "take any dyadic rational @xmath200 . by corollary [ cor : all - dyadics ]",
    "there is @xmath182 , say @xmath90 , such that @xmath201 , and at the same time , neither @xmath5 nor @xmath62 lies in @xmath107 .",
    "thus , @xmath202 . let @xmath203 . since @xmath62 is not a dyadic rational , the derivative of @xmath158 at @xmath62 is defined and is equal to the strictly positive number @xmath204 .",
    "since @xmath158 is nondecreasing , it follows that @xmath205 since @xmath206 , this implies @xmath207 . letting @xmath208",
    ", it follows that @xmath209 .",
    "\\(a ) the set @xmath154 is a proper subset of the set @xmath210 of lagarias and maddock @xcite : @xmath210 contains certain dyadic rationals ( precisely , right endpoints of intervals @xmath107 ) , whereas @xmath154 does not .",
    "it is exactly this difference which makes @xmath0 strictly increasing on @xmath154 .",
    "the small price to pay for this is that @xmath151 has higher set - theoretic complexity : whereas @xmath210 is a closed set , @xmath151 is merely a @xmath211 .    in fact ,",
    "a bit more can be said about the structure of @xmath151 .",
    "it can be gleaned from the first half of the proof of proposition [ lem : bijection ] that @xmath212 $ ] is really the complement of a countable union of half - open intervals @xmath213 $ ] .",
    "this is explained by the fact that at each level @xmath86 , @xmath182 , countably many of the intervals @xmath125 glue together at their endpoints to form a half - open interval , and @xmath0 takes the same value @xmath86 at the endpoints of all these intervals .",
    "for instance , the point @xmath167 such that @xmath214 is @xmath215 .",
    "the removed half - open interval @xmath216 $ ] is the union of the first - generation intervals @xmath217 $ ] , @xmath218 $ ] , @xmath219 $ ] , etc . , where the left endpoint of the @xmath46th interval is @xmath220 .",
    "\\(b ) the function @xmath156 is closely related to the _ takagi singular function _",
    "@xmath221 of lagarias and maddock @xcite , as follows : for all @xmath222 $ ] , @xmath223 .",
    "the author is grateful to the referee for pointing this out .",
    "since we do not need this fact here , we omit the details . for more properties of the function @xmath221 and the associated singular probability measure , see @xcite .",
    "let @xmath224 , so @xmath225 is the graph of @xmath0 with all first - generation humps removed . for a hump @xmath145 ,",
    "the affine transformation that maps @xmath84 onto @xmath142 maps @xmath225 onto a set which we call a _ truncated hump _ , and denote by @xmath226 .",
    "let @xmath227 . proposition [ lem : bijection ] implies that if @xmath228 $ ] , then @xmath229 $ ] .    in",
    "what follows , let @xmath230 denote the horizontal line at level @xmath2 .",
    "that is , @xmath231    [ lem : when - finite ] let @xmath10 $ ] .",
    "then @xmath232 if and only if @xmath230 intersects only finitely many leading humps .",
    "suppose @xmath230 intersects only finitely many leading humps .",
    "then by lemma [ lem : leading - humps ] it intersects only finitely many humps .",
    "let @xmath233 denote the maximal generation of all humps intersected by @xmath230 . then @xmath230 intersects each hump of generation @xmath233 only in the corresponding truncated hump , and hence it intersects each such hump in at most two points , by proposition [ lem : bijection ] .",
    "thus , @xmath230 has only finitely many intersection points with humps of generation @xmath233 . but then @xmath230 intersects each hump @xmath142 of generation @xmath234 in at most finitely many points : at most two contributed by the truncated hump @xmath235 , plus ( at most ) finitely many contributed by the humps of generation @xmath233 contained in @xmath142 . hence",
    ", since @xmath230 intersects only finitely many humps , it has only finitely many intersection points with humps of generation @xmath234 .",
    "continuing this argument inductively we find that for each @xmath236 , @xmath230 has only finitely many intersection points with humps of generation @xmath51 .",
    "since @xmath84 is a hump of generation @xmath45 , it follows that @xmath232 .",
    "conversely , suppose @xmath230 intersects infinitely many leading humps , and consider two cases .",
    "if there is a number @xmath233 such that @xmath230 intersects infinitely many leading humps of generation @xmath233 , then @xmath12 is infinite because leading humps of the same generation can have at most one point in common , and @xmath230 intersects each hump in at least two points .",
    "if there is no such @xmath233 , then @xmath230 intersects at least one hump of each generation @xmath51 .",
    "if @xmath237 is such an intersection point , then there are @xmath51 indices @xmath238 such that @xmath239 .",
    "it follows that there are @xmath240 points @xmath62 with @xmath241 for each @xmath238 , so by lemma [ lem : equivalence ] , @xmath230 intersects @xmath242 at least @xmath240 times .",
    "since this is the case for every @xmath165 , we conclude that @xmath243 .",
    "( the  only if \" part of the lemma is not used in this section , but will be needed in section [ sec : baire ] . )",
    "[ thm : finite - ae ] for almost every @xmath2 ( with respect to lebesgue measure on @xmath136 $ ] ) , @xmath12 is a finite set .",
    "if @xmath2 is chosen at random and @xmath142 is a leading hump of order @xmath26 , the probability that the line @xmath230 intersects @xmath142 is @xmath244 .",
    "this gives @xmath245 by , because there are @xmath111 leading humps of order @xmath26 .",
    "thus , by the borel - cantelli lemma , the probability that",
    "@xmath230 intersects infinitely many @xmath142 in @xmath98 is zero .",
    "therefore , by lemma [ lem : when - finite ] , @xmath12 is finite with probability @xmath8 .",
    "[ lem : cardinality - of - l ] for any ordinate @xmath2 , if @xmath12 is finite , then its cardinality is given by @xmath246    two truncated humps can intersect each other in at most one point , and if they do , the common point is the lower left or lower right vertex of at least one of the two truncated humps . in that case",
    ", the @xmath5-coordinate of the common point is clearly a dyadic rational , so that the corresponding level set is infinite by lemma [ lem : dyadics - are - endpoints](ii ) .",
    "let @xmath232 , and let @xmath5 be an abscissa with @xmath247 .",
    "it must then be the case that @xmath71 for only finitely many @xmath120 ( perhaps none ) , for otherwise , as remarked below lemma [ lem : equivalence ] , @xmath12 would contain a cantor set .",
    "thus , there is @xmath248 such that @xmath69 , but @xmath249 for all @xmath250 .",
    "this means @xmath251 , where @xmath94 is the dyadic rational @xmath252 whose first @xmath253 digits coincide with those of @xmath5 . since @xmath5 was arbitrary ,",
    "we conclude that each intersection point of the line @xmath230 with @xmath242 must lie on some truncated hump , and by the remark at the beginning of the proof , intersections with different truncated humps are disjoint . by proposition",
    "[ lem : bijection ] , @xmath230 intersects each truncated hump either not at all or in exactly two points .",
    "this gives .",
    "[ thm : infinite - expectation ] the expected cardinality of a level set @xmath12 for @xmath2 chosen at random from @xmath136 $ ] is infinite .",
    "that is , @xmath254    by , @xmath255 is lebesgue measurable , so its integral is well defined . by lemma [ lem : cardinality - of - l ] and theorem [ thm : finite - ae ] , @xmath256 since @xmath257 for a balanced dyadic @xmath94 of order @xmath26 , and @xmath258 as @xmath259 .",
    "lagarias and maddock @xcite",
    "introduce the concept of a local level set of the takagi function .",
    "they first define an equivalence relation on @xmath78 $ ] by @xmath260 note that by lemma [ lem : equivalence ] , @xmath261 implies @xmath52 . the _ local level set _ containing @xmath5",
    "is then defined by @xmath262 lagarias and maddock point out that each local level set is either finite or a cantor set .",
    "one of their results deals with the average number of local level sets contained in a level set chosen at random .",
    "let @xmath263 denote the number of local level sets contained in @xmath12 .",
    "lagarias and maddock @xcite define @xmath264 slightly differently .",
    "they treat each dyadic point @xmath5 as a pair of separate points @xmath265 and @xmath266 according to the two possible binary expansions of @xmath5 , and by , @xmath265 and @xmath266 represent different local level sets . thus , compared to our definition , some local level sets contain extra points of the form @xmath266 in the definition of lagarias and maddock , where @xmath266 corresponds to the representation of @xmath5 ending in all ones .",
    "but the difference in definitions does not affect the _ number _ of local level sets contained in any level set , which is all we are concerned with in this paper .",
    "[ thm : local - level - sets ] the expected number of local level sets contained in a level set @xmath12 with @xmath2 chosen at random from @xmath136 $ ] is @xmath25 .",
    "more precisely , @xmath267=\\frac32\\int_0^{2/3}n^{loc}(y)\\,dy=\\frac32.\\ ] ]    since @xmath12 is finite for almost every @xmath2 with respect to lebesgue measure , we need only consider local level sets which are finite .",
    "* claim : * the number of _ finite _ local level sets contained in @xmath12 is exactly @xmath268 to prove the claim , note that there is an obvious one - to - one correspondence between leading humps and truncated leading humps .",
    "we show that for @xmath10 $ ] , there is a bijection between the collection of finite local level sets in @xmath12 and the collection of truncated leading humps which intersect the line @xmath230 .",
    "note that we can parametrize finite local level sets by their left - most point .",
    "if @xmath269 with left - most point @xmath5 , then their must exist @xmath248 such that @xmath69 , but @xmath193 for all @xmath250 .",
    "( otherwise , @xmath264 would be a cantor set . )",
    "let @xmath94 be the dyadic rational @xmath252 whose first @xmath253 binary digits coincide with those of @xmath5 .",
    "then @xmath251 as in the proof of lemma [ lem : cardinality - of - l ] .",
    "thus , we have a mapping from finite local level sets in @xmath12 to truncated leading humps which intersect @xmath230 .",
    "this mapping is bijective .",
    "it is onto , because given a truncated leading hump @xmath235 which intersects @xmath230 , let @xmath5 be the left - most point such that @xmath270 ; then the local level set @xmath264 gets mapped to @xmath235 .",
    "the mapping is one - to - one , because any truncated hump @xmath235 can have only two points of intersection with @xmath230 , and the abscissas of both points belong to the same local level set .",
    "the claim follows from the above one - to - one correspondence .",
    "using the claim we obtain , by a calculation similar to that in the proof of theorem [ thm : infinite - expectation ] , @xmath267=\\sum_{h\\in{\\mathcal{h}}'}\\operatorname{p}\\left(y\\in \\pi_y(h^t)\\right ) = \\frac34\\sum_{m=0}^\\infty c_m\\left(\\frac14\\right)^m=\\frac32.\\ ] ] here the second equality follows by lemma [ lem : hump - count](ii ) , and the third by .",
    "lagarias and maddock @xcite prove theorem [ thm : local - level - sets ] above by introducing a  flattened takagi function \" and using the coarea formula from the theory of functions of bounded variation .",
    "the approach used here is more straightforward and appears more natural .",
    "we next investigate the level sets from the point of view of baire category , and find that the results sharply contrast those of the previous section . in this section ,",
    "descriptive set theory notation is used to indicate the complexity of certain sets . for",
    "the definitions and properties of the borel hierarchy , see kechris ( * ? ? ?",
    "* sections 11.b and 22 ) .",
    "define the set @xmath271 : |l(y)|=\\infty\\}.\\ ] ]    [ lem : dense - union ] for each @xmath165 , the set @xmath272 is dense in @xmath136 $ ] .    observe that , considered as a stochastic process on @xmath78 $ ] with lebesgue measure , @xmath273 is a symmetric simple random walk , and therefore returns to @xmath45 infinitely many times with probability one .",
    "this implies that for each @xmath51 the set @xmath274 has full measure in @xmath78 $ ] , so in particular , @xmath275 is dense .",
    "since @xmath0 is continuous , it follows that @xmath276 is dense in @xmath136 $ ] .",
    "but @xmath277 .",
    "[ thm : topology ] ( i ) for each @xmath79 , the set @xmath278 is nowhere dense in @xmath136 $ ] .",
    "\\(ii ) the set @xmath279 is residual in @xmath136 $ ] , and is @xmath280 in the borel hierarchy .",
    "recall from the proof of lemma [ lem : when - finite ] that , if the line @xmath230 intersects a hump of generation @xmath51 , then @xmath281 .",
    "choose an integer @xmath51 such that @xmath282 .",
    "then @xmath283 implies that @xmath230 does not intersect any hump of generation @xmath51 .",
    "but the union of the projections of @xmath51-th generation humps is dense in @xmath136 $ ] by lemma [ lem : dense - union ] , so each interval in @xmath136 $ ] contains as a subinterval some @xmath284 with @xmath285 which does not intersect @xmath286 . hence @xmath286 is nowhere dense in @xmath136 $ ] , proving ( i ) .",
    "the first statement of ( ii ) is an immediate consequence of ( i ) , since @xmath287\\backslash \\bigcup_{m=1}^\\infty s_{\\leq m}$ ] . as for the second statement",
    ", a theorem of borsuk @xcite says that for _ any _ continuous function @xmath288 , the set @xmath289 is the union of a @xmath211 and a countable set .",
    "indeed , lemma [ lem : when - finite ] gives the explicit form @xmath290 replacing each @xmath291 with its interior clearly reduces the set on the right by at most countably many points , and turns it into a @xmath211 set .",
    "thus @xmath279 is the union of a @xmath211 and a countable set , and is therefore of type @xmath292 .",
    "note that in view of theorems [ thm : finite - ae ] and [ thm : topology ] , the set @xmath293 provides yet another example of a set of first category but of full lebesgue measure in @xmath136 $ ] .",
    "we now investigate the set @xmath279 in more detail .",
    "note that it has the natural decomposition @xmath294 , where @xmath295 : l(y)\\ \\mbox{is countably infinite}\\},\\\\ s_\\infty^{uc}:=\\{y\\in[0,\\tfrac23 ] : l(y)\\ \\mbox{is uncountably infinite}\\}.\\end{gathered}\\ ] ]    [ lem : uncountables ] the set @xmath29 has the representation @xmath296 where @xmath297 as in lemma [ lem : dense - union ] .",
    "let @xmath298 .",
    "then for each generation @xmath51 there is a balanced dyadic rational @xmath299 such that @xmath300 .",
    "since each hump of generation @xmath51 is contained in a hump of generation @xmath100 , we may assume that for each @xmath51 , the binary expansion of @xmath301 is an extension of that of @xmath302 .",
    "let @xmath303 .",
    "then @xmath71 for infinitely many @xmath120 , so @xmath264 is a cantor set and is in particular uncountable .",
    "it remains to show that @xmath247 .",
    "but this follows since a hump of generation @xmath51 is at least of order @xmath51 ( see definition [ def : humps ] ) , so the intervals @xmath304 shrink to the single point @xmath2 .",
    "furthermore , @xmath305 .",
    "hence , @xmath306 .",
    "conversely , suppose @xmath307 .",
    "since the sets @xmath308 are nested , this means that there is an index @xmath233 such that @xmath309 when @xmath310 . in other words , the line @xmath230 intersects humps of only finitely many generations .",
    "the rest of the proof is very similar to the first part of the proof of lemma [ lem : when - finite ] , but is included here for definiteness .",
    "we claim that @xmath230 intersects each hump in at most countably many points .",
    "this is certainly true for each hump @xmath142 of generation @xmath233 : since @xmath230 does not intersect any smaller humps contained in @xmath142 , it intersects @xmath142 in at most two points by proposition [ lem : bijection ] .",
    "thus for any hump @xmath142 of generation @xmath234 , @xmath230 intersects @xmath142 in at most countably many points contributed by humps of generation @xmath233 contained in @xmath142 , plus two points contributed by the truncated hump @xmath235 .",
    "this implies the claim for all humps of generation @xmath234 . continuing this way , we see inductively that the claim is true for all humps .",
    "but since the whole graph @xmath84 is a hump of generation @xmath45 , the claim immediately implies that @xmath12 is countable , and so @xmath311 .",
    "it is worth noting that , in view of the above lemma , @xmath29 is the projection onto the @xmath2-axis of the irregular @xmath8-set @xmath312 of buczolich ( * ? ? ?",
    "* theorem 9 ) .",
    "we show next that the set @xmath29 does not contain any dyadic rationals . for each @xmath117",
    ", write @xmath313 $ ] , and let @xmath314 denote the interior of @xmath284 .",
    "[ lem : endpoints ] if @xmath2 is a dyadic rational or has a binary expansion of the form @xmath315 for some @xmath165 , then there are at most finitely many @xmath117 such that @xmath316 .",
    "if @xmath117 , then it has a binary expansion of the form @xmath317 for some @xmath79 . since @xmath318 , it follows easily from the definition that @xmath319 has a binary expansion of the form @xmath320",
    ". then @xmath321 by lemma [ lem : similar - copies ] , so that @xmath322 has binary expansion @xmath323 .",
    "thus , if @xmath324 , we must have @xmath325 so that in particular , the first @xmath253 binary digits of @xmath2 must be @xmath326 .    if @xmath2 is dyadic , then @xmath327 for some @xmath165 , and is possible only if @xmath328 . likewise ,",
    "if @xmath2 is of the form @xmath315 , implies @xmath328 . thus , for fixed @xmath51 , there are only finitely many possible choices for @xmath26 , and for each of those , there are only finitely many points @xmath94 .",
    "[ prop : no - dyadics ] the set @xmath29 does not contain any dyadic rationals . in other words , if @xmath2 is dyadic , then @xmath12 is countable",
    ".    let @xmath2 be a dyadic rational , and suppose by way of contradiction that @xmath329 . by lemmas [ lem : uncountables ] and [ lem : endpoints ] , there must be a number @xmath233 such that @xmath330 since @xmath322 is never dyadic , this means that for each @xmath331 there is a point @xmath299 such that @xmath332 .",
    "let @xmath333 be the unique balanced dyadic rational of generation @xmath100 such that the binary expansion of @xmath301 extends that of @xmath333 . then @xmath334 for each @xmath331 , because @xmath335 for all @xmath336 .",
    "but then @xmath337 for each @xmath331 , contradicting lemma [ lem : endpoints ] .",
    "we observe that level sets at a dyadic level @xmath2 can be either finite or infinite . by lemma [ lem : dyadics - are - endpoints](ii ) , @xmath12 is infinite whenever @xmath338 for some dyadic rational @xmath14 , and this determines a dense set of ordinates @xmath2 . on the other hand , in a separate paper @xcite",
    "we show that there are also infinitely many dyadic levels @xmath2 with @xmath339 .",
    "examples are @xmath340 , @xmath341 , and @xmath342 .",
    "[ thm : s - uncountable ] the set @xmath29 is @xmath280 in the borel hierarchy , and has the decomposition @xmath343 , where @xmath344 is a dense @xmath211 given by @xmath345 and @xmath346 is a countable set disjoint from @xmath344 which consists exactly of the local maximum ordinate values of @xmath0 . as a result , the set @xmath28 : l(y)\\ \\mbox{\\rm is countable}\\}$ ] is of the first category .",
    "the set @xmath344 is obviously a @xmath211 , and it is dense in @xmath136 $ ] by lemma [ lem : dense - union ] and baire s theorem .",
    "( since @xmath308 is a union of intervals , removing the endpoints of these intervals does not ruin denseness . )",
    "let @xmath347 .",
    "by lemma [ lem : uncountables ] , @xmath346 contains only points of the form @xmath319 or @xmath322 .",
    "if @xmath117 , then @xmath348 by proposition [ prop : no - dyadics ] , so @xmath349 . on the other hand",
    ", @xmath322 is the maximum value of @xmath0 over @xmath107 , so @xmath350 has at least the same cardinality as @xmath16 . by the result of kahane @xcite ,",
    "this means @xmath351 .",
    "finally , @xmath352 by lemma [ lem : endpoints ] . combining these facts ,",
    "we conclude that @xmath353 . that @xmath29 is @xmath280 follows since @xmath344 is @xmath354 and @xmath346 is @xmath355 , so their union is @xmath280 .",
    "[ cor : countable - level - sets ] the set @xmath356 is @xmath280 in the borel hierarchy .",
    "it is dense , but it is of first category in @xmath136 $ ] and of lebesgue measure zero .    by theorem [ thm : topology](ii ) and theorem [ thm : s - uncountable ] , @xmath357 is the difference of two @xmath280 sets , so it is itself @xmath280 .",
    "it is dense in view of proposition [ prop : no - dyadics ] and the remark following it , but it is of measure zero by theorem [ thm : finite - ae ] , and of the first category by theorem [ thm : s - uncountable ] .",
    "\\(a ) there remain a number of natural questions about the set @xmath357 .",
    "for instance , could it in fact be an @xmath358 , or stronger still , a countable set ?",
    "does it contain any points which are _ not _ images of dyadic rationals ? by lemmas [ lem : when - finite ] and [ lem : uncountables ] , @xmath359 if and only if the line @xmath230 intersects infinitely many humps , but does not intersect humps of infinitely many generations .",
    "it seems difficult to determine how many points @xmath2 satisfy these two conditions .",
    "\\(b ) let @xmath360 denote the set of ordinates @xmath2 with @xmath232 .",
    "then the three sets @xmath360 , @xmath357 and @xmath29 , which together make up the range of @xmath0 , give three different combinations of results when measured both by lebesgue measure and baire category : @xmath360 is of full lebesgue measure but of first category ; @xmath357 is both of measure zero and of first category ; and @xmath29 is of measure zero but residual ( i.e. large in the sense of category ) .",
    "these results show a remarkable sort of antisymmetry between these three sets .    to end this section",
    ", we answer a question posed by lagarias and maddock .",
    "they show ( * ? ? ?",
    "* theorem 7.2 ) that the set @xmath361 is dense in @xmath136 $ ] , and ask whether it is countable . that this is",
    "far from being the case is shown below .",
    "[ thm : infinite - local - level - sets ] ( i ) the set @xmath362 is residual ( co - meager ) in @xmath136 $ ] .",
    "\\(ii ) the set @xmath363 is dense in @xmath136 $ ] , and intersects any subinterval of @xmath136 $ ] in a continuum .",
    "the author does not know whether @xmath364 is residual , or whether it has full hausdorff dimension @xmath8 .",
    "note that the proof of lemma [ lem : uncountables ] shows that every uncountable level set contains an uncountable local level set .",
    "so in particular , every level set that contains uncountably many local level sets must have at least one of these local level sets being uncountable .    to prove the theorem , we need the following strengthening of lemma [ lem : dense - union ] .    [",
    "lem : stronger - dense - union ] for each @xmath165 , the set @xmath365 is dense in @xmath153 $ ] .",
    "recall the function @xmath156 defined in and the fact , as stated in lemma [ lem : t - star ] , that @xmath156 is continuous .",
    "it was also shown in the proof of proposition [ lem : bijection ] that @xmath156 maps @xmath78 $ ] onto @xmath153 $ ] . as in the proof of lemma [ lem : dense - union ] , the set @xmath274 is dense in @xmath78 $ ] , and so @xmath366 is dense in @xmath153 $ ] .",
    "but @xmath367 .",
    "[ cor : proper - subintervals ] let @xmath165 . for each finite subset @xmath368 of @xmath75 and for each interval",
    "@xmath369 $ ] , @xmath370 properly contains some @xmath284 with @xmath371 .",
    "let @xmath368 be a finite subset of @xmath75 , and let @xmath370 be any subinterval of @xmath153 $ ] .",
    "let @xmath372 be the set of all those @xmath285 for which @xmath373 .",
    "then @xmath372 is finite , so @xmath374 is dense in @xmath153 $ ] by lemma [ lem : stronger - dense - union ] , since only finitely many points are removed from @xmath365 .",
    "hence there is an @xmath375 such that @xmath86 lies in the lower ( left ) half of @xmath370 .",
    "but @xmath86 is the lower endpoint of @xmath284 , so the interval @xmath284 , having length at most @xmath376 , is properly contained in @xmath370 .",
    "we observe that the interval @xmath153 $ ] in corollary [ cor : proper - subintervals ] can not be replaced by @xmath136 $ ] .",
    "for instance , if @xmath160 and @xmath377 , then the interval @xmath378 $ ] is removed and there are no further first - generation intervals which overlap the interval @xmath379 $ ] , say .",
    "[ lem : tree - of - humps ] let @xmath2 be an ordinate such that the horizontal line @xmath230 at level @xmath2 intersects , for each @xmath165 , ( at least ) @xmath380 different leading humps @xmath381 of generation @xmath51 in such a way that for each @xmath382 , @xmath383 and @xmath384 are part of @xmath385",
    ". then @xmath12 contains uncountably many local level sets .",
    "the hypothesis of the lemma says that the line @xmath230 intersects a binary tree of leading humps , with each level of the tree corresponding to a distinct generation , and each hump being a subset of its predecessor in the tree . as the root of the tree",
    "we take the hump @xmath386 , the graph of @xmath0 . to prove the lemma",
    ", it clearly suffices to show that each path through this tree starting at the root @xmath387 will identify a different local level set in @xmath12 .",
    "let @xmath388 be the balanced dyadic rational such that @xmath389 .",
    "each path through the tree corresponds to a sequence @xmath390 such that @xmath391 , and @xmath392 is either @xmath393 or @xmath394 for each @xmath165 .",
    "since the binary expansion of @xmath395 extends that of @xmath396 , the limit @xmath397 exists , its binary expansion extends that of each @xmath396 , and @xmath398 because the sequence @xmath399 is nested and @xmath400 .",
    "if we have two such paths , coded by sequences @xmath390 and @xmath401 , say , then the sequences @xmath402 and @xmath403 differ at some index @xmath51 .",
    "but then their respective limits @xmath5 and @xmath62 represent different local level sets , since @xmath404 and @xmath405 for every @xmath120 , while @xmath406 for some @xmath120 .",
    "so @xmath5 and @xmath62 can not satisfy in section [ subsec : local ] .",
    "the idea is to first use corollary [ cor : proper - subintervals ] to prove the corresponding statements relative to @xmath153 $ ] , and then use the graph s self - similarity properties to extend the results to @xmath136 $ ] . to this end ,",
    "define intervals @xmath407 , where @xmath408 also put @xmath409 .",
    "note that @xmath136=\\bigcup_{k=0}^\\infty i_k\\cup\\{\\frac23\\}$ ] , and for each @xmath410 , the mapping @xmath411 maps @xmath412 onto @xmath413 . by lemma [ lem : similar - copies ]",
    ", we see that if @xmath414 , then @xmath415 contains a @xmath416-scale affine copy of @xmath12 ( two copies in fact , unless @xmath23 ; see also the graph of @xmath0 ) .",
    "thus , if @xmath12 contains infinitely ( uncountably ) many local level sets , so does @xmath415 .",
    "it is therefore enough to prove that @xmath417 $ ] is residual in @xmath153 $ ] , and that @xmath364 intersects each subinterval of @xmath153 $ ] in a continuum .",
    "let @xmath179 $ ] , and note that if the line @xmath230 intersects infinitely many first - generation leading humps , then @xmath418 , since the intersection points with different first - generation leading humps represent different local level sets .",
    "thus @xmath362 contains the set @xmath419 where @xmath420 denotes the interior of @xmath284 .",
    "the set @xmath421 is clearly a @xmath211 , and is dense in @xmath153 $ ] by lemma [ lem : stronger - dense - union ] and baire s theorem .",
    "hence , @xmath417 $ ] is residual in @xmath153 $ ] . as explained above ,",
    "this proves ( i ) .",
    "to prove ( ii ) , let an interval @xmath422 $ ] be given . we will show that there is a continuum of points @xmath2 in @xmath423 satisfying the hypothesis of lemma [ lem : tree - of - humps ] .",
    "this then extends to all of @xmath136 $ ] in view of the observation at the beginning of the proof .    by corollary [ cor : proper - subintervals ] , we can find a first - generation hump @xmath424 whose projection @xmath425 onto the @xmath2-axis lies inside @xmath423 . by lemma [ lem : leading - humps ] , we may take @xmath424 to be a leading hump .",
    "applying corollary [ cor : proper - subintervals ] and lemma [ lem : leading - humps ] again in the same way , @xmath425 properly contains the projection @xmath426 of some first - generation leading hump @xmath427 distinct from @xmath424 .",
    "since the containment is proper , there is , again by corollary [ cor : proper - subintervals ] , at least one other leading hump @xmath428 whose projection @xmath429 lies fully inside @xmath430 .",
    "next , we apply corollary [ cor : proper - subintervals ] and lemma [ lem : leading - humps ] four times to find successively , in the same way as above , second - generation leading humps @xmath431 with projections @xmath432 such that @xmath433 , @xmath434 for @xmath435 , and all the containments are proper .",
    "furthermore , these can be chosen so that @xmath436 and @xmath437 are part of @xmath424 , while @xmath438 and @xmath439 are part of @xmath427 .",
    "proceeding in this manner we can build the rest of the binary tree : at stage @xmath51 , we can successively find leading humps @xmath381 of generation @xmath51 with projections @xmath440 such that @xmath441 , @xmath442 for @xmath443 , and all the containments are proper .",
    "furthermore , we can choose these humps in such a way that for each @xmath382 , @xmath383 and @xmath384 are part of @xmath385 .",
    "note that at each step , there is an alternative leading hump @xmath444 whose projection @xmath445 also lies inside @xmath446 ( or inside @xmath447 if @xmath448 ) and is disjoint from @xmath449 .    now that the tree has been constructed , the intersection of all the intervals @xmath449 , where @xmath450 and @xmath451 , is a single point @xmath2 , and @xmath452 . since at any step we could have chosen @xmath445 instead of @xmath449 ,",
    "there is in fact a continuum of such binary trees , and each one gives a different ordinate @xmath2 in @xmath423 by the assumption that @xmath449 and @xmath445 are disjoint .",
    "thus , part ( ii ) of the theorem follows .",
    "recall from theorem [ thm : local - level - sets ] that the average number of local level sets in a randomly chosen level set is @xmath25 .",
    "theorem [ thm : infinite - local - level - sets](i ) stands in marked contrast to that result , and is a further example of the discrepancy between measure theory and baire category .",
    "many of the main results of this paper continue to hold if we multiply the summands in by arbitrary signs .",
    "let @xmath453 be a sequence of @xmath454-valued numbers , and define @xmath455 two examples are shown in figure [ fig : general - examples ] .",
    "again we let @xmath456:f(x)=y\\}$ ] denote the level set of @xmath288 at level @xmath2 . to analyze these level sets , we need notation analogous to that of section 2 . first , define @xmath457 note that , just as with the takagi function itself , @xmath458 uniformly on @xmath78 $ ] , and so @xmath288 is continuous .    with the binary expansion of @xmath41 denoted as in ,",
    "let @xmath459 then @xmath460 except at the points @xmath461 , @xmath462 , where @xmath463 is undefined .",
    "[ lem : general - d - expression ] the function @xmath288 can be expressed in terms of @xmath48 by @xmath464 where @xmath465 is independent of @xmath5 .",
    "let @xmath466 .",
    "then we can write @xmath467 as @xmath468 similarly , @xmath469 substituting this into we obtain @xmath470 and re - indexing gives .",
    "consequently ( and this is of critical importance here ) , lemma [ lem : equivalence ] holds with @xmath288 replacing @xmath0 .",
    "we define balanced dyadic rationals and the notation @xmath73 , @xmath75 as in definition [ def : balanced ] , keeping in mind the new definition of @xmath471 .",
    "lemma [ lem : similar - copies ] no longer holds , of course ( except in a few special cases , such as the alternating takagi function , which arises when @xmath472 ) .",
    "but we will , for consistency , continue to use the word  hump \" for the portion of the graph of @xmath288 above an interval @xmath83 $ ] if @xmath90 is a balanced dyadic rational .",
    "we define the order and generation of a hump as before , and likewise we keep writing @xmath473 $ ] , and @xmath474 .",
    "note , however , that @xmath475 need no longer be an endpoint of @xmath284 .",
    "different humps may have different shapes , but all are left - to - right symmetric , and we still have  uniformity within orders \" : any two humps of the same order @xmath26 are identical copies of each other .",
    "note also that , while the location of the humps in the graph of @xmath288 depends on @xmath476 , the _ number _ of humps ( or leading humps ) of a given order does not .",
    "thus  and this is the second crucial fact ",
    "lemma [ lem : hump - count ] continues to hold .",
    "we denote the graph of @xmath288 by @xmath477 , and define the _ height _ of the graph by @xmath478}f(x)-\\min_{x\\in[0,1]}f(x).\\ ] ] similarly , for a hump @xmath145 we define its height by @xmath479 since @xmath480 and @xmath481 , we have @xmath482 . in case of the takagi function",
    "the height is @xmath6 , and that is also the maximum possible :    [ prop : height ] the height of @xmath477 is at most @xmath6 .",
    "that is , @xmath483}f(x)-\\min_{x\\in[0,1]}f(x)\\leq\\frac23.\\ ] ]    set @xmath484 and @xmath485 .",
    "put @xmath486 for @xmath165 , and for @xmath487 , let @xmath488 .",
    "it is shown in ( * ? ? ?",
    "* theorem 1.1 ) that @xmath489 where @xmath490 is interpreted as zero .",
    "( note that in @xcite , @xmath491 is defined as @xmath492 and hence the expression given there has an extra factor @xmath21 . )",
    "analogously , we have @xmath493 thus , @xmath494 since the @xmath495 are all distinct and odd , it follows that @xmath496 .    as a consequence",
    ", we have for each hump @xmath142 of order @xmath26 , @xmath497 this follows since @xmath142 is itself the ( scaled and shifted ) graph of a function of the form , with @xmath498 .",
    "next , define a set @xmath499\\backslash \\bigcup_{x_0\\in{\\mathcal{b}}_1 } i^\\circ(x_0),\\ ] ] where @xmath500 denotes the interior of @xmath107 .",
    "note that @xmath501 is closed .",
    "( here we slightly deviate from the way we defined @xmath151 earlier , for reasons that will be made clear below . ) for a hump @xmath92 of generation @xmath51 , define the subset @xmath502 of @xmath107 similarly by @xmath503 we call the graph of @xmath288 restricted to @xmath502 a _ truncated hump _ , and denote it by @xmath226 .",
    "the reason for including the endpoints of the intervals @xmath133 in @xmath502 is to ensure that @xmath504 is again an interval .    since lemma [ lem : equivalence ] still holds , lemma [ lem : leading - humps ] remains valid as well . in place of the key proposition [ lem : bijection ]",
    "we have the following result , slightly weaker but sufficient for our purposes .",
    "[ lem : key - lemma - general ] ( i ) if @xmath505 , then @xmath506 $ ] . if @xmath507 , then @xmath508 $ ] .",
    "\\(ii ) if @xmath509 , then @xmath12 intersects @xmath510 $ ] in at most one point .",
    "\\(iii ) for every @xmath2 , @xmath511 is countable .",
    "assume throughout that @xmath505 ; the case @xmath507 is entirely similar . define a function @xmath512 note that @xmath513 is well defined , because if @xmath5 is an endpoint of an interval @xmath107 , we have @xmath514 . for this reason the use of @xmath501 instead of @xmath151 as defined in is immaterial , and in particular , @xmath513 is a generalization of the function @xmath156 from .",
    "define piecewise linear approximants of @xmath513 by @xmath515 by the same argument as in the proof of lemma [ lem : t - star ] , each @xmath516 is continuous and nondecreasing on @xmath153 $ ] , and @xmath517 uniformly in @xmath78 $ ] .",
    "thus , @xmath513 is continuous and nondecreasing on @xmath153 $ ] as well .",
    "it is easy to see that @xmath518)$ ] . since @xmath519 and @xmath520 , the symmetry of the graph of @xmath288 gives @xmath521)=[0,\\frac12]$ ] .",
    "this proves ( i ) .",
    "the proof of ( ii ) is very similar to the second part of the proof of proposition [ lem : bijection ] .",
    "let @xmath522 $ ] with @xmath199 , and assume neither @xmath5 nor @xmath62 is an endpoint of an interval @xmath107 with @xmath182 .",
    "by analogy with , we have @xmath523 for a certain @xmath182 and @xmath51 sufficiently large .",
    "letting @xmath208 we obtain @xmath524 .",
    "thus , if @xmath525 , it must be the case that @xmath526 .",
    "this proves ( ii ) .    for ( iii )",
    ", we need only consider the case @xmath527 with @xmath182 .",
    "points @xmath528 with @xmath529 can be of two types : ( a ) endpoints of intervals @xmath107 with @xmath182 , or ( b ) proper limits of sequences of such endpoints . clearly , there are only countably many points of type ( a ) .",
    "we claim there are at most two points in @xmath153 $ ] of type ( b ) .",
    "to see this , let @xmath530 $ ] , and suppose there are @xmath531 with @xmath532 and @xmath533 .",
    "then for all large enough @xmath51 , @xmath534 everywhere on @xmath107 and @xmath133 , and since @xmath516 is nondecreasing on @xmath153 $ ] , it follows that @xmath516 is constant on @xmath535 , an interval containing @xmath5 . but",
    "this would mean @xmath536 for some @xmath537 , and being a member of @xmath501 , @xmath5 must be an endpoint of @xmath538 .",
    "thus , the only points of type ( b ) with @xmath529 lie either to the left of every interval @xmath107 with @xmath539 , or to the right of each such interval .",
    "hence there can be at most two such points .",
    "this establishes ( iii ) .",
    "we are now ready to restate some of the main results of this paper for the more general function @xmath288 .",
    "first , let @xmath540 $ ] denote the range of @xmath288 , and normalize lebesgue measure on @xmath540 $ ] to a probability measure @xmath135 by @xmath541 , @xmath542 $ ] .",
    "let @xmath139 denote the corresponding expectation operator .",
    "we define local level sets exactly as in section [ subsec : local ] , keeping in mind that the configuration of a local level set @xmath264 now depends on @xmath476 via the sequence @xmath48 .",
    "let @xmath263 denote the number of local level sets contained in @xmath12 .",
    "[ thm : main - general ] ( i ) for almost every @xmath543 $ ] , @xmath12 is finite .",
    "\\(ii ) the expected cardinality of @xmath12 with @xmath2 chosen at random from @xmath540 $ ] is infinite : @xmath544    \\(iii ) the average number of local level sets contained in a level set is at least @xmath25 , but at most @xmath21 : @xmath267=(d - c)^{-1}\\int_c^d n^{loc}(y)\\,dy \\in\\left[\\tfrac32,2\\right].\\ ] ]    \\(iv ) the set @xmath545 can be represented as @xmath546 and @xmath547 is residual in @xmath540 $ ] .",
    "the proofs are essentially the same as before , substituting lemma [ lem : key - lemma - general ] for proposition [ lem : bijection ] .",
    "other lemmas must be slightly modified as well : for instance , lemma [ lem : when - finite ] should be replaced by    [ lem : when - finite - general ] suppose @xmath548 .",
    "then @xmath232 if and only if @xmath230 intersects only finitely many leading humps",
    ".    the same condition on @xmath2 should be added to lemma [ lem : cardinality - of - l ] and to the claim in the proof of theorem [ thm : local - level - sets ] .",
    "since the set @xmath549 is countable it has measure zero , and therefore its exception has no effect on the probabilistic results ( i)-(iii ) in theorem [ thm : main - general ] . the bounds in ( iii )",
    "follow since for a hump @xmath142 of order @xmath26 , the height of @xmath235 is exactly @xmath550 by lemma [ lem : key - lemma - general](i ) , so by proposition [ prop : height ] , @xmath551 . statement ( iv ) follows since lemmas [ lem : dense - union ] and [ lem : uncountables ] continue to hold verbatim in the general case , and together they imply that @xmath547 contains a dense @xmath211 , so it is residual .",
    "( the proof of lemma [ lem : uncountables ] requires only a minor modification , namely that @xmath230 intersects each truncated hump in at most _ countably _ many points rather than at most two points .",
    "this explains the need for lemma [ lem : key - lemma - general](iii ) . )",
    "we should note that not all of the statements in sections [ sec : probability ] and [ sec : baire ] transfer to the general case .",
    "for instance , proposition [ prop : no - dyadics ] is not true in general : if @xmath288 is the alternating takagi function @xmath552 depicted at left in figure [ fig : general - examples ] , then it is not too hard to see that @xmath553 , and @xmath554 is the  middle half \" cantor set and is hence uncountable .",
    "likewise , @xmath555 is uncountable for each @xmath117 . on the other hand , @xmath556 , so here we have the opposite situation to the case of the takagi function : @xmath547 contains the minimum but not the maximum ordinate value of each hump .",
    "i wish to thank jeffrey lagarias and zachary maddock for sending preprints of their papers , which were the principal source of inspiration for this article ; and david simmons for pointing out a gap in the original proof of theorem [ thm : finite - ae ] .",
    "i am greatly indebted to the referee for his or her thorough reading of the paper and for the long list of valuable comments and corrections , especially concerning the proof of theorem [ thm : infinite - local - level - sets ] ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be takagi s continuous but nowhere - differentiable function . </S>",
    "<S> this paper considers the size of the level sets of @xmath0 both from a probabilistic point of view and from the perspective of baire category . </S>",
    "<S> we first give more elementary proofs of three recently published results . </S>",
    "<S> the first , due to z. buczolich , states that almost all level sets ( with respect to lebesgue measure on the range of @xmath0 ) are finite . </S>",
    "<S> the second , due to j. lagarias and z. maddock , states that the average number of points in a level set is infinite . </S>",
    "<S> the third result , also due to lagarias and maddock , states that the average number of local level sets contained in a level set is @xmath1 . in the second part of the paper it is shown that , in contrast to the above results , the set of ordinates @xmath2 with uncountably infinite level sets is residual , and a fairly explicit description of this set </S>",
    "<S> is given . </S>",
    "<S> in addition , it is shown that most level sets ( in the sense of baire category ) contain infinitely many local level sets , and that a continuum of level sets even contain uncountably many local level sets . finally , </S>",
    "<S> most of the main results are extended to a somewhat more general family of nowhere - differentiable functions .    </S>",
    "<S> : 26a27 ( primary ) ; 54e52 ( secondary )    : takagi s function , nowhere - differentiable function , level set , local level set , baire category , catalan number </S>"
  ]
}