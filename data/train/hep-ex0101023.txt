{
  "article_text": [
    "since approximately 15 years silicon vertex detectors are operated successfully in high energy particle physics experiments .",
    "the small pitch of silicon micro strip detectors implies a very high channel density for the readout electronics which is normally achieved with a dedicated cmos readout chip . the analog pipeline chip ( apc ) is a readout chip primarily designed for the central silicon detector ( cst ) @xcite of the h1 experiment @xcite but furthermore successfully used by other experiments @xcite .",
    "the basic functionality of the existing chip is described in section [ apcgeneral ] . as explained in section [ apcfailure ] radiation damage of the chip was observed in the h1 experiment motivating the design of a new radiation hard version of the apc .",
    "we report in section [ apcprototype ] on an 128 channel apc prototype designed and produced in the radiation hard dmill technology .",
    "five different amplifier configurations implemented on this prototype are explained .",
    "the measurements made with the different amplifiers are presented in section [ apcmeasure ] .",
    "the conclusions we drew led to the final design that is currently in production ( section [ dmilldesign ] ) .",
    "figure [ apcschematic ] shows schematically one of 128 channels of the analog pipeline chip .    each channel has a charge sensitive , low noise , low power preamplifier followed by a 32-cell storage pipeline .",
    "the storage pipeline consists of switched capacitors . when disconnecting the capacitors they store a charge proportional to the output voltage of the preamplifier .",
    "the storage capacitors of the pipeline are controlled by the pipeline shift register .",
    "this pipeline shift register can be operated with a frequency of 10.4 mhz corresponding to the hera bunch crossing rate .",
    "an analog voltage of @xmath1 is exclusively supplied to the preamplifier whereas all other building blocks are operated with @xmath2 supply voltage .    to read out the pipeline ( e.g. in case",
    "a trigger decision is made by another detector component ) the sampling is stopped and the input of the charge sensitive preamplifier is disconnected from the sensor by the @xmath3 signal ( see fig . [ apcschematic ] ) . by means of the @xmath4 signal the pipeline is connected to the input of the preamplifier .",
    "the bit in the pipeline shift register determines now , which storage cell is re - read by the amplifier .",
    "this so called re - read architecture , a peculiarity of the apc chip , offers various advantages : as the preamplifier re - reads its own signal a perfect matching of the operating point is automatically given .",
    "the ratio between the pipeline capacitor @xmath5 and the feedback capacitor @xmath6 or @xmath7 allows to define a signal gain while re - reading . reading the charge from two ( or more ) pipeline buffers in parallel or consecutively allows to sum up these pipeline buffers .",
    "the re - reading preamplifier writes the signal to the latch - capacitor @xmath8 where it is stored until readout .",
    "this latch - capacitor provides the possibility to subtract different buffer of the same pipeline the possibilities to do on chip analog signal processing have been studied in an early 12 channel prototype version @xcite",
    ". moreover the ratio between @xmath8 and the feedback capacitance of the charge sensitive readout amplifier ( @xmath9 in fig .",
    "[ apcschematic ] ) form another gain stage before the signal leaves the chip",
    ". finally the latch - capacitor @xmath8 decouples the ( very different ) working point of the readout amplifier and the preamplifier .",
    "the serial readout of the 128 latch - capacitors of the chip is controlled via the readout shift register that connects one channel at a time to a common two stage readout amplifier .",
    "both the re - reading architecture and the serial readout are area - efficient concepts implicating that most of the area on the apc chip is occupied by the bond pads and the pipeline capacitors .",
    "this leads to a total chip size of @xmath10 by @xmath11 .",
    "the preamplifier consists of a n - mos transistor and a p - mos transistor with a large w / l ratio forming a push - pull stage . in this inverter configuration the devices",
    "act as mutual loads to each other .",
    "this circuit offers maximum transconductance and therefore minimal white channel noise contribution at minimal power dissipation .",
    "figure [ apcschematic ] shows the use of the inverting amplifier in a charge sensitive configuration .",
    "the feedback capacitance @xmath6 is given by the parasitic gate - drain capacitances of the large input transistors .",
    "an additional feedback capacitor @xmath12 can be connected to enlarge the feedback capacitance .",
    "a reset switch allows a fast discharge of the amplifier .",
    "a constant and slow discharge of the charge sensitive amplifier is done by means of the feedback resistor @xmath13 .",
    "this resistor is realized as a n - mos transistor with a small w / l ratio .",
    "the value of the resistor and therewith the discharging time constant can be adjusted by the gate voltage of this n - mos transistor ( @xmath13 ) .",
    "the discharge resistor is disconnected during the re - read procedure by the @xmath14 switch . in this mode",
    "the preamplifier is fully integrating .",
    "moreover this resistor performs a second vital task . since in the cst",
    "the sensors are dc - coupled to the apc - chip the resistor must conduct the leakage currents of the silicon strips to the output of the preamplifier where the current is absorbed . due to the voltage drop across the feedback transistor this mechanism limits the maximum value of the resistance . the preamplifier can tolerate a voltage drop of several hundred mv between input and output .. ] expecting maximal leakage currents of @xmath15 per strip implies a feedback resistance of less than @xmath16 .",
    "for the readout of the cst vertex detector of the h1 experiment 640 chips , fabricated in the sacmos-1@xmath17 technology , have been used .",
    "after three years of successful operation of the cst detector observations of radiation damage to the apcs were made :    figure [ apcschaden ] shows the pedestals of a serial readout of 1280 channels ( 10 chips of 128 channels ) of the inner layer of the cst .",
    "the pedestals are the average channel voltage ( in arbitrary units ) with no signal present . as the sequential readout is done with a clocking frequency of 1.5 mhz the last channel ( rightmost in fig .",
    "[ apcschaden ] ) waits @xmath18 for its readout . for undamaged chips",
    "the pedestals have a level that is almost independent of the channel number respectively the waiting time .    as radiation damage proceeds",
    "it can be seen in figure [ apcschaden ] that high channel numbers show systematically lowered positions .",
    "this effect gets more and more pronounced as longer the chips are exposed to the radiation environment of the experiment . in the outer layer of the cst , where the radiation dose is considerably smaller , the change of the pedestals is therefore consistently smaller ( by a factor of @xmath19 ) .",
    "the change of the pedestals with ongoing time is explained by increased radiation damage ( until 5/1998 @xmath20 total dose , until 4/1999 @xmath21 total dose ) that accelerates the discharge of the signal storing capacitors @xmath22 and @xmath6 .",
    "the discharging currents on the chip are either a result of the sub threshold leakage currents of the n - mos transistors that are used as switches ( see figure [ apcschematic ] ) or due to a reduced device isolation .    in principle pedestal shifts do not disturb the functionality of the system as long as they stay within the dynamic range of the readout chain . however in future hera will run with higher beam currents and stronger focusing at the interaction point @xcite and a higher radiation exposure of the cst is anticipated and therefore it is not guaranteed that the present front end chips will stay functional .",
    "this reasoning led to the conclusion that radiation hard analog pipeline chips are vital for the future data taking of the h1 central silicon detector .",
    "the basic requirement of the new radiation hard apc is a strict compatibility with the existing readout and power supply system of the cst @xcite . furthermore this allows also other projects using the sacmos - apc a smooth change - over to the usage of the apc128-dmill .    as a prototype chip",
    "a complete 128 channel version with five different amplifier configurations has been designed in the @xmath23 dmill - bicmos - technology @xcite offered by temic / mhs @xcite .",
    "the various amplifiers were also realized as test structures to allow direct performance measurements without using the complete pipeline mechanism .",
    "since it is not self - evident that an analog circuit working properly in one technology can be transferred directly to other technologies , we realized different layouts for the preamplifier , in order to identify a design with optimized low noise performance at low power .",
    "this procedure proved to be very valuable as it turned out that a direct one - to - one translation of the sacmos apc preamplifier did not work satisfactory in the dmill version .",
    "the digital logic of the new dmill - chip was realized as similar to the sacmos - chip as possible .",
    "the readout shift register ( see section [ apcgeneral ] ) is a dynamic shift register whereas the pipeline shift register is a static cell based on cross - coupled inverters .",
    "the area requirements for the different functional blocks was only marginally larger in the dmill technology .",
    "the five different amplifier configurations contain three variations of the single stage amplifier as used in the sacmos version and a pair of two - stage amplifiers .",
    "the three versions of the single stage amplifier differ only by the channel length l. we chose l= @xmath24 , l= @xmath25 , l= @xmath26 .",
    "common to all designs was a channel width of @xmath27 for the p - fet and @xmath28 for the n - fet .",
    "these width parameters are roughly @xmath29 smaller than the original sacmos parameters .",
    "the translation of the long feedback transistor of the sacmos apc ( @xmath30 ) required a splitting into five n - mos transistor in series with a w / l ratio of @xmath31 each .",
    "the additional feedback capacitance ( @xmath12 in figure [ apcschematic ] ) was designed to be @xmath32 .",
    "channels with a two - stage amplifier scheme were designed in order to drive the capacitive load of the analog pipeline . moreover this pipeline buffer stage was designed to give a further amplification of a factor of two with the aim of reducing the noise contribution coming from the pipeline switching .    for the channels with two stage configuration the first stage was identical to the single stage preamplifier with a channel length of @xmath33 .",
    "the pipeline buffer stage consists of a simple differential transconductance amplifier .",
    "the differential pair is made of two p - mos transistors . a n - mos current mirror act as a load .    with a p - mos current source a typical operating current of @xmath34 per channel",
    "is defined .",
    "the feedback loop connects the output of the second stage with the negative input of the differential pair forming a mere follower for dc signals .",
    "ac - signals undergo an amplification defined by the capacitive divider in the feedback loop .",
    "both capacitors are chosen to be 1pf resulting in gain 2 .",
    "figure [ wilson1 ] shows the circuit .",
    "the positive input of the transconductance amplifier is directly connected to the output of the preamplifier .    in one variation",
    "the feedback resistor is a simple n - fet with small w / l - ratio .",
    "a second variation of this two - stage amplifier uses a somewhat more complicated version of the feedback transistor : instead of having a n - mos transistor with a fixed gate voltage as resistive element ( see figure [ wilson1 ] ) this n - mos transistor was implemented in such a way that the gate voltage follows the amplifier output swing , thus keeping the gate - source voltage fixed @xcite . as the gate voltage follows the amplifier output swing we refer to this circuit as a riding feedback configuration .",
    "it is shown schematically in figure [ wilson2 ] .",
    "this circuitry guarantees a signal independent feedback resistance .",
    "the feedback resistance can be adjusted by the current flowing into transistor n1 .",
    "this current is defined by a current mirror ( shown dashed in figure [ wilson2 ] ) .",
    "the measurements on the dmill version of the apc were always accompanied by the corresponding measurement with the original sacmos version of the chip on the same measuring setup .",
    "all digital parts of the new radiation hard apc128-dmill worked correctly .",
    "the readout shift register and the pipeline shift register have been tested with clock frequencies from @xmath35 to @xmath36 .",
    "all the preamplifier variations work over a wide range of power consumption that spans from @xmath37 . unless differently specified our measurements are made with a power consumption of typically @xmath38 per channel which corresponds to @xmath39 of supply current .",
    "the measurement of the transconductance and the open loop gain as a function of the amplifier current is shown in figure [ gmplot ] and [ olgplot ] respectively .",
    "the transconductance @xmath40 shows the expected rise with increasing current .",
    "in addition one observes an inverse dependence with the channel lengths of the three different amplifier variations . for our typical operating current of @xmath41",
    "this gives a transconductance of 2.5 to @xmath42 .",
    "the rather large value of the transconductance of the input transistors is due to the fact that in this push - pull configuration the @xmath40-values of the p - fet and the n - fet are added .",
    "the open loop gain in figure [ olgplot ] shows in general a decreasing behavior as a function of the current .",
    "however , for a channel length l=@xmath43 it appears to be almost flat .",
    "with increasing channel length we observe a larger open loop gain .",
    "as the power density of the white noise is inversely proportional to the transconductance ( @xmath40 ) of the input device , transconductance preamplifier designs in general tend to prefer shorter channel length to obtain a large value of @xmath40 .",
    "however , at the same time smaller channel lengths imply decreasing open loop gains which limit the obtained miller capacitance of the charge sensitive configuration .",
    "based on this measurements a compromise channel length of @xmath44 appears to be quite reasonable .",
    "the switch @xmath14 ( see figure [ apcschematic ] ) allows to use the preamplifier in the data taking mode with the feedback transistor connected ( @xmath14=on ) , whereas in the pipeline re - read phase the preamplifier is in integrating mode ( @xmath14=off ) . in the integrating mode we have observed the circuit to work correctly . however during data taking mode with the feedback transistor switched on ,",
    "we observe a strong tendency for the amplifier to oscillate .",
    "this was rather surprising since the sacmos version of the chip has proven to be robust against oscillation .",
    "a detailed analysis of the problem indicates that it is primarily a result of the large gate area of the n - fet feedback transistor . for this feedback transistor a small w / l - ratio ( @xmath45 ) is desirable since it gives a tolerant adjustment of the feedback resistance via @xmath13 .",
    "the minimal design rules of the dmill technology require a larger channel width compared to the sacmos technology which implies a factor 2.5 in the overall gate area for a identical w / l - ratio .",
    "this results in an increased capacitive load for the conducting channel in the feedback transistor .",
    "the distributed capacitance to gate and substrate and the high ohmic resistance ( few @xmath46 ) of the conducting channel form a continuous rc - system .",
    "this has been identified to be the main source of phase shift that allows oscillations to occur .",
    "the feedback path provided by the charge integrating capacitor @xmath6 stabilizes the circuit with increasing value of @xmath6 . for the dmill design we measured the parasitic feedback capacitance @xmath6 of the preamplifier to be @xmath47 .",
    "the corresponding measured value of the sacmos design is @xmath48 .",
    "as expected the dmill circuit does not oscillate with the additional feedback capacitor @xmath49 switched on ( @xmath50=on ) .",
    "this allows to operate the prototype chip with the total feedback capacitor @xmath51 during pipeline write mode and only @xmath6 during the integrating re - read mode .",
    "this is technically achieved by applying the @xmath52 control signal to @xmath50 as well ( @xmath53 , see figure [ apcschematic ] ) .      for the detailed understanding of the two stage amplifier chain a separate test - structure containing only the second amplification stage was fed with a @xmath54 step function .",
    "figure [ secondstage ] shows the output response of this test structure for a conventional feedback resistor and the riding feedback configuration as described in section [ twostagedesign ] . for short pulses",
    "the second stage provides an additional gain , whereas for dc signals the second stage acts as mere gain 1 follower .",
    "the amplifier response with the conventional feedback shows a tendency to ring which results in a overshooting gain of 3.7 at its peak position . in the riding feedback configuration",
    "however this overshoot behavior is completely absent .",
    "the maximal gain agrees quite well with the designed capacitive voltage divider that defines the circuit response for fast pulses .",
    "the difference between the observed gain of 2.35 and the originally design value of 2 can be understood due to additional parasitic capacitances that modify the voltage divider . for longer time periods",
    "both circuits show the expected voltage gain of 1 .      for the cst at h1",
    "the most crucial feature of the apc chip is its noise performance with a relatively large capacitive load at the input of the chip .",
    "a half - ladder consisting of 3 double - sided sensors of the cst represent a capacitive load of @xmath55 on the p - side and approximately @xmath56 on the n - side @xcite .",
    "this capacitance degrades the quality of the signal .",
    "the charge deposited in the sensor is divided between the sensor capacitance and the miller capacitance of the preamplifier .",
    "therefore the bigger the sensor capacitance the smaller is the fraction of the charge effectively collected on the preamplifier .",
    "therefore we compared the noise performance of different amplifier configurations with and without capacitive load at the input .",
    "we measured the variance of the pulse height at the chip output with no signal present at the input .",
    "this pulse height was converted into an equivalent noise charge at the input ( enc ) .    to calibrate our noise measurements we integrated a small current for @xmath57 on the preamplifier and recorded the corresponding pulse height at the output of the chip .",
    "the small current was provided by a voltage source @xmath58 connected via a @xmath59 resistor to the input of the chip . hence the calibration constant relating a voltage pulse height at the chip output @xmath60 to an equivalent noise charge at the input is @xmath61 , with enc = @xmath62 .",
    "a measurement of @xmath60 versus @xmath58 is shown in figure [ calibration ] , the shown measurement leads to @xmath63 . from this plot",
    "the working point of the amplifier can be derived by requiring a zero signal height at the chip output . for a analog supply voltage of @xmath64 an amplifier working point of @xmath65",
    "is obtained .    comparing this method with the charge signal generated by the on chip calibration capacitor a value of @xmath66 for the calibration capacitor",
    "is found showing good agreement with the design value .",
    "several precautions were taken to ensure that the measured noise represents the fundamental noise property of the readout chip .",
    "one of them was to operate the measuring setup with a complete electric isolation by opto - couplers powered by a regulated battery supplies in a faraday cage .",
    "in addition a differential measurement of two adjacent channels was performed thus eliminating contributions from pickup that is common to all channels .",
    "the various noise measurements had been performed under conditions as similarly as possible to the operating conditions of the cst at h1 : the pipeline is running at 10 mhz .",
    "the noise measurements in figure [ noisestufig ] and figure [ channellength ] are based on the subtraction of the sum of three pipeline buffers before and three buffers after the signal charge is given .",
    "figure [ noisestufig ] shows the measured equivalent noise charge ( enc ) of the sacmos apc and the new dmill prototype . the sacmos chip used in standard h1 operation mode ( @xmath50=off ) shows a noise performance of @xmath67",
    "which is consistent with previous measurements @xcite .",
    "a direct comparison between the sacmos and the dmill chip in this operation mode was not possible due to the earlier mentioned instability of the dmill preamplifier with low feedback capacitance .",
    "therefore we have used an operation mode with @xmath50=on in the sampling phase and @xmath50=off in the re - reading phase ( i.e. @xmath53 ) .",
    "the most remarkable difference between the two chips in the observed noise performance is in the offset noise value at zero input capacitance .",
    "the slope however shows a better value in the dmill realization compared to the sacmos such that at large capacitances ( @xmath68 ) the noise performances are almost equal .",
    "a more detailed study of the zero input capacitance noise shows that the contribution from the switched on feedback resistance ( @xmath14=on ) appears to be much more pronounced in the dmill chip compared to the sacmos version .",
    "the source of this phenomenon is not fully understood and is subject to further study .",
    "the noise performance of a two stage amplifier version can also be seen in figure [ noisestufig ] . since the two stage configuration writes a larger signal to the pipeline buffers noise contribution from the pipeline and the readout system are reduced .",
    "however the measurements show no significant improvement compared to the single stage dmill version which supports our understanding of the extra noise source for zero input capacitances being located in the early part of the signal amplification stage .",
    "the noise and speed performance depends on the channel length ( l ) and width ( w ) of the input transistors .",
    "therefore an optimization of this parameters have been done by varying these parameters .",
    "the total channel width of the push pull stage has been kept fixed at @xmath69 , which implies a fixed parasitic feedback capacitances of the amplifier variations .",
    "the channel length has been varied a described in section [ singlestage ] . with a shorter channel length one obtains a higher transconductance ( see figure [ gmplot ] ) which implies a smaller white noise contribution .",
    "the area dependent @xmath70-noise , however , is expected to increase .",
    "the optimal length depend on the optimal ratio of the two noise sources and has been determined by measuring the noise performance of the amplifiers with channel length @xmath71 .    to solely compare the noise directly produced by the input transistors we measured the noise behavior of different channel length without contribution from the feedback transistor ( @xmath14=off ) i.e. in integrating mode . in order to be sensitive to the noise slope we measured with an capacitor of @xmath68 wire bonded to the amplifier input .",
    "the results are shown in figure [ channellength ] .",
    "the measurement clearly shows that the amplifier l=@xmath24 is inferior to the l=@xmath72 and l=@xmath26 configurations . whereas the l=@xmath73 amplifier is slightly favored compared to the l=@xmath74 amplifier .",
    "we varied the amplifier current and found that the noise dependence on the amplifier current is weak .",
    "from the measurements presented in section [ channell ] we conclude that the best choice is a channel length of l=@xmath72 .    as an increase in channel width",
    "is expected to improve the noise behavior and to increase the basic feedback capacitance we increased the channel length compared to the prototype by approximately 20 per cent .    apart from the feedback @xmath12 with a value of @xmath75 that can be activated by the switch @xmath50=on a new additional feedback capacitor @xmath76 with a value of @xmath77 was added .",
    "this allows the user to choose between four different feedback capacitance values .    for the feedback resistance we replaced the long n - mos - feedback - transistor by a riding feedback circuit as described in section [ twostagedesign ] .",
    "our measurements of the two stage amplifier ( see section [ twostage ] ) with the riding feedback circuit shows strong evidence for an improved robustness against oscillation which is also supported by simulations @xcite .    since the two stage amplifier configuration did not show any convincing improvement in noise performance we realized the single stage architecture , as used in the old sacmos chip the single stage solution gives maximum compatibility to the sacmos apc and smallest power dissipation .",
    "all other building blocks of the prototype were found to work well and were therefore used unaltered in the final design .",
    "we wish to thank silvan streuli for his substantial help . for encouraging discussion",
    "we are very grateful to ralph eichler and daniel pitzl .",
    "99 d. pitzl et al .",
    ", the h1 vertex detector , nucl . instr . and meth .",
    "a. 454 ( 2000 ) 334 - 349 .",
    "h1-collaboration , nucl .",
    "instr . and meth .",
    "386 ( 1997 ) 310 - 347 .",
    "h1-collaboration , nucl .",
    "386 ( 1997 ) 348 - 396 .",
    "w. eick et al .",
    "instr . and meth .",
    "386 ( 1997 ) 81 - 86 .",
    "van hunen , nucl . instr . and meth . 409 ( 1998 ) 95 - 99 .",
    "o. bouhali , nucl .",
    "instr . and",
    "meth . 378 ( 1996 ) 423 - 438 .",
    "ballintijn , nucl.phys.proc.suppl .",
    "44 ( 1995 ) 268 - 273 .",
    "r. horisberger and d. pitzl , nucl . instr . and meth . a326 ( 1993 ) 92 - 99 .",
    "m. dentan et al . , ieee transaction on nucl .",
    "science , vol43 , no3 ( 1996 ) 1763 - 1767 rd 29 final status report , cern - lhcc-98 - 37 ( 05.nov .",
    "1998 ) temic semiconductors , la chantrerie , bp 70602 , 44306 nantes cedex 3 , france .",
    "m. dentan et al . ,",
    "final acceptance of the dmill technology stabilized at temic / mhs , talk given at 4th workshop on electronics for lhc experiments ( leb 98 ) , rome , italy , 21 - 25 sep 1998 .",
    "w. erdmann et al . , nucl .",
    "instr . and meth . 372 ( 1996 ) 188 - 194 .",
    "u. schneekloth ( editor ) , the hera luminosity upgrade , desy - hera-98 - 05 , july1998 l. blanquart et al .",
    "instr . and meth . 395 ( 1997 ) 313 - 317 . cadence software , version 4.4.2 : spectres simulator with dmill design kit v5.0"
  ],
  "abstract_text": [
    "<S> the analog pipeline chip ( apc ) is a low noise , low power readout chip for silicon micro strip detectors with 128 channels containing an analog pipeline of 32 buffers depth . </S>",
    "<S> the chip has been designed for operation at hera with a power dissipation of @xmath0 per channel and has been used also in several other particle physics experiments . in this paper </S>",
    "<S> we describe the development of a radiation hard version of this chip that will be used in the h1 vertex detector for operation at the luminosity upgraded hera machine . </S>",
    "<S> a 128 channel prototyping chip with several amplifier variations has been designed in the radiation hard dmill technology and measured . </S>",
    "<S> the results of various parameter variations are presented in this paper . </S>",
    "<S> based on this , the design choice for the final production version of the apc128-dmill has been made . </S>",
    "<S> + pacs : 29.40 gx ; 85.50-e + keywords : asic chip , silicon vertex detector , analog pipeline chip </S>"
  ]
}