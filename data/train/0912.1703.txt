{
  "article_text": [
    "@xcite is an object oriented toolkit for the simulation of particle interactions with matter .",
    "it provides advanced functionality for all the domains typical of detector simulation : geometry and material modelling , description of particle properties , physics processes , tracking , event and run management , user interface and visualisation .",
    "geant4 is nowadays a mature monte carlo system and is used in many , multi - disciplinary experimental applications ; its rich collection of physics processes and models , extending over a wide energy range , has played a key role in satisfying the needs of a large variety of experimental developments .",
    "nevertheless , new experimental requirements have emerged in the recent years , which challenge the conventional scope of major monte carlo transport codes like geant4 .",
    "research in nanodosimetry , nanotechnology - based detectors , radiation effects on components in space and at high luminosity colliders , nuclear power , plasma physics etc . have shown the need of new methodological approaches to radiation transport simulation along with new physics functionality in geant4 .",
    "a common requirement in all such research domains is the ability to change the scale at which the problem is treated in a complex simulation environment .",
    "significant technological developments both in software and computing hardware have also occurred since the rd44 @xcite phase , which defined geant4 design .",
    "new software techniques are available nowadays , that were not yet established at the time when geant4 was designed .    a r&d project , named nano5 , has been recently launched @xcite to address fundamental methods in radiation transport simulation ; it explores possible solutions to cope with the new experimental requirements and evaluates whether and how they can be supported by geant4 kernel design .",
    "the main focus of the project lies in the simulation at different scales in the same experimental environment : this objective is associated with the research of transport methods across the current boundaries of condensed - random - walk and discrete transport schemes .",
    "this study requires electromagnetic physics processes , and related physics objects , to be lightweight and easily configurable : one of the main issues to be addressed in the project is indeed the capability of objects to adapt dynamically to the environment . for this purpose",
    "a pilot project has been set up to evaluate the current design of geant4 electromagnetic package in view of the foreseen extension of capabilities : it investigates design techniques suitable to better support fine - grained physics customization and mutability in response to the environment .",
    "the project adopts a software process model based on the unified process @xcite framework .",
    "the software developments are motivated by concrete experimental applications , and significant effort is invested in the software design : these features of the project are well served by the unified process , which is use case driven and architecture - centric .",
    "the adopted software process framework involves an iterative and incremental life - cycle .",
    "metaprogramming has emerged in the last few years as a powerful design technique . in c++",
    "the template mechanism provides naturally a rich facility for metaprogramming ; boost libraries @xcite are nowadays easily available to support generic programming development .",
    "metaprogramming presents several interesting advantages , which propose it as a worthy candidate for physics simulation design .",
    "this technique has not been exploited in geant4 core yet , the partial support of templates available in c++ compilers at the time of the rd44 phase was a limiting factor in the exploitation of templates in geant4 architectural design at that stage",
    ". a preliminary investigation of generic programming techniques in a multi - platform simulation context has been carried out through the application of a policy - based class design @xcite ; this prototype was limited to a small physics sub - domain .",
    "an advantage of generic programming techniques over conventional object oriented programming is the potential for performance improvement .",
    "physics modelling specialization would profit of the shift from dynamic to static polymorphism , which binds it at compile time rather than runtime , thus resulting in intrinsically faster programs .",
    "design techniques intrinsically capable of performance gains are relevant to computationally intensive simulation domains , like calorimetry and microdosimetry ; in general , the large scale simulation productions required by hep experiments would profit of opportunities for improved physics performance .",
    "a side product of the use of generic programming techniques in geant4 design is the improved transparency of physics models : the technology intrinsically achieves their exposure at a fine - grained level .",
    "this feature greatly facilitates the validation of the code at microscopic level and the flexible configuration of physics processes in multiple combinations .",
    "customization and extensibility through the provision of user - specific ( or experiment - specific ) functionality in the simulation are also facilitated by this technique : in fact , metaprogramming allows the user to write more expressive code , that more closely corresponds to the mental model of the problem domain , like the configuration of physics modeling options in experimental applications .    as a side benefit ,",
    "a design based on this technique would naturally overcome all the current issues about duplicated or competing functionality in different geant4 physics packages .",
    "it is worth reminding the reader that , since dynamic and static polymorphism coexist in c++ , the adoption of generic programming techniques would not force geant4 developers and users to replace object oriented methods entirely : a clever design can exploit generic and object oriented programming techniques in the same software environment according to the characteristics of the problem domain .",
    "generic programming appears a promising candidate technique to support the design of the discrete simulation sector in an efficient , transparent and easily customizable way ; the agile design achievable with such techniques would greatly facilitate the kernel evolution to accommodate both condensed - random - walk and discrete schemes .",
    "the r&d project currently elaborates a conceptual scheme for condensed and discrete simulation approaches to co - work in the same environment , and a software design capable of supporting it .",
    "this requirement implies the introduction of a new concept in the simulation : mutable physics entities ( process , model or other physics - aware object ) , whose state and behavior depend on the environment and may evolve as an effect of it .",
    "such a new concept requires rethinking how the geant4 kernel handles the interaction between tracking and processes , and represents a design challenge in a monte carlo software system .    the introduction of the concept of mutability in physics - related objects requires the identification of their stable and mutable states and behaviour , and their fine - grained decomposition into parts capable of evolving , or remaining unchanged .",
    "the first step along this path involves the re - design of the current geant4 electromagnetic processes @xcite , @xcite .. processes are decomposed down to fine granularity , and objects responsible of well - identified functionality are created .",
    "the fine - grained decomposition of processes is propaedeutic to handling their stable and mutable components independently .",
    "the application of a policy - based class design @xcite is currently investigated as a means to achieve the objective of granular decomposition of processes .",
    "this design technique offers various advantages in terms of flexibility of configuration and computational performance ; however , its suitability to large scale physics simulation and its capability to model the evolution associated with mutable physics entities have not been fully demonstrated yet .    for this purpose ,",
    "a pilot project is currently in progress in the domain of photon interactions ( compton and rayleigh scattering , photoelectric effect and photon conversion ) : the current geant4 physics models are re - implemented in terms of the new design , thus allowing performance measurements as well as first - hand evaluations of the capabilities and drawbacks of the policy - based design .    the design prototype has adopted a minimalist approach .",
    "a generic process acts as a host class , which is deprived of intrinsic physics functionality .",
    "physics behavior is acquired through policy classes , respectively responsible for cross section and final state generation .",
    "a uml ( unified modelling language ) @xcite class diagram illustrates the main features of the design in figure 1 .",
    "[ fig_em_typedef ]    the design of the policy classes reimplementing the existing physics functionality is currently focused on the adoption of well - established object oriented programming practices .",
    "basic software requirements , like encapsulation and sharply identified object responsibilities , are enforced throughout the design .",
    "the exploration of more sophisticated software solutions , as well as possible improvements or extensions to the current physics functionality , are not a priority in the first development cycle now in progress , but greater attention could be devoted to these aspects in future development cycles , once the basic design issues have been addressed in a working prototype .",
    "fully functional processes for photon interactions can be configured at the present stage in the new design by assembling fine - grained policy classes into a generic host class . a few metrics have been collected to evaluate quantitatively the possible benefits or drawbacks of the candidate software technology .",
    "preliminary performance measurements in a few simple physics test cases concerning photon interactions indicate a gain on the order of 30% with respect to equivalent physics implementations in the current geant4 design scheme ; however , it should be stressed that no effort has been invested yet into optimizing the new design prototype , nor the code implementation .",
    "the testing of basic physics components of the simulation is also greatly facilitated with respect to the current geant4 version : since in the new design scheme they are associated with low level objects like policy classes , they can be verified and validated independently .",
    "this agility represents an improvement over the current design scheme , where a full - scale geant4-based application is necessary to study even low - level physics entities of the simulation , like atomic cross sections or features of the final state models .",
    "a quantitative appraisal of this improvement was performed by comparing the effort needed to compare geant4 cross sections of photon interactions against nist reference data : this comparison , together with similar tests concerning electron stopping powers and ranges , documented in @xcite , requires a geant4-based application consisting of approximately 4000 lines of code in a conventional scheme of geant4 electromagnetic physics design , whereas the test code required for the comparison of photon cross sections in the proposed policy - based class design amounts to less than 100 lines .",
    "similarly , the simulation production associated with the results described in @xcite required a significant investment of resources ( a dedicated test application developer , a simulation production responsible and the computing resources of a pc farm ) , whereas the tests associated with the policy - based design can be executed in terms of minutes of human time on a laptop computer .",
    "the inter - comparisons of geant4 physics models is also greatly facilitated ; an example is shown in figures 2 to 4 , concerning compton scattering .",
    "a r&d project is in progress to address the capability of handling multi - scale use cases in the same simulation environment associated with geant4 : this requirement involves the capability of handling physics processes according to different transport schemes .",
    "a propaedeutic investigation is in progress to evaluate design techniques , like generic programming , capable of supporting the main design goals of the project .",
    "a pilot project concerns the re - design of geant4 photon interactions , to evaluate conceptual methods and design techniques suitable to larger scale application .",
    "preliminary results on the application of policy - based design techniques indicate that significant improvement in the flexibility of the physics design is achieved along with a non - negligible improvement in execution time and facilitated verification and validation testing . at the present time",
    "no adverse effect memory consumption has been observed yet in association with the prototype design .",
    "the authors thank sergio bertolucci , thomas evans , elisabetta gargioni , simone giani , vladimir grichine , bernd grosswendt , andreas pfeiffer , reinhard schulte , manju sudhakar and andrew wroe for helpful discussions .",
    "m. kuster and s. hauf acknowledege support by the bundesministerium fr wirtschaft und technologie and the deutsches zentrum fr luft- und raumfahrt - dlr under the grant number 50qr0902 .",
    "m. g. pia et al . , `` r&d for co - working condensed and discrete transport methods in geant4 kernel '' , in _ proc .",
    "int . conf . on mathematics , computational methods and reactor physics ( m&c 2009 ) _ ,",
    "on cd - rom , am .",
    ", la grange park , il , 2009 .",
    "s. chauvie , g. depaola , v. ivanchenko , f. longo , p. nieminen and m. g. pia , `` geant4 low energy electromagnetic physics '' , in _ proc .",
    "computing in high energy and nuclear physics _ ,",
    "beijing , china , pp .",
    "337 - 340 , 2001 .",
    "h. burkhardt et al . , `` geant4 standard electromagnetic package '' , in _ proc .",
    "2005 conf . on monte carlo method : versatility unbounded in a dynamic computing world _ , american nuclear society , illinois , usa , 2005 .",
    "j.  baro , j.  sempau , j. m.  fernandez - varea , and f.  salvat , `` penelope , an algorithm for monte carlo simulation of the penetration and energy loss of electrons and positrons in matter '' , _ nucl .",
    "b _ , vol . 100 , no .",
    "31 - 46 , 1995 ."
  ],
  "abstract_text": [
    "<S> the geant4 toolkit offers a rich variety of electromagnetic physics models ; so far the evaluation of this geant4 domain has been mostly focused on its physics functionality , while the features of its design and their impact on simulation accuracy , computational performance and facilities for verification and validation have not been the object of comparable attention yet , despite the critical role they play in many experimental applications . </S>",
    "<S> a new project is in progress to study the application of new design concepts and software techniques in geant4 electromagnetic physics , and to evaluate how they can improve on the current simulation capabilities . </S>",
    "<S> the application of a policy - based class design is investigated as a means to achieve the objective of granular decomposition of processes ; this design technique offers various advantages in terms of flexibility of configuration and computational performance . </S>",
    "<S> the current geant4 physics models have been re - implemented according to the new design as a pilot project . </S>",
    "<S> the main features of the new design and first results of performance improvement and testing simplification are presented ; they are relevant to many geant4 applications , where computational speed and the containment of resources invested in simulation production and quality assurance play a critical role . </S>"
  ]
}