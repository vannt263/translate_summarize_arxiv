{
  "article_text": [
    "mathematical information retrieval ( mir ) is an important emerging area of information retrieval research  @xcite .",
    "technical documents often include a substantial amount of mathematics , but math is difficult to use directly in queries . for the most part , large - scale search engines do not support formula search other than indirectly , e.g. , through matching latex  strings .",
    "formula queries allow documents with similar expressions or mathematical models to be discovered automatically , providing a new way to search and browse technical literature  @xcite . for mathematical non - experts",
    ", querying based on the appearance of expressions may also be useful , for example when students try to interpret unfamiliar notation  @xcite .",
    "many have had the experience of wishing they could search through technical documents for similar formulae rather than find words to describe them .",
    "figure  [ fig : q14 ] shows the top of a results page from the new _ tangent _ @xcite formula retrieval engine .",
    "the 17 hits shown are grouped by their structure ( exact match , variable substitution , operator substitution ) , and groups are ordered by the similarity of the contained formulae to the query .",
    "efficient and effective retrieval becomes more difficult when the best matches are even less similar to the query formula ( e.g. , the repository includes larger expressions that include pieces similar to one or more parts of the query formula ) or when wildcards that can match arbitrary symbols or subexpressions are included in the query  @xcite .    for scalability , tangent now employs a two - level cascading search system  @xcite that provides both query runtime efficiency and ranking effectiveness for formula search .",
    "the first level is the _ core engine _ , which uses an uncompressed inverted index over tuples representing pairs of symbols in an expression .",
    "this level provides limited support for wildcard symbols and can quickly produce an ordered list of candidate results using a simple ranking algorithm .",
    "the second level re - ranks the top candidate results using _ maximum subtree similarity _ ( mss ) , a new metric for computing the similarity of mathematical formulae based on their appearance .",
    "the system architecture is summarized in figure  [ fig : arch ] .",
    "* contributions .",
    "* this paper includes three primary contributions .",
    "our first is the incorporation of substantially smaller indices than those used previously@xcite ( section  [ sec : coreengine ] ) , which can obtain strong retrieval results in a scalable system .",
    "the second contribution is the mss metric ( section  [ sec : similarity ] ) , which produces an intuitive ordering for retrieved formula based on the visual structure of expressions , taking unifiable symbol types into account .",
    "the third is a new symbol pair retrieval model ( section [ sec : structure ] ) that incorporates the first two contributions in an efficient and effective two - stage cascaded implementation , as demonstrated experimentally ( section  [ sec : experiments ] ) .",
    "in addition , we believe that the form of output adopted , namely grouping results by similarity and match structure , is an improvement over existing mir interfaces .",
    "interest in mathematical information retrieval ( mir ) has been increasing in recent years , as witnessed by the ntcir-10  @xcite and ntcir-11  @xcite math retrieval tasks held in 2013 and 2014 , respectively .",
    "math representations are naturally hierarchical , and often represented by trees that may be encoded as text strings . as a result ,",
    "approaches to query - by - expression may be categorized as _ tree - based _ or _ text - based _ , as determined by the structures used to represent formulae .",
    "the encoded hierarchies commonly represent either the arrangement of symbols on writing lines ( as in latex  or presentation mathml ) or the underlying mathematical semantics as nested applications of operations to arguments ( as in openmath or content mathml ) .",
    "both appearance and semantic representations have been used for retrieval .    * text - based approaches . * in text - based approaches ,",
    "math expression trees are linearized , and often normalized , before indexing and retrieval .",
    "common normalizations include defining synonyms for symbols ( e.g. , function names ) , using canonical orderings for commutative operators and spatial relationships ( e.g. , to group ` + b } with { \\verb b+ ` and ` _ i^2 } with { \\verb ` ^2_i ) , enumerating variables , and replacing symbols by their mathematical type ( e.g. , numbers , variables , and classes of operators )  @xcite .",
    "although linearization masks significant amounts of structural information , it allows text and math retrieval to be carried out efficiently by a single search engine ( commonly lucene ) . as a result , most text - based formula retrieval methods use tf - idf ( term frequency - inverse document frequency ) retrieval after linearizing expressions  @xcite . in an alternative approach ,",
    "the largest common substring between the query formula and each indexed expression is used to retrieve latex  strings @xcite .",
    "this captures more structural information , but also requires evaluating all expressions in the index using a quadratic algorithm",
    ".    * tree - based approaches .",
    "* tree - based formula retrieval approaches use explicit trees to represent expression appearance or semantics directly .",
    "these approaches index complete formula trees , often along with their subexpressions to support partial matching .",
    "methods have been developed to compress tree indices by storing identical subtrees uniquely  @xcite and to match expressions using tree - edit distances with early stopping for fast retrieval  @xcite .",
    "the _ substitution tree _ data structure , first designed for unification of predicates  @xcite , has been used to create tree - structured indices for formulae  @xcite .",
    "descendants of an index tree node contain expressions that unify with the parameterized expression stored at that node .",
    "a recent tree - based technique adapts tf - idf retrieval for vectors of subexpressions and generalized subexpressions in which arguments are represented by untyped placeholders  @xcite . in this method",
    "a symbol layout tree is modified to capture some semantic properties , normalizing the order of arguments for commutative operators and representing operator precedences explicitly .",
    "* ` spectral ' tree - based approaches . *",
    "an emerging sub - class of the tree - based approach uses paths or small subtrees rather than complete subtrees for retrieval .",
    "one system converts sub - expressions in operator trees to words representing individual arguments and operator - argument triples  @xcite .",
    "a lattice over the sets of generated words is used to define similarity , and a breadth - first search constructs a neighbor graph traversed during retrieval .",
    "another system employs an inverted index over paths in operator trees from the root to each operator and operand , using exact matching of paths for retrieval  @xcite .",
    "the large number of possible unique paths combined with exact matching make this technique brittle .    rather than indexing paths from the root of the tree , the tangent math retrieval system stores _ relative _ positions of symbol pairs in symbol layout trees to create a `` bag of symbol pairs '' representation  @xcite .",
    "this symbol pair representation supports partial matches in a flexible way , while preserving enough structural information to return exact matches for queries .",
    "set agreement metrics are applied to the bags of symbol pairs to compute formula similarities . for example , the harmonic mean for the percentage of matched pairs in the query and a candidate ( i.e. , _ dice s coefficient _ for set similarity and a candidate tree @xmath1 , let @xmath2 and @xmath3 , respectively , denote a set of their features ( such as a set of node and edge labels ) and let @xmath4 denote the set of features they have in common .",
    "dice s coefficient of similarity ( @xmath5 ) can then serve as the _ score _ for @xmath1 . ] ) prefers large matches of the query with few additional symbols in the candidate .",
    "tangent ( starting with version 2 ) also accommodates matrices , isolated symbols , and wildcard symbols and augments formula search with text search .",
    "formula retrieval based on bags of symbol pairs combined with keyword retrieval using lucene allowed tangent to produce the highest precision@5 result for the ntcir-11 math-2 main retrieval task with combined text and formula queries ( 92% )  @xcite .    in this paper",
    ", we address needed improvements for tangent , described in the next section .",
    "the math retrieval task we address is to search a corpus to produce a ranked list of formulae ( and the pages on which those formulae are located ) that match a query formula expressed in latex  or presentation mathml , with or without the inclusion of wildcard symbols .",
    "formulae ranked highly should match the query formula exactly or , failing that , closely resemble it . the system should be scalable in terms of index size , indexing speed , and querying speed .    * scalability and retrieval effectiveness .",
    "* as originally implemented , tangent is not scalable : indexing time is less than 200 formulae per second , producing indices of over 1 gb for the ntcir-11 wikipedia corpus and 30 gb for the ntcir-11 arxiv corpus . retrieval time is also slow , averaging 5 seconds per query for the wikipedia task ( under 400 thousand distinct formulae ) and averaging 3 _ minutes _ per query for the ntcir main task ( 3 million distinct formulae ) .",
    "furthermore , while retrieval effectiveness is very good , there is substantial room for improvement .",
    "* symbols and containers .",
    "* tangent uses a symbol layout tree ( slt ) to represent the appearance of a mathematical formula .",
    "tree nodes represent individual symbols and visually explicit aggregates , such as fractions , matrices , function arguments , and parenthesized expressions . in tangent version 3 ,",
    "all symbols except those representing operators or separators ( e.g. , commas ) are prefixed with their type , represented by a single character followed by an exclamation point .",
    "more specifically , slt nodes represent :    typed mathematical symbols : numbers ( n!@xmath6 ) ; variable names ( v!@xmath7 ) ; text fragments , such as _ lim _ , _ otherwise _ , and _ such that _ ( t!@xmath8 )    fractions ( f ! )    container objects : radicals ( r ! ) ; matrices , tabular structures , and parenthesized expressions ( m!@xmath9@xmath10x@xmath11 )    explicitly specified whitespace ( w ! )    wildcard symbols ( ?",
    "@xmath12 )    mathematical operators    because of their visual similarity , all tabular structures , including matrices , binomial coefficients , and piecewise defined functions are encoded using the matrix indicator m!. if a matrix - like structure is surrounded by fence characters , then those symbols are indicated after the exclamation mark .",
    "finally , the indicator includes a pair of numbers separated by an @xmath13 , indicating the number of rows and the number of columns in the structure .",
    "for example , m!2x3 represents a 2x3 table with no surrounding delimiters and m!()1x5 represents a 1x5 table surrounded by parentheses . importantly , _ all _ parenthesized subexpressions are treated as if they were 1x1 matrices surrounded by parentheses , and , in particular , the arguments for any @xmath6-ary function are represented as if they were a 1x@xmath6 matrix surrounded by parentheses .    as well as associating a label ( e.g. , v!x ) with every slt node , every node has an associated type ( _ number _ , _ variable _ , _ operator _ , etc . ) .",
    "a node s type is reflected in its label , usually represented by the part of the label up to an exclamation point ( e.g. , v ! ) , but node labels preceded by a question mark ( ? ) have type _ wildcard _ ; a matrix node s type includes the matrix dimensions , but not its fence characters ( e.g. , m!2x3 ) ; and other node labels without exclamation marks have type _",
    "operator_.    * spatial relationships .",
    "* labeled edges in the slt capture the spatial relationships between objects represented by the nodes :    * next * ( @xmath14 ) references the adjacent object that appears to the right on the same line    * within * ( ) references the radicand of a root or to the first element appearing in row - major order in a structure represented by m !",
    "* element * ( @xmath15 ) references the next element appearing in row - major order in a structure represented by m !    * above * ( @xmath16 ) references the leftmost object on a higher line ( e.g. , superscript , over symbol , fraction numerator , or index for a radical )    * below * ( @xmath17 ) references the leftmost object on a lower line ( e.g. , subscript , under symbol , fraction denominator )    * pre - above * ( @xmath18 ) references the leftmost object of a prescripted superscript    * pre - below * ( @xmath19 ) references the leftmost object of a prescripted subscript    an slt is rooted at the leftmost object on the main baseline ( writing line ) of the formula it represents .",
    "figure  [ fig : slt ] shows an example of an slt , where for simplicity , unlabeled edges represent the _ next _ relationship and types other than _ wildcard _ are not displayed .",
    "@xmath20     +   + ( a ) query formula and symbol layout tree ( slt )   +    [ cols=\"^,^,<,^,^\",options=\"header \" , ]     we now consider how well mss - based rankings correspond to human perceptions of formula similarity , through evaluating top-10 results .",
    "to first select which combinations of parameters to use for our human evaluation , we examined the mss scores of formulae returned by the core before re - ranking . in figure",
    "[ fig : goldstandard]a , from the top-100 hits returned by the core for the ntcir-11 wikipedia task , we compute normalized discounted cumulative gain ( ndcg@100 ) distributions for the maximum subtree similarity scores in each of the top-100 hits compared to an mss ` gold standard . ' in the gold standard",
    "all formulae in the wikipedia collection have been scored for each of the 100 wikipedia queries , and the top-100 formulae for each query are used for normalization .",
    "we again consider a number of different window size and eol parameters ( @xmath21 , with and without eol tuples ) .",
    "the first five columns show increasing @xmath12 values without eol tuples , followed by the same range of @xmath12 values with eol tuples .    adding eol tuples shifts values around the median down .",
    "we took this as evidence that including eol tuples was not helping return more similar formulae as measured by ndcg over the mss scores .",
    "further , as moving from @xmath22 to @xmath23 reduces the variance most dramatically , to keep the number of hits for individual participants to evaluate reasonable , we chose to consider only @xmath24 and @xmath25 .      * data . * a set of 10 queries were selected using random sampling from the wikipedia query set .",
    "five of the queries contained wildcards , and the other five did not .",
    "some queries were manually rejected and then randomly replaced to insure that a diverse set of expression sizes and structures were collected . using the wikipedia collection , for the three versions of the core compared ( @xmath26 , no eol tuples ) , we applied reranking to the top-100 hits , and then collected the top-10 hits returned by each query for rating .    * evaluation protocol .",
    "* participants completed the study alone in a private , quiet room with a desktop computer running the evaluation interface in a web browser .",
    "the web pages first provided an overview , followed by a demographic questionnaire , instructions on evaluating hits , and then familiarization trials ( 10 hits ; 5 for each of two queries ) .",
    "after familiarization participants evaluated hits for the 10 queries , and finally completed a brief exit questionnaire .",
    "participants were paid $ 10 at the end of their session .",
    "participants rated the similarity of queries to results using a five - point likert scale ( very dissimilar , dissimilar , neutral , similar , very similar ) .",
    "it has been shown that presenting search results in an ordered list affects the likelihood of hits being identified as relevant  @xcite .",
    "instead we presented queries along with each hit in isolation . to avoid other presentation order effects , the order of query presentation was randomized , followed by the order in which hits for each query were presented .",
    "* demographics and exit questionnaire . *",
    "21 participants ( 5 female , 16 male ) were recruited from the computing and science colleges at our institution .",
    "their age distribution was : 18 - 24 ( 8) , 25 - 34 ( 9 ) , 35 - 44 ( 1 ) , 45 - 54 ( 1 ) , 55 - 64 ( 1 ) and 65 - 74 ( 1 ) .",
    "their highest levels of education completed were : bachelor s degree ( 9 ) , master s degree ( 9 ) , phd ( 2 ) , and professional degree ( 1 ) .",
    "their reported areas of specialization were : computer science ( 13 ) , electrical engineering ( 2 ) , psychology ( 1 ) , sociology ( 1 ) , mechanical engineering ( 1 ) , computer engineering ( 1 ) , math ( 1 ) and professional studies ( 1 ) .    in the post - questionnaire , participants rated the evaluation task as very difficult ( 3 ) , somewhat difficult ( 10 ) , neutral ( 6 ) , somewhat easy ( 2 ) or very easy ( 0 ) .",
    "they reported different approaches to assessing similarity .",
    "many considered whether operations and operands were of the same type or if two expressions would evaluate to the same result .",
    "others reported considering similarity primarily based on similar symbols , and shared structure between expressions .",
    "c | l l l l l & + & * 1 * & * 2 * & * 3 * & * 4 * & * 5 * + @xmath22 & 4.54 ( 0.78 ) & 3.79 ( 1.16 ) & 3.48 ( 1.31 ) & 3.20 ( 1.30 ) & 2.83 ( 1.24 ) + @xmath23 & 4.54 ( 0.78 ) & 3.71 ( 1.22 ) & 3.48 ( 1.30 ) & 3.16 ( 1.28 ) & 2.90 ( 1.25 ) + @xmath27 & 4.54 ( 0.78 ) & 3.78 ( 1.18 ) & 3.59 ( 1.22 ) & 3.27 ( 1.15 ) & 2.98 ( 1.24 ) + & * 6 * & * 7 * & * 8 * & * 9 * & * 10 * + @xmath22 & 2.94 ( 1.22 ) & 2.65 ( 1.19 ) & 2.78 ( 1.20 ) & 2.78 ( 1.20 ) & 2.85 ( 1.24 ) + @xmath23 & 2.93 ( 1.19 ) & 2.85 ( 1.25 ) & 2.57 ( 1.18 ) & 2.74 ( 1.22 ) & 2.80 ( 1.13 ) + @xmath27 & 2.92 ( 1.23 ) & 2.80 ( 1.17 ) & 2.98 ( 1.23 ) & 2.92 ( 1.21 ) & 2.87 ( 1.17 ) +    [ likert ]    * similarity ratings . *",
    "as seen in table  [ likert ] , the likert - based similarity rating distributions are very similar , and identical in a number of places . in all three conditions , average ratings increase consistently from the 5th to 1st hits .",
    "the top 4 formula hits all have an average rating higher than 3, suggesting that a number of participants felt these formula had some similarity with the query expression . after this",
    "the ratings are less than ` 3 ' and sometimes shift . perhaps because matches were not highlighted , in a number of cases exact matches were rated as ` 4 ' rather than ` 5 . '",
    "as was found for the ntcir-11 wikipedia benchmark , it appears that a window size of 1 is able to obtain strong results .",
    "this is appealing , because this requires the smallest index size and has the fastest retrieval times .",
    "we have presented a new technique for ranking appearance - based formula retrieval results , using the candidate formula subtree with the harmonic mean for matched symbols and edges after greedy unification of symbols by type .",
    "this maximum subtree similarity ( mss ) metric prefers large connected matches of the query within the formula . in an experiment we found that for the top-10 hits , the human ratings of similarity were consistent with the ranking produced by our metric .",
    "we have also described an efficient two - stage implementation of our retrieval model that produces state - of - the - art results for the ntcir-11 wikipedia formula retrieval task , using a much smaller index .    in the future",
    "we plan to explore using end - of - line symbols , but only for small expressions . this will not require much additional space in the index , while greatly reducing the cost of wildcard end - of - line tuples",
    ". we also plan to support multiple copies of a formula in a document , devise new methods for ranking documents based on multiple matches and/or query expressions , and integrate our formula retrieval system with keyword search .",
    "this material is based upon work supported by the national science foundation ( usa ) under grant no .",
    "iis-1016815 and hcc-1218801 . financial support from the natural sciences and engineering research council of canada under grant no . 9292/2010 , mitacs , and the university of waterloo",
    "is gratefully acknowledged .",
    "n.  pattaniyil and r.  zanibbi .",
    "combining tf - idf text retrieval with an inverted index over symbol pairs in math expressions : the tangent math search engine at ntcir 2014 . in _ ntcir _ , pages 135142 , 2014 ."
  ],
  "abstract_text": [
    "<S> with the ever - increasing quantity and variety of data worldwide , the web has become a rich repository of mathematical formulae . </S>",
    "<S> this necessitates the creation of robust and scalable systems for mathematical information retrieval , where users search for mathematical information using individual formulae ( query - by - expression ) or a combination of keywords and formulae . </S>",
    "<S> often , the pages that best satisfy users information needs contain expressions that only approximately match the query formulae . </S>",
    "<S> for users trying to locate or re - find a specific expression , browse for similar formulae , or who are mathematical non - experts , the similarity of formulae depends more on the relative positions of symbols than on deep mathematical semantics .    </S>",
    "<S> we propose the maximum subtree similarity ( mss ) metric for query - by - expression that produces intuitive rankings of formulae based on their appearance , as represented by the types and relative positions of symbols . because it is too expensive to apply the metric against all formulae in large collections , </S>",
    "<S> we first retrieve expressions using an inverted index over tuples that encode relationships between pairs of symbols , ranking hits using the dice coefficient . </S>",
    "<S> the top-@xmath0 formulae are then re - ranked using mss . </S>",
    "<S> our approach obtains state - of - the - art performance on the ntcir-11 wikipedia formula retrieval benchmark and is efficient in terms of both index space and overall retrieval time . </S>",
    "<S> retrieval systems for other graphical forms , including chemical diagrams , flowcharts , figures , and tables , may also benefit from adopting our approach .    </S>",
    "<S> [ query processing ] </S>"
  ]
}