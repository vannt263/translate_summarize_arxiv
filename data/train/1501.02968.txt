{
  "article_text": [
    "the problem of state observability for systems driven by unknown inputs ( ui ) is a fundamental problem in control theory .",
    "this problem was introduced and firstly investigated in the seventies @xcite .",
    "a huge effort has then been devoted to design observers for both linear and nonlinear systems in presence of ui , e.g. , @xcite .",
    "the goal of this paper is not to design new observers for systems driven by ui but to provide simple analytic conditions in order to check the weak local observability of the state .",
    "the obtained results hold for systems whose dynamics are nonlinear in the state and affine in both the known and the unknown inputs .",
    "additionally , the unknown inputs are supposed to be smooth functions of time ( specifically , they are supposed to be @xmath0 , for a suitable integer @xmath1 ) .    in @xcite the observability properties of a nonlinear system",
    "are derived starting from the definition of indistinguishable states . according to this definition ,",
    "the lie derivatives of any output computed along any direction allowed by the system dynamics take the same values at the states which are indistinguishable .",
    "hence , if a given state @xmath2 belongs to the indistinguishable set of a state @xmath3 ( i.e. , to @xmath4 ) all the lie derivatives computed at @xmath2 and at @xmath3 take the same values .",
    "this is a fundamental property . in particular ,",
    "based on this property , the observability rank condition was introduced in @xcite .",
    "our first objective is to extend the observability rank condition . for",
    ", we introduce a new definition of _ indistinguishable states _ for the case ui ( section [ sectiondefinitions ] ) .",
    "then , in section [ sectionextendedsystem ] we introduce a new system by a suitable state extension . for this extended system , we show that , the lie derivatives of the outputs up to a given order , take the same values at the states which are indistinguishable . in other words",
    ", the new system satisfies the same property derived in @xcite mentioned above and this allows us to extend the observability rank condition ( section [ sectioneorc ] ) .",
    "we will refer to this extension as to the extended observability rank condition ( @xmath5 ) .",
    "the new system is obtained by a state augmentation . in particular , the augmented state is obtained by including the unknown inputs together with their time - derivatives up to given order .",
    "this augmented state has already been considered in the past .",
    "specifically , in @xcite the authors adopted this augmented state to investigate the observability properties of a fundamental problem in the framework of mobile robotics ( the bearing slam ) .",
    "in particular , starting from the idea of including the time - derivatives of the unknown input in the state , in @xcite a sufficient condition for the state observability has been provided .",
    "the @xmath5@xmath6is based on the computation of a codistribution defined in the augmented space . in other words ,",
    "the @xmath5@xmath6allows us to check the weak local observability of the original state together with its extension and not directly of the original state .",
    "this makes the computational cost dependent on the dimension of the augmented state .",
    "additionally , the @xmath5@xmath6 only provides sufficient conditions for the weak local observability of the original state since the state augmentation can be continued indefinitely . for these reasons ,",
    "the paper focuses on the following two fundamental issues :    * understanding if it is possible to derive the weak local observability of the original state by computing a codistribution defined in the original space , namely a codistribution consisting of covectors with the same dimension of the original state . *",
    "understanding if there exists a given augmented state such that , by further augmenting the state , the observability properties of the original state provided by @xmath5@xmath6 remain unvaried .",
    "both these issues have been fully addressed in the case of a single unknown input ( see theorems [ theoremseparation ] and [ theoremstop ] ) .",
    "thanks to the result stated by theorem [ theoremseparation ] ( section [ sectionseparation ] ) , the algorithm in definition [ definitionomega ] in section [ sectionseparation ] ( for the case of a single known input ) and in definition [ definitionomegae ] in section [ sectionextension ] ( for the case of multiple known inputs ) can be used to obtain the entire observable codistribution . in other words ,",
    "the observability properties of the original state are obtained by a very simple algorithm . as it will be seen , the analytic derivations required to prove theorem [ theoremseparation ] are complex and we are currently extending them to the multiple unknown inputs case .",
    "theorem [ theoremstop ] ( section [ sectionstop ] ) ensures the convergence of the algorithm in a finite number of steps and it also provides the criterion to establish that this convergence has been reached .",
    "also this proof is based on several tricky and complex analytical steps .",
    "both theorems [ theoremseparation ] and [ theoremstop ] are first proved in the case of a single known input ( sections [ sectionseparation ] and [ sectionstop ] ) but in section [ sectionextension ] their validity is extended to the case of multiple known inputs .",
    "all the theoretical results are illustrated in section [ sectionapplicationssystem ] by deriving the observability properties of several nonlinear systems driven by unknown inputs .",
    "in the sequel we will refer to a nonlinear control system with @xmath7 known inputs ( @xmath8^t$ ] ) and @xmath9 unknown inputs or disturbances ( @xmath10^t$ ] ) .",
    "the state is the vector @xmath11 , with @xmath12 an open set of @xmath13 .",
    "we assume that the dynamics are nonlinear with respect to the state and affine with respect to the inputs ( both known and unknown ) .",
    "finally , for the sake of simplicity , we will refer to the case of a single output @xmath14 ( the extension to multiple outputs is straightforward ) .",
    "our system is characterized by the following equations :    @xmath15    where @xmath16 , @xmath17 , and @xmath18 , @xmath19 , are vector fields in @xmath12 and the function @xmath20 is a scalar function defined on the open set @xmath12 . for the sake of simplicity , we will assume that all these functions are analytic functions in @xmath12 .",
    "let us consider the time interval @xmath21 $ ] .",
    "note that , since the equations in ( [ equationstateevolution ] ) do not depend explicitly on time , this can be considered as a general time interval of length @xmath22 . in the sequel , we will assume that the solution of ( [ equationstateevolution ] ) exists in @xmath23 and we will denote by @xmath24 the state at a given time @xmath25 , when @xmath26 and the known input and the disturbance are @xmath27 and @xmath28 , respectively , @xmath29 .",
    ".2 cm    we introduce the following definition :    [ defindistinguishablestates ] two states @xmath30 and @xmath31 are indistinguishable if , for any @xmath32 ( the known input vector function ) , there exist @xmath33 and @xmath34 ( i.e. , two unknown input vector functions in general , but not necessarily , different from each other ) such that @xmath35 @xmath29 .",
    "this definition states that , if @xmath30 and @xmath31 are indistinguishable , then , for any known input , by looking at the output during the time interval @xmath23 , we can not conclude if the initial state was @xmath30 and the disturbance @xmath36 or if the initial state was @xmath31 and the disturbance @xmath37 .",
    "we remark that , contrary to the definition of indistinguishable states in the case without disturbances , the new definition does not establish an equivalence relation .",
    "indeed , we can have @xmath30 and @xmath31 indistinguishable , @xmath31 and @xmath38 indistinguishable but @xmath30 and @xmath38 are not indistinguishable . as in the case of known inputs , given @xmath39 ,",
    "the indistinguishable set @xmath4 is the set of all the states @xmath2 such that @xmath2 and @xmath3 are indistinguishable .",
    "starting from this definition , we can use exactly the same definitions of observability and weak local observability adopted in the case without disturbances .",
    "in order to extend the observability rank condition to the case of unknown inputs we introduce a new system ( the extended system ) such that its lie derivatives are constant on the indistinguishable sets .",
    "the new system will be denoted by @xmath40 .",
    "it is simply obtained by extending the original state by including the unknown inputs together with their time derivatives .",
    "specifically , we denote by @xmath41 the extended state that includes the time derivatives up to the @xmath42order :    @xmath43^t\\ ] ]    where @xmath44 and @xmath45 , with @xmath46 an open set of @xmath47 . from ( [ equationstateevolution ] )",
    "it is immediate to obtain the dynamics for the extended state :    @xmath48    where :    @xmath49\\ ] ]    @xmath50\\ ] ]    and we denoted by @xmath51 the @xmath52dimensional zero column vector and by @xmath53 the @xmath52dimensional unit column vector , with @xmath54 in the @xmath55 position and @xmath56 elsewhere .",
    "we remark that the resulting system has still @xmath7 known inputs and @xmath9 disturbances . however , while the @xmath7 known inputs coincide with the original ones , the @xmath9 unknown inputs are now the @xmath57order time derivatives of the original disturbances .",
    "the state evolution depends on the known inputs via the vector fields @xmath58 , ( @xmath59 ) and it depends on the disturbances via the unit vectors @xmath60 , ( @xmath19 ) . finally , we remark that only the vector field @xmath61 depends on the new state elements .    in the rest of this section",
    "we derive several properties satisfied by @xmath40 .",
    "[ lmlieder1 ] let us consider the system @xmath40 .",
    "the lie derivatives of the output up to the @xmath62 order ( @xmath63 ) are independent of @xmath64 , @xmath19 , @xmath65 .",
    "* proof :  * we proceed by induction on @xmath66 for any @xmath1 . when @xmath67 we only have one zero - order lie derivative ( i.e. , @xmath68 ) , which only depends on @xmath2 , namely it is independent of @xmath69 , @xmath70 .",
    "let us assume that the previous assert is true for @xmath66 and let us prove that it holds for @xmath71 .",
    "if it is true for @xmath66 , any lie derivative up to the @xmath62 order is independent of @xmath69 , for any @xmath72 . in other words , the analytical expression of any lie derivative up to the @xmath52order",
    "is represented by a function @xmath73 . hence , @xmath74 $ ] .",
    "it is immediate to realize that the product of this gradient by any vector filed in ( [ equationextendedstateevolution ] ) depends at most on @xmath75 , i.e. , it is independent of @xmath69 ,",
    "@xmath76 @xmath77    .2 cm    a simple consequence of this lemma are the following two properties :    [ prlieder1 ] let us consider the system @xmath40 .",
    "the lie derivatives of the output up to the @xmath78 order along at least one vector among @xmath60 ( @xmath79 ) are identically zero .",
    "* proof :  * from the previous lemma it follows that all the lie derivatives , up to the @xmath42order are independent of @xmath80 , which are the last @xmath9 components of the extended state in ( [ equationextendedstate ] ) .",
    "then , the proof follows from the fact that any vector among @xmath60 ( @xmath79 ) has the first @xmath81 components equal to zero @xmath77    [ prlieder2 ] the lie derivatives of the output up to the @xmath78 order along any vector field @xmath61 , @xmath82 for the system @xmath40coincide with the same lie derivatives for the system @xmath83    * proof :  * we proceed by induction on @xmath66 for any @xmath1 . when @xmath67 we only have one zero - order lie derivative ( i.e. , @xmath68 ) , which is obviously the same for the two systems , @xmath40and @xmath83 .",
    "let us assume that the previous assert is true for @xmath66 and let us prove that it holds for @xmath84 .",
    "if it is true for @xmath66 , any lie derivative up to the @xmath62 order is the same for the two systems . additionally , from lemma [ lmlieder1 ] , we know that these lie derivatives are independent of @xmath69 , @xmath85 .",
    "the proof follows from the fact that the first @xmath86 components of @xmath87 , @xmath88 coincide with the first @xmath86 components of @xmath89 , @xmath90 when @xmath91 @xmath77    .2 cm    in the sequel we will use the notation : @xmath92^t$ ] . in this notation we have @xmath93^t$ ] .",
    "we also denote by @xmath94the original system , i.e. , the one characterized by the state @xmath2 and the equations in ( [ equationstateevolution ] ) . the definition [ defindistinguishablestates ] , given for @xmath94 , can be applied to @xmath40 .",
    "specifically , in @xmath40 , two states @xmath95 $ ] and @xmath96 $ ] are indistinguishable if , for any @xmath27 ( the known inputs ) , there exist two vector functions @xmath97 and @xmath98 ( the @xmath78 time derivative of two disturbance vectors ) such that , @xmath99 ; ~u ;   ~w_a^{(k ) } ) ) = h ( x(t ; ~ [ x_b , \\xi_b ] ; ~u ;   ~w_b^{(k ) } ) ) $ ] @xmath29 .",
    "it holds the following fundamental result :    [ prconstantlieder ] if @xmath100 $ ] and @xmath101 $ ] are indistinguishable in @xmath40then the lie derivatives of the output up to the @xmath78-order computed on these points take the same values .",
    "* proof :  *    we consider a piecewise - constant input @xmath102 as follows ( @xmath59 ) :    @xmath103    @xmath104    since @xmath100 $ ] and @xmath101 $ ] are indistinguishable in @xmath40 , there exist two disturbance functions @xmath97 and @xmath98 such that :    @xmath105 ; ~\\tilde{u } ;   ~w_a^{(k ) } ) ) = h ( x(t ; ~ [ x_b , \\xi_b ] ; ~\\tilde{u } ;   ~w_b^{(k ) } ) ) \\ ] ]    @xmath106 . on the other hand , by taking the two quantities in ( [ equationha = hb ] ) at @xmath107 , we can consider them as functions of the @xmath108 arguments @xmath109 .",
    "hence , by differentiating with respect to all these variables , we also have :    @xmath110 ; ~\\tilde{u } ;   ~w_a^{(k ) } ) ) } { \\partial t_1\\partial t_2\\cdots\\partial t_g}=\\ ] ]    @xmath111 ; ~\\tilde{u } ;   ~w_b^{(k ) } ) ) } { \\partial t_1\\partial t_2\\cdots\\partial t_g}\\ ] ]    by computing the previous derivatives at @xmath112 and by using proposition [ prlieder1 ] we obtain , if @xmath113 :    @xmath114    where @xmath115 , @xmath116 .",
    "the equality in ( [ equationlda = ldb ] ) must hold for all possible choices of @xmath117 . by appropriately selecting these @xmath117",
    ", we finally obtain :    @xmath118    where @xmath119 are vector fields belonging to the set @xmath120 @xmath77    .2 cm    in @xcite it was also defined the concept of @xmath121indistinguishable states , with @xmath122 a subset of the definition set ( in the specific case @xmath123 ) that includes the two considered states . from this definition and the previous proof we can alleviate the assumptions in the previous proposition . specifically , we have the following :    [ remark ] the statement of proposition [ prconstantlieder ] also holds if @xmath100 $ ] and @xmath101 $ ] are @xmath121indistinguishable , being @xmath122 any open subset of @xmath46 and @xmath100,[x_b , \\xi_b ] \\in v$ ] .",
    "thanks to the results stated by propositions [ prlieder2 ] and [ prconstantlieder ] we will introduce the extension of the observability rank condition in the next section .",
    "according to the observability rank condition , the weak local observability of the system in ( [ equationstateevolution ] ) with @xmath124 at a given point @xmath3 can be investigated by analyzing the codistribution generated by the gradients of the lie derivatives of its output .",
    "specifically , if the dimension of this codistribution is equal to the dimension of the state on a given neighbourhood of @xmath3 , we conclude that the state is weakly locally observable at @xmath3 ( theorem @xmath125 in @xcite ) .",
    "we can also check the weak local observability of a subset of the state components . specifically , a given component of the state is weakly locally observable at @xmath3 , if its gradient belongs to the aforementioned codistribution if it is constant on the indistinguishable set @xmath4 . ] .",
    "the proof of theorem @xmath125 in @xcite is based on the fact that all the lie derivatives ( up to any order ) of the output computed along any direction allowed by the system dynamics take the same values at the states which are indistinguishable .",
    "let us consider now the general case , i.e. , when @xmath126 . in the extended system ( @xmath40 )",
    "we know that the lie derivatives up to the @xmath57order satisfy the same property ( see proposition [ prconstantlieder ] ) .",
    "therefore , we can extend the validity of theorem @xmath125 in @xcite to our case , provided that we suitably augment the state and that we only include the lie derivatives up to the @xmath57order to build the observable codistribution .    in the sequel , we will introduce the following notation :    * @xmath127 will denote the observable codistribution for @xmath40@xmath6that includes all the lie derivatives of the output along @xmath128 up to the order @xmath63 ; * the symbol @xmath129 will denote the gradient with respect to the extended state in ( [ equationextendedstate ] ) and the symbol @xmath130 will denote the gradient only respect to @xmath2 ; * for a given codistribution @xmath131 and a given vector field @xmath132 , we will denote by @xmath133 the codistribution whose covectors are the lie derivatives along @xmath132 of the covectors in @xmath131 ( we are obviously assuming that the dimension of these covectors coincides with the dimension of @xmath132 ) .",
    "* given two vector spaces @xmath134 and @xmath135 , we will denote with @xmath136 their sum , i.e. , the span of all the generators of both @xmath134 and @xmath135 . * for a given @xmath123 and a given @xmath137\\in v$ ] , we will denote with @xmath138}^v$ ] the set of all the states @xmath121indistinguishable from @xmath137 $ ] .",
    "the codistribution @xmath127 can be computed recursively by the following algorithm :    [ alg1 ]    let us denote by @xmath139 the @xmath140 component of the state ( @xmath141 ) .",
    "we introduce the following definition :    for the system @xmath40 , the @xmath140 component of the state ( i.e. , @xmath139 , @xmath141 ) satisfies the extended observability rank condition at @xmath142 $ ] if @xmath143 at @xmath142 $ ] .",
    "if this holds @xmath144 , we say that the state @xmath2 satisfies the extended observability rank condition at @xmath142 $ ] in @xmath40 .",
    "we have the following result , which is the extension of the result stated by theorem @xmath125 in @xcite :    for @xmath40 , if @xmath139 ( @xmath145 ) satisfies the observability rank condition at @xmath142 $ ] , then @xmath139 is weakly locally observable at @xmath142 $ ] . additionally , @xmath139 remains weakly locally observable by further extending the state ( i.e. , in every system @xmath146 ( @xmath147 ) ) .    * proof :  * we prove that it exists an open neighbourhood @xmath148 of @xmath142 $ ] such that , for every open neighbourhood @xmath149 of @xmath142 $ ] , @xmath139 is constant on the set @xmath150}$ ] . since @xmath143 at @xmath142 $ ] , it exists some open neighborhood @xmath148 of @xmath142 $ ] , such that @xmath139 can be expressed in terms of the lie derivatives of @xmath151 along the directions @xmath152 ( @xmath153 ) up to the @xmath1 order . if @xmath149 is an open neighborhood of @xmath142 $ ] , then proposition [ prconstantlieder ] and remark [ remark ] imply that all the lie derivatives up to the @xmath1 order are constant on the set @xmath150}$ ] and , consequently , also @xmath139 is constant on this set .",
    "finally , the fact that @xmath139 is weakly locally observable in every system @xmath146 ( @xmath147 ) directly follows from proposition [ prlieder2 ] @xmath77    .2 cm in accordance with the previous result , the @xmath5@xmath6is a tool to analyze the observability properties of a nonlinear system driven by known and unknown inputs .",
    "however , we remark two important limitations of the @xmath5 .",
    "the former consists in the fact that the state augmentation can be continued indefinitely . as a result",
    ", the @xmath5@xmath6only provides sufficient conditions for the weak local observability of the state components .",
    "the latter regards the computational cost demanded to check if it is satisfied .",
    "specifically , the computation demanded to check if @xmath154 belongs to @xmath155 can be very complex because by increasing @xmath1 we also increase the dimension of the extended state .    in the rest of this paper",
    ", we will focus our attention on these fundamental issues and we will provide the main paper contributions :    * obtaining a new codistibution ( @xmath156 ) that is the span of covectors whose dimension is @xmath157 ( i.e. , independent of the state extension ) such that @xmath158 if and only if @xmath143 ; * understanding if there exists a given @xmath159 such that , if @xmath160 , then @xmath161 @xmath162 .",
    "we fully address both these issues in the case @xmath163 . in section [ sectionsingle ]",
    "we introduce the basic equations that characterize this case . in section [ sectionseparation ]",
    "we provide a complete answer to the first issue by operating a separation on the codistribution generated by all the lie derivatives up to the @xmath57order .",
    "specifically , we prove that the observable codistribution can be splitted into two codistributions .",
    "the former is generated by the gradients of scalar functions that only depend on the original state .",
    "the latter is generated by the gradients of scalar functions that depend on the entire augmented state .",
    "however , this latter codistribution can be ignored when deriving the observability properties of the original state .",
    "the former codistribution , namely the one generated by the gradients of scalar functions that only depend on the original state , is defined by a simple recursive algorithm . in section [ sectionstop ] we provide a complete answer to the second issue by proving that this algorithm converges in a finite number of steps and by also providing the criterion to establish that the convergence of the algorithm has been reached ( theorem [ theoremstop ] ) .",
    "also this proof is based on several tricky analytic steps .",
    "for the sake of clarity , we start this discussion by considering the case when the system is characterized by a single known input , i.e. , when @xmath164 ( sections [ sectionsingle ] , [ sectionseparation ] and [ sectionstop ] ) . in particular ,",
    "both theorems [ theoremseparation ] and [ theoremstop ] are proved in this simplified case . however , in section [ sectionextension ] , their validity is extended to the case of multiple known inputs ( i.e. , @xmath165 ) .",
    "we will refer to the following system :    @xmath166    in other words , we consider the case when @xmath167 is the null vector and @xmath168 . in this case , the extended state that includes the time derivatives up to the @xmath42order is :    @xmath169^t\\ ] ]    the dimension of the extended state is @xmath170 . from ( [ equationstateevolution1 ] )",
    "it is immediate to obtain the dynamics for the extended state :    @xmath171    where :      in the sequel , we will denote by @xmath173 the first order lie derivative of the function @xmath68 along the vector field @xmath174 , i.e. , @xmath175 .",
    "the derivations provided in the next sections are based on the assumption that @xmath176 on a given neighbourhood of @xmath3 .",
    "we conclude this section by showing that , when this assumption does not hold , it is possible to introduce new coordinates and to show that the observability properties can be investigated starting from a new output that satisfies the assumption .",
    "let us suppose that @xmath177 on a given neighbourhood of @xmath3 .",
    "we introduce the following system associated with the system in ( [ equationstateevolution1 ] ) :    @xmath178    this is a system without disturbances and with a single known input @xmath179 .",
    "let us denote by @xmath180 the relative degree of this system at @xmath3 .",
    "since @xmath177 on a given neighbourhood of @xmath3 , we have @xmath181 .",
    "additionally , we can introduce the following new local coordinates ( see proposition 4.1.3 in @xcite ) :    @xmath182\\ ] ]    such that the first new @xmath180 coordinates are :    @xmath183    now let us derive the equations of the original system ( i.e. , the one in ( [ equationstateevolution1 ] ) ) in these new coordinates .",
    "we have :    @xmath184    where @xmath185 and @xmath186 have the following structure :      we remark that the first @xmath180 components of @xmath188 are weakly locally observable since they are the output and its lie derivatives along @xmath189 up to the @xmath190order ( note that we do not need to augment the state to use the first @xmath191 lie derivatives because all the lie derivatives up to the @xmath190order that includes at least one direction along @xmath108 vanish automatically ) . in order to investigate the observability properties of the remaining components , we augment the state as in ( [ equationextendedstate1 ] ) and we can consider the new output @xmath192 .",
    "we set @xmath193 .",
    "in this section we operate a separation on the codistribution generated by all the lie derivatives up to the @xmath52order ( @xmath63 ) . specifically , we prove that this codistribution can be splitted into two codistributions .",
    "the former is generated by the gradients of scalar functions that only depend on the original state .",
    "the latter is generated by the gradients of scalar functions that depend on the entire augmented state .",
    "however , this latter codistribution can be ignored when deriving the observability properties of the original state .",
    "the observable codistribution is given by the algorithm [ alg1 ] and , in this case @xmath168 , it reduces to the span of the gradients of all the lie derivatives along @xmath195 and @xmath196 up to the @xmath1-order .",
    "hence , for any @xmath63 , it is obtained recursively by the following algorithm :    1 .",
    "@xmath197 ; 2 .",
    "@xmath198    for a given @xmath63 we define the vector @xmath199 by the following algorithm :    1 .",
    "@xmath200 ; 2 .",
    "@xmath201}{l^1_g}$ ]    where the parenthesis @xmath202 $ ] denote the lie brackets of vector fields .",
    "similarly , we define @xmath203 by the following algorithm :    1 .",
    "@xmath204 ; 2 .",
    "@xmath205 $ ]    by a direct computation it is easy to realize that @xmath206 has the last @xmath1 components identically null . in the sequel",
    ", we will denote by @xmath207 the vector in @xmath13 that contains the first @xmath157 components of @xmath206 .",
    "in other words , @xmath208^t$ ] . additionally , we set @xmath209 $ ] .",
    "we define the @xmath194 codistribution as follows ( see definition [ definitionomegae ] in section [ sectionextension ] for the case when @xmath210 ) :    [ definitionomega ] this codistribution is defined recursively by the following algorithm :    1 .",
    "@xmath211 ; 2 .",
    "@xmath212    note that this codistribution is completely integrable by construction .",
    "more importantly , its generators are the gradients of functions that only depend on the original state ( @xmath2 ) and not on its extension . in the sequel , we need to embed this codistribution in @xmath213 .",
    "we will denote by @xmath214 $ ] the codistribution made by covectors whose first @xmath157 components are covectors in @xmath215 and the last components are all zero .",
    "additionally , we will denote by @xmath216 the codistribution that is the span of the lie derivatives of @xmath217 up to the order @xmath66 along the vector @xmath196 , i.e. , @xmath218 .",
    "we finally introduce the following codistribution :    [ definitionomegatilde ] this codistribution is defined as follows : @xmath219 + l^m$ ]    the codistribution @xmath220 consists of two parts .",
    "specifically , we can select a basis that consists of exact differentials that are the gradients of functions that only depend on the original state ( @xmath2 ) and not on its extension ( these are the generators of @xmath214 $ ] ) and the gradients @xmath221 .",
    "the second set of generators , i.e. , the gradients @xmath221 , are @xmath66 and , with respect to the first set , they are gradients of functions that also depend on the state extension @xmath222^t$ ]",
    ".    we have the following result :    let us denote with @xmath139 the @xmath140 component of the state ( @xmath141 ) .",
    "we have : @xmath223 if and only if @xmath224    * proof :  *    the fact that @xmath223 implies that @xmath224 is obvious since @xmath214 \\subseteq\\tilde{\\omega}_m$ ] by definition .",
    "let us prove that also the contrary holds , i.e. , that if @xmath224 then @xmath223 . since @xmath224 we have @xmath225 , where @xmath226 are @xmath227 generators of @xmath214 $ ] and @xmath228 are @xmath229 generators of @xmath216 .",
    "we want to prove that @xmath230 .",
    "we proceed by contradiction .",
    "let us suppose that @xmath231 .",
    "we remark that the first set of generators have the last @xmath1 entries equal to zero , as for @xmath154 .",
    "the second set of generators consists of the lie derivatives of @xmath151 along @xmath196 up to the @xmath66 order .",
    "let us select the one that is the highest order lie derivative and let us denote by @xmath232 this highest order .",
    "we have @xmath233 . by a direct computation ,",
    "it is immediate to realize that this is the only generator that depends on @xmath234 . specifically , the dependence is linear by the product @xmath235 ( we remind the reader that @xmath176 ) . but",
    "this means that @xmath154 has the @xmath236 entry equal to @xmath237 and this is not possible since @xmath238 $ ] @xmath77    .2 cm    a fundamental consequence of this lemma is that , if we are able to prove that @xmath239 , the weak local observability of the original state @xmath2 , can be investigated by only considering the codistribution @xmath215 .",
    "in the rest of this section we will prove this fundamental theorem , stating that @xmath239 .",
    "[ theoremseparation ] @xmath240 + l^m$ ]    the proof of this theorem is complex and is based on several results that we prove before . based on them , we provide the proof of the theorem at the end of this section .",
    ".2 cm    [ lemmalemma1 ] @xmath241    * proof :  *    we have @xmath242 .",
    "the first term @xmath243 .",
    "hence , we need to prove that @xmath244 .",
    "we repeat the previous procedure @xmath66 times .",
    "specifically , we use the equality @xmath245 , for @xmath246 , and we remove the first term since @xmath247 @xmath77    [ lemmarisa ] @xmath248 , i.e. , the vector @xmath207 is a linear combination of the vectors @xmath249 ( @xmath246 ) , where the coefficients ( @xmath250 ) depend on the state only through the functions that generate the codistribution @xmath216    * proof :  *    we proceed by induction . by definition ,",
    "@xmath251 .",
    "* inductive step : * let us assume that @xmath252 .",
    "we have :    @xmath253=\\sum_{j=1}^{m-1}\\left[c_j \\left[\\begin{array}{c }      \\phi_j\\\\     0_k \\\\ \\end{array } \\right],~g\\right]=\\ ] ] @xmath254,~g\\right ] - \\sum_{j=1}^{m-1}\\mathcal{l}_g c_j \\left[\\begin{array}{c }      \\phi_j\\\\     0_k \\\\ \\end{array } \\right]\\ ] ]    we directly compute the lie bracket in the sum ( note that @xmath249 is independent of the unknown input @xmath255 and its time derivatives ) :    @xmath256,~g\\right]= \\left[\\begin{array}{c }      [ \\phi_j,~g ] w\\\\     0_k \\\\ \\end{array } \\right]=\\left[\\begin{array}{c }      \\phi_{j+1 } \\mathcal{l}^1_gh\\\\     0_k \\\\ \\end{array } \\right]\\ ] ]    regarding the second term , we remark that @xmath257 . by setting @xmath258 for @xmath259 and @xmath260 , and by setting @xmath261 for @xmath262 and @xmath263",
    ", we obtain @xmath264 , which proves our assert since @xmath265 is a function of @xmath266 @xmath77    it also holds the following result :    [ lemmarisb ] @xmath267 , i.e. , the vector @xmath268 is a linear combination of the vectors @xmath269 ( @xmath246 ) , where the coefficients ( @xmath270 ) depend on the state only through the functions that generate the codistribution @xmath216    * proof :  *    we proceed by induction . by definition ,",
    "@xmath271 .",
    "* inductive step : * let us assume that @xmath272 .",
    "we need to prove that @xmath267 .",
    "we start by applying on both members of the equality @xmath272 the lie bracket with respect to @xmath196 .",
    "we obtain for the first member : @xmath273= \\hat{\\phi}_m \\mathcal{l}^1_gh$ ] . for the second member we have :    @xmath274= \\sum_{j=1}^{m-1 } b_j [ \\phi_j ,",
    "~g]- \\sum_{j=1}^{m-1 } \\mathcal{l}_g b_j \\phi_j=\\ ] ] @xmath275    by setting @xmath276 for @xmath259 and @xmath277 , and by setting @xmath278 for @xmath262 and @xmath279 , we obtain @xmath280 , which proves our assert since @xmath281 is a function of @xmath266 @xmath77    an important consequence of the previous two lemmas is the following result :    [ propertylemma2 ] the following two codistributions coincide :    1 .",
    "@xmath282 ; 2 .",
    "@xmath283 ;    we are now ready to prove theorem [ theoremseparation ] .",
    "* proof :  *    we proceed by induction . by definition ,",
    "@xmath284 since they are both the span of @xmath217 .",
    "* inductive step : * let us assume that @xmath285 .",
    "we have : @xmath286+\\mathcal{l}_f l^{m-1 } + \\mathcal{l}_g \\bar{\\omega}_{m-1}$ ] . on the other hand , @xmath287 .",
    "the first @xmath288 terms are in @xmath289 .",
    "hence we have : @xmath290 + \\mathcal{l}_f \\mathcal{l}^{m-1}_g dh + \\mathcal{l}_g \\bar{\\omega}_{m-1}$ ] . by using lemma [ lemmalemma1 ]",
    "we obtain : @xmath290 + \\mathcal{l}_{\\phi_{m-1 } } dh + \\mathcal{l}_g \\bar{\\omega}_{m-1}$ ] . by using again the induction assumption",
    "we obtain : @xmath291 + l^{m-1 } + [ \\mathcal{l}_f \\omega_{m-1},0_k ] + \\mathcal{l}_{\\phi_{m-1 } } dh + \\mathcal{l}_g [ \\omega_{m-1},0_k ] + \\mathcal{l}_g l^{m-1}=[\\omega_{m-1},0_k ] + l^m + [ \\mathcal{l}_f \\omega_{m-1},0_k ] + \\mathcal{l}_{\\phi_{m-1 } } dh + [ \\mathcal{l}_{\\frac{g}{l^1_g } } \\omega_{m-1},0_k]$ ] and by using proposition [ propertylemma2 ] we obtain : @xmath292 + l^m + [ \\mathcal{l}_f \\omega_{m-1},0_k ] + \\mathcal{l}_{\\hat{\\phi}_{m-1 } } dh + [ \\mathcal{l}_{\\frac{g}{l^1_g } } \\omega_{m-1},0_k]=\\tilde{\\omega}_m$ ] @xmath77",
    "theorem [ theoremseparation ] is fundamental .",
    "it allows us to obtain all the observability properties of the original state by restricting the computation to the @xmath194 codistribution , namely a codistribution whose covectors have the same dimension of the original space . in other words ,",
    "the dimension of these covectors is independent of the state augmentation .",
    "the @xmath194 codistribution is defined recursively and @xmath293 ( see definition [ definitionomega ] in section [ sectionseparation ] ) .",
    "this means that , if for a given @xmath66 the gradients of the components of the original state belong to @xmath215 , we can conclude that the original state is weakly locally observable . on the other hand , if this is not true , we can not exclude that it is true for a larger @xmath66 .",
    "the goal of this section is precisely to address this issue .",
    "we will show that the algorithm converges in a finite number of steps and we will also provide the criterion to establish that the algorithm has converged ( theorem [ theoremstop ] )",
    ". this theorem will be proved at the end of this section since we need to introduce several important new quantities and properties .",
    ".2 cm    for a given positive integer @xmath294 we define the vector @xmath295 by the following algorithm :    1 .",
    "@xmath296 ; 2 .",
    "@xmath297 $ ]    it is possible to find a useful expression that relates these vectors to the vectors @xmath249 , previously defined .",
    "specifically we have :    [ lemmapsiphi ] it holds the following equation :    @xmath298    * proof :  *    we proceed by induction . by definition @xmath299 and equation ( [ equationpsiphi ] ) holds for @xmath300 .    * inductive step : * let us assume that it holds for a given @xmath301 and let us prove its validity for @xmath294 .",
    "we have :    @xmath302=\\left[\\phi_{j-1 } , ~\\frac{g}{l^1_g}\\right ] + \\left[\\left\\ { \\sum_{i=0}^{j-2 } ( -)^{j - i-1 } \\mathcal{l}^{j - i-2}_{\\frac{g}{l^1_g } } \\left ( \\frac{\\mathcal{l}_{\\phi_i}l^1_g}{l^1_g}\\right ) \\right\\ } \\frac{g}{l^1_g } , ~\\frac{g}{l^1_g}\\right]\\ ] ]    on the other hand :    @xmath303 = \\phi_{j } - \\frac{\\mathcal{l}_{\\phi_{j-1}}l^1_g}{l^1_g } \\frac{g}{l^1_g}\\ ] ]    and    @xmath304=-\\mathcal{l}_{\\frac{g}{l^1_g } } \\left\\ { \\sum_{i=0}^{j-2 } ( -)^{j - i-1 } \\mathcal{l}^{j - i-2}_{\\frac{g}{l^1_g } } \\left ( \\frac{\\mathcal{l}_{\\phi_i}l^1_g}{l^1_g}\\right ) \\right\\ } \\frac{g}{l^1_g}=\\ ] ] @xmath305    hence :    @xmath306    which coincides with ( [ equationpsiphi ] ) @xmath77    .2 cm    from this lemma we obtain the following result :    [ lemmafunctionsinomegam ] if @xmath215 is invariant with respect to @xmath307 and @xmath308 then , for @xmath309 , we have : @xmath310    * proof :  *    from ( [ equationpsiphi ] ) we obtain :    @xmath311    where @xmath312 . from ( [ equationpsiphi1 ] )",
    "we also obtain :    @xmath313    we consider this last equation for all the integers @xmath314 . by construction , for these @xmath294 , @xmath315 ( see definition [ definitionomega ] ) .",
    "additionally , since by assumption @xmath215 is invariant with respect to both @xmath307 and @xmath308 , it is also invariant with respect to @xmath316 ( @xmath317 ) and in particular @xmath318 . therefore , from ( [ equationpsiphi2 ] ) we obtain :    @xmath319    @xmath262 .",
    "the proof of the statement is obtained by using ( [ equationpsiphi3 ] ) , from @xmath320 up to @xmath321 and by using again the invariance with respect to @xmath308 @xmath77    from lemma [ lemmapsiphi ] with @xmath262 and lemma [ lemmafunctionsinomegam ] it is immediate to obtain the following result :    [ propphimtot ] if @xmath215 is invariant with respect to @xmath307 and @xmath308 then it is also invariant with respect to @xmath322 , @xmath262 .",
    ".5 cm    let us denote by @xmath323 and by @xmath324 .",
    "[ lemmakeyequality ] we have the following key equality :    @xmath325    @xmath326 .",
    "* proof :  *    we will prove this equality by an explicit computation .",
    "we have :    @xmath327    the second term on the right hand side simplifies with the last term in ( [ equationkeyequality ] ) .",
    "hence we have to prove :    @xmath328    we have :    @xmath329    we remark that :    @xmath330    and    @xmath331    by substituting these two last equalities in ( [ equationkeyequalityproof1 ] ) we immediately obtain ( [ equationkeyequalityproof ] ) @xmath77    [ lemmarhoinomegam ] in general , it exists a finite @xmath66 such that @xmath332 .    *",
    "proof :  *    for a given @xmath66 , @xmath215 contains all the covectors @xmath333 ( @xmath334 ) . from equation ( [ equationkeyequality ] ) , we immediately obtain that , for a given @xmath335 , @xmath215 contains the covectors ( @xmath336 ) :    @xmath337    with @xmath338 and @xmath339 .",
    "let us denote by @xmath340 the smallest integer such that :    @xmath341    note that @xmath340 is a finite integer and in particular @xmath342 , where @xmath157 is the dimension of the state . indeed",
    ", if this would be not the case , the dimension of the codistribution generated by @xmath343 would be larger than @xmath157 .",
    "now let us consider a given @xmath344 such that @xmath345 .",
    "this integer @xmath66 is finite since the dimension of @xmath215 is bounded by the dimension of the state ( i.e. , by @xmath157 ) , for any @xmath66 . from the recursive algorithm that defines @xmath194",
    "we obtain that @xmath215 is invariant with respect to @xmath307 and @xmath308 . by using lemma [ lemmafunctionsinomegam ] , i.e. , by using the fact that @xmath346 , @xmath347 , from ( [ equationmu ] ) we obtain that @xmath215 also contains the covectors ( @xmath336 ) :    @xmath348    from ( [ equationj * ] ) and ( [ equationmup ] ) we obtain :    @xmath349    from equation ( [ equationmup ] ) , for @xmath350",
    ", we obtain : @xmath351 . by substituting in ( [ equationmu * ] ) we obtain :    @xmath352    we remark that the left hand side consists of the sum of covectors that belong to @xmath215 . since in general @xmath353 , we conclude that @xmath332 @xmath77    the previous lemma ensures that it exists a finite @xmath66 such that @xmath332 . in particular , from the previous proof , it is possible to check that this value of @xmath66 can not exceed @xmath354 .",
    "the following theorem allows us to obtain the criterion to stop the algorithm in definition [ definitionomega ] :    [ theoremstop ] if @xmath332 and @xmath215 is invariant under @xmath307 and @xmath308 , then @xmath355 @xmath356    * proof :  *    we proceed by induction .",
    "obviously , the equality holds for @xmath357 .    *",
    "inductive step : * let us assume that @xmath355 and let us prove that @xmath358 .",
    "we have to prove that @xmath359 . indeed , from the inductive assumption",
    ", we know that @xmath360 is invariant under @xmath307 and @xmath308 . additionally , because of this invariance , by using proposition [ propphimtot ] , we obtain that @xmath215 is also invariant under @xmath322 , for @xmath361 .",
    "since @xmath332 we have @xmath362 .",
    "additionally , @xmath363 and , because of lemma [ lemmafunctionsinomegam ] , we also have @xmath364 . finally , because of the invariance under @xmath308 , also the lie derivatives along @xmath365 of @xmath366 and @xmath367 belong to @xmath215 .",
    "now , we use equation ( [ equationkeyequality ] ) for @xmath368 . by computing the gradient of this equation",
    "it is immediate to obtain that @xmath359 @xmath77",
    "the previous two sections provide a complete answer to the problem of deriving all the observability properties of a system whose dynamics is driven by a single known input and a single unknown input and that depend non - linearly on the state and linearly on both the inputs . before providing the steps to be followed in order to obtain the weak local observability properties of such a system",
    ", we remark that it is possible to extend our results to the case of multiple known inputs .",
    "this extension is simply obtained by re - defining the @xmath194 codistribution .",
    "we are referring to the nonlinear system characterized by the following equations :    @xmath369    the new @xmath194 codistribution is defined as follows :    [ definitionomegae ] this codistribution is defined recursively by the following algorithm :    1 .",
    "@xmath211 ; 2 .   @xmath370    where the vectors @xmath371 ( @xmath59 ) are defined by the following algorithm :    1 .",
    "@xmath372 ; 2 .",
    "@xmath373}{l^1_g}$ ]    it is immediate to repeat all the steps carried out in section [ sectionseparation ] and extend the validity of theorem [ theoremseparation ] to the system characterized by ( [ equationstateevolution1e ] ) .",
    "this extension states that all the observability properties of the state that satisfies the nonlinear dynamics in ( [ equationstateevolution1e ] ) can be derived by analyzing the codistribution defined by definition [ definitionomegae ] .",
    "finally , also theorem [ theoremstop ] can be easily extended to cope with the case of multiple known inputs . in this case , requiring that @xmath374 means that @xmath215 must be invariant with respect to @xmath308 and all @xmath375 simultaneously .",
    ".5 cm    we conclude this section by outlining the steps to investigate the weak local observability at a given point @xmath3 of a nonlinear system driven by a single disturbance and several known inputs .",
    "in other words , to investigate the weak local observability of a system defined by a state that satisfies the dynamics in ( [ equationstateevolution1e ] ) .",
    "the validity of the following procedure is a consequence of the theoretical results previously derived ( in particular theorem [ theoremseparation ] and theorem [ theoremstop ] ) .    1 .   for the chosen @xmath3 , compute @xmath376 and @xmath377 . in the case when @xmath177 , introduce new local coordinates , as explained at the end of section [ sectionsingle ] and re -",
    "define the output functions @xmath378 .",
    "the most convenient choice is the one that corresponds to the highest relative degree ( if this degree coincides with @xmath157 it means that the state is weakly locally observable and we do not need to pursue the observability analysis ) . ] .",
    "2 .   build the codistribution @xmath215 ( at @xmath3 ) by using the algorithm provided in definition [ definitionomegae ] , starting from @xmath67 and , for each @xmath66 , check if @xmath332 .",
    "3 .   denote by @xmath379 the smallest @xmath66 such that @xmath332 .",
    "4 .   for each @xmath380 check if @xmath345 and denote by @xmath381 where @xmath382 is the smallest integer such that @xmath383 and @xmath384 ( note that @xmath385 ) . 5 .",
    "if the gradient of a given state component ( @xmath139 , @xmath141 ) belongs to @xmath386 ( namely if @xmath387 ) on a given neighbourhood of @xmath3 , then @xmath139 is weakly locally observable at @xmath3 .",
    "if this holds for all the state components , the state @xmath2 is weakly locally observable at @xmath3 .",
    "finally , if the dimension of @xmath386 is smaller than @xmath157 on a given neighbourhood of @xmath3 , then the state is not weakly locally observable at @xmath3 .",
    "we apply the theory developed in the previous sections in order to investigate the observability properties of several nonlinear systems driven by unknown inputs . in [ sectionapplication1 ]",
    "we consider systems with a single disturbance , namely characterized by the equations given in ( [ equationstateevolution1e ] ) . in this case",
    "we will use the results obtained in sections [ sectionsingle ] , [ sectionseparation ] , [ sectionstop ] and [ sectionextension ] .",
    "in particular , we will follow the steps outlined at the end of section [ sectionextension ] . in [ sectionapplication2 ] we consider the case of multiple disturbances , i.e. , when the state dynamics satisfy the first equation in ( [ equationstateevolution ] ) . in this section",
    ", we also consider the case of multiple outputs and we use directly the @xmath5 , as discussed in section [ sectioneorc ] .",
    "we consider a vehicle that moves on a @xmath388-environment .",
    "the configuration of the vehicle in a global reference frame , can be characterized through the vector @xmath389^t$ ] where @xmath390 and @xmath391 are the cartesian vehicle coordinates , and @xmath392 is the vehicle orientation .",
    "we assume that the dynamics of this vector satisfy the unicycle differential equations :    @xmath393    where @xmath394 and @xmath395 are the linear and the rotational vehicle speed , respectively , and they are the system inputs .",
    "we consider the following three cases of output ( see also figure [ fig ] for an illustration ) :        1 .",
    "the distance from the origin ( e.g. , a landmark is at the origin and its distance is measured by a range sensor ) ; 2 .   the bearing of the origin in the local frame ( e.g. , a landmark is at the origin and its bearing angle is measured by an on - board camera ) ; 3 .",
    "the bearing of the vehicle in the global frame ( e.g. , a camera is placed at the origin ) .",
    "we can analytically express the output in terms of the state .",
    "we remark that the expressions become very simple if we adopt polar coordinates : @xmath396 , @xmath397 .",
    "we have , for the three cases , @xmath398 , @xmath399 and @xmath400 , respectively . for each of these three cases ,",
    "we consider the following two cases : @xmath394 is known , @xmath395 is unknown ; @xmath394 is unknown , @xmath395 is known .",
    "the dynamics in these new coordinates become :    @xmath401      in this case we have @xmath404 $ ] and @xmath405 $ ] .",
    "we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we have @xmath406 and @xmath407 .",
    "additionally :    @xmath408\\ ] ]    we also have @xmath409\\}$ ] .",
    "hence , @xmath410 . additionally , @xmath411 .",
    "we need to compute @xmath412 and , in order to do this , we need to compute @xmath413 . we obtain : @xmath414 $ ] and @xmath415 , ~\\left[0,\\frac{1}{\\cos^2(\\theta_v-\\phi ) } , -\\frac{1}{\\cos^2(\\theta_v-\\phi)}\\right]\\right\\}$ ] .",
    "it is immediate to check that @xmath416 , meaning that @xmath417 .",
    "additionally , by a direct computation , it is possible to check that @xmath418 meaning that @xmath419 and @xmath420 , whose dimension is @xmath421 .",
    "we conclude that the dimension of the observable space is equal to @xmath421 and the state is not weakly locally observable .",
    "in this case we have @xmath424 $ ] and @xmath425 $ ]    we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we easily obtain @xmath177 .",
    "hence , we have to introduce new local coordinates , as explained at the end of section [ sectionsingle ] .",
    "we obtain @xmath426 and we obtain that the relative degree of the associated system in ( [ equationstateevolutionass ] ) is @xmath427 .",
    "let us denote the new coordinates by @xmath428 .",
    "in accordance with ( [ equationlocalcoordinates1 ] ) and ( [ equationlocalcoordinates2 ] ) we should set @xmath429 and @xmath430 . on the other hand , to simplify the computation , we set @xmath431 .",
    "finally , we set @xmath432 . we compute the new vector fields that characterize the dynamics in the new coordinates .",
    "we have :      additionally , we set @xmath434 and @xmath435,~ [ 0 , -\\sin(x_2'),0]\\}$ ] . in the new coordinates we obtain : @xmath436 and @xmath437 .",
    "it is immediate to check that @xmath438 , meaning that @xmath439 .",
    "additionally , by a direct computation , it is possible to check that @xmath440 meaning that @xmath441 and @xmath442 , whose dimension is @xmath421 .",
    "we conclude that the dimension of the observable space is equal to @xmath421 and the state is not weakly locally observable .",
    "in this case we have @xmath404 $ ] and @xmath444 $ ] .",
    "we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we have @xmath445 and @xmath446 . additionally :    @xmath447\\ ] ]    we also have @xmath448\\}$ ] .",
    "hence , @xmath449 , meaning that @xmath450 .",
    "additionally , by a direct computation , it is possible to check that @xmath411 meaning that @xmath451 and @xmath452 , whose dimension is @xmath54 .",
    "we conclude that the dimension of the observable space is equal to @xmath54 and the state is not weakly locally observable .",
    "in this case we have @xmath453 $ ] and @xmath425 $ ]    we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we have @xmath454 and @xmath455 . hence , @xmath456 $ ] and we do not need to check if @xmath457 .",
    "in other words , we can set @xmath450 . by a direct computation",
    "we obtain : @xmath448\\}$ ] , @xmath458 , \\right.$ ] @xmath459\\right\\}$ ] .",
    "additionally , we obtain @xmath440 , meaning that @xmath441 and @xmath442 , whose dimension is @xmath421 .",
    "we conclude that the dimension of the observable space is equal to @xmath421 and the state is not weakly locally observable .",
    "in this case we have @xmath404 $ ] and @xmath444 $ ] .",
    "we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we have @xmath460 and @xmath461 .",
    "additionally :    @xmath462\\ ] ]    we also have @xmath463\\}$ ] .",
    "hence , @xmath464 . additionally , @xmath411 .",
    "we need to compute @xmath412 and , in order to do this , we need to compute @xmath413 . we obtain : @xmath465 $ ] and @xmath466 , ~\\frac{1}{\\sin^2(\\theta_v-\\phi)}\\left[0 , 1,-1\\right]\\right\\}$ ] .",
    "it is immediate to check that @xmath416 , meaning that @xmath417 .",
    "additionally , by a direct computation , it is possible to check that @xmath418 meaning that @xmath419 and @xmath420 , whose dimension is @xmath421 .",
    "we conclude that the dimension of the observable space is equal to @xmath421 and the state is not weakly locally observable .",
    "in this case we have @xmath467 $ ] and @xmath425 $ ]    we follow the five steps mentioned at the end of section [ sectionextension ] .",
    "we easily obtain @xmath177 .",
    "hence , we have to introduce new local coordinates , as explained at the end of section [ sectionsingle ] .",
    "we obtain @xmath468 and we obtain that the relative degree of the associated system in ( [ equationstateevolutionass ] ) is @xmath427 .",
    "let us denote the new coordinates by @xmath428 . in accordance with ( [ equationlocalcoordinates1 ] ) and",
    "( [ equationlocalcoordinates2 ] ) we set @xmath469 and @xmath470 . finally , we set @xmath471 .",
    "we compute the new vector fields that characterize the dynamics in the new coordinates .",
    "we obtain :      additionally , we set @xmath473 and @xmath435,~ [ 0 , 1,0]\\}$ ] . in the new coordinates",
    "we obtain : @xmath474 and @xmath475 .",
    "since @xmath476 depends on @xmath477 , @xmath478 . since the dimension of @xmath479 is already @xmath421 , because of lemma [ lemmarhoinomegam ] , we know that it exists a given integer @xmath66 such that the dimension of @xmath215 is larger than @xmath421 . hence , we conclude that the entire state is weakly locally observable .",
    "in this case we refer to the general case , i.e. , to systems characterized by the dynamics given in ( [ equationstateevolution ] ) . for this general case we do not have the results stated by the theorem of separation ( theorem [ theoremseparation ] ) and we have to compute the entire codistribution and to proceed as it has been described in section [ sectioneorc ] .",
    "we derive the observability properties of two systems with unknown inputs .",
    "the first system characterizes a localization problem in the framework of mobile robotics .",
    "the state and its dynamics are the same as in the example discussed in [ sectionapplication1 ] .",
    "however , we consider a different output and also the case when both the inputs are unknown . for this simple example , the use of our theory is not required to derive the observability properties , which can be obtained by using intuitive reasoning .",
    "the second system is much more complex and describes one of the most important sensor fusion problem , which is the problem of fusing visual and inertial measurements .",
    "we will refer to this problem as to the visual - inertial structure from motion problem ( the vi - sfm  problem ) .",
    "this problem has been investigated by many disciplines , both in the framework of computer science @xcite and in the framework of neuroscience ( e.g. , @xcite ) .",
    "inertial sensors usually consist of three orthogonal accelerometers and three orthogonal gyroscopes . all together",
    ", they constitute the inertial measurement unit ( imu ) .",
    "we will refer to the fusion of monocular vision with the measurements from an imu as to the _ standard _ vi - sfm  problem . in @xcite and @xcite",
    "the observability properties of the standard vi - sfm  have been investigated in several different scenarios .",
    "very recently , following two independent procedures , the most general result for the standard vi - sfm  problem has been provided in @xcite and @xcite .",
    "this result can be summarized as follows . in the standard vi - sfm  problem",
    "all the independent observable states are : the positions in the local frame of all the observed features , the three components of the speed in the local frame , the biases affecting the inertial measurements , the roll and the pitch angles , the magnitude of the gravity and the transformation between the camera and imu frames .",
    "the fact that the yaw angle is not observable is an obvious consequence of the system invariance under rotation about the gravity vector .",
    "we want to use here the theory developed in the previous sections in order to investigate the observability properties of the vi - sfm  problem when the number of inertial sensors is reduced , i.e. , when the system is driven by unknown inputs .",
    "we consider the system characterized by the same dynamics given in ( [ equationsimpleexampedynamicsc ] ) .",
    "additionally , we assume that the vehicle is equipped with a gps able to provide its position .",
    "hence , the system output is the following two - components vector :    @xmath480^t\\ ] ]    let us start by considering the case when both the system inputs , i.e. , the two functions @xmath481 and @xmath482 , are available . by comparing ( [ equationstateevolution ] ) with ( [ equationsimpleexampedynamicsc ] )",
    "we obtain @xmath483^t$ ] , @xmath484 , @xmath124 , @xmath485 , @xmath486 , @xmath487^t$ ] , @xmath488^t$ ] and @xmath489^t$ ] .    in order to investigate the observability properties , we apply the observability rank crondition introduced in @xcite .",
    "the system has two outputs : @xmath490 and @xmath491 . by definition ,",
    "they coincide with their zero - order lie derivatives .",
    "their gradients with respect to the state are , respectively : @xmath492 $ ] and @xmath493 $ ] . hence , the space spanned by the zero - order lie derivatives has dimension two .",
    "let us compute the first order lie derivatives .",
    "we obtain : @xmath494 , @xmath495 , @xmath496 .",
    "hence , the space spanned by the lie derivatives up to the first order span the entire configuration space and we conclude that the state is weakly locally observable .",
    "we now consider the case when both the system inputs are unknown . in this case , by comparing ( [ equationstateevolution ] ) with ( [ equationsimpleexampedynamicsc ] ) we obtain @xmath497 , @xmath498 , @xmath499 , @xmath500 , @xmath487^t$ ] , @xmath501^t$ ] and @xmath502^t$ ] .",
    "intuitively , we know that the knowledge of both the inputs is unnecessary in order to have the full observability of the entire state . indeed , the first two state components can be directly obtained from the gps . by knowing these two components during a given time interval , we also know their time derivatives . in particular , we know @xmath503 and @xmath504 . from ( [ equationsimpleexampedynamicsc ] )",
    "we easily obtain : @xmath505 .",
    "hence , also the initial orientation is observable , by only using the gps measurements .",
    "let us proceed by applying the @xmath5 , discussed in section [ sectioneorc ] .",
    "we start by computing the codistribution @xmath506 in @xmath94 .",
    "we easily obtain :    @xmath507 , ~[0,~1,~0]\\}\\ ] ]    from this we know that @xmath390 and @xmath391 are weakly locally observable .",
    "we want to know if also @xmath392 is weakly locally observable ( in which case the entire state would be weakly locally observable ) .",
    "we have to compute @xmath508 in @xmath509 . for",
    ", we build the system @xmath509 .",
    "we have : @xmath510^t$ ] .",
    "we can easily obtain the analytical expression for the quantities appearing in ( [ equationextendedstateevolution ] ) .",
    "we have : @xmath511^t$ ] .",
    "we compute the analytical expression of the first - order lie derivatives along this vector filed .",
    "we have : @xmath512\\cdot [ \\cos\\theta_v v , ~\\sin\\theta_v v , ~\\omega , ~0 , ~0]=\\cos\\theta_v v$ ] ( similarly , we obtain @xmath513 ) .",
    "we obtain :    @xmath514 , [ 0,1,0 , 0,0],\\ ] ] @xmath515,[0,0,\\cos\\theta_v v , \\sin\\theta_v , 0]\\}\\ ] ]    from which we obtain that the gradient of @xmath392 belongs to @xmath508 .",
    "therefore , also @xmath392 is weakly locally observable and so the entire original state .      for the brevity sake",
    ", we do not provide here the computation necessary to deal with this problem .",
    "all the details are available in @xcite ( see also the work in @xcite for the definition of continuous symmetries ) . here",
    "we provide a summary of these results .",
    "first of all , we remark that the vi - sfm  problem can be described by a nonlinear system with six inputs ( 3 are the accelerations along the three axes , provided by the accelerometers , and 3 are the angular speeds provided by the gyroscopes ) .",
    "the outputs are the ones provided by the vision . in the simplest case of a single point feature , they consist of the two bearing angles of this point feature in the camera frame .",
    "we analyzed the following three cases :    1 .",
    "camera extrinsically calibrated , only one input known ( corresponding to the acceleration along a single axis ) ; 2 .",
    "camera extrinsically uncalibrated , only one input known ( corresponding to the acceleration along a single axis ) ; 3 .",
    "camera extrinsically uncalibrated , two inputs known ( corresponding to the acceleration along two orthogonal axes ) .",
    "the dimension of the original state is @xmath516 in the first case and @xmath517 in the other two cases .",
    "additionally @xmath164 and @xmath518 in the first two cases while @xmath484 and @xmath519 in the last case .    in @xcite",
    "we prove that the observability properties of vi - sfm  do not change by removing all the three gyroscopes and one of the accelerometers .",
    "in other words , exactly the same properties hold when the sensor system only consists of a monocular camera and two accelerometers . to achieve this result",
    ", we computed the lie derivatives up to the second order for the third case mentioned above . by removing a further accelerometer ( i.e. , by considering the case of a monocular camera and a single accelerometer )",
    "the system loses part of its observability properties .",
    "in particular , the distribution @xmath520 , @xmath521 , contains a single vector .",
    "this vector describes a continuous symmetry that is the invariance under the rotation around the accelerometer axis .",
    "this means that some of the internal parameters that define the extrinsic camera calibration , are no longer identifiable .",
    "although this symmetry does not affect the observability of the absolute scale and the magnitude of the velocity , it reflects in an indistinguishability of all the initial speeds that differ for a rotation around the accelerometer axis .",
    "on the other hand , if the camera is extrinsically calibrated ( i.e. , if the relative transformation between the camera frame and the accelerometer frame is known ( first case mentioned above ) ) this invariance disappears and the system still maintains full observability , as in the case of three orthogonal accelerometers and gyroscopes .",
    "the analysis of this system ( the first case mentioned above ) has been done in the extreme case when only a single point feature is available .",
    "this required to significantly augment the original state .",
    "in particular , in @xcite we compute all the lie derivatives up to the @xmath522 order , i.e. , we included in the original state the 5 unknown inputs together with their time - derivatives up to the six order .",
    "we prove that the gradient of any component of the original state , with the exception of the yaw angle , is orthogonal to the distribution @xmath523 , @xmath524 ( see the computational details in @xcite ) .",
    "in this paper we investigated the problem of nonlinear observability when part ( or even all ) of the system inputs is unknown .",
    "we made the assumption that the unknown inputs are differentiable functions of time ( up to a given order ) .",
    "the goal was not to design new observers but to provide simple analytic conditions in order to check the weak local observability of the state .",
    "an unknown input was also called disturbance .",
    "the analysis started by extending the observability rank condition .",
    "this was obtained by a state augmentation and was called the extended observability rank condition . in general , by further augmenting the state , the observability properties of the original state also increase . as a result",
    ", the extended observability rank condition only provides a sufficient condition for the weak local observability of the original state since the state augmentation can be continued indefinitely .",
    "additionally , the computational cost demanded to obtain the observability properties through the extended observability rank condition , dramatically depends on the dimension of the augmented state . for these reasons",
    ", we focused our investigation on the following two fundamental issues .",
    "the former consisted in understanding if there exists a given augmented state such that , by further augmenting the state , the observability properties of the original state provided by the extended observability rank condition remain unvaried .",
    "the latter consisted in understanding if it is possible to derive the observability properties of the original state by computing a codistribution defined in the original space , namely a codistribution consisting of covectors with the same dimension of the original state .",
    "both these issues have been fully addressed in the case of a single unknown input . in this case",
    ", we provided an analytical method to operate a separation on the codistribution computed by the extended observability rank condition , i.e. , the codistribution defined in the augmented space .",
    "thanks to this separation , we introduced a method able to obtain the observability properties by simply computing a codistribution that is defined in the original space ( theorem [ theoremseparation ] ) .",
    "the new codistribution is defined recursively by a very simple algorithm .",
    "specifically , the algorithm in definition [ definitionomega ] in section [ sectionseparation ] ( for the case of a single known input ) and in definition [ definitionomegae ] in section [ sectionextension ] ( for the case of multiple known inputs ) .",
    "hence , the overall method to obtain all the observability properties is very simple . on the other hand",
    ", the analytic derivations required to prove the validity of this separation are complex and we are currently extending them to the multiple unknown inputs case . finally , we showed that the recursive algorithm converges in a finite number of steps and we also provided the criterion to establish if the algorithm has converged ( theorem [ theoremstop ] ) . also this proof is based on several tricky and complex analytical steps .    both theorems [ theoremseparation ] and [ theoremstop ]",
    "have first been proved in the case of a single known input ( sections [ sectionseparation ] and [ sectionstop ] ) but in section [ sectionextension ] their validity was extended to the case of multiple known inputs .",
    "f. a. w. belo , p. salaris , and a. bicchi , 3 known landmarks are enough for solving planar bearing slam and fully reconstruct unknown inputs , the 2010 ieee / rsj international conference on intelligent robots and systems october 18 - 22 , 2010 , taipei , taiwan    a. berthoz , b. pavard and l.r .",
    "young , perception of linear horizontal self - motion induced by peripheral vision basic characteristics and visual - vestibular interactions , exp .",
    "brain res .",
    "23 , 471489 ( 1975 ) .",
    "darouach , m. , zasadzinski , m. , xu , s. j. ( 1994 ) .",
    "full - order observers for linear systems with unknown inputs .",
    "ieee transactions on automatic control , 39(3 ) dokka k. , macneilage p. r. , de angelis g. c. and angelaki d. e. , estimating distance during self - motion : a role for visual - vestibular interactions , journal of vision ( 2011 ) 11(13):2 , 1 - 16                        m. hou , p.c .",
    "mller design of observers for linear systems with unknown inputs ieee transactions on automatic control , 37 ( 6 ) ( 1992 ) .",
    "isidori a. , nonlinear control systems , 3rd ed . , springer verlag , 1995 .",
    "e. jones and s. soatto , `` visual - inertial navigation , mapping and localization : a scalable real - time causal approach '' , the international journal of robotics research , vol .",
    "4 , pp . 407430 , apr",
    ". 2011 .",
    "d. koening , b. marx , d. jacquet unknown input observers for switched nonlinear discrete time descriptor system ieee transactions on automatic control , 53 ( 1 ) ( 2008 ) .",
    "d. g. kottas , j. a. hesch , s. l. bowman , and s. i. roumeliotis , on the consistency of vision - aided inertial navigation , in proc . of the int .",
    "symposium on experimental robotics , canada , jun 2012 .",
    "a. martinelli , vision and imu data fusion : closed - form solutions for attitude , speed , absolute scale and bias determination , ieee transactions on robotics , volume 28 ( 2012 ) , issue 1 ( february ) , pp 4460 .",
    "mirzaei f.m . and",
    "roumeliotis s.i . , a kalman filter - based algorithm for imu - camera calibration : observability analysis and performance evaluation , transactions on robotics , 2008 , vol .",
    "24 , no . 5 , 11431156"
  ],
  "abstract_text": [
    "<S> this paper investigates the unknown input observability problem in the nonlinear case under the assumption that the unknown inputs are differentiable functions of time ( up to a given order ) . </S>",
    "<S> the goal is not to design new observers but to provide simple analytic conditions in order to check the weak local observability of the state . </S>",
    "<S> the analysis starts by extending the observability rank condition . </S>",
    "<S> this is obtained by a state augmentation and is called the extended observability rank condition ( first contribution ) . </S>",
    "<S> the proposed extension of the observability rank condition only provides sufficient conditions for the state observability . on the other hand , in the case of a single unknown input </S>",
    "<S> , the paper provides a simple algorithm to directly obtain the entire observable codistribution ( second and main contribution ) . as in the standard case of only known inputs , </S>",
    "<S> the observable codistribution is obtained by recursively computing the lie derivatives along the vector fields that characterize the dynamics . </S>",
    "<S> however , in correspondence of the unknown input , the corresponding vector field must be suitably rescaled . </S>",
    "<S> additionally , the lie derivatives must be computed also along a new set of vector fields that are obtained by recursively performing suitable lie bracketing of the vector fields that define the dynamics . in practice , </S>",
    "<S> the entire observable codistribution is obtained by a very simple recursive algorithm . however , </S>",
    "<S> the analytic derivations required to prove that this codistribution fully characterizes the weak local observability of the state are complex . finally , it is shown that the recursive algorithm converges in a finite number of steps and the criterion to establish that the convergence has been reached is provided . also this proof is based on several tricky analytical steps . </S>",
    "<S> several applications illustrate the derived theoretical results , both in the case of a single unknown input and in the case of multiple unknown inputs .    </S>",
    "<S> * keywords : * nonlinear observability ; unknown input observability ; </S>"
  ]
}