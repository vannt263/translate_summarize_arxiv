{
  "article_text": [
    "hecke operators play a central rle in the theory of automorphic forms . for classical modular forms , they are also computationally well understood .",
    "the theory of arithmetic quotients of the bruhat - tits tree as studied by serre in @xcite allowed to study hecke operator over @xmath5-adic fields by geometric methods . in this paper",
    ", we consider how to compute with hecke operators for automorphic forms on @xmath6 over a global function field .",
    "our theory can be understood as a global counterpart to serre s viewpoint over @xmath5-adic fields .",
    "there are a few applications of serre s theory to automorphic forms over global fields , which , however , mainly concentrate on rational function fields ( cf .",
    "@xcite , @xcite and @xcite ) .",
    "the key ingredient of this application is the strong approximation property of @xmath7 , as we will explain below .",
    "we begin with reminding the reader of the definition of a bruhat - tits tree .",
    "though this paper is independent from serre s book @xcite , we review some aspects of it since the global theory ( as developed in this paper ) and the local approach ( as in serre s book ) go hand in hand . in later parts of the paper",
    ", we make a few remarks pointing out the connections with or the differences to serre s theory .",
    "let @xmath2 be a global function field and @xmath8 be a fixed place .",
    "we denote by @xmath9 the completion of @xmath2 at @xmath8 , by @xmath10 its integers , by @xmath11 a uniformizer and by @xmath12 the cardinality of the residue field @xmath13 .",
    "the bruhat - tits tree @xmath14 of @xmath9 is a graph with vertex set @xmath15 .",
    "there is an edge between two cosets @xmath16 $ ] and @xmath17 $ ] if and only if @xmath17 $ ] contains @xmath18 or @xmath19 for some @xmath20 .",
    "note that this condition is symmetric in @xmath21 and @xmath22 , so @xmath14 is a geometric graph .",
    "in fact , @xmath14 is a @xmath23-regular tree .",
    "every subgroup of @xmath24 acts on @xmath14 by multiplication from the left .",
    "we shall be interested in the following case .",
    "let @xmath25 be the dedekind ring of all elements @xmath26 with @xmath27 for all places @xmath28 . put @xmath29 .",
    "serre investigates in @xcite the quotient graph @xmath30 .",
    "it is the union of a finite connected graph with a finite number of cusps .",
    "a cusp is an infinite graph of the form        and each cusp corresponds to an element of the class group of @xmath31 .",
    "an unramified automorphic form over @xmath9 can be interpreted as a function @xmath32 on the vertices of @xmath33 such that the space of functions generated by @xmath34 is finite - dimensional where the hecke operator @xmath35 is defined by the formula @xmath36 ) \\quad = \\quad \\sum_{\\substack{\\text{edges } e\\text { with origin } [ g]\\\\\\text{and terminus } [ g ' ] } } [ \\operatorname{stab\\,}_\\gamma([g]):\\operatorname{stab\\,}_\\gamma(e ) ] \\cdot f([g'])\\ ] ] for each coset @xmath16\\in{\\operatorname{pgl}_2(f_x )   \\ , / \\ , \\operatorname{pgl}_2(\\co_x ) } $ ] .",
    "the inclusion of @xmath24 as @xmath8-component into @xmath37 induces a map @xmath38 where @xmath39 is the maximal compact subring of the adeles @xmath40 of @xmath2 . in the case that @xmath2 is a rational function field ( as in @xcite , @xcite and @xcite ) , or , more generally , a function field with odd class number , and @xmath8 is a place of odd degree , this map is a bijection as a consequence of the strong approximation property of @xmath7 .",
    "the double coset space on the right hand side is the domain of automorphic forms over @xmath2 , and the bijection is equivariant with respect to the hecke operator @xmath35 and its global equivalent @xmath41 .    in this sense , it is possible to approximate automorphic forms in this case and use the theory from serre s book .",
    "however , the method of approximation breaks down if the function field has even class number or if the hecke operator of interest is attached to a place of even degree . for automorphic forms over any function field ( with possibly even class number ) or for the investigation of hecke operators at any place of a given function field respective a simultaneous description of all hecke operators , the method of strong approximation is thus insufficient , and we see the need of a global analogon , which is the starting point of this paper .",
    "the applications of this theory are primarily in explicit computations with automorphic forms .",
    "for instance in @xcite , graphs of hecke operators are used to calculate the dimensions of spaces of cusp forms and toroidal automorphic forms .",
    "from a more conceptual viewpoint , it might be fruitful to explore the connections between graphs of hecke operators and drinfel@xmath42d modules ; in particular , it might contribute to the langland s program since there is a generalisation of graphs of hecke operator to all reductive groups via adelic bruhat - tits buildings , which we forgo to explain here .",
    "we give an overview of the content of this paper . in section [ section_definitions ] , we introduce the graph of a hecke operator as a graph with weighted edges that encodes the action of a hecke operator on automorphic forms .",
    "this definition applies to every hecke operator of @xmath37 over a global field .",
    "we collect first properties of these graphs and describe , how the algebraic structure of the hecke algebra is reflected in dependencies between the graphs . in section [ section_unramified_hecke_operators ]",
    ", we describe the graph @xmath3 of the unramified hecke operators @xmath41 ( which correspond to the local hecke operators @xmath35 as introduced above ) in terms of coset representatives . in section [ section_bruhat - tits ]",
    ", we make the connection to bruhat - tits trees precise : each component of @xmath3 is a quotient of @xmath14 by a certain subgroup of @xmath24 , and the components of @xmath3 are counted by the @xmath4-torsion of the class group of @xmath31 . in section [ section_vertex_labelling ] , we associate to each vertex of @xmath3 a coset in @xmath43 where @xmath44 is the divisor class group of @xmath2 .",
    "we describe how these labels are distributed in @xmath3 in dependence of @xmath8 .    in section [ section_geometric_interpretation ] ,",
    "we give the vertices and edges of @xmath3 a geometric meaning following ideas connected to the geometric langland s program .",
    "namely , the vertices correspond to the isomorphism classes of @xmath45-bundles on the smooth projective curve @xmath0 with function field @xmath2 , and the edges correspond to certain exact sequences of sheaves on @xmath0 . in section [ section_vertices ] , we distinguish three classes of rank @xmath4 bundles : those that decompose into a sum of two line bundles , those that are the trace of a line bundle over the quadratic constant extension @xmath46 of @xmath0 and those that are geometrically indecomposable .",
    "this divides the vertices of @xmath3 into three subclasses @xmath47 , @xmath48 and @xmath49 . the former two sets of vertices have a simple description in terms of the divisor class groups of @xmath0 and @xmath46 .    in section [ section_reduction_theory ]",
    ", we introduce the integer valued invariant @xmath50 on the set of vertices , which is closely connected to reduction theory of rank @xmath4 bundles .",
    "this helps us to refine our view on the vertices : @xmath48 and @xmath49 are contained in the finite set of vertices @xmath51 with @xmath52 where @xmath53 is the genus of @xmath0 . in section [ section_nucleus_and_cusps ] .",
    "we describe the edges between vertices : @xmath3 decomposes into a finite graph , which depends heavily on the arithmetic of @xmath2 , and class number many cusps , which are infinite weighted subgraphs of the form        we conclude this section with a summary of results on @xmath3 and illustrate them in figure [ figure_genstr ] .    in section [ section_automorphic_forms ] ,",
    "we explain , how abstract properties of unramified automorphic forms  with name , the compact support of cusp forms and eigenvalue equations for eisenstein series  lead to an explicit description of them as functions on the vertices of the graphs @xmath3 . in section [ section_finite - dimensionality ] , we show that the spaces of functions on @xmath54 that satisfy the cuspidal respective toroidal condition are finite dimensional .",
    "in particular , these spaces of functions contain only automorphic forms .    in appendix [ appendix_examples ]",
    ", we give a series of examples for a rational function field : @xmath3 for @xmath55 , the graphs of @xmath56 and @xmath57 for @xmath58 and the graphs of two ramified hecke operators .",
    "we give short explanations on how to calculate these examples .",
    "* acknowledgements : * this paper is extracted from my thesis @xcite . first of all",
    ", i would like to thank gunther cornelissen for his advice during my graduate studies .",
    "i would like to thank frits beukers and roelof bruggeman for their numerous comments on a lecture series about my studies .",
    "in this section , we set up the notations that are used throughout the paper and introduce the notion of a graph of a hecke operator . we collect first properties of these graphs and describe how the algebraic structure of the hecke algebra is reflected in dependencies between the graphs of different hecke operators .",
    "let @xmath59 be a prime power and @xmath2 be the function field of a smooth projective curve @xmath0 over @xmath1 .",
    "let @xmath60 the set of closed points of @xmath0 , which we identify with the set of places of @xmath2 .",
    "we denote by @xmath9 the completion of @xmath2 at @xmath61 and by @xmath10 the integers of @xmath9 .",
    "we choose a uniformizer @xmath62 for every place @xmath8 .",
    "let @xmath63 be the residue field .",
    "let @xmath64 be the degree of @xmath8 and let @xmath65 be the cardinality of @xmath66 .",
    "we denote by @xmath67 the absolute value on @xmath9 resp .",
    "@xmath2 such that @xmath68 .",
    "let @xmath40 be the adele ring of @xmath2 and @xmath69 the idele group",
    ". put @xmath70 where the product is taken over all places @xmath8 of @xmath2 .",
    "the idele norm is the quasi - character @xmath71 that sends an idele @xmath72 to the product @xmath73 over all local norms . by the product formula",
    ", this defines a quasi - character on the idele class group @xmath74 .",
    "let @xmath75 .",
    "following the habit of literature about automorphic forms , we will often write @xmath76 instead of @xmath77 for the group of adelic points and @xmath78 instead of @xmath79 for the group of @xmath2-valued points , et cetera . note that @xmath76 comes together with an adelic topology that turns @xmath76 into a locally compact group .",
    "let @xmath80 be the standard maximal compact open subgroup of @xmath76 .",
    "we fix the haar - measure on @xmath76 for which @xmath81 .",
    "the _ hecke algebra @xmath82 for @xmath76 _ is the complex vector space of all compactly supported locally constant functions @xmath83 together with the convolution product @xmath84 a hecke operator @xmath85 acts on the space @xmath86 of continuous functions @xmath87 by the formula @xmath88 let @xmath89 be a compact open subgroup of @xmath76 .",
    "then we denote by @xmath90 the subalgebra of @xmath82 that consists of all bi-@xmath89-invariant functions .",
    "the above action restricts to an action of @xmath90 on @xmath91 , the space of right @xmath89-invariant functions .",
    "[ hecke_action_as_finite_sum ] for every @xmath89 and every @xmath92 , there are @xmath93 and @xmath94 for some integer @xmath95 such that for all @xmath96 and all @xmath97 , @xmath98    since @xmath99 is @xmath89-bi - invariant and compactly supported , it is a finite linear combination of characteristic functions on double cosets of the form @xmath100 with @xmath101 .",
    "so we may reduce the proof to @xmath102 . again , since @xmath100 is compact , it equals the union of a finite number of pairwise distinct cosets @xmath103 , and thus @xmath104 for arbitrary @xmath96 .",
    "we will write @xmath16\\in{g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k ' } $ ] for the class that is represented by @xmath96 .",
    "other cosets will also occur in this paper , but it will be clear from the context what kind of class the square brackets relate to .    for all @xmath105 and @xmath16\\in { g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k ' } $ ] , there is a unique set of pairwise distinct classes @xmath106,\\ldots,[g_r ] \\in { g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k ' } $ ] and numbers @xmath107 such that for all @xmath97 , @xmath108    uniqueness is clear , and existence follows from lemma [ hecke_action_as_finite_sum ] after we have taken care of putting together values of @xmath32 in same classes of @xmath109 and excluding the zero terms .    [ def_graph ] with the notation of the preceding proposition",
    "we define @xmath110 ) = \\{([g],[g_i],m_i)\\}_{i=1,\\ldots , r } \\;.\\ ] ] the classes @xmath111 $ ] are called the _ @xmath99-neighbours of @xmath16",
    "$ ] ( relative to @xmath89 ) _ , and the @xmath112 are called their _ weights_.    the _ graph @xmath113 of @xmath99 ( relative to @xmath89 ) _ consists of vertices @xmath114 and oriented weighted edges @xmath115    the usual notation for an edge in a graph with weighted edges consists of pairs that code the origin and the terminus , and an additional function on the set of edges that gives the weight . for our purposes , it is more convenient to replace the set of edges by the graph of the weight function and to call the resulting triples that consist of origin , terminus and the weight the edges of @xmath113 .",
    "we make the following drawing conventions to illustrate the graph of a hecke operator : vertices are represented by labelled dots , and an edge @xmath116 together with its origin @xmath51 and its terminus @xmath117 is drawn as        if there is precisely one edge from @xmath51 to @xmath117 and precisely one from @xmath117 to @xmath51 , which we call the inverse edge , we draw @xmath118 there are various examples for rational function fields in appendix [ appendix_examples ] , and in @xcite , one finds graphs of hecke operators for elliptic function fields .",
    "[ read_off_hecke ] we collect some properties that follow immediately from the definition of a graph of a hecke operator @xmath99 . for @xmath97 and @xmath16\\in { g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k ' } $ ]",
    ", we have that @xmath119,[g'],m')\\\\ \\in \\operatorname{edge\\,}\\cg_{\\phi , k'}\\end{subarray } } m ' f(g ' ) \\;.\\ ] ] hence one can read off the action of a hecke operator on @xmath97 from the illustration of the graph :        since @xmath120 , with @xmath89 running over all compact opens in @xmath76 , the notion of the graph of a hecke operator applies to any @xmath85 .",
    "the set of vertices of the graph of a hecke operator @xmath92 only depends on @xmath89 , and only the edges depend on the particular chosen @xmath99 .",
    "there is at most one edge for each two vertices and each direction , and the weight of an edge is always non - zero .",
    "each vertex is connected with only finitely many other vertices .",
    "[ algebra_strucure_in_graphs ] the algebra structure of @xmath90 has the following implications on the structure of the set of edges ( with the convention that the empty sum is defined as @xmath121 ) .",
    "for the zero element @xmath122 , the multiplicative unit @xmath123 , and arbitrary @xmath124 , @xmath125 we obtain that @xmath126 if @xmath127 and @xmath92 , then also @xmath128 .",
    "this implies that we have a canonical map @xmath129 , which is given by @xmath130 and @xmath131    [ associated_matrix ] one can also collect the data of @xmath113 in an infinite - dimensional matrix @xmath132 , which we call _ the matrix associated to @xmath113 _ , by putting @xmath133 if @xmath134 , and @xmath135 otherwise .",
    "thus each row and each column has only finitely many non - vanishing entries .",
    "the properties of the last paragraph imply : @xmath136 let @xmath137 be the ideal of operators that act trivially on @xmath138 , then we may regard @xmath139 as a subalgebra of the algebra of @xmath140-linear maps @xmath141",
    "from now on we will restrict ourselves to unramified hecke operators , which means , elements in @xmath142 .",
    "in particular , we will investigate the graphs @xmath3 of certain generators @xmath41 of @xmath142 in more detail .",
    "consider the uniformizers @xmath62 as ideles via the embedding @xmath143 and define for every place @xmath8 the unramified hecke operator @xmath41 as the characteristic function of @xmath144 .",
    "it is well - known that @xmath145_{x\\in{\\left| x \\right|}}$ ] as an algebra , which means , in particular , that @xmath142 is commutative . by the relations from paragraph [ algebra_strucure_in_graphs ] ,",
    "it is enough to know the graphs of generators to determine all graphs of unramified hecke operators .",
    "we use the shorthand notation @xmath3 for the graph @xmath146 , and @xmath147 for the @xmath41-neighbours @xmath148 of @xmath51 .",
    "we introduce the _ `` lower @xmath8 convention '' _ that says that a lower index @xmath8 on an algebraic group defined over the adeles of @xmath2 will consist of only the component at @xmath8 of the adelic points , for example , @xmath149 .",
    "analogously , we put @xmath150 .",
    "the _ `` upper @xmath8 convention '' _ means that an upper index @xmath8 on an algebraic group defined over the adeles of @xmath2 will consist of all components except for the one at @xmath8 . in particular , we first define @xmath151 , the restricted product relative to @xmath152 over all places @xmath153 that do not equal @xmath8 .",
    "another example is @xmath154 .",
    "we put @xmath155 .",
    "[ def_xi_w ] we embed @xmath66 via @xmath156 , thus an element @xmath157 will be considered as the adele whose component at @xmath8 is @xmath158 and whose other components are @xmath121 . let @xmath45 be the projective line . define for @xmath159 , @xmath160\\hspace{0,5 cm } \\text{and } \\hspace{0,5 cm } \\xi_w \\ = \\ \\smallmat 1 { } { } \\pi_x \\quad \\textrm{if } w=[0:1].\\ ] ] it is well - known ( cf .",
    "* lemma 3.7 ) ) that the domain of @xmath41 can be describe as @xmath161 consequently the weights of edges in @xmath3 are positive integers ( recall that @xmath81 ) .",
    "we shall also refer to the weights as the _ multiplicity _ of a @xmath41-neighbour .",
    "the above implies the following .",
    "[ phi_x_neighbours ] the @xmath41-neighbours of @xmath16 $ ] are the classes @xmath162 $ ] with @xmath163 as in the previous lemma , and the multiplicity of an edge from @xmath16 $ ] to @xmath17 $ ] equals the number of @xmath159 such that @xmath162=[g']$ ] .",
    "the multiplicities of the edges originating in @xmath16 $ ] sum up to @xmath164 .",
    "fix a place @xmath8 . in this section",
    "we construct maps from bruhat - tits trees to @xmath3 .",
    "this will enable us to determine the components of @xmath3 .",
    "[ def_bruhat - tits ] the _ bruhat - tits tree _",
    "@xmath14 for @xmath9 is the ( unweighted ) graph with vertices @xmath165 and edges @xmath166,[g'])\\mid\\exists w\\in\\pp^1(\\kappa_x ) , \\",
    "g'\\xi_w \\pmod{k_x}\\ \\ } \\;.\\ ] ]    [ psi_x ] consider @xmath167 to be embedded in @xmath76 as the component at @xmath8 .",
    "for each @xmath101 , we define a map @xmath168 by @xmath169 \\ \\ \\ \\            & \\longmapsto      & \\ \\ \\   [ hg ] \\end{array}\\ ] ] and @xmath170,[g ' ] )       & \\longmapsto      & ( [ hg],[hg'],m ) \\end{array}\\ ] ] with @xmath171 being the number of vertices @xmath172 $ ] that are adjacent to @xmath16 $ ] in @xmath14 such that @xmath173)=\\psi_{x , h}([g'])$ ] .    by proposition [ phi_x_neighbours ] and the definition of a bruhat - tits tree",
    ", @xmath174 is well - defined and _ locally surjective _ , i.e.  it is locally surjective as a map between the associated simplicial complexes of @xmath14 and @xmath3 with suppressed weights .",
    "since bruhat - tits trees are indeed trees ( ( * ? ? ?",
    "* ii.1 , thm .  1 ) ) , hence in particular connected , the image of each @xmath174 is precisely one component of @xmath3 , i.e.  a subgraph that corresponds to a connected component of the associated simplicial complex .    [ sym_edges ] every edge of the bruhat - tits tree has an inverse edge , which implies the analogous statement for the graphs @xmath3 .",
    "namely , if @xmath175 , then there is a @xmath176 such that @xmath177 .",
    "this symmetry of edges is a property that is particular to unramified hecke operators for @xmath178 . in case of ramification ,",
    "the symmetry is broken , cf .",
    "example [ ramification_example ] .",
    "the algebraic group @xmath7 has the _ strong approximation property _ , i.e.  for every place @xmath8 , @xmath179 is a dense subset of @xmath180 with respect to the adelic topology .",
    "this was proven by kneser ( @xcite ) for number fields and was extended independently by prasad ( @xcite ) and margulis ( @xcite ) to global fields .",
    "see ( * ? ? ?",
    "e.2.1 ) for a direct reference . we explain , which implication this has on @xmath6 .",
    "more detail for the outline in this paragraph can be found in ( * ? ? ?",
    "* ( 2.1.3 ) ) .    [ decomposition_gamma_skg_x ]",
    "let @xmath8 be a place of degree @xmath181 .",
    "in accordance to the the upper @xmath8 convention , let @xmath152 .",
    "the determinant map on @xmath182 induces a bijection on double cosets : @xmath183 the quotient group @xmath184 is nothing else but the ideal class group @xmath185 of the _",
    "integers @xmath186 coprime to @xmath8_. let @xmath187 be the divisor class group of @xmath2 and @xmath188\\in\\operatorname{cl}f|\\deg a=0\\}$ ] be the ideal class group .",
    "then we have bijections @xmath189 let @xmath190 be a set of representatives for @xmath191 .",
    "then every @xmath192 ( with @xmath193 and @xmath194 ) , there are @xmath195 , @xmath196 and @xmath197 such that @xmath198 where @xmath199 equals @xmath21 in all components @xmath200 and @xmath201 .",
    "the condition @xmath202=[\\det g^x]$ ] as cosets in @xmath184 implies that @xmath195 is uniquely determined by @xmath203 .",
    "let @xmath204 be the center of @xmath182 , then @xmath205 define @xmath206 .",
    "then we obtain the following ( cf .",
    "* ( 2.1.3 ) ) ) .",
    "[ strong_approx ] the decomposition @xmath207 induces a bijective map @xmath208 \\                  & \\longmapsto    & ( s,[\\tilde g_x ] ) \\end{aligned}\\ ] ] its inverse is obtained by putting together the components @xmath209 and @xmath210 .",
    "[ comp_with_serre ] on the right hand side of the bijection in proposition [ strong_approx ] , we have a finite union of quotients of the form @xmath211 .",
    "if @xmath212 is the identity element @xmath213 , then @xmath214 is an arithmetic group of the form that serre considers in ( * ? ? ?",
    "* ii.2.3 ) . for general @xmath212 , however , i am not aware of any results about @xmath211 in the literature .",
    "[ action_of_centrum ] so far , we have only divided out the action of the @xmath8-component @xmath215 of the centre . we still have to consider the action of @xmath216 .",
    "if we restrict the determinant map to the centre and write @xmath217 , then we have an exact sequence of abelian groups @xmath218 let @xmath219 be as in paragraph [ decomposition_gamma_skg_x ] . the action of @xmath216 on @xmath219 factors through @xmath220 and the action of @xmath216 on @xmath211 factors through @xmath221 for each @xmath195 .",
    "if we let @xmath222 be a set of representatives for @xmath223 ( with respect to the determinant map ) , and @xmath224 $ ] the cardinality of the @xmath4-torsion , then we obtain :    [ strong_approx+comp ] the decomposition @xmath207 induces a bijective map",
    "@xmath225 the inverse maps an element @xmath226)$ ] to the class of the adelic matrix with components @xmath227 and @xmath210 .",
    "the number of components of @xmath3 equals @xmath228 = \\left\\ { \\begin{array}{ll } h_2   & \\textrm{if } \\deg x\\textrm { is odd,}\\\\ 2h_2 & \\textrm{if } \\deg x\\textrm { is even . } \\end{array}\\right.\\ ] ]    everything follows from proposition [ strong_approx ] and paragraph [ action_of_centrum ] except for the two equalities in the last line . regarding",
    "the former , observe that both dividing out the squares and taking @xmath4-torsion commutes with products , so by the structure theorem of finite abelian groups , we can reduce the proof to groups of the form @xmath229 with @xmath230 prime .",
    "if @xmath231 , then every element is a square and there is no @xmath4-torsion , hence the equality holds .",
    "if @xmath232 , then @xmath229 modulo squares has one nontrivial class , and there is exactly one nontrivial element in @xmath229 that is @xmath4-torsion .",
    "regarding the latter equality , we have that @xmath233 , where @xmath234 .",
    "as above , @xmath235 modulo squares has a nontrivial class if and only if @xmath181 is even , and in this case there is only one such class .",
    "in this section , we associate to each vertex of @xmath3 an element of @xmath236 and determine how these labels are distributed over the components of @xmath3 .",
    "let @xmath237 be the subgroup of squares .",
    "we look once more at the determinant map @xmath238 this map assigns to every vertex in @xmath3 a label in @xmath236 .",
    "note that @xmath43 has @xmath239 elements where @xmath224 $ ] for the same reason as used in the proof of proposition [ strong_approx+comp ] .",
    "if the prime divisor @xmath8 is a square in the divisor class group then all vertices in the same component of @xmath3 have the same label , and there are @xmath239 components , each of which has a different label . otherwise , the vertices of each component have one of two labels that differ by @xmath8 in @xmath236 , and two adjacent vertices have different labels , so each connected component is bipartite .",
    "first of all , observe that each label is realised , since if we represent a label by some idele @xmath240 , then the vertex represented by @xmath241 has this label .",
    "let @xmath242 and @xmath243 , a group isomorphic to @xmath244 .",
    "for the bruhat - tits tree @xmath14 , the determinant map @xmath245 defines a labelling of the vertices , and the two classes of @xmath246 are represented by @xmath247 and @xmath248 .",
    "two adjacent vertices have the different labels since for @xmath249 and @xmath163 as in definition [ def_bruhat - tits ] , @xmath250 represents a class different from @xmath251 in @xmath252",
    ".    define for @xmath253 a map @xmath254 by @xmath255)=[ab]$ ] , where @xmath158 is viewed as the idele concentrated in @xmath8 . for every @xmath101 we obtain a commutative diagram @xmath256 \\ar@{}|{\\displaystyle = } [ r ] & { g_x   \\ , / \\",
    ", k_x } \\ar[d]^{\\det } \\ar[r]^{\\psi_{x , h}\\hspace{0.35 cm } } & { g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k } \\ar[d]^{\\det } \\ar@{}|{\\displaystyle = } [ r ] & \\operatorname{vert\\,}\\cg_x \\ar[d ] \\\\                { \\operatorname{cl}f_x   \\ , / \\",
    ", 2\\operatorname{cl}f_x } \\ar@{}|{\\displaystyle \\simeq}[r ] & { f_x^\\times   \\ , / \\ , \\co_x^\\times \\cq_x } \\ar[r]^{\\psi_{x,\\det h}\\hspace{0.35 cm } } & { f^\\times \\,\\backslash\\ , \\aa^\\times \\,/\\ , \\co_\\aa^\\times \\cq_\\aa } \\ar@{}|{\\displaystyle \\simeq}[r ]   & { \\operatorname{cl}f   \\ , / \\ , 2\\operatorname{cl}f }                                                                        \\;. } \\ ] ] this means that vertices with equal labels map to vertices with equal labels .",
    "each component of @xmath3 lies in the image of a suitable @xmath174 , thus has at most two labels . on the other hand , the two labels of @xmath14 map to @xmath257)=[a]$ ] and @xmath258)=[a\\pi_x]$ ] .",
    "the divisor classes of @xmath259 $ ] and @xmath260 $ ] differ by the class of the prime divisor @xmath8 , and are equal if and only if @xmath8 is a square in the divisor class group .",
    "if so , according to proposition [ strong_approx+comp ] , there must be @xmath239 components so that the @xmath239 labels are spread over all components .",
    "if @xmath8 is not a square then by the local surjectivity of @xmath174 on edges two adjacent vertices of @xmath3 also have different labels .",
    "a fundamental observation in the geometric langland s program ( for @xmath6 , in this case ) is that the domain of automorphic forms ( with a certain ramification level ) corresponds to the isomorphism classes of @xmath45-bundles ( with a corresponding level structure ) .",
    "the action of hecke operators can be given a geometric meaning , which makes it possible to let algebraic geometry enter the field .",
    "we will use this geometric view point for a closer examination of the graphs of unramified hecke operators .",
    "we begin with recalling the geometric interpretation of unramified hecke operators . for more reference ,",
    "see @xcite .",
    "let @xmath261 be the structure sheaf of the smooth projective curve @xmath0 and @xmath262 the generic point .",
    "we can identify the stalks @xmath263 of the structure sheaf @xmath261 at closed points @xmath264 and their embeddings into the generic stalk @xmath265 with @xmath266    [ det_and_deg ] we identify vector bundles on @xmath0 with the corresponding locally free sheaf ( ( * ? ? ?",
    "ii.5.18 ) ) .",
    "we denote by @xmath267 the set of isomorphism classes of _ rank @xmath268 bundles _ over @xmath0 and by @xmath269 the _ picard group_. for @xmath270 , we use the shorthand notation @xmath271 for @xmath272 .",
    "the group @xmath269 acts on @xmath267 by tensor products .",
    "let @xmath273 be the orbit set @xmath274 , which is nothing else but the set of isomorphism classes of @xmath275-bundles over @xmath0 ( ( * ? ? ?",
    "ii.7.10 ) ) .",
    "we will call the elements of @xmath276 _ projective line bundles_. if we regard the total space of a projective line bundle as a scheme , then we obtain nothing else but a ruled surface , cf .",
    "thus @xmath276 may also be seen as the set of isomorphism classes of ruled surfaces over @xmath0 .",
    "if two vector bundles @xmath277 and @xmath278 are in the same orbit of the action of @xmath269 , we write @xmath279 and say that @xmath277 and @xmath278 are _ projectively equivalent_. by @xmath280\\in\\pbun_2x$ ] , we mean the class that is represented by the rank @xmath4 bundle @xmath281 .",
    "let @xmath282 be the divisor group of @xmath0 .",
    "every divisor @xmath283 defines the _ associated line bundle _ @xmath284 , which defines an isomorphism @xmath285 of groups ( ( * ? ? ?",
    "ii.6.13 ) ) .",
    "the degree @xmath286 of a vector bundle @xmath281 with @xmath287 is defined as @xmath288 . for a torsion sheaf @xmath289 ,",
    "the degree is defined by @xmath290 .",
    "the degree is additive in short exact sequences .",
    "note that if @xmath291 is a prime divisor , the notation for the associated line bundle @xmath292 coincides with the notation for the stalk of @xmath293 at @xmath8 . in order to avoid confusion",
    ", we will reserve the notation @xmath292 strictly for the associated line bundle . in case",
    "we have to consider the stalk of a line bundle , we will use a symbol different from @xmath293 for the line bundle .",
    "[ gl_n - bun_n][bundle_to_gl_n ] we associate to every @xmath294 the rank @xmath4 bundle @xmath295 that is defined by the embeddings @xmath296 of the stalks @xmath297 at closed points @xmath8 into the generic stalk @xmath298 . this association induces a bijection @xmath299 }               & \\longmapsto                     & \\cm_g       \\end{array}\\ ] ] such that @xmath300 for @xmath253 , and @xmath301 .",
    "consequently , there is a bijection @xmath302 which allows us to identify the vertex set @xmath303 with @xmath304 .",
    "[ def_ck_x ] the next task is to describe edges of @xmath3 in geometric terms .",
    "we say that two exact sequences of sheaves @xmath305 are _ isomorphic with fixed @xmath289 _ if there are isomorphisms @xmath306 and @xmath307 such that @xmath308&{\\cf_1}\\ar[r]\\ar[d]^\\simeq&{\\cf}\\ar[r]\\ar@{=}[d]&{\\cf'_1}\\ar[r]\\ar[d]^\\simeq&0\\\\ 0\\ar[r]&{\\cf_2}\\ar[r]&{\\cf}\\ar[r]&{\\cf'_2}\\ar[r]&0}\\ ] ] commutes .",
    "let @xmath309 be the torsion sheaf that is supported at @xmath8 and has stalk @xmath66 at @xmath8 , where @xmath66 is the residue field at @xmath8 .",
    "fix a representative @xmath281 of @xmath280\\in\\pbun_2 x$ ] . then we define @xmath310,[\\cm'])$ ] as the number of isomorphism classes of exact sequences @xmath311&{\\cm''}\\ar[r]&{\\cm}\\ar[r]&{\\ck_x}\\ar[r]&0 } } \\;,\\ ] ] with fixed @xmath281 and with @xmath312 .",
    "this number is independent of the choice of the representative @xmath281 because for another choice , which would be a vector bundle of the form @xmath313 for some @xmath314 , we have the bijection @xmath315    let @xmath8 be a place . for a projective line bundle @xmath280\\in\\pbun_2x$ ] we define @xmath316 ) \\ = \\ \\left\\ { ( [ \\cm],[\\cm'],m ) \\ \\left|\\ m = m_x([\\cm],[\\cm'])\\neq0 \\right.\\right\\ } \\;,\\ ] ] and call the occurring @xmath317 $ ] the _ @xmath41-neighbours of @xmath280 $ ] _ , and @xmath310,[\\cm'])$ ] their _ multiplicity_.    [ geom_nb ] we shall show that this concept of neighbours is the same as the one defined for classes in @xmath318 ( definition [ def_graph ] ) .",
    "recall that in proposition [ phi_x_neighbours ] , we determined the @xmath41-neighbours of a class @xmath16\\in{g_f \\,\\backslash\\ , g_\\aa \\,/\\ , k } $ ] to be of the form @xmath162 $ ] for a @xmath159 .",
    "the elements @xmath163 define exact sequences @xmath319 & * ! <",
    "0pt,5pt>{\\prod\\limits_{y\\in{\\left| x \\right| } } \\co_{x , y}^2 } \\ar[r]^{\\xi_w } & * !",
    "< 0pt,5pt>{\\prod\\limits_{y\\in{\\left| x \\right| } } \\co_{x , y}^2 } \\ar[r ] & * !",
    "< 0pt,1pt>{\\ \\kappa_x } \\ar[r ] & 0 } \\;,\\ ] ] of @xmath1-modules and consequently an exact sequence @xmath319 & { \\cm_{g\\xi_w } } \\ar[r ] & { \\cm_g } \\ar[r ] & { \\ck_x } \\ar[r ] & 0 } \\;.\\ ] ] of sheaves , where @xmath320 and @xmath295 are the rank @xmath4 bundles associated to @xmath321 resp .",
    "this maps @xmath159 to the isomorphism class of @xmath322 with fixed @xmath295 . on the other hand ,",
    "as we have chosen a basis for the stalk at @xmath8 , each isomorphism class of sequences @xmath323 with fixed @xmath281 defines an element in @xmath324 , which gives back @xmath325 .",
    "[ geometric_neighbourhood ] thus for every @xmath264 , the map @xmath326 ) & \\longrightarrow & \\cu_x([\\cm_g ] ) \\\\        ( [ g],[g'],m )   & \\longmapsto      & ( [ \\cm_g],[\\cm_{g'}],m )       \\end{array}\\ ] ] is a well - defined bijection .",
    "we finally obtain the geometric description of the graph @xmath3 of @xmath41 .",
    "[ geometric_graph ] let @xmath264 . the graph @xmath3 of @xmath41 is described in geometric terms as @xmath327\\in\\pbun_2x } \\cu_x([\\cm ] ) \\;.",
    "\\mbox{\\qed }    \\end{aligned}\\ ] ]    [ connection_to_trees ] this interpretation shows that the graphs that we consider are a global version of the graphs of serre ( ( * ? ? ?",
    "* chapter ii.2 ) ) .",
    "we are looking at all rank @xmath4 bundles on @xmath0 modulo the action of the picard group of @xmath0 while serre considers rank @xmath4 bundles that trivialise outside a given place @xmath8 modulo line bundles that trivialise outside @xmath8 .",
    "as already explained in remark [ comp_with_serre ] , we obtain a projection of the graph of serre to the component of the trivial class @xmath328 .",
    "serre describes his graphs as quotients of bruhat - tits trees by the action of the group @xmath329 on both vertices and edges .",
    "this leads in general to multiple edges between vertices in the quotient graph , see e.g.  @xcite .",
    "this does not happen with graphs of hecke operators : there is at most one edge with given origin and terminus .",
    "relative to the action of @xmath330 on serre s graphs , one can define the weight of an edge as the order of the stabiliser of its origin in the stabiliser of the edge .",
    "the projection from serre s graphs to graphs of hecke operators identifies all the different edges between two vertices , adding up their weights to obtain the weight of the image edge .",
    "the aim of this section is to show that the set of isomorphism classes of projective line bundles over @xmath0 can be separated into subspaces corresponding to certain quotients of the the divisor class group of @xmath2 , the divisor class group of @xmath331 and geometrically indecomposable projective line bundles .",
    "we recall a series of facts about vector bundles .",
    "[ facts_on_vb ] a vector bundle @xmath281 is _ indecomposable _ if for every decomposition @xmath332 into two subbundles @xmath277 and @xmath278 , one factor is trivial and the other is isomorphic to @xmath281 .",
    "the krull - schmidt theorem holds for the category of vector bundles over @xmath0 , i.e.  every vector bundle @xmath281 on @xmath0 defined over @xmath1 has , up to permutation of factors , a unique decomposition into a direct sum of indecomposable subbundles , see ( * ? ? ?",
    "the map @xmath333 defines the _ inverse image _ or the _ constant extension _ of vector bundles @xmath334 the isomorphism classes of rank @xmath268 bundles that after extension of constants to @xmath335 become isomorphic to @xmath336 are classified by @xmath337 , cf .",
    "* section 1 ) .",
    "the algebraic group @xmath338 is an open subvariety of the connected algebraic group @xmath339 , and thus it is itself a connected algebraic group . as a consequence of lang s theorem ( ( * ? ? ?",
    "* cor .  to thm .  1 ) ) , we have @xmath340 .",
    "thus @xmath341 is injective . in particular",
    ", one can consider the constant extension to the geometric curve @xmath342 over an algebraic closure @xmath343 of @xmath1 .",
    "then two vector bundles are isomorphic if and only if they are geometrically isomorphic , i.e.  that their constant extensions to @xmath344 are isomorphic .",
    "we can therefore think of @xmath345 as a subset of @xmath346 and @xmath347 .",
    "on the other hand , @xmath348 defines the direct image or the _ trace _ of vector bundles @xmath349 we have for @xmath350 that @xmath351 and for @xmath352 that @xmath353 where @xmath354 ranges over @xmath355 and @xmath356 is defined by the stalks @xmath357 .",
    "we call a vector bundle _ geometrically indecomposable _ if its extension to @xmath344 is indecomposable . in (",
    "1.8 ) , it is shown that every indecomposable vector bundle over @xmath0 is the trace of an geometrically indecomposable bundle over some constant extension @xmath46 of @xmath0 .",
    "there are certain compatibilities of the constant extension and the trace with tensor products .",
    "namely , for a vector bundle @xmath281 and a line bundle @xmath293 over @xmath0 , we have @xmath358 and for a vector bundle @xmath359 over @xmath46 , @xmath360 .",
    "thus @xmath341 induces a map , denoted by the same symbol , @xmath361 }    & \\longmapsto      & [ p^\\ast\\cm ]       \\end{array}\\ ] ] and @xmath362 induces @xmath363 }        & \\longmapsto      & [ p_\\ast \\cm ]       \\end{array}\\ ] ]    [ labelling_vertices ] we look at the situation for @xmath364 and @xmath365 .",
    "let @xmath366 be the nontrivial automorphism of @xmath367 .",
    "the set @xmath276 is the disjoint union of the set of classes of decomposable rank @xmath4 bundles , i.e.  rank @xmath4 bundles that are isomorphic to the direct sum of two line bundles , and the set of classes of indecomposable bundles .",
    "we denote these sets by @xmath47 and @xmath368 , respectively .",
    "let @xmath369 be the subset of classes of geometrically indecomposable bundles . since the rank is @xmath4 , the complement @xmath370 consists of classes of traces @xmath371 of certain line bundles @xmath372 that are defined over the quadratic extension @xmath373 .",
    "more precisely , @xmath374 decomposes if and only if @xmath375 , and then @xmath376 .",
    "thus , we have a disjoint union @xmath377    for @xmath378\\in\\operatorname{cl}x$ ] , define @xmath379 \\ \\in \\ \\pbundec x \\;,\\ ] ] and for a @xmath378\\in\\operatorname{cl}x'$ ] , define @xmath380 \\ \\in \\",
    "\\pbuntr x \\cup \\ { c_0 \\ } \\;.\\ ] ] note that @xmath366 acts on @xmath381 in a way compatible with the identification @xmath382 .",
    "since @xmath383 for @xmath372 , and isomorphism classes of vector bundles are stable under constant extensions , we have @xmath384 .",
    "we derive the following characterisations of @xmath47 and @xmath48 :    [ char_pbundec ] @xmath385 }    & \\longmapsto      & c_d       \\end{array}\\ ] ] is surjective with fibres of the form @xmath386,[-d]\\}$ ] .",
    "let @xmath281 decompose into @xmath387 .",
    "then @xmath388 thus surjectivity follows .",
    "let @xmath389 represent the same projective line bundle as @xmath390 , then there is a line bundle @xmath391 such that @xmath392 and thus either @xmath393 and @xmath394 or @xmath395 and @xmath396 .",
    "hence @xmath397 $ ] equals either @xmath378 $ ] or @xmath398 $ ] .",
    "[ char_pbuntr ] @xmath399 }             & \\longmapsto      & t_d       \\end{array}\\ ] ] is surjective with fibres of the form @xmath386,[-d]\\}$ ] .    from the previous considerations it is clear that this map is well - defined and surjective .",
    "assume that @xmath400 , [ d_2]\\in\\operatorname{cl}x'$ ] have the same image , then there is a @xmath401 such that @xmath402 where we briefly wrote @xmath403 for @xmath404 .",
    "then in @xmath405 , we see that @xmath406 thus either @xmath407 , which implies that @xmath408 and @xmath409 represent the same class in @xmath410 , or @xmath411 , which means that @xmath408 represents the same class as @xmath412 . but in @xmath410 , @xmath413 \\",
    "= \\ [ \\ , \\underbrace{\\hspace{-0,2cm}\\begin{array}{c}\\vspace{-0,4cm}\\\\ \\sigma d_2+d_2\\\\ \\vspace{-0,4cm}\\end{array}\\hspace{-0,2cm}}_{\\in\\operatorname{cl}x } \\,-d_2 ] \\ = \\ [ -d_2 ] \\;.\\mbox{\\qedhere}\\ ] ]    [ injective_const_ext ] the constant extension restricts to an injective map @xmath414    since @xmath415 for a line bundle @xmath293 over @xmath46 , it is clear that the image is contained in @xmath416 .",
    "the images of @xmath47 and @xmath48 are disjoint since elements of the image of the latter set decompose into line bundles over @xmath46 that are not defined over @xmath0 .",
    "if we denote taking the inverse elements by @xmath417 , then by proposition [ char_pbundec ] , @xmath341 is injective restricted to @xmath47 because @xmath418 is . regarding @xmath48 ,",
    "observe that @xmath419 where by proposition [ char_pbuntr ] , @xmath420 represents an element in @xmath421 , and by proposition [ char_pbundec ] , @xmath422 represents an element in @xmath423 . if there are @xmath400 , [ d_2 ] \\in \\operatorname{cl}x'$ ] such that @xmath424 , then we have @xmath425 , and consequently @xmath426 \\in \\operatorname{cl}x$ ] .",
    "the constant extension also restricts to a map @xmath427 but this restriction is in general not injective in contrast to the previous result . for a counterexample to injectivity , see ( *",
    "in this section , we introduce reduction theory for rank @xmath4 bundles , i.e.  an invariant @xmath50 which is closely related to the slope of a vector bundle and reduction theory .",
    "namely , a rank @xmath4 bundle @xmath281 is ( semi ) stable if and only if @xmath428 is negative ( non - positive ) .",
    "the invariant @xmath50 is also defined for projective line bundles and will be help to determine the structure of the graphs @xmath3 .",
    "[ intro_reduction ] vector bundles do not form a full subcategory of the category of sheaves , to wit , if @xmath277 and @xmath278 are vector bundles and @xmath429 is a morphism of sheaves , then the cokernel may have nontrivial torsion , which does not occur for a morphism of vector bundles . thus by a _ line subbundle @xmath430 _ of a vector bundle @xmath281 , we mean an injective morphism of sheaves such that the cokernel @xmath431 is again a vector bundle .",
    "but every locally free subsheaf @xmath430 of rank @xmath247 extends to a uniquely determined line subbundle @xmath432 , viz .",
    "@xmath433 is determined by the constraint @xmath434 ( @xcite ) . on the other hand ,",
    "every rank @xmath4 bundle has a line subbundle ( ( * ? ? ?",
    "* corollary v.2.7 ) ) .",
    "two line subbundles @xmath430 and @xmath435 are said to be the same if their images coincide , or , in other words , if there is an isomorphism @xmath436 that commutes with the inclusions into @xmath281 .    for a line subbundle @xmath430 of a rank @xmath4 bundle @xmath281 ,",
    "we define @xmath437 and @xmath438 if @xmath439 , then we call @xmath293 a _ line subbundle of maximal degree _ , or briefly , a _ maximal subbundle_. since @xmath440 for a line bundle @xmath441 , the invariant @xmath50 is well - defined on @xmath276 , and we put @xmath442)=\\delta(\\cm)$ ]",
    ".    let @xmath53 be the genus of @xmath0 .",
    "then the riemann - roch theorem and serre duality imply :    [ range_delta ] for every rank @xmath4 bundle @xmath281 , @xmath443 if @xmath430 is a line subbundle with @xmath444 , then @xmath445 .",
    "[ pext_to_bun ] every extension of a line bundle @xmath441 by a line bundle @xmath293 , i.e.  every exact sequence of the form @xmath311&{\\cl}\\ar[r]&{\\cm}\\ar[r]&{\\cl'}\\ar[r]&0 } } \\;,\\ ] ] determines a rank @xmath4 bundle @xmath446 .",
    "this defines for all @xmath447 a map @xmath448 which maps the zero element to @xmath449 .",
    "remark that since decomposable bundles may have line subbundles that differ from its given two factors , nontrivial elements can give rise to decomposable bundles .",
    "the units @xmath450 operate by multiplication on the @xmath1-vector space @xmath451 where @xmath452 is the canonical sheaf of @xmath0 .",
    "the multiplication of a morphism @xmath453 by an @xmath454 is nothing else but multiplying the stalk @xmath455 by @xmath456 and all stalks @xmath457 at closed points @xmath8 by @xmath240 , which induces automorphisms on both @xmath293 and @xmath458 , respectively .",
    "thus , two elements of @xmath459 that are @xmath450-multiples of each other define the same bundle @xmath446 .",
    "we get a well - defined map @xmath460 where the projective space @xmath461 is defined as the empty set when @xmath459 is trivial .",
    "if we further project to @xmath276 , we can reformulate the above properties of the invariant @xmath50 as follows .",
    "the map @xmath462 meets every element of @xmath368 , and the fibre of any @xmath280\\in\\pbun_2 x$ ] is of the form @xmath463    we know that every @xmath280\\in\\pbun_2 x$ ] has a reduction @xmath311&{\\cl}\\ar[r]&{\\cm}\\ar[r]&{\\cl'}\\ar[r]&0}}\\ ] ] with @xmath464 , where we may assume that @xmath465 by replacing @xmath281 with @xmath466 , hence @xmath467 . if @xmath468 , then @xmath281 decomposes , so @xmath469 is trivial and @xmath470 is the empty set .",
    "this explains the form of the fibres and that @xmath368 is contained in the image .",
    "[ finite_indec_part ] there are only finitely many isomorphism classes of indecomposable projective line bundles .",
    "this is clear since @xmath471 is a finite union of finite sets .",
    "[ lemma_schleich ] if @xmath430 is a maximal subbundle , then for every line subbundle @xmath435 that is different from @xmath430 , @xmath472 equality holds if and only if @xmath473 , i.e.  @xmath281 decomposes and @xmath441 is a complement of @xmath293 in @xmath281 .",
    "compare with ( * ? ? ?",
    "* lemma 3.1.1 . ) .",
    "since @xmath435 is different from @xmath430 , there is no inclusion @xmath474 that commutes with the inclusions into @xmath281 .",
    "hence the composed morphism @xmath475 must be injective , and @xmath476 .",
    "this implies that @xmath477 .",
    "equality holds if and only if @xmath478 is an isomorphism , and in this case , its inverse defines a section @xmath479 .",
    "[ number_maximal_subbundles ]    1 .",
    "[ max1 ] a rank @xmath4 bundle @xmath281 has at most one line subbundle @xmath430 such that @xmath480 .",
    "[ max2 ] if @xmath430 is a line subbundle with @xmath481 , then @xmath439 .",
    "[ max3 ] if @xmath482 , we distinguish three cases",
    "[ max31 ] @xmath281 has only one maximal line bundle : this happens if and only if @xmath281 is indecomposable or if @xmath483 and @xmath484 .",
    "[ max32 ] @xmath281 has exactly two maximal subbundles @xmath485 and @xmath486 : this happens if and only if @xmath483 and @xmath487 , but @xmath488 .",
    "[ max33 ] @xmath281 has exactly @xmath489 maximal subbundles : this happens if and only if all maximal subbundles are of the same isomorphism type @xmath293 and @xmath490 .",
    "[ max4 ] @xmath491 .",
    "[ max5 ] @xmath428 is invariant under extension of constants for @xmath280\\in\\pbundec x$ ] .",
    "everything follows from the preceding lemmas , except for the fact that @xmath492 has precisely @xmath489 maximal subbundles in part , which needs some explanation .",
    "first observe that by tensoring with @xmath493 , we reduce the question to searching the maximal subbundles of @xmath494 .",
    "this bundle has a canonical base at every stalk and the canonical inclusions @xmath495 of the stalks at closed points @xmath8 into the stalk at the generic point @xmath262 .",
    "this allows us to choose for any line subbundle @xmath496 a trivialisation with trivial coordinate changes .",
    "thus for every open subset over which @xmath289 trivialises , we obtain the same @xmath247-dimensional @xmath2-subspace @xmath497 . on the other hand , every @xmath247-dimensional subspace @xmath498 gives back the line subbundle by the inclusion of stalks @xmath499 .",
    "we see that for every place @xmath8 , @xmath500 , and only the lines in @xmath501 that are generated by an element in @xmath502 define line subbundles @xmath496 with @xmath503 for every place @xmath8 .",
    "but there are @xmath504 different such line subbundles .",
    "[ delta_traces ] let @xmath505 and @xmath372 , then @xmath506 is an even non - positive integer .",
    "it equals @xmath121 if and only if @xmath375 .    over @xmath46",
    ", we have @xmath507 , and @xmath508 , thus by the previous paragraph , a maximal subbundle of @xmath371 has at most the same degree as @xmath293 , or , equivalently , @xmath509 .",
    "a maximal subbundle has the same degree as @xmath293 if and only if it is isomorphic to @xmath293 or @xmath510 which can only be the case when @xmath293 already is defined over @xmath0 . finally , by the very definition of @xmath428 for rank @xmath4 bundles @xmath281",
    ", it follows that @xmath511 and @xmath512 is even .",
    "we see that for @xmath280\\in\\pbuntr x$ ] , the invariant @xmath428 must get larger if we extend constants to @xmath513 , because @xmath514 decomposes over @xmath46 .",
    "this stays in contrast to the result for classes in @xmath47 ( proposition [ number_maximal_subbundles ] ) .",
    "in this section , we will define certain subgraphs of @xmath3 for a place @xmath8 , namely , the cusp of a divisor class modulo @xmath8 , which is an infinite subgraph of a simple nature , and the nucleus , which is a finite subgraph that depends heavily on the arithmetic of @xmath2 .",
    "finally , @xmath3 can be described as the union of the nucleus with a finite number of cusps .",
    "[ def_i_x ] we use reduction theory to investigate sequences of the form @xmath311&{\\cm'}\\ar[r]&{\\cm}\\ar[r]&{\\ck_x}\\ar[r]&0 } } \\;,\\ ] ] which occur in the definition of @xmath515)$ ] . by additivity of the degree map ( paragraph [ det_and_deg ] ) ,",
    "@xmath516 where @xmath517 is the degree of @xmath8 .",
    "if @xmath430 is a line subbundle , then we say that it lifts to @xmath359 if there exists a morphism @xmath518 such that the diagram @xmath519\\ar{[d]}\\\\ { \\cm'}\\ar[r]&{\\cm}}\\ ] ] commutes . in this case",
    ", @xmath518 is indeed a subbundle since otherwise it would extend non - trivially to a subbundle @xmath520 and would contradict the hypothesis that @xmath293 is a subbundle of @xmath281 . by exactness of the above sequence , a line subbundle @xmath430 lifts to @xmath359 if and only if the image of @xmath293 in @xmath309 is @xmath121 .",
    "let @xmath521 be the kernel of @xmath522 .",
    "this is also a line bundle , since @xmath309 is a torsion sheaf . for every line bundle @xmath293",
    ", we may think of @xmath523 as a subsheaf of @xmath293 . in @xmath269 ,",
    "the line bundle @xmath524 represents the inverse of @xmath292 , the line bundle associated to the divisor @xmath8 .",
    "in particular , @xmath525 .    if @xmath430 does not lift to a subbundle of @xmath359 , we have that @xmath526 lifts to a subbundle of @xmath359 : @xmath527}\\ar@{}|\\subset[r]&{\\cl}\\ar{[d]}\\\\ { \\cm'}\\ar[r]&{\\cm}\\;.}\\ ] ]    note that every subbundle @xmath518 is a locally free subsheaf @xmath430 , which extends to a subbundle @xmath528 . if thus @xmath430 is a maximal subbundle that lifts to a subbundle @xmath518 , then @xmath518 is a maximal subbundle .",
    "if , however , @xmath430 is a maximal subbundle that does not lift to a subbundle @xmath518 , then @xmath529 is a subbundle , which is not necessarily maximal .",
    "these considerations imply that @xmath530 since @xmath531 , we derive :    [ degree_of_nb ] if @xmath532 is exact , then @xmath533    [ def_assoc_sequence ] every line subbundle @xmath430 defines a line @xmath534 in @xmath535 . by the bijection @xmath536 ( cf .",
    "paragraph [ geom_nb ] ) there is a unique @xmath311&{\\cm'}\\ar[r]&{\\cm}\\ar[r]&{\\ck_x}\\ar[r]&0 } } \\;,\\ ] ] up to isomorphism with fixed @xmath281 , such that @xmath430 lifts to @xmath518 .",
    "we call this the _ sequence associated to @xmath430 relative to @xmath41 _ , or for short the _ associated sequence _ , and @xmath317 $ ] the _ associated @xmath41-neighbour_. it follows that @xmath537 .",
    "we summarise this .",
    "[ assoc_sequence ] if @xmath430 is a maximal subbundle , then the associated @xmath41-neighbour @xmath317 $ ] has @xmath538 , and @xmath539,[\\cm'],m)\\in\\,\\cu_x([\\cm])\\vspace{0,1cm}\\\\ \\delta(\\cm')=\\delta(\\cm)+d_x \\end{subarray}}\\hspace{-0,6 cm } m        \\hspace{0,4 cm } = \\hspace{0,2 cm } \\ # \\",
    "\\left\\{\\ \\overline\\cl\\in\\pp^1\\bigl({\\cm   \\ , / \\ , ( \\cm\\otimes\\ci_x ) } \\bigr ) \\ \\left| \\",
    "\\begin{subarray}{c}\\exists\\cl\\to\\cm\\textrm { maximal subbundle } \\\\",
    "\\textrm{with } \\cl\\equiv\\overline\\cl\\pmod{\\cm\\otimes\\ci_x}\\end{subarray }       \\ \\right .",
    "\\right\\ } \\;. \\mbox{\\qed}\\ ] ]    [ edges_of_cusps ] let @xmath8 be a place and @xmath378\\in\\operatorname{cl}x$ ] be a divisor of non - negative degree . the @xmath41-neighbours @xmath51 of @xmath540 with @xmath541 are given by the following list : @xmath542\\in(\\operatorname{cl}^0 x)[2]-\\{0\\ } , \\\\",
    "( c_d , c_{d+x},1 ) , ( c_d , c_{-d+x},1 ) \\ & \\in \\ \\cu_x(c_d)\\quad\\text{if } [ d]\\in\\operatorname{cl}^0 x -(\\operatorname{cl}^0 x)[2],\\text { and } \\\\    ( c_d , c_{d+x},1 ) \\ & \\in \\",
    "\\cu_x(c_d)\\quad\\text{if } \\deg d\\text { is positive . }",
    "\\end{aligned}\\ ] ] for all @xmath41-neighbours @xmath51 of @xmath540 not occurring in this list , @xmath543 .",
    "if furthermore @xmath544 , then @xmath545 , and if @xmath546 where @xmath547 , then @xmath548    by lemma [ assoc_sequence ] , the @xmath41-neighbours @xmath51 of @xmath540 with @xmath549 counted with multiplicity correspond to the maximal subbundles of a rank @xmath4 bundle @xmath281 that represents @xmath540 .",
    "since @xmath550 , the list of all @xmath41-neighbours @xmath51 of @xmath540 with @xmath551 follows from the different cases in proposition and .",
    "be aware that @xmath552 by proposition [ char_pbundec ] ; hence it makes a difference whether or not @xmath420 is @xmath4-torsion .    for the latter statements , write @xmath553 and",
    "let @xmath359 be a subsheaf of @xmath281 with cokernel @xmath309 such that @xmath554 .",
    "then @xmath555 does not lift to @xmath359 , but @xmath556 is a line subbundle and @xmath557    if @xmath544 , then @xmath558 proposition [ number_maximal_subbundles ] implies that @xmath555 is the unique maximal subbundle of @xmath359 and thus @xmath559 .    if @xmath560 , then @xmath561 , hence @xmath359 decomposes and represents @xmath562 .",
    "since the multiplicities of all @xmath41-neighbours of a vertex sum up to @xmath563 , this proves the last part of our assertions .",
    "[ def_cusps_and_nucleus ] let @xmath8 be a place .",
    "let the divisor @xmath420 represent a class @xmath378\\in\\operatorname{cl}\\co_x^x= \\operatorname{cl}x\\,/\\langle x\\rangle$ ] .",
    "we define the _ cusp @xmath564 ( of @xmath420 in @xmath3 ) _ as the full subgraph of @xmath3 with vertices @xmath565\\equiv [ d]\\pmod{\\langle x\\rangle},\\text { and } \\deg d'>m_x\\,\\bigr.\\bigr\\ } \\;,\\ ] ] and the _",
    "nucleus @xmath566 ( of @xmath3 ) _ as the full subgraph of @xmath3 with vertices @xmath567\\in\\pbun_2 x \\,\\bigl|\\ , \\delta(\\cm ) \\leq m_x+d_x \\,\\bigr.\\bigr\\ } \\;.\\ ] ]    theorem [ edges_of_cusps ] determines all edges of a cusp @xmath564 . if @xmath568 , the cusp can be illustrated as in figure [ figure_cusp ] .",
    "note that a cusp is an infinite graph .",
    "it has a regular pattern that repeats periodically . in diagrams we draw the pattern and",
    "indicate its periodic continuation with dots .",
    "we summarise the theory so far in the following theorem that describes the general structure of @xmath3 .",
    "[ gen_str_thm ] let @xmath8 be a place of degree @xmath517 and @xmath569 be the class number .    1 .",
    "[ genstrthm1 ] @xmath3 has @xmath570 cusps and @xmath571\\in\\operatorname{cl}\\co_f^x } \\cc_x(d ) \\;,\\ ] ] where @xmath572 if @xmath568 .",
    "the union of the edges is disjoint .",
    "different cups are disjoint subgraphs .",
    "[ genstrthm2 ] @xmath566 is finite and has @xmath573 components .",
    "each vertex of @xmath566 is at distance @xmath574 from some cusp .",
    "the associated cw - complexes of @xmath566 and @xmath3 are homotopy equivalent .",
    "[ genstrthm3 ] if @xmath378\\in\\operatorname{cl}\\co_f^x$ ] , then @xmath575 .",
    "furthermore @xmath576    , scaledwidth=100.0% ]    define @xmath577 , @xmath578 , @xmath579 and @xmath65 . further let @xmath580 be representatives for @xmath185 with @xmath581 for @xmath582 .",
    "the cusps @xmath583 , @xmath584 , can be seen in figure [ figure_genstr ] as the subgraphs in the dashed regions that are open to the right .",
    "the nucleus @xmath566 is contained in the dotted rectangle to the left . since we have no further information about the nucleus , we leave the area in the rectangle open .",
    "the @xmath50-line on the bottom of the picture indicates the value @xmath585 for the vertices @xmath51 in the graph that lie vertically above @xmath585 .",
    "the dotted regions refer to the sort of vertices , which are elements of either @xmath49 , @xmath48 , or @xmath47 .",
    "all lines are drawn with reference to the @xmath50-line to reflect part of the theorem .",
    "the number of cusps is @xmath586 . that the vertices of cusps are disjoint and only intersect in the given point with the nucleus , is clear by definition . regarding the edges , recall from paragraph [ psi_x ] that if there is an edge from @xmath51 to @xmath325 in @xmath3 , then there is also an edge from @xmath325 to @xmath51 . but theorem [ edges_of_cusps ] implies that each vertex of a cusp that does not lie in the nucleus only connects to a vertex of the same cusp , hence every edge of @xmath3 either lies in a cusp or in the nucleus",
    "different cusps are disjoint by definition .",
    "this shows .    the nucleus is finite since @xmath368 is finite by corollary [ finite_indec_part ] and since the intersection @xmath587 is finite by the definition of the nucleus and proposition [ char_pbundec ] . since the cusps are contractible as cw - complexes , @xmath566 and @xmath3 have the same homotopy type .",
    "therefore @xmath566 has @xmath588 components by proposition [ strong_approx+comp ] . by lemma [ assoc_sequence ] ,",
    "every vertex @xmath51 has a @xmath41-neighbour @xmath325 with @xmath589 , thus the upper bound for the distance of vertices in the nucleus to one of the cusps .",
    "this proves .",
    "the four statements of part follow from the definition of a cusp , proposition , proposition [ range_delta ] and proposition [ delta_traces ] , respectively .",
    "[ eg_p1 ] let @xmath0 be the projective line over @xmath1 .",
    "then @xmath590 , @xmath591 and @xmath0 has a closed point @xmath8 of degree @xmath247 .",
    "this means that @xmath592 since an indecomposable bundle @xmath281 must satisfy both @xmath593 and @xmath594 which is impossible , all projective line bundles decompose .",
    "theorem [ edges_of_cusps ] together with the fact that the weights around each vertex sum to @xmath489 in the graph of @xmath41 determines @xmath3 completely , as illustrated in figure [ p1-graph ] .     for a degree",
    "one place @xmath8 of a rational function field ]",
    "in this section , we explain how to recover automorphic forms as functions on the graph and indicate how unramified automorphic forms can be explicitly calculated as functions on the graph by solving a finite system of linear equations .",
    "we begin with recalling the definition of an automorphic form .",
    "a function @xmath595 is called an _ automorphic form ( for @xmath6 over @xmath2 ) _ if there is a compact open subgroup @xmath89 of @xmath76 such that @xmath32 is left @xmath78-invariant and right @xmath89-invariant and if it generates a finite - dimensional @xmath90-subrepresentation @xmath596 of @xmath597 .",
    "we denote the space of automorphic forms by @xmath598 and note that the action of @xmath82 on @xmath597 restricts to @xmath598 .",
    "we denote the subspace of right @xmath89-invariant automorphic forms by @xmath599 , a space on which @xmath90 acts .",
    "we can reinterpret the elements in @xmath599 as functions on @xmath109 , which is the vertex set of the graph @xmath113 of a hecke operator @xmath92 .",
    "we shall investigate the space @xmath600 of unramified automorphic forms in more detail .",
    "we write @xmath601 or @xmath602 for the value @xmath603 if @xmath604 $ ] is the class of @xmath21 in @xmath318 and @xmath605 is the rank @xmath4 bundle that corresponds to @xmath21 . in particular",
    ", we can see @xmath32 also as a function on @xmath276 .",
    "the space of automorphic forms decomposes into a cuspidal part @xmath606 , a part @xmath607 that is generated by derivatives of eisenstein series and a part @xmath608 that is generated by derivatives of residues of eisenstein series ( for complete definitions , cf .",
    "the decomposition decents to unramified automorphic forms : @xmath609 .",
    "we describe functions in these parts separately .",
    "we start with some considerations for @xmath41-eigenfunctions as functions on a cusp @xmath564 where @xmath420 is a divisor with @xmath568 :        let @xmath610 satisfy the eigenvalue equation @xmath611 , then we obtain for every @xmath612 , @xmath613 thus the restriction of @xmath32 to @xmath614 is determined by the eigenvalue @xmath615 once its values at @xmath540 and @xmath616 are given .",
    "this consideration justifies that we only have to evaluate the eigenvalue equation at vertices of the nucleus to determine the eigenfunctions of @xmath41 .",
    "the space @xmath617 has a basis of @xmath142-eigenfunctions and every unramified cusp form has a compact , i.e.  finite , support in @xmath318 . by the eigenvalue equation",
    "it follows that an hecke - eigenfunction @xmath618 must vanish on all vertices of a cusp in order to have compact support",
    ". thus the support of a cusp form is contained in the finite set @xmath619 of vertices @xmath51 with @xmath620 , and @xmath617 can be determined by considering a finite number of eigenvalue equations for @xmath41 .",
    "these eigenvalue equations can be described in terms of the matrix @xmath621 associated to @xmath41 ( cf .",
    "paragraph [ associated_matrix ] ) .",
    "namely , @xmath617 is generated by the eigenfunctions of @xmath621 whose support is contained in @xmath619 .",
    "this problem can be rephrased into a question on the finite submatrix @xmath622 of @xmath623 , which we forgo to spell out .    in @xcite one",
    "finds a finite set @xmath219 of places such that an @xmath142-eigenfunction @xmath618 is already characterised ( up to multiple ) by its @xmath41-eigenvalues for @xmath624 .",
    "this means that one finds the cuspidal @xmath142-eigenfunctions by considering the eigenvalue equations for the finitely many vertices @xmath625 and the finitely many hecke operators @xmath41 for @xmath624 .",
    "we proceed with @xmath626 .",
    "this space decomposes into a direct sum of generalised ( infinite - dimensional ) hecke - eigenspaces @xmath627 where @xmath628 runs through all unramified hecke characters , i.e.  continuous group homomorphisms @xmath629 modulo inversion ; in particular , @xmath630 . the generalised eigenspace @xmath627 is characterised by its unique hecke - eigenfunction @xmath631 ( up to scalar multiple ) , which in turn is determined by its @xmath41-eigenvalues @xmath632 for @xmath264 .",
    "we have @xmath633 if and only if @xmath634 , in which case @xmath631 is an eisenstein series . for @xmath635 , @xmath631 is a residue of an eisenstein series . for details , see @xcite ; in particular , theorem 11.10 .",
    "we say that a subset @xmath636 generates @xmath637 if the classes of the prime divisors corresponding to the places in @xmath219 generate @xmath637 .",
    "let @xmath219 be a set of places that generates @xmath637 and satisfies that for every decomposition @xmath638 either @xmath639 or @xmath640 .",
    "this set can be chosen to be finite . then the hecke eigenfunction @xmath631 is uniquely determined ( up to scalar multiples ) by the @xmath41-eigenvalues @xmath641 . for details ,",
    "see ( * ? ? ?",
    "3.7.10 ) .",
    "in order to describe an eisenstein series or a residue of an eisenstein series , one only needs to consider the finitely many eigenvalue equations for vertices @xmath625 for the finitely many hecke - operators @xmath41 with @xmath624 .",
    "derivatives of eisenstein series or residues are similarly determined by generalised eigenvalue equations , see ( * ? ? ?",
    "* lemmas 11.2 and 11.7 ) for the explicit formulas .    in the case of a residue ,",
    "i.e.  @xmath635 , the function @xmath642 has a particular simple form .",
    "namely , @xmath628 is of the form @xmath643 where @xmath644 , and thus @xmath645 since every vertex @xmath51 has precisely @xmath23 @xmath41-neighbors ( counted with multiplicities ) , we have @xmath646 for all adjacent vertices",
    "@xmath51 and @xmath325",
    ".    the methods of this paragraph will be applied in @xcite to determine the space of unramified cusp forms for an elliptic function field and to show that there are no unramified toroidal cusp forms in this this case .",
    "in this section , we will show how the theory of the last sections can be used to show finite dimensionality of subspaces of @xmath647 whose elements @xmath32 are defined by a condition of the form @xmath648 for all @xmath649 ( with @xmath650 and @xmath651 being fixed ) .",
    "we will explain a general technique and apply it to show that the spaces of functions in @xmath647 satisfying the cuspidal condition respective the toroidal condition are finite - dimensional .",
    "in particular , this implies that all functions satisfying one of these conditions are automorphic forms .",
    "write @xmath652 for the set of divisor classes that are represented by prime divisors and @xmath653 for the semigroup they generate , viz .  for all classes that are represented by effective divisors .",
    "in particular , @xmath653 contains @xmath121 , the class of the zero divisor , and for all other @xmath378\\in\\operatorname{cl^{eff}}x$ ] , we have @xmath654 .",
    "denote by @xmath655 the set of divisor classes of degree @xmath181 and by @xmath656 the set of divisor classes of degree at least @xmath181 .",
    "let @xmath53 be the genus of @xmath0 .",
    "[ many_effective_divisors ] @xmath657    let @xmath658 be a canonical divisor on @xmath0 , which is of degree @xmath659 . for a divisor @xmath420 , define @xmath660 .",
    "we have @xmath378\\in\\operatorname{cl^{eff}}x$ ] if and only if @xmath661 , cf .",
    "* section iv.1 ) .",
    "the riemann - roch theorem is @xmath662 cf .",
    "iv.1.3 ) .    if now @xmath378\\in\\operatorname{cl}^{\\geq g_x } x$ ] , then @xmath663 and the riemann - roch theorem implies that @xmath664 .",
    "let @xmath420 be an effective divisor .",
    "then it can be written in a unique way up to permutation of terms as a sum of prime divisors @xmath665 .",
    "we set @xmath666 .",
    "since @xmath142 is commutative , @xmath667 is well - defined .",
    "further we briefly write @xmath668 for the graph @xmath669 of @xmath667 , and @xmath670 for @xmath671 .",
    "let @xmath378\\in\\operatorname{cl}x$ ] .",
    "recall from paragraph [ det_and_deg ] that @xmath284 denotes the associated line bundle and from paragraph [ labelling_vertices ] that @xmath540 denotes the vertex that is represented by .",
    "recall from proposition [ number_maximal_subbundles ] that @xmath491 where @xmath50 is defined as in paragraph [ intro_reduction ] .",
    "[ neighbours_of_c_0 ] let @xmath420 be a non - trivial effective divisor .    1",
    ".   [ nb1 ] let @xmath672 .",
    "if @xmath117 is a @xmath667-neighbour of @xmath51 , then @xmath673 .",
    "[ nb2 ] let @xmath280\\in\\operatorname{vert\\,}\\cg_d$ ] .",
    "every maximal subbundle @xmath430 lifts to a maximal subbundle @xmath518 of a uniquely determined rank @xmath4 bundle @xmath359 such that @xmath317 $ ] is a @xmath667-neighbor of @xmath280 $ ] with @xmath674 .",
    "conversely , every maximal subbundle @xmath518 extends to a maximal subbundle @xmath430 if @xmath317 $ ] is a @xmath667-neighbor of @xmath280 $ ] with @xmath674 .",
    "we do induction on the number of factors in @xmath666 with @xmath675 being prime divisors .",
    "put @xmath676 .    if @xmath677 , then @xmath678 .",
    "assertion follows from proposition [ degree_of_nb ] and assertion follows from lemma [ assoc_sequence ] and theorem [ edges_of_cusps ] .",
    "if @xmath679 , we can write @xmath680 for the effective divisor @xmath681 , which is of positive degree @xmath682 .",
    "assume that and hold for @xmath683 .",
    "let @xmath117 be a @xmath667-neighbour of @xmath51 .",
    "as explained in paragraph [ algebra_strucure_in_graphs ] , there is a @xmath684 that is a @xmath685-neighbour of @xmath51 and a @xmath41-neighbour of @xmath117 , thus the inductive hypothesis and proposition [ degree_of_nb ] imply @xmath686    we prove . by the inductive hypothesis , the @xmath685-neighbours @xmath317 $ ] of",
    "@xmath280 $ ] with @xmath687 correspond to the maximal subbundles @xmath435 , which lift to maximal subbundles @xmath688 . on the other hand ,",
    "every maximal subbundle @xmath518 of a @xmath685-neighbours @xmath317 $ ] of @xmath280 $ ] with @xmath687 is of this form since @xmath689 thus @xmath430 must be a maximal subbundle .",
    "we now apply lemma [ assoc_sequence ] to each of the @xmath685-neighbors @xmath359 of @xmath281 and obtain the first statement of .",
    "the second statement of follows from theorem [ edges_of_cusps ] .",
    "we demonstrate how to use the lemma for to show that the space @xmath690 of all unramified functions on @xmath76 that satisfy the cuspidal condition is finite - dimensional .",
    "namely , let @xmath691 be a unipotent subgroup , then the cuspidal condition for @xmath692 is that @xmath693 for all @xmath649 .",
    "if @xmath32 is an automorphic form , then this condition defines a cusp form . a posteriori it will be clear that @xmath690 contains only automorphic forms and thus equals the space @xmath617 of unramified cusp forms .",
    "the dimension of @xmath690 is finite and bounded by @xmath694\\in\\pbun_2 x | \\delta(\\cm)\\leq m_x \\}.\\ ] ]    note that there are only finitely many projective line bundles @xmath280 $ ] with @xmath695 since @xmath368 is finite and @xmath47 has only finitely many classes @xmath280 $ ] with @xmath695 .",
    "so the finite - dimensionality of @xmath690 will follow from the inequality .",
    "we proceed with the proof of the inequality .",
    "the geometric equivalent of the cuspidal condition is that @xmath696 for all @xmath649 ( cf .",
    "@xcite ) .    since @xmath697 for @xmath698",
    ", we have that @xmath699 is a maximal subbundle by proposition [ number_maximal_subbundles ] , and only in the case of the trivial extension @xmath700 , there are other maximal subbundles , namely , there exist @xmath701 different subbundles of the form @xmath699 .",
    "note that in any case @xmath702 .",
    "let @xmath420 be a nontrivial effective divisor . in case @xmath281",
    "is the trivial extension @xmath494 , the vertex @xmath703 $ ] has the unique @xmath667-neighbour @xmath704 with @xmath705 which is of multiplicity @xmath489 . in case , @xmath281 is a non - trivial extension of @xmath261 by itself , the vertex @xmath706 $ ] has a unique @xmath667-neighbour @xmath707 $ ] with @xmath708 , which has a unique maximal subbundle , namely , @xmath709 .",
    "thus for every @xmath698 and every @xmath667-neighbor @xmath317 $ ] of @xmath280 $ ] with @xmath710 , the maximal subbundles of @xmath359 are of the form @xmath709 . thus if @xmath711 , then @xmath317=c_d$ ] by proposition [ range_delta ] .",
    "we finish the proof of the theorem by showing that every @xmath712 is determined by its values in the vertices @xmath51 with @xmath620 .",
    "we make an induction on @xmath713 , where @xmath540 varies through all vertices @xmath51 with @xmath714 .",
    "let @xmath715 .",
    "assume that the values of @xmath32 in all vertices @xmath51 with @xmath716 are given ( which is the case when @xmath717 ; thus the initial step ) .",
    "let @xmath51 be a vertex with @xmath718 , then @xmath719 for an effective divisor @xmath420 by lemma [ many_effective_divisors ] since @xmath720 .",
    "for the hecke operator @xmath667 , the cuspidal condition reads by the previous argumentation and lemma [ neighbours_of_c_0 ] as @xmath721 for certain @xmath722 and @xmath723 .",
    "thus @xmath601 is determined by the values @xmath724 in vertices @xmath117 with @xmath725 , which proves the theorem .    while the finite - dimensionality of @xmath690 can also be established without the techniques of this paper , we do not know any other method to prove corresponding fact for toroidal functions . for more details on the following definitions ,",
    "see @xcite .",
    "choose a basis of @xmath513 over @xmath1 .",
    "this defines an embedding of @xmath726 into the algebra of @xmath727-matrices with entries in @xmath2 .",
    "the image of @xmath728 is contained in @xmath729 and defines a non - split torus @xmath730 of @xmath182 .",
    "the image of @xmath730 in @xmath731 defines a non - split torus @xmath732 of @xmath733 .    a function @xmath692 is _",
    "if for all @xmath649 , @xmath735 we denote the space of all @xmath734-toroidal functions @xmath692 by @xmath736 .",
    "note that in @xcite one finds a toroidal condition , which is stronger than @xmath734-toroidality .",
    "namely , @xmath32 has to be @xmath737-toroidal for all separable quadratic algebra extensions @xmath737 of @xmath2 .",
    "we forgo to recall complete definitions , but remark that the finite - dimensionality of the space of all toroidal @xmath692 follows since it is a subspace of @xmath736 .",
    "let @xmath348 be the map of curves that corresponds to the field extension @xmath738 , and let @xmath739 .",
    "[ geometric_toroidal_cond ] let @xmath740 .",
    "then for all @xmath692 , @xmath741\\in{\\operatorname{pic}x '   \\ , / \\ , p^\\ast(\\operatorname{pic}x ) } } \\hspace{-0,6cm}f([p_\\ast\\cl ] ) \\;.\\ ] ]    let @xmath742 be the adeles of @xmath734 . to avoid confusion , we write @xmath743 for @xmath40 .",
    "we introduce the following notation .",
    "for an @xmath264 that is inert in @xmath738 , we define @xmath744 , where @xmath153 is the unique place that lies over @xmath8 . for an @xmath264 that is split in @xmath738 ,",
    "we define @xmath745 , where @xmath746 and @xmath747 are the two places that lie over @xmath8 .",
    "note that there is no place that ramifies .",
    "let @xmath748 denote the completion of @xmath749 .",
    "then @xmath748 is a free module of rank @xmath4 over @xmath750 for every @xmath264 .",
    "let @xmath751 be the base extension of the embedding @xmath752 that defines @xmath730 , which corresponds to the chosen basis of @xmath734 over @xmath2 that is contained in @xmath513 .",
    "this basis is also a basis of @xmath748 over @xmath753 for every @xmath264 .",
    "this shows that @xmath754 and that the diagram @xmath755^(.6){1:1}\\ar[d]^{\\theta_e } & & \\operatorname{pic}x'\\ar[d]^{p_\\ast}\\\\       { \\operatorname{gl}_2(f ) \\,\\backslash\\ , \\operatorname{gl}_2({\\aa_f } ) \\,/\\ , \\operatorname{gl}_2(\\co_{\\aa_f } ) } \\ar[rr]^(.6){1:1 } & & \\operatorname{bun}_2x}\\ ] ] commutes , where the horizontal arrows are the bijections as described in paragraph [ bundle_to_gl_n ] .",
    "the action of @xmath743 on @xmath756 and @xmath757 by scalar multiplication is compatible with the action of @xmath269 on @xmath758 and @xmath759 by tensoring in the sense that all maps in the above diagram are equivariant if we identify @xmath269 with @xmath760 .",
    "taking orbits under these compatible actions yields the commutative diagram @xmath761^(.55){1:1}\\ar[d]^{\\theta_e } & & { \\operatorname{pic}x '   \\ , / \\ , p^\\ast\\operatorname{pic}x } \\ar[d]^{p_\\ast}\\\\       { g_f \\,\\backslash\\ , g_{\\aa_f } \\,/\\ , k } \\ar[rr]^(.55){1:1 } & & { \\pbun}_2x \\;.\\hspace{-3pt}}\\ ] ]    since @xmath32 is right @xmath762-invariant , we may take the quotient of the domain of integration by @xmath763 from the right , which is the image of @xmath764 in @xmath765 .",
    "we obtain the assertion of the theorem for some still undetermined value of @xmath766 .",
    "the value of @xmath766 is computed by plugging in a constant function for @xmath32 .",
    "[ thma ] the dimension of the space of unramified toroidal functions is finite , bounded by @xmath767\\in\\operatorname{cl^{eff}}x } \\bigr ) \\;.\\ ] ]    first remark that given the inequality in the theorem , finite - dimensionality follows since the right hand set is finite .",
    "indeed , by lemma [ many_effective_divisors ] , @xmath768\\in\\operatorname{cl^{eff}}x } \\ \\subset \\",
    "\\bigl\\{v \\in \\pbun_2 x \\mid \\delta(v)\\leq m_x \\bigr\\}\\ ] ] since @xmath769 , and the latter set is finite .",
    "we now proceed with the proof of the inequality .",
    "let @xmath770 .",
    "we will show by induction on @xmath771 that the value of @xmath32 at a vertex @xmath540 with @xmath378\\in\\operatorname{cl^{eff}}x$ ] is uniquely determined by the values of @xmath32 at the elements of @xmath772\\in\\operatorname{cl^{eff}}x}$ ] .",
    "this will prove the theorem .    by theorem [ geometric_toroidal_cond ] , the condition for @xmath32 to lie in @xmath736 reads @xmath773\\in(\\operatorname{pic}x ' \\,/\\ , p^\\ast\\operatorname{pic}x)}\\hspace{-0,7 cm } \\phi(f)([p_\\ast\\cl ] ) \\ = \\ 0\\;,\\quad\\text{for all } \\phi\\in\\ch.\\ ] ]    if @xmath774 , take @xmath99 as the identity element in @xmath142 .",
    "we know from proposition [ delta_traces ] that @xmath775 , so @xmath776 equals a linear combination of values of @xmath32 at vertices @xmath51 in @xmath48 , which all satisfy @xmath777 .",
    "since the zero divisor class is the only class in @xmath653 of degree @xmath121 , we have proven the case @xmath774 .",
    "next , let @xmath420 be an effective divisor of degree @xmath778 and put @xmath779 .",
    "if @xmath51 is a @xmath667-neighbour of @xmath325 , then @xmath585 and @xmath780 can differ at most by @xmath181 ( lemma [ neighbours_of_c_0 ] ) .",
    "therefore all @xmath667-neighbours @xmath51 of vertices in @xmath48 have @xmath716 .",
    "the vertex @xmath540 is the only @xmath667-neighbour @xmath51 of @xmath328 with @xmath718 ( lemma [ neighbours_of_c_0 ] ) .",
    "thus @xmath781 ) \\quad = \\quad ( q+1)\\,f(c_d)\\quad+\\hspace{-0,6 cm } \\sum_{\\begin{subarray}{c}\\vspace{0,1cm}\\cl\\in(\\operatorname{pic}x ' \\,/\\ , p^\\ast\\operatorname{pic}x),\\\\\\vspace{0,1cm}([p_\\ast\\cl],v,\\lambda)\\in\\cu_d([p_\\ast\\cl]),\\\\\\delta(v)<d\\end{subarray } } \\hspace{-0,9 cm } \\lambda\\ f(v)\\ ] ] determines @xmath782 as the linear combination of values of @xmath32 at vertices @xmath51 with @xmath716 . by the inductive hypothesis ,",
    "@xmath782 is already determined by the values of @xmath32 at vertices that are not contained in @xmath783\\in\\operatorname{cl^{eff}}x}$ ]",
    ".    if @xmath0 is the projective line over @xmath1 , then all vertices @xmath51 are of the form @xmath540 for some effective divisor @xmath420 ( see example [ eg_p1 ] ) .",
    "thus @xmath736 is trivial .",
    "since only @xmath784 satisfies @xmath620 , all values of @xmath712 are multiples of @xmath776 .",
    "however , @xmath785 is trivial , thus the cuspidal condition ( applied to the trivial hecke operator ) is @xmath786 .",
    "thus also @xmath690 is trivial .",
    "see @xcite for the corresponding spaces in the case of an elliptic curve .",
    "the appendix contains examples of graphs of hecke operators for a rational function field , which can be calculated by elementary matrix manipulations .",
    "we do not exercise all calculations , but hint on how to do them . the reader will find examples for elliptic function fields that are determined by geometric methods in @xcite .      using strong approximation for @xmath7 ( cf .",
    "proposition [ strong_approx+comp ] , where @xmath221 is trivial in this case ) , we see that the map obtained by adding the identity matrix @xmath213 at all places @xmath28 , @xmath788 }        & \\longmapsto      &              { [ ( g_x , e ) ] }   \\end{array}\\ ] ] is a bijection .    we introduce some notation .",
    "elements of @xmath789 can be written in the form @xmath790 with @xmath791 for @xmath792 for some integer @xmath793 .",
    "let @xmath794 , where we view @xmath10 as the collection of all power series @xmath795 with @xmath791 for @xmath796 .",
    "let @xmath797 and let @xmath204 be the center of @xmath182 .    [ tricks ] for better readability , we write @xmath798 for the uniformizer @xmath248 at @xmath8 and @xmath21 for a matrix in @xmath167 .",
    "we say @xmath799 if they represent the same class @xmath16=[g']$ ] in @xmath800 , and indicate by subscripts to ` @xmath801 ' how to alter one representative to another .",
    "the following changes of the representative @xmath21 of a class @xmath16\\in{\\gamma \\,\\backslash\\ , g_x \\,/\\ , k_x }",
    "$ ] provide an algorithm to determine a standard representative for the class of any matrix @xmath249 :    1 .",
    "[ trick1 ] by the iwasawa decomposition , every class in @xmath800 is represented by an upper triangular matrix , and @xmath802 2 .",
    "[ trick2 ] write @xmath803 for some integer @xmath268 and @xmath804 , then with @xmath805 , we have @xmath806 3 .",
    "[ trick3 ] if @xmath807 for some integer @xmath171 and coefficients @xmath791 for @xmath808 , then @xmath809 4 .   [ trick4 ] one can further perform the following step : @xmath810 5 .",
    "[ trick5 ] if @xmath811 , then @xmath812 with @xmath813 , @xmath814 and @xmath815 6 .   [ trick6 ]",
    "the last trick is @xmath816    executing these steps ( possibly  several times ) will finally lead to a matrix of the form @xmath817 for some @xmath818 .",
    "the matrix @xmath819 represents the vertex @xmath820 in @xmath821 where @xmath99 is any unramified hecke operator ( cf .",
    "example [ eg_p1]).thus we found a way to determine the vertex @xmath820 that is represented by an arbitrary matrix @xmath822 .    according to paragraph [ algebra_strucure_in_graphs ] ,",
    "the graphs for the zero element @xmath121 and the identity @xmath247 in @xmath142 are as illustrated in figures [ figure_graph_rat_0 ] and [ figure_graph_rat_1 ] , respectively .",
    "[ graph_rat_degree_1 ] by proposition [ phi_x_neighbours ] the @xmath41-neighbors of @xmath823 are of the form @xmath824 . with help of the reduction steps  in paragraph",
    "[ tricks ] one can determine easily the standard representative @xmath825 of @xmath824 .",
    "we reobtain the graph of @xmath41 as illustrated in figure [ figure_graph_rat_deg_1 ] ( cf .",
    "example [ eg_p1 ] ) .",
    "[ graph_of_phi_y_example ] if we want to determine the edges of @xmath826 for a place @xmath153 of degree @xmath181 that differs from @xmath8 , we have to find the standard representative @xmath825 for elements @xmath827 as @xmath2 has class number @xmath247 , we can assume that @xmath828 has nontrivial valuation in @xmath153 and @xmath8 only .",
    "let @xmath829 denote the inverse of one of the matrices @xmath830 .",
    "for all places @xmath831 , the canonical embedding @xmath832 sends @xmath833 to a matrix @xmath834 since @xmath835 by assumption . thus multiplying with @xmath829 from the left , which operates diagonally on the components of all places , and multiplying componentwise with @xmath836 from the right for all @xmath831 , gives an element that is nontrivial only in @xmath8 ( also compare with ( * ? ? ?",
    "* lemma 3.7 ) ) .",
    "the matrices that we obtain in this way are : @xmath837 the reduction steps  of paragraph [ tricks ] tell us which classes are represented , and we are able to determine the edges similarly to the previous example .",
    "thus we obtain that @xmath826 only depends on the degree of @xmath153 .",
    "note that if @xmath153 is of degree @xmath247 , then @xmath826 equals @xmath3 .",
    "figures [ figure_graph_rat_deg_2 ] , [ figure_graph_rat_deg_3 ] , [ figure_graph_rat_deg_4 ] , and [ figure_graph_rat_deg_5 ] show the graphs for degrees @xmath4 , @xmath838 , @xmath839 and @xmath840 , respectively .                  [ powers_of_phi_x_example ]",
    "it is interesting to compare the graph of @xmath845 with @xmath846 to the graph of @xmath847 .",
    "the latter graph is easily deduced from @xmath3 by means of paragraph [ algebra_strucure_in_graphs ] .",
    "namely , a vertex @xmath117 is a @xmath847-neighbour of a vertex @xmath51 in @xmath848 if there is a path of length @xmath181 from @xmath51 to @xmath117 in @xmath3 , i.e.  a sequence @xmath849 of vertices in @xmath3 with @xmath850 and @xmath851 such that for all @xmath852 , there is an edge @xmath853 in @xmath3 .",
    "the weight of an edge from @xmath51 to @xmath117 in the graph of @xmath854 is obtained by taking the sum of the products @xmath855 over all paths of length @xmath181 from @xmath51 to @xmath117 in @xmath3 .",
    "figure [ figure_graph_rat_deg_1_squared ] and [ figure_graph_rat_deg_1_cubed ] show the graphs of @xmath56 and @xmath57 , respectively , and we see that for @xmath856 , we have @xmath857 and for @xmath858 , we have @xmath859 where @xmath860 is the ideal of @xmath142 of hecke operators that operate trivial on @xmath597 .",
    "[ ramification_example ] it is also possible to determine examples for hecke operators in @xmath90 by elementary matrix manipulations , when @xmath861 is a subgroup of finite index .",
    "we will show two examples , which are illustrated in figures [ graph_ram_y ] and [ graph_ram_x ] .",
    "we omit the calculation , but only point out why the crucial differences between the two graphs occur .    for @xmath862 ,",
    "the fibres of the projection @xmath863 are given by @xmath864\\}$ ] and for positive @xmath268 , by @xmath865\\}_{w\\in\\pp^1(\\kappa_x)}$ ] with @xmath866}=\\tinymat 1 c { } 1 $ ] and @xmath867}=\\tinymat { } 1 1 { } $ ] .",
    "the union of these fibres equals the set of vertices of a hecke operator in @xmath90 .",
    "we shall denote the vertices by @xmath868 $ ] and @xmath869 $ ] for @xmath870 and @xmath159 .",
    "note that @xmath871 acts on @xmath872 from the right , so if @xmath873 , then @xmath874 permutes the elements of @xmath872 .    the first hecke operator @xmath875 that we consider is @xmath876 times the characteristic function of @xmath877 , where @xmath153 is a degree one place different to @xmath8 and @xmath878 is a matrix whose only nontrivial component is @xmath879 .",
    "( the factor @xmath876 is included to obtain integer weights ) . since @xmath880 ,",
    "the graph of @xmath881 relative to @xmath89 can have an edge from @xmath51 to @xmath325 only if @xmath826 has an edge from @xmath882 to @xmath883 . because @xmath884 , we argue as for @xmath762 that @xmath885 . applying the same methods as in example [ graph_of_phi_y_example ] ,",
    "one obtains that @xmath886 and for every @xmath870 and @xmath159 that @xmath887 for the case that @xmath833 equals the identity matrix @xmath213 , the graph is illustrated in figure [ graph_ram_y ] .",
    "note that for general @xmath833 , an edge does not necessarily have an inverse edge since @xmath888 does not have to equal @xmath325 .",
    "the second hecke operator @xmath889 is @xmath876 times the characteristic function of @xmath890 .",
    "this case behaves differently , since @xmath891 and @xmath892 are not equal ; in particular , we have @xmath893 .",
    "this allows us to compute the edges as illustrated in figure [ graph_ram_x ] .",
    "note that for @xmath870 , the vertices of the form @xmath894}$ ] and @xmath895}$ ] behave particularly .",
    "marius van der put and marc reversat .",
    "automorphic forms and drinfeld s reciprocity law . in _",
    "drinfeld modules , modular schemes and applications ( alden - biesen , 1996 ) _ , pages 188223 .",
    "world sci .",
    "publ . , river edge , nj , 1997 ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be a curve over @xmath1 with function field @xmath2 . in this paper </S>",
    "<S> , we define a graph for each hecke operator with fixed ramification . a priori </S>",
    "<S> , these graphs can be seen as a convenient language to organize formulas for the action of hecke operators on automorphic forms . </S>",
    "<S> however , they will prove to be a powerful tool for explicit calculations and proofs of finite dimensionality results .    </S>",
    "<S> we develop a structure theory for certain graphs @xmath3 of unramified hecke operators , which is of a similar vein to serre s theory of quotients of bruhat tits trees . to be precise </S>",
    "<S> , @xmath3 is locally a quotient of a bruhat tits tree and has finitely many components . </S>",
    "<S> an interpretation of @xmath3 in terms of rank @xmath4 bundles on @xmath0 and methods from reduction theory show that @xmath3 is the union of finitely many cusps , which are infinite subgraphs of a simple nature , and a nucleus , which is a finite subgraph that depends heavily on the arithmetics of @xmath2 .    </S>",
    "<S> we describe how one recovers unramified automorphic forms as functions on the graphs @xmath3 . in the exemplary cases of the cuspidal and the toroidal condition , </S>",
    "<S> we show how a linear condition on functions on @xmath3 leads to a finite dimensionality result . in particular , we re - </S>",
    "<S> obtain the finite - dimensionality of the space of unramified cusp forms and the space of unramified toroidal automorphic forms .    in an appendix </S>",
    "<S> , we calculate a variety of examples of graphs over rational function fields . </S>"
  ]
}