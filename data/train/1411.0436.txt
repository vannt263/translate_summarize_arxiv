{
  "article_text": [
    "astronomical data acquisition and online reduction of data are steadily becoming more resource - intensive , not just for new and upcoming telescopes such as the low frequency array ( lofar ) and the square kilometre array ( ska ) , but also for new instruments at established facilities .",
    "field programmable gate arrays ( fpgas ) have long been used at the output of analog - to - digital converters ( adcs ) for data reduction and/or packetization , followed by a computer that manages the recording of data to disk .",
    "fpgas have traditionally been considered suitable for high - bandwidth applications , but the relative difficulty in programming them and the lack of support for floating - point arithmetic , coupled with the relatively inexpensive pricing of graphics processing unit ( gpu ) cards , have popularized the use of gpus in astronomical instrumentation .",
    "several real - time gpu - based signal processing systems intended for pulsar astronomy have been developed in recent years ( * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* ; * ? ? ?",
    "* for instance ) .",
    "many new instruments combine the high - bandwidth data acquisition capability of fpgas with the high - performance data reduction capability of gpus , glueing them together with high - throughput networking hardware .",
    "such a heterogeneous architecture is expected to scale up to meet the data - handling requirements of future instruments and telescopes .    in this paper",
    ", we give an overview of a heterogeneous , wide - bandwidth , multi - beam spectrometer that we have built for the green bank telescope ( gbt ) , focussing on the gpu - based spectrometry code and its performance .",
    "this spectrometer forms part of the ` versatile gbt astronomical spectrometer ' ( vegas ) @xcite .",
    "vegas has multiple modes of operation that are broadly classified into two categories  the so - called high bandwidth ( hbw ) and low - bandwidth ( lbw ) modes .",
    "the hbw modes are characterized by higher bandwidths and faster spectral dump rates .",
    "the hbw mode spectrometry takes place exclusively on field - programmable gate array ( fpga ) boards , with integrated spectra sent to data recording pcs .",
    "the lbw modes , on the other hand , involve heterogeneous instrumentation , combing fpgas for data acquisition followed by gpus for spectrometry .",
    "these modes are based on gpus as they require a larger number of channels ( up to 524288 ) than what fpgas can support .",
    "the lbw modes have slower spectral dump rates ( i.e. , more spectra are integrated ) compared to the hbw modes .",
    "although these are ` low - bandwidth ' modes in the context of vegas , these modes are based on code that , with sufficient spectral integration time , can support a per - polarization bandwidth of up to 1.4 ghz .",
    "since these modes make use of both fpgas and gpus , for the remainder of this paper , they will be referred to as ` heterogeneous modes ' .",
    "the organization of this paper is as follows . in ",
    "[ sec_gpu ] , we introduce the gpu - programming paradigm , in  [ sec_vegas_desc ] we describe our software , and in  [ sec_perf ] we explain our benchmarking procedure and performance figures .",
    "in the past , computing performance was improved most commonly by using smaller silicon features and increasing the clock rate .",
    "since computer designers are no longer able to increase the clock rate further due to power constraints , parallelization is the primary method to improve performance in recent times .",
    "the central processing unit ( cpu ) of a typical personal computer ( pc ) has traditionally contained a single instruction - processing core that can perform only one operation at a time .",
    "multi - tasking on a pc powered by such a cpu is usually achieved by interleaving tasks in time .",
    "this obviously degrades the performance of time - critical tasks such as rendering graphics for computer games .",
    "one solution to this problem is to offload graphics processing to a dedicated co - processor , the gpu .",
    "the gpu contains multiple processing cores that enables it to run multiple instructions simultaneously .",
    "this parallelization makes it suitable not just for graphics processing , but also for general purpose computing that requires high performance .",
    "modern gpus are designed with this in mind , and programming platforms are available that let developers take advantage of this computing power .",
    "the most common general purpose gpu programming platform is compute unified device architecture ( cuda ) .",
    "cuda lets developers access the hardware ( the parallel compute engine in the gpu ) using programming instructions .",
    "this is enabled by extending the c language to invoke routines that run on the gpu and using cuda libraries for numerical computation and signal processing , such as cuda basic linear algebra subroutines ( cublas ) and cuda fast fourier transform ( cufft ) .    since gpus are suitable computing platforms for data - parallel applications , they are increasingly used as dedicated co - processors for data analysis applications that use the high - performance hardware to accelerate their time - critical paths .",
    "this also makes gpus ideal for data - acquisition instruments such as vegas .",
    "the heterogeneous modes of operation of vegas and their specifications are given in table  [ tab_modes ] .",
    "these modes are divided into single - sub - band modes and eight - sub - band modes .",
    "the single - sub - band modes can have 32768 to 524288 channels , with sub - band bandwidths in the range 11.72 mhz to 187.5 mhz , whereas the eight - sub - band modes have 4096 to 65536 channels with bandwidths ranging from 15.625 mhz to 23.44 mhz .    [",
    "cols=\"^,^,^,^,^ \" , ]     figure  [ fig_block ] shows a block diagram of the software section of the vegas heterogeneous - mode data acquisition pipeline . in the heterogeneous modes , the fpga board packetizes the signal sampled by an adc and sends it over 10-gigabit ethernet ( 10gbe ) to a pc with a gpu .",
    "the vegas software pipeline , based on the green - bank ultimate pulsar processing instrument ( guppi ; ransom et al . ) is made up of multiple concurrent threads , each associated with a separate cpu core .",
    "the first thread , called the ` network thread ' reads packets off the network and writes the payload to a shared memory ring buffer . the next thread , called the ` gpu thread ' reads the data off the buffer and performs spectrometry , including accumulation of multiple spectra , if needed .",
    "once the accumulated spectra are ready , the output is written to another ring buffer from which the third thread  the ` cpu thread '  reads data and performs further accumulation as needed .",
    "once this is done , the output is sent to the ` disk thread ' that writes it to disk .",
    "this paper describes the spectrometer implemented in the gpu thread .",
    "vegas supports multi - beam receivers , in which case the signal from each beam is processed by a separate software data acquisition pipeline .",
    "the implementation utilizes dual - socket , dual - nic , dual - gpu pcs , wherein one pc processes signals from two beams independently .",
    "spectrometry is a discrete fourier transform ( dft ; see , for example , bracewell ) operation , usually implemented as a fast fourier transform ( fft ) for its performance benefits . due to the finite length of the ` dft window ' ( the number of input time samples ) ,",
    "the single - bin frequency domain response of the dft is not rectangular , but is a sinc function , with side lobes spread across the entire bandwidth .",
    "this ` spectral leakage ' , and the related phenomenon of ` scalloping loss '  due to the non - flat nature of the main lobe of the sinc function  can be mitigated by suppressing the side - lobes of the sinc function and changing the single - bin frequency response of the dft to approximate a rectangular function .",
    "one way of achieving this is using the polyphase filter bank technique ( pfb ) , also known as weighted overlap - add method , in which a ` pre - filter ' is introduced preceding the fft stage ( for details , see crochiere & rabiner and harris & haines ) .",
    "the gpu spectrometer described in this paper implements an 8-tap polyphase filter bank .",
    "the input data to our pfb spectrometer is made up of dual - polarization , 8-bit , complex - valued samples , while the output contains @xmath0 , @xmath1 , re(@xmath2 ) , and im(@xmath2 ) , where @xmath3 is the fourier transform of the horizontal polarization , @xmath4 is the fourier transform of the vertical polarization , and @xmath5 and @xmath6 are the corresponding complex conjugates .",
    "note that full - stokes spectra can easily be derived from these values .",
    "the high - level algorithm of the spectrometer is as follows . here , following gpu - programming parlance , ` host ' indicates code and memory that is associated with the cpu , whereas ` device ' indicates code and memory that is associated with the gpu .",
    "1 .   initialization 1 .",
    "load filter coefficients from host to device memory 2 .",
    "create fft plan to perform two ffts in parallel in the case of single - sub - band modes and 16 ffts in parallel in the case of eight - sub - band modes 2 .",
    "[ loop ] copy time series data for one set of parallel ffts to device 3 .",
    "perform pre - filtering 4 .",
    "perform parallel ffts 5 .",
    "accumulate spectra for desired duration 6 .",
    "copy output to host 7 .",
    "repeat from step  [ loop ]      we observed the galactic hii region w3 using the seven - beam @xmath7-band focal plane array ( kfpa ) receiver of the gbt during commissioning tests .",
    "figure  [ fig_data ] shows a plot of antenna temperature versus velocity for multiple sub - bands corresponding to one of the kfpa beams , in which ammonia lines are visible .",
    "benchmarking of the software spectrometer was performed on a server - class pc running a flavour of the linux operating system , with an nvidia geforce gtx titan commercial ( gaming ) gpu card .",
    "a stand - alone version of the spectrometer program was used , wherein data was read off disk files and pre - loaded in memory , to simulate reading from the shared memory ring buffers of vegas described in  [ sec_vegas_desc ] .",
    "each test was repeated 100 times and we report the average values .",
    "the peak bandwidth achieved was @xmath8mhz ( dual - polarization ) , corresponding to a data rate of @xmath9 gbps which is more than what a 10gbe link can support .",
    "the peak performance was achieved for an fft length of @xmath10 , with long integrations ( accumulation length of 1000 spectra ) .",
    "when direct fft was used , the peak bandwidth achieved was @xmath11 mhz , corresponding to a data rate of @xmath12 gbps , again , more than what is supported by 10gbe .",
    "this peak was for a @xmath13-point fft with an accumulation length of 1000 spectra .",
    "the performance of the code as a function of transform length and accumulation length is depicted in figure  [ fig_perf ] .",
    "the performance of the code is lower at low values of fft length due to the following : each fft kernel invocation ( that does either two ffts in parallel for single - sub - band modes , or 16 ffts in parallel for eight - sub - band modes ) is preceded by a host - to - device data copy step and a pre - filter stage ( in the case of pfb ) , and followed by a device - to - host data copy step .",
    "given the overhead involved in launches of both the copy and compute kernels , this translates to fewer data processing operations per unit time , resulting in reduced performance .",
    "this becomes less of an issue at larger fft lengths .",
    "we have developed a gpu - based pfb spectrometer that supports a dual - polarization bandwidth of up to 1.1 ghz ( or a single - polarization bandwidth of up to 2.2 ghz ) . without doing pfb ( i.e. , direct fft )",
    ", it supports a dual - polarization bandwidth of up to 1.4 ghz ( or a single - polarization bandwidth of up to 2.8 ghz ) .",
    "this bandwidth is sufficient for most spectral line observations , and can be traded off with spectral integration time for some pulsar observations .",
    "future work would involve improving the performance of this software .",
    "the simplest way to speed it up would be to run it on the latest generation of gpu cards .",
    "each new generation of gpu cards typically have , compared to its predecessors , more processing cores and larger memory bandwidth .",
    "this naturally leads to some improvement in performance . however , to significantly improve performance between two consecutive generations of gpus",
    ", the code would need to be tuned keeping in mind the architecture of the gpu used .",
    "a better  albeit , brute - force  way to speed up the code would be to implement support for scalability , by enabling the software to take advantage of dual - gpu cards , and/or to spread the load across multiple gpu cards .",
    "this has the potential to increase the bandwidth processed by up to a factor of a few , depending on the number of gpus used .",
    "additionally , algorithm - level and further code - level optimizations  such as pipelining kernel launches using cuda streams  may also have the potential to yield higher performance .",
    "we thank mike clark for suggestions on code optimization , and ben barsdell , matthew bailes , jonathon kocz , gregory desvignes , david macmahon , and terry filiba for useful discussions .",
    "we also thank the anonymous referee for comments that served to clarify the paper .",
    "nvidia , geforce , geforce gtx titan , and gtx are trademarks and/or registered trademarks of nvidia corporation in the u.s . and/or other countries .",
    "armour , w. , karastergiou , a. , giles , m. , et al .",
    "2012 , asp conference series , 461 , 33 barsdell , b. r. , bailes , m. , barnes , d. g. , fluke , c. j. 2012 , mnras , 422 , 379 bracewell , r. n. 1999 , the fourier transform and its applications , mcgraw - hill crochiere , r. e. , rabiner , l. r. , 1983 , multirate digital signal processing , prentice - hall ford , j. , bloss , m. , brandt , p. , et al .",
    "2013 , radio science meeting ( usnc - ursi nrsm ) , 2013 us national committee of ursi national , doi:10.1109/usnc - ursi - nrsm.2013.6525022 harris , c. , haines , k. , 2011 , pasa , 28 , 317 magro , a. , hickish , j. , adami , k. z. 2013 , jai , 02 , 1350008 magro , a. , karastergiou , a. , salvini , s. , et al . 2011 , mnras , 417 , 2642 ransom , s. m. , demorest , p. , ford , j. , et al .",
    "2009 , aas meeting , 214 , 605.08 roshi , d. a. , bloss , m. , brandt , p. , et al .",
    "2011 , general assembly and scientific symposium , 2011 xxxth ursi , doi:10.1109/ursigass.2011.6051280"
  ],
  "abstract_text": [
    "<S> the graphics processing unit ( gpu ) has become an integral part of astronomical instrumentation , enabling high - performance online data reduction and accelerated online signal processing . in this paper </S>",
    "<S> , we describe a wide - band reconfigurable spectrometer built using an off - the - shelf gpu card . </S>",
    "<S> this spectrometer , when configured as a polyphase filter bank ( pfb ) , supports a dual - polarization bandwidth of up to 1.1 ghz ( or a single - polarization bandwidth of up to 2.2 ghz ) on the latest generation of gpus . on the other hand , </S>",
    "<S> when configured as a direct fft , the spectrometer supports a dual - polarization bandwidth of up to 1.4 ghz ( or a single - polarization bandwidth of up to 2.8 ghz ) .    </S>",
    "<S> instrumentation : miscellaneous </S>"
  ]
}