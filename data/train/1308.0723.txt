{
  "article_text": [
    "many natural and artificial systems can be fruitfully represented as networks involving elementary structural entities and specific relations between them . among the insights that the network representation can provide ,",
    "a central aspect is the relationship between network structure and system s function . to this end , a great deal of work has been devoted to detecting and identifying clusters or communities in static networks , assessing their statistical relevance , and linking community structure to network function  @xcite .",
    "most real - world network systems , however , are in constant evolution , and the increasing availability of time - resolved network data sources , e.g. , from socio - technical systems and on - line social networks , has brought to the forefront the need to study and understand time - varying networks  @xcite . although it is always possible to create static network representations by aggregating over the temporal evolution of the system , such temporally - aggregated representations may overlook essential features of the system or may confound structures that can be teased apart only by retaining the time - varying nature of the data .",
    "for example , a node or group of nodes may belong to different communities at different points in time : aggregating the network over time will artificially merge those communities and create a cluster that does not represent the reality of the system at any point in time .",
    "similarly , groups of nodes may exist that share similar activity patterns over time ( due to , e.g. , an externally imposed activity schedule ) : an aggregated view on the network will only retain the topology of the interactions and lose the activity patterns and temporal correlations .",
    "overall , detecting structures that involve topological features and correlated activity patterns over time is an outstanding challenge that bears relevance to many fields of research and needs a principled approach as well as efficient computational methods .",
    "recent work addressed the community detection problem on time - varying networks by finding communities in snapshots of the networks at different times and then analyzing the changes of the community structures and linking the structures found at different times .",
    "simple approaches to mine the time - varying community structure of a system  @xcite are based on a continuity assumption for the ( static ) community structure detected at successive time intervals .",
    "these approaches may prove useful in specific cases , but fail in the case of discontinuous activity patterns , abrupt structure formation or dissolution , and in general they can not deal with temporal correlations over extended periods of time . instead of treating separately the community structure and the temporal evolution of the network , a few studies  @xcite pioneered global approaches to community detection in temporal networks , even though the current lack of benchmarks makes the evaluation of these methods difficult .",
    "here we propose a method to detect the community - activity structure of temporal networks , and we validate this method using an empirical temporal network for which a ground truth is available for both the community structure and the temporal activity patterns .",
    "the method we study is intrinsically temporal and allows us to simultaneously identify communities and to track their activity over time .",
    "it is based on the fact that a temporal network is naturally represented as a time - ordered sequence of adjacency matrices , each one describing the state of the network at a given point in time .",
    "the adjacency matrices can be combined in a three - way tensor , for which a number of mathematical techniques for multi - layer networks can be applied  @xcite , together with established methods from data mining and machine learning  @xcite .",
    "the approach described here is based on tensor factorization techniques that were developed to extract latent signals in diverse domains like signal processing , psychometrics , brain science , linguistics and chemometrics  @xcite .",
    "we base our work on the so - called canonical decomposition  @xcite , also known as parallel factorization  @xcite , which can be regarded as a generalization of singular value decomposition ( svd ) to tensors . in particular , we focus on non - negative tensor factorization  @xcite , since  as already observed for non - negative matrix factorization @xcite  it is a powerful tool for learning parts - based representation of a dataset , resulting in more interpretable models @xcite .",
    "non - negative factorization techniques have been already proposed for community detection in static networks  @xcite because of their ability to capture densely overlapping communities .",
    "a central challenge in designing techniques for structure detection and extraction is the ability to validate the obtained results by comparing them with an externally available ground truth .",
    "here we leverage a very particular dataset on time - resolved social interactions in a school , for which the full class structure of the school and the activity schedule of the classes are independently available .",
    "this dataset represents an interesting case study , as there are structures at different scales , both topologically and temporally , that arise from the spatial , social , and temporal dimensions of the school activity .",
    "we apply our factorization technique to the tensor describing the temporal network of social contacts and extract the time - varying community structure of the empirical data .",
    "we show that our method fully recovers the known class structure of the school , the activity patterns of classes over time , and it also detects communities spanning mixed classes that correspond to known social activities in the public spaces of the school .",
    "in order to enable the validation of our results , we leverage a high - resolution dataset that describes the close - range social interactions of children in a primary school  @xcite .",
    "the data were collected by the sociopatterns collaboration using wearable proximity sensors that sense the face - to - face proximity relations of individuals wearing them .",
    "this dataset presents expected structures ( classes ) as well as potential less conspicuous structures .",
    "this thus appears as an ideal dataset to assess the efficiency of the ntf community detection algorithm .",
    "this contrasts with the fact that , until now , no clear benchmark has been established to estimate the quality of community detection algorithms on time - varying networks .    *",
    "temporal social network . *",
    "the population of the school consisted of @xmath0 children aged @xmath1 to @xmath2 and organized in @xmath3 classes , together with @xmath3 teachers .",
    "each participant was equipped with a badge containing a proximity sensor with a unique identifier .",
    "the sensor continuously monitored the close - range ( less than @xmath4 meters ) face - to - face contacts of individuals and relayed the proximity relations to a receiving system that timestamps and logs the data  @xcite .",
    "the data were collected over two consecutive days in october 2009 from 8:30am to 5:15pm and only interactions taking place on the premises of the school were recorded .",
    "the system has a temporal resolution of @xmath5 seconds , so that proximity relations are detected over consecutive @xmath5-second time intervals .",
    "the empirical data are therefore naturally represented as a temporal social network .",
    "the data from @xmath3 sensors were discarded because of data quality reasons , thus in the following we will work with a temporal network with @xmath6 nodes .",
    "* class structure of the population . *",
    "no personal information is associated with the unique identifiers of the wearable sensors . however , each identifier is associated to the class the participant belongs to , so that we have a ground truth for the communities that define the class structure of the monitored population .",
    "table s@xmath7 in the supplementary information reports summary information on the school classes .    * spatial information . *",
    "the radio packets transmitted by the wearable proximity sensors were picked up by @xmath8 receivers ( readers ) located throughout the school grounds . for a given sensor @xmath9 ,",
    "the number of packets received by a reader is a decreasing function of the distance between that sensor and the reader .",
    "the number of packets per unit time received by the readers can thus be regarded as a spatial `` fingerprint '' that provides information on the location of sensors with a room - level accuracy .",
    "we define a spatial feature vector for all sensors by counting , for each sensor @xmath9 , the number of packets @xmath10 received by receiver @xmath11 over a fixed time interval . here",
    "we choose to aggregate the location information over consecutive @xmath7-minute interval .",
    "we thus represent the location fingerprint of tag @xmath9 at time @xmath12 using the vector @xmath13 , with @xmath14 receivers .",
    "the availability of spatial information over time allows us to define trajectories for individual tags as well as for groups of tags with the same class label .",
    "the temporal network dataset we use comprises two days of recorded social interactions with a temporal resolution of @xmath5 seconds .",
    "the schedule of classes and social activities that we use as a ground truth for the activity timelines , however , is defined on a coarser temporal scale .",
    "hence for the present study we aggregate the raw sensor data over longer time intervals , comparable to this temporal scale . different levels of aggregation can be chosen , according to the temporal scale of the activity timelines to be explored .    in what follows",
    ", we divide the dataset timeline into @xmath15 consecutive intervals of approximately @xmath16 minutes , and we aggregate the temporal network for each interval .",
    "we also considered intervals of @xmath17 minutes , which are comparable to the typical temporal scale of activities at school , to study the robustness of the results with regards to the choice of aggregation level ( details of the comparison are found in the supplementary information ) .",
    "the division of the total duration of the experiment in @xmath18 intervals and the subsequent aggregation yields 150 network snapshots , built so that one link is drawn between two nodes if those nodes had at least one contact during the corresponding interval .",
    "the state of a network during one interval is represented by an adjacency matrix @xmath19 , where the binary - valued entry @xmath20 indicates the presence of the @xmath11-@xmath21 link .",
    "the temporal network can thus be represented as @xmath18 successive adjacency matrices combined into a 3-way tensor , @xmath22 .",
    "the tensor @xmath22 , where @xmath23 is the number of nodes of the network and @xmath24 the number of network snapshots , encodes both the topological and temporal information on the network under study . uncovering structures that may correspond to communities or correlated activity patterns requires the identification and extraction of lower - dimensional factors . to this end",
    ", we use tensor factorization techniques , i.e. , we choose to represent the tensor as a suitable product of lower - dimensional factors .",
    "this can be achieved by means of the so - called canonical decomposition ( canonical polyadic decomposition , cp ) .",
    "cp in @xmath25 dimensions aims at writing a tensor @xmath22 in a factorized fashion : @xmath26 where the smallest value of @xmath27 for which such a relation can hold is the rank of the tensor @xmath28 . in other words ,",
    "the tensor @xmath28 can always be expressed as a sum of rank-@xmath7 tensors in the form @xmath29 i.e. , as the sum of outer products of three vectors .",
    "the set of vectors @xmath30 ( resp .",
    "@xmath31 , @xmath32 ) can be re - written as a matrix @xmath33 ( resp . @xmath34 and @xmath35 ) , where each of the @xmath27 vectors is a column of the matrix .",
    "the decomposition of eq .",
    "[ approx ] can therefore be represented in terms of the three matrices @xmath36 as @xmath37 . a visual representation of this factorization , also known as the kruskal decomposition ,",
    "is shown in fig .",
    "[ drawing_factorization ] .          in the present case , each rank-@xmath7 tensor , that we henceforth call _ component _ , corresponds to a set of nodes whose activities are correlated .",
    "the aim here is not to find an exact factorization , but rather to approximate the tensor with a number of components smaller than the rank of the original tensor .",
    "such an approximation of the tensor is equivalent to minimizing the difference between @xmath28 and @xmath38 ( parafac decomposition ) , @xmath39 where @xmath40 respectively have dimensions @xmath41 , @xmath41 and @xmath42 , @xmath43 , and @xmath44 is the frobenius norm . in the following @xmath40",
    "will always indicate the approximate decomposition , to avoid confusion with the exact decomposition @xmath36 mentioned above .    solving this problem",
    "amounts to finding the @xmath45 rank-1 tensors that best approximate the tensor @xmath28 .",
    "the number @xmath45 of components is chosen on the basis of the desired level of detail : a low number of components only yields the strongest structures , potentially overlooking important features , whereas using a high number of components faces the risk of overfitting noise .",
    "choosing @xmath45 amounts to an optimization problem in which we seek the number of components that best explain the structure of the tensor without describing the possible noise of the data . in this respect ,",
    "the tensor factorization method is similar to community detection techniques where the number of communities is fixed a priori : the number of components we choose to approximate the tensor is the number of communities or activity patterns we extract ( see also fig .",
    "[ drawing_factorization ] ) .",
    "we transform the @xmath25-dimensional problem of eq .",
    "[ 3d - problem ] into @xmath46-dimensional sub - problems by unfolding the tensor @xmath28 through a process called matricization : the mode-@xmath11 matricization consists in linearizing all the indices of the tensor except @xmath11 . in our case",
    "this yields three modes : @xmath47 .",
    "the three resulting matrices have respectively a size of @xmath48 , @xmath48 and @xmath49 .",
    "each element of the matrix @xmath50 corresponds to one element of the tensor @xmath28 , i.e. , each mode contains all the values of the original tensor .",
    "thanks to matricization , the factorization problem of eq .",
    "[ approx ] can be reframed in terms of individual factorizations of the three modes . in other words , minimizing the difference between @xmath28 and @xmath51 is equivalent to minimizing the difference between each of the modes and their respective approximation in terms of @xmath40 : @xmath52 where @xmath53 denotes the khatri - rao product , which is a column - wise kronecker product , i.e. , @xmath54 $ ] . if @xmath55 and @xmath56 , then the khatri - rao product @xmath57 .",
    "overall , the factorization problem of eq .",
    "[ 3d - problem ] ( parafac ) is converted into the three following sub - problems : @xmath58 here we focus on _ non - negative _ factorization , i.e. , we impose a condition of non - negativity on all the elements of the three modes .",
    "this is customarily used to achieve a purely additive representation of the tensor in terms of components , which greatly simplifies the interpretation of the resulting decomposition  @xcite .    in the case of temporal networks , @xmath59 ,",
    "also called factors , give access to different interpretations : @xmath60 and @xmath61 provide the community structure of the network and @xmath62 gives the temporal activity of each community .",
    "for an undirected network the adjacency matrix represented on each tensor slice is symmetric , and @xmath63 . in this case , the result of tensor factorization is illustrated in fig .",
    "[ fact_result ] .     and",
    "@xmath62 are matrices with @xmath45 columns , each one corresponding to one extracted component .",
    "the rows of @xmath60 correspond to network nodes , and the rows of @xmath62 to discrete time intervals .",
    "the entries of @xmath60 give the membership weight of nodes to the different components .",
    "the entries of @xmath62 give the activity level of components at different intervals .",
    ", width=264 ]    several algorithms have been developed to carry out the parafac decomposition describe above .",
    "the two most common techniques are the projected gradient method  @xcite and the alternating least squares ( als ) method . in the als method",
    "@xcite the @xmath25 problems of eq .",
    "[ 2d - problem ] are solved by alternating a minimization procedure in which two of the matrices are kept fixed while the third is varied for minimization .",
    "the tensor factorization technique we use here is based on the non - negative alternate least squares method ( anls @xcite ) combined with a block - coordinate - descent technique  @xcite , that achieves faster convergence .",
    "our implementation uses the tensor toolbox @xcite .",
    "increasing the number @xmath45 of components allows us to represent more and more structure of the temporal network .",
    "however , as the number of components increases , we go from underfitting to overfitting these structures , i.e. , we face the usual trade - off between approximating complex structures and overfitting them , potentially capturing noise .",
    "this is a characteristic of any intrinsically multi - scale method , and it is important to control it by designing and using quality metrics for the obtained decompositions that can guide their use in the context of a specific research question or application . notice that we do not aim at setting an `` optimal '' number of components , but rather at assessing the quality of a decomposition obtained for a given choice of @xmath45 . here",
    "we make use of a standard metric called `` core consistency ''  @xcite , which we briefly describe in the following .",
    "we notice that the tensor decomposition of eq .  [ element - approx ]",
    "can be written as @xmath64 where @xmath65 is the unit superdiagonal tensor .",
    "this form is a special case of a more general tensor decomposition known as tucker decomposition : @xmath66 where the tensor @xmath67 , known as core tensor , encodes the interactions between the three factors .",
    "it can be shown that for a perfectly - fitted parafac model , yielding factors @xmath60 , @xmath61 and @xmath62 , the core tensor of the tucker decomposition obtained by fixing the factors and minimizing over @xmath67 is the unit super - diagonal tensor @xmath68 ( if the factors have full column rank , see ref .",
    "this points to a possible way to assess the appropriateness of a parafac tensor decomposition with @xmath45 components : we first fix @xmath45 and compute the parafac decomposition with @xmath45 components , obtaining the factors @xmath60 , @xmath61 , and @xmath62 .",
    "then we compute the tucker decomposition of eq .",
    "[ tucker - approx ] with @xmath69 , @xmath70 , @xmath71 and the factors @xmath72 , @xmath73 , and @xmath74 fixed to the result of the former parafac decomposition , obtaining the core tensor @xmath67 . finally , we compare @xmath67 with the unit super - diagonal tensor @xmath68 , and quantify their similarity by a metric known as `` core consistency '' : @xmath75 typically , on plotting the value of @xmath76 for an increasing number of components @xmath45 , a crossover can be observed between high core consistency values for low @xmath45 and lower core consistency values for high @xmath45 , when the parafac model with @xmath45 components stops being a proper description of the original tensor because it overfits or the components become redundant .",
    "values of @xmath76 greater @xmath77 are generally considered acceptable  @xcite , and the value of @xmath45 for which @xmath76 crosses over is usually used as a guide for setting the optimal range for the number of components .    given a choice of @xmath45 , a complementary way to estimate the quality of a specific parafac decomposition with @xmath45 components is to quantify how much of the original signal is recovered by the extracted components . to this end",
    ", we start by quantifying the weight that a given component @xmath78 has in each of the factors @xmath60 , @xmath61 , @xmath62 : we compute the l2-norm of the @xmath78th column of each factor , yielding the norms @xmath79 , @xmath80 and @xmath81 and we define the relevance of component @xmath78 as the product of these norms , @xmath82 .",
    "this allows us to rank the components by the contribution they give to the decomposition , and to score a whole decomposition by the product over @xmath78 of its @xmath83 .    finally , it is important to anticipate that , as reported in the supplementary information , the community structures and activity patterns we obtain on our dataset are very robust with respect to the number of components : on increasing ( or decreasing ) @xmath45 , new structures are uncovered ( or lost ) , but most components stay stable both in terms of topology and in terms of activity patterns .",
    "the factor matrices @xmath40 all have @xmath45 columns , each of them corresponding to one component . since we used non - negative tensor factorization , all entries of these matrices are non - negative . in the special case of an undirected network , @xmath84 .",
    "the elements @xmath85 of matrix @xmath60 associate each component @xmath78 to the nodes @xmath11 it spans , i.e. , they describe community structure of the original network , with the matrix entries providing weights for the membership of nodes to such communities .",
    "the elements @xmath86 of matrix @xmath62 , on the other hand , associate each component @xmath78 to the time intervals @xmath87 it spans , and the matrix values for a given component indicate the activity level of that component as a function of time ( index @xmath87 ) , i.e. , its temporal activity pattern .",
    "we remark that individual nodes can be members of different components , with different weights .",
    "that is , non - negative factorization of the temporal network tensor can naturally capture overlapping communities .",
    "this mirrors the results of the study by yang and leskovec",
    "@xcite , where non - negative matrix factorization was shown capable of detecting densely overlapping as well as non - overlapping communities in static networks .",
    "similarly , non - negative tensor factorization allows to extract non - overlapping temporal communities , densely overlapping communities , and multi - scale community structure .",
    "as noted above , the factor @xmath62 yields the temporal activity of each component ( community ) , irrespective of the node composition of the component .",
    "we define the activity level of each community @xmath78 at a given interval @xmath87 ( time index ) by using both the information on the temporal activity of the component ( from @xmath62 ) and the memberships strength of each node ( from @xmath60 ) in that component . the strength @xmath88 of a component @xmath78 at interval @xmath87 is therefore defined as : @xmath89 where @xmath90 and @xmath91 .",
    "notice that the activity of a component over time can be very uneven , i.e. , it is possible to capture structures ( components ) that have temporally - disjoint activity regions .",
    "this is a consequence of the fact that non - negative tensor factorization captures purely structural aspects of the original network tensor and does not rely or impose in any way constraints of temporal continuity on the detected structures .    to summarize the structure detection technique we described above , fig .",
    "[ fig : process ] schematically illustrates the roles played by the tensorial representation , non - negative tensor factorization , core consistency analysis , and the interpretation of matrix factors .    )",
    "is tuned by using quality indicators that provide information on the stability , coverage or redundancy of the decomposition.,width=340 ]",
    "in the following we report the results obtained by applying the structure detection methodology of fig .",
    "[ fig : process ] to the empirical temporal network of social interactions described in the materials and methods section .",
    "the empirical network data describes the close - range interactions of @xmath92 students and @xmath3 teachers , divided in @xmath3 classes .",
    "the total duration of the experiment was segmented in @xmath18 intervals of @xmath16-minutes for the purpose of the analysis .",
    "we build the tensorial representation of the temporal network and compute the non - negative factorization as described in the methods section , for this case and other aggregation levels ( @xmath93 minutes ) as well . here",
    "we describe the case of @xmath18 intervals but the other aggregation levels give comparable results as detailed in the supplementary information .",
    "we approximate the empirical tensor as the sum of @xmath45 components , according to eq .",
    "[ element - approx ] , with @xmath45 ranging from @xmath46 to @xmath5 .",
    "since the optimization problem does not have a unique global minimum , for each value of @xmath45 we ran the optimization method @xmath5 times , each time starting with different initial condition for the factors @xmath60 and @xmath62 , and computed the core consistency of eq .",
    "[ eq : coreconsistency ] for each run . for each choice of @xmath45",
    "we rank the runs by their core consistency and we select the top @xmath94 runs . out of these , we select the top @xmath95 decompositions with the highest sum of component weights ( the @xmath83 described above ) . the corresponding core consistency values are plotted as a function of @xmath45 in fig .",
    "[ fig : com ] ( left ) , where an abrupt change in the slope is visible for a critical value @xmath96 .",
    "this change of slope indicates that for @xmath97 most of the intrinsic structures of the dataset have been captured , the obtained decompositions may start overfitting and hence risk being less stable with respect to noise and initial conditions .",
    "conversely , all decompositions obtained for @xmath98 yield core consistency values in excess of @xmath99 , which is regarded as an indicator of robust structures captured by the factorization method  @xcite . in this regime , different number of components yield different levels of structural detail of the tensor .",
    "we remark that the observed behavior is independent of the above choices on the number of factorization runs , and of the specific thresholds used for selecting the best ones .    in the following , in order to discuss the structures detected by the method and to validate them in terms of our ground truths , we focus on a specific decomposition with @xmath100 .",
    "this choice , guided by the core consistency curve , corresponds to selecting the most complex models that yields a robust decomposition .",
    "the temporal social network we study is undirected , hence the factors @xmath60 and @xmath61 are identical and provide the membership scores that associate network nodes to the different components ( @xmath101 ) extracted by non - negative factorization , as discussed in the materials and methods section . in the specific case of our dataset the weights @xmath85 exhibit a strong peak at @xmath102 and the other weights are distributed more broadly around a non - zero value . a typical distribution of membership weights is displayed in fig .",
    "[ fig : bimodal ] , and the distributions for all the @xmath16 components we consider are reported in the supplementary information .",
    "for each component @xmath78 , this allows us to naturally divide the weights in two classes , i.e. , to classify the network nodes as member or non - members of a given component ( e.g. , by using an unsupervised clustering technique such as k - means with two clusters ) in a robust fashion .",
    "the memberships to the components can be summarized in a node - component matrix @xmath103 .",
    "the terms @xmath104 of the node - component matrix are @xmath7 ( resp .",
    "@xmath105 ) if the node @xmath106 is member ( resp . not member ) of the component @xmath11 .",
    "the only nodes which can alternatively be classified as member of the community or outside of it depending on the clustering technique are those with small activity compared to the others , but such fluctuations concern few individuals with regard to the total size of the community .",
    "we remark that this is not necessary in order to make use of the ( weighted ) community structure information contained in the factor @xmath84 , and here we proceed to classify each node as member ( or not member ) of a given component ( community ) simply because our dataset allows this , and the resulting binary classification affords a simpler representation , analysis , and validation of the structures we find .",
    "less structured temporal networks , in general , should not be expected to yield membership weights that can be cleanly separated in two classes .",
    "the right - hand panel of figure  [ fig : com ] summarizes the community structure detected by non - negative tensor factorization , displaying the binary association between nodes ( along the vertical axis ) and components ( along the horizontal axis ) .",
    "components are color - coded , and the order of nodes along the vertical axis has been adjusted to expose the strong block structure of the matrix plot .",
    "the @xmath3 blocks correspond to mutually disjoint communities , whereas the remaining @xmath25 components ( the two rightmost components and the fourth component from the right ) are larger and have a significant overlap with one another and with said @xmath3 communities , mixing from @xmath46 to @xmath107 of them .",
    "the sizes of the detected communities are reported in table s2 of the supplementary information .",
    "we anticipate that the @xmath3 mutually disjoint communities correspond to the @xmath3 classes of the school , as we will discuss in the validation section below .",
    "most of the nodes are found to belong to at least one community ( @xmath108 out of @xmath0 ) .",
    "the remaining nodes , on direct inspection of the dataset , have a negligible activity and they are not part of any community .",
    "used for factorization , the core consistency values for the 5 best decompositions are reported ( crosses ) .",
    "the solid line is a guide for the eye .",
    "a crossover between two regimes is visible for @xmath109 .",
    "right panel : component - node matrix for @xmath101 components .",
    "rows correspond to network nodes and columns to components .",
    "the matrix is obtained from the factor @xmath60 by classifying each node as belonging ( lighter rectangles ) or not belonging ( dark blue rectangles ) to a given component .",
    "the order of the nodes has been rearranged to expose the block structure of the matrix .",
    "colors identify components , and the community structures that can be matched to school classes are annotated with the corresponding class name . ,",
    "width=264 ]     used for factorization , the core consistency values for the 5 best decompositions are reported ( crosses ) .",
    "the solid line is a guide for the eye .",
    "a crossover between two regimes is visible for @xmath109 .",
    "right panel : component - node matrix for @xmath101 components .",
    "rows correspond to network nodes and columns to components .",
    "the matrix is obtained from the factor @xmath60 by classifying each node as belonging ( lighter rectangles ) or not belonging ( dark blue rectangles ) to a given component .",
    "the order of the nodes has been rearranged to expose the block structure of the matrix .",
    "colors identify components , and the community structures that can be matched to school classes are annotated with the corresponding class name . , width=264 ]    as discussed in the material and methods section , the factors @xmath62 and @xmath60 can be combined to compute the activity profiles @xmath88 for each component @xmath78 as a function of time ( i.e. , index @xmath87 ) .",
    "the resulting activity patterns for the @xmath16 components of our case study are reported in fig .",
    "[ fig : temp ] . for the sake of readability",
    ", we show the activity patterns restricted to the first day of the school dataset , only .",
    "each panel in figure displays the activity level @xmath88 of an extracted component as a function of the time of the day , from morning to evening .",
    "the components are numbered according to the order of fig .",
    "[ fig : com ] ( left to right ) . on visual inspection",
    ", two main activity patterns can be seen for the extracted components : either the activity is concentrated during class times , with a dip during lunch hours ( 12pm-2pm ) , as seen for components @xmath7-@xmath110 , or the activity peaks during lunch hours , as seen for component @xmath3 and @xmath2 .",
    "the mutually disjoint components corresponding to the blocks in fig .",
    "[ fig : com ] display the former patterns while the overlapping components @xmath3 and @xmath2 display the second pattern . in all cases , activity levels exhibit large fluctuations over time . in the following sections we will validate these patterns by mining for the correspondence between the extracted components and the available metadata on the temporal network we study .    , and provides the activity level of the component as a function of the time of the day . for clarity , the panels only show the activity patterns for the first day of data ( see fig .",
    "s2 supplementary information for the second day ) .",
    "components that can be matched to classes are marked as _",
    "class_. the other three components that correspond to mixed classes exhibit activity patterns that can be understood in terms of gatherings in the social spaces of the school .",
    ", scaledwidth=90.0% ]      an important peculiarity of the dataset we use is that a ground truth for several important structures is available from node metadata and known activity schedules .",
    "here we validate the community structure extracted by means of non - negative tensor factorization by using the class labels we have for each node , which provide a ground truth on the class structure of the school population .",
    "we want to assess to which extent the components found through factorization correlate with actual classes , as a function of the number of components @xmath45 . in order to carry out the validation , we need to match ( when possible ) the extracted components to the school classes , and then we proceed to quantify how much of known class structure is recalled , and the corresponding accuracy . in order to match components to classes , we proceed as follows : as discussed above , for each component @xmath111 of a factorization with @xmath45 components , we classify the networks nodes as belonging or not belonging to @xmath78 .",
    "then we compute the jaccard overlap between the set of nodes of component @xmath78 and the set of nodes corresponding to the known @xmath3 classes ( the jaccard overlap of two sets is the cardinality of their intersection divided by the cardinality of their union ) , obtaining for each component a vector with the @xmath3 overlap scores with each known class .",
    "when such a vector has only one non - zero value , the corresponding component @xmath78 is said to match one known class .",
    "table  [ table_mod1 ] reports our results for a number of components ranging from @xmath112 to @xmath113 . for a given number of components",
    "@xmath78 we report the core consistency metric , the number of matched classes / components , the fraction of nodes spanned by the matches components with respect to the known number of nodes belonging to the matched classes , and other metrics described in the figure caption . for small values of @xmath45 , the extracted structures communities ( classes or mixed classes ) of the dataset , but they only cover part of the network s nodes : only the most prominent set of nodes ( in terms of size , presence , connectivity ) are initially uncovered . as @xmath45 increases , the number of components that can be matched to the classes increases and finally reaches ( for @xmath114 ) the total number of classes of the school .",
    "we remark that the criteria for matching we use ( a vector of jaccard indices with a single non - zero component ) is extremely strict , and yet the factorization technique recovers communities that can be matched to classes for any number of components , and when a match is achieved , the attribution of nodes to classes is almost perfect , as seen in the table .",
    "in fact , for all choices of @xmath45 , approximately @xmath115 of the nodes that are part of the extracted components are assigned to the right known community ( class ) .",
    "the missing ( not assigned ) fractions typically exhibits weak interaction patterns with the rest of the nodes that make their class association behaviourally ambiguous ( we notice that this can arise because of improper sensor behavior or participant compliance ) .",
    "overall , non - negative tensor factorization applied to the adjacency tensor affords an extremely accurate recovery of the independently known class structure , with a coverage that increases with the number of components @xmath45 and ultimately recalls almost perfectly all the @xmath3 known classes .",
    "we remark that for a number of components which is too small to capture the existing class structures , the technique does not yield partial classes , but rather returns a fewer number of class communities , or mixed class communities , with high accuracy .    to illustrate the fact that our methodology is efficient at the level of the individual classes , we focus on the case @xmath100 and we report in table  [ table : numbers_com_check ] the number of nodes recovered in each of the @xmath3 mutually disjoint communities that can be matched to the known classes : there is a perfect matching between @xmath110 components and @xmath110 classes , and for the remaining classe there is one student ( out of more than @xmath5 ) who is not assigned to the component even though they are known to be part of the class that component represents .",
    "the components that can be matched to classes are marked as `` class '' in fig .",
    "[ fig : temp ] .          , and provides the activity level of the component as a function of the time of the day .",
    "components that can be matched to classes are marked as _",
    "class_. the other three components that correspond to mixed classes exhibit activity patterns that can be understood in terms of gatherings in the social spaces of the school .",
    ", scaledwidth=85.0% ]      here , we assess how the detected community structure evolves with the number of components @xmath45 , using the case @xmath101 ( discussed in the main text ) as a reference . to assess the consistency of the detected structure across different decompositions , we display in fig .  [",
    "fig : rscan ] the component - node matrix for different values of @xmath45 , keeping the order of the nodes unchanged across all plots .",
    "we observe that for small values of @xmath45 the detected communities are in general larger than for @xmath101 : this is due to the fact that factorization attempts to describe as much of the temporal network as possible , and returning small components would be sub - optimal . for small values of @xmath45 , when two or more classes are found to be merged in one component , the merged classes are consistently those that participate in the overlapping communities found for @xmath101 .",
    "an example of this can be seen in the case @xmath116 , where two components correspond to classes , while the three other components each mix two classes that participate in the same overlapping communities seen for @xmath101 .     to @xmath101 .",
    "* rows correspond to network nodes and columns to components .",
    "the matrix is obtained from the factor @xmath60 by classifying each node as belonging ( lighter rectangles ) or not belonging ( dark blue rectangles ) to a given component .",
    "colors identify components .",
    "the order of the nodes is the same in all the subplots .",
    ", scaledwidth=90.0% ]      for the case @xmath101 discussed in the main text , fig .",
    "[ fig : memb_ln ] reports the distribution of the membership weights for each component . for all components ,",
    "a large fraction of nodes have zero weights ( notice that we plot the natural logarithm of the weights ) .",
    "this is also visible in fig .",
    "[ fig : ranked_weights ] , where the weights for each components are ranked and plotted as a function of rank .",
    "[ [ robustness - of - the - detected - structures - with - respect - to - snapshot - duration ] ] robustness of the detected structures with respect to snapshot duration ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~",
    "all the results presented in the main text were obtained using a @xmath16 minutes aggregation interval . to choose the appropriate aggregation level , one has to consider the characteristic time scale of the events occurring in the network ( if there is any ) .",
    "if the chosen time scale is too short , tensor factorization may return components that represent noise , whereas the user of a time scale which is too long may blur the temporal features of the temporal network .",
    "the @xmath16 minutes time interval we used in the main text is a natural time scale to resolve the scheduled school activities , but it is nevertheless a somehow arbitrary choice . therefore we assess the stability of our results with respect to the duration of the temporal aggregation interval by repeating our analysis for interval durations of @xmath17 minutes . in all cases , we fixed @xmath117 components .",
    "figure  [ fig : snapshots_comp ] shows that the general structure of the factor matrices we obtain is very similar : for all values of the interval duration all the school classes are found . to further investigate this point",
    "we can look at the number of students assigned to each class , computing the score matrix for each case .",
    "we show in tables  [ table : matrix_60 ] , [ table : matrix_30 ] , [ table : matrix_15 ] and [ table : matrix_5 ] that the score values are very close to one another , i.e. , for this range of time intervals the structures we detect appear to be robust with respect to changes in the duration of the aggregation interval .",
    "the matrix is obtained from the factor @xmath60 by classifying each node as belonging ( lighter rectangles ) or not belonging ( dark blue rectangles ) to a given component .",
    "the order of the nodes has been rearranged to expose the block structure of the matrix .",
    "colors identify components , and the community structures that can be matched to school classes are annotated with the corresponding class name .",
    "[ fig : snapshots_comp ]                      here we report the score matrices @xmath124 , as defined in the main text , for some well - known community detection algorithms for static networks . as discussed in the main text , infomap  @xcite and the community walktrap  @xcite algorithms yield score matrices that are equivalent to the reference score matrix ( up to column permutations ) .",
    "oslom  @xcite and the louvain  @xcite algorithms , conversely , merge several known classes into larger communities , thus the corresponding score matrices are not diagonal ( see tables [ table : matrix_oslom ] and [ table : matrix_louvain ] ) ."
  ],
  "abstract_text": [
    "<S> the increasing availability of temporal network data is calling for more research on extracting and characterizing mesoscopic structures in temporal networks and on relating such structure to specific functions or properties of the system . </S>",
    "<S> an outstanding challenge is the extension of the results achieved for static networks to time - varying networks , where the topological structure of the system and the temporal activity patterns of its components are intertwined .    </S>",
    "<S> here we investigate the use of a latent factor decomposition technique , non - negative tensor factorization , to extract the community - activity structure of temporal networks . </S>",
    "<S> the method is intrinsically temporal and allows to simultaneously identify communities and to track their activity over time . </S>",
    "<S> we represent the time - varying adjacency matrix of a temporal network as a three - way tensor and approximate this tensor as a sum of terms that can be interpreted as communities of nodes with an associated activity time series . </S>",
    "<S> we summarize known computational techniques for tensor decomposition and discuss some quality metrics that can be used to tune the complexity of the factorized representation .    </S>",
    "<S> we subsequently apply tensor factorization to a temporal network for which a ground truth is available for both the community structure and the temporal activity patterns . </S>",
    "<S> the data we use describe the social interactions of students in a school , the associations between students and school classes , and the spatio - temporal trajectories of students over time . </S>",
    "<S> we show that non - negative tensor factorization is capable of recovering the class structure with high accuracy . </S>",
    "<S> in particular , the extracted tensor components can be validated either as known school classes , or in terms of correlated activity patterns , i.e. , of spatial and temporal coincidences that are determined by the known school activity schedule . </S>"
  ]
}