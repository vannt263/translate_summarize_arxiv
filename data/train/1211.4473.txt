{
  "article_text": [
    "microgrid is a distributed electric power system that can autonomously co - ordinate local generations and demands in a dynamic manner @xcite .",
    "illustrated in fig .",
    "[ fig : microgrid ] , modern microgrids often consist of distributed renewable energy generations ( _ e.g. , _ wind farms ) and co - generation technology ( _ e.g. , _ supplying both electricity and heat locally ) .",
    "microgrids can operate in either grid - connected mode or islanded mode .",
    "there have been worldwide deployments of pilot microgrids , such as the us , japan , greece and germany @xcite .",
    "microgrids are more robust and cost - effective than traditional approach of centralized grids .",
    "they represent an emerging paradigm of future electric power systems  @xcite that address the following two critical challenges .",
    "_ power reliability_. providing reliable and quality power is critical both socially and economically . in the us alone , while the electric power system is 99.97% reliable , each year the economic loss due to power outages is at least $ 150 billion  @xcite .",
    "however , enhancing power reliability across a large - scale power grid is very challenging @xcite . with local generation",
    ", microgrids can supply energy _",
    "locally _ as needed , effectively alleviating the negative effects of power outages .",
    "_ integration with renewable energy_. the growing environmental awareness and government directives lead to the increasing penetration of renewable energy .",
    "for example , the us aims at 20% wind energy penetration by 2030 to `` de - carbonize '' the power system .",
    "denmark targets at 50% wind generation by 2025 .",
    "however , incorporating a significant portion of intermittent renewable energy poses great challenges to grid stability , which requires a new thinking of how the grid should operate  @xcite . in traditional centralized grids , the actual locations of conventional energy generation , renewable energy generation ( _ e.g. , _ wind farms ) , and energy consumption are usually distant from each other .",
    "thus , the need to coordinate conventional energy generation and consumption based on the instantaneous variations of renewable energy generation leads to challenging stability problems .",
    "in contrast , in microgrids renewable energy is generated and consumed in the _ local _ distributed network .",
    "thus , the uncertainty of renewable energy is absorbed locally , minimizing its negative impact on the stability of the central transmission networks .",
    "furthermore , microgrids bring significant economic benefits , especially with the augmentation of combined heat and power ( chp ) generation technology . in traditional grids ,",
    "a substantial amount of residual energy after electricity generation is often wasted .",
    "in contrast , in microgrids this residual energy can be used to supply heat domestically . by simultaneously satisfying electricity and heat demand using chp generators",
    ", microgrids can often be much more economical than using external electricity supply and separate heat supply @xcite .",
    "however , to realize the maximum benefits of microgrids , intelligent scheduling of both local generation and demand must be established .",
    "dynamic demand scheduling in response to supply condition , also called _ demand response _",
    "@xcite , is one of the useful approaches .",
    "but , demand response alone may be insufficient to compensate the highly volatile fluctuations of wind generation .",
    "hence , intelligent generation scheduling , which orchestrates both local and external generations to satisfy the time - varying energy demand , is indispensable for the viability of microgrids .",
    "such generation - side scheduling must simultaneously meet two goals .",
    "( 1 ) to maintain grid stability , the aggregate supply from chp generation , renewable energy generation , the centralized grid , and a separate heating system must meet the aggregate electricity and heat demand .",
    "( we do not consider the option of using energy storage in the paper , _ e.g. , _ to charge at low - price periods and to discharge at high - price periods .",
    "this is because for the typical size of microgrids , _",
    "e.g. , _ a college campus , energy storage systems with comparable sizes are very expensive and not widely available . )",
    "( 2 ) it is highly desirable that the microgrid can coordinate local generation and external energy procurement to minimize the overall cost of meeting the energy demand .",
    "we note that a related generation scheduling problem has been extensively studied for the traditional grids , involving both unit commitment @xcite and economic dispatch @xcite , which we will review in sec .",
    "[ sec : related ] as related work . in a typical power plant ,",
    "the generators are often subject to several operational constraints .",
    "for example , steam turbines have a slow ramp - up speed . in order to perform generation scheduling",
    ", the utility company usually needs to forecast the demand first .",
    "based on this forecast , the utility company then solves an offline problem to schedule different types of generation sources in order to minimize cost subject to the operational constraints .",
    "unfortunately , this classical strategy does not work well for the microgrids due to the following unique challenges introduced by the renewal energy sources and co - generation .",
    "the first challenge is that microgrids powered by intermittent renewable energy generations will face a significant uncertainty in energy supply . because of its smaller scale",
    ", abrupt changes in local weather condition may have a dramatic impact that can not be amortized as in the wider national scale . in fig .",
    "[ fig : intro_trace_electricity ] , we examine one - week traces of electricity demand for a college in san francisco  @xcite and power output of a nearby wind station  @xcite .",
    "we observe that although the electricity demand has a relative regular pattern for prediction , the net electricity demand inherits a large degree of variability from the wind generation , casting a challenge for accurate prediction .",
    "secondly , co - generation brings a new dimension of uncertainty in scheduling decisions . observed from fig .",
    "[ fig : intro_trace_heat ] , the heat demand exhibits a different stochastic pattern that adds difficulty to the prediction of overall energy demand .    due to the above additional variability , traditional energy generation scheduling based on _ offline _ optimization assuming _ accurate _ prediction of future supplies and demands",
    "can not be applied to the microgrid scenarios . on the other hand , there are also new opportunities . in microgrids",
    "there are usually only 1 - 2 types of small reciprocate generators from tens of kilowatts to several megawatts .",
    "these generators are typically gas or diesel powered and can be fired up with large ramping - up / down level in the order of minutes .",
    "for example , a diesel - based engine can be powered up in 1 - 5 minutes and has a maximum ramp up / down rate of 40% of its capacity per minute @xcite .",
    "the  fast responding  nature of these local generators opens up opportunities to increase the frequency of generator on / off scheduling that substantially changes the design space for energy generation scheduling . because of these unique challenges and opportunities",
    ", it remains an open question of how to design effective strategies for scheduling energy generation for microgrids .",
    "+   +   +      in this paper , we formulate a general problem of energy generation scheduling for microgrids .",
    "since both the future demands and future renewable energy generation are difficult to predict , we use competitive analysis and study online algorithms that can perform provably well under arbitrarily time - varying ( and even adversarial ) future trajectories of demand and renewable energy generation . towards this end",
    ", we design a class of simple and effective strategies for energy generation scheduling named @xmath0 ( in short for competitive heuristic algorithm for scheduling energy - generation ) . compared to traditional prediction - based and offline optimization approaches ,",
    "our online solution has the following salient benefits .",
    "first , @xmath0 gives an absolute performance guarantee without the knowledge of supply and demand behaviors .",
    "this minimizes the impact of inaccurate modeling and the need for expensive data gathering , and hence improves robustness in microgrid operations .",
    "second , @xmath0 works without any assumption on gas / electricity prices and policy regulations .",
    "this provides the grid operators flexibility for operations and policy design without affecting the energy generation strategies for microgrids .",
    "we summarize the key contributions as follows :    1 .   in sec .",
    "[ sec : offline ] , we devise an offline optimal algorithm for a generic formulation of the energy generation scheduling problem that models most microgrid scenarios with intermittent energy sources and fast - responding gas-/diesel - based chp generators .",
    "note that the offline problem is challenging by itself because it is a mixed integer problem and the objective function values across different slots are correlated via the startup cost .",
    "we first reveal an elegant structure of the single - generator problem and exploit it to construct the optimal offline solution .",
    "the structural insights are further generalized in sec .",
    "[ sec : ngens ] to the case with @xmath1 homogeneous generators .",
    "the optimal offline solution employs a simple load - dispatching strategy where each generator separately solves a partial scheduling problem .",
    "2 .   in secs .",
    "[ sec : online]-[sec : ngens ] , we build upon the structural insights from the offline solution to design @xmath0 , a deterministic online algorithm for scheduling energy generations in microgrids .",
    "we name our algorithm @xmath0 because it tracks the offline optimal solution in an online fashion .",
    "we show that @xmath0 achieves a competitive ratio of @xmath2 .",
    "in other words , no matter how the demand , renewable energy generation and grid price vary , the cost of @xmath0 without any future information is guaranteed to be no greater than @xmath3 times the offline optimal assuming complete future information . here",
    "the constant @xmath4 $ ] captures the maximum price discrepancy between using local generation and external sources to supply energy .",
    "we also prove that the above competitive ratio is the best possible for any deterministic online algorithm .",
    "the above competitive ratio is attained without any future information of demand and supply . in sec .",
    "[ sec : lookahead ] , we then extend @xmath0 to intelligently leverage limited look - ahead information , such as near - term demand or wind forecast , to further improve its performance . in particular",
    ", @xmath0 achieves an improved competitive ratio of @xmath5 when it can look into a future window of size @xmath6 . here , the function @xmath7 $ ] captures the benefit of looking - ahead and monotonically increases from @xmath8 to @xmath9 as @xmath6 increases .",
    "hence , the larger the look - ahead window , the better the performance . in sec .",
    "[ sec : slowrep ] , we also extend @xmath0 to the case where generators are governed by several additional operational constraints ( _ e.g. , _ ramping up / down rates and minimum on / off periods ) , and derive an upper bound for the corresponding competitive ratio .",
    "4 .   in sec .",
    "[ sec : empirical ] , by extensive evaluations using real - world traces , we show that our algorithm @xmath0 can achieve satisfactory empirical performance and is robust to look - ahead error . in particular , a small look - ahead window is sufficient to achieve near offline - optimal performance .",
    "our offline ( resp . ,",
    "online ) algorithm achieves a cost reduction of 22% ( resp . ,",
    "17% ) with chp technology .",
    "the cost reduction is computed in comparison with the baseline cost achieved by using only the wind generation , the central grid , and a separate heating system .",
    "the substantial cost reductions show the economic benefit of microgrids in addition to its potential in improving energy reliability . furthermore , interestingly , deploying a partial local generation capacity that provides 50% of the peak local demands can achieve 90% of the cost reduction .",
    "this provides strong motivation for microgrids to deploy at least a partial local generation capability to save costs .",
    "1@l|>p0.78 * * notation * * & * definition * @xmath10 & the total number of intervals ( unit : min)@xmath1 & the total number of local generators @xmath11 & the startup cost of local generator ( $ ) @xmath12 & the sunk cost per interval of running local generator ( $ ) @xmath13 & the incremental operational cost per interval of running local generator to output an additional unit of power ( $ /watt)@xmath14 & the price per unit of heat obtained externally using natural gas ( $ /watt)@xmath15 & the minimum on - time of generator , once it is turned on @xmath16 & the minimum off - time of generator , once it is turned off @xmath17 & the maximum ramping - up rate ( watt / min)@xmath18 & the maximum ramping - down rate ( watt / min)@xmath19 & the maximum power output of generator ( watt)@xmath20 & the heat recovery efficiency of co - generation @xmath21 & the net power demand ( watt)@xmath22 & the space heating demand ( watt)@xmath23 & the spot price per unit of power obtained from the electricity grid ( @xmath24 ) ( $ /watt)@xmath25 & the joint input at time @xmath26 : @xmath27 @xmath28 & the on / off status of the @xmath29-th local generator ( on as `` 1 '' and off as `` 0 '' ) , @xmath30 @xmath31 & the power output level when the @xmath29-th generator is on ( watt ) , @xmath30 @xmath32 & the heat level obtained externally by natural gas ( watt)@xmath33 & the power level obtained from electricity grid ( watt )    note : we use bold symbols to denote vectors , _",
    "e.g. , _ @xmath34 .",
    "brackets indicate the units .",
    "we consider a typical scenario where a microgrid orchestrates different energy generation sources to minimize cost for satisfying both local electricity and heat demands simultaneously , while meeting operational constraints of electric power system .",
    "we will formulate a microgrid cost minimization problem ( * mcmp * ) that incorporates intermittent energy demands , time - varying electricity prices , local generation capabilities and co - generation .",
    "we define the notations in table  [ tab : notations ] .",
    "we also define the acronyms for our problems and algorithms in table  [ tab : acronyms ] .    0.95@l|>p0.75 * * acronym * * & * meaning * @xmath35 & microgrid cost minimization problem@xmath36 & @xmath35 for fast - responding generators @xmath37 & @xmath36 with single fast - responding generator @xmath38 & a simplified version of @xmath37 @xmath39 & the baseline version of @xmath0 for @xmath37 @xmath40 & @xmath0 for @xmath37 @xmath41 & the baseline version of @xmath0 for @xmath37 with look - ahead @xmath42 & @xmath0 for @xmath37 with look - ahead @xmath43 & @xmath0 for @xmath36 with look - ahead @xmath44 & @xmath0 for @xmath35 with look - ahead      * intermittent energy demands * : we consider arbitrary renewable energy supply ( _ e.g. , _ wind farms ) .",
    "let the net demand ( _ i.e. , _ the residual electricity demand not balanced by wind generation ) at time @xmath26 be @xmath21 .",
    "note that we do not rely on any specific stochastic model of @xmath21 .    * external power from electricity grid * : the microgrid can obtain external electricity supply from the central grid for unbalanced electricity demand in an on - demand manner .",
    "we let the spot price at time @xmath26 from electricity grid be @xmath23 .",
    "we assume that @xmath24 .",
    "again , we do not rely on any specific stochastic model on @xmath23 .",
    "* local generators * : the microgrid has @xmath1 units of homogeneous local generators , each having an maximum power output capacity @xmath19 . based on a common generator model  @xcite , we denote @xmath11 as the startup cost of turning on a generator .",
    "startup cost @xmath11 typically involves the heating up cost ( in order to produce high pressure gas or steam to drive the engine ) and the time - amortized additional maintenance costs resulted from each startup ( _ e.g. , _ fatigue and possible permanent damage resulted by stresses during startups ) .",
    "we denote @xmath12 as the sunk cost of maintaining a generator in its active state per unit time , and @xmath13 as the operational cost per unit time for an active generator to output an additional unit of energy .",
    "furthermore , a more realistic model of generators considers advanced _ operational constraints _ :",
    "1 .   _ minimum on / off periods _ : if one generator has been committed ( resp . , uncommitted ) at time @xmath26 , it must remain committed ( resp . , uncommitted ) until time @xmath45 ( resp . , @xmath46 ) .",
    "_ ramping - up / down rates _",
    ": the incremental power output in two consecutive time intervals is limited by the ramping - up and ramping - down constraints .",
    "most microgrids today employ generators powered by gas turbines or diesel engines .",
    "these generators are `` fast - responding '' in the sense that they can be powered up in several minutes , and have small minimum on / off periods as well as large ramping - up / down rates . meanwhile , there are also generators based on steam engine , and are `` slow - responding '' with non - negligible @xmath15 , @xmath16 , and small ramping - up / down rates .",
    "* co - generation and heat demand * : the local chp generators can simultaneously generate electricity and useful heat . let the heat recovery efficiency for co - generation be @xmath20 , _",
    "i.e. , _ for each unit of electricity generated , @xmath20 unit of useful heat can be supplied for free .",
    "alternatively , without co - generation , heating can be generated separately using external natural gas , which costs @xmath14 per unit time .",
    "thus , @xmath47 is the saving due to using co - generation to supply heat , provided that there is sufficient heat demand .",
    "we assume @xmath48 .",
    "in other words , it is cheaper to generate heat by natural gas than purely by generators ( if not considering the benefit of co - generation ) .",
    "note that a system with no co - generation can be viewed as a special case of our model by setting @xmath49 .",
    "let the heat demand at time @xmath26 be @xmath22 . to keep the problem interesting , we assume that @xmath50 .",
    "this assumption ensures that the minimum co - generation energy cost is cheaper than the maximum external energy price .",
    "if this was not the case , it would have been optimal to always obtain power and heat externally and separately .",
    "we divide a finite time horizon into @xmath10 discrete time slots , each is assumed to have a unit length without loss of generality .",
    "the microgrid operational cost in @xmath51 $ ] is given by @xmath52^{+}\\right]\\right\\ } , \\notag\\end{aligned}\\ ] ] which includes the cost of grid electricity , the cost of the external gas , and the operating and switching cost of local chp generators in the entire horizon @xmath51 $ ] . throughout this paper , we set the initial condition @xmath53 , @xmath30",
    ".    we formally define the * mcmp * as a mixed integer programming problem , given electricity demand @xmath54 , heat demand @xmath55 , and grid electricity price @xmath56 as time - varying inputs :    @xmath57 , t\\in [ 1,t],\\nonumber\\end{aligned}\\ ] ]    where @xmath58 is the indicator function and @xmath59 represents the set of non - negative numbers .",
    "the constraints are similar to those in the power system literature and capture the operational constraints of generators .",
    "specifically , constraint captures the constraint of maximal output of the local generator .",
    "constraints - ensure that the demands of electricity and heat can be satisfied , respectively .",
    "constraints - capture the constraints of maximum ramping - up / down rates .",
    "constraints - capture the minimum on / off period constraints ( note that they can also be expressed in linear but hard - to - interpret forms ) .",
    "this section considers the fast - responding generator scenario .",
    "most chp generators employed in microgrids are based on gas or diesel .",
    "these generators can be fired up in several minutes and have high ramping - up / down rates .",
    "thus at the timescale of energy generation ( usually tens of minutes ) , they can be considered as having no minimum on / off periods and ramping - up / down rate constraints .",
    "that is , @xmath60 , @xmath61 , @xmath62 , @xmath63 .",
    "we remark that this model captures most microgrid scenarios today .",
    "we will extend the algorithm developed for this responsive generator scenario to the general generator scenario in sec .",
    "[ sec : slowrep ] . to proceed ,",
    "we first study a simple case where there is one unit of generator .",
    "we then extend the results to @xmath1 units of homogenous generators in sec .",
    "[ sec : ngens ] .",
    "we first study a basic problem that considers a single generator .",
    "thus , we can drop the subscript @xmath29 ( the index of the generator ) when there is no source of confusion :    @xmath64.\\nonumber\\end{aligned}\\ ] ]    note that even this simpler problem is challenging to solve .",
    "first , even to obtain an offline solution ( assuming complete knowledge of future information ) , we must solve a mixed integer optimization problem .",
    "further , the objective function values across different slots are correlated via the startup cost @xmath65^+$ ] , and thus can not be decomposed .",
    "finally , to obtain an online solution we do not even know the future .",
    "* remark * : readers familiar with online server scheduling in data centers @xcite may see some similarity between our problem and those in @xcite , _",
    "i.e. , _ all are dealing with the scheduling difficulty introduced by the switching cost . despite such similarity , however , the inherent structures of these problems are significantly different . first , there is only one category of demand ( _ i.e. , _ workload to be satisfied by the servers ) in online server scheduling problems .",
    "in contrast , there are two categories of demands ( _ i.e. , _ electricity and heat demands ) in our problem .",
    "further , because of co - generation , they can not be considered separately .",
    "second , there is only one category of supply ( _ i.e. , _ server service capability ) in online server scheduling problem , and thus the demand must be satisfied by this single supply .",
    "however , in our problem , there are three different supplies , including local generation , electricity grid power and external heat supply .",
    "therefore , the design space in our problem is larger and it requires us to orchestrate three different supplies , instead of single supply , to satisfy the demands .",
    "next , we introduce the following lemma to simplify the structure of the problem .",
    "note that if @xmath66 are given , the startup cost is determined .",
    "thus , the problem in - reduces to a linear programming and can be solved _ independently in each time slot_.    [ lem : fmcmp ] given @xmath67 and the input @xmath68 the solutions @xmath69 that minimize @xmath70 are given by : @xmath71 and @xmath72^{+},\\;\\;s(t)=\\left[h(t)-\\eta \\cdot u(t)\\right]^{+}. \\label{eq : optimal_v_and_s}\\ ] ] we note in each time slot @xmath26 , the above @xmath73 @xmath33 and @xmath32 are computed using only @xmath74 and @xmath25 in the same time slot .",
    "the result of lemma  [ lem : fmcmp ] can be interpreted as follows .",
    "if the grid price is very high ( _ i.e. , _ higher than @xmath75 ) , then it is always more economical to use local generation as much as possible , without even considering heating .",
    "however , if the grid price is between @xmath75 and @xmath76 , local electricity generation alone is not economical .",
    "rather , it is the benefit of supplying heat through co - generation that makes local generation more economical .",
    "hence , the amount of local generation must consider the heat demand @xmath22 .",
    "finally , when the grid price is very low ( _ i.e. , _ lower than @xmath76 ) , it is always more cost - effective not to use local generation .    as a consequence of lemma  [ lem : fmcmp ]",
    ", the problem @xmath77 can be simplified to the following problem @xmath78 , where we only need to consider the decision of turning on ( @xmath79 ) or off ( @xmath80 ) the generator . @xmath81,\\end{aligned}\\ ] ] where @xmath82^{+ } \\big ) , \\ ] ] @xmath83 and + @xmath84 are defined according to lemma  [ lem : fmcmp ] .",
    "we first study the offline setting , where the input @xmath85 is given ahead of time .",
    "we will reveal an elegant structure of the optimal solution .",
    "then , in section  [ sec : online ] we will exploit this structure to design an efficient online algorithm .    the problem @xmath78 can be solved by the classical dynamic programming approach .",
    "we present it in algorithm  [ alg : dp ] .",
    "however , the solution provided by dynamic programming does not seem to bring significant insights for developing online algorithms . therefore , in what follows we study the offline optimal solution from another angle , which directly reveals its structure .",
    "we construct a graph @xmath86 where each vertex denoted by @xmath87 presents the on @xmath88 or off @xmath89 state of the local generation at time @xmath90    we draw a directed edge , from each vertex @xmath91 to each possible vertex @xmath92 to represent the fact that the local generation can transit from the first state to the second .",
    "further , we associate the cost of that transition shown below as the weight of the edge : @xmath93    we find the minimum weighted path from the initial state to the final state by dijkstra s shortest path algorithm on graph @xmath94    the optimal solution is @xmath67 along the shortest path .",
    "define @xmath95 @xmath96 can be interpreted as the one - slot cost difference between using or not using local generation . intuitively , if @xmath97 ( resp .",
    "@xmath98 ) , it will be desirable to turn on ( resp .",
    "off ) the generator . however , due to the startup cost , we should not turn on and off the generator too frequently .",
    "instead , we should evaluate whether the _ cumulative _ gain or loss in the future can offset the startup cost .",
    "this intuition motivates us to define the following cumulative cost difference @xmath99 .",
    "we set the initial value as @xmath100 and define @xmath99 inductively : @xmath101 note that @xmath99 is only within the range @xmath102 $ ] . otherwise , the minimum cap ( @xmath103 ) and maximum cap ( 0 ) will apply to retain @xmath99 within @xmath102 $ ] .",
    "an important feature of @xmath99 useful later in online algorithm design is that it can be computed given the past and current input @xmath104 , @xmath105 .",
    "next , we construct critical segments according to @xmath99 , and then classify segments by types .",
    "each type of segments captures similar episodes of demands .",
    "as shown later in theorem  [ thm : ofa - optimal ] , it suffices to solve the cost minimization problem over every segment and combine their solutions to obtain an offline optimal solution for the overall problem * sp*.    [ def : critical - seg ] we divide all time intervals in @xmath51 $ ] into disjoint parts called _ critical segments _ : @xmath106,[t_{1}^{c}+1,t_{2}^{c}],[t_{2}^{c}+1,t_{3}^{c}], ... ,[t_{k}^{c}+1,t]\\ ] ] the critical segments are characterized by a set of _ critical points _ : @xmath107 .",
    "we define each critical point @xmath108 along with an auxiliary point @xmath109 , such that the pair @xmath110 satisfies the following conditions :    * ( boundary ) : either ( @xmath111 and @xmath112 ) + or ( @xmath113 and @xmath114 ) . * ( interior ) : @xmath115 for all @xmath116",
    ".    in other words , each pair of @xmath110 corresponds to an interval where @xmath117 goes from -@xmath11 to @xmath118 or @xmath118 to -@xmath11 , without reaching the two extreme values inside the interval .",
    "for example , @xmath119 and @xmath120 in fig .",
    "[ fig : example1 ] are two such pairs , while the corresponding critical segments are @xmath121 and @xmath122 .",
    "it is straightforward to see that all @xmath110 are uniquely defined , thus critical segments are well - defined .",
    "see fig .",
    "[ fig : example1 ] for an example .    , @xmath123 , @xmath124 and @xmath125 .",
    "in the top two rows , we have @xmath126 , @xmath127 .",
    "the price @xmath23 is chosen as a constant in @xmath128 . in the next row , we compute @xmath99 according to @xmath21 and @xmath22 . for ease of exposition ,",
    "in this example we set the parameters so that @xmath99 increases if and only if @xmath129 and @xmath130 .",
    "the solutions @xmath123 , @xmath124 and @xmath125 at the bottom rows are obtained accordingly to , algorithms  [ alg : chase0 ] and [ alg : chase - lk ] , respectively . ]",
    "once the time horizon @xmath51 $ ] is divided into critical segments , we can now characterize the optimal solution .",
    "[ def : critical - type ] we classify the _ type _ of a critical segment by :    * _ type - start _ ( also call _",
    "type-0 _ ) : @xmath131 $ ] * _ type-1 _ : @xmath132 $ ] , if @xmath113 and @xmath133 * _ type-2 _ : @xmath132 $ ] , if @xmath111 and @xmath134 * _ type - end _ ( also call _ type-3 _ ) : @xmath135 $ ]    we define the cost with regard to a segment @xmath136 by:@xmath137^{+ } } \\end{array}\\ ] ] and define a subproblem for critical segment @xmath136 by : @xmath138.\\end{aligned}\\ ] ]    note that due to the startup cost across segment boundaries , in general @xmath139 . in other words , we should not expect that putting together the solutions to each segment will lead to an overall optimal offline solution .",
    "however , the following lemma shows an important structure property that _ one optimal solution _ of @xmath140 is independent of boundary conditions @xmath141 although _ the optimal value _ depends on boundary conditions .",
    "[ lem :- is - theindep.with.bound.con ] @xmath142 in is an optimal solution for @xmath143 , despite any boundary conditions @xmath144 .",
    "this lemma can be intuitively explained by fig .",
    "[ fig : example1 ] . in type-1 critical segment",
    ", @xmath99 has an increment of @xmath11 , which means that setting @xmath79 over the entire segment provides at least a benefit of @xmath11 , compared to keeping @xmath80 .",
    "such benefit compensates the possible startup cost @xmath11 if the boundary conditions are not aligned with @xmath79 .",
    "therefore , regardless of the boundary conditions , we should set @xmath79 on type-1 critical segment .",
    "other types of critical segments can be explained similarly .",
    "we then use this lemma to show the following main result on the structure of the offline optimal solution .",
    "[ thm : ofa - optimal ] an optimal solution for * sp * is given by @xmath145\\mbox{\\ is type - start/-2/-end},\\\\ 1 , & \\mbox{if\\ } t\\in[t_{i}^{c}+1,t_{i+1}^{c}]\\mbox{\\ is type-1}. \\end{cases}\\ ] ]    refer to appendix  [ subsec : ofa - optimal ] .",
    "theorem  [ thm : ofa - optimal ] can be interpreted as follows .",
    "consider for example a type-1 critical segment in fig .",
    "[ fig : example1 ] that starts from @xmath146 .",
    "since @xmath99 increases from @xmath103 after @xmath146 , it implies that @xmath97 , and thus we are interested in turning on the generator .",
    "the difficulty , however , is that immediately after @xmath146 we do not know whether the future gain by turning on the generator will offset the startup cost . on the other hand ,",
    "once @xmath99 reaches @xmath118 , it means that the cumulative gain in the interval @xmath147 $ ] will be no less than the startup cost .",
    "hence , we can safely turn on the generator at @xmath146 .",
    "similarly , for each type-2 segment we can turn off the generator at the beginning of the segment .",
    "( we note that our offline solution turns on / off the generator at the beginning of each segment because all future information is assumed to be known . )",
    "the optimal solution is easy to compute .",
    "more importantly , the insights help us design the online algorithms .",
    "denote an online algorithm for @xmath149 by @xmath150 .",
    "we define the competitive ratio of @xmath150 by : @xmath151    recall the structure of optimal solution @xmath152 : once the process is entering type-1 ( resp . , type-2 ) critical segment , we should set @xmath79 ( resp .",
    ", @xmath80 ) .",
    "however , the difficulty lies in determining the beginnings of type-1 and type-2 critical segments without future information .",
    "fortunately , as illustrated in fig .",
    "[ fig : example1 ] , it is certain that the process is in a type-1 critical segment when @xmath99 reaches @xmath118 for the first time after hitting @xmath103 .",
    "this observation motivates us to use the algorithm @xmath153 , which is given in algorithm  [ alg : chase0 ] . if @xmath154 , @xmath153 maintains @xmath155 ( since we do not know whether a new segment has started yet . )",
    "however , when @xmath156 ( resp .",
    "@xmath157 ) , we know for sure that we are inside a new type-1 ( resp .",
    "type-2 ) segment .",
    "hence , @xmath153 sets @xmath79 ( resp .",
    "@xmath80 ) . intuitively ,",
    "the behavior of @xmath153 is to track the offline optimal in an online manner : we change the decision only after we are certain that the offline optimal decision is changed .",
    "find @xmath99 set @xmath158 , @xmath33 , and @xmath32 according to and return @xmath159    even though @xmath153 is a simple algorithm , it has a strong performance guarantee , as given by the following theorem .",
    "[ thm : chase - competitive - ratio ] the competitive ratio of @xmath153 satisfies @xmath160 where @xmath161 \\label{eq : alpha_def}\\ ] ] captures the maximum price discrepancy between using local generation and external sources to supply energy .",
    "refer to appendix  [ subsec : chase - competitive - ratio ] .    * remark * : ( i ) the intuition that @xmath153 is competitive can be explained by studying its worst case input shown in fig .",
    "[ fig : worstcase ] . the demands and prices",
    "are chosen in a way such that in interval @xmath162 $ ] @xmath99 increases from @xmath103 to @xmath118 , and in interval @xmath163 $ ] @xmath99 decreases from @xmath118 to @xmath103 .",
    "we see that in the worst case , @xmath164 never matches @xmath165 .",
    "but even in this worst case , @xmath166 pays only @xmath167 more than the offline solution @xmath168 on @xmath169 $ ] , while @xmath168 pays at least a startup cost @xmath11 at time @xmath170 .",
    "hence , the ratio of the online cost over the offline cost can not be too bad .",
    "( ii ) theorem  [ thm : chase - competitive - ratio ] says that @xmath153 is more competitive when @xmath8 is large than it is small .",
    "this can be explained intuitively as follows .",
    "large @xmath8 implies small economic advantage of using local generation over external sources to supply energy .",
    "consequently , the offline solution tends to use local generation less .",
    "it turns out @xmath153 will also use less local generation will turn on the local generator when @xmath99 increases to 0 .",
    "the larger the @xmath8 is , the slower @xmath99 increases , and the less likely @xmath153 will use the local generator . ] and is competitive to offline solution .",
    "meanwhile , when @xmath8 is small , @xmath153 starts to use local generation .",
    "however , using local generation incurs high risk since we have to pay the startup cost to turn on the generator without knowing whether there are sufficient demands to serve in the future .",
    "lacking future knowledge leads to a large performance discrepancy between @xmath153 and the offline optimal solution , making @xmath153 less competitive .     the worst case input of @xmath166 , and the corresponding @xmath171 , @xmath172 and the offline optimal solution @xmath168 .",
    "]    the result in theorem  [ thm : chase - competitive - ratio ] is strong in the sense that @xmath173 is always upper - bounded by a small constant 3 , regardless of system parameters .",
    "this is contrast to large parameter - dependent competitive ratios that one can achieve by using generic approach , _",
    "e.g. , _ the metrical task system framework  @xcite , to design online algorithms .",
    "furthermore , we show that @xmath153 achieves close to the best possible competitive ratio for deterministic algorithms as follow .",
    "[ thm : lower - bound - online ] let @xmath174 be the slot length under the discrete - time setting we consider in this paper .",
    "the competitive ratio for any deterministic online algorithm @xmath150 for @xmath149 is lower bounded by @xmath175 where @xmath176 vanishes to zero as @xmath177 goes to zero and the discrete - time setting approaches the continuous - time setting .",
    "refer to appendix  [ subsec : lower - bound - online ] .",
    "note that there is still a gap between the competitive ratios in ( [ eq : chase_s_ratio ] ) and ( [ eq : ratioupperbound ] ) .",
    "the difference is due to the term @xmath178 .",
    "this term can be interpreted as the competitive ratio of a naive strategy that always uses external power supply and separate heat supply .",
    "intuitively , if this @xmath179 term is smaller than @xmath180 , we should simply use this naive strategy .",
    "this observation motivates us to develop an improved version of @xmath39 , called @xmath40 , which is presented in algorithm  [ alg : chase ] .",
    "corollary  [ cor : chase ] shows that @xmath40 closes the above gap and achieves the asymptotic optimal competitive ratio .",
    "note that whether or not the @xmath179 term is smaller can be completely determined by the system parameters .",
    "@xmath181 return @xmath159 return @xmath182 $ ]    [ cor : chase ] @xmath40 achieves the asymptotic optimal competitive ratio of any deterministic online algorithm , as @xmath183    * remark * : at the beginning of sec .  [ sec : singlefastrep ] , we have discussed the structural differences of online server scheduling problems @xcite and ours . in what follows , we summarize the solution differences among these problems . note that we share similar intuitions with @xcite , both make switching decisions when the _ penalty cost _ equals the switching cost .",
    "the significant difference , however , is when to reset the penalty counting . in @xcite ,",
    "the penalty counting is reset when the demand arrives .",
    "in contrast , in our solution , we need to reset the penalty counting only when @xmath99 , given in the non - trivial form in ( [ eqn : delta - definition ] ) , touches 0 or @xmath103 . this particular way of resetting penalty counting is critical for establishing the optimality of our proposed solution .",
    "meanwhile , to compare with @xcite , the approach in @xcite does not explicitly count the penalty . furthermore , the online server scheduling problem in @xcite is formulated as a convex problem , while our problem is a mixed integer problem .",
    "thus , there is no known method to apply the approach in @xcite to our problem .",
    "we consider the setting where the online algorithm can predict a small window @xmath6 of the immediate future .",
    "note that @xmath184 returns to the case treated in section  [ sec : online ] , when there is no future information at all .",
    "consider again a type-1 segment @xmath185 $ ] in fig .",
    "[ fig : example1 ] . recall that ,",
    "when there is no future information , the @xmath153 algorithm will wait until @xmath186 , _",
    "i.e. , _ when @xmath99 reaches @xmath118 , to be certain that the offline solution must turn on the generator .",
    "hence , the @xmath153 algorithm will not turn on the generator until this time .",
    "now assume that the online algorithm has the information about the immediate future in a time window of length @xmath6 . by the time @xmath187",
    ", the online algorithm has already known that @xmath99 will reach @xmath118 at time @xmath186 .",
    "hence , the online algorithm can safely turn on the generator at time @xmath187 . as a result ,",
    "the corresponding loss of performance compared to the offline optimal solution is also reduced . specifically , even for the worst - case input in fig .",
    "[ fig : worstcase ] , there will be some overlap ( of length @xmath6 ) between @xmath164 and @xmath165 in each segment .",
    "hence , the competitive ratio should also improve with future information .",
    "this idea leads to the online algorithm @xmath188 , which is presented in algorithm  [ alg : chase - lk ] .",
    "find @xmath189 set @xmath190 set @xmath158 , @xmath33 , and @xmath32 according to and return @xmath159    we can show the following improved competitive ratio when limited future information is available .    [",
    "thm : chaselk - competitive - ratio ] the competitive ratio of @xmath191 satisfies @xmath192 where @xmath193 is the look - ahead window size , @xmath194 $ ] is defined in , and @xmath195 captures the benefit of looking - ahead and monotonically increases from @xmath8 to 1 as @xmath6 increases .",
    "in particular , + @xmath196 .    refer to appendix  [ subsec : chaselk - competitive - ratio ] .",
    "we replace @xmath153 by @xmath188 in @xmath197 and obtain an improved algorithm for the look - ahead setting , named @xmath198 .",
    "[ fig : chase_ratio_with_lookahead ] shows the competitive ratio of @xmath198 as a function of @xmath8 and @xmath6 .     the competitive ratio of @xmath198 as a function of @xmath8 and @xmath6 . ]",
    "now we consider the general case with @xmath1 units of homogeneous generators , each having an maximum power capacity @xmath19 , startup cost @xmath11 , sunk cost @xmath12 and per unit operational cost @xmath13 .",
    "we define a generalized version of problem : @xmath199 next , we will construct both offline and online solutions to @xmath200 in a divide - and - conquer fashion .",
    "we will first partition the demands into sub - demands for each generator , and then optimize the local generation _ separately _ for each sub - demand .",
    "note that the key is to correctly partition the demand so that the combined solution is still optimal .",
    "our strategy below essentially slices the demand ( as a function of @xmath26 ) into multiple layers from the bottom up ( see fig .  [",
    "fig : layers = example ] ) .",
    "each layer has at most @xmath19 units of electricity demand and @xmath201 units of heat demand .",
    "the intuition here is that the layers at the bottom exhibit the least frequent variations of demand .",
    "hence , by assigning each of the layers at the bottom to a dedicated generator , these generators will incur the least amount of switching , which helps to reduce the startup cost .",
    "more specifically , given @xmath202 , we slice them into @xmath203 layers :    @xmath204 \\\\ h^{{\\rm ly\\mbox{-}}n}(t ) = & \\min\\{\\eta \\cdot l , h(t ) \\mbox{- } \\textstyle{\\sum}_{r=1}^{n-1 } h^{{\\rm ly\\mbox{-}}r}(t)\\ } , n \\in [ 2,n ]",
    "\\\\ a^{\\rm top}(t ) = & \\min\\{l , a(t ) - \\textstyle{\\sum}_{r=1}^{n } a^{{\\rm ly\\mbox{-}}r}(t)\\ } \\\\ h^{\\rm top}(t ) = & \\min\\{\\eta",
    "\\cdot l , h(t ) - \\textstyle{\\sum}_{r=1}^{n } h^{{\\rm ly\\mbox{-}}r}(t ) \\label{eq : demand_slicing - end}\\}\\end{aligned}\\ ] ]    it is easy to see that electricity demand satisfies @xmath205 and heat demand satisfies @xmath206 .",
    "thus , each layer of sub - demand can be served by a single local generator if needed .",
    "note that @xmath207 can only be satisfied from external supplies , because they exceed the capacity of local generation .    based on this decomposition of demand",
    ", we then decompose the * fmcmp * problem into @xmath1 sub - problems @xmath208 ( @xmath30 ) , each of which is an @xmath37 problem with input @xmath209 .",
    "we then apply the offline and online algorithms developed earlier to solve each sub - problem @xmath210 ( @xmath30 ) _ separately_. by combining the solutions to these sub - problems , we obtain offline and online solutions to * fmcmp*. for the offline solution , the following theorem states that such a divide - and - conquer approach results in no optimality loss .",
    "[ thm : nofa - optimal ] suppose @xmath211 is an optimal offline solution for each @xmath210 ( @xmath30 )",
    ". then + @xmath212 defined as follows is an optimal offline solution for @xmath36 : @xmath213    refer to appendix  [ subsec : nofa - optimal ] .    for the online solution",
    ", we also apply such a divide - and - conquer approach by using ( i ) a central demand dispatching module that slices and dispatches demands to individual generators according to - , and ( ii ) an online generation scheduling module sitting on each generator @xmath29 ( @xmath30 ) _ independently _ solving their own @xmath214 sub - problem using the online algorithm @xmath215 .",
    "the overall online algorithm , named @xmath216 , is simple to implement without the need to coordinate the control among multiple local generators . since the offline ( resp .",
    "online ) cost of @xmath36 is the sum of the offline ( resp .",
    "online ) costs of @xmath214 ( @xmath30 ) , it is not difficult to establish the competitive ratio of @xmath216 as follows .",
    "[ thm : chase - ng ] the competitive ratio of @xmath216 satisfies @xmath217 where @xmath194 $ ] is defined in and @xmath7 $ ] is defined in .",
    "refer to appendix  [ subsec : multipleratio ] .",
    "we next consider the slow - responding generator case , with the generators having non - negligible constraints on the minimum on / off periods and the ramp - up / down speeds .",
    "for this slow - responding version of * mcmp * , its offline optimal solution is harder to characterize than * fmcmp * due to the additional challenges introduced by the cross - slot constraints - .    in the slow - responding setting",
    ", local generators can not be turned on and off immediately when demand changes .",
    "rather , if a generator is turned on ( resp . , off ) at time @xmath26 , it must remain on for at least @xmath15 ( resp . ,",
    "@xmath16 ) time .",
    "further , the changes of @xmath218 must be bounded by @xmath219 and @xmath220 .",
    "a simple heuristic is to first compute solutions based on @xmath216 , and then modify the solutions to respect the above constraints .",
    "we name this heuristic @xmath221 and present it in algorithm  [ alg : chase - general ] . for simplicity ,",
    "algorithm  [ alg : chase - general ] is a single - generator version , which can be easily extended to the multiple - generator scenario by following the divide - and - conquer approach elaborated in sec .  [ sec : ngens ] .",
    "@xmath222 @xmath223    @xmath224 @xmath225 @xmath226^{+}}$ ] @xmath227^{+}}$ ] return @xmath228    we now explain algorithm  [ alg : chase - general ] and its competitive ratio . at each time slot @xmath26",
    ", we obtain the solution of @xmath229 , including @xmath230 , as a reference solution ( line 1 ) . then in line 2 - 6 , we modify the reference solution s @xmath231 to our actual solution @xmath74 , to respect the constraints of minimum on / off periods . more specifically , we follow the reference solution s @xmath231 ( _ i.e. , _",
    "@xmath232 ) _ if and only if _ it respects the minimum on / off periods constraints ( line 2 - 3 ) . otherwise , we let our actual solution s @xmath74 equal our previous slot s solution ( @xmath155 ) ( line 4 - 5 ) .",
    "similarly , we modify the reference solution s @xmath233 to our actual solution s @xmath158 , to respect the constraints on ramp - up / down speeds ( line 7 - 11 ) . at",
    "last , in our actual solution , we use @xmath234 to compensate the supply and satisfy the demands ( line 12 - 13 ) . in summary ,",
    "our actual solution is designed to be aligned with the reference solution as much as possible .",
    "we derive an upper bound on the competitive ratio of @xmath221 as follows .",
    "[ thm : slowratio ] the competitive ratio of @xmath235 is upper bounded by @xmath236 , where @xmath237 is defined in and @xmath238    refer to appendix  [ subsec : slowratio ] .",
    "we note that when @xmath239 , @xmath240 , the above upper bound matches that of @xmath216 in theorem  [ thm : chase - ng ] ( specifically the first term inside the min function ) .",
    "we evaluate the performance of our algorithms based on evaluations using real - world traces .",
    "our objectives are three - fold : ( i ) evaluating the potential benefits of chp and the ability of our algorithms to unleash such potential , ( ii ) corroborating the empirical performance of our online algorithms under various realistic settings , and ( iii ) understanding how much local generation to invest to achieve substantial economic benefit .      * demand trace * : we obtain the demand traces from california commercial end - use survey ( ceus ) @xcite .",
    "we focus on a college in san francisco , which consumes about 154 gwh electricity and @xmath241 therms gas per year .",
    "the traces contain hourly electricity and heat demands of the college for year 2002 .",
    "the heat demands for a typical week in summer and spring are shown in fig .",
    "[ fig : trace ] .",
    "they display regular daily patterns in peak and off - peak hours , and typical weekday and weekend variations .",
    "* wind power trace * : we obtain the wind power traces from @xcite .",
    "we employ power output data for the typical weeks in summer and spring with a resolution of 1 hour of an offshore wind farm right outside san francisco with an installed capacity of 12mw . the net electricity demand , which is computed by subtracting the wind generation from electricity demand is shown in fig .",
    "[ fig : trace ]",
    ". the highly fluctuating and unpredictable nature of wind generation makes it difficult for the conventional prediction - based energy generation scheduling solutions to work effectively .    *",
    "electricity and natural gas prices * : the electricity and natural gas price data are from pg&e @xcite and are shown in table [ tab : pg&e - tariffs ] . besides , the grid electricity prices for a typical week in summer and winter are shown in fig . [",
    "fig : trace ] . both the electricity demand and the price show strong diurnal properties : in the daytime , the demand and price are relatively high",
    "; at nights , both are low .",
    "this suggests the feasibility of reducing the microgrid operating cost by generating cheaper energy locally to serve the demand during the daytime when both the demand and electricity price are high .    * generator model * : we adopt generators with specifications the same as the one in @xcite .",
    "the full output of a single generator is @xmath242 .",
    "the incremental cost per unit time to generate an additional unit of energy @xmath13 is set to be @xmath243 , which is calculated according to the natural gas price and the generator efficiency .",
    "we set the heat recovery efficiency of co - generation @xmath20 to be @xmath244 according to @xcite .",
    "we also set the unit - time generator running cost to be @xmath245 , which includes the amortized capital cost and maintenance cost according to a similar setting from @xcite .",
    "we set the startup cost @xmath11 equivalent to running the generator at its full capacity for about 5 hrs at its own operating cost which gives @xmath246 .",
    "in addition , we assume for each generator @xmath247 and @xmath248 , unless mentioned otherwise",
    ". for electricity demand trace we use , the peak demand is 30mw .",
    "thus , we assume there are 10 such chp generators so as to fully satisfy the demand .    * local heating system * : we assume an on - demand heating system with capacity sufficiently large to satisfy all the heat demand by itself and without on - off cost or ramp limit .",
    "the efficiency of a heating system is set to @xmath249 according to @xcite , and consequently we can compute the unit heat generation cost to be @xmath250 .",
    "* cost benchmark * : we use the cost incurred by using only external electricity , heating and wind energy ( without chp generators ) as a benchmark .",
    "we evaluate the cost reduction due to our algorithms .",
    "* comparisons of algorithms * : we compare three algorithms in our simulations . ( 1 )",
    "our online algorithm chase ; ( 2 ) the receding horizon control ( rhc ) algorithm ; and ( 3 ) the offline optimal algorithm we introduce in sec .  [ sec : slowrep ] .",
    "rhc is a heuristic algorithm commonly used in the control literature @xcite . in rhc ,",
    "an estimate of the near future ( _ e.g. , _ in a window of length @xmath251 ) is used to compute a tentative control trajectory that minimizes the cost over this time - window .",
    "however , only the first step of this trajectory is implemented . in the next time slot , the window of future estimates shifts forward by @xmath9 slot .",
    "then , another control trajectory is computed based on the new future information , and again only the first step is implemented .",
    "this process then continues .",
    "we note that because at each step rhc does not consider any adversarial future dynamics beyond the time - window @xmath251 , there is no guarantee that rhc is competitive . for the offline algorithm , the inputs are system parameters ( such as @xmath11 , @xmath12 and @xmath15 ) , electricity demand , heat demand , wind power output , gas price , and grid electricity price . for online algorithms chase and rhc , the input is the same as the offline except that at time @xmath26 , only the demands , wind power output , and prices in the past and the look - ahead window ( _ i.e. , _ @xmath252 $ ] ) are available .",
    "the output for all three algorithms is the total cost incurred during the time horizon @xmath51 $ ] .",
    "* purpose * : the experiments in this subsection aim to answer two questions .",
    "first , what is the potential savings with microgrids ?",
    "note that electricity , heat demand , wind station output as well as energy price all exhibit seasonal patterns . as we can see from figs .",
    "[ fig : dtrace_summer ] and [ fig : dtrace_winter ] , during summer ( similarly autumn ) the electricity price is high , while during winter ( similarly spring ) the heat demand is high .",
    "it is then interesting to evaluate under what settings and inputs the savings will be higher .",
    "second , what is the difference in cost - savings with and without the co - generation capability ?",
    "in particular , we conduct two sets of experiments to evaluate the cost reductions of various algorithms .",
    "both experiments have the same default settings , except that the first set of experiments ( referred to as chp ) assumes the chp technology in the generators is enabled , and the second set of experiments ( referred to as nochp ) assumes the chp technology is not available , in which case the heat demand must be satisfied solely by the heating system . in all experiments ,",
    "the look - ahead window size is set to be @xmath253 hours according to power system operation and wind generation forecast practice @xcite .",
    "the cost reductions of different algorithms are shown in fig .",
    "[ fig : with - chp ] and [ fig : without - chp ] .",
    "the vertical axis is the cost reduction as compared to the cost benchmark presented in sec . [",
    "sec : setting ] .",
    "* observations * : first , the whole - year cost reductions obtained by offline are 21.8% and 11.3% for chp and nochp scenarios , respectively .",
    "this justifies the economic potential of using local generation , especially when chp technology is enabled .",
    "then , looking at the seasonal performance of offline , we observe that offline achieves much more cost savings during summer and autumn than during spring and winter .",
    "this is because the electricity price during summer and autumn is very high , thus we can benefit much more from using the relatively - cheaper local generation as compared to using grid energy only .",
    "moreover , offline achieves much more cost savings when chp is enabled than when it is not during spring and winter .",
    "this is because , during spring and winter , the electricity price is relatively low and the heat demand is high .",
    "hence , just using local generation to supply electricity is not economical .",
    "rather , local generation becomes more economical only if it can be used to supply both electricity and heat together ( _ i.e. , _ with chp technology ) .",
    "second , chase performs consistently close to offline across inputs from different seasons , even though the different settings have very different characteristics of demand and supply .",
    "in contrast , the performance of rhc depends heavily on the input characteristics .",
    "for example , rhc achieves some cost reduction during summer and autumn when chp is enabled , but achieves 0 cost reduction in all the other cases .    * ramifications * : in summary , our experiments suggest that exploiting local generation can save more cost when the electricity price is high , and chp technology is more critical for cost reduction when heat demand is high .",
    "regardless of the problem setting , it is important to adopt an intelligent online algorithm ( like chase ) to schedule energy generation , in order to realize the full benefit of microgrids .",
    "* purpose * : we compare the performances of chase to rhc and offline for different sizes of the look - ahead window and show the results in fig .",
    "[ fig : cr_w ] .",
    "the vertical axis is the cost reduction as compared to the cost benchmark in sec .",
    "[ sec : setting ] and the horizontal axis is the size of lookahead window , which varies from 0 to 20 hours .",
    "* observations * : we observe that the performance of our online algorithm chase is already close to offline even when no or little look - ahead information is available ( _ e.g. , _ @xmath254 , @xmath9 , and @xmath255 ) .",
    "in contrast , rhc performs poorly when the look - ahead window is small .",
    "when @xmath251 is large , both chase and rhc perform very well and their performance are close to offline when the look - ahead window @xmath251 is larger than 15 hours .",
    "an interesting observation is that it is more important to perform intelligent energy generation scheduling when there is no or little look - ahead information available .",
    "when there are abundant look - ahead information available , both chase and rhc achieve good performance and it is less critical to carry out sophisticated algorithm design . in fig .",
    "[ fig : ratio1 ] and [ fig : ratio2 ] , we separately evaluate the benefit of looking - ahead under the fast - responding and slow - responding scenarios .",
    "we evaluate the empirical competitive ratio between the cost of chase and offline , and compare it with the theoretical competitive ratio according to our analytical results . in the fast - responding scenario ( fig .",
    "[ fig : ratio1 ] ) , for each generator there are no minimum on / off period and ramping - up / down constraints .",
    "namely , @xmath60 , @xmath61 , @xmath62 , @xmath63 . in the slow - responding scenario ( fig .",
    "[ fig : ratio2 ] ) , we set @xmath256 and @xmath248 .",
    "in both experiments , we observe that the theoretical ratio decreases rapidly as look - ahead window size increases . further , the empirical ratio is already close to one even when there is no look - ahead information .",
    "cost reduction as a function of local generation capacity .",
    "]     cost reduction as a function of local generation capacity . ]",
    "* purpose * : previous experiments show that our algorithms have better performance if a larger time - window of accurate look - ahead input information is available .",
    "the input information in the look - ahead window includes the wind station power output , the electricity and heat demand , and the central grid electricity price . in practice",
    ", these look - ahead information can be obtained by applying sophisticated prediction techniques based on the historical data . however , there are always prediction errors .",
    "for example , while the day - ahead electricity demand can be predicted within 2 - 3% range , the wind power prediction in the next hours usually comes with an error range of 20 - 50% @xcite .",
    "therefore , it is important to evaluate the performance of the algorithms in the presence of prediction error .",
    "* observations * : to achieve this goal , we evaluate chase with look - ahead window size of 1 and 3 hours . according to @xcite ,",
    "the hour - level wind - power prediction - error in terms of the percentage of the total installed capacity usually follows gaussian distribution .",
    "thus , in the look - ahead window , a zero - mean gaussian prediction error is added to the amount of wind power in each time - slot .",
    "we vary the standard deviation of the gaussian prediction error from 0 to 120% of the total installed capacity .",
    "similarly , a zero - mean gaussian prediction error is added to the heat demand , and its standard deviation also varies from 0 to 120% of the peak demand .",
    "we note that in practice , prediction errors are often in the range of 20 - 50% for 3-hour prediction @xcite .",
    "thus , by using a standard deviation up to 120% , we are essentially stress - testing our proposed algorithms .",
    "we average 20 runs for each algorithm and show the results in figs .",
    "[ fig : cr_aerror ] and [ fig : cr_berror ] . as we can see",
    ", both chase and rhc are fairly robust to the prediction error and both are more sensitive to the wind - power prediction error than to the heat - demand prediction error . besides , the impact of the prediction error is relatively small when the look - ahead window size is small , which matches with our intuition .",
    "* purpose * : microgrids may employ different types of local generators with diverse operational constraints ( such ramping up / down limits and minimum on / off times ) and heat recovery efficiencies . it is then important to understand the impact on cost reduction due to these parameters . in this experiment , we study the cost reduction provided by our offline and online algorithms under different settings of @xmath17 , @xmath18 , @xmath15 , @xmath16 and @xmath20 .    * observations * : fig .",
    "[ fig : cr_rud ] and [ fig : cr_tud ] show the impact of ramp limit and minimum on / off time , respectively , on the performance of the algorithms .",
    "note that for simplicity we always set @xmath257 and @xmath258 . as we can see in fig .",
    "[ fig : cr_rud ] , with @xmath17 and @xmath259 of about 40% of the maximum capacity , chase obtains nearly all of the cost reduction benefits , compared with @xmath260 which needs 70% of the maximum capacity .",
    "meanwhile , it can be seen from fig .",
    "[ fig : cr_tud ] that @xmath15 and @xmath261 do not have much impact on the performance .",
    "this suggests that it is more valuable to invest in generators with fast ramping up / down capability than those with small minimum on / off periods . from fig .",
    "[ fig : cr_eta_summer ] and [ fig : cr_eta_winter ] , we observe that generators with large @xmath20 save much more cost during the winter because of the high heat demand .",
    "this suggests that in areas with large heat demand , such as alaska and washington , the heat recovery efficiency ratio is a critical parameter when investing chp generators .",
    "+      thus far , we assumed that the microgrid had the ability to supply all energy demand from local power generation in every time - slot . in practice",
    ", local generators can be quite expensive .",
    "hence , an important question is how much investment should a microgrid operator makes ( in terms of the installed local generator capacity ) in order to obtain the maximum cost benefit .",
    "more specifically , we vary the number of chp generators from 1 to 10 and plot the corresponding cost reductions of algorithms in fig . [",
    "fig : cr_yub ] .",
    "interestingly , our results show that provisioning local generation to produce 60% of the peak demand is sufficient to obtain nearly all of the cost reduction benefits .",
    "further , with just 50% local generation capacity we can achieve about 90% of the maximum cost reduction .",
    "the intuitive reason is that most of the time demands are significantly lower than their peaks .",
    "energy generation scheduling is a classical problem in power systems and involves two aspects , namely unit commitment ( uc ) and economic dispatching ( ed ) .",
    "uc optimizes the startup and shutdown schedule of power generations to meet the forecasted demand over a short period , whereas ed allocates the system demand and spinning reserve capacity among operating units at each specific hour of operation without considering startup and shutdown of power generators . for large power systems , uc involves scheduling of a large number gigantic power plants of several hundred if not thousands of megawatts with heterogeneous operating constraints and logistics behind each action @xcite .",
    "the problem is very challenging to solve and has been shown to be np - complete in general in ( 3a)-(3d ) is an instance of uc , and that uc is np - hard in general does not imply that the instance @xmath200 is also np - hard . ]",
    "sophisticated approaches proposed in the literature for solving uc include mixed integer programming @xcite , dynamic programming @xcite , and stochastic programming @xcite .",
    "there have also been investigations on uc with high renewable energy penetration @xcite , based on over - provisioning approach .",
    "after uc determines the on / off status of generators , ed computes their output levels by solving a nonlinear optimization problem using various heuristics without altering the on / off status of generators @xcite .",
    "there is also recent interest in involving chp generators in ed to satisfy both electricity and heat demand simultaneously @xcite .",
    "see comprehensive surveys on uc in @xcite and on ed in @xcite .",
    "however , these studies assume the demand and energy supply ( or their distributions ) in the entire time horizon are known _ a prior_. as such , the schemes are not readily applicable to microgrid scenarios where accurate prediction of small - scale demand and wind power generation is difficult to obtain due to limited management resources and their unpredictable nature @xcite .",
    "several recent works have started to study energy generation strategies for microgrids .",
    "for example , the authors in @xcite develop a linear programming based cost minimization approach for uc in microgrids .",
    "@xcite considers the fuel consumption rate minimization in microgrids and advocates to build ict infrastructure in microgrids .",
    "@xcite discuss the energy scheduling problems in data centers , whose models are similar with ours .",
    "the difference between these works and ours is that they assume the demand and energy supply are given beforehand , and ours does not rely on input prediction .",
    "online optimization and algorithm design is an established approach in optimizing the performance of various computer systems with minimum knowledge of inputs @xcite .",
    "recently , it has found new applications in data centers @xcite . to the best of our knowledge ,",
    "our work is the first to study the competitive online algorithms for energy generation in microgrids with intermittent energy sources and co - generation .",
    "the authors in @xcite apply online convex optimization framework @xcite to design ed algorithms for microgrids .",
    "the authors in @xcite adopt lyapunov optimization framework @xcite to design electricity scheduling for microgrids , with consideration of energy storage .",
    "however , neither of the above considers the startup cost of the local generations .",
    "in contrast , our work jointly consider uc and ed in microgrids with co - generation .",
    "furthermore , the above three works adopt different frameworks and provide online algorithms with different types of performance guarantee .",
    "in this paper , we study online algorithms for the micro - grid generation scheduling problem with intermittent renewable energy sources and co - generation , with the goal of maximizing the cost - savings with local generation . based on insights from the structure of the offline optimal solution",
    ", we propose a class of competitive online algorithms , called chase that track the offline optimal in an online fashion . under typical settings , we show that chase achieves the best competitive ratio of all deterministic online algorithms , and the ratio is no larger than a small constant 3 .",
    "we also extend our algorithms to intelligently leverage on _ limited prediction _ of the future , such as near - term demand or wind forecast . by extensive empirical evaluations using real - world traces ,",
    "we show that our proposed algorithms can achieve near offline - optimal performance .",
    "there are a number of interesting directions for future work .",
    "first , energy storage systems ( _ e.g. , _ large - capacity battery ) have been proposed as an alternate approach to reduce energy generation cost ( during peak hours ) and to integrate renewable energy sources",
    ". it would be interesting to study whether our proposed microgrid control strategies can be combined with energy storage systems to further reduce generation cost",
    ". however , current energy storage systems can be very expensive .",
    "hence , it is critical to study whether the combined control strategy can reduce sufficient cost with limited amount of energy storage .",
    "second , it remains an open issue whether chase can achieve the best competitive ratios in general cases ( _ e.g. , _ in the slow - responding case ) .",
    "the work described in this paper was partially supported by china national 973 projects ( no .",
    "2012cb315904 and 2013cb336700 ) , several grants from the university grants committee of the hong kong special administrative region , china ( area of excellence project no .",
    "aoe / e-02/08 and general research fund project no .",
    "411010 and 411011 ) , two gift grants from microsoft and cisco , and masdar institute - mit collaborative research project no .",
    "xiaojun lin would like to thank the institute of network coding at the chinese university of hong kong for the support of his sabbatical visit , during which some parts of the work were done .",
    "@xmath262 is an optimal solution for * sp*.    suppose @xmath263 is an optimal solution for * sp*. for completeness , we let @xmath264 and @xmath265 . we define a sequence @xmath266 , @xmath267 as follows :",
    "@xmath268 for all @xmath269 $ ] .",
    "2 .   for all",
    "@xmath269 $ ] and @xmath270 @xmath271\\\\ y^{\\ast}(t ) , & \\mbox{otherwise\\ } \\end{cases}\\ ] ] 3 .",
    "@xmath272 for all @xmath269 $ ] .",
    "we next set the boundary conditions for each @xmath273 by @xmath274 it follows that @xmath275 by lemma  [ lem :- is - theindep.with.bound.con ] , we obtain @xmath276 for all @xmath136 .",
    "hence , @xmath277    [ lem :- is - theindep.with.bound.con ] @xmath142 is an optimal solution for    @xmath143 , despite any boundary conditions @xmath144 .",
    "consider given any boundary condition @xmath144 for @xmath273 .",
    "suppose @xmath278 is an optimal solution for @xmath273 w.r.t .",
    "@xmath144 , and @xmath279 .",
    "we aim to show @xmath280 , by considering the types of critical segment .",
    "( * type-1 * ) : first , suppose that critical segment @xmath132 $ ] is type-1 .",
    "hence , @xmath281 for all @xmath282 $ ] .",
    "hence , @xmath283    * case 1 * : suppose @xmath284 for all @xmath282 $ ] .",
    "hence , @xmath285 we obtain : @xmath286 where eqn .",
    "( [ eqn : delta - def1 ] ) follows from the definition of @xmath96 ( see eqn .",
    "( [ eqn : delta - definition ] ) ) and eqn .",
    "( [ eqn : delta - func1 ] ) follows from lemma  [ lem : delta - function ] .",
    "this completes the proof for case 1 .",
    "* case 2 * : suppose @xmath287 for some @xmath282 $ ] .",
    "this implies that @xmath288 has to involve the startup cost @xmath11 .",
    "next , we denote the minimal set of segments within @xmath132 $ ] by @xmath289,[\\tau_{2}^{b},\\tau_{2}^{e}],[\\tau_{3}^{b},\\tau_{3}^{e}], ... ,[\\tau_{p}^{b},\\tau_{p}^{e}]\\ ] ] such that @xmath290\\ne y_{{\\rm ofa}}(t)$ ] for all @xmath291 $ ] , @xmath292 , where @xmath293 .    since @xmath279 , then there exists at least one @xmath282 $ ] such that @xmath284 .",
    "hence , @xmath294 is well - defined .",
    "note that upon exiting each segment @xmath295 $ ] , @xmath296 switches from 0 to 1 .",
    "hence , it incurs the startup cost @xmath11 .",
    "however , when @xmath297 and @xmath298 , the startup cost is not for critical segment @xmath132 $ ] .",
    "therefore , we obtain : @xmath299\\label{eqn : delta - def21}\\\\   &   & + \\sum_{j=2}^{p-1}\\big(\\sum_{t=\\tau_{j}^{b}}^{\\tau_{j}^{e}}\\delta(t)+\\beta\\big)\\label{eq : delta - def22}\\\\   &   & + \\sum_{t=\\tau_{p}^{b}}^{\\tau_{p}^{e}}\\delta(t)+\\beta{\\rm y}_{i}^{r}\\cdot\\boldsymbol{1}[\\tau_{p}^{e}=t_{i+1}^{c}]+\\beta\\cdot\\boldsymbol{1}[\\tau_{p}^{e}\\ne t_{i+1}^{c}].\\label{eq : delta - def23}\\end{aligned}\\ ] ] now we prove the terms ( [ eqn : delta - def21])([eq : delta - def22])([eq : delta - def23 ] ) are all larger than @xmath300    * first * , we prove ( [ eqn : delta - def21])@xmath301 if @xmath302 then @xmath303 & = & \\sum_{t = t_{i}^{c}+1}^{\\tau_{1}^{e}}\\delta(t)\\\\   & \\geq & \\delta(\\tau_{1}^{e})-\\delta(t_{i}^{c})\\\\   & \\geq & \\delta(\\tau_{1}^{e})+\\beta\\\\   & \\geq & 0.\\end{aligned}\\ ] ]    else if @xmath304    @xmath303 & = & \\sum_{t=\\tau_{1}^{b}}^{\\tau_{1}^{e}}\\delta(t)+\\beta\\\\   & \\geq & \\delta(\\tau_{1}^{e})-\\delta(\\tau_{1}^{b}-1)+\\beta\\\\   & \\geq & \\delta(\\tau_{1}^{e})+\\beta\\\\   & \\geq & 0.\\end{aligned}\\ ] ]    thus we proved ( [ eqn : delta - def21])@xmath301    * second * , we prove ( [ eq : delta - def22])@xmath301 @xmath305    thus we proved ( [ eq : delta - def22])@xmath301    * last * , we prove ( [ eq : delta - def23])@xmath301 if @xmath306 then @xmath307+\\beta\\cdot\\boldsymbol{1}[\\tau_{p}^{e}\\ne t_{i+1}^{c}]\\\\   & \\ge & \\sum_{t=\\tau_{p}^{b}}^{t_{i+1}^{c}}\\delta(t)\\\\   & \\geq & \\delta(t_{i+1}^{c})-\\delta(\\tau_{p}^{b}-1)\\\\   & = & -\\delta(\\tau_{p}^{b}-1)\\\\   & \\ge & 0.\\end{aligned}\\ ] ]    else if @xmath308 , then @xmath307+\\beta\\cdot\\boldsymbol{1}[\\tau_{p}^{e}\\ne t_{i+1}^{c}]\\\\   & = & \\sum_{t=\\tau_{p}^{b}}^{\\tau_{p}^{e}}\\delta(t)+\\beta\\\\   & \\ge & \\delta(\\tau_{p}^{e})-\\delta(\\tau_{p}^{b}-1)+\\beta\\\\   & \\ge & 0.\\end{aligned}\\ ] ] thus we proved ( [ eq : delta - def23])@xmath301    overall , we prove ( [ eq : delta - all])@xmath309    ( * type-2 * ) : next , suppose that critical segment @xmath132 $ ] is type-2 .",
    "hence , @xmath310 for all @xmath282 $ ] .",
    "note that the above argument applies similarly to type-2 setting , when we consider ( case 1 ) : @xmath287 for all @xmath282 $ ] and ( case 2 ) : @xmath284 for some @xmath282 $ ] .",
    "( * type - start * and * type - end * ) : we note that the argument of type-2 applies similarly to type - start and type - end settings .",
    "therefore , we complete the proof by showing @xmath280 for all @xmath311 $ ] .",
    "[ lem : delta - function ] suppose @xmath312 $ ] and @xmath313 .",
    "then , @xmath314\\mbox{\\ is type-1}\\\\ \\ge\\sum_{t=\\tau_{1}+1}^{\\tau_{2}}\\delta(t ) , & \\mbox{if\\ } [ t_{i}^{c}+1,t_{i+1}^{c}]\\mbox{\\ is type-2 } \\end{cases}\\ ] ]    we recall that @xmath315 first , we consider @xmath132 $ ] as type-1 .",
    "this implies that only @xmath113 , whereas @xmath316 for @xmath282 $ ] .",
    "hence , @xmath317 iteratively , we obtain @xmath318    when @xmath132 $ ] is type-2 , we proceed with a similar proof , except @xmath319 therefore , @xmath320",
    "the competitive ratio of @xmath321 @xmath322    we denote the outcome of @xmath321 by @xmath323 .",
    "we aim to show that @xmath324 first , we denote the set of indexes of critical segments for type-@xmath325 by @xmath326 .",
    "note that we also refer to type - start and type - end by type-0 and type-3 respectively .",
    "define the sub - cost for type-@xmath325 by @xmath327^{+}\\end{aligned}\\ ] ] hence , @xmath328 .",
    "we prove by comparing the sub - cost for each type-@xmath325 .",
    "( * type-0 * ) : note that both @xmath329 for all @xmath269 $ ] .",
    "hence , @xmath330    ( * type-1 * ) : based on the definition of critical segment ( definition  [ def : critical - seg ] ) , we recall that there is an auxiliary point @xmath109 , such that either ( @xmath111 and @xmath112 ) or ( @xmath113 and @xmath114 ) .",
    "we also recall that @xmath281 , whereas @xmath331\\\\ 1 , & \\mbox{if\\ } t\\in[\\tilde{t_{i}^{c}},t_{i+1}^{c } ] \\end{cases}\\ ] ] we consider a particular type-1 critical segment @xmath132 $ ] .",
    "we note that by the definition of type-1 , @xmath332 .",
    "@xmath333 and @xmath334 switch from 0 to 1 within @xmath132 $ ] , both incurring startup cost @xmath11 .",
    "the cost difference between @xmath335 and @xmath152 within @xmath132 $ ] is @xmath336 let the number of type-@xmath325 critical segments be @xmath337 .",
    "then , we obtain @xmath338    ( * type-2 * ) and ( * type-3 * ) : we consider a particular type-2 ( or type-3 ) critical segment @xmath132 $ ] , we derive similarly for @xmath339 or 3 as @xmath340    furthermore , we note @xmath341 , because it takes equal numbers of critical segments for increasing @xmath342 from @xmath103 to 0 and for decreasing from 0 to @xmath103 .",
    "overall , we obtain @xmath343 by lemma  [ lem : type-1.cost.bound ] and simplications , we obtain @xmath344    [ lem : type-1.cost.bound ] @xmath345    considering type-1 critical segment , we have @xmath346 on the other hand , we obtain @xmath347}\\frac{\\psi\\big(\\sigma(\\tau),1\\big)-c_{m}}{\\psi\\big(\\sigma(\\tau),0\\big)-\\psi\\big(\\sigma(\\tau),1\\big)+c_{m}}\\\\   &   & { \\displaystyle \\times\\sum_{t = t_{i}^{c}+1}^{t_{i+1}^{c}}\\big(\\psi\\big(\\sigma(t),0\\big)-\\psi\\big(\\sigma(t),1\\big)+c_{m}\\big)\\label{eq : type-1costeq2 } } \\end{array}\\ ] ] whereas lemma  [ lem : segment-1 minimum cost ] shows @xmath348}\\frac{\\psi\\big(\\sigma(\\tau),1\\big)-c_{m}}{\\psi\\big(\\sigma(\\tau),0\\big)-\\psi\\big(\\sigma(\\tau),1\\big)+c_{m}}\\geq\\frac{c_{o}}{p_{\\max}+\\eta \\cdot c_{g}-c_{o}}\\ ] ] and @xmath349 furthermore , we note that @xmath350 is lower bounded by the steepest descend when @xmath351 , @xmath352 and @xmath353 for all @xmath282 $ ] : @xmath354    together , we obtain : @xmath355    therefore , @xmath356    [ lem : segment-1 minimum cost ] @xmath357}\\frac{\\psi\\big(\\sigma(\\tau),1\\big)-c_{m}}{\\psi\\big(\\sigma(\\tau),0\\big)-\\psi\\big(\\sigma(\\tau),1\\big)+c_{m}}\\geq\\frac{c_{o}}{p_{\\max}+\\eta \\cdot c_{g}-c_{o}}\\ ] ]    we expand @xmath358 for each case :    _ case 1 _ : @xmath359 . when @xmath79 , by lemma [ lem : fmcmp ] @xmath360 thus , @xmath361 therefore , @xmath362    _ case 2 _ : @xmath363 .",
    "when @xmath79 , by lemma [ lem : fmcmp ] @xmath364^{+}\\ ] ] thus , @xmath365^{+}+c_{m } \\\\",
    "\\psi\\big(\\sigma(\\tau),0\\big)&=&p(t)a(t)+c_{g}h(t)\\end{aligned}\\ ] ] therefore , @xmath366^{+}}{\\big(p(t)-c_{o}\\big)a(t)+c_{g}\\big(h(t)-\\big[h(t)-\\eta\\cdot a(t)\\big]^{+}\\big)}\\\\   & \\geq & \\frac{c_{o}a(t)}{\\big(p(t)-c_{o}\\big)a(t)+c_{g}\\min\\{h(t),\\eta \\cdot a(t)\\}}\\\\   & \\geq & \\frac{c_{o}a(t)}{\\big(p(t)-c_{o}\\big)a(t)+\\eta \\cdot c_{g}a(t)}\\\\   & = & \\frac{c_{o}}{p(t)-c_{o}+\\eta \\cdot c_{g}}\\end{aligned}\\ ] ]    _ case 3 _ : @xmath367 .",
    "when @xmath79 , by lemma [ lem : fmcmp ] @xmath368 thus , @xmath369^{+ } \\notag\\\\ & & + c_{g}\\big[h(t)-\\eta \\cdot a(t)\\big]^{+}+c_{m }",
    "\\\\ \\psi\\big(\\sigma(\\tau),0\\big)&=&p(t)a(t)+c_{g}h(t)\\end{aligned}\\ ] ] therefore , @xmath370 and @xmath371    combing all the cases , we obtain @xmath348}\\frac{\\psi\\big(\\sigma(\\tau),1\\big)-c_{m}}{\\psi\\big(\\sigma(\\tau),0\\big)-\\psi\\big(\\sigma(\\tau),1\\big)+c_{m}}\\geq\\frac{c_{o}}{p_{\\max}+\\eta \\cdot c_{g}-c_{o}}\\ ] ]",
    "denote an online algorithm by @xmath150 , and an input sequence by @xmath372 . more specifically ,",
    "we write @xmath373 and @xmath374 , when it explicitly refers to input sequence by @xmath375 .",
    "define @xmath376 @xmath377 we have @xmath378    we prove this lemma by contradiction .",
    "suppose that there exists a deterministic online algorithm @xmath150 for * fmcmp * with output @xmath379 , such that @xmath380    also , it follows that for any an input sequence @xmath381 , @xmath382    it follows that ( by lemma  [ lem : fmcmp ] ) @xmath383    based on @xmath150 , we can construct an online algorithm @xmath384 for * sp * , such that @xmath385 .",
    "by lemma  [ lem : fmcmp ] , @xmath386    therefore , we obtain @xmath387 however , as @xmath388 is a lower bound of competitive ratio for any deterministic online algorithm for * sp*. this is contradiction , and it completes our proof .    the competitive ratio for any deterministic online algorithm @xmath150 for @xmath149 is lower bounded by a function : @xmath389 when @xmath390 , we have @xmath391    the basic idea is as follows . given any deterministic online algorithm @xmath150 , we construct a special input sequence @xmath375 , such that @xmath392 for a function @xmath393 .",
    "first , we note that at time @xmath26 , @xmath150 determines @xmath394 only based on the past input in @xmath395 $ ] .",
    "thus , we construct an input sequence @xmath372 progressively as follows :    * @xmath351 . * @xmath396 .",
    "namely , @xmath397 * @xmath398 .    for completeness",
    ", we set the boundary conditions : @xmath399 and @xmath400 .",
    "* step 1 * : computing @xmath374 :    based on our construction of @xmath85 , we can partition @xmath51 $ ] into disjoint segments of consecutive intervals of full demand or zero demand :    * full - demand segment : @xmath401 $ ] , if @xmath352 for all @xmath402 $ ] , and @xmath403 . *",
    "zero - demand segment : @xmath401 $ ] , if @xmath404 for all @xmath402 $ ] , and @xmath405 .",
    "note that according to eqn .",
    "( [ eq : a(t).construction ] ) , @xmath406 .",
    "thus , the time @xmath407 must belong to a full - demand segment . also , full - demand and zero - demand segments appear alternating .",
    "let @xmath408 and @xmath409 be the number of full - demand and zero - demand segments in @xmath51 $ ] respectively .",
    "thus , we have @xmath410    in a full - demand segment @xmath401 $ ] , since @xmath352 , for all @xmath402 $ ] and according to the construction of @xmath21 in eqn .",
    "( [ eq : a(t).construction ] ) , we conclude that @xmath74 generated by @xmath150 must be @xmath411 as a result , in a full - demand segment @xmath401 $ ] with length @xmath412 , @xmath150 incurs a cost @xmath413    similarly , in a zero - demand segment @xmath401 $ ] , @xmath150 incurs a cost @xmath414    let @xmath415 and @xmath416 be the total lengths of full - demand and zero - demand segments in @xmath51 $ ] respectively . by summing the costs over all full - demand and zero - demand segments and simplifying terms , we obtain a compact expression of the cost of @xmath150 w.r.t .",
    "@xmath375 as follows : @xmath417    * step 2 * : ( bounding @xmath418 ) :    we divide the input @xmath375 into critical segments .",
    "we then define @xmath419 be the set of all type-0 , type-2 , type-3 , and the `` increasing '' parts of type-1 critical segments , and @xmath420 be set of the `` plateau '' parts of type-1 critical segments .    here , for a type-1 critical segment",
    "@xmath132 $ ] , the `` increasing '' part is defined as @xmath421 $ ] and the `` plateau '' part is defined as @xmath422 $ ] .",
    "we define @xmath423 and @xmath424 be the costs for @xmath419 and @xmath420 respectively .    on the increasing part",
    "@xmath421 $ ] , the deficit function wriggles up from @xmath103 to @xmath118 , and it cost the same to served the part by either buying power from the grid or using on - site generator ( which incurs a turning - on cost ) .",
    "hence , we can simplify the offline cost on the increasing part as @xmath425    with this simplification , we proceed with the ratio analysis as follows : @xmath426 as @xmath10 goes to infinity , it is clear that to lower - bound the above ratio , it suffices to consider only those @xmath427 ( @xmath428 ) with unbounded length in time .",
    "next , we study each term in the lower bound of the competitive ratio .",
    "we define @xmath429 and @xmath430 as the total length of full - demand ( zero - demand ) intervals in the increasing parts and plateau , respectively .",
    "similarly , we define @xmath431 and @xmath432 as the number of full - demand ( zero - demand ) intervals in the increasing parts and plateau , respectively .",
    "* step 2 - 1 * : ( bounding @xmath433 )    first , we seek to lower - bound the term @xmath434 under the assumption that @xmath435 is unbounded . from the offline solution structure , we know that on type-0 , type-2 , type-3 , and the `` increasing '' parts of type-1 critical segments , the offline optimal cost is given by @xmath436 noticing that we also have @xmath437 , we obtain @xmath438    in @xmath419 , either there is only one type-0 segment , or there are equal number of type-2/3 critical segments and type-1 critical segment `` increasing '' parts . hence , the total deficit function increment , i.e. , @xmath439 , must be no more than the total deficit function decrement , which is upper bounded by @xmath440 where the term @xmath11 accounts for that the deficit function does not end naturally at but get dragged down to@xmath103 at the end of @xmath10",
    ". that is , @xmath441 moreover , since @xmath419 contains only type-0 , type-2 , type-3 , and the `` increasing '' parts of type-1 critical segments , the deficit function increment introduced by every full - demand segment must be no more than @xmath11 .",
    "that is ,    @xmath442    by the above inequalities ,",
    "we continue the derivation as follows : @xmath443    now we discuss the second term in eqn .",
    "( [ eq : type-0.interval.ratio.lower.bound ] ) , denoted as @xmath444 .",
    "recall in the problem setting , @xmath445 .",
    "hence , term @xmath444 is monotonically decreasing in @xmath446 , and its minimum value is taken when @xmath446 is replaced with the upper - boundary value @xmath447 : @xmath448 the above inequality holds for arbitrary @xmath435 .",
    "now we discuss the third term in eqn .",
    "( [ eq : type-0.interval.ratio.lower.bound ] ) , denoted as @xmath449 .",
    "when @xmath435 goes to infinity , @xmath449 can be discussed by two cases . in the first case",
    ", @xmath450 remains bounded when @xmath435 goes to infinity . since @xmath451 we must have unbounded @xmath452 as @xmath435 goes to infinity . as a result ,",
    "the term @xmath449 is unbounded , and so is @xmath434 . in the second case , @xmath450 goes unbounded when @xmath435 goes to infinity . then by eqn .",
    "( [ eq : type - start - relation - increment - decrement ] ) , we know that @xmath452 also goes unbounded and , @xmath453 overall , by substituting eqn .",
    "( [ eq : type-0.interval.term(i).lower.bound ] ) and eqn .",
    "( [ eq : type-0.interval.term(ii).lower.bound ] ) into eqn .",
    "( [ eq : type-0.interval.ratio.lower.bound ] ) , we obtain @xmath454    * step 2 - 2 * : ( bounding @xmath455 )    we now lower - bound the term @xmath456 under the assumption that @xmath457 is unbounded . since @xmath420 only contains the `` plateau '' parts of type-1 critical segments , we have    @xmath458    therefore , @xmath459    in @xmath419 , either there is only one type-0 segment , or there are equal number of type-2/3 critical segments and type-1 critical segment `` increasing '' parts . hence ,",
    "the total deficit function increment , i.e. , @xmath439 , must be no more than the total deficit function decrement , which is upper bounded by @xmath440 where the term @xmath11 accounts for that the deficit function does not end naturally at but get dragged down to@xmath103 at the end of @xmath10 .",
    "that is , on @xmath420 , the total deficit function increment , i.e. , @xmath460 , must be no less than the total deficit function decrement , which is @xmath461 .",
    "that is ,    @xmath462    moreover , since @xmath419 contains only type-0 , type-2 , type-3 , and the `` increasing '' parts of type-1 critical segments , the deficit function increment introduced by every full - demand segment must be no more than @xmath11 .",
    "that is , moreover , on @xmath420 , the deficit function decrement caused by every zero - demand segment must be less than @xmath11 ; otherwise , the deficit function will reach value @xmath103 and it can not be a `` plateau '' part of a type-1 critical segment .",
    "that is , @xmath463 since a plateau part of a type-1 critical segment must end with a full - demand interval , we must have @xmath464 .",
    "we continue the lower bound analysis as follows :    @xmath465    by checking the derivative , we know that the last term is monotonically increasing / decreasing in the ratio @xmath466 . hence , its minimum value is taken when the ratio is replaced with the lower - boundary value @xmath118 or the upper - boundary value @xmath467 .",
    "carrying out the derivation and taking into account the problem setting @xmath390 , we obtain    @xmath468    at the end , we obtain the desired result of @xmath469",
    "the competitive ratio of @xmath470 @xmath471    we note that the proof is similar that of theorem  [ thm : chase - competitive - ratio ] , except with modifications considering time window @xmath251 .",
    "we denote the outcome of @xmath472 by @xmath473    ( * type-0 * ) : similar to the proof of theorem  [ thm : chase - competitive - ratio ]    ( * type-1 * ) : based on the definition of critical segment ( definition  [ def : critical - seg ] ) , we recall that there is an auxiliary point @xmath109 , such that either ( @xmath111 and @xmath112 ) or ( @xmath113 and @xmath114 ) .",
    "we focus on the segment @xmath474 .",
    "we observe @xmath475 , \\end{cases}\\ ] ] we consider a particular type-1 critical segment , i.e. , @xmath476th type-1 critical segment : @xmath132 $ ] .",
    "note that by the definition of type-1 , @xmath477 .",
    "@xmath333 switches from @xmath118 to @xmath9 at time @xmath478 , while @xmath479 switches at time @xmath480 , both incurring startup cost @xmath11 .",
    "the cost difference between @xmath481 and @xmath152 within @xmath132 $ ] is @xmath482 where @xmath483 .",
    "recall the number of type-@xmath325 critical segments @xmath337 .",
    "@xmath484    ( * type-2 * ) and ( * type-3 * ) : we derive similarly for @xmath339 or 3 as @xmath485 note that @xmath486 for all @xmath487 .",
    "furthermore , we note @xmath341 .",
    "overall , we obtain @xmath488    by lemma [ lem : w lower bound type-1 ] and simplifications , we obtain @xmath489    [ lem : w lower bound type-1 ] @xmath490    consider a particular type-1 segment @xmath132 $ ] .",
    "denote the costs of @xmath123 during @xmath491 $ ] and @xmath492 $ ] by @xmath493 and @xmath494 respectively .",
    "* step 1 : * we bound @xmath493 as follows : @xmath495    on the other hand , we obtain @xmath496 the last inequality follows from lemma  [ lem : segment-1 minimum cost ] .    next , we bound the second term by @xmath497    together , we obtain @xmath498    furthermore , we note that @xmath499 is lower bounded by the steepest descend when @xmath351 , @xmath352 and @xmath353 , @xmath500    by eqns .",
    "( [ eq : w type-1 cost eq6])-([eq : w type-1 cost eq7 ] ) , we obtain @xmath501    * step 2 * : we bound @xmath494 as follows .",
    "@xmath502 on the other hand , we obtain @xmath503    therefore , @xmath504    since there are @xmath505 type-1 critical segments , according to eqna .",
    "( [ eq : w type-1 cost eq8])-([eq : w type-1 cost roof-1 ] ) , we obtain @xmath506",
    "[ thm : nofa - optimal ] suppose @xmath211 is an optimal offline solution for each @xmath210 ( @xmath30 )",
    ". then + @xmath212 defined as follows is an optimal offline solution for @xmath36 : @xmath507    first , since that @xmath207 can only be satisfied from external supplies , we can assume @xmath508 for all @xmath26 without loss of generality .",
    "we then present the basic idea of proof .",
    "suppose that @xmath509 is an optimal solution for @xmath36",
    ". we will show that we can construct a new feasible solution @xmath510 for @xmath36 , and a new feasible solution @xmath511 for each @xmath210 , such that @xmath512 where the second inequality follows from lemma  [ lem : fmcmp ] .",
    "@xmath211 is an optimal solution for each @xmath210 .",
    "hence , @xmath513 for each @xmath29 .",
    "thus , @xmath514 hence , @xmath212 is an optimal solution for @xmath36 .",
    "it only remains to prove eqn  ( [ eqn : nofa - cost ] ) .",
    "define @xmath515 based on @xmath516 by : @xmath517 and @xmath518 note that we have sliced @xmath519 into @xmath1 layers @xmath520 in the same manner as @xmath521 .",
    "it is straightforward to see that @xmath522 furthermore , we define @xmath523^{+ } , \\",
    "\\widehat{s}_{n}(t ) = \\big[h^{{\\rm ly\\mbox{-}}n}(t)-\\eta\\cdot\\widehat{u}_n(t)\\big]^{+}\\ ] ] it follows that @xmath524 is feasible for @xmath210 .",
    "finally , by lemmas  [ lem : ngen - v]-[lem : ngen - beta ] , we can show that @xmath525 therefore , it completes the proof .",
    "[ lem : ngen - v ]",
    "@xmath526 @xmath527    first , we note that @xmath509 is an optimal solution for @xmath36 .",
    "hence , @xmath528 for all @xmath26",
    ". then , @xmath529 because we slice @xmath519 into @xmath1 layers @xmath520 in a same manner as @xmath21 into @xmath521 .",
    "hence , @xmath530^{+ } \\\\ & = & \\sum_{r=1}^{n } \\big(a^{{\\rm ly\\mbox{-}}r}(t)-\\widehat{u}_r(t)\\big ) = a(t ) - \\sum_{r=1}^{n } \\widehat{u}_r(t ) \\\\ & = & a(t ) - \\sum_{r=1}^{n } \\tilde{u}_r(t ) \\le   \\sum_{r=1}^{n }   \\tilde{v}_{r}(t ) = \\tilde{v}(t)\\end{aligned}\\ ] ] where the last inequality follows constraint ( c4 ) .",
    "similarly , we can prove eqn .",
    "( [ eqn : ngen - s ] ) considering ( c5 ) .",
    "[ lem : ngen - beta ] @xmath531^{+ }   \\le \\sum_{r=1}^{n } [ \\tilde{y}_r(t ) - \\tilde{y}_r(t\\mbox{-}1)]^{+}\\ ] ]    first , note that @xmath532 is a decreasing sequence . because @xmath533 for all @xmath29 , we obtain @xmath534^{+ }   \\\\ & = & \\begin{cases }    0 ,",
    "\\mbox{\\qquad \\quad if\\ } \\sum_{r=1}^{n } \\widehat{y}_r(t ) \\le \\sum_{r=1}^{n } \\widehat{y}_r(t\\mbox{-}1 ) \\\\     \\sum_{r=1}^{n }",
    "\\widehat{y}_r(t ) - \\sum_{r=1}^{n } \\widehat{y}_r(t\\mbox{-}1 ) , \\mbox{\\ \\ \\ otherwise }   \\end{cases } \\\\   & = &   \\big [ \\sum_{r=1}^{n } \\widehat{y}_r(t ) - \\sum_{r=1}^{n } \\widehat{y}_r(t\\mbox{-}1 ) \\big]^{+ } \\\\   & = & \\big [ \\sum_{r=1}^{n } \\tilde{y}_r(t ) - \\sum_{r=1}^{n } \\tilde{y}_r(t\\mbox{-}1 ) \\big]^{+ }   \\\\   & \\le & \\big [   \\sum_{r=1}^{n } [ \\tilde{y}_r(t ) - \\tilde{y}_r(t\\mbox{-}1)]^{+ }   \\big]^{+ } = \\sum_{r=1}^{n } [ \\tilde{y}_r(t ) - \\tilde{y}_r(t\\mbox{-}1)]^{+ }   \\notag\\end{aligned}\\ ] ]",
    "[ thm : chase - ng ] the competitive ratio of @xmath216 satisfies @xmath217 where @xmath194 $ ] is defined in and @xmath7 $ ] is defined in .",
    "we denote the outcome of @xmath535 be @xmath536 the cost of @xmath535 can be expressed in the following way : @xmath537^{+}\\right)\\right\\ } \\nonumber \\\\   & = & \\sum_{n=1}^{n}\\sum_{t=1}^{t}\\left\\ { p(t)v_{n}^{on}(t)+c_{g}\\cdot s_{n}^{on}(t)+\\right.\\nonumber \\\\   &   & \\left.c_{o}\\cdot u_{n}^{on}(t)+y_{n}^{on}(t)\\cdot c_{m}+\\beta\\cdot\\left[y_{n}^{on}(t)-y_{n}^{on}(t-1)\\right]^{+}\\right\\ } \\nonumber \\\\   & = & \\sum_{n=1}^{n}\\mathrm{cost}\\left(y_{n}^{on},u_{n}^{on},v_{n}^{on},s_{n}^{on}\\right),\\label{eq : exchangesum}\\end{aligned}\\ ] ]    where @xmath538 is the online solution by @xmath539for sub - problem @xmath540    based on theorem 5 , we know the optimal offline solution , denoted as @xmath541 can be expressed as :    @xmath542    where @xmath543 is the optimal offline solution for sub - problem @xmath540 similar as ( [ eq : exchangesum ] ) , we have @xmath544    next , from corollary 1 , we know @xmath545    where @xmath546 is the competitive ratio we achieved in corollary 1 .",
    "thus , by summing up @xmath1 inequalities ( [ eq : singleraito->wholeratio ] ) , we get @xmath547    it completes the proof .",
    "the competitive ratio of @xmath548 is upper bounded by @xmath549 , where @xmath550          * @xmath552 : the cost of online algorithm @xmath553 for * mcmp * with input @xmath375 * @xmath554 : the cost of offline optimal algorithm for * mcmp * with input @xmath375 * @xmath555 : the cost of offline optimal algorithm for * fmcmp * with input @xmath375 * @xmath556 : the cost of online algorithm @xmath557 for * fmcmp * with input @xmath375                          ( [ eq : one - slot ratio ] ) says to build a upper bound of @xmath570 over time slots , we only need to consider the maximum ratio on a single time slot . when @xmath571 , it is easy to see @xmath572 thus , we only consider the situation when @xmath573              eqn .",
    "( [ eq : v - v < u - u ] ) is from @xmath582 note now we have @xmath583 @xmath584^{+}-\\big[a - u_{s}\\big]^{+}\\\\   & = & \\max\\big(a - u_{2},0\\big)+\\min\\big(u_{s}-a,0\\big)\\\\   & = & \\begin{cases } a - u_{2 } & if\\ u_{s}>a > u_{2}\\\\ 0 & if\\ u_{s}>u_{2}>a\\\\ u_{s}-a & if\\ a > u_{s}>u_{2 } \\end{cases}\\\\   & \\leq & u_{s}-u_{2}\\end{aligned}\\ ] ]        now , we still need to upper bound the term @xmath587 note the set @xmath588 represents the time durations when @xmath589 and @xmath560 have different on / off status , and this can only occur on the minimum on / off periods : @xmath590 that is : when @xmath560 has a startup , @xmath589 can not startup the generator because the generator is during its minimum off periods @xmath16 similarly , we know such mismatch of on / off status also occurs during the minimum on periods @xmath591 of @xmath589 .    as @xmath589 always follows @xmath560 to startup ,",
    "thus @xmath589 has at most the same number of startups as @xmath560 .",
    "if we denote the number of the startup of @xmath592 and @xmath589 as @xmath593 and @xmath594 , we have otherwise , @xmath595 , then @xmath596 , thus @xmath597 : @xmath598"
  ],
  "abstract_text": [
    "<S> microgrids represent an emerging paradigm of future electric power systems that can utilize both distributed and centralized generations . </S>",
    "<S> two recent trends in microgrids are the integration of local renewable energy sources ( such as wind farms ) and the use of co - generation ( _ i.e. , _ to supply both electricity and heat ) . </S>",
    "<S> however , these trends also bring unprecedented challenges to the design of intelligent control strategies for microgrids . </S>",
    "<S> traditional generation scheduling paradigms rely on perfect prediction of future electricity supply and demand . </S>",
    "<S> they are no longer applicable to microgrids with unpredictable renewable energy supply and with co - generation ( that needs to consider both electricity and heat demand ) . in this paper </S>",
    "<S> , we study online algorithms for the microgrid generation scheduling problem with intermittent renewable energy sources and co - generation , with the goal of maximizing the cost - savings with local generation . based on the insights from the structure of the offline optimal solution </S>",
    "<S> , we propose a class of competitive online algorithms , called ( competitive heuristic algorithm for scheduling energy - generation ) , that track the offline optimal in an online fashion . under typical settings , we show that achieves the best competitive ratio among all deterministic online algorithms , and the ratio is no larger than a small constant 3 . </S>",
    "<S> we also extend our algorithms to intelligently leverage on _ limited prediction _ of the future , such as near - term demand or wind forecast . by extensive empirical evaluations using real - world traces </S>",
    "<S> , we show that our proposed algorithms can achieve near offline - optimal performance . in a representative scenario , </S>",
    "<S> leads to around 20% cost reduction with no future look - ahead , and the cost reduction increases with the future look - ahead window .    </S>",
    "<S> copyrightspace    modeling techniques ; design studies online computation scheduling </S>"
  ]
}