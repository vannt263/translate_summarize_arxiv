{
  "article_text": [
    "recently the operations of cells on the hochschild complex of associative algebras have been intensely studied .",
    "there are three main sources for this interest .",
    "the first is deligne s conjecture which has been solved in various ways @xcite together with its generalization to @xmath2algebras and to the cyclic case using the framed little discs operad @xcite in conjunction with frobenius algebras .",
    "the second source is the string topology of chas and sullivan @xcite , and lastly the third source are considerations of @xmath3-branes in open / closed string theory as deformations of the hochschild complex see e.g.@xcite . see also @xcite for related discussions of these topics in different settings .    in this paper and its sequel",
    "@xcite we prove the following :    [ introa ] the moduli space @xmath4 of genus @xmath0 curves with @xmath1 punctures and a tangent vector at each of these punctures has the structure of a rational cyclic operad .",
    "this structure induces a cyclic @xmath5 operad structure on a cell model computing the cohomology of @xmath4 .",
    "furthermore the cell level operad operates on the hochschild co  chains of a frobenius algebra .",
    "it also yields correlation functions on the tensor algebra of the co - cycles of a differential algebra @xmath6 with a cyclically invariant trace @xmath7 which satisfies @xmath8 and whose induced pairing on @xmath9 turns @xmath10 into a frobenius algebra .    the first part of the theorem together with the graph description of this moduli space given below can be taken to say that we define a combinatorial version of conformal field theory .",
    "furthermore , there is also a propic version of this action related to string topology .",
    "there is a rational topological quasi ",
    "prop which is homotopic to a cw complex whose cellular chains are isomorphic as a free abelian group to a certain type of sullivan chord diagrams .",
    "these chains form a dg  prop and hence induce this structure on the chord diagrams .",
    "furthermore if @xmath10 is a frobenius algebra there is a propic action on the hochschild co  chains of @xmath10 that is a dg  action .",
    "this dg - action of a dg - prop on the dg  algebra of hochschild co - chains naturally descends to an action of the homology of the cw - complex on the hochschild cohomology of a frobenius algebra .",
    "moreover for @xmath11 as in theorem [ introa ] the action on @xmath10 is induced by correlation functions on the tensor algebra of @xmath12 that yield operadic correlation functions on the tensor algebra of the co  cycles of @xmath12 for any @xmath6 as above .    finally , the @xmath13 operator , which is given by the action of the sub ",
    "prop equivalent to the framed little discs operad , acts as in @xcite .",
    "thus the bv operator for the action on the hochschild cohomology of @xmath10 is identified with connes operator @xmath14 under the identification of the hochschild cohomology of a frobenius algebra with its cyclic cohomology of @xmath10 .",
    "the notions `` quasi '' and `` rational '' denote certain weakenings of the axioms which are explained below .",
    "the definition of the new notion of operadic correlation functions is contained in the second part @xcite .",
    "this notion should be thought of as the correct definition of a dg ",
    "algebra @xmath6 over a cyclic operad .",
    "it is the mathematical incarnation of the fact that opes in physics are actually only defined within correlators and only on brst closed fields .",
    "an immediate consequence using jones @xcite cyclic description of the free loop spaces and its @xmath15action then is    5*corollary . *",
    "_ when taking field coefficients , the above action gives a @xmath5action of a @xmath5prop of sullivan chord diagrams on the @xmath16term of a spectral sequence converging to @xmath17 , that is the homology of the loop space of a simply connected compact manifold , and hence induces operations on the homology of the loop space .",
    "lastly , there is a version of these statements in the case where @xmath18 is a vector space with a differential a pairing @xmath19 that is symmetric such that @xmath20 and @xmath19 is non ",
    "degenerate on @xmath21 which is finite dimensional .",
    "the operads and props above also act on the tensor algebra @xmath22 of a triple @xmath23 as specified above and yield operadic correlation functions for the co - cycles of @xmath22 .",
    "this action is different from the algebra case of theorems a and b , making the result interesting in its own right .",
    "furthermore , this action `` descends '' to an action of the stabilized arc operad , which forms a spectrum @xcite .",
    "the proof of these facts consists mainly of two steps .",
    "first defining the respective topological objects and then defining their actions .    the first step which is the content of this paper is actually quite involved , since there are several natural generalizations of the operads @xmath24 and @xmath25 ( see @xcite ) yielding the gerstenhaber and bv  structures and several types of chain level models for them .",
    "the most notable ones are the @xmath26 operad of @xcite and its subspace @xmath27 consisting of quasi  filling arc families on surfaces without punctures .",
    "we prove below that the space @xmath27 is isomorphic to the moduli space of genus @xmath0 curves with @xmath1 punctures and a tangent vector at each of these punctures modded out by the action of @xmath28 which scales all the tangent vectors simultaneously .",
    "other generalizations are isomorphic to different versions of metric sullivan ",
    "chord diagrams as we explain below .",
    "the reader who is mainly interested in how the action is defined and wants to forgo the geometric topological and algebraic topological constructions of the various relevant operads and prop can skip ahead to the second part @xcite .    in this part",
    ", we will systematically extend and augment the operad structure of @xmath26 and use these topological structures to induce operations on the chain level .",
    "the results are novel operadic and propic structures associated to various restrictions and extensions of the moduli space @xmath4 on the topological and chain level .",
    "the elements of @xmath26 or better of its ambient cw complex @xmath29 can be thought of as metric graphs on a surface with boundaries and one marked point on each boundary , where the set of these points is equal to the set of the vertices of the graph .",
    "@xmath26 is then the subset where all boundaries are `` hit '' that is none of the vertices has valence @xmath30 .",
    "although @xmath26 is an operad , @xmath27 is only an operad on a dense subset .",
    "the cause of this is that on a codimension @xmath31 subset the gluing defined in the ambient @xmath26 will lead outside of @xmath27 .",
    "thus we are lead to consider rational topological operads , that is operads whose gluings are defined on dense open subsets .",
    "since the `` bad '' part is of codimension at least one , this structure , however , descends to a true operad structure on the chain level for suitable chains . considering the dg  structure of the prop action",
    ", we will see in @xcite , that we also have to extend the gluings of the @xmath26 operad to its ambient cw complex @xmath29 ( we give these constructions in ",
    "[ arcsection ] ) .    in order to go into the prop framework",
    ", we need to distinguish the boundaries as `` in '' and `` out '' boundaries . the resulting space which accommodates the extra markings",
    "is denoted by @xmath32 .",
    "there are natural additional restrictions which can be imposed on the graphs .",
    "the first is allowing edges only between `` in '' and `` out '' ; this space will be called @xmath33 . only barring edges from `` in '' to `` in '' , we obtain a subspace which will be called @xmath34 .",
    "these spaces naturally form di  operads . in the dual graph terminology",
    "they correspond to various generalizations of sullivan chord diagrams .",
    "we include a discussion of several versions of sullivan chord diagrams along with their dual representation within @xmath26 that appear in this context and in the literature @xcite , see  [ chordsection ] .",
    "when trying to upgrade them to props one has to allow the gluing of all `` in '' boundaries to all `` out '' boundaries .",
    "this poses too many conditions to make the gluing associative on the topological level . as in @xcite",
    "this situation can be remedied by weakening the notion of a prop to that of a quasi ",
    "prop that is a prop in which the associativity holds up to homotopy . the largest sub ",
    "di  operad of @xmath32 for which this strategy works is @xmath34 . for suitable chains",
    "the induced chain level structure is a prop in the strict sense .",
    "the subspace of @xmath32 given by those elements whose arcs only run from `` in '' to `` out '' but also all `` in '' boundaries are hit is called @xmath35 .",
    "there is a even a finer structure than the `` in / out '' distinction which is given by an angle marking . using angle markings we obtain an all encompassing rational operad .",
    "here the angles refer to the angles of the arc graphs which define elements of the @xmath26 operad and the marking takes values in @xmath36 .",
    "the space of the elements of @xmath26 together with an angle marking is called @xmath37 .",
    "keeping with the theme of angle markings we define the space @xmath38 to be the space of all elements of @xmath29 with additional angle markings .",
    "armed with these notions we can state a first omnibus theorem summing up essential results for the topological objects of interest .",
    "we have the following topological structures :    1 .",
    "the subspace @xmath27 of @xmath26 is a cyclic rational topological operad .",
    "it induces the structure of a cyclic rational topological operad on the spaces @xmath4 .",
    "2 .   @xmath34 is a topological quasi ",
    "prop containing @xmath33 as a topological sub  quasi  prop .",
    "it induces quasi  prop structures on the respective versions of metric sullivan ",
    "chord diagrams .",
    "@xmath37 is a cyclic rational topological operad .",
    "it `` contains '' all of the above in the sense that all the structures can be derived from the gluing in @xmath37 .",
    "@xmath35 is a quasi ",
    "prop structure extending that of @xmath33 .",
    "it induces a quasi ",
    "prop structure on the extension of sullivan ",
    "chord diagrams for which we define the action on the hochschild co  chains in the second part @xcite .",
    "5 .   there exists a cw complex @xmath39 which is homotopy equivalent to @xmath35 .",
    "it can be endowed with the structure of a quasi ",
    "prop that is homotopic to the quasi ",
    "prop structure of @xmath35 .",
    "the same results hold for the restrictions to surfaces with no punctures and to genus zero surfaces as well as the intersection of these conditions",
    ".    the main spaces of interest in the sequel will be @xmath27 and @xmath35 . as stated above the latter",
    "has a cw - model @xmath39 .",
    "this model is the generalization of @xmath40 of @xcite to the prop setting .",
    "the space @xmath27 yields the moduli ",
    "space operations expected for instance from a @xmath3brane point of view and @xmath35 yields string  topology  type operations , i.e.  an propic operation of an extension of sullivan chord diagrams on the loop space of a simply connected manifold .",
    "here we use the term sullivan chord diagram for the contracted version sullivan chord diagrams ; that is that type of diagrams which one obtains after contracting ghost edges .",
    "we would also like to mention that there is a generalization @xmath41 of @xmath35 where one is also allowed to have arcs running from `` out '' to `` out '' .",
    "this is again a quasi ",
    "prop whose cells give a prop .",
    "it is the generalization of @xmath34 .",
    "it turns out , see @xcite that although there is a natural action on the hochschild co - chains , the action of this object is not @xmath5",
    ". there is also a sub  quasi ",
    "prop @xmath42 which is the generalization of the spineless cacti and a sub  cw complex @xmath43 corresponding to it .",
    "in @xcite we show that there is a natural action of @xmath44 that generalizes the @xmath45 action of @xcite .",
    "there is a global object giving rise to all of the needed structures .",
    "this is the cw - complex @xmath38 of angle marked metric arc graphs .",
    "this space has the structure of a rational  quasi ",
    "modular  operad .",
    "although this is a weak structure when restricted to the different subspaces which we pick out , it induces the structures of cyclic operads , rational operads , quasi - props , etc .",
    "we discussed above .",
    "in particular this weak structure is more rigid on the cell level and the correlators that induce all the different actions are defined for the cells of @xmath38 @xcite .",
    "the next step is to form cell models for the spaces in question for which topological structure induce the honest ( not `` quasi '' or `` rational '' ) structures on the chain level .",
    "an essential tool we use is the filtration on @xmath29 by the number of edges of the graph , which gives a filtration of the cells of @xmath29 .",
    "the gluing rules in @xmath26 respect this filtration , so it is possible to consider the associated graded on the cell level .",
    "this for instance gets rid of the codimension one parts which are responsible for the fact that @xmath46 is only a rational operad .",
    "the essential results used in the sequel for the cell level can be summed up as follows .",
    "we have the following chain level structures :    1 .",
    "the relative chains of @xmath26 in @xmath29 form a cellular operad @xmath47 which is filtered by the dimension of the cells .",
    "the associated graded @xmath48 is also a cyclic operad .",
    "the suboperad @xmath49 is a @xmath5operad .",
    "this operad is an operad structure on the collection of graph - complex chain models of the moduli spaces @xmath4 which calculates their cohomology .",
    "@xmath50 is an operad , which contains the relative chains of @xmath51 .",
    "the chains @xmath52 are also naturally embedded .",
    "4 .   @xmath53 is a di  operad and a prop .",
    "it is filtered by dimension and the associated graded @xmath54 is also a di - operad and a prop .",
    "this is a prop of the version of sullivan ",
    "chord diagrams relevant for our purposes .",
    "the cellular chains @xmath55 form a di  operad and a prop  that is a chain model for @xmath35 .",
    "this is a cellular realization of the above prop of sullivan",
    " chord diagrams .",
    "again , the same results hold for the restrictions to surfaces with no punctures and to genus zero surfaces as well as the intersection of these conditions .",
    "these cell models are related via the dual graph construction to the free abelian groups generated by certain types of ribbon graphs , for instance : @xmath56 , the space of marked ribbon graphs and @xmath57 that is the perfectly partitioned di - graphs which can be thought of as stabilized sullivan chord diagrams , see  [ chordsection ] .    the paper is organized as follows :    in  1 , we define the types of graphs and the operations on these graphs which we will need in the sequel . in  2 we start be recalling the constructions of @xcite albeit in slightly different language using mainly graphs .",
    "we go on to generalize these constructions and augment the setting by including a filtration on this space .",
    "one of the new results of this section is the construction of a filtered cell level operad built on @xmath26 and its associated graded . the third paragraph  3 then details the identification of the sub - space @xmath27 with the moduli space of surfaces with marked points and tangent vectors at the marked points .",
    "the tool here is the dual graph construction which turns an element of @xmath27 into a marked metric ribbon graph .",
    "the first main result of the paper , namely that the associated graded of the cells of @xmath27 forms an operad is included in  4 .",
    "this paragraph also contains the identification of this complex with the relevant graph complex .",
    "the last paragraph  5 contains the generalizations to the di  operad and prop structures discussed in the introduction . the main link between all the objects are",
    "angle marked arc graphs .",
    "the second main result which will be used in the sequel is the construction of cell and cw models for the graphs corresponding to sullivan chord diagrams whose action will render the string topology type operations .",
    "we would like to thank the max  planck  institute for mathematics where this work was started , a good portion of it was written in the summer of 2005 and the finishing touches were put on in the summer of 2006 .",
    "the two papers received their final form at the msri , which we would like to thank for its hospitality in may 2006 .",
    "it is a pleasure to thank bob penner , ralph cohen , jim mcclure , dev sinha and craig westerland for discussions on various details during various stages of this project .",
    "we fix @xmath58 to be a field of arbitrary characteristic .",
    "we let @xmath59 be the set @xmath60 .",
    "in this section , we formally introduce the graphs and the operations on graphs which we will use in our analysis .",
    "a graph @xmath61 is a tuple @xmath62 where @xmath63 is an involution @xmath64 without fixed points .",
    "we call @xmath65 the vertices of @xmath61 and @xmath66 the flags of @xmath61 . the edges @xmath67 of @xmath61 are the orbits of the flags under the involution @xmath63 .",
    "a directed edge is an edge together with an order of the two flags which define it . in case",
    "there is no risk of confusion , we will drop the subscripts @xmath61 .",
    "notice that @xmath68 gives a bijection between flags and directed edges .",
    "we also call @xmath69 the set of flags of the vertex @xmath70 and call @xmath71 the valence of @xmath70 and denote it by @xmath72 .",
    "we also let @xmath73 and call these edges the edges incident to @xmath70 .",
    "the geometric realization of a graph is given by considering each flag as a half - edge and gluing the half - edges together using the involution @xmath74 .",
    "this yields a one - dimensional cw complex whose realization we call the realization of the graph .",
    "a ribbon graph with tails is a connected graph together with a cyclic order of the set of flags of the vertex @xmath75 for every vertex @xmath70 .",
    "a ribbon graph with tails that satisfies @xmath76 for all vertices @xmath70 will simply be called a ribbon graph .",
    "notice that we do _ not _ fix @xmath77 .",
    "we will call a ribbon graph stable if it does satisfy this condition .    for a ribbon graph with tails ,",
    "the tail vertices are @xmath78 , the tail edges @xmath79 are the edges incident to the tail vertices and the tail flags @xmath80 are those flags of the tail edges which are _ not _ incident to the tail vertices .",
    "a graph with a cyclic order of the flags at each vertex gives rise to bijections @xmath81 where @xmath82 is the next flag in the cyclic order . since @xmath83 one obtains a map @xmath84 .",
    "the orbits of the map @xmath85 are called the cycles or the boundaries of the graph .",
    "these sets have the induced cyclic order .",
    "notice that each boundary can be seen as a cyclic sequence of directed edges .",
    "the directions are as follows .",
    "start with any flag @xmath86 in the orbit . in the geometric realization",
    "go along this half - edge starting from the vertex @xmath87 , continue along the second half - edge @xmath88 until you reach the vertex @xmath89 then continue starting along the flag @xmath90 and repeat .",
    "an angle is a pair of flags @xmath91 , we denote the set of angles by @xmath92 .",
    "it is clear that @xmath93 yields a bijection between @xmath94 and @xmath92 .",
    "it is however convenient to keep both notions .",
    "the genus @xmath95 of a ribbon graph @xmath61 is given by @xmath96 where @xmath97 .",
    "the surface @xmath98 of a ribbon graph @xmath61 is the surface obtained from the realization of @xmath61 by thickening the edges to ribbons .",
    "i.e.  replace each 0-simplex @xmath70 by a closed oriented disc @xmath99 and each 1-simplex @xmath100 by @xmath101 oriented in the standard fashion .",
    "now glue the boundaries of @xmath101 to the appropriate discs in their cyclic order according to the orientations .",
    "this is a surface whose boundary components are given by the cycles of @xmath102 .",
    "the graph @xmath61 is naturally embedded as the spine of this surface @xmath103 .",
    "let @xmath104 be the surface obtained from @xmath105 by filling in the boundaries with discs . notice that the genus of the @xmath106 is @xmath95 and @xmath107 .",
    "a ribbon graph together with a distinguished cycle @xmath108 is called _ treelike _ if    * the graph is of genus @xmath30 and * for all flags either @xmath109 or @xmath110 ( and not both ) .    in other words each edge is traversed exactly once by the cycle @xmath108",
    ". therefore there is a cyclic order on all ( non  directed ) edges , namely the cyclic order of @xmath108 .",
    "a _ marked ribbon graph _ is a ribbon graph together with a map @xmath111 satisfying the conditions    * for every cycle @xmath112 the directed edge @xmath113 belongs to the cycle . *",
    "all vertices of valence two are in the image of @xmath114 , that is @xmath115 implies @xmath116 .",
    "notice that on a marked treelike ribbon graph there is a linear order on each of the cycles @xmath117 .",
    "this order is defined by upgrading the cyclic order to the linear order @xmath118 in which @xmath119 is the smallest element .",
    "a labelling of the edges of a graph @xmath61 by a set @xmath120 , is a map @xmath121 .",
    "a labelling of a ribbon graph @xmath61 by a set @xmath120 is a map @xmath122cycles of @xmath123 , we will write @xmath124 .",
    "an angle marking by @xmath120 is a map @xmath125 .",
    "[ ribnota ] we will write @xmath126 for the set of marked ribbon graphs of genus @xmath0 with @xmath1 boundary cycles and , by abuse of notation , also for the free abelian group generated by this set .",
    "we set @xmath127 , and we will again not distinguish in notation between the set @xmath128 , the free abelian group generated by it , and the set @xmath129 to avoid unnecessary clutter .",
    "we also write @xmath130 for the set of marked ribbon graphs with @xmath131 cycles together with a labelling by @xmath60 of these cycles .",
    "again we also denote the free abelian group generated by this set as @xmath130 .",
    "finally , to streamline the notation , we will denote the collection @xmath132 simply by @xmath128 .",
    "the meaning of the symbols will always be clear from the context .",
    "a marked treelike ribbon graph is called _ spineless _ , if    * there is at most one vertex of valence @xmath133 .",
    "if there is such a vertex @xmath134 then @xmath135 .",
    "* the induced linear orders on the @xmath117 are ( anti)compatible with that of @xmath108 , i.e.  @xmath136 if and only if @xmath137 .      in this section , we will give the basic definitions of the operations on graphs which we will need .",
    "the contraction @xmath138 of a graph @xmath139 with respect to an edge @xmath140 is defined as follows .",
    "let @xmath141 be the equivalence relation induced by @xmath142 .",
    "then let @xmath143 , @xmath144 and @xmath145 be the induced maps .    for a ribbon graph",
    "the cyclic order is the one which descends naturally .    for a marked ribbon graph",
    ", we define the marking of @xmath146 to be @xmath147 if @xmath148 and @xmath149 if @xmath150 , viz .  the image of the next flag in the cycle .",
    "if there is an angle marking , set @xmath151 and @xmath152 , let @xmath153 and @xmath154 , after the contraction we set @xmath155 and @xmath156 , where we use the notation @xmath157 .",
    "the graph @xmath158 obtained by deletion of an edge @xmath100 of a graph @xmath139 with respect to an edge @xmath140 is defined as follows : set @xmath159 .",
    "that is delete the edge .",
    "notice there might be left  over lone vertices",
    "if @xmath100 was the only edge of the respective vertices , also the graph might become disconnected .    if the graph was a ribbon graph the resulting graph again is a ribbon graph using the cyclic order that descends naturally . in the case of a marked ribbon graph ,",
    "if there was a marking and say @xmath160 for @xmath161 then we set @xmath162 to be the previous flag , otherwise , the marking also descends naturally .    if there is an angle marking and @xmath161 with @xmath163 , with markings @xmath164 for @xmath165 and @xmath166 then in @xmath167 we set @xmath168 .",
    "a metric @xmath169 for a graph is a map @xmath170 .",
    "the ( global ) re - scaling of a metric @xmath171 by @xmath172 is the metric @xmath173 .",
    "the length of a cycle @xmath112 is the sum of the lengths of its edges @xmath174 .",
    "a metric for a treelike ribbon graph is called normalized if the length of each non  distinguished cycle is @xmath31 .",
    "we will write @xmath175 for the set of metric marked ribbon graphs of genus @xmath0 with @xmath1 boundary cycles .",
    "notice that there is an @xmath176action on @xmath177 which scales the metric @xmath178 by an overall factor .",
    "this action of course preserves the genus and number of boundaries .",
    "we set @xmath179 using the same conventions as in notation [ ribnota ] .",
    "the elements of @xmath180 are called graphs with a projective metric .",
    "notice that one can always choose a normalized representative for any projective metric .",
    "we set @xmath181 .",
    "we endow these above sets with a topology by constructing @xmath182 in the standard fashion .",
    "that is we realize them as a subspace of the quotient of the disjoint union of simplices by an equivalence relation . for each graph",
    "@xmath183 with @xmath184 we fix a @xmath58-simplex @xmath185 .",
    "using barycentric coordinates for this simplex , a point of this simplex can be identified with a choice of projective weights on the edges .",
    "the points of @xmath186 can thus be identified with the interior of the disjoint union over all @xmath187 .",
    "furthermore the faces of @xmath185 correspond to the edges of @xmath102 .",
    "now , we use the following identifications : a face of @xmath185 is identified with @xmath188 if @xmath189 .",
    "we give the resulting space the quotient topology ( this is actually a cw complex ) and identify @xmath180 with the image of the interiors of the @xmath185 .",
    "then we give @xmath190 the product topology .      for a marked ribbon graph with a metric ,",
    "let @xmath117 be its cycles , let @xmath191 be their image in the realization and let @xmath192 be the length of @xmath117 .",
    "then there are natural maps @xmath193 which map @xmath15 onto the cycle by starting at the vertex @xmath194 and going around the cycle mapping each point @xmath195 to the point at distance @xmath196 from @xmath197 along the cycle @xmath117 .",
    "this observation connects the current constructions to those involving a more geometric definition of @xmath25 in terms of configurations of circles @xcite and other geometric constructions involving such configurations such as the map @xmath198 used for the @xmath26 operad @xcite . in particular the treelike ribbon graphs correspond to @xmath25 and the spineless treelike ribbon graphs correspond to @xmath24 .        a ribbon graph",
    "a di - graph is a ribbon graph @xmath102 together with a @xmath199 labelling of the cycles of @xmath102 : @xmath200cycles of @xmath201 .",
    "we call the cycles @xmath202 the outgoing ones and @xmath203 the incoming ones .",
    "a di - graph is said to be of type @xmath204 if @xmath205 and @xmath206 .",
    "we will denote the set of these graphs by @xmath207 .    a ribbon di - graph",
    "is called perfectly partitioned , if @xmath208 for every flag @xmath86 . that is each edge is part of one input and one output cycle .",
    "we will call the set of these graphs @xmath209 .",
    "a @xmath210)-labelled ribbon di - graph is a ribbon di - graph together with bijective maps @xmath211 and @xmath212 .",
    "we denote the induced map on @xmath213 by @xmath214 .",
    "if @xmath215 is not mentioned , we will use @xmath216 and @xmath217 as the default indexing sets for a graph of type @xmath204 .",
    "there are many definitions of sullivan chord diagrams in the literature @xcite .",
    "we will use the following conventions .",
    "a sullivan chord diagram is a marked labelled ribbon di - graph which satisfies the following condition :    * after deleting the edges of the incoming cycles one is left with a forest , i.e.  a possibly disconnected set of contractible graphs .",
    "we denote the set of these graphs by @xmath218 and call them sullivan chord diagrams .",
    "a _ strict _ sullivan chord diagram also satisfies the condition    * it is possible to disjointly embed the incoming cycles as circles into the plane .",
    "we denote this set of graphs by @xmath219 .",
    "notice that in a sullivan chord diagram there are two types of edges , those which belong to the @xmath220 cycles and those which belong to the tree part .",
    "these are also sometimes called ghost edges .",
    "the edges of the @xmath220 cycles are traversed exactly once by the @xmath220 cycles and once by the @xmath221 cycles and the edges . that is",
    "if a flag @xmath86 is an element of an @xmath220 cycle , then @xmath88 is an element of an @xmath221 cycle .",
    "the ghost edges are traversed in either direction by @xmath221 cycles , that is both @xmath86 and @xmath88 are elements of @xmath221 cycles .    if one contracts the ghost edges , one obtains a perfectly partitioned di - graph .",
    "for this reason perfectly partitioned di - graphs are sometimes called reduced sullivan chord diagrams .",
    "notice though that such a diagram is not a strict sullivan chord diagram in the above definition , since the @xmath220-cycles will share vertices .      to each of these classes of graphs",
    "there is the corresponding space of graphs whose elements are the graphs of the given type together with a metric .",
    "the notation for these spaces of graphs which we will use is to write @xmath222 in front of the symbol of the graphs , e.g.  @xmath223 and @xmath224 .",
    "these spaces have a natural topology .",
    "first to each set of discrete data , such as the labelling and the di - graph labelling we associate a component , and then forgetting this extra data each of these components can be identified with a subspace of @xmath177 defined by the underlying metric graphs .",
    "it is clear that the spaces corresponding to @xmath209 and @xmath218 are homotopy equivalent .",
    "the homotopy is given by changing the metric , by homogeneously scaling all the lengths of the ghost edges to zero .",
    "we will not use strict sullivan chord diagrams in this paper and we included them only to make contact with the literature where they do sometimes appear .",
    "the following important fact which one can show with some effort characterizes the weak homotopy type of strict sullivan chord diagrams .",
    "[ weaksul ] the map @xmath225 which contracts all ghost edges is a weak fibration with contractible fibers .",
    "hence @xmath224 and @xmath223 are weakly homotopy equivalent .",
    "in this section , we start by giving a brief review of the salient features of the @xmath26 operad of @xcite which is reasonably self - contained .",
    "the presentation of the material closely follows the appendix b of @xcite . for full details",
    ", we refer to @xcite .",
    "in addition this review , we furthermore introduce an equivalent combinatorial language which will be key for the following , in particular for @xcite .",
    "simultaneously , we introduce new cell level structures and the go on to define new cell level operads and extensions of the @xmath26 operad structure .      fix an oriented surface @xmath226 of genus @xmath0 with @xmath227 punctures and @xmath228 boundary components which are labelled from @xmath30 to @xmath229 , together with marked points on the boundary , one for each boundary component .",
    "we call this data @xmath230 for short if no confusion can arise",
    ".    the piece of the @xmath26 operad supported on @xmath230 will be an open subspace of a space @xmath231 .",
    "the latter space is a cw complex whose cells are indexed by graphs on the surface @xmath226 up to the action of the pure mapping class group @xmath232 which is the group of orientation preserving homeomorphisms of @xmath226 modulo homotopies that pointwise fix the set which is the union of the set of the marked points on the boundary and the set of punctures .",
    "a quick review in terms of graphs is as follows .      by an embedding of a graph @xmath61 into a surface @xmath230 ,",
    "we mean an embedding @xmath233 with the conditions    * @xmath61 has at least one edge . * the vertices map bijectively to the marked points on the boundaries .",
    "* no images of two edges are homotopic to each other , by homotopies fixing the endpoints . *",
    "no image of an edge is homotopic to a part of the boundary , again by homotopies fixing the endpoints .",
    "two embeddings are equivalent if there is a homotopy of embeddings of the above type from one to the other .",
    "note that such a homotopy is necessarily constant on the vertices .",
    "the images of the edges are called arcs . and",
    "the set of connected components of @xmath234 are called complementary regions .",
    "changing representatives in a class yields natural bijections of the sets of arcs and connected components of @xmath235 corresponding to the different representatives .",
    "we can therefore associate to each equivalence class of embeddings its sets of arcs together with their incidence conditions and connected components  strictly speaking of course the equivalence classes of these objects .    by a graph @xmath236 on a surface",
    "we mean a triple @xmath237)$ ] where @xmath238 $ ] is an equivalence class of embeddings of @xmath61 into that surface .",
    "we will denote the isomorphism class of complementary regions by @xmath239 .",
    "we will also set @xmath240 .",
    "fixing the surface @xmath230 , we will call the set of graphs on a surface @xmath241 .",
    "notice that due to the orientation of the surface the graph inherits an induced linear order of all the flags at every vertex @xmath242 from the embedding .",
    "furthermore there is even a linear order on all flags by enumerating the flags first according to the boundary components on which their vertex lies and then according to the linear order at that vertex .",
    "this induces a linear order on all edges by enumerating the edges by the first appearance of a flag of that edge .",
    "the set of such graphs on a fixed surface @xmath230 is a poset .",
    "the partial order is given by calling @xmath243)\\prec ( f,\\gamma,[i])$ ] if @xmath244 is a subgraph of @xmath61 with the same vertices and @xmath245 $ ] is the restriction of @xmath238 $ ] to @xmath244 .",
    "in other words , the first graph is obtained from the second by deleting some arcs .",
    "we associate a simplex @xmath246)$ ] to each such graph .",
    "@xmath247 is the simplex whose vertices are given by the set of arcs / edges enumerated in their linear order .",
    "the face maps are then given by deleting the respective arcs .",
    "this allows us to construct a cw complex out of this poset .",
    "fix @xmath248 .",
    "the space @xmath249 is the space obtained by gluing the simplices @xmath250)$ ] for all graphs on the surface according to the face maps .",
    "the pure mapping class group naturally acts on @xmath249 and has finite isotropy @xcite .    the space @xmath251 .",
    "given a graph on a surface , we call its @xmath232 orbit its arc graph . if @xmath236 is a graph on a surface , we denote by @xmath253 its arc graph or @xmath232 orbit .",
    "we denote the set of all arc graphs of a fixed surface @xmath230 by @xmath254 .",
    "a graph is called exhaustive if there are no vertices @xmath70 with @xmath255 .",
    "this condition is invariant under @xmath232 and hence we can speak about exhaustive arc graphs .",
    "the set of all exhaustive arc graphs on @xmath230 is denoted by @xmath256 .",
    "notice that since the incidence conditions are preserved , we can set @xmath257 where @xmath236 is any representative and likewise define @xmath258 .",
    "we call an arc graph exhaustive if and only if it contains no isolated vertices , that is vertices with @xmath255 .",
    "now by construction it is clear that @xmath231 is realized as a cw complex which has one cell for each arc graph @xmath253 of dimension @xmath259 .",
    "moreover the cell for a given class of graphs is actually a map of a simplex whose vertices correspond to the arcs in the order discussed above .",
    "the attaching maps are given by deleting edges and identifying the resulting face with its image .",
    "due to the action of @xmath232 some of the faces of might become identified by these maps , so that the image will not necessarily be a simplex .",
    "the open part of the cell will however be an open simplex .",
    "let @xmath260 be the image of the cell and @xmath261 be its interior , then @xmath262 let @xmath263 denote the standard @xmath1simplex and @xmath264 its interior then @xmath265 which only depends on the underlying graph @xmath102 of @xmath236 .",
    "this also means that the space @xmath231 is filtered by the cells of dimension less than or equal to @xmath58 .",
    "we will use the notation @xmath266 for the pieces of this filtration .",
    "it is clear by construction that the @xmath26 operad again has a decomposition into open cells .",
    "@xmath267    again @xmath268 only depends on the underlying graph @xmath102 of @xmath236 .",
    "[ graded ] we will denote the free abelian group generated by the @xmath269 as above by @xmath270 .",
    "we will write @xmath271 and @xmath272 .",
    "we choose the notation to reflect the fact that we are strictly speaking not dealing with cellular chains , however see  [ graphcompsection ] .",
    "@xmath273 is also graded by the dimension of the cells , we will write @xmath274 for the subgroup generated by cells of dimension @xmath58 and we will also write @xmath275 for the subgroup of cells of dimension @xmath276 .",
    "it is clear that @xmath275 induces a filtration on @xmath273 and that the associated graded is isomorphic to the direct sum of the @xmath274 @xmath277    the differential @xmath278 of @xmath252 also descends to @xmath47 and @xmath48 by simply omitting the cells which are not in @xmath26 .",
    "applying the differential twice will kill two arcs , each original summand will either be twice treated as zero or appear with opposite sign as in @xmath252 . hence the differential squares to zero .",
    "the complex @xmath270 and the isomorphic complex @xmath279 can be identified with the complex of relative cells @xmath280 .",
    "using barycentric coordinates for the open part of the cells the elements of @xmath231 are given by specifying an arc graph together with a map @xmath171 from the edges of the graph @xmath67 to @xmath176 assigning a weight to each edge s.t .",
    "the sum of all weights is 1 .",
    "alternatively , we can regard the map @xmath281 as an equivalence class under the equivalence relation of , i.e.  @xmath282 if @xmath283 .",
    "that is @xmath171 is a projective metric .",
    "we call the set of @xmath284 the projective weights of the edges . in the limit ,",
    "when the projective weight of an edge goes to zero , the edge / arc is deleted , see @xcite for more details . for an example see figure [ f02delta ] , which is discussed below .",
    "an element @xmath285 can be described by a tuple @xmath286},w)$ ] where @xmath230 and @xmath102 are as above , @xmath287}$ ] is a pmc orbit of an equivalence class of embeddings and @xmath171 is a projective metric for @xmath102 .",
    "alternatively it can be described by a tuple @xmath288 where @xmath289 and @xmath171 is a projective metric for the underlying abstract graph @xmath102 .",
    "up to pmc there is a unique graph with one edge and a unique graph with two edges .",
    "the former gives a zero  cell and the latter gives a one  cell whose source is a 1simplex .",
    "its two subgraphs with one edge that correspond to the boundary lie in the same orbit of the action of pmc and thus are identified to yield @xmath15 .",
    "the fundamental cycle is given by @xmath247 of figure [ f02delta ] .",
    "= 4 in      there are several pictures one can use to view elements of @xmath29 . in order to draw elements",
    "them it is useful to expand the marked point on the boundary to an interval or window , and let the arcs end on this interval according to the linear order .",
    "equivalently , one can mark one point of the boundary and let the arcs end in their linear order anywhere but on this point .",
    "we will mostly depict arc graphs in the latter manner .",
    "see figure [ different ] for an example of an arc graph all arcs running to the marked points and its alternate depiction with",
    "_ none _ of the arcs hitting the marked point and all arcs having _ disjoint endpoints_.    = 3 in    since in the following we will always be dealing with arc graphs , we will now omit the over - line in the notation .",
    "hence we will write @xmath291 .",
    "we also fix that @xmath292 is the underlying graph .",
    "furthermore elements of @xmath252 will usually be called @xmath293 and @xmath294 . if @xmath295 we fix that @xmath296 , @xmath297 and @xmath298 are the underlying arc graph , its underlying graph and the projective metric , respectively .",
    "we define the euler characteristic of an element @xmath299 to be @xmath300 .",
    "[ euler ] the following inequality holds @xmath301 and the equality holds if and only if the complementary regions are polygons .    if the complementary regions are polygons , we obtain a triangulation of the surface and hence @xmath302",
    ". there are @xmath303 vertices and @xmath304 edges since the boundaries also count as edges . in this count",
    ", the complementary region contributes 1 , as it should for a polygon . if the complementary regions would have some topology then",
    "their euler - characteristic would be strictly less than 1 and the euler - characteristic of the surface would be bigger ; whence the claim .",
    "we begin by reviewing the construction of @xcite .",
    "we then recast it into a purely combinatorial way .",
    "this will allow us to define the actions of @xcite more simply , but also allow us to show that although @xmath46 is not an operad on the topological level , it is a rational operad and gives rise to a cellular operad .",
    "we define @xmath306 to be the subset of those weighted arc graphs",
    "whose arc graph is exhaustive .",
    "we define @xmath307 . in @xcite",
    "where @xmath308 was inadvertently replaced by the direct limit . ]",
    "notice that the spaces @xmath305 have a natural operations of @xmath309 which permutes the labels @xmath310 and one of @xmath311 which permutes the labels @xmath312 . also notice that the spaces @xmath313 inherit the grading and filtration from @xmath314 .",
    "this is also true for their unions @xmath305 and we will write @xmath315 for these pieces . that is if @xmath316 then @xmath317 .      to give the composite @xmath318 for two arc families @xmath286},w)\\in \\arc(m)$ ] and @xmath319},w ' ) \\in \\arc(n)$ ] one most conveniently chooses metrics on @xmath230 and @xmath320",
    ". the construction does not depend on the choice . with this metric",
    ", one produces a partially measured foliation in which the arcs are replaced by bands of parallel leaves ( parallel to the original arc ) of width given by the weight of the arc . for this",
    "we choose the window representation and also make the window tight in the sense that there is no space between the bands and between the end - points of the window and the bands . finally , we put in the separatrices .",
    "the normalization we choose is that the sum of the weights at boundary @xmath321 of @xmath322 coincides with the sum of the weights at the boundary @xmath30 , we can also fix them both to be one .",
    "now when gluing the boundaries , we match up the windows , which have the same width , and then just glue the foliations .",
    "this basically means that we glue two leaves of the two foliations if they end on the same point .",
    "we then delete the separatrices .",
    "afterwards , we collect together all parallel leaves into one band . in this procedure ,",
    "some of the original bands might be split or `` cut '' by the separatrices .",
    "we assign to each band one arc with weight given by the width of the consolidated band .",
    "if arcs occur , which do not hit the boundaries , then we simply delete these arcs .",
    "we call these arcs or bands `` closed loops '' and say that `` closed loops appear in the gluing '' .",
    "@xcite together with the gluing operations above , the spaces @xmath26 form a cyclic operad .",
    "[ gradinglem ] the gluing operations are compatible with the filtrations , i.e.  @xmath323 .",
    "if @xmath58 is the number of arcs at the boundary @xmath321 of @xmath293 at the boundary and @xmath324 is the number of arcs at the boundary @xmath30 of @xmath294 then the number of glued arcs resulting from the operadic composition @xmath325 is at most @xmath326 .",
    "this comes from the fact that each `` cut '' that is separatrix of the glued foliation contains at least one of the separatrices of the two foliations before gluing .",
    "hence the number of arcs of @xmath327 is at most @xmath328 and the claim follows",
    ".      one can also give a purely combinatorial description of the gluing in which we define the new graph on the glued surface .",
    "an example of a gluing is given in figure [ gluingex1 ] .",
    "=    in the first step we normalize as above to make the sums of weights match .",
    "the weights of the arcs incident to the boundaries @xmath30 and @xmath321 then define two partitions @xmath329 and @xmath330 of the unit interval where each flag incident to the vertices @xmath30 and @xmath321 corresponds now to a subinterval of length given by the weight of the respective arc .",
    "let s first also assume that there are no arcs running from @xmath30 to @xmath30 or from @xmath321 to @xmath321 .",
    "we will call such arcs recursive .",
    "hence we are for the moment assuming that there are no recursive arcs .",
    "let @xmath331 be the biggest common sub - partition .",
    "if in the common partition @xmath331 a subinterval @xmath332 of @xmath329 or @xmath330 is subdivided , let @xmath86 be the flag associated to @xmath332 and duplicate the edge @xmath140 so that there are now two copies @xmath333 and @xmath334 of @xmath100 which are embedded to be parallel .",
    "associate the copies @xmath335 and @xmath336 of the flag @xmath86 in their natural order to the intervals of @xmath337 . now delete the vertex @xmath30 and all flags of the vertex @xmath30 of @xmath338 and the vertex @xmath321 and all the flags of the vertex @xmath321 of @xmath322 .",
    "then glue the remaining graphs with the duplicated flags by defining the involution @xmath339 on the flags of this graph by extending the involution induced by the two original arc graphs , by setting @xmath340 if @xmath341 and @xmath342 correspond to the same subinterval @xmath343 of the partition @xmath331 .",
    "the weight of such a glued edge is defined to be the length of the subinterval @xmath343 .    in the case that there are recursive arcs the combinatorics are a little more difficult . we start out as above and will call a biggest common partition @xmath344",
    ". a subinterval is called recursive if it belongs to a flag which corresponds to an recursive arc .",
    "now , we have to complete the partitions .",
    "this means that if a subinterval is recursive , we have to partition the interval corresponding to @xmath88 in the induced orientation just as the interval corresponding to @xmath86 .",
    "this amounts to cutting the band corresponding to the edge @xmath345 according to the partition .",
    "one might have to iterate this process .",
    "the process will stabilize however , since there are only finitely many intervals and cuts ; and for that matter only finitely many bands after gluing @xcite .",
    "this will yield a partition @xmath331 of the interval .",
    "we now proceed with the combinatorics as above .",
    "thus by replicating edges , we obtain two flags per subinterval of @xmath331 , one on each side .",
    "the glued graph is now defined in three steps .",
    "first fix one vertex for each subinterval an define the two flags incident to the subinterval to be incident to the vertex .",
    "secondly , delete these vertices of valence two and their flags .",
    "thirdly glue the remaining unpaired flags to edges using @xmath339 which is defined analogously as above .    for the embedding one",
    "again uses the window description .",
    "after possible duplications the arcs can be arranged to end in the mid - point of the subintervals of @xmath337 and the embedding is defined by connecting two arcs if their endpoints coincide .    in both cases",
    ", there is a last stabilization step , if the edges corresponding to the first and last interval are parallely embedded , merge them to one edge and define the weight of this edge to be the sum of the weights of the parallel edges .",
    "notice that this prescription automatically deletes any closed arcs , viz .",
    "bands not hitting the boundaries , that might appear in the second step .",
    "[ splitnota ] we wish to fix the following terminology . in the gluing of two families",
    "there are two possibilities for a non  recursive arc which is glued .",
    "it is either _ spilt _ if the flag not incident to the boundary on which the gluing is performed is duplicated or _ not split _ if the opposite is the case .",
    "if the flag is duplicated , it gives rise to a new angle in the glued graph which we call a split angle .",
    "we also call an arc family _ twisted at the boundary @xmath321 _ if the first and the last arcs incident to the boundary @xmath321 become parallel if one allows homotopies moving the endpoints around the boundary @xmath321 .",
    "we use the same terminology for the underlying graphs .      for future reference",
    ", we wish to detail the combinatorics of the gluing if the weights on the arcs on both the boundaries which are to be glued vary freely .",
    "first we treat the case where there are no arcs running from @xmath30 to @xmath30 or from @xmath321 to @xmath321 . also for the moment assume not both boundaries are twisted .",
    "fix @xmath346 and @xmath347 and then let @xmath293 and @xmath294 vary freely inside their cell .",
    "assume that inside the cell @xmath293 has @xmath58 arcs with freely varying weights on the boundary @xmath321 and @xmath294 has @xmath324 arcs with freely varying weights on the boundary @xmath30 .",
    "then the gluing will generically glue these @xmath348 arcs into @xmath349 arcs , since the generic common partition will have exactly that many components .",
    "the combinatorics are hence the decomposition of @xmath350 where @xmath351 are the shuffles of type @xmath352 .",
    "a non  generic situation happens if some of the partition points match up this corresponds passing to the faces of the simplices .",
    "this set is at least of codimension one .",
    "if both gluing boundaries are twisted , we generically only obtain @xmath353 arcs since the two outside arcs will always be parallel after gluing .    now say that there are @xmath227 arcs running from @xmath30 to @xmath30 and @xmath354 arcs from @xmath321 to @xmath321 .",
    "let @xmath58 and @xmath324 be as above .",
    "we notice that the number of arcs after gluing is again generically @xmath349 arcs .",
    "for this , we notice that the final number of arcs is given by the half the number of replicated flags for the gluing minus the number of flags which run from the boundary back to itself . or in the notation of  [ gluingcomb ] , the number of subintervals of @xmath331 minus half the number of recursive flags .",
    "so we are left with one half the number of the non  recursive flags .",
    "the number of these flags corresponds to the interval markings or cuts on the respective subintervals . now counting only these markings , we count each original cut ( subinterval of @xmath344 before the iteration process of  [ gluingcomb ] ) exactly once , since the iteration stops exactly if the opposite side of the interval is non  recursive .",
    "the number of these cuts is @xmath348 as above .",
    "the indexing of the occurring combinatorics can again be done by @xmath351 as per the original cuts , viz .",
    "@xmath344 , but the topology of the resulting arcs is more complex .",
    "now there are two types of non  generic situations .",
    "the first is as above , that is the situation corresponding to the partitioning points matching up .",
    "this is again of codimension one .",
    "the second is given by bands which form closed loops that are erased .",
    "this is actually even of codimension two , since in order for a closed loop to form two of the cuts have to align .",
    "we wish to point out that the gluing we defined in @xcite that is reviewed above extends to a partial cyclic operad structure on @xmath356 .",
    "the @xmath311-action is taken to be the one permuting the labels .",
    "the gluings @xmath325 above are well defined as soon as there are arcs incident to _ both _ @xmath321 and @xmath30 on the surfaces which are glued along these boundaries .",
    "first it is clear that there are family operations which have as input the singular co - chains of the @xmath26 operad and as output products of these chains . so that if we move to pl - chains , we indeed get an operad action on the chain level .",
    "this is the point of view taken in @xcite where we showed that this cell level operad has a gerstenhaber - batalin - vilkovisky ( gbv ) structure up to explicitly given homotopies .",
    "there are two operad structures on the open / relative cell level .",
    "the first is the more nave induced operad structure on the open cells .",
    "and the second one is its associated graded which is more suited for the description of moduli space .    to give the first operad structure",
    "we claim that as sets @xmath357 for some index set @xmath358 .",
    "this reason for this is that if a point of a cell @xmath359 is in the image , the whole cell is .",
    "it is possible to obtain all weights of by varying the weights of the @xmath293 and @xmath294 accordingly , see  [ gluingcomb ] and lemma [ bijectionlem ] below . by lemma [ gradinglem ]",
    "the dimension of the cells @xmath360 appearing in the image is less or equal to the sum of the dimensions @xmath361 and @xmath362 . finally , again by ",
    "[ gluingcomb ] and lemma [ bijectionlem ] , we have cells of the top - possible dimension if and only if not both the boundaries on which one glues are twisted .",
    "lastly , the gluing map between cells is also 1 - 1 precisely when there is no twisting at both boundaries and there are no closed loops .",
    "[ bijectionlem ] the map @xmath325 restricted to @xmath363 is a bijection onto its image if and only if not both @xmath293 is twisted at the boundary @xmath321 and @xmath294 is twisted at the boundary @xmath30 and there are no closed loops . in the case",
    "not both boundaries are twisted @xmath325 restricted to the set of metric arc graphs for which no closed loops appear is bijective onto is image .",
    "fix two surfaces @xmath226 and @xmath364 and let @xmath365 the surface obtained from @xmath230 and @xmath320 by gluing the boundary @xmath30 of @xmath320 to the boundary @xmath321 of @xmath230 and let @xmath324 the simple closed curve which is the image of the boundaries @xmath321 and @xmath30 in the glued surface . to avoid too many super- and subscripts set @xmath366 and likewise for @xmath320 and @xmath367 .",
    "assuming that there are no closed loops , the gluing procedure is such , that the preimage of @xmath325 from @xmath368 can be described as follows . given a weighted arc graph @xmath236 on the glued surface @xmath367 all the preimages that is @xmath293 , @xmath294 such that @xmath369 are obtained by first fixing a point @xmath370 on the curve @xmath324 , then cutting the surface @xmath367 along @xmath324 and finally merging all the parallel bands which might occur after cutting while summing their weights . here",
    "we allow the point @xmath370 to `` split an arc '' . by this",
    "we mean that given a fixed arc with weight @xmath171 we draw a parallel arc to this arc ( say to the right of the arc ) and choose @xmath371 with @xmath372 and put a point between the two parallel arcs , that is to the right of the original arc . fixing the cells @xmath361 and @xmath362 we see that the choice of the point on @xmath324 is fixed up to moving the point along @xmath324 but not crossing any arc . from this description",
    "it follows that @xmath325 is injective precisely if this point @xmath370 does not `` split an arc '' . in the case of closed loops",
    ", we see that we can not detect them on the glued side and that accordingly , the parameters given by their width are free parameters in the pre  image .",
    "we will accordingly split the indexing set @xmath358 of equation [ setcirc ] into @xmath332 which indexes the cells that are in the image of the gluings which do not exhibit any closed loops and @xmath343 which indexes the cells whose graphs are obtained by erasing closed loops . as sets , we have : @xmath373    we define : @xmath374 in @xmath273 where the sign comes from the orientation of the cells given by the enumeration of the arcs .    with",
    "the induced operad structure @xmath47 is a cyclic operad which respects the filtration by dimension .",
    "the fact that the @xmath309-actions permuting the labels together with the operations defined in equation ( [ setop ] ) yield an operad structure follows from the observations of the previous paragraph summed up  [ gluingcomb ] .",
    "the cyclicity under the @xmath311 action is inherent .",
    "the last statement follows from lemma [ gradinglem ] .",
    "the set of associated graded spaces @xmath48 together with the action of the permutation groups on the labels and the operations induced from equation ( [ setop ] ) form a cyclic operad .",
    "[ nodg ] both operad structures are not structures of @xmath5-operads , for the following simple reason .",
    "if we glue together two surfaces then on the glued side , the limit in which the weight of all the arcs hitting the separating curve which is the image of the two glued boundaries goes to zero is possibly allowed and possibly contributes to the boundary of the cell .",
    "this limit , however , is not allowed for the two components , i.e.  the result of this limit does not lie in @xmath375 . for an example , see figure [ boundprobs3 ] . here",
    "the two families have trivial boundary individually in @xmath47 , but their composition has a non  trivial boundary , since the limit where @xmath376 tends to zero is well defined in @xmath26 .",
    "we wish to point out that this limit is not allowed in @xmath46 , see section  [ extasec ] . on the cellular level",
    "there are ways to remedy this situation , see  [ subspaces ] .",
    "=    let us make the cell level operation on the associated graded explicit . if @xmath377 and @xmath378 we obtain @xmath379 for some index sets @xmath358 and @xmath380 with @xmath381 and @xmath382 .",
    "therefore , we get an induced operad structure on @xmath48 by setting @xmath383 where @xmath384 is the usual sign corresponding to the orientation , which is obtained from the shuffle of the edges that is induced by the respective shuffle in the product of sub - simplices @xmath385 as discussed in  [ gluingcomb ] .",
    "the result of the operation ( [ gradedcellop ] ) is zero exactly if the index set @xmath358 is empty and this is the case if and only if both @xmath293 is twisted at @xmath321 and @xmath294 is twisted at @xmath30 .",
    "otherwise @xmath358 coincides with the set @xmath351 of @xmath386-shuffles .",
    "an example of the gluing is given in figure [ boundprobs ] . here",
    "the `` diagonal '' family is of codimension 1 and is included in the open cell gluing while in the graded gluing it is set to zero .",
    "=      another way to phrase the graded construction of the last paragraph is that we have defined an operad structures on the relative cells @xmath280 .",
    "we can extend the operad structure on @xmath280 to a partial operad structure on @xmath387 . recall that @xmath252 is a cw complex whose cells are indexed by graphs with possibly isolated vertices .",
    "we have to define the gluings for the boundaries with isolated vertices . for two arc graphs @xmath388),(\\g',f',[i'])$ ] we define @xmath389 to be given by the induced operation from the topological level if @xmath102 has arcs incident to the boundary @xmath321 and @xmath390 has arcs incident to the boundary @xmath30 .",
    "there are more extensions which are natural .",
    "if either @xmath102 has no arcs incident to the boundary @xmath321 or @xmath390 has no arcs incident to the boundary @xmath30 or both , then we define the gluing to be the cell labelled by the graph obtained from @xmath102 and @xmath390 by deleting all the edges of @xmath390 incident to the @xmath321th boundary and all the edges incident to @xmath102 at the vertex corresponding to the @xmath30th boundary and the vertices at these boundaries .",
    "this graph is considered to lie on the surface obtained by gluing the boundary @xmath30 of @xmath230 to the boundary @xmath321 of @xmath320 .",
    "we obtain an operad structure on the abelian groups @xmath391 by taking the above definition in the cases of both boundaries being hit and both boundaries not being hit and setting to zero all other products .",
    "this gluing prescription together with the @xmath311 action by permutations on the labels indeed gives a cyclic operad structure .",
    "we wish to point out that the gluing of empty to empty actually raises the dimension of the cells by one .",
    "this effect is due to the @xmath176 action by scaling , see the discussion of de - projectivized arcs below in  [ extdsec ] .",
    "the gluings on the spaces @xmath391 defined above together with the action of the groups on the labels define a cyclic operad structure .",
    "this cyclic operad structure descends to homology inducing a structure of a cyclic operad on @xmath392 .    for the first part only the associativity needs to be checked , which is straightforward . for the descent to homology , first notice that for any two classes @xmath393 , @xmath394 : @xmath395 where the signs are the natural signs induced by the orientations of the cells .",
    "the only case which is not straightforward is the case in which the differential deletes the sole edge incident to one of the boundaries involved in the gluing . in this case",
    "the composition yields zero , unless there is also only a sole edge incident to the other boundary involved in the gluing .",
    "then the gluing @xmath396 does not yield zero in the complex , since the dimension goes up by one when gluing two boundary components which do not get hit  as mentioned above . in this special case , the result is the graph obtained from @xmath397 in which the sole edge intersecting the separating curve which is the image of the glued boundaries is deleted . on the other hand ,",
    "this is the only summand of @xmath398 that is not a summand of @xmath399 .",
    "now for the descent property , choose any two classes @xmath400 , @xmath401 .",
    "let @xmath402=a$ ] and @xmath403 $ ] be two representatives @xmath404 .",
    "we wish to set @xmath405 $ ] . due to the relation ( [ dgeq ] ) , we see that indeed @xmath406=[\\a\\circ_i\\b]$ ] , for any other representatives @xmath407=[\\a],[\\b']=[\\b]$ ] . with this definition , the cyclic structure and associativity are clear",
    ".    examples of the formula ( [ dgeq ] ) can be read off from figures [ boundprobs3 ] and [ boundprobs ] .",
    "we wish to point out that in this setting @xmath48 presents itself as a mock-@xmath5 operad in the sense that the left and right hand side of ( [ dgeq ] ) agree even when restricted to @xmath48 .",
    "we will see below  [ dgextend ] that in a suitable restricted case the mixed gluing can also be used to augment the chain level gluings to a @xmath5 structure .",
    "l|l subspace&condition +   + @xmath306 & @xmath409 is surjective .",
    "this means + & that each boundary gets hit by an arc .",
    "+ @xmath410 & the arcs are quasi - filling .",
    "this means that + & complementary regions are polygons + & or once punctured polygons .",
    "+ @xmath411 & all arcs run only from boundary @xmath30 to some + & boundary @xmath412 .",
    "+ @xmath413 & the linear order of the arcs at the boundary @xmath30 + & is anti - compatible with the linear order at each + & boundary . i.e.  if @xmath118 is the linear order at @xmath321 then + & @xmath136 is equivalent to @xmath414 .",
    "+ @xmath415&exactly one arc for each boundary @xmath412 + & which runs to boundary @xmath30 .",
    "+      one can also define the natural linear order of the flags at the boundary zero to the one which is opposite to the linear order induced by the orientation .",
    "this convention is in line with the usual cobordism point of view used in @xcite . in this case",
    "the condition for @xmath420 is the _ compatibility _ of the orders .",
    "the elements of @xmath408 are graphs on surfaces with a metric , i.e.  a function @xmath281 .",
    "furthermore @xmath408 is a cyclic operad equivalent to @xmath26 @xcite . the operad structure on @xmath408 is given as follows .",
    "let @xmath422 be elements of @xmath408 , if the total weight at the boundary @xmath321 of @xmath293 is @xmath172 and the total weight at the boundary @xmath30 of @xmath423 is @xmath178 , then first scale the metric @xmath171 of @xmath293 to @xmath424 and likewise scale the metric @xmath425 of @xmath423 to @xmath426 and afterwards glue as above .                   here the table is to be understood in the sense that the entry in the first column carries the structure of the second column and is additively ( over @xmath431 ) isomorphic to the third column thereby inducing the respective structure .",
    "the claims for the di ",
    "operad structures follow for the results about @xmath26 . for the prop structure ,",
    "the arguments are analogous to those of  [ cellop ] .",
    "we again claim that the prop operations are 11 on cells which are not twisted at the boundary .",
    "the case of closed loops can not appear .",
    "after scaling , the gluing operation is locally given by the shuffle combinatorics of  [ gluingpar ] , so that indeed the image of the prop action will be full cells and 1 - 1 in the case that not both the boundaries are twisted .",
    "this local argument accounts for all arcs of the glued surface passing through the images of the curves defined by the glued boundaries whose weights can all be scaled independently , while all other arcs are unchanged .",
    "so indeed we get an induced map on cells .",
    "locally , that is regarding each pair of glued boundaries separately , the map is 11 precisely if the two boundaries are not both twisted and there are no closed loops .",
    "this yields the above assertion .",
    "the fact that the image cells lie in the relevant prop is clear by the definition of the restriction . combining two `` in '' to `` out '' arcs yields an arc of the same type , and also combining an `` out '' to `` out '' arc with an `` in '' to `` out '' arc again yields an arc running from `` out '' to `` out '' . for the rational structures , we notice that again all `` problems '' arise in at most codimension one . consequently passing to the associated graded induces the unrestricted structures .",
    "recall that @xmath29 was the cw complex that contains @xmath26 as a subset .",
    "we define @xmath432 analogously to @xmath32 .",
    "notice that these spaces are cw - complexes .",
    "we call the collection of these spaces @xmath433 and as usual write @xmath434 .",
    "we let @xmath41 be the collection of subspaces of the spaces of @xmath433 in which there are only arcs running from the @xmath220 to the @xmath221 and possibly from the @xmath221 to the @xmath221 boundaries _ and _ there is no empty @xmath220 boundary .",
    "it is clear that @xmath35 is a retract of @xmath41 by simply scaling all the weights on the arcs connecting @xmath221 to @xmath221 to zero .",
    "so any cell model for @xmath35 also yields a cell model for @xmath41 .",
    "we can extend the operadic gluing to @xmath433 as in  [ extdsec ] , in particular for @xmath41 this means that if we glue to an empty `` out '' boundary , the arcs incident to the respective `` in '' boundary will be deleted .",
    "notice that this leaves us in @xmath41 since none of the arcs hitting the `` in '' boundaries in the glued surface have been effected . as mentioned earlier",
    "this operation is only associative up to homotopy , so @xmath41 is a quasi  di  operad . with respect to the prop structure",
    "we define the maps @xmath438 by setting the weights of the arcs incident to an `` in '' boundary that is glued to an empty `` out '' boundary to zero .",
    "these gluings then goes over to the cell level as in  [ cellops ] and theorem [ cellthm ] .",
    "in particular , this yields the following extension of the gluing to @xmath439 .",
    "the gluing of a cell indexed by an arc graph with an empty `` out '' glued at that `` out '' to a non - empty `` in '' is defined to be the cell indexed by the modified image of the two arc graphs , where the modification is that in the second arc graph all edges incident to the boundary have been deleted as detailed in [ extasec ] .",
    "it is clear that @xmath35 retracts to @xmath39 by homogenously scaling the weights of the sets of arcs incident to each @xmath220 boundary separately for each of these sets , so that their total weight becomes one .",
    "completely analogous to the constructions of @xcite . given an arc graph ,",
    "we define the cell by @xmath441 where @xmath442 is the standard simplex .",
    "we define the attaching maps by gluing the boundary corresponding to a face of a simplex to the cell of lower dimension indexed by the arc graph obtained form the original arc graph by deleting exactly the edge that indexes the face .",
    "it is then straightforward to show that this cw complex realizes @xmath39 .",
    "we define the di  operadic compositions on @xmath444 by scaling the input individually to the weight of the output .",
    "the homotopy prop structure is just the homotopy sub ",
    "prop structure .",
    "notice that in the gluings @xmath438 one only scales at the @xmath220 boundaries which are to be glued so that the weights on the @xmath220 boundaries which remain after gluing are unchanged .",
    "these compositions define a homotopy  prop structure on @xmath444 which makes @xmath35 , @xmath443 and @xmath436 into a sub  quasi  props .",
    "their homotopy ",
    "prop structures descend to prop structures on @xmath439 and @xmath445 .",
    "also , the prop structure of @xmath39 descends to a @xmath5prop structure on @xmath55 .",
    "moreover , the two prop structures @xmath55 and @xmath54 and their differentials when viewed as defined on the same free abelian group generated by the respective arc graphs agree .",
    "tedious but straightforward generalization to the case of several outputs of the analogous statement about @xmath40 and @xmath25 given in @xcite .",
    "since we are dealing with a local scaling which acts independently on the arcs due to the restrictions we imposed , one can construct a homotopy which scales the sum of the weights of the arcs through any given fixed closed curve which is the image of a boundary under a gluing to say @xmath31 .",
    "using these homotopies , one can flow from one association to the other , this shows the quasi ",
    "prop structure .",
    "on the cell level , one has to make sure that all the combinatorially possible graphs arise and that each weight only arises once .",
    "this is a straightforward verification using the techniques presented above .",
    "the sub  props are actually stable under gluing , since one will never induce a twist on the @xmath220 boundaries when gluing .",
    "likewise one can not obtain any `` out '' to `` out '' arcs if they were not previously there .",
    "the last statement about the cw  complex follows from the fact that the cells of lower dimension are killed in the cellular chain complex .",
    "r.   cohen .",
    "_ multiplicative properties of atiyah duality . _ homology homotopy appl . 6 ( 2004 ) , no .",
    "1 , 269281 r.  l.  cohen and v.  godin._a polarized view of string topology . _",
    "topology , geometry and quantum field theory , 127154 , london math .",
    "lecture note ser .",
    ", 308 , cambridge univ . press , cambridge , 2004 .",
    "d.  chataur .",
    "_ a bordism approach to string topology .",
    "res . not .",
    "2005 , no .",
    "46 , 28292875 .",
    "r.  l.  cohen and j.d.s .",
    "jones _ a homotopy theoretic realization of string topology _ math .",
    "ann .  324 ( 2002 ) , no . 4 , 773 - 798 .",
    "m.  chas and d.  sullivan .",
    "_ string topology .",
    "_ preprint math.gt/9911159 . to appear in ann .  of math .",
    "k.  j.  costello .",
    "_ topological conformal field theories and calabi - yau categories_. preprint math.qa/0412149 .",
    "_ the gromov - witten potential associated to a tcft .",
    "_ preprint math.qa/0509264 and _ a dual point of view on the ribbon graph decomposition of moduli space .",
    "_ preprint math.gt/0601130 .",
    "j.  conant and k.  vogtmann .",
    "_ on a theorem of kontsevich .",
    "_ algebr .",
    "topol .   3 ( 2003 ) , 11671224                                    m.  kontsevich and y.  soibelman . _",
    "deformations of algebras over operads and deligne s conjecture .",
    "_ confrence mosh flato 1999 , vol .",
    "i ( dijon ) , 255307 , math .",
    "phys . stud . , 21 , kluwer acad . publ . ,",
    "dordrecht , 2000 .",
    "j.  e.  mcclure and j.  h.  smith , jeffrey h. _ a solution of deligne s hochschild cohomology conjecture .",
    "_ recent progress in homotopy theory ( baltimore , md , 2000 ) , 153 - 193 , contemp .",
    ", 293 , amer .",
    "soc . , providence , ri , 2002 .",
    "d.  sullivan .",
    "_ sigma models and string topology . _ graphs and patterns in mathematics and theoretical physics , 111 , proc .",
    "pure math .",
    ", 73 , amer .",
    "soc . , providence , ri , 2005 .",
    "( reviewer : david chataur ) d.  sullivan . _ open and closed string field theory interpreted in classical algebraic topology .",
    "_ topology , geometry and quantum field theory , 344357 , london math .",
    "lecture note ser . , 308 , cambridge univ",
    ". press , cambridge , 2004        t.  tradler and m.  zeinalian .",
    "_ on the cyclic deligne conjecture _ j. pure appl .",
    "algebra 204 ( 2006 ) , no .",
    "2 , 280299 . a.  a.   voronov .",
    "_ homotopy gerstenhaber algebras . _ confrence mosh flato 1999 , vol .",
    "ii ( dijon ) , 307 - 331 , math . phys .",
    ", 22 , kluwer acad .",
    "dordrecht , 2000 a.  a.   voronov .",
    "_ notes on universal algebra . _ graphs and patterns in mathematics and theoretical physics ( m. lyubich and l. takhtajan , eds . ) , proc . sympos .",
    "pure math .",
    "ams , providence , ri , 2005 , pp ."
  ],
  "abstract_text": [
    "<S> this is the first of two papers in which we prove that a cell model of the moduli space of curves with marked points and tangent vectors at the marked points acts on the hochschild co  chains of a frobenius algebra . </S>",
    "<S> we also prove that a there is dg  prop action of a version of sullivan chord diagrams which acts on the normalized hochschild co - chains of a frobenius algebra . </S>",
    "<S> these actions lift to operadic correlation functions on the co  cycles . </S>",
    "<S> in particular , the prop action gives an action on the homology of a loop space of a compact simply  connected manifold .    </S>",
    "<S> in this first part , we set up the topological operads / props and their cell models . </S>",
    "<S> the main theorems of this part are that there is a cell model operad for the moduli space of genus @xmath0 curves with @xmath1 punctures and a tangent vector at each of these punctures and that there exists a cw complex whose chains are isomorphic to a certain type of sullivan chord diagrams and that they form a prop . </S>",
    "<S> furthermore there exist weak versions of these structures on the topological level which all lie inside an all encompassing cyclic ( rational ) operad . </S>"
  ]
}