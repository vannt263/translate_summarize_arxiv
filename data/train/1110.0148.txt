{
  "article_text": [
    "experiments at the large hadron collider ( lhc )  @xcite will produce tremendous amounts of data . with instantaneous luminosities of @xmath0  @xmath1s@xmath2 and a crossing rate of 40  mhz , the collision rate will be about @xmath3  hz .",
    "but the rate for new physics processes , after accounting for branching fractions and the like , is of order @xmath4  hz , leading to the need to select events out of a huge data sample at the level of @xmath5 .",
    "the compact muon solenoid ( cms ) experiment  @xcite developed a distributed computing model from the very early days of the experiment .",
    "there are a variety of motivating factors for this : a single data center at cern would be expensive to build and operate , whereas smaller data centers at multiple sites are less expensive and can leverage local resources ( both financial and human ) .",
    "but there are also many challenges in making a distributed model work .",
    "the cms distributed computing model  @xcite has different computing centers arranged in a `` tiered '' hierarchy , as illustrated in figure  [ fig : tiers ] , with experimental data typically flowing from clusters at lower - numbered tiers to those at higher - numbered tiers .",
    "the different centers are configured to best perform their individual tasks .",
    "the tier-0 facility at cern is where prompt reconstruction of data coming directly from the detector takes place ; where quick - turnaround calibration and alignment jobs are run ; and where an archival copy of the data is made .",
    "the facility is typically saturated by just those tasks .",
    "there are seven tier-1 centers in seven nations ( including at fnal in the united states ) .",
    "these centers keep another archival copy of the data , and are responsible for performing re - reconstruction of older data with improved calibration and algorithms , and making skims of primary datasets that are enriched in particular physics signals .",
    "they also provide archival storage of simulated samples produced at tier-2 .",
    "there are about 40 tier-2 sites around the world ( including seven in the u.s . )",
    "; they are the primary resource for data analysis by physicists , and also where all simulations done for the benefit of the whole collaboration take place .",
    "these centers thus host both organized and chaotic computing activities .",
    "everything stated so far could just as well have been said two years ago , before the lhc actually began operations .",
    "in fact , it was  @xcite .",
    "what is different now is that we have two years of real operational experience under our belts . in this presentation , we discuss the performance of the computing system in 2010 , its anticipated and actual performance in 2011 , the technical advances that have made that level of performance possible , and some thoughts for the future .",
    "2010 was the first full year of lhc operations , and the distributed computing system performed as expected .",
    "in particular , all workflows ran at their designated facilities from the very beginning ; there was no need to change figure  [ fig : tiers ] on the fly .",
    "the amount of data handled by the system was truly stunning .",
    "the tier-0 facility produced 100 different datasets , with a total of 13.9  billion events and 674  tib . at the tier-1 sites , the data was re - reconstructed 19 times ( far more often than anticipated in the computing model , due to rapidly evolving understanding of the detector ) , with 17.2  billion events and 2.4  pib output .",
    "there were four re - reconstruction passes on the monte carlo ( mc ) samples , with 8.3  billion events and 2.9  pib output .",
    "mc production was done at both tier 1 and tier 2 , with upwards of 500  million events / month produced at peak rates .",
    "there were also many transfers from tier to tier .",
    "the movement of analysis datasets to tier 2 kept up with data - taking , so that data was in the hands of analysts within a day of being reconstructed .",
    "the original computing model envisioned peak rates of 600  mb / s from tier 0 to tier 1 and 1200  mb / s from tier 1 to tier 2 ; these were routinely exceeded .",
    "the original model did not envision transfers among tier-2 sites , but in fact tier-2 sites received about as much data from other tier-2 s as they did from the tier-1 s .",
    "this created more flexibility and efficiency in how data could be moved .",
    "meanwhile , user analysis was successfully migrated to the tier-2 sites .",
    "it was impossible to know for sure that the grid could handle hundreds of users , or even if all of those users would want to use the grid to begin with .",
    "but in 2010 there were about 450 unique analysis users per week , submitting 150,000 analysis jobs per day .",
    "the true metric of success was that , by the time of this conference , 75 papers on the 2010 data had been submitted , accepted or published , with more in the pipeline , and there was never any evidence that computing was ever the bottleneck .",
    "it is remarkable that all of this was achieved in the face of rapidly changing experimental conditions .    as wonderful",
    "as this is , it must be remembered that the lhc only delivered 45  pb@xmath2 of integrated luminosity .",
    "this is less than what the computing system was designed for , and success was mandatory under those conditions .",
    "however , it provided an opportunity to shake down the system under a relatively small load , and to gather data that would help plan for 2011 .    as the 2011 run approached , it was clear that the target instantaneous luminosity for the year would be reached rather quickly , and indeed it was in june .",
    "it was also expected that this would be achieved by having large proton bunches with many interactions per event ; 16 was the amount anticipated by the september technical stop . as a result of this",
    ", the event size was expected to double ( to 0.8  mb / event for the comprehensive reco data format , 0.2  mb / event for the stripped - down aod format ) from the 2010 values , and the processing time was expected to quadruple ( to 96  hs06/event )  @xcite .",
    "while the trigger rate was nominally expected to be 300  hz , it was expected that it would be a challenge to keep it there , given the pressures to try to avoid raising thresholds in the face of higher event rates .",
    "the experience of 2010 plus the above parameters were used as the basis for a very thorough modeling effort of the necessary computing resources .",
    "the expected available resources had already been established through national pledges to the worldwide lhc computing grid ( wlcg )  @xcite .",
    "the model could then be used to tailor operational plans to make sure activities could fit into the resources available .",
    "what was clear was that cms computing was expected to be resource - limited , even after squeezing a lot of efficiency out of operations .",
    "a few highlights of the modeling follow .",
    "one fact that emerged from 2010 operations ( but in retrospect seems fairly obvious ) is that the tier-1 facilities , built at a scale to handle data re - processing when necessary , are not very busy when they are not re - processing data .",
    "thus , it makes sense to move as much mc production as possible from tier 2 to tier 1 , to make use of available tier-1 resources and to leave more room for user analysis at tier 2 .",
    "the left panel of figure  [ fig : t1capacity ] shows how different activities are expected to make use of tier-1 processing resources month by month through 2013 .",
    "one can see that the tier-1 centers are extremely busy when re - processing , but still less so otherwise .",
    "the right panel of figure  [ fig : t1capacity ] shows how disk space is expected to be used at tier-1 .",
    "less space is allocated to aod s at tier 1 than in the original model , which imagined that each of the seven centers would keep a complete copy of the aod .",
    "but the reliability and speed of data transfers gives confidence that keeping only two copies of the aod events across the entire system will be sufficient .",
    "still , to fit within the available resources , physicists must switch from reco to aod format as much as possible , and regular deletion campaigns will be required .",
    "figure  [ fig : t2capacity ] shows similar plots for the planned use of tier-2 resources . as long",
    "as much mc production activity stays at tier 1 , the use of processing resources at tier 2 is reasonable .",
    "but during re - processing periods , mc production moves back to tier 2 , at which point the resources are overcommitted .",
    "in addition , to remain within the available disk resources , 90% of user analysis needs to move from reco to aod samples .",
    "the model assumes that there will be four copies of each analysis dataset across all of the tier-2 sites , but this might have to be reduced if there is a disk - space crunch .",
    "under any circumstances , tier-2 resources are heavily committed over the next few years .",
    "how well does real cms life match up with the plan , which was developed before the lhc started running this year ? here",
    "we discuss recent operational experience , and some of the technological changes that have been implemented to make the cms computing system work better .",
    "figure  [ fig : runtime ] shows the amount of time that the lhc has been operating for physics data - taking each month , through july , compared to the expected operational time that was an input to the model .",
    "the figure also shows the average trigger rate .",
    "overall the lhc duty cycle has been lower than expected , but this has been compensated for by a trigger rate that is consistently greater than 300  hz .",
    "( the trigger rate includes the overlap in primary datasets , which was planned to be about 25% . ) in total , about 1.1  b events have been recorded , compared to 1.3  b expected from the model .",
    "a small amount of contingency has been gained as a result .",
    "given this rate , the size of the full 2011 dataset after a re - reconstruction pass should be about 1  pb .        table  [ tab : eventsize ] compares the sizes of different kinds of events to the expected values , which were based on simulations with realistic running conditions .",
    "in general , pileup has been lower than anticipated , due to an optimization of the luminosity that led to adding more proton bunches rather than increasing the number of protons per bunch .",
    "event sizes are smaller than expected as a result .",
    "the time required to reconstruct events has been about as expected for minimum - bias events , and about 20% larger than planned for other datasets .",
    "so far , event sizes and processing times have been roughly constant with increasing luminosity .",
    "but the lhc has now reached the limit of how many bunches can be circulated in the current configuration , and luminosity must be increased in ways that increases the pileup at the same time . thus the events are expected to get larger and processing times longer as the year continues .",
    ".expected and observed event sizes , in kilobytes .",
    "[ cols=\"^,^,^,^,^,^\",options=\"header \" , ]     [ tab : eventsize ]      as for the operations of facilities at the various tiers , the left panel of figure  [ fig : t0use ] shows the numbers of jobs running and queued during the first weekend in june , when the lhc had 40% livetime .",
    "as can be seen , the tier-0 cluster was saturated , leading to nearly a thousand jobs queued at times .",
    "once the machine stopped , this backlog was quickly cleared .",
    "however , the right panel of the figure shows that the processors were not fully used .",
    "this is because the switch to 64-bit executables and a new version of root led to a larger memory footprint that inhibited efficient use of cpu .",
    "work is in progress to reduce the size of the executable , and to take advantage of whole - node scheduling , in which multiple similar jobs could run on a single node and share read - only memory . despite these challenges , the tier-0 facility is keeping up well enough with reconstructing the data as they arrive .",
    "the seven tier-1 facilities completed a full re - reconstruction of the 2010 data ( nearly 1.5  b events ) in april , and all available 2011 data ( about 600  m events ) in may , as was expected in the original planning .",
    "it is possible that there will not be another re - reconstruction of the data before the end of 2011 , but this depends on whether the software version at tier 0 is changed because of challenging event environments .",
    "meanwhile , 2.8  b mc events were produced through the end of july , as indicated in figure  [ fig : mcprod ] .",
    "the latest simulation samples include out - of - time pileup .",
    "the expected production capacity was 0.22  b events / month , but in fact the system has been capable of much more than that .        some of the success of the tier-1 operations can be attributed to new technology that was implemented this year .",
    "the workflow management system that had been used for data re - processing was originally designed for mc production . in that use case",
    ", it is not fatal to lose some of the events in the course of the processing , as more can always be made .",
    "but it is unacceptable to lose any data events .",
    "a new workflow management system , wmagent  @xcite , is much more robust against such problems , and its deployment was a great help to operations .",
    "it is a state machine rather than a messaging system , and has 100% accountability for all events processed .",
    "one issue that arose was that the current version of the reconstruction software uses more memory than before , and as a result jobs were running longer and more jobs failed . because wmagent can redo failed jobs straightforwardly , this did not become an operational hurdle .",
    "obviously , the system has allowed for more efficient mc production too .",
    "work has also begun to implement whole - node scheduling at the tier-1 sites for further operational efficiencies .",
    "the goal is to have 50% of tier-1 resources used this way by the end of the year .",
    "figure  [ fig : t2use ] shows the number of running , completed and pending jobs at the approximately 50 cms tier-2 centers during the year so far . about 30,000 cores are continually available for use , with an increasing number of them devoted to analysis use , as more mc production moves to tier 1 .",
    "about 250,000 grid jobs are completed each day , more than was anticipated in the original computing model .",
    "still , thousands of jobs are pending on any given day , with longer queues at times of great analysis activity .",
    "this suggests that more resources are needed for analysis , and/or that the jobs are not being optimally scheduled across all the sites .",
    "meanwhile , the user community continues to grow .",
    "figure  [ fig : anausers ] shows the number of unique analysis users in the cms distributed computing system over the past year and a half .",
    "it is steadily growing , modulo peaks and valleys that can be correlated with important events on the particle - physics calendar .",
    "a significant fraction of the collaboration , about 800 users / month , is making use of grid resources .",
    "as noted in the previous section , it was imperative that analysis users start to move towards using the more compact aod format for their work cms was to stay within the available computing resources .",
    "tools have recently been developed to track dataset usage in greater detail .",
    "these tools indicate that the migration is indeed happening as planned , as shown in figure  [ fig : dataset ] .",
    "another experiment previously had these tracking tools ; cms is looking forward to using them to help manage dataset distribution and more .        the operation of the grid sites for analysis will improve with some technology developments that will be deployed shortly in cms .",
    "the cms remote analysis builder ( crab )  @xcite that analysts use to submit jobs will soon have a significant revision .",
    "wmagent will be installed underneath to take advantage of its features . as a result ,",
    "the user interface will change , requiring some user re - education .",
    "also , the greater use of pilot jobs ( or `` glide - ins '' ) for analysis is anticipated . this could allow for a prioritization of user jobs across the distributed system , not just at individual sites , and",
    "could also have potential for balancing usage across sites .",
    "one fact that has emerged from the operation of the cms distributed computing infrastructure for data analysis is that a key limitation of the computing model is that cpu and storage must be co - located ; a dataset must effectivly reside on a disk that is in the same room as the compute node that runs the program that analyzes the dataset .",
    "thus , the data must be placed where the processing resources are .",
    "this is difficult to optimize , as that relies on having some sense of analyst preferences of datasets and sites .",
    "however , we now know that wide - area networking is more reliable than was anticipated when the original monarc model  @xcite was developed . there , dataset transfer between sites was avoided as much as possible . at the same time",
    ", cms has made much progress in optimizing the reading of data files over the network , so that there is very little additional cost compared to reading a file in the same room .",
    "thus , one is inclined to forget co - location and to think big .",
    "what if users could analyze data in one place with a cpu that is in another place ?",
    "in such a scheme , data placement would hardly matter anymore , as any data would be available anytime , anywhere .",
    "users could be insulated from storage problems at sites ; if a file was corrupt at one site , there could be a straighforward and quiet failover to the newtork for access of the same file at a different site .",
    "participation in data analysis could be broadened by enabling users who do not have large storage systems , as those users could still have access to any data .",
    "the dream of a `` diskless tier-3 '' site becomes realistic .",
    "also , it would be straightforward to access data with cloud resources , should that become cost - competitive .",
    "prototype systems for such a scheme have already been deployed , using the xrootd technology  @xcite .",
    "a key element is redirectors that allow jobs to find data at remote sites without any action from the user .",
    "the us cms tier-2 sites have been configured so that a failed file access at a site will fall back to reading the file from another site using the redirector over the wide - area network .",
    "there is still much work to be done to test and operate the system at the needed scale , and to develop monitoring , accounting and throttling systems . in related work",
    ", cms is also exploring how to migrate jobs between sites to optimize the use of processing resources .",
    "the actual use of cms computing in 2011 has been largely in line with the model that was created based on 2010 experience .",
    "some of the parameters have ended up being higher or lower , within about 20% , but the variances have tended to compensate each other . the model does predict that cms will be limited by its computing resources during this year .",
    "early indications of these limitations were already being seen in the run - up to this summer s conferences .",
    "some analyses were slowed by the wait for simulation samples , and there has been significant demand for processing resources at tier 2 . if cern chooses to run the lhc at very high luminosity , this could get worse still . at this writing , in mid - september 2011",
    ", the situation is still quite fluid .",
    "physicists will need to adapt to this new environment .",
    "however , all of this should be taken as good news  the resource limitations reflect the fact that the lhc datasets are growing rapidly , and provide the opportunity for the discovery of new physics .",
    "we can conclude that 2010 was an extremely good year for cms computing .",
    "the distributed system was a strategic asset for producing physics results , and no one has ever complained that their work was limited by the available computing .",
    "it is important to keep in perspective that the operational scales of everyday operations were considered `` bleeding edge '' just a few years ago .",
    "this strong performance has continued in 2011 , but cms has now entered an era of resource constraints . fortunately , continuing technology developments have given some operational breathing room , and some of these advances have the potential to change the paradigm of computing at the lhc , and for data - intensive , high - throughput computing in general .",
    "i thank ian fisk for his advice in preparing the talk and his general comprehensive knowledge of cms computing .",
    "i also thank the organizers of the dpf 2011 conference for an engaging and enjoyable week .",
    "9 see http://public.web.cern.ch/public/en/lhc/lhc-en.html for many details .",
    "r.  adolphi _ et al . _",
    "( cms collaboration ) , `` the cms experiment at the cern lhc , '' journal of instrumentation 3 , s08004 ( 2008 ) . c.  grandi , d.  stickland , l.  taylor .",
    "_ , `` the cms computing model , '' cern - lhcc-2004 - 035 ( 2004 ) . k. bloom , `` the cms computing system : successes and challenges , '' proceedings of the dpf-2009 conference , detroit , mi ( 2009 )",
    ". m.  michelotto , `` a comparison of hep code with spec benchmark on multicore worker nodes , '' proceedings of computing in high energy physics ( chep09 ) , prague , czech republic ( 2009 ) .",
    "j.  knobloch , l.  robertson _",
    "et al . _ ,",
    "`` lhc computing grid techical design report , '' cern - lhcc-2005 - 024 ( 2005 ) .",
    "f.  van lingen _",
    "et al . _ , `` job life cycle management libraries for cms workflow management projects , '' proceedings of computing in high energy physics ( chep09 ) , prague , czech republic ( 2009 ) .",
    "d.  spiga _ et al .",
    "_ , `` automation of user analysis workflow in cms , '' proceedings of computing in high energy physics ( chep09 ) , prague , czech republic ( 2009 ) .",
    "see http://monarc.web.cern.ch/monarc/ for a variety of documents on this topic .",
    "a.  doriga , _ et al .",
    "_ ,  xrootd / txnetfile : a highly scalable architecture for data access in the root environment \" , _ proceedings of the 4th wseas international conference on telecommunications and informatics _ , march 2005 , prague , czech republic ."
  ],
  "abstract_text": [
    "<S> after years of development , the cms distributed computing system is now in full operation . </S>",
    "<S> the lhc continues to set records for instantaneous luminosity , and cms continues to record data at 300  hz . because of the intensity of the beams , there are multiple proton - proton interactions per beam crossing , leading to larger and larger event sizes and processing times . the cms computing system has responded admirably to these challenges . </S>",
    "<S> we present the current status of the system , describe the recent performance , and discuss the challenges ahead and how we intend to meet them . </S>"
  ]
}