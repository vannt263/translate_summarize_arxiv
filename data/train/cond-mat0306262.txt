{
  "article_text": [
    "recent progress in modelling pedestrian dynamics @xcite is remarkable and many valuable results are obtained by using different models , such as the social force model @xcite and the floor field model @xcite . the former model is based on a system of coupled differential equations which has to be solved e.g.  by using a molecular dynamics approach similar to the study of granular matter .",
    "pedestrian interactions are modelled via long - ranged repulsive forces . in the latter model",
    "two kinds of floor fields , i.e. , a static and a dynamic one , are introduced to translate a long - ranged spatial interaction into an attractive local interaction , but with memory , similar to the phenomenon of chemotaxis in biology @xcite .",
    "it is interesting that , even though these two models employ different rules for pedestrian dynamics , they share many properties including lane formation , oscillations of the direction at bottlenecks @xcite , and the so - called faster - is - slower effect @xcite .",
    "although these are important basics for pedestrian modelling , there are still many things to be done in order to apply the models to more practical situations such as evacuation from a building with complex geometry .    in this paper , we will propose a method to construct the static floor field for complex rooms of _ arbitrary _ geometry .",
    "the static floor field is an important ingredient of the model and has to be specified before the simulations .",
    "moreover , the effect of walls and contraction at a wide exit will be taken into account which enables us to obtain realistic behavior in evacuation simulations even for the case of panic situations .",
    "this paper is organized as follows . in sec .",
    "[ humandata ] , we cite experimental data of evacuations to illustrate the strategy of people in panic situations .",
    "then an extended floor field model is introduced in sec .",
    "[ camodel ] including a method of constructing the floor field and wall potentials . in sec .",
    "[ simulation ] results of simulations for various configurations of a room are investigated and concluding discussions are given in sec .",
    "first we discuss the different kinds of human behavior in panic situations .",
    "people in a room try to evacuate in case of fire with their own strategy .",
    "the strategies of the evacuation are well studied up to now , and we cite an example of an experiment of evacuation that was conducted in a large supermarket in japan @xcite .",
    "fire alarms and false smoke were set suddenly in the experiment , and after people had escaped from the building they have been interviewed about their choice of escape routes etc .",
    "data from more than 300 people were collected .",
    "the following list shows the statistics of the answers given :    1 .",
    "i escaped according to the signs and instructions , and also broadcast or guide by shopgirls ( 46.7% ) .",
    "i chose the opposite direction to the smoking area to escape from the fire as soon as possible ( 26.3% ) .",
    "i used the door because it was the nearest one ( 16.7% ) .",
    "i just followed the other persons ( 3.0% ) .",
    "i avoided the direction where many other persons go ( 3.0% ) .",
    "there was a big window near the door and you could see outside .",
    "it was the most `` bright '' door , so i used it ( 2.3% ) .",
    "i chose the door which i m used to ( 1.7% ) .",
    "we see that very different , sometimes even contradictory , choices were made indicating the complexity of an evacuation problem .",
    "if we assume that there are no signs and no guidance by broadcasts as well as no information about the location of the fire , then according to the questionnaires , people will try to evacuate by relying on both one s memory of the route to the nearest door and other people s behavior .",
    "this competition between collective and individual behavior is essential for modelling evacuation phenomena .",
    "it is included in the _ static and dynamic floor fields _ of our model that we have introduced in previous papers @xcite .",
    "in this section we will summarize the update rules of an extended floor field model for modelling panic behavior of people evacuating from a room .",
    "the space is discretized into cells of size @xmath0 which can either be empty or occupied by one pedestrian ( _ hard - core - exclusion _ ) .",
    "each pedestrian can move to one of the unoccupied next - neighbor cells @xmath1 ( or stay at the present cell ) at each discrete time step @xmath2 according to certain transition probabilities @xmath3 ( fig .",
    "[ figmove ] ) as explained below in sec .",
    "[ subrules ] .    for the case of evacuation processes ,",
    "the _ static floor field _",
    "@xmath4 describes the shortest distance to an exit door .",
    "the field strength @xmath5 is set inversely proportional to the distance from the door .",
    "the _ dynamic floor field _",
    "@xmath6 is a _ virtual trace _ left by the pedestrians similar to the pheromone in chemotaxis @xcite .",
    "it has its own dynamics , namely diffusion and decay , which leads to broadening , dilution and finally vanishing of the trace . at @xmath7 for all sites @xmath1 of the lattice the dynamic field is zero , i.e. , @xmath8 .",
    "whenever a particle jumps from site @xmath1 to one of the neighboring cells , @xmath6 at the origin cell is increased by one .",
    "the model is able to reproduce various fundamental phenomena , such as lane formation in a corridor , herding and oscillation at a bottleneck @xcite .",
    "this is an indispensable property for any reliable model of pedestrian dynamics , especially for discussing safety issues",
    ".          the update rules of our ca have the following structure :    1 .",
    "the dynamic floor field @xmath6 is modified according to its diffusion and decay rules , controlled by the parameters @xmath9 and @xmath10 . in each time step of the simulation",
    "each single boson of the whole dynamic field @xmath6 decays with probability @xmath10 and diffuses with probability @xmath9 to one of its neighboring cells",
    ". 2 .   for each pedestrian ,",
    "the transition probabilities @xmath3 for a move to an unoccupied neighbor cell @xmath1 are determined by the two floor fields and one s inertia ( fig .",
    "[ figmove ] ) .",
    "the values of the fields @xmath6 ( dynamic ) and @xmath4 ( static ) are weighted with two sensitivity parameters @xmath11 and @xmath12 : @xmath13 with the normalization @xmath14 . here",
    "@xmath15 represents the inertia effect @xcite given by @xmath16 for the direction of one s motion in the previous time step , and @xmath17 for other cells , where @xmath18 is the sensitivity parameter .",
    "@xmath19 , newly introduced in this paper , is the wall potential which is explained below . in ( [ trap ] )",
    "we do not take into account the obstacle cells ( walls etc . ) as well as occupied cells .",
    "each pedestrian chooses randomly a target cell based on the transition probabilities @xmath3 determined by ( [ formula ] ) .",
    "whenever two or more pedestrians attempt to move to the same target cell , the movement of _ all _ involved particles is denied with probability @xmath20 $ ] , i.e.  all pedestrians remain at their site @xcite .",
    "this means that with probability @xmath21 one of the individuals moves to the desired cell .",
    "which one is allowed to move is decided using a probabilistic method @xcite .",
    "the pedestrians who are allowed to move perform their motion to the target cell chosen in step 3 .",
    "@xmath6 at the origin cell @xmath1 of each _ moving _ particle is increased by one : @xmath22 , i.e.  @xmath6 can take any non - negative integer value .",
    "the above rules are applied to all pedestrians at the same time ( parallel update ) .",
    "some important details are explained in the following subsections .",
    "people tend to avoid walking close to walls and obstacles .",
    "this can be taken into account by using `` wall potentials '' .",
    "we introduce a repulsive potential inversely proportional to the distance from the walls .",
    "the effect of the static floor field is then modified by a factor ( see eq .",
    "( [ trap ] ) ) : @xmath23 where @xmath24 is the minimum distance from all the walls , and @xmath25 is a sensitivity parameter .",
    "the range of the wall effect is restricted up to the distance @xmath26 from the walls .",
    "[ figwall ] shows an example for an evacuation from a room with obstacles using the wall potential . without wall potentials ( @xmath27 ) , jamming areas near every corner can be observed , because everybody tries to evacuate along the same path of minimum length . for @xmath28",
    "these areas are clearly suppressed .",
    "thus the introduction of this additional potential improves the realism of the model .    ) and ( b ) with ( @xmath29 ) wall potential .",
    "we can clearly see the artifact of jamming at every corner without the wall potential .",
    "parameters are @xmath30 and the initial density is @xmath31 . , title=\"fig:\",scaledwidth=22.0% ] ) and ( b ) with ( @xmath29 ) wall potential .",
    "we can clearly see the artifact of jamming at every corner without the wall potential .",
    "parameters are @xmath30 and the initial density is @xmath31 . ,",
    "title=\"fig:\",scaledwidth=22.5% ] + ( a)(b )       and the obstacle is represented by lines @xmath32 .",
    "( b ) the visibility graph for this room .",
    "each node connected by a bond is `` visible '' , i.e. , there are no obstacles between them .",
    "the real number on each bond represents the distance between them as an illustration .",
    ", title=\"fig:\",scaledwidth=30.0% ] + ( a ) +   and the obstacle is represented by lines @xmath32 .",
    "( b ) the visibility graph for this room .",
    "each node connected by a bond is `` visible '' , i.e. , there are no obstacles between them .",
    "the real number on each bond represents the distance between them as an illustration . , title=\"fig:\",scaledwidth=30.0% ] + ( b )    in the following we propose a combination of the visibility graph and dijkstra s algorithm to calculate the static floor field .",
    "these methods enable us to determine the minimum euclidian ( @xmath33 ) distance of any cell to a door with arbitrary obstacles between them .",
    "let us explain the main idea of this method by using the configuration given in fig .",
    "[ figdikstra](a ) where there is an obstacle in the middle of the room .",
    "we will calculate the minimum distance between a cell @xmath34 and the door @xmath35 by avoiding the obstacle .",
    "if the line @xmath36 does not cross the obstacle @xmath32 , then the length of the line , of course , gives the minimum . if , however , as in the example given in fig .",
    "[ figdikstra](a ) , the line @xmath36 crosses the obstacle , one has to make a detour around it",
    ". then we obtain two candidates for the minimum distance , i.e. , lines @xmath37 and @xmath38 .",
    "the shorter one finally gives the minimum distance between @xmath34 and @xmath35 .",
    "if there are more than one obstacle in the room , then we apply the same procedure to each of them repeatedly . here",
    "it is important to note that all the lines pass only the obstacle s edges with an acute angle .",
    "it is apparent that the obtuse edges like @xmath39 and @xmath40 can never be passed by the minimum lines .",
    "to incorporate this idea into the computer program , we first need the concept of the _ visibility graph _ in which only the nodes that are visible to each other are bonded @xcite ( `` visible '' means here that there are no obstacles between them ) .",
    "the set of nodes consists of a cell point @xmath34 , a door @xmath35 and all the acute edges in the room . in the case of fig .",
    "[ figdikstra](a ) , the node set is @xmath41 and the bonds are connected between @xmath42 , @xmath32 , and so on ( fig .",
    "[ figdikstra](b ) ) .",
    "each bond has its own weight which corresponds to the euclidian distance between them .",
    "once we have the visibility graph , we can calculate the distance between @xmath34 and @xmath35 by tracing and adding the weight of the bonds between them .",
    "there are several possible paths between @xmath34 and @xmath35 , and the one with minimum total weight represents the shortest route between them .",
    "the optimization task is easily performed by using the dijkstra method @xcite which enables us to obtain the minimum path on a weighted graph .    performing this procedure for each cell in the room ,",
    "the method allows us to determine the static floor field for arbitrary geometries .",
    "we will call this metric _ dijkstra metric _ in the following .",
    "results for a complex static floor field obtained by this method are shown in fig .",
    "[ figdik ] .",
    "there are two doors in this room , thus we calculate the minimum distance for each door from each cell in the room and take the shorter one as value of the static floor field .",
    "next , we like to point out the advantages of the dijkstra metric compared to the simpler manhattan metric @xcite . fig .",
    "[ figcomp ] shows a comparison of typical configurations during an evacuation from a simple room with no obstacles by using both the dijkstra and the manhattan metric .",
    "we see that for large @xmath12 the pedestrians move preferably along a line in front of the door if the manhattan metric is used , whereas for the dijkstra metric the behavior is more realistic .",
    "and the initial density is @xmath43 .",
    ", title=\"fig:\",scaledwidth=22.0% ]   and the initial density is @xmath43 .",
    ", title=\"fig:\",scaledwidth=22.5% ] + ( a)(b ) +   and the initial density is @xmath43 .",
    ", title=\"fig:\",scaledwidth=22.0% ]   and the initial density is @xmath43 . , title=\"fig:\",scaledwidth=22.5% ]",
    "+ ( c)(d )      we can show that the order of diffusion and decay process in rule 1 ( see sec .",
    "[ subrules ] ) is _ exchangeable _ , i.e. , it makes no difference no matter which of the two processes is applied first .",
    "both diffusion process and decay can be written in difference form as @xmath44 respectively .",
    "thus the combination of the diffusion and decay above gives @xmath45 _ regardless _ of their order .",
    "in @xcite also a continuous dynamic floor field has been investigated .",
    "it was observed that this has no qualitative influence on the behavior of the model .",
    "this comes from the fact that the continuum limit of ( [ decaydiff ] ) is the same as the continuous version in @xcite .",
    "the limit of ( [ decaydiff ] ) is given by @xmath46 where @xmath47 and @xmath48 ( time and space intervals are written as @xmath49 and @xmath50 , @xmath51 ) , respectively , and @xmath52 and @xmath9 are kept constant in the limit @xmath53 .",
    "therefore the dynamics of @xmath6 given by ( [ cdecaydiff ] ) coincides with the previous one if we choose appropriate coefficients .",
    "there are several parameters in our model , and the most important ones are listed below with their physical meaning which is helpful in understanding the collective behavior in the simulations .    1 .",
    "@xmath54 the coupling to the static field characterizes the knowledge of the shortest path to the doors , or the tendency to minimize the costs due to deviation from a planned route @xcite .",
    "this considerably controls one s velocity and evacuation times .",
    "@xmath55 the coupling to the dynamic field characterizes the tendency to follow other people ( _ herding behavior _ ) .",
    "the ratio @xmath56 may be interpreted as the degree of panic .",
    "it is known that people try to follow others particulary in panic situations @xcite ( see sec .",
    "[ humandata ] ) .",
    "this tendency lasts at least until they can escape without any hindrance .",
    "if hindrance by other people takes place often and a tendency to clogging emerges , people try to avoid such directions .",
    "this is taken into account in our dynamic floor field which is proportional to the velocity density , such that people will follow only _ moving _ persons .",
    "@xmath57 this parameter determines the strength of inertia which suppresses quick changes of the direction of motion .",
    "it also reflects the tendency to minimize the costs due to deviation from one s desired route and acceleration @xcite .",
    "@xmath58\\cdots $ ] the friction parameter controls the resolution of conflicts in clogging situations .",
    "both cooperative and competitive behavior at a bottleneck are well described by adjusting @xmath59 @xcite .",
    "5 .   @xmath60\\cdots $ ] these constants control diffusion and decay of the dynamic floor field .",
    "it reflects the randomness of people s movement and the visible range of a person , respectively .",
    "if the room is full of smoke , then @xmath10 takes large value due to the reduced visibility . through diffusion and",
    "decay the trace is broadened , dilute and vanishes after some time .",
    "@xmath61 these parameters specify the wall potential .",
    "pedestrians tend to avoid walking close to walls and obstacles .",
    "@xmath26 is the maximum distance at which people feel the walls .",
    "it reflects one s range of sight or so - called personal space @xcite .",
    "@xmath25 is the sensitivity to the walls , and the ratio @xmath62 reflects to which degree deviations from the shortest route ( which is determined by the static floor field ) are accepted to avoid the walls .",
    "we focus on measuring the total evacuation time by changing the parameters @xmath63 and the configuration of the room , such as width , position and number of doors and obstacles . in all simulations we put @xmath64 , @xmath65 and @xmath66 , and von",
    "neumann neighborhoods are used in eq .",
    "( [ trap ] ) for simplicity .",
    "the size of the room is set to 100 @xmath67 100 cells .    in the previous papers @xcite ,",
    "the influence of the two floor fields on the total evacuation time has been studied in detail . here , the effects of inertia and wall potentials are investigated for concave rooms with some obstacles by using the dijkstra metric .",
    "pedestrians try to keep their preferred velocity and direction as long as possible .",
    "this is taken into account by adjusting the parameter @xmath18 . in fig .",
    "[ figinertia ] , total evacuation times from a room without any obstacles are shown as function of @xmath11 in the cases @xmath68 and @xmath69 .",
    "we see that it is monotonously increasing in the case @xmath68 , because any perturbation from other people becomes large if @xmath11 increases , which causes the deviation from the minimum route .",
    "introduction of inertia effects , however , changes this property qualitatively as seen in fig .",
    "[ figinertia ] .",
    "the _ minimum _",
    "time appears around @xmath70 in the case @xmath69 .",
    "this is well explained by taking into account the physical meanings of @xmath18 and @xmath11 .",
    "if @xmath18 becomes large , people become less flexible and all of them try to keep their own minimum route to the exit according to the static floor field regardless of congestion . by increasing @xmath11 ,",
    "one begins to feel the disturbance from other people through the dynamic floor field .",
    "this perturbation makes one flexible and hence contributes to avoid congestion .",
    "large @xmath11 again works as strong perturbation as in the case of @xmath68 , which diverts people from the shortest route largely .",
    "thus we have the minimum time at a certain magnitude of @xmath11 , which will depend on the value of @xmath12 and @xmath18 .     to the dynamic floor field in the dependence of @xmath18 .",
    "the room is a simple square without obstacles and 50 simulations are averaged for each data point .",
    "parameters are @xmath71 and @xmath72.,scaledwidth=45.0% ]      if the width of an exit becomes large , a more careful treatment is needed in the calculation of the static floor field .",
    "people tend to rush to the center of the exit to avoid the walls .",
    "thus one should introduce an effective width of the exit by neglecting certain cells from its each end .",
    "we call this effect _ contraction _ in this paper , due to its similarity with the contraction effect in hydrodynamics where fluid runs through a orifice with a smaller diameter than that of the orifice immediately after the fluid goes out of it @xcite . the shortest distance from a cell in the room to one of the exit cells",
    "is calculated by using the dijkstra metric , but only those exit cells near the center of the door are taken into account owing to the contraction . then we take the minimum of those shortest distances and use it as the value of the static floor field at the cell . here",
    "we define the ratio of contraction of an exit as @xmath73 , where @xmath74 is the true width of the exit and @xmath75 is the effective width .",
    "if @xmath76 , i.e. , there is no contraction , and we see the artifact of two crowds near the edges of the exit ( fig .  [ figcontra](a ) ) . introducing the contraction makes the evacuation behavior more realistic ( fig .",
    "[ figcontra](b ) ) .     and @xmath77 .",
    ", title=\"fig:\",scaledwidth=22.0% ]   and @xmath77 .",
    ", title=\"fig:\",scaledwidth=22.0% ] + ( a)(b )      let us investigate the effect of the position of obstacles to the total evacuation time . in fig .",
    "[ figobst ] , we set up two rooms such that the total area of obstacles in both rooms is the same .",
    "however , it is important to notice that the maximum length to the exit is different for these rooms .",
    "the maximum length in room ( b ) is 124.6 , which is longer than that in ( a ) ( 115.5 ) .",
    "this difference affects the static floor field and hence the dynamics of people .",
    "the average total evacuation time in case ( a ) is given by 357.48 time steps , while in ( b ) it is 379.22 time steps .",
    "this implies that , even though the area of obstacles is the same , their positions in the room will affect the evacuation dynamics considerably through the static floor field .",
    "it is worth mentioning that this simulation is different from the column problem we have studied previously @xcite .",
    "the existence of a small column in front of an exit does not change the static floor field so much , but works as a simple obstacle which divides the flow of evacuating people .",
    "and the initial density of the room is @xmath31 .",
    ", title=\"fig:\",scaledwidth=22.0% ]   and the initial density of the room is @xmath31 .",
    ", title=\"fig:\",scaledwidth=22.0% ] + ( a)(b )      finally we study the effect of the width of an exit as well as the total number of doors in a room .",
    "we compare a room with an exit of size 10 to one with two exits of size 5 ( fig .",
    "[ figexit ] ) .",
    "although the total width of the exits is the same , the evacuation dynamics is different .",
    "the total evacuation time is 275 time steps in average for the case of one exit , but 245 for two exits ( fig.[figexit](a ) ) .",
    "if the two doors are set at opposite walls , the evacuation time is further improved to 220 time steps ( fig.[figexit](b ) ) .",
    "this is similar to the effect studied in sec .",
    "[ posob ] , because the minimum length in the case of fig .",
    "[ figexit ] ( b ) becomes 68.2 while it is 104.1 in ( a ) .     and",
    ", title=\"fig:\",scaledwidth=22.0% ]   and @xmath31 .",
    ", title=\"fig:\",scaledwidth=22.0% ] + ( a)(b )",
    "in this paper we have discussed the main properties of the floor field cellular automaton model for pedestrian dynamics . a method for the calculation of the static floor field and",
    "the introduction of wall potentials has been proposed .",
    "both extensions improve the realism of evacuation simulations .",
    "also it is important to take into account the contraction in the case of wide exits .",
    "the existence of a minimal evacuation time in the case of finite inertia @xmath78 is found , which shows the importance of one s flexibility to respond to the other people s behavior in the case of an evacuation .",
    "finally it is shown that the position of obstacles in a room will affect the evacuation dynamics through the static floor field .",
    "thus in architectural planning it is important to consider a suitable position of obstacles in a room as well as the exits carefully .",
    "this work was supported in part by the ryukoku fellowship 2002 ( k. nishinari ) .",
    "a.  kirchner , h.  klpfel , k.  nishinari , a.  schadschneider , and m.  schreckenberg , `` simulation of competitive egress behavior : comparison with aircraft evacuation data , '' physica a , vol.324 , p.691 ( 2003 ) ."
  ],
  "abstract_text": [
    "<S> the floor field model , which is a cellular automaton model for studying evacuation dynamics , is investigated and extended . a method for calculating the static floor field , which describes the shortest distance to an exit door , in an arbitrary geometry of rooms </S>",
    "<S> is presented . </S>",
    "<S> the wall potential and contraction effect at a wide exit are also proposed in order to obtain realistic behavior near corners and bottlenecks . </S>",
    "<S> these extensions are important for evacuation simulations , especially in the case of panics . </S>"
  ]
}