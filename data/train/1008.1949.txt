{
  "article_text": [
    "the central objects of this paper are certain simple - crossing , vertex - weighted oriented networks @xmath3 on an oriented surface @xmath4 .",
    "these networks may have sources and sinks on the boundary of @xmath4 , but are conservative in the interior of @xmath4 .",
    "an example of a network we consider is in figure [ fig : wire35 ] .",
    "the first aspect of these networks we study are weight generating - functions of certain paths which we call _ highway paths _ in @xmath3 .",
    "this definition relies crucially on the orientability of @xmath4 .",
    "we consider paths in @xmath3 with endpoints on the boundary , giving us _",
    "boundary measurements _ , imitating terminology of postnikov @xcite , and also cycles in @xmath3 , giving us _ cycle measurements_. in both cases a crucial novelty of our work is to consider paths or cycles with specified _ homology type_.    the second aspect that we study are _ local transformations _ or _ local moves _ of networks , that change a network @xmath3 into another network @xmath5 on the same surface ( see section [ ssec : localmoves ] for pictures of these ) .",
    "these two aspects are motivated by the applications in the following table :    [ cols=\"<,<,<\",options=\"header \" , ]     for example , the entry @xmath6 corresponds to four necklaces one can form from three black and three white beads .",
    "three of those necklaces have multiplicity @xmath7 and contribute @xmath8 into the measurement , while one of them where black and white beads alternate has multiplicity @xmath9 and contributes @xmath10 .",
    "it is easy to see that the cycle measurement with homology type @xmath11 equals @xmath12 if @xmath13 , and @xmath14 otherwise .",
    "the homology group @xmath15 is a free abelian group which has an intersection pairing @xmath16 defined as follows . given two cycles @xmath17 and @xmath18 in @xmath4 that intersect transversally , we define @xmath19 to be @xmath20 we say that the _ flow of @xmath18 through @xmath17 _ is equal to @xmath19 .",
    "it is a basic fact ( * ? ? ?",
    "* section 31 ) in the topology of surfaces that @xmath19 depends only on the homology classes of @xmath17 and @xmath18 .",
    "more generally , one can define the flow of @xmath18 through @xmath17 , where @xmath18 is a @xmath7-chain with boundary lying in the boundary @xmath21 , and @xmath17 is a cycle in @xmath4 . again",
    "this flow does not change if @xmath17 ( resp .",
    "@xmath18 ) are replaced by homologous cycles ( resp . chains ) .",
    "let us now describe these flows combinatorially for subnetworks of @xmath22 .",
    "let @xmath17 be a cycle in @xmath22 , and let @xmath18 be a subnetwork of @xmath22 ( possibly with multiplicity ) which is conservative in the interior of @xmath4 .",
    "in other words , for every vertex @xmath23 in the interior of @xmath4 , the number of incoming edges is equal to the number of outgoing edges .",
    "thus @xmath18 could be a cycle , or a path starting and ending on the boundary , or @xmath22 itself .",
    "then the _ flow of @xmath18 through @xmath17 _ is defined as follows .",
    "let @xmath24 be the sequence of directed edges and vertices in @xmath17 .",
    "for each triple @xmath25 of adjacent edges , define @xmath26 note that edges of @xmath18 which are equal to @xmath27 or @xmath28 are considered neither to the left , nor to the right , and thus not counted .",
    "then the flow @xmath19 of @xmath18 through @xmath17 is equal to @xmath29 .",
    "the main fact connecting homology and flows we will need is the following lemma , which follows easily from the definitions .",
    "[ l : cons ] suppose that @xmath17 is a cycle in @xmath22 and @xmath18 is a subnetwork of @xmath22 conservative in the interior of @xmath4 .",
    "then @xmath30 if @xmath31=0 \\in h_1(s)$ ] .",
    "we say that a highway path or cycle @xmath18 _ strongly contains _ a highway cycle @xmath32 if @xmath18 contains a subwalk of the form @xmath33 .",
    "we say that @xmath18 strongly contains a collection of highway cycles if it strongly contains each of the cycles .",
    "[ lem : strongcontain ] suppose @xmath18 is either a highway path in @xmath22 starting and ending on the boundary , or a highway cycle with non - trivial homology class .",
    "then @xmath18 does not strongly contain a collection of highway cycles @xmath34 in @xmath22 such that @xmath35+[p_2]+\\cdots+[p_r ] = 0 \\in h_1(s)$ ] .",
    "suppose such a collection @xmath36 exists .",
    "let us consider the flow of @xmath22 through @xmath37 . since @xmath37 is a highway cycle , at each vertex the contribution to the flow is either @xmath14 or @xmath7 .",
    "thus the flow @xmath38 is nonnegative . but",
    "@xmath39 by lemma [ l : cons ] , since by assumption @xmath22 is conservative in the interior of @xmath4 .",
    "it follows that at each vertex @xmath40 on each @xmath37 one has the following local situation : the edges belonging to @xmath37 are adjacent when viewed in the cyclic order around @xmath40 .",
    "thus each vertex @xmath40 on @xmath37 either turns left or turns right .",
    "now let us consider the flow @xmath41 of @xmath18 through @xmath37 .",
    "let @xmath42 be two consecutive edges of @xmath37 where @xmath37 turns left at @xmath40 .",
    "each time @xmath18 arrives at @xmath40 , one of the following happens : ( 1 ) @xmath18 bounces off @xmath37 ( that is , the four edges used are all distinct , and locally the two paths are tangent ) , or ( 2 ) @xmath18 follows @xmath37 through @xmath40 using both @xmath43 and @xmath44 , or ( 3 ) @xmath18 enters @xmath40 through @xmath43 , and exits through another edge . in case",
    "( 3 ) , one has a flow of @xmath45 .",
    "if @xmath37 turns right at @xmath40 , we have the cases : ( 1 ) @xmath18 bounces off @xmath37 , or ( 2 ) @xmath18 follows @xmath37 through @xmath40 using both @xmath43 and @xmath44 , or ( 3 ) @xmath18 exits @xmath40 through @xmath44 , but enters through an edge not equal to @xmath43 .",
    "in case ( 3 ) , one has a flow of @xmath45 .",
    "thus @xmath41 is nonpositive . but",
    "@xmath46 , since @xmath18 is conservative .",
    "it follows that case ( 3 ) can never occur .",
    "since it is assumed that @xmath18 strongly contains each of the @xmath37 , it follows that @xmath18 must be a highway cycle which consists of traversing @xmath37 multiple times .",
    "but then the @xmath37 must coincide as well up to multiplicity . since @xmath35+[p_2]+\\cdots+[p_r ] = 0 \\in h_1(s)$ ] it follows that @xmath47 = 0 $ ] , contradicting the assumption that @xmath18 has non - trivial homology .",
    "[ lem : cone ] let @xmath22 be a finite oriented simple - crossing network in @xmath4 . for each highway path @xmath18 in @xmath22 , either starting and ending on the boundary , or a highway cycle with non - trivial homology class , we define a ( possibly empty ) semigroup @xmath48 by taking as generators the classes @xmath35,[p_2],\\ldots,[p_r]$ ] of highway cycles strongly contained in @xmath18",
    ". then    1 .",
    "the @xmath14-vector does not lie in @xmath49 .",
    "thus there exists @xmath50 so that @xmath51 for each @xmath52 . here",
    "@xmath53 denotes the usual pairing on @xmath54 .",
    "2 .   only finitely many semigroups @xmath49 can be obtained in this way , as we let @xmath18 vary .",
    "\\(1 ) follows immediately from lemma [ lem : strongcontain ] ( note that the @xmath37 in lemma [ lem : strongcontain ] can repeat ) . to establish ( 2 ) , let us say that a highway cycle @xmath17 is _ irreducible _ if it does not strongly contain a shorter highway cycle .",
    "if a highway cycle @xmath17 strongly contains another highway cycle @xmath55 then @xmath56 is still a highway cycle , and we have @xmath31 = [ p']+[p \\setminus p']$ ] .",
    "it follows that @xmath49 is generated by the classes of the irreducible highway cycles strongly contained in @xmath18 . but a highway cycle @xmath17 is irreducible if and only if no edge is repeated .",
    "it follows that there are only finitely many irreducible highway cycles in @xmath22 , and thus only finitely many possible @xmath49 .",
    "let @xmath3 be a vertex - weighted simple - crossing oriented network in @xmath4 .",
    "[ thm : fin ] the boundary measurements @xmath57}$ ] are always homogeneous polynomials in the vertex weights .",
    "the cycle measurements @xmath57}$ ] are homogeneous polynomials in the vertex weights except possibly when @xmath31 = 0 \\in h_1(s)$ ] .",
    "let @xmath58 .",
    "we must establish that there are finitely many highway paths ( resp .",
    "cycles ) @xmath18 homologous to @xmath17 . suppose otherwise .",
    "since the network @xmath22 is finite , this implies that there are arbitrarily long @xmath18 homologous to @xmath17 .",
    "first we claim that if @xmath59 is a finite simple - crossing oriented network in a disk , then any sufficiently long highway path @xmath60 in @xmath59 strongly contains a highway cycle .",
    "if @xmath60 is very long then we can find an edge @xmath61 which occurs at least twice in @xmath60 .",
    "the part of @xmath60 between these two occurrences is the desired highway cycle .",
    "let us cut @xmath4 with a number of slices as in section [ ssec : slice ] , so that after slicing one obtains a disk from @xmath4 .",
    "let the sliced edges in @xmath22 be @xmath62 , and set @xmath63 to be the homology class of a cycle which crosses the slices in the same way as @xmath27 .",
    "if @xmath64 is a path in @xmath22 , we let the word of @xmath64 be @xmath65 if @xmath64 encounters the sliced edges @xmath66 in that order . if @xmath64 is a cycle then @xmath67 = v_{i_1 } + \\cdots + v_{i_\\ell } \\in h_1(s)$ ] .",
    "we shall also define @xmath67 $ ] by the same formula when @xmath64 is a walk .    by the earlier claim ,",
    "if @xmath18 is a long highway path , then the word @xmath68 of @xmath18 must also be arbitrarily long ( otherwise it would contain a contractible highway cycle , contradicting lemma [ lem : strongcontain ] ) .",
    "we show that this is impossible .",
    "let @xmath69 be the vector of lemma [ lem : cone](1 ) .",
    "we now apply lemma [ lem : extremal ] below .",
    "the constant @xmath70 in lemma [ lem : extremal ] can be chosen to not depend on @xmath18 , since by lemma [ lem : cone](2 ) there are only finitely many choices for the semigroups @xmath49 , and thus finitely many choices for @xmath71 .",
    "lemma [ lem : extremal ] shows that if the length of @xmath68 is longer than @xmath72 for some integer @xmath73 , then @xmath74,w ) \\geq b$ ] .",
    "but by lemma [ lem : cone](2 ) the maximum @xmath75,w_q)$ ] is finite ( as one can pick finitely many distinct @xmath71 ) , so the length of @xmath68 is bounded which in turn implies the length of @xmath18 is bounded .",
    "it follows that the claimed measurements are polynomials .",
    "next we observe that the number of highway crossings in a highway path ( or cycle ) @xmath17 is equal to @xmath76 .",
    "since the latter depends only on the homology class of @xmath17 , we obtain that @xmath57}$ ] is homogeneous of degree @xmath76 .",
    "recall that @xmath53 denotes the usual pairing @xmath77 .",
    "[ lem : extremal ] for each integer @xmath78 and @xmath79 there exists a constant @xmath80 such that the following holds .",
    "suppose @xmath81 is a word in the alphabet @xmath82 and @xmath83 are any non - zero vectors , and @xmath84 satisfies the conditions    1 .",
    "@xmath85 whenever @xmath86 ; 2 .",
    "@xmath87 for each @xmath88 .    then either @xmath89 or @xmath90 .    if @xmath91 is a word , we set @xmath92 .",
    "the claim is clearly true for @xmath93 .",
    "we proceed by induction , assuming that @xmath94 is known .",
    "suppose @xmath95 .",
    "let @xmath96 be a word of length @xmath97 satisfying the conditions of the lemma .",
    "by relabeling we may assume that @xmath98 occurs at least @xmath99 times in @xmath96 .",
    "suppose @xmath100 where @xmath101 and @xmath102 are words not containing @xmath103",
    ". then by the inductive hypothesis , @xmath104 and @xmath105 .",
    "but then @xmath106 , using condition ( 1 ) applied to pairs of @xmath103 with no occurrences of @xmath103 in between .",
    "thus @xmath107 works .",
    "let @xmath3 be a vertex - weighted simple - crossing oriented network in @xmath4 .",
    "suppose a basis for @xmath108 has been chosen . if @xmath109 we write @xmath110 for the monomial @xmath111 .",
    "in the sequel , we shall consider generating functions in the @xmath110 which will be compatible with change of basis of @xmath112 .",
    "let @xmath17 be a path between boundary vertices @xmath96 to @xmath40 .",
    "we consider the following generating function @xmath113 } = \\sum m^{[q ] } t^{[q \\cup p^*]}\\ ] ] where the first sum is over all highway paths @xmath18 from @xmath96 to @xmath40 , and the second sum is over all homology classes of paths from @xmath96 to @xmath40 .",
    "the generating function depends on the `` basepath '' @xmath17 ; but changing @xmath17 to @xmath55 will only change @xmath114 to @xmath115}m_{u , v}(t)$ ] .",
    "[ prop : rational ] @xmath114 is a rational function in the vertex weights and in the homology variables @xmath116 .",
    "there exists an edge - weighted network @xmath117 on @xmath4 , with the same boundary vertices as @xmath3 , such that the measurements @xmath118 count arbitrary paths from @xmath96 to @xmath40 ( with no highway condition ) in @xmath117 , where paths are now weighted by total edge weight .",
    "the network @xmath117 is obtained by changing the network locally at every interior vertex as shown in figure [ fig : wire7 ] . if @xmath119 is the weight assigned to the original vertex , the edges of @xmath117 are assigned weights @xmath119 and @xmath7 as shown .    to keep track of the homology classes of these paths , one slices @xmath4 into a disk as in section [ ssec : slice ] , and assigns a homology weight to each sliced edge according to which cuts the edge crosses , and in which direction .",
    "then up to basepath normalization , the homology class of a path @xmath17 in @xmath117 is equal to the product of homology weights of the slices it traverses .",
    "thus the generating function @xmath114 is equal to a matrix entry in @xmath120 where @xmath1 is the homology enriched adjacency matrix of @xmath121 : edge weights have been multiplied with the corresponding homology weights .",
    "since all the entries of @xmath1 are polynomials in the vertex weights of @xmath3 , and the homology variables @xmath116 , the result follows .",
    "consider the cylindric network in figure [ fig : wire4 ] .",
    "make a cut along the top of the cylinder and let the homology variable @xmath122 record each crossing of this cut .",
    "the edge - weighted network @xmath117 is in figure [ fig : wire9 ] .",
    "then one computes the adjacency matrix and the generating function @xmath123    let us also define the generating function for cycle measurements @xmath124}\\ ] ] where the sum is over all highway cycles not homologous to 0 .",
    "there exists a rational function @xmath125 in the vertex weights , homology variables @xmath116 , and an additional variable @xmath126 , such that @xmath127 is obtained from the specialization at @xmath128 of the integral of @xmath125 with respect to @xmath126 by removing the constant term .",
    "the removal of the constant term is simply to match with our convention to omit highway cycles which are homologically trivial .",
    "let @xmath117 be the graph in the proof of proposition [ prop : rational ] , and @xmath1 the homology enriched adjacency matrix .",
    "if we just took @xmath129 we would enumerate cycles with marked starting vertices in @xmath117 .",
    "our cycle measurements count cycles where no starting vertex is specified .",
    "consider the expression @xmath130 which enumerates cycles in @xmath117 with marked starting vertices , and such that the power of @xmath126 keeps track of the length of a cycle .",
    "if @xmath17 is a cycle of multiplicity @xmath131 , and which is a @xmath131-th power of a cycle @xmath55 which is of length @xmath64 , then @xmath17 will be counted @xmath64 times in @xmath132 .",
    "thus the cycle @xmath17 will have contribution @xmath133 in @xmath134 .",
    "so @xmath135 is equal to @xmath127 .    in the previous example , we have @xmath136 after integrating and setting @xmath128 , and removing the constant term , we get @xmath137      a _ snake path _ in @xmath22 is a path which starts and ends on the boundary , and turns at every interior vertex . a _ snake cycle _ in @xmath22 is a cycle which turns at every interior vertex",
    ". every edge of @xmath22 belongs to a unique snake path or snake cycle . note that snake paths or cycles can revisit vertices , and so may contain all four edges incident to some vertex .",
    "[ lem : snake ] let @xmath17 be either a highway path in @xmath22 , starting and ending on the boundary , or a highway cycle in @xmath22 .",
    "then @xmath138 for every snake path or cycle @xmath18 in @xmath22 .",
    "furthermore , if @xmath30 for every snake path or cycle @xmath18 , then @xmath17 is itself a snake path or cycle .    at each vertex @xmath40 of @xmath17 , the path either follows the snake path or cycle @xmath18 it is currently on , or leaves @xmath18 to go on a different snake path @xmath60 . in the latter case ,",
    "one obtains a contribution of @xmath139 to both @xmath19 and @xmath140 .",
    "if @xmath141 for every snake path or cycle @xmath18 , then @xmath17 can never leave a snake path , and thus must be equal to a snake path or cycle .",
    "we consider the following local transformations on simple - crossing , vertex - weighted oriented networks",
    "@xmath3 :    1 .   ( yb )",
    "yang - baxter move ( figure [ fig : wire8 ] ) : this is the usual `` braid move '' for wiring diagrams .",
    "the rational transformations of vertex weights occur for example in the theory of total positivity @xcite .",
    "2 .   ( cr )",
    "cycle removal ( figure [ fig : wire10 ] ) : an oriented cycle bounding a disk , and not containing any part of @xmath3 in its interior , can be removed .",
    "note that the vertices of the cycle are removed , and some edges of the rest of the network are glued together .",
    "it is thus possible to create edges with no endpoints in this way .",
    "3 .   ( xm )",
    "crossing merging ( figure [ fig : wire11 ] ) : in a local configuration which looks like two wires ( oriented in the same direction ) crossing twice , the crossings can be merged to form a single crossing .",
    "4 .   ( xr )",
    "crossing removal ( figure [ fig : wire11 ] ) : a vertex with a 0 weight may be removed .",
    "( wc ) whirl - curl relation ( figure [ fig : wire12 ] ) : this move can be performed on a local part of the surface that looks like a cylinder with two vertical wires of opposite orientation wrapping around the cylinder and @xmath142 horizontal wires crossing the vertical wires .",
    "the move swaps the two vertical wires .",
    "the associated rational transformation of the vertex weights is given by : @xmath143 if in the initial ( @xmath144 ) configuration the horizontal wire first encounters a vertical wire crossing from right to left ( and then encounters one crossing from left to right ) . in the opposite direction ,",
    "the rule is @xmath145 here indices are taken modulo @xmath142 , the number of horizontal wires in the picture .",
    "these transformations appeared in ( * ? ? ?",
    "* section 6 ) ( see also [ ssec : whirlcurl ] where this move is discussed in more detail ) .",
    "local transformations preserve the class of simple - crossing , vertex weighted oriented networks .",
    "trivial .",
    "[ thm : bm ] local transformations preserve boundary and cycle measurements .",
    "we first discuss boundary measurements . in all moves one checks directly that for any fixed pair of an enetering half - edge and an exiting half - edge , the accumulated weight over highway paths from through these half - edges is the same on both sides of the move .",
    "for the ( yb ) move , this calculation is essentially , as in example [ ex : disk ] . in the case of the ( cr )",
    "move note that depending on orientation of the cycle , one either can not enter it or can not exit it .",
    "thus the removal does not change any boundary or cycle measurements ( recall that we do not consider cycle measurements with trivial homology ) .    for cycle measurements ,",
    "the proof is more complicated since the multiplicity of a highway cycle changes when one performs local transformations .",
    "let @xmath121 and @xmath146 be the two subgraphs of a local transformation .",
    "thus a local transformation changes @xmath3 to @xmath5 by replacing @xmath121 with @xmath146 .",
    "it is easy to check that highway cycles completely contained in @xmath121 or @xmath146 have the same contribution to cycle measurements .",
    "let @xmath17 be a highway cycle in @xmath3",
    ". then @xmath17 may enter and exit @xmath121 multiple times .",
    "let us consider the set @xmath147 ( resp .",
    "@xmath148 ) of highway cycles in @xmath3 ( resp .",
    "@xmath5 ) which agree with @xmath17 except for the parts of @xmath17 contained inside @xmath121 ( resp .",
    "@xmath146 ) . note that any cycle @xmath149 will enter and leave @xmath121 via the same edges as @xmath17 .",
    "let @xmath150 be the maximal multiplicity of a path @xmath18 in @xmath147 .",
    "then it is easy to see the multiplicity of any path in @xmath147 or @xmath148 divides @xmath150 .",
    "suppose @xmath18 is the @xmath150-multiple of a highway cycle @xmath60 .",
    "let @xmath23 be a vertex in @xmath151 .",
    "let @xmath152 ( resp .",
    "@xmath153 ) be the set of highway paths @xmath64 in @xmath3 ( resp .",
    "@xmath5 ) which begin and end at @xmath40 , and apart from changes within @xmath121 ( resp .",
    "@xmath146 ) , are the same as traversing @xmath60 @xmath150 times .",
    "thus each @xmath154 is obtained from some highway cycle @xmath155 in @xmath147 by `` cutting '' at @xmath40 .",
    "each @xmath156 corresponds to @xmath157 paths in @xmath152 .",
    "thus @xmath158 but it is clear from the calculation for boundary measurements that @xmath159 , so that the contribution of @xmath147 and @xmath148 to cycle measurements are identical .",
    "a _ wire _ in @xmath22 is a path ( not necessarily a highway path ) in @xmath22 which goes straight through the crossing at every interior vertex .",
    "each wire is either a cycle , or starts and ends on the boundary .",
    "every edge of @xmath22 belongs to a unique wire .",
    "a _ whirl _ is a wire cycle in @xmath22 , such that it enters every vertex via the underway .",
    "alternatively , a whirl is a wire cycle for which other wires cross from the left .",
    "a _ curl _ is a wire cycle in @xmath22 such that it enters every vertex via the highway .",
    "alternatively , a curl is a wire cycle for which other wires cross from the right . a _ whurl _ ( mix of a whirl and a curl ) is a wire cycle with no self - intersections .",
    "the yang - baxter move and the whirl - curl move are all compatible with wires in the following sense : each wire before the move corresponds to a wire after the move with the same endpoints ( if any ) .",
    "the crossing merging and crossing removal moves do not preserve wires in this manner , though the composition of a crossing merging and crossing removal ( at the same crossing ! )",
    "will achieve this .",
    "we call an oriented network @xmath22 _ reduced _ , if wires do not self - intersect , and every pair of wires has the minimal number of intersections given their homology classes .",
    "it is not always possible to change a weighted oriented network @xmath3 to a reduced one using local moves .",
    "for example , it can be shown that a self - crossing wire cycle on a cylinder as shown in figure [ fig : wire28 ] can not be changed into a reduced network if the vertex weight @xmath160 .",
    "in addition to the five local transformations of section [ ssec : localmoves ] , there is a global transformation that preserves the boundary and cycle measurements .",
    "this is an action of a torus @xmath161 , where @xmath162 is a field which acts on vertex weights and @xmath163 is the multiplicative group of @xmath162 .",
    "for example if the vertex weights lie in the rational functions @xmath164 in some number of indeterminates , we could choose @xmath165 .",
    "let @xmath3 be a vertex - weighted simple - crossing oriented network in @xmath4 , and @xmath166 be the underlying unweighted oriented network .",
    "define a graph @xmath167 as follows .",
    "the vertex set of @xmath167 is the set @xmath168 of all snake paths and cycles in the network @xmath22 ( see section [ ssec : snake ] ) . at each interior vertex @xmath40 of @xmath22",
    "the highway path goes from one snake path or cycle @xmath17 to another @xmath18 .",
    "it is possible that @xmath169 . for each such vertex @xmath40",
    ", we add a directed edge @xmath170 from @xmath17 to @xmath18 in @xmath167 .",
    "the graph @xmath167 records which snake paths or cycles are traversed when one performs a highway walk in @xmath22 .",
    "now let @xmath171 be the free @xmath172-module spanned by the edges of @xmath167 , or equivalently by interior vertices of @xmath22 .",
    "we introduce an inner product on @xmath171 by making the edges of @xmath167 orthonormal .",
    "call vertices of @xmath167 that correspond to snake paths _",
    "terminal_. define @xmath173 and for @xmath174 , we let @xmath175 denote the sum of all edges involved in @xmath96 with multiplicities .",
    "let @xmath176 be the submodule of @xmath171 given by @xmath177 let @xmath131 be the dimension of @xmath178 , and let @xmath179 be a basis of @xmath178 over @xmath180 .",
    "define the action of @xmath161 on @xmath3 as follows . for a vertex @xmath181",
    ", we let @xmath182 denote the vertex weight in @xmath3 . then for @xmath183",
    ", the assignment @xmath184 defines vertex weights of a network denoted @xmath185 .",
    "[ prop : torus ] the definition gives an action of @xmath186 that preserves all cycle and boundary measurements in @xmath3 .",
    "the first part is clear .",
    "suppose @xmath17 is a highway path in @xmath3 .",
    "each highway crossing on @xmath17 corresponds to an edge in @xmath167 .",
    "it follows that one obtains a walk @xmath187 from @xmath17 , and in addition the weight @xmath188 is equal to @xmath189 . but then @xmath190 thus each highway path has the same weight in @xmath3 as in @xmath185 .",
    "the same holds for highway cycles .",
    "[ ex : tor ] consider the network on a torus from figure [ fig : wire6 ] , repeated in figure [ fig : wire14 ] .",
    "let @xmath191 , @xmath192 , @xmath193 , @xmath194 , @xmath195 , @xmath196 and @xmath197 , @xmath198 , @xmath199 be the vertex weights .",
    "there are three snake cycles , the blue one , the green one and the magenta one .",
    "there are three edges @xmath200 , @xmath201 and @xmath202 in @xmath167 forming a cycle of length three .",
    "the vector @xmath203 spans @xmath204 .",
    "the vectors @xmath205 , @xmath206 span @xmath178 over @xmath180 . the torus action in this case is given by @xmath207 @xmath208    consider the network on a cylinder from figure [ fig : wire6 ] , repeated in figure [ fig : wire13 ] .",
    "then the graph @xmath167 has four edges that we denote @xmath200 , @xmath201 , @xmath202 and @xmath209 .",
    "there are no cycles in @xmath167 , and the paths from terminal vertices to terminal vertices give us vectors @xmath210 , @xmath211 , @xmath212 , @xmath213 .",
    "the orthogonal complement is generated by @xmath214 , which gives us action @xmath215",
    "@xmath216      let @xmath3 be a simple - crossing oriented network .",
    "sometimes a sequence of local transformations ( the torus action of section [ ssec : torus ] is excluded ) will change @xmath3 into a network @xmath5 such that the underlying unweighted networks @xmath217 and @xmath218 are the same , but the vertex weights may not be .",
    "we call this the _ monodromy action _ of the transformations on the vertex weights of @xmath3 .",
    "this monodromy action essentially depends only on @xmath217 .    for an unweighted oriented network @xmath22 , we let @xmath219 denote the field of rational functions in indeterminates @xmath182 , as @xmath40 varies over the vertices of @xmath22 .",
    "the local transformations give rise to a ( possibly infinite ) _ monodromy group _ @xmath220 acting on @xmath219 as birational transformations .",
    "some conjectures concerning @xmath220 are made in section [ sec : conjectures ] , and a special case is studied in section [ ssec : monodromy ] .",
    "the _ frenkel - moore relation _ is an example of a sequence of local transformations which give a trivial monodromy action ( but not obviously ) .",
    "given a local part of a network that looks like four wires crossing , one can apply a sequence of yang - baxter moves as shown in figure [ fig : wire15 ] , and come back to the original network . from a direct computation ,",
    "one obtains    [ prop : fm ] performing the eight yang - baxter moves in the frenkel - moore relation does not change the vertex weights .",
    "we shall use the frenkel - moore relation in the following manner .",
    "one can go from any diagram in the above cycle to any other diagram in two different ways .",
    "proposition [ prop : fm ] tells us that the vertex weights in the result do not depend on which of the two ways is chosen .      swapping left and right ,",
    "one obtains the notion of _ underway paths _ , in which highway crossings are prohibited and the weight is computed using underway crossings . thus one has _",
    "underway boundary measurements _ and _ underway cycle measurements_. by analogy with the highway paths case , one has    [ prop : underbm ] underway boundary and cycle measurements are invariant under local transformations .",
    "let @xmath221 be the mirror image of the surface @xmath4 , and let @xmath222 be the corresponding mirror image of the network @xmath3 .",
    "the boundary and cycle measurements for the network @xmath223 coincide with the underway boundary and cycle measurements of the network @xmath224 .",
    "a polyhedron in @xmath225 is a subset specified by some affine linear inequalities or equivalently as the intersection of halfspaces .",
    "a polyhedron is _ pointed _ if it does not contain a line .",
    "we call a subset of @xmath226 a polyhedron if it is the intersection of @xmath226 with a polyhedron in @xmath225",
    ".    let @xmath227 denote the set @xmath228\\ } \\subset h_1(s,\\z)$ ] of homology classes , where @xmath17 is a basepath from @xmath96 to @xmath40 and @xmath18 varies over all the highway paths @xmath17 between boundary vertices @xmath96 and @xmath40 .",
    "note that changing the basepath @xmath17 amounts to translating the set @xmath227 by a fixed vector .",
    "thus lemma [ lem : snake ] says that @xmath227 is contained in the polyhedron specified by the affine inequalities @xmath229 for each snake path or cycle @xmath64 .",
    "this is strengthened by    @xmath227 is a pointed polyhedron .",
    "the following conjecture sharpens proposition [ prop : rational ] .",
    "[ conj : rat ] for an appropriate choice of basis of @xmath15 , the generating function @xmath118 of section [ ssec : rat ] is the product of a ( laurent ) monomial and a rational function in the @xmath230 .",
    "we will provide some evidence for the following conjecture in theorem [ thm : sasb ] .",
    "when an oriented network @xmath22 is _ reduced _ , the monodromy action on @xmath22 is the action of a discrete group .    here , discrete - ness should be interpreted in terms of the topology of the field containing the vertex weights .",
    "this topology should be such that the local transformations are continuous .",
    "we believe the following problems have an affirmative answer for the cylinder and the torus , but are not sure in the case of higher genus surfaces .",
    "[ pr:1 ] determine for which surfaces the following is true .",
    "any two assignments of weights to vertices of an unweighted network that yield the same boundary and cycle measurements , can be connected by monodromy and torus actions .",
    "[ pr:2 ] determine for which surfaces the following is true .",
    "for any fixed underlying unweighted network , the boundary and cycle measurements generate the field of rational invariants of monodromy and torus actions .    for certain networks on the cylinder ,",
    "problems [ pr:1 ] and [ pr:2 ] are solved in theorems [ thm : ntol ] and [ thm : lp4 ] .",
    "the torus action is necessary for problems [ pr:1 ] and [ pr:2 ] : the statements would be false with only the monodromy action considered .",
    "for example , it can be shown that in example [ ex : tor ] all measurements have degree divisible by three .",
    "on the other hand , the local transformations preserve the sum of all weights , which has degree one .",
    "thus there are invariants of the monodromy action that are not rational functions in the measurements .",
    "suppose @xmath4 is a sphere .",
    "then there are no boundary measurements , and the only cycle measurement is that of the trivial homology class , for which many of our earlier results do not apply .",
    "let @xmath3 be an oriented simple - crossing network on the sphere .",
    "then @xmath3 can be transformed to the empty network using the local transformations of section [ ssec : localmoves ] .",
    "suppose @xmath3 is non - empty .",
    "find a simple oriented cycle @xmath70 in @xmath3 , separating @xmath4 into two components which are disks .",
    "take one of these disks @xmath231 .",
    "if there is a part of @xmath3 in the interior of @xmath231 , then we can either find a smaller simple oriented cycle strictly inside @xmath231 , or we can find an oriented path inside @xmath231 which joins two vertices on @xmath70 . in either case , we can find a smaller simple oriented cycle . repeating , we eventually obtain a simple oriented cycle @xmath232 which bounds a disk @xmath233 not containing any part of @xmath3 .",
    "we can now remove @xmath232 using the cycle removal ( cr ) move .",
    "but @xmath3 is finite , so after repeating this finitely many times , we are left with the empty network .",
    "suppose @xmath4 is a disk and @xmath3 is an oriented simple - crossing network on @xmath4 .",
    "the network @xmath117 in the proof of proposition [ prop : rational ] is a trivalent edge - weighted network , such that every interior vertex either has indegree one , or outdegree one .    in @xcite",
    ", postnikov studied a class of oriented networks in a disk .",
    "the network @xmath117 is , in the terminology of @xcite a `` trivalent perfect network '' .",
    "it gives rise to a plabic network @xmath234 in the sense of postnikov as follows : each outdegree one vertex is colored black and each indegree one vertex is colored white , and the orientations are removed .",
    "following postnikov ( * ? ? ?",
    "* section 11 ) the edge weights of @xmath117 give rise to face weights of @xmath234 .",
    "our boundary measurements @xmath57}$ ] of @xmath3 agree with postnikov s boundary measurements for @xmath117 ( or @xmath234 ) .    since the homology of the disk is trivial , such measurements @xmath57}$ ] only depend on the source and sink vertices . by theorem [ thm :",
    "fin ] , there are only finitely many paths from each source to each sink",
    ". in particular , @xmath117 does not contain any oriented cycles which can be traversed by such paths . in this case , both ours and postnikov s boundary measurements agree with the usual weight generating functions of paths in edge - weighted graphs .",
    "( one of the main innovations of @xcite is to tackle the infinite sums which occur when oriented cycles are present . )    in ( * ? ? ?",
    "* section 12 ) , postnikov describes a number of local transformations on plabic networks .",
    "only four of our local transformations : yang - baxter move , cycle removal , crossing merging , and crossing removal can occur for networks in a disk . since postnikov s weights are variables ( and in particular can not be 0 )",
    ", there is no analogue of our crossing removal .",
    "we assume familiarity with postnikov s transformations of plabic graphs .    under the transformation @xmath235    1 .",
    "our yang - baxter move becomes postnikov s square move composed with a number of edge contraction / uncontractions .",
    "2 .   our cycle removal becomes a composition of edge contractions , loop removal , leaf reductions , and middle vertex removals .",
    "our crossing removal becomes a composition of an edge contraction , an edge uncontraction , and a parallel edge reduction .",
    "direct computation using the construction of @xmath117 ( figure [ fig : wire7 ] ) .",
    "figure [ fig : wire29 ] shows a sequence of transformations realizing the yang - baxter move by postnikov s square move .",
    "recall the definition of whirl , curl , and whurl cycles from section [ ssec : wires ] .",
    "let @xmath3 be an oriented simple - crossing network on a surface @xmath4 .",
    "we assume that on a local portion @xmath236 of @xmath4 that looks like the cylinder , @xmath237 contains two homologically non - trivial wire cycles @xmath70 , @xmath232 which are whurls .",
    "furthermore we will assume that the other wires pass through @xmath236 intersecting only @xmath70 and @xmath232 .",
    "we shall call these other wires the horizontal wires , as pictured in figure [ fig : wire18 ] .",
    "we shall generally view the vertex weights of @xmath3 as indeterminates , allowing us to ignore issues with denominators being 0 in the ( yb ) move .",
    "we will assume that @xmath5 does not contain oriented cycles bounding faces .",
    "thus we have either    1 .",
    "@xmath70 and @xmath232 are oriented in the same direction , or 2 .",
    "one of @xmath70 and @xmath232 is a whirl , and the other is a curl .    in such a situation our local transformations allow us to swap the wires @xmath70 and @xmath232 . in situation",
    "( 1 ) , we call this relation the _ whurl - relation _ , which specializes to the _ whirl relation _ or _ curl relation _ if @xmath70 and @xmath232 are both whirls or both curls . in situation",
    "( 2 ) , this is the whirl - curl relation ( wc ) of section [ ssec : localmoves ] .    for the remainder of this subsection",
    ", we assume that we are in situation ( 1 ) .",
    "we shall further assume that the network is rotated so that the whurls @xmath70 and @xmath232 are both oriented up as in figure [ fig : wire18 ] , and that @xmath70 is on the left of @xmath232 .",
    "number the horizontal wires cyclically from @xmath7 to @xmath142 .",
    "assume the @xmath52-th wire intersects @xmath70 and @xmath232 with weights @xmath238 and @xmath239 respectively , for @xmath240 .",
    "to describe the transformation , introduce the variables @xmath241 and @xmath242 as follows : @xmath243 @xmath244 where we take indices modulo @xmath142 .",
    "let @xmath245 finally , define @xmath246    then the new values of @xmath101-s and @xmath247-s after the whurl transformation are defined to be @xmath248    the whurl relation for figure [ fig : wire18 ] is given by @xmath249 @xmath250 @xmath251 @xmath252 in this example , one has @xmath253 , @xmath254 so that @xmath255 , and so on .",
    "the whirl - curl relation for figure [ fig : wire19 ] , stated in section [ ssec : localmoves ] , is given by @xmath256 @xmath257      now we describe a sequence of local operations that globally produces a whurl or a whirl - curl ( wc ) move . in the whurl case ,",
    "we begin by applying ( xr ) and ( xm ) moves to create a `` ripple '' with weights @xmath17 and @xmath258 as shown in figure [ fig : wire20 ] . in the whirl - curl case",
    ", we also create such a ripple , though this does not follow from ( xr ) and ( xm ) , since the wires are oriented in opposite directions .",
    "( the creation of this ripple in the whirl - curl case _ does _ change the boundary and cycle measurements . )",
    "once the ripple has been created , one can start pushing one of the crossings of the ripple through the horizontal wires using the ( yb ) move .",
    "one repeats this until the crossing revolves once around the cylinder .",
    "note that in the whirl - curl situation , only one of the two crossings can be moved , since moving the other would require performing a ( yb ) move on an oriented three - cycle , which is not defined .",
    "[ lem : unp ] there is at most one value of @xmath17 for which the weight of the crossing once it has been pushed through all wires is equal to the original value @xmath17 .",
    "the proof for the whurl move and for the whirl - curl move is different .    in the whurl case , it is easy to argue by induction from the yang - baxter relation that the weight of the crossing as it travels through the wires always has the form @xmath259 , where @xmath260 do not depend on @xmath17 .",
    "thus at the end one obtains a linear equation in @xmath17 , which has a unique solution or no solutions at all .    in the whirl - curl case , we observe directly that the weight to come out on the other side is always @xmath261 .",
    "thus , @xmath262 is obviously the unique solution .    in the following",
    "we assume the wires have been numbered as in figure [ fig : wire20 ] .",
    "namely , the ripple is created above the @xmath7-st wire .",
    "[ thm : whloc ] suppose we are in the whurl move case .",
    "if we set @xmath263 and perform the sequence of ( yb ) moves in figure [ fig : wire20 ] , then at the moment when the crossing is between the @xmath264-th and @xmath265-st wires , the value of the crossing weight is equal to @xmath266 , and the resulting values of @xmath267 and @xmath268 are as in the whurl transformation .",
    "it is enough to consider one ( yb ) move .",
    "note that the edge is always oriented from the vertex weighted @xmath269 to the vertex weighted @xmath270 .",
    "one obtains @xmath271 @xmath272 @xmath273 it is easily seen that these formulae for @xmath274 and @xmath275 are equivalent to the formulae for @xmath276 and @xmath277 in .",
    "[ thm : wcloc ] suppose we are in the whirl - curl move case , and that the whirl wire is to the left of the curl wire as in the left diagram of figure [ fig : wire19 ] . if we set @xmath278 and perform the operation in figure [ fig : wire20 ] , then at the moment when the crossing is between @xmath264-th and @xmath265-st wires , the value of the crossing weight is equal to @xmath279 , and the resulting values of @xmath267 and @xmath268 are as in the whirl - curl transformation .",
    "a similar statement holds when the whirl wire is to the right of the curl wire as in the right diagram of figure [ fig : wire19 ] . in this case",
    "the crossing is pushed upwards ( opposite to figure [ fig : wire20 ] ) and one obtains .",
    "the statement follows by direct computation .      as was commented in section [ ssec : localmoves ] , the fact that the ( wc ) move preserves the boundary and cycle measurements follows from a simple direct calculation .",
    "the same is true for whurl moves .",
    "this is less obvious , but follows from theorem [ thm : whloc ] and theorem [ thm : bm ] .",
    "[ cor : whurlbm ] the whurl transformation preserves the boundary and cycle measurements .    [",
    "thm : inv ] the whurl transformation is an involution .",
    "the two whirl - curl transformations and are inverses of each other .    in the case of the whurl relation one",
    "argues as follows .",
    "if one applies the ( yb ) move to successively push two crossings , with weights @xmath18 and @xmath280 negative of each other , through a wire @xmath281 , then there is no net effect on the weights of the two crossings along @xmath281 .",
    "also , the weights on the two crossings pushed through remain negatives of each other . thus if one pushes through @xmath17 to perform a whurl move , and then a @xmath258 , the latter will perform a whurl move which will undo the first one .    in the case of the whirl - curl relations",
    ", this follows from invertibility of the ( yb ) move , and the fact that is obtained by pushing a crossing downwards , while is obtained by pushing a crossing upwards .      for this subsection",
    ", we assume that we have a local part @xmath237 of a network on a part @xmath236 of the surface which is a cylinder , such that @xmath5 consists of three whurls crossed by a family of horizontal wires .",
    "as before , we assume that the horizontal wires do not cross each other and that the are no oriented cycles bounding a face .",
    "let us denote by @xmath0 an application of the whurl move , or whirl - curl move , to a pair of adjacent whurls .",
    "we write @xmath282 or @xmath283 depending on the position of the whurls from the left . for example , if the first and second whurls are oriented in opposite directions , then @xmath282 will apply a whirl - curl ( wc ) transformation .",
    "the following theorem is a generalization of theorem ( * ? ? ?",
    "* theorem 6.3 ) .",
    "[ thm : braid ] the transformation @xmath0 satisfies the following braid relation : @xmath284    assume to begin with that our three whurls are not oriented down - up - down , or up - down - up . in the space between the last and the first horizontal wires , create a triple ripple involving all three whurls , as shown in the left diagram of figure [ fig : wire21 ] .",
    "assign weights @xmath17 , @xmath18 , @xmath64 so that when we push these crossings through downwards , they come out on the other side unchanged as in lemma [ lem : unp ] .",
    "we assume here that they can be pushed through , since if they can not , one can push their negatives through in the other ( upwards ) direction ; here we are using the assumption that the orientation of whurls is not up - down - up or down - up - down . according to lemma [ lem : unp ] and theorems [ thm : whloc ] and [ thm : wcloc ] the weights exist , are unique and are exactly the weights that would perform the transformation @xmath285 .",
    "now , apply a sequence of yang - baxter moves as shown in figure [ fig : wire21 ] to obtain weights @xmath55 , @xmath60 and @xmath286 , and their negatives on the other side .",
    "we claim that if these new weights are pushed around the cylinder , they come out the same at the other end .",
    "this follows from the frenkel - moore relation ( proposition [ prop : fm ] ) , which says that applying a yang - baxter move before or after pushing through a line produces the same result .",
    "now if we push the weights @xmath17 , @xmath18 and @xmath64 through and apply the yang - baxter moves , we obviously get again the weights @xmath55 , @xmath60 and @xmath286 . thus by lemma [ lem : unp ] and theorems [ thm : whloc ] and [ thm : wcloc ] , while pushing @xmath55 , @xmath60 and @xmath286 through we are applying @xmath287 . since , by the frenkel - moore relation ( proposition [ prop : fm ] ) the two results are the same , the claim of the theorem follows .",
    "now we claim that the remaining up - down - up or down - up - down cases follow . indeed ,",
    "suppose that not all three whurls have the same orientation ; it follows that all horizontal wires go in the same direction .",
    "we may assume that we have two whirls and one curl . to keep track of the orientations of the wire cycles",
    ", we for example write @xmath288 to mean that the first wire cycle is a whirl , the second is a curl and the last is a whirl again .",
    "when we perform the moves of , we are taking two different paths to the opposite vertex in the hexagon of figure [ fig : wire22 ] .",
    "we have already shown that if we start at a vertex @xmath289 or @xmath290 , the two paths to the opposite vertex give the same result .",
    "since all the edges in the hexagon are involutions it follows that the same is true even if we started at the @xmath288 vertices of the hexagon .",
    "let @xmath3 be a simple - crossing , vertex - weighted , oriented network on the cylinder .",
    "let @xmath291 denote the universal cover of @xmath3 inside a planar strip .",
    "thus @xmath291 is an infinite periodic network ( see figure [ fig : wire17 ] ) .    using the cycle - removal ( cr ) move",
    ", we can reduce @xmath3 to a network @xmath5 which does not contain any contractible oriented cycles .",
    "assume there is a contractible oriented cycle in the network .",
    "any such cycle is still a contractible cycle when lifted to the universal cover @xmath291 .",
    "if it is self - crossing , one can clearly take a part of it that also forms a contractible cycle on the universal cover , but has less self - crossings .",
    "thus we can assume that there exists a simple contractible cycle on the universal cover .",
    "order such cycles by containment , and take a minimal one @xmath292 .",
    "let us consider the disk it bounds in the universal cover .",
    "if there is any part of @xmath291 inside this disk , split it into wires using the usual rule ( always go through at a crossing ) .",
    "the wires we obtain either are closed wires inside the disk , or go from its boundary to its boundary . either way we get a smaller contractible",
    "oriented cycle  contradiction .",
    "thus the cycle @xmath292 has no part of @xmath291 inside .",
    "this means that at every vertex it turns , and furthermore it either always turns left , or always turns right .",
    "this in turn implies that the image @xmath17 of @xmath292 in @xmath3 does not self - intersect and has no part of @xmath3 inside , and therefore it can be removed using the ( cr ) move .",
    "since the the network can not get smaller forever , the statement follows .",
    "we shall henceforth assume that @xmath3 contains no contractible oriented cycles .",
    "we wish to establish an analogue of the linstrm lemma @xcite in such a situation .",
    "in @xcite we established such an analogue for a general class of edge - weighted acyclic networks , but with the requirement that all sources are on one component of the boundary , while all sinks are on the other component of the boundary .    if @xmath3 has no contractible cycles then @xmath291 is acyclic .",
    "any cycle in @xmath291 would give a contractible cycle in @xmath3 .",
    "let @xmath293 and @xmath294 be the sources and the sinks of the original cylindric network , and let @xmath295 and @xmath296 be their preimages in @xmath291 , @xmath297 .",
    "let @xmath298 denote a path from @xmath299 to @xmath300 .",
    "all such paths are homologous .",
    "[ lem : cov ] for a source @xmath301 , a sink @xmath302 , and a a highway path @xmath17 from @xmath301 to @xmath302 , the boundary measurement @xmath57}(\\n)$ ] coincides with the measurement @xmath303}(\\tilde \\n)$ ] for a particular value of @xmath304 and for any @xmath131 .",
    "conversely , any boundary measurement of @xmath291 is equal to some boundary measurement of @xmath3 .",
    "lift @xmath17 to the universal cover @xmath291 .",
    "assume such a lift @xmath292 starts at @xmath299 and ends at @xmath305 .",
    "it is easy to see that the homology type of @xmath292 depends only on @xmath304 , giving the first statement .",
    "the second statement follows easily from this .",
    "let @xmath306 and @xmath307 be finite sets of sources and sinks in @xmath291 of equal cardinality @xmath308 .",
    "let us create the corresponding _ boundary measurement matrix _ as follows , following the construction in @xcite .",
    "number the elements of @xmath309 clockwise with @xmath310 , starting at any point .",
    "let @xmath311 be the numbers assigned to sources , and @xmath312 be the numbers assigned to sinks .",
    "define a @xmath313 matrix @xmath314 by @xmath315},\\ ] ] where @xmath316 denotes the number of elements of @xmath306 strictly between @xmath317 and @xmath318 in the clockwise order .",
    "[ ex : matchings ] take the three sources and the three sinks numbered @xmath7 through @xmath319 in figure [ fig : wire17 ] .",
    "thus @xmath320 and @xmath321 .",
    "one computes the boundary measurement matrix in this case to be @xmath322    we call a family of highway paths _ non - crossing _ if no two paths share a common edge . denote by @xmath323 all families of @xmath131 non - crossing highway paths from sources in @xmath306 to sinks in @xmath307 such that all elements of @xmath306 and @xmath307 are used . for a collection of paths",
    "@xmath324 let @xmath325 .",
    "[ thm : tpd ] let @xmath3 be a network on the cylinder , and let @xmath306 and @xmath307 be finite sets of sources and sinks of the universal cover @xmath291 that have equal cardinality",
    ". then @xmath326 .",
    "hence @xmath327 if all vertex weights of @xmath3 are nonnegative real numbers .",
    "this theorem is an analogue of ( * ? ?",
    "* theorem 1.1 ) , where it is proved for a large class of edge - weighted networks .",
    "one can deduce theorem [ thm : tpd ] from ( * ? ? ?",
    "* theorem 1.1 ) by constructing an edge - weighted network that would have the same measurements as @xmath328 .",
    "we give a direct proof here , since for the class of networks we consider the argument is not hard .",
    "call two pairs @xmath329 and @xmath330 _ crossing _ if @xmath331 . for",
    "a matching @xmath332 between elements of @xmath306 and @xmath307 let @xmath333 be the number of crossing pairs in @xmath332 .",
    "for a family @xmath334 of highway paths from elements of @xmath306 to elements of @xmath307 denote @xmath335 the matching between @xmath306 and @xmath307 paths in @xmath334 form .",
    "we first claim that @xmath336 indeed , it suffices to check that the sign @xmath337 the matching @xmath332 gets in the determinant @xmath338 is equal to @xmath339 .",
    "this is easily verified , see ( * ? ? ?",
    "* proposition 2.12 ) .",
    "now we present a sign - reversing weight - preserving involution on crossing families of highway paths from @xmath306 to @xmath307 .",
    "assume that @xmath64 is smallest such that the path @xmath340 intersects one of the other paths in the family . among all such edges of intersection on @xmath341",
    "choose the one , denoted @xmath43 , that comes earliest .",
    "among all paths that intersect @xmath341 at @xmath43 choose @xmath342 with smallest possible @xmath343 .",
    "create @xmath344 and @xmath345 from @xmath341 and @xmath346 by changing their parts that come after @xmath43 .",
    "then it is easy to see that the new family of paths has the same weight but opposite sign .",
    "it is also easy to see this operation is an involution .",
    "thus we can cancel out all terms in @xmath347 that have crossings .",
    "the remaining terms all have @xmath348 , and the statement of the theorem follows .",
    "the determinant of the matrix in example [ ex : matchings ] is @xmath349 a non - crossing family of highway paths that contributes the term @xmath350 of the determinant is shown in figure [ fig : wire17 ] .",
    "[ conj : tpd ] theorem [ thm : tpd ] characterizes the measurements of cylindric networks with nonnegative real weights . in other words , if one is given a collection of nonnegative boundary measurements satisfying the inequalities of theorem [ thm : tpd ] , then these measurements can be represented by a network @xmath3 on the cylinder with nonnegative real weights .",
    "our background reference for this section is @xcite .",
    "let @xmath351 denote the affine symmetric group , the coxeter group generated by involutions @xmath352 . for @xmath353",
    "the relations are @xmath354 and @xmath355 for @xmath356 . for @xmath357 , there are no relations .",
    "let @xmath358 denote the ( real ) formal loop group , consisting of non - singular @xmath359 matrices with real formal laurent series coefficients . if @xmath360 where @xmath361 , we let @xmath362 denote the infinite periodic matrix defined by @xmath363 for @xmath364 . for the purposes of this paper we shall",
    "nearly always think of formal loop group elements as infinite periodic matrices .",
    "the unipotent loop group @xmath365 is defined as those @xmath366 which are upper triangular , with 1 s along the main diagonal .    for @xmath367 and @xmath368 , define the chevalley generator @xmath369 by @xmath370 these are the standard one - parameter subgroups of @xmath371 corresponding to the simple roots .",
    "they satisfy the relation @xmath372 for a reduced word @xmath373 of @xmath374 and a sequence @xmath375 of parameters , we define @xmath376 .",
    "[ prop : bruhatcell ] ( * ? ? ?",
    "* theorem 3.4 , lemma 3.1 ) the map @xmath377 is injective when restricted to positive parameters @xmath378 .",
    "furthermore , for two reduced words @xmath379 and @xmath380 of the same @xmath374 , we have @xmath381 .",
    "we call @xmath382 a tnn _",
    "bruhat cell_. it follows from the results of @xcite that for each @xmath379 , the map @xmath383 is a bijection .      for @xmath384 ,",
    "define the _ whirl ( matrix ) _",
    "@xmath385 to be the infinite periodic matrix @xmath386 and the _ curl ( matrix ) _",
    "@xmath387 @xcite to be the infinite periodic matrix with @xmath388 here and elsewhere the upper indices are to be taken modulo @xmath142 .",
    "whirl and curl matrices commute as follows ( * ? ? ?",
    "* section 6 ) .",
    "recall the definition of @xmath389 from .",
    "define an algebra morphism @xmath390 by @xmath391    then we have @xmath392 , and @xmath393 .",
    "furthermore , we have @xmath394 , where @xmath395    these relations are related to the transformations of whirl wires and curl wires as follows : for an @xmath142-tuple @xmath396 , let @xmath397 denote its rotation .",
    "then comparing with and - , one obtains :    [ prop : shift ] in the following we assume we have two wire cycles @xmath70 , @xmath232 and that horizontal wires go from left to right ( meeting @xmath70 first , then @xmath232 ) .    1 .",
    "suppose two whirl wire cycles @xmath70 , @xmath232 have weights @xmath101 and @xmath247 .",
    "then the whurl relation for @xmath70 and @xmath232 ( giving weights @xmath398 and @xmath399 ) corresponds to the commutation relation @xmath400 .",
    "suppose two curl wire cycles @xmath70 , @xmath232 have weights @xmath101 and @xmath247 .",
    "then the whurl relation for @xmath70 and @xmath232 ( giving weights @xmath398 and @xmath399 ) corresponds to the commutation relation @xmath401 .",
    "suppose we have a whirl wire cycle @xmath70 and a curl wire cycle @xmath232 have weights @xmath101 and @xmath247 .",
    "then the whirl - curl relation for @xmath70 and @xmath232 ( giving weights @xmath398 and @xmath399 ) corresponds to @xmath402 .",
    "suppose we have a curl wire cycle @xmath70 and a whirl wire cycle @xmath232 have weights @xmath101 and @xmath247 .",
    "then the whirl - curl relation for @xmath70 and @xmath232 ( giving weights @xmath398 and @xmath399 ) corresponds to @xmath403 .",
    "an element @xmath404 is totally nonnegative ( tnn ) if every minor of @xmath366 is nonnegative .",
    "we denote by @xmath405 the semigroup of totally nonnegative elements ( necessarily real ) .",
    "let @xmath406 denote the subgroup of @xmath371 consisting of rational loops , that is , those @xmath407 matrices @xmath408 with coefficients which are rational functions @xmath409 , and which lie in @xmath371 .",
    "let @xmath410 .",
    "[ thm : genr ] the semigroup @xmath411 is generated by whirls matrices , curl matrices , and chevalley generators with nonnegative real parameters .",
    "it is clear that @xmath411 is a semigroup .",
    "since each of the matrices @xmath412 , @xmath413 , and @xmath414 lie in @xmath411 , one inclusion is clear . for the other inclusion ,",
    "suppose that @xmath415 , with corresponding infinite periodic matrix @xmath366 .",
    "put all the matrix coefficients of @xmath416 over a common denominator @xmath417 .",
    "then for each @xmath418 satisfying @xmath419 we have that @xmath420 satisfy a linear relation given by the coefficients of @xmath417 , where @xmath64 is equal to the degree of @xmath417 . for a sufficiently large @xmath264 , this would be true for @xmath421 , giving a @xmath422 minor of @xmath366 which vanishes , but which does not identically vanish on @xmath371 .",
    "thus , in the terminology of @xcite , @xmath366 is a totally nonnegative element which is not totally positive .",
    "thus by ( * ? ? ?",
    "* theorem 5.7 ) , @xmath366 is a product of whirls , curls , and chevalley generators .    this notion of rationality is compatible with the one of conjecture [ conj : rat ] .",
    "fix , @xmath374 , and two nonnegative integers @xmath423 .",
    "define the _ whirl - curl - bruhat cell _",
    "@xmath424 to be the image of @xmath425 under the map @xmath426 @xmath427 where @xmath379 is a reduced word for @xmath428 . by proposition [ prop : bruhatcell ] , @xmath424 depends only on @xmath429 and not on @xmath379 . however , @xmath430 is not injective .",
    "let us define @xmath431 to be the tuples @xmath432 satisfying @xmath433 . denoting",
    "the restriction of @xmath430 to @xmath434 by @xmath430 as well , we have    [ thm : phiwhirlcurl ] the map @xmath435 is a bijection for every reduced word @xmath379 of @xmath428 .    according to ( * ? ? ?",
    "* theorem 8.3 ) each of the three factors @xmath436 , @xmath437 , and @xmath438 can be recovered uniquely , where the parameters of the factors @xmath436 and @xmath438 lie in @xmath439 .",
    "then by ( * ? ? ?",
    "* proposition 8.2 ) among those there is a unique presentation with parameters belonging to @xmath440 . as for the middle factor @xmath437 ,",
    "it is injective according to proposition [ prop : bruhatcell ] .",
    "each @xmath441 is parametrized by a semi - algebraic open - closed cell @xmath442 given by the coordinates @xmath443 and @xmath444 , where @xmath445 .",
    "thus it makes sense to call @xmath424 a `` cell '' , though it is not an open cell in the usual context of cell decompositions .",
    "[ thm : whirlcurlbruhatdecomp ] we have a disjoint union @xmath446 where @xmath447 and @xmath374 .    by theorem [ thm : genr ]",
    "we know that the cells @xmath448 cover the whole @xmath411 . on the other hand , according to ( * ? ? ?",
    "* theorem 8.3 ) those cells must be disjoint , since one can determine @xmath449 , @xmath450 and @xmath428 uniquely from an element of @xmath448 .",
    "let @xmath3 be a simple - crossing oriented network on the cylinder with @xmath142 horizontal wires , all of which go from left to right .",
    "in other words , @xmath3 has @xmath142 boundary sources which we can cyclically label @xmath451 .",
    "consider the snake path @xmath17 in @xmath3 that starts at vertex @xmath7 , and let @xmath452 be the endpoint of @xmath17 .",
    "let @xmath453 cyclically label the boundary sinks of @xmath3 . fix a continuous path @xmath454 on the cylinder going from between @xmath142 and @xmath7 to between @xmath455 and @xmath452 staying closely above the snake path @xmath17 from @xmath7 to @xmath452 .",
    "suppose a path @xmath18 in @xmath3 crosses @xmath454 from top to bottom @xmath456 times , and from bottom to top @xmath457 times .",
    "then we say that the winding number @xmath458 is equal to @xmath459 .",
    "we now define a boundary measurement matrix @xmath460 in the unipotent loop group from @xmath3 , by @xmath461}_{i , j'}(\\n ) \\qquad \\mbox{if $",
    "j - i = s+rn$ , where $ r \\in \\z$ and $ s\\in \\{1,2,\\ldots , n\\}$}\\ ] ] where @xmath462 is a path from @xmath52 to @xmath463 with winding number @xmath64 .",
    "the boundary measurement @xmath464 lies in @xmath371 .",
    "we need to show that @xmath465 if @xmath466 and @xmath467 .",
    "draw a snake path @xmath468 starting at every source @xmath469 . then in any highway path",
    "if one records through which of the @xmath468-s one goes , the @xmath52-s can only decrease by one or stay unchanged .",
    "in other words , the graph @xmath167 of section [ ssec : torus ] for this network is a directed path on @xmath142 vertices .",
    "this implies that the only way a highway path can cross @xmath454 is from top to bottom .",
    "it also implies that the only path from @xmath52 to @xmath470 that has zero winding number is @xmath468 itself .",
    "it remains to observe that each of the @xmath468-s has unit weight .",
    "the network in figure [ fig : wire16 ] produces the following element of the unipotent loop group . here",
    "@xmath471 are all vertex weights .",
    "[ lem : compose ] let @xmath3 and @xmath5 be two networks on the cylinder as above .",
    "let @xmath473 be the cylindric network obtained by gluing two cylinders together along a boundary component , identifying the @xmath52-th sink of @xmath3 with the @xmath52-th source of @xmath5",
    ". then @xmath474 .",
    "suppose all vertex weights of @xmath3 are nonnegative real numbers .",
    "then @xmath475 .    follows immediately from theorem [ thm : tpd ] : the determinants @xmath338 are exactly the minors of @xmath464 .",
    "theorem [ thm : bm ] implies    [ cor : mn ] the map @xmath476 to the unipotent loop group is compatible with local transformations .",
    "that is , @xmath477 if @xmath3 and @xmath5 are related by local transformations .",
    "we shall now establish , in section [ ssec : whirlcurlnetworks ] , the following result .",
    "[ thm : ratloop ] suppose all vertex weights of @xmath3 are nonnegative real numbers",
    ". then @xmath478 .",
    "conversely , every @xmath479 is represented @xmath480 by some oriented network @xmath3 with nonnegative real vertex weights .",
    "let @xmath3 be an oriented simple - crossing network as in section [ ssec : tounipotent ] .",
    "we shall further assume that as a wiring diagram @xmath3 is reduced , as in section [ ssec : wires ] .",
    "this implies that every wire cycle in @xmath3 loops around the cylinder once ( in one of the two directions ) .",
    "let us suppose now that @xmath3 has @xmath450 whirl wire cycles , and @xmath449 curl wire cycles",
    ".    given a wire cycle @xmath70 with weights @xmath481 we call @xmath482 the _ radius _ of @xmath70 .",
    "the following observation is immediate .",
    "[ lem : whurlradius ]    1 .",
    "when the whurl transformation is applied to two whirl cycles ( resp .",
    "curl cycles ) @xmath70 and @xmath232 , the radii of the two whirl cycles ( resp .",
    "curl cycles ) are preserved , but swapped .",
    "2 .   when a yang - baxter move is applied to a whirl ( resp .",
    "curl ) and another crossing , the radius of the whirl ( resp .",
    "curl ) is preserved .",
    "[ thm : ntol ] suppose that all vertex weights of @xmath3 are positive real numbers .",
    "then @xmath483 where @xmath374 is given by @xmath484 if the wire starting at @xmath485 ends at @xmath486 , and has winding number @xmath64 .",
    "furthermore , @xmath464 completely determines the vertex weights of @xmath22 up to local transformations .",
    "in the situation of theorem [ thm : ntol ] , we say that the underlying network @xmath217 is a @xmath487-network , or occassionally use @xmath487 to denote such a network .",
    "we call these _ whirl - curl - bruhat _ networks .",
    "let us rotate the cylinder so that sources are on the left , and sinks are on the right . using local transformations , in particular the yang - baxter move , and the whirl - curl transformation , let us move all curl cycles to the left , all whirl cycles to the right , and leave all the intersections of horizontal wires in the middle .",
    "in addition , let us use the whurl transformations ( see lemma [ lem : whurlradius ] ) to order the curls ( resp .",
    "whirls ) from left to right in order of decreasing radii .",
    "we call this the _ canonical form _ of @xmath3 .    using lemma [ lem : compose ] , and taking into account the shifting of proposition [ prop : shift ] , we see that @xmath464 can be obtained by substituting the vertex weights of @xmath3 into the map @xmath430 of theorem [ thm : phiwhirlcurl ] , where @xmath379 is the reduced word of @xmath428 obtained by linearly ordering the intersections of horizontal wires .",
    "this implies that @xmath483 , and the bijectivity of theorem [ thm : phiwhirlcurl ] implies the last statement .",
    "the boundary measurement matrix @xmath464 of the network in figure [ fig : wire16 ] belongs to @xmath488 .",
    "the following results follow from theorems [ thm : phiwhirlcurl ] and [ thm : ntol ] and corollary [ cor : mn ] .",
    "[ cor : ncanonical ] the canonical form of @xmath3 is unique . in other words , any two networks in canonical form , both of which can be obtained from @xmath3 via local transformations , have the same vertex weights .",
    "[ cor : param ] let @xmath22 be a @xmath487-network with all curls to the left and all whirls to the right .",
    "the set of weighted networks @xmath3 with positive real weights such that @xmath58 that are in canonical form give a parametrization of the whirl - curl - bruhat cell @xmath489 via the map @xmath476 .    in corollary",
    "[ cor : param ] , the condition that all curls are to the left and all whirls to the right is not important .",
    "what is important is that the radii of the curls and whirls have been arranged in a specified order .",
    "a @xmath490-network is essentially a wiring diagram for a reduced word of @xmath351 .",
    "if @xmath491 is a usual permutation , then these are essentially the wiring diagrams of @xcite . in this case",
    ", the network can be drawn on a plane rather than a cylinder .",
    "[ thm : sasb ] let @xmath22 be a @xmath487-network .",
    "the monodromy group of @xmath22 is exactly @xmath492 .    in the following",
    "we shall work with positive real weights but this is not crucial .",
    "see for example the proof of ( * ? ? ?",
    "* theorem 4.1 ) .",
    "suppose that @xmath3 is a reduced oriented simple - crossing network as before and that @xmath58 is a @xmath487-network .",
    "suppose @xmath5 is obtained from @xmath3 by yang - baxter moves , whirl - curl moves , or whurl moves in such a way that @xmath493 .",
    "thus @xmath5 is obtained from @xmath5 via the monodromy action , but we disallow arbitrary local transformations for now .",
    "we define two permutations @xmath494 and @xmath495 as follows .",
    "color the curl cycles of @xmath3 with colors @xmath496 .",
    "when we go from @xmath3 to @xmath5 the colored wire cycles may have been permuted .",
    "let @xmath96 denote this permutation , and similarly define @xmath40 for whirl cycles . in this case",
    ", we say that @xmath3 and @xmath5 are related by the pair @xmath497 .",
    "[ lem : sasb ] suppose the vertex weights of @xmath3 are known .",
    "then the vertex weights of @xmath5 depend only on @xmath497 .",
    "in particular , if @xmath498 then @xmath3 and @xmath5 have identical vertex weights .    since the yang - baxter moves and whirl - curl transformations are invertible , we may assume all curl cycles are to the left , and all whirl cycles to the right in @xmath3 and @xmath5 , as in theorem [ thm : ntol ] . by applying specific whurl transformations to @xmath5 according to @xmath499",
    ", we may assume that @xmath498 .",
    "after applying another set of whurl transformations to both @xmath3 and @xmath5 , we may assume that the radii of the curls ( resp .",
    "whirls ) in @xmath3 decrease from left to right . by lemma [ lem : whurlradius ] , the same holds for @xmath5 .",
    "but then both @xmath3 and @xmath5 are in canonical form so by corollary [ cor : ncanonical ] , @xmath3 and @xmath5 must have the same vertex weights .",
    "suppose @xmath3 and @xmath5 are related by an arbitrary sequence of local transformations , and @xmath500 . then @xmath477 . by corollary [ cor : ncanonical ] ,",
    "the canonical forms of @xmath3 and @xmath5 are identical .",
    "it follows that @xmath3 and @xmath5 are related by the @xmath492 monodromy action in lemma [ lem : sasb ] . to see that the group @xmath492 acts faithfully we may pick vertex weights so that the radii of wire cycles are all distinct .",
    "lemma [ lem : whurlradius ] then implies that the orbit under the monodromy action is of size @xmath501 .",
    "we could have avoided lemma [ lem : sasb ] if we defined the pair @xmath497 by looking at the final permutations of the radii of the wire cycles .",
    "however , we found it elegant to keep track of the wires through a sequence of local transformations .    the argument of lemma [ lem : sasb ] gives another proof of theorem [ thm : braid ] in the case of whurl transformations which involve only whirls , or only curls .",
    "we consider a network @xmath502 ( see section [ ssec : whirlcurlnetworks ] ) on a cylinder that consists of @xmath150 whirl cycles , @xmath503 curl cycles and @xmath142 horizontal wires .",
    "there are several different @xmath504 networks , one for each relative order of whirls and curls .",
    "let the sources be cyclically indexed @xmath7 through @xmath142 in the order opposite to the direction of the whirl cycles , and let @xmath505 , @xmath506 be the snake path that starts at the source @xmath64 .",
    "let @xmath507 be the weighted network with @xmath508 the vertex weight assigned to the unique vertex that lies on the @xmath64-th snake path , the @xmath509-st snake path and the @xmath52-th whurl . here",
    "the snake path indices are taken modulo @xmath142 .",
    "then @xmath510 form a rectangular ( or rather , cylindrical ) array of variables .",
    "we caution that we will be using a different indexing of vertex weights in section [ sec : crystals ] .",
    "define the _ loop elementary symmetric functions _ in these variables by : @xmath511    we have @xmath512 in other words , the loop elementary symmetric functions are exactly the boundary measurements for @xmath507",
    ".    follows from the proof of theorem [ thm : ntol ] and a statement similar to ( * ? ? ?",
    "* lemma 7.3 ) , ( * ? ? ?",
    "* lemma 7.5 ) .",
    "denote by @xmath513 the ring generated by the @xmath514 , called the ring of _ loop symmetric functions_. note that this version of the ring is a common generalization of _ whirl loop symmetric functions _ and _ curl loop symmetric functions _ of @xcite .",
    "the _ loop schur functions _ are the minors of @xmath515 and have a presentation in terms of semistandard tableaux like the usual schur functions , generalizing ( * ? ? ?",
    "* theorem 7.4 ) , ( * ? ? ? * theorem 7.6 ) .",
    "namely , let each index @xmath516 be either _ column strict _ or _ row strict _ , depending on whether the @xmath264-th whurl in @xmath517 is a whirl or a curl ( respectively ) .",
    "a square @xmath518 in the @xmath52-th row and @xmath264-th column of a young diagram has _",
    "@xmath519 and has _ residue _",
    "@xmath520 . a _",
    "semistandard young tableaux _ @xmath186 with shape @xmath521 is a filling of each square @xmath522 with an integer @xmath523 so that it is weakly increasing along rows and columns , and two cells with filling @xmath264 are forbidden to belong to the same column ( resp .",
    "row ) if @xmath264 is column - strict ( resp .",
    "row - strict ) .",
    "the weight @xmath524 of a tableaux @xmath186 is given by @xmath525 .",
    "we define the loop schur function by @xmath526 where the summation is over all semistandard young tableaux of ( skew ) shape @xmath521 .",
    "[ thm : schur ] let @xmath527 and @xmath528 be two sequences of integers such that @xmath529 . define @xmath530 then @xmath531    a gessel - viennot type argument , straight forwardly generalizing proofs of ( * ? ? ?",
    "* theorem 7.4 ) , ( * ? ? ? * theorem 7.6 ) .",
    "the loop symmetric functions are the invariants of the monodromy group action on @xmath517 of theorem [ thm : sasb ] . in this case",
    ", the monodromy group @xmath532 acts on @xmath533 by birational transformations given by the whurl relations . in the special case of either @xmath150 or @xmath503 equal to @xmath14 this birational transformation appeared in @xcite ,",
    "see also @xcite .",
    "* theorem 4.1 ) [ thm : lp4 ] if @xmath534 ( @xmath535 ) the loop elementary symmetric functions generate the field @xmath536 ( @xmath537 ) of invariants of the monodromy @xmath538-action ( @xmath539-action ) .",
    "we shall show in @xcite that a stronger statement holds .",
    "namely in the case @xmath535 or @xmath534 , the ring @xmath513 is exactly the ring of _ polynomial _ invariants of the birational action of @xmath538 or @xmath539 via whirl ( curl ) moves .",
    "we discuss only @xmath540 here .",
    "the story for @xmath541 is analogous .",
    "the network @xmath542 has no non - trivial ( highway ) cycle measurements .",
    "however , its underway cycle measurements can be naturally described as follows .",
    "denote by @xmath543 the underway cycle measurement which has homology class of the @xmath131-fold loop around the cylinder ( in the same direction as the whirl cycles ) .",
    "we have @xmath544    the only way to achieve the desired homology of an underway cycle is to circle around one of the whirls @xmath131 times .",
    "we call the @xmath543 the _ ( rescaled ) power sum loop symmetric functions_. such terminology is justified by the following proposition , which is established in @xcite .",
    "[ prop : lp ] the @xmath543 lie in @xmath513 .",
    "it is interesting to observe that for the network @xmath542 proposition [ prop : lp ] has the following meaning : the cycle measurements are ( polynomial ) functions of the boundary measurements .",
    "in general such a statement would not be true : on a torus there are no boundary measurements at all , while definitely there are non - trivial cycle measurements .    the classical _ problem of moments _ studies the question of recovering a probability distribution from its moments , and in particular determining what conditions the moments must satisfy for a solution to exist .",
    "see @xcite for a detailed account . for _ discrete _ distributions taking nonnegative real values , the latter question is equivalent to determining the allowed range of power sum symmetric functions of a sequence of nonnegative variables . for a finite sequence the condition that the elementary symmetric functions form a totally positive sequence @xcite gives inequalities which characterize the possible range of power sum symmetric functions .    in our current language , this is the question of describing the possible cycle measurements of @xmath542 ( where the problem of moments corresponds to @xmath545 ) , as the vertex weights range over nonnegative real numbers .    what is the range of cycle measurements when we allow an arbitrary network with nonnegative real weights on a cylinder ?",
    "see theorem [ thm : tpd ] and conjecture [ conj : tpd ] for the case of boundary measurements .",
    "we shall use @xcite as our main reference for affine geometric crystals . in this paper",
    "we shall consider affine geometric crystals of type @xmath1 . fix @xmath546 .",
    "let @xmath547 denote the @xmath548 cartan matrix .",
    "thus if @xmath353 then @xmath549 , @xmath550 for @xmath551 , and @xmath552 for @xmath553 . for @xmath357 , we have @xmath554 and @xmath555 .",
    "let @xmath556 be an affine geometric crystal of type @xmath548 ( that is , for @xmath557 ) .",
    "thus , @xmath558 is a complex algebraic variety , @xmath559 and @xmath560 are rational functions , and @xmath561 @xmath562 is a rational @xmath563-action , satisfying :    1 .",
    "the domain of @xmath564 is dense in @xmath558 for any @xmath565 .",
    "2 .   @xmath566 for any @xmath567 .",
    "3 .   @xmath568 .",
    "4 .   for @xmath569",
    "such that @xmath570 we have @xmath571 .",
    "5 .   for @xmath569",
    "such that @xmath550 we have @xmath572 .",
    "we often abuse notation by just writing @xmath558 for the geometric crystal .",
    "we define @xmath573 , and sometimes define a geometric crystal by specifying @xmath574 and @xmath575 , instead of @xmath576 .",
    "one obtains @xcite a rational action of the affine symmetric group on @xmath558 by setting @xmath577 .",
    "then @xmath352 satisfy the relations of the simple generators of @xmath351 .",
    "if @xmath578 are affine geometric crystals , then so is @xmath579 @xcite .",
    ". then @xmath581 and @xmath582 where @xmath583    note that our notations differ from those in @xcite by swapping left and right in the product , and this agrees with @xcite .",
    "note also that the birational formulae we use should be tropicalized using @xmath584 ( rather than @xmath585 ) operations to yield the formulae for combinatorial crystals .",
    "we now introduce a geometric crystal @xmath586 which we call the _ basic geometric crystal _ of type @xmath548 .",
    "this is a geometric analogue of a limit of perfect crystals .",
    "it is essentially the geometric crystal @xmath587 of ( * ? ? ?",
    "* section 5.2 ) .",
    "we have @xmath588 and @xmath589 and @xmath590 that @xmath586 is an affine geometric crystal is shown in @xcite .",
    "we also introduce the dual basic affine geometric crystal @xmath591 .",
    "we have @xmath592 and @xmath593 and @xmath594 one can easily verify that @xmath591 satisfies the axioms of geometric crystals .",
    "in this section we assume networks have weights in @xmath595 .      consider a vertex - weighted , simple - crossing , oriented network @xmath3 .",
    "suppose @xmath281 and @xmath596 are two wires with endpoints on the same boundary components .",
    "we say that @xmath281 and @xmath596 are _ parallel _ with @xmath281 to the left of @xmath596 ( and @xmath596 to the right of @xmath281 ) if the part of the surface to the left of @xmath596 and to the right of @xmath281 is a strip containing no interior vertices or isolated loops , and furthermore , every wire that crosses @xmath281 from left to right ( resp .",
    "@xmath596 from right to left ) then crosses @xmath596 from left to right ( resp .",
    "@xmath281 from right to left ) before intersecting any other wire .",
    "if @xmath281 and @xmath596 are parallel , then they contain the same number of vertices .",
    "let the interior vertices on @xmath281 have weights @xmath597 and the weights on @xmath596 have weights @xmath598 .",
    "thus the @xmath52-th orthogonal wire crosses @xmath281 and @xmath596 at vertices with weights @xmath238 and @xmath239 respectively . now define @xmath599 @xmath600 finally we define functions @xmath601 ( also denoted @xmath602 to emphasize @xmath3 ) and @xmath603 ( also denoted @xmath604 ) by @xmath605    if the denominator is 0 , then @xmath601 and @xmath603 are undefined",
    ".    we can define wire cycles @xmath606 to be parallel in a similar manner . to define @xmath607 and @xmath608 ,",
    "one has to make a choice of where to begin labeling the orthogonal wires .",
    "we shall return to this point in section [ sec : torus ] .",
    "suppose @xmath281 and @xmath596 are parallel wires in @xmath3 with @xmath281 to the left of @xmath596 . for @xmath609",
    ", we define a network @xmath610 ( also denoted @xmath611 for simplicity ) , as follows .",
    "create two new crossings @xmath40 and @xmath96 between the @xmath281 and @xmath596 , with @xmath40 before all the interior vertices of @xmath281 and @xmath596 , and @xmath96 after all the interior vertices of @xmath281 and @xmath596 .",
    "we assign vertex weights @xmath612 and @xmath613 to @xmath40 and @xmath96 respectively .",
    "now we use the yang - baxter transformation to move the crossing at @xmath40 past all the orthogonal wires .",
    "if @xmath601 or @xmath603 are undefined , or the yang - baxter moves can not be performed ( because some denominators are @xmath14 ) , then @xmath610 is undefined .",
    "we suppose this is not the case .",
    "[ lem : cancel ] after @xmath40 is moved past all the orthogonal wires , its weight is equal to the negative of the weight of @xmath96 . furthermore , @xmath601 and @xmath603 are the unique rational functions in the vertex weights of @xmath281 and @xmath596 with this property",
    ".    the first statement can be obtained by a direct calculation , but it will follow from our constructions in sections [ ssec : whirlcrystal]-[ssec : whirlcurlcrystal ] below . to obtain the second statement , we note that the stated property is equivalent to an equation of the form @xmath614 where @xmath615 are rational functions in the vertex weights along @xmath281 and @xmath596 .",
    "this equation can be converted to a quadratic polynomial equation in @xmath616 , the coefficients of which determine @xmath617 and @xmath618 in terms of @xmath615 .",
    "it follows from lemma [ lem : cancel ] that we can apply the moves ( xm ) and ( xr ) to remove the extra vertices , leaving a network @xmath610 which is the same as @xmath3 except for the vertex weights along @xmath281 and @xmath596 .",
    "we call this the wiring crystal action on @xmath3",
    ".    in the definition of @xmath610 we could also ask for @xmath96 to be moved to the front to cancel with @xmath40 , or indeed for both to be moved to any location in the middle .",
    "we now state some basic properties of @xmath619 , relating the wiring crystal action to geometric crystals .",
    "[ thm : wiringcrystal ]    1 .",
    "we have the equations @xmath620 where abusing notation we denote by @xmath621 the image of @xmath281 in the network @xmath610 .",
    "2 .   the wiring crystal action gives a rational action of @xmath622 on @xmath3 .",
    "thus for generic vertex weights on @xmath281 and @xmath596 , the network @xmath610 is defined , and we have @xmath623 .",
    "3 .   suppose @xmath624 and @xmath625 are pairs of parallel wires with no common vertices .",
    "then the wiring crystal actions @xmath626 and @xmath627 commute . 4 .",
    "suppose we have three parallel wires @xmath628 with @xmath281 to the left of @xmath596 and @xmath596 to the left of @xmath629",
    ". then the wiring crystal actions @xmath630 and @xmath631 satisfy the geometric crystal braid relation : @xmath632 .",
    "the wiring crystal action is completely local to @xmath281 and @xmath596 .",
    "so to establish theorem [ thm : wiringcrystal ] it suffices to consider two or three parallel wires on a cylinder .",
    "the stated properties in this case will follow from our identification of certain networks on the cylinder with products of the geometric crystals @xmath586 and @xmath591 .",
    "let @xmath624 be parallel wire cycles in @xmath3 .",
    "then there is a whurl relation ( section [ ssec : whurl ] ) which swaps @xmath281 and @xmath596 . on the other hand , cutting @xmath281 and @xmath596 in the same place , we can apply a wiring crystal action @xmath626 to the pair @xmath624 .",
    "[ lem : crr ] regardless of where we cut @xmath281 and @xmath596 , the weyl group action @xmath633 ( section [ ssec : weyl ] ) coincides with the whurl relation .    if @xmath634 then @xmath635 which coincides with the formula for @xmath17 in theorem [ thm : whloc ] .",
    "consider an oriented simple - crossing network @xmath3 on a cylinder that consists of a single whirl wire cycle ( going around the cylinder once ) crossed by @xmath142 horizontal wires that do not cross each other and connect @xmath142 source boundary vertices @xmath451 on the left to @xmath142 sink boundary vertices @xmath453 on the right .",
    "that is @xmath636 in the notation of section [ sec : whirlcurl ] .",
    "assign the weight @xmath637 to the interior vertex of the network that is the intersection obtained of the whirl cycle with the @xmath264-th horizontal wire @xmath638 .",
    "let @xmath639 denote the set of such networks as the weights @xmath637 are allowed to range over @xmath622 .",
    "the set of networks @xmath640 can be naturally identified with the basic affine geometric crystal @xmath586 .    [",
    "prop : wcrystal ] the functions @xmath641 and @xmath642 on @xmath640 agree with @xmath643 and @xmath644 of @xmath586 respectively .",
    "the wiring crystal action @xmath645 on @xmath640 agrees with the geometric crystal actions @xmath646 of @xmath586 .    instead of using a whirl wire cycle",
    ", one can use a curl wire cycle to get the network @xmath647 .",
    "this gives a set of networks @xmath648 .",
    "[ prop : ccrystal ] the functions @xmath641 and @xmath642 on @xmath648 agree with @xmath643 and @xmath644 of @xmath591 respectively .",
    "the wiring crystal action @xmath645 on @xmath648 agrees with the geometric crystal actions @xmath646 of @xmath591 .",
    "we say that @xmath22 is a _ network model _ for an affine geometric crystal @xmath558 of type @xmath548 , if the set @xmath649 ( called a _ network crystal _ , or _",
    "wiring diagram crystal _ ) of weighted networks @xmath3 with weights in @xmath622 and @xmath58 can be birationally identified with @xmath558 , such that for appropriate labellings of wires ,    1 .   the functions @xmath641 and @xmath642 on @xmath650 agree with @xmath643 and @xmath644 of @xmath558 respectively .",
    "2 .   the wiring crystal action @xmath645 on @xmath650 agrees with the geometric crystal actions @xmath646 of @xmath558 .",
    "thus propositions [ prop : wcrystal ] and [ prop : ccrystal ] state that @xmath651 and @xmath652 are network models for @xmath586 and @xmath591 respectively .",
    "suppose @xmath22 and @xmath59 are network models on the cylinder for affine geometric crystals @xmath558 and @xmath653 , both of type @xmath548 .",
    "we define the network composition @xmath654 to be the network on the cylinder obtained by gluing the sinks of @xmath22 to the sources of @xmath59 , and then removing those vertices .",
    "[ prop : compose ] the composition @xmath654 is a network model for @xmath579 .    it is clear that @xmath654 is birationally isomorphic with @xmath579 in the obvious manner . pick and fix a pair of parallel wires @xmath638 and @xmath655 , which will henceforth be omitted from the notation .",
    "we first check that the @xmath617 and @xmath618 functions of @xmath473 and @xmath579 agree .",
    "we use @xmath656 to denote the corresponding quantities for @xmath558 and @xmath653 as in section [ ssec : parallel ] . by ,",
    "@xmath657    let us compare the wiring crystal action @xmath658 with the composition @xmath659 .",
    "the former is computed by introducing two new crossings with weights @xmath660 and @xmath661 .",
    "the latter is computed by introducing four new crossings ( one in the beginning , two in the middle , and one at the end ) with weights @xmath662 , @xmath663 , @xmath664 , and @xmath665 .",
    "a quick calculation shows that @xmath666 so that the middle two crossings can be canceled using ( xm ) and ( xr ) .",
    "but the remaining first and last crossings must still cancel each other out when moved next to each other . since @xmath667 , it follows that @xmath659 computes the wiring crystal action @xmath658 .",
    "consider the product affine geometric crystal @xmath668 , where each @xmath669 is either @xmath586 or @xmath591 .",
    "it follows from proposition [ prop : compose ] that a network model for @xmath670 is obtained as follows .",
    "take the network @xmath671 on a cylinder that consists of whirl and curl wire cycles crossed by @xmath142 horizontal wires that do not cross each other and connect @xmath142 source boundary vertices on one side of the cylinder to @xmath142 sink boundary vertices on the other side .",
    "each wire cycle is a whirl or a curl depending on whether corresponding @xmath669 factor is @xmath586 or @xmath591 , respectively .",
    "thus @xmath671 is a @xmath672-network , where @xmath669 has @xmath449 factors equal to @xmath591 and @xmath450 factors equal to @xmath586 .",
    "[ thm : whirlcurlcrystal ] the network @xmath671 is a network model for the geometric crystal @xmath673 .    the general description of @xmath618 and @xmath617 we give here generalizes ( * ? ? ? * theorem 4.2 ) for @xmath674 .",
    "consider the fragment of a crystal shown in figure [ fig : wire24 ] .    in this case",
    "@xmath675 and the functions @xmath574 and @xmath575 are as follows : @xmath676      recall from ( * ? ? ?",
    "* section 9 ) that the _ @xmath0-matrix _ of a product @xmath677 of ( affine ) geometric crystals is a birational map @xmath678 which commutes with all the crystal structures , and which in addition satisfies the braid relation @xmath679 when applied to @xmath680 .",
    "let @xmath681 be the network crystal for @xmath673 .",
    "[ prop : rmatrix ] the whurl move , or whirl - curl move , applied to the wire cycles in @xmath682 is exactly the @xmath0-matrix for products of @xmath586 and @xmath591 .",
    "the braid relation is already known to hold ( theorem [ thm : braid ] ) .",
    "so we need to check the claim only for network versions of @xmath683 , @xmath684 and @xmath685 . by inspection , the functions @xmath618 and @xmath617 are invariant when a whurl move or whirl - curl move is applied .",
    "we shall see in theorems [ thm : parallelcommute ] and [ thm : antiparallelcommute ] that the wiring crystal action @xmath619 commutes with the whurl move and the whirl - curl move .",
    "consider the networks @xmath540 and @xmath541 on a cylinder as in section [ sec : lsym ] .",
    "they are network models for the product affine geometric crystals @xmath686 and @xmath687 .",
    "we caution that there is a shift between the labeling of the variables @xmath508 in section [ sec : lsym ] and in the current section .",
    "the following result is established in @xcite in the case of @xmath540 , and the case of @xmath541 is analogous .    [",
    "prop : cylep ] ( * ? ? ?",
    "* theorem 4.2 ) the formulae for @xmath575 and @xmath574 of @xmath688 are given by @xmath689 where @xmath690 denotes the loop elementary symmetric functions for @xmath540 .",
    "the formulae for @xmath575 and @xmath574 in @xmath691 are given by @xmath692 where @xmath690 denotes the loop elementary symmetric functions for @xmath541 .",
    "now let @xmath672 be a cylindric network that has @xmath142 horizontal wires , @xmath450 whirls and @xmath449 curls in some order .",
    "for @xmath693 , the functions @xmath618 and @xmath617 are no longer simple ratios of boundary measurements .",
    "however , we do have the following proposition .",
    "[ p : epphrat ] the @xmath618 and @xmath617 functions for @xmath693 are rational functions in the boundary measurements of @xmath672 .    from proposition [ prop : rmatrix ]",
    "we know that applying whirl - curl relations does not change @xmath618 and @xmath617 , while from theorem [ thm : bm ] we know it does not change the measurements .",
    "thus we may assume all @xmath450 whirls are on the left of the cylinder , and all @xmath449 curls on the right .",
    "split our network ( and the cylinder ) into two subnetworks ( and two subcylinders ) so that all whirls belong to one , all curls to the other . if we can determine the @xmath618 and @xmath617 functions of each of the two subnetworks from the boundary measurements of the whole network , we can find @xmath618 and @xmath617 for the whole network , as in the formula for the product of geometric crystals . by proposition [ prop : cylep ]",
    "it suffices to be able to determine the boundary measurements for each of the two subnetworks from the boundary measurements of the whole network .",
    "now we use theorem [ thm : schur ] . according to the chosen order of whirls and curls ,",
    "the semistandard fillings have indices @xmath7 through @xmath450 column - strict and indices @xmath694 through @xmath695 row - strict .",
    "let @xmath696 be the rectangular shape @xmath697 .",
    "let @xmath698 be @xmath521 with @xmath131 extra cells in the first column .",
    "we claim that there is a bijection between semistandard fillings of @xmath699 and pairs of semistandard fillings of @xmath521 and of a column shape of length @xmath131 , where the latter is in the alphabet @xmath700 .",
    "indeed , in both @xmath521 and @xmath699 the leftmost cell of the @xmath450-th row is forced to be filled with @xmath450 .",
    "it can not be filled with anything smaller since @xmath701 are column strict , and there are @xmath702 cells above it .",
    "it also can not be filled with anything larger since @xmath700 are row strict , and there are @xmath449 cells to the right from it .",
    "this forces the @xmath703-st cell in the first column of @xmath699 to be filled with at least @xmath694 , but imposes no other restrictions .",
    "the bijection is then obtained just by cutting off the last @xmath131 cells of the first column .",
    "this implies that each @xmath690 ( and thus each boundary measurement ) of the curl subnetwork can be obtained as a ratio @xmath704 , and is thus a rational function of the boundary measurements of @xmath672 .",
    "the boundary measurements of the whirl subnetwork are then recovered according to proposition [ prop : compose ] , and are also rational functions of the boundary measurements of @xmath672 . the proposition follows .",
    "the energy function of an affine crystal is an important invariant which connects crytals to the theory of lattice models .",
    "affine geometric crystals @xmath558 have rational energy functions @xmath705 .",
    "we do not discuss them in detail here .",
    "[ p : energy ] the energy function of @xmath693 are rational functions in the boundary measurements of @xmath672 .",
    "the energy function is an invariant of the birational @xmath0-matrix .",
    "it follows from theorem [ thm : lp4 ] and the proof of proposition [ p : epphrat ] that it is a rational function in the boundary measurements of @xmath672 .    in @xcite , an explicit formula for the rational energy function @xmath705 of @xmath706",
    "was given : the energy is the loop schur function @xmath707 for a stretched staircase shape @xmath521 . in the more general case of @xmath708",
    ", it appears that the same is true .",
    "namely , there is a shape @xmath709 such that the energy function is the loop schur function @xmath710 , as defined in section [ sec : lsym ] .",
    "the shape @xmath709 depends on the number of whirl and curl factors in @xmath708 , but not on their order .",
    "we now briefly explain the connection with combinatorial affine crystals , assuming the reader is familiar with the latter .",
    "we shall use @xcite as our main reference for affine crystals .",
    "a comprehensive study of the relation between geometric crystals and combinatorial crystals is given in @xcite .",
    "we consider two kinds of affine crystals for @xmath557 : the crystals @xmath711 which are crystals for the symmetric powers of the standard representation of @xmath557 , and their duals , denoted @xmath712 .",
    "the affine crystals @xmath711 can be identified with the set of semistandard tableaux filled with @xmath451 with a fixed row - shape .",
    "( note that there is one geometric crystal @xmath586 , but there are many possible crystals @xmath711 depending on the length of the row . )",
    "denote by @xmath637 the number of @xmath264-s in @xmath713 .",
    "similarly , each @xmath714 can be identified with a semistandard tableau with @xmath715 rows .",
    "denote by @xmath637 the number of the columns in @xmath450 that do not contain the number @xmath264 .",
    "then the @xmath618 and @xmath617 functions of @xmath711 and @xmath712 agree with those of @xmath586 and @xmath591 .",
    "the geometric crystal @xmath668 is the geometric analogue of the tensor product combinatorial affine crystals @xmath716 , where @xmath717 is a @xmath711 ( resp .",
    "@xmath712 ) as to @xmath718 is @xmath586 ( resp .",
    "@xmath591 ) .",
    "[ prop : trop ] the action of the crystal operators @xmath719 on the combinatorial crystal @xmath720 , and the operators @xmath721 on a geometric crystal @xmath673 are related by _ tropicalization _ : write @xmath721 as a rational function ( in the @xmath101-s ) then make the changes : @xmath722 , @xmath723 , and @xmath724 .",
    "finally change every occurrence of @xmath616 to a @xmath7 .",
    "this gives a piecewise linear formula @xmath725 which agrees with @xmath719 , except when the latter sends a crystal element to 0 .",
    "the combinatorial crystal operator @xmath719 sends a crystal element to 0 exactly when @xmath726 on that element .",
    "it is clear that the claim is true for @xmath711 and @xmath586 ( or @xmath712 and @xmath591 ) .",
    "for example , the tropical version of @xmath727 is that the crystal operator @xmath719 increases the number of @xmath52-s by one and decreases the number of @xmath728-s by one .",
    "an element of a single row crystal is sent to zero exactly when a crystal operator attempts to decrease the number of @xmath52-s or @xmath728-s below zero .",
    "now we claim that if the proposition is true for two combinatorial crystals @xmath729 and @xmath730 , it is also true for their tensor product @xmath731 .",
    "indeed , the combinatorial analogues of the formulae are @xmath732 consistent with kashiwara s formulas for combinatorial crystals , see @xcite .",
    "also , the tropical analogue of formula is @xmath733 which for @xmath734 is equivalent to the kashiwara s rules @xmath735 thus as long as an element is not mapped to zero , the the proposition holds .",
    "the last statement is well - known and holds for all crystals",
    ".    given two consecutive factors in @xmath736 one can apply to them the _",
    "combinatorial @xmath0-matrix _ , which is known to be a crystal automorphism .",
    "the action of the combinatorial @xmath0-matrix can be realized using schtzenberger s jeu de taquin as follows @xcite . given a pair of rectangular shaped tableaux @xmath737 and @xmath738 , form a single skew semistandard tableaux by attaching them one to the other along the corner .",
    "it turns out that there is a unique pair @xmath739 and @xmath740 such that the shapes are swapped and the two skew tableaux jeu de taquin to the same non - skew tableaux .",
    "one defines @xmath741 .",
    "[ ex : r ] let @xmath742 .",
    "@xmath743{\\bl&\\bl&\\bl&{1}&{2}&{2 } \\\\",
    "\\bl&\\bl&\\bl&{2}&{3}&{3 } \\\\ { 1}&{2}&{2}}\\;\\ ; \\stackrel{r}{\\longrightarrow } \\;\\ ; \\tableau[sy ] { \\bl&\\bl&\\bl&{2}&{2}&{2}\\\\ { 1}&{1}&{2 } \\\\ { 2}&{3}&{3 } } \\;\\ ; \\text{since both jeu de taquin to } \\;\\ ; \\tableau[sy]{{1}&{1}&{2}&{2}&{2}&{2 } \\\\ { 2}&{3}&{3}}\\ ] ]    [ prop : bx ] written in the variables @xmath637 as above , the combinatorial @xmath0-matrix action on @xmath720 is the tropicalization of the geometric @xmath0-matrix ( proposition [ prop : rmatrix ] ) on @xmath673 .    in example [",
    "ex : r ] we have @xmath744 , @xmath745 . then tropicalizing one has @xmath746 which agrees with the number of columns missing @xmath7 in @xmath739 .",
    "it suffices to prove this for @xmath683 , @xmath684 and @xmath685 .",
    "( in the case of two whirl factors @xmath683 the statement is known , see for example @xcite and ( * ? ? ?",
    "* example 2 ) ) .",
    "one checks case by case that the functions @xmath618 and @xmath617 are preserved by the tropicalization of the geometric @xmath0-matrix .",
    "thus one may deduce from proposition [ prop : rmatrix ] and [ prop : trop ] that the tropicalization of the geometric @xmath0-matrix commutes with the combinatorial crystal structure @xmath719 , thus providing an automorphism of @xmath747 , @xmath748 or @xmath749 . since the combinatorial @xmath0-matrix is the _",
    "unique _ automorphism of a product of two kirillov - reshetikhin crystals @xcite , we conclude that the two must coincide .",
    "proposition [ prop : bx ] can also be deduced from proposition [ prop : trop ] and the uniqueness of @xmath0-matrix as a crystal automorphism for two kirillov - reshetikhin factors .",
    "let @xmath624 and @xmath750 be two pairs of parallel wires in a network @xmath3 .",
    "we say that @xmath624 and @xmath750 are _ orthogonal _ if they intersect in exactly four vertices @xmath751 , @xmath752 , @xmath753 , and @xmath754 .",
    "the same definition holds when one or both of @xmath624 and @xmath750 is a pair of parallel wire cycles .",
    "we shall say that @xmath624 is a pair of _ antiparallel _ wires , if they become parallel after reversing the orientation of either @xmath281 or @xmath596 .",
    "the definition of orthogonal extends to the case where one of the pairs is antiparallel . we shall exclude the case where both pairs are antiparallel .",
    "let @xmath624 and @xmath750 be two pairs of parallel wires or wire cycles .",
    "we denote by @xmath755 and @xmath756 the respective wiring crystal actions ( section [ ssec : wiringcrystal ] ) .",
    "we also denote by @xmath757 and @xmath758 the corresponding weyl group actions ( section [ ssec : weylwhurl ] ) , or equivalently by lemma [ lem : crr ] the corresponding whurl relation . in the case",
    "that @xmath624 ( or @xmath750 ) are wire cycles , to define the wiring crystal action we suppose we have chosen a cut .",
    "that is , we need to pick successive intersections of @xmath624 with two other wires , and imagine @xmath281 and @xmath596 is cut in between .",
    "we say that @xmath624 is _ cut by _",
    "@xmath750 if @xmath624 is a wire cycle and the chosen cut happens exactly at the intersections of @xmath624 with @xmath750 .      1 .",
    "if @xmath624 is not cut by @xmath750 and @xmath750 is not cut by @xmath624 , then the wiring crystal actions @xmath755 and @xmath756 commute .",
    "2 .   if @xmath624 is not cut by @xmath750 , then the wiring crystal action @xmath755 and the weyl group action @xmath758 commute .",
    "the weyl group actions @xmath757 and @xmath758 commute .",
    "\\(2 ) and ( 3 ) follow from ( 1 ) , since the weyl group action is a special case of the wiring crystal action but we know from lemma [ lem : crr ] and section [ ssec : whurl ] that it does not depend on where the cut is made .",
    "now we prove ( 1 ) .",
    "since neither @xmath624 or @xmath750 cuts the other , we may picture the two wiring crystal actions @xmath759 and @xmath760 as in figure [ fig : wire25 ] .",
    "we create four crossings , using as weights @xmath612 and @xmath761 and respectively @xmath613 and @xmath762 on the other side . using the frenkel - moore relation ( proposition [ prop : fm ] ) , we conclude that the effect on the network of pushing both crossings through does not depend on which is being pushed first .",
    "thus , in both pairs of crossings the cancellation happens regardless of which crossing is pushed through first .",
    "it remains to argue that after one acts by the crystal operator @xmath755 the value of the functions @xmath763 and @xmath764 remains the same , so that weights @xmath761 and @xmath762 still realize the action of the crystal operator @xmath760 .",
    "this is a local calculation , so we may assume that we are on the cylinder , with @xmath750 as horizontal wires connecting the boundaries and @xmath624 orthogonal wire cycles going around the cylinder . by proposition [ p : epphrat ] , @xmath763 is given by a rational function of the boundary measurements , and further by definition it is unaffected by the creation of the two crossings ( weighted @xmath612 and @xmath613 ) on the @xmath624 wires . by theorem [ thm : bm ] ,",
    "pushing the crossings through do not affect these boundary measurements .",
    "it follows that @xmath755 preserves @xmath763 and @xmath764 , and similarly @xmath756 preserves @xmath603 and @xmath601 .",
    "now suppose that @xmath750 is parallel , but @xmath624 is antiparallel .",
    "denote by @xmath757 the whirl - curl relation applied to @xmath624 after possibly gluing the ends of @xmath281 ( resp .",
    "@xmath596 ) together in the case that @xmath624 are not wire cycles .      1 .   if @xmath750 is not cut by @xmath624 , then the wiring crystal action @xmath756 and the whirl - curl relation @xmath757 commute .",
    "the weyl group action @xmath758 and the whirl - curl relation @xmath757 commute .      by theorem [ thm : wcloc ]",
    ", the whirl - curl relation @xmath757 can be realized by pushing a crossing through to eliminate another crossing .",
    "we apply the frenkel - moore relation ( proposition [ prop : fm ] ) to the situation in figure [ fig : wire26 ] to see that it does not matter if the wiring crystal action crossing or the whirl - curl relation crossing is pushed through first . in particular , after we push through the crystal crossing , the whirl - curl relation crossings still cancel each other out .",
    "according to lemma [ lem : unp ] this means that one is still performing the whirl - curl transformation .",
    "thus canceling the crossings in figure [ fig : wire26 ] does indeed compute @xmath765 .    to see that figure [ fig : wire26 ] also computes @xmath766",
    ", we note that the whirl - curl transformation @xmath757 ( ) maps the ratio @xmath767 into its inverse , which implies that the function @xmath768 remains invariant ( the orientations of @xmath281 and @xmath596 are swapped and this cancels out the inverse ) . since the two crystal crossings cancel each other out even after the action of @xmath757 , we conclude that they realize the action of @xmath769 for some @xmath770 .",
    "the ratio of the weights of the two crystal crossings must thus be @xmath771 , and since @xmath772 did not change , we have @xmath773 .",
    "let @xmath3 consist of two families of wire cycles on a torus @xmath4 with homology classes corresponding to a basis of @xmath15 , which we refer to as the _ vertical family _ and _ horizontal family_. each wire cycle family intersects each wire cycle of the other family exactly once .",
    "assume we have @xmath142 horizontal wire cycles and @xmath150 vertical wire cycles , and that the weights of the vertices are @xmath774 , @xmath775 $ ] , @xmath776 $ ] .",
    "we shall suppose that all cycles in each family are oriented in the same direction , so that we have @xmath777 pairs of parallel wires .",
    "let @xmath778 denote the set of networks obtained by varying the weights .",
    "there are @xmath142 different ways to cut the torus horizontally to form a cylinder , giving @xmath778 @xmath142 different @xmath779-crystal structures , and @xmath150 different ways to cut the torus vertically , giving @xmath778 @xmath150 different @xmath557-crystal structures .",
    "we call this set of crystal structures on @xmath778 a _ @xmath780 double affine crystal _ , or _ toroidal crystal_. we believe that this crystal is related to quantum toroidal algebras .    note that once we have chosen @xmath779 and @xmath557 crystal structures on @xmath778 , we have also distinguished which pair of wires correspond to the affine ( 0 node ) crystal wiring action .",
    "the following theorem follows from theorem [ thm : parallelcommute ] and proposition [ prop : rmatrix ] .      1 .   the finite ( @xmath781 and @xmath782 ) crystal actions commute . 2 .",
    "the @xmath779 ( resp .",
    "@xmath557 ) crystal action commutes with the weyl group action for @xmath781 ( resp .",
    "@xmath782 ) which acts as the r - matrix .",
    "the ( affine ) weyl group actions of the @xmath779 and @xmath557 crystals commute .",
    "part ( 3 ) of theorem [ thm : doubleaffine ] is a theorem of kajiwara , noumi and yamada ( * ? ? ?",
    "* theorem 2.1 ) who discovered it in the context of discrete painlev dynamical systems . part ( 1 ) generalizes an observation of berenstein and kazhdan ( * ? ? ?",
    "* example 1.4 ) .    because of the orientation of the two families of wires , the crystal structure of @xmath778 as a @xmath557-crystal is as a product of basic affine geometric crystals , and as a @xmath779-crystal it is a product of dual basic affine geometric crystals ( or vice versa ) .",
    "lascoux @xcite has considered commuting finite crystal structures for combinatorial @xmath783 crystals . in the setting of biwords ,",
    "he defines two ( commuting ) crystal structures that act on the insertion and recording tableaux respectively .",
    "we claim that this double ( finite ) crystal structure is a tropicalization of the two commuting geometric crystal structures as in theorem [ thm : doubleaffine](1 ) .",
    "continue the notation of section [ ssec : comb ] .",
    "let @xmath784 be an element of a tensor product of @xmath785 crystals .",
    "let @xmath786 be the number of @xmath264-s in @xmath787 .",
    "swapping the roles of @xmath52 and @xmath264 in @xmath786 , @xmath788 of single row crystals for @xmath779 . to see that the two crystal structures ( on the same underlying set ) commute , we first apply the duality map mentioned in the proof of proposition [ prop : bx ] .",
    "this sends @xmath788 to @xmath789 , where @xmath790 is determined by @xmath791 . comparing with the labeling of wires on a torus and using proposition [ prop : trop ]",
    ", one sees that the crystal actions on @xmath450 and @xmath792 is the combinatorial analogue of the double affine geometric crystal of theorem [ thm : doubleaffine ] .",
    "the commuting finite combinatorial crystal structures then follows from theorem [ thm : doubleaffine](1 ) ."
  ],
  "abstract_text": [
    "<S> we develop a combinatorial model of networks on orientable surfaces , and study weight and homology generating functions of paths and cycles in these networks . </S>",
    "<S> network transformations preserving these generating functions are investigated .    </S>",
    "<S> we describe in terms of our model the crystal structure and @xmath0-matrix of the affine geometric crystal of products of symmetric and dual symmetric powers of type @xmath1 . </S>",
    "<S> local realizations of the @xmath0-matrix and crystal actions are used to construct a _ </S>",
    "<S> double affine geometric crystal _ on a torus , generalizing the commutation result of kajiwara - noumi - yamada @xcite and an observation of berenstein - kazhdan @xcite .    </S>",
    "<S> we show that our model on a cylinder gives a decomposition and parametrization of the totally nonnegative part of the rational unipotent loop group of @xmath2 . </S>"
  ]
}