{
  "article_text": [
    "from the viewpoint of a company launching an advertising campaign , the goal of digital advertising is to increase its return on investment by leveraging the different channels enabling an interaction with its potential customers : desktop display , mobile , social media , e - mailing , etc .",
    "usually , this is achieved via branding campaigns , by prospecting individuals who are likely to be in affinity with a given product / campaign , or by driving those who have already shown some interest into a final conversion ( _ e.g. _ a purchase ) .",
    "+ in recent years , the advertising industry has gone through a lot of upheavals : numerous technological changes , a deluge of newly available data , the emergence of a huge number of ad - tech startups entering the market , etc . in particular ,",
    "new mechanisms have emerged and have completely changed the way digital ad inventory is purchased . in practice , the inventory is often purchased programmatically , and it is possible to algorithmically buy it unit by unit , with the hope of making real the original promise of the advertising and media buying industry : _ targeting the right person , at the right time , and in the right context . _ + programmatic media buying has skyrocketed over the last five years .",
    "although these figures can only be rough approximations , it is estimated that the total net advertising revenue linked to programmatic desktop display in europe was around bn in 2014 .",
    "for programmatic mobile display and video display the figures were respectively m and m ",
    "see @xcite .",
    "overall , the total growth in net advertising revenue related to programmatic media buying was around 70% in europe between 2013 and 2014 .",
    "iab europe estimates in @xcite that the percentage of revenue coming from programmatic media buying is a two - digit number for all formats : 39% for desktop display , 27% for mobile display , and 12% for video display . in the us ,",
    "the figures are even more staggering with $ 5.89bn spent programmatically on desktop / laptop display , and $ 4.44bn on mobile / tablet display , in 2014 ( source : emarketer.com ) . + one of the main and most exciting developments in programmatic media buying is real - time bidding ( or rtb ) .",
    "rtb is a new paradigm in the way digital inventory is purchased : advertisers can buy online inventory through real - time auctions for displaying a banner ( or a short video ) .",
    "these real - time auctions make it possible for advertisers to target individual users on a per - access basis .",
    "+ in a nutshell , each time a user visits a website , the publisher  the supply side  connects to a virtual marketplace , called an _ ad exchange _ , in order to trigger an auction for each available slot that can be allocated to advertising .",
    "on the demand side , ad trading desks receive auction requests ( sometimes through a demand - side platform ",
    "dsp ) , together with information about the user , the type of website , etc . , and choose the bid level that best suits their strategy . once the different bids are processed , the slot is attributed to the bidder who has proposed the highest bid and the price paid depends on the type of auction .",
    "the entire process , from the user entering the website to the display of the banner , takes around 100 milliseconds .",
    "+ rtb auctions are usually of the vickrey type , also known as `` second - price auctions '' . in short , the mechanism is the following : first , the participants send their bids in a sealed way , then , the item ( here the slot ) is sold to the participant who has proposed the highest bid , and the price paid by this participant corresponds to the second best bid ( or to a minimum price if there is only one participant ) .",
    "structurally , vickrey auctions give participants an incentive to reveal their true valuation for the item ",
    "see @xcite .",
    "+ the problem faced by ad - trading desks is to choose the optimal bid level each time they receive a request to participate in a vickrey auction . here",
    ", optimality may have different meanings , depending on the considered key performance indicator ( kpi ) .",
    "in all cases , the complexity of the problem arises from the need of optimizing a functional depending on _ macroscopic _ quantities at an hourly , daily or weekly timescale , by interacting with the system at the _ microscopic _ scale of each auction , _",
    "i.e. _ through a high - frequency / low - latency bidding algorithm participating in thousands of auctions per second .",
    "this multi - scale feature leads to the need of mathematical models that are both realistic and tractable , because numerical methods are often cumbersome and time - consuming in the case of multi - scale problems . in this article",
    ", we rely on methods coming from stochastic optimal control and we show that the optimal bidding strategy can be approximated very precisely ( and almost in closed form ) by using classical tools of convex optimization . + besides the classical literature on vickrey auctions ( see for instance @xcite )  which is related to auction theory and more generally to game theory  , the academic literature on this new kind of problems is really scarce .",
    "general approaches for real - time bidding optimization from a buyer s perspective can be found mostly in conference proceedings from the computer - science community ( _ e.g. _ @xcite ) .",
    "our approach is similar to the one presented in the work of amin _ et al .",
    "_ @xcite : both are markov decision process ( mdp ) approaches and dealing with similar auction problems .",
    "however , besides the originality of their model , amin _ et al . _ do not extend their mathematical development beyond the baseline discrete case .",
    "another author introduced an mdp approach in the conference paper @xcite , but he focused on the problem from a publisher perspective . in general , the supply - side perspective has generated more academic research than the demand - side one ( see yuan s phd dissertation @xcite and the articles by balseiro _",
    "a recent study of rtb auctions from a buyer s perspective is stavrogianni s phd dissertation @xcite .",
    "+ our stochastic optimal control approach is inspired by the academic literature in algorithmic trading @xcite , where , similarly to our problem , the goal is to optimize a macroscopic functional depending on the terminal state of the algorithm ( _ e.g. _ at the end of the day ) by continuously making decisions on a high - frequency basis ( _ i.e. _ milliseconds ) . moreover , like in high - frequency trading models involving limit orders , the algorithm should react to a system driven by one or several controlled poisson processes .",
    "+ in this paper  the first of a series on real - time bidding , see @xcite and @xcite  , we model by a marked poisson process the sequence of auction requests received by an ad - trading desk : the poisson process models the arrival times of the requests , and the marks correspond to independent random variables @xmath0 modeling the _ price to beat _ , _ i.e. _ the highest bid proposed by the other participants in the auction . every time an auction is received , the algorithm sends a bid @xmath1 to the auction server . for the @xmath2 auction",
    ", the inventory is purchased by the algorithm if and only if the bid sent by the algorithm is greater than the price to beat @xmath3 ( and in that case the price paid for the slot is @xmath3 ) .",
    "the rationale for considering this _ statistical model _ , rather than a more complicated game - theoretical one , comes from : ( i ) the large number of auction requests ( several hundreds per second ) for most segments of audience , and ( ii ) our assumption that the algorithm is restricted to an homogeneous subset of the inventory ( _ i.e. _ we assume that a segmentation of the different audiences and contexts has been carried out beforehand , or , in other words , that the problem we consider is at the tactical `` execution '' level  see also @xcite ) . + in section 2 , we introduce the main notations of our modeling framework , and we focus on a stochastic optimal control problem where an ad trader aims at maximizing the total number of banners displayed , for a given spending ( audience strategy ) .",
    "we exhibit the characterization of the optimal bidding strategy with a hamilton - jacobi - bellman equation , and show that the optimal bidding strategy can be obtained in almost - closed form by using a fluid - limit approximation .",
    "moreover , this approximation leads to a new characterization of the bidding strategy in the form of an optimal scheduling , which in practice can be tracked by a feedback - control mechanism .",
    "the main result is indeed that the budget should be spent evenly over the considered time window .",
    "+ in section 3 , we propose several extensions of our model .",
    "in particular , we generalize the initial model by considering several sources and types of inventory , and we consider another objective function for taking account of a very important kpi : the number of conversions . in these extensions , as in the initial model with only one source of inventory , we find that the total budget should be spent evenly over the considered time window ",
    "see @xcite for a different conclusion when on - line learning is considered .",
    "however , we find that the optimal bidding strategies are not uniform across sources , but instead proportional to an index which is , in the general case with multiple sources and conversions , a simple function of ( i ) the _ a priori _ interest for each source / type of inventory , ( ii ) the _ a priori _ interest for each source of conversion , and ( iii ) the probability of conversion associated to each source . in section 3",
    ", we also discuss the difference between first - price and second - price auctions , the impact of floor prices , and more general  nonlinear  objective criterions .",
    "in this section , we present a model where an ad trader wishes to spend a given amount of money @xmath4 over a time window @xmath5 $ ] , in order to display a maximum number of banners to a given population .",
    "he receives auction requests at random times from a single ad exchange  and does not know in advance how many auction requests he will receive .",
    "the model we propose is naturally written in continuous time and the ( random ) occurrences of auction requests are modeled by the jumps of a poisson process . a simplified discrete - time modeling framework is presented in the appendix for readers who are more used to discrete - time markov decision processes .",
    "+      let us fix a probability space @xmath6 equipped with a filtration @xmath7 satisfying the usual conditions .",
    "we assume that all stochastic processes are defined on @xmath8 . + _ auctions : _",
    "+ we consider an ad trader connected to an ad exchange .",
    "he receives requests to participate in auctions in order to purchase inventory and display some banners to the specific population he wants to target .",
    "requests are modeled with a marked poisson process : the arrival of requests is triggered by the jumps of a poisson process @xmath9 with intensity @xmath10 ,",
    ". a time - varying auction - request intensity can be handled via a change of time , similar as in @xcite , where the main idea is to switch from _ physical time _ to _ trading time_. ] and the marks @xmath0 correspond , for each auction , to the highest bid among the other participants bids .",
    "+ every time he receives a request to participate in an auction , the ad trader can bid a price : at time @xmath11 , if he receives a request , then we denote his bid by @xmath12 .",
    "we assume that the ad trader stands ready to bid ( possibly a bid equal to @xmath13 or @xmath14 ) at all times .",
    "in particular , we assume that @xmath15 is a predictable process with values in @xmath16 . +",
    "if at time @xmath11 the @xmath2 auction occurs , the outcome of this auction is the following :    * if @xmath17 , then the ad trader wins the auction : he pays the price @xmath18 and his banner is displayed . * if @xmath19 , then is absolutely continuous ",
    "see below . ]",
    "the ad trader does not win the auction .",
    "in particular , the trader s banner is not displayed and he pays nothing .",
    "an important assumption of our model is that @xmath0 are _ i.i.d . _ random variables distributed according to an absolutely continuous distribution .",
    "we denote by @xmath20 the associated cumulative distribution function and by @xmath21 the associated probability density function .",
    "our assumptions are the following :    * @xmath22 , @xmath3 is almost surely positive .",
    "in particular , @xmath23 . *",
    "@xmath24 . , _ i.e. _ @xmath21 equal to 0 above a given price level . ]",
    "* @xmath25 .",
    "+    _ remaining cash process : _",
    "+ we denote by @xmath26 the process modeling the amount of cash to be spent .",
    "its dynamics is : . ]",
    "@xmath27    _ inventory process : _ + the number of impressions , _",
    "i.e. _ the number of banners displayed , is modeled by the inventory process @xmath28 .",
    "its dynamics is : @xmath29    _ stochastic optimal control problem : _ + in the model of this section , the trader aims at maximizing the expected number of banners displayed over @xmath5 $ ] .",
    "we should impose not to spend more than @xmath4 , but , for technical reasons , we do prefer to consider a relaxed problem , and to penalize extra - spending .",
    "we consider therefore the maximization of the following criterion : @xmath30,\\ ] ] where @xmath31 measures the importance of the penalty for extra - spending . as a way to see what happens when the maximal total amount to spend is imposed . ]",
    "+ for mathematical reasons , we do prefer to write the stochastic optimal control problem as a minimization problem : @xmath32,\\ ] ] where @xmath33 is the set of predictable processes with values in @xmath16 .",
    "+ _ value function : _",
    "+ to tackle this stochastic optimal control model , we introduce the value function @xmath34\\times \\mathbb{n}\\times ( -\\infty , \\bar{s } ] \\mapsto   \\inf_{(b_s)_{s\\ge t } \\in \\mathcal{a}_{t } } \\mathbb e\\left[-i^{b , t , i}_t + k",
    "\\min\\left(s^{b , t , s}_t,0\\right)^2\\right],\\ ] ] where @xmath35 is the set of predictable processes on @xmath36 $ ] with values in @xmath16 , and @xmath37 @xmath38        to solve the above stochastic optimal control problem , we introduce the associated hamilton - jacobi - bellman ( hjb ) equation which corresponds to the continuous - time equivalent of the bellman equation ( a.2 ) derived in discrete time from the dynamic programming principle  see the appendix . here the hjb equation is :    @xmath39    with terminal condition @xmath40 .",
    "( [ m1:hjb ] ) is a non - standard integro - differential hjb equation  which is similar to eq .",
    "because the objective function is affine in the variable @xmath41 , the dimensionality of the problem can be reduced by considering the ansatz @xmath42 .",
    "+ with this ansatz , eq .",
    "( [ m1:hjb ] ) becomes indeed : @xmath43 with terminal condition @xmath44 . )",
    "can be written @xmath45 ] + eq .",
    "( [ m1:hjb2 ] ) is another non - standard integro - differential hamilton - jacobi - bellman , but with only one spatial dimension instead of two .",
    "it is straightforward to verify that it corresponds to the following stochastic optimal control problem : @xmath46,\\ ] ] where @xmath33 is the set of predictable processes with values in @xmath16 .",
    "+ the change of variables @xmath42 is key to reduce the dimensionality of the problem . for understanding the underlying rationale ,",
    "let us notice that @xmath47 is ( up to the penalization term ) the number of impressions an ad trader should expect to purchase over the time interval @xmath5 $ ] , if , at time @xmath11 , he has already purchased a number of impressions equal to @xmath41 , and has an amount @xmath48 to be spent optimally over @xmath36 $ ] .",
    "because the number of impressions that will be purchased over @xmath36 $ ] does not depend on the number of impressions already purchased , except through the budget that has been spent  or , equivalently , that remains to be spent  , the quantity @xmath49 should be independent of @xmath41 .",
    "hence the ansatz @xmath42 .",
    "in particular , the quantity @xmath50 represents ( up to the penalization term ) the number of impressions an ad trader should expect to purchase over the time interval @xmath36 $ ] , if he has , at time @xmath11 , an amount @xmath48 to be spent optimally over @xmath36 $ ] .",
    "+      from the previous paragraphs , one could consider that the problem is almost entirely solved . because eq .",
    "( [ m1:hjb2 ] ) characterizes the optimal bidding strategy , finding the optimal bid in each state @xmath51 of the system simply boils down indeed to implementing a backward ( monotone ) numerical scheme to approximate the solution of eq .",
    "( [ m1:hjb2 ] ) .",
    "+ however , it is noteworthy that the problem faced by the ad trader is a two - scale one :    * the macroscopic scale is the tactical scale .",
    "this scale is related to the time horizon  @xmath52 and to the amount of cash @xmath4 the ad trader has to spend over the time interval @xmath5 $ ] . in practice , for intraday tactics , the order of magnitude is in the range @xmath53 s ( seconds ) for @xmath52 , and in the range for @xmath4 . *",
    "the microscopic scale is the scale of each auction , related to the intensity @xmath54 , and to the variables @xmath1 and @xmath55 ( in the integral term of eq .",
    "( [ m1:hjb2 ] ) ) .",
    "the order of magnitude for these variables is around @xmath56 s@xmath57 for @xmath54 , and in the range for each bid .    if one wants to approximate the solution of eq .",
    "( [ m1:hjb2 ] ) on a grid in @xmath51 , the time step @xmath58 and the cash / spatial step @xmath59 should be compatible with the microscopic scale . to take account of the fast arrival of auction requests ,",
    "a natural time step is @xmath58 around @xmath60 second .",
    "as far as the cash to spend is concerned , if one wants to be precise when computing the optimal bid for each auction , a natural value for @xmath59 is around , given the previously discussed orders of magnitude for the bids .",
    "given the orders of magnitude considered at the macroscopic scale , we need to consider a numerical scheme on a grid with @xmath61 points in time and @xmath62 points in space , which is computationally extremely costly . )",
    "takes far more time ( seconds , minutes , ... ) to be computed than the maximal time authorized to send a bid to the auction servers ( milliseconds ) . in practice , the solution can be computed in advance , and then be embedded in an in - memory look - up table allowing low - latency requests . ]",
    "even though smart numerical methods can be built to avoid computations at each point of the grid , the multi - scale nature of the problem is an important issue in practice .",
    "+ a way to avoid using a computer - intensive numerical method is to look for almost - closed - form approximations .",
    "as we will show below , such an approximation can be found by using a first - order taylor expansion in the integral term of eq .",
    "( [ m1:hjb2 ] ) .      in this subsection",
    ", we aim at approximating the value function @xmath63 and the resulting optimal control function @xmath64 corresponding to the optimal bidding strategy  the latter is characterized either by @xmath65 if this equation has a solution , or by @xmath66 otherwise , _",
    "i.e. _ if we are in the case where @xmath67 .",
    "+ the main idea underlying the approximation we obtain in the following paragraphs is to replace the term @xmath68 in eq .",
    "( [ m1:hjb2 ] ) by its first - order taylor expansion @xmath69 .",
    "we therefore replace eq .",
    "( [ m1:hjb2 ] ) by :    @xmath70    with terminal condition @xmath44 .",
    "+ intuitively , this approximation is relevant because of the multi - scale nature of the problem : the range of values for @xmath1 should be several orders of magnitude smaller than the values taken by @xmath48 .      in the following paragraphs , we show that eq .",
    "( [ m1:hjbc ] ) is the hamilton - jacobi equation associated with a variational problem which can be regarded as the fluid limit of the stochastic optimal control problem we considered in the previous subsection .",
    "+ for that purpose , let us introduce the following optimization problem : @xmath71 where @xmath72 and where @xmath73 is the set of @xmath74-measurable processes with values in @xmath16 .",
    "+ the value function @xmath75 associated with this problem is defined as : @xmath76 where @xmath77    we have the following theorem :    [ theo ] let us define @xmath78 the value function @xmath75 is given by : @xmath79 it is the unique weak semi - concave solution of the hamilton - jacobi equation ( [ m1:hjbc ] ) .",
    "+ furthermore , the optimal control function @xmath80 is given by the following :    * if @xmath81 , then @xmath82 . * if @xmath83 , then @xmath84 , where @xmath85 is characterized by @xmath86    by using the change of variables @xmath87 $ ] , we have :    @xmath88    where @xmath89 is the set of @xmath74-measurable processes with values in @xmath90 , where @xmath91 and where the function @xmath92 is defined by : @xmath93    @xmath92 is continuously differentiable on the interior of @xmath90 , with : @xmath94    in particular , since @xmath95 is an increasing function , @xmath96 is increasing , and , therefore , @xmath92 is strictly convex .",
    "+ let us now compute the legendre - fenchel transform of @xmath92 : @xmath97    if @xmath98 , then the first order condition associated with the supremum in eq .",
    "( [ m1:supb ] ) is @xmath99 . in other words :    @xmath100    if @xmath101 is nonnegative , then @xmath102 .",
    "+ in the former case , we can write ( by using an integration by parts ) : @xmath103    the legendre - fenchel transform of @xmath92 is therefore @xmath104 , which can indeed be written as : @xmath105    it is straightforward to check that @xmath104 is a twice continuously differentiable convex function.[multiblock footnote omitted ] + we know , from classical variational calculus , that @xmath75 is given by the hopf - lax formula : @xmath106 } \\left((t - t ) l\\left(\\frac{s - y}{t - t}\\right ) + k\\min(y,0)^2\\right).\\end{aligned}\\ ] ]    by using an infimal convolution , we can transform eq .",
    "( [ m1:hl ] ) into : @xmath107    this is the first result of the theorem .",
    "+ furthermore , we know that it is the unique weak semi - concave solution of the following hamilton - jacobi equation : @xmath108 with terminal condition @xmath109 . + this equation is exactly the same as eq .",
    "( [ m1:hjbc ] ) , hence the second assertion of the theorem .",
    "+ moreover the optimal control in the modified problem ( [ lfa ] ) is given by @xmath110    therefore , the optimal control function in the initial problem is : @xmath111    if @xmath112 , then the supremum in eq .",
    "( [ m1:vcff ] ) is reached at @xmath113 .",
    "therefore , @xmath114 and @xmath82 .",
    "+ otherwise , the supremum in eq .",
    "( [ m1:vcff ] ) is reached at @xmath115 uniquely characterized by : @xmath116    in particular , @xmath117 and @xmath84 where @xmath85 is characterized by eq .",
    "( [ m1:characy ] ) .",
    "+   +      theorem [ theo ] invites to use @xmath75 as an approximation for @xmath63 .",
    "then the optimal bidding strategy @xmath118 can be approximated either by @xmath119 , or by solving eq .",
    "( [ sol ] ) in which @xmath63 is replaced by @xmath75 . in",
    "what follows , we consider the former approach .",
    "furthermore , we consider the limit case where @xmath120 .",
    "subsequently , we approximate the optimal bid @xmath121 at time @xmath11 by @xmath122 , where the function @xmath123 is defined by : +    * if @xmath81 , then @xmath124 . *",
    "if @xmath83 , then @xmath125 is given by : @xmath126    in order to understand the above results , it is worth recalling that @xmath127 is the average price to beat , and @xmath128 is the expected number of auctions the ad trader will participate in between the time @xmath11 and the terminal time @xmath52 .",
    "therefore , @xmath129 is the expected amount of cash the ad trader will spend if he bids an infinite price in order to win all the auctions for which he receives a request .",
    "it is therefore natural , in our risk - neutral setting , to bid @xmath130 at time @xmath11 if the remaining amount to spend @xmath131 is greater than @xmath129 .",
    "may seem to go against the fluid - limit approximation .",
    "however , this is not really the case because the price eventually paid for each auction won remains really small compared to the budget @xmath48 , except perhaps near the terminal time @xmath52 . ]",
    "+ if @xmath132 , then the approximation @xmath122 of the optimal bid @xmath121 verifies :    @xmath133    to understand this bidding strategy , let us consider the situation from time @xmath11 , in the interesting case , _",
    "i.e. _ when @xmath132 .",
    "if we use the above approximation of the optimal bidding strategy , the dynamics of the remaining cash is ( for @xmath134 ) :    @xmath135    therefore :    @xmath136 = - \\mathbb{e}\\left[\\lambda\\int_0^{\\tilde{b}^*_\\infty(s , s_{s- } ) } p f(p ) dp\\right]ds = - \\frac{\\mathbb{e}[s_{s}]}{t - s } ds.\\ ] ]    this gives @xmath137 = s \\frac{t - s}{t - t}$ ] . in other words ,",
    "the approximation of the optimal bidding strategy is such that , on average , the remaining cash is spent evenly across @xmath36 $ ] .",
    ", a similar variational problem , solved in  @xcite , shows that the optimal strategy is to spend proportionally to @xmath138 . ] + one of the main consequences of the previous analysis is that optimality is not only characterized by the optimal bid , but also by the speed at which the budget is spent .",
    "the latter is very helpful in terms of implementation . indeed , defining the solution by an _ optimal scheduling curve _ ( also known as budget - pacing , see @xcite ) makes it possible to dynamically control the bid by a feedback - control system tracking a target curve which does not depend on the form of the function @xmath21 . with this point of view",
    ", the exact knowledge of the optimal bidding function is no more necessary .",
    "however , this analysis is based on the fluid - limit approximation .",
    "subsequently , it is valid as far as the number of auction requests is large enough . for audience strategies focusing on small subsets of the inventory ( _ e.g. _ targeting only a few customers , restricting the strategy to _ premium inventory _ only , purchasing slots for a very specific banner format , etc . ) , a numerical approximation of the solution of the initial stochastic control problem is needed .",
    "is small . ]",
    "+      we present a numerical example for an algorithm spending during a period of 100 seconds . due to the high - frequency nature of the algorithm , considering a larger time frame and a larger",
    "budget does not make an important difference from a mathematical standpoint . notice that the spending rate ( @xmath139 /day )  even though it may seem small given the sizes of overall advertizing budgets  is realistic in the light of our problem : we are focusing on an algorithm which is already restricted to a particular channel , audience , and subset of inventory . in practice , ad trading desks dynamically allocate the overall budget throughout the day across a large array of algorithms , such as the one presented here .      for our numerical experiments , we assume that the distribution of the price to beat is an exponential distribution with parameter @xmath141 , _",
    "i.e. _ @xmath142 .",
    "we chose @xmath143",
    "@xmath57 , which is consistent with a cpm of the order of @xmath144 .",
    "+ we represent in figure [ fig : valuef ] a numerical approximation of the solution @xmath63 of the hjb equation  . of the hjb equation  ,",
    "we consider a backward - in - time explicit scheme on a @xmath51 grid .",
    "the minimizer @xmath140 at each point of the grid is found by using the first order condition ( [ sol ] ) ( and an affine approximation between successive points ) .",
    "the integral is then approximated by a closed form formula by using an affine approximation of @xmath63 between successive points of the grid and the exponential form of @xmath21 .",
    "] as stated above , the quantity @xmath50 can be interpreted ( up to the penalty term ) as the expected number of impressions that will be purchased from time @xmath11 by an algorithm following the optimal strategy , when the remaining budget at time @xmath11 is @xmath48 . +    when solving the hjb equation , the most important quantity to compute is the optimal control , _",
    "i.e. _ the optimal bid function @xmath64 .",
    "this function is plotted in figure [ fig : logbid ] . because the values of the optimal bid increase abruptly as @xmath145 , we prefer to plot the logarithm in basis @xmath146 of @xmath147 . +    the optimal bids plotted in figure [ fig : logbid ] are consistent with intuition : the higher the remaining budget and the closer to the terminal time , the higher the optimal bid .",
    "one of the consequences of the fluid - limit approximation is that the average spending rate should be constant .",
    "an important question is whether or not this feature is also true when one uses the optimal bidding strategy obtained numerically by solving the hjb equation  . to answer this question",
    ", we carried out simulations by drawing the times at which auction requests occur and the values of the price to beat for each auction ( using the same set of parameters as above ) .",
    "+    figures [ fig : app1 ] , [ fig : app2 ] and [ fig : app3 ] show the result for different time windows ( we zoom in from 100 s , to 10 s , to 1 s ) : the remaining - cash process is plotted in the left panels and the number of impressions is plotted in the right panels . for the ( realistic ) values of the parameters we considered , it is clear that the budget is spent linearly .",
    "+ we also carried out simulations for a smaller value of @xmath54 ( @xmath148 )  _ i.e. _ in a less liquid market , with a smaller number of auction requests  in order to test the robustness of the qualitative result obtained with the fluid - limit approximation . in figure",
    "[ fig : low2 ] , we plot the solution @xmath63 to the hjb equation and the associated optimal bids ( in log ) . in figure",
    "[ fig : low1 ] , we plot the outcome of the simulations corresponding to the new values of the parameters . + as above , we see that spending rate fluctuates but remains around a constant corresponding to even spending over the trading period .",
    "in this section , we present two important extensions of the model introduced in section  2 .",
    "the first one is a multi - source extension : we consider the case where auction requests arise from several ad exchanges ( or from the same ad exchange but from different types of audience ) , with different frequencies , and different laws for the price to beat .",
    "the second extension is related to conversions : in addition to the number of impressions they buy , ad trading desks often consider the number of conversions as a kpi , which is more in line with the return - on - investment goals of the brand or company launching the advertising campaign . for both extensions ,",
    "we show that the problem remains in dimension @xmath149 ( after a change of variables ) , even though the dimension of the state space increases proportionally with the number of sources and almost doubles when conversions are taken into account .",
    "+ in addition to these two extensions , we discuss many features of the model .",
    "in particular , the difference between vickrey auctions and first - price auctions is addressed , along with the existence of floor prices of several kinds .",
    "kpis are finally discussed because the dimensionality reduction at work in the model of section 2 and in the two extensions presented below is associated with the linearity of the objective function ( up to the penalty term ) .",
    "+      the first extension we consider focuses on the situation where the inventory can be purchased from different sources , _",
    "i.e. _ different ad exchanges , or simply different types of audience .",
    "the heterogeneity comes from differences in the frequency of arrival of auction requests , in the distribution of the price to beat associated with each source , or in the relative importance given to each type of inventory in the objective function .",
    "an important situation is when the inventory is homogeneous across different ad exchanges and the differences only lie in the statistical properties of the auctions . in that case , we show  in the fluid - limit case  that the optimal bid are the same across venues , which is consistent with the result obtained in @xcite .",
    "however , when audiences are heterogenous , we show that the optimal bids differ from one source to the next as a function of the relative importance given to the different types of audience in the objective function .",
    "+      in what follows , we still consider an ad trader who wishes to spend a given amount of money  @xmath4 over a time window @xmath5 $ ] .",
    "+ _ auctions : _ + this ad trader is connected to @xmath150 sources from which he receives requests to participate in auctions in order to purchase inventory  we assume that the trader knows from which source each auction request arises .",
    "requests are modeled with @xmath151 marked poisson processes : the arrival of requests from the source @xmath152 is triggered by the jumps of the poisson process @xmath153 with intensity @xmath154 , and the marks @xmath155 correspond , for each auction request sent by the source @xmath156 , to the highest bid sent by the other participants .",
    "designate the sources and not exponents . ] + every time he receives from the source @xmath156 a request to participate in an auction , the ad trader can bid a price : at time @xmath11 , if he receives a request from the source @xmath156 , then we denote his bid by @xmath157 . as in the model with only one source",
    ", we assume that the ad trader stands ready to bid ( possibly a bid equal to @xmath13 or @xmath14 ) at all times .",
    "in particular , we assume that for each @xmath152 , the process @xmath158 is a predictable process with values in @xmath16 .",
    "+ if at time @xmath11 the @xmath2 auction associated with the source @xmath156 occurs , the outcome of this auction is the following :    * if @xmath159 , then the ad trader wins the auction : he pays the price @xmath160 and his banner is displayed . *",
    "if @xmath161 , then another trader wins the auction .    like in the model with only one source , we assume that , for each @xmath152 , @xmath155 are _ i.i.d . _ random variables distributed according to an absolutely continuous distribution .",
    "we denote by @xmath162 the cumulative distribution function and by @xmath163 the probability density function associated with the source @xmath156 . as above , we assume , for each @xmath152 , that :    * @xmath22 , @xmath164 is almost surely positive . in particular , @xmath165 .",
    "* @xmath166 . *",
    "+    we also assume that the random variables @xmath168 are all independent .",
    "+ _ remaining cash process : _ + as above , we denote by @xmath26 the process modeling the amount of cash to be spent .",
    "its dynamics is : @xmath169    _ inventory processes : _",
    "+ for each @xmath152 , the number of impressions associated with the auction requests coming for the source @xmath156 is modeled by an inventory process @xmath170 . for each @xmath152 ,",
    "the dynamics of @xmath170 is : @xmath171    to simplify exposition , we write @xmath172 , and we write the dynamics of the process @xmath28 :    @xmath173 where @xmath174 is the canonical basis of @xmath175 . +    _ stochastic optimal control problem : _ + in this first extension of the model , the trader aims at maximizing the expected value of an indicator of the form @xmath176 as in section 2 , we consider a relaxed problem with a penalty for extra - spending : @xmath177.\\ ] ]      the value function associated with this problem is : @xmath34\\times \\mathbb{n}^j\\times ( -\\infty , \\bar{s } ] \\mapsto   \\inf_{(b^1_s , \\ldots , b^j_s)_{s\\ge t } \\in \\mathcal{a}_{t}^j } \\mathbb e\\left[-\\sum_{j=1}^j \\alpha^j { i_t^j}^{b , t , i^j } + k",
    "\\min\\left(s^{b , t , s}_t,0\\right)^2\\right],\\ ] ] where @xmath179 @xmath180    the associated hamilton - jacobi - bellman equation is :    @xmath181    with terminal condition @xmath182 .",
    "( [ m1:hjbmulti ] ) is a non - standard integro - differential hjb equation in dimension @xmath178 which generalizes eq .",
    "( [ m1:hjb ] ) . as in the case with only one source",
    ", we can consider an ansatz of the form @xmath183    with this ansatz , eq .",
    "( [ m1:hjbmulti ] ) becomes indeed : @xmath184 with terminal condition @xmath44 .",
    "( [ m1:hjbmulti2 ] ) is another hjb equation , but in dimension @xmath149 , which generalize eq .",
    "( [ m1:hjb2 ] ) .",
    "as in the model with only one source , one could numerically approximate the solution to eq .",
    "( [ m1:hjbmulti2 ] ) and subsequently find the optimal bidding strategy . however , it is interesting to consider the approximation arising from the replacement of the term @xmath68 in eq .",
    "( [ m1:hjbmulti2 ] ) by its first - order taylor expansion @xmath69 .",
    "we therefore replace eq .",
    "( [ m1:hjbmulti2 ] ) by :    @xmath185    with terminal condition @xmath44 .",
    "( [ m1:hjbmultic ] ) is related to the fluid limit of the above stochastic optimal control problem which is defined by :    @xmath186    where @xmath187    the value function @xmath75 associated with this problem is :    @xmath188    where @xmath189    using the same techniques as for theorem [ theo ] , we can prove the following theorem :    [ theomulti ] let us define @xmath190 and @xmath191    the value function @xmath75 is given by : @xmath79 it is the unique weak semi - concave solution of the hamilton - jacobi equation ( [ m1:hjbmultic ] ) .",
    "+ furthermore , the optimal control function @xmath80 is given by the following :    * if @xmath192 , then : @xmath193 * if @xmath194 , then : @xmath195 where @xmath85 is characterized by @xmath196    by using the change of variables @xmath197 $ ] , we have : @xmath198 where @xmath199 is the set of @xmath74-measurable processes with values in @xmath200 , where @xmath201 and where , for all @xmath152 , the function @xmath202 is defined by : @xmath203    an equivalent way to write eq .",
    "( [ lfamulti ] ) is : @xmath204 where @xmath205 is the set of @xmath74-measurable processes with values in @xmath206 $ ] , where @xmath207 and where @xmath208    as in the proof of theorem [ theo ] , @xmath202 is a convex function , continuously differentiable on the interior of @xmath209 . + let us now compute the legendre - fenchel transform of @xmath202 : @xmath210    as in the proof of theorem [ theo ] , we can easily find the supremum in eq .",
    "( [ m1:supbmulti ] ) :    * if @xmath98 , then @xmath211 , and @xmath212 * if @xmath101 is nonnegative , then @xmath213 , and @xmath214    in particular , @xmath215 is a @xmath216 function .",
    "+ by using an infimal convolution , the function @xmath92 is convex , and its legendre transform is @xmath217 . + from eq .",
    "( [ lfamulti2 ] ) , @xmath75 is given by the hopf - lax formula : @xmath218 } \\left((t - t ) l\\left(\\frac{s - y}{t - t}\\right ) + k\\min(y,0)^2\\right).\\end{aligned}\\ ] ]    equivalently , by infimal convolution , we have : @xmath219    this is the first result of the theorem .",
    "+ furthermore , we know that @xmath75 is the unique weak semi - concave solution of the following hamilton - jacobi equation : @xmath108 with terminal condition @xmath109 .",
    "+ this equation is exactly the same as eq .",
    "( [ m1:hjbmultic ] ) , hence the second assertion of the theorem .",
    "+ moreover the optimal control in the modified problem ( [ lfamulti2 ] ) is given by @xmath220 .",
    "therefore , by classical results on infimal convolutions , the optimal controls in the modified problem ( [ lfamulti ] ) are given by : @xmath221    we conclude that the optimal control function in the initial problem is : @xmath222    if @xmath223 , then the supremum in eq .",
    "( [ m1:vcffmulti ] ) is reached at @xmath113 . therefore ,",
    "@xmath114 and @xmath224 .",
    "+ otherwise , the supremum in eq .",
    "( [ m1:vcffmulti ] ) is reached at @xmath115 uniquely characterized by : @xmath116    in particular , @xmath117 and @xmath225 where @xmath85 is characterized by eq .",
    "( [ m1:characmultiy ] ) .",
    "+   +    following the same reasoning as in section 2 , we approximate the optimal bids @xmath226 at time @xmath11 by using the optimal bids in the fluid - limit approximation and in the limit case @xmath227 . in other words , we approximate the optimal bids @xmath226 at time @xmath11 by @xmath228 , where the functions @xmath229 are defined by : +    * if @xmath230 , then : @xmath231 * if @xmath194 , then : @xmath232    this approximation of the optimal bidding strategy deserves several remarks .",
    "+ first , the analysis for the case @xmath233 is the same as in the one - source case . the value @xmath234 represents the expected amount that will be spent between time @xmath11 and time @xmath52 if the ad trader wins all the auctions he participates in .",
    "therefore , it is natural to send a very high bid to be sure to win all the auctions if the amount to spend @xmath131 is greater than that value .",
    "+ second , if @xmath235 , then we see from eq .",
    "( [ multichar ] ) that the bids differ from one source to the other according to the weights",
    "@xmath236 : @xmath237 in particular , the bids should be the same across sources at a given point in time if one is only interested in the total number of impressions , _",
    "i.e. _ if @xmath238 .",
    "+ in the case @xmath235 , it is also interesting to notice that eq .",
    "( [ multichar ] ) implies that    @xmath239 , \\quad \\sum_{j=1}^j\\lambda^j ( t - t ) \\int_0^{\\tilde{b}^{j*}_\\infty(t , s_{t- } ) } pf^j(p ) dp = s_{t-}.\\ ] ]    if we use the above approximation of the optimal bidding strategy , the dynamics of the remaining cash is ( for @xmath134 ) :    @xmath240    therefore :    @xmath136 = - \\mathbb{e}\\left[\\sum_{j=1}^j \\lambda^j \\int_0^{\\tilde{b}^{j*}_\\infty(s , s_{s- } ) } p f^j(p ) dp ds \\right ] = - \\frac{\\mathbb{e}[s_{s}]}{t - s } ds.\\ ] ]    this gives @xmath137 = s \\frac{t - s}{t - t}$ ] . as in the one - source case ,",
    "the approximation of the optimal bidding strategy is such that , on average , the remaining cash is spent evenly across @xmath36 $ ] .",
    "so far , we have only considered problems where the kpi maximized by the ad trader was linked to the number of impressions he purchases .",
    "practitioners are interested in other kpis than the number of impressions ( related to the cpm ) . in particular , the number of clicks , or the number of acquisitions of a product ( following a click on a banner ) are very important indicators of the success of a campaign  the kpis used in practice are the cpc and the cpa .",
    "+ in what follows , we consider a model where two variables are optimized upon : the number of impressions , and the number of conversions ( which can be regarded as clicks or acquisitions , depending on the considered applications ) .",
    "in fact , we generalize the previous model by considering more general marked poisson processes , where the marks are not limited to the prices to beat , but also model the occurrence of a conversion with a random variable following a bernoulli distribution ( the parameter of this bernoulli distribution is known as the _ conversion rate _ ,",
    "_ i.e. _ the probability to turn an impression into a conversion ) .",
    "+      as above , we still consider an ad trader who wishes to spend a given amount of money @xmath4 over a time window @xmath5 $ ] .",
    "+    _ auctions : _ + this ad trader is connected to @xmath150 sources from which he receives requests to participate in auctions in order to purchase inventory  we assume that the trader knows from which source each auction request arises .",
    "requests are modeled with @xmath151 marked poisson processes : the arrival of requests from the source @xmath152 is triggered by the jumps of the poisson process @xmath153 with intensity @xmath154 , and the marks @xmath155 and @xmath241 correspond , for each auction request sent by the source @xmath156 , respectively to the highest bid sent by the other participants , and to the occurrence of a conversion  @xmath242 only makes sense if the auction is won by the ad trader . +",
    "every time he receives from the source @xmath156 a request to participate in an auction , the ad trader can bid a price : at time @xmath11 , if he receives a request from the source @xmath156 , then we denote his bid by @xmath157 . as in the above model",
    ", we assume that for each @xmath152 , the process @xmath158 is a predictable process with values in @xmath16 .",
    "+ if at time @xmath11 the @xmath2 auction associated with the source @xmath156 occurs , the outcome of this auction is the following :    * if @xmath159 , then the ad trader wins the auction : he pays the price @xmath160 and his banner is displayed .",
    "moreover , a conversion occurs if and only if @xmath243 .",
    "* if @xmath161 , then another trader wins the auction .    as above",
    ", we assume that for each @xmath152 , @xmath155 are _ i.i.d . _ random variables distributed according to an absolutely continuous distribution .",
    "we denote by @xmath162 the cumulative distribution function and by @xmath163 the probability density function associated with the source @xmath156 . as above , we assume , for each @xmath152 , that :    * @xmath22 , @xmath164 is almost surely positive .",
    "in particular , @xmath165 .",
    "* @xmath166 . * @xmath167 .",
    "+    we also assume that the random variables @xmath168 are all independent . +",
    "as far as the variables @xmath244 are concerned , we assume that they are all independent and independent from the variables @xmath168 . moreover , we assume that for each @xmath152 , @xmath241 are _ i.i.d . _",
    "random variables distributed according to a bernoulli distribution with parameter @xmath245 $ ] .",
    "+ _ remaining cash process : _ + as above , we denote by @xmath26 the process modeling the amount of cash to be spent .",
    "its dynamics is :    @xmath169    _ inventory processes : _ + for each @xmath152 ,",
    "the number of impressions associated with the auction requests coming for the source @xmath156 is modeled by an inventory process @xmath170 . for each @xmath152 ,",
    "the dynamics of @xmath170 is : @xmath246    _ processes for the number of conversions : _ + for each @xmath152 , the number of conversions associated with the auction requests coming for the source @xmath156 is modeled by a new process @xmath247 . for each @xmath152 ,",
    "the dynamics of @xmath247 is : @xmath248    _ stochastic optimal control problem : _",
    "+ in this second extension of the model , the trader aims at maximizing the expected value of an indicator of the form @xmath249    the relaxed problem we consider is : @xmath250.\\ ] ]      the value function associated with this problem is : @xmath252\\times \\mathbb{n}^j\\times \\mathbb{n}^j\\times ( -\\infty , \\bar{s}]\\]]@xmath253,\\ ] ] where @xmath179 @xmath254 and @xmath255    in particular , there are @xmath151 new state variables corresponding to the number of conversions associated with each of the @xmath151 sources .",
    "+ the associated hamilton - jacobi - bellman equation is :    @xmath256    @xmath257 dp = 0,\\ ] ]    with terminal condition @xmath258    eq . ( [ m1:hjbconv ] ) is a non - standard integro - differential hjb equation in dimension @xmath251 which generalizes eq .",
    "( [ m1:hjbmulti ] ) . in this extension , we consider an ansatz of the form @xmath259    with this ansatz , eq .",
    "( [ m1:hjbconv ] ) becomes another hjb equation , but in dimension @xmath149 , which generalizes eq .",
    "( [ m1:hjbmulti2 ] ) to the case where conversions are taken into account : @xmath260 with terminal condition @xmath44 .",
    "( [ m1:hjbconv2 ] ) is the same as eq .",
    "( [ m1:hjbmulti2 ] ) , except that @xmath261 is replaced by @xmath262 .",
    "in particular we can use similar rules as in the previous extension to approximate the optimal bidding strategy .",
    "+ we introduce the function @xmath104 defined by :    @xmath263    in the case of conversions , we approximate the optimal bids @xmath226 at time @xmath11 by @xmath228 , where the functions @xmath229 are defined by : +    * if @xmath230 , then : @xmath231 * if @xmath194 , then : @xmath264    as in the previous extension of the model , if @xmath233 , then it is natural to send a very high bid to be sure to win all the auctions .",
    "+ if @xmath235 , then the bids differ from one source to the other according to the following rule : @xmath265 in particular , if the ad trader only cares about the total number of conversions , _",
    "i.e. _ if @xmath266 and @xmath267 , then the bids are the same across sources , up to a multiplicative factor which corresponds to the probability of conversion associated with each source .",
    "+ finally , in this extension as in the previous one , if one uses the fluid - limit approximation , then , the budget is expected to be spent evenly .",
    "we have presented a first model in section 2 and two extensions of that first model earlier in this section . in the following paragraphs",
    ", we aim at challenging the assumptions underlying these models .",
    "in particular , we discuss the specificities associated with second - price auctions , and the existence of floor prices , which goes against the assumptions on the distribution of the price to beat in the models presented above .",
    "we also discuss nonlinear kpis for which there is no dimensionality reduction .      in both the initial model of section 2 and the two extensions presented in this section",
    ", we considered vickrey auctions .",
    "in other words , the price paid by the ad trader when he wins the auction is not the price he has bid ( the first price ) , but a lower price corresponding to the highest bid that has been proposed by other participants ( the second price ) . in the case of first - price auctions , the dynamics of the remaining budget ( in the single - source model of section 2 ) is not anymore given by eq .",
    "( [ dyns ] ) , but instead by : @xmath268    if we consider the same objective function as in section 2 , then the new value function @xmath34\\times \\mathbb{n}\\times ( -\\infty , \\bar{s } ] \\mapsto   \\inf_{(b_s)_{s\\ge t } \\in \\mathcal{a}_{t } } \\mathbb e\\left[-i^{b , t , i}_t + k \\min\\left(s^{b , t , s}_t,0\\right)^2\\right],\\ ] ] where @xmath269 and @xmath270 is associated with the following hjb equation : @xmath271 with terminal condition @xmath40 . + with the ansatz @xmath42 , this equation becomes : @xmath272 with terminal condition @xmath44 .",
    "( [ m1:hjb2first ] ) replaces eq .",
    "( [ m1:hjb2 ] ) .",
    "in particular , the first order condition is not anymore @xmath273 but instead @xmath274    in particular , because @xmath63 is nonincreasing with respect to @xmath48 , the optimal bid should always be lower in the case of first - price auctions than in the case of second - price auctions . + it is also noteworthy that a fluid - limit approximation can be considered in the case of eq .",
    "( [ m1:hjb2first ] ) by solving    @xmath275    with terminal condition @xmath276 . + in particular ,",
    "( [ m1:hjb2firsttilde ] ) is a first - order hamilton - jacobi equation , and by using the same techniques as in the case of second - price auctions , one also finds that the optimal strategy consists of spending the remaining budget evenly .",
    "+      in order to improve performances , publishers can set floor prices which sometimes modify the underlying nature of the auction .",
    "floor prices come indeed in two flavors :    * hard floors ( or reserve prices ) : the bid of the ad trader is only taken into account if it is higher than the floor price level @xmath277 set by the publisher ( the supply side ) .",
    "when a hard floor level @xmath277 is set , everything works as if a `` ghost player '' was always bidding  @xmath277 .",
    "in particular , the cumulative distribution function @xmath20 may be discontinuous , with a jump at price @xmath277 .. ] * soft floors : if the best bid is below the soft floor level @xmath277 , then the winner pays its own bid , and not the second price ; otherwise , the price paid is the maximum between the second price and @xmath277 . in other words ,",
    "the auction is no more of the vickrey type : it is a second - price auction with a hard floor for large bids and it becomes a first - price auction for small bids .",
    "+    our model can be generalized to tackle the case of hard floors by generalizing our approach to the case of a discontinuous cumulative distribution function @xmath20  in that case @xmath21 can be regarded as a distribution .",
    "the result is still that the budget should be spent evenly , but the optimal bidding strategy is more cumbersome to write  and the exact expression has no theoretical interest .",
    "the case of soft floors can also be addressed , but it is really cumbersome . in particular , in the case of a uniform soft floor @xmath277 for all the auctions , eq .",
    "( [ m1:hjb2 ] ) is replaced by an equation of the form    @xmath278 } f(b ) ( v(t , s - b ) - v(t , s)-1),\\right.\\ ] ] @xmath279 with terminal condition @xmath44 .",
    "+ in practice , it is also noteworthy that our bid may impact the strategic behavior of other users and in particular the behavior of the publishers who may set _ dynamic floor prices_. from a modeling point of view , it means that the function @xmath21 is impacted by the strategy itself , and it opens a vast field where ( mean - field ) game theory could be very useful .",
    "it is customary in the advertising industry to work with different metrics or kpis .",
    "practitioners usually aim indeed at minimizing the cpm , the cpc ( cost per click ) or the cpa ( cost per acquisition ) .",
    "+ with the notations of our model , the cpm at time @xmath52 is naturally defined by : @xmath280 if the total spending is imposed to be @xmath4 , minimizing the expected value of @xmath281 boils down to minimizing @xmath282 $ ] , and not maximizing @xmath283 $ ]  or , equivalently , minimizing @xmath284 $ ] , as in the model of section 2 . + it is noteworthy that our model somehow ignores the risk - aversion effect induced by the nonlinearity of traditional kpis , but this is only a side - effect of convexity , as nonlinear kpis have not been built to capture any form of risk aversion . in fact , the real issue is that the change of variables ( from @xmath285 to @xmath63 ) at the heart of the dimensionality reduction used in our model does not extend to nonlinear kpis .",
    "nevertheless , from a mathematical perspective , our approach based on the dynamic programming principle ( and hjb equations ) remains valid for any kpi .. ] + the above analysis for the cpm is also valid in the case of the cpc and the cpa . in the extension of the model involving conversions  which may be regarded as clicks or acquisitions  we considered a linear function of the number of conversions @xmath286 , whereas practitioners would rather consider nonlinear kpis related to the average amount paid to obtain the different types of conversion .",
    "+ overall , we think that linear kpis are as relevant as the traditional nonlinear ones currently used by marketers ( when the total budget is fixed ) , and that linear kpis should be preferred , from a mathematical perspective , for solving the problems faced by ad trading desks .",
    "in this research paper , we have addressed several problems faced by media trading desks buying ad inventory through real - time auctions .",
    "these problems are new for the community of applied mathematicians , as the industry of programmatic advertising is itself quite recent .",
    "however , many ideas coming from the works of applied mathematicians on algorithmic trading in quantitative finance are inspiring for developing new models and subsequently lighting the way to innovation in a new and fast - growing field which is in demand for mathematical methods ( as finance was 25 years ago ) .",
    "+ our contribution is multifold .",
    "first of all , from a modeling perspective , we model auctions arriving at random times by marked poisson processes , where the jumps of the poisson processes stand for the occurrence of auction requests and the marks for several variables such as the best bid proposed by other participants , and the occurrence of a conversion .",
    "this approach makes it possible to use the dynamic programming principle and derive a simple characterization of the optimal bidding strategy  through a hamilton - jacobi - bellman equation .",
    "furthermore , it allows to consider multiple sources and types of inventory in a very simple way .",
    "+ secondly , by considering linear objective criterions ( or kpis ) , we manage to reduce the dimensionality of the problem . in particular ,",
    "whatever the initial number of inventory sources and types , and whether or not we consider conversions , we show that the problem always boils down to solving a hamilton - jacobi - bellman pde in dimension 2 ( one time dimension and one spatial dimension ) .",
    "+ thirdly , by considering a fluid - limit approximation of the problem , we obtain almost - closed - form solutions for the optimal bidding strategy .",
    "moreover , the results in the fluid - limit approximation allow to characterize the optimal strategy not only in terms of the optimal bids , but in terms of an optimal scheduling for the budget that remains to be spent .",
    "the latter simplifies the implementation , as the optimal bidding strategy can be dynamically approximated by a feedback - control tracking mechanism .",
    "+ eventually , the modeling approach we have proposed in this article opens the door to future research where the optimal control of the bidding strategy is coupled with on - line learning ( treated in a companion article ",
    "see @xcite ) , where the different participants in the auctions  including the publisher  could adopt strategic behaviors , where the information about the outcomes of auctions is subject to an important latency , etc .",
    "in this appendix , we present a simplified and discrete - time version of the model introduced in section 2 for providing the readers  especially those who are not used with continuous - time models  with intuition about the optimization approach used throughout the paper . + let us introduce a probability space @xmath6 equipped with a discrete filtration @xmath287 satisfying the usual conditions .",
    "the variables we define in this subsection are considered over this filtered probability space .",
    "+ let us consider a bidding system participating in a sequence of @xmath288 vickrey auctions .",
    "we assume that the state of the system is described by three variables : ( i ) the number @xmath289 of auction requests received by the ad trading desk , ( ii ) the number @xmath290 of impressions purchased after the @xmath2 auction ( we assume that @xmath291 ) , and ( iii ) the remaining budget @xmath292 after the @xmath2 auction  we assume that @xmath293 is the maximal total amount to be spent .",
    "the goal of the algorithm is to maximize an objective function of the form @xmath294 $ ] , for some function @xmath295 .",
    "in particular , @xmath296 can be equal to @xmath297 if we want to maximize the number of impressions .",
    "+ for each auction request , the algorithm chooses a bid level . for the @xmath2 auction , we denote here by @xmath298 the bid sent to the auction server ( @xmath298 has to be @xmath299-measurable ) .",
    "when the @xmath2 auction occurs , a random variable @xmath3 is drawn with the probability density function @xmath21 .",
    "this random variable represents the price to beat .",
    "+ the resulting dynamics of the system is the following :    * if @xmath300 , then the algorithm wins the auction , the price paid is @xmath3 , and the system evolves from the state @xmath301 to the state @xmath302 . *",
    "if @xmath303 , then the algorithm does not win the auction and the system evolves from the state @xmath301 to the state @xmath304 .",
    "let us define the _ value function _ : @xmath305,\\ ] ] where @xmath306 if and only if @xmath307 is a predictable process such that @xmath308 , almost surely . + in order to solve this optimization problem , we simply use the dynamic programming principle which yields the following bellman equation : @xmath309}\\mathbb{e}\\left[u(n , i+1,s - p_n)\\mathbf{1}_{b_n > p_n } + u(n , i , s)\\mathbf{1}_{b_n\\leq p_n}\\right ] .",
    "\\qquad \\text{(a.1)}\\ ] ]    eq .",
    "( a.1 ) can also be written as the following difference equation @xmath310}\\mathbb{e}\\left[(u(n , i+1,s - p_n ) - u(n , i , s))\\mathbf{1}_{b_n > p_n}\\right ] = 0,\\ ] ] _ i.e. _ : @xmath311}\\int_0^{b_n}(u(n , i+1,s - p ) - u(n , i , s ) )",
    "f(p ) dp = 0 .",
    "\\qquad \\text{(a.2)}\\ ] ]    from the terminal condition @xmath312 , the value function @xmath285 can easily be approximated numerically by backward induction on a grid .",
    "+ the optimal bid for the @xmath2 auction is given by the optimality condition @xmath313 or by @xmath314 if @xmath315 .",
    "in particular , when the constraint is not binding , the optimal bid is consistent with the fact that , in the case of vickrey auctions , participants have the incentive to bid their true valuation for the item .",
    "+ it is noteworthy that a similar change of variables as in the continuous - time model of section 2 can be used in the special case where @xmath316 . in that case , if we write @xmath317 , then the bellman equation ( a.2 ) can be simplified into : @xmath318}\\int_0^{b_n}(v(n , s - p ) - v(n , s ) + 1 ) f(p ) dp = 0,\\ ] ] and the terminal condition is @xmath319 .",
    "+ this model in discrete - time is useful to understand the general modeling framework we use , but it is limited .",
    "first , in practice , auctions arrive at random times and we do not know in advance how many auction requests the algorithm will receive",
    ". moreover , for problems where different sources of auction requests have to be treated in parallel , the above discrete modeling approach is not convenient .",
    "continuous - time models , where the ( random ) occurrence of auction requests are modeled by the jumps of a poisson process , are definitely more realistic and flexible .",
    "+    10 amin , k. , kearns , m. , key , p. , & schwaighofer , a. ( 2012 ) . budget optimization for sponsored search : censored learning in mdps .",
    "arxiv preprint arxiv:1210.4847 .",
    "avellaneda , m. , & stoikov , s. ( 2008 ) .",
    "high - frequency trading in a limit order book .",
    "quantitative finance , 8(3 ) , 217 - 224 .",
    "balseiro , s. , & candogan , o. ( 2015 ) .",
    "optimal contracts for intermediaries in online advertising .",
    "available at ssrn 2546609 .",
    "balseiro , s. r. , feldman , j. , mirrokni , v. , & muthukrishnan , s. ( 2014 ) .",
    "yield optimization of display advertising with ad exchange .",
    "management science , 60(12 ) , 2886 - 2907 .",
    "barles , g. , & imbert , c. ( 2008 ) .",
    "second - order elliptic integro - differential equations : viscosity solutions theory revisited . in annales",
    "de lihp analyse non linaire , 25(3 ) , 567 - 585 .",
    "cannarsa , p. , & sinestrari , c. ( 2004 ) .",
    "semiconcave functions , hamilton - jacobi equations , and optimal control ( vol .",
    "springer science & business media .",
    "engelbrecht - wiggans , r. ( 1993 ) .",
    "optimal auctions revisited .",
    "games and economic behavior , 5(2 ) , 227 - 239 .",
    "evans , l. c. ( 1999 ) . partial differential equations .",
    "american mathematical society fernandez - tapia , j. ( 2016 ) .",
    "statistical modeling of vickrey auctions and applications to automated bidding strategies .",
    "optimization letters .",
    "fernandez - tapia , j. ( 2015 ) .",
    "an analytical solution to the budget - pacing problem in programmatic advertising . technical report .",
    "fernandez - tapia , j. , guant , o. , & lasry , j. m. ( 2016 ) . on the pricing of performance - based programmatic ad buying contracts",
    ". working paper .",
    "fernandez - tapia , j. , guant , o. , & lasry , j. m. ( 2016 ) .",
    "real - time bidding strategies with on - line learning . working paper .",
    "guant , o. , lehalle , c. a. , & fernandez - tapia , j. ( 2013 ) .",
    "dealing with the inventory risk : a solution to the market making problem .",
    "mathematics and financial economics , 7(4 ) , 477 - 507 .",
    "guant , o. , lehalle , c. a. , & fernandez - tapia , j. ( 2012 )",
    ". optimal portfolio liquidation with limit orders .",
    "siam journal on financial mathematics , 3(1 ) , 740 - 764 .",
    "iab europe ( 2015 ) , european programmatic market sizing 2014 karlsson , n. , & zhang , j. ( 2013 , june ) .",
    "applications of feedback control in online advertising . in american control conference ( acc ) , 2013 ( pp .",
    "6008 - 6013 ) .",
    "laffont , j. j. , & maskin , e. ( 1980 ) .",
    "optimal reservation price in the vickrey auction .",
    "economics letters , 6(4 ) , 309 - 313 .",
    "lamberton , d. , pags , g. , & tarrs , p. ( 2004 ) . when can the two - armed bandit algorithm be trusted ? .",
    "annals of applied probability , 1424 - 1454 .",
    "lamberton , d. , & pags , g. ( 2008 ) . how fast is the bandit ? .",
    "stochastic analysis and applications , 26(3 ) , 603 - 623 .",
    "lamberton , d. , & pags , g. ( 2008 ) . a penalized bandit algorithm .",
    "j. probab , 13 , 341 - 373 .",
    "lee , k. c. , jalali , a. , & dasdan , a. ( 2013 , august ) .",
    "real time bid optimization with smooth budget delivery in online advertising . in proceedings of the seventh international workshop on data mining for online advertising ( p. 1 ) .",
    "stavrogiannis , l. c. ( 2014 ) .",
    "competition between demand - side intermediaries in ad exchanges ( doctoral dissertation , university of southampton ) .",
    "vickrey , w. ( 1961 ) .",
    "counterspeculation , auctions , and competitive sealed tenders .",
    "the journal of finance , 16(1 ) , 8 - 37 .",
    "yuan , s. ( 2015 ) .",
    "supply side optimisation in online display advertising ( doctoral dissertation , ucl ( university college london ) ) .",
    "yuan , s. , & wang , j. ( 2012 , october ) .",
    "sequential selection of correlated ads by pomdps . in proceedings of the 21st acm international conference on information and knowledge management ( pp .",
    "515 - 524 ) .",
    "zhang , w. , yuan , s. , & wang , j. ( 2014 , august ) .",
    "optimal real - time bidding for display advertising . in proceedings of the 20th acm sigkdd international conference on knowledge discovery and data mining ( pp .",
    "1077 - 1086 ) .",
    "zhang , w. , rong , y. , wang , j. , zhu , t. & wang , x. ( 2016 ) .",
    "feedback control of real - time display advertising .",
    "working paper ."
  ],
  "abstract_text": [
    "<S> the ad - trading desks of media - buying agencies are increasingly relying on complex algorithms for purchasing advertising inventory . </S>",
    "<S> in particular , real - time bidding ( rtb ) algorithms respond to many auctions  usually vickrey auctions  throughout the day for buying ad - inventory with the aim of maximizing one or several key performance indicators ( kpi ) . </S>",
    "<S> the optimization problems faced by companies building bidding strategies are new and interesting for the community of applied mathematicians . in this article </S>",
    "<S> , we introduce a stochastic optimal control model that addresses the question of the optimal bidding strategy in various realistic contexts : the maximization of the inventory bought with a given amount of cash in the framework of audience strategies , the maximization of the number of conversions / acquisitions with a given amount of cash , etc . in our model , </S>",
    "<S> the sequence of auctions is modeled by a poisson process and the _ price to beat _ for each auction is modeled by a random variable following almost any probability distribution . </S>",
    "<S> we show that the optimal bids are characterized by a hamilton - jacobi - bellman equation , and that almost - closed - form solutions can be found by using a fluid limit . </S>",
    "<S> numerical examples are also provided .    </S>",
    "<S> * keywords : * real - time bidding , vickrey auctions , stochastic optimal control , convex analysis , fluid limit approximation . </S>"
  ]
}