{
  "article_text": [
    "originally , the three gap theorem was the conjecture of h. steinhaus . subsequently , several proofs were proposed by @xcite @xcite @xcite @xcite @xcite @xcite @xcite .",
    "the proof proposed in this paper is a presentation of the proof completely fomalized in the coq proof asssistance system @xcite .",
    "this formal proof is based on tony van ravenstein s @xcite .",
    "this kind of demostration , which involves geometrical intuition , is a real challenge for proof assistance systems .",
    "that is what motivated our work .",
    "therefore , the interest of such an approach is to understand , by means of an example , if the coq system allows us to prove a theorem coming from pure mathematics .",
    "+ in addition , this development allowed us to clarify some points of the proof and has led to a more detailed proof .",
    "first , we will define the notations and definitions used for stating and proving this theorem.the second part deals with different states of the theorem and with the proof itself .",
    "finally , the last part presents advantages of the formal proof stating the main differences between our proof and tony van ravenstein s proof .",
    "we can refer to figure [ cercle ] .",
    "* @xmath2 is the natural numbers set .",
    "* @xmath3 is the real numbers set . *",
    "the integer part of a real number r is noted @xmath4 . * the fractional part of a real number @xmath5 , ie @xmath6 ,",
    "is written @xmath7 . *",
    "the first point on the circle is the point @xmath8 . *",
    "unless explicitly mentioned , we consider @xmath0 points distributed around the circle . these are numbered from @xmath8 to @xmath9 .",
    "* we consider the circle of * unit circumference * and with a clockwise orientation .",
    "* @xmath1 is counted in turns of the circle ( and not in radian ) ; then @xmath10 . * the first point ( @xmath11 if @xmath121 ) on the right of @xmath8 is written @xmath13 .",
    "@xmath13 is a function from the natural numbers to the natural numbers . *",
    "the last point ( @xmath140 if @xmath121 ) before @xmath8 is written @xmath15 .",
    "@xmath15 is a function from the natural numbers to the natural numbers .",
    "* @xmath16 is equivalent to @xmath17 .",
    "the distance from point @xmath8 to point n is @xmath18 .      the following definitions are valid for all @xmath1 , rational or irrational .    [ first ]",
    "if @xmath19 then there exists an integer @xmath20 s.t . @xmath21 and @xmath22 if @xmath23 then @xmath24     + by induction on @xmath0 .",
    "+ - @xmath25 : in this case @xmath26 .",
    "+ - suppose the lemma to be holds for @xmath0 : then there exists @xmath20 s.t .",
    "@xmath21 and @xmath22 if @xmath23 then @xmath24 ; + let us show that there exists @xmath27 s.t .",
    "@xmath28 and @xmath22 if @xmath29 then @xmath30 .",
    "+ by cases :    - if @xmath31 then @xmath32 .",
    "- if @xmath33 then @xmath34 .",
    "@xmath35    [ last ] if @xmath19 then there exists an integer @xmath36 s.t .",
    "@xmath37 and @xmath22 if @xmath23 then @xmath38     + symmetrical proof with respect to first .",
    "@xmath35    the successor of a point on the circle ( @xmath39 ) verifies the following property :    [ points ] @xmath40 if @xmath41 then we have :    1 .",
    "there exists an integer @xmath42 s.t . @xmath43 and @xmath44 and @xmath22 if @xmath45 and if @xmath46 then @xmath47 + or 2 .",
    "@xmath22 if @xmath45 then @xmath48     + by induction on @xmath0 .",
    "+ - @xmath49 : @xmath8 verifies the property .",
    "+ - suppose lemma to holds for @xmath0 and prove it for @xmath50 : the induction hypothesis is the following : + either + 1 . there exists an integer @xmath51 s.t .",
    "@xmath52 and @xmath53 and @xmath22 if @xmath45 and if @xmath46 then @xmath54 + or + 2 .",
    "@xmath22 if @xmath45 then @xmath48 + we prove that : + either    \\1 . there exists an integer @xmath55 s.t .",
    "@xmath56 and @xmath57 and @xmath22 if @xmath58 and if @xmath46 then @xmath59 + or    \\2 .",
    "@xmath22 if @xmath58 then @xmath48 + by cases :    - if @xmath60 we are in case 1 and we continue by cases :    - if @xmath61 then @xmath62 .    - if @xmath63 then @xmath64 .    -",
    "if @xmath65 we are in case 2 and the proof is immediate by induction hypothesis .",
    "@xmath35    [ after ] for all points n on the circle , the point @xmath66 verifies the property of points ( lemma [ points ] ) for @xmath67 and is defined such that : + if we are in case 1 . then @xmath68 + if we are in case 2",
    ". then @xmath69 .",
    "statement in natural language :    [ theorem1 ] let @xmath0 points be placed consecutively around the circle by an angle of @xmath1 . then for all irrational @xmath1 and natural @xmath0 , the points partition the circle into gaps of at most three different lengths .    as shown by theorem [ theorem1 ] the points",
    "are numbered in order of apparition ; now , if we do more than one revolution around the circle , new points appear between the former points .",
    "then , when the last point @xmath70 is placed , it is possible to number them again consecutively and clockwise . in this new numeration ,",
    "we use only the definitions of @xmath71 , @xmath72 and @xmath39 , from lemmas [ first ] and [ last ] , and of the definition [ after ] .",
    "if we set @xmath73@xmath74@xmath73=@xmath75 , then the distance of a point @xmath76 from its successor @xmath66 is given by @xmath73@xmath77@xmath73 . in order to show that this function can have at most three values",
    ", we show that the function @xmath78 can itself have at most three values .",
    "+ so , proving theorem [ theorem1 ] comes to the same thing as showing the following mathematical formulation , which we will prove in the next paragraph .",
    "[ letheoreme ] @xmath79     +    1 .",
    "this transcription means that the circle of @xmath0 points is divided into + @xmath80 gaps of length @xmath73@xmath81 , + @xmath82 gaps of length @xmath73@xmath83 and + @xmath84 gaps of length @xmath73@xmath81+@xmath73@xmath83 .",
    "2 .   theorem [ letheoreme ] is true for @xmath1 rational and irrational . here",
    ", however , we present only the proof for @xmath1 irrational .",
    "indeed , most of the intermediate results are false for @xmath1 rational ( among other reasons because @xmath71 , @xmath72 and @xmath39 are no longer functions ) .",
    "moreover , the theorem is trivially true for @xmath1 rational : if @xmath85 then the circle may include one or two lengths of gap - depending on whether @xmath86 or @xmath87 .",
    "we recall that the proof is detailed for @xmath1 irrational and @xmath19 .",
    "+    [ inter1 ] if @xmath88 @xmath89     +    1 .",
    "case @xmath90 : + for @xmath91 , by definition of first we have @xmath92 .",
    "+   + we want to prove that @xmath93 is the successor of @xmath94 .",
    "+ let us first show that @xmath93 belongs to the circle of @xmath0 points : if @xmath95 then + @xmath96 .",
    "+   + now , let us show that : if @xmath97 is any point of the circle ( @xmath98 ) then we have either @xmath99 or @xmath100",
    ". + by reductio ad absurdum and by cases : + let us suppose that @xmath101 + * if @xmath102 then @xmath103 therefore + @xmath104 which contradicts the definition of first , since @xmath105circle because @xmath106 . + * if @xmath107 then @xmath108 therefore @xmath109 which contradicts the definition of first(n ) , since @xmath110circle because @xmath111 .",
    "+ + in these two former cases @xmath112 if @xmath113 .",
    "+ let us show this by reductio ad absurdum : + if @xmath114 then + @xmath115 + therefore by definition of @xmath71 @xmath116 which is absurd because @xmath117 for @xmath19 . + 2 .",
    "case @xmath118 : + for @xmath119 , by definition of @xmath72 we have @xmath120 .",
    "+   + we want to prove that @xmath121 is the successor of @xmath94 .",
    "+ let us first show that @xmath121 belongs to the circle of @xmath0 points : if @xmath122 then + @xmath123 because @xmath124 . +   + now , let us show that : if @xmath97 any point of the circle ( @xmath98 ) then we have either @xmath99 or @xmath125 .",
    "+ by reductio ad absurdum and by cases : + let us suppose that @xmath126 + * if @xmath127 then @xmath128 therefore @xmath129 which contradicts the definition of last , since @xmath130circle because @xmath131 . +",
    "* if @xmath132 then + @xmath133 + therefore @xmath134 + which contradicts the definition of last , since @xmath135circle because @xmath136 .",
    "+ + in these two former cases @xmath137 if @xmath138 . +",
    "as @xmath1 is irrationnal and by definition of @xmath72 we have @xmath139 therefore @xmath140 and we have effectively @xmath141 , since @xmath142 .",
    "[ irrat ] the fact of @xmath1 is irrational is essential for showing that @xmath143 . indeed , as in this case we have @xmath144 therefore @xmath143 .",
    "let us show this by contradiction .",
    "+ in order to do so , let us suppose @xmath145 . +",
    "then @xmath146 therefore @xmath147 and as only an integer number has a fractional part equal to zero we have @xmath148 , @xmath149 from which we conclude that @xmath150 which contradicts @xmath1 irrationnal .",
    "@xmath35    let us prove now the general case .",
    "+ let us set for the rest of the proof @xmath151 .",
    "[ lenm ] @xmath152 .",
    "+ by reductio ad absurdum .",
    "we suppose @xmath153 and we show that , in this case , the point @xmath154 is situated either before @xmath71 , or after @xmath72 , which contradicts their definition .",
    "+ let us show , therefore , that either @xmath155 or @xmath156 : + let us consider the following cases :    1",
    ".   @xmath157 : + since for @xmath19 @xmath117 we can write that + @xmath158 thus that + @xmath156 .",
    "@xmath159 : + in the same way we can write , using the fact that @xmath160 , that @xmath161 thus that + @xmath155 .    @xmath35    [ firstnm ] @xmath162 .",
    "+ by definition of @xmath71 , we know that for all @xmath163 and @xmath164 s.t .",
    "@xmath165 we have that if @xmath166 then @xmath167 .",
    "+ let us take @xmath168 and @xmath167 and then we have for all @xmath164 s.t . @xmath169 if @xmath170 then @xmath171",
    "+ now , it is sufficient to show that @xmath170 @xmath172 , @xmath169 : + for @xmath173 it is the definition of @xmath71 ( lemma [ first ] ) . + for @xmath174 by the reductio ad absurdum : let us suppose that @xmath175 + as @xmath176 we have immediately that + @xmath177 and @xmath178 + and by definition of @xmath71 and @xmath72 that @xmath179 and @xmath180 .",
    "+ therefore we have , owing to the hypothesis of contradiction and to lemmas [ first ] and [ last ] that : + @xmath181 and + @xmath182 which implies that + @xmath183 thus that + @xmath184 .",
    "but , as shown in remark [ irrat ] this equality compels @xmath1 to be rational if @xmath185 which is the case .",
    "@xmath35    [ lastnm ] @xmath186 .     + symmetrical proof with the previous .",
    "@xmath35    [ afternm ] for all @xmath76 s.t .",
    "@xmath187 and @xmath188 we have @xmath189 .     + we proceed by cases :    1 .",
    "case @xmath187 : + using the irrationality of @xmath1 ( counterpart of remark [ irrat ] ) we have that to prove this lemma is equivalent to @xmath190 which is also equivalent to + @xmath191 and @xmath192 . + let us proceed by cases and by reductio ad absurdum : * case @xmath191 : + let us suppose that @xmath193 .",
    "+ according to lemma [ points ] , we show immediately the following property : + @xmath194 , if @xmath195 and if @xmath196 then @xmath197 .",
    "let us use this property with + @xmath198 .",
    "we directly get the contradiction on condition that : * * @xmath16 i.e. @xmath199 ; true by case 1 . * * @xmath200 i.e. @xmath201",
    "true using lemma [ inter1 ] .",
    "* * @xmath202 by definition of after ( lemma [ points ] and definition [ after ] ) + lemma [ inter1 ] ( in order to show that @xmath203 ) . * * @xmath204 true by hypothesis of contradiction .",
    "* case @xmath192 : + let us suppose that @xmath205 .",
    "we use the same property taking @xmath206 and @xmath168 ( except in @xmath207 ) .",
    "case @xmath188 : the proof is done with the same way .",
    "@xmath35    for @xmath76 situated in the third gap , the value of @xmath66 is given from the following lemma :    [ cas3 ] for all @xmath76 , @xmath208 there does not exist @xmath209 s.t .",
    ".     + reduction ad absurdum .",
    "+ let us suppose there exists one @xmath209 s.t .",
    "+ @xmath210 .",
    "+ this @xmath207 verifies one of the three following cases ( total order on the real numbers ) :    1 .",
    "if @xmath211 : + then @xmath212 which contradicts the definition of the function @xmath39 .",
    "2 .   if @xmath213 : + according to lemmas [ inter1 ] and [ firstnm ] @xmath214 .",
    "but , as @xmath1 is irrationnal , we ought to have @xmath215 which contradicts the hypothesises @xmath216 and @xmath217 ( using lemma [ lenm ] ) .",
    "3 .   if @xmath218 : + we use the already seen property @xmath219 , if @xmath220 and if @xmath221 then @xmath222 with @xmath168 , @xmath223 .",
    "+ then we have , using principally lemma [ inter1 ] that + @xmath224 which contradicts the hypothesis .",
    "@xmath35       + let us suppose that the circle includes @xmath225 points . then , we know how to show the theorem ( lemma [ inter1 ] ) .",
    "now , it is sufficient `` to remove '' the @xmath226 points which are too many .    1 .   if @xmath227 then : + according to lemma [ lenm ] we have @xmath228 . using lemmas [ firstnm ] , [ lastnm ] , [ afternm ] and [ inter1 ] we immediately get the result .",
    "2 .   if @xmath208 then : + using lemma [ cas3],we show that the @xmath226 points from @xmath0 do not exist and by definition of @xmath39 ( lemma [ points ] and definition [ after ] ) we get the result .",
    "3 .   if @xmath229 then : + as in case 1 .",
    "the proof given in this paper has been developped from a proof completely formalized in the system coq @xcite .      with a mathematical theorem such as this ,",
    "the interest is twofold : the first consists in indicating the possible limits of the proof assistance system in order to improve it ; second , is the emphasizing the basic mathematical properties or hypotheses used implicitly during the demonstration . +",
    "this proof is based on geometrical intuitions and the demostration of these intuitions often requires , for example , basic notions about the fractional parts .",
    "even so , these notions are neither easy to formalize nor to prove in a system where real numbers are not naturally found , unlike other types which can be easily defined inductively .",
    "so , one challenge was to prove this theorem from a simple axiomatization of the real numbers .",
    "the formulation of real numbers used for this will be discussed further .",
    "moreover , it is interesting to notice that the theorem shown is , in some sence , stronger than that which was stated initially . indeed , not only do we show that there are at most three different lengths of gaps , but we can also give their value and their place on the circle .",
    "this modified statement is due to @xcite .",
    "+ from the proof completely formalized in coq , we can , for instance , compare this informal proof resulting from the formal proof with that of tony van ravenstein .",
    "+      * two possibilities exist to describe the real numbers : we can construct the reals or axiomatize them .",
    "we chose an axiomatical development for reasons of simplicity and rapidity .",
    "we can refer to @xcite and @xcite for constructions from cauchy s sequences or dedekind s cuts .",
    "most properties of the real numbers ( commutative field , order , the archimedian axiom ) are first order properties . on the other hand ,",
    "the completeness property is a second order property , as it requieres to quantify on the sets of real numbers . instead of this axiom",
    ", we can put an infinity of first order axioms , according to which any odd degree has a root in @xmath3 .",
    "hence , we get the `` real closed field '' notion .",
    "we thus chose axiomatization at the _ second order _ based on the fact that @xmath3 is a * commutative ordered archimedian and complete field*. for these notions , we based our work on @xcite and @xcite . * the formal proof showed us that the axiom of completeness of the real numbers was not necessary .",
    "therefore , the statement and the proof of this theorem are true in all the commutative ordered and archimedean fields .",
    "+ archimedes axiom could also be replaced by a weaker axiom making it possible to define only the fractional part .",
    "+ in the same way , e.fried and v.t.sos have given a generalization of this theorem for groups @xcite .",
    "many intermediate lemmas had to be proved .",
    "the formal proof , for instance , made it possible to identify four lemmas concerning the fractional part , which had remained implicit in tony van ravenstein s proof , and are at the heart of the proof .",
    "@xmath1 irrational is hypothesis used by tony van ravenstein , but the formalization shows precisely where this hypothesis is used ( cf remark [ irrat ] )",
    ". in particular , if @xmath1 is rational , the points can be mingled , and @xmath39 , for example , is not then a function .      during tony van ravenstein s informal proof , we see that we can tolerate an inaccuracy in the dependence of @xmath71 , @xmath72 and @xmath39 to @xmath0 or @xmath225 .",
    "although this is not a mistake , the formal proof showed the necessity of proving these lemmas , which are not trivial ( lemmas [ firstnm ] , [ lastnm ] and [ afternm ] ) .",
    "the formal proof makes it possible to say precisely where those lemmas are used .",
    "the formal proof carried out in the system coq - from the axiomatization of real numbers as a commutative , ordered , archimedian and complet field - is a classical proof seeing that an intuitionist reading of the total order involves the decidability of the equality of the real numbers , which obviously , is not the case .",
    "therefore , we can raise the question of the existence of a constructive proof of the three gap theorem .",
    "+ we could probably give an intuitionistic proof for each of the two cases , according to whether @xmath1 is rational or irrational because we know exactly the length of the gaps between two points of the circle .",
    "but , the two cases can not be treated at the same time .",
    "thus in our proof it should be supposed that @xmath1 is rational or not and we do not see , so far how to avoid this distinction . +"
  ],
  "abstract_text": [
    "<S> we deal with the distribution of @xmath0 points placed consecutively around the circle by a fixed angle of @xmath1 . from the proof of tony van ravenstein @xcite </S>",
    "<S> , we propose a detailed proof of the steinhaus conjecture whose result is the following : the @xmath0 points partition the circle into gaps of at most three different lengths . </S>",
    "<S> + we study the mathematical notions required for the proof of this theorem revealed during a formal proof carried out in coq . </S>"
  ]
}