{
  "article_text": [
    "in reference  @xcite we presented a prescription for calculating the efficiency of readout encoding methods for binary strip detector readout , which is arguably the simplest case of interest for particle physics instrumentation . here",
    "we extend the analysis to pixel detectors and also to include charge information rather than binary readout .",
    "both the two - dimensional nature of pixel hit patterns and the addition of charge information introduce significant complexity .",
    "we preserve the same meaning of readout efficiency as the number of bits used in practice to extract all the required information from the detector , relative to the minimum possible number of bits needed given by the information content .",
    "calculating this minimum is the main content of this note .",
    "this does not mean the bits used for a single event or readout cycle , but the average bits per event for a large ensemble of events .",
    "in practice we define efficiency as the minimum possible number over the actual number of bits , so that it has a value between 0 and 1 .",
    "we consider only lossless data compression , as opposed to data reduction in which information is discarded and can not be recovered .",
    "we consider typical pixel detector occupancy below 0.5% , where occupancy always means average occupancy over a fairly long time ( eg . 1 second ) .",
    "the average occupancy is what determines the output data total readout bandwidth requirement , rather than the instantaneous occupancy of a single event .",
    "the actual readout bandwidth required for a given occupancy depends on how much the data can be compressed , and also on the required latency ( how long one is willing to wait for the information ) .",
    "we only consider the compression aspect here ; for a case study that includes latency considerations see ref .",
    "an important practical constraint is that the detector readout will be implemented in units ( such as modules or chips ) .",
    "the information content of the detector is the sum of the information in all the readout units .",
    "we are therefore calculating the entropy for one single readout unit .",
    "if the data from the entire detector could somehow be combined prior to readout , then the entropy may be lower than the plain sum of all readout units .",
    "but we restrict our analysis to assume independent readout units as the case of practical interest .",
    "following ref .",
    "@xcite we decompose the detector output data into the parts shown in fig .  [ fig : parts ] , where we have added cluster shape and charge elements that were not present for binary strip detector readout . a cluster is any combination of hit pixels which are _ touching _ , including corner - to - corner touching .",
    "any two hit pixels that touch belong to the same cluster .",
    "we will only study the bold face parts in this note , since the treatment of context and format elements given in ref .",
    "@xcite remains valid .",
    "we have chosen this decomposition for convenience , but other decompositions are possible .",
    "the desired end result is the minimum number of bits necessary to encode all the information , or information entropy , which is a physical property and should not depend on the representation chosen to calculate it .",
    "however , correlations in real data that are not included in our assumptions will introduce a bias and result in a representation - dependent entropy .",
    "this is discussed further in section  [ sec : assumptions ] .    the decomposition of fig .",
    "[ fig : parts ] has a first order physical interpretation as follows .",
    "the _ addresses _ correspond to the positions of particles crossing a silicon sensor- each particle forming one cluster that is identified by one address ( the cluster address can be defined in several ways , for example as the bottom left corner pixel of the smallest cluster bounding box .",
    "how it is defined is not important to our discussion ) .",
    "if the distribution of particle tracks crossing a sensor is uniform , the cluster address entropy is straightforward to calculate . each cluster has a _ shape _ and _ size _ , which are given by cluster distribution functions which depend on position , orientation , and other features that may or may not vary across a particular detector .",
    "there are nevertheless a finite number of possible shapes and sizes .",
    "finally , there is a _ charge _",
    "distribution in each cluster . in the classical limit charge is an analog quantity and therefore a potential problem for an entropy calculation , which requires a discrete distribution .",
    "however , the practical measurement of charge is limited by noise , and we must therefore consider the entropy of encoding useful charge information , not meaningless noise fluctuations . for this we will further decompose charge into total charge , @xmath0 , and single pixel charge fractions , @xmath1 . to higher order , multiple particles can merge into one cluster , secondary interactions from a single particle can result in multiple clusters , and dead pixels or charge deposits that fluctuate below threshold can lead to split clusters .",
    "so the association of clusters to randomly incident single particles is not perfect , but as we will see at low occupancy such high order corrections have a negligible impact on the entropy .",
    "sections [ sec : address ] , [ sec : shape ] , and [ sec : charge ] evaluate and discuss the address , shape , and charge entropy , respectively .",
    "the total information entropy due to the hits is the sum of these parts , @xmath2 which excludes the context and format contributions as already explained .",
    "this paper calculates an information entropy by making general assumptions about the data from particle physics pixel detectors . for the result to be applicable to a particular pixel detector",
    ", one must first check that the assumptions are valid for the detector in question .",
    "this section discusses how the assumptions may fail and what would be the consequence on the result .",
    "this section refers to material in the sections that follow , but we placed this discussion first , so the reader is aware of the issues and can refer back to this section as needed .",
    "the address entropy calculation ( sec .  [ sec : address ] ) assumes clusters are mainly due to particles that illuminate a readout unit uniformly and randomly .",
    "this may not be the case , for example in collimated particle jets , where the clusters themselves may be `` clustered '' ( spatially correlated ) on the scale of a readout unit .",
    "correlations between cluster positions would reduce the address entropy . for the particular case of a high luminosity proton collider with many interactions per beam bunch",
    "crossing ( pile - up ) , the vast majority of clusters will come from pile - up interactions , with high energy collimated jets being rare . therefore , we expect that the uniform , random assumption will hold .",
    "note that what matters for entropy is the vast majority , not the rare exceptions .",
    "[ sec : address ] also assumes that most clusters are produced by one single particle , with merging of energy deposits from two or more particles being rare .",
    "this of course depends on the track density and the detector design . a low granularity detector in high track density , or used for collimated beams or jets ( eg . a calorimeter ) may have most clusters encompass multiple particles .",
    "thus our assumption is appropriate for tracking detectors , which , in order to be useful , must be designed with high enough granularity for the assumption to hold .",
    "the separate calculations of sections [ sec : address ] , [ sec : shape ] , and [ sec : charge ] assume that the entropy can be decomposed exactly into the parts shown in fig .",
    "[ fig : parts ] .",
    "that is , we have not considered any correlation between cluster positions , cluster charge , pixel charge fraction , and cluster shape .",
    "but such correlations do exist at some level and will result in a reduction of entropy . consider a flat ( not curved ) detector element illuminated by a point source of particles .",
    "each cluster position in the detector will be associated with a different particle incidence angle , and therefore a different cluster shape and charge .",
    "we have ignored such correlations within a readout unit , assuming that a readout unit is small , so that even for a point source there would be little variation .",
    "furthermore , if the beam spot is not a point source , but in fact physically larger than the readout unit , any correlation between position and incidence angle will be washed out ( recall that our calculation is for one readout unit , so only correlations within a readout unit matter . )    in sec .",
    "[ sec : charge ] we have ignored correlation between cluster charge and pixel charge fractions . when the charge of an n - pixel cluster takes on it smallest ( biggest ) possible value , then the pixel charge fractions are given : they must all be equal and given by the pixel threshold ( maximum ) . as cluster charge increases ( decreases ) , more and more pixel fraction combinations become possible , and correlation disappears .",
    "this type of correlation lowers the entropy .",
    "the above discussion concerns assumptions that omit correlations thought to be small for tracking detectors in high intensity colliders .",
    "as discussed , the effect of these correlations will be to lower the entropy .",
    "therefore , to the extent that the assumptions are violated , the minimum number of bits calculated in this paper can be seen as an upper limit to the true minimum number of bits .",
    "other assumptions may instead increase the entropy if violated .",
    "[ sec : shape ] and  [ sec : charge ] assume a detector is exposed to a single dominant source of particles ( originating form a single interaction region and containing a mix of particles with a peaked ionization distribution , such as for minimum ionizing particles ) . if a detector is instead exposed to multiple , comparable intensity sources at the same time , that would complicate the estimate and result in higher entropy ( weak secondary sources will not matter , as the entropy is determined by the bulk of the data , not by rare events ) .",
    "in the limiting case of individual pixels rather than clusters , the address entropy is given simply by the logarithm of the number of ways to pick @xmath3 out of @xmath4 pixels , where @xmath5 is the occupancy and @xmath4 is the number of pixels in the chip .",
    "this is given by the expression @xmath6@xmath7 .",
    "when clusters are considered , two clusters can not be touching , or they would count as a single cluster .",
    "one must therefore exclude a 1-pixel - wide empty boundary around each cluster .",
    "let @xmath8 be the total number of pixels `` used up '' by a cluster _ including _ this empty boundary .",
    "for example , for a 1-pixel cluster , @xmath9 because the boundary around 1 isolated pixel consists of 8 pixels . for a 3 by 3 pixel cluster , @xmath10 , and so on .",
    "the address entropy then has a lower bound @xmath11\\ ] ] where @xmath12 is the number of clusters .",
    "this of course reduces to @xmath6@xmath13 for @xmath14 ( 1-pixel clusters with no empty boundary ) .",
    "@xmath15 is a lower bound because at the edges of a chip , or when two clusters are very close , a dedicated empty boundary for each cluster is not needed .",
    "[ fig : haratio ] shows the ratio @xmath6@xmath13@xmath16 for @xmath9 ( 1-pixel clusters plus an empty boundary ) and @xmath10 ( 3 by 3-pixel clusters plus an empty boundary ) .",
    "it can be seen that , for the occupancy range of interest , @xmath6@xmath13 and @xmath15 are very close , and therefore @xmath17@xmath13 is a good approximation to the true entropy .",
    "we will use @xmath18 as the address entropy in our calculations .",
    ".,scaledwidth=70.0% ]        it is instructive to examine the address entropy per address as a function of occupancy . for a single address ,",
    "the entropy is simply the number of bits needed to count the full address space , so for a readout chip with @xmath19 pixels the address entropy of a single address ( occupancy of @xmath20 ) is 16 bits .",
    "but as the occupancy rises , fewer and fewer bits are needed per address . within the occupancy range of interest , the number of bits per address quickly converges to a common value independent of chip size .",
    "[ fig : hapera ] shows the address entropy per address as a function of occupancy for chips sizes @xmath21 , @xmath19 , and @xmath22 pixels ( note that the occupancy range in this figure goes only up to 0.1% so that the difference between the curves can be appreciated ) .",
    "this is an important result counter to conventional wisdom .",
    "it shows that making a chip larger and therefore growing the address space ( keeping pixel size constant ) does _ not _ imply a greater data volume due to the need for more address bits .",
    "if addresses are compressed ( rather than using the same number of bits per address regardless of occupancy ) , then approximately the same number of bits is needed to transmit the cluster address information regardless of chip size .",
    "making pixels smaller , on the other hand , does increase the entropy per address as expected ( i.e. cutting the pixel size in half adds one bit ) .",
    "this is more difficult to appreciate from fig .",
    "[ fig : hapera ] , where reducing pixel size has the effect of reducing occupancy ( so moving to the left on the curves ) as well as increasing the number of pixels for constant size chip .",
    ", the total number of cluster shapes , and @xmath23 , the number of most frequent shapes making up the total fraction shown on the @xmath24 axis.,scaledwidth=70.0% ]    we consider shape to also include the size ( number of pixels ) of a cluster .",
    "a single pixel has zero shape entropy , but two adjacent pixels can have 4 possible shapes ( up - down , left - right , and two diagonals ) .",
    "three adjacent pixels can have 20 possible shapes , four pixels 110 shapes , and so on ( @xcite discuses the counting of cluster shapes for manhattan geometry ) . from this",
    "it seems that shape entropy can be rather large , and difficult to estimate in general .",
    "but in real - life particle detectors this will not be the case , and we can estimate a shape entropy without knowing a detailed cluster zoology .",
    "the reason is that each readout element of a pixel detector ( a single chip or a multi - chip module ) will be traversed by particles from a preferential direction , and these will produce similar - looking clusters .",
    "thus , we can consider that some large fraction , @xmath24 , of the clusters in a given readout unit consist of a small number of shapes , @xmath23 , while the remaining @xmath25 can have a large variety of shapes , @xmath26 , due to scattered particles and radiation .",
    "this is shown graphically in fig .",
    "[ fig : shapes ] .",
    "the shape entropy is thus , @xmath27 @xmath28 is plotted for different @xmath29 and @xmath23 in fig .",
    "[ fig : shape - entropy ] . not surprisingly , the shape entropy is dominated by the number of cluster shapes that occur very frequently , and the presence of even thousands of additional , but improbable shapes has little impact . for estimation purposes we will take 4 bits per cluster as a reasonable indicative value for shape entropy in present day pixel detectors where the mean cluster size is small",
    "however , the cluster shapes occurring frequently in one particular module of a pixel detector will be different from those in another module with different position relative to the collisions .",
    "therefore , in order to realize in practice low entropy encoding of cluster shapes , each module would need to use a different encoding ( a different huffman table , for example ) , which would have to be programmed or learned by the module from its own data .",
    "we first consider cluster charge .",
    "the ideal cluster charge obeys a landau distribution for a minimum ionizing particle passing through a silicon detector .",
    "one must consider a spectrum of different particle momenta and incidence angles , which leads to a sum of landaus , as well a gaussian broadening due to noise . as was the case for cluster shapes , the range of landau means to be summed will vary for modules in different detector locations , but each readout unit will have a known , landau - like cluster charge distribution . to estimate the entropy we consider a cluster charge probability distribution function @xmath0 equal to the sum of 5 landau distributions with means at @xmath304 , 5 , 6 , 7 , and 8 arbitrary units , where the landau function is @xmath31/2}$ ] . using a single landau instead , or changing the mean , made very little difference .",
    "the mean of @xmath0 is just the average of the component means , or 6.5 .    to compute an entropy",
    "we first `` digitize '' the charge pdf by histogramming it in @xmath32 equal width bins in the range 0 to 20 ( 40 ) arbitrary units .",
    "the last ( overflow ) bin is increased so that the total histogram probability is unity .",
    "note that 20 ( 40 ) corresponds to just over 3 ( 6 ) times the mean of this particular pdf , meant to be representative of present pixel detectors with a dynamic range of a few times the minimum ionizing particle signal  @xcite . for each value of @xmath33",
    "we compute the entropy as @xmath34 , where the sum is over all histogram bins and @xmath35 is the probability in each bin .",
    "we also compute the _ digitization error _ by performing a toy experiment in which we measure cluster charge in 4 hypothetical layers and take the average .",
    "this is representative of measuring the specific ionization of particle tracks in a silicon detector . the true value for each layer is randomly drawn from @xmath0 , while the measurement is taken to be the central value of the histogram bin that the true value falls into .",
    "the digitization error is the standard deviation of the difference between the average of the 4 measurements and the true average .",
    "the digitization error vs. cluster charge entropy , @xmath36 , is shown in fig .",
    "[ fig : clusterq ] .",
    "as previously mentioned , we want to calculate the entropy for a meaningful charge measurement , and the most precise possible meaningful measurement is limited by noise . a horizontal line in fig .  [ fig : clusterq ] is included to represent the noise level .",
    "obviously the noise level will vary from system to system , so this value is an example .",
    "we drew the line at 0.0125 which means s / n=80 for the average of 4 measurements ( 4 layers with cluster s / n=40 per layer ) .",
    "this shows that for this particular noise level the cluster charge entropy is @xmath37 bits per cluster .",
    "[ fig : clusterq ] also includes two additional curves to show the bits per cluster for an uncompressed linear adc scale for the two dynamic ranges considered : 20 units and 40 units ( the dynamic range has no effect on the calculated entropy ) .",
    "we also explicitly compressed the adc values using huffman codes , and the average number of bits after compression differed from the calculated entropy by at most 5% for both dynamic ranges ( would not able to see as a separate line if plotted on the figure ) .",
    "in addition to cluster charge , we must also consider the charge of individual pixels in a cluster .",
    "the single pixel charge distribution does not have a universal landau form . as we already have analyzed the cluster charge ,",
    "the remaining information is not the absolute charge , but the fraction of the total cluster charge in each pixel .",
    "the analysis is particularly simple for a 2-pixel cluster . as both pixels",
    "must have the same charge fraction distribution @xmath38 , it follows that @xmath38 must be symmetric @xmath39 , where the fraction @xmath40 ranges between 0 and 1 .",
    "furthermore , in the ideal case that the charge splitting is due to the ionizing particle that created the cluster crossing the boundary between the pixels ( as opposed to a systematic effect like electronic crosstalk ) , then there is no favored splitting and the ratio distribution is simply @xmath41 .",
    "thus , f is digitized in @xmath32 equal size bins with equal probability in each bin and the entropy is simply @xmath33/2 per pixel",
    "( @xmath33 is divided by 2 because only the charge fraction in one pixel need be specified ) .",
    "the smallest useful bin size should be simply given by the single pixel noise over the single pixel average signal .",
    "thus , for 2-pixel cluster s / n=40 , the signal to noise on the single pixel fraction will be approximately 20 .",
    "hence , @xmath42 = @xmath43 per pixel .",
    "we will take this as a general estimate on average .",
    "clearly for individual clusters @xmath42 will vary : @xmath44 for 1-pixel clusters , and @xmath45 for more than 2-pixel clusters .",
    "we can now combine the above estimates to obtain a value for @xmath46 of eq .",
    "[ hhits ] , which we write as an entropy per cluster . from fig .",
    "[ fig : hapera ] we see that @xmath47 . from fig .",
    "[ fig : shape - entropy ] we can estimate that @xmath48 . from fig .",
    "[ fig : clusterq ] @xmath49 .",
    "also @xmath50 .",
    "all these estimates are independent of fine details about the detector in question other than signal / noise .",
    "one parameter needed is the average number of hit pixels per cluster , due to @xmath42 . taking a typical value of @xmath51 yields , @xmath52    as a concrete example we can compare this to the number of bits per cluster used by the fe - i4 chip of the atlas experiment  @xcite , excluding format and context information , for an average cluster size of 2 . for a @xmath19 ( @xmath22 ) pixel chip",
    ", the number of bits for a 1-pixel cluster used by the fe - i4 encoding is 24 ( 26 ) . for a 2-pixel cluster",
    "it can be 24 ( 26 ) or 48 ( 52 ) , depending on the shape , and for a 3-pixel cluster 48 ( 52 ) or 72 ( 78 ) .",
    "the fe - i4 encoding includes 4 bits of uncompressed adc value per pixel , which is not sufficient for a s / n=40 cluster charge measurement even with limited dynamic range ( fig .",
    "[ fig : clusterq ] ) .",
    "the average number of bits depends on the cluster distributions . using atlas experiment inner layer distributions  @xcite yields an average of 35 ( 37 ) bits per cluster .",
    "we have shown that it is possible to estimate the entropy of pixel detector hit data in the occupancy range of interest to particle physics , without knowing all the details about a specific detector .",
    "approximate knowledge about the occupancy , signal to noise , and cluster size distributions is sufficient .",
    "this is useful to understand how much room for improvement there is when developing a new detector readout . in particular , new pixel detectors for the high luminosity lhc",
    "@xcite will have very high data volume , requiring efficient encoding of the information to be transmitted .",
    "a comparison to the readout encoding used by the atlas fe - i4 shows that , even with reduced signal to noise capability , the fe - i4 encoding has of order 40% total readout bandwidth to be gained from data compression . with smaller pixels and therefore broader cluster size distributions , the gains from applying on - chip data compression will likely be even greater in future detectors .",
    "this work was supported in part by the office of high energy physics of the u.s .",
    "department of energy under contract de - ac02 - 05ch11231 ."
  ],
  "abstract_text": [
    "<S> the average minimum number of bits needed for lossless readout of a pixel detector is calculated , in the regime of interest for particle physics where only a small fraction of pixels have a non - zero value per frame . </S>",
    "<S> this permits a systematic comparison of the readout efficiency of different encoding implementations . </S>",
    "<S> the calculation is compared to the number of bits used by the fe - i4 pixel readout chip of the atlas experiment .    </S>",
    "<S> particle tracking detectors ( solid - state detectors ) , data acquisition concepts , electronic detector readout concepts ( solid - state ) , data reduction methods , information theory </S>"
  ]
}