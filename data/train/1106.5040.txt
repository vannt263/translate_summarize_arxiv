{
  "article_text": [
    "most of modern equity exchanges are organized as _ order driven _ markets . in such type of markets , the price formation exclusively results from operating a _ limit order book _ ( lob ) , an order crossing mechanism where _ limit orders _ are accumulated while waiting to be matched with incoming _ market orders_. any market participant is able to interact with the lob by posting either market orders or limit orders is an order to buy ( sell ) @xmath0 units of the asset being traded at the lowest ( highest ) available price in the market , its execution is immediate ; a limit order of size @xmath1 at price @xmath2 is an order to buy ( sell ) @xmath1 units of the asset being traded at the specified price @xmath2 , its execution is uncertain and achieved only when it meets a counterpart market order . given a security , the _ best bid _ ( resp . _",
    "ask _ ) price is the highest ( resp .",
    "lowest ) price among limit orders to buy ( resp . to sell ) that are active in the lob .",
    "the _ spread _ is the difference , expressed in numraire per share , of the best ask price and the best bid price , positive during the continuous trading session ( see @xcite ) . ] .    in this context , _ market making _ is a class of strategies that consists in simultaneously posting limit orders to buy and sell during the continuous trading session . by doing so , market makers provide counterpart to any incoming market orders : suppose that an investor @xmath3 wants to sell one share of a given security at time @xmath4 and that an investor @xmath5 wants to buy one share of this security at time @xmath6 ; if both use market orders , the economic role of the market maker @xmath7 is to buy the stock as the counterpart of @xmath3 at time @xmath4 , and carry until date @xmath8 when she will sell the stock as a counterpart of @xmath5 .",
    "the revenue that @xmath7 obtains for providing this service to final investors is the difference between the two quoted prices at ask ( limit order to sell ) and bid ( limit order to buy ) , also called the market maker s spread .",
    "this role was traditionally fulfilled by specialist firms , but , due to widespread adoption of electronic trading systems , any market participant is now able to compete for providing liquidity . moreover , as pointed out by empirical studies ( e.g. @xcite,@xcite ) and in a recent review @xcite from amf , the french regulator , this renewed competition among liquidity providers causes reduced effective market spreads , and therefore reduced indirect costs for final investors .",
    "empirical studies ( e.g. @xcite ) also described stylized features of market making strategies . first , market making is typically not directional , in the sense that it does not profit from security price going up or down .",
    "second , market makers keep almost no overnight position , and are unwilling to hold any risky asset at the end of the trading day . finally , they manage to maintain their _ inventory _ , i.e. their position on the risky asset close to zero during the trading day , and often equilibrate their position on several distinct marketplaces , thanks to the use of high - frequency order sending algorithms .",
    "estimations of total annual profit for this class of strategy over all u.s .",
    "equity market were around @xmath9 g$ in 2009 @xcite .",
    "popular models of market making strategies were set up using a risk - reward approach .",
    "three distinct sources of risk are usually identified : the inventory risk , the adverse selection risk and the execution risk . the _ inventory risk _",
    "@xcite is comparable to the market risk , i.e. the risk of holding a long or short position on a risky asset .",
    "moreover , due to the uncertain execution of limit orders , market makers only have partial control on their inventory , and therefore the inventory has a stochastic behavior .",
    "the _ adverse selection risk _ , popular in economic and econometric litterature , is the risk that market price unfavourably deviates , from the market maker point of view , after their quote was taken .",
    "this type of risk appears naturally in models where the market orders flow contains information about the fundamental asset value ( e.g. @xcite ) . finally , the _ execution risk _ is the risk that limit orders may not be executed , or be partially executed @xcite .",
    "indeed , given an incoming market order , the matching algorithm of lob determines which limit orders are to be executed according to a price / time priority , and this structure fundamentally impacts the dynamics of executions .",
    "some of these risks were studied in previous works . the seminal work @xcite provided a framework to manage inventory risk in a stylized lob .",
    "the market maker objective is to maximize the expected utility of her terminal profit , in the context of limit orders executions occurring at jump times of poisson processes .",
    "this model shows its efficiency to reduce inventory risk , measured via the variance of terminal wealth , against the symmetric strategy .",
    "several extensions and refinement of this setup can be found in recent litterature : @xcite provides simplified solution to the backward optimization , an in - depth discussion of its characteristics and an application to the liquidation problem . in @xcite ,",
    "the authors develop a closely related model to solve a liquidation problem , and study continuous limit case .",
    "the paper @xcite provides a way to include more precise empirical features to this framework by embedding a hidden markov model for high frequency dynamics of lob .",
    "some aspects of the execution risk were also studied previously , mainly by considering the trade - off between passive and aggressive execution strategies . in @xcite ,",
    "the authors solve the merton s portfolio optimization problem in the case where the investor can choose between market orders or limit orders ; in @xcite , the possibility to use market orders in addition to limit orders is also taken into account , in the context of market making in the foreign exchange market .",
    "yet the relation between execution risk and the microstructure of the lob , and especially the price / time priority is , so far , poorly investigated .    in this paper",
    "we develop a new model to address these three sources of risk .",
    "the stock mid - price is driven by a general markov process , and we model the market spread as a discrete markov chain that jumps according to a stochastic clock . therefore , the spread takes discrete values in the price grid , multiple of the tick size . we allow the market maker to trade both via limit orders , which execution is uncertain , and via market orders , which execution is immediate but costly .",
    "the market maker can post limit orders at best quote or improve this quote by one tick . in this last case , she hopes to capture market order flow of agents who are not yet ready to trade at the best bid / ask quote . therefore",
    ", she faces a trade off between waiting to be executed at the current best price , or improve this best price , and then be more rapidly executed but at a less favorable price .",
    "we model the limit orders strategy as continuous controls , due to the fact that these orders can be updated at high frequency at no cost . on the contrary , we model the market orders strategy as impulse controls that can only occur at discrete dates .",
    "we also include fixed , per share or proportional fees or rebates coming with each execution .",
    "execution processes , counting the number of executed limit orders , are modelled as cox processes with intensity depending both on the market maker s controls and on the market spread . in this context , we optimize the expected utility from profit over a finite time horizon , by choosing optimally between limit and market orders , while controlling the inventory position",
    ". we study in detail classical frameworks including mean - variance criterion and exponential utility criterion .",
    "the outline of this paper is as follows . in section 2 ,",
    "we detail the model , and comment its features .",
    "we also provide direct calibration methods for all quantities involved in our model .",
    "we formulate in section 3 the optimal market making control problem and derive the associated hamilton - jacobi - bellman quasi variational inequality ( hjbqvi ) from dynamic programming principle .",
    "we show how one can reduce the number of state variables to the inventory and spread for the resolution to this qvi in two standard cases . in the last section 4 , we provide some numerical results and empirical performance analysis .",
    "let us fix a probability space @xmath10 equipped with a filtration @xmath11 @xmath12 @xmath13 satisfying the usual conditions .",
    "it is assumed that all random variables and stochastic processes are defined on the stochastic basis @xmath14 .",
    "the mid - price of the stock is an exogenous markov process @xmath15 , with infinitesimal generator @xmath16 and state space @xmath17 .",
    "for example , @xmath15 is a lvy process ( e.g. an arithmetic brownian motion ) , or an exponential of lvy process ( e.g. geometric brownian motion ) . in the limit order book ( lob ) for this stock",
    ", we consider a stochastic bid - ask spread resulting from the behaviour of market participants , taking discrete values , which are finite multiple of the tick size @xmath18 @xmath19 @xmath20 , and jumping at random times .",
    "this is modelled as follows : we first consider the tick time clock associated to a poisson process @xmath21 with deterministic intensity @xmath22 , and representing the random times where the buy and sell orders of participants in the market affect the bid - ask spread .",
    "we next define a discrete - time stationary markov chain @xmath23 , valued in the finite state space @xmath24 @xmath12 @xmath25 , @xmath26 @xmath27 @xmath28 , @xmath0 @xmath29 @xmath30 , with probability transition matrix @xmath31 , i.e. @xmath32 $ ] @xmath12 @xmath33 , s.t . @xmath34 @xmath12 @xmath20 , independent of @xmath35 , and representing the random spread in tick time . the spread process @xmath36 in calendar time",
    "is then defined as the time - change of @xmath37 by @xmath35 , i.e. [ dyns ] s_t & = & s_n_t , t 0 .",
    "hence , @xmath36 is a continuous time ( inhomogeneous ) markov chain with intensity matrix @xmath38 @xmath12 @xmath39 , where @xmath40 @xmath12 @xmath41 for @xmath42 , and @xmath43 @xmath12 @xmath44 .",
    "we assume that @xmath45 and @xmath15 are independent .",
    "the best - bid and best - ask prices are defined by : @xmath46 @xmath12 @xmath47 , @xmath48 @xmath12 @xmath49 .",
    "we consider an agent ( market maker ) , who trades the stock using either limit orders or market orders .",
    "she may submit limit buy ( resp .",
    "sell ) orders specifying the quantity and the price she is willing to pay ( resp .",
    "receive ) per share , but will be executed only when an incoming sell ( resp .",
    "buy ) market order is matching her limit order .",
    "otherwise , she can post market buy ( resp .",
    "sell ) orders for an immediate execution , but , in this case obtain the opposite best quote , i.e. trades at the best - ask ( resp . best bid ) price , which is less favorable .    _ limit orders strategies .",
    "_ the agent may submit at any time limit buy / sell orders at the current best bid / ask prices ( and then has to wait an incoming counterpart market order matching her limit ) , but also control her own bid and ask price quotes by placing buy ( resp .",
    "sell ) orders at a marginal higher ( resp .",
    "lower ) price than the current best bid ( resp .",
    "ask ) , i.e. at @xmath50 @xmath27 @xmath51 ( resp .",
    "@xmath52 @xmath27 @xmath53 ) .",
    "such an alternative choice is used in practice by a market maker to capture market orders flow of undecided traders at the best quotes , hence to get priority in the order execution w.r.t .",
    "limit order at current best / ask quotes , and can be taken into account in our modelling with discrete spread of tick size @xmath18 .",
    "there is then a tradeoff between a larger performance for a quote at the current best bid ( resp .",
    "ask ) price , and a smaller performance for a quote at a higher bid price , but with faster execution .",
    "the submission and cancellation of limit orders are for free , as they provide liquidity to the market , and are thus stimulated . actually , market makers receive some fixed rebate once their limit orders are executed .",
    "the agent is assumed to be small in the sense that she does not influence the bid - ask spread .",
    "the limit order strategies are then modelled by a continuous time predictable control process : _ t^make & = & ( q_t^b , q_t^a , l_t^b , l_t^a ) , t 0 , where @xmath54 @xmath12 @xmath55 valued in @xmath56 ^ 2 $ ] , @xmath57 @xmath19 @xmath20 , represents the size of the limit buy / sell order , and @xmath58 @xmath12 @xmath59 represent the possible choices of the bid / ask quotes either at best or at marginally improved prices , and valued in @xmath60 @xmath12 @xmath61 , with @xmath62 @xmath12 @xmath63 , @xmath64 @xmath12 @xmath65 :      notice that when the spread is equal to one tick @xmath18 , a bid quote at best price plus the tick is actually equal to the best ask , and will then be considered as a buy market order .",
    "similarly , an ask quote at best price minus the tick becomes a best bid , and is then viewed as a sell market order .",
    "in other words , the limit orders @xmath70 @xmath12 @xmath71 take values in @xmath72 , where @xmath73 @xmath12 @xmath74 when @xmath75 @xmath19 @xmath18 , @xmath73 @xmath12 @xmath76 when",
    "@xmath75 @xmath12 @xmath18",
    ". we shall denote by @xmath77 @xmath12 @xmath62 for @xmath78 @xmath19 @xmath79 , and @xmath77 @xmath12 @xmath80 for @xmath78 @xmath12 @xmath79 , and similarly for @xmath81 for @xmath78 @xmath29 @xmath26 .",
    "we denote at any time @xmath4 by @xmath82 and @xmath83 the bid and ask prices of the market maker , where the functions @xmath84 ( resp .",
    "@xmath85 ) are defined on @xmath86 ( resp .",
    "@xmath87 ) by : ^b(q^b , p , s ) & = & \\ {            one can take into account proportional rebates received by the market makers , by considering ; @xmath89 @xmath12 @xmath93 , @xmath91 @xmath12 @xmath94 , for some @xmath95 @xmath29 @xmath96 , or per share rebates with : @xmath89 @xmath12 @xmath97 , @xmath91 @xmath12 @xmath98 , for some @xmath95 @xmath19 @xmath20 .",
    "the limit orders of the agent are executed when they meet incoming counterpart market orders .",
    "let us then consider the arrivals of market buy and market sell orders , which completely match the limit sell and limit buy orders of the small agent , and modelled by independent cox processes @xmath99 and @xmath100 .",
    "the intensity rate of @xmath101 is given by @xmath102 where @xmath103 is a deterministic function of the limit quote sell order , and of the spread , satisfying @xmath104 @xmath105 @xmath106 .",
    "this natural condition conveys the price / priority in the order execution in the sense that an agent quoting a limit sell order at ask price @xmath107 will be executed before traders at the higher ask price @xmath108 , and hence receive more often market buy orders .",
    "typically , one would also expect that @xmath103 is nonincreasing w.r.t .",
    "the spread , which means that the larger is the spread , the less often the market buy orders arrive .",
    "likewise , we assume that the intensity rate of @xmath109 is given by @xmath110 where @xmath111 is a deterministic function of the spread , and @xmath112 @xmath105 @xmath113 .",
    "we shall denote by @xmath114 @xmath12 @xmath115 , @xmath116 @xmath12 @xmath117 for @xmath75 @xmath12 @xmath92 , @xmath78 @xmath29 @xmath26 .",
    "for a limit order strategy @xmath118 @xmath12 @xmath119 , the cash holdings @xmath120 and the number of shares @xmath121 hold by the agent ( also called inventory ) follow the dynamics dy_t & = & l_t^b dn_t^b - l_t^a dn_t^a , [ dyny ] + dx_t & = & - ^b(q_t^b , p_t^-,s_t^- ) l_t^b dn_t^b + ^a(q_t^a , p_t^-,s_t^- ) l_t^a dn_t^a .",
    "[ dynx ]    _ market order strategies .",
    "_ in addition to market making strategies , the investor may place market orders for an immediate execution reducing her inventory . the submissions of market orders , in contrast to limit orders , take liquidity in the market , and are usually subject to fees .",
    "we model market order strategies by an impulse control : ^take & = & ( _ n,_n)_n0 , where @xmath122 is an increasing sequence of stopping times representing the market order decision times of the investor , and @xmath123 , @xmath124 @xmath125 @xmath79 , are @xmath126-measurable random variables valued in @xmath127 $ ] , @xmath128 @xmath19 @xmath20 , and giving the number of stocks purchased at the best - ask price if @xmath123 @xmath125 @xmath20 , or selled at the best - bid price if @xmath123 @xmath105 @xmath20 at these times .",
    "again , we assumed that the agent is small so that her total market order will be executed immediately at the best bid or best ask price . in other words , we only consider a linear market impact , which does not depend on the order size . when posting a market order strategy , the cash holdings and the inventory jump at times @xmath129 by : y__n & = & y__n^- + _ n , [ sauty ] + x__n & = & x__n^- - c(_n , p__n , s__n ) [ sautx ] where c(e , p , s ) & = & ep + |e| + represents the ( algebraic ) cost function indicating the amount to be paid immediately when passing a market order of size @xmath130 , given the mid price @xmath131 , a spread @xmath75 , and a fixed fee @xmath132 @xmath19 @xmath20 .",
    "we shall denote by @xmath133 @xmath12 @xmath134 for @xmath75 @xmath12 @xmath92 ,",
    "@xmath78 @xmath29 @xmath26",
    ".    one can also include proportional fees @xmath95 @xmath29 @xmath96 paid at each market order trading by considering a cost function in the form : @xmath134 @xmath12 @xmath135 , or fixed fees per share with @xmath134 @xmath12 @xmath136 .        in most order - driven markets ,",
    "available data are made up of _ level 1 data _ that contain transaction prices and quantities at best quotes , and of _ level 2 data _ containing the volume updates for the liquidity offered at the @xmath54 first order book slices ( @xmath54 usually ranges from 5 to 10 ) . in this section ,",
    "we propose some direct methods for estimating the intensity of the spread markov chain , and of the execution point processes , based only on the observation of _ level 1 data_. this has the advantage of low computational cost , since we do not have to deal with the whole volume of _ level 2 data_. yet , we mention some recent work on parameters estimation from the whole order book data @xcite , but involving heavier computations based on integral transforms .    * _ estimation of spread parameters .",
    "_ * assuming that the spread @xmath45 is observable , let us define the jump times of the spread process : _ 0 = 0 , _",
    "n+1 & = & t > _ n : s_t s_t- , n 1 . from these observable quantities , one can reconstruct the processes : n_t & = & # _ j > 0 : _ j t , t 0 , + _ n & = & s__n , n 0 . then , our goal is to estimate the deterministic intensity of the poisson process @xmath21 , and the transition matrix of the markov chain @xmath140 from a path realization with high frequency data of the tick - time clock and spread in tick time over a finite trading time horizon @xmath141 , typically of one day .",
    "from the observations of @xmath142 samples of @xmath143 , @xmath124 @xmath12 @xmath144 , and since the markov chain @xmath145 is stationary , we have a consistent estimator",
    "( when @xmath142 goes to infinity ) for the transition probability @xmath33 @xmath27 @xmath32 $ ] @xmath12 @xmath146/\\pb[\\hat s_n = i\\delta]$ ] given by : [ estimrho ] _ ij & = & for the estimation of the deterministic intensity function @xmath22 of the ( non)homogeneous poisson process @xmath147 , we shall assume in a first approximation a simple natural parametric form .",
    "for example , we may assume that @xmath148 is constant over a trading day , and more realistically for taking into account intra - day seasonality effects , we consider that the tick time clock intensity jumps e.g. every hour of a trading day .",
    "we then assume that @xmath148 is in the form : ( t ) & = & _ k 1_t_kt < t_k+1 where @xmath149 is a fixed and known increasing finite sequence of @xmath150 with @xmath151 , and @xmath152 is an unknown finite sequence of @xmath153 . in other words ,",
    "the intensity is constant equal to @xmath154 over each period @xmath155 $ ] , and by assuming that the interval length @xmath156 is large w.r.t .",
    "the intensity @xmath154 ( which is the case for high frequency data ) , we have a consistent estimator of @xmath154 , for all @xmath157 , and then of @xmath22 given by : [ estimlambda ] _ k & = & .",
    "we performed these two estimation procedures and on sogn.pa stock on april 18 , 2011 between 9:30 and 16:30 in paris local time .",
    "we used tick - by - tick level 1 data provided by quanthouse , and fed via a onetick timeseries database .    in table",
    "[ transitionmatrix ] , we display the estimated transition matrix : first row and column indicate the spread value @xmath158 and the the cell @xmath159 shows @xmath160 . for this stock and at this date , the tick size was @xmath161 euros , and we restricted our analysis to the first @xmath162 values of the spread @xmath163 due to the small number of data outside this range .",
    "we display both the  gross \" information ratio @xmath165 and the  net \" information ratio @xmath166 to have more precise interpretation of the results .",
    "indeed , @xmath167 seems largely overestimated in this simulated data backtest compared to what would be real - world performance , for all @xmath168 .",
    "then , to ease interpretation , we assume that @xmath169 has zero mean performance in real - world conditions , and therefore offset the mean performance @xmath170 by the constant @xmath171 when computing the nir .",
    "this has simple visual interpretation as shown in figure .",
    "observe that highest ( net ) information ratio is reached for @xmath172 for this set of parameters . at this point @xmath172 , the annualized value of the nir ( obtained by simple extrapolation ) is @xmath173 , but this simulated data backtest must be completed by a backtest on real data .",
    "qualitatively speaking , the effect of increasing the inventory penalization parameter @xmath174 is to increase the zone @xmath175 where we trade at market .",
    "this induces smaller inventory risk , due to the fact that we unwind our position when reaching relatively small values for @xmath176 .",
    "this feature can be used to enforce a soft maximum inventory constraint directly by choosing @xmath174 .",
    "frey s. and grammig ( 2008 ) :  liquidity supply and adverse selection in a pure limit order book market \" _ high frequency financial econometrics , physica - verlag hd _ , 83 - 109 , j. bauwens l. , pohlmeier w. and d. veredas ( eds . )      grillet - aubert l. ( 2010 ) :  ngociation dactions : une revue de la littrature  lusage des rgulateurs de march \" , _ amf _ , available at : http://www.amf-france.org/documents/general/9530$_$1.pdf[http://www.amf-france.org/documents/general/9530_1.pdf ] ."
  ],
  "abstract_text": [
    "<S> we propose a framework for studying optimal market making policies in a limit order book ( lob ) . </S>",
    "<S> the bid - ask spread of the lob is modelled by a markov chain with finite values , multiple of the tick size , and subordinated by the poisson process of the tick - time clock . </S>",
    "<S> we consider a small agent who continuously submits limit buy / sell orders at best bid / ask quotes , and may also set limit orders at best bid ( resp . </S>",
    "<S> ask ) plus ( resp . </S>",
    "<S> minus ) a tick for getting the execution order priority , which is a crucial issue in high frequency trading . by trading with limit orders , </S>",
    "<S> the agent faces an execution risk since her orders are executed only when they meet counterpart market orders , which are modelled by cox processes with intensities depending on the spread and on her limit prices . by holding non - zero positions on the risky asset , </S>",
    "<S> the agent is also subject to the inventory risk related to price volatility . </S>",
    "<S> then the agent can also choose to trade with market orders , and therefore get immediate execution , but at a least favorable price because she has to cross the bid - ask spread .    </S>",
    "<S> the objective of the market maker is to maximize her expected utility from revenue over a short term horizon by a tradeoff between limit and market orders , while controlling her inventory position . </S>",
    "<S> this is formulated as a mixed regime switching regular / impulse control problem that we characterize in terms of quasi - variational system by dynamic programming methods . in the case of a mean - variance criterion with martingale reference price or when the asset price follows a levy process and with exponential utility criterion , the dynamic programming system can be reduced to a system of simple equations involving only the inventory and spread variables .    </S>",
    "<S> calibration procedures are derived for estimating the transition matrix and intensity parameters for the spread and for cox processes modelling the execution of limit orders . </S>",
    "<S> several computational tests are performed both on simulated and real data , and illustrate the impact and profit when considering execution priority in limit orders and market orders .    </S>",
    "<S> * keywords : * market making , limit order book , inventory risk , point process , stochastic control . </S>"
  ]
}