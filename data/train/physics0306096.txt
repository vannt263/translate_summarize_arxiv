{
  "article_text": [
    "a * calibration dataset * as used here is information describing some aspect of the state of the the glast lat which may change with time .",
    "examples include hardware status bits , electronics gains and alignment information .",
    "the * calibration infrastructure * provides services to write and access such datasets , particularly those needed for the earliest stages of event processing .",
    "information collectively known as * irf*s ( instrument response functions ) used in higher - level analyses will be managed by a different facility .",
    "the glast lat is scheduled for launch in 2006 . although an astronomical instrument , it consists of active components familiar to high - energy physicists : a silicon strip tracker , a cesium iodide crystal calorimeter , and an acd ( anti - coincidence detector ) consisting of scintillating tiles .",
    "however , unlike the prototypical hep detector of today ,    * there is no significant ambient magnetic field .",
    "* there is no beamline , hence no reason for circular symmetry .",
    "detector components are almost all box - like and aligned along orthogonal axes . *",
    "the detetector is small , both in size and , except for silicon strips , in number of components .",
    "the last especially has impact on the calibration infrastructure design .",
    "the amount and complexity of data to be managed is much less than in a typical hep experiment , so much less that we need pay only minimal attention to efficient use of storage and have no need for especially clever organizational and searching schemes .",
    "although storage and cpu resources required for lat data processing are relatively modest , the processing pipeline is no simpler than for standard hep experiments ; we still need `` one of everything '' as well as considerable flexibility both for developers and for end - users .",
    "in particular , the calibration infrastructure    * must support prototypes as well as flight instrument ( but can assume that no job will concern itself with more than one instrument ) . * must support remote use , even disconnected use .",
    "* must provide transparent access to appropriate calibration data for event analysis .",
    "in particular , each calibration data set has a * validity time interval * associated with it .",
    "if the timestamp of the event being analyzed is outside the validity interval of the in - memory calibration , a new calibration whose validity interval includes the timestamp must be fetched without special intervention by the client .",
    "* must provide comprehensive , even if primitive , access for clients with a more diagnostic slant .    like any other component of standard processing , the calibration infrastructure software must be robust .",
    "performance and resource requirements are not stringent , but they can not be ignored , either .",
    "the calibration infrastructure should in no respect be a bottleneck .",
    "all offline software must build and run in at least two environments : linux with gcc and windows with visual studio .",
    "developers are split between the two .",
    "pipeline processing takes place on the slac linux farm .",
    "we prefer to use , and almost universally do use , tools which are both free and open source : free because we can not ask collaborators to pay exorbitant per - seat charges and open source so that we can make patches immediately ourselves if necessary .",
    "several of our most critical tools have come from elsewhere within the high - energy physics community .",
    "one such is the gaudi framework .",
    "@xcite the calibration infrastructure adheres to the gaudi model of conversion from persistent to in - memory ( `` transient '' ) data .",
    "it is extremely important that the collection of calibrations be readily searchable by various criteria : type of calibration , validity interval , instrument calibrated , flavor , etc .",
    "however , once the desired calibration data set is found , the chief clients of calibration typically want access to the complete calibration data set , not just some extracted piece . in essence",
    "each calibration data set is comprised of two components with different functional requirements .",
    "one is the * bulk data * , the calibration information about the instrument , such as a collection of pedestals .",
    "since the entire collection will be read into memory before use by most applications , the internal organization does not have to be particularly well - matched to access patterns of the applications , but it should be self - describing and , for large data sets , reasonably compact .",
    "the other component is * metadata * , information _ about _ the bulk data .",
    "the amount of metadata per calibration is small and its structure is uniform across all calibration types so that it can be readily searched .",
    "a natural storage format for the metadata is in a relational database table .",
    "mysql satisfies our functional requirements and is moreover free , open - source and straightforward to use .",
    "each calibration is * registered * by entering a new row in the table .",
    "the columns in the table fall into three categories : those used primarily in searching ( calibration type , start and end of validity interval , and several others ) , those used to access the bulk data ( such as a filename and an indicator of format ) , and those which contain information primarily intended for human readers , such as a text description of the conditions under which the calibration was done .",
    "see table  [ table1 ] for the complete list    [ cols=\"<,<,<\",options=\"header \" , ]      currently only xml is used for bulk data ; support for root is in development . using a human - readable format",
    "has been an aid in debugging the new system , but xml is not well - suited to data sets involving large numbers of floating - point values .",
    "new calibrations of this nature will be written as root files as soon as full support is available .",
    "there will be no need to convert old files since the file format is discovered dynamically from the metadata for each data set .",
    "another potential drawback of xml files compared to a binary format like root is their bulk . if space becomes a problem support for a third format , compressed xml , will be added .",
    "typical calibration files now in use are reduced by about a factor of 100 by standard compression techniques .",
    "the gaudi detector data service , persistency service , and conversion service paradigms provide much of what is needed to meet the requirements of glast analysis clients , though only the persistency service could be used untouched .",
    "the most straightforward use of these services might go something like this :    * the client asks the data service for calibration information while processing an event * if data is present and current , we re done .",
    "* otherwise the data service requests data from the persistency service * the persistency service determines the appropriate conversion service for data in question and makes a request * the conversion service finds the correct converter for this type of calibration data and invokes it * the converter finds persistent form of correct data and reconstitutes it to the appropriate in - memory location    the collaborating services pass a data structure known as an * opaque address * among themselves which contains whatever information is needed to identify and convert the persistent form of the dataset",
    ". this data structure must be retrievable from the initial client request , which typically identifies a dataset by its location in the data hierarchy known as the * tds * ( transient data store ) .",
    "the correct dataset is further implicitly determined by the timestamp of the event currently being processed .",
    "the two constituents of a glast lat calibration dataset are each converted more or less according to the above scheme . first the metadata is converted . since there is only one kind of metadata , there is no need for separate converters ; the conversion is handled directly by the mysql conversion service .",
    "the result of this conversion is to determine the physical form of the bulk data ( e.g. , xml ) , form a suitable opaque address incorporating the access information from the metadata , and invoke the persistency service again with this address .",
    "the conversion service finds the correct converter . in the case of xml",
    "bulk data , a base converter class parses the xml into a dom in - memory representation , handles conversion of data common to all calibration types , such as certain fields from the metadata , then invokes a method which has been overridden by derived classes in order to handle the calibration type - specific data .",
    "since analysis clients generally need access to an entire calibration dataset the tds hierarchy ( sometimes referred to as /bf tcds , for transient calibration data store , to distinguish it from the event tds ) is simple and uniform , with all the data stored only in leaf nodes , as shown in figure  [ figtcds ] .",
    "there is a root node , a second level corresponding to calibration type , and a third level , the leaves , representing flavor .",
    "this organization allows multiple flavors of a single calibration type to be accessible concurrently .",
    "a `` vanilla '' leaf node is always present for each calibration type .",
    "other flavor nodes are determined at run time from job options parameters .",
    "the first calibration types to be supported were dead and hot channel lists for the tracker .",
    "tracker utility software already included several gaudi services ; adding a bad strips service was a natural extension .",
    "hot channels and dead channels are kept as separate datasets by the calibration infrastructure ; it is not even necessarily the case that they are generated at the same time or from the same input .",
    "however analysis applications typically want a single merged list of bad channels .",
    "the bad strips service and an associated gaudi algorithm , tkrcalibalg , are responsible for the merging and for insuring that the list is kept up to date .",
    "active elements and the flow of data in this process can be seen in figure  [ figtkr ] . for each new event ,    * the algorithm verifies that dead and hot channel data are in the tcds and causes them to be updated ( to datasets whose validity interval includes the timestamp of the current event ) if necessary * it checks to see if the serial number ( here just the serial number entry for the corresponding mysql row , but any unique identifier would do ) of either dataset has changed . *",
    "if so , it asks the bad strips service to merge the new datasets .",
    "* analysis algorithms may now use the bad strips service to access the merged and updated bad strips list .",
    "an additional benefit of this design , incorporating a separate tracker utility layer , is that the full machinery of the calibration infrastructure may be bypassed in case it is not needed , for example with mc data .",
    "the initial focus has been on supporting analysis clients in the gaudi environment . for non - gaudi clients , tools for access to the calibration infrastructure and the data it maintains are so far rudimentary , but comprise a suitable base for more complete and formalized services , particularly for access to the metadata , as the project matures .",
    "creation of new bulk datasets typically happens outside gaudi and is not a function of the calibration infrastructure .",
    "it is the responsibility of the detector subsystems to provide such data in a supported format ; that is , one which the infrastructure conversion services can convert .",
    "a new dataset becomes generally available after it has been registered ( which _ is _ an infrastructure function ) by writing a new row in the metadata table .",
    "similarly , non - gaudi applications may use callable infrastructure services to read or search the metadata database ( or may use sql queries directly ) , but in most cases the public api for bulk data for such applications is just the format of the data .",
    "for a robust production environment , additional tools to access and manage the metadata will be necessary .",
    "write access to the database is already restricted , but even legitimate writers can make mistakes .",
    "several kinds of errors can and should be caught .",
    "consistency and completeness checks can catch more subtle problems involving more than one row .",
    "the production mysql database and bulk data at slac are not conveniently accessible for all users .",
    "we plan to provide mirrors for production european users . since the dataident field of the metadata ( which identifies the bulk data belonging to a particular calibration ) may and typically does contain environment variables , the metadata itself may be left untouched in the mirrors .",
    "isolated developers present a somewhat different problem .",
    "they may be disconnected from the network entirely , but their needs are typically less : they do nt need access to all calibrations . one way , already successfully demonstrated , to provide a fully - local calibration infrastructure is to install a mysql server on the user s machine , fill it with a dump of the contents of the production database , and copy over bulk data files as needed .",
    "another possibility which avoids the complex process of mysql installation would be to provide an alternate implementation of the metadata storage and access , such as a simple ascii file representation of the metadata for a minimal collection of calibrations .",
    "so far only a fraction of the total number of expected calibration types are supported by the calibration infrastructure ; others will be implemented as required by clients .",
    "root is the preferred choice for calibration files involving many floating point numbers , both because it is a compact binary format and because it is already heavily used for persistent event data and as an analysis platform .",
    "a root conversion service is under development .",
    "glast offline has as yet no formal mechanism for keeping track of the many parameters that go into a particular software run .",
    "blessed collections of such parameters share many attributes with calibrations .",
    "the calibration infrastructure or a near - clone could be used for this purpose .",
    "the calibration infrastructure is in active use for several tracker and calorimeter calibrations .",
    "there is much to do before the full facility as envisioned is in place , and certain features of even the current limited implementation have not been thoroughtly exercised , but there is no reason to doubt that the design will accommodate all currently - anticipated future needs .",
    "the author wishes to thank andrea valassi ( cern ) for guidance in the design of the two - stage conversion process and leon rochester ( slac ) for suggesting the concept of * flavor * and for contributing to the design and implementation of the bad strips architecture ."
  ],
  "abstract_text": [
    "<S> the glast lat  @xcite calibration infrastructure is designed to accommodate a wide range of time - varying data types , including at a minimum hardware status bits , conversion constants , and alignment for the glast lat instrument and its prototypes . the system will support persistent xml and root data to begin with ; other physical formats will be added if necessary . </S>",
    "<S> in addition to the `` bulk data '' , each data set will have associated with it a row in a rdbms table containing metadata , such as timestamps , data format , pointer to the location of the bulk data , etc . , which will be used to identify and locate the appropriate data set for a particular application .    as glast uses the gaudi framework for event processing , the calibration infrastructure makes use of several gaudi elements and concepts , such as conversion services , converters and data objects and implements the prescribed gaudi interfaces ( idetdatasvc , ivalidity , .. ) . </S>",
    "<S> this insures that calibration data will always be valid and appropriate for the event being processed . </S>",
    "<S> the persistent representation of a calibration dataset as two physical pieces in different formats complicates the conversion process somewhat : two cooperating conversion services are involved in the conversion of any single dataset . </S>"
  ]
}