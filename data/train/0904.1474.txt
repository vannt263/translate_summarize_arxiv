{
  "article_text": [
    "in @xcite , fukaya and oh proved that counts of holomorphic discs in a cotangent bundle with boundary conditions along exact lagrangian sections agree , in a certain degeneration , with a count of gradient trees .",
    "this has been widely expected to lead to an equivalence between the @xmath0 structure defined on floer cochains of a lagrangian @xmath4 , and the chain level cup product on the classical ( ech , simplicial , singular ) models for its ordinary cohomology . over @xmath5 ,",
    "kontsevich and soibelman in @xcite described an argument using the result of fukaya and oh and homological perturbation theory on de rham cohomology , which proves this result . a different proof , also over @xmath5 , is given by fukaya , oh , ohta , and ono s in their book on lagrangian floer cohomology @xcite*section 33 . one corollary of this paper is that such an equivalence holds over the integers :    [ thm : cotangent_bundle ] there is an @xmath0 equivalence @xmath6    in order to define @xmath7 as an honest @xmath0 algebra ( rather than work with partially defined algebraic structures as in @xcite ) we follow the approach used by seidel in @xcite .",
    "the main idea is to make choices of perturbations to ensure the genericity of all moduli spaces that enter into the definition of the operations .",
    "seidel proves that the resulting structure is independent , up to @xmath0 equivalence , of these choices .    as in @xcite",
    "we pass through a morse model in order to prove this equivalence .",
    "first , we imitate the construction of the fukaya category to obtain an @xmath0 structure on morse cochains by counting perturbed gradient trees .",
    "writing @xmath8 for this @xmath0 algebra , we prove the existence of @xmath0 functors @xmath9 inducing isomorphisms on cohomology . here , @xmath10 are the cochains of a simplicial triangulation of @xmath4 . theorem [ thm : cotangent_bundle ] follows from the fact that @xmath0 maps inducing an isomorphism on cohomology admit ( quasi)-inverses whenever the underlying groups are free abelian .",
    "we do not rely on the degeneration technique of @xcite in order to prove the equivalence of the @xmath0 structures coming from floer and morse theory .",
    "rather , we consider moduli spaces that are built from gradient trees and holomorphic discs with one lagrangian boundary condition along an arbitrary leaf of the foliation of the cotangent bundle by fibres .",
    "the corresponding abstract moduli spaces give a new realisation of the multiplihedra controlling @xmath0 functors foreseen by stasheff in @xcite .",
    "theorem [ thm : cotangent_bundle ] is the special case of a more general result : within an exact symplectic manifold @xmath11 with vanishing first chern class ( and a choice of a complex volume form ) , we define a brane to be an exact lagrangian @xmath4 which is relatively spin , and such that the restriction of the complex volume form to some weinstein neighbourhood of @xmath4 is isotopic to the complexification of a ( real ) volume form on @xmath4 ( more precisely , we fix this isotopy ) .",
    "these extra choices of data are necessary in order for the fukaya category to be defined over @xmath12 and admit natural gradings .    given a pair of exact lagrangian branes @xmath2 and",
    "@xmath3 intersecting cleanly along a submanifold @xmath1 , the lagrangian condition implies that the normal bundles of @xmath13 in the two sheets are isomorphic . in section [ sec : simp ] , we construct a differential graded category @xmath14 with morphism spaces given by simplicial cochains on @xmath15 , @xmath16 , and @xmath17 ( here @xmath18 is the unit normal bundle of @xmath1 in either @xmath2 or @xmath3 ) .",
    "the main result of this paper relates this category to the full subcategory of the fukaya category of @xmath11 with objects @xmath2 and @xmath3 , and to a morse theoretic model @xmath19 :    [ thm : general_result ] if @xmath20 vanishes on @xmath21 , there are @xmath0 equivalences @xmath22    for clarity of exposition , we have chosen to write all arguments first whenever @xmath1 is a point , with the case of clean intersection relegated to appendix [ sec : case - clean - inters ] .",
    "the proofs we give all extend straightforwardly to the clean intersection case , so the main point of the appendix is to explain the proper definitions and constructions in the general situation .    at the level of cohomology , theorem [ thm : general_result ]",
    "is not too difficult to prove from poniak s thesis @xcite .",
    "a standard application of weinstein s neighbourhood theorem shows that a neighbourhood of @xmath23 in @xmath11 is symplectomorphic to the result of gluing the cotangent bundles of @xmath2 and @xmath3 along the cotangent bundle of @xmath1 .",
    "the diffeomorphism type of the resulting manifold is called the _ plumbing _ of the two cotangent bundles @xcite . up to an appropriate notion of deformation equivalence which does not affect the fukaya category",
    ", there is a canonical symplectic form on this plumbing .",
    "the experts will observe that the condition that @xmath20 vanish on @xmath21 is stronger than the mere exactness of @xmath2 and @xmath3 .",
    "one may think of it as a strict notion of exactness for the union of @xmath2 and @xmath3 as an immersed lagrangian submanifold of @xmath24 .",
    "for example , as we allow for @xmath1 to be disconnected , our result gives a description of the category generated by a `` cycle '' of lagrangians @xmath25 such that @xmath15 intersects only @xmath26 and @xmath27 with the understanding that the labels are computed @xmath28 .",
    "however , our description is only valid in the case we know in addition that a loop running around this cycle can not bound any holomorphic discs ( for energy reasons ) .",
    "we recall that , in @xcite , ruan extended the degeneration results of fukaya and oh to the case of an immersed lagrangian @xmath29 with double points such that @xmath30 vanishes , and proved that counts of rigid holomorphic discs can be made to agree with counts of gradient trees .",
    "this indicates a straightforward generalisation of theorem [ thm : general_result ] : given two embeddings @xmath31 whose images do not intersect and with isomorphic normal bundles @xmath18 , it is easy to extend the construction of @xmath32 to produce an associative product on the direct sum @xmath33 which satisfies the leibniz rule with respect to the obvious differential .",
    "this algebra is then equivalent , as an @xmath0 algebra , to the lagrangian floer cochains of @xmath4 considered as an immersed lagrangian in the `` self - plumbing '' of its cotangent bundle along @xmath1 .",
    "floer cohomology for immersed lagrangians was described in great generality by akaho and joyce in @xcite , producing an @xmath0 structure on a vector space which , up to choosing different model for a cochain - level theory , is equivalent to the direct sum .",
    "one may interpret our result as a computation , in the exact case , of the @xmath0 structure assigned by akaho and joyce to an immersed lagrangian . indeed",
    ", their @xmath0 structure comes from the count of perturbed holomorphic discs ; the perturbations are necessary because of the abundance of constant discs with marked points which do not form regular moduli spaces as soon as the number of marked points is greater than @xmath34 .",
    "as is often the case with such approaches , it seems impossible to give an explicit direct counts of the number of discs after perturbations .",
    "finally , we note that while every @xmath0 category is abstractly equivalent to a differential graded category , there is no construction which produces a finite dimensional differential graded category when the morphism spaces are finite rank abelian groups .",
    "one consequence of theorem [ thm : general_result ] is the existence of such a finite dimensional differential graded model for fukaya categories in the case of plumbings .",
    "we insist , however , that our construction requires working with cochains on @xmath2 and @xmath3 even if these manifolds happen to be formal ( i.e have the property that their cohomology are quasi - isomorphic to their cochain algebras ) .",
    "as explained in chapter 20 of @xcite , it is already true that one can find @xmath35 exact lagrangians in a twice punctured genus @xmath36 curve , satisfying our exactness condition , such that the subcategory of the fukaya category they generate is not formal ( despite the fact that the circle is formal ) .",
    "i would like to thank paul seidel for answering my many questions about chapter 20 of @xcite .",
    "for the remainder of this paper , we fix a pair of closed smooth manifolds @xmath2 and @xmath3 with base points @xmath37 , and open sets @xmath38 containing @xmath37 . in the most basic situation , @xmath38 is the interior of a closed ( embedded ) ball .",
    "we shall write @xmath39 for the closure of @xmath40 and @xmath41 for the closure of @xmath42 .",
    "in addition , we equip @xmath2 and @xmath3 with simplicial triangulations @xmath43 and @xmath44 , and choose top dimensional simplices @xmath45 and @xmath46 respectively containing @xmath47 and @xmath48 . recall that the condition that a triangulation be simplicial implies that we have an ordering of all vertices ; in particular , @xmath49 has a unique identification @xmath50 with the standard @xmath51-simplex @xmath52 which preserves the ordering ( see pages 102 and 107 of @xcite for a discussion of different notions of triangulations ) .",
    "we begin by constructing a differential graded category with two objects called @xmath2 and @xmath3 and morphisms the simplicial cochain complexes @xmath53 in particular , the rank of @xmath54 is @xmath55 , while the rank of @xmath56 is @xmath57 .",
    "the cochain complexes @xmath58 are differential graded algebras with respect to the cup product ; we shall extend this product to a differential graded composition law by noting that the inclusions of @xmath49 in @xmath59 induce ring homomorphisms @xmath60 we define compositions using cup - product on the left and on the right with the restricted classes @xmath61 since the maps @xmath62 are maps of differential graded algebras , and the leibniz and associativity formulae hold for the cup product and differential on @xmath63 , we readily conclude that the multiplication satisfies the leibniz rule , and moreover defines an associative composition . for example",
    ", we have a commutative diagram @xmath64 \\ar[dd ] \\ar[rd ] & & c^{*}(\\delta ) \\otimes   c^*(\\delta )    \\otimes c^{*}({{\\euscript q}}_1 )   \\ar[dd ] \\ar[dl ] \\\\ &   c^{*}(\\delta ) \\otimes",
    "c^*(\\delta )    \\otimes c^{*}(\\delta ) \\ar[dr ] & \\\\",
    "c^{*}({{\\euscript q}}_2 ) \\otimes   c^*(\\delta )    \\otimes c^{*}(\\delta )    \\ar[rr ] \\ar[ru ] & & c^{*}(\\delta ) } \\ ] ]    in order to define this composition in the other direction , we use the fact that the cup product also makes @xmath65 into a bimodule over @xmath63 .",
    "in particular , we define composition maps @xmath66 again , the proof that these maps satisfy the properties required of a differential graded category follows immediately from the fact that @xmath65 is in fact a differential graded bi - module over @xmath63 ( this is trivial since the differential on this relative cochain group vanishes ) .",
    "finally , the inclusions of @xmath49 in @xmath59 induce maps @xmath67 since @xmath68 has rank @xmath57 , there is an obvious formula for these maps ; the image is simply the @xmath51-dimensional cochain with value @xmath57 on @xmath49 and which vanishes on every other chain .",
    "more conceptually , this map is induced by a composition @xmath69 where the first map is an excision isomorphism . using this ,",
    "we define the final two composition maps @xmath70 there are @xmath71 associativity diagrams whose commutativity remains to be checked . even though the construction is not completely symmetric , we only discuss the following four maps : @xmath72 associativity of the first three of the above operations follows immediately from the property that @xmath65 is a differential graded bi - module over @xmath63 .",
    "the last operation requires in addition the fact that the composition @xmath73 agrees with the natural inclusion of relative cochains into ordinary cochains ( alternatively , one can notice that the two maps we are comparing in equation vanish altogether ) .",
    "we have provided all the necessarily ingredients to construct a differential graded category :    the morphisms in equation , and the composition laws given by equations , , and satisfy the axioms of a differential graded category .",
    "we denote the corresponding @xmath0 category where the differential and the composition are twisted by a sign @xmath74 by @xmath75 .",
    "we shall also need a geometric interpretation of the cup product as an intersection product on the chains of subdivisions dual to the chosen triangulations of @xmath76 .",
    "let us therefore fix such dual subdivisions @xmath77 , whose top dimensional cells are identified , by smooth charts , with polyhedra in @xmath78 .",
    "in particular , the @xmath79-dimensional cells intersect cleanly .",
    "[ rem : sign_difference ] the sign change in is particularly convenient from the point of view of the dual cell subdivision : if we think geometrically , every generator of @xmath80 corresponds to a simplex carrying an orientation , and the differential is the restriction of this orientation to the boundary . if we want to think of the differential @xmath81 on @xmath10 as taking a dual cell to its boundary , we find that the resulting operation differs from the natural restriction of orientations exactly by a sign @xmath82 . the additional sign of @xmath57 comes from the fact that an outward pointing vector at the boundary of a cell corresponds to an inward pointing vector from the dual subdivision s point of view .",
    "we shall also require that the identification @xmath83 map the cells of @xmath84 to the corresponding cells of @xmath85 .",
    "in particular , we obtain a subdivision dual to the trivial triangulation of the standard simplex @xmath52 .",
    "given a cell @xmath86 of @xmath59 , we write @xmath87 for the dual cell of @xmath88 , as well as for the dual generator of @xmath58 .",
    "a slight generalization of the main observation in appendix e of @xcite is the existence of vector fields @xmath89 on @xmath15 which generate flows @xmath90 such that the following lemma holds    [ lem : cup_is_intersection ] whenever @xmath86 , @xmath91 , and @xmath92 are cells of @xmath59 such that @xmath93 there is a smooth map @xmath94 \\to q_i\\ ] ] such that the image of @xmath95 agrees with @xmath96 for any sufficiently small @xmath97 .    since @xmath98",
    "either vanishes or is of the form @xmath99 for some cell @xmath92 , we conclude that the cup product @xmath98 vanishes whenever @xmath96 is empty for sufficiently small @xmath97 , and we interpret the above lemma to state that the cup product is given by the intersection product of the dual cells , provided that they are appropriately perturbed .",
    "the construction of the vector fields @xmath89 is elementary ; since @xmath59 is a simplicial triangulation , its vertices are ordered , hence so are the top dimensional cells of dual subdivision .",
    "we may choose @xmath89 to be any vector field satisfying the following property    a vector field @xmath89 is said to be * compatible with the simplicial triangulation * if along each cell @xmath87 the restriction of @xmath89 lies in the tangent space of the top dimensional cell which is minimal among those adjacent to @xmath86 .    by abuse of language",
    ", we shall often call such vector fields * simplicial*. the existence of such a vector field follows from a local argument described in appendix e of @xcite . since the above condition is respected by taking positive linear combinations , we may and shall require the restrictions of @xmath100 and @xmath101 to @xmath102 and @xmath103 to be intertwined by the maps identifying these two simplices .",
    "figure [ fig : simplicial_vector_field ] shows the restriction of such a vector field to the @xmath57-skeleton of the dual subdivision of a @xmath36 dimensional simplex .    in terms of the dual subdivisions",
    "@xmath88 , the restriction of cochains corresponds to taking the inverse image of a cell , while the map @xmath104 takes the vertex of the subdivision dual to @xmath52 to its image under the inclusions into @xmath15 .",
    "since composition maps in the category @xmath75 are defined using these operations together with the cup product , lemma [ lem : cup_is_intersection ] provides an intersection theoretic interpretation of this category .      fix a pair of open sets",
    "@xmath105 together with diffeomorphisms @xmath106 where @xmath39 and @xmath41 are manifolds with boundary ( there is no gain in notational simplicity in assuming anything more ) .",
    "to make the connection with the rest of the paper , we shall later restrict to the situation where @xmath40 and @xmath107 are both balls , corresponding to neighbourhoods in @xmath2 and @xmath3 of the point @xmath108 along which we shall perform the plumbing .    the identification between these manifolds shall be fixed throughout the following discussion , and we use it to define the space @xmath109 which is a non - hausdorff smooth manifold whose locus of points which can not be separated from each other is the union @xmath110 . by construction , this space admits canonical maps from the manifolds @xmath39 and @xmath41 as well . for the remainder of the paper , we sometimes also write @xmath111 for @xmath15 as a convenient notational device .",
    "we assume that we have chosen riemannian metrics on @xmath15 whose restrictions to @xmath38 are intertwined by these diffeomorphisms , and we fix a choice of morse - smale functions @xmath112 such that @xmath113 and @xmath114 are respectively inward and outward pointing on the boundary .",
    "in particular , we also choose functions @xmath115 and @xmath116 on @xmath2 and @xmath3 .",
    "writing @xmath117 for morse cochains , we shall define an @xmath0 category with morphism space @xmath118 where @xmath119 is the orientation line associated to @xmath120 , i.e. the quotient of the free abelian group generated by a choice of orientation of the stable manifold of @xmath121 by the relation that the sum of generators associated to opposite orientations vanishes .",
    "this rank @xmath57 group has degree equal to the dimension of the stable manifold of @xmath121 .",
    "the differential counts negative gradient lines of @xmath122 ; the detailed description is given in section [ sec : orientations ] .",
    "to define higher compositions in this category , we consider moduli spaces of gradient trees in @xmath4 which are defined later in this section .",
    "given any ribbon tree @xmath123 with @xmath124 leaves , we shall assume that one of the leaves has been distinguished as outgoing , which determines the unique ordering on the remaining @xmath81 leaves ( called incoming ) illustrated in figure [ fig : ordering_convention_trees ] .",
    "we shall write @xmath125 for the set of edges of @xmath123 ( including the external edges ) .",
    "our conventions are that all edges include their endpoints and , except for the outgoing edge which is always infinite , are allowed to have length @xmath126 .",
    "the edges adjacent to any vertex of a ribbon tree @xmath123 are by definition cyclically ordered , and we define a labelling @xmath127 of the edges @xmath128 by elements of the set @xmath129 to be compatible with the cyclic ordering if @xmath130 whenever @xmath131 follows @xmath132 with respect to the cyclic ordering at some vertex .",
    "the following result may be proved by induction , or by embedding @xmath123 in a disc labelling the complementary regions appropriately .",
    "a sequence @xmath133 determines a unique labelling of all edges of @xmath123 which is compatible with the cyclic ordering , such that the incoming leaves are labelled by @xmath134 .",
    "moreover , the outgoing leaf is labelled by @xmath135 .    in order to resolve potential problems with transversality in defining the morse category ,",
    "we introduce perturbation data , following seidel s construction for lagrangian floer theory in @xcite .",
    "let us illustrate the case of the cup product on @xmath136 .",
    "given three critical points @xmath137 , @xmath138 and @xmath139 , the @xmath137 component of @xmath140,[x_1 ] ) $ ] should count triple intersections between the ascending manifold of @xmath137 , and the descending manifolds of @xmath138 and @xmath139 .",
    "this space is necessarily empty unless @xmath141 , in which case the intersection is not transverse .",
    "this triple intersection admits a description as the moduli space of maps from the unique trivalent tree with three infinite external edges , which converge at the respective ends to the critical points @xmath137 , @xmath138 and @xmath139 , and which on each edge solve the gradient flow equation for the function @xmath115 .",
    "we shall perturb this moduli space by changing the differential equation obeyed by each edge . concretely , as each edge is isometric to @xmath142 , our perturbation will vanish on @xmath143 and will be essentially arbitrary on @xmath144 $ ] . integrating the perturbed gradient flow along the interval",
    "@xmath144 $ ] , we obtain a triple @xmath145 , @xmath146 , and @xmath147 of diffeomorphisms of @xmath2 .",
    "changing our perspective once again , we interpret the moduli space of perturbed gradient trees as the intersection of the images under @xmath148 of the appropriate ascending and descending manifolds . as the diffeomorphisms @xmath148 are essentially arbitrary ( and independent of each other ) we achieve transversality ( and hence an honest count ) upon perturbing the gradient flow .",
    "one must still prove that this product is the quadratic term of an @xmath0 structure , which requires defining compatible perturbations of the gradient flow equation on higher dimensional moduli spaces of trees .",
    "let us return to the general discussion , and fix a sequence of labels @xmath149 as above :    [ defin : pert_datum ] a * gradient flow perturbation datum * on @xmath150 is a choice , for each edge @xmath128 of a family of vector fields @xmath151 which vanish away from a bounded subset of @xmath132 and such that the restriction of the vector field @xmath152 to the boundary of @xmath153 is ( i ) is outward pointing if @xmath154 and ( ii ) inward pointing @xmath155 .",
    "since the gradient vector fields of @xmath113 and @xmath114 are respectively inward and outward pointing , the vanishing perturbation datum satisfies the above properties .",
    "we shall now specialise and consider the trees which control the @xmath0 structure on the morse category .",
    "let us write @xmath156 for the moduli space of * stasheff trees * @xmath157 , i.e. metric ribbon trees with @xmath124 infinite external edges , and @xmath158 for the moduli space of trees whose inputs are labelled by the successive elements of a sequence @xmath149 ( this is a copy of @xmath159 ) . by allowing singular trees ,",
    "we obtain compactifications @xmath160 and @xmath161 which are in fact polyhedra .",
    "the collection of spaces @xmath160 for varying @xmath81 were shown by stasheff to form an @xmath0 operad ; i.e. to control @xmath0 algebras .",
    "in particular whenever @xmath162 , we may construct a singular stasheff tree with @xmath81 inputs by attaching the output of a singular tree with @xmath163 inputs to any of the inputs of an element of @xmath164 .",
    "this construction yields a collection of @xmath165 maps @xmath166 whose images for all pairs @xmath167 cover the boundary of @xmath168 .",
    "this familiar construction can also be done with labels : if @xmath169 and @xmath170 are sequences such that @xmath171 is the label for the output of a tree in @xmath172 , we obtain a natural map @xmath173 where @xmath174 and the boundary of @xmath161 is again covered by the images of such maps .",
    "a * universal consistent perturbation datum for trees * is a choice @xmath175 of a smooth family of perturbation data for elements of @xmath161 for every sequence @xmath149 , which is compatible with the gluing maps and is invariant under the automorphisms of each tree .",
    "the meaning of a smoothness is clarified in definition [ defin : smooth_pert_data_stasheff ] . a priori , each edge in a singular ribbon tree is equipped with at least two perturbation data : one comes from the singular tree , the other from the ( smooth ) tree wherein the edge lies .",
    "compatibility with the maps is the requirement that these two perturbation data agree .",
    "the condition of invariance implies that the perturbation datum vanishes whenever there is only one input ( because the @xmath5 translation symmetry forces a non - vanishing perturbation datum to have non - compact support , contradicting the boundedness requirement in definition [ defin : pert_datum ] ) .",
    "every edge @xmath132 of a stasheff tree is isometric to a segment in @xmath5 .",
    "writing @xmath176 for the induced coordinate , we define a ( perturbed ) gradient flow line on @xmath132 to be a map @xmath177 from @xmath132 to @xmath178 which is a solution to the differential equation @xmath179    a * perturbed gradient tree * @xmath180 on @xmath157 with labels @xmath149 is a continuous map @xmath181 whose restriction to every edge @xmath128 lifts to a map @xmath182 which is a gradient trajectory of @xmath183 .",
    "one usually imposes a balancing condition at vertices of @xmath123 ; i.e. the sum of all vector fields associated to edges adjacent to @xmath184 is required to vanish .",
    "this constraint is not part of our setup for gradient trees , and in fact our choices of perturbation data are such that we can choose the vector fields defined by the various edges which share a common vertex to have arbitrary and independent values , as long as the conditions on the boundary of @xmath39 or @xmath41 , described in definition [ defin : pert_datum ] , are satisfied .    if @xmath185 is a sequence of critical points of the functions @xmath186 , and @xmath137 is a critical point of @xmath187 , and define @xmath188 to be the set of isomorphism classes of perturbed gradient trees @xmath180 such that the image of the @xmath189@xmath190 incoming leaf is @xmath191 , and the image of the unique outgoing leaf is @xmath137 .",
    "this moduli space admits a bordification @xmath192 by adding all singular gradient trees .",
    "we begin by showing that these moduli spaces are compact :    [ lem : compactness_stasheff ] given @xmath137 a critical point of @xmath193 , and @xmath194 critical points of the functions @xmath195 , the moduli space @xmath196 is compact .",
    "when studying morse theory on a manifold with boundary , one must first show that gradient trees can not escape to the boundary :    there exists a neighbourhood of the boundary of @xmath197 whose image in @xmath4 is disjoint from the image of every edge @xmath132 labelled by @xmath197 under a gradient tree @xmath198    the assumption that the perturbation data are consistent implies that there is a uniform ( i.e. independent of @xmath157 in a fixed space @xmath199 ) neighbourhood of the boundary @xmath39 ( respectively @xmath41 ) in which the perturbed gradient flow associated to every edge labelled by @xmath200 ( or @xmath201 ) of a tree in @xmath199 is inward ( respectively outward ) pointing in the sense that it increases the distance to the boundary . in particular , the gradient flows of @xmath113 and @xmath114 are themselves inward or outward pointing in this neighbourhood . by shrinking these neighbourhoods",
    ", we may assume that they are identified by the fixed diffeomorphism @xmath202 .",
    "we shall prove that the images of edges labelled by @xmath39 or @xmath41 can not intersect this neighbourhood .",
    "the case of edges labelled by @xmath41 is simplest .",
    "note that if @xmath132 is such an edge , then it must lie on a descending arc @xmath203 such that @xmath204 is an incoming leaf , and each edge of the arc is labelled by @xmath41 .",
    "assuming by contradiction that the image of @xmath132 intersects the neighbourhood of the boundary where the perturbed negative gradient flow points inward , we conclude that @xmath205 is contained in this fixed neighbourhood .",
    "this implies that the image of this incoming leaf is a critical point which is also contained in this neighbourhood , which contradicts the fact that @xmath114 has no critical points near the boundary .",
    "if an edge is labelled by @xmath39 , there are two possibilities : either ( i ) there is a descending arc @xmath206 with @xmath207 the outgoing leaf such that all edges succeeding @xmath132 are labelled by @xmath39 or ( ii ) there exists a descending arc @xmath208 all of whose edge are labelled by @xmath39 and an ascending arc @xmath209 whose edges are labelled by @xmath41 such that @xmath207 and @xmath131 are adjacent . using the same argument as in the previous case , we conclude that the critical point of @xmath113 ( or @xmath114 ) whither @xmath207 ( or @xmath210 ) limits must be contained in the previously fixed neighbourhood of the boundary of @xmath41 ( or @xmath39 ) contradicting our assumptions that the gradient flow may not vanish in these regions .",
    "this implies that whenever the image of an edge under a family of gradient trees converges toward the singularities of @xmath4 , the edge must be labelled by @xmath211 or @xmath212 , so all analysis can be done locally in either manifold .",
    "the standard proof of compactness for gradient trees for compact smooth riemannian manifolds can then be used to prove the desired result , see @xcite .",
    "the following is the main result proved in section [ app : stasheff ] :    [ lem : existence_morse_category ] for a generic choice of universal perturbation data , all spaces @xmath213 are naturally compact topological manifolds with boundary of dimension @xmath214    technically , @xmath4 is a smooth non - hausdorff manifold , with the set of points which can not be separated from each other diffeomorphic to @xmath215 .",
    "any local construction for smooth manifolds is valid on @xmath4 as long as it performed away from this subset .",
    "in addition , if we are working near this subset , and we have additional data that distinguishes one of the sheets , then we may again use standard constructions from the study of smooth manifolds . note that this is",
    "precisely what happens if we are considering an edge of a gradient tree labelled by @xmath216 whose image in @xmath4 happens to intersect the non - hausdorff locus ; by definition , we have a lift to the relevant ( usual ) manifold @xmath15 .",
    "the key component in the proof of lemma [ lem : existence_morse_category ] is the claim appearing in lemma [ lem : compactness_stasheff ] which asserts that there is a neighbourhood of the non - hausdorff locus of @xmath4 which ( perturbed ) gradient edges labelled by @xmath197 with @xmath217 can not intersect if they form part of a gradient stasheff tree .    given a sequence @xmath218 such that @xmath219 we conclude that the moduli space @xmath220 consists of finitely many points .",
    "the description of this moduli space as a fibre product determines an isomorphism @xmath221 where @xmath222 is the product of the descending manifolds of the critical points @xmath191 .",
    "our conventions are explained in section [ sec : orientations ] .",
    "whenever @xmath180 is a rigid tree in @xmath223 , the above isomorphism and equation give a natural map @xmath224 we define the @xmath81@xmath190 higher product @xmath225 to be a sum over the induced maps @xmath226 on orientation bundles @xmath227 \\otimes \\cdots \\otimes [ x_{1 } ]   \\mapsto \\sum_{\\stackrel { x_0}{\\psi \\in { { { \\mathcal t}}}(x_0 , { \\vec{x}^{\\ , \\ ! } } ) } }   ( -1)^{(n+1 ) ( \\deg(x_0 ) + \\dagger ( { \\vec{x}^{\\ , \\ ! } } ) ) } \\mu_{\\psi }   ( [ x_d ] \\otimes \\cdots \\otimes [ x_{1}])\\ ] ] where the sign is given by : @xmath228    the following result follows directly from proposition [ lem : existence_morse_category ] and the proof of the analogous result in appendix c of @xcite .    the operations @xmath229 satisfy the axioms of an @xmath0 category .    in particular , we define the @xmath0 category @xmath19 to have objects and morphisms as in equation , and ( higher ) compositions defined by the operations @xmath229 .",
    "the orientation convention used in @xcite differs in a very minor way from the one introduced here .",
    "in particular , equation is a simplification of equation ( c.2 ) in the previous paper .      on @xmath230",
    "equipped with the standard symplectic form , complex structure , and with the coordinates @xmath231 , the lagrangians @xmath232 intersect transversely at the origin .",
    "we define the plumbing @xmath233 to be the open neighbourhood of radius @xmath57 of the union of @xmath234 and @xmath235 ( in the standard euclidean metric ) .",
    "we shall now use this local model to construct a liouville manifold by gluing cotangent bundles : pick a riemannian metric on @xmath15 whose restriction to a neighbourhood of @xmath37 is isometric to the ball of radius @xmath236 in @xmath78 with @xmath37 mapping to the origin and @xmath38 to the ball of radius @xmath36 .",
    "we obtain a fixed symplectomorphism between an open subset of @xmath237 and those points in @xmath238 consisting of cotangent vectors lying over a point in @xmath239 of euclidean norm bounded by @xmath236 . by identifying the points of @xmath240 and @xmath241",
    "whose images agree in @xmath242 we obtain a symplectic manifold @xmath243 which is diffeomorphic to the classical plumbing construction in differential topology @xcite .",
    "we shall write @xmath108 for the image of @xmath47 and @xmath48 in @xmath24 , and @xmath244 for the fixed neighbourhood of @xmath108 in @xmath24 along which the gluing is performed and @xmath245 and @xmath246 for the two components of the complement of @xmath244 in @xmath24 ( these are symplectomorphic to the unit disc ( cotangent ) bundles of the manifolds obtained by removing balls from @xmath2 and @xmath3 ) .",
    "since the boundary of @xmath24 has corners , it is convenient to define a smooth submanifold @xmath247 as follows : choose a convex smooth function @xmath248 which is a small @xmath249 perturbation of the maximum of the coordinates , and which agrees with this maximum away from a neighbourhood of the diagonal .",
    "writing the squared euclidean norms as @xmath250 we consider @xmath251    an example for @xmath252 is shown in figure [ fig : inner_manifold ] .",
    "the smoothing parameter for @xmath92 should be sufficiently small that the following properties hold :    1 .",
    "every point in @xmath253 lies within @xmath254 of a point in @xmath255 .",
    "2 .   if @xmath256 , then @xmath257 if and only if @xmath258 ( and vice versa with @xmath121 replaced by @xmath259 ) .    in words",
    "the second condition says that , away from the disc of radius @xmath254 in @xmath260 , @xmath261 agrees with the subset of the cotangent bundle consisting of vectors whose length is bounded by @xmath262 .",
    "writing @xmath263 for the set of vectors in @xmath264 of length bounded by @xmath262 which project to points in @xmath15 of distance greater than @xmath254 from @xmath37 , we define a smooth manifold with boundary @xmath265    the symplectic form on @xmath24 can be written as the differential of a primitive @xmath266 for which the embedding of each @xmath15 is exact ( i.e. , the restriction of @xmath266 to @xmath15 is the differential of a function ) .",
    "moreover , the tangent space of @xmath24 is equipped with a homotopy class of complex volume forms ( with respect to any almost complex structure compatible with the symplectic form ) whose restriction to the cotangent bundle of @xmath15 is homotopic to a form obtained by complexifying a volume form on @xmath15 . in particular , @xmath15 admits a _ grading _ so that the intersection point between @xmath2 and @xmath3 is assigned a degree ; we omit the choice of grading from our notation , but note that it may be normalised so that @xmath267    the category @xmath268 is the full subcategory of the fukaya category of @xmath24 whose objects are @xmath2 and @xmath3 .    the existence of an @xmath0 category with exact lagrangians as objects follows from @xcite .",
    "the construction depends on certain choices of almost complex structures and hamiltonian perturbations , but the category is independent , up to @xmath0 equivalence , of these choices . in order to fix these choices ,",
    "let us consider a second subdomain @xmath269 of @xmath24 containing @xmath270 , whose construction we shall specify in section [ sec : comp - curv - leaves ] ( we shall only use it to prove compactness for a certain moduli space of holomorphic discs entering in the construction of the functor from floer to morse theory ) .",
    "we shall now pick floer data from the following spaces : @xmath271 in the next section we briefly recall how to use perturbations of the @xmath272 equation coming from families valued in @xmath273 and @xmath274 in order to construct @xmath268 .",
    "we follow the discussion in @xcite , keeping our notation as close as possible .",
    "first , we must define the morphism spaces ( i.e. , floer complexes )    [ lem : floer_data ] a * floer datum * for each pair @xmath275 , is the choice of ( i ) a family @xmath276}$ ] of almost complex structures and ( ii ) a function @xmath277 .",
    "this choice determines a perturbed @xmath272 equation on the strip @xmath278 where @xmath279 is the hamiltonian flow of @xmath280 , and the @xmath281 part is taken with respect to the @xmath97-dependent almost complex structure @xmath282 .",
    "given a pair @xmath283 of time-@xmath57 chords the hamiltonian flow of @xmath280 with endpoints on @xmath284 and @xmath15 , we write @xmath285 \\times { { \\mathbb r}}\\to m |{\\bar{\\partial}}^{i , j } u = 0 , \\ , u(0,s ) \\in q_i , \\ , u(1,s ) \\in q_j , \\\\",
    "\\lim_{s \\to + \\infty } u(s , t ) = p_{0 } , \\ , \\lim_{s \\to - \\infty } u(s , t)= p_{1 } \\ } / { { \\mathbb r}}\\end{gathered}\\ ] ] where the @xmath5 action comes from translation on the source . using the fact that the complex structures which are allowed are of contact type near @xmath286 , one can use lemma 7.2 of @xcite ( see also lemma [ lem : convexity_weak_assumptions ] bellow ) to prove the analogue of gromov compactness and conclude :    [ lem : strips_moduli_spaces_cpact ] if the image of @xmath15 under the time-@xmath57 hamiltonian flow generated by @xmath280 is transverse to @xmath284 , then a generic choice of family @xmath287 ensures that all moduli spaces of gradient trajectories @xmath288 for @xmath289 are regular , and hence of expected dimension @xmath290 moreover , the gromov bordification @xmath291 is compact , and whenever @xmath292 , it is a manifold with boundary @xmath293    the floer chain complex @xmath294 is a direct sum of free abelian groups @xmath295 associated to each time-@xmath57 chord @xmath296 from @xmath15 to @xmath284 for the hamiltonian @xmath280 . as the notation suggests , @xmath295 is the orientation line associated to a rank @xmath57 space @xmath297 , whose construction we shall not recall .",
    "the key fact we use is the existence of a canonical isomorphism @xmath298    in general , the degree @xmath299 of a generator of @xmath300 is determined by an additional choice of grading on @xmath15 and @xmath284 .",
    "this choice has been fixed ( up to a global shift ) by requiring that the rank @xmath57 group @xmath301 is supported in degree @xmath126 .",
    "whenever @xmath302 , @xmath303 is canonically trivialised by the translative action of @xmath5 , so equation naturally assigns to each element @xmath304 of @xmath305 a homomorphism @xmath306 the sum of all such homomorphisms is the matrix coefficient of @xmath307 and @xmath308 in the differential in the floer complex .",
    "writing @xmath309 $ ] for a generator of @xmath310 , we obtain : @xmath311 ) = \\sum_{u \\in { { \\mathcal r}}(p_0,p_1)/ { { \\mathbb r } } } ( -1)^{\\deg(p_1 ) }   \\mu_{u}^{f } ( [ p_1 ] ) \\ ] ]    to define the @xmath0 structure , we must choose perturbation data for moduli spaces of discs with an arbitrary number of marked point .",
    "we write @xmath312 for the moduli space of holomorphic discs with @xmath124 marked points , @xmath81 of which are marked as incoming , and , given a sequence @xmath313 , @xmath314 for a copy of the moduli space @xmath312 in which each incoming arc is labelled by an elements of the set @xmath129 ; in particular , the incoming marked points are labelled by pairs @xmath315 , and the outgoing marked point by @xmath316 .",
    "this space admits a compactification @xmath317 which is a manifold with corners whose points are in bijective correspondence to @xmath161 , and in the setup of equation , is equipped with maps @xmath318 which cover its boundary .",
    "in addition , we choose strip - like ends @xmath319 near the marked points of all surfaces @xmath320 in @xmath317 ; this choice may be done globally in a smooth family over the moduli space .",
    "a * perturbation datum * on @xmath320 is a choice of an @xmath274 valued @xmath57-form @xmath321 on @xmath320 and a function @xmath322 .",
    "the pull - backs of these data under a strip - like end corresponding to a marked point labelled @xmath275 must agree with the floer data for the pair @xmath275 .",
    "a * universal perturbation datum for discs * @xmath323 is a choice of perturbation data for all elements of @xmath317 , varying smoothly over the moduli space , and which is consistent ; i.e. compatible with the maps .",
    "the choice of a perturbation datum on @xmath320 defines a perturbed @xmath272 equation analogous to : the hamiltonian vector field associated to an element of @xmath274 and the choice of @xmath321 define a vector - field valued @xmath57-form @xmath324 on every surface , so we consider the operator @xmath325 where the @xmath281 part is taken with respect to the almost complex structure @xmath326 on the target ( and of course the underlying complex structure on @xmath320 on the source ) .    in particular ,",
    "given a universal perturbation datum , and a sequence @xmath327 with @xmath328 a chord from @xmath329 to @xmath330 , and @xmath331 for @xmath332 chords from @xmath333 to @xmath334 ( for the appropriate hamiltonians ) , we define @xmath335 where the condition on the boundary is more precisely stated as follows : the image of a segment in @xmath336 labelled by @xmath337 is contained in @xmath338 .",
    "the following result generalises lemma [ lem : strips_moduli_spaces_cpact ] to discs with multiple inputs , and follows from the results proved in @xcite :    for a generic choice of perturbation data , all moduli spaces @xmath339 are regular , and hence have the expected dimension @xmath340 their gromov bordifications @xmath341 are compact , and those which have expected dimension @xmath57 are manifolds with boundary .",
    "the gluing theorem for elliptic operators on the disc gives an isomorphism @xmath342 where @xmath343 is the top exterior power , and hence every rigid holomorphic disc @xmath304 determines an isomorphism @xmath344 writing @xmath345 for the induced map on the orientation lines , we use seidel s conventions , and define the @xmath81@xmath190 higher product @xmath346 as a sum of the contributions of all holomorphic discs @xmath347 \\otimes \\cdots \\otimes [ p_{1 } ] \\mapsto ( -1)^{\\dagger ( { \\vec{p}^{\\ , \\ ! } } ) } \\sum_{\\stackrel { p_0}{u \\in { { \\mathcal r}}(p_0 , { \\vec{p}^{\\ , \\ ! } } ) } } \\mu_{u }   ( [ p_d ] \\otimes \\cdots \\otimes [ p_{1}])\\ ] ] where the sign is given by @xmath348",
    "in this section , we construct an @xmath0 equivalence @xmath349 the main ingredients in the construction of such an equivalence is the interpretation of the cup product as an appropriate ( perturbed ) intersection product discussed in section [ sec : simp ] , and a moduli space of shrubs @xmath350 introduced in @xcite ; it seems that our spaces are combinatorially equivalent to those later introduced by forcey @xcite under the name composihedra .",
    "these moduli spaces are quotients of multiplihedra , and control @xmath0 functors from differential graded algebras to @xmath0 algebras . from now on",
    ", we shall assume @xmath351 in particular for @xmath217 , we obtain a cellular subdivision @xmath352 of @xmath197 , which is transverse to the boundary , by pulling back the dual subdivision to @xmath353 , and the diffeomorphism @xmath202 respects this cellular subdivision .    we shall briefly review the construction of @xmath350 , and focus on the choices of perturbation data which are necessary to bypass the transversality problems that would arise if we use only gradient flow lines as in @xcite .    the moduli space of * shrubs * @xmath350 is the space of isomorphism classes of metric ribbon trees @xmath354 with one infinite outgoing edge , and @xmath81 finite incoming edges whose endpoints are equidistant to the outgoing edge .",
    "the moduli space of shrubs admits a natural compactification @xmath355 by allowing finite edges to become infinite , or incoming edges to shrink to @xmath126 length .",
    "the property of equidistance required of the outgoing leaves implies that whenever a sequence in @xmath350 converges to a point on the boundary where the length of some finite edge becomes infinite , every path from the outgoing leaf to an incoming one must contain such an edge .",
    "we can reconstruct such limit points as follows : whenever @xmath356 we obtain a singular shrub by attaching the outputs of @xmath357 shrubs ( the @xmath189@xmath190 shrub having @xmath358 inputs ) to a stasheff tree with @xmath357 inputs .",
    "this construction defines a map @xmath359 similarly , whenever the length of some incoming edge shrinks to @xmath126 , there must be at least one other ( adjacent ) edge which is also collapsed , so that we have for each integer @xmath189 between @xmath57 and @xmath360 a map @xmath361 obtained by grafting a pair of edges of length @xmath126 at the @xmath189@xmath190 external vertex .",
    "the following result appears in appendix b of @xcite :    the moduli space @xmath355 is a compact manifold with boundary whose boundary is covered by the images of the maps and .    as in the previous section",
    ", a sequence @xmath149 induces a unique labelling , compatible with the cyclic order , of all edges by pairs @xmath362 , such that the incoming edges are labelled by @xmath315 .",
    "moreover , the maps and have their analogues for labelled shrubs @xmath363 where the labels on the output of a shrub in @xmath364 agree with the labels of the @xmath189@xmath190 incoming leaf of a stasheff tree in @xmath365 .",
    "a choice of @xmath149 determines a gradient flow equation on every edge of a shrub @xmath354 , which we perturb as follows :    a * universal consistent perturbation datum for shrubs * is a choice @xmath366 of a smooth family of perturbation data on @xmath367 which are compatible with the maps and .",
    "the discussion of smoothness is relegated to section [ app : stasheff ] .",
    "recall that the definition of a perturbation datum requires that the resulting perturbed negative gradient flow be outward ( respectively inward ) pointing on the boundary of @xmath39 ( respectively @xmath41 ) .",
    "the choice of dual cell subdivision gives another condition    a universal perturbation datum is * compatible with @xmath368 * if , whenever @xmath369 and @xmath370 are successive incoming leaves of length @xmath126 in a shrub @xmath354 , the vector field @xmath371 defined on the intersection of the images of @xmath372 and @xmath373 in @xmath4 is simplicial .    by condition",
    "the behaviour of the ( perturbed ) gradient flow near the boundary is compatible with a requirement that the vector field be simplicial .",
    "indeed , the restriction of the tangent space of @xmath197 to every cell @xmath374 of @xmath352 contains an open cone @xmath375 consisting of vectors pointing in the direction of the top dimensional cell adjacent to @xmath374 which is minimal with respect to the ordering ; the simplicial condition is the requirement that the restriction of a vector field to @xmath374 lie in @xmath375 . as the boundary of @xmath375",
    "is covered by the tangent spaces of the codimension @xmath57 faces meeting at @xmath374 , @xmath376 is included in its closure .",
    "since @xmath377 intersects @xmath374 transversely , we conclude that the tangent space of the boundary separates @xmath375 into two non - empty open components . assuming that @xmath378 , @xmath379 and @xmath380 have been chosen already",
    ", we can always choose @xmath381 deep inside the appropriate cone so that is a simplicial vector field .",
    "there is a non - empty open subset of the space of universal consistent perturbation data for shrubs which consists of data that are compatible with @xmath368 .",
    "since universal perturbation data are constructed inductively , it suffices to see that the compatibility condition on @xmath382 does not restrict the choice of perturbation data for @xmath383 whenever @xmath384 is a subset of @xmath149 .",
    "this is essentially obvious since our perturbation data on each edge are chosen independently of each other , and the compatibility condition restricts edges in @xmath382 which do not exist in @xmath383 .    from now on when we speak of a universal perturbation datum for shrubs , we shall assume that it is compatible with @xmath368 . with the choice of such a datum , we can now define the moduli spaces which shall be used to construct the functor of equation .",
    "let us write @xmath385 for a sequence of cells @xmath386 , and @xmath137 for a critical point of @xmath193 :    [ defin : shrub_map ] the moduli space @xmath387 of ( perturbed ) gradient shrubs with inputs @xmath388 and output @xmath137 is the set of maps @xmath389 such that ( i ) each edge @xmath132 of @xmath390 lifts as a perturbed gradient flow segment to the labelling manifold @xmath153 , ( ii ) the lift of the outgoing leaf is the critical point @xmath121 and ( iii ) the lift of the @xmath189@xmath190 incoming leaf lies on @xmath391 .    the moduli space @xmath387 admits a natural stratification coming from the stratification of @xmath350 by the topological type of the tree , and a bordification @xmath392 by allowing edges to become infinite . in particular",
    ", we have a subset @xmath393 consisting of maps whose domain lies in the image of the inclusion of equation ; i.e. singular shrubs whose @xmath189 and @xmath394@xmath395 incoming edges both have length @xmath126 .",
    "[ lem : simplicial_perturbation_shrubs_gives_cup ] if the cup product of @xmath396 and @xmath397 vanishes , then there is a neighbourhood of the image of @xmath398 in @xmath399 whose inverse image under the forgetful map @xmath400 is empty . in particular , this stratum of @xmath401 does not lie in the closure of the top dimensional part of the moduli space @xmath402 .",
    "the proof is completely local .",
    "a slight generalisation of lemma [ lem : cup_is_intersection ] , implies that the condition that the cup product of @xmath396 and @xmath397 vanish is equivalent to the absence of intersection points between the images of @xmath396 under a flow @xmath403 and @xmath397 under a flow @xmath404 , whenever @xmath403 and @xmath404 are generated by sufficiently small vector fields @xmath405 and @xmath406 whose difference is compatible with the simplicial triangulation . if @xmath407 is a singular shrub with sufficiently short incoming edges @xmath408 and @xmath370 , the flows obtained by integrating the perturbed gradient vector field along these edges satisfy this property due to our assumption that the perturbation datum @xmath409 is smooth and compatible with the subdivision @xmath368 .",
    "the desired result follows immediately .",
    "we also need a compactness result analogous to lemma [ lem : compactness_stasheff ]    [ lem : compactness_shrubs ] given @xmath137 a critical point of @xmath410 , and @xmath411 cells of the subdivisions @xmath412 , the moduli space @xmath413 is compact .",
    "again , it suffices to prove that no edge labelled by @xmath39 or @xmath41 may escape to the boundary , which can be done in three case , of which we explain only one .",
    "we fix a neighbourhood of the boundary of @xmath41 which does not intersect the cell dual to the interior of @xmath52 . assuming that the image of an edge @xmath132 labelled by @xmath41 intersects this neighbourhood , we follow an ascending arc all of whose edges are labelled by @xmath41 , and derive the contradictory conclusion that an input cells labelled by @xmath200 intersects a neighbourhood of the boundary of @xmath41 .    in section [ app : stasheff ]",
    ", we explain how to prove :    [ lem : moduli_shrubs_nice_manifold ] @xmath392 is compact , and for generic universal perturbation data , all strata are smooth manifolds of the expected dimension .",
    "moreover , the closure of the top - dimensional strata is a compact manifold with boundary of dimension @xmath414 which we denote @xmath415 .",
    "we now restrict attention to the case where the moduli space of shrubs is rigid , i.e. to a sequence of cells @xmath388 and a critical point @xmath137 such that @xmath416 the description of the moduli space of shrubs as a fibred product ( see section [ sec : orienting_maps ] ) gives an isomorphism @xmath417 where the last factor on the right hand side is a tensor product @xmath418 using the isomorphism @xmath419 we conclude that a rigid shrub @xmath420 determines an isomorphism @xmath421 writing @xmath422 for the induced map on the orientation line , the @xmath81@xmath190 order map in our functor from the simplicial to the morse category is defined via the formula @xmath423 where the sign @xmath424 is determined by a choice of orientation on the moduli of shrubs . with our sign conventions",
    ", we would find @xmath425    to illustrate the case of one input , let us fix a simplex @xmath426 of @xmath427 , and a critical point @xmath137 of @xmath122 such that @xmath428 and @xmath429 intersect transversely . at every such intersection point @xmath180 , we have an isomorphism @xmath430 which , upon using the decomposition yields an isomorphism @xmath431 the sign from equation is equal to @xmath432 in this case , which determines the contribution of @xmath180 to the map @xmath433    to prove that this is a chain map , we must consider , as usual , @xmath57-dimensional moduli spaces of shrubs with one input .",
    "this occurs whenever we are given a critical point @xmath137 such that @xmath434 since the space @xmath435 is the closure of the intersection of @xmath428 with @xmath429 , its boundary is easily seen to consist of two strata : either ( i ) a family of gradient trajectories from @xmath137 escapes to a cell @xmath436 on the boundary of @xmath428 , or ( ii ) a family of such trajectories converges to a broken one , corresponding to the concatenation of an ascending gradient flow line from @xmath137 to a critical point @xmath138 of degree equal to @xmath437 , followed by a gradient flow line from @xmath138 to @xmath428 .",
    "these two configurations correspond to the two terms whose equality implies that @xmath438 is a chain map : @xmath439 to prove the correctness of the signs , we note that we have a natural isomorphism @xmath440 which we must compare with the isomorphisms and when we pass to the compactification @xmath435 .",
    "first , we obtain an isomorphism @xmath441 from equation and .",
    "the result of taking the tensor product with the two sides of equation gives : @xmath442 the reader may easily check that the gluing theorem for gradient flow lines gives an isomorphism @xmath443 near a broken trajectory , with the positive direction in @xmath5 corresponding to the _ outward _ pointing normal vector . in order to pass from this to the isomorphism",
    ", we must switch some factors taking care to record the appropriate koszul signs :    1 .",
    "permute the first copy of @xmath444 past @xmath445 , introducing a parity change of @xmath437 , then 2 .",
    "permute the two factors of @xmath446 , introducing a sign equal to @xmath447 , which vanishes modulo @xmath36 , then 3 .",
    "cancel the @xmath448 factors on either side .",
    "the result of the operations above is exactly the isomorphism of equation , with a change in signs given by the parity of @xmath449 .",
    "we must now analyse the same problem near the other type of boundary strata .",
    "near such a stratum , we have a natural isomorphism between @xmath450 and the normal vector of the boundary to @xmath428 .",
    "in particular , equation gives an isomorphism @xmath451 which , after introducing a sign with parity @xmath452 , gives exactly the isomorphism of for the boundary of @xmath86 .",
    "note that this would naively seem to imply that @xmath438 satisfies the desired equation , since the two types of boundary strata have _ opposite relative orientations .",
    "_    unfortunately , there are additional signs coming from ( i ) the signs in formulas and for the differentials in the morse and simplicial categories and ( ii ) the sign in the definition of the map @xmath438 .",
    "remark [ rem : sign_difference ] explains that the sign introduced in the definition of @xmath453 contributes a @xmath454 to the total formula because it corrects for the fact that duals cells do not have compatible orientations on their boundaries . on the other hand ,",
    "both the morse differential and @xmath438 contribute @xmath455 and @xmath456 respectively , so the artificial signs we have introduced cancel in this case .",
    "the generalisation for higher products , gives :    [ prop : cup_product_agrees_perturbation ] the maps of equation define an @xmath0 equivalence .",
    "in particular , @xmath438 is a chain map inducing an isomorphism on cohomology , and @xmath457 where @xmath458    the claim that @xmath438 is a chain isomorphism is the familiar statement that the cohomology of smooth manifolds can be computed using morse theory . to prove the @xmath0 equation",
    ", we study , as usual , moduli spaces @xmath459 of expected dimension @xmath57 . by lemma [ lem : moduli_shrubs_nice_manifold ]",
    "the closure of the interior of this moduli space is a @xmath57-dimensional manifold with boundary projecting to the interior or top dimensional strata of the boundary of @xmath355 ( this follows from the fact that all strata of @xmath459 are of the expected dimension , hence that those lying over higher codimension strata of @xmath355 are empty ) .",
    "it suffices to check that the boundary points of @xmath460 account for all the terms of .",
    "the first sum in the left hand side of corresponds to boundary points of @xmath460 which project to the interior of @xmath355 .",
    "the top dimensional boundary strata of @xmath355 are of two types : those which are the image of correspond to the right hand side of , and we claim that the second term of the left hand side of that equation correspond to those points which project to the image of and are in the closure of @xmath459 . indeed , points in @xmath392 lying over the image of correspond to @xmath461 , where @xmath462 is obtained from @xmath388 by replacing the cells @xmath396 and @xmath397 by their _ intersection_. lemma [ lem : simplicial_perturbation_shrubs_gives_cup ] implies that whenever this intersection does not contribute to the cup product , the corresponding cell does not lie in the boundary of @xmath460 , so , modulo signs , the proposition follows from the next lemma .",
    "we briefly discuss signs and orientations in section [ sec : orienting_maps ] .",
    "if @xmath463 , and the moduli space @xmath461 is non - empty , the corresponding points of @xmath392 lie in the boundary of @xmath460 .    for the purpose of this argument",
    "we introduce a moduli space @xmath464 consisting of ribbon trees satisfying all the conditions for being a shrub except that the distance from the outgoing edge to the incoming leaves numbered @xmath189 and @xmath394 are smaller by @xmath262 than the distances to the other incoming vertices .",
    "note that the regularity of @xmath461 and the implicit function theorem imply that , whenever @xmath262 is sufficiently small , we have a bijective correspondence between its elements and those of @xmath465 , where @xmath466 is obtained from @xmath462 by replacing @xmath467 by its image under a diffeomorphism sufficiently close ( in the @xmath468 norm ) to the identity , and keeping all other cells unchanged .",
    "using the fact that our chosen perturbations are compatible with the subdivision @xmath368 , we find that whenever @xmath463 , there is a diffeomorphism @xmath469 such that @xmath470 where @xmath471 and @xmath472 are the diffeomorphisms obtained by integrating the perturbed gradient flow along the respective incoming leaves .",
    "moreover , as @xmath354 converges to the relevant boundary stratum of @xmath355 , the map @xmath469 may be chosen to converge to the identity .",
    "writing @xmath473 for the length of the @xmath189@xmath190 incoming leaf , the claim follows by noticing that the elements of @xmath474 are in bijective correspondence with the elements of the top dimensional stratum of @xmath475 which are sufficiently close to @xmath461 .",
    "boardman and vogt @xcite introduced spaces of `` colored trees '' as a model for multiplihedra ; this collections of polyhedra controls @xmath0 functors .",
    "since our goal in later sections is to construct an @xmath0 functor whose source is the fukaya category , it seems reasonable to replace one of the trees by holomorphic discs .",
    "keeping relatively close to our previous botanical terminology , we shall call these spaces moduli spaces of mushrooms .",
    "a * mushroom * @xmath476 with @xmath81 inputs is defined by the following data    1 .   a partition @xmath477 ( in particular @xmath478 ) and 2 .   for each integer @xmath479 , a * cap * @xmath480 which is a disc with @xmath481 marked boundary points of which @xmath358 successive ones are distinguished as incoming , and 3 .",
    "a * stem * @xmath482 , which is a a shrub with @xmath189 inputs .    [ caps_are_discs ] sometimes , it shall be convenient to discuss caps separately . by a @xmath81-cap ,",
    "we will simply mean a disc with @xmath483 marked points of which @xmath81 successive ones are distinguished as incoming .",
    "alternatively , we can distinguish the pair of outgoing vertices , or the arc connecting them .",
    "the * moduli space of caps * @xmath484 is simply the ( open ) stasheff moduli space @xmath485 under another guise .",
    "later , we shall find it convenient to fix the identification with the moduli space of discs @xmath486 for which the boundary marked point @xmath487 in figure [ basic_mushrooms ] is mapped to the ( unique ) outgoing marked point for discs in @xmath486 .    even though we will draw mushrooms as in figure [ basic_mushrooms ]",
    ", we remind the reader that the incoming vertices of the stem are not associated to a marked point on the outgoing arc .",
    "an isomorphism @xmath488 of mushrooms is an isomorphism of the underlying caps and stem .",
    "explicitly , such a map is a collection of @xmath489 isomorphisms : @xmath490    the only non - trivial automorphism of a mushroom is the identity .",
    "such an automorphism would correspond to an automorphism of the stem or of one of the caps .",
    "however , we have excluded discs with less than @xmath34 marked points as caps .    by definition ,",
    "the set @xmath491 of mushrooms with @xmath81 inputs admits a bijective map to @xmath492 which we later use to define a topology .",
    "recall that whereas the moduli space @xmath199 is an open manifold , the moduli space of shrubs is a ( non - compact ) manifold with boundary ( the boundary consists of trees with outgoing edges of vanishing length ) .",
    "note that the dimension of the components of depends only on the number of inputs : @xmath493    a * singular mushroom * with @xmath81 inputs is defined by the following data    1 .   a partition @xmath477 with @xmath478 , and 2 .   for each integer @xmath479 , a * cap * , which is a singular disc with @xmath481 marked boundary points with a distinguished arc connecting two successive ( outgoing ) marked points , and 3 .",
    "a * stem * , which is a singular shrub with @xmath357 inputs .",
    "again , we consider singular caps whose moduli spaces @xmath494 can be identified with the stasheff polytopes in their holomorphic disc model @xmath495 . decomposing a singular cap into its irreducible components , we observe that those components whose boundary intersects the distinguished arc can themselves be interpreted as lower dimensional caps .",
    "not all irreducible components are of this type ( see figure [ singular_cap ] ) .    as usual",
    ", we will focus attention on * stable * singular mushrooms .",
    "these are characterized by stable caps and stem .",
    "as before , we can write this space as @xmath496 however , it is natural to think of the moduli space of stable singular mushrooms as a quotient of this space .    for each @xmath497 and @xmath498 , we consider the embedding @xmath499 @xmath500 whose image is the stratum of @xmath501 consisting of discs which can be decomposed into two components ( not necessarily irreducible ) , each of which contains an outgoing marked point , and which have respectively @xmath497 and @xmath498 incoming marked points .    on the other hand",
    ", for each integer @xmath502 , we have a map @xmath503 which creates two incoming edges of vanishing length at the @xmath189@xmath190 vertex .",
    "we therefore have maps @xmath504^{\\vee_{k } \\times { \\operatorname{id}}^{r } } \\ar[d]^{{\\operatorname{id}}^{k-1 } \\times \\circ \\times { \\operatorname{id}}^{r - k } } \\\\   { \\overline{{{\\mathcal s}}}}_{r-1 }",
    "\\times   \\overline{{{{\\mathcal p}}}}_{d_1 } \\times \\cdots \\times \\overline{{{{\\mathcal p}}}}_{d_{k-1 } + d_k } \\times \\cdots \\times \\overline{{{{\\mathcal p}}}}_{d_r } } \\ ] ]    we say that two stable singular mushrooms are * equivalent * if they are identified upon gluing along the maps @xmath505 and @xmath506 .",
    "we write @xmath507 for the equivalence relation generated by all such diagrams :    [ defin : mod_space_stable_mushrooms ] the * moduli space of stable mushrooms * with @xmath81 inputs is the quotient space @xmath508    we will equip @xmath509 with its inherited topology as a subset of @xmath510 .",
    "the spaces @xmath511 admit two important families of maps of operadic type relating them to the other moduli spaces we have studied . on the one hand , by grafting @xmath357 mushrooms at the endpoints of a stasheff tree , we obtain a map @xmath512 where @xmath513 .",
    "alternatively , by attaching a singular disc at any of the incoming marked point , we obtain @xmath165 maps @xmath514    @xmath515    the moduli space @xmath495 is stratified by cells labelled by topological types of ribbon trees with @xmath483 leaves , which induces a stratification of @xmath516 . when considering this latter space",
    ", we shall assume that two such successive leaves are distinguished as outgoing .",
    "note that the trees in which the two outgoing leaves are not adjacent ( i.e. share a vertex ) are exactly those that label singular caps whose outgoing edge meets more than one irreducible component .",
    "the reader may compare this constraint with the condition imposed by boardman and vogt on their coloured trees @xcite ( see also , @xcite ) , which shows that our moduli space @xmath511 is homeomorphic to the multiplihedron of the same dimension .",
    "moreover , the homeomorphism may be chosen so that the maps and are the operadic structure maps which make multiplihedra into a bimodule over the stasheff operad .",
    "we conclude :    [ lem - top_mushroom_boundary_stratum ] @xmath510 is a compact manifold with boundary stratified into finitely many ( smooth ) manifolds with corners .",
    "the top boundary strata are the images of the map and ( see figure [ top_mushroom_boundary_stratum ] ) .",
    "note that the top boundary strata of @xmath510 are the boundary strata of @xmath517 which are not identified by the equivalence relation .",
    "in fact , the top boundary strata which are identified by the equivalence relation are exactly those for which a pair of successive external edges have vanishing length .",
    "it is easy to check that the remaining strata are exactly as described above .    as with trees ( and discs ) , this construction can be done with labels . given a sequence @xmath313 , we shall consider the moduli space of mushrooms labelled by @xmath149 , denoted @xmath518 , which is a copy of @xmath511 .",
    "we start by setting @xmath519 to be a copy of @xmath520 where the incoming arcs are labelled by the sequence @xmath521 , which allows us to define @xmath518 to be the quotient ( under the identification of used in definition [ defin : mod_space_stable_mushrooms ] ) of the disjoint union @xmath522 where the initial elements of @xmath521 agrees with the last element of @xmath523 , the sequence @xmath149 is obtained by concatenating @xmath524 through @xmath525 and dropping the redundant terms , and @xmath526 is the sequence of length @xmath489 obtained by taking @xmath527 together with the last elements of @xmath524 through @xmath525 .",
    "whenever @xmath526 and @xmath528 are any sequences satisfying this condition , we obtain a map @xmath529 which is the analogue of in the presence of labels .",
    "the analogue of equation is a map @xmath530 where @xmath149 is obtained from @xmath524 and @xmath531 as in equation .",
    "this later map is induced by a map @xmath532    finally , the gluing operation also has a labelled analogue @xmath533 where the last element of @xmath524 is assumed to agree with the first element of @xmath531 , and @xmath149 is obtained by concatenating the two sequences , and dropping the repeated term .",
    "in this section , we construct a functor @xmath534 using `` moduli spaces of mushrooms maps '' which we shall define in section [ sec : mushroom_maps ] , and a lagrangian foliation on the plumbing , parametrized by @xmath4 , which we shall define in section [ sec : lagrangian_foliation ] ( recall that @xmath4 is the space obtained by gluing @xmath2 and @xmath3 along open balls ) .",
    "informally , a mushroom map consists of a gradient tree whose source is the stem , and a holomorphic map with lagrangian boundary conditions on each cap .",
    "the lagrangian condition on the boundary components connecting incoming vertices ( or an incoming vertex and an outgoing one ) will be one of the lagrangians @xmath15 that we have been studying .",
    "the outgoing boundary component of a cap ( the one connecting the two outgoing vertices ) will be required to map to a leaf of the lagrangian foliation on @xmath24 whose label ( a point in @xmath4 ) agrees with the image of the corresponding endpoint of the stem . from now on",
    ", we shall assume : @xmath535      returning to the local model of section [ sec : introduce_fukaya ] , we find that the submanifold @xmath536 is also lagrangian , and given @xmath537 , we let @xmath538 denote the translate by @xmath539 of @xmath540 ; the union of all such leaves is a foliation of @xmath230 . note that a fixed leaf @xmath538 intersects @xmath235 transversely at @xmath541 . using stokes s theorem to integrate the action of a path from @xmath234 to @xmath235 along @xmath538 , we conclude :    [ lem : stokes_application ] the integral of @xmath20 over any disc with counter - clockwise boundary conditions",
    "@xmath542 is proportional to @xmath543 ; in particular no such disc is holomorphic if @xmath544 , in which case only constant ones arise .",
    "a minor deficiency with this model is that it differs from the standard fibration of @xmath230 as the cotangent bundle of @xmath234 or @xmath235 , so we must modify it in order to extend it to @xmath24 .",
    "we write @xmath545 for the result of gluing @xmath234 to @xmath235 along the identification of their balls of radius @xmath57 about the origin under the diffeomorphism @xmath546 this space is a local model for @xmath4 in the sense that there is an open subset of @xmath4 , containing all non - hausdorff points , which is diffeomorphic to @xmath545 , and which maps @xmath234 to the image of @xmath2 and @xmath235 to the image of @xmath3 .",
    "@xmath547    we would like to define a foliation of @xmath548 , whose leaves @xmath549 are lagrangian discs parametrised by @xmath550 . and such that the following essential properties hold @xmath551    the first condition gives the correspondence between leaves and points of @xmath545 , while the second implies that this foliation agrees with the canonical foliation of the cotangent bundles of @xmath234 and @xmath235 away from a neighbourhood of the origin , and hence can be extended to @xmath24 . in addition , we require three technical conditions which will be used to prove compactness for moduli spaces of holomorphic curves ( see section [ sec : comp - curv - leaves ] ) , and which depend on parameters @xmath552 which can be made arbitrarily small ; @xmath262 already appeared in the construction of @xmath270 section [ app : review_seidel ] : @xmath553 the reader should consult the picture on the right of figure [ fig : foliation_model_dim_1 ] which illustrates the case @xmath252 . to see the fact that the leaves are parametrised by @xmath545 , note that , in the second and fourth quadrant , there are two leaves passing through the corner point",
    "; these form the non - hausdorff locus of the space of leaves @xmath554 .    in order to construct @xmath554",
    ", we choose any monotone function @xmath555 \\to [ 0,1]$ ] which is identically @xmath57 near @xmath36 and identically @xmath126 near @xmath236 and whose derivative is uniformly bounded by @xmath57 , and consider the affine lagrangian planes @xmath556 the proof that these planes do not intersect each other in @xmath548 , and hence form a foliation , is an elementary computation left to the reader ( see the left side of figure [ fig : foliation_model_dim_1 ] ) .",
    "note that this foliation satisfies all but condition [ item : orthogonal_interior ] above . in order to ensure that the leaf corresponding to a vector @xmath557 whose norm lies between @xmath558 and @xmath236 intersects @xmath270 in lagrangian planes orthogonal to @xmath234 and @xmath235 , we deform this foliation by affine lagrangians using an appropriate hamiltonian flow .",
    "the existence of such a flow can be proved , for example , by noting that the region @xmath559 carries a unique function @xmath560 which vanishes along @xmath234 , and whose restriction to any leaf has differential that agrees with the restriction of @xmath561 ; we can write its restriction to a leaf explicitly : @xmath562 we define @xmath563 implicitely via the property that it also vanishes along @xmath234 and that the restriction of @xmath563 to the image of a leaf under the flow @xmath564 generated by the hamiltonians @xmath565 also has differential agreeing with the restriction of @xmath561 .",
    "the reader may easily check that the image of each leaf under @xmath564 is a linear lagrangian , passing through the same point of @xmath234 , and that the norm of the restriction of @xmath566 to each leaf decreases with @xmath123 . whenever @xmath567 , we find that the image of each leaf is in fact orthogonal to @xmath234 .",
    "we extend @xmath563 to a function on @xmath24 so that it satisfies the analogous conditions in the region @xmath568 and define the new foliation @xmath554 to be the image of under @xmath569 .",
    "more precisely , we require @xmath563 to have support contained in a @xmath558 neighbourhood of the union of the regions and , and have @xmath570 and @xmath468 norms bounded by ( say ) @xmath254 .",
    "these support conditions imply that @xmath554 inherits the remaining conditions from the foliation .",
    "choosing @xmath552 implies that the estimate of lemma [ lem : stokes_application ] applies to @xmath554 as well :    [ lem : stokes_application_perturbed ] the integral of @xmath20 over any disc with counter - clockwise boundary conditions @xmath571 is strictly negative if @xmath572 .      in this section",
    ", we will discuss moduli spaces of maps from caps to the plumbing of two cotangent bundles .",
    "strictly speaking , the setup we will be using is not exactly the one we will later need to establish the desired results about maps of mushrooms .",
    "however , since all the main ideas are already present and the notation is much simpler , we will start here .",
    "condition identifies @xmath39 and @xmath41 with balls of radius @xmath36 in flat euclidean space .",
    "we assume that the metrics on @xmath2 and @xmath3 restrict to this flat metric in @xmath40 and @xmath107 .",
    "the first step is to impose a final condition on the perturbation @xmath280 and the morse functions @xmath122 : @xmath573    note that when @xmath574 , these conditions may easily be achieved by taking any ( sufficiently small ) generic function @xmath575 . the image of @xmath576 under such a map",
    "may be written uniquely up to a global constant as the graph of the differential of a function @xmath577 .",
    "the same strategy works for @xmath217 once we observe that @xmath235 ( in @xmath230 ) is the graph of the differential of @xmath578 as a function on @xmath579 with respect to the linear foliation @xmath580 , of which @xmath581 is a small perturbation .",
    "in particular , if we choose @xmath582 , we conclude :    [ lem : morse_function_grows ] the distance to @xmath108 grows along gradient flow lines of @xmath113 ( and decreases along gradient lines of @xmath114 ) in the subset of @xmath583 ( respectively @xmath107 ) where this distance is greater than @xmath584 .",
    "assumption establishes a correspondence between critical points of @xmath122 and intersection points of the corresponding lagrangians , which implies :    [ cor : morse_floer_generators_equal ] there is a bijective correspondence between the generators of @xmath585 and those of @xmath586 .",
    "floer proved in @xcite that , for an appropriate choice of almost complex structure , this correspondence becomes a chain isomorphism . instead of using this result directly",
    ", we shall exhibit a chain equivalence , which will be the first term of an @xmath0 functor :    fix a cap @xmath587 for a sequence @xmath149 of length @xmath124 . to each point @xmath588 of @xmath589 , we can associate a lagrangian @xmath590 as follows :    * if @xmath591 lies on the outgoing segment , we let @xmath592 , * otherwise , orienting the disc counterclockwise starting at the outgoing segment , @xmath593 if @xmath591 lies on the @xmath594@xmath190 segment .",
    "let us assume , as in @xcite*section 9 g , that we have chosen a universal consistent choice of strip - like ends on the moduli space of discs , i.e. a choice of strip - like end on every stable holomorphic disc which is compatible with gluings for small parameters .",
    "note that the isomorphism @xmath595 therefore determines a choice of strip - like ends on the cap @xmath596 .",
    "in addition , for points sufficiently close to the boundary of @xmath516 , we obtain a decomposition into a thin part ( obtained as the image of a strip - like end ) and a thick part ( the complement ) .",
    "the thin part decomposes as a union of strip - like ends with the images of maps @xmath597 \\times [ -r , r ] \\to p.\\ ] ] whenever both boundary components of a strip in the thin part are labelled by a lagrangian @xmath76 , the floer datum determines a perturbation of the @xmath272 equation .",
    "we extend this choice ( which was fixed in the construction of @xmath268 to the rest of the thin part as follows : @xmath598 this is a reasonable assumption because @xmath581 intersects @xmath15 transversely at a single point .",
    "no breaking of holomorphic strips can therefore occur , so one need perturb neither the complex structure nor the lagrangians in order to avoid it .",
    "a * @xmath4-parametrized perturbation datum * on @xmath596 is a pair @xmath599 where @xmath600 we require that ( i ) the restriction of the perturbation data @xmath599 to the thin part agrees with the labelling floer data and ( ii ) if @xmath601 is labelled by the lagrangian @xmath545 , then for each tangent vector @xmath602 , we have @xmath603 .    in other words ,",
    "we choose a family of almost complex structures @xmath326 on @xmath24 parametrized by @xmath4 and by the points of the disc @xmath596 , which are required to agree with the choices made in defining the fukaya category near the incoming marked points , and with @xmath604 near the outgoing points .",
    "we also choose a family of @xmath57-forms @xmath321 on @xmath596 , parametrized by @xmath4 , and with values in the space of functions on @xmath24 .",
    "the @xmath57-forms are also compatible with the hamiltonian perturbations used to define the fukaya category .",
    "note that @xmath605 induces a hamiltonian vector field @xmath606 .",
    "given such a datum , for each @xmath607 we can therefore consider the perturbed cauchy - riemann equation on @xmath596 : @xmath608 where the @xmath281 part is taken with respect to the almost complex structure @xmath609 , and the lagrangian boundary conditions are prescribed by the labels .",
    "a * @xmath4-parametrized perturbation datum * on a singular @xmath81-cap @xmath596 is the choice of a @xmath4-parametrized perturbation datum on each irreducible component .    as the fukaya category requires counting curves parametrised over the moduli space @xmath312 , we consider the analogous generalisation for caps :    a * universal @xmath4-parametrized perturbation datum for caps * @xmath610 is a choice of a @xmath4-parametrized perturbation datum for each singular cap @xmath596 , smoothly varying with respect to the modulus , and which is compatible with the perturbation data @xmath611 and the maps and",
    ".    the compatibility condition can be stated explicitly as follows : every component of a singular cap in the image of the maps or is a priori equipped with two perturbation data , one coming from being the component of a disc or cap in a factor of the source , the other from being the component of a cap in @xmath612 .",
    "we require these data to agree .",
    "the proof of the following result follows immediately from the inductive method of proof for the analogous lemma 9.5 of @xcite .",
    "[ lem : extend_pert_data_caps ] every perturbation datum on a fixed ( smooth ) cap may be extended to a universal perturbation datum .",
    "let @xmath613 denote a sequence of time-@xmath57 hamiltonian chords of @xmath614 points starting at @xmath334 and ending on @xmath333 in addition , we will denote the point of intersection @xmath615 by @xmath616 .",
    "the * moduli space of caps with inputs * @xmath617 is the space @xmath618 of solutions to the perturbed cauchy riemann equation with incoming marked points mapping to @xmath617 and outgoing marked points mapping to @xmath619 and @xmath620 which project to the same point @xmath621 .    in section [ app : transversality_cap ] we prove transversality for the moduli space of caps :    [ cap_transversality ] for a generic choice of universal consistent @xmath4-parametrized cap perturbation data , @xmath622 is a smooth manifold .",
    "more generally , any stratum of @xmath623 consisting of a single cap ( and an arbitrary number of discs ) has the expected dimension , and , if @xmath624 is a submanifold , the projection map @xmath625 ( at every smooth point of the source ) is generically transverse to @xmath626 on every such stratum .",
    "we shall also prove compactness in section [ sec : comp - curv - leaves ] , by appropriately generalising lemma [ lem : stokes_application ] :    [ lem : cap_cpactness ] whenever @xmath627 or @xmath628 , the gromov bordification @xmath623 is compact .",
    "in the second case , @xmath629 is in addition empty whenever @xmath630 lies more than @xmath558 away from @xmath108 .    if @xmath631 , then the gromov bordification of the moduli space of caps with boundaries on leaves corresponding to points within @xmath558 of @xmath630 is compact .",
    "given the seeming complexity of the definitions coming up , a word of explanation is in order .",
    "naively , a mushroom map is simply a holomorphic map defined on each cap together with a gradient tree satisfying certain compatibility conditions .",
    "let us fix the homeomorphism type of a tree @xmath390 with @xmath357 inputs , and a sequence of integers @xmath632 such that @xmath513 .",
    "assume we have fixed in addition , a sequence of labels @xmath149 of length @xmath81 , a sequence @xmath633 of hamiltonian chords with endpoints on the lagrangians @xmath333 and @xmath334 , and a critical point @xmath137 of @xmath187 .",
    "each sequence @xmath634 determines a subsequence @xmath521 of @xmath149 , whose elements we denote @xmath635 .",
    "we would have liked to define the space of mushroom maps with inputs @xmath617 , output @xmath137 , and fixed topological type as a fibre product @xmath636 where @xmath637 is the sequences of labels for the incoming segments of an element of @xmath638 .",
    "whenever @xmath390 has no incoming leaves of vanishing length , one may easily choose perturbation data on the moduli space of shrubs and caps once and for all , so that all such fibre products are transverse ( we shall see later how the lack of hausdorffness is circumvented ) .",
    "however there is no way to achieve transversality in this way for the stratum shown in figure [ deepest_stratum ] whenever some of the caps have the same inputs .",
    "= 2.5 in    the main observation ( we used a similar trick in achieving regularity for the moduli space of cascades in @xcite ) is that there is no reason for the perturbation data on the various caps of a fixed mushroom to be defined in exactly the same way . in particular , even if all the caps of the mushroom shown in figure [ deepest_stratum ] have marked points labelled by the same hamiltonian chords , our setup will allow up to choose different perturbation data for each of them , thereby making transversality easy to achieve .",
    "the rest of this section implements this idea , which we shall return to repeatedly ( see in particular remark [ rem : free_choice ] and the discussion following lemma [ lem : surjective_restriction_pert_data ] )    we first consider a simplest case of a mushroom with one input whose incoming boundary segments are labelled @xmath639 .",
    "[ lem : base_case ] a * @xmath4-parametrized perturbation datum * on the unique mushroom with one input is the choice of ( i ) a family of almost complex structures in @xmath273 parametrised by a disc with three punctures , agreeing with the respective complex structure at the end and ( ii ) a closed @xmath57-form @xmath640 on the cap with three punctures whose pullback under the positive end with boundary labels @xmath641 and the negative end with boundary @xmath642 agrees with @xmath643 , and which vanishes near the remaining end .    in this case",
    ", we fix the hamiltonian perturbation datum as @xmath644    if we have more inputs , we shall also require a perturbation of the stem . recall that a labelling @xmath149 of the inputs of a mushroom @xmath476 is equivalent to the data of compatible labellings @xmath521 of all caps , and @xmath526 of the stem . in particular , each edge of the stem is equipped with a gradient flow equation which we shall have to perturb . unlike the usual setup , we shall allow the floer data on the ends meeting the outgoing segment of a cap to vary depending on the modulus .",
    "this does not cause any difficulties as no breaking of holomorphic strips can happen at these ends .",
    "a * @xmath4-parametrized perturbation datum * on a singular mushroom @xmath476 is the choice of ( i ) a gradient perturbation datum on the stem of @xmath476 and ( ii ) a @xmath4-parametrized perturbation datum on each ( possibly singular ) cap such that @xmath645    the perturbation of the gradient flow need not be compatible with the simplicial subdivision @xmath646 as it was in section [ sec : simp_to_morse ] .",
    "however , we still require that the gradient flow be transverse to the boundary of @xmath197 ( and pointing in the appropriate direction ) .",
    "the constraint is designed to achieve two things : ( i ) whenever a mushroom with a single input breaks off , we need the perturbation datum to agree with the one chosen in definition [ lem : base_case ] and ( ii ) whenever two successive incoming edges of the stem have vanishing length , we require vanishing floer data in order for the gluing theorem to hold .    of course , the perturbation datum is not strictly speaking parametrized by @xmath4 anymore , but rather by @xmath647 . for the next definition ,",
    "we fix , as before a sequence @xmath648 of hamiltonian chords with endpoints on @xmath2 and @xmath3 and a critical point @xmath137 of @xmath193 .",
    "a * singular mushroom map * @xmath649 with inputs @xmath617 and output @xmath137 is a collection of maps @xmath650 where @xmath651 is a ( singular ) perturbed gradient tree ( as in definition [ defin : shrub_map ] ) , and @xmath652 are finite energy solutions to the perturbed cauchy - riemann equation on the relevant ( possibly singular ) caps satisfying the following conditions    1 .",
    "if the @xmath189@xmath190 incoming vertex lies on @xmath653 , then @xmath654 converges on the corresponding end to @xmath655 , and the incoming boundary segments of @xmath656 are mapped to the labelling lagrangians .",
    "the outgoing arc on @xmath653 is mapped to @xmath657 , where @xmath658 is the @xmath594@xmath190 incoming leaf of the stem .",
    "note that the last condition and the removal of singularities theorem forces the outgoing marked points of the @xmath594@xmath190 cap to be mapped to the lifts of @xmath659 to the appropriate manifold @xmath2 or @xmath3 .",
    "the next result is the main tool in establishing compactness for maps of mushrooms :    the image of every cap of a singular mushroom map is contained in a compact subset of @xmath24 , and every edge of a stem labelled by @xmath275 with @xmath217 is mapped to the ball of radius @xmath660 in @xmath197 . in particular , if the distance between @xmath630 and @xmath108 is greater than @xmath660 , there is no mushroom map admitting a cap whose first and last labels differ , and whose boundary condition on the outgoing arc is @xmath581 .    the proof is a combination of lemma [ lem : cap_cpactness ] and the proof of lemma [ lem : strips_moduli_spaces_cpact ] .",
    "we focus on the case of a cap @xmath653 whose first segment ( in the counterclockwise order as usual ) is mapped to @xmath2 , and penultimate one to @xmath3 ( lemma [ lem : cap_cpactness ] excludes the other possibility ) .    as in the proof of lemma",
    "[ lem : strips_moduli_spaces_cpact ] , we find that either ( i ) there is a descending arc on the stem @xmath482 , starting at the @xmath594@xmath190 incoming leaf of @xmath482 and ending on the outgoing edge , all of whose edges are labelled @xmath200 or ( ii ) there is an arc from the @xmath594@xmath190 incoming leaf of @xmath482 to another leaf meeting an incoming cap @xmath661 which can be broken into a descending arc with edges labelled @xmath200 , followed by an ascending arc with edges labelled by @xmath201 .",
    "since the perturbed negative gradient flow along an edge labelled by @xmath200 points outward ( and inward for edges labelled by @xmath201 ) , we conclude that the critical point of @xmath113 which is the output of our mushroom map ( or the image of the cap @xmath661 under the projection to @xmath41 ) lies outside the ball of radius @xmath660 about the base point in @xmath39 ( or in @xmath41 in the second case ) .",
    "this contradicts our assumption on the gradient flow @xmath113 , or lemma [ lem : cap_cpactness ] applied to the cap @xmath661 .    following the construction for discs and trees",
    ", we shall consider perturbation data varying with the modulus of the mushroom :    [ lem : universal_datum_mushrooms ] a * universal consistent @xmath4-parametrized perturbation datum for mushrooms * is a choice @xmath662 of @xmath4-parametrized perturbation data for each singular mushroom @xmath476 , varying smoothly in each stratum of @xmath663 , and which is compatible with ( i ) the maps and the perturbation data @xmath611 used to define @xmath268 and ( ii ) the maps and the perturbation datum @xmath175 used to define @xmath664 .",
    "moreover , whenever the incoming leaf of the stem meeting a given cap @xmath665 has lenght smaller than @xmath57 , we require that the floer datum on the ends adjacent to its outgoing segment to be the constant ones fixed in .",
    "[ rem : free_choice ] had we naively pulled back the perturbation datum for a mushroom using the projections of components of @xmath666 to a product as in equation , we would not have been able to achieve transversality in the situation pictured in figure [ deepest_stratum ] .",
    "however , while the stratum labelled by the topological type of such mushrooms lies on the boundary of the gromov compactification of a component of @xmath509 , it in fact lies in the interior of @xmath511 .",
    "in particular , the choice of perturbation data for a fixed @xmath81 on this part of the moduli space is essentially independent from the choices made for smaller value of @xmath81 .",
    "this implies that the choice of datum of each cap is unconstrained by the other choices , thereby allowing us to achieve transversality as explained in the discussion following lemma [ lem : surjective_restriction_pert_data ] .",
    "given such a perturbation datum , we can define the moduli spaces which allows us to construct a functor from @xmath19 to @xmath268 .",
    "[ mushroom - maps ] the * moduli space of mushroom maps * @xmath667 is the space of maps @xmath649 from a non - singular mushroom @xmath476 with incoming marked points @xmath617 and outgoing marked point @xmath137 .",
    "the space of stable maps from a possibly singular mushroom is denoted @xmath668    the topology on @xmath669 is defined as usual using the gromov @xmath670 topology for the underlying caps and stem . moreover",
    ", this space carries a natural stratification coming from the stratifications on @xmath671 and @xmath672 ( and possible breakings of gradient flow lines between critical points , or holomorphic strips at the incoming ends ) .",
    "we state the main result of section [ sec : transverse_mushrooms ] :    [ lem : mushrooms_expected_dimension ] for a generic choice of perturbation data , all strata of @xmath669 are of the expected dimension .",
    "the proof of this next result is given in section [ sec : gluing_mushrooms ] , and requires a gluing result in codimension @xmath57 for moduli spaces of caps :    [ prop:1_dim_moduli_space_manifold ] given generic perturbation data , @xmath669 is a compact @xmath57-dimensional manifold with boundary whenever @xmath673      we begin by defining the linear term of the functor @xmath674 promised in the beginning of this section . to do this , we first observe that the index theorem ( say , equation ( 12.2 ) in @xcite ) gives a natural isomorphism @xmath675 where @xmath676 is the moduli space of caps projecting to a fixed point @xmath630 in @xmath4 , and we are writing @xmath677 for the intersection point between @xmath15 and @xmath581 .",
    "it follows immediately that the determinant bundle of the moduli space of caps admits a natural isomorphism @xmath678    given a mushroom @xmath649 in @xmath679 , the description of the moduli space of such mushrooms as the fibre product of @xmath680 with @xmath429 over @xmath4 gives an isomorphism @xmath681 specialising to the case @xmath682 , and using the previous result for @xmath683 and the definition of @xmath684 , we conclude that every mushroom @xmath649 determines an isomorphism @xmath685 and hence a map @xmath686 which is the contribution of @xmath649 to the linear part of the functor @xmath674 : @xmath687   & \\mapsto   ( -1)^{n \\deg(p_1 ) } \\sum_{\\stackrel{\\deg(x_0 ) = \\deg(p_1)}{\\psi \\in   { { { \\mathcal c}}}(x_0,p_1 ) }   }    { { \\mathcal g}}^{\\psi } ( [ p_1]).\\end{aligned}\\ ] ] ignoring signs , the fact that @xmath688 is a chain map is a consequence of proposition [ prop:1_dim_moduli_space_manifold ] . indeed , considering @xmath689 and @xmath137 such that @xmath690 the boundary strata of @xmath691 consist of either ( i ) a critical point @xmath138 of @xmath122 and an element of @xmath692 ( i.e. , a rigid mushroom with input @xmath689 and output @xmath138 together with a rigid gradient trajectory from @xmath138 to @xmath137 ) or ( ii ) an element of @xmath693 for a time-@xmath57 chord @xmath328 from @xmath15 to @xmath284 for the hamiltonian @xmath280 .",
    "these two cases correspond to the two sides of the equation @xmath694    to prove the correctness of the signs , we must compare the natural isomorphism , with a product isomorphism coming from its boundary strata .",
    "the case ( i ) above is virtually indistinguishable from the analogous situation for the moduli spaces of shrubs interpolating between simplicial and morse cochains , analysed in the discussion surrounding equation .",
    "the result of that discussion is that there is a sign difference given by the parity of @xmath695 between the product orientation , and the one induced from the interior .    in the other case",
    ", we first note that a rigid strip gives a canonical isomorphism @xmath696 with the left hand side corresponding to translation . taking the tensor product with equation with @xmath689 replaced by @xmath328 , and @xmath697 trivialised canonically by virtue of being rigid , we obtain an isomorphism @xmath698 since gluing the strip to the cap at @xmath328 gives an identification @xmath699 with the positive direction in @xmath5 pointing inward we recover the isomorphism of , multiplied by @xmath454 .    to conclude that holds , we must keep in mind that there are signs of @xmath700 and @xmath455 in the definitions of the differential in the floer and morse theories , as well as a sign in our formula for @xmath688 , which contribute @xmath701 in one case , and @xmath702 in the other .",
    "the map @xmath688 is a chain isomorphism .",
    "we shall use the energy filtration to see that , if we order the critical points by energy , the matrix for @xmath688 is upper triangular with ones along the diagonal , hence is invertible .    we first show that @xmath703 is empty whenever @xmath704 where @xmath138 is the critical point corresponding to @xmath689 in corollary [ cor : morse_floer_generators_equal ] .",
    "assume by contradiction that a mushroom map @xmath649 with these asymptotic conditions exists .",
    "let @xmath630 denote the point of @xmath4 such that the cap of @xmath649 has a boundary segment mapping to @xmath581 , and write @xmath619 for the lift of this point to @xmath329 .",
    "since the stem is a descending flow line of @xmath705 , we conclude that @xmath706 and hence , as we are assuming , we find that @xmath707 we claim that this inequality contradicts positivity of energy for the cap . indeed , an application of stokes s theorem analogous to lemma [ lem : stokes_application ] , the closedness of the @xmath57-form in definition [ lem : base_case ] implies that @xmath708 where @xmath619 and @xmath709 now stand for the intersection points of @xmath581 with the respective lagrangian , and @xmath710 for the appropriate action functional for the hamiltonian perturbations fixed in definition [ lem : base_case ] . using the primitive @xmath711 which vanishes on @xmath329 and @xmath581",
    ", we compute that @xmath712 vanishes , while @xmath713 and @xmath714 are respectively equal to @xmath715 and @xmath716 . as the left hand side of equation is non - negative ,",
    "we conclude , as desired , that @xmath703 is empty whenever the inequality holds .    applying this energy analysis to the case",
    "@xmath296 is the hamiltonian chord from @xmath329 to @xmath717 corresponding to the critical point @xmath121 of @xmath705 , we find that the only solutions in this case must have constant cap and stem ( any non - constant solution must carry some energy ) .",
    "the proof that there are ones along the diagonal and hence that @xmath688 is a chain isomorphism now follows from the fact that such constant solutions are regular .",
    "the higher order analogues of this map are defined in essentially the same manner as the maps @xmath718 which define a functor from floer to morse theory . whenever @xmath719 , we may assign to each tree @xmath720 an isomorphism @xmath721 and a sign @xmath722 .",
    "we discuss a set of possible choices for the isomorphism and the sign in section [ sec : orienting_mush_maps ] .",
    "we define the @xmath81@xmath190 higher term of @xmath674 @xmath723 to be a sum of the maps @xmath724 induced by @xmath649 on orientation lines , multiplied by the appropriate sign : @xmath347 \\otimes \\ldots \\otimes [ p_1 ] \\mapsto",
    "\\sum_{\\stackrel{\\psi \\in { { { \\mathcal c}}}(x_0 , { \\vec{p}^{\\ , \\!}})}{\\deg(x_{0})= \\sum_{k } \\deg p_{k } + d -1 } } ( -1)^{\\ddagger(\\psi ) } { { \\mathcal g}}^{\\psi}([p_f ] \\otimes \\ldots \\otimes [ p_1])\\ ] ]    modulo signs , the analysis of the boundary strata of @xmath57-dimensional moduli spaces of mushrooms given in section [ sec : gluing_mushrooms ] ( i.e. the proof of proposition [ prop:1_dim_moduli_space_manifold ] ) immediately implies :    the maps @xmath718 satisfy the @xmath0 equation for a functor : @xmath725",
    "the goal of this section is to prove lemma [ lem : cap_cpactness ] .",
    "we start in the first section by discussing a general result which constrains holomorphic curves to remain within compact domains , which we shall then apply in the second section to prove the desired statement :      we begin with a generalisation of lemma 7.2 of @xcite , which precludes holomorphic curves from escaping from a domain .",
    "let us assume therefore that we are given an almost complex structure @xmath726 on a manifold @xmath11 , and a @xmath57-form @xmath727 whose differential is non - negative on every complex plane .",
    "let @xmath728 be a ( codimension 0 ) submanifold with boundary such that @xmath729 is a complex distribution ( in particular , @xmath727 does not identically vanish near @xmath730 ) , and @xmath731 assuming moreover that we are given a submanifold @xmath732 transverse to @xmath730 such that @xmath733 we conclude    [ lem : convexity_weak_assumptions ] every @xmath726 holomorphic curve in @xmath734 with boundary on @xmath735 which intersects @xmath736 is contained therein .    since the proof is essentially indistinguishable from that of lemma 7.2 in @xcite we shall only sketch it : the assumption that @xmath737 is non - negative on holomorphic planes implies that its integral over a holomorphic curve is non - negative .",
    "moreover , given that @xmath737 does not vanish on a plane transverse to @xmath738 this integral must be strictly positive for every holomorphic curve which intersects @xmath736 but is not contained in it . in particular , stokes s theorem implies that the integral of @xmath727 over the boundary of such a holomorphic curve must be positive .",
    "however , the contribution of the subset mapping to @xmath739 vanishes by condition , while the contribution of the subset mapping to @xmath740 is non - positive by condition .    still requiring that @xmath741 be exact , we now assume that the primitive is only locally constant on @xmath742 . in this case , let us consider maps @xmath743 such that whenever @xmath744 \\to \\partial \\sigma$ ] is a parametrisation of a boundary segment mapping to @xmath739 which is compatible with the complex orientation , @xmath745 the previously sketched argument in fact proves :    [ lem : compactness_2_boundaries ] there is no holomorphic curve in @xmath734 with boundary on @xmath735 for which condition holds .",
    "if in the discussion of the previous section , @xmath727 is a liouville form whose restriction to @xmath730 is a contact form , then condition essentially says that @xmath726 is of contact type near @xmath730 , and condition that @xmath739 is exact with legendrian boundary ( and in addition admits a primitive for the liouville form which strictly vanishes on this boundary ) . in this case",
    ", we exactly recover lemma 7.2 of @xcite , and we may conclude half of lemma [ lem : cap_cpactness ] :    [ lem : half_of_compactness_caps ] if the distance between @xmath630 and @xmath108 is greater than @xmath660 then @xmath746 is compact whenever @xmath627 and empty whenever @xmath628 .    as usual , it suffices to prove the existence of a compact subset of @xmath24 ( in this case @xmath270 ) containing the image of every element of @xmath747 , so that the usual proof of gromov compactness applies .",
    "let @xmath748 be such a map , and denote by @xmath320 the inverse image of @xmath749 .",
    "if @xmath750 , then the hypothesis of lemma [ lem : convexity_weak_assumptions ] holds if @xmath727 is a primitive for the symplectic form which agrees with the natural primitive near @xmath270 , and the image of @xmath751 is contained in @xmath286 , hence the image of @xmath304 is contained in @xmath270 .",
    "if @xmath752 , then the computation of lemma [ lem : stokes_application_perturbed ] shows that condition holds , so that lemma [ lem : compactness_2_boundaries ] implies the desired result .    note",
    "that while the almost complex structure is of contact type near any point in @xmath286 , the lagrangians @xmath581 may not intersect it in legendrian submanifolds if @xmath630 is within @xmath660 of @xmath108 .",
    "we shall construct a different submanifold @xmath269 which will play the same role as @xmath270 did in the previous lemma ( this manifold was mentioned in condition and we are finally about to define it ) . its local model in @xmath230 is a smoothing of the manifold with corners @xmath753 see figure [ fig : middle_manifold ] . to understand the construction , it is helpful to keep in mind that the sphere of radius @xmath36 about the origin meets the hypersurface @xmath754 precisely on its intersection with the diagonal .",
    "hence this intersection takes place far away from the hypersurfaces @xmath755 and @xmath756 .",
    "in particular , this manifold has only codimension @xmath36 corners , and the smoothing construction which produces @xmath269 is entirely local .",
    "we leave the details of the smoothing to the reader , requiring only that @xmath757 note that @xmath758 can be naturally identified with a disc cotangent bundle of the lagrangian @xmath759 such that affine planes parallel to @xmath760 correspond to cotangent fibres . in particular , the leaves @xmath581 ( whenever @xmath630 is close to @xmath108 ) intersect @xmath269 in legendrians .",
    "with this at hand , we complete this section with the    given that we have already established lemma [ lem : half_of_compactness_caps ] it remains to show that caps with boundary conditions along @xmath581 can not escape @xmath761 whenever @xmath630 is within @xmath660 of @xmath108 .",
    "condition implies that all almost complex structures are of contact type near @xmath762 , and that there are no hamiltonian perturbations in @xmath763 ; as in lemma [ lem : half_of_compactness_caps ] , we may directly apply lemma [ lem : convexity_weak_assumptions ] to conclude the inverse image of the complement of @xmath269 is empty .",
    "in this section , we explain the proofs of results from sections [ sec : stasheff ] and [ sec : simp_to_morse ] .      in order to prove transversality",
    ", we must study the moduli space @xmath168 more carefully .",
    "first , we recall that its boundary strata are labelled by trees with @xmath81 inputs @xmath764 an element of @xmath168 lies in the cell labelled by @xmath765 if the result of collapsing all its finite edges yields a ( ribbon ) tree combinatorially isomorphic to @xmath765 , see @xcite which gives a detailed discussion of the parallel case in which the stasheff polytopes are modeled by moduli spaces of holomorphic discs .",
    "the space @xmath168 also has a cell decomposition with cells @xmath766 labelled by surjective maps of ribbon trees @xmath767 where both @xmath123 and @xmath765 are isomorphism classes of trees with @xmath81 inputs , and such that the inverse image of every vertex is a connected tree .",
    "the stratum determined by such a map consists of trees which are homeomorphic to @xmath123 and whose finite edges are those collapsed in @xmath765 . in particular , the set of infinite edges in such a stratum is fixed , so the structure of a metric tree is determined by the lengths of the remaining edges , and we have a canonical isomorphism @xmath768 with closure ( allowing edges to reach length @xmath126 or @xmath769 ) : @xmath770^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})|}.\\ ] ] the cell structure on @xmath771 induced from its inclusion in @xmath168 is compatible with the natural cell structure on @xmath772^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})|}$ ] . given a sequence @xmath149 of elements of the set @xmath773 , there is an obvious meaning to the moduli space @xmath774 of labelled stasheff trees which lie in the appropriate stratum .",
    "we shall now formally describe what we mean by a smooth choice of perturbation data .",
    "let us once and for all fix a smooth structure on @xmath772 $ ] using the identification @xmath775 \\cong [ 0,1].\\ ] ] in particular , we obtain a smooth structure on @xmath776 .",
    "note that every flag in @xmath123 ( a pair @xmath777 with @xmath184 a vertex of the edge @xmath132 ) and the metric @xmath778 determine a unique orientation and length preserving map @xmath779 taking @xmath184 to the origin and @xmath132 to the appropriate segment on either side of the origin .",
    "in particular , this flag determines a polyhedral subset in @xmath780^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})| } \\times { { \\mathbb r}}\\ ] ] whose fibre is the image of the segment @xmath132 under .",
    "[ defin : smooth_pert_data_stasheff ] a choice of perturbation data for each element of @xmath161 is said to be * smooth * if , given a flag @xmath777 of a tree @xmath123 , the perturbation data for the edge @xmath132 of metric trees in @xmath781 extends to a smooth map @xmath782^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})| } \\times { { \\mathbb r}}\\to { c}^{\\infty}(tm).\\ ] ]    recall that a universal perturbation is a smooth choice of perturbation data for all labelled stasheff trees , which is moreover consistent in the sense that the perturbation data for a singular tree is given by the data of its components .",
    "[ lem : inductive_construction_pert_data_stasheff ] given any sequence @xmath149 , every smooth and consistent choice of perturbation data on the union of @xmath783 with the @xmath189-skeleton of @xmath161 extends smoothly and consistently to the @xmath394 skeleton of @xmath161 .",
    "moreover , the restriction map from the space of all perturbation data to the space of perturbation data for a given singular labelled stasheff tree @xmath150 is surjective .    since the perturbation data have been fixed on the lower dimensional moduli spaces it suffices to extend the perturbation datum to interior cells .",
    "fix a tree @xmath123 labelling such a cell , ( in this case @xmath765 is a tree with a unique @xmath124-valent vertex , and all interior edges are collapsed , so we may drop this data from the notation ) . by assumption ,",
    "perturbation data have been chosen for the boundary of the cell labelled by @xmath123 .",
    "if we fix an interior edge @xmath132 , writing @xmath784 for the two flags it lies on , then the existence of a smooth extension of a function from the boundary of @xmath780^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})| } \\times { { \\mathbb r}}\\ ] ] is obvious since this is a manifold with corners ( we proceed by induction , extending over small neighbourhoods of the skeleta ) .",
    "it suffices therefore to make sure that the extension can be chosen so the maps associated to the two flags containing @xmath132 are both smooth .",
    "writing @xmath176 for the coordinate of the factor of @xmath772^{|{{\\mathcal e}}(t)|-|{{\\mathcal e}}(t^{\\infty})|}$ ] corresponding to the edge @xmath132 , we find that the only potentially interesting extension problem occurs at the boundary facets @xmath785 . since the map @xmath786 is smooth on @xmath787 , and takes the polyhedron associated to @xmath788 to the one associated to @xmath789 , smoothness of the extensions @xmath790 and @xmath791 are equivalent near @xmath792 .    in remains to check the existence of an extension from @xmath793 .",
    "the key fact is that the perturbation datum is required to be compactly supported on every edge .",
    "this defines a naive way of gluing the perturbation data associated to the flags @xmath784 whenever @xmath794 by `` pregluing '' the two half - infinite intervals as follows : if we identify the edge with the interval @xmath795 $ ] , then the perturbation datum on @xmath796 $ ] is set to vanish , while those on @xmath797 $ ] and @xmath798 $ ] are obtained by pulling back the perturbation datum from the natural inclusions in @xmath142 and @xmath799 $ ] ( the second is obtained after translation by @xmath800 ) .",
    "a simple computation shows that the resulting perturbation datum extends smoothly with respect to both coordinate systems , and the proof proceeds by induction using cutoff functions , proving the first part of the result .",
    "the second part follows easily by observing that once one has constructed a perturbation datum over the boundary of a cell , it can be arbitrarily modified at any point in its interior .",
    "the next technical result is the infinitesimal version of the fact that perturbing of the gradient flow equation on a bounded subset of an edge integrates to an essentially arbitrary diffeomorphism ( see the discussion preceding definition [ defin : pert_datum ] ) .    for each gradient tree @xmath801 , @xmath121 a point in the appropriate ascending or descending manifold , and tangent vector @xmath802 at @xmath803 ,",
    "there exists a @xmath57-parameter family of universal perturbation data @xmath804 whose evaluation maps @xmath805 are independent of @xmath91 for @xmath806 , and such that @xmath807    with this in mind , we can prove the desired transversality result .",
    "[ lem : stasheff_smooth ] all moduli spaces @xmath808 are manifolds of the expected dimension for a generic choice of universal perturbation data .",
    "if @xmath218 consists of a single element @xmath138 , this follows from the assumption that all functions @xmath122 are morse - smale . to prove the general case , note",
    "that the choice of a perturbation datum associates a diffeomorphism of one of the manifolds @xmath197 to each finite edge of a metric tree @xmath157 ; the diffeomorphism is simply the flow of the associated perturbed gradient vector field . by picking finite segments in each incoming edge containing the support of the perturbation datum , we may also associate a diffeomorphism ( the perturbed gradient flow on this segment ) to a leaf of @xmath123 .",
    "in particular , we define for each integer @xmath809 a diffeomorphism @xmath403 obtained by composing the diffeomorphism attached to the @xmath189@xmath190 leaf with the diffeomorphisms associated to the sequence of finite edges which form an arc from the @xmath189@xmath190 leaf to the outgoing segment .",
    "the moduli space of gradient trees for a fixed metric tree is the inverse image of the diagonal in @xmath810 under a map @xmath811 whose @xmath189@xmath190 component @xmath812 is the composition of the inclusion of the given stable or unstable manifold in the appropriate factor with the diffeomorphism @xmath403 .",
    "a standard argument using sard s theorem then reduces the regularity of the moduli space to the previous lemma .",
    "lemma [ lem : compactness_stasheff ] implies that we may discuss transversality of the evaluation map to the diagonal even though the target space is not hausdorff ; the image of a point under consideration may only lie in the singular strata of @xmath4 if it is labelled by @xmath211 or @xmath212 , in which case all the arguments take place in the appropriate manifold .",
    "we briefly explain how to extend the techniques of the previous section to obtain moduli spaces of maps of shrubs which are smooth manifolds .",
    "the main difference are that the strata of @xmath355 are not manifolds with corners , so one may not extend an arbitrary smooth function from one skeleton to the next . the quickest way to resolve",
    "this problem is to consider the inclusion @xmath813 obtained by attaching two infinite edges to every incoming vertex of a shrub .",
    "we insist that this is a purely formal construction ; the right hand side should not be thought of as controlling gradient trees for morse theory in this construction , and so we have given it a different name .",
    "it is clear that the natural stratification of @xmath355 agrees with the pullback of the stratification of @xmath814 under the inclusion .    given a sequence @xmath149 , we define @xmath815 to be the sequence obtained by repeating every element but the last , allowing us to define the analogue of this inclusion in the presence of labels @xmath816 the reader may easily check the commutativity of the diagram , @xmath817 \\ar[d ]   & { \\overline{{{\\mathcal s}}}}_{{\\vec{i}^{\\ , \\ ! } } } \\ar[d ] \\\\",
    "{ \\overline{{{\\mathcal t}}}}_{{\\vec{r}^{\\ , \\ ! } } } \\times { \\overline{{{\\mathcal t}}}}_{2{\\vec{i}^{\\ , 1 } } } \\times \\ldots \\times { \\overline{{{\\mathcal t}}}}_{2{\\vec{i}^{\\ , r } } }   \\ar[r ] \\ar[d]^{\\equiv } & { \\overline{{{\\mathcal t}}}}_{2 { \\vec{i}^{\\ , \\ ! } } } \\ar[d]^{\\equiv } \\\\ { \\overline{{{\\mathcal t}}}}_{{\\vec{r}^{\\ , \\ ! } } } \\times { { \\overline{{{\\mathcal s}}}}^{\\mathrm{ext}}}_{2{\\vec{i}^{\\ , 1 } } } \\times \\ldots \\times { { \\overline{{{\\mathcal s}}}}^{\\mathrm{ext}}}_{2{\\vec{i}^{\\ , r } } } \\ar[r ] & { { \\overline{{{\\mathcal s}}}}^{\\mathrm{ext}}}_{2{\\vec{i}^{\\ , \\!}}}}\\ ] ] with vertical arrows obtained by applying , and the horizontal ones by applying the map in the first row , and @xmath357 iterations of the map in the second . note that the map can be interpreted in our new notation as the existence of a map @xmath818 where @xmath149 is obtained by removing one of the inputs of @xmath819 and replacing it by the inputs of @xmath820 .",
    "[ defin : smooth_pert_data_shrub ] a * universal perturbation datum on @xmath821 * is a perturbation datum for every tree in @xmath382 varying smoothly , and which is compatible with the perturbation datum @xmath175 used to define @xmath19 and the maps .    a choice of perturbation data for each element of @xmath382 is said to be * smooth * if it is the restriction of a universal perturbation datum on @xmath821 under the map .",
    "of course , a universal perturbation datum on @xmath821 involves many choices which are discarded by restricting to @xmath382 .",
    "one might reasonably a universal perturbation datum only on neighbourhoods of the image of @xmath382 which are compatible with the operadic structure maps , but there seems to be no reason to desire this additional level of complexity .",
    "the existence of a universal perturbation datum on @xmath821 is proved by induction as we did in the construction of @xmath175 .",
    "the induction step uses the fact that any smooth function on a subcomplex of the natural stratification of a manifold with corner may be extended to an additional cell .",
    "the commutativity of the diagram implies that the compatibility of a perturbation datum with respect to the structure maps of @xmath821 implies compatibility of the restriction to @xmath672 with .",
    "lemma [ lem : simplicial_perturbation_shrubs_gives_cup ] implies that the simplicial condition is realised in an open set of such perturbations . to conclude the desired transversality result , the key ingredient , as in the proof of lemma [ lem : stasheff_smooth ] is an intersection - theoretic interpretation of @xmath822",
    "whenever @xmath823 is a composable sequence of cells with @xmath824 a cell of @xmath825 , and @xmath121 is a critical point of @xmath410 . as we did for stasheff trees in the proof of lemma [ lem : stasheff_smooth ]",
    ", this moduli space is the inverse image of the diagonal under a map @xmath826 whose @xmath189@xmath190 factor is obtained by composing the inclusion of @xmath396 with the composition of perturbed gradient flows associated to the edges of @xmath390 lying on an arc from the @xmath189@xmath190 incoming leaf to the outgoing edge .",
    "we conclude :    for generic universal perturbation data , all strata of @xmath392 are smooth manifolds of the expected dimension .",
    "we briefly describe how to use the approach of @xcite in order to prove the desired gluing theorems for moduli spaces of gradient trees .",
    "the results of this section prove that the compactifications of moduli spaces of gradient trees are manifolds with boundary whenever they have virtual dimension @xmath57 .",
    "however , as we shall need a description of a neighbourhood of the codimension @xmath57 strata of moduli spaces of shrubs of arbitrary dimension , we shall discuss matters in that generality .",
    "consider a morse - smale function @xmath827 on a smooth submanifold , and @xmath828 and @xmath829 smooth manifolds which are transverse to the gradient flow of @xmath827 .",
    "the manifold of gradient flow lines of length @xmath739 starting on @xmath828 and ending on @xmath829 will be denoted @xmath830 .",
    "the union of these spaces admits a compactification @xmath831 by allowing broken trajectories .",
    "we write @xmath832 for broken gradient trajectories passing through a critical point @xmath121 .",
    "note that all strata of virtual codimension @xmath57 in @xmath831 are of this type .",
    "the following result is a minor generalisation of proposition 18.1.4 in @xcite :    [ lem : km ] each point @xmath833 admits a neighbourhood @xmath834 , and an embedding @xmath835   \\to { \\overline{{{\\mathcal m}}}}(n_1,n_2)\\ ] ] for @xmath836 , such that the image of @xmath837 consists of all gradient segments of length @xmath739 which are sufficiently close to @xmath838 .",
    "moreover , the evaluation map @xmath839 converges in the @xmath670 topology as @xmath739 converges to infinity .    assuming that the perturbation data we have chosen are generic",
    ", this result implies that the moduli spaces @xmath196 are manifolds with boundary , with boundary stratified by smooth manifolds of the expected dimension . for simplicity of notation",
    "( and as this is the only case that is needed for our arguments ) , we focus on a neighbourhood of the strata of codimension @xmath57 .",
    "such a stratum is a product @xmath840 with a fixed choice of an element @xmath841 which equals @xmath259 , and such that @xmath218 is the result of replacing @xmath842 by @xmath843 in @xmath844 .",
    "the outgoing and incoming edge with endpoint @xmath259 are naturally isometric to @xmath142 and @xmath845 $ ] .",
    "we fix a constant @xmath846 sufficiently large that the support of the perturbation data on these edges are respectively contained in @xmath847 $ ] and @xmath848 $ ] , and write @xmath849 for the image of @xmath850 on this edge .",
    "we define evaluation maps @xmath851 which are obtained in the second case by composing the inclusion of @xmath852 into the @xmath594@xmath190 factor with the flows associated with a descending arc from the @xmath594@xmath190 leaf to the point @xmath853 ( the first case is a straightforward modification ) .",
    "we write @xmath854 and @xmath855 for the inverse images of the diagonal under these maps . by definition ,",
    "the stratum we are considering is given by @xmath856 our regularity assumption can be restated as the fact that this is a transverse fibre product .",
    "consider the `` pregluing '' map @xmath857 \\times { { { \\mathcal t}}}_{d_1 } \\times { { { \\mathcal t}}}_{d_2 } \\to   { \\overline{{{\\mathcal t}}}}_{d}\\ ] ] obtained by replacing the bi - infinite edge in the source with a finite one whose length is given by the projection to the first factor in the source .",
    "let us define @xmath858 for @xmath859 in the same way as their analogue for @xmath860 , but using the perturbation data on @xmath161 pulled back under the inclusion of @xmath861 .",
    "a neighbourhood of @xmath862 in @xmath863 consists of gradient trees whose source lies in the image of this pregluing map , and is therefore given by the union @xmath864 the smoothness condition on our choice of perturbation data implies that the evaluation maps on @xmath865 and @xmath866 converge on compact subsets , and in the @xmath867 topology to the evaluation maps at @xmath868 .",
    "together with lemma [ lem : km ] , elementary differential topology implies    each point @xmath869 admits a neighbourhood @xmath870 , and an embedding @xmath871   \\to { \\overline{{{\\mathcal t}}}}(x,{\\vec{x}^{\\ , \\!}})\\ ] ] for @xmath836 , whose image is a neighbourhood of @xmath872 in the gromov topology .",
    "this result has a straightforward generalisation to corners of higher codimension , but we shall not need that fact in this paper .",
    "the same proof technique works for shrubs : let @xmath873 be a rigid gradient tree in @xmath223 , and @xmath874 a sequence of shrub maps with outputs @xmath875 .",
    "we write @xmath876 for the collections of inputs of all shrub maps @xmath877 , and @xmath388 for the sequence obtained by concatenating the sequences @xmath878 . by attaching @xmath877 to the @xmath594@xmath190 input of @xmath873 ,",
    "we obtain a singular shrub @xmath879 let @xmath880 denote a sufficiently small neighbourhood of this point in the boundary stratum of @xmath881 wherein it lies ( note that his stratum has virtual codimension @xmath57 ) . applying the discussion for trees to this situation",
    ", we conclude :    [ lem : gluing_shrubs ] there exists an embedding @xmath882 \\to    { \\overline{{{\\mathcal s}}}}(x_0 , { \\vec{\\check{\\sigma}}^{\\ , \\!}})\\ ] ] whose image is a neighbourhood of @xmath883 in @xmath881 .",
    "the proofs of technical results from section [ sec : floer_to_morse ] are contained in this section .",
    "however , we omit the analytical parts of the proofs , so that we work with smooth functions throughout , without setting up the relevant banach spaces .      in this section ,",
    "we prove lemma [ cap_transversality ] .",
    "one way to define the topology on @xmath884 , is to introduce the space @xmath885 of all smooth maps @xmath886 for some cap @xmath596 whose boundary arcs are mapped to @xmath887 , where @xmath630 is allowed to vary arbitrarily in @xmath4 , and whose incoming marked points are mapped to the hamiltonian chords @xmath617 .",
    "note that @xmath884 is simply the zero - level set of @xmath888 as a section of the vector bundle over @xmath889 with fibre @xmath890 at a map @xmath304 with source @xmath596 .",
    "the proof is a standard application of sard - smale to pseudo - holomorphic curve theory .",
    "we note that the assumption that all moduli spaces of holomorphic discs @xmath891 are regular implies that every stratum consisting of one cap and several discs will have the expected dimension as soon as the component corresponding to the cap is regular .",
    "we introduce the ingredients necessary to prove that this is the case for generic perturbation data :    fix @xmath607 , and let @xmath886 be a smooth map .",
    "we define @xmath892 to be the subspace of @xmath893 consisting of vector fields whose restriction to a boundary segment of @xmath596 labelled by @xmath76 is valued in the tangent space @xmath15 , and whose restriction to the outgoing boundary segment projects to a constant vector in @xmath4 ( note that the foliation @xmath581 defines a smooth map @xmath894 ) .",
    "the projection map @xmath895 is obviously surjective with kernel consisting of vector fields @xmath802 which , on each arc point in the direction of the lagrangian label .",
    "we write @xmath896 for this space .",
    "let @xmath897 denote the space of infinitesimal deformations of the universal perturbation data @xmath898 and @xmath899 , and let @xmath900 denote the analogous space for fixed @xmath596 . by taking the direct sum of the linearized @xmath901 operator and the projection above , we obtain a map @xmath902 note that the surjectivity of this operator implies the desired result by the sard - smale theorem , and the infinitesimal version of lemma [ lem : extend_pert_data_caps ] which shows that @xmath897 surjects onto @xmath900 .",
    "the surjectivity of this operator itself follows from the surjectivity of the linearized @xmath903 operator restricted to the kernel of the projection to @xmath904 : @xmath905 this fact , however , is a standard result in pseudo - holomorphic curve theory . for closed holomorphic curves",
    ", this appears in the textbook @xcite*proposition 3.2.1 ( the lagrangian case can also be found , for example , in @xcite*lemma 2.4 ) .",
    "the next result is the key to our proof of the gluing theorem for mushrooms : let @xmath304 be an element of a moduli space of caps @xmath906 of dimension @xmath189 such that the evaluation map @xmath907 is an immersion near @xmath304 ; let @xmath908 denote a neighbourhood in @xmath906 where this property holds .",
    "let @xmath184 be a rigid element of a moduli space of discs @xmath909 such that @xmath296 agrees with the @xmath594@xmath190 input of @xmath910 . denoting by @xmath617 the result of replacing this input in @xmath910 with @xmath911 , we write @xmath912 for the singular cap in @xmath623 obtained by attaching @xmath184 to @xmath304 .",
    "the next result is standard gluing theorem in pseudo - holomorphic curve theory :    [ lem : gluing_caps ] there exists an embedding @xmath913 differs from the boundary orientation by a sign of @xmath914      the moduli space of shrubs can be most easily oriented using the map @xmath915 obtained by replacing every incoming leaf by one which has infinite length .",
    "the fibre is isomorphic to a half - infinite line , which we trivialize using the distance from the outgoing edge to an incoming leaf .",
    "we write @xmath916 for this function , and use the orientation @xmath917 for shrubs of homeomorphism type @xmath123 ( note that the homeomorphism type is preserved by projection to @xmath156 ) .",
    "lemma [ lem : orientation_stasheff_good ] implies immediately that this formula gives orientations on the top strata of @xmath350 compatible along their common boundary facets .",
    "it remains to understand the inductive behaviour at the boundary of @xmath355 :    [ lem : boundary_orientation_shrubs ] the product orientation on @xmath918 \\times { \\overline{{{\\mathcal t}}}}_{r } \\times { \\overline{{{\\mathcal s}}}}_{d_1 } \\times \\cdots \\times { \\overline{{{\\mathcal s}}}}_{d_r } \\to { \\overline{{{\\mathcal s}}}}_{d}\\ ] ] differs from the boundary orientation by a sign of @xmath919 while the orientation on the stratum @xmath920 \\times { \\overline{{{\\mathcal s}}}}_{d-1 } \\to { \\overline{{{\\mathcal s}}}}_{d}\\ ] ] whose image consists of shrubs whose @xmath189@xmath190 and @xmath921@xmath395 inputs are collapsed differs by a sign of @xmath922 from its orientation as a subset of the boundary .",
    "given the fact that the orientations are consistent throughout the moduli space , it suffices to compute the difference in sign orientation for one topological type of trees .",
    "the case is essentially trivial , while that of can be conveniently checked using the singular shrub appearing in figure [ fig : shrub_breaking ] .",
    "we shall fix the following conventions : whenever a space @xmath802 is given as a transverse fibre product of @xmath100 and @xmath101 over @xmath923 , the short exact sequence @xmath924 determines a fixed isomorphism @xmath925    for example , the isomorphism of equation comes from the choices @xmath926 while equation comes from the choices @xmath927    we first use this fixed choice in order to prove the validity of the signs in proposition [ prop : cup_product_agrees_perturbation ] .",
    "more precisely , we shall prove the validity of the signs in the right hand side , leaving the left hand side to the reader .",
    "for clarity of the argument , we introduce a change of sign of @xmath928 which we use to change the orientation of all moduli spaces of shrubs with inputs @xmath388 and dimension @xmath57 .",
    "the starting point is an element of @xmath413 which consists of a rigid gradient tree in @xmath223 with @xmath929 , and a collection of @xmath357 rigid shrubs in @xmath930 , where @xmath876 is a partition of @xmath388 .",
    "the orientation of the rigid tree is given by equation which can be simplified to : @xmath931 by using the splitting of the inclusion of the tangent space of the @xmath489-fold diagonal whose kernel are the last @xmath357 factors .",
    "next , we decompose the @xmath189@xmath190 copy of @xmath932 on the left as a tensor product : @xmath933 and rearrange the terms in the left hand side as @xmath934 where the first factor is the tensor product of @xmath935 in their usual order , introducing a koszul sign of @xmath936 cancelling @xmath937 from both sides of the equation , we arrive at the isomorphism @xmath938    rigid shrubs are oriented via equation , which can be simplified ( using the same splitting of the inclusion of the tangent space of the diagonal ) as @xmath939 introducing a sign of @xmath940 we obtain an isomorphism @xmath941    the product orientation of the singular shrub we are considering is given by taking the tensor product of equation with a copy of equation for each shrub : @xmath942    we shall compare this with the induced orientation as a boundary . on the left hand side , we permute factors so that we arrive at @xmath943 which introduces a sign of @xmath944    on the right hand side , we rearrange the terms so that they appear in the order @xmath945 the koszul signs amount to : @xmath946 which we prefer to rewrite as @xmath947 the difference between the boundary and product orientations is given by the sum of equations , , , and .",
    "the first three give @xmath948 the term @xmath949 cancels with a term appearing in the definition of the morse category , which introduces an additional sign of @xmath950 .",
    "this can be see by writing @xmath951 using the fact that the gradient tree with inputs @xmath191 and output @xmath137 is rigid .",
    "incorporating these signs coming from the morse category yields @xmath952 and the sum with equals @xmath953    there are additional signs coming from the definition of the functor @xmath954 ( see equation ) , and the change in orientations of @xmath57-dimensional moduli spaces given by equation .",
    "together , these terms contribute @xmath955 after which we use the fact that @xmath956 to simplify the total remaining sign to @xmath957 adding the sign coming from equation , we conclude that the boundary and product orientations are exactly opposite with the convention we have chosen .      throughout this section",
    ", we shall work with the simplified setup in which moduli spaces of mushroom maps are given by the fibre product in .",
    "more precisely , the moduli space of mushrooms @xmath958 is stratified with top strata labelled by a choice of a partition of @xmath617 into sequences @xmath959 .",
    "the stratum determined by this data is the moduli space of shrubs with @xmath357 inputs lying on the images of the projection maps from the moduli spaces of caps @xmath960 , and is therefore given by a fibre product as in the previous section with @xmath961 every such mushroom @xmath649 therefore determines an isomorphism @xmath962    the description of @xmath963 given in equation extends to an isomorphism @xmath964    when @xmath649 is rigid , our choice of orientations on @xmath965 , on @xmath966 ( using the conventions from @xcite ) and the identification @xmath967 fixed in remark [ caps_are_discs ] , therefore determines a unique homomorphism @xmath968    we write @xmath969 for the induced map on orientation bundles . in order to get the correct sign , we first introduce the notation @xmath970 where @xmath971 is the sum of the degrees of the elements of @xmath634 .",
    "the sign used to define @xmath674 is given by @xmath972    having fixed the signs in the functor @xmath954 , we have the necessary ingredients to prove proposition [ caps_are_discs ] .",
    "the proof considers the @xmath236 types of boundary strata discussed in section [ sec : gluing_mushrooms ] , and shows that each such stratum contributes with the correct sign to equation , after taking into account the sign , as well as the signs that go into the construction of @xmath268 and @xmath19 .",
    "more precisely , it is enough to show that , after taking these artificial signs into account , the difference between the boundary and product orientation on each stratum of @xmath973 is given by the sign claimed in the @xmath0 equation , up to a universal constant , independent of the stratum ( but that is allowed to depend on @xmath617 ) .",
    "the proof is a tedious computation , with the cases and from section [ sec : gluing_mushrooms ] respectively following from the computations performed in @xcite and the previous section .",
    "indeed , whenever a rigid disc bubbles off the @xmath189@xmath190 cap , the only affected term in equation is @xmath974 .",
    "this is exactly the sign convention for holomorphic discs we have used in constructing the fukaya category , see @xcite*equation ( 12.24 ) .",
    "similarly , when the stem breaks into a gradient tree together with several shrubs , only the term @xmath975 changes .",
    "the integer @xmath976 agrees with the codimension of @xmath977 as a chain on @xmath4 , so these are exactly the conventions used in the previous section while orienting moduli space of shrubs .",
    "therefore , we shall only discuss cases and , which correspond to terms which are supposed to cancel pairwise . in terms of orientations",
    ", we must therefore show that , whenever given a singular mushroom map lying in such an `` internal '' boundary , there is no difference between the orientations obtained by considering it as a boundary stratum of the two components described in cases and . as in the previous section , it is convenient to change the orientation of the @xmath57-dimensional moduli spaces as well .",
    "the sign we use is given by @xmath978    we will start with case , for which the orientation is induced by the isomorphism of equation . for simplicity ,",
    "we begin by choosing a splitting of the inclusion of the tangent space @xmath979-diagonal of @xmath4 , corresponding to the inclusion of all but the first factor . introducing a sign of @xmath51",
    ", we can simplify to an isomorphism @xmath980 the next step is to use the isomorphism to decompose @xmath981 into its constituent factors , then cancel the resulting copy of @xmath982 with its matching factor on the right hand side ( this is the @xmath921@xmath395 factor starting at the left ) .",
    "the resulting koszul sign is @xmath983 decomposing @xmath984 as well , we find the expression @xmath985 in the right hand side . using the identification of @xmath484 with @xmath486 discussed in remark , and lemma [ lem : boundary_orientation_stasheff ]",
    "we may replace this by @xmath986 at the cost of a sign given by @xmath987 note that in lemma [ lem : boundary_orientation_stasheff ] , @xmath165 plays the role of @xmath988 , @xmath163 that of @xmath989 , and @xmath189 is our @xmath990 ( making for incompatible notations ) .",
    "we now move the normal co - vector @xmath445 to the beginning of the right hand side , using lemma [ lem : boundary_orientation_shrubs ] to cancel with the normal vector of the inclusion of @xmath991 into @xmath965 in which the @xmath189@xmath190 and @xmath921@xmath395 incoming leaves are collapsed .",
    "the resulting sign is : @xmath992 the final output of this procedure is an isomorphism @xmath993 which is exactly the analogue of the isomorphism of equation for the case . in particular , the difference between the orientations of a singular shrub as a boundary in cases and is given by the sum of the expressions appearing in equations , , and : @xmath994 we now consider the effect of the sign changes encoded in equation .",
    "first , we note that the difference between @xmath995 on either side is given by @xmath996 from which we conclude that the second term changes by @xmath997 since the moduli space we are studying is @xmath57-dimensional , we have an equality ( modulo @xmath36 ) @xmath998 which readily implies that cancels the third term of equation",
    ". the reader may easily check that the remaining terms of equation exactly cancel with the first two terms of equation , completing our argument .",
    "in this section , we shall show that our construction , which so far yields theorem [ thm : general_result ] whenever @xmath1 is a point , can be extended to the general case .",
    "the starting point is the observation that , whenever two lagrangian manifolds @xmath2 and @xmath3 meet cleanly along a submanifold @xmath1 , we have a perfect pairing on the normal bundles @xmath999 and @xmath1000 ; in particular these normal bundles are dual , hence isomorphic as unoriented vector bundles .",
    "conversely , given smooth embeddings of a compact manifold @xmath1 into @xmath2 and @xmath3 with normal bundles isomorphic to a given vector bundle @xmath18 , the choice of such an isomorphism determines a plumbing of @xmath1001 and @xmath1002 along a neighbourhood of @xmath1 .",
    "explicitly , we fix a riemannian metric on @xmath1 and on the vector bundle @xmath1003 , which induces a metric on the total space .",
    "we may assume that we are given a riemannian metric on @xmath15 whose restriction to a neighbourhood of @xmath1 is isometric to the disc bundle of radius @xmath236 in @xmath16 , with @xmath38 corresponding to the disc bundle of radius @xmath36 .",
    "by weinstein s theorem , there is a neighbourhood of @xmath1 @xmath1004 which is symplectomorphic to the disc bundle of a symplectic vector bundle over a neighbourhood of the zero section in @xmath1005 ; this vector bundle is isomorphic to the pullback of @xmath1006 to the cotangent bundle of @xmath1 . by construction",
    ", @xmath1006 carries two lagrangian sub - bundles obtained as the inclusion of the real part @xmath1003 and the imaginary part @xmath1007 .",
    "the weinstein chart may be chosen so that the image of @xmath76 is the union ( over all points in @xmath1 ) of the real parts .",
    "we construct a manifold @xmath1008 by gluing disc cotangent bundles of @xmath2 and @xmath3 along this common subset after complex multiplication in @xmath1006 . as",
    "this map is an exact symplectomorphism for the appropriate liouville form , @xmath24 is again an exact symplectic manifold with exact lagrangian embeddings of @xmath2 and @xmath3 intersecting cleanly along @xmath1 . in fact , we can choose a liouville form on @xmath24 which away from @xmath1 agrees with the canonical forms on @xmath237 , and which near @xmath1 can be written as a sum @xmath1009 where the first form the pullback of the canonical form on the cotangent bundle , and the second defines a flow which radially rescales each fibre .",
    "the fibrewise squared norm of a point in @xmath1010 ( considered as a vector in either @xmath1011 or @xmath1012 ) , defines a map @xmath1013 as in equation , we define @xmath1014 this is a smooth manifold whose boundary is transverse to the liouville flow of , and which away from a neighbourhood of @xmath1 agrees with the @xmath262-neighbourhood of the zero section in @xmath1015 . as before ,",
    "we write @xmath1016 for the liouville subdomain obtained by extending this submanifold to all of @xmath24 .",
    "condition now makes sense in the clean intersection case as well , and the construction of the fukaya category proceeds as in the transverse case .",
    "the analogue of condition is the requirement that the floer complexes @xmath1017 vanish in degrees smaller than @xmath126 or larger than @xmath1018 .",
    "this is easy to achieve if @xmath1 is connected by shifting the grading on @xmath2 .",
    "otherwise , one needs to pick an appropriate complex volume form on the plumbing in order for this result to hold ( using the fact that the space of complex volume forms is an affine space over @xmath1019 , and that @xmath1020 controls the difference between this space and @xmath1021 ) .",
    "however , if we were considering the situation of theorem [ thm : general_result ] , the total space @xmath11 may not admit any complex volume form for which the floer cohomology groups are supported in such a degree . in this case",
    ", there are integers @xmath1022 labelled by the components of @xmath1 such that the floer cohomology @xmath1023 splits as a direct sum , with the summand corresponding to @xmath1024 supported in degrees lying in the interval @xmath1025 $ ] . with appropriate choices of perturbation data",
    ", we may ensure that the floer complexes also admit such a splitting .",
    "let @xmath39 and @xmath41 respectively denote the closures of @xmath40 and @xmath107 in @xmath2 and @xmath3 ; these are diffeomorphic to the disc bundle associated to @xmath16 , and the plumbing construction fixes such a diffeomorphism .",
    "note that the construction of the morse category in section [ sec : stasheff ] did not make any assumption about @xmath38 ( other than the fact that their closures are smooth manifolds with boundary ) .",
    "in particular , the construction may be extended to the case of clean intersections .",
    "however , whenever @xmath39 is disconnected , we need a generalisation which accounts for the fact floer cochains are not necessarily supported in degree @xmath1026 $ ] and @xmath1027 $ ] for a fixed integer @xmath189 .",
    "we choose integers @xmath1022 indexed by the component of @xmath39 and define morphism spaces @xmath1028 \\\\\\",
    "hom_{*}^{{\\mathrm{m}}}(q_2,q_1 ) & = \\bigoplus_{k=1}^{r } cm^{*}(f^{k}_{2,1})[-m_k]\\end{aligned}\\ ] ] where @xmath1029 is the restriction of @xmath122 to the @xmath189@xmath190 component of @xmath197 and we are using the standard notation from homological algebra for a shift in degree ; the grading on @xmath1030 is unchanged . the shifts in gradings do not affect the degree of the contribution of each gradient tree to the higher products , so that these groups are morphisms spaces in a @xmath12-graded @xmath0 category . to see this ,",
    "assume for simplicity that we are considering a gradient tree with @xmath750 .",
    "an argument analogous to the one given in the proof of lemma [ lem : compactness_stasheff ] implies that , in this case , every labelled gradient tree that contributes to the morse category has the property that the numbers of external edges labelled by @xmath1031 and @xmath1032 agree for every @xmath479 , so that the formula for expected dimension still holds .",
    "the generalisation of this argument to the case @xmath1033 is left to the reader .",
    "let us now choose simplicial triangulations @xmath353 of @xmath15 and assume that there is a pair of codimension @xmath126 submanifolds with boundary @xmath1034 which are the closures of top dimensional simplices , each properly including @xmath38 as a deformation retract .",
    "we assume that the diffeomorphism @xmath1035 determined by the plumbing construction extends to a cellular homeomorphism @xmath1036    writing @xmath1037 for the induced subdivision on an abstract manifold @xmath626 , and @xmath1038 for the triangulations on the components of this space , we define a category @xmath1039 with objects @xmath2 and @xmath3 , and morphism spaces @xmath1040 \\\\ { \\operatorname{hom}}_{*}^{{\\mathrm{s}}}(q_2 , q_1 ) & = \\bigoplus_{k=1}^{r }   c^{*}({{\\euscript n}}^{k } , \\partial { { \\euscript n}}^{k})[-m_k],\\end{aligned}\\ ] ] the construction of composition maps and the proofs that the appropriate diagrams commute follows word by word the arguments given in the case @xmath1041 is the closure of a simplex .",
    "we simply observe that the composition maps still have degree @xmath126 because the different components of @xmath1037 do not interact , and we have chosen changes in gradings which differ by a sign for the morphisms going in opposite directions .",
    "the construction of a functor from the simplicial to the morse category relied on an appropriate choice of dual subdivision . in the clean intersection case , we choose @xmath77 , and write @xmath1042 for those cells dual to interior cells of @xmath1037 , replacing condition by the assumption that the cells of @xmath1043 intersect the boundary of @xmath1044 transversely , and that we have nested weak homotopy equivalences @xmath1045 whenever @xmath1 is disconnected , we assume that the choices of shifts in grading in the simplicial and morse categories agree . all arguments",
    "extend with only minor modifications ; e.g. in lemma [ lem : compactness_shrubs ] , we should require the appropriate neighbourhood of the boundary of @xmath41 not to intersect any cell of @xmath1046 which is dual to a cell whose interior lies entirely in @xmath626 .      in order to construct a functor from the fukaya category to the morse category ,",
    "we start by choosing the integers @xmath1047 in equation , whenever @xmath1 is disconnected , to agree with those coming from floer theory as discussed in addendum [ add : generalise_floer ] .    the next step is to construct a foliation of @xmath1048 which we shall extend to @xmath24 . near each point @xmath1049",
    ", @xmath1048 splits as the product of the disc cotangent bundle of @xmath1 with a domain in @xmath1050 .",
    "we equip this region with the product of the cotangent foliation of @xmath1005 with the model foliation @xmath554 on @xmath1051 ( with @xmath230 replaced by @xmath1050 ) constructed in section [ sec : floer_to_morse ] .",
    "we claim that this foliation of @xmath1050 can be chosen to be invariant under the action of the orthogonal group @xmath1052 embedded in unitary group ( in figure [ fig : foliation_model_dim_1 ] , this corresponds to the invariance under rotation by @xmath1053 ) , which is the structure group for the normal bundle of @xmath1005 in @xmath24 . to see this , recall that we first constructed a foliation by affine lagrangian planes in equation , which we then deformed , using a hamiltonian flow .",
    "since only the norm of a point in @xmath1054 enters in the construction in equation , the corresponding foliation is tautologically invariant under @xmath1055 ; one can then easily check that the construction of the deforming hamiltonian flow can be made invariant , say by averaging it over the action of the orthogonal group .",
    "we conclude that the foliations defined locally on neighbourhoods of points of @xmath1 are compatible with each other , and define a foliation on a neighbourhood of @xmath1 in @xmath24 which agrees with the cotangent bundle foliations of @xmath264 away from a neighbourhood of @xmath1 , and hence extends to all of @xmath24 . to construct a functor in this case , note that condition makes sense as stated , but that we can not choose @xmath122 to be given by the squared length of a normal vector as this function is only morse - bott .",
    "however , choosing @xmath122 to be a @xmath468-small generic perturbations of this fibrewise quadratic function , one concludes that , away from a small neighbourhood of @xmath1 , the distance to @xmath1 increases ( or decreases ) along the appropriate gradient flow , to that the analogue of lemma [ lem : morse_function_grows ] holds .    with the choice of hamiltonian perturbations coming from ,",
    "we obtain an identification between generators of floer and morse complexes , and we may carry through the remainder of the construction of an @xmath0 functors .",
    "the discussion of which moduli spaces are counted , as well as issues of transversality require no modification . as to compactness , note that @xmath1056 defines a lagrangian submanifold of the total space of @xmath1057 , and hence a lagrangian in @xmath24 locally near @xmath1 .",
    "in analogy with equation , we consider the submanifold of @xmath24 @xmath1058 where the subscripts stand for the radii of various neighbourhoods . working in charts near each point @xmath1049",
    ", the discussion of section [ sec : comp - curv - leaves ] shows that the boundary of this manifold with corners is transverse to the liouville flow , and hence can be smoothed to a liouville subdomain @xmath1059 .",
    "as long as the parameter @xmath262 in the construction of the foliation is chosen much smaller than @xmath660 , lemma [ lem : cap_cpactness ] , proved in section [ sec : comp - curv - leaves ] by using the contact type condition near @xmath1060 and @xmath286 applies in the clean intersection case as well ."
  ],
  "abstract_text": [
    "<S> we prove that the algebra of singular cochains on a smooth manifold , equipped with the cup product , is equivalent to the @xmath0 structure on the lagrangian floer cochain group associated to the zero section in the cotangent bundle . </S>",
    "<S> more generally , given embeddings with isomorphic normal bundles of a closed manifold @xmath1 into manifolds @xmath2 and @xmath3 , we construct a differential graded category from the singular cochains of these spaces , and prove that it is equivalent to the @xmath0 category obtained by considering exact lagrangian embeddings of @xmath2 and @xmath3 which intersect cleanly along @xmath1 .    1em </S>"
  ]
}