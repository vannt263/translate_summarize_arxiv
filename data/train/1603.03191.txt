{
  "article_text": [
    "in this article we show that the adele class space corresponding to the trivial grossencharacter . ] of @xmath6 admits a natural structure of tropical curve .",
    "we follow the strategy outlined in @xcite and investigate the algebraic geometric structure of the scaling site @xmath0 obtained from the arithmetic site @xmath1 by extension of scalars from the boolean semifield @xmath2 to the tropical semifield @xmath3 ( _ cf . _  figure  [ scalingpic ] ) . as a grothendieck topos @xmath0",
    "is described as @xmath4 : the topos of @xmath5-equivariant sheaves ( of sets ) on the half - line and our first result ( theorem [ scaltop ] ) states that the isomorphism classes of points of this topos form the basic sector of the adele class space of @xmath6    [ scaltopintro]the space of points of the topos @xmath4 is canonically isomorphic to @xmath12 .",
    "this result provides the missing geometric structure on the adele class space since the topos @xmath4 inherits , from its construction by extension of scalars , a natural sheaf @xmath13 of regular functions .",
    "we call _ scaling site _",
    "the semi - ringed topos @xmath14 so obtained .",
    "the sections of the sheaf @xmath13 are convex , piecewise affine functions with integral slopes . in appendix [ apptropic ]",
    "we review the well known results on the localization of zeros of analytic functions showing in which sense the tropical half - line @xmath15 , endowed with the sheaf of convex piecewise affine functions with integral slopes , provides a suitable structure for the localization ( both in the archimedean and non - archimedean case ) of zeros of analytic functions in the punctured unit disk .",
    "the new component supplied with the scaling site is the action of @xmath5 by multiplication on the tropical half - line @xmath16 . on analytic functions",
    "this action is given by the transformation @xmath17 for @xmath18 , _",
    "i.e. _  the action of the degree @xmath19 endomorphism @xmath20 on the punctured unit disk .",
    "the structure sheaf @xmath13 of @xmath0 is a sheaf of semirings of  characteristic one \" ( _ i.e. _  of semirings in which @xmath21 ) and the naturalness of this structure is justified at the conceptual level ( see appendix [ appzmax ] ) by two facts .",
    "first , the endomorphisms of any object admit a _",
    "canonical _ structure of semiring in any category with finite products and coproducts when the canonical morphisms from coproducts to products are isomorphisms .",
    "second , passing from rings to semirings only adds one more object to the list of finite fields @xmath22 , namely the boolean semifield @xmath2 , and only one object to the list of fields whose multiplicative group is cyclic , _ i.e. _  the semifield @xmath23 whose multiplicative group is infinite cyclic .",
    "both @xmath2 and @xmath23 are semirings of characteristic one .     to @xmath0 [ scalingpic ] ]    in section [ sectsheafstalks ] we describe the stalks of the structure sheaf @xmath13 and show ( theorem [ structure3 ] ) that the points @xmath24 of the scaling site defined over @xmath3 coincide with the points @xmath25 of the arithmetic site defined over the same semifield .",
    "as stated in @xcite a long term goal of this project is to develop an adequate version of the riemann - roch theorem in characteristic @xmath26 , suitable to transplant the prh proof of weil to the riemann zeta function . in this paper",
    "we test this idea by restricting our geometric structure to the periodic orbits of the scaling flow , _",
    "i.e. _  to the points of @xmath4 over the image of @xmath27 ( _ cf . _  figure  [ scalingpic ] and @xcite ,  5.1 ) .",
    "we find that for each prime @xmath7 the corresponding circle of length @xmath28 is endowed with a quasi - tropical structure which turns this orbit into a variant @xmath8 of the classical jacobi description @xmath9 of an elliptic curve .",
    "the structure sheaf @xmath29 of @xmath10 is obtained by restriction of @xmath13 to @xmath10 and its sections are periodic functions @xmath30 , @xmath31 , which are convex , piecewise affine and whose derivatives take values in the group @xmath32 of rational numbers with denominators a power of @xmath7 . when suitably understood in conceptual terms using cartier divisors , the notions of rational functions , divisors , etc .",
    "on @xmath10 are all meaningful .",
    "the global rational functions form a semifield @xmath33 ( of characteristic one ) .",
    "a new feature of this construction is that the degree of a divisor can be any real number .",
    "we introduce an invariant @xmath34 for divisors @xmath35 on @xmath10 and determine , in theorem [ thmjaccp ] , the precise structure of the quotient @xmath11 of the abelian group of divisors by the subgroup of principal divisors    [ thmjaccpintro ] the map @xmath36 is an isomorphism of abelian groups @xmath37    we develop , in analogy with the non - archimedean version established in @xcite , the theory of theta functions on @xmath10 , starting with the following infinite sums as the analogues for the max of two real numbers ] of the infinite products defining classical theta functions @xmath38 we define @xmath39-functions @xmath40 for @xmath41 , @xmath42 and @xmath43 .",
    "they are obtained by applying to the basic theta function @xmath44 defined above the symmetries associated to the various incarnations ( arithmetic , relative , absolute , geometric ) of the  frobenius \" operator in this context .",
    "this part is discussed in details in  [ sectsymm ] . the main output ( _ cf .",
    "_  theorem [ thmtheta1 ] ) is provided by the following    any function @xmath45 is canonically expressed in terms of theta functions associated to the principal divisor of @xmath46 , and a constant @xmath47 @xmath48    for each divisor @xmath35 on @xmath10 we define the corresponding riemann - roch problem with solution space @xmath49 .",
    "we introduce the continuous dimension @xmath50 of this @xmath51-module using a limit of normalized topological dimensions and find that @xmath50 is a real number . the topological dimension used in this part",
    "is the lebesgue covering dimension which assigns to any topological space @xmath52 an integer @xmath53 counting the minimal overlap of refinements of open covers .",
    "the appearance of arbitrary positive real numbers as continuous dimensions of @xmath50 is due to the density in @xmath54 of the subgroup @xmath55 and the fact that continuous dimensions are defined as limits @xmath56 of normalized dimensions @xmath57 where @xmath58 is a natural filtration of @xmath59 involving the @xmath7-adic norms of the derivatives .",
    "we interpret this result as the characteristic @xmath26 counterpart of the statement for matroid @xmath60-algebras and the type ii normalized traces as in @xcite .",
    "the continuous dimensions which affect arbitrary positive _ real _ values appear when passing to the von neumann algebra of type ii obtained as the weak closure of the @xmath60-algebra using the trace to perform the completion .",
    "finally , in theorem [ rrperiodic ] we prove that the riemann - roch formula holds for @xmath10    [ rrperiodicintro ] let @xmath61 be a divisor , then the limit @xmath62 exists and one has the riemann - roch formula : @xmath63    by comparing the periodic orbit @xmath10 with a tropical elliptic curve and our riemann - roch theorem with the tropical riemann - roch theorem of @xcite and its variants we find several fundamental differences . first , for an elliptic tropical curve @xmath64 given by a circle of length @xmath65 , the structure of the group @xmath66 of divisor classes is inserted into an exact sequence of the form @xmath67 ( _ cf._@xcite ) , while for the periodic orbit @xmath10 the group of divisor classes is @xmath68 .",
    "the second fundamental difference is the appearance of continuous dimensions in our riemann - roch theorem .",
    "the source for these differences is seen when one compares the structure sheaf of @xmath10 with that of the elliptic tropical curve @xmath69 , @xmath70 .",
    "let us use for @xmath10 the variable @xmath71 , so that the periodicity condition @xmath72 becomes translation invariance by @xmath28 .",
    "then the local sections of the structure sheaf of @xmath10 are in particular piecewise affine in the parameter @xmath73 and this condition is expressed , in the variable @xmath74 , by the piecewise vanishing of @xmath75 , where @xmath76 is the elliptic translation invariant operator @xmath77 on the other hand , the local sections of the structure sheaf of @xmath64 are in particular piecewise affine in the parameter @xmath74 , and this condition is expressed , in the variable @xmath74 , by the piecewise vanishing of @xmath78 .",
    "thus one readily sees that the difference between the two sheaves is due to the presence of the sub - principal term @xmath79 in .      for any abelian ordered group @xmath80",
    "we denote by @xmath81 the semifield obtained from @xmath80 by applying the max - plus construction _",
    "i.e. _  the addition is given by the max and the multiplication by the addition in @xmath80 . since @xmath82 is isomorphic to @xmath3 by the exponential map ( _ cf._@xcite ) we shall pass freely from the  additive \" notation @xmath51 to the  multiplicative \" one @xmath3 .",
    "in this section we define the topos underlying the scaling site @xmath0 as a grothendieck site , _ i.e. _  as a small category @xmath83 endowed with a grothendieck topology @xmath84 . in  [ sectexts ]",
    "we shortly explain its structure as naturally arising from the arithmetic site @xmath1 by extension of scalars from @xmath2 to @xmath3 . in  [ sectcatc ] we provide the definition of the small category @xmath83 and in  [ sectgtop ] we describe its grothendieck topology .",
    "the arithmetic site @xmath1 of @xcite is defined using the action of @xmath5 by frobenius endomorphisms @xmath85 on the semifield @xmath23 of characteristic one . to define the extension of scalars from @xmath2 to @xmath3 we consider the semiring @xmath86 obtained as the reduction of the tensor product @xmath87 and we endow @xmath88 with the @xmath51-linear endomorphisms @xmath89 .",
    "then , by applying the legendre transform we identify @xmath88 with the semiring of convex piecewise affine functions on @xmath90 with slopes in @xmath91 and only finitely many discontinuities of the derivative .",
    "these functions are endowed with the pointwise operations of functions taking values in @xmath51 .",
    "the operation of reduction from @xmath87 to @xmath86 is obtained as described in @xcite lemma 6.20 and proposition 6.21 .",
    "more precisely , the elements of @xmath88 are given by the convex hull @xmath64 of the union of finitely many quadrants of the form @xmath92 , for @xmath93 , where @xmath94 and @xmath95 .",
    "to determine this convex hull it is enough to know which half planes @xmath96 contain it , and any such half - plane has the form @xmath97 where @xmath98 and @xmath99 .",
    "thus @xmath64 is uniquely determined by the function @xmath100 and this function is given in terms of the finitely many vertices @xmath101 of the polygon @xmath64 by the formula @xmath102    .5 , title=\"fig : \" ]    .5 , title=\"fig : \" ]    note that @xmath103 is meaningful also for @xmath104 and that @xmath105 .",
    "one then obtains the required identification    [ legendrelem ] the map @xmath106 where @xmath103 , for @xmath107 has been defined in , is an isomorphism of @xmath108 with the semiring @xmath88 of continuous convex piecewise affine functions on @xmath90 with slopes in @xmath91 and only finitely many discontinuities of the derivative .",
    "these functions are endowed with the pointwise operations of functions with values in @xmath51 .",
    "it follows by the formula that the function @xmath109 belongs to @xmath88 since the slopes @xmath94 , and the discontinuities of the derivative only occur when there exists a pair of vertices @xmath110 such that @xmath111 .",
    "moreover @xmath109 is convex by construction as a supremum of finitely many affine functions .",
    "the map @xmath112 is evidently injective .",
    "the surjectivity is a consequence of the fact that an element @xmath113 is a finite supremum of affine functions @xmath114 with @xmath115 and @xmath116 , and thus of the form @xmath109 where @xmath64 is the convex hull of the union of quadrants @xmath117 .",
    "the pointwise operations of functions with values in @xmath82 are given for the addition by the rule @xmath118 , where @xmath119 .",
    "this corresponds to the @xmath120 in and thus to the convex hull of the union in terms of the convex sets @xmath64 .",
    "this shows that the map @xmath106 is additive .",
    "it is also multiplicative , _",
    "i.e. _  @xmath121 .",
    "this follows using and the identity @xmath122 holding for any two finite subsets @xmath123 .",
    "[ propextscal ] @xmath124  under the isomorphism @xmath65 the endomorphism @xmath89 of @xmath108 corresponds to the action of @xmath5 on @xmath90 by multiplication.@xmath125  the following map identifies the half line @xmath16 with the space of characters of @xmath88 @xmath126    @xmath124  we use multiplicative notations both for @xmath23 and @xmath51 and represent elements of @xmath127 in terms of finite sums @xmath128 with @xmath94 and @xmath95 . in these terms",
    "the isomorphism @xmath129 is such that @xmath130 with @xmath131 one has @xmath132",
    "@xmath125  let @xmath133 be the function @xmath134 .",
    "an element @xmath135 is uniquely specified by @xmath136 and since @xmath137 and @xmath138 ( as the morphism @xmath139 preserves the multiplicative unit ) one has @xmath140 . by multiplicativity one",
    "gets @xmath141 for any @xmath142 and by @xmath51-linearity that @xmath143 for @xmath144 . by additivity one",
    "then gets that for any @xmath145 , @xmath146 .",
    "one has in general , for a semiring @xmath147 of characteristic @xmath26 , a natural isomorphism @xmath148 given by restriction of @xmath149 to the canonical image of @xmath147 .",
    "taking @xmath150 , this shows that the space @xmath151 of characters of @xmath152 is the same as @xmath153 .      the topos @xmath4 is defined by assigning a small category @xmath83 endowed with a grothendieck topology @xmath84 .",
    "we first describe @xmath83 .",
    "the objects of @xmath83 are the ( possibly empty ) bounded open intervals @xmath154 including those of the form @xmath155 for @xmath156 .",
    "the morphisms between two objects of @xmath83 are defined by @xmath157 if @xmath158 . by definition",
    "@xmath159 _ i.e. _  the one point set , for any object @xmath160 of @xmath83 .",
    "thus the empty set is the initial object of @xmath83 .",
    "the following lemma shows that pullbacks exist in the category @xmath83    [ lemcatc ] let @xmath161 ( @xmath162 ) and consider two morphisms @xmath163 given by integers @xmath164 .",
    "let @xmath165 be their lowest common multiple , @xmath166 and let @xmath167 .",
    "then @xmath160 is an object of @xmath83 , and if it is non - empty one has @xmath168 and @xmath169 is the pullback of the @xmath170 . when @xmath171 the pullback of the @xmath170 is the initial object of @xmath83 .    by construction @xmath172",
    "is an intersection of bounded open intervals and is thus an object of @xmath83 .",
    "let @xmath173 be morphisms such that @xmath174 . if @xmath175 it contains a @xmath176 and one has @xmath177 for a unique @xmath178 .",
    "one has @xmath179 and @xmath180 so that @xmath181",
    ". moreover the map @xmath173 is the composite of @xmath182 with @xmath168 .",
    "this shows that @xmath169 is the pullback of the @xmath170 .",
    "it also shows that if there exists @xmath175 and morphisms @xmath173 such that @xmath174 , then @xmath183 . otherwise _",
    "i.e. _  if this implies @xmath184 then one easily sees that the empty set is indeed the pullback .",
    "a grothendieck topology @xmath84 ( _ cf . _  @xcite definition iii.2.1 ) on a small category @xmath83 associates to every object @xmath185 of the category a collection @xmath186 of sieves of @xmath185 , ( _ i.e. _  of families , stable under right composition , of morphisms with codomain @xmath185 ) , such that :    @xmath187  the maximal sieve @xmath188 belongs to @xmath186    @xmath187  @xmath189 , @xmath190 @xmath191 @xmath192 , where @xmath193    @xmath187  for @xmath189 , and any sieve @xmath147 of @xmath185 @xmath194 when the small category @xmath83 admits pullbacks one can associate a grothendieck topology @xmath84 to a basis @xmath195 , _",
    "i.e. _  a function which assigns to any object @xmath185 a collection @xmath196 of families of morphisms with codomain @xmath185 by the condition @xmath197 the above three conditions on @xmath84 are derived from the following three conditions on @xmath195 : ( _ cf . _  @xcite definition iii.2.2 ) :    1 .   for any isomorphism @xmath46 with range @xmath185 the singleton",
    "@xmath198 is a covering .",
    "the pullback of a covering of @xmath185 by any morphism @xmath199 is a covering of @xmath160 .",
    "3 .   given a covering @xmath200 of @xmath185 and for each @xmath201 a covering @xmath202 of @xmath203 ,",
    "the composite @xmath202 is a covering of @xmath185 .",
    "[ proptop ] @xmath124  for each object @xmath185 of @xmath83 , let @xmath196 be the collection of all ordinary covers @xmath204 of @xmath185 .",
    "then @xmath195 defines a basis for a grothendieck topology @xmath84 on @xmath83.@xmath125  the grothendieck topology @xmath84 is subcanonical.@xmath205  the category @xmath206 of sheaves of sets on @xmath207 is canonically isomorphic to the category of @xmath5-equivariant sheaves of sets on @xmath16 .",
    "@xmath124  the only isomorphisms in @xmath83 are the identity maps , thus one verifies 1 . to check the condition 2 . , we let @xmath208 be a morphism in @xmath83 and @xmath204 a covering of @xmath185 .",
    "then it follows from lemma [ lemcatc ] that the pullback of the cover is given by @xmath209 this defines a covering of @xmath160 .",
    "finally the condition 3 . is a standard fact on ordinary covers of a topological space ( here chosen to be @xmath16).@xmath125  we prove that any representable presheaf is a sheaf on @xmath207 . for a fixed object @xmath185 of @xmath83 and an arbitrary open subset @xmath210 of @xmath16 one sets @xmath211",
    "this determines the subsheaf of the constant sheaf @xmath5 which is given by the local condition around @xmath73 : @xmath212 . @xmath205  an @xmath5-equivariant sheaf ( of sets ) on @xmath16 gives by restriction to @xmath83 an object of @xmath206 .",
    "conversely let @xmath213 be an object of @xmath206 , and @xmath210 an arbitrary open subset of @xmath16 .",
    "let @xmath214 be a covering of @xmath210 by bounded open intervals .",
    "take the limit @xmath215 in @xmath216 of the diagram @xmath217 indexed by pairs @xmath218 , @xmath219 and arrows @xmath220 , @xmath221 .",
    "this is the equalizer of the two maps @xmath222 since @xmath213 is an object of @xmath206 the above equalizer does not depend upon the choice of the covering of @xmath210 by bounded open intervals , and defines a sheaf of sets on @xmath16 endowed with an action of @xmath5 compatible with the action of @xmath5 on @xmath16 .",
    "[ empty3]the setting @xmath223 is imposed if one wants the grothendieck topology @xmath84 to be subcanonical .",
    "indeed , any sheaf evaluated on the empty set gives the one point set @xmath224 .",
    "in this section we investigate the structure of the points of the topos @xmath4 and prove theorem [ scaltop ] which provides a canonical bijection between the space of these points ( up to isomorphism ) and the sector @xmath225 of the adele class space of @xmath6 .",
    "it follows from @xcite corollary vii.5.4 , that the points of the topos @xmath206 correspond by means of an equivalence of categories to continuous , flat functors @xmath226 . moreover again from @xcite theorem vii.6.3",
    ", one knows that a functor @xmath226 is flat iff it is filtering , _ i.e. _",
    "@xmath227 fulfills the three conditions reported in the following definition    [ defnfiltering ] a functor @xmath226 is filtering iff    1 .",
    "@xmath228 for some object @xmath64 of @xmath83 .",
    "2 .   given @xmath229 @xmath162",
    ", there exist an object @xmath64 of @xmath83 , an element @xmath230 and morphisms @xmath231 such that @xmath232 .",
    "3 .   given two morphisms @xmath233 in @xmath83 and @xmath230 such that @xmath234 , there exists an object @xmath235 of @xmath83 , an element @xmath236 and a morphism @xmath237 of @xmath83 such that @xmath238 and @xmath239 .",
    "by @xcite , lemma vii.5.3 , a flat functor @xmath226 is continuous iff it sends covering sieves to epimorphic families .",
    "[ lemcont1 ] let @xmath226 be a flat functor and let @xmath84 be the grothendieck topology on @xmath83 generated by a basis @xmath195 .",
    "then @xmath227 is continuous iff for any object @xmath210 of @xmath83 and a covering @xmath240 the family of maps @xmath241 is jointly surjective .",
    "since any covering sieve @xmath242 contains a covering from the basis , the condition of the lemma implies that @xmath227 sends covering sieves to epimorphic families .",
    "conversely let @xmath243 , then the associated covering sieve @xmath244 @xmath245 gives an epimorphic family @xmath246 iff the family @xmath247 is jointly surjective .",
    "the next proposition shows that any ( non - trivial ) rank one subgroup @xmath249 defines a point of the topos @xmath4 .",
    "[ proppoint ] @xmath124  let @xmath80 be a ( non - trivial ) rank one subgroup of @xmath54 , then the equality @xmath250 defines a flat continuous functor @xmath251 .",
    "@xmath125  the map @xmath252 which associates to a rank one subgroup of @xmath54 the point of the topos @xmath4 represented by the flat continuous functor @xmath253 provides an injection of the space of ( non - trivial ) rank one subgroups of @xmath54 into the space of points of the topos @xmath4 up to isomorphism .",
    "@xmath124  we set @xmath254 .",
    "let @xmath255 be a morphism in @xmath83 , then since @xmath256 the equality @xmath257 defines a subfunctor of the covariant functor @xmath258 , @xmath259 .",
    "given a covering @xmath260 the family of maps @xmath261 is jointly surjective since @xmath262 , thus lemma [ lemcont1 ] shows that @xmath253 is continuous .",
    "we show that @xmath253 is filtering . since @xmath80 is non - trivial , @xmath263 and this gives condition @xmath26 .",
    "next , given @xmath264 we let @xmath265 , @xmath266 be such that @xmath267 .",
    "let @xmath268 be an open interval containing @xmath269 and such that @xmath270 .",
    "this defines an object @xmath268 of @xmath83 .",
    "one has @xmath271 and the morphisms @xmath272 fulfill @xmath273 .",
    "this gives condition @xmath274 .",
    "finally , if @xmath275 , @xmath276 are two morphisms in @xmath83 and @xmath277 is such that @xmath278 , then since @xmath156 one gets that @xmath279 and thus the condition @xmath280 holds .",
    "@xmath125  let @xmath281 be the continuous flat functor associated to @xmath249 . given a point @xmath282 , we let @xmath283 be a basis of neighborhoods of @xmath73 of bounded open intervals",
    ". then one has @xmath284 this shows that one can recover the subgroup @xmath249 from the continuous flat functor @xmath253 .",
    "moreover it shows that a morphism of functors from @xmath253 to @xmath285 exists iff @xmath286 and hence that the isomorphism class of the point @xmath248 uniquely determines @xmath249 .",
    "the main result of this subsection ( theorem  [ scaltop ] ) states the existence of a canonical isomorphism between the points @xmath287 of the arithmetic site over @xmath3 and the points of the topos @xmath4 . to this end",
    "we shall need to state first several technical lemmas .",
    "[ lemflatcont1]let @xmath226 be a continuous flat functor .",
    "then the following facts hold@xmath124  let @xmath288 ( @xmath162 ) be objects of @xmath83 with @xmath289 .",
    "then the images @xmath290 are disjoint.@xmath125  let @xmath268 be an object of @xmath83 and @xmath291 . then there exist a unique @xmath292 such that for any object @xmath210 of @xmath83 , @xmath293 , containing @xmath73 one has @xmath294 .",
    "@xmath124  since @xmath227 is flat it commutes with fibered products .",
    "the fibered product of the two maps @xmath295 is the empty set .",
    "the object @xmath296 of @xmath83 admits the empty cover .",
    "thus by continuity one has @xmath297 .",
    "one can also give the following argument .",
    "let @xmath298 with @xmath299 .",
    "then the flatness of @xmath227 gives an object @xmath300 of @xmath83 an element @xmath301 and morphisms @xmath302 such that @xmath303 . by composition with @xmath295",
    "one gets @xmath304 .",
    "the third filtering condition on @xmath227 implies , since @xmath5 is simplifiable , that @xmath305 which contradicts @xmath306 and @xmath289 .",
    "@xmath125  we show the existence of @xmath73 , its uniqueness then follows from @xmath124 since distinct points have disjoint neighborhoods given by objects of @xmath83 .",
    "let @xmath307 where @xmath308 is an increasing family of bounded open intervals such that @xmath309 .",
    "then the continuity of @xmath227 gives an interval @xmath310 , with @xmath311 such that @xmath312 , _",
    "i.e. _  @xmath313 , @xmath314 . using a cover @xmath315 of @xmath300 by bounded open intervals",
    "one obtains , by continuity of @xmath227 , an interval @xmath316 of diameter @xmath317 and @xmath318 such that @xmath319 . by induction one gets a decreasing sequence of intervals @xmath320 of diameter @xmath321 and @xmath322 such that @xmath323 .",
    "let @xmath73 be the unique limit point of the sequence @xmath324 , _",
    "i.e. _  the limit of any sequence @xmath325 .",
    "one has @xmath326 .",
    "let @xmath293 be an object of @xmath83 containing @xmath73 .",
    "then @xmath210 is an open neighborhood of @xmath73 and there exists @xmath327 such that @xmath328 .",
    "one then gets @xmath329 in what follows we shall denote by @xmath330 the map defined in lemma [ lemflatcont1 ] .    [",
    "lemflatcont2]let @xmath226 be a continuous flat functor .",
    "@xmath124  the maps @xmath330 define a natural transformation of @xmath227 with the functor @xmath258 , @xmath259.@xmath125  the maps @xmath330 are injective when @xmath331 .",
    "@xmath124  let @xmath332 be a morphism in @xmath83 .",
    "let @xmath333 , @xmath334 .",
    "for any object @xmath335 of @xmath83 containing @xmath336 one has @xmath337 and thus @xmath338 this shows that @xmath339 . thus if @xmath340 one obtains a contradiction by lemma [ lemflatcont1 ] @xmath124 .",
    "we have thus shown that the following diagram commutes @xmath341^{\\lambda_u }   \\ar[rr]^{f(u\\stackrel{n}{\\to } v ) } & & \\ar[d]^{\\lambda_v }   f(v ) \\\\ u \\ar[rr]^{n } & & v } \\ ] ] @xmath125  let @xmath342 . by the flatness of @xmath227",
    "there exists an object @xmath300 of @xmath83 , an element @xmath301 and morphisms @xmath343 such that @xmath344 .",
    "since @xmath331 by hypothesis , one has @xmath345 .",
    "assume now that @xmath346",
    ". by @xmath124 one has @xmath347 and this implies @xmath348 ( since @xmath345 ) and @xmath305 .",
    "one then gets @xmath349 since one has @xmath350 .",
    "[ lemflatcont3]let @xmath226 be a continuous flat functor .",
    "let @xmath351 be a positive real number then , for objects @xmath268 of @xmath83",
    "one has @xmath352",
    "@xmath125  the subset of @xmath15 defined by the above condition is of the form @xmath353 , where @xmath249 is a rank one subgroup .",
    "@xmath124  it is enough to show the implication @xmath191 .",
    "let @xmath268 and @xmath291 such that @xmath354 .",
    "then for any object @xmath210 of @xmath83 , @xmath293 , containing @xmath73 one has @xmath294 .",
    "let then @xmath300 be an object of @xmath83 containing @xmath73 .",
    "let @xmath355 and @xmath356 such that @xmath357 .",
    "one has by lemma [ lemflatcont2 ] @xmath124 , @xmath358 and @xmath359 .",
    "thus one gets @xmath360 as required .",
    "@xmath125  let @xmath361 .",
    "let @xmath362 , @xmath162 , and @xmath268 containing the @xmath363 , and @xmath342 such that @xmath364 .",
    "by the flatness of @xmath227 there exists an object @xmath300 of @xmath83 , an element @xmath301 and morphisms @xmath343 such that @xmath344 . by lemma [ lemflatcont2 ] @xmath124 , one has @xmath347 . by @xmath124 one has @xmath365 .",
    "this shows that given any two elements @xmath362 there exists @xmath366 and integers @xmath266 such that @xmath367 , @xmath162 .",
    "moreover lemma [ lemflatcont2 ] @xmath124 shows that @xmath368 , @xmath369 .",
    "thus @xmath370 is an increasing union of subsets of the form @xmath371 .",
    "let @xmath372 be the corresponding increasing union of subgroups of @xmath54 .",
    "then @xmath80 is a rank one subgroup of @xmath54 and @xmath373 by construction .",
    "[ lemflatcont4]let @xmath226 be a continuous flat functor .",
    "@xmath124  one has @xmath374",
    "@xmath125  if the above equivalent conditions do not hold then there exists a rank one subgroup @xmath249 and an isomorphism of functors @xmath375 .",
    "@xmath124  let @xmath268 be such that @xmath376 .",
    "one then has @xmath377 .",
    "moreover the proof of lemma [ lemflatcont3 ] @xmath124 applies and shows that for any object @xmath300 of @xmath83 containing @xmath378 one has @xmath379 .",
    "let @xmath300 be an object of @xmath83 and assume that some @xmath351 belongs to @xmath380 .",
    "let @xmath210 be an object of @xmath83 containing both @xmath268 and @xmath300 .",
    "then by lemma [ lemflatcont2 ] @xmath124 , one has @xmath381 .",
    "let @xmath382 with @xmath383 , @xmath384 .",
    "then the flatness of @xmath227 gives an object @xmath385 of @xmath83 , an element @xmath386 and morphisms @xmath387 such that @xmath388 . by lemma [ lemflatcont2 ] @xmath124 , one has @xmath389 .",
    "but @xmath383 implies that @xmath390 and this contradicts @xmath391 .",
    "thus it follows that for any object @xmath300 of @xmath83 , @xmath380 contains at most @xmath378 and it does if and only if one has @xmath392 .",
    "@xmath125  if the condition of @xmath124 does not hold , it follows that for any object @xmath268 of @xmath83 one has @xmath393 .",
    "it follows that the canonical map @xmath394 is surjective .",
    "but by lemma [ lemflatcont2 ] , @xmath125 , and the commutation with the localization @xmath395 this map is injective . by lemma [ lemflatcont3 ]",
    "@xmath125 there exists a rank one subgroup @xmath249 such that for any @xmath210 not containing @xmath378 one has @xmath396 . by lemma [ lemflatcont2 ] , @xmath125 ,",
    "the composite @xmath397 gives an isomorphism of functors @xmath375 .",
    "[ lemflatcont5]let @xmath226 be a continuous flat functor such that @xmath398 , @xmath399 .",
    "@xmath124  one has @xmath400 if @xmath331 and if @xmath377 then the canonical map @xmath401 from @xmath402 to @xmath403 is bijective.@xmath125  there exists a unique action @xmath404 of @xmath5 on @xmath52 such that for any morphism @xmath405 of objects containing @xmath378 the following diagram commutes : @xmath406^{p_u }   \\ar[rr]^{x(n ) } & & \\ar[d]^{p_v }   x \\\\",
    "f(u ) \\ar[rr]^{f(u\\stackrel{n}{\\to } v ) } & & f(v ) } \\ ] ] @xmath205  with the above notations , the action of @xmath5 on @xmath52 defines a point of the topos @xmath407.@xmath408  let @xmath80 be an abstract rank one ordered group .",
    "the following defines a flat continuous functor @xmath409 @xmath410    @xmath124  if @xmath331 one has @xmath411 and hence @xmath400 .",
    "let @xmath293 with @xmath412 .",
    "the map @xmath413 is surjective since @xmath414 .",
    "let us show that it is injective .",
    "let @xmath382 be such that @xmath415",
    ". by the flatness of @xmath227 there exists an object @xmath300 of @xmath83 , an element @xmath301 and morphisms @xmath416 such that @xmath417 .",
    "one then has @xmath304 and the flatness of @xmath227 shows , since @xmath5 is simplifiable , that @xmath305 so that @xmath349 .",
    "thus the map @xmath413 is bijective and the projective limit @xmath402 is such that all maps @xmath418 are bijective . @xmath125",
    "the inclusions @xmath293 , @xmath419 form a commutative square with the maps @xmath420 , @xmath421 .",
    "it follows that the map from @xmath52 to @xmath52 such that @xmath422 is independent of the choice of @xmath210 containing @xmath378 and turns into commutative diagrams .",
    "@xmath205  the set @xmath52 is non - empty since otherwise one would have @xmath400 , @xmath399 .",
    "let @xmath423 and @xmath424 ( @xmath412 ) such that @xmath425 .",
    "by the flatness of @xmath227 there exists an object @xmath300 of @xmath83 , an element @xmath301 and morphisms @xmath416 such that @xmath426 .",
    "one has @xmath392 .",
    "let @xmath427 such that @xmath428 , using one gets @xmath429 .",
    "thus the action of @xmath5 on @xmath52 verifies the second filtering condition .",
    "we now check the third filtering condition .",
    "let @xmath427 and @xmath430 be such that @xmath431 .",
    "let @xmath412 , @xmath432 .",
    "let @xmath433 .",
    "one then gets an equality of the form @xmath434 and the flatness of @xmath227 shows that @xmath305 .",
    "this shows that the action of @xmath5 on @xmath52 verifies the three filtering conditions.@xmath408  one checks that @xmath435 is continuous , its flatness follows from the rank one property of @xmath80 .",
    "we are now ready to define a map @xmath436 from points of @xmath25 to points of the topos @xmath4 .",
    "as shown in @xcite theorem 3.8 , the points of the arithmetic site @xmath1 over @xmath3 form the union of two sets : the set @xmath437 of isomorphism classes of points of @xmath407 , and the set of the non - trivial rank one subgroups @xmath249 . to a point of @xmath437 associated with an abstract rank one ordered group @xmath80 we assign the point @xmath438 of @xmath4 associated to the flat continuous functor @xmath435 of lemma [ lemflatcont5 ] , @xmath408 . next to the point of @xmath439 corresponding to the rank one subgroup @xmath249 , we associate the point @xmath248 of proposition [ proppoint ] .    [",
    "scaltop]the map @xmath436 defines a canonical isomorphism of @xmath25 with the points of the topos @xmath4 .",
    "the map @xmath436 is well defined .",
    "lemma [ lemflatcont5 ] shows that is bijective from points of @xmath437 to points of @xmath4 such that the associated flat continuous functor @xmath226 fulfills the hypothesis of lemma [ lemflatcont5 ] .",
    "proposition [ proppoint ] shows that @xmath436 is injective from points of @xmath440 to points of @xmath4 .",
    "finally , lemma [ lemflatcont4 ] shows that @xmath436 is surjective .",
    "let @xmath83 be a small category .",
    "any covariant functor @xmath226 which is representable , _",
    "i.e. _  of the form @xmath441 for some object @xmath442 of @xmath83 is flat , and any flat functor is obtained as a filtering colimit of such representable functors . in this subsection",
    "we describe such representations for the flat continuous functors associated to points of the topos @xmath4 .",
    "this result will be used in the description of the stalks of the sheaves given in   [ sectsheaf ] .",
    "[ limlim1 ] let @xmath249 be a rank one subgroup of @xmath54 .",
    "let @xmath443 be a sequence of elements , @xmath444 , such that @xmath445 and that @xmath446 .",
    "let @xmath447 be bounded open intervals with @xmath448 for @xmath449 , such that @xmath450 then the limit @xmath451 of the representable functors @xmath452 defines the point @xmath248 of the topos @xmath4 .",
    "we show that the functor @xmath451 is simply given by @xmath453 it is enough to prove that the natural inclusion , due to @xmath448 @xmath454 ( in both cases one uses multiplication by @xmath455 to organize the inductive system ) is a bijection .",
    "indeed , let @xmath456 : we show that for @xmath457 large enough one has @xmath458 .",
    "let @xmath459 be a positive real number such that the neighborhood @xmath300 of @xmath460 of radius @xmath461 is contained in @xmath268 . then for @xmath457 large enough , using the hypothesis",
    ", one gets that @xmath462 ( since it contains @xmath463 and is of small enough diameter ) and hence @xmath458 .",
    "[ proplim ] let @xmath249 be a rank one subgroup of @xmath54 .",
    "let @xmath443 , @xmath444 and @xmath447 be bounded open intervals as in lemma [ limlim1 ] .",
    "then , the pullback part of the point @xmath248 of the topos @xmath4 is given by the functor which associates to an object @xmath213 of @xmath206 the following colimit @xmath464    the colimit defines the pullback part @xmath465 of a point of the topos of contravariant functors @xmath258 , which is defined as a filtering colimit of the points associated to the objects @xmath324 of @xmath83 . to show that the corresponding geometric morphism from the topos of sets to @xmath466 factors through @xmath206 it is enough to show ( _ cf .",
    "_  @xcite lemma vii.5.3 ) that the composite @xmath467 with the yoneda embedding sends each covering sieve to an epimorphic family of functions .",
    "lemma [ limlim1 ] shows that for any object @xmath268 of @xmath83 and the associated object of @xmath466 : @xmath468 one has @xmath469 thus @xmath46 fulfills the condition @xmath205 of @xcite lemma vii.5.3 , and @xmath465 is the pullback part of the point @xmath248 of the topos @xmath4 .",
    "next , we consider the limit case of lemma [ limlim1 ] when all the @xmath470 are @xmath378 .",
    "[ limlim2 ] let @xmath444 , and @xmath447 be bounded open intervals containing @xmath471 , for @xmath449 , such that holds .",
    "then the limit @xmath451 of the representable functors @xmath452 defines the point @xmath438 of the topos @xmath4 associated to the abstract ordered rank one group @xmath472 .",
    "let @xmath473 .",
    "one has @xmath400 when @xmath331 .",
    "let @xmath474 and @xmath475 .",
    "we denote by @xmath476 the element of @xmath80 given by the image of @xmath142 by the canonical injection @xmath477 associated to the @xmath457-th copy of @xmath478 in the colimit .",
    "one has by construction @xmath479 let @xmath268 be a bounded open interval with @xmath377 .",
    "one then obtains an injection @xmath480 by using the compatibility with the inductive limits , _",
    "@xmath481 let us show that @xmath482 is surjective . given @xmath483 and @xmath484",
    "we prove that for @xmath485 large enough one has @xmath486 .",
    "let @xmath459 such that the neighborhood @xmath300 of @xmath378 of radius @xmath461 is contained in @xmath268 .",
    "then for @xmath485 large enough , using the hypothesis , one gets that @xmath487 ( since it contains @xmath378 and is of small enough diameter ) and hence @xmath486 .",
    "[ proplimbis ] let @xmath80 be an abstract rank one ordered group .",
    "let @xmath444 , @xmath447 be bounded open intervals as in lemma [ limlim2 ] such that @xmath472 .",
    "then , the pullback part of the point @xmath438 of the topos @xmath4 is given by the functor which associates to an object @xmath213 of @xmath206 the colimit .",
    "the proof is the same as the one of proposition [ proplim ] .",
    "we define the structure sheaf @xmath13 of the scaling site @xmath0 as the @xmath5-equivariant sheaf on @xmath16 of semirings @xmath488 of continuous convex functions @xmath489 , such that for any @xmath490 there exists an open interval @xmath268 containing @xmath73 , with @xmath46 affine and with slope @xmath491 in the complement @xmath492 .",
    "this condition is local and hence defines a sheaf .",
    "one endows this sheaf with the following action @xmath493 of @xmath5 @xmath494 this action is compatible with the semiring structure and with the integrality property of the slopes and thus defines a semi - ring in the topos @xmath4    [ defnscalsite ] the scaling site @xmath0 is the semi - ringed topos given by the topos @xmath4 endowed with the structure sheaf @xmath13 .",
    "the next result determines the structure of the stalks of @xmath13 .",
    "[ structure2 ] @xmath124  at the point @xmath248 of the topos @xmath4 associated to the rank one subgroup @xmath249 the stalk of the structure sheaf @xmath13 is the semiring @xmath495 of germs , at @xmath496 , of @xmath51-valued , piecewise affine convex functions @xmath497 with slopes in @xmath80.@xmath125  the stalk of the structure sheaf @xmath13 at the point @xmath438 of @xmath4 associated to the abstract rank one ordered group @xmath80 is the semiring @xmath498 associated by the max - plus construction to the totally ordered group @xmath499 and endowed with the lexicographic order .",
    "@xmath124  to evaluate the stalk of the structure sheaf @xmath13 at the point @xmath248 we use the description given by .",
    "we let @xmath470 , @xmath455 , @xmath447 as in proposition [ proplim ] and evaluate the colimit @xmath500 we define a map @xmath501 by associating to @xmath502 , @xmath503 , the germ at @xmath496 of the function @xmath504 .",
    "this function is defined in the neighborhood of @xmath496 given by @xmath505 , and it is a piecewise affine , continuous , convex function with slopes in @xmath506 .",
    "thus its germ at @xmath496 is an element @xmath507 .",
    "next we prove that this construction is compatible with the colimit , _",
    "i.e. _  that @xmath508 where @xmath509 is defined in .",
    "one has @xmath510 and thus , using @xmath511 , one has for any @xmath503 @xmath512 thus the map @xmath513 is compatible with the colimit and determines a map @xmath501 which is easily shown to be an isomorphism of semirings .",
    "let @xmath514 , with @xmath447 be as in lemma [ limlim2 ] and such that @xmath515 .",
    "we let , as above , @xmath474 so that @xmath475 .",
    "we set @xmath476 so that follows by construction . then by proposition [ proplimbis ] , the stalk of the structure sheaf @xmath13 at the point @xmath438 is the colimit @xmath516 .",
    "we define a map @xmath517 as follows .",
    "we associate to @xmath502 , with @xmath503 , the element @xmath518 where @xmath519 is the derivative of @xmath46 at @xmath520 .",
    "one then has @xmath521 this shows that the map @xmath522 is well defined .",
    "similarly , the equality @xmath523 defines a map @xmath524 and the pair @xmath525 gives a map @xmath526 which is both injective and surjective .",
    "one easily checks that this map is an isomorphism of @xmath527 for the semiring structure whose multiplication corresponds to @xmath528 and the addition to @xmath529 next , we describe the semiring @xmath495 of germs at @xmath496 of @xmath51 valued piecewise affine ( continuous ) convex functions @xmath497 with slopes in @xmath80 .",
    "the germ of @xmath46 is determined by the triple @xmath530 , with @xmath531 and @xmath532 given by @xmath533 , @xmath534 , for @xmath535 small enough .",
    "the triples @xmath530 obtained from elements of @xmath495 are characterized by the condition @xmath536 which corresponds to the convexity of the function @xmath534 for @xmath535 small enough .",
    "the only other element of the semiring @xmath495 corresponds to the germ of the constant function @xmath537 .",
    "this function plays the role of the  zero \" element for the following algebraic rules applied to the non - zero elements of the semiring .",
    "the  addition \" @xmath538 is given by the max between two germs and hence it is described by the formula @xmath539 the  product \" of two germs is given by their sum and hence it is described by the formula @xmath540 the conditions on the functions @xmath541 on subgroups @xmath249 which define the structure sheaf are expressed locally in terms of the scaling flow by the two derivatives @xmath542 where @xmath543 and can be written in the form @xmath544 indeed , taking a neighborhood of @xmath80 of the form @xmath545 where @xmath268 is a neighborhood of @xmath26 , and considering the function @xmath546 condition becomes @xmath547 , where the @xmath548 are the directional derivatives .",
    "thus the condition on the functions becomes @xmath549 and @xmath550 which is the characterization of the germs in a neighborhood of @xmath80 .",
    "the next theorem states that the process of extension of scalars from @xmath1 to @xmath0 does not affect the points over @xmath3 .",
    "[ structure3 ] the canonical projection from the set @xmath551 of the points of the scaling site @xmath0 defined over @xmath3 to the points of the topos @xmath4 is bijective .",
    "the proof follows from the next lemma    [ homtormax ] @xmath124  the map @xmath552 is the only element of @xmath553.@xmath125  the map @xmath554 is the only element of @xmath555",
    ".    @xmath124  let @xmath556 .",
    "first , we notice that the @xmath51-linearity shows that the image by @xmath557 of the constant function is @xmath558 .",
    "then , we see that for any germ @xmath46 which is not identical to @xmath537 , there exists a constant function @xmath559 .",
    "one then has @xmath560 this shows that one can not have @xmath561 .",
    "this argument shows that for any elements @xmath562 of @xmath495 , one has @xmath563 and it follows that @xmath564 then , since @xmath558 one gets @xmath565 .",
    "@xmath125  the proof is similar as for @xmath124 .",
    "cartier divisors on a scheme are defined as the global sections of the sheaf @xmath566 quotient of the sheaf of multiplicative groups of the rings of fractions @xmath567 of the scheme by the sub - sheaf @xmath568 of invertible elements of the structure sheaf ( _ cf._@xcite pp .",
    "140 - 141 ) .",
    "we adapt this notion in this context of characteristic @xmath26 .",
    "[ propfunct ] let @xmath248 be the point of the topos @xmath4 associated to a rank one subgroup @xmath249 .",
    "the semiring @xmath495 of germs , at @xmath496 , of @xmath51-valued , piecewise affine , continuous convex functions @xmath497 with slopes in @xmath80 is and its semifield of fractions @xmath569 is the semifield of germs , at @xmath496 , of @xmath51-valued , piecewise affine , continuous functions @xmath497 with slopes in @xmath80 and endowed with the operations of the max and the addition of germs .    to show that @xmath495 is one considers an equation of the form @xmath570 for @xmath571 and notice that since these functions take finite values at every point we get @xmath572 .",
    "it follows that two pairs @xmath573 and @xmath574 of elements of @xmath495 define the same element of the associated semifield of fractions @xmath569 if and only if one has @xmath575 .",
    "this is equivalent to write @xmath576 and hence to the equality of the functions obtained as pointwise differences .",
    "next , the addition in the semiring @xmath495 is given by the pointwise supremum and one needs to check that its extension to the associated semifield of fractions @xmath569 coincides with the pointwise supremum for functions .",
    "this follows from the equality , valid for real numbers @xmath577 and obtained from translation invariance of @xmath538 @xmath578    as in the case of @xmath495 the germ of a function @xmath46 is characterized by the triple @xmath530 with @xmath531 and @xmath532 given by @xmath533 , @xmath534 , for @xmath535 small enough .",
    "the triples @xmath530 obtained from elements of @xmath569 correspond to arbitrary values of @xmath579 . as above",
    "the only other element of @xmath569 corresponds to the germ of the constant function @xmath537 which plays the role of the  zero \" element .",
    "the algebraic rules for the other elements are given for the  addition \" @xmath538 of two germs by the max of the two germs and hence by @xmath580 the  product \" of the germs is given by the sum of the two germs and hence by @xmath581      [ site2 ] let @xmath248 be the point of the @xmath4 associated to a rank one subgroup @xmath249 and",
    "let @xmath46 be an element in the stalk of @xmath567 at @xmath248 .",
    "then , the order of @xmath46 at @xmath80 is defined as @xmath582 , where @xmath583 .",
    "[ ordercomp ] for any two elements @xmath562 in the stalk of @xmath567 at @xmath248 one has @xmath584",
    "@xmath585    the germ of @xmath586 is given by the max of the two germs and hence by .",
    "when @xmath587 the inequality follows from @xmath588 , @xmath589 .",
    "when @xmath590 one has @xmath591 .",
    "thus the inequality follows from the general fact @xmath592 note that one needs the @xmath593 in to take care of the cases @xmath587 , but when @xmath590 the @xmath538 works .",
    "finally , the germ of @xmath594 is given by the sum of the two germs and hence holds .",
    "let @xmath7 be a prime and consider the subspace @xmath10 of points of @xmath4 corresponding to subgroups @xmath249 which are abstractly isomorphic to the subgroup @xmath55 of fractions with denominator a power of @xmath7 .",
    "in this section we study the ( quasi)-tropical structure of these curves , we develop the theory of theta - functions and finally we formulate a riemann - roch problem and establish a riemann - roch formula .    [ periodp ]",
    "@xmath124  the map @xmath595 , @xmath596 induces the isomorphism @xmath597.@xmath125  the pull - back by @xmath598 of the ( restriction to @xmath10 of the ) structure sheaf @xmath13 is the sheaf @xmath29 on @xmath599 of piecewise affine ( continuous ) , convex functions with slopes in @xmath600 .",
    "@xmath124  for @xmath601 one has @xmath602 .",
    "an abstract isomorphism of ordered groups @xmath603 is given by multiplication by @xmath604 . since @xmath605 the map @xmath595 induces a surjective map @xmath597 .",
    "we show that @xmath598 is injective . if @xmath606 , then @xmath607 for @xmath608 .",
    "thus @xmath609 and the same result holds for @xmath610 , thus @xmath611 is a power of @xmath7 .",
    "@xmath125  the condition on the functions @xmath541 on subgroups @xmath249 which defines the structure sheaf are expressed locally in terms of the scaling flow by the two derivatives @xmath542 of and can be written in the form . on the function @xmath612 , @xmath613",
    ", condition becomes @xmath614 , @xmath615 ( where the @xmath548 are the directional derivatives ) or equivalently : @xmath616 and @xmath550 thus one gets @xmath125 .      [ cartierdiv ] @xmath124  the sheaf of quotients of the sheaf of semirings @xmath29 is the sheaf @xmath617 on @xmath599 of piecewise affine , continuous functions with slopes in @xmath600 , endowed with the two operations max , @xmath618 .",
    "@xmath125  the quotient sheaf of cartier divisors @xmath619 is isomorphic to the sheaf @xmath620 of naive divisors , _",
    "i.e. _  of maps @xmath621 , such that @xmath622    @xmath124  the proof is the same as for proposition [ propfunct ] .",
    "@xmath125  a germ @xmath623 is invertible for the multiplicative structure given by iff one has @xmath624 , thus the map given by the order as in definition [ site2 ] is an isomorphism    [ defndiv ] a _ divisor _ on @xmath10 is a global section of the sheaf @xmath625 .",
    "the collection of these global sections is denoted by @xmath626 .    by proposition [ cartierdiv ] ,",
    "a divisor on @xmath10 is uniquely specified by a global section of @xmath620 and by compactness , these are the maps @xmath627 with finite support , where the support is defined @xmath628 in other words a divisor @xmath35 on @xmath10 is a section , vanishing everywhere except on a finite subset of @xmath10 , of the projection on the base from the total space of the bundle formed of pairs @xmath629 where @xmath249 is a subgroup abstractly isomorphic to the subgroup @xmath55 and @xmath630 .",
    "the sheaf @xmath617 has global sections and they form the semifield @xmath631 .",
    "[ propdiv ] @xmath124  the divisors @xmath626 form an abelian group under pointwise addition .",
    "@xmath125  the condition @xmath632 , @xmath633 , defines a partial order on the group @xmath626 .",
    "@xmath205  the following map defines a surjective group homomorphism compatible with the partial order @xmath634 @xmath408  the map which associates to @xmath635 the principal divisor @xmath636 determines a group homomorphism @xmath637 . @xmath638  the subgroup @xmath639 of principal divisors is contained in the kernel of @xmath640 @xmath641    .",
    "[ tropfct ] ]    @xmath124  by construction @xmath626 is the direct sum of the groups @xmath80 , with @xmath642 . @xmath125  each group @xmath80 is ordered and the condition @xmath632 , @xmath633 defines the natural partial order on their direct sum . @xmath205",
    "the statement follows from the fact that the groups @xmath80 are subgroups of @xmath54 and their union is @xmath54 .",
    "@xmath408  for any @xmath635 the sum in is finite and defines a divisor .",
    "moreover the formula shows that one obtains a group homomorphism .",
    "@xmath638  a global section @xmath45 is a real valued function @xmath643 which is piecewise affine , continuous , with slopes in @xmath600 and fulfills @xmath30 @xmath644 ( _ cf . _  figure  [ tropfct ] ) . such a function",
    "is uniquely determined by its restriction to the fundamental domain @xmath645 $ ] and the only constraint on this restriction is the periodicity : @xmath646 .",
    "let @xmath647 be a finite sequence of positive real numbers such that @xmath46 is affine with slope @xmath648 on the interval @xmath649 $ ] .",
    "one has for any @xmath650 @xmath651 by applying the equality above when @xmath652 , and using the periodicity property @xmath653 one obtains @xmath654 by using @xmath655 one also has @xmath656 for @xmath657 one has @xmath658 where we set @xmath659 .",
    "moreover , notice that @xmath660 is the slope of the function @xmath46 in the interval @xmath661 so that the order of @xmath46 at @xmath662 is @xmath663 .",
    "then , the above equality shows that the sum of all orders must vanish .",
    "next , we consider the problem of constructing a global section @xmath45 whose divisor is an assigned divisor of degree zero .",
    "let @xmath664 be the principal ideal generated by the integer @xmath665 in the ring @xmath600 .",
    "one has the following exact sequence of rings @xmath666 where @xmath667 mod .",
    "@xmath665 , for any @xmath115 and @xmath668 .",
    "[ propdiv1 ] @xmath124  let @xmath642 , then there exists a unique map @xmath669 such that for any @xmath601 with @xmath670 , one has @xmath671 . @xmath125  the group @xmath672 of principal divisors is contained in the kernel of the group homomorphism @xmath673    @xmath124  given @xmath642 the @xmath674 such that @xmath670 provide maps @xmath675 which differ from each other by multiplication by a power of @xmath7 , thus the corresponding map @xmath676 is independent of the choice of @xmath73 .",
    "@xmath125  we use the notations of the proof of proposition [ propdiv ] @xmath638 .",
    "the support of the principal divisor @xmath677 is contained in @xmath678 . for @xmath679",
    ", one has @xmath680 and thus @xmath681 for @xmath682 : @xmath683 and thus @xmath684 thus one gets @xmath685 as required .",
    "[ thmjaccp ] the map defined by the pair of homomorphisms @xmath686 is an isomorphism of abelian groups .    we show first that any divisor @xmath35 such that @xmath687 and @xmath688 is principal .",
    "indeed , the divisor @xmath35 can be written in the form @xmath689 where the elements @xmath690 are such that @xmath691 .",
    "thus one is given the intervals @xmath649 $ ] with @xmath655 . in order to show that @xmath35 is principal one needs to find elements @xmath648 for @xmath692 , giving the slope of @xmath46 on @xmath447 and hence such that @xmath693 the solution of the above system of equations is unique and of the form @xmath694 thus it takes values in @xmath600 if and only if the element @xmath695 is divisible by @xmath696 in @xmath600 _ i.e. _  iff @xmath688 .",
    "if this is the case one defines the function @xmath46 to be affine with slope @xmath470 in the interval @xmath649 $ ] and normalized by @xmath697 .",
    "one has , using @xmath655 @xmath698 this argument shows that one can extend @xmath46 by periodicity so that @xmath30 and obtain a continuous , piecewise affine function with slopes in @xmath600 .",
    "moreover , by construction the divisor of @xmath46 is @xmath35 , since the discontinuities of the derivative take place at the @xmath363 s and are given by the @xmath699 s .",
    "it remains to show that the restriction of the map @xmath700 to the subgroup @xmath701 of divisors of degree @xmath378 is surjective onto @xmath702 .",
    "given @xmath703 , it is enough to find an increasing finite sequence of real numbers @xmath704 , @xmath705 and elements @xmath690 such that @xmath691 and @xmath706 mod",
    ". @xmath707 .",
    "both the group @xmath32 and the subset @xmath708 are dense in @xmath54 .",
    "this shows that one can fix arbitrarily the @xmath709 and all the @xmath699 except for one of them , say @xmath710 , and then choose @xmath711 with preassigned @xmath712 such that for a choice of @xmath713 close to @xmath714 one gets @xmath715 the same argument also shows that one can arbitrarily prescribe both @xmath716 and @xmath717 for divisors @xmath61 . since the group law on divisors is given by pointwise addition of sections , both maps @xmath640 and @xmath718 are group homomorphisms and one obtains the isomorphism of groups .",
    "the scaling site @xmath0 inherits from its construction by extension of scalars , as in section [ sectexts ] , several symmetries such as the arithmetic frobenius associated to the automorphisms of @xmath719 or the absolute frobenius associated to the frobenius endomorphisms of the semirings of characteristic one of the structure sheaf .",
    "these symmetries induce symmetries of the curves @xmath10 and in this subsection we describe them as operators acting on the structure sheaf @xmath29 of these curves . since the divisors on @xmath10 are cartier divisors , one then obtains , as a byproduct , induced actions on @xmath626 and on its quotient @xmath11 .",
    "the analogue of the arithmetic frobenius @xmath720 on sections @xmath46 of @xmath29 is defined as follows @xmath721 this operator preserves the properties of @xmath46 ( @xmath46 is convex , piecewise affine with slopes in @xmath600 and periodic @xmath30 ) as well as the algebraic operations @xmath722 .",
    "thus it defines automorphisms denoted by @xmath723 . on a function @xmath46 which is locally written as @xmath724 the action of @xmath723",
    "replaces the @xmath699 s by @xmath725 and this corresponds to the arithmetic frobenius .",
    "the induced action on the stalks of @xmath29 associates to a germ at @xmath73 a germ at @xmath726 given by @xmath727 , for @xmath728 near @xmath726 .",
    "one thus obtains a morphism from germs at @xmath80 to germs at @xmath729 @xmath730 indeed , one has @xmath731 , for @xmath459 small and thus @xmath732 next , we list some properties of the induced action by @xmath723 on divisors .",
    "we use the notation @xmath733 , with @xmath734 for the divisor with support on the set @xmath735 and such that @xmath736 @xmath737 .",
    "[ arithfrob2 ] the action induced by @xmath723 on divisors is given by @xmath738 this action preserves the homomorphism @xmath718 as well as the subgroup @xmath672 of principal divisors and it acts on the degree of a divisor by multiplication by @xmath611 .",
    "the first part of the statement follows from which shows that the singularity of the derivative of @xmath46 at @xmath80 gives a singularity of the derivative of @xmath739 at @xmath729 , while the order is multiplied by @xmath611 .",
    "the value of @xmath740 is obtained as @xmath741 where @xmath742 , @xmath743 .",
    "one can choose the same @xmath327 for the pair @xmath744 and this implies that @xmath745 .",
    "the degree of @xmath733 is @xmath746 and the degree of @xmath747 is @xmath748 . since @xmath749 this group is preserved by the action of @xmath723 .",
    "let @xmath41 , @xmath42 .",
    "one defines the operator @xmath750 acting on functions by @xmath751 this operator acts on a section @xmath46 of @xmath29 locally written as @xmath752 by replacing the @xmath455 by @xmath753 , while leaving the @xmath699 unchanged . in particular it is @xmath51-linear .",
    "since the powers @xmath754 act trivially in view of the periodicity of @xmath46 , the operator @xmath750 only depends upon the class of @xmath269 in the quotient @xmath755 which is the multiplicative monoid @xmath756 of positive integers relatively prime to @xmath7 . the induced action on the stalks associates to a germ at @xmath73 , the germ at @xmath757 given by @xmath758 for @xmath728 near @xmath757 .",
    "one thus obtains a morphism from germs at @xmath80 to germs at @xmath759 @xmath760 as follows from the identity @xmath761 .",
    "[ relatfrob2 ] the action induced by @xmath750 on divisors is given by @xmath762 this action preserves the degree @xmath763 , the subgroup @xmath672 of principal divisors and it acts on the invariant @xmath700 by multiplication by @xmath764 .    the first part of the statement follows from .",
    "one has @xmath765 .",
    "the value of @xmath740 is obtained as @xmath741 where @xmath742 , @xmath743 .",
    "one then has @xmath766 and @xmath767 , so that @xmath768 .",
    "this argument also shows that @xmath749 is preserved by the action of @xmath750 .      this operator acts on sections @xmath46 of @xmath29 by composition with the frobenius of @xmath51 which , in this logarithmic notation , multiplies the function @xmath46 by a constant . in order to preserve the property of the slopes in @xmath600",
    "one takes this constant to be an element in @xmath600 .",
    "more precisely , the action of the absolute frobenius on functions is given , for any @xmath769 , by the formula @xmath770 its properties follow from the properties of the two previous operators since @xmath771 indeed , one has @xmath772 and similarly @xmath773 .",
    "[ absfrob2 ] the action induced by @xmath774 on divisors is given by @xmath775 this action is trivial on the points , _",
    "i.e. _  it fixes @xmath776 .",
    "it preserves the subgroup @xmath672 of principal divisors , acts on the invariant @xmath700 by multiplication by @xmath764 and on the degree by multiplication by @xmath777 .",
    "this follows from using lemmas [ arithfrob2 ] and [ relatfrob2 ] .",
    "notice that each point @xmath642 determines a morphism @xmath778 and the absolute frobenius is compatible with this morphism : @xmath779 .",
    "in particular it acts trivially on the spectrum .      in this subsection",
    "we provide an explicit construction of elements of @xmath33 with assigned divisor , by introducing ( tropical ) analogues of theta functions .",
    "we proceed by analogy with the construction of theta functions for elliptic curves @xmath780 over non - archimedean local fields @xmath327 as in @xcite . in that case",
    "the theta function is defined as @xmath781 and satisfies the functional equation : @xmath782 . its relation with the standard theta function @xmath783",
    "is given by the equation : @xmath784{q}\\ , e^{-iu}\\theta(e^{2iu},q^2)$ ] .",
    "this suggests to transpose naively in order to define theta functions for @xmath8 . in our framework , the role of the product is replaced by addition , thus the following infinite sums replace the infinite products on the left @xmath785 @xmath786     for @xmath787 .",
    "[ thetafct ] ]    [ lemtheta1 ] @xmath124  the functions @xmath788 , @xmath282 are convex ( continuous ) , piecewise affine with slopes in @xmath600 and @xmath789 @xmath125  the function @xmath790 , @xmath282 ( _ cf .",
    "_  figure  [ thetafct ] ) , is convex ( continuous ) , piecewise affine with slopes in @xmath600 and fulfills the equation : @xmath791 , @xmath792.@xmath205  one has @xmath793",
    "@xmath124  notice that the sum @xmath794 has only finitely many non - zero terms since @xmath795 for @xmath796 large enough .",
    "each of these terms is convex continuous , piecewise affine with slopes in @xmath600 and thus the same property holds for @xmath797 . moreover , the difference @xmath798 is given by the single term corresponding to @xmath799 , _",
    "i.e. _  @xmath800 . similarly for @xmath801 one gets the term @xmath802 in @xmath803 .",
    "thus we obtain . @xmath125  the first part of the statement follows from @xmath124 .",
    "moreover one has @xmath804 since for any real number @xmath728 one has @xmath805.@xmath205  let @xmath806",
    ". then @xmath807 .",
    "thus the function @xmath808 fulfills @xmath809 .",
    "this periodicity shows that @xmath810}\\vert k(u)\\vert$ ] . since @xmath811 ,",
    "@xmath812 $ ] one just needs to check that @xmath813 , @xmath812 $ ] . in this interval",
    "the convex function @xmath814 varies between its value at the end points : @xmath815 and its minimum @xmath816 at @xmath817 $ ] , whose value is @xmath818 .",
    "we define , for @xmath819 and @xmath43 , the function @xmath820 it is a convex continuous , piecewise affine function with slopes in @xmath600 and fulfills the equation @xmath821 since by lemma [ lemtheta1 ] @xmath125 one has @xmath822 it follows that @xmath823 to a pair of labels @xmath824 we associate the divisor which is everywhere zero except on the subgroup @xmath825 ( abstractly isomorphic to @xmath600 ) where it takes the value @xmath826 .",
    "we let @xmath827 note that by construction one has @xmath828 , so that @xmath829 only depends upon the class of @xmath269 modulo the multiplication by powers of @xmath7 . such a class",
    "is uniquely specified as that of an integer @xmath830 , prime to @xmath7 .",
    "given a simple divisor , _",
    "i.e. _  a positive divisor supported on a single @xmath80 , and @xmath826 , @xmath831 one can find @xmath351 such that @xmath670 and thus @xmath41 with @xmath832 .",
    "one then has @xmath833 .",
    "the choice of @xmath73 ( and hence of @xmath269 ) is unique only up - to multiplication by a power of @xmath7 .",
    "the classical description of elliptic functions in terms of theta functions admits the following counterpart in our framework , which provides , in particular , with another proof of theorem [ thmjaccp ] by an explicit construction of an @xmath45 with given divisor .",
    "[ proptheta1 ] let @xmath834 be a divisor ( @xmath835 ) and @xmath836 , @xmath837 such that @xmath838 and @xmath839 . then",
    ", if @xmath687 and @xmath41 fulfills @xmath840 , the following function @xmath841 is continuous , piecewise affine with slopes in @xmath600 , fulfills @xmath30 @xmath842 and one has : @xmath843 .    by applying the equation , one has @xmath844 since by hypothesis @xmath845 and @xmath840 .",
    "moreover , the divisor of @xmath46 is equal to @xmath35 by construction since each theta function @xmath846 ( resp .",
    "@xmath847 ) contributes with the term @xmath848 ( resp .",
    "@xmath849 ) while @xmath850 does not contribute at all .",
    "[ thmtheta1 ] let @xmath45 .",
    "then @xmath46 admits the following canonical decomposition @xmath851 where @xmath852 , @xmath840 and @xmath853 , @xmath854 .",
    "let @xmath855 be the principal divisor of @xmath46 , and @xmath856 its decomposition with @xmath836 , @xmath837 such that @xmath838 and @xmath839 .",
    "since @xmath828 we can choose the @xmath857 and @xmath858 in such a way that @xmath859 for all of them , which gives @xmath853 , @xmath854 .",
    "proposition [ proptheta1 ] then shows that the function defined in belongs to @xmath33 and has the same divisor as @xmath46 thus it differs from @xmath46 by a constant @xmath47 and one gets .      in this subsection",
    "we define a riemann - roch problem for divisors on the curves @xmath10 and prove a riemann - roch formula . to this end , we introduce the notion of continuous dimension for the @xmath860-modules @xmath861 associated to divisors @xmath35 on @xmath10 .",
    "it follows from proposition [ cartierdiv ] that the notion of divisors on @xmath10 coincides with the notion of global section of the sheaf @xmath862 of cartier divisors . in analogy with the classical case",
    ", a cartier divisor @xmath35 described by local sections @xmath863 , defines a subsheaf @xmath864 of @xmath617 .",
    "this is the sheaf of @xmath29-modules generated on @xmath865 by the ( multiplicative ) inverses of the @xmath866 , _",
    "i.e. _  in the additive notation of this tropical set - up by the functions @xmath867 . the sections of @xmath864 are given locally by the rational functions @xmath868 which satisfy the inequality @xmath869 , where @xmath677 denotes the principal divisor associated to @xmath46 . by construction , @xmath864 is a sheaf of @xmath29-modules , and in particular its global sections define a module over @xmath51 @xmath870 it follows from that @xmath871 .",
    "the constant function @xmath537 is , by convention , contained in all the @xmath59 and plays the role of the @xmath378-element .",
    "we use the notation @xmath872 , rather than @xmath873 , to mean that @xmath59 does not contain any other @xmath46 .",
    "[ periodrr ] @xmath124  if @xmath874 then @xmath872 .",
    "@xmath125  if @xmath875 then @xmath876 .",
    "@xmath124  the condition @xmath869 implies that @xmath877 and hence @xmath878 .",
    "@xmath125  assume @xmath879 , set @xmath670 and let @xmath880 be the positive divisor which vanishes for @xmath881 , @xmath882 and takes the value @xmath73 at @xmath80",
    ". by construction @xmath883 and @xmath880 is an effective ( _ i.e. _  positive ) divisor such that @xmath884 .",
    "moreover one has @xmath885 .",
    "let @xmath886 be an integer congruent to @xmath717 mod . @xmath696",
    ", then it follows that the divisor @xmath887 fulfills @xmath888 and @xmath889 and hence it is principal .",
    "let @xmath890 with @xmath891 .",
    "one has @xmath892 and thus @xmath893 .",
    "the slopes of the functions @xmath45 can have arbitrarily small real size since the group @xmath32 is dense .",
    "this shows that when @xmath875 , will in general yield an infinite dimensional space of solutions .",
    "however , notice that the group @xmath600 is discrete when embedded diagonally in @xmath894 , and this fact allows one to obtain a natural norm on sections of @xmath617 by implementing the @xmath7-adic norm of the slopes . in the following ,",
    "we choose to normalize the @xmath7-adic norm @xmath895 , @xmath896 so that @xmath897 .",
    "let @xmath46 be a continuous , piecewise affine function on @xmath898 with slopes @xmath899 and such that @xmath900 .",
    "the slope @xmath901 of @xmath46 at @xmath902 is @xmath903 since @xmath904 the value of @xmath905 is unchanged if one replaces @xmath73 by @xmath902 since the @xmath7-adic norm of @xmath903 is @xmath906 .",
    "[ pnorm ] let @xmath45 .",
    "we set @xmath907 where @xmath908 is the in ] slope of @xmath46 at @xmath73 , and @xmath909 its @xmath7-adic norm .",
    "one has the following compatibility with the semiring structure of @xmath33    [ pnormcomp ] let @xmath910 .",
    "one has@xmath124  @xmath911 .",
    "@xmath125  @xmath912.@xmath205  @xmath913 .",
    "@xmath408  @xmath914 iff the restriction of @xmath46 to @xmath915 $ ] has integral slopes .",
    "@xmath638  let @xmath61 be a divisor .",
    "the following formula defines an increasing filtration on @xmath59 by @xmath51-submodules @xmath916    @xmath124  at a point @xmath601 the set of slopes ( there can be two ) of @xmath586 is a subset of the union of the sets of slopes of @xmath46 and @xmath814 , thus one obtains the stated inequality .",
    "@xmath125  at a point @xmath601 , the slope of @xmath917 is the sum of the slopes of @xmath46 and @xmath814 and the ultrametric inequality for the @xmath7-adic norm gives the required result .",
    "@xmath205  the equality follows from the equality @xmath918 .",
    "@xmath408  using the invariance of @xmath919 under @xmath920 , one has @xmath921\\}.\\ ] ] note that the value @xmath922 corresponding to the ingoing slope at @xmath496 is taken into account for @xmath923 $ ] near @xmath7 as the limit of the values @xmath919 when @xmath924 , since @xmath925 .",
    "if the restriction of @xmath46 to @xmath915 $ ] has integral slopes , one has @xmath926 for all @xmath923 $ ] and thus @xmath914 .",
    "conversely , if @xmath914 one has @xmath927 for all @xmath928 and thus , since @xmath908 , one gets @xmath929 for all @xmath928 as required .",
    "@xmath638  it follows from @xmath124 and @xmath125 that @xmath930 is an @xmath51-submodule of @xmath59 , moreover one easily sees that @xmath931 for @xmath932 .",
    "the next step is to define the continuous dimension of the module @xmath59 using the filtration by the submodules @xmath930 by means of a formula of the form @xmath933 where , on the right hand side , one uses a suitable notion of integer valued dimension for @xmath51-modules . in our context , the most natural notion is that of  topological dimension \" that counts the number of real parameters on which a general element depends .",
    "the original definition for such dimension is due to lebesgue .",
    "we use the reference @xcite .",
    "[ defntopdim ] let @xmath52 be a topological space .",
    "the _ topological dimension _",
    "@xmath934 of @xmath52 is the smallest integer @xmath19 such that every open cover @xmath315 of @xmath52 admits a refinement @xmath935 such that every point of @xmath52 is in at most @xmath936 elements of @xmath935 .",
    "when working with the modules @xmath59 we use the topology of uniform convergence for @xmath51-valued functions on the interval @xmath915 $ ] ( or equivalently by periodicity on @xmath898 ) .",
    "the distance defining this topology is given by @xmath937 } \\vert f(x)-g(x)\\vert.\\ ] ] we define @xmath938 our next goal is to prove that the above limit exists and one obtains a riemann - roch formula .    [ rrperiodic ] @xmath124  let @xmath61 be a divisor with @xmath878 .",
    "then the limit in converges and one has @xmath939.@xmath125",
    "the riemann - roch formula holds @xmath940    the proof of theorem [ rrperiodic ] will be given later and follows by combining lemma [ lemdivrel ] below with the understanding of @xmath59 in the special case discussed in lemma [ enp ] .",
    "[ lemdivrel ] let @xmath61 and @xmath45 .",
    "then@xmath124  for @xmath941 and for any non - negative integer @xmath19 such that @xmath942 , the map @xmath943 , @xmath944 induces an isomorphism of @xmath58 with @xmath945.@xmath125  the absolute frobenius @xmath946 determines a twisted isomorphism of @xmath51-modules @xmath947 this map preserves the topological dimension .",
    "@xmath124  by lemma [ pnormcomp ] , @xmath125 , one has @xmath948 so that if @xmath942 one derives @xmath949",
    "@xmath125  the twisting is by the frobenius @xmath950 and occurs since @xmath951 for any scalar @xmath952 . this operation does not affect the topological dimension . the principal divisor",
    "@xmath953 is equal to @xmath954 and one has , using proposition [ pnormcomp ] @xmath205 @xmath955 thus the map @xmath946 gives a twisted isomorphism of @xmath51-modules as stated .",
    "next , we determine the topological dimension of the @xmath51-module @xmath956 which is associated to the divisor @xmath957 , where @xmath958 is an integer .",
    "[ enp ] @xmath124  the module @xmath959 is the @xmath51-module of convex ( continuous ) , piecewise affine functions on @xmath915 $ ] with integral slopes , such that @xmath960 and @xmath961.@xmath125  let @xmath962 and denote by @xmath963 the integer part of @xmath964 .",
    "let @xmath965 , for @xmath966 $ ]",
    ". then @xmath967.@xmath205  for @xmath968 , let @xmath969 .",
    "the following map is continuous and injective for @xmath461 sufficiently small ( @xmath970 by convention ) @xmath971",
    "@xmath408  @xmath972 .",
    "@xmath124  by proposition [ pnormcomp ] @xmath408 , the condition @xmath914 means that the restriction of @xmath46 to @xmath915 $ ] has integral slopes .",
    "the condition @xmath869 means that @xmath46 is convex , piecewise affine , ( continuous ) inside @xmath915 $ ] and that @xmath973 .",
    "these properties imply @xmath124 since @xmath974 @xmath125  by construction , the function @xmath975 is continuous , convex , piecewise affine with integral slopes and @xmath976 . moreover , at the point @xmath977 where @xmath978 , the slope of @xmath979 changes from @xmath980 to @xmath981 .",
    "the point @xmath728 is inside the interval @xmath982 since @xmath983 .",
    "thus the slope of @xmath979 is @xmath980 near @xmath26 and @xmath981 near @xmath7 .",
    "the condition @xmath961 is fulfilled since @xmath984 .     with @xmath985 .",
    "[ trop3 ] ]    @xmath205  let @xmath986 .",
    "then on @xmath987 $ ] all the @xmath988 s coincide with @xmath989 since with @xmath963 and @xmath962 one has @xmath990 for @xmath991 , let @xmath992 and let @xmath993 be a constant function . for @xmath994 one",
    "has @xmath995.\\ ] ] for @xmath991 , the @xmath728 coordinate of the point where the line @xmath996 meets @xmath997 is @xmath998 $ ] .",
    "thus one has @xmath999 , \\ \\",
    "\\psi_j(x)\\leq \\psi_{j+1}(x)\\qqq x\\in [ 1+t_{j+1},1+\\epsilon].\\ ] ] thus @xmath1000 $ ] and for @xmath1001 , @xmath1002 , for @xmath1003 $ ] ( _ cf . _  figure  [ trop3 ] ) .",
    "it follows that @xmath1004 passes from the slope @xmath1005 to the slope @xmath1006 at the point @xmath998 $ ] .",
    "this statement still holds for @xmath682 and @xmath1007 . in the latter case , one needs to check that in a small interval @xmath1008 $ ] , @xmath1009 and this follows as @xmath1010 .",
    "the value of the function @xmath1011 at @xmath496 is @xmath1012 , thus one recovers all the parameters @xmath1013 , @xmath994 from the function @xmath1011 and this shows that the map @xmath1014 is injective .",
    "@xmath408  let @xmath1015 .",
    "the above construction of @xmath1011 shows that @xmath1016 .",
    "let @xmath1017 be non - constant , then one has @xmath1018 and @xmath1019 while @xmath1020 . to determine the topological dimension of @xmath959 one can fix the values of @xmath482 and @xmath1021 and count on how many real parameters the element @xmath1022 depends .",
    "the possible values of the slope of @xmath46 in the interval @xmath915 $ ] are in the interval @xmath1023= [ -\\alpha,\\beta]$ ] and @xmath46 is determined , up to an additive constant , by the points where the slope changes , which gives at most @xmath1024 points . since the last of these points",
    "is determined by the previous ones in view of the periodicity of @xmath46 , one sees that the number of free parameters for the turning points is @xmath1025 .",
    "since this argument determines @xmath46 up to an additive constant , @xmath46 depends on at most @xmath1024 real parameters",
    ". moreover @xmath1026 .",
    "thus the topological dimension @xmath327 of @xmath959 is less than @xmath1027 and since @xmath1016 one gets the equality .    in appendix [ appa ]",
    "we shall provide a more detailed description of the @xmath51-module @xmath959 making the above qualitative argument more precise .",
    "@xmath124  assume first that @xmath687 .",
    "then one has @xmath872 except when there exists a non - trivial solution to @xmath869 . in that case",
    "@xmath35 is equivalent to @xmath378 and @xmath59 consists of the constant functions which form the module @xmath51 whose topological dimension is @xmath26 .",
    "thus the formula gives in all cases that @xmath1028 .",
    "assume now that @xmath1029 and let @xmath459 .",
    "we show that @xmath1030 where @xmath1031 and @xmath1032 denote respectively the lim inf and the lim sup .",
    "let @xmath1033 ( @xmath162 ) , @xmath1034 , be such that @xmath1035 , @xmath1036 and that @xmath1037 .",
    "then let ( as in lemma [ periodrr ] , @xmath125 ) @xmath1038 be positive divisors such that @xmath1039 with @xmath1040 , @xmath1041 .",
    "one has @xmath1042 and @xmath1043 .",
    "thus by applying theorem [ thmjaccp ] we get the existence of a function @xmath1044 such that @xmath1045 and a function @xmath1046 such that @xmath1047 . using the natural injective maps , isometric for the distance , given by the inclusions @xmath1048 one obtains , by lemma [ lemdivrel ] @xmath124 @xmath1049 as soon as @xmath1050 .",
    "similarly , one derives @xmath1051 as soon as @xmath1052 .",
    "thus the result will follow provided we show that for any @xmath1053 , @xmath1054 one has @xmath1055 by lemma [ lemdivrel ] @xmath125 , one has @xmath1056 and for @xmath19 large enough so that @xmath1057 is an integer , lemma [ enp ] @xmath408 shows that @xmath1058 . thus one gets as required @xmath1059 @xmath125  follows from @xmath124 and the fact that @xmath872 if @xmath874 .",
    "in this appendix we provide further properties of the @xmath51-module @xmath959 of convex , piecewise affine , continuous functions @xmath46 on @xmath915 $ ] with integral slopes such that @xmath960 and @xmath1060 .",
    "the convexity of @xmath46 implies that its graph is above its tangent at any point _",
    "i.e. _  one has the inequality @xmath1061.\\ ] ] if @xmath1062 is a point of discontinuity of the derivative , one can take for @xmath1063 any value between the left and right limits @xmath1064 .",
    "we recall the definition of the extremal rays of an @xmath51-module .",
    "[ defnextr ] let @xmath1065 be an @xmath51-module , and @xmath1066",
    ". then @xmath46 is _ extremal _ iff the equality @xmath1067 implies that one of the @xmath1068 .",
    "the @xmath51-submodule @xmath1069 is called an extremal ray .     for @xmath787 and @xmath1070",
    "; @xmath1071 is constant .",
    "[ trop2 ] ]    the following proposition describes the structure of the @xmath51-module @xmath959 .",
    "we use the notation of lemma  [ enp ] ( ii ) .",
    "[ pmodgen ] the functions @xmath979 , for @xmath1072 , are extremal elements of @xmath959 and the elements of the set @xmath1073 are the extremal rays of @xmath959 .",
    "these elements generate the module @xmath959 , _",
    "i.e. _  the following map is surjective @xmath1074    we use lemma [ pmodgen0 ] proved below .",
    "we prove first that @xmath979 is extremal .",
    "assume that @xmath1075 , with @xmath1076 for @xmath162 .",
    "then one of the @xmath1077 , say @xmath1078 , agrees with @xmath979 in a neighborhood @xmath1079 . by one",
    "has @xmath1080 for some real numbers @xmath1081 .",
    "one of the @xmath1082 agrees with @xmath1078 in a neighborhood of @xmath26 .",
    "comparing the slopes one gets @xmath1083 and @xmath1084 .",
    "thus one derives that @xmath1085 and since @xmath1086 one concludes that @xmath1087 .",
    "this argument shows that @xmath979 is extremal .",
    "the equality shows that any extremal element of @xmath959 is of the form @xmath1088 for some @xmath1089 and @xmath1090 so that the @xmath979 generate all the extremal rays .",
    "finally shows that @xmath695 is surjective . for @xmath1091 ,",
    "let @xmath1092 be defined by @xmath1093 }   ( \\phi_a- f)(x).\\ ] ]    [ pmodgen0 ] @xmath124  let @xmath1017 and @xmath1094 .",
    "then , there exists @xmath1091 such that @xmath1095.\\ ] ] @xmath125  let @xmath1017 , then with @xmath1096 as in @xmath1097    @xmath124  if @xmath46 is constant holds for @xmath1098 , thus we assume that @xmath46 is non - constant .",
    "let @xmath1099 and apply for @xmath1100 , @xmath1101 . using the equality @xmath960 one has @xmath1102 , and in fact @xmath1054 since @xmath46 is non - constant .",
    "let @xmath1103 , by applying for @xmath1104 , @xmath1105 and using @xmath960 one has @xmath1106 , and in fact @xmath1107 since @xmath46 is non - constant .",
    "furthermore one has @xmath1108 since @xmath1017 . by continuity of the functions involved and the finiteness of the set @xmath1109",
    ", one can assume that @xmath46 is affine at @xmath728 .",
    "let us first assume that @xmath1110 .",
    "let @xmath1111 so @xmath1112 . since @xmath46 is convex its derivative is non - decreasing and one has @xmath1113 so that @xmath1114 .",
    "moreover by applying for @xmath1115 , @xmath1105 one has @xmath1116 by applying for @xmath1104 , @xmath1117 one derives @xmath1118 thus @xmath1119 and one gets @xmath1120 , _ i.e. _  @xmath1121 .",
    "one has @xmath1020 and @xmath1114 so that @xmath1122 and @xmath1123 .",
    "but @xmath1124 is an integer @xmath1125 and thus it is @xmath1126 .",
    "then @xmath1127 and one has @xmath1128 . by definition @xmath965 and",
    "thus , since @xmath1129 , one gets @xmath1130 . by applying for @xmath1115 ,",
    "@xmath1131 one has @xmath1132 @xmath1133 thus @xmath1134.\\ ] ] by applying for @xmath1104 , @xmath1131 , one has @xmath1135.\\ ] ] since @xmath1127 one gets @xmath1136 so one derives @xmath1137 by for @xmath1138 , one has @xmath1139 and we thus get @xmath1140\\ ] ] which combines with to yield @xmath1141.\\ ] ] this is the required inequality .",
    "let us now assume that @xmath1142 . since @xmath46 is convex , its derivative is non - decreasing and one has @xmath1143 .",
    "let @xmath1144 .",
    "one has @xmath1145 and thus @xmath1146 . since @xmath1147 , one gets @xmath1148 .",
    "moreover one has @xmath1142 and thus @xmath1149 .",
    "the integer @xmath1150 involved in the definition of @xmath979 is equal to @xmath1151 since @xmath1152 by construction .",
    "thus @xmath1153 . by applying for @xmath1100",
    ", @xmath1117 one has @xmath1154 by applying for @xmath1115 , @xmath1101 one has @xmath1155 thus , since @xmath1156 one gets @xmath1157 so that @xmath1158 , and @xmath1159 since @xmath1148 .",
    "it follows that @xmath1160 . by applying for @xmath1115",
    ", @xmath1131 one has @xmath1161 thus @xmath1162.\\ ] ] by applying for @xmath1100 , @xmath1131 one has , for @xmath1163 $ ] @xmath1164 and since @xmath1165 one gets @xmath1166 , so that @xmath1167 . by for @xmath1168 one",
    "has @xmath1169 and since @xmath960 one gets @xmath1170 .",
    "it follows that for @xmath1163 $ ] one has @xmath1171 and hence @xmath1172.\\ ] ] thus combining and , one gets @xmath1173\\ ] ] which is the required inequality .@xmath125  for @xmath1174 one",
    "has @xmath1175 , and @xmath1096 is the largest value of @xmath1176 for which this happens .",
    "by @xmath124 ( of this lemma [ pmodgen0 ] ) one sees that at any @xmath1094 there exists @xmath1091 such that holds and hence @xmath1175 , for @xmath1177 so that @xmath1178 .",
    "one also has @xmath1179 , thus one gets @xmath1180 and @xmath1181 .",
    "it follows that for all @xmath1094 one has @xmath1182 .",
    "the section @xmath1183 of the map @xmath695 of has the following interpretation @xmath1184 indeed , by one has @xmath1185 , and since @xmath1096 is the largest value of @xmath1176 for which @xmath1175 @xmath1186 for @xmath1187 one has @xmath1188 .",
    "however the equality does not hold in general which explains why @xmath1183 does not preserve @xmath1189 in general .",
    "given @xmath1017 the fiber @xmath1190 is of the form , with @xmath1191 a suitable subset depending on @xmath46 @xmath1192",
    "it is legitimate to wonder in which sense the algebra of semirings and its specialization to  characteristic one \" ( _ i.e. _  the condition @xmath21 ) is a ",
    "natural \" one .",
    "we examine this question in this appendix as an illustration of the saying  the devil is in the details \" .",
    "we refer to @xcite chapter viii , exercice 2.4 and recall the following    [ defnsemiadd ] a category @xmath83 is _ semiadditive _ if it has a zero object ( both initial and final ) , all finite products and coproducts exist , and for any pair of objects @xmath1193 of @xmath83 the canonical morphism from the coproduct to the product is an isomorphism @xmath1194    the object @xmath1195 is then called the biproduct of @xmath1196 and @xmath1197 , and denoted by @xmath1198 .",
    "moreover matrix notation works for morphisms .",
    "in particular , the matrix @xmath1199 gives rise to a canonical element @xmath1200 .",
    "for any pair of objects @xmath1201 of @xmath83 , this construction turns @xmath1202 into a commutative monoid with a zero element . given @xmath1203 , their  sum \"",
    "is obtained as the composition @xmath1204 , where the pair @xmath1205 is viewed as an element of @xmath1206 .",
    "moreover , composition of morphisms is distributive over this addition and thus one has    [ lemsemring ] let @xmath83 be a semiadditive category .",
    "then for any object @xmath1196 of @xmath83 the set @xmath1207 is canonically endowed with the structure of semiring .",
    "lemma [ lemsemring ] shows that semirings occur naturally in semiadditive categories .",
    "it is well known that finite fields are commutative rings and their multiplicative group is cyclic . when accepting semirings one obtains two notable complements to the list of finite fields and both structures are semirings of characteristic one .",
    "indeed , there is only one finite semifield which is not a field , and moreover while there is no field whose multiplicative group is infinite cyclic , there is a unique semifield with this property .",
    "more precisely , one has    @xmath124  if a semifield contains a non - trivial root of unity it is a field.@xmath125  the only finite semifield which is not a field is @xmath2.@xmath205  the only semifield whose multiplicative group is infinite cyclic is @xmath23 .",
    "@xmath124  by proposition 4.41 of @xcite , any element of finite order in a semifield @xmath227 which is not a field , is equal to @xmath26 . indeed , with @xmath1208 one finds that @xmath1209 fulfills @xmath1210 so that @xmath1105 if @xmath1211 .",
    "if @xmath1098 one gets an element @xmath1212 such that @xmath1213 and one has a field .",
    "@xmath125  by @xmath124  all elements of a finite semifield @xmath227 which is not a field are @xmath378 or @xmath26 .",
    "moreover the equation @xmath21 holds thus @xmath1214 is the only finite semifield which is not a field.@xmath205  let @xmath1215 be a semifield whose multiplicative group is infinite cyclic .",
    "the map @xmath1216 defined inductively by @xmath1217 is a morphism of semirings .",
    "assume first that @xmath700 is injective .",
    "then @xmath1218 for all @xmath1219 , where @xmath1220 is the infinite cyclic multiplicative group of @xmath1215 .",
    "thus there would exist two distinct primes @xmath1221 and integers @xmath1222 such that @xmath1223 but this contradicts the injectivity of @xmath700 .",
    "thus @xmath700 is not injective and we let @xmath1224 be such that @xmath1225 .",
    "let @xmath1226 and assume @xmath1227 .",
    "write @xmath1228 with @xmath156 , @xmath1229",
    ". then one has @xmath1230 where @xmath1231 .",
    "this shows that the image @xmath1232 is the same as the image @xmath1233 and is hence finite .",
    "since the multiplicative group of @xmath1215 is infinite cyclic , it follows that every element of @xmath1232 is in @xmath1234 .",
    "there are two cases .",
    "if @xmath1235 , then one is in a field of characteristic @xmath274 and taking a generator @xmath1236 of the multiplicative group one has an equation of the form @xmath1237 for some @xmath1238 showing that @xmath1215 is an algebraic extension of @xmath1239 and thus it is finite .",
    "if @xmath21 one is in characteristic @xmath26 and since @xmath1215 is a semifield the maps @xmath85 , @xmath1240 , are injective endomorphisms ( @xcite proposition 4.43 ) .",
    "let then @xmath1236 be a generator of the multiplicative group and @xmath115 such that @xmath1237 .",
    "one then has , using the maps @xmath85 , that @xmath1241 for all @xmath1242 . for @xmath156 one",
    "has @xmath1243 and the associativity implies @xmath1244 so that @xmath1245 and @xmath1246 . for @xmath1247 one",
    "has @xmath1248 and by associativity one gets as above @xmath1249 so that @xmath1250 and @xmath1251",
    ". thus the only possible values of @xmath1089 are @xmath378 and @xmath26 .",
    "these values correspond to the two possible choices of the generator of the multiplicative group of @xmath23 and one obtains the required isomorphism @xmath1252 .",
    "in this paper we have constructed the scaling site @xmath0 by implementing the extension of scalars ( from @xmath2 to @xmath3 ) for the arithmetic site @xmath1 .",
    "it is rather intriguing that one would have been led to the same definition of @xmath0 by analyzing the well known results on the localization of zeros of analytic functions which involve newton polygons in the non - archimedean case and the jensen s formula in the complex case .",
    "indeed , these results combine to show that the tropical half line , _ i.e. _  @xmath15 endowed with the structure sheaf of convex piecewise affine functions with integral slopes , gives a framework , common to all these cases , for the localization of zeros of analytic functions in the punctured unit disk .",
    "the additional structure involved in the scaling site , _ i.e. _  the action of @xmath5 by multiplication on the tropical half - line corresponds , as shown below in and , to the transformation on functions given by the composition with the @xmath19-th power of the variable . the tropical notion of  zeros \" of a convex piecewise affine function @xmath46 with integral slope is that a zero of order @xmath327 occurs at a point of discontinuity of the derivative @xmath1253 with @xmath327 equal to the sum of the outgoing slopes .",
    "the conceptual meaning of this notion is understood either by using cartier divisors or by implementing the natural hyperstructure on @xmath51 as shown in @xcite .",
    "let @xmath195 be a complete and algebraically closed extension of @xmath1254 and @xmath1255 be the valuation .",
    "the tropicalization ( see for instance @xcite ) of a series with coefficients in @xmath195 is obtained by applying the transformation @xmath1256 to the coefficients using the simple correspondences @xmath1257 in this way a sum @xmath1258 of monomials is replaced by the max : @xmath1259 .",
    "more precisely    [ defntropna ] let @xmath1260 be a laurent series with coefficients in @xmath195 and convergent in an annulus @xmath1261 .",
    "then , the tropicalization of @xmath46 is the real valued function of a real parameter @xmath1262    up to a trivial change of variables , this notion is well known in @xmath7-adic analysis where the function @xmath1263 or rather its graph is called the _ valuation polygon _ of the series ( _ cf._@xcite chapter 6 ,  1.6 ) .",
    "this polygon is dual to the newton polygon of the series which is , by definition , the lower part of the convex hull of the points of the real plane with coordinates @xmath1264 , where @xmath1062 is the valuation . by construction",
    ", @xmath1265 is finite since using the convergence hypothesis the terms @xmath1266 tend to @xmath537 when @xmath1267 .",
    "thus one gets a convex and piecewise affine function .",
    "moreover one has the multiplicativity property ( _ cf._@xcite chapter 6 , proposition 1.4.2 ) @xmath1268 and the classical result    [ classical ] let @xmath1260 be a laurent series with coefficients in @xmath195 , convergent in an annulus @xmath1261 .",
    "then the valuations @xmath1269 of its zeros @xmath1270 ( counted with multiplicities ) are the zeros ( in the tropical sense and counted with multiplicities ) of the tropicalization @xmath1271 in @xmath1272 .",
    "this classical result is , for instance , deduced from the case of laurent polynomials ( see @xcite , lemma 1.6 ) using the approximation argument of @xcite , proof of theorem 6.2.2.1 . in particular one can take @xmath1273 , @xmath1274 so that @xmath1275 is the punctured unit disk @xmath1276 . in that case",
    "the @xmath1271 are convex piecewise affine functions on @xmath15 and one has the compatibility with the action of @xmath5 on functions by @xmath1277 @xmath1278      for complex numbers , unlike in the non - archimedean case , it is no longer true that for a generic radius @xmath1279 , the modulus @xmath1280 is constant on the sphere of radius @xmath1279 and one replaces by      by construction one still has the multiplicativity @xmath1284 for @xmath1285 such that @xmath46 has no zero on the circle of radius @xmath1286 , the derivative of @xmath1265 is the opposite of the winding number @xmath1287 of the loop @xmath1288 . thus the function @xmath1265 is piecewise affine with integral slopes . when the radius @xmath1286 of the circle increases the winding number of the associated loop increases by the number of zeros of @xmath46 in the intermediate annulus and this shows that the function @xmath1265 is convex and fulfills the jensen s formula ( _ cf . _",
    "@xcite theorem 15.15 ) which is seen as the analogue of theorem [ classical ] .",
    "[ classical1 ] let @xmath1281 be a holomorphic function in an annulus @xmath1282 and @xmath1270 its zeros counted with their multiplicities .",
    "then the values @xmath1289 are the zeros ( in the tropical sense and counted with multiplicities ) of the tropicalization @xmath1271 in @xmath1272 .",
    "in particular one can take @xmath1273 , @xmath1274 so that @xmath1275 is the punctured unit disk @xmath1276 . in that case",
    "the @xmath1271 are convex piecewise affine functions on @xmath15 and one has the following compatibility with the action of @xmath5 on functions by @xmath17 @xmath1290 this follows from the equality for periodic functions @xmath1291",
    "@xmath1292                        j.  golan , _ semi - rings and their applications _ ,",
    "updated and expanded version of the theory of semi - rings , with applications to mathematics and theoretical computer science [ longman sci .",
    "harlow , 1992 .",
    "kluwer academic publishers , dordrecht , 1999 ."
  ],
  "abstract_text": [
    "<S> in this paper we construct the scaling site @xmath0 by implementing the extension of scalars on the arithmetic site @xmath1 , from the smallest boolean semifield @xmath2 to the tropical semifield @xmath3 . </S>",
    "<S> the obtained semiringed topos is the grothendieck topos @xmath4 , semi - direct product of the euclidean half - line and the monoid @xmath5 of positive integers acting by multiplication , endowed with the structure sheaf of piecewise affine , convex functions with integral slopes . </S>",
    "<S> we show that pointwise @xmath4 coincides with the adele class space of @xmath6 and that this latter space inherits the geometric structure of a tropical curve . </S>",
    "<S> we restrict this construction to the periodic orbit of the scaling flow associated to each prime @xmath7 and obtain a quasi - tropical structure which turns this orbit into a variant @xmath8 of the classical jacobi description @xmath9 of an elliptic curve . on @xmath10 </S>",
    "<S> , we develop the theory of cartier divisors , determine the structure of the quotient @xmath11 of the abelian group of divisors by the subgroup of principal divisors , develop the theory of theta functions , and prove the riemann - roch formula which involves real valued dimensions , as in the type ii index theory . </S>",
    "<S> we show that one would have been led to the same definition of @xmath0 by analyzing the well known results on the localization of zeros of analytic functions involving newton polygons in the non - archimedean case and the jensen s formula in the complex case . </S>"
  ]
}