{
  "article_text": [
    "let @xmath9 be a permutation in the symmetric group @xmath10 .",
    "we say that the permutation @xmath11 _ contains a @xmath1-pattern _ if and only if there is a subsequence @xmath12 of @xmath13 whose elements are in the same relative order as those in @xmath1 , that is , @xmath14 whenever @xmath15 .",
    "if @xmath13 does not contain @xmath1 , then we say that @xmath13 _ avoids _ @xmath1 .",
    "for instance , 214653 contains 231 ( consider the third , fourth , and sixth entries ) , but avoids 4321 .",
    "see chapter 14 of @xcite for an introduction to pattern avoiding permutations , and chapters 4 and 5 of @xcite for a somewhat more detailed treatment .",
    "it is straightforward to compute , using the linear property of expectation , that the average number of @xmath1-patterns in a randomly selected permutation of length @xmath2 is @xmath16 , where @xmath7 is the length of @xmath1 .",
    "joshua cooper @xcite has raised the following interesting family of questions .",
    "let @xmath17 be a given permutation pattern .",
    "what can be said about the average number of occurrences of @xmath1 in a randomly selected @xmath17-avoiding permutation of a given length ?",
    "equivalently , can we determine the _ total number _",
    "@xmath18 of all @xmath1-patterns in all @xmath17-avoiding permutations of length @xmath2 ?      in @xcite ,",
    "present author found formulae for the generating functions of the sequence @xmath19 for the cases of monotone @xmath1 , that is , for @xmath20 and @xmath21 , for any @xmath7 .",
    "he also proved that if @xmath2 is large enough , then for any fixed @xmath7 , among all patterns @xmath1 of length @xmath7 , it is the monotone decreasing pattern that maximizes @xmath19 and it is the monotone increasing pattern that minimizes @xmath19 .      in this paper",
    ", we first present a computational proof of the surprising fact that for all @xmath2 , the equalities @xmath22 hold .",
    "the first equality is trivial , since taking the inverse of a 132-avoiding permutation keeps that permutation 132-avoiding , and turns 231-patterns into 312-patterns .",
    "however , the second equality is non - trivial .",
    "( the reverse or complement of a 132-avoiding permutation is not necessarily 132-avoiding . ) in particular , if @xmath23 denotes the number of 213-copies in @xmath13 , and @xmath24 denotes the number of 231-copies in @xmath13 , then the statistics @xmath23 and @xmath24 are _ not _ equidistributed over the set of all 132-avoiding permutations of length @xmath2 , but their average values are equal over that set .    in other words , we will prove that a randomly selected non - monotonic pattern of length three in a 132-avoiding permutation is equally likely to be a 231-pattern , a 312-pattern , or a 213-pattern .",
    "it is well - known ( see chapter 14 of @xcite ) that 132-avoiding permutations of length @xmath2 are counted by the catalan numbers @xmath25 , and as such , they are one of more than 150 distinct kinds of objects counted by those numbers . however , we do not know of any other example when a natural statistic on objects counted by catalan numbers shows a similar threefold symmetry .    in the next part of the paper we provide a bijective proof of ( [ triple ] ) .",
    "finally , we will significantly generalize this result by showing more than @xmath26 pairs of patterns @xmath1 and @xmath6 of length @xmath27 that behave as 213 and 231 , that is , for which @xmath28 , and the equality is non - trivial .",
    "let @xmath29 be the total number of inversions ( in other words , copies of the pattern 21 ) in all 132-avoiding @xmath2-permutations .",
    "it is proved in @xcite that @xmath30      let @xmath31 be the total number of all 213-patterns in all 132-avoiding permutations of length @xmath2 .",
    "clearly , then @xmath32 .",
    "there are three ways that a 132-avoiding permutation @xmath13 of length @xmath2 can contain a 213-pattern @xmath1 .",
    "either @xmath1 is entirely on the left of the entry @xmath2 , or @xmath1 is entirely on the right of @xmath2 , or @xmath1 ends in @xmath2 .    for @xmath33",
    ", this leads to the recurrence relation @xmath34    let @xmath35 ( resp .",
    "@xmath36 ) be the ordinary generating function for the sequence of the numbers @xmath31 ( resp .",
    "@xmath37 ) . then the last displayed formula yields the functional equation @xmath38 which is equivalent to @xmath39 from here",
    ", we get that if @xmath33 , then @xmath40 which simplifies to @xmath41      let @xmath42 be the total number of all non - inversions ( in other words , copies of the pattern 12 ) in all 132-avoiding permutations of length @xmath2 .",
    "it is proved in @xcite that @xmath43    let @xmath44 be the total number of all 231-copies in all 132-avoiding permutations of length @xmath2 , and let @xmath45 .",
    "let @xmath46 note that @xmath47 is the generating function for the number of entries ( which are copies of the pattern 1 ) in all 132-avoiding @xmath2-permutations .",
    "if @xmath13 is a 132-avoiding @xmath2-permutation , and @xmath1 is a 231-pattern contained in @xmath13 , then either @xmath1 is entirely on the left of the entry @xmath2 , or @xmath1 is entirely on the right of the entry @xmath2 , or the entry @xmath2 is the largest entry of @xmath1 , or the first and second entries of @xmath1 form a 12-pattern on the left of @xmath2 , while the third entry of @xmath1 is on the right of @xmath2 .    for @xmath33 , this leads to the recurrence relation @xmath48 in terms of generating functions , this yields @xmath49 @xmath50 given the explicit formulae ( [ non - inversions ] ) and ( [ explicitz ] ) for @xmath51 and @xmath47 , the last displayed equation yields the formula @xmath52    the proof of the main result of this section is now immediate .    for all positive integers @xmath2 ,",
    "the equalities @xmath53 hold .    as we mentioned in the introduction ,",
    "the first equality is trivially true since there is a natural bijection between the 231-copies of the 132-avoiding permutation @xmath13 and the 312-copies of the 132-avoiding permutation @xmath54 .",
    "indeed , let @xmath55 be a 132-avoiding permutation , and let @xmath56 .",
    "then @xmath57 is a 231-copy in @xmath13 if and only if @xmath58 is a 312-copy in @xmath54 .    the equality @xmath59 holds since we have seen in formulae ( [ explicita ] ) and ( [ explicitb ] ) that the two sides of this equality have identical generating functions .",
    "in this section we provide a bijective proof for the surprising identity @xmath60 .      in our proof , we will identify a 132-avoiding permutation @xmath13 with its _ binary plane tree _",
    "@xmath61 using a very well - known bijection .",
    "we will briefly describe this bijection now . for more details ,",
    "the reader may consult chapter 14 of @xcite .",
    "the tree @xmath61 will be a binary plane tree , that is , a rooted unlabeled tree in which each vertex has at most two children , and each child is a left child or a right child of its parent , even if it is the only child of its parent .",
    "the root of @xmath61 corresponds to the entry @xmath2 of @xmath13 , the left subtree of the root corresponds to the string of entries of @xmath13 on the left of @xmath2 , and the right subtree of the root corresponds to the string of entries of @xmath13 on the right of @xmath2 .",
    "both subtrees are constructed recursively , by the same rule . note that since @xmath13 is 132-avoiding , the position of the entry @xmath2 of @xmath13 determines the set of entries that are on the left ( resp . on the right ) of @xmath2 .",
    "in fact , if @xmath2 is in the @xmath62th position , the set of entries on the left of @xmath2 must be @xmath63 , and the set of entries on the right of @xmath2 must be @xmath64 .",
    "we point out that in the process of constructing @xmath61 , each vertex of @xmath61 is associated to an entry of @xmath13 .",
    "indeed , each vertex is added to @xmath61 as the root of a subtree @xmath65 , and so each vertex is associated to the entry that is the largest among the entries that belong to @xmath65 .",
    "however , it is important to point out that @xmath61 is an _ unlabeled tree _ since the way in which the entries of @xmath13 correspond to the vertices of @xmath61 is completely determined by the unlabeled tree @xmath61 as long as @xmath13 is 132-avoiding .",
    "see figure [ binplane ] for an illustration .",
    "[ binplane ]    note that in order to get @xmath13 from @xmath61 , it suffices to read the vertices of @xmath61 _ in - order _ , that is , by first reading the left subtree of the root , then the right subtree of the root , and then the right subtree of the root .",
    "the respective subtrees are read recursively , by this same rule .",
    "therefore , it is meaningful to talk about the first , second , etc , last vertex of @xmath61 , since that means the first , second , etc , last vertex of @xmath61 in the _ in - order _ reading .    a _ left descendant _ ( resp .",
    "_ right descendant _ of a vertex @xmath66 in a binary plane tree is a vertex in the left ( resp .",
    "right ) subtree of @xmath66 . the left ( resp .",
    "right ) subtree of @xmath66 does _ not _ contain @xmath66 itself .",
    "it is straightforward to see that @xmath67 is a 12-pattern in @xmath13 if and only if @xmath68 is a left - descendant of @xmath69 in @xmath61 . on the other hand , @xmath70 is a 21-pattern in @xmath13 if and only if either @xmath68 is a right descendant of @xmath69 in @xmath61 or there is a vertex @xmath66 in @xmath61 so that @xmath69 is a left descendant of @xmath66 and @xmath68 is a right descendant of @xmath66 . in the previous section we gave an exhaustive list of the ways in which 213-patterns and 231-patterns can occur in a 132-avoiding permutation . the reader is invited to translate that list into the language of binary plane trees .",
    "let @xmath13 be a 132-avoiding @xmath2-permutation , and let @xmath71 be an occurrence of the pattern 213 in @xmath13 .",
    "let @xmath72 be the three vertices of @xmath61 that correspond to @xmath71 , going left to right .",
    "let us color these three entries black .",
    "there are then two possibilities .    1 .",
    "either @xmath73 is a right descendant of @xmath74 and @xmath74 is a left descendant of @xmath75 , or 2 .",
    "there exists a lowest left descendant @xmath76 of @xmath75 so that @xmath74 is a left descendant of @xmath76 and @xmath73 is a right descendant of @xmath76 .",
    "let @xmath77 be the set of all binary plane trees on @xmath2 vertices in which three vertices forming a 213-pattern are colored black .",
    "let @xmath78 be the set of all binary plane trees on @xmath2 vertices in which three vertices forming a 231-pattern are colored black .",
    "now we are going to define a map @xmath79 .",
    "we will then prove that @xmath80 is a bijection .",
    "the map @xmath80 will be defined differently in the two cases described above .    * _ case 1 . _",
    "if @xmath81 is in the first case , then let @xmath82 be the pair obtained by interchanging the right subtree of @xmath74 and the right subtree of @xmath75 .",
    "keep all three black vertices @xmath83 black , even as @xmath73 gets moved . + see figure [ firstmove ] for an illustration .",
    "+ [ firstmove ] + note that in @xmath82 , in the set of black vertices , there is one that is an ancestor of the other two , namely @xmath75 . * _ case 2 . _",
    "if @xmath81 is in the second case , then let @xmath82 be the tree obtained by interchanging the right subtrees of the vertices @xmath76 and @xmath75 , and coloring @xmath74 , @xmath76 and @xmath73 black . see figure [ secondmove ] for an illustration .",
    "+ [ secondmove ] + note that in @xmath82 , there is no black vertex that is an ancestor of the other two black vertices .",
    "also note that in @xmath82 , the lowest common ancestor of @xmath76 and @xmath73 is @xmath75 .",
    "it is a direct consequence of our definitions that if @xmath81 , then @xmath84 .",
    "now we are in a position to prove the main result of this section .",
    "[ bijective ] the map @xmath79 defined above is a bijection .",
    "let @xmath85 .",
    "we will show that there is exactly one @xmath81 so that @xmath86 holds .",
    "this will show that @xmath80 has an inverse , proving that @xmath80 is a bijection .    by definition , three nodes of @xmath87 are colored black , and the entries of the permutation corresponding to @xmath87 form a 231-pattern .",
    "let @xmath88 , @xmath89 , and @xmath90 denote these three vertices , from left to right .",
    "there are two possibilities for the location of the @xmath91 relative to each other .",
    "we will show that in both cases , @xmath87 has a unique preimage under @xmath80 , essentially because swapping two subtrees is an involution .    1 .",
    "if @xmath89 is an ancestor of both other black vertices , then @xmath86 implies that @xmath92 belongs to case 1 . in this case , the unique @xmath81 satisfying @xmath86 is obtained by swapping the right subtrees of @xmath89 and @xmath88 , and keeping all three black vertices black , even if @xmath90 got moved .",
    "if @xmath89 is not an ancestor of both other black vertices and then @xmath86 implies that @xmath92 belongs to case 2 . in this case , let @xmath93 be the smallest common ancestor of @xmath94 and @xmath95 .",
    "then the unique @xmath81 satisfying @xmath86 is obtained by swapping the right subtrees of @xmath89 and @xmath93 , and coloring @xmath93 black instead of @xmath89 , while keeping @xmath90 and @xmath88 black .",
    "this completes the proof .",
    "in this section , we will significantly generalize the result of the previous section .",
    "the key observation is that in the proof of theorem [ bijective ] , the _ left _ subtrees of @xmath73 and @xmath74 never changed .    in order to state our result , we announce the following definitions .",
    "let @xmath1 be a pattern of length @xmath7 and let @xmath96 be a pattern of length @xmath97 . then @xmath98 is the pattern of length @xmath99 defined by @xmath100    in other words , @xmath98 is the concatenation of @xmath1 and @xmath96 so that all entries of @xmath96 are increased by the size of @xmath1 .    if @xmath101 and @xmath102 , then @xmath103 .",
    "let @xmath1 be a pattern of length @xmath7 and let @xmath96 be a pattern of length @xmath97 . then @xmath104 is the pattern of length @xmath99 defined by @xmath105    in other words , @xmath104 is the concatenation of @xmath1 and @xmath96 so that all entries of @xmath1 are increased by the size of @xmath96 .    if @xmath101 and @xmath102 , then @xmath106 .",
    "now we are ready to state and prove the most general result of this paper .",
    "[ general ] let @xmath1 and @xmath96 be any non - empty patterns that end in their largest entry .",
    "let @xmath107 denote the increasing pattern @xmath108 .",
    "then for all positive integers @xmath2 , we have @xmath109 where 1 denotes the pattern consisting of one entry .",
    "in particular , the result of the previous section is the special case of theorem [ general ] in which @xmath110 ( the one - entry pattern 1 ) .    if @xmath111 , @xmath112 , and @xmath113 , then theorem [ general ] says that @xmath114    ( of theorem [ general ] ) note that we can assume that @xmath1 and @xmath96 are both 132-avoiding , since otherwise the statement of theorem [ general ] is trivially true as both sides are equal to 0 .",
    "let @xmath7 denote the length of @xmath1 , let @xmath97 denote the length of @xmath96 . similarly to the proof of theorem [ bijective ] , let @xmath77 be the set of all binary plane trees on @xmath2 vertices in which @xmath27 vertices forming a @xmath115-pattern are colored black , and let @xmath78 be the set of all binary plane trees on @xmath2 vertices in which @xmath27 vertices forming a @xmath116-pattern are colored black .",
    "let @xmath81 .",
    "let @xmath117 be the @xmath7th black vertex of @xmath92 in the in - order reading , let @xmath118 be the @xmath119th black vertex of @xmath92 , and let @xmath120 be the rightmost black vertex of @xmath92 .",
    "we are now going to construct a bijection @xmath121 .",
    "the construction is analogous to the one that we saw before theorem [ bijective ]    1 .",
    "if @xmath118 is a right descendant of @xmath117 , then let @xmath122 be the tree obtained from @xmath92 by swapping the right subtree of @xmath117 and the right subtree of @xmath120 .",
    "note that in @xmath122 , the black vertices form a @xmath123-pattern , and that @xmath120 is an ancestor of all other black vertices in @xmath122 .",
    "see figure [ firstg ] for an illustration .",
    "+ [ firstg ] 2 .",
    "otherwise , there exists a lowest vertex @xmath124 so that @xmath117 is a left descendant of @xmath76 and @xmath118 is a right descendant of @xmath76 .",
    "note that in this case , it follows that @xmath76 is not black .",
    "now let @xmath122 be the tree obtained from @xmath92 by swapping the right subtree of @xmath76 and the right subtree of @xmath120 , and by coloring @xmath76 black , instead of @xmath120 .",
    "note that again , in @xmath122 , the black vertices form a @xmath123-pattern .",
    "also note that there is no black vertex in @xmath122 that would be an ancestor of all other black vertices .",
    "see figure [ secondg ] for an illustration .",
    "+ [ secondg ]    it is straightforward to show that @xmath125 is a bijection . indeed ,",
    "let @xmath85 . if there is a black vertex in @xmath87 that is an ancestor of all other black vertices , then @xmath87 could only be obtained by the first rule , otherwise @xmath87 could only be obtained by the second rule .",
    "the unique preimage @xmath126 is then obtained by swapping the appropriate right subtrees . in the first case ,",
    "swap the right subtrees of @xmath127 and @xmath128 , where @xmath127 is the @xmath7th and @xmath128 is the @xmath129th black vertex of @xmath87 in the in - order reading . in the second case ,",
    "let @xmath130 be the @xmath131st black vertex of @xmath87 , let @xmath132 be the last black vertex of @xmath87 , and let @xmath128 be the lowest common ancestor of @xmath130 and @xmath132 .",
    "then the unique preimage @xmath126 is obtained by swapping the right subtrees of @xmath130 and @xmath128 , and coloring @xmath128 black instead of @xmath130 .",
    "note that by transitivity , theorem [ general ] implies the following .",
    "let @xmath1 , @xmath96 , and @xmath107 be as in theorem [ general ] , and let @xmath133 .",
    "then we have @xmath134    theorem [ general ] shows that both sides are equal to @xmath135 .",
    "formula ( [ exactfora ] ) implies that @xmath136 , while the generating functions computed in @xcite imply that @xmath137 and @xmath138 , where the @xmath139 are positive constants .",
    "so occurrences of non - monotone patterns of length three are infinitely rare compared to occurrences of 321 , and infinitely frequent compared to occurrences of 123 ; the frequency of non - monotone patterns is halfway between the two extremes .    while precise formulae like the ones given in earlier sections of this paper may not be obtainable for longer patterns , comparative results as the ones described in the previous paragraph may be possible to prove even for such patterns .",
    "if we set @xmath140 and @xmath141 , then theorem [ general ] provides @xmath142 non - trivial examples of two patterns @xmath143 and @xmath144 for which @xmath145 for all @xmath2 .",
    "other choices of @xmath146 provide additional such pairs .",
    "however , it seems that there are other pairs of patterns whose total number of copies in all 132-avoiding permutations agree .",
    "we hope to discuss such pairs in an upcoming paper .    are there any other such pairs ? are there any such pairs when 132 is replaced by another pattern @xmath17 ? are there any patterns @xmath17 and @xmath147 for which @xmath148 for all @xmath2 and the equality is non - trivial",
    "?      99 m. bna , a walk through combinatorics , 3rd edition , world scientific , 2011 .",
    "m. bna , combinatorics of permutations , crc press , 2004 .",
    "m. bna , where the monotone pattern ( mostly ) rules , _ discrete math_.",
    "* 308 * ( 2008 ) , no .",
    "23 , 57825788 .",
    "m. bna , the absence of a pattern and the occurrences of another .",
    "_ discrete math",
    "* 12 * ( 2010 ) , no .",
    "2 , 89102 . j. cooper , combinatorial problems i like , _ internet resource_. n. ruskuc , s. linton , v. vatter , editors , patterns in permutations , cambridge university press , 2010 .",
    "r. stanley , enumerative combinatorics , volume 2 , cambridge university press , 1997 ."
  ],
  "abstract_text": [
    "<S> we prove that the total number @xmath0 of copies of the pattern @xmath1 in all 132-avoiding permutations of length @xmath2 is the same for @xmath3 , @xmath4 , or @xmath5 . </S>",
    "<S> we provide a combinatorial proof for this unexpected threefold symmetry . </S>",
    "<S> we then significantly generalize this result to show an exponential number of different pairs of patterns @xmath1 and @xmath6 of length @xmath7 for which @xmath8 and the equality is non - trivial .    </S>",
    "<S> _ dedicated to the memory of herb wilf _ </S>"
  ]
}