{
  "article_text": [
    "woodwind instruments of the orchestra have often attained their geometrical shapes through a slow gradual process , which in many cases has taken centuries .",
    "guided by trial and error , skilled craftsmen have managed to develop the instruments as we know them today . in this article",
    "we study the clarinet .",
    "most of its evolutionary process ( addition of new holes and keys , etc . )  was made of the succession of many small steps , each implying a limited departure from a previous configuration  for clarinets the only radical change was the introduction of the boehm system  of french instruments by klos in the middle of the 19@xmath0 century .",
    "a typical wind instrument has a large number of design parameters ( positions and size of the holes and the chimneys , bore , etc . ) , while many of them contribute at the same time to the production of each note .",
    "indeed , changing one of them in order to correct a certain note may have an unexpected , and often adverse , effect on other notes in terms of pitch , tone quality , stability , etc . in a posthumous paper ,",
    "benade @xcite attempted to analyze the evolutionary path since the 18th century .",
    "trying new configurations by the traditional method requires a large amount of work .",
    "it therefore seems likely that the modifications tested by the instrument makers have been limited to relatively small changes , affecting only a few parameters at the same time . in other words , in terms of optimization ,",
    "existing instrument designs probably represent local extrema of some optimization function , in the sense that a small change in the set of tone hole positions , radii etc . inevitably worsens the instrument .",
    "nevertheless there might exist better geometrical shapes that are more distant in the parameter space , and therefore not accessible through small improvements of an existing design .",
    "an additional reason to believe in this scenario is given by the observation of the rather irregular tone hole pattern of many woodwinds , with alternating small and large holes , short and long chimneys , closed holes ( opened for one note only ) etc .",
    "it seems that no particular physical principle could explain why such an irregularity is desirable ; there are actually reasons to believe that it is not , in particular if homogeneity of the production of sound over the different notes is required .    nowadays , with mathematical models of the instrument and computer optimization algorithms , it is possible to test a number of configurations that would be inaccessible by the traditional method .",
    "it is therefore interesting to explore which results can be obtained by automatic optimization , to compare them with existing instruments , and to investigate if a strong irregularity spontaneously emerges from the optimization .",
    "the idea is not necessarily to create some completely new or exotic instrument , even if this possibility is not excluded in the long run .",
    "it is rather to investigate whether allowing large leaps  from usual designs leads to a completely different geometry of the instruments , to try and reach more logical  configuration of the acoustical resonator , and eventually test them acoustically . in particular , an open question ( not answered in this work ) is whether or not the use of fork fingering , often used in clarinets , is an acoustical necessity , or just the result of the complicated past history of the instrument .",
    "the purpose of this work is therefore to develop algorithms for designing , and possibly improving , woodwind instruments , in the case of the clarinet .",
    "it is to see if it is possible to conceive a logical clarinet , with a perfectly regular fingering chart , and where the relations between the acoustical functions of the resonator and its geometry are more easy to grasp than in the traditional instrument .",
    "of course , the instrument should produce correct pitch for all notes .",
    "fortunately this problem is not too complicated to address in terms of calculated acoustical impedances : for simplicity it can be assumed that playing frequencies can be derived from resonance frequencies with a simple length correction in order to account for reed flow and dynamics @xcite .",
    "a more difficult issue is to design an instrument with balanced timbre over its entire range .",
    "while the precise relation between tone quality and cutoff frequency of the tone hole lattice @xcite is still not perfectly understood , experience seems to show that a regular cutoff frequency is useful ( see @xcite , page 485 ) . here",
    ", we study the possibility of designing an instrument with a much more regular tone hole lattice in terms of tone hole diameters and positions , able to produce a complete chromatic scale over the full range of the traditional instrument .    of course",
    ", whether such instruments will prove to be musically useful is not obvious a priori .",
    "nevertheless , if this is the case , it is clear that interesting perspectives for making simpler and cheaper instruments could be envisaged .",
    "our study is limited to the purely acoustical aspects of instrument design ; we have not studied the problem of mechanical keys that are necessary for an instrumentalist to really play the instrument .",
    "this is indeed an important question , but this task is beyond the scope of the present work .    numerous authors have discussed possible improvements of clarinets , in particular benade @xcite , but without using numerical optimization .",
    "brass instruments have indeed been studied by optimization @xcite , but in this case the free parameters relate to the bore of the instrument and not to the geometry of lateral holes .",
    "this article is organized as follows .",
    "section [ sec : mathmodel ] provides the basic mathematical model used to characterize the acoustical properties of the instrument  mostly a calculation of the resonance frequencies of the resonator .",
    "section [ sec : opt_proc ] describes the optimization procedure and the minimization algorithm .",
    "section [ sec : compimpl ] briefly discusses the computer implementation . section [ sec : prospective ] presents various numerical results obtained by retaining various optimization criteria ; five different clarinets  are obtained and their properties are compared .",
    "these results are used in section [ sec : prototype ] to design an experimental prototype , and to measure its sound production with the help of an automatic blowing machine .",
    "finally , section [ sec : discussion ] draws a few conclusions .",
    "the instrument is modeled with a classical one - dimensional transmission line model for planar waves @xcite , taking visco - thermal losses into account throughout the main bore , as well as in the tone holes .",
    "it is assumed that the distance between tone holes is sufficiently large to make higher mode interactions negligible .",
    "this assumption is valid if the distance is at least larger than the bore diameter ( see e.g. ref .",
    "@xcite ) . accordingly",
    ", the instrument is modeled as a succession of transfer matrices representing either a cylindrical piece of tubing , or a tone hole ; each tone hole is formally represented by a lumped element .",
    "( -42.5,44)@xmath1 ( 0,17)@xmath2 ( -42.5,5)@xmath3    the transfer matrix of a cylindrical piece of tubing of length @xmath4 and characteristic impedance @xmath5 is given by @xmath6,\\]]where @xmath7 is the complex propagation constant .",
    "the model is rather accurate for the characteristic wavelengths propagating inside a typical wind instrument .",
    "the first higher order mode is usually far below cutoff ; for a cylinder of 15 mm diameter it is a helical mode with a cutoff frequency of 13.5khz .",
    "the following expressions for the characteristic impedance @xmath5 and the wave number @xmath7 are used ( see e.g. @xcite ) @xmath8 , \\\\",
    "\\gamma & = k\\left ( \\frac{1.045}{r_{v}}+\\frac{1.080}{r_{v}^{2}}+j\\left ( 1+\\frac{1.045}{r_{v}}\\right ) \\right).\\end{aligned}\\ ] ] in this equation , @xmath9 is equal to @xmath10 where @xmath11 is the mass density of the gas , @xmath12 the speed of sound and @xmath13 the radius of the tube .",
    "@xmath14 denotes the wavenumber @xmath15 , where @xmath16 is the angular frequency .",
    "the dimensionless number @xmath17 is defined as the ratio between the tube radius and the thickness of the boundary layer @xmath18where @xmath19 is the coefficient of viscosity .",
    "each tone hole is modeled as a t - junction ( fig .",
    "[ fig : tjunction ] ) .",
    "the transfer matrix corresponding to this electrical equivalent circuit is the following , if @xmath20:@xmath21    the series impedances @xmath22 are purely inertial , but the total shunt impedance @xmath23 also has a resistive part due to visco - thermal damping and radiation losses . for the acoustic masses @xmath24 and",
    "@xmath25 , we use expressions obtained from @xcite , @xmath26 where @xmath27     ( -48,29)@xmath22 ( -20,29)@xmath22 ( -32,15)@xmath23 ( -22,12)@xmath28    the input impedance @xmath29 of a tone hole of cross section area @xmath30 depends on whether it is open or closed . for an open tone hole , @xmath29 is calculated by considering the tone hole as a transmission line terminated by a radiation impedance @xmath31 . a simple expression for the radiation impedance of a hole in the side of a cylinder @xcite is not known but , since @xmath32 is small , it seems reasonable to assume that the tone hole acts as an infinitely flanged pipe ; a more detailed model for flanged termination is probably unnecessary for our purposes . at low frequencies ( @xmath33 ) , this leads to the simple formula@xmath34.\\ ] ] accordingly",
    ", a tone hole of length @xmath35 , terminated by an impedance @xmath31 , is represented by the input impedance @xmath36exterior hole interaction @xcite is not taken into account ; assuming that this effect remains negligible is reasonable , especially at low frequencies .",
    "the input impedance of a closed tone hole is calculated in the same way , but with @xmath37 . in the limit @xmath38 , which is an acceptable approximation of the impedance for short chimneys",
    ", the closed hole input impedance expression reduces to a shunt stiffness @xmath39 .      an ordinary clarinet is terminated by a bell .",
    "the main purpose of the bell is to equilibrate the timbre of the lowest notes of the instrument with that of the other notes . in this project ,",
    "we replace the bell by a continuation of the cylindrical main bore with two vent - holes , as shown in fig .",
    "[ fig : ventholes1500 ] .",
    "the length of the extension and the diameters of the vent - holes are chosen in order to obtain a theoretical lattice cutoff frequency of 1.420 khz , approximately equal to the average cutoff frequency of a clarinet @xcite .",
    "14.75 mm , @xmath4012.5 mm , @xmath414.0 mm , and @xmath4218.2 mm the cutoff frequency @xmath431.420 khz.,width=226 ]      the frequency of a blown note depends on the input impedance spectrum , the reed dynamics ( in contact with the lips ) and the blowing pressure . in practice , since the playing frequency is much smaller than the resonance frequency of the reed , the dominant factor is the input impedance .",
    "we use a simplified description where the mouthpiece and the reed are replaced ( for a given stiffness , blowing pressure , air flow correction , etc . ) by an effective volume correction added to the instrument .",
    "the effects of a temperature gradient along the air column on the pitch can be ignored in a first approximation .",
    "references @xcite and @xcite indicate that a satisfactory approximation of the frequency shifts is obtained by taking into account the average along the instrument of the temperature only ; our calculations should then remain valid , just with a temperature offset .",
    "another approximation we have made is not taking into account the effects of changes in gas composition ( co@xmath44 , o@xmath44 ) , which have been studied by coltman@xcite for the flute and fuks@xcite for the oboe and bassoon .",
    "further investigation is probably needed along these lines .",
    "the playing frequency at soft playing levels is to a first approximation equal to a resonance frequency of the air column inside the clarinet - mouthpiece combination , given by the solution of the equation @xmath45=0\\text { , }   \\label{eq : imzinzero}\\]]where @xmath46 is the input impedance of the whole instrument at the tip of the reed , including the volume correction of the mouthpiece and the reed .    apart from the resonance frequencies of the resonator , of course other properties of the input impedance spectrum may influence sound production .",
    "in particular , the heights and widths of the impedance peaks are relevant to the stability of played notes .",
    "the importance of aligning the harmonics of the playing frequency with subsequent zeros of eq .",
    "[ eq : imzinzero ] has been emphasized by benade @xcite . according to a theoretical evaluation ( @xcite ) ,",
    "an inharmonicity of 20 cents between the two first peaks may cause a variation in the playing frequency of about 10 cents between piano and fortissimo levels .",
    "moreover , transients during the attack of the notes may be affected by other properties of the impedance spectrum .",
    "nevertheless , since less deviation of intonation can be tolerated during the quasi permanent regime of sounds , we have chosen to include only the resonance frequencies of the input impedance in our optimization .",
    "the principle of clarinet design optimization is to determine a set of geometrical variables that minimize a cost function characterizing , for each fingering , the distance between the solutions of eq .",
    "( [ eq : imzinzero ] ) and the frequencies of a tempered scale . since the number of design variables is large , and since the cost function depends non - linearly on them , a numerical treatment of the problem with an efficient minimization algorithm is necessary .",
    "we have chosen gradient based algorithms for their convenience ; they do not guarantee to reach the absolute extremum in general , but are efficient to find local optima .    to start the algorithm , a reasonable initial",
    "guess for tone hole positions and dimensions is necessary , as a seed  for the calculation .",
    "this seed was obtained by starting from the lowest note , which gives the total length of the instrument , and then successively computing by iteration the position for each tone hole in order to obtain the desired resonance frequencies of the first register .",
    "if the radius and chimney length of each hole are fixed to some typical value ( in the examples below , the radius increases linearly from 4.0 mm to 5.0 mm and the chimney length is 4.0 mm ) , and if the influence of closed tone holes above the first open one is ignored , the process amounts to solving a series of scalar equations for the hole positions .",
    "the cost function was calculated by taking into account the frequencies @xmath47 of the impedance resonances obtained from eq .",
    "( [ eq : imzinzero ] ) , where @xmath14 refers to the note ( @xmath48 ) and @xmath49 refers to the resonance ( @xmath50 corresponds to the first impedance resonance , @xmath51 to the second , etc . ) . for the lower register ,",
    "the cost function includes two elements : the square of the distance between the first impedance resonance and the frequency @xmath52 of a tempered scale , as well as the square of the distance between the second resonance and @xmath53 , both with equal weights . in this way",
    ", a good impedance peak cooperation can be expected , resulting in good pitch stability . for the second",
    "register , only the first resonances @xmath54 were taken into account and compared to the corresponding equal scale values @xmath52 . in practice , we introduce a vector @xmath55 with @xmath56 components associated with the lower register ( where @xmath57 , the number of notes of this register ) : @xmath58 as well as @xmath59 additional components associated with the second register .",
    "we then choose the square of the norm of the vector @xmath55 with @xmath60 components as our target function for optimization : @xmath61 .",
    "with @xmath62 representing a vector of physical design variables as described below , the optimization problem can be stated as @xmath63    the problem is expected to be non - convex , leading to many extrema that are in general only local , and therefore dependent on the seed of the calculation .",
    "nevertheless , the hope is that the crude initial model of the clarinet used to create this seed should be sufficiently reasonable to make a sensible instrument emerge from the optimization .",
    "it is probably impossible to attain @xmath64 ( simultaneous perfect position of resonances for all considered notes ) .",
    "what is obtained is a compromise , which can then be adjusted if necessary by weighting the terms of the cost function differently .",
    "for instance , the even components of @xmath55 corresponding to the second resonance of the first register may be considered as less important than the odd components .",
    "the free parameters @xmath62 of the model are the total tube length and the positions , radii and chimney lengths of the tone holes , which amounts to more than @xmath65 free parameters .",
    "the resonator is perfectly cylindrical ; nevertheless , a localized cylindrical enlargement / constriction between the mouthpiece and the uppermost tone hole can also be introduced into the calculation , since this is known to improve harmonicity @xcite .",
    "we also put constraints on the tone hole diameters and chimney lengths , in order to avoid unpractical or otherwise unfeasible solutions .",
    "some constraints are straightforward ( such as dimensions being positive , and the hole radii necessarily being smaller than the radius of the main bore ) , but others are required by manufacturing , or by the fact that the mathematical model would otherwise not be valid . in practice , those constraints were often left for manual a posteriori check .",
    "all variables do not affect the distances of eqs .",
    "( [ eq : residuals ] ) in the same way .",
    "for instance , it is obvious that the holes of the bottom notes have little influence on the tuning of the upper resonances . on the other hand",
    ", the uppermost tone holes generally have an appreciable influence on all of the lower notes , due to the shunt reactance introduced by closed tone holes .    as a simple first approximation",
    ", the effect of an open tone hole of length @xmath35 can be represented by a shunt acoustic mass @xmath66 , which suggests that @xmath35 and @xmath67 do not need to be simultaneously considered as design variables . in practice",
    ", however , it appears necessary to include also the chimney lengths as design variables in order to obtain acceptable positions of the resonances .",
    "the core of the algorithm is the calculation of a function giving the input impedance of a series of open and closed tone holes , separated by cylindrical sections .",
    "it is used by a routine that evaluates @xmath55 and the cost function , using a global root finder in the search for the zeros of @xmath68 .",
    "the global root search is essentially done by analyzing the spectrum and selecting out the impedance maxima of interest before eq .",
    "is solved .",
    "one of its input of the optimization code is a fingering - matrix ( such as that shown in fig .",
    "[ fig : fingerchart1 ] ) .",
    "this makes optimization with arbitrary fingerings possible , for instance even if fork fingering was considered .",
    "the algorithms are implemented in matlab , and the routine ` lsqnonlin ` from the optimization toolbox is used for the optimization procedure , with the necessary gradient approximated numerically . the stopping criterion for the iteration ( change in @xmath69 )",
    "was chosen empirically in accordance with the magnitude of @xmath70 ( see the convergence study in [ sec : convstudy ] ) .",
    "the execution time for the optimization depends on the number of design variables , the number of components in the cost function and the convergence process . for the designs presented below",
    ", it varied typically between 20 min and two hours on a desktop computer .",
    "a first series of numerical experiments was made in order to get a better idea of a suitable configuration in general ; five different configurations , denoted _",
    "a__e _ , were investigated .",
    "they all represent strictly chromatic instruments , meaning that they include neither fork fingerings nor `` disordered '' opening of tone holes .",
    "the frequency range was d3f5 , corresponding to the first register ( chalumeau ) and the first @xmath71 notes of the second register  for case ( e ) , it was even slightly more , as we discuss below .",
    "the clarinets differ in the function of the register hole , which can be either a dedicated register hole , or a dual register hole / tone hole .",
    "in addition , the effect of a cylindrical constriction or enlargement between the mouthpiece and the first tone hole was investigated  this was the only deviation from an otherwise cylindrical bore .    a cylindrical instrument such as the clarinet overblows the twelfth .",
    "for a chromatic instrument , this requires 18 tone holes to cover the range of the first register .",
    "the notes of the second register are obtained by opening the register hole and repeating the fingering from the first register . a fingering chart for the instruments with a dual register hole",
    "can be seen in fig .",
    "[ fig : fingerchart1 ] .",
    "initially , the bore diameter @xmath72 mm was selected to match available clarinet mouthpieces ; @xmath13 was therefore not considered as a variable in the optimization .",
    "the dimension @xmath73 of the instrument termination ( fig .",
    "[ fig : ventholes1500 ] ) was then calculated from @xmath13 and the chosen values @xmath74 mm and @xmath75 mm so as to give a cutoff frequency of 1.42 khz ( on real clarinets , the chimney length @xmath35 is often longer than the tube thickness @xmath76 ) .",
    "the constraints imposed on the hole dimensions were rather loose with respect to the values of existing instruments .",
    "a lower bound on the hole radius was set to 2.0 mm , except for the tone hole acting as the register hole , for which it was set to 1.0 mm .",
    "an upper bound of 6.0 mm was set for all holes .    for chimney lengths , a lower bound",
    "was set to 2.5 mm , with no upper bound .",
    "if one includes a dedicated register hole , 20 cylindrical sections precede , separate , or succeed the 19 tone holes .",
    "each tone hole is characterized by two parameters , which now makes a total of 58 design variables .    to achieve convergence",
    ", it proved necessary to perform the optimization process in two successive phases .",
    "starting from the crude initial solution described in section [ sec : opt_proc ] , the optimization process was run by calculating a single - register design ( @xmath77 ) optimizing only the 19 notes of the first register ( including their second resonances ) .",
    "this solution is then used as the starting point for phase 2 , which takes into account the second register also .",
    "experience shows that phase 2 is more sensitive to the initial solution than phase 1 .",
    "a `` bad '' initial solution might in practice ruin convergence altogether , or lead to a local minimum that is clearly not acceptable .",
    "our first optimization was the design of a clarinet with an uppermost tone hole that has the dual function of a register hole and an ordinary tone hole , as common with existing instruments .",
    "the role of the register hole is to shift and reduce the height of the peak of the fundamental resonance , while the second resonance is not too affected ; this facilitates the emission of the second register .",
    "these conditions tend to lead to register holes that are significantly smaller than tone holes , so that some compromise is necessary for a hole having a dual function .",
    "[ fig : cylnoreg ] shows the obtained tone hole pattern and the position of the acoustical resonances with respect to equal temperament .",
    "the position of the first tone hole / register hole is 155 mm from the reed end , which is about one third of the distance to the f3 hole ; this is near the optimal position of a register hole for the bottom notes of the second register .",
    "the hole radius is 1.09 mm , which is in fact slightly larger than the constraint , and considerably smaller than all the other tone holes .",
    "this explains the large distance between the first and the second holes compared to the rest of the tone hole lattice .",
    "the first resonances of the notes in the first register are well in tune . around the crossover from the first to the second register , resonance tuning problems occur .    ) .",
    "the two intermediate figures give more detail on the geometry of these tone holes .",
    "the lowest part of the figure shows the difference between the position of the impedance resonances and the frequencies of a perfect chromatic scale with equal temperament .",
    "notes 119 are the first ( lower ) register notes , notes 2029 are second register notes calculated from the second resonance of the impedance .",
    "one notices the particular position of the first hole , which is unusually separated from all the others ; this is a consequence of its dual acoustical role ( register and tone hole).,width=415 ]      introducing a cylindrical enlargement is known to correct the tuning of the twelfths @xcite .",
    "our optimization code is compatible with the introduction of a cylindrical constriction or enlargement anywhere between the mouthpiece and the uppermost tone hole .",
    "as mentioned above , the latter is represented by a section of the resonator having the same volume as a typical mouthpiece ( for a 14.75 mm bore this corresponds to 73 mm . ) .",
    "optimizing this constriction / enlargement introduces new parameters : its position , length and diameter .",
    "an upper bound on the diameter was set to 25.0 mm .",
    "lower bounds for both the diameter and the length were set to 0 mm .",
    "the optimization provided a 4.4 mm long enlargement with a diameter of 25 mm , inserted immediately after the mouthpiece .",
    "the diameter was therefore equal to its maximal bound , introducing a rather large discontinuity ; under these conditions , higher order duct modes should be taken into account , introducing added mass @xcite . as a simple approximation ,",
    "it can be considered as a simple length correction , found to be 1.5 mm .",
    "[ fig : enlargnoreg ] shows the positions of the holes as well as the obtained positions of the resonances with respect to equal temperament . a comparison with fig .",
    "[ fig : cylnoreg ] shows that the addition of the bore enlargement has already introduced a significant improvement .    .",
    "the enlargement has a length of 4.4 mm and a diameter of 25 mm , put immediately after the mouthpiece .",
    "one notices one unusually long first hole ( about 50 mm ) , which seems a rather impractical value for a hole intended to emit sound .",
    ", width=415 ]      the use of a separate register hole removes one important acoustic compromise concerning its size .",
    "but it is well known that a compromise is still necessary concerning its position , since a register hole should be ideally placed at a pressure node of each note , which is of course impossible to obtain simultaneously for all of them .",
    "the role of the optimization is precisely to find this compromise .",
    "we note , nevertheless , that it does not take into account the height of the resonance peaks ; the position of the register hole is only determined by the positions of the second resonances ( and , of course , by constraints as well ) .",
    "[ fig : cylreg ] shows the results .",
    "compared to configuration ( a ) with a dual register hole , a more even tone hole progression is achieved , while at the same time the frequency differences are reduced . the position of the register hole is roughly at one third of the position to the tone holes of the bottom notes , making it optimal for the first notes of the second register .",
    "its diameter reaches the minimum radius 1.00 mm allowed by the constraint . the constraint concerning hole no .",
    "2 ( the first tone hole ) also determines its radius of 2.00 mm ; all the other holes have a size that remains between the bounds .",
    "the constraint of 2.50 mm for the length of the chimneys is active for some of the holes , but the variation for the rest of the holes is rather smooth .    . here",
    ", the length of the register hole , about 15 mm , is comparable to that of real clarinets.,width=415 ]      adding a bore enlargement to the design with a separate register hole improves intonation further . as in design ( b )",
    ", we put an upper limit of @xmath78 mm on the maximum bore diameter , and the enlargement is put directly after the mouthpiece .",
    "optimization reached this maximum and provided a length of 1.9 mm .",
    "[ fig : enlargreg ] shows the results .",
    "the fundamental register is now in tune within 0.5 cents rms ; only the highest note is out of tune by more than 5 cents , which is still a very small shift .",
    ".,width=415 ]      finally , we studied a 5th case , clarinet ( e ) . among candidates ( a)-(d ) ,",
    "clarinet ( c ) seems to provide the best compromise in terms of intonation and geometrical regularity ; we then decided to extend the study of this design by exploring the possibility of tuning resonances of all notes of the second register  including the highest notes , which are normally played with the third register of standard instruments . in this case , two registers cover three full octaves @xmath79@xmath80 , where the second resonance is used throughout the second register ( @xmath81 ) .",
    "since the frequencies of the highest notes are approaching the resonance of the reed ( around 2 khz ) , it is likely that the assumption of blown notes having frequencies equal to impedance resonances is less accurate in the highest part of the second register @xcite .",
    "nevertheless , it is known that real clarinets provide a rather large pitch flexibility in the high register ; small errors in this range should not be too problematic .",
    "the position of the register hole was subject to a constraint of a maximal distance of 100 mm from the mouthpiece end , chosen to render the hole effective also in the upper part of the second register . for this design , a bore diameter @xmath82 14.27 mm was chosen ( instead of 14.75 mm for the other designs ) to better correspond to the experiments described in the next section .",
    "[ fig : expclar1geom ] shows the results for this design , with a long register hole , and fig .",
    "[ fig : expclar1wf ] shows the computed impedance spectra associated with it .    .",
    "the register hole in this case turns out to be rather long , namely 56 mm.,width=377 ]     defined in   [ visco - thermal ] .",
    "the impedance peaks are similar to those of a real clarinet but , for the second register , the second peak remains smaller than the first one , because of the long register hole.,width=377 ]    for this design , we have also studied the acoustical regularity of the lattice of tone holes @xcite .",
    "local cutoff frequencies of @xmath83-shaped sections can be considered as a criterion of acoustical regularity : if these frequencies remain constant over the various holes , the instrument should behave as a periodic lattice with the corresponding cutoff frequency , and should therefore provide a better homogeneity of sound production .",
    "the computed local cutoff frequencies of the @xmath83-shaped sections for 18 tone holes are shown by the stars in fig .",
    "[ fig : cutoff ] .",
    "the relative variations of the cutoff frequency are about 10% , while standard clarinets have a variation of the order of 40% .",
    "therefore the computed clarinet has a satisfactory acoustical regularity of its acoustical lattice . as for a real clarinet ,",
    "the mean value of the local cutoff frequencies lies around @xmath84 hz .",
    "this is significantly higher than the global cutoff frequencies measured from the input impedance curve for the notes of the first register , which is around @xmath85 hz as shown in fig .",
    "[ fig : cutoff ] .",
    "this discrepancy illustrates the difficulty of defining and measuring global cutoff frequencies for a regular lattice",
    ".     corresponds to the cutoff frequency of the set of two holes ( @xmath86 , @xmath87 .",
    "the star located at @xmath88 is calculated for the hole 18 and the first vent-hole.the circles and crosses represent the global cutoff frequencies obtained in   [ sec : prototype ] from the measurement of the input impedance , for the notes of the first register from d3 to g#4 .",
    "circles correspond to well defined values , crosses to more uncertain values.,width=377 ]      we first compare designs ( a ) to ( d ) , since design ( e ) was optimized with a different cost function .",
    "there is a strong degree of correlation between the hole radii for all four instruments .",
    "the dip in the radius progression between holes 10 and 14 is a common feature , as is the tendency for the holes to become progressively larger when their distance with the mouthpiece increases .",
    "there is , however , a significant difference in radius regularity between the instruments .",
    "the designs ( a ) and ( c ) without the tuning enlargement are more regular than ( b ) and ( d ) , especially ( b ) .",
    "similar observations can be made regarding the lengths of the chimneys , but one notices that the constraint on these lengths is effective for several of the holes for ( a ) and ( c ) , but not so for ( b ) and ( d ) .",
    "the situation concerning the positions of tone holes is slightly different .",
    "[ fig : hole_dist ] shows the distances between adjacent tone holes of the four designs . here , ( a ) and ( b ) are similar , as are ( c ) and ( d ) : the designs with a separate register hole are more regular than the ones with a dual register hole , but",
    "the introduction of a tuning enlargement does not seem to have any adverse effect on the regularity of hole positions .",
    "design ( b ) and ( c ) are roughly comparable in terms of intonation , but the latter has a much smoother tone hole pattern .",
    "the conclusion is that , if the bore enlargement improves the tuning of an otherwise cylindrical instrument , the price to pay is a less regular tone hole pattern .",
    "the long register hole of ( b ) and ( e ) are significantly different from those of a regular clarinet . at low sound levels , with a linear behavior , the main effect of a register hole is reactive ( the ratio of the boundary layer thickness to the radius remains small ) . therefore the main parameter is the shunt acoustic mass , proportional to the ratio length / cross - section area . in order to have a small perturbation ,",
    "it is necessary to have a large acoustic mass , therefore either a long chimney or a small radius . for practical reasons ,",
    "a very small radius is not suitable , so that a long chimney is required .",
    "this seems to be what is happening here , since the optimization leads to the minimum allowed value of the radius ( 1 mm ) .",
    "the obtained length of the height of the register hole is unusually large ; when the hole is open , a problem is the insufficient reduction of the heights of the first impedance peaks .",
    "concerning design ( e ) , we note that the results provide more regularity in the geometry of its holes than the others . in optimization , it is well - known that under - determined problems may easily lead to irregular solutions . indeed , in this case",
    ", it seems that putting more constraints on the optimization ( by including the position of the resonance of the upper notes of the second register ) leads to more satisfactory results .    to summarize , the best method to obtain intonation , as well as regularity , seems to be the introduction of a separate register hole . if a separate register hole is used , an enlargement is not necessary in order to achieve an instrument that is in tune within 8 cents for a 29 notes range .",
    "design ( c ) seems to be a good compromise , with most resonances falling very close to the target ( differences of less than 5 cents ) .",
    "in addition , this design is not very different from a standard clarinet , even if it is significantly more regular and requires no cross fingering . but",
    "this optimization does not correspond to a fundamental limit : if , for instance , more deviations from a cylindrical bore were permitted , it would probably become possible to adjust resonance frequencies even more accurately .",
    "it is interesting to study the evolution of the target function @xmath70 for the two successive optimization phases : optimization with a target function @xmath89 that takes into account only the 19 notes of the first register and optimization with a function @xmath90 that includes the notes of the two registers .",
    "[ fig : convcurve ] shows how @xmath90 evolves as a function of the number of iterations , for the designs ( a)(d ) .",
    "the initial point of the curves corresponds to the crude initial design of the instrument , which is accurate within 12 cents ( rms ) throughout the first register , but totally out of tune in the second register . a rapid decrease of function @xmath90",
    "is observed , which saturates to a plateau after a few steps . at the end of this process",
    ", a rms error of 6.5 cents is obtained for the first register , and of 43 cents for the second . when the optimization function is changed from @xmath89 to @xmath90 ,",
    "a new rapid decrease of the target function takes place ; this is not surprising since the function shown in the figure now corresponds exactly to the target function used in the optimization . finally , the values of the errors obtained in figs .",
    "[ fig : cylnoreg][fig : enlargreg ] are obtained .",
    "little success was achieved omitting phase 1 . in the rare cases the process converges at all ,",
    "convergence is slow with an erratic evolution of the target function .    in order to escape possible local minima ,",
    "we have also used stochastic optimization procedures by adding random perturbations to the previous optimized designs , and using them to run the deterministic optimization procedure .",
    "we did not obtain significant improvement of the results in this way .",
    "further studies are probably needed to better understand the optimization properties of the target functions associated with tone hole patterns .",
    "associated with the resonance frequencies of the notes or two registers , as a function of the number or iterations .",
    "the first point corresponds to a non - optimized design used as a seed for the iteration . during phase 1 ,",
    "the cost function used was @xmath89 , which takes into account only the resonance frequencies of the first register . in phase 2 , the cost function was changed to @xmath90 .",
    "the whole process provides a reduction of the target function by a factor ranging from 100 to 1000.,width=415 ]",
    "we chose to build configuration ( e ) obtained in the previous section , since it offers more regularity in its design . in order to keep the fabrication process as simple as possible",
    ", stock polyurethane tubes were used , and no attempt was made to build keys .",
    "these tubes come in a limited set of dimensions , of which the one that is closest to a real clarinet has a nominal inner diameter of 14.25 mm .",
    "this corresponds to the diameter chosen in the optimization of design ( e ) .",
    "the tube did not show a perfectly circular cross section , but had a diameter varying between 14.10 mm and 14.45 mm , a non - negligible variation .",
    "@xcite shows that the corresponding length correction is bounded by the following equation ( eq .",
    "31 of that reference):@xmath91 where @xmath92 and @xmath93 is the length of the enlargement .",
    "the tube was modeled as a cylinder with the same cross section area , which corresponds to a diameter of 14.27 mm .",
    "the chimney lengths were adjusted by creating a flat external surface at the position of each tone hole , which is drilled perpendicularly to the main axis of the tube .",
    "the edges of the holes are kept sharp , a feature that may potentially introduce nonlinear flow effects at high playing levels .",
    "[ fig : plasticprototype ] shows the prototype . in appendix ,",
    "a workshop drawing of the instrument is presented .",
    "the prototype was blown with an artificial mouth ( see fig . [",
    "fig : prototype ] ) , with a standard mouthpiece and a plasticover  reed .",
    "a preliminary calibration of this device was necessary to measure the equivalent volume of the mouthpiece / reed ensemble .",
    "this volume is used to calculate the length of upstream cylindrical tube that was removed from the results of optimization in order to build the prototype .",
    "the measurement was made experimentally by fitting the mouthpiece to a cylindrical piece of tubing terminated by an orifice in a large baffle , and deriving a length correction from the measured oscillation frequency . to check consistency ,",
    "the experiment was repeated with different tube lengths and blowing pressures .",
    "the blowing pressure was varied from the oscillation threshold to the saturation limit at which the reed closes against the mouthpiece and blocks the oscillation .",
    "[ fig : equivol ] shows the results , ranging from 12.2 to 13.2 @xmath94 , to be compared to the geometrical volume of the mouthpiece ( 11.4 @xmath95 0.3 @xmath94 ) .",
    "since the variation of the equivalent volume are larger with low blowing pressures , in order to minimize nonlinear effects , a working pressure of 4 kpa ( about 40 cm of water ) was chosen , with @xmath96 @xmath94 .",
    "this volume corresponds to a tube length correction of about 73 mm .",
    "the prototype was then studied .",
    "the tone holes were successively closed with tape on which rigid plastic pads were placed , in order to replace the pads and keys .",
    "figure [ fig : intonation40 ] shows the results obtained with a blowing pressure of 4.0 kpa , and three series of measurements . from one series to the next , the instrument is removed from the artificial mouth .",
    "care was taken to try and obtain as much reproducibility as possible , but it is clear that this reproducibility was not perfect , which probably explains the dispersion of the results .",
    "for the first series , the average of sound frequencies is 12 cents too low , with a mean square deviation of 4 ; for the second , the average is 14 cents too low , with a mean square deviation of 2.7 ; for the third , the average is 13 cents too low , with a mean square deviation of 2.9 . fig . [",
    "fig : intonation55 ] shows similar results with a blowing pressure of 5.5 kpa .",
    "the first series of measurements give an average 11 cents too low , with a mean square deviation of 3.6 , the second , an average also 11 cents too low with a mean square deviation of 2.8 .",
    "as can be seen , there is a significant dispersion of the results .",
    "the reason for this dispersion is that , from one run of the experiment to the next , adjustments of the experimental parameters turned out to be necessary .",
    "the general offset of the pitch , approximately 10 cents flat , is easy to correct by adjusting the length of the instrument , as routinely done by instrumentalists .",
    "this offset being ignored , the remaining errors are less than 5 cents , which is better than what is usually obtained with real clarinets .",
    "piano ; @xmath97 mezzoforte ; o forte - color online , width=377 ]    for the second register , stable sounds were difficult to obtain with the artificial mouth . a musician was therefore asked to play the prototype . attacking each note",
    ", she played the notes of the two registers successively , but also observed that the second register was less stable than with an usual clarinet .",
    "for each register , she played the higher notes by closing the holes with the fingers , and the lower notes by closing the 8 upper holes with modeling clay . in a preliminary experiment ,",
    "the general intonation was too low ( roughly 30 cents , with a rather unsatisfactory balance between the two registers ) ; this is not so surprising since the mouthpiece used by the instrumentalist was not the same as that of the artificial mouth .",
    "the experiment was then slightly modified by reducing the volume of the mouthpiece by an equivalent length of 1 mm , using modelling clay ; the results are shown on fig .",
    "[ figalexis ] .",
    "intonation is slightly higher than that obtained with the artificial mouth , but the agreement remains rather satisfactory , as well as reproducibility .",
    "the pressure in the mouth was measured to be between 4 and 5 kpa , as for the artificial mouth . between the two registers , a discontinuity of 20 cents can be observed .",
    "this can be due to the playing technique of the instrumentalist .",
    "it seems likely that between the two registers , she probably changed the excitation parameters , such as the reed opening and the mouth pressure .",
    "moreover , no listening reference was given before she played the note ; the player just optimized easy playing .",
    "usually , measurements of the intonation of a clarinet is made in less severe conditions , where the musician plays all notes in succession so that he can keep a reference in mind and automatically apply pitch corrections . generally speaking , it turned out that all notes could be played without any special training , which is rather satisfactory .    comparisons between calculated ( fig .",
    "[ fig : expclar1wf ] ) and measured ( fig .",
    "[ fig : measimpcascade ] ) impedances on the prototype for the 36 semi - tones show an average deviation on the resonance frequencies of 1.97 cents while the standard deviation is 11.3 cents .",
    "it is worth noticing that the last notes of the second register contributes to this result . in disagreement with the assumption that tone hole interaction is small",
    ", the spacing between some of the tone holes is slightly smaller than the bore diameter .",
    "this may account for some of the deviation between the model and the behavior of the prototype .",
    "computer optimization of the geometry of a clarinet seems to offer interesting possibilities , even if it should be remembered that the numerical results do not necessarily correspond to an absolute optimum for the chosen criterion : they may be only local optima .",
    "the regularity of the obtained geometries seems to indicate that , indeed , the design of real instruments is more the result of a complicated history than that of pure logics . for the moment ,",
    "our study remains limited in terms of the number of acoustical properties taken into account in the optimization function , since only the positions of the acoustical resonances have been included .",
    "it would be interesting to also include the corresponding value of the impedance peaks , which might lead to significantly different optimization results .",
    "even if the results seem to be satisfactory in terms of the peak values of the acoustic impedance , the relative heights of the peaks is important ; for instance , the differential reduction of the heights of the first and second resonance determines the stability of emission for the second register .    generally speaking , there should be no special difficulty in including more components in the optimization function , but our purpose in the present work was to explore the new possibilities offered by optimization within the simplest possible scheme ; experience will show in what direction the optimization process should be improved .",
    "moreover , it remains very likely that even a very elaborate mathematical optimization model will probably never capture all the real musical possibilities of instruments . at some point",
    ", it will be indispensable to build playable instruments with keys and collect the evaluation of performing clarinetists ; mathematical optimization can nevertheless be very useful as a preselection tool between the enormous number of geometrical possibilities , even if its use should be followed by a final adjustment with real musical testing by performers .",
    "we hope to be able to continue our program in this direction .",
    "we wish to thank alain busso , didier ferrand for their work on the experimental instrument and the artificial mouth , and camille - eva rakovec for playing the prototype .",
    "this work has been supported by the french anr research project consonnes , and more recently by the anr project cagima .",
    "10                            j - p .",
    "dalmont , c.  j. nederveen , v.  dubos , s.  ollivier , v.  meserette , and e.  te  sligte . experimental determination of the equivalent circuit of a side hole : linear and non linear behaviour .",
    ", 88:567575 , 2002 ."
  ],
  "abstract_text": [
    "<S> the tone hole geometry of a clarinet is optimized numerically . </S>",
    "<S> the instrument is modeled as a network of one dimensional transmission line elements . for each ( non - fork ) fingering , we first calculate the resonance frequencies of the input impedance peaks , and compare them with the frequencies of a mathematically even chromatic scale ( equal temperament ) . </S>",
    "<S> a least square algorithm is then used to minimize the differences and to derive the geometry of the instrument . </S>",
    "<S> various situations are studied , with and without dedicated register hole and/or enlargement of the bore . with a dedicated register hole </S>",
    "<S> , the differences can remain less than 10 musical cents throughout the whole usual range of a clarinet . </S>",
    "<S> the positions , diameters and lengths of the chimneys vary regularly over the whole length of the instrument , in contrast with usual clarinets . </S>",
    "<S> nevertheless , we recover one usual feature of instruments , namely that gradually larger tone holes occur when the distance to the reed increases . </S>",
    "<S> a fully chromatic prototype instrument has been built to check these calculations , and tested experimentally with an artificial blowing machine , providing good agreement with the numerical predictions .    </S>",
    "<S> keywords : clarinet , woodwind , harmonicity , tone hole , optimization pacs 43.75.pq ; 43.20.mv </S>"
  ]
}