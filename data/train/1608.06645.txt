{
  "article_text": [
    "the capture , digitization , and postprocessing of waveforms from photosensors is among the most common measurements performed in nuclear and high - energy physics .",
    "traditionally such measurements require a significant investment in space and equipment , with researchers custom designing test benches out of components found in the laboratory : benchtop or rack - mounted power supplies , amplifiers , digitizers , readout hardware and software , etc .",
    "while this kind of equipment is accessible to scientists and engineers in most professional settings , its cost ( and the expertise needed to run it ) is often beyond the capabilities of students and educators .",
    "however , the continuing drop in the cost of computers and electronics now makes it possible to design powerful and compact data acquisition systems using commercial off - the - shelf components . in this paper",
    "we describe such a system , called the femtodaq @xcite .",
    "the femtodaq is a two - channel data acquisition computer with signal processing capabilities .",
    "it is designed to power and read out silicon photomultipliers ( sipms ) but can interface with traditional photomultipliers ( pmts ) and be used in a wide variety of experiments . its compact size makes it easy to transport and well - suited for remote applications .",
    "in addition , a simple python - based programming layer makes the unit easy to use in the classroom , but it is powerful enough to act as a drop - in replacement for a full - fledged laboratory test bench .",
    "we are currently using the femtodaq to characterize silicon photomultipliers ( sipms ) for the high - altitude water cherenkov ( hawc ) observatory , a us - mexican facility built to observe astrophysical gamma rays @xcite .",
    "this paper is organized as follows . in section  [ sec : femtodaq ] we describe the components of the femtodaq , the basics of its operation , and a simple example of its capabilities . in section  [ sec : hawc ]",
    "we describe the hawc detector and a study of sipms for use in hawc .",
    "we summarize the status of our current work and discuss future directions and applications in section  [ sec : conclusion ] .",
    "the femtodaq , shown in fig .",
    "[ fig : box ] , is a commercial single - board beaglebone black computer @xcite with two custom - designed mezzanine boards .",
    "the first mezzanine board is specifically designed to interface with silicon photomultipliers .",
    "sipms are being rapidly adopted in fields such as medical imaging , astronomy , and high - energy physics due to their low cost , low power and voltage requirements , high gain , and relative durability compared to pmts .",
    "the power board in the femtodaq provides 10  v to 90  v dc bias voltage to the front - end electronics required to operate two sipms .",
    "this range makes the board compatible with commercially available sipms from manufacturers such as hamamatsu @xcite and sensl @xcite .",
    "a ribbon cable connector is available for interfacing with external devices over spi and i2c busses .",
    "the busses enable reading of remote temperature sensors to compensate the sipm bias for temperature fluctuations and maintain a constant gain .",
    "the second mezzanine board digitizes two analog inputs with 14-bit adcs digitizing at 100 msps .",
    "an antialiasing bessel filter is applied to the waveforms to suppress high - frequency noise and stretch very fast signals .",
    "an onboard field programmable gate array ( fpga ) then performs pulse detection and extracts pulse characteristics using digital signal processing .",
    "the input section has a @xmath0  v range with selectable input impedance : 50  @xmath1 , 1  k@xmath1 , and 100  k@xmath1 .",
    "four logic input / output signals ( 3.3  v cmos ) are provided for external triggering or external veto .    while the femtodaq power / bias board has been designed with the testing of sipms in mind , the input board is agnostic to the type of input sensor .",
    "the only limitations are the input impedance levels and signal range .",
    "hence , it can be used to test sipms and similar detectors such as pin diodes and multi - pixel photon counters , as well as pmts ( with an appropriate external hv supply ) .",
    "the femtodaq has been extensively tested with both sipms and pmts .",
    "the flow and control of data in the femtodaq is shown in fig .",
    "[ fig : diagram ] .",
    "after digitization , a trigger condition is applied by the onboard fpga .",
    "the trigger thresholds are specified by the user and can be defined independently for the two input channels or as a coincidence trigger on both channels .",
    "one of the logic inputs also provides an optional external trigger .",
    "captured waveforms are stored in a circular buffer with a storage length of 81.92  @xmath2s per waveform per channel .",
    "users can read out individual triggered waveforms or instruct the fpga to compute a pulse height histogram for all triggers captured on each channel within a user - defined time period .",
    "histograms are stored with 12-bit resolution ( 4096 bins per channel ) . for histogramming _ in situ",
    "_ , the pulse height is analyzed by a rolling average with a selectable bin size .",
    "other dsp filters , such as baseline subtraction , differentiation , etc . are also implemented in the fpga .",
    "the femtodaq contains onboard flash storage with 4  gb capacity , shared with the linux os installed on the beaglebone black computer .",
    "the use of solid - state memory allows the device to be used in a variety of harsh environmental conditions , including very high altitudes .",
    "users interact with the femtodaq via the beaglebone , which is powered by a 1  ghz arm processor with floating point hardware and ships with debian linux running on board .",
    "the femtodaq can be run as a standalone computer ; an hdmi connector is provided for connections to a local monitor , and a mouse and keyboard can be connected via a usb type a connector .",
    "a microsd socket is available for storing acquired waveforms , histograms , and event files .",
    "in addition , the network interface provided with the beaglebone allows output to be written to nfs - mounted remote disks .",
    "alternatively , the femtodaq can be mounted as a peripheral device on a host computer using available ethernet or usb-2 connectors on the main board .",
    "free device drivers available from beaglebone are used to mount the femtodaq on hosts running windows , linux , and mac os x ; extensive tests have been performed using windows 8 and 10 , ubuntu 15.10 , and mac os 10.11 .",
    "the femtodaq presents the user with several programming interfaces which can be customized for different applications . at the lowest level",
    ", users can control hardware settings in the fpga and input channels using commands sent to the unit .",
    "these commands are used to adjust triggering and processing of waveforms such as trigger levels , baseline subtraction , boxcar averaging , coincidence conditions , etc .",
    "if the femtodaq is powering one or two sipms , the command interface can also be used to remotely adjust the bias voltage supplied by the power board .",
    "a python module is provided to parse terminal input from the user and pass commands to the onboard fpga .",
    "the module is open - source and can be customized or altered by the end user .",
    "this interface allows for a wide variety of scripting and automation : for example , automatic timed measurements with adjustments of bias voltage during the course of data taking .            while the femtodaq is relatively easy to control via the command line , an intuitive high - level graphical user interface ( gui ) based on the wxpython library",
    "is also provided .",
    "the gui , shown in fig .",
    "[ fig : gui ] , allows users to change the sipm bias , enable internal test pulses , adjust baseline correction and boxcar averaging , enable coincident triggers , and switch between waveform capture mode and pulse height histogram mode .",
    "online plotting capabilities are also provided so that users can immediately view waveforms and histograms ( fig .",
    "[ fig : gui_waveform ] ) .    for offline analysis , waveforms can be saved in one of several binary and text formats ",
    "e.g. , comma - separated variable tables of adc count versus clock  and analyzed on the beaglebone or saved to network disks or host computers .      to demonstrate the capabilities of the femtodaq we provide data from two simple studies : a nuclear / particle counting application in which a sipm is coupled to a lyso scintillator , and a timing test of two sipms read out simultaneously in both channels .    lyso is a high - density scintillator commonly used in pet due to its high efficiency for 511  kev photo - peak detection @xcite .",
    "it is also of interest for national security applications because of its high efficiency and good timing properties @xcite .",
    "a challenge is its internal radioactivity caused by traces of @xmath3lu .",
    "energy histograms from a 1  @xmath4 lyso scintillator are plotted in fig .",
    "[ fig : lyso ] .",
    "the scintillator was optically coupled to a single 6x6 mm series - c sipm manufactured by sensl @xcite , and the output from the sipm was amplified by a factor of @xmath5 using a custom - made carrier board .",
    "a @xmath6na @xmath7 source was placed on top of the crystal , and the resulting light signals observed by the sipms were used to self - trigger the femtodaq and produce a pulse height histogram .",
    "a `` free run '' pulse height histogram due to the intrinsic @xmath3lu activity was then subtracted from the measurement of the @xmath6na source with the same crystal .",
    "both histograms were produced using the _ in situ _ histogrammming capabilities of the firmware .",
    "the 511  kev peak observed in the scintillator was fit offline using a gaussian and determined to be 74.8  kev fwhm , or about 14.6% .",
    "this peak resolution is typical for lyso @xcite .",
    "na observed with 1  @xmath4 lyso ( top ) and with background removed ( bottom).,title=\"fig:\",height=163 ] na observed with 1  @xmath4 lyso ( top ) and with background removed ( bottom).,title=\"fig:\",height=163 ]      the second demonstration of the capabilities of the femtodaq is a measurement of the relative timing of two sipms observing a common light source .",
    "source ( top ) , showing improvement in the time difference as a function of pulse height ( bottom).,title=\"fig:\",height=163 ]   source ( top ) , showing improvement in the time difference as a function of pulse height ( bottom).,title=\"fig:\",height=163 ]    we measured the timing using digitized signals from two 6@xmath86  mm sipms coupled to a single piece of bc400 irradiated with @xmath9 particles from a thick natural @xmath10th source .",
    "the 10@xmath8 amplified signals were digitized with two femtodaq channels in self - triggered mode .",
    "a total of @xmath11 events were recorded , each consisting of two correlated waveforms from both sipms .",
    "the event file was processed offline .    in fig .  [",
    "fig : timing ] we show the time difference between sipm@xmath12 and sipm@xmath13 plotted versus the average pulse height @xmath14 .",
    "the lower part of the figure shows the rms projections of the 2-dimensional distribution as a function of average pulse height .",
    "the largest pulse height corresponds to @xmath9 particles of about 6  mev ( in air ) from @xmath15po decay in the source .",
    "we observed an improvement in the relative timing as a function of pulse height ; the highest amplitude events achieved 450 ps rms , which is 4.5% of the sampling clock .",
    "the largest pulses correspond to about 15% of the full 14-bit adc range of 16  384 adc counts .",
    "the hawc observatory is designed to observe the extensive air showers produced when astrophysical @xmath7 rays and cosmic rays interact in the atmosphere and produce a high - energy particle cascade .",
    "hawc is a collaboration of 30 academic institutions and national labs in the us , mexico , and europe .",
    "the detector is located 4100  m above sea level in sierra negra , mexico , and is optimized to detect @xmath7 rays and cosmic rays between 100  gev and 100  tev .",
    "the detector is a 20  000  m@xmath16 array of 300 close - packed water cherenkov detectors ( wcds ) .",
    "each wcd contains 200  kl of purified water . when relativistic charged particles from extensive air showers pass through the water they produce ultraviolet cherenkov light .",
    "three 8  hemispherical pmts and one 10 ",
    "pmt located at the bottom of each tank ( for a total of 1200 pmts in the full array ) are used to detect the cherenkov photons . by combining the timing information and spatial distribution of pmts triggered by an air shower ,",
    "the arrival direction , energy , and type of the primary particle can be identified . in this manner ,",
    "air showers produced by cosmic rays can be filtered out of the data during offline processing , and the remaining @xmath7 rays are used to produce sky maps of @xmath7-ray sources .      the construction of hawc was completed in december 2014 , and a high - energy upgrade to the detector is now underway . to increase the sensitivity of the observatory above 10  tev , the collaboration will deploy 350 `` outrigger '' tanks in a sparse array surrounding the 300 wcds already at the site @xcite .",
    "the purpose of the outriggers is to help localize high - energy air showers that impact just outside the central array",
    ". currently these air showers are poorly reconstructed and must be removed from the analysis of cosmic - ray and @xmath7-ray events . however , with the outrigger tanks in place , the `` uncontained '' showers currently lost to quality cuts can be recovered .",
    "an example of such an event is shown in fig .",
    "[ fig : hawc_or ] .",
    "the design of the outrigger stations and readout electronics is in progress and deployment of the outrigger stations will begin in late 2016 .",
    "the outrigger upgrade is expected to increase the effective area of hawc by a factor of four above @xmath5  tev .    -ray triggering the hawc detector .",
    "the observatory is viewed from above , with large black circles showing the central 300 wcds already deployed , and the small black circles indicating the positions of the 350 outrigger stations currently under development .",
    "colored markers indicate pmts triggered by the event .",
    "pmt timing is indicated by the color scale , and the marker size is proportional to the charge observed in each pmt.,width=336 ]      the baseline design of an outrigger station calls for the use of an 8  hamamatsu r5912 hemispherical pmt , but the upgrade presents an excellent opportunity to field - test new photosensor technologies such as sipms .",
    "sipms have many advantages over pmts as described in section  [ sec : femtodaq ] , and are the focus of considerable manufacturer r&d .",
    "the technology is experiencing significant year - over - year improvements in quality and performance , and is an excellent candidate to replace pmts in water cherenkov experiments in the near future .",
    "we have used the femtodaq in the laboratory to characterize the basic properties of sipms that are important for a photon counting experiment such as hawc  for example , single photoelectron ( pe ) response , dark count rate , gain , etc . for this study",
    "we have focused on the sensl c - series 60035 - 4p - evb , a @xmath17 array of 3  mm silicon photosensors .",
    "the photon detection efficiency of the sensor peaks at 40% between 400 and 450  nm , and its gain ranges from @xmath18 to @xmath19 as the overvoltage is increased from 1  v to 5  v.        our setup for testing the photon - counting response of the sipm array is shown in fig .",
    "[ fig : setup ] .",
    "the array is seated on a custom carrier board which provides @xmath20 amplification .",
    "the board acts as a front end to the femtodaq , which provides a bias voltage via its internal power board .",
    "the sipm has been placed inside a dark box with a 5  mm uv ( 400  nm ) led . a quantum composer",
    "9520 pulse generator is used to pulse the led with extremely narrow ( @xmath21  ns ) square pulses , so that on average only a few photons are emitted per pulse .",
    "the generator output is split between the led and channel 1 of the femtodaq , with the output from the sipm sent to channel 2 .    to observe the single pe response of the sipm",
    ", the femtodaq has been set up to trigger on coincident input from the split pulser signal ( channel 1 ) and the sipm ( channel 2 ) . by gating the sipm output in this manner we can effectively eliminate dark counts from the triggered output .",
    "( note that in the current generation of sipms , the dark count rate can be considerable depending on the overvoltage and temperature of the sensor . at 20  c ,",
    "the dark count rate from the c - series array is typically of order 1  mhz . )",
    "the sipm output has a very long rc tail ( @xmath22s ) because each cell in the device is connected in series to a quenching resistor @xcite .",
    "the tail can cause a pile - up effect when the photon rate ( or dark count rate ) is too high , so we have chosen to remove it by numerically differentiating the digitized output from channel 2 of the femtodaq .",
    "this is roughly analogous to shaping the signal with a cr - rc circuit in a nim crate .",
    "after differentiation , the sipm waveform is transformed from a set of rising edges with exponential tails to a set of well - isolated peaks .",
    "the peaks have a small undershoot which we compensate with offline processing ( though this could also be done internally by the fpga ) .",
    "the pulse height histogram of the processed waveform is plotted in fig .",
    "[ fig : pe_data ] . individual gaussian peaks from single and multiple pe events",
    "are clearly visible , while the dark counts are strongly suppressed by the coincidence trigger . from the pulse height histogram , we can easily set up calculations of the dark count rate and relative gain as a function of bias voltage .",
    "the femtodaq is a compact two - channel digitizer and signal processing unit designed to read out a wide variety of commercial photosensors . though it is built atop the beaglebone black single - board computer , which is designed for hobbyists , it is powerful enough to be employed in a laboratory setting . in addition , its network capability and python - based user interface allow for many kinds of automated and/or remote measurements .",
    "we are currently using it to characterize the performance of sipms for the outrigger upgrade of the hawc observatory .",
    "the femtodaq is also simple and robust enough for classroom use , and can be operated easily by undergraduates and high school students .",
    "educators with a passing knowledge of python can use the femtodaq to design and carry out a large number of classic university - level nuclear and particle physics experiments , two of which were demonstrated in this paper .",
    "the compactness of the device also suggests many interesting outreach activities , and we are working with local educators to design outreach programs .",
    "ws acknowledges support in this work by the department of energy office of science , office of nuclear physics under grant numbers de - sc0009543 and de - sc0013144 .",
    "sb is supported by the office of high energy physics under grant number de - sc0008475 .",
    "we are indebted to mr .",
    "david hunter for implementing the graphical user interface ."
  ],
  "abstract_text": [
    "<S> the femtodaq is a low - cost two channel data acquisition system which we have used to investigate the signal characteristics of silicon photomultipliers ( sipms ) coupled to fast scintilators . </S>",
    "<S> the femtodaq system can also be used to instrument low cost moderate performance passive detectors , and is suitable for use in harsh environments ( e.g. , high altitude ) . </S>",
    "<S> the femtodaq is being used as a sipm test bench for the high altitude water cherenkov ( hawc ) observatory , a tev gamma ray detector located 4100 m above sea level . </S>",
    "<S> planned upgrades to the hawc array can benefit greatly from sipms , a robust , low - voltage , low - cost alternative to traditional vacuum photomultipliers . </S>",
    "<S> the femtodaq is used to power the sipm detector front end , bias the sipm , and digitize the photosensor output in a single compact unit . </S>"
  ]
}