{
  "article_text": [
    "the aim of this work is to build a unified framework for the analysis of a broad class of stochastic processes from the combinatorics , computer science and physics perspectives .",
    "the processes we consider are based on _ graph rewriting _ , a model of computation that allows to frugally express complex behaviors by specifying local transformations of graphical structures by the use of _",
    "rules_. we put forward a philosophy that transition systems should be described algebraically and that in particular graph rewriting systems have an underlying combinatorial algebra that we call the _ rule algebra_. + graph rewriting is turing - complete , hence sufficiently expressive to encode any other model of computation .",
    "it is applied with considerable success in modeling of biological systems ( especially protein interaction networks , see  @xcite ) .",
    "in fact , many models in statistical physics , theoretical chemistry and combinatorics can be seen as particular cases of graph rewriting systems .",
    "most notably , the _ heisenberg - weyl algebra _ , the combinatorial algebra underlying chemical reaction systems and the theory of the harmonic oscillator , is a particularly simple case of a graph rewriting algebra .",
    "+ in this paper , the focus is on the construction of the combinatorial hopf algebra that allows to construct the actual rule algebras .",
    "representation theoretic aspects and the stochastic mechanics framework are described in @xcite . for the benefit of the interdisciplinary audience , in the remainder of this section we will provide a brief overview of the various connections to previous existing work at the end of this section .",
    "our new formulation relies on expressing graph rewriting rules as so - called _ irreducible rule diagrams _ , and their compositions in terms of a diagrammatic form of compositions of rule diagrams , followed by an operation we call reduction .",
    "notably , while the diagram algebraic construction will be universal , it is only via the definitions of so - called reduction morphisms that we will be able to define the _ algebras of graph rewriting _ ,",
    "i.e.  the _ rule algebras_. two of the conceivable variants of reduction result in the two main variants of graph rewriting , namely _ ouble ushut _ ( @xmath0 )  @xcite and _ ingle ushut _ ( @xmath1 )  @xcite rewriting .",
    "however , as we will present in detail , there exist two further natural variants of reduction , resulting in two entirely _ new forms of graph rewriting_. additional benefits of the novel framework include a clear separation between the _ algebras _ of graph rewriting ( hitherto only considered indirectly in as far as individual contributions to sequential compositions of two rules were concerned ) and their _ representations _ , which implement the action of rewriting rules on graphs . via this clear distinction , we gain a substantial advantage over the traditional framework ( in addition perhaps to a more intuitive formulation ) : we may for the first time in this line of research directly study the structure and combinatorics of graph rewriting algebras ! + our main hypothesis for the construction of the general rule algebras has been that the heisenberg - weyl algebra should form a special case of generic graph rewriting . since in all four types of rewriting",
    "the rewriting of discrete graphs takes the same form , we took the additional hypothesis as a constructive guideline that also the general diagrammatic construction must be fitted into a _",
    "combinatorial hopf algebra _ framework . remarkably , as presented in section  [ sec : rdhopf ] , these two hypotheses together with a natural ansatz for the `` irreducible '' rule diagrams ( in the form of the graphs of linear rules ) were sufficient to derive a consistent construction of the so - called _ rule diagram algebra_. + the most complicated aspect in the derivation of the rule algebra framework proved to be the question of how the previously known two main variants of graph rewriting , @xmath0  @xcite and @xmath1 rewriting  @xcite , could be implemented .",
    "a first clue towards a mathematical ansatz was yet again provided by blasiak et al.s construction of the hw algebra as a reduction of the hw diagram algebra  @xcite : employing our novel definition of diagrams representing hw algebra elements and their compositions , it became evident that this reduction consists in assigning to a given composite diagram its normal form . for general graph rewriting and the corresponding rule diagrams that include rewriting of graphs with edges however , a naive ansatz for such a reduction to normal forms proved to be problematic : experts in the field of graph rewriting might be familiar with the idea of `` dangling edges '' , an artifact that can arise when trying to compose rewriting rules inconsistently .",
    "our second main result of this paper consists thus in the aforementioned observation that one may define _ four different natural strategies _ to define reductions of rule diagrams !",
    "it is only in the definitions of these four variants of reduction morphism that we obtain four different rule algebras , two of which reproduce the traditional @xmath0 and @xmath1 rewriting frameworks",
    ". + the second part of this paper is devoted to the study of the structure of the algebras of rule diagrams and that of the rule algebras . in section  [ sec : lieunalg ] , we study the universal enveloping and lie algebraic structures of the rule diagram algebra , and demonstrate that our presentation of the algebra in terms of rule diagrams and compositions thereof is naturally isomorphic to the respective universal enveloping algebra , an important consistency check for our hypothesis of combinatorial hopf algebra construction . in section  [ sec : hw ] , we demonstrate how the results of blasiak et al .",
    "@xcite on the hw and hw diagram algebras are compatible with our more general framework , and how the traditionally known combinatorial formulae in this context follow efficiently .",
    "+ our third main result then consists in the structure theory of the rule algebras as presented in section  [ sec : structuretheory ] .",
    "there are three natural `` generator '' subalgebras definable for all four types of rule algebras ( independently on the type of the rule algebra ) that may serve as an ansatz for the generators of the rule algebras .",
    "the vertex - only subalgebra not only subsumes the well - known hw algebra , but is in fact a realization of the so - called boson algebra .",
    "we find remarkably simple commutation relations for the three `` generator'' subalgebras ( aka the vertex , the loop and the edge subalgebras ) , yet find that apart from the vertex algebra the other subalgebras do not admit a simple presentation as monoid algebras over words in the generators modulo the commutation relations .",
    "this failure precisely signals the necessity of _ new approaches to combinatorics _ for the analysis of graph rewriting systems , and some first ideas towards such concepts are presented . in the second part of section  [ sec : structuretheory ] , we will then discuss a second type of subalgebras that is particularly interesting in view of applications , the so - called `` structural '' subalgebras .",
    "the most remarkable such subalgebras is a subalgebra that may be seen as a _ direct generalization of the hw algebra _ , but we also find the subalgebras of graph observables in a number of variants . + our new framework closes one very important gap in the literature : how are the theoretical computer science , the mathematical combinatorics , the chemical reaction systems and the statistical physics descriptions of probabilisitic systems with the markov property related ? while we leave it to  @xcite and future work for the practical answers to these questions , it is the core framework presented in this paper that makes an entirely novel way of approaching these research questions possible .",
    "we took great care in the present paper to make the material accessible to a broader audience , and made an attempt to render it self - contained ( including an extended appendix a on background material for combinatorial hopf algebras ) .",
    "+ the reader mostly interested in the core results of the framework might wish to focus on sections  [ sec : rdpart ] , [ sec : hw ] and  [ sec : structuretheory ] , yet we would hope that in particular the mathematical combinatorists might take interest also in the mathematical details of the framework as presented in sections  [ sec : rdhopf ] and  [ sec : structuretheory ] .      [ [ combinatorics ] ] combinatorics + + + + + + + + + + + + +    consider the following very simple graph rewriting system , consisting of the rule for creating a vertex ( @xmath2 ) and the one for deleting a vertex ( @xmath3 ) .",
    "this heuristic description is quite reminiscent of the interpretation of the generators of the heisenberg - weyl algebra as creation and annihilation of indistinguishable particles .",
    "( each of which in physical terms presents a pure state of exactly @xmath4 indistinguishable particles ) , and defines the representation via the two equations @xmath5where @xmath6 and @xmath7 are the representations of the creation and of the annihilation operator , respectively . ]",
    "the deeper combinatorial meaning of this algebra was clarified by blasiak , duchamp , solomon , horzela and penson in their seminal work on the combinatorial hopf algebra construction of the heisenberg - weyl algebra  @xcite . at the core of their framework",
    "is a diagrammatic description of the generators as well as a form of diagram composition operation . in our new interpretation ,",
    "this diagrammatic composition is seen as a combinatorial description of the possible sequential applications of the respective graph rewriting steps .",
    "+ as we present in this paper , this construction can be extended to the more general combinatorial hopf algebra of generic graph rewriting rules , which we call the rule diagram algebra .",
    "this opens a new perspective for the study of graph rewriting systems by techniques well established in the combinatorics literature , such as formal power series , generating functions and related concepts ( see e.g.  @xcite ) .",
    "[ [ computer - science ] ] computer science + + + + + + + + + + + + + + + +    _ traces are to be taken seriously _  this is the slogan of concurrency theory , the subfield of computer science concerned with endowing models of computation with adequate notions of trajectories ( called _ traces _ in that literature ) that capture particular behavioural properties such as causal relationships and conflicts .",
    "arguably , the most successful approaches provide models which are diagrammatic in essence : confer the work on concurrent game models for petri nets ( aka chemical reaction systems ) @xcite or for the pi calculus  @xcite .",
    "+ this work is an initial step towards a theory relating these processes and their diagrammatic trace models to realizations of such processes as elements of the relevant algebras  especially generalizations of the heisenberg - weyl algebra .",
    "we give a new perspective on both matters through the definition of _ rule diagrams _ , a notion of behavioral traces that collectively form a hopf algebra .",
    "we foresee a great potential for future cross - fertilization , starting with the study of _ trace compression _",
    "@xcite in relation with our notion of diagram reduction .",
    "conversely , the foundational work on diagrammatic models evoked above will provide inspiration for the definition the diagram algebras of more structured processes such as the pi calculus .",
    "[ [ statistical - physics - and - theoretical - chemistry ] ] statistical physics and theoretical chemistry + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    doi s work on the second quantization of the description of chemical reaction systems  @xcite relies on the implementation of chemical reactions as representations of elements of the heisenberg - weyl algebra acting on probability distributions over the species count state space .",
    "moreover , the use of diagrams reminiscent of feynman diagrams by baez and biamonte  @xcite to interpret chemical reactions is also reminiscent of the rule diagrams used in this paper .",
    "quite remarkably , at the intersection of techniques from combinatorics and statistical physics , it is possible to derive closed - form solutions for the time evolution of species count probability distributions for certain types of chemical reaction systems  @xcite , which elicits the hope that similarly powerful results may be obtainable via the analogues of these techniques for stochastic graph rewriting systems .",
    "+ more abstractly , the physical concept of _ worldlines _ of particles is reflected to a certain extent in the syntax of the rule diagrams through causality constraints bearing on vertices and edges .",
    "a given rule diagram represents the `` time evolution '' of vertices and edges through the course of sequential applications of rewriting steps . in this way",
    ", one might indeed interpret rule diagrams as some form of analogues of feynman diagrams for modeling interactions in particle physics .",
    "the authors acknowledge support by the _ advanced erc grant rule/320823_. nb and ig would like to thank the antique team at the dpartement dinformatique of the ens paris for hospitality , where part of this work was carried out .",
    "th would like to acknowledge support by the _",
    "marie curie action ief people 628877 rubyx_.",
    "the aim of a _ diagram algebra _",
    "construction is to be able to enumerate all combinatorial possibilities of compositions of operations from a given associative algebra of interest , and to provide a _ reduction morphism _ that allows to interpret each possible diagrammatic composite as an element of said associative algebra , thereby not only reproducing the original associative algebra composition in a fashion amenable to combinatorial studies , but also providing deeper mathematical insights into the structure of the associative algebra .",
    "moreover , just as the heisenberg - weyl algebra possesses an essentially unique generic representation ( in the form of the bosonic fock space construction ) , more generally a diagram algebra approach may be employed to derive such an essentially unique representation also for a more general class of combinatorial algebras .",
    "the representation - theoretic aspect will be one of the main topics of the third paper in our current series  @xcite .",
    "+ in the present paper , we will introduce the construction of the diagram algebra for the associative algebra of graph transformation systems , which we call the _ rule diagram algebra_. from this rule diagram algebra , we obtain the four types of rule algebras , i.e.  the algebras of the four types of graph rewriting , via the operation of _ reduction _ ( to be defined shortly ) .",
    "we will refer to this realization from hereon as _",
    "diagrammatic realization of the rule algebra _ ( as opposed to a category - theoretical realization of the rule algebras that we plan to present in future work ) .",
    "notably , two of the four types of graph rewriting defined via this new framework had been hitherto unknown in the literature",
    ". moreover we will be able to extract important aspects of the combinatorics of graph rewriting from the rule diagram construction by demonstrating that it can be endowed with the structure of a _ combinatorial hopf algebra_. to the best of our knowledge , both the universal aspects of the construction of a diagram algebra as well as specific constructions of the rule diagram and rule algebras are novel and original results .",
    "+ our construction may be summarized as follows : we will first define a presentation of _ graph transformation rules _ in terms of so - called _ irreducible rule diagrams_. the crucial step then consists in lifting the _ set _ of isomorphism classes of such diagrams to the @xmath8-_vector space _ of isomorphism classes of irreducible rule diagrams , denoted @xmath9 ( where @xmath8 is a field such as @xmath10 or @xmath11 ) .",
    "next , the _ algebras of graph transformations _ aka _ rule algebras _ @xmath12 of the four different types @xmath13 ( @xmath14 ) are implemented via first embedding the irreducible rule diagrams into a space of generic rule diagrams @xmath15 via an _ insertion morphism _ @xmath16 , and defining a _",
    "diagrammatic composition operation _ on this space of generic rule diagrams @xmath15 , thereby endowing it with the structure of a @xmath8-algebra , @xmath17 .",
    "we will then provide _ reduction morphisms _ @xmath18 that are shown to be algebra homomorphisms , thereby defining a notion of composition operation @xmath19 on @xmath20 .",
    "the precise definition of the reduction morphisms is in the form of the composition of a number of auxiliary morphisms , as presented below : @xmath21 remarkably , the rule algebras derived from the two known main variants of graph rewriting , namely _ double pushout ( dpo ) _ and _ single pushout ( spo ) _ rewriting graph rewriting aka @xmath22 rewriting is in fact equivalent to the sesqui - pushout rewriting construction of  @xcite for the special case of injective matches and linear rules ( cf .",
    "proposition 13 ) .",
    "] , plus two hitherto more variants can be all encoded in _",
    "one _ universal construction , based on a single construction of a _ diagram algebra _ !",
    "in fact , as we will present in the following , the four variants differ only in the definitions of the respective `` fixing morphisms '' @xmath23 , and the existence of the two novel variants of graph rewriting was discovered in analyzing the definitions of @xmath23 for @xmath24 .",
    "+ let us begin by recalling some necessary definitions and concepts from the theory of relations , graph theory and from the theory of graph rewriting , thereby in particular also fixing notations and conventions for the rest of the paper .",
    "relations will play a key role in all of our constructions , whence let us briefly recall some notations and conventions from the standard literature ( cf .",
    "e.g.  @xcite ) :    a _ ( binary ) relation _ @xmath25 of two finite sets @xmath26 and @xmath27 is a subset of @xmath28 . we denote the _ set of relations _ between any two finite sets @xmath26 and @xmath27 by @xmath29 .",
    "some standard definitions for relations that we will use are the _ domain _ @xmath30 of a relation @xmath25 , @xmath31 and the _ image _ @xmath32 , @xmath33 the _ converse _ @xmath34 of a relation @xmath35 is defined as @xmath36 the _ complement _ @xmath37 of a relation @xmath35 is defined as @xmath38 interesting operations on relations include their _ union _ , _ intersection _ and _ inclusion _ , all inherited from the respective operations on the underlying sets of pairs .",
    "+ we denote the set of _ one - to - one relations _ between two finite sets @xmath26 and @xmath27 by @xmath39 , where a relation @xmath35 is called one - to - one if and only if @xmath40 as an important special case , we define the _ identity relation _ @xmath41 as @xmath42 which coincidentally constitutes an example of a function on @xmath26 .",
    "we will make extensive use of the notion of _ composition _ of relations :    let @xmath35 and @xmath43 be relations of finite sets .",
    "then we may define the _ composition _ of the two relations , denoted by seems to be more common . ]",
    "@xmath44 : @xmath45    the concepts and notations introduced thus far allow to express special properties rather succinctly ( @xcite , p.  300",
    "2.1.6 ) :    a relation @xmath35 is    * _ univalent _ iff @xmath46 , * _ total _ iff @xmath47 , * _ injective _ iff @xmath48 , * _ surjective _ iff @xmath49 , * a _ mapping _ iff it is univalent and total , * _ bijective _ iff it is injective and surjective .",
    "this identifies one - to - one relations as univalent injective relations .",
    "a useful corollary is the following :    the composition of two one - to - one relations @xmath50 and @xmath51 is a one - to - one relation , i.e.  @xmath52 .    by assumption and by the definition of one - to - one relations",
    ", we have that @xmath53 and moreover evidently @xmath54 the proof follows via a short computation : @xmath55    we will need the following special property of relations @xmath56 in the following :    a relation @xmath56 is called _ cyclic _ if and only if there exists a finite sequence of elements @xmath57 with @xmath58 such that @xmath59 for all @xmath60 and @xmath61 .",
    "otherwise , it is called _",
    "acyclic_.    as a final piece of elementary definitions ,",
    "let us introduce a useful notation from the theory of kleene algebras :    the _ kleene star _",
    "@xcite @xmath62 of the composition operation @xmath63 for a relation @xmath56 of a finite set @xmath26 is defined as is by definition a relation of a finite set @xmath26 , and whence a subset of the finite set @xmath64 , also @xmath65 will be a finite relation by construction ] @xmath66 more intuitively , the kleene star operation maps a relation @xmath56 to its reflexive transitive closure .      for the sake of concreteness and simplicity , we will mainly focus in this paper on _ directed multigraphs _ ( without colors ) , albeit we will briefly comment in section  [ sec : othergraphs ] on more generic graphs :    a _ finite directed multigraph _",
    "@xmath67 is given in terms of the following pieces of data :    * a ( finite ) _ set of vertices _",
    "@xmath68 ; * a ( finite ) _ set of edges _ @xmath69 ; * ( total ) _ source and target maps _ @xmath70 and @xmath71 .    in particular , the definitions ensure that each edge @xmath72 has precisely one source and one target vertex , albeit we allow for the case of these vertices to coincide , thus allowing for the occurrence of _ self - loops_. we will denote the _ set of all finite directed multigraphs _ by @xmath73 . as a convention",
    ", we will refer to elements of @xmath73 as `` graphs '' from hereon unless explicitly mentioned otherwise .",
    "an important concept for our work is the notion of graph morphisms , which in the current framework may be defined succinctly as follows :    a _ graph morphism _ @xmath74 between two graphs @xmath75 and @xmath76 is a pair of relations @xmath77 such that the mapping of vertices and edges are compatible : @xmath78 these properties may be alternatively expressed as @xmath79 a graph morphism is called _ injective _ , _ surjective _ or _ bijective _ if the vertex and edge morphisms have the respective properties .",
    "the set of bijections aka isomorphisms from a graph @xmath75 to a graph @xmath80 will be denoted @xmath81 .",
    "we will frequently use the term _ linear rules _ for injective partial graph morphisms for brevity , and refer to the set of linear rules from a graph @xmath75 to a graph @xmath80 as @xmath82 .    for the purpose of graph rewriting",
    ", we will be interested to work with isomorphism classes of graphs :    let @xmath83 be a graph .",
    "then we denote by @xmath84_{\\cong}$ ] the _ isomorphism class _ of @xmath75 , defined as @xmath85_{\\cong}:=\\ { g'\\mid \\exists f\\in iso(g.g ' ) : g ' = f(g)\\}\\,.\\ ] ] the _ set of isomorphism classes _ of finite directed multigraphs will be denoted @xmath86 .",
    "an example for an injective partial map aka linear rule ( with the map itself reconstructible from the labels provided , i.e.  a vertex that is in the image of @xmath87 carries the same label as the vertex in the domain , but decorated with a @xmath88 accent , and analogously for the edges ) is provided below : @xmath89{}\\bullet_2\\xrightarrow[b]{}\\bullet_3\\quad \\stackrel{t}{\\rightharpoonup } \\quad\\bullet_{2'}\\xrightarrow[b ' ] { } \\bullet_{3'}\\xrightarrow[c']{}\\bullet_{4'}\\ ] ]    it will prove necessary to consider linear rules as maps of _ isomorphism classes _ of graphs , a concept which is made concrete via the following definition :    an _ isomorphism of linear rules _",
    "@xmath90 ( @xmath91 ) is defined as a pair of graph isomorphisms @xmath92 , which induces the transformation @xmath93 according to @xmath94 here , the notations @xmath95 and @xmath96 refer to the vertex and edge sets of a given graph @xmath75 , respectively , and analogously for the various components of the morphisms .",
    "we will denote the set of _ isomorphism classes of linear rules between two graphs and @xmath97 for each representative of @xmath98 . ]",
    "@xmath99 and @xmath97 by @xmath98_.    as a convention , we will always imply by `` a linear rule '' its isomorphism class , of which a given explicit realization via a choice e.g.  of labelling is only a representative .",
    "+ a standard operation from the theory of graphs is the notion of forming the superposition aka disjoint union of graphs , which in our generalized context amounts to the following :    let @xmath100 ( @xmath91 ) be two graphs .",
    "then we define their _ superposition _ as @xmath101 where the notation @xmath102 stands for the disjoint union of sets .",
    "this concept naturally extends to disjoint unions of isomorphism classes of graphs and of linear rules .    with these preparations",
    ", we will distinguish amongst all possible linear rules the following cases :    [ def : connrules ] a linear rule @xmath103 is called _ connected _ if and only if it can not be written as a disjoint union of two rules .",
    "more intuitively , a rule @xmath103 is connected if its graph ( obtained by drawing both @xmath99 and @xmath97 as well as the relation @xmath104 ) is connected .",
    "one of the main concepts of the present paper is the notion of rule diagrams :    a _ rule diagram _ @xmath105 consists of the following pieces of data : @xmath106 here , @xmath103 is a collection of _ connected linear rules _ ( cf .  definition  [ def : connrules ] ) @xmath90 ( with @xmath107 for some @xmath108 ) , while @xmath109 denotes a collection of _ matches _ @xmath110 where @xmath111 is the ( finite ) _ _ number of constituents _ _ and either @xmath112 or @xmath113 , thus being able to realize also rules that have disconnected left or right hand side graph connected components that are not mapped by any part of the partial map @xmath104 . ] .",
    "we also define as a special case the _ empty rule diagram _ @xmath114 the rule diagrams must fulfill the following _ consistency condition _ : if we define the _ worldline relations _ of the rule diagram as @xmath115 then we require the _ delayed edge morphism condition _ to be fulfilled , namely that @xmath116    an first example of a rule diagram is provided in  , while   illustrates the delayed edge morphism condition . + since in our framework linear rules are _ isomorphism classes _ of linear rules , we need to also define a consistent concept of _ isomorphisms of rule diagrams _ :    let @xmath117 be a rule diagram as before",
    ". then each pair of graph isomorphisms @xmath118 of the input and output graphs @xmath99 and @xmath97 is defined to induce an _ isomorphism of rules diagrams _ according to @xmath119{i } ( i',o',r',m',s',t')\\\\          r'&:= i_o\\circ r\\circ i^{-1}_i\\,,\\quad m':=i_i\\circ m\\circ i^{-1}_o\\\\          s'&:=i_i\\circ s\\circ i_i^{-1}\\uplus i_o\\circ s\\circ i_o^{-1}\\\\          t'&:=i_i\\circ t\\circ i_i^{-1}\\uplus i_o\\circ t\\circ i_o^{-1}\\ , .      \\end{aligned}\\ ] ] we denote the _ set of isomorphism classes of rule diagrams _ by @xmath120 , and the _ @xmath8-vector space of isomorphism classes of rule diagrams _ by @xmath121    let us pause for a moment to focus on a notational convention that is made throughout this paper in order to emphasize a very important distinction :    in this paper , we will reserve _ fraktur symbols _ for _ sets of objects _ , while _",
    "calligraphic letters _ are reserved for _",
    "@xmath8-vector spaces _ ( and more sophisticated structures thereover ) constructed over a given set .",
    "more precisely , if @xmath122 is a set , then we denote by @xmath123 the @xmath8-vector space of finite linear combinations of the basis vectors associated to the elements of the set @xmath122 .",
    "this entails that if we introduce an arbitrary , but fixed unique indexing scheme @xmath124 on the set @xmath122 , @xmath125 every element of the @xmath8-vector space @xmath126 may be expressed uniquely as finite linear combination @xmath127 with @xmath128 the _ basis vector associated to the element @xmath129 _ , and where finiteness entails that at most a finite number of the coefficients @xmath130 are nonzero .",
    "+ in a slight abuse of notations , we will write @xmath131 to denote the _ basis vector _ @xmath132 associated to the element @xmath133 ( as opposed to @xmath134 if we are explicitly referring to the element of the _ set _",
    "@xmath122 ) .",
    "+ for example , in these notations the operations of the @xmath8-vector space , the _ vector addition _ @xmath135 and _ multiplication by scalars _",
    "@xmath136 , are defined such as to fulfill the following standard consistency condition ( aka _ multilinearity _ ) : @xmath137    in the following , it will often prove crucial to explicitly distinguish between individual elements @xmath138 of the * _ set _ * of isomorphism classes of rule diagrams and generic elements @xmath139 of the * _ vector space _ * of isomorphism classes of rule diagrams , which are in general linear combinations of rule diagrams .",
    "we thus fix the following convention :    in a slight abuse of notations , we will write @xmath140 for the element of the _ set _ of linear rules @xmath120 , as well as @xmath141 for the associated basis vector @xmath142 of the _ vector space _ of linear rules . in order to further economize the language , we will refer to rule diagrams @xmath143 as * _ basis diagrams_*.    the moniker rule _ diagrams _ is motivated by the following intuition : consider for example the linear rule presented as an example in  .",
    "we may visualize it as a rule diagram in the form @xmath144{}\\bullet_2\\xrightarrow[b]{}\\bullet_3\\quad \\stackrel{t}{\\rightharpoonup } \\quad\\bullet_{2'}\\xrightarrow[b ' ] { } \\bullet_{3'}\\xrightarrow[c']{}\\bullet_{4'}\\right ) \\quad \\widehat{=}\\quad { \\ensuremath{\\vcenter{\\hbox{\\includegraphics{images / ruletorulediagramexample}}}}}\\ ] ] we may thus interpret a rule diagram as a sort of `` time evolution '' of a set of graphs ( along the `` optimistic arrow of time '' which points vertically upwards ) . in the example , the vertex labelled @xmath145 and the edge labelled @xmath7 are `` deleted '' ( as indicated by the symbol @xmath146 which marks the `` time of deletion '' ) , while the vertices @xmath147 and @xmath148 as well as the edge @xmath149 are preserved ( indicated by connecting dotted lines ) , with finally the vertex @xmath150 and @xmath151 being `` created '' ( indicated by a symbol @xmath146 marking the `` time of creation '' ) .",
    "a much more thorough prescription of how to construct the actual diagrams as well as an interpretation of the dotted lines in the pictures as worldlines will be presented in section  [ sec : viz ] .",
    "+ amongst the possible generic rule diagrams , we discern two special classes :    the _ set of isomorphism classes of atomic rule diagrams _",
    "@xmath152 is defined as @xmath153 where @xmath103 is a _ single connected rule _ ; the corresponding @xmath8-vector space is denoted by @xmath154 moreover , we define the _ set of isomorphism classes of irreducible rule diagrams _ @xmath155 as @xmath156 where we consequently require the partial homomorphisms @xmath90 to be connected linear rules ; the corresponding @xmath8-vector space is defined as @xmath157    we evidently have that @xmath158 and moreover the inclusion of vector spaces @xmath159 note that we consider the _ empty rule diagram _ @xmath160 as an element of all three vector spaces . + as mentioned in the introduction , the irreducible rule diagrams play an important role in our framework since they directly present superpositions of connected rules , and whence generic graph transformation rules .",
    "our aim will now consist in equipping the @xmath8-vector space @xmath9 with a notion of _ composition _ , or rather with four different types of composition that implement the four possible types of compositions of graph transformation rules .",
    "in the following , @xmath9 will play two different roles  it will evidently feature as a subvector space of @xmath15 , but it will also serve as the vector space underlying the four types of rule algebras @xmath12 that will be defined in this subsection .",
    "+ the starting point of our rule algebra constructions will consist in the definition of an _ insertion morphism _ that simply acts as the identity on any irreducible rule diagram :    [ def : insertionmorph ] the _ insertion morphism _ is defined on pure irreducible rule diagrams as @xmath161 extended to the a vector space homomorphism @xmath162 via multilinearity .",
    "we furthermore need to define the notion of interfaces of rule diagrams :    the _ input interface _ @xmath163 and the _ output interface _ @xmath164 of a rule diagram @xmath117 are defined as @xmath165    it is worthwhile emphasizing that in general the interfaces @xmath163 and @xmath164 of a rule diagram @xmath138 are _ not _ necessarily graphs , a fact which will play a prominent role in the sequel .",
    "+ with these ingredients , we may now define the notion of _ composition _ of rule diagrams :    let @xmath166 with @xmath167 be two rule diagrams .",
    "then the _ composition of @xmath168 with @xmath169 along the match @xmath170 _ , denoted @xmath171 , is defined as follows : @xmath172 here , the _ set of matches _",
    "@xmath173 is defined as @xmath174    in other words , the _ set of matches _",
    "@xmath173 consists of all those one - to - one relations @xmath175 that render @xmath171 a consistent ( pure ) rule diagram .",
    "it may be constructed explicitly by fixing representatives of the isomorphism classes of @xmath168 and @xmath169 , followed by listing the possible one - to - one relations for the given representatives , from which the consistent matches may be read off according to the consistency conditions for rule diagrams .",
    "evidently , _ matches must respect orientations _",
    ", in the sense that directed edges can only be matched in the correct orientation .",
    "note that an equivalent characterization of the set of matches @xmath173 between two rule diagrams is given by @xmath176 whence a match between two rule diagrams @xmath168 and @xmath169 is nothing but an injective partial graph morphism from the output interface of @xmath169 to the input interface of @xmath168 .",
    "a proof of this nontrivial statement may be found in  @xcite , proposition  18 .",
    "+ the next step consists in defining a composition operation on @xmath15 :    the _ composition _",
    "@xmath177 on the vector space @xmath15 is defined as follows : we first define a composition of basis diagrams @xmath178 : @xmath179 we then extend this definition to the whole of @xmath15 via a bilinear extension of the composition operation , @xmath180    as a special case , it follows from our definitions that the composition of the _ empty rule diagram _",
    "@xmath181 with any other rule diagram @xmath139 fulfills @xmath182 this observation together with the definition of the composition operation leads to the following definition which is central to this work :    endowing the @xmath8-vector space @xmath183 of isomorphism classes of rule diagrams with the composition operation @xmath177 results in a _ @xmath8-algebra _",
    "@xmath184 which we call the * _ rule diagram algebra_*.    we are now in a position to formulate the first central result of this paper :    [ thm : rdassoc ] the rule diagram algebra @xmath184 is an _ associative unital @xmath8-algebra _ , with unit under composition @xmath181 ( the empty rule diagram ) .",
    "it is a straightforward exercise to demonstrate that the isomorphisms of two basis diagrams @xmath185 are compatible with the isomorphisms of any given composite rule diagram @xmath171 according to our definitions of isomorphisms of rule diagrams , in the sense that any choice of representatives for @xmath168 and @xmath169 leads to the same set of matches and composite rule diagrams up to isomorphisms .",
    "moreover , associativity follows directly from the definition of the composition operation , since both sequences of binary compositions of three pure rule diagrams @xmath186 lead to the triple composite rule diagrams of the form @xmath187 with the matches @xmath175 , @xmath188 and @xmath189 constrained by the requirement that the triple composite must be a consistent rule diagram .",
    "evidently , associativity of the composition on rule diagrams @xmath186 carries over to arbitrary linear combinations of rule diagrams via multilinearity .",
    "finally , the statement that @xmath181 is the unit under composition follows directly from our definition of the composition operation @xmath177 .      as mentioned in the introduction ,",
    "the main idea behind our paradigm of a diagram algebraic construction is to encode a given associative algebra composition operation into a diagrammatic composition operation followed by a form of reduction operation .",
    "we have already defined the first part of this setup , in that for any of the four conceivable types of rule algebra composition @xmath19 we define the insertion morphism @xmath16 as a vector space homomorphism , which is consistent because the underlying vector space for the @xmath8-algebras @xmath12 will be @xmath9 for all four types @xmath13 .",
    "we will thus have to define four variants of a reduction operation that map a generic rule diagram to an irreducible one .",
    "we will proceed in two steps : firstly , there is a natural operation available ( which we call the _ boundary map _ ) which pre - reduces a generic rule diagram to an irreducible pre - diagram .",
    "the latter will then be modified via four different types of _ fixing morphisms _ into consistent irreducible rule diagrams , thereby completing the definition of the reduction maps .",
    "+ we begin our construction by recalling that a generic basis diagram @xmath138 encodes a succession of individual graph transformations that potentially overlap at some vertices and/or edges . as a first step towards a notion of reduction",
    ", we define the so - called boundary map :    let @xmath117 be a basis diagram",
    ". then we define the _ boundary map _ @xmath190 via @xmath191 we extend this map to generic linear combinations of pure rule diagrams by linearity , and denote the vector space of isomorphism classes of possible outcomes of this operation @xmath192 , aka the space of _ rule pre - diagrams_.    according to our definition , we have that @xmath193 whence in general applying @xmath190 to a basis diagram @xmath141 may not lead to a consistent irreducible rule diagram .",
    "more precisely , it may happen that @xmath194 contains what is known in the graph rewriting literature as _ dangling edges _",
    ", manifesting themselves as edges @xmath195 for which either @xmath196 and/or @xmath197 . as a simple example for such a case , consider the application of the boundary map to a composite of a diagram of an edge preserving rule with a vertex deletion and a vertex creation rule : @xmath198 whence the edge @xmath199 becomes a dangling edge via @xmath190 because @xmath200 , and @xmath201 because of @xmath202 .",
    "+ it is evident that elements of @xmath192 containing dangling edges do not possess a consistent interpretation as linear rules .",
    "the final part of the definition of rule algebras thus consists in the construction of so - called _ fixing morphisms _ that will allow to `` repair '' some or all of the diagrams @xmath203 according to four possible strategies , and discard those that are not `` fixable '' according to the given strategy :    the _ fixing morphisms _",
    "@xmath204 of types @xmath205 are defined as follows : we first define the _ partial fixing morphisms _ @xmath206 and @xmath207 via their action on basis pre - rule diagrams @xmath208 , @xmath209 their action on generic irreducible pre - rule diagrams is then defined by multilinear extension .",
    "+ next , we define the _ projection morphism _ , which discards all irreducible pre - rule diagrams that are not consistent irreducible rule diagrams .",
    "it it is defined to act on basis diagrams @xmath141 as @xmath210 and is extended to all of @xmath192 by multilinearity . with these preparations , the four _ fixing morphisms _",
    "@xmath211 are then defined as follows : @xmath212    in other words , @xmath206 `` fixes '' edges with missing endpoint vertices in the right hand side graph @xmath25 of an irreducible pre - diagram by removing them ( and also by restricting the partial morphism @xmath87 to the new right hand side graph @xmath213 ) , while dually @xmath207 `` fixes '' edges with missing endpoint vertices in the left hand side graph analogously .",
    "both maps are extended to all of @xmath15 via multilinearity as usual .",
    "+ the four different variants of the `` fixings '' have been defined in order to precisely mirror the analogous definitions in ordinary graph rewriting where possible  the experts in graph rewriting may recognize the feature that in @xmath0 graph rewriting it is not permitted to delete a vertex from a graph to which edges are attached unless these edges are also simultaneously deleted ( because otherwise a `` dangling edge '' would result ) , while e.g.  in @xmath1-rewriting ( which we call @xmath22-rewriting ) deletion of a vertex with incident edges `` automatically '' also deletes the incident edges .",
    "interestingly , the other two feasible variants of @xmath214- and @xmath215-rewriting appear to not have been introduced in the literature before .",
    "the precise relationship between our diagram algebraic approach and the more conventional category - theoretic approach to graph rewriting will be presented elsewhere .",
    "the second central result of this paper is the definition and characterization of the four different possible types of rule algebras @xmath12 :    we denote by @xmath216 the @xmath8-algebras that are called the * _ rule algebras _ * of types @xmath14 , with composition operations defined as @xmath217 with the _ reduction morphisms _",
    "@xmath218 defined as @xmath219    as an immediate corollary of our definitions , the moniker `` irreducible '' for the diagrams in @xmath9 is now precisely justified :    [ corr : ird ] let @xmath220 be an irreducible rule diagram",
    ". then @xmath221 .",
    "trivially , since any basis diagram @xmath222 is of the form @xmath223 a direct application of our definitions reveals that @xmath224 . by the same token",
    ", @xmath225 does not contain any `` dangling edges '' , whence @xmath226 , from which ( together with the usual extension to arbitrary diagrams @xmath220 via extension to multilinearity ) the claim follows .",
    "we are now in a position to state the second main result of this work :    [ thm : mainassoc ] the reduction morphisms @xmath227 are _ algebra homomorphisms _ , whence the rule algebras @xmath20 are _ associative , unital @xmath8-algebras _ with unit @xmath181 .    the claimed algebra homomorphism property of @xmath218 amounts to @xmath228 if it were not for the nontrivial actions of the fixing morphisms @xmath23 followed by the projection morphisms , the claim would follow immediately from the associativity of the rule diagram algebra @xmath15 . due to multilinearity , it is sufficient to check the claim on basis diagrams @xmath229 .",
    "the proof proceeds in two steps : we first recall that any admissible match @xmath230 must be an injective partial graph homomorphism from @xmath231 to @xmath232 , and whence more precisely from @xmath233 to @xmath234 , where @xmath233 and @xmath234 are the graphs that result upon deleting from the interfaces @xmath231 and @xmath232 any `` dangling edges '' . consequently",
    ", if @xmath235 and @xmath235 , we have that @xmath236 because the fixing morphisms @xmath23 act only by possibly ( depending on the type @xmath13 ) deleting `` dangling edges '' and performing a projection to the space of irreducible rule diagrams . since by definition the matches @xmath237 do not involve the `` dangling edges '' , composing @xmath238 with @xmath239 along any match @xmath240 can not modify the presence of any `` dangling edges '' in @xmath238 nor in @xmath239 existing prior to the composition .",
    "in other words , the set of `` dangling edges '' of the reduction of the composite @xmath241 can be uniquely decomposed into three disjoint sets @xmath242 ( @xmath243 ) and @xmath244 , with @xmath245 for @xmath246 and @xmath247 .",
    "this proves the claim for the case of non - empty reductions of @xmath238 and @xmath239 . by the an analogous argument , in case that @xmath248 and/or @xmath249 , we are guaranteed to also have that @xmath250 , whence the claim of the homomorphism property follows .",
    "+ the associativity of the rule algebras @xmath12 follows directly the homomorphism property of the reduction morphisms @xmath227 : @xmath251where in the steps marked @xmath252 we have used that according to definition  [ def : insertionmorph ] @xmath253 for all @xmath254 , whence by corollary  [ corr : ird ] @xmath255 .",
    "+ finally , the rule algebras @xmath12 are unital since by definition @xmath256 whence for each of the algebras @xmath12 , @xmath257 is the unit element .",
    "it will depend on the particular application at hand whether it is more convenient to compute the triple compositions via performing an actual triple composition in @xmath15 followed by application of the appropriate reduction morphism , or whether it is more convenient to perform two consecutive binary compositions , since evidently the former variant produces all the matches that are effectively discarded in either of the binary compositions . on the other hand ,",
    "in particular if we have a small number of concrete rule algebra elements given of which we want to compute higher composites , it might be advantageous to perform the computations via higher compositions in @xmath15 , since this route illustrates more clearly the combinatorics of this particular problem .",
    "we conclude this section with a visualization of the previously introduced concepts .",
    "first of all , let us illustrate why we like to think of a rule diagram @xmath140 associated to which is the rule algebra element @xmath258 ( i.e.  the associated basis element @xmath259 of @xmath15 with prefactor @xmath260 ) as a _ diagram_. consider thus a generic rule diagram @xmath140 , with @xmath261 we may visualize this data ( or , more precisely , a particular representative of the isomorphism class @xmath138 ) as follows :    * for each subpart of the data @xmath90 ( which by definition is a connected linear rule ) , draw @xmath262 above @xmath263 , and link vertices and edges that are nontrivially mapped by @xmath264 with dotted lines ; from all remaining vertices and edges of @xmath263 , draw a dotted line upwards ending in a @xmath146 symbol in the space between @xmath263 and @xmath262 , and moreover draw a dotted line from all remaining vertices and edges of @xmath262 downwards , also ending in a @xmath146 symbol in the space between @xmath263 and @xmath262 .",
    "each such configuration presents an instance of an _ atomic rule diagram_. * each match entry @xmath265 consists of an injective partial map from @xmath266 to @xmath267 and of an injective partial map from @xmath268 to @xmath269 ; draw a solid line decorated with an arrow from vertices and edges of @xmath270 to vertices and edges of @xmath263 that are nontrivially mapped to one another via @xmath271 .",
    "presented below is an example of the above procedure : @xmath272 in this particular example , the rule diagram is a composite of three atomic rule diagrams @xmath273 ( @xmath274 , numbering from top to bottom ) , composed along the matches @xmath275 , @xmath276 and @xmath277 .",
    "we have moreover chosen this example to illustrate that the `` delayed edge morphism condition '' entails that `` delayed matches '' of edges ( such as the one implemented via @xmath276 ) are admissible as long as the respective endpoint vertices are matched consistently as well ( here via `` being threaded through '' diagram @xmath239 via the matches @xmath277 and @xmath275 ) .",
    "note that we have chosen to omit any vertex or edge labels in this drawing in order to enhance visual clarity ",
    "nevertheless , we may think of any vertex or edge of the representative of the composite rule diagram as being implicitly uniquely labelled by its position in the plane . +",
    "another rather illuminating way to think about the data contained in a given rule diagram @xmath140 is to think of it as a _ worldline history _ : each vertex and edge due to injectivity has a precise `` history '' within a given rule diagram , i.e.  it starts its `` existence '' in one of the graphs @xmath263 or @xmath262 and is then evolved via partial maps @xmath264 and matches @xmath271 .",
    "in fact , one may think of each vertex and edge as having their unique _ worldlines _ , marked with `` events '' that are the concrete instances that a vertex or edge occurs in a given rule diagram ( in the sense of which explicitly labelled vertices or edges in a given representative of @xmath225 are linked via @xmath264 s and @xmath271 s ) . the most efficient way of drawing what we call the _ worldline history _ of a given @xmath140 is to extract from the transitive reflexive closure of @xmath278 all the connected chains of related vertices and edges , excluding self - loops ",
    "note that due to the inherent directedness of the partial maps @xmath90 and @xmath279 , the individual elements of a given chain are _ totally ordered_. for each chain of vertices , we draw a solid vertical line , with the first vertex of a chain marked at the bottom and the last one at the top ( following the direction of the `` optimistic arrow of time '' ) . furthermore ,",
    "in case the first vertex of a chain is an element of @xmath280 , we decorate the start of the vertex worldline by a @xmath146 symbol , and dually if the last vertex of a chain is an element of @xmath281 , we decorate the end of the worldline with a @xmath146 symbol .",
    "we proceed analogously for the edge worldlines ( which will be drawn as wavy lines for better graphical distinction ) , only that we indicate in addition graphically the endpoint vertices worldlines for each edge worldline ( by a dotted horizontal line somewhere in the worldline picture ) . for each pair of vertices or edges included in @xmath282 or @xmath283",
    ", we only mark the `` position '' of the vertex or edge once on the respective worldline .",
    "we call the resulting graphical description in terms of vertex and edge worldlines a _ worldline history_. for example , the worldline history for the rule diagram depicted in   reads @xmath284{images / wlexample}}}\\ ] ] only the absolute orders along each individual worldline carries any immutable meaning for a given rule diagram , but we have grouped the incidences of vertices and edges relative to one another across worldlines to improve the intuitive understanding of the `` time evolution '' of vertices and edges encoded in the rule diagram .",
    "this example already hints at the practical complications in drawing worldline histories  in particular the edge worldlines may be difficult to mark clearly in the diagrams , since one always has to keep track of their endpoint vertices . + we may thus picture a given rule diagram quite intuitively as a sort of `` transformation movie script '' of vertices and edges , and compositions of rule diagrams amount to concatenation of these `` movie scripts ''",
    ". moreover , the somewhat cryptic conditions on possible matches of two rule diagrams are now clearly visualizable : if one matches two edges anywhere in a given composition of two or more rule diagrams , their respective endpoint vertex worldlines must be matched as well , up to a possible `` delay '' in the form of intermediate matches of the endpoint vertex worldlines into other endpoint vertex worldlines .",
    "an example of such a delayed morphism of an edge may be found in the leftmost edge worldline in  . +",
    "another interesting observation is the fact that the application of the boundary map @xmath285 amounts in the worldline history picture to `` shortening '' the worldlines for a given rule diagrams to their absolute start and end points , thereby producing a worldline history akin to the one of an irreducible rule diagram , and discarding any worldlines that both start and end in a symbol @xmath146 .",
    "we may thus generically end up with edge worldlines that are quite literally missing one or both of their entire endpoint vertex worldlines ( in case these had been starting and ending in symbols @xmath146 ) .",
    "equivalently , these situations occur if in the worldline history we have one of the following four possible configurations that are inconsistent with the shapes of worldline histories of irreducible rule diagrams : @xmath286 here , the dashed boxes indicate that the ends they mark are either of type @xmath287 or @xmath146 , whence the diagrams represent the situations of an edge worldline with one or two `` missing endpoint vertices '' at their `` future end '' , or one or two `` missing endpoint vertices '' at their `` past end '' , respectively .",
    "+ it may then be easily seen that the two nontrivial partial fixing morphisms @xmath206 and @xmath207 amount graphically to the following operations on worldlines : @xmath288 the action of the fixing morphisms thus modifies the edge worldlines as marked with the blue crosses , thereby rendering the previously inadmissible vertex worldline configurations ( marked with red crosses ) admissible ( marked with blue crosses ) .",
    "+ in practice , the visualization in terms of worldline histories has the advantage that it may be directly implemented as an algorithm , in a form that will be presented elsewhere . however , we base our mathematical framework on the notion of rule diagrams instead , since this concept is more directly amenable to a combinatorial analysis , as will be demonstrated in the next section .",
    "one operation that suggests itself in view of our current description of rule diagrams is the operation of reversing all partial maps of the _ set _ of rule diagrams and the associated rule diagram _ algebra elements _ @xmath289 . ] :    the _ dualization map _",
    "@xmath290 assigns to each basis diagram @xmath291 the dual diagram @xmath292 with @xmath293 the dualization operation is extended to all of @xmath15 via the definition @xmath294 where @xmath295 are basis diagrams , and where @xmath296 is an ( arbitrarily , but globally chosen ) _ _ involutory automorphism _ _ for the reals is just the identity mapping , while the field @xmath11 admits the typical choices of the identity mapping or of complex conjugation .",
    "we are tacitly assuming that @xmath8 is a field of @xmath297 int he generic case . ] .",
    "this definition entails the following crucial fact about the rule diagram algebra and also about the four types of rule algebras :    @xmath298 the dualization map @xmath299 is a well - defined endomorphism of @xmath15 , and moreover an _ _ involution _ _ is an involution on the @xmath15-module , but an anti - involution on @xmath15 itself ; it is however quite common to refer to such a map as involution nonetheless . ] , i.e.@xmath300 the rule diagram algebra together with the dualization map , @xmath301 , is a unital associative algebra with involution , and hence a ( non commutative ) _ @xmath302-algebra _ , with the usual properties @xmath303 for all @xmath304 and @xmath305 . here",
    ", we have denoted again by @xmath306 the globally chosen involutory automorphism of the field @xmath8 .",
    "+ @xmath307 the dualization map may be properly restricted to @xmath9 , @xmath308 whence the associative unital rule algebras @xmath12 endowed with @xmath309 become @xmath302-algebras .    evidently , the converse of an injective partial map is again an injective partial map , whence the outcome of applying @xmath309 to any basis diagram @xmath310 is trivially again a rule diagram .",
    "moreover , the structure of the diagram is not changed beyond the reversal of the roles of input and output graphs and of the partial maps @xmath87 and @xmath311 , whence in particular an irreducible rule diagram remains irreducible . as for the composition of two basis diagrams , each given contribution @xmath312 to a composition @xmath313 is again a rule diagram ; applying @xmath309 to this rule diagram , we obtain a rule diagram which may be written as @xmath314 ( simply by reversing @xmath87 s and @xmath311 s and keeping track of the subdiagrams ) , whence we obtain the ( anti-)involution property .",
    "in particular , if the match @xmath315 fulfills the `` delayed edge match '' condition , so dies @xmath316 for the dualized composite diagram . the empty rule diagram is invariant under @xmath309 , and @xmath309 also does not affect any @xmath8-prefactors of a given rule diagram .",
    "+ finally , the proof for the ( anti-)involution property of @xmath309 on each of the rule algebras @xmath12 is entirely analogous to the proof of the property for @xmath15 .",
    "it is a straightforward exercise to extend the rule algebraic formalism to colored and/or undirected multi - graphs , or even general graphs with both directed and undirected edges . to this end ,",
    "one only needs to employ the standard definitions of injective partial graph morphisms and graph isomorphisms for the respective types , and in addition require matches to respect colors and types of edges .",
    "we conclude this chapter by commenting that it is also possible to lift the definitions from graphs to hypergraphs , with the evident induced generalizations of morphisms and matches .",
    "the details are left to the interested reader .",
    "the derivation of the compatibility of the combinatorial hopf algebra structure with the definition of the rule diagram algebra as presented in definition  [ def : rulediagramalgebra ] will follow the standard hierarchical development of algebraic concepts ( cf .",
    "e.g.  @xcite ) , starting from a vector space ( in our case the @xmath8-vector space @xmath317 of isomorphism classes of rule diagrams ) , and endowing it step by step with further structures :    1 .   check that the vector space endowed with a suitable _ composition operation _ satisfies the axioms of a _",
    "unital associative algebra_. 2 .",
    "check that with the definition of a suitable _ decomposition operation _",
    "it becomes a _",
    "counital coassociative coalgebra_. 3 .",
    "confirm that both structures are compatible , such that we have in fact the structure of a _",
    "bialgebra_. 4 .",
    "introduce a concept of _ filtration _ of elements of the bialgebra .",
    "5 .   via the filtration , construct the ( unique ) _ antipode _ of the bialgebra , and thereby demonstrate that one thus obtains the structure of a _",
    "hopf algebra_.    while we will follow in spirit quite closely the derivation of the combinatorial hopf algebra structure of the heisenberg - weyl diagram algebra as presented in  @xcite for the first three steps , we will employ the theorem on the existence of a unique antipode for any filtered bialgebra as presented in  @xcite in order to prove the existence of the hopf algebra structures .",
    "we have already introduced in the previous section the concept of the rule diagram algebra @xmath184 and have demonstrated in  [ thm : rdassoc ] that it is an _ associative unital @xmath8-algebra_. therefore , the only work left to do for this aspect of the hopf algebra construction is to formulate these results in the form conventional in the hopf algebra literature ( cf .",
    "appendix  [ app : algebra ] ) :    [ def : rulediagramalgebra ] let @xmath184 denote the associative unital @xmath8-algebra of rule diagrams . in the following , we will refer to the rule diagram algebra alternatively ( but equivalently ) as @xmath318 , with _ multiplication map _ @xmath319 and _ unit map _",
    "@xmath320 here , the special element @xmath181 , i.e.  the ( unique ) isomorphism class of the empty rule diagram , is the ( unique ) _ unit under composition _ as before , @xmath321      in this section , we will have to make frequent use of the relationship between a rule diagram @xmath140 and its associated basis vector @xmath142 , whence for this subsection we will make the distinction explicit .",
    "+ we will demonstrate now that the rule diagram algebra @xmath15 can be equipped with the structure of a _ coassociative counital coalgebra _",
    "appendix  [ app : coalgebra ] ) .",
    "following in spirit the ideas presented in  @xcite , while the algebra structure was related to _ composition _ of rule diagrams , the coalgebra structure will be related to _",
    "decompositions _ of rule diagrams .",
    "+ more precisely , consider the following definition of decompositions of rule diagrams :    let @xmath322 be an arbitrary rule diagram .",
    "then a _ decomposition _ of @xmath225 into two rule diagrams @xmath168 and @xmath169 is defined such that @xmath323 here , we have employed the shorthand notations @xmath324as well as the convenient notation for the _ disjoint union _ of two pure rule diagrams , @xmath325    in other words , a decomposition of a pure rule diagram is a separation of the tuple of data of the pure rule diagram into two disjoint tuples of data which are ( a ) themselves proper pure rule diagrams , ( b ) disjoint , and ( c ) whose disjoint union reproduces the original rule diagram . + an important property for the coalgebra construction will be that of indecomposability :    a rule diagram @xmath140 for which no decomposition exists , is called _",
    "indecomposable_. we refer to _ non - empty indecomposable rule diagrams _ as _ primitive rule diagrams _ , and introduce the notation @xmath326 for the _ set of primitive rule diagrams _ , as well as @xmath327 for the subvector space of the vector space of rule diagrams spanned by the basis vectors associated to primitive rule diagrams .",
    "our definitions imply that an arbitrary nonempty rule diagram @xmath138 may be decomposed uniquely into a superposition of primitive rule diagrams , @xmath328 where @xmath329 is called the _ number of connected components _ of @xmath225 , and where each diagram @xmath330 is a primitive rule diagram .    according to this definition ,",
    "the empty rule diagram @xmath331 is evidently indecomposable . for a generic rule diagram @xmath140",
    ", we may sharpen the analysis of decomposability via the following lemma :    [ lem : decomprd ] let @xmath140 be a generic rule diagram , @xmath332 where we have by virtue of our general definition of rule diagrams that the @xmath90 are _ connected _ injective partial maps . in other words ,",
    "the rule diagrams one may construct from each individual single such connected linear rule are _ atomic _ rule diagrams . as the moniker `` atomic '' already suggests , in the special case @xmath333 , where @xmath334 ( i.e.  when @xmath225 is an atomic rule diagram ) , this diagram is according to our definitions indecomposable .",
    "+ in the generic case , @xmath225 is _ indecomposable _ if and only if @xmath335 which amounts in the graphical presentation of the rule diagram to the statement that all constituent atomic subdiagrams @xmath336 ( which are the atomic rue diagrams presenting the connected linear rules @xmath90 ) must be connected by the matches @xmath271 into an overall connected diagram .",
    "otherwise , the rule diagram is _ decomposable _ , namely into its connected components .    with these ingredients , we may now proceed to define the counit the counit map and the coproduct of the rule algebra :    the empty rule diagram @xmath337 is defined as the _ counit _ of the rule diagram algebra , while the _ counit map _ of @xmath15 is defined as @xmath338    [ def : coproduct ] let @xmath310 be a basis diagram , whence either the empty rule diagram @xmath339 , or a non - empty diagram @xmath340 with connected subdiagrams @xmath341 , and where @xmath124 is some set of indices , @xmath342 , with @xmath343 the number of connected components of @xmath344 .",
    "+ the _ coproduct _ of @xmath15 is then defined as the @xmath8-linear map defined on basis diagrams @xmath310 as @xmath345 with @xmath346 , and @xmath347 finally , the definition of @xmath348 is extended to all of @xmath15 via multilinearity , @xmath349    for concreteness , the definition of the coproduct entails that @xmath350 while for any other nonempty basis diagram @xmath351 with decomposition @xmath352 where @xmath353 denotes the number of connected components of @xmath225 : @xmath354    the main result of this subsection is the following proposition , demonstrating that our tentative definitions lead to a consistent coalgebra structure :    [ prop : rdacoalgebra ] the diagram algebra @xmath355 is a _ coassociative counital and cocommutative @xmath8-coalgebra_.    see appendix  [ app : coalgebra ] .      referring the interested readers to appendix  [ app : bialgebra ] for the details",
    ", one may prove that the rule diagram algebra equipped with the previously introduced algebra and coalgebra structures in fact forms a bialgebra :    [ thm : bialgrd ] the rule diagram algebra @xmath356 is a bialgebra .",
    "see appendix  [ app : bialgebra ] .      throughout the proof of theorem  [ thm : bialgrd ] as presented in appendix  [ app : bialgebra ] ,",
    "the indecomposable subdiagrams of a given rule diagram seem to play a very special role in the ability of @xmath15 to carry the structure of a bialgebra .",
    "we will now present a concept that emphasizes this point even more ( cf .",
    "appendix  [ app : filteredhopf ] ) :    [ prop : connfilt ] the rule diagram algebra @xmath356 is a _ connected , filtered bialgebra _ , with @xmath357 and where the subspace @xmath358 is in general given by the linear span of all _ basis diagrams with at most @xmath4 indecomposable subdiagrams _",
    ", @xmath359    see appendix  [ app : filteredhopf ] .",
    "in particular , this identifies the subvector space @xmath360 spanned by the _ primitive basis diagrams _ as @xmath361    note that while any atomic ( aka indecomposable and irreducible ) non - empty rule diagram @xmath362 is evidently by definition also a primitive rule diagram , the converse is not true , since also nontrivial composites of atomic rule diagrams may be indecomposable and hence primitive .",
    "in other words , @xmath363    next , referring to appendix  [ app : filteredhopf ] for motivation and further details , we may define the _",
    "@xmath364-fold convolution product _ as @xmath365 where @xmath366 is the @xmath367 multiplication and @xmath368 the @xmath364-fold comultiplication operation ( cf .",
    "appendix  [ app : multipleproductsandcoproducts ] ) , and where the map @xmath369 acts by definition as @xmath370    with these preparations , employing the well - known mathematical fact that any connected filtered bialgebra is a hopf algebra ( cf .",
    "@xcite , ch .",
    "4.3 , corr .",
    "5 ; presented for convenience as corollary  [ corr : bialdcfhopf ] in appendix  [ app : filteredhopf ] ) , and since theorem  [ thm : bialgrd ] states that the rule diagram algebra @xmath15 is indeed a connected , filtered @xmath8-bialgebra , we immediately conclude from corollary  [ corr : bialdcfhopf ] that it is also a hopf algebra :    [ thm : rdhopf ] the rule diagram algebra @xmath371 is a _ hopf algebra _ , with _",
    "antipode @xmath372 _ given by @xmath373    to give a more explicit formula for the antipode and to define the notion of the convolution product @xmath374 explicitly , consider the cases for the first few filtration components @xmath358 for @xmath375 .",
    "a useful auxiliary formula is @xmath376 from which we immediately conclude that @xmath377 due to  , it will prove useful to introduce the notations @xmath378 where @xmath379 contains all contributions to the @xmath364-fold coproduct of @xmath344 that contain at least one factor of @xmath181 in each term , such that @xmath380 and where consequently @xmath381 contains all terms with no occurrences of @xmath181 in the tensor product factors . introducing the notation @xmath382 then we may write explicitly for a generic rule diagram @xmath138 @xmath383 and consequently @xmath384 we thus obtain the following explicit formulae for the antipode of a basis diagram @xmath385 , i.e.  for basis diagrams with exactly @xmath4 superposition factors , @xmath386 , for the first few values @xmath387 ( with @xmath388 ) : @xmath389",
    "it is quite amusing that we can carry out the analogue of blasiak et al.s analysis of relationships and mathematical structures  @xcite for our very general combinatorial hopf algebra of rule diagrams by simply following the fundamental mathematical constructions of the _ lie algebra of an associative algebra _ and of its _ universal enveloping algebra_. more precisely , we wish to complete the diagram of relations ( in partial analogy to  @xcite ) : @xmath390 which was already mentioned in the introduction . as a small , but beautiful side result",
    ", we will demonstrate in section  [ sec : hw ] that our very general construction nicely specializes to the case of the heisenberg - weyl diagram algebra , thereby clarifying some of the more subtle points of blasiak et al.s constructions .",
    "notably , we will argue there that it would be more appropriate also in that special case to speak of the `` lie algebra of the heisenberg - weyl _ diagram _ algebra '' , as opposed to `` the lie algebra of the heisenberg - weyl algebra '' . it would be interesting to investigate whether this slight misunderstanding might have prevented analogous constructions for other algebras .",
    "recall from proposition  [ prop : connfilt ] that the _ primitive _ rule diagrams are defined as those rule diagrams @xmath138 which are neither empty nor decomposable , which evidently imposes a particular form onto the coproducts of their associated basis diagrams : @xmath391 we will now employ a standard result from the mathematics literature , namely that for any associative algebra one may define a so - called _ lie - bracket _ :    let @xmath392 be an associative @xmath8-algebra .",
    "then the _ lie - bracket _ of @xmath126 is defined as @xmath393:{\\ensuremath{\\mathcal{a}}}\\times { \\ensuremath{\\mathcal{a}}}\\rightarrow { \\ensuremath{\\mathcal{a } } } : ( a_1,a_2)\\mapsto [ a_1,a_2]:=a_1*a_2-a_2*a_1\\,.\\ ] ]    while we could of course construct the lie - bracket for the whole of the rule diagram algebra , it will prove to be much more insightful to construct the lie algebra over the primitive rule diagrams only , which happen to be closed under the operation of taking the lie bracket :    [ prop : lierd ] the _ lie algebra @xmath394)$ ] of the rule diagram algebra _ is the lie algebra defined over the @xmath8-vector space @xmath360 of primitive rule diagrams via the lie - bracket @xmath393 : prim({\\ensuremath{\\mathcal{d}}})\\times prim({\\ensuremath{\\mathcal{d}}})\\rightarrow prim({\\ensuremath{\\mathcal{d } } } ) : ( d , d')\\mapsto   [ d , d']:= d*_{{\\ensuremath{\\mathcal{d}}}}d'-d'*_{{\\ensuremath{\\mathcal{d}}}}d\\,,\\ ] ] where the nontrivial claim consists in the property that @xmath395 $ ] closes on @xmath360 .",
    "for two primitive rule diagrams @xmath396 , we have that @xmath397 since we have in @xmath15 due to the definitions of isomorphisms of rule diagrams that @xmath398 and since the composite of two primitive rule diagrams along a nontrivial match is again a primitive rule diagram ( which is moreover guaranteed not to be the empty rule diagram ) , we immediately conclude that @xmath399\\in prim({\\ensuremath{\\mathcal{d}}})\\quad \\forall { \\mathfrak{d}},{\\mathfrak{d}}'\\in \\frak{prim}({\\mathfrak{d}})\\,.\\ ] ] the claim for generic primitive rule diagram algebra elements @xmath400 then follows from multilinearity .    at this point , it is not yet obvious why it is meaningful to define @xmath401 over the @xmath8-vector space @xmath360 instead of over the whole of @xmath15 , but the reason for this choice will be eminent from the relationship between the universal enveloping algebra @xmath402 of @xmath15 , the lie algebra @xmath401 and @xmath15 itself , to be presented in the following subsection . + we conclude this subsection by defining the auxiliary inclusion morphism @xmath403 which simply states that the @xmath8-vector space @xmath360 that underlies @xmath401 according to proposition  [ prop : lierd ] is evidently a subspace of the @xmath8-vector space @xmath15 that underlies the rule diagram algebra @xmath15 . finally , the morphism @xmath404 that appears in   is defined as @xmath405 it simply expresses the fact that any primitive rule diagram considered as an element of the lie algebra @xmath401 may be mapped to its reduction , i.e.  to an irreducible rule diagram via first embedding it into @xmath15 , followed by applying ( the appropriate variant of ) the reduction morphism @xmath227 .",
    "it is important to emphasize that the morphism @xmath406 is _ not _ an inclusion of vector spaces , simply because generic primitive rule diagrams @xmath407 are not necessarily irreducible ( but instead generically nontrivial composites of atomic rule diagrams ) , whence in particular @xmath408      we have already seen in section  [ sec : rdpart ] that a generic rule diagram @xmath258 is a composite of @xmath4 atomic rule diagrams @xmath336 , which in general is in the isomorphism class of a superposition of a number of primitive rule diagrams @xmath409 : @xmath410 here , @xmath411 is the _ number of connected components _ aka _ primitive rule diagrams _ of the composite rule diagram .",
    "note that we have generically that @xmath412 , with @xmath413 in case the rule diagram is the superposition of @xmath411 atomic rule diagrams .",
    "in other words , each generic primitive rule diagram itself is either an atomic rule diagram ( i.e.  irreducible and indecomposable ) , or it is an indecomposable composite of atomic rule diagrams : @xmath414 with @xmath415 , where the @xmath416 are connected linear rules , and where @xmath415 necessitates that the matches of @xmath409 lead to a fully connected diagram .",
    "this raises the natural question : can we express a generic basis diagram as a linear combination of compositions of primitive basis diagrams ? more concretely , instead of specifying the precise set of matches @xmath271 , can we alternatively just specify the full compositions ( which are generically linear combinations of the composites along all possible matches ) ?",
    "+ let us introduce the following convenient notation :    let @xmath417 be two rule diagrams , and let @xmath418 ( @xmath91 ) be the associated basis vectors ( aka basis diagrams ) .",
    "then the _ nontrivial part of their composition _ , denoted @xmath419 , is defined as @xmath420    moreover , for the remainder of this section we will use the notational abbreviation @xmath421    we begin our derivation by the observation that the composition of two primitive pure rule diagrams @xmath422 ( @xmath91 ) may be expressed as @xmath423 but as already noted in the construction of the lie algebra @xmath401 of @xmath15 , the nontrivial part of the composition of two primitive basis diagrams consists only of linear combinations of primitive basis diagrams !",
    "therefore , we may express the superposition of two primitive basis diagrams @xmath424 ( @xmath91 ) as @xmath425-d(1){\\circledast}d(2)\\,.\\ ] ] here , in the second equality , we have simply inserted the definition of the lie bracket . on the other hand , we could have used the isomorphic representative @xmath426 , whence @xmath427-d(2){\\circledast}d(1)\\,.\\ ] ] while the two sets of expressions   and   do not look quite compatible at first sight , their equality follows from @xmath428=d_1{\\circledast}d_2-d_2{\\circledast}d_1\\,.\\ ] ] entirely analogously , we may derive formulae for @xmath4-fold superpositions of primitive basis diagrams from linear combinations of @xmath429-fold composites of primitives , with @xmath430 .",
    "for example , for @xmath431 and @xmath424 ( @xmath432 ) we have generically : @xmath433 the only term that needs more attention is the following one : @xmath434 here , the somewhat awkward notation @xmath435 used in the first line stands for all contributions that have non - trivial matches between @xmath238 and @xmath239 as well as between @xmath238 and @xmath436 .",
    "moreover , the two variants @xmath437 and @xmath438 amount to the two different variants to interpret the first line ( and we could additionally have permuted the superposition factors in the two variants ) . in summary ,",
    "one of the possible presentations of the triple composition reads @xmath439\\ , .",
    "\\end{aligned}\\ ] ]    in other words , even though it is somewhat unwieldy to compute a presentation already for the triple superposition of primitive rule diagrams in this fashion , it is immediately obvious that it is always possible to inductively derive such a presentation for superpositions of arbitrary numbers of primitive rule diagrams !",
    "this motivates the following definition :    [ eq : rdautoeq ] let @xmath440 be a generic basis diagram , whence @xmath441 then the _ autoequivalence morphism _",
    "@xmath442 is defined inductively as follows :    * @xmath443 or @xmath444 : @xmath445 * @xmath446 : @xmath447 the last equality follows directly from the definitions of @xmath395 $ ] and of @xmath448 . *",
    "@xmath449 : we employ the formulae for @xmath450 with @xmath451 to decompose the sequential composition of @xmath452 primitive rule diagrams , which yields a formula for the superposition of @xmath452 primitive rule diagrams .",
    "moreover , @xmath453 is extended to all of @xmath15 by multilinearity .",
    "it is then immediately obvious that we may formulate the following generalization of the poincar - birkhoff - witt theorem :    [ thm : gpbwrd ] introduce an arbitrary _ total order on the set of isomorphism classes of primitive rule diagrams _",
    "@xmath454 , @xmath455 and let the same symbol @xmath456 also stand for the induced total order of the associated basis vectors @xmath457 aka primitive pure rule diagrams . then an arbitrary pure rule diagram @xmath458 ( where repetitions in the indices @xmath459 are explicitly allowed ) may be _ uniquely represented _ as @xmath460 where @xmath461 denotes the set of indices for the isomorphism classes @xmath462 , and where the coefficients are numbers ( i.e.  with values in @xmath8 ) .    in a sense , this generalized form of the pbw theorem entails that there exists an _ alternative basis _ for the vector space of isomorphism classes of rule diagrams that is expressed in terms of _ `` normal - ordered '' words in primitive pure rule diagrams modulo the relations induced by the lie bracket_. we will encounter some explicit realizations of this isomorphism in the study of subalgebras of @xmath15 in section  [ sec : structuretheory ] .",
    "it seems intuitive to employ a choice of basis in terms of superpositions of primitive rule diagrams , @xmath463 where we again fixed some arbitrary , but global choice of total order on the isomorphism classes of primitive rule diagrams .",
    "there even existed an alternative choice of algebra operation in the form of the superposition operation that would render a _ commutative algebra _ , @xmath464\\,,\\ ] ] with @xmath465 and where @xmath466 $ ] denotes the polynomial ring over @xmath8 .",
    "however , clearly the rule diagram algebra is _ not _ commutative , and one would have to encode horrifically complex relations on the rule diagrammatic compositions of superpositions of rule diagrams in order to encode the non - commutativity , such as for example ( with @xmath467 ) @xmath468 in other words , only the pbw - like choice of basis promises for applications of ideas from combinatorics , where in particular one tries to derive combinatorial rules from the commutation relations of the primitive elements .",
    "+ finally , we may define the _ universal enveloping algebra _ of the lie algebra of the rule diagram algebra by specializing the standard construction ( where @xmath469 is the _ tensor algebra _ over a vector space @xmath68 ) @xmath470\\rangle}\\ ] ] to the case at hand :    [ def : ua ] the _ universal enveloping algebra _ @xmath402 of the lie algebra @xmath401 of the rule diagram algebra @xmath15 is defined as @xmath471\\rangle}\\,.\\ ] ] here , the indices in the denominator are understood as running over any possible pair of indices . as conventional in the mathematics literature",
    ", we will not always explicitly write out the tensor product symbols @xmath472 when specifying elements of @xmath402 .",
    "it is then immediately clear from our definitions that we may specify an _ isomorphism _",
    "@xmath473 which is extended to all of @xmath15 by multilinearity .",
    "quite importantly , this constitutes a very powerful a posteriori consistency check in favor of our construction of the rule diagram algebra @xmath15 , since it suggests that our construction is ( up to choice of basis ) essentially canonical . +",
    "another instructive exercise consists in computing the effect of the autoequivalence @xmath474 onto the formula for the antipode , as explicitly presented in  . noticing that since the antipode is a multilinear mapping , we may e.g.  compute for @xmath475 ( with @xmath476 primitive basis diagrams ) : @xmath477 = d_2\\uplus d_1+d_2{\\circledast}d_1=d_2*d_1\\ , . \\end{aligned}\\ ] ] a very tedious computation reveals moreover that ( for @xmath478 ) @xmath479 illustrating the _ antihomomorphism property _ of the antipode , i.e.@xmath480 by induction",
    ", we thus conclude that @xmath481 but by virtue of theorem  [ thm : gpbwrd ] , any arbitrary rule diagram @xmath139 may be represented as a linear combination of compositions of primitive basis diagrams , which demonstrates that @xmath482 whence we have obtained the following refinement of theorem  [ thm : rdhopf ] :    [ thm : rdhopfv2 ] the rule diagram algebra @xmath483 is an _ involutive hopf algebra _ and whence a _ @xmath302-algebra _ , with _",
    "antipode @xmath372 _ given by  , which is also an _",
    "involution_.    it is finally easy to read off the antipode @xmath484 of the universal enveloping algebra @xmath402 : @xmath485",
    "the so - called ( single - type ) _ heisenberg - weyl ( hw ) algebra _ is the algebra with generators @xmath7 , @xmath6 and @xmath99 and presented by the relation @xmath486=i\\,.\\ ] ] it is one of the archetypical algebras used in mathematical combinatorics , and also plays a fundamental role in the study of the harmonic oscillator in quantum mechanics . for the purposes of the present paper , as we will present in this section the algebra",
    "may also be interpreted as one of the simplest conceivable subalgebras of the rule algebras @xmath12 !",
    "we will present the analysis of this algebra in some detail , since it will serve as a first _ a posteriori _ consistency check for our rule algebra constructions , in particular by comparing it to the results of blasiak et al .",
    "+ according to our definition of the rule algebra @xmath12 , a realization of the hw algebra may be specified via the identifications @xmath487 note that if we only study the algebra generated by these specific rule algebra elements ( and not its representations ) , the type @xmath13 of the rule algebra @xmath12 is immaterial , because the generating rule algebra elements only involve vertex transformations , while the four types of rule algebra differ only in their treatment of edge transformations ( this general property of the rule algebras will be further elaborated upon in section  [ sec : structuretheory ] ) .",
    "we will thus in the following for brevity denote `` the '' rule algebraic realization of the hw algebra by @xmath488 , dropping the explicit mention of the type @xmath13 ( we will return to the distinction between the four types of hw algebra in the rule algebraic formulation in  @xcite , where we will study the interplay between the type of the rule algebra @xmath12 and different special cases of representations of the subalgebra @xmath489 ) . + we will now reproduce the analysis of blasiak et al .",
    "@xcite in terms of the rule algebraic realization @xmath490 of the heisenberg - weyl algebra . to this end",
    ", we also define the _ heisenberg - weyl rule diagram algebra _ @xmath491 as the subalgebra of @xmath15 spanned by the primitive basis diagrams @xmath492      let us first study the properties of the hw rule diagram algebra @xmath491 .",
    "it is evident from the definitions that the only nontrivial composite of the generators of @xmath491 is given by @xmath493 or diagrammatically @xmath494 in particular , we have that all other conceivable compositions of the basis elements only have contributions along trivial matches , whence if we denote as usual by @xmath495 the contributions to a composition @xmath177 along nontrivial matches , we obtain an extremely simple `` multiplication table '' for @xmath491 : @xmath496 noticing that coincidentally all generators of @xmath491 are _ primitive basis diagrams _ and invoking the isomorphism between the universal enveloping algebra @xmath402 and the rule diagram algebra , we immediately obtain the _ normal ordered form _ for an arbitrary element of @xmath497 via employing the relation of the universal enveloping algebra @xmath498 $ ] repeatedly , and by choosing the partial order @xmath499 more explicitly : @xmath500 where we define that @xmath501 , and where the coefficients @xmath502 are called the _ normal ordering coefficients_. therefore , we have in particular also that ( applying the isomorphism back to the rule diagram algebra ) @xmath503 notice that for the case of the hw diagram algebra , the chosen total order of basis elements is advantageous , since in the form presented above all compositions only have contributions along trivial matches . in other words :    _ the standard normal ordered form of the hw diagram algebra is one in which all elements are presented as _ superpositions _ of the basis elements @xmath504 , @xmath505 and @xmath506 ! _",
    "this observation will be taken as the fundamental idea for defining a generalized normal ordering in section  [ sec : structuretheory ] . + a very interesting computation that may be performed in the rule diagram algebra",
    "consists now in deriving a formula for the normal ordering coefficients of a composition of two normal ordered expressions in @xmath491 .",
    "due to multilinearity , it suffices to derive the explicit formula for the composition of two normal ordered expressions of the form @xmath507 where the second form of the expression follows because of  . composing thus a rule diagram @xmath508 with a rule diagram @xmath509 , @xmath510",
    "we see that the contribution of the composition along the trivial match is just the total superposition , @xmath511 where in the last step we have simply used that superpositions are totally commutative , whence we are free to present the isomorphism class as indicated .",
    "the nontrivial matches consist in forming vertex - vertex matches , whence for each such match a component @xmath512 of @xmath508 needs to be matched with a component @xmath504 of @xmath509 ( and there are no other possibilities for nontrivial matches ) .",
    "each individual matching of a component @xmath512 with a component @xmath504 simply leads to an instance of @xmath506 under composition along the match , with the remaining diagrams unaffected .",
    "moreover , since we need one - to - one matches of vertices , it is clear that we can at most form @xmath513 many such pairs , and finally all copies of @xmath512 and @xmath504 are _ indistinguishable _ ( because we work with _ isomorphism classes _ of rule diagrams ) , which may all be summarized into the following succinct formula : @xmath514 in words : there are @xmath515 possibilities to pick @xmath4 copies of @xmath505 from @xmath508 and @xmath516 possibilities to pick @xmath4 copies of @xmath504 from @xmath509 to form a match of @xmath4 vertex - vertex matches , but due to indistinguishability one has to divide the product of these numbers of possibilities by @xmath517 .",
    "we thus precisely recover from first principles the standard formula for normal ordering coefficients of the heisenberg - weyl rule diagram algebra as presented e.g.  in  ( * ? ? ?",
    "* , eq .  ( 7 ) ) .",
    "+ referring the interested readers to the work of blasiak et al .  @xcite for a first account of a diagram algebra construction for the hw algebra ( that served in fact as the starting point for the considerations presented in the current paper ) , let us conclude this subsection by very briefly specializing our general rule diagram algebra hopf algebra structures to the much simpler case of the hw diagram algebra for illustration ( explaining en passent why the hw diagram algebra is in fact such a simple special case ) .      of course ,",
    "since the hw diagram algebra @xmath491 is clearly a subalgebra of @xmath15 , we are guaranteed by virtue of the properties of @xmath15 that this subalgebra is unital and associative .",
    "the explicit demonstration of associativity of @xmath491 in the following is purely intended to illustrate in which aspects our construction is analogous to that of  @xcite .",
    "consider thus a generic triple composite of hw rule diagrams , where it w.l.o.g",
    ".  suffices to consider triple composites of normal ordered expressions : @xmath518 the big simplification that occurs here in comparison to the full rule diagram algebra compositions is that none of the diagrams @xmath519 contains any edges , which entails that all constituents @xmath271 of a given match @xmath520 are simply one - to - one pairings of vertices ( i.e.  no complications due to the delayed edge homomorphism condition arise ) . for the particular case of the diagrams @xmath519 , we analyzed earlier that the only possible nontrivial matches between two diagrams @xmath519 and @xmath521 ( @xmath522 ) consist in pairing copies of @xmath505 in @xmath519 with copies of @xmath504 of @xmath521 , whence any match",
    "@xmath520 is simply a set of three binary matches @xmath523 which consists entirely of one - to - one vertex - vertex pairings , whence we have re - derived quite directly the associativity of the hw rule diagram algebra : @xmath524      it is precisely in the coalgebra structure of @xmath491 that our rule diagram approach appears to offer some simplifications over the variant presented in  @xcite .",
    "the core heuristic of both approaches is that the coproduct should be interpreted as `` storing '' all possibilities to decompose a given object of the diagram algebra .",
    "specializing to the rule diagram algebra @xmath491 , we wish to define for the coproduct of a pure basis @xmath525 @xmath526 the counit is the empty rule diagram @xmath181 , which is by definition indecomposable , whence @xmath527 it is then an easy exercise to confirm that a normal ordered expression in @xmath491 aka a linear combination of expressions of the form @xmath528 ( which coincidentally is a superposition of the three primitive basis diagrams @xmath505 , @xmath504 and @xmath506 ) has the coproduct @xmath529 here , we have used the convention @xmath530 , and also the fact that the number of possibilities to choose @xmath4 copies of indistinguishable objects from a pool of @xmath311 ( @xmath531 ) indistinguishable objects is @xmath532 .",
    "+ in comparison , the authors of  @xcite employed a notion of `` spider - like '' diagrams for their diagram algebra , which at least visually would suggest that a given expression of the hw diagram algebra would be connected in some shape or form .",
    "we believe that our alternative formulation offers slightly more clarity in this point , emphasizing that the only nontrivial connected subdiagrams are those of the type @xmath506 .      referring the interested readers to appendix  [ app : filteredhopf ] for the full details on the filtration structure of the rule diagram algebra",
    ", the specialization to @xmath491 is particularly simple : each of the elements @xmath528 is an element of the filtration components of index at least @xmath533 , @xmath534 whence it follows directly from the explicit formula for composition and coproduct of rule diagrams of the form @xmath528 that these operations are compatible with the filtration : @xmath535 finally , by virtue of our general formula  [ eq : antipoderda ] for the antipode of a product of primitive basis diagrams @xmath536 @xmath537 and since the elements @xmath528 may be presented as products of the primitive basis diagrams @xmath504 , @xmath505 and @xmath506 , we immediately obtain that @xmath538 combining this result with our explicit formula   for the normal ordering of hw diagram algebra elements , we obtain the alternative formula @xmath539 thereby reproducing precisely the corresponding results of  @xcite .",
    "the algebra structure of @xmath489 is particularly simple , since again the only nontrivial composite of the generators occurs in the composition @xmath540 or diagrammatically @xmath541 here , in the final step we have used the commutativity of the superposition in order to bring the result into standard order .",
    "we also note the important special property @xmath542 therefore , the idea of _ normal ordering _ as presented for the hw rule diagram algebra carries over to the hw rule algebra _",
    "mutatis mutandis _ : any element of the hw rule algebra may be expressed in terms of normal ordered expressions of the form @xmath543 and since we have by definition of the insertion morphism @xmath544 that @xmath545 combined with the fact that for any type of rule algebra we have that @xmath546 we may immediately conclude that @xmath547 thereby recovering the classical result for the normal ordering coefficients of the composition of two normal ordered expressions in the hw algebra .",
    "insight into the finer structure of the rule algebras @xmath12 may be gained via following the standard approach to any algebraic theory : via the study of their _ generators _ and of the _ relations _ their compositions via the algebra compositions @xmath548 fulfill . however , unlike well - known examples of countably infinite dimensional algebras such as the multi - type heisenberg - weyl algebra ( the dimension referring to the number of generators ) , in the case of the rule algebras we shall see that the relations fulfilled already by the compositions of their generators are by far too complex in order to directly study their presentations in any way of use for applications of the framework .",
    "it will thus be quintessential to develop the structure theory of the rule algebras in terms of the study of what we call the _ generator subalgebras _ ( specified via explicit subsets of generators ) and the _ structural subalgebras _ ( which we will define as subalgebras of @xmath12 that are characterized by the structure of their elements , and which will possess comparatively simpler relations ) . + after introducing the generators of @xmath12 , we will already be able to identify some well - known algebras as certain subalgebras expressible as generator subalgebras .",
    "we will then focus on the structural subalgebras of _ graph creators and annihilators _ @xmath549 , @xmath550 , respectively , on their union @xmath551 , and also on various types of structural subalgebras characterized by their elements having equal left- and right hand side graphs . + as one very spectacular special case , we will introduce the notion of a generalization of the multi - type heisenberg - weyl algebra in the form of the algebra @xmath552 .",
    "the study of this particular subalgebra forms the basis of one of the possible approaches to combinatorial physics in the new framework , as will be presented in detail in future work .",
    "+ convention : for notational convenience , we will from hereon adopt the shorthand notations @xmath553      the following tentative table of generators @xmath554 could be seen as a sort of `` periodic table '' of the rule algebras  each entry is one of the atomic generators of the rule algebras @xmath12 , according to the idea that any rule algebra element may be realized as a term in the compositions of a number of copies of the generators or of arbitrary ( finite ) superpositions of the generators ( for the loop and edge algebras ) : @xmath555 however , as we will see in the sequel , it will turn out that the tentative list of generators as presented here is incomplete , see section  [ sec : loopalgebra]ff . +",
    "a relatively straightforward to compute part of the relations of the rule algebras consists in the _ commutation relations _ between the various generators .",
    "we will first study some natural subalgebras of the rule algebras generated by subsets of the generators , which we will refer to as _",
    "generator subalgebras_. in particular , we will demonstrate to which extent a _ presentation _ of these subalgebras may be given in the standard form of a free monoid algebra with relations , giving a first hint on the origin of combinatorial complexity in graph rewriting systems .",
    "the vertex algebra is generated by the rule algebra elements @xmath554 ( @xmath557 ) , with @xmath558 recalling the convenient shorthand notation @xmath559 for the nontrivial parts of the composition of two rule algebra elements @xmath560 , we obtain the following `` multiplication table '' for the vertex subalgebra @xmath556 : @xmath561 the data in this table does _ not _ depend on the type @xmath13 of the underlying rule algebra @xmath12 , which is why we refer to `` the '' vertex algebra . moreover , in this particular case the full set of relations that are necessary to describe the vertex algebra is already contained in the _ commutation relations _ @xmath562&=r_{\\emptyset}\\\\ [ a , i]&=a\\ , , \\quad [ i , a^{\\dag}]=a^{\\dag}\\ , .",
    "\\end{aligned}\\ ] ] all other commutators of the generators are zero .",
    "let us introduce the _ normal ordering _",
    "@xmath563 such that a generic multiple composition of the generators may by repeated use of the commutation relations   be expressed in terms of linear combinations of normal - ordered terms of the form @xmath564 in order to prove that any possible element of the rule algebras @xmath12 consisting only of discrete graph rewriting rules may indeed be generated by the three ( thus far tentative ) vertex algebra generators , we need to demonstrate finally that any possible superposition of the a finite , but arbitrary number of copies of the generators may be expressed as linear combinations in the normal ordered terms @xmath565 . to this",
    "end , notice that @xmath566 on the other hand , we have that @xmath567 whence it is straightforward to prove by induction that @xmath568 one may conveniently store the coefficients of @xmath569 in the expression for @xmath570 according to the above formula by means of the _ exponential generating function _",
    "@xmath571 whence @xmath572\\bigg\\vert_{\\lambda\\to 0}\\bigg\\vert_{z\\to i}\\,.\\ ] ] because furthermore @xmath573 the explicit formula for expressing superpositions of the generators in terms of their compositions reads @xmath574 where @xmath575\\right]\\bigg\\vert_{z\\to 0}\\,.\\ ] ] combining these relations with  , we thus obtain a formula for arbitrary normal ordered forms @xmath565 in terms of polynomials ( under multiplication with @xmath302 ) in the generators . in summary , we obtain the following theorem :    the _ vertex algebra _ @xmath576 is _ presented _ as @xmath577}{\\langle [ a , a^{\\dag}]-r_{\\emptyset } , [ a , i]-a,[i , a^{\\dag}]-a^{\\dag}\\rangle}\\,,\\ ] ] where the denominator is the ideal generated by the commutation relations  , where the notation @xmath578 $ ] denotes the _ free monoid algebra _ of arbitrary words in the generators ( with algebra operation @xmath302 ) , and where we identify @xmath579 .",
    "fixing the _ normal ordering _",
    "aka _ total order _",
    "@xmath580 on the set of generators , a generic element of @xmath576 may be expressed in terms of linear combinations of _ normal ordered terms _",
    "@xmath581    evidently , we recognize upon specialization to the subalgebra of the vertex algebra spanned by @xmath7 and @xmath6 besides the commutation relation of the heisenberg - weyl algebra presented in the previous section also the standard normal ordering prescription of the hw algebra .",
    "moreover , note that the vertex algebra @xmath576 has precisely the commutation relations of the so - called _ boson algebra _",
    "e.g.  @xcite ) , which in the physics literature is typically presented in the form @xmath582=i\\,,\\quad [ n , a]=-a\\,,\\quad [ n , a^{\\dag}]=a^{\\dag}\\,.\\ ] ] in other words , in the vertex algebra the role of what is typically called the number operator @xmath583 is played by the rule algebra element @xmath99 .",
    "interestingly , upon defining the canonical representation of the rule algebras @xmath12 on the space of graph isomorphism classes  @xcite , @xmath584 and @xmath99 in fact have precisely the same action when acting on discrete graphs only , a feature called _ @xmath585-polymorphicity_. more details will be provided in  @xcite .      in this subsection , we will consider the algebra generated by elements of the form @xmath587{images / lagenerators}}}\\right)\\,.\\ ] ] in other words , the so - called _ loop algebra _ @xmath588 is the algebra whose atomic elements are vertex preservation rules @xmath99 with @xmath589 loop creations , @xmath584 loop deletions and @xmath590 loop preservations attached .",
    "it is evident from the composition behavior of the vertex preservation rule algebra element @xmath99 as presented in   that any element of @xmath588 will be a superposition of the atomic elements of @xmath588 , that @xmath588 is closed and whence indeed a subalgebra of the rule algebras @xmath12 , and that yet again the compositions do not depend on the type @xmath13 of the respective underlying loop algebra . + to study of the loop algebra more closely , let us formulate its tentative generators as @xmath554 ( @xmath591 ) , with @xmath592 in terms of the previously introduced notations , we thus have that @xmath593 we thus obtain the `` multiplication table '' for these elements as @xmath594 these results entail that the commutation relations close on the set of the three tentative generators @xmath595 , @xmath596 and @xmath597 , expanded by the vertex preservation rule @xmath99 of the vertex algebra , which in turn commutes with all the tentative generators , @xmath598&=i\\\\ [ l,\\ell^{\\dag}]&=\\ell^{\\dag}\\,,\\quad [ \\ell , l]=\\ell\\\\ [ \\ell^{\\dag},i]&=[l , i]=[\\ell , i]=0\\ , . \\end{aligned}\\ ] ] it almost appears as if the algebra generated by @xmath595 , @xmath596 and @xmath597 is a realization of a boson algebra ( with unit element @xmath99 ) .",
    "however , as is evident from  , the loop algebra @xmath576 is much larger than a boson algebra , because it contains even for just binary compositions of the generators the higher loop terms marked in blue in  .",
    "one possibility to present these terms would be in terms of composites of the tentative generators and their superpositions , as in @xmath599 on the other hand , the special property of the atomic tentative generators of @xmath588 is that they are built on the `` backbone '' of a single vertex preservation rule , whence they to a certain extent behave under composition like discrete graph rewriting rules ( up to modifications of the loop structure of course ) .",
    "more to the point , we have the rather special properties ( for @xmath600 ) @xmath601&=\\sum_{k=1}^n [ x_{i_1},x_{j_k } ] \\uplus \\biguplus_{\\stackrel{p=1}{p\\neq k}}^n x_{j_p}\\\\ [ x_{i_1}\\uplus x_{i_2},x_{j_1}\\uplus \\dotsc \\uplus x_{j_n}]&= \\sum_{\\stackrel{p , q=1}{p\\neq q}}^2 \\sum_{r=1}^n [ x_{i_p},x_{j_r}]\\uplus x_{i_q}\\uplus\\biguplus_{\\stackrel{s=1}{s\\neq r}}^n x_{j_s}\\\\ & \\quad + \\sum_{\\stackrel{p , q=1}{p\\neq q}}^2 \\sum_{\\stackrel{r , s=1}{r\\neq s}}^n [ x_{i_p},x_{j_r}]\\uplus [ x_{i_q},x_{j_s}]\\uplus \\biguplus_{\\stackrel{t=1}{t\\neq r , t\\neq s}}^n x_{j_t}\\ , , \\end{aligned}\\ ] ] with the obvious generalization to higher numbers of superposition factors for the left entry of the commutator .",
    "we thus arrive at the slightly peculiar notion of an algebra presented in terms of a set of atomic generators , their arbitrary , but finite superpositions , and in terms of the commutation relations of the generators plus their `` expansions '' as presented in  :    the _ loop algebra _ @xmath588 is generated by the four atomic rule algebra elements @xmath602 as well as by arbitrary finite superpositions of these four generators , denoted for brevity by @xmath603 with elementary relations  .",
    "these relations are augmented by the nested commutation relations as presented in  .",
    "for example , one of these nested commutation relations expressed in the basis elements @xmath604 reads @xmath605&=\\delta_{x,\\ell^{\\dag}}\\left [ -n{\\ensuremath{\\mathcal{l}}}(m+1,n-1,p , q)-q{\\ensuremath{\\mathcal{l}}}(m , n , p+1,q-1 ) \\right]\\\\ & \\quad + \\delta_{x , l } ( m - q){\\ensuremath{\\mathcal{l}}}(m , n , p , q)\\\\ & \\quad \\delta_{x,\\ell}\\left [ m{\\ensuremath{\\mathcal{l}}}(m-1,n , p+1,q)+n{\\ensuremath{\\mathcal{l}}}(m , n-1,p , q+1 ) \\right]\\ , .",
    "\\end{aligned}\\ ] ] one could thus envision to find some sort of generalized normal ordering prescription by defining a total order on the generators @xmath604 . on the other hand , from the preceding chapters",
    "it might be alternatively envisioned to define as a basis for this algebra the generic elements @xmath606 employing the various computational relations presented earlier .",
    "+ it is quite remarkable that even for the relatively simple special case of the loop subalgebra @xmath586 we already encounter a very complicated structure , and it will be the topic of future work to determine in applications whether the relations computable via the rule algebraic framework are nonetheless useful to determine the combinatorial properties of such applications .",
    "it would depend on the particular applications at hand for the loop algebra to determine such a practical normal form , but there does not appear to exist a natural candidate on generic grounds , in clear contrast to the vertex algebra , where a normal form existed for which all composites are in fact superpositions ( up to applying commutation relations ) .",
    "a straightforward computation reveals that it is possible to obtain larger subalgebras of @xmath12 via performing the union of the generator sets of @xmath556 and @xmath586 , which results in the `` multiplication table '' of atomic generators as presented below : @xmath607 with @xmath608 as the table reveals , this subalgebra is spanned by atomic elements that consist of one of the vertex algebra elements carrying additional created , annihilated or preserved loops , and of superpositions thereof .",
    "interestingly , this is one of the simplest conceivable subalgebras of @xmath12 for which the type plays a role , indicated by @xmath609 in  .",
    "+ it would be interesting to determine whether the subalgebras @xmath610 might have some applications in the realm of statistical physics and chemical reaction systems .",
    "consider the subalgebra of @xmath12 generated by the elements @xmath554 ( @xmath612 ) , with @xmath613 we obtain yet again remarkably simple commutation relations for these tentative atomic generators , @xmath614&=i^{\\uplus\\:2}\\\\ [ e_{>},e_{>}]&=e_{>}\\,,\\quad [ e_{>},e^{\\dag}_{>}]=e^{\\dag}_{>}\\\\ [ e_{>},i]&=[e_{>},i]=[e_{>}^{\\dag},i]=0\\ , , \\end{aligned}\\ ] ] which is quite similar to the commutation relations of the atomic loop algebra generators .",
    "however , computing for example the nontrivial contributions to the composition of the tentative atomic generators @xmath615 and @xmath616 , @xmath617 it becomes immediately evident that the edge algebra is a subalgebra of @xmath12 that is generated by many more generators than the simplest atomic ones suggested via the set @xmath618 .",
    "in particular , the appearance in arbitrary size and complexity connected irreducible rule diagrams in the higher composites of the tentative generators entail that it is hopeless to find a compact presentation of this algebra in terms of a small set of generators and relations . as in the traditional descriptions of graph rewriting , this is a natural feature of graph rewriting systems , and it will depend in the particular applications at hand whether there are other ways possible to deal with this complexity or not .",
    "+ as a caveat to the general philosophy of combinatorial hopf algebras , one should thus conclude from this section as presented thus far that while it is certainly feasible for the vertex and loop subalgebras to employ ideas from ordinary combinatorics in describing graph rewriting systems based in these subalgebras , as possible for example via the techniques presented in  @xcite , more in detail work will be necessary to make `` arable '' combinatorial techniques for generic graph rewriting systems .",
    "+ in summary , these facts lie at the heart of the complexity of the study of graph rewriting systems .",
    "we will therefore in the following consider viable alternatives to the naive guess for a normal form for specific special and suitably restricted types of `` structural '' subalgebras of @xmath12 .      while all rule",
    "algebra elements are by definition of the rule algebras irreducible rule diagrams , which are by virtue of the discussion in the previous subsection ( linear combinations of ) superpositions of atomic basis rule diagrams , the atomic rule diagrams do not form a closed subalgebra for any type of rule algebra , whence thus far we could only speak of one `` structural '' subalgebra of the algebras @xmath12 , namely trivially @xmath9 itself , or of course the generator subalgebras @xmath576 , @xmath588 and @xmath619 . here , by `` structural '' subalgebra we mean a subalgebra which may be specified via giving a restriction on the structure of its elements .",
    "we will demonstrate in the following that there exist a number of interesting `` structural '' subalgebras that will play an important role in our development of the rule algebraic framework .",
    "[ [ notational - convention ] ] notational convention : + + + + + + + + + + + + + + + + + + + + + +    for brevity , in the remainder of the section we will employ the convention that we drop the source and target maps from the specifications of irreducible rule diagrams , as well as the explicit mention of the ( for irreducible rule diagrams always empty ) match morphism @xmath311 , @xmath620\\equiv ( i , o , r,\\emptyset , s_{i\\uplus o},t_{i\\uplus o})\\,.\\ ] ] the use of this convention should not lead to any confusion , since it is quite apparent by checking the typing ( three arguments versus six arguments for the full data convention , square instead of round brackets ) .      let for each graph isomorphism class @xmath623 the rule algebra elements @xmath624 and @xmath625 be defined as @xmath626)\\in{\\ensuremath{\\mathcal{r}}}_t\\\\      \\hat{g}:= \\delta([g,\\emptyset,\\emptyset])\\in { \\ensuremath{\\mathcal{r}}}_t\\ , .",
    "\\end{aligned}\\ ] ] where the notation is motivated by the fact that @xmath627 then the structural subalgebra @xmath628 is defined as the algebra spanned by the elements @xmath624 ( with one such element per isomorphism class @xmath629 ) , while the subalgebra @xmath630 is defined as the algebra generated by the elements @xmath625 ( with one such element per isomorphism class @xmath629 ) .    it is straightforward to prove the following proposition :    [ prop : structurerpm ] @xmath298 the algebras @xmath621 and @xmath622 are _ commutative subalgebras _ of the rule algebras @xmath12 and are independent of the type @xmath13 .",
    "@xmath307 let us introduce the convenient _ multiindex notations _",
    "( @xmath631 ) @xmath632 for finite products of elements of @xmath621 and @xmath622 , respectively ( which thus imposes the constraint @xmath633 ) , where @xmath634 is the set of _ isomorphism classes of connected finite graphs_. then the algebras @xmath621 and @xmath622 are presentable as _ polynomial algebras _ , @xmath635\\,,\\quad { \\ensuremath{\\mathcal{r}}}^{-}\\equiv { \\ensuremath{\\mathbb{k}}}[\\{\\hat{g}\\mid g\\in{\\ensuremath{\\mathcal{g}}}_c\\}]\\,.\\ ] ]",
    "this entails in particular that any element of @xmath621 and of @xmath622 , respectively , is of the form @xmath636 with @xmath637 , and with the constraints @xmath638    it is straightforward to verify that for all @xmath639 @xmath640 thereby proving closedness , type - independence and ( via the commutativity of the superposition operation ) the commutativity of the subalgebras @xmath621 and @xmath622 .",
    "+ each isomorphism class @xmath623 describes _ finite _ graphs that are not necessarily connected , whence a generic isomorphism class @xmath629 may be presented as @xmath641 with @xmath642 a finite set of isomorphism classes of _ connected graphs _ , and with finite multiplicities @xmath643 .",
    "but the result presented for the proof of claim @xmath298 entails immediately that @xmath644 from which the claim follows due to multilinearity of the product operation .",
    "it is at first sight somewhat surprising to find two subalgebras @xmath621 and @xmath622 that are freely presented after all the complications that we encountered with the generator subalgebras .",
    "however , upon closer inspection they are merely the analogues of the ( rather trivial ) subalgebras of the multi - type heisenberg - weyl algebra spanned by just the creation or just the annihilation operators , respectively . in the next section",
    ", we will study the effect of combining @xmath621 and @xmath622 into a joint subalgebra .",
    "[ def : rpm ] the subalgebras @xmath645 are defined as the algebras generated by the rule algebra elements @xmath646    we may make the particular structure of the subalgebras @xmath551 somewhat more explicit via the following theorem :    [ thm : rpmstruct ] let @xmath551 be defined as above .",
    "@xmath298 for all isomorphism classes of connected graphs @xmath647 , we have that @xmath648 where as usual ( for all @xmath560 ) @xmath649 are the _ contributions of compositions along nontrivial matches_. + @xmath307",
    "let @xmath650 be isomorphism classes of connected graphs .",
    "then for any nontrivial compositions of @xmath625 with @xmath651 the following _ connected commutation relations _ hold : @xmath652 where @xmath653 is the size of the automorphism group of the graph @xmath75 , and where the notations @xmath654 and @xmath655 entails that @xmath656 must be isomorphic to @xmath657 , or a proper subgraph of @xmath657 , respectively ( or else the contributions are discarded ) .",
    "the constants @xmath658 are called _",
    "structure constants_. the sums range over the nontrivially contributing matches @xmath311 .",
    "we furthermore employ the convention that for @xmath659 the notation @xmath660 stands for the graph that results by deleting from @xmath76 all vertices of @xmath75 and any edges that had one or both endpoint vertices in @xmath75 .",
    "note that in the above formulae , depending on the specific rule algebra elements at hand it may be the case that some of the @xmath661 or @xmath662 are not connected , whence the right hand sides of   may not be in the `` normal form '' in terms of formal polynomials in atomic elements of @xmath621 and @xmath622 . in those cases , one may of course easily invoke the results of proposition  [ prop : structurerpm ] to achieve the `` normal form '' if desired .",
    "+ @xmath663 the algebras @xmath551 are _ non - commutative subalgebras _ of @xmath12 for each @xmath13 .",
    "the proof follows from a straightforward application of the definitions of the elements of @xmath621 and of @xmath622 .",
    "+ the specific structure of the nontrivial compositions is _ type - dependent _ :    * in the @xmath0-type rule algebra , whenever elements @xmath625 are composed with elements @xmath651 for which @xmath664_{\\cong } } \\neq {    [ h]_{\\cong } } $ ] , this entails that the graph @xmath75 may not be completely matched to @xmath76 .",
    "but because we assumed that @xmath75 and @xmath76 are connected graphs , this entails that compositions along any nontrivial matches will have `` dangling edges '' , whence the claim follows from the fact that @xmath665 discards all such compositions ( aka maps them to @xmath666 . for the case @xmath664_{\\cong } } = {    [ h]_{\\cong } } $ ] , only matches that entirely match @xmath75 to @xmath76 will not lead to `` dangling edges '' upon application of @xmath190 .",
    "but such matches must by definition of matches then be injective partial graph homomorphisms from @xmath75 to @xmath76 . since by assumption @xmath664_{\\cong } } = {    [ h]_{\\cong } } $ ] , @xmath75 and @xmath76 are both representatives of the same graph isomorphism class , whence the set of matches that lead to nontrivial contributions for the composition in this case coincides with the set of automorphisms of @xmath75 .",
    "finally , upon composition along such a nontrivial match followed by reduction , we always obtain the empty rule diagram , whence the claim for the case @xmath667 made in   follows .",
    "* by the same type of argument , the @xmath1-variants of the compositions tolerate compositions along matches that result upon application of @xmath190 in `` dangling edges '' .",
    "more precisely , for @xmath22 rewriting , `` dangling edges '' resulting from vertex deletions are admissible , but not those resulting from vertex creations .",
    "thus , for this case we only obtain nontrivial contributions to the composition if @xmath659 .",
    "if this is the case , any match that should yield a nontrivial contribution to the composition must fully match @xmath75 into @xmath76 ; applying @xmath190 to a composition along such a match @xmath311 , we obtain the irreducible rule pre - diagram @xmath668\\in irr_{pre}({\\ensuremath{\\mathcal{d}}})$ ] , which potentially contains `` dangling edges '' resulting from deleting those vertices and edges from @xmath76 that were matched to @xmath75 . then , application of @xmath669 removes those dangling edges , resulting in the proper irreducible rule diagram @xmath670\\in irr_{pre}({\\ensuremath{\\mathcal{d}}})$ ] .",
    "the dual argument leads to the derivation of the @xmath214 algebra result , while a combination of both arguments justifies the @xmath215 result    the claim follows directly from part @xmath298 and @xmath307 of the theorem .",
    "another interesting type of structural subalgebras may be formulated via considering rule algebra elements with equal left and right hand side graphs :    the structural subalgebras @xmath673 and @xmath674 are defined ( tentatively ) to be generated by elements of the form @xmath675)\\\\          { \\ensuremath{\\mathcal{o}}}^{\\pm}_t&\\ni \\breve{o}\\equiv \\delta([o , o,\\emptyset])\\ , .",
    "\\end{aligned}\\ ] ]    with these definitions , we obtain the following important theorem :    @xmath298 we have the following contributions due to compositions along nontrivial matches of connected graphs @xmath676 and @xmath677 : @xmath678)\\\\          \\\\          \\breve{o}_1{\\circledast}_{dpo}\\breve{o}_2&:=\\delta_{o_1\\cong o_2}|aut(o_1)|\\breve{o}_1\\\\          \\breve{o}_1{\\circledast}_{spo_a}\\breve{o}_2&:=          \\delta_{o_1\\subseteq o_2}\\sum_m          \\delta([o_2,o_1\\uplus(o_2\\setminus dom(m)),\\emptyset])\\\\          \\breve{o}_1{\\circledast}_{spo_b}\\breve{o}_2&:=          \\delta_{o_2\\subseteq o_1}\\sum_m          \\delta([(o_1\\setminus im(m))\\uplus o_2,o_1,\\emptyset])\\\\          \\breve{o}_1{\\circledast}_{spo_{ab}}\\breve{o}_2&:=          \\sum_m          \\delta([(o_1\\setminus im(m))\\uplus o_2,o_1\\uplus(o_2\\setminus dom(m)),\\emptyset])\\ , ,          \\end{aligned}\\ ] ] where the sums run over the nontrivial matches @xmath311 , and where @xmath679 is the graph that results from overlapping @xmath676 with @xmath677 along the common subgraph mapped by @xmath311 . consequently , @xmath680 is a proper subalgebra of @xmath12 for all types @xmath13 , and so is @xmath672 , but for @xmath681 @xmath682 is _ not _ a proper subalgebra of @xmath12 ( since it is evidently not closed ) .",
    "@xmath307 @xmath680 and @xmath672 are _ commutative subalgebras of @xmath12_.    the argument is entirely analogous to the proof of theorem  [ thm : rpmstruct ] , whence we omit it here for brevity .",
    "+ trivially follows from the explicit formulae for the nontrivial contributions ( and from commutativity of the superposition operation ) .",
    "it is clear by definition of the subalgebras that any of their elements is generically a superposition of atomic rule diagrams of the required form . on the other hand",
    ", we have generically that superpositions always arise as the contribution along the trivial match of any two rule diagrams , whence one may e.g.  realize the superposition of two atomic rule diagrams by extracting the respective term from their composition .",
    "therefore , we have the following important result :    [ prop : connectedobs ] the subalgebras @xmath672 and @xmath680 are _ freely generated by their atomic elements _ , whence they may be presented as follows : @xmath683)\\in irr({\\ensuremath{\\mathcal{d}}})\\mid o\\in{\\ensuremath{\\mathcal{g}}}_c\\}]\\\\          { \\ensuremath{\\mathcal{o}}}^{\\pm}_{dpo}\\equiv { \\ensuremath{\\mathbb{k}}}[\\{\\delta([o , o,\\emptyset])\\}\\in irr({\\ensuremath{\\mathcal{d}}})\\mid o\\in { \\ensuremath{\\mathcal{g}}}_c\\}]\\ , ,          \\end{aligned}\\ ] ] where @xmath684 again denotes the set of isomorphism classes of _ connected _ graphs , and where notation @xmath685 $ ] denotes the _ algebra of polynomials _ in the generators with coefficients in @xmath8 and algebra operation the composition @xmath548 .",
    "this follows directly from @xmath686 whence e.g.  the superposition @xmath687 of two atomic rule diagrams @xmath688 may be realized as @xmath689 it may then happen in general that @xmath690 itself is a superposition of atomic rule diagrams .",
    "however , by the definition of @xmath691 , it is always guaranteed that the potential superposition factors in @xmath690 are _ smaller _ than the original atomic rule diagrams @xmath692 and @xmath693 , whence it is guaranteed that the process of replacing superpositions recursively via the ansatz   will eventually terminate , whence the claim follows .",
    "the structural subalgebra @xmath695 is the subalgebra generated by the basis rule algebra elements of the form @xmath696)\\in{\\ensuremath{\\mathcal{r}}}_{dpo}\\\\",
    "|v_o|&=|v_{o'}|\\,,\\ ; |e_o|:=|e_{o'}|\\ , ,      \\end{aligned}\\ ] ] where @xmath97 and @xmath697 thus are graphs of the same number of vertices and edges , but which are _ not _ necessarily isomorphic .",
    "remarkably , the basis elements of a certain subalgebra of @xmath694 , namely those elements for which @xmath698 form a commutative subalgebra of @xmath694 and play the role of _ generalized graph observables _ in the framework of the _ stochastic mechanics of @xmath0 graph rewriting _ ",
    "we refer the reader to  @xcite for the precise details , and content ourselves here with formulating the following proposition :    @xmath298 the algebra @xmath694 is _ closed _ ( and thus indeed a subalgebra of @xmath699 ) .",
    "@xmath307 the algebra of elements of the form @xmath700 is a commutative subalgebra of @xmath694 .",
    "since in the @xmath0-type rewriting the deletion of a given vertex is only possible if also all incident edges are explicitly deleted , it is immediately clear that composition of two elements of basis diagrams @xmath694 along nontrivial matches lead upon reduction where any vertices or edges effectively deleted from the output interface of one of the diagrams had to be deleted by matching them to vertices or edges of the input interface of the other diagram , whence in total we have not changed the property that the resulting reduced diagram has the same number of vertices in input and output interface , and also the same number of edges . in other words , any nontrivial composite is again an element of @xmath694 , which by multilinear extension proves the claim .",
    "+ since the rule diagrams of the form   have by definition the special property that their partial map @xmath104 is a subset ( when described as a relation ) of the identity morphism @xmath701 of the input interface , and since moreover @xmath702 for these diagrams , the diagrams are `` vertically symmetric '' , i.e.  invariant under dualization .",
    "therefore , for any two basis diagrams @xmath703 , there exists an isomorphism from the set of matches @xmath237 to the set of matches @xmath704 by virtue of the symmetry , thus proving the commutativity property . to prove that the algebra generated from @xmath705 is indeed closed , it suffices to observe that due again to the `` vertical symmetry '' , for any given composite @xmath312 we have that @xmath706 as well as `` vertical symmetry '' of the source and target of the composite s partial map , while any vertex or edge deleted from @xmath231 by matching it to vertices and edges in @xmath707 will be having a counterpart in the output of the reduced composite diagram .",
    "this entails that the reduced composite diagram is a member of @xmath705 , which concludes the proof .",
    "let us conclude the discussion of the general structure of the rule algebras @xmath12 with the following elementary observation ( the analogue of which for the case of the heisenberg - weyl algebras is a well - known fact , cf .",
    "e.g.  @xcite ) :    it is not possible to endow the rule algebras @xmath12 with the structure of a coalgebra , and consequently in particular not with the structure of a hopf algebra .",
    "it is enough to demonstrate that already for the special case of rule algebra elements that generate the heisenberg - weyl algebra , @xmath708 there can not be defined a consistent counit @xmath709 , as one may easily conclude via a short direct computation : @xmath710 here , we have used that any rule algebra element is also an element of @xmath9 , which makes the application of the counit map as defined in   possible . since",
    "on the other hand the heisenberg - weyl algebra is a subalgebra of all rule algebras @xmath12 , this means that one can not consistently define a counit for any of these algebras , and consequently also no antipode and thus no hopf algebra structures .",
    "we believe that the well - established research field of graph rewriting will profit profoundly from the novel formulation in terms of rule diagrams as presented in this paper .",
    "while it is in principle possible to formulate the rule algebras also in the more traditional category theoretical framework  @xcite , the formulation in terms of rule diagrams holds a large number of advantages : the framework is entirely intuitive , easy to implement on algorithms , leads to deep insights into the structure and combinatorics of graph rewriting , and allows to make contact with other well - established variants of descriptions of rewriting systems in the mathematical combinatorics , chemistry and statistical physics literature .",
    "we are currently finalizing a series of papers that illustrate the great utility of this new approach  @xcite , and have already presented a complete framework for graph rewriting for the case of dpo graph rewriting  @xcite .",
    "+ the three main results of this paper may be summarized as follows :    * we find a complete framework to formulate the algebras of graph rewriting for the four types of graph rewriting ( two of which are new ) , based on so - called rule diagrams .",
    "the key idea of the construction is to follow the blueprint of diagrammatic combinatorial hopf algebras to implement a notion of composition of rule diagrams , and four variants of reductions of rule diagrams to normal form in order to implement the four variants of graph rewriting algebras .",
    "* secondly , our framework allows to clearly understand the famous heisenberg - weyl algebra of annihilation and creation of indistinguishable particles ( of countably infinite types ) as a particular special case of all four types of rule algebras , thereby offering immense potential in view of applications : graph rewriting may now be seen as a direct generalization of chemical reactions , and fits perfectly well into the established statistical , combinatorial and probabilistic frameworks ! * thirdly , our work features the first steps towards a _ structural analysis _ of the rather complex rule algebras , with highlights including the notion of generators of the rule algebras , generator subalgebras and structural subalgebras , which recover the concept as graph observables from the literature as a special type of structural subalgebras , and which feature a sort of direct generalization of the hw algebra in terms of creation and annihilation of graph motives in dpo rewriting .",
    "we conclude this paper by identifying a selection of interesting future directions and applications .      while we focussed for simplicity on _ directed multigraphs _ in this paper , it is entirely straightforward to extend the rule algebraic framework in a number of interesting directions : one can handle _ undirected graphs _ by modifying the definitions of diagrams and their matches ( replacing the source and target maps in the definitions with a single endpoint map ) .",
    "one may introduce _ colors _ aka _ types _ for both vertices and edges  the only necessary modification them consists in modifying the definition of matches by adding the extra condition that only vertices and edges of the same colors / types are matchable .",
    "it is finally easily conceivable to extend the framework to include hyperedges , surfaces or higher - dimensional structured graph - like objects .",
    "a crucial aspect of the framework is the construction of the analogues of the _ canonical representation _ of the heisenberg - weyl algebra in order to complete the implementation of graph rewriting in the rule - algebraic approach .",
    "more precisely , as has been presented in  @xcite for the case of dpo rewriting and will be introduced in  @xcite for the other three types of rewriting , defining a representation of @xmath12 will amount to defining a specific endomorphism @xmath711 from @xmath12 to the endomorphisms of a vector space @xmath712 , the vector space of graph isomorphism classes .",
    "the interpretation of the representations @xmath713 might somewhat obscure for a traditional graph rewriting theorist , yet quite evident to mathematical combinatorists : applying the representation @xmath714 of a rule algebra element @xmath254 to one of the basis vectors @xmath715 will result in a linear combination of basis vectors of @xmath712 , each representing one of the possible outcomes for applying the graph rewriting rule presented by @xmath104 onto the input graph @xmath75 , with the prefactor of each basis vector @xmath716 in the output storing the number of possible ways the graph @xmath80 can be produced by applying the rule @xmath104 to the input graph @xmath75 . in this fashion , one might view the rule - algebraic approach to graph rewriting as a sort of _ combinatorial approach to concurrency_.      we would like to advertise in particular to the mathematical combinatorics audience that the rule algebras @xmath12 offer not only a mathematical structure of interest on its own , but in particular also a very direct bridge to the statistical physics , theoretical computer science and theoretical ( bio- ) chemistry literature . more precisely ,",
    "a realization of _ continuous time markov chains _  @xcite based on graph rewriting systems , so - called _ stochastic graph rewriting systems _ , is easily implementable in the new framework in a form that should be highly transparent to practitioners from theoretical disciplines .",
    "the necessary ingredients of what we call the _ stochastic mechanics of graph rewriting _ include besides the rule algebras @xmath12 also their canonical representations and a number of ingredients from the statistical physics and graph rewriting literature .",
    "we refer the interested reader to  @xcite for the precise details of dpo stochastic mechanics , and will present the full framework in  @xcite .",
    "notably , specializing to discrete graph rewriting ( extended to the case of multiple colors ) , our construction reduces to doi s second quantization description of _ chemical reaction systems _",
    "@xcite , which relies solely on the heisenberg - weyl algebra and its canonical representation .",
    "this hints at interesting novel types of stochastic dynamical systems akin to chemical reaction systems , where for example a discrete graph rewriting system representing a chemical reaction system is applied to non - discrete input graphs , or where one formulates a sort of `` graphical reaction system '' based on the rule - algebraic analogue of the heisenberg - weyl algebra for dpo rewriting as presented in section  [ sec : rahw ] .",
    "as already demonstrated in  @xcite , one of the main results of the stochastic mechanics approach will be the streamlined formulation of known results for stochastic graph rewriting systems , as well as novel mathematical results such as the generalized fragmentation theorem for the time evolution of arbitrary moments of graph observables .",
    "remarkably , the results presented in section  [ sec : structuretheory ] indicate that a direct application of ideas from analytical combinatorics to the study of graph rewriting systems appears to be of rather limited practicality .",
    "for example , even in the case of the relatively simple loop subalgebra @xmath586 it is not possible to find a compact normal form for the possible elements of @xmath586 , a prerequisite for many constructions in combinatorics . on the other hand , because of the concrete realization of stochastic graph rewriting systems in terms of stochastic mechanics , there would be a huge potential in terms of practical applications for techniques from combinatorics such as umbral calculus , coherent states and generating functions , if only they could be suitably extended .",
    "because of the aforementioned intrinsic complexity of the full rule algebra , it appears that it will in general not be possible to derive exponential generating functions for decompositions of rule diagram subalgebras , at least not via a low number of formal variables  each possible type of diagram has to be kept track of via its own formal variable , and it will in general not be the case that powers of a given formal variable correspond to an easy to interpret diagram in the class that the given formal variable should encode .",
    "it will thus pose a severe technical challenge to construct examples of subalgebras of @xmath12 that have a tractable algebro - combinatorial description .",
    "however , there exist notable exceptions to the above arguments , one of the most important classes of which consist in a very special variant of graph rewriting systems ( site - graph rewriting plus extra structures ) on which the programming language _ kappa _  @xcite is based .",
    "this motivates as a future direction the search for _ combinatorially tame graph rewriting systems_. these and other ideas will be pursued in  @xcite .",
    "for the interdisciplinary readers convenience , we briefly recall for each subsection the relevant generic mathematical background materials ( which are clearly very well - known to specialists in combinatorics ) , and also provide the proofs for the results presented in the main text .",
    "a @xmath717-algebra @xmath718 is a @xmath717-vector space @xmath26 endowed with a _ bilinear multiplication law _",
    "aka _ composition _",
    "@xmath302 , where the multiplication law is a bilinear map @xmath719 we also define the _ multiplication map _",
    "( _ convention _ : @xmath720 ) @xmath721 and the _ unit map _",
    "@xmath722 the special element @xmath723 is the ( unique ) _ unit under composition _",
    ", @xmath724 for a _ unital associative algebra _ , we require that the diagrams below commute : @xmath725    we conclude this subsection by expressing the conditions for having a unital and associative algebra in a useful graphical form , via introducing the so - called _ string diagrams _ : @xmath726 note that we implicitly defined the _ `` pessimistic arrow of time '' _ , i.e.  the order of operations is _ from top to bottom _ , which appears to be the standard convention in the mathematics literature .",
    "with these preparations , the conditions for the unital property reads @xmath727 while the associativity property is graphically expressed as @xmath728 the string diagrams are useful since , as we will see on the next subsection , they allow to express the concept of duality when defining the coalgebra structure next , and moreover will simplify expressing the complicated consistency conditions for the bi- and hopf algebra structures .",
    "[ def : algmorph ] let @xmath26 and @xmath27 be unital associative @xmath717-algebras .",
    "a @xmath717-linear map @xmath729 is called a _ @xmath717-algebra homomorphism _ if the following two diagrams commute : @xmath730 @xmath731 here , we have introduced the symbol @xmath732 for a @xmath717-algebra morphism @xmath729 .",
    "[ def : algtensorproduct ] let @xmath26 and @xmath27 be unital associative @xmath717-algebras . then - tensor product explicit . ]",
    "`` the '' _ tensor product algebra _",
    "@xmath733 is defined via @xmath734 or in slightly more detail @xmath735 the unit map of @xmath736 is defined via @xmath737 and @xmath736 thus defined is a unital associative @xmath717-algebra .",
    "+ evidently , this construction applies in particular also to the case @xmath738 .",
    "it was necessary to introduce these two definitions , since the coalgebra structures we are about to discuss are concepts related to tensor products of the algebra under scrutiny with itself , in the definition of which the concept of homomorphisms of unital associative algebras was necessary . with these preparations , we may now introduce the following definitions :    [ def : coalg ] a _ counital coassociative @xmath717-coalgebra _",
    "@xmath739 is a @xmath717-vector space equipped with two bilinear maps , the _ coproduct _ ( in abstract _ sweedler s notation _ ) @xmath740 and the _ counit _ , @xmath741 where @xmath742 is the ( unique ) unit under the coproduct , viz @xmath743 in order for @xmath744 to be co - unital and co - associative , the following diagrams must commute :            in order to prove the _ counital property _",
    ", recall that the counit map @xmath709 maps any diagram but the empty diagram @xmath181 to zero , hence in particular for any basis diagram @xmath142 : @xmath747where @xmath138 is an arbitrary rule diagram , and where the notation @xmath748 stands for the set of decompositions of the rule diagram @xmath140 ( which contains in particular the elements @xmath749 and @xmath750 ) .",
    "an analogous argument holds for @xmath751 .",
    "+ the cocommutativity follows simply from the definition of the set of possible decompositions @xmath752 of any given rule diagram @xmath140 , since for any given decomposition @xmath753 , the decomposition @xmath754 is included as well .",
    "this then implies that the property of coassociativity follows trivially  it is immaterial whether one lists the set of all possible double decompositions by further decomposing the entries @xmath755 of the @xmath753 or by further decomposing the entries @xmath756 of @xmath753 .",
    "the counit map of @xmath760 is defined via @xmath761 and @xmath760 thus defined is a counital coassociative @xmath717-coalgebra .",
    "+ evidently , this construction applies in particular also to the case @xmath762 .",
    "let @xmath26 be an algebra ( or a coalgebra ) .",
    "then the _ twist map _",
    "@xmath763 is defined as @xmath764 an algebra @xmath26 is said to be _ commutative _ if the following diagram commutes : @xmath765 a coalgebra @xmath744 is said to be _ cocommutative _ if the following diagram commutes : @xmath766            the respective conditions from either viewpoint as well as the relevant string diagrams are presented in table  [ tab : bialg ] , where we have introduced the auxiliary definitions @xmath772 and where the notion of coalgebra homomorphisms is defined via dualizing the string diagrams in definition  [ def : algmorph ] of algebra homomorphisms .",
    "it is evident that due to linearity and the underlying @xmath8-vector space structure of @xmath15 , all compatibility conditions have to be checked only on the basis elements of the vector spaces , i.e.  on basis diagrams @xmath774 ( with @xmath140 ) and on @xmath260 .",
    "+ the compatibility of the counit @xmath709 with the multiplication map @xmath770 follows from @xmath775 for all @xmath776 .",
    "here , in the step marked @xmath252 we have used the identity @xmath777 which follows from the fact that @xmath8 is a field and from @xmath778 .",
    "+ dually , the consistency of the coproduct with the unit map follows from @xmath779      this leaves to prove the by far less obvious consistency condition between the multiplication and the comultiplication map .",
    "we need to show that @xmath781 let us begin by recalling from the definition of decompositions of rule diagrams that a generic rule diagram is a _ superposition of indecomposable aka primitive rule diagrams _ , whence in particular @xmath782_{\\cong}\\,,\\quad { \\mathfrak{d}}_b=\\left[\\biguplus_{j=1}^{n_b}{\\mathfrak{d}}(b_j)\\right]_{\\cong}\\,.\\ ] ] we may thus sort any possible _ match _ between @xmath168 and @xmath169 into the form ( upon fixing suitable representatives for @xmath168 and @xmath169 ) @xmath783 if we first compose @xmath168 with @xmath169 , this amounts to @xmath784 whenever for a particular match",
    "@xmath785 an entry @xmath786 is nontrivial ( i.e.  when @xmath787 ) , this entry `` fuses '' the indecomposable superposition factors @xmath788 and @xmath789 into an _",
    "rule diagram upon performing the composition operation .",
    "hence we have generically that @xmath790_{\\cong}\\,.\\ ] ] more precisely , some of the @xmath791 will generically coincide with some of the original superposition factors @xmath788 and @xmath789 ( precisely if these factors had not been involved in the match ) , while the remaining factors will be composites of some of the factors @xmath788 and @xmath789 along the nontrivial entries @xmath787 of the given match @xmath785 . in any event , once we apply the coproduct to such a generic term of the multiplication operation , the set of possible decompositions coincides with the set of all partitions into two unordered sets of the superposition factors in  .",
    "+ after a moment s thought , we may convince ourselves that listing all possible decompositions of all possible composites of @xmath168 with @xmath169 is entirely equivalent to the following operation : first , list ( independently of one another ) all possible decompositions of @xmath168 and @xmath169  these amount as per our previous arguments to all possible partitions into two sets of the superposition factors as described by  .",
    "thus we have that @xmath792 applying the map @xmath793 ( which amounts to swapping the middle two factors ) followed by the map @xmath794 , we finally obtain @xmath795 now , recalling that the coproduct is cocommutative , the above contributions in fact amount to tensor products of products of _ all possible subsets _ of superposition factors of @xmath168 and @xmath169 !",
    "for example , the four simplest possible contributions ( those for which two of the subsets are empty ) read as follows : @xmath796 the first and the last term amount to the trivial part of the coproduct of @xmath797 , while the second and third term amount to two of the generically possible contributions to the coproduct of @xmath798 generically , all possible terms in @xmath799 may be sorted by the superposition factors @xmath788 and @xmath789 contained in the left factor of the tensor product , which hence amounts to listing all possible compositions of those factors as induced by the matches @xmath785 together with all possible composites of the remaining superposition factors in the right factor of the tensor product .",
    "this completes the proof .",
    "suppose @xmath800 is an associative unital algebra .",
    "then we saw from the consistency condition for associativity , viz @xmath801 that for an associative algebra @xmath26 it makes sense to define `` the '' triple product of @xmath26 via choosing one of the possible realizations , which w.l.o.g .",
    "is customarily chosen as @xmath802 by induction , associativity implies that it makes sense to choose any of the possible realizations of the higher multiple multiplication maps to represent `` the '' multiple multiplications , which motivates the following definition :    [ def : nfoldmult ] let @xmath803 be an associative unital algebra .",
    "then the _ @xmath4-fold multiplication maps _ are defined as @xmath804 which moreover induces the definition of the _ @xmath4-fold products _",
    "[ def : connfilt ] a bialgebra @xmath809 is called _ filtered _ if there exists an _",
    "increasing @xmath810-indexed filtration _ @xmath811 compatible with the bialgebra structure , in the sense that the following equations hold true : @xmath812moreover , if @xmath813 , then @xmath126 is called a _",
    "connected filtered bialgebra_.      [ prop : coalg2 ] for any @xmath814 with @xmath111 , we may write the coproduct of @xmath7 in the form @xmath815 thus in particular @xmath816 the map @xmath817 is coassociative only on @xmath818 ( unlike @xmath348 , which is coassociative on all of @xmath126 ) .",
    "we have moreover that the maps - fold ( co-)multiplications differ from those of  @xcite by a shift of the index by @xmath819 relative to loc cit .   in our notation , the index indicates how many copies of the algebra are involved , i.e. @xmath820 ] @xmath821 send @xmath822 into @xmath823 .",
    "the first two statements follow directly from the definitions of @xmath348 and @xmath817 . to prove the third statement , observe that for any @xmath814 ( @xmath111 ) @xmath824 where in the step marked @xmath252 we have used that @xmath825 for @xmath826 , which annihilates all contributions for which @xmath827 . for @xmath828 ,",
    "we have entirely analogously that @xmath829 where again @xmath817 applied to the first factor of @xmath830 annihilates all contributions with @xmath831 ; incidentally , at @xmath832 one only has the contribution @xmath833 , hence the sum over @xmath429 effectively starts at @xmath834 .",
    "we thus have the induction hypothesis that for all @xmath814 with @xmath111 @xmath835 for the induction step @xmath836 , notice that @xmath837 application of @xmath817 to the first factors of the contributions as presented in   annihilates all contributions for which @xmath838 , hence the nonzero contributions are those for which @xmath839 , which necessitates @xmath840 , @xmath841 and so forth , thereby proving the claim .          [",
    "def : prim ] let @xmath126 be a connected filtered bialgebra",
    ". then the elements @xmath845 for which @xmath846 are called _ primitive elements _ of @xmath126 . the subspace of primitive elements of @xmath126 is given by @xmath847 .",
    "the rule diagram algebra @xmath356 is a _ connected , filtered bialgebra _",
    ", with @xmath848 and where the subspace @xmath358 is in general given by the linear span of all rule diagrams with at most @xmath4 indecomposable subdiagrams .",
    "in particular , the _ primitive basis diagrams of @xmath15 _ are the basis vectors associated to those rule diagrams that are neither empty nor decomposable , whence @xmath849    it is evident that due to @xmath850 @xmath181 indeed qualifies as an element of the filtered component @xmath851 . as already presented in the proof of theorem  [ thm : bialgrd ] ,",
    "the composite of two arbitrary rule diagrams , say , @xmath168 with @xmath852 indecomposable subdiagrams and @xmath169 with @xmath853 indecomposable subdiagrams , only contains contributions with maximally @xmath854 subdiagrams , and depending on the possible matches also of a lower number of subdiagrams , which is compatible with the statements @xmath855 dually , given a generic rule diagram @xmath856 with @xmath857 connected components , it is trivially clear that the coproduct of @xmath858 , being defined as the sum over tensor products of basis vectors associated to the unordered bipartitions of @xmath859 , naturally has the required structure @xmath860      [ defconv ] let @xmath861 be a connected filtered bialgebra , and let @xmath126 be an arbitrary @xmath8-algebra ( which we call the target algebra ) .",
    "then the _ convolution product _",
    "@xmath862 on the space @xmath863 of linear maps from @xmath861 to @xmath126 is defined for any maps @xmath864 as @xmath865      [ prop : convprod ] let @xmath861 be a connected filtered bialgebra and @xmath126 an arbitrary @xmath8-algebra as before .",
    "then the linear map @xmath866 is a _",
    "unit for the convolution product _",
    ", @xmath867 moreover , the set @xmath868 endowed with the convolution product is a _ group_.    to prove that @xmath869 is a unit for the convolution product @xmath302 , it is convenient to introduce _ sweedler s notation _",
    "@xmath870 for the coproduct of any @xmath871",
    ". then for any @xmath872 , it follows by direct computation that @xmath873 where we have used that @xmath874 for @xmath875 .",
    "the computation to demonstrate that @xmath876 is entirely analogous . + to prove that @xmath877 endowed with the convolution product @xmath302 is a group , it is first of all evident that @xmath877 is closed under the convolution product  we have by definition that @xmath878 hence it suffices to verify that for any two maps @xmath879 , for which by definition of @xmath877 @xmath880 we also have that @xmath881 : @xmath882the more difficult part of the proof that @xmath883 is a group consists in demonstrating that there exist _ inverses _ for any @xmath884 . using the geometric series @xmath885 as a blueprint , we may formally construct , the first term in the formal series is given by the unit , which in this case is the map @xmath869 . ] the inverse of a map @xmath884 via ( for any @xmath871 ) @xmath886 this formal series is only well defined if we can demonstrate that it only contains finitely many terms for any given element @xmath871 .",
    "it is at this point that the requirement of @xmath861 being a connected filtered hopf algebra comes into play : if @xmath887 , connectedness of @xmath861 implies that @xmath888 ( for some @xmath889 ) , for which we evidently have that @xmath890 ( since @xmath891 and @xmath892 for any @xmath884 )",
    ". it immediately follows ( since @xmath884 and by definition of @xmath869 ) that @xmath893 and thus ( using that @xmath877 is closed under composition ) also that @xmath894 therefore , @xmath895 hence we have proved that @xmath896 .",
    "it remains to prove that @xmath897 is well - defined also for an arbitrary element @xmath871 . to this end , consider w.l.o.g .",
    "an element @xmath898 for @xmath111 not equal to @xmath899 , i.e.  an element of @xmath900 ( any other element would be proportional to @xmath899 by virtue of connectedness of @xmath861 ) .",
    "according to proposition  [ prop : coalg2 ] , such an element has the coproduct @xmath901 a direct computation reveals that @xmath902 and hence @xmath903 it is straightforward to verify by induction that ( cf .",
    "definitions  [ def : nfoldmult ] and  [ def : nfoldcomult ] for the @xmath364-fold multiplications @xmath904 and @xmath364-fold comultiplications @xmath905 ) @xmath906 where @xmath907 is defined by replacing all occurrences of @xmath908 in @xmath905 by @xmath909 .",
    "but for any @xmath910 ( @xmath111 ) we have according to corollary  [ corr : tildedeltaann ] that @xmath911 which entails that @xmath912 in other words , @xmath913 is given by a _",
    "finite _ series and thus evidently well - defined , which concludes the proof .",
    "[ def : hopf ] a _ hopf algebra _",
    "@xmath914 is a @xmath8-bialgebra @xmath861 equipped with a linear map @xmath915 called the _",
    "antipode _ such that the following diagram commutes : @xmath916 in other words , @xmath372 is a _ left and right inverse of the linear map @xmath917 under the convolution product @xmath862 _ :",
    "@xmath918      [ corr : bialdcfhopf ]",
    "let @xmath919 be a connected filtered @xmath8-bialgebra .",
    "then it is also a hopf algebra , @xmath920 , with antipode @xmath372 given according to   ( via the special case @xmath921 and @xmath922 ) by @xmath923                  pawel blasiak , gerard h.  e. duchamp , allan  i. solomon , andrzej horzela and karol  a. penson , _ combinatorial algebra for second - quantized quantum theory _",
    ", advances in theoretical and mathematical physics * 14 * ( 2010 ) , no .  4 , 12091243 .",
    "simon castellan , pierre clairambault , sylvain rideau and glynn winskel , _ http://iso.mor.phis.me/publis/games_and_strategies_as_event_structures.pdf[games and strategies as event structures ] _ , submitted at lmcs .",
    "vincent danos , jrme feret , walter fontana , russell harmer , jonathan hayman , jean krivine , chris thompson - walsh and glynn winskel , _ graphs , rewriting and pathway reconstruction for rule - based models _ ,",
    "lipics - leibniz international proceedings in informatics , vol .  18 , schloss dagstuhl - leibniz - zentrum fuer informatik , 2012 .          hartmut ehrig , reiko heckel , martin korff , michael lwe , leila ribeiro , annika wagner and andrea corradini , _ algebraic approaches to graph transformation - part ii : single pushout approach and comparison with double pushout approach _ , in rozenberg @xcite , pp .  247312 .",
    "hartmut ehrig , michael pfender and hans  jrgen schneider , _ graph - grammars : an algebraic approach _",
    ", 14th annual symposium on switching and automata theory , iowa city , iowa , usa , october 15 - 17 , 1973 , 1973 , pp .  167180"
  ],
  "abstract_text": [
    "<S> the concept of diagrammatic combinatorial hopf algebras in the form introduced for describing the heisenberg - weyl algebra in  @xcite is extended to the case of so - called rule diagrams that present graph rewriting rules and their composites . </S>",
    "<S> the resulting rule diagram algebra may then be suitably restricted in four different ways to what we call the rule algebras , which are non - commutative , unital associative algebras that implement the algebra of compositions of graph rewriting rules . </S>",
    "<S> notably , our framework reveals that there exist two more types of graph rewriting systems than previously known in the literature , and we present an analysis of the structure of the rule algebras as well as a form of poincar - birkhoff - witt theorem for the rule diagram algebra . </S>",
    "<S> our work lays the foundation for a fundamentally new way of analyzing graph transformation systems , and embeds this very important concept from theoretical computer science firmly into the realm of mathematical combinatorics and statistical physics . </S>"
  ]
}