{
  "article_text": [
    "to detect a light signal attenuated at the single - photon level  @xcite , the single - photon avalanche diode ( spad ) is of widespread use .",
    "spads have been employed to detect stars feeble light  @xcite , to perform a sharp optical time - domain reflectometry  @xcite and in the vast majority of quantum key distribution ( qkd ) realizations reported thus far  @xcite , both in optical fibres and in free space .",
    "in particular , fibre - based qkd at the wavelength of @xmath0  nm , is an emerging technology which promises a high security level in telecommunications while retaining quite a high transmission rate . in this wavelength range ,",
    "the spad features quantum efficiencies up to @xmath1  @xcite and trigger rates of more than 1  ghz  @xcite .",
    "let us briefly describe some particular aspects of the spad .",
    "first , in order to increase the detector s gain , the detector is operated in the so called `` geiger mode '' , where a reverse bias voltage higher than the detector s breakdown voltage is applied .",
    "if , despite the high gain , the dark count rate is low , the spad can be operated in `` free running '' mode ; this usually happens at wavelengths close to the visible range , e.g. 800 nm . if the dark count rate is high , as it happens in the infrared domain , e.g. at wavelengths of 1550 nm , then the spad is usually run in `` gated mode '' , where the bias voltage is raised above the breakdown voltage only for a short period of time ( the gate ) , when the photon to be detected is expected to arrive .",
    "this requires that the spad is well synchronized with the light source and the rest of the acquisition system .",
    "another important point to consider is that the dark count rate can be increased by a non zero afterpulse probability : a detection event is given in the spad by an avalanche of electric charges , some of which can remain trapped in the junction and can be released in the following gates , thus giving rise to additional counts not corresponding to the arrival of new photons . to reduce the afterpulse probability , an afterpulse blocking electronics  @xcite is usually added to the spad with the aim of `` freezing '' it after the emission of an avalanche , for a time interval decided in advance by the operator .",
    "for example , one of the most popular single - photon detector in the third telecom window , the id201 from idq  @xcite , features an afterpulse probability going to nearly zero in about 4  @xmath2s .",
    "this entails that , in order to minimize dark counts , a blocking time of at least 10  @xmath2s should be applied to this detector . during the blocking time",
    ", the detector is not capable to detect single photons anymore .",
    "hereafter , we generically define `` dead time '' any interval of time in which the spad looses its single - photon sensitivity . this can be due either to the natural response of the detector or to the afterpulse blocking circuit",
    ". moreover , we focus on a spad run in gated mode , suitable for working in a high - noise regime , leaving the free - running mode analysis for a future work . in order to use a gated - mode spad ,",
    "it is necessary to prepare an acquisition system capable of sending a trigger to it , read its output in a synchronized way and write the result into a memory location .",
    "however , during the preparation of such a system , we realized that a few problems arise when the triggering rate of the acquisition system is higher than the inverse of detector s dead - time .",
    "this situation is much more widespread than commonly believed .",
    "in fact , the acquisition system is usually much faster than the spad and its triggering rate coincides with the maximum rate allowed by the detector .",
    "for instance , the same id201 mentioned above , accepts a maximum trigger rate of 8  mhz , which is much higher than the 100  khz corresponding to the inverse of the dead - time value given above , i.e. 10  @xmath2s .",
    "one problem related to a spad running at its maximum trigger rate and with a non - zero dead - time , is the readout . if the acquisition system tries to read the spad during the dead - time period it only collects a sequence of futile counts which do not correspond to true detection events .",
    "the removal of these counts by a postprocessing algorithm is simple but very inefficient , time- and memory - consuming . a second , more important , problem is that when two or more spads are present in the same detection apparatus , one detector can be active while the other is blind .",
    "this happens , e.g. , when one of the two detectors registers a photon and enters the dead - time period while the other does not register any photon and remains active .",
    "this situation can be exploited to control the detectors of the receiving unit , as described in  @xcite .",
    "furthermore , in a wholly passive way , this flaw can be exploited to threaten the security of the qkd technology , by making the key distilled by the users not perfectly random and not entirely secret , as we shall show .",
    "we group these security breaches under the name of `` self - blinding '' , because they are caused mainly by an improper use of the equipment by the legitimate users . in this paper",
    "we describe an acquisition system that allows for a proper triggering of single - photon detectors .",
    "we use an fpga - based electronics to disable not only the trigger driving the spad gates but also the one driving the readout and the write up of the data to the memory . hence useless data are no more registered by the acquisition system ; the memory is better organized and the postprocessing procedures require a shorter time .",
    "moreover the triggering technique can be easily extended to two or more detectors , so to avoid self - blinding .",
    "the paper is organized as follows . in section",
    "[ sec : real_time_trig ] we describe our technique and apply it to a single spad . in section",
    "[ sec : pair - det - risk - qkd ] we consider the situation with a pair of spads and describe the security risks connected to self - blinding . in section  [ sec : exp - coinc ]",
    "we apply our technique to a real setup and demonstrate its effectiveness .",
    "section  [ sec : conclusion ] is left for concluding remarks .",
    "the trigger - disabling acquisition system is schematically shown in figure  [ fig_scheme ] .",
    "the main element of the circuit is the clock buffer ( clk buf ) with clock enable ce input ( bottom part of the figure ) .",
    "its specifications are given in  @xcite .",
    "this buffer drives the clock output which in turn is connected to the detector s trigger input and memory clock input . in normal regime ,",
    "the d  flip - flop ( ffd ) is reset ; the output is inverted and then fed into the clock buffer so the trigger clock is simply transferred from the input to the output and then to the detector .",
    "when a positive detection occurs , the rising edge of the spad s avalanche drives the change in the ffd output , thus disabling the main clock and enabling the counter .",
    "the spad and the memory will not see any trigger in this state . the ffd remains in this state until it is reset .",
    "the asynchronous reset occurs after a given number of main clock cycles , depending on the counter and the binary comparator ( comp ) level indicated as cmp  value in fig .",
    "[ fig_scheme ] .",
    "all the circuitry is realized in an fpga board ( xilinx sp605 ) .",
    "the trigger - disabling circuit has a main constraint i.e. the response time - interval @xmath3 that goes from the spad avalanche to the clk buf must be smaller than the inverse of the trigger rate @xmath4 : @xmath5 if this condition is not fulfilled , the trigger pulses continue to arrive at the detector until the clock buffer succeeds in disabling the trigger",
    ". this would result in maximal frequency limitation or in one or more futile zeroes registration by the qkd apparatus s cache memory .",
    "several factors contribute to the total response time of the feedback loop : the detector response ( 28  ns for id200/id201  @xcite , which are the spads used in our setup ) , the length of cables ( 8  ns ) and circuit inside fpga ( 2  ns ) .",
    "this sets a maximum limit for the trigger - disabling technique with our current electronics at 26  mhz , which is much above the maximal trigger rate for id201 .",
    "shortening the total response time would increase the maximal frequency of the circuit .",
    "however , among the above delays , only the one caused by cables can be decreased easily without changing any other piece of hardware .    in order to demonstrate the circuit working",
    ", we applied our electronics to a real setup , composed by a laser source ( picoquant ldh - p-1550 ) triggered at 4  mhz , an optical attenuator , which fixes the average photon number at @xmath6 , and a spad id201 set at 2.5  ns gate and 10% efficiency . in this configuration , we analyzed the percentage of cache memory occupied by useful triggers over a total duration of 12 hours  @xcite .",
    "the results are plotted in fig .",
    "[ fig : triggers ] .     and @xmath7 , providing a percentage of 83.4% .",
    "nine hundred samples were taken in 12 hours  @xcite.,width=288 ]    if trigger - disabling is applied , the cache memory is occupied by useful data only , entailing that all the triggers sent to the spad have been effectively used for a meaningful acquisition . by consequence ,",
    "the trigger - percentage per cache reaches the maximum , 100% . on the contrary , if the disabling technique is not applied , the total amount of useful counts per cache varies according to the photon emission probability and detector dead - time",
    ". in particular , a lower percentage corresponds to a situation with more counts by the spad , i.e. to a higher intensity arriving at the detector .",
    "in fact , the more counts at the spad , the higher the number of futile zeroes present in the cache memory .",
    "any futile zero must be removed from the cache which causes that the percentage of useful triggers remains significantly lower than 100% .",
    "there are two ways of removal , either by post - processing or by disabling the trigger before it arrives to the spad . in any case",
    "the post - processing consumes more time than a hardware solution  @xcite .",
    "further performance analysis shows that the amount of removed triggers from cache depends on the product of the average photon number @xmath2 and detector quantum efficiency @xmath8 .",
    "in fact , the probability of a positive detection per each light pulse is given by @xmath9 .",
    "each time a pulse is detected , we have 1 useful trigger and @xmath10 useless triggers , which fall inside the detector s dead time .",
    "these triggers have to be removed , either by post - processing or by disabling the trigger before it arrives to the spad . in any case , given @xmath11 total triggers arriving at the measuring setup and @xmath12 positive detections , the percentage of useful triggers is given by : @xmath13 the average number of positive detection @xmath14 is found through a numerical simulation .",
    "the result is directly substituted in eq .   to find the average percentage @xmath15 as function of @xmath2 and @xmath8 .",
    "the parameters of the simulation were the following : @xmath16 , @xmath7 , @xmath17 , @xmath18 , resulting in @xmath19 and @xmath20 .",
    "this last value has been used in fig .",
    "[ fig : triggers ] to plot the dotted curve corresponding to the theoretical model .",
    "the number of useful triggers per block of cache memory fluctuates in time .",
    "short - term fluctuations are caused by detector s random behavior while long - term fluctuation are caused by an imperfect photon source whose intensity fluctuates .",
    "the trigger - disabling technique makes the amount of useful triggers per block of cache memory independent of these factors , as showed in fig .",
    "[ fig : triggers ] , because only useful triggers are present in that case .",
    "the technique described in the previous section can be fruitfully implemented when two or more spads are used at the same time , for instance in experiments where coincidence detection is important , or in qkd implementations , where each detector is assigned with a logical value of one bit , ` 0 ' or ` 1 ' , and with a measurement basis , @xmath21 or @xmath22 .",
    "the sequence of the bits will constitute , after a classical distillation procedure , the secret quantum key used for secure telecommunications .    for the moment we consider a practical setup with only two detectors , which we call respectively @xmath23 and @xmath24 , assigned with the value ` 0 ' or ` 1 ' of the key bit .",
    "such a description well adapts to what routinely happens in qkd implementations when , e.g. , the bb84 protocol  @xcite is performed with an active choice of the basis ( see e.g.  @xcite and  @xcite ) . in this case",
    "it is crucial for security that both detectors are active or inactive at the same time .",
    "if one detector is active and the other one is blind , e.g. during the dead - time following a positive detection event , then a security risk comes about  @xcite .    in the standard scenario of qkd there are two main users , traditionally called alice ( the transmitter ) and bob ( the receiver ) , who try to communicate privately over an insecure quantum channel , plus one eavesdropper , eve , who aims to steal information from the channel .",
    "eve can use any means allowed by the laws of physics to reach her goal .",
    "she can also exploit an imperfection of the setup to her own advantage .",
    "for example in  @xcite it is described how to exploit the detectors dead - time to hack a particular qkd setup when the detectors are used in free - running mode .",
    "the same technique , which is a variant of the `` faked - state attack ''  @xcite , can be adapted to hack also a setup based on gated - mode detectors , if a narrow temporal selection inside the gate is effected by the users to further clean their quantum signal  @xcite .",
    "this technique , though very powerful , requires an active intervention by eve , who has to carefully design her light pulses and synchronize them with those transmitted by alice to bob .",
    "furthermore , it is not effective against a qkd setup based on gated - mode detectors in which there is no temporal selection inside the gate . in that case",
    ", the eavesdropping described in  @xcite would cause an abnormal number of double counts , easily detectable by the legitimate users .    in the following ,",
    "we restrict our attention to such a kind of qkd setup , using gated - mode spads with no temporal filter inside the gate .",
    "we describe a totally _ passive _ action by eve which is sufficient to create a security risk for the communication .",
    "our aim is not to provide an attack which gives eve 100@xmath25 of the information sent by alice ; we only want to show that some extra bit could possibly be captured by eve without the legitimate users being aware of that .",
    "let us focus then on the typical situation of self - blinding : at bob s side one detector is active while the other one is blind .",
    "this can happen in a qkd setup with a trigger rate higher than the inverse of detector s dead - time , which we define here as @xmath26 .",
    "after the whole quantum communication is completed , bob announces on a public channel the addresses corresponding to his non - vacuum counts ; all the remaining addresses are associated to vacuum counts and are discarded by the users .",
    "eve will register all the counts announced by bob , in particular those which correspond to qubits distant in time less than @xmath26 .",
    "all these bits will be necessarily anti - correlated .",
    "in fact , suppose that at a certain time @xmath27 detector @xmath23 fires and bob registers a ` 0 ' .",
    "if a second event occurs at time @xmath28 with @xmath29 , it must come necessarily from @xmath24 , because @xmath23 is in its dead - time period .",
    "so bob will see a ` 1 ' .",
    "if another count occurs at time @xmath30 with @xmath31 it must necessarily be a ` 0 ' , and so on .",
    "the net result will be that with a small , but non - zero , probability there will be in the final key groups of bits which are anti - correlated ( e.g. 1010101 ... ) rather than perfectly random .",
    "this is already a security breach in the theory of qkd .",
    "in fact , the two requisites for unconditional secure communication are",
    "( i ) that the final key should be random and ( ii ) that it should be known only to the legitimate users  @xcite .",
    "so the first requisite here is violated .",
    "now we want to show that also the second requisite of security can be violated by the passive strategy described above , i.e. some bits of the final key can be learned by eve without alice and bob being aware of that .",
    "in fact , after the addresses of the non - vacuum counts have been announced , the standard description of qkd  @xcite prescribes that alice and bob proceed with two classical procedures known as error correction ( ec )  @xcite and privacy amplification ( pa )  @xcite .",
    "ec aims at correcting potential errors ( i.e. different bits ) in the users final keys . during this",
    "procedures a few bits are revealed on public by the users to localize and finally correct the errors .",
    "eventually the wrong bits and their positions will be known to eve too . with pa ,",
    "the users are supposed to reduce eve s knowledge about these bits to nearly zero .",
    "however it can happen that some of these bits fall into a group which contains anti - correlated bits , e.g. 10101 . in that case",
    "it is plain that eve will immediately know all the members of the group as soon as she knows a single bit of the group .",
    "hence the pa will erase eve s knowledge about the single bit revealed , but not her knowledge about the remaining bits .",
    "the attack just described is entirely passive , as it is the result of a bad setup configuration by the users .",
    "for this reason we called it _",
    "self - blinding_. as already mentioned , self - blinding can occur when detector s dead - time is _ higher _ than the inverse of the trigger rate : @xmath32 the truer this inequality , the easier the self - blinding mechanism .",
    "it is worth noting that the above self - blinding condition , eq .  , is easy to fulfill",
    ", so it could represent a common mistake when using the spads .",
    "the reason is that one usually sets the electronics for a long dead - time , to reduce the after - pulses , and at the same time for a high trigger speed , to increase the final transmission rate .",
    "one solution against self - blinding is to slow down the triggering rate of the qkd apparatus , until eq .",
    "is no more satisfied , but this dramatically reduces the total efficiency of the system .",
    "another possibility is to remove all the bits featuring a temporal distance less than @xmath26 by post - processing , but this can be very time - consuming . also , one could resort to alternative descriptions of qkd  @xcite in which the bits for ec are encrypted , so the positions of the errors will be not known to eve at all .",
    "but this solves only the second flaw , not the first , i.e. , the bits of the final key would still be not purely random .",
    "our solution is based on hardware .",
    "we simply apply the trigger - disabling technique to guarantee that bob s detectors are both active or both inactive at the same time .    in the next section",
    "we describe how this can be put into practice and present the experimental results obtained with this technique .",
    "in order to disable the triggering clock in case of a pairwise detector configuration we used a modified version of the circuit shown in fig .  [ fig_scheme ] .",
    "we connected both detectors outputs to the clock input port c of ffd through an or gate , and fed their trigger input with the same signal coming from clock output .    to show the effectiveness of the trigger - disabling technique we applied the electronics to a real setup composed by two spads , one id201 , as before , and one id200 .",
    "both detectors are triggered at 4  mhz .",
    "we notice that the id201 detector is one of the receiving units in the `` all - vienna '' qkd system  @xcite , used in two recent quantum networks  @xcite . according to what reported in ref .",
    "@xcite , the system s average trigger rate was of 415  khz .",
    ".   entails that self - blinding becomes important for that setup if a dead - time longer than 2.4  @xmath2s is used . on the other side ,",
    "the id200 detector was used in the qkd system described in  @xcite , and in the setup for the asymmetric feedback adopted in  @xcite . in ref .",
    "@xcite the trigger rate was 2.5  mhz and the dead - time 10  @xmath2s , so the self - blinding could have had an influence in that case .",
    "however , it should be noted that the qkd protocol used was not the bb84 but rather the lm05  @xcite , in which the two detectors are not directly associated to the logical bit value .",
    "hence the above analysis is not directly applicable to this case .    in the present paper s experiment we studied two figures of the apparatus ,",
    "i.e. , the frequency of coincidence counts and the randomness of the final key . in both cases",
    "we employed a light with intensity higher than the single - photon level , to simulate the detectors response under the eve attack described above . in the previous experiment",
    "the value of @xmath2 was about @xmath33 .",
    "now it is @xmath34 .    in order to see the frequency of coincidence counts , we collected more than @xmath35 events .",
    "we registered @xmath36 of coincidences with trigger disabling on and only @xmath37 with trigger disabling off .",
    "this confirms that our technique reduces the probability of a self - blinding , because the two detectors are always operational together .",
    "notice that the coincidence rate is not 100% even when trigger disabling is on , because the light is not intense enough .",
    "a much more intense light would cause 100% coincidence counts if the trigger disabling is on , but could also damage the very sensitive spad .    on a second step we monitored the randomness of the strings obtained from detectors when trigger disabling was either on or off .",
    "specifically we assigned a click from detector @xmath23 ( @xmath24 ) and no click from detector @xmath24 ( @xmath23 ) with the value ` 0 ' ( ` 1 ' ) , and collected all the values so to form two strings , one corresponding to on and one to off .",
    "two short sequences extracted from such strings are reported in fig .",
    "[ fig : rand - nonrand ] ;     firing and @xmath24 not firing ( empty circles ) or @xmath24 firing and @xmath23 not firing ( filled circles ) . _ top panel _ : a sequence of clearly non - random events , obtained when the trigger - disabling technique was off .",
    "the alternate occurrence of empty and filled circles is apparent . _",
    "bottom panel _ : a sequence of events looking like random , obtained when the trigger - disabling technique is on .",
    "the occurrence of relatively long sequences of empty and filled dots together with short sequences witnesses the random - like nature of the string . the events with both detectors firing have been removed for explicative purposes . for the measurement we employed a light with average photon - number @xmath34.,title=\"fig:\",width=264 ] +   firing and @xmath24 not firing ( empty circles ) or @xmath24 firing and @xmath23 not firing ( filled circles ) . _ top panel _ : a sequence of clearly non - random events , obtained when the trigger - disabling technique was off .",
    "the alternate occurrence of empty and filled circles is apparent . _",
    "bottom panel _ : a sequence of events looking like random , obtained when the trigger - disabling technique is on .",
    "the occurrence of relatively long sequences of empty and filled dots together with short sequences witnesses the random - like nature of the string . the events with both detectors firing have been removed for explicative purposes . for the measurement we employed a light with average photon - number @xmath34.,title=\"fig:\",width=264 ] +    the empty ( filled )",
    "circles correspond to the value ` 0 ' ( ` 1 ' ) .",
    "the difference is quite apparent .",
    "when trigger disabling is off ( upper string ) , the sequence is clearly non random , since almost always a single 0 is followed by a single 1 , and viceversa . on the contrary , when trigger disabling is on ( lower sequence ) , the occurrence of a 0 or a 1 is much less foreseeable .",
    "also , the presence of relatively long sub - strings filled with all 0 s or 1 s , is an additional evidence of a random behavior .",
    "note that while non - randomness can be easily demonstrated , for true randomness of finite sequences is not that easy since it does not exist a decisive test in this respect .",
    "nevertheless we performed the dieharder statistical tests  @xcite on our strings , most of which were passed by the on string and none was passed by the off string .",
    "it could be argued that our choice @xmath34 is somewhat unusual in a qkd setup , where one has more often @xmath38 .",
    "our choice is motivated by the purpose of showing clearly in the experiment the effect of self - blinding .",
    "when @xmath2 is smaller , the consequences of self - blinding are smaller too , but they do not disappear as there still remains a non zero probability to find blocks in the final key containing anti - correlated , non random , bits .",
    "we introduced a fpga - driven technique to run a single - photon avalanche diode at its maximum trigger rate , regardless of dead - time limitation .",
    "while in standard situations some care should be paid when the trigger rate is higher than the inverse of dead - time , with our technique this hindrance is removed by a trigger - disabling loop which stops the trigger to and from the spad until it has properly recovered from the dead - time period .",
    "the presented circuit can also serve as a simple dead - time generator for single - photon detectors which are produced without their own generator .",
    "because of the absence of any futile counts , our technique is especially useful in case of implementation in embedded qkd systems as in this case one needs to record a huge amount of results in a limited local memory . moreover the technique allows to remove completely the post - processing related to futile zeroes discarding , what results in shorter acquisition time .",
    "we provided an experimental evidence of our technique applied to a single spad , by reporting the trigger distribution in the acquisition system s cache memory .",
    "additionally , we adapted the acquisition system to a pair of detectors used in coincidence and found an evident advantage of the trigger - disabling technique over a standard trigger usage in terms of distribution of the coincidence counts and in terms of randomness of the final string distilled from detectors counts .",
    "moreover , it removes at the roots the possibility of an external attack based on `` self - blinding '' , because it forces the detectors in the receiving unit to be active or inactive altogether , at the same time .",
    "the proposed technique can be easily implemented in many different setup by just adding a piece of electronics in front of a standard spad , thus making the detector response time as short as possible .",
    "this paves the way to a future straightforward implementation of this technique in integrated commercial qkd apparatuses .",
    "we thank l. widmer for his feedback on idq detectors and r. kumar for useful discussions .",
    "m.l . is supported by the @xmath39  grant c.f .",
    "81001910439 .      here and throughout the paper",
    "the reader can think to a single - photon - attenuated light as to a coherent state with mean photon - number @xmath40 , as the one coming , e.g. , from an attenuated pulsed diode - laser .",
    "this is a standard intensity in several qkd systems .                                  in our setup",
    "the post - processing was performed on a microblaze architecture and took 99@xmath25 of the total acquisition time .",
    "this means that of 12 hours only about 7 minutes were really necessary for the experiment , the remaining time being devoted to post - processing .",
    "even though post - processing can be certainly done in a more efficient way , it can not compete with the zero time assured by our hardware solution ."
  ],
  "abstract_text": [
    "<S> modern single - photon detectors based on avalanche photodiodes offer increasingly higher triggering speeds , thus fostering their use in several fields , prominently in the recent area of quantum key distribution . </S>",
    "<S> it is well known that after a detection event these detectors loose their single photons sensitivity for a period of time generically called _ </S>",
    "<S> dead time_. if the acquisition system connected to the detector is not properly designed , and the triggering function not properly controlled , efficiency issues can arise when the triggering rate is faster than the inverse of detector s dead - time . </S>",
    "<S> moreover , when this happens with two or more detectors used in coincidence , a security risk called `` self - blinding '' can jeopardize the distribution of a secret quantum key . </S>",
    "<S> + in this paper we introduce a trigger - disabling circuitry based on an fpga - driven feedback loop , so to avoid the above - mentioned inconveniences . in the regime of single - photon - attenuated light , the electronics dynamically accept a trigger only after detectors complete recovery from dead - time . </S>",
    "<S> this technique proves useful to work with detectors at their maximum speed and to increase the security of a quantum key distribution setup .    </S>",
    "<S> single - photon detector , quantum key distribution , quantum hacking , detector blinding , detector dead - time , high - speed detection , quantum efficiency . </S>"
  ]
}