{
  "article_text": [
    "algorithmic problems concerning groups are a classical topic in algebra and theoretical computer science . since the pioneering work of dehn from 1910 @xcite , decision problems like the word problem or the generalized word problem ( which is also known as the subgroup membership problem since it asks whether one can decide if a given group element belongs to a given finitely generated subgroup ) have been intensively studied for various classes of groups .",
    "a first natural generalization of these classical decision problems is the submonoid membership problem : given a finite set @xmath0 of elements of @xmath1 and an element @xmath2 , does @xmath3 belong to the submonoid generated by @xmath0 ?",
    "notice that @xmath3 has finite order if and only if @xmath4 is in the submonoid generated by @xmath3 and so decidability of the submonoid membership problem lets one determine algorithmically the order of an element of the group @xmath1 .",
    "a recent paper on the submonoid membership problem is margolis , meakin , and unik  @xcite .",
    "a further generalization is the rational subset membership problem : for a given rational subset @xmath5 of a group @xmath1 and an element @xmath6 it is asked whether @xmath7 .",
    "the class of rational subsets of a group @xmath1 is the smallest class that contains all finite subsets of @xmath1 , and which is closed under union , product , and the kleene hull ( or kleene star ; it associates to a subset @xmath8 the submonoid @xmath9 generated by @xmath5 ) .",
    "equivalently , it consists of the all subsets of @xmath1 recognizable by finite automata .",
    "rational subsets in arbitrary groups and monoids are an important research topic in language theory , see , e.g. , @xcite .",
    "the rational subset membership problem generalizes the submonoid membership problem and the the generalized word problem for a group , because every finitely generated submonoid ( and hence subgroup ) of a group is rational .",
    "it is easy to see that decidability of the rational subset membership problem transfers to finitely generated subgroups .",
    "grunschlag has shown that the property of having a decidable rational subset membership problem is preserved under finite extensions , i.e. , if @xmath1 has a decidable rational subset membership problem and @xmath10 , where the index of @xmath1 in @xmath11 is finite , then @xmath11 also has a decidable rational subset membership problem @xcite .",
    "kambites , silva , and the second author @xcite proved that the fundamental group of a finite graph of groups  @xcite with finite edge groups has a decidable rational subset membership problem provided all vertex groups have a decidable rational subset membership problem .",
    "in particular , this implies that decidability of the rational subset membership problem is preserved by free products , see also @xcite .",
    "the main result of this paper is to characterize the decidability of the submonoid membership problem and the rational subset membership problem for graph groups .",
    "in particular we provide the first example , as far as we know , of a group with a decidable generalized word problem that does not have a decidable submonoid ( and hence rational subset ) membership problem .    a _ graph group _",
    "@xcite @xmath12 is specified by a finite undirected graph @xmath13 , which is also called an _ independence alphabet _ ( or _ commutation graph _ ) .",
    "the graph group @xmath12 is formally defined as the quotient group of the free group generated by @xmath14 modulo the set of all relations @xmath15 , where @xmath16 .",
    "graph groups are a group analogue to trace monoids ( free partially commutative monoids ) , which play a prominent role in concurrency theory @xcite .",
    "graph groups are also called _",
    "free partially commutative groups _",
    "@xcite , _ right - angled artin groups _ @xcite , and",
    "semifree groups _",
    "they are currently a hot topic of interest in group theory , in particular because of the richness of the class of groups embeddable in graph groups .",
    "for instance , the bestvina - brady groups , which were used to distinguish the finiteness properties @xmath17 and @xmath18  @xcite ( and were also essential for distinguishing the finiteness properties fdt and fht for string rewriting systems  @xcite ) , are subgroups of graph groups .",
    "crisp and wiest show that the fundamental group of any orientable surface ( and of most non - orientable surfaces ) embeds in a graph group  @xcite .",
    "another class of groups that embed into graph groups are fundamental groups of finite state complexes @xcite .",
    "algorithmic problems concerning graph groups have been intensively studied in the past , see , e.g. , @xcite . in @xcite",
    "it was shown that the word problem for a graph group can be decided in linear time ( on a random access machine ) . a recent result of kapovich , weidmann , and",
    "myasnikov @xcite shows that if @xmath13 is a chordal graph ( i.e. , if @xmath13 does not have an induced cycle of length at least 4 ) , then the generalized word problem for @xmath12 is decidable . on the other hand , a classical result of mihailova @xcite states that already the generalized word problem for the direct product of two free groups of rank 2 is undecidable .",
    "note that this group is the graph group @xmath12 , where the graph @xmath13 is a cycle on 4 nodes ( also called @xmath19 ) .",
    "in fact , mihailova proves a stronger result : she constructs a _ fixed _",
    "subgroup @xmath11 of @xmath20 such that it is undecidable , whether a given element of @xmath20 belongs to @xmath11 .",
    "recently , it was shown by kambites that a graph group @xmath12 contains a direct product of two free groups of rank 2 if and only if @xmath13 contains an induced @xmath19  @xcite .",
    "this leaves a gap between the decidability result of @xcite and the undecidability result of mihailova @xcite .",
    "in @xcite it is shown that the rational subset membership problem is decidable for a free product of direct products of a free group with a free abelian group .",
    "such a group is a graph group @xmath12 , where every connected component of @xmath13 results from connecting all nodes of a clique with all nodes from an edge - free graph . on the other hand ,",
    "the only undecidability result for the rational subset membership problem for graph groups that was known so far is mihailova s result for independence alphabets containing an induced @xmath19 .    in this paper",
    ", we shall characterize those graph groups for which the rational subset membership problem is decidable : we prove that these are exactly those graph groups @xmath12 , where @xmath13 is a transitive forest ( theorem  [ t main ] ) .",
    "the graph @xmath13 is a transitive forest if it is the disjoint union of comparability graphs of rooted trees .",
    "an alternative characterization of transitive forests was presented in @xcite : @xmath13 is a transitive forest if and only if it neither contains an induced @xmath19 nor an induced path on 4 nodes ( also called @xmath21 ) .",
    "graph groups @xmath12 , where @xmath13 is a transitive forest , have also appeared in @xcite : they are exactly those graph groups which are subgroup separable ( the case of @xmath21 appears in  @xcite ) . recall that a group @xmath1 is called subgroup separable if , for every finitely generated subgroup @xmath22 and every @xmath23 there exists a normal subgroup @xmath24 having finite index such that @xmath25 .",
    "subgroup separability implies decidability of the generalized word problem .",
    "one half of theorem  [ t main ] can be easily obtained from a result of aalbersberg and hoogeboom @xcite : the problem of deciding whether the intersection of two rational subsets of the trace monoid ( free partially commutative monoid ) @xmath26 is nonempty is decidable if and only if @xmath13 is a transitive forest .",
    "now , @xmath27 for two given rational subsets @xmath28 if and only if @xmath29 in the graph group @xmath12 .",
    "hence , if @xmath13 is not a transitive forest , then the rational subset membership problem for @xmath12 is undecidable .",
    "in fact , we construct a fixed rational subset @xmath30 such that it is undecidable whether @xmath7 for a given group element @xmath31 .",
    "the converse direction in theorem  [ t main ] is an immediate corollary of our theorem  [ t dec ] , which is one of the main group theoretic results of this paper .",
    "it states that the rational subset membership problem is decidable for every group that can be built up from the trivial group using the following four operations : ( i ) taking finitely generated subgroups , ( ii ) finite extensions , ( iii ) direct products with @xmath32 , and ( iv ) finite graphs of groups with finite edge groups .",
    "note that the only operation that is not covered by the results cited earlier is the direct product with @xmath32 .",
    "in fact , it seems to be an open question whether decidability of the rational subset membership problem is preserved under direct products with @xmath32 .",
    "hence , we have to follow another strategy .",
    "we will introduce a property of groups that implies the decidability of the rational subset membership problem , and which has all the desired closure properties .",
    "our proof of theorem  [ t dec ] uses mainly techniques from formal language theory ( e.g. , semilinear sets , parikh s theorem ) and is inspired by the methods from @xcite .",
    "it should be noted that due to the above reduction from the intersection problem for rational trace languages to the rational subset membership problem for the corresponding graph group , we also obtain an alternative to the quite difficult proof from @xcite for the implication `` @xmath13 is a transitive forest @xmath33 intersection problem for rational subsets of @xmath26 is decidable '' .    in section  [ s submonoid ]",
    "we consider the _ submonoid membership problem _ for groups .",
    "we prove that for an amalgamated free product @xmath34 such that @xmath35 is a finite proper subgroup of @xmath1 and @xmath11 and there exist @xmath36 , @xmath37 with @xmath38 , the rational subset membership problem is recursively equivalent to the submonoid membership problem ( theorem  [ t submonoid ] ) .",
    "an analogous result is proved for certain hnn extensions with finite associated subgroups . as a consequence",
    "we obtain that the rational subset membership problem is recursively equivalent to the submonoid membership problem for a group with two or more ends that is either torsion - free or residually finite ( corollary  [ c tf or rs ] ) . using similar techniques",
    ", we are also able to prove that the submonoid membership problem is undecidable for the graph group @xmath12 , where @xmath13 is @xmath21 ( theorem  [ t p4 ] ) .",
    "the result of  @xcite shows that this graph group does have a decidable generalized word problem , thereby giving our example of a group with a decidable generalized word problem but an undecidable submonoid membership problem . together with mihailova",
    "s undecidability result for @xmath19 and our decidability result for transitive forests ( theorem  [ t main ] ) it also follows that the submonoid membership problem for a graph group @xmath12 is decidable if and only if @xmath13 is a transitive forest ( corollary  [ c submonoid graph group ] ) .",
    "another consequence of our results is that the rational subset membership problem for groups is recursively equivalent to the submonoid membership problem if and only if a free product of groups with decidable submonoid membership problems has a decidable submonoid membership problem .",
    "we assume that the reader has some basic knowledge in formal language theory ( see , e.g. , @xcite ) and group theory ( see , e.g. , @xcite ) .",
    "let @xmath14 be a finite alphabet .",
    "we use @xmath39 to denote a disjoint copy of @xmath14 .",
    "let @xmath40 .",
    "define @xmath41 ; this defines an involution @xmath42 , which can be extended to the free monoid @xmath43 by setting @xmath44 . for a word @xmath45 and @xmath46",
    "we denote by @xmath47 the number of occurrences of @xmath48 in @xmath49 . for a subset @xmath50 ,",
    "we denote by @xmath51 the projection of the word @xmath49 to the alphabet @xmath52 , i.e. , we erase in @xmath49 all symbols from @xmath53 .",
    "let @xmath54 be the set of all mappings from @xmath14 to @xmath55 . by fixing an arbitrary linear order on the alphabet @xmath14",
    ", we may identify a mapping @xmath56 with a tuple from @xmath57 . for a word @xmath45 , the _ parikh image _",
    "@xmath58 is defined as the mapping @xmath59 such that @xmath60(a ) = |w|_a$ ] for all @xmath61 . for a language @xmath62 ,",
    "the parikh image is @xmath63 . for a set @xmath64 and @xmath65 let @xmath66 , where @xmath67 denotes the restriction of @xmath68 to @xmath52 .",
    "we also need a notation for the composition of erasing letters and taking the parikh image .",
    "so , for @xmath62 and @xmath65 , let @xmath69 ; it may be viewed as a subset of @xmath70 .",
    "a special case occurs when @xmath71 .",
    "then either @xmath72 ( if @xmath73 ) or @xmath74 is the singleton set consisting of the unique mapping from @xmath75 to @xmath55 .",
    "a subset @xmath76 is said to be _ linear _ if there are @xmath77 such that @xmath78 , i.e.  @xmath79 is a translate of a finitely generated submonoid of @xmath80 .",
    "a _ semilinear _",
    "set is a finite union of linear sets .",
    "let @xmath81 be a context - free grammar , where @xmath82 is the set of nonterminals , @xmath52 is the terminal alphabet , @xmath83 is the start nonterminal , and @xmath84 is the finite set of productions .",
    "for @xmath85 we write @xmath86 if @xmath87 can be derived from @xmath88 by applying a production from @xmath89 . for @xmath90 , we define @xmath91 and @xmath92 . parikh s theorem states that the parikh image of a context - free language is semilinear @xcite .",
    "we will allow a more general form of productions in context - free grammars , where the right - hand side of a production is a regular language over the alphabet @xmath93 .",
    "such a production @xmath94 represents the ( possibly infinite ) set of productions @xmath95 . clearly",
    ", such an extended context - free grammar can be transformed effectively into an equivalent context - free grammar with only finitely many productions .",
    "let @xmath96 be a monoid .",
    "the set @xmath97 of all _ rational subsets _ of @xmath96 is the smallest subset of @xmath98 , which contains all finite subsets of @xmath96 , and which is closed under union , product , and kleene hull ( the kleene hull @xmath9 of a subset @xmath99 is the submonoid of @xmath96 generated by @xmath5 ) . by kleene s theorem ,",
    "a subset @xmath62 is rational if and only if @xmath5 can be recognized by a finite automaton .",
    "if @xmath96 is generated by the finite set @xmath14 and @xmath100 is the corresponding canonical monoid homomorphism , then @xmath101 if and only if @xmath102 for some @xmath103 . in this case",
    ", @xmath5 can be specified by a finite automaton over the alphabet @xmath14 .",
    "the rational subsets of the free commutative monoid @xmath80 are exactly the semilinear subsets of @xmath80 @xcite .",
    "let @xmath1 be a finitely generated group and let @xmath14 be a finite group generating set for @xmath1 .",
    "hence , @xmath104 is a finite monoid generating set for @xmath1 and there exists a canonical monoid homomorphism @xmath105 .",
    "the language @xmath106 is called the _ word problem _ of @xmath1 with respect to @xmath14 , i.e. , @xmath107 consists of all words over the alphabet @xmath104 which are equal to @xmath108 in the group @xmath1 .",
    "it is well known and easy to see that if @xmath52 is another finite generating set for @xmath1 , then @xmath107 is decidable if and only if @xmath109 is decidable .",
    "the _ submonoid membership problem _ for @xmath1 is the following decision problem :    input : a finite set of words @xmath110 and a word @xmath111 .",
    "question : @xmath112 ?",
    "note that the subset @xmath113 is the submonoid of @xmath1 generated by @xmath114 .",
    "if we replace in the submonoid membership problem the finitely generated submonoid @xmath115 by the finitely generated subgroup @xmath116 , then we obtain the _ subgroup membership problem _ , which is also known as the _ generalized word problem _ for @xmath1 .",
    "this term is justified , since the word problem is a particular instance , namely with @xmath117 .",
    "a generalization of the submonoid membership problem for @xmath1 is the _ rational subset membership problem _ :    input : a finite automaton @xmath35 over the alphabet @xmath104 and a word @xmath118 .",
    "question : @xmath119 ?",
    "note that @xmath119 if and only if @xmath120 .",
    "since @xmath121 is again a rational language , the rational subset membership problem for @xmath1 is recursively equivalent to the decision problem of asking whether @xmath122 for a given finite automaton @xmath35 over the alphabet @xmath104 .",
    "it should be noted that for all the computational problems introduced above the decidability is independent of the chosen generating set for @xmath1 .    in the rational subset ( resp .",
    "submonoid ) membership problem , the rational subset ( resp .",
    "submonoid ) is part of the input .",
    "non - uniform variants of these problems , where the rational subset ( resp .",
    "submonoid ) is fixed , have been studied as well .",
    "more generally , we can define for a subset @xmath123 the _ membership problem for @xmath0 within @xmath1 _ :    input : a word @xmath111 .",
    "question : @xmath124 ?    the _ free group _",
    "@xmath125 generated by @xmath14 can be defined as the quotient monoid @xmath126 as usual , the _ free product _ of two groups @xmath127 and @xmath128 is denoted by @xmath129 .",
    "we will always assume that @xmath130 .",
    "an _ alternating word _ in @xmath129 is a sequence @xmath131 with @xmath132 , @xmath133 , and @xmath134 .",
    "its length is @xmath135 .",
    "the alternating word @xmath131 is _ irreducible _ if @xmath136 for every @xmath137 .",
    "every element of @xmath129 can be written uniquely as an alternating irreducible word .",
    "we will need the following simple fact about free products :    [ l free product 1 ] let @xmath131 be an alternating word in @xmath138 .",
    "if @xmath139 in @xmath129 , then one of the following three cases holds :    1 .",
    "@xmath140 2 .",
    "there exists @xmath141 such that @xmath142 in @xmath129 3 .",
    "there exist @xmath143 , @xmath144 , and @xmath145 such that @xmath146 , @xmath147 in @xmath148 , and @xmath149 in @xmath129 for all @xmath150 .",
    "( 86,8)(0,-2 ) ( 0,0)(6,0)(6,6)(0,6 ) ( 0,0)(6,6)@xmath151 ( 6,0)(20,0)(20,6)(6,6 ) ( 4.7,0)@xmath152 ( 20,0)(26,0)(26,6)(20,6 ) ( 20,0)(6,6)@xmath153 ( 26,0)(40,0)(40,6)(26,6 ) ( 24.7,0)@xmath152 ( 40,0)(46,0)(46,6)(40,6 ) ( 40,0)(6,6)@xmath154 ( 46,0)(60,0)(60,6)(46,6 ) ( 44.7,0)@xmath152 ( 60,0)(66,0)(66,6)(60,6 ) ( 60,0)(6,6)@xmath155 ( 66,0)(80,0)(80,6)(66,6 ) ( 64.7,0)@xmath152 ( 80,0)(86,0)(86,6)(80,6 ) ( 80,0)(6,6)@xmath156    case ( 3 ) from the lemma is visualized in figure  [ figure case 3 ] for @xmath157 .",
    "shaded areas represent alternating sequences , which are equal to @xmath108 in @xmath129 .",
    "the non - shaded blocks are either all from @xmath127 or from @xmath128 , and their product equals @xmath108 in @xmath127 or @xmath128 , respectively .",
    "we prove the lemma by induction on @xmath135 , the case @xmath140 being trivial .",
    "so assume that @xmath158 .",
    "since @xmath139 in @xmath159 , there must exist @xmath160 with @xmath161 .",
    "if @xmath162 or @xmath163 , then we are in case ( 2 ) from the lemma .",
    "hence , we may assume that @xmath164 and that @xmath165 .",
    "it follows @xmath166 in @xmath129 .",
    "since the alternating word @xmath167 has length @xmath168 , we can apply the induction hypothesis to it . if @xmath169 , i.e. , @xmath170 , then we obtain case ( 3 ) from the lemma ( with @xmath171 , @xmath172 , and @xmath173 ) .",
    "if a non - empty and proper prefix of @xmath174 equals @xmath108 in the group @xmath129 , then the same is true for @xmath131 .",
    "finally , if case ( 3 ) from the lemma applies to the alternating word @xmath175 , then again the same is true for @xmath131 .",
    "notice that ( 3 ) in lemma  [ l free product 1 ] can only occur when @xmath135 is odd .",
    "assume that @xmath176 and @xmath177 are groups and @xmath178 is an isomorphism .",
    "the _ amalgamated free product _",
    "@xmath179 is the quotient @xmath180 without loss of generality we may assume that @xmath181 and that @xmath182 is the identity map on @xmath35 ; in this situation we briefly write @xmath183 for @xmath179 . every element of @xmath183 can be written as a word @xmath184 , where @xmath185 , @xmath186 , if @xmath187 then @xmath188 , if @xmath189 then @xmath190 , and @xmath191 for all @xmath192 .",
    "such a word is called a _ reduced sequence_.",
    "the normal form theorem for amalgamated free products states that every nonempty reduced sequence represents a nontrivial element of @xmath183 ( * ? ? ?",
    "* chapter  iv , theorem  2.6 ) .",
    "if @xmath1 is a group and @xmath193 is an isomorphism between subgroups @xmath194 of @xmath1 , then the _ hnn extension _",
    "@xmath195 , with base @xmath1 , stable letter @xmath196 , and associated subgroups @xmath194 is the quotient group @xmath197 where @xmath196 is the generator of an infinite cyclic group .",
    "every element of @xmath195 can be written as a word @xmath198 , where @xmath185 , @xmath199 , and @xmath200 .",
    "such a word is referred to as a _ reduced sequence _ if it contains no factor of the form @xmath201 or @xmath202 with @xmath203 , respectively @xmath204 .",
    "lemma  ( * ? ? ?",
    "* chapter  iv ) says that if @xmath205 is a reduced sequence with @xmath206 , then @xmath49 represents a nontrivial element of @xmath195",
    ".    we will also consider fundamental groups of finite graphs of groups , which is a group theoretic construction generalizing free products , free products with amalgamation , and hnn - extensions , see e.g. @xcite .",
    "we omit the quite technical definition . in order to deal with the rational subset membership problem for graph groups ,",
    "free products suffice .      in the following",
    "we introduce some notions from trace theory , see @xcite for more details .",
    "an _ independence alphabet _ is just a finite undirected graph @xmath207 without loops .",
    "hence , @xmath208 is an irreflexive and symmetric relation .",
    "the _ trace monoid _",
    "@xmath26 is defined as the quotient @xmath209 elements of @xmath26 are called _ traces_. note that @xmath210 is a submonoid of @xmath26 in case @xmath211 is an _ induced subgraph _ of @xmath13 .",
    "the latter means that @xmath65 and @xmath212 .",
    "traces can be represented conveniently by _ dependence graphs _ , which are node - labelled directed acyclic graphs .",
    "let @xmath213 be a word , where @xmath214 .",
    "the vertex set of the dependence graph of @xmath88 is @xmath215 and vertex @xmath216 is labelled with @xmath214 .",
    "there is an edge from vertex @xmath216 to @xmath217 if and only if @xmath218 and @xmath219 .",
    "then , two words define the same trace in @xmath26 if and only if their dependence graphs are isomorphic .",
    "the set of minimal ( resp .",
    "maximal ) elements of a trace @xmath220 is @xmath221 ( resp .",
    "@xmath222 ) . a _ trace rewriting system _ @xmath223 over @xmath26 is just a finite subset of @xmath224 @xcite .",
    "we can define the _ one - step rewrite relation _ @xmath225 by : @xmath226 if and only if there are @xmath227 and @xmath228 such that @xmath229 and @xmath230 in @xmath26 .",
    "a trace @xmath196 is _ irreducible _ with respect to @xmath223 if there does not exist a trace @xmath88 with @xmath231 .",
    "the _ graph group _",
    "@xmath12 is defined as the quotient @xmath232 if @xmath13 is the empty graph , i.e. , @xmath233 , then we set @xmath234 ( the trivial group ) .",
    "note that @xmath235 implies @xmath236 in @xmath12 .",
    "thus , the graph group @xmath12 can be also defined as the quotient @xmath237 here , we implicitly extend @xmath238 to @xmath239 by setting @xmath240 if and only if @xmath16 for @xmath241 and @xmath242 . note that @xmath26 is a rational subset of @xmath12 .",
    "define a trace rewriting system @xmath223 over @xmath243 as follows : @xmath244 one can show that for every trace @xmath245 , there exists a unique _ normal form _",
    "@xmath246 such that @xmath247 and @xmath246 is irreducible with respect to @xmath223 .",
    "moreover , for all @xmath248 , @xmath249 in @xmath12 if and only if @xmath250 ( in @xmath243 ) @xcite .",
    "this leads to a linear time solution for the word problem of @xmath12 @xcite .",
    "if the graph @xmath13 is the disjoint union of two graphs @xmath251 and @xmath252 , then @xmath253 .",
    "if @xmath13 is obtained from @xmath251 and @xmath252 by connecting each element of @xmath254 to each element of @xmath255 , then @xmath256 .",
    "graph groups were studied e.g. in @xcite ; they are also known as _ free partially commutative groups _ @xcite , _ right - angled artin groups _",
    "@xcite , and _ semifree groups _ @xcite .",
    "( 41,10 ) ( a1)(0,0 ) ( a2)(10,0 ) ( a3)(10,10 ) ( a4)(0,10 ) ( a1,a2 ) ( a3,a2 ) ( a3,a4 ) ( a1,a4 )    ( b1)(20,5 ) ( b2)(27,5 ) ( b3)(34,5 ) ( b4)(41,5 ) ( b1,b2 ) ( b2,b3 ) ( b3,b4 )    a _ transitive forest _ is an independence alphabet @xmath13 such that there exists a forest @xmath257 of rooted trees ( i.e. , a disjoint union of rooted trees ) with node set @xmath14 and such that for all @xmath258 with @xmath259 : @xmath16 if and only if @xmath48 and @xmath260 are comparable in @xmath257 ( i.e. , either @xmath48 is a proper descendant of @xmath260 or @xmath260 is a proper descendant of @xmath48 ) .",
    "it can be shown that @xmath13 is a transitive forest if and only if @xmath13 does not contain an induced subgraph , which is a cycle on 4 nodes ( also called @xmath19 , see figure  [ f c4 and p4 ] on the left ) or a simple path on 4 nodes ( also called @xmath21 , see figure  [ f c4 and p4 ] on the right ) @xcite .",
    "the next lemma follows easily by induction .",
    "we sketch the proof .",
    "[ l trans .",
    "forest ] the class @xmath261 of all groups , which are of the form @xmath12 for a transitive forest @xmath13 , is the smallest class such that :    1 .",
    "@xmath262 2 .   if @xmath263 , then also @xmath264 3 .",
    "if @xmath265 then @xmath266    first we verify that graphs groups associated to transitive forests satisfy ( 1)-(3 ) .",
    "case ( 1 ) results from the empty graph .",
    "it is immediate that transitive forests are closed under disjoint union , which implies ( 2 ) .",
    "if @xmath257 is a forest of rooted trees , then one can obtain a rooted tree by adding a new root whose children are the roots of the trees from @xmath257 .",
    "on the group level this corresponds to ( 3 ) .    for the converse ,",
    "we proceed by induction on the number of vertices . if the forest @xmath13 consists of more than one rooted tree , then @xmath12 is the free product of the graph groups associated to the various rooted trees in @xmath13 , all of which have a smaller number of vertices .",
    "if there is a single tree , then in @xmath13 the root is connected to every other vertex .",
    "thus @xmath267 where @xmath1 is the graph group corresponding to the transitive forest obtained by removing the vertex corresponding to the root and making its children the roots of the trees in the forest so obtained .    of course , a similar statement is true for trace monoids of the form @xmath26 with @xmath13 a transitive forest ; one just has to replace in ( 3 ) the group @xmath32 by the monoid @xmath55 .",
    "let @xmath268 be the smallest class of groups such that :    * the trivial group @xmath108 belongs to @xmath268 * if @xmath269 and @xmath22 is finitely generated , then also @xmath270 * if @xmath269 and @xmath10 such that @xmath1 has finite index in @xmath11 ( i.e. , @xmath11 is a finite extension of @xmath1 ) , then also @xmath270 * if @xmath269 , then also @xmath271 * if @xmath272 is a finite graph of groups  @xcite whose edge groups are finite and whose vertex groups belong to @xmath273 , then the fundamental group of @xmath272 belongs to @xmath273 ( in particular , the class @xmath268 is closed under free products ) .",
    "this last property is equivalent to saying that @xmath273 is closed under taking amalgamated products over finite groups and hnn - extensions with finite associated subgroups  @xcite .",
    "the main result in this section is :    [ t dec ] for every group @xmath269 , the rational subset membership problem is decidable .",
    "it is well known that decidability of the rational subset membership problem is preserved under taking finitely generated subgroups and finite extensions @xcite .",
    "moreover , the decidability of the rational subset membership problem is preserved by graph of group constructions with finite edge groups  @xcite .",
    "hence , in order to prove theorem  [ t dec ] , it would suffice to show that the decidability of the rational subset membership problem is preserved under direct products by @xmath32 .",
    "but currently we can neither prove nor disprove this .",
    "this forces us to adopt an alternate strategy : we will introduce an abstract property of groups that implies the decidability of the rational subset membership problem , and which has the desired closure properties .",
    "let @xmath274 be a class of formal languages closed under inverse homomorphism .",
    "a finitely generated group @xmath1 is said to be an _ @xmath274-group _ if @xmath107 belongs to @xmath274 for some finite generating set @xmath14 .",
    "this notion is independent of the choice of generating set  @xcite .",
    "a language @xmath275 belongs to the class _ rid _ ( rational intersection decidable ) if there is an algorithm that , given a finite automaton over @xmath14 recognizing a rational language @xmath5 , can determine whether @xmath276 .",
    "it was shown in  @xcite that the class rid is closed under inverse homomorphism and that a group @xmath1 has a decidable rational subset membership problem if and only if it is an rid - group .",
    "this follows from the fact that if @xmath5 is a rational subset of a group @xmath1 , then @xmath277 if and only if @xmath278 and that @xmath279 is again a rational subset .",
    "let @xmath280 be a language over an alphabet @xmath281 .",
    "then @xmath79 belongs to the class sli ( semilinear intersection ) if , for every finite alphabet @xmath52 ( disjoint from @xmath281 ) and every rational language @xmath282 , the set @xmath283 is semilinear , and the tuples in a semilinear representation of this set can be effectively computed from @xmath52 and a finite automaton for @xmath5 .",
    "this latter effectiveness statement will be always satisfied throughout the paper , and we shall not explicitly check it . in words ,",
    "the set is obtained by first taking those words from @xmath5 that project into @xmath79 when @xmath52-letters are erased , and then erasing the @xmath281-letters , followed by taking the parikh image .    in a moment",
    ", we shall see that the class sli is closed under inverse homomorphism , hence the class of sli - groups is well defined .",
    "in fact , we show more generally that the class sli is closed under inverse images by sequential functions @xcite .",
    "this will imply , moreover , that the class of sli - groups is closed under taking finite extensions  @xcite .    a _ sequential transducer _",
    "@xmath35 with input alphabet @xmath14 and output alphabet @xmath284 can be defined as a finite state automaton with transitions labeled by elements from the set @xmath285 such that the following restriction is satisfied : if there are states @xmath286 and a transition from @xmath287 to @xmath288 ( for @xmath143 ) with label @xmath289 then @xmath290 and @xmath291 .",
    "this is not the standard definition of a sequential transducer ( see e.g. @xcite ) , but it is easily seen to be equivalent . the language defined by @xmath35 is a relation @xmath292 , and it is easy to see that @xmath223 is the graph of a partial function @xmath293 . a",
    "_ sequential function _ is a partial function , which is computed by a sequential transducer .",
    "[ l transduction ] let @xmath280 belong to sli and let @xmath294 be a sequential function .",
    "then @xmath295 belongs to sli . in particular , the class of sli - groups is well defined and is closed under taking finite extensions .",
    "let @xmath52 be an alphabet disjoint from @xmath14 and let @xmath5 be a rational subset of @xmath296 .",
    "let @xmath35 be a sequential transducer computing the sequential function @xmath297 .",
    "define a transducer @xmath298 by adding to each state of @xmath35 a loop with label @xmath299 for each @xmath300 .",
    "clearly , @xmath298 is a sequential transducer , which computes a sequential function @xmath301 .",
    "the following two observations are immediate from the fact that the only transitions of @xmath298 involving letters from @xmath52 are loops with labels of the form @xmath299 :    a.   @xmath302 coincides with @xmath303 on the domain of @xmath257[enum a ] ( we read the composition of functions from right to left , i.e. , in @xmath302 we first apply @xmath257 , followed by @xmath304 ) b.   @xmath305 . [ enum b ]    we now claim that the following equality holds : @xmath306 first note that @xmath307 by .",
    "so if @xmath49 belongs to the left hand side of , then @xmath308 with @xmath309 .",
    "thus @xmath310 .",
    "conversely , if @xmath311 , then there exists @xmath312 such that @xmath313 .",
    "but then @xmath314 and so @xmath88 belongs to the left hand side of .    now , since @xmath307 is contained in the domain of @xmath257 , we may conclude from and that @xmath315 but @xmath316 is rational since the class of rational languages is closed under images via sequential functions  @xcite .",
    "therefore , since @xmath79 belongs to sli , we may deduce that the parikh - image @xmath317 is semilinear .",
    "this completes the proof of the first statement from the lemma in light on .",
    "since a homomorphism is a sequential function , the language class sli is closed under inverse homomorphism .",
    "hence , the class of sli - groups is well defined .",
    "finally , let us assume that @xmath1 is an sli - group and that @xmath1 is a finite index subgroup of @xmath11 .",
    "let @xmath14 ( resp .",
    "@xmath318 ) be a finite generating set for @xmath1 ( resp .",
    "@xmath11 ) .",
    "then in ( * ? ? ?",
    "* lemma 3.3 ) it is shown that there exists a sequential function @xmath319 such that @xmath320 .",
    "hence , @xmath11 is an sli - group .",
    "let us quickly dispense with the decidability of the rational subset membership problem for sli - groups .",
    "[ l 0 ] the class of languages sli is contained in the class of languages rid . in particular",
    ", every sli - group has a decidable rational subset membership problem .",
    "let @xmath280 belong to sli .",
    "let @xmath35 be a finite automaton over the alphabet @xmath281 .",
    "we have to decide whether @xmath321 .",
    "since @xmath79 belongs to sli , the set @xmath322 is effectively semilinear and so has a decidable membership problem ( c.f .",
    "@xcite ) . as mentioned earlier , @xmath323 consists of the unique function @xmath324 if @xmath325 is non - empty and is empty otherwise .",
    "thus we can test emptiness for @xmath325 .",
    "having already taken care of finite extensions by lemma  [ l transduction ] , let s turn to finitely generated subgroups .",
    "we show that the language class sli is closed under intersection with rational subsets .",
    "this guarantees that the class of sli - groups is closed under taking finitely generated subgroups  @xcite .",
    "[ l subgroup ] let @xmath326 belong to sli and let @xmath327 be rational",
    ". then @xmath328 belongs to sli . in particular , every finitely generated subgroup of an sli - group is an sli - group .",
    "let @xmath329 be rational , where @xmath52 is a finite alphabet disjoint from @xmath281 .",
    "we have @xmath330 but rational languages are closed under inverse homomorphism and intersection , so @xmath331 is semilinear as @xmath79 belongs to sli .",
    "this establishes the lemma .",
    "next , we show that the class of sli - groups is closed under direct products with @xmath32 :    [ l direct product ] if @xmath1 is an sli - group , then @xmath332 is also an sli - group .",
    "let @xmath14 be a finite generating set for @xmath1 .",
    "choose a generator @xmath333 of @xmath32 .",
    "then @xmath334 is generated by @xmath335 .",
    "let @xmath52 be a finite alphabet ( @xmath336 ) and let @xmath5 be a rational subset of @xmath337 .",
    "we have @xmath338 this set is semilinear , since @xmath339 is semilinear and semilinear sets are closed under intersection and projection @xcite .    by lemmas  [ l transduction][l direct product ] ,",
    "theorem  [ t dec ] would be established , if we could prove the closure of @xmath268 under graph of groups constructions with finite edge groups . unfortunately we are only able to prove this closure under the restriction that every vertex group of the graph of groups is residually finite ( which is the case for groups in @xmath268 ) .",
    "in general we can just prove closure under free product .",
    "this , in fact , constitutes the most difficult part of the proof of theorem  [ t dec ] .",
    "[ l free product ] if @xmath127 and @xmath128 are sli - groups , then @xmath129 is also an sli - group .",
    "assume that @xmath340 is a finite generating set for @xmath148 .",
    "thus , @xmath341 is a generating set for the free product @xmath129 .",
    "let @xmath52 be a finite alphabet ( @xmath342 ) and let @xmath343 .",
    "let @xmath344 be rational and let @xmath345 be a finite automaton with @xmath346 , where @xmath347 is the set of states , @xmath348 is the transition relation , @xmath349 is the initial state , and @xmath350 is the set of final states . for @xmath351 and @xmath352",
    "we write @xmath353 if there exists a path in @xmath35 from @xmath354 to @xmath287 , labelled by the word @xmath49 .    for every pair of states",
    "@xmath355 let us define the language @xmath356   \\subseteq ( \\sigma_1^{\\pm 1 } \\cup \\gamma \\cup ( q \\times q))^ * \\cup ( \\sigma_2^{\\pm 1 } \\cup \\gamma \\cup ( q \\times q))^ * \\subseteq   ( \\theta \\cup ( q \\times q))^*\\ ] ] as follows : @xmath357 = \\bigcup_{i\\in\\{1,2\\}}\\ { w_0 ( p_1,q_1 ) w_1 ( p_2,q_2 ) \\cdots w_{k-1 } ( p_k , q_k ) w_k \\mid   \\\\ & \\qquad\\qquad\\qquad k \\geq 1 \\;\\wedge\\ ; ( p_1,q_1 ) , \\ldots , ( p_k , q_k ) \\in q\\times q \\;\\wedge \\\\",
    "& \\qquad\\qquad\\qquad   w_0 , \\ldots , w_k \\in ( \\sigma_i^{\\pm 1 } \\cup \\gamma ) ^ * \\;\\wedge\\ ; \\pi_{\\sigma_i^{\\pm 1}}(w_0 \\cdots w_k )   \\in \\text{wp}_{\\sigma_i}(g_i )   \\;\\wedge \\\\ & \\qquad\\qquad\\qquad p",
    "\\xrightarrow{w_0}_a p_1   \\;\\wedge\\ ; q_1 \\xrightarrow{w_1}_a p_2 \\;\\wedge\\cdots\\wedge\\ ; q_{k-1 } \\xrightarrow{w_{k-1}}_a p_k \\;\\wedge\\ ; q_k \\xrightarrow{w_k}_a q \\}\\end{aligned}\\ ] ] since the language @xmath358 is a rational language over the alphabet @xmath359 for @xmath360 and @xmath148 is an sli - group , it follows that the parikh image @xmath361 ) \\subseteq",
    "\\mathbb{n}^{\\gamma \\cup ( q \\times q)}$ ] is semilinear .",
    "let @xmath362 \\subseteq ( \\gamma \\cup ( q\\times q))^*$ ] be some rational language such that @xmath363 } \\psi(k[p , q ] ) = \\psi_{\\gamma \\cup ( q\\times q)}(l[p , q]).\\ ] ] next , we define a context - free grammar @xmath364 as follows :    * the set of nonterminals is @xmath365 , where @xmath0 is a new symbol not contained in @xmath366 .",
    "* @xmath0 is the start nonterminal .",
    "* @xmath89 consists of the following productions : @xmath367             & & \\text { for all $ p , q \\in q$ } \\\\ ( q , q ) & \\to \\varepsilon        & & \\text { for all $ q \\in q$}\\end{aligned}\\ ] ]    by parikh s theorem , the parikh image @xmath368 is semilinear .",
    "thus , the following claim proves the lemma :    _ claim 1 . _",
    "@xmath369    _",
    "proof of claim 1 .",
    "_ we prove the following more general identity for all @xmath355 : @xmath370 for the inclusion @xmath371 assume that @xmath372 .",
    "we show by induction on the length of the @xmath373-derivation @xmath374 that there exists a word @xmath352 such that @xmath353 , @xmath375 , and @xmath376 .",
    "_ @xmath377 and @xmath378 : we can choose @xmath379 .    _ case 2 . _",
    "@xmath380 for some @xmath381 $ ] . by ( [ g k[p , q ] ] ) ,",
    "there exists a word @xmath382 $ ] such that @xmath383 .",
    "since @xmath382 $ ] , there exist @xmath384 , @xmath385 , @xmath143 , and @xmath386 such that    * @xmath387 * @xmath388 , and * @xmath389 .    since @xmath390 and @xmath383",
    ", there must exist @xmath391 such that @xmath392 for all @xmath393 . by induction , we obtain words @xmath394 such that for all @xmath393 :    * @xmath395 * @xmath396 , and * @xmath397 .",
    "let us set @xmath398 .",
    "we have :    * @xmath399 , i.e. , @xmath353 , * @xmath375 , and * @xmath400 .",
    "this concludes the proof of inclusion ( [ inclusion 1 ] ) . for the other inclusion ,",
    "assume that @xmath401 for a word @xmath352 . by induction over the length of the word @xmath49",
    "we show that @xmath402 .",
    "we will make a case distinction according to the three cases in lemma  [ l free product 1 ] .",
    "note that we either have @xmath403 or the word @xmath352 can be ( not necessarily uniquely ) written as @xmath404 with @xmath405 such that @xmath406 and @xmath407 .",
    "_ @xmath408 ( the case @xmath409 is analogous ) : then @xmath410 .",
    "together with @xmath353 , we obtain @xmath411 $ ] .",
    "since @xmath412 $ ] and @xmath413 are productions of @xmath373 , there exists a word @xmath414 such that @xmath374 and @xmath415 , i.e. , @xmath416 .    _",
    "_ @xmath417 with @xmath418 and @xmath419 .",
    "then there exists a state @xmath420 such that @xmath421 by induction , we obtain @xmath422 hence , we get @xmath423 where the last inclusion holds , since @xmath424 $ ] , and so either @xmath425 or @xmath426 is a production of @xmath373 .",
    "_ @xmath427 such that @xmath384 ,    * @xmath396 for all @xmath428 , and * for some @xmath143 : @xmath429 and @xmath430 .",
    "there exist states @xmath431 such that @xmath432 by induction , we obtain @xmath433 for all @xmath393 .",
    "moreover , from the definition of the language @xmath434 $ ] we obtain @xmath435.\\ ] ] hence , by ( [ g k[p , q ] ] ) there is a word @xmath381 $ ] such that @xmath383 and @xmath436 is a production of @xmath1 . with ( [ psi_gamma in psi ] )",
    "we obtain @xmath437 for a word @xmath414 such that @xmath438 i.e. , @xmath416 .",
    "this concludes the proof of claim 1 and hence of the lemma .    if we were to weaken the definition of the class @xmath268 by only requiring closure under free products instead of closure under finite graphs of groups with finite edge groups , then lemmas  [ l 0][l free product ]",
    "would already imply theorem  [ t dec ] .",
    "in fact , this weaker result suffices in order to deal with graph groups , and readers only interested in graph groups can skip the following considerations concerning graphs of groups .    to obtain the more general closure result for the class @xmath268 concerning graph of group constructions , we reduce to the case of free products .",
    "recall that a group @xmath1 is _ residually finite _ if , for each @xmath439 , there is a finite index normal subgroup @xmath82 of @xmath1 with @xmath440 .",
    "now we use a standard trick for graphs of residually finite groups with finite edge groups .",
    "[ l graph of groups ] let @xmath272 be a finite graph of groups such that the vertex groups are residually finite sli - groups and the edge groups are finite . then the fundamental group of @xmath272 is an sli - group .",
    "let @xmath1 be the fundamental group of @xmath272 .",
    "then @xmath1 is residually finite  ( * ? ? ?",
    "* ii.2.6 proposition 12 ) .",
    "since there are only finitely many edge groups and each edge group is finite , there is a finite index normal subgroup @xmath24 intersecting trivially each edge group , and hence each conjugate of an edge group .",
    "thus the finitely generated subgroup @xmath24 acts on the bass - serre tree for @xmath1  @xcite with trivial edge stabilizers , forcing @xmath82 to be a free product of conjugates of subgroups of the vertex groups of @xmath1 and a free group  @xcite .",
    "since @xmath82 is finitely generated , these free factors must also be finitely generated .",
    "since every finitely generated subgroup of an sli - group is an sli - group ( lemma  [ l subgroup ] ) and @xmath32 is an sli - group ( lemma  [ l direct product ] ) , we may deduce that @xmath82 is a free product of sli - groups and hence is an sli - group by lemma  [ l free product ] . since @xmath1 contains @xmath82 as a finite index subgroup , lemma  [ l transduction ] implies that @xmath1 is an sli - group , as required .",
    "clearly , the trivial group @xmath108 is an sli - group .",
    "also all the defining properties of @xmath268 preserve residual finiteness ( the only non - trivial case being the graph of group constructions  @xcite ) .",
    "hence , lemmas  [ l 0][l direct product ] and lemma  [ l graph of groups ] immediately yield theorem  [ t dec ] .    our main application of theorem  [ t dec ] concerns graph groups :    [ t main ] the rational subset membership problem for a graph group @xmath12 is decidable if and only if @xmath13 is a transitive forest .",
    "moreover , if @xmath13 is not a transitive forest , then there exists a fixed rational subset @xmath5 of @xmath12 such that the membership problem for @xmath5 within @xmath12 is undecidable .",
    "the decidability part follows immediately from theorem  [ t dec ] : lemma  [ l trans .",
    "forest ] implies that every graph group @xmath12 with @xmath13 a transitive forest belongs to the class @xmath268 .",
    "now assume that @xmath207 is not a transitive forest .",
    "by @xcite it suffices to consider the case that @xmath13 is either a @xmath19 or a @xmath21 . for the case of a @xmath19 we can use mihailova s result @xcite .",
    "now assume that @xmath13 is a @xmath21 .",
    "we will reuse a construction by aalbersberg and hoogeboom @xcite , which is based on _",
    "2-counter machines_. a 2-counter machine is a tuple @xmath441 where @xmath347 is a finite set of states , @xmath349 is the initial state , @xmath442 is the final state , and @xmath443 is the set of instructions .",
    "the set of configurations of @xmath261 is @xmath444 . for two configurations @xmath445",
    "we write @xmath446 if there exists an instruction @xmath447 , so @xmath448 , such that @xmath449 and one of the following three cases holds :    * @xmath450 and @xmath451 * @xmath452 and @xmath453 * @xmath454 and @xmath455 * @xmath456 and @xmath457    since turing machines can be simulated by 2-counter machines @xcite , it is undecidable whether for a given 2-counter machine @xmath441 there exist @xmath458 with @xmath459 . in @xcite , this problem",
    "is reduced to the question , whether @xmath460 for given rational trace languages @xmath461 , where @xmath462 and @xmath463 .",
    "in fact , the language @xmath79 is fixed , more precisely @xmath464_i \\mid \\ell \\geq 1 , j_0 = 1 , j_1,\\ldots , j_\\ell \\geq 1 \\ } .\\end{aligned}\\ ] ] the problem is that in the construction of @xcite the language @xmath5 is not fixed since it depends on the 2-counter machine @xmath261 .",
    "aalbersberg and hoogeboom encode the pair of counter values @xmath465 by the single number @xmath466 .",
    "the language @xmath5 is constructed in such a way that @xmath467 contains exactly those traces of the form @xmath468_i$ ] , such that @xmath469 , @xmath470 , and there exist states @xmath471 and @xmath472 with @xmath473 , @xmath474 , and @xmath475 ( note that @xmath470 encodes the initial counter values @xmath476 ) .    in order to construct a fixed rational subset of @xmath12 with an undecidable membership problem",
    ", we start with a fixed ( universal ) 2-counter machine @xmath441 such that it is undecidable whether @xmath477 for given natural numbers @xmath478 .",
    "such a machine @xmath261 can be obtained by simulating a universal turing machine .",
    "let @xmath479 be the _ fixed _ rational trace language constructed by aalbersberg and hoogeboom from @xmath261 , and let us replace the fixed trace language @xmath480 by the ( non - fixed ) language @xmath481_i \\mid \\ell \\geq 1 , j_0 = 2^m3^n , j_1,\\ldots , j_\\ell \\geq 1 \\ } .\\end{aligned}\\ ] ] then it is undecidable , whether @xmath482 for given @xmath458 .",
    "hence , it is undecidable , whether @xmath483 in the graph group @xmath484 . clearly , @xmath485 is a fixed rational subset of the graph group @xmath484 .",
    "we conclude this section with a further application of theorem  [ t dec ] to _ graph products _ ( which should not be confused with graphs of groups ) .",
    "a graph product is given by a tuple @xmath486 , where @xmath13 is an independence alphabet and @xmath487 is a group , which is associated with the node @xmath488 .",
    "the group @xmath489 defined by this tuple is the quotient @xmath490 i.e. , we take the free product @xmath491 of the groups @xmath487 ( @xmath492 ) , but let elements from adjacent groups commute .",
    "note that @xmath489 is the graph group @xmath484 in the case every @xmath487 is isomorphic to @xmath32 .",
    "graph products were first studied by green @xcite .    if @xmath207 is a transitive forest and every group @xmath487 ( @xmath493 ) is finitely generated and virtually abelian ( i.e.",
    ", has an abelian subgroup of finite index ) , then the rational subset membership problem for @xmath489 is decidable .",
    "assume that the assumptions from the theorem are satisfied .",
    "we show that @xmath489 belongs to the class @xmath268 .",
    "since @xmath13 is a transitive forest , the group @xmath489 can be built up from trivial groups using the following two operations : ( i ) free products and ( ii ) direct products with finitely generated virtually abelian groups .",
    "since the class @xmath268 is closed under free products , it suffices to prove that if @xmath1 belongs to the class @xmath268 and @xmath11 is finitely generated virtually abelian , then @xmath494 also belongs to the class @xmath268 . as a finitely generated virtually abelian group , @xmath11 is a finite extension of a finite rank free abelian group @xmath495 . by the closure of the class @xmath268 under direct products with @xmath32",
    ", @xmath496 belongs to the class @xmath268 .",
    "now , @xmath494 is a finite extension of @xmath496 , proving the theorem , since @xmath268 is closed under finite extensions .",
    "recall that the submonoid membership problem for a group @xmath1 asks whether a given element of @xmath1 belongs to a given finitely generated submonoid of @xmath1 .",
    "hence , there is a trivial reduction from the submonoid membership problem for @xmath1 to the rational subset membership problem for @xmath1 .",
    "we will show that for every amalgamated free product @xmath34 such that :    1 .",
    "@xmath181 is a finite , proper subgroup of @xmath1 and @xmath11 ; 2 .   there exist @xmath36 , @xmath37 with @xmath497 ,    there is in fact also a reduction in the opposite direction .",
    "similarly , if @xmath498 is an hnn extension with @xmath193 with    1 .",
    "@xmath35 is a finite subgroup of @xmath1 ; 2 .",
    "there exists @xmath2 such that @xmath499 or @xmath500    then the rational subset problem reduces to the submonoid membership problem for @xmath498 .",
    "we remark that in 2 , one could by symmetry switch the roles of @xmath501 and @xmath35 .    using the following lemma , it will suffice to consider a free product @xmath502 , where @xmath503 is a free group of rank two .",
    "[ l free group of rank 2 ] let @xmath183 be an amalgamated free product such that @xmath504 , @xmath505 \\geq 5 $ ] , and there exists @xmath37 with @xmath506 .",
    "then @xmath183 contains as a subgroup the free product @xmath502 of @xmath1 with a free group of rank two .    since @xmath505 \\geq 5 $ ]",
    ", we can choose elements @xmath507 which belong to pairwise distinct left @xmath35-cosets .",
    "moreover , choose an element @xmath508 with @xmath506 .",
    "first we claim that @xmath509 and @xmath510 freely generate a free subgroup of @xmath183 . for this , note that @xmath511 if @xmath512 .",
    "thus , every word over @xmath513 which does not contain a factor from @xmath514 yields a reduced sequence for the amalgamated product .",
    "the normal form theorem for amalgamated free products  ( * ? ? ? * chapter  iv , theorem  2.6 ) then implies that @xmath515 is the base of a free subgroup of @xmath34 .",
    "hence , the conjugates @xmath516 and @xmath517 also form a base for a free subgroup of @xmath34 . since @xmath506 ( and hence if @xmath203 , then @xmath518 ) a word over @xmath519 , which does not contain a factor from @xmath520 , yields a reduced sequence for the amalgamated product . again",
    ", the normal form theorem for amalgamated free products implies that the subgroup of @xmath183 generated by @xmath521 is isomorphic to @xmath522 .",
    "we now prove the analogous result for hnn extensions .",
    "[ l free group of rank 2 hnn version ] let @xmath195 be an hnn extension with stable letter @xmath196 and finite associated subgroups @xmath194 ( so @xmath193 ) such that @xmath523 \\geq 3 $ ] and there exists @xmath36 with @xmath524 or @xmath525",
    ". then @xmath498 contains as a subgroup the free product @xmath502 of @xmath1 with a free group of rank two .    by lemma  [ l free group of rank 2 ]",
    ", it suffices to show that @xmath195 contains a subgroup @xmath526 .",
    "we may assume that @xmath527 , because otherwise @xmath528 .",
    "choose @xmath529 so that @xmath530 are in different left cosets of @xmath501 .",
    "suppose first there exists @xmath36 with @xmath499 and set @xmath531 .",
    "since @xmath532 ( because otherwise @xmath533 ) and @xmath534 , one easily deduces that @xmath535 is a reduced sequence for the hnn extension for all @xmath536 and hence @xmath537 is of infinite order by britton s lemma .",
    ". then @xmath539 is of infinite order , being a conjugate of @xmath537 .",
    "we claim that @xmath1 and @xmath540 generate their free product inside of @xmath195 .",
    "we need to show that a word over @xmath541 with no factor from @xmath542 results in a reduced sequence for the hnn extension .",
    "the key point is that if @xmath543 , then @xmath544 is reduced . on the other hand , if @xmath545 , then @xmath546 , which is reduced since @xmath499 .",
    "now assume that there exists @xmath36 with @xmath547 .",
    "the group @xmath35 must be a proper subgroup of @xmath1 , because otherwise we have @xmath548 .",
    "so choose @xmath549 and set @xmath550 .",
    "the same argument as above shows that @xmath537 has infinite order .",
    "set @xmath551 ; again @xmath539 has infinite order , being a conjugate of @xmath537 .",
    "again , we claim that @xmath1 and @xmath540 generate their free product in @xmath195 .",
    "once more , we must prove that a word over @xmath541 with no factor from @xmath542 yields a reduced sequence for the hnn extension .",
    "the key point is that if @xmath543 , then @xmath552 is reduced . on the other hand , if @xmath553 , then @xmath554 , which is reduced since @xmath547 .",
    "the following lemma is crucial for us :    [ l submonoid free prod ]    1 .",
    "let @xmath1 and @xmath11 be finitely generated groups such that the finite group @xmath35 is a proper subgroup of both @xmath1 and @xmath11 and there exists @xmath37 with @xmath555 .",
    "then the rational subset membership problem for @xmath1 can be reduced to the submonoid membership problem for @xmath34 .",
    "2 .   if @xmath193 is an isomorphism between finite subgroups of a finitely generated group @xmath1 and there exists @xmath2 with @xmath499 or @xmath547 , then the rational subset membership problem for @xmath1 can be reduced to the submonoid membership problem for @xmath195 .    in our proof of lemma",
    "[ l submonoid free prod ] we will implicitly construct turing machines that carry out the reductions in ( 1 ) and ( 2 ) .",
    "these machines will depend on the element @xmath3 ( and @xmath556 ) in ( 1 ) , respectively ( 2 ) . here",
    "one might argue that these elements are not known .",
    "but this is not a real problem , since @xmath3 and @xmath556 are fixed elements which do not depend on the input for the reduction .",
    "so there exists a turing machine that can do the reduction , although we do nt know which turing machine if we do nt know the elements @xmath3 and @xmath556 .",
    "_ proof of lemma  [ l submonoid free prod ] .",
    "_ if @xmath1 is finite , then the rational subset membership problem for @xmath1 is decidable , so we may assume without loss of generality that @xmath1 is infinite .",
    "since @xmath35 is finite , we have @xmath505 \\geq 5 $ ] in ( 1 ) , respectively @xmath523\\geq 3 $ ] in ( 2 )",
    ". then lemmas  [ l free group of rank 2 ] and  [ l free group of rank 2 hnn version ] imply that @xmath522 is a subgroup of @xmath34 , respectively @xmath195 .",
    "since the submonoid membership problem for a finitely generated subgroup of a group @xmath79 reduces to the submonoid membership problem for @xmath79 itself , it suffices to prove the following : the rational subset membership problem for @xmath1 can be reduced to the submonoid membership problem for @xmath502 .",
    "let @xmath14 be a finite generating set for @xmath1 and use @xmath557 for the canonical morphism .",
    "let @xmath558 be a finite automaton and let @xmath559 . by introducing @xmath560-transitions",
    ", we may assume that the set of final states @xmath257 consists of a single state @xmath561 .",
    "one can effectively find a subset @xmath562 in bijection with @xmath347 via @xmath563 such that @xmath564 freely generates a free subgroup of @xmath503 .",
    "we construct a finite subset @xmath565 and an element @xmath566 such that @xmath567 if and only if @xmath568 .",
    "let @xmath569 note that in , we have @xmath570 , since we introduced @xmath560-transitions . recall @xmath571 means @xmath572 in @xmath35 .",
    "we begin with a critical claim .",
    "_ claim 1 .",
    "_ suppose that in @xmath522 , we have @xmath573 where @xmath574 in @xmath35 , for @xmath575 . then @xmath576 .",
    "the claim is proved by induction on @xmath577 . if @xmath578 , then since @xmath579 , the normal form theorem for free products easily implies @xmath580 , @xmath581 and @xmath582 in @xmath1 .",
    "thus @xmath583 in @xmath35 , whence @xmath584 , and so @xmath576 .",
    "next suppose the claim holds for @xmath585 and consider the claim for @xmath586 .",
    "first suppose that @xmath587 for some @xmath216 .",
    "then @xmath588 in @xmath502 and @xmath589 in @xmath35 .",
    "induction now gives the desired conclusion .",
    "next suppose that for some @xmath216 , we have @xmath590 and @xmath591 in @xmath1 .",
    "then @xmath592 in @xmath502 and we can again apply the induction hypothesis .    finally , suppose @xmath590 implies @xmath593 in @xmath1 and suppose @xmath594 , all @xmath216 .",
    "then we claim that the right hand side of is already in normal form .",
    "consider a typical window @xmath595 ( where we take @xmath596 ) .",
    "then no two neighbouring elements belong to the same factor of the free product @xmath597 , where @xmath598 , since @xmath599 for @xmath600 and @xmath601 when @xmath591 in @xmath1 .",
    "since such windows cover the right hand side of we may conclude that it is in normal form in @xmath522 .",
    "comparison with the left hand side then shows that @xmath578 , contradicting @xmath586 .",
    "so this case does not arise and the proof of the claim is complete .",
    "now we may prove that @xmath576 if and only if @xmath602 .",
    "suppose first that @xmath603 with @xmath604 .",
    "write @xmath605 with @xmath606 and such that @xmath607 . then",
    ", as @xmath608 , clearly we have @xmath609 in @xmath502 .",
    "conversely , suppose @xmath568 .",
    "then we can write @xmath610 in @xmath502 , where @xmath611 are certain transitions of @xmath35 .",
    "claim 1 then implies @xmath576 .",
    "[ t submonoid ] let @xmath1 and @xmath11 be finitely generated groups such that the finite group @xmath35 is a proper subgroup of both @xmath1 and @xmath11 and there exist @xmath36 , @xmath37 with @xmath497 .",
    "then , for the amalgamated free product @xmath34 the rational subset membership problem and the submonoid membership problem are recursively equivalent .",
    "it suffices to show that the rational subset membership problem for @xmath34 can be reduced to the submonoid membership problem for @xmath34 .",
    "the rational subset membership problem for @xmath34 can be reduced to the rational subset membership problems for @xmath1 and @xmath11 @xcite . by lemma",
    "[ l submonoid free prod ] both these problems can be reduced to the submonoid membership problem for @xmath34 .",
    "note that the assumptions in theorem  [ t submonoid ] are satisfied for every free product @xmath612 of nontrivial finitely generated groups @xmath1 and @xmath11 .",
    "a similar result holds for hnn extensions :    [ t submonoid hnn ] let @xmath1 be a finitely generated group and let @xmath193 be an isomorphism between finite subgroups of @xmath1 .",
    "suppose there exists @xmath613 , with @xmath614 or @xmath615 .",
    "then the rational subset membership problem and the submonoid membership problem are recursively equivalent for the hnn extension @xmath195 .",
    "we just need to establish that the rational subset membership problem for @xmath195 can be reduced to the submonoid membership problem .",
    "the rational subset membership problem for @xmath195 can be reduced to the rational subset membership problem for @xmath1 by the results of  @xcite . by lemma",
    "[ l submonoid free prod ] this problem can be reduced to the submonoid membership problem for @xmath195 .",
    "this completes the proof .",
    "let us say that a group @xmath1 is _ virtually a free product _ if it has a finite index subgroup @xmath11 that splits nontrivially as a free product @xmath616 .",
    "let @xmath1 be a finitely generated group that is virtually a free product .",
    "then the rational subset and submonoid membership problems are recursively equivalent .",
    "suppose @xmath1 has decidable submonoid membership problem .",
    "we need to show that @xmath1 has decidable rational subset problem .",
    "let @xmath11 be a finite index subgroup of @xmath1 that splits nontrivially as a free product .",
    "clearly @xmath11 has decidable submonoid membership problem and hence has decidable rational subset membership problem by theorem  [ t submonoid ] .",
    "it then follows @xmath1 has decidable rational subset membership problem by  @xcite .    in order for a finitely generated group to be virtually a free product , it must have two or more ends . on the other hand",
    ", a group with two or more ends that is either virtually torsion - free or residually finite is easily seen , via stallings ends theorem  @xcite , to be virtually a free product , as we now show .",
    "first we recall the notion of ends of a locally finite graph .",
    "let @xmath52 be a locally finite graph , i.e. , every node of @xmath52 has only finitely many neighbours .",
    "consider the inverse system @xmath617 where @xmath261 runs over the finite subgraphs of @xmath52 .",
    "then the sets of connected components @xmath618 form an inverse system of sets ; the projective limit @xmath619 is known as the set of _ ends _ of @xmath52 .",
    "the number of ends of @xmath52 is the cardinality of @xmath620 .",
    "the number of ends of a finitely generated group @xmath1 is the number of ends of the cayley - graph of @xmath1 with respect to any finite set of generators ; this number is independent of the finite generating set we choose for @xmath1 and it is either @xmath621 , @xmath108 , @xmath622 or @xmath623  @xcite . here",
    "are some examples : ( i ) every finite group has @xmath621 ends , ( ii ) @xmath624 has one end , ( iii ) @xmath32 has two ends , and ( iv ) @xmath503 has infinitely many ends .",
    "stallings famous ends",
    "theorem  @xcite says that if @xmath1 is a finitely generated group with two or more ends , then @xmath1 splits nontrivially as an amalgamated product or an hnn - extension over a finite subgroup .",
    "this can be reformulated in terms of actions on trees via bass - serre theory  @xcite .",
    "a group acts _ nontrivially _ on a tree if it has no global fixed - point , i.e. , there is no node @xmath87 in the tree with @xmath625 .",
    "a group @xmath1 is said to _ split _ over a subgroup @xmath11 if there is a nontrivial action of @xmath1 on a tree @xmath626 such that @xmath11 is the stabilizer of an edge @xmath627 and the orbit @xmath628 consists of all edges of @xmath626 .",
    "this is equivalent to @xmath1 splitting as an amalgamated product or hnn - extension with @xmath11 as the amalgamation base , respectively the associated subgroup  @xcite .",
    "we shall need the following simple lemma .",
    "[ l nontrivialaction ] let @xmath1 be a finitely generated group with a nontrivial action on a tree @xmath626 and let @xmath629 be a finite index subgroup .",
    "then @xmath11 acts nontrivially on @xmath626 .",
    "recall that if @xmath3 is an automorphism of a tree @xmath626 , then @xmath3 is said to be",
    "_ elliptic _",
    "if @xmath3 fixes some point of @xmath626 .",
    "it is well known ( this follows immediately from  ( * ? ? ?",
    "* i.6.4 , proposition  25 ) , for instance ) that if @xmath630 ( @xmath405 ) is elliptic , then @xmath3 is elliptic .",
    "now if @xmath11 has a global fixed point , then @xmath11 consists entirely of elliptic automorphisms of @xmath626 .",
    "let @xmath631=n$ ] and @xmath2 . then @xmath632 and",
    "hence is elliptic .",
    "it follows that every element of @xmath1 is elliptic .",
    "but it is well known  ( * ? ? ?",
    "* i.6.5 , corollary  3 ) that any finitely generated group of elliptic automorphisms of a tree has a global fixed point , contradicting that the action of @xmath1 is nontrivial .",
    "it follows that the action of @xmath11 is nontrivial .",
    "[ t submonoidforinfinitelymanyends ] let @xmath1 be a finitely generated group with two or more ends such that the intersection of all the finite index subgroups of @xmath1 is torsion - free .",
    "then @xmath1 is virtually a free product and hence the rational subset membership and submonoid membership problems for @xmath1 are recursively equivalent",
    ".    by stallings ends theorem  @xcite , @xmath1 splits nontrivially over a finite subgroup .",
    "so by bass - serre theory  @xcite @xmath1 acts nontrivially on a tree @xmath626 so that there is one orbit of edges and the stabilizer of an edge is finite .",
    "let @xmath11 be an edge stabilizer ; since @xmath11 is a finite group , by hypothesis there is a normal subgroup @xmath633 of finite index such @xmath634 .",
    "by lemma  [ l nontrivialaction ] the action of @xmath82 on @xmath626 is nontrivial .",
    "since each edge stabilizer in @xmath1 is a conjugate of @xmath11 , it follows no element of @xmath635 fixes an edge .",
    "therefore , @xmath82 splits nontrivially as a free product  @xcite .",
    "this completes the proof .",
    "[ c tf or rs ] let @xmath1 be a finitely generated group with two or more ends which is either virtually torsion - free or residually finite .",
    "then the rational subset membership and submonoid membership problems for @xmath1 are recursively equivalent .",
    "clearly theorem  [ t submonoidforinfinitelymanyends ] applies under either of these hypotheses .",
    "let us now come back to graph groups .",
    "theorems  [ t main ] and [ t submonoid ] imply that the submonoid membership problem is undecidable for every graph group of the form @xmath636 where @xmath637 and @xmath13 is not a transitive forest . in the rest of the paper",
    ", we will sharpen this result .",
    "we show that for a graph group the submonoid membership problem is decidable if and only if the rational subset membership problem is decidable , i.e. , if and only if the independence alphabet is a transitive forest .",
    "in fact , by our previous results , it suffices to consider a @xmath21 :    [ t p4 ] let @xmath638 and @xmath463 , i.e , @xmath13 is a @xmath21",
    ". then there exists a fixed submonoid @xmath96 of @xmath12 such that the membership problem of @xmath96 within @xmath12 is undecidable .",
    "we follow the strategy of the proof of lemma  [ l submonoid free prod ] , but working in the graph group @xmath12 makes the encoding more complicated .",
    "let @xmath223 denote the trace rewriting system over the trace monoid @xmath639 defined in ( [ system r ] ) , section  [ ss traces ] .",
    "as usual denote by @xmath640 denote the canonical morphism , which will be identified with the canonical morphism @xmath641 .",
    "let us fix a finite automaton @xmath35 over the alphabet @xmath104 such that the membership problem for @xmath642 within @xmath12 is undecidable ; such an automaton exists by theorem  [ t main ] . without loss of generality assume that @xmath643 where @xmath644 and @xmath645 ( since we allow @xmath560-transitions , we may assume that there is only a single final state @xmath646 , which is different from the initial state @xmath647 ) . for a state @xmath648 , define the trace @xmath649 by @xmath650 note that the dependence graph of @xmath651 is a linear chain .",
    "moreover , every symbol from @xmath104 is dependent on @xmath652 , i.e. , does not commute with @xmath652 .",
    "the following statement is straightforward to prove .",
    "_ claim 2 .",
    "_ let @xmath653 , @xmath654 such that @xmath655 for all @xmath656 .",
    "then @xmath657 note that this trace starts ( resp .",
    "ends ) with a copy of @xmath658 ( resp .",
    "@xmath659 ) .    let @xmath660 be the injective morphism defined by @xmath661 for @xmath662 .",
    "thus , @xmath663 if and only if @xmath664 . since @xmath665 implies that @xmath666 and @xmath667 commute , @xmath182 can be lifted to an injective morphism @xmath668 . the reader can easily verify that , for every trace @xmath669 , the equality @xmath670 holds .",
    "in particular , @xmath671 is irreducible if and only if @xmath196 is irreducible and @xmath672 if and only if @xmath673 .",
    "let us fix a trace @xmath674 and define @xmath675 we will show that @xmath567 if and only if @xmath676 .",
    "let us define a _",
    "@xmath108-cycle _ to be a word in @xmath43of the form @xmath677 such that @xmath384 , @xmath678 , @xmath679 , and @xmath680 in @xmath12 ( hence , also @xmath681 in @xmath12 ) .",
    "note that a @xmath108-cycle equals @xmath108 in @xmath12 .",
    "we say that a word of the form @xmath682 , where @xmath683 and @xmath684 , contains a @xmath108-cycle , if there are positions @xmath685 such that @xmath686 is a @xmath108-cycle .",
    "if a word does not contain a @xmath108-cycle , then it is called _ @xmath108-cycle - free_.    _ claim 3 . _",
    "let @xmath687 and @xmath688 where @xmath689 and @xmath684 .",
    "if @xmath690 in @xmath12 , then @xmath87 contains a @xmath108-cycle .",
    "_ proof of claim 3 .",
    "_ we prove claim 3 by induction over @xmath135 .",
    "assume that @xmath690 in @xmath12 .",
    "if @xmath691 , then we obtain the identity @xmath692 in @xmath12 .",
    "assume without loss of generality that @xmath693 , viewed as a trace , is irreducible with respect to @xmath223 .",
    "then also @xmath694 is irreducible . if @xmath695 and @xmath696 , then @xmath87 is a @xmath108-cycle .",
    "if @xmath695 , and @xmath697 , then we obtain a contradiction , since @xmath698 is nonempty by claim 2 .",
    "now assume that @xmath699 . in the trace",
    "@xmath700 only the last @xmath701 of the factor @xmath702 may cancel against the first @xmath48 of @xmath694 ( in case @xmath703 ) and the first @xmath48 of the factor @xmath704 may cancel against the last @xmath701 of @xmath694 ( in case @xmath705 ) . to see this , note that if @xmath706 , then @xmath707 is irreducible with respect to @xmath223 . if @xmath708 then @xmath709 for some trace @xmath196 .",
    "then @xmath710 since @xmath48 and @xmath711 do not commute , we can not have @xmath712 , hence cancellation stops and @xmath713 where @xmath714 . moreover , if @xmath701 is a maximal symbol of @xmath196 , then @xmath715 for some trace @xmath716 . hence , by making a possible cancellation with the first @xmath48 in @xmath704 , it follows finally that @xmath717 for some trace @xmath537 , where @xmath718 .",
    "this contradicts again ( [ l 3 ] ) and proves the inductive base case @xmath691 in claim 3 .",
    "now assume that @xmath719 .",
    "_ there is @xmath141 such that @xmath720 .",
    "then @xmath690 in @xmath12 implies @xmath721 is @xmath108 in @xmath12 . by induction",
    ", we can conclude that above word contains a @xmath108-cycle .",
    "but then also the word @xmath87 must contain a @xmath108-cycle .",
    "_ case 2 . _",
    "@xmath722 for all @xmath141 .",
    "if there is @xmath137 such that @xmath723 in @xmath12 and @xmath724 then @xmath87 contains the @xmath108-cycle @xmath725 .",
    "now assume that @xmath726 whenever @xmath591 in @xmath12 .",
    "let @xmath727 be the word that results from @xmath87 by deleting all factors @xmath728 , which are equal @xmath108 in @xmath12 . in the following , we consider @xmath727 as a trace .",
    "consider a maximal factor of @xmath727 of the form @xmath729 where @xmath730 and @xmath731 , @xmath732 in @xmath12 .",
    "claim 2 show that the @xmath223-normal form of this trace starts ( resp",
    ". ends ) with a copy of @xmath658 ( resp .",
    "@xmath659 ) , and similarly for maximal prefixes ( resp .",
    "suffixes ) of the form @xmath733 in @xmath727 , factors of the form ( [ abcd - word ] ) and ( [ e pref suf ] ) are separated by traces @xmath728 , where @xmath734 in @xmath12 . without loss of generality",
    "assume that each such trace @xmath728 is irreducible and hence non - empty . as for the base case @xmath735",
    ", one can show that in such a concatenation , only a single minimal @xmath48 and a single maximal @xmath701 of a trace @xmath736 may be cancelled .",
    "it follows that @xmath737 , which contradicts @xmath690 in @xmath12 .",
    "this concludes the proof of claim 3 .",
    "now we can prove @xmath567 if and only if @xmath738 .",
    "first assume that @xmath567 .",
    "let @xmath739 such that @xmath740 for @xmath137 , @xmath741 , and @xmath742 in @xmath12 .",
    "then @xmath743 now assume that @xmath744 .",
    "thus , @xmath745 in @xmath12 , where @xmath683 , @xmath746 , and @xmath747 for @xmath137 . without loss of generality",
    "we may assume that the word @xmath748 is @xmath108-cycle - free ( otherwise we can remove all @xmath108-cycles from this word ; note that a @xmath108-cycle equals @xmath108 in the group @xmath12 ) .",
    "let @xmath749 since @xmath690 in @xmath12 , claim 3 implies that @xmath87 contains a @xmath108-cycle .",
    "we claim that this @xmath108-cycle must be the whole word @xmath87 : first of all , the suffix @xmath750 of @xmath87 is @xmath108-cycle - free . if a prefix @xmath751 for @xmath752 is a @xmath108-cycle , then",
    "@xmath753 in @xmath12 .",
    "hence , claim 3 implies that the word @xmath754 contains a @xmath108-cycle , contradicting the fact that the word @xmath755 is @xmath108-cycle - free .",
    "thus , indeed , @xmath87 is a @xmath108-cycle .",
    "hence , @xmath756 , @xmath757 , @xmath720 for @xmath758 , and @xmath759 in @xmath12 , i.e. , @xmath760 .",
    "this shows that the membership problem for the submonoid @xmath115 within @xmath12 is indeed undecidable .",
    "recall that a graph is not a transitive forest if and only if it either contains an induced @xmath19 or @xmath21 @xcite .",
    "together with mihailova s result for the generalized word problem of @xmath761 , theorems  [ t main ] and [ t p4 ] imply :    [ c submonoid graph group ] the submonoid membership problem for a graph group @xmath12 is decidable if and only if @xmath13 is a transitive forest .",
    "moreover , if @xmath13 is not a transitive forest , then there exists a fixed submonoid @xmath96 of @xmath12 such that the membership problem for @xmath96 within @xmath12 is undecidable .",
    "since @xmath21 is a chordal graph , the generalized word problem for @xmath762 is decidable @xcite .",
    "hence , @xmath762 is an example of a group for which the generalized word problem is decidable but the submonoid membership problem is undecidable .",
    "the definition of the class @xmath268 at the beginning of section  [ s rsmp ] leads to the question whether decidability of the rational subset membership problem is preserved under direct products with @xmath32 .",
    "an affirmative answer would lead in combination with the results from @xcite to a more direct proof of theorem  [ t dec ] .",
    "concerning graph groups , the precise borderline for the decidability of the generalized word problem remains open .",
    "by @xcite , the generalized word problem is decidable if the independence alphabet is chordal .",
    "since every transitive forest is chordal , theorem  [ t main ] does not add any new decidable cases .",
    "on the other hand , if the independence alphabet contains an induced @xmath19 , then the generalized word problem is undecidable @xcite .",
    "but it is open for instance , whether for a cycle of length 5 the corresponding graph group has a decidable generalized word problem .",
    "another open problem concerns the complexity of the rational subset membership problem for graph groups , where the independence alphabet is a transitive forest .",
    "if the independence alphabet is part of the input , then our decision procedure does not yield an elementary algorithm , i.e. , an algorithm where the running time is bounded by an exponent tower of fixed height .",
    "this is due to the fact that each calculation of the parikh image of a context - free language leads to an exponential blow - up in the size of the semilinear sets in the proof of lemma  [ l free product ] .",
    "an np lower bound follows from the np - completeness of integer programming .",
    "theorem  [ t submonoid ] and [ t submonoid hnn ] lead to various research directions .",
    "one might try to get rid of the restriction that @xmath763 for some @xmath36 , @xmath37 and the analogous restrictions for hnn extensions .",
    "these two results together would imply that corollary  [ c tf or rs ] holds for all groups with two or more ends .",
    "in fact it is natural to ask whether , for every finitely generated group @xmath1 , the submonoid membership and rational subset membership problems are recursively equivalent . by theorem  [ t submonoid ] , this is equivalent to the preservation of the decidability of the submonoid membership problem under free products ( which is again not known to hold ) : simply choose for @xmath11 in theorem  [ t submonoid ] any nontrivial group with a decidable rational subset membership problem .",
    "recall that the decidability of the generalized word problem as well as the rational subset membership problem is preserved under free products .",
    "notice that for a torsion group , the submonoid membership problem is equivalent to the generalized word problem , while the rational subset membership problem reduces to membership in products @xmath764 of finitely generated subgroups .",
    "j.  crisp and b.  wiest .",
    "embeddings of graph braid and surface groups in right - angled artin groups and braid groups .",
    "4:439472 , 2004 . m.  dehn .",
    "ber die toplogie des dreidimensionalen raumes .",
    ", 69:137168 , 1910 . in german .",
    "e.  s. esyp , i.  v. kazatchkov , and v.  n. remeslennikov .",
    "divisibility theory and complexity of algorithms for free partially commutative groups . in _",
    "groups , languages , algorithms _ , volume 378 of _ contemporary mathematics _ , pages 319348 .",
    "soc . , 2005 ."
  ],
  "abstract_text": [
    "<S> we show that the membership problem in a finitely generated submonoid of a graph group ( also called a right - angled artin group or a free partially commutative group ) is decidable if and only if the independence graph ( commutation graph ) is a transitive forest . as a consequence </S>",
    "<S> we obtain the first example of a finitely presented group with a decidable generalized word problem that does not have a decidable membership problem for finitely generated submonoids . </S>",
    "<S> we also show that the rational subset membership problem is decidable for a graph group if and only if the independence graph is a transitive forest , answering a question of kambites , silva , and the second author @xcite . </S>",
    "<S> finally we prove that for certain amalgamated free products and hnn - extensions the rational subset and submonoid membership problems are recursively equivalent . </S>",
    "<S> in particular , this applies to finitely generated groups with two or more ends that are either torsion - free or residually finite . </S>"
  ]
}