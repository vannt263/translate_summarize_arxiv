{
  "article_text": [
    "fock and goncharov conjectured that the algebra of functions on a cluster variety has a canonical vector space basis parameterized by the tropical points of the mirror cluster variety .",
    "unfortunately , as shown in @xcite by the first three authors of this paper , this conjecture is usually false : in general the cluster variety may have far too few global functions .",
    "one can only expect a power series version of the conjecture , holding in the `` large complex structure limit , '' and honest global functions parameterized by a subset of the mirror tropical points .",
    "for the conjecture to hold as stated , one needs further affineness assumptions . here",
    "we apply methods developed in the study of mirror symmetry , in particular _",
    "scattering diagrams _ , introduced by kontsevich and soibelman in @xcite for two dimensions and by gross and siebert in @xcite for all dimensions , _ broken lines _ , introduced by gross in @xcite and developed further by carl , pumperla and siebert in @xcite , and _ theta functions _ , introduced by gross , hacking ,",
    "keel and siebert , see @xcite , @xcite , @xcite , and @xcite , to prove the conjecture in this corrected form .",
    "we give in addition a formula for the structure constants in this basis , non - negative integers given by counts of broken lines .",
    "definitions of all these objects , essentially combinatorial in nature , in the context of cluster algebras will be given in later sections .",
    "here are more precise statements of our results .    for basic cluster variety notions we follow the notation of @xcite ,  2 , for convenience , as we have collected there a number of definitions across the literature ; nothing there is original .",
    "we recall some of this notation in appendices [ ldsec ] and [ rdsec ] .",
    "the various flavors of cluster varieties are all varieties of the form @xmath5 , where @xmath6 is a copy of the algebraic torus @xmath7\\ ] ] over a field @xmath8 of characteristic zero , and @xmath9 is a lattice , indexed by @xmath10 running over a set of _ seeds _ ( a seed being roughly an ordered basis for @xmath11 ) .",
    "the birational transformations induced by the inclusions of two different copies of the torus are compositions of _ mutations_. fock and goncharov introduced a simple way to dualize the mutations , and using this define the _ _ fock - goncharov dual _ _ , @xmath12 .",
    "we write @xmath13 for the tropical semi - field of integers under @xmath14 .",
    "there is a notion of the set of @xmath13-valued points of @xmath15 , written as @xmath16 .",
    "this can also be viewed as being canonically in bijection with @xmath17 , the set of divisorial discrete valuations on the field of rational functions of @xmath15 where the canonical volume form has a pole , see  [ tropsec ] .",
    "each choice of seed @xmath10 determines an identification @xmath18 .",
    "our main object of study is the _",
    "@xmath19 cluster variety with principal coefficients _ , @xmath20 .",
    "( see appendices [ ldsec ] and [ rdsec ] for notation . )",
    "this comes with a canonical fibration over a torus @xmath21 , and a canonical free action by a torus @xmath22 .",
    "we let @xmath23 .",
    "the fibre @xmath24 ( @xmath25 the identity ) is the fock - goncharov @xmath19 variety ( whose algebra of regular functions is the fomin - zelevinsky upper cluster algebra ) .",
    "the quotient @xmath26 is the fock - goncharov @xmath27 variety .",
    "[ globalmonomialdef ] a _ global monomial _ on a cluster variety @xmath28 is a regular function on @xmath15 which restricts to a character on some torus @xmath6 in the atlas . for @xmath15",
    "an @xmath19-type cluster variety a global monomial is the same as a cluster monomial .",
    "one defines the _ upper cluster algebra _ @xmath29 associated to @xmath15 by @xmath30 , and the _ ordinary cluster algebra _",
    "@xmath31 to be the subalgebra of @xmath29 generated by global monomials .",
    "for example , @xmath32 is the original cluster algebra defined by fomin and zelevinsky in @xcite , and @xmath33 is the corresponding upper cluster algebra as defined in @xcite .",
    "given a global monomial @xmath34 on @xmath15 , there is a seed @xmath10 such that @xmath35 is a character @xmath36 , @xmath37 . because the seed @xmath10 gives an identification of @xmath38 with @xmath39 , we obtain an element @xmath40 , which we show is well - defined ( independent of the open set @xmath6 ) , see lemma [ fgccthg2 ] .",
    "this is the _",
    "@xmath41-vector _ of the global monomial @xmath34 .",
    "we show this notion of @xmath41-vector coincides with the notion of @xmath41-vector from @xcite in the @xmath19 case , see corollary [ gvecthm ] .",
    "let @xmath42 be the set of @xmath41-vectors of all global monomials on @xmath15 .",
    "finally , we write @xmath43 for the @xmath8-vector space with basis @xmath44 , i.e. , @xmath45 ( where @xmath46 for the moment indicates the abstract basis element corresponding to @xmath47 ) .    fock and goncharov s dual basis conjecture says that @xmath43 is canonically identified with the vector space @xmath29 , and so in particular @xmath43 should have a canonical @xmath8-algebra structure .",
    "note that such an algebra structure is determined by its structure constants , a function @xmath48 such that for fixed @xmath49 , @xmath50 for all but finitely many @xmath51 and @xmath52    with this in mind , we have :    [ mainth ] let @xmath15 be one of @xmath53 .",
    "the following hold :    1 .",
    "there are canonically defined non - negative _ structure constants _ @xmath54 these are given by counts of _ broken lines _",
    ", certain combinatorial objects which we will define .",
    "the value @xmath55 is not taken in the @xmath27 or @xmath56 case .",
    "2 .   there is a canonically defined subset @xmath57 with @xmath58 such that the restriction of @xmath59 gives the vector subspace @xmath60 with basis indexed by @xmath61 the structure of an associative commutative @xmath8-algebra .",
    "3 .   @xmath62 , i.e. , @xmath61 contains the @xmath41-vector of each global monomial .",
    "4 .   for the lattice structure on @xmath44 determined by any choice of seed , @xmath57 is closed under addition .",
    "furthermore , @xmath57 is saturated : for @xmath63 and @xmath64 , @xmath65 if and only if @xmath66 .",
    "there is a canonical @xmath8-algebra map @xmath67 which sends @xmath46 for @xmath68 to the corresponding global monomial .",
    "the image @xmath69 is a universal positive laurent polynomial ( i.e. , a laurent polynomial with non - negative integral coefficients in the cluster variables for each seed )",
    "@xmath70 is injective for @xmath71 or @xmath72 .",
    "furthermore , @xmath70 is injective for @xmath73 under the additional assumption that there is a seed @xmath74 for which all the covectors @xmath75 , @xmath76 , lie in a strictly convex cone .",
    "when @xmath70 is injective we have canonical inclusions @xmath77    there is an analog to theorem [ mainth ] for @xmath78 ( the main difference is that the _ theta functions _ ,",
    "i.e. , the canonical basis for @xmath79 , are only defined up to scaling each individual element , and the structure constants will not in general be integers ) .",
    "injectivity in ( 7 ) holds for very general @xmath78 .",
    "see theorem [ mainthax ] .",
    "note that ( 5 - 6 ) immediately imply :    [ poslp ] each cluster variable of an @xmath19-cluster algebra is a laurent polynomial with non - negative integer coefficients in the cluster variables of any given seed .",
    "this was conjectured by fomin and zelevinsky in their original paper @xcite .",
    "positivity was obtained independently in the skew - symmetric case by [ ls13 ] , by an entirely different argument . in our proof",
    "the positivity in ( 1 ) and ( 6 ) both come from positivity in the scattering diagram , a powerful tool fundamental to the entire paper",
    ". see theorem [ scatdiagpositive ] .",
    "we conjecture that injectivity in ( 7 ) holds for all @xmath78 ( without the convexity assumption ) .",
    "note ( 7 ) includes the linear independence of cluster monomials , which has already been established ( without convexity assumptions ) for skew - symmetric cluster algebras in @xcite , by a very different argument .",
    "the linear independence of cluster monomials in the principal case also follows easily from our scattering diagram technology , as pointed out to us by greg muller .",
    "see theorem [ properlaurentproperty ] .",
    "when there are frozen variables , one obtains a partial compactification @xmath80 ( where the frozen variables are allowed to take the value @xmath81 ) for @xmath82 , @xmath56 or @xmath78 .",
    "the notions of @xmath83 , @xmath84 , @xmath85 , and @xmath86 extend naturally to @xmath87 .",
    "see construction [ fvss ] .",
    "of course if @xmath88 , and we have injectivity in ( 7 ) , @xmath89 has a canonical basis @xmath61 with the given properties",
    ". also , @xmath88 implies , under certain hypotheses , @xmath90 , see lemma [ midocalem ] .",
    "such partial compactifications are essential for representation - theoretic applications :    [ slrexample ] let @xmath91 .",
    "choose a borel subgroup @xmath92 of @xmath93 , @xmath94 a maximal torus , and let @xmath95 $ ] be the unipotent radical of @xmath92 .",
    "these choices determine a cluster variety structure ( with frozen variables ) on @xmath96 , with @xmath97 , the ring of regular functions on @xmath98 , see @xcite ,  10.4.2 .",
    "theorem [ mainth ] implies that these choices canonically determine a vector space basis @xmath99 .",
    "each basis element is an @xmath100-eigenfunction for the natural ( right ) action of @xmath100 on @xmath98 .",
    "for each character @xmath101 , @xmath102 is a basis of the weight space @xmath103 .",
    "the @xmath104 are the collection of irreducible representations of @xmath93 , each of which thus inherits a basis , canonically determined by the choice of @xmath105 .",
    "we give , combining our results with results of t.  magee , much more precise results , see corollary [ slrcor ] below .",
    "canonical bases for @xmath106 have been constructed by lusztig . here",
    "we will obtain bases by a procedure very different from lusztig s , as a special case of the more general @xcite , conjecture 0.6 , which applies in theory to any variety with the right sort of volume form .",
    "see remark [ clusterindependenceremark ] for further commentary on this .",
    "the tools necessary for the proof of theorem [ mainth ] are developed in the first six sections of the paper , with the proof given in  [ midclustersection ] . this material is summarized in more detail in  [ intro1.2 ] .",
    "the second part of the paper turns to criteria for the full fock - goncharov conjecture to hold .",
    "precisely :    [ fgconjdef ] we say the _ full fock - goncharov conjecture holds _ for a cluster variety @xmath15 if the map @xmath107 of theorem [ mainth ] is injective , @xmath108 note this implies @xmath109 .",
    "we prove a number of criteria which guarantee the full fock - goncharov conjecture holds .",
    "one such condition , which seems to be very natural in our setup and is implied , say , by the existence of a maximal green sequence , is :    [ proposition [ egmscprop ] ] if the set @xmath110 of all @xmath41-vectors of global monomials of @xmath111 in @xmath112 is not contained in a half - space under the identification of @xmath112 with @xmath113 induced by some choice of seed , then the full fock - goncharov conjecture holds for @xmath56 , @xmath27 , very general @xmath78 and , if the convexity condition ( 7 ) of theorem [ mainth ] holds , for @xmath19 .",
    "many of the results in the second part of the paper are proved using a generalized notion of convex function or convex polytope , see   [ intro1.3 ] and [ intro1.4 ] for more details .    in  [ candsec ] , we turn to results on partial compactifications .",
    "we first explain how convex polytopes in our sense give rise , under suitable hypotheses , to compactifications of @xmath19-type cluster varieties and toric degenerations of such .",
    "this connects our constructions to the mirror symmetry picture described in @xcite , and in particular describes a partial compactification of @xmath56 as giving a degeneration of a family of log calabi - yau varieties to a toric variety .",
    "partial compactifications via frozen variables are also important in representation theoretic applications , as already indicated in example [ slrexample ] .",
    "we prove results for such partial compactifications which , combined with recent results of t.  magee @xcite , @xcite , yield strong representation - theoretic results , see  [ intro1.4 ] for more details .",
    "we now turn to a more detailed summary of the contents of the paper .      ",
    "[ scatdiagsection ] is devoted to the construction of the fundamental tool of the paper , _ scattering diagrams_. while @xcite defined these in much greater generality , here they are collections of walls living in a vector space with attached functions constructed canonically from a choice of seed data .",
    "a precise definition can be found in  [ defconstsection ] .",
    "here we simply highlight the main new result theorem [ scatdiagpositive ] , whose proof , being fairly technical , is deferred to appendix [ scatappendix ] .",
    "this says that the functions attached to walls of a scattering diagram associated to seed data have positive coefficients .",
    "all positivity results in this paper flow from this fundamental observation , and indeed many of our arguments use this in an essential way . for the reader s convenience , we give in  [ consistentscatdiagramsection ] an elementary construction of the relevant scattering diagrams , drawing on the method given in @xcite . since a scattering diagram depends on a choice of seed ,  [ mutinvsec ] shows how scattering diagrams associated to mutation equivalent seeds are related .",
    "this shows that a scattering diagram has a chamber structure indexed by seeds mutation equivalent to the initial choice of seed .    in  [ tropsec ]",
    ", we review some notions of tropicalizations of cluster varieties , showing that scattering diagrams naturally live in such tropicalizations . indeed , the scattering diagram which is associated to a cluster variety @xmath15 lives naturally in the tropical space of the fock - goncharov dual @xmath114 .",
    "these tropicalizations , crucially , can only be viewed as piecewise linear , rather than linear , spaces , with a choice of seed giving an identification of the tropicalization with a linear space .",
    "already the mutation combinatorics becomes apparent :    [ fgcclemth ] for each seed @xmath74 of a @xmath19-cluster variety , the _",
    "( fock - goncharov ) cluster chamber _ associated to @xmath10 is @xmath115 where @xmath116 denotes the tropicalization of the monomial @xmath117 , see  [ tropsec ] .",
    "the collection @xmath118 of such subsets of @xmath119 over all mutation equivalent seeds form the maximal cones of a simplicial fan , the _",
    "( fock - goncharov ) cluster complex_. the fomin - zelevinsky exchange graph is the dual graph of this fan .",
    "the collection of cones @xmath118 was introduced by fock and goncharov , who conjectured they formed a fan .",
    "it is not at all obvious from the definition that the interiors of the cones can not overlap .",
    "our description of the chamber structure induced by a scattering diagram in fact shows that part of the chamber structure coincides with the collection of cones @xmath118 .",
    "this shows the fact they form a fan directly .",
    "in addition , the set @xmath110 of theorem [ mainth ] consists of the integral points of the union of cones in @xmath118 .     [ blsec ] gives the definition of broken line , the second principal combinatorial tool of the paper .",
    "these were originally introduced in @xcite and developed further in @xcite as tropical replacements for maslov index two disks . in @xcite , they were used to define _ theta functions _ , which are , in principle , formal sums over all broken lines with fixed boundary conditions .",
    "the relevance of theta functions for us comes in  [ basection ] . here",
    "we show the direct relationship between scattering diagrams and the @xmath19 cluster algebra .",
    "we show that if we associate a suitable torus @xmath120 to each chamber of the scattering diagram associated to a mutation of the initial seed , then the walls separating the chambers can be interpreted as giving birational maps between these tori .",
    "gluing together these copies of @xmath120 gives the @xmath19 cluster variety , see theorem [ rpth ] .",
    "further , a theta function @xmath121 depends on a point @xmath122 .",
    "if for a given choice of @xmath123 , @xmath121 is in fact a finite sum , then @xmath121 is a global function on @xmath19 .",
    "we show that this holds in particular when @xmath123 lies in the cluster complex @xmath118 , and in this case @xmath121 agrees with the cluster monomial with @xmath41-vector given by @xmath123 .",
    "because of the positivity result theorem [ scatdiagpositive ] , @xmath121 is in any event always a power series with positive coefficients .",
    "thus we get positivity of the laurent phenomenon , theorem [ pilpth ] , as an easy consequence of our formalism .",
    "in  [ cgvectorsec ] we begin with what is another essential observation for our approach .",
    "a choice of initial seed @xmath10 provides a partial compactification @xmath124 of @xmath56 by allowing the variables @xmath125 ( the principal coefficients ) to be zero .",
    "these variables induce a flat map @xmath126 , with @xmath19 being the fibre over @xmath127 .",
    "our methods easily show :    [ cftth ] ( corollary [ mutcor ] , ( 1 ) ) the central fibre @xmath128 is the algebraic torus @xmath129 .    though immediate from our scattering diagram methods , the result is not obvious from the original definitions : indeed , it is equivalent to the sign - coherence of @xmath130-vectors , see corollary [ sccveccor ] .",
    "the last major ingredient in the proof of theorem [ mainth ] is a formal version of the fock - goncharov conjecture . as mentioned above",
    ", this conjecture does not hold in general , but in  [ formalfgcsec ] , we show that the fock - goncharov conjecture holds in a formal neighbourhood of the torus fibre of @xmath131 .",
    "we show the structure constants given in theorem [ mainth ] , ( 1 ) , have a tropical interpretation and determine an associative product on @xmath132 , except that @xmath133 will in general be an infinite sum of theta functions .",
    "further , canonically associated to each universal laurent polynomial @xmath134 is a formal power series @xmath135 which converges to @xmath41 in a formal neighbourhood of the central fibre . for the precise statement see theorem [ ffgth ] , which we interpret as saying that the fock - goncharov dual basis conjecture always holds in the _ large complex structure limit_. this is all one should expect from log calabi - yau mirror symmetry , in the absence of further affineness assumptions .",
    "a crucial point , shown in the proof of theorem [ ffgth ] , is that the expansion of @xmath136 is independent of the choice of seed @xmath10 determining the compactification @xmath124 , i.e. , is independent of which degeneration is used to perform the expansion .    in  [ midclustersection ]",
    ", we introduce the middle cluster algebra @xmath137 .",
    "the idea is that while we do nt know that every regular function on @xmath56 can be written as a linear combination of theta functions , there is a set @xmath138 indexing those @xmath123 for which @xmath121 is a regular function on @xmath56 .",
    "these in fact yield a vector space basis for a subalgebra of @xmath139 which necessarily includes all cluster monomials , hence includes the ordinary cluster algebra . with this in hand ,",
    "theorem [ mainth ] becomes a summary of the results proved up to this point .",
    "we then deduce the result for @xmath27 and @xmath19-type cluster varieties from the @xmath56 case .",
    "we now turn to the use of convexity conditions to prove the fock - goncharov conjecture in a number of different situations , as covered in  [ ppsec ] . to motivate the concepts ,",
    "let us define a _ partial minimal model _ of a log calabi - yau variety @xmath15 .",
    "this is an inclusion @xmath140 as an open subset such that the canonical volume form on @xmath15 has a simple pole along each irreducible divisor of the boundary @xmath141 .",
    "for example , a partial minimal model for an algebraic torus is the same as a toric compactification .",
    "we wish to extend elementary constructions of toric geometry to the cluster case .",
    "for example , the partial compactification @xmath142 determined by frozen variables is a partial minimal model .",
    "the generalisation of the cocharacter lattice @xmath143 of the algebraic torus @xmath144 is the tropical set @xmath145 of @xmath15 .",
    "the main difference between the torus and the general case is that @xmath146 is not in general a vector space .",
    "indeed , the identification of @xmath147 with the cocharacter lattices of various charts of @xmath15 induce piecewise linear ( but not linear ) identifications between the cocharacter lattices . as a result ,",
    "a piecewise straight path in @xmath146 which is straight under one identification @xmath148 will be bent under another .",
    "thus the usual notions of straight lines , convex functions or convex sets do not make sense on @xmath149 .",
    "the idea for generalizing the notion of convexity is to instead make use of broken lines , which are piecewise linear paths in @xmath149 . using broken lines in place of straight lines",
    "we can say which piecewise linear functions , and thus which polytopes , are convex , see definition [ imcdef ] .",
    "each regular function @xmath150 has a canonical piecewise linear tropicalisation @xmath151 , which we conjecture is convex in the sense of definition [ imcdef ] , see conjecture [ dcon ] .",
    "the conjecture is easy for @xmath152 , see proposition [ convcor ] .",
    "each _ convex _",
    "piecewise linear @xmath153 gives a _ convex _",
    "polytope @xmath154 and a _ convex _",
    "cone @xmath155 , where italics indicates convexity in our broken line sense .",
    "we believe the existence of a bounded polytope is equivalent to the full fock - goncharov conjecture :    [ ffgconj ] the full fock - goncharov conjecture holds for @xmath56 if and only if the tropical space @xmath156 contains a full dimensional bounded polytope , convex in our sense .",
    "the examples of @xcite ,  7 , show that for the full fock - goncharov conjecture to hold , we need to assume @xmath15 has enough global functions . in that case tropicalizing a general function gives ( conjecturally ) a bounded",
    "_ convex _ polytope .",
    "as we are unable to prove conjecture [ dcon ] except in the monomial case we use a restricted version ( which happily still has wide application ) :    [ gmdef ] a cluster variety @xmath15 has _ enough global monomials _ ( egm ) if for each valuation @xmath157 there is a global monomial @xmath34 with @xmath158 .",
    "the condition that @xmath15 has egm is equivalent to the existence of @xmath159 whose associated convex polytope @xmath160 is bounded , see lemma [ egmlem ] .",
    "the following theorem demonstrates the value of the egm condition :    [ egmth ] let @xmath15 be a cluster variety .",
    "then :    1 .   ( proposition [ cafin ] ,",
    "corollary [ fgcor ] ) if @xmath161 satisfies the egm condition , then the multiplication rule on @xmath43 is polynomial , i.e. , for given @xmath162 , @xmath163 for all but finitely many @xmath164 .",
    "this gives @xmath43 the structure of a finitely generated commutative associative @xmath8-algebra .",
    "2 .   ( proposition [ markscor ] )",
    "if @xmath165 and @xmath15 satisfies the egm condition , then there are canonical inclusions @xmath166 3 .",
    "( theorem [ fgscth ] , ( 2 ) ) for @xmath167 , if @xmath139 is generated by finitely many cluster variables , then the full fock - goncharov conjecture holds for @xmath15 ( definition [ fgconjdef ] ) .",
    "4 .   ( proposition [ egmscprop ] ) if the set @xmath110 of all @xmath41-vectors of global monomials of @xmath111 in @xmath112 is not contained in a half - space under the identification of @xmath112 with @xmath113 induced by some choice of seed , then the full fock - goncharov conjecture ( see definition [ fgconjdef ] ) holds for @xmath56 , @xmath27 , very general @xmath78 and , if the convexity condition ( 7 ) of theorem [ mainth ] holds , for @xmath19 .",
    "[ markovremark ] we believe , based on calculations in @xcite ,  7.1 , that the conditions of the theorem ( @xmath56 has egm , and @xmath168 ) hold for the cluster variety associated with the once punctured torus , see some details in examples [ standardexample ] and [ examples2 ] . however , the equality @xmath169 is expected to fail , and in particular in this case we expect the full fock - goncharov holds for @xmath170 and very general @xmath171 but not for @xmath19 .",
    "we note that @xmath56 has enough global monomials in many cases :    [ egmprop ] consider the following conditions on a cluster algebra @xmath19 :    1 .",
    "the exchange matrix has full rank , @xmath33 is generated by finitely many cluster variables , and @xmath172 is a smooth affine variety .",
    "@xmath19 has an acyclic seed .",
    "3 .   @xmath19 has a seed with a maximal green sequence .",
    "4 .   for some seed ,",
    "the cluster complex @xmath173 is not contained in a half - space .",
    "@xmath56 has enough global monomials .",
    "then ( 1 ) implies ( 5 ) ( proposition [ egmprop1 ] ) .",
    "furthermore , ( 2 ) implies ( 3 ) implies ( 4 ) implies ( 5 ) ( propositions [ mgsrem ] , [ gsprop ] , and [ ldegmprop ] ) . finally ( 4 ) implies the full fock - goncharov conjecture , for @xmath71 , @xmath27 , or very general @xmath78 , or , under the convexity assumption ( 7 ) of theorem [ mainth ] , for @xmath19 ( proposition [ egmscprop ] ) .",
    "[ nex ] a recent paper @xcite of goodearl and yakimov announces the equality @xmath174 for all double bruhat cells in semi - simple groups . in this case",
    ", yakimov has furthermore announced the existence of a maximal green sequence .",
    "many cluster varieties @xmath19 associated to a marked bordered surface with at least two punctures also have a maximal green sequence , see @xcite ,  1.3 for a summary of known results on this .",
    "the recent @xcite , theorem 1.12,1.17 , shows that ( 4 ) holds for the fock - goncharov cluster varieties of @xmath175 local systems on _ most _ decorated surfaces . together with proposition [ egmprop ]",
    "these results imply the full fock - goncharov theorem in any of these cases .",
    "we note that for the cluster algebra associated to a marked bordered surface , a canonical basis of @xmath176 parameterized by @xmath177 has been previously obtained by fock - goncharov , @xcite , theorem 12.3 .",
    "they show that the @xmath19 and @xmath27 varieties have natural modular meaning as moduli spaces of local systems .",
    "they identify @xmath177 with a space of integer laminations ( isotopy classes of disjoint loops with integer weights ) and their associated basis element is a natural function given by trace of monodromy around a loop .",
    "we checked , together with a.  neitzke , that our basis agrees with the fock - goncharov basis of trace functions in the case of a sphere with four punctures , for primitive elements of the tropical set .",
    "our theta function basis comes canonically from the cluster structure ( it does not depend on any modular interpretation ) .",
    "[ clusterindependenceremark ] in general , we conjecture the bases we construct for rings of global functions on cluster varieties @xmath15 or partial compactifications @xmath87 are intrinsic to the underlying log calabi - yau variety @xmath15 , and do not depend on the particular cluster structure on @xmath15 .",
    "this is a non - trivial statement : there exist varieties with multiple cluster structures ( in particular different atlases of tori for the same variety ) .",
    "yan zhou will show in her ph.d .",
    "thesis that the ( principal coefficient version of ) the cluster variety associated to the once - punctured torus is an example .",
    "this conjecture is suggested by @xcite , conjecture 0.6 , and the results of @xcite , @xcite and @xcite prove this in the case of the @xmath27 cluster varieties where the skew - symmetric form has rank two , which includes the case of the sphere with four punctures .",
    "thus we have the ( at least to us ) remarkable conclusion that in many cases where bases occur because of some extrinsic interpretation of the spaces , in fact this extrinsic interpretation is irrelevant .",
    "for example , the theta functions given by trace functions above , which would appear to depend on the realization of the cluster variety as a moduli space of local systems , are actually intrinsic to the underlying variety . in the case of example",
    "[ slrexample ] , where bases may arise from representation theory , our basis does not use the group - theoretic aspects of the spaces .",
    "the suggestion that the canonical basis is independent of the cluster structure may surprise some , as understanding the canonical basis was the initial motivation for the fomin - zelevinsky definition of cluster algebras .    returning to the role of convexity notions , we note that our formula for the structure constants @xmath59 of theorem [ mainth ] , ( 1 ) is given by counting broken lines .",
    "as a result , our notion of convexity interacts nicely with the multiplication rule .",
    "this allows us to generalize basic polyhedral constructions from toric geometry in a straight - forward way .",
    "a polytope @xmath178 convex in our sense determines ( by familiar rees - type constructions for graded rings ) a compactification of @xmath15 .",
    "furthermore , for any choice of seed , @xmath114 is identified with a linear space @xmath179 and @xmath180 with an ordinary convex polytope .",
    "our construction also gives a flat degeneration of this compactification of @xmath15 to the ordinary polarized toric variety for @xmath181 .",
    "see  [ candsec ] .",
    "we expect this specializes to a uniform construction of many degenerations of representation theoretic objects to toric varieties , see e.g. , @xcite , @xcite , and @xcite .",
    "applied to the fock - goncharov moduli spaces of @xmath93-local systems , this will give for the first time compactifications of character varieties with nice ( e.g. , toroidal anti - canonical ) boundary .",
    "see remark [ crems ] .",
    "the polytope can be chosen so that the boundary of the compactification is very simple , a union of toric varieties . for example , let @xmath182 be the open subset where the frozen variables for the standard cluster structure are non - vanishing .",
    "then the boundary @xmath183 consists of a union of certain schubert cells .",
    "we obtain using a polytope an alternative compactification where the schubert cells ( which are highly non - toric ) are replaced by toric varieties .",
    "see theorem [ toricbth ] .",
    "the fock - goncharov conjecture is the cluster special case of @xcite , conjecture 0.6 , which says ( roughly ) that affine log cys with maximal boundary come in canonical dual pairs with the tropical set of one parameterizing a canonical basis of functions on the other .",
    "we can view the conjecture as having two parts : first , that the vector space , @xmath85 , with this basis @xmath184 is naturally an algebra in a such a way that @xmath185 is an affine log cy . and then furthermore , that this log cy is the mirror  in the cluster case the fock - goncharov dual ( it is natural to further ask if this is the mirror in the sense of hms but we do not consider this question here ) .",
    "our deepest mirror theoretic result is the following weakening of the first part :    assume @xmath186 has egm . then for @xmath187 or @xmath78 for very general @xmath188 , or , under the convexity assumption ( 7 ) of theorem [ mainth ] , @xmath19 , @xmath43 ( with structure constants as in [ mainth ] ) is a finitely generated algebra and @xmath189 is a log canonical gorenstein @xmath190-trivial affine variety of dimension @xmath191 .    for the proof see theorem [ cfcor ] .",
    "we turn to  [ pcrtsec ] . here",
    "we study features of partial compactifications coming from frozen variables .",
    "as explained in example [ slrexample ] , these partial compactifications are often the relevant ones in representation - theoretic examples . in particular , for a partial minimal model @xmath142 , often the vector subspace @xmath192 is more important than @xmath33 itself .",
    "for example there is a cluster structure with frozen variables for the open double bruhat cell @xmath1 in a semi - simple group @xmath93 .",
    "then @xmath33 is the ring of functions on the open double bruhat cell and @xmath193 .",
    "of course @xmath194 is the most important representation of @xmath93 .",
    "however , one can not expect a canonical basis of @xmath195 , i.e. , one determined by the intrinsic geometry of @xmath196 .",
    "for example , @xmath93 has no non - constant global functions which are eigenfunctions for the action of @xmath93 on itself .",
    "but we expect , and in the myriad cases above can prove , that the affine log calabi - yau open subset @xmath142 has a canonical basis , @xmath61 , and we believe that @xmath197 , the set of theta functions on @xmath19 that extends regularly to all of @xmath196 , is a basis for @xmath195 , canonically associated to the choice of log calabi - yau open subset @xmath142 , see @xcite , remark 1.10 .",
    "this is not a basis of @xmath93-eigenfunctions , but they are eigenfunctions for the associated maximal torus , which is the subgroup of @xmath93 that preserves @xmath1 .",
    "this is exactly what one should expect : the basis is not intrinsic to @xmath93 , instead it is ( we conjecture ) intrinsic to the pair @xmath198 , see remark [ clusterindependenceremark ] .",
    "we shall now describe in more detail what can be proved for partial compactifications of cluster varieties coming from frozen variables .",
    "a key point is a technical but combinatorial hypothesis , that _ each variable has an _ optimized seed _ _ , see definition [ osdef ] and lemmas [ quiveroptimized ] and [ opslem ] . the main need for this hypothesis is proposition [ boundaryprop ] , which states that if a linear combination of theta functions extends across a boundary divisor then each theta function in the sum extends across the divisor .",
    "thus the middle cluster algebra , in this case , behaves well with respect to boundary divisors .",
    "happily , this condition holds for the cluster structures on the grassmannian , and , for @xmath4 , for the cluster structure on a maximal unipotent subgroup @xmath199 , the basic affine space @xmath200 , and the fock - goncharov cluster structure on @xmath201 , see remark [ osrem ] .",
    "let us now work with the principal cluster variety @xmath56 .",
    "consider the partial compactification @xmath202 by allowing the frozen variables to be zero .",
    "each boundary divisor @xmath203 gives a point @xmath204 and thus ( in general conjecturally ) , a canonical theta function @xmath205 on @xmath206 .",
    "we then define the _ potential _ @xmath207 as the sum of these theta functions .",
    "we have its piecewise linear tropicalisation @xmath208 .",
    "this defines a cone @xmath209    [ spth ] assume that each frozen index @xmath210 has an optimized seed . then :    1 .",
    "@xmath211 and @xmath180 are convex in our sense .",
    "2 .   the set @xmath212 parameterizes a canonical basis of an algebra @xmath213 , and @xmath214 3",
    ".   now assume further that we have enough global monomials on @xmath186 .",
    "if for some seed @xmath10 , @xmath180 is contained in the convex hull of @xmath61 ( which itself contains the convex hull of @xmath110 ) then @xmath215 , @xmath216 is finitely generated , and the integer points @xmath217 parameterize a canonical basis .",
    "each choice of seed identifies @xmath218 with a lattice , and the cone @xmath219 with a rational polyhedral cone , described by canonical linear inequalities given by the tropicalisation of the potential .",
    "note that @xmath180 is convex in our generalized sense .",
    "we show , making use of recent results of magee and goncharov - shen , @xcite , @xcite , @xcite , that in the representation theoretic examples which were the original motivation for the definition of cluster algebras our polyhedral cones @xmath180 specialize to the piecewise linear parameterizations of canonical bases of berenstein and zelevinsky @xcite , knutson and tao @xcite , and goncharov and shen @xcite :    [ slrcor ] let @xmath220 and let @xmath142 be the fomin - zelevinsky cluster variety for the basic affine space @xmath98 .    1 .",
    "all the hypotheses , and thus the conclusions , of theorem [ spth ] hold .",
    "in particular @xmath221 parameterizes a canonical theta function basis of @xmath222 .",
    "our potential @xmath223 agrees with the ( representation theoretically defined ) potential function of berenstein - kazhdan , @xcite .",
    "the maximal torus @xmath100 acts canonically on @xmath196 , preserving the open set @xmath142 .",
    "each theta function is an @xmath100-eigenfunction , and there is a canonical map @xmath224 ( the target is the character lattice of @xmath100 ) , linear for the linear structure given by any seed , which sends an integer point to the @xmath100-weight of the corresponding theta function .",
    "the slice @xmath225 parameterizes a canonical theta function basis of the eigenspace @xmath226 , the corresponding irreducible representation of @xmath93 . 5 .   for a natural choice of seed",
    "the _ cone _",
    "@xmath180 is canonically identified with the gelfand - tsetlin cone .",
    "[ conf3cor ] let @xmath142 be the fock - goncharov cluster variety for @xmath227    1 .",
    "all the hypotheses , and thus the conclusions , of theorem [ spth ] hold .",
    "in particular the cone @xmath221 parameterizes a canonical theta function basis of @xmath228 .",
    "our potential function @xmath223 agrees with the ( representation theoretically defined ) potential function of goncharov - shen , @xcite .",
    "@xmath229 acts canonically on @xmath196 , preserving the open subset @xmath142 .",
    "each theta function is an @xmath100-eigenfunction , and there is a canonical map @xmath230 linear for the linear structure given by any seed , which sends an integer point to the @xmath229-weight of the corresponding theta function .",
    "the slice @xmath231 parameterizes a canonical theta function basis of the eigenspace @xmath232 in particular the number of integral points in @xmath233 is the corresponding littlewood - richardson coefficient .",
    "5 .   for a natural choice of seed ,",
    "the cone @xmath180 is canonically identified with the knutson - tao hive .",
    "these corollaries are proven at the end of  [ fullfgsection ] .",
    "we stress here that the above representation theoretic results come _ for free _ from general properties of our mirror symmetry construction : any partial minimal model @xmath234 of an affine log calabi - yau variety with maximal boundary determines ( in general conjecturally ) a cone @xmath235 with the analogous meaning .",
    "we are getting these basic representation theoretic results without representation theory !",
    "we recover the remarkable gelfand - tsetlin and hive polytopes for a particular choice of seed .",
    "different ( among the infinitely many possible ) choices of seed give in general combinatorially different cones , whose integer points parameterize the same theta function basis .",
    "the canonical object is the _ convex cone _",
    "@xmath236 cut out by @xmath211 , different ( by piecewise linear mutation ) identifications of @xmath237 with a vector space give different incarnations of @xmath180 as convex cones in the usual sense .",
    "potentials were considered in the work of goncharov and shen , @xcite , which in turn built on work of berenstein and zelevinsky , @xcite and berenstein and kazhdan , @xcite , @xcite .",
    "the potential constructed by goncharov and shen has a beautiful representation theoretic definition , and was found in many situations to coincide with known constructions of landau - ginzburg potentials . on the other hand ,",
    "the construction of the potential in terms of theta functions coincides precisely with the construction of the mirror landau - ginzburg potential as carried out in @xcite,@xcite .",
    "the latter work can be viewed as a tropicalization of the descriptions of the potential in terms of holomorphic disks in @xcite,@xcite .",
    "thus our construction explains the emergence of the landau - ginzburg potentials in @xcite .",
    "our potentials are determined by the cluster structure ( and conjecturally , just the underlying log calabi - yau variety ) , and in particular are independent of any modular or representation theoretic interpretation of the cluster variety .",
    "this gives , as in remark [ clusterindependenceremark ] , the remarkable suggestion that e.g. , the representation theoretically defined goncharov - shen potential , which would seem to depend heavily on the modular interpretation of @xmath238 , is actually intrinsic to the partial minimal model @xmath142 .",
    "_ acknowledgments _ : we received considerable inspiration from conversations with a. berenstein , v.  fock , s.  fomin , a.  goncharov , b.  keller , b.  leclerc , j.  kollr , g.  muller , g.  musiker , a.  neitzke , d.  rupel , m.  shapiro , b.  siebert , y.  soibelman , and d.  speyer .",
    "the first author was partially supported by nsf grant dms-1262531 and a royal society wolfson research merit award , the second by nsf grants dms-1201439 and dms-1601065 , and the third by nsf grant dms-0854747 .",
    "some of the research was conducted when the first and third authors visited the fourth at i.h.e.s , during the summers of 2012 and 2013 .",
    "here we recall the basic properties of scattering diagrams , the main technical tool in this paper .",
    "scattering diagrams appeared first in @xcite in two dimensions , and then in all dimensions in @xcite , with another approach in a more specific case in @xcite .",
    "here we give a self - contained treatment restricted to the specific case needed in this paper .",
    "we start with a choice of _ fixed data _ @xmath239 as defined in @xcite , which for the reader s convenience is described at the beginning of appendix [ ldsec ] . in brief",
    ", this entails a lattice @xmath240 with dual lattice @xmath241 , a skew - symmetric form @xmath242 sublattices @xmath243 with @xmath244 a saturated sublattice and @xmath245 a sublattice of finite index with dual lattice @xmath246 , an index set @xmath247 with @xmath248 and a subset @xmath249 with @xmath250 , as well as positive integers @xmath251 , @xmath252 .",
    "finally we also choose an initial seed @xmath10 , i.e. , a basis @xmath253 of @xmath240 .",
    "see appendix [ ldsec ] for the precise properties that all this data must satisfy .    for the construction of the scattering diagram associated to this data",
    ", we will require    * the injectivity assumption*. the map @xmath254 given by @xmath255 is injective .",
    "while this does not hold for a general choice of fixed data , it does hold in the principal coefficient case ( see appendix [ rdsec ] ) , and results in this paper about arbitrary cluster varieties and algebras will be proved via the principal case .    set @xmath256 choose a linear function @xmath257 such @xmath258 for @xmath259 .    under the injectivity assumption , one can choose a strictly convex top - dimensional cone @xmath260 , with associated monoid @xmath261 , such that @xmath262 for all @xmath263 . here",
    "@xmath264 is the group of units of the monoid @xmath265 .",
    "this gives the monomial ideal @xmath266 $ ] in the monoid ring @xmath267 $ ] over a field @xmath8 of characteristic zero , and we write @xmath268}$ ] for the completion with respect to @xmath269 .",
    "we define the _ module of log derivations _ of @xmath267 $ ] as @xmath270):={\\bbbk}[p]\\otimes_{{\\mathbb{z } } } n^{\\circ},\\ ] ] with the action of @xmath271 on @xmath267 $ ] being given by @xmath272 so we write @xmath271 as @xmath273 .",
    "let @xmath274)}$ ] denote the completion of @xmath275)$ ] with respect to the ideal @xmath269 .    using this action , if @xmath276)}$ ] , then @xmath277})\\ ] ] makes sense using the taylor series for the exponential .",
    "we have the lie bracket @xmath278=z^{m+m ' } \\partial_{\\langle n , m'\\rangle n'-\\langle n',m\\rangle n}.\\ ] ] then @xmath279))$ ] can be viewed as a subgroup of the group of continuous automorphisms of @xmath268}$ ] which are the identity modulo @xmath269 , with the group law of composition coinciding with the group law coming from the baker - campbell - hausdorff formula .",
    "define the sub - lie algebra of @xmath275)={\\bbbk}[p]\\otimes_{{\\mathbb{z } } } n^{\\circ}$ ] @xmath280 where @xmath281 is the one - dimensional subspace of @xmath275)$ ] spanned by @xmath282 .",
    "we calculate that @xmath283 is in fact closed under lie bracket : @xmath284 = { } & z^{p_1^*(n+n')}\\left ( \\langle p_1^*(n'),n\\rangle\\partial_{n ' } -\\langle p_1^*(n),n'\\rangle\\partial_{n}\\right)\\\\ = { } & z^{p_1^*(n+n')}\\left ( \\{n ' , n\\}\\partial_{n'}-\\{n , n'\\}\\partial_n\\right)\\\\ = { } & \\{n',n\\ } z^{p_1^*(n+n')}\\partial_{n+n'}. \\end{split}\\end{aligned}\\ ] ]    we have @xmath285 a lie subalgebra , and @xmath286 a nilpotent lie algebra .",
    "we let @xmath287 be the corresponding nilpotent group .",
    "this group , as a set , is just @xmath288 , but multiplication is given by the baker - campbell - hausdorff formula .",
    "we set @xmath289 the corresponding pro - nilpotent group .",
    "we have the canonical set bijections @xmath290    for @xmath291 we define @xmath292 note that by the commutator formula , @xmath293 , hence @xmath294 , is abelian .    in",
    "what follows , noting that @xmath93 is a subgroup of @xmath295})$ ] , we will often describe elements of @xmath296 as follows .",
    "[ wcdef ] let @xmath291 , @xmath297 and @xmath298}$ ] .",
    "define @xmath299 to be the automorphism of @xmath268}$ ] given by @xmath300 where @xmath301 is the generator of the monoid @xmath302 .",
    "[ thetaflemma ] for @xmath303 , @xmath304})$ ] is the subgroup of automorphisms of the form @xmath305 for @xmath34 as in definition [ wcdef ] with the given @xmath291 .",
    "more specifically , @xmath306 acts as the automorphism @xmath305 with @xmath307 , where @xmath308 is the smallest positive rational number such that @xmath309 .",
    "let @xmath310})$ ] be the set of @xmath305 of the given form . then @xmath100 is a subgroup as @xmath311 . note that @xmath312 , where @xmath313 is as described in the statement .",
    "the exponential of this vector field is easily seen to act as @xmath305 with @xmath314 .",
    "hence @xmath315 . from this , we see also that if @xmath316 , then @xmath317 , and the latter lies in @xmath294 .",
    "[ walldef ] a _ wall _ in @xmath318 ( for @xmath319 and @xmath283 ) is a pair @xmath320 such that    1 .",
    "@xmath321 for some primitive @xmath291 .",
    "@xmath322 is a @xmath323-dimensional convex ( but not necessarily strictly convex ) rational polyhedral cone .",
    "the set @xmath324 is called the _ support _ of the wall @xmath320 .    using lemma [ thetaflemma ]",
    ", we often write a wall as @xmath325 for @xmath326}$ ] , necessarily of the form @xmath327 .",
    "we shall use this notation interchangeably without comment .",
    "[ ksscatdiagdef ] a _ scattering diagram @xmath328 for @xmath319 and @xmath283 _ is a set of walls such that for every degree @xmath329 , there are only a finite number of @xmath330 with the image of @xmath331 in @xmath332 not the identity .",
    "if @xmath328 is a scattering diagram , we write @xmath333 for the support and singular locus of the scattering diagram .",
    "if @xmath328 is a finite scattering diagram , then its support is a finite polyhedral cone complex .",
    "joint _ is an @xmath334-dimensional cell of this complex , so that @xmath335 is the union of all joints of @xmath328",
    ".    we will often ( especially in appendix [ scatappendix ] ) want to use a slightly more general notion of scattering diagram , where the elements attached to walls lie in some other choice of group @xmath336 arising from an @xmath319-graded lie algebra @xmath337 . in this case",
    "we talk about a scattering diagram for @xmath337 .",
    "for example , any scattering diagram for @xmath283 induces a finite scattering diagram for @xmath338 by taking the image of the attached group elements under the projection @xmath339 .    given a scattering diagram @xmath328",
    ", we obtain the _ path - ordered product_. assume given a smooth immersion @xmath340\\rightarrow m_{{\\mathbb{r}}}\\setminus{\\operatorname{sing}}({\\mathfrak{d}})\\ ] ] with endpoints not contained in the support of @xmath328 .",
    "assume @xmath341 is transversal to each wall of @xmath328 that it crosses .",
    "for each degree @xmath329 , we can find numbers @xmath342 and elements @xmath343 with the image of @xmath344 in @xmath332 non - trivial such that @xmath345 @xmath346 if @xmath347 , and @xmath348 taken as large as possible .",
    "( the @xmath349 are the times at which the path @xmath341 hits a wall .",
    "we allow @xmath350 because we may have two different walls @xmath351 which span the same hyperplane . )    for each @xmath210 , define @xmath352 where @xmath303 with @xmath353 .",
    "we then define @xmath354 if @xmath355 , then @xmath356 span the same hyperplane @xmath357 , hence @xmath358 .",
    "thus , since this latter group is abelian , @xmath344 and @xmath359 commute , so this product is well - defined .",
    "we then take @xmath360    we note that @xmath361 depends only on its homotopy class ( with fixed endpoints ) in @xmath362 .",
    "we also note that the definition can easily be extended to piecewise smooth paths @xmath341 , provided that the path always crosses a wall if it intersects it .",
    "two scattering diagrams @xmath328 , @xmath363 are _ equivalent _ if @xmath364 for all paths @xmath341 for which both are defined .",
    "call @xmath365 _ general _ if there is at most one rational hyperplane @xmath357 with @xmath366 . for",
    "@xmath367 general and @xmath328 a scattering diagram , let @xmath368 .",
    "one checks easily :    [ easyequivlemma ] two scattering diagrams @xmath369 are equivalent if and only if @xmath370 for all general @xmath367 .",
    "a scattering diagram @xmath328 is _ consistent _ if @xmath361 only depends on the endpoints of @xmath341 for any path @xmath341 for which @xmath361 is defined .",
    "we say a wall @xmath371 is _ incoming _ if @xmath372 otherwise , we say the wall is _ outgoing _",
    "( note in any case @xmath373 lies in the span of the wall @xmath357 ) .",
    "we call @xmath374 the _ direction _ of the wall .",
    "( this terminology comes from the case @xmath375 , where an outgoing wall is then a ray containing its direction vector , thus one that points outward . )",
    "we need one particular scattering diagram , determined by the fixed data and seed data . setting @xmath376 , @xmath263 , we start with the scattering diagram @xmath377    the main result on scattering diagrams , which follows easily from theorem [ kslemma ] , is the following .",
    "a more general version of this was proved in two dimensions in @xcite , and in a much more general context in all dimensions in @xcite . a simpler argument which applies to the case at hand",
    "was given in @xcite , which shall be reviewed in ",
    "[ consistentscatdiagramsection ] .",
    "[ kslemmags ] there is a scattering diagram @xmath378 satisfying :    1 .",
    "@xmath378 is consistent , 2 .",
    "@xmath379 , 3 .",
    "@xmath380 consists only of outgoing walls .",
    "moreover , @xmath378 satisfying these three properties is unique up to equivalence .",
    "the crucial positivity result satisfied by @xmath378 is now easily stated :    [ scatdiagpositive ] the scattering diagram @xmath378 is equivalent to a scattering diagram all of whose walls @xmath325 satisfy @xmath381 for some @xmath382 and @xmath130 a positive integer . in particular , all nonzero coefficients of @xmath383 are positive integers .    the proof is given in appendix [ scatappendix ] .",
    "the basic idea is that the construction of the scattering diagram @xmath378 can be reduced to repeated applications of the following example :    [ basicscatteringexample ] take @xmath384 , @xmath385 and the skew - symmetric form @xmath386 given by the matrix @xmath387 , where @xmath388 .",
    "let @xmath389 be the dual basis of @xmath390 , and write @xmath391 , @xmath392 .",
    "we get @xmath393 then one checks easily that @xmath394 see figure [ scat11 ] .",
    "( see for example @xcite , example 1.6 . )",
    "[ bcexample ] take @xmath395 , with basis @xmath390 , and take @xmath245 to be the sublattice generated by @xmath396 . further take @xmath397 , @xmath398 , where @xmath399 are two positive integers , and take the skew - symmetric form to be the same as in the previous example . then @xmath400 , @xmath401 . taking as before @xmath391 , @xmath392 , we get @xmath402 for most choices of @xmath403 and @xmath130 , this is a very complicated scattering diagram .",
    "a very similar scattering diagram , with functions @xmath404 and @xmath405 , has been analyzed in @xcite , but it is easy to translate this latter diagram to the one considered here by replacing @xmath406 by @xmath407 and using the change of lattice trick , which is given in step iv of the proof of proposition [ basicpositivity ] .",
    "all rays of @xmath408 are contained strictly in the fourth quadrant ( i.e. , in particular are not contained in an axis ) . without giving the details , we summarize the results .",
    "there are two linear operators @xmath409 given by the matrices in the basis @xmath410 as @xmath411 then @xmath412 is invariant under @xmath413 and @xmath414 , in the sense that if @xmath415 , we have @xmath416 provided @xmath417 is contained strictly in the fourth quadrant .",
    "it is also the case that applying @xmath414 to @xmath418 or @xmath413 to @xmath419 gives an element of @xmath412 .",
    "further , @xmath378 contains a discrete series of rays consisting of those rays in the fourth quadrant obtained by applying @xmath413 and @xmath414 alternately to the above rays supported on @xmath420 and @xmath421 .",
    "these rays necessarily have functions of the form @xmath422 or @xmath423 for various choices of @xmath59 and @xmath424 .",
    "if @xmath425 , we obtain a finite diagram .",
    "( moreover , the corresponding @xmath19 cluster variety is the cluster variety of finite type @xcite associated to the root system @xmath426 , @xmath427 , or @xmath428 for @xmath429 , @xmath430 , or @xmath431 respectively . ) if @xmath432 , these rays converge to the rays contained in the two eigenspaces of @xmath433 and @xmath434 .",
    "these are rays of slope @xmath435 .",
    "this gives a complete description of the rays outside of the cone spanned by these two rays .",
    "the expectation is that every ray of rational slope appears in the interior of this cone , and the attached functions are in general unknown .",
    "however , in the @xmath436 case , it is known @xcite that the function attached to the ray of slope @xmath437 is @xmath438 the chamber structure one sees outside the quadratic irrational cone is very well - behaved and familiar in cluster algebra theory . in particular , the interiors of the first , second and third quadrants are all connected components of @xmath439 , and there are for @xmath440 an infinite number of connected components in the fourth quadrant .",
    "we will see in  [ tropsec ] that this chamber structure is precisely the fock - goncharov cluster complex .",
    "on the other hand , it is precisely the rich structure inside the quadratic irrational cone which scattering diagram technology brings into the cluster algebra picture .      in this subsection",
    "we give more details about the construction of scattering diagrams , and in particular give results leading to the proof of theorem [ kslemmags ] .",
    "this material can be skipped on first reading , but is recommended before reading the more difficult material on scattering diagrams in appendix [ scatappendix ] .",
    "let @xmath328 be a scattering diagram .",
    "if we set @xmath441 then since any wall spans a hyperplane @xmath357 , for some @xmath291 , @xmath442    in particular , if @xmath328 is a consistent scattering diagram , then @xmath361 for @xmath341 a path with initial point in @xmath443 and final point in @xmath444 is independent of the particular choice of path ( or endpoints in @xmath445 ) .",
    "thus we obtain a well - defined element @xmath446 which only depends on the scattering diagram @xmath328 .",
    "[ maximscorrespondence ] the assignment of @xmath447 to @xmath328 gives a one - to - one correspondence between equivalence classes of consistent scattering diagrams and elements @xmath446 .",
    "this is a special case of @xcite , 2.1.6 .",
    "for the reader s convenience we include the short proof :    we need to show how to construct @xmath328 given @xmath446 .",
    "to do so , choose any @xmath303 primitive and a point @xmath448 general .",
    "then we can determine @xmath449 as follows , noting by lemma [ easyequivlemma ] that this information for all such @xmath450 and general @xmath367 determines @xmath328 up to equivalence .",
    "we can write @xmath451 with @xmath452 each of these subspaces of @xmath283 are closed under lie bracket , thus defining subgroups @xmath453 of @xmath93 .",
    "note by the generality assumption on @xmath367 , we in fact have @xmath454 .",
    "this splitting induces a unique factorization @xmath455 for any element @xmath456 .",
    "applying this to @xmath447 gives a well - defined element @xmath457 .",
    "we need to show that the set of data @xmath458 determines a scattering diagram @xmath328 such that @xmath459 for all general @xmath365 . to do this",
    ", one needs to know that to any finite order @xmath460 , the hyperplane @xmath357 is subdivided into a finite number of polyhedral cones @xmath461 such that the image of @xmath458 in @xmath332 is constant for @xmath462 .",
    "this is clear because the number of @xmath463 with @xmath464 is finite , as then the decomposition varies discretely with @xmath367 to order @xmath460 .",
    "we need to show that @xmath328 satisfies the condition that @xmath465 for any path @xmath341 from the positive to the negative chamber and that @xmath361 only depends on endpoints of @xmath341 .",
    "to do so , we work modulo @xmath466 for any @xmath460 , so we can assume @xmath328 has a finite number of walls .",
    "choose a general point @xmath467 .",
    "take a general two - dimensional subspace of @xmath318 containing @xmath468 , and after choosing a metric , let @xmath341 be a semi - circle in the two - dimensional subspace with endpoints @xmath468 and @xmath469 and center @xmath81 .",
    "then @xmath470 for points @xmath471 contained in walls crossed by @xmath341 and @xmath472 the element of @xmath473 determined by the factorization of @xmath447 above . note that if @xmath474 lies in the hyperplane @xmath475 , all the wall - crossing automorphisms of walls traversed by @xmath341 _ before _ crossing @xmath475 lie in @xmath476 and all those from walls traversed by @xmath341 _",
    "after _ crossing @xmath475 lie in @xmath477 .",
    "it then follows inductively that the factorization of @xmath447 given by @xmath474 takes the form @xmath478 for some @xmath479 .",
    "indeed , for @xmath480 , this just follows from the definition of @xmath481 , while if true for @xmath482 , then we have @xmath483 is a decomposition of @xmath447 induced by the splitting @xmath484 , and the claim then follows by the definition of @xmath472 .",
    "in particular , for @xmath485 , taking @xmath486 and noting that @xmath487 , one sees that @xmath488 .",
    "next we show the independence of path for the @xmath328 we have constructed , again modulo @xmath466 .",
    "it is sufficient to check @xmath489 as an element of @xmath332 for any small loop @xmath490 around any joint @xmath491 of @xmath328 .",
    "take @xmath492 a general point in @xmath491 , @xmath463 such that @xmath493 , and choose @xmath494 to be points in @xmath495 near @xmath492 on either side of the joint @xmath491 .",
    "let @xmath496 be two semi - circular paths with endpoints @xmath468 and @xmath469 and passing through @xmath494 respectively .",
    "then up to orientation @xmath497 is freely homotopic to @xmath490 in @xmath498 .",
    "thus @xmath499 .",
    "thus we have established the one - to - one correspondence between consistent scattering diagrams @xmath328 and elements of @xmath93 .",
    "following @xcite , we give an alternative parameterization of @xmath93 , as follows . for any @xmath303 primitive",
    ", we get the splitting @xmath500 where @xmath501 these give rise to subgroups @xmath502 of @xmath93 .",
    "we drop the @xmath450 when it is clear from context . again , this allows us to factor any @xmath456 as @xmath503 with @xmath504 , @xmath505 .",
    "we can further decompose @xmath506 , where @xmath507 , while @xmath508 involves those summands of @xmath509 coming from @xmath510 not proportional to @xmath450 .",
    "note that @xmath511\\subseteq { \\mathfrak{g}}_0^{\\perp}$ ] .",
    "indeed , if @xmath512 with @xmath513 for @xmath514 , we then have @xmath515 so that @xmath516 = 0 $ ] by ( [ liebracketform ] )",
    ". thus we have a projection homomorphism @xmath517 with kernel @xmath518 .",
    "in particular , the factorization @xmath503 yields an element @xmath519 via this projection .",
    "we then have a map ( of sets ) @xmath520    [ gparam ] @xmath521 is a set bijection    @xmath521 is induced by an analogous map to order @xmath460 , @xmath522 one checks easily that this is a bijection order by order .",
    "[ kslemma ] let @xmath328 be a consistent scattering diagram corresponding to @xmath523 .",
    "the following hold :    1 .   for each @xmath303 , to any fixed finite order",
    ", there is an open neighbourhood @xmath524 of @xmath525 such that @xmath526 for all general @xmath527 . here",
    "@xmath528 denotes the component of @xmath529 indexed by @xmath450 .",
    "@xmath328 is equivalent to a diagram with only one wall in @xmath357 containing @xmath525 for each @xmath303 , and the group element attached to this wall is @xmath530 .",
    "3 .   set @xmath531 then @xmath328 is equivalent to a consistent scattering diagram @xmath363 such that @xmath532 and @xmath533 consists only of outgoing walls .",
    "furthermore , up to equivalence @xmath363 is the unique consistent scattering diagram with this property .",
    "the equivalence class of a consistent scattering diagram is determined by its set of incoming walls .",
    "we note first that ( 3 ) of theorem [ kslemma ] implies theorem [ kslemmags ] .",
    "indeed , let @xmath534 for @xmath263 be the group element corresponding to @xmath535 , so that the initial scattering can be written as @xmath536 . by proposition [ gparam ]",
    "there is a unique element @xmath537 with @xmath538 now apply theorem [ kslemma ] with @xmath539 .",
    "first note that statement ( 1 ) implies ( 2 ) .",
    "further , ( 1 ) , along with theorem [ maximscorrespondence ] and proposition [ gparam ] , implies ( 4 ) , which in turn gives the uniqueness in ( 3 ) .",
    "note ( 1 ) implies that , to the given finite order , @xmath328 is equivalent to a diagram having only one incoming wall contained in @xmath357 , and the attached group element is @xmath530 .",
    "now we can replace this single wall by an equivalent collection of walls consisting of @xmath540 and a number of outgoing walls contained in @xmath357 with attached group element @xmath541 .",
    "this gives the existence in ( 3 ) .",
    "thus it suffices to prove ( 1 ) .",
    "we work modulo @xmath466 , so we may assume @xmath328 is finite , and compare the splittings coming from a choice of @xmath448 near @xmath525 and , after replacing @xmath283 with @xmath542",
    ". for each @xmath463 there exists an open neighbourhood @xmath543 of @xmath525 such that @xmath544 ( resp .",
    "@xmath545 ) implies @xmath546 ( resp .",
    "@xmath545 ) for all @xmath547 .",
    "since @xmath548 is now a finite sum of @xmath281 s , we can find a single @xmath1 so that @xmath549 for all @xmath527 . if @xmath367 is general inside @xmath357 we also have @xmath550 .",
    "now write @xmath551 as in",
    ". then we can further factor @xmath552 as in .",
    "note @xmath553 , @xmath554 . since the projection @xmath555 is a group homomorphism with kernel @xmath518 ,",
    "the image of @xmath556 in @xmath296 is @xmath557 , which thus coincides with @xmath530 by definition of the latter .",
    "we have @xmath558 which is then the ( unique ) factorisation from .",
    "thus @xmath559 for any general @xmath527 .",
    "we now study how the scattering diagram @xmath378 constructed from seed data defined in the previous subsection changes under mutation .",
    "this is crucial for uncovering the chamber structure of these diagrams and giving the connection with the exchange graph and cluster complex .",
    "thus let @xmath560 and @xmath561 be the mutated seed ( see e.g. , @xcite , ( 2.3 ) ) . to distinguish the two lie algebras involved , we write @xmath562 and @xmath563 for the lie algebras arising from these two different seeds .",
    "we recall that the injectivity assumption is independent of the choice of seed .",
    "[ halfspacedef ] [ tkdef ] we set @xmath564 for @xmath560 , define the piecewise linear transformation @xmath565 by , for @xmath566 , @xmath567 as we will explain in  [ tropsec ] , @xmath568 is the tropicalisation of @xmath569 viewed as a birational map between tori .",
    "we will write @xmath570 and @xmath571 to be the linear transformations used to define @xmath568 in the regions @xmath572 and @xmath573 respectively .",
    "define the scattering diagram @xmath574 to be the scattering diagram obtained by :    1 .   for each wall @xmath575 , where @xmath576 , we have one or two walls in @xmath574 given as @xmath577 throwing out the first or second of these if @xmath578 or @xmath579 , respectively . here for @xmath580 linear , we write @xmath581 for the formal power series obtained by applying @xmath582 to each exponent in @xmath383 .",
    "@xmath574 also contains the wall @xmath583 .",
    "the main result of this subsection is :    [ adiagrammutations ] suppose the injectivity assumption is satisfied .",
    "then @xmath574 is a consistent scattering diagram for @xmath584 and @xmath585 .",
    "furthermore , @xmath586 and @xmath574 are equivalent .    the main point in the proof , which is not at all obvious from the definition ,",
    "is that @xmath574 is a scattering diagram for @xmath563 , @xmath587 , where @xmath561 .",
    "formally , consistency will be easy to check using consistency of @xmath378 .",
    "it will follow easily that by construction @xmath588 and @xmath574 have the same incoming walls , so the theorem will then follow from the uniqueness in theorem [ kslemmags ] .",
    "the main problem to overcome is that the functions attached to walls of @xmath378 and @xmath588 live in two different completed monoid rings , @xmath268}$ ] and @xmath589}$ ] , for @xmath265 a monoid chosen to contain @xmath590 , and @xmath591 a monoid chosen to contain @xmath592 .",
    "we need first a common monoid @xmath593 containing both @xmath265 and @xmath591 .",
    "[ pbardef ] let @xmath594 be a top - dimensional cone containing @xmath595 , @xmath263 , and @xmath596 , and such that @xmath597 .",
    "set @xmath598 , and @xmath599 .",
    "given such a choice of @xmath593 , we can find @xmath265 , @xmath591 contained in @xmath593 .",
    "however , we have an additional problem that @xmath378 is not trivial modulo @xmath269 . indeed , @xmath600 , while one of the initial walls of @xmath601 is @xmath602 .",
    "in particular , the wall - crossing automorphism associated to @xmath603 is not an automorphism of the ring @xmath604}$ ] , but rather of the localized ring @xmath604}_{1+z^{v_k}}$ ] .",
    "( here the hats denote completion with respect to @xmath269 . )",
    "this kind of situation is dealt with in @xcite , see especially  4.3 .",
    "however the current situation is quite a bit simpler , so we will give the complete necessary arguments here and in appendix [ scatappendix ] .",
    "we will use the notation @xmath605 for the automorphism of @xmath604}_{1+z^{v_k}}$ ] associated to crossing the wall @xmath606 from @xmath572 to @xmath573 .",
    "explicitly , @xmath607    in this situation , define @xmath608 we note that by the definition of the mutated seed @xmath609 , @xmath610 , so we indicate it by @xmath611 .",
    "we now extend the definition of scattering diagram .",
    "[ escdef ] a _ wall _ for @xmath593 and ideal @xmath269 is a pair @xmath612 with @xmath613 as in definition [ walldef ] , but with @xmath614 , and @xmath615}$ ] congruent to @xmath616 mod @xmath269 .",
    "the _ slab _ for the seed @xmath10 means the pair @xmath617 .",
    "note since @xmath618 this does not qualify as a wall .",
    "now a scattering diagram @xmath328 is a collection of walls and possibly this single slab , with the condition that for each @xmath329 , @xmath619 for all but finitely many walls in @xmath328 .",
    "note that crossing a wall or slab @xmath325 now induces an automorphism of @xmath604}_{1+z^{v_k}}$ ] of the form @xmath620 ( with the localization only needed when a slab is crossed ) .",
    "the following is proved in appendix [ scatappendix ] :    [ kslemma2 ] there exists a scattering diagram @xmath621 in the sense of definition [ escdef ] such that    1 .",
    "@xmath622 , 2 .",
    "@xmath623 consisting only of outgoing walls , and 3 .",
    "@xmath361 as an automorphism of @xmath604}_{1+z^{v_k}}$ ] only depends on the endpoints of @xmath341 .",
    "furthermore , @xmath624 with these properties is unique up to equivalence .    finally , @xmath624 is also a scattering diagram for the data @xmath625 , and as such is equivalent to @xmath378 .",
    "[ noekwalls ] note in particular that the theorem implies @xmath380 does not contain any walls contained in @xmath626 besides @xmath606 .",
    "indeed , no wall of @xmath627 is contained in @xmath626 : only the slab @xmath606 is contained in @xmath626 .",
    "we write @xmath561 , @xmath628 .",
    "we first note that we can choose representatives for @xmath378 , @xmath588 which are scattering diagrams in the sense of definition [ escdef ] , by theorem [ kslemma2 ] .",
    "furthermore , @xmath574 is also a scattering diagram in the sense of definition [ escdef ] for the seed @xmath609 : this follows since if @xmath629 for some @xmath210 , we also have @xmath630 .",
    "thus by the uniqueness statement of theorem [ kslemma2 ] , @xmath574 and @xmath588 are equivalent if ( 1 ) these diagrams are equivalent to diagrams which have the same set of slabs and incoming walls ; ( 2 ) @xmath574 is consistent .",
    "we carry out these two steps .",
    "_ step i. up to equivalence , @xmath574 and @xmath588 has the same set of slabs and incoming walls . _",
    "if @xmath631 is outgoing , the wall @xmath613 contributes to @xmath574 and is also outgoing , so let us consider the incoming walls of @xmath632 . setting @xmath633 ,",
    "already @xmath634 contains the slab for @xmath609 @xmath635 which lies in @xmath632 by construction .",
    "next consider the wall @xmath636 , for @xmath637 .",
    "we have three cases to consider , based on whether @xmath638 is zero , positive or negative .",
    "first if @xmath639 , then @xmath568 takes the plane @xmath640 to itself ( in a piecewise linear way ) , and @xmath641 .",
    "thus the wall @xmath642 contributes two walls @xmath643 whose union is the wall @xmath644 , as @xmath645 and @xmath646 in this case . up to equivalence",
    ", we can replace these two walls with the single wall @xmath647 .",
    "if @xmath648 , then consider the wall @xmath649 this wall contains the ray @xmath650 , so this is an incoming wall .",
    "note that if @xmath651 , we have , with @xmath652 as given in , @xmath653_+e_k , m+v_k\\langle d_ke_k , m\\rangle\\rangle\\\\ = { } & \\{e_k , e_i\\}\\langle d_ke_k , m\\rangle   + d_k\\{e_i , e_k\\}\\langle e_k , m\\rangle\\\\ = { } & 0.\\end{aligned}\\ ] ] thus @xmath654 is a half - space contained in @xmath655 , and furthermore @xmath656 since @xmath657 thus we see that the wall @xmath658 of @xmath632 is half of the wall @xmath659 of @xmath634 .",
    "if @xmath660 , then the wall @xmath661 coincides with @xmath662 , and @xmath572 also contains @xmath663 , so @xmath664 is an incoming wall .",
    "but also @xmath646 , @xmath645 in this case .",
    "thus @xmath664 is again half of the wall @xmath659 .    in summary",
    ", we find that after splitting some of the walls of @xmath634 in two , @xmath632 and @xmath634 have the same set of incoming walls , and thus , making a similar change to @xmath588 , we see that @xmath574 and @xmath588 have the same set of incoming walls .",
    "_ step ii . _",
    "@xmath665 for any loop @xmath341 for which this automorphism is defined .    indeed , the only place a problem can occur is for @xmath341 a loop around a joint of @xmath378 contained in the slab @xmath606 , as this is where @xmath568 fails to be linear . to test this ,",
    "consider a loop @xmath341 around a joint contained in @xmath606 .",
    "assume that it has basepoint in the half - space @xmath572 and is split up as @xmath666 , where @xmath667 immediately crosses @xmath606 , @xmath668 is contained entirely in @xmath573 , crossing all walls of @xmath378 which contain @xmath491 and intersect the interior of @xmath573 , @xmath669 crosses @xmath606 again , and @xmath670 then crosses all relevant walls in the half - space @xmath572 .",
    "let @xmath605 , @xmath671 be the wall - crossing automorphisms for crossing @xmath606 or @xmath672 passing from @xmath673 to @xmath674 , as in .",
    "then by remark [ noekwalls ] , @xmath675 and @xmath676 .",
    "let @xmath677\\rightarrow{\\bbbk}[m^{\\circ}]$ ] be the automorphism induced by @xmath571 , i.e. , @xmath678 then note that @xmath679 thus to show @xmath680 , it is enough to show that @xmath681 but @xmath682 as desired .    [ chamberstructureremark ] suppose given fixed data @xmath239 satisfying the injectivity assumption and seed data @xmath10 .",
    "we then obtain for every seed @xmath609 obtained from @xmath10 via mutation a scattering diagram @xmath588 . in each case",
    "we will choose a representative for the scattering diagram with minimal support .",
    "note by construction and remark [ noekwalls ] , irrespective of the representative of @xmath378 used , @xmath378 contains walls whose union of supports is @xmath683 .",
    "furthermore , we have @xmath684 given by , which can be written more explicitly as @xmath685 then @xmath686 are the closures of connected components of @xmath687 . similarly , we see that taking @xmath688 to be the chambers where all @xmath689 are positive ( or negative ) , we have that @xmath688 is the closure of a connected component of @xmath690 , so that @xmath691 is the closure of a connected component of @xmath687 .",
    "note that the closures of @xmath692 and @xmath693 have a common codimension one face given by the intersection with @xmath626 .",
    "this gives rise to the following chamber structure for a subset of @xmath694 .",
    "recall from appendix [ ldsec ] the infinite oriented tree @xmath695 ( or @xmath696 ) used for parameterizing seeds obtained via mutation of @xmath10 . in particular , for any vertex @xmath697 of @xmath695 , there is a simple path from the root vertex to @xmath697 , indicating a sequence of mutations @xmath698 and hence a piecewise linear transformation @xmath699 note that @xmath700 is defined using the basis vector @xmath701 of the seed @xmath702 , not the basis vector @xmath701 of the original seed @xmath10 . by applying theorem [ adiagrammutations ] repeatedly",
    ", we see that @xmath703 ( where @xmath704 applied to the scattering diagram @xmath378 is interpreted as the composition of the actions of each @xmath700 ) and @xmath705 is the closure of a connected component of @xmath687 .",
    "note that the map from vertices of @xmath695 to chambers of @xmath706 is never one - to - one . indeed , if @xmath697 is the vertex obtained by following the edge labelled @xmath460 twice starting at the root vertex , one checks that @xmath707 , even though @xmath708 ( see @xcite , remark 2.5 ) .",
    "thus we have a chamber structure on a subset of @xmath318 ; in general , the union of the cones @xmath709 do not form a dense subset of @xmath318 .",
    "since we will often want to compare various aspects of this geometry for different seeds , we will write the short - hand @xmath710 for an object parameterized by a vertex @xmath697 where the root of the tree is labelled with the seed @xmath10 . in particular :    [ fgchamberdef ] we write @xmath711 for the chamber of @xmath706 corresponding to the vertex @xmath697 . we write @xmath712 for the set of chambers @xmath711 for @xmath697 running over all vertices of @xmath696 .",
    "we call elements of @xmath713 _ cluster chambers_.",
    "we now explain that the chamber structure of construction [ chamberstructureremark ] coincides with the fock - goncharov cluster complex .",
    "to do so , we first recall the basics of tropicalisation .    for a lattice @xmath240 with @xmath241 , let @xmath714 be the subset of elements of the field of fractions of @xmath715 = h^0(t_n,\\co_{t_n})$ ] which can be expressed as a ratio of laurent polynomials with non - negative integer coefficients .",
    "then @xmath716 is a semi - field under ordinary multiplication and addition . for any semi - field @xmath265 ,",
    "restriction to the monomials @xmath717 gives a canonical bijection @xmath718 where the first @xmath719 is maps of semi - fields , @xmath720 means the multiplicative group of @xmath265 , and in the last tensor product we mean @xmath720 viewed as @xmath721-module .",
    "following @xcite we define the @xmath265-valued points of @xmath722 to be @xmath723 . a _ positive _ birational map @xmath724 means a birational map for which the pullback @xmath725 induces an isomorphism on @xmath714 .",
    "obviously it gives an isomorphism on @xmath265-valued points .",
    "thus it makes sense to talk about @xmath726 for any variety @xmath727 with a positive atlas of tori , for example many of the various flavors of cluster variety .",
    "there are two equally good semi - field structures on @xmath728 , the max - plus and the min - plus structures . here",
    "addition is either maximum or minimum , and multiplication is addition .",
    "we notate these as @xmath729 and @xmath730 respectively , thinking of capital @xmath582 for the max - plus tropicalization and little @xmath188 for the min - plus tropicalization .",
    "we similarly define @xmath731 and @xmath732 . thus taking @xmath733 or @xmath730",
    ", we obtain the sets of tropical points @xmath734 or @xmath735 .",
    "the former is the convention used by fock and goncharov in @xcite , so we refer to this as the fock - goncharov tropicalization .",
    "the latter choice in fact coincides with @xmath736 as defined in @xcite , def .",
    "1.7 , defined as a subset of the set of discrete valuations .",
    "we refer to this as the geometric tropicalization .",
    "it will turn out both are useful .",
    "there is the obvious isomorphism of semi - fields @xmath737 from @xmath738 .",
    "this induces a canonical sign - change identification @xmath739 .",
    "given a positive birational map @xmath740 , we use @xmath741 and @xmath742 to indicate the induced maps @xmath743 and @xmath744 respectively . for the geometric tropicalization",
    ", this coincides with the map on discrete valuations induced by pullback of functions , see @xcite ,  1 . for cluster varieties",
    "the two types of tropicalisation are obviously equivalent .",
    "the geometric tropicalisation has the advantage that it makes sense for any log calabi - yau variety , while the fock - goncharov tropicalisation is restricted to ( fock - goncharov ) _ positive spaces _ , i.e. , spaces obtained by gluing together algebraic tori via positive birational maps .",
    "we will use both notions , @xmath745 because in many cases it is more natural to think in terms of valuations / boundary divisors , and @xmath746 because , as we indicate below , the scattering diagram for building @xmath56 lives naturally in @xmath747 ( because of already established cluster sign conventions ) .",
    "one computes easily that for the basic mutation @xmath748 the fock - goncharov tropicalisation is @xmath749_{+ } n\\ ] ] while the geometric tropicalisation ( see @xcite , ( 1.4 ) ) is @xmath750_- n.\\ ] ]    thus :    [ fgtprop ] @xmath751 defined in is the fock - goncharov tropicalisation of @xmath752    a rational function @xmath34 on a cluster variety @xmath15 is called _ positive _ if its restriction to each seed torus is positive , i.e. , can be expressed as a ratio of sums of characters with positive integer coefficients .",
    "we can then define its fock - goncharov tropicalisation @xmath753 by @xmath754 .",
    "similarly , for @xmath34 positive , we have its geometric tropicalisation @xmath755 which for each @xmath756 has value @xmath757 . using the identification of @xmath758 with @xmath17 ,",
    "@xmath697 is interpreted as a valuation and @xmath759 coincides with @xmath760 , the value of @xmath697 on @xmath34 . in particular , this value is defined regardless of whether @xmath34 is positive .",
    "we have a commutative diagram @xmath761 where @xmath210 is the canonical isomorphism determined by the sign change isomorphism .",
    "the definition of @xmath762 in terms of valuations extends the definition of @xmath762 , and hence @xmath763 via this diagram , to any non - zero rational function .",
    "we note that @xmath764 where @xmath765 is the canonical restriction isomorphism",
    ". we will almost always leave @xmath766 out from the notation .",
    "[ lplemma ]    1 .   for a positive laurent polynomial @xmath767 ( i.e. , @xmath768 ) , and @xmath769 @xmath770 where @xmath51 is the canonical isomorphism .",
    "if @xmath771 is a divisorial discrete valuation , and @xmath772 is any laurent polynomial ( so now @xmath773 ) , then @xmath774    by definition @xmath775 this gives the first statement . for the second",
    ", we can assume @xmath776 is primitive , so part of a basis .",
    "then the statement reduces to an obvious statement about the @xmath777 degree of a linear combination of monomials in @xmath778 $ ] .",
    "note the mutations @xmath779 are precisely the mutations between the tori in the atlas for @xmath780 ( see appendix [ ldsec ] for the definition of the fock - goncharov dual @xmath780 , and @xcite , ( 2.5 ) for the mutations between @xmath27 tori in our notation ) .",
    "thus by theorem [ adiagrammutations ] and proposition [ fgtprop ] , the support of @xmath378 viewed as a subset of @xmath781 under the identification @xmath782 ( induced canonically from the open set @xmath783 ) is independent of seed .",
    "in particular it makes sense to talk about @xmath784 as being completely canonically defined without choosing any seed . for any seed",
    "the chambers @xmath785 are connected components of @xmath786 .",
    "we recall from @xcite :    suppose given fixed data @xmath239 and suppose given an initial seed . for a seed @xmath787 obtained by mutation from the initial seed , the _ fock - goncharov cluster chamber associated to @xmath10 _",
    "is the subset @xmath788 identified with @xmath789 via @xmath210 .",
    "( fock - goncharov ) cluster complex _",
    "@xmath118 is the set of all such chambers .",
    "[ fgcclem ] suppose given fixed data @xmath239 satisfying the injectivity assumption and suppose given an initial seed . for a seed @xmath74 obtained by mutation from the initial seed ,",
    "the chamber @xmath790 ( also identified with @xmath791 via @xmath210 ) is the fock - goncharov cluster chamber associated to @xmath10 .",
    "hence the fock - goncharov cluster chambers are the maximal cones of a simplicial fan ( of not necessarily strictly convex cones ) .",
    "in particular @xmath118 is identified with @xmath792 for any choice of seed @xmath10 giving an identification of @xmath793 with @xmath794 .",
    "the identification of the chamber is immediate from the definition .",
    "the result then follows from the chamber structure of remark [ chamberstructureremark ] and the fact that the @xmath568 are the fock - goncharov tropicalizations of the mutations @xmath569 for @xmath795 .",
    "it s obvious each maximal cone is simplicial , and each adjacent pair of maximal cones meets along a codimension one face of each . hence we obtain a simplicial fan .    [ sdprin ] see appendix [ rdsec ] for a review of the cluster variety with principal coefficients , @xmath56 .",
    "any seed @xmath10 gives rise to a scattering diagram @xmath796 living in @xmath797 the second equality by proposition [ ldpprop ] , ( 3 ) .",
    "indeed in this situation , the injectivity assumption is satisfied , since the form @xmath798 on @xmath799 is non - degenerate ( which is the reason we use @xmath56 instead of @xmath19 or @xmath27 ) . indeed",
    ", the vectors @xmath800 are linearly independent .",
    "note by theorem [ kslemma ] , @xmath801 contains the scattering diagram @xmath802    recall from proposition [ ldpprop ] that we have a canonical map @xmath803 which is defined on cocharacter lattices by the canonical projection @xmath804 , see .",
    "thus the tropicalization @xmath805 coincides with this projection , which can be viewed as the quotient of an action of translation by @xmath240 . by definition [ walldef ] ,",
    "walls of @xmath806 are of the form @xmath807 for @xmath259 .",
    "thus all walls are invariant under translation by @xmath240 , and thus are inverse images of walls under @xmath808 .",
    "so even though @xmath19 may not satisfy the injectivity assumption necessary to build a scattering diagram , we see that @xmath809 is the inverse image of a subset of @xmath793 canonically defined independently of the seed . in particular , note that the fock - goncharov cluster chamber in @xmath793 associated to the seed @xmath10 ( where @xmath810 for all @xmath263 ) pulls back to the corresponding fock - goncharov cluster chamber in @xmath811 .    the following was conjectured by fock and goncharov , @xcite ,  1.5 :    [ fgccth ] for any initial data the fock - goncharov cluster chambers in @xmath781 are the maximal cones of a simplicial fan .",
    "when the injectivity assumption holds , this follows from lemma [ fgcclem ] .",
    "in particular it holds for @xmath56 .",
    "now the general case follows by the above invariance of @xmath812 under the translation by @xmath240 .",
    "[ standardexample ] consider the rank three skew - symmetric cluster algebra given by the matrix @xmath813 then projecting the walls of @xmath812 to @xmath814 via @xmath808 , one obtains a collection of walls in a three - dimensional vector space .",
    "one can visualize this by intersecting the walls with the affine hyperplane @xmath815 .",
    "the collection of resulting rays and lines appears on the first page of @xcite .",
    "while fock and goncharov were not aware of scattering diagrams in this context , in fact there the picture represents the same slice of the cluster complex , and hence coincides with the scattering diagram .",
    "the cluster complex in fact fills up the half - space @xmath816 .",
    "there is no path through chambers connecting @xmath817 and @xmath693 .",
    "this example is particularly well - known in cluster theory , and gives the cluster algebra associated with triangulations of the once - punctured torus .",
    "we will explain how a scattering diagram determines a class of piecewise straight paths which will allow for the construction of theta functions .",
    "the notion of broken line was introduced in @xcite , and developed from the point of view of defining canonical functions in @xcite and @xcite .",
    "we choose fixed data @xmath239 and a seed @xmath10 as described in appendix [ ldsec ] , and assume it satisfies the injectivity assumption .",
    "this gives rise to the group @xmath93 described in  [ defconstsection ] which acts by automorphisms of @xmath268}$ ] for a choice of monoid @xmath265 containing @xmath818 and with @xmath819 .",
    "the group @xmath93 also acts on the rank one free @xmath268}$]-module @xmath820}$ ] for any @xmath821 , with a log derivation @xmath273 acting on @xmath822 as usual to give @xmath823 .",
    "we then have :    [ blde ] let @xmath328 be a scattering diagram in the sense of definition [ ksscatdiagdef ] , @xmath824 and @xmath825 .",
    "a _ broken line _ for @xmath826 with endpoint @xmath827 is a piecewise linear continuous proper path @xmath828\\rightarrow m_{{\\mathbb{r}}}\\setminus{\\operatorname{sing}}({\\mathfrak{d}})$ ] with a finite number of domains of linearity .",
    "this path comes along with the data of , for each domain of linearity @xmath829 $ ] of @xmath341 , a monomial @xmath830 $ ] .",
    "this data satisfies the following properties :    1 .",
    "if @xmath11 is the first ( and therefore unbounded ) domain of linearity of @xmath341 , then @xmath832 .",
    "3 .   for @xmath188 in a domain of linearity @xmath11 , @xmath833 .",
    "4 .   let @xmath834 be a point at which @xmath341 is not linear , passing from domain of linearity @xmath11 to @xmath835 .",
    "let @xmath836 then @xmath837 is a term in the formal power series @xmath838 .    note that since a broken line does not pass through a singular point of @xmath328 , we can write @xmath839 where @xmath840 is primitive , vanishes on each @xmath841 , and @xmath842 is positive by item ( 3 ) of the definition of broken line . it is an important feature of broken lines that we never need to invert .",
    "[ ifdef ] let @xmath328 be a scattering diagram , @xmath824 , @xmath825 .",
    "for a broken line @xmath341 for @xmath826 with endpoint @xmath827 , define @xmath843 ( @xmath844 is for initial ) , @xmath845 and @xmath846 to be the monomial attached to the final ( @xmath847 is for final ) domain of linearity of @xmath341 .",
    "define @xmath848 where the sum is over all broken lines for @xmath826 with endpoint @xmath827 .    for @xmath849",
    ", we define for any endpoint @xmath827 @xmath850    in general , @xmath851 is an infinite sum , but makes sense formally :    [ formalthfun ] @xmath852}$ ] .",
    "it is clear by construction that for any broken line @xmath341 with @xmath853 , we have @xmath854 $ ] .",
    "so it is enough to show that for any @xmath329 , there are only a finite number of broken lines @xmath341 such that @xmath853 , @xmath855 , and @xmath856 .    first note by the assumption that @xmath857 , there are only a finite number of choices for @xmath858 such that @xmath859 .",
    "fix a choice @xmath860 for @xmath858 .",
    "second , to test that there are finitely many broken lines with @xmath853 , @xmath855 and @xmath861 , we can throw out any wall @xmath862 with @xmath863 , so we can assume @xmath328 is finite .",
    "third , no broken line @xmath341 with @xmath864 can bend more than @xmath460 times .",
    "thus there are only a finite number of possible ordered sequences of walls @xmath865 at which @xmath341 can bend .",
    "fix one such sequence .",
    "one then sees there are at most a finite number of broken lines with @xmath855 , @xmath861 bending at @xmath865 .",
    "indeed , one can start at @xmath827 and trace a broken line backwards , using that the final direction is @xmath866 . crossing a wall @xmath867 and passing from domain of linearity @xmath11 ( for smaller @xmath188 ) to domain of linearity @xmath835 ( for larger @xmath188 )",
    ", one sees that knowing the monomial attached to @xmath835 restricts the choices of monomial on @xmath11 to a finite number of possibilities .",
    "this shows the desired finiteness .",
    "the most important general feature of broken lines is the following :    [ blinvth ] let @xmath328 be a consistent scattering diagram , @xmath868 , @xmath869 two points with all coordinates irrational .",
    "then for any path @xmath341 with endpoints @xmath827 and @xmath870 for which @xmath361 is defined , we have @xmath871    this is a special case of results of  4 of @xcite . the condition that @xmath827 and @xmath870 both have irrational coordinates guarantees that we do nt have to worry about broken lines which pass through joints ( which we are nt allowing ) .",
    "let us next consider how broken lines change under mutation .",
    "so let @xmath10 be a seed , @xmath872 as in definition [ pbardef ] .",
    "[ brlineinvmut ] @xmath568 defines a one - to - one correspondence between broken lines for @xmath826 with endpoint @xmath827 for @xmath378 and broken lines for @xmath873 with endpoint @xmath874 for @xmath586 .",
    "in particular , depending on whether @xmath875 or @xmath673 , we have @xmath876 where the superscript indicates which scattering diagram is used to define the theta function , and @xmath877 acts linearly on the exponents in @xmath878 .",
    "[ blrem ] by the proposition and proposition [ fgtprop ] , when the injectivity assumption holds , broken lines make sense in @xmath781 independent of a choice of seed .",
    "given a broken line @xmath341 for @xmath378 , we define @xmath879 to have underlying map @xmath880\\rightarrow m_{{\\mathbb{r}}}$ ] .",
    "subdivide domains of linearity of @xmath341 so that we can assume any domain of linearity @xmath11 satisfies @xmath881 or @xmath673 .",
    "in the two cases , the attached monomial @xmath882 becomes @xmath883 or @xmath884 respectively .",
    "we show that @xmath879 is a broken line for @xmath873 with endpoint @xmath874 , with respect to the scattering diagram @xmath586 , which is equal to @xmath574 , by theorem [ adiagrammutations ] .",
    "indeed , the only thing to do is to analyze what happens when @xmath341 crosses @xmath626 .",
    "so suppose in passing from a domain of linearity @xmath885 to a domain of linearity @xmath886 , @xmath341 crosses @xmath626 , so that @xmath887 is a term in @xmath888 assume first that @xmath341 passes from @xmath673 to @xmath674 .",
    "then @xmath889 is a term in @xmath890 showing that @xmath879 satisfies the correct rules for bending as it crosses the slab @xmath891 of @xmath574 .    if instead @xmath341 crosses from @xmath674 to @xmath673 , then @xmath892 is a term in @xmath893 so again @xmath879 satisfies the bending rule at the slab @xmath672 .",
    "the map @xmath568 on broken lines is then shown to be a bijection by observing @xmath894 , similarly defined , is the inverse to @xmath568 on the set of broken lines .",
    "the following , which shows that cluster variables are theta functions , is the key observation for proving positivity of the laurent phenomenon .",
    "[ oneblprop ] let @xmath895 be a base - point and let @xmath896 .",
    "then @xmath897 .",
    "this says the only broken line with asymptotic direction @xmath860 and basepoint @xmath827 is @xmath898 , with attached monomial @xmath36 . to see this ,",
    "suppose we are given a broken line @xmath828\\rightarrow m_{{\\mathbb{r}}}$ ] with asymptotic direction @xmath860 which bends successively at walls @xmath899 . for each @xmath210",
    ", there is an @xmath900 such that @xmath901 .",
    "multiplying @xmath902 by a positive integer if necessary , we can assume that the monomial attached to @xmath341 upon crossing the wall @xmath867 changes by a factor @xmath903 .",
    "now if @xmath904 is the image of the @xmath905 linear segment of @xmath341 , we show inductively that @xmath906 indeed , @xmath907 for some @xmath908 , so initially @xmath885 is contained on the positive side of @xmath909 , i.e. , @xmath910 is positive on @xmath885 , and hence after bending at @xmath909 , we see @xmath911 .",
    "next , assume true for @xmath912 .",
    "then @xmath913 , and if @xmath914 is the time when @xmath341 bends at the wall @xmath606 , we have @xmath915 and @xmath916 by the induction hypothesis .",
    "thus @xmath917 .",
    "in addition , the derivative @xmath918 of @xmath341 along @xmath919 is @xmath920 , and @xmath921 by skew - symmetry of @xmath798 and @xmath922 .",
    "thus @xmath923 .",
    "since @xmath924 for all @xmath210 , any broken line with asymptotic direction @xmath860 which bends can not terminate at the basepoint @xmath925 .",
    "this shows that there is only one broken line for @xmath860 terminating at @xmath926 .",
    "[ monocor ] let @xmath927 be a cluster chamber , and let @xmath928 , @xmath929",
    ". then @xmath897 .",
    "note @xmath930 for some vertex @xmath697 of @xmath696 , with associated seed @xmath931 .",
    "there is then a piecewise linear map @xmath932 with @xmath933 , see .",
    "then the result follows by applying proposition [ oneblprop ] to @xmath934 , @xmath935 and proposition [ brlineinvmut ] .    in the next section",
    ", we will identify theta functions which are polynomials with universal laurent polynomials , i.e. , elements of the cluster algebra associated to the fixed and seed data .",
    "it will follow from the above corollary that cluster monomials are in fact theta functions .",
    "[ brokenlineexamples ] figures [ brokenline11 ] and [ brokenline22 ] show some examples of broken lines in the case of example [ bcexample ] with @xmath936 .",
    "in the first figure , we take @xmath937 , and in the second , @xmath938 .",
    "neither of these lie in the cluster complex : the union of all cones in the cluster complex is @xmath939 . in this case",
    "the only bends occur on the original lines of @xmath940 , as any bending along the additional rays of the scattering diagram will result in the broken line shooting back out , unable to reach the first quadrant containing the basepoint @xmath827 . in the figures ,",
    "the final line segment is labelled with its attached monomial , so that the theta function is a sum of these labels .",
    "one finds @xmath941    in @xcite , it was shown that for any @xmath399 , with @xmath827 lying in the first quadrant , the @xmath942 with @xmath860 ranging over all elements of @xmath860 coincides with the greedy basis @xcite .",
    "throughout this section we work with initial data @xmath239 satisfying the injectivity assumption , so we obtain the cluster chamber structure @xmath792 from @xmath378 described in construction [ chamberstructureremark ] . in particular , this condition holds for initial data @xmath943 , see appendix [ rdsec ] .    in what follows",
    ", we will often want to deal with multiple copies of @xmath944 etc .  indexed either by vertices @xmath697 of @xmath696 or chambers @xmath945 . to distinguish these ( identical ) copies , we will use subscripts @xmath697 or @xmath946 , e.g. , the scattering diagram @xmath947 lives in @xmath948 , and chambers in @xmath947 give , under the identification @xmath949 , the fock - goncharov cluster complex @xmath118 , by lemma [ fgcclem ] .",
    "in particular the cluster chambers of @xmath947 and @xmath950 are in canonical bijection .",
    "[ capcon ] fix a seed @xmath10 .",
    "we use the cluster chambers to build a positive space .",
    "we attach a copy of the torus @xmath951 to each cluster chamber @xmath927 .    given any two cluster chambers @xmath952 of @xmath792",
    ", we can choose a path @xmath341 from @xmath953 to @xmath946 .",
    "we then get an automorphism @xmath954 } \\rightarrow\\widehat{{\\bbbk}[p]}$ ] which is independent of choice of path .",
    "if we choose the path to lie in the support of the cluster complex , then by remark [ noekwalls ] ( which shows in particular that the scattering functions on walls of the cluster complex are polynomials , as opposed to formal power series ) , the wall crossings give birational maps of the torus and hence we can view @xmath361 as giving a well - defined map of fields of fractions @xmath955 this induces a birational map @xmath956 which is in fact positive .",
    "we can then construct a space @xmath957 by gluing together all the tori @xmath958 , @xmath927 via these birational maps , see proposition 2.4 of @xcite .",
    "we call this space ( with its atlas of tori ) @xmath959",
    ".    we write @xmath960 if we need to make clear which seed @xmath10 is being used .",
    "we check first that mutation equivalent seeds give canonically isomorphic spaces .",
    "we recall first something of the construction of @xmath19 .",
    "fix a seed @xmath10 .",
    "then we have positive spaces @xmath961 where each atlas is parameterized by vertices @xmath697 of the infinite tree @xmath696 .",
    "we write e.g. , @xmath962 for the open subset parameterized by @xmath697 .",
    "if we obtain a seed @xmath963 by mutation from @xmath10 , then we can think of the tree @xmath964 as a subtree of @xmath696 rooted at @xmath697 , and thus we obtain natural open immersions @xmath965 these are easily seen to be isomorphisms . under this immersion , the open cover of @xmath966",
    "is identified canonically with the subcover of @xmath967 indexed by vertices of @xmath964 ( but in either atlas there are many tori identified with the same open set of the union ) . because of this we view @xmath19 as independent of the choice of seed in a given mutation equivalence class .",
    "given vertices @xmath968 of @xmath696 , we have birational maps @xmath969 induced by the inclusions @xmath970 and @xmath971 respectively .    in",
    "what follows , we use the same notation for the restriction of a piecewise linear map to a maximal cone on which it is linear and the unique linear extension of this restriction to the ambient vector space .",
    "[ rpprop ] let @xmath10 be a seed .",
    "let @xmath697 be the root of @xmath696 , @xmath972 any other vertex .",
    "consider the fock - goncharov tropicalisation @xmath973 of @xmath974 .",
    "its restriction @xmath975 to each cluster chamber @xmath976 is a linear isomorphism onto the corresponding chamber @xmath977 .",
    "the linear map @xmath978 induces an isomorphism @xmath979 these glue to give an isomorphism of positive spaces @xmath980 .    in view of the proposition",
    ", we can view @xmath981 as independent of the seed in a given mutation class .",
    "it is enough to treat the case where @xmath972 is adjacent to @xmath697 via an edge labelled with @xmath560 , so that @xmath982 , as in general @xmath983 is the inverse of a composition of mutations @xmath984 .",
    "note in this special case @xmath985 by proposition [ fgtprop ] , the definition of @xmath986 in appendix [ ldsec ] , and the formula for the @xmath987-cluster mutation @xmath569 ( see e.g. , @xcite , ( 2.5 ) ) .",
    "so @xmath988 is the isomorphism determined by the linear map @xmath989",
    ". the proposition amounts to showing commutativity of the diagram , for @xmath990 , @xmath991 , @xmath992 , @xmath993^{t_{v',\\sigma}}\\ar@![d]_{{{\\mathfrak{p}}}_{\\sigma , \\tilde\\sigma } } & t_{n^{\\circ } , \\sigma'\\in { { \\bf s } } ' } \\ar@![d]^{{{\\mathfrak{p}}}_{\\sigma',\\tilde\\sigma'}}\\\\ t_{n^{\\circ},\\tilde \\sigma \\in { { \\bf s}}}\\ar[r]_{t_{v',\\tilde\\sigma } } & t_{n^{\\circ},\\tilde\\sigma'\\in   { { \\bf s}}'}}\\ ] ] where in the left column @xmath994 indicates wall crossings in @xmath378 while in the right column the wall crossings are in @xmath588 .",
    "if @xmath946 and @xmath995 are on the same side of the wall @xmath626 , then commutativity follows immediately from theorem [ adiagrammutations ] .",
    "so we can assume that @xmath946 and @xmath995 are adjacent cluster chambers separated by the wall @xmath626 , and further without loss of generality that @xmath996 is non - negative on @xmath946 .",
    "now by remark [ noekwalls ] there is only one wall of @xmath378 ( @xmath588 ) contained in @xmath626 , with support @xmath626 itself and attached function @xmath997 ( resp .",
    "@xmath998 ) .",
    "now it is a simple calculation : @xmath999 this gives the desired commutativity .",
    "next we explain how to identify @xmath1000 with @xmath19 .",
    "recall for each vertex @xmath697 of @xmath696 there is an associated cluster chamber @xmath1001 in the cluster complex .",
    "while the atlas for @xmath959 is parameterized by chambers of @xmath792 , we can use a more redundant atlas indexed by vertices of @xmath696 , equating @xmath1002 with @xmath1003 . the open sets and the gluing maps in this redundant atlas are the same as in the original , but in the redundant atlas a given open set might be repeated many times",
    ".    [ rpth ] fix a seed @xmath10 .",
    "let @xmath697 be the root of @xmath696 , @xmath972 any other vertex .",
    "let @xmath1004 be the linear map @xmath1005 .",
    "let @xmath1006 be the associated map of tori .",
    "these glue to give an isomorphism of positive spaces @xmath1007 furthermore , the diagram @xmath1008 is commutative , where the right - hand vertical map is the isomorphism of proposition [ rpprop ] , the left - hand vertical map the isomorphism given in , and the horizontal maps are the isomorphisms just described .",
    "let @xmath1009 .",
    "the desired isomorphism is equivalent to commutativity of the diagram @xmath1010^{\\psi_{v , v'}}\\ar@![d]_{\\mu_{v',v '' } } & t_{n^{\\circ},v'}\\subset{\\mathcal{a}}_{{\\mathrm{scat}},{{\\bf s}}}\\ar@![d]^{{{\\mathfrak{p}}}_{{\\mathcal{c}}^+_{v'},{\\mathcal{c}}^+_{v''}}}\\\\ t_{n^{\\circ},v''}\\subset{\\mathcal{a}}_{{{\\bf s}}}\\ar[r]_{\\psi_{v , v '' } } & t_{n^{\\circ},v''}\\subset{\\mathcal{a}}_{{\\mathrm{scat}},{{\\bf s } } } } \\ ] ] where the right - hand vertical arrow is given by wall crossings in @xmath378 between the cluster chambers for @xmath1011 . for this we may assume there is an oriented path from @xmath972 to @xmath1012 in @xmath696 , and thus that @xmath1013 .",
    "the commutativity of is equivalent to the commutativity of @xmath1014 where the right - hand vertical map is the restriction of the isomorphism @xmath1015 of proposition [ rpprop ] .",
    "we argue the commutativity of first , and then show that this implies the commutativity of .",
    "each map in is an isomorphism , induced by the restrictions of tropicalizations of various @xmath1016 to various cluster chambers .",
    "explicitly , on character lattices , we have the corresponding diagram @xmath1017 which is obviously commutative as tropicalization is functorial and @xmath1018 .",
    "now for the commutativity of .",
    "it is enough to check the case when there is an oriented edge from @xmath972 to @xmath1012 in @xmath696 labelled by @xmath1019 .",
    "we claim we may also assume @xmath1020 .",
    "indeed , assume we have proven commutativity in this case .",
    "we draw a cube , whose back vertical face is the diagram , and whose front vertical face is the analogous diagram for @xmath1021 , which is commutative by assumption .",
    "the top and bottom horizontal faces are instances of , and the right - hand vertical face is the commutative diagram of atlas tori giving the isomorphism @xmath1015 of proposition [ rpprop ] .",
    "finally the left - hand vertical face consists of equality of charts or birational maps coming from inclusions of these tori in @xmath967 or @xmath1022 , thus commutative .",
    "now commutativity of the back vertical face , follows .    finally , to show when @xmath1023 , i.e. , @xmath1024 , we note @xmath1025 is automatically the identity , and @xmath1026 is also the identity , by definition [ tkdef ] , and the identification of @xmath568 as fock - goncharov tropicalisation of the birational map of tori @xmath1027 .",
    "thus the commutativity amounts to showing that the wall - crossing automorphism @xmath1028 of fraction fields , given by crossing the wall @xmath626 from the negative to the positive side , is the pullback on rational functions of the birational mutation @xmath1029 .",
    "note the only scattering function on the wall is @xmath997 , so this follows from the coordinate free formula for the birational mutation , see e.g. , @xcite , ( 2.6 ) .",
    "we can now make precise the relationship between theta functions and cluster monomials mentioned at the end of  [ blsec ] .",
    "first recall :    [ clustermonodef ] given fixed and initial data @xmath1030 , if a seed @xmath1031 is given , with @xmath1032 the dual basis and @xmath1033 , a _ cluster monomial _ in this seed is a monomial on @xmath1034 of the form @xmath36 with @xmath1035 and the @xmath1036 non - negative for @xmath263 . by the laurent phenomenon @xcite ,",
    "such a monomial always extends to a regular function on @xmath111 .",
    "a _ cluster monomial on @xmath111 _ is a regular function which is a cluster monomial in some seed .",
    "[ thetaequalsmonomial ] let @xmath239 be fixed data satisfying the injectivity assumption and @xmath10 an initial seed .",
    "let @xmath1037 and @xmath1038 for some @xmath1039 .",
    "then @xmath942 is a positive laurent polynomial which expresses a cluster monomial of @xmath19 in the initial seed @xmath10 .",
    "further , all cluster monomials can be expressed in this way .    by theorem [ rpth ] and proposition [ rpprop ]",
    "we have a canonical isomorphism of positive spaces @xmath1040 .",
    "let @xmath697 be the root of @xmath1041 and @xmath972 any vertex of @xmath696 .",
    "then we have @xmath1042 , and the cluster monomials for the seed @xmath1021 are just the monomials @xmath36 on @xmath1043 with @xmath1044 . by theorem [ rpth ] , this is identified with the monomial @xmath1045 on @xmath1046 , as @xmath1047 takes @xmath1048 to @xmath1049 by proposition [ rpprop ] .",
    "so the cluster monomials for the chart indexed by @xmath972 in @xmath1050 are of the form @xmath36 with @xmath1051 . furthermore ,",
    "if for each vertex @xmath153 of @xmath696 , @xmath1052 is a general basepoint , we have @xmath1053 for @xmath1051 by corollary [ monocor ] . by the definition of @xmath959 in construction [ capcon ] , the corresponding rational function on the open set @xmath1054 is @xmath1055 , where @xmath341 is a path from @xmath1056 to @xmath1037 lying in the support of @xmath792 . but",
    "@xmath1057 by theorem [ blinvth ] .",
    "finally @xmath942 is a positive laurent series by theorem [ scatdiagpositive ] and the definition of broken lines . by the laurent phenomenon",
    ", it is also a polynomial .",
    "we can now remove the injectivity assumption to prove :    [ pilpth ] each cluster variable of an @xmath19-cluster algebra is a laurent polynomial with non - negative integer coefficients in the cluster variables of any given seed .",
    "since , as explained in proposition [ cvextrem ] , each cluster variable lifts canonically from @xmath19 to @xmath56 , we can replace the initial data @xmath239 with @xmath943 , for which the injectivity assumption holds .",
    "the result then immediately follows from theorem [ thetaequalsmonomial ] .",
    "[ capconpc ] when fixed and initial data @xmath239 , @xmath10 has frozen variables there is a partial compactification of cluster varieties @xmath142 , see construction [ fvss ] .",
    "we have an analogous partial compactification @xmath1058 , given by an atlas of toric varieties @xmath1059 .",
    "the choice of fans is forced by the identifications of proposition [ rpprop ] : for @xmath697 the root of @xmath696 , @xmath1060 ( @xmath1061 as in construction [ fvss ] ) and then @xmath1062 . now proposition [ rpprop ] and theorem [ rpth ] ( and their proofs ) extend to the partial compactifications without change .",
    "one checks easily that all mutations in the positive spaces @xmath1063 , and all the linear isomorphisms between corresponding tori in the atlases for @xmath1064 preserve the monomials @xmath1065 , @xmath1066 ( these are the frozen cluster variables ) , so that all the spaces come with canonical projection to @xmath1067 , preserved by the isomorphisms between these positive spaces .",
    "we shall see in the next section that in the special case of the partial compactification of @xmath56 , the relevant fans are particularly well - behaved .",
    "we begin with some philosophy concerning log calabi - yau varieties following on from the discussion of @xcite ,  1 .",
    "suppose @xmath1068 are both log calabi - yau and @xmath15 is a zariski open subset of @xmath1 , both having maximal boundary ( @xcite , definition 1.5 ) .",
    "the tropical sets ( which are expected to parameterize the theta function basis of functions on the mirror ) of @xmath1 and @xmath15 are canonically equal and we expect the mirror @xmath1069 to degenerate to the mirror @xmath161 . in particular when @xmath1070 is an algebraic torus , we expect a canonical degeneration of @xmath1069 to the dual torus @xmath1071 , under which the theta functions degenerate to monomials ( i.e. , characters ) .",
    "when @xmath1072 is an @xmath19-cluster variety , and @xmath1073 is a cluster torus , it turns out this degeneration has a purely cluster construction : the choice of seed @xmath10 determines a canonical partial compactification @xmath1074 of @xmath21 , see proposition [ ldpprop ] and remark [ aprinremark ] .",
    "the main point of this section is to show that @xmath1075 , corollary [ mutcor ] .",
    "this degeneration is central to what follows in this paper .",
    "for example , we prove linear independence of theta functions by showing they restrict to different characters on @xmath1076 , and the fock - goncharov conjecture , false in general , is true in a formal neighborhood of this fibre",
    ". there are analogous degenerations ( identified with this one when the fock - goncharov conjecture holds ) for e.g. , @xmath1077 , and here they are even more central , being the main tool we have for proving properties of this algebra ( e.g. , that its spectrum gives a gorenstein log calabi - yau of the right dimension ) , see theorem [ cfcor ] . the equality @xmath1075 , while not at all obvious from the cluster atlas , is immediate using the alternative description @xmath959 of the previous section , as we now explain .",
    "further , there are some immediate benefits , such as sign coherence of @xmath130-vectors .    for the remainder of the paper ,",
    "the only scattering diagram we will ever consider is @xmath806 , see construction [ sdprin ] .",
    "so we will often omit the superscript from the notation .",
    "[ atlascon ] fix a seed @xmath10 for fixed data @xmath239 . by construction [ capcon ] , the scattering diagram @xmath1078 gives an atlas for the space @xmath959 .",
    "( technically , we should write @xmath1079 to indicate we are constructing something isomorphic to @xmath56 , however this will make the notation even less readable . ) this was constructed by attaching a copy @xmath1080 of the torus @xmath1081 to each cluster chamber @xmath927 , and ( compositions of ) wall crossing automorphisms give the birational maps between them . by theorem [ rpth ] this space is canonically identified with @xmath56 : @xmath56 has an atlas of tori @xmath1082 parameterized by vertices @xmath153 of @xmath696 , and we have canonical isomorphisms @xmath1083 for each vertex @xmath153 which induce the isomorphism @xmath1084 .    in what follows , if @xmath153 is a vertex of @xmath696 , we write @xmath1085 for the seed obtained by mutating @xmath1086 ( see ) via the sequence of mutations dictated by the path from the root @xmath697 of @xmath696 to @xmath153 .",
    "as described in remark [ aprinremark ] , the initial seed @xmath10 determines the partial compactification @xmath1087 , given by the atlas of toric varieties @xmath1088 where @xmath1089 is the cone generated by the subset of basis vectors of @xmath1090 corresponding to the second copy of @xmath844 .    by remark [ capconpc ]",
    ", the seed @xmath10 also determines a partial compactification @xmath1091 ( the superscript , thus the seed _ close _ to the overline in the notation , is responsible for the partial compactification ) , given by an atlas of toric varieties .",
    "explicitly , if @xmath153 is a vertex of @xmath696 , the fan @xmath1089 yields the partial compactification of @xmath1092 in @xmath124 , and this is identified with @xmath1093 via @xmath1094 under the isomorphism @xmath1095 of theorem [ rpth ] .",
    "thus the fan giving the partial compactifaction of @xmath1093 is @xmath1096 in fact , this fan is easily calculated :    [ clem ] the cones @xmath1097 , and thus the toric varieties in the atlas for the partial compactification @xmath1091 , are the same for all @xmath153 .",
    "each is equal to the cone spanned by the vectors @xmath1098 , where @xmath74 and @xmath1099 denotes the dual basis .",
    "@xmath1100 is the given cone , by definition of the seed @xmath1086 . by construction [ fvss ]",
    "the other fans are given by applying the geometric tropicalisation of the birational gluing of the tori in the atlas for @xmath959 .",
    "these birational maps are given by wall crossings in @xmath378 .",
    "but for each wall between cluster chambers the wall crossing is a standard mutation @xmath1101 , notation as in  [ tropsec ] , for some @xmath1102 .",
    "the attached scattering function is @xmath1103 for some @xmath510 in the convex hull of @xmath1104 , and @xmath1105 .",
    "but then @xmath1106",
    ". thus the geometric tropicalisation @xmath1107 fixes all the @xmath1108 by , and so the fan is constant .    [ mutcor ] fix a seed @xmath10 , and let @xmath697 be the root of @xmath696 .",
    "the following hold :    1 .",
    "the fibre of @xmath1109 over @xmath81 is @xmath22 .",
    "( see proposition [ ldpprop ] for the definition of @xmath1110 ) .",
    "the mutation maps @xmath1111 for the atlas of toric varieties defining @xmath1112 are isomorphisms in a neighborhood of the fibre over @xmath1113 .",
    "3 .   for the partial compactification @xmath1114 with atlas corresponding to cluster chambers of @xmath378 ,",
    "the corresponding mutation map between two charts ( which by lemma [ clem ] has the same domain and range ) is an isomorphism in a neighborhood of the fibre @xmath1113 and restricts to the identity on this fibre .",
    "it is clear that ( 3 ) implies ( 2 ) implies ( 1 ) .    for ( 3 ) , the scattering diagram @xmath378 is trivial modulo the @xmath1115 ( which pulls back to @xmath1116 ) , because this holds for the initial walls , with attached functions @xmath1117 .",
    "now for any adjacent vertices @xmath1118 , the birational gluing map @xmath1119 is given on the level of monomials by @xmath1120 for a regular function @xmath34 on @xmath1121 and some @xmath1122 and any @xmath1123 , and by the above @xmath34 is identically @xmath616 when restricted to the torus where the @xmath1115 are zero . on the other hand",
    ", this birational map gives an isomorphism between the open subsets of @xmath1124 and @xmath1121 where @xmath34 is non - zero .",
    "in particular , the gluing maps are isomorphisms in the neighbourhood of the fibre where all @xmath1115 vanish and are the identity on that fibre .",
    "the proof of the corollary shows the utility of constructing @xmath1125 as the positive space @xmath1091 associated to the cluster chambers in the scattering diagram @xmath378 .",
    "next we show sign coherence of @xmath130-vectors follows easily from the corollary .    in what follows , given a seed @xmath1126 obtained via mutation from @xmath1086 , we write @xmath1127 for the @xmath1128 exchange matrix for this seed , with @xmath1129 the @xmath130-vectors of this seed are the rows of the right - hand @xmath1130 submatrix .",
    "[ sccveccor ] for any vertex @xmath153 of @xmath696 and fixed @xmath460 satisfying @xmath1131 , either the entries @xmath1132 , @xmath1133 are all non - positive , or these entries are all non - negative .",
    "the result follows directly from corollary [ mutcor ] by writing down the mutation in cluster coordinates . following the notation given in appendix [ rdsec ]",
    ", we have the fixed seed @xmath1134 which determines @xmath1087 and the family @xmath1074 .",
    "the corresponding initial seed for @xmath124 is @xmath1135 and the coordinate @xmath1115 on @xmath1136 pulls back to @xmath1116 on @xmath124 .",
    "these are the frozen cluster variables for @xmath124 .",
    "note @xmath1137 where @xmath1138 is the dual basis to the basis @xmath1139 of @xmath1140 .",
    "a vertex @xmath1141 corresponds to a seed @xmath1142 for @xmath240 with corresponding seed @xmath1143 for @xmath1144 , with @xmath1145 obtained from @xmath1086 by a sequence of mutations .",
    "the @xmath1146 are no longer necessarily given by the @xmath1147 .",
    "write @xmath1148 , @xmath1149 for the corresponding basis of @xmath1150 .",
    "the cluster variables on the corresponding torus @xmath1151 are @xmath1152 .",
    "say @xmath1153 is a vertex of @xmath696 adjacent to @xmath1141 along an edge labelled by @xmath460 .",
    "then @xmath1154 and the cluster coordinates are @xmath1155 . since the last @xmath510 cluster variables are frozen , @xmath1156 , @xmath1157 .",
    "the fan @xmath1158 determining a toric variety in the atlas for @xmath124 consists of a single cone spanned by @xmath1159 , and @xmath1160 similarly @xmath1161 the mutation @xmath1162 is given by the exchange relation @xcite ( 2.15 ) ( see @xcite , ( 2.8 ) in our notation ) which is , with @xmath1163 , @xmath1164_+ } + \\prod_{i=1}^{2n } ( a_i')^{-[\\tilde \\epsilon_{ki}]_- } ) \\\\",
    "= { } & ( a_k')^{-1 } ( p_k^+ \\prod_{i=1}^{n } ( a_i')^{[\\tilde\\epsilon_{ki}]_+ } + p_k^{- }   \\prod_{i=1}^{n } ( a_i')^{-[\\tilde\\epsilon_{ki}]_- } ) \\\\ \\mu_{k}^*(x_i)= { } & x_i\\end{aligned}\\ ] ] where @xmath1165 now @xmath569 fails to be an isomorphism exactly along the vanishing locus of @xmath1166_+ } + p_k^{- }   \\prod_{i=1}^{n } ( a_i')^{-[\\tilde\\epsilon_{ki}]_-}.\\ ] ] this locus is disjoint from the central fibre @xmath1113 by corollary [ mutcor ] . on the other hand",
    "it is disjoint from the central fibre if and only if exactly one of @xmath1167 is the empty product , i.e. , the constant monomial @xmath616 .",
    "sign coherence is the statement that at least one of @xmath1168 , @xmath1169 is the empty product .",
    "recall from definition [ clustermonodef ] the notion of cluster monomial , and also recall from proposition [ ldpprop ] , ( 2 ) the @xmath1076-action on @xmath1170 .",
    "[ gvecdef ] by proposition [ cvextrem ] , the choice of seed @xmath10 provides a canonical extension of each cluster monomial on @xmath111 to a cluster monomial on @xmath1170 .",
    "each cluster monomial on @xmath56 is a @xmath22-eigenfunction under the above @xmath1076 action .",
    "the _ @xmath41-vector _ with respect to a seed @xmath10 ( see @xcite , ( 6.4 ) ) associated to a cluster monomial of @xmath19 is the @xmath22-weight of its lift determined by @xmath10 .",
    "we now give an alternative description of @xmath41-vectors , which will lead to a more intrinsic definition of @xmath41-vector ( definition [ intrinsicga ] ) .",
    "this in turn generalises to all the different flavors of cluster varieties ( definition [ fgccthg0 ] ) .",
    "[ gprop ] fix a seed @xmath10 , giving the partial compactification @xmath1087 and @xmath22-equivariant @xmath1074 .",
    "the central fibre @xmath1171 is a @xmath22-torsor .",
    "let @xmath1172 be a cluster monomial on @xmath1173 and @xmath1174 the corresponding lifted cluster monomial on @xmath124 .",
    "this restricts to a regular non - vanishing @xmath22-eigenfunction along @xmath1171 , and so canonically determines an element of @xmath1175 ( its weight ) .",
    "this is the @xmath41-vector associated to @xmath1172 .",
    "let @xmath1176 determine the seed in which @xmath1172 is defined as a monomial . by corollary [ mutcor ] , all mutations are isomorphisms near the central fibre of @xmath1110 , so it s enough to check that @xmath1172 is regular on the toric variety @xmath1177 , and restricts to a character on its central fibre .",
    "but this is true by construction : if the seed @xmath1178 is @xmath1179 , then the cluster variables for the seed @xmath1085 on the torus @xmath1082 are @xmath1180 and @xmath1089 is the fan with rays spanned by the @xmath1181 .",
    "thus the lift @xmath1174 of @xmath1172 is regular on @xmath1182 , and hence is regular in a neighbourhood of @xmath1183 .",
    "furthermore , it is non - zero on @xmath1171 since the canonical lift only involves monomials @xmath1184 , which are non - vanishing on the strata of @xmath1182 .",
    "the final statement follows since the restriction of the variable to the central fibre will have the same @xmath22-weight , as the map @xmath1110 is @xmath22-equivariant , and @xmath22 fixes @xmath1185 .",
    "[ intrinsicga ] writing @xmath1186 , let @xmath1172 be a cluster monomial of the form @xmath36 on a chart @xmath1187 , @xmath1188 .",
    "note that @xmath1189 for all @xmath210 , so after identifying @xmath793 with @xmath1190 , @xmath860 yields a point in the fock - goncharov cluster chamber @xmath1191 , as defined in lemma [ fgcclem ] .",
    "we define @xmath1192 to be this point of @xmath1193 .",
    "[ gvecthm ] let @xmath1172 be a cluster monomial on @xmath19 , and fix a seed @xmath10 giving an identification @xmath1194 .",
    "then under this identification , @xmath1192 is the @xmath41-vector of the cluster monomial @xmath1172 with respect to @xmath10 .",
    "we first note that if @xmath1172 is a monomial @xmath36 on the chart @xmath1187 with @xmath1195 , @xmath1196 , then the image of @xmath1192 under the identification @xmath1197 is @xmath1198 , where as usual @xmath1199 is the rational map induced by the inclusions @xmath1200 .",
    "the choice of the seed @xmath10 gives the lift of @xmath1172 to a cluster monomial @xmath1174 on @xmath1170 . using the identification of @xmath1170 with @xmath957 ,",
    "@xmath1174 is identified with a monomial of the form @xmath1201 on the chart @xmath1092 ( or @xmath1202 , depending on how one chooses to parametrize charts of @xmath957 ) .",
    "let @xmath697 be the root of @xmath696 .",
    "by lemma [ clem ] , the corresponding chart of @xmath1203 is the toric variety defined by the fan @xmath1097 . by proposition [ gprop ] , @xmath1174 is a regular function on @xmath1124 which is non - vanishing along @xmath1171 .",
    "the @xmath1076 weight is the @xmath41-vector . since @xmath1097 is the cone spanned by @xmath1204 in @xmath1205 , where @xmath787 , one sees that @xmath1206 .    thus to show the corollary , it is enough to show that @xmath1207 .",
    "note however a similar statement is already true at the level of @xmath1170 .",
    "indeed , in the chart @xmath1092 of @xmath1170 , the monomial @xmath1174 takes the form @xmath1208 for some @xmath1209 , and @xmath1210 lies in the positive chamber of @xmath1211 .",
    "but @xmath1212 is the image of this positive chamber under the map @xmath1213 , where now @xmath1214 is the map induced by the inclusions @xmath1215 .",
    "now @xmath1216 by theorem [ rpth ] , and @xmath1217 , so we see that @xmath1218 .    now because there is a well - defined map @xmath1219 by proposition [ ldpprop ] , ( 4 ) , with @xmath808 given by projection onto @xmath113 , this projection @xmath808 is compatible with the tropicalizations @xmath1220 and @xmath1221 , i.e. , @xmath1222 .",
    "thus @xmath1223 , as desired .",
    "this corollary shows us how to generalize the notion of @xmath41-vector to any cluster variety :    [ fgccthg0 ] let @xmath5 be a cluster variety , suppose that @xmath34 is a global monomial ( see definition [ globalmonomialdef ] ) on @xmath15 , and let @xmath10 be a seed such that @xmath1224 is the character @xmath36 , @xmath1225 .",
    "define the _",
    "@xmath41-vector _ of @xmath34 to be the image of @xmath860 under the identifications of  [ tropsec ] : @xmath1226 we write the @xmath41-vector of @xmath34 as @xmath1227 .",
    "note that the definition as given is not clearly independent of the choice of seed @xmath10 , but for a cluster variety of @xmath19 type , the previous corollary shows this .",
    "this independence will be shown in general in lemma [ fgccthg2 ] .",
    "by @xcite , the sign coherence for @xmath130-vectors ( proved in corollary [ sccveccor ] here ) , implies a sign coherence for @xmath41-vectors .",
    "here we give a much shorter proof using the above description of @xmath41-vectors .",
    "[ scgvec ] fix initial seed @xmath1228 , with @xmath1229 as usual . given any mutation equivalent seed @xmath609 , the @xmath1230-coordinates of the @xmath41-vectors for the cluster variables of this seed , expressed in the basis @xmath1231 , are either all non - negative , or all non - positive .    by corollary [ gvecthm ] ,",
    "the @xmath41-vectors in question are the generators of a chamber in the cluster complex of @xmath10 , defined as the images of the cluster chambers of @xmath806 under the projection @xmath808 , by theorem [ fgccth ] .",
    "the hyperplanes @xmath640 are thus walls in the cluster complex . in particular",
    ", @xmath1232 is either non - negative everywhere on a chamber , or non - positive everywhere on a chamber .",
    "the theorem follows .    for future reference",
    ", we record the relationship between @xmath130-vectors and the cluster chambers in the case of no frozen variables . fix a seed @xmath10 . by lemma [ fgcclem",
    "] , each mutation equivalent seed @xmath1195 has an associated cluster chamber @xmath1233 .",
    "this is a full dimensional strictly simplicial cone , generated by a basis of @xmath113 consisting of @xmath41-vectors of the cluster variables @xmath1234 of @xmath1235 .",
    "the facets of @xmath1212 are thus in natural bijection with the elements of @xmath10 ( or the indices in @xmath1236 ) .",
    "[ facelem ] the facet of @xmath1212 corresponding to @xmath1237 is the intersection of @xmath1212 with the orthogonal complement of the @xmath130-vector for the corresponding element of @xmath1238 ( the corresponding mutation of the langlands dual seed @xmath1239 , see appendix [ ldsec ] ) .",
    "furthermore , each @xmath130-vector for @xmath1238 is non - negative on @xmath1212 .",
    "this is the content of @xcite , theorem 1.2 , the condition ( 1.8 ) of @xcite holding by our corollary [ sccveccor ] .",
    "the @xmath41-vectors used in @xcite are precisely the @xmath41-vectors of the cluster variables @xmath1240 .",
    "we close this section by identifying the cluster complex @xmath118 with the fomin - zelevinsky exchange graph .",
    "the identification yields a proof of part of @xcite , conjecture 4.1 .",
    "this was originally proven in @xcite , but we include our alternative argument as the statements follow quite easily from our techniques .",
    "[ cdsth ] a seed for a cluster algebra without frozen variables is uniquely determined by its cluster , i.e. , the ordered collection of global functions @xmath1241 determines the exchange matrix @xmath652 with entries @xmath1242 .",
    "the vertices of the exchange graph can be identified with the clusters , with two clusters adjacent if and only if their intersection has cardinality @xmath1243 .",
    "[ rbijlem ] if for two mutation equivalent seeds @xmath1244 the open subsets @xmath1245 are the same , then the open subsets @xmath1246 are the same , and the open subsets @xmath1247 are the same .",
    "we first claim that a chart in the atlas for @xmath56 ( or any @xmath19-type cluster variety ) is the complement of the union of zero loci of global functions which restrict to characters on the chart .",
    "indeed , let @xmath1 be such a chart and @xmath15 be the complement of the union of such zero loci .",
    "clearly @xmath1248 , since characters have no zeroes on @xmath1 .",
    "on the other hand , by the laurent phenomenon , the cluster variables on @xmath1 extend to global monomials , and are non - vanishing on @xmath15 .",
    "these functions define a map @xmath1249 which is clearly the identity when restricted to @xmath1 .",
    "since @xmath1170 is separated ( see @xcite , theorem 3.14 ) , it follows that @xmath1250 .",
    "let @xmath1251 be the vertices of @xmath695 corresponding to the seeds @xmath10 and @xmath609 .",
    "for the statement about @xmath56 it s now enough to show that @xmath1252 is a character for any global monomial @xmath1174 which restricts to a character on @xmath1253 .",
    "now @xmath1254 , and this is a character by the assumption that @xmath1255 inside @xmath111 .",
    "by positivity of the laurent phenomenon , corollary [ pilpth ] , @xmath1252 is a laurent polynomial with non - negative integer coefficients . since its restriction to some subtorus is a character , it must be a character .",
    "this completes the proof for @xmath56 .",
    "this implies the result for @xmath27 , which is the quotient of @xmath56 by @xmath1076 , see proposition [ ldpprop ] , ( 2 ) .",
    "we have the following alternative description of @xmath130-vectors in the case of no frozen variables .",
    "fix a seed @xmath10 . by lemma [ fgcclem",
    "] , each mutation equivalent seed @xmath1195 has an associated cluster chamber @xmath1233 .",
    "this is a full dimensional strictly simplicial cone , generated by a basis of @xmath113 consisting of @xmath41-vectors of the cluster variables @xmath1234 of @xmath1235 .",
    "the facets of @xmath1212 are thus in natural bijection with the elements of @xmath10 ( or the indices in @xmath1236 ) .    [ facelem ]",
    "the facet of @xmath1212 corresponding to @xmath1237 is the intersection of @xmath1212 with the orthogonal complement of the @xmath130-vector for the corresponding element of @xmath1238 ( the corresponding mutation of the langlands dual seed @xmath1239 , see appendix [ ldsec ] ) .",
    "furthermore , each @xmath130-vector for @xmath1238 is non - negative on @xmath1212 .",
    "this is the content of @xcite , theorem 1.2 , the condition ( 1.8 ) of @xcite holding by our corollary [ sccveccor ] .",
    "the @xmath41-vectors used in @xcite are precisely the @xmath41-vectors of the cluster variables @xmath1240 .",
    "we introduce notation for the @xmath130-vectors as follows . for fixed seed @xmath10",
    "we write @xmath1256 for the @xmath130-vector , with fixed seed @xmath10 , whose @xmath1257 entry is @xmath1258 , see .",
    "[ cdeexlem ] fix a seed @xmath10 .",
    "if we view the @xmath130-vectors as vectors of @xmath240 expressed in the basis @xmath10 , then @xmath1259 is the @xmath905 basis vector of @xmath1260 , i.e. , the @xmath130-vectors for a seed adjacent to the initial fixed seed @xmath10 are just the basis elements of this seed .",
    "these @xmath130-vectors , for all seeds adjacent to @xmath10 , determine the exchange matrix for @xmath10 . also , the chambers @xmath1261 together with the adjacent chambers determine the exchange matrix for @xmath10 .",
    "the explicit formula for the @xmath130-vectors is an easy exercise applying the definition , see e.g. , @xcite , ( 2.4 ) .",
    "the statement that the @xmath130-vectors for seeds adjacent to @xmath10 determines the exchange matrix is obvious from the formula for mutations , e.g. , @xcite , ( 2.3 ) .",
    "the statement that the given chambers determine the exchange matrix for @xmath10 then follows .",
    "indeed , the chambers determine the @xmath130-vectors for @xmath1239 and @xmath1262 by lemma [ facelem ] , and hence determines the exchange matrix for @xmath1239 .",
    "but that itself determines the exchange matrix for @xmath10 because langlands duality is an involution .",
    "suppose two seeds @xmath1244 have the same cluster .",
    "we show the exchange matrices are the same .",
    "the cluster determines the open subset in the atlas for @xmath19 ( it s the locus where the cluster variables are all non - zero , c.f .",
    "the proof of lemma [ rbijlem ] ) , thus @xmath1263 and so by lemma [ rbijlem ] , @xmath1264 .",
    "thus the associated birational mutation @xmath1265 is a regular isomorphism , and thus the piecewise linear mutation @xmath1266 is a linear isomorphism . because the clusters are equal it takes @xmath693 to @xmath1267 ( the chamber is determined by the tropicalisations of the cluster variables ) .",
    "note these are chambers for the scattering diagram for @xmath1268 .",
    "now by lemma [ cdeexlem ] the exchange matrices for @xmath1239 and @xmath1269 are the same .",
    "this implies the exchange matrices for @xmath10 and @xmath609 are the same ( see appendix [ ldsec ] for a review of langlands duality ) .",
    "suppose there are no frozen variables .",
    "viewed as an abstract fan , the cluster complex @xmath118 in @xmath237 is the dual to the fomin - zelevinsky exchange graph : the maximal cones are in bijection with equivalence classes of seeds ( where two seeds are defined to be equivalent if , possibly after permutation of the indices @xmath844 respecting the @xmath251 , the cluster variables and pairings @xmath1270 coincide ) , with their edges corresponding to the cluster variables of the seed .    by the fock - goncharov definition of the cluster complex , each cluster determines a maximal cone of @xmath118 , and we know @xmath118 forms a fan in @xmath237 by lemma [ fgcclem ] .",
    "thus we have a map from the fomin - zelevinsky exchange graph to the dual graph to @xmath118 , which is obviously surjective .",
    "but the chamber corresponding to a seed determines the cluster .",
    "indeed , by proposition [ oneblprop ] , the theta functions associated to points of the chamber are the cluster monomials for this cluster , and the theta functions corresponding to primitive generators of the rays of the chamber ( which we recall is a simplicial cone ) are the variables of the cluster .",
    "now the cluster determines the seed by theorem [ cdsth ] .",
    "in this section we associate in a canonical way to every universal laurent polynomial @xmath41 on @xmath56 a formal sum @xmath1271 , @xmath1272 , which , roughly speaking , converges to @xmath41 at infinity in each partial compactification @xmath1087 .",
    "to give such an expression for a single @xmath10 is quite easy , see propositions [ thetabasislemma ] and [ hatinfun ] .",
    "the crucial point is that remarkably these coefficients are independent of @xmath10 , see theorem [ ffgth ] , our alternative to the fock - goncharov conjecture ( which fails in general ) .",
    "this establishes the connection between @xmath139 and @xmath132 , and is key to one of our main technical results , see the proof of proposition [ markscor ] .",
    "choose a seed @xmath1134 .",
    "we let @xmath1273 , @xmath1274 $ ] , set @xmath1275/i_{{{\\bf s}}}^{k+1 } , \\quad \\oca^{{{\\bf s}}}_{{\\operatorname{prin}},k}=\\oca_{{\\operatorname{prin}}}^{{{\\bf s}}}\\times_{{\\mathbb{a}}^n_{x_1,\\ldots , x_n } } { \\mathbb{a}}^n_{(x_1,\\ldots , x_n),k},\\ ] ] and write the map induced by @xmath1276 also as @xmath1277 we use the notation @xmath1278 for a variety @xmath0 , so that e.g. , @xmath1279 is the upper cluster algebra .",
    "we define @xmath1280 note that for any @xmath1281 , @xmath1282 for some monomial @xmath1283 in the @xmath1115 .",
    "this induces a canonical inclusion @xmath1284 }   { \\bbbk}[n]\\ ] ] where @xmath1285 is the monoid generated by @xmath1286 .",
    "let @xmath1287 be the projection , and set @xmath1288    recall a choice of seed @xmath74 determines a scattering diagram @xmath1289 with initial walls @xmath1290 for @xmath263 .",
    "we let @xmath1291 be the monoid generated by @xmath1292 .",
    "we have the cluster complex @xmath792 of cones in @xmath1293 , with cones @xmath1294 for each vertex @xmath697 of @xmath696 .    similarly to the above discussion",
    ", @xmath1295 induces maps @xmath1296 the isomorphism between @xmath1297 and @xmath1298 discussed in construction [ atlascon ] restricts to give an isomorphism between @xmath1299 and @xmath1300 .",
    "furthermore , as @xmath1298 is described by gluing charts isomorphic to @xmath1301 with @xmath1302 the cone generated by @xmath1303 for every chart by lemma [ clem ] , in fact @xmath1300 is described by gluing charts parameterized by @xmath927 isomorphic to @xmath1304 note for @xmath1305 , the birational map @xmath1306 between the charts of @xmath1298 indexed by @xmath946 and @xmath953 restrict to isomorphisms @xmath1307 : this is implied by corollary [ mutcor ] , ( 3 ) .",
    "we choose a generic basepoint @xmath1308 for each @xmath1309 .",
    "then for any @xmath1310 , by proposition [ formalthfun ] , we obtain as a sum over broken lines a well - defined series @xmath1311}\\ ] ] satisfying by theorem [ blinvth ] @xmath1312    the following definition will yield the structure constants for the @xmath1313 :    [ structuredef ] let @xmath1314 .",
    "let @xmath1315 be chosen generally .",
    "there are at most finitely many pairs of broken lines @xmath1316 with @xmath1317 , @xmath1318 and @xmath1319 ( see definition [ ifdef ] for this notation ) .",
    "we can then define @xmath1320 the integers @xmath1321 are non - negative .    by definition of scattering diagram for @xmath378 ,",
    "all walls @xmath1322 have @xmath1323}$ ] . note also that because @xmath1324 comes from a strictly convex cone , any element of @xmath1324 can only be written as a finite sum of elements in @xmath1324 in a finite number of ways . in particular , as @xmath1325 , we can write @xmath1326 for @xmath1327 . thus we have @xmath1328 and there are only a finite number of possible @xmath1329 , @xmath1330 .",
    "so with @xmath1331 fixed , there are only finitely many possible monomial decorations that can occur on either @xmath1332 . from this finiteness",
    "is clear , c.f .",
    "the proof of proposition [ formalthfun ] .",
    "the non - negativity statement follows from theorem [ scatdiagpositive ] , which implies @xmath1333 for any broken line @xmath341 .",
    "[ ckdef ] for a monoid @xmath1334 a lattice , we write @xmath1335 for the subset of elements which can be written as a sum of @xmath460 non - invertible elements of @xmath1336 .    [ thetabasislemma ] notation as above .",
    "the following hold :    1 .   for @xmath1337",
    ", @xmath1338 is a regular function on @xmath1339 , and the @xmath1338 as @xmath946 varies glue to give a canonically defined function @xmath1340 .",
    "2 .   for each @xmath1341 and @xmath1342 , we have @xmath1343 , and thus the @xmath1344 for @xmath1345 canonically define @xmath1346}{\\bbbk}[n].\\ ] ] the @xmath46 are linearly independent , i.e. , we have a canonical inclusion of @xmath8-vector spaces @xmath1347 } { \\bbbk}[n].\\ ] ] 3 .   @xmath1348 } { \\bbbk}[n]\\ ] ] for @xmath1349 chosen sufficiently close to @xmath908 .",
    "in particular , @xmath1321 is independent of the choice of @xmath1350 sufficiently near @xmath908 , and we define @xmath1351 for @xmath1350 chosen sufficiently close to @xmath908 .",
    "@xmath1352 restrict to bases of @xmath1353 as @xmath8-vector space and @xmath1354/i_{{{\\bf s}}}^{k+1}$]-module respectively .",
    "using the isomorphism @xmath1297 with @xmath1203 , the basic compatibility theorem [ blinvth ] gives the gluing statement ( 1 ) . to prove ( 4 ) , using the @xmath240-linearity , it is enough to prove the given @xmath46 restrict to basis as @xmath1355/(x_1,\\dots , x_n)^{k+1}$]-module . by corollary [ mutcor ] ,",
    "the central fibre of @xmath1356 is the torus @xmath22 .",
    "if @xmath1357 , the only broken lines with @xmath1358 and @xmath1359 are straight lines .",
    "thus these @xmath1360 restrict to the basis of characters on the central fibre .",
    "now the result follows from the nilpotent nakayama lemma ( see @xcite , pg .",
    "58 , theorem 8.4 ) .",
    "\\(2 ) follows immediately from ( 1 ) and ( 4 ) .    for ( 3 ) ,",
    "it is enough to prove the equality in @xmath1361 for each @xmath460 .",
    "the argument is the same as the proof of the multiplication rule in @xcite , theorem 2.38 , which , as it is very short , we recall for the reader s convenience .",
    "we work with the scattering diagram @xmath378 modulo @xmath1362 , which has only finitely many walls with non - trivial attached function . expressing @xmath1363 in the basis @xmath1364 of ( 4 ) , we examine the coefficient of @xmath46 . we choose a general point @xmath1365 very close to @xmath908 , so that @xmath1366 lie in the closure of the same connected component of @xmath1367 ( where @xmath1368 denotes the finitely many walls non - trivial modulo @xmath1362 ) . by definition of @xmath1369 , @xmath1370 now observe first that there is only one broken line @xmath341 with endpoint @xmath1350 and @xmath1371 : this is the broken line whose image is @xmath1372 .",
    "indeed , the final segment of such a @xmath341 is on this ray , and this ray meets no walls , other than walls containing @xmath908 , so the broken line can not bend .",
    "thus the coefficient of @xmath1373 can be read off by looking at the coefficient of the monomial @xmath1374 on the right - hand side of the above equation .",
    "this gives the desired formula to order @xmath460 .",
    "the finiteness argument of definition - lemma [ structuredef ] then shows that for any given @xmath908 , @xmath1350 chosen sufficiently close to @xmath908 will work for all @xmath460 .    by the proposition",
    ", each @xmath1375 has a unique expression as a convergent formal sum @xmath1376 , with coefficients @xmath1377 .",
    "this immediately implies :    [ hatinfun ] notation as in proposition [ thetabasislemma ] . there is a unique inclusion @xmath1378 } { \\bbbk}[n ]   \\hookrightarrow   { \\operatorname{hom}}_{\\operatorname{sets}}({{\\mathcal a}^{{\\vee}}_{{\\operatorname{prin}}}(\\bz^t)}= \\tm^\\circ_{{{\\bf s}}},{\\bbbk})\\ ] ] given by @xmath1379 we have @xmath1380 for all @xmath1381 .",
    "[ defs ] for @xmath1382 , write @xmath1383 on the torus chart @xmath1384 of @xmath56 corresponding to a seed @xmath10 .",
    "we also have a formal expansion @xmath1385 as @xmath1386 for some @xmath1387 . set @xmath1388",
    "if @xmath1324 is the monoid generated by @xmath1389 , it is easy to check from the construction of theta functions that @xmath1390    note that @xmath1391 is constructed by gluing together various @xmath1392/(x_1,\\ldots , x_n)^{k+1}$ ] via isomorphisms , and hence @xmath1393/(x_1,\\ldots , x_n)^{k+1}$ ] . thus by proposition [ thetabasislemma ] , ( 4 ) , a collection of the @xmath46 yield a basis for regular functions on @xmath1394/(x_1,\\ldots , x_n)^{k+1}$ ] with the property that this basis restricts to a monomial basis on the underlying reduced space .",
    "it remains a mystery about theta functions in general whether they satisfy some other interesting characterizing properties , such as the heat equation satisfied by theta functions on abelian varieties .    [ defs ] we need to make algorithmically explicit the map @xmath1395 of proposition [ hatinfun ] when restricted to elements of @xmath139 .",
    "let @xmath1281 be a universal laurent polynomial .",
    "fix a seed @xmath74 .",
    "let @xmath1396 be the monoid generated by the @xmath1397 , so that monomials in functions attached to walls of @xmath806 all lie in @xmath1398 $ ] .",
    "let @xmath1399 be the corresponding torus in the atlas for @xmath56 .",
    "let @xmath1400 be the laurent polynomial @xmath1401\\ ] ] representing @xmath41 in this chart , and let @xmath1402 .",
    "we inductively define power series @xmath1403 , @xmath1404 , whose non - zero monomial terms lie in @xmath1405 .",
    "let @xmath827 be a general basepoint in @xmath693 .",
    "set @xmath1406 .",
    "having defined @xmath1403 we set @xmath1407 set @xmath1408 .",
    "note @xmath1409 where the higher order terms are monomials in @xmath1410 .",
    "thus each term of @xmath1411 is in @xmath1412 as required .",
    "we thus have for all @xmath460 @xmath1413 where the higher order terms are monomials in @xmath1412 .",
    "we set @xmath1414 this indexes the @xmath1415 sum of theta functions , and @xmath1416 .",
    "note the union is disjoint by construction .",
    "associated to each @xmath1417 we have a coefficient @xmath1418 .",
    "now defining @xmath1419 by @xmath1420 gives the @xmath1395 of proposition [ hatinfun ] .",
    "the main point of the following theorem is that on @xmath1421 , @xmath1395 is independent of the seed @xmath10 .",
    "[ ffgth ] there is a unique function @xmath1422 with all the following properties :    1 .",
    "@xmath59 is compatible with the @xmath1423$]-module structure on @xmath139 and the @xmath240-translation action on @xmath1424 in the sense that @xmath1425 for all @xmath1281 , @xmath1381 , @xmath1426 .",
    "2 .   for each choice of seed @xmath10",
    ", the formal sum @xmath1271 converges to @xmath41 in @xmath1427}{\\bbbk}[n]$ ] .",
    "3 .   if @xmath1428 then @xmath1429 unless @xmath1430 , and @xmath1431 and the coefficients @xmath1432 are the coefficients for the expansion of viewed as an element of @xmath1353 in the basis of theta functions from proposition [ thetabasislemma ] .",
    "4 .   for any seed @xmath609 obtained via mutations from @xmath10 , @xmath59 is the composition of the inclusions @xmath1433 }   { \\bbbk}[n ] \\subset   { \\operatorname{hom}}_{\\operatorname{sets}}({{\\mathcal a}^{{\\vee}}_{{\\operatorname{prin}}}(\\bz^t)}= \\tm^\\circ_{{{\\bf s}}'},{\\bbbk})\\ ] ] given by and proposition [ hatinfun ] .",
    "this sends a cluster monomial @xmath1434 to the delta function @xmath1435 for its @xmath41-vector @xmath1436 .    in the notation of definition [ defs ] , @xmath1437 for any seed @xmath609 .",
    "in particular the sets @xmath1438 of definition [ defs ] are independent of the seed , depending only on @xmath41 .",
    "it is easy to see from proposition [ thetabasislemma ] that @xmath1395 is the unique function which satisfies conditions ( 1 - 3 ) of the theorem for the given seed @xmath10 .",
    "moreover it satisfies ( 4 ) for @xmath1439 .",
    "thus it is enough to show that @xmath1395 is independent of the choice of seed .",
    "the basic idea is that @xmath1395 expresses @xmath41 as a sum of theta functions .",
    "as the theta functions are linearly independent , the expression is unique .",
    "but as the sums can be infinite , we make the argument in the appropriate formal neighborhood .    for a seed @xmath1440",
    "we write @xmath1061 for the fan in @xmath1441 with rays spanned by the @xmath1442 .",
    "we write @xmath1443 for the fan in @xmath1444 with rays spanned by the @xmath1445 .",
    "clearly for the invariance it is enough to consider two adjacent seeds , say @xmath1440 and @xmath1446 obtained , without loss of generality , by mutation of the first basis vector @xmath1447 .",
    "we consider the union of the two tori @xmath1448 in the atlas for @xmath56 , glued by the mutation @xmath1449 , which we recall is given by @xmath1450 @xmath1451 , see @xcite , ( 2.6 ) .",
    "we will partially compactify this union by gluing the toric varieties @xmath1452 writing @xmath1453 under this gluing .",
    "note this union of toric varieties is _ not _ part of the atlas for either @xmath124 or @xmath1454 ( for either of these , the fans determining the atlases for the toric compactifications are related by geometric tropicalisation of the birational mutation , but here @xmath1455 , and thus @xmath1456 ) .",
    "note @xmath1457 for @xmath1458 , while @xmath1459_+ d_jf_j$ ] , ( see e.g. , @xcite , ( 2.3 ) ) .",
    "thus the two cones @xmath1460 share a codimension one face and form a fan , @xmath1461 .",
    "let @xmath1462 . by construction the rational map @xmath1463 is regular , and the same holds for the seed @xmath609 .",
    "observe that @xmath1449 commutes with the second projection @xmath1464 . from this",
    "it follows that @xmath1465 is regular .",
    "note the toric boundary @xmath1466 has a unique complete one - dimensional stratum @xmath1467 and two zero strata @xmath1468 , @xmath1469 , whose complements in the @xmath1467 we write as @xmath1470 respectively .",
    "we write e.g.  @xmath1471 for the @xmath1415 order neighborhood of this curve , and e.g.   @xmath1472 for the scheme - theoretic inverse image @xmath1473 .",
    "finally , let @xmath1474 we will show theta functions give a basis of functions on these formal neighborhoods . to make the computation transparent we introduce coordinates .",
    "we let @xmath1475 , @xmath1476 , observing that @xmath1477 for all @xmath1381 . in particular",
    "@xmath1478 , @xmath1479 .",
    "since there is a map of fans from @xmath1461 to the fan defining @xmath1480 by dividing out by the subspace spanned by @xmath1481 , there is a map @xmath1482 .",
    "we can pull back @xmath1483 to @xmath15 , getting a line bundle with monomial sections @xmath1484 pulled back from @xmath1480 with @xmath1485 in the above notation .",
    "the open subset of @xmath1 where @xmath1486 is given explicitly up to codimension two by the hypersurface @xmath1487 where @xmath1488 and @xmath1489 .",
    "note the points @xmath1490 lie in the chambers of @xmath792 corresponding to @xmath10 and @xmath609 respectively , and thus by proposition [ oneblprop ] these points determine theta functions in @xmath139 , which are of course the corresponding cluster monomials @xmath1491 .",
    "we have the exactly analogous description for the open subset @xmath1492 .",
    "next observe that all but one of the functions attached to walls in @xmath378 is trivial modulo the ideal @xmath1493 . indeed , the unique non - trivial wall is @xmath1494 .",
    "it follows from theorem [ kslemma2 ] that modulo @xmath1495 the scattering diagram @xmath378 has only finitely many non - trivial walls , and @xmath942 is regular on @xmath1472 , for @xmath827 a basepoint in the distinguished chamber @xmath693 , so long as @xmath1496 , @xmath1287 the projection .",
    "let @xmath1497 , @xmath1498 .",
    "noting @xmath1499 , we can set @xmath1500 observe @xmath1501 is the subscheme of @xmath1 defined by the ideal @xmath1495 in the open subset @xmath1502 .",
    "note that the open subset of @xmath1 defined by @xmath1503 is the union of the two tori @xmath1448 .",
    "[ basislem ] the following hold :    1 .",
    "the collection @xmath942 , @xmath1504 , @xmath1505 forms a @xmath8-basis of the vector space @xmath1506 .",
    "2 .   the collection @xmath1507 , @xmath1508 , forms a basis of @xmath1506 as an @xmath1509-module .",
    "3 .   the collection @xmath942 , @xmath1510 , forms a @xmath8-basis of @xmath1511 .",
    "\\(2 ) implies ( 1 ) using the @xmath240-linearity of the scattering diagram and multiplication rule with respect to the @xmath240-translation .",
    "similarly , ( 2 ) implies ( 3 ) by inverting @xmath777 .    for the second claim , by lemma 2.30 of @xcite , we need only prove the statement for @xmath1512 . to prove linear independence it is enough to show linear independence modulo @xmath1513 for all @xmath51 . for this ,",
    "again by lemma 2.30 of @xcite , it is enough to check just over the fibre @xmath1514 .",
    "this is the torus @xmath1076 and the theta functions restrict to the basis of characters .",
    "so it remains only to show the given theta functions generate modulo @xmath269 .",
    "here we use the explicit description of the open subset of @xmath1 where @xmath1486 above .",
    "this is an affine variety , and the ring of functions is clearly generated by the @xmath1515 as a @xmath1516$]-algebra . on the other hand , by the explicit description of @xmath378",
    "modulo the ideal @xmath269 , for @xmath1517 , @xmath1518 this shows theta functions generate @xmath1519 as an @xmath1520-module , hence the result .",
    "of course there is an analogous claim for @xmath609 .",
    "now we can prove @xmath1521 for @xmath1522 .    by the @xmath240-translation action on @xmath1424 ( and the corresponding @xmath240-linearity of the scattering diagrams ) , to prove the equality , we are free to multiply @xmath41 by a monomial from the base of @xmath1523 . multiplying by a monomial in the @xmath1115 , @xmath1524 , we can then assume @xmath41 is a regular function on the open subset of @xmath1 where @xmath1525 .",
    "now in the notation of definition [ defs ] , @xmath1526 for @xmath1527 or @xmath1528 .",
    "it follows now from the fact that @xmath378 is finite modulo @xmath1495 for any @xmath460 that each @xmath1529 for @xmath1530 is a finite laurent polynomial modulo @xmath1495 . here",
    "@xmath1531 are basepoints in the chambers indexed by @xmath10 and @xmath609 respectively .",
    "[ claimtwo ] modulo @xmath1495 , the sums @xmath1532 , @xmath1533 are finite , and coincide with @xmath41 in the charts indexed by @xmath10 and @xmath609 respectively .",
    "by symmetry it s enough to treat @xmath10 .",
    "we can multiply both sides by a power of @xmath777 , and so may assume @xmath41 is regular on @xmath1486 , and @xmath1534 for each @xmath1535 .",
    "note @xmath1536 , thus by construction modulo @xmath1537 for any @xmath51 the sum @xmath1538 is finite and equal to @xmath41 . by claim [ basislem ] ,",
    "( 1 ) , we have a ( finite ) expression modulo @xmath1495 @xmath1539 thus , for fixed @xmath460 and arbitrary @xmath1540 we have modulo @xmath1541 , @xmath1542 by the linear independence these expressions are the same , for all @xmath51 , thus the expressions are the same modulo @xmath1495 .",
    "note that by theorem [ blinvth ] , for @xmath1543 , @xmath942 and @xmath1544 induce the same regular function @xmath1545 on @xmath1501 .",
    "thus we have by claim [ claimtwo ] that @xmath1546 now by ( 3 ) of claim [ basislem ] ( varying @xmath460 ) the coefficients in the sums are the same .",
    "the theorem implies that the theta functions are a topological basis for a natural topological @xmath8-algebra completion of @xmath139 :    for @xmath1547 , let @xmath1548 denote precomposition by the action of translation by @xmath510 on @xmath1424 .",
    "let @xmath1549 be the vector subspace of functions , @xmath34 , such that for each seed @xmath10 , there exists @xmath1547 for which the restriction of @xmath1550 to @xmath1551 has finite support for all @xmath1552 .",
    "then we have @xmath1553 } { \\bbbk}[n ] \\subset { \\operatorname{hom}}_{\\operatorname{sets}}({{\\mathcal a}^{{\\vee}}_{{\\operatorname{prin}}}(\\bz^t)},{\\bbbk}).\\ ] ] @xmath1554 is a complete topological vector space under the weakest topology so that each inclusion @xmath1555 } { \\bbbk}[n]$ ] is continuous .",
    "let @xmath1556 be the delta function associated to @xmath1557 .",
    "the @xmath46 are a topological basis for @xmath1554 .",
    "there is a unique topological @xmath8-algebra structure on @xmath1554 such that @xmath1558 with structure constants given by definition [ structuredef ] .",
    "in this section , we prove one of the main theorems of the paper , theorem [ mainth ] .",
    "this is done in two steps .",
    "first , it follows from the results of the previous section and properties of theta functions in the @xmath56 case .",
    "this is easiest since the scattering diagram technology works best for @xmath56 .",
    "second , we descend to the @xmath19 or @xmath78 case and the @xmath27 case , with the @xmath19-type varieties appearing as fibres of @xmath1559 and the @xmath27 variety as a quotient of @xmath56 by @xmath1076 , using the @xmath56 case to deduce the result for these other cases .",
    "recall from definition [ fgchamberdef ] that @xmath792 is the collection of chambers forming the cluster complex .",
    "abstractly , by lemma [ fgcclem ] , this can be viewed as giving a collection of chambers @xmath118 in @xmath1560 .",
    "[ posprop ] choose @xmath1561 .",
    "if for some generic basepoint @xmath1562 there are only finitely many broken lines @xmath341 with @xmath1563 and @xmath1564 , then the same is true for any generic @xmath1565 .",
    "in particular , @xmath1566 $ ] is a positive universal laurent polynomial .    by positivity of the scattering diagram , theorem [ scatdiagpositive ] , for any basepoint @xmath827",
    ", @xmath851 has only non - negative coefficients ( though it may have infinitely many terms ) . also , we know that for basepoints in different chambers , the @xmath851 are related by wall - crossings by theorem [ blinvth ] , which in turn are identified with the mutations of tori in the atlas for @xmath56 .",
    "so the @xmath851 determine a universal positive laurent polynomial if and only if we have finiteness of broken lines ending at any @xmath827 in any chamber of @xmath792 .",
    "if we vary @xmath827 in the chamber , @xmath851 does not change .",
    "so it s enough to check that if @xmath851 is a polynomial , the same is true of @xmath1567 for @xmath870 in an adjacent chamber @xmath953 to @xmath946 close to the wall @xmath1568 .",
    "we can work in some seed .",
    "let the wall be contained in @xmath357 , @xmath1569 , with @xmath1570 , and denote the wall - crossing automorphism from @xmath827 to @xmath870 as @xmath994 . recall that @xmath1571 , where for walls between cluster chambers , @xmath34 is some positive laurent polynomial ( in fact it has the form @xmath1572 for some @xmath1573 ) .",
    "monomials @xmath1574 are then divided into three groups , according to the sign of @xmath1575 .",
    "this sign is preserved by @xmath994 , as @xmath450 takes the same value on each exponent of a monomial term in @xmath1576 as @xmath450 takes on @xmath860 .",
    "monomials with @xmath1577 are then invariant under @xmath994 , so these terms in @xmath1567 coincide with those in @xmath851 .",
    "hence there are only a finite number of such terms in @xmath1567 .",
    "the sum of terms of the form @xmath1578 in @xmath851 with @xmath1579 , which we know form a laurent polynomial , is , by the explicit formula for @xmath994 , sent to a polynomial .",
    "so it only remains to show that there are only finitely many terms @xmath1578 in @xmath1567 with @xmath1580 .",
    "suppose the contrary is true .",
    "the direction vector of each broken line contributing to such terms at @xmath870 is towards the wall @xmath1568 , and so we can extend the final segment of any such broken line to obtain a broken line terminating at some point @xmath1581 ( depending on @xmath860 ) in the same chamber as @xmath827 . as there are no cancellations because of the positivity of all coefficients and @xmath851 does not depend on the location of @xmath827 inside the chamber by theorem [ blinvth ] , we see that @xmath851 has an infinite number of terms , a contradiction .",
    "[ thetadef ] let @xmath1582 be the collection of @xmath826 such that for some ( or equivalently , by proposition [ posprop ] , any ) generic @xmath1583 there are only finitely many broken lines @xmath341 with @xmath1563 , @xmath1564 .    [ icdef ]",
    "we call a subset @xmath1584 _ intrinsically closed under addition _ if @xmath1585 and @xmath1586 implies @xmath1587 .",
    "[ iclemma ] let @xmath1588 be intrinsically closed under addition .",
    "the image of @xmath1589 in @xmath1590 ( under the identification @xmath1591 induced by the seed @xmath10 ) is closed under addition for any seed @xmath10 . if for some seed @xmath1592 is a toric monoid ( i.e. , the integral points of a convex rational polyhedral cone ) , then this holds for any seed .",
    "choose a seed @xmath10 .",
    "then straight lines in definition - lemma [ structuredef ] show @xmath1593 .",
    "this gives closure under addition .",
    "now suppose @xmath1592 is a toric monoid , generating the convex rational polyhedral cone @xmath1594 .",
    "then @xmath1595 is a rational polyhedral cone with integral points @xmath1596 . as this set of integral points",
    "is closed under addition , @xmath1597 is convex , and so its integral points are a toric monoid .",
    "recall from the introduction the definition of global monomial ( definition [ globalmonomialdef ] ) .",
    "[ goodalgebra ] let @xmath1598 be the set of integral points in chambers of the cluster complex",
    ". then    1 .",
    "2 .   for @xmath1600 @xmath1601 is a finite sum ( i.e. , @xmath1602 for all but finitely many @xmath51 ) with non - negative integer coefficients . if @xmath1603 , then @xmath1604 .",
    "the set @xmath61 is intrinsically closed under addition . for any seed @xmath10 , the image of @xmath1605 is a saturated monoid .",
    "the structure constants @xmath1606 of definition [ structuredef ] make the @xmath8-vector space with basis indexed by @xmath61 , @xmath1607 into an associative commutative @xmath1423$]-algebra",
    ". there are canonical inclusions of @xmath1423$]-algebras @xmath1608 } { \\bbbk}[n].\\end{aligned}\\ ] ] under the first inclusion a cluster monomial @xmath1609 is identified with @xmath1610 for @xmath1611 its @xmath41-vector . under the second inclusion",
    "each @xmath46 is identified with a universal positive laurent polynomial .",
    "\\(1 ) is immediate from corollary [ monocor ] . for ( 2 ) ,",
    "first note that the coefficients @xmath1612 are non - negative by definition - lemma [ structuredef ] .",
    "suppose @xmath1600 .",
    "take a generic basepoint @xmath827 in some cluster chamber .",
    "then @xmath1613 is the product of two laurent polynomials , thus a laurent polynomial .",
    "it is equal to @xmath1614 by ( 3 ) of proposition [ thetabasislemma ] , and hence this sum must be finite , as it involves a positive linear combination of series with positive coefficients .",
    "further , each @xmath1615 appearing with @xmath1616 must be a laurent polynomial for the same reason .",
    "thus @xmath1604 by definition [ thetadef ] . ( 2 ) then immediately implies @xmath61 is intrinsically closed under addition .    for ( 4 ) ,",
    "note each @xmath1617 , @xmath1618 is a universal positive laurent polynomial by proposition [ posprop ] . for @xmath1619",
    ", @xmath1620 is the corresponding cluster monomial by ( 4 ) of theorem [ ffgth ] .",
    "the inclusions of algebras , and the associativity of the multiplication on @xmath86 follow from proposition [ thetabasislemma ] .",
    "finally we complete the proof of ( 3 ) by checking that @xmath61 is saturated .",
    "assume @xmath1621 for some integer @xmath1622 .",
    "take @xmath827 to be a generic basepoint in some cluster chamber .",
    "we show that the set of final monomials @xmath1623 for broken lines @xmath341 with @xmath1624 , @xmath1564 is finite . by assumption",
    "( and the positivity of the scattering diagram ) , this holds with @xmath908 replaced by @xmath1625 .",
    "so it is enough to show @xmath1626 implies @xmath1627 .",
    "indeed , it is easy to see that for every broken line @xmath341 for @xmath908 ending at @xmath827 , there is a broken line @xmath918 for @xmath1625 with the same underlying path , such that for every domain of linearity @xmath11 of @xmath341 , the exponents @xmath1628 and @xmath1629 of the monomial decorations of @xmath11 for @xmath341 and @xmath918 respectively satisfy @xmath1630 .",
    "this completes the proof of ( 3 ) , hence the theorem .",
    "the above theorem immediately implies :    theorem [ mainth ] is true for @xmath1631 .",
    "the following shows our theta functions are well - behaved with respect to the canonical torus action on @xmath56 .",
    "[ thetaeigenfunctions ] let @xmath1632 .",
    "then @xmath1633 is an eigenfunction for the natural @xmath1634 action on @xmath56 ( see proposition [ ldpprop ] , ( 2 ) ) , with weight @xmath1635 given by the canonical map @xmath1636 ( the map being dual to the inclusion @xmath1637 ) . in particular @xmath46 is an eigenfunction for the subtorus @xmath1638 with weight @xmath1635 where @xmath1639 is given by @xmath1640 .    pick a seed @xmath10 , giving an identification @xmath1641 with @xmath1150 .",
    "pick also a general basepoint @xmath1037 .",
    "we need to show that for any broken line @xmath341 in @xmath1642 for @xmath908 with endpoint @xmath827 , @xmath1643 is a semi - invariant for the @xmath1634 action with weight @xmath1635 .",
    "the @xmath1634 action on the seed torus @xmath1644 is given on cocharacters by the natural inclusion @xmath1637 . by definition of @xmath1645",
    "we have @xmath1646 , @xmath76 , so every monomial appearing in any function @xmath383 for @xmath1647 is in the kernel of @xmath153 .",
    "the result for @xmath1634 follows .",
    "the statement for @xmath1076 now follows from the definitions .    with more work",
    ", we will define the middle cluster algebra for @xmath1648 or @xmath27 .",
    "we now show how the various structures we have used to understand @xmath1170 induce similar structures for @xmath78 and @xmath27 .",
    "by @xcite ,  3 , each seed @xmath10 ( in the @xmath27 , @xmath19 and @xmath56 cases ) gives a _ toric model _ for @xmath15 .",
    "the seed specifies the data of a fan @xmath1649 , consisting only of rays ( so the boundary @xmath1650 of the associated toric variety is a disjoint union of tori ) .",
    "the seed also then specifies a blowup @xmath1651 with codimension two center , the disjoint union of divisors @xmath1652 in each of the disjoint irreducible components @xmath1653 .",
    "if @xmath1654 is the proper transform of @xmath1655 , then there is a birational map @xmath1656 .",
    "this map is an isomorphism outside of codimension two between @xmath1657 and the upper bound ( see @xcite , remark 3.13 , @xcite , def .",
    "1.1 ) @xmath1658 , which we recall is the union of @xmath6 with @xmath1659 for the _ adjacent seeds _ , @xmath1660 . in the case @xmath1661 or @xmath78 for very general @xmath188 ,",
    "the inclusion @xmath1658 is an isomorphism outside codimension two .",
    "we have @xmath1662    from these toric models it is easy to determine the global monomials :    [ gmlemma ] notation as immediately above . for @xmath1663 , the character @xmath36 on the torus",
    "@xmath1664 is a global monomial if and only if @xmath36 is regular on the toric variety @xmath1665 , which holds if and only if @xmath1666 for the primitive generator @xmath510 of each ray in the fan @xmath1649 . for @xmath19-type cluster varieties",
    "a global monomial is the same as a cluster monomial , i.e. , a monomial in the variables of a single cluster , where the non - frozen variables have non - negative exponent .",
    "we have a surjection @xmath1667 by construction of @xmath0 , and thus a monomial @xmath36 is regular on @xmath1665 if and only if its pull - back to @xmath0 is regular . certainly such a function is also regular on @xmath1668 .",
    "conversely , suppose @xmath36 is not regular on @xmath1665 .",
    "then it has a pole on some toric boundary divisor @xmath1669 .",
    "now the support of @xmath1670 is given by @xmath1671 ( resp .",
    "@xmath1672 ) in the @xmath19 ( resp .",
    "@xmath27 ) case , as explained in @xcite ,  3.2 . in particular for @xmath1673 , @xmath1674 is non - empty , in the @xmath19 case because of the assumption that @xmath1675 for @xmath263 stated in appendix [ ldsec ] .",
    "as @xmath36 has no zeros on the big torus , the divisor of zeros of @xmath36 will not contain the center @xmath1670 .",
    "it follows that @xmath36 has a pole along the exceptional divisor @xmath1676 over @xmath1674 . since @xmath1677",
    ", @xmath36 is not regular on @xmath1657 .",
    "thus we conclude that @xmath36 is regular on @xmath1678 if and only if @xmath36 is regular on @xmath1665 . of course , @xmath36 is regular on @xmath1665 if and only if @xmath1679 for all primitive generators @xmath510 of rays of @xmath1649 .",
    "now the rational map @xmath1680 to the upper bound is an isomorphism outside codimension two , so the two varieties have the same global functions . in the @xmath27 ( or @xmath56 ) case ,",
    "the inclusion @xmath1658 is an isomorphism outside codimension two as well .",
    "this gives the theorem for @xmath27 or @xmath56 , and the forward direction for @xmath78 .",
    "the reverse direction for @xmath78 follows from the laurent phenomenon .",
    "indeed , the final statement of the lemma simply describes the monomials regular on @xmath1681 , and a monomial of the given form is the same as a cluster monomial and these are global regular functions by the laurent phenomenon .",
    "recall from proposition [ ldpprop ] , ( 4 ) , the canonical maps @xmath1682 and @xmath1683 whose tropicalizations are @xmath1684 note @xmath808 identifies @xmath112 with the quotient of @xmath1685 by the natural @xmath240-action . since @xmath1686 identifies @xmath1687 with the fibre over @xmath1688 of @xmath1689 , @xmath1690 identifies @xmath1691 with @xmath1692 , where @xmath1693 is the weight map given by @xmath1694 .",
    "[ fgccthg1 ] let @xmath5 be a cluster variety .",
    "define @xmath1695 to be the set of @xmath41-vectors ( see definition [ fgccthg0 ] ) for global monomials which are characters on the seed torus @xmath1664 , and @xmath1696 to be the union of all @xmath1697 .",
    "[ fgccthg2 ]    1 .",
    "for @xmath15 of @xmath19-type @xmath1697 is the set of integral points of the cone @xmath1698 in the fock - goncharov cluster complex corresponding to the seed @xmath10 .",
    "2 .   in any case",
    "@xmath1699 is the set of integral points of a rational convex cone @xmath693 , and the relative interiors of @xmath693 as @xmath10 varies are disjoint .",
    "the @xmath41-vector @xmath1700 depends only on the function @xmath34 ( i.e. , if @xmath34 restricts to a character on two different seed tori , the @xmath41-vectors they determine are the same ) .",
    "3 .   for @xmath1701 ,",
    "the global monomial @xmath1545 on @xmath56 is invariant under the @xmath1076 action and thus gives a global function on @xmath1702 .",
    "this is a global monomial and all global monomials on @xmath27 occur this way , and @xmath1703 .",
    "\\(1 ) in the @xmath19 case , @xmath693 is the fock - goncharov cone by lemma [ fgcclem ] and lemma [ gmlemma ] .",
    "these cones form a fan by theorem [ fgccth ] , and the fan statement implies that @xmath1704 depends only on @xmath34 .",
    "the @xmath19 case of ( 2 ) immediately follows also from the discussion in  [ cgvectorsec ] .",
    "the @xmath27 case follows from the @xmath19-case ( applied to @xmath56 ) by recalling that there is a map @xmath1705 making @xmath56 into @xmath1076-torsor over @xmath27 , see proposition [ ldpprop ] , ( 2 ) .",
    "this map is defined on monomials by @xmath1706 . pulling back a monomial for @xmath27 under @xmath1707",
    "gives a @xmath1076-invariant global monomial for @xmath56 .",
    "thus there is an inclusion @xmath1708 by proposition [ thetaeigenfunctions ] .",
    "conversely , if @xmath1709 and @xmath1710 for a global monomial @xmath34 on @xmath1170 , then there is some seed @xmath787 where @xmath34 is represented by a monomial @xmath36 on @xmath1384 . because @xmath1387 lies in @xmath1692",
    "it is of the form @xmath1711 for some @xmath1547 . by lemma [ gmlemma ] ,",
    "@xmath860 is non - negative on the rays @xmath1712 of @xmath1713 , hence @xmath510 is non - negative on the rays @xmath1714 of @xmath1715 .",
    "hence @xmath1283 defines a global monomial on @xmath987 .",
    "thus @xmath1716 .",
    "furthermore , one then sees that the fock - goncharov cones for @xmath56 yield the cones for @xmath27 by intersecting with @xmath1692 .",
    "this gives the remaining statements of ( 2 ) in the @xmath27 case , as well as ( 3 ) .",
    "[ blxa ] _ the @xmath27 case . _ note that every function @xmath383 attached to a wall in @xmath801 is a power series in @xmath1717 for some @xmath510 , thus @xmath153 is zero on all exponents appearing in these functions .",
    "thus broken lines with both @xmath1718 and initial infinite segment lying in @xmath1692 remain in @xmath1692 .",
    "in particular @xmath1719 , and all their monomial decorations , e.g. , @xmath858 , are in @xmath1692 .",
    "we define these to be the broken lines in @xmath1720 .",
    "induces a collection of walls with attached functions , @xmath1721 , living in @xmath1722 , just by intersecting each wall with @xmath1692 and taking the same scattering function .",
    "this is a consistent scattering diagram , and we are getting exactly the broken lines for this diagram .",
    "we will not use this diagram , as we can get whatever we need from @xmath1723 . ]    _ the @xmath19 case .",
    "_ we define broken lines in @xmath781 to be images of broken lines in @xmath1560 under @xmath808 ( applying the derivative @xmath1724 to the decorating monomials ) .",
    "we define    1 .",
    "@xmath1726 where the superscript denotes the invariant part under the group action .",
    "[ xcorollary ] theorem [ mainth ] holds for @xmath1727 .",
    "this follows immediately from the @xmath1170 case by taking @xmath1076-invariants .    moving on to the @xmath19 case , the following",
    "is easily checked :    [ thacasedef ]    1 .",
    "define @xmath1728 noting that @xmath1729 is invariant under @xmath240-translation , we have @xmath1730 .",
    "furthermore , any choice of section @xmath1731 of @xmath808 induces a bijection @xmath1732 .",
    "2 .   define @xmath1733 } { \\bbbk}$ ] , where @xmath1423 \\twoheadrightarrow { \\bbbk}$ ] is given by @xmath1734 .",
    "given a choice of @xmath1302 , the collection @xmath1735 gives a @xmath1423$]-module basis for @xmath137 and thus a @xmath8-vector space basis for @xmath79 .",
    "for @xmath1736 the basis is independent of the choice of @xmath1302 , while for @xmath79 it is independent up to scaling each basis vector ( i.e. , the decomposition of the vector space @xmath1736 into one dimensional subspaces is canonical ) .",
    "the variety @xmath78 is a space @xmath1737 with the tori glued by birational maps which vary with @xmath188 .",
    "it is then not so clear how to dualize these birational maps to obtain @xmath1738 as it is not obvious how to deal with these parameters .",
    "however , the tropicalisations of these birational maps are all the same ( independent of @xmath188 ) and thus the tropical sets @xmath1739 should all be canonically identified with @xmath1740 .",
    "so we just take :    @xmath1741 .",
    "[ mainthax ] for @xmath1742 the following modified statements of theorem [ mainth ] hold .    1 .",
    "there is a map @xmath1743 depending on a choice of a section @xmath1744 .",
    "this function is given by the formula @xmath1745 if this sum is finite ; otherwise we take @xmath1746 .",
    "this sum is finite whenever @xmath1747 .",
    "2 .   there is a canonically defined subset @xmath57 given by @xmath1748 such that the restriction of the structure constants give the vector subspace @xmath60 with basis indexed by @xmath61 the structure of an associative commutative @xmath8-algebra .",
    "3 .   @xmath1749 , i.e. , @xmath61 contains the @xmath41-vector of each global monomial .",
    "4 .   for the lattice structure on @xmath44 determined by any choice of seed , @xmath57",
    "is closed under addition .",
    "furthermore @xmath61 is saturated .",
    "there is a @xmath8-algebra map @xmath67 which sends @xmath121 for @xmath1750 to a multiple of the corresponding global monomial .",
    "there is no analogue of ( 6 ) of theorem [ mainth ] because the coefficients of the @xmath1617 will generally not be integers .",
    "@xmath70 is injective for very general @xmath188 , and for all @xmath188 if the vectors @xmath595 , @xmath76 , lie in a strictly convex cone .",
    "when @xmath70 is injective we have canonical inclusions @xmath77    taking @xmath1751 gives theorem [ mainth ] for the @xmath73 case .    for ( 1 ) , note that for @xmath1752 , we have @xmath1753 and on @xmath56 @xmath1754 using @xmath1755 .",
    "note that the sums are finite because @xmath1756 .",
    "restricting to @xmath78 gives the formula of ( 1 ) .",
    "the remaining statements follow easily from the definitions except for the injectivity of ( 7 ) . to see this , fix a seed @xmath10 , which gives the second projection @xmath1757 .",
    "choose the section @xmath1302 of @xmath808 to be @xmath1758 .",
    "note the collection of @xmath121 , @xmath1759 are a @xmath1423$]-basis for @xmath137 . by the choice of @xmath1302 , the @xmath121",
    "restrict to the basis of monomials on the central fibre @xmath22 of @xmath1760 .",
    "it follows that for any finite subset @xmath1761 there is a zariski open set @xmath1762 such that @xmath121 , @xmath1763 restrict to linearly independent elements of @xmath1764 , @xmath1765 .",
    "this gives the injectivity of @xmath70 for very general @xmath188 .",
    "now suppose the @xmath1766 , @xmath76 span a strictly convex cone .",
    "we can then pick an @xmath1767 such that @xmath1768 for all @xmath210 . now pick @xmath1769 such that @xmath1770 for @xmath1771 , and set @xmath1772 , notation as in ( 2 ) of proposition [ ldpprop ] . by construction the second projection @xmath1773 lies in the interior of the orthant generated by the dual basis @xmath1108 .",
    "take the one - parameter subgroup @xmath1774 .",
    "now , by proposition [ ldpprop ] , the map @xmath1775 is @xmath1634-equivariant , where the action on @xmath1136 is given by the map of cocharacters @xmath1776 .",
    "thus @xmath582 has a one - dimensional orbit whose closure contains @xmath1777 .",
    "so @xmath81 is in the closure of the orbit @xmath1778 for all @xmath1779 . in particular for all @xmath367 and all @xmath1589",
    "there is some @xmath1780 with @xmath1781 .",
    "now from the @xmath1782-equivariance of the construction , proposition [ thetaeigenfunctions ] , the linear independence holds for all @xmath188 .",
    "changing @xmath1302 will change the @xmath1423$]-basis for @xmath137 , multiplying each @xmath121 by some character @xmath1283 , @xmath1381 .",
    "the restrictions to @xmath79 are then multiplied by the values @xmath1783 .",
    "theorem [ mainth ] for @xmath73 now follows from setting @xmath1751 , where @xmath1784 for all @xmath510 .",
    "it is natural to wonder :    does the equality @xmath1785 always hold ?",
    "our guess is no , but we do not know a counterexample .",
    "certainly @xmath1786 in general , for this implies @xmath1787 , which is defined to be @xmath1788 , coincides with @xmath1789 , while we know that in general @xmath27 has many fewer global functions , see @xcite ,  7 .",
    "so we look for conditions that guarantee @xmath1790 , and @xmath1791 .",
    "we turn to this in the next section .",
    "[ examples2 ] in the cases of example [ bcexample ] , the convex hull of the union of the cones of @xmath118 in @xmath1792 is all of @xmath1792 .",
    "indeed , the first three quadrants already are part of the cluster complex .",
    "it then follows from the fact that @xmath61 is closed under addition and is saturated that @xmath1793 .    in the case of example",
    "[ standardexample ] , we know that @xmath1794 it then follows again from the fact that @xmath61 is closed under addition that either @xmath1795 or @xmath1793 .",
    "we believe , partly based on calculations in @xcite ,  7.1 , that in fact the latter holds .",
    "we show the analogue of proposition [ thetaeigenfunctions ] for the @xmath19 variety :    [ thetaeigenfunctions2 ] if @xmath1796 , then @xmath1797 is an eigenfunction for the natural @xmath1798 action on @xmath19 .",
    "this is essentially the same as the proof of proposition [ thetaeigenfunctions ] , noting that the monomials @xmath1799 are invariant under the @xmath1798 action , as @xmath1800 by definition of @xmath1801 .",
    "we end this section by showing that linear independence of cluster monomials follows easily from our techniques .",
    "this was pointed out to us by gregory muller . in the skew - symmetric case ,",
    "this was proved in @xcite .",
    "[ properlaurentproperty ] for any @xmath19 cluster variety , there are no linear relations between cluster monomials and theta functions in @xmath1802 . more precisely , if there is a linear relation @xmath1803 in @xmath33 , then @xmath1804 for all @xmath1805 .",
    "in particular the cluster monomials in @xmath1806 are linearly independent .",
    "suppose given such a relation .",
    "we choose a seed @xmath10 and a generic base point @xmath1807 .",
    "the seed gives an identification @xmath1808 .",
    "we first show that if @xmath1805 with @xmath1809 , then @xmath1810 satisfies the _ proper laurent property _ , i.e. , every monomial @xmath1811 appearing in @xmath1810 has @xmath1812 for some @xmath210 .",
    "indeed , fix a section @xmath1813 as in definition - lemma [ thacasedef ] . as restriction to @xmath1814",
    "gives a bijection between the cluster variables for @xmath56 and the cluster variables for @xmath19 , between the theta functions @xmath1360 , @xmath1815 and the theta functions for @xmath19 , and between the corresponding local expressions @xmath1810 , it is enough to prove the claim in the @xmath56 case .",
    "this follows immediately from the definition of broken line .",
    "indeed , if @xmath341 is a broken line ending at @xmath827 and @xmath1816 with @xmath1817 for all @xmath210 , then @xmath341 must be wholly contained in @xmath693 .",
    "but the unbounded direction of @xmath341 is parallel to @xmath1818 , so it follows that @xmath1819 .",
    "we then have the relation @xmath1820\\ ] ] which we rearrange as @xmath1821 the collection of @xmath1810 for @xmath1822 are exactly the distinct cluster monomials for the seed @xmath10 .",
    "in particular all of their exponents are non - negative .",
    "thus both sides of the equation are zero .",
    "since the cluster monomials for @xmath10 are linearly independent , we conclude @xmath1823 for all @xmath1824 .",
    "varying @xmath10 the result follows .",
    "as explained in the introduction , the fock - goncharov conjecure is in general false , as a cluster variety @xmath15 has in general too few functions .",
    "the conjectured theta functions only exist formally , near infinity , in the sense of  [ formalfgcsec ] .",
    "the failure of convergence in general manifests itself in the existence of infinitely many broken lines with a given incoming direction , and fixed basepoint , and non - finiteness of the multiplication rule ( for fixed @xmath49 infinitely many @xmath51 with @xmath1586 ) .",
    "the remainder of the paper is devoted to the question of finding conditions on cluster varieties which guarantee the conjecture holds as stated .",
    "one can only expect a theta function basis for @xmath29 in cases when @xmath15 has enough functions ; more precisely , when @xmath29 is finitely generated , and the natural map @xmath1825 is an open immersion  note the second condition is automatic by the laurent phenomenon when @xmath15 is @xmath19-type .",
    "our main ( and simple ) idea is that we can replace the assumption of enough functions by the existence of a bounded _",
    "polytope in @xmath1826 , cut out by the tropicalisation of a regular function .",
    "however , our notion of convexity is delicate , as @xmath149 a priori only has a piecewise linear structure .",
    "the correct notion is explained in  [ convexityconditionssection ] .",
    "polytopes will play several roles .",
    "the existence of bounded convex polytopes implies various results on convergence of theta functions .",
    "we get finiteness of the multiplication rule , and so an algebra structure on @xmath43 , see proposition [ fmprop ] . for technical reasons ,",
    "see remark [ mandelremark ] , we often have to replace enough global functions by enough global monomials ( egm ) , and can make optimal use only of convex polytopes cut out by the tropicalisations of global monomials .",
    "egm implies @xmath1827 , see proposition [ cafin ] , and proposition [ markscor ] .",
    "convex polytopes give partial ( full in the bounded polytope case ) compactifications of @xmath189 , by copying the familiar toric construction , see  [ candsec ] .",
    "these compactifications then degenerate to toric compactifications under ( the analog ) of the canonical degeneration @xmath1828 of @xmath19 to @xmath129 .",
    "we use these degenerations to prove @xmath189 is log cy , see theorem [ cfcor ] .",
    "convex cones in @xmath1826 are intimately related with partial minimal models @xmath80 , and potential functions , see  [ fullfgsection ] , and corollary [ spcor ] .",
    "finally our methods give several sufficient conditions to guarantee the full fock - goncharov conjecture , see proposition [ egmscprop ] and corollary [ ffgcor ] .",
    "these statements are weaker , and more technical , than one would hope  the reason is our inability to prove in full generality that egm ( or better , the existence of a bounded convex polytope ) implies @xmath1829 .",
    "we have only optimal control over the subset @xmath1830 ( the cluster complex ) , and the technical statements are various ways of saying @xmath118 is sufficiently big .",
    "the first issue is to make sense of the notion of convexity in @xmath146 .",
    "the following is elementary :    [ mcdef ] by a piecewise linear function on a real vector space @xmath223 we mean a continuous function @xmath1831 piecewise linear with respect to a finite fan of ( not necessarily strictly ) convex cones . for a piecewise linear function @xmath1832",
    "we say @xmath34 is _ min - convex _ if it satisfies one of the following three equivalent conditions :    1 .   there are finitely many linear functions @xmath1833 such that @xmath1834 for all @xmath1835 .",
    "@xmath1836 for all @xmath1837 and @xmath1838 .",
    "the differential @xmath1839 is decreasing on straight lines .",
    "in other words , for a directed straight line @xmath11 with tangent vector @xmath697 , and @xmath1840 general , then @xmath1841 where @xmath1842 is general and the subscript denotes the point at which the differential is calculated .    in the case that @xmath223 is defined over @xmath1843 , then in condition ( 3 ) we can restrict to lines of rational slope .",
    "we now define convexity for functions on @xmath149 for @xmath15 a cluster variety by generalizing the third condition above , using broken lines instead of straight lines :    [ imcdef ]    1 .   a _ piecewise linear function _",
    "@xmath1844 is a function which is piecewise linear after fixing a seed @xmath10 to get an identification @xmath1845 .",
    "if the function is piecewise linear for one seed it is clearly piecewise linear for all seeds . 2 .",
    "let @xmath1846 be piecewise linear , and fix a seed @xmath10 , to view @xmath1847 .",
    "we say @xmath34 is _ min - convex for @xmath15 _ ( or just _ min - convex _",
    "if @xmath15 is clear from context ) if for any broken line for @xmath15 in @xmath1848 , @xmath1839 is increasing on exponents of the decoration monomials ( and thus decreasing on their negatives , which are the velocity vectors of the underlying directed path ) .",
    "we note that this notion is independent of mutation , by the invariance of broken lines , proposition [ brlineinvmut ] , and thus an intrinsic property of a piecewise linear function on @xmath146 .",
    "we have a closely related notion , instead defined using the structure constants for multiplication of theta functions .    [ decdef ]",
    "we say that a piecewise linear @xmath1849 is _ decreasing _ if for @xmath1850 , with @xmath1603 , @xmath1851 . here",
    "@xmath1606 are the structure constants of theorem [ mainth ] .",
    "these two notions are not quite equivalent :    [ diplem1 ]    1",
    ".   if @xmath1844 is min - convex , then @xmath34 is decreasing .",
    "2 .   if @xmath1852 is decreasing , then for any seed @xmath10 , we have @xmath1853 min - convex in the sense of definition - lemma [ mcdef ] .",
    "\\(1 ) let @xmath667 , @xmath668 be broken lines .",
    "assume @xmath34 is min - convex and that @xmath1350 very close to @xmath51 is the endpoint of each broken line , with @xmath1854 .",
    "then @xmath1855 where @xmath1856 .",
    "thus @xmath34 is decreasing .",
    "\\(2 ) suppose @xmath34 is decreasing .",
    "for any @xmath1857 , and the linear structure on @xmath1858 determined by any choice of seed @xmath10 , the contribution of straight lines in definition - lemma [ structuredef ] ( and item ( 1 ) of theorem [ mainthax ] in the @xmath19 case ) shows @xmath1859 for all @xmath1860 .",
    "thus @xmath1861 for all positive integers @xmath1862 and @xmath403 . by rescaling ,",
    "the same is true for all positive rational numbers @xmath1862 and @xmath403 and @xmath1863 .",
    "min - convexity in the sense of definition [ mcdef ] then follows by continuity of @xmath34 .",
    "we have a closely related concept , capturing the generalization of the notion of a convex polytope . for @xmath1864 a closed subset ,",
    "define the _ cone _",
    "of @xmath180 @xmath1865 note the closure is only necessary if @xmath180 is not compact , in which case @xmath1866 is an asymptotic form of @xmath180 .",
    "denote @xmath1867 which we view as a subset of @xmath147 .",
    "note for @xmath1868 , @xmath1869 agrees with the obvious notion @xmath1870 .",
    "we will call a closed subset @xmath1871 _ positive _ if for any non - negative integers @xmath1872 , any @xmath1873 , @xmath1874 , and any @xmath1875 with @xmath1876 , we have @xmath1877 .    note that if @xmath180 is a cone , i.e. , invariant under rescaling , then this definition agrees with definition [ icdef ] .    for a piecewise linear function @xmath1878 ,",
    "let @xmath1879    by lemma [ diplem1 ] , if @xmath34 is min - convex in the sense of definition [ imcdef ] ( or more generally , decreasing in the sense of definition [ decdef ] ) , then under any identification @xmath1880 given by any seed , @xmath1881 is a convex polytope .",
    "[ sminlem ] if a piecewise linear function @xmath1844 is decreasing , then @xmath1882 is positive .",
    "furthemore , @xmath1882 is compact if and only if @xmath1844 is strictly negative away from @xmath81 .",
    "note that @xmath1883 . thus if @xmath34 is decreasing and @xmath1884 with @xmath1885 , then @xmath1886 and thus @xmath1887 , so @xmath1888 .",
    "the second statement is obvious .",
    "we collect here a couple of results comparing these convexity conditions on @xmath1889 and @xmath795 .",
    "recall from proposition [ ldpprop ] , ( 4 ) , the natural map @xmath1890 with @xmath1891 being the canonical projection @xmath1892 , the quotient by the @xmath240 translation action .",
    "[ mcxcase ] a piecewise linear function @xmath34 on @xmath237 is min - convex ( resp .  decreasing ) if and only if @xmath1893 on @xmath1894 is min - convex ( resp .  decreasing ) .",
    "broken lines in @xmath793 are by definition images of broken lines on @xmath1894 under @xmath808 , which gives the min - convex statement .",
    "the decreasing statement follows from the formula for the structure constants for @xmath111 of theorem [ mainthax ] , ( 1 ) .    to understand the relationship between positive polytopes in @xmath1895 and @xmath119",
    ", we need to understand how broken lines behave under the canonical @xmath240-translation on @xmath1895 :    [ eqslem ] for @xmath1896 general and @xmath1381 there are natural bijections between the following sets of broken lines @xmath1897 if @xmath1586 , then @xmath1898 and @xmath1899 .",
    "the implications for @xmath59 follow from the equality of the sets using definition - lemma [ structuredef ] . to get the bijections between the sets , we first recall that every wall of @xmath1723 is invariant under the canonical @xmath240-translation and is contained in a hyperplane @xmath807 for some @xmath1900 .",
    "thus @xmath240 acts on broken lines , by translation on the underlying path , keeping the monomial decorations the same .",
    "this gives the bijection between the second and third sets .",
    "for bijection between the first and second sets , we need to translate the decorations on each straight segment of @xmath341 by @xmath510 .",
    "this will change the slopes of each line segment . to do this precisely ,",
    "take @xmath341 in the first set , say with straight decorated segments @xmath1901 taken in reverse order , with @xmath1902 the infinite segment .",
    "suppose the monomial attached to @xmath1903 is @xmath1904 with @xmath1905 .",
    "say the bends are at points @xmath1906 along a wall contained the hyperplane @xmath1907 so that @xmath1903 is parameterized ( in the reverse direction to that of definition [ blde ] ) by @xmath1908 , @xmath1909 .",
    "then we define @xmath1910 observe that @xmath1911 .",
    "let @xmath1912 be the segment @xmath1913 , @xmath1914 , with attached monomial @xmath1915 .",
    "then @xmath1916 form the straight pieces of a broken line @xmath918 in the second set .",
    "this gives the desired bijection .",
    "[ rescalelem ] let @xmath1917 , @xmath460 a positive integer .",
    "if @xmath1918 , then @xmath1919 .    this follows immediately from definition - lemma [ structuredef ] and the argument given in the proof of saturatedness in theorem [ goodalgebra ] .",
    "this latter argument shows that if there is a broken line @xmath341 with @xmath1920 , @xmath1921 , then there is a broken line @xmath918 with @xmath1922 , @xmath1923 .",
    "[ tqprop ] suppose @xmath1924 is a positive polytope defined over @xmath1843 ( i.e. , all faces span rationally defined affine spaces )",
    ". then @xmath1925 is positive .",
    "suppose @xmath1926 , and @xmath1603 .",
    "we can always write @xmath1927 with @xmath1928 and @xmath1929 by the rationality assumption .",
    "let @xmath460 be a positive integer such that @xmath1930 and @xmath1931 are all integral for @xmath514 . then because @xmath1932 , @xmath1933 by lemma [ rescalelem ] , and thus @xmath1934 by lemma [ eqslem ] .",
    "as @xmath1935 , positivity of @xmath180 implies @xmath1936 and thus @xmath1937 .",
    "the chief difficulty now lies in constructing min - convex functions or positive polytopes .",
    "we turn to this next .",
    "the following would be a powerful tool for construction min - convex functions on cluster varieties :    [ dcon ] if @xmath1938 is a regular function on a log calabi - yau manifold @xmath15 with maximal boundary , then @xmath1939 is min - convex . here",
    "@xmath1940 for the valuation @xmath34 .",
    "[ mandelremark ] to make sense of the conjecture one needs a good theory of broken lines , currently constructed in @xcite in dimension two , and here for cluster varieties of all dimension . in dimension two ,",
    "the conjecture has been proven by travis mandel , @xcite .",
    "also , it is easy to see that in any case , for each seed @xmath10 and regular function @xmath34 , that @xmath1941 , see , is min - convex in the sense of definition [ mcdef ] .",
    "indeed this is the standard ( min ) tropicalisation of a laurent polynomial .",
    "we hope to eventually give a direct geometric description of broken lines ( without reference to a scattering diagram ) , for any log cy , as tropicalisations of some algebraic analog of holomorphic disks .",
    "we expect the conjecture to follow easily from such a description .    in fact",
    ", we can prove conjecture [ dcon ] for global monomials , which gives our main tool for constructing min - convex functions ( our inability to prove the conjecture in general is the main reason we use the condition egm rather than the more natural condition of enough global functions ) :    [ convcor ] for a global monomial @xmath34 on @xmath161 , the tropicalisation @xmath763 is min - convex , and in particular , by lemma [ diplem1 ] , decreasing .",
    "[ diplem ] let @xmath1942 be a piecewise linear function .    1 .",
    "if @xmath1631 or @xmath27 and for some choice of seed @xmath34 is the minimum of a collection of linear functionals @xmath1943 , each of which is non - negative on all the initial scattering monomials of @xmath812 ( resp .",
    ", for @xmath82 , the pullbacks @xmath1944 are non - negative on the initial scattering monomials of @xmath812 ) then @xmath34 is min - convex .",
    "2 .   for @xmath165 ,",
    "if @xmath34 is linear in a neighborhood of every wall of @xmath812 , then @xmath34 is min - convex if and only if each @xmath1943 is non - negative on each of the initial scattering monomials .",
    "[ evalrem ] recall from  [ blgcss ] that for any choice of seed , the scattering monomials in @xmath806 lie in @xmath1945 .",
    "so it makes sense to evaluate functions defined only on @xmath1946 on scattering monomials for @xmath1723 .",
    "choose a seed and suppose @xmath34 is the minimum of the @xmath1943 .",
    "we consider a broken line @xmath341 , with two consecutive monomial decorations @xmath1947 . possibly refining the linear segments",
    ", we can assume @xmath34 is given by @xmath1948 along the first segment , and @xmath1949 along the second .",
    "let @xmath1950 be points in the domain of @xmath341 in the two segments .",
    "then @xmath1951 the last inequality comes from the fact that @xmath1952 and @xmath860 lies on the side of the wall crossed by @xmath341 where @xmath1953 .",
    "now @xmath1954 is some positive multiple of the scattering monomial .",
    "this gives ( 1 ) .",
    "if @xmath34 is linear near any bend of the broken line , then @xmath1955 , the inequality is an equality , and the right- ( and left- ) hand side is just @xmath1956 , which gives the equivalence of ( 2 ) .    first consider the case @xmath165 .",
    "suppose @xmath34 is a global monomial which is a character on a chart indexed by @xmath10 .",
    "then by lemma [ gmlemma ] , this character is regular on @xmath1957 , i.e. , it is a character whose geometric tropicalisation has non - negative value on each ray in the fan @xmath1958 .",
    "these rays are spanned by @xmath1959 , @xmath76 , the negatives of the initial scattering monomials for @xmath812 .",
    "thus , because of the sign change between geometric and fock - goncharov tropicalisation , see , @xmath763 is non - negative on the initial scattering monomials .",
    "thus @xmath763 is min - convex by lemma [ diplem ] .",
    "the same argument then applies in the @xmath72 case , see remark [ evalrem ] . for the @xmath73 case",
    ", a global monomial on @xmath795 pulls back to a global monomial on @xmath186 via the map @xmath1960 , and then the result follows from the @xmath165 case by lemma [ mcxcase ] .",
    "we need a slight refinement of proposition [ convcor ] for the proof of finite generation of the canonical algebra in the next subsection .",
    "[ blblem ] let @xmath15 be a cluster variety and let @xmath123 be an integral point in the interior of a maximal dimensional cone @xmath1961 ( see definition [ fgccthg1 ] ) .",
    "then @xmath1962 evaluated on monomial decorations strictly increases at any non - trivial bend of a broken line in @xmath1963 .",
    "it is enough to treat the case @xmath1964 , because global monomials on @xmath27 or @xmath19 are given either by @xmath1076-invariant global monomials on @xmath56 or by restriction of global monomials on @xmath56 to @xmath19 respectively . furthermore , broken lines in @xmath1895 yield broken lines in @xmath1965 and @xmath119 .",
    "the integral points of the cluster cone @xmath1966 correspond to characters of @xmath1967 which extend to global regular functions on @xmath206 .",
    "just as in the proof of proposition [ convcor ] , these are the characters @xmath36 with @xmath860 non - negative on the rays spanned by @xmath1959 , @xmath76 , the negatives of the initial scattering monomials for @xmath812 .",
    "thus , because of the sign change between geometric and fock - goncharov tropicalisation , see , @xmath1968 in this case @xmath1962 is strictly increasing on monomial decorations as in the statement .",
    "we now introduce our key assumption necessary for proving strong results about theta functions and the algebras they generate .",
    "we say that @xmath161 has _ enough global monomials _",
    "if for any @xmath1969 , @xmath1970 , there is a global monomial @xmath1971 such that @xmath1972 .",
    "[ egmlem ] under any of the identifications @xmath1973 induced by a choice of seed , the set @xmath1974 is a closed convex subset of @xmath114 .",
    "the following are equivalent :    1 .",
    "@xmath161 has enough global monomials .",
    "@xmath1975 is bounded , or equivalently , the intersection of all sets @xmath1976 for @xmath1977 equals @xmath1978 .",
    "3 .   there exists a finite number of points @xmath1979 such that @xmath1980 is bounded , or equivalently , the intersection of all sets @xmath1981 for @xmath1982 equals @xmath1978 .",
    "4 .   there is function @xmath1983 whose associated polytope @xmath1984 is bounded .    by remark [ mandelremark ] , @xmath1975 is the intersection of closed rational convex polygons ( with respect to any seed ) , and hence is a closed convex set .",
    "the equivalence of ( 1 ) and ( 2 ) is immediate from the definitions , while ( 3 ) clearly implies ( 2 ) . for the converse ,",
    "let @xmath1589 be a sphere in @xmath1985 centered at the origin .",
    "for each @xmath1986 there is a global monomial @xmath1987 such that @xmath1988 , and thus there is an open subset @xmath1989 on which @xmath1990 is negative .",
    "the @xmath1991 form a cover of @xmath1589 , and hence by compactness there is a finite subcover @xmath1992 .",
    "taking @xmath1993 gives the desired collection of @xmath1994 .",
    "finally we show the equivalence of ( 3 ) and ( 4 ) .",
    "the @xmath121 , @xmath1995 are exactly the global monomials on @xmath161 , thus generators of @xmath1996 ) .",
    "now for any finite collection of functions @xmath1138 , @xmath1997 and for the @xmath1138 positive universal laurent polynomials , for example for global monomials , we have equality . thus given ( 3 ) , we take @xmath1998 .",
    "conversely , an element @xmath41 of @xmath1999 is a linear combination of some collection of @xmath2000 .",
    "then @xmath2001 is contained in @xmath2002 , so if the latter is bounded , so is the former .",
    "we note that the property of egm is preserved by fock - goncharov duality :    [ ldegmprop ] let @xmath239 be fixed data , and @xmath2003 the langlands dual data .",
    "we write e.g. @xmath2004 for the corresponding lattice for the data @xmath2003 as in appendix [ ldsec ] . for each seed",
    "@xmath10 , the canonical inclusion @xmath2005 commutes with the tropicalization of mutations , and induces an isomorphism @xmath2006 for @xmath2007 , the monomial @xmath1283 on @xmath2008 is a global monomial if and only if @xmath2009 on @xmath2010 is a global monomial . finally , @xmath1889 has egm if and only if @xmath56 has egm .",
    "the statement about tropical spaces is immediate from the definitions .",
    "( note that a similar statement does not hold at the level of tori , so there is no isomorphism between @xmath2011 and @xmath2012 . )",
    "the statement about global monomials is immediate from lemma [ gmlemma ] .",
    "now the final statement follows from the definition of egm , the isomorphism @xmath2013 of proposition [ ldpprop ] , ( 1 ) , and the equality @xmath2014 of proposition [ ldpprop ] , ( 3 ) .",
    "in we introduced @xmath43 as a @xmath8-vector space . in the presence of suitable convex objects on @xmath114",
    ", we can in fact put an algebra structure on @xmath43 using the structure constants given by @xmath59 .",
    "if further the egm condition holds , then @xmath43 contains @xmath29 , and is a finitely generated algebra .",
    "this often makes it easier to work with @xmath43 , as it is a more geometric object .    precisely :    [ fmprop ] for @xmath2015 or @xmath27 , suppose there is a compact positive polytope @xmath2016 .",
    "assume further that @xmath180 is top - dimensional , i.e. , @xmath2017 . then for @xmath2018 , there are at most finitely many @xmath51 with @xmath1586 .",
    "these give structure constants for an associative multiplication on @xmath2019 if there is a compact positive polytope @xmath2020 then the same conclusion holds for the structure constants ( which are all finite ) and multiplication rule of @xmath2021 , for all @xmath188 .    for @xmath56 or @xmath27 ,",
    "the structure constants are defined in terms of broken lines .",
    "the finiteness is then immediate from lemma [ sminlem ] .",
    "indeed , given @xmath2022 , we have @xmath2023 , @xmath2024 for some @xmath1872 , by the fact that @xmath180 is top - dimensional , and thus if @xmath1918 , then @xmath51 lies in the bounded polytope @xmath2025 .",
    "the algebra structure is associative by ( 3 ) of proposition [ thetabasislemma ] .",
    "the @xmath78 case follows from the @xmath56 case and the definitions of the structure constants and multiplication rule for @xmath2021 , see theorem [ mainthax ] .",
    "[ cafin ] for @xmath2015 or @xmath27 assume @xmath2026 has enough global monomials . for @xmath1742 assume",
    "@xmath186 has enough global monomials .",
    "then @xmath59 defines a @xmath8-algebra structure on @xmath43 .",
    "the case of @xmath1742 follows from the case of @xmath56 so we may assume @xmath15 is either @xmath27 or @xmath56 . using the enough global monomials hypothesis and lemma [ egmlem ] , we can find a finite collection @xmath2027 such that the intersection of the finite collection of polytopes @xmath2028 is bounded .",
    "but since @xmath2029 is min - convex by proposition [ convcor ] , each of these polytopes is positive by lemma [ sminlem ] .",
    "thus the result follows from proposition [ fmprop ] .",
    "finite generation of @xmath43 is a special case of a much more general result .",
    "[ fgprop ] let @xmath165 or @xmath27 , assume @xmath161 has enough global monomials , and let @xmath2016 be a positive polytope , which we assume is rationally defined and not necessarily compact",
    ". then @xmath2030\\ ] ] is a finitely generated @xmath8-subalgebra .",
    "note that @xmath2031 is a subalgebra of @xmath2032 $ ] by the definition of positive polytope .    as in the proof of corollary [ cafin ]",
    ", we can choose @xmath2033 so that @xmath2034 is a compact positive polytope . moreover , because boundedness of the intersection is preserved by small perturbation of the functions , we can assume that each @xmath1994 is in the interior of some maximal dimensional cluster cone @xmath2035 .",
    "note the seed @xmath2036 is then uniquely determined by @xmath1994 , by lemma [ fgccthg2 ] .",
    "it follows that @xmath2037 is strictly increasing on the monomial decorations at any non - trivial bend of any broken line in @xmath2038 by lemma [ blblem ] .",
    "for @xmath2039 , we consider @xmath2040 here the second sum is over all @xmath2041 satisfying the stated condition .",
    "this is a subalgebra of @xmath2042 by proposition [ convcor ] .",
    "similarly , we define @xmath2043\\ ] ] to be the vector subspace spanned by all @xmath2044 , @xmath2045 where @xmath2046 for @xmath2047 , and @xmath2048 .",
    "then @xmath2049 is a graded subalgebra of @xmath2050 $ ] by proposition [ convcor ] ( graded by @xmath1-degree ) and @xmath2051 is the degree zero part .",
    "the result then follows from the following claim , noting that @xmath2052 and for @xmath2053 there is a natural surjection @xmath2054 by sending @xmath2055 , @xmath2056 .",
    "@xmath2057 is a finitely generated @xmath8-algebra .    _",
    "proof_. we argue first that @xmath2058 is finitely generated .",
    "we work on @xmath2059 , so that the multiplication rule is defined using broken lines for @xmath2060 , as described by proposition [ thetabasislemma ] , ( 3 ) and definition - lemma [ structuredef ] .",
    "note @xmath2061 is linear on @xmath2062 .",
    "if @xmath2063 , then modulo @xmath1 , @xmath2064 unless @xmath2065 , for otherwise @xmath2066 . by lemma [ blblem ]",
    ", @xmath2061 is strictly increasing on monomial decorations at any non - trivial bend of a broken line and thus the only broken lines that will contribute ( modulo @xmath1 ) to @xmath2067 are straight , thus modulo @xmath1 , @xmath2068 ( addition here in @xmath2069 ) .",
    "thus @xmath2058 is the monoid ring associated to the rational convex cone @xmath2070 and is thus finitely generated .",
    "now by decreasing induction on the @xmath1-degree , to show @xmath2057 is finitely generated , it is enough to show that its degree @xmath81 subalgebra , @xmath2071 , is finitely generated .",
    "this is obvious if the set @xmath2072 is @xmath1978 , and by assumption this is true for sufficiently large @xmath2073 . by the above , in any case , to prove @xmath2071",
    "is finitely generated , it is enough to show @xmath2074 is finitely generated .",
    "so we are done by induction .",
    "[ fgcor ] for @xmath165 or @xmath27 , suppose that @xmath161 has enough global monomials",
    ". for @xmath1648 , assume @xmath186 has enough global monomials .",
    "then @xmath43 is a finitely generated @xmath8-algebra .    in the @xmath165 or @xmath27 cases ,",
    "apply the theorem with @xmath2075 or @xmath2076 , which are trivially positive .",
    "then @xmath132 is the degree @xmath81 part of the finitely generated ring @xmath2077 with respect to the @xmath582-grading .",
    "since @xmath2021 is a quotient of @xmath132 by construction of @xmath2078 in theorem [ mainthax ] , ( 1 ) , @xmath2021 is also finitely generated .",
    "[ markscor ] assume @xmath2079 has egm .",
    "then for each universal laurent polynomial @xmath41 on @xmath56 , the function @xmath2080 of theorem [ ffgth ] has finite support ( i.e. , @xmath2081 for all but finitely many @xmath1557 ) , and @xmath2082 gives inclusions of @xmath8-algebras @xmath2083 } { \\bbbk}[n].\\ ] ]    let @xmath41 be a universal laurent polynomial on @xmath1170 . by theorem [ ffgth ] the sets @xmath2084 of definition [ defs ] are independent of the seed @xmath10 .",
    "we claim that for each global monomial @xmath121 on @xmath2085 , there is a constant @xmath2086 such that @xmath2087 to see that this is sufficient to prove the proposition , note that by lemma [ egmlem ] , there are a finite number of @xmath1994 such that the intersection of the sets where @xmath2088 is the origin in @xmath2089 .",
    "thus , if the claim is true , @xmath2090 , the support of @xmath2080 , is a finite set .",
    "the inclusion of algebras follows by proposition [ thetabasislemma ] .",
    "so it s enough to establish the claim .",
    "let @xmath121 be a global monomial which is a character on the seed torus for @xmath10 .",
    "we follow the notation of definition [ defs ] .",
    "thus @xmath2091 , where @xmath2092 itself depends on the seed @xmath10 and @xmath41 .",
    "the tropicalization @xmath1962 of global monomials @xmath121 which restrict to a character on the seed torus @xmath2093 are identified with integer points of the dual cone @xmath2094 ( i.e. , elements non - negative on each of the initial scattering monomials ) , see the proof of proposition [ convcor ] .",
    "note @xmath1962 is linear on @xmath2095 ( though for our purposes , its min - convexity will be enough ) .",
    "since @xmath2092 is a finite set , for any such @xmath2096 , there is constant @xmath2086 such that @xmath2097 this completes the proof .",
    "we begin by showing some standard conditions in cluster theory , namely acyclicity of the quiver or existence of a maximal green sequence both imply a weaker condition which in turn implies both the egm condition and the full fock - goncharov conjecture .",
    "this suggests that this weaker condition is perhaps a more natural one in cluster theory .",
    "this point has been explored in @xcite .",
    "[ lccdef ] we say a cluster variety @xmath19 has _ large cluster complex _ if for some seed @xmath10 , @xmath2098 is not contained in a half - space .",
    "[ egmscprop ] if @xmath19 has large cluster complex , then @xmath2099 has egm , @xmath2100 , and the full fock - goncharov conjecture ( see definition [ fgconjdef ] ) holds for @xmath56 , @xmath27 , very general @xmath78 and , if the convexity condition ( 7 ) of theorem [ mainth ] holds , for @xmath19 .",
    "assume egm fails for @xmath56 .",
    "then we have some point @xmath2101 and @xmath2102 for all @xmath2103 .",
    "take any seed @xmath10 .",
    "we can compute @xmath2104 by using the corresponding positive laurent polynomial @xmath2105 $ ] , for @xmath827 a point in the distinguished chamber @xmath693 of @xmath806 . thus using lemma [ lplemma ] ( leaving the canonical isomorphism @xmath51 out of the notation ) , @xmath2106 here",
    "the minimum is over all broken lines",
    "@xmath341 contributing to @xmath1617 and the final inequality comes from the fact that one of the broken lines is the obvious straight line .",
    "thus @xmath110 is contained in the half - space @xmath2107 .",
    "since @xmath2108 is the inverse image of @xmath2109 under the map @xmath2110 , the egm statement follows .",
    "now @xmath2111 since @xmath2112 and @xmath61 is saturated and intrinsically closed under addition , see theorem [ goodalgebra ] . since @xmath56 satisfies egm , so does @xmath186 by proposition [ ldegmprop ] , and the full fock - goncharov conjecture for @xmath56 then follows from corollary [ cafin ] and proposition [ markscor ] .",
    "the @xmath2113 and @xmath19 cases then follow as in the proofs of corollary [ xcorollary ] and theorem [ mainthax ] .",
    "[ gsprop ] let @xmath2114 be a seed .",
    "suppose for some vertex @xmath153 of @xmath696 the cluster chamber @xmath2115 meets the interior of @xmath817 .",
    "then the following hold :    1 .",
    "@xmath19 has large cluster complex .",
    "obviously ( 1 ) implies ( 2 ) .",
    "( 1 ) follows from the fact that each cluster chamber is a chamber in @xmath1723 , and each @xmath2117 is a union of walls from @xmath806 , see theorem [ fgccth ] .",
    "[ mgsrem ] consider the following conditions on a skew - symmetric cluster algebra @xmath19 :    1 .",
    "@xmath19 has an acyclic seed .",
    "2 .   @xmath19 has a seed with a maximal green sequence .",
    "( for the definition , see @xcite , def .  1.8 . )",
    "@xmath19 has large cluster complex .",
    "then ( 1 ) implies ( 2 ) implies ( 3 ) .",
    "\\(1 ) implies ( 2 ) is @xcite , lemma 1.20 . for ( 2 )",
    "implies ( 3 ) , let @xmath10 be an initial seed and @xmath609 the seed obtained by mutations in a maximal green sequence . by definition , the @xmath130-vectors for @xmath609 have non - positive entries",
    ". by lemma [ facelem ] the @xmath130-vectors are the equations for the walls of the cluster chamber @xmath1267 , thus the hypothesis of proposition [ gsprop ] holds .",
    "we make an aside here connecting with work of reineke @xcite in the acyclic skew - symmetric case . in this case",
    "@xmath2118 has a natural interpretation in terms of moduli of quiver representations .",
    "consider skew - symmetric fixed and initial data with no frozen variables .",
    "set @xmath2119 , and let @xmath2120}$ ] be the completion of the polynomial ring @xmath2121 $ ] with respect to the maximal monomial ideal .",
    "let @xmath2122 be a monoid as in  1 containing all @xmath1397 , so that @xmath93 , the pro - nilpotent group of  [ defconstsection ] ( in the @xmath56 case ) acts by automorphisms of @xmath268}$ ] as usual .",
    "note there is an embedding @xmath2120 } \\hookrightarrow \\widehat{{\\bbbk}[p]}$ ] given by @xmath2123 .",
    "the action of @xmath93 on @xmath268}$ ] then induces an action on @xmath2120}$ ] . indeed ,",
    "one checks immediately that an automorphism ( for @xmath2124 ) @xmath2125 induces the automorphism on @xmath2120}$ ] given by @xmath2126    [ reinekeprop ] suppose given fixed skew - symmetric data with no frozen variables along with an acyclic seed @xmath787 .",
    "let @xmath827 be the associated quiver . that @xmath1675 for any @xmath263 , the quiver @xmath827 has no isolated vertex .",
    "] each @xmath365 gives a _ stability _ in the sense of @xcite .",
    "assume there is a unique primitive @xmath2127 with @xmath2128 .",
    "for each @xmath1237 let @xmath2129 where @xmath2130 is the framed moduli space ( framed by the vector spaces @xmath2131 with @xmath2132 unless @xmath2133 , in which case @xmath2134 ) of semi - stable representations of @xmath827 with dimension vector @xmath2135 and @xmath367-slope zero , ( see @xcite,5.1 ) and @xmath2136 denotes topological euler characteristic .",
    "let @xmath2137 for some @xmath2138 .",
    "then @xmath2139 depends only on @xmath827 and @xmath367 ( i.e. , is independent of the vertex @xmath1237 ) . furthermore , for arbitrary @xmath2140 , @xmath2141 ( see lemma [ easyequivlemma ] ) acts on @xmath2120}$ ] by @xmath2142 and on @xmath268}$ ] by @xmath2143    the equality of the @xmath2144 follows from the argument in the proof of @xcite , lemma 3.6 .",
    "if @xmath2145 for some @xmath210 then one checks easily that @xmath2146 is a point and @xmath2147 for @xmath2148 or @xmath2149 .",
    "thus @xmath2150 and the formula for @xmath2151 holds by remark  [ noekwalls ] .",
    "let @xmath93 be the pro - nilpotent group of  [ defconstsection ] ( in the @xmath56 case ) associated to the completion of the lie algebra @xmath2152 the group @xmath93 acts faithfully on @xmath268}$ ] but need not act faithfully via restriction on @xmath2120}$ ] .",
    "it turns out , however , that there is a subgroup @xmath2153 which does act faithfully on @xmath2120}$ ] and that all automorphisms attached to walls in @xmath378 are elements of @xmath336 .",
    "we see this as follows .",
    "consider the subspace @xmath2154 by the commutator formula ( [ liebracketform ] ) we have @xmath2155 \\subset { \\mathfrak{g}}'$ ] , and in particular @xmath337 is a lie subalgebra of @xmath283 .",
    "let @xmath2156 denote the associated pro - nilpotent subgroup .",
    "because of the assumption that @xmath2157 for any unfrozen @xmath210 , all automorphisms associated to initial walls of @xmath378 lie in @xmath336 , and thus by the inductive construction of the scattering diagram in  [ subseckslemalg ] , all automorphisms associated to outgoing walls of @xmath378 also lie in @xmath336 .",
    "let @xmath2158 denote the pro - nilpotent group acting faithfully on @xmath2120}$ ] associated to the completion of the lie algebra @xmath2159 then the restriction of the action of @xmath93 on @xmath268}$ ] to @xmath2120}$ ] is given by the group homomorphism @xmath2160 associated to the lie algebra homomorphism @xmath2161 this homomorphism restricts to an isomorphism @xmath2162 , and in particular the restriction of the @xmath336 action on @xmath268}$ ] to @xmath2120}$ ] is faithful .",
    "assume now that the indices are ordered so that @xmath827 has arrows from the vertex with index @xmath210 to the vertex with index @xmath2073 only if @xmath2163 .",
    "we compute @xmath2164 , the automorphism associated to a path from the positive to the negative chamber , in two different ways .",
    "first , there is a sequence of chambers connecting @xmath693 to @xmath817 via the mutations @xmath2165 , @xmath2166 .",
    "indeed , it is easy to check that the @xmath130-vectors obtained by mutating @xmath2167 @xmath2168 are precisely @xmath2169 , and the chamber corresponding to this sequence of mutations is precisely the dual of the cone generated by the @xmath130-vectors , see lemma [ facelem ] .",
    "thus in particular , we can find a path @xmath341 from @xmath693 to @xmath817 which only crosses the walls @xmath2170 in order .",
    "note that the element of @xmath336 attached to the wall @xmath2171 acts on @xmath2120}$ ] by @xmath2172 , which agrees with the automorphism in @xcite written as @xmath2173 ( noting that @xcite uses the opposite sign convention for the skew form @xmath798 associated to the quiver ) . from this",
    "we conclude that @xmath2174 , the left - hand side of the equality of theorem 2.1 of @xcite .    on the other hand , choose a stability condition @xmath367 and consider the path @xmath341 from @xmath2175 to @xmath817 parameterized by @xmath2176 , with @xmath2177 , with domain sufficiently large so the initial and final endpoints lie in the positive and negative orthants respectively .",
    "then a dimension vector has @xmath2178-slope @xmath81 if and only if it has @xmath367-slope @xmath2176 . thus if the description in the statement of the theorem of @xmath2179 is correct , then @xmath2180 coincides with the right - hand side of the equality of theorem 2.1 of @xcite . by the uniqueness of the factorization of @xmath447 from the proof of theorem [ maximscorrespondence ] and the faithful action of @xmath336 on @xmath2120}$ ] shown above ,",
    "we obtain the result .",
    "because non - negativity of euler characteristics for the quiver moduli spaces appearing in the above statement is known ( @xcite ) , this gives an alternate proof of positivity of the scattering diagram in this case .",
    "since the initial version of this paper was released , bridgeland @xcite developed a hall algebra version of scattering diagrams in the context of quiver representation theory , and the above result follows conceptually from his results .    [ finite_type_scattering ]",
    "let @xmath827 be a quiver given by an orientation of the dynkin diagram of a simply - laced finite dimensional simple lie algebra .",
    "then the dimension vectors of the indecomposable complex representations of @xmath827 are the positive roots of the associated root system @xmath2181 ( gabriel s theorem ) . moreover , for each positive root @xmath2135 , there is a unique indecomposable representation @xmath15 with dimension vector @xmath2135 , and @xmath2182 .",
    "see e.g. @xcite .",
    "the @xmath19 cluster variety associated to @xmath827 is the cluster variety of finite type associated to the root system @xmath2181 @xcite . using proposition  [ reinekeprop ]",
    "we can give an explicit description of the scattering diagram @xmath328 for @xmath56 as follows .",
    "first we observe that a representation of @xmath827 that contributes to @xmath328 is a direct sum of copies of an indecomposable representation .",
    "let @xmath2183 be a primitive vector and @xmath365 be such that @xmath2184 .",
    "suppose @xmath223 is an @xmath367-semistable representation of @xmath827 with dimension vector a multiple of @xmath2135 , and consider the decomposition of @xmath223 into indecomposable representations .",
    "by @xmath367-semistability and our assumption @xmath2184 , each factor must have dimension vector a multiple of @xmath2135 . by gabriel s theorem",
    ", we see that @xmath2135 is a positive root and @xmath223 is a direct sum of copies of the associated indecomposable representation .",
    "we see that the walls of @xmath328 are in bijection with the positive roots of @xmath2181 .",
    "let @xmath2185 be a positive root and @xmath15 the indecomposable representation with dimension vector @xmath2135 .",
    "let @xmath2186 be the locus of @xmath365 such that @xmath15 is @xmath367-semistable of @xmath367-slope zero , that is , @xmath2187 and @xmath2188 for @xmath2189 the dimension vector of any subrepresentation of @xmath15 .",
    "then @xmath613 is a rational polyhedral cone in @xmath2190 , and is non - empty of real codimension @xmath616 .",
    "indeed , there exists @xmath2128 such that @xmath15 is @xmath367-stable by @xcite , remark  4.5 and @xcite , theorem  6.1 , and this is an open condition on @xmath2128 .",
    "now let @xmath2191 be a point such that @xmath2184 .",
    "then the @xmath367-semistable representations of @xmath367-slope zero are the direct sums of copies of @xmath15 .",
    "let us now examine the moduli space @xmath2192 .",
    "an object in this moduli space is a direct sum @xmath2193 of @xmath460 copies of the unique indecomposable representation of dimension vector @xmath2135 , along with the framing , a choice of a vector @xmath2194 .",
    "such an object is stable if and only if @xmath697 is not contained in a proper subrepresentation of @xmath2195 of the form @xmath2196 for some subspace @xmath2197 . in order for this to be the case",
    ", the @xmath2198 must be linearly independent elements of @xmath2199 , and hence span a @xmath460-dimensional subspace of @xmath2199 .",
    "the automorphism group of @xmath2195 is @xmath2200 , which has the effect of changing the basis of the subspace spanned by @xmath2198 .",
    "now it follows easily from the definitions that , for each @xmath2201 and @xmath1237 such that @xmath2202 , the moduli space @xmath2203 of @xmath367-semistable representations with framing at vertex @xmath210 is isomorphic to the grassmannian @xmath2204 .",
    "so , in the notation of proposition  [ reinekeprop ] , @xmath2205 and @xmath2206 thus the wall of @xmath328 associated to @xmath2185 is @xmath2207    for example , suppose @xmath827 is the quiver with vertices @xmath2208 , and arrows from 1 to 2 and 2 to 3 .",
    "this is an orientation of the dynkin diagram @xmath2209 .",
    "we have the following isomorphism types of indecomposable representations : @xmath2210 @xmath2211 ( here the numbers denote the dimension of the vector space at the vertex , and the symbol @xmath2212 over an arrow indicates that the corresponding linear transformation is an isomorphism . )",
    "we write @xmath2213 and @xmath2214",
    ". then the walls of @xmath328 are @xmath2215 @xmath2216 @xmath2217 @xmath2218 for example , the indecomposable representation with dimension vector @xmath2219 has subrepresentations with dimension vectors @xmath2220 and @xmath2221 .",
    "so the associated wall has support @xmath2222 defined by the inequalities @xmath2223 and @xmath2224 .",
    "this gives the last wall in the list .",
    "[ acyclic_scattering ] kac generalized gabriel s theorem to the case of an arbitrary quiver @xmath827 ( without edge loops ) as follows @xcite,@xcite : let @xmath283 be the kac - moody algebra associated to the underlying graph of @xmath827 .",
    "then the dimension vectors of indecomposable complex representations of @xmath827 are the positive roots of @xmath283 .",
    "the roots @xmath2181 of @xmath283 are divided into real and imaginary roots .",
    "the real roots are the translates of the simple roots @xmath1286 under the action of the weyl group .",
    "let @xmath2225 be the asymmetric bilinear form defined by @xmath2226 then for representations @xmath15 and @xmath2227 of @xmath827 with dimension vectors @xmath2135 and @xmath2189 , @xmath2228    let @xmath2229 be a positive root",
    ". we have @xmath2230 if @xmath2135 is real and @xmath2231 if @xmath2135 is imaginary .",
    "the indecomposable representations of dimension vector @xmath2135 depend on @xmath2232 parameters .",
    "we say @xmath2135 is a _",
    "root if there exists a representation @xmath15 of @xmath827 with dimension vector @xmath2135 such that @xmath2182 .",
    "assume that @xmath827 is acyclic .",
    "let @xmath328 be the scattering diagram for the associated @xmath56 cluster variety .",
    "we study @xmath328 using proposition  [ reinekeprop ] .",
    "we show that each wall of @xmath328 is contained in @xmath2233 for @xmath2135 a primitive schur root .",
    "first , as in example  [ finite_type_scattering ] , each wall is contained in @xmath2233 for @xmath2135 a primitive positive root ( note that the set of roots is saturated by @xcite , proposition  1.2 ) .",
    "it remains to show that @xmath2135 is necessarily a schur root .",
    "otherwise , a representation @xmath15 with dimension vector @xmath2135 deforms to a decomposable representation @xmath2227 @xcite , proposition  1(b ) .",
    "then , for @xmath365 such that @xmath2184 , @xmath2227 is @xmath367-unstable and so @xmath15 is @xmath367-unstable ( as @xmath367-semistability is an open condition ) . a representation with dimension vector a multiple of @xmath2135 is @xmath367-unstable for the same reason , using @xcite , theorem  3.8 .",
    "now by proposition  [ reinekeprop ] we see that there does not exist a wall of @xmath328 contained in @xmath2233 .    for a real schur root @xmath2135",
    "there is a unique wall contained in @xmath2233 which can be described explicitly as in example  [ finite_type_scattering ] .",
    "we remark that @xmath2135 is a real schur root iff there is an indecomposable representation @xmath15 of @xmath827 with dimension vector @xmath2135 such that @xmath2182 and @xmath2234 .",
    "( moreover , @xmath15 is uniquely determined by @xmath2135 . )",
    "such a representation @xmath15 is an exceptional object in the category of representations of @xmath827 in the sense of @xcite .    for an imaginary schur root",
    "the associated walls involve contributions from positive dimensional moduli spaces of semistable representations of @xmath827 .",
    "the case of the imaginary root @xmath2235 for the quiver @xmath827 with vertices @xmath2236 and two arrows from 1 to 2 is described in @xcite ,  6.1 .",
    "( this is the case @xmath936 of example  [ bcexample ] . )",
    "we next give another condition for the egm condition to hold . while this may appear very technical , it is in fact very important for group - theoretic examples , see remark [ egmrem ] .",
    "[ mcexprop ]    1 .",
    "let @xmath2237 be an affine variety over a field @xmath8 , and @xmath2238 generators of @xmath1174 as a @xmath8-algebra .",
    "for each divisorial discrete valuation @xmath2239 ( where @xmath2240 denotes the function field of @xmath1 ) which does not have center on @xmath1 ( or equivalently , for each boundary divisor @xmath2241 in any partial compactification @xmath2242 ) , @xmath2243 for some @xmath210 .",
    "2 .   suppose @xmath15 is a cluster variety , @xmath2244 is a smooth affine variety , and @xmath2245 is an open immersion .",
    "let @xmath2238 generate @xmath29 as a @xmath8-algebra .",
    "then @xmath2246 is strictly negative on @xmath2247 .",
    "\\(1 ) let @xmath2248 be an open immersion with complement an irreducible divisor @xmath2249 .",
    "suppose each @xmath2250 is regular along @xmath2249 .",
    "then the inclusion @xmath2251 is an equality .",
    "thus the inverse birational map @xmath2252 is regular , which implies @xmath2253 .",
    "thus ( 1 ) follows .",
    "\\(2 ) since the restriction @xmath2254 to the open subset @xmath2255 is an isomorphism , it follows that @xmath2256 has codimension at least two .",
    "thus @xmath1 itself is log calabi - yau by @xcite , lemma 1.4 , and the restriction @xmath2257 of the holomorphic volume form is a scalar multiple of @xmath2258 .",
    "in addition @xmath2259 .",
    "now ( 2 ) follows from ( 1 ) .",
    "[ egmprop1 ] if the canonical map @xmath2260 is surjective , then    1 .",
    "@xmath2261 is isomorphic to @xmath2262 .",
    "2 .   we can choose @xmath2263 so that the induced map @xmath2264 is an isomorphism .",
    "the map induced by the choice of @xmath2265 in ( 2 ) , @xmath2266 , is finite .",
    "4 .   if furthermore for each @xmath2267 we can find a cluster variable @xmath1174 with @xmath2268 , then @xmath19 ( and @xmath56 ) has enough global monomials .",
    "this final condition holds if @xmath2269 is finitely generated and @xmath172 is a smooth affine variety .",
    "\\(1 ) is lemma [ taprinlem ] .",
    "( 3 ) follows from ( 2 ) .",
    "so we assume @xmath2270 is surjective and show we can choose @xmath2265 to have finite cokernel , or equivalently , so @xmath2265 is injective .",
    "we follow the notation of @xcite ,  2.1 . by the assumed surjectivity ,",
    "@xmath2265 is injective iff the induced map @xmath2271 is injective . we can replace @xmath2265 by @xmath2272 for any map @xmath2273 which vanishes on @xmath244 , i.e. , factors through a map @xmath2274 .",
    "note by the assumed surjectivity that @xmath190 and @xmath2275 have the same rank , and moreover the restriction @xmath2276 ( which is unaffected by the addition of @xmath59 ) is injective . in particular",
    "@xmath2277 is injective .",
    "thus we can choose @xmath2278 , vanishing on @xmath2279 ( i.e. , factoring through a map @xmath2280 ) so that @xmath2281 is injective . by viewing the determinant of @xmath2282 for @xmath860 an integer as a polynomial in @xmath860 , we see that @xmath2283 is injective for all but a finite number of @xmath860 . for",
    "sufficiently divisible @xmath860 , @xmath2284 extends to @xmath2274 under the natural inclusion @xmath2285 .",
    "now @xmath2286 is injective as required .",
    "this shows ( 2 ) .    for ( 4 )",
    ", when @xmath1523 is a trivial bundle , it follows that @xmath2287 so we have enough global monomials so long as we can find cluster variables on @xmath19 with the given condition .",
    "the final statement of ( 4 ) follows from proposition [ mcexprop ] .",
    "[ egmrem ] every double bruhat cell is an affine variety by @xcite , prop .",
    "2.8 and smooth by @xcite , theorem 1.1 .",
    "the surjectivity condition in the statement of proposition [ egmprop1 ] holds for all double bruhat cells by @xcite , proposition 2.6 ( the proposition states that the exchange matrix has full rank , but the proof shows the surjectivity ) .",
    "so by the proposition , @xmath56 has enough global monomials for double bruhat cells for which the upper and ordinary cluster algebras are the same .",
    "this holds for the open double bruhat cell of @xmath93 and the @xmath98 ( @xmath2288 maximal unipotent ) for @xmath2289 by @xcite , remark 2.20 , and is announced in @xcite for all double bruhat cells of all semi - simple @xmath93 .      in this subsection",
    ", we will use positive polytopes in @xmath2290 to create partial compactifications of @xmath2291 which fibre over an affine space @xmath1136 .",
    "the fibre over @xmath81 will be a toric variety , and the general fibre is log calabi - yau .",
    "fix seed data for a cluster variety , @xmath74 and let @xmath2292 be the monoid generated by the @xmath1232 .",
    "similarly , let @xmath2293 be the cone generated by the @xmath1232 .",
    "the choice of seed gives an identification @xmath2294 and in particular determines a second projection @xmath2295 ( which depends on the choice of seed ) .",
    "we have the canonical inclusion @xmath2296 given in each seed by @xmath2297 , and canonical translation action of @xmath240 on @xmath1424 making @xmath132 into a @xmath1423$]-module .    now assume given a compact , positive , rationally defined top - dimensional polytope @xmath2298 .",
    "we let @xmath2299 . by proposition [ fmprop ] and the compactness of @xmath180",
    ", @xmath1589 is a @xmath1423$]-algebra with @xmath8-algebra structure constants @xmath1606 .",
    "the set @xmath2300 is a positive polytope .",
    "denote by @xmath2301 the degree @xmath81 part of the ring @xmath2302 defined in theorem [ fgprop ] .",
    "then @xmath2301 is a finitely generated @xmath2303$]-algebra .",
    "positivity follows from the fact that @xmath2304 for each scattering monomial @xmath860 in @xmath806 .",
    "the finite generation statement then follows from theorem [ fgprop ] .",
    "let @xmath2305 , and @xmath2306 then @xmath2307 is positive by proposition [ tqprop ] , and as the intersection of two positive sets is positive , @xmath2308 is positive . hence the associated graded rings @xmath2309 and @xmath2310 ( graded by @xmath582 ) defined via theorem [ fgprop ] are finitely generated .",
    "note that @xmath2301 is the set of homogeneous elements of degree @xmath81 in the localization @xmath2311 .",
    "thus we have an inclusion @xmath2312 an open subset , with complement the zero locus of @xmath2313 .",
    "the inclusion of @xmath2314=\\vartheta_0{\\bbbk}[n_{{{\\bf s}}}^{\\oplus}]$ ] in the degree 0 part of @xmath2077 induces a morphism @xmath2315 ) = \\ba^n_{x_1,\\dots , x_n}$ ] .",
    "this morphism is flat , since @xmath2077 is a free @xmath2303$]-module .",
    "[ polylem ] the central fibre of @xmath2316 is the polarized toric variety @xmath2317 given by is only a rationally defined polyhedron rather than a lattice polyhedron , we can still define @xmath2318 . ]",
    "the polyhedron @xmath2319 where @xmath2320 is the natural map of proposition [ ldpprop ] , ( 4 ) .",
    "this follows from the multiplication rule . indeed , since all the scattering monomials project under @xmath2321 into the interior of @xmath2322",
    ", @xmath2323 vanishes modulo the maximal ideal of @xmath2303 $ ] for any broken line @xmath341 that bends , see e.g.   the proof of corollary [ cafin ] . thus @xmath2324 } ( { \\bbbk}[n^{\\oplus}_{{{\\bf s}}}]/(x_1,\\dots , x_n ) ) =   \\bigoplus_{d \\geq 0 } \\bigoplus_{q \\in d \\cdot \\oxi } { \\bbbk}\\cdot \\vartheta_q   \\cdot t^d\\ ] ] with multiplication induced by @xmath2325 ( addition in @xmath1175 ) .",
    "this is the coordinate ring of @xmath2326    consider the fixed data and seed data given in example [ basicscatteringexample ] .",
    "the scattering diagram for @xmath56 in this case has three walls , pulled back from the walls of the scattering diagram for @xmath19 as given in example [ basicscatteringexample ] , with attached functions @xmath2327 , @xmath2328 and @xmath2329 . here , with basis @xmath390 of @xmath240 and dual basis @xmath389 of @xmath1444 , we have @xmath2330 and @xmath2331 .    take @xmath2332 to be the pentagon with vertices ( with respect to the basis @xmath410 ) @xmath2333 , @xmath2334 , @xmath2335 , @xmath2336 , and @xmath2337 , which we write as @xmath2338",
    ". then @xmath2339 pulls back to @xmath1792 to give a polytope @xmath180 .",
    "it is easy to see that @xmath180 is a positive polytope .",
    "further , write @xmath2340 , @xmath2341",
    ". then it is not difficult to describe the ring @xmath2042 determined by @xmath2308 as the graded ring generated in degree @xmath616 by @xmath2342 , with relations @xmath2343 these equations define a family of projective varieties in @xmath2344 , parameterized by @xmath2345 . for @xmath2346 , we obtain a smooth del pezzo surface of degree @xmath2347 . the boundary ( where @xmath2348 ) is a cycle of five projective lines . when @xmath2349 , we obtain a toric surface with two ordinary double points",
    ".    [ cfcor ] assume that @xmath186 has enough global monomials , @xmath180 is given as above , and that @xmath8 is an algebraically closed field of characteristic zero .",
    "let @xmath15 be one of @xmath2350 or @xmath56 .",
    "we note @xmath43 has a finitely generated @xmath8-algebra structure by proposition [ cafin ] .",
    "define @xmath2351 .",
    "define @xmath2352 ( constructed above ) in case @xmath2015 , and for @xmath2353 , take instead its fibre over @xmath1734 ( we are not defining @xmath0 in the @xmath2354 case ) , so by construction we have an open immersion @xmath2242 .",
    "define @xmath2355 .",
    "the following hold :    1 .   in all cases",
    "@xmath1 is a gorenstein scheme with trivial dualizing sheaf .",
    "2 .   for @xmath2015 , @xmath27 , or @xmath78 for @xmath188 general ,",
    "@xmath1 is a @xmath190-trivial gorenstein log canonical variety .",
    "3 .   for @xmath2015 or @xmath78 for @xmath188 general , or all @xmath78 assuming there exists a seed @xmath2356 and a strictly convex cone containing all of @xmath1766 for @xmath76 , we have @xmath2242 is a minimal model . in other words , @xmath0 is a ( in the @xmath56 case relative to @xmath2357 ) projective normal variety , @xmath2358 is a reduced weil divisor , @xmath2359 is trivial , and @xmath2360 is log canonical .",
    "first we consider the theorem in the cases @xmath2361 .",
    "note that ( 3 ) implies ( 2 ) by restriction .",
    "we consider the family @xmath2362 constructed above , where @xmath92 is the divisor given by @xmath2363 with its reduced structure .",
    "using lemma [ kollarslemma ] below , the condition that on a fibre @xmath1609 , @xmath2364 is a minimal model ( in the sense of the statement ) is open , and it holds for the central fibre as it is toric by theorem [ polylem ] .",
    "thus the condition holds for fibres over some non - empty zariski open subset @xmath2365 .",
    "this gives ( 3 ) for @xmath78 with @xmath188 general .",
    "the convexity condition ( on the @xmath595 ) implies there is a one - parameter subgroup of @xmath22 which pushes a general point of @xmath2366 to @xmath81 ( see the proof of theorem [ mainthax ] ) , and now ( 3 ) for @xmath78 for all @xmath188 follows by the @xmath22-equivariance .",
    "now note given seed data @xmath239 the convexity assumption holds for the seed data @xmath943 .",
    "thus the final paragraph applies with @xmath2367 and so in particular @xmath2291 is gorenstein with trivial dualizing sheaf . the same",
    "then holds for the fibres of the flat map @xmath2368 , which are @xmath2369 ( for arbitrary @xmath1734 ) .",
    "this gives ( 1 ) .",
    "finally we consider the case @xmath2370 .",
    "the graded ring construction above applied with seed data @xmath943 gives a degeneration of a compactification of @xmath2371 ( which is now a fibre of the family ) to a toric compactification of @xmath2372 .",
    "the torus @xmath1076 acts on the family , trivially on the base , and the quotient gives an isotrivial degeneration of an analogously defined compactification of @xmath2373 to a toric compactification of @xmath2357 .",
    "we leave the details of the construction ( which is exactly analogous to the construction of @xmath2374 above ) to the reader .",
    "now exactly the same openness argument applies .",
    "we learned of the following result , and its proof , from j. kollr .",
    "[ kollarslemma ] let @xmath8 be an algebraically closed field of characteristic zero .",
    "let @xmath2375 be a proper flat morphism of schemes of finite type over @xmath8 , and @xmath2376 a closed subscheme which is flat over @xmath1589 .",
    "let @xmath2377 denote the fiber of @xmath2378 over a closed point @xmath2379 .",
    "assume that @xmath1589 is regular and for @xmath2380 the following hold :    1 .",
    "@xmath2381 is normal and cohen  macaulay .",
    "2 .   @xmath2382 is a reduced divisor .",
    "the pair @xmath2383 is log canonical .",
    "5 .   @xmath2385    then the natural morphism @xmath2386 is an isomorphism , and there exists a zariski open neighbourhood @xmath2387 such that the conditions ( 1 - 5 ) hold for all @xmath2388 . in particular , @xmath2389 is a @xmath190-trivial gorenstein log canonical variety for all @xmath2388 .",
    "we are free to replace @xmath1589 by an open neighbourhood of @xmath2379 and will do so during the proof without further comment .    by assumption @xmath2390 and @xmath2391",
    "is cohen  macaulay .",
    "so @xmath2392 is cohen - macaulay by @xcite , corollary  2.71 , p.  82 .",
    "it follows that @xmath2393 is cohen ",
    "macaulay by @xcite , corollary  2.63 , p.  80 .",
    "the base @xmath1589 is regular by assumption , so @xmath2379 is cut out by a regular sequence . since @xmath2391 and @xmath2393 are cohen - macaulay , and @xmath2394 is proper and flat , we may assume that @xmath727 and @xmath92 are cohen  macaulay .",
    "now @xmath2395 is cohen ",
    "macaulay by @xcite , corollary  2.63 , and @xmath2396 is cohen",
    " macaulay by @xcite , corollary  2.71 .",
    "the relative dualizing sheaf @xmath2397 is identified with @xmath2398 , so @xmath2399 is also cohen  macaulay .",
    "it follows that @xmath2400 is cohen  macaulay , and so in particular satisfies serre s condition @xmath414 .",
    "the natural map @xmath2386 is an isomorphism in codimension @xmath616 ( because @xmath2391 is smooth in codimension @xmath616 ) and both sheaves are @xmath414 , hence the map is an isomorphism .",
    "now @xmath2390 implies that we may assume @xmath2401 using @xmath2402 .",
    "the conditions ( 1),(2 ) , and ( 5 ) are open conditions on @xmath2403 because @xmath2394 is proper and flat .",
    "so we may assume they hold for all @xmath2403 .",
    "we established above that @xmath2399 is invertible .",
    "it follows that condition ( 3 ) is also open on @xmath2403 by @xcite , corollary  4.10 , p.  159 , and that condition ( 4 ) is open on @xmath1589 ( using ( 5 ) ) .",
    "[ crems ] note that directly from its definition , with the multiplication rule counting broken lines , it is difficult to prove anything about @xmath43 , e.g. , that it is an integral domain , or determine its dimension .",
    "but the convexity , i.e. , existence of a convex polytope in the intrinsic sense , gives this very simple degeneration from which we get many properties , at least for very general @xmath78 , for free .",
    "there have been many constructions of degenerations of flag varieties and the like to toric varieties , see @xcite and references therein .",
    "we expect these are all instances of theorem [ polylem ] .",
    "many authors have looked for a nice compactification of the moduli space @xmath2404 of ( say ) rank two vector bundles with algebraic connection on an algebraic curve @xmath727 . we know of no satisfactory solution .",
    "for example , in @xcite the case of @xmath727 the complement of @xmath2405 points in @xmath1467 is considered , a compactification is constructed , but the boundary is rather nasty ( it lies in @xmath2406 , but this anti - canonical divisor is not reduced ) .",
    "this can be explained as follows : @xmath2404 has a different algebraic structure , the @xmath2407 character variety , @xmath15 ( as complex manifolds they are the same ) .",
    "note @xmath2408 is covered by affine lines ( the space of connections on a fixed bundle is an affine space ) , thus it is not log calabi - yau .",
    "rather , it is the log version of uniruled , and there is no mori theoretic reason to expect a natural compactification .",
    "@xmath15 however is log calabi - yau , and then by mori theory one expects ( infinitely many ) nice compactifications , the minimal models , see @xcite ,  1 , for an introduction to these ideas . when @xmath727 has punctures , @xmath15 is a cluster variety , see @xcite and @xcite . in the case of @xmath2409 with @xmath2405 punctures , @xmath15 is the universal family of affine cubic surfaces ( the complement of a triangle of lines on a cubic surface in @xmath2410 ) .",
    "see @xcite , example 6.12 .",
    "each affine cubic has an obvious normal crossing minimal model , the cubic surface .",
    "this compactification is an instance of the above , for a natural choice of polygon @xmath180 .",
    "the same procedure will give a minimal model compactification for any @xmath2411 character variety ( of a punctured riemann surface ) by the above simple procedure that has nothing to do with teichmller theory .",
    "for the remainder of this section we will assume that @xmath1889 has enough global monomials .",
    "by lemma [ egmlem ] , there are global monomials @xmath2412 with @xmath2413 such that @xmath2414 is min - convex with @xmath2415 being compact .",
    "thus we have seeds @xmath2416 ( possibly repeated ) such that @xmath2000 is a character on @xmath2417 , so that @xmath2037 is linear after making the identification @xmath2418 .",
    "furthermore , as in the proof of theorem [ fgprop ] , we can assume @xmath1994 is in the interior of the cone @xmath2035",
    ". we will now observe that with these assumptions the irreducible components of the boundary in the compactification of @xmath1170 induced by @xmath180 are toric .",
    "note for each @xmath1994 there is at least one seed where @xmath2037 is linear .",
    "we assume the collection of @xmath1994 is minimal for defining @xmath180 , and thus @xmath2419 is a union of maximal faces of @xmath180 , a non - empty closed subset of codimension @xmath616 .",
    "writing @xmath2420 , let @xmath2421 be the graded algebra of theorem [ fgprop ] , again a finitely generated algebra .",
    "then @xmath2422 is a projective variety and @xmath2363 gives a cartier ( but not necessarily reduced ) boundary @xmath2423 .",
    "[ toricbth ] in the above situation , the irreducible components of @xmath1654 are projective toric varieties .",
    "more precisely , for each @xmath1994 we have a seed @xmath2036 such that @xmath2000 is a character on @xmath2424 .",
    "then @xmath2425 is a bounded polytope .",
    "the associated projective toric variety is an irreducible component of @xmath1654 , and all irreducible components of @xmath1654 occur in this way .    for each @xmath210",
    "consider the vector subspace @xmath2426 with basis @xmath2427 with @xmath2428 and @xmath2429 for @xmath2430 .",
    "note that @xmath2431 is an ideal of @xmath2077 .",
    "indeed , the fact that @xmath1994 lies in the interior of its cone of the cluster complex for @xmath2085 implies by lemma [ blblem ] that @xmath2029 is strictly increasing at bends on monomial decorations of broken lines . now if @xmath2432 , @xmath2433 , and @xmath2434 appears in @xmath133 , then @xmath2435 , and thus @xmath2436",
    "now the definitions imply @xmath2437 .",
    "so it is enough to show that @xmath2438 is the projective toric variety given by the polytope @xmath2439 .",
    "now @xmath2440 has basis @xmath2441 , @xmath2442 . by the multiplication rule , and the fact again that @xmath2029 is strictly increasing at bends on monomial decorations of broken lines ,",
    "the only broken line that contributes to @xmath2443 is the straight broken line , and the multiplication rule on @xmath2444 is given by lattice addition , i.e. , @xmath2438 is the projective toric variety given by the polytope @xmath2445 .",
    "the result is ( at least to us ) surprising in that many cluster varieties come with a natural compactification , where the boundary is not at all toric .",
    "for example , order the columns of a @xmath2446 matrix and consider the open subset @xmath2447 where the @xmath510 consecutive plcker coordinates ( the determinant of the first @xmath460 columns , columns @xmath2448 , etc . ) are non - zero .",
    "this is a cluster variety .",
    "its boundary in the given compactification @xmath2449 is a union of schubert cells ( which are not toric ) .",
    "this has egm by proposition [ egmprop1 ] .",
    "then generic compactifications given by bounded polytopes @xmath180 gives an alternative compactification in which we replace all these schubert cells by toric varieties .",
    "we do not know , e.g. , how to produce such a compactification by birational geometric operations beginning with @xmath2449 .",
    "as discussed in the introduction , many basic objects in representation theory , e.g. , a semi - simple group @xmath93 , are not log calabi - yau , and we can not expect that they have a canonical basis of regular functions .",
    "however , in many cases the basic object is a _ partial minimal model _ of a log calabi - yau variety , i.e. , contains a zariski open log calabi - yau subset whose volume form has a pole along all components of the complement .",
    "for example , the group @xmath93 will be a partial compactification of an open double bruhat cell , and this is a partial minimal model .",
    "we have a canonical basis of functions on the cluster variety , and from this , we conjecture one can get a canonical basis on the partial compactification ( the thing we really care about ) in the most naive possible way , by taking those elements in the basis of functions for the open set which extend to regular functions on the compactification .",
    "we are only able to prove the conjecture under rather strong assumptions , see corollary [ spcor ] .",
    "happily these conditions hold in many important examples .",
    "note that a frozen variable for @xmath19 ( or @xmath56 ) canonically determines a valuation , a point of @xmath2450 , namely the boundary divisor where that variable becomes zero .",
    "see construction [ fvss ] .",
    "while we have myriad ( and near optimal ) sufficient conditions guaranteeing a canonical basis @xmath61 for @xmath33 , we can only prove our conjecture that @xmath2451 is a basis of @xmath2452 under a much stronger condition ( which happily holds in the most important representation theoretic examples ) :    [ osdef ] we say a seed @xmath2453 is _ optimized _ for @xmath2454 if @xmath2455 where @xmath2456 is the composition of canonical identifications defined in  [ tropsec ] .",
    "if instead @xmath2457 , we say @xmath10 is _ optimized _ for @xmath510 if @xmath2458 for all @xmath560 .",
    "we say @xmath10 is optimized for a frozen index if it is optimized for the corresponding point of @xmath2459 .",
    "for the connection between optimal seed and our conjecture on @xmath2460 see proposition [ boundaryprop ] and conjecture [ nosq ] .",
    "[ quiveroptimized ] in the skew - symmetric case , a seed is optimized for a frozen index if and only if in the quiver for this seed all arrows between unfrozen vertices and the given frozen vertex point towards the given frozen vertex .    under the identification @xmath2461 ( which is just @xmath240 in the skew - symmetric case ) ,",
    "the valuation corresponding to the divisor given by the frozen variable indexed by @xmath2462 is simply @xmath1232 .",
    "thus the seed is optimized for this frozen variable if @xmath2463 for all @xmath560 ; this is the number of arrows from @xmath460 to @xmath210 in the quiver , with sign telling us that they are incoming arrows .",
    "[ opslem ]    1 .",
    "the seed @xmath10 is optimized for @xmath2464 if and only if the monomial @xmath2465 on @xmath2466 is a global monomial . in this case @xmath2467 and the global monomial @xmath2465 is the restriction to @xmath2468 of @xmath2469 . in the @xmath56 case , for @xmath2470 primitive , this holds if and only if each of the initial scattering monomials @xmath2471 in @xmath806 is regular along the boundary divisor of @xmath56 corresponding to @xmath510 under the identification @xmath2472 .",
    "@xmath2454 has an optimized seed if and only if @xmath510 lies in @xmath2473 .    for ( 1 )",
    ", the rays for the fan @xmath2474 giving the toric model for @xmath795 are @xmath2475 for @xmath560 .",
    "note that @xmath2476 , see .",
    "now the statement concerning @xmath19 follows from lemma [ gmlemma ]  and lemma [ fgccthg2 ] .",
    "the additional statement in the @xmath56 case is clear from the definitions . for ( 2 )",
    ", one notes that the forward implication is given by ( 1 ) , while for the converse , if @xmath2477 , then @xmath2478 for some seed @xmath10 , and then @xmath510 is optimized for that seed .    [ osprop ] for the standard cluster algebra structure on @xmath2479 ( the affine cone over @xmath2449 in its plcker embedding ) every frozen variable has an optimized seed .    as was pointed out to us by lauren willams , for @xmath2449 , the initial seed in @xcite , figure 4.4 ,",
    "is optimized for one frozen variable ( the _ special _ upper right hand vertex for the initial quiver ) .",
    "the result follows from the cyclic symmetry of this cluster structure .",
    "[ osrem ] b. leclerc , and independently l. shen , gave us an explicit sequence of mutations that shows the proposition holds as well for the cluster structure of @xcite , @xcite on the maximal unipotent subgroup @xmath2480 , and the same argument applies to the fock - goncharov cluster structure on @xmath2481 , @xmath220 .",
    "the argument appears in @xcite .",
    "[ linindlemma ] let @xmath11 be a lattice and @xmath2482 a submonoid with @xmath2483 .",
    "for any subset @xmath2484 and collection of elements @xmath2485 such that @xmath2486 $ ] , the subset @xmath2487 $ ] is linearly independent over @xmath8 .",
    "suppose @xmath2488 for @xmath2489 all non - zero and @xmath2490 a finite set .",
    "let @xmath2491 be minimal with respect to the partial ordering on @xmath11 given by @xmath265 ( where @xmath2492 means @xmath2493 for some @xmath2494 ) .",
    "the coefficient of @xmath2495 in the sum , expressed in the basis of monomials , must be zero .",
    "but the minimality of @xmath2496 implies the monomial @xmath2495 does not appear in any of the @xmath2497 , @xmath2498 .",
    "thus the coefficient of @xmath2495 is just @xmath2499 , a contradiction .",
    "[ boundaryprop ] suppose a valuation @xmath2500 has an optimized seed . if @xmath2501 , then @xmath2502 for all @xmath908 with @xmath2503 .",
    "let @xmath74 be optimized for @xmath697 .",
    "let @xmath1336 be the strictly convex cone spanned by the exponents of the initial scattering monomials @xmath2504 .",
    "let @xmath2505 .",
    "take @xmath827 a basepoint in the positive chamber of @xmath378 . by definition @xmath2506 where @xmath2507 is a finite sum of monomials . by ( 1 ) of lemma [ opslem ] we have @xmath2508 , and thus by ( 2 ) of lemma [ lplemma ] , @xmath2509 .",
    "let @xmath51 be the minimum of @xmath2510 over all @xmath908 with @xmath2503 , and suppose @xmath2511 .",
    "since @xmath2512 , necessarily @xmath2513.\\ ] ] note this is the sum of all the monomial terms in @xmath2514 which have the maximal order of pole , @xmath2515 , along @xmath697 .",
    "this contradicts lemma [ linindlemma ] .",
    "we believe the assumption of an optimized seed is not necessary :    [ nosq ] the proposition holds for any @xmath2516 .    any finite set @xmath2517 of primitive elements gives a partial compactification ( defined canonically up to codimension two ) @xmath2518 , with the boundary divisors of this partial compactification in one - to - one correspondence with the elements of @xmath1589 ( this is true for any finite collection , @xmath1589 , of divisorial discrete valuations on the function field of a normal variety @xmath19 : there is always an open immersion @xmath2519 , with divisorial boundary @xmath2520 corresponding to @xmath1589 , and @xmath2519 is unique up to changes in codimension greater than or equal to two ) .",
    "we then define @xmath2521 and @xmath2522 the vector subspace with basis @xmath2523 .",
    "similarly we define @xmath2524 to be the subalgebra of @xmath2525 generated by those cluster variables that are regular ( generically ) along all @xmath2526 .",
    "[ spdef ] each choice of seed @xmath10 gives a pairing @xmath2527 which is just the dual pairing composed with the identifications @xmath2528    [ midocalem ]    1 .",
    "@xmath2522 is a subalgebra containing @xmath2524 . if @xmath2529 then @xmath2530 2 .",
    "assume each @xmath2531 has an optimized seed .",
    "then @xmath2532 if @xmath1785 then @xmath2533 .",
    "if each @xmath2531 has an optimized seed and @xmath10 is optimized for @xmath2526 , the piecewise linear function @xmath2534 is min - convex , and for all @xmath2535 , @xmath2536 where @xmath2537 is the global monomial on @xmath2079 corresponding to @xmath2538 ( which exists by lemma [ opslem ] ) .",
    "there are pairings @xmath2539 which are much more natural then definition [ spdef ] .",
    "indeed , @xmath2540 gives a canonical function @xmath2541 and , since @xmath2542 , a valuation on @xmath2543 .",
    "the analogous statements apply to @xmath2544 .",
    "so we could define a pairing by either @xmath2545 we conjecture these two pairings are equal .",
    "lemma [ midocalem ] , ( 3 ) , gives the result when one of @xmath2546 lies in the cluster complex .",
    "one can pose the same symmetry conjecture for mirror pairs of affine log cys ( with maximal boundary ) in general , the two - dimensional case having been shown in @xcite .",
    "suppose the symmetry conjecture holds , and furthermore @xmath2547 .",
    "then ( see the proof of lemma [ midocalem ] below ) the cone of cut out by the tropicalisation of the potential function is @xmath2548 if furthermore conjecture [ nosq ] holds and @xmath1785 , then @xmath180 gives a basis of @xmath2525 , canonically determined by the open set @xmath2549 ( together with its cluster structure , though we conjecture the basis is independent of the cluster structure ) .",
    "see corollary [ spcor ] .",
    "the subalgebra statement of ( 1 ) follows from the positivity ( both of structure constants and the laurent polynomials @xmath1810 ) just as in the proof of theorem [ goodalgebra ] .",
    "every cluster variable is a theta function , so the inclusion @xmath2550 is clear .",
    "now obviously if @xmath2529 then both are equal to @xmath86 .",
    "the intersection expression of ( 2 ) for the middle algebra follows from proposition [ boundaryprop ] .",
    "now obviously if @xmath1785 then @xmath2533 .    for ( 3 ) , we work with the scattering diagram @xmath378",
    ". then @xmath2538 is the @xmath41-vector of the global monomial @xmath2537 , with @xmath2551 , by lemma [ opslem ] . using @xmath2552",
    ", one sees that @xmath2553 is linear on @xmath2554 , so obviously min - convex in the sense of definition - lemma [ mcdef ] . since it is the tropicalisation of a global monomial it is also min - convex in the sense of definition [ imcdef ] , by proposition [ convcor ] .",
    "now fix a base point @xmath2555 , and consider @xmath1810 , @xmath2556 . by lemma [ opslem ] , ( 1 ) , each scattering function is regular along the boundary divisor corresponding to @xmath2557 . by definition @xmath2558 , where @xmath2559 is a linear combination of monomials @xmath2560 with @xmath2495 regular along the boundary divisor corresponding to @xmath697",
    "thus @xmath2561 by lemma [ lplemma ] .",
    "since @xmath2537 is the monomial @xmath2562 on @xmath2563 , @xmath2564 this completes the proof of ( 3 ) .",
    "recall a choice of seed gives a partial compactification @xmath1125 and a map @xmath2565 .",
    "the boundary @xmath2566 has @xmath510 irreducible components , primitive elements of @xmath2567 , the vanishing loci of the @xmath1115 .",
    "[ gsoplem ] the seed @xmath10 is optimized for each of the boundary divisors of @xmath1087 .    if @xmath787 , the corresponding seed for @xmath56 is @xmath2568 and the boundary divisors correspond to the @xmath2569 .",
    "but @xmath2570 hence the claim .",
    "we adjust slightly the notation @xmath2571 of the previous subsection to this case :    let @xmath2572 be the subset of points @xmath908 such that @xmath46 remains regular on the partial compactification @xmath2573 , i.e. , such that @xmath2574    [ productlem ] under the identification @xmath2575 , we have @xmath2576 and @xmath2577 .    @xmath61 is invariant under translation by @xmath2578 , and thus @xmath2576 .    by lemma [ clem ]",
    "we construct @xmath2579 from the atlas of toric compactifications @xmath2580 parameterized by the cluster chambers in @xmath792 .",
    "now take @xmath2556 , and consider @xmath1810 for some basepoint in the cluster complex .",
    "this is a positive sum of monomials , so it will be regular on the boundary of @xmath2579 iff each summand is .",
    "one summand is @xmath1374 , so if @xmath46 is regular on @xmath2581 then @xmath2582 .",
    "thus @xmath2583 . but",
    "now suppose @xmath2584 , some @xmath2585 and @xmath2586 .",
    "then @xmath1374 is regular on the boundary .",
    "since the initial scattering monomials are @xmath1397 , any bend in a broken line multiplies the decorating monomial by a monomial regular on the boundary .",
    "thus @xmath2587 .",
    "this completes the proof .",
    "we define @xmath2588    recall @xmath2589 are the cluster and upper cluster algebras with principal coefficients respectively , with the frozen variables inverted .",
    "on the other hand , @xmath2590 are the cluster and upper cluster algebras with principal coefficients respectively , with the frozen variables not inverted . by lemma [ midocalem ] , @xmath2591 is a subalgebra , and @xmath2592 .    by lemma [ midocalem ] and lemma [ gsoplem ]",
    ", we have    [ improp ] if @xmath1785 then @xmath2593 .",
    "here is another sufficient condition for the full fock - goncharov conjecture to hold , which will prove immediately useful below :    [ scprop ] suppose there is a min - convex function @xmath2594 , such that @xmath2595 implies @xmath1618 , and such that @xmath2595 for some @xmath123 .",
    "suppose also that there is a bounded positive polytope in @xmath1424 ( which holds for example if @xmath2079 has enough global monomials )",
    ". then @xmath2596 .",
    "take any @xmath2597 and @xmath1557 with @xmath2598 .",
    "then consider any @xmath2434 appearing in @xmath2599 , for @xmath2600 . by lemma [ diplem1 ] , @xmath2601 for @xmath860 sufficiently large .",
    "in particular @xmath2602 , so for each @xmath2434 that appears , @xmath1615 is a universal positive laurent polynomial , for any basepoint @xmath827 in the cluster complex .",
    "the existence of the bounded positive polytope implies @xmath2599 is a finite sum of @xmath2434 .",
    "thus the product @xmath2603 is also a universal positive laurent polynomial , and thus by the positivity of the scattering diagram , @xmath1617 must be a finite positive laurent polynomial .",
    "thus @xmath1618 .",
    "if there are frozen variables , there is a canonical candidate for @xmath153 in the proposition .",
    "the cluster algebras related to double bruhat cells are of this sort , and we hope that this will give a way of completing the proof of the full fock - goncharov conjecture in these cases .    when we have frozen variables , this gives a partial compactification @xmath142 . in this case , let us change notation slightly and write a seed @xmath10 as @xmath2604 with @xmath2605 and @xmath2606 , and the @xmath1146 are frozen . in this case",
    "the elements @xmath2607 give @xmath2608 canonical boundary divisors for a partial compactification @xmath142 , and an analogous @xmath2609 .",
    "an atlas for @xmath2609 is given by gluing the partial compactification @xmath2610 , where @xmath2474 is the fan consisting of the rays @xmath2611 .",
    "[ spcor ] assume that for each @xmath2612 , @xmath2613 has an optimized seed , @xmath2614 .",
    "let @xmath2615 be the _ ( landau - ginzburg ) potential _ , the sum of the corresponding global monomials on @xmath2079 given by lemma [ opslem ] .",
    "then :    1 .",
    "the piecewise linear function @xmath2616 is min - convex and @xmath2617 is a positive polytope .",
    "@xmath180 has the alternative description : @xmath2618 3 .",
    "the set @xmath2619 parameterizes a canonical basis of @xmath214    this is immediate from lemma [ midocalem ] .",
    "[ ffgcor ] assume we have enough global monomials on @xmath186 , and every frozen variable has an optimized seed .",
    "let @xmath223 and @xmath180 be as in corollary [ spcor ] . if for some seed @xmath10 , @xmath180 is contained in the convex hull @xmath2620 of @xmath61 ( which itself contains the integral points of the cluster complex @xmath110 ) then @xmath168 , @xmath216 is finitely generated , and the integer points @xmath2621 parameterize a canonical basis of @xmath2622 .    by definition @xmath2623 , and @xmath211 is min - convex by lemma [ opslem ] .",
    "thus @xmath2624 by proposition [ scprop ] .",
    "now the result follows from the inclusions @xmath2625 of corollary [ markscor ]    the corollary applies in important representation theoretic examples :    the hyptheses of theorem [ spth ] are proven in @xcite , using proposition [ scprop ] applied to the tropicalisation of our potential @xmath223 .",
    "the agreement of @xmath223 with the berenstein - kazhdan potential is given in @xcite .",
    "theorem [ spth ] is stated for @xmath56 .",
    "but in this case it is shown in @xcite that the exchange matrix has full rank , i.e. the equivalent conditions of lemma [ taprinlem ] hold .",
    "now the results for @xmath56 imply the analogous result for @xmath19 using @xmath1634 equivariance , as in the proof of ( 7 ) of theorem [ mainthax ] .",
    "the @xmath100 action is identified with the action of @xmath2626 on @xmath795 , the various statements about @xmath100-weights now follow immediately from the equivariance , proposition [ thetaeigenfunctions ] .",
    "we check the conditions of theorem [ spth ] : the existence of an optimized seed is proven in @xcite , following suggestions of l. shen and b. leclerc .",
    "the cluster variety has large cluster complex ( definition [ lccdef ] ) by @xcite , theorems 1.12 and 1.17 .",
    "this gives the hypotheses of theorem [ spth ] , ( 3 ) .",
    "the equality of our @xmath223 with the goncharov - shen potential is given in @xcite .",
    "it is shown in @xcite that the exchange matrix has full rank , in the sense of lemma [ taprinlem ] . now",
    "the @xmath56 results imply the analogous statements for @xmath56 as in the proof directly above .",
    "the @xmath229 action is identified with the @xmath2626 action , which gives the weight statements as above .",
    "we first review basic cluster variety notation as adopted in @xcite .",
    "none of this is original to @xcite , but we follow that source for consistency of notation .    as in @xcite ,",
    " 2 , _ fixed data _ @xmath239 means    * a lattice @xmath240 with a skew - symmetric bilinear form @xmath2627 * an _ unfrozen sublattice _",
    "@xmath2628 , a saturated sublattice of @xmath240 .",
    "if @xmath2629 , we say the fixed data has no frozen variables .",
    "* an index set @xmath844 with @xmath248 and a subset @xmath249 with @xmath250 .",
    "* positive integers @xmath251 for @xmath252 with greatest common divisor @xmath616 . * a sublattice @xmath2630 of finite index such that @xmath2631 , @xmath2632 .",
    "* @xmath241 , @xmath246 .",
    "here we modify the definition slightly , and include in the _ fixed data _",
    "@xmath2633 $ ] a mutation class of seed .",
    "recall a seed @xmath74 is a basis of @xmath240 satisfying certain properties , see @xcite ,  2 , for the precise definitions , including that of mutation .",
    "in particular , we write @xmath1099 for the dual basis and @xmath1229 . we write @xmath2634 we shall also assume that if @xmath263 , then the linear functional @xmath75 is non - zero .",
    "( if this happens , then one can view @xmath1232 as frozen . )",
    "we have two natural maps defined by @xmath798 : @xmath2635 we also choose a map @xmath2636 such that ( a ) @xmath2276 and ( b ) the composed map @xmath2637 agrees with @xmath2638 . different choices of @xmath2265 differ by a choice of map @xmath2639 .",
    "further , if there are no frozen variables , i.e. , @xmath2640 , then @xmath2641 is canonically defined .",
    "we also define @xmath2642    following our conventions in @xcite , let @xmath695 be the infinite oriented rooted tree with @xmath2643 outgoing edges from each vertex , labelled by the elements of @xmath2644 .",
    "let @xmath697 be the root of the tree .",
    "attach some choice of initial seed @xmath2645 $ ] to the vertex @xmath697 .",
    "( we write @xmath696 if we want to record this choice of initial seed . )",
    "now each simple path starting at @xmath697 determines a sequence of mutations , just mutating at the label attached to the edge . in this way we attach a seed to each vertex of @xmath695 .",
    "we write the seed attached to a vertex @xmath153 as @xmath1235 , and write @xmath2646 etc .  for the corresponding tori .",
    "mutations define birational maps between these tori , and the associated fock - goncharov @xmath111 , @xmath987 cluster varieties are defined by @xmath2647 this parameterization of torus charts is very redundant , with infinitely many copies of the same chart appearing .",
    "in particular , given a vertex @xmath153 of @xmath695 , one can consider the subtree @xmath2648 rooted at @xmath153 , with initial seed @xmath1235 .",
    "this tree can similarly be used to define @xmath2649 , and the obvious inclusion between these two versions of @xmath2649 is in fact an isomorphism , as can be easily checked .    as one expects the mirror of a variety obtained by gluing charts of the form @xmath2650 to be obtained by gluing charts of the form @xmath1076",
    ", the mirror of @xmath19 is not @xmath27 , as the latter is obtained by gluing charts of the form @xmath722 . to get the correct mirrors of @xmath19 and @xmath27 , one follows @xcite in defining the _ langlands dual _",
    "cluster varieties .",
    "this is done by , given fixed data @xmath239 , defining fixed data @xmath2651 to be the fixed data : @xmath2652 where @xmath2653 the lattice , with its finite index sublattice , is @xmath2654 and the @xmath2655-valued skew - symmetric form on @xmath2656 is @xmath2657    for each @xmath2658 $ ] , we define @xmath2659 one checks easily that @xmath2660 gives a bijection between @xmath2633 $ ] and @xmath2661 $ ] .",
    "note that for skew - symmetric cluster algebras , i.e. , when all the multipliers @xmath2662 , langlands duality is the identity , @xmath2663 .",
    "[ fgddef ] we write @xmath2664 and @xmath2665 .    note in the skew - symmetric case , that @xmath2666 .",
    "one observes the elementary    given fixed data @xmath239 , the double langlands dual data @xmath2667 is canonically isomorphic to the data @xmath239 via the map @xmath2668 given by @xmath2669 .",
    "we recall briefly the construction of principal fixed data from @xcite , construction 2.11 . for fixed data @xmath239 , the data for the cluster variety with principal coefficients @xmath943",
    "is defined by :    * @xmath2670 with the skew - symmetric bilinear form @xmath2671 * @xmath2672 * the sublattice @xmath2673 is @xmath2674 . *",
    "the index set @xmath844 is now the disjoint union of two copies of @xmath844 , with the @xmath251 taken to be as in @xmath239 .",
    "the set of unfrozen indices @xmath2644 is just the original @xmath2644 thought of as a subset of the first copy of @xmath844 . * given an initial seed @xmath787 , we define @xmath2675 we then take the mutation class @xmath2676 $ ] .    note",
    "that @xmath2676 $ ] depends on the choice of @xmath10 : it is not true that if @xmath609 is obtained by mutation from @xmath10 then @xmath2677 is obtained from the same set of mutations applied to @xmath1086",
    ". nevertheless , the cluster varieties @xmath2678 are defined independently of the seed @xmath10 .",
    "this is a very important point , which we shall revisit in remark [ initialseedindremark ] .",
    "the following summarizes all of the important relationships between the various varieties which will be made use of in this paper .",
    "[ ldpprop ] giving fixed data @xmath239 , we have :    1 .",
    "there is a commutative diagram where the dotted arrows are only present if there are no frozen variables ( i.e. , @xmath2629 ) : @xmath2679\\ar[d]&{\\mathcal a}_{{\\operatorname{prin}}}\\ar@/^24pt/[rr]^p\\ar[r]^{\\tilde p}\\ar[d]_{\\pi } & \\cx\\ar[d]_{\\lambda}&\\cx_{{\\operatorname{prin}}}\\ar[l]_{\\rho}\\ar[d]_w&{\\mathcal a}\\ar[l]_{\\xi}\\ar[d]\\\\ t\\ar[r]&t_m\\ar@{-->}[r]&t_{k^*}&\\ar@{-->}[l]t_m&\\ar[l ] e } \\ ] ] with @xmath2680 any point , @xmath2681 the identity , and with the left- and right - hand squares cartesian and @xmath123 an isomorphism , canonical if there are no frozen variables .",
    "2 .   there are torus actions @xmath2682 here @xmath2683 is the kernel of the map @xmath2684 furthermore @xmath1076 and @xmath2685 act on @xmath2357 so that the map @xmath2686 is @xmath1076- and @xmath2685-equivariant .",
    "the map @xmath2687 is a @xmath1076-torsor .",
    "there is a map @xmath2688 such that the map @xmath1707 is also compatible with the actions of these two tori on @xmath56 and @xmath27 respectively , so that @xmath2689 is a @xmath2685-torsor .",
    "@xmath2690 and @xmath2691 are isomorphic data , so we can define @xmath2692 4 .",
    "there is a commutative diagram @xmath2693\\ar[d]&\\cx_{{\\operatorname{prin}}}^{\\vee}\\ar@/^24pt/[rr]^p\\ar[r]^{\\tilde p } \\ar[d]_{\\pi } & { \\mathcal a}^{\\vee}\\ar[d]_{\\lambda}&{\\mathcal a}^{\\vee}_{{\\operatorname{prin } } } \\ar[l]_{\\rho}\\ar[d]_w&\\cx^{\\vee}\\ar[l]_{\\xi}\\ar[d]\\\\ e\\ar[r]&t_{m^{\\circ}}\\ar@{-->}[r]&t_{(k^{\\circ})^*}&\\ar@{-->}[l]t_{m^{\\circ}}&\\ar[l ] e } \\ ] ]    we consider the diagram of ( 1 ) .",
    "the maps with names are given as follows on cocharacter lattices : @xmath2694 note @xmath2695 is the transpose of the inclusion @xmath2696 . in the case",
    "there are no frozen variables , the two dotted horizontal lines are just given on cocharacter lattices by @xmath2695 again .",
    "one checks commutativity from these formulas at the level of individual tori , and one checks the maps are compatible with mutations .",
    "note the left - hand diagram defines @xmath78 , see @xcite , definition 2.12 .",
    "the statements that @xmath1707 , @xmath1110 and @xmath2695 are compatible with mutations are in  2 of @xcite , as well as the commutativity of the second square in case of no frozen variables .",
    "it is clear that @xmath123 induces an isomorphism of lattices , hence an isomorphism of the relevant tori .",
    "this isomorphism is canonical in the no frozen variable case because @xmath2265 is well - defined in this case .",
    "the fact the right - hand square is cartesian follows from the fact that @xmath2697 .",
    "note the signs in the definition of @xmath1686 are necessary to be compatible with mutations .",
    "this gives ( 1 ) .    for ( 2 ) ,",
    "the first action is specified on the level of cocharacter lattices by @xmath2698 while the last three are given by the inclusions @xmath2699 one checks easily that the induced actions are compatible with mutations .",
    "the action of @xmath1076 and @xmath2685 on @xmath2357 are induced by the maps @xmath2700 and @xmath2701 respectively , in order to achieve the desired equivariance .",
    "the map @xmath2702 is given by @xmath2703 the other statements are easily checked .    for ( 3 ) ,",
    "from the definitions , the lattices playing the role of @xmath2630 are : @xmath2704 these are isomorphic under the map @xmath2705 .",
    "furthermore , the pairings in the two cases are given by @xmath2706 respectively .",
    "the isomorphism given preserves the pairings , hence the isomorphism .",
    "\\(4 ) is the same as ( 1 ) , but for the langlands dual data @xmath2003 . for reference ,",
    "the maps are given as follows : @xmath2707    whenever the lattice @xmath2708 appears in dealing with the langlands dual data , we will always identify this with @xmath240 in the obvious way .",
    "simple linear algebra gives :    [ eglem ] the choice of the map @xmath2265 gives an inclusion @xmath2709 ( see proposition [ ldpprop ] , ( 2 ) ) given by @xmath2710 .",
    "we also have @xmath2275 ( a sublattice of @xmath1444 ) included in @xmath2683 via @xmath2711 .",
    "these inclusions induce an isomorphism @xmath2712 .",
    "[ taprinlem ] the map @xmath2713 induced by the composition of the inclusion and projection @xmath2714 is a split surjection if and only if the map @xmath2715 is surjective .",
    "this holds if and only if in some seed @xmath2716 , the @xmath2717 matrix with entries for @xmath263 , @xmath2718 , @xmath2719 gives a surjective map @xmath2720 . in this case",
    "@xmath21 is isomorphic to the trivial bundle @xmath2721 .",
    "for the first statement , note using lemma [ eglem ] that the map @xmath2722 is surjective if and only if the map @xmath2723 given by @xmath2724 is surjective , and this is the case if and only if the induced map @xmath2725 is surjective .",
    "the given matrix is the matrix for @xmath2726 in the given bases , so the second equivalence is clear .",
    "the final statement follows from the @xmath1782-equivariance of @xmath1110 ( the trivialization then comes by choosing a splitting of @xmath2727 ) .",
    "[ initialseedindremark ] in general , a seed is defined to be a basis of the lattice @xmath240 ( or @xmath1144 ) , but to define the seed mutations @xcite , ( 2.2 ) and the union of tori , all one needs are elements @xmath2728 , @xmath76 ( the definitions as given make sense even if the @xmath1232 are dependent , or fail to span ) .",
    "if one makes the construction in this greater generality , the characters @xmath1273 on @xmath2729 will not be independent ( if the @xmath1232 are not ) and unless we take a full basis , we can not define the cluster variables @xmath2730 on @xmath2731 , as the @xmath2250 are defined as the dual basis to the basis @xmath2732 for @xmath2733 .    in the case of the principal data , given a seed @xmath787 for @xmath239 , we get a seed @xmath2734 in this modified sense for the data @xmath943 .",
    "we also write this seed as @xmath10 . on the other hand , in @xcite , the seed @xmath1086 for @xmath943",
    "is defined in the more traditional sense to be the basis @xmath2735 .",
    "it is not the case that if @xmath609 is obtained from @xmath10 via a sequence of mutations , then @xmath2677 is obtained from @xmath1086 by the same sequence of mutations .",
    "in particular , the set @xmath2676 $ ] of seeds mutation equivalent to @xmath1086 depends not just on the mutation equivalence class of @xmath10 , but on the original seed @xmath10 .",
    "however , using the seed @xmath10 as a seed for @xmath943 in this modified sense , we can build @xmath1170 , and this depends only on the mutation class of @xmath10 .",
    "thus @xmath56 does not depend on the initial choice of seed , but only on its mutation equivalence class .",
    "however , as we shall now see , the choice of initial seed does give a partial compactification .",
    "this is a more general phenomenon when there are frozen variables .",
    "[ fvss ] when the cluster data @xmath239 includes frozen variables , @xmath19 comes with a canonical partial compactification @xmath142 , given by partially compactifying each torus chart via @xmath2736 , where for @xmath2114 , @xmath2737 .",
    "thus the dual cone @xmath2738 is cut out by the half - spaces @xmath2739 , @xmath1066 .",
    "note that the monomials @xmath2730 , @xmath1066 are invariant under mutation . these give a canonical map @xmath2740 , where @xmath2741 is the number of unfrozen variables .",
    "note that the basis elements @xmath1232 for @xmath2742 , though they have frozen indices , can change under mutation .",
    "what is invariant is the associated boundary divisor with valuation given by @xmath2743 .",
    "these are the boundary divisors of @xmath142 .",
    "we remark that like @xmath19 , @xmath196 is also separated , with the argument given in @xcite , theorem 3.14 working equally well for @xmath196 .",
    "here is another way of seeing the same thing . given any cluster variety @xmath2744 and a single fan @xmath2745 for a toric partial compactification @xmath2746 for some @xmath2747 , there is a canonical way to build a partial compactification @xmath2748 we let @xmath2749 and @xmath2750 , where @xmath2751 is the birational map given by the composition @xmath2752 and @xmath2753 is the geometric tropicalisation , see  [ tropsec ] .",
    "[ aprinremark ] we now return to the discussion of @xmath56 .",
    "note that the frozen variables for @xmath56 are indexed by @xmath2754 in the first copy of @xmath844 , along with all indices in the second copy of @xmath844 .",
    "however , we can apply construction [ fvss ] taking only the second copy of @xmath844 as the set of frozen indices , with the initial choice of seed @xmath10 determining a partial compactification of @xmath56 .",
    "in this case , we indicate the partial compactification by @xmath1087 .",
    "it is important to keep in mind the dependence on @xmath10 .",
    "fixing @xmath10 fixes @xmath1086 , and hence cluster variables @xmath2330 , @xmath2331 .",
    "the variables @xmath1115 can then take the value @xmath81 in the compactification .",
    "in particular , we obtain an extension of @xmath21 to @xmath1074 , @xmath1273 pulling back to @xmath2331 .",
    "note that the seeds in @xmath2633 $ ] and @xmath2755 $ ] are in one - to - one correspondence . given any seed @xmath2756",
    "$ ] , and seed @xmath2757 $ ] obtained via the same sequence of mutations we have @xmath2758 for some @xmath2759 .",
    "these two seeds give rise to coordinates @xmath1240 on the chart of @xmath19 indexed by @xmath609 and coordinates @xmath2760 on the chart of @xmath56 indexed by @xmath2677 . as @xmath19 is the fibre of @xmath1110 over the point of @xmath1136 with all coordinates @xmath616 , the coordinate @xmath1240 on the chart of @xmath56 restricts to the coordinate @xmath1240 on the chart of @xmath19 .",
    "this gives a one - to - one correspondence between cluster variables on @xmath19 and @xmath1174-type cluster variables on @xmath56 .",
    "to summarize :    [ cvextrem ] the cluster variety @xmath2761 depends only on the mutation class @xmath2633 $ ] .",
    "but the choice of a seed @xmath10 determines :    1 .   a partial compactification @xmath2762 ; 2 .   the canonical extension of each cluster variable on any chart of @xmath19 to a cluster variable on the corresponding chart of @xmath2763 .",
    "this appendix is devoted to giving proofs of theorems [ kslemma2 ] and [ scatdiagpositive ] .",
    "the proof of [ kslemma2 ] is essentially given in @xcite , but the special case here is considerably simpler than the general case covered there , and it is likely to be very difficult for the reader to extract the needed results from @xcite .",
    "in addition , the details of the proof of [ kslemma2 ] will be helpful in proving theorem [ scatdiagpositive ] .",
    "[ kslemalg ] there is a simple order by order algorithm , introduced in @xcite in the two - dimensional case and in @xcite in the higher dimensional case , for producing the diagram @xmath2764 of theorem [ kslemma ] , which we will describe shortly after a bit of preparation .",
    "this is useful both from a computational point of view and because a more complicated version of this will be necessary in the remainder of this appendix .",
    "we first introduce some additional terminology . for any scattering diagram @xmath328 for @xmath2765 , and any @xmath1552 we let @xmath2766 be the ( by definition , finite ) set of @xmath320 with @xmath331 non - trivial in @xmath332 . a scattering diagram for @xmath319",
    ", @xmath283 induces a scattering diagram for @xmath319 , @xmath338 in the obvious way , viewing @xmath2767 for a wall @xmath320 .",
    "we say two scattering diagrams @xmath328 , @xmath363 are equivalent to order @xmath460 if they are equivalent as scattering diagrams for @xmath338 .",
    "[ pjdef ] let @xmath491 be a joint of the scattering diagram @xmath2768 .",
    "either every wall containing @xmath491 has direction tangent to @xmath491 ( where the direction of a wall contained in @xmath495 is @xmath2769 ) , or every wall containing @xmath491 has direction _ not _ tangent to @xmath491 . in the first case we call the joint _",
    "parallel _ and in the second case _ perpendicular_.",
    "suppose @xmath491 spans the subspace @xmath2770 .",
    "then the direction of any wall containing @xmath491 is of the form @xmath2771 for some @xmath2772 .",
    "if this is tangent to @xmath491 , then @xmath2773 for @xmath514 , and hence @xmath2774 . from this",
    "it follows that @xmath2775 for all @xmath2776 , and hence the direction of any wall containing @xmath491 is tangent to @xmath491 .",
    "a joint @xmath491 is a codimension two convex rational polyhedral cone .",
    "let @xmath2777 be the set of integral tangent vectors to @xmath491 .",
    "this is a saturated sublattice of @xmath113 .",
    "then we set @xmath2778 this is closed under lie bracket . if @xmath491 is a parallel joint , then @xmath2779 is abelian , since if @xmath2780 with @xmath2781 , @xmath2782 , so @xmath516=0 $ ] .",
    "we denote by @xmath2783 the corresponding group .",
    "we will build a sequence of finite scattering diagrams @xmath2784 , with the property that @xmath2785 is equivalent to @xmath328 to order @xmath460 .",
    "taking @xmath2786 , we obtain @xmath2787 equivalent to @xmath328 .",
    "let @xmath2788 denote the subset of @xmath940 consisting of walls which are non - trivial in @xmath332 .",
    "we start with @xmath2789 if @xmath491 is a joint of a finite scattering diagram , we write @xmath490 for a simple loop around @xmath491 small enough so that it only intersects walls containing @xmath491 . in particular , for each joint @xmath491 of @xmath2790 , @xmath2791 .",
    "indeed , @xmath2792 is abelian and by the form given for @xmath940 in the statement of theorem [ kslemma ] , all walls containing @xmath491 are hyperplanes . thus the automorphism associated to crossing each wall and its inverse occurs once in @xmath2793 , and hence cancel .",
    "now suppose we have constructed @xmath2794 . for every perpendicular joint @xmath491 of @xmath2794",
    ", we can write uniquely in @xmath2795 @xmath2796 where @xmath2797 and @xmath2798 . such an expression holds because all wall - crossing automorphisms for walls containing @xmath491 lie in @xmath2799 , so that @xmath2800 can be viewed as an element of @xmath2795 .",
    "furthermore , by the inductive hypothesis ,",
    "this element is trivial in @xmath2801 .",
    "because @xmath491 is perpendicular , we never have @xmath2802 .",
    "now define @xmath2803:=\\{\\big({\\mathfrak{j}}-{\\mathbb{r}}_{\\ge 0}p^*(\\alpha),\\exp(\\pm g_{\\alpha})\\big ) \\,|\\ , \\alpha \\in s\\},\\ ] ] where the sign is chosen so that the contribution to crossing the wall indexed by @xmath59 in @xmath2804}$ ] is @xmath2805 .",
    "note the latter element is central in @xmath2806 .",
    "thus @xmath2804}={{\\mathfrak{p}}}_{\\gamma_{{\\mathfrak{j } } } , \\tilde{\\mathfrak{d}}_k}^{-1}$ ] and @xmath2807 } = { { \\mathfrak{p}}}_{\\gamma_{{\\mathfrak{j}}},\\tilde{\\mathfrak{d}}_k}\\circ{{\\mathfrak{p}}}_{\\gamma_{{\\mathfrak{j}}},{\\mathfrak{d}}[{\\mathfrak{j } } ] } = { \\operatorname{id}}\\ ] ] in @xmath2806 .",
    "consider a perpendicular joint @xmath491 of @xmath2809 . if @xmath491 is contained in a joint @xmath2811 of @xmath2794",
    ", @xmath2811 is the unique such joint , and we constructed @xmath2812 $ ] above . if @xmath491 is not contained in a joint of @xmath2794 , we define @xmath2812 $ ] to be the empty set .",
    "there are three types of walls @xmath613 in @xmath2809 containing @xmath491 :    1 .",
    "@xmath2813 $ ] .",
    "2 .   @xmath2814)$ ] , but @xmath2815 .",
    "this type of wall does not contribute to @xmath2816 , as the associated automorphism is central in @xmath2806 , and in addition this wall contributes twice to @xmath2817 , with the two contributions inverse to each other .",
    "3 .   @xmath2818)$ ] and @xmath2819 . since each added wall is of the form @xmath2820 for some joint @xmath2821 of @xmath2794 , where @xmath866 is the direction of the wall , the direction of the wall is parallel to @xmath491 , contradicting @xmath491 being a perpendicular joint .",
    "thus this does not occur .          1",
    ".   @xmath328 and @xmath2787 are equivalent to order @xmath460 .",
    "@xmath328 is consistent to order @xmath2810 .",
    "@xmath2824 is the identity for every perpendicular joint @xmath491 of @xmath2787 to order @xmath2810 .",
    "4 .   @xmath328 and @xmath2787 have the same set of incoming walls .",
    "we work with scattering diagrams in the group @xmath2806 .",
    "there is a finite scattering diagram @xmath363 with the following properties : ( 1 ) @xmath2825 is equivalent to @xmath328 ; ( 2 ) @xmath363 consists only of walls trivial to order @xmath460 but non - trivial to order @xmath2810 .",
    "indeed , @xmath363 can be chosen so that @xmath2826 for any general point @xmath367 in any @xmath495 , @xmath463 .",
    "note that @xmath363 is finite because the same is true of @xmath328 and @xmath2787 .",
    "thus to show @xmath328 and @xmath2787 are equivalent , it is sufficient to show that @xmath363 is equivalent to the empty scattering diagram .",
    "to do so , replace @xmath363 with an equivalent scattering diagram with minimal support .",
    "let @xmath491 be a perpendicular joint of @xmath2827 . then in @xmath2806 , @xmath2828 , since @xmath2829 and automorphisms in @xmath363 are central in @xmath2806",
    "however , this implies that for each @xmath291 with @xmath2830 and @xmath2831 two points in @xmath357 on either side of @xmath491 , the automorphisms associated with crossing @xmath357 in @xmath363 through either @xmath367 or @xmath492 must be the same in order for these two automorphisms to cancel in @xmath2832 . from this",
    "it is easy to see that @xmath363 is equivalent to a scattering diagram such that for every wall @xmath2833 , each facet of @xmath613 is a parallel joint of @xmath363 , i.e. , the direction @xmath2834 is tangent to every facet of @xmath613 .",
    "however , such a wall must be incoming , contradicting , if @xmath363 is non - empty , the fact that @xmath2787 and @xmath328 have the same set of incoming walls by assumption .",
    "we fix the notation of theorem [ kslemma2 ] , and in addition make use of the notation @xmath2835 of definition [ halfspacedef ] and @xmath605 as in the map associated to crossing the slab @xmath2836 from @xmath673 to @xmath674 .",
    "we define the lie algebra @xmath2837 and set @xmath2838 , @xmath2839 as usual , with the degree function @xmath2840 given by @xmath2841 .",
    "we note that @xmath2842 acts on @xmath604}$ ] as usual , and if @xmath328 is a scattering diagram in the sense of definition [ escdef ] , then all automorphisms associated to crossing walls ( rather than slabs ) lie in @xmath2842 .    besides the lie algebra @xmath2843",
    "just defined , recall we also have @xmath2844 as usual .",
    "we have the degree map @xmath2845 given by @xmath2846 , but we also have @xmath2847 given by the restriction of @xmath2840 .",
    "we use the notation @xmath2848 and @xmath2849 to distinguish between the two possibilities for @xmath2850 determined by the two choices of degree map . then @xmath2851 and we define @xmath2852 . note that @xmath2853 both act faithfully on @xmath268}$ ] , where the completion is respect to the maximal monomial ideal @xmath2854 , and @xmath2855 act faithfully on @xmath604}$ ] .",
    "there are inclusions @xmath2856 and @xmath2857 .",
    "only the second inclusion holds at finite order , i.e. , @xmath2858 .    for each of the above lie algebras @xmath337 , we can now also talk about scattering diagrams for @xmath337 using definitions [ walldef ] and [ ksscatdiagdef ] , replacing @xmath283 with @xmath337 in those definitions .",
    "we need to understand the interaction between elements of @xmath93 and the automorphism associated to crossing the slab ( see lemma 2.15 of @xcite ) .",
    "recall the notation @xmath2799 from construction [ kslemalg ] ; this is applied also to the various assorted groups above .",
    "[ conjugationlemma ] let @xmath2865 ( resp .",
    "@xmath319 ) and let @xmath2866 ( resp .",
    "@xmath2867 ) be an automorphism of the form @xmath2868 for @xmath2869 .",
    "let @xmath2870 . if @xmath2871 , then @xmath2872 while if @xmath2873 , then @xmath2874 here , we view @xmath2875 or @xmath2876 as automorphisms of @xmath604}_{1+z^{v_k}}$ ] , and @xmath2842 or @xmath2861 as subgroups of the group of automorphisms of this ring .",
    "let us prove the first statement , the second being similar .",
    "it is enough to check that @xmath2877 but , with @xmath2878 , @xmath2879 noting that @xmath2880 , and in addition @xmath2881 , we see that as a derivation , writing @xmath2882 , @xmath2883 of course @xmath2884 by definition of @xmath491 , so the derivation @xmath2885 lives in @xmath2886 ( resp .",
    "@xmath2887 ) .      _ step i. strategy of the proof .",
    "_ we will first construct @xmath624 using essentially the same algorithm as the one given in construction [ kslemalg ] , but working with the group @xmath2861 .",
    "the algorithm is slightly more complex because of the slab , and needs to be carried out in two steps . to show that the diagram constructed is consistent at each step , we compare it with the scattering diagram @xmath378 for the group @xmath93 which we know exists , using @xmath2888 as an intermediary group . because @xmath2889 , we obtain a consistent scattering diagram for @xmath2842 and @xmath93 . while @xmath624 is equivalent to @xmath378 as a scattering diagram for @xmath93 by construction , this does not show uniqueness of @xmath624 , as there may be a different choice with wall crossing automorphisms in @xmath2890 but not in @xmath2861 , so it can not be compared with @xmath378 .",
    "thus , the final step involves showing uniqueness directly for the group @xmath2842 , again as part of the inductive proof .",
    "we will proceed by induction on @xmath2073 , constructing for each @xmath2073 a finite scattering diagram @xmath2891 for @xmath2861 containing @xmath601 such that the following induction hypotheses hold :    1 .   for every joint @xmath491 of @xmath2891 ,",
    "there is a simple loop @xmath490 around @xmath491 small enough so that it only intersects walls and slabs containing @xmath491 and such that @xmath2892 , as an automorphism of @xmath604}_{1+z^{v_k}}$ ] , lies in @xmath2861 and is trivial in @xmath2888 , or equivalently , by the inclusion @xmath2893 , trivial in @xmath2894 .",
    "2 .   if @xmath2895 is a scattering diagram for @xmath2842 which has the same incoming walls as @xmath2891 and satisfies ( 1 ) ( with @xmath2861 replaced by @xmath2842 everywhere ) , then @xmath2895 is equivalent to @xmath2891 in @xmath2894",
    ".        _ step iii . from @xmath2891 to @xmath2899 : adding walls associated to joints not contained in @xmath626 .",
    "_ now assume we have found @xmath2900 satisfying the induction hypotheses .",
    "we need to add a finite number of walls to get @xmath2899 .",
    "we will carry out the construction of @xmath2899 in two steps , following construction [ kslemalg ] .",
    "first , let @xmath491 be a perpendicular joint of @xmath2891 with @xmath2901 .",
    "let @xmath2777 be the set of integral tangent vectors to @xmath491 .",
    "if @xmath490 is a simple loop around @xmath491 small enough so that it only intersects walls containing @xmath491 , we note that every wall - crossing automorphism @xmath2902 contributing to @xmath2903 lies in @xmath2860 .",
    "thus as in , in @xmath2904 we can write @xmath2905 with @xmath2906 , and @xmath2907 with @xmath2908 as @xmath2892 is the identity in @xmath2888 by the induction hypothesis . finally , @xmath2909 because the joint is perpendicular .",
    "let @xmath2803:=\\{({\\mathfrak{j}}-{\\mathbb{r}}_{\\ge 0}p^*(n_i),(1+z^{p^*(n_i)})^{\\pm c_i } ) \\,|\\,i=1,\\ldots , s \\}.\\ ] ] here @xmath2910 makes sense as a power series .",
    "the sign is chosen in each wall so that its contribution to @xmath2804}$ ] is @xmath2911 to @xmath2912-order @xmath2913 .",
    "_ step iv . from @xmath2891 to @xmath2899 : adding walls associated to joints contained in @xmath626 .",
    "_ if we did nt have a slab , @xmath2895 constructed above would now do the job as in the proof of lemma [ ksalglemma ] .",
    "however , the elements of @xmath2861 trivial in @xmath2888 do not commute with @xmath605 to order @xmath2913 as automorphisms of @xmath604}_{1+z^{v_k}}$ ] in any reasonable sense . as a consequence",
    ", we will need to add some additional walls coming from joints in @xmath626 , some of which have arisen as the intersection of @xmath626 with walls added in step iii .",
    "consider a perpendicular joint @xmath2915 of @xmath2916 .",
    "necessarily the linear span of @xmath491 is @xmath2917 for some @xmath463 .",
    "furthermore , we can choose @xmath510 so that any wall containing @xmath491 then has linear span @xmath2918 for some @xmath2919 non - negative rational numbers .",
    "the direction of such a wall is positively proportional to @xmath2920 .",
    "we now distinguish between two cases .",
    "note that @xmath2921 as the joint is not parallel , so we call the joint @xmath491 _ positive _ or _ negative _ depending on the sign of @xmath2922 .",
    "note that if the joint is positive ( negative ) then @xmath2923 is positive ( negative ) for all @xmath2924 .",
    "if the joint is positive , then choose @xmath490 so that the first wall crossed is @xmath606 , passing from @xmath673 to @xmath674 .",
    "we can write @xmath2925 where @xmath2926 are compositions of wall - crossing automorphisms .",
    "it then follows from @xmath2927 for all @xmath2928 , @xmath2924 and lemma [ conjugationlemma ] that @xmath2929 , hence @xmath2930 .",
    "if the joint is negative , then we use a slightly different loop : without changing the orientation of the loop @xmath490 , change the endpoints so that @xmath490 now starts and ends in @xmath674 , crossing @xmath606 just before its endpoint .",
    "then @xmath2931 and again by lemma [ conjugationlemma ] , @xmath2930 .",
    "thus in both cases , @xmath2932 and is the identity in @xmath2888 .",
    "thus we still have and we can produce a scattering diagram @xmath2933 $ ] in the same way as for the joints @xmath491 not contained in @xmath626 .",
    "we then set @xmath2934,\\ ] ] where the union is over perpendicular joints of @xmath2916 contained in @xmath626 .",
    "_ step v. ( 1 ) of the induction hypothesis is satisfied . _",
    "consider a perpendicular joint @xmath491 of @xmath2899 .",
    "first suppose @xmath2901 .",
    "we proceed as in the proof of lemma [ ksalglemma ] .",
    "if @xmath491 is contained in a joint of @xmath2891 , there is a unique such joint , say @xmath2811 , and we constructed @xmath2812 $ ] above . if @xmath491 is not contained in a joint of @xmath2891 , we define @xmath2812 $ ] to be the empty set .",
    "there are three types of walls @xmath613 in @xmath2899 containing @xmath491 :    1 .",
    "@xmath2935 $ ] .",
    "2 .   @xmath2936)$ ] , but @xmath2815 .",
    "this type of wall does not contribute to @xmath2937 in @xmath2904 .",
    "indeed , the associated automorphism is in the center of @xmath2904 and this wall contributes twice to @xmath2938 , with the two contributions inverse to each other , so the contribution cancels .",
    "3 .   @xmath2939)$ ] and @xmath2819 . since each added wall is of the form @xmath2820 for some joint @xmath2821 of @xmath2891 , where @xmath866 is the direction of the wall , the direction of the wall is parallel to @xmath491 , contradicting @xmath491 being a perpendicular joint .",
    "thus this does not occur .",
    "on the other hand , suppose @xmath491 is a perpendicular joint of @xmath2899 contained in @xmath626 . then since no wall of @xmath2940 is contained in @xmath626 , by definition of @xmath611 ,",
    "in fact @xmath491 is a joint of @xmath2916 .",
    "thus we see again by construction of @xmath2933 $ ] that to order @xmath2913 , @xmath2937 is the identity for @xmath490 the loop around @xmath491 described in step iv . recall the choice of loop depends on whether the joint is positive or negative .",
    "now we show that @xmath2899 satisfies the induction hypothesis ( 1 ) , using the above existence of a @xmath490 such that @xmath2941 for each perpendicular joint @xmath491 .",
    "note that there is a map @xmath2942 for any @xmath2943 .",
    "the slab automorphism @xmath605 can be viewed as an element of @xmath2944 for any @xmath2943 , and hence @xmath2899 can be viewed as a scattering diagram for @xmath2944 in the sense of definition [ ksscatdiagdef ] .",
    "we will first show that @xmath2899 is consistent as a diagram for @xmath2944 inductively on @xmath2943 .",
    "the base case is @xmath2945 .",
    "all walls of @xmath2946 are trivial to @xmath2912-order @xmath2073 and hence to @xmath2135-order @xmath2073 .",
    "now @xmath2891 satisfies the main induction hypothesis ( 1 ) at order @xmath2073 , which implies via the natural map @xmath2947 that @xmath2899 is consistent as a diagram for @xmath2948 .",
    "indeed , as @xmath2899 is a finite scattering diagram , it is enough to check that @xmath2937 is the identity in @xmath2949 for any small loop @xmath490 around any joint @xmath491 . by the hypothesis ( 1 ) , this is the case for some loop @xmath490 , and hence for all loops .",
    "note that by uniqueness of consistent scattering diagrams with the same incoming walls , we also record for future use : @xmath2950    the induction step follows from lemma [ equivalencetonextorder ] , applied to @xmath2951 , @xmath2952 , and the group being @xmath2944 ( a quotient of @xmath93 , so the argument of lemma [ equivalencetonextorder ] still applies ) .",
    "indeed , if we assume @xmath2899 is consistent in @xmath2944 , then it is equivalent to @xmath378 as a scattering diagram in @xmath2944 .",
    "furthermore , @xmath378 is consistent to all orders by theorem [ kslemmags ] , and has the same set of incoming walls as @xmath2899 by construction .",
    "finally , @xmath2937 is the identity in @xmath2953 for any perpendicular joint @xmath491 , as shown above",
    ". thus @xmath2899 and @xmath378 are equivalent in @xmath2953 , and in particular @xmath2899 is consistent in @xmath2953 .    thus taking the inverse limit",
    ", we see that @xmath2899 is consistent as a scattering diagram for @xmath2954 .",
    "this almost completes the proof of the induction hypothesis ( 1 ) in degree @xmath2913 . indeed , as @xmath2904 is a subgroup of @xmath2954 , certainly @xmath2937 is the identity for any joint not contained in @xmath626 , including the parallel joints . for a perpendicular joint contained in @xmath626 ,",
    "if we choose @xmath490 as given in step iv , @xmath2937 lies in @xmath2861 and is the identity in @xmath2904 by the construction of @xmath2933 $ ] in step iv .",
    "finally , for a parallel joint @xmath491 contained in @xmath626 , note that all wall and slab - crossing automorphisms associated to walls containing @xmath491 commute , and in particular the contribution of @xmath605 and @xmath2955 in @xmath2937 as an automorphism of @xmath604}_{1+z^{v_k}}$ ] cancel , so that the latter automorphism lies in @xmath2861 .",
    "hence the image of this automorphism in @xmath2956 must also be trivial .",
    "this gives the induction hypothesis ( 1 ) .",
    "_ step vi . uniqueness .",
    "_ suppose we have constructed two scattering diagrams @xmath2957 for @xmath2842 from @xmath2891 which satisfy the inductive hypothesis ( 1 ) to @xmath2912-order @xmath2913 , but with the group @xmath2861 replaced with @xmath2842 . by the induction hypothesis ( 2 ) , these two scattering diagrams are equivalent to @xmath2912-order @xmath2073 , and we wish to show they are equivalent to @xmath2912-order @xmath2913 .",
    "one first constructs a finite scattering diagram @xmath328 consisting only of outgoing walls whose attached functions are of the form @xmath2958 with @xmath2959 and @xmath2960 , with the property that @xmath2961 is equivalent to @xmath2962 to @xmath2912-order @xmath2913 .",
    "this is done precisely as in the proof of lemma [ equivalencetonextorder ] .",
    "we need to show @xmath328 is equivalent to the empty scattering diagram to @xmath2912-order @xmath2913 .",
    "to show this , first note that for any loop @xmath341 which does not cross the slab @xmath606 , @xmath2963 to @xmath2912-order @xmath2913 implies that @xmath2964 to @xmath2912-order @xmath2913 .",
    "indeed , all wall - crossing automorphisms of @xmath328 are central in @xmath2965 . now if @xmath2865 with @xmath2960 , let @xmath2966 be the set of walls in @xmath328 with attached functions of the form @xmath2958 .",
    "note all wall - crossing automorphisms of @xmath328 , viewed as elements of @xmath2965 , lie in @xmath2967 , which as a group coincides with the additive group structure on @xmath2968 .",
    "thus for any path @xmath341 not crossing @xmath606 , we obtain a unique decomposition @xmath2969 from the @xmath611-grading on @xmath2970 , and if @xmath361 is the identity , so is each @xmath2971 .",
    "fixing @xmath510 as above , replace @xmath2972 with an equivalent scattering diagram with smallest possible support , and let @xmath2973 .",
    "so if @xmath2974 is a general point , @xmath2975 if and only if @xmath2976 is not the identity",
    ". assume first that @xmath2977 .",
    "we shall show @xmath2978 .",
    "assume not .",
    "taking a general point @xmath2979 , it is not possible for the ray @xmath2980 to be contained in @xmath2981 .",
    "this is because @xmath328 consists of only a finite number of walls , none of which are incoming .",
    "let @xmath2982 , and @xmath2983 .",
    "this makes sense as @xmath2984 is in the set over which we are taking the maximum , as we are assuming @xmath2975 .",
    "then necessarily @xmath2985 is in a joint @xmath491 of @xmath2972 , and every wall of @xmath2972 containing @xmath491 is contained in @xmath2986 .",
    "furthermore , since @xmath2987 , @xmath2988 , it follows that @xmath2989 and @xmath491 is not contained in @xmath626 . thus given a loop @xmath490 around @xmath491 ,",
    "@xmath2990 is the identity .",
    "this implies that in fact to @xmath2912-order @xmath2913 , @xmath2991 in particular , a point @xmath2992 for small @xmath652 is contained in precisely those walls of @xmath2972 containing @xmath491 .",
    "but then @xmath2993 , contradicting minimality of @xmath2981 .",
    "thus one finds that @xmath2994 .",
    "similarly , if @xmath2995 , then @xmath2996 . in particular ,",
    "if @xmath2997 , @xmath2998 , but there are no walls contained in @xmath626 , so in this case @xmath2999 .    now consider a joint @xmath491 of @xmath2962 contained in @xmath626 .",
    "there are three cases : either @xmath491 is perpendicular and positive , perpendicular and negative , or parallel .",
    "consider the first case .",
    "take a loop @xmath490 around @xmath491 as in the positive case in step iv .",
    "because of positivity , if a wall @xmath613 of @xmath328 contains @xmath491 , then with @xmath510 chosen so that @xmath3000 , we must have @xmath3001 and hence @xmath613 is contained in @xmath673 .",
    "thus we have that to @xmath2912-order @xmath2913 , @xmath3002 as in , where @xmath3003 and @xmath3004 denote the contributions coming from the scattering diagrams @xmath328 and @xmath2899 and the pieces of @xmath490 not crossing @xmath626 .",
    "the same argument works for negative joints , while a parallel joint can not contain any wall of @xmath328 , ( as we showed above that @xmath2999 if @xmath2997 ) , so that @xmath489 trivially . we can now repeat the argument of the previous paragraph , taking for any @xmath510 a general point @xmath2975 rather than @xmath3005 .",
    "this allows us to conclude that @xmath2999 for all @xmath510 , proving uniqueness .",
    "_ step vii .",
    "finishing the proof of theorem [ kslemma2 ] . _",
    "having completed the induction step , we take @xmath3006 . we need to check it satisfies the stated conditions in theorem [ kslemma2 ] .",
    "certainly conditions ( 1 ) and ( 2 ) hold by construction .    for ( 3 ) , first recall that because by construction @xmath627 can be viewed as a scattering diagram for @xmath2861 , it can also be viewed as a scattering diagram for @xmath93 via the inclusion @xmath2856 , and in addition @xmath3007 , so that @xmath627 is viewed as a scattering diagram for @xmath93 in the sense of definition [ ksscatdiagdef ] , i.e. , with no slab .",
    "now as a scattering diagram for @xmath93 , @xmath627 is equivalent to @xmath378 by . by consistency of @xmath378",
    ", @xmath3008 is independent of the endpoints of @xmath341 as an element of @xmath93 .",
    "now suppose @xmath3009 are two automorphisms of @xmath604}_{1+z^{v_k}}$ ] which induce automorphisms of @xmath268}$ ] , ( i.e. , for @xmath3010 , @xmath3011}$ ] , giving a map @xmath3012}\\rightarrow \\widehat{{\\bbbk}[p]}$ ] which is an automorphism ) and agree as automorphisms of the latter ring .",
    "then @xmath3009 agree as automorphisms of @xmath604}_{1+z^{v_k}}$ ] .",
    "thus in particular , @xmath3013 is independent of the endpoints of @xmath341 as an automorphism of @xmath604}_{1+z^{v_k}}$ ] .",
    "this gives condition ( 3 ) .",
    "the uniqueness of @xmath627 with these properties then follows from the induction hypothesis ( 2 ) . indeed ,",
    "if @xmath3014 satisfies conditions ( 1)-(3 ) of theorem [ kslemma2 ] , then working by induction on the order @xmath2073 , the induction hypothesis ( 1 ) holds for @xmath3014 ( the existence of @xmath490 with @xmath3015 only being an issue for joints contained in @xmath626 , and step iv explains how to choose the loop @xmath490 ) .",
    "thus by induction hypothesis ( 2 ) , @xmath627 and @xmath3016 are equivalent to order @xmath2073 .",
    "the key point of the proof is just the positivity of the simplest scattering diagram as described in example [ basicscatteringexample ] , which we use to analyze general two - dimensional scattering diagrams . we will consider a somewhat more general setup , but only in two dimensions , than considered in the rest of this paper . in particular",
    ", we will follow the notation of @xcite ,  6.3.1 , taking @xmath3017 , @xmath3018 , and assume given a monoid @xmath265 with a map @xmath3019 , @xmath3020 .",
    "we will consider scattering diagrams @xmath328 for this data as in @xcite , def .",
    "6.37 , consisting of rays and lines which do not necessarily pass through the origin . given any scattering diagram @xmath940 , the argument of kontsevich and soibelman from @xcite ( see @xcite , theorem 6.38 for an exposition of this particular case ) adds rays to @xmath940 to obtain a scattering diagram @xmath3021 such that @xmath3022 is the identity for every loop @xmath341 .",
    "this diagram is unique up to equivalence .",
    "[ basicpositivity ] in the above setup , suppose given @xmath3023 , @xmath3024 , with @xmath3025 , and positive integers @xmath3026 .",
    "consider the scattering diagram @xmath3027 @xmath3028 .",
    "we can choose @xmath328 within its equivalence class so that for any given ray @xmath3029 , we have @xmath3030 for @xmath130 a positive integer and the @xmath902 non - negative integers with at least two of them non - zero .",
    "_ step i. the change of monoid trick_. note that if the @xmath3031 generate a rank one sublattice of @xmath1444 , then all the wall - crossing automorphisms of @xmath940 commute and @xmath3032 , so we are done .",
    "so assume from now on that the @xmath3031 generate a rank two sublattice of @xmath1444 .",
    "let @xmath3033 , generated by @xmath3034 , define a map @xmath3035 by @xmath3036 , and a map @xmath3037 by @xmath3038 .",
    "we extend @xmath2741 to a map @xmath3039}\\rightarrow\\widehat{{\\bbbk}[p]}$ ] , and define , for a scattering diagram @xmath328 for the monoid @xmath591 , @xmath3040 . clearly if @xmath2964 , then @xmath3041 . thus if @xmath3042 , then @xmath3043 is equivalent to @xmath3021 , by uniqueness of @xmath3044 up to equivalence .",
    "so it is sufficient to show the result with @xmath3045 , @xmath3046 .",
    "_ step ii .",
    "everything but the positivity of the exponents_. we can construct @xmath328 specifically using the original method of @xcite , already explained here in steps iii and iv of the proof of theorem [ kslemma2 ] : we construct @xmath328 order by order , constructing @xmath3047 so that @xmath3048 is the identity modulo @xmath3049 for @xmath341 a loop around the origin . given a description @xmath3050 with the @xmath902 primitive and the @xmath3051 all distinct , we add a collection of rays @xmath3052 for some @xmath2906 .",
    "however , inductively , we can show the @xmath3053 can be taken to be integers .",
    "indeed , if all rays in @xmath3047 have this property , then @xmath3048 is in fact an automorphism of @xmath3054}$ ] , and thus the @xmath3053 appearing in of @xmath3048 are also integers .",
    "next let us show that any exponent @xmath3051 is of the form @xmath3055 with at least two of the @xmath3056 non - zero .",
    "the pro - nilpotent group @xmath3057 in which all automorphisms live is given by the lie algebra @xmath3058),\\ ] ] following the notation of @xcite , pp .",
    "290 - 291 .",
    "this contains a subalgebra @xmath3059 where the sum is taken over all @xmath3060 not proportional to one of the @xmath1232 .",
    "then clearly @xmath3061\\subseteq { \\mathfrak{v}}'$ ] , so the corresponding pro - nilpotent group @xmath3062 is normal in @xmath3057 .",
    "furthermore , @xmath3063 is abelian , hence so is @xmath3064 . for any loop @xmath341 ,",
    "the image of @xmath3065 is thus the identity in @xmath3064 , as every wall in @xmath940 contributes twice to @xmath3066 , but with inverse automorphisms .",
    "assume inductively that @xmath3067 only contains rays whose attached functions @xmath3068 have @xmath3051 not proportional to any @xmath3069 .",
    "then the wall - crossing automorphisms associated to these rays lie in @xmath3062 , so @xmath3048 is the identity in @xmath3064 , i.e. , lies in @xmath3062 .",
    "thus the expression @xmath3070 of lies in @xmath3059 , hence the inductive step follows .",
    "_ step iii .",
    "the perturbation trick_. we will now show the result for all monoids @xmath3072 for all @xmath59 , all choices of @xmath3019 , all choices of @xmath3073 with @xmath3025 , and all positive choices of @xmath251 .",
    "( note by step i this is a bit more than we need , as we do nt take the @xmath1994 to necessarily be generators of @xmath265 ) .",
    "all cases are dealt with simultaneously by induction .",
    "we define for @xmath3074 the _ order _",
    "@xmath3075 , which is the unique @xmath3076 such that @xmath3077 . for a ray @xmath3078",
    ", we write @xmath3079 , and say @xmath613 is a ray of order @xmath3080 .",
    "we will go by induction on the order , showing that a ray @xmath3078 in @xmath328 of order @xmath3081 for any choice of data has @xmath130 positive .",
    "this is obviously the case for @xmath3082 , as all elements of @xmath3083 have order at least @xmath430 .",
    "so assume the induction hypothesis is true for all orders @xmath3084 , and we need to show rays added of order @xmath460 have positive exponent .",
    "we will use the _ perturbation trick _ repeatedly . given a scattering diagram @xmath940 for which we would like to compute @xmath3085 , choose general @xmath3086 for each @xmath3087 .",
    "define @xmath3088 ; this is the perturbed diagram .",
    "we can then run the kontsevich - soibelman algorithm for @xmath3089 , for example as described in @xcite , theorem 6.38 .",
    "this gives a scattering diagram @xmath3090 with the property that @xmath3091 is the identity for every loop @xmath341 .",
    "this is the case in particular for @xmath341 a very large loop around the origin which contains all singular points of @xmath363 .",
    "we can assume as usual that @xmath363 has been constructed only by adding rays of the form @xmath3092",
    ".    then up to equivalence , @xmath328 can be obtained from @xmath363 by taking the _ asymptotic scattering diagram of @xmath363 _ , i.e. , just translate each line of @xmath363 so it passes through the origin and each ray of @xmath363 so its endpoint is the origin .",
    "1.4 of @xcite for more details .",
    "if after performing this translation , we obtain a number of rays with the same support of the form @xmath3093 , @xmath210 in some index set , we can replace all these rays with a single ray @xmath3094 without affecting the equivalence class .",
    "thus if we want to show positivity of the exponents for @xmath328 , it is enough to show the desired positivity for @xmath363 .",
    "we will typically use an induction hypothesis to show positivity for @xmath363 .",
    "indeed , for each order , we will run the kontsevich - soibelman algorithm at each singular point , and the behaviour at each singular point is equivalent to a scattering diagram of the general type being considered . indeed ,",
    "if @xmath123 is a singular point of some @xmath3095 constructed to order @xmath2135 , we obtain a local version @xmath3096 of the scattering diagram at @xmath123 by replacing each @xmath613 with @xmath3097 with @xmath3098 , and replacing such translated rays with the line spanned by the ray if the translated ray does not have the origin as its endpoint .",
    "as long as all attached functions of rays and lines passing through @xmath123 are of the form @xmath3092 with @xmath130 a positive integer , we are back in the original situation of the proposition .",
    "we shall write @xmath3099 for the set of lines in @xmath3096 .",
    "we first observe that using the perturbation trick it is enough to show the induction hypothesis for order @xmath460 when at most two of the @xmath1994 have @xmath3100 . indeed , after perturbing , the lines of @xmath3089 only intersect pairwise , but as more rays are added as the kontsevich - soibelman algorithm is run , one might have more complicated behaviour at singular points .",
    "however , any ray added has order @xmath3101 .",
    "thus we only have to analyze initial scattering diagrams @xmath3102 with at most two lines of order @xmath616 .",
    "next we observe the induction hypothesis allows us to show the result only for @xmath3103 , with both lines having order @xmath616 . indeed , write @xmath3102 as @xmath3104 and order the @xmath1994 so that @xmath3105 .",
    "apply step i , getting a map @xmath3035 with @xmath3036 .",
    "we are trying to prove that rays with @xmath265-order @xmath460 have positive exponent . but consider a ray @xmath3106 which is the image under @xmath2741 of a ray @xmath3107 appearing in @xmath3108 with @xmath3109 and at least one of @xmath3110 non - zero .",
    "then @xmath3111 , so by the induction hypothesis , we can assume @xmath130 is positive . on the other hand , rays of the form @xmath3107 with @xmath3112 for @xmath3113 appearing in @xmath3108 already appear in @xmath3114 , as follows easily by working modulo the ideal in @xmath591 generated by the @xmath3115 .",
    "thus we are only concerned about rays which arise from scattering the two order @xmath616 lines .",
    "thus it is sufficient to show the result when @xmath3103 .",
    "_ step iv .",
    "the change of lattice trick_. to deal with the case where @xmath940 consists of two lines , we use the _ change of lattice _ trick to reduce to a simpler expression for the scattering diagram . by step",
    "i , we can take @xmath3116 , @xmath3046 .",
    "let @xmath3117 be the sublattice generated by @xmath3118 .",
    "note as in step i we can assume that this is a rank @xmath430 sublattice , as otherwise the automorphisms associated to the two lines commute . then @xmath3119 is a superlattice of @xmath240 , with dual basis @xmath3120 . in what follows , we will talk about scattering diagrams defined using both the lattice @xmath1444 and @xmath113 .",
    "bear in mind that a wall @xmath325 could be interpreted using either lattice , and the automorphism induced by crossing such a wall depends on which lattice we are using , as primitive vectors in @xmath240 differ from primitive vectors in @xmath245 .    to see the relationship between these automorphisms , for @xmath3121 ,",
    "let @xmath3122 then a wall @xmath325 for @xmath1444 induces a wall - crossing automorphism of @xmath268}$ ] which is the same as the automorphism induced by the wall @xmath3123 for @xmath113 , where @xmath3124 is primitive and annihilates @xmath613 .",
    "consider @xmath3125 as a scattering diagram for the lattice @xmath113 .",
    "let @xmath3126 .",
    "let @xmath363 be the scattering diagram for @xmath1444 obtained by replacing every wall @xmath3127 with @xmath3128 .",
    "thus the wall - crossing automorphism for each wall in @xmath363 as a scattering diagram for the lattice @xmath1444 is the same automorphism for the corresponding wall in @xmath3129 .",
    "then @xmath3091 is the identity .",
    "thus by uniqueness of the scattering process up to equivalence , @xmath363 is equivalent to @xmath3021 .",
    "( note this implies that @xmath3130 also , as @xmath3021 only involves integer exponents . )",
    "thus it is enough to prove the desired positivity for the scattering diagram @xmath3129 . to do so",
    ", we use a variant of the perturbation trick , factoring the two lines in @xmath3131 .",
    "we choose general @xmath3132 , with @xmath3133 , @xmath3134 .",
    "define @xmath3135 again , we initially only have pair - wise intersections .",
    "the first stage of this algorithm will then only involve points where two lines of the form @xmath3136 and @xmath3137 intersect .",
    "the algorithm only adds one ray in the direction @xmath3138 with endpoint the intersection point and attached function @xmath3139 , as follows from example [ basicscatteringexample ] .",
    "this now accounts for all new rays of order @xmath430 .",
    "we continue to higher degree , but now we can use the induction hypothesis at every singular point @xmath123 as we did in step iii , because every line in @xmath3099 has order @xmath3140 except for possibly one or two of the given lines of order @xmath616 , and we have already accounted for all rays produced by collisions of two lines of order @xmath616 .",
    "[ positivitywithcoefs ] in the situation of proposition [ basicpositivity ] , suppose instead that @xmath3141 where now @xmath3142 , the ground field .",
    "choosing @xmath3085 up to equivalence , we can assume that each ray @xmath3143 satisfies @xmath3144 for some choice of non - negative integers @xmath1036 and where @xmath130 is a positive integer .",
    "this follows easily from from proposition [ basicpositivity ] .",
    "first , using the change of monoid trick ( step i of the proof of proposition [ basicpositivity ] ) , we may assume @xmath3045 and @xmath3046 .",
    "consider the automorphism @xmath3145}\\rightarrow \\widehat{{\\bbbk}[p]}$ ] defined by @xmath3146 .",
    "applying @xmath70 to the function attached to each wall of @xmath3147 gives a scattering diagram @xmath363 whose incoming walls are precisely those of @xmath940 , and @xmath3148 for @xmath341 a loop around the origin",
    ". thus we can take @xmath3149 and the result follows from proposition [ basicpositivity ] .",
    "_ proof of theorem [ scatdiagpositive ] .",
    "_ in fact one can use the @xmath378 as constructed explicitly in the algorithm of the proof of theorem [ kslemma2 ] .",
    "the only issue is that we need to know that the walls added at each joint have the desired positivity property .",
    "note that the statement of theorem [ scatdiagpositive ] involves scattering diagrams without slabs , while the proof of theorem [ kslemma2 ] given involves a slab .",
    "so for the purpose of this discussion , we can ignore all issues concerning the slab in the proof of theorem [ kslemma2 ] , and the only thing we need to do is look at the procedure for producing @xmath2933 $ ] in step ii of the proof of theorem [ kslemma2 ] .",
    "for a perpendicular joint @xmath491 of @xmath3047 , we can split @xmath3150 , where @xmath3151 is a rank two lattice . for each wall",
    "@xmath3152 containing @xmath491 , we can inductively assume that @xmath381 for some positive integer @xmath130 , and split @xmath3153 , with @xmath3154 and @xmath3155 . because @xmath491 is perpendicular , we have @xmath3156",
    ". we will apply corollary [ positivitywithcoefs ] to the case where the monoid @xmath265 is the one being used in theorem [ kslemma ] , and @xmath3157 is the projection .",
    "we can then view the computation at the joint as a two - dimensional scattering situation in the lattice @xmath3151 over the ground field @xmath3158 , the quotient field of @xmath3159 $ ] . to obtain the relevant two - dimensional scattering diagram",
    "we replace each wall @xmath325 with @xmath3160 with @xmath3161 in @xmath3162 .",
    "we are then in the situation of corollary [ positivitywithcoefs ] , and the result follows .",
    "g.  cerulli irelli , b.  keller , d.  labardini - fragoso , and p.  plamondon , _ linear independence of cluster monomials for skew - symmetric cluster algebras _ , compos .",
    "* 149 * ( 2013 ) , 17531764 .",
    "cheung , m.  gross , g.  muller , g.  musiker , d.  rupel , s.  stella , h.  williams , _ the greedy basis equals the theta basis _ ,",
    "jour .  of combinatorial",
    "theory , series a , ( 2017 ) , 150171 .",
    "m. inaba , k. iwasaki , and m. saito , _ moduli of stable parabolic connections , riemann - hilbert correspondence and geometry of painlev equation of type vi .",
    "i. _ publ .",
    "inst . math .",
    "* 42 * ( 2006 ) , 9871089 .",
    "m.  kontsevich and y.  soibelman , _ affine structures and non - archimedean analytic spaces _ , in : _ the unity of mathematics _",
    "( p.  etingof , v.  retakh , i.m .",
    "singer , eds . ) , 321385 , progr .",
    "math .  * 244 * , birkhuser  2006 .",
    "m.  kontsevich and y.  soibelman , _ wall - crossing structures in donaldson - thomas invariants , integrable systems and mirror symmetry _ , in _ homological mirror symmetry and tropical geometry _ , 197308 , lect .",
    "notes unione mat .",
    "* 15 * , springer , cham , 2014 ."
  ],
  "abstract_text": [
    "<S> in @xcite , conjecture 0.6 , the first three authors conjectured that the ring of regular functions on a natural class of affine log calabi - yau varieties ( those with maximal boundary ) has a canonical vector space basis parameterized by the integral tropical points of the mirror . </S>",
    "<S> further , the structure constants for the multiplication rule in this basis should be given by counting broken lines ( certain combinatorial objects , morally the tropicalisations of holomorphic discs ) .    </S>",
    "<S> here we prove the conjecture in the case of cluster varieties , where the statement is a more precise form of the fock - goncharov dual basis conjecture , @xcite , conjecture 4.3 . </S>",
    "<S> in particular , under suitable hypotheses , for each @xmath0 the partial compactification of an affine cluster variety @xmath1 given by allowing some frozen variables to vanish , we obtain canonical bases for @xmath2 extending to a basis of @xmath3 . </S>",
    "<S> each choice of seed canonically identifies the parameterizing sets of these bases with integral points in a polyhedral cone . </S>",
    "<S> these results specialize to basis results of combinatorial representation theory . </S>",
    "<S> for example , by considering the open double bruhat cell @xmath1 in the basic affine space @xmath0 we obtain a canonical basis of each irreducible representation of @xmath4 , parameterized by a set which each choice of seed identifies with integral points of a lattice polytope . </S>",
    "<S> these bases and polytopes are all constructed essentially without representation theoretic considerations .    along the way </S>",
    "<S> , our methods prove a number of conjectures in cluster theory , including positivity of the laurent phenomenon for cluster algebras of geometric type . </S>"
  ]
}