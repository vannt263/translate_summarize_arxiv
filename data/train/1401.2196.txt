{
  "article_text": [
    "the radio frequency quadrupoles ( rfq ) are in use at the low beta sections of all modern ion accelerators since their invention by kapchinsky and teplyakov in late 1970s  @xcite . for light ions such as @xmath3 and @xmath4",
    "operating in 300 - 400  mhz range , the rfq type of choice is the , so called , 4-vane rfq @xcite . the design of a 4-vane rfq , which is the focus of this paper , and its manufacture require precise calculation of the relevant parameters , a good understanding of the materials and high precision machining  @xcite . in fact",
    ", this accelerating structure is nothing but a body ( cylindrical , square or octagonal vessel ) containing four carefully crafted modulated vanes , two vertical and two horizontal symmetrically distributed along the beam axis . the high precision modulation requirement on the vanes",
    "can be met by the computerized milling tools , i.e. cnc machines .",
    "however , the art of designing an efficient rfq and the study of its beam dynamics properties necessitate repetitive lengthy calculations :  an ideal task for computers .",
    "although the two of commercially available programs  @xcite@xcite , profit from years of experience in accelerator building , the main design ideas and especially the user interaction components can benefit from modern tools and concepts . additionally , the commonly used unix - like environment provided by linux and osx workstations does not have access directly to these two microsoft windows specific software packages .",
    "a new project in the form of a computer code , written in c@xmath0 , called demirci  @xcite is started to explore the potential of the modern concepts such as object oriented programming and root environment  @xcite .",
    "this tool helps the designer to create an rfq model which would achieve certain goals such as a final target energy or a fixed total accelerator length in a fully graphical environment .",
    "it calculates a large number of design and beam dynamics parameters such as energy at the end of the cavity , power dissipation and cavity quality factor for each cell .",
    "it also allows the designer to visualize a large set of parameters change along the rfq .",
    "another property of this tool is the interoperability with similar software in the field , either directly using the user interface or by simple exchange of plain text files .",
    "this paper focuses on the algorithmic side of the project omitting all the installation details and instructions on how to use the actual code .",
    "these details are described elsewhere  @xcite .",
    "however it might be interesting for the reader to know that the project has been used successfully in multiple unix - like environments such as osx , scientific linux and ubuntu linux . at the writing of this",
    "note the project source code is under further development and is not open to general public , however a binary at the current state for most common platforms can be obtained by contacting the authors  @xcite .",
    "the classical procedure used in designing 4-vane rfqs has been around since lanl designed the first proof of principle ( pop ) device .",
    "this procedure is known as the `` lanl four section procedure ( fsp ) '' method  @xcite . according to this method",
    ", the rfq is divided into 4 sections named as radial matching section ( rms ) , shaper section , gentle buncher section and acceleration section . after the steady state beam at the entrance of the rfq is matched to time dependent electric field in the rms , an rf bucket is formed in the shaper to prepare the beam for the gentle buncher . while the beam is being bunched , the space charge effect is also attempted to be reduced concurrently . after the beam becomes bunched , it is accelerated to the final energy at the accelerator section .",
    "_ _ _ the potential between the electrodes of a single rfq cell is given___@xcite _ _ by : _ _ @xmath5\\nonumber \\end{aligned}\\ ] ] where @xmath6 and @xmath7 are cylindrical coordinates for which @xmath8 represents the beam direction , @xmath9 is the amplitude of the inter - vane voltage , @xmath10 is the wave parameter given by @xmath11 , with @xmath12 being the rf wavelength and @xmath13 being the speed of the ion relative to the speed of light . also , @xmath14 is mean aperture of the vanes , @xmath15 is the modified bessel function of order 2 m and the @xmath16 are the multipole coefficients whose values depend on the vane geometry .",
    "kapchinsky and teplyakov argued that for practical purposes the above potential can be approximated only by the lowest order terms in the sums ( hence the name `` 2-term potential '' ) to calculate the em fields around the tips of the electrodes i.e. near the beam axis .",
    "more recently , modern tools have added few more terms to this initial approximation , in fact lanl design software uses the eight lowest order terms of equation  ( [ eq : generic - potential ] ) to characterize the em fields in the presence of the modulated vanes .",
    "_ _ the other commercially available software , lidos , gives users the possibility to design rfqs in three steps ; first the main parameters are defined and design optimizations are made , then accurate rf fields calculations are made with a multipole expansion of the equation  [ eq : generic - potential ] and finally beam simulations are performed to understand the beam dynamics effects . _ _      the parameters needed to define an rfq can be divided into two categories :  the ones which can be a function of rfq length and the ones which are constant for a given rfq .",
    "the resonant frequency ( @xmath17 ) , the initial ion energy ( @xmath18 ) , the input beam current ( @xmath19 ) and the braveness factor ( in terms of the kilpatrick value ) can be cited as examples to the latter .",
    "the four parameter vectors falling into the first category are :  the synchronous phase ( @xmath20 ) , the cell modulation ( @xmath21 ) , the minimum bore radius ( @xmath22 ) and the inter - vane voltage ( @xmath9 ) .",
    "this last one , together with @xmath23 where @xmath14 is mean aperture of the vanes and @xmath24 is the curvature ( tip radius ) of the electrodes , could be kept constant along the rfq length to simplify the design and manufacture . in case of demirci , a typical parameter s variation along the rfq can be seen in fig .",
    "[ fig : cell - modulation ] .",
    "the points represented by the blue squares in fig .  [ fig : cell - modulation ] are the so called reference cells for which the values of the four key parameters are defined by the designer .",
    "in this particular example , fig .",
    "[ fig : cell - modulation ] shows 20 reference cells for an rfq of 200 cells in total .",
    "the values of the parameters at the cells in between the reference ones are obtained by interpolation assuming a simple linear function .    ) versus cell number .",
    "@xmath21 is a typical rfq parameter which changes with cell number .",
    "the meaning of blue squares and red line is explained in the text .",
    "[ fig : cell - modulation ] ]    the number of reference cells and the total number of rfq cells are all user defined variables .",
    "the designer might choose to define the values of the parameters for each cell , or to simply define boundary conditions for different regions of the rfq and let the interpolation function do the rest .",
    "as a safety check , the software library ensures the monotonic increase of the reference cell numbers .",
    "therefore a new design can be made in a pure graphical way , by simply relocating individual reference cells by using the mouse pointer e. g. to change the shape of the synchronous phase curve or by moving a complete curve , e.g. to increase the inter - vane voltage which is a constant in simple designs .",
    "this new paradigm allows quick testing of various design ideas concerning the four critical parameter vectors :  @xmath20 , @xmath21 , @xmath22 and @xmath9 . although the non - graphical user interface , i.e. the command line , also exists and it could be more adequate for parameter scan studies , the graphical method has proven itself to be both more intuitive and more pedagogical for the new designers .",
    "once the reference curves and the other parameters are selected , the designer can simply do the interpolation and calculate all the relevant functions for each cell .",
    "the evolution of the ion beam starts with cell 0 and progresses through all cells by calculating all the variables of interest .",
    "a few simple formulas leading to the calculation of the length of the @xmath25 cell @xmath26 , hold at voltage @xmath27 and synchronous phase @xmath28 , the acceleration efficiency at @xmath25 cell considering 2-term potential , @xmath29 , and the total energy ( @xmath30 ) of the ions of mass @xmath31 , charge @xmath32 and speed of light @xmath33 , after the @xmath25 cell , are reproduced below to give the reader an overview of the type of repetitive calculations needed to design an rfq : @xmath34+i_{0}[k_{n}a_{n}m_{n}])\\nonumber \\\\ e_{n } & = & e_{n-1}+\\frac{1}{4}q\\pi a_{n}v_{n}\\cos(\\phi_{n})\\quad.\\nonumber \\end{aligned}\\ ] ]    at the end of the calculations , few important parameters are presented to the designer :  these are the final ion beam energy , the rfq total length which is the sum of all cell lengths , the time needed for the ions to travel the rfq cavity , the maximum em power needed by the rfq and its quality factor , @xmath35 .",
    "the details of the rf power and quality factor calculations will be discussed in the next section .",
    "remaining parameters can be optimized by specifying a goal such as a desired output beam energy .",
    "the number of rfq cells can be changed from the default value of 200 to allow the design of longer rfq cavities .",
    "a shorter design is simpler to obtain by setting a target value for the exit ion energy .",
    "all the scalar rfq parameters can be tuned using the number entry boxes at the upper right side of the designer window which can be seen in fig .",
    "[ fig : demirwindow ] .    ,",
    "width=340,height=188 ]    additionally , there are checks along the calculations which inform the user that a critical parameter is overrun . for example , the designer is warned if the inter - vane voltage is too high and induces an electric field above the preselected kilpatrick limit .",
    "since demirci receives from the designer the braveness factor ( between 1 and 2 ) and the operation frequency ( @xmath17 in mhz ) , it calculates internally the maximum allowed electric field ( @xmath36 ) by inverting kilpatrick s empirical limit formula : @xmath37 and multiplying the resulting field @xmath38 by the braveness factor  @xcite .",
    "then , the peak electric field at the electrode surface ( @xmath39 ) at @xmath25 cell is calculated and checked against @xmath36 , using inter - vane voltage and bore radius values in that cell : @xmath40 , where @xmath41 is selected as 1.28 to ensure compatibility with cst and superfish results",
    "@xcite . if such a warning is given , it is up to the designer to check the details of the problem by plotting the parameter in question and to solve it by re - optimizing the rfq . building the rfq designer software on top of the pre - existing root libraries provides all the non - essential but necessary functionality , such as defining the parameters of interest , loading and saving of the configuration and output files . additionally , all the graphics routines in demirci are based on the root libraries .",
    "this design decision allows a robust , mature and multi - platform gui experience for the designer .",
    "a section of the user interface dealing with parameter selection is shown in fig .",
    "[ fig : plottables ] .",
    "demirci provides easy plotting of the evolution of the relevant parameters along the rfq .",
    "the graphical results can also be easily customized ( such as the formatting of the curves or the addition of a gridline ) according to the taste of the user .",
    "]      rf power requirements and the quality of the final accelerating cavity are essential quantities to measure the realizability of the designed device . in demirci , the rf power dissipation on the cavity walls is calculated using the lumped circuit model assuming a cu structure  @xcite .",
    "this assumption is expected to be valid for both oxygen free electric copper  ( ofe cu ) cavities and cavities made from other materials and electro - coated with cu :  the skin depth at radio frequencies is less than 10  @xmath42 m , which is much less than typical coating thickness validating the approach .",
    "the relevant quantity to consider is the power loss per unit length on the rfq wall surfaces .",
    "it is denoted as @xmath43 and defined as  @xcite : @xmath44 where @xmath45 is the magnetic constant , @xmath46 is the magnetic field vector and @xmath47 is the conductivity of the wall material ( usually cu ) .",
    "the operating frequency ( @xmath17 ) is defined using @xmath48 where @xmath49 is the resonant angular frequency .",
    "the function is to be integrated over the perimeter ( @xmath50 ) of the surface at a given rfq slice along its length .",
    "the perimeter and the surface of the rfq slice can be calculated assuming that each quadrant can be approximated by a square of length @xmath6 and three quarters of a circle of radius @xmath6 .",
    "this simplified geometry is also known as `` clover leave '' 4-vane resonator .",
    "therefore the surface area ( s ) of a section with four quadrants and its perimeter length ( p ) become : @xmath51 the resonance condition of this capacitor - inductor cavity with the above geometry can be used to calculate the relation between @xmath6 and various other quantities  @xcite : @xmath52 where @xmath53 is the capacitance per unit length .",
    "if the specific cavity design is known , an adapted version of the resonance equation can be used to calculate the @xmath53 value .",
    "however demirci uses an estimation for this last quantity , a constant around 120  pf / m , to determine @xmath6 .",
    "in fact , a better approximation can be found in the literature :  @xmath54 for @xmath55  @xcite where @xmath12 is the rf wavelength and @xmath14 is radial aperture .",
    "therefore the integral in eq .",
    "( [ ps_defr ] ) simplifies to : @xmath56 where v is the inter - vane voltage as before .",
    "the actual consumed power by a specific machine is the sum of surface losses and power transferred to the beam ( @xmath57 ) which depends on the beam current ( @xmath58 ) and its final energy ( @xmath59 ) :  @xmath60 where @xmath61 in order to calculate another important rfq property , namely the quality factor of the cavity denoted as @xmath35 , the magnetic component of the stored energy per unit length ( @xmath62 ) is to be calculated @xcite : @xmath63 therefore , without considering the effect of vane modulation , @xmath35 is defined in literature as @xcite : @xmath64 here quantities without the subscript @xmath65 represent integration over the rfq length .",
    "recently , a simple consideration of the electric field in the @xmath8-direction has been investigated and it has been shown to modify the @xmath35 value by about 2  % as described in appendix  a. finally , in all calculations the duty factor ( _ d.f .",
    "_ ) is assumed to be 100% , therefore the designer is expected to report the actual power values according to the _ d.f .",
    "_ of the planned device .",
    "vane shape calculation is the final output expected from such a software as it can be fed to an electromagnetic equation solver program for further analysis .",
    "the vane tip extrema position in radial direction is defined as part of the design process .",
    "the axial position ( z ) of each extrema is calculated by demirci library .",
    "an interpolation between consecutive extrema using generic sine function allows the definition of an equation of the curve that describes the distance from the beam axis to the electrode : @xmath66 where the coefficients @xmath67 , and @xmath20 can be solved for each cell . after the extraction of the extrema ( @xmath68 ) at @xmath69 cell from the demirci library ,",
    "the vane shape related function firstly calculates the bore radius per cell , denoted as @xmath70 in equation [ v_j ] .",
    "the other constant is defined as the difference of the extrema per cell and finally the phase can be extracted from the boundary condition that the sin function equals to unity at the beginning of each cell ( k is the wave number given in equation [ v_j ] ) .",
    "therefore one obtains : @xmath71 although the user can request the functions to be evaluated at any interval to produce a discreet version of the vane profile the typical precision requirement for mechanical productions can be met with a 10  @xmath72 step size . in fig .",
    "[ fig : vane - shape ] vane shape calculated by demirci is presented as a function of the rfq length .",
    "such an output file can be taken as input by a cad program for 3d visualization and further processing .    ]",
    "the spp rfq , at taek s sanaem , aims to gain the necessary knowledge and experience to construct a proton beamline needed for educational purposes .",
    "a proof of principle  ( pop ) accelerator with modest requirements of achieving at least 1.5  mev proton energy , with an average beam current of at least 1  @xmath73 is under development .",
    "this pop project has also the challenging goal of having the design and construction of the entire setup in turkey within three years :  from its ion source up to the final diagnostic station , including its rf power supply .",
    "there are also two secondary goals of this project :  1 ) training accelerator physicists and rf engineers on the job ; 2 ) to encourage local industry in accelerator component construction . the design requirements of this machine can be found in table  [ tab : sanaem - pop ] . the input energy was selected to keep the rfq short for a 1.5  mev output energy and at the same time to satisfy the current requirements .",
    "the operating frequency was selected to be compatible with similar machines in europe and therefore to benefit from the already available rf power supply market .",
    "other parameters such as the inter - vane voltage , kilpatrick value etc . were chosen to be adequate for a first time machine .",
    ".spp rfq design parameters[tab : sanaem - pop ] [ cols=\"^,^\",options=\"header \" , ]      the lidos.rfq.designer software package has three modules : one for design , one for analysis and one for simulations . the results used to compare this software to demirci are obtained from the first module , which also uses an 8-term potential to calculate the rfq parameters .",
    "[ fig : demirci - and - lidos ] and fig .",
    "[ fig : demirci - lidos - geo ] contain the ratios of lidos results to demirci calculations for various variables such as kinetic energy and cell position .",
    "these results are obtained by uniquely defining the same rfq in each program with the same four parameters ( synchronous phase , intervane voltage , minimum bore radius and modulation ) .",
    "the maximum of 3 - 5% discrepancy between lidos and demirci results is assumed to arise from different calculation procedures ( e.g. 8-term vs 2-term potential ) .",
    "[ fig : demirci - and - lidos - kine ] ]    ]      _ _ toutatis _ _ _ _ _ _ @xcite is a beam dynamics simulator for high intensity rfqs and makes this using poisson solver for fields which provides to get values such as space charge effects or cavity fields between the electrodes . _ _ it interacts with demirci for rfq beam dynamics simulation purposes .",
    "it describes an rfq beamline with an input file containing different sections .",
    "the section that deals with the rfq cells has a channel block definition compatible with parmteqm .",
    "demirci s default output file is compatible with this channel block definition containing rfq cell parameters ( inter - vane voltage , aperture , synchronous phase etc . )",
    "given in 17 columns .",
    "in fact , demirci s current version relies on toutatis for all beam dynamics simulations .",
    "[ fig : demirci - and - toutatis ] shows a comparison of the main parameters obtained from demirci and toutatis .",
    "it should be noted that the negative ratio observed in the first few cells of the focusing strength ( b ) curve originates from toutatis ( v1.3 ) , which reports negative values for these cells .",
    "this issue is currently under investigation .    ]",
    "an important parameter is the rfq length which is typically in the order of few meters .",
    "however , with today s cncs , the optimal machining length is about 80 - 90  cm .",
    "therefore rfqs are designed to be built and assembled in longitudinal sections .",
    "as the gap that occurs between different sections affects directly the behaviour of the ion beam inside the rfq , it is important to incorporate it into the beam dynamics simulations .",
    "although demirci does nt directly use the section gaps for its calculations , it is possible to define any number of gaps and associated properties ( such as location , width , etc . ) as shown in fig .",
    "[ fig : gap ] and to estimate the beam dynamics effects by running the design in toutatis .    ]      _ _ lanl software suite for rfq design is perhaps one of the most commonly used computer codes which can take an input file from demirci .",
    "_ @xcite _ _ is the most common computer program to calculate fields in 2d cartesian coordinates for any cylindrically symmetric shape . as superfish is an essential tool with years of experience , it is inevitable that demirci , professing being one of the standard computer codes , can produce superfish compatible output given an rfq design . on the other hand ,",
    "parmteqm is a common program that designs and makes beam dynamics calculating up to 8 term potential .",
    "demirci is a fast , unix based modern tool using graphical techniques for rfq design .",
    "it uses analytical formulae based on two term potential to compute the light ion beam behaviour in an rfq .",
    "it also permits the user to achieve optimizations with specific goals such as a final accelerator length or a final ion beam energy .",
    "it interacts with similar software in the field , for result cross check and for further study of the rfq and beam properties .",
    "lastly , it can produce the horizontal and vertical vane shapes which can be fed into 3d solvers for more accurate electromagnetic and thermal studies based on finite element analysis techniques .",
    "a number of additions and enhancements are being planned for this new tool .",
    "the first goal is to use the more complex 8 term potential to allow a more realistic calculation of the em fields inside the rfq .",
    "this enhancement is expected to further reduce the small deviations in the results obtained with this tool and similar ones .",
    "apart from the focusing strength and defocusing factor , the inclusion of the parameters related to the stability of the transverse motion ( e.g. phase advance and dispersion ) , is ongoing .",
    "the authors aim to provide various checks on the beam stability in the next version of the program .",
    "furthermore , addition of beam dynamics calculations would make demirci a more complete solution for the rfq design .",
    "the authors are grateful to s. sultansoy , o. cakir for useful comments and jim stovall for fruitful discussions .",
    "the authors are also grateful to taek for their endorsements and to lanl for their encouragements .",
    "this study is supported in part by the taek project under grant no .",
    "in the classical @xmath35 factor calculation , the electric field is not taken into consideration as its tangential component vanishes at the cavity wall  @xcite .",
    "its longitudinal component appears only in the presence of modulated vanes and moreover inside small volume defined by the bore radius and the cell length . as an improvement to eqn.([oldq ] ) , we propose taking into account the modulation effect as follows .",
    "let the power term originating from the @xmath8 component of the electric field , which in turn is due to the vane modulation , be denoted as @xmath74 .",
    "it can be calculated by adapting the dielectric loss formula , although the power will not be lost since the medium is not a dielectric but vacuum  @xcite : @xmath75 where @xmath76 is the vacuum permittivity , @xmath77 is the electric field in @xmath8 direction and ( @xmath78 ) is the integration volume .",
    "the axial electric field integrated at the electrode tips and averaged over a cell length ( @xmath79 ) becomes independent of the surface element : @xmath80 where all variables have an implicit @xmath8 dependence making these cell number dependent , suitable for a cell by cell computation .",
    "the integration volume ( @xmath78 ) is assumed to be a right square prism of sides @xmath81 for each cell . therefore replacing the integral by a summation formula ,",
    "the new term becomes : @xmath82 where the summation is over all rfq cells .",
    "the electric energy per unit length due to modulated vanes can be also calculated similarly : @xmath83 therefore we propose a refined quality factor defined as : @xmath84 where terms without the subscript @xmath65 mean integration over the rfq length .",
    "typical contribution from @xmath85 is about 5 percent of the @xmath86 , and from @xmath87 is about 8 percent of @xmath88 .",
    "the new formula reduces the over optimistic quality factor in eqn.([oldq ] ) by about 2 - 3 percent .",
    "the choice between these two reported quality factor values is left to the user ."
  ],
  "abstract_text": [
    "<S> the design of a radio frequency quadrupole , an important section of all ion accelerators , and the calculation of its beam dynamics properties can be achieved using the existing computational tools . </S>",
    "<S> these programs , originally designed in 1980s , show effects of aging in their user interfaces and in their output . </S>",
    "<S> the authors believe there is room for improvement in both design techniques using a graphical approach and in the amount of analytical calculations before going into cpu burning finite element analysis techniques . </S>",
    "<S> additionally an emphasis on the graphical method of controlling the evolution of the relevant parameters using the drag - to - change paradigm is bound to be beneficial to the designer . </S>",
    "<S> a computer code , named demirci , has been written in c@xmath0 to demonstrate these ideas . </S>",
    "<S> this tool has been used in the design of turkish atomic energy authority ( taek ) s 1.5  mev proton beamline at saraykoy nuclear research and training center ( sanaem ) . </S>",
    "<S> demirci starts with a simple analytical model , calculates the rfq behaviour and produces 3d design files that can be fed to a milling machine . </S>",
    "<S> the paper discusses the experience gained during design process of sanaem project prometheus ( spp ) rfq and underlines some of demirci s capabilities .    </S>",
    "<S> @xmath1ankara university , department of physics , graduate school of natural and applied sciences , ankara , turkey . </S>",
    "<S> + @xmath2university of california at irvine , department of physics and astronomy , irvine , usa </S>"
  ]
}