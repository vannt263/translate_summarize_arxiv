{
  "article_text": [
    "kekb asymmetric electron positron collider has been operated for 10 years improving the experimental performance continuously . at the beginning of the commissioning",
    "it was anticipated whether the positron injection efficiency was sufficient . in order to enhance the injection efficiency several projects",
    "were performed , including double beam bunches in a pulse and continuous ( top - up ) injection during the experiment .",
    "such efforts improved the integrated luminosity , and the linac turned out not to be a bottleneck  @xcite .",
    "further challenge was that the injector is shared between four storage rings , namely , kekb - her ( high energy ring ) , kekb - ler ( low energy ring ) , pf ( photon factory ) and pf - ar ( photon factory advanced ring ) , with quite different energies from 2.5gev to 8gev and charges from 0.1nc to 10nc as in table  [ four - beams ] .",
    "there were concerns about the beam characteristic reproducibility on the beam mode changes  @xcite .    lcccc injection & beam & energy & charge & no . of + mode & &",
    "& /bunch & bunches + kekb - her & e@xmath0 & 8.0gev & 1.2nc & 1 or 2 + kekb - ler & e@xmath1 & 3.5gev & 0.6nc & 2 + kekb - ler & e@xmath0 & 4.0gev & 10nc & 2 + pf & e@xmath0 & 2.5gev & 0.1nc & 1 + pf - ar & e@xmath0 & 3.0gev & 0.1nc & 1 +    [ four - beams ]    for this reason , during the commissioning , many slow closed feedback loops were installed in order to stabilize the beam energies and orbits at several different locations along the 600-m linac  @xcite .",
    "recently , we succeeded in pulse - to - pulse beam mode changes , with modulating many parameters in 20ms .",
    "this is called as a simultaneous injection and it enabled both the luminosity tuning stability at kekb and the top - up injection to pf  @xcite .",
    "it is considered whether it may improve the injection stability with beam feedback loops even under simultaneous injection .",
    "because beam instabilities were observed at the beginning of the linac commissioning for kekb , many closed loops were installed .",
    "if the energy fluctuated , the beam position , where the dispersion function was large , was measured and rf phases at two adjacent rf sources were modulated to opposite directions from the crest phase in order to maintain the energy but not to make energy spread . if the orbit was unstable , beam positions at two locations where betatron phases are 90-degree apart were measured and corresponding steering coils were adjusted .    in order to suppress the measurement noises , a weighed average over several locations were often used , instead of a single beam position information , based on the response functions to the energy change or the beam kick .",
    "if the energy measurement noise was large , the betatron oscillation was measured using the beam positions at two locations where the dispersion functions were zero , and the information was used to compensate the energy displacement information .    those procedures were described employing a scripting computer language and operators could manipulate their parameters via a graphical user interface .",
    "the feedback gains were normally small and the time constants were several to 100s .",
    "the same procedure was also applied to stabilize hardware such as amplitudes and timings of power supplies . while those loops were simple pi ( proportional - integral ) controllers , they were very effective .",
    "the fluctuations often meant that certain equipment or utility became out of order .",
    "it was not determined well how much stability was required for such equipment at the beginning . because it may take time to analyze and fix those pieces of equipment , feedback loops were effectively applied at many locations . as the fluctuation sources were identified and resolved , those closed loops became unnecessary during the normal operation .",
    "however , they are still important during the beam studies because the beam conditions are much different from the normal ones .",
    "while a certain parameter is scanned in such studies , other parameters often have to be maintained stable .",
    "they are also effective in order to identify the reason when the beam characteristics changed unintentionally .",
    "furthermore , they can be occasionally used to predict a certain failures .",
    "thus , the information from those loops was valuable .",
    "those feedback loops were dependent on the beam modes .",
    "the linac accelerates the beams for four storage rings , kekb - her , kekb - ler , pf and pf - ar , with quite different energies .",
    "moreover , those beam modes had been exchanged every several minutes .",
    "even with such frequent beam mode changes the beam reproducibility and stabilities were maintained with the beam feedback loops .",
    "until 2008 it took from 30seconds to 2minutes to switch the beam injection modes between kekb - her , kekb - ler , pf and pf - ar .",
    "many accelerator device parameters were changed , and the slowest process was the bending magnet standardization . however , simultaneous top - up injections to three rings , kekb - her , kekb - ler and pf became necessary in order to improve the physics experiments at those rings .",
    "several sets of pulsed equipment were installed .",
    "beam optics development was also performed to support the wide dynamic range of the beam energy and charge , 3-times different energies and 100-times different charges .",
    "the betatron matching condition was established at the entrance to each beam transport line .",
    "an event - based control system was introduced , in addition to existent epics control system , in order to achieve global and fast controls .",
    "the new control system could change many parameters quickly and globally , and it enabled the pulse - to - pulse beam modulation .",
    "the linac pulse repetition is 50hz , and approximately 130 independent parameters over 600-m linac are changed within 20ms .",
    "such efforts enabled simultaneous top - up injections , and the beam current stabilized to be 1ma in 1.1 @xmath2 1.6a at kekb and 0.1ma in 450ma at pf , which contributed the physics experiment results .",
    "the new event - based control system arranges the linac for a pulse to operate in one of the ten beam modes .",
    "the injection beam modes for kekb - her , kekb - ler and pf can be switched quickly , and each beam pulse is separated by 20ms .",
    "the event - based control system is composed of three basic parts .",
    "the first part is the beam - mode pattern arbitrator / generator .",
    "it listens to the beam frequency requests from downstream rings and/or human operators , and then it arbitrates those requests based on pre - assigned priorities , and generates a beam mode pattern for up to 10s ( 20ms @xmath3 500 ) .",
    "there are certain constraints how to organize the pattern because many of the pulsed power supplies expect that they are fired at constant intervals .",
    "the main part is the event generator station .",
    "the event generator ( evg230 from mrf  @xcite ) provides an event sequence synchronized to rf clock ( 114.24mhz ) .",
    "each event is accompanied with an event code , while additional data is transferred as well .",
    "the event generator software extracts adjacent beam - mode elements out of the beam - mode pattern received from the pattern generator , and arranges several event codes corresponding to the first mode , then adds another event code to notify the beam mode of the next pulse .",
    "finally , event receiver stations accept events from the event generator through optical fiber links .",
    "the event receiver ( evr230rf from mrf ) regenerates the rf clock using the bit train . the first part of the event code sequence is used to generate signals with specific delays .",
    "the last event code informs the receiver software to prepare specific delay and analog values for the beam mode in the next pulse .",
    "approximately 130 parameters on 17 event receiver stations are changed every pulse ( fig .",
    "[ fig - config ] ) .",
    "each one of those parameters is associated with ten variables that correspond to ten beam modes , and those thousand variables can be manipulated any time by operational software .",
    "the beam - mode pattern arbitrator normally accepts the new requests from rings every several seconds , and it regenerates a corresponding pattern . under a typical operation condition ,",
    "average injection rates are 25hz for her , 12.5hz for ler and 0.5hz for pf .",
    "however , it is often required to assign all the pulses for injection .",
    "such a flexible injection pulse arrangement enables efficient use of the injector linac .",
    "as described previously , the old read - out system for beam position monitors ( bpm ) could operated at 1hz . however , for simultaneous injection it was required to process signals at 50hz .",
    "the new bpm read - out system was designed with oscilloscopes , mainly because one oscilloscope can cover several bpms and the system is simple with only passive components , so that the maintenance becomes easier .",
    "the same software as the previous system was embedded into the epics control software framework on windows xp on the oscilloscopes .",
    "it accepts the event information through the network .",
    "events are used to tag the beam - position and -charge information with the beam - mode information . as approximately 200 bpms",
    "are installed along the linac and bt , each one of which has independent variables for ten beam modes , there are @xmath22000 variables provided .",
    "the client operational software can receive beam information which is related to a specific beam mode  @xcite .",
    "under the simultaneous injection configuration the event - based control system provides beam - mode dependent control parameters .",
    "moreover , those parameters in different beam modes are organized to be independent both for controls and measurements .",
    "thus , we can see those independent parameter sets as independent virtual accelerators . for each 20-ms time slot , the event system associates one of the virtual accelerators with the real accelerator .    because those control parameters for each virtual accelerator continue to exist , human operators and operational software can act on one of those virtual accelerators without any interference between other beam modes .      bpm information and rf control parameters",
    "are also handled independently in each virtual accelerator . at first",
    ", energy feedback loops at the 180-degree arc and at the end of linac were installed again using event control parameters on each virtual accelerator as in fig .",
    "[ fig - virt ] .",
    "as parameters are independently managed , no modification to the software was necessary .",
    "the performance of those closed loops were observed with small feedback gains during the normal operation . in those feedback operations",
    "no beam stability improvements were achieved . in other words , no signs of instabilities",
    "were observed other than white noise .    for pf bt energy stabilization",
    ", it turned out that the separation of betatron and dispersion functions was not optimal and the resolution of bpms was insufficient because of the low beam charges . the procedures of the betatron oscillation compensation and the weighed average of beam positions will be applied later . because the processing speed with a scripting language is not sufficient , compiled procedures are tested as well .",
    "the orbit and energy spread stabilizations can be implemented in the same way .",
    "those beam feedback signals will be valuable information for the accelerator operation .",
    "a pulse - to - pulse modulated simultaneous injection to kekb - her , kekb - ler and pf rings was realized with an event - based fast and global control system .",
    "it provides several virtual accelerators for the accelerator operations with independent parameter sets . under such environment ,",
    "event - based closed beam energy feedback loops were successfully applied , which would provide valuable resources for the future operations including superkekb .",
    "k.  furukawa _",
    "et  al . _ , `` new event - based control system for simultaneous top - up operation at kekb and pf '' , _ proc .  icalepcs2009 _ , kobe , japan , 2009 , thp052 . n.  iida _",
    "_ , `` pulse - to - pulse switching injections to three rings of different energies from a single electron linac at kek '' , _ proc .",
    "pac2009 _ , vancouver , canada , 2009 , we6pfp110 ."
  ],
  "abstract_text": [
    "<S> beam injections to kekb and photon factory are performed with pulse - to - pulse modulation at 50hz . </S>",
    "<S> three very different beams are switched every 20ms in order to inject those beams into kekb her , ler and photon factory ( pf ) simultaneously . </S>",
    "<S> human operators work on one of those three virtual accelerators , which correspond to three - fold accelerator parameters . </S>",
    "<S> beam charges for pf injection and the primary electron for positron generation are 50-times different , and beam energies for pf and her injection are 3-times different . </S>",
    "<S> thus , the beam stabilities are sensitive to operational parameters , and if any instability in accelerator equipment occurred , beam parameter adjustments for those virtual accelerators have to be performed . </S>",
    "<S> in order to cure such a situation , beam energy feedback system was installed that can respond to each of virtual accelerators independently . </S>"
  ]
}