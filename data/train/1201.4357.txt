{
  "article_text": [
    "we examine the riemann - roch theorem on a finite graph @xmath0 , due to baker and norine @xcite , through the lens of combinatorial commutative algebra . throughout this paper , @xmath0 is undirected and connected , has @xmath1 nodes , and multiple edges are allowed , but we do not allow loops .",
    "its laplacian is a symmetric @xmath2-matrix @xmath3 with non - positive integer entries off the diagonal and kernel spanned by @xmath4 .",
    "divisors on @xmath0 are identified with laurent monomials @xmath5 .",
    "the _ chip firing _",
    "moves are binomials @xmath6 where @xmath7 and @xmath8 is in the lattice spanned by the columns of @xmath3 .",
    "the lattice ideal @xmath9 spanned by such binomials is here called the _ toppling ideal _ of the graph @xmath0 .",
    "it was introduced by perkinson , perlman and wilmes @xcite , following an earlier study of the inhomogeneous version of @xmath9 by cori , rossin and salvy @xcite .    for any fixed node",
    ", the toppling ideal @xmath9 has a distinguished initial monomial ideal @xmath10 .",
    "this monomial ideal was studied by postnikov and shapiro @xcite , and it is characterized by the property that the standard monomials of @xmath11 are the _ @xmath0-parking functions_. we construct free resolutions for both @xmath9 and @xmath10 , and we study their role for riemann - roch theory on  @xmath0 . for an illustration ,",
    "consider the complete graph on four nodes , @xmath12 .",
    "the chip firing moves on @xmath13 are the integer linear combinations of the columns  of @xmath14 the toppling ideal is the lattice ideal in @xmath15 = \\mathbb{k}[x_1,x_2,x_3,x_4]$ ] that represents @xmath16 : @xmath17 this ideal is _ generic _ in the sense of peeva and sturmfels @xcite , as each of the seven binomials contains all four variables .",
    "the minimal free resolution is given by the _ scarf  complex _",
    "@xmath18   \\,\\longleftarrow \\ , \\mathbb{k}[{\\bf x}]^7   \\,\\longleftarrow \\ ,    \\mathbb{k}[{\\bf x}]^{12 }   \\,\\longleftarrow \\ ,    \\mathbb{k}[{\\bf x}]^6    \\,\\longleftarrow \\ , 0.\\ ] ] the seven binomials in ( [ eq : kayfour2 ] ) form a grbner basis of @xmath9 , with the underlined monomials generating the initial ideal @xmath11 . that monomial ideal has the irreducible decomposition @xmath19 the ideal @xmath11 is the _ tree ideal _ of @xcite .",
    "its standard monomials are in bijection with the @xmath20 spanning trees .",
    "its alexander dual is generated by the six socle elements @xmath21 these correspond to the _ maximal parking functions _ studied in combinatorics ; see  @xcite .",
    "we claim that the duality seen in figures 4.2 and 4.3 of  @xcite is the same as that expressed in the riemann - roch theorem for @xmath0 .",
    "this will be made precise in sections 3 and 4 .",
    "the present article is organized as follows : section 2 is concerned with the case when @xmath0 is a _ saturated graph _ , meaning that any two nodes @xmath22 and @xmath23 are connected by at least one edge .",
    "we show that here @xmath9 is a generic lattice ideal , and we determine its minimal free resolution and its hilbert series in the finest grading .",
    "the scarf complex of the initial monomial ideal @xmath11 is supported on the barycentric subdivision of the @xmath24-simplex @xcite , and this lifts to the scarf complex of the lattice ideal @xmath9 by ( * ? ? ?",
    "* corollary 5.5 ) .    in section 3",
    "we revisit the riemann - roch formula @xmath25 we prove this formula in an entirely new setting : the role of the curve is played by a monomial ideal , and that of the divisors @xmath26 and @xmath27 is played by monomials @xmath28 and @xmath29 . the identity ( [ eq : rr ] ) is shown for monomial ideals that are artinian , level , and reflection - invariant .",
    "this includes the parking function ideals @xmath11 derived from saturated graphs  @xmath0 .",
    "in section 4 we extend our results to the case of graphs @xmath0 that are not saturated , and we rederive riemann - roch for graphs as a corollary . here",
    "@xmath11 is still an initial ideal of @xmath9 , but the choice of term order is more delicate @xcite .",
    "one choice is the cost function used by baker and shokrieh for the integer program in ( * ? ? ?",
    "* theorem 4.1 ) .",
    "the scarf complexes in section 2 support cellular free resolutions of @xmath9 and @xmath11 , but these resolutions are usually far from minimal .",
    "we conclude with several open questions .",
    "this paper demonstrates how riemann - roch theory embeds into combinatorial commutative algebra .",
    "our main results are theorems [ satminres_theo ] , [ rr_theo ] and [ nonsatinit_theo ] .",
    "these build on earlier works , notably @xcite and @xcite , but they go much further and are new in their current form .",
    "when this collaboration started in the summer of 2011 , both authors were unaware of the articles @xcite written on similar topics by david perkinson and his students at reed college . as our point of departure , we chose to focus on chip firing in the most classical case of undirected graphs , but with the tacit understanding that our ideals and modules generalize to directed graphs , arithmetic graphs , simplicial complexes , matroids , abelian networks , or any of the other extensions seen in the recent chip firing literature ( cf .  @xcite ) .",
    "in this section , we assume that the graph @xmath0 has @xmath30 edges between node @xmath22 and node @xmath23 , where @xmath30 is a positive integer , for @xmath31 . however , we do not allow loops , so that @xmath32 .",
    "thus , in the language of @xcite , @xmath0 is a _",
    "saturated graph_. we shall see that , under this hypothesis , the lattice ideal @xmath9 is generic , and an explicit combinatorial description of its minimal free resolution can be given . throughout this paper",
    "we work in the polynomial ring @xmath15 = \\mathbb{k}[x_1,\\ldots , x_n]$ ] over an arbitrary field @xmath33 .",
    "we begin by explicitly showing the generators of the lattice ideal @xmath9 in the case @xmath34 .",
    "[ ex : fourex ] if @xmath0 is a saturated graph on @xmath35 = \\{1,2,3,4\\}$ ] then @xmath9 is generated by @xmath36 @xmath37 @xmath38 here the @xmath30 are arbitrary positive integers .",
    "these binomials form a grbner basis .",
    "the initial ideal @xmath11 is generated by the underlined monomials .",
    "the minimal free resolution of @xmath9 has the form ( [ eq : kayfour3 ] ) .",
    "the same holds for @xmath11 , as was shown in ( * ? ? ?",
    "* corollary 6.9 ) .",
    "the minimal resolution of @xmath11 is given by the scarf complex , which is depicted in figure  [ fig : eins ] .",
    "we now state our main result in this section . for disjoint subsets @xmath39 and @xmath40 of @xmath41 $ ]",
    "we  set @xmath42 a _ split _ of the set @xmath41 = \\{1,2,\\ldots , n\\}$ ] is an unordered pair @xmath43 of non - empty disjoint subsets @xmath39 and @xmath40 whose union equals @xmath41 $ ] .",
    "the number of splits equals @xmath44 . with each split",
    "@xmath43 we associate the following binomial which is well - defined up to sign : @xmath45 these are precisely the seven binomials in example [ ex : fourex ] , one for each split @xmath43 .",
    "let @xmath46 denote the set of cyclically ordered partitions of the set @xmath41 $ ] into @xmath47 blocks .",
    "each element of @xmath46 has the form @xmath48 , where @xmath49 $ ] is a partition .",
    "we regard the @xmath50 as formal symbols , subject to the identifications @xmath51 we write @xmath15^{{\\rm cyc}_{n , k}}$ ] for the free @xmath15$]-module generated by these symbols .",
    "the rank of this free module equals the number of cyclically ordered partitions , namely @xmath52 where @xmath53 is the stirling number of the second kind , i.e. , the number of partitions of the set @xmath41 $ ] into @xmath47 blocks .",
    "let @xmath54 denote the following complex of free @xmath15$]-modules : @xmath55^{{\\rm cyc}_{n,1 } }            \\,\\longleftarrow\\,\\mathbb{k}[{\\bf x}]^{{\\rm cyc}_{n,2 } }                      \\,\\longleftarrow\\,\\mathbb{k}[{\\bf x}]^{{\\rm cyc}_{n,3 } } \\,\\longleftarrow \\,\\,\\cdots \\",
    ",            \\,\\longleftarrow\\,\\mathbb{k}[{\\bf x}]^{{\\rm cyc}_{n , n } }    \\longleftarrow \\ , 0,\\ ] ] where the boundary map from @xmath56^{{\\rm cyc}_{n , r}}\\,$ ] to @xmath56^{{\\rm cyc}_{n , r-1}}\\,$ ] is given by the formula @xmath57 in this formula it is assumed that @xmath58 , so as to ensure that all signs are consistent .",
    "-simplex supports minimal free resolutions for toppling ideals of saturated graphs with @xmath1 nodes and their initial ideals .",
    "shown here is the scarf complex ( [ eq : kayfour3 ] ) for @xmath34 , with @xmath59 vertices , @xmath60 edges and @xmath61 triangles .",
    ", width=597 ]    [ satminres_theo ] let @xmath0 be a saturated graph .",
    "the toppling ideal @xmath9 is a generic lattice ideal .",
    "it is minimally generated by the @xmath62 binomials ( [ eq : ijbinomial ] ) , these form a reverse lexicographic grbner basis , the complex @xmath63 coincides with the scarf complex , and this complex minimally resolves  @xmath64/i_g$ ] .",
    "we begin by noting that @xmath65 actually lies in the ideal @xmath9 . to see this ,",
    "let @xmath66 denote the incidence vector in @xmath67 that represents the subset @xmath39 of @xmath41 $ ] .",
    "the @xmath22-th coordinate of the vector @xmath68 is equal to @xmath69 if @xmath70 , and it is @xmath71 if @xmath72 . hence @xmath68 is represented algebraically by @xmath73 , which is hence in @xmath9 .",
    "fix any reverse lexicographic term order on @xmath15 $ ] that has @xmath74 as the smallest variable , and let @xmath75 denote the initial monomial ideal of @xmath9 . since @xmath9 is a lattice ideal , @xmath74 is a non - zerodivisor and it does not divide any of the generators of @xmath75 . we may thus regard @xmath75 as an artinian ideal in @xmath76 = \\mathbb{k}[x_1,\\ldots , x_{n-1}]$ ] .",
    "the index of the laplacian lattice @xmath77 in its saturation @xmath78 equals the number @xmath79 of spanning trees of @xmath0 .",
    "hence @xmath75 has @xmath79 standard monomials in @xmath76 $ ] .",
    "let @xmath11 denote the ideal generated by the initial monomials of the binomials in ( [ eq : ijbinomial ] ) : @xmath80\\backslash i } \\,:\\",
    ", \\hbox{$i$ non - empty subset of $ [ n-1]$ } \\,\\bigr\\rangle.\\ ] ] by construction , the inclusion @xmath81 holds .",
    "the monomial ideal @xmath11 was studied in @xcite and shown to have precisely @xmath79 standard monomials . indeed , the standard monomials of @xmath11 are in bijection with the _ @xmath1-reduced divisors_. it is known in the chip firing literature ( cf .",
    "@xcite ) that their number equals the number @xmath79 of spanning trees .",
    "hence @xmath11 and @xmath75 are artinian of the same colength in @xmath76 $ ] , so they must be equal : @xmath82 therefore the binomials ( [ eq : ijbinomial ] ) form a grbner basis , and hence a generating set , of @xmath9 .",
    "the ideal @xmath9 is a generic lattice ideal , in the sense of @xcite , because all @xmath1 variables @xmath83 occur in the binomial ( [ eq : ijbinomial ] ) .",
    "here we are using that @xmath0 is saturated . by (",
    "* theorem 4.2 ) , the scarf complex is the ( essentially unique ) minimal free resolution of  @xmath9 .",
    "it remains to be seen that the scarf complex is equal to @xmath84 .",
    "postnikov and shapiro ( * ? ? ?",
    "* corollary 6.9 ) showed that the scarf complex of the initial ideal @xmath11 is supported on the barycentric subdivision of the @xmath24-simplex , as shown in figure  [ fig : eins ] .",
    "the scarf resolution has the format ( [ eq : cycres1 ] ) , but with @xmath15 $ ] replaced by @xmath76 $ ] . here",
    ", we label the cells in that barycentric subdivision with ordered partitions @xmath85 satisfying @xmath58 . the boundary maps in the scarf resolution are then given by ( [ eq : cycres2 ] ) , namely , by the sum ranging from @xmath86 to @xmath87 , but without the additional term @xmath88 .",
    "we pass from the scarf resolution of @xmath11 to that of @xmath9 by the combinatorial rule in ( * ? ? ?",
    "* theorem 5.4 ) .",
    "this adds precisely one term to the boundary of each scarf simplex of @xmath11 . in our case ,",
    "that additional term is precisely the one above , and we get ( [ eq : cycres2 ] ) .",
    "[ ex : ressi ] returning to example [ ex : fourex ] , with the seven binomials in that order , here are the matrices over @xmath89 $ ] that represent the first and second syzygies in @xmath90 : @xmath91 @xmath92 note that the seven binomial generators of @xmath9 appear as the @xmath93-minors of the @xmath94-matrices seen in the six pairs of columns within the @xmath95-matrix of first syzygies .",
    "the syzygies of the ideal @xmath11 generated by the underlined monomials in example [ ex : fourex ] are found by replacing with @xmath96 all monomials that have the symbol `` 4 '' to the left of the arrow .",
    "one immediate application of our minimal free resolution is a formula for the hilbert series of the ring @xmath15/i_g$ ] in its natural grading by the group @xmath97 . as is customary in chip firing theory @xcite",
    ", we consider the decomposition @xmath98 where @xmath99 records the degree of a divisor on @xmath0 , and @xmath100 is the finite subgroup of divisors of degree @xmath96 .",
    "the order of @xmath100 is the number of spanning trees of @xmath0 .",
    "let @xmath101 and @xmath102 denote the generators of the group algebra @xmath103 $ ] corresponding to this decomposition .",
    "the hilbert series of @xmath15/i_g$ ] equals @xmath104 times the hilbert series of @xmath76/m_g$ ] , where @xmath105 is the initial ideal in ( [ eq : mg ] ) .",
    "the latter series equals @xmath106 this finite sum is over all elements @xmath107 that represent parking functions on @xmath0 with respect to the last node @xmath1 , and @xmath108 denotes the class of the reduced divisor of degree @xmath96 given by the vector @xmath109",
    ". see ( * ? ? ?",
    "* theorem 6.14 ) for a nice formula , due to merino @xcite , which expresses this sum with @xmath110 in terms of the tutte polynomial of @xmath0 .",
    "we fix the natural epimorphism from the semigroup algebra of @xmath111 to that of @xmath112 : @xmath113 \\rightarrow \\mathbb{z}[{\\rm div}(g ) ] \\,,\\,\\ , \\",
    ",   { \\bf x}^{\\bf u } \\mapsto t^{|{\\bf u}| } q^{{\\rm div}({\\bf u } ) } .\\ ] ] with this notation , our minimal free resolution in theorem [ satminres_theo ] implies the following result :    [ cor : hs ] the hilbert series of @xmath114/i_g$ ] in the grading by the group @xmath112 equals @xmath115    it suffices to note that the @xmath116-degree of the basis element @xmath50 of the free @xmath76$]-module in the @xmath47-th step of the resolution of @xmath11 is the exponent vector of @xmath117 .",
    "this monomial does not contain @xmath74 because @xmath118 .",
    "we close this section with a combinatorial recipe for the socle monomials modulo @xmath11 .",
    "these are the monomials @xmath119 that are not in @xmath11 but @xmath120 for @xmath121 .",
    "each permutation of @xmath122 $ ] corresponds to a flag @xmath123 of subsets @xmath124 .",
    "the flag is complete , meaning that each inclusion is strict and each @xmath125 is a singleton .",
    "let @xmath126 denote the set complement of @xmath127 with respect to @xmath41 $ ] .",
    "for instance , @xmath128 .",
    "[ gensocle_theo ] the socle monomials of @xmath76/m_g$ ] are precisely the @xmath129 monomials @xmath130 where @xmath131 runs over all complete flags of subsets of @xmath122 $ ] .    the scarf complex of @xmath11 is a minimal free resolution and it is supported on the barycentric subdivision of the @xmath24-simplex , by ( * ? ? ?",
    "* corollary 6.9 ) and our discussion above .",
    "each facet in that barycentric subdivision corresponds to a complete flag @xmath123 .",
    "the vertices of that facet are labeled by @xmath132 in the scarf complex , and the monomial label of the facet is their least common multiple .",
    "facets of the scarf complex are in bijection with the irreducible components of @xmath11 and also with the socle monomials modulo @xmath11 . by (",
    "* corollary 6.20 ) , each socle monomial is multiplied by the product of all variables to give the monomial label of the corresponding facet .",
    "our results hold verbatim for all generic sublattices of finite index in the root lattice @xmath133 , so we recover the voronoi theory of  @xcite .",
    "we posit that our commutative algebra derivation of their voronoi theory is a natural and useful one , and that it opens up new and unexpected connections .",
    "for instance , grbner bases of lattice ideals are fundamental for integer programming @xcite .",
    "one original source for that application is herbert scarf s seminal work on neighborhood systems in economics .",
    "a key example that motivated scarf was the _",
    "leontief system _ @xcite .",
    "it turns out that the lattices representing leontief systems are precisely our generic lattices here . the grbner basis property stated in theorem [ satminres_theo ]",
    "is in fact equivalent to  ( * ? ? ?",
    "* theorem 2.2 ) .",
    "in this section we fix an arbitrary artinian monomial ideal @xmath134 in a polynomial ring @xmath135 = \\mathbb{k}[x_1,\\ldots , x_m]$ ] .",
    "we focus on alexander duality @xcite , and we establish the riemann - roch formula ( [ eq : rr ] ) in this new context . towards the end of this section , and in the next section , we will recover the riemann - roch formula for graphs from the riemann - roch formula for monomial ideals . to begin with ,",
    "we need to gather the ingredients , that is , we need to redefine the notions of divisor , genus , rank and degree .",
    "the role of _ divisors _ on the monomial ideal @xmath134 is played by laurent monomials @xmath28 .",
    "( * rank of a monomial * ) [ def : rank ] the _ rank _ of a monomial @xmath28 with respect to @xmath134 is one less than the minimum degree of any monomial @xmath136 that satisfies @xmath137 .",
    "this definition is restricted to honest monomials @xmath28 , where @xmath138 . just before the statement of theorem [ rr_theo ]",
    ", we shall extend the definition of rank to all laurent monomials .",
    "the rank measures how deeply a monomial @xmath28 sits inside the ideal @xmath134 .",
    "we have @xmath139 if @xmath140 and @xmath141 otherwise .",
    "rank zero monomials form the _ border _ of @xmath134 .",
    "let @xmath142 denote the set of _ socle monomials _ of @xmath15/m$ ] .",
    "see figure [ fig : zwei ] for a picture of a monomial ideal .",
    "the ideal generators are the large black circles , and monomials in @xmath134 are labeled by their rank .",
    "the socle elements are the black squares , and other standard monomials are white squares .",
    "( * reflection invariance * ) a monomial ideal @xmath134 is _ reflection - invariant _ if there exists a _",
    "canonical monomial _",
    "@xmath143 such that the map @xmath144 defines an involution of the set @xmath145 .",
    "this requires that every socle monomial divides @xmath29 .",
    "using notation as in @xcite , we note that our artinian monomial ideal @xmath134 is reflection - invariant with canonical monomial @xmath29 if and only if the following identity holds : @xmath146 } \\,\\,\\ , = \\,\\,\\ , \\bigl\\langle\\ , { \\rm monsoc}(m ) \\,\\bigr\\rangle .\\ ] ] here @xmath4 and @xmath147}$ ] is the _ alexander dual _ of @xmath134 with respect to @xmath148 .",
    "( * genus * ) the ideal @xmath134 is _ level _ if all socle monomials have the same degree .",
    "if this holds then one plus that degree is called the _ genus _ of @xmath134 , denoted @xmath149 .",
    "let @xmath134 be the ideal generated by the seven underlined monomials in ( [ eq : kayfour2 ] ) .",
    "then @xmath134 is level of genus @xmath150 , because all six socle monomials in ( [ eq : kayfour4 ] ) are cubics , and @xmath134 is reflection - invariant .",
    "the canonical monomial @xmath151 has degree @xmath152 .",
    "but , the rank of @xmath29 is equal to @xmath153 , as can be seen from the following lemma .",
    "for @xmath154 we abbreviate @xmath155 .",
    "[ rankformart_theo ] let @xmath134 be an artinian monomial ideal",
    ". then every monomial @xmath28 satisfies @xmath156    the condition @xmath157 in definition [ def : rank ] is equivalent to @xmath158\\backslash m$ ] .",
    "maximizing the degree of @xmath159 subject to this condition is equivalent to minimizing the degree of @xmath136 .",
    "but , since @xmath134 is artinian , the maximal degree among its finitely many standard monomials is attained by one of the socle monomials @xmath160 .",
    "formula ( [ rank_form ] ) resembles the formula in ( * ? ? ?",
    "* lemma 2.2 ) for the rank of a divisor on a finite graph .",
    "we shall exploit this resemblance at the end of this section .",
    "is riemann - roch of genus @xmath60 , with canonical monomial @xmath161 and @xmath162 .",
    "generators and socle monomials highlighted in dark .",
    "monomials in @xmath134 are labeled with their rank .",
    "the square boxes correspond to the standard monomials of @xmath15/m$ ] .",
    "the dotted lines mark the boundary of the staircase region of @xmath147}$ ] .",
    "note that the identity ( [ eq : reflinv ] ) holds .",
    ", width=415 ]    the formula in ( [ rank_form ] ) can be rewritten to be reminiscent of s - pairs for grbner bases : @xmath163    we now define the _ rank _ of an arbitrary laurent monomial @xmath28 by the formula ( [ rank_form ] ) .",
    "this is consistent with definition [ def : rank ] , and it is the natural extension to monomials some of whose exponents are negative .",
    "the following main result gave this section its title :    [ rr_theo ] let @xmath134 be a monomial ideal that is artinian , level , and reflection - invariant .",
    "then @xmath134 satisfies the riemann - roch formula , i.e. ,  every laurent monomial @xmath164 satisfies @xmath165    we denote @xmath166 by @xmath167 . using the formula for rank shown in lemma [ rankformart_theo ] ,",
    "the left hand side of ( [ eq : rrf ] ) equals @xmath168 for any socle monomial @xmath169 we have @xmath170 , and hence @xmath171 taking the minimum of @xmath172 over @xmath173 , equation ( [ dplus_eq ] ) implies @xmath174 since the map @xmath175 is an involution , we can replace @xmath176 by @xmath177 in the second row of ( [ eq : dreiii ] ) .",
    "it then follows from ( [ eq : vierrr ] ) that ( [ eq : dreiii ] ) is equal to @xmath178 , as desired .",
    "theorem [ rr_theo ] can be extended to monomial ideals @xmath134 that are artinian and reflection invariant but not necessarily level .",
    "such @xmath134 arise as initial ideals from directed regular ( indegree = outdegree ) graphs .",
    "following @xcite , we define @xmath179 as one minus the minimum degree of a socle monomial of @xmath134 , and @xmath180 as one minus the maximum degree of a socle monomial of @xmath134 . using a technique similar to that in the proof of theorem [ rr_theo ]",
    ", we can derive the following riemann - roch inequalities : @xmath181 of course , the above inequality generalizes the riemann - roch formula ( [ eq : rrf ] ) : if the ideal @xmath134 is also level then @xmath182 , and the riemann - roch formula ( [ eq : rrf ] ) immediately follows from the inequalities ( [ rre_inq ] ) .",
    "we say that a monomial ideal @xmath134 is _ riemann - roch _ if it is artinian , level , and reflection invariant .",
    "see figure [ fig : zwei ] for an example in two variables . in what follows",
    "we assume that @xmath134 is a riemann - roch monomial ideal .",
    "the next corollaries are formal consequences of the riemann - roch formula , as is the case for algebraic curves and graphs .",
    "[ cano_cor ] if @xmath28 is a multiple of @xmath29 then @xmath183 .",
    "if @xmath29 divides @xmath164 , then @xmath184 . plugging this equation into the riemann - roch formula gives the assertion .",
    "note that , by definition , the degree of the canonical monomial @xmath29 equals twice the socle degree .",
    "we record the following general facts about the canonical monomial @xmath29 .",
    "[ cor : xk ] the canonical monomial of a riemann - roch monomial ideal @xmath134 satisfies @xmath185    experts will note that the rank is off by one when compared to the canonical divisor of an algebraic curve or metric graph .",
    "this discrepancy will be addressed in remark [ rmk : recon ] below .",
    "we now prepare for an analogue of clifford s theorem on special divisors .",
    "[ revtri_lem ] the rank is superadditive for monomials @xmath186 and @xmath164 of non - negative rank : @xmath187    consider an arbitrary monomial @xmath169 of degree at most @xmath188 such that @xmath169 divides @xmath189 .",
    "the following formulas define monomials @xmath190 and @xmath191 such that @xmath190 divides @xmath136 and @xmath191 divides @xmath28 : @xmath192 by construction , @xmath193 .",
    "this implies that either @xmath194 or @xmath195 . in other words",
    ", either @xmath196 or @xmath197 is in @xmath134 , and hence , their product @xmath198 is also in @xmath134 . from this",
    "we infer the inequality ( [ eq : superadd ] ) as follows : since @xmath169 is an arbitrary monomial of degree less than or equal to @xmath188 , and @xmath169 divides @xmath189 , we know that any monomial that `` defines '' the rank of @xmath189  ( i.e. , a monomial @xmath199 of minimum degree such that @xmath199 divides @xmath189 and @xmath200 ) has degree strictly greater than @xmath188 .",
    "hence , @xmath201 .",
    "( * clifford s theorem * ) let @xmath28 be a monomial dividing @xmath29 such that both @xmath202 and @xmath203 are non - negative . then @xmath204",
    ".    lemma [ revtri_lem ] and corollary [ cor : xk ] imply @xmath205 from the riemann - roch formula we have @xmath206 the desired conclusion follows by adding these two identities and dividing by @xmath207 .",
    "the construction of all riemann - roch monomial ideals of genus @xmath208 works as follows .",
    "we first fix a monomial @xmath209 with degree @xmath210 .",
    "next we choose a set @xmath211 of monomials of degree @xmath212 that divide @xmath29 .",
    "then there exists a unique artinian monomial ideal @xmath134 whose socle is spanned by the monomials in @xmath211 and their complements relative to @xmath29 : @xmath213 namely , the ideal @xmath134 is the intersection of the irreducible ideals @xmath214 where @xmath169 runs over the set @xmath215 .",
    "then @xmath134 is artinian , level , and reflection - invariant .",
    "we shall now make the connection to the riemann - roch theorem for graphs .",
    "as in section 2 , we let @xmath0 denote a saturated graph on @xmath1 nodes , with @xmath216 edges between nodes @xmath22 and @xmath23 , and @xmath11 the initial monomial ideal in @xmath217 $ ] of the toppling ideal @xmath9 with respect to a reverse lexicographic term order having @xmath74 as smallest variable .",
    "[ thm : isrr ] let @xmath0 be a saturated graph with @xmath1 vertices , @xmath218 edges , and node @xmath219 having degree @xmath220 . then the monomial ideal @xmath11 is riemann - roch with canonical monomial @xmath221    the monomial ideal @xmath11 is artinian , and it is level because all the socle monomials @xmath222 in corollary [ gensocle_theo ] have the same degree @xmath223 .",
    "this quantity is the cyclotomic number ( or genus ) of the graph @xmath0 , which , by @xcite , coincides with the common degree of all maximal parking functions .",
    "there is a natural involution @xmath175 on the set of @xmath129 maximal flags @xmath123 of subsets in @xmath122 $ ] .",
    "it takes a flag @xmath224 to the reverse flag @xmath225 . using the identification between flags and socle monomials in corollary [ gensocle_theo ]",
    ", we have @xmath226 where @xmath29 is the monomial defined in ( [ eq : m - n+2 ] ) . hence , @xmath11 is also reflection - invariant .",
    "not every riemann - roch monomial ideal arises as an initial monomial ideal @xmath11 for a connected graph @xmath0 . to see this , note that the number of socle monomials of @xmath11 is at most @xmath227 where @xmath228 is the number of variables of @xmath11 . on the other hand , riemann - roch monomial ideals can in general have more",
    "than @xmath227 socle monomials .",
    "furthermore , the initial monomial ideal @xmath11 for a connected graph @xmath0 is not necessarily riemann - roch . to see this , consider the four - cycle @xmath229 .",
    "its initial ideal is @xmath230 , with socle monomials @xmath231 , @xmath232 and @xmath233 , and @xmath234 is not reflection - invariant .",
    "in the remainder of this section we show how the familiar riemann - roch theorem for graphs is derived from theorem [ thm : isrr ] .",
    "while the proof still assumes that @xmath0 is saturated , that hypothesis will be removed in the next section .",
    "the following algebraic definitions are valid for any undirected connected graph @xmath0 on @xmath41 $ ] . here",
    "@xmath0 need not be saturated .",
    "the laurent polynomial ring @xmath235 = \\mathbb{k}[x_1^{\\pm 1 } , \\ldots , x_n^{\\pm 1}]$ ] is a module over the polynomial ring @xmath15 = \\mathbb{k}[x_1 , \\ldots , x_n]$ ] .",
    "the laplacian lattice @xmath236 is a sublattice of rank @xmath237 in @xmath238 , and we write @xmath239 for the corresponding _ lattice module _ , as in ( * ? ? ?",
    "* definition 9.11 ) .",
    "thus , @xmath239 is the @xmath15$]-submodule of @xmath235 $ ] generated by all laurent monomials @xmath240 that have degree zero in the grading by the group @xmath112 .",
    "if @xmath0 is saturated then @xmath239 is generic and the scarf complex is a minimal free resolution by ( * ? ? ?",
    "* theorem 9.24 ) .",
    "that scarf complex is precisely the _ delaunay triangulation _ in @xcite , and our point here is to redevelop the amini - manjunath approach in the language of commutative algebra .",
    "consider the set of all laurent monomials @xmath169 that are in the socle of the module @xmath239 : @xmath241 this socle is a set of laurent monomials on which the lattice @xmath239 acts with finitely many orbits , so the computation of @xmath242 is a finite algorithmic problem , as in @xcite . the problem s solution is given by the socle monomials ( [ eq : mgsoc ] ) of our monomial ideal @xmath11 .",
    "[ laplatsoc_theo ] the socle monomials of the lattice module @xmath239 are precisely of the form @xmath243 , where @xmath244 and @xmath245 runs over the minimal generators of @xmath239 .",
    "since @xmath0 is assumed to be saturated throughout this section , the lattice module @xmath239 is generic in the sense of ( * ? ? ?",
    "* definition 9.23 ) , with @xmath11 being the reverse lexicographic initial ideal of the corresponding lattice ideal @xmath9 .",
    "we claim that the stated characterization of the socle is valid for any generic lattice module that is artinian . indeed , by the proof of (",
    "* theorem 5.2 ) , the @xmath238-degrees of the @xmath1-th syzygies of @xmath239 are the vectors @xmath246 , where @xmath247 runs over the @xmath116-degrees of the @xmath248-st syzygies of @xmath11 and @xmath249 is any vector in the lattice .",
    "the socle degrees of @xmath11 are the vectors @xmath250 in @xmath116 , and the socle degrees of @xmath239 are the vectors @xmath251 in @xmath252 .",
    "we now identify laurent monomials @xmath253 with divisors on the graph @xmath0 .",
    "the @xmath22-th coordinate @xmath254 of the exponent vector @xmath255 is the multiplicity of node @xmath22 in the divisor @xmath253 .",
    "the _ degree _ of the divisor @xmath253 is its total degree as a monomial , @xmath256 .",
    "the _ rank _ of the divisor @xmath253 is defined by the same formula ( [ rank_form ] ) as in lemma [ rankformart_theo ] : @xmath257 thus , @xmath258 if and only if @xmath253 lies in @xmath239 .",
    "our definition of rank of the divisor @xmath253 coincides with the rank of @xmath255 as in @xcite . to see this , use lemma 2.7 in @xcite and",
    "note that the exponents of the socle laurent monomials of @xmath239 are the elements of the set @xmath259 in  @xcite .",
    "we finally define the _ canonical divisor _ of @xmath0 to be the monomial @xmath260 where @xmath261 is the degree of node @xmath22 . finally , we recall that the genus of @xmath0 is @xmath223 , where @xmath218 is the number of edges .",
    "the following is precisely ( * ? ? ?",
    "* theorem 1.12 ) :    [ thm : bn ] riemann - roch holds for any divisor @xmath253 on the graph @xmath0 : @xmath262    it follows from lemma [ laplatsoc_theo ] that all socle monomials of @xmath239 have degree equal to the genus of @xmath0 minus one .",
    "the lattice module @xmath239 is also reflection - invariant , in the sense that @xmath263 implies @xmath264 . using the representation in lemma  [ laplatsoc_theo ] ,",
    "the resulting involution @xmath175 on @xmath265 can be written as follows : @xmath266 where @xmath267 denotes the reverse flag as in ( [ eq : involution ] ) .",
    "note that the image of @xmath175 is in @xmath265 , since @xmath268 is in @xmath269 .",
    "the proof of theorem [ thm : bn ] is now entirely analogous to that of theorem  [ rr_theo ] . in other words ,",
    "our argument for the validity of the riemann - roch formula for reflection - invariant artinian level monomial ideals generalizes in a straightforward manner to reflection - invariant artinian level lattice modules .",
    "[ rmk : recon ] the rank of the canonical monomial of @xmath11 equals the rank of the canonical divisor of the graph @xmath0 , but the degree of the former is two more than that of the latter .",
    "we turn to graphs @xmath0 that are not necessarily saturated .",
    "the binomials in ( [ eq : ijbinomial ] ) , their syzygies in ( [ eq : cycres2 ] ) , and the ideals @xmath9 and @xmath11 are still well - defined . however , the minimality in theorem [ satminres_theo ] is no longer true , and the choice of term order is more subtle , as the next example  shows .    let @xmath0 be the edge graph of a triangular prism , labeled so that @xmath9 equals @xmath270.\\ ] ] this toppling ideal has @xmath271 minimal generators , and its free resolution has betti numbers @xmath272 .",
    "the same holds for the ideal that represents parking  functions : @xmath273 here the reverse lexicographic term order with @xmath274 was used .",
    "however , if we take @xmath275 then the reverse lexicographic grbner basis requires two more binomials .",
    "now , the initial monomial ideal has betti numbers @xmath276 .    to explain the phenomenon in this example , we fix a spanning tree @xmath277 of the graph @xmath0 that is rooted at the node @xmath1 , and we order the unknowns according to a linear extension of @xmath277 .",
    "thus , we fix an ordering of @xmath41 $ ] such that @xmath278 if the node @xmath22 is a descendant of the node @xmath23 in @xmath277 . a term order on @xmath15 $ ] is a _ spanning tree order _ if it is a reverse lexicographic term order whose variable ordering is compatible with some spanning tree rooted at @xmath1 .",
    "one spanning tree order is the toppling order considered in ( * ? ? ?",
    "* theorem 10 ) .",
    "see also @xcite for a discussion of grbner bases of toppling ideals in the inhomogeneous case .",
    "[ nonsatinit_theo ] the toppling ideal @xmath9 is generated by the binomials @xmath279 where @xmath43 runs over splits of @xmath41 $ ] such that the subgraphs of @xmath0 induced on @xmath39 and @xmath40 are connected . for any spanning tree order ,",
    "these binomials form a grbner basis of @xmath9 with initial monomial ideal @xmath11 .",
    "the complexes constructed in ( [ eq : cycres1 ] ) are cellular free resolutions .",
    "the first paragraph in the proof of theorem [ satminres_theo ] is valid in the non - saturated case .",
    "it shows that the binomials @xmath279 lie in @xmath9 . for the spanning tree term order ,",
    "the leading monomials are @xmath280 , where @xmath281 , and hence the initial ideal @xmath75 contains the monomial ideal @xmath11 of ( [ eq : mg ] ) .",
    "again , both ideals are artinian of the same colength in @xmath76 $ ] , and hence they are equal .",
    "this establishes the grbner basis property .",
    "the argument in the proof of ( * ? ? ?",
    "* theorem 14 ) shows that the property that the subgraphs of @xmath0 induced on @xmath39 and @xmath40 are connected characterizes a minimal grbner basis of @xmath9 and the minimal generators of @xmath11 .",
    "in particular , these binomials @xmath279 generate @xmath9 .    our last assertion states that ( [ eq : cycres1 ] ) with differentials ( [ eq : cycres2 ] ) gives a free resolution of @xmath9 , and dropping the last term in ( [ eq : cycres2 ] ) gives a free resolution of @xmath11 .",
    "this claim is proved by deformation to generic monomial modules , as explained in @xcite . to be precise , in our situation",
    "we replace @xmath0 by a nearby saturated graph @xmath282 with fractional edge numbers @xmath283 between any pair of nodes .",
    "the monomial ideal @xmath284 is generic and degenerates to @xmath11 .",
    "the lattice ideals @xmath9 and @xmath285 are represented by the corresponding lattice modules @xmath239 and @xmath286 .",
    "these are submodules of the laurent polynomial ring as in ( * ? ? ?",
    "* definition 9.11 ) .",
    "the lattice module @xmath286 is generic and degenerates to @xmath287 . according to ( * ? ? ?",
    "* theorem 6.24 ) , the scarf complex of @xmath284 _ with labels from @xmath0 _ gives a free resolution of @xmath11 .",
    "likewise , the scarf complex of the generic lattice module @xmath286 _ with labels from @xmath0 _ gives a free resolution of @xmath239 .",
    "the resulting minimal free resolution of @xmath285 degenerates to a ( typically non - minimal ) resolution of @xmath9 , using ( * ? ? ? * corollary 9.18 ) .",
    "these free resolutions of @xmath11 and @xmath9 are cellular because they are given by labeled simplicial complexes .",
    "let @xmath34 and @xmath0 be the @xmath288-cycle @xmath289 . for @xmath290",
    "consider the graph @xmath291 that has @xmath292 edges for every edge in @xmath0 and @xmath293 edges for every non - edge of @xmath0 .",
    "then @xmath291 is saturated for @xmath294 .",
    "the scarf complex in example [ ex : ressi ] gives the minimal free resolution of @xmath295 and this lifts to the minimal free resolution of @xmath296 . by theorem [ thm : isrr ]",
    ", the monomial ideal @xmath297 is riemann - roch , its genus is @xmath298 , and its canonical monomial equals @xmath299 .",
    "the involution @xmath300 on its six socle monomials is given by swapping the two rows below : @xmath301 setting @xmath302 and @xmath303 , we get the parking function monomial ideal of the @xmath288-cycle @xmath304 here , @xmath305 .",
    "this ideal is not reflection - invariant and hence not riemann - roch .",
    "the cellular resolution of @xmath11 induced from @xmath297 is not minimal .",
    "we now take a closer look at the combinatorial structure of our resolutions .",
    "let @xmath306 denote the first barycentric subdivision of the @xmath24-simplex , whose @xmath44 vertices , namely the non - empty subsets @xmath39 of @xmath122 $ ] , are labeled by the corresponding monomials @xmath307\\backslash i}$ ] .",
    "thus , @xmath306 is the cellular free resolution of @xmath105 referred to in theorem [ nonsatinit_theo ] .",
    "each simplex in @xmath306 is labeled by the least common multiple of the monomials that label its vertices . for any @xmath308",
    "we write @xmath309 for the subcomplex consisting of all simplices in @xmath306 whose labels properly divide @xmath169 .",
    "we next state the analogous result for the lattice module @xmath239 , that is , the @xmath15$]-module generated by all laurent monomials whose exponent vector lies in the laplacian lattice @xmath311 .",
    "we identify this lattice with @xmath312 by writing its elements as @xmath313 where each @xmath314 is unique modulo @xmath315 .",
    "the _ tropical metric _ on @xmath312 is @xmath316 we write @xmath317 for the corresponding _ flag simplicial complex_. thus , @xmath317 is the simplicial complex whose simplices are subsets @xmath318 of @xmath312 such that @xmath319 for @xmath320 .",
    "the notation `` apt '' refers to the fact that this infinite simplicial complex is the standard _",
    "apartment _ in the affine building of lie type @xmath321 .",
    "it is well - known that @xmath317 is pure of dimension @xmath237 and that it triangulates the @xmath248-dimensional affine space @xmath322 . for more on buildings and their connection to tropical geometry ,",
    "see @xcite .",
    "the apartment @xmath317 is precisely the same as the delaunay triangulation constructed in @xcite , and it also coincides with the scarf complex of @xmath282 that we used to give a cellular resolution of @xmath239 .",
    "the number of @xmath22-faces of @xmath317 modulo the lattice action is given by ( [ eq : cycnumber ] ) .",
    "each vertex @xmath323 of @xmath317 is labeled by the corresponding laurent monomial @xmath324 , and each face is labeled by the least common multiple of its vertex labels .",
    "thus , each face of @xmath317 is labeled by a laurent monomial of degree @xmath325 . we write @xmath326 for the subcomplex of all simplices",
    "whose label properly divides @xmath169 .",
    "[ cor : minsyz2 ] the number of minimal @xmath327-st syzygies of the lattice module @xmath239 in degree @xmath177 is the rank of the reduced homology @xmath328 .",
    "the sum of these ranks over all @xmath177 modulo @xmath329 counts the minimal @xmath22-th syzygies of the toppling ideal @xmath9 .",
    "this conjecture has been verified for many graphs using the software macaulay2 .",
    "we note that the two simplicial complexes appearing in ( [ eq : baryapt ] ) are different from the complex @xmath332 used in hochster s formula for the betti numbers of a lattice ideal ( * ? ? ?",
    "* theorem 7.4 ) .    the simplicial complexes @xmath326 can be large even for small graphs .",
    "let @xmath0 be the graph on four nodes , labeled @xmath333 , with laplacian matrix @xmath334 both the toppling ideal and the ideal of parking functions are complete intersections : @xmath335 the monomial ideal @xmath11 has one minimal first syzygy in degree @xmath336 .",
    "the simplicial complex @xmath337 consists of two isolated nodes @xmath338 and @xmath339 .",
    "the simplicial complex @xmath340 is two - dimensional but it has the homology of a circle .",
    "it consists of @xmath60 triangles , @xmath341 edges and @xmath342 vertices , labeled by the following generators of  @xmath239 : @xmath343 the lattice module @xmath239 has one second syzygy in this degree , translating into a first syzygy of @xmath9 .",
    "it is represented in @xmath340 by the @xmath288-cycle @xmath344 .    at present , no explicit minimal free resolution of @xmath11 is known .",
    "finding such a resolution was stated as an open problem by postnikov and shapiro in @xcite .",
    "we do not even know whether the betti numbers depend on the characteristic of the field  @xmath33 .",
    "an explicit formula for the betti numbers of the toppling ideal @xmath9 was conjectured by wilmes in @xcite .",
    "see also @xcite .",
    "wilmes formula is combinatorial , and it has been verified for all graphs with @xmath345 nodes . at present",
    "we do not know how to relate wilmes conjecture to the ranks of the homology groups in corollaries [ cor : minsyz1 ] and [ cor : minsyz2 ] .",
    "the monomial ideal @xmath11 is artinian , so its maximal syzygies correspond to the socle elements .",
    "these are the maximal parking functions , and , by ( * ? ? ?",
    "* theorem 4.1 ) , they correspond to cyclic orientations of @xmath0 with node @xmath1 as unique  sink . since all maximal syzygies of @xmath105 lift to maximal syzygies of @xmath9 , the same result holds for @xmath9 .",
    "we now derive the riemann - roch theorem for non - saturated graphs @xmath0 .",
    "let @xmath11 be the initial ideal with respect to a spanning tree order on the variables with @xmath74 as the least . by corollary [ maxsyz_cor ]",
    ", we know that the socle monomials of the laurent monomial module @xmath239 are @xmath347 where @xmath348 runs over all socle monomials of @xmath11 and @xmath245 runs over minimal generators of @xmath239 .",
    "unlike in the saturated case , the monomial ideal @xmath11 is generally not reflection - invariant .",
    "but the laurent monomial module @xmath239 is always reflection - invariant . to see this",
    ", we use lemma 3.2 of @xcite to deduce that @xmath349 , defined in ( [ eq : mgsoc ] ) , is not contained in @xmath239 for any complete flag @xmath123 of @xmath41 $ ] .",
    "this implies that @xmath350 is a socle element of @xmath239 , since every laurent monomial of degree greater than @xmath351 is in @xmath239 .",
    "we now immediately verify that @xmath239 is reflection - invariant with the involution on @xmath242 that takes @xmath352 to @xmath353 , where @xmath267 is the reverse flag of @xmath123 exactly as in the proof of theorem [ thm : bn ] .",
    "the canonical monomial is @xmath260 where @xmath261 is the degree of node @xmath22 .",
    "hence , @xmath239 satisfies the riemann - roch formula , in its monomial formulation ( [ eq : rrf ] ) , with @xmath354 and @xmath355 .",
    "* acknowledgments * : we thank david perkinson , b.v .",
    "raghavendra rao , frank - olaf schreyer , and john wilmes for helpful discussions .",
    "bernd sturmfels was partially supported by the u.s .  national science foundation ( dms-0757207 and dms-0968882 ) ."
  ],
  "abstract_text": [
    "<S> the riemann - roch theorem on a graph @xmath0 is related to alexander duality in combinatorial commutive algebra . </S>",
    "<S> we study the lattice ideal given by chip firing on @xmath0 and the initial ideal whose standard monomials are the @xmath0-parking functions . </S>",
    "<S> when @xmath0 is a saturated graph , these ideals are generic and the scarf complex is a minimal free resolution . </S>",
    "<S> otherwise , syzygies are obtained by degeneration . </S>",
    "<S> we also develop a self - contained riemann - roch theory for artinian monomial ideals . </S>"
  ]
}