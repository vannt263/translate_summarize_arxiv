{
  "article_text": [
    "understanding stellar atmospheres and their corresponding spectra has long been a corner stone in both astronomy research and education .",
    "current areas of active research that rely on synthetic stellar spectra include population synthesis of spatially unresolved extragalactic populations , extracting the spectral signatures of planetary atmospheres from the light of their host stars , and automated stellar parameter estimation pipelines for large spectroscopic surveys ( see the introduction of @xcite ) .",
    "research - grade stellar atmospheric modeling and spectrum synthesis is one of the most technically complex and forbidding , and computationally demanding , procedures in astrophysical research , and does not lend itself to casual use in undergraduate teaching and learning on commonplace computational devices . at the same time , the stellar atmospheres and spectra unit of the undergraduate curriculum is the crucial first point of contact for many students with generally applicable important ideas such as hydrostatic and thermal equilibrium , ionization and excitation equilibrium , radiative transfer and extinction ( opacity ) , and spectral line formation . among the standard learning goals of the curriculum",
    "are the understanding of the physical basis for the mk spectral class-@xmath3-relation , the mk luminosity class-@xmath4 relation , and the spectroscopic determination of abundance . a natural way to untangle the complex entanglement of physical principles that determine these phenomena and relationships is parameter perturbation , and that suggests that didacticized computational modeling should be particularly useful for both classroom demonstration and lab - style homework projects .    [ [ section ] ]    in @xcite and other papers in that series we present an approximate stellar atmosphere and spectral line modeling code , graystar3 ( gs3 ) in its most recent version , written in javascript ( js ) that runs in any web browser , and that has a didactic pedagogical user interface ( ui ) implemented in html .",
    "details about the computational methods employed can be found in @xcite and @xcite , and suggested classroom demonstrations and lab - style projects can be found in @xcite and @xcite .",
    "the strengths of gs3 include the rendering and display directly in the web browser of direct observables that can be qualitatively appreciated by a wide audience , such as the spatially resolved limb - darkened and -reddened white - light and tunable monochromatic disk images , and the visible flux spectrum with absorption from 14 important spectral lines , as well as numerous optionally displayable technical graphs of important modeled quantities .",
    "these are created by scripting html elements according to the results of internally self - consistent , albeit approximate , _ in situ _ physical modeling in js .",
    "this provides a teaching and learning tool that is adaptable for a wide range of education and public outreach ( epo ) levels , from the high school and general public level through to the introductory graduate level .",
    "gs3 allows stellar astronomy and astrophysics instructors at all levels to make use of physics education research ( per)-based demonstration - centered methods ( _ eg .",
    "_ see @xcite and @xcite ) in the classroom and to give students hands - on lab - style homework projects .",
    "[ [ section-1 ] ]    computational modeling in js has limitations that restrict the modeling gs3 can perform .",
    "js code runs on the machine on which the browser session is taking place ( the  client  ) , and for security reasons it does not provide for file i / o .",
    "therefore , there is no means to separate large amounts of physical input data , such as that comprising an atomic line list , from the source code .",
    "additionally , web browser programmers did not anticipate that js would be used for intensive applications , and browsers become unresponsive and browser sessions unrecoverable if a js script exceeds a brief execution time ( typically 20 to 30 seconds ) ( although some common browsers available for the windows 8/10 os seem less prone to this than others ) . as a result",
    ", gs3 was limited to including extinction from only 14 of the most pedagogically important mk classification and fraunhofer lines in its computation of the emergent stellar spectrum .",
    "this is sufficient to address some topics in mk spectral classification , but does not allow for genuine _ spectrum synthesis _ , in which a spectral region is computed with incorporation of most or all the line extinction that is significant .",
    "a particularly unfortunate consequence is that the johnson _ u - b _ and _ b - v _ photometric color indices computed by gs3 do not reflect the influence of line blanketing on the near uv and blue part of the spectral energy distribution ( sed ) , and are significantly discrepant with observed values for a star of given _ v - r _ index value .",
    "another limitation of gs3 is that , as an exploratory proof of concept application , the modeling incorporated crude estimates of the electron pressure ( @xmath5 ) , mean molecular weight ( @xmath6 ) , and wavelength - averaged mean extinction ( @xmath7 ) , structures from simple re - scaling of research - grade models of the sun or vega , and made use of a wavelength - independent gray extinction in its calculation of the spectral line profile .",
    "as a result , the geometric depth scale was often compressed or expanded by a factor of 10 or more compared to research - grade modeling results for models that differed significantly from either the sun or vega , and the strength of many spectral lines , as expressed as equivalent width , @xmath8 , was often discrepant with observations and research - grade modeling results by a factor of a few .",
    "[ [ section-2 ] ]    to overcome these limitations , we have developed graystarserver ( gss ) , which performs the physical modeling on the server , without the restrictions of client - side processing in js , while still taking input and displaying results in a gs3-like client - side web browser - based ui .",
    "this allows gss to be a pedagogical spectrum synthesis code as well as an atmospheric modeling code .",
    "moreover , the crude modeling of gs3 has been replaced by a much more proper , physically correct treatment that gives results that are closer to that of research - grade modeling than that of gs3 generally throughout the hr diagram .",
    "the modeling methods are not new , and we emphasize that the novel contribution is that the modeling and visualization are taking place is a platform - independent web - deployment framework .",
    "gss may be found at www.ap.smu.ca/@xmath2ishort/openstars/graystarserver/graystarserver.html .",
    "users who wish to have their own local installation may find source tarballs for gss and for the accompanying line list utility , linelistserver ( see below ) , at www.ap.smu.ca/@xmath2ishort / openstars/. in section [ server ] we describe the server - side code , including improvements with respect to gs3 , compare key results with those of the well - known research - grade code phoenix , and describe the interaction with the client - side ui ; in section [ client ] we describe the client - side post - processing package and ui with emphasis on the contrast with the gs3 ui ; in section [ clientserver ] we discuss special issues related to the client - server interaction and propose a standard for packaging and marking up stellar atmospheric and spectrum synthesis data for transmission with http ; sections [ epo ] and [ research ] discuss the applications to epo and to research , respectively . in section",
    "[ conclude ] we present conclusions .",
    "[ [ section-3 ] ]    all computational modeling is carried out on the machine that hosts the gss web site ( the  server  ) , including both the atmospheric structure and the spectrum synthesis calculations , and the code has been written in the java programing language .      in gs3 , and in its java development version , grayfox , some of the key distributions that determine the model structure and the strength or shape of spectral lines , such as the @xmath5 , @xmath6 , and the wavelength - independent gray @xmath7 structures , were crudely estimated from re - scaling from the results of a research - grade model of either the sun or vega ( a0 v ) , and the gray @xmath7 value was being used for the background continuous extinction , @xmath9 , in the line profile calculation @xcite , @xcite .",
    "gss improves greatly on the situation by following the procedure outlined in chapters 8 and 9 of @xcite to compute @xmath10-dependent physics - based cross - sections , @xmath11 , and the resulting extinction contribution , @xmath12 , for all the photon processes of h , he , or free electrons ( @xmath13 ) at temperatures found in stellar atmospheres anywhere in the hr diagram , and to then compute the atmospheric structure from the coupled structure equations , with the exception of the thermal equilibrium equation .",
    "[ [ section-4 ] ]    the procedure is outlined below . wherever possible ,",
    "expressions are evaluated logarithmically , and quantities are renormalized before direct subtraction .",
    "numerical integration is generally performed with the extended trapezoidal rule , accurate to second order ( @xmath14 ) , for simplicity .",
    "because a key aspect of the graystar project is that the code is open source and in the public domain , we identify the corresponding routines using the java class.method ( ) notation :    1 .",
    "we establish an _",
    "ad hoc _ optical depth grid , @xmath15 , with 48 points distributed uniformly in @xmath16 from -6 to 2 ( six @xmath17-points per decade ) .",
    "all structures that are re - scaled from reference models ( see below ) are interpolated onto this grid .",
    "the kinetic temperature structure @xmath18 is computed by re - scaling with @xmath3 the @xmath18 structure of a research - grade _ reference _ model computed with phoenix @xcite of either ( @xmath3/@xmath4/@xmath19$]/@xmath20 ) equal to ( 5000 k/4.5/0.0/1.0 km s@xmath21 ) - approximately a k1 v star , or ( 10000 k/4.0/0.0/2.0 km s@xmath21 ) - approximately a b9 v star , depending on whether the target model is a late - type ( @xmath22 k ) or an early - type ( @xmath23 k ) star . at each value of @xmath17 ,",
    "gss in its current public mode does not address the problem of thermal radiative - convective equilibrium and makes no further adjustment to @xmath18 . as discussed in @xcite , re - scaling with @xmath3",
    "is surprisingly accurate , as can be seen to  first order  by considering the formula for @xmath18 from the gray approximation .",
    "we perform this re - scaling separately for early- and late - type stars because their @xmath18 structures differ because of the role of convection and molecular opacity in the latter .",
    "[ gsstemp5000 ] shows a comparison of the @xmath18 structures for a star of ( @xmath3/@xmath4/@xmath19$]/@xmath20 ) equal to ( 5000 k/2.5/0.0/1.0 km s@xmath21 ) - approximately a g6 iii star - from applying this re - scaling , and as computed exactly with phoenix .",
    "method phxreftemp ( ) in classes scalet10000 and scalet5000 .",
    "starting approximations for the gas pressure , @xmath25 , and the partial electron pressure , @xmath5 , structures are produced by re - scaling the @xmath25 and @xmath5 structures of the relevant reference model with @xmath4 , @xmath26 $ ] , and he abundance , @xmath27 , according to the prescriptions given in chapter 9 of @xcite .",
    "the scaling with @xmath4 and with @xmath19 $ ] for both @xmath28 and @xmath29 is crudely temperature dependent in that the exponent in the scaling law differs for early- and late - type stars .",
    "the resulting @xmath25 and @xmath5 structures are to be refined by iteration .",
    "methods phxrefpgas ( ) and phxrefpe ( ) in classes scalet10000 and scalet5000 .",
    "the hydrogen number density structure , @xmath30 , is computed from the ideal gas law equation of state ( eos ) as @xmath31 ) , where @xmath32 is the fractional abundance of chemical element @xmath33 with respect to h , @xmath34 , and we include all elements up to zn ( z=30 ) and four relatively abundant neutron capture elements ( rb ( @xmath35 ) , sr ( @xmath36 ) , cs ( @xmath37 ) , and ba ( @xmath38 ) ) . the number density structures of the remaining elements then follow from @xmath39 , and the mass density structure follows from @xmath40 , where @xmath41 is the atomic mass of element @xmath33 .",
    "we use the solar abundance distribution of @xcite , scaled by the user - input value of @xmath19 $ ] , for the @xmath32 values .",
    "methods getnz ( ) and massdensity2 ( ) in class state . 5 .",
    "the ionization fractions , @xmath42 , are computed for the first five ionization stages ( @xmath43 to 5 , or fewer for h , he , li , and be ) of all species , @xmath33 , using the last estimate of @xmath5 on the right hand side of the saha equation for @xmath44 .",
    "the @xmath42 structures are then used to refine the @xmath45 ( and @xmath5 ) structures by accounting for @xmath13 particles liberated by ionization , as @xmath46 .",
    "the @xmath42 values and the @xmath45 structure are refined by three iterations of this step .",
    "( to ensure rapid responsiveness , we do not try to achieve convergence by any criterion . )",
    "the refined @xmath45 structure is used to compute the mean molecular weight , @xmath6 , structure .",
    "method levelpopsserver.stagepops ( ) .",
    "the @xmath18 and refined @xmath5 structures are used to compute the linear extinction coefficients , @xmath12 , in units of @xmath47 per neutral h atom , or per h particle , for eight extinction sources : @xmath48 for the lowest 30 atomic energy levels , @xmath49 , h@xmath50 @xmath48 , h@xmath50 @xmath49 , h@xmath51 absorption , @xmath48 and @xmath49 , he@xmath50 @xmath49 , and @xmath13 thomson scattering . following the procedure in chapter 8 of @xcite ,",
    "the hydrogenic formulae for @xmath11 and the approximate formulae for the quantum mechanical gaunt factors , @xmath52 and @xmath53 , are used for the @xmath48 and @xmath49 sources , the @xmath54 values for the h@xmath50 @xmath48 and @xmath49 , h@xmath51 , and he@xmath50 @xmath49 sources are based on polynomial fits to the relevant physical data , and the total @xmath48 and @xmath49 extinction is scaled approximately from the total @xmath48 and @xmath49 extinction .",
    "these are then put onto a common linear extinction scale in units of @xmath47 , added together at each @xmath17 point , and converted to continuum mass extinction coefficients , @xmath55 , by depth - wise division by the @xmath56 structure .",
    "the rosseland mean mass extinction coefficient , @xmath57 , is then computed from the @xmath55 distribution .",
    "we do not account for extinction from metals , or from molecules other than h@xmath51 , and we expect our @xmath55 distribution to increasingly underestimate the true value as @xmath10 decreases below 400 nm .",
    "methods kappas2 ( ) and kapros ( ) in class kappas .",
    ".   the total pressure structure , @xmath58 , is then refined by integrating the formal solution of the hydrostatic equilibrium ( hse ) equation on the logarithmic optical depth scale , @xmath59 , with an _ ad hoc _ initial condition of @xmath60 equal to -4 @xmath61 dynes @xmath62 , which requires the @xmath57 structure from the previous step .",
    "the bolometric radiation pressure , @xmath63 , is then computed under the assumption of a black - body intensity distribution ( @xmath64 given by @xmath65 ) , and the @xmath25 structure is recovered by evaluating @xmath66 , where @xmath67 is equal to the value of @xmath68 , where @xmath69 is equal to the value of @xmath70 . to avoid unphysically low values of @xmath28 in the upper atmospheres of early - type stars , we artificially limit the value of @xmath71 to 0.5 ( in reality such stars are not in hse in the layers where this limit is applied ) .",
    "methods hydroformalsoln ( ) and radpress ( ) in class hydrostat .",
    "steps 4 through 7 are iterated three times , each involving three sub - iterations of step 5 . again , to ensure responsiveness , we do not try to achieve a convergence criterion . figs .",
    "[ gsspe5000 ] and [ gsspe10000 ] show the @xmath25 and @xmath5 structures resulting from this procedure as compared to direct computation with phoenix for models of ( @xmath3/@xmath4/@xmath19$]/@xmath20 ) equal to ( 5000 k/4.5/0.0/1.0 km s@xmath21 ) and ( 5000 k/2.5/0.0/1.0 km s@xmath21 ) , and of ( 10000 k/4.0/0.0/1.0 km s@xmath21 ) , respectively .",
    "our approximate procedure yields results comparable with those of phoenix research - grade modeling for early - type models , and for late - type of a range of @xmath4 values .",
    "we compute the geometric _ depth _ scale , @xmath72 , defined as increasing _",
    "in_ward , by re - arranging and integrating the definition of the radial optical depth scale , @xmath73 , with an initial condition of @xmath74 cm .",
    "the above procedure necessarily involves a subtle inconsistency in that the phoenix reference models are tabulated on the @xmath75 scale ( monochromatic continuous extinction at 1200 nm ) , whereas we effectively interpret it as the rosseland optical depth scale @xmath76 .",
    "however , the reference @xmath25 and @xmath5 distributions are being taken as initial estimates that are subsequently refined , and any distortions in the @xmath18 structure are minor compared to the approximations of computing the @xmath18 by re - scaling and neglecting metal extinction , and , for late - type stars , neglecting molecular extinction and convection .    because of the larger number of @xmath10 points required by spectrum synthesis , the number of angles with respect to the local surface normal , @xmath77 , at which the out - going surface monochromatic specific intensity distribution , @xmath78 , is sampled , is restricted to 11 ( taken from the zero - positive domain of a 20-point gauss - legendre quadrature ) rather than the 17 currently used in gs3",
    "using only 11 @xmath77 values for the outgoing quadrant under - samples @xmath79 with respect to research - grade modeling , in which the value is more typically 16 , but our choice crucially limits the number of ( @xmath10 , @xmath77 ) pairs for which @xmath78 must be computed , and is consistent with the overall approximate nature of gss as compared to research - grade modeling .",
    "all other discretizations are the same as in gs3 ( except the @xmath10 sampling of the spectrum , of course ) . in the description below we make use of the java class.method ( ) notation to identify new post - gs3 procedures in the graystarserver and linelistserver java packages .",
    "[ [ section-5 ] ]    beyond what gs3 does , gss also computes a synthetic spectrum based on a significant atomic line list ( _ ie .",
    "_ spectrum synthesis ) .",
    "the method employed is an extension of the method used in gs3 to accommodate 14 lines , and represents an unusual approach for lte spectrum synthesis to reduce both computing time and the amount of data that must be transmitted from the server to the client .",
    "[ [ line - list ] ] line list + + + + + + + + +    we create the line list from the ascii plain text output from the nist atomic spectra database @xcite ( http://physics.nist.gov/asd ) .",
    "the optional oscillator strength , @xmath80 , and @xmath81 fields are requested , as well as the standard excitation energy , @xmath82 of the lower energy level , @xmath83 , of the transition , and the line center wavelength in vacuum , @xmath84 .",
    "the line list processing procedure combines the @xmath80 and @xmath81 values to extract the statistical weight , @xmath85 , of the level @xmath83 . as of this report",
    ", the line list contains all permitted and forbidden lines in the database of @xmath86 with @xmath87 nm for all ionization stages up to and including stage iv for all elements up to and including zn ( @xmath88 ) , and the first two ionization stages of four relatively observable important neutron capture elements ( rb , sr , cs , and ba ) , and amounts to just over @xmath89 lines .",
    "the list includes all separately listed multiple components of lines .",
    "[ [ section-6 ] ]    we have developed a java package called linelistserver that reads in the nist ascii line list , performs preliminary processing , including the determination of @xmath85 values , converts it to byte data type , and writes it to a machine readable byte file that gss reads using the java bufferedinputstream.read ( ) method and the fileinputstream class .",
    "the byte version of the line list is only 0.5 mbytes in size and is read very quickly as byte array data ( @xmath90 second when using a buffer size of 8 kbytes ) .",
    "[ [ energy - level - populations ] ] energy level populations + + + + + + + + + + + + + + + + + + + + + + + +    for each species , @xmath91 ( element and ionization stage ) , represented in the line list , gss initially computes the total species populations , @xmath92 , once and for all with the saha equation , and stores it in an array held in memory .",
    "the partition function of species @xmath91 , @xmath93 , for the first two ionization stages ( i and ii ) is estimated by interpolation in temperature between the low- and high - temperature values given in @xcite .",
    "the partition functions of the higher ionization stages is approximated with the ground state statistical weight for that species , @xmath94 , which is more accurate for lower than for higher @xmath95 values .",
    "the lower energy level population of a line transition ( @xmath96 ) , @xmath97 , is computed on demand with the boltzmann equation for each line in the line list .",
    "this results in some instances of @xmath97 being computed more than once in the case of multiple lines having a common lower level , @xmath83 .",
    "however , the computation of @xmath97 from @xmath98 is done logarithmically and involves only two additions , one multiplication , and one exponentiation when the denominator , @xmath99 , in the boltzmann factor has been precomputed .",
    "this approach has the advantage of avoiding a scheme for matching each transition , @xmath96 , to a precomputed corresponding @xmath97 value , and is suitable for our modest line list where the number of re - computations of @xmath100 for the same @xmath91 and @xmath83 is limited .",
    "the levelpops.levelpops ( ) method of grayfox has been modified to provide the levelpopsserver.stagepops ( ) and levelpopsserver.levelpops ( ) methods for computing the @xmath98 and @xmath97 values , respectively .",
    "[ [ wavelength - sampling ] ] wavelength sampling + + + + + + + + + + + + + + + + + + +    gss starts with the very coarse grid of 250 @xmath10 points that is employed in gs3 to sample the overall sed uniformly in @xmath101 .",
    "a pure continuum surface flux spectrum , @xmath102 , that neglects line opacity is computed on this sparse grid as in @xcite for use in continuum rectification of the spectrum with line opacity . for each spectral line that meets the line - to - continuum extinction ( @xmath103 ) criterion for inclusion",
    ", gss inserts a grid of @xmath104 points centered on the @xmath84 value of the line ( @xmath105 ) that samples the line profile uniformly in the gaussian core and logarithmically in the lorentzian wings . the grayfox linegrid.linegridvoigt ( ) method",
    "is used to create the grid of @xmath104 points .",
    "this results in a highly non - uniform , sparse @xmath10 sampling of the spectrum synthesis region in which @xmath10 points are generally _ only _ present where these is a spectral line , and continuum regions between lines are sparsely sampled .",
    "[ [ section-7 ] ]    gss then computes the normalized line profile , @xmath106 , and the monochromatic _ line _ extinction coefficient distribution , @xmath107 , for each line with the original grayfox lineprof.voigt ( ) and linekappa.linekap ( ) methods , respectively .",
    "given our unusually sparse @xmath10 sampling that largely covers spectral lines only , we treat _ all _ lines with full approximate voigt profiles ( _ ie . _ including the lorentzian wings ) , including those lines that might be weak enough to normally warrant treatment of the gaussian core only .",
    "line broadening is treated as in gs3 - all broadening mechanisms are assumed to produce lorentzian wings ( including the non - lorentzian @xmath13-impact linear stark broadening of lines ) , characterized by a broadening parameter @xmath108 , and the user may adjust a universal logarithmic lorentzian broadening enhancement factor , @xmath109 , between values of 0 and 1 . beyond the gs3 treatment reported in @xcite , gss accounts for radiation ( natural ) broadening by adding the einstein coefficient for spontaneous de - excitation , @xmath110 , taken from the nist line list , such that @xmath111 .",
    "this treatment underestimates the amount of radiation broadening by neglecting the effect of downward transitions from level @xmath112 other than @xmath113 on the life - time of the upper level @xmath112 , but is consistent with the overall approximate nature of gss .",
    "[ [ section-8 ] ]    as gss processes the line list , the @xmath114 distribution for each successive line that is to be included is added cumulatively to the total monochromatic extinction distribution , @xmath115 , so that line blending is approximately accounted for .",
    "the computation of the total monochromatic optical depth scale , @xmath116 , and the @xmath78 distribution , are then computed as is gs3 with the linetau2.taulambda ( ) and formalsoln.formalsoln ( ) methods .",
    "[ [ line - selection ] ] line selection + + + + + + + + + + + + + +    for each line in the list that falls within the requested synthesis region , gss performs an initial computation of the ratio of line extinction to continuous extinction at line center , @xmath117 , at three sample @xmath118 values ( -5.0 , -3.0 , -1.0 ) , and discards the line if the value is below the criterion for inclusion at _ all three _ depths .",
    "this conforms to standard practice established by research - grade codes .",
    "the procedure is the same as that for full line profiles , except that the new linegrid.linegriddelta ( ) and lineprof.delta ( ) methods are used in place of the linegrid.linegridvoigt ( ) and lineprof.voigt ( ) methods to treat the line with a single - point line profile . to expedite the computation when the application first loads , the default value of @xmath117 is -2.0 so that only significantly strong lines are accounted for , but the value may be reduced to a lower limit of -4.0 .",
    "[ [ section-9 ] ]    figs . [ gssflux500045 ] and [ gssflux500025 ]",
    "show a comparison of spectra in the important @xmath119 region as computed by gss and phoenix for models of ( @xmath3/@xmath4/@xmath19$]/@xmath20 ) equal to ( 5000 k/4.5/0.0/1.0 km s@xmath21 ) and ( 5000 k/2.5/0.0/1.0 km s@xmath21 ) .",
    "[ gssflux10000 ] shows the same comparison in the region of the strongest early - type mk classification diagnostic other than the balmer lines , namely the @xmath120 line , for a model of ( 10000 k/4.0/0.0/1.0 km s@xmath21 ) ( a comparison of balmer lines is not helpful because gss does not treat the difficult linear stark broadening that is necessary to even approximately model the saturated lines ) . for the early type star it is clear that we systematically overestimate the strength of weak spectral lines as a result of underestimating the value of @xmath121 by neglecting metal @xmath48 extinction",
    "however , the strong and saturated lines that serve as pedagogically important classification diagnostics are reproduced well enough to be credibly demonstrative .",
    "[ [ section-10 ] ]    gss uses a web browser - based ui that is adapted from that of gs3 , and @xcite contains a description and justification of the ui content , organization , and functionality .",
    "the client may be found at link : www.ap.smu.ca/$\\sim$ ishort / openstars / graystarserver[www.ap.smu.ca/$\\sim$ ishort / openstars / graystarserver ] .",
    "post - processing of the raw @xmath78 and monochromatic surface flux , @xmath122 , distributions to compute synthetic observables such as photometric color indices , the @xmath123 white light and narrow - band gaussian filter ( see below ) disk images , and the equivalent width , @xmath8 , of absorption features is still performed on the client side in js to keep the structure of the data sent from the server to the client as simple as possible , and to retain flexibility in how different clients may choose to post - process basic modeling output from the server .",
    "the js client also performs the macro - turbulent and rotational broadening of the synthetic spectrum by convolution of the disk integrated @xmath124 spectrum with appropriate broadening kernels .",
    "gss improves upon the gs3 ui by making use of the html5 @xmath0canvas@xmath1 element .",
    "this allows for proper line plots , and color and brightness gradient shading in the rendering of the stellar disk and visible flux spectrum , leading to greater photo - realism .",
    "[ [ section-11 ] ]    the gs3 ui panel that contains the inputs for the atomic and line transition parameters of a generic , representative , high resolution line profile are obviated here , and is replaced in gss with a panel with inputs controlling the spectrum synthesis , shown in fig .",
    "[ finput ] .",
    "these are the minimum value of @xmath117 for a line to be included , the beginning and ending wavelengths [ @xmath125 , @xmath126 , the rms value of the macroturbulent velocity distribution ( @xmath127 ) , the surface equatorial rotational velocity ( @xmath128 ) , and the inclination of the rotation axis with respect to the line - of - sight ( @xmath129 ) , and a radio switch that selects for  fine  or ",
    "@xmath104 sampling of the line profiles .",
    "to avoid synthesis calculations that would exceed the normal time limit of an http request ( see below ) , especially with synthesis in the crowded blue spectral region , the value of @xmath130 is limited to being less than 10 nm greater than that of @xmath125 .",
    "fine  setting specifies nine points in the gaussian core ( a line center point and four points per half - core distributed symmetrically about @xmath84 ) , and 18 in the lorentzian wings ( nine per wing ) , for a total of 27 @xmath104 points per line .",
    "for the  coarse  setting , these numbers are five and six , respectively , for a total of 11 @xmath104 points per line . given the sparse @xmath10 sampling in which generally only spectral lines are sampled , the  fine  setting is generally necessary for a spectrum that would be visually meaningful to the inexperienced .",
    "coarse  setting speeds up the calculation somewhat , and is more useful for quick reconnaissance .",
    "the ui also has a link that allows the user to view the plain text ascii version of the line list .",
    "like gs3 , gss is equipped with presets for sample spectral lines that are pedagogically important . in the case of gss , choosing a preset causes the range @xmath131 $ ] to center on the preset line .",
    "[ [ section-12 ] ]    the simple monochromatic imaging filter that gs3 has has been replaced by a proper narrow band gaussian filter for which the user can adjust the value of the band - width , @xmath132 , as well as tune the central wavelength , @xmath133 , as before . the ability to adjust the value of @xmath132 leads to a wider variation of the limb darkening of the filtered disk image when @xmath133 lies between @xmath125 and @xmath130 in a region where",
    "many spectral lines are closely spaced .",
    "additionally , beyond what gs3 originally provided for , gss includes the option to print out the individual chemical abundances on the logarithmic @xmath134 scale ( the abundance distribution is the solar one of @xcite ) , and to display and print out the total populations , @xmath135 , at the depth of @xmath136 for the first three ionization stages , @xmath91 , of any species included in the synthesis .",
    "[ [ section-13 ] ]    gss features an output panel , shown in fig .",
    "[ foutput ] , containing the synthetic spectrum , that is triple the width of the standard output panels to enhance visualization of fine detail .",
    "the data structure returned by the server includes the species identifications and @xmath84 values for the lines included in the synthesis , and these are marked on the plot .",
    "gss computes and displays the total equivalent width , @xmath8 , in pm , of _ all _ lines included in the synthesis region . to compute @xmath8 for a single line of interest",
    ", the user should restrict the range [ @xmath125 , @xmath126 to bracket and isolate the line .",
    "this panel also displays the values of the macroscopic broadening parameters @xmath127 , @xmath128 , and @xmath129 , as specified by the user .",
    "the gss ui inherits from gs3 a monochromatic rendering of the spatially resolved disk for which the user can tune the value of the imaged wavelength , @xmath133 ( see @xcite ) , and now , also , the rms band - width , @xmath132 .",
    "if the value of @xmath133 falls within in the spectrum synthesis range ( @xmath137 ) , it is indicated in the spectrum synthesis plot .",
    "this enables a user to relate the appearance of the monochromatic disk to the amount of total extinction , @xmath138 , near @xmath139 .",
    "gss inherits from gs3 a direct image of the visual band spectrum , which , in the case of gss only reflects those spectral lines that are contained in the range [ @xmath140 .      to compute a rotational broadening kernel as described by @xcite ,",
    "gss requires a narrow band or monochromatic continuum limb darkening coefficient ( ldc ) , @xmath141 , for the spectral region being synthesized , where for the linear limb darkening law    @xmath142    for a @xmath10 value approximately midway between @xmath125 and @xmath130 , gss computes the mean @xmath141 value for each of the 11 @xmath77 points from    @xmath143    gss includes the option to print out the ldc values for all @xmath10 values in the coarse @xmath102 grid .",
    "the js and html code running on the client sends the input modeling parameters to the server attached to an asynchronous http request using the xmlhttprequest ( ) method .",
    "the post and asynchronous = true options are specified in the open ( ) method of the object returned by xmlhttprequest ( ) . calling the open ( ) method in asynchronous mode allows the js and html code to proceed with any processing that it can while waiting for the response from the server , which allows for a smoother user experience given the time required to respond to more demanding spectrum synthesis parameters .",
    "[ [ section-14 ] ]    the server returns the following data , in cgs units ,    1 .   the vertical atmospheric structure , @xmath144 , @xmath145 , @xmath146 , @xmath56 , @xmath45 , @xmath6 , and @xmath57 .",
    "2 .   the overall low resolution synthetic flux spectrum ( sed ) computed with and without line opacity , @xmath147 and @xmath148 .",
    "3 .   the specific intensity distribution , @xmath149 .",
    "4 .   the high resolution continuum rectified spectrum in the synthesis region , @xmath150 .",
    "the chemical species identifications and central wavelength , @xmath84 , of all lines for which extinction was included in the synthesis . 6 .   the number of spectral lines for which extinction was included in the synthesis . 7 .   the number of vertical @xmath59 points sampling the atmosphere , @xmath101 points sampling the sed , @xmath77 points sampling the @xmath151 distribution , and @xmath10 points sampling the synthesis region . 8 .",
    "the monochromatic linear ldc values , @xmath141 . + and 9 .",
    "the total ionization stage population values , @xmath135 .",
    "all numeric quantities are transmitted as their natural ( base @xmath152 ) logarithms .",
    "this data arrives encoded in a lengthy json ( javascript object notation ) string and is accessed with the responsetext field of the object returned by xmlhttprequest ( ) . the js code decodes the json string with the json.parse ( ) method , and the data accessed through the corresponding fields of the object returned by json.parse ( ) . from this point",
    "the js code proceeds to display the modeling results in the same way gs3 does , with the addition of the spectrum synthesis content .      the http request sent by the client",
    "is received by a php script and the attached model parameters are accessed through the corresponding keyed elements of the intrinsic superglobal @xmath153post [   ] array variable .",
    "the parameters are ",
    "sanitized  to protect the server from malicious cross - site scripting ( xss ) and appended as command - line arguments to an invocation , made with the exec ( ) function , of the executable code that performs the modeling .",
    "the php script captures everything written to the standard output ( stdout ) by the executable , concatenates it in one lengthy string variable , and encodes it in json for return to the client .",
    "the structure of the json string used by gss to transmit the modeling output from the server to the client may be viewed by visiting the url link : www.ap.smu.ca/$\\sim$ ishort / openstars / graystarserver / solardemo.php[www.ap.smu.ca/$\\sim$ ishort / openstars / graystarserver / solardemo.php ] .",
    "this string represents a suggested standard for marking up and packaging spectrum synthesis and model atmosphere data for both transmission and storage .",
    "the advantage of using json is that any application written in a web - aware programing language can simply call a library routine ( _ eg . _",
    "the json.parse ( ) method of js ) to decode the json string , unpack the variables , and detect the name for each field containing a data item .",
    "[ [ section-15 ] ]    this suggested standard implies a number of more fundamental suggestions for standard practice that involve expanding the definition of a  synthetic spectrum  to necessarily and universally include the natural logarithm of the following data items in pure cgs units :    1 .",
    "the @xmath10 and corresponding @xmath122 values of the blanketed spectrum , as is currently the expectation , _ along with _ those for the unblanketed continuum spectrum , @xmath154 , computed with the same atmospheric model , 2 .",
    "the corresponding @xmath78 values at a set of @xmath77 values that critically sample the @xmath77 dependence of @xmath155 ( typically 16 values ) , 3 .    the chemical identities and @xmath84 values of all lines for which extinction was included in the spectrum synthesis calculation , 4 .",
    "the vertical structure of the atmospheric model that produced the spectrum , including @xmath156 , one of @xmath157 , @xmath158 , or @xmath159 as appropriate , and the corresponding @xmath160 , @xmath161 , @xmath162 , @xmath163 , @xmath164 , and mean molecular weight ( @xmath165 ) structures , 5 .",
    "the stellar parameters @xmath3 , @xmath4 , @xmath166 $ ] ( if scaled solar modeling is used ) , @xmath167-element enhancement , @xmath168 , and one of @xmath169 , @xmath170 , or @xmath171 if the modeling uses spherical geometry , 6 .   the values of the individual abundances of the astrophysically important chemical species , + and that 7 .",
    "the community use standard labels for each of these data items in the json mark - up .",
    "[ [ section-16 ] ]    item 1 ) will ensure that end - users have a way to accurately and unambiguously rectify synthetic spectra .",
    "item 2 ) will become increasingly important as ir- and visible - band stellar interferometry become increasingly important and the community wishes to model visibility and imaging data .",
    "item 3 ) would be especially valuable for identifying any ambiguities or disagreements about the identity of the species most responsible for any given spectral feature .",
    "items 4 ) and 5 ) would make explicit the atmospheric structure responsible for a given spectrum and serve as internal consistency checks , and we note that the @xmath156 and @xmath163 values can be combined with the @xmath172 structure to approximately recover the mean extinction coefficient structure , @xmath173 .",
    "item 7 ) would require that the community adopt universal variable names for all these data items in any applications that are developed to work with synthetic spectra , and would increase the transparency necessary for independent critical scrutiny of codes .",
    "this suggested standard involves incorporating atmospheric models into the definition of a  synthetic spectrum  .",
    "the current wide - spread availability of high band - width , and of large computer memory and data storage capacity , provides us with an opportunity adopt a standard that will maximize transparency and minimize inadvertent misinterpretation of a synthetic spectrum .",
    "the executable atmospheric modeling and spectrum synthesis code on the server side could be any code compiled from any programing language .",
    "as long as the i / o routines have been adapted so that the code expects the command line arguments that the server - side php script includes in the exec ( ) call , and so that the code writes to stdout the data items in the order and format the php script expects to capture , then gss will work just as it does with its current java modeling code . therefore ,",
    "if responsiveness is not a concern , the gss client could be used to interact with , and display the results of , research grade codes written in scientific programing languages such as fortran and c. as a result , results of research quality could be displayed with the platform - independent client - side ui .",
    "beyond the demonstrations enabled by gs3 , the spectrum synthesis plot could be used in conjunction with the monochromatic disk image to demonstrate or investigate how the monochromatic image changes as one scans with @xmath133 through the wide range of total monochromatic extinction , @xmath174 , in a narrow @xmath10 range provided by a saturated spectral line .",
    "such a demonstration is aided by the @xmath133 indicator ( vertical line labeled  filter  in fig .",
    "[ foutput ] ) in the spectrum synthesis plot .",
    "a classic example is to scan through the blue wing of the heavily saturated k line in a late type dwarf or giant .",
    "the gss interface allows students to directly see how the monochromatic limb - darkening decreases as one progressively scans from the far wing to line center at @xmath84 .",
    "this serves as an important demonstration of the eddington - barbier relation in @xmath175 and @xmath77-space simultaneously , and is relevant to how the vertical structure of the solar atmosphere can be determined semi - empirically .",
    "an animation of the this demonstration in the vicinity of the @xmath176 line is available at www.ap.smu.ca/@xmath2ishort/openstars/mgibscan.gif .",
    "[ [ section-17 ] ]    gss can be used to directly demonstrate the dramatic increase in the density of spectral lines per @xmath104 interval ( an important phenomenon to consider when planning spectroscopic observations ) , and students could be asked to draw a mathematically based conclusion about the variation in the density of lines per energy interval , @xmath177 .",
    "the synthetic spectrum is annotated with line identifications , and students can be asked to think about the relative representation of different elements among the spectral lines , appreciate by direct experience the disproportionate representation of fe , and be asked to think about what peculiarities of fe give rise to the phenomenon ( both relatively large @xmath19 $ ] and a rich energy level structure ) .",
    "students could be asked to note which ionization stages are represented among the spectral lines in stars of various @xmath3 over a wide range , and to relate what they find to ionization equilibrium and mk spectral classification .",
    "the user may inspect the plain text ascii version of the line list by clicking on the link provided in either the input or output panels for the spectrum synthesis , and relate the atomic data values such as those of @xmath80 and @xmath82 to the strength of features in the synthetic spectrum .",
    "like gs3 , gss makes use of a method of estimating the background continuous extinction , @xmath178 , that is much more approximate than that of research grade codes ( an _ ad hoc _ combination of kramer s scaling laws for the different major extinction source types , see @xcite ) .",
    "computed line strength is sensitive to @xmath179 , so the modeled line strengths are not of research accuracy .",
    "however , the line strengths _ are _ sufficiently accurate that gss could serve as a reconnaissance tool to remind oneself quickly whether a particular chemical species of interest has clean lines of useful strength in a particular @xmath10 range , and this could be useful in guiding decisions that need to be made quickly ( _ eg . _ if one has unexpected time to re - tune a spectrograph during an observing run ) , or when one is writing an observing proposal .",
    "[ [ section-18 ] ]    as noted above , the gss client - server interaction and client - side ui are oblivious to the nature of the executable that performs the server - side physical modeling , and it could be a research - grade code , particularly if the server is powerful enough to execute a research - grade code quickly .",
    "this would allow the gss client ui to be used for inspection of research results .",
    "the ease of producing client - side applications to post - process and display research - grade modeling results would be enhanced by conformity to the standards for structuring and marking up spectrum synthesis products for transmission and storage that were described in section [ standards ] .",
    "gss extends the functionality of gs3 by providing for spectrum synthesis so that plausible spectra can be displayed for epo purposes . to achieve this",
    ", it moves beyond the pure client - side modeling of gs3 by moving the physical modeling to the server side and developing a standard for the transmission of atmospheric modeling and spectrum synthesis data via the web using the xmlhttprequest ( ) method .",
    "this moves the web - based astrophysical modeling approach pioneered by gs3 into a realm that allows for more powerful and realistic modeling with any language that be compiled on the server side .",
    "a natural next step would be to include molecular line opacity in the spectrum so that gss is even more useful for pedagogically demonstrating and investigating late - type stars ( and possibly brown dwarfs and  hot jupiters  ) .",
    "doing so will be a challenge given the constraints of the low - performance computational environment that gss is designed for , but the  just overlapping line approximation  ( jola ) may be efficient enough to be useful .",
    "relatedly , and in the spirit of the graystar project , we plan to investigate the possibility of implementing the line list as a structured query language ( sql ) database rather than as a byte file , which may allow for faster read times and enable inclusion of molecular lines .",
    "an sql - based spectrum synthesis could also allow for more direct inspection and perturbation of atomic data while preforming the synthesis calculations .",
    "the next step in improving the treatment of the background continuous opacity , @xmath178 , in the blue and near - uv bands would be to add extinction caused by @xmath48 transitions of key metals .",
    "these extinction sources are generally non - hydrogenic , and a way to treat them within the special performance constraints of gss would be required .",
    "the improvements to the atmospheric modeling detailed in section [ newphysics ] can now be back - propagated to the gs3 js code to improve its realism . generally , both the server - side modeling and the client - side post - processing and ui rendering might benefit from hardware acceleration using the the server s and client s graphics processing units ( gpus ) .",
    "both java and the html @xmath0canvas@xmath1 element provide for access to the opengl library ( jogl and webgl , respectively ) , and the faster processing time achievable might allow for more realistic responsive modeling",
    ".      a useful supplement to gss ( and gs3 ) would be a set of tested procedures and discussion questions for lab - style homework assignments that instructors could adopt and adapt , and we plan to develop these and make them available as we gain experience .",
    "it would be interesting to have both qualitative and quantitative assessments of the pedagogical efficacy of gss ( and gs3 ) based on student performance and surveys , and we plan to pursue this as well and make the results available to the community .",
    "the author acknowledges natural sciences and engineering research council of canada ( nserc ) grant rgpin-2014 - 03979 , and david f. gray for helpful private communications about computing extinction sources .",
    "cox , a.n . , ed . , _",
    "allen s astrophysical quantities _ , fourth ed .",
    ", springer gray , d.f . , 2005 , _ the observation and analysis of stellar photospheres _",
    ", third ed . , cambridge university press grevesse , n . , asplund , m . , sauval , a.j . , scott , p . , 2010 , astrophysics and space science , 328 , 179 hauschildt , p.h . , allard , f. , ferguson , j. , baron , e. & alexander , d.r . , 1999 , , 525 , 871 kirby , e. , 2011 , , 123 , 531 knight , r.d . , 2002 , `` five easy lessons : strategies for successful physics teaching '' , addison - wesley kramida , a. , ralchenko , yu . , reader , j. , and nist asd team ( 2015 ) .",
    "nist atomic spectra database ( ver .",
    "5.3 ) , [ online ] .",
    "available : http://physics.nist.gov/asd [ 2015 , november 26 ] .",
    "national institute of standards and technology , gaithersburg , md .",
    "mazur , e. , 1996 , `` peer instruction : a user s manual '' , addison - wesley short , c.i . , 2015 , arxiv:1509.06775 short , c.i . , 2014a , , 108 , 230 , arxiv:1409.1891 short , c.i . , 2014b , arxiv:1409.1893"
  ],
  "abstract_text": [
    "<S> we present graystarserver ( gss ) , a stellar atmospheric modeling and spectrum synthesis code of pedagogical accuracy that is accessible in any web browser on commonplace computational devices and that runs on a time - scale of a few seconds . </S>",
    "<S> the addition of spectrum synthesis annotated with line identifications extends the functionality and pedagogical applicability of gss beyond that of its predecessor , graystar3 ( gs3 ) . </S>",
    "<S> the spectrum synthesis is based on a line list acquired from the nist atomic spectra database , and the gss post - processing and user interface ( ui ) client allows the user to inspect the plain text ascii version of the line list , as well as to apply macroscopic broadening . </S>",
    "<S> unlike gs3 , gss carries out the physical modeling on the server side in java , and communicates with the javascript and html client via an asynchronous http request . </S>",
    "<S> we also describe other improvements beyond gs3 such as a more physical treatment of background opacity and atmospheric physics , the comparison of key results with those of the phoenix code @xcite , and the use of the html @xmath0canvas@xmath1 element for higher quality plotting and rendering of results . </S>",
    "<S> we also present linelistserver , a java code for converting custom ascii line lists in nist format to the byte data type file format required by gss so that users can prepare their own custom line lists . </S>",
    "<S> we propose a standard for marking up and packaging model atmosphere and spectrum synthesis output for data transmission and storage that will facilitate a web - based approach to stellar atmospheric modeling and spectrum synthesis . </S>",
    "<S> we describe some pedagogical demonstrations and exercises enabled by easily accessible , on - demand , responsive spectrum synthesis . </S>",
    "<S> gss may serve as a research support tool by providing quick spectroscopic reconnaissance . </S>",
    "<S> gss may be found at www.ap.smu.ca/@xmath2ishort/openstars/graystarserver/graystarserver.html , and source tarballs for local installations of both graystarserver and linelistserver may be found at www.ap.smu.ca/@xmath2ishort / openstars/. </S>"
  ]
}