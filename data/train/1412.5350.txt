{
  "article_text": [
    "some results of the present paper have been announced in  @xcite . however , the setting we use here is a bit different , so we give it in full detial .",
    "let  @xmath0 be a non - empty open convex subset of  @xmath1 that does not contain lines .",
    "let  @xmath2 be another open convex subset of  @xmath1 such that  @xmath3 ; the symbol  @xmath4 denotes the closure .",
    "we define the domain  @xmath5 as  @xmath6 ( the word `` domain '' comes from `` domain of a function '' ) , see figure  [ fig : strip ] for visualization , and the class of summable  @xmath1-valued functions on an interval  @xmath7 : @xmath8 here  @xmath9 is the average of  @xmath10 over  @xmath11 . in subsection  [ s13 ] , we show how the  @xmath12 , the muckenhoupt classes , and the gehring classes can be represented in the form  .",
    "let  @xmath13 be a bounded from below borel measurable locally bounded function on  @xmath14 is always assumed to be borel measurable and locally bounded .",
    "sometimes we assume that it is bounded from below , sometimes not .",
    "the second case is more interesting from the theoretical point of view .",
    "for the first reading , we recommend to assume everywhere that  @xmath13 is bounded from below . ] .",
    "we are interested in sharp bounds for the expressions of the form @xmath15 again , in subsection  [ s13 ] , we explain how the john  nirenberg inequality or other inequalities of harmonic analysis can be rewritten as estimations of such an expression .",
    "the said estimates are delivered by the corresponding bellman function , @xmath16     and its boundaries.,height=359 ]    the aim of this paper is to prove that this function enjoys good analytic properties .",
    "[ localconcavity ] let  @xmath17 be a subset of  @xmath18 .",
    "we call a function  @xmath19 locally concave on  @xmath17 provided for every segment  @xmath20 the restriction  @xmath21 is concave",
    ".    define the class of functions on  @xmath5 : @xmath22 the function  @xmath23 is given as follows , @xmath24 the main theorem says that  @xmath25 ( here and in what follows we omit indices of these functions if this does not cause ambiguity ) .",
    "we impose several technical conditions on  @xmath5 ( we will clarify the meaning of the third condition in subsection  [ s31 ] ) . @xmath26    [ mt ] if  @xmath5 satisfies technical assumptions then  @xmath25 .",
    "the motivation for the problem is given in subsections  [ s12 ] ,  [ s13 ] , now we sketch the idea of the proof and provide the structure of the paper .    the main idea is to introduce the third function that is based on some optimization .",
    "namely , we consider all  @xmath1-valued martingales that walk inside  @xmath5 and end their way on  @xmath14 .",
    "then , for any point  @xmath27 in  @xmath5 we maximize the value  @xmath28 over all the martingales starting from  @xmath27 , and denote this supremum by  @xmath29 .",
    "it is not difficult to prove that the achieved function coincides with  @xmath30 , moreover this relation holds true for a general `` good enough '' domain in any dimension .",
    "this construction is described in section  [ s2 ] .    to prove the main theorem , we prove two inequalities ,  @xmath31 and  @xmath32 .",
    "the first one uses ideas of section  [ s2 ] .",
    "namely , every martingale in  @xmath5 gives rise to a function belonging to the class  @xmath33 with the same distribution .",
    "therefore ,  @xmath34 , and by results of  subsection  [ s2 ] , the first inequality follows . to prove the second one ,",
    "we establish a reverse embedding .",
    "it turns out that each function belonging to  @xmath33 gives rise to a martingale that lives in an extension of  @xmath5 ( i.e. a similar - built domain with strictly smaller  @xmath2 ) , moreover , the difference between this extension and  @xmath5 can be arbitrary small .",
    "therefore , the inequality  @xmath32 is almost proved , we have  @xmath35 for any extension  @xmath36 .",
    "all this material constitutes section  [ s3 ] .",
    "to finish the proof of the main theorem , we establish that  @xmath37 ( the infimum is taken over all the extensions of  @xmath5 ) .",
    "this is done in section  [ s4 ] for the case where  @xmath14 is  @xmath38-smooth and  @xmath13 is continuous ( theorem  [ smoothmaintheorem ] ) .",
    "section  [ s5 ] treats the case of non - smooth boundary  @xmath14 and non - smooth  @xmath13 .",
    "more or less , the result is derived in a classical way : we do some sort of smoothing , apply the already known results for smoothed functions , and then pass to the limit .",
    "however , the non - linearity of the problem makes the smoothing non - standard , some geometric tricks are used here .",
    "corollary  [ discontinuousfunctionnonsmoothboundary ] finishes the proof of the main theorem in full generality .    in section  [ s6 ] , we give some information for the case where  @xmath13 is not bounded from below .",
    "now the problem should be re - stated , because _ a priori _ the value  @xmath39 is not well defined ( the function  @xmath40 might be not integrable ) .",
    "the fact that the integral of  @xmath40 is well defined for all  @xmath10 belonging to the class  @xmath33 is equivalent to the finiteness of  @xmath41 ( @xmath42 stands for the positive part of  @xmath13 ) .",
    "however , the condition that  @xmath23 is finite is not sufficient here .",
    "we also give a sufficient summability condition for  @xmath23 to be finite in terms of some maximal function of  @xmath13 ( this condition can be easily verified with the function  @xmath13 at hand ) .    in section  [ s7 ] ,",
    "we formulate several conjectures .",
    "there are also three appendices that collect various supplementary material .",
    "[ [ acknowledgments . ] ] acknowledgments .",
    "+ + + + + + + + + + + + + + + +    we are grateful to our colleagues paata ivanisvili , alexander logunov , and nikolay osipov for their criticism , and leonid slavin for helpful exposition advice .",
    "we also thank sergey  vladimirovich  ivanov who suggested the idea of using the projective transform in this context ( see subsection  [ s13 ] and appendix  [ sptt ] ) .",
    "the second half of this text was written while the first author was visiting hausdorff institute for mathematics , university of bonn .",
    "he thanks him for hospitality .",
    "we are grateful to our teacher vasily  ivanovich  vasyunin for his support , advice , and attention to our work .",
    "application of optimization ideas to analytic problems has a long history . in 1984 , burkholder in his seminal paper  @xcite provided sharp estimates for the norm of a martingale transform in  @xmath43 .",
    "his method was based on a certain extremal problem of finding a minimal diagonally concave function on a special domain in  @xmath44 .",
    "afterwards , there were many papers where similar technique was used for proving different sharp inequalities for martingales , see the book  @xcite , references therein , and the survey paper  @xcite .    in the mid ninetieth , nazarov , treil , and volberg introduced optimization principles to harmonic analysis .",
    "see  @xcite for the history of the development and also  @xcite as the historically first exposition .",
    "the strength of their method was in building _ supersolutions _ , which still provided good estimates , i.e. finding not exact bellman functions .",
    "since then , the method has become a standard tool in analysis , for example , see the lecture notes  @xcite or the survey  @xcite .",
    "however , we mention a much earlier work of hanner  @xcite that presents beurling s proof of the so - called hanner s inequalities dating back to 1945 . in fact , this method is very bellman - style : one guesses a special function that proves the desired inequality for him .",
    "see  @xcite for the explanations where is the bellman function hidden there .    around the year of 2002 ,  slavin and vasyunin independently found the sharp constants in the john  nirenberg inequality , see  @xcite , and finally  @xcite .",
    "seemingly , this was the first exact bellman function for a purely harmonic - analytic problem ( we also mention the paper  @xcite in this context , which appeared a bit later , but works with a different problem of estimating the  @xmath43 norm of maximal operators ) .",
    "the paper  @xcite was the first to appear .",
    "following this route , many authors have managed to prove various inequalities , see the papers  @xcite . though the method turned out to be very useful , there was absolutely no theory that allowed to calculate the bellman functions `` mechanically '' .",
    "the first steps towards building such a theory were done in  @xcite .",
    "the problems concerning the  @xmath12-space , seemingly , form the largest group of the solved problems .",
    "in  @xcite , most of them were unified into a single theory ( see also the short report  @xcite ) .",
    "however , for the treatment in the full generality , see the forthcoming paper  @xcite ( still on the space  @xmath12 ! ) .",
    "all the mentioned papers ( including the latest papers  @xcite ) , in some sense , employ a miracle .",
    "the main theorem of the present paper was usually proved for a specific case in such a fashion : it was assumed to be valid , from these assumptions , the author guessed the `` formula '' for the bellman function , after that he guessed the optimizers , and finally , he verified the concavity , thus proving that his guess for the bellman function was right ( and also proving the main theorem for his particular case ) . however , each time this took lots of pages of calculations mixed up with magic guesses .",
    "so , the main theorem itself was a miracle .",
    "our aim is to find the reasons for it . in some sense ,",
    "our explanations show that there are no `` harmonic analytic '' bellman functions , they are hidden bellman functions for optimization of stochastic processes . on the formal level , we believe that our studies may give additional information about the links between the burkholder method ( as presented in the book  @xcite ) and the bellman function method .    as a byproduct ,",
    "we obtain sharp inequalities for non - increasing rearrangements of functions in the class considered ( in particular , in the  @xmath12 , the muckenhoupt classes , the gehring classes ) , namely , we prove that the non - increasing rearrangement lies in the same class as the function does ( so it does not increase the  @xmath12 norm , or the muckenhoupt constant , or the gehring constant ) .",
    "these results are presented in subsection  [ s34 ] .",
    "the first sharp inequality of such kind ( that the non - increasing rearrangement does not increase the  @xmath12-norm of functions ) was proved by klemes ,  @xcite , and then generalized in  @xcite .",
    "see also  @xcite for a survey on monotonic rearrangements of functions in  @xmath12 .",
    "the case of the class  @xmath45 was considered in  @xcite ( and reproved by several authors later ) . for the classes  @xmath46 and the gehring ( reverse - hlder ) classes ,",
    "a similar statement was proved in  @xcite .",
    "our approach is different from those used in the papers cited above .",
    "more or less , results of this type are direct consequences of the constructions lying behind the main theorem .      [ [ themathrmbmo - space . ] ] the  @xmath12 space .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    we consider the  @xmath12 space with the quadratic seminorm .",
    "let  @xmath47 be a positive number .",
    "let  @xmath48 , let  @xmath49 .",
    "the function  @xmath50 belongs to the class  @xmath33 if and only if  @xmath51 ( its first coordinate ) belongs to  @xmath52 ( the ball of the  @xmath12 space of radius  @xmath47 ) .",
    "indeed , for any  @xmath53 we have  @xmath54 , therefore , the condition  @xmath55 can be rewritten as @xmath56 which is the same as @xmath57 now we see that the class  @xmath33 corresponds to  @xmath52 .",
    "the bellman function   estimates the functional  @xmath58 , where  @xmath59 .",
    "we address the reader to the paper  @xcite , where it was explained how do the sharp estimates of these functionals lead to various forms of the john  nirenberg inequality and the equivalence of the  @xmath43-type norms defining the  @xmath12 .",
    "this case is the subject of study for papers  @xcite .",
    "[ [ classesa_p_1p_2 . ] ] classes  @xmath60 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let  @xmath61 and  @xmath62 be real numbers and let  @xmath63 .",
    "define the domain  @xmath5 by the formula @xmath64 we warn the reader that these domains may not satisfy our conditions ( if  @xmath65 ) , however , we will show how to deal with this problem in appendix  [ sptt ] ( the idea is to make a projective transform ) . if the function  @xmath10 belongs to the class  @xmath33 , then its first coordinate ,  @xmath51 , belongs to the so - called  @xmath60 class .",
    "the `` norm '' in this class is defined as @xmath66_{a_{p_1,p_2 } } = \\sup\\limits_{j \\subset i } \\,\\,\\,{\\langle { \\psi^{p_1}}\\rangle_{{}_{j}}}^{\\frac{1}{p_1}}{\\langle { \\psi^{p_2}}\\rangle_{{}_{j}}}^{-\\frac{1}{p_2}},\\ ] ] where the supremum is taken over all the subintervals of  @xmath67 .",
    "these classes were introduced in  @xcite .",
    "if  @xmath68 , then  @xmath69 , where  @xmath46 stands for the classical muckenhoupt class . the limiting cases  @xmath45 and",
    "@xmath70 also fit this definition ( with hruschev s `` norm '' on  @xmath70 ) .",
    "when  @xmath71 and  @xmath72 , the class  @xmath60 coincides with the so - called gehring class ( see  @xcite or  @xcite ) .",
    "one can see that the functions in the gehring class are exactly those that satisfy the reverse hlder inequality .",
    "sometimes , the gehring class is called the reverse - hlder class .",
    "estimates of integral functionals as provided by the bellman function   lead to various sharp forms of the reverse hlder inequality , see  @xcite . these cases were treated in the papers  @xcite .",
    "[ [ reverse - jensen - classes . ] ] reverse jensen classes .",
    "+ + + + + + + + + + + + + + + + + + + + + + +    these classes were introduced in  @xcite .",
    "let  @xmath73 be a convex function .",
    "let  @xmath74 .",
    "consider the class of functions  @xmath75 such that @xmath76 surely , both muckenhoupt classes and gehring classes can be described as certain reverse jensen classes .",
    "the corresponding domain is  @xmath77 .",
    "the case  @xmath78 turned out to be useful in the study of the john  nirenberg inequality for the case of the  @xmath12  @xmath79-norm , see  @xcite . unless  @xmath80 , the domain does not satisfy the conditions required .",
    "we note that these classes have not been studied with the bellman function method , however , it was proved in  @xcite that the monotonic rearrangement does not drop the function out of such a class . in the case",
    "where  @xmath81 and  @xmath82 , the domain satisfies the conditions in appendix  [ sptt ] , thus , the main theorem and the statement about monotonic rearrangement are valid for it . to get the assertion on monotonic rearrangements in the full generality",
    ", one may approximate the domain in question by the domains of the type described in subsection  [ s1 ] .",
    "we begin with generalizations of some convex geometry notions . for the classical background ,",
    "see the book  @xcite .",
    "the material of this subsection is , in some sense , auxiliary .",
    "an uninterested reader may skip the proofs without any potential loss of understanding ( to make the reading more convenient , we put the proofs of the statements in this subsection into appendix  [ spg ] ) .",
    "[ locextrpoint ] let  @xmath83 be a subset of  @xmath18 .",
    "we call a point  @xmath84 locally extremal if there are no open segments  @xmath85 such that  @xmath86 .",
    "the set of all locally extremal points is called the fixed boundary of  @xmath83 and denoted by  @xmath87 .",
    "the set  @xmath88 is called the free boundary .    for convex sets ,",
    "locally extremal points are exactly extremal points .",
    "for example , for the set  @xmath5 introduced in subsection  [ s11 ] , the fixed boundary coincides with  @xmath14 when we impose condition  , see figure  [ fig : strip ] also .",
    "see figure  [ fig : dom ] for visualization ; the points  @xmath89 and  @xmath90 are not locally extremal , whereas the point  @xmath91 is ; the free boundary is marked with a dotted line , whereas the fixed boundary is black .",
    ".,height=359 ]    we have already defined locally concave functions , see defintion  [ localconcavity ] .",
    "[ propertiesoflcfunctions ] the function  @xmath92 is locally concave on  @xmath83 if and only if its restriction to every convex subset of  @xmath83 is concave .    surely , a pointwise infimum of locally concave functions is locally concave ( this follows from the same principle for concave functions ) .",
    "[ genlambdaclass ] let  @xmath83 be a subset of  @xmath18 , let  @xmath93 be a function . define the class  @xmath94 as follows : @xmath95    by the note above , there exists the pointwise minimal function  @xmath96 defined by formula",
    ". suppose that it nowhere equals  @xmath97 ( for example , this is surely true for the domain  @xmath5 from subsection  [ s11 ] ) , then it belongs to the class  @xmath94 .",
    "surely ,  @xmath98 on  @xmath87 .",
    "theorem  @xmath99 in  @xcite leads us to the following fact .",
    "[ continuityininnerpoints ] let  @xmath100 be a locally concave function .",
    "then it is continuous at every inner point of  @xmath83 as a function from  @xmath83 to  @xmath101 .    in particular , if  @xmath30 nowhere equals  @xmath97 , it is continuous",
    ". therefore , the set  @xmath102 is a relatively closed set ; the symbol  @xmath103 denotes the interior .",
    "it follows from local concavity that the set  @xmath104 is relatively open .",
    "therefore , if the set  @xmath105 is connected , then  @xmath30 is infinite everywhere on  @xmath105 if and only if it is infinite in any point .",
    "we need more detailed analysis .",
    "we begin with an easy observation .",
    "we will often work with strictly convex sets .",
    "we call a convex set  @xmath83 strictly convex if every point of  @xmath106 is an exposed point .",
    "a point  @xmath84 is called an exposed point if there exists a hyperplane whose intersection with the closure of  @xmath83 consists of  @xmath27 only .",
    "[ strictconcavity ] let  @xmath83 be a non - empty open convex set .",
    "it is strictly convex if and only if  @xmath107 , i.e. if  @xmath106 does not contain segments .",
    "[ hereditaryproperty ] let  @xmath108 be a closed strictly convex subset of  @xmath83 . define the function  @xmath109 on  @xmath110 by the equality @xmath111 in such a case ,  @xmath112 for all  @xmath113 .    [ continuityonfixedfoundary ] let  @xmath83 be a subset of  @xmath18 , let  @xmath114 .",
    "suppose that there exists a ball  @xmath115 such that  @xmath116 is a closed strictly convex set .",
    "suppose  @xmath117 nowhere equals  @xmath118 .",
    "then ,  @xmath30 is continuous at  @xmath27 provided  @xmath13 is .",
    "[ continuityonfreeboundary ] let  @xmath119 be a point on the free boundary of  @xmath83 ,  @xmath120 .",
    "suppose there exists some open ball  @xmath121 such that  @xmath122 is an open convex set , and  @xmath119 is its exposed point .",
    "suppose that  @xmath123 everywhere .",
    "then ,  @xmath30 is continuous at the point  @xmath119 .",
    "the proofs of lemma  [ hereditaryproperty ] , proposition  [ continuityonfixedfoundary ] , and proposition  [ continuityonfreeboundary ] are in appendix  [ spg ] .",
    "we will use minimal amount of probabilistic technique and notation .",
    "however , we refer the reader to the book  @xcite for definitions .",
    "we are working with discrete - time martingales over an increasing filtration  @xmath124 on the standard probability space  @xmath125 .",
    "for simplicity , all algebras  @xmath126 are finite .",
    "[ basicmartingales ] let  @xmath120 be a closed set .",
    "an  @xmath18-valued martingale  @xmath127 adapted to  @xmath128 is called an  @xmath83-martingale if it satisfies the conditions listed below .",
    "we note that by lvy s zero - one law ,  @xmath129 almost surely and in mean . we give a brief explanation about the third point of the definition above .",
    "in particular , it implies that  @xmath130 is a.s . in",
    "if we had been working with continuous - time martingales , then we could have changed it for the condition `` paths are a.s . inside  @xmath83 '' . in such a setting",
    ", we consider the set of to martingales with values in  @xmath83 .",
    "they have a.s .",
    "continuous paths , therefore , the third point is a consequence of the condition that a martingale is a.s . inside the domain .",
    "however , discrete - time martingales do not have continuous paths in any sense , therefore , we need the third condition that forbids a martingale to `` jump over the boundary '' .",
    "the following lemma shows that  @xmath83-martingales play the same role for locally concave functions as linear combinations play for concave functions .",
    "[ bellmaninduction ] suppose that  @xmath92 is locally concave on  @xmath83 and  @xmath127 is an  @xmath83-martingale .",
    "then , the function  @xmath131 is non - increasing .    using the third property of  @xmath83-martingales for the atom  @xmath132",
    ", we can apply jensen s inequality to the function  @xmath92 on the convex set  @xmath133 and see that @xmath134 averaging , we get @xmath135    the procedure just described can be referred to as _ the bellman induction _",
    "( for example , see  @xcite ) .",
    "to pass to the limit as  @xmath136 , we need to consider some subclasses of  @xmath83-martingales .",
    "[ boundedmartingale ] we say that an  @xmath83-martingale  @xmath127 is bounded provided  @xmath137 is bounded .",
    "we note that  @xmath138 is bounded by the same constant as  @xmath139 : @xmath140    [ simplemartingale ] we call an  @xmath83-martingale  @xmath127 simple if  @xmath141 for some  @xmath142 .",
    "[ stronglymartingaleconnected ] we call  @xmath120 a strongly martingale connected domain if for every  @xmath143 there exists a simple  @xmath83-martingale starting at  @xmath27 , i.e. a simple  @xmath83-martingale  @xmath127 such that  @xmath144 .    [ maximalprinciple]let  @xmath83 be a strongly martingale connected domain . then , for every locally concave function  @xmath92 on  @xmath83",
    "@xmath145    to prove the lemma , it suffices to show that  @xmath146 for all  @xmath147 .",
    "let  @xmath148 be a simple  @xmath83-martingale starting at  @xmath149 .",
    "then , by lemma  [ bellmaninduction ] ,  @xmath150 . taking  @xmath142 sufficiently big",
    ", we get  @xmath151 , because the values of  @xmath152 are in  @xmath87 .",
    "now we are ready to define a new bellman function .",
    "[ martingalebellman ] let  @xmath83 be a strongly martingale connected domain , let  @xmath13 be a bounded from below function on  @xmath87 . define the martingale bellman function as @xmath153 if the supremum is taken over the set of bounded  @xmath83-martingales , then the bellman function is denoted by  @xmath154 .",
    "[ boundedmartingalenotboundedfunction ] we note that  @xmath154 is well defined even for the case where  @xmath13 is not bounded from below is locally bounded . ] .",
    "we study this new bellman function in the next subsection .",
    "we refer the reader to appendix  [ scd ] , where we show that  @xmath83-martingales are worth working on in a broader class of domains than the domains of the type `` convex minus convex '' .",
    "[ localconcavityofmartingalebellman ] for any strongly martingale connected domain  @xmath83 and any  @xmath155 bounded from below we have  @xmath156 .",
    "for every point  @xmath114 there is a constant martingale  @xmath157 , therefore ,  @xmath158 on the fixed boundary .",
    "let  @xmath159 be some segment inside  @xmath83 . to verify the concavity of  @xmath160",
    ", one has to prove the inequality  @xmath161 , where  @xmath162 ,  @xmath163 ,  @xmath164 $ ] , and  @xmath165 \\subset \\ell$ ] .",
    "fix  @xmath166 .",
    "suppose that  @xmath127 and  @xmath167 are  @xmath83-martingales such that @xmath168 consider the following martingale  @xmath169 :  @xmath170 ;  @xmath171 with probability  @xmath172 ,  @xmath173 with probability  @xmath174 ; its parts corresponding to  @xmath127 and  @xmath167 develop as  @xmath127 and  @xmath167 ( i.e.  @xmath175 and  @xmath176 for any borel set  @xmath91 and any  @xmath177 ) .",
    "surely ,  @xmath169 is an  @xmath83-martingale and  @xmath178 .",
    "thus , @xmath179 making  @xmath180 arbitrary small , we get the inequality wanted .",
    "[ localconcavityboundedmartingales ] if  @xmath83 is a strongly martingale connected domain and  @xmath13 is locally bounded from below , then  @xmath154 is locally concave .",
    "the remark is proved by the same argument .",
    "[ bellmaninductionlimit ] let  @xmath83 be a strongly martingale connected domain , let  @xmath13 be a bounded from below function on  @xmath87 . if  @xmath181 is such that  @xmath92 is continuous at any point of  @xmath87 , then ,  @xmath182 for any  @xmath83-martingale  @xmath127 .    by lemma  [ bellmaninduction ] ,",
    "the function  @xmath131 is non - increasing .",
    "we have to prove that  @xmath183 .",
    "first ,  @xmath184 a.s . , because  @xmath129 a.s . and  @xmath92 is continuous at the points of the fixed boundary .",
    "second , by lemma  [ maximalprinciple ] ,  @xmath92 is bounded from below . therefore , the limit relation is a consequence of fatou s lemma .",
    "the same assertion is valid if we take  @xmath127 to be bounded and  @xmath13 locally bounded from below .    [ geometricmartingale ] let  @xmath83 be a strongly martingale connected domain , let  @xmath13 be a bounded from below function on  @xmath87 .",
    "suppose that  @xmath117 is continuous at every point of the fixed boundary .",
    "then ,  @xmath185 .",
    "the inequality  @xmath186 is contained in lemma  [ localconcavityofmartingalebellman ] , the inequality  @xmath187 follows from lemma  [ bellmaninductionlimit ] and definition  [ martingalebellman ] .",
    "conclusion of theorem   is valid for the bellman function  @xmath188 in place of  @xmath189 even if  @xmath13 is only locally bounded from below .",
    "let  @xmath67 be an interval .",
    "let  @xmath5 be the same as at the beginning of subsection  [ s11 ] .",
    "the class  @xmath190 is the subset of  @xmath33 consisting of bounded functions . with this class at hand",
    ", we can define the bellman function for a very general function  @xmath13 , @xmath191 to define the function  @xmath192 , we only need  @xmath13 to be locally bounded from below . the following obvious assertion is a commonplace of the theory : the functions  @xmath193 and  @xmath192 do not depend on the interval  @xmath67 , i.e. if the same classes and functions are constructed on another interval , the resulting bellman functions are the same ( see remark  @xmath194 of  @xcite for details ) .",
    "we give an alternative form of assumption  .",
    "for every convex set  @xmath195 and every interior point  @xmath196 , there exists the maximal by inclusion convex cone  @xmath197 with the vertex  @xmath27 .",
    "it is easy to see that this cone is closed .",
    "moreover , it depends on the point  @xmath27 in a very easy way : if  @xmath27 and  @xmath198 are interior points of  @xmath17 , then  @xmath199 .",
    "therefore , the convex cone  @xmath200 is independent of the particular choice of  @xmath27 ; we call it the maximal inscribed cone of  @xmath17 .",
    "assumption   can be restated using this notation : the set  @xmath0 is infinite and the maximal inscribed cones of  @xmath0 and  @xmath2 are equal .    [ nonemptyclass ] suppose that  @xmath5 satisfies assumption  .",
    "then , for every  @xmath201 there exists a segment  @xmath159 with the endpoints lying on  @xmath14 such that  @xmath202 .    in particular",
    ", the fact claims that  @xmath5 is strongly martingale connected ( see definition  [ stronglymartingaleconnected ] ) .",
    "moreover , it shows that the sets over which the suprema are taken in formulas   and   are non - empty .",
    "indeed , if  @xmath203 , where  @xmath204 ,  @xmath205 ,  @xmath206 , and  @xmath207 and  @xmath208 are the endpoints of the segment  @xmath159 given by fact  [ nonemptyclass ] , then we can define the function  @xmath209\\to{\\partial_{\\mathrm{fixed}}}\\omega$ ] as follows : @xmath210;\\\\",
    "\\varphi_x(t ) = x_+,\\quad & t\\in(\\alpha_-,1 ] . \\end{cases}\\ ] ] it is easy to see that  @xmath211 , because the point  @xmath212 belongs to the segment  @xmath159 for every  @xmath11 .",
    "we note without proof that if assumption   on  @xmath5 is violated in the sense that both  @xmath0 and  @xmath2 are infinte , but there exists a ray in  @xmath0 that can not be translated into  @xmath2 , then for some  @xmath213 the set of functions belonging to  @xmath214 whose average is  @xmath27 , is empty ( this is not as obvious as may seem , however , we do not include the proof )",
    ". moreover , in such a case  @xmath5 is not martingale connected .",
    "if  @xmath0 is infinte , but  @xmath2 is finite , the situation is interesting again , however , it needs a separate study .    though the calculation of  @xmath193 and  @xmath192 is a problem , we can compute the values of these functions on the fixed boundary . indeed ,",
    "if  @xmath215 , then the set of functions we are taking the suprema over consists of one function .",
    "let  @xmath216 be such that  @xmath217 .",
    "let  @xmath218 be an arbitrary finite partition of  @xmath67 into disjoint subintervals .",
    "then , @xmath219 the convex combination on the right belongs to  @xmath0 . by assumption  ,",
    "if it coincides with  @xmath27 , then all the points  @xmath220 are equal  @xmath27 . making  @xmath221 arbitrary small and passing to the limit with the help of the lebesgue differentiation theorem",
    ", we get  @xmath222",
    ". therefore ,  @xmath223 and  @xmath224 .",
    "this fact can be interpreted as that the bellman function satisfies the dirichlet boundary conditions on the fixed boundary .",
    "we end this subsection with an easy auxiliary lemma .",
    "[ summabilityofmodulus ] the function  @xmath225 is finite .",
    "what is more , it is bounded on any compact set  @xmath226 .",
    "we assumed at the very beginning that  @xmath0 does not contain lines .",
    "therefore , there exists some convex cone  @xmath227 such that  @xmath228 .",
    "we can find a linear function  @xmath169 .",
    "] such that  @xmath229 for all  @xmath230 .",
    "we can write for any  @xmath216 with the average  @xmath27 : @xmath231 this leads us to the inequality  @xmath232 , which proves the lemma .",
    "the fixed boundary admits many parametrizations .",
    "fix some line  @xmath159 in the plane such that the orthogonal projection onto  @xmath159 maps  @xmath233 to  @xmath159 bijectively .",
    "the inverse map to this projection parametrizes  @xmath233 .",
    "[ monotonicity ] we say that a function  @xmath234 is monotone if its composition with the projection onto  @xmath159 is monotone .    surely , this notion of monotonicity does not depend on the particular choice of  @xmath159 .    for a function  @xmath235",
    ", we denote its distribution , namely , the image of the normalized lebesgue measure under the mapping  @xmath10 , by  @xmath236 .",
    "thus ,  @xmath236 is a probability measure supported on  @xmath233 .",
    "we note that for any probability measure  @xmath237 on  @xmath233 there exists a unique mod  @xmath238 non - increasing function on  @xmath239 $ ] and a unique mod  @xmath238 non - decreasing function on  @xmath239 $ ] whose distribution coincides with  @xmath237 .",
    "this functions are called the non - increasing and non - decreasing rearrangements of the probability measure  @xmath237 correspondingly .",
    "[ martingalegeneratesafucntion ] if  @xmath240 ( see definition  ) , then the non - decreasing rearrangement of the distribution of  @xmath137 belongs to  @xmath33 .",
    "let  @xmath10 be the non - decreasing rearrangement of the distribution of  @xmath137 .",
    "we note that  @xmath10 is a summable function and  @xmath241 } } } = m_0 $ ] .",
    "we have to prove that for any  @xmath242 \\subset [ 0,1 ] = i$ ] the point  @xmath243 is not in  @xmath2 .",
    "we may assume that  @xmath244 .",
    "let  @xmath245 ,  @xmath246 .",
    "we note that by the monotonicity , for any  @xmath247 the point  @xmath248 lies on  @xmath233 between the points  @xmath91 and  @xmath249 ( we denote the set of all such points by the arc  @xmath250 ) . for any function",
    "@xmath251 we have @xmath252 where @xmath253 we note that if the convex hull of  @xmath250 belongs to  @xmath5 , then the point  @xmath243 is in  @xmath5 too , because it lies in the mentioned convex hull .",
    "so , we assume that the arc  @xmath250 is a `` long arc '' , i.e. the segment  @xmath254 intersects  @xmath2 .",
    "the idea of the proof is that if the point  @xmath243 is not in  @xmath2 , then it can be separated from this set by a line . in other words , it suffices to construct a linear function  @xmath255 such that  @xmath256 on  @xmath2 , but  @xmath257 .",
    "we consider two cases :  @xmath258 is inside the domain  @xmath259 and  @xmath258 is outside  @xmath259 ( by  @xmath259 we mean the closed set shown on firure  [ fig : smile ] ) .",
    ".,height=359 ]    _ first case .",
    "_ let  @xmath169 be a linear function such that  @xmath260 on  @xmath261 , but  @xmath262 .",
    "for any  @xmath215 we have  @xmath263 . therefore , @xmath264 the last but one inequality is a consequence of lemma  [ bellmaninductionlimit ] .    _ second case . _",
    "the domain  @xmath265 consists of two connectivity components .",
    "let  @xmath266 be the one that is adjacent to  @xmath249 .",
    "without loss of generality , we may assume  @xmath267 .",
    "we take  @xmath169 such that  @xmath268 on the common boundary of  @xmath259 and  @xmath266 and  @xmath260 on  @xmath2 .",
    "surely ,  @xmath269 on  @xmath233 .",
    "let  @xmath13 be some continuous function on  @xmath233 such that  @xmath270 and  @xmath271 on  @xmath272 .",
    "then , @xmath273 the last but one inequality is a consequence of lemma  [ bellmaninductionlimit ] and proposition  [ continuityonfixedfoundary ] .",
    "the last inequality follows from the fact that  @xmath23 is non - positive on the common boundary of  @xmath259 and  @xmath266 ( because  @xmath274 ) and zero on  @xmath272 , therefore , it is non - positive inside  @xmath266 .",
    "this implication heuristically follows from the hereditary property , lemma  [ hereditaryproperty ] , and the maximal principle  @xmath275 .",
    "however , the domain whereto we restrict the function is by no means strictly convex , therefore , on the formal level , such an implication does not work . instead of this",
    ", one can assume that  @xmath23 is positive at some point of  @xmath266 , then  @xmath23 can be changed for  @xmath276 on  @xmath266 and become smaller while retaining to be locally concave ( by fact  [ hereditaryonlines ] , see appendix  [ spg ] ) , which contradicts the minimality . in particular ,  @xmath277 .",
    "if  @xmath278 , then the monotonic rearrangement of the distribution of  @xmath137 belongs to  @xmath279 .",
    "[ extension ] let  @xmath280 be a domain satisfying assumptions  .",
    "we call a domain  @xmath36 an extension of  @xmath5 if  @xmath281 ,  @xmath282 is a convex open set ,  @xmath36 satisfies assumptions   and  @xmath283 .",
    "[ functiongeneratesamartingale ] let  @xmath36 be an extension of  @xmath5 .",
    "if  @xmath284 , then there exists a martingale  @xmath285 such that  @xmath137 is equimeasurable with  @xmath10 .",
    "[ functiondelta ] define the function  @xmath286 as follows : @xmath287,\\,y \\in \\omega,\\,z \\in \\operatorname{cl}\\tilde{\\omega}_1\\bigg\\}.\\ ] ] the function  @xmath288 is uniformly bounded on every compact subset of  @xmath5 .",
    "the following geometric observation goes back to  @xcite ( lemma  @xmath289 there ) and lies in the heart of the theory .",
    "[ l5 ] let  @xmath10 be a function on an inteval  @xmath67 such that  @xmath284",
    ". for any extension  @xmath36 of  @xmath5 there exists a partition of  @xmath67 into two intervals  @xmath290 and  @xmath291 with disjoint interiors such that @xmath292 \\subset \\tilde{\\omega}\\quad \\hbox{and}\\quad \\max\\big(\\frac{|i_1|}{|i_2|},\\frac{|i_2|}{|i_1|}\\big ) { \\leqslant}\\delta({\\langle { \\varphi}\\rangle_{{}_{i}}}).\\ ] ] here  @xmath288 is the function introduced in fact  .    for brevity , we assume  @xmath293 $ ] and  @xmath294 . let  @xmath295}}},{\\langle { \\varphi}\\rangle_{{}_{[0,1]}}}]$ ] and  @xmath296}}},{\\langle { \\varphi}\\rangle_{{}_{[0,1]}}}]$ ] . for each  @xmath297 ,",
    "not more than one of the segments  @xmath298 and  @xmath299 intersects  @xmath282 . if  @xmath299 intersects  @xmath282 , then  @xmath300 .",
    "thus , if  @xmath301 , then  @xmath302 .",
    "similarly ,  @xmath303 .",
    "the set  @xmath304 ,  @xmath305 , of all  @xmath306 $ ] such that  @xmath307 is a relatively open subset of  @xmath308 $ ] that does not cover the whole interval  @xmath308 $ ] .",
    "the sets  @xmath45 and  @xmath309 do not intersect , therefore , it follows from the connectivity of  @xmath308 $ ] that there exists a point  @xmath297 such that  @xmath310 .",
    "we can take  @xmath311 $ ] and  @xmath312 $ ] .",
    "[ [ proof - of - theoremfunctiongeneratesamartingale . ] ] proof of theorem  [ functiongeneratesamartingale ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    using lemma  [ l5 ] inductively , we build a sequence  @xmath313 of partitions of  @xmath67 such that    1 .   for each  @xmath142",
    "the partition  @xmath314 is a subpartition of  @xmath315 , moreover , for each  @xmath142 and  @xmath316 ,   @xmath317 , one has  @xmath318 2 .   for each  @xmath142 and  @xmath316 ,   @xmath319 ,",
    "the segment  @xmath320 $ ] lies in  @xmath36 ; 3 .   for each  @xmath142 and  @xmath316 ,   @xmath317 ,  @xmath321 .",
    "each partition generates an algebra  @xmath126 of sets . by the first property of our partitions ,",
    "@xmath128 is an increasing sequence of algebras .",
    "define the martingale  @xmath127 by the formula  @xmath322 .",
    "we claim that  @xmath127 is an @xmath36-martingale .",
    "we have to verify three properties listed in definition  [ basicmartingales ] .",
    "the first property is obvious .",
    "it follows from the second property of the partitions that  @xmath127 satisfies the third property of defintion  [ basicmartingales ] .    to prove the second property , we need to justify that  @xmath323 .",
    "let  @xmath324 denote the unique interval of the  @xmath142-th partition that contains  @xmath297 ( these functions are defined on the set of full measure ) .",
    "assume that  @xmath325 , then there exists  @xmath297 such that  @xmath326 ,  @xmath327 .",
    "in such a case ,  @xmath328 .",
    "therefore , the sequence  @xmath329 is bounded , say , by  @xmath330 , by fact  [ functiondelta ] . then , from the third property of the partitions it follows that  @xmath331 , which contradicts the fact that  @xmath326 .    by lvy",
    "s zero - one law , it follows that  @xmath332 for almost all  @xmath297 .",
    "thus , the second property of definition  [ basicmartingales ] is fulfilled for  @xmath127 and  @xmath333 .",
    "the assertion of theorem   is not valid , if one asks  @xmath127 to be in  @xmath334 .",
    "[ [ monotonic - rearrangements ] ] monotonic rearrangements + + + + + + + + + + + + + + + + + + + + + + + +    [ monotonicrearrangement ] let  @xmath234 be a measurable function .",
    "a non - decreasing function  @xmath335 ( see defintion  ) that is equimeasurable with  @xmath10 is called the non - decreasing rearrangement of  @xmath10 .",
    "[ monotonicrearrangementcor ] suppose that  @xmath5 satisfies conditions  .",
    "if  @xmath284 , then  @xmath336 .",
    "assume the contrary , let  @xmath337 be an interval such that  @xmath338 . let  @xmath36 be an extension of  @xmath5 such that  @xmath339 .",
    "we apply theorem  [ functiongeneratesamartingale ] to  @xmath10 and get some  @xmath36-martingale  @xmath127 such that  @xmath137 is equimeasurable with  @xmath10 .",
    "the distribution of the non - decreasing rearrangement of  @xmath137 is equimeasurable with  @xmath10 , therefore , the said monotonic rearrangement coincides with  @xmath335 mod  @xmath238 .",
    "thus , by theorem  [ martingalegeneratesafucntion ] ,  @xmath340 , this contradicts the assumption  @xmath339 .",
    "[ concatenation ] suppose that  @xmath5 satisfies conditions  .",
    "let  @xmath341 be a sequence of functions on an interval  @xmath67 , belonging to  @xmath33 .",
    "assume that  @xmath342 is a bounded subset of  @xmath5 .",
    "let  @xmath343 be a sequence of non - negative numbers such that  @xmath344 .",
    "then , there exists a function  @xmath284 such that  @xmath345 .",
    "we take  @xmath10 to be the non - decreasing rearrangement of the measure  @xmath346 .",
    "we note that  @xmath347 is uniformly bounded by virtue of lemma  [ summabilityofmodulus ] , so  @xmath348 . to prove that  @xmath284 , it is sufficient to prove the inclusion  @xmath349 for all the extensions  @xmath36 of  @xmath5 .",
    "fix  @xmath36 and using theorem  [ functiongeneratesamartingale ] , construct martingales  @xmath350 , each on its own probability space  @xmath351 with filtration  @xmath352 , such that  @xmath353 equimeasurable with  @xmath354 . consider a new probability space  @xmath355 ,  @xmath356 for any measurable set  @xmath91 .",
    "define an increasing sequence of algebras  @xmath128 given by formula @xmath357 define  @xmath130 by formula @xmath358 with obvious modifications for the case where  @xmath341 is a finite sequence .",
    "it is easy to see that  @xmath127 is a martingale ,  @xmath285 , and  @xmath137 is equimeasurable with  @xmath10 .",
    "therefore , by theorem  [ martingalegeneratesafucntion ] ,  @xmath349 .    [ [ bellman - functions ] ] bellman functions + + + + + + + + + + + + + + + + +    [ martingalelessanalytic ] suppose that  @xmath5 satisfies conditions  , then @xmath359 if  @xmath13 is bounded from below , then @xmath360    this follows from theorem  [ martingalegeneratesafucntion ] .    [ analyticlessmartingale ] suppose that  @xmath5 satisfies conditions  .",
    "for any extension  @xmath36 of  @xmath5 @xmath361 if  @xmath13 is bounded from below , then @xmath362    this follows from theorem  [ functiongeneratesamartingale ] .",
    "the functions  @xmath193 and  @xmath192 are locally concave .",
    "this follows from corollary  [ concatenation ] for the case where the sequence  @xmath341 consists of two functions .",
    "this particular case of corollary  [ concatenation ] for two functions  @xmath363 and  @xmath364 justifies the heuristics that the concatenation of two functions belonging to the class is again in this class ( this is not so , but if one takes the monotonic rearrangement of the concatenation , the statement becomes correct ) .",
    "this heuristics was usually used to explain why the searched - for bellman function is assumed to be locally concave ( see , e.g. ,  @xcite , section  @xmath194 ) .",
    "[ [ distributions - of - functions - belonging - to - dyadic - classes ] ] distributions of functions belonging to dyadic classes + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let  @xmath365 be a cube in  @xmath18 .",
    "let  @xmath366 be the set of all dyadic subcubes of  @xmath365 .",
    "define the dyadic class by the formula @xmath367    dyadic classes ( @xmath368 and  @xmath369 ) are widely studied from different points of view . for the bellman function approach to similar problems on such classes , see , e.g.  @xcite and  @xcite .",
    "[ monotonicdyadic ] there exists an extension  @xmath36 of  @xmath5 such that the monotonic rearrangement of any  @xmath370 belongs to  @xmath371 .",
    "we believe that this statement is not new ( for particular cases  @xmath372 or  @xmath373 ; for the case of the gehring class see  @xcite ) , however , we have not found it in the literature . for each concrete domain  @xmath5 , the said extension  @xmath36 can be found by hand ( however , the authors do not see a good pattern for its description in full generality ) .",
    "in particular , the procedure below leads to the fact that the monotonic rearrangement of a function belonging to the dyadic  @xmath12 ( or the dyadic muckenhoupt class ) on the cube is in  @xmath12 ( or the muckenhoupt class ) .",
    "we give a sketch of the proof , not going into a detailed study of dyadic classes .",
    "each function from  @xmath374 generates a natural martingale in some extension  @xmath36 of  @xmath5 ( for example , see lemma  @xmath375 in  @xcite we get  @xmath376 ) } { \\leqslant}2^{\\frac{d}{2 } } \\|f\\|_{{\\mathrm{bmo}}^{\\mathrm{dyad}}([0,1]^d)}$ ] . ] ) , which , by theorem  [ martingalegeneratesafucntion ] , generates a monotonic function in  @xmath371 .",
    "it coincides with the monotonic rearrangement of  @xmath10 . though corollary  [ monotonicdyadic ] may seem very natural , we warn the reader against identifying the dyadic and continuous classes , see section  @xmath377 of  @xcite for some properties that distinguish them .",
    "we also mention the forthcoming paper  @xcite that treats the bellman function problem on the dyadic classes in arbitrary dimension .",
    "[ extensiontheorem ] if the domain  @xmath5 satisfies assumptions  @xmath378  @xmath379 , then @xmath380    this theorem finishes the proof of the main theorem for the case of  @xmath38-smooth  @xmath233 and  @xmath13 ( this is discussed in detail in subsection  [ s45 ] ) .",
    "proof of theorem  [ extensiontheorem ] occupies the whole present section ( except the concluding subsection  [ s45 ] ) . for convenience of the reader",
    ", we give an informal plot before passing to details .",
    "if  @xmath23 is infinite , there is nothing to prove . in what follows",
    ", we assume the finiteness of this function to avoid confusion .",
    "our aim is , with any positive  @xmath381 at hand , to construct an extension  @xmath382 and a locally concave function  @xmath383 on it such that @xmath384 this is done in several steps .",
    "we begin with an investigation on the behavior of a minimal locally concave function near the free boundary . by proposition  [ continuityonfreeboundary ] ,",
    "@xmath30 is continuous at the points of  @xmath385 .",
    "if the boundary and the boundary conditions are  @xmath386-smooth , then at any point  @xmath387 there exists a linear function  @xmath388 $ ] such that  @xmath388(x ) = { \\mathfrak{b}}(x)$ ] and  @xmath389(y)$ ] if the points  @xmath27 and  @xmath198 see each other \\subset \\omega$ ] . ] . in other words ,",
    "the graph of  @xmath388 $ ] is a supporting plane at the point  @xmath390 to the graph of  @xmath30 restricted to the set of points that see  @xmath27 .",
    "though the graph of  @xmath388 $ ] is a supporting plane , the value of  @xmath30 can be bigger than the value of  @xmath388 $ ] at the point  @xmath198 that is near  @xmath27 but is not seen from it ( e.g. ,  @xmath198 is another point of  @xmath385 ) , and this is very common for minimal locally concave functions .",
    "however ,  @xmath388 $ ] can be chosen in such a way that the gain the value  @xmath391 can obtain `` against the usual concavity '' is small ,  @xmath392(y ) { \\leqslant}o(|x - y|^3)$ ] . from this inequality , it is not hard to see that we can find some small locally concave on  @xmath5 function  @xmath393 such that  @xmath394 and the sum  @xmath395 is strictly locally concave .",
    "this material constitutes subsection  [ s42 ] .",
    "we have to construct some locally concave function on some extended domain .",
    "the idea is to extend the function  @xmath395 through the free boundary ( i.e. construct the function  @xmath383 on  @xmath382 in such a way that  @xmath396 on  @xmath5 ) . in subsection",
    "[ s44 ] , we prove that any strictly locally concave function can be extended in such a way , thus proving theorem  [ extensiontheorem ] .",
    "the procedure may seem a bit illogical at the first sight : minimal locally concave functions usually can not be extended through the free boundary .",
    "however , they can be perturbed to become strictly locally concave , and only then extended .    before turning to the proof ,",
    "we mention an easy consequence of the extension theorem .",
    "[ extensionforsmoothfunctions ] the statement of theorem   is valid with milder condition  @xmath397 instead of  @xmath379 .    for any  @xmath398",
    "we can find a function  @xmath399 such that  @xmath400 .",
    "this leads to  @xmath401 . applying theorem  [ extensiontheorem ] to the function  @xmath402 and then sending  @xmath47 to zero",
    ", we prove the corollary .",
    "we introduce some notation .",
    "let  @xmath27 be a point in  @xmath385 .",
    "define  @xmath403 and  @xmath404 to be two points on  @xmath233 such that  @xmath405 $ ] and this segment touches  @xmath385 .",
    "such points exist due to assumptions   and  .",
    "the line that passes through  @xmath406 and  @xmath407 is denoted by  @xmath408 .",
    "the closure of the part of  @xmath5 that is separated from  @xmath2 by the line  @xmath409 is called  @xmath410 .",
    "we note that  @xmath410 consists of those points in  @xmath5 that see  @xmath27 .",
    "we parametrize the fixed boundary with the inverse of some orthogonal projection as we did at the beginning of subsection  [ s32 ] . with this projection at hand",
    ", we say that one point lies on the left of another if it has smaller projection ( we also fix some orientation of the line whereto we project ) .",
    "we assume that for any  @xmath27 the point  @xmath403 lies on the left of  @xmath404 .",
    "see figure  [ fig : ill ] for clarity .",
    "[ superdifferential ] suppose that  @xmath5 and  @xmath13 satisfy the assumptions of theorem   and  @xmath387 .",
    "there exists a linear function  @xmath169 such that  @xmath411 and  @xmath412 whenever",
    "@xmath413 \\subset \\omega$ ] .    the function  @xmath414}$ ] is concave , therefore , there is some linear function  @xmath415 such that  @xmath416 and  @xmath417 for any  @xmath418 $ ] .",
    "the function  @xmath169 we are searching for will coincide with  @xmath159 on  @xmath419 $ ] .    by differentiability of  @xmath13 on the fixed boundary ,",
    "there exist positive  @xmath47 and  @xmath420 such that @xmath421 and a similar inequality holds true with  @xmath407 instead of  @xmath406 . therefore , there exists some linear function  @xmath422 that coincides with  @xmath159 on  @xmath409 and satisfies the inequality  @xmath423 for all  @xmath149 such that  @xmath424 and  @xmath425 .    on the other hand ,",
    "the function  @xmath13 is bounded on the set  @xmath426 , thus there exists a linear function  @xmath427 such that it coincides with  @xmath159 on  @xmath409 and  @xmath428 for  @xmath429 such that  @xmath430 .",
    "let  @xmath169 be the maximum of  @xmath422 and  @xmath427 ( on  @xmath410 ) .",
    "we see that  @xmath431 on  @xmath432 and on  @xmath419 $ ] . by the minimality of  @xmath30 ,  @xmath412 for all  @xmath433 . indeed ,",
    "if this inequality does not hold , then the function that equals  @xmath434 on  @xmath410 and  @xmath30 everywhere else is smaller than  @xmath30 , satisfies the boundary conditions , and is locally concave ( all this contradicts the minimality of  @xmath30 ) .",
    "we have built a function  @xmath169 that coincides with some linear function  @xmath159 on  @xmath409 and exceeds  @xmath30 on  @xmath410 .",
    "surely , there exists a pointwise minimal on  @xmath410 function among those which satisfy the same conditions ( with the function  @xmath159 fixed ) .",
    "we call it  @xmath388 $ ] . note that its choice depends on our choice of  @xmath159",
    "is in  @xmath386 with the same regularity assumptions at hand .",
    "therefore , the function  @xmath159 is unique .",
    "we do not need this . ] .",
    "let us clarify the notation .",
    "if  @xmath17 is a set ,  @xmath92 is a locally concave function on it , then  @xmath435 $ ] denotes a linear function with two properties : first ,  @xmath435(x ) = g(x)$ ] ; second ,  @xmath435(y ) { \\geqslant}g(y)$ ] for any  @xmath198 in some neighborhood of  @xmath27 ,  @xmath413 \\subset \\omega$ ] .",
    "the importance of collections of such linear functions is emphasized by fact  [ superdifferentialconcavity ] below .",
    "we note that the function  @xmath435 $ ] may not be well defined",
    ". however , we will always clarify what specific linear function we choose .",
    "it follows from the minimality of  @xmath436 $ ] that for each  @xmath27 there exists some point  @xmath437 such that  @xmath436(e_x ) = f(e_x)$ ] .",
    "the following fact is an easy consequence of the  @xmath38-smoothness assumptions .",
    "[ localmaxima ] in the assumptions of theorem for any  @xmath438 , there exists a point  @xmath439 inside the set  @xmath440 such that for any  @xmath149 in  @xmath233 ,  @xmath441 \\subset \\omega$ ] , the following equality holds : @xmath442(z ) - f(z)| = o(|z - e_x|^2),\\ ] ] where the  @xmath443 is uniform when  @xmath27 is in some compact set .",
    "it follows from the construction of the linear functions  @xmath436 $ ] that they are uniformly bounded on compact sets ( uniformly with respect to  @xmath27 lying in some compact set ) .",
    "therefore , the slopes of these linear functions are uniformly bounded .",
    "[ superconcavityestimate ] for each compact set  @xmath444 , there exist constants  @xmath398 and  @xmath445 such that @xmath446(y ) + c|x - y|^3 \\quad { whenever}\\ x\\in k , \\,\\,y\\in { \\partial_{\\mathrm{free}}}\\omega,\\,\\,|x - y| < { \\varepsilon}.\\ ] ]    assume that  @xmath198 lies on the right of  @xmath27 .",
    "if  @xmath47 is sufficiently small , then  @xmath447 and  @xmath448 .",
    "we consider two cases :  @xmath449 \\subset \\omega$ ] and  @xmath449 \\not\\subset \\omega$ ] . here",
    "@xmath439 is the point defined in fact  [ localmaxima ] .",
    "if the segment  @xmath449 $ ] lies inside  @xmath5 , then  @xmath450 .",
    "consider the function  @xmath451 $ ] restricted to the segment  @xmath449 $ ] .",
    "this function is concave , it has zero value at the point  @xmath452 and non - positive value at the point  @xmath453 \\cap [ e_x , y]$ ] .",
    "therefore , it has non - positive value at the point  @xmath198 , and the inequality  @xmath454(y)$ ] holds without the additional term on the right - hand side this does not work exactly .",
    "in such a case , one has to approximate  @xmath439 by some point  @xmath455 , do the same reasoning for the segment  @xmath456 $ ] , use fact  [ localmaxima ] , and passing to the limit as  @xmath457 get the same inequality without the additional term . ] .",
    "if  @xmath458 , then we use fact  [ localmaxima ] and see that @xmath459({u_{\\mathrm{l}}}(y))\\big| = o(|{u_{\\mathrm{l}}}(y ) - e_x|^2 ) = o(|{u_{\\mathrm{l}}}(x ) - { u_{\\mathrm{l}}}(y)|^2 ) = o(|x - y|^2).\\ ] ] now we consider the function  @xmath451 $ ] restricted to the segment  @xmath460 $ ] .",
    "this function is bounded from below by  @xmath461 at the point  @xmath462 and it is non - positive at the point  @xmath463 \\cap [ { u_{\\mathrm{l}}}(x),{u_{\\mathrm{r}}}(x)]$ ] .",
    "therefore , at the point  @xmath198 , it is bounded from above by the value @xmath464 now one only has to look through the proof again and convince himself that the constants are uniform on the compact set  @xmath226 .    by a strictly concave  @xmath38-smooth function we mean a function whose hessian ( the matrix of second differential ) is strictly positive - definite at every point .",
    "[ smallstrictlyconcavefunction ] for any convex domain  @xmath465 that does not contain lines and any  @xmath466 there exists a strictly concave  @xmath38-smooth function  @xmath393 on  @xmath467 such that  @xmath468 for any  @xmath469 .",
    "if  @xmath0 does not contain lines , then it lies inside some convex cone .",
    "therefore , there exist non - parallel lines  @xmath470 and  @xmath471 such that  @xmath472 .",
    "one can easily verify that the function @xmath473 does not exceed  @xmath381 , is positive , and is strictly concave on  @xmath467 .",
    "[ strictlyconcaveupperapproximation ] suppose that  @xmath5 and  @xmath13 satisfy the assumptions of theorem  ; let  @xmath393 be the function constructed in the previous lemma .",
    "for any  @xmath466 the function  @xmath474 has the properties listed below .",
    "the first condition follows from the construction , the second one is a consequence of lemma  [ superdifferential ] ( the functions  @xmath475 $ ] are defined as the  @xmath388 $ ] plus the linear functions that approximate  @xmath393 at the same points ) , and the third one is provided by proposition  [ superconcavityestimate ] and the strict concavity of  @xmath393 .",
    "we are going to extend the function  @xmath474 . what we need to construct an extension are the linear functions  @xmath475 $ ] only .",
    "we treat  @xmath385 as a fixed boundary and try to construct a domain  @xmath476 ,  @xmath477 , and a locally concave function  @xmath478 on it such that  @xmath479 on  @xmath480 and for each  @xmath149 the inequality  @xmath481(z)$ ] holds , whenever  @xmath149 and  @xmath27 see each other in  @xmath476 and  @xmath482 .",
    "then we can glue the functions  @xmath478 and  @xmath474 to get  @xmath383 ( a locally concave extension of  @xmath474 ) defined on  @xmath483 .",
    "the local concavity of  @xmath383 will follow immediately from a simple fact indicated below ( which is a consequence of a similar principle for concave functions on an interval ) .    [ superdifferentialconcavity ] let  @xmath83 be a subset of  @xmath18 , let  @xmath92 be a function on it . if for each point  @xmath143 there exists a linear function  @xmath435 $ ] such that  @xmath435(x ) = g(x)$ ] and  @xmath435(y ) { \\geqslant}g(y)$ ] for all  @xmath198 in some neighborhood of  @xmath27 ,  @xmath413 \\subset w$ ] , then  @xmath92 is locally concave on  @xmath83 .",
    "we need an abstract lemma about extending domains .",
    "[ firstextension ] suppose that  @xmath0 is a strictly convex unbounded open non - empty subset of  @xmath1 that does not contain lines .",
    "for any  @xmath484 $ ] that is separated from zero on each compact subset of  @xmath14 , there exists a convex open set  @xmath2 such that  @xmath280 satisfies assumptions   and and whenever the points  @xmath27 and  @xmath198 belonging to @xmath14 see each other in  @xmath5 , the inequality  @xmath485 holds true .",
    "define  @xmath486 by the formula @xmath487 it follows from the strict convexity of  @xmath0 that the closure of  @xmath486 does not intersect  @xmath14 .",
    "we can enlarge the set  @xmath486 up to some bigger strictly convex open set  @xmath2 still lying strictly inside  @xmath0 such that  @xmath280 satisfies condition   and  .",
    "we only have to prove that the points  @xmath27 and  @xmath198 from  @xmath14 do not see each other in  @xmath5 if  @xmath488 .",
    "this follows from the fact that the midpoint of  @xmath413 $ ] is in  @xmath486 provided  @xmath488 .",
    "[ strictlyconcavemajorant ] suppose that  @xmath0 is a strictly convex unbounded open non - empty subset of  @xmath1 , which has  @xmath38-smooth boundary and does not contain lines .",
    "suppose the linear functions  @xmath489 ,  @xmath490 , satisfy the condition that for any compact set  @xmath491 there exist positive numbers  @xmath492 and  @xmath493 such that for any  @xmath494 and  @xmath495 , @xmath496 whenever  @xmath497 .",
    "in such a case , there exists a domain  @xmath2 such that  @xmath280 satisfies conditions   and   and inequality   holds when  @xmath498 and  @xmath495 see each other in  @xmath5 ( with some different parameter  @xmath499 ) ; the domain  @xmath5 also satisfies the condition that the points see each other in it only when the distance between them does not exceed  @xmath500 .",
    "this corollary is a particular case of lemma  [ firstextension ] .",
    "consider a locally finite covering of  @xmath14 by a family  @xmath501 of compact sets .",
    "for each  @xmath502 , we fix a compact set  @xmath503 such that  @xmath504 .",
    "define the function  @xmath505 by the formula @xmath506 this function is surely separated from zero on any compact set ( because it attains only a finite number of values on this set ) .",
    "we apply lemma  [ firstextension ] with this particular function  @xmath505 to build the domain  @xmath5 .",
    "we have to verify inequality   for any compact set  @xmath507 .",
    "it follows from the very definition of the objects that this inequality holds with the parameters  @xmath508 chosen by the rule @xmath509    let  @xmath0 and the collection of linear functions  @xmath510 be as in the previous corollary .",
    "we construct the function  @xmath92 by the formula @xmath511",
    "\\subset \\omega,\\,\\,x \\in { \\partial_{\\mathrm{fixed}}}\\omega\\},\\ ] ] where the domain  @xmath5 is the one constructed in the previous corollary .",
    "this function , surely , satisfies  @xmath512 and  @xmath513 whenever  @xmath215 and  @xmath514 \\subset \\omega$ ] .",
    "we are going to prove its local concavity on some domain  @xmath515 which is a subdomain of  @xmath5 .",
    "we almost obtain it from formula   and fact  [ superdifferentialconcavity ] : if  @xmath516 and  @xmath517 sees some neighborhood of  @xmath149 , then  @xmath92 is smaller than  @xmath518 in some neighborhood of  @xmath149 by the definition of  @xmath92 .",
    "it occurs that if  @xmath149 is not far from  @xmath233 , then  @xmath517 is also not far from  @xmath149 , and thus sees some neighborhood of  @xmath149 .",
    "here is the precise statement .",
    "[ concavityneartheboundary ] suppose that  @xmath5 satisfies the assumptions   and that if  @xmath413 \\subset \\omega$ ] , then  @xmath519 .",
    "suppose the linear functions  @xmath489 ,  @xmath215 , satisfy the condition that for any compact set  @xmath520 there exists  @xmath521 such that for any points  @xmath522 ,  @xmath523 that see each other in  @xmath5 inequality   holds true .",
    "we also assume that  @xmath524 is uniformly bounded when  @xmath27 belongs to a compact set .",
    "if the function  @xmath92 is given by formula   then for any compact set  @xmath520 there exists  @xmath525 such that if  @xmath498 ,  @xmath523 , and  @xmath526 , then  @xmath413 \\subset \\omega$ ] and for any  @xmath527 $ ] there exists a linear function  @xmath528 $ ] such that  @xmath529(z)$ ] , but  @xmath92 is not bigger than  @xmath528 $ ] in some neighborhood of  @xmath149 .",
    "we need to fix two parameters for each compact set  @xmath520 ,  @xmath530 and  @xmath531 , where the supremum is taken over all  @xmath215 that are seen from some point of  @xmath226 ( this set is compact due to our assumptions on  @xmath5 ) .",
    "the parameter  @xmath492 will satisfy several inequalities to be specified later , the first one is that  @xmath492 is much smaller than  @xmath532 ( say ,  @xmath533 ) .",
    "we are going to prove that there exists  @xmath534 such that for any points  @xmath535 such that  @xmath536 and  @xmath79 see each other in  @xmath5 and any point  @xmath537 such that  @xmath538 ,  @xmath539 , the inequality  @xmath540 holds .",
    "this is easy : @xmath541    so , for any compact set  @xmath226 we take  @xmath542 .",
    "now we take  @xmath543 , where  @xmath544 is the set of all points on  @xmath233 that are seen from the points that are seen from  @xmath226 . in such a case , @xmath545 if  @xmath527 $ ] ,  @xmath526 ,  @xmath498 ,  @xmath546 .",
    "indeed , choose any point  @xmath547 such that  @xmath548 and  @xmath79 sees  @xmath149 .",
    "in such a case ,  @xmath79 sees either @xmath27 or @xmath198 .",
    "we take @xmath549 or @xmath550 in such a way that  @xmath79 sees  @xmath536 . then",
    ", both  @xmath79 and  @xmath536 are in  @xmath544 ,  @xmath551 , and  @xmath552 .",
    "thus , by the argument above ,  @xmath553 .",
    "the set of points  @xmath79 that see  @xmath149 and satisfy  @xmath554 is compact , thus there exists  @xmath517 such that  @xmath555 .",
    "take  @xmath528 $ ] to be  @xmath556 ( the sequence  @xmath557 is uniformly bounded as a set of linear functions , therefore , it has some convergent subsequence ; without loss of generality , we assume that  \\{@xmath558 has a limit itself ) .",
    "surely ,  @xmath517 sees some neighborhood of  @xmath149 ( and so does  @xmath559 eventually ) , because  @xmath560 and  @xmath561 .",
    "therefore , by the construction of  @xmath92 ( formula  ) ,  @xmath92 does not exceed  @xmath528 $ ] on this neighborhood .",
    "[ lightextension ] suppose that  @xmath5 satisfies the assumptions   and   and that if  @xmath413 \\subset \\omega$ ] , then  @xmath519 .",
    "suppose the linear functions  @xmath489 ,  @xmath215 , satisfy the condition that for any compact set  @xmath520 there exists  @xmath521 such that for any points  @xmath522 ,  @xmath523 that see each other in  @xmath5 inequality   holds true .",
    "suppose also that  @xmath524 is uniformly bounded when  @xmath27 belongs to a compact set .",
    "if the function  @xmath92 is given by formula   then there exists some domain  @xmath515 satisfying conditions   such that  @xmath5 is an extension of  @xmath515 and  @xmath92 is locally concave on  @xmath515 .",
    "using lemma  [ concavityneartheboundary ] , we match each compact set  @xmath520 its parameter  @xmath492 and define the function  @xmath562 $ ] by the formula @xmath563 we build  @xmath564 with the help of lemma  [ firstextension ] and this function  @xmath505 .",
    "first , the domain  @xmath5 is an extension of  @xmath515 .",
    "second , if  @xmath565 , then there exist two points  @xmath27 and  @xmath198 belonging to  @xmath566 such that  @xmath527 \\subset \\omega^*$ ]",
    ". there exists a compact set  @xmath567 such that  @xmath498 and  @xmath568 .",
    "in such a case ,  @xmath526 . by lemma  [ concavityneartheboundary ] ,",
    "there exists a linear function  @xmath528 $ ] such that  @xmath529(z)$ ] and  @xmath569 $ ] in some neighborhood of  @xmath149 .",
    "therefore , the function  @xmath92 satisfies the assumptions of fact  [ superdifferentialconcavity ] in the domain  @xmath515 , thus it is locally concave .",
    "[ [ proof - of - theoremextensiontheorem . ] ] proof of theorem  [ extensiontheorem ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    we start with the function  @xmath23 on the domain  @xmath5 .",
    "fix  @xmath466 .",
    "using lemma  [ smallstrictlyconcavefunction ] and corollary  [ strictlyconcaveupperapproximation ] , we build the strictly locally concave function  @xmath474 such that  @xmath570 , and the family of linear functions  @xmath571\\}_{x \\in { \\partial_{\\mathrm{free}}}\\omega}$ ] . treating the curve  @xmath385 as the fixed boundary of a searched - for domain and using corollary  [ strictlyconcavemajorant ] ( with  @xmath2 as  @xmath0 in the conditions of the corollary and the functions  @xmath475 $ ] as  @xmath489 )",
    ", we build some domain  @xmath572 such that  @xmath573 and the `` boundary conditions ''  @xmath475 $ ] satisfy the concavity condition   `` inside '' this domain .",
    "in such a case , we construct the function  @xmath478 by formula  ,",
    "i.e. by the formula @xmath574(z)\\big|\\,\\,[z , x ] \\subset \\hat{\\omega}'_{\\delta},\\,\\,x \\in { \\partial_{\\mathrm{free}}}\\omega\\},\\quad z \\in \\hat{\\omega}'_{\\delta}\\ ] ] ( the domain  @xmath572 is needed for this construction ) . by proposition  [ lightextension ] , the function  @xmath478 is locally concave on some domain  @xmath476 ,  @xmath575 , satisfies the inequality  @xmath481(z)$ ] in a neighborhood of  @xmath27 ( for any  @xmath387 ) ,  @xmath576 , and the equality  @xmath577(x ) = { \\mathfrak{b}}_{\\omega , f}(x ) + e_{\\delta}(x)$ ] for any  @xmath387 .",
    "we define  @xmath383 to be equal  @xmath474 on  @xmath5 and  @xmath478 on  @xmath476 .",
    "the third point of corollary  [ strictlyconcaveupperapproximation ] implies that  @xmath578(z)$ ] in a neighborhood of  @xmath27 for any  @xmath387 ,  @xmath579 .",
    "the function  @xmath383 is locally concave on  @xmath580 by fact  [ superdifferentialconcavity ] and satisfies the inequality  @xmath581 on  @xmath5 because the function  @xmath474 does .      [ smoothmaintheorem ] suppose that the domain  @xmath5 satisfies the assumptions   and also has  @xmath38-smooth fixed boundary .",
    "let the function  @xmath13 be bounded from below and continuous . then  @xmath582 .    by proposition  [ continuityonfixedfoundary ] ,",
    "@xmath23 is continuous at every point of the fixed boundary .",
    "consequently , theorem  [ geometricmartingale ] asserts that  @xmath583 . by corollary  [ martingalelessanalytic ] ,  @xmath584 . by corollary  [ analyticlessmartingale ] ,  @xmath585",
    "; here the infimum is taken over all the extensions of  @xmath5 . by corollary  [ extensionforsmoothfunctions ] ,",
    "@xmath586 , which finishes the proof .",
    "[ smoothmaintheoremunboundedfunction ] suppose that the domain  @xmath5 satisfies the assumptions   and also has  @xmath38-smooth fixed boundary .",
    "let the function  @xmath13 be continuous . then  @xmath587 .",
    "the proof is the same .",
    "the most technically difficult counterpart , theorem  [ extensiontheorem ] , is not needed for the classical domains  @xmath5 ( such as the parabolic strip or the hyperbolic strip ; namely , _ all _ the domains listed in subsection  [ s13 ] on which the bellman functions are considered ) if one also assumes some mild summability conditions , because these domains have additional homogeneous structure .",
    "for example , see  @xcite , proof of statement  @xmath588 , where the general extension theorem is replaced by a one line formula using homogeneity ( however , the reasoning there requires additional summability , for example , with this method one is , seemingly , not able to prove theorem  [ supersummability ] below )",
    ". it would be great either to find a shorter and more transparent proof of theorem  [ extensiontheorem ] in the full generality , or change it for something weaker that is still sufficient for the proof of the main theorem .",
    "we begin this section with the construction that will be used as the main engine of the smoothing procedure .",
    "the idea resembles the one used to prove theorem  [ extensiontheorem ] , namely , we are going to define the smoothed function  @xmath589 as an infimum of linear functions generated by the initial function  @xmath92 , as we did it in formula  .",
    ".,height=359 ]    let  @xmath5 satisfy conditions   and  .",
    "let  @xmath92 be a locally concave function on  @xmath5 that is locally bounded .",
    "we choose a linear function  @xmath435 $ ] for any  @xmath590 ; as usual , we require two properties :  @xmath435(x ) = g(x)$ ] and  @xmath591(y)$ ] for any  @xmath198 such that  @xmath592 \\subset \\omega$ ] . let  @xmath593 be a monotone sequence ( the ordering was defined at the beginning of subsection  [ s32 ] ) of points on the fixed boundary such that  @xmath594 $ ] does not intersect  @xmath595 and each point of  @xmath233 lies between two points of this sequence ( i.e. the sequence `` covers '' the whole boundary ) .",
    "we also require that at each point  @xmath596 the curve  @xmath233 is differentiable .",
    "for each  @xmath142 we find a unique point  @xmath597 such that the segments  @xmath598 $ ] and  @xmath599 $ ] touch  @xmath233 . the symbol  @xmath600 denotes the open triangle with the vertices  @xmath601 ,  @xmath602 , and  @xmath603 .",
    "we will also need one more domain that lies inside  @xmath600 .",
    "let us call it  @xmath604 .",
    "we introduce it in several steps . by  @xmath605",
    "we denote the homothety with coefficient  @xmath606 and center  @xmath27 ( i.e. the mapping  @xmath607 ) .",
    "consider the convex set @xmath608 the convex set  @xmath604 lies inside this set , contains  @xmath609 , and has a  @xmath38-smooth boundary ( except , maybe , at the points  @xmath601 and  @xmath603 ) .",
    "see figure  [ fig : seq ] for the visualization of the construction .",
    "there are many methods how to construct such a set , we leave it to the reader .",
    "the main property that we will use is the following one : there is a small  @xmath47 such that when  @xmath610 and  @xmath611 , one has  @xmath612 , where  @xmath613\\cap { \\partial_{\\mathrm{fixed}}}\\omega$ ] ; a similar condition also holds when  @xmath603 is replaced by  @xmath601 .",
    "we are going to extend the function  @xmath92 through the fixed boundary .",
    "the following lemma is about extending through a small part of it .",
    "[ localextensionfixedboundary ] in the above notation , the function  @xmath614 defined by the formula @xmath615(y)\\mid x \\in ( a_{n-1 } , a_{n+1})\\}\\ ] ] is finite inside  @xmath600 .",
    "if the function  @xmath92 is continuous at  @xmath601 , then the restriction of  @xmath616 to the domain  @xmath617 is also continuous at  @xmath601(and the same claim holds with  @xmath603 in place of  @xmath601 ) .    to prove the first claim",
    ", we fix a point  @xmath618 and introduce several points related to it .",
    "let  @xmath619\\cap { \\partial_{\\mathrm{fixed}}}\\omega$ ] and let  @xmath620\\cap { \\partial_{\\mathrm{fixed}}}\\omega$ ] .",
    "if  @xmath621 , then ( the point  @xmath622 stands for  @xmath413\\cap ( y_{n-1},y_{n+1})$ ] , see figure  [ fig : est ] ) @xmath623(y ) = l[g;x](x ) + \\frac{|y - x|}{|x_y - x|}\\big(l[g;x](x_y ) - l[g;x](x)\\big ) { \\geqslant}-\\frac{|y - x_y|}{|x_y - x|}g(x ) + \\frac{|y - x|}{|x_y - x|}g(x_y).\\ ] ] this value is uniformly bounded from below when  @xmath621 , because the values  @xmath624 ,  @xmath625 , and the coefficients are bounded .",
    "therefore , the function  @xmath616 is finite on  @xmath600 , and fact  [ continuityininnerpoints ] shows that it is continuous there .",
    ".,height=359 ]    let us turn to the second claim of the lemma .",
    "first we prove the semi - continuity from below .",
    "fix  @xmath398 .",
    "it suffices to prove a uniform in  @xmath621 bound  @xmath435(y ) { \\geqslant}g(a_{n-1 } ) - { \\varepsilon}$ ] when  @xmath626 and  @xmath627 is sufficiently small .",
    "this estimate is obvious for  @xmath628 due to the continuity of  @xmath92 at  @xmath601 . in what follows",
    ", we suppose that  @xmath629 .",
    "let  @xmath630 be a positive number such that  @xmath631 when  @xmath632 and  @xmath537 .",
    "consider the two cases :  @xmath633 and  @xmath634 .",
    "in the case  @xmath634 , we argue as follows : take  @xmath635 to be so small that  @xmath636 } |g|)^{-1}$ ] whenever  @xmath637 and  @xmath621 ( one can do so because the curve  @xmath233 is differentiable at the point  @xmath601 ) ; we also require that in such a case  @xmath638 .",
    "thus , formula   provides the estimate @xmath639(y ) { \\geqslant}-\\frac{{\\varepsilon}}{3 } + \\big(1- \\frac{{\\varepsilon}}{3}(\\!\\!\\sup_{[a_{n-1},a_{n+1}]}\\!\\!\\!\\!\\!\\!\\!\\!|g|)^{-1}\\big)(g(a_{n-1 } ) - \\delta ) { \\geqslant}g(a_{n-1 } ) - { \\varepsilon}\\quad\\hbox{if~$\\delta$ is sufficiently small}.\\ ] ]    in the case  @xmath640 , we use the fact that the ratio  @xmath641 is bounded by  @xmath642 .",
    "indeed , if  @xmath198 is sufficiently close to  @xmath601 , then  @xmath643 ( it follows from the thales theorem ) , and the latter quantity does not exceed  @xmath642 by our assumptions on the domain  @xmath617 . therefore , formula   results in @xmath644(y ) { \\geqslant}-\\frac{|y - x_y|}{|x_y - x|}\\big(g(a_{n-1 } ) + \\delta\\big ) + \\frac{|y - x|}{|x_y - x|}\\big(g(a_{n-1 } ) -\\delta\\big ) = \\\\ g(a_{n-1 } ) - \\big(2\\frac{|y - x_y|}{|x_y - x|}+1\\big)\\delta { \\geqslant}g(a_{n-1 } ) -{\\varepsilon}\\end{aligned}\\ ] ] if  @xmath645 . the semi - continuity from below of  @xmath616 at  @xmath601 is proved .    on the other hand ,",
    "@xmath92 is continuous at the point  @xmath601 ( and concave ) , therefore  @xmath646 equals  @xmath647(a_{n-1})$ ] , where  @xmath648 $ ] .",
    "fix  @xmath398 and let  @xmath649 $ ] be such that  @xmath650(a_{n-1 } ) -{\\varepsilon}$ ] .",
    "then , @xmath651(y ) = l[g;x](a_{n-1 } ) { \\leqslant}g(a_{n-1 } ) + { \\varepsilon}.\\ ] ] sending  @xmath47 to  @xmath238 , we get the semi - continuity from above .",
    "[ extensionthroughfixedboundarylemma ] let  @xmath92 be a locally concave function on the domain  @xmath5 satisfying conditions  .",
    "there exists a locally concave function  @xmath589 on the domain  @xmath652 such that  @xmath653 on  @xmath654 and  @xmath655 on  @xmath5 , and  @xmath589 is continuous everywhere , except , possibly , the points  @xmath656 .",
    "if  @xmath92 is continuous at  @xmath657 for some numbers  @xmath316 , then  @xmath589 can be chosen to be continuous at the same points .",
    "for each  @xmath658 , define the function  @xmath659 by formula  .",
    "this function is concave , it is not less than  @xmath92 on  @xmath660 , and coincides with  @xmath92 on the segment  @xmath661 .",
    "let the function  @xmath589 be equal  @xmath92 on  @xmath662 and  @xmath663 on  @xmath664 for each  @xmath665 .",
    "first , this function is equal to  @xmath92 on  @xmath666 .",
    "second , this function is locally concave by fact  [ superdifferentialconcavity ] .",
    "third , it is continuous at every point of its definition domain ( because the functions  @xmath663 are finite on the corresponding domains by lemma  [ localextensionfixedboundary ] ) , except for the points  @xmath657 ,  @xmath667 , by fact  [ continuityininnerpoints ] .",
    "the continuity result for the points  @xmath657 has also been proved in lemma  [ localextensionfixedboundary ] .",
    "[ nonsmoothboundarycor ] let  @xmath5 satisfy conditions",
    ". if the function  @xmath668 is bounded from below and continuous , then  @xmath669 . if  @xmath13 is any continuous function , then  @xmath670 .",
    "we prove only the first assertion , the second one is similar",
    ". there is nothing to prove if  @xmath30 is infinite , so we assume that it is locally bounded .",
    "the inequality  @xmath671 follows from theorem  [ geometricmartingale ] and corollary  [ martingalelessanalytic ] .    to prove the converse inequality , we fix some point  @xmath672 . fix  @xmath398 and choose a monotone sequence  @xmath673 of the points in  @xmath233 such that  @xmath674 for any  @xmath316 and the values of  @xmath13 inside the arc between  @xmath675 and  @xmath676 do not differ for more than  @xmath47 ( so ,",
    "on this arc  @xmath13 is a constant  @xmath677 plus an error term that does not exceed  @xmath47 in modulus ) .",
    "we apply lemma  [ extensionthroughfixedboundarylemma ] to the locally concave function  @xmath23 to get the function  @xmath589 .",
    "this function is locally concave and continuous on the domain  @xmath652 , moreover ,  @xmath678 on the arc of  @xmath233 between the points  @xmath657 and  @xmath679 .",
    "we can construct a convex closed set  @xmath680 such that  @xmath681 ,  @xmath682 , and the boundary of  @xmath680 is  @xmath38-smooth except , maybe , for the points  @xmath657 ,  @xmath665 . on the fixed boundary of this new domain",
    ", we find a new sequence ( say ,  @xmath683 ) such that its points differ from the  @xmath673 ( and between each points  @xmath673 and  @xmath684 there is at least two points of the new sequence ; we may also suppose that the tangent triangles that correspond to this sequence lie inside  @xmath685 ) , but the point  @xmath27 does not belong to the corresponding triangles  @xmath686 . applying lemma  [ extensionthroughfixedboundarylemma ] to the domain  @xmath687 and the function  @xmath589 ( with the sequence  @xmath683 ) , and then narrowing the obtained domain near the points  @xmath688 ( where its boundary may be non - smooth ) , we get the domain  @xmath689 with a  @xmath38-smooth boundary such that  @xmath690 , and a locally concave function  @xmath691 ,  @xmath691 is continuous and locally concave on  @xmath692 , and  @xmath693 .",
    "we may also require that  @xmath694 on  @xmath695 ( by one more narrowing ) .",
    "let  @xmath696 , then @xmath697 we apply corollary  [ extensionforsmoothfunctions ] to the function  @xmath698 on the domain  @xmath699 to find an extension  @xmath700 of the domain  @xmath699 such that  @xmath701 does not exceed  @xmath702 on the domain  @xmath699 .",
    "let  @xmath703 and let  @xmath109 be the restriction of  @xmath704 to  @xmath233 .",
    "then ,  @xmath705 and  @xmath706 does not exceed  @xmath707 at the point  @xmath27 .",
    "we can write @xmath708 sending  @xmath47 to  @xmath238 , we prove the corollary .",
    "now we are ready to prove the main theorem in the full generality .",
    "[ discontinuousfunctionnonsmoothboundary ] let  @xmath5 satisfy conditions  . if the function  @xmath668 is bounded from below , then  @xmath669 . if  @xmath13 is any locally bounded function , then  @xmath670 .",
    "we will prove only the first assertion , the second one is similar .",
    "there is nothing to prove if  @xmath30 is infinite , so we assume that it is locally bounded .",
    "it suffices to prove that @xmath709 for any non - constant  @xmath284 .",
    "choose a monotone sequence  @xmath673 of the points in  @xmath233 such that  @xmath710 for any  @xmath316 .",
    "let  @xmath589 denote the function provided by lemma  [ extensionthroughfixedboundarylemma ] applied to the locally concave function  @xmath23 .",
    "the function  @xmath589 is continuous on  @xmath5 except for the points  @xmath657 ,  @xmath665 .",
    "let  @xmath691 denote the function which is obtained by an application of the same lemma to the function  @xmath589 and the sequence of poins  @xmath711 ,  @xmath665 ( so the corresponding triangles have the points  @xmath712 among their vertices ) .",
    "the function  @xmath691 has several nice properties : it is continuous on the whole domain  @xmath5 ( the main point is that lemma  [ extensionthroughfixedboundarylemma ] allows it to remain continuous at the points  @xmath657 ) , it is not less than  @xmath23 , and @xmath713 the proof of the inequality wanted looks like this : @xmath714",
    "we have statements of two types : either the boundary value  @xmath13 is bounded from below or we consider functions ( and martingales ) with bounded values . in this section",
    "we try to combine them , i.e. to extract the _ a posteriori _ correctness of the integral in formula   from the finiteness of  @xmath23 .",
    "we begin with a discouraging claim : there exists a function  @xmath13 such that the function  @xmath670 is finite , but for some  @xmath284 the integral  @xmath39 is not well defined ( i.e. both  @xmath715 and  @xmath716 are not summable ,  @xmath717 ,  @xmath718 ) .",
    "such an example can be constructed for the case of the parabolic strip ( thus the class  @xmath33 is isomorphic to  @xmath52 for some  @xmath47 ) using formulas from the paper  @xcite .",
    "we do not dwell on this , the reader is referred to the forthcoming paper  @xcite .",
    "the example shows that the summablity questions are not only technical ones .",
    "first , we prove that the summability of  @xmath40 for all  @xmath284 is equivalent to finiteness of  @xmath41 ( under assumption that  @xmath23 is finite ) , and second , we provide an easy - to - verify criterion for the function  @xmath13 that gives the finiteness of  @xmath23 and  @xmath41 ( and thus the correctness of formula  ) .",
    "in what follows , we say that the lebesgue integral  @xmath719 is well defined if either  @xmath720 or  @xmath721 is finite .",
    "[ summability ] suppose that  @xmath5 satisfies conditions  , the function  @xmath13 is locally bounded from below , and  @xmath23 is finite .",
    "then , the integral  @xmath39 is well defined for all  @xmath284 if and only if  @xmath41 is finite . moreover , in such a case  @xmath669 .",
    "suppose that  @xmath41 is finite .",
    "the function  @xmath42 is bounded from below , therefore , by corollary  [ discontinuousfunctionnonsmoothboundary ] ,  @xmath722 , which means that  @xmath723 is always finite .",
    "thus ,  @xmath39 is well defined .",
    "the reverse implication is a bit more difficult .",
    "first , we prove that if  @xmath39 is well defined for all  @xmath284 and  @xmath23 is finite , then  @xmath669 ( and thus  @xmath724 is finite ) . by corollary  [ discontinuousfunctionnonsmoothboundary ]",
    ", we know that  @xmath725 , so it suffices to prove the inequality @xmath709 for any  @xmath284 .",
    "we may assume that  @xmath10 is non - constant .",
    "by corollary  [ monotonicrearrangementcor ] , we may assume that  @xmath10 is defined on  @xmath239 $ ] and monotonic .",
    "let  @xmath726 be the restriction of  @xmath10 to the interval  @xmath727 $ ] ,  @xmath728 .",
    "for each  @xmath142 ,  @xmath729 , thus , @xmath730 the integral  @xmath731}}}$ ] is well defined , thus  @xmath732}}}$ ] as  @xmath136 . by continuity of the function  @xmath30 , provided by fact  [ continuityininnerpoints ] and proposition  [ continuityonfreeboundary ] ,  @xmath733}}})$ ] , and the inequality",
    "is proved .",
    "so ,  @xmath669 .",
    "we have to prove that  @xmath734 is finite .",
    "assume the contrary , let it be infinite at some point  @xmath27 .",
    "by the very definition , there exists a sequence  @xmath735 of functions belonging to  @xmath33 such that  @xmath736 and  @xmath737 .",
    "we apply corollary  [ concatenation ] to this sequence of functions and the sequence of numbers  @xmath738 to obtain a function  @xmath284 such that  @xmath217 , but  @xmath739 .",
    "the integral  @xmath39 is well defined , therefore ,  @xmath740 , which contradicts the finiteness of  @xmath23 .",
    "though we have a criterion for the bellman function to be finite given by the previous proposition , it seems to be rather difficult to verify .",
    "now we give a condition on  @xmath13 that guarantees the finiteness of  @xmath734 .",
    "it is explicit modulo calculations of certain bellman functions , which are very easy , but need some technique that requires a vast exposition .",
    "so , we write our estimates in terms of certain bellman functions , and then show , what do they give for the case of the parabolic strip ( in particular , we show that our estimates are not far from being sharp ) .",
    "we parameterize the fixed boundary with the inverse projection as we did in the beginning of subsection  [ s32 ] .",
    "next , we choose an increasing sequence  @xmath741 of points lying on the fixed boundary such that for each  @xmath142 the segment  @xmath742 $ ] touches the upper boundary ( the sequence may be finite , for example , for the domain  @xmath743 ) .",
    "let  @xmath744 be the arc of the fixed boundary with the endpoints  @xmath601 and  @xmath603 .",
    "define the maximal function  @xmath745 by the formula @xmath746 this maximal function approximates  @xmath13 , if  @xmath13 does not oscillate to much .",
    "it suffices to find at least one finite function in the class  @xmath747 .",
    "for example , it can be the function @xmath748 if the series converges at every point of the domain ( a sum of locally concave functions is locally concave ) .",
    "the bellman functions on the right - hand side can be easily calculated .",
    "as we have said , we would not do this in the full generality , but concentrate on the example of the ball in  @xmath12 . in this case",
    ", one can take  @xmath749 , and write an easy estimate for the corresponding bellman function : @xmath750 similar bellman functions had been calculated in  @xcite and  @xcite .",
    "thus , we have the following theorem that lies beyond the classical john  nirenberg inequality .    [ supersummability ]",
    "if the function  @xmath13 satisfies the condition @xmath751 } |f| < \\infty,\\ ] ] for some  @xmath398 , then  @xmath39 is finite for any  @xmath752 .    this theorem is sharper than the condition  @xmath753 for some  @xmath754 from  @xcite .",
    "however , theorem  [ supersummability ] heavily relies on theorem  [ extensiontheorem ] .",
    "as the reader may have already noticed , the abstract theory of subections  [ s22 ] and  [ s23 ] can be transferred to riemannian manifolds ( or even more general objects ) .",
    "this may be useful in the context of working with domains of the type `` circle minus circle '' , e.g.  @xmath755 .",
    "for such a domain one can consider similar function classes , bellman functions , etc .. however , one does not have here analogs of the embedding results from subsections  [ s31 ] and  [ s32 ] .",
    "moreover , the natural domain for the martingales is not the domain  @xmath5 itself , but its fundamental covering ( because the martingales do not `` feel '' the fundamental group ) .",
    "however , the corresponding class of functions on the fixed boundary of this manifold does not match the naturally defined one .",
    "nevertheless , the main theorem still holds .",
    "this is again due to topological reasons .",
    "namely , the martingales that optimize the bellman function can not turn over the inner circle .",
    "this is a consequence of the following conjecture .",
    "let  @xmath0 be a compact convex subset of  @xmath1 with non - empty interior .",
    "suppose that  @xmath2 is a convex open set such that  @xmath3 .",
    "let  @xmath756 .",
    "in such a case , for any bounded function  @xmath251 there are at least two points  @xmath757 on  @xmath385 such that  @xmath758 ,  @xmath759 .",
    "in particular , this shows that the foliation ( see  @xcite for the definition ) consisting of the tangents only can not be a foliation of some minimal locally concave function ( except for the trivial case of a linear function ) .",
    "so , the study of minimal locally concave functions and corresponding problems for functions and martingales may be influenced by some topological properties of the domain ( here the effect comes from the fact the domain is not simply connected ) .",
    "conjecture  [ manifold ] ( see appendix ) seems to be very natural .",
    "it is also required for further study of abstract locally concave functions .",
    "a more demanding thing is to find some similar duality for dyadic problems ( see , e.g.  @xcite for some of them ) .",
    "there is surely some : one can consider dyadic martingales on domains .",
    "however , the corresponding properties of minimal dyadically concave functions are not studied in a similar way that is presented here .",
    "there are also some small miracles : for example , the solution of the john  nirenberg problem for dyadic classes appears to coincide with the solution of continuous problem for some bigger ball ( or what is the same , for some wider strip ) , see  @xcite .",
    "there is a conjecture that , in a sense , related to the bellman function on dyadic classes .",
    "define the bellman function for the john  nirenberg inequality on a cube by the formula @xmath760 here  @xmath365 is a  @xmath761-dimensional cube ( and the  @xmath12 norm is defined as the supremum of the value  , where  @xmath11 runs through all subcubes of  @xmath365 ) .",
    "there exists some  @xmath762 such that  @xmath763 , where  @xmath764 .",
    "the conjecture says that the bellman function for the  @xmath761-dimensional problem can be obtained by restricting the solution of the corresponding one - dimensional problem on some bigger ball to  @xmath765 .",
    "the exponential function is important here , because it gives additional homogeneous structure .    as we have seen , this problem is a friend of the corresponding monotonic rearrangement estimate .",
    "the constant  @xmath766 from the previous conjecture is the best possible constant in the inequality @xmath767 ) } { \\leqslant}c(d)\\|f\\|_{{\\mathrm{bmo}}(q)}.\\ ] ]    we also believe that considering zigzag martingales ( see  @xcite for the definition ) on domains and manifolds may lead to new estimates for the martingale transform , i.e. martingales on domain , or  @xmath83-martingales may build the bridge between the two very nearby , but still not very connected on the formal level , topics : the bellman function and the burkholder method .    [",
    "we describe a procedure that enables us to work with the domains  @xmath5 for which  @xmath768 ( for example , with the natural domain for the gehring class ) .",
    "we are not trying to reach the full generality , but give a recipe that allows to cover all the known cases .",
    "let  @xmath769 and  @xmath770 be strictly convex non - negative functions on the half - line  @xmath771 .",
    "let them grow faster than any linear function at infinity and let  @xmath772 .",
    "suppose also that  @xmath773 on the open half - line .",
    "consider the sets  @xmath774 and  @xmath775 .",
    "as usual , @xmath776 the subset of  @xmath5 where the inequality  @xmath777 turns into equality is called the fixed boundary , the subset of  @xmath5 where the inequality  @xmath778 turns into equality , is called the free boundary . as usual",
    ", we can define the class  @xmath33 by formula   and the bellman function by formula  .",
    "the dual problem is also well defined by formulas   and  .",
    "we are going to perform a projective transform .",
    "let  @xmath17 be a subset of  @xmath44 given by the formula @xmath779 for any function  @xmath780 define the function  @xmath781 by the formula  @xmath782 .",
    "it is not hard to see that the function  @xmath783 is locally concave on  @xmath17 if and only if  @xmath92 is locally concave on  @xmath5 ( for details , see  @xcite , subsection  @xmath784 ) .",
    "consider now the section of the three - dimensional problem by the hyperplane  @xmath785 .",
    "let the coordinates there be  @xmath786 and  @xmath787 .",
    "then , the section of the domain  @xmath17 looks like this : @xmath788 on the level of points , our projective transform acts by the rule  @xmath789 .",
    "it is not hard to see that the domain  @xmath790 satisfies the assumptions   and  .",
    "the assumption   is equivalent to the  @xmath38-smoothness of the function  @xmath770 . for any  @xmath791",
    "we consider the function  @xmath792 given by the formula  @xmath793 .",
    "again ,  @xmath792 is the restriction of the homogeneous function  @xmath783 to the hyperplane  @xmath785 , therefore ,  @xmath792 is locally concave whenever  @xmath783 is locally concave .",
    "thus ,  @xmath791 whenever  @xmath794 , where  @xmath795 is given by the formula  @xmath796 .",
    "so , we see that @xmath797    the project transform acts on  @xmath33 in a more sophisticated way . for",
    "any function  @xmath284 denote its first coordinate by  @xmath51 ( thus ,  @xmath798 ) . for convenience , we assume that  @xmath293 $ ] .",
    "we note that the function  @xmath799}}}^{-1}\\int_0^t \\varphi_1(\\zeta)\\,d\\zeta$ ] is an increasing absolutely continuous function mapping  @xmath239 $ ] to  @xmath239 $ ] .",
    "let  @xmath800 be its inverse function .",
    "denote the projective transform of  @xmath51 by the formula @xmath801 we claim that the corresponding function  @xmath802 belongs to the class  @xmath803 ( and vice versa , if  @xmath804 , then  @xmath284 ) .",
    "indeed , it suffices to prove that for any interval  @xmath805 $ ] there exists an interval  @xmath806 $ ] such that  @xmath807 .",
    "but this is straightforward ( for clarity , let  @xmath808 $ ] ) : @xmath809 } } } } , \\frac{{\\langle { \\phi(\\varphi_1)}\\rangle_{{}_{[\\psi(a),\\psi(b)]}}}}{{\\langle { \\varphi_1}\\rangle_{{}_{[\\psi(a),\\psi(b)]}}}}\\big ) = ( { \\langle { \\varphi_1}\\rangle_{{}_{j}}},{\\langle { \\phi(\\varphi_1)}\\rangle_{{}_{j}}})_{\\operatorname{\\mathrm{pr}}},\\ ] ] where  @xmath810 $ ] . the same change of a variable justifies the equality  @xmath731 } } } = \\frac{{\\langle { f_{\\operatorname{\\mathrm{pr}}}(\\varphi_{\\operatorname{\\mathrm{pr}}})}\\rangle_{{}_{[0,1]}}}}{{\\langle { ( \\varphi_1)_{\\operatorname{\\mathrm{pr}}}}\\rangle_{{}_{[0,1]}}}}$ ] .",
    "this shows that  @xmath811 .",
    "we see that if the main theorem holds true , then its analogue for the domain `` with one cusp '' ( as described above ) is also valid",
    ". moreover , since the said projective transform does not change the ordering of the fixed boundary , the assertion `` the monotonic rearrangement of a function belonging to  @xmath33 is also in  @xmath33 '' also holds true for the domains `` with one cusp '' .",
    "lemma  [ hereditaryproperty ] can be easily deduced from a similar one - dimensional fact .",
    "[ hereditaryonlines ] let  @xmath812 \\to \\mathbb{r}$ ] be a concave function .",
    "suppose that  @xmath813 \\subset [ a , b]$ ] .",
    "let  @xmath814 \\to \\mathbb{r}$ ] be a concave function such that  @xmath815 if  @xmath816 ,  @xmath817 if  @xmath818 , and  @xmath819 on  @xmath813 $ ] .",
    "then the function  @xmath820 given by the formula @xmath821;\\\\ f(x ) , \\quad & x \\in [ a , b ] \\setminus [ c , d ] \\end{cases}\\ ] ] is concave .",
    "[ [ proof - of - lemmahereditaryproperty . ] ] proof of lemma  [ hereditaryproperty ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    we claim that the function @xmath822 is locally concave on  @xmath83 .",
    "if this assertion is proved , then the lemma follows by the minimality of  @xmath117 , because  @xmath823 on the fixed boundary of  @xmath83 . to prove that  @xmath92 is locally concave , it suffices to prove that its restriction to each segment  @xmath824 is concave .",
    "the set  @xmath825 is a closed convex subset of  @xmath159 , therefore , it is either a closed interval , or a point , or an empty set . in the latter two cases , there is nothing to prove , because in such a case  @xmath826 .",
    "the first case is fact  [ hereditaryonlines ] exactly .",
    "the assertion of the lemma is not true if  @xmath108 is not strictly convex , but only convex .",
    "the following fact is useful for the proof of statement  [ continuityonfixedfoundary ] .",
    "[ sectioncontinuity ] suppose that a strictly convex closed set  @xmath120 touches the hyperplane  @xmath827 at the point  @xmath238 .",
    "then , for every  @xmath466 there exists  @xmath828 such that  @xmath829 for all  @xmath830 ,  @xmath831 .",
    "[ [ proof - of - statementcontinuityonfixedfoundary . ] ] proof of statement  [ continuityonfixedfoundary ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    by virtue of lemma  [ hereditaryproperty ] , we may change  @xmath83 for  @xmath116 without changing  @xmath30 ; till the end of the proof the latter set is also denoted by  @xmath83 .",
    "consider a supporting hyperplane to  @xmath83 at  @xmath27 , let it be the plane  @xmath832 .",
    "suppose also that  @xmath833 for  @xmath834 .",
    "take any  @xmath398 .",
    "let  @xmath381 be so small that  @xmath835 for all  @xmath836 .",
    "now take  @xmath837 as in fact  [ sectioncontinuity ] .",
    "then , every point  @xmath198 in  @xmath838 can be represented as @xmath839 in such a case , @xmath840    thus , it suffices to find  @xmath841 such that  @xmath842 for all  @xmath843 provided  @xmath47 is given .",
    "this  @xmath841 can be found in such a fashion : build a linear function  @xmath169 such that  @xmath844 and  @xmath412 for all  @xmath834 . by the minimality of  @xmath30 , the inequality  @xmath412 may be verified only on  @xmath106 .",
    "the function  @xmath169 we are looking for is given by formula @xmath845 the statement is proved .",
    "finally , to prove statement  [ continuityonfreeboundary ] , we need a lemma .",
    "[ minimalityonsimplex ] let  @xmath846 be the simplex with the vertices  @xmath847 ,  @xmath848 , in  @xmath18 .",
    "suppose that  @xmath226 is an open convex set such that for  @xmath849 one has  @xmath850 \\cap \\operatorname{cl}k = v_j$ ] .",
    "let  @xmath92 be a locally concave function on  @xmath851 .",
    "if  @xmath852 for each  @xmath853 , then  @xmath854 on  @xmath851 .",
    "we prove the lemma by induction in  @xmath761 .",
    "there is nothing to prove for  @xmath855 .",
    "let us prove the assertion of the lemma assuming that it is valid for the dimension  @xmath856 .",
    "assume the contrary , let  @xmath857 be such that  @xmath858 .",
    "there exists a hyperplane  @xmath169 that passes through  @xmath27 and does not cross  @xmath226 .",
    "its intersection with  @xmath846 is a convex set .",
    "the boundary of this intersection belongs to the set  @xmath859 .",
    "therefore , there exists a point  @xmath198 in  @xmath859 such that  @xmath860 .",
    "but the set  @xmath859 is a union of  @xmath861-dimensional domains of the same type as we are working with .",
    "therefore , the inequality  @xmath860 contradicts the induction hypothesis .",
    "[ [ proof - of - statementcontinuityonfreeboundary . ] ] proof of statement  [ continuityonfreeboundary ] .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let  @xmath862 .",
    "choose a supporting plane  @xmath863 to  @xmath864 at the point  @xmath238 .",
    "we may assume that  @xmath863 is  @xmath865 and @xmath864 contains the point  @xmath866 for some  @xmath466 .",
    "we note that the restriction of  @xmath30 to  @xmath863 is continuous in a neighborhood of  @xmath238 by fact  [ continuityininnerpoints ] ; we take  @xmath630 so small that  @xmath867 is contained in this neighborhood . to prove the continuity of  @xmath30 at  @xmath238",
    ", we have to prove two estimates for this function in some neighborhood of  @xmath238 .",
    "we begin with an estimate from above .",
    "it is obtained by different methods for the points lying in  @xmath868 and  @xmath869 .",
    "we consider the former case first .",
    "fix  @xmath398 .",
    "choose  @xmath381 to be so small that  @xmath870 when  @xmath871 ,  @xmath872 .",
    "choose a positive number  @xmath873 to be so small that  @xmath874 when  @xmath875 ( here we use the continuity of  @xmath30 at the point  @xmath876 ) , we also require the convex hull of  @xmath877 and  @xmath878 to be in  @xmath83 .",
    "so , if  @xmath879 and  @xmath880 is negative , using local concavity , we get the estimate : @xmath881 thus ,  @xmath882 .",
    "now we have to prove the estimate from above for the points in  @xmath883 .",
    "fix  @xmath884 such that  @xmath885 .",
    "fix  @xmath886 .",
    "first , we take  @xmath381 to be so small that the point  @xmath887 `` sees '' all the points in  @xmath888 ( i.e. the segment joining them is inside  @xmath83 ) .",
    "second , for  @xmath889 such that  @xmath890 , we write an estimate @xmath891 by continuity on  @xmath863 ,  @xmath892 for  @xmath381 small enough , and  @xmath893 is sufficiently small .",
    "we are done .",
    ".,height=359 ]    to provide an estimate from below , we are going to cover the set  @xmath894 by a finite number of simplices  @xmath895 ,  @xmath896 .",
    "let  @xmath897 be a simplex in  @xmath898 containing  @xmath238 .",
    "consider the rays from  @xmath887 to all the vertices of  @xmath897 .",
    "let them intersect the free boundary at the points  @xmath899 ,  @xmath900 .",
    "the simplex  @xmath901 is a convex hull of  @xmath887 , all the  @xmath902 except for  @xmath899 , and  @xmath238 .",
    "these simplices have two properties ( see figure  [ fig : simplices ] also ) .",
    "first , their union covers  @xmath903 for every  @xmath837 small enough .",
    "second , each such simplex satisfies the hypothesis of lemma  [ minimalityonsimplex ] , if we take  @xmath226 to be  @xmath904 and  @xmath887 to be the  @xmath238-th vertex of the simplex .",
    "therefore , for each point  @xmath905 we have an estimate @xmath906 where  @xmath907 is a linear function interpolating  @xmath30 on the vertices of the  @xmath901 the point  @xmath198 belongs to .",
    "this is the estimate from below we are looking for .",
    "we begin with two definitions .",
    "[ cheesedomains ] let  @xmath910 be strictly convex compact subsets of  @xmath18 with non - empty interior .",
    "suppose that  @xmath911 ,  @xmath912 , and  @xmath910 are mutually uniformly separated for  @xmath912 ( in particular , there is only a finite number of them ) .",
    "then ,  @xmath913 is called a cheese domain .      for each point  @xmath27 on the free boundary of  @xmath83 choose an open segment  @xmath914 such that  @xmath915 and the endpoints of  @xmath914 lie on the boundary ( fixed or free ) of  @xmath83 .",
    "such segments have a nice property : the distance from  @xmath27 to each of the endpoints of  @xmath914 is uniformly bounded from below , because it is not less than  @xmath916 .",
    "let  @xmath147 , we are going to construct a finite time  @xmath83-martingale  @xmath127 starting at  @xmath149 .",
    "so , let  @xmath917",
    ". we can easily split  @xmath149 into a convex combination  @xmath918 such that  @xmath919 \\subset w$ ] and  @xmath920 and  @xmath921 lie on the boundary of  @xmath83 .",
    "we take  @xmath922 equal  @xmath920 with probability  @xmath923 and  @xmath921 with probability  @xmath924 .",
    "each of the points  @xmath920 and  @xmath921 can be splitted into two points  @xmath925 and  @xmath926 and  @xmath927 and  @xmath928 along the segments  @xmath929 and  @xmath930 correspondingly , if it lies on the free boundary . in the opposite case ,",
    "the martingle s trajectory has reached the fixed boundary , so it does not walk any more .",
    "then , the random variable  @xmath931 equals one of these four ( or less ) points with the corresponding probabilities . to pass to  @xmath932",
    ", we divide each of the points  @xmath933 that lie on the free boundary , and so on .",
    "we have to prove that the process described above stops almost surely .",
    "we consider the values  @xmath934 , where  @xmath935 . by lemma  [ bellmaninduction ] ,",
    "the function  @xmath131 is non - increasing .",
    "moreover , the function  @xmath92 is uniformly strictly concave , so , we can say more . if  @xmath208 and  @xmath207 are in  @xmath18 and  @xmath172 and  @xmath174 are separated from  @xmath238 and  @xmath500 , then @xmath936 for some small  @xmath937 . therefore , if  @xmath130 is in  @xmath938 with probability  @xmath939 , then @xmath940 because the lengths of the segments  @xmath914 are bounded from below .",
    "the value  @xmath934 is bounded from below ( because  @xmath92 is bounded from below on  @xmath0 ) , so  @xmath941 , which means that  @xmath130 stops eventually a.s .",
    "we note that cheese domains satisfy the assumptions of propositions  [ continuityonfixedfoundary ] and  [ continuityonfreeboundary ] that assert that  @xmath30 is continuous on  @xmath83 . as in the proof of lemma  [ maximalprinciple ]",
    ", we show that  @xmath943 for all  @xmath147 .",
    "let  @xmath944 be a finite time  @xmath83-martingale starting at  @xmath149 , the existence of such a martingale is provided by theorem  [ cheesedomainsaremartingaleconnected ] . by lemma  [ bellmaninduction ] ,  @xmath945 .",
    "the latter value tends to  @xmath946 by the lebesgue dominated convergence theorem ( we recall that  @xmath30 is a continuous function on a compact set ) , which is not smaller than  @xmath947",
    ".    the reader can easily construct sets  @xmath83 for which the minimal principle does not hold .",
    "for example , if  @xmath5 is as described in the beginning of section  [ s1 ] , but does not satisfy condition   ( and the set  @xmath2 is not bounded ) , then the minimal principle does not hold for it .",
    "moreover , there exist compact sets  @xmath83 for which the minimal principle does not hold .",
    "however , all the compact sets the authors managed to construct have fractal boundary .",
    "the proof is the same as for theorem  [ geometricmartingale ] , one only has to recall proposition  [ continuityonfixedfoundary ] for the continuity of the function  @xmath30 at the fixed boundary and replace lemma  [ maximalprinciple ] by lemma  [ maximalprincipleforcheesedomains ] in the proof of the analog of lemma  [ bellmaninductionlimit ] .",
    "paata  ivanisvili , nikolay  n.  osipov , dmitriy  m.  stolyarov , vasily  i.  vasyunin , pavel  b.  zatitskiy , _ sharp estimates of integral functionals on classes of functions with small mean oscillation _ , http://arxiv.org/abs/1412.4749 .",
    "a. a. korenovskii , _ on the connection between mean oscillation and exact integrability classes of functions _ , mat .",
    "* 181*:12 ( 1990 ) , 17211727 ( in russian ) ; translated in math . of the ussr - sbornik  * 71*:2 ( 1992 ) , 561567 .",
    "a. a. korenovskii , _ the exact continuation of a reverse hlder inequality and muckenhoupt s conditions _ , mat .",
    "* 52*:6 ( 1992 ) , 3244 ( in russian ) ; translated in math .",
    "notes  * 52*:6 ( 1992 ) , 11921201 .",
    "f.  l.  nazarov , s.  r.  treil , _ hunting the bellman function application to estimates of singular integrals and other classical problems of harmonic analysis _ ,",
    "* 8*:5 ( 1996 ) , 32162 ( in russian ) ; translated in st .- petersburg math .",
    "j.  * 8*:5 ( 1997 ) , 721824 .",
    "f.  nazarov , s.  treil , a.  volberg , _ bellman function in stochastic optimal control and harmonic analysis ( how our bellman function got its name ) _ , oper .",
    "adv . and appl .",
    "* 129 * ( 2001 ) , 393424 , birkhuser verlag .",
    "v.  i.  vasyunin , _ the sharp constant in the reverse hlder inequality for muckenhoupt weights _ ,",
    "i anal .  * 15*:1 ( 2003 ) ,",
    "73117 ( in russian ) ; translated in st .- petersburg math . j.  * 15*:1 ( 2004 ) , 4979 .",
    "v.  vasyunin and a.  volberg , _ the bellman function for a certain two - weight inequality : a case study _ , alg .",
    "i anal .  * 18*:2 ( 2006 ) ,",
    "2456 ( in russian ) ; translated in st .- petersburg math . j.  * 18*:2 ( 2007 ) , 201222 ."
  ],
  "abstract_text": [
    "<S> we prove a duality theorem the computation of certain bellman functions is usually based on . as a byproduct , </S>",
    "<S> we obtain sharp results about the norms of monotonic rearrangements . </S>",
    "<S> the main novelty of our approach is a special class of martingales and an extremal problem on this class , which is dual to the minimization problem for locally concave functions . </S>"
  ]
}