{
  "article_text": [
    "we wish to understand the structure of the projective coordinate rings of the moduli stack @xmath2 of quasi - parabolic principal @xmath3bundles on a marked projective curve @xmath4 where @xmath5 is a simple complex group and the parabolic structure is given by a borel subgroup @xmath6 our interest in these objects stems both from the classical value of problems in the moduli of bundles , and because the graded components of these algebras can be identified with spaces of conformal blocks .",
    "conformal blocks for the conformal field theory defined by a simple complex lie algebra @xmath7 and a non - negative integer @xmath8 for marked projective complex curves @xmath9 occupy an interesting position in algebraic geometry and mathematical physics .",
    "when the curve is allowed to vary , they form vector bundles over @xmath10 which have been the object of interesting recent work , @xcite , @xcite .",
    "when the genus of the curve is set to @xmath11 they are the structure spaces for a category of representations of the specialization of a quantum group at a root of unity .",
    "as we will mention below , their combinatorics have even made appearances in mathematical biology . because of the variety of applications , we seek to understand structural features of conformal blocks , and relate them to the commutative algebra of @xmath2 .",
    "the moduli stack @xmath2 can be expressed as the quotient stack of a product of the affine grassmannian variety @xmath12 with the projective variety @xmath13^n,$ ] by an action of an ind - group @xmath14 determined by the points @xmath15    @xmath16\\\\\\ ] ]    the picard group of @xmath17 calculated in @xcite , is a product of @xmath18 copies of the character group of @xmath19 times a copy of @xmath20    @xmath21    the cone of line bundles with non - zero global sections is a subcone of @xmath22 where @xmath23 is the weyl chamber of @xmath24 the space of global sections @xmath25 for a vector of dominant weights @xmath26 of @xmath27 and a non - negative integer @xmath8 agrees with the space @xmath28 of conformal blocks of the rational conformal field theory defined by @xmath29 and @xmath30 with weights @xmath26 at the marked points @xmath31 and level @xmath32 let @xmath33 be the projective coordinate ring of @xmath2 defined by @xmath34    @xmath35    the hilbert function of this algebra outputs the sequence of dimensions of the spaces of conformal blocks associated to @xmath36 which can be calculated by the verlinde formula from conformal field theory , see @xcite .",
    "these algebras have been studied before , predominantly in the case when @xmath31 is empty . in this case , elements of @xmath37 are known as non - abelian theta functions , and the map to projective space on the coarse moduli space defined by @xmath37 is known as the theta - map .",
    "we direct the reader to the article @xcite for a survey of what is known about this ring . for @xmath38 , the ring of non - abelian theta functions",
    "has also recently been shown to be projectively normal by abe , @xcite .",
    "the present paper is in part motivated by an attempt to extend understanding to the parabolic case , when @xmath31 is non - empty .",
    "the algebra @xmath33 is defined as above only for @xmath39 smooth , however the space @xmath28 makes sense for any stable curve @xmath40 in @xcite , we showed that the direct sum @xmath41 can be given an algebra structure for any stable curve , and over smooth curves this agrees with the algebra structure on @xmath42 from now on we refer to these fibers @xmath43 for a non - smooth curve @xmath44 with the same notation .",
    "additionally , these algebras fit together into a flat sheaf of algebras over @xmath45 this implies that one can deduce properties of @xmath33 for generic @xmath39 by studying the algebra for a particular @xmath40 our strategy is to deduce properties about @xmath33 by passing to the fiber over non - smooth curves in @xmath46 where the combinatorics of the factorization rules ( see @xcite , @xcite ) of conformal blocks can help .",
    "the stack @xmath10 is stratified by closed substacks indexed by graphs @xmath47 the lowest components of this stratification are certain closed points indexed by trivalent graphs @xmath48 with first betti number @xmath49 and @xmath18 leaves .",
    "the curve @xmath44 corresponding to a trivalent graph @xmath48 is the stable arrangement of marked copies of @xmath50 with dual graph @xmath47    we now restrict our attention to @xmath51 for this group , dominant weights are non - negative integers @xmath52 in this case , the factorization rules imply that the space of conformal blocks @xmath53 over the point corresponding to a graph @xmath48 has a distinguished basis given by weightings of the edges of @xmath48 by non - negative integers which satisfy a short collection of conditions .",
    "[ polydef ] for @xmath48 a trivalent graph with @xmath18 leaves labeled @xmath54 @xmath55 an @xmath56vector of non - negative integers , and @xmath57 we define @xmath58 to be the set of non - negative real weightings of the edges of @xmath48 which satisfy the following conditions .    1 .   for any trinode @xmath59 with the three incident edge weights @xmath60 must satisfy the triangle inequalities : @xmath61 + 2 .",
    "for any trinode as above , @xmath62 + 3 .",
    "the weight on the edge attached to the @xmath63th leaf equals @xmath64 +    we consider this polytope with respect to the lattice of integer points in @xmath65 defined by the condition that the sum @xmath66 for any trinode @xmath67 in addition to indexing a basis of the spaces @xmath68 the polytope @xmath69 captures more information about the algebras @xmath70 in the sense that the edge - wise addition operation on weightings of @xmath48 is almost the same as the multiplication operation in these algebras .",
    "the following is proved in @xcite for @xmath71 genus @xmath11 and for general genus by proposition @xmath72 of @xcite .",
    "let @xmath48 be a trivalent graph with @xmath18 labeled leaves and first betti number equal to @xmath73 for any curve @xmath74 the algebra @xmath75 can be flatly degenerated to the graded semigroup algebra associated to @xmath76    both steps , establishing the flat sheaf of algebras over @xmath46 and defining and analyzing the ordering , appear in @xcite , ( see also @xcite ) . for any curve",
    "@xmath77 the algebra @xmath75 is in a flat family with the algebra over the curve @xmath44 of type @xmath48 by proposition @xmath72 of @xcite . by analyzing @xmath78 with respect to the distinguished basis given by the factorization rules",
    ", it can be found that multiplication in this algebra is `` lower triangular '' with respect to a natural ordering on the weightings @xmath79 of @xmath47 that is , if @xmath80 $ ] and @xmath81 $ ] are the elements of @xmath78 corresponding to weightings @xmath82 then @xmath80\\times [ w_2 ] = [ w_1 + w_2 ] + $ ] @xmath83 @xmath84 taking the associated graded algebra of @xmath78 with respect to this term order then yields the graded toric algebra @xmath85.$ ] a standard reese algebra construction then yields a flat family over @xmath86 with general fiber @xmath78 and special fiber @xmath85.$ ]    the conditions satisfied by the weights @xmath87 around each internal vertex are called the quantum clebsch - gordon conditions .",
    "weightings of graphs which satisfy these conditions are known by various names in mathematical physics , such as feynman diagrams or spin diagrams , see @xcite .",
    "analysis of these polytopes and other convex sets of spin diagrams also appears in computational biology , specifically in the work of buczynska and wiesniewski on phylogenetic algebraic varieties , @xcite , @xcite .",
    "the polytope @xmath69 is a cross - section of the cone @xmath88 corresponding to buczynska s graphical phylogenetic toric variety introduced in @xcite to study the jukes - cantor statistical model on graphs .    a good deal of information is preserved by flat degeneration , such as the degree , the hilbert function of @xmath70 and commutative algebra features like the gorenstein property . in theory ,",
    "all of these details can be computed from the polytopes @xmath76 a non - trivial consequence of this observation is that the equivalent polyhedral information for @xmath89 the volume and the number of lattice points , etc , is independent of the graph @xmath47 it should be noted that the degeneration technique we are using here applies to other groups @xmath5 as well , except the resulting degenerations are not toric .",
    "perhaps this issue can be resolved with a better understanding of the underlying combinatorial representation theory .",
    "depending on the property of @xmath75 one wishes to study , certain toric degenerations can be more suited to the task than others .",
    "next we describe the conditions we place on @xmath48 with respect to @xmath55 in order to ensure the polytope @xmath69 is suited to our needs .",
    "we will use three special graph topologies , depicted in figure [ fig4 ] .",
    "a trivalent tree @xmath90 is said to be @xmath91 if every vertex is connected by an edge to some leaf .",
    "notice that a caterpillar tree has two pairs of leaves which share a common vertex .",
    "we call these paired leaves , and we say they are at the head or tail of the caterpillar .",
    "a trivalent graph @xmath48 is said to be a caterpillar graph if it is obtainable from a caterpillar tree by adding a loop on one of the leaves at the head or tail , or by adding a doubled edge at the midpoint of one of the edges .",
    "a trivalent graph @xmath48 of genus @xmath92 with @xmath18 leaves is @xmath93 if it is obtained from a trivalent tree with @xmath94 leaves by adding loops on @xmath92 leaves .",
    "in our analysis of @xmath69 for @xmath48 tree - like , we require that @xmath55 and @xmath48 satisfy a condition , which we call compatibility .",
    "for the polytope @xmath69 we say a vector @xmath55 is `` compatible '' with a graph @xmath48 if any odd @xmath95 is assigned to a leaf - edge which shares a vertex with with the leaf - edge of another odd @xmath96    recall that for any lattice point in @xmath69 , the weights at any trinode of @xmath48 sum to an even number .",
    "it is a simple combinatorial exercise to show that this implies that the number of odd - weighted leaf - edges of @xmath48 is always even . as a consequence , we obtain that there are only conformal blocks with weights @xmath55 if an even number of the @xmath95 are odd , this implies the following .    whenever @xmath97 has dimension @xmath98 there is a tree - like graph @xmath48 which is compatible with @xmath99    the compatibility property was critical in the proof of the following theorem , from @xcite .",
    "[ g1 ] let @xmath90 be a trivalent tree , and @xmath100 , and let @xmath55 be compatible with @xmath101 then @xmath102 $ ] is generated in degree @xmath103 and the binomial ideal of relations @xmath104 is generated by polynomials of degree @xmath105    our first result is a generalization of theorem [ g1 ] to tree - like graphs .",
    "[ polypres ] let @xmath48 be tree - like , and @xmath106 and @xmath55 compatible with @xmath107 then @xmath108 $ ] is generated in degree @xmath103 and the binomial ideal of relations @xmath109 is generated by polynomials of degree @xmath105    in @xcite there are examples which show that certain degree @xmath110 polynomials are necessary to generate @xmath111 however , when we choose @xmath48 to have the caterpillar graph topology , the relations can become more tractable .",
    "[ polyquad ] let @xmath48 be a caterpillar graph , then @xmath112 $ ] is generated in degree @xmath103 and the presenting ideal @xmath113 has a quadratic , square - free grbner basis .",
    "a consequence is that any non - empty @xmath69 becomes `` nice '' ( normal , with quadratically generated binomial ideal ) when we take its minkowski square , @xmath114 using the flat degeneration , these theorems can be lifted back to the algebras @xmath115    for any @xmath55 , @xmath100 , and @xmath71 a generic curve , @xmath116 is generated in degree @xmath117 with ideal of relations generated in degree @xmath118 for any @xmath119 , @xmath120 is koszul . in particular , it has quadratic relations .",
    "we give a sketch of the argument .",
    "let @xmath48 and @xmath55 be compatible .",
    "we assume that both properties have been proved for the appropriate toric algebra @xmath85.$ ] this implies the corresponding statements for the fiber @xmath78 by standard properties of associated graded algebras .",
    "the moduli @xmath10 is a connected , noetherian deligne - mumford stack over @xmath121 therefore for any closed point @xmath122 there is a dense open substack @xmath123 with an tale noetherian affine cover @xmath124 the fiber of our sheaf of algebras is then equal to the fiber of the pullback sheaf over @xmath125 for some closed point of @xmath126    over a noetherian affine base , we obtain the statement on generators and relations from an application of nakayama s lemma to the graded components of the algebra and its presenting ideal . the statement on the koszul property results from the fact that betti numbers of the corresponding generalized koszul complex ( see @xcite , ex @xmath127 ) do not increase under specialization because their graded components are locally free modules .",
    "we may reduce to this case because the generic point of @xmath10 is tale - covered by the generic point of @xmath128 and the fiber over this point is obtained by base - change .",
    "naturally , this theorem applies in the case when @xmath55 is empty . in this case",
    "it implies that the above generation and relation properties hold for the projective coordinate ring of the square of the line bundle @xmath129 on @xmath130 for generic @xmath131 the generation result is weaker than the result of abe , @xcite , however the result on relations is new .",
    "abe s strategy is similar to ours , he employs a filtration built from the factorization rules , however he stops short of a toric degeneration .",
    "it is at present unknown to us if abe s results can be replicated with an inspired choice of graph @xmath47    when @xmath48 is a tree and @xmath8 is very large , the algebra @xmath85 $ ] is also realized as a toric degeneration of a projective coordinate ring of the moduli of @xmath55-weighted points on the projective line , @xmath132^n.$ ] theorem [ polyquad ] then shows that this projective coordinate ring has a quadratic , square - free grbner basis when @xmath55 is even , a result also obtained by herring and howard , @xcite .",
    "theorems [ g1 ] , [ polypres ] , and [ polyquad ] are proved by understanding the structure of @xmath69 as a fiber product of rational polytopes . in @xcite , the polytopes @xmath133 for a trivalent tree",
    "@xmath90 were shown to be `` balanced , '' a geometric feature which endows a polytope with several nice algebraic properties .",
    "the technical observation that makes these theorems work is the fact that the balanced property is stable with respect to certain kinds of fiber products .",
    "let @xmath134 , @xmath135 and @xmath136 be lattice polytopes , and let @xmath137 and @xmath138 be lattice maps which take @xmath139 into @xmath140 the fiber product @xmath141 is defined to be the subset of points @xmath142 such that @xmath143    we will prove theorem [ polypres ] by following a similar strategy to the program used in @xcite .",
    "the conditions which define @xmath69 are all localized around individual trinodes of @xmath107 which implies we may represent @xmath69 as a fiber product of polytopes defined on the components of an `` exploded graph '' @xmath144 this is a graph obtained from @xmath48 by splitting any edge in @xmath48 which separates the graph into two disjoint components .",
    "see also figure [ assemble ] .",
    "the connected components of @xmath145 each have a special polytope associated to them , we call these the `` building blocks '' of @xmath76 the strategy is to first analyze the building block polytopes , establishing that they have the algebraic features we want , then show these features are stable under fiber product . when @xmath48 is tree - like , the polytopes given by weightings of the components of @xmath145 are single loops with an edge , or a trinode with @xmath146 , @xmath117 , or @xmath147 edges with edge weight fixed to a specific value ( say @xmath148 or @xmath149 ) .",
    "when @xmath48 is caterpillar , no trinodes with @xmath146 fixed edges appear , but a loop with @xmath147 edges can appear , see figure [ blocks ] below . there is a depiction of each polytope beneath its corresponding graph .",
    "see figures [ fig5 ] , [ fig6 ] , [ fig6.5 ] , and [ fig7 ] for more detailed illustrations of these polytopes .",
    "we call the polytope corresponding to a loop with an edge @xmath150 weightings of a trinode with one or two fixed edges ( with value equal to @xmath151 ) @xmath152 or @xmath153 respectively , general weightings of a trinode @xmath154 and a loop with two edges @xmath155 the polytope @xmath156 is @xmath157 dimensional , so the image depicted in the figure is a projection into @xmath158    here is where compatibility and the assumption that we work with even level @xmath159 are used .",
    "it is another simple combinatorial exercise to verify that when @xmath160 are compatible , all non - leaf and non - loop edges of @xmath48 are weighted with an even number .",
    "this greatly simplifies the structure of the building block polytopes .",
    "the main technical part of this paper is to develope and clarify the polytope properties that make this construction work .",
    "as fiber products are categorical operations , we view the natural habitat for the above theorems as closure properties of a category of polytopes under certain fiber products .",
    "we define this category next .      for the following definitions",
    "see @xcite . for a lattice polytope @xmath162",
    "let @xmath163 be an assignment of real numbers to the lattice points of @xmath164 the function @xmath165 defines a term order on the polynomial ring @xmath166.$ ] for a monomial @xmath167 we define @xmath168 for two monomials , we say @xmath169 when @xmath170 or @xmath171 and @xmath172    the polytope @xmath173 defines a graded algebra @xmath174,$ ] where the @xmath175th graded component has a basis given by the lattice points @xmath176 of the @xmath177-th minkowski sum @xmath178 and the product operation is lattice point addition . let @xmath179 $ ] be the toric ideal which is the kernel of the map @xmath166 \\to \\c[p].$ ] for a polynomal @xmath180 the initial form @xmath181 with respect to @xmath165 is defined to be the sum of the monomials in @xmath182 which are largest under the term order defined by @xmath183    a monomial @xmath184 is said to be standard with respect to a term order @xmath165 if it is @xmath185 an initial form of any polynomial in @xmath186    for a lattice point @xmath187 we let @xmath188 be the set of monomials in @xmath166 $ ] which map to @xmath189 the difference of any two elements in @xmath188 is a member of @xmath186 the function @xmath165 defines a partial ordering on @xmath190 and the minimal elements of this partial ordering are the standard monomials .",
    "we define the category @xmath161 to have pairs @xmath191 as objects , where @xmath173 is a lattice polytope in some @xmath192 and @xmath165 is a term order on @xmath173 .",
    "a morphism @xmath193 is a linear map on @xmath194 induced by a map on lattices , such that the standard monomials of @xmath165 map to standard monomials of @xmath47    the following is the most general result we will prove about the category @xmath195 we say @xmath196 has unique standard monomials if the sets @xmath188 always have a unique minimal element when they are non - empty .    [ fiber ] if @xmath197 and @xmath198 are maps in @xmath199 and if @xmath196 has unique standard monomials , then the fiber product object @xmath200 exists in @xmath195    the category of lattice polytopes comes with a fiber product , so the content of this proposition is in showing that there is a term order on @xmath201 with maps to @xmath202 , @xmath203 satisfying the universal property of a fiber product .",
    "next , we formalize properties of balanced polytopes first observed in @xcite by showing that the category @xmath161 has a distinguished subcategory that is closed under fiber product .",
    "a term order @xmath165 on a lattice polytope @xmath173 is said to be `` flag '' when a monomial @xmath184 from @xmath173 is standard if and only if every degree @xmath147 divisor of @xmath184 is standard , and @xmath204 is standard for any @xmath205 .",
    "[ flagfiber ] if @xmath197 and @xmath198 are maps in @xmath199 and if @xmath196 has unique standard monomials , then @xmath202 and @xmath203 flag implies @xmath200 flag .",
    "balanced polytopes are examples of polytopes with flag term orders . geometrically , the term order divides the polytope into sub - polytopes , and the standard monomials are simply monomials with components all corresponding to lattice points from the same sub - polytope , called a `` standard region . '' in the case of balanced polytopes , these regions are all lattice sub - polytopes of the unit cube .",
    "theorem [ polypres ] above is a consequence of the following propositions . recall that a rational lattice polytop @xmath173 is said to be @xmath206",
    "when the graded algebra @xmath174 $ ] is generated in degree @xmath103 by the elements corresponding to the lattice points of @xmath164    [ flaggen ] let @xmath200 be a fiber product of flag elements over @xmath196 with unique standard monomials .",
    "if each @xmath207 is normal , then @xmath200 is normal .    for @xmath191",
    "we call a binomial @xmath208 a standard relation if both monomials are composed of lattice points from the same standard region .",
    "[ flagrel ] let @xmath200 be a fiber product of flag objects over @xmath196 with unique standard monomials .",
    "if the standard relations of @xmath207 are generated by standard relations of degree @xmath209 then @xmath210 is generated in degree @xmath211    properties of fiber products over a toric algebra have been studied before by sullivant in @xcite .",
    "these theorems can be viewed as refinements of theorem 2.8 in @xcite . in our results ,",
    "the assumption that the base of the fiber product have strict unique factorization has been removed by restricting our study to fiber products of binomial ideals .",
    "the second technical result , used to prove theorem [ polyquad ] , is a version of sullivant s theorem 2.9 in @xcite .",
    "here we also remove a restriction that the base of the fiber product have unique factorization by only considering binomial ideals .",
    "we define another operation in @xmath195    define @xmath212 in @xmath161 on the fiber product polytope @xmath213 with term order given by the following rule on monomials . for lattice points",
    "@xmath214 we say @xmath215 if    1 .",
    "@xmath216 or 2 .",
    "the @xmath217 values are equal , and @xmath218    for monomials @xmath219 we first order by degree , then with the sum weighting @xmath220 we then break ties by writing both sets of exponents in decreasing order with the above ordering and we declare @xmath221 if @xmath222 at the first place they differ .",
    "[ quadgrob ] if the presenting ideals of @xmath223 @xmath224 and @xmath196 all have quadratic , square - free grbner bases with respect to their term orders , then so does the presenting ideal of    @xmath225    using this , we establish theorem [ polyquad ] from the fact that the presenting ideals of intervals @xmath226 $ ] and the building block polytopes have quadratic , square - free grbner bases . note that although we do not assume that the base of our fiber products has unique factorization , we do assume this `` locally '' by requiring the polytope to have a quadratic square - free grbner basis .",
    "we would like to thank weronika buczynska , anton dochtermann , alex engstrm , ben howard , raman sanyal , and seth sullivant for useful conversations related to this project , and david eisenbud for his helpful explanations of the behavior of graded algebras in flat families .",
    "we also thank the reviewer , who pointed us to the work of abe @xcite , the result of which was inspiration for stronger results than we originally appeared in this paper .",
    "in this section we review some basic properties of term orders on toric ideals .",
    "we discuss geometric decompositions of the polytope induced by a term order , and the corresponding algebra we cover some properties of the category @xmath199 flag term orders , and balanced polytopes .",
    "first , we recall the initial complex @xmath227 of a term order , see chapter @xmath228 of @xcite .",
    "let @xmath173 be a lattice polytope , and @xmath165 a term order on @xmath164 define the simplicial complex @xmath227 on the vertex set @xmath229 as follows .",
    "a set @xmath230 defines a face of @xmath227 if every monomial with support @xmath231 is standard .",
    "if @xmath232 and @xmath233 has a monomial @xmath184 supported on its entries which is not standard then one can make a non - standard monomial supported on @xmath231 by multiplying by the remaining generators in @xmath234 this establishes that @xmath227 is a simplicial complex .",
    "morphisms in the category @xmath161 preserve the information in these simplicial complexes .",
    "let @xmath235 be a morphism in @xmath161 then @xmath236 induces a simplicial map @xmath237    let @xmath231 define a face in @xmath238 any monomial @xmath184 with support @xmath231 is standard , implying its image @xmath239 is standard with respect to @xmath48 in @xmath140 since this holds for any monomial , all monomials with support @xmath240 must be standard , which means @xmath241    for flag term orders",
    "@xmath242 we will be concerned with the convex hulls @xmath243 of the faces of @xmath238 let @xmath165 be a flag term order , and let @xmath244 be some rational point . then @xmath245 is a lattice point of @xmath246 for some @xmath247 let @xmath184 be a standard monomial which maps to @xmath189 then @xmath248 is in the convex hull of the lattice points defined by the @xmath249 and by the flag property , this collection defines a face @xmath250 similarly , if @xmath251 is any rational point , then we have    @xmath252    for rational @xmath253 this implies for some @xmath254 that the monomial defined by @xmath255 is standard .",
    "if @xmath251 is a lattice point , this implies @xmath256 is also in @xmath227 as @xmath245 is defines a standard monomial , implying @xmath257 defines a standard monomial as well .",
    "the following proposition shows that the interiors of maximal faces of @xmath227 do not intersect .",
    "let @xmath191 be flag , and let @xmath258 and suppose the intersection @xmath259 is non - empty .",
    "then @xmath260 is also in @xmath238    let @xmath261 be a rational point , this implies that @xmath248 can be written as convex sums in both sets @xmath231 and @xmath262    @xmath263    in particular the numbers @xmath264 and @xmath265 can be taken non - zero for all @xmath266 choose @xmath267 so that @xmath268 and @xmath269 are integers for all @xmath270 then we have found monomial expressions for @xmath271 with support in @xmath231 and @xmath272 respectively .",
    "this implies that these monomials are both standard , and further implies that the following expressions correspond to standard monomials .",
    "@xmath273    so the set @xmath260 is also in @xmath238    taken together , these observations imply the following .",
    "[ subd ] let @xmath191 be flag .",
    "the polytope @xmath173 is geometrically subdivided into convex regions @xmath274 the convex hulls of the maximal facets of @xmath238 the lattice points in a region @xmath275 are precisely the members of the corresponding maximal facet",
    ".    for any rational point @xmath276 a maximal face , we can find some set @xmath277 such that @xmath248 is in the convex hull of @xmath278 if this set is not equal to @xmath279 this can only be because two monomials in some @xmath280 with @xmath281 get the same minimial @xmath165 weight , so @xmath165 can not be a total term order .",
    "conversely , when @xmath165 defines a total term order on monomials , all maximal faces @xmath232 are simplices .    we will now show that that when @xmath191 is flag , much of the algebra of @xmath174 $ ] is captured by the algebras @xmath282,$ ] @xmath283 the following lemma allows us to reduce generation and relation degrees for @xmath174 $ ] to those of the @xmath282.$ ]    [ d2 ] for any monomial @xmath284 where @xmath191 is flag , @xmath285 is related to a standard monomial by degree @xmath147 relations .",
    "let @xmath286 and recall @xmath190 the set of monomials which map to @xmath189 if @xmath287 is standard , there is nothing to do , so suppose this is not the case , then by definition of flag term orders , it has a non - standard degree @xmath147 divisor , say @xmath288 we replace @xmath289 with @xmath290 standard , then    @xmath291    we repeat this procedure on @xmath292 this algorithm must terminate by the finiteness of @xmath293    for @xmath191 flag with maximal facets @xmath294 of @xmath295 any relation @xmath296 can be taken to a relation in some @xmath275 by degree @xmath147 relations .",
    "we must have @xmath297 for some @xmath298 therefore any standard factorization of @xmath248 must be made from the lattice points of an @xmath275 which contains @xmath299 the previous proposition shows that both sides of this relation can be converted to such a standard relation by degree @xmath147 moves .",
    "the content of this last corollary is that generating sets of relations for the @xmath300 along with the degree @xmath147 relations of the form @xmath301 with one side standard , suffice to generate the binomial ideal @xmath186      we now define a special term order function @xmath302 we will recall the definition of balanced polytopes from @xcite , and show that they always have @xmath303 as a flag term order .",
    "define @xmath304 to be the function which takes a vector @xmath305 to the sum of the squares of its entries @xmath306    to motivate the use of this function , consider a number @xmath307 and the set @xmath308 of @xmath309 tuples @xmath310 such that @xmath311 we can partially order these tuples by weighting them with @xmath302 for @xmath312 , the set @xmath313 , [ 012 ] , [ 111]\\},$ ] and these are ordered by @xmath303 as follows ,    @xmath314 <",
    "[ 012 ] < [ 003].\\\\\\ ] ]    we call the operation with takes a pair of numbers @xmath315 to @xmath316 `` balancing . ''",
    "for any pair of numbers @xmath317 we have that @xmath318 while @xmath319 for any pair @xmath320 from the a tuple as above , balancing yields a tuple which still sums to @xmath321 with a lower @xmath303 value .",
    "furthermore , the number @xmath322 is minimized over the set of @xmath18 non - negative integers numbers with sum @xmath248 exactly when any @xmath323 and @xmath324 differ by at most @xmath325 this implies that the minimal tuple with respect to @xmath303 is of the form @xmath326 where @xmath327 with @xmath328 the number of entries of the form @xmath329 we can play this same game with a tuple of vectors @xmath330 which sum to a fixed vector @xmath331 we call the operation that takes two vectors @xmath332 to the vectors with entries the balancing of the pairs of entries of @xmath332 a @xmath333 of @xmath177-vectors . once again , this operation lowers the @xmath303 value of @xmath334 unless these vectors were already balanced with respect to each other .    [ balnum ] for any tuple of vectors @xmath335 there is a tuple @xmath336 with the following properties .",
    "1 .   @xmath337 + 2 .",
    "each tuple of numbers @xmath338 is balanced .",
    "3 .   @xmath339 , + with equality only when each tuple of numbers @xmath340 is balanced .",
    "the @xmath341 all lie in a common translate of the unit cube in @xmath342    we construct a @xmath343 by doing pairwise balancings , beginning with the set @xmath344 since each operation lowers the @xmath303 value , this process terminates .",
    "number @xmath117 above follows because this algorithm does not change the total sum of the vectors , numbers @xmath147 and @xmath110 are consequences of the algorithm and imply number @xmath345    we say a lattice polytope @xmath346 is balanced if each tuple of lattice points @xmath347 has a balancing in @xmath348 the lattice points of @xmath164    a polytope @xmath162 is balanced if and only if @xmath349 is flag , and the convex hulls of the maximal elements in @xmath350 are subpolytopes of translates of the unit @xmath56cube .    if @xmath173 is balanced , then the balanced monomials of @xmath173 are clearly the standard monomials with respect to @xmath351 so we verify that the flag properties are satisfied",
    ". first note that for any @xmath352 @xmath204 is a balanced monomial .",
    "furthermore , a monomial @xmath353 is balanced if and only if the entries in any two generators dividing @xmath353 differ by @xmath117 or @xmath11 which is the case if and only if any degree @xmath147 divisor of @xmath353 is balanced .",
    "this is exactly the flag condition .",
    "if @xmath349 is flag , and the fundamental regions @xmath275 are all subsets of translates of the unit cube then the algorithm in lemma [ d2 ] above gives a balancing of any monomial .",
    "let @xmath173 be a balanced polytope , then @xmath173 is normal if and only if each maximal cubical region @xmath354 is normal .",
    "furthermore , the ideal @xmath355 is generated in degree bounded by the degrees required to generate the ideals @xmath356",
    "the previous section establishes that balanced polytopes make up a special subclass of polytopes with a flag term order , which make up a special class of polytopes with term orders . in this section",
    "we show that each of these classes is closed under special types of fiber products .",
    "the guiding principle here is that fiber products will exist and be well - behaved when the base has unique factorization properties .",
    "first we present a useful motivating proposition .",
    "let @xmath357 and @xmath358 be normal polytopes with maps @xmath359 , @xmath360 to @xmath361 a normal polytope with unique factorization , then @xmath201 is normal .",
    "let @xmath362,$ ] with @xmath363 by the normality of @xmath357 and @xmath364 we have @xmath365 and @xmath366 for monomials in the lattice points of @xmath357 and @xmath358 respectively .",
    "we must also have @xmath367 so the the components of these monomials must be the same up to reordering , this means for every component @xmath323 we can find a @xmath368 a component of @xmath369 such that @xmath370 this allows us to express @xmath371 as a product of lattice points of @xmath372    for two elements @xmath373 the product polytope @xmath374 has a natural term order given by @xmath375 this order also makes sense on a fiber product @xmath376 we now prove that the fiber product of @xmath373 over an element @xmath196 with unique standard monomials is a fiber product object in @xmath195    we show that a monomial @xmath377 \\ldots [ a_k , b_k]}$ ] is standard with respect to @xmath378 if and only if @xmath379 and @xmath380 are standard with respect to @xmath217 and @xmath381 respectively .",
    "this establishes that the projection maps to @xmath357 and @xmath358 are morphisms in @xmath199 and that any polytope @xmath382 with a map to @xmath196 which factors by @xmath359 and @xmath360 must have a map to the fiber product .",
    "if both @xmath379 and @xmath380 are standard with respect to @xmath217 and @xmath383 then @xmath377 , \\ldots , [ a_k , b_k]}$ ] must be minimal with respect to @xmath220 as any alternative factorization induces alternative factorizations of @xmath384 and @xmath385 so we must show that @xmath386 \\ldots [ a_k b_k]}$ ] standard implies that @xmath387 and @xmath388 are standard .",
    "suppose @xmath377 , \\ldots , [ a_k , b_k]}$ ] is a monomial in @xmath213 with @xmath389 not standard , we will show that this implies that @xmath377 , \\ldots , [ a_k , b_k]}$ ] is not standard .",
    "let @xmath390 be a standard monomial for @xmath391 and @xmath392 the same for @xmath385 then @xmath393 and it can be arranged that @xmath394 by the unique standard monomial property of @xmath140 this allows us to form the fiber product monomial @xmath395 \\ldots [ a_k b_k]},$ ] which must be a member of @xmath396 + \\ldots + [ a_k b_k]}.$ ] however , @xmath397 \\ldots [ a_k b_k ] = \\sigma_1(a_1 \\ldots a_k ) + \\sigma_2(b_1 \\ldots b_k ) < \\sigma_1(a_1 \\ldots a_k ) + \\sigma_2(b_1 \\ldots b_k ) = \\sigma_1 \\oplus \\sigma_2([a_1 b_1 ] \\ldots [ a_k b_k]).$ ]    as a corollary we obtain a proof of proposition [ flagfiber ] .",
    "let @xmath377 \\ldots [ a_k , b_k]}$ ] be a monomial for @xmath213 such that each pair @xmath398[a_j , b_j]}$ ] is standard .",
    "by the previous proposition this implies that both @xmath399 and @xmath400 define standard monomials , which implies their image is standard as a @xmath361 monomial , and therefore @xmath377 \\ldots [ a_k , b_k]}$ ] is standard .",
    "we also get an expression for the simplicial complex @xmath401    [ flagprod ] let @xmath202 and @xmath203 be flag , then a maximal facet @xmath402 is of the form @xmath403 for @xmath404 and @xmath405    since any standard support is a subset @xmath406 it suffices to show that @xmath403 is a facet of @xmath401 let @xmath407 \\ldots [ a_k , b_k]$ ] be the list of all points in @xmath408 any monomial @xmath184 with support in this set maps to monomials @xmath409 with support in @xmath410 and @xmath411 respectively , this means that @xmath412 and @xmath413 define standard monomials , so @xmath184 must be standard as well .",
    "when @xmath223 @xmath224 and @xmath196 are flag , a facet @xmath402 corresponds to a convex region in @xmath372 by proposition [ flagprod ] above , @xmath231 is the fiber product polytope of its images in @xmath357 and @xmath358 over a maximal facet of @xmath414 a sub - polytope of @xmath361 with unique factorization . when we restrict our attention to balanced polytopes , a fiber product @xmath415 where the maps are coordinate projections , gives a flag pair @xmath416 by our discussion , the standard regions of this term order are all fiber products of cubical subpolytopes of @xmath357 and @xmath358 over cubical subpolytopes of @xmath417 so they are all cubical .",
    "however , the term order @xmath418 is double @xmath303 over the coordinates from @xmath140    @xmath419    so this is not quite the @xmath303 term order .",
    "an equivalence in the category @xmath161 occurs when a polytope @xmath173 has two term orders with the same standard monomials , we will show that this occurs when we take the fiber product of balanced polytopes .",
    "let @xmath201 be a fiber product of balanced polytopes with @xmath420 and @xmath421 induced by coordinate projections .",
    "then the product term order @xmath418 has the same standard monomials as the term order given by @xmath303 on the fiber product .",
    "a monomial @xmath353 is standard with respect to @xmath418 if and only if it is of the form @xmath422 where @xmath423 and @xmath424 are standard for @xmath425 and @xmath426 and are therefore balanced .",
    "this is the case if and only if the tuple @xmath427 is balanced .    in particular ,",
    "a fiber product of balanced polytopes over maps which are coordinate projections is a balanced polytope .",
    "we are interested in fiber products primarily because we can control their generators and relations .",
    "we establish this by proving propositions [ flaggen ] and [ flagrel ] .",
    "these will be used to lift the commutative algebra properties from the building blocks discussed in the last section to @xmath76    the polytope @xmath428 is flag by proposition [ flagfiber ] , so it is tiled by the convex hulls of the maximal facets of @xmath429 by proposition [ flagprod ] these are all fiber products of normal polytopes over polytopes with unique factorization , and are therefore normal .",
    "if @xmath430 is in the ideal for the fiber product then it can be converted to a relation in some maximal facet of @xmath431 by degree @xmath147 relations , so we may assume without loss of generality that @xmath432 and @xmath433 are relations among standard monomials in @xmath357 and @xmath358 respectively .",
    "any relation among standard monomials @xmath434 can be lifted in some way to a relation @xmath435 in @xmath213 because @xmath361 has unique factorization . this way , @xmath436 can be converted to @xmath437 by relations among standard monomials of @xmath357 and @xmath438",
    "the class of polytopes with flag term orders has a distinguished subclass given by those total term orders with a quadratic square - free grbner basis .",
    "the `` quadratic '' part of this distinction is equivalent to the condition that any monomial with standard degree @xmath147 divisors must itself be standard , and `` square - free '' implies that the powers of any lattice point must be standard",
    ". the standard regions @xmath275 of these polytopes are unit simplices .",
    "we now know that fiber products in this subcategory yield normal polytopes with a flag term order , however there is not enough information in the fiber product order @xmath378 to yield a total term order , and a grbner basis .",
    "the issue is that for standard monomials defined by @xmath439 in @xmath357 , @xmath361 and @xmath358 respectively , there could be many ways to form a fiber product monomial ,    @xmath440    if two elements @xmath441 and @xmath442 map to the same @xmath443 then we could plausibly permute these entries to obtain distinct , new standard monomials with respect to @xmath444 the standard monomials in the fiber product are exactly those obtained by fixing @xmath445 in some order and permuting the @xmath446 while respecting the shared @xmath447 so we must establish an order on these sets .",
    "each standard region in @xmath448 is a fiber product of simplices with well - ordered lattice points over a simplex with well - ordered lattice points , so to prove proposition [ quadgrob ] , we can reduce to the following proposition .",
    "let @xmath357 , @xmath173 and @xmath358 be unit simplices each with a fixed well - ordering @xmath449 on their lattice points .",
    "then @xmath450 has a quadratic square - free grbner basis defined by the orderings @xmath451 and @xmath381    this follows from a modification of corollary 2.11 in @xcite . to define the new term - order",
    ", we use the @xmath452 term order .",
    "we have @xmath215 if @xmath453 or @xmath454 and @xmath455 and    @xmath456 > [ ( v_1 ^ 2 , w_1 ^ 2)\\cdots ( v_k^2 , w_k^2)]\\\\\\ ] ]    if @xmath457 for all @xmath458 for some @xmath459 and @xmath460 or @xmath461 with @xmath462 where we ve listed the terms of the monomials in decreasing order .",
    "assume now that both monomials map to the same lattice point , then the sets @xmath463 and @xmath464 are the same , as are @xmath465 and @xmath466 so we may assume without loss of generality that @xmath467 in this case , if @xmath468 then @xmath469 for some @xmath470 so for the first monomial we can form the relation    @xmath471    performing this exchange must yield a lower monomial .",
    "this implies that an arbitrary monomial can be taken to the associated standard monomial with degree @xmath147 weight - lowering relations .",
    "now consider a monomial of the form @xmath472 and let @xmath473 be another standard monomial with the same @xmath378 weight .",
    "this implies that @xmath474 and @xmath475 since both @xmath217 and @xmath381 define total term orders .",
    "we remark that the argument above can be adapted to show that if @xmath202 and @xmath203 are flag , then the so is @xmath201 with respect to the @xmath452 term order .",
    "in this section we construct and study the building block polytopes , showing that these are all balanced polytopes . recall that we always take fiber product over the interval @xmath226.$ ] this polytope",
    "is balanced , and the maximal facets of @xmath476)$ ] are the unit length intervals , @xmath477.$ ]    the polytope @xmath478 is dimension @xmath110 and @xmath156 is dimension @xmath157 , but the other building blocks have dimension @xmath479 in the case of a balanced dimension @xmath147 polytope @xmath480 every intersection of a translate of the unit square with @xmath173 must be a lattice polytope , so @xmath173 is a convex union of squares and triangles .",
    "in particular , all the facets of @xmath173 are parallel to the lines @xmath481 or @xmath482 and conversely any lattice polytope in @xmath483 with this property is balanced .",
    "we define a term order on @xmath166 $ ] and leave it to the reader to verify that it is quadratic and square - free .",
    "first order the elements by degree , then by @xmath351 then by the lexicographic ordering on the square , where @xmath485 > [ 1 , 0 ] > [ 0 , 1 ] > [ 0,0].$ ]      [ d2bp ] let @xmath173 be a fiber product of a finite number of dimension @xmath147 balanced polytopes over balanced polytopes of dimension @xmath147 or @xmath325 then @xmath355 has a quadratic square - free grbner basis .",
    "from now on we use the assumption that the parameters @xmath55 are adapted to the graph in question . in this case",
    ", the condition that every trinode @xmath59 must have an even sum implies that every non - loop and non - leaf edge must have an even weight . for a tree - like graph @xmath107 the disconnected graph @xmath145 has four kinds of components , a single loop with a pendant edge , and trinodes with @xmath486 or @xmath146 pendant leaf edges . for a caterpillar graph",
    "@xmath145 the components are all loops with pendant edges , or trinodes with @xmath117 or @xmath147 fixed edges . for a tree - like graph , the building blocks we must consider are exactly those pictured in figures [ fig5 ] , [ fig6 ] , [ fig6.5 ] , and [ fig7 ] . for a caterpillar graph we also must use the polytope pictured in figure [ block2 ] .",
    "the balanced polytope @xmath478 corresponding to the weightings of an internal trinode has dimension @xmath118 it is the convex hull of @xmath487 and @xmath488 for @xmath489 the standard regions of this polytope with respect to @xmath303 appear in @xcite , figure @xmath110 . for @xmath490",
    "this polytope is a non - normal subpolytope of the unit square , this is the reason for the @xmath100 condition in theorem [ polypres ] .",
    "it was shown in @xcite that each of the standard regions of @xmath478 are normal , with quadratic generating relations , except for the region at the origin , the convex hull of @xmath491 , [ 1 , 1 , 0 ] , [ 1 , 0 , 1 ] , [ 0 , 1 , 1],$ ] and @xmath492.$ ] this polytope has one cubic relation ,        next we analyze the polytope @xmath155 a lattice point of this polytope is given by @xmath157 non - negative integers @xmath494 which satisfy the triangle inequalities and the parity condition .",
    "the conditions defining weightings force the quantities @xmath495 and @xmath496 are forced to be even integers .",
    "we begin by subjecting this polytope to a change of coordinates .        under this transformation , @xmath156 becomes the polytope on four numbers @xmath499 subject to the conditions,@xmath500 ; @xmath501 ; @xmath502 .",
    "the projection of @xmath156 onto the @xmath503 plane produces a quadrilateral , shown in figure [ block2 ] with the fibers of the projection depicted above each lattice point .",
    "the polytope @xmath156 has @xmath504 symmetry , which divides it into four isomorphic quadrants .",
    "we represent these quadrants with interlacing diagrams on @xmath157 numbers below .",
    "arrows in the diagrams point from smaller entries to larger entries , in particular the polytope corresponding to an interlacing diagram with a single arrow @xmath505 with entries bounded by @xmath8 is the simplex with vertices @xmath506 , [ 0l ] , [ ll]$ ] in @xmath158          we establish that every element in a minkowski sum @xmath510 has a balancing . consider the interlacing diagram in the top left of the above diagram .",
    "for @xmath511 we form two new elements , one in @xmath512 and the other in @xmath513 by multiplying @xmath514 by @xmath515 ( resp . @xmath516 and taking ceiling ( resp .",
    "since @xmath517 and @xmath518 were arbitrary , we can repeat this process until we obtain @xmath519 elements in @xmath520 note that this proves @xmath521 and therefore @xmath156 are normal polytopes .    given two elements @xmath522 obtained from @xmath514 by this process",
    ", we can then form the balancing @xmath523 of @xmath524 in @xmath525 in the same way . by proposition [ balnum ] , the resulting new factorization @xmath526 of @xmath514 has @xmath303 weight less than or equal to the @xmath303 weight of the original factorization , with equality occuring exactly when the entries of @xmath527 are balanced with respect to each other .",
    "this implies that if a factorization of @xmath514 is not balanced , we may lower its @xmath303 weight with some pairwise balancing , and after a finite number of these moves , we obtain a balanced factorization of @xmath528    the above proof can be adapted to any polytope defined by interlacing patterns . for example , this style of proof can be used to establish that the gelfand - tsetlin polytope @xmath529 defined by a dominant @xmath530 weight @xmath531 is balanced .",
    "since @xmath156 is composed of @xmath157 isomorphic copies of @xmath509 , it follows that it is a balanced polytope as well .",
    "we now introduce a term order on the lattice points of @xmath155 for two lattice points , we first order by degree , then we order by the @xmath303 term - order .",
    "we complete this to a total term order as follows , @xmath532 < [ x ' , z ' , a ' , b']$ ] iff @xmath533 or @xmath534 and @xmath535 or @xmath536 and @xmath537 or @xmath538 and @xmath539 this induces a monomial order on polynomial ring @xmath540,$ ] which surjects onto the semigroup algebra @xmath541.$ ]      we sketch the proof .",
    "first , by design , any standard region of the above term order will be a sub - set of a standard region of the @xmath303 ordering . note that we have shown that the standard regions of this term order are the intersections of @xmath156 with some integer translate @xmath543 of the unit cube .",
    "these are all isomorphic to polytopes with entries between @xmath146 and @xmath103 subject to the inequalities defined by some sub - interlacing diagram of the defining diagram of @xmath544 a selection of these are depicted below .",
    "first we treat the polytope @xmath546 the semigroup defined by this polytope is generated by six lattice points , @xmath547 , [ 1000 ] , [ 0100 ] , [ 0000 ] ,",
    "[ 0010 ] , [ 1101],$ ] subject to one relation , @xmath548[0000 ] = [ 1000][0100].$ ] it follows that @xmath549 has a quadratic square - free grbner basis with respect to the above term order .",
    "we now consider the polytopes corresponding to proper subdiagrams .",
    "any such diagram has no loops , so it follows that the corresponding balanced piece of @xmath550 can be represented , as in proposition [ quadgrob ] , as a fiber product of simplices with term orders over unit intervals .",
    "furthermore , this fiber product can always be ordered in such a way that the resulting term order agrees with the one defined above . as a consequence of proposition [ quadgrob ] , each balanced piece of each @xmath550 has a quadratic , square - free grbner basis with respect to the term order , and it follows that @xmath551 has such a grbner basis as well .",
    "each of the above polytopes , @xmath478 @xmath150 @xmath552 @xmath553 and @xmath152 come with distinguished maps to the interval @xmath226 $ ] given by projecting onto the weight on a non - loop edge and dividing by @xmath554 the polytope @xmath478 has three such projections , @xmath555 and @xmath156 have two , and @xmath556 and @xmath553 each have one .",
    "each of these maps is given by forgetting coordinates off the edge , so they correspond to a coordinate projection .",
    "if a monomial is balanced then it is easy to verify that any map which forgets coordinates gives another balanced monomial .",
    "this implies that each of the edge projections above are morphisms in @xmath161 to @xmath557 , \\sigma^2).$ ] this allows us to prove propositions [ polypres ] and [ polyquad ] .",
    "a. beauville , _ conformal blocks , fusion rules , and the verlinde formula _",
    "proceedings of the hirzebruch 65 conference on algebraic geometry , 7596 , israel math .",
    "proc . , 9 , bar - ilan univ . , ramat gan ( 1996 )"
  ],
  "abstract_text": [
    "<S> we continue the program started in @xcite to understand the combinatorial commutative algebra of the projective coordinate rings of the moduli stack @xmath0 of quasi - parabolic @xmath1 principal bundles on a generic marked projective curve . </S>",
    "<S> we find general bounds on the degrees of polynomials needed to present these algebras by studying their toric degenerations . </S>",
    "<S> in particular , we show that the square of any effective line bundle on this moduli stack yields a koszul projective coordinate ring . </S>",
    "<S> this leads us to formalize the properties of the polytopes used in proving our results by constructing a category of polytopes with term - orders . </S>",
    "<S> we show that many of results on the projective coordinate rings of @xmath0 follow from closure properties of this category with respect to fiber products . </S>"
  ]
}