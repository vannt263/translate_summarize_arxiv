{
  "article_text": [
    "in  @xcite , baker and norine introduced the terminology of divisors and linear equivalence on finite graphs in analogy with the theory of algebraic curves . in this paper , we develop a higher - dimensional generalization of this theory on what we call tropical complexes .",
    "a tropical complex consists of an underlying combinatorial topological space , specifically a @xmath0-complex , together with some additional data representing the affine linear structure . in the case of a @xmath1-dimensional tropical complex",
    ", there is no choice for this additional data , and so a @xmath1-dimensional tropical complex is just a finite graph .    on a tropical complex ,",
    "we define both weil and cartier divisors as certain balanced sums of codimension  @xmath1 polyhedral sets in the tropical complex .",
    "piecewise linear functions on the tropical complex generate linear equivalences between either class of divisors and from this , we can define both the divisor class group and picard group of a tropical complex .",
    "complementary to divisors , we also define curves on tropical complexes as balanced @xmath1-dimensional piecewise linear subsets of the tropical complex . similar to  @xcite , we define an intersection product between cartier divisors and curves in terms of restricting the local defining function of a divisor , and this pairing is compatible with linear equivalence of divisors .",
    "the main theorem in this paper relates this intersection product on a tropical complex , defined in terms of restrictions of piecewise linear functions , to the intersection product on an algebraic variety . from a regular strictly semistable degeneration over a discrete valuation ring ,",
    "we construct a tropical complex as the dual complex of the special fiber , together with certain intersection numbers .",
    "moreover , we define specialization maps  @xmath2 from divisors and curves on the general fiber of the degeneration to formal sums on the tropical complex .",
    "one of the themes from this paper and its follow - ups is that in order to relate the tropical complex to the algebraic variety , and even for the specialization map to produce divisors and curves on the tropical complex , we need to make matching assumptions about the degeneration .",
    "the term _ numerically faithful _ in the following theorem is one such assumption and it means that all numerical classes of curves and divisors in each irreducible component of the special are represented by linear combinations of strata ( see definition  [ def : numerically - faithful ] for details ) .",
    "[ thm : intersect - intro ] suppose that @xmath3 is a numerically faithful , regular , strictly semistable degeneration and @xmath0 its tropical complex .",
    "if @xmath4 is a divisor on the generic fiber of  @xmath3 and @xmath5 is a curve , then we have an equality of intersection numbers : @xmath6 .",
    "in addition to proving theorem  [ thm : intersect - intro ] , a major purpose of this paper is to lay the foundations for the applications of tropical complexes in two follow - up papers , @xcite and  @xcite .",
    "the former looks at the combinatorial properties of @xmath7-dimensional tropical complexes , proving analogues of the hodge index theorem and noether s formula . the latter generalizes baker s specialization inequality for degenerations of curves  @xcite to degenerations of higher dimensional varieties , using the definition of linear equivalence of divisors on tropical complexes given in this paper .",
    "these results motivated the foundational developments from this paper .    the adjective tropical in the title of this paper refers to tropical geometry , for which we now explain the connection .",
    "tropicalization works with subvarieties of the algebraic torus over a field with valuation , to which it associates polyhedral subsets of @xmath8 .",
    "the specialization operations  @xmath2 are analogous , but with the algebraic torus replaced by a more general variety .",
    "in addition , tropical varieties will prove useful as a tool for constructing semistable degenerations , using tropical compactifications  @xcite .",
    "for schn algebraic varieties , together with a unimodular subdivision , a regular semistable degeneration can be constructed , whose dual complex is a finite - to - one parametrization of a bounded subset of the tropical variety , as in the parametrizing tropical variety of  @xcite .",
    "the additional structure of a tropical complex is determined by the map from the dual complex to the real vector space  @xmath8 . for tropical varieties constructed in this way ,",
    "linear equivalence and intersections on the tropical complex are equivalent to the analogous operations on the tropical variety , as introduced in  @xcite .",
    "duval , klivans , and martin have introduced a distinct generalization of linear equivalence from graphs to higher - dimensional complexes  @xcite .",
    "they define a critical group for an arbitrary simplicial complex , without the additional data which is essential in our constructions .",
    "moreover , they define a group in each dimension , which consists of formal simplices modulo chip - firing operations , which are indexed by simplices of the same dimension . in contrast , for divisors supported on the codimension  @xmath1 skeleton of a tropical complex , the chip - firing moves correspond to functions which are linear on each simplex , and thus are generated by the vertices .",
    "it is only for @xmath1-dimensional tropical complexes that the divisors supported on the codimension  @xmath1 cells and the chip - firing moves are indexed by the same set .",
    "tropical complexes are not the only way of packaging information about a degeneration of algebraic varieties . as in the case of curves  @xcite ,",
    "a semistable degeneration gives rise to a semisimplicial object in the category of smooth schemes and it would be interesting to develop a theory and applications of divisors and intersections in such a setting . in a different direction , we work only over discrete valuations , for which our schemes are noetherian and there is a theory of regular models .",
    "accordingly , tropical complexes are intrinsically discrete objects . over a non - discrete , rank  @xmath1 valuation ring ,",
    "continuous lengths would be needed along the edges of the complex , and continuous variations would also be necessary for any non - trivial sort of moduli space of tropical complexes , comparable to  @xcite .",
    "the remainder of the paper is organized as follows . in section  [ sec : complexes ] , we define tropical complexes and their construction from semistable degenerations . in section  [ sec : trop - varieties ] , we study tropical complexes coming from subdivisions of tropical varieties .",
    "section  [ sec : divisors ] introduces divisors on tropical complexes and section  [ sec : curves ] introduces curves , as well as the intersection pairing between the two .",
    "section  [ sec : non - strict ] generalizes some of the results to degenerations where the special fiber is allowed to have self - intersections .      throughout this project",
    ", i ve benefited from my conversations with matt baker , spencer backman , alex fink , christian haase , paul hacking , june huh , eric katz , madhusudan manjunath , farbod shokrieh , bernd sturmfels , yu - jong tzeng , and josephine yu .",
    "i d especially like to thank sam payne for his many insightful suggestions and thoughtful comments on an earlier draft of this paper .",
    "i was supported by the national science foundation award number dms-1103856 .",
    "i would also like to acknowledge the hospitality of the university of georgia , where the revisions to this paper were done .",
    "before giving the intrinsic definition of a tropical complex , we first consider the case of a tropical complex coming from a strict degeneration .",
    "we will say that a _ strict degeneration _ is a regular scheme  @xmath3 which is flat and proper over a discrete valuation ring  @xmath9 , and such that the special fiber @xmath10 is a reduced simple normal crossing divisor . in section",
    "[ sec : non - strict ] , we will give some generalizations where @xmath10 is only assumed to be a reduced normal crossing divisor , in which case we call @xmath3 simply a _",
    "degeneration_. throughout this paper , we assume that the residue field of the discrete valuation ring  @xmath9 is algebraically closed",
    ".    we will write @xmath11 for the generic fiber of a degeneration  @xmath3 , and @xmath12 will denote the dimension of this general fiber .",
    "if @xmath9 contains a field of characteristic  @xmath13 , then starting from any smooth proper variety  @xmath11 over the fraction field of  @xmath9 , it is possible to find a degeneration  @xmath3 , possibly after a ramified extension , by the semistable reduction theorem of knudsen , mumford , and waterman  @xcite .",
    "the dual complex of the strict degeneration  @xmath3 is a @xmath0-complex which encodes the combinatorics of the intersections between components of the special fiber  @xmath10 . for details on @xmath0-complexes ,",
    "we refer to  ( * ? ? ?",
    "2.1 ) or to  ( * ? ? ?",
    "* def .  2.44 ) , where the equivalent notion of `` gluing data for a triangulated space '' is defined",
    ". however , in brief , the data of a  @xmath0-complex consists of a collection of @xmath14-dimensional simplices , for each @xmath15 , and for each index @xmath16 a face map from the @xmath14-dimensional simplices to the @xmath17-dimensional simplices , satisfying a compatibility condition .",
    "we will always indicate the set of @xmath14-dimensional simplices with a subscript , such as @xmath18 .",
    "the face map indicates how to glue the faces of a topological simplices , from which a @xmath0-complex specifies a topological space , its geometric realization . in this paper",
    ", we will not distinguish between the combinatorial data of a @xmath0-complex and its geometric realization .",
    "the dual complex  @xmath0 of a degeneration  @xmath3 has vertices which are in bijection with the irreducible components of  @xmath10 . for a vertex  @xmath19",
    ", we write @xmath20 for the corresponding component . for each subset",
    "@xmath21 of the vertices , the simple normal crossing hypothesis implies that @xmath22 is a disjoint union of smooth varieties of dimension @xmath23 .",
    "we then one simplex @xmath24 of dimension @xmath25 in  @xmath0 for each of these component varieties , and we denote the variety corresponding to @xmath24 by @xmath26 , and sometimes call it a _ stratum _ of  @xmath3 . if we remove the @xmath27th element of @xmath21 , then @xmath28 is a disjoint union of @xmath29-dimensional smooth varieties and we set the @xmath27-face of  @xmath24 to be the unique @xmath17-simplex such that @xmath30 .    for a tropical complex",
    ", we wish to additionally remember the intersection number of each @xmath20 , considered as a divisor in  @xmath3 with the curve @xmath31 , for each @xmath32-dimensional simplex  @xmath33 .",
    "if @xmath34 is not contained in  @xmath33 , then this intersection is transverse and the result is equal to the number of @xmath12-dimensional simplices containing both @xmath34 and  @xmath33 .",
    "otherwise , we record the intersection number as an integer associated to each vertex  @xmath34 in an @xmath32-dimensional simplex  @xmath33 : @xmath35 when the fibers of  @xmath3 are @xmath1-dimensional , then the vertex  @xmath34 must be equal to  @xmath33 , and one can show that @xmath36 is the degree of  @xmath34 in the graph  @xmath0 .",
    "when @xmath3 has relative dimension at least  @xmath7 , then we will repeatedly make use of an equivalent computation of the intersection number defining @xmath37 .",
    "in particular , if we let @xmath38 denote the unique face of  @xmath33 which does nt contain  @xmath34 , then @xmath39 is a smooth surface which intersects @xmath20 transversally along @xmath31 .",
    "thus , the pullback of @xmath20 to @xmath39 is the curve  @xmath31 , and so the intersection of @xmath20 with @xmath31 is the same as the self - intersection of the curve @xmath31 as a divisor in the surface  @xmath39 .",
    "now we consider an @xmath40-dimensional simplex  @xmath38 in the dual complex of a degeneration  @xmath3 and we look at the corresponding surface  @xmath39 . for any two distinct curves",
    "@xmath41 and  @xmath42 contained in @xmath39 , their intersection is a finite number of reduced points , which are in bijection with the simplices containing both @xmath33 and  @xmath43 .",
    "since the self - intersection of  @xmath31 is @xmath44 , we can , from the dual complex and the integers @xmath37 reconstruct the intersection matrix  @xmath45 of these curves in  @xmath39 , as is made explicit by  ( [ eq : local - intersection - matrix ] ) in definition  [ def : tropical - complex ] .",
    "the hodge index theorem implies that this matrix  @xmath45 has at most one positive eigenvalue , but because of the further conditions we ll be imposing on our degeneration , we ll be interested in cases where @xmath45 has exactly one positive eigenvalue , and this assumption will be part of the definition of a tropical complex .",
    "first , we establish some terminology that we ll use concerning @xmath0-complexes .",
    "the dual complex of a simple normal crossing divisors will always be a regular @xmath0-complex  ( * ? ? ? * def .",
    "2.47 ) , meaning that distinct faces of a single simplex are never identified with each other . for the intrinsic definition of a @xmath0-complex",
    ", we will allow non - regular @xmath0-complexes , which will be used for non - strict degenerations in section  [ sec : non - strict ] . when the faces of a @xmath14-dimensional simplex  @xmath24 in a @xmath0-complex are identified with each other",
    ", we will need to distinguish @xmath24 from its _ parametrizing simplex _ @xmath46 , which is always a @xmath14-dimensional simplex mapping to @xmath24 by possibly identifying some of the faces of @xmath46 with each other .",
    "thus , in particular , there will always be exactly @xmath47 vertices in @xmath46 , which may be mapped to fewer vertices in the @xmath0-complex itself .",
    "the local topology of a @xmath0-complex  @xmath0 around a simplex  @xmath24 is described by its _",
    "link _ , denoted @xmath48 .",
    "for a regular @xmath0-complex , if @xmath24 is @xmath14-dimensional , the @xmath49-dimensional simplices of @xmath48 are in bijection with the @xmath50-dimensional simplices of  @xmath0 containing  @xmath24 , but for non - regular @xmath0-complexes , we need to take into account that @xmath24 may be a face of the same simplex in multiple ways  @xcite .",
    "thus , for example , if @xmath0 is a graph with a single vertex  @xmath34 and a single loop at that vertex , then @xmath51 consists of two points .    now suppose that @xmath24 is a @xmath14-dimensional simplex of  @xmath0 and @xmath52 is a vertex in @xmath48 .",
    "since @xmath52 corresponds to an identification of @xmath24 with a face of a @xmath53-dimensional simplex @xmath54 , there exists a unique vertex of @xmath54 not contained in the identified face , which we denote @xmath55 .",
    "the image of  @xmath55 in @xmath56 will also be denoted @xmath55 , and distinction between these two uses will be clear in context .",
    "[ def : tropical - complex ] fix an integer @xmath12 and suppose we have the following data :    * a finite , connected @xmath0-complex  @xmath0 , whose simplices have dimension at most  @xmath12",
    ". simplices of dimension  @xmath12 and @xmath57 in this complex will be called _ facets _ and _ ridges _ respectively . * structure constants @xmath58 , which are integers associated to every pair of a ridge  @xmath33 and a vertex  @xmath34 of its parametrizing simplex  @xmath59 .",
    "this data is an @xmath12-dimensional _ weak tropical complex _ , also denoted  @xmath0 , if , for every ridge  @xmath33 , we have : @xmath60 where the summation is over vertices  @xmath34 of the parametrization of  @xmath33 . here",
    ", @xmath61 refers to the cardinality of the link of  @xmath0 at  @xmath33 , which is a finite set .",
    "if @xmath38 is an @xmath40-dimensional simplex of a weak tropical complex , then we define the _ local intersection matrix _ at  @xmath38 to be the symmetric matrix  @xmath45 whose rows and columns are labeled by the vertices of @xmath62 , and such that the entry corresponding to a pair @xmath63 is : @xmath64 in the second case of ( [ eq : local - intersection - matrix ] ) , @xmath65 refers to the ridge of  @xmath0 corresponding to  @xmath66 .",
    "a weak tropical complex  @xmath0 is a _ tropical complex _ if the local intersection matrix  @xmath45 has exactly one positive eigenvalue for every @xmath40-dimensional simplex  @xmath38 of  @xmath0 .",
    "when defining the adjacency matrix of a graph , it is a natural convention for many purposes to put twice the number of loops along the diagonal . with this convention",
    ", the local intersection matrix  ( [ eq : local - intersection - matrix ] ) is the adjacency matrix of @xmath62 plus a diagonal matrix containing the structure constants .",
    "note that if @xmath0 is a regular  @xmath0-complex , such as those coming from a strict degenerations as described above , then @xmath62 is also regular , meaning it contains no loops , in which case ( [ eq : local - intersection - matrix ] ) describes the intersection numbers of curves in  @xmath39 .",
    "[ prop : complex - degeneration ] if @xmath3 is a strict degeneration of relative dimension @xmath12 , then the dual complex @xmath0 with coefficients @xmath58 from the intersection numbers as in the beginning of the section form a weak tropical complex of dimension  @xmath12 .",
    "assume that @xmath3 is a strict degeneration .",
    "we fix a ridge  @xmath33 of  @xmath0 , for which we want to show the equality  ( [ eq : constraint ] ) from definition  [ def : tropical - complex ] .",
    "since @xmath10 is reduced , the divisor associated to a uniformizer  @xmath67 of  @xmath9 is the sum of the @xmath20 as @xmath34 ranges over all the vertices of  @xmath0 . if @xmath34 is a vertex of  @xmath33 , then the intersection of  @xmath20 with @xmath31 has degree @xmath44 , by definition , and if @xmath34 is not contained in  @xmath33 , then the intersection of @xmath20 with @xmath31 is a disjoint union of reduced points whose total cardinality is the number of simplices containing both @xmath34 and  @xmath33 .",
    "thus , the intersection of the divisor of  @xmath67 with @xmath31 is @xmath68 which must be zero because the special fiber  @xmath10 is a principal divisor . for a regular @xmath0-complex , such as one coming from a strict degeneration",
    ", @xmath69 is equal to the number of facets containing  @xmath33 , so we ve verified ( [ eq : constraint ] ) to show that @xmath0 is a weak tropical complex .",
    "a @xmath1-dimensional @xmath0-complex is a graph , in which case a ridge is just a vertex .",
    "thus , ( [ eq : constraint ] ) completely constrains the coefficients to be @xmath70 for every vertex  @xmath34 , so a @xmath1-dimensional weak tropical complex is equivalent to a graph .",
    "moreover , a @xmath1-dimensional weak tropical complex has no local intersection matrices , so it is vacuously a tropical complex as well .",
    "however , in dimension  @xmath7 and higher , tropical complexes are no longer determined by the underlying @xmath0-complex .     at the vertex  @xmath34",
    "is negative definite . ]",
    "[ ex : triangle ] let @xmath0 be the weak tropical complex consisting of the triangle with coefficients @xmath58 as shown in figure  [ fig : triangle ] .",
    "the corresponding local intersection matrices are : @xmath71 of these , @xmath72 and  @xmath73 each have one positive and one negative eigenvalue , but @xmath74 is negative semidefinite , and therefore @xmath0 is not a tropical complex .",
    "if we were to swap the two coefficients for the edge between @xmath75 and  @xmath34 , we would get a tropical complex .",
    "we will define divisors associated to piecewise linear functions in section  [ sec : divisors ] , but for now we illustrate the role that the coefficients  @xmath37 play by giving the definition for functions which are linear on each simplex .",
    "[ def : linear - on - simplices ] let @xmath76 be a continuous function on a weak tropical complex  @xmath0 which is linear on each simplex and takes an integral value at each vertex .",
    "we define the _ divisor associated to  @xmath76 _ to be the formal sum of the ridges of  @xmath0 with the coefficient of a given ridge  @xmath33 equal to @xmath77 in the second summation , we abuse notation by writing @xmath78 for the value of @xmath76 at the vertex parametrized by  @xmath34 .    the divisor associated to a constant function by definition  [ def : linear - on - simplices ] is trivial , as a consequence of ( [ eq : constraint ] ) in the definition of a weak tropical complex .     on a tropical complex consisting of a tetrahedron with @xmath79 for every vertex  @xmath34 in every edge  @xmath33 .",
    "the divisor associated to  @xmath76 is @xmath80 - 2[e']$ ] . ]",
    "[ ex : pl - on - tetrahedron ] consider the boundary of the tetrahedron with all coefficients @xmath37 equal to @xmath1 , and the pl function shown in figure  [ fig : tetrahedron_pl ]",
    ". using definition  [ def : linear - on - simplices ] , we can compute that the divisor associated to  @xmath76 as @xmath80 - 2[e']$ ] . for the edges other than @xmath81 and  @xmath82 , the contributions of the two halves of the equation in definition  [ def : linear - on - simplices ] cancel .",
    "we now return to the case of a tropical complex coming from a strict degeneration .",
    "as we discussed , the hodge index theorem guarantees that for the weak tropical complex of a degeneration , each local intersection matrix has at most one positive eigenvalue , but in order to obtain exactly one such eigenvalue , we make some assumptions about our degeneration .",
    "recall that a cartier divisor on normal variety is _ big _ if , for some multiple of the divisor , the rational map to projective space defined by taking the complete linear series is birational onto its image  ( * ? ? ?",
    "[ def : refined ] let @xmath3 be a degeneration of relative dimension  @xmath12 with @xmath0 its dual complex . if @xmath24 is a simplex of  @xmath0 of dimension  @xmath83 , recall that @xmath26 refers to the corresponding @xmath14-dimensional smooth variety .",
    "we write @xmath84 for the divisor @xmath85 on  @xmath26 , where @xmath86 ranges over the @xmath29-dimensional simplices containing  @xmath24 .",
    "the difference @xmath87 is called the _ locally closed stratum _ at  @xmath24 .",
    "we say that @xmath3 is _ robust at @xmath24 _ for  @xmath24 a simplex if @xmath84 is a big divisor on  @xmath26 .",
    "if @xmath14 is any integer in the range @xmath88 , we will say that @xmath3 is _ robust in dimension  @xmath14 _ if for each simplex  @xmath24 of dimension @xmath83 , @xmath3 is robust at  @xmath24 .    in  @xcite , an important hypothesis will be the locally closed strata of a given dimension are affine .",
    "we note that this is a strictly stronger condition than robustness in the same dimension . if @xmath89 is affine , then a set of generators for its coordinate ring can be identified with sections of some multiple of  @xmath90 . since these sections generate the coordinate ring of  @xmath89 ,",
    "the morphism defined by the multiple of  @xmath90 is an isomorphism on this set , and so @xmath90 is big .    in dimension",
    "@xmath1 , robustness is equivalent to the locally closed strata being affine because an effective divisor on a curve is big if and only it is non - trivial , in which case its complement is affine .",
    "thus , in particular , robustness in dimension  @xmath1 is determined by the dual complex  @xmath0 , namely by whether or not every ridge is contained in a facet . in dimension  @xmath7 and higher , robustness is no longer equivalent to the locally closed strata being affine , and neither condition is determined by the dual complex .",
    "however , robustness in dimension  @xmath7 is determined by the weak tropical complex .",
    "[ prop : hodge - robustness ] let @xmath3 be a strict degeneration and let @xmath0 be its weak tropical complex . then , @xmath0 is a tropical complex if and only if @xmath3 is robust in dimension  @xmath7 .",
    "we first suppose that @xmath3 is robust in dimension  @xmath7 and fix an @xmath40-dimensional simplex @xmath38 of  @xmath0 . as in the discussion before definition  [ def : tropical - complex ]",
    ", @xmath45 is the intersection matrix on  @xmath39 of the components of  @xmath91 , and this has at most one positive eigenvalue by the hodge index theorem .",
    "therefore , it will suffice to find a linear combination of the components which has positive self - intersection . by assumption",
    ", @xmath92 is a big divisor .",
    "we take a sufficiently large multiple of  @xmath91 such that it defines a rational map to @xmath93 with two - dimensional image .",
    "if we remove any divisors in the base locus of this map , we will get a divisor  @xmath4 such that @xmath94 . since the base locus is contained in  @xmath91",
    ", then @xmath4 is a linear combination of the components of  @xmath91 .",
    "thus , we ve verified that @xmath0 is a tropical complex .",
    "conversely , suppose that @xmath0 is a tropical complex .",
    "then , by definition , for each @xmath40-dimensional simplex  @xmath38 , the local intersection matrix  @xmath45 has at least one positive eigenvalue . by rationally approximating the corresponding eigenvector and then scaling",
    ", we can then find an integer vector  @xmath34 such that @xmath95 is positive .",
    "using the entries of this vector as the coefficients for a linear combination of the components of  @xmath91 , we get a divisor  @xmath4 on @xmath39 with positive self - intersection .",
    "let @xmath96 be an ample divisor on  @xmath39 . by the hodge index theorem ,",
    "@xmath97 is non - zero , and if necessary , we replace @xmath4 with @xmath98 , so that @xmath97 has positive degree .",
    "then , for @xmath49 sufficiently large , @xmath99 will have negative degree with respect to  @xmath96 and thus not be linearly equivalent to any effective divisor .",
    "therefore , riemann - roch formula for surfaces implies that @xmath100 grows quadratically in  @xmath49 , so @xmath4 is big by  ( * ? ? ?",
    "2.2.3 ) . if @xmath14 is the largest coefficient of a component of  @xmath4 , then @xmath101 is the sum of @xmath4 with an effective divisor , so @xmath101 is big , and thus @xmath91 . therefore , @xmath3 is robust in dimension  @xmath7 .",
    "[ ex : k3 ] consider the family @xmath102}$ ] defined by the equation @xmath103 , where @xmath104 , @xmath105 , @xmath106 , and  @xmath107 are the coordinates of  @xmath108 .",
    "the special fiber consists of @xmath109 planes meeting along their coordinate lines .",
    "however , this family is not regular .",
    "it has @xmath110  singularities at the points @xmath111 where @xmath112 is a primitive @xmath113th root of unity , together with permutations of these coordinates .",
    "these singularities are ordinary double point singularities .",
    "for example , if we set @xmath114 and @xmath115 , then the defining equation becomes @xmath116 each of these singularities has two different small resolutions .",
    "taking the same point @xmath111 as an example , we can blow - up either of the planes defined by @xmath117 or @xmath118 . either blow - up is an isomorphism except at the point @xmath111 , above which it introduces a single rational curve .",
    "the components are unchanged except for the chosen plane , which is blown up at the point @xmath111 . for each singularity",
    ", we have a choice of which of the two planes containing it to blow up , and since there are @xmath109 singularities along each coordinate lines , the symmetric choice is to blow up one plane at two of the singularities and the other at two of the others .",
    "we call the resulting family  @xmath3 and its special fiber again has @xmath109  components which are isomorphic to the blow - ups of  @xmath119 at six points , two along each of the coordinate lines .",
    "these components meet along the strict transforms of the coordinate lines , and these strict transforms have self - intersection  @xmath120 .",
    "it can be checked that the union of these strict transforms is a big divisor , and so @xmath3 is robust in dimension  2 .",
    "moreover , for each edge , @xmath121 is a non - trivial effective divisor on the curve  @xmath122 , and so @xmath3 is robust in dimension  1 .",
    "thus , the tropical complex for @xmath3 consists of the boundary of a tetrahedron with @xmath123 for every vertex  @xmath34 of every edge  @xmath81 , as in example  [ ex : pl - on - tetrahedron ] .    robustness and affineness of the locally closed strata will both play a critical role in the specialization theorem for tropical complexes  @xcite . for theorem  [ thm : intersect - intro ] in this paper , the relevant hypothesis on the degeneration is numerically faithful .",
    "recall that two divisors ( resp .",
    "curves ) on a smooth variety are _ numerically equivalent _ if they give cycles of the same degree if intersected with any curve ( resp .",
    "divisor ) in the variety .",
    "[ def : numerically - faithful ] we say that a strict degeneration  @xmath3 is _ numerically faithful _ at a vertex  @xmath34 of a dual complex  @xmath0 if every divisor and every curve on  @xmath20 is numerically equivalent to a rational linear combination of divisors  @xmath122 and curves  @xmath31 , respectively , as @xmath81 and  @xmath33 range over the edges and ridges containing  @xmath34 .",
    "numerically faithful degenerations of dimension  @xmath12 are always robust in dimension  @xmath12 because big divisors can be characterized by their numerical equivalence class  ( * ? ? ?",
    "2.2.8 ) . on the other hand , the degeneration in example  [ ex : k3 ] is not numerically faithful .",
    "each surface  @xmath20 of the special fiber in that example is the blow - up of @xmath119 at @xmath124 points , which has picard group  @xmath125 with a non - degenerate intersection product , but there only three curves  @xmath122 contained in each @xmath20 , so they could not span the numerical equivalence classes .",
    "while not all strict degenerations  @xmath3 satisfy the conditions in definitions  [ def : refined ] and  [ def : numerically - faithful ] , under a projectivity hypothesis , there always exists another degeneration of the general fiber  @xmath11 such that the locally closed strata are all affine , and thus the degeneration is robust in all dimensions .",
    "[ prop : blow - ups ] suppose that @xmath3 is a strict degeneration such that all of the components of the special fiber  @xmath10 are projective .",
    "then , there exists a series of blow - ups in the special fiber resulting in a degeneration  @xmath126 whose locally closed strata are all affine .",
    "we fix a component @xmath20 of the special fiber  @xmath10 . by assumption",
    ", @xmath20 is projective , so , by bertini s theorem , we can choose smooth and irreducible elements @xmath127 from the linear system of a very ample divisor on  @xmath10 , such that the @xmath128 intersect both each other and  @xmath90 transversely .",
    "we now blow - up the points of the intersection @xmath129 .",
    "then , we blow - up , for each integer @xmath14 from @xmath1 to  @xmath57 , the strict transforms of the @xmath14-dimensional varieties in @xmath130 for all indices @xmath131 . for each @xmath14 , these strict transforms are disjoint and thus the order of the blow - ups within a fixed dimension does nt matter .",
    "we then repeat the above blow - ups at the strict transform of each component of @xmath3 to obtain the degeneration @xmath126 from the statement . since @xmath126 is the iterated blow - up of a regular degeneration at smooth subvarieties , it is also regular .",
    "the centers of the blow - ups intersect the singular locus of the special fiber transversally , so the special fiber  @xmath132 is also reduced and simple normal crossing .",
    "thus , @xmath126 is a strict degeneration .    in order to show that the locally closed strata of  @xmath126 are all affine",
    ", we first consider the case of the case of a stratum  @xmath133 of  @xmath134 which maps birationally onto its image in  @xmath3 .",
    "we let @xmath26 be its image in @xmath3 , and then @xmath133 is formed by blowing up @xmath26 at the restrictions of intersections of very ample divisors from a component  @xmath20 for each vertex  @xmath34 in  @xmath26 .",
    "each of these blow - ups produces a new component for  @xmath126 and thus the difference @xmath135 is an open subset of @xmath26 minus the very ample divisors .",
    "this containment may be proper because of the intersection of @xmath26 with other components of @xmath10 .",
    "however , the complement of a very ample divisor is affine , and the complement of a cartier divisor in an affine variety is affine , so @xmath135 is affine , as desired .",
    "now , we consider the components introduced by the blow - ups .",
    "the center for such a blow - up is a variety  @xmath136 within a single component  @xmath20 .",
    "since we ve blown up the intersection of @xmath136 with very ample divisors in the previous step , the complement @xmath137 is affine , as in the previous paragraph .",
    "the blow - up of @xmath136 is a projective bundle over @xmath136 which intersects @xmath20 along a section .",
    "let @xmath138 denote this blow - up and then @xmath139 is an affine bundle over an affine variety @xmath137 , and thus it is affine .",
    "further blow - ups only intersect @xmath138 along @xmath140 and therefore do not affect the difference @xmath139 , which remains affine in @xmath126 .",
    "we conclude that the locally closed strata of  @xmath126 are all affine .",
    "one useful way of constructing strictly semistable degenerations will be the theory of tropical varieties and tropical compactifications over discrete valuation rings .",
    "we recall that if @xmath141 is an algebraic subvariety of  @xmath142 , defined over the fraction field  @xmath143 of our discrete valuation ring  @xmath9 , then @xmath144 is polyhedral subset of  @xmath8 ( see @xcite or ( * ? ? ?",
    "varieties defined over a field @xmath14 without a valuation fit into this framework by considering them over @xmath145 $ ] . for any point @xmath146",
    ", there is an initial scheme @xmath147 , and @xmath144 is the set of points  @xmath107 for which @xmath147 is non - empty .",
    "the tropicalization is the support of an @xmath12-dimensional polyhedral complex , which is a subcomplex of the grbner complex  ( * ? ? ?",
    "10 ) .    in order to get a semistable degeneration",
    ", we further require that all initial ideals @xmath148 are smooth , in which case we call @xmath141 _ schn _ ( cf .",
    "* def .  1.3 ) ) .",
    "we also assume that we have a _ unimodular subdivision _ of @xmath144 , which will will always take to mean the intersection of unimodular fan in @xmath149 whose intersection with @xmath150 is a subdivision of @xmath144 , refining the grbner complex , and with integral vertices .",
    "for such subdivisions , there is a regular toric variety over  @xmath9 associated to the fan  ( * ? ? ?",
    "* sec .  7 ) and we define the tropical compactification of  @xmath141 associated to the subdivision to be the closure of  @xmath141 inside this toric variety  ( * ? ? ?",
    "helm and katz have defined the parametrizing tropical variety of a as a certain finite - to - one map onto @xmath144 , where @xmath141 is schn  ( * ? ? ?",
    "* sec .  4 ) .",
    "the unimodular subdivision induces a subdivision of the parametrizing tropical variety as we now explain .",
    "[ const : duplication ] since @xmath141 is schn , for any @xmath151 , the initial ideal @xmath147 is a disjoint union of smooth varieties and this initial ideal is the same for any point in the relative interior of a cell of the subdivision , because the subdivision refines the grbner complex .",
    "then , for each cell of the subdivision , we take one copy of that cell for each smooth variety of @xmath152 , for any @xmath107 in the interior of the cell .",
    "now we describe how these simplices fit together .",
    "suppose that we have a cell @xmath24 of the subdivision and one of its faces  @xmath86 with , say , @xmath153 and @xmath154 for all sufficiently small  @xmath155 .",
    "then @xmath156  ( * ? ? ?",
    "10.9 ) , so every component of @xmath157 comes as the initial ideal of a unique component of @xmath147 , and we set the cell corresponding to the former component to be a face of the latter .    in proposition  [ prop : trop - compact ] , we ll show that the dual complex of the tropical compactification consists of the bounded cells of the subdivision of the parametrizing tropical variety from construction  [ const : duplication ] .    .",
    "note that the bounded edge has multiplicity  2 .",
    "if we take the subdivision shown , we get a tropical compactification of the curve , whose dual complex is a cycle of length  2 . ]",
    "[ ex : trop - compact ] we consider the variety defined by @xmath158 in  @xmath159 , where @xmath160 $ ] .",
    "its tropicalization is shown in figure  [ fig : trop - compact ] .",
    "if we take the grbner complex restricted to the tropicalization , we get a unimodular subdivision having two vertices , one bounded edge , and four unbounded rays . at the two vertices , the initial degenerations are @xmath161 and @xmath162 , which are smooth and irreducible subvarieties of @xmath159 . however , along the edge , the initial degeneration is @xmath163 , which is smooth , but has two connected components in @xmath159 .",
    "since the initial degenerations along the unbounded rays are also irreducible , the parametrizing tropical variety consists of four unbounded rays , two vertices , and two edges , both mapping to the bounded edge of @xmath144 .",
    "the dual complex of the tropical compactification consists of the bounded cells , which form a cycle of length  @xmath7 .",
    "now we compute the structure constants @xmath37 for the weak tropical complex coming from the degeneration .",
    "[ const : tropical ] suppose @xmath164 and fix a unimodular subdivision of @xmath144 as above .",
    "let @xmath33 be a ridge in the dual complex  @xmath0 , so a bounded @xmath32-dimensional cell of the subdivision of the parametrizing tropical variety as in construction  [ const : duplication ] .",
    "we take @xmath165 to be the vertices of  @xmath0 which are not in @xmath33 but which are in simplices containing  @xmath33 .",
    "we ve constructed @xmath0 such that each simplex maps to the subdivision , so we have a continuous map @xmath166 , and we regard @xmath144 as sitting inside @xmath167 .",
    "thus , each bounded cell of the subdivision containing  @xmath168 also contains one of the @xmath169 .",
    "we also order the unbounded cells of the parametrizing tropical variety containing  @xmath33 and for the @xmath27th such cell , we let @xmath170 be the unique ray in @xmath171 of the corresponding cone . the balancing condition for parametrizing tropical varieties  (",
    "4.2 ) says that if @xmath172 are the vertices of @xmath33 , then @xmath173 for some coefficients @xmath174 . by looking at the last coordinate of the vectors in  ( [ eq : balancing ] )",
    ", we see that @xmath175 and since the cone spanned by @xmath176 is @xmath12-dimensional and unimodular , the coefficients @xmath177 are unique and integral .",
    "we set @xmath178 to be  @xmath174 , which gives us a weak tropical complex .    .",
    "the structure constants for the resulting weak tropical complex between @xmath75 and  @xmath34 are computed in example  [ ex : trop - compact - coeffs ] .",
    "in example  [ ex : refined ] , we ll see that the subdivision is robust at  @xmath75 and that @xmath24 is a maximal unbounded cell containing  @xmath107 , in the sense of definition  [ def : trop - refined ] . ]",
    "[ ex : trop - compact - coeffs ] in figure  [ fig : refined ] , there is a unimodular subdivision of the plane  @xmath179 , thought of as the tropicalization of the torus @xmath180 . as in construction  [ const : tropical ] , we place the plane at height  @xmath1 in @xmath181 and choose coordinates so that the points are @xmath182 , @xmath183 , and @xmath184 .",
    "let @xmath81 be the edge between @xmath75 and @xmath34 and we wish to apply construction  [ const : tropical ] to this edge .",
    "when we take the cone over the subdivision , we get a cone to the left of  @xmath81 whose rays are @xmath75 , @xmath34 , and the ray spanned by the vector @xmath185 .",
    "thus , ( [ eq : balancing ] ) becomes : @xmath186 and so @xmath187 and @xmath188 . by similar computations at other edges",
    ", we can see that @xmath0 will be the weak tropical complex from example  [ ex : triangle ] .",
    "[ prop : trop - compact ] let @xmath141 be a schn subscheme of @xmath142 and fix a unimodular subdivision of @xmath144 .",
    "then the closure of  @xmath141 in  @xmath136 , the corresponding toric variety over  @xmath9 is a strict degeneration  @xmath3 whose weak tropical complex  @xmath0 is given by the bounded cells of the parametrizing tropical variety with structure constants as in construction  [ const : tropical ] .",
    "since @xmath3 is a tropical compactification , the components of the special fiber are all contained in the intersections with the toric strata of  @xmath136 corresponding to rays of the fan . because @xmath141 is schn and the fan is smooth , these components are smooth .",
    "moreover , the intersections of  @xmath3 with any toric strata are smooth of the expected dimension , so the intersections between these components are also smooth of the expected dimension .",
    "the special fiber  @xmath10 is reduced because the vertices of the subdivision are integral , so the minimal vectors along the rays of the fan always have @xmath1 in the last coordinate .",
    "thus , @xmath3 is a strict degeneration .",
    "the components of the special fiber and their strata correspond to the components of the initial ideals , showing that the complex is the bounded cells of the parametrizing tropical variety .",
    "now , we turn to computing the structure constants .    fix a ridge  @xmath33 of  @xmath0 and let @xmath189 be its vertices .",
    "consider the linear function  @xmath190 on @xmath149 which is @xmath13 on @xmath191 for @xmath192 and takes the value @xmath120 on @xmath193 , where @xmath76 is the map from @xmath0 to @xmath144 . because the cone defined by  @xmath33 is unimodular ,",
    "@xmath190 can be chosen to be integral , so it defines a rational function on the toric variety  @xmath136 whose multiplicity along a boundary divisor are given by the value of  @xmath190 at the first integral point along the corresponding ray . restricting this rational function to  @xmath3",
    ", we get a linear equivalence between @xmath194 and a divisor  @xmath4 whose multiplicities are given by the values of  @xmath190 , so in particular it does nt include @xmath195 for @xmath196 .    as in construction",
    "[ const : tropical ] , we let @xmath165 denote the vertices adjacent to  @xmath33 and @xmath197 the minimal generators of the rays for the unbounded cells containing  @xmath33 .",
    "each of these rays corresponds to a toric divisor on  @xmath136 and thus to a divisor on  @xmath3 , since @xmath3 is transverse to the toric boundary .",
    "then , ( [ eq : balancing ] ) implies that the values of  @xmath190 at these points satisfies : @xmath198 we ve assumed that @xmath199 for @xmath196 and @xmath200 , so the right hand side equals @xmath201 .",
    "each term on the left - hand side of  ( [ eq : balancing - equivalence ] ) computes the multiplicity of  @xmath4 along a prime divisor which intersects @xmath31 transversally .",
    "thus , the degree of @xmath202 is @xmath201 , and so the degree of @xmath203 is also @xmath201 , which is what we wanted to show .",
    "we next give the criteria to check for robustness and for affineness of the local closed strata of the degenerations constructed in proposition  [ prop : trop - compact ] .",
    "[ def : trop - refined ] fix a unimodular subdivision of @xmath204 and let @xmath24 be a @xmath14-dimensional bounded simplex of the subdivision .",
    "we say that the subdivision is _ robust _ at  @xmath24 if there exists an open half - space @xmath205 , such that the boundary of  @xmath206 contains @xmath24 and the relative interiors of all the unbounded @xmath53-dimensional cells containing @xmath24 are contained in  @xmath206 .",
    "we say that a cell  @xmath86 containing  @xmath24 is a _ maximal unbounded cell _ if every unbounded @xmath53-dimensional cell containing  @xmath24 is contained in  @xmath86 .",
    "[ ex : refined ] we return to the subdivision from example  [ ex : trop - compact - coeffs ] , depicted in figure  [ fig : refined ] .",
    "this tropicalization is robust at  @xmath75 because the three rays containing  @xmath75 can all be placed on the same side of an affine hyperplane containing  @xmath75 .",
    "however , it is not robust at  @xmath34 because while the three rays containing  @xmath34 are contained in a common closed half - space , the two horizontal rays are contained in the boundary and not in the open half - space .",
    "on the other hand , the vertex  @xmath107 is contained in a maximal unbounded cell , namely  @xmath24 , but the vertices @xmath75 and  @xmath34 are not contained in any maximal unbounded cell , because they are each contained in @xmath207 unbounded rays .",
    "[ prop : trop - compact - refined ] fix a unimodular subdivision of the tropicalization of a schn variety  @xmath141 and let @xmath24 be a bounded simplex of the subdivision . if the subdivision is robust at  @xmath24 , then the degeneration  @xmath3 is robust at all cells parametrizing  @xmath24 .",
    "if @xmath24 is contained in a maximal unbounded cell , then the locally closed strata of the cells parametrizing @xmath24 are all affine .",
    "let @xmath24 be a simplex where the subdivision is robust .",
    "then we consider the corresponding toric variety  @xmath208 , as well as @xmath4 , the sum of the divisors corresponding to the bounded cells containing  @xmath24 .",
    "then , we can compute the global sections of  @xmath4 and its multiples by looking at lattice points bounded by hyperplanes corresponding to the multiplicities of the boundary components . by our assumption on the unbounded cells , the valuations of the boundary divisors of  @xmath208 not in  @xmath4 are in the same half - space ,",
    "so the set of characters which are bounded on these divisors lie in a full - dimensional polyhedral cone .",
    "thus , the complete linear series for a sufficiently large multiple of  @xmath4 will be birational onto its image .",
    "more importantly , it will define an isomorphism of the torus of  @xmath208 , and since @xmath26 intersects the torus of  @xmath208 , this means that it maps @xmath26 birationally onto its image .",
    "this implies that @xmath84 , which is the restriction of @xmath4 to  @xmath26 is big , as desired .",
    "now suppose that @xmath24 is contained in a maximal unbounded cell  @xmath86 .",
    "then @xmath26 is a closure in a toric variety whose fan given by the cells containing  @xmath24 .",
    "the components of @xmath84 correspond to the bounded @xmath53-dimensional cells containing  @xmath24 .",
    "thus , the locally closed stratum @xmath209 is a closed subvariety of the affine toric variety corresponding to the cell  @xmath86 .",
    "therefore , @xmath209 is affine .",
    "we now turn to a criterion for a tropical degeneration to be numerically faithful . unlike the case of robustness and the locally closed strata being affine in proposition  [ prop : trop - compact - refined ] , our condition will impose conditions on the tropical variety and not just on the subdivision .",
    "as in  @xcite , we say that @xmath144 is _ locally matroidal _ if its multiplicities all @xmath1 and in a neighborhood of any point , @xmath144 is equal to the support of the bergman fan of a matroid , up to integral affine changes of coordinates .",
    "if @xmath144 is locally matroidal , then @xmath141 is schn by ( * ? ? ?",
    "10 ) and so we can construct a regular semistable degeneration from a subdivision of @xmath144 .    [",
    "prop : trop - compact - faithful ] let @xmath141 be a subvariety of @xmath142 with a unimodular subdivision of @xmath144 . if @xmath144 is locally matroidal and every bounded cell is contained in a maximal unbounded cell as in definition  [ def : trop - refined ] , then the associated degeneration  @xmath3 is numerically faithful .",
    "we fix a vertex  @xmath34 of the triangulation corresponding to a component  @xmath20 in the special fiber  @xmath10 .",
    "we suppose that @xmath210 is a prime cycle in  @xmath20 of either dimension  @xmath1 or codimension  @xmath1 , and we will show that @xmath210 is linearly equivalent , and thus , numerically equivalent , to a linear combination strata of @xmath10 of either dimension  @xmath1 or codimension  @xmath1 , respectively .",
    "we first choose @xmath24 to be the ( possibly unbounded ) cell containing  @xmath34 such that an open subset of  @xmath210 intersects the toric stratum corresponding to  @xmath24 .",
    "for the purposes of this proof , we will write @xmath26 for the intersection of  @xmath3 with this toric stratum even if @xmath24 is unbounded and thus not a cell of  @xmath0 .    by",
    "8) , @xmath26 is isomorphic to a compactification a hyperplane complement , with the compactification consisting of the union of @xmath211 for cells  @xmath86 containing  @xmath24 .",
    "since a hyperplane complement has trivial chow groups , except except in top dimensions , so long as @xmath210 has lower dimension than  @xmath26 , it is linearly equivalent to cycles supported on strata  @xmath211 where @xmath86 is a cell containing  @xmath24 . by inducting",
    ", we can assume that @xmath210 is equal to @xmath26 .",
    "if @xmath24 were a bounded cell , then we d be done , so we now assume that @xmath24 is unbounded .",
    "we let @xmath52 be the largest bounded cell contained in  @xmath24 and we work by induction on @xmath212 .",
    "let @xmath75 be a codimension  @xmath1 face of  @xmath24 .",
    "then we can find a linear function  @xmath190 on  @xmath149 which is zero on @xmath75 , but @xmath120 on the first lattice point of the ray of @xmath24 not contained in  @xmath75 .",
    "such a linear function defines a rational function on the toric variety corresponding to  @xmath75 , which by restriction to  @xmath3 induces a linear equivalence between @xmath26 and strata  @xmath211 where @xmath86 are other strata containing  @xmath75 with @xmath213 .",
    "since @xmath24 must be the maximal unbounded cell of  @xmath52 , the only unbounded rays containing @xmath52 are contained in  @xmath24 , so each @xmath86 contains a bounded vertex , whose convex hull with @xmath52 gives a bounded cell of dimension @xmath214 contained in  @xmath86 .",
    "thus , by inducting , we can assume that @xmath215 is bounded , and we re done .",
    "in this section , we introduce divisors on tropical complexes . in analogy with cartier divisors on a normal algebraic variety , we will define divisors to be formal sums of codimension  @xmath1 sets which are locally defined by a single function . on a tropical complex ,",
    "the relevant local defining equation is a piecewise linear function , and so before defining divisors , we first construct the divisor associated to such a function . the same construction yields our definition of linear equivalence by considering global piecewise linear functions",
    ".    a _ pl function _",
    "( for piecewise linear function ) on a tropical complex  @xmath0 will be a continuous function  @xmath76 such on each simplex of  @xmath0 , the function  @xmath76 is a piecewise linear function with integral slopes , under the identification of the simplex with the standard unit simplex .",
    "a _ rational pl function _ is a continuous function  @xmath76 such that some integral multiple is a pl function .",
    "in addition to pl functions , we can define linear functions on a weak tropical complex .",
    "linear functions on a weak tropical complex will be distinct from what we will call _ linear functions in the ordinary sense on a simplex  @xmath24 _ , by which we mean functions which are linear on @xmath24 if it is identified with a standard unit simplex .",
    "our first step is to note that the construction of a tropical complex from its embedding in a real vector space can be reversed by taking ( [ eq : balancing ] ) from construction  [ const : tropical ] as a defining relation .",
    "[ const : sheaf ] let @xmath0 be a weak tropical complex and @xmath33 a ridge of  @xmath0 .",
    "let @xmath216 be the simplicial complex consisting of attaching one @xmath12-dimensional simplex for each vertex in @xmath217 onto the parametrizing simplex  @xmath218 .",
    "thus , there exists a natural map @xmath219 extending the parametrization of @xmath33 by  @xmath218 . if @xmath220 denotes the open subset of  @xmath216 consisting of the interior of  @xmath33 and the interiors of the facets of  @xmath216 , then @xmath221 is a covering of its image , and if @xmath0 is a regular @xmath0-complex , then @xmath221 is an open immersion .",
    "now let @xmath222 be the quotient @xmath223 by the line generated by the vector @xmath224 where @xmath225 is the cardinality of @xmath217 and @xmath172 denote the vertices of  @xmath218 .",
    "let @xmath226 denote the image of the @xmath27th coordinate vector of @xmath227 .",
    "then , @xmath228 is the map which is linear on simplices and sends the @xmath225 vertices of  @xmath216 which are not in @xmath218 to distinct @xmath229 for @xmath230 and sends @xmath231 to @xmath232 .",
    "note that the @xmath229 generate a lattice inside @xmath222 so we can talk about linear functions having integral slopes .",
    "note that the map @xmath233 from construction  [ const : sheaf ] maps @xmath216 into the affine hyperplane in  @xmath222 consisting of vectors of the form @xmath234 where @xmath235 .",
    "therefore , although there is one real parameter for the constant of an affine linear function on  @xmath222 and @xmath236 integral parameters for the slopes , there are only @xmath237 parameters for the slope of a linear function on @xmath220 .",
    "[ def : linear ] a pl function @xmath76 on an open subset @xmath238 of a weak tropical complex  @xmath0 is _ linear _ if it is linear in the ordinary sense on each facet meeting @xmath238 and for each ridge @xmath33 meeting  @xmath238 , @xmath239 for some affine linear function @xmath240 with integral slopes .",
    "since they have integral slope , all linear functions are pl functions . for curves ,",
    "the linear functions are the same as those in ( * ? ? ?",
    "3.7 ) . on a tropical complex of any dimension",
    ", we can define @xmath241 to be the sheaf of linear functions on  @xmath0 . if all maximal simplices of  @xmath0 have dimension  @xmath12 , then @xmath0 is determined by its underlying simplicial complex together with the sheaf  @xmath241 , because construction  [ const : sheaf ] can be reversed to determine the coefficients @xmath37 from the linear functions on @xmath216 .",
    "[ rmk : gross - siebert ] if a tropical complex happens to be homeomorphic to a manifold , then the sheaf of linear functions gives the manifold an integral affine structure away from the codimension  @xmath7 simplices .",
    "manifolds with integral affine structures have also been constructed from degenerations of calabi - yau varieties by gross and siebert  @xcite , building on ideas of kontsevich and soibelman  @xcite , but their constructions differ from ours . rather than regular semistable models , gross and siebert use what they call toric degenerations of a calabi - yau variety , for which the total family  @xmath3 is allowed to have singularities , but components of the special fiber",
    "are required to be toric varieties ( see  ( * ? ? ?",
    "4.1 ) for the precise definition ) .    in the case of example",
    "[ ex : k3 ] , their toric degeneration would be the family @xmath242 with @xmath110 singularities , before the blow - ups were used to obtain a regular semistable model .",
    "in both the toric and the regular semistable degeneration , the dual intersection complex is the boundary of a tetrahedron , but for gross - siebert the singularities in the affine linear structure lie at the midpoints of the @xmath124  edges , corresponding to the singularities of  @xmath141  @xcite , whereas construction  [ const : sheaf ] only puts singularities on the @xmath109  vertices .    on the other hand",
    ", the sheaf of linear functions on a tropical complex agrees with the one constructed in ( * ? ? ?",
    "* following def .",
    "1.4 ) for degenerations of calabi - yau surfaces .",
    "we now want to define divisors , which will be certain formal sums of polyhedra in @xmath0 .",
    "we will consider formal sums of @xmath32-dimensional polyhedra , each of which is contained within a single simplex .",
    "we put an equivalence relation on formal sums of polyhedra by declaring that if @xmath243 are @xmath32-dimensional polyhedra whose pairwise intersections all have dimension at most @xmath244 and whose union is convex , then @xmath245 + \\cdots [ p_k ] = [ p_1 \\cup \\cdots \\cup p_k]$ ] ( cf .",
    "* def .  5.12 ) ) . in this section ,",
    "_ formal sum of polyhedra _ will always mean formal sums considered up to this equivalence relation .    in tropical geometry ,",
    "the multiplicity of a piecewise linear function in  @xmath246 along the boundary between two domains of linearity is defined to be the lattice distance between the slope vectors of the two linear functions .",
    "see proposition  3.3.2 in  @xcite and the text before it for details . on a tropical complex , we can only directly compare two slope vectors for domains of linearity on the same facet .",
    "however , we can use linear functions from definition  [ def : linear ] to reduce to the case of a pl function supported on a single facet .",
    "the following proposition gives our definition of the _ divisor of a pl function _",
    ", @xmath247 , in which property ( iv ) is the most basic case of the traditional multiplicity definition , where the two slopes have lattice distance  @xmath1 .",
    "[ prop : divisor - pl ] for any weak tropical complex  @xmath0 , there is a unique function taking a pl function  @xmath76 on any open @xmath248 to a formal sum of polyhedra @xmath249 in  @xmath238 with the following properties :    1 .   for any pl functions @xmath76 and  @xmath250 , @xmath251 .",
    "if @xmath252 is open , then @xmath253 .",
    "3 .   the function  @xmath76 is linear if and only if @xmath247 is trivial .",
    "suppose that the support of  @xmath76 is contained in a single facet  @xmath254 of  @xmath0 , on which it is defined by : @xmath255 where @xmath104 is a coordinate vector in standard unit simplex identified with  @xmath254 , and @xmath256 is an integral vector whose entries have no non - trivial common divisor .",
    "then , @xmath257 $ ] .",
    "[ it : ridge ] if @xmath33 is a ridge not contained in any facet , @xmath238 is the interior of  @xmath33 , and @xmath76 is linear in the ordinary sense on  @xmath33 , then @xmath258,\\ ] ] where we ve extended @xmath76 to a linear function on  @xmath218 by continuity .    by the second property",
    ", we can work locally .",
    "since ordinary linear functions on a facet are linear in the sense of definition  [ def : linear ] , it suffices to check that @xmath247 is uniquely defined in two cases : along the boundary between domains of linearity within a facet and along simplices of dimension at most @xmath32 .",
    "moreover , since @xmath247 is a formal sum of @xmath32-dimensional polyhedra , we can ignore sets of dimension @xmath244 or less , and we can refine our two cases to the boundary between two domains of linearity in a facet and along ridges of  @xmath0 .    in the second case , when , furthermore , the ridge  @xmath33 is not contained in any facets , we can fix a domain of linearity  @xmath238 in  @xmath33",
    ". then we can extend @xmath259 to a unique function on  @xmath218 , linear in the ordinary sense .",
    "then , the divisor of this extension is determined by property  ( v ) , which gives us the divisor of  @xmath259 by property  ( ii ) .",
    "note that , since the slopes of @xmath76 are required to be integral , and the sum of the @xmath37 is @xmath13 , the coefficient in property  ( v ) is integral . also , that formula is clearly linear in  @xmath76 , and it gives @xmath13 if and only if @xmath76 is linear , since construction  [ const : sheaf ] involves the quotient by the vector consisting of the @xmath37 .",
    "we now address the remaining cases , that of the boundary between two domains of linearity in a single facet and of a ridge  @xmath33 contained in one or more facet .",
    "in the first case , we can take @xmath250 to be the linear extension of @xmath76 from one of the domains of linearity . in the second case",
    ", we can also find a linear function  @xmath250 which locally agrees with @xmath76 on all but one of the facets containing  @xmath33 .",
    "the reason is that the map  @xmath233 from construction  [ const : sheaf ] imposes a single relation so that if we remove one facet , the images of the remaining vertices are affinely independent . in either case ,",
    "@xmath260 is supported on a single facet , and is linear on its support .",
    "thus , it can be written as an integral multiple of function as in  ( [ eq : piecewise ] ) , so properties  ( v ) and then  ( i ) compute the divisor .",
    "the remaining point to check is that the multiplicity computation in the previous paragraph is independent of the choice of  @xmath250 .",
    "thus , we need to show that , if two distinct functions @xmath76 and  @xmath250 both have the same form as the function  ( [ eq : piecewise ] ) , and @xmath260 is linear , then both functions define the same divisor .",
    "thus , the linear function @xmath260 must agree with @xmath76 where it is non - zero .",
    "if @xmath76 is defined on the interior of a facet , then this means that @xmath260 must be @xmath261 , where @xmath256 is the slope vector of the non - zero part of  @xmath76 , as in  ( [ eq : piecewise ] ) , so @xmath262 , which also defines a divisor of multiplicity  @xmath1 along the set where @xmath263 .",
    "on the other hand , if @xmath76 is defining a divisor contained in a ridge  @xmath33 , then @xmath76 and  @xmath250 are non - zero on all but one of the facets containing  @xmath33 , and differ in which facet that is . however , since the vector defining the quotient in construction  [ const : sheaf ] has an entry of  @xmath1 for each facet containing  @xmath33 , the @xmath76 and @xmath250 both have slope  @xmath1 , so they define the same divisor when applying property  ( iv ) .",
    "[ prop : linear - near - ridge ] let @xmath76 be a pl function on a neighborhood of the interior of a ridge  @xmath33 in a tropical complex  @xmath0 which is linear in the ordinary sense on each simplex . if @xmath219 is as in construction  [ const : sheaf ] , then we can extend @xmath264 by ordinary linearity to a function  @xmath265 on @xmath216 .",
    "then , identifying the vertices of @xmath216 with the vertices of the parametrizing simplex of  @xmath33 and with @xmath55 for @xmath266 , the coefficient of @xmath33 in @xmath247 is : @xmath267    first , if @xmath33 is contained in no facets , the the second term from the proposition statement agrees with property  ( v ) in proposition  [ prop : divisor - pl ] .",
    "thus , we can assume that @xmath33 is contained in at least one facet .",
    "we label the vertices of @xmath216 with @xmath268 as in construction  [ const : sheaf ] .",
    "we write a basis for @xmath222 consisting of @xmath229 , the images of the coordinate vectors of @xmath227 , for @xmath269 . in these coordinates ,",
    "@xmath270 , the image of @xmath271 , is @xmath272 .",
    "now we consider the dual basis of linear equations on @xmath222 , which we will call @xmath273 , such that @xmath274    we define @xmath275 to be the linear function @xmath276 and @xmath277 as @xmath278 .",
    "then , by construction , @xmath265 is zero outside of the simplex containing @xmath33 and @xmath271 , on which it is linear and its value at @xmath271 is @xmath279 which is the coefficient of  @xmath33 given by definition  [ def : linear - on - simplices ] .",
    "moreover , if we restrict @xmath265 to a neighborhood of the interior of  @xmath218 on which @xmath280 is a cover of its image , then we have a pl function on an open set of  @xmath0 supported only on one facet , and by the linearity property  ( i ) and property  ( iv ) of proposition  [ prop : divisor - pl ] , the coefficient of @xmath33 is given by  ( [ eq : value - v1 ] ) .",
    "[ rmk : computing - multiplicities ] since the construction of the associated divisor is local , proposition  [ prop : linear - near - ridge ] gives us a formula for computing the multiplicity along a ridge  @xmath33 of any pl function .",
    "in particular , we can restrict to any domain of ordinary linearity along @xmath33 and the facets containing it and then extend to the interiors of  @xmath33 and these facets to get a function for which proposition  [ prop : linear - near - ridge ] computes the multiplicity .",
    "multiplicities in the interior of a facet can be computed by identifying the facet with a unimodular simplex in @xmath246 and using the definition in terms of lattice distance between slope vectors  ( * ? ? ?",
    "3.3.2 ) , which satisfies the conditions of proposition  [ prop : divisor - pl ]    [ prop : linear - on - simplices ] let @xmath76 be a pl function which is linear on each simplex and has an integral value at each vertex .",
    "then the divisor associated to  @xmath76 in definition  [ def : linear - on - simplices ] is the same as that defined by proposition  [ prop : divisor - pl ] .",
    "since @xmath76 is linear on each facet , @xmath247 is supported on the ridges .",
    "thus , we can use proposition  [ prop : linear - near - ridge ] to compute the multiplicities along each ridge .",
    "the formula in that proposition is the same as in definition  [ def : linear - on - simplices ] and so we re done .",
    "we can use the linearity of the associated divisor to assign a rational linear combination of @xmath32-dimensional polyhedra to an rational pl function . in this paper",
    ", we will be mostly interested in rational pl functions whose multiplicities are all integral .",
    "[ def : divisors ] a _ cartier divisor _",
    "@xmath281-cartier ) is an integral formal sum of @xmath32-dimensional polyhedra on a weak tropical complex  @xmath0 which can locally be defined by a pl function ( resp .",
    "rational pl function ) .",
    "a _ weil divisor _ , which we will often call just a _ divisor _ , is a formal sum of @xmath32-dimensional polyhedra which is cartier except on a closed set of dimension at most @xmath282 .",
    "two divisors are _ linearly equivalent _ if their difference is the divisor of a pl function",
    ".    we will call the group of cartier divisors modulo linear equivalence the _ picard group _ of  @xmath0 , written @xmath283 .",
    "the group of weil divisors modulo linear equivalence will be called the _ divisor class group_.    if @xmath284 and @xmath0 is not just a single vertex , then any formal sum of points is locally defined by a rational function and thus a cartier divisor . if @xmath285 , then every weil divisor is @xmath281-cartier , but not every @xmath281-cartier divisor is cartier .",
    "weil divisors are important because they are equivalent to the standard balancing condition in the interior of @xmath12-dimensional simplices and because they are the result of specialization , as in proposition  [ prop : trop - weil ] below .",
    "these three classes of divisors play roles analogous to their namesakes on a normal algebraic variety . for many purposes ,",
    "it is possible to work with weil divisors , but the intersection theory which appears section  [ sec : curves ] requires @xmath281-cartier divisors . note that , by the linearity of taking divisors , we can think of a @xmath281-cartier divisor as being locally defined by a rational pl function , although the divisor is still required to have integral coefficients .",
    "consider again the tetrahedron from example  [ ex : pl - on - tetrahedron ] . by the calculation in that example ,",
    "the formal sum @xmath80 $ ] is a cartier divisor and thus @xmath286 $ ] is a @xmath281-cartier divisor . by symmetry and linearity , any linear combination of edges is @xmath281-cartier divisor .",
    "however , @xmath286 $ ] is not cartier , because in a neighborhood of an endpoint of  @xmath81 , a pl function whose divisor is supported on  @xmath81 would have to have the same slope on both of the simplices which contain  @xmath81 .",
    "such a function would always define an even multiplicity along  @xmath81 by proposition  [ prop : linear - on - simplices ] .",
    "the linear function from example  [ ex : pl - on - tetrahedron ] shows that @xmath80 $ ] is linearly equivalent to @xmath287 $ ] , so @xmath286 - [ e']$ ] is a non - trivial @xmath7-torsion element in the divisor class group of  @xmath0 .",
    "we will now define a specialization map taking a divisor on the general fiber of  @xmath3 to a weil divisor on  @xmath0 , assuming the degeneration is robust in dimension  @xmath7 .",
    "let @xmath4 be a divisor on @xmath11 and then its closure @xmath288 is a cartier divisor on @xmath3 since @xmath3 is assumed to be regular .",
    "the _ specialization _ of  @xmath4 is the following sum over the ridges of  @xmath0 : @xmath289.\\ ] ] for @xmath290 , this formal sum of points is a cartier divisor , when @xmath0 is not a single vertex , in which case all formal sums of points are cartier . in higher dimensions , we have :    [ prop : trop - weil ] let @xmath3 be a strict degeneration of relative dimension at least  @xmath7 .",
    "if @xmath3 is robust in dimension  @xmath7 , then for any divisor  @xmath4 on @xmath11 , @xmath291 is a weil divisor .    we will show that @xmath291 is @xmath281-cartier away from the @xmath292-dimensional skeleton of  @xmath0 .",
    "we fix an @xmath40-dimensional simplex  @xmath38 , and we claim that @xmath291 is defined by a pl function in a neighborhood of the interior of  @xmath38 .",
    "let @xmath293 be the number of vertices in @xmath62 and then rational pl functions  @xmath76 on a neighborhood of the interior of  @xmath38 , which are identically zero on  @xmath38 and linear in the ordinary sense on each simplex , can be identified with  @xmath294 by assigning to each vertex  @xmath52 of  @xmath62 , the value of  @xmath76 at the opposite vertex  @xmath55 .",
    "linear combinations of the ridges containing  @xmath38 also correspond to elements of @xmath295 by recording the multiplicity along each ridge containing  @xmath38 . by proposition  [ prop :",
    "linear - on - simplices ] , with these bases , the map from rational pl functions to their associated divisors is given by the local intersection matrix  @xmath45 .",
    "thus , it will be sufficient to show that the image of  @xmath45 includes @xmath296 $ ] , the vector recording the coefficients of  @xmath291 .",
    "suppose for contradiction that @xmath296 $ ] is not in the image of  @xmath45 .",
    "then there exists a vector @xmath297 in @xmath294 such that @xmath298 = 1 $ ] , but @xmath297 vanishes on the image of  @xmath45 .",
    "equivalently , @xmath297 is in the left kernel of  @xmath45 , which is the same as the right kernel since @xmath45 is symmetric . since @xmath3 is robust in dimension  @xmath7",
    ", the local intersection matrix  @xmath45 has one positive eigenvalue by proposition  [ prop : hodge - robustness ] , so we can find a vector  @xmath299 such that @xmath300 .",
    "then , we can construct the following divisors on  @xmath39 : @xmath301 where @xmath65 is the ridge of  @xmath0 corresponding to  @xmath52 . the intersections between these divisors is given by pairing the corresponding vectors with the symmetric bilinear form  @xmath45 and the intersection pairing with @xmath302 is given by the dot product with @xmath296 $ ] .",
    "thus , the matrix representation for the intersection pairing on  @xmath39 of the divisors @xmath303 , @xmath304 , and @xmath305 is : @xmath306 it is easy to see that no matter what the values marked with  @xmath307 are , this matrix has signature @xmath308 , which contradicts the hodge index theorem applied to @xmath39 .",
    "therefore @xmath296 $ ] is in the image of @xmath45 , so @xmath291 is @xmath281-cartier in a neighborhood of the interior of  @xmath38 , and thus @xmath291 is a weil divisor , as desired .",
    "[ prop : lin - equivalent ] if @xmath4 and @xmath309 are linearly equivalent divisors on  @xmath11 , then @xmath291 and @xmath310 are linearly equivalent .    if @xmath4 and @xmath309 are linearly equivalent , then there exists a rational function  @xmath254 on  @xmath11 whose divisor is @xmath311",
    ". we can also regard @xmath254 as a rational function on @xmath3 , in which case its divisor is @xmath312 $ ] for some integers  @xmath313 , where the sum is over the vertices of  @xmath0 .",
    "thus , the difference between the specializations is : @xmath314 .",
    "\\notag \\\\ & = \\sum_{r \\in \\delta_{n-1 } } \\big ( -\\sum_{v \\in r_0 } b_v \\alpha(v , r ) + \\sum_{f \\in { \\operatorname{link}}_\\delta(r ) } b_{{\\operatorname{opp}}(f ) } \\big ) [ r ] \\label{eq : lin - equivalent}\\end{aligned}\\ ] ]",
    "if we let @xmath76 be the pl function on  @xmath0 which is linear on each simplex and such that @xmath315 for each vertex @xmath34 in  @xmath0 , then ( [ eq : lin - equivalent ] ) agrees with the divisor of  @xmath76 from definition  [ def : linear - on - simplices ] , and so @xmath76 defines a linear equivalence between @xmath291 and  @xmath310 by proposition  [ prop : linear - on - simplices ] .",
    "we close this section by showing compatibility of our definitions of the divisors of pl functions and linear equivalence with the ones previously been defined by allermann and rau for tropical varieties  @xcite . by proposition  [ prop : trop - compact ] ,",
    "a unimodular subdivision of a tropicalization @xmath144 yields a weak tropical complex which parametrizes the bounded cells of the subdivision . since the formation of the weak tropical complex involves throwing away the unbounded cells of the subdivision , we will restrict ourselves to piecewise linear functions on the tropical variety which are constant the unbounded cells .",
    "moreover , since the weak tropical complex is a parametrization of the bounded cells , but not always a homeomorphic to them , we use the following construction to push forward divisors on a weak tropical complex to formal sums of polyhedra on the tropical variety .",
    "[ const : push - forward ] let @xmath144 be tropicalization of a schn algebraic variety @xmath316 , together with a unimodular subdivision of @xmath144 as in section  [ sec : trop - varieties ] .",
    "let @xmath0 be the weak tropical complex constructed from the bounded cells of the parametrizing tropical variety ( const .",
    "[ const : duplication ] with structure constants as in construction  [ const : tropical ] . for any @xmath32-dimensional polyhedron in  @xmath0",
    ", we define the push forward to @xmath144 to be the image of the polyhedron , which is also @xmath32-dimensional .",
    "extending by linearity , we have a push forward  @xmath317 from weil divisors on @xmath0 to formal sums of polyhedra on @xmath144 .",
    "[ prop : allermann - rau ] let @xmath164 be a schn subvariety , with a unimodular subdivision of @xmath144 , and let @xmath0 be the associated weak tropical complex . if @xmath254 is a pl function on an open subset @xmath318 which is constant on each unbounded cells meeting  @xmath238 , then @xmath319 , where @xmath249 is the weil divisor defined by construction  3.3 in @xcite .",
    "we check that the coefficients computed by each method agree in two cases : first , for the coefficient along a ridge  @xmath33 of  @xmath0 , and second , for coefficients along a hyperplane in the interior of a facet of  @xmath0 . in the first case",
    ", we can assume that @xmath254 is constant on  @xmath33 , because if @xmath33 is contained in an unbounded cell , then the constancy is by assumption , and if @xmath33 is not contained in any unbounded cell , then we can subtract by an affine linear function on  @xmath8 in a neighborhood of  @xmath33 , which wo nt change the multiplicity computation in either method .",
    "then , we want to compute the contribution coming from each facet containing  @xmath33 .",
    "if we write the linear function on the facet as @xmath320 , where @xmath104 represents the coordinates of the simplex and @xmath256 is the minimal integral vector defining the face of the simplex , as in proposition  [ prop : divisor - pl](4 ) . then , ( * ? ? ?",
    "3.4 ) tells us to evaluate the difference between this linear function at a point  @xmath104 where @xmath321 is @xmath1 and at a point in  @xmath33 , which yields @xmath322 .",
    "likewise , proposition [ prop : divisor - pl ] also gives the coefficient  @xmath322 by the linearity of property  ( i ) and property  ( iv ) .    in the second case ,",
    "we re working in the interior of a facet of  @xmath0 .",
    "the expression in  ( * ? ? ? * def .",
    "3.4 ) again measures the failure of a piecewise linear function to be linear , in the ordinary sense of linear on a simplex .",
    "again , we can subtract by a linear function without changing the coefficient in either definition , and then the proof is the same as in the first case .",
    "in this section we introduce curves on tropical complexes , which are formal sums of line segments satisfying a balancing condition .",
    "there is an intersection product between curves and @xmath281-cartier divisors producing a formal sum of points , whose total degree is invariant under linear equivalence .",
    "following the idea in  ( * ? ? ?",
    "6 ) , this intersection product works by restricting the pl function locally defining a @xmath281-cartier divisor to a curve , where it again defines a divisor .",
    "similar to divisors , curves are formal sums of @xmath1-dimensional segments",
    ". we will always consider such formal sums up to the equivalence that if @xmath323 and @xmath324 are line segments which subdivide a larger line segment then @xmath325 + [ s_2 ] = [ s_1 \\cup s_2]$ ] .",
    "in addition , we will always require the slopes of the line segments to be rational , if the containing simplex is identified with a standard unit simplex in @xmath246 .",
    "we could have made an analogous hypothesis for the formal sums which make up divisors , but it would have been redundant because divisors are locally defined by pl functions which themselves have rational slopes .",
    "[ const : pl - on - curve ] suppose that @xmath5 is a formal sum of @xmath1-dimensional segments in @xmath0 , all of which have rational slope .",
    "the support of  @xmath5 is the union of those segments .",
    "let @xmath76 be a continuous function on the support of  @xmath5 which is piecewise linear on each segment .",
    "we define the divisor associated to  @xmath76 as a formal sum of points . by assumption",
    ", each segment of  @xmath5 has rational slope , so it is parallel to a vector @xmath75 with integral and relatively prime entries .",
    "we define the lattice length of  @xmath75 to be  @xmath1 and then by scaling , we get a metric along each segment of  @xmath5 . the coefficient at any given point of  @xmath5 is the sum of the outgoing slopes of  @xmath76 along the segments , using this metric , times the multiplicity of that edge .",
    "[ def : curve ] a _ curve _",
    "@xmath5 is a formal sum of @xmath1-dimensional segments in a weak tropical complex  @xmath0 such that for any linear function  @xmath76 on an open subset @xmath248 , the divisor associated to  @xmath326 by construction  [ const : pl - on - curve ] is trivial .    in tropical geometry , a basic result about the tropicalization of a variety is the balancing condition ( see ( * ? ? ?",
    "* thm .  13.11 ) or ( * ? ? ?",
    "3.4.14 ) ) .",
    "for a formal sum of segments in  @xmath8 , the balancing condition is equivalent to requiring the restrictions of the coordinate functions to induce the zero divisor .",
    "the definition of a curve in a tropical complex generalizes the global coordinate functions to linear functions on open subsets .",
    "[ rmk : yu ] a different balancing condition for curves on the dual complex of a degeneration is described in  @xcite . there , the definition of balancing involves not just the tropical complex structure , but also the chow group of @xmath1-cycles for each component  @xmath20 , and the specialization of any curve is balanced in this sense  ( * ? ? ?",
    "however , for numerically faithful degenerations , all numerical classes of @xmath1-cycles are represented by strata in the degeneration , in which case the balancing condition in definition  [ def : curve ] coincides with that of  @xcite and proposition  [ prop : specialization - curves ] shows that specializations of algebraic curves are balanced .",
    "[ rmk : morphisms ] if @xmath5 is a sum of distinct @xmath1-simplices in  @xmath0 , then we can consider @xmath5 as a graph , and thus as a @xmath1-dimensional tropical complex .",
    "then , @xmath5 is a curve if and only if for the inclusion @xmath327 , linear functions on  @xmath0 pull back to linear functions on  @xmath5 . more generally ,",
    "if the multiplicities are arbitrary positive integers , then we can create multiple copies of those edges to get the same result .",
    "thus , inclusions of effective curves supported on the @xmath1-skeleton are examples of continuous maps between tropical complexes such that the pullback of a linear function is linear .",
    "such a map is a natural definition for a morphism of tropical complexes . in the case of morphisms of graphs ,",
    "this type of morphism was called harmonic and studied in  @xcite and  @xcite .",
    "[ const : intersection ] let @xmath4 be a @xmath281-cartier divisor and @xmath5 a curve in a weak tropical complex  @xmath0 .",
    "then we define the _ intersection product _ @xmath328 as a formal sum of points with rational coefficients . by definition , there exists an open cover @xmath329 of @xmath0 such that on each  @xmath330 , the divisor @xmath4 is defined by a rational pl function @xmath331 . in each @xmath330",
    ", we set @xmath332 to be the divisor of the @xmath331 restricted to  @xmath5 , according to construction  [ const : pl - on - curve ] .",
    "note that if @xmath4 is cartier , then the @xmath76 are pl functions , so @xmath328 is an integral linear combination of points .",
    "the sum of the coefficients in @xmath328 is its degree , denoted @xmath333 .    one way of explaining the intersection product of curves is that , since any graph has a unique structure as a tropical complex , the restriction of a pl function always defines a divisor on the curve .",
    "for higher - dimensional cycles , we would need to know the additional structure of the tropical complex in order to define the intersection product .",
    "[ prop : intersection ] the intersection product in construction  [ const : intersection ] is well - defined .",
    "moreover , if @xmath4 and @xmath309 are linearly equivalent @xmath281-cartier divisors , then @xmath334 .    in construction",
    "[ const : intersection ] , we made two sets of choices , first of the open sets  @xmath330 and then for the local defining equations .",
    "it is clear that the @xmath330 can be refined and the defining equations replaced by their restrictions without changing the intersection .",
    "now suppose we are computing with the same open cover , but two different sets of local defining equations for  @xmath4 .",
    "then their difference has trivial divisor on each open set and so the difference is a linear function .",
    "therefore , by the definition of a curve , the restriction of the difference yields the trivial divisor .",
    "thus , @xmath328 is well - defined as a formal sum of points .",
    "we now suppose that @xmath4 and @xmath309 are linearly equivalent @xmath281-cartier divisors .",
    "then their difference is the divisor of a pl function  @xmath76 . on any open set  @xmath238 where the defining equation for  @xmath4 is @xmath265 , we can define @xmath309 by @xmath335 .",
    "thus , it suffices to check that the total multiplicity of the divisor associated to a global pl function on @xmath5 is zero .",
    "however , this is true because for any segment of  @xmath5 for which @xmath76 is linear , the contributions at either endpoint will cancel out .",
    "therefore , the degree of the intersection only depends on the divisor class .    as we did for divisors in section  [ sec : divisors ] , we can define a specialization map for algebraic curves in  @xmath11 .",
    "let @xmath5 be a curve in the general fiber  @xmath11 of a degeneration and let @xmath336 be its closure in the total family  @xmath3 .",
    "we define the specialization @xmath337 to be the following sum over the edges of  @xmath0 : @xmath338\\ ] ] the intersection product @xmath339 in ( [ eq : curve - specialization ] ) can be constructed by taking the successive intersections of the cartier divisors  @xmath20 and  @xmath138 with the cycle @xmath336 , where @xmath34 and @xmath107 are the endpoints of  @xmath81 , and then taking the degree of the cycles supported on @xmath340 .",
    "if @xmath5 is any @xmath1-cycle on  @xmath11 , then we can define @xmath337 by linearity .",
    "[ lem : intersections - on - component ] let @xmath0 be the weak tropical complex of a strict degeneration  @xmath3 .",
    "if @xmath76 is a rational pl function on a neighborhood of a vertex  @xmath34 of  @xmath0 , then on a possibly smaller neighborhood  @xmath238 of  @xmath34 : @xmath341 , \\mbox { where } d_\\phi = \\sum_{e \\in { \\operatorname{link}}_\\delta(v)_0 } a_e c_e,\\ ] ] and @xmath342 is the slope of  @xmath76 along  @xmath81 , moving away from  @xmath34 .",
    "we choose @xmath238 small enough to be contained inside the domain of linearity of  @xmath76 on each simplex containing  @xmath34 .",
    "we let @xmath343 be defined by extending @xmath76 by linearity on each simplex .",
    "then , by proposition  [ prop : linear - on - simplices ] , @xmath344\\ ] ] on the other hand , for the intersection @xmath345 , each summand  @xmath122 of  @xmath346 either intersects the curve  @xmath31 transversally or contains it . in the former case ,",
    "the intersection number is given by the second term of  ( [ eq : local - divisor ] ) .",
    "in the latter case , @xmath122 is the pullback to @xmath20 of @xmath347 , so the intersection number is @xmath348 , giving the first term of  [ eq : local - divisor ] .",
    "[ prop : specialization - curves ] if @xmath5 is a curve on the general fiber of a numerically faithful degeneration  @xmath3 with tropical complex  @xmath0 , then the specialization @xmath337 is a curve on  @xmath0 .",
    "if @xmath349 is in the interior of an edge  @xmath81 of  @xmath337 , then any linear function  @xmath76 near  @xmath349 is linear in the ordinary sense on  @xmath81 .",
    "since the multiplicity of @xmath337 is constant along  @xmath81 , the slopes along the two directions of  @xmath81 will cancel , and so the degree at  @xmath349 of @xmath76 restricted to @xmath337 is zero .",
    "thus , to check that @xmath337 is a curve , it suffices to check in a neighborhood of a vertex  @xmath34 .",
    "we consider a linear function  @xmath76 on a neighborhood of  @xmath34 and let @xmath346 be the divisor on  @xmath20 as in lemma  [ lem : intersections - on - component ] .",
    "thus , by that lemma , @xmath350 has degree zero for all ridges  @xmath33 containing @xmath34 .",
    "however , by the definition of",
    "numerically faithful , such curves  @xmath31 generate all numerical classes of curves , so @xmath346 is a numerically trivial divisor .",
    "on the other hand , by the definition of the specialization @xmath337 and construction  [ const : pl - on - curve ] , the degree of @xmath76 restricted to @xmath337 at  @xmath34 will be : @xmath351 by restricting the intersection to @xmath20 and then using the definition of  @xmath346 .",
    "since @xmath346 is trivial , the degree of this intersection is zero .",
    "therefore , @xmath337 is a curve .",
    "we now prove the following refinement of theorem  [ thm : intersect - intro ] .",
    "[ thm : intersect ] suppose that @xmath3 is a numerically faithful strict degeneration with @xmath0 its tropical complex .",
    "if @xmath4 is a divisor on @xmath11 , then its specialization @xmath291 is a @xmath281-cartier divisor .",
    "in addition , for any curve  @xmath5 on  @xmath11 , we have an equality of intersection numbers : @xmath352 .",
    "first we want to show that @xmath291 is a @xmath281-cartier divisor .",
    "it suffices to check this in a neighborhood of each vertex  @xmath34 of  @xmath0 .",
    "we let @xmath288 be the closure of  @xmath4 in  @xmath3 .",
    "then @xmath353 is a divisor in  @xmath20 and is numerically equivalent to some rational linear combination @xmath354 over the edges  @xmath81 incident to  @xmath34 .",
    "if we let @xmath76 be the pl function on a neighborhood of  @xmath34 with slope along an edge  @xmath81 given by @xmath342 , then , @xmath4 is numerically equivalent to @xmath346 from lemma  [ lem : intersections - on - component ] , which therefore shows that on a sufficiently small neighborhood  @xmath238 , we have @xmath355 .",
    "thus , @xmath291 is a @xmath281-cartier divisor .    by the definition of @xmath337 ,",
    "the degree at  @xmath34 of  @xmath76 restricted to @xmath337 is : @xmath356 by restricting the intersection to @xmath20 and then using the numerical equivalence from the previous paragraph . since the intersection number of @xmath4 with @xmath5",
    "is preserved under specialization  ( * ? ? ?",
    "20.3(b ) ) , we can recover that intersection number by taking the sum of  ( [ eq : local - intersection ] ) over all vertices , which is the total degree @xmath357 .",
    "in this section , we generalize to tropical complexes coming from certain non - strict degenerations , meaning that the special fiber is not necessarily simple normal crossing .",
    "we instead work with degenerations whose self - intersections have no monodromy , which is a condition we explain below .",
    "let @xmath3 be a possibly non - strict degeneration .",
    "at any point in the special fiber of  @xmath3 , the completed local ring is isomorphic to @xmath358 / \\langle x_0 \\cdots x_k - \\pi\\rangle$ ] , where @xmath67 is a uniformizer in  @xmath9 .",
    "we define a codimension  @xmath14 stratum to be the closure of a connected component of the locus in  @xmath3 where the completed local ring is isomorphic to @xmath359 / \\langle x_0 \\cdots x_k - \\pi \\rangle$ ] , in which case the stratum is formally locally defined by the vanishing of the coordinates @xmath360 .",
    "we say that the _ self - intersections of  @xmath3 have no monodromy _ if on each stratum , the conormal bundle splits into @xmath1-dimensional subbundles , each of which is defined by a distinct @xmath361 .",
    "this is equivalent to saying that the monodromy group of each stratum as defined in  ( * ? ? ?",
    "6.2.2 ) is trivial .",
    "strict degenerations always have self - intersections with no monodromy , since , in that case , the @xmath361 define distinct components , and also if the strata are simply connected .",
    "we emphasize that monodromy here refers to monodromy on the strata of the special fiber and not the base dvr , as usually considered when people study the monodromy with respect to degenerations .",
    "for the rest of this section , we assume that @xmath3 is a degeneration whose self - intersections have no monodromy . to each codimension",
    "@xmath14 stratum , we associate a @xmath14-dimensional simplex  @xmath24 and then use @xmath26 to denote the stratum . by our assumption on monodromy , we can choose the formal local coordinates @xmath360 at each point of @xmath26 in a way that is globally consistent .",
    "thus , we glue the @xmath27th face of the simplex  @xmath24 to the simplex @xmath86 such that @xmath211 is the stratum containing  @xmath26 on which the coordinate @xmath361 is allowed be non - zero . in this way",
    ", we obtain the dual complex  @xmath0 of  @xmath3 .",
    "the dual complex  @xmath0 has one vertex  @xmath34 for each component @xmath20 of the special fiber .",
    "however , the self - intersections mean that there may be simplices for which @xmath34 is a vertex in multiple ways . because of the self - intersections a stratum  @xmath26 may not be smooth , but we write @xmath362 for its normalization , which is always smooth . as in definition",
    "[ def : refined ] , we define @xmath363 to be the union of @xmath211 for all simplices @xmath86 containing @xmath24 and we also let @xmath364 denote the preimage of @xmath84 in @xmath362 . then @xmath365 is also a normal crossing divisor whose self - intersections have no monodromy , and the dual complex of  @xmath84 is equal to @xmath48 . if @xmath52 is a simplex of @xmath48 , we will write @xmath366 for the corresponding stratum in @xmath365 .",
    "we now fix a ridge @xmath33 of  @xmath0 and a vertex  @xmath34 in its parametrization  @xmath218 for which we want to describe the structure constant @xmath37 to obtain a weak tropical complex . when @xmath290 , we take @xmath37 to be the degree of  @xmath33 , so we now assume that @xmath12 is at least  @xmath7 .",
    "we take @xmath38 to be the image in  @xmath0 of the @xmath40-dimensional face of  @xmath218 opposite @xmath34 , which is equivalent to having @xmath367 such that @xmath368 .",
    "as noted above , @xmath52 corresponds to a divisor  @xmath369 in the surface @xmath39 , and we use @xmath370 to denote its self - intersection number in the following formula : @xmath371 note that , the set of loops referenced in the second term of  ( [ eq : alpha - non - strict ] ) is in bijection with the nodes of @xmath369 .",
    "intuitively , each node contributes a multiplicity of  @xmath7 which is already seen by the dual complex , and the purpose of @xmath37 is to reflect the intersection numbers not evident from the dual complex    for simple normal crossing divisors , each stratum @xmath26 is smooth and so @xmath26 is equal to its normalization @xmath362 .",
    "moreover , in the previous paragraph , the vertex  @xmath52 of @xmath62 can be canonically identified with  @xmath33 and so that @xmath372 , and since @xmath373 has no self - intersections , ( [ eq : alpha - non - strict ] ) agrees with the description of @xmath37 from the beginning of section  [ sec : complexes ] .",
    "the fact used repeatedly in that section is that the intersection number @xmath374 in the degeneration  @xmath3 is equal to @xmath375 . in the non - strict case",
    ", we have additional terms coming from self - intersections .    [",
    "prop : intersection - non - strict ] let @xmath3 be a degeneration whose self - intersections have no monodromy and let @xmath0 be the dual complex of  @xmath3 . if @xmath34 is a vertex of  @xmath0 and @xmath33 is a ridge , then we have the following formula for the intersection product : @xmath376 where the summation is over vertices  @xmath377 of the parametrizing simplex of  @xmath33 mapping to  @xmath34 .",
    "we use blow - ups of  @xmath3 to remove some of the self - intersections and then use the projection formula .",
    "although , after blowing - up , the special fiber will no longer be reduced , it will still be normal crossing , and so we will keep track of the components using the @xmath0-complex of this special fiber , which will be a subdivision of the original dual complex  @xmath0 .",
    "we let @xmath126 be the blow - up of @xmath3 at each of its @xmath13-dimensional strata .",
    "combinatorially , this means we subdivide each facet  @xmath254 by adding a single vertex  @xmath378 in the center of  @xmath254 and then replacing @xmath254 with simplices which connect @xmath378 to each face of  @xmath254 to get  @xmath379 , the dual complex of the special fiber of  @xmath126 .",
    "if @xmath24 is a simplex of @xmath379 , we use @xmath380 and @xmath381 to denote the corresponding stratum of  @xmath126 and its normalization , respectively .",
    "since we ve blown up any nodes contained in a curve  @xmath31 , any curve @xmath382 is smooth , isomorphic to @xmath383 .    by the projection formula",
    ", we can compute the degree of @xmath374 as the degree of @xmath384 , where @xmath385 .",
    "the pullback of @xmath20 we have all the exceptional divisors of blow - ups at centers contained in  @xmath20 , so : @xmath386 = [ c_v ' ] + \\sum_{u \\in { \\operatorname{link}}_\\delta(v)_{n-1 } } \\big[c_{v_{f(u)}}'\\big],\\ ] ] where @xmath387 denotes the facet of  @xmath0 corresponding to  @xmath75 .",
    "since @xmath382 is not contained in any @xmath388 , their intersection number is equal to the number of facets of  @xmath379 containing both @xmath33 and  @xmath378 , which is equal to the number of faces of the parametrizing simplex  @xmath389 identified with  @xmath33 .",
    "thus , the contribution from the second term of  ( [ eq : pullback ] ) to the intersection with @xmath382 is : @xmath390\\bigg ) \\cdot c_{r } ' = \\ # \\{u \\in { \\operatorname{link}}_\\delta(v)_{n-1 } , \\tilde r \\in \\tilde f(u)_{n-1 } \\mid",
    "\\tilde r \\mapsto r\\},\\ ] ] where @xmath391 is the parametrizing simplex of the facet corresponding to  @xmath75 and @xmath218 is a face of that facet required to map to  @xmath33 . we can split the count in  ( [ eq : exceptional - intersection ] ) into two parts based on whether or not the vertex corresponding to  @xmath34 is contained in  @xmath218 : @xmath392\\bigg ) \\cdot c_{r } ' = ( \\deg r)\\#\\{\\tilde v \\in \\tilde r \\mid \\tilde v \\mapsto v\\ } \\\\",
    "+ \\#\\{t \\in { \\operatorname{link}}_\\delta(r ) \\mid { \\operatorname{opp}}(t ) = v\\}\\end{gathered}\\ ] ]    on the other hand , a component  @xmath393 either contains @xmath394 or does nt intersect it at all , so we can not compute the intersection number based on @xmath0 alone .",
    "let @xmath38 be an @xmath40-dimensional face of  @xmath218 and let @xmath107 be the opposite vertex .",
    "we identify @xmath38 with its image in @xmath0 ( and @xmath379 ) , but we let @xmath395 be the vertex of its link corresponding to  @xmath33 in the specified way .",
    "thus , @xmath396 is a smooth curve , isomorphic to @xmath382 , in @xmath397 , which is the blow - up of @xmath398 at all of its @xmath13-dimensional strata .",
    "since blowing up a smooth point of @xmath399 changes its self - intersection by  @xmath1 and blowing up a nodal point changes it by  @xmath109 , we get : @xmath400 where @xmath401 is the degree of @xmath75 in the graph @xmath62 , which is the same as @xmath69 since @xmath33 is the ridge corresponding to  @xmath75 .",
    "we let @xmath402 denote the normal bundle of @xmath396 in @xmath397 .",
    "the map from @xmath396 to  @xmath126 is an isomorphism onto its image and so we get a map of vector bundles from  @xmath402 to the normal bundle of @xmath394 in  @xmath126 . by the normal crossing property , this vector bundle map is an injection and if we allow @xmath38 to vary , then we get a decomposition of the normal bundle @xmath403 as a direct sum @xmath404 over the @xmath40-dimensional simplices  @xmath38 of  @xmath218 .",
    "we set @xmath405 equal to the dual @xmath406 , where @xmath377 is the vertex of @xmath218 opposite the face  @xmath38 .",
    "then , @xmath407 is a subbundle of the ideal sheaf of  @xmath394 restricted to  @xmath394 , and each @xmath405 is the linearization of one of the analytic coordinate functions in the definition of normal crossing singularities .",
    "thus , if @xmath408 is the ideal sheaf of the divisor @xmath409 , then @xmath410 thus , using  ( [ eq : self - intersection ] ) , @xmath411    finally , by the projection formula and  ( [ eq : pullback ] ) , the desired intersection number @xmath374 is the sum of the expressions in ( [ eq : exceptional - intersection2 ] ) and  ( [ eq : intersection ] ) . the first term of the former and the second term of the latter cancel , yielding the expression from the proposition statement .",
    "[ cor : weak - non - strict ] for any degeneration  @xmath3 whose self - intersections have no monodromy , the dual complex  @xmath0 and structure constants @xmath37 as at the beginning of this section define a weak tropical complex .    as in the proof of proposition",
    "[ prop : complex - degeneration ] , we consider the special fiber as a divisor , and its intersection with a fixed curve  @xmath31 . by proposition",
    "[ prop : intersection - non - strict ] and the linearity of intersection numbers , the degree of this intersection is : @xmath412 however , @xmath413 is a principal divisor and thus has degree  @xmath13 when intersected with any curve  @xmath394 , so equation  ( [ eq : constraint ] ) follows immediately and @xmath0 is a weak tropical complex .",
    "the definition of robustness generalizes to non - strict degenerations by substituting the normalization @xmath362 and its divisor  @xmath364 into definition  [ def : refined ] wherever @xmath26 and @xmath84 appeared . for",
    "numerically faithful , we use definition  [ def : numerically - faithful ] , except that we similarly substitute @xmath414 , and the relevant divisors and curves on @xmath414 are @xmath415 as @xmath52 ranges over the vertices and @xmath40-dimensional simplices , respectively , of @xmath51 .",
    "similarly , propositions  [ prop : hodge - robustness ] and  [ prop : trop - weil ] also hold for non - strict degenerations :    [ prop : hodge - robustness - non - strict ] suppose @xmath3 is a degeneration whose self - intersections have no monodromy and let @xmath0 be its weak tropical complex .",
    "then @xmath0 is a tropical complex if and only if @xmath3 is robust in dimension  @xmath7 .",
    "let @xmath38 be a ridge of  @xmath0 . as stated above",
    ", the dual complex of @xmath416 is equal to @xmath217 .",
    "moreover , by ( [ eq : local - intersection - matrix ] ) and  ( [ eq : alpha - non - strict ] ) , the diagonal entries of the local intersection matrix  @xmath45 at  @xmath38 are the self - intersections of the components of  @xmath417 .",
    "thus , @xmath45 is the intersection matrix of the components of  @xmath417 on the smooth surface  @xmath39 , at which point the rest of the proof of proposition  [ prop : hodge - robustness ] applies , adding a tilde to  @xmath39 and  @xmath91 wherever they appear .",
    "[ prop : trop - weil - non - strict ] let @xmath3 be a degeneration whose self - intersections have no monodromy and of relative dimension at least  @xmath7 .",
    "if @xmath3 is robust in dimension  @xmath7 , then any divisor  @xmath4 on @xmath11 specializes to a weil divisor  @xmath291 .",
    "the proof of proposition  [ prop : trop - weil ] follows with some modifications , which we describe .",
    "recall that we work locally at an @xmath40-dimensional simplex  @xmath38 and @xmath293 is the number of vertices of @xmath62 .",
    "as before , we assume that @xmath291 is not @xmath281-cartier in a neighborhood of the interior of  @xmath38 and construct vectors @xmath418 and @xmath419 .",
    "these vectors define divisors @xmath305 and  @xmath304 on the smooth surface  @xmath398 by taking linear combinations of the curves @xmath369 for @xmath420 . as in the proof of proposition",
    "[ prop : hodge - robustness - non - strict ] , the intersections between these curves is given by the matrix @xmath45 .",
    "on the other hand , we have the pullback @xmath421 along the map @xmath422 . by the projection formula",
    ", the intersection of @xmath423 with a curve @xmath369 has the same degree as @xmath424 , where @xmath33 is the ridge corresponding to  @xmath52 .",
    "thus , if @xmath296 \\in { \\mathbb q}^v$ ] is the vector recording the multiplicity of @xmath291 along the ridges containing  @xmath38 , then @xmath425 \\cdot \\mathbf v$ ] .",
    "then , as in the proof of proposition  [ prop : trop - weil ] , we would get a contradiction to the hodge index theorem using the divisors @xmath426 , @xmath304 , and @xmath305 , and thus , @xmath291 is @xmath281-cartier ."
  ],
  "abstract_text": [
    "<S> we introduce tropical complexes , which are @xmath0-complexes together with additional numerical data . on a tropical complex , </S>",
    "<S> we define divisors and linear equivalence between divisors , analogous to the notions for algebraic varieties , and generalizing previous work for graphs . </S>",
    "<S> we prove a comparison theorem showing that divisor - curve intersection numbers agree under certain conditions . </S>"
  ]
}