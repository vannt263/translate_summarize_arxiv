{
  "article_text": [
    "rabin s tree theorem states , via an automata - theoretic proof , the decidability of the monadic second order ( short : @xmath0 ) theory of the complete binary tree .",
    "it allows to derive the decidability of seemingly very different theories ( e.g. , the @xmath0-theory of the real line where set quantification is restricted to closed sets  @xcite ) .",
    "its importance is stressed by seese s result that any class of graphs of bounded degree with a decidable @xmath0-theory has bounded tree - width ( i.e. , is `` tree - like '' )  @xcite .    in @xcite ,",
    "shelah reports a generalization of rabin s tree theorem that was proved by shelah and stupp .",
    "the idea is to start with a structure @xmath1 and to consider the tree whose nodes are the finite words over the universe of  @xmath1 together with the prefix order on these words .",
    "then the immediate successors of any node in this tree can naturally be identified with the elements of the structure @xmath1  hence they carry the relations of @xmath1 .",
    "the resulting tree with additional relations is called _ shelah - stupp - iteration_. the above mentioned result of shelah and stupp states that the @xmath0-theory of the shelah - stupp - iteration can be reduced to the @xmath0-theory of the base structure  @xmath1 .",
    "if @xmath1 is the two - elements set , then rabin s tree theorem follows .",
    "a further extension is attributed to muchnik  @xcite who added a unary clone predicate to shelah and stupp s iteration resulting in the _ muchnik - iteration_. this clone predicate states that the last two letters of a word are the same .",
    "this allows , e.g. , to define the unfolding of a rooted graph in its muchnik - iteration  @xcite .",
    "muchnik s theorem then gives a reduction of the mso - theory of the muchnik - iteration to the mso - theory of the base structure .",
    "the proof was not published by muchnik himself , but , using automata - theoretic methods , walukiewicz showed that the reduction in muchnik s theorem is even uniform ( i.e. , independent from the concrete base structure )  @xcite .",
    "since , as mentioned above , the unfolding of a rooted graph can be defined in the muchnik - iteration , the mso - theory of this unfolding can be reduced to that of the graph  @xcite .",
    "this result forms the basis for caucal s hierarchy  @xcite of infinite graphs with a decidable mso - theory .",
    "walukiewicz s automata - theoretic proof ideas have been shown to work for the muchnik - iteration and stronger logics like courcelle s counting mso and guarded second - order logic by blumensath & kreutzer  @xcite .    in @xcite , we asked for a first - order version of muchnik s result  and failed .",
    "more precisely , we constructed structures with a decidable first - order theory whose muchnik - iteration has an undecidable first - order theory . as it turns out , the only culprit is muchnik s clone predicate since , on the positive side , we were able to uniformly reduce the first - order theory ( and even the monadic chain theory where set variables range over chains , only ) of the shelah - stupp - iteration to the first - order theory of the base structure .",
    "the aim of this paper is to clarify the role of weak monadic second order logic  @xmath2 in the context of shelah - stupp- and muchnik - iteration .",
    "we first define infinitary versions of these iterations that contain , in addition to the finite words , also @xmath3-words . on the positive side , we prove a rather satisfactory relation between the theories of the infinitary shelah - stupp - iteration and the base structure .",
    "more precisely , the shelah - stupp result together with some techniques from  @xcite allows to uniformly reduce the @xmath4-theory of the infinitary shelah - stupp - iteration ( where set quantification is restricted to closed sets ) to the mso - theory of the base set .",
    "our result from @xcite ensures that shelah - stupp - iteration is @xmath5-compatible in the sense of courcelle ( i.e. , the @xmath5-theory of the infinitary shelah - stupp - iteration can be reduced uniformly to the @xmath5-theory of the base structure ) .",
    "our new positive result states that shelah - stupp - iteration is also @xmath2-compatible . to obtain this result",
    ", one first observes that the finiteness of a set in the shelah - stupp - iteration is definable in @xmath6 ( where quantification is restricted to finite unions of chains ) , hence the @xmath2-theory of the shelah - stupp - iteration can be reduced to its @xmath6-theory . for this logic , we then prove a result analogous to rabin s basis theorem : any consistent @xmath6-property in the shelah - stupp - iteration of a finite union of chains ( i.e. , of a certain set of words over the base structure ) has a witness that can be accepted by a small automaton . but an automaton over a fixed set of states can be identified with its transition matrix , i.e. , with a fixed number of finite sets in the base structure .",
    "we then prove that @xmath6-properties of the language of an automaton can effectively be translated into @xmath2-properties of the transition matrix .    on the negative side",
    ", we prove that infinitary muchnik - iteration is not @xmath2-compatible .",
    "namely , there is a tree @xmath7 with decidable @xmath2-theory such that for any set @xmath8 of natural numbers , there exists an @xmath2-equivalent tree @xmath9 such that @xmath8 can be reduced to the @xmath2-theory of the infinitary muchnik - iteration of  @xmath9 .",
    "this proof uses the fact that the existence of an infinite branch in a tree is not expressible in  @xmath2 , but it is a first - order ( and therefore a @xmath2- ) property of the infinitary muchnik - iteration .",
    "a _ ( relational ) signature _ @xmath10 consists of finitely many constant and relation symbols ( together with the arity of the latter ) ; a _ purely relational signature _ does not contain any constant symbols .",
    "formulas use _ individual _ and _ set variables _ , usually denoted by small and capital , resp . , letters from the end of the alphabet . _ atomic formulas _",
    "are @xmath11 , @xmath12 , and @xmath13 where @xmath14 is an @xmath15-ary relation symbol from @xmath10 , @xmath16 are individual variables or constant symbols , and @xmath17 is a set variable .",
    "_ formulas _ are obtained from atomic formulas by conjunction , negation , and quantification @xmath18 for @xmath19 an individual or a set variable .",
    "a _ sentence _ is a formula without free variables .",
    "the satisfaction relation @xmath20 between a @xmath10-structure  @xmath1 and formulas is defined as usual . for two @xmath10-structures @xmath1 and @xmath21",
    ", we write @xmath22 if , for any sentence @xmath23 of quantifier depth at most  @xmath24 , we have @xmath25 iff @xmath26 . if @xmath1 and @xmath21 agree on all first - order formulas ( i.e. , formulas without set quantification ) of quantifier depth at most @xmath24 , then we write @xmath27 .",
    "let @xmath28 be a partially ordered set .",
    "a set @xmath29 is a _ chain _",
    "if @xmath30 is linearly ordered , it is a _ multichain _ if @xmath8 is a finite union of chains .",
    "an element @xmath31 is a _ branching point _ if @xmath32 is nonempty and does not have a least element .",
    "we will also consider different restrictions of the satisfaction relation @xmath20 where set variables range over certain subsets , only .",
    "in particular , we will meet the following restrictions .",
    "* set quantification can be restricted to finite sets , i.e. , we will discuss weak monadic second order logic .",
    "the resulting satisfaction relation is denoted @xmath33 and the equivalence of structures @xmath34 .",
    "* set quantification can be restricted to chains ( where we assume a designated binary relation symbol @xmath35 in @xmath10 ) which results in @xmath36 and @xmath37 , cf .",
    "thomas  @xcite .",
    "* @xmath38 etc .",
    "refer to the restriction of set quantification to multichains .",
    "* the superscript @xmath39 denotes that set variables range over closed sets , only ( where we associate a natural topology to any @xmath10-structure ) , cf .",
    "rabin  @xcite .",
    "let @xmath40 be some transformation of @xmath10-structures into @xmath41-structures , e.g. , transitive closure .",
    "a very strong relation between the @xmath42-theory of @xmath1 and the @xmath43-theory of @xmath44 is the existence of _ a single _ computable function @xmath45 that reduces the @xmath43-theory of @xmath44 to the @xmath42-theory of @xmath1 _ for any @xmath10-structure  @xmath1_. as shorthand for this fact , we say `` the transformation @xmath40 is @xmath46-compatible '' or , slightly less precise `` the @xmath43-theory of @xmath44 is _ uniformly reducible _ to the @xmath42-theory of @xmath1 . ''",
    "@xmath47-compatible transformations are simply called @xmath43-compatible .",
    "any @xmath0-transduction is @xmath0-compatible  @xcite and finite set interpretations are @xmath48-compatible  @xcite .",
    "feferman & vaught showed that any generalized product is fo - compatible  @xcite .",
    "finally , any generalized sum is @xmath0-compatible by shelah  @xcite .",
    "let @xmath49 be a ( not necessarily finite ) alphabet . with @xmath50",
    "we denote the set of all finite words over  @xmath49 , @xmath51 is the set of infinite words , and @xmath52 .",
    "the prefix relation on finite and infinite words is @xmath35 .",
    "the set of finite prefixes of a word @xmath53 is denoted @xmath54 , if @xmath55 , then @xmath56 . for @xmath57 and @xmath58",
    "let @xmath59 denote the left - quotient of @xmath60 with respect to  @xmath61 .",
    "let @xmath10 be a relational signature and let @xmath62 be a structure over the signature @xmath10 .",
    "the _ infinitary shelah - stupp - iteration @xmath63 of @xmath1 _ is the structure @xmath64 where , for @xmath65 , @xmath66 the _ ( finitary ) shelah - stupp - iteration @xmath67 _ is the restriction of @xmath63 to the set of finite words  @xmath50 .",
    "[ e - tree ] suppose the structure @xmath1 has two elements @xmath68 and @xmath69 and two unary relations @xmath70 and @xmath71",
    ". then @xmath72 and @xmath73 .",
    "hence the finitary shelah - stupp - iteration  @xmath67 can be visualized as a complete binary tree with unary predicates telling whether the current node is the first or the second son of its father .",
    "in addition , the root @xmath74 is a constant of the shelah - stupp - iteration @xmath67 .",
    "furthermore , the infinitary shelah - stupp - iteration @xmath63 adds leaves to this tree at the end of any branch .",
    "since this allows to define @xmath75 in @xmath63 , the unrestricted mso - theory of @xmath63 is undecidable .",
    "[ e - rsm ] a _ recursive state machine _ @xmath76 ( cf .",
    "@xcite ) over a finite alphabet @xmath77 is a tuple @xmath78 where each _ component state machine _ @xmath79 consists of the following pieces    * a set @xmath80 of _ nodes _ and a set @xmath81 of _ boxes _ ( the only essential difference between this definition and the original one from @xcite is that these sets are not required to be finite ) . * a labeling @xmath82 that assigns to every box the index of one of the component machines @xmath83 . * a tuple of sets of _ interface nodes _ @xmath84 . *",
    "a transition relation @xmath85 for some fixed finite alphabet @xmath77 .    in the following , we assume the sets @xmath77 , @xmath81 and @xmath86 mutually disjoint .",
    "then @xmath87 is the set of boxes of @xmath76 , @xmath88 the set of nodes , @xmath89 the set of @xmath90 interface nodes , and @xmath91 is a function from @xmath92 into @xmath93 .",
    "finally , let @xmath94 denote the union of all the local transition relations .",
    "a _ state _ of @xmath76 is a tuple @xmath95 where @xmath96 and @xmath97 are boxes and @xmath98 is a node .",
    "the set of all states is denoted @xmath99 .",
    "when the recursive state machine @xmath76 is in state @xmath100 , then the control is with the component machine no .",
    "global moves of the machine come in four forms : ( a ) the component machine @xmath102 moves from one node to another , ( b ) it moves from a node to a box @xmath103 which transfers control to the component machine no .",
    "@xmath104 , ( c ) it returns control to the calling machine no .",
    "@xmath105 which moves into some node , or ( c ) it returns control to the calling machine no .",
    "@xmath105 that makes a move into another box @xmath103 and therefore transfers control to @xmath106 .",
    "this defines a labeled transition system @xmath107 , the _ unfolding of  @xmath76_. this unfolding is a relational structure that we want to define in the shelah - stupp - iteration of the recursive state machine  @xmath76 . for this to work",
    ", we first have to transform  @xmath76 into a relational structure over some signature  @xmath10 .    for @xmath108 , we consider the following sets : @xmath109 then the following relational structure @xmath1 encodes the recursive state machine  @xmath76 : @xmath110    then the unfolding of  @xmath76 can be defined in the shelah - stupp - iteration of  @xmath1 .",
    "for this , one constructs @xmath5-formulas that ( 1 ) hold true of a word @xmath111 iff @xmath112 is a state and ( 2 ) hold true of a pair of states @xmath113 iff @xmath114 .",
    "[ l - monoids ] * ( cf .",
    "@xcite ) * the shelah - stupp iteration allows to reduce the cayley graph of a free product to the cayley graphs of the factors .",
    "let @xmath115 be monoids finitely generated by @xmath116 for @xmath117 and let @xmath118 denote the rooted cayley graph of @xmath119 .",
    "then the cayley graph @xmath120 of the free product @xmath121 of these monoids can be defined in the shelah - stupp iteration of the disjoint union of the cayley graphs  @xmath122 . for this to work ,",
    "let @xmath123 be the disjoint union of the monoids @xmath119 and consider the structure @xmath124 where @xmath125 is the set of units .",
    "then a word @xmath126 belongs to the direct product @xmath127 iff the following holds in the shelah - stupp iteration of @xmath76 : @xmath128 where @xmath129 denotes the immediate successor relation of the partial order @xmath35 . for @xmath130 and @xmath131 ,",
    "we have @xmath132 ( i.e. , @xmath133 ) iff the shelah - stupp iteration satisfies @xmath134    muchnik introduced the additional unary _ clone predicate _ @xmath135 .",
    "the extension of the shelah - stupp - iterations by this clone predicate will be called _ finitary and infinitary muchnik - iteration _ @xmath136 and @xmath137 , resp .",
    "courcelle and walukiewicz @xcite showed that the unfolding of a directed rooted graph  @xmath138 can be defined in the muchnik iteration @xmath139 of  @xmath138 .    to simplify notation",
    ", we will occasionally omit the word `` finitary '' and just speak of the shelah - stupp- and muchnik - iteration .",
    "rabin s tree theorem  @xcite states the decidability of the monadic second order theory of the complete binary tree . as a _",
    "corollary _ of his proof technique by tree automata , one obtains rabin s basis theorem  ( * ? ? ?",
    "* theorem 26 ) : let @xmath23 be a formula with free variables @xmath140 and let @xmath141 be regular languages such that the binary tree satisfies @xmath142",
    ". then it satisfies @xmath143 where @xmath144 is obtained from @xmath23 by restricting all quantifications to regular sets . to obtain this basis theorem",
    ", it suffices to show that validity of @xmath145 implies the existence of a regular set @xmath146 such that @xmath147 holds true in the binary tree .",
    "this is precisely what this section shows in our context of @xmath6 and the shelah - stupp - iteration  @xmath67 .",
    "even more , we will not only show that the set @xmath146 can be chosen regular , but we will also bound the size of the automaton accepting it .    _ throughout this section , @xmath10 denotes some purely relational signature . _      for @xmath148 ,",
    "let @xmath149 be the extension of the signature @xmath150 by @xmath151 constants and @xmath152 unary relations .",
    "using hintikka - formulas ( see @xcite for the definition and properties of these formulas ) one can show that for any of the signatures @xmath149 and @xmath153 , there are only finitely many equivalence classes of  @xmath154 . an upper bound @xmath155 for the number of equivalence classes of @xmath154 on formulas over the signature @xmath156 can be computed effectively .",
    "now let @xmath157 be some @xmath10-structure .",
    "for @xmath58 , let @xmath158 denote the @xmath159-structure @xmath160 where    * the relation @xmath161 is the restriction of @xmath35 to @xmath162 and * @xmath163 is the restriction of @xmath164 to @xmath165 .    for any @xmath166",
    ", the mapping @xmath167 with @xmath168 is an isomorphism  this is the reason to consider @xmath163 and not the restriction of @xmath164 to @xmath162 .",
    "similarly , the @xmath169-structure @xmath170 is defined for @xmath171 with @xmath172 . here , again , @xmath163 is the restriction of @xmath164 to @xmath173 .",
    "frequently , we will consider the structure @xmath67 together with some additional unary predicates @xmath174 .",
    "as for the plain structure @xmath67 , we will also meet the restriction of @xmath175 to the set @xmath162 , i.e. , the structure @xmath176 . to simplify notation ,",
    "this will be denoted @xmath177 ; the structure @xmath178 is to be understood similarly .",
    "* example  [ e - tree ] ( continued ) . * in the case of example  [ e - tree ] , @xmath158 is just the subtree rooted at the node  @xmath61 . on the other hand",
    ", @xmath179 is obtained from @xmath158 by deleting all descendants of @xmath180 and marking the node @xmath180 as a constant .",
    "thus , we can think of @xmath179 as a tree with a marked leaf .",
    "these _ special trees _ are fundamental in the work of gurevich & shelah @xcite and of thomas  @xcite .    in the following ,",
    "fix some @xmath181 .",
    "we then define the operations of product and infinite product of @xmath149-structures : if @xmath182 is a @xmath156-structure and @xmath183 a disjoint @xmath149-structure with @xmath184 , then their _ product _",
    "@xmath185 is a @xmath149-structure .",
    "it is obtained from the structure @xmath186 by identifying @xmath187 and  @xmath188 , taking the transitive closure of the partial orders , and extending the resulting structure by the list of constants @xmath189 .",
    "now let @xmath190 be disjoint @xmath156-structures with constants @xmath191 and @xmath192 for @xmath193 .",
    "then the _ infinite product _",
    "@xmath194 is a @xmath195-structure .",
    "it is obtained from the disjoint union of the structures @xmath190 by identifying @xmath192 and @xmath196 for any @xmath193 .",
    "the only constant of this infinite product is  @xmath197 .",
    "if @xmath198 for all @xmath193 , then we write simply @xmath199 for the infinite product of the structures  @xmath190 .",
    "standard applications of ehrenfeucht - frass - games ( see  @xcite ) yield :    [ p - ef ] let @xmath200 , @xmath201 be @xmath156-structures for @xmath193 and let @xmath202 be some @xmath203-structures such that @xmath204 for @xmath193 and @xmath205 . then @xmath206    [ r - typical - use ] we sketch a typical use of the above proposition in this section .",
    "let @xmath207 be some sufficiently long word .",
    "since @xmath154 has only finitely many equivalence classes , there exist words @xmath208 with @xmath209 and @xmath210 such that @xmath211 .",
    "hence we obtain @xmath212 ( this proves that every consistent property of a single element of @xmath67 is witnessed by some `` short '' word . )",
    "the last isomorphism does not hold for the muchnik - iteration since the clone predicate allows to express that the last letter of @xmath61 and the first letter of @xmath180 are connected by some edge in the graph  @xmath1 .",
    "we consider complete deterministic finite automata @xmath213 , called _ automata _ for short .",
    "its language is denoted @xmath214 .",
    "we will also write @xmath215 for @xmath216 .",
    "the _ transition matrix _ of @xmath217 is the tuple @xmath218 with @xmath219 .",
    "an _ automaton _ is a tuple @xmath213 where    * @xmath99 is a finite set of states , @xmath220 is the initial state , * @xmath92 is a finite alphabet , * @xmath221 is a transition function , and * @xmath222 is a set of accepting states .",
    "the _ language @xmath214 accepted by @xmath217 _ is the set of words @xmath223 with @xmath224 ( where we extended the function @xmath225 to a function from @xmath226 to @xmath99 in the usual way ) .    as explained above",
    ", we will use automata to describe subsets of the shelah - stupp iteration  @xmath67 , i.e. , the alphabet @xmath92 will always be a finite subset of the universe of  @xmath1 .",
    "these regular subsets have the following nice property whose proof is obvious .    let @xmath1 be a @xmath10-structure with universe @xmath49 and let @xmath213 be an automaton with alphabet @xmath227 .",
    "then , for any @xmath228 with @xmath229 , the mapping @xmath230 is an isomorphism from @xmath231 onto @xmath232 .    as a consequence ,",
    "the number of isomorphism classes of structures @xmath232 is finite .",
    "this fails in the muchnik - iteration even for @xmath233 : with @xmath234 and @xmath235 , we have @xmath236 iff @xmath237 since the structure @xmath238 can be defined in @xmath239 .",
    "while multichains in the shelah - stupp - iteration can be rather complicated , this section shows that , up to logical equivalence , we can restrict attention to `` simple '' multichains . here",
    ", `` simple '' means that they are regular and , even more , can be accepted by a `` small '' automaton .",
    "_ for the rest of this section , let @xmath157 be some fixed @xmath10-structure and @xmath240 . for @xmath241 , let @xmath242 be automata with @xmath243 such that @xmath244 is a multichain in the shelah - stupp iteration @xmath67 .",
    "write @xmath245 for the tuple of multichains @xmath246 . _    [ p - regular - chain - exists ] let @xmath247 be a chain",
    ". then there exist @xmath166 , @xmath248 , and @xmath249 such that @xmath250 for all @xmath251 and @xmath252 with @xmath253 .",
    "one shows the existence of @xmath254 such that @xmath255 is a chain , @xmath256 for all @xmath251 , @xmath257 , and @xmath258 .",
    "this uses arguments similar to those in remark  [ r - typical - use ] and ramsey s theorem .",
    "the result follows with @xmath259 , @xmath260 , @xmath261 , and @xmath262 .",
    "the above proposition shows that every consistent property of a chain is witnessed by some regular chain  @xmath263 . using the pigeonhole principle and arguments as in remark  [ r - typical - use ]",
    ", one can bound the lengths of @xmath61 and @xmath180 to obtain    [ p - chain - quantification ] let @xmath247 be a chain .",
    "then there exists an automaton @xmath264 with at most @xmath265 states such that @xmath266 is a chain and @xmath267 .",
    "it is our aim to prove a similar result for arbitrary multichains in place of the chain @xmath268 in the proposition above .",
    "certainly , in order to get a small automaton for a multichain , the branching points of this set have to be short words . again using arguments as in remark  [ r - typical - use ] , one obtains    [ l - small - set-1 ] let @xmath269 be a multichain .",
    "then there exists a multichain @xmath270 such that    * @xmath271 and * any branching point of @xmath272 has length at most @xmath273 .",
    "[ l - small - set-2 ] let @xmath8 be a multichain such that all branching points of @xmath8 have length at most @xmath274 .",
    "then there exists an automaton @xmath264 with at most @xmath275 many states such that @xmath266 is a multichain and @xmath276 .",
    "let @xmath277 and @xmath278 .",
    "the lemma is shown by induction on  @xmath279 .",
    "if @xmath280 , then @xmath8 is a chain , i.e. , the result follows from prop .",
    "[ p - chain - quantification ] .",
    "now let @xmath8 be a multichain such that any branching point has length at most  @xmath281 .",
    "by the induction hypothesis , for every @xmath282 , there exists an automaton @xmath283 with at most @xmath284 many states such that @xmath285 is a multichain and @xmath286    let @xmath287 be the equivalence relation on @xmath49 with @xmath288 if and only if    1 .",
    "@xmath289 for all @xmath290 and 2 .",
    "@xmath291 .",
    "let @xmath292 contain precisely one element  @xmath293 from any @xmath287-equivalence class .",
    "then the set @xmath294 is a multichain and can be accepted by some automaton  @xmath264 with the right number of states .",
    "then @xmath295 is obtained from @xmath296 by replacing any subtree @xmath297 with the equivalent structure @xmath298 for @xmath299 .",
    "hence , by prop .",
    "[ p - ef ] , @xmath300 .",
    "putting these two lemmas together , we obtain that , indeed , every consistent property of a multichain @xmath8 is witnessed by some multichain that can be accepted by some `` small '' automaton :    [ p - multichain ] let @xmath269 be some multichain .",
    "then there exists an automaton @xmath264 with at most @xmath301 many states ( where @xmath302 , @xmath277 ) such that @xmath266 is a multichain and @xmath303 .",
    "now a result analogous to rabin s basis theorem follows immediately    let @xmath1 be a @xmath10-structure , let @xmath23 be an @xmath6-formula in the language of the shelah - stupp - iteration @xmath67 with free variables @xmath140 and let @xmath304 be regular languages such that @xmath305 .",
    "then @xmath306 where @xmath307 denotes that set quantification is restricted to regular multichains .",
    "recall that rabin s basis theorem follows from his tree theorem whose proof , in turn , uses the effective complementation of rabin tree automata .",
    "while the above theorem is an analogue of rabin s basis theorem , the proof is more direct and does in particular not rest on any complementation of automata .",
    "the results of the previous section , as explained at the beginning , imply that quantification in an @xmath6-sentence can be restricted to regular sets that are accepted by `` small '' automata . in this section , we will use this insight to reduce the @xmath6-theory of the shelah - stupp - iteration to the @xmath2-theory of the base structure .    fix some @xmath10-structure @xmath1 with universe  @xmath49 , some finite set of states  @xmath99 , some initial state  @xmath309 , and some set of final states @xmath222 . then , for any automaton @xmath213 with @xmath310 , the language @xmath214 is a set in the shelah - stupp - iteration @xmath67 while its transition matrix is a tuple of finite sets in the base structure @xmath1 .",
    "_ the idea of our reduction is that @xmath6-properties of the set @xmath214 in the shelah - stupp - iteration  @xmath67 can ( effectively ) be translated into @xmath2-properties of the transition matrix  @xmath311 in the base structure  @xmath1 . _    in precisely this spirit",
    ", the following lemma expresses simple properties of the automaton @xmath217 and of the language @xmath214 in terms of @xmath5-properties of  @xmath312 .",
    "[ l - simple - formulas ] let @xmath222 be finite sets and @xmath220 . there exist formulas @xmath313 for @xmath314 and @xmath315 of @xmath5 with free variables @xmath316 for @xmath314 such that for any @xmath10-structure @xmath1 and any automaton @xmath213 with transition matrix  @xmath311 :    1 .",
    "@xmath317 iff there exists a word @xmath318 with @xmath319 .",
    "2 .   @xmath320 iff @xmath214 is a multichain .    the proof is based on the observation that ( 1 ) one only needs to search for a path of length at most @xmath321 and ( 2 ) that @xmath214 is a multichain iff no branching point belongs to some cycle .",
    "so far , we showed that simple properties of @xmath214 are actually @xmath5- ( and therefore @xmath2- ) properties of the transition matrix of @xmath217 .",
    "we now push this idea further and consider arbitrary @xmath6-properties of a tuple of languages @xmath322 .",
    "in addition , it is convenient not to consider formulas as before , but to code individual variables by set variables . in the following proof",
    ", we will therefore use other formulas for the logic @xmath6 : atomic formulas are @xmath323 , @xmath324 and @xmath325 for @xmath326 a constant symbol , @xmath327 set variables , and @xmath14 an @xmath15-ary relation symbol .",
    "we define @xmath328 iff there are @xmath329 with @xmath330 .",
    "quantification now ranges over all multichains in the shelah - stupp - iteration  @xmath67 .",
    "[ t - reduction ] there is an algorithm with the following specification + input :    * @xmath181 , * finite sets @xmath331 and states @xmath332 for @xmath251 , * and a formula @xmath333 with free variables among @xmath174 in the language of the shelah - stupp - iteration @xmath67 .",
    "output :    a formula @xmath334 in the language of @xmath1 with free variables among @xmath335 for @xmath336 and @xmath251 with the following property :    if @xmath1 is a @xmath10-structure and @xmath337 are automata with @xmath338 for @xmath251 , then @xmath339    the proof proceeds by induction on the construction of the formula @xmath333 , we only sketch the most interesting part @xmath340 .",
    "set @xmath277 , @xmath341 , and @xmath342 .",
    "let @xmath1 be a @xmath10-structure and let @xmath343 be automata with @xmath243 and transition matrix  @xmath344 .",
    "then , by prop",
    ".  [ p - multichain ] , @xmath345 iff there exists an automaton  @xmath264 with  @xmath151 states such that @xmath346 using the induction hypothesis on @xmath347 and @xmath348 , this is the case if and only if there exist finite sets @xmath349 for @xmath350=\\{1,2,\\dots , k\\}$ ] such that    * @xmath351 forms the transition matrix of some automaton with alphabet @xmath92 * for some @xmath352 $ ] , the automaton @xmath353,b,1,t^{\\ell+1},f)$ ] * * accepts a multichain @xmath8 ( i.e. , @xmath354,1,f)}$ ] ) and * * this multichain satisfies @xmath347 ( i.e. , @xmath355),({\\overline}\\iota,1),({\\overline}f , f))}$ ] ) .",
    "since all these properties can be expressed in @xmath2 , the construction of @xmath334 is complete .    as an immediate consequence",
    ", we get a uniform version of shelah and stupp s theorem for the logics @xmath2 and @xmath6 :    [ t - stupp - iteration ] finitary shelah - stupp - iteration is @xmath308-compatible .",
    "@xmath356-compatibility of shelah - stupp - iteration @xcite can alternatively be shown along the same lines : one allows incomplete automata and proves an analogue of prop .",
    "[ p - chain - quantification ] for the logic @xmath357",
    ". then theorem  [ t - stupp - iteration ] can be shown for the pair of logics @xmath356 .",
    "our argument goes as follows : from a set @xmath359 , we construct a tree  @xmath9",
    ". the @xmath2-theory of this tree will be independent from  @xmath8 and @xmath8 will be @xmath5-definable in the infinitary muchnik - iteration @xmath360 .",
    "assuming @xmath358-compatibility of the infinitary muchnik - iteration , the set  @xmath8 will be reduced uniformly to the @xmath2-theory of @xmath9 . for @xmath361 ,",
    "this yields a contradiction .",
    "a _ tree _ is a structure @xmath362 where @xmath35 is a partial order on @xmath363 such that , for any @xmath364 , @xmath365 is a finite linear order and @xmath366 for all @xmath364 .",
    "we will consider the set @xmath367 of sequences in @xmath368 whose second components decrease .",
    "this set , together with the prefix relation @xmath35 , forms a tree @xmath369 with root @xmath74 that we also denote @xmath7 .",
    "nodes of the form @xmath370 are leaves of @xmath7 .",
    "any inner node of @xmath7 has infinitely many children ( among them , there are infinitely many leaves ) . furthermore , all the branches of @xmath7 are finite . even more , if @xmath371 is a node different from the root , then the branches passing through @xmath371 have bounded length .",
    "we will also consider the set @xmath372 where @xmath68 is an arbitrary symbol .",
    "together with the prefix relation , this yields another tree @xmath373 that we denote  @xmath374 . differently from @xmath7",
    ", it has an infinite branch , namely the set of all nodes @xmath375 for @xmath193 .    for two trees @xmath376 and",
    "@xmath311 and a node @xmath180 of @xmath376 , let @xmath377 denote the tree obtained from the disjoint union of @xmath376 and @xmath311 by identifying @xmath180 with the root of @xmath311 ( i.e. , the node @xmath180 gets additional children , namely the children of the root in @xmath311 ) .",
    "it is important for our later arguments that this operation transforms trees equivalent wrt .",
    "@xmath378 into equivalent structures .",
    "more precisely    [ p - ef2 ] let @xmath376 , @xmath311 , and @xmath379 be trees and @xmath380 such that @xmath381 .",
    "then @xmath382 for any node @xmath180 of  @xmath376 .    with @xmath383 , the set",
    "@xmath384 together with the prefix relation and the root , is considered as a tree that we denote @xmath385 .",
    "[ p - equivalent ] for any @xmath380 , we have @xmath386 .    the statement is shown by induction on  @xmath151 where the base case @xmath387 is trivial . to show @xmath388 , it suffices to prove for any formula @xmath389 of quantifier - depth at most  @xmath151 @xmath390 assuming @xmath391 , there exist @xmath193 and @xmath392 finite with @xmath393 .",
    "hence we have @xmath394 hence @xmath395 and therefore @xmath396 . using @xmath397",
    "( see complete paper for the proof ) , we obtain @xmath398 .",
    "conversely , one can argue similarly again using @xmath397 .",
    "this proves that the existence of an infinite path can not be expressed in weak monadic second order logic since @xmath374 has such a path and @xmath7 does not .",
    "using an idea from @xcite , the existence of an infinite path is a first - order property of the infinitary muchnik - iteration .",
    "the following lemma pushes this idea a bit further :    [ l - u ] let @xmath399 be a tree and let @xmath400 be the union of all infinite branches of @xmath311 .",
    "then the @xmath2-theory of @xmath401 is uniformly reducible to the @xmath2-theory of the infinitary muchnik - iteration @xmath402 of the tree  @xmath403 without the extra predicate .    for @xmath359 ,",
    "let @xmath404 and @xmath405 .",
    "then @xmath9 is obtained from the linear order @xmath406 by attaching the tree @xmath374 to elements from  @xmath8 and the tree @xmath7 to the remaining numbers .",
    "[ t - complicated ] for @xmath359 , we have @xmath407 for all @xmath380 , and @xmath8 can be reduced to the @xmath5-theory of the infinitary muchnik - iteration @xmath408 .    using ehrenfeucht - frass - games and prop .",
    "[ p - equivalent ] , one obtains @xmath409    for the second statement , it suffices , by lemma  [ l - u ] , to reduce  @xmath8 to the first - order theory of @xmath410 where @xmath411 is the set of nodes of the tree @xmath9 that belong to some infinite branch .",
    "if a transformation @xmath40 is @xmath358-compatible , then for any structure  @xmath1 , the @xmath5-theory of  @xmath44 can be reduced to the the @xmath2-theory of  @xmath1 .",
    "contrary to this , the above theorem states that the @xmath5-theory of the infinitary muchnik - iteration can be arbitrarily more complicated than the @xmath2-theory of the base structure .",
    "hence we obtain    infinitary muchnik - iteration is not @xmath358-compatible .",
    "table  [ tab : sum ] summarizes our knowledge about the compatibility of muchnik s and shelah & stupp s iteration .",
    "it consists of four subtables dealing with finitary and infinitary muchnik - iteration and with finitary and infinitary shelah - stupp - iteration .",
    "the sign + in cell @xmath46 of a subtable denotes that the respective iteration is @xmath46-compatible ,  denotes the opposite .",
    "minus - signs without further marking hold since the base structure can be defined in any of its iterations .",
    "capital letters denote references : ( a )  is @xcite , ( b )  @xcite , ( c )  ( * ? ? ? * prop .",
    "3.4 ) , ( d )  ( * ? ? ?",
    "* thm .  4.10 ) ,",
    "( e )  theorem  [ t - stupp - iteration ] , ( f )  theorem  [ t - complicated ] , and ( g ) since the base structure is definable in its iteration and finiteness of a set is no mso - property .",
    "small letters denote that the result follows from theorem  [ t - fin - inf ] below and some further `` simple '' arguments from the result marked by the corresponding capital letter .",
    "[ t - fin - inf ] let @xmath46 be any of the pairs of logics @xmath412 , @xmath413 , or @xmath414 .",
    "there exists a computable function @xmath45 such that , for any @xmath10-structure @xmath1 , @xmath45 reduces the @xmath43-theory of @xmath137 to the @xmath415-theory of @xmath136 .",
    "note the main difference between muchnik- and shelah - stupp - iteration : the latter is @xmath43-compatible for all relevant logics while only @xmath0 behaves that nicely with respect to ( infinitary ) muchnik - iteration    a referee proposed to also consider the variant of mso where set quantification is restricted to countable sets . as to",
    "whether muchnik iteration is compatible with this logic is not clear at the moment ."
  ],
  "abstract_text": [
    "<S> we investigate the relation between the theory of the iterations in the sense of shelah - stupp and of muchnik , resp . , and the theory of the base structure for several logics . </S>",
    "<S> these logics are obtained from the restriction of set quantification in monadic second order logic to certain subsets like , e.g. , finite sets , chains , and finite unions of chains . </S>",
    "<S> we show that these theories of the shelah - stupp iteration can be reduced to corresponding theories of the base structure . </S>",
    "<S> this fails for muchnik s iteration .    </S>",
    "<S> dietrich kuske </S>"
  ]
}