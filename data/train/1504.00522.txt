{
  "article_text": [
    "localization , the problem of estimating a robot pose in the environment , is probably one of the most studied and understood problems in mobile robotics .",
    "several solutions have been presented in the last decades , most of them based on probabilistic inference over the space of possible robot configurations  @xcite .",
    "although the existing approaches have been demonstrated to be robust , efficient and very accurate  @xcite , they mostly rely on one major assumption : the existence of an already available map of the environment , built beforehand with the same sensing modality of the robot .    in some circumstances , however , building such a map could be a nuisance for the user .",
    "this is the case , for instance , of vacuum cleaners , lawn mowers , pool cleaners and many other service robots .",
    "often , when the user buys such a robot , he or she wants to use it immediately without waiting for an expensive and time - consuming mapping routine to complete . in some other cases , building an a - priori map is not even possible , for instance in environments that may harm humans , e.g. , a mine field or a toxic factory .",
    "moreover , mapping algorithms may result in local minima and the resulting maps might be unusable for navigation . although automatic tools to detect such inconsistencies exist  @xcite , they require an expert user to analyze the data to correct the map .    in this paper , we address the localization problem when no map of the environment is available beforehand .",
    "we propose an algorithm that solely requires a hand - drawn map of the environment , sketched by the user .",
    "we believe that drawing such a map puts no burden on the user and is an intuitive task .",
    "furthermore , we do not assume that the map is metrically accurate nor proportional up to a single scale .",
    "objects might be missing , and the deformation of the map might change at different locations .",
    "this reduces the ability to accurately localize the robot in a metric sense , since the map is _ bended _ in different ways and distances are not respected . to address these problems",
    ", we extend the monte carlo localization algorithm in two ways .",
    "first , we express the robot pose in the pixel coordinate of the drawing .",
    "this resolves the metrical issues and provides a sort of normalization with respect to the deformation .",
    "second , we augment the state space of the robot with a deformation parameter and track the local deformation of the drawing over time .",
    "robot localization is a widely studied problem  @xcite and several approaches have been proposed in the past , such as markov localization  @xcite , monte carlo localization ( mcl )  @xcite , and multiple hypothesis tracking ( mht )  @xcite .",
    "those approaches rely on the existence of a prior map and a static environment .",
    "some researchers extended those approaches to be able to handle changes in the environment over time  @xcite .",
    "however , they still rely on metrical maps and some prior information of the the environment to be built beforehand .",
    "few works have been done with respect to localization without prior maps .",
    "@xcite propose a localization approach , where the user provides only a topological sketch of the environment .",
    "some authors used floor plan maps available from construction blueprints . @xcite",
    "propose a localization algorithm that relies on blueprints of the environment .",
    "they employ an rgb - d sensor to estimate the walls of the environment and match them to the floor plan . to improve the initialization",
    ", they rely on a map of wifi signal strengths . @xcite",
    "employ a multi - hypothesis filter on blueprints .",
    "they first compute a voronoi diagram of the floor plan and store its intersections as landmarks .",
    "second , they use the voronoi intersection from the current readings and match them to the one computed from the map .",
    "contrary to our approach , they assume that the blueprint of the environment is metrically correct , and its scale is known .",
    "most of the works using hand - drawn maps exploit them as a mean of communication between the robot and a human operator .",
    "@xcite present an approach where an operator first sketches a rough map of the environment with a set of way points to follow .",
    "they use a library of known objects to associate perceptions to the sketch map and triangulate the robot position using angle measurements . @xcite",
    "propose a sketch interface for guiding a robot .",
    "the user draws a sketch of both the environment and instructs the robot to go to certain locations .",
    "the system computes a path in the hand - drawn map , and the robot execute it in an open - loop controller , without localizing the robot . @xcite",
    "propose a similar approach .",
    "the focus of the work , however , is on how to extract qualitative instructions for the robot .",
    "they translate the instructions to robot commands and localize the robot using an overhead camera system .",
    "@xcite proposed and evaluated a quantitative measure of navigability on hand - drawn maps .",
    "the work only focuses on qualitative aspects of navigability but does not address the ability to localize in them .",
    "moreover , the sketch maps that they considered are made of line segments and are automatically generated .",
    "@xcite propose an approach to qualitative reason about sketch maps .",
    "the authors are able to extract information such as an obstacle is on the right of the robot and give qualitative commands as turn left or go straight . the work has been extended by @xcite with the use of reactive controllers to guide the robot . @xcite",
    "developed nusketch , a qualitative reasoning framework exploiting topological properties and voronoi diagrams .",
    "they provide answers to query like finding places with certain properties or properties of paths .",
    "our work is orthogonal to them , and the proposed localization algorithm can be integrated with any of those control interfaces .",
    "localization using hand - drawn maps has received very little attention from the robotics community .",
    "@xcite presented a technique to perform scene matching between a map of the environment and a sketch using spatial relations .",
    "they assume a set of objects is present in both the sketch and the map with known segmentation .",
    "they then use particle swarm optimization ( pso ) techniques to compute the alignment and the sketch deformation .",
    "@xcite extended the previous work in a simultaneous localization and mapping ( slam ) framework .",
    "they assume , however that the sketch map is composed of rectangles corresponding to building in the scene .",
    "@xcite present an algorithm for controlling a mobile robot using a qualitative map consisting of landmarks and path waypoints .",
    "they assume that the both the sketch map and the real environment is made of point landmarks and also assume known data associations between them .",
    "in contrast to them , our approach does not make any assumption on the format of the sketch map and treats it as a raster image .",
    "moreover , we do not attempt to _ transform _ the hand - drawn map to reflect the real world but we directly localize the robot in the hand - drawn map . to the best of our knowledge ,",
    "the proposed approach is the first attempt to localize a robot from a generic hand - drawn map with no further assumptions .",
    "in this section , we describe the extension we made in the original monte carlo localization algorithm  @xcite for localizing in hand - drawn maps .",
    "we propose two main extensions .",
    "first , we augment the state space of the robot with an additional variable that represents the local deformation of the map .",
    "second , we localize the robot in the pixel coordinate frame of the map , instead of the world coordinate frame . in order to do so , we extended both the motion and the observation model to be locally projected onto the hand - drawn map .",
    "the goal of our work is to estimate the pose of the robot @xmath0 and a local scale @xmath1 at time @xmath2 , given the history of odometry measurements @xmath3 and observations @xmath4 .",
    "formally , this is equivalent to recursively estimate the following posterior : @xmath5 where @xmath6 is a normalization factor and @xmath7 is the hand - drawn map .",
    "the motion model  @xmath8 denotes the probability that the robot ends up in state  @xmath9 given it executes the odometry readings  @xmath10 in state  @xmath11 .",
    "the distribution @xmath12 represents the brownian motion of the scale parameter and the observation model @xmath13 denotes the likelihood of making the observation  @xmath14 given the robot s pose  @xmath9 , the local scale @xmath15 , and the map @xmath7 .    following the mcl approach ,",
    "we approximate the distribution as a weighted sum of dirac delta functions .",
    "the recursive estimation is performed using the sequential importance resampling algorithm  @xcite . for the proposal ,",
    "we sample the pose and the scale from the motion model and the brownian process , respectively . under the chosen proposal distribution ,",
    "we compute the weight of the particle according to the observation model and the recursive term .",
    "the particle set is then resampled , at each iteration , according to the weight of the particles .    to compute the number of particles needed",
    ", one can use the kld sampling approach of fox  @xcite .",
    "the algorithm estimates a discrete approximation of the target distribution using the weighted set of particles . during resampling",
    ", it computes the kullback - leibler divergence each time a new particle is resampled and stops the process when the divergence is below a confidence level .",
    "the purpose of the proposal distribution is to provide a mean for sampling a new set of particles given the current one .",
    "in the original mcl algorithm , the proposal distribution is the robot motion model . in our work",
    ", we need to provide a proposal distribution for both the robot position @xmath16 and the local scale @xmath17 .",
    "we modified the original motion model describe in the mcl algorithm to project the motion of the robot in the image coordinates .",
    "let @xmath18 and @xmath19 the pose and scale associated with the @xmath20-particle at time @xmath2 and @xmath21 the incremental odometry measurement .",
    "the new pose of the particle is computed as follow @xmath22,\\ ] ] where @xmath21 represents the odometry reading and @xmath23 is a sample from the noise term .",
    "we sample @xmath24^t$ ] from the normal distribution and a wrapped normal distribution , respectively for the translation @xmath25 and the rotational @xmath26 part .",
    "@xmath27 where @xmath28 and @xmath29 are the covariance matrix for the translation and the standard deviation for the rotation .",
    "the scale follows a brownian motion and is sampled according to following process @xmath30 where @xmath31 is a sample from a normal distribution and @xmath32 is the standard deviation of the scale increment .",
    "note that we include a standard deviation term in the wiener process .",
    "this is to account for smaller variations than its original formulation .",
    "one can formulate using the standard formulation of the wiener process by including an additional scaling term to the @xmath31 .",
    "intuitively , given the pose of a particle and its estimated scale , we first sample a zero mean , @xmath33 transformation from the odometry noise and perturb the odometry measurement accordingly .",
    "we then project the perturbed odometry on the hand - drawn map and apply the projected transformation to the robot pose .",
    "the scale sampling has been chosen to be locally close to the scale of the previous step , but still able to explore the whole space .",
    "the brownian motion was a natural choice for that , given its statistical properties .",
    "after we sample the particles according to the proposal distribution , we follow the importance sampling principle and compute the weights of the particle set . with our choice of proposal ,",
    "the weight of each particle must be proportional to the observation model @xmath34 , where we omitted the time index for notational simplicity .",
    "intuitively , this model describes the likelihood of the measurement @xmath35 , given the hand - drawn map @xmath7 , the local scale @xmath17 and the pose of the robot in the image coordinates @xmath16 . in this work ,",
    "we consider 2d laser range finders as sensors .",
    "the measurements @xmath36^t$ ] consist of a set of range values along a set of corresponding directions @xmath37^t$ ] .",
    "we employ the beam based model  @xcite and modify it to project the observations in the hand - drawn map .",
    "formally , let @xmath38 be the @xmath20-th range measurement along the angle @xmath39 .",
    "let us trace a ray on the map @xmath7 from the robot pose @xmath16 to the closest obstacle in the map and be @xmath40 the measured distance .",
    "the original formulation of the beam based model considers @xmath40 as being expressed in world coordinates and describes the measurement distribution as a mixture of four components @xmath41^t \\left[\\begin{array}{c }                      f_\\mathrm{hit}(z_i , \\hat{z}_i)\\\\                      f_\\mathrm{dyn}(z_i , \\hat{z}_i)\\\\                      f_\\mathrm{max}(z_i , \\hat{z}_i)\\\\                      f_\\mathrm{rnd}(z_i , \\hat{z}_i )                    \\end{array}\\right],\\ ] ] where @xmath42 models the measurement noise , @xmath43 models the unexpected obstacles not present in the map , @xmath44 models the sensor maximum range , and @xmath45 models a uniformly distributed random measurement .",
    "the functions are defined as following @xmath46 here , @xmath47 denotes a truncated exponential distribution with parameter @xmath48 and support between @xmath49 and @xmath50 .",
    "@xmath51 denotes a uniform distribution between @xmath52 and @xmath53 and @xmath54 is a window parameter . to account for the deformations , we need to project the real measurements coming from the sensor to the image",
    "coordinate frame by applying the estimated transformation . in our case , this entails to scale all the ranges according to estimated scale @xmath17 .",
    "the resulting observation model is @xmath55    all the parameters of the model have been learned from real data . to collect the data for the learning phase",
    ", we positioned the robot at fixed locations in the environment and draw few different sketches for each location .",
    "then , for each sketch and location , we performed grid search to find the best scale .",
    "given the scale , we computed the maximum - likelihood estimate of the parameters , following the approach described in  @xcite .",
    "we evaluated our approach in both simulated and real environments . for the simulation",
    ", we used the gazebo simulator available in ros .",
    "we created two virtual environments , resembling a simulated room ( room ) and a simulated apartment ( apartment ) .",
    "figure  [ fig : simplemap2_3d ] depicts the two simulated environments together with a simulated robot . in the real world experiment",
    ", we tested our algorithm in our building ( fr079 ) , whose map and a full dataset is publicly available .",
    "we chose this dataset for two reasons .",
    "first it contains very challenging aspects of localization algorithms , given the presence of many , similarly looking rooms .",
    "second , similar data is publicly available online , and other researchers can use that to replicate our results . since not everyone has the same _ artistic capabilities _ , we asked nine people to walk in the environment and draw a sketch .",
    "figure  [ fig : ais_9 ] shows all the nine sketches together .",
    "we use the same parameters for all our experiments and the simulated robot . for the proposal distribution",
    ", we have @xmath56 as covariance matrix for the translational component , @xmath57 for the rotational noise , and @xmath58 for the scale noise . with respect to the observation model",
    ", we set @xmath59 according to our sensor specification , and we estimated the rest of the parameters from data .",
    "the resulting estimated values are @xmath60 for the exponential distribution , @xmath61 for the max range , and @xmath62 , @xmath63 , @xmath64 , @xmath65 for the mixture weights .",
    "we also subsampled the range measurements to only 10 beams per scan , to compensate for the independence assumption of the laser beams .",
    "we intialized the filter by drawing the particles uniformly over a region of the map drawn by the user , for the position , uniformly between @xmath66 and @xmath67 for the orientation , and uniformly between 0.01 and 1 for the scale .",
    "the square region was about the size of a room , simulating a plausible initial guess from the user .          for the simulation",
    ", we used the room environment as a proof of concept scenario .",
    "we let the robot start in the lower right corner of the room and performed 4 different paths .",
    "we simulated a weak prior on the initial robot position by sampling the particles uniformly in a square of @xmath68 centered at the robot position .",
    "we obtained a success rate of 100% in localizing the robot .",
    "some videos of the whole experiment are available on youtube .         for the second experiment in the apartment environment , we simulated a series of navigation tasks , where the robot starts in a certain location and is instructed to reach a specific room .",
    "we believe this is the natural application of our approach , where the user sketches the map , a rough location of the robot and ask the robot to reach a particular showing it on the map .",
    "we set up our experiments in the following way .",
    "after we draw a sketch of the environment , we subdivided it into small square , each representing a room to be reached .",
    "we then randomly generated 10 different sequences navigation tasks , in the form of go from room a to room b. for each sequence , we performed 10 runs of our localization algorithm with different random seeds .",
    "we considered a sequence as a success if the robot , at the end of the trajectory , is localized in the correct room .",
    "figure  [ fig : simplemap2_3d_regions ] shows the hand - drawn map used in this experiments , together with our subdivision . to understand the differences between the real map and the hand - drawn one , figure  [ fig : simplemap2_top_with_sketch ] shows an overlay of the two , where we manually rotate , scaled and aligned the two maps . even under manual alignment",
    ", one can see that the scaling of the sketch is not uniform with respect to the real map and that many distortions are present .",
    "table  [ tab : table_simplemap2 ] shows the results of the experiment , together with the sequences we used .",
    "our approach has an overall success rate of 93% .",
    "we only had a few failures in the paths from 10 to 6 and 13 to 6 .",
    "note that this are the most challenging paths , since are the longest and traverse the whole map .",
    "we also had some problems from 13 to 10 .",
    "this was due to the ambiguity in the two corners , where the robot was mistakenly localized in the wrong one .",
    ".success rate for the apartment environment [ cols=\"^,^\",options=\"header \" , ]",
    "we believe our approach will also work with blueprints of the environment , given their metrical accuracy .",
    "in this paper , we addressed the problem of robot localization when no accurate map of the environment is available and the robot has to solely rely on a hand - drawn map sketched by the user .",
    "to do so , we extended the classical monte carlo localization algorithm in two ways .",
    "first , we propose to localize with respect to the image coordinate frame .",
    "second , we track , together with the pose of the robot , a local deformation of the hand - drawn map . since no metric information is available on the hand - drawn map , we propose to evaluate the localization in terms of coarse localization at the level of rooms of the environment .",
    "we evaluated our approach in both simulated and real environments and achieved a correct localization , up to the room level , of about 80% of the cases when the ratio of the sketch map resembles the real environment .",
    "we believe this is a starting point that addresses a very challenging problem with potential applications . in future",
    ", we plan to extend our approach to incorporate more sophisticated distortion models and employ it for navigation purposes ."
  ],
  "abstract_text": [
    "<S> robot localization is a one of the most important problems in robotics . </S>",
    "<S> most of the existing approaches assume that the map of the environment is available beforehand and focus on accurate metrical localization . in this paper </S>",
    "<S> , we address the localization problem when the map of the environment is not present beforehand , and the robot relies on a hand - drawn map from a non - expert user . </S>",
    "<S> we addressed this problem by expressing the robot pose in the pixel coordinate and simultaneously estimate a local deformation of the hand - drawn map . </S>",
    "<S> experiments show that we are able to localize the robot in the correct room with a robustness up to 80% . </S>"
  ]
}