{
  "article_text": [
    "the prototype of tof - pet scanner , constructed by the j - pet collaboration @xcite , consists of 192 plastic scintillators , each equipped with photomultipliers ( pmts ) on both ends .",
    "this results in 384 analog channels that have to be processed by the data acquisition system ( daq ) .",
    "the j - pet prototype will be used for investigations in the field of medical imaging  @xcite , nano - biology  @xcite , material science  @xcite and for testing of fundamental symmetries in physics  @xcite . in this paper",
    ", we present a complete solution for the daq system together with the readout mechanisms . detector readout chain is constructed out of front - end electronics ( fee ) , measurement devices like time - to - digital or analog - to - digital converters ( tdcs or adcs ) , data collectors and storage .",
    "most of the pet scanners include coincidence units or multi - level trigger logic in order to discard in the real - time data classified as background noise @xcite .",
    "such a unit can only execute low - level selection algorithms in order to fulfill real - time regime .",
    "applying low - level rejection filters can result in the loss of fraction of valuable data . on the other hand",
    ", more complex algorithms might introduce longer dead - time of the daq system , resulting in reduced rate of registered events .",
    "our solution for the continuous data recording ( trigger - less ) is a novel approach in such detector systems and assures that most of the information is preserved on the storage for further , high - level processing .",
    "the core of the presented system is based on trigger  readout  board  v3  ( trbv3 ) platform @xcite , developed for and widely used in high energy physics experiments @xcite .",
    "the main element of the j - pet daq system is the collection of trbv3 modules .",
    "those are high - performance and fpga - based ( field programmable gate array ) , therefore reconfigurable , tdc readout boards . each module is equipped with five lattice ecp3 m devices .",
    "the central one serves as the controller and local data collector , while the remaining four can be configured with configware providing various functionality . for the precise time",
    "measurement , a design providing 48 input channels and time resolution of 12 ps has been developed @xcite .",
    "each input channel has rising and falling signal edge detection and a buffer for up to 54 complete signals storage between two consecutive readouts .",
    "one trbv3 module is called master and controls the readout procedure and synchronization of all the other modules ( slaves ) [ fig : f2h ] .",
    "each trbv3 board has an individual gigabit ethernet ( gbe ) link for transmitting collected measurement data out of the system for storage with the use of standard and cheap network facility .",
    "an additional module , called central controller module ( ccm ) has been developed in order to provide efficient , online data processing .",
    "the module has sixteen gbe links as inputs from the slave modules and a xilinx zynq-7045 as the processing unit .",
    "data packages sent from the slaves can be directed through the ccm , which can perform online analysis , histogramming and data quality assessment .",
    "the data is saved on the event building ( eb ) machines .",
    "those are server class , multiprocessor pcs running software for collecting data fragments from the network and reassembling them into complete data units called events , representing the state of the entire detector in a particular period of time .",
    "such files are taken as the input into the analysis and image reconstruction algorithms @xcite .",
    "signal shaping , amplification and discrimination are the main functions of the front - end electronics @xcite . a dedicated electronic module has been developed as the mezzanine add - on for the trbv3 boards .",
    "the module is plugged directly into the connector which provides power , data and control lines .",
    "the signal discrimination applies a novel concept of misusing ( using in a non - standard way ) the lvds buffer inside the fpga device , which is configured with time measurement logic .",
    "an lvds buffer has two inputs : positive and negative .",
    "the output state of the buffer changes the logic state in case the voltage levels on the inputs are crossed .",
    "one can apply on one of the inputs a threshold level and the analog signal on the second input . at the moment when the analog signal crosses the threshold level",
    ", the buffer will generate a logic pulse , which being already inside the fpga , can be directly inserted into the tapped - delay chain for precise time measurement .",
    "the input signals are amplified and split into four paths , each having an individual threshold level .",
    "it is a realization of the multi - level thresholding concept as a measure for reducing the time - walk effect and therefore achieving better timing resolution @xcite .",
    "the tdc design allows for measurement of 48 input channels , hence the fee module has 12 inputs from the photomultipliers .",
    "the setup for the j - pet prototype consists of eight trbv3 boards as slave modules and one master trbv3 .",
    "the readout process in the system is controlled by the master module , which has the central trigger system ( cts ) functionality implemented in the central fpga device . for the continuous type of readout @xcite",
    ", the cts sends a periodic readout request message to all the slave modules at the fixed rate of 50 khz .",
    "the slaves record input signals and store the data in buffers until readout request message arrives . at the moment the message arrives ,",
    "the buffers are cleared and the data is encapsulated into udp packets and sent over gigabit ethernet network to the event building machines .",
    "a single udp packet contains measured time samples recorded by one slave modules during a period of 20  @xmath0s",
    ". the readout rate and buffers sizes ( up to 54 signals per channel ) are adjusted accordingly in order not to get overflowed and therefore to achieve maximum signals acceptance . upon receiving a readout request message , each module constructs a udp packet , tagged with the readout request message sequence number and module i d .",
    "those two values are necessary for the event building machines in order to correctly combine packets from the same measurement but different sources into one , single data unit .",
    "the described readout type results in a significant constant stream of data that has to be processed .",
    "the maximum throughput that can be achieved reaches 8 gbps .",
    "this amount of data can be efficiently distributed for storage over a number of event building machines running in parallel and connected with 10 g ethernet network .",
    "however the high event rate and the distributed data storage makes the designed system not suitable for online analysis . to overcome",
    "this drawback and additional module called central controller module ( ccm ) has been designed and developed .",
    "the central controller module provides a computing facility for online analysis and data quality assessment .",
    "the board features a xilinx zynq-7045 fpga device , which is a hybrid of fpga resources and an arm processor .",
    "the architecture of fpga devices allows for natural parallelism for processing multiple data streams , while the standard processor provides a convenient access to the results .",
    "the module can be used as the `` board - in - the - middle '' , meaning it can receive the packet streams from slave modules , perform analysis and forward the original packets further , to event building machines .",
    "trbv3 data format parsers and feature extraction algorithms have been implemented as the foundation for higher - level data analysis .",
    "a solution for the complete data acquisition system for j - pet prototype has been developed and is under evaluation .",
    "it consists of two novel approaches : in - fpga signal discrimination and continuous type of the readout @xcite .",
    "those two techniques allow for collection of timing data , measured with the high resolution . at present , lack of real - time data selection and filtering mechanisms in favor of trigger - less readout results in significant amount of data for processing but reduces the risk of discarding valuable measurements .",
    "ongoing work focuses on hardware evaluation and development of the online algorithms for the central controller module .",
    "we acknowledge technical and administrative support by a. heczko , m. kajetanowicz , w. migda , and the financial support by the polish national center for development and research through grant no .",
    "innotech - k1/in1/64/159174/ncbr/12 , the foundation for polish science through mpd program and the eu , mshe grant no",
    ". poig.02.03.00 - 161 00 - 013/09 .",
    "p. moskal _",
    "_ , _ nucl .",
    "inst . and meth .",
    "_ * a 764 * , ( 2014 ) 317 .",
    "l. raczyski _",
    "_ , _ nucl .",
    "inst . and meth .",
    "_ * a 764 * , ( 2014 ) 186 .",
    "p. moskal _",
    "_ , _ nucl .",
    "inst . and meth .",
    "_ * a 775 * , ( 2015 ) 54 .",
    "l. raczyski _",
    "_ , _ nucl .",
    "inst . and meth .",
    "_ * a 786 * , ( 2015 ) 105 .",
    "p. kowalski _",
    "_ , _ acta phys .",
    "polon . _ * a 127 * , ( 2015 ) 1500 .",
    "w. krzemie _",
    "_ , _ acta phys",
    ". polon . _ * a 127 * , ( 2015 ) 1491 .",
    "p. moskal _",
    "_ , _ acta phys",
    ". polon . _ * a 127 * , ( 2015 ) 1495 .",
    "a. wieczorek _",
    "_ , _ acta phys",
    "_ * a 127 * , ( 2015 ) 1487 .",
    "p. moskal _",
    "et al . _ ,",
    "patent number : wo2015028604-a1        d. kamiska _ et al .",
    "_ , _ nukleonika _ * 60 * ( 2015 ) 729 .",
    "t. frach , t. solf , a. thon , _ us patent _ , us 8164063 b2 d. j. schlyer , p. oconnor , c. woody , s. s. junnarkar , v. radeka , p. vaska , j - f .",
    "pratte , _ us patent _ , us 7091489 b2 g. korcyl _",
    "_ , _ jinst _ * 6 * , c12004 ( 2011 ) a. neiser _",
    "_ , _ jinst _ * 8.12 * , c12043 ( 2013 ) j. michel _ et al . _ , _ jinst _ * 6.12 * , c12056 ( 2011 ) c. ugur _ et al .",
    "_ , _ jinst _ * 7.12 * , c02004 ( 2012 ) w.  krzemie _ et al . _ , _ bio - algorithms and med - systems _ * 10 * 33 ( 2014 ) .",
    "w. krzemie _",
    "_ , _ nukleonika _ * 60 * ( 2015 ) 745 .",
    "m. paka , p. moskal , patent number : wo2015028600-a1"
  ],
  "abstract_text": [
    "<S> in this paper , we present a complete data acquisition system ( daq ) together with the readout mechanisms for the j - pet tomography scanner . in general detector readout chain is constructed out of front - end electronics ( fee ) , measurement devices like time - to - digital or analog - to - digital converters ( tdcs or adcs ) , data collectors and storage . </S>",
    "<S> we have developed a system capable for maintaining continuous readout of digitized data without preliminary selection . </S>",
    "<S> such operation mode results in up to 8 gbps data stream , therefore it is required to introduce a dedicated module for online event building and feature extraction . </S>",
    "<S> the central controller module , equipped with xilinx zynq soc and 16 optical transceivers serves as such true real time computing facility . </S>",
    "<S> our solution for the continuous data recording ( trigger - less ) is a novel approach in such detector systems and assures that most of the information is preserved on the storage for further , high - level processing . </S>",
    "<S> signal discrimination applies an unique method of using lvds buffers located in the fpga fabric . </S>"
  ]
}