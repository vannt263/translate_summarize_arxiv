{
  "article_text": [
    "malliavin calculus is an area of research which for many years has been considered highly theoretical and technical from the mathematical point of view . in recent years",
    "it has become clear that there are various applications of malliavin calculus as far as the integration by parts formula is concerned .",
    "nevertheless it is still considered by the general mathematical audience and practitioners a field where is hard to grasp the basic ideas or to obtain new contributions .    in this article",
    "we present an informal introduction to malliavin calculus which we hope can open the area to practitioners . for serious mathematical approaches to the topic",
    "we refer the readers to the authoritative books on the matter , e.g. @xcite .",
    "we have tried to take the spirit of the issues to try to explain in simple terms the elements of the theory .",
    "the most common concise way malliavin calculus is presented in a research paper is as follows .",
    "let @xmath0}$ ] be a standard one - dimensional brownian motion defined on a complete probability space @xmath1 .",
    "assume @xmath2}$ ] is generated by @xmath3 .",
    "let @xmath4 be the space of random variables of the form @xmath5 , where @xmath6 is smooth . for @xmath7 , @xmath8}(t)$ ] . for @xmath9 , @xmath10 ,",
    "let @xmath11 be the completion of @xmath4 with the respect to the norm @xmath12+e[(\\sum_{j=1}^{k}\\int_{0}^{1}\\ldots \\int_{0}^{1}|d_{s_{1},\\ldots , s_{j}}^{j}f|^{2}ds_{1}\\ldots ds_{j})^{p/2}])^{1/p},\\ ] ] where @xmath13 .",
    "we let @xmath14)^{1/p}=\\vert f\\vert _ { p}$ ] and @xmath15 . for processes @xmath16}$ ] on @xmath1 , @xmath17)}^{k , p }",
    "$ ] is defined as @xmath18 but with norm @xmath19)}=(e[\\vert u\\vert _ { l^{2}([0,1])}^{p}]+e[(\\sum_{j=1}^{k}\\int_{0}^{1}\\ldots \\int_{0}^{1}\\vert d_{s_{1},\\ldots , s_{j}}^{j}u\\vert _ { l^{2}([0,1])}^{2}ds_{1}\\ldots ds_{j})^{p/2}])^{1/p}$ ] .",
    "we denote by @xmath20 the skorokhod integral or the adjoint operator of @xmath21 .",
    "this adjoint operator behaves like a stochastic integral .",
    "in fact , if @xmath22 is @xmath23 adapted , then @xmath24 , the it integral of @xmath25 ; see e.g. @xcite .",
    "here we write @xmath26 , even if @xmath22 is not @xmath27 adapted .",
    "there are other anticipating integrals that have some relationship with this one as e.g. the ogawa symmetric integral . of the formulas we will use , the following are worth mentioning , @xmath28 for @xmath29 and @xmath30<\\infty $ ]",
    " see e.g. @xcite ; and @xmath31=e[f d^ * ( u)].\\ ] ]    as a byproduct of all the above formulas one obtains the integration by parts formula . for this",
    ", we say that @xmath32 is smooth if @xmath33 . for a real random variable @xmath29 ,",
    "we denote by @xmath34 the malliavin covariance matrix associated with @xmath32 .",
    "that is , @xmath35\\times \\mathbb{r}}$ ] .",
    "one says that the random variable is non - degenerate if @xmath36 @xmath37 and the matrix @xmath34 is invertible a.s . and",
    "@xmath38 .",
    "the integration by parts formula of malliavin calculus can be briefly described as follows .",
    "suppose that @xmath32 is a non - degenerate random variable and @xmath39 @xmath37 .",
    "then for any function @xmath40 and a finite sequence of multi - indexes @xmath41 , we have that there exists a random variable @xmath42 so that @xmath43=e[g(f)h^{\\beta } ( f , g ) ] \\text { with}\\ ] ] @xmath44 for some constants @xmath45 , @xmath46 , @xmath47 , @xmath48 , @xmath49 , @xmath50 , @xmath51 , @xmath52 and @xmath53 . here",
    "@xmath54 denotes the high order derivative of order @xmath55 , the length of the multi - index @xmath56 , and whose partial derivatives are taken according the index vector @xmath57 .",
    "a gentler introduction may say that the idea behind the operator @xmath21 is to differentiate a random variable with respect to the underlying noise being this generated by the wiener process @xmath3 .",
    "therefore heuristically one may think that @xmath58 . with this in mind",
    "one can guess how to differentiate various random variables .",
    "some examples are @xmath59 here @xmath6 is a @xmath60 function . a way to understand any integration by parts",
    "formula is through the following general definition .    *",
    "definition * we will say that given two random variables @xmath61 and @xmath62 , the integration by parts formula is valid if for any smooth function @xmath6 with bounded derivatives we have that @xmath63=e[f(x)h],\\ ] ] for some random variable @xmath64 .",
    "one can deduce an integration by parts formula through the duality principle ( [ dp ] ) .",
    "that is , let @xmath65 . then using the chain rule we have @xmath66 from here we multiply the above by @xmath67 where @xmath68 is a process to be chosen appropiately . then @xmath69 integrating this for @xmath70 $ ] , we have that @xmath71 @xmath72 @xmath73}=e\\left [ f^{\\prime } ( x)y\\right],\\ ] ] with @xmath74 finally , we have that if @xmath75 is the adjoint operator of @xmath21 see equation ( [ dp]) , then @xmath76=e\\left [ f^{\\prime } ( x)y\\right ] , \\text { and}\\ ] ] @xmath77 = e\\left [ f^{\\prime } ( x)y\\right].\\ ] ]",
    "this also means that in particular for @xmath78 we have that @xmath79 if one has higher order derivatives then one has to repeat this procedure iteratively .",
    "the use of the norms in the spaces @xmath80 is necessary in order to prove that the above expectations are finite ( in particular the ones related to @xmath81 ) .",
    "note that the integral @xmath82 should not be degenerate with probability one .",
    "otherwise the above argument is bound to fail .",
    "the process @xmath68 that appears in this calculation is a parameter process that can be chosen so as to obtain this non - degeneracy . in the particular case that @xmath83",
    "one obtains the so called malliavin covariance matrix .    in conclusion one can build different integrations by parts formulas depending on how we choose this process @xmath68 . in the next section we use this formula in order to apply it to a concrete problem in finance .",
    "european options are contracts that are signed between two parties ( usually a bank and a customer ) that allows to obtain certain monetary benefits if the price of certain asset fall above ( call option ) or below ( put option ) a certain fixed value , the strike price , at a certain fixed date , the expiration time .",
    "a greek is the derivative of an option price with respect to a parameter . in general , let @xmath84 be a random variable that depends on a parameter @xmath85 suppose that the option price is computed through a payoff function in the following form @xmath86 $ ] where @xmath87 is generally non - smooth .",
    "a greek is therefore a measure of the sensibility of this price with respect to its parameters .",
    "in particular , it could serve to prevent future dangers in the position of a company holding these options .",
    "the problem of computing greeks in finance has been studied by various authors : @xcite , among others .",
    "let us take a clooser look at the problem .",
    "if the leibnitz rule of interchange between expectation and differentiation were true then we would have @xmath88}{\\partial \\alpha } = e\\left[\\phi'(x(\\alpha ) , \\alpha ) \\frac{\\partial x ( \\alpha ) } { \\partial \\alpha } + \\frac{\\partial \\phi ( x ( \\alpha ) , \\alpha)}{\\partial \\alpha } \\right].\\label{direct}\\ ] ] when the above expression does not have a close formula then one may start thinking in performing some monte carlo simulations in order to approximate the above quantity . if @xmath87 is somewhat regular then we can use the last expression above to do this : we shall call this procedure the  direct method \" . unfortunately in various cases @xmath87 is not differentiable .",
    "then one can resort to the use of the middle expression above to generate what is known as finite difference method .",
    "this method has been somewhat successful in the recent past but we would like to discuss here the application of the integration by parts pesented before in order to compute these derivatives .",
    "we shall illustrate how this procedure works by choosing a very special subset of the large family of financial derivatives : what we have called _",
    "european - style _ options . in this class of derivatives",
    "we will find all the options whose payoff function depends only on the value of the underlying at the expiration time @xmath89 , which is previously fixed .",
    "examples of the european - type options are the _ vanillas _ the more classical european calls and puts , or the _ binaries _ the so called  cash - or - nothing \" options , among others .",
    "these options will differ , for instance , from the _ american - style _",
    "options , where the execution time is not fixed but belongs to an interval ; and also from the _ asian - style _",
    "options where the payoff depends on some average of the value of the asset in a given period of time .",
    "we will return on this topic afterwards .",
    "the interest of the european - style options is that they are a class of derivatives whose greeks can be computed in closed form for particular classes of payoff functions .",
    "the reason , as we will show , is that we explicitly know the probability density function of the random variable involved , @xmath90 , whereas in other scenarios this is not true .",
    "this peculiarity provides us with a framework where we can easily test how malliavin calculus applies to the computation of greeks .",
    "later , we will also make a comment on a case where this closed formulas are not available and where this technique may prove useful .",
    "let us start deriving the formal expressions for some of the greeks we shall deal with .",
    "first we assume that our underlying asset @xmath91 is described by a geometric brownian motion under the risk neutral probability @xmath92 : @xmath93 where @xmath94 is the interest rate and @xmath95 is the volatility .",
    "this model is one of the models typically used to describe stock prices or stock indices .",
    "second , from the previous arguments it follows that @xmath96 must be in general a functional of @xmath91 . in the case of european - type options , @xmath97 and from ( [ si ] ) : @xmath98 where @xmath99}$ ] is the wiener process , and @xmath100 is just @xmath101 . expression ( [ st ] ) is involved in all the following derivations .",
    "now we can compute _ delta _ , @xmath102 , the first partial derivative of the ( discounted ) expected outcome of the option , with respect to the present value of the asset : @xmath103 = \\frac{e^{-r t}}{s_0 } e\\left[\\frac{\\partial s_t}{\\partial s_0}\\phi^{\\prime}(s_t)\\right]=\\frac{e^{-r t}}{s_0 } e \\left[\\phi^{\\prime}(s_t ) s_t\\right].\\ ] ] now we may perform the integration by parts applying the formula given in ( [ d1 ] ) , @xmath104 , \\label{delta_e_1}\\ ] ] which removes the derivative of @xmath87 from the expectation",
    ".    the integral term appearing in the last expression will appear many times along our exposition . in order to compute it",
    "we must remember the rules of the stochastic derivative stated above : @xmath105 and then @xmath106 then we are able to perform the stochastic integral in ( [ delta_e_1 ] ) , @xmath107 with the help of equation ( [ d2 ] ) applied to @xmath108 .",
    "then the expression for @xmath102 reads , @xmath109.\\ ] ]    let us move now into a new greek : _ vega_. it measures how sensitive is the price of the option when the volatility changes , @xmath110 = e^{-rt } e\\left[\\frac{\\partial s_t}{\\partial \\sigma } \\phi^{\\prime}(s_t)\\right]=e^{-rt } e[s_t(w_t-\\sigma t ) \\phi^{\\prime}(s_t)].\\ ] ] we invoke again the recipe in section 2 and thus we can withdraw the derivative form @xmath111 , @xmath112=e^{-rt } e\\left[\\phi(s_t)d^{*}\\left(\\frac{w_t}{\\sigma t}-1\\right)\\right],\\ ] ] where we have used the expression ( [ int_1 ] ) .",
    "so the computation we must face is @xmath113 here a new instance of stochastic integral appears , @xmath114 .",
    "the rule which we must take into account in order to solve the problem is again in ( [ d2 ] ) , with @xmath115 , @xmath116 what lead us finally to this expression for @xmath117 , @xmath118 .",
    "\\label{v_e_1}\\ ] ] the last example we will present here is one involving a second derivative : _ gamma_. @xmath119 inform us on the second order dependence of the price of the option on the actual value of the underlying , @xmath120=\\frac{e^{-rt}}{s_0 ^ 2}e [ s_t^2   \\phi^{\\prime\\prime}(s_t)].\\ ] ] after a first integration by parts we obtain , @xmath121=\\frac{e^{-rt}}{s_0 ^ 2}e\\left[\\phi^{\\prime}(s_t)d^{*}\\left(\\frac{s_t}{\\sigma t}\\right)\\right].\\ ] ] the stochastic integral may be simplified using once more formula ( [ d2 ] ) on @xmath122 , leading to @xmath123 afterwards we can perform the second integration by parts , yielding : @xmath124=\\frac{e^{-rt}}{s_0 ^ 2}e\\left[\\phi(s_t)d^{*}\\left(\\frac{s_t}{\\int_{0}^{t } d_v s_t d v } \\left\\{\\frac{w_t}{\\sigma t } -1\\right\\}\\right)\\right].\\ ] ] the stochastic integral is now slightly cumbersome , but it does not endow any complexity that we have not seen before , @xmath125 if we bring together the previous partial results we will obtain the expression , @xmath126 .",
    "\\label{g_e_1}\\ ] ] if we compare it with ( [ v_e_1 ] ) , we find the following relationship between @xmath117 and @xmath119 : @xmath127 since we have indeed closed expressions for all the greeks , we may easily check the correctness of the above statements",
    ". we shall recover property ( [ v - g ] ) of the european - style options in the next section .",
    "the above identities are very well known by practitioners although their proofs do not usually recall the integration by parts formula in the form we have introduced it here .",
    "the reason for the existence of such expressions for the greeks of european - type options is due to the fact that there is a closed and tractable formula for the probability density function of @xmath90 .",
    "this is the lognormal distribution that is written as @xmath128 ^ 2 / 2\\sigma^2 t\\}.\\ ] ] when @xmath129 is available we can face the problem from a different perspective . in this case",
    "we are able to compute all the partial derivatives , starting from the explicit formulation for the price of the option , @xmath130 , @xmath131= \\int_0^{\\infty } e^{-rt } \\phi(x ) p(x ) dx,\\ ] ] usually just a formal expression , which now becomes handy .",
    "we can show this computing the value of @xmath102 , in terms of partial derivatives of @xmath129 : @xmath132 note that we get an expression that can be easily rewritten in a way that apparently resembles our previous results , since one integration by parts has been implicitly done , and a kernel naturally appears , @xmath133 .",
    "\\label{d_p}\\ ] ] but we have not yet exploited the information we have about the functional form of @xmath129 , @xmath134_{x = s_t}=\\frac{w_t}{s_0 \\sigma t},\\ ] ] which leads us to the same expression we have already obtain by means of malliavin calculus : @xmath109.\\ ] ]    a similar procedure applies to the other greeks .",
    "we will obtain _ vega _ just replacing the @xmath135 with a @xmath95 in equation ( [ d_p ] ) , @xmath136,\\ ] ] and , after straightforward computations , we recover equation  ( [ v_e_1 ] ) .",
    "the case of _ gamma _ leads to an expression with a very similar flavor to what we have already seen , @xmath137,\\ ] ] that yields , again , the same result presented in ( [ g_e_1 ] ) .",
    "we find therefore in this frame that the property stated in ( [ v - g ] ) is fulfilled by _ vega _ and _",
    "gamma_.    we can then conclude that when we deal with european - style options , the malliavin - related procedures presented above are equivalent to the result we attain if we directly differenciate the probability density function .      besides the formal comparison with the previous case , the fact of knowing @xmath129 allows us , in principle , to completely compute all the greeks once a payoff function has been selected .",
    "one of the most popular choice is the european , or _ vanilla _",
    ", call whose payoff reads , @xmath138 then can be easily derived the following expressions for the greeks we have presented : @xmath139 ^ 2/2 } , \\text { and}\\\\ \\gamma&=&\\frac{1}{s_0 \\sqrt{2 \\pi \\sigma^2 t } } e^{-[d_1(k)]^2/2};\\end{aligned}\\ ] ] where @xmath140,\\ ] ] as it can be found in any textbook on financial derivatives @xcite . in conclussion , we are able to compute the different greeks using the malliavin - related formulas , and compare them with their theoretical values .",
    "we present in fig .",
    "[ fig_e_d ]  and  [ fig_e_v ] the result of this procedure , for a given set of parameters , after monte carlo simulation .",
    "only @xmath102 and @xmath117 are shown , since @xmath119 would just be a replica of the second , due to equation ( [ v - g ] ) .",
    "these examples show us how the outcome of the simulation progressively attains their own theoretical value , whereas the statistical error reduces .",
    "we notice however that the use of what we have labeled as  direct method \" , just performing monte carlo simulations starting from the rhs expression in ( [ direct ] ) , would lead to an estimator with smaller variance , and therefore a better estimation .",
    "those estimations do not appear in the figures , in the sake of clarity .",
    "but we must remember that this technique can only be applied when the payoff is smooth enough . in our case ,",
    "when payoff follows ( [ payoff ] ) , _ gamma _ can not be computed in this way .    , @xmath141 , @xmath142 ( in years ) and @xmath143 ( in arbitrary cash units ) , using monte carlo techniques .",
    ", width=453 ]    , @xmath141 , @xmath142 ( in years ) and @xmath143 ( in arbitrary cash units ) , using monte carlo techniques.,width=453 ]",
    "here one considers the greeks for options written on the average of the stock price @xmath144 , instead of the final value @xmath90 , as in european options . note that in this particular case the density function of the random variable does not have a known closed formula .",
    "_ delta _ in this case is given by @xmath145 = \\frac{e^{-r t}}{s_0 } e\\left[\\phi^{\\prime}\\left(\\frac{1}{t}\\int_{0}^{t}s_{s}ds\\right)\\frac{1}{t}\\int_{0}^{t}s_{u}du\\right].\\ ] ] there are various ways of doing the integration by parts . in the already cited literature we find in @xcite",
    "the following expression : @xmath146,\\ ] ] whereas a close variant of it , which involves ( [ si ] ) , can be found in @xcite : @xmath147.\\ ] ] of course , we may also use the same approach we have present in the previous sections , and obtain a third one : @xmath148,\\ ] ] where @xmath149 are something similar to a first two moments .",
    "although the two first expressions for @xmath102 are statistically identical , their particular realizations when perfoming numerical computation will slightly differ , even though the same series of random numbers is used .",
    "the last formula is definitely a brand new estimator with its own properties , among them its smaller variance is perhaps the most relevant one .",
    "we can observe these features in fig .",
    "[ fig_a_d ] , where we show the outcome of the monte carlo simulation using the three alternative instances .",
    "we have chosen again the functional form in ( [ payoff ] ) for the payoff , and the rest of parameters takes the same value we used in the making of the previous plots .",
    ", @xmath141 , @xmath142 ( in years ) and @xmath143 ( in arbitrary cash units ) , using monte carlo techniques , for the estimators presented in the main text .",
    "we have broken the interval of integration in 252 pieces , representing the approximate number of trading days in a year .",
    "the exact result turns out to be near the bottom of the graph , at about 0.65.,width=453 ]    then , not all these formulas coincide and in fact , contrary to what is claimed in @xcite there is no way to obtain the integration by parts that provides the minimal variance .",
    "the main reason being that this is equivalent to know the probability density of the random variable in question . to expose the main ideas that also appear in @xcite one can note first that there is an integration by parts that is the `` most '' straightforward but highly unrealistic .",
    "for this , consider the generalized problem @xmath150 = \\int_0^{\\infty } \\phi ^{\\prime } ( x)xp(x)dx.\\ ] ] here @xmath151 denotes the density of @xmath152 which exists and is smooth ( it is an interesting exercise of malliavin calculus ) .",
    "therefore one can perform the integration by parts directly in the above formula thus obtaining that @xmath153 & = & \\int_0^{\\infty } \\phi ( x)(p(x)+xp^{\\prime } ( x))dx \\\\ & = & e\\left [ \\phi \\left(\\int_{0}^{t}s_{s}ds\\right ) \\cdot \\left ( 1+\\frac{\\int_{0}^{t}s_{s}dsp^{% \\prime } ( \\int_{0}^{t}s_{s}ds)}{p(\\int_{0}^{t}s_{s}ds)}\\right ) \\right].\\end{aligned}\\ ] ] now we procceed to prove that the above gives the minimal integration by parts in the sense of variance .",
    "obviously it is not possible to carry out the simulations unless @xmath49 and @xmath151 are known .",
    "let us construct the set of all possible integration by parts .",
    "suppose that @xmath62 is a random variable such that @xmath150 = e% \\left [ \\phi \\left(\\int_{0}^{t}s_{s}ds\\right)y\\right],\\ ] ] for any function @xmath154 , then it is not difficult to deduce that @xmath155 = 1+% \\frac{\\int_{0}^{t}s_{s}dsp^{\\prime } ( \\int_{0}^{t}s_{s}ds)}{% p(\\int_{0}^{t}s_{s}ds)}.\\ ] ] here @xmath156 denotes the @xmath95-algebra generated by @xmath157 , and @xmath158 $ ] is the conditional expectation .",
    "therefore the set of all possible integration by parts can be characterized as @xmath159 = 1+\\frac{% \\int_{0}^{t}s_{s}dsp^{\\prime } ( \\int_{0}^{t}s_{s}ds)}{p(\\int_{0}^{t}s_{s}ds)}% \\right\\}.\\ ] ] next in order we want to find the element in @xmath62 that minimizes @xmath160.\\ ] ] as in @xcite is not difficult to see which @xmath62 achieves the minimum .",
    "this is done as follows : @xmath161 & = & e\\left [ \\phi \\left(\\int_{0}^{t}s_{s}ds\\right)^{2}\\cdot\\left ( y-1-\\frac{\\int_{0}^{t}s_{s}dsp^{\\prime } ( \\int_{0}^{t}s_{s}ds)}{p(\\int_{0}^{t}s_{s}ds)}\\right ) ^{2}\\right ] \\\\ & & + e\\left [ \\phi \\left(\\int_{0}^{t}s_{s}ds\\right)^{2 } \\cdot \\left ( 1+\\frac{% \\int_{0}^{t}s_{s}dsp^{\\prime } ( \\int_{0}^{t}s_{s}ds)}{p(\\int_{0}^{t}s_{s}ds)}% \\right ) ^{2}\\right],\\end{aligned}\\ ] ] since the mixed product is @xmath162 , due to the property of the set @xmath163",
    ". therefore the minimum is achieved at @xmath164 .",
    "this is clearly impossible to write explicitely as @xmath151 is unknown in the case of asian options .",
    "therefore it is still an open problem to devise good ways to perform an efficient integration by parts so that the variance is made small rapidly and efficiently .",
    "akh would like to thank prof .",
    "s. ogawa for his kind invitation to visit japan , and participate in the workshop .",
    "he would also like to thank all the comments received about the presentation of this work .",
    "mm has been supported in part by direccin general de proyectos de investigacin under contract no.bfm2000-0795 , and by generalitat de catalunya under contract no.2000 sgr-00023 .",
    "9 ikeda n. and watanabe s. , _ stochastic differential equations and diffusion processes _ , north - holland , amsterdam ( 1989 ) .",
    "nualart d. , _ the malliavin calculus and related topics _ , springer , berlin ( 1995 ) .",
    "malliavin p. , _ market curvature and importance sampling of ocone - karatzas hedging_. conference on stochastic analysis , berlin ( july 2001 ) .",
    "broadie m. and glasserman p. , ",
    "estimating security price derivatives using simulation \" , _ manag .",
    "_ , * 42 * , 269 - 285 ( 1996 )",
    ". benhamou e. ,  an application of malliavin calculus to continuous time asian options greeks \"",
    ". technical report , london school of economics ( 2000 ) .",
    "lecuyer p. , and perron g. ,  on the convergence rates of ipa and fdc derivative estimators\",_oper .",
    "_ , * 42 * , 643 - 656 ( 1994 ) .",
    "fourni e. , lasry j.m .",
    ", lebuchoux j. , lions p.l . , and touzi n. ,  applications of malliavin calculus to monte carlo methods in finance \" , _ finance stochast .",
    "_ , * 3 * , 391 - 412 , ( 1999 ) fourni e. , lasry j.m . , lebuchoux j. , and lions p.l . ,  applications of malliavin calculus to monte carlo methods in finance",
    "ii \" , _ finance stochast .",
    "_ , * 5 * , 201 - 236 ( 2001 ) wilmott , p. , _ derivatives _ , wiley , chichester ( 1998 ) ."
  ],
  "abstract_text": [
    "<S> in this article , we give a brief informal introduction to malliavin calculus for newcomers . </S>",
    "<S> we apply these ideas to the simulation of greeks in finance . first to european - type options where formulas can be computed explicitly and therefore can serve as testing ground . </S>",
    "<S> later we study the case of asian options where close formulas are not available . </S>",
    "<S> the greeks are computed through monte carlo simulation . </S>"
  ]
}