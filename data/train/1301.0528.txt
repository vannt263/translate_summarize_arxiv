{
  "article_text": [
    "smart grid ( sg ) is a modern evolution of the utility electricity delivery system .",
    "sg enhances the traditional power grid through computing , communications , networking , and control technologies throughout the processes of electricity generation , transmission , distribution and consumption .",
    "the two - way flow of electricity and real - time information is a characteristic feature of sg , which offers many technical benefits and flexibilities to both utility providers and consumers , for balancing supply and demand in a timely fashion and improving energy efficiency and grid stability . according to the us 2009 recovery act  @xcite ,",
    "an sg will replace the traditional system and is expected to save consumer cost and reduce america s dependence on foreign oil .",
    "these goals are to be achieved by improving efficiency and spurring the use of renewable energy resources .",
    "microgrid ( mg ) is a promising component for future sg deployment . due to the increasing deployment of distributed renewable energy resources ( drers ) , mg provides a localized cluster of renewable energy generation , storage , distribution and local demand , to achieve reliable and effective energy supply with simplified implementation of sg functionalities  @xcite . a typical mg architecture",
    "is illustrated in fig .",
    "[ fig : microgrid ] , consisting of drers ( such as wind turbines and solar photovoltaic cells ) , energy storage systems ( ess ) , a communication network ( e.g. , wireless or powerline communications ) for information delivery , an mg central controller ( mgcc ) , and local residents .",
    "the mg has centralized control with the mgcc  @xcite , which exchanges information with local residents , ess s , and drers via the information network .",
    "there is a single common coupling point with the macrogrid .",
    "when disconnected , the mg works in the _ islanded mode _ and drers and ess s provide electricity to local residents .",
    "when connected , the mg may purchase extra electricity from the macrogrid or sell excess energy back to the market  @xcite .    [ !",
    "t ]     the balance of electricity demand and supply is one of the most important requirements in mg management . instead of matching supply to demand ,",
    "smart energy management matches the demand to the available supply using direct load control or off - peak pricing to achieve more efficient capacity utilization  @xcite . in this paper",
    ", we develop a novel control framework for mg energy management , exploiting the two - way flows of electricity and information .",
    "in particular , we consider two types of electricity usage : ( i ) a pre - agreed _ basic usage _ that is `` hard''-guaranteed , such as basic living usage , and ( ii ) extra elastic _ quality usage _ exceeding the pre - agreed level for more comfortable life , such as excessive use of air conditioners or entertainment devices . in practice",
    ", residents may set their load priority and preference to obtain the two types of usage  @xcite .",
    "the basic usage should be always satisfied , while the quality usage is controlled by the mgcc according to the grid status , such as drer generation , ess storage levels and utility prices .",
    "the mgcc may _ block _ some quality usage demand if necessary .",
    "this can be implemented by incorporating smart meters , smart loads and appliances that can adjust and control their service level through communication flows  @xcite . to quantify residents satisfaction level",
    ", we define the outage percentage of the quality usage as _ quality of service in electricity _ ( qose ) , which is specified in the service contracts  @xcite . the mgcc adaptively schedules electricity to keep the qose below a target level , and",
    "accordingly dynamically balance the load demand to match the available supply . in this paper",
    ", we investigate the problem of smart energy scheduling by jointly considering renewable energy distribution , ess management , residential demand management , and utility market participation , aiming to minimize the mg operation cost and guarantee the residents qose .",
    "the mgcc may serve some quality usage with supplies from the drers , ess s and macrogrid . on the other hand",
    ", the mg can also sell excessive electricity back to the macrogrid to compensate for the energy generation cost .",
    "the electricity generated from renewable sources is generally random , due to complex weather conditions , while the electricity demand is also random due to the random consumer behavior , and so do the purchasing and selling prices on the utility market .",
    "it is challenging to model the random supply , demand , and price processes for mg management , and it may also be costly to have precise , real - time monitoring of the random processes . therefore , a simple , low cost , and optimal electricity scheduling scheme that does not rely on any statistical information of the supply , demand , and price processes would be highly desirable .",
    "we tackle the mg electricity scheduling problem with a _",
    "lyapunov optimization _ approach , which is a useful technique to solve stochastic optimization and stability problems  @xcite .",
    "we first introduce two virtual queues : qose virtual queues and battery virtual queues to transform the qose control problem and battery management problem to queue stability problems .",
    "second , we design an adaptive mg electricity scheduling policy based on the lyapunov optimization method and prove several deterministic ( or , `` hard '' ) performance bounds for the proposed algorithm",
    ". the algorithm can be implemented _ online _ because it only relies on the current system status , without needing any future knowledge of the energy demand , supply and price processes .",
    "the proposed algorithm also converges exponentially due to the nice property of lyapunov stability design  @xcite .",
    "the algorithm is evaluated with trace - driven simulations and is shown to achieve significant efficiency on mg operation cost while guaranteeing the residents qose .",
    "the remainder of this paper is organized as follows .",
    "we present the system model and problem formulation in section  [ sec : sys ] .",
    "an adaptive mg electricity scheduling algorithm is designed and analyzed in section  [ sec : policy ] .",
    "simulation results are presented and discussed in section  [ sec : sim ] .",
    "we discuss related work in section  [ sec : related ] .",
    "section  [ sec : con ] concludes the paper .    [ !",
    ".notation [ cols=\"<,<\",options=\"header \" , ]",
    "we consider the electricity supply and consumption in an mg as shown in fig .",
    "[ fig : microgrid ] .",
    "we assume that the mg is properly designed such that a portion of the electricity demand related to basic living usage ( e.g. , lighting ) from the residents , termed _ basic usage _ , can be guaranteed by the minimum capacity of the mg .",
    "there are randomness in both electricity supply ( e.g. , weather change ) and demand ( e.g. , entertainment usage in weekends ) . to cope with the randomness , the mg works in the _ grid - connected _ mode and",
    "is equipped with ess s , such as electrochemical battery , superconducting magnetic energy storage , flywheel energy storage , etc . the ess s store excess electricity for future use .",
    "the mgcc collects information about the resident demands , drer supplies , and ess levels through the information network .",
    "when a resident demand exceeds the pre - agreed level , a _ quality usage _ request will be triggered and transmitted to the mgcc .",
    "the mgcc will then decide the amount of quality usage to be satisfied with energy from the drers , the ess s , or by purchasing electricity from the macrogrid .",
    "the mgcc may also decline some quality usage requests .",
    "the excess energy can be stored at the ess s or sold back to the macrogrid for compensating the cost of mg operation .    without loss of generality",
    ", we consider a time - slotted system .",
    "the time slot duration is determined by the timescale of the demand and supply processes .",
    "the system model is shown in fig .",
    "[ fig : system ] . consider a battery farm with @xmath0 independent battery cells , which can be recharged and discharged .",
    "we assume that the batteries are not leaky and do not consider the power loss in recharging and discharging , since the amount is usually small .",
    "it is easy to relax this assumption by applying a constant percentage on the recharging and discharging processes . for brevity , we also ignore the aging effect of the battery and the maintenance cost , since the cost on the utility market dominates the operation cost of mgs .    [ !",
    "t ]     let @xmath1 denote the energy level of the the @xmath2th battery in time slot @xmath3 .",
    "the capacity of the battery is bounded as @xmath4 where @xmath5 is the maximum capacity , and @xmath6 is the minimum energy level required for battery @xmath2 , which may be set by the battery deep discharge protection settings .",
    "the dynamics over time of @xmath1 can be described as @xmath7 where @xmath8 and @xmath9 are the recharging and discharging energy for battery @xmath2 in time slot @xmath3 , respectively .",
    "the charging and discharging energy in each time slot are bounded as @xmath10 in each time slot @xmath3 , @xmath8 and @xmath9 are determined such that ( [ eq : batlimit ] ) is satisfied in the next time slot .",
    "usually the recharging and discharging operations can not be performed simultaneously , which leads to @xmath11      consider @xmath12 residents in the mg ; each generates basic and quality electricity usage requests , and each can tolerate a prescribed _ outage probability _ @xmath13 for the requested quality usage part",
    ". the mgcc adaptively serves quality usage requests at different levels to maintain the qose as well as the stability of the grid .",
    "the service of quality usage can be different for different residents , depending on individual service agreements .",
    "let @xmath14 be the _ average quality usage arrival rate _ , and @xmath13 a prescribed outage tolerance ( i.e. , a percentage ) for user @xmath15 .",
    "the average _ outage rate _ for the quality usage , @xmath16 , should satisfy @xmath17 at each time @xmath3 , the quality usage request from resident @xmath15 is @xmath18 $ ] units , which is an i.i.d random variable with a general distribution and mean @xmath14 .",
    "the average rate is @xmath19 according to the law of large numbers .",
    "the drers in the mg generate @xmath20 units of electricity in time slot @xmath3 .",
    "@xmath20 can offer enough capacity to support the pre - agreed _ basic usage _ in the mg , which is guaranteed by islanded mode mg planning .",
    "the electricity is transmitted over power transmission lines . without loss of generality , we assume the power transmission lines are not subject to outages and the transmission loss is negligible .",
    "let @xmath21 be the pre - agreed _ basic usage _ for resident @xmath15 in time slot @xmath3 , which can be fully satisfied by @xmath20 , i.e. , @xmath22 , for all @xmath3 .",
    "in addition , some _ quality usage _",
    "request @xmath23 may be satisfied if @xmath24 .",
    "let @xmath25 be the energy allocated for the quality usage of resident @xmath15 .",
    "we have @xmath26    we define a function @xmath27 to indicate the amount of quality usage outage for resident @xmath15 , as @xmath28 . then the average outage rate can be evaluated as @xmath29 .",
    "the mgcc may purchase additional energy from the macrogrid or sell some excess energy back to the macrogrid .",
    "let @xmath30 $ ] denote the energy purchased from the macrogrid and @xmath31 $ ] the energy sold on the market in time slot @xmath3 , where @xmath32 and @xmath33 are determined by the capacity of the transformers and power transmission lines . since it is not reasonable to purchase and sell energy on the market at the same time , we have the following constraints @xmath34 to balance the supply and demand in the mg , we have @xmath35      the price for purchasing electricity from the macrogrid in time slot @xmath3 is @xmath36 per unit .",
    "the purchasing price depends on the utility market state , such as peak / off time of the day .",
    "we assume finite @xmath37 $ ] , which is announced by the utility market at the beginning of each time slot and remains constant during the slot period  @xcite .",
    "unlike prior work  @xcite , we do not require any statistic information of the @xmath36 process , except that it is independent to the amount of energy to be purchased in that time slot .",
    "if the mgcc determines to sell electric energy on the utility market , the selling price from the market broker is denoted by @xmath38 $ ] in time slot @xmath3 , which is also a stochastic process with a general distribution .",
    "we also assume @xmath39 is known at the beginning of each time slot and independent to the amount of energy to be sold on the market .",
    "we assume @xmath40 , @xmath41 and @xmath42 for all @xmath3 .",
    "that is , the mg can not make profit by greedily purchasing energy from the market and then sell it back to the market at a higher price simultaneously .",
    "given the above models , a control policy @xmath43 is designed to minimize the operation cost of the mg and guarantee the qose of the residents .",
    "we formulate the electricity scheduling problem as @xmath44 problem  ( [ eq : obj ] ) is a stochastic programming problem , where the utility prices , generation of drers , and consumption of residents are all random .",
    "the solution also depends on the evolution of battery states .",
    "it is challenging since the supply , demand , and price are all general processes .",
    "we first adopt a _ battery virtual queue _",
    "@xmath45 that tracks the charge level of each battery @xmath2 : @xmath46 where @xmath47 is a constant for the trade - off between system performance and ensuring the battery constraints .",
    "this constant @xmath48 is carefully selected to ensure the evolution of the battery levels always satisfy the battery constraints  ( [ eq : batlimit ] ) , which will be examined in section  [ subsec : perf ] .",
    "the virtual queue can be deemed as a shifted version of the battery dynamics in ( [ eq : batdyn ] ) as @xmath49 these queues are `` virtual '' because they are maintained by the mgcc control algorithm . unlike an actual queue",
    ", the virtual queue backlog @xmath45 may take negative values .",
    "we next introduce a conceptual _ qose virtual queue _",
    "@xmath50 , whose dynamics are governed by the system equation as @xmath51^+ + i_n(t ) , \\;\\ ; \\forall \\ ; n , t.\\ ] ] where @xmath52^+ = \\max\\{0 , x\\}$ ] .",
    "[ propo : vqueue ] if an mgcc control policy stabilizes the qose virtual queue @xmath50 , the outage quality usage of resident @xmath15 will be stabilized at the average qose rate @xmath53 .    according to the system equation  ( [ eq : vqueue ] ) ,",
    "we have @xmath54 summing up the inequalities in ( [ eq : list ] ) , we have @xmath55 dividing both sides by @xmath3 and letting @xmath3 go to infinity , we have @xmath56 .",
    "\\nonumber\\end{aligned}\\ ] ] note that @xmath57 is finite .",
    "if @xmath50 is rate stable by a control policy @xmath58 , it is finite for all @xmath3 .",
    "we have @xmath59 , which yields @xmath60 due to the definitions of @xmath14 and @xmath58 .      with theorem  [ propo : vqueue ]",
    ", we can transform the original problem ( [ eq : obj ] ) into a queue stability problem with respect to the qose virtual queue and the battery virtual queues , which leads to a system stability design from the control theoretic point of view .",
    "we have a reformulated stochastic programming problem as follows .",
    "@xmath61 theorem  [ propo : vqueue ] indicates that qose provisioning is equivalent to stabilizing the qose virtual queue @xmath50 , while stabilizing the virtual queues  ( [ eq : virtualbat ] ) ensures that the battery constraints  ( [ eq : batlimit ] ) are satisfied .",
    "we then apply _ lyapunov optimization _ to develop an adaptive electricity scheduling policy for problem ( [ eq : qobj ] ) , in which the policy greedily minimize the lyapunov drift in every slot @xmath3 to push the system toward stability .",
    "we define the _ lyapunov function _ for system state @xmath62^t$ ] with dimension @xmath63 as follows , in which @xmath64^t$ ] and @xmath65^t$ ] .",
    "@xmath66 ^ 2 + \\frac{1}{2 } \\sum_{n=1}^n\\left [ z_n(t)\\right]^2,\\ ] ] which is positive definite , since @xmath67 when @xmath68 and @xmath69 .",
    "we then define the conditional one slot _",
    "lyapunov drift _ as @xmath70    with the drift defined as in ( [ eq : driftdef ] ) , it can be shown that @xmath71 + \\right . \\nonumber\\\\               & & \\hspace*{0.35 in } \\left",
    ". \\sum_{n=1}^n [ ( z_n(t+1))^2 - ( z_n(t))^2 | z_n(t ) ] \\right\\}\\nonumber\\\\               & \\leq &   b+\\sum_{n=1}^n\\mathbb{e}\\{z_n(t)(1-\\delta_n)\\alpha_n(t)|z_n(t)\\ } + \\nonumber\\\\               & & \\sum_{k=1}^k\\mathbb{e}\\{x_k(t)(r_k(t ) - d_k(t))|x_k(t)\\ } - \\nonumber \\\\               & & \\sum_{n=1}^n\\mathbb{e}\\{(z_n(t ) + \\alpha_n(t))p_n(t)|z_n(t)\\ } ,               \\label{eq : drift}\\end{aligned}\\ ] ] where @xmath72 is a constant .",
    "the derivation of ( [ eq : drift ] ) is given in appendix  [ app : drift ] .",
    "to minimize the operation cost of the mg , we adopt the _ drift - plus - penalty method _  @xcite .",
    "specifically , we select the control policy @xmath73 to minimize the bound on the drift - plus - penalty as : @xmath74 where @xmath75 is defined in section  [ subsubsec : vqs ] for the trade - off between stability performance and operation cost minimization .",
    "given the current virtual queue states @xmath45 and @xmath50 , market prices @xmath76 and @xmath39 , available drers energy @xmath77 , and the resident quality usage request @xmath23 , the optimal policy is the solution to the following problem . @xmath78",
    "+ \\nonumber\\\\                  & & v[q(t)c(t ) - s(t)w(t ) ] + \\nonumber\\\\                  & & \\sum_{k=1}^k [ x_k(t)(r_k(t ) - d_k(t ) ) ] - \\nonumber \\\\                  & & \\sum_{n=1}^n [ ( z_n(t ) + \\alpha_n(t))p_n(t ) ] \\\\      \\mbox{s.t . } & & \\mbox{~(\\ref{eq : chadischa } ) , ( \\ref{eq : batredecontr } ) , ( \\ref{eq : resbal } ) , ( \\ref{eq : sellconst } ) ,                            ( \\ref{eq : mgbal } ) } .",
    "\\nonumber \\end{aligned}\\ ] ]    since the control policy @xmath79 is only applied to the last three terms of  ( [ eq : objdriftfull ] ) , we can further simplify problem  ( [ eq : objdriftfull ] ) as @xmath80 + \\sum_{k=1}^k \\left [ x_k(t)(r_k(t ) - \\right . \\nonumber\\\\                   & & \\hspace{-0.2 in } \\left .",
    "d_k(t ) ) \\right ] - \\sum_{n=1}^n [ ( z_n(t ) + \\alpha_n(t))p_n(t ) ] \\\\       \\mbox{s.t . } & & \\hspace{-0.2 in } \\mbox{~(\\ref{eq : chadischa } ) , ( \\ref{eq : batredecontr } ) , ( \\ref{eq : resbal } ) , ( \\ref{eq : sellconst } ) ,                             ( \\ref{eq : mgbal } ) } , \\nonumber \\end{aligned}\\ ] ] which can be solved based on observations of the current system state @xmath81 .",
    "with the lyapunov penalty - and - drift method , we transform problem  ( [ eq : qobj ] ) to problem  ( [ eq : objdrift ] ) to be solved for each time slot .",
    "the solution only depends on the current system state ; there is no need for the statistics of the supply , demand and price processes and no need for any future information .",
    "the solution algorithm to this problem is thus an _",
    "online algorithm_. we have the following properties for the optimal scheduling .    [",
    "lm : lm1 ] the optimal solution to problem  ( [ eq : objdrift ] ) has the following properties :    1 .   if @xmath82 , we have @xmath83 , 1 .",
    "if @xmath84 , the optimal solution always selects @xmath85 ; if @xmath86 , the optimal solution always selects @xmath87 .",
    "[ item : item1a ] 2 .",
    "if @xmath88 , the optimal solution always selects @xmath89 ; if @xmath90 , the optimal solution always selects @xmath91 .",
    "[ item : item1b ] 2 .   when @xmath92 , we have @xmath93 , [ enu : enu2 ] 1 .",
    "if @xmath94 , the optimal solution always selects @xmath85 ; if @xmath95 , the optimal solution always selects @xmath87 .",
    "if @xmath96 , the optimal solution always selects @xmath89 ; if @xmath97 , the optimal solution always selects @xmath91 .",
    "the proof of lemma  [ lm : lm1 ] is given in appendix  [ app : lm1 ] .",
    "[ lm : lm2 ] the optimal solution to the battery management problem has the following properties :    1 .   if @xmath98 , the optimal solution always selects @xmath85 .",
    "2 .   if @xmath99 , the optimal solution always selects @xmath87 .",
    "the proof of lemma  [ lm : lm2 ] is given in appendix  [ app : lm2 ] .",
    "[ lm : lm3 ] the optimal solution to the qose provisioning problem has the following properties :    1 .   if @xmath100 , the optimal solution always selects @xmath89 .",
    "2 .   if @xmath101 , the optimal solution always selects @xmath91 .",
    "the proof directly follows lemma  [ lm : lm1 ] and is similar to the proof of lemma  [ lm : lm2 ] .",
    "we omit the details for brevity .",
    "lemma  [ lm : lm1 ] provides useful insights for simplifying the algorithm design , which will be discussed in section  [ subsec : alg ] .",
    "the intuition behind these lemmas is two - fold . on the ess management side , if either the purchasing price @xmath36 or the selling price @xmath39 is low , the mg prefers to recharge the ess s to store excess electricity for future use . on the other hand ,",
    "if either @xmath36 or @xmath39 is high , the mg is more likely to discharge the ess s to reduce the amount of energy to purchase or sell more stored energy back to the macrogrid . on the qose provisioning side ,",
    "if either @xmath36 or @xmath39 is high and the quality usage @xmath23 is low , the mg is apt to decline the quality usage for lower operation cost . on the other hand ,",
    "if either @xmath36 or @xmath39 is low and @xmath23 is high , the quality usage are more likely to be granted by purchasing more energy or limiting the sell of energy .      in this section , we present the mg control policy @xmath79 to solve problem  ( [ eq : objdrift ] ) .",
    "given the current virtual queue state @xmath102 , market prices @xmath36 and @xmath39 , quality usage @xmath23 and available energy @xmath77 from the drers for serving quality usage , problem  ( [ eq : objdrift ] ) can be decomposed into the following two linear programming ( lp ) sub - problems ( since one of @xmath76 and @xmath103 must be zero , see  ( [ eq : sellconst ] ) ) .",
    "@xmath104 -\\nonumber\\\\                   & & \\hspace{-0.25 in } \\sum_{n=1}^n((z_n(t ) + \\alpha_n(t))p_n(t ) ) \\\\ \\hspace{-0.1 in } \\mbox{s.t . } & & \\hspace{-0.25 in } s(t ) = 0 , \\mbox{(\\ref{eq : chadischa } ) , ( \\ref{eq : batredecontr } ) , ( \\ref{eq : resbal } ) , ( \\ref{eq : mgbal } ) . } \\nonumber\\end{aligned}\\ ] ] @xmath105 -\\nonumber\\\\                   & & \\hspace{-0.25 in } \\sum_{n=1}^n((z_n(t ) + \\alpha_n(t))p_n(t ) ) \\\\ \\hspace{-0.1 in } \\mbox{s.t.~ } & & \\hspace{-0.25 in } q(t ) = 0 , \\mbox{(\\ref{eq : chadischa } ) , ( \\ref{eq : batredecontr } ) , ( \\ref{eq : resbal } ) , ( \\ref{eq : mgbal } ) . }",
    "\\nonumber\\end{aligned}\\ ] ]    in sub - problem  ( [ eq : objdriftsub1 ] ) , we set @xmath85 if @xmath84 , and @xmath87 if @xmath86 according to lemma  [ lm : lm1 ] . also ,",
    "if @xmath90 , we set @xmath91 ; otherwise , we reset constraint  ( [ eq : resbal ] ) to a smaller search space of @xmath106 . we take a similar approach for solving sub - problem  ( [ eq : objdriftsub2 ] ) by replacing @xmath36 with @xmath39 .",
    "then we compare the objective values of the two sub - problems and select the more competitive solution as the mg control policy .",
    "the complete algorithm is presented in algorithm  [ tab : algorithm ] .    [ !",
    "t ] mgcc initializes the qose target to @xmath13 and the virtual queues backlogs @xmath50 and @xmath45 , for all @xmath15 and @xmath2      the proposed scheduling algorithm dynamically balances cost minimization and qose provisioning .",
    "it only requires current system state information ( i.e. , as an online algorithm ) and requires no statistic information about the random supply , demand , and price processes .",
    "the algorithm is also robust to non - i.i.d .",
    "and non - ergodic behaviors of the processes  @xcite .",
    "[ propo : battery ] the constraint on the ess battery level @xmath1 , @xmath107 , is always satisfied for all @xmath2 and @xmath3 .    from the battery virtual queue definition  ( [ eq : batteryque ] ) , the constraint @xmath107 is equivalent to @xmath108 we assume all the batteries satisfy the battery capacity constraint at the initial time @xmath109 , i.e. , @xmath110 , for all @xmath2 .",
    "supposing the inequalities hold true for time @xmath3 , we then show the inequalities still hold true for time @xmath111 .",
    "first , we show @xmath112 . if @xmath113 , then with @xmath114 from lemma  [ lm : lm2 ] , we have @xmath115 . if @xmath116 , then the largest value is @xmath117 . for any @xmath75",
    "@xmath118 it follows that @xmath112 .",
    "next , we show @xmath119 . assuming @xmath120 , then from lemma  [ lm : lm2 ]",
    ", we have @xmath121 .",
    "it follows that @xmath122 if @xmath123 , following  ( [ eq : batteryque ] ) , we have @xmath124 therefore , we have @xmath119 .",
    "thus the inequalities also hold true for time @xmath111 .",
    "it follows that @xmath107 is satisfied under the optimal scheduling algorithm for all @xmath2 , @xmath3 .",
    "[ propo : qoubound ] the worst - case backlogs of the qose virtual queue for each resident @xmath15 is bounded by @xmath125 , for all @xmath15 , @xmath3 .",
    "moreover , the worst - case average amount of outage of quality usage for resident @xmath15 in a period @xmath126 is upper bounded by @xmath127 .",
    "\\(i ) we first prove the upper bound @xmath128 . initially , we have @xmath129 .",
    "assume that in time slot @xmath3 the backlog of the qose virtual queue of resident @xmath15 satisfies @xmath125 .",
    "we then check the backlog at time @xmath111 and show the bound still holds true .",
    "if @xmath100 , following lemma  [ lm : lm3 ] , the optimal scheduling for the quality usage of resident @xmath15 satisfies @xmath89 . from the virtual queue dynamics  ( [ eq : vqueue ] ) , we have @xmath130^+ + \\delta_n\\alpha_n(t ) .",
    "\\nonumber\\end{aligned}\\ ] ] if @xmath131 , we have @xmath132 ; otherwise , it follows that @xmath133 .    if @xmath134 , we have @xmath135^+ + \\alpha_n^{max}$ ] . if @xmath131 , we have @xmath136 ; otherwise , we have @xmath137 .",
    "thus we have @xmath138 .",
    "the proof of the qose virtual queue backlog bound is completed .",
    "\\(ii ) consider an interval @xmath139 $ ] with length of @xmath126 .",
    "summing  ( [ eq : vqueue ] ) from @xmath140 to @xmath141 , we have @xmath142 \\geq \\sum_{\\tau = t_1}^{t_2}[\\alpha_n(\\tau)-p_n(\\tau ) ] - t \\delta_n \\alpha_n^{max}$ ] .",
    "it follows that @xmath143 \\leq z_n^{max } + t\\delta_n\\alpha_n^{max}.\\ ] ]    [ propo : objbound ] the average mg operation cost under the adaptive electricity scheduling algorithm in algorithm[tab : algorithm ] , @xmath144 , is bounded as @xmath145 , where @xmath146 is optimal operating cost and @xmath147 .    from theorem",
    "[ propo : battery ] , the battery capacity constraints is met in each time slot with the adaptive control policy .",
    "take expectation on  ( [ eq : batdyn ] ) and sum it over the period @xmath148 $ ] : @xmath149 , \\ ; \\forall \\ ; k.\\ ] ] since @xmath150 , we divide both sides by @xmath3 and let @xmath3 go to infinity , to obtain @xmath151    consider the the following relaxed version of problem  ( [ eq : obj ] ) .",
    "@xmath152 since the constraints in problem  ( [ eq : relaxobj ] ) are relaxed from that in problem  ( [ eq : obj ] ) , the optimal solution to problem  ( [ eq : obj ] ) is also feasible for problem  ( [ eq : relaxobj ] ) .",
    "the solution of  ( [ eq : relaxobj ] ) does not depend on battery energy levels .",
    "let the optimal solution for problem  ( [ eq : relaxobj ] ) be @xmath153 and the corresponding object value is @xmath154 . according to the properties of optimality of stationary and randomized policies  @xcite ,",
    "the optimal solution @xmath155 satisfies @xmath156 and @xmath157 .",
    "we substitute solution @xmath155 into the right - hand - side of the drift - and - penalty  ( [ eq : driftpen ] ) . since our proposed policy minimizes the right - hand - side of  ( [ eq : driftpen ] ) , we have @xmath158 the second inequality is due to @xmath156 , @xmath159 , @xmath160 , @xmath161 , and @xmath154 . taking expectation and",
    "sum up from @xmath162 to @xmath163 , we obtain @xmath164 the second inequality is due to the nonnegative property of lyapunove functions .",
    "divide both sides by @xmath165 and let @xmath126 go to infinity .",
    "since the initial system state @xmath166 is finite , we have @xmath167 .    it is worth noting that the choice of @xmath168 controls the optimality of the proposed algorithm .",
    "specifically , a larger @xmath168 leads to a tighter optimality gap .",
    "however , from the proof of theorem  [ propo : battery ] , @xmath168 is limited by @xmath48 , which ensures the feasibility of the battery constraints .",
    "this is actually a similar phenomenon to the so - called _ performance - congestion trade - off _  @xcite . through the definition of @xmath48 ( see section  [ subsubsec : vqs ] ) , it can be seen that if we invest more on the individual storage components for a larger ess capacity , the proposed algorithm can achieve a better performance ( i.e. , a smaller optimality gap ) .",
    "it is also worth noting that all the performance bounds of the proposed algorithm are deterministic , which provide `` hard '' guarantees for the performance of the proposed adaptive scheduling policy in every time slot . unlike probabilistic approaches",
    ", the proposed method provides useful guidelines for the mg design , while guaranteeing the mg operation cost , grid stability , and the usage quality of residents .",
    "we demonstrate the performance of the proposed adaptive mg electricity scheduling algorithm through extensive simulations .",
    "we simulated an mg with @xmath169 residents , where the electricity from drers is supplied by a wind turbine plant .",
    "we use the renewable energy supply data from the western wind resources dataset published by the national renewable energy laboratory  @xcite .",
    "the ess s consists of @xmath170 phev li - ion battery packs , each of which has a maximum capacity of @xmath171 kwh and the minimum energy level is @xmath162 .",
    "the battery can be fully charged or discharged within @xmath172 hours  @xcite .",
    "the residents pre - agreed power demand is uniformly distributed in [ @xmath172 kw , @xmath173 kw ] , and the quality usage power is uniformly distributed in [ @xmath162 , @xmath174 kw ] .",
    "the mg works in the grid - connected mode and may purchase / sell electricity from / to the macrogrid .",
    "the utility prices in the macrogrid are obtained from  @xcite and are time - varying .",
    "we assume the sell price by the broker is random and below the purchasing price in each time slot .",
    "the time slot duration is @xmath175 minutes .",
    "the mgcc serves a certain level of quality usage according to the adaptive electricity scheduling policy .",
    "the qose target is set to @xmath176 for all residents .",
    "the control parameter is @xmath177 , unless otherwise specified .",
    "we first investigate the average qoses and total mg operation cost with default settings for a five - day period .",
    "we use matlab lp solver for solving the sub - problems ( [ eq : objdriftsub1 ] ) and ( [ eq : objdriftsub2 ] ) . for better illustration",
    ", we only show the qoses of three randomly chosen users in fig .  [",
    "fig : vmaxqou ] .",
    "it can be seen that all the average qoses converge to the neighborhood of @xmath178 within @xmath179 slots , which is close to the mg requested criteria @xmath180 .",
    "in fact the proposed scheme converges exponentially , due to the inherent exponential convergence property in lyapunov stability based design  @xcite .",
    "[ fig : hetroqou ]    we also plot the mg operation traces from this simulation in fig .",
    "[ fig : vmaxele ] . the energy for serving quality usage from the deres",
    "are plotted in fig .",
    "[ fig : vmaxele](a ) .",
    "it can be seen that the drers generate excessive electricity from slot @xmath181 to @xmath179 , which is more than enough for the residents .",
    "thus , the mgcc sells more electricity back to the macrogrid and obtains significant cost compensation accordingly . in fig .",
    "[ fig : vmaxele](b ) , we plot the traces of electricity trading , where the positive values are the purchased electricity ( marked as brown bars ) , and the negative values represent the sold electricity ( marked as dark blue bars ) .",
    "the mg operation costs are plotted in fig .",
    "[ fig : vmaxele](c ) .",
    "the curve rises when the mg purchases electricity and falls when the mg sells electricity . from slot @xmath181 to @xmath179 , the operation cost drops significantly due to profits of selling excess electricity from the deres .",
    "the operation cost is @xmath182 by the end of the period , which means the net spending of the mg is @xmath182 on the utility market .",
    "we then examine the energy levels of the batteries in fig .",
    "[ fig : vmaxbat ] .",
    "we only plot the levels of three batteries in the first @xmath183 time slots for clarity .",
    "the proposed control policy charges and discharges the batteries in the range of @xmath162 to @xmath171 kwh , which falls strictly within the battery capacity limit . it can be seen that the amount of energy for charging or discharging in one slot is limited by @xmath172 kwh in the figure , due to the short time slots comparing to the @xmath172-hour fully charge / discharge periods . for longer time slot durations and batteries with faster charge / discharge speeds , the variation of the energy level in fig .  [",
    "fig : vmaxbat ] could be higher .",
    "however , theorem  [ propo : battery ] indicates that the feasibility of the battery management constraint is always ensured , if the control parameter @xmath168 satisfies @xmath75 .",
    "we next evaluate the performance of the proposed adaptive control algorithm under different values of control parameter @xmath168 . for different values @xmath184 ,",
    "the qoses are stabilized at @xmath185 , @xmath186 , and @xmath187 , and the total operation cost are $ @xmath188 , $ @xmath189 , and $ @xmath190 , respectively .",
    "we find the qose decreases from @xmath185 to @xmath187 , while the total operation cost is increased from $ @xmath188 to $ @xmath190 , as @xmath48 is decreased .",
    "this demonstrates the performance - congestion trade - off as in theorem  [ propo : objbound ] : a larger @xmath168 leads to a smaller objective value ( i.e. , the operating cost ) , but the system is also penalized by a larger virtual queue backlog , which corresponds to a higher qose . on the contrary , a smaller @xmath168 favors the resident quality usage , but increases the total operation cost .",
    "in practice , we can select a proper value for this parameter based on the mg design specifications .",
    "it would be interesting to examine the case where the residents require different qoses .",
    "we assume @xmath191 residents with a service contract for lower qoses .",
    "we plot the average qoses of three residents with @xmath192 in fig .",
    "[ fig : hetroqou ] .",
    "resident @xmath193 prefers an outage probability @xmath194 , while residents @xmath172 and @xmath195 require an outage probability @xmath196 .",
    "it can be seen in fig .",
    "[ fig : hetroqou ] that resident @xmath193 s qose converges to @xmath197 , while the other two residents qoses remains around @xmath198 .",
    "we compare the performance of the proposed scheme with a heuristic mg electricity control policy ( mecp ) , which serves as a benchmark . in mecp , the mgcc blocks quality usage requests simply by tossing a coin with the target probability .",
    "we use @xmath199 in the following simulations .",
    "if there is sufficient electricity from the drers , all the quality usage requests will be granted and the excess energy will be stored in the ess s . if there is still any surplus energy , the mgcc will sell it to the macrogrid .",
    "if there is insufficient electricity from the drers , the ess s will be discharged to serve the quality usage requests .",
    "the mgcc will purchase electricity from the macrogrid if even more electricity is required . finally , with a predefined probability , e.g. , @xmath200 in the following simulation , the mg purchases as much energy as possible to charge the ess s .",
    "we run @xmath170 simulations with different random seeds for a seven - day period .",
    "we assume in the first five days the resident behavior is the same as previous default settings . in the last two days",
    ", we assume the residents are apt to request more electricity ( e.g. , more activities in weekends ) we assume in the last two days the resident pre - agreed basic usage power demand is uniformly distributed from @xmath191 kw to @xmath201 kw .",
    "the quality usage power is uniformly distributed from @xmath162 to @xmath202 kw . we find that the proposed algorithm earns @xmath203 from the utility market ( with @xmath204 confidence interval @xmath205 $ ] ) .",
    "the profit mainly comes from the abundant drer generation in the last two days , as shown in fig .",
    "[ fig : costcisingle ] .",
    "mecp only earns @xmath206 from the market ( with @xmath204 confidence interval @xmath207 $ ] ) , which is @xmath208 lower than that of the proposed control policy .",
    "we also find that the qoses under the proposed control policy remains about @xmath209 , which is lower than the criteria @xmath199 .",
    "this is because there are a sudden price jump from @xmath210/mwh to @xmath211/mwh in the afternoon of the last day .",
    "this sharp increment increases @xmath212 eight times and decreases the value of @xmath48 . due to the performance - congestion trade - off , the qoses become smaller ( lower than mecp s @xmath213 level ) .    [ ! t ]",
    "-day period.,title=\"fig:\",width=326,height=364 ]    [ ! t ]",
    "-day period.,title=\"fig:\",width=326,height=364 ]",
    "sg is regarded as the next generation power grid with two - way flows of electricity and information .",
    "several comprehensive reviews of sg technologies can be found in  @xcite .",
    "recently , sg research is attracting considerable interest from the networking and communications communities  @xcite .",
    "for example , the design of wireless communication systems in sg is studied in  @xcite .",
    "the authors of  @xcite explore the important wireless communication security issues in smart grid . the energy management and power flow control in the grid",
    "is investigated in  @xcite to reach system - wide reliability under uncertainties .",
    "the frequency oscillation in power networks is studied in  @xcite by epidemic propagation and a social network based approach .",
    "the electric power management with phevs are examined in  @xcite .",
    "microgrid is a new grid structure to group drers and local residents loads , which provides a promising way for the future sg . in  @xcite",
    ", the authors review the mg structure with distributed energy resources . in  @xcite , the integration of random wind power generation into grids for cost effective operation is investigated . in  @xcite ,",
    "the authors propose a useful online method to discover all available drers within the islanded mode mircogrid and compute a drer access strategy .",
    "the problem of optimal residential demand management is studied in  @xcite , aiming to adapt to time - varying energy generation and prices , and maximize user benefit . in  @xcite ,",
    "the authors investigate energy storage management with a dynamic programming approach .",
    "the size of the ess s for mg energy storage is explored in  @xcite .",
    "lyapunov optimization is a useful stochastic optimization method  @xcite .",
    "it integrates the lyapunov stability concept of control theory with optimization and provides an efficient framework for solving schedule and control problems .",
    "it has been widely used and extended in the communications and networking areas  @xcite . in two recent work  @xcite",
    ", the lyapunov optimization method is applied to jointly optimize power procurement and dynamic pricing . in  @xcite",
    ", the authors investigate the problem of profit maximization for delay tolerant consumers . in  @xcite ,",
    "the authors study electricity storage management for data centers , aiming to meet the workload requirement .",
    "both of the work are designed based on a _ single _ energy consumption entity model .",
    "in this paper , we developed an online adaptive electricity scheduling algorithm for smart energy management in mgs by jointly considering renewable energy penertration , ess management , residential demand management , and utility market participation .",
    "we introduced a qose model by taking into account minimization of the mg operation cost , while maintaining the outage probabilities of resident quality usage .",
    "we transformed the qose control problem and ess management problem into queue stability problems by introducing the qose virtual queues and battery virtual queues .",
    "the lyapunov optimization method was applied to solve the problem with an efficient online electricity scheduling algorithm , which has deterministic performance bounds .",
    "our simulation study validated the superior performance of the proposed approach .",
    "this work is supported in part by the us national science foundation ( nsf ) under grants cns-0953513 .",
    "any opinions , findings , and conclusions or recommendations expressed in this material are those of the author(s ) and do not necessarily reflect the views of the foundation .",
    "10 [ 1]#1 url@samestyle [ 2]#2 [ 2]l@#1=l@#1#2    y.  huang , s.  mao , and r.  m. nelms , `` adaptive electricity scheduling in microgrids , '' in _ proc .",
    "ieee infocom13 _ , turin , italy , apr .",
    "2013 , pp . 19 .",
    "whitehouse.gov , `` battery and electric vehicle report , '' jul .",
    "2010 , [ online ] available : http://www.whitehouse.gov/files/documents/battery-and-electric-vehicle-report-final.pdf .",
    "x.  fang , s.  misra , g.  xue , and d.  yang , `` smart grid - the new and improved power grid : a survey , '' _ ieee commun .",
    "surveys & tutorials _ , vol .",
    "pp , no .",
    "137 , dec . 2011 .",
    "j.  huang , c.  jiang , and r.  xu , `` a review on distributed energy resources and microgrid , '' _ elsevier renewable and sustainable energy reviews _ , vol .",
    "12 , no .  9 , pp . 24722483 , dec .",
    "h.  farhangi , `` the path of the smart grid , '' _ ieeepower and energy magazine _ , vol .  8 , no .  1 ,",
    "1828 , jan .- feb .",
    "s.  shao , m.  pipattanasomporn , and s.  rahman , `` demand response as a load shaping tool in an intelligent grid with electric vehicles , '' _ ieee trans . smart grid _ , vol .  2 , no .  4 , pp .",
    "624631 , dec . 2011 .",
    "e.  fumagalli , j.  w. black , i.  vogelsang , and m.  ilic , `` quality of service provision in electric power distribution systems through reliability insurance , '' _ ieee trans .",
    "power systems _ , vol .  19 , no .  3 , pp . 12861293 ,",
    "l.  tassiulas and a.  ephremides , `` stability properties of constrained queueing systems and scheduling policies for maximum throughput in multihop radio networks , '' _ ieee trans .",
    "autom . control _",
    "37 , no .  12 , pp .",
    "19361948 , dec . 1992 .",
    "j.  slotine and w.  li , _ applied nonlinear control_.1em plus 0.5em minus 0.4emprentice hall , 1991 .",
    "t.  t. kim and h.  poor , `` scheduling power consumption with price uncertainty , '' _ ieee trans .",
    "smart grid _ , vol .  2 , no .  3 , pp . 519527 ,",
    "m.  neely , e.  modiano , and c.  rohrs , `` dynamic power allocation and routing for time - varying wireless networks , '' _",
    "ieee j. sel .",
    "areas commun .",
    "_ , vol .  23 , no .  1 ,",
    "pp . 89103 , jan .",
    "m.  j. neely and r.  urgaonkar , `` opportunism , backpressure , and stochastic optimization with the wireless broadcast advantage , '' in _ asilomar conference on signals , systems , and computers08 _ , pacific grove , ca , oct .",
    "2008 , pp . 17 .    the national renewable energy laboratory , `` western wind resources dataset , '' [ online ] available : http://wind.nrel.gov / web_nrel/.    s.  b. peterson , j.  f. whitacre , and j.  apt , `` the economics of using plug - in hybrid electric vehicle battery packs for grid storage , '' _",
    "j. power sources _ , vol .",
    "195 , no .  8 , pp . 23772384 , 2010 .",
    "`` the electric reliability council of texas , '' [ online ] available : http://www.ercot.com/.    m.  he , s.  murugesan , and j.  zhang , `` multiple timescale dispatch and scheduling for stochastic reliability in smart grids with wind generation integration , '' in _ proc .",
    "ieee infocom11 _ , shanghai , china , apr .",
    "2011 , pp . 461465 .",
    "b.  karimi and v.  namboodiri , `` capacity analysis of a wireless backhaul for metering in the smart grid , '' in _ proc .",
    "ieee infocom12 _ , orlando , fl , mar .",
    "2012 , pp . 6166 .",
    "z.  lu , w.  wang , and c.  wang , `` hiding traffic with camouflage : minimizing message delay in the smart grid under jamming , '' in _ proc .",
    "ieee infocom12 _ , orlando , fl , mar .",
    "2012 , pp .",
    ".    m.  a. rahman , p.  bera , and e.  al - shaer , `` smartanalyzer : a noninvasive security threat analyzer for ami smart grid , '' in _ proc .",
    "ieee infocom12 _ , orlando , fl , mar .",
    "2012 , pp . 22552263 .",
    "h.  ma , h.  li , and z.  han , `` a framework of frequency oscillation in power grid : epidemic propagation over social networks , '' in _ proc .",
    "ieee infocom12 _ , orlando , fl , mar .",
    "2012 , pp . 6772 .",
    "h.  liang , b.  j. choi , w.  zhuang , and x.  shen , `` towards optimal energy store - carry - and - deliver for phevs via v2 g system , '' in _ proc .",
    "ieee infocom12 _ , orlando , fl , mar .",
    "2012 , pp . 16741682",
    ".    x.  liu , `` economic load dispatch constrained by wind power availability : a wait - and - see approach , '' _ ieee smart grid _",
    ", vol .  1 , no .  3 , pp .",
    "347355 , dec . 2010 .",
    "x.  fang , d.  yang , and g.  xue , `` online strategizing distributed renewable energy resource access in islanded microgrids , '' in _",
    "ieee globecom11 _ , huston , tx , dec .",
    "2011 , pp . 19311937 .",
    "n.  li , l.  chen , and s.  h. low , `` optimal demand response based on utility maximization in power networks , '' in _ 2011 ieee pes general meeting _",
    ", detroit , mi , jul . 2011 , pp .",
    "i.  koutsopoulos , v.  hatzi , and l.  tassiulas , `` optimal energy storage control policies for the smart power grid , '' in _",
    "ieee smartgridcomm11 _ , oct .",
    "2011 , pp . 475480 .",
    "s.  x. chen , h.  b. gooi , and m.  q. wang , `` sizing of energy storage for microgrids , '' _ ieee trans .",
    "smart grid _",
    ", vol .  3 , no .  1 ,",
    "142151 , mar .",
    "m.  j. neely , a.  s. tehrani , and a.  g. dimakis , `` efficient algorithms for renewable energy allocation to delay tolerant consumers , '' in _",
    "ieee smartgridcomm10 _ , oct .",
    "2010 , pp .",
    "549554 .",
    "r.  urgaonkar , b.  urgaonkar , m.  j. neely , and a.  sivasubramaniam , `` optimal power cost management using stroed energy in data centers , '' in _ proc .",
    "acm sigmetrics11 _ , san jose , ca , jun .",
    "2011 , pp . 221232 .",
    "with the drift defined as in ( [ eq : driftdef ] ) , we have @xmath71 + \\right . \\nonumber\\\\               & & \\hspace*{-0.6 in } \\left",
    ". \\sum_{n=1}^n [ ( z_n(t+1))^2 - ( z_n(t))^2 | z_n(t ) ] \\right\\}\\nonumber\\ ] ] @xmath214 \\right\\ } + \\frac{1}{2 } \\mathbb{e } \\left\\{\\sum_{n=1}^n \\left [ i_n(t)^2 + \\right .",
    "\\nonumber \\\\               & & \\hspace*{-0.6 in } ( \\delta_n\\alpha_n(t))^2 + 2z_n(t)(i_n(t ) - \\delta_n\\alpha_n(t))|z_n(t)\\}\\nonumber\\ ] ] @xmath215\\ } + \\nonumber \\\\               & & \\hspace*{-0.6 in } \\sum_{k=1}^k \\mathbb{e}\\{x_k(t)(r_k(t ) - d_k(t))|x_k(t)\\ } + \\nonumber \\ ] ] @xmath216\\ } +   \\nonumber\\\\               & & \\hspace*{-0.6 in } \\frac{1}{2 } \\sum_{n=1}^n\\mathbb{e}\\{2z_n(t)(1-\\delta_n(t))\\alpha_n(t ) - \\nonumber\\\\               & & \\hspace*{-0.6 in } ( z_n(t ) + \\alpha_n(t))p_n(t)|z_n(t)\\}\\nonumber\\\\               & \\hspace*{-1.0in}\\leq & \\hspace*{-0.6 in } b+\\sum_{n=1}^n\\mathbb{e}\\{z_n(t)(1-\\delta_n)\\alpha_n(t)|z_n(t)\\ } + \\nonumber\\\\               & & \\hspace*{-0.6 in } \\sum_{k=1}^k\\mathbb{e}\\{x_k(t)(r_k(t ) - d_k(t))|x_k(t)\\ } - \\nonumber \\\\               & & \\hspace*{-0.6 in } \\sum_{n=1}^n\\mathbb{e}\\{(z_n(t ) + \\alpha_n(t))p_n(t)|z_n(t)\\}. \\nonumber               \\ ] ] where @xmath72 is a constant .",
    "in part 1 ) of lemma  [ lm : lm1 ] , if @xmath82 , we have @xmath83 according to  ( [ eq : sellconst ] ) .",
    "the the objective function of problem  ( [ eq : objdrift ] ) becomes @xmath217    we first prove lemma  [ lm : lm1]-[item : item1a ] ) . if @xmath84 , we assume @xmath218 .",
    "then we have @xmath87 according to  ( [ eq : batredecontr ] ) . accordingly",
    ", the object function  ( [ eq : lmqt ] ) is transformed to @xmath219 @xmath220 c(t)+\\nonumber\\\\ & & \\sum_{i \\neq k}{x_i(t)(r_i(t ) - d_i(t ) ) } - \\sum_{n=1}^n{(z_n(t ) + \\alpha_n(t))p_n(t)}. \\nonumber\\end{aligned}\\ ] ] the above inequality is due to @xmath84 and @xmath221 .",
    "the last expression shows , given the assumption @xmath218 , we may find another feasible electricity allocation scheme @xmath222 , which can achieve a smaller objective value by choosing @xmath85 and @xmath87 .",
    "this contradicts with the assumption @xmath218 .",
    "thus , we prove that @xmath85 when @xmath84 , under the situation @xmath223 .",
    "we then prove the second part of lemma  [ lm : lm1]-[item : item1a ] ) .",
    "it follows  ( [ eq : batredecontr ] ) that @xmath85 if @xmath224 .",
    "then  ( [ eq : lmqt ] ) becomes @xmath225 c(t)+\\nonumber\\\\ & & \\hspace{-0.2 in } \\sum_{i \\neq k}{x_i(t)(r_i(t ) - d_i(t ) ) } - \\sum_{n=1}^n{(z_n(t ) + \\alpha_n(t))p_n(t)}.\\nonumber\\end{aligned}\\ ] ] the above inequality is due to @xmath226 and @xmath227 .",
    "the last expression shows , given the assumption @xmath224 , we may find another electricity allocation scheme with @xmath228 , which can achieve a smaller objective value by choosing @xmath85 and @xmath87 .",
    "this contradicts with the assumption @xmath229 .",
    "we thus prove that @xmath87 when @xmath86 , under the situation @xmath223 , which completes the proof of lemma  [ lm : lm1]-[item : item1a ] ) .",
    "we next prove lemma  [ lm : lm1]-[item : item1b ] ) .",
    "for the first part , if @xmath88 , we assume @xmath230 . following  ( [ eq : objdriftfull ] ) and @xmath83 , we have @xmath231 @xmath232 - \\alpha_n(t)p_n(t ) \\nonumber\\ ] ] @xmath233 @xmath234 - \\alpha_n(t)p_n(t ) \\nonumber\\ ] ] @xmath235c(t ) + \\sum_{k=1}^kx_k(t)(r_k(t ) - d_k(t ) ) + \\nonumber\\\\ & & \\hspace{-0.15 in } \\sum_{j\\neq n}(z_j(t)(1-\\delta_j)\\alpha_j(t ) - ( z_j(t ) + \\alpha_j(t))p_j(t ) ) + \\nonumber\\\\ & & \\hspace{-0.15 in }   z_n(t)(1-\\delta_n)\\alpha_n(t ) - ( z_n(t ) + \\alpha_n(t))(1-\\delta_n)\\alpha_n(t).\\nonumber\\end{aligned}\\ ] ] the above inequality is due to @xmath88 and the assumption @xmath236 .",
    "the last equality shows , given the assumption @xmath236 , we may find another electricity allocation scheme with @xmath237 and @xmath238 , which can achieve a smaller objective value .",
    "this contradicts with the previous assumption .",
    "thus , we have @xmath89",
    ".    for the second part of lemma  [ lm : lm1]-[item : item1b ] ) , assume @xmath239 for @xmath240.it follows  ( [ eq : sellconst ] ) that @xmath83 . the objective function  ( [ eq : objdriftfull ] ) can be written as @xmath241 @xmath242 @xmath243c(t ) + \\sum_{k=1}^kx_k(t)(r_k(t ) - d_k(t ) ) + \\nonumber\\\\ & & \\sum_{j\\neq n}(z_j(t)(1-\\delta_j)\\alpha_j(t ) ) - \\sum_{j\\neq n}((z_j(t ) + \\alpha_j(t))p_j(t ) ) .",
    "\\nonumber\\ ] ] the first inequality is due to @xmath240 and the assumption @xmath239 . the second inequality is due to the non - negativity of @xmath50 and @xmath23 .",
    "the last equation shows , given the assumption @xmath239 , we may find another electricity allocation scheme with @xmath91 and @xmath244 , which can achieve a smaller objective value .",
    "this contradicts with the previous assumption .",
    "thus , we have @xmath245 , which completes the proof of lemma  [ lm : lm1]-[item : item1b ] ) .",
    "in part  [ enu : enu2 ] ) of lemma  [ lm : lm1 ] , if @xmath93 , we have @xmath92 according to  ( [ eq : sellconst ] ) .",
    "the objective function  ( [ eq : objdrift ] ) becomes @xmath246 we can prove part  [ enu : enu2 ] ) with a similar approach as in the case of part  [ enu : enu1 ] .",
    "the detailed proof is omitted for brevity .",
    "since @xmath247 and @xmath248 , we have @xmath85 when @xmath99 , and @xmath87 when @xmath249 according to lemma  [ lm : lm1]-[enu : enu1 ] ) . similarly , since @xmath250 and @xmath248 , we obtain @xmath85 when @xmath251 , and @xmath87 when@xmath98 according to lemma  [ lm : lm1]-[enu : enu2 ] )"
  ],
  "abstract_text": [
    "<S> microgrid ( mg ) is a promising component for future smart grid ( sg ) deployment . </S>",
    "<S> the balance of supply and demand of electric energy is one of the most important requirements of mg management . in this paper </S>",
    "<S> , we present a novel framework for smart energy management based on the concept of quality - of - service in electricity ( qose ) . </S>",
    "<S> specifically , the resident electricity demand is classified into _ </S>",
    "<S> basic usage _ and _ quality usage_. the basic usage is always guaranteed by the mg , while the quality usage is controlled based on the mg state . the microgrid control center ( mgcc ) </S>",
    "<S> aims to minimize the mg operation cost and maintain the outage probability of quality usage , i.e. , qose , below a target value , by scheduling electricity among renewable energy resources , energy storage systems , and macrogrid . </S>",
    "<S> the problem is formulated as a constrained stochastic programming problem . </S>",
    "<S> the lyapunov optimization technique is then applied to derive an adaptive electricity scheduling algorithm by introducing the qose virtual queues and energy storage virtual queues . </S>",
    "<S> the proposed algorithm is an online algorithm since it does not require any statistics and future knowledge of the electricity supply , demand and price processes . </S>",
    "<S> we derive several `` hard '' performance bounds for the proposed algorithm , and evaluate its performance with trace - driven simulations . </S>",
    "<S> the simulation results demonstrate the efficacy of the proposed electricity scheduling algorithm .    smart grid , microgrids , distributed renewable energy resource , lyapunov optimization , stability . </S>"
  ]
}