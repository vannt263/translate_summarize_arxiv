{
  "article_text": [
    "this paper is devoted to the following problem suggested by gideon  schechtman during the workshop in analysis and probability at texas a&m university , college station , texas , july 2013 :    [ p : gideon ] fix a constant @xmath0 and @xmath1 satisfying @xmath2 . characterize all metric spaces admitting embeddings with distortion @xmath3 into each @xmath4-dimensional banach space .",
    "the _ distortion _ of an ( injective ) embedding @xmath6 of a metric space @xmath7 into a metric space @xmath8 is defined by @xmath9    if @xmath10 , we say that @xmath11 is a _",
    "@xmath12-embedding _ , and that a metric space @xmath13 is _",
    "@xmath12-embeddable _ into a metric space @xmath14 .",
    "problem [ p : gideon ] can be viewed as a part of modern ramsey theory which seeks to characterize types of structures which can be found inside arbitrary structures that are sufficiently large . in the category of metric spaces in relations with their embeddability into banach spaces",
    "this work was initiated in @xcite .",
    "see @xcite , @xcite , and references therein for important ramsey - type results in the category of metric spaces .    since problem [ p : gideon ] is vague and somewhat unrealistic , schechtman also suggested a more specific problem  [ p : schechtman ] ( see below ) . before stating it we need to list known examples of metric spaces embeddable into each @xmath4-dimensional banach space :    * metric spaces admitting low - distortion embeddings into @xmath5-dimensional euclidean spaces .",
    "this class of examples is obtained as a corollary of the fundamental dvoretzky theorem ( see theorem  [ t : dvom ] ) which implies that for every @xmath15 there exists @xmath16 such that for each @xmath1 the space @xmath17 with @xmath18 can be linearly embedded into any @xmath4-dimensional banach space with distortion @xmath19 .",
    "it follows that any metric space which embeds with distortion @xmath20 into such @xmath17 can be embedded with distortion @xmath3 into any @xmath4-dimensional banach space .",
    "see section [ s : euclidean ] for more details . *",
    "a metric space is called _ equilateral _ if the distances between all pairs of distinct points in it are equal to the same positive number .",
    "an equilateral space is also called an _",
    "equilateral set_. equilateral spaces of size @xmath21 , where @xmath22 depends on @xmath12 , form another class of metric spaces satisfying the conditions of problem [ p : gideon ] . in section  [ s : equilateral ] we describe the known estimates for the distortion of embeddings of equilateral spaces and give a simple direct proof of the estimates that we will use for our results . * metric spaces from the classes mentioned in * ( a ) * and * ( b ) * can be combined using a general construction , called _ metric composition _",
    "( see definition  [ d : metrcomp ] ) , which was introduced in @xcite . in section  [ s : composition ] we present a detailed study of embeddability properties of metric compositions of metric spaces .",
    "we prove that for a suitable choice of parameters , the metric composition of metric spaces which embed well into a given banach space @xmath23 , also embeds well into @xmath23 ( theorem  [ t : mbeta ] , corollary  [ comp ] ) . applying this general construction to examples described in * ( a ) * and * ( b ) * we get more examples of metric spaces satisfying the conditions of problem [ p : gideon ] .",
    "in particular ultrametrics ( see section  [ s : hst&um ] ) can be obtained as metric compositions of equilateral sets described in * ( b)*. thus , as a corollary of our results , we obtain that ultrametrics of exponential size embed with uniformly bounded distortion into any @xmath4-dimensional banach space .",
    "we also provide a direct proof of this fact ( see proposition  [ p : khst ] and corollary  [ c : um ] ) .",
    "[ p : schechtman ] can one suggest examples satisfying the condition of problem [ p : gideon ] which are completely different from the ones mentioned in * ( a)(c ) * ?",
    "the main goal of this paper is to give an answer to this problem , that is , to present an example of a family of metric spaces which satisfy the condition of problem [ p : gideon ] , but do not belong to any of the classes * ( a)*-*(c)*. in section  [ s : snowdiam ] we show an example of a family of graphs , which we call _ weighted diamonds @xmath24 _ , which we prove do not arise from any of the discussed above examples , and which embed with uniformly bounded distortion into any banach space of dimension at least @xmath25 for a suitably chosen @xmath26 .",
    "the family @xmath27 was first constructed in @xcite , as an example of a family of topologically complicated series - parallel graphs which embed with uniformly bounded distortion into @xmath28 ( of infinite dimension ) . in the present paper",
    "we show that @xmath24 s are snowflaked versions of standard diamonds @xmath29 s .",
    "s are not uniformly doubling so the embeddability results for @xmath24 proved in @xcite and in the present paper do not follow from assouad s theorem ( see remark [ r : ass83&ost14 ] ) .",
    "our method of proof of the embeddability of @xmath24 s uses a mixture of @xmath30-net arguments and some `` linear '' manipulations .    in section  [ s : coral ]",
    "we show a more general construction of ` hierarchically built weighted graphs ' which can have topologically very complicated structure and which embed with uniformly bounded distortion into any banach space of specified dimension ( see theorem  [ t : gentwoway ] ) .",
    "we remind the following improvement of the dvoretzky theorem @xcite , which is due to milman @xcite ( we state it in a somewhat unconventional way ) .    [",
    "t : dvom ] for each @xmath31 exists @xmath32 such that any @xmath4-dimensional banach space @xmath33 contains a @xmath34-dimensional subspace @xmath35 with @xmath36 , such that @xmath35 is linearly isomorphic with @xmath17 with distortion @xmath19 .",
    "we assume that @xmath37 is chosen in the optimal way .",
    "let @xmath38 . theorem [ t : dvom ] immediately implies that any metric space which admits an embedding into @xmath17 , where @xmath39 , with distortion @xmath40 , also admits an embedding with distortion @xmath3 into any @xmath4-dimensional banach space .",
    "this relates our study with the following major open problem of the theory of metric embeddings : _ find an intrinsic characterization of those separable metric spaces @xmath7 that admit bilipschitz embeddings into @xmath41 for some @xmath42 .",
    "_ see @xcite for a discussion of this problem .",
    "one of the most important results on this problem is the assouad theorem , which we mention below ( theorem [ t : assouad ] ) .",
    "however , it should be mentioned that in the present context we are interested in the version of the problem for which the dimension is specified , see very interesting recent results related to this problem in @xcite , and related comments in ( * ? ? ?",
    "* remark 3.16 ) .",
    "it follows from standard volumetric estimates that the maximal @xmath30-separated set , for @xmath43 , contained in the unit ball of any @xmath4-dimensional banach space has cardinality at least @xmath44 .",
    "it is also easy to see that a bijection between any @xmath30-separated set in the unit ball and an equilateral space of the same cardinality has distortion @xmath45 .",
    "therefore an equilateral space of size @xmath46 admits an embedding with distortion @xmath3 into an arbitrary @xmath4-dimensional banach space .    a standard volumetric estimate also gives an upper bound on the cardinality of an equilateral space which can be embedded with distortion at most @xmath12 in an @xmath4-dimensional euclidean space .",
    "[ l : lowerequi ] let @xmath47 be an equilateral space which is @xmath12-embeddable into an @xmath4-dimensional banach space",
    ". then @xmath48 .",
    "let @xmath47 be equilateral with distances equal to @xmath49 , and @xmath50 be a @xmath12-embedding .",
    "we may assume that there is @xmath51 such that @xmath52 therefore @xmath53 and @xmath54 .",
    "the most precise , known , estimates for the distortion of an embedding of exponential size equilateral spaces in any banach space can be obtained using the following result of arias - de - reyna , ball , and villa @xcite ( an earlier version of this result was proved by bourgain , see ( * ? ? ?",
    "* theorem 4.3 ) , using milman s @xcite quotient of subspace theorem ) .",
    "[ t : abv ] let @xmath55 , @xmath33 be an @xmath4-dimensional banach space , @xmath56 its closed unit ball and @xmath57 , the lebesgue measure on @xmath56 normalized so that @xmath58 . if @xmath59 , then @xmath60    theorem [ t : abv ] implies that the set @xmath61 of points @xmath62 in @xmath56 for which @xmath63 satisfies @xmath64 . choosing @xmath65-separated points in the set @xmath61 , one by one , we get a @xmath65-separated set of cardinality at least @xmath66 this implies    [ bestdist ] for every @xmath67 there exists @xmath68 so that an equilateral set of size @xmath69 embeds in any @xmath4-dimensional banach space @xmath33 with distortion @xmath70 .",
    "it is a long standing open problem whether @xmath71 in corollary  [ bestdist ] can be replaced by 1 . that is    [ p : almeq ]",
    "does there exist a function @xmath72 such that for each @xmath73 and each @xmath42 , an equilateral space of size @xmath74 embeds in any @xmath4-dimensional banach space @xmath33 with distortion @xmath75 ?    the answer is known to be positive for banach space @xmath33 with a 1-subsymmetric basis @xcite , for uniformly convex banach spaces @xcite ( the function @xmath76 depends on the modulus of convexity ) , and in some other cases , see @xcite .    in the sequel we will use bilipschitz embeddings of equilateral sets into unit spheres of finite - dimensional banach spaces . for completeness",
    "we include a simple proof with the specific constants that we will use .    [",
    "l : apart ] there exists a constant @xmath77 , so that for every @xmath78 the unit sphere of every @xmath79-dimensional banach space @xmath33 contains @xmath80 elements of mutual distance at least @xmath81 .",
    "let @xmath82 and @xmath83 be the maximal @xmath81-separated set on @xmath84 .",
    "then @xmath85-balls centered at @xmath83 cover the set of points between the spheres of radius @xmath86 and @xmath87 .",
    "therefore the cardinality @xmath88 of @xmath83 satisfies :    @xmath89    so we need @xmath81 such that the following inequality holds for all @xmath78 : @xmath90    let @xmath91 .",
    "since the right - hand side is @xmath92 , the conclusion follows for @xmath93 . for @xmath94",
    "the conclusion is obvious .",
    "[ c : abitmore ] if we replace @xmath95 by @xmath96 in the statement of lemma  [ l : apart ] , we can take @xmath97 .",
    "the following general construction of combining metric spaces was introduced by bartal , linial , mendel and naor for their study of metric ramsey - type phenomena @xcite .",
    "[ d : metrcomp ] let @xmath98 be a finite metric space .",
    "suppose that there is a collection of disjoint finite metric spaces @xmath99 associated with the elements @xmath62 of @xmath98 .",
    "let @xmath100 .",
    "for @xmath101 , the _ @xmath102-composition _ of @xmath98 and @xmath103 , denoted by @xmath104 $ ] , is a metric space on the disjoint union @xmath105 .",
    "distances in @xmath104 $ ] are denoted @xmath106 and defined as follows .",
    "let @xmath107 and @xmath108 ; then : @xmath109 where @xmath110 .",
    "it is easily checked that the choice of the factor @xmath111 guarantees that @xmath106 is indeed a metric .",
    "we prove that the metric composition preserves embeddability properties of metric spaces in the following sense .",
    "[ t : mbeta ] let @xmath112 .",
    "let @xmath23 be a banach space and @xmath98 be a finite metric space which is @xmath113-embeddable in @xmath23 .",
    "let @xmath114 be a family of finite metric spaces which are @xmath115-embeddable in @xmath23 .",
    "let @xmath116 .",
    "then @xmath117 $ ] is @xmath118-embeddable in @xmath23 , where @xmath119 .",
    "in particular , if @xmath55 , @xmath120 , and @xmath121 then @xmath117 $ ] is @xmath122-embeddable in @xmath23 .    without loss of",
    "generality we can and do assume that @xmath123 let @xmath124 we denote the metric in @xmath117 $ ] by @xmath106 . for all @xmath125",
    "$ ] there exist @xmath126 so that @xmath127 , @xmath128 .",
    "we have @xmath129    by assumption , there exists @xmath130 so that for all @xmath126 , @xmath131    also , for all @xmath132 there exist @xmath133 , so that for all @xmath134 @xmath135 and @xmath136    let @xmath137 , and define @xmath138{\\longrightarrow}e$ ] by @xmath139 if @xmath140 for some @xmath132 .",
    "we claim that @xmath141 is an @xmath118-embedding , where @xmath142 .",
    "first we consider @xmath125 $ ] so that there exists @xmath143 with @xmath144 .",
    "then @xmath145 , and @xmath146 thus by we have @xmath147    next we consider @xmath125 $ ] so that @xmath148 , @xmath128 , for some @xmath126 , with @xmath149",
    ". then @xmath150 , and @xmath151    on the other hand",
    "@xmath152    this , together with , implies that @xmath141 is an @xmath118-embedding of @xmath153 $ ] into @xmath23 .    note that if @xmath121 then @xmath154    thus , if @xmath120 , then @xmath155 .",
    "@xcite[d : comp ] given a class @xmath156 of finite metric spaces , and @xmath157 , we define its closure @xmath158 under @xmath159-compositions as the smallest class @xmath160 of metric spaces that contains all spaces in @xmath156 and satisfies the following condition : let @xmath161 , @xmath162 , and associate with every @xmath132 a metric space @xmath99 that is isometric to a space in @xmath160 .",
    "then the space @xmath163 $ ] is also in @xmath160 .",
    "note that @xmath158 can be described as a union of smaller classes which have increasing complexity .",
    "more precisely @xmath164 where @xmath165 , and for @xmath166 , @xmath167 is the class of metric spaces of the form @xmath163 $ ] , where @xmath161 , @xmath162 , and @xmath114 , where for every @xmath132 a metric space @xmath99 is isometric to a space in @xmath168 .",
    "the operation of composition has the following associativity property .",
    "[ p : trans - comp ] let @xmath98 be a finite metric space , @xmath169 , @xmath170 and @xmath171 be families of finite metric spaces",
    ". then @xmath172 where @xmath173 is a family of finite metric spaces of the form @xmath174 , where @xmath132 and @xmath175 .    for each @xmath132 ,",
    "define @xmath176 as the disjoint union of @xmath177 over @xmath140 , with the metric inherited from @xmath178 .",
    "let @xmath173 be the collection of all @xmath176 @xmath179    denote the metric in @xmath178 by @xmath180 .",
    "for all @xmath181 there exist @xmath182 so that @xmath183 , @xmath184 , and @xmath185 so that @xmath127 , @xmath128 .",
    "we have @xmath186 where @xmath187    we claim that for every @xmath132 , there exists @xmath188 so that @xmath189 indeed , it is enough to observe that for every @xmath132 , @xmath190 , where @xmath191    to prove that @xmath172 we define @xmath192 observe that @xmath193 if @xmath194 then , by definition of @xmath195 , @xmath196 and thus , since @xmath197 , @xmath198 which is impossible .",
    "thus @xmath199 hence @xmath200 and the proposition is proven .    as an immediate corollary of proposition  [ p : trans - comp ] and",
    "we obtain .",
    "[ compcomp ] let @xmath201 be a family of finite metric spaces and @xmath202 .",
    "then @xmath203 .    as a consequence of theorem  [ t : mbeta ]",
    "we obtain the following result .",
    "[ comp ] let @xmath204 .",
    "let @xmath23 be a banach space and @xmath156 be a family of finite metric spaces which are @xmath113-embeddable in @xmath23 .",
    "let @xmath116 .",
    "then every space in @xmath158 is @xmath118-embeddable in @xmath23 , where @xmath205 .    in particular , for any @xmath55 , if @xmath121 then every space in @xmath158 is @xmath122-embeddable in @xmath23 .",
    "we prove this by induction on the level of complexity of spaces in @xmath158 .",
    "if @xmath206 , then by assumption , @xmath98 is @xmath113-embeddable in @xmath23 .",
    "suppose that for some @xmath166 , every space in @xmath168 is @xmath118-embeddable in @xmath23 .",
    "let @xmath207 .",
    "then there exist @xmath161 , @xmath162 , and @xmath114 , where for every @xmath132 a metric space @xmath99 is isometric to a space in @xmath168 , so that @xmath208.$ ] by assumption , @xmath98 is @xmath113-embeddable in @xmath23 , and by inductive hypothesis , every space in @xmath209 is @xmath118-embeddable in @xmath23 .",
    "thus by theorem  [ t : mbeta ] , @xmath33 is @xmath56-embeddable in @xmath23 , where @xmath210      an _ ultrametric _ is a metric space @xmath211 such that for every @xmath212 , @xmath213    these spaces appeared in a natural way in the study of @xmath214-adic number fields , see @xcite .",
    "currently ultrametrics play an important role in many branches of mathematics , see for example @xcite , @xcite , @xcite , and references therein .",
    "it is known that ultrametrics have very good embedding properties , see @xcite and its references . in particular",
    ", shkarin @xcite proved that for any finite ultrametric @xmath215 , there exists @xmath216 such that for any banach space @xmath23 with @xmath217 there exists an isometric embedding of @xmath98 into @xmath23 .",
    "in this result @xmath79 is large and depends on @xmath98 , not only on the cardinality of @xmath98 . observe that any isometric embedding of an equilateral space with @xmath4 points ( it is a simplest ultrametric ) into a euclidean space requires dimension @xmath218 .",
    "so isometric embeddings of ultrametrics require large dimension .",
    "the situation changes if we allow some distortion : bartal , linial , mendel and naor @xcite proved that there exist constants @xmath219 and @xmath26 such that any @xmath4-point ultrametric @xmath113-embeds into @xmath220 , for any @xmath221 and any @xmath222 .",
    "the goal of this section is to prove that there exists a universal constant @xmath12 such that any @xmath4-point ultrametric embeds into any banach space of dimension @xmath223 with distortion @xmath3 .",
    "it turns out that for embeddability of ultrametrics it is convenient to use the following , more restricted class of metrics .",
    "[ d : hst ] for @xmath224 , a @xmath34-_hierarchically well - separated tree _ ( @xmath34-hst ) is a metric space whose elements are the leaves of a rooted tree @xmath83 . to each vertex @xmath225",
    "there is associated a label @xmath226 such that @xmath227 if and only if @xmath228 is a leaf of @xmath83 .",
    "it is required that if a vertex @xmath228 is a child of a vertex @xmath229 then @xmath230 .",
    "the distance between two leaves @xmath231 is defined as @xmath232 , where @xmath233 is the least common ancestor of @xmath62 and @xmath234 in @xmath83 . a @xmath34-hst is said to be _ exact _ if @xmath235 for every two internal vertices ( that is , neither @xmath228 nor @xmath236 is a leaf ) where @xmath228 is a child of @xmath229 .    first , note that an ultrametric on a finite set and a ( finite ) @xmath49-hst are identical concepts .",
    "any @xmath34-hst is also a @xmath49-hst , i.e. , an ultrametric .",
    "when we discuss @xmath34-hst s , we freely use the tree @xmath83 as in definition  [ d : hst ] , which we refer to as _ the tree defining the _ hst .",
    "an internal vertex in @xmath83 with out - degree @xmath49 is said to be _",
    "degenerate_. if @xmath228 is nondegenerate , then @xmath237 is the diameter of the sub - space induced on the subtree rooted by @xmath228 .",
    "degenerate nodes do not influence the metric on @xmath83 s leaves ; hence we may assume that all internal nodes are nondegenerate ( note that this assumption need not hold for _ exact _",
    "@xmath34-hst s ) .    by (",
    "* ? ? ? * proposition  3.3 ) , the class of @xmath34-hst coincides with @xmath238 , where @xmath239 denotes the class of finite equilateral spaces .",
    "thus , by corollary  [ c : abitmore ] and corollary  [ comp ] , that there exists @xmath240 so that every @xmath34-hst , with @xmath241 , admits a bilipschitz embedding into any banach space @xmath33 with @xmath242 , where @xmath115 is the maximal out - degree of a vertex in the tree defining the @xmath34-hst , with a uniformly bounded distortion , which generalizes ( * ? ? ? * proposition  3 ) .",
    "our next goal is to provide an alternative more direct proof of this result .",
    "[ p : khst ] any @xmath34-hst with @xmath243 admits a bilipschitz embedding into any banach space @xmath33 with @xmath242 , where @xmath115 is the maximal out - degree of a vertex in the tree defining the @xmath34-hst , with distortion not exceeding @xmath244 .",
    "let @xmath229 be any of the non - leaf vertices of the tree defining the @xmath34-hst .",
    "the number of edges @xmath245 contributing to the out - degree of @xmath229 is at most @xmath115 .",
    "let @xmath246 . by corollary  [ c : abitmore ]",
    "there is an injective map @xmath247 from @xmath245 to the @xmath81-net on the unit sphere of @xmath33 . combining @xmath247 for all non - leaf vertices",
    "@xmath229 we get a ( no longer injective ) map @xmath248 from the edge set of the tree to the @xmath81-net .",
    "now we define the map @xmath11 on the set of leaves into @xmath33 , for a leaf @xmath249 let @xmath250}\\delta(t)\\varphi(t\\tilde t),\\ ] ] where @xmath251 is the root , @xmath252 is the last non - leaf on the way from @xmath251 to @xmath249 , @xmath253 $ ] is the path joining @xmath251 and @xmath252 ( path is regarded as a set of vertices ) , @xmath254 is the next after @xmath65 vertex on the path from @xmath251 to @xmath249 , and @xmath255 is the label assigned according to definition  [ d : hst ] .    let us estimate the distortion .",
    "let @xmath256 and @xmath28 be two leaves in the tree , @xmath229 be their least common ancestor , @xmath257 and @xmath258 be the first ( after @xmath229 ) vertices on the paths @xmath259 $ ] and @xmath260 $ ] , respectively .",
    "then ( we use the fact that @xmath261 ) @xmath262}\\delta(t)\\varphi(t\\tilde t)-\\sum_{t\\in[v,\\bar\\ell_2]}\\delta(t)\\varphi(t\\tilde t)\\right\\|\\\\ & \\ge\\delta(v)||\\varphi(vv_1)-\\varphi(vv_2)||- \\sum_{t\\in[v_1,\\bar\\ell_1]}\\delta(t)||\\varphi(t\\tilde t)||-\\sum_{t\\in[v_2,\\bar\\ell_2]}\\delta(t)||\\varphi(t\\tilde t)||\\\\ & \\ge\\frac1{8}\\delta(v)-2\\delta(v)\\left(\\frac1k+\\frac1{k^2}+\\frac1{k^3}+\\dots\\right)\\\\ & = d(\\ell_1,\\ell_2)\\left(\\frac1{8}-\\frac2{k-1}\\right ) \\end{split}\\ ] ] on the other hand , @xmath262}\\delta(t)\\varphi(t\\tilde t)-\\sum_{t\\in[v,\\bar\\ell_2]}\\delta(t)\\varphi(t\\tilde t)\\right\\|\\\\ & \\le\\sum_{t\\in[v,\\bar\\ell_1]}\\delta(t)||\\varphi(t\\tilde t)||+\\sum_{t\\in[v,\\bar\\ell_2]}\\delta(t)||\\varphi(t\\tilde t)||\\\\ & \\le2\\delta(v)\\left(1+\\frac1k+\\frac1{k^2}+\\frac1{k^3}+\\dots\\right)\\\\ & = d(\\ell_1,\\ell_2)\\frac{2k}{k-1}.\\qedhere \\end{split}\\ ] ]    since for any @xmath263 , any ultrametric is @xmath34-bilipschitz equivalent to a @xmath34-hst ( @xcite , see also ( * ? ? ? * lemma 3.5 ) ) , we obtain the following corollary of proposition [ p : khst ] ( which is an arbitrary - space version of results of @xcite and @xcite ) .",
    "[ c : um ] any @xmath4-point ultrametric embeds with uniformly bounded distortion into any banach space @xmath33 with @xmath264 .",
    "it is natural to try to achieve distortions arbitrarily close to @xmath49 in proposition  [ p : khst ] , provided that @xmath34 is sufficiently large and the dimension is a sufficiently large multiple of @xmath265 .",
    "this is what was done for embeddings into @xmath266 in @xcite , as a consequence of the fact that @xmath4-point equilateral sets can be @xmath267-embedded into @xmath220 with @xmath268 . by corollary  [ comp ] ( or a careful reading of the proof of proposition  [ p : khst ] )",
    "we obtain the same conclusion in every banach space that satisfies the condition of problem  [ p : almeq ] , see section  [ s : equilateral ] for a list of classes of spaces known to satisfy this condition .",
    "our basic example is the family of weighted diamonds @xmath269 introduced in @xcite .",
    "let us recall the definitions .",
    "[ d : diamonds ] diamond graphs @xmath270 are defined as follows : the _ diamond graph _ of level @xmath271 is denoted @xmath272 , it contains two vertices joined by an edge . the _ diamond graph _",
    "@xmath29 is obtained from @xmath273 as follows .",
    "given an edge @xmath274 , it is replaced by a quadrilateral @xmath275 , with edges @xmath276 , @xmath277 , @xmath278 , @xmath279 .",
    "( see figure  [ f : diamond2 ] for a sketch of @xmath280 . )",
    "[ scale=.25,auto = left , every node/.style = circle , draw ] ( n1 ) at ( 16,0 ) ; ( n2 ) at ( 5,5 ) ; ( n3 ) at ( 11,11 ) ; ( n4 ) at ( 0,16 ) ; ( n5 ) at ( 5,27 ) ; ( n6 ) at ( 11,21 ) ; ( n7 ) at ( 16,32 ) ; ( n8 ) at ( 21,21 ) ; ( n9 ) at ( 27,27 ) ; ( n10 ) at ( 32,16 ) ; ( n11 ) at ( 21,11 ) ; ( n12 ) at ( 27,5 ) ;    /in n1/n2,n1/n3,n2/n4,n3/n4,n4/n5,n4/n6,n6/n7,n5/n7,n7/n8,n7/n9,n8/n10,n9/n10,n10/n11,n10/n12,n11/n1,n12/n1 ( )  ( ) ;    [ d : w_k ] we pick a number @xmath281 .",
    "the sequence @xmath269 of _ weighted diamonds _ is defined in terms of diamonds @xmath270",
    "as follows ( see figure [ f : graphw ] for a sketch of @xmath282 ) :    * @xmath283 is the same as @xmath272 . the only edge of @xmath272 is given weight @xmath49 .",
    "* @xmath284 with edges of @xmath285 given weights @xmath286 ; weight of the edge of @xmath283 stays as @xmath49 ( as it was in the first step of the construction ) .",
    "* @xmath287 with edges of @xmath280 given weights @xmath288 ; weights of the edges of @xmath289 stay as they were in the previous step of the construction .",
    "* @xmath290 with edges of @xmath29 given weights @xmath291 ; weights of the edges of @xmath292 stay as they were in the previous step of the construction . *",
    "graphs @xmath27 are endowed with their shortest path distances which we denote @xmath293 .",
    "observe that the metric of @xmath24 depends on @xmath294 although we do not reflect this fact in our notation .",
    "note that @xmath295 has @xmath296 edges and that in each step we introduce @xmath297 new vertices of @xmath298 per each edge of @xmath299 .",
    "hence @xmath298 , @xmath300 , has @xmath301 vertices .",
    "thus @xmath302 for @xmath303 , and @xmath304    [ scale=.25,auto = left , every node/.style = circle , draw ] ( n1 ) at ( 16,0 ) ; ( n2 ) at ( 5,5 ) ; ( n3 ) at ( 11,11 ) ; ( n4 ) at ( 0,16 ) ; ( n5 ) at ( 5,27 ) ; ( n6 ) at ( 11,21 ) ; ( n7 ) at ( 16,32 ) ; ( n8 ) at ( 21,21 ) ; ( n9 ) at ( 27,27 ) ; ( n10 ) at ( 32,16 ) ; ( n11 ) at ( 21,11 ) ; ( n12 ) at ( 27,5 ) ;    /in n1/n2,n1/n3,n2/n4,n3/n4,n4/n5,n4/n6,n6/n7,n5/n7,n7/n8,n7/n9,n8/n10,n9/n10,n10/n11,n10/n12,n11/n1,n12/n1,n1/n7,n1/n4,n4/n7,n7/n10,n10/n1 ( )  ( ) ;    using a mixture of @xmath30-net arguments ( lemma [ l : apart ] ) and some `` linear '' manipulations we prove that @xmath24 s admit bounded - distortion embeddings into all banach spaces with dimension bounds which are substantially smaller than the ones implied by the dvoretzky - type theorem [ t : dvom ] .",
    "namely , in section  [ s : embw_kanybs ] we prove the following result ( corollary  [ cor : anyemb - old ] ) .",
    "[ cor : anyemb ] for every @xmath305 , there exist constants @xmath306 so that for every @xmath307 , @xmath24 can be embedded in every banach space @xmath33 with @xmath308 with the distortion bounded from above by a constant which depends only on @xmath294 .",
    "before proving corollary  [ cor : anyemb ] we study the structure of the weighted diamonds @xmath24 .",
    "we show that they are snowflaked versions of standard diamonds @xmath29 and that @xmath24 s are not included in the set of examples presented in section  [ s : equi&eucl&mix ] .      the following definition is standard ( see @xcite ) :    [ d : snowflake ] let @xmath13 be a metric space and @xmath309 .",
    "the space @xmath33 endowed with a modified metric @xmath310 is called a _ snowflake _ of @xmath13 .",
    "we also say that @xmath311 is an _",
    "@xmath312-snowflaked version _ of @xmath13 .",
    "one of the standard metrics on diamonds @xmath313 is the shortest path distance obtained under the assumption that each edge in @xmath295 has length @xmath314 .",
    "let us denote this metric @xmath315 .",
    "[ p : snowflake ] for any @xmath316 there exists @xmath317 so that the natural identity bijections of ( vertex sets of ) weighted diamonds @xmath318 onto ( vertex sets of ) @xmath312-snowflaked versions of diamonds @xmath319 have uniformly bounded distortions for all @xmath320 .    for the proof",
    "we need the following fact about the structure of shortest paths in @xmath24 , which was proved in ( * ? ? ?",
    "* claim 4.1 ) .",
    "[ c : le2 ] a shortest path between two vertices in @xmath24 can contain edges of each possible length : @xmath321 at most twice .",
    "actually for @xmath49 this can happen only once because there is only one such edge .",
    "if there are two longest edges , they are adjacent .",
    "( this proof is a slightly modified version of the proof in @xcite ; we include it here for the convenience of the readers . )",
    "let @xmath322 be one of the longest edges in the path and @xmath323 be its length .",
    "we assume that @xmath300 , the case @xmath324 can be considered on the same lines , it is even easier .    as for diamonds ,",
    "we define _ weighted subdiamonds _ to be subsets of @xmath24 which evolved from an edge ( as sets of vertices they coincide with the subdiamonds defined in @xcite ) .",
    "the edge from which a subdiamond evolved is called its _",
    "diagonal_.    consider the subdiamond @xmath325 containing @xmath322 with diagonal of length @xmath326 .",
    "let @xmath327 .",
    "without loss of generality we may assume that @xmath228 is one of the ends of the diagonal of @xmath325 , denote the other end by @xmath65 .",
    "the rest of the path consists of two pieces , starting at @xmath228 and @xmath229 , respectively .",
    "we claim that the part which starts at @xmath229 can never leave @xmath325 .",
    "it obviously can not leave through @xmath228 .",
    "it can not leave through @xmath65 , because otherwise the piece of the path between @xmath228 and @xmath65 could be replaced by the diagonal of @xmath325 , which is strictly shorter .",
    "this implies that the part of the path in @xmath325 which starts at @xmath229 can contain edges only shorter than @xmath323 . for the next edge in this part of the path we can repeat the argument and get , by induction , that lengths of edges in the remainder of the path in @xmath325 are strictly decreasing .",
    "the part of the path which starts at @xmath228 can be considered similarly .",
    "the last statement of the lemma is immediate from the proof .",
    "let @xmath316 and let @xmath286 be the weight of edges of @xmath328 which are not in @xmath283 . pick @xmath329 so that @xmath330 .",
    "since every edge of @xmath295 has length @xmath314 , if we raise its length to the power @xmath331 , we get the length of the same edge in @xmath298 . therefore ( since @xmath332 satisfies the triangle inequality ) for any two vertices @xmath333 of @xmath295 ( or @xmath298 ) we have @xmath334    to get the inequality in the other direction , let @xmath335 be the one of the ( at most two ) longest edges in the shortest @xmath336-path in @xmath298 . we claim that @xmath337    if is satisfied , then by lemma  [ c : le2 ] and since @xmath335 is an edge we have @xmath338    we assume without loss of generality that the shortest @xmath336-path visits @xmath228 before @xmath229 . to prove we consider three possible cases .    1 .   both @xmath62 and @xmath234",
    "are contained in the subdiamond @xmath325 with diagonal @xmath335 .",
    "exactly one of @xmath62 , @xmath234 is contained in the subdiamond @xmath325 with the diagonal @xmath335 .",
    "none of @xmath62 , @xmath234 is contained in the subdiamond @xmath325 with the diagonal @xmath335 .",
    "let @xmath339 be the smallest number such that @xmath340 it is clear that @xmath341 if @xmath342 .     and",
    "@xmath343 in subdiamond @xmath325 ]    we show that in case 1 @xmath234 is contained in one of the subdiamonds of @xmath325 whose diagonal has length @xmath345 , and @xmath229 is one of its ends .",
    "in fact , otherwise the @xmath346-path in @xmath298 , which is a part of the shortest @xmath336-path which we consider , contains a vertex @xmath347 of the subdiamond @xmath325 for which @xmath348 is an edge of @xmath298 satisfying @xmath349 for some positive integer @xmath350 .",
    "but then there is a @xmath351-path @xmath352 in @xmath298 which is strictly shorter than any @xmath351-path @xmath343 through @xmath229 , contrary to our assumption that one of the shortest @xmath336-paths passes through @xmath228 and @xmath229 . to see this",
    "we observe that we can pick @xmath352 ( see figure [ f : subdiamonds ] ) of length @xmath353 and that @xmath343 is of length at least @xmath354 the conclusion @xmath355 follows from @xmath350 and the definition of @xmath356 .",
    "the statement that @xmath234 is contained in one of the subdiamonds of @xmath325 whose diagonal has length @xmath345 , and @xmath229 is one of its ends implies that @xmath357 since @xmath341 .",
    "similarly we prove that @xmath358 .",
    "we conclude that @xmath359 so the inequality is satisfied when case 1 holds .    in cases 2 and 3",
    "we consider the subdiamond of @xmath298 with the diagonal of the length @xmath360 ( where @xmath361 is the length of @xmath335 in @xmath298 ) .",
    "we may assume without loss of generality that the diagonal of this subdiamond is of the form @xmath362 .",
    "we denote by @xmath363 the other vertex for which both @xmath364 and @xmath365 have length @xmath361 .    because of lack of symmetry we consider separately case 2a , where @xmath62 is and @xmath234 is not in the subdiamond @xmath325 with the diagonal @xmath335 , and case 2b , where @xmath234 is and @xmath62 is not in the subdiamond @xmath325 with the diagonal @xmath335 .    in case 2a the vertex @xmath234",
    "is contained in the subdiamond with the diagonal @xmath366 ( because the edge @xmath362 is shorter than any other @xmath362-path ) .",
    "also @xmath367 for the same reason as in case 1 .",
    "hence @xmath368 .    in case 2b",
    "there are two subcases : where @xmath62 is in the subdiamond with the diagonal @xmath362 , and where @xmath62 is not there . in both cases",
    "it is easy to see that the shortest in @xmath295 @xmath336-path can not be shorter than @xmath369 .    in case 3",
    "the only situation in which the desired inequality is not immediate is the situation where @xmath62 is in the subdiamond with the diagonal @xmath365 and @xmath234 is in the subdiamond with the diagonal @xmath366 . in this case",
    "the shortest path contains both the edge @xmath364 and @xmath335 . replacing these edges by the edges @xmath365 and @xmath370 , we get one of the previously considered cases .    in this context",
    "it is natural to recall the following well - known result of assouad @xcite ( see also ( * ? ? ?",
    "* chapter 12 ) ) .",
    "[ d : doubl ] a metric space is called _ doubling _ if there exists @xmath371 such that each ball in this space can be covered by at most @xmath372 balls of twice smaller radius .",
    "[ t : assouad ] each snowflaked version of a doubling metric space admits a bilipschitz embedding into a euclidean space .",
    "[ dimension ] in the original proof of theorem  [ t : assouad ] the dimension @xmath372 of the receiving euclidean space and the distortion of the embedding depend both on the doubling constant of the metric space and on the amount @xmath312 of snowflaking , with @xmath372 going to @xmath373 , as @xmath312 approaches 1 .",
    "recently , naor and neiman @xcite ( cf . also @xcite ) obtained estimates of @xmath372 depending only on the doubling constant and independent of @xmath312 , for @xmath374 .",
    "[ r : ass83&ost14 ] the spaces @xmath318 do not satisfy the assumptions of theorem  [ t : assouad ] , i.e. the spaces @xmath313 are not uniformly doubling .",
    "indeed , balls of radius @xmath314 centered at the bottom of @xmath295 contain @xmath375 vertices of mutual distance @xmath376 , in addition to the bottom vertex , and thus no pair of such vertices is contained in any ball of radius @xmath377 .",
    "note that the doubling condition is important for @xmath28-embeddability in theorem  [ t : assouad ] .",
    "consider , for example , the space @xmath378 and @xmath379 , and apply ( * ? ? ?",
    "* lemma 2.1 ) .",
    "thus the results about embeddings of @xmath318 in @xcite and in the present paper are not covered by the assouad theorem ( theorem [ t : assouad ] ) .",
    "the goal of this section is to show that the bilipschitz embeddability of @xmath24 s into an arbitrary banach space of dimension @xmath380 with uniformly bounded distortion does not follow from results of section  [ s : equi&eucl&mix ] .",
    "we start from two simple results about nonembeddability of @xmath24 s with uniformly bounded distortion into low - dimensional euclidean spaces and equilateral spaces .",
    "[ p : eucnolog ] the distortions of embeddings of @xmath24 into @xmath381 can be uniformly bounded only if @xmath382 for some @xmath26 .",
    "this is an immediate consequence of lemma  [ l : lowerequi ] and the following lemma .",
    "[ l : equiwn ] the spaces @xmath24 contain equilateral subsets of sizes @xmath96 for all @xmath383 .",
    "the bottom vertex @xmath384 of @xmath24 is adjacent in @xmath385 to @xmath96 vertices @xmath386 with edges of length @xmath387 joining them and @xmath384 , and thus for all @xmath388 , with @xmath389 , @xmath390 .",
    "the same argument shows non - embeddability of @xmath24 s with uniformly bounded distortion into any low - dimensional banach spaces .",
    "nonembequilateral the spaces @xmath24 can not be embedded with uniformly bounded distortion into any equilateral spaces .",
    "the maximal distance between two elements in @xmath24 is @xmath391 , and the minimal distance is @xmath291 .",
    "hence any embedding of @xmath24 into an equilateral space has distortion greater than or equal to @xmath392 .",
    "thus , since @xmath393 , the distortions are not uniformly bounded .    in the next two propositions we show that @xmath24 s do not admit bilipschitz embeddings with uniformly bounded distortions into spaces of the form @xmath394 , where @xmath395 , the collection @xmath103 of metric spaces is such that @xmath24 do no admit bilipschitz embeddings with uniformly bounded distortions into any @xmath396 and @xmath98 is either an equilateral space or a metric space that admits a bounded - distortion embedding into a @xmath397 for @xmath42 , let @xmath398 be constants so that there exists a finite equilateral metric space @xmath98 , @xmath395 , and @xmath399 a collection of finite metric spaces so that for any @xmath132 , @xmath24 can not be embedded into @xmath99 with distortion @xmath400 , and so that there exists an embedding @xmath401 such that for all @xmath402 , @xmath403 then @xmath404    since @xmath98 is equilateral , we have @xmath405 where @xmath406 .",
    "since for any @xmath132 , @xmath24 can not be embedded into @xmath99 with distortion @xmath400 , there exist @xmath407 so that @xmath408    in @xmath24 we can travel between any pair of vertices using edges of the smallest available length , i.e. there exists a sequence of vertices @xmath409 so that @xmath410 , @xmath411 , and for all @xmath412 , @xmath413 for @xmath412 , let @xmath414 . by , there exists @xmath415 so that @xmath416 , @xmath417 , and @xmath418",
    ". thus @xmath419 . hence by ,",
    "we have @xmath420    now let @xmath421 be such that @xmath422 . then @xmath423    if there exists @xmath132 so that @xmath424 , then @xmath425",
    ". therefore , combining and , since @xmath426 , we obtain @xmath427    if @xmath428 , where @xmath149 , then @xmath429 . therefore , combining and , we obtain @xmath430 since @xmath431 , in either case the proposition is proven .",
    "[ p : newitheuclstart ] let @xmath219 .",
    "for @xmath42 , let @xmath398 be constants , possibly depending on @xmath113 , so that there exists a finite metric space @xmath98 which admits a @xmath113-embedding into a @xmath432-dimensional euclidean space , @xmath395 , and @xmath399 a collection of finite metric spaces so that for any @xmath132 , @xmath24 can not be embedded into @xmath99 with distortion @xmath400 , and so that there exists an embedding @xmath401 such that for all @xmath402 , @xmath433 then for all @xmath219 , @xmath404    by lemma  [ l : equiwn ] , since @xmath434 , the spaces @xmath24 contain equilateral subsets @xmath435 of sizes @xmath436 with distances between their elements equal to @xmath437 .",
    "by we have @xmath438 .",
    "thus , by lemma  [ l : lowerequi ] , @xmath435 do not admit bilipschitz embeddings with uniformly bounded distortions into a @xmath439-dimensional euclidean space , and thus into @xmath98 .",
    "therefore @xmath440 maps some elements of @xmath441 into the same set @xmath442 for some @xmath443 ( see definition  [ d : metrcomp ] ) .",
    "we have @xmath444 and @xmath445    on the other hand , our assumptions imply that all elements of @xmath24 are not mapped into the same set @xmath99 , that is there exist vertices @xmath257 and @xmath258 of @xmath24 which are mapped into sets @xmath446 and @xmath447 with @xmath448 . using the same argument as in the proof of in proposition  [ notequibeta ] , we obtain that there exist @xmath449 so that @xmath450 where @xmath451 . by and we get @xmath452    therefore    @xmath453 since @xmath431 , the proposition is proven .    we are now ready to prove the main result of this subsection .",
    "we denote by @xmath454 the class of all finite equilateral spaces , by @xmath455 , for @xmath42 and @xmath219 , the class of all finite metric spaces that admit embeddings into @xmath456-dimensional euclidean spaces with distortion @xmath457 , and let @xmath458 .",
    "wndoesnotembed for any @xmath459 , the spaces @xmath24 do not admit embeddings with a uniformly bounded distortion into metric spaces @xmath460 .",
    "the proof is by induction on the level @xmath79 of complexity of spaces @xmath460 as defined in .",
    "the base case @xmath461 follows from propositions  [ p : eucnolog ] and [ nonembequilateral ] . by proposition  [ p : trans - comp ]",
    ", the inductive step follows from propositions  [ notequibeta ] and [ p : newitheuclstart ] .",
    "we prove first that weighted diamonds can be embedded into low dimensional spaces with a basis with distortion which is bounded by a constant that depends only on @xmath294 and the basis constant of the target space .",
    "[ t : embany ] for every @xmath219 and @xmath462 there exists a constant @xmath463 so that for every @xmath303 , @xmath24 @xmath115-embeds into every banach space @xmath33 with a schauder basis with basis constant smaller than or equal to @xmath113 and of dimension @xmath464 .    to apply theorem [ t : embany ] to embeddings into arbitrary finite dimensional spaces we need to know what is the best estimate for the dimension of a subspace with a basis constant @xmath113 in any @xmath4-dimensional banach spaces .",
    "more precisely , we are interested in lower bounds for the following problem .    [",
    "p : basis ] let @xmath465 .",
    "define the function @xmath466 to be the largest @xmath467 so that each @xmath4-dimensional banach space contains a @xmath34-dimensional subspace with basis constant at most @xmath113 .",
    "what are the estimates for @xmath466 ?    known upper estimates can be found in @xcite .",
    "many experts believe that the techniques of @xcite ( which go back to gluskin @xcite and szarek @xcite ) can be used to achieve the upper bound of order @xmath468 ( perhaps multiplied by some power of a logarithm ) , but it does not seem that anyone has worked this out .",
    "the best lower bound for @xmath466 that we have found in the literature is a result szarek and tomczak - jaegermann @xcite , where they studied the nontrivial projection problem .",
    "thus they were interested in ` large ' subspaces with ` large ' codimension which have small projection constants in comparison with their dimension , but since the subspaces found in @xcite were close to @xmath469 with @xmath470 , their result can be used for our purposes .",
    "it appears that techniques of @xcite could be useful for further work on lower estimates for problem [ p : basis ] .",
    "we state here the result of @xcite in the form closest to the answer to problem  [ p : basis ] .",
    "[ sztj ] there exist absolute constants @xmath471 so that for every @xmath472 and for every @xmath4-dimensional normed space @xmath33 , there exists a subspace @xmath473 so that @xmath474 and @xmath475 is @xmath113-isomorphic to an @xmath266-space for some @xmath470 .    as an immediate consequence of theorems  [ t : embany ] and [ sztj ] we obtain that @xmath24 s can be embedded with uniformly bounded distortion in an arbitrary banach space of dimension @xmath25 , for some fixed @xmath476 .",
    "[ cor : anyemb - old ] for every @xmath305 , there exist constants @xmath306 so that for every @xmath307 , @xmath24 can be embedded in every banach space @xmath33 with @xmath308 with the distortion bounded from above by a constant which depends only on @xmath294 .",
    "the remainder of this section is devoted to the proof theorem  [ t : embany ] .",
    "fix @xmath219 , @xmath55 , and @xmath303 .",
    "let @xmath33 be any banach space with @xmath477 , and with a schauder basis @xmath478 with basis constant at most @xmath113 so that @xmath479 for all @xmath480 .",
    "let @xmath481 , @xmath482 , @xmath483 , for @xmath484 .",
    "note that , for @xmath485 , @xmath486 , and thus , by and since @xmath303 , @xmath487 thus there are enough basis vectors in @xmath33 to define all these subspaces . for @xmath488 ,",
    "let @xmath489 be elements of the unit sphere of @xmath490 satisfying the conditions of lemma  [ l : apart ] with @xmath491 .",
    "it is easy to see that for any @xmath488 , any @xmath492 , and any @xmath22 with @xmath493 , we have @xmath494    note that for @xmath495 , @xmath496 and @xmath497 are supported on disjoint intervals with respect to the basis @xmath478 , and therefore @xmath498    we construct an embedding @xmath499 in the following way .    *",
    "the map @xmath435 maps the vertices of @xmath272 to @xmath271 and @xmath500 , respectively .",
    "it is clear that @xmath501 is an isometric embedding . *",
    "the map @xmath502 , @xmath503 , is an extension of the map @xmath504 .",
    "note that for each @xmath78 , @xmath505 .",
    "let @xmath506 be any bijective map .",
    "each vertex @xmath507 corresponds to a pair of vertices of @xmath508 : @xmath509 is the vertex of a @xmath297-edge path joining @xmath228 and @xmath229 .",
    "we map the vertex @xmath509 to @xmath510    now we estimate the distortion of @xmath435 .",
    "first we observe that the map @xmath435 is @xmath49-lipschitz .",
    "this can be proved for @xmath511 by induction on @xmath512 .",
    "it suffices to observe that for each edge @xmath335 in @xmath508 and each vertex @xmath509 satisfying the condition of the previous paragraph we have @xmath513 and @xmath514    to estimate from above the lipschitz constant of @xmath515 we consider any shortest path @xmath516 between two vertices @xmath517 in @xmath24 .",
    "let @xmath518 be the length of the longest edge in it .",
    "by lemma  [ c : le2 ] ,    @xmath519    on the other hand , since the subspaces @xmath490 are supported on disjoint intervals with respect to the basis @xmath478 , for every @xmath520 , we have @xmath521 denotes the natural projection onto @xmath490 .",
    "let @xmath522 be the smallest number such that @xmath523 such a number @xmath356 obviously exists if @xmath55 .",
    "it is clear that @xmath341 if @xmath524 , and that @xmath356 depends only on @xmath294 .",
    "now we turn to estimates of @xmath525 from below .",
    "let @xmath336 be one of the edges of the largest length @xmath518 in the path @xmath516 from @xmath509 to @xmath347 ( by lemma  [ c : le2 ] we know that path @xmath516 contains at most two such edges ; and that if there are two of them , they share a vertex ) .",
    "we restrict our attention to the case where at least one of the vertices @xmath333 is not it @xmath283 ; the excluded case can be considered along the same lines . without loss of generality",
    "we assume that @xmath526 and @xmath527 .",
    "let @xmath528 be the vertex in @xmath529 so that @xmath530 is an edge of the length @xmath531 and @xmath234 belongs to the subdiamond with diagonal @xmath532 .",
    "we assume that our notation is chosen in such a way that @xmath347 is closer to @xmath234 than to @xmath62 .",
    "then the part of the path @xmath516 from @xmath234 to @xmath347 does not contain an edge of length @xmath518 , and @xmath347 is either in the subdiamond with diagonal @xmath533 , or in the subdiamond with diagonal @xmath534 .    to simplify the notation ,",
    "let us denote the vector @xmath535 by @xmath536 .",
    "[ l : try ] * ( i ) * if @xmath347 is in the subdiamond with the diagonal @xmath534 , then @xmath537 for some @xmath538 .    *",
    "( ii ) * if @xmath347 is in the subdiamond with diagonal @xmath533 , then @xmath539 for some @xmath540 .    *",
    "( iii ) * if @xmath509 is in the subdiamond with diagonal @xmath533 , then @xmath541 for some @xmath542 .    *",
    "( iv ) * if @xmath509 is not in the subdiamond with the diagonal @xmath533 , then @xmath543 for some @xmath544 and @xmath545 $ ] .    *",
    "( i ) * let @xmath347 is in the subdiamond with diagonal @xmath546 .",
    "observe that ends of edges of length @xmath547 with one end at @xmath548 and the other end in the subdiamond with the diagonal @xmath549 can not be in @xmath516 because then , by , the path through @xmath548 would be shorter .",
    "therefore @xmath550 where @xmath551 , @xmath552 , @xmath553 , and @xmath554 .",
    "note that @xmath555 where @xmath556 and @xmath557 .",
    "hence @xmath558 the conclusion follows .    *",
    "( ii ) * if @xmath347 is in the subdiamond with diagonal @xmath533 , since @xmath533 is a part of a shortest path , we conclude that the longest edge in the part of the path @xmath516 from @xmath234 to @xmath347 has length @xmath559 , where @xmath356 satisfies .",
    "thus @xmath560 where @xmath561 , @xmath562 , @xmath563 , and @xmath564    by we get @xmath565 the conclusion follows .    *",
    "( iii ) * if @xmath509 is in the subdiamond for which @xmath336 is the diagonal , similarly as in , we obtain @xmath566 where @xmath567 , @xmath568 , and @xmath569 . by , @xmath570 and we are done in this case .    *",
    "( iv ) * if @xmath509 is not in the subdiamond for which @xmath336 is the diagonal , let @xmath571 , @xmath572 , be the vertex which is an endpoint of an edge of length @xmath573 which is a diagonal of the subdiamond that contains @xmath509 . by construction , the projection of @xmath574 onto the subspace @xmath575 is a multiple of @xmath576 , with some coefficient @xmath545 $ ] .    observe that lemma [ l : try ] implies the estimate for the lipschitz constant of @xmath515 , and thus theorem [ t : embany ] , in all of the cases except the case where both * ( i ) * and * ( iii ) * hold .",
    "consider , for example the case where * ( i ) * and * ( iv ) * hold . then ( we use , , the conclusions of * ( i ) * and * ( iv ) * , the definition of @xmath536 and ) @xmath577 and this number depends only on @xmath113 and @xmath294 .",
    "it remains to consider the case when both * ( i ) * and * ( iii ) * hold . in this case",
    "we estimate from below the norm of @xmath578 .",
    "we use @xmath579 and @xmath580 with @xmath581 and @xmath582 .",
    "the value of @xmath384 actually does not matter for our argument , it is only important that @xmath583 .",
    "recall also that @xmath584 .",
    "therefore @xmath585 observe that each of the coefficients of @xmath586 and @xmath587 in this sum is at least @xmath588 there are two possible cases :    \\(a ) @xmath589 , @xmath590 ;    \\(b ) @xmath591 , @xmath592 .",
    "the cases are similar , so we consider the case ( a ) only .",
    "let @xmath593 be such that @xmath62 is in the subdiamond with diagonal @xmath594 , so @xmath595 , @xmath596 and @xmath597 we get    @xmath598 the obtained number depends only on @xmath113 and @xmath294 .",
    "this concludes the proof .",
    "the goal of this section is to generalize the results of section [ s : snowdiam ] to more general ` hierarchically built weighted graphs ' , which we denote @xmath599 and call _ corals _ because they are more chaotic than diamonds .",
    "[ d : coral ] we pick @xmath600 and a sequence @xmath601 of natural numbers so that @xmath602 and @xmath603 for all @xmath604 .",
    "the sequence @xmath605 of _ corals _ is defined inductively .",
    "vertices and edges of a coral come in _ generations",
    "_ denoted @xmath606 and @xmath607 , respectively .",
    "we proceed as follows ( see figure  [ coral1 ] for a sample graph @xmath608 ) :    * @xmath609 is the same as @xmath272 , i.e. @xmath610 consists of two vertices @xmath611 which are joined by one edge of weight @xmath49",
    ". thus @xmath612 , where @xmath613 , @xmath614 .",
    "* suppose that @xmath615 , @xmath616 , and @xmath617 have been already defined .",
    "let @xmath618 be a set of cardinality @xmath619 , disjoint with @xmath615 .",
    "the vertex set of the graph @xmath620 is @xmath621 .",
    "the set @xmath622 of new edges is a subset of edges joining the vertices of @xmath618 with @xmath615 .",
    "every edge in @xmath622 is is given weight @xmath623 .",
    "edges in @xmath622 are chosen so that each vertex in @xmath618 has degree @xmath49 or @xmath297 and if a vertex @xmath624 has degree @xmath297 then it is adjacent to vertices @xmath625 which are joined by an edge @xmath362 in @xmath626 , i.e. @xmath362 is of length @xmath627 in @xmath617 .",
    "+ ]    the graph @xmath628 depends on @xmath629 , the numbers @xmath630 , and on the choices that we make when we attach new vertices to already existing . for brevity , we do not reflect these dependencies in the notation for @xmath628 .",
    "note that a _ coral _ can be regarded as a chaotically branching snowflaked diamond in which we allow attaching smaller diamonds to vertices of larger diamonds .",
    "in particular the weighted graph @xmath24 is an example of a very regular coral .",
    "also one can think of the coral as constructed in a fractal - like fashion , where we start from two vertices joined by one edge . on the next step",
    "we replace the one edge by a copy of @xmath608 ( see figure  [ coral1 ] ) so the set of edges is now @xmath631 , where every edge in @xmath632 has length @xmath633 .",
    "we now replace every edge in @xmath632 by a scaled ( by @xmath633 ) version of @xmath608 , obtaining set @xmath634 of additional edges of length @xmath635 .",
    "we continue for arbitrary number of generations .",
    "the difference between this procedure and a true fractal is that every scaled copy of @xmath608 can have different number of vertices and edges , so the final graph can be very chaotic ( see figure  [ coral2 ] ) .",
    "our goal is to prove that corollary  [ cor : anyemb - old ] can be generalized for corals .",
    "we introduce the following function @xmath636 , @xmath637 @xmath638 shows the dimension which is sufficient to accommodate @xmath480 @xmath30-separated points , for @xmath491 , in the unit sphere , cf .",
    "lemma  [ l : apart ] .",
    "[ t : gentwoway ] let @xmath219 and @xmath639 .",
    "then there exists a constant @xmath640 , so that every coral @xmath628 with parameters @xmath633 and @xmath641 , @xmath115-embeds into any banach space @xmath33 which contains a basic sequence of length @xmath642 with basis constant @xmath457 .",
    "[ r : relwthw_n ] note that in the case when @xmath643 , theorem  [ t : gentwoway ] reduces to theorem  [ t : embany ] .",
    "referee analogs of theorem  [ wndoesnotembed ] and proposition  [ p : eucnolog ] do not hold for some families of corals .",
    "in fact , certain families of corals can embed in low dimensional euclidean spaces , for example a family consisting of a triangle with a progressively longer tails embeds into @xmath644 with uniformly bounded distortions .    for the proof of theorem  [ t : gentwoway ] we will need an analogue of lemma  [ c : le2 ] .",
    "[ c : le2rep ] a shortest path between two vertices in @xmath628 can contain edges of each possible length : @xmath645 at most twice . actually for @xmath49 this can happen only once because there is only one such edge .",
    "if there are two longest edges , they are adjacent .",
    "the proof of this lemma is a slightly modified version of the proof of lemma  [ c : le2 ] .",
    "we start with a definition of a notion analogous to the notion of a subdiamond .",
    "[ d : subcoral ] we define a _",
    "( degree 2 ) subcoral _ of a coral @xmath628 grown out of an edge @xmath335 to be the subgraph of @xmath628 induced by the set of vertices containing @xmath646 and viewed as constructed in steps such that the following conditions are satisfied :    \\(1 ) all vertices except @xmath228 and @xmath229 can be included into the subcoral only if they have degree @xmath297 when they appear for the first time ;    \\(2 ) all vertices which have degree @xmath297 when they appear , with both ends in the subcoral , get into the subcoral .    the edge from which a subcoral evolved is called its _",
    "diagonal_.    let @xmath327 be one of the longest edges in the path and @xmath627 be its length .    for each edge of the graph @xmath628 except the initial edge ,",
    "one of the ends was introduced later . assuming that @xmath322 is not the initial edge of the graph",
    ", we may assume that the vertex @xmath229 was introduced later than @xmath228 .",
    "there are two cases :    \\(1 ) the vertex @xmath229 was attached to two vertices of an edge @xmath362 .",
    "let @xmath325 be the subcoral which evolved from @xmath362 , so @xmath325 contains @xmath322 and has a diagonal of length @xmath647    \\(2 ) the vertex @xmath229 was attached to the vertex @xmath228 only .",
    "the rest of the path consists of two pieces : ( 1 ) the one which starts at @xmath229 ; ( 2 ) the one which starts at @xmath228 .",
    "we claim that in the case ( 1 ) the part which starts at @xmath229 can never leave @xmath325 .",
    "it obviously can not leave through @xmath228 , it can not leave through the @xmath509 also , because otherwise the piece of the path between @xmath228 and @xmath509 could be replaced by the diagonal of @xmath325 , which is strictly shorter .",
    "this implies that the part of the path in @xmath325 which starts at @xmath229 can contain edges only strictly shorter than @xmath627 .",
    "the same is true in the case ( 2 ) because only vertices of further generations will be attached to @xmath229 in this case and they are attached using edges of length @xmath648 .    for the next edge in the part of the path which starts at @xmath229 we can repeat the argument and get ( by induction ) that lengths of edges in the remainder of the path are strictly decreasing .",
    "the part of the path which starts at @xmath228 can be considered similarly .",
    "the last statement of the lemma is immediate from the proof .",
    "the proof is very similar to the proof of theorem  [ t : embany ] .",
    "let @xmath649 , @xmath33 be a banach space and @xmath650 be a basic sequence in @xmath33 with @xmath479 for all @xmath480 , and a basis constant @xmath457 .",
    "let @xmath481 , and @xmath651 , for @xmath485 .",
    "thus @xmath652 for @xmath488 .",
    "let @xmath653 be elements of the unit sphere of @xmath490 satisfying the conditions of lemma  [ l : apart ] with @xmath491 ( observe that the definition of @xmath654 is such that it is always possible ) .",
    "note that for @xmath495 , @xmath496 and @xmath497 are supported on disjoint intervals with respect to the basis @xmath655 , hence @xmath656    we construct an embedding @xmath657 in the following way .",
    "we define it in steps for vertices of @xmath658    * the map @xmath83 maps the two vertices of @xmath610 to @xmath271 and @xmath500 , respectively .",
    "it is clear that it is an isometric embedding .",
    "* suppose that we have already constructed the restriction of @xmath83 to @xmath659 .",
    "our next step is to extend @xmath83 to @xmath660 .",
    "observe that our notation is such that there exists a bijection between @xmath660 and @xmath653 .",
    "let @xmath661 .",
    "we denote the vector corresponding to a vertex @xmath509 by @xmath662 .",
    "then we define @xmath663 as follows * * if the vertex @xmath509 is attached to two vertices @xmath664 , we let @xmath665 * * if the vertex @xmath509 is attached to one vertex @xmath666 , we let @xmath667    now we estimate the distortion of @xmath83 . first we show that the map @xmath83 is @xmath49-lipschitz .",
    "this can be proved for @xmath668 by induction on @xmath512 ( observe that the metric induced on @xmath669 from @xmath670 coincides with the metric of @xmath669 ) .",
    "it suffices to prove that for each @xmath671 and each edge @xmath362 in @xmath672 we have @xmath673 and @xmath674 .",
    "the equality @xmath673 follows immediately from our definitions . to prove that @xmath674",
    ", we need to consider two cases : ( a ) @xmath509 has degree @xmath49 in @xmath672 ; ( b ) @xmath509 has degree @xmath297 in @xmath672 .",
    "since @xmath675 , the desired inequality in the case ( a ) follows immediately from . in the case ( b ) we get @xmath676 where for the last inequality we use the assumption that @xmath335 is an edge in @xmath677 and therefore @xmath678 .    to estimate the lipschitz constant of @xmath679 from above we consider any shortest path @xmath516 between two vertices @xmath517 in @xmath628 .",
    "let @xmath680 be the length of the longest edge in it .",
    "by lemma  [ c : le2rep ] , @xmath681    on the other hand , since the subspaces @xmath490 are supported on disjoint intervals with respect to the basis @xmath655 , we have for every @xmath682 , @xmath683 we denote the natural projection of @xmath62 onto @xmath490 .",
    "let @xmath522 be the smallest number is such that @xmath684 such number @xmath356 obviously exists since @xmath685 .",
    "it is clear that @xmath341 since @xmath686 , and that @xmath356 depends only on @xmath629 .",
    "now we turn to estimates of @xmath687 from below .",
    "let @xmath336 be one of the edges of the largest length @xmath680 in the path @xmath516 from @xmath509 to @xmath347 ( by lemma  [ c : le2rep ] we know that the path @xmath516 contains at most two such edges ; and that if there are two of them , they share a vertex ) .",
    "without loss of generality  we assume that @xmath688 and @xmath689 .    * ( 1 ) * in the case where @xmath234 is of degree @xmath297 in @xmath690 let @xmath528 be the vertex in @xmath691 so that @xmath530 is an edge of the length @xmath692 in @xmath693 and @xmath694 is an edge of length @xmath680 in @xmath690 .",
    "then the part of the path @xmath516 from @xmath234 to @xmath347 does not contain an edge of length @xmath680 .",
    "furthermore , some part of this path ( from @xmath234 to @xmath347 ) , starting at @xmath234 ( possibly all of the path from @xmath234 to @xmath347 ) is either in the subcoral with diagonal @xmath533 , or in the subcoral with diagonal @xmath534 , and then leaves for parts of the coral which are attached to older parts of the coral through one vertex .",
    "let @xmath695 be the vertex at which this happens .",
    "we let @xmath696 if this never happens .    *",
    "( 2 ) * in the case where @xmath234 is of degree @xmath49 in @xmath690 we do the same , but in this case the only option which is available is the option of subcoral with the diagonal @xmath336 .    similarly we define @xmath697 . for simplicity",
    "we denote the vector @xmath698 by @xmath536 .",
    "[ l : try2 ] * ( i ) * if @xmath699 is in the subcoral with the diagonal @xmath534 , then @xmath700 for some @xmath701 .    *",
    "( ii ) * if @xmath699 is in the subcoral with diagonal @xmath533 , then @xmath702 for some @xmath703 .    * ( iii ) * if @xmath697 is in the subcoral with diagonal @xmath533 , then @xmath704 for some @xmath705 .    *",
    "( iv ) * if @xmath697 is not in the subcoral with the diagonal @xmath533 , then @xmath706 for some @xmath544 and @xmath707 $ ] .",
    "observe that the leftmost equalities in each of the statements follow immediately from , so we shall focus only on the rightmost equalities .    *",
    "( i ) * let @xmath699 be in the subcoral with diagonal @xmath708 .",
    "observe that ends of edges of length @xmath709 with one end at @xmath548 and the other end in the subcoral with the diagonal @xmath549 can not be in @xmath516 because then , by , the path through @xmath548 would be shorter . therefore @xmath710 where @xmath711 , @xmath712 , @xmath713 , and @xmath554 . note that @xmath714 where @xmath715 and @xmath557 .",
    "hence @xmath716 the conclusion follows .    *",
    "( ii ) * if @xmath699 is in the subcoral with diagonal @xmath533 , since @xmath533 is a part of a shortest path , we conclude that the longest edge in the part of the path @xmath516 from @xmath234 to @xmath699 has length @xmath717 , where @xmath356 satisfies .",
    "thus @xmath718 where @xmath719 , @xmath720 , @xmath563 , and @xmath564    by we get @xmath721 the conclusion follows .    *",
    "( iii ) * if @xmath697 is in the subcoral for which @xmath336 is the diagonal , similarly as in , we obtain @xmath722 where @xmath723 , @xmath568 , and @xmath724 . by , @xmath725 and we are done in this case .    *",
    "( iv ) * if @xmath697 is not in the subcoral for which @xmath336 is the diagonal , let @xmath726 , @xmath572 , be the vertex which is an endpoint of an edge of length @xmath727 which is a diagonal of the subcoral that contains @xmath697 . by construction , the projection of @xmath728 onto the subspace @xmath575 is a multiple of @xmath576 , with some coefficient @xmath707 $ ] .",
    "observe that lemma [ l : try2 ] implies the estimate for the lipschitz constant of @xmath679 , and thus theorem [ t : gentwoway ] , in all of the cases except the case where both * ( i ) * and * ( iii ) * hold .",
    "consider , for example the case where * ( i ) * and * ( iv ) * hold . then ( we use , , the conclusions of * ( i ) * and * ( iv ) * , the definition of @xmath536 and the moreover statement in lemma [ l : apart ] )    @xmath729 and this number depends only on @xmath113 and @xmath629 .    it remains to consider the case where both * ( i ) * and * ( iii ) * hold . in this case",
    "we estimate from below the norm of @xmath730 .",
    "we use @xmath731 and @xmath732 with @xmath581 and @xmath582 .",
    "the value of @xmath384 actually does not matter for our argument , it is only important that @xmath583 .",
    "recall also that @xmath733 .",
    "therefore @xmath734 observe that each of the coefficients of @xmath735 and @xmath736 in this sum is at least @xmath588 there are two possible cases :    \\(a ) @xmath737 , @xmath738 ;    \\(b ) @xmath739 , @xmath740 .",
    "the cases are similar , so we consider the case ( a ) only .    * subcase ( 1 ) : * there is @xmath741 such that @xmath62 is in the subcoral with diagonal @xmath594 , so @xmath742 , and @xmath743 and @xmath744 we get    @xmath745 the obtained number depends only on @xmath113 and @xmath629 .    *",
    "subcase ( 2 ) : * the vertex @xmath62 has degree @xmath49 in @xmath693 so @xmath746 , @xmath747 and @xmath748 we get    @xmath749 the obtained number depends only on @xmath113 and @xmath629 .",
    "this concludes the proof .",
    "the authors would like to thank gideon schechtman for suggesting the problem and sharing relevant information .",
    "also we would like to thank william b.  johnson and stanisaw szarek for useful information and the referee for suggesting improvements to our paper .",
    "the first - named author gratefully acknowledges the support by nsf dms-1201269 .",
    "f.  albiac , f.  baudier , embeddability of snowflaked metrics with applications to the nonlinear geometry of the spaces @xmath750 and @xmath266 for @xmath751 , _ j. geom",
    ". anal . _ * 25 * ( 2015 ) , no .",
    "1 , 124 ; doi 10.1007/s12220 - 013 - 9390 - 0          y.  bartal , probabilistic approximation of metric spaces and its algorithmic applications , in _ the",
    "_ 37th _ annual symposium on foundations of computer science _ , pp .   184193 , 1996 ,",
    "ieee comput .",
    "press , los alamitos , ca , 1996 .",
    "j.  bastero , j.  bernus , n.  kalton , embedding @xmath754-cubes in finite - dimensional 1-subsymmetric spaces .",
    "congress on functional analysis ( madrid , 1988 ) .",
    "_ rev . mat .",
    "univ . complut .",
    "madrid _ * 2 * ( 1989 ) , suppl . , 4752 .",
    "j.  bastero , a.  pea , g.  schechtman , embedding @xmath754-cubes in low - dimensional schatten classes .",
    "_ geometric aspects of functional analysis _",
    "( israel , 19921994 ) , 511 , _ oper .",
    "theory adv .",
    "_ , * 77 * , birkhuser , basel , 1995 .",
    "a.  dvoretzky , some results on convex bodies and banach spaces , in : _ proc .",
    "linear spaces _ ( jerusalem , 1960 ) , pp .  123160 , jerusalem academic press , jerusalem ; pergamon , oxford , 1961 ; announcement : a theorem on convex bodies and applications to banach spaces , _ proc .",
    "_ , * 45 * ( 1959 ) 223226 ; erratum , 1554 .",
    "a.  gupta , i.  newman , y.  rabinovich , a.  sinclair , cuts , trees and @xmath256-embeddings of graphs , _",
    "combinatorica _ ,",
    "* 24 * ( 2004 ) 233269 ; conference version in : _",
    "40th annual ieee symposium on foundations of computer science _",
    ", 1999 , pp .",
    "399408 .",
    "heinonen , _ geometric embeddings of metric spaces_. report .",
    "university of jyvskyl department of mathematics and statistics , 90 .",
    "university of jyvskyl , jyvskyl , 2003 ; available at http://www.math.jyu.fi/research/reports/rep90.pdf .",
    "m.  talagrand , embedding of @xmath752 and a theorem of alon and milman .",
    "_ geometric aspects of functional analysis _",
    "( israel , 19921994 ) , 289293 , _ oper .",
    "theory adv .",
    "_ , * 77 * , birkhuser , basel , 1995 ."
  ],
  "abstract_text": [
    "<S> for a fixed @xmath0 and @xmath1 , @xmath2 , we study metric spaces which admit embeddings with distortion @xmath3 into each @xmath4-dimensional banach space . </S>",
    "<S> classical examples include spaces embeddable into @xmath5-dimensional euclidean spaces , and equilateral spaces .    </S>",
    "<S> we prove that good embeddability properties are preserved under the operation of metric composition of metric spaces . in particular , we prove that @xmath4-point ultrametrics can be embedded with uniformly bounded distortions into arbitrary banach spaces of dimension @xmath5 .    </S>",
    "<S> the main result of the paper is a new example of a family of finite metric spaces which are not metric compositions of classical examples and which do embed with uniformly bounded distortion into any banach space of dimension @xmath4 . </S>",
    "<S> this partially answers a question of g.  schechtman .    </S>",
    "<S> * 2010 mathematics subject classification . * primary : 46b85 ; secondary : 05c12 , 30l05 , 46b15 , 52a21 . </S>"
  ]
}