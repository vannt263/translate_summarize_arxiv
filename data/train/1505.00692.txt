{
  "article_text": [
    "large network systems of electricity , telephony or communication are traditionally designed to withstand the possibility of a _ single _ failure in one of their components .",
    "this is partially justified by the optimistic view that a failure is a rare event . yet , since in modern day huge communication networks several components may fail or malfunction at any given time , the restriction to single failure events mainly stems from the unfortunate fact that supporting the capability of coping two failures or more is , in many cases , considerably more complex than having to overcome just a single failure .",
    "for example , when considering the setting of shortest path in some underlying graph , it has been widely noted that there is a sharp qualitative and quantitative difference between shortest paths avoiding just one failure and paths avoiding two or more failures .",
    "we consider the structure of _ breadth - first search ( bfs ) _ spanning trees , and address the problem of designing dual failure _ fault - tolerant _ bfs structure , or _ _ for short . by this",
    "we mean a subgraph @xmath1 of the given network @xmath0 , such that subsequent to the failure up to two of the edges , the surviving part @xmath2 of @xmath1 still contains a bfs spanning tree for the surviving part of @xmath0 .",
    "typical network design problems involve three types of objectives : ( 1 ) construction time ( i.e. , cost of the preprocessing phase ) ( 2 ) quality of usage , i.e. , efficiency of operations preformed in the constructed structure , and ( 3 ) the size of the constructed structure .",
    "the current work is motivated by settings in which objectives ( 2 ) and ( 3 ) play a dominant role .",
    "in particular , objective ( 2 ) is important in cases where using approximate shortest paths instead of exact ones ( e.g. , for routing ) , entails a high cost on the system and it is preferable to purchase a larger structure that will allow optimal operation ( e.g. , routing on shortest paths ) .",
    "subject to objective ( 2 ) , it is still desirable to construct ( or purchase ) the minimum cost structure satisfying the usability requirements ( e.g. , optimum routing ) .",
    "a typical motivation for this is a setting where the graph edges represent the channels of a communication network , and the system designer would like to purchase or lease a minimal collection of channels ( i.e. , a subgraph @xmath20 ) that maintains its functionality as a bfs tree with respect to the source @xmath4 upon failures in @xmath0 .",
    "in such a context , the cost of computation at the preprocessing stage ( i.e. , objective ( 1 ) ) may be negligible compared to the purchasing / leasing cost of the resulting structure .",
    "hence , our key cost measure in this paper is the _ size _ of the fault tolerant structure that provides the exact shortest paths distance from a given source vertex @xmath4 , and our main goal is to achieve _ sparse _ ( or _ compact _ ) such structures ( our construction time is still polynomial in @xmath3 ) .",
    "the notion of _ _",
    "structure is closely related to the problem of constructing _",
    "replacement paths _ and in particular to its _ single source _ variant , studied in @xcite only for the single failure case . for a source node @xmath4 , a target node @xmath21 and an edge @xmath22 ,",
    "the shortest @xmath23 path @xmath24 that does not go through @xmath25 is known as a _",
    "replacement path_. the replacement path problem requires to compute the collection @xmath26 of all @xmath23 replacement paths @xmath24 for every failed edge @xmath25 that appears on the @xmath23 shortest - path @xmath27 in @xmath0 .",
    "note that a replacement path is , by definition restricted to a single failure event . under this restricted setting ,",
    "the replacement path @xmath24 admits a rather convenient form , consisting of three segments : a prefix of the shortest - path @xmath27 up to some vertex @xmath28 occurring before the failing edge @xmath25 , followed by a  detour \" avoiding the path @xmath27 ( and in particular the failing edge @xmath25 ) , and terminating with a suffix of @xmath27 . this clean decomposition has led to the development of algorithms that compute the collection @xmath26 efficiently ( cf .",
    "a replacement path @xmath24 is called _ new - ending _ if its last edge is different from the last edge of the shortest path @xmath27 .",
    "put another way , a new - ending replacement path @xmath24 has the property that once it diverges from the shortest - path @xmath27 at the vertex @xmath29 , it joins @xmath27 again only at the final vertex @xmath21 .",
    "it is shown in @xcite that for a given graph @xmath0 and source vertex @xmath4 , a structure @xmath30 containing a bfs tree rooted at @xmath4 plus the last edge of each new - ending replacement path @xmath24 for every @xmath31 and @xmath32 , is a single - failure  structure .",
    "this means that it suffices to focus on the new - ending replacement paths and pick a single edge from each of them ( specifically , the last ) .",
    "furthermore , by analyzing the special structure of the new - ending paths , it is shown therein that such a structure consists of @xmath33 edges where @xmath3 is the number of vertices in the graph .",
    "this result is complemented by a matching lower bound showing that for every sufficiently large integer @xmath3 , there exist an @xmath3-vertex graph @xmath0 and a source @xmath34 , for which every single failure structure is of size @xmath35 . since _ exact",
    "_  structures may be rather expensive , @xcite exploit the structure of replacement - paths to construct _ approximate _",
    "structures with @xmath36 edges for unweighted undirected graphs .",
    "indeed , the convenient structure of the replacement paths has facilitated the development of solutions to many other related problems , such as dynamic algorithms for shortest paths and _ @xmath7-sensitivity distance oracles _ , capable of efficiently answering proximity queries following a @xmath7-failures event @xcite .",
    "recently , distance sensitivity oracles have been considered for weighted and directed graphs in the _ single source _ setting @xcite .",
    "an efficient construction of single source distance oracles for planar graphs is provided in @xcite .",
    "yet , this long line of results , heavily exploits the structure of the single failure replacement path , and is consequently limited to handling no more than one fault in the network .",
    "a natural goal is to generalize some of these results to settings with two or more failures .",
    "it appears that the main barrier for such an extension is rooted in the fact that the structure of a replacement path @xmath37 avoiding an edge pair @xmath38 is rather involved and no longer admits a nice decomposition as its single failure counterparts . since understanding the structure of replacement paths and their interactions proved to be fundamental when designing fault resilient structures , understanding the structure @xmath37 is key essential step for making the desired jump from a single failure to at least two , for many network design tasks .",
    "a remarkable breakthrough in this direction is obtained in @xcite , presenting the first @xmath39-sensitivity distance oracle of size @xmath40 , capable of answering @xmath39-sensitivity queries in @xmath19 time . indeed , both the data structure and the query algorithm of @xcite are considerably more complex than the single failure case studied in @xcite .",
    "an @xmath7-sensitivity distance oracle overcoming @xmath11 failures is given in @xcite . by using fast matrix multiplication , @xcite yields the first sub - cubic time ( randomized ) algorithm for the replacement paths problem when the edge - lengths are small integers . yet , despite the time efficient algorithm of @xcite the understanding of the underlying structural properties of these paths is still lacking .",
    "we note that in certain cases the jump from one fault to multiple faults is quite natural and tractable .",
    "for example , in the setting of _ fault tolerant spanners _ for an arbitrary undirected weighted graph , it is shown in @xcite that there exists a ( polynomially constructible ) @xmath7-vertex fault tolerant @xmath41-spanner of size @xmath42 and an @xmath7-edge fault tolerant @xmath41-spanner of size @xmath43 for a graph of size @xmath3 .",
    "a randomized construction attaining an improved tradeoff for vertex fault - tolerant spanners was shortly afterwards presented in @xcite .    finally , observe that the dual - failure ft - bfs structure studied in this paper is limited in three senses : ( 1 ) it is rather dense , although it matches the lower bound , ( 2 ) it deals with a single source , and ( 3 ) it supports up to two edge faults .",
    "given the density of the structure ( i.e. , ( 1 ) ) , one may claim that it may be better to use approximate structures as provided in @xcite for example , instead of exact ones .",
    "while this is true , we believe that it is still very important to understand the more fundamental exact problem first .",
    "the `` theory '' of paths avoiding two faults provided in this paper would surely be a key building block for designing _ approximate _ structures that avoids two faults ( e.g. , in the same manner that the theory of single fault replacement paths of @xcite laid the basis for approximate structures avoiding single fault in @xcite ) . in particular , we believe that understanding the single source case , beyond the single edge failure event , is an important milestone for designing fault tolerant structures under more generalized settings : one axis of generalization is increasing the number of supported sources , i.e. , considering a setting where one is given a subset of sources @xmath10 , and it is desired to provide a dual failure ft - bfs tree rooted at each source @xmath44 .",
    "multi - source ft - bfs structures , referred to hereafter as have been studied in @xcite for the case of a single edge ( or vertex ) failure and have been later shown to provide an important building block in designing sparse _ fault tolerant additive spanners _ , that provide a bounded additive stretch for _ all _ pairs in the graph under the failing of a single edge ( or vertex ) @xcite .",
    "an additional axis of generalization is increasing the number of supported faults .",
    "a natural generalized structure is an @xmath7- which contains the collection of all single source replacement paths avoiding up to @xmath7 edges in the graph . combining these two axes results in @xmath7-  structure , that for a given source set @xmath10 provides an @xmath7-  structure with respect to each source @xmath14 .",
    "we believe that the structural theory of dual failure replacement paths developed in this paper paves the way to understanding these generalized structures . towards this end , we provide two results for the generalized setting , namely , lower bound constructions and approximability results , as elaborated in next paragraph .",
    "we present an algorithm that for every @xmath3-vertex unweighted graph @xmath0 and source node @xmath4 , constructs a dual failure  structure rooted at @xmath4 with @xmath5 edges .",
    "the size analysis of the output subgraph requires a deep understanding of the various configurations that may be assumed by a replacement path avoiding two faults .",
    "an essential component in our analysis deals with the detour segment of the single failure replacement paths .",
    "while a tight universal upper bound on the size of @xmath7-fault  structures for general @xmath11 is currently beyond our reach , we do have several results for the case of @xmath7 failures for any constant @xmath11 . in section [ sec : lb ]",
    ", we present a lower bound stating that for every cardinality of sources @xmath45 , there exists an @xmath3-vertex graph and a source set @xmath10 where @xmath46 , for which any @xmath7-fault  structure for each @xmath14 requires @xmath15 edges .",
    "hence , for @xmath16 and @xmath17 the lower bound translates into @xmath18 edges , which matches our upper bound construction .",
    "finally , note that while our upper bound algorithm matches the worst - case lower bounds , they might still be far from optimal for certain instances , see @xcite .",
    "consequently , in section [ sec : opt ] , we complete the upper bound analysis by presenting an @xmath19 approximation algorithm for the minimum  problem in which one is given a graph @xmath47 , constant integer @xmath9 , a source set @xmath10 , and it is required to construct an @xmath7-failure  subgraph @xmath1 of minimum size ( i.e. , number of edges ) .",
    "this approximation algorithm is superior in instances where the graph enjoys a sparse @xmath7-failure  tree ( even linear in @xmath36 ) , hence paying @xmath48 edges is wasteful .",
    "[ thm : upper ] for every unweighted undirected graph @xmath47 and source vertex @xmath34 , there is a ( polynomially time constructible ) dual failure ft - bfs structure @xmath30 with respect to @xmath4 , with @xmath5 edges .",
    "[ thm : lower ] for every constant @xmath9 , @xmath49 and @xmath45 , there exist an @xmath3-vertex graph @xmath50 and a source set @xmath10 of cardinality @xmath13 such that any @xmath7-  structure for the source set @xmath51 has @xmath52 edges",
    ". in particular , dual failure  structures requires @xmath18 edges .",
    "[ thm : approx ] there exists a polynomial time algorithm that for every constant @xmath11 and @xmath3-vertex graph @xmath0 and source set @xmath10 constructs an @xmath7-failure  structure @xmath1 whose size ( i.e. , number of edges ) is larger by a factor of at most @xmath53 than the optimal structure @xmath54 ( by thm",
    ". 1 of @xcite , this is tight up to constants , assuming @xmath55 ) .    given an unweighted undirected graph @xmath47 and a source node @xmath4 , let @xmath56 be a shortest paths ( or bfs ) tree rooted at @xmath4 . throughout , the edges of these paths are considered to be directed away from the source node @xmath4 . for a path",
    "@xmath57 $ ] , let @xmath58 be the last edge of path @xmath59 .",
    "let @xmath60 denote the length of the path and @xmath61 $ ] be the subpath of @xmath59 from @xmath62 to @xmath63 .",
    "for paths @xmath64 and @xmath65 , @xmath66 denote the path obtained by concatenating @xmath65 to @xmath64 .",
    "a vertex @xmath67 is a _ divergence point _ of the @xmath23 paths @xmath64 and @xmath65 if @xmath68 but the next vertex @xmath69 after @xmath67 ( i.e. , such that @xmath69 is closer to @xmath21 ) in the path @xmath64 is not in @xmath65 .",
    "given an @xmath23 path @xmath59 and an edge @xmath70 , let @xmath71 be the distance ( in edges ) between @xmath4 and @xmath25 on @xmath59 .",
    "for a source node @xmath4 , a target node @xmath21 and a pair @xmath72 of failed edges , the shortest @xmath23 path @xmath37 that does not go through the edge pair @xmath38 is the natural extension of the well studied single failure _",
    "replacement path_. thus , our dual failure  structure must contain some replacement path @xmath37 for every @xmath73 and every edge pair @xmath74 .",
    "it is convenient to view the failing edges @xmath75 as corresponding to two subsequent independent failing events where first the edge @xmath76 fails and later on , the second edge @xmath77 fails . if the first failing edge @xmath76 does not lie on the @xmath23 shortest - path @xmath27 , then the replacement path @xmath78 is simply @xmath27 .",
    "otherwise , when @xmath79 , the replacement path @xmath78 consists of a prefix of @xmath27 followed by a detour @xmath80 avoiding @xmath27 ( and @xmath76 ) , followed by a suffix of @xmath27 .",
    "consider now the second failing edge @xmath77 .",
    "clearly , if @xmath77 is not on @xmath78 then the dual failure replacement path @xmath37 remains as is , i.e.,@xmath81 .",
    "the interesting case is where @xmath82 .",
    "this case is further divided into two subcases . in the first subcase , @xmath77 appears on either the prefix or the suffix segments of @xmath78 , i.e. , @xmath77 appears on @xmath27 .",
    "a replacement path @xmath37 protecting against two faults on @xmath27 is called hereafter a @xmath83__-replacement path__. in the complementary subcase , the second failing edge @xmath77 appears on the detour segment @xmath80 , i.e. , @xmath84 .",
    "a replacement path @xmath37 for @xmath75 where @xmath76 lies on @xmath27 and the @xmath77 lies on the detour @xmath80 is called hereafter a @xmath85__-replacement path__. our algorithm for constructing the dual failure  structure , alg .",
    "@xmath86 , carefully selects a replacement path @xmath37 for every @xmath32 and for every edge pair @xmath87 .",
    "essentially , for each vertex @xmath21 , the algorithm constructs a subgraph @xmath88 consisting of the _ last edges _ of the replacement paths @xmath37 , i.e. , @xmath89 where @xmath90 is the last edge of the replacement path @xmath37 .",
    "the final structure @xmath1 is then given by taking the union , i.e. , @xmath91 .",
    "in the analysis section , we show that ( a ) taking the last edge of each replacement path is _ sufficient _ and ( b ) the size ( number of edges ) of each @xmath88 is bounded by @xmath92 .",
    "a replacement path @xmath37 is called a _ new - ending _",
    "path if its last edge was not present in the structure at the time that the path was selected by the algorithm .. here the definition is more strict and depends on the time step in which the path was considered by the algorithm . yet , since the initial graph @xmath93 used by the algorithm at step @xmath94 contains the bfs tree @xmath95 , a new - ending path in the current definition , is also new - ending according to the definition of @xcite ( but not vice - versa ) . ] since only the last edges of the replacement paths are taken into the structure , it is required to bound the number of new - ending paths @xmath37 .",
    "indeed , the lion share of this paper is dedicated to bounding the size of @xmath88 , which turns out to be significantly more involved compared to the single failure case of @xcite .",
    "we first consider the simplified case where the two failing edges lie on @xmath27 and bound the number of new - ending @xmath83-replacement paths by @xmath96 .",
    "this is shown by using a very similar argument to that of the single failure case .",
    "the most technically involved task is bounding the number of new - ending @xmath85-replacement paths @xmath37 .",
    "we classify these paths into two main classes .",
    "the first class consists of the paths @xmath37 that do not intersect the edges of the detour of the replacement path protecting their _ first _ failing edge .",
    "a new - ending path in this class has the following structure : it diverges from the shortest - path @xmath27 at some vertex @xmath29 ( above the failing edge @xmath76 ) and joins @xmath27 again only at the final vertex @xmath21 , without intersecting the detour @xmath80 at all ( see fig .",
    "[ fig : apathtype](d ) ) .",
    "the second class consists of new - ending paths @xmath37 that intersect their detour @xmath80 in at least one edge .",
    "any path in this class has the following structure : it diverges from the shortest - path @xmath27 at the first vertex of the detour @xmath80 , it then follows the detour @xmath80 up to some vertex @xmath97 above the failing edge @xmath77 , and joins @xmath27 and @xmath80 again only at the final vertex @xmath21 .",
    "in other words , such a path has two divergence points : a unique @xmath98-divergence point @xmath29 where it departs from @xmath27 and a @xmath99-divergence point @xmath97 where it departs from @xmath80 ( see fig . [",
    "fig : apathtype](c ) )    we proceed by briefly outlining the proof for the single failure case , i.e. , bounding the number of @xmath23 new - ending @xmath78 paths by @xmath96 .",
    "we then consider the simplifying case where all replacement paths in @xmath100 are unique ( there are no two equally shortest replacement - paths ) . finally , we highlight the technicalities that arise in the general case ( whose detailed treatment is deferred to section [ sec : analysis ] ) .",
    "assume that all shortest - paths are computed according to a weight assignment @xmath101 that guarantees the uniqueness of the shortest - paths ( i.e , breaking ties in a consistent manner ) .",
    "consider the collection @xmath102 of @xmath23 new - ending replacement paths where @xmath103 for @xmath79 and every path @xmath104 ends with a distinct edge of @xmath21 , i.e. , @xmath105 for every @xmath106 . that breaks the shortest - path ties .",
    "since only the last edges of each replacement - path are taken into the structure , in our analysis , we consider one representative replacement - path for each new edge incident to @xmath21 .",
    "] we now bound @xmath107 by @xmath96 and as there are @xmath3 vertices , overall there are total of @xmath33 edges in a  structure that contains the last edges of all replacement paths . for every path @xmath104 ,",
    "let @xmath108 be the unique divergence point from @xmath27 .",
    "the following observation is crucial in this context .",
    "[ obs : singlef ] the suffixes @xmath109\\setminus \\{v\\}$ ] are vertex - disjoint , i.e. , @xmath110 for every @xmath111 .",
    "since @xmath108 is the unique divergence point of @xmath104 from @xmath27 , it holds that @xmath112 , for every @xmath113 .",
    "assume towards contradiction that there exists a common vertex @xmath114 in the intersection .",
    "for an illustration see fig .",
    "[ fig : singlef](a ) .",
    "this implies that there two distinct @xmath115 paths , namely , @xmath116 $ ] and @xmath117 $ ] in @xmath118 , leading to contradiction by the uniqueness of @xmath101 .",
    "( informally , since in this case the failing edge @xmath76 protected by @xmath104 is not on @xmath117 $ ] and vice - versa , it implies that one of the last edges , namely , @xmath119 or @xmath120 can be avoided in the structure . )",
    "the observation follows .",
    "in particular , by obs .",
    "[ obs : singlef ] , we have that the collection of divergence points @xmath121 are _ distinct_. for an illustration see fig . [",
    "fig : singlef](b ) .",
    "this allows us to order the paths @xmath122 in increasing distance between @xmath123 and @xmath21 where @xmath124 . for every @xmath125",
    ", we then have that @xmath126 . finally , by exploiting the disjointness of the suffixes , we can bound the total number of vertices occupied by these suffixes , by @xmath127 hence @xmath128 .",
    "in addition , by obs .",
    "[ obs : singlef ] , it also holds that @xmath129 and hence the  structure contains @xmath130 edges where @xmath131 is the depth of the bfs tree .",
    "unfortunately , when considering the dual failure case , the key observation , obs .",
    "[ obs : singlef ] , fails to hold .",
    "consider two dual failure new - ending replacement paths @xmath132 and @xmath133 where @xmath134 is on the detour segment @xmath135 of @xmath136 for @xmath137 .",
    "in addition , since we only care for bounding the number of edges incident to @xmath21 , these paths are selected so that each ends with a new and distinct edge , i.e. , @xmath105 .",
    "let @xmath108 ( resp . , @xmath138 ) be the unique divergence point of @xmath104 ( resp . , @xmath139 ) from @xmath27 . by definition it holds that the suffix @xmath140\\setminus \\{v\\}$ ] is disjoint with @xmath27 for both @xmath137",
    "yet , in contrast to the single failure case , we can no longer show that these suffixes are disjoint . to see this , assume there exists a common vertex @xmath67 in the intersection where @xmath114 . in the single failure case ,",
    "since both failing edges @xmath76 and @xmath141 lie on @xmath27 , we had the guarantee that they do not appear on either of the segments @xmath116 $ ] and @xmath117 $ ] .",
    "hence , in such a case , the two @xmath115 subpaths @xmath116 $ ] and @xmath117 $ ] are interchangeable and safe to be used by both of the paths @xmath104 and @xmath139 ( i.e. , safe in the sense that they do not contain the failing edges of these paths ) . unfortunately , in our case , since the second failing edge of @xmath139 , namely , @xmath77 , is not on @xmath27 ( but rather on the detour @xmath142 )",
    ", we no longer have such guarantee . specifically",
    ", it might be the case that @xmath77 appears on the suffix @xmath143 $ ] and hence the subpath @xmath143 $ ] is no longer _",
    "safe _ for @xmath139 , which justifies the introduction of the two new edges , @xmath119 and @xmath120 . for an illustration see fig .",
    "[ fig : singlef](c ) .",
    "this toy example illustrates that dual failure replacement paths may share many vertices , which makes the mission of bounding their number much less tractable .",
    "$ ] are disjoint .",
    "the existence of a vertex @xmath67 in the intersection implies that there are two safe routes from @xmath67 to @xmath21 ( of the same lengths ) .",
    "note that these routes are safe since they do not intersect with the edges of @xmath27 .",
    "( b ) the disjointness of the suffixes implies that the divergence points are distinct and hence can be ordered on the @xmath27 path in increasing distance from @xmath21 .",
    "( c ) the dual failure case . shown",
    "are two @xmath144 replacement paths @xmath132 and @xmath133 where @xmath145 and @xmath146 .",
    "the suffixes @xmath147 and @xmath148 intersect at the common vertex @xmath67 , however the subpath @xmath116 $ ] contains the failing edge @xmath77 and hence can not be used by the path @xmath139 .",
    "[ fig : singlef],width=480 ]    to warm up , we proceed by claiming that the collection of last edges of the @xmath23 replacement - paths protecting against at most @xmath7 faults on the shortest path @xmath27 is bounded by @xmath96 .",
    "consider the collection of @xmath23 replacement paths @xmath149 and let @xmath150 .",
    "@xmath151 for every @xmath32 .",
    "fix @xmath21 and consider @xmath152 , the collection of representative paths from @xmath153 , each ending with a distinct last edge , i.e. , @xmath154 for every @xmath155 . for every @xmath156 ,",
    "let @xmath157 be the last divergence point from @xmath27 .",
    "we first claim that the suffix segments @xmath158 $ ] are vertex disjoint besides the common endpoint @xmath21 . to see this , assume towards contradiction that there exists a mutual vertex @xmath67 in the intersection of @xmath158 $ ] and @xmath159 $ ] for two distinct paths @xmath155 .",
    "since @xmath59 and @xmath160 ends with a distinct last edge , and as @xmath161 are the last divergence points from @xmath27 , we get that there are two distinct @xmath115 paths in @xmath118 , namely , @xmath162 $ ] and @xmath163 $ ] , contradiction to the uniqueness of the shortest - paths .",
    "we can then sort the paths @xmath59 in @xmath152 in increasing distance of @xmath157 and @xmath21 , and the argumentation follows the exact same line as for the single edge fault case ( i.e. , the @xmath164th segment @xmath165 $ ] is of length at least @xmath164 for every @xmath166 and these segments are vertex disjoint ) .",
    "let @xmath167 be the @xmath7-_ft - diameter _ of the graph @xmath0 .",
    "we proceed by claiming that graphs of small @xmath7-ft - diameter have relatively sparse @xmath7-  structures ( i.e. , bfs structures that are resilient against the failing of at most @xmath7 edges . ) since it is sufficient to collect the last edge from each replacement - path ( by the same argument as for the single fault case ) , we have the following .    for every @xmath3-vertex graph @xmath0 and source vertex @xmath34",
    ", there exists an @xmath7-  structure @xmath168 with @xmath169 edges .",
    "given a graph @xmath47 and a source node @xmath4 , let @xmath56 be a shortest paths ( or bfs ) tree rooted at @xmath4 .",
    "let @xmath170 be the @xmath23 shortest - path in tree @xmath171 , when the tree @xmath172 , we may omit it and simply write @xmath27 . let @xmath173 be the set of @xmath21 neighbors in @xmath0 .",
    "let @xmath174 be the set of edges incident to @xmath21 in the graph @xmath0 and let @xmath175 denote the degree of node @xmath21 in @xmath0 .",
    "when the graph @xmath0 is clear from the context , we may omit it and simply write @xmath176 .",
    "let @xmath177 denote the _ depth _ of @xmath21 in the bfs tree @xmath95 .",
    "when the source node @xmath4 is clear from the context , we may omit it and simply write @xmath178 .",
    "for a subgraph @xmath179 ( where @xmath180 and @xmath181 ) and a pair of nodes @xmath182 , let @xmath183 denote the shortest - path distance in edges between @xmath69 and @xmath21 in @xmath184 . assuming an edge weight function @xmath185 , let @xmath186 be the set of @xmath187 shortest - paths in @xmath0 according to the edge weights of @xmath101 .",
    "if @xmath101 is a weight assignment that guarantees the uniqueness of the shortest paths , then we override the definition and let @xmath188 be the unique @xmath189 shortest path in @xmath0 according to @xmath101 . throughout ,",
    "the edges of these paths are considered to be directed away from the source node @xmath4 .",
    "the edges on any @xmath23 path @xmath59 are considered from the top @xmath4 to the bottom @xmath21 , hence an edge @xmath190 is a _ above _",
    "@xmath191 if @xmath76 is closer to @xmath4 then @xmath141 . for an edge @xmath192 , define @xmath193 if @xmath194 and @xmath195 .",
    "a vertex @xmath67 is a _ divergence point _ of the @xmath23 paths @xmath64 and @xmath65 if @xmath68 but the next vertex @xmath69 after @xmath67 ( i.e. , such that @xmath69 is closer to @xmath21 ) in the path @xmath64 is not in @xmath65 .",
    "we view the @xmath27 path from top ( i.e. , @xmath4 ) to bottom @xmath21 .",
    "an edge @xmath76 is said to be _ above _ @xmath141 , if it is closer to @xmath4 on the path @xmath27 .",
    "a subgraph @xmath1 is an @xmath7-  structure ( multi - source ft - bfs ) for @xmath0 with respect to a source set @xmath10 , iff @xmath196 for every vertex pair @xmath197 and every failing sequence @xmath198 , @xmath199 .",
    "single source @xmath7-  structures ( with @xmath200 ) are referred to here as @xmath7-  structures .",
    "in addition , @xmath7-  structures with @xmath200 and @xmath16 are referred to here as dual failure  structures .",
    "we next sketch the size analysis for dual failure ft - structures , for a very degenerate case .",
    "we focus on vertex @xmath32 and show that it has at most @xmath92 edges in the final structure @xmath1 .",
    "the following notation is useful in our analysis . for every @xmath85 replacement - path @xmath201 , let @xmath202 be the detour segment of @xmath78 such that @xmath203 ( including the endpoints on @xmath27 ) , let @xmath204 be the failing edges protected by @xmath59 , @xmath205 and @xmath206 . for two @xmath23 @xmath85-replacement paths",
    "@xmath207 , we say that @xmath104 _ interferes _ with @xmath139 , if @xmath208 .",
    "the @xmath85 paths @xmath207 are _ independent _ if @xmath104 does not interfere with @xmath139 and vice - versa . for a fixed @xmath32 , define @xmath209 as the collection of last edges of all @xmath23 replacement - paths where @xmath37 is the ( unique ) @xmath23 shortest - path in @xmath100 . it is sufficient to consider one representative replacement - path for each new edge of @xmath21 in @xmath88 . hence , assume throughout , that the last edge of each path in the collection of new - ending @xmath23 replacement paths is _",
    "distinct_. since bounding the collection of @xmath83 replacement - paths ( protecting against two edges faults on @xmath27 ) is very similar to the single fault case , we restrict attention to the more technically challenging part of bounding @xmath85-paths .",
    "we now bound @xmath88 in the special case obtained by making the following simplifying assumptions : ( s1 ) all @xmath23 replacement paths in @xmath100 are _ unique _ for every @xmath198 , @xmath210 , ( s2 ) the detour segments @xmath80 of the @xmath23 single edge replacement paths @xmath78 , @xmath79 , are edge disjoint , and ( s3 ) all replacement - paths are _",
    "independent_. we then classify the @xmath85 replacement paths into two classes depending on whether or not they intersect their detour ( i.e , the detour that protects their first failing edge and contains their second failing edge ) .",
    "let @xmath211 be the subset of replacement paths @xmath59 that do not intersect the edges of their detours and let @xmath212 be the remaining paths . to bound this class ,",
    "it is sufficient to use assumptions ( s1 ) and ( s2 ) .",
    "we begin by noting that each path @xmath213 protects a distinct edge on @xmath27 .",
    "order these paths @xmath214 in increasing distance between @xmath4 and @xmath215 , i.e. , + @xmath216 .",
    "let @xmath217 and @xmath218 .",
    "we now restrict attention to the set of first @xmath219 paths @xmath220 .",
    "let @xmath221 be the collection of their corresponding detours and let @xmath222 .",
    "the paths of @xmath211 are classified into two classes depending on whether or not they intersect the edges of @xmath223 . in a way similar to the proof of the single failure case , one can show that there are @xmath96 paths in @xmath224 that do _ not _ intersect the edges of @xmath223 .",
    "hence , it remains to bound the remaining paths in @xmath224 .",
    "for every such path @xmath104 , let @xmath225 be their last mutual vertex in @xmath226 .",
    "again , by the uniqueness of the shortest - path , we can show the following .",
    "[ obs : a_dist ] ( a ) @xmath227 for every @xmath228 and hence by ( s2 ) @xmath229 and @xmath230 are edge disjoint ; ( b ) @xmath231 ) \\cap v(p_j[a_j , v])=\\emptyset$ ] .",
    "we next classify the detours @xmath232 according to their lengths .",
    "a detour @xmath80 is _ expensive _ if @xmath233 , otherwise it is _",
    "cheap_. next , the new - ending paths @xmath234 that intersect @xmath223 are classified according to the detour @xmath235 on which @xmath225 ( the last common vertex of @xmath236 and @xmath237 ) appears . then @xmath104 is expensive ( resp . ,",
    "cheap ) if @xmath235 is expensive ( resp .",
    ", cheap ) .",
    "let @xmath238 and @xmath239 .",
    "we next separately bound @xmath240 and @xmath241 .",
    "[ cl : cheap_main ] @xmath242 .",
    "let @xmath243)\\setminus \\{v\\}$ ] . by obs .",
    "[ obs : a_dist ] , @xmath244|-1)$ ] .",
    "we now focus on some @xmath104 and show that @xmath245|\\geq m/2 $ ] .",
    "first note that @xmath246 $ ] and @xmath27 are vertex disjoint ( except for the common endpoint @xmath21 ) , as @xmath225 occurs after the unique @xmath98-divergence point of @xmath104 from @xmath27 .",
    "hence , @xmath247 be the detour protecting against the failing of the edge @xmath141 .",
    "then , @xmath248 where the penultimate inequality follows as @xmath249 appears above the failing edge on @xmath27 and last inequality follows by the fact that @xmath250 .",
    "since @xmath225 appears on a cheap detour @xmath142 , we get that @xmath251 and combining this with eq .",
    "( [ eqn : nondet2_main ] ) , we get that @xmath252 . by combining with eq .",
    "( [ eq : nodet1_main ] ) , we get that overall @xmath245|\\geq m/2 $ ] .",
    "we therefore have that @xmath253 .",
    "it follows that @xmath254 .",
    "since clearly also @xmath255 , we have @xmath256 .",
    "the claim follows .",
    "[ cl : expens_detours_main ] @xmath257 .",
    "let @xmath258 be the collection of expensive detours , @xmath259 .",
    "we now classify the expensive paths of @xmath260 into @xmath261 classes where each path @xmath104 is mapped to the class of the detour @xmath262 on which @xmath225 appears . for every @xmath262 ,",
    "let @xmath263 , and let @xmath264 be the cardinality of this set .",
    "we begin by bounding the number of vertices appearing in the expensive detours , let @xmath265 be the vertices appearing on the expensive detours . by edge - disjointness of the detours ( assumption ( s2 ) ) , we get that @xmath266 .",
    "we now proceed by bounding the number of vertices appearing on the expensive replacement paths , @xmath267)\\setminus \\{a_i , v\\}.$ ] note that for every expensive path @xmath104 , its segment @xmath268 $ ] is vertex disjoint ( expect for its endpoints @xmath225 and @xmath21 ) with the vertex set @xmath269 .",
    "fix some @xmath270 , with @xmath271 expensive paths @xmath272 .",
    "we now claim that @xmath273 $ ] contains @xmath274 vertices . by cl .",
    "[ obs : a_dist ] , the @xmath268 $ ] segments are disjoint . order the paths of @xmath272 in increasing distance of @xmath225 from @xmath21 .",
    "since @xmath275 for every @xmath276 and the @xmath225 s are distinct it holds that @xmath277 and summing over all @xmath278 ( as the suffixes @xmath268 \\setminus \\{v\\}$ ] are disjoint ) and using the cauchy - schwarz inequality , we get that @xmath279 . recall that the sets @xmath280 and @xmath269 are disjoint , and thus , we get that @xmath281 we get @xmath282 , as required .",
    "we now consider the replacement - paths in @xmath212 that intersect the edges of their detour , under assumptions ( s1-s3 ) .",
    "for every @xmath283 , let @xmath284 , and @xmath285 be the first ( resp",
    ". , last ) vertices of the detour @xmath80 .",
    "let @xmath108 ( resp . ,",
    "@xmath286 ) be the first divergence point of @xmath104 and @xmath27 ( resp . , @xmath229 ) .",
    "let @xmath217 be the first failing edge protected by @xmath104 .",
    "it is easy to see that by the uniqueness of the shortest - paths , @xmath287 and @xmath288 $ ] .",
    "that is , @xmath108 and @xmath286 are unique divergence points from @xmath27 and @xmath229 respectively and thus the suffix @xmath289 $ ] is edge disjoint with @xmath27 and @xmath80 .",
    "in addition , since the detour segments are disjoint ( by assumption ( s2 ) ) , we have the following .",
    "[ obs : dist_indep_easy ] for every two paths @xmath290 , ( 1 ) @xmath291\\setminus \\{v\\}$ ] and @xmath292\\setminus \\{v\\}$ ] are vertex disjoint .",
    "( 2 ) if @xmath293 then @xmath294 and @xmath295 .",
    "we now induce an @xmath296-ordering on the paths of @xmath212 , which can be viewed as based on treating @xmath76 and @xmath286 lexicographically : for @xmath297 , we say that @xmath298 if @xmath299 . for @xmath293 ,",
    "let @xmath298 if @xmath300 . by obs .",
    "[ obs : dist_indep_easy ] , this is well defined .",
    "we next order the paths of @xmath212 in increasing @xmath296 order .",
    "let @xmath301 where @xmath302 . by showing that",
    "@xmath303 for every @xmath304 , we have that the lengths of the paths in the ordered set @xmath305 are strictly monotone decreasing .",
    "[ lem : ordering_simple ] @xmath306 ( or alternatively , if @xmath298 then @xmath307 ) .",
    "let @xmath308 .",
    "we begin by showing that @xmath309 .",
    "recall that @xmath310 $ ] where @xmath311 for @xmath137 .",
    "let @xmath312 be the first ( resp . , last )",
    "vertices of the detour @xmath135 for @xmath137 .",
    "since @xmath104 diverges from @xmath27 above @xmath76 which is not below @xmath141 , it holds that @xmath313 .",
    "so , it remains to show that @xmath314 .",
    "assume towards contradiction that @xmath315 occurs on @xmath104 .",
    "first , assume that @xmath316 .",
    "since @xmath317 and @xmath289 $ ] is edge disjoint with @xmath80 ( i.e. @xmath286 is a unique divergence point from @xmath80 ) , it holds that @xmath318 $ ] . by the ordering @xmath319 and since @xmath320 \\subset d_i[x_i , c_j]\\subset p_j$ ] , we end with contradiction .",
    "next , assume that @xmath321 .",
    "we show that in such a case there are two @xmath322 shortest paths in @xmath323 , namely , @xmath324 $ ] and @xmath325 \\circ \\pi(y_j , v)$ ] , hence leading to a contradiction by the uniqueness of the shortest - paths .",
    "first , note that since @xmath104 is new - ending , indeed @xmath326 . since @xmath76 is above @xmath141 on @xmath27 , @xmath327 and since @xmath328 and @xmath329",
    ", it holds that @xmath330 . by the optimality of @xmath104 and @xmath331 it holds that @xmath332 , leading to a contradiction by the uniqueness of the shortest - paths in @xmath323 .",
    "assume towards contradiction that @xmath333 . since @xmath334",
    ", we end with contradiction to the uniqueness of the @xmath23 shortest paths in @xmath335 .",
    "we now group the ordered paths @xmath104 of @xmath212 into classes depending on their @xmath76-value ( i.e. , the first failing edge they protect in @xmath27 ) . for every vertex @xmath336 ,",
    "let @xmath337 be the number of replacement paths in @xmath212 whose first failing edge is @xmath338 .",
    "let @xmath339 . by assumptions ( s1-s3 ) and the ordering of lemma [ lem : ordering_simple ] ,",
    "we get :    [ lem : multi ] for every @xmath340 : ( a ) @xmath341 ) \\cap v(p_j[c_j , v])=\\{v\\}$ ] .",
    "( b ) if @xmath227 , then @xmath342\\setminus \\{b_i , v\\}$ ] and @xmath343\\setminus\\{b_j , v\\}$ ] are vertex disjoint .",
    "( c ) the total number of vertices occupied by these paths is @xmath344 .",
    "note that @xmath345 .",
    "hence , by combining this with lemma [ lem : multi](c ) , we get that there are @xmath92 such paths .",
    "this completes the analysis for the simplified case .    [ [ road - map . ]",
    "] road map .",
    "+ + + + + + + + +    we now provide a high level road map of the general proof of the upper bound _ without _ assuming ( s1-s3 ) .",
    "first , the algorithm needs to support the case where the replacement - paths are not unique and hence have to be carefully chosen .",
    "the guiding principle for selecting the desired replacement paths is to favor replacement - paths that diverge from @xmath27 as close to @xmath4 as possible . among these",
    ", the algorithm favors replacement - paths that diverge from their detour segment as early as possible .",
    "second , when removing assumption ( s2 ) , one has to incorporate into the analysis the optional _ complex interactions _ between detour segments .",
    "the main structural theory developed in this paper is meant to deal this complication .",
    "hence , a crucial step for understanding the structure of dual failure replacement paths is the understanding of the structure of the detours . to do that , we focus on pairs of detours @xmath80 and @xmath142 and classify their structural dependency into six classes ( see fig . [",
    "fig : detours ] ) .",
    "we then provide some simplifying rules for each class that are frequently used in our argumentation .",
    "quite interestingly , understanding the pairwise relation between the detours was sufficient in order to obtain an understanding of the _ global _ picture ( i.e. , which might contain complex interaction between many detours ) .",
    "finally , removing assumption ( s3 ) entails another major complication in our analysis .",
    "in particular , when two paths @xmath104 and @xmath139 interfere , lemma [ lem : multi](a ) is no - longer guaranteed to hold . in our analysis ,",
    "the set of interfering paths is further classified into two subsets by distinguishing between two types of interference , namely , @xmath98-_interference _ and @xmath99-_interference_. we show that each of these two classes imposes different structural constraints which allow us to bound their cardinality .",
    "our tool kit consists of two main components : ( a ) complete mapping of the pairwise interactions between detours and ( b ) a subgraph @xmath346 denoted hereafter as a _ kernel subgraph _ that contains the entire required information from @xmath0 but has some convenient properties that facilitate the analysis .",
    "this structure is heavily based on the detour configuration machinery established in ( a ) ( see section [ sec : deturs ] ) . for every vertex @xmath21",
    ", the kernel subgraph @xmath347 is imposed on a given collection of detours @xmath348 .",
    "clearly the set of relevant faulty edges of the @xmath144 replacement paths is given by the subgraph @xmath349 .",
    "quite surprisingly , we show that in order to analyze the structure of the new - ending @xmath85 replacement paths , it is sufficient to consider the subgraph @xmath347 which contains all the relevant faulty edges .",
    "the kernel graph is used , for example , to bound the number of replacement - paths that do not intersect their detours .",
    "for example , it is essential for establishing lemma [ cl : cheap_main ] and [ cl : expens_detours_main ] without assuming ( s2 ) .",
    "we note that these tools might be used in further contexts to pave the way to the future design of @xmath7-fault resilient structures for @xmath8 .",
    "equipped with these tools , to bound the number of new - ending @xmath144 paths , we employ the same high level strategy as taken for the single failure case : new - ending paths consume many vertices , and since the number of vertices is limited by @xmath3 , the number of new - ending paths is bounded as well ( as a function of @xmath3 ) . to do that , we would like to show that every new - ending path has an nonnegligible number of distinct vertices , not appearing on any other path .",
    "the main technical question is to identify a subpath of the new - ending path that is guaranteed to be sufficiently long and disjoint from all others . since our replacement paths may overlap and share many common vertices , towards achieving this goal we classify the new - ending paths into five classes and bound that size of each class separately . for schematic illustrations of this classification ,",
    "[ fig : rpclass ] .",
    "the size analysis of each class exploits the tools described above and provides a deeper understanding of the complex behavior of dual failure replacement paths . in the current analysis , a crucial step for understanding the structure of dual - failure replacement paths is the understanding of the detour structure of single failure replacement paths .",
    "the understanding of @xmath7-failure replacement paths becomes much less tractable as the number of faults @xmath7 increases .",
    "consider for example the case of @xmath350 . in this case , there are two types of detours : ( 1 ) @xmath351 detours , the detours of the single failure replacement paths , e.g. , @xmath352 for @xmath79 ; and ( 2 ) @xmath353 detours , the detours of the dual failure replacement paths , e.g. , @xmath354 for @xmath79 and @xmath84 .",
    "it is then required to understand the interactions between two detours of type @xmath353 as well as the interaction between a detour of type @xmath351 and of type @xmath353 .",
    "the generalization of @xmath83 and @xmath85 replacement path classification in the case of @xmath355 faults gives raise to the following classes : ( a ) : @xmath356 replacement paths protecting against three faults on @xmath27 ; ( b ) @xmath357 replacement paths protecting against two faults on @xmath27 and one fault on a detour of type @xmath351 ; ( c ) @xmath358 replacement paths protecting against single fault on @xmath27 and two faults on @xmath351 and ( d ) @xmath359 replacement paths protecting against single fault on @xmath27 , single fault on @xmath351 detour and single fault on @xmath353 detour . by using similar arguments to the single failure case , the edges added due to type ( a ) replacement paths can be bounded by @xmath33 ( and this can be generalized to any @xmath11 faults ) .",
    "the main difficulty arises when considering the other types , as this calls for a deep understanding of the interactions between detours of type @xmath351 and @xmath353 . for a general integer @xmath11 ,",
    "a detour @xmath360 is said to be of type @xmath361 for @xmath362 , if there exists an @xmath278-failure replacement path @xmath37 , @xmath363 such that @xmath364 for @xmath365 .",
    "it is then required to understand the interactions between detours of type @xmath366 .",
    "an additional source of difficulty arises when attempting to generalize the notion of _ interference_. in the dual - failure case , we considered two types of interference , namely , @xmath98-interference and @xmath99-interference and each such class called for different tools . in the case of general @xmath11 , one needs to consider many more options , e.g. , interference of types @xmath357 , @xmath367 for @xmath368 etc .",
    "each such class may impose different structural constraints which would eventually provide the basis for bounding its cardinality .",
    "we note that the lower - bound construction of @xmath369 should give us some useful hints for attaining ( hopefully a matching ) upper bound .",
    "in this section , we establish thm . [ thm : upper ] .",
    "for useful notation , see sec .",
    "[ sec : notation ] .",
    "we present an algorithm that given an unweighted undirected @xmath3-vertex graph @xmath47 and a source @xmath34 , constructs a dual failure  subgraph @xmath30 .",
    "we then analyze the correctness of the algorithm and bound the size of the output structure .",
    "the size analysis of the subgraph @xmath1 constitutes the main technical contribution of this paper .",
    "[ [ algorithm - constpath . ] ] algorithm @xmath86 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    let @xmath101 be a weight assignment that guarantees the uniqueness of the shortest - paths",
    ". only break the unweighted shortest - path ties in a consistent manner .",
    "] let @xmath370 be the bfs tree rooted at @xmath4 where @xmath27 is the shortest path from @xmath4 to @xmath21 in @xmath0 , namely , @xmath371=sp(s , v , g , w)$ ] .    for a source node @xmath4 , a target node @xmath21 and an edge pair @xmath372 ,",
    "the shortest @xmath23 path @xmath37 that does not go through @xmath38 is known as a _",
    "replacement path_. thus , a dual  structure contains the collection of all replacement paths @xmath37 for every @xmath73 and every failed pair of edges @xmath373 .",
    "hereafter , we fix one vertex @xmath21 and concentrate on constructing @xmath23 replacement paths protecting against at most two failures in @xmath374 .",
    "algorithm @xmath86 consists of three steps depending on the type of the faulty edges .",
    "[ fig : apathtype ] for a schematic illustration .",
    "first , it constructs a collection of paths @xmath375 where only one edge failure occurs , i.e. , @xmath376 for every @xmath79 .",
    "the selection prefers the replacement path that diverges from @xmath27 as early as possible .",
    "then , the algorithm considers the case where the two failing edges occur on @xmath27 .",
    "finally , letting @xmath377 be the detour segment of @xmath103 from @xmath27 , the last step considers the case where the second failing edge occurs on @xmath80 . in this case",
    ", the procedure would attempt to construct a replacement path whose divergence point from @xmath27 is as close to @xmath4 as possible and under certain conditions it imposes also the requirement that the divergence point from @xmath80 is as closest to @xmath4 as well . eventually , only the _",
    "last _ edge of each replacement path is added to the construction .",
    "the following definition is useful . for every @xmath378 , and @xmath379",
    ", we would like to consider the possibility that @xmath380 is the point where the replacement path protecting against a failure in @xmath76 diverges from @xmath27 . to enforce that possibility , for every two vertices , @xmath381",
    ", we define the graph @xmath382 that contains @xmath380 and @xmath21 but does not contain the other vertices on the segment @xmath383 .",
    "intuitively , for an edge @xmath378 and a vertex @xmath384 , the first divergence point of the @xmath23 replacement path @xmath385 from @xmath27 is @xmath380 .",
    "since the divergence point from @xmath27 of any replacement path protecting against the failing of @xmath76 must occur above the failing edge @xmath76 , it holds that @xmath386 .",
    "analogously , an @xmath23 replacement path @xmath59 in @xmath387 diverges from @xmath27 at the point @xmath380 and its last edge is not in @xmath27 .",
    "in such a case , @xmath388 $ ] and @xmath27 are edge disjoint .",
    "the algorithm would attempt to find the upmost divergence point @xmath389 such that @xmath390 contains a replacement path for the failures @xmath391 .",
    "the first step considers single edge failure scenarios .",
    "denote the collection of possible edge failures by @xmath392 .",
    "let @xmath393 be the minimal index @xmath394 satisfying that @xmath395 .",
    "define @xmath396 . for each @xmath397",
    ", let @xmath398 be the detour segment of the replacement path chosen for @xmath76 . in cl .",
    "[ cl : onefstru ] , we show that @xmath399 where @xmath400 ( resp . , @xmath401 )",
    "is the first ( resp . , last ) vertex of @xmath80 and @xmath402 .",
    "as mentioned earlier , we do not have to add the entire replacement paths to the constructed structure ; we later prove that it suffices to add the last edge of each replacement paths .",
    "let @xmath403 be the last edges of replacement paths protecting against faults in @xmath404 .",
    "these edges will be added to the constructed structure . for every edge @xmath79 ,",
    "let @xmath405 be the detour segment of @xmath406 . in cl .",
    "[ cl : onefstru ] , we show that @xmath78 can be decomposed into three segments such that @xmath399 where @xmath407 $ ] is the detour segment .",
    "the second step considers pairs of failures occurring both on @xmath27 .",
    "the collection of failure events considered is thus @xmath408 .",
    "+ without loss of generality , assume throughout that @xmath76 appears above @xmath141 on the path @xmath27 . recall that @xmath80 ( respectively , @xmath142 ) is the detour segment of @xmath78 ( resp . , @xmath331 ) .",
    "the procedure constructs the shortest path @xmath409 in the following manner .",
    "first the algorithm prefers a replacement path that is composed of the detours @xmath80 and @xmath142 constructed at step ( 1 ) . specifically ,",
    "if the intersection @xmath410 , then let @xmath411 be the last point on @xmath142 that is common to @xmath80 .",
    "define the path @xmath412",
    "\\circ d_j[w , y_j ] \\circ \\pi(y_j , v)$ ] .",
    "if @xmath413 , then let @xmath414 .",
    "otherwise , define @xmath415 .",
    "the set of edges to be added in this step is @xmath416 , the collection of last edges of replacement paths protecting against two edges faults on @xmath27 .",
    "the third step considers the remaining ( relevant ) case where one of the failing edge @xmath76 occurs on the path @xmath27 and the second failing edge occurs on the detour segment @xmath80 .",
    "hence , the collection of failure scenarios considered in this step is @xmath417 .",
    "we now order the pairs @xmath418 in the following manner .",
    "let @xmath419 and @xmath420 .",
    "if @xmath421 , then let @xmath422 iff @xmath423 .",
    "else , if @xmath424 , then we use the second coordinate @xmath425 to break the tie where @xmath422 iff @xmath426 where @xmath427 $ ] is the detour segment of @xmath428 .",
    "let @xmath429 be the ordering of the faulty pairs @xmath430 in decreasing order where @xmath431 .",
    "let @xmath432 be an initial collection of edges incident to @xmath21 be added to the structure by steps ( 1 ) and ( 2 ) .",
    "the algorithm considers the faulty pairs @xmath38 according to the ordering of @xmath433 , where at step @xmath434 , given @xmath435 , it considers the pair @xmath436 and computes the replacement path @xmath437 in the following manner .",
    "let @xmath438 be a subgraph of @xmath0 in which the edges incident to @xmath21 are only the edges of @xmath435 .",
    "first , if there exists a shortest replacement path for @xmath439 in @xmath440 , namely , one that uses the edges of @xmath435 , then no new edge of @xmath21 should be introduced .",
    "i.e. , if @xmath441 , then let @xmath442 .",
    "otherwise , a new edge of @xmath21 that is not in @xmath435 is essential for satisfying the pair @xmath439 .",
    "the algorithm then aims to select a new - ending replacement path whose first divergence point @xmath443 from @xmath27 is as close to @xmath4 as possible .",
    "let @xmath444 be the first vertex of the detour @xmath445 .",
    "the point @xmath446 is found as follows .",
    "let @xmath447 , define @xmath448 as the closest vertex to @xmath4 satisfying that @xmath449 .",
    "then @xmath450 and let @xmath451",
    ". if the first divergence point @xmath446 of @xmath59 from @xmath27 is not @xmath444 ( i.e. , the divergence point is not as that of @xmath452 and @xmath27 ) then let @xmath453 .",
    "else , if @xmath454 , the replacement path @xmath455 is selected so that its unique divergence point from the detour @xmath456 is as close to @xmath444 as possible . to enforce that ,",
    "let @xmath457 $ ] where the second failing edge is @xmath458 , then for every @xmath459 and every @xmath460 , define @xmath461)\\right ) \\cup \\{w_\\ell\\}~.\\ ] ] that is , an @xmath23 replacement path in the subgraph @xmath462 diverges from @xmath27 at the unique point @xmath443 and diverges from @xmath445 at the point @xmath463 . since the divergence point from @xmath445 must occur above the second failing edge @xmath464 it holds that @xmath465 $ ] .",
    "the algorithm computes a @xmath466 path whose divergence point from @xmath445 is as close to @xmath467 on the detour @xmath456 as possible : let @xmath460 be the minimum index satisfying that @xmath468 .",
    "let @xmath469 \\circ sp(w_\\ell , v , g_{\\sf d}(w_\\ell ) \\setminus f_\\tau , w).$ ] finally , let @xmath470 .",
    "this completes the description of the algorithm .",
    "let @xmath471 be the collection of single edge and edge pair failure events for which an @xmath23 replacement path @xmath37 was constructed .",
    "let @xmath472 be the collection of last edges of all replacement paths in @xmath37 .",
    "finally , the algorithm outputs @xmath473 as the resulting dual failure @xmath474 structure .    .",
    "( a ) single edge failure @xmath79 .",
    "the algorithm selects the replacement path @xmath78 whose divergence point from @xmath27 is as close to @xmath4 as possible .",
    "( shown on the right hand side is another candidate path of the same length with a lower distinct divergence point , the was not chosen . )",
    "( b ) two edge faults both occurring on @xmath27 . the corresponding replacement path @xmath475 may have two divergence points from @xmath27 .",
    "( c ) one edge fault @xmath76 is on @xmath27 and one @xmath77 is on of the detour segment @xmath80 .",
    "the algorithm selects the replacement path @xmath476 with the  highest \" ( closest to @xmath4 ) divergence points @xmath108 from @xmath27 and @xmath286 from the detour segment @xmath80 .",
    "( d ) as in ( c ) , only that the replacement path @xmath476 does not intersect with its detour @xmath80 .",
    "[ fig : apathtype],title=\"fig:\",width=384 ] .",
    "( a ) single edge failure @xmath79 .",
    "the algorithm selects the replacement path @xmath78 whose divergence point from @xmath27 is as close to @xmath4 as possible .",
    "( shown on the right hand side is another candidate path of the same length with a lower distinct divergence point , the was not chosen . )",
    "( b ) two edge faults both occurring on @xmath27 .",
    "the corresponding replacement path @xmath475 may have two divergence points from @xmath27 .",
    "( c ) one edge fault @xmath76 is on @xmath27 and one @xmath77 is on of the detour segment @xmath80 .",
    "the algorithm selects the replacement path @xmath476 with the  highest \" ( closest to @xmath4 ) divergence points @xmath108 from @xmath27 and @xmath286 from the detour segment @xmath80 .",
    "( d ) as in ( c ) , only that the replacement path @xmath476 does not intersect with its detour @xmath80 .",
    "[ fig : apathtype],title=\"fig:\",width=384 ]    in this section , we show that the subgraph @xmath1 , the output of alg .",
    "@xmath86 , is a dual failure @xmath474 structure and then bound its size .",
    "recall that a path @xmath477 is a @xmath83-replacement path if its two failing edges appear on the @xmath27 path , i.e. , @xmath478 and @xmath479 .",
    "otherwise , if the first failing edge @xmath76 appears on the @xmath27 path and the second failing edge @xmath77 appears on the detour segment @xmath80 of @xmath78 , it is a @xmath85-replacement path .",
    "hence , step ( 2 ) constructs the collection of @xmath83-replacement paths and step ( 3 ) constructs the collection of @xmath85-replacement paths .",
    "an edge @xmath480 is _ new _ if @xmath481 , i.e , it is not part of the original fault free bfs tree @xmath171 computed in @xmath0 .",
    "a @xmath85 replacement path @xmath477 is _ new - ending _",
    "if @xmath440 did not satisfy the faults of @xmath439 , i.e. , @xmath482 was first added to the constructed @xmath88 by @xmath483 . in particular , for a new - ending replacement path @xmath483 , we have @xmath484 . note that alg .",
    "@xmath86 adds only the last edge of new - ending paths to the structure .",
    "hence , our goal is to bound the number of new edges in @xmath1 .",
    "let @xmath485 be the collection of new edges incident to @xmath21 . throughout",
    ", we focus on a single vertex @xmath486 and show that @xmath487 . for every @xmath488 ,",
    "let @xmath489 be the new ending replacement path that first introduced @xmath490 to @xmath88 . to bound the size of @xmath491 , we study the structure of new - ending paths .",
    "let @xmath492 be the collection of new - ending @xmath23 replacement paths , each representing one distinct new edge from @xmath491 .",
    "the following notation is useful in our setting .",
    "we view the @xmath27 path from top ( i.e. , @xmath4 ) to bottom @xmath21 .",
    "an edge @xmath76 is said to be _ above _ @xmath141 , if it is closer to @xmath4 on the path @xmath27 . for vertices",
    "@xmath493 , we denote @xmath494 if @xmath495 ( i.e. , @xmath496 appears on @xmath27 _ before _",
    "@xmath497 ) . for a given edge pair @xmath498 and a replacement path @xmath499 , let @xmath500 be the first failing edge in @xmath38 ( note that this edge , by convention , is always on the shortest path @xmath27 ) and let @xmath501 be the second failing edge in @xmath38 ( if exists ) , where @xmath501 might be either on @xmath27 or on the detour segment @xmath80 of @xmath78 .",
    "let @xmath502 be the two failing edges ( i.e. , @xmath503 ) .",
    "let @xmath504 , be the detour segment protecting against the failing of the edge @xmath505 . throughout , we assume @xmath407 $ ] .",
    "we denote the first ( resp . , last ) vertex of the detour @xmath80 by @xmath506 ( resp .",
    "@xmath507 ) , i.e. , @xmath508 and @xmath509 .    note that a replacement path @xmath104 does not necessarily intersect with the detour @xmath229 ( e.g. , see fig .",
    "[ fig : apathtype](d ) ) .",
    "let @xmath510 ( or @xmath108 for short ) be the first divergence point of the path @xmath104 from @xmath27 .",
    "we denote this point as the @xmath98-_divergence point _ of @xmath104 .",
    "if @xmath104 intersects with its detour @xmath229 , then let @xmath511 ( or @xmath286 ) be the first divergence point of @xmath104 from @xmath229 .",
    "we denote this point by the @xmath131-_divergence point _ of @xmath104 .",
    "[ fig : apathtype](c ) .",
    "the correctness analysis consists of two steps .",
    "first , we show the correctness of the construction of the replacement paths @xmath37 by alg . @xmath86 .",
    "then , we show that taking the last edge of every replacement path @xmath37 for every @xmath32 and @xmath498 is sufficient for making @xmath1 a dual failure @xmath474 structure .    [",
    "lem : correct_conspaths ] for every @xmath32 and @xmath498 , @xmath409 .",
    "note that @xmath37 is not necessarily in @xmath512 .",
    "in particular , @xmath512 correspond to a unique replacement - path which may not be the one the we want . to establish correctness ,",
    "we thus show that the replacement path chosen is indeed a shortest - path in @xmath100 .",
    "first , consider the case where @xmath37 was constructed in step ( 1 ) , hence @xmath513 where @xmath79 .",
    "it is sufficient to show that there exists @xmath389 , satisfying that @xmath514 .",
    "this holds as by eq .",
    "( [ eq : gk_def ] ) , @xmath515 .",
    "next , consider the case where @xmath37 was constructed in step ( 2 ) .",
    "hence , @xmath37 is a @xmath83-replacement path .",
    "this case is immediate .",
    "finally , consider the case where @xmath37 is a @xmath85-replacement path .",
    "let @xmath516 be the iteration in which the pair @xmath517 was considered by the algorithm in step ( 3 ) .",
    "it is sufficient to consider the case where @xmath518 is not satisfied by the current graph @xmath519 , i.e. , the path @xmath37 is a new - ending path .",
    "we first claim that there always exists an @xmath23 new - ending path with a unique divergence point @xmath29 from @xmath27 that appears above the failing edge @xmath79 .",
    "let @xmath520 and let @xmath29 be the first divergence point of @xmath59 and @xmath27",
    ". assume towards contradiction that @xmath29 is not unique and let @xmath521\\cap \\pi[b , v]$ ] be another divergence point .",
    "there are two cases .",
    "if @xmath522 , then @xmath523 and hence by the uniqueness of @xmath101 , @xmath524 $ ] , contradiction to the fact that @xmath525 is a divergence point . else , if @xmath526 ( i.e. , @xmath527 ) then by the uniqueness of @xmath101 , @xmath528 $ ] , contradiction to the fact that @xmath29 is a divergence point",
    "hence , the divergence point @xmath29 is unique and therefore it also holds that @xmath529 .",
    "if @xmath530 where @xmath444 is the first vertex of the detour @xmath531 $ ] ( i.e. , the detour segment of @xmath78 ) then the correctness follows , since in this case the algorithm let @xmath453 .",
    "it remains to consider the case where @xmath532 .",
    "we claim that in such a case the path @xmath59 has unique divergence point @xmath97 from the detour @xmath445 .",
    "assume towards contradiction that there exists an additional common point in the intersection @xmath533",
    "\\cap d_\\tau[c , y_\\tau ] \\right ) \\setminus \\{c\\}$ ] . observe that @xmath534 $ ] , as otherwise the path @xmath535\\circ d_\\tau[w , y_\\tau ] \\circ \\pi(y_\\tau , v)$ ] is in @xmath536 and ends with an edge in @xmath171 , contradiction to the fact that @xmath483 was not satisfied by @xmath440 .",
    "therefore , @xmath534 $ ] and by the uniqueness of the weight assignment @xmath101 it holds that @xmath537=d_\\tau[c , w]$ ] , contradiction to the fact that @xmath97 is a divergence point .",
    "hence , @xmath97 is a unique divergence point from @xmath456 and thus @xmath538 ( see eq .",
    "( [ eq : gelld ] ) ) .",
    "letting @xmath539 , the algorithm then selects the closest vertex @xmath540 $ ] to @xmath541 satisfying that @xmath542 .",
    "since by the above , this holds for at least one vertex @xmath543 , correctness is established .",
    "we now turn to show that taking the last edges of the constructed replacement path into the structure @xmath1 is sufficient .",
    "[ lem : correct_conspaths ] for every @xmath544 and every vertex @xmath32 , @xmath545 .",
    "assume , towards contradiction , that the claim does not hold .",
    "let @xmath546 be the set of  bad pairs , \" namely , pairs @xmath547 for which the @xmath23 shortest path distance in @xmath548 is greater than that in @xmath549 .",
    "( by the assumption , it holds that @xmath550 . )",
    "first , note that for every bad pair @xmath551 , it holds that @xmath498 and hence a replacement path @xmath37 was constructed for it by algorithm @xmath86 .",
    "for each bad pair @xmath551 , define @xmath552 to be the set of `` bad edges , '' namely , the set of @xmath37 edges that are missing in @xmath1 ( due to the sparsification phase that maintains only  last \" new edges ) . by definition ,",
    "@xmath553 for every bad pair @xmath551 .",
    "let @xmath554 be the maximal depth of a missing edge in @xmath555 , and let @xmath556 denote that `` deepest missing edge '' , i.e. , the edge @xmath25 on @xmath37 satisfying @xmath557 .",
    "finally , let @xmath558 be the pair that minimizes @xmath559 , and let @xmath560 be the deepest missing edge on @xmath561 , namely , @xmath562 .",
    "note that @xmath563 is the _",
    "`` deepest missing edge '' over all bad pairs @xmath551 .",
    "@xmath564 .",
    "assume towards contradiction otherwise and let @xmath565 . by the contradictory assumption , @xmath566 .",
    "then , the path @xmath567 is in @xmath548 and in addition , @xmath568 , contradiction to the fact that @xmath569 .",
    "the claim holds .",
    "if @xmath570 , let @xmath571 . else , since @xmath572 is a bad pair there must be an edge @xmath573 as otherwise the path @xmath574 .",
    "since @xmath575 , it implies that @xmath576 does not appear on the detour of @xmath577 where @xmath578 .",
    "therefore , @xmath579 and let @xmath580 . by the construction of @xmath1 , @xmath581 , and therefore the deepest missing edge of @xmath582 must be shallower , i.e. , @xmath583",
    ". however , this is in contradiction to our choice of the pair @xmath584 .",
    "the lemma follows .",
    "we now provide two useful claims on the structure of the @xmath23 replacement paths and begin by considering the replacement path @xmath78 protecting against single edge fault @xmath79 .",
    "[ cl : onefstru ] ( 1 ) every @xmath78 can be decomposed into three segments such that @xmath399 where @xmath407 $ ] is the detour segment , which is edge disjoint with @xmath27 .",
    "+ ( 2 ) there is no alternative replacement path whose unique divergence point is closer to @xmath4 than @xmath400 .",
    "begin with part ( 1 ) .",
    "let @xmath378 .",
    "let @xmath585 be the closest vertex to @xmath4 satisfying that @xmath586 .",
    "then , alg . @xmath86",
    "define @xmath587 .",
    "we first claim that @xmath588=\\pi(s , x_i)$ ] .",
    "since @xmath589 , and @xmath590 , it also holds that @xmath591 .",
    "the claim holds as @xmath592 .",
    "let @xmath593\\cap \\pi(s , v)\\right ) \\setminus \\{x_i\\}$ ] be the first vertex on @xmath406 appearing _ after _",
    "@xmath400 that is in @xmath27 .",
    "note that by the definition of @xmath594 and the fact that the failing edge is @xmath76 , it holds that @xmath595 .",
    "since @xmath596 , we have that @xmath597.\\ ] ] note that @xmath400 is the unique divergence point as @xmath598 is not in @xmath78 and in addition for the first vertex @xmath401 in @xmath27 appearing after @xmath400 , it holds that the paths collide .",
    "hence , @xmath599 where @xmath402 .",
    "part ( 1 ) follows .",
    "part ( 2 ) follows immediately by the construction of the algorithm . for every replacement path @xmath499 ,",
    "let @xmath600 be the first divergence point of @xmath59 from @xmath27 .",
    "we call this point the @xmath98-divergence point of @xmath59 . for a @xmath85-replacement path @xmath601 that intersects its detour @xmath80 , let @xmath602 be the first divergence point of @xmath59 from @xmath80 .",
    "we call this point the @xmath99-divergence point of @xmath59 .",
    "note that while the @xmath98-divergence point is defined for every @xmath23 replacement path , the @xmath99-divergence point is defined only for @xmath85-replacement paths that intersect their detours .",
    "we conclude this section by showing that the @xmath98-divergence point of every replacement path is _",
    "unique_.    [ cl : unique_nnew ] ( 1 ) every @xmath85-replacement path @xmath603 has a unique @xmath98-divergence point @xmath600 from @xmath27 .",
    "+ ( 2 ) if @xmath603 is also new - ending , then @xmath604 $ ] and @xmath27 are edge - disjoint .",
    "let @xmath605 be considered at time @xmath516 in step ( 3 ) of alg .",
    "@xmath86 . if @xmath466 is new - ending , i.e. , was not in @xmath606 , then the claim follows immediately by construction , since @xmath466 is computed in @xmath607 for some @xmath608 where @xmath609 and hence @xmath380 is the unique divergence point and @xmath610 $ ] and @xmath27 are edge disjoint .",
    "it remains to consider claim ( 1 ) for the case where @xmath466 is not new - ending , i.e. , exists in @xmath606 .",
    "in such a case , @xmath611 .",
    "let @xmath612 be the first divergence point of @xmath613 and @xmath27 .",
    "assume towards construction that there exists an additional divergence point @xmath614",
    "\\cap \\pi(b_1,v ) \\setminus \\{b_1,v\\}$ ] .",
    "since @xmath483 is not a @xmath83-replacement path , its second failing edge @xmath615 is not in @xmath27 .",
    "there are two cases .",
    "if @xmath616 , there are two @xmath617 paths in @xmath618 , namely , @xmath619 and @xmath620 $ ] , contradiction to the uniqueness of @xmath101 .",
    "else , if @xmath621 , there are two @xmath622 paths in @xmath606 , namely , @xmath623 $ ] , leading to contradiction to the uniqueness of @xmath101 again .",
    "the claim follows .      a crucial step for understanding the structure of the replacement path @xmath37 protecting against two edge failure in @xmath0 , is the understanding of the structure of the replacement path @xmath406 protecting against single failure @xmath76 on @xmath27 .",
    "in particular , it is important to understand the detour segments @xmath624 of these paths .    in this section",
    ", we present some basic structural properties of detours , that will provide the tools for bounding the size of the final structure later on . for detour @xmath80 , recall that @xmath506 ( resp . , @xmath507 )",
    "is the first ( resp . , last ) common vertex with @xmath98 . throughout , we consider two detours @xmath625 . for @xmath626 , define @xmath627 and @xmath628 .",
    "let @xmath76 be the single edge on @xmath27 that the detour @xmath80 protects , i.e. , such that @xmath629 .",
    "hence , @xmath402 for @xmath626 .",
    "two detours @xmath630 are _ independent _ , @xmath631 , otherwise they are _",
    "dependent_. we now provide a useful claim which follows by the fact that we use the weight assignment @xmath101 that guarantees the uniqueness of the shortest - paths .",
    "[ cl : jointdet ] let @xmath632 then @xmath633=d_2[w_1,w_2]$ ] .    for @xmath626 ,",
    "let @xmath634 such that @xmath635 . by construction ,",
    "@xmath636 = sp(x_i , v , g\\setminus \\pi(x_i , u_{i+1}),w)$ ] for @xmath626 .",
    "assume , towards contradiction otherwise , then it implies that there are two distinct @xmath637 shortest paths in @xmath638 , given by @xmath639=sp(w_1,w_2 , g \\setminus \\pi(s , v),w)$ ] for @xmath626 , contradiction to the uniqueness of @xmath101 .    throughout",
    "we consider the detour segment @xmath640 $ ] to be directed away from @xmath641 , i.e. , going from the starting vertex @xmath641 to the ending vertex @xmath642 .",
    "note that by cl .",
    "[ cl : jointdet ] , every detour @xmath643 can be decomposed into three segments according to some dependent detour @xmath644 : the noncommon prefix @xmath645 $ ] , the common segment @xmath646=d_2[w_1,w_2]$ ] , and the noncommon suffix @xmath647 $ ] .",
    "it is important to note that this does not necessarily imply that this common segment is used by the two detours in the same direction . in particular",
    ", it might be the case that the detours visit the common segment in _ opposite _ directions where @xmath648 \\circ d_1[w_1,w_2 ] \\circ d_1[w_2,y_1]$ ] while @xmath649 \\circ d_2[w_2,w_1 ] \\circ d_1[w_1,y_2]$ ] , ( i.e. @xmath643 visits @xmath650 before @xmath651 and @xmath644 visits @xmath651 before @xmath650 ) .      in this subsection",
    ", we consider the possible detours configurations of two detours @xmath643 and @xmath644 where @xmath652 .",
    "these configurations depend upon the lexicographic order of @xmath653 and @xmath654 .",
    "[ def : detour_conf ]    ( non - nested ) : @xmath655 .",
    "( nested ) : @xmath656 .",
    "( interleaved ) : @xmath657 .",
    "( @xmath658-interleaved ) : @xmath659 .",
    "( @xmath660-interleaved ) : @xmath661 .",
    "( @xmath662-interleaved ) : @xmath663",
    ".    for a schematic illustration of these configurations , see fig .",
    "[ fig : detours ] .     ,",
    "title=\"fig:\",width=288 ]    [ [ the - xy - ordering - the - detours . ] ] the @xmath662-ordering the detours .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    the @xmath662-ordering of a collection of detours @xmath664 , namely , @xmath665 is an ordering according to the lexicographic ordering of @xmath666 pairs .",
    "for ease of notation , let @xmath627 and @xmath628 .",
    "we say that @xmath667 , if @xmath668 and if @xmath669 then @xmath670 ( i.e. , deeper on @xmath27 ) .",
    "then , in an @xmath662 ordering the detours are ordered in _ decreasing _ order of their @xmath671 pairs .",
    "i.e. , @xmath672 and if @xmath669 then @xmath80 precedes @xmath142 ( denoted by @xmath673 ) in the ordering iff @xmath674 .",
    "[ cl : disjindep ] if @xmath643 and @xmath644 are non - nested , then they are independent . formally , if @xmath655 then @xmath675 .",
    "assume towards contradiction there exists a common vertex @xmath676 .",
    "[ fig : detours](a ) .",
    "there are now two @xmath677 paths in @xmath678 , namely , @xmath679 $ ] and @xmath680 $ ] . by the optimality of @xmath406 for both @xmath626",
    ", it holds that @xmath681 .",
    "hence , the path @xmath682 \\circ \\pi(y_2,v)$ ] is also in @xmath683 , but its unique divergence point from @xmath27 , namely @xmath642 , is strictly above @xmath684 , in contradiction to the selection of @xmath685 by algorithm @xmath86 ( which was supposed to prefer the divergence point that is closest to @xmath4 ) .",
    "the claim follows .",
    "[ cl : depen_detdisjoint ] if @xmath644 is nested in @xmath643 , then they are independent . or , formally , if @xmath656 , then @xmath675",
    ".    assume , towards contradiction , that there is a common vertex @xmath676 .",
    "let @xmath686 and @xmath687 . clearly , @xmath688 $ ] .",
    "we consider two cases depending on where @xmath563 resides .",
    "case ( 1 ) : @xmath689 $ ] . in this case",
    "there are two @xmath690 paths in @xmath678 given by @xmath691 $ ] and @xmath692 $ ] . by the optimality of @xmath643 and @xmath644",
    ", we get that @xmath681 .",
    "since @xmath641 appears strictly above @xmath684 , we end with contradiction the selection of @xmath685 by algorithm @xmath86 ( which was supposed to prefer the divergence point that is closest to @xmath4 ) .",
    "case ( 2 ) : @xmath693 $ ] . in this case , there are two @xmath694 shortest paths in @xmath695 , namely , @xmath696",
    "\\subseteq p_1 $ ] and @xmath697 \\circ \\pi[y_2,y_1 ] \\subseteq p_2 $ ] . by the optimality of @xmath406 for both @xmath626",
    ", it holds that @xmath681 . note that @xmath698 and @xmath699 .",
    "since both @xmath700 and @xmath701 exist in @xmath702 , it holds that @xmath703 leading to contradiction .",
    "the claim follows .",
    "[ cl : det_nested ] if @xmath643 and @xmath644 are _ dependent _ such that @xmath704 , i.e. , @xmath705 , then + ( a ) @xmath693 $ ] , if @xmath706 , and + ( b ) @xmath707 $ ] , if @xmath708 .",
    "let @xmath676 be a common vertex ( see fig .",
    "[ fig : detours](c ) ) .",
    "assume that @xmath709 .",
    "clearly , @xmath710 $ ] and @xmath711 $ ] .",
    "assume towards contradiction that @xmath689 $ ] .",
    "in this case there are two @xmath690 paths in @xmath712 , namely , @xmath691 $ ] and @xmath692 $ ] . by the optimality of @xmath78 , for both @xmath626",
    ", it holds that @xmath681 .",
    "since @xmath641 is strictly above @xmath684 , we end with contradiction to the selection of @xmath685 by algorithm @xmath86 ( which was supposed to prefer the divergence point that is closest to @xmath4 ) .",
    "consider ( b ) in case where @xmath643 and @xmath644 are not @xmath660-interleaved .",
    "assume towards contradiction that @xmath713 $ ] , hence @xmath714 $ ] .",
    "note that in such a case , @xmath715 ( i.e. , @xmath643 and @xmath644 are not @xmath662-interleaved ) .",
    "there are now two @xmath716 paths in @xmath712 , namely , @xmath717",
    "\\circ \\pi[y_1 , y_2]$ ] and @xmath697 $ ] . by optimality , @xmath681 .",
    "since @xmath718 , it holds that @xmath719 , leading to contradiction . the claim follows .",
    "[ [ dependent - detours . ] ] dependent detours .",
    "+ + + + + + + + + + + + + + + + + +    for dependent detours @xmath625 , let @xmath720 ( resp . ,",
    "@xmath721 ) be the first ( resp . ,",
    "last ) vertex appearing on @xmath643 that is common to @xmath644 .",
    "note that @xmath720 might not be equal to @xmath722 ( in cases where the common segment @xmath723 is traversed in opposite directions by the two detours ) .",
    "we distinguish between two types of dependent and interleaved detours @xmath643 and @xmath644 .",
    "let @xmath724 and let @xmath650 ( resp . ,",
    "@xmath651 ) be the first ( resp . ,",
    "last ) vertex on @xmath643 that is common to @xmath644 .",
    "i.e. , there is no vertex in @xmath645 \\cup d_1[w_2,y_1]$ ] that is in @xmath644 as well .",
    "note that by cl .",
    "[ cl : jointdet ] , we have the guarantee that @xmath646=d_2[w_1,w_2]$ ] . yet , since the graph is undirected , the two detour might traverse the common segment in opposite directions . if dependent and interleaved detours @xmath657 use the common segment @xmath723 in the same direction ( equivalently , @xmath725 ) then @xmath625 are _ fw - interleaved _ otherwise they are _ rev - interleaved_. note that dependent detours @xmath643 and @xmath644 which are @xmath662-interleaved , always use their common segment in opposite direction .",
    "[ fig : fwrevdetours ] for an illustration .",
    "that use the common segment @xmath646 $ ] in the same direction .",
    "( b ) rev - interleaved detours are dependent detour @xmath625 that use the common segment @xmath646 $ ] in two opposite directions .",
    "( c ) @xmath662-interleaved detours where @xmath726 .",
    "the common segment @xmath727 $ ] is used in opposite direction by @xmath643 and @xmath644 .",
    "[ fig : fwrevdetours],width=384 ]    finally , we summarize the possible configurations of dependent detours . by cl .",
    "[ cl : depen_detdisjoint ] and [ cl : disjindep ] , we have the following .    [ cl : summ_depend ] let @xmath643 and @xmath644 be dependent detours .",
    "then , ( a ) @xmath643 and @xmath644 are either @xmath658-interleaved , @xmath660-interleaved , @xmath662-interleaved , fw - interleaved or rev - interleaved . + ( b ) if @xmath728 , then they are either rev - interleaved or @xmath662-interleaved .    [",
    "[ excluded - detour - segment ] ] excluded detour segment + + + + + + + + + + + + + + + + + + + + + + +    for detour @xmath80 , the segment @xmath729 an _ excluded segment _ with respect to @xmath80 ( or @xmath80-excluded for short ) if there exists no new - ending path @xmath730 such that @xmath504 and its second failing edge @xmath731 .",
    "the next claim plays a major role in our analysis .",
    "it concerns interleaved , @xmath658-interleaved and @xmath662-interleaved dependent detours @xmath643 and @xmath644 , where @xmath652 . letting @xmath732",
    "be the last point occurring on @xmath644 that is common to @xmath643 , denote by @xmath733 $ ] as the suffix of @xmath643 segment ( see fig .",
    "[ fig : fwrevdetours](a , b , c ) and fig .",
    "[ fig : detours](d ) ) .",
    "the claim states that this @xmath734 type segment is @xmath643-excluded segment of the detour , in the sense that there exists no @xmath730 , such that @xmath735 and its second failing edge @xmath501 appears on @xmath734 .",
    "[ cl : depen_detbad ] let @xmath643 and @xmath644 be interleaved , @xmath658-interleaved or @xmath662-interleaved dependent detours , i.e. , such that @xmath736 .",
    "then , @xmath737 $ ] is @xmath643-excluded where @xmath732 .",
    "let @xmath733 $ ] and assume towards contradiction that there exists @xmath730 , such that @xmath735 and @xmath738 .",
    "let @xmath739 ( i.e. , the edge @xmath563 is not an arbitrary edge that is protected by the detour @xmath643 but rather the first failing edge of the replacement path @xmath59 that is given by the contradictory assumption ) and let @xmath740 \\circ d_1 \\circ \\pi[y_1 , v ] \\in sp(s , v , g \\setminus \\{e_1\\})$ ] be the path protecting against the failure of @xmath563 .",
    "observe that the edge @xmath563 appears on @xmath27 _ before",
    "_ @xmath741 .",
    "this is because by cl .",
    "[ cl : det_nested](2 ) , it holds that @xmath742 $ ] and @xmath743 . since @xmath563 appears on @xmath27 before @xmath741 ( i.e.",
    ", @xmath563 is closer to @xmath4 ) , it holds that @xmath600 , the unique @xmath98-divergence point of the new - ending path @xmath59 from @xmath27 , occurs above @xmath563 and hence also above @xmath741 ( by cl .",
    "[ cl : unique_nnew](1 ) such @xmath600 is guaranteed to exist ) . since by cl .",
    "[ cl : unique_nnew](2 ) , @xmath604 $ ] is edge disjoint with @xmath27 , we have that @xmath744 and overall @xmath745 .",
    "consider an alternative @xmath83-replacement path @xmath746 , i.e. , both the failing edges of @xmath160 occur on @xmath98 . recall that @xmath160 was added to the construction during step ( 2 ) of alg .",
    "@xmath86 , i.e. , before @xmath59 was added in step ( 3 )",
    ". hence , @xmath747 ( since @xmath59 is new - ending ) .",
    "we now consider two cases depending on whether or not the second failing edge @xmath501 appears on the @xmath83 replacement path .",
    "since @xmath744 , we get that both @xmath59 and @xmath160 are two @xmath23 shortest paths in @xmath748 . by optimality ,",
    "so we end with contradiction to the selection of @xmath59 by the algorithm .",
    "we now define the path @xmath750",
    "\\circ d_2[w , y_2]\\circ \\pi(y_2,v)$ ] .",
    "recall that @xmath732 is the last point on @xmath644 and hence @xmath751 $ ] .",
    "since by the contradictory assumption @xmath501 is in the excluded region , i.e. , @xmath752 $ ] , it holds that @xmath753 . since step ( 2 ) of alg .",
    "@xmath86 attempts first to select @xmath754 as the replacement - path for the pair @xmath755 , by the fact that eventually another path , namely @xmath160 , was selected as the replacement path @xmath756 , necessarily @xmath757 and show its optimality , hence leading to contradiction . since @xmath758 ,",
    "there exist two @xmath759 shortest - paths in @xmath712 , namely , @xmath760 $ ] and @xmath761 $ ] .",
    "note that @xmath762 , since the divergence point @xmath641 is above it on @xmath27 .",
    "in addition , note that @xmath763 as @xmath764 $ ] . by optimality of the paths @xmath765 and @xmath766 , we get that @xmath681 .",
    "hence , @xmath767|+|p_{s , v,\\{e_2\\}}[w , v]| = |\\widehat{p}|~,\\end{aligned}\\ ] ] contradiction by eq .",
    "( [ eq : notreppp ] ) .",
    "the claim follows .",
    "note that for rev - interleaved or @xmath662-interleaved dependent detours @xmath643 and @xmath644 where @xmath652 , the excluded segment @xmath768 contains that shared segment @xmath723 ( see the segments @xmath727 $ ] in fig . [ fig : fwrevdetours](b , c ) ) .",
    "we have the following .    [ cl : rev_nomutual ] let @xmath625 be dependent @xmath662-interleaved or rev - interleaved detours where @xmath652",
    ". then there exists no path @xmath730 such that @xmath735 and @xmath769 .      for every vertex @xmath21 , and a subset of @xmath85-replacement paths @xmath770 , let @xmath771 be the set of detours of these paths .",
    "clearly the set of relevant faulty edges is given by the subgraph @xmath349 . in this section ,",
    "we show that in order to analyze the structure of the new - ending @xmath85-paths , it is sufficient to consider a subgraph @xmath347 of @xmath772 , denoted hereafter as the _ kernel subgraph of the detours_. when , @xmath21 is clear from the context , we simply write @xmath773 . to define the @xmath773 subgraph",
    ", we describe a construction procedure which gradually adds segments of detours @xmath774 according to some predefined ordering .",
    "essentially , from each @xmath80 , only a certain segment @xmath775 $ ] is added to @xmath773 .",
    "we begin by describing the construction of @xmath773 and then establish some of its useful properties .    [",
    "[ the - construction - of - the - kernel - graph - kernelgraphmathcald . ] ] the construction of the kernel graph @xmath773 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    the algorithm first @xmath662-orders the detours , resulting with @xmath665 where @xmath776 .",
    "initially set @xmath777 .",
    "let @xmath778 .",
    "add the @xmath80 s in a sequential manner : at step @xmath164 , we follow the detour @xmath80 and add its edges until we hit the first vertex @xmath779 on @xmath80 that was already added to the kernel graph @xmath780 by the previous step .",
    "we then add only @xmath781 $ ] to the subgraph of @xmath780 . formally , at step @xmath164 , the segment of @xmath782 $ ] is added to @xmath780 , where @xmath778 and for every @xmath783 , @xmath784 is the first common vertex of @xmath80 and @xmath780 .",
    "hence , there exists some @xmath785 , such that @xmath786 $ ] .",
    "let @xmath787 $ ] .",
    "finally , let @xmath788 $ ] .",
    "note that some of the detours @xmath80 of @xmath664 are added completely to @xmath773 ( i.e. , @xmath789 ) and others are added only partially , since one of their vertices has been added before .",
    "we refer to these detours as _ truncated _ detours .",
    "formally , a detour @xmath80 is truncated if @xmath790 , otherwise , it is _ non - truncated_. for every truncated detour @xmath142 , let @xmath791 be some detour that precedes @xmath142 in the ordering , i.e. , @xmath792 and in addition , @xmath793 $ ] .",
    "we call this detour the _ breaker _ of @xmath142 , denoted hereafter by @xmath794 ( the detour @xmath142 might have several breakers , in such a case one is chosen arbitrarily )",
    ". see fig .",
    "[ fig : kernel](a ) for an illustration .",
    "the next key lemma shows that the kernel subgraph @xmath773 consists of the faulty edges @xmath501 for every new - ending path @xmath59 whose detour @xmath795 is in @xmath664 .",
    "[ lem : detour_gradual ] for every @xmath85-replacement path @xmath730 with @xmath796 and @xmath797 , it holds that @xmath798 \\subseteq \\kernelgraph(\\mathcal{d})$ ] .",
    "let @xmath730 be such that its detour @xmath799 was added to the kernel graph @xmath773 at step @xmath800 .",
    "let @xmath801 .",
    "there are two cases . if @xmath802 $ ] , then @xmath803 \\subseteq \\kernelgraph(\\mathcal{d})$ ] and the claim holds .",
    "hence , it remains to consider the case where @xmath804 $ ] .",
    "[ fig : kernel](b ) for an illustration .",
    "note that in such a case , @xmath805 is a truncated detour .",
    "consider the maximal sequence @xmath806 where @xmath807 for @xmath808 such that @xmath394 is the first index satisfying either that @xmath809 $ ] or that @xmath810 is a non - truncated detour , i.e. , it was added in its entirety to the kernel graph @xmath773 . since the first detour @xmath643 in the @xmath662-ordering",
    "was added in its entirety to the kernal , the terminating element in this sequence is well defined .",
    "we now prove by induction that for every @xmath811 , the following holds .",
    "\\(a ) @xmath812 , and for every @xmath813 ,    ( b1 ) @xmath814 , and in particular @xmath815 occurs on @xmath805 before the edge @xmath501 ( i.e. , @xmath816 $ ] )    ( b2 ) @xmath817\\subseteq \\kernelgraph(\\mathcal{d})$ ] , where @xmath818 .",
    "the base of the induction @xmath819 holds by definition . assume it holds up to @xmath820 and consider @xmath278 .",
    "we begin with part ( a ) and assume towards contradiction that @xmath821 . by part ( b1 ) of the induction assumption for step @xmath820 , it holds that @xmath822 and it appears on @xmath805 before the failing edge @xmath501 . since @xmath823 is the breaker of @xmath824 , it holds that @xmath825 $ ] . hence , @xmath805 and @xmath823 are dependent .",
    "let @xmath826 be the last point on @xmath823 that is common to @xmath805 . by the ordering of @xmath664 , @xmath827 .",
    "we distinguish between two cases .",
    "case ( 1 ) : @xmath828 .",
    "this case is further divided into 3 subcases depending on the value of @xmath829 with respect to @xmath830 .",
    "case ( 1.1 ) : @xmath831 . in this case , by cl .",
    "[ cl : jointdet ] , @xmath832=d_{i_j}[w_{i_{j-1 } } , y_{i_j}]$ ] .",
    "this is in contradiction by part ( b1 ) for step @xmath278 , as @xmath833 $ ] and hence @xmath812 .",
    "+ case ( 1.2 ) : @xmath834 .",
    "then @xmath823 is nested in @xmath805 , hence by cl .",
    "[ cl : depen_detdisjoint ] , they are independent , in contradiction to the existence of a common vertex @xmath835 .",
    "case ( 1.3 ) : @xmath836 .",
    "first , observe that since @xmath833 $ ] , by cl .",
    "[ cl : depen_detbad ] it holds that @xmath805 and @xmath837 are neither rev - interleaved not @xmath662-interleaved .",
    "hence , @xmath805 and @xmath837 are fw - interleaved . by cl .",
    "[ cl : depen_detbad ] , there exists no @xmath160 with @xmath838 and @xmath839 $ ] , i.e. , there are no failures in @xmath805 after @xmath826 . since @xmath840 and it appears on @xmath805 after the common segment @xmath841 , it holds that @xmath842 $ ] , leading to contradiction .",
    "it remains to consider case ( 2 ) where @xmath843 ( i.e. , @xmath805 and @xmath823 are @xmath658-interleaved ) . by the ordering of @xmath664",
    ", it holds that @xmath844 , and hence by cl .",
    "[ cl : jointdet ] , @xmath845=d_{i_j}[x_{i_j } , w']$ ] . by the contradictory assumption , @xmath846 $ ] , leading to contradiction by cl .",
    "[ cl : depen_detbad ] . hence , part ( a ) of the induction hypothesis holds .",
    "we now turn to part ( b1 ) .",
    "since @xmath847 , by the stopping criteria of the sequence , it holds that @xmath501 was not included in the prefix taken from @xmath823 , i.e. , @xmath848 $ ] .",
    "so by part(a ) , @xmath849 $ ] ( i.e. , @xmath501 appears on @xmath823 after @xmath815 ) .",
    "since @xmath823 is the breaker of @xmath824 , it holds that @xmath850 $ ] .",
    "hence , @xmath851 $ ] . by part ( b1 ) of the induction assumption , @xmath852 and by definition , @xmath853 .",
    "[ cl : jointdet ] , @xmath854=d_{i_{j}}[w_{i_{j-1 } } , q_2]$ ] , so in particular , @xmath814 as well . by the part ( b1 ) of the induction assumption , @xmath501 occurs on @xmath805 after @xmath835 . by the fact that @xmath850 $ ] and @xmath855 $ ]",
    ", it also holds that @xmath501 occurs on @xmath823 after @xmath835 .",
    "hence , we conclude that the common segment @xmath854 $ ] of these detours is used in the same direction : from @xmath835 to @xmath856 via @xmath815 .",
    "therefore , @xmath815 appears on @xmath805 before the failing edge @xmath501 , so ( b1 ) holds .",
    "finally , consider part ( b2 ) . by part ( b1 ) for steps @xmath820 and @xmath278 , we have that @xmath857 . by the definition of the detour @xmath823 , it also holds that @xmath858 .",
    "hence , by cl .",
    "[ cl : jointdet ] , it holds that @xmath859=d_{i_1}[w_{i_{j-1 } } , w_{i_j}]$ ] . since @xmath859\\subseteq d_{i_j}[x_{i_j},w_{i_j}]$ ]",
    ", we have that the prefix @xmath860 $ ] was taken into the kernel , i.e. , @xmath860 \\subseteq \\kernelgraph(\\mathcal{d})$ ] , so ( b2 ) holds as well .",
    "we are now ready to complete the proof of the lemma .",
    "since @xmath861 and in particular @xmath809 $ ] , we get that @xmath501 is in @xmath773 . by part ( b2 ) , we have that for every @xmath847 , @xmath862 \\subseteq \\kernelgraph(\\mathcal{d})$ ] . combining this with the fact that @xmath863 \\subseteq d_{i_k}[x_{i_k } , w_{i_k}]$ ] was also added to @xmath773",
    ", we get that @xmath864 \\circ d_{i_1}[w_{i_1 } , w_{i_2 } ] \\circ \\ldots \\circ   d_{i_1}[w_{i_{k-2}},w_{i_{k-1}}]\\circ d_{i_1}[w_{i_{k-1 } } , q_2]=d_{i_1}[x_{i_1},q_2 ] \\subseteq \\kernelgraph(\\mathcal{d}).\\ ] ] the claim follows .     where the detours @xmath865 are inserted in this order . for detour @xmath80 ,",
    "the vertex @xmath779 is the first vertex appearing in @xmath866 $ ] .",
    "the dotted segments are not included in the kernel , hence @xmath867 $ ] is not taken into the kernel .",
    "the detours @xmath643 and @xmath868 are non - truncated and the detours @xmath644 and @xmath869 are truncated .",
    "the detour @xmath643 ( resp . , @xmath644 ) is the breaker of @xmath644 ( resp . , @xmath869 ) .",
    "hence , @xmath870 and @xmath871 .",
    "( b ) illustration for lemma [ lem : detour_gradual ] .",
    "note that the sequence of vertices @xmath872 is on @xmath805 , getting closer to the failing edge @xmath501 .",
    "[ fig : kernel],width=480 ]      in this section , we turn to present several properties of new - ending paths @xmath483 ( i.e. , that were not contained in @xmath440 , and hence introduced @xmath482 to the subgraph @xmath88 ) and then classify the set of new - ending paths @xmath153 into five path classes .",
    "the following claim summarizes some basic properties of new ending @xmath85-replacement paths that are useful in our analysis .",
    "it states that for every new - ending @xmath85-path @xmath104 , the @xmath98-divergence point @xmath510 and the @xmath99-divergence point @xmath511 ( if exists ) are unique .",
    "[ cl : rp_prop1 ] let @xmath873 be the new - ending @xmath85-replacement path added in step @xmath516 of alg . @xmath86",
    "( i.e. , it was not contained in the graph @xmath440 defined in step 3 of the algorithm . recall that @xmath874 , @xmath875 and @xmath876 $ ]",
    "is the detour segment of @xmath452 .",
    "let @xmath446 be the first divergence point of @xmath455 from @xmath27 . then",
    ": + ( 1 ) there is no alternative replacement path whose first divergence point from @xmath27 appears before @xmath446 .",
    "+ ( 2 ) if @xmath877 then @xmath878 . +",
    "( 3 ) if @xmath879 , let @xmath880 be the first divergence point of @xmath455 from @xmath445 . then : + ( 3.1 ) @xmath881 \\circ p_{s , v , f_\\tau}[c_\\tau , v]$ ] and @xmath882 $ ] is edge disjoint with @xmath883 .",
    "+ ( 3.2 ) there is no alternative replacement path with divergence point @xmath443 whose first divergence point from @xmath445 appears on @xmath445 before @xmath880 ( i.e. , closer to @xmath444 ) .",
    "claim ( 1 ) follows immediately as the algorithm chooses the divergence point closest to @xmath4 .",
    "consider claim ( 2 ) . by the definition of @xmath443 , @xmath884 . recall that in the case where @xmath885 ,    assume towards contradiction that @xmath885 and yet @xmath886 .",
    "let @xmath887 be a common vertex of @xmath888 and @xmath445 .",
    "first assume that @xmath67 appears on @xmath445 above the second failing edge @xmath464 .",
    "we show that in this case @xmath454 .",
    "since the algorithm defines @xmath889 , @xmath443 is the unique divergence point of @xmath27 and @xmath483 .",
    "if @xmath443 is above @xmath444 on @xmath27 then there are two distinct @xmath890 shortest paths in @xmath891 , , namely , @xmath892 $ ] and @xmath893 $ ] . by optimality of these subpaths , @xmath681 , hence we end with contradiction to claim [ cl : onefstru](2 ) for the path @xmath406 . similarly ,",
    "if @xmath443 is below @xmath444 we end with contradiction to cl .",
    "[ cl : rp_prop1](1 ) for the path @xmath483 .",
    "hence , @xmath454 .",
    "next , consider the case where @xmath67 appears on @xmath445 _ after _ the failing edge @xmath615 . in this case",
    ", we get that there are two distinct @xmath115 paths in @xmath894 , namely , @xmath895 \\subseteq p_{\\tau}[b_{\\tau},v]$ ] and @xmath896 \\circ \\pi(y_\\tau , v)$ ] . by the optimality of these subpaths , @xmath681 , in contradiction to the fact that @xmath888 is new - ending .",
    "finally , consider claim ( 3 ) where @xmath454 .",
    "@xmath86 selects the replacement path @xmath483 whose closest divergence point on @xmath445 and by the definition of this path , this divergence point is forced to be unique i.e. , the edges of @xmath897 $ ] are omitted from the graph @xmath898 in which @xmath483 is defined .",
    "both parts of claim ( 3 ) follows .",
    "we conclude this section , by providing a useful property for new - ending @xmath85 replacement paths @xmath59 that intersect their detour @xmath795 .",
    "the next lemma states that the @xmath99-divergence point @xmath602 of @xmath59 and @xmath795 is distinct .",
    "[ lem : uniquebp ] for every @xmath85-paths @xmath899 satisfying that @xmath900 for @xmath626 , it holds that @xmath901 .",
    "assume , towards contradiction , that there exists two @xmath85 new - ending paths @xmath902 such that @xmath903 .",
    "let @xmath904 , for @xmath905 . since @xmath906 intersect with their detours @xmath643 and @xmath644 respectively , it holds that @xmath907 and @xmath908 , hence @xmath909 and @xmath910 intersect at some point _ not after _ @xmath911 .",
    "first note that @xmath912 , because otherwise , @xmath913 and since @xmath914 occur after @xmath911 , it holds that there are two distinct new - ending @xmath915 shortest paths in @xmath916 , namely , @xmath917 \\neq p_2[c_1,v]$ ] , contradiction since the selection of the latter of them by alg .",
    "@xmath86 could have been avoided .    from now on assume , without loss of generality , that @xmath563 is above @xmath741 on @xmath27 ( i.e. , closer to @xmath4 ) .",
    "let @xmath67 be the last vertex on @xmath643 that is common to @xmath644 .",
    "since @xmath563 is above @xmath741 and @xmath643 and @xmath644 are dependent ( they share a common vertex @xmath911 ) , it holds by cl .",
    "[ cl : disjindep ] and [ cl : depen_detdisjoint ] that they are neither nested nor non - nested .",
    "hence , we have that @xmath918 ( as otherwise by cl .",
    "[ cl : det_nested](1 ) , @xmath919 is above @xmath563 ) .",
    "we consider three cases .",
    "note that by cor .",
    "[ cl : rev_nomutual ] , @xmath643 and @xmath644 are neither rev - interleaved nor @xmath662-interleaved ( i.e. , in such a case , @xmath67 is also the last vertex on @xmath644 that is common to @xmath643 ) . by cl .",
    "[ cl : rp_prop1](3.1 ) , it holds that @xmath920 \\subseteq p_i$ ] for @xmath921 .",
    "hence @xmath922 and @xmath923 occur on @xmath723 after @xmath911 , i.e , @xmath924=d_2[c_1,w]$ ] .",
    "note that since @xmath643 and @xmath644 are neither rev - interleaved nor @xmath662-interleaved , by cl .",
    "[ cl : summ_depend ] , the common segment @xmath925 $ ] is used by the two detours in the same direction .",
    "there are now two distinct new - ending @xmath915 shortest paths in @xmath926 , namely , @xmath927 $ ] and @xmath928 $ ] ( these paths are distinct as @xmath929 ) .",
    "this is again in contradiction to the selection of @xmath64 by alg .",
    "@xmath86 , since it was constructed after @xmath65 , so its last edge could have been avoided . since @xmath922 appears on @xmath643 after the common vertex @xmath911 , yet it is not in @xmath644 , we get that @xmath922 appears on @xmath643 after the last common vertex with @xmath644 , namely , @xmath67 . in particular",
    ", @xmath922 appears on the non - common suffix @xmath737 $ ] .",
    "hence , @xmath643 and @xmath644 are _ neither _ @xmath660-interleaved nor @xmath662-interleaved ( since in these cases , @xmath930 ) .",
    "let @xmath826 be the last vertex on @xmath644 that is common to @xmath643 .",
    "note that @xmath737\\subseteq d_1[w',y_1]$ ] ( i.e. , if @xmath643 and @xmath644 are rev - interleaved , @xmath826 is the first vertex on @xmath643 that is common to @xmath644 and in other cases , where the common segment is used in the same direction by both detours , @xmath931 ) . by eq .",
    "( [ eq : unic ] ) , cl .",
    "[ cl : depen_detbad ] , and the fact that @xmath932 and @xmath933 , we get that @xmath934 $ ] , contradicting the fact that @xmath935 $ ] . by combining eq .",
    "( [ eq : unic ] ) , the fact that the detours are dependent and that @xmath936 , by cor .",
    "[ cl : rev_nomutual ] , it holds that @xmath643 and @xmath644 are neither rev - interleaved nor @xmath662-interleaved .",
    "hence , by cl .",
    "[ cl : summ_depend](b ) , the common segment @xmath723 is used in the same direction by both detours . in particular , @xmath67 is also the last vertex on @xmath644 that is common with @xmath643 . since @xmath923 occurs after the common vertex @xmath911 , in this case , @xmath937 $ ] and @xmath938 $ ] .",
    "since @xmath939 appears before the failing edge @xmath922 on @xmath643 , it holds that @xmath940 .",
    "we now break case ( c ) further into two subcases .",
    "case ( c1 ) : @xmath941 $ ] . then again there are two distinct @xmath915 shortest paths in @xmath926 , namely , @xmath917 $ ] and @xmath942 $ ] , and we end with contradiction to the construction of these paths by alg . @xmath86 .    case ( c2 ) : @xmath943 $ ] .",
    "let @xmath944 and recall that @xmath945 $ ] .",
    "we show that in such a case , there are two @xmath946 shortest - paths in @xmath947 , namely , @xmath948 $ ] and @xmath949\\circ \\pi[y_2,v]$ ] . to see this",
    ", note that by eq .",
    "( [ eq : unic ] ) , @xmath762 .",
    "in addition , since @xmath950 $ ] and @xmath951 ( as @xmath563 is above @xmath741 ) , it also holds that @xmath952 . by optimality of these subpaths ( as @xmath953 and @xmath954 )",
    ", we have that @xmath681 .",
    "we then end with contradiction to the selection of @xmath64 by alg .",
    "@xmath86 ( since the algorithm could have used the alternative @xmath23 replacement path @xmath955 \\circ q_2 $ ] in @xmath956 , which is not new - ending ) .",
    "recall that the set @xmath492 contains the collection of new - ending @xmath23 replacement paths , each representing one distinct new edge from @xmath491 . for every new - ending path @xmath957 ,",
    "recall that @xmath958 is the detour segment protecting the first failing edge @xmath959 of @xmath21 and @xmath510 is the unique @xmath98-divergence point of @xmath104 .    in this section ,",
    "the new - ending @xmath23 replacement path collection , @xmath153 , is classified into five classes . the first class @xmath960 consists of new - ending @xmath83 paths @xmath37 protecting against two edge faults on @xmath27 , i.e. , @xmath961 .",
    "the cardinality of this set is later bounded by @xmath96 , using an argumentation that is similar to that of the single failure case @xcite . the second class of paths @xmath211 consists of paths @xmath957 that do not intersect the edges of their detour @xmath80 at all , namely , @xmath962 , as in fig .",
    "[ fig : apathtype](d ) . for this class",
    ", it is shown that the first failing edge of any two paths in this class is distinct , i.e. , @xmath227 for every @xmath963 .",
    "this key observation is used to bound the cardinality of this class by @xmath92 .",
    "the remaining set @xmath964 of new - ending @xmath85 paths consists of paths @xmath104 for which @xmath965 and @xmath966 , as in fig .",
    "[ fig : apathtype](c ) .",
    "this set constitutes the main technical challenge in the analysis . to bound its cardinality",
    ", we would like to employ the same high level strategy : new - ending paths consume many vertices , and since the number of vertices is limited by @xmath3 , the number of new - ending paths is bounded as well ( as a function of @xmath3 ) . to do that , we would like to show that every new - ending path @xmath967 has an nonnegligible number of distinct vertices , not appearing on any other path @xmath968 .",
    "the main technical question is to identify a subpath of the new - ending path that is guaranteed to be sufficiently long and disjoint from all others .",
    "consider the following natural approach .",
    "for every @xmath969 , define its suffix as @xmath970 $ ] where @xmath286 is @xmath99-divergence point of @xmath104 .",
    "we then would like to claim that the @xmath971 s are disjoint . to do that",
    ", one should prove ( by contradiction ) that if there exists a common vertex @xmath972 , for some @xmath973 , then one of the two suffixes from @xmath67 on , say @xmath974,$ ] could be replaced by the other suffix @xmath975 $ ] , and hence a proper construction of the paths should have avoided the inclusion of the new edge @xmath119 , leading to contradiction .",
    "for such an argumentation to hold , one should show that using @xmath974 $ ] instead of @xmath975 $ ] or vice - versa is _ safe _ , namely , that neither of these segments contains the failing edges of the other path , or more formally , @xmath976 and @xmath977 .",
    "does this statement always hold ?",
    "consider the first failing edges of these paths , namely , @xmath978 .",
    "since @xmath979 $ ] is edge disjoint with @xmath27 , it holds that @xmath980 and analogously @xmath981 .",
    "so the main challenge is in showing that the second failing edge @xmath982 does not occur on @xmath971 and vice - versa .",
    "this , however , can be guaranteed only for the restricted case where @xmath983 .",
    "specifically , this holds as @xmath286 ( resp . , @xmath984 ) is the unique @xmath99-divergence point of @xmath104 ( resp . , @xmath139 ) from the detour @xmath80 ( resp . , @xmath142 ) .",
    "hence @xmath985 and @xmath986 .",
    "the conclusion is that the main obstacle for defining a unique set of vertices for each new - ending path boils down to the cases where @xmath104 contains the second failing edge @xmath987 .",
    "this last observation motivates the definition of _ interference _ defined next .",
    "[ [ interference - and - independence - of - replacement - paths . ] ] interference and independence of replacement paths .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    for paths @xmath988 , we say that @xmath104 _ interferes _ with @xmath139 if @xmath208 .",
    "the paths @xmath988 are _ independent _ if @xmath104 does not interfere with @xmath139 and vice - versa .",
    "indeed , for independent pair of paths @xmath104 and @xmath139 , upon proper construction of the replacement paths , it can be shown that the segments @xmath971 and @xmath989 are disjoint .",
    "this leads to the definition of the third path class , @xmath990 , consisting of all new - ending paths that do not interfere with any other new - ending path in @xmath153 . by exploiting the fact that these paths do not intersect after they leave their detour , namely , @xmath971 and @xmath989 are disjoint",
    ", we show that there are at most @xmath92 independent paths .",
    "finally , we consider the most involved case , which is that of interfering paths .",
    "the set of interfering paths is further classified into two subsets by distinguishing between two types of interference , namely , @xmath98-_interference _ and @xmath99-_interference_. we proceed by giving some high level intuition for this classification .",
    "let @xmath104 be a new ending path interfering with another new - ending path @xmath139 , i.e. , @xmath315 appears on @xmath991 .",
    "on the fact of it , a natural short route from @xmath856 to @xmath21 in @xmath0 may be given by @xmath992 \\circ \\pi(y_j , v)$ ] ( see the dashed green paths in fig . [",
    "fig : indep](b , c ) ) .",
    "note that since @xmath993 is a subpath of the replacement path @xmath994 , where @xmath995 , it holds that @xmath996 . since @xmath971 is a subpath of @xmath104 starting at a point that occurs on or after the @xmath98-divergence point @xmath108 of @xmath27 and @xmath104",
    ", it holds that @xmath997 .",
    "hence , the alternative @xmath322 path @xmath998 $ ] can not be shorter than @xmath993 . by the fact that alg .",
    "@xmath86 defines @xmath104 as a new - ending path , since the last edge of @xmath993 was already present in the constructed structure at the time when @xmath104 was constructed , it holds that @xmath999 , i.e. , the subpath @xmath993 , although optimal in its length , could not be used as part of the replacement path @xmath104 since it contains at least one of the two edges @xmath1000 against whose failure @xmath104 aims to protect .",
    "we now define two types of interference , depending on the two possible scenarios .",
    "if @xmath993 contains the _ first _ failing edge @xmath1001 , i.e. , @xmath1002 , we say that @xmath104 @xmath98-_interferes _ with @xmath139 .",
    "this notation indicates that the reason for not using the existing route @xmath993 , when considering the failing pair @xmath1000 , is the fact that @xmath993 contains the first failing edge @xmath1001 , which by definition , is always in @xmath27 ( see the green dashed path in fig .",
    "[ fig : indep](b ) ) .",
    "alternatively , the second optional scenario is that the @xmath322 route @xmath993 is not used as part of @xmath104 since it contains the second failing edge @xmath1003 , which by definition ( as @xmath965 ) occurs on the detour @xmath229 .",
    "specifically , in such a case @xmath1004\\subseteq q$ ] .",
    "we then say that @xmath104 @xmath99-_interferes _ with @xmath139 ( see the green dashed path in fig .",
    "[ fig : indep](c ) ) .",
    "this notation indicates that the reason for not using the existing route @xmath993 , is the fact that it contains the second failing edge @xmath1003 occurring on the detour @xmath229 .",
    "note that in general , these two types of interference are not exclusive and it might be the case that @xmath104 both @xmath98-interferes and @xmath99-interferes with @xmath139 .    for an interfering path @xmath59 ,",
    "let @xmath1005 be the set of new - ending paths interfered by @xmath59 .",
    "we now subdivide the set of interfering paths into two classes , namely , @xmath1006 and @xmath1007 , depending on the type of interference of @xmath59 on @xmath1008 .",
    "if the path @xmath59 @xmath98-interferes with every @xmath1009 , then let @xmath1010 . otherwise , if there exists at least one path @xmath1009 such that @xmath59 @xmath99-interferes but does not @xmath98-interfere with @xmath160 , then let @xmath1011 .",
    "the cardinality of these path classes is bounded using different tools , and each is shown to contain @xmath92 paths . for a schematic illustration of the different notions of interference ,",
    "[ fig : indep ] .     such that @xmath1012 and @xmath311 for @xmath137 .",
    "( a ) the paths @xmath104 and @xmath139 are independent , since @xmath1013 .",
    "( b ) @xmath104 is @xmath98-interfering to @xmath139 since @xmath76 appears below @xmath1014 on @xmath27 . the replacement path @xmath104 traverses the failing edge @xmath146 .",
    "this path can not proceed along the green dashed path since @xmath1015 ( c ) @xmath104 @xmath99-interferes with @xmath139 since @xmath1016 after the edge @xmath77 , and hence this path can not proceed along the green dashed path .",
    "[ fig : indep],width=480 ]    formally , we have the following new - ending path classification .",
    "\\(a ) @xmath1017    \\(b ) @xmath1018 ,    \\(c ) @xmath1019    \\(d ) @xmath1020    \\(e ) @xmath1021 .    for schematic illustration",
    "[ fig : rpclass ] .    , width=480 ]    in our argumentation , we consider these classes in different order .",
    "we first consider the class @xmath211 and bound its cardinality using the kernel graph .",
    "we then use the analysis of this class to bound the cardinality of the collection of @xmath99-interfering paths @xmath1022 .",
    "next , we consider the class of independent paths @xmath990 .",
    "the analysis of this class is completely different compared to the analysis of the previous two classes .",
    "finally , we consider the class of @xmath98-interfering paths , @xmath1006 , and show that they are  almost \" independent , in the sense that interference of type @xmath98 induces only a limited amount of dependence between the replacement paths and hence the analysis for the independent case can goes through with relatively minor modifications .    before turning to bound the number of @xmath83 and @xmath85 new ending paths , note that the number of last edges of replacement path @xmath78 for @xmath79 is bounded by @xmath96 as in @xcite .",
    "[ lem : single_fault ] @xmath1023    by the uniqueness of the @xmath98-divergence point , it is required to bound the number of replacement path @xmath78 whose last edge is not in @xmath171 . for every such path @xmath1024",
    ", it holds that @xmath604 $ ] is edge disjoint with @xmath27 , and therefore @xmath604=sp(b(p),v , g \\setminus e(\\pi(s , v)),w)$ ] .",
    "let @xmath102 be such that each @xmath103 ends with a different new edge of @xmath21 and ordered in nondecreasing distance of @xmath1025 . by the uniqueness of the weight assignment @xmath101",
    ", it holds that @xmath1026\\setminus \\{v\\}$ ] are disjoint .",
    "hence , @xmath1027 , and @xmath1028 .",
    "overall , since there are @xmath3 vertices in @xmath0 , we get that @xmath128 as required .",
    "we first consider the new - ending @xmath83-replacement paths protecting against failures on the @xmath27 paths .",
    "[ lem : not_inters ] @xmath1029 .    by obs .",
    "[ lem : single_fault ] , it is sufficient to bound the edge set @xmath1030 . for every edge @xmath1031 ,",
    "select one path @xmath1032 such that @xmath1033 .",
    "note that it then holds that @xmath1034 ( i.e. , in such a case , @xmath1032 is not composed of the detours of @xmath80 and @xmath142 ) .",
    "let @xmath102 be the selected @xmath83 replacement paths , each ends with a distinct edge from @xmath1035 .",
    "let @xmath138 be the last divergence point of @xmath1036 and @xmath27 .",
    "let @xmath1037 $ ] .",
    "note that by definition , @xmath1038 and hence @xmath989 is edge disjoint with @xmath27 .",
    "we now claim that @xmath1039 and @xmath1040 are vertex disjoint besides their common endpoint @xmath21 .",
    "assume , towards contradiction otherwise , and let @xmath1041 be a common vertex in the intersection",
    ". by definition , @xmath1042 are edge disjoint with @xmath27 .",
    "since @xmath1043 , there are two distinct @xmath115 shortest paths in @xmath1044 , namely , @xmath1045 $ ] and @xmath1046 $ ] , contradiction by the uniqueness of the shortest paths .",
    "order the paths of detours of @xmath1047 in increasing distance of @xmath138 and @xmath21 .",
    "then , @xmath1048 hence , @xmath1049 , concluding that @xmath128 .",
    "in this section , we consider the set of paths and detours @xmath1050 and bound its cardinality .",
    "our strategy is as follows .",
    "we first show that the first failing edge of every path @xmath59 in this set is distinct .",
    "then , lemma [ lem : bound_no_touch ] uses this property and the kernel subgraph @xmath1051 of the detours of @xmath1052 to bound the cardinality of this set .",
    "[ lem : not_inters ] @xmath1053 for every @xmath1054 .    towards contradiction assume otherwise , that @xmath1055 and hence also @xmath1056 . without loss of generality , assume that @xmath64 was constructed by alg . @xmath86 before @xmath65 .",
    "since both are @xmath85 paths , we have that the second faults are on the same detour @xmath1057 . since @xmath1054 , we have that @xmath1058 .",
    "this implies that there are two shortest @xmath23 paths in @xmath1059 , namely @xmath64 and @xmath65 . by the optimality of these paths @xmath1060 , in contradiction to the selection of the last edge of @xmath65 by alg . @xmath86 .",
    "the next lemma bounds the number of paths in any collection of new - ending replacement paths @xmath1061 satisfying that @xmath1062 for every @xmath1063 .",
    "[ lem : bound_no_touch ] every collection of new - ending replacement paths @xmath770 satisfying that @xmath1062 for every @xmath1063 , is of size @xmath1064 .",
    "let @xmath1065 .",
    "order the paths of @xmath1066 in increasing distance of @xmath4 and @xmath215 , i.e. , @xmath216 .",
    "let @xmath217 and @xmath218 .",
    "we now restrict attention to the set of first @xmath219 paths @xmath220 .",
    "note that for each path @xmath1067 , the distance from @xmath21 to the first failing edge @xmath995 is @xmath1068 .",
    "let @xmath284 .",
    "we now construct the kernel subgraph @xmath1069 of the corresponding @xmath219 detours @xmath1070 .",
    "recall that @xmath80 contributed only its prefix @xmath782 $ ] to the kernel subgraph @xmath1069 .    from now on , let @xmath1071 refer to the vertices of the kernel graph @xmath1072 excluding the vertices appearing on @xmath27 , i.e. , @xmath1073 .",
    "let @xmath1074 be paths in @xmath224 that have no common vertex with @xmath1071 and let @xmath1075 be the remaining paths .",
    "we begin by bounding the cardinality of @xmath1076 .",
    "[ obs : nondet_det ] @xmath1077 .",
    "let @xmath108 be the first divergence point of @xmath104 from @xmath1078 .",
    "[ cl : unique_nnew ] , @xmath108 is a unique divergence point and hence @xmath342 $ ] and @xmath27 are edge disjoint . without loss of generality , assume that @xmath104 was constructed by alg . @xmath86 before @xmath139 .",
    "we now claim that @xmath1079 $ ] and @xmath1080 $ ] are vertex disjoint , except for their common endpoint @xmath21 , for every @xmath1081 . by cl .",
    "[ lem : detour_gradual ] , the second failing edges @xmath1082 appears in the kernel subgraph @xmath1069 as @xmath1083 . since @xmath207 do not intersect with @xmath1071",
    ", it holds that @xmath1084 .",
    "assume , towards contradiction , that there exists a common vertex @xmath1085 in the intersection of @xmath971 and @xmath989 .",
    "it implies that there are two @xmath115 paths in @xmath1086 , namely @xmath116 \\neq p_j[w , v]$ ] , contradiction to the selection of @xmath139 by alg .",
    "@xmath86 , since its new edge could have been saved .",
    "order the paths @xmath1087 in decreasing distance of @xmath1088 , i.e. , @xmath1089 .",
    "it holds that @xmath1090 .",
    "hence , @xmath1091 .",
    "as there are @xmath3 vertices in @xmath0 , we get that @xmath128 .",
    "the claim follows .",
    "so , it remains to bound the set @xmath1092 of paths that intersect the vertex set @xmath1071 .",
    "for every path @xmath1093 , let @xmath225 be the last common vertex of @xmath104 and @xmath1071 on @xmath104 , and define its suffix @xmath1094 $ ] .",
    "we now show that the @xmath147 segments are disjoint , and using the structure of the kernel subgraph , we also show that the number of vertices in these subpaths is rapidly increasing with @xmath3 .",
    "[ cl : disjoint_nondet ] @xmath1095 .",
    "the proof is similar to that of obs .",
    "[ obs : nondet_det ] .",
    "since @xmath1096 and @xmath1097 are edge disjoint with @xmath27 and by definition they are vertex disjoint with @xmath1071 , by lemma [ lem : detour_gradual ] , it holds that @xmath1098 are not in @xmath147 and @xmath148 .",
    "if there is a common vertex @xmath1099 , then there are two distinct @xmath115 paths in @xmath1100 , and we end with contradiction to the construction of these paths by algorithm @xmath86 .",
    "we now classify the detours @xmath232 according to the length of the prefix @xmath781 $ ] that was taken into the kernel .",
    "a detour @xmath142 is _ expensive _ if @xmath1101|\\geq m/2 $ ] , otherwise it is _",
    "cheap_. next , the new - ending paths @xmath104 of @xmath1092 are classified according to the first detour @xmath235 in the @xmath662-ordering @xmath1102 on which @xmath225 ( the last common vertex of @xmath104 and @xmath1071 ) appears on its prefix , i.e. , @xmath1103 is the first detour in @xmath1102 satisfying that @xmath1104 $ ] .",
    "then @xmath104 is expensive ( resp . ,",
    "cheap ) if @xmath235 is expensive ( resp . ,",
    "let @xmath1105 and @xmath1106 , where @xmath1107 . to bound @xmath1108",
    ", we separately bound @xmath240 and @xmath241 .",
    "we first consider the cheap paths .",
    "[ cl : cheap ] @xmath242 .",
    "let @xmath243)\\setminus \\{v\\}$ ] .",
    "[ cl : disjoint_nondet ] , since @xmath1109 $ ] are disjoint ( except for the common endpoint @xmath21 ) , hence @xmath1110 .",
    "we now focus on some @xmath104 and show that @xmath1111 .",
    "first note that @xmath147 and @xmath27 are vertex disjoint ( except for the common endpoint @xmath21 ) , as @xmath225 occurs after @xmath108 , the unique @xmath98-divergence point of @xmath104 from @xmath27 .",
    "hence , @xmath1112 be the detour protecting against the failing of the edge @xmath141 .",
    "then , @xmath1113 where the penultimate inequality follows as @xmath249 appears above the failing edge on @xmath27 and last inequality follows by the fact that @xmath250 .",
    "since @xmath225 appears on a cheap detour @xmath142 , we get that @xmath1114|\\leq m/2~,\\end{aligned}\\ ] ] and hence by eq .",
    "( [ eqn : nondet2 ] ) and eq .",
    "( [ eqn : nondet33 ] ) , we get that @xmath252 .",
    "overall , by combining with eq .",
    "( [ eq : nodet1 ] ) , we get that @xmath1111 .",
    "we therefore have that @xmath253 .",
    "it follows that @xmath254 . since clearly ,",
    "also @xmath255 , we have @xmath256 .",
    "the claim follows .",
    "[ cl : expens_detours ] @xmath257 .",
    "let @xmath1115|\\geq m/2\\}$ ] be the collection of expensive detours , @xmath259 .",
    "we now classify the expensive paths of @xmath260 into @xmath261 classes where each path @xmath104 is mapped to the class of the detour @xmath262 on which @xmath225 appears .    for every @xmath262 ,",
    "let @xmath263 , and let @xmath264 be the cardinality of this set .",
    "we begin by bounding the number of vertices appearing in the expensive detours , let @xmath1116)$ ] be the vertices appearing on the expensive detours . by the construction of the kernel graph , the sets @xmath1117 $ ] are disjoint except for the point @xmath1118 ( in cases where @xmath142 is truncated ) .",
    "hence , since every @xmath262 is expensive , we get that @xmath1119 note that for every expensive path @xmath104 , its segment @xmath147 is vertex disjoint ( expect for its endpoints @xmath225 and @xmath21 ) with the vertex set @xmath269 since @xmath1120 .",
    "fix some @xmath270 , with @xmath271 expensive paths @xmath272 .",
    "we now claim that @xmath1121 contains @xmath274 vertices . by cl .",
    "[ cl : disjoint_nondet ] , the @xmath1096 segments are disjoint . order the paths of @xmath272 in increasing distance of @xmath225 from @xmath21 .",
    "since @xmath275 for every @xmath276 and the @xmath225 s are distinct it holds that @xmath277 and summing over all @xmath278 ( as the @xmath1122 are disjoint ) and using the cauchy - schwarz inequality , we get that latexmath:[\\[\\label{eq : nodetimcs }    @xmath280 and @xmath269 are disjoint , and thus by eq .",
    "( [ eq : nodet_2 ] ) and ( [ eq : nodetimcs ] ) , @xmath1124 we get @xmath282 , as required . lemma [ lem : bound_no_touch ] now follows by combining obs .",
    "[ obs : nondet_det ] , cl .",
    "[ cl : cheap ] and cl .",
    "[ cl : expens_detours ] . by combining lemma [ lem :",
    "not_inters ] with lemma [ lem : bound_no_touch ] , we get the following .",
    "[ cor : bound_no_touch ] @xmath1125 .      in this section ,",
    "we consider the set of @xmath99-interfering paths @xmath1126    for every path @xmath1127 , recall that @xmath1128 is the set of paths to which @xmath59 interferes .",
    "since @xmath1127 , the set of interfered paths @xmath1008 is non - empty . by the definition of @xmath1022 ,",
    "a path @xmath1129 satisfies @xmath1130 , so we have the following .",
    "[ obs : typee ] for every @xmath1127 : ( 1 ) @xmath1131 , + ( 2 ) there exists @xmath1009 , such that @xmath1132 and @xmath1133 \\cap d(p)$ ] and @xmath1134 where @xmath1135 and @xmath1136 .",
    "let @xmath1137 be the collection of detours corresponding to new - ending @xmath23 paths @xmath153 .",
    "let @xmath1138 be the number of the @xmath99-interfering paths and let @xmath1139 be the total number of detours .",
    "the main challenge in this section is to show that @xmath1140 and hence lemma [ lem : bound_no_touch ] can be applied to bound from above the cardinality of @xmath1022 .",
    "we begin by stating a useful claim for the paths in @xmath1022 .",
    "[ cl : interd ] for every @xmath1127 and for every @xmath1009 , @xmath1141 and @xmath1135 , it holds that @xmath131 and @xmath360 are dependent and not @xmath658-interleaved ( i.e. , @xmath1142 ) .    since the path @xmath59 @xmath99-interferes with the path @xmath160",
    ", it holds that the failing edge @xmath1143 , i.e. , the detours @xmath360 and @xmath360 are dependent .",
    "in particular , the failing edge @xmath501 appears on @xmath360 after the edge @xmath1144 .",
    "we now show that @xmath1145 where @xmath1146 and @xmath1147 . towards contradiction , assume otherwise . then since @xmath797 is common with @xmath131 and @xmath360 , by cl .",
    "[ cl : jointdet ] , @xmath1148=d'[x , q_2]$ ] .",
    "since @xmath1144 occurs on @xmath360 before the edge @xmath501 , it holds that @xmath1149 $ ] , contradiction to the fact that @xmath1150 .",
    "the claim follows .    in view of cl .",
    "[ cl : interd ] , the interfering paths @xmath59 of @xmath1022 are now subdivided into two subsets depending on the relation between their detour @xmath795 and detour @xmath1151 of the interfered paths @xmath1009 .",
    "let @xmath1152 be the set of interfering paths @xmath59 that interfere with a least one path @xmath160 whose detour @xmath1151 and @xmath795 are @xmath660-interleaved ( i.e. , ends at the same @xmath660-point ) , i.e. , @xmath1153 . let @xmath1154 be the complementary set of @xmath99 interfering paths . to bound the cardinality of @xmath1022 as a function of the total number of detours , we bound separately @xmath1152 and @xmath1155 .",
    "we begin with bounding @xmath1152 .    [",
    "[ bounding - the - number - of - paths - in - mathcali1_sf - d . ] ] bounding the number of paths in @xmath1152 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    for every @xmath59 , let @xmath1156 be some path @xmath160 interfered by @xmath59 whose detour is @xmath660-interleaved with @xmath795 , i.e. , @xmath1157 and @xmath1158 .",
    "since @xmath1159 , such @xmath1156 is guaranteed to exist .",
    "our strategy now is to classify the paths @xmath59 of @xmath1152 according to the @xmath660-value of their detour @xmath795 and consider each class separately . for every vertex @xmath1160 ,",
    "let @xmath1161 be the set of detours in whose @xmath660-value is @xmath1162 , i.e. , @xmath1163 .",
    "let @xmath1164 be the set new - ending paths in @xmath1152 whose detours are in @xmath1161 , i.e. , @xmath1165 .",
    "we now fix some @xmath1160 and bound the number of paths @xmath1166 by the number of @xmath660-interleaved detours @xmath1167 .",
    "our goal is to show that for every @xmath1160 , @xmath1168 . to show this , we consider @xmath1160 and construct the kernel graph @xmath1169 on the subset of @xmath660-interleaved detours @xmath1170 . note that",
    "whereas in general @xmath773 is a _",
    "subgraph _ of the graph @xmath1171 obtained by the union of the detours in @xmath664 , in this specific case , where all the detours are @xmath660-interleaved ( end in the same vertex ) , the kernel graph coincides with the whole graph , i.e. , @xmath1172 .",
    "this is proven formally in obs .",
    "[ obs : all ] .",
    "let @xmath1173 and @xmath1174 denote the endpoints of the detour fragments taken into the kernel graph @xmath1169 .",
    "we begin by claiming that for every two @xmath660-interleaved detours @xmath1175 , their first common intersection point @xmath720 is in the endpoint set @xmath1176 .",
    "( this means that the number of first common intersection points among detour pairs in @xmath1161 is only @xmath1177 rather than @xmath1178 . )",
    "recall that by cl .",
    "[ cl : summ_depend ] , since @xmath643 and @xmath644 are @xmath660-interleaved , it holds that the first common vertex is the same , i.e. , @xmath725 .",
    "[ cl : w ] for every @xmath1175 , @xmath1179 .",
    "let @xmath1180 be ordered by @xmath662-ordering @xmath1181 , corresponding to their addition into the kernel subgraph @xmath1169 .",
    "we prove by induction on @xmath1182 , that @xmath1183 for every @xmath1184 .",
    "the base of the induction @xmath1185 holds vacuously .",
    "assume the claim holds up to @xmath1186 and consider @xmath164 .",
    "there are two cases .",
    "case ( 1 ) : @xmath80 is a non - truncated detour ( i.e. , @xmath1187 for every @xmath1184 ) . in this case the claim holds vacuously again .",
    "case ( 2 ) : @xmath80 is truncated .",
    "let @xmath1188 be the breaker detour of @xmath80 for some @xmath1189 .",
    "in other words , @xmath1190 is the detour satisfying that @xmath1191 . by definition of the kernel graph ,",
    "the vertex @xmath1191 is included in the endpoint set @xmath1176 .",
    "note that for every other @xmath135 , for @xmath1192 , the first common vertex @xmath1193 appears on @xmath80 not before @xmath1194 .",
    "since @xmath80 and @xmath1190 are @xmath660-interleaved , by cl .",
    "[ cl : jointdet ] , @xmath1195=d_{j'}[w_i , y']$ ] .",
    "the remaining detours @xmath135 for @xmath1196 can now be divided into two types .",
    "the first type consists of detours @xmath135 whose first common vertex with @xmath1190 , namely , @xmath1197 appears on the detour @xmath1190 not after @xmath779 . in this case , since @xmath135 and @xmath1190 are @xmath660-interleaved , by cl .",
    "[ cl : jointdet ] , we get again that @xmath1198=d_{j'}[q_k , y']$ ] , and hence the first common vertex of these detours with @xmath80 is exactly @xmath779 , which was added , that is @xmath1199 .",
    "the second type consists of detours @xmath135 , for @xmath1200 , whose first common vertex with @xmath1190 , namely , @xmath1197 , appears on @xmath1190 after @xmath779 .",
    "in such a case , since @xmath80 and @xmath1190 are @xmath660-interleaved , by cl .",
    "[ cl : jointdet ] , we get that @xmath1201=d_{j'}[w_i , y']$ ] .",
    "therefore , the first common vertex of these detours with @xmath80 is exactly the same as their first common vertex with @xmath1190 , i.e. , @xmath1202 . by the induction assumption for @xmath1203",
    ", it holds that @xmath1204 .",
    "the claim holds .",
    "[ [ regions . ] ] regions .",
    "+ + + + + + + +    observe that in @xmath1169 , the vertices of @xmath1176 have degree at least @xmath355 , those of @xmath1205 have degree @xmath1206 , and all other vertices have degree @xmath39 .",
    "hence , @xmath1169 can be decomposed into a collection of maximal paths that are fragments of detours referred to hereafter as _ regions_. a subpath @xmath1207 is a _ region _ if is satisfies the following two properties : ( 1 ) the endpoints of the subpath @xmath1208 are in @xmath1176 , i.e , @xmath1208 is a @xmath1209 path in the kernel graph , for some @xmath1210 and ( 2 ) @xmath1208 contains no other points in @xmath1211 , i.e. , @xmath1212 .",
    "[ fig : interdyy](a ) for an illustration .",
    "let @xmath1213 be the collection of regions in @xmath1169 .",
    "note that the union of regions in @xmath1213 covers the kernel graph @xmath1169 , i.e. , @xmath1214 .",
    "let @xmath1215 .",
    "we now bound @xmath1216 by the number of detours @xmath1217 .",
    "[ cl : nregion ] ( 1 ) @xmath1218 regions .",
    "( 2 ) for every region @xmath1219 , there exists a detour @xmath1220 that contains it ( i.e. , @xmath1221 ) .    the two claim are shown by induction on the iterative process that constructs the kernel graph @xmath1222 , analyzing the regions induced at each step .",
    "let @xmath1223 and @xmath1224 be the number of regions induced up to step @xmath516 in @xmath1225 $ ] . for the induction base consider @xmath643 .",
    "the detour @xmath643 is non - truncated and hence the graph @xmath1226 consists of a single region and @xmath1227 , so ( 1 ) holds .",
    "in addition , the single region is @xmath643 and hence ( 2 ) holds as well .",
    "now assume that the two claims holds up to step @xmath1228 , and consider step @xmath516 when the detour @xmath445 is added to the kernel . if the current detour @xmath445 is non - truncated , then only one new region is added , namely , @xmath445 , so @xmath1229 by the induction assumption , so ( 1 ) holds .",
    "in addition , since the new region is exactly @xmath456 , part ( 2 ) holds as well .",
    "else , if @xmath445 is a truncated detour , let @xmath1230 be the region in the current kernel graph @xmath1231 that contains the vertex @xmath1232 ( i.e. , the first common vertex of @xmath445 and the current kernel graph @xmath1231 ) .",
    "as @xmath1233 joins the set @xmath1176 , this region @xmath1230 is bisected into two regions , namely , before and after the vertex @xmath1232 , and there is an additional new region corresponding to the fragment @xmath1234 $ ] . by the induction assumption , part ( 2 ) holds for the region @xmath1230 and hence it also holds for its two new fragments .",
    "the new region @xmath1235 $ ] clearly satisfies part ( 2 ) as well .",
    "note that the remaining regions @xmath1236 in @xmath1231 are unaffected by the addition of the detour @xmath456 .",
    "overall , after this step @xmath1237 so ( 1 ) holds .",
    "the claim follows .",
    "the following claim shows a useful property of a regions .",
    "[ cl : region_useful ] if @xmath1238 , then @xmath1239 .",
    "let @xmath1240 $ ] for some @xmath1241 and @xmath1242 .",
    "[ cl : nregion](2 ) and by the definition of a region this is well defined . )",
    "assume , towards contradiction , that there exists a detour @xmath1243 intersecting with @xmath1208 but not containing it .",
    "let @xmath1244 be the first common vertex of @xmath643 in the region @xmath1208 .",
    "since the detours @xmath643 and @xmath1245 are @xmath660-interleaved , by cl .",
    "[ cl : jointdet ] , @xmath1246=d_1[p , y']$ ] and hence @xmath1247 \\subseteq d_1 $ ] .",
    "so by the contradictory assumption , there exists some vertex @xmath1248 \\setminus d_1 $ ] .",
    "let @xmath1249 be the first common vertex of @xmath643 and @xmath1245 .",
    "[ cl : w ] , @xmath1250 . hence , there are two cases to consider .",
    "if the @xmath650 endpoint of @xmath1208 , is @xmath826 , the claim follows by cl .",
    "[ cl : jointdet ] , since @xmath1251=d_{\\ell}[w_1,p_1]$ ] .    otherwise , consider the case where @xmath1252 . by the definition of the region",
    "@xmath1208 , @xmath1253 $ ] . since @xmath826 appears on @xmath1254 not after the common vertex @xmath1255 , it holds that it must appear _ before _",
    "the claim follows by cl .",
    "[ cl : jointdet ] again .",
    "[ obs : all ] @xmath1256 .",
    "assume towards contradiction otherwise and let @xmath1257 be the first detour in the ordering for which @xmath1258 . clearly , @xmath1259 .",
    "let @xmath1260 for @xmath1261 be the first detour that @xmath1257 intersected with when added to @xmath1169 .",
    "hence , @xmath1262",
    "\\subseteq \\kernelgraph(\\mathcal{d}(y'))$ ] . since @xmath1263 , by cl .",
    "[ cl : jointdet ] , @xmath1264=d_{t'}[w_t , y']$ ] .",
    "since @xmath1265 , we end with contradiction the claim holds .    for every replacement path @xmath1266 ,",
    "let @xmath1267 be the unique @xmath99-divergence point of @xmath104 and @xmath284 . recall that since @xmath1268 , such @xmath286 exists .",
    "let @xmath1269 be those paths @xmath104 whose divergence points @xmath286 is an endpoint vertex in the @xmath1211 and let @xmath1270 be the remaining paths , whose divergence point from their detour is strictly inside a region .",
    "we first bound the number of paths in @xmath1271 . since @xmath1272 , by the distinctness of the @xmath99-divergence points established in lemma [ lem : uniquebp ]",
    ", we have the following .    [ obs : boundd1 ] @xmath1273 .",
    "it remains to consider the replacement paths in @xmath1274 .",
    "the goal of constructing the kernel graph @xmath1169 and its decomposition into regions , is the following key lemma .",
    "[ lem : struc_r ] in any region @xmath1219 , there exists at most one @xmath99-divergence point @xmath286 for a unique @xmath1275 .",
    "assume , towards contradiction , that there is a region @xmath1208 with two distinct divergence points @xmath1276 for two @xmath85-paths @xmath1277 , @xmath626 .",
    "let @xmath284 for @xmath626 .",
    "note that it might be the case that @xmath913 .",
    "[ cl : region_useful ] , we get that @xmath1278 .",
    "since @xmath1268 , it holds @xmath1279 for @xmath626 . without loss of generality , assume that @xmath911 appears on @xmath909 ( and @xmath644 ) before @xmath1280 . then by cl .",
    "[ cl : rp_prop1](3.1 ) , it holds that @xmath1281=\\pi(s , x_2 ) \\circ d_2[x_2,c_2]$ ] and since @xmath1282 $ ] we have that @xmath1283 .",
    "let @xmath1284 be the path to which @xmath1285 interferes and let @xmath1286 . by the selection of the interfered path @xmath1287 , the detours @xmath868 and @xmath643 are @xmath660-interleaved ( @xmath1288 ) .",
    "hence @xmath1289 .",
    "let @xmath1290 and by obs .",
    "[ obs : typee](2 ) , @xmath1291 appears on @xmath868 strictly after @xmath1292 , i.e. , @xmath1293 $ ] .",
    "we now distinguish between two cases depending on the location of second failing edge @xmath1294 of @xmath64 . since @xmath1295 , by cl .",
    "[ cl : jointdet ] , @xmath1296=d_2[c_1,y']$ ] . since @xmath1297 $ ] and @xmath1298 are the unique divergence points of @xmath64 and @xmath65 from their detours @xmath643 and @xmath644 respectively",
    ", we get that there are two distinct @xmath915 shortest paths in @xmath1299 , namely , @xmath917 $ ] and @xmath942 $ ] . by the optimality of @xmath64 and @xmath65 ,",
    "these subpaths are of the same length . hence assuming , without loss of generality , that @xmath64 was constructed before @xmath65 by alg .",
    "@xmath86 , we end with contradiction to the selection of @xmath65 ( i.e. , the last new edge of @xmath65 could have been avoided ) .",
    "since @xmath1285 interferes with @xmath1300 , it follows that @xmath1301 and the edge @xmath1302 appears on the suffix @xmath1303 $ ] . see fig .",
    "[ fig : interdyy](b ) for an illustration . recall that @xmath1304 where @xmath1305 appears on @xmath868 before @xmath856 . by obs .",
    "[ obs : typee ] , the failing edge @xmath922 appears in @xmath868 after @xmath1292 . first note that since @xmath643 and @xmath868 are @xmath660-interleaved , it holds that @xmath1306 ( as otherwise , @xmath1307 ) . in addition , since @xmath868 has a non - empty intersection with the region @xmath1208 as @xmath1308 , by cl .",
    "[ cl : region_useful ] , we have that @xmath1309 .",
    "let @xmath1310 be the first common vertex of the detours @xmath643 and @xmath868 .",
    "[ cl : w ] , @xmath1311 .",
    "as @xmath911 is an internal point in the region @xmath1208 , it does not belong to @xmath1176 , so @xmath1312 , and moreover @xmath67 appears on @xmath868 and @xmath643 strictly before the detour divergence point @xmath911 .",
    "note that @xmath1313 $ ] since @xmath1291 occurs on @xmath1314 only after @xmath911 .",
    "hence by the optimality of the replacement path @xmath1315 ( where @xmath1316 ) , we have that @xmath1317=d_3[q_2,w ] \\circ d_3[w , c_1]$ ] , and therefore @xmath1318 on the other hand , since @xmath1319 $ ] is edge disjoint with @xmath27 where @xmath612 is the unique @xmath98-divergence point of @xmath64 from @xmath27 , by the optimality of @xmath64 , we have the following @xmath1320 shortest path in @xmath1321 , namely , @xmath1322 \\circ p[c_1,q_2]$ ] , since @xmath1312 , we have that @xmath1323 which contradicts eq .",
    "( [ eq : ineq111 ] ) .",
    "note that , indeed , by the structure of the new - ending path @xmath1324 , it visits an edge @xmath1325 which is not on its detour , only _",
    "after _ leaving its detour .",
    "the claim follows .    since every region contains exactly one @xmath99-divergence point , by the distinctness of these points(see lemma [ lem : uniquebp ] ) , and by lemma [ cl : nregion ] , we have the following .    [",
    "lem : onebp_inregion ] for every @xmath1160 , @xmath1168 .    by obs .",
    "[ obs : boundd1 ] and cor .",
    "[ lem : onebp_inregion ] we now have :    [ cor : nidonerelate ] @xmath1326 .    by definition ,",
    "the sets @xmath1327 are disjoint and thus @xmath1328 are disjoint as well . by cor .",
    "[ lem : onebp_inregion ] , we have that @xmath1329 .",
    "the corollary holds .    , the segment @xmath1330 $ ] is a region in @xmath1213 .",
    "( b ) illustration for lemma [ lem : struc_r ] .",
    "shown is a region @xmath1331 $ ] with two @xmath99-divergence points @xmath911 and @xmath1280 such that @xmath1332 is in between them .",
    "since @xmath64 @xmath99-interferes with @xmath1333 , it visits @xmath1334 after departing from its detour at the point @xmath911 . using the route from @xmath1335 to @xmath923 provided by @xmath868",
    "is strictly better .",
    "[ fig : interdyy],width=480 ]    [ [ bounding - the - number - of - paths - in - mathcali2_sf - d . ] ] bounding the number of paths in @xmath1155 .",
    "+ + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    we begin by defining for every path @xmath1336 , a special interfered path @xmath1337 such that @xmath1338 and @xmath1339 are fw - interleaved and moreover , @xmath1340 .",
    "the next observation justifies the existence of such a path .",
    "[ obs : interd1 ] for every @xmath1336 , there exists @xmath1341 satisfying that @xmath1338 and @xmath1339",
    "are fw - interleaved such that @xmath1342 .",
    "consider some path @xmath1336 .",
    "for ease of notation , for every @xmath85 new - ending path @xmath160 , let @xmath1343 and @xmath1344 .",
    "we first show that there exists @xmath1345 such that @xmath1346 .",
    "assume towards contradiction that for every @xmath1009 , @xmath1347 . since @xmath795 and @xmath1151 are dependent ( see cl .",
    "[ cl : interd ] ) , by cl .",
    "[ cl : det_nested](b ) , @xmath1348 , hence @xmath59 @xmath98-interferes with every @xmath1345 , leading to contradiction by the fact that @xmath1127 ( i.e. , in such a case , @xmath1010 ) . hence , there exists @xmath160 , for which @xmath1349 . since @xmath1350 , necessarily @xmath1351 , concluding that @xmath1352 .",
    "we now show that also @xmath1353 . by cl .",
    "[ cl : interd ] , we have that @xmath1354 .",
    "so it remains to disqualify the possibility that @xmath1355 .",
    "indeed if @xmath1355 , then combining with the fact that @xmath1352 , we get that @xmath795 is nested in @xmath1151 and since the detours are dependent , we end with contradiction by cl .",
    "[ cl : depen_detdisjoint ] .",
    "so far , we have that @xmath1356 .",
    "note that since @xmath1357 and @xmath1358 , by cor .",
    "[ cl : rev_nomutual ] , @xmath795 and @xmath1151 are neither @xmath662-interleaved nor rev - interleaved . hence , by cl .",
    "[ cl : summ_depend](a ) , it must hold that @xmath795 and @xmath1151 are fw - interleaved .",
    "the claim follows .",
    "let @xmath1359 be the set of detours corresponding to the paths in @xmath1155 .",
    "for every detour @xmath1360 , define the set of detours @xmath1361 as the collection of detours @xmath1151 such that @xmath1362 for some path @xmath1336 whose detour @xmath795 is @xmath131 , i.e. , @xmath1363 by obs .",
    "[ obs : interd1 ] , we have the following .    [ obs : interd2 ] for every @xmath1360 and every @xmath1364 , it holds that @xmath360 and @xmath131 are dependent and fw - interleaved such that @xmath1365 .    to bound the number of paths in @xmath1155",
    ", we define a prefix @xmath1366 $ ] for every detour @xmath1360 and show that every such prefix contains at most one @xmath99-divergence point of some path in @xmath1155 . in this sense ,",
    "the prefix is the analogue of the region , used in the analysis of the paths in @xmath1152 .    for every detour @xmath1360 ,",
    "define the unique point @xmath1367 in the following manner .",
    "let @xmath1368 be the collection of first common vertices of the detours @xmath131 and @xmath1364 , i.e. , @xmath1369 .",
    "note that by obs .",
    "[ obs : interd2 ] , @xmath131 and @xmath360 are dependent and fw - interleaved , hence by cl .",
    "[ cl : summ_depend ] , @xmath1370 .",
    "then , let @xmath1371 be the point whose distance from @xmath1372 on @xmath131 is _ minimal_. in other words , @xmath1373 is the earliest first common vertex of the detour @xmath131 with any of the detours in @xmath1361 .",
    "[ fig : interd](a ) for a schematic illustration .",
    "our next goal is to show that every @xmath99-divergence point @xmath602 must occur on the prefix @xmath1374 $ ] and in addition , for each @xmath1360 , there exists at most one path @xmath1336 whose divergence point @xmath602 is in @xmath1375 .",
    "this implies the stronger conclusion that @xmath1376 for every @xmath1377 and hence @xmath1378 .",
    "the next lemma is crucial for analyzing the set @xmath1155 .",
    "[ lem : disjoint_inter ] let @xmath1379 be such that @xmath1380 .",
    "let @xmath1381 and @xmath1382 . hence @xmath1383 . if @xmath1384 , then @xmath1385 .",
    "let @xmath627 and @xmath628 for @xmath1386 , @xmath1387 and assume without loss of generality that @xmath650 appears on @xmath1388 strictly before @xmath651 .",
    "note that by obs .",
    "[ obs : interd2 ] , @xmath1388 is fw - interleaved with both @xmath643 and @xmath644 .",
    "hence , @xmath1389 and also @xmath1390 .",
    "assume towards contradiction that there exists a common vertex @xmath1391 .",
    "we check two cases .",
    "+ case ( a ) : @xmath1392 . by cl .",
    "[ cl : jointdet ] , @xmath1393=d_2[x_2,\\ell]$ ] . by definition",
    ", the common vertex @xmath1394 appears not before @xmath650 on @xmath643 , hence @xmath1395=d_2[x_2,\\ell]$ ] , contradicting the fact that @xmath651 is the first common vertex of @xmath1388 and @xmath644 .",
    "+ case ( b ) @xmath706 . in this case , we show that the detours @xmath643 and @xmath644 are independent , i.e. , @xmath675 , which implies the claim .",
    "[ fig : interd](b ) for an illustration .",
    "assume towards contradiction that @xmath1396 .",
    "assume first that @xmath709 . by obs .",
    "[ obs : interd2 ] , @xmath1388 and @xmath643 are dependent and @xmath1397 .",
    "hence , by cl .",
    "[ cl : det_nested](b ) , @xmath1398 . on the other hand , since by the contradictory assumption @xmath643 and @xmath644 are dependent , by cl .",
    "[ cl : det_nested](a ) , @xmath1399 .",
    "overall , we have that @xmath1400 . finally , by obs .",
    "[ obs : interd2 ] , @xmath1388 and @xmath644 are interleaved such that @xmath1401 , leading to contradiction as @xmath1402 .",
    "the case where @xmath1403 is analogous . the claim follows .",
    "[ lem : wherep ] for every @xmath1404 : + ( 1 ) the unique @xmath99-divergence point @xmath1405 with @xmath1406 is in @xmath1407 $ ] where @xmath1408 and ( 2 ) @xmath1409 $ ] .    begin with ( 1 ) and assume towards contradiction otherwise .",
    "consider @xmath1410 such that @xmath1411 and @xmath1412 $ ] , let @xmath1413 , @xmath1414 .",
    "we first claim that @xmath1415 . to see this observe that since @xmath1416 , by cl .",
    "[ cl : rp_prop1](3.1 ) , @xmath1417=\\pi(s , x_0)\\circ d_0[x_0 , c]$ ] . since ( by the contradictory assumption )",
    "@xmath97 appears on @xmath1388 strictly after @xmath1418 , it holds that @xmath1419 $ ] and hence @xmath1415 .",
    "we next distinguish between two cases depending on the value of @xmath1420 . in this case , @xmath1420 is selected as the vertex @xmath1418 that defines the prefix @xmath1407 $ ] . by obs .",
    "[ obs : typee ] , @xmath1421 , and hence @xmath1422 appears on @xmath643 _ after _ the first common vertex @xmath1418 .",
    "in addition , @xmath1291 appears on @xmath643 before @xmath1422 and since @xmath1423 ( by the definition of interference ) , it holds that @xmath1291 appears on @xmath643 _ before _ the common vertex @xmath1418 .",
    "let @xmath1424 .",
    "we then have that @xmath1425 and hence by cl .",
    "[ cl : jointdet ] , @xmath1426=d_1[w(d_0),q_2]$ ] .",
    "since @xmath97 appears on @xmath1388 after @xmath1418 but before the failing edge @xmath1422 , we get that @xmath1427=d_1[w(d_0),q_2]$ ] .",
    "let @xmath1428 .",
    "we now consider the path @xmath1429",
    "\\circ d_1[w(d_0),c]$ ] .",
    "we claim that @xmath993 is an @xmath1430 shortest - path in @xmath1431 , since ( 1 ) clearly , @xmath1432",
    "\\in sp(s , v , g \\setminus \\{f_1(p_1)\\})$ ] and ( 2 ) @xmath1422 occurs on @xmath643 only after the @xmath99-divergence point @xmath97 , so @xmath1433 $ ] , and hence @xmath1432 \\in sp(s , v , g \\setminus f(p_0))$ ] .    since the path @xmath1432 $ ] visits @xmath1418 , we have that @xmath1434 we now use the path @xmath1435 to present a @xmath1436 path in @xmath1437 that goes through @xmath97 . recall that @xmath1415 .",
    "note that by cl .",
    "[ cl : rp_prop1](3.1 ) , since the interfered edge @xmath1291 is not on @xmath1438 ( by the definition of interference ) , it holds that @xmath1435 visits this edge only after leaving its detour @xmath1388 , i.e. , after visiting the @xmath99-divergence point @xmath97 .",
    "hence , the route in @xmath1435 from @xmath1418 to @xmath1439 is given by @xmath1440 \\circ p_0[c , a_1]$ ] .",
    "note that since @xmath97 appears on @xmath1435 after the @xmath98-divergence point @xmath1441 , indeed the subpath @xmath1442 $ ] does not contain the edge @xmath1443 , implying that @xmath1444|={\\mbox{\\rm dist}}(w(d_0),a_1 , g \\setminus \\left(f(p_0 ) \\cup \\{f_1(p_1)\\ } \\right))$ ] . since @xmath1442 $ ] visits @xmath97 , we have that @xmath1445 contradiction by eq .",
    "( [ eq : ineq1 ] ) . see fig .",
    "[ fig : interd](c ) for an illustration .",
    "let @xmath1446 be the detour satisfying that @xmath1447 , i.e. , its first common vertex with @xmath1388 appears earlier than all other detours @xmath1364 .",
    "hence , there exists a path @xmath1448 such that @xmath1449 and @xmath1450 where @xmath1451 .",
    "consider now the @xmath1452 path",
    "@xmath1453 \\circ \\pi(y(d^*),v)$ ] .",
    "we have that @xmath1454 .",
    "we now show that @xmath1455 . by obs .",
    "[ obs : interd2 ] , @xmath1456 and hence @xmath1457 .",
    "clearly , also @xmath1458 , hence @xmath1459 .",
    "in addition , since @xmath1460 and @xmath1421 , by cl .",
    "[ lem : disjoint_inter ] , @xmath1461 , and hence @xmath1462 . clearly , @xmath1463 , hence @xmath1464 .",
    "overall , we have that @xmath993 is a @xmath1452 shortest - path in @xmath1465",
    ".    we now use @xmath1435 to present an alternative @xmath1452 shortest - path in @xmath184 , namely , @xmath1466 $ ] .",
    "since @xmath1435 visits @xmath1418 only after leaving the shortest - path @xmath27 , it holds that @xmath1467 $ ] , hence @xmath1466",
    "\\in sp(w(d_0),v , g')$ ] as well . by the optimality of @xmath1466",
    "$ ] and @xmath993 , we get that there are of the same lengths , leading to contradiction in the selection of @xmath1435 by alg . @xmath86",
    "( i.e. , the path @xmath1468",
    "\\circ q$ ] is optimal in length and it is not new - ending , so the new - edge of @xmath1435 could have been avoided ) .",
    "now , consider part ( 2 ) .",
    "since @xmath1421 , it holds that @xmath1422 occurs on @xmath1388 after @xmath1420 .",
    "since @xmath1418 is the earliest intersection point with some @xmath1469 , the claim holds .    .",
    "the prefix @xmath1407 $ ] is determined by the earliest first common vertex with the detours of @xmath1470 . in this case , @xmath1471 since @xmath1472 appears on @xmath1388 strictly after it .",
    "( b ) illustration for lemma [ lem : disjoint_inter ] .",
    "the detours @xmath1388 and @xmath643 are interleaving and also @xmath1388 and @xmath644 are interleaving . the assumption that @xmath643 and @xmath644 are dependent , implies contradicting positions for the location of @xmath563 .",
    "since @xmath1397 and @xmath1388 and @xmath643 are dependent , we have that @xmath1473 . on the other hand , @xmath709 and @xmath643 and @xmath644",
    "are dependent , we have that @xmath1474 , leading to contradiction since @xmath1475 .",
    "( c ) illustration for lemma [ lem : wherep ] .",
    "shown is a replacement path @xmath1476 where @xmath1477 and hence @xmath1478 .",
    "the path @xmath59 @xmath99-interferes with a path @xmath1479 , hence @xmath59 visits the edge @xmath1480 after diverging from its detour at the point @xmath97 . since @xmath1481 $ ] , a strictly better route from @xmath67 to @xmath922 exists using the subpath provided by the detour @xmath643 .",
    "[ fig : interd],width=480 ]    [ lem : counti2 ] @xmath1482  .",
    "we show that @xmath1483 for every @xmath1377 .",
    "assume towards contradiction that there exists at least two paths @xmath1484 such that @xmath1485 .",
    "since @xmath1486 , their unique @xmath99-divergence points @xmath1487 and @xmath1488 respectively , appear on the common detour @xmath131 .",
    "in particular , by lemma [ lem : wherep ] , it holds that @xmath1489 $ ] . by the distinctness of the @xmath99 divergence points of lemma [ lem : uniquebp ] , @xmath1490 , so without loss of generality , assume that @xmath97 occurs on @xmath131 before @xmath1491 .",
    "we now show that the failing edges @xmath1492 and @xmath1493 do not occur on both of the paths @xmath59 and @xmath160 .",
    "first , note that since @xmath1494 , their @xmath98-divergence point is @xmath1495 , and thus @xmath1496 . we now show that also @xmath1497 . by lemma [ lem : wherep ] ,",
    "@xmath1498 $ ] hence it also holds that @xmath1499 $ ] .",
    "finally , since @xmath1499 $ ] and @xmath1500 $ ] and @xmath1501 $ ] are disjoint with the detour @xmath131 , the claim holds .",
    "so , we have two distinct @xmath1502 paths in @xmath1503 , namely , @xmath1500 $ ] and @xmath1504 $ ] , leading to contradiction to the selection of the latter paths by algorithm @xmath86 .",
    "the claim holds .",
    "[ cor : ninterb ] ( 1 ) @xmath1140 and ( 2 ) @xmath1505 .",
    "part ( 1 ) follows immediately by obs .",
    "[ obs : boundd1 ] and lemma [ lem : onebp_inregion ] . to prove part",
    "( 2 ) , select a subset @xmath1506 of @xmath1507 new - ending paths , such that for every pair of paths @xmath1508 , @xmath1483 and hence also @xmath1509 .",
    "that is for every detour @xmath1510 we take one path representor @xmath730 satisfying that @xmath1511 .",
    "note that @xmath1506 is not necessarily related to the set of interfering paths @xmath1022 . by lemma [ lem : bound_no_touch ]",
    ", it holds that @xmath1512 , hence combining with by part ( 1 ) , @xmath1505 .",
    "part ( 2 ) follows .",
    "let @xmath990 denote the set of indpendent new - ending paths where @xmath1513 and let @xmath1514 denote their number . in this subsection , we bound @xmath1515 by @xmath92 .",
    "recall that for every @xmath85 new - ending path @xmath1268 , @xmath108 is its @xmath98-divergence point and @xmath286 is its @xmath99-divergence point and by cl .",
    "[ cl : rp_prop1 ] , these divergence points are unique ( i.e. , @xmath104 does not return to @xmath27 after @xmath108 , and does not return to @xmath229 after @xmath286 ) .",
    "we begin by showing that the suffix of every independent path @xmath104 starting from its @xmath99-divergence point @xmath286 ( i.e. , @xmath970\\setminus \\{v\\}$ ] ) is disjoint from the suffix @xmath989 of any other @xmath1516 .",
    "[ obs : dist_indep ] for every two paths @xmath1517 , @xmath291\\setminus \\{v\\}$ ] and @xmath292\\setminus \\{v\\}$ ] are vertex disjoint .    without loss of generality ,",
    "assume the @xmath104 was constructed by alg .",
    "@xmath86 before @xmath139 .",
    "since @xmath1518 $ ] for @xmath137 , by the uniqueness of the @xmath98-divergence point it holds that @xmath1519 is edge disjoint with @xmath27 for .",
    "hence , @xmath981 and @xmath980 .",
    "we now consider the second faults . by the definition of @xmath990",
    ", it holds that @xmath1520 .",
    "hence , by the uniqueness of the @xmath99-divergence points @xmath286 and @xmath984 , it holds that also @xmath985 and similarly @xmath986 .",
    "assume , towards contradiction , that there exists a common vertex @xmath1085 in the intersection of the suffixes @xmath971 and @xmath989 . by the above",
    ", we get that there are two distinct @xmath115 paths in @xmath1086 , namely , @xmath974",
    "\\neq p'_j[w , v]$ ] , leading to contradiction by the selection of @xmath139 by algorithm @xmath86 ( i.e. , the last edge of @xmath139 could have been avoided ) .    [ cl : allpoint_ondetour ] for every two independent paths @xmath1521 with @xmath1522 , and @xmath1523 , if @xmath1524 then @xmath1525 where @xmath1523 .",
    "let @xmath1526 be the last common vertex of @xmath643 and @xmath644 ( since @xmath643 and @xmath644 are @xmath658-interleaved , such @xmath67 exists ) .",
    "hence , by cl .",
    "[ cl : jointdet ] , @xmath1527=d_2[x_2,w]$ ] .",
    "assume towards contradiction that @xmath1528 $ ] .",
    "since @xmath1324 , by cl .",
    "[ cl : rp_prop1](3.1 ) , it holds that @xmath1529=\\pi(s , x_1 ) \\circ d_1[x_1,c_1]$ ] , concluding that @xmath1291 must fall in the @xmath643-excluded region @xmath737 $ ] , leading to contradiction by cl .",
    "[ cl : depen_detbad ] . the claim follows .",
    "equipped with cl .",
    "[ cl : allpoint_ondetour ] , we now induce a @xmath1530-ordering on the independent paths @xmath990 , which can be viewed as based on treating @xmath108 and @xmath286 lexicographically . recall that for two vertices @xmath1531 , we denote @xmath1532 if @xmath1533 . for @xmath1534 , we say that @xmath1535 if @xmath1536 . for @xmath1537",
    ", we use the second coordinate @xmath286 to break the tie .",
    "let @xmath1538 be the detour with the lower @xmath660-value among the two ( i.e. , closer to @xmath21 on @xmath27 ) .",
    "note that by cl .",
    "[ cl : allpoint_ondetour ] , both @xmath1539 .",
    "in addition , by lemma [ lem : uniquebp ] , @xmath295 .",
    "this allows us to define , in this case , that @xmath1540 iff @xmath1541 .",
    "we now order the independent paths in increasing @xmath1530 order of their values .",
    "let @xmath1542 where @xmath1543 .",
    "our next goal is to show that the lengths of the paths in the ordered set @xmath1544 is strictly monotone decreasing , i.e. , @xmath1545 . towards this",
    ", we establish the next important lemma .",
    "[ cl : nofailedg ] let @xmath1546 such that @xmath104 does not interfere with @xmath139 and @xmath1547 .",
    "then , @xmath1548 .",
    "let @xmath1549 , @xmath1550 , @xmath311 for @xmath137 .",
    "note that since @xmath1551 , it holds that @xmath1552 ( where @xmath1553 ) for @xmath137 .",
    "since @xmath104 is a new - ending replacement path , it diverges from @xmath27 above @xmath138 and hence also above @xmath141 .",
    "therefore , @xmath313 .",
    "so it remains to consider @xmath77 .",
    "assume towards contradiction that @xmath1554 .",
    "since @xmath104 does not interfere with @xmath139 , it holds that @xmath1555 ( i.e. , @xmath80 and @xmath142 are dependent ) .",
    "in particular , since @xmath1268 , by cl .",
    "[ cl : rp_prop1](3.1 ) , it holds that @xmath1556 $ ] .",
    "hence , @xmath77 appears on @xmath80 strictly above @xmath425 . note that since @xmath80 and @xmath142 are dependent and @xmath1557 , by cl .",
    "[ cl : det_nested](a ) , we have that @xmath1558 .",
    "so far , we have the following : @xmath76 is above @xmath141 on @xmath27 and @xmath77 is above @xmath425 on @xmath80 .",
    "we first claim that in a such a case @xmath80 and @xmath142 are neither rev - interleaved nor @xmath662-interleaved .",
    "we prove this by contradiction .",
    "let @xmath67 be the first point on @xmath80 that is common with @xmath142 .",
    "since @xmath1555 , it holds that @xmath1559 $ ] .",
    "since @xmath425 appears after @xmath77 on @xmath80 , it also holds that @xmath1560 $ ] .",
    "but if @xmath80 and @xmath142 are rev - interleaved or @xmath662-interleaved , @xmath1561 $ ] is part of the @xmath80-excluded region , leading to contradiction by cl .",
    "[ cl : depen_detbad ] .",
    "we next claim that @xmath1016 . to see this , assume towards contradiction otherwise .",
    "first , observe that in such a case , @xmath80 and @xmath142 are also not @xmath660-interleaved ( as otherwise @xmath1562=d_j[w , y_j]$ ] and since @xmath1563 $ ] , it holds that also @xmath1016 ) .",
    "hence by cl .",
    "[ cl : summ_depend](a ) , @xmath80 and @xmath142 must be fw - interleaved . since @xmath1564 , we end with contradiction by cl .",
    "[ cl : depen_detbad ] .",
    "hence , we have that both second failing edges are common to the two detours , i.e. , @xmath1565 . let @xmath1566 be the @xmath23 replacement path concerning the pair @xmath141 and @xmath1016 .",
    "note that @xmath993 is not necessarily a new - ending path .",
    "we have the following .    [ cl : eithercl ] @xmath1567 .",
    "assume towards contradiction that @xmath1568 .",
    "since @xmath139 is a new - ending path , it diverges from @xmath142 before the failing edge @xmath77 and hence also above the failing edge @xmath425 , concluding that @xmath1569 . combining with the contradictory assumption",
    ", it holds that @xmath1570 . by the optimality of @xmath993 and @xmath139 , @xmath1571 . by the ordering of alg .",
    "@xmath86 , @xmath993 was selected _ before _",
    "@xmath139 , since @xmath425 is strictly below @xmath77 .",
    "hence , we end with contradiction to the construction of @xmath139 by alg .",
    "algorithm @xmath86 , as the new edge @xmath120 could have been avoided .",
    "we therefore have that the failing edge @xmath539 is common with both of the replacement paths @xmath993 and @xmath104 , i.e. , @xmath1572 .",
    "we proceed by showing that this implies the existence of two @xmath322 shortest paths in @xmath1573 , @xmath324 $ ] and @xmath1574 $ ] .",
    "to prove this , it remains to show that @xmath327 ( we have already shown that @xmath313 ) . by claim [ cl : unique_nnew ] , the replacement path @xmath993 has a unique divergence point @xmath29 from @xmath27 . since @xmath856 is an endpoint of an edge on the detour @xmath142 , it implies that @xmath856 appears on @xmath993 strictly after it diverges from @xmath27 .",
    "let @xmath525 be the first point on @xmath1575 $ ] that is common with @xmath27 . by the uniqueness of the divergence point @xmath29 ,",
    "the point @xmath525 is not a divergence point , and hence @xmath1576=\\pi(b',v)$ ] .",
    "hence , assuming that @xmath1577 it holds that @xmath1578 $ ] , but as @xmath141 is below @xmath76 on @xmath27 , we get that @xmath1579 , contradiction to the fact that @xmath1580 .",
    "hence , by the optimality of these subpaths , @xmath332 .",
    "finally , note that by the ordering of the construction of alg .",
    "@xmath86 , the pair edge @xmath1581 was considered before @xmath1582 , as @xmath141 is below @xmath76 .",
    "hence , @xmath104 was constructed after @xmath993 .",
    "contradiction to the selection of @xmath139 by alg .",
    "@xmath86 ( as its last new edge could have been avoided ) .",
    "the lemma follows .",
    "we then have the following .    [",
    "lem : ordering ] @xmath1583 ( or alternatively , if @xmath1535 then @xmath307 ) .",
    "assume towards contradiction that there exist two paths @xmath1584 such that @xmath1585 and @xmath1586 .",
    "first , consider the case where @xmath1537 .",
    "let @xmath284 and @xmath1587 .",
    "let @xmath1588 be the detour whose @xmath660-value is deeper on @xmath27 .",
    "[ cl : allpoint_ondetour ] , @xmath1539 .",
    "in addition , by the ordering , @xmath286 appears on @xmath135 _ before _",
    "we now claim that @xmath1548 . by the uniqueness of the @xmath98-divergence point @xmath1589",
    ", it holds that @xmath215 ( that appears below @xmath400 on @xmath27 ) is not in @xmath104 .",
    "next , assume towards contradiction that @xmath1590 .",
    "since @xmath104 does not interfere with @xmath139 , it holds that @xmath1591 .",
    "let @xmath1592 .",
    "[ cl : jointdet ] , @xmath1593=d_j[x_j , q_2]$ ] .",
    "since @xmath286 appears on @xmath135 above @xmath984 , it holds that it is also above @xmath982 , leading to contradiction as @xmath289 $ ] is edge disjoint with @xmath80 .",
    "hence , we have that @xmath1594 . finally , since we assume that @xmath333 , we end with contradiction to the selection of @xmath139 by alg .",
    "@xmath86 , which selects the replacement path whose @xmath99-divergence point from @xmath142 is as closest to @xmath249 as possible ( and @xmath286 is strictly closer ) .    next ,",
    "consider the complementary case where @xmath1547 .",
    "[ cl : nofailedg ] , @xmath1595 are not on @xmath104 .",
    "since @xmath1586 , we end with contradiction to the construction of @xmath139 since alg .",
    "@xmath86 selects the replacement path whose @xmath98-divergence point from @xmath27 is as closest to @xmath4 as possible .",
    "the lemma holds .    towards bounding the number of independent paths ,",
    "we classify them into @xmath1596 classes @xmath1597 for some parameter @xmath1596 to be revealed later .",
    "these classes cover all the independent paths @xmath990 . in each @xmath1598 class",
    ", there is a special path representor @xmath1599 , that guaranteed to be sufficiently long .",
    "we now describe the path classification in details .",
    "initially , set @xmath1600 , the @xmath1530 ordered set @xmath990 . at step @xmath1601 ,",
    "we are given a @xmath1530 ordered set @xmath1602 consisting of the remaining independent paths that have not been yet assigned to any of the classes .",
    "let @xmath1603 be the first path in this increasing @xmath1530 ordering @xmath1602 .",
    "the class @xmath1604 consists of the representor @xmath1603 and the paths @xmath59 in @xmath1605 that satisfy at least one of the two conditions :    [ desc : indep ]    ( o1 ) @xmath1606 .",
    "( o2 ) @xmath795 and @xmath1607 are @xmath658-interleaved .",
    "i.e. , if @xmath59 satisfies ( o1 ) , ( o2 ) or both , it is added to the class @xmath1604 .",
    "this process continues , until all independent paths are assigned to some class .",
    "let @xmath1596 be the last time step of the classification process , where @xmath1608 .",
    "for every @xmath1609 , let @xmath1610 be the number of paths in the @xmath1611 class .",
    "we now establish several useful properties about these classes and then use it to bound the total cardinality of the independent set @xmath990 .",
    "[ cl : oder ] for every @xmath516 and for every @xmath1612 , it holds that @xmath1613 for every @xmath1614 .",
    "note that @xmath1615 . since @xmath1603 is the first path in the @xmath1530 ordered set @xmath1602 , the claim holds by lemma [ lem : ordering ] . for every @xmath1616 , we next define two subsets of vertices @xmath1617 and @xmath1618 appearing on the paths of the class @xmath1619 .",
    "the first set @xmath1617 consists of the suffixes @xmath1620\\setminus \\{v\\}$ ] for every @xmath1621 .",
    "the second set @xmath1618 consists of the suffix of the representor @xmath1622 $ ] where @xmath108 is its @xmath98-divergence point .",
    "formally , let @xmath1623\\setminus \\{v\\ } ~\\mid~ p_k \\in \\mathcal{p}_i \\setminus \\{p^*_i\\}\\ } \\mbox{~and~ } v_2(i)=p^*_i[b_i , v ] \\setminus \\{v\\}.\\ ] ] our goal is to show that the union of these sets , namely , @xmath1624 for @xmath1625 , is sufficiently large .",
    "we first consider the sets @xmath1617 .",
    "[ cl : v1i ] for every @xmath1626 : + ( a ) @xmath1627 for every @xmath1628 and + ( b ) @xmath1629 .    part ( a ) follows immediately by obs .",
    "[ obs : dist_indep ] .",
    "consider part ( b ) .",
    "we classify the @xmath1630 paths in @xmath1619 into two sets depending on the condition they satisfy when joining the class .",
    "let @xmath1631 be the set of paths in @xmath1619 that satisfy ( o1 ) and let @xmath1632 be the complementary set of paths .",
    "first , assume that the majority of the @xmath1630 paths belongs to the first class @xmath1631 ( i.e. , satisfy condition ( o1 ) ) .",
    "hence , @xmath1633 .",
    "note that the @xmath99-divergence point of each path in this class appears on @xmath1634 . by the uniqueness of the @xmath99-divergence point ( see lemma [ cl : rp_prop1 ] ) , the paths in @xmath1635 can be ordered in increasing distance from @xmath507 .",
    "hence , @xmath1636\\setminus",
    "\\{v\\}| \\geq j-1 $ ] for every @xmath1637 . by applying obs .",
    "[ obs : dist_indep ] again , we get that @xmath1638\\setminus\\{v\\}|=\\sum_{j=1}^k |p_j[c_j , v]\\setminus \\{v\\}| \\geq ( k-1)^2/2 $ ] . since @xmath1639 , the claim holds .    next ,",
    "consider the complementary case , where the majority of the paths in this class are in @xmath1632 , hence they all satisfied the condition ( o2 ) . note that for every @xmath1640 , it holds that @xmath795 and @xmath1151 are @xmath658-interleaved ( since they are @xmath658-interleaved with @xmath1641 ) .",
    "let @xmath1642 be the detour of some path @xmath160 in the set @xmath1632 whose @xmath660-value is the deepest on @xmath27 .",
    "since for every @xmath1643 , it holds that @xmath795 and @xmath1642 are @xmath658-interleaved , by cl .",
    "[ cl : allpoint_ondetour ] , it holds that the @xmath99-divergence point @xmath602 appears on @xmath1642 for every @xmath1643 . by applying the uniqueness of the @xmath99-divergence point ( cl . [ cl : rp_prop1 ] ) and the disjointness of the segments @xmath1644\\setminus \\{v\\}$ ] ( obs .",
    "[ obs : dist_indep ] ) , the argument follows the exact same line as for the @xmath1631 class .",
    "part ( b ) holds .",
    "we proceed by analyzing the sets @xmath1618 .",
    "[ cl : boundvi2 ] @xmath1645 .",
    "recall that @xmath1646 .",
    "since @xmath1599 was the first path in the increasing @xmath1530-ordering of @xmath1647 , it holds that @xmath1648 for every @xmath1649 .",
    "since every path @xmath1650 is not in @xmath211 , we have that @xmath1651=\\pi(s , b(p)]$ ] and hence letting @xmath1652 , we get that @xmath1653=p[s , b^*]$ ] for every @xmath1650 .    by lemma [ lem :",
    "ordering ] , it holds that the paths of the @xmath1530 ordered set @xmath1647 correspond to a strictly monotone increasing in lengths sequence @xmath1654 of @xmath1655 paths such that @xmath1656 .",
    "since all these paths share the prefix @xmath1653 $ ] , it also holds that @xmath1657 where @xmath1658 $ ] for every @xmath1659 . concluding that @xmath1660 \\setminus \\{v\\}|=|p'_1|-1\\geq l'-2 $ ] .",
    "the claim follows .",
    "the next claim is useful for bounding the cardinality of the @xmath1618 sets .",
    "[ cl : piindep_det ] let @xmath1661 such that @xmath1662 .",
    "let @xmath1663 , @xmath1664 and @xmath1665 for @xmath1666 , then @xmath1667=\\emptyset$ ] .",
    "assume towards contradiction that there exists a vertex @xmath1668 $ ] .",
    "let @xmath1669 and @xmath1014 for @xmath1666 . since @xmath1670 , @xmath1671 for @xmath1666 .",
    "we first claim that @xmath1672 .",
    "since @xmath1673 does not satisfy condition ( o2 ) for the class @xmath1674 , it holds that @xmath643 and @xmath644 are not @xmath658-interleaved , i.e , @xmath1675 . combining this with the fact that @xmath1676 precedes @xmath1677 in the increasing @xmath1530 ordering",
    ", we get that @xmath724 . in the same manner",
    ", we also have that @xmath1678 .",
    "we next claim that @xmath1679 .",
    "consider first @xmath642 and @xmath1680 .",
    "there are two alternative cases .",
    "case ( a ) : @xmath1681 . then @xmath644 is nested in @xmath643 , since these detours are dependent",
    ", we end with contradiction to cl .",
    "[ cl : depen_detdisjoint ] . + case ( b ) : @xmath1682 .",
    "since @xmath1683\\cap d_2[x_2,c_2]$ ] , it holds that @xmath1684=d_1[w , y_1]$ ] , where the last equality holds by cl .",
    "[ cl : jointdet ] .",
    "we therefore have that @xmath1677 satisfies condition ( o1 ) for the class @xmath1674 .",
    "leading to contradiction to the selection of @xmath1677 by the classification procedure .",
    "hence , we conclude that @xmath1685 . by applying the same argument for @xmath1677 and @xmath1686 , it also holds that @xmath1687 .    since @xmath625 are dependent and interleaved such that @xmath1685 , by cl .",
    "[ cl : det_nested](b ) , @xmath1688 .",
    "i.e. , @xmath741 appears below @xmath642 on @xmath27 . in the same manner , since @xmath644 and @xmath868 are dependent and interleaved such that @xmath1678 , by cl .",
    "[ cl : det_nested](a ) , @xmath1689 , i.e. , @xmath741 appears above @xmath1690 on @xmath27 .",
    "we now claim that @xmath1691 and hence establishing the claim as @xmath1692 . to see why @xmath1691 , assume towards contradiction that @xmath1693 , then @xmath643 and @xmath868 are non - nested and by cl .",
    "[ cl : disjindep ] , they are independent , in contradiction to the existence of @xmath67 in the intersection . the claim holds .",
    "we are now ready to bound the number of independent paths .",
    "[ cor : sum ] ( a ) @xmath1694 .",
    "+ ( b ) @xmath1695 .",
    "consider ( a ) .",
    "our strategy is follows .",
    "we consider some vertex @xmath1696 and bound the number of sets @xmath1697 , @xmath1626 in which it appears .",
    "let @xmath1698 and @xmath1699 be the set of indices corresponding to the @xmath1697 sets in which @xmath69 appears ( respectively ) .",
    "first observe that by the disjointness of the @xmath1700 sets ( established in cl .",
    "[ cl : v1i](a ) ) , it holds that @xmath69 can appear in at most one set @xmath1700 , hence @xmath1701 .",
    "we next claim that @xmath69 can appear in at most two additional sets @xmath1702 for some @xmath1703 .",
    "i.e. , @xmath1704 . to see this ,",
    "assume towards contradiction that @xmath69 appears in three sets @xmath1705 .",
    "without loss of generality , assume that @xmath1662 .",
    "let @xmath1706 , @xmath1707 and @xmath1708 for @xmath1709 . since @xmath1710 $ ] , by the disjointness of the suffixes @xmath1711 $ ] ( see obs .",
    "[ obs : dist_indep ] ) , it holds that @xmath69 must appear in the detour segment of these paths , namely , that @xmath1712=\\bigcap_{k=1}^3   d_k[b_k , c_k]$ ] , where the last equality holds by cl .",
    "[ cl : rp_prop1](3.1 ) , leading to contradiction by cl .",
    "[ cl : piindep_det ] .",
    "we therefore have the following .",
    "@xmath1713 part ( a ) follows by combining this with cl .",
    "[ cl : v1i](b ) and cl .",
    "[ cl : boundvi2 ] .",
    "finally , since @xmath1714 , by using lagrange multiplier , we get that @xmath1715 as required .      in this section",
    ", we bound the number of interfering paths of type @xmath98 .",
    "recall that @xmath1716 let @xmath1717 be such that @xmath64 @xmath98-interferes with @xmath65 .",
    "let @xmath1718 and let @xmath1719 ( resp . ,",
    "@xmath654 ) be the first and last point of the detour @xmath1720 ( resp . , @xmath1721 ) .",
    "to bound the number of @xmath98-interfering paths , we show that an interference of type @xmath98 induces a strict detour configuration which implies that two paths @xmath1722 that are @xmath98-interfered by a third path @xmath1333 , are _ independent_.",
    "this key observation enables us to treat this class as a nearly independent set of paths .",
    "in particular , equipped with this observation , only minor modifications are required to employ the quantitative analysis of sec .",
    "[ sec : indeppaths ] to the setting of @xmath98-interference .",
    "[ obs : char_intera ] if @xmath64 @xmath98-interferes with @xmath65 , then : ( a ) @xmath1723 and + ( b ) @xmath1724 .",
    "hence , in particular @xmath1725 .",
    "consider ( a ) . by the definition , @xmath1726 and",
    "@xmath743 hence we conclude that @xmath1723 .",
    "the claim holds .",
    "we now turn to consider part ( b ) .",
    "assume towards contradiction that @xmath1727 .",
    "let @xmath1728 .",
    "we distinguish between two cases .",
    "there are two @xmath759 paths in @xmath712 , namely , @xmath1729\\circ p_1[c_1,q_2]$ ] and @xmath1730 $ ] . by the optimality of @xmath700",
    ", it holds that @xmath1731 . since @xmath1727",
    ", it also holds that @xmath762 .",
    "in addition , by the optimality of @xmath701 , it holds that @xmath1732 .",
    "by part ( a ) , @xmath1723 and hence @xmath1733 .",
    "since @xmath643 and @xmath644 are independent , we also have that @xmath1734 .",
    "hence , overall we have that @xmath1735 , concluding that @xmath681 .",
    "this case is further divided into two subcases .",
    "+ case ( 1.1 ) : @xmath706 .",
    "if @xmath709 ( resp . , @xmath1725 ) , then we end with contradiction to the selection of @xmath1736 ( resp . ,",
    "@xmath1737 ) by alg .",
    "@xmath86 , since there exists an alternative shortest - path whose @xmath98-divergence point from @xmath27 is strictly closer to @xmath4 .",
    "+ case ( 1.2 ) : @xmath1392 .",
    "note that since @xmath1324 , it holds that @xmath1738 and specifically , @xmath911 is strictly inside @xmath643 .",
    "since @xmath681 , we end with contradiction to the selection of @xmath64 by alg .",
    "@xmath86 , since there exists an alternative shortest - path , namely , @xmath1739 $ ] whose @xmath99-divergence point from @xmath643 is @xmath641 , i.e. , strictly above @xmath911 on @xmath643 .",
    "case ( 2.1 ) : @xmath1392 .",
    "let @xmath67 be the last common vertex of @xmath643 and @xmath644 .",
    "since @xmath1740 , so @xmath1741 $ ] , leading to contradiction by cl .",
    "[ cl : depen_detbad ] . case ( 2.2 ) : @xmath709 .",
    "then , since @xmath1742 by part ( a ) , @xmath644 is nested in @xmath643 , leading to contradiction by cl .",
    "[ cl : depen_detdisjoint ] . case ( 2.3 ) : @xmath1403 . by claim cl .",
    "[ cl : det_nested](a ) , we have that @xmath919 , contradiction to the fact that @xmath1727 . the claim follows .    by obs .",
    "[ obs : dist_indep ] , we have the following .    [ obs : inter_explain ] if @xmath970 $ ] and @xmath1743 $ ] intersect , then @xmath104 interferes with @xmath139 or vice - versa , namely either @xmath1744 or @xmath1745 .",
    "recall that we consider only @xmath144-replacement paths for which @xmath1746 and hence @xmath1747 .",
    "we now provide the key lemma which enables us to bound from above the set of @xmath98-interfering path .",
    "it states that the suffix @xmath1748 $ ] of two paths @xmath1749 and @xmath1750 that are @xmath98-interfered by the same path @xmath1751 , are _ disjoint_.    [ lem : disjoint_neig ] let @xmath1752 be two paths such that there exits @xmath1753 that interferes with @xmath1754 .",
    "then , @xmath1749 and @xmath1750 are independent and hence @xmath1755 $ ] and @xmath1756 $ ] are disjoint ( besides the common vertex @xmath21 ) .    note that by lemma [ obs : inter_explain ] , if @xmath1749 and @xmath1750 are independent then the segments @xmath1757 and @xmath1758 are disjoint .",
    "assume towards contradiction that @xmath1749 and @xmath1750 are not independent and without loss of generality assume that @xmath1749 interferes with @xmath1750 . since @xmath1759 , it must hold that @xmath1749 @xmath98-interferes with @xmath1750 .",
    "for ease of notation , let @xmath1760 and @xmath1761 .",
    "let @xmath217 and @xmath1762 denote the first ( resp . ,",
    "last ) point of the detour @xmath284 for @xmath1763 . by obs .",
    "[ obs : char_intera](1 ) , since @xmath65 @xmath98-interferes with @xmath1333 , it must hold that @xmath1764 . on the other hand , since @xmath64 @xmath98-interferes with @xmath65 , by obs .",
    "[ obs : char_intera](2 ) , @xmath919 .",
    "we now show that these two requirements contradict each other by showing that @xmath1765 .",
    "specifically , we show that @xmath641 is _ not _ below @xmath1766 on @xmath27 , i.e. , @xmath1767 .",
    "assume towards contradiction that @xmath1768 , i.e. , @xmath643 and @xmath868 are non - nested .",
    "[ cl : disjindep ] , we then have that @xmath643 and @xmath868 are also independent .",
    "let @xmath1769 , since @xmath64 interferes with @xmath1333 , it visits the failing edge @xmath1325 , i.e. , @xmath1770 .",
    "we now present two @xmath1771 shortest - paths in @xmath1772 , namely , @xmath1773=\\pi(y_3,x_1 ) \\circ d_1[x_1,c_1 ] \\circ p_1[c_1 , q_2]$ ] and @xmath1774 $ ] .",
    "since @xmath1775 appears above @xmath1766 on @xmath27 and @xmath1776 $ ] is edge disjoint with @xmath27 , we get that @xmath1777 .",
    "in addition , since @xmath868 and @xmath643 are independent and @xmath1778 is edge disjoint with @xmath27 , we have that @xmath1779 . by optimality of the replacement paths @xmath64 and @xmath1315 , we have that @xmath332 .",
    "hence , we end with contradiction to the selection of @xmath64 by alg .",
    "@xmath86 , as there exists an alternative shortest path @xmath1780 $ ] in @xmath956 , whose @xmath98 divergence - point is strictly above @xmath641 .",
    "the claim follows . using lemma [ lem : disjoint_neig ] , the analysis of sec .",
    "[ sec : indeppaths ] extends to the setting of @xmath98-interference with only minor modifications .",
    "we now briefly sketch the main steps of the analysis and highlight the require modifications .",
    "let @xmath1781 be the increasing @xmath1530-ordered set of @xmath1006 paths as in sec .",
    "[ sec : indeppaths ] , where @xmath1782 .",
    "hence , @xmath1783 .",
    "since @xmath1268 , it holds that @xmath1784 .",
    "note that if a path @xmath104 @xmath98-interferes with @xmath139 then by obs .",
    "[ obs : char_intera ] , @xmath108 is necessarily below @xmath138 on @xmath27 . also note that since @xmath104 is in @xmath1006 , if @xmath104 interferes with @xmath139 then necessarily it is an interference of type @xmath98 .",
    "we have the following .    [ obs : ordernointer ] @xmath104 does not interferes with @xmath139 for every @xmath1785 .",
    "the last observation implies that the proof of lemma [ lem : ordering ] established for the case of independent paths , extends as is to the case of @xmath98-interfering sets @xmath1006 .",
    "[ lem : orderingpi ] @xmath1786 ( or alternatively , if @xmath1535 then @xmath307 ) .    towards bounding the number of independent paths ,",
    "we classify them into @xmath1596 classes @xmath1597 for some parameter @xmath1596 to be revealed later .",
    "these classes cover all the independent paths @xmath1006 . in each class , @xmath1598",
    ", there is a special representor @xmath1599 .",
    "the classification procedure is identical to that of sec .",
    "[ sec : indeppaths ] . for every @xmath1616 , we define two subsets of disjoint vertices @xmath1617 and @xmath1618 according to eq .",
    "( [ eq : v12sets ] ) .",
    "the next auxiliary claim extends cl .",
    "[ cl : piindep_det ] to the case of @xmath98-interference .",
    "let @xmath1661 such that @xmath1662 .",
    "let @xmath1663 , @xmath1664 and @xmath1665 for @xmath1666 .",
    "[ cl : piindep_detpi ] for every triple of path @xmath1787 , we have that : + ( 1 ) @xmath1667=\\emptyset$ ] .",
    "+ ( 2 ) @xmath1788=\\emptyset$ ] .",
    "part ( 1 ) follows immediately by cl .",
    "[ cl : piindep_det ] ( the proof of this claim did not use the fact that given paths are independent ) . consider part ( 2 ) .",
    "assume towards contradiction that there exists a vertex @xmath1789 $ ] .",
    "we now claim that the existence of the common vertex @xmath69 , implies that @xmath1333 @xmath98-interferes with both @xmath64 and @xmath65 .",
    "assume towards contradiction , that @xmath1333 does not @xmath98-interfere with @xmath139 for @xmath1790 . by obs .",
    "[ obs : ordernointer ] , @xmath139 does not interfere with @xmath1333 .",
    "hence , @xmath1333 and @xmath139 are independent . by obs .",
    "[ obs : dist_indep ] , we then have that @xmath1791 $ ] and @xmath1792 $ ] are disjoint , leading to contradiction that @xmath69 is a common vertex in the intersection .",
    "hence , @xmath1333 interferes with @xmath64 and @xmath65 . since @xmath1793",
    ", it holds that this interference is of type @xmath98 . by lemma [ lem : disjoint_neig ]",
    ", we get that @xmath917 $ ] and @xmath1794 $ ] are disjoint , leading to contradiction again to the existence of the common vertex @xmath69 .",
    "the claim follows .    using cl .",
    "[ cl : piindep_detpi ] , we are now ready to bound the cardinality of the vertex sets @xmath1617 and @xmath1618 .",
    "[ cl : v1ipi ] @xmath1629 .",
    "we classify the @xmath1630 paths in @xmath1619 into two sets depending on the condition they satisfy when joining the class .",
    "let @xmath1631 be the set of paths in @xmath1619 that satisfy ( o1 ) and let @xmath1632 be the complementary set of paths .",
    "first , assume that the majority of the @xmath1630 paths belongs to the first class @xmath1631 ( i.e. , satisfy condition ( o1 ) ) .",
    "hence , @xmath1633 .",
    "note that the @xmath99-divergence point of each path in this class appears on @xmath1634 . by the uniqueness of the @xmath99-divergence point ( see lemma [ cl : rp_prop1 ] ) , the paths in @xmath1635 can be ordered in increasing distance from @xmath507 .",
    "hence , @xmath1636\\setminus",
    "\\{v\\}| \\geq j-1 $ ] for every @xmath1637 . by cl .",
    "[ cl : piindep_detpi](2 ) , every vertex @xmath1795 is counted at most twice by @xmath989 and @xmath1519 where @xmath1796 or vice - versa .",
    "hence , @xmath1797\\setminus\\{v\\}|\\geq \\frac{1}{2 } \\cdot \\sum_{j=1}^k |p_j[c_j , v]\\setminus \\{v\\}| \\geq ( k-1)^2/4 $ ] . since @xmath1639 , the claim holds .",
    "the complementary case , where the majority of the paths in this class are in @xmath1632 , holds analogously .",
    "let @xmath1624 for @xmath1625 .",
    "we next bound the number of independent paths by showing that @xmath1798 is large for @xmath1625 .",
    "[ cor : sumpi ] ( a ) @xmath1694 .",
    "+ ( b ) @xmath1799 .",
    "consider ( a ) .",
    "our strategy is follows .",
    "we consider some vertex @xmath1696 and bound the number of sets @xmath1800 , @xmath1626 in which it appears . by cl .",
    "[ cl : piindep_detpi](a ) and ( b ) , a vertex @xmath69 may appear in at most two @xmath1801 $ ] segments and in at most two @xmath289 $ ] segments , hence overall it may be re - counted four times by the sets of @xmath1800 .",
    "the claim follows now the exact same line as the proof of cl .",
    "[ cor : sum ] .",
    "we are now ready to complete the proof for thm .",
    "[ thm : upper ] . by obs .",
    "[ lem : single_fault ] , lemma [ lem : not_inters ] , cor .",
    "[ cor : bound_no_touch ] , cor .",
    "[ cor : ninterb ] , cl .",
    "[ cor : sum](b ) and cl .",
    "[ cor : sumpi](b ) , we have that for every @xmath21 , the number of new - ending paths in @xmath153 is @xmath92 .",
    "overall , we have the following .",
    "@xmath1802 . the theorem follows .",
    "in this section , we consider a lower bound constructions for @xmath1803 structures resilient to up to @xmath7-faults for general @xmath8 and for every number of sources @xmath13 .",
    "these construction extends the construction of @xcite for the single failure case .",
    "[ thm : lowerbound_f ] for every @xmath1804 and @xmath1805 , there exists an @xmath3-vertex graph @xmath1806 and a source set @xmath1807 such that any @xmath7-failure  structure with respect to @xmath51 has @xmath1808 edges .",
    "note that for @xmath1809 the claimed bound becomes trivial .",
    "hence we will assume that @xmath1810 .",
    "we begin by showing the construction for the single source case and then extend it to the case multiple sources .",
    "our construction is based on the graph @xmath1811 , defined inductively . for @xmath1812 , @xmath1813",
    "consists of three components : ( 1 ) a set of vertices @xmath1814 connected by a path @xmath1815 $ ] , ( 2 ) a set of terminal vertices @xmath1816 ( viewed by convention as ordered from left to right ) , and ( 3 ) a collection of @xmath1817 vertex disjoint paths @xmath1818 of length @xmath1819 connecting @xmath1820 and @xmath1821 for every @xmath1822 . the vertex @xmath1823 is fixed as the root of @xmath1824 , hence the edges of the paths @xmath1825 are viewed as directed away from @xmath1820 , and the terminal vertices of @xmath1826 are viewed as the _ leaves _ of the graph , denoted @xmath1827 .",
    "[ fig : lowerboundg1 ] for illustration .",
    "overall , the vertex and edge sets of @xmath1824 are @xmath1828 and @xmath1829 .    for ease of future analysis ,",
    "we assign labels to the leaves @xmath1830 .",
    "let @xmath1831 .",
    "the label of each leaf corresponds to a set of edge faults under which the path from root to leaf is still maintained ( this will be proved later on ) .",
    "specifically , @xmath1832 for @xmath1833 and @xmath1834 .",
    "in addition , define @xmath1835 \\circ q^1_i$ ] to be the path from the root @xmath1836 to the leaf @xmath1821 .    to complete the inductive construction , let us describe the construction of the graph @xmath1837 , for @xmath1838 , given the graph @xmath1839 .",
    "the graph @xmath1837 consists of the following components .",
    "first , it contains a path @xmath1840 $ ] , where the node @xmath1841 is fixed to be the root .",
    "in addition , it contains @xmath1817 disjoint copies of the graph @xmath1842 , denoted by @xmath1843 ( viewed by convention as ordered from left to right ) , where each @xmath1844 is connected to @xmath1845 by a collection of @xmath1817 vertex disjoint paths @xmath1846 , for @xmath1822 , connecting the vertices @xmath1845 with @xmath1847 .",
    "the length of @xmath1846 is @xmath1848 .",
    "the leaf set of the graph @xmath1849 is the union of the leaf sets of @xmath1850 s , @xmath1851 .",
    "next , define the labels @xmath1852 for each @xmath1853 . for",
    "every @xmath1854 and any leaf @xmath1855 , let @xmath1856 .    denote the size ( number of nodes ) of @xmath1857 by @xmath1858 , its depth ( maximal distance between two nodes ) by @xmath1859 , and its number of leaves by @xmath1860 .",
    "note that for @xmath1812 , @xmath1861 , @xmath1862 ( corresponding to the length of the path @xmath1863 ) , and @xmath1864 .",
    "we now observe that the following inductive relations hold .",
    "[ obs : rel ]    \\(a ) @xmath1865 .",
    "\\(b ) @xmath1866 .",
    "\\(c ) @xmath1867 for some constant @xmath97 .",
    "\\(a ) follows by the length of @xmath1846 , which implies that @xmath1868 .",
    "( b ) follows by the fact that the terminals of the paths starting with @xmath1869 are the terminals of the graphs @xmath1843 which are disjoint copies of @xmath1870 , so @xmath1871 .",
    "( c ) follows by summing the nodes in the @xmath1817 copies of @xmath1844 ( yielding @xmath1872 ) and the nodes in @xmath1817 vertex disjoint paths , namely @xmath1873 of total @xmath1874 nodes , yielding @xmath1875 .",
    "consider the set of @xmath1876 leaves in @xmath1877 , @xmath1878 , ordered from left to right according to their appearance in @xmath1877 .",
    "[ lem : prop_induc_path ] for every @xmath1879 it holds that : + ( 1 ) the path @xmath1880 is the only @xmath1881 path in @xmath1877 .",
    "+ ( 2 ) @xmath1882 .",
    "+ ( 3 ) @xmath1883 for every @xmath1884 .",
    "+ ( 4 ) @xmath1885 for every @xmath1886 .",
    "we prove the claims by induction on @xmath7 . for @xmath1812 ,",
    "the lemma holds by construction .",
    "assume this holds for every @xmath1887 and consider @xmath1877 .",
    "let @xmath1888 $ ] , and let @xmath1843 be @xmath1817 copies of the graph @xmath1870 , viewed as ordered from left to right , where @xmath1850 is connected to @xmath1889 .",
    "that is , there are disjoint paths @xmath1890 of monotonely increasing length connecting @xmath1889 and @xmath1891 , for @xmath1892 $ ] .    by the inductive assumption",
    ", there exists a single path @xmath1893 between the root @xmath1891 and the leaf @xmath1879 , for every @xmath1892 $ ] .",
    "we now show that there is a single path between @xmath1894 and @xmath1879 for every @xmath1892 $ ] .",
    "since there is a single path @xmath160 connecting @xmath1895 and @xmath1891 , where @xmath1896\\circ q^f_j$ ] , it follows that @xmath1897 is a unique path in @xmath1877 .",
    "we now show ( 2 ) . by the inductive assumption , @xmath1898 .",
    "since @xmath1899 , it remains to show that @xmath1900 for @xmath1901 .",
    "since @xmath160 diverges from @xmath1888 $ ] at point @xmath1889 , it holds that @xmath1902 .",
    "next we consider ( 3 ) .",
    "let @xmath1903 be the set of leaves to the right of @xmath1879 that belong to @xmath1850 , and let @xmath1904 be the complementary set of leaves . by the inductive assumption , @xmath1905 for every @xmath1906 .",
    "since the order of the leaves in @xmath1850 agrees with their order in @xmath1877 and as @xmath1907 and also @xmath1908 , the claim holds for the set @xmath1909 .",
    "next , consider the complementary leaf set @xmath1910 .",
    "since the divergence point of @xmath1911 and @xmath1912 is at @xmath1913 for @xmath1914 , it follows that @xmath1915 , and thus @xmath1916 for every @xmath1914 .",
    "finally , consider ( 4 ) .",
    "let @xmath1917 be the set of leaves to the left of @xmath1879 that belong to @xmath1850 and let @xmath1918 be the complementary set of leaves .",
    "first consider @xmath1919 .",
    "then , by the inductive assumption , @xmath1920 . since @xmath1921 and @xmath1897 for @xmath1922 \\circ q^f_j$ ] , the claim holds for the set @xmath1923 .",
    "consider next the complementary set @xmath1924 which are in @xmath1925 for @xmath1926 .",
    "since for every such @xmath1927 $ ] it holds that @xmath1928 , the claim follows .    finally , we turn to describe the graph @xmath1806 which establishes our lower bound . the graph @xmath1806 consists of three components .",
    "the first is the graph @xmath1849 for @xmath1929 , where @xmath97 is some constant to be determined later . by obs .",
    "[ obs : rel ] , @xmath1930 .",
    "note that @xmath1931 for sufficiently large @xmath3 , hence @xmath1932 .",
    "the second component of @xmath1806 is a set of nodes @xmath1933 and an additional vertex @xmath1934 that is connected to @xmath1935 and to all the vertices of @xmath1936 .",
    "the cardinality of @xmath1936 is @xmath1937 .",
    "the third component of @xmath1806 is a complete bipartite graph @xmath1938 connecting the nodes of @xmath1936 with the leaf set @xmath1939 , i.e. , the disjoint leaf sets @xmath1940 .",
    "the vertex set of the resulting graph is thus @xmath1941 and hence @xmath1942 .",
    "see figures [ fig : lowerboundg2 ] and [ fig : lowerboundgf ] for illustration of @xmath1943 and @xmath1944 .    by prop .",
    "( b ) of obs .",
    "[ obs : rel ] , @xmath1945 hence @xmath1946 .",
    "we now complete the proof of thm .",
    "[ thm : lowerbound_f ] for the single source case .",
    "we show that every @xmath7-edge  structure @xmath1 with respect to @xmath1947 of @xmath1806 must contain all the edges of @xmath1948 .",
    "let @xmath1843 be the @xmath1817 copies of @xmath1870 .",
    "let @xmath1949 be the rightmost leaf in @xmath1806 ( i.e. , in @xmath1950 ) .",
    "we first show that @xmath1951 must be included in any  structure , for every @xmath1952 .",
    "assume , towards contradiction , that there exists a  structure not using @xmath1953 , i.e. , @xmath1954 .",
    "consider the failure of the edge @xmath1955 . by lemma [ lem : prop_induc_path ]",
    ", @xmath1956 is the unique shortest - path between @xmath1895 and @xmath1949 , and any other @xmath1957 path is strictly longer .",
    "hence , we get that @xmath1958 , in contradiction to the fact that @xmath1 is a  structure .",
    "next , consider any specific edge @xmath1959 where @xmath1855 is not the rightmost leaf , and let @xmath1960 be the set of edge faults . note that by construction , @xmath1961 .",
    "it then follows by lemma [ lem : prop_induc_path ] that @xmath1962 for every @xmath1914 .",
    "thus , @xmath1963 as well .",
    "in addition , @xmath1964 for every @xmath1926 , which implies that @xmath1965 for every graph @xmath1966 . the theorem follows . 1     the graph @xmath1824 .",
    "]    1     lower bound construction for dual failure  structure .",
    "the set of x vertices is fully connected to the leaf set of each of the @xmath1817 copies of @xmath1967 .",
    "overall @xmath1968 .",
    "the dashed wide edge is required in any dual failure  structure upon the faults of the edges marked in figure . ]",
    "we now extend the lower bound construction to support the case of multiple sources @xmath10 for any cardinality of sources . given a parameter @xmath13 representing the number of sources , @xmath13 copies , @xmath1969 , of @xmath1857 , where @xmath1970 . by obs .",
    "[ obs : rel ] , each copy consists of @xmath1971 nodes . let @xmath401 be the node @xmath1972 and @xmath1973 in the @xmath164th copy @xmath1844 . add a node @xmath1974 connected to a set @xmath1936 of @xmath36 nodes and connect @xmath1974 to each of the nodes @xmath401 , for @xmath1822 .",
    "finally , connect the set @xmath1936 to the @xmath13 leaf sets @xmath1975 by a complete bipartite graph , adjusting the size of the set @xmath1936 in the construction so that @xmath1976 .",
    "since @xmath1977 ( see obs .",
    "[ obs : rel ] ) , overall @xmath1978 . since the path from each source @xmath1979 to @xmath1936 can not aid the nodes of @xmath1850 for @xmath1628 , the analysis of the single - source case can be applied to show that each of the bipartite graph edges in necessary upon a certain sequence of at most @xmath7-edge faults .",
    "in sec . [ sec : analysis ] , we presented an algorithm that for every graph @xmath0 and source @xmath4 constructs a dual failure   @xmath1 with @xmath5 edges . in sec .",
    "[ sec : lb ] , we showed that there exist graphs @xmath0 and source set @xmath1980 for with every  @xmath30 with respect to @xmath51 overcoming up to @xmath7-faults has @xmath1808 edges , establishing tightness of our algorithm for the case of @xmath200 and @xmath16 in the worst - case .    in this section",
    "consider the _",
    "minimum _ that aims at finding the minimum size structures that tolerant against @xmath7-faults for any given set of sources @xmath51 .",
    "minimum _ has been defined and studied by @xcite for the single failure case ( i.e. , @xmath1812 ) .",
    "we extend the result of @xcite to the general case of constant @xmath11 and provide a @xmath19 approximation algorithm for this problem .",
    "the importance of this result is of twofold .",
    "first , for @xmath16 , although our universal upper bound matches the existential lower bound , there are also inputs @xmath1981 for which the algorithm of sec .",
    "[ sec : analysis ] , might still produce an  @xmath1 which is denser by a factor of @xmath1982 than the size of the optimal  structure .",
    "for the case of @xmath1812 , an example of such a graph is given by @xcite , this example can easily be modified to @xmath16 by the lower bound construction of sec .",
    "[ sec : lb ] .",
    "second , for general @xmath1983 , while a tight universal upper bound on the size of @xmath7-fault  structures is currently beyond our reach , we can still construct such structures whose size is larger by a factor of @xmath19 than the optimal @xmath7-fault  structures .",
    "although this section is a straightforward extension of @xcite , for completeness , we provide a full analysis and begin by defining the problem formally . for a graph @xmath47 , a source set @xmath10 and number of faults @xmath9 , let @xmath1984 be the collection of all subgraph @xmath30 that are  with respect to @xmath51 overcoming up to @xmath7-faults , that is the subgraphs @xmath30 satisfying that @xmath1985 for every @xmath197 and @xmath198 where @xmath1986 .",
    "let @xmath1987    in the _ minimum _ problem , we are given a graph @xmath0 , a source set @xmath10 and number of faults @xmath11 and the goal is to compute an @xmath7-fault  @xmath1988 of minimum size , i.e. , such that @xmath1989 .",
    "similarly to @xcite , it can be shown that the _ minimum _ problem for any constant @xmath9 and @xmath1990 , is np - hard and moreover , can not be approximated ( under standard complexity assumptions ) to within a factor of @xmath1991 .",
    "we now turn to describe a @xmath19 approximation algorithm given an input @xmath1992 . to prove theorem [ thm : approx ]",
    ", we first describe the algorithm and then bound the number of edges .",
    "let @xmath1993 be an @xmath19 approximation algorithm for the set - cover problem , which given a collection of sets @xmath1994 that covers a universe @xmath1995 of size @xmath1996 , returns a cover @xmath1997 that is larger by at most @xmath1998 than any other @xmath1999 that covers @xmath2000 ( cf .",
    ".      set an arbitrary order on the vertices @xmath2002 and define @xmath2003 be the collection of all possible @xmath2004 edge failures in @xmath0 .",
    "note that @xmath2005 contains also the empty set , corresponding to the fault free case .",
    "in addition , note that @xmath2006 , hence of polynomial size for constant number of faults @xmath7 .",
    "let @xmath2007 the algorithm consists of @xmath3 rounds , where in round @xmath164 it considers @xmath62 .",
    "let @xmath2008 be the set of neighbors of @xmath62 in some arbitrary order , where @xmath2009 .",
    "for every neighbor @xmath497 , define a set @xmath2010 containing elements of @xmath2000 .",
    "informally , a set @xmath2011 contains the pair @xmath2012 if there exists an @xmath2013 shortest path in @xmath100 that goes through the neighbor @xmath497 of @xmath62 .",
    "note that @xmath2011 contains the pair @xmath2014 for every @xmath2015 iff there exists an @xmath2013 shortest - path in @xmath0 that goes through @xmath497 .",
    "formally , the pair @xmath2016 is included in every set @xmath2011 satisfying that @xmath2017 let @xmath2018 .",
    "the edges incident to @xmath62 that are added to @xmath1 in round @xmath164 are now selected by using algorithm @xmath2019 to generate an approximate solution for the set cover problem on the collection @xmath2020 .",
    "let @xmath2021 .",
    "for every @xmath2022 , add the edge @xmath2023 to @xmath1 .",
    "we first show that algorithm constructs an @xmath7-@xmath1988 and then bound its size .",
    "assume , towards contradiction , that @xmath2024 .",
    "let @xmath14 be some source vertex such that @xmath2025 is not an @xmath7-  structure with respect to @xmath4 . by the assumption , such @xmath4 exits .",
    "let @xmath2026 be the set of  bad pairs , \" namely , vertex , faulty - set pairs @xmath2027 for which the @xmath187 shortest path distance in @xmath548 is greater than that in @xmath549 .",
    "( by the assumption that @xmath2025 , it holds that @xmath550 . )    for every pair @xmath2027 , where @xmath2028 and @xmath2029 , define an @xmath187 shortest - path @xmath2030 in @xmath100 in the following manner .",
    "let @xmath2031 be such that the pair @xmath2032 is covered by the set @xmath2011 of @xmath497 and @xmath2033 is included in the cover returned by the algorithm @xmath2019 in round @xmath164 .",
    "thus , @xmath2034 and @xmath2035 .",
    "let @xmath2036 and define @xmath2037 by definition , @xmath2038 and by construction , @xmath2039 .",
    "define @xmath2040 to be the set of `` bad edges , '' namely , the set of @xmath2030 edges that are missing in @xmath1 . by definition ,",
    "@xmath2041 for every bad pair @xmath2042 .",
    "let @xmath2043 be the maximal depth of a missing edge in @xmath2044 , and let @xmath2045 denote that `` deepest missing edge '' for @xmath2027 , i.e. , the edge @xmath25 on @xmath2030 satisfying @xmath2046 .",
    "finally , let @xmath2047 be the pair that minimizes @xmath2048 , and let @xmath2049 be the deepest missing edge on @xmath2050 , namely , @xmath2051 . note that @xmath563 is the _",
    "`` deepest missing edge '' over all bad pairs @xmath2042 .",
    "let @xmath2052 , @xmath2053 $ ] and @xmath2054 $ ] ; note that since @xmath2047 , it follows that also @xmath2055 .",
    "( otherwise , if @xmath2056 , then any @xmath2057 shortest - path @xmath2058 , where @xmath2059 , can be appended to @xmath1333 resulting in @xmath2060 such that ( 1 ) @xmath2061 and ( 2 ) @xmath2062 , contradicting the fact that @xmath2047 . )",
    "thus we conclude that @xmath2055 .",
    "finally , note that @xmath2063 by definition , and therefore the deepest missing edge of @xmath2027 must be shallower , i.e. , @xmath2064 .",
    "however , this is in contradiction to our choice of the pair @xmath2065 .",
    "the lemma follows .",
    "let @xmath2066 be the weight assignment that guarantees the uniqueness of shortest - paths ( i.e. , breaks ties between of shortest - paths of the same lengths , in a consistent manner ) .",
    "note that the algorithm did not use @xmath101 in the computation of the shortest - paths .",
    "for every node @xmath62 , let @xmath2067 be its ordered neighbor set as considered by the algorithm .",
    "for every  tree @xmath2068 , @xmath2069 and source @xmath2015 , let @xmath2070 be an @xmath2013 shortest - path in @xmath548 .",
    "let @xmath2071 be the edges incident @xmath62 that appear as last edges in the shortest - paths and replacement paths from @xmath51 to @xmath62 in @xmath1 .",
    "define @xmath2072 we then have that @xmath2073 ) established that if a subgraph @xmath30 satisfies that @xmath2074 is a cover of @xmath2000 for every @xmath2075 , then @xmath1988 .",
    "we now turn to show the reverse direction .",
    "assume , towards contradiction , that there exists an @xmath7-fault @xmath1988 and a vertex @xmath2075 whose corresponding collection of sets @xmath2074 does not cover @xmath2000 .",
    "hence there exists at least one uncovered pair @xmath2077 , i.e. , @xmath2078 we next claim that @xmath1 does not contain an optimal @xmath2013 path when the edges of @xmath38 fail , contradicting the fact that @xmath1988 .",
    "that is , we show that @xmath2079 towards contradiction , assume otherwise , and let @xmath2080 where @xmath2081 , hence @xmath2082 and @xmath2083 . by the contradictory assumption , @xmath2084 and hence @xmath2085 .",
    "this implies that @xmath2086 , in contradiction to eq .",
    "( [ eq : notcovered ] ) , stating that @xmath2087 is not covered by @xmath2074 . the lemma follows .",
    "we now turn to bound that number of edges in @xmath1 .",
    "let @xmath2089 be an optimal @xmath7-fault  satisfying that @xmath2090 .",
    "let @xmath2091 be the approximation ratio guarantee of algorithm @xmath2019 .",
    "for ease of notation , let @xmath2092 for every @xmath2075 .",
    "let @xmath2018 be the collection of @xmath62 sets considered at round @xmath164 where @xmath2093 is the set of the neighbor @xmath2094 computed according to eq .",
    "( [ eq : intset ] ) .",
    "let @xmath2095 be the cover returned by the algorithm and define @xmath2096 as the collection of edges whose corresponding sets are included in @xmath2097 .",
    "thus , by eq .",
    "( [ eq : set_size ] ) , @xmath2098 and @xmath2099 for every @xmath2075 .      assume , towards contradiction , that there exists some @xmath164 such that @xmath2101 . then by eq .",
    "( [ eq : set_size ] ) and by the approximation guarantee of where in particular @xmath2102 for every @xmath2103 that covers @xmath2000 , it follows that @xmath2104 is not a cover of @xmath2000 .",
    "consequently , it follows by lemma [ lem : cover_tree ] that @xmath2105 , contradiction .",
    "the observation follows .",
    "since @xmath2106 contains precisely the edges that are added by the algorithm to the constructed @xmath7-faults  structure @xmath1 , we have that @xmath2107 where the second inequality follows by obs .",
    "[ cl : a_i ] and the third by the fact that @xmath2108 ( as every edge in @xmath2109 can be counted at most twice , by both its endpoints ) .",
    "the lemma follows .",
    "[ thm : approx ] is established .",
    "s.  chechik , m.  langberg , d.  peleg , and l.  roditty .",
    "fault - tolerant spanners for general graphs . in _ stoc _ , 435444 , 2009 .",
    "c.  demetrescu , m.  thorup , r.  chowdhury , and v.  ramachandran .",
    "oracles for distances avoiding a failed vertex or link . , 37:12991318 , 2008 ."
  ],
  "abstract_text": [
    "<S> we study _ breadth - first search ( bfs ) _ spanning trees , and address the problem of designing a sparse _ fault - tolerant _ bfs structure , or _ </S>",
    "<S> ft - bfs _ for short , resilient to the failure of up to two edges in the given undirected unweighted graph @xmath0 , i.e. , a sparse subgraph @xmath1 of @xmath0 such that subsequent to the failure of up to two edges , the surviving part @xmath2 of @xmath1 still contains a bfs spanning tree for ( the surviving part of ) @xmath0 . </S>",
    "<S> ft - bfs structures , as well as the related notion of replacement paths , have been studied so far for the restricted case of a single failure . </S>",
    "<S> it has been noted widely that when concerning shortest - paths in a variety of contexts , there is a sharp qualitative difference between a single failure and two or more failures @xcite . </S>",
    "<S> our main results are as follows . </S>",
    "<S> we present an algorithm that for every @xmath3-vertex unweighted undirected graph @xmath0 and source node @xmath4 constructs a ( two edge failure )  structure rooted at @xmath4 with @xmath5 edges . to provide a useful theory of shortest paths avoiding 2 edges failures , </S>",
    "<S> we take a principled approach to classifying the arrangement these paths . </S>",
    "<S> we believe that the structural analysis provided in this paper may decrease the barrier for understanding the general case of @xmath6 faults and pave the way to the future design of @xmath7-fault resilient structures for @xmath8 . </S>",
    "<S> we also provide a matching lower bound , which in fact holds for the general case of @xmath9 and multiple sources @xmath10 . </S>",
    "<S> it shows that for every @xmath11 , and integer @xmath12 , there exist @xmath3-vertex graphs with a source set @xmath10 of cardinality @xmath13 for which any  structure rooted at each @xmath14 , resilient to up to @xmath7-edge faults has @xmath15 edges . in particular , for @xmath16 and @xmath17 , a dual failure  structure rooted at @xmath4 </S>",
    "<S> must have @xmath18 edges in the worst case . </S>",
    "<S> finally , we also consider the optimization variant for this problem , and propose an @xmath19 approximation algorithm for constructing  structures resilient to up to @xmath7-faults for any constant @xmath9 and any source set @xmath10 . </S>"
  ]
}