{
  "article_text": [
    "the study of proper and polychromatic colorings of geometric hypergraphs has attracted much attention , not only because this is a very basic and natural theoretical problem but also because such problems often have important applications .",
    "one such application area is resource allocation , e.g. , battery consumption in sensor networks .",
    "moreover , the coloring of geometric shapes in the plane is related to the problems of cover - decomposability , conflict - free colorings and @xmath2-nets ; these problems have applications in sensor networks and frequency assignment as well as other areas . for surveys on these and related problems",
    "see @xcite .    in a ( primal ) _ geometric hypergraph polychromatic coloring _ problem , we are given a natural number @xmath1 , a set of points and a collection of regions in @xmath3 , and our goal is to @xmath1-color the points such that every region that contains at least @xmath4 points contains a point of every color , where @xmath5 is some function that we try to minimize .",
    "we call such a coloring a _",
    "polychromatic @xmath1-coloring_. in a _ dual _ geometric hypergraph polychromatic coloring problem , our goal is to @xmath1-color the regions such that every point which is contained in at least @xmath4 regions is contained in a region of every color . in other words",
    ", in the dual version our goal is to _ decompose _ an @xmath4-fold covering of some point set into @xmath1 coverings .",
    "the primal and the dual versions are equivalent if the underlying regions are the translates of some fixed set . for the proof of this statement and an extensive survey of results related to _ cover - decomposition _ , see e.g. , @xcite .",
    "below we mention some of these results , stated in the equivalent primal form .",
    "the most general result about translates of polygons is that given a fixed convex polygon , there exists a @xmath6 ( that depends only on the polygon ) such that any _ finite _ point set has a polychromatic @xmath1-coloring such that any translate of the fixed convex polygon that contains at least @xmath7 points contains a point of every color @xcite .",
    "non - convex polygons for which such a finite @xmath4 ( for any @xmath8 ) exists have been classified @xcite .",
    "as it was shown recently @xcite , there is no such finite @xmath9 for convex sets with a smooth boundary , e.g. , for the translates of a disc .",
    "however , it was also shown in the same paper that for the translates of any _ unbounded _ convex set @xmath10 is sufficient . in this paper",
    "we extend this result to every @xmath1 , showing that @xmath11 is an optimal function for unbounded convex sets .    for homothets of a given shape",
    "the primal and dual problems are not equivalent . for homothets of a triangle ( a case closely related to the case of translates of octants @xcite ) ,",
    "there are several results , the current best are @xmath12 in the primal version @xcite and @xmath13 in the dual version @xcite . for the homothets of other convex polygons , in the dual case",
    "there is no finite @xmath9 @xcite , and in the primal case only conditional results are known @xcite , namely , that the existence of a finite @xmath9 implies the existence of an @xmath4 that grows at most polynomially in @xmath1 .",
    "in fact , it is even possible that for _ any _ polychromatic coloring problem @xmath14 .    for other shapes ,",
    "cover - decomposability has been studied less , in these cases the investigation of polychromatic - colorings is motivated rather by conflict - free colorings or @xmath2-nets .",
    "most closely related to our paper , coloring halfplanes for small values were investigated in @xcite , and polychromatic @xmath1-colorings in @xcite .",
    "we generalize all the ( primal and dual ) results of the latter paper to pseudohalfplanes .",
    "note that translates of an unbounded convex set form a set of pseudohalfplanes , thus the above mentioned result about unbounded convex sets is a special case of this generalization to pseudohalfplanes .",
    "axis - parallel rectangles are usually investigated from the @xmath2-net point of view ( e.g. , @xcite ) , for which the coloring function @xmath15 is not independent of the number of points / regions .",
    "motivated by these , bottomless rectangles are regarded for small values in @xcite and polychromatic @xmath1-colorings in @xcite . in this paper",
    "we place bottomless rectangles in our abstract context and pose some further problems about them .    besides generalizing earlier results , our contribution is a more abstract approach to the above problems .",
    "namely , we introduce the notion of _ aba - free families _",
    "( see definition  [ def : aba ] ) , _ shallow hitting sets _ ( see definition  [ defi : shallow ] ) and _ balanced polychromatic colorings _",
    "( see definition  [ def : balanced ] ) , and discuss their relevance .",
    "[ def : aba ] a hypergraph @xmath16 with an ordered vertex set is called _ aba - free _",
    "if @xmath17 does not contain two hyperedges @xmath18 and @xmath19 for which there are three vertices @xmath20 such that @xmath21 and @xmath22 .",
    "a hypergraph with an unordered vertex set is aba - free if its vertices have an ordering with which the hypergraph is aba - free .",
    "aba - free hypergraphs were first defined in @xcite under the name _ special shift - chains _ , as they are a special case of _ shift - chains _ introduced in @xcite .",
    "[ jamegezisegypelda ] an _ interval hypergraph _ is a hypergraph whose vertices are some points of @xmath23 , and its hyperedges are some intervals from @xmath23 , with the incidences preserved .",
    "[ egyikpelda ] let @xmath24 be a set of points in the plane with different @xmath25-coordinates and let @xmath26 be a convex set that contains a vertical halfline .",
    "define a hypergraph @xmath16 whose vertex set is the @xmath25-coordinates of the points of @xmath24 .",
    "a set of numbers @xmath27 is a hyperedge of @xmath16 if there is a translate of @xmath26 such that the @xmath25-coordinates of the points of @xmath24 contained in the translate is exactly @xmath27 .",
    "the hypergraph @xmath16 defined this way is aba - free .",
    "[ masikpelda ] let @xmath24 be a set of points in the plane in general position .",
    "define a hypergraph @xmath16 whose vertex set is the @xmath25-coordinates of the points of @xmath24 .",
    "a set of numbers @xmath27 is a hyperedge of @xmath16 if there is a positive halfplane @xmath17 ( i.e. , that contains a vertical positive halfline ) such that the set of @xmath25-coordinates of the points of @xmath24 contained in @xmath17 is @xmath27 .",
    "the hypergraph @xmath16 defined this way is aba - free .",
    "the above examples show how to reduce geometric problems to abstract problems about aba - free hypergraphs .",
    "observe that given an @xmath24 , by choosing an appropriately big parabola , any hyperedge defined by a positive halfplane as in example  [ masikpelda ] is also defined by some translate of the big parabola as in example  [ egyikpelda ] , thus example  [ egyikpelda ] is more general than example  [ masikpelda ] , and it is easy to see that both are more general than example  [ jamegezisegypelda ] . even more , as we will see later in section  [ sec : pseudo ] , finite aba - free hypergraphs have an equivalent geometric representation with graphic pseudoline arrangements ( here hyperedges are defined by the regions above the pseudolines , for the definitions and details see section  [ sec : pseudo ] ) and both translates of the boundary of an unbounded convex set and lines in the plane form graphic pseudoline arrangements , showing again that the above examples are special cases of aba - free hypergraphs .    to study polychromatic coloring problems",
    ", we also introduce the following definition , which is implicitly used in @xcite , but deserves to be defined explicitly as it seems to be important in the study of polychromatic colorings .",
    "[ defi : shallow ] a set @xmath28 is a _",
    "@xmath6-shallow hitting set _ of the hypergraph @xmath16 if for every @xmath29 we have @xmath30 .",
    "actually , almost all our results are based on shallow hitting sets .    our main results and the organization of the rest of this paper is as follows .    in section  [ sec : aba ]",
    "we prove ( following closely the ideas of smorodinsky and yuditsky  @xcite ) that every @xmath0-uniform aba - free hypergraph has a polychromatic coloring with @xmath1 colors .",
    "we then observe that the dual of this problem is equivalent to the primal , which implies that the hyperedges of every @xmath0-uniform aba - free hypergraph can be colored with @xmath1 colors , such that if a vertex @xmath31 is in a subfamily @xmath32 of at least @xmath11 of the hyperedges of @xmath33 , then @xmath32 contains a hyperedge from each of the @xmath1 color classes .    in section  [ sec :",
    "pseudo ] we give an abstract equivalent definition ( using aba - free hypergraphs ) of hypergraphs defined by pseudohalfplanes , and we prove that given a finite set of points @xmath24 and a pseudohalfplane arrangement @xmath33 , we can @xmath1-color @xmath24 such that any pseudohalfplane in @xmath33 that contains at least @xmath11 points of @xmath24 contains all @xmath1 colors .",
    "both results are sharp .",
    "note that these results imply the same for hypergraphs defined by unbounded convex sets .",
    "in section  [ sec : signed ] we discuss dual and other versions of the problem .",
    "for example we prove that given a pseudohalfplane arrangement @xmath33 , we can @xmath1-color @xmath33 such that if a point @xmath34 belongs to a subfamily @xmath35 of at least @xmath36 of the pseudohalfplanes of @xmath33 , then @xmath35 contains a pseudohalfplane from each of the @xmath1 color classes .",
    "this result might not be sharp , the best known lower bound for @xmath4 is @xmath37 @xcite . in section  [ sec : bless ] , we discuss abab - free hypergraphs and related problems .",
    "we also discuss consequences about @xmath2-nets on pseudohalfplanes in appendix  [ app : epsnet ] .",
    "we denote the symmetric difference of two sets , @xmath18 and @xmath19 , by @xmath38 , the complement of a hyperedge @xmath39 by @xmath40 and for a family @xmath41 we use @xmath42 . we will suppose ( unless stated otherwise ) that all hypergraph and point sets are finite , and denote the smallest ( resp .",
    "largest ) element of an ordered set @xmath17 by @xmath43 ( resp .",
    "@xmath44 ) .",
    "suppose we are given an aba - free hypergraph @xmath16 on @xmath45 vertices . as the hypergraph is aba - free , for any pair of sets @xmath46 either there are @xmath47 such that @xmath48 and @xmath49 , or there are @xmath50 such that @xmath48 and @xmath49 , or none of them , but not both as that would contradict aba - freeness .",
    "define @xmath51 if and only if there are @xmath47 such that @xmath48 and @xmath49 , and @xmath52 if and only if either @xmath53 ( as sets ) or @xmath51 . by the above ,",
    "this is well - defined , and below we show that it gives a partial ordering of the sets .    if @xmath51 and @xmath48 , then there is a @xmath54 such that @xmath49 .    if @xmath51 and @xmath55 , then @xmath56 .",
    "take an @xmath48 .",
    "if @xmath57 , then take a @xmath49 . if @xmath58 , then @xmath56 and we are done",
    "otherwise , there has to be a @xmath59 such that @xmath60 . if @xmath61 , then @xmath62 forms a forbidden sequence for @xmath18 and @xmath19 , thus @xmath63 .",
    "then by definition @xmath64 and @xmath6 show that @xmath56 .    if @xmath65 , then also @xmath66 , thus there has to be a @xmath67 such that @xmath68 . as @xmath48 and @xmath51 , we also have @xmath69 and so @xmath70",
    ". there also has to be a @xmath71 such that @xmath72 . if @xmath73 , then @xmath74 forms a forbidden sequence for @xmath19 and @xmath26 .",
    "thus @xmath75 , and by definition @xmath76 and @xmath77 show that @xmath56 .",
    "we proceed with another definition .",
    "a vertex @xmath64 is _ skippable _ if there exists an @xmath78 such that @xmath79 and @xmath80 . in this case",
    "we say that @xmath18 _ skips _ @xmath64 .",
    "a vertex @xmath64 is _ unskippable _ if there is no such @xmath18 .",
    "if a vertex @xmath64 is unskippable in some aba - free hypergraph @xmath33 , then after adding the one - element hyperedge @xmath81 to @xmath33 , it remains aba - free .",
    "note that the following two lemmas show that the unskippable vertices of an aba - free hypergraph behave similarly to vertices on the convex hull of a hypergraph on a point set defined by halfplanes .",
    "these two lemmas make it possible to use the framework of @xcite on aba - free hypergraphs .",
    "[ lem : unskippable ] if @xmath16 is aba - free , then every @xmath82 contains an unskippable vertex .    note that finiteness ( recall that we have supposed that all our hypergraphs are finite ) is needed , as the hypergraph whose vertex set is @xmath83 and hyperedge set is @xmath84 is aba - free without unskippable vertices .",
    "take an arbitrary set @xmath78 , suppose that it does not contain an unskippable vertex , we will reach a contradiction . call @xmath85 _ rightskippable _ if there is a @xmath86 rightskipping @xmath64 , that is for which @xmath48 and there are @xmath87 such that @xmath74 where @xmath72 . if @xmath18 contains no unskippable vertex , @xmath88 must be rightskippable ( any set skipping @xmath88 must also rightskip @xmath88 ) . also , @xmath89 can not be rightskippable , as otherwise @xmath18 and the set @xmath19 rightskipping @xmath89 would violate aba - freeness ( we would get @xmath90 where @xmath91 ) .",
    "therefore we can take the largest @xmath85 that is not rightskippable . by the assumption",
    ", it is skipped by a set , call it @xmath19 , i.e. , @xmath74 where @xmath92 . moreover , suppose without loss of generality that @xmath77 is the smallest element of @xmath19 which is bigger than @xmath64 . since @xmath64 is not rightskippable , @xmath93 must also hold . as @xmath93 is rightskippable , there is a @xmath26 such that @xmath94 where @xmath95 and @xmath96 . without loss of generality ,",
    "suppose that @xmath97 is the largest element of @xmath26 which is smaller than @xmath77 . if @xmath98 , then @xmath26 would rightskip @xmath64 , a contradiction .",
    "thus , @xmath99 and from the choice of @xmath77 we conclude that @xmath100 . as @xmath101 , also @xmath102 ,",
    "otherwise @xmath19 would rightskip @xmath64 . putting all together",
    ", we get @xmath94 , thus @xmath19 and @xmath26 contradict aba - freeness .",
    "a hypergraph is called _ containment - free _ if none of its hyperedges contains another hyperedge .",
    "a hypergraph @xmath103 is a _",
    "subhypergraph _ of a hypergraph @xmath104 on vertex set @xmath24 if we can get @xmath103 by taking a subset @xmath105 as its vertex set and the family of the hyperedges of @xmath103 is a subfamily of the hyperedges of @xmath104 restricted to @xmath106 .",
    "we call a hypergraph property @xmath107 _ hereditary _ if for every hypergraph @xmath104 that has property @xmath107 , all of its subhypergraphs also have property @xmath107 .",
    "[ induced ] aba - freeness is a hereditary property .",
    "we further assume in the rest of the paper that our hypergraphs are nonempty in the sense that they contain at least one hyperedge which is not the empty set .",
    "notice that for an aba - free containment - free hypergraph the ordering @xmath108 of its sets is a total order , i.e. , any two hyperedges are comparable .",
    "[ lem : spshallow ] if @xmath16 is aba - free and containment - free , then any minimal hitting set of @xmath16 that contains only unskippable vertices is @xmath109-shallow .",
    "let @xmath28 be a minimal ( for containment ) hitting set of unskippable vertices",
    ". assume to the contrary that there exists a set @xmath18 such that @xmath110 .",
    "let @xmath111 and @xmath112 .",
    "there exists a third vertex @xmath113 in @xmath114 .",
    "we claim that @xmath115 hits all sets of @xmath16 , contradicting its minimality .",
    "assume on the contrary that @xmath116 is disjoint from some @xmath117 .",
    "as @xmath28 must hit @xmath19 , we have @xmath118 . if there is a @xmath49 such that @xmath119 , that would contradict the aba - free property . if there is a @xmath120 such that @xmath121 or @xmath122 , that would contradict that @xmath123 and @xmath124 are unskippable .",
    "thus @xmath125 , contradicting that @xmath16 is containment - free .",
    "[ lem : abashallow ] every containment - free aba - free hypergraph has a @xmath109-shallow hitting set .",
    "given a containment - free aba - free hypergraph , take the set of all unskippable vertices , it is a hitting set by lemma  [ lem : unskippable ] .",
    "then we can delete vertices from this set until it becomes a minimal hitting set , which is @xmath109-shallow by lemma [ lem : spshallow ] .",
    "now we present an abstract and generalized version of the framework of @xcite to give polychromatic @xmath1-colorings of hypergraphs .",
    "[ algo : sy ] assume that @xmath107 is a hereditary hypergraph property such that every containment - free hypergraph with property @xmath107 has a @xmath6-shallow hitting set .",
    "then every hypergraph @xmath104 with hyperedges of size at least @xmath126 that has property @xmath107 admits a polychromatic @xmath1-coloring , i.e. , a coloring of its vertices with @xmath1 colors such that every hyperedge of @xmath104 contains vertices of all @xmath1 colors .",
    "we present an algorithm that gives a polychromatic @xmath1-coloring .",
    "first , we repeat @xmath127 times ( @xmath128 ) the * general step * of the algorithm :    at the beginning of step @xmath129 we have a hypergraph @xmath104 with hyperedges of size at least @xmath130 that has property @xmath107 .",
    "if any hyperedge contains another , then delete the bigger hyperedge .",
    "repeat this until no hyperedge contains another , thus making our hypergraph containment - free .",
    "next , take a @xmath6-shallow hitting set ( using our assumptions ) , and color its vertices with the @xmath129-th color . delete these vertices from @xmath104 ( the hyperedges of the new hypergraph are the ones induced by the remaining vertices ) . as @xmath107 is hereditary",
    ", the new hypergraph also has property @xmath107 and we can proceed to the next step .",
    "after @xmath127 iterations of the above , we are left with a @xmath131-uniform hypergraph whose vertices we can color with the @xmath1-th color .",
    "first , we use this algorithm to give a polychromatic @xmath1-coloring of the vertices of an aba - free hypergraph with hyperedges of size at least @xmath37 .",
    "[ thm : aba ] given an aba - free @xmath132 we can color its vertices with @xmath1 colors such that every @xmath133 whose size is at least @xmath37 contains all @xmath1 colors .    by observation  [ induced ]",
    "aba - freeness is a hereditary property .",
    "together with lemma [ lem : abashallow ] we get that all the assumptions of theorem  [ algo : sy ] with @xmath134 hold for aba - free hypergraphs with hyperedges of size at least @xmath37 and thus we get a required @xmath1-coloring .",
    "notice that the above theorem is sharp , as taking @xmath16 to be all subsets of size @xmath135 from @xmath37 vertices , in any coloring of the vertices , one color must occur at most once and is thus missed by some hyperedge .",
    "we state another corollary of lemma  [ lem : unskippable ] that we need later . before that , we need another simple claim .    [ prop : insert ] suppose we insert a new vertex , @xmath31 , somewhere into the ( ordered ) vertex set of an aba - free hypergraph , @xmath33 , and add @xmath31 to every hyperedge that contains a vertex before and another vertex after @xmath31 , then we get an aba - free hypergraph .",
    "we show that if in the new hypergraph , @xmath136 , two hyperedges @xmath137 and @xmath138 violate aba - freeness , then we can find two hyperedges @xmath18 and @xmath19 in the original hypergraph , @xmath33 , that also violate aba - freeness , which would be a contradiction .",
    "we define @xmath139 and @xmath140 .",
    "if both @xmath137 and @xmath138 contain or do not contain @xmath31 , then by definition @xmath18 and @xmath19 also violate the condition .",
    "if , say , @xmath141 and @xmath142 , then without loss of generality we can suppose that all the vertices of @xmath143 are before @xmath31 .",
    "this means that if there are @xmath20 such that @xmath144 and @xmath145 , then necessarily @xmath146 .",
    "but as @xmath138 has an element @xmath147 that is bigger than @xmath31 , we have @xmath148 and @xmath22 , a contradiction .    [",
    "prop : slack ] if @xmath16 is aba - free , @xmath149 , then there is a vertex @xmath85 such that @xmath150 is also aba - free .    if @xmath151 , then trivially @xmath16 can be extended with @xmath152 . if @xmath153 , then we proceed by induction on the size of @xmath18 . using lemma  [ lem : unskippable ]",
    ", there is an unskippable vertex @xmath154 .",
    "delete this vertex from @xmath33 to obtain some aba - free @xmath32 and let @xmath155 .",
    "using induction on @xmath156 , there is an @xmath157 such that @xmath158 is also aba - free .",
    "we claim that with @xmath159 , the family @xmath160 is also aba - free .",
    "notice that adding back @xmath31 to @xmath32 is very similar to the operation of proposition  [ prop : insert ] , as @xmath31 is unskippable in @xmath33 .",
    "the only difference is that we might also have to add it to some further hyperedges , ending in or starting at @xmath31 . but a hyperedge that contains @xmath31 can not violate the aba - free condition with @xmath137 , since it also contains @xmath31 , so the corresponding hyperedges in @xmath32 would also violate the aba - free condition .",
    "notice that with the repeated application of lemma  [ prop : slack ] we can extend any aba - free hypergraph , such that in any set @xmath18 there is a vertex @xmath64 for which @xmath81 is a singleton hyperedge , implying that @xmath64 is unskippable in @xmath18 .",
    "thus in fact lemma  [ prop : slack ] is equivalent to lemma  [ lem : unskippable ] .",
    "moreover , in section  [ sec : pseudo ] , in the more general context of pseudohalfplanes , it will be the abstract equivalent of a known and important property of pseudohalfplanes .",
    "we prove another interesting property of aba - free hypergraphs before which we need the following definition .",
    "[ def : dual ] the dual of a hypergraph @xmath16 , denoted by @xmath161 , is such that its vertices are the hyperedges of @xmath16 and its hyperedges are the vertices of @xmath16 with the same incidences as in @xmath16 .",
    "[ prop : dual ] if @xmath132 is aba - free , then its dual @xmath162 is also aba - free ( with respect to some ordering of its vertices ) .",
    "take the partial order `` @xmath108 '' of the hyperedges of @xmath16 and extend this arbitrarily into a total order @xmath163 .",
    "we claim that @xmath162 is aba - free if its vertices are ordered with respect to @xmath163 . to check the condition , suppose for a contradiction that @xmath164 and @xmath165 and @xmath166 . without loss of generality ,",
    "suppose that @xmath47 .",
    "but in this case @xmath167 holds , contradicting @xmath168 .",
    "the hyperedges of every @xmath0-uniform aba - free hypergraph can be colored with @xmath1 colors , such that if a vertex @xmath31 is in a subfamily @xmath32 of at least @xmath11 of the hyperedges of @xmath33 , then @xmath32 contains a hyperedge from each of the @xmath1 color classes .",
    "any @xmath0-fold covering of a finite point set with the translates of an unbounded convex planar set is decomposable into @xmath1 coverings .",
    "here we extend a result of smorodinsky and yuditsky  @xcite . a _ pseudoline arrangement _ is a finite collection of simple curves in the plane such that any two are either disjoint or intersect once and in the intersection point they cross .",
    "we suppose that they are in general position , i.e. , no three curves have a common point .",
    "some well - known results about pseudoline arrangements are collected in appendix  [ app : facts ] , which can be found in @xcite .",
    "we also recommend @xcite where generalizations of classical theorems are proved for _ topological affine planes_. from these , it follows that the hypergraphs defined by points contained in pseudohalfplanes have the following structure .",
    "[ def : pseudo ] a hypergraph @xmath33 on an ordered set of points @xmath24 is called a _",
    "pseudohalfplane - hypergraph _ if there exists an aba - free hypergraph @xmath41 on @xmath24 such that @xmath169 .",
    "note that @xmath170 is also aba - free with the same ordering of the points .",
    "we refer to the hyperedges of a pseudohalfplane - hypergraph also as pseudohalfplanes .    using lemma  [ prop : slack ] on a hyperedge of a pseudohalfplane - hypergraph , we get the following .",
    "[ fact : szukit ] given a pseudohalfplane - hypergraph @xmath33 , and a hyperedge @xmath18 of @xmath33 , we can add a new hyperedge @xmath137 contained completely in @xmath18 that contains all but one of the points of @xmath18 , such that @xmath33 remains a pseudohalfplane - hypergraph .    in the geometric setting",
    "this corresponds to the known and useful fact that given a pseudohalfplane arrangement and a finite set of points @xmath18 contained in the pseudohalfplane @xmath17 , we can add a new pseudohalfplane @xmath171 contained completely in @xmath17 that contains all but one of the points of @xmath18 .",
    "now we show how to extend theorem  [ thm : aba ] to pseudohalfplane arrangements , i.e. , to the case when the points of @xmath24 _ below _ a line also define a hyperedge .",
    "[ thm : primalpshp ] given a finite set of points @xmath24 and a pseudohalfplane arrangement @xmath33 , we can color @xmath24 with @xmath1 colors such that any pseudohalfplane in @xmath33 that contains at least @xmath37 points of @xmath24 contains all @xmath1 colors .",
    "equivalently , the vertices @xmath24 of a pseudohalfplane - hypergraph can be colored with @xmath1 colors such that any hyperedge containing at least @xmath37 points contains all @xmath1 colors .",
    "the similar statement is not true for the union of two arbitrary aba - free hypergraphs ( instead of an aba - free hypergraph and its complement ) , as the union of two arbitrary aba - free hypergraphs might not be @xmath109-colorable , see @xcite for such a construction .",
    "[ app : primalpshp ] our proof is completely about the abstract setting , yet it translates naturally to the geometric setting , also the figures illustrate the geometric interpretations .    by definition",
    "there exists an aba - free @xmath41 such that @xmath172 .",
    "call @xmath173 the upsets and @xmath174 the downsets , observe that both @xmath175 and @xmath176 are aba - free .",
    "further , the unskippable vertices of @xmath175 ( resp .",
    "@xmath176 ) are called top ( resp .",
    "bottom ) vertices .",
    "the top and bottom vertices are called the unskippable vertices of @xmath33 .",
    "recall that by adding these unskippable vertices as one - element hyperedges to @xmath33 , @xmath33 remains to be a pseudohalfplane - hypergraph , as we can extend @xmath41 and @xmath170 with the appropriate hyperedge ( this is a convenient way of thinking about top / bottom vertices in the geometric setting , as seen later in the figures ) .",
    "[ obs : topindown ] if @xmath25 is top and @xmath27 is a downset and @xmath177 , then @xmath27 contains all vertices that are bigger or all vertices that are smaller than @xmath25 .",
    "the same holds if @xmath25 is bottom , @xmath27 is an upset and @xmath177 .",
    "[ lem : shallow ] if @xmath33 is a containment - free pseudohalfplane - hypergraph , then any minimal hitting set of @xmath16 that contains only unskippable vertices is @xmath109-shallow .",
    "let @xmath28 be a minimal hitting set of unskippable vertices .",
    "suppose for a contradiction that @xmath178 and @xmath62 for some @xmath179 . without loss of generality ,",
    "suppose that @xmath180 is top .",
    "as @xmath28 is minimal , let @xmath19 be a set for which @xmath181 . from observation  [ obs : topindown ]",
    "it follows that @xmath19 is an upset .",
    "first suppose that @xmath27 is an upset . as @xmath182 ,",
    "take a @xmath183 .",
    "as @xmath19 and @xmath27 are both upsets and thus have the aba - free property , we have @xmath184 or @xmath185 . without loss of generality",
    ", we can suppose @xmath185 .",
    "if @xmath6 is top , @xmath186 and @xmath19 violate aba - freeness . see figure  [ fig : cnottop ] . if @xmath6 is bottom , then using observation  [ obs : topindown ] , @xmath27 contains all the vertices that are smaller than @xmath6 .",
    "take a set @xmath187 for which @xmath188 .",
    "this set must contain an @xmath189 and so we must have @xmath190 . if @xmath18 is an upset , as it does not contain @xmath180 and recall @xmath191 , @xmath18 and @xmath192 violate aba - freeness .",
    "see figure  [ fig : anotupset ] .",
    "if @xmath18 is a downset , as it does not contain @xmath6 and recall @xmath193 , @xmath18 and @xmath186 violate aba - freeness , both cases lead to a contradiction .",
    "the case when @xmath27 is a downset is similar .",
    "using observation  [ obs : topindown ] for @xmath27 and @xmath192 we can suppose without loss of generality that @xmath27 contains all vertices that are smaller than @xmath180 .",
    "take a set @xmath187 for which @xmath188 and an @xmath189 .",
    "as @xmath27 contains all vertices smaller than @xmath180 , we have @xmath194 .",
    "@xmath18 can not be an upset , as then it would contain @xmath180 , so it is a downset .",
    "if @xmath195 , then @xmath18 and @xmath27 would violate aba - freeness , thus we must have @xmath190 .",
    "this means @xmath6 can not be bottom , so it is top . using observation  [ obs : topindown ] , @xmath27 contains all the vertices that are smaller than @xmath6 .",
    "but then @xmath196 must have an element that is bigger than @xmath6 , contradicting the aba - freeness of @xmath19 and @xmath186 .",
    "it is easy to see that being a pseudohalfplane hypergraph is a hereditary property .",
    "thus , lemma  [ lem : shallow ] implies that all the assumptions of theorem  [ algo : sy ] hold with @xmath134 to get a polychromatic @xmath1-coloring as required .",
    "this finishes the proof of theorem  [ thm : primalpshp ] .",
    "we are also interested in coloring pseudohalfplanes with @xmath1 colors such that all points that are covered many times will be contained for each @xmath1 colors in a pseudohalfplane of that color .",
    "for example , we can also generalize the dual result about coloring halfplanes of @xcite to pseudohalfplanes .",
    "[ thm : dualpshp ] given a pseudohalfplane arrangement @xmath33 , we can color @xmath33 with @xmath1 colors such that if a point @xmath34 belongs to a subset @xmath35 of at least @xmath197 of the pseudohalfplanes of @xmath33 , then @xmath35 contains a pseudohalfplane of every color .",
    "theorem  [ thm : dualpshp ] follows from theorem  [ thm : shitting ] , that we will state and prove later .",
    "however , instead of coloring pseudohalfplanes , we stick to coloring points with respect to pseudohalfplanes and work with _ dual hypergraphs _ , where the vertex - hyperedge incidences are preserved , but vertices become hyperedges and hyperedges become vertices . since we have already seen in section  [ sec : pseudo ] the equivalence of our abstract definition and the standard definition of a pseudohalfplane arrangement , we can use the well - known properties of the dual arrangement ( see , e.g. , @xcite ) to obtain the following .",
    "[ prop : dual2x ] a _ dual pseudohalfplane - hypergraph _ is a hypergraph @xmath33 on an ordered set of vertices @xmath24 such that there exists a set @xmath198 and an aba - free hypergraph @xmath199 on @xmath24 such that the hyperedges of @xmath33 are the hyperedges @xmath200 for every @xmath201 .",
    "using definition  [ def : pseudo ] , let @xmath41 be an aba - free hypergraph that represents the original pseudohalfplane - hypergraph , that is , every pseudohalfplane is equal to a set @xmath202 or to a set @xmath203 . using proposition  [ prop : dual ]",
    ", the dual of @xmath41 is an aba - free hypergraph , @xmath204 , whose vertices @xmath205 correspond to the hyperedges of @xmath41 ( ordered in the way given by proposition  [ prop : dual ] ) and whose hyperedges @xmath206 correspond to the vertices of @xmath41 , with incidence relations preserved , i.e. , @xmath207 .",
    "now we add also the set of vertices @xmath208 corresponding to the hyperedges of @xmath170 . each vertex @xmath209 is put right after vertex @xmath210 in the order .",
    "the hyperedges change in the following way . as in @xmath41",
    "we have @xmath211 if and only if @xmath212 , in the dual the corresponding hyperedge is @xmath213 , which contains exactly one of @xmath210 and @xmath209 for every @xmath39 .",
    "first , without loss of generality , we can suppose that for every @xmath214 , @xmath33 contains at least one of @xmath214 and @xmath215 , otherwise we can delete @xmath18 from @xmath41 too .",
    "further , we can suppose that @xmath33 contains exactly one of @xmath214 and @xmath215 , as if it contains both , we can add another copy @xmath137 of @xmath18 to @xmath41 ( @xmath41 is then a(n aba - free ) multihypergraph ) and regard @xmath216 as @xmath217 .",
    "this way it can never happen that both @xmath78 and @xmath218 , thus in the dual only one of the corresponding vertices are present .",
    "thus , we can relabel to @xmath219 the one vertex that is present in @xmath33 among @xmath220 and @xmath221 .",
    "after the relabeling we have @xmath222 .",
    "denote by @xmath27 the set of vertices of @xmath223 for which @xmath224 .",
    "now an arbitrary hyperedge @xmath225 , where @xmath226 denotes the symmetric difference of two sets and @xmath227 , i.e. , @xmath228 injected in the natural way into the relabeled set @xmath223 .",
    "these @xmath229 define the same ( up to this projection ) aba - free hypergraph as @xmath204 , the dual of @xmath41 .",
    "now we define a common generalization of the primal and dual definitions .",
    "[ def : signedpseudo ] a _ pseudohalfsphere - hypergraph _ is a hypergraph @xmath33 on an ordered set of vertices @xmath24 such that there exists a set @xmath198 and an aba - free hypergraph @xmath199 on @xmath24 such that the hyperedges of @xmath33 are some subset of @xmath230 .",
    "it is easy to see that the dual of such a pseudohalfsphere - hypergraph is also a pseudohalfsphere - hypergraph , just like in proposition  [ prop : dual ] .",
    "furthermore , there is a nice geometric representation of such hypergraphs using _ pseudohalfsphere arrangements _ , a generalization of halfsphere arrangements on a sphere .    in a pseudohalfsphere arrangement",
    "the pseudohalfspheres are regions whose boundaries are centrally symmetric simple curves such that any two intersect exactly twice .",
    "( for more on pseudohalfsphere arrangements , see , e.g. , @xcite . ) without changing the combinatorial properties of the arrangement , we can suppose that the boundary of one of the pseudohalfspheres is the equator .",
    "using a stereographic projection from the center of the sphere such that this pseudohalfsphere is mapped to a whole plane , the other pseudohalfspheres are mapped to pseudohalfplanes .",
    "thus , we can conclude that @xmath33 is a pseudohalfsphere - hypergraph if and only if there is a set of points , @xmath24 , on the surface of a sphere and a _ pseudohalfsphere arrangement _",
    "@xmath41 on the sphere such that the incidences among @xmath24 and @xmath41 give @xmath33 .",
    "( here @xmath27 corresponds to the points on the southern hemisphere and @xmath231 to the points on the northern hemisphere . )    another popular geometric representation on the plane , adding _ signs _ to lines and points , is the following .",
    "the vertices correspond to a set of points in the plane together with a direction ( up or down ) , and the hyperedges correspond to a set of ( x - monotone ) pseudolines with a sign ( @xmath232 or @xmath233 ) .",
    "the hyperedge corresponding to a positive pseudoline is the set of points that point _ towards _ the pseudoline , while the hyperedge corresponding to a negative pseudoline is the set of points that point _",
    "away _ from the pseudoline .",
    "positive pseudolines correspond to @xmath41 , negative pseudolines to @xmath234 , up points correspond to @xmath27 and down points correspond to @xmath235 . with this interpretation ,",
    "aba - free hypergraphs have only + and up signs , pseudohalfplane - hypergraphs have @xmath236 and up signs , dual pseudohalfplane - hypergraphs have + and up / down signs . in the next table",
    "we summarize the best known results about these hypergraphs , with respect to how many points each hyperedge has to contain to have a polychromatic @xmath1-coloring and the values of the smallest @xmath6 for which there exists a @xmath6-shallow hitting set for containment - free families .     & & + aba - free hypergraphs & @xmath237 ( theorem  [ thm : aba ] ) & @xmath109 ( lemma  [ lem : spshallow ] ) & & + pseudohalfplane - hypergraphs & @xmath37 ( theorem  [ thm : primalpshp ] ) & @xmath109 ( lemma  [ lem : shallow ] ) & & + dual pseudohalfplane - hypergraphs & @xmath238 ( theorem  [ thm : dualpshp ] ) & @xmath239 ( theorem  [ thm : shitting ] ) & & + pseudohalfsphere - hypergraphs & @xmath240 ( corollary  [ cor : sphere ] ) & @xmath241 ( theorem  [ thm : shitting ] ) & & +    we conjecture that even containment - free pseudohalfsphere arrangements have a @xmath109-shallow hitting set , which would also imply , using theorem  [ algo : sy ] , that any family whose sets have size at least @xmath37 admits a polychromatic @xmath1-coloring .",
    "as we can find a polychromatic @xmath1-coloring of the points of @xmath27 and @xmath235 independently with respect to the sets of @xmath41 and @xmath234 , respectively , of size at least @xmath37 using theorem  [ thm : primalpshp ] , the following is true .",
    "[ cor : sphere ] given a finite set of points @xmath24 on the sphere and a pseudohalfsphere arrangement @xmath33 , we can color @xmath24 with @xmath1 colors such that any pseudohalfsphere in @xmath33 that contains at least @xmath242 points of @xmath24 contains all @xmath1 colors .",
    "equivalently , the vertices @xmath24 of a pseudohalfsphere - hypergraph can be colored with @xmath1 colors such that any hyperedge containing at least @xmath242 points contains all @xmath1 colors .    to finish , we first prove the following theorem , which , using theorem  [ algo : sy ] , will imply theorem  [ thm : dualpshp ] , and also provides another proof for corollary  [ cor : sphere ] .",
    "[ thm : shitting ] every containment - free dual pseudohalfplane - hypergraph has a @xmath243-shallow hitting set and every containment - free pseudohalfsphere - hypergraph has a @xmath244-shallow hitting set .",
    "the proof of this result follows again closely the argument of @xcite .",
    "we note that the next few statements can also be proved using the geometric representation , but here we develop further our completely abstract approach .",
    "the reason for this is to demonstrate the power of our method , hoping that in the future it enables attacking completely different problems as well .",
    "[ lem : pushbackaba][lem : pushback]suppose @xmath41 is an aba - free hypergraph on an ordered vertex set @xmath245 such that the vertices in @xmath246 precede the ones in @xmath247 .",
    "then @xmath248 is an aba - free hypergraph on the vertices ordered as @xmath249 , i.e. , @xmath247 precedes @xmath246 but otherwise the order inside @xmath246 and @xmath247 is unchanged .",
    "moreover , if @xmath41 and @xmath198 define a pseudohalfsphere - hypergraph @xmath33 , i.e. , the hyperedges of @xmath33 are @xmath250 and @xmath251 , then @xmath252 and @xmath253 also define the same ( if unordered ) pseudohalfsphere - hypergraph @xmath136 .",
    "it is enough to show the statement if @xmath254 , as then by induction we can proceed with the vertices of @xmath255 one by one .",
    "let us denote the original order by @xmath108 and the new one by @xmath256 .",
    "it is enough to show that for any @xmath257 we have no aba - sequence in @xmath258 according to the order @xmath256 .",
    "we will only use that there is no aba - sequence in @xmath259 according to @xmath108 . denote the only element of @xmath246 by @xmath260 . if @xmath261 , then @xmath38 is unchanged by the transformation , thus an aba - sequence in @xmath262 according to @xmath256 would also be an aba - sequence in @xmath259 according to @xmath108 , a contradiction . thus , without loss of generality , @xmath22 and so @xmath263 . an aba - sequence in @xmath262 according to @xmath256 not containing @xmath260",
    "would be an aba - sequence also in @xmath259 according to @xmath108 .",
    "otherwise , if three vertices @xmath264 form an aba - sequence in @xmath262 , then the three vertices @xmath265 form an aba - sequence in @xmath266 , a contradiction .    for the moreover part , notice that as @xmath267 , the hyperedges of @xmath33 and @xmath136 are indeed the same .",
    "lemma  [ lem : pushbackaba ] suggests that instead of our linear ordering of the vertices , we could consider them in circular order .",
    "indeed , let the vertices be points in a circle , where for every vertex the point opposite it on the circle is also a vertex , called its negated pair .",
    "now take a hypergraph on such a circular point set which contains exactly one point from each opposite pair and is _ circular abab - free _ , that is , it does not contain two sets , @xmath18 and @xmath19 , and four points , @xmath268 , that are in this order around the circle for which @xmath269 and @xmath270 .",
    "it is easy to see that such a hypergraph is also circular ababab - free , and restricting it to any consecutive subset of half of the vertices is an aba - free hypergraph with the same ( non - circular ) order .",
    "for example , @xmath271 would be the circular order , where the original base set is @xmath272 , and a set would be @xmath273 . after we apply lemma  [ lem : pushbackaba ] with @xmath274 ,",
    "the `` new '' base set becomes @xmath275 .",
    "our earlier results could be translated to this abstraction as well , which models the above rotational symmetry of pseudohalfspheres in a more natural way .",
    "however , further statements we prove are still non - trivial even in this model , so we will stick with our original linear ordering of the vertices .",
    "[ lem : helly][helly s theorem for pseudohalfplanes ] if any three hyperedges of a pseudohalfplane - hypergraph intersect , then we can add a vertex contained in all pseudohalfplanes of the arrangement .",
    "we prove the dual statement , as it will be more convenient .",
    "that is , suppose that we are given a pseudohalfsphere - hypergraph @xmath33 , such that all its hyperedges are derived from @xmath41 , i.e. , @xmath33 has a representing aba - free @xmath41 and vertex set @xmath198 such that for every @xmath276 there is an @xmath277 such that @xmath278 .",
    "we need to show that if for any three vertices there exists a hyperedge that contains all three of them , then we can add the hyperedge @xmath279 to @xmath41 such that it stays aba - free .",
    "this is indeed the dual equivalent of the statement , as @xmath280 contains all the vertices . for a contradiction , suppose that @xmath235 and some @xmath277 violate aba - freeness because of some vertices @xmath281 .",
    "by our assumption , there exists another hyperedge @xmath282 which contains all of @xmath281 , thus @xmath283 and @xmath235 contain the same subset of @xmath281 .",
    "thus @xmath284 contain an aba - sequence on the vertices @xmath281 as @xmath285 contains an aba - sequence on @xmath281 , a contradiction .",
    "applying this to the complements of the pseudohalfplanes we get the following .",
    "[ cor : hellycor ] given a pseudohalfplane - hypergraph , either there are already three hyperedges that cover all the vertices , or we can add a vertex which is in none of the hyperedges .    now we show that reordering the vertices in an appropriate way keeps the ordered hypergraph aba - free .",
    "[ lem : pushfront]suppose @xmath41 is an ordered aba - free hypergraph on vertex set @xmath24 .",
    "let @xmath277 be a smallest hyperedge in the partial ordering of the hyperedges of @xmath41 .",
    "if we reorder @xmath24 as @xmath286 , i.e. , the vertices of @xmath39 go to the front but otherwise the order inside @xmath39 and @xmath40 is unchanged , then the ordered hypergraph remains aba - free .",
    "let us denote the original order by @xmath108 and the new one by @xmath256 .",
    "suppose on the contrary , that for some @xmath287 we have some @xmath288 and @xmath49 that satisfy @xmath289 .",
    "the proof is a simple case analysis of how this could happen .",
    "notice that @xmath290 implies @xmath291 and @xmath291 implies @xmath292 , so there are four cases . if @xmath293 or @xmath294 , then @xmath62 . in this case @xmath18 and @xmath19 contradict that @xmath41 is aba - free . if @xmath292 and @xmath295 , then we must have @xmath50 . in this case",
    "@xmath296 , contradicting that @xmath39 is smallest .",
    "if @xmath297 and @xmath298 , then we must have @xmath299 . in this case",
    "@xmath300 , contradicting that @xmath39 is smallest .    if @xmath301 and @xmath302 , then in any reordering of @xmath24 where the elements of the hyperedge @xmath303 go to front ( i.e. , in @xmath304 and @xmath305 ) aba - freeness is violated .",
    "this shows that in the above lemma  [ lem : pushfront ] the assumption that @xmath39 is a smallest hyperedge can not be removed .",
    "we might hope that the lemma can be modified to remain true for all hyperedges by first applying lemma  [ lem : pushback ] for an appropriate prefix set of the points , however this is also not possible . consider the aba - free hypergraph @xmath306 and define @xmath307 for any @xmath308 . in this case",
    "there is no @xmath27 for which there is a reordering of @xmath24 that starts with the elements of @xmath309 and for which @xmath310 is aba - free with this new order .",
    "[ lem : polar]if all the hyperedges of a pseudohalfsphere - hypergraph @xmath33 avoid some vertex @xmath34 in @xmath24 , then @xmath311 , the dual hypergraph of @xmath33 , is a pseudohalfplane - hypergraph .",
    "start with a representation of @xmath33 : an aba - free hypergraph @xmath41 and a point set @xmath27 such that @xmath312 .",
    "apply lemma  [ lem : pushback ] with @xmath246 being the vertices before @xmath34 , this way we get a representation of @xmath33 in which @xmath34 is the first point .",
    "take @xmath311 , the dual of @xmath33 , with representation @xmath313 and @xmath314 . in @xmath311 ,",
    "the set corresponding to @xmath34 is @xmath315 for some @xmath316 , where we can choose the representation such that @xmath317 is the smallest set of @xmath318 ( as @xmath34 was the smallest point of @xmath41 ) .",
    "now apply lemma  [ lem : pushfront ] to get another representation of @xmath319 in which the points of @xmath317 are at the beginning in the order . as @xmath34 was a point that was in none of the hyperedges of @xmath33 ,",
    "in the dual @xmath320 contains no points and so @xmath321 .",
    "now apply again lemma  [ lem : pushback ] to @xmath318 with @xmath322 .",
    "we get a representation @xmath323 of @xmath319 in which @xmath324 , that is , @xmath319 is a pseudohalfplane - hypergraph .",
    "applying lemma [ lem : polar ] to the dual of a pseudohalfsphere - hypergraph we get the following dual statement :    [ cor : polar]if the empty set is ( or can be added as ) a hyperedge of a pseudohalfsphere - hypergraph @xmath33 , then @xmath33 is a pseudohalfplane - hypergraph .",
    "[ lem : helly2][helly s theorem for pseudohalfspheres ] if any four hyperedges of a pseudohalfsphere - hypergraph intersect , then we can add a vertex contained in all pseudohalfspheres of the arrangement .",
    "let @xmath33 be defined by @xmath199 and @xmath198 .",
    "we prove the following stronger statement .",
    "if there is a pseudohalfsphere @xmath325 that has a non - empty intersection with any three other pseudohalfspheres , then we can add a vertex contained in all the pseudohalfspheres of the arrangement .",
    "let @xmath326 and denote by @xmath136 the pseudohalfsphere - hypergraph defined on @xmath24 by @xmath199 and @xmath327 .",
    "as @xmath328 contains all the points , we can apply corollary  [ cor : polar ] to @xmath136 and the complement of @xmath329 to conclude that @xmath136 is a pseudohalfplane - hypergraph .",
    "it follows from our definitions that the hyperedges in @xmath33 and @xmath136 are in bijection such that for every @xmath330 there is an @xmath331 ( and vice versa ) such that @xmath332 .",
    "next , we prove that in @xmath136 any three pseudohalfspheres intersect .",
    "suppose that the original intersection point of these pseudohalfspheres with @xmath333 in @xmath33 was some @xmath334 , where @xmath335 for @xmath336 .",
    "this implies @xmath337 or @xmath338 . in the first case , @xmath339 and @xmath340 . in the second case , @xmath341 and @xmath340 .    therefore , any three pseudohalfplanes of @xmath136 intersect .",
    "using lemma  [ lem : helly ] for the pseudohalfplane - hypergraph representation of @xmath136 , we can add a new point @xmath342 to all the hyperedges of @xmath136 .",
    "denote this new pseudohalfplane - hypergraph by @xmath343 , and let @xmath344 and @xmath345 ( note that @xmath346 ) .",
    "the hypergraph @xmath347 on the base set @xmath348 is also a pseudohalfsphere - hypergraph .",
    "moreover , we claim that it is the same as @xmath349 , which proves the lemma .",
    "indeed , recall that each hyperedge @xmath330 is in bijection with a hyperedge @xmath331 with @xmath350 .",
    "thus , each hyperedge @xmath351 is in bijection with the corresponding @xmath352 .",
    "this implies that @xmath353=\\{@xmath354 .    applying this to the complements of the pseudohalfspheres we get the following .",
    "[ cor : hellycor2 ] given a pseudohalfsphere - hypergraph , either there are four hyperedges that cover all the vertices , or we can add a vertex which is in none of the hyperedges .",
    "now we are ready to prove theorem  [ thm : shitting ] .",
    "first we prove that every containment - free dual pseudohalfplane - hypergraph @xmath104 has a @xmath243-shallow hitting set .",
    "consider the dual of @xmath104 , the pseudohalfplane - hypergraph @xmath355 .",
    "if in @xmath355 there is a set of at most @xmath243 hyperedges covering every point , then in @xmath104 the corresponding @xmath243 vertices form a @xmath243-shallow hitting set .",
    "otherwise , by corollary  [ cor : hellycor ] we could add a point to @xmath356 that is in none of the pseudohalfplanes .",
    "in this case , by lemma  [ lem : polar ] the dual of @xmath355 , which is actually @xmath104 itself , is a pseudohalfplane - hypergraph ( note that we do not include the empty hyperedge that would be the dual of the newly added point ) . by lemma  [ lem : shallow ]",
    "it has a @xmath109-shallow hitting set , which is also a @xmath243-shallow hitting set .",
    "this finishes the proof of the first statement of theorem  [ thm : shitting ] .",
    "now we can similarly prove that every containment - free pseudohalfsphere - hypergraph has a @xmath244-shallow hitting set .",
    "let @xmath104 be this hypergraph and take again its dual , @xmath355 . if there is a set of at most @xmath244 hyperedges covering every point in @xmath356 , then in @xmath104 the corresponding @xmath244 vertices form a @xmath244-shallow hitting set",
    "otherwise , by corollary  [ cor : hellycor2 ] we could again add a point to @xmath355 that is in none of the pseudohalfplanes . as before this and",
    "lemma  [ lem : polar ] imply that @xmath104 is a pseudohalfplane - hypergraph and thus by lemma  [ lem : shallow ] it has a @xmath109-shallow hitting set .",
    "being a dual pseudohalfplane hypergraph and being a pseudohalfsphere hypergraph are hereditary properties .",
    "thus , theorem  [ thm : shitting ] implies that all the assumptions of theorem  [ algo : sy ] hold with @xmath357 and @xmath358 , respectively , to get the polychromatic colorings required .",
    "definition  [ def : aba ] can be generalized in a straightforward way , similarly to davenport - schinzel sequences @xcite , to more alternations .",
    "our goal in this section is to show that already one more alternation gives non - two - colorable hypergraphs .",
    "[ def : abab ] a hypergraph @xmath16 with an ordered vertex set is called _ abab - free _",
    "if @xmath17 does not contain two hyperedges @xmath18 and @xmath19 for which there are four vertices @xmath359 such that @xmath360 and @xmath361 .",
    "a hypergraph with an unordered vertex set is abab - free if its vertices have an ordering with which the hypergraph is abab - free .",
    "we remark that similarly to proposition  [ prop : abaequipseudoline ] , an abab - free hypergraph corresponds to an arrangement of graphic curves that intersect at most twice .",
    "we show that there are abab - free hypergraphs that do not have a proper @xmath109-coloring .",
    "we prove this by ordering the vertices of a non-@xmath109-colorable hypergraph @xmath362 in a tricky way to give an abab - free hypergraph .",
    "first we define this hypergraph @xmath362 often used in counterexamples , e.g. , @xcite .    ]     and its realization with pseudoparabolas ( for @xmath363 ) ]    let @xmath364 be the complete @xmath1-ary tree of depth @xmath1 , i.e. , the rooted tree such that its root @xmath124 has @xmath1 children , each vertex of @xmath364 in distance at most @xmath365 from @xmath124 has @xmath1 children and the vertices in distance @xmath127 from @xmath124 are the leafs ( without children ) .",
    "@xmath362 is the @xmath1-uniform hypergraph which has two types of hyperedges .",
    "first , for every non - leaf vertex the set of its children form an hyperedge .",
    "second , the vertices of every descending path starting in @xmath124 and ending in a leaf form an hyperedge .",
    "it is easy to see that @xmath362 is not two - colorable .",
    "now we show how to realize @xmath362 such that its vertices correspond to points in the plane and its hyperedges correspond to the points _ above _ pseudoparabolas ( simple curves such that any two intersect at most _ twice _ ) .",
    "this implies that the @xmath25-coordinates define an ordering of the vertices of @xmath362 showing that @xmath362 is abab - free .",
    "we fix @xmath1 and define @xmath366 ( resp .",
    "@xmath367 ) to be the hypergraph ( resp . graph ) induced by @xmath362 ( resp .",
    "@xmath364 ) and the subset of the vertices that are in distance at most @xmath368 from the root @xmath124 in @xmath364 ( @xmath366 is a simple hypergraph , i.e. , if multiple hyperedges induce the same hyperedge , we take it only once ) .",
    "thus in particular @xmath369 has one vertex and no hyperedges while @xmath370 has one vertex and one hyperedge containing it , while @xmath371 and @xmath372 .",
    "note that in @xmath367 every non - leaf vertex has @xmath1 children , and @xmath366 has hyperedges of size @xmath123 corresponding to descending paths ( which we usually denote by @xmath373 for some @xmath129 ) and hyperedges of size @xmath1 corresponding to the set of children of some vertex ( which we usually denote by @xmath374 for some @xmath129 ) .",
    "see figure  [ fig1 ] .    in our realization , to simplify the presentation ,",
    "points corresponding to vertices will be denoted with the same label , and similarly hyperedges and the corresponding pseudoparabolas will have the same label .    :",
    "adding @xmath1 children to a leaf ]    we will recursively realize @xmath366 , for an illustration see figure  [ fig3 ] .",
    "we additionally maintain that each hyperedge ( pseudoparabola ) @xmath373 corresponding to a descending path has a vertical strip @xmath375 associated to it , such that inside @xmath375 there are no points and @xmath373 has the lowest boundary ( thus no other hyperedge intersects @xmath373 inside @xmath375 ) . for @xmath376 ,",
    "this is trivial to do as @xmath370 has one vertex and one hyperedge containing this vertex . for @xmath377 ,",
    "figure  [ fig2 ] shows a way to achieve this ( for @xmath363 ) .",
    "now suppose that for some @xmath123 we have @xmath366 and we want to construct @xmath378 .",
    "take the construction of @xmath366 , and for each hyperedge @xmath373 corresponding to a descending path @xmath379 with endvertex @xmath380 , do the following .",
    "first make @xmath1 vertically translated copies of @xmath373 very close to each other .",
    "denote these by @xmath381 .",
    "next , using these @xmath1 copies of @xmath373 , realize @xmath382 ( except the root @xmath124 ) in an appropriately small area inside @xmath375 , by adding @xmath1 more points @xmath383 such that for every @xmath129 , @xmath384 is above @xmath385 and below every other pseudoparabola .",
    "these points correspond to the children of @xmath380 .",
    "finally , define the pseudoparabola @xmath374 , which corresponds to the hyperedge containing all the @xmath384 s but no other vertex , as a parabola very close to the vertical strip containing the @xmath384 s . for each @xmath129 , the vertical strip that belongs to @xmath385 in the inner copy of @xmath382",
    "is the strip corresponding to the descending hyperedge that ends at @xmath384",
    ". therefore all properties are maintained , and by repeating the above procedure for each of the leafs @xmath380 of @xmath366 we get a realization of @xmath378 .",
    "we are not aware of any nice characterization for the dual of abab - free hypergraphs , like we had for aba - free hypergraphs in proposition  [ prop : dual ] .",
    "every hypergraph given by a set of points and a collection of bottomless rectangles is abab - free , but not necessarily aba - free . in fact , it is not hard to see that such hypergraphs would correspond exactly to `` abab''-free hypergraphs , which can be defined similarly to definition  [ def : aba ] as follows .",
    "a hypergraph whose vertices are real numbers is _",
    "if for any two of its hyperedges , @xmath18 and @xmath19 , and vertices @xmath387 it does _ not _ hold that @xmath388 , @xmath389 , @xmath390 , @xmath391 .",
    "it was shown in @xcite that any finite set of points can be colored with @xmath1 colors such that any bottomless rectangle that contains at least @xmath197 points contains a point of every color .",
    "unfortunately , we were not able to prove this using our methods , because containment - free bottomless rectangle families do not have a shallow hitting set , as shown by the following example .",
    "[ ex : shallow ] consider the set of points @xmath392 and @xmath393 and the bottomless rectangle family that consists of the following .    1 .   a rectangle @xmath394 containing @xmath27",
    ". 2 .   a rectangle @xmath395 containing @xmath246 .",
    "3 .   rectangles @xmath373 containing @xmath396 and @xmath397 for @xmath398 .",
    "any hitting set for the @xmath373 rectangles contains @xmath399 points from @xmath27 or @xmath246 , thus it is not @xmath400-shallow for @xmath394 or @xmath395 ( for an illustration for @xmath401 see figure  [ fig : blessnotshallow ] ) .    instead of shallow hitting sets",
    ", we can ask whether a @xmath1-coloring exists for any containment - free bottomless rectangle family that satisfies a certain nice property , that can be achieved by repeatedly finding @xmath6-shallow hitting sets and making each of them a separate color class . in the proofs in earlier sections ,",
    "after @xmath1 shallow hitting sets were found and colored to different colors , we did not care about the remaining points , they were colored arbitrarily .",
    "instead , we could find a @xmath402-st shallow hitting set for the remaining points and use the first color for them , then the second color for the @xmath403-nd shallow hitting set , and so on , until there are no more points left .",
    "in general in the @xmath129-th step the shallow hitting set is colored with color @xmath129 ( mod @xmath1 ) , where color @xmath404 and color @xmath1 denote the same color .",
    "this way we achieve a coloring that is not just polychromatic , but also has the following _ balanced _ property .",
    "[ def : balanced ] we say that a @xmath1-coloring is _",
    "@xmath6-balanced _ if for any given set ( hyperedge ) of our family denoting the sizes of any two color classes in it by @xmath405 and @xmath406 , then we have @xmath407 .",
    "as we have seen above , if a family has a @xmath6-shallow hitting set , then it also has a @xmath6-balanced @xmath1-coloring for any @xmath1 . for uniform families",
    ", a converse also holds ; if every set has size @xmath45 , then any color class of a @xmath6-balanced @xmath408-coloring is a @xmath409-shallow hitting set . for non - uniform families , however , these notions might differ , so it is natural to ask the following .",
    "[ prob : balanced ] is there a balanced coloring for any family of bottomless rectangles ?",
    "example  [ ex : shallow ] generalizes easily to other families , such as the translates or homothets of a convex polygon , so there is not much hope to achieve shallow hitting sets for other interesting planar families . we do not , however , know whether a balanced coloring exists for the above families .",
    "we would like to thank the anonymous referees of the conference version of this paper ( to appear in the proceedings of wg 2015 ) for their several useful suggestions and comments .",
    "99    a. asinowski , j. cardinal , n. cohen , s. collette , t. hackl , m. hoffmann , k. knauer , s. langerman , m. lason , p. micek , g. rote , t. ueckerdt , coloring hypergraphs induced by dynamic point sets and bottomless rectangles , algorithms and data structures lecture notes in computer science * 8037 * ( 2013 ) , 7384 .",
    "a. bjrner , m. las vergnas , b. sturmfels , n. white , g. ziegler , oriented matroids , encyclopedia of mathematics and its applications * 46 * cambridge university press ( 1999 ) .",
    "j. cardinal , k. knauer , p. micek , t. ueckerdt , making triangles colorful , j. comput .",
    "* 4 * ( 2013 ) , 240246 .",
    "j. cardinal , k. knauer , p. micek , t. ueckerdt , making octants colorful and related covering decomposition problems , proceedings of soda 2014 , 14241432 .",
    "x. chen , j. pach , m. szegedy , g. tardos , delaunay graphs of point sets in the plane with respect to axis - parallel rectangles , proceedings of soda 2008 , 94101 .",
    "h. davenport , a. schinzel , a combinatorial problem connected with differential equations , american journal of mathematics ( the johns hopkins university press ) * 87(3 ) * ( 1965 ) , 684694 .",
    "r. dhandapani , j.e .",
    "goodman , a. holmsen , r. pollack , s. smorodinsky , convexity in topological affine planes , discrete and comput .",
    "geom ( dcg ) * 38 * ( 2007 ) , 243257 .",
    "r. fulek , coloring geometric hypergraph defined by an arrangement of half - planes , proceedings of cccg 2010 , 7174 .",
    "m. gibson and k. varadarajan , decomposing coverings and the planar sensor cover problem , proceedings of focs 2009 , 159168 .",
    "d. haussler , e. welzl , epsilon - nets and simplex range queries , discrete and computational geometry * 2 * ( 1987 ) , 127151 .",
    "b. keszegh , weak conflict free colorings of point sets and simple regions , proceedings of cccg 2007 , 97100 .",
    "b. keszegh , coloring half - planes and bottomless rectangles , computational geometry : theory and applications * 45(9 ) * elsevier ( 2012 ) , 495507 .",
    "b. keszegh , d. plvlgyi , octants are cover decomposable , discrete and computational geometry * 47(3 ) * ( 2012 ) , 598609 .",
    "b. keszegh , d. plvlgyi , octants are cover decomposable into many coverings , computational geometry theory and applications , * 47(5 ) * ( 2014 ) , 585588 .",
    "b. keszegh , d. plvlgyi , convex polygons are self - coverable , discrete and computational geometry , * 51(4 ) * ( 2014 ) , 885895 .",
    "b. keszegh , d. plvlgyi , more on decomposing coverings by octants , journal of computational geometry * 6 * ( 2015 ) , 300315 .",
    "j. komls , j. pach , and g. j. woeginger , almost tight bounds for epsilon - nets , discrete and computational geometry , * 7 * ( 1992 ) , 163173 .",
    "i. kovcs , indecomposable coverings with homothetic polygons , arxiv:1312.4597 .",
    "j. pach , d. plvlgyi , g. tth , survey on decomposition of multiple coverings , geometry ",
    "intuitive , discrete , and convex ( i. brny , k. j. brczky , g. fejes tth , j. pach eds . ) , bolyai society mathematical studies * 24 * springer - verlag ( 2014 ) , 219257 .",
    "j. pach , g. tardos , coloring axis - parallel rectangles , journal of combinatorial theory , series a * 117(6 ) * ( 2010 ) , 776782 .",
    "j. pach , g. tardos , g. tth , indecomposable coverings , canadian mathematical bulletin * 52 * ( 2009 ) , 451463 .",
    "d. plvlgyi , indecomposable coverings with concave polygons , discrete and computational geometry , * 44(3 ) * ( 2010 ) , 577588 .",
    "d. plvlgyi , decomposition of geometric set systems and graphs , phd thesis ( 2010 ) , arxiv:1009.4641 .",
    "d. plvlgyi , indecomposable coverings with unit discs ( 2013 ) , arxiv:1310.6900 .",
    "d. plvlgyi and g. tth , convex polygons are cover - decomposable , discrete and computational geometry , * 43(3 ) * ( 2010 ) , 483496 .",
    "s. smorodinsky , conflict - free coloring and its applications , geometry  intuitive , discrete , and convex ( i. brny , k. j. brczky , g. fejes tth , j. pach eds . ) , bolyai society mathematical studies * 24 * springer - verlag ( 2014 ) .",
    "s. smorodinsky and y. yuditsky , polychromatic coloring for half - planes , journal of combinatorial theory , series a * 119(1 ) * ( 2012 ) , 146154 .",
    "g. j. woeginger , epsilon - nets for halfplanes , in proceeding of the 14th international workshop on graph - theoretic concepts in computer science ( wg 88 ) ( 1988 ) , 243252 .",
    "an _ infinite _ pseudoline arrangement is such that cutting a pseudoline in two , both parts are unbounded .",
    "a curve is _ graphic _ if it is the graph of a function , i.e. , an @xmath25-monotone infinite curve that intersects every vertical line of the plane .",
    "a _ graphic _ pseudoline arrangement is such that every curve is graphic .",
    "we say that two pseudoline arrangements are _ equivalent _ if there is a bijection between their pseudolines such that the order in which a pseudoline intersects the other pseudolines remains the same .",
    "a _ pseudohalfplane arrangement _ is an infinite pseudoline arrangement , with a side of each pseudoline selected ( note that the two sides of a pseudoline are well - defined regions in this case ) .",
    "* facts about pseudoline arrangements *    1 .",
    "( levi enlargement lemma ) given a pseudoline arrangement , any two points of the plane can be connected by a new pseudoline ( if they are not connected already ) .",
    "2 .   given a pseudoline arrangement",
    ", we can find a(n infinite ) pseudoline arrangement in which every pair of pseudolines intersects exactly once , and the order in which a pseudoline intersects the other pseudolines remains the same ( ignoring the new intersections ) .",
    "3 .   given an infinite pseudoline arrangement , we can find an equivalent graphic pseudoline arrangement .    from these facts it follows that in the definition of a pseudohalfplane we can ( and will ) suppose that the underlying pseudoline arrangement is a graphic pseudoline arrangement .",
    "notice that aba - free hypergraphs are in a natural bijection with ( graphic ) pseudoline arrangements and sets of points , such that each hyperedge corresponds to the subset of points _ above _ a pseudoline .",
    "[ prop : abaequipseudoline ] given in the plane a set of points @xmath24 ( with all different @xmath25-coordinates ) and a graphic pseudoline arrangement @xmath410 , define the hypergraph @xmath411 with vertex set @xmath24 such that for each pseudoline @xmath412 the set of points above @xmath123 is a hyperedge of @xmath411 .",
    "then @xmath411 is aba - free with the order on the vertices defined by the @xmath25-coordinates .",
    "conversely , given an aba - free hypergraph @xmath104 , there exists a set of points @xmath24 and a graphic pseudoline arrangement @xmath410 such that @xmath413 .",
    "the first part is almost trivial , suppose that there are two hyperedges @xmath259 in @xmath411 having an aba - sequence on the vertices corresponding to the points @xmath414 .",
    "the pseudolines corresponding to the hyperedges @xmath18 and @xmath19 are denoted by @xmath415 and @xmath416 .",
    "the pseudoline @xmath415 intersects the vertical line through @xmath64 below @xmath64 , the vertical line through @xmath180 above @xmath180 and the vertical line through @xmath6 above @xmath6 , while @xmath415 intersects these in the opposite way ( above / below / above ) .",
    "thus these lines must intersect in the vertical strip between @xmath64 and @xmath180 and also in the strip between @xmath180 and @xmath6 , thus having two intersections , a contradiction .",
    "the second part of the proof is also quite natural . given an aba - free hypergraph @xmath417 with an ordering on @xmath223 , we want to realize it with a planar point set @xmath24 and a graphic pseudoline arrangement @xmath410 .",
    "let @xmath24 be @xmath418 points on the @xmath25 axis corresponding to the vertices in @xmath223 such that the order on @xmath223 is the same as the order given by the @xmath25-coordinates on @xmath24 . from now on",
    "we identify the vertices of @xmath223with the corresponding points of @xmath223 .    for a given @xmath419",
    "it is easy to draw an @xmath415 graphic curve for which the points of @xmath24 above @xmath415 are exactly in @xmath18 .",
    "draw a pseudoline @xmath415 for every @xmath419 , such that there are finitely many intersections among these pseudolines , all of them crossings .",
    "what we get is an arrangement of graphic curves , but it can happen that they intersect more than twice",
    ". now among such drawings take one which has the minimal number of intersections , we claim that this is a pseudoline arrangement .",
    "assume on the contrary , that there are two curves @xmath415 and @xmath416 intersecting ( at least ) twice .",
    "let two consecutive ( in the @xmath25-order ) intersection points be @xmath34 and @xmath342 , where @xmath34 has smaller @xmath25-coordinate than @xmath342 . without loss of generality ,",
    "@xmath415 is above @xmath416 close to the left of @xmath34 and close to the right of @xmath342 , while @xmath415 is below @xmath416 in the open vertical strip between @xmath34 and @xmath342 .",
    "this structure is usually called a lens , and we want to eliminate it in a standard way , decreasing the number of intersections",
    ". we can change the part of @xmath415 and @xmath416 to the left of @xmath34 ( and to the right from the intersection @xmath420 next to and left of @xmath34 if there is any ) and change their drawing locally around @xmath34 ( and @xmath420 if it exists ) such that we get rid of the intersection at @xmath34 , see figure  [ fig : lens ] .",
    "if there are no points of @xmath24 between @xmath415 and @xmath416 and to the left of @xmath34 ( and to the right of @xmath420 ) , then this redrawing does not change the hyperedges defined by @xmath415 and @xmath416 , so we get a representation of @xmath104 with less intersections , a contradiction .",
    "thus there is a point @xmath421 below @xmath415 and above @xmath416 .",
    "similarly , there must be a point @xmath422 above @xmath415 and below @xmath416 and finally a point @xmath423 below @xmath415 and above @xmath416 , otherwise we could redraw the pseudolines with less intersections .",
    "these three points @xmath62 contradict the aba - freeness of @xmath104 as by the definition of the pseudolines , @xmath424 and @xmath425 .",
    "here we briefly mention the consequences of our results to @xmath2-nets of hypergraphs defined by pseudohalfplanes .",
    "we omit proofs as they are not hard and can be obtained exactly as the corresponding results in @xcite .",
    "let @xmath426 be a hypergraph where @xmath223 is a finite set .",
    "let @xmath427 $ ] be a real number .",
    "a subset @xmath428 is called an @xmath2-net if for every hyperedge @xmath429 such that @xmath430 , we also have @xmath431 , i.e. , @xmath432 is a hitting set for all `` large '' hyperedges .",
    "it is known that hypergraphs with vc - dimension @xmath433 have small @xmath2-nets ( of size @xmath434 @xcite and in general this is best possible @xcite . however ,",
    "for geometric hypergraphs this is usually not optimal , in particular for halfplanes the following is true . consider a hypergraph @xmath435 where @xmath436 is a finite set of points in the plane and @xmath437 . for this hypergraph there is an @xmath2-net of size @xmath438 for every @xmath2 @xcite .",
    "theorem  [ thm : primalpshp ] implies that the same bound holds if the hypergraph is defined by pseudohalfplanes instead of halfplanes .",
    "also , for the dual hypergraph @xmath439 theorem  [ thm : dualpshp ] implies that for @xmath440 there exists an @xmath2-net of size @xmath441 . note that our results are in fact stronger as in the appropriate polychromatic coloring each color class intersects all large enough hyperedges ,",
    "thus we get a partition of the vertices into @xmath2-nets ( and at least one of them is a small @xmath2-net by the pigeonhole principle ) ."
  ],
  "abstract_text": [
    "<S> the goal of this paper is to give a new , abstract approach to cover - decomposition and polychromatic colorings using hypergraphs on ordered vertex sets . </S>",
    "<S> we introduce an abstract version of a framework by smorodinsky and yuditsky , used for polychromatic coloring halfplanes , and apply it to so - called _ aba - free hypergraphs _ , which are a generalization of _ interval graphs_. using our methods , we prove that @xmath0-uniform aba - free hypergraphs have a polychromatic @xmath1-coloring , a problem posed by the second author . </S>",
    "<S> we also prove the same for hypergraphs defined on a point set by pseudohalfplanes . </S>",
    "<S> these results are best possible . </S>",
    "<S> we could only prove slightly weaker results for dual hypergraphs defined by pseudohalfplanes , and for hypergraphs defined by pseudohalfspheres . </S>",
    "<S> we also introduce another new notion that seems to be important for investigating polychromatic colorings and @xmath2-nets , _ shallow hitting sets_. we show that all the above hypergraphs have shallow hitting sets , if their hyperedges are containment - free . </S>"
  ]
}