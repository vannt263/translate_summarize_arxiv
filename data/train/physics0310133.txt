{
  "article_text": [
    "electron bunches with , among other characteristics , very small transverse emittance and high peak current are needed for the operation of xfels @xcite .",
    "the bunch length for xfel applications is of the order of 100 femtoseconds .",
    "this is achieved using a two - step strategy : first generate beams with small transverse emittance by means of a rf photocathode and , second , apply longitudinal compression at high energy using a magnetic compressor .",
    "self - interactions may spoil the bunch characteristics , so that , in the last few years , simulation codes have been developed in order to solve the self - consistent problem of an electron bunch moving under the action of external magnetic fields and its own self - fields .",
    "these codes show that , in the case under examination , the bunching process can be treated in the zeroth order approximation by the single - particle dynamical theory : in fact we can not neglect the csr - induced energy spread and other wake - fields when we calculate the transverse emittance , but we can neglect them when it comes to the characterization of the longitudinal current distribution because their contribution to the longitudinal dynamics , in the high-@xmath3 limit , is small . as actual calculations are left to simulations , the understanding of the physics of self - interactions is left to analytical studies , which are usually based on a perturbative approach : the particles move , in the zeroth order , under the influence of external guiding fields and the zeroth order motion is used to calculate the first order perturbation to the trajectory due to the self - interactions . of course",
    ", the perturbative approach will , in the most general case , give different answers with respect to the self - consistent approach as self - interaction effects get more and more important .",
    "nevertheless the method behind the two approaches is the same : the only difference is due to the fact that the computational power is enough to break the particle trajectories in sufficiently small parts so that the first order perturbation theory gives a satisfactory description of the bunch evolution within a given trajectory - slice .",
    "moreover it should be noted that perturbation techniques are important from a practical viewpoint too .",
    "in fact , when it comes to facility design , one has to find a range of parameters such that the emittance dilution is small , i.e. that the self - consistent approach can be effectively substituted , from a practical viewpoint , by the perturbative one .",
    "partial analytical studies have been performed , in the last twenty years , on transverse self - fields , and a particular effect , called cancellation , has become on fashion in the last few years @xcite .",
    "analytical results obtained in those papers led part of the community to believe that such an effect is very fundamental and of great practical importance .",
    "we disagree with this viewpoint . in this paper",
    "we explain our reasons . in section 2",
    "we trace a short , conceptual history of the cancellation effect",
    ". then we move to the description of the current state of the theory of this effect in section 3 . after this , in section 4 , we explain our arguments against the fact that the cancellation effect is of any practical and theoretical interest . finally , in section 5 , we come to conclusions .",
    "the history of the so called cancellation effect is a long - dated one .",
    "a short summing up can be of interest here since on the one hand it gives the reader a more thorough overview of the issue , while on the other it constitutes a self - contained example of how scientific progress works in time , by trial and error and , sometimes , misconception and misunderstanding .",
    "the story begins about twenty years ago with @xcite . in that pioneering",
    "work the transverse self - force , i.e. the lorentz self - force in the transverse direction lying on the orbital plane , is calculated for a test particle in front of a beam of zero transverse extent moving in a circle , showing a singular result for @xmath4 , @xmath5 being the minimal arc length from the nearest retarded source point to the test particle and @xmath6 being the radius of the circle ( see eq .",
    "( 8) in @xcite ) .",
    "the singularity has a logarithmic character arising from the particular model selected , `` is due to nearby charges and is removed as the beam is given a transverse size '' ( quoted from @xcite ) .",
    "this force constituted , in the late 80s , a reason for serious concern for the beam dynamics in electron storage rings . in eq .",
    "( 42 ) of @xcite , a particle off axis of a quantity @xmath7 with respect to the design orbit feels a total centrifugal lorentz force with logarithmic dependence on @xmath7 from an `` unshielded ring of charge of vanishing height and thickness '' ( cited from @xcite , i.e. the same beam with zero transverse extent analyzed in @xcite ) :    @xmath8 + o(x / r)~ , \\label{lee1}\\ ] ]    @xmath9 being the constant bunch linear density .",
    "it should be underlined that the logarithmic singularity in @xmath7 comes from the choice of a particular density distribution .",
    "not all distribution choices give singular behavior as @xmath10 .",
    "for example , in @xcite , a singularity is first found as @xmath11 ; we found a similar result in @xcite .",
    "this is also linked to the particular choice of the distribution , that is a line bunch .",
    "the singularity for @xmath12 has actually the same reason to be as the one for @xmath13 when an horizontally off - axis particle is considered .",
    "simply , if we start from a line bunch case , and we consider a test particle with @xmath14 , then the singular character of the field comes into play when @xmath11 ; when @xmath15 , one is allowed to put @xmath16 and then a singularity is present in the limit for @xmath13 .",
    "however , this is due to the choice of the density distribution and nothing else .",
    "there are many choices ( for example a gaussian 2d or 3d bunch ) which do not give singular fields . as a matter of fact",
    ", macroparticle simulations are based on these kind of simplified distributions , because they avoid the problem of singularities . from a practical viewpoint then , when dealing with computational problem , one should remind that macroparticle simulation do not have to cope necessarily with singularities , which arise only in the case of particular particle distribution choices : this fact should be kept in mind throughout the reading of this paper .",
    "as we read in @xcite , the transverse force was `` the subject of serious concern for its effect on dynamics in electron storage ring '' , in that it spoils the cancellation between the electric field term and the magnetic field , which one usually has in pure space - charge problems for the ultrarelativistic regime : the gradient of @xmath17 in the radial direction is , in fact , singular as @xmath18 .. ] in the same paper , it is pointed out that this force is cancelled for long beams undergoing a circular motion .",
    "in fact `` a particle undergoing betatron oscillations has simultaneous oscillation of its kinetic energy [ ... ] in curved geometry the kinetic - energy oscillation results in a first - order dynamical term in the horizontal equation of motion , which shifts the betatron frequency . for a highly relativistic beam",
    "this additional term nearly cancels a term proportional to the gradient of the cfsc '' ( quoted from @xcite ) , where the cfsc , here , is just the lorentz force : `` we define the csfc with an overall minus sign to agree with the conventions of other authors : @xmath19 '' ( quoted from @xcite ) , @xmath20 and @xmath21 referring to a cylindrical coordinate system @xmath22 and the subscript @xmath23 indicating `` beam - induced components of fields '' .",
    "with the development of sase fel technology and the need of magnetic chicanes for bunch compression , the scientific community began to analyze this kind of effects in the case of short beams moving in finite arc of circles as in the bends of magnetic chicanes .",
    "the aim was to end up with a generalization of the results in @xcite which was valid under more generic assumptions : not only for coasting beams in storage rings , but also for bunched beams in generic magnetic systems . a first step in that direction",
    "was claimed in @xcite and in @xcite , to end up with a final formulation @xcite .",
    "let us briefly describe the arguments in @xcite .",
    "we track the electron bunch in cylindrical coordinates with respect to the center of a designed circular orbit of radius @xmath6 as in @xcite or @xcite : @xmath24 .",
    "following the hamilton - lagrange formulation in @xcite or @xcite one can write the transverse equation of motion for a test particle :    @xmath25    this is a well - known starting point for the study of the transverse dynamical problem , and it is used in theoretical studies as well as by codes like @xmath26 . in order to solve",
    "the equation of motion one should specify initial conditions for the particle positions and velocities at the magnet entrance , for which there is freedom of choice , from a general viewpoint .",
    "all treatments must use eq .",
    "( [ transverse ] ) as a starting point .",
    "then , if the initial conditions are the same , the results must be the same : our discussion is not centered on wether it is allowed to make certain manipulations of eq .",
    "( [ transverse ] ) using the cancellation scheme but simply on whether it is useful or not to do so , both from a theoretical and computational viewpoint .",
    "the two terms on the right hand side of eq .",
    "( [ transverse ] ) are simply the lorentz force in the transverse direction of motion , and the deviation of the particle energy at time @xmath27 , @xmath28 , from the design energy @xmath29 .",
    "note that the latter term can be also expressed as    @xmath30    where @xmath31 is the self - force . by using vector and scalar potential instead of the expressions for the electromagnetic fields and then adding and subtracting the total derivative of the scalar potential @xmath32 from the integrand in eq .",
    "( [ uno0 ] ) one gets :    @xmath33    note that the first term on the right hand side of eq .",
    "( [ uno ] ) is simply the initial kinetic energy deviation from the design kinetic energy , the second is due to space charge while the third is due to longitudinal self - interactions others than space - charge .    on the other hand ,",
    "using the same formalism :    @xmath34    the terms in eq .",
    "( [ uno ] ) and eq .",
    "( [ due ] ) are rearranged in @xcite thus resulting in the following expression for eq .",
    "( [ transverse ] )    @xmath35    where    @xmath36",
    "@xmath37    @xmath38    @xmath39    according to the definition in @xcite , the cancellation effect consists in the recognition that @xmath40 and can be therefore neglected in simulations . note that this is obvious in the steady state case in the zeroth perturbation order in the self - fields , when @xmath41 strictly . in fig . 2 of @xcite it is shown , by means of macroparticle simulations , that @xmath42 is `` always '' negligible",
    "the importance of this finding , in the view of the authors of @xcite , is that the last term of eq .",
    "( [ trui ] ) , i.e. the expression in eq .",
    "( [ g4 ] ) , is negligible and free from logarithmic singularity in @xmath7 , while @xmath43 is singular ( again , when a specific distribution which allows singularities is selected to describe the particle beam ) .",
    "a proof of the independence of eq .",
    "( [ g4 ] ) on the logarithm of @xmath7 in spite of the dependence of the total force is given in @xcite , in that this term does not share the same spread as a function of the position inside the bunch with the total force ( see @xcite , fig .",
    "this fact is seen as full of deep physical meaning and it is reported to be of great practical interest since it would permit major simplifications when taken into account in a computational scheme @xcite .",
    "moreover , it has been said that the cancellation effect `` opens new possibility for theoretical investigations such as two - dimensional analysis based on vlasov s equation '' ( quoted from @xcite ) .",
    "while we agree with the findings in @xcite concerning the tail - head interaction within a coasting beam in a circular motion , we disagree on the fact that such results can be extended in an useful way in the more generic situation of a bunched beam moving in an arc of a circle .",
    "moreover , it must be underlined that the findings in @xcite do not account for the head - tail part of the interaction , arising from electrons in front of the test particle . in the following",
    "we show that the cancellation effect is indeed artificial and it has no important physical meaning .",
    "furthermore we show that , from a practical viewpoint , in building a simulation , there is no reason to prefer the cancellation approach to the standard approach of calculating , separately , the lorenz force and the kinetic energy deviation .",
    "the latter approach is used today by @xmath26 , a macroparticle simulation code devoted to xfel simulation and internationally recognized ( desy , where it has been developed , slac and spring-8 ) .    a feature of self - interaction which has always been forgotten in analytical calculations and interpretation of numerical results ,",
    "is constituted by the head - tail interaction , that is that part of the self interaction coming from particles which are situated _ in front _ of the test particle .",
    "csr theory ( see @xcite ) tells that in the case of longitudinal self - fields ( linked to csr phenomena ) the head - tail part is simply related to coulomb repulsion , and it can be regularized away when one wants to account for pure radiative phenomena , since this part of the interaction is non - dissipative and linked with the space - charge forces in a straight trajectory .",
    "the situation is completely different when one is dealing with transverse interactions . as we showed in @xcite",
    ", it turns out that all the non - negligible contribution to the head - tail interaction is , in this case , due to a term in the acceleration field and that there is no similar regularization mechanism which can be used as in the longitudinal case ; note that ( besides the fact the head - tail term is of accelerative nature ) in the transverse case we can not distinguish between dissipative and non - dissipative phenomena , since no radiation is associated to the transverse forces , at the first order in the electromagnetic fields .",
    "the characteristics of head - tail interactions are somehow surprising .",
    "the magnitude of the effect turns out to be of the same order of magnitude of the tail - head interaction .",
    "for example , in the simple case of two particles on - orbit in a circular motion , the tail - head interaction can be expressed as ( see @xcite ) :    @xmath44    where @xmath6 is the circle radius , @xmath45 , @xmath46 being the retarded angle while @xmath47 is defined by    @xmath48    and the retardation condition reads :    @xmath49    where @xmath50 is the ( curvilinear ) distance between the two particles . on the other hand , the only non - negligible term in the head - tail acceleration is of pure accelerative origin and it is given by ( see @xcite ) :    @xmath51    it is easy to see , by comparison of eq .",
    "( [ totexp ] ) and eq .",
    "( [ fperpht ] ) , that the tail - head and the head - tail contributions are of the same order of magnitude . in practical situations ,",
    "the head - tail force has been proven to be about two times larger than the tail - head contribution : this can be seen by direct inspection of fig .",
    "[ outputht ] and fig .",
    "[ bunchth ] , taken from @xcite , which show , respectively the tail - head and the head - tail interaction exerted by a line bunch entering a bending magnet on a particle with vertical displacement @xmath52 . in the figures a normalized parameter @xmath53 is used , where @xmath6 is the circle radius . note that the plots show the normalized transverse force in the radial direction , @xmath54 $ ] , @xmath9 being the bunch density distribution .    ) to the tail as the bunch progresses inside the bend ( @xmath55 corresponds to the injection of the test particle in the magnet ) . here",
    "@xmath56 m and @xmath57 . here",
    "we plot the results from trafic@xmath58 for several values of @xmath59 , @xmath52 being the vertical displacement of the test particle .",
    "the bunch length is @xmath60 .",
    "the test particle is located in the middle of the bunch.[outputht],width=453 ]     normalized radial force acting on a test particle from a bunch with rectangular density distribution entering a hard - edge bending magnet as a function of the position of the test particle inside the magnet .",
    "the solid lines show analytical results ; the circles describe the outcome from trafic@xmath58 .",
    "we chose @xmath57 , @xmath61 m ; graphs are plotted for several values of the parameter @xmath62 , @xmath52 being the vertical displacement of the test particle .",
    "the bunch length is @xmath63 m .",
    "the test particle is located in the middle of the bunch .",
    "[ bunchth],width=453 ]    let us spend some words to describe the head - tail interaction ( an exhaustive treatment can be found in @xcite ) .",
    "on the one hand it is evident that , when @xmath64 , the source particle is ahead of the test electron at any time ; on the other hand it is not true that the retarded position of the source particle is , in general , ahead of the present position of the test particle .",
    "if @xmath64 and , approximatively , @xmath65 the test particle overtakes the retarded position of the source before the electromagnetic signal reaches it . in this case",
    ", although we may still talk about head - tail interaction , since @xmath64 , its real character is very much similar to the case @xmath66 , in which the electromagnetic signal has to catch up with the test particle . in the case of head - tail interactions with @xmath67 ,",
    "the retardation condition has unique features since the electromagnetic signal runs against the test particle , and not viceversa , as in the tail - head case ( or in the head - tail case with @xmath68 , when the electromagnetic is running after it .",
    "the fact that the electromagnetic signal and the test particle approach on a head - on collision is the reason why the character of this interaction is local , in the sense that the distance which the test particle travels between the emission of the electromagnetic signal by a source and its reception by the test particle is about half of the distance between the test particle and the source , while the usual tail - head interaction has a formation length about @xmath69 times longer . this can be seen directly comparing fig .",
    "[ outputht ] and fig .",
    "[ bunchth ] .",
    "it is somehow surprising that , although simulations automatically take care of this term , this has been overlooked for a long time in theoretical analysis or in the interpretation of simulation results , starting from @xcite , continuing with @xcite , @xcite and finally @xcite .",
    "this important term is responsible for sudden jumps of @xmath70 at the magnet entrance .",
    "consider for example the plot in fig .",
    "[ pot ] , obtained by using the electromagnetic solver of @xmath26 .",
    "the figure shows ( solid line ) the normalized radial force @xmath70 felt by a test particle ( this is just the sum of fig .",
    "[ outputht ] and fig .",
    "[ bunchth ] ) in the middle of the bunch and the normalized potential @xmath71 $ ] ( dashed line ) at the test particle position .",
    "the sudden jumps at the magnet entrance are due to head - tail interaction with @xmath72 . yet , before @xcite , there was no theoretical explanation for this behavior .",
    "although fig . [ pot ] refers to displacement in the vertical plane , it is obvious that a similar displacement would be found in the horizontal one too , signifying a logarithmic dependence on @xmath7 .",
    "m bunch as a function of the injection position .",
    "the parameter on the curves refers to the vertical displacement @xmath52 of the test particle .",
    "[ pot ] , width=453 ]    now that the head - tail interaction has been introduced , it is possible to give a very simple argument against the meaningfulness of the cancellation scheme . in @xcite attention",
    "is drawn only on @xmath73 and @xmath42 , while no word is spent about @xmath74 and @xmath75 .",
    "as already said , in fig [ pot ] we also plotted ( dashed lines ) the normalized potential @xmath76 in the center of the bunch for different vertical displacements @xmath52 as calculated by @xmath26 .",
    "as it is seen , the potential does not share the same formation length of the head - tail force , which clearly demonstrates that no effective cancellation can take place between @xmath77 and @xmath78 .",
    "this fact can be shown in the same terminology used in @xcite .",
    "even if @xmath42 is negligible and @xmath73 is centripetal , there is a huge , dominant centrifugal contribution on the right hand side of eq .",
    "( [ trui ] ) : this is @xmath74 which includes the term @xmath79 . since the head - tail interaction has local nature , we can say that , due to the rearrangement proposed in @xcite , @xmath74 now includes all the head - tail interaction part ( the sharp time dependence of the head - tail interaction being masked in the other terms of eq .",
    "( [ due ] ) , i.e. in the terms @xmath75 , @xmath73 ( and @xmath42 ) ) .",
    "actually our result shows that @xmath80 , alone , is uninteresting , that is , the cancellation effect as defined in @xcite is uninteresting .",
    "there will be anyway a strong head - tail contribution which is accounted in the first term @xmath74 . since this term depends on the position of the test particle inside the bunch it will lead to emittance growth both in the transient and in the steady state case .",
    "this term has not been taken into account in @xcite nor in @xcite ; it has been automatically included in the simulations in @xcite , because the computational scheme is correct , although unnecessarily complicated , but then it has been disregarded in the analysis of the results .",
    "note that the first term @xmath74 would give a spread similar to that of @xmath77 in fig . 1 of reference @xcite if plotted for a bunch with a given energy spread , since it depends logarithmically on @xmath7 ( at least in the 1d model with the test particle displaced horizontally ) .",
    "in other words , if there is a field singularity , it is there also in the right hand side of the equation of motion and it can not be cancelled away . note that there is no possibility of cancelling @xmath74 by choosing a certain initial condition for the bunch .",
    "in fact the freedom of choice of the initial condition refers to the kinetic energy deviation from the design energy , and not to the deviation of the total energy ( kinetic energy summed to the potential energy ) from the design kinetic energy .",
    "this shows that there is no theoretical nor practical reason for adopting the cancellation scheme as a preferred one with respect to the usual scheme of calculating separately @xmath77 and @xmath81 .",
    "in fact , from a practical viewpoint one will encounter the same computational difficulties and from a theoretical viewpoint two easily understandable terms are mixed up into four terms ( of which three survive and one is approximately cancelled ) with a more involved physical interpretation . not to mention that the cancellation method can be extremely confusing .",
    "the latter is a statement , not an opinion ; in the lcls design study report @xcite we read that all contributions to the the transverse emittance growth are due to the centripetal force `` which originates from radiation of trailing particles and depends on the local charge density along the bunch .",
    "the maximum force takes place at the center of the bunch and its effect on the transverse emittance is estimated in the reference . ''",
    "; the reference in the quoted passage is the work by derbenev and shiltsev @xcite . here",
    "the head - tail contributions are completely neglected , because of the confusion coming form the cancellation issue : in fact the ( centripetal ) force in the quote is the third term in li s treatment ( @xmath73 , the only one considered ) while the first term @xmath74 , containing the ( centrifugal ) head - tail interaction and the second , @xmath82 , are completely neglected .",
    "this is an example where on the one hand the code @xmath26 was correctly used giving correct results , but where , on the other hand , its results were completely misunderstood .",
    "nevertheless , as we already said , the head - tail interaction is a few times larger than the tail - head interaction , and , since it depends on the position of the test particle along the bunch , it is obviously responsible for normalized emittance growth .",
    "the cancellation scheme as in @xcite , actually reduces to the following : get a quantity @xmath83 and express @xmath84 , @xmath85 where @xmath86 , leaving large part of @xmath87 ( and even singular quantities ) in @xmath88 , complicate the situation furthermore breaking @xmath89 in several parts and then claim that the cancellation @xmath90 is an important finding .",
    "this can be done with any pair of quantities @xmath87 and @xmath91 , and it is , in our view , completely trivial and uninteresting . as a final remark , one could have foreseen that the cancellation effect can not be of any use since the transverse head - tail force , which has local character can not be effectively cancelled by the energy deviation , which depends upon all the trajectory .",
    "in this paper we proved that the cancellation effect is an artificial one . in the right hand side of the transverse equation of motion the lorentz force and the kinetic energy deviation from the design energy , which are clearly physically meaningful quantities",
    ", are combined together to give four different terms of difficult physical interpretation .",
    "the cancellation effect deals only with one of these terms , still leaving other three important contributions to be evaluated .",
    "we found in @xcite that the head - tail interaction is , in practical situations , a few times larger than the tail - head interaction .",
    "this fact , automatically included in computer simulation , has always been forgotten in analytical considerations , starting from @xcite on .",
    "the formation length of the head - tail interaction with @xmath67 is approximately half of the bunch length , which means that , for practical purposes , the head - tail interaction has a local nature .",
    "this explains the sudden `` jump '' in the total lorentz force seen as a bunch enters a bending magnet . on the other hand ,",
    "the kinetic energy deviation from the design energy has much a larger formation length .",
    "this fact alone is sufficient to prove that the cancellation effect is an artificial one , in that an important contribution ( the head - tail interaction ) can not be compensated by the potential term in the kinetic energy deviation .",
    "when we state that the cancellation effect is artificial , we do not mean that it is , strictly speaking , wrong ; we simply state that it is not useful at all and that there is no theoretical nor practical reason to prefer this method to the more straightforward approach of calculating , separately , the transverse lorentz force and the kinetic energy deviation term ( as , for example , by means of the code @xmath26 ) .",
    "in fact , from a practical viewpoint one will encounter the same computational difficulties and from a theoretical viewpoint two easily understandable terms are mixed up into four terms ( of which three survive and one is approximately cancelled ) with a more involved physical interpretation .",
    "we wish to thank martin dohlus for providing numerical calculations using the code @xmath26 .",
    "also , thanks to joerg rossbach and marnix van der wiel for their interest in this work ."
  ],
  "abstract_text": [
    "<S> as a consequence of motions driven by external forces , self - fields originate within an electron bunch , which are different from the static case . in the case of magnetic external forces acting on an ultrarelativistic beam , </S>",
    "<S> the longitudinal self - interactions are responsible for csr ( coherent synchrotron radiation)-related phenomena , which have been studied extensively . on the other hand , </S>",
    "<S> transverse self - interactions are present too . at the time being , </S>",
    "<S> several existing theoretical analysis of transverse dynamics rely on the so - called cancellation effect , which has been around for more than ten years . in this paper </S>",
    "<S> we explain why in our view such an effect is not of practical nor of theoretical importance .    </S>",
    "<S> * deutsches elektronen - synchrotron * +    desy 03 - 165    october 2003    @xmath0    * misconceptions regarding the cancellation of self - forces in the transverse equation of motion for an electron in a bunch *    @xmath1    gianluca geloni    _ + department of applied physics , technische universiteit eindhoven , + p.o . </S>",
    "<S> box 513 , 5600 mb eindhoven , the netherlands _ </S>",
    "<S> @xmath2    evgeni saldin and evgeni schneidmiller    _ + deutsches elektronen - synchrotron desy , + notkestrasse 85 , 22607 hamburg , germany _ @xmath2    mikhail yurkov    _ + particle physics laboratory ( lsve ) , joint institute for nuclear research , + 141980 dubna , moscow region , russia _ </S>"
  ]
}