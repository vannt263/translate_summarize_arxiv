{
  "article_text": [
    "many images contain blurred regions .",
    "blur can be caused by different factors such as defocus , camera / object motion , or camera shake . while it is common in photography to deliberately use a shallow focus technique to give prominence to foreground objects based on defocus , unintentional blur due to degradation factors can decrease the image quality .",
    "blur detection plays an important role in many computer vision and computer graphics applications including but not limited to image segmentation , depth estimation , image deblurring and refocusing , and background blur magnification .    in recent years , a variety of methods have been proposed to address the issue of deblurring by estimating blur kernels and performing a deconvolution @xcite . in this work ,",
    "we do not aim to do kernel estimation and deconvolution . instead , the objective of this work is to propose an effective blur detection method from a single image without having any information about the blur type , level , or the camera settings .",
    "figure [ pic1 ] shows sample results of our proposed method .    despite the success of existing spatially - varying blur detection methods ,",
    "there are only few methods focusing on spatially - varying blur detection regardless of the blur type @xcite , and the rest perform well only on defocus blur or motion blur .",
    "moreover , the performance of most of the existing methods degrades drastically when taking into account the effects of camera noise and distortion .",
    "therefore , noise - free and artifact - free assumptions could be unsuitable when dealing with real - word images .",
    "the contributions of this work are summarized as follows .",
    "we propose a robust spatially - varying blur detection method from a single image based on a novel high - frequency multiscale fusion and sort transform ( _ hifst _ ) of gradient magnitudes to determine the level of blur at each location in an image .",
    "we evaluate our proposed algorithm on both defocus and motion blur types to demonstrate the effectiveness of our method .",
    "we also test the robustness of our method by adding different levels of noise as well as different types and levels of distortions to the input image .",
    "we compare our method with state - of - the - art algorithms using their provided implementations and demonstrate that our proposed method outperforms existing state - of - the - art methods quantitatively and qualitatively .",
    "finally , we provide a few applications of our method including camera focus points estimation , blur magnification , depth of field estimation , depth from focus , and deblurring .",
    "blur detection methods can be divided into two categories : 1 ) methods that make use of multiple images @xcite , and 2 ) methods that require only a single image @xcite . in the first category , a set of images of the same scene",
    "are captured using multiple focus settings . then the blur map is estimated during an implicit or explicit process .",
    "different factors such as occlusion and requiring the scene to be static cause the application of these methods to be limited in practice . in recent years",
    ", several methods have been proposed to recover a blur map from a single image without having any information about the camera settings .    in general ,",
    "blur detection algorithms from a single image can be divided into gradient - based , intensity - based and transform - based algorithms . in @xcite , chakrabarti propose a sub - band decomposition based approach .",
    "they estimate the likelihood function of a given candidate point spread function ( psf ) based on local frequency component analysis .",
    "liu @xcite propose a method which employs features such as image color , gradient , and spectrum information to classify blurred images .",
    "shi @xcite propose a method based on different features such as gradient histogram span , kurtosis , and data - driven local filters to differentiate between blurred and unblurred image regions .",
    "shi @xcite propose a method based on utilizing a sparse representation of image patches using a learned dictionary for the detection of slight perceivable blur . in @xcite , su propose a method based on examining singular value information to measure blurriness .",
    "the blur type ( motion blur or defocus blur ) is then determined based on certain alpha channel constraints . in @xcite , tang employ the image spectrum residual @xcite , and then they use an iterative updating mechanism to refine the blur map from coarse to fine by exploiting the intrinsic relevance of similar neighboring image regions .    in @xcite , elder and zucker",
    "propose a method that makes use of the first- and second - order gradient information for local blur estimation .",
    "bae and durand @xcite estimate the size of the blur kernel at edges , building on the method by @xcite , and then propagate this defocus measure over the image with a non - homogeneous optimization . in their propagation , they assume that blurriness is smooth where intensity and color are similar .",
    "tai and brown @xcite propose a method for estimating a defocus blur map based on the relationship between the image contrast and the image gradient in a local image region , namely local contrast prior .",
    "they use the local contrast prior to measure the defocus at each pixel and then apply markov random field propagation to refine the defocus map . in @xcite , tang use the relationship between the amount of spatially - varying defocus blur and spectrum contrast at edge locations to estimate the blur amount at the edge locations . then a defocus map is obtained by propagating the blur amount at edge locations over the image using a non - homogeneous optimization procedure .",
    "yi and eramian @xcite propose a local binary patterns ( lbp ) based method for defocus blur segmentation by using the distribution of uniform lbp patterns in blurred and unblurred image regions .",
    "zhang and hirakawa @xcite propose a method for estimating a defocus blur map from a single image via local frequency component analysis similar to @xcite ; they also incorporate smoothness and color edge information into consideration to generate a blur map indicating the amount of blur at each pixel .",
    "zhuo and sim @xcite compute the defocus blur from the ratio between the gradients of input and re - blurred images .",
    "then they propagate the blur amount at edge locations to the entire image via matting interpolation to obtain the full defocus map .    in comparison to these methods , we introduce a new method to estimate spatially - varying blur from a single image .",
    "our work is based on a multiscale transform decomposition followed by the fusion and sorting of the high - frequency coefficients of gradient magnitudes .",
    "the proposed method is not limited by the type of blur and does not require information about the blur type , level , or camera settings .",
    "experimental results demonstrate the effectiveness and robustness of our method in providing a reliable blur detection map for different types and levels of blur .",
    "to motivate our work , we first describe our proposed high - frequency multiscale fusion and sort transform ( _ hifst _ ) , and then its role in image blur detection .      the discrete cosine transform ( dct )",
    "has emerged as one of the most popular transformations for many computer vision and image compression applications .",
    "the dct transforms a signal from a spatial representation into a frequency representation .",
    "dct coefficients can represent different frequencies , and therefore can be informative about the image structure , energy , and bluriness .",
    "it is well known that blur would cause a reduction in the high frequencies of the image . here",
    "we divide the dct coefficients into low- , middle- , and high - frequency bands and consider the high - frequency dct coefficients .",
    "the proposed high - frequency multiscale fusion and sort transform ( _ hifst _ ) is based on computing locally at each pixel a patch - based multi - resolution ( computed for different patch sizes around each pixel ) dct . for each pixel ,",
    "the high - frequency dct coefficients are extracted for each resolution ( size of patch surrounding the considered pixel ) .",
    "the high - frequency coefficients from all resolutions are then combined together in a vector and sorted in the order of increasing absolute values . in this way",
    ", a vector of multiscale - fused and sorted high - frequency transform coefficients is generated for each image pixel .",
    "figure [ pic2 ] shows the semi - log plot of a sharp and blurry patch to illustrate the effectiveness of the sorted absolute values of the high - frequency dct coefficients in differentiating between a sharp and blurry region .",
    "as shown in figure [ pic2 ] , after sorting the absolute values of the high - frequency coefficients in increasing order , obtained using the grayscale versions of patches ( a ) and ( b ) , there is a clear visual difference between the sorted coefficients of the blurred and unblurred patches . in other words ,",
    "as shown in figure [ pic2 ] , we can see that the values of the sorted coefficients in the blurry block ( red block ) are correspondingly smaller than the sorted coefficients values in the sharp block ( blue block ) .",
    "we aim to model this property for blur detection purposes .",
    "let @xmath0 denote the @xmath1-pixel input image .",
    "we first compute the dct of the input image in a patch - wise manner .",
    "let @xmath2 denote a patch of size @xmath3 centered at pixel @xmath4 , with @xmath5 , and @xmath6 , where @xmath7 denotes floor of @xmath8 .",
    "let @xmath9 , @xmath10 , denote the dct of @xmath2 .    in our proposed method ,",
    "we divide the computed dct coefficients for each patch into three frequency bands , namely low , middle , and high - frequency bands @xcite , and consider the high - frequency components .",
    "figure [ pica2 ] illustrates the three defined frequency bands for a @xmath11 block .",
    "let @xmath12 denote a vector consisting of the absolute values of the high - frequency dct coefficients of @xmath13 .",
    "@xmath14 is given by : @xmath15    we define the increasingly sorted vector of the absolute values of high - frequency dct coefficients as : @xmath16 where @xmath17 is a @xmath18 vector .",
    "let @xmath19 be the @xmath20 element in vector @xmath17 and let @xmath21 be the @xmath20 layer that is obtained by grouping all the @xmath20 elements @xmath19 for all positions @xmath4 .",
    "@xmath21 can be represented as an @xmath22 matrix given by : @xmath23    the proposed _",
    "consists of the @xmath24 normalized layers @xmath25 , where @xmath26 is given by : @xmath27     block while dividing them into low- , middle- , and high - frequency bands . ]    by normalizing each layer between @xmath28 $ ] , each layer can better differentiate between the blurred and unblurred regions in the image and measure locally the level of blur . in eqs .",
    "( [ e2])-([e3 ] ) , we differentiate between the blurred and unblurred regions in a local adaptive manner by extracting the high - frequency dct coefficients in a block - wise manner and then grouping and normalizing sorted dct coefficients belonging to the same position .    in figure [ pic3 ] for illustration purposes ,",
    "we employ a normalized sorted high - frequency dct decomposition on each @xmath11 block with one block located at each pixel , which leads to 28 layers .",
    "the first layer contains the normalized smallest high frequency values , which yields to differentiating between the sharp and blurry regions .",
    "as we move toward the higher layers which consist of larger high - frequency coefficients , we can see more structures and edges appear for both the sharp and blurred regions while the discrimination between blurred and unblurred regions is still noticeable .        considering only one resolution may not accurately indicate whether an image or patch is blurred or not .",
    "the scale ambiguity has been studied in various applications @xcite .",
    "therefore , here we take into account a multiscale model to fuse information from different scales . with our multiscale analysis ,",
    "our method is able to deal with blur in either small - scale or large - scale structures , so that blurred and unblurred regions are detected more effectively .",
    "we utilize a multiscale _ hifst _ decomposition as follows : @xmath29 where @xmath30 if even and @xmath31 if odd , @xmath32 denotes the union of all the high - frequency dct coefficients computed in @xmath33 different scales with different resolutions , and @xmath17 is a @xmath34 vector . then @xmath35 and @xmath36 can be computed as described in eqs .",
    "( [ e3 ] ) and ( [ e4 ] ) .      in the following , we present in details our spatially - varying blur detection approach which is based on the fusion , sorting , and normalization of multiscale high - frequency dct coefficients of gradient magnitudes to detect blurred and unblurred regions from a single image without having any information about the camera settings or the blur type .",
    "the flowchart of our proposed algorithm is provided in figure [ pic4 ] .",
    "a blurred image , @xmath37 , can be modeled as follows : @xmath38 where @xmath39 is a sharp latent image , @xmath40 is the blur kernel , @xmath41 is the convolution operator , and @xmath42 is the camera noise . our goal is to estimate the blur map from the observed blurry image @xmath37 . given the image @xmath37 , we first apply a gaussian filter with a small kernel to remove the high - frequency noise .",
    "the gaussian filter is given by :    @xmath43    where @xmath44 is set to 0.5 in our experiment .",
    "let @xmath45 denote the gaussian filtered image of the input blurry image @xmath37 .",
    "the gradient magnitudes of an image can effectively capture image local structures , to which the human visual system is highly sensitive . by computing the gradient magnitudes ,",
    "most of the spatial redundancy is removed , and the image structure and shape components are preserved . the gradient magnitude image @xmath46 of the gaussian filtered image , @xmath45 ,",
    "is computed by :    @xmath47    where @xmath48 $ ] , and @xmath49 $ ] .",
    "next we apply the _ hifst _ ( section 2.1 ) decomposition on the computed gradient image , @xmath46 , in a multiscale manner .",
    "as shown in figure [ pic5 ] , blur can be perceived differently in different scales .",
    "given an image @xmath46 , we compute its multiscale _ hifst _ as described in section 2.1 where the image @xmath0 is now replaced with the gradient magnitude image @xmath46 .",
    "we compute @xmath35 and @xmath36 as described in section 2.1 , where @xmath50 . to compute our proposed blur detection map , we consider only the first @xmath51 layers . based on our experiment and observation , using the first @xmath51 layers^[ff1]^ of the _ hifst",
    "_ provides sufficient information to compute the blur map .",
    "our proposed blur detection map , @xmath52 , is computed as follows :    @xmath53    where @xmath54 denotes the hadamard product of matrices @xmath55 and @xmath56 whose elements are given by : @xmath57 @xmath58,\\ ] ]    where @xmath59 denotes a @xmath60 patch centered at pixel @xmath4 , and @xmath61 denotes a probability function . from eqs .",
    "( 9b ) and ( 9c ) , it can be seen that @xmath55 is obtained by max pooling , and @xmath62 is obtained by computing the local entropy map of @xmath55 , using a @xmath60 neighborhood around the corresponding pixel in @xmath55 ( in our implementation , we use @xmath63 ) range.[ff1 ] ] .",
    "the entropy map ( @xmath62 ) is used as a weighting factor to give more weight to the salient regions in the image .",
    "the final blur map is smoothed using edge - preserving filters @xcite to suppress the influence of outliers and preserve boundaries .",
    "we further extend our proposed algorithm to estimate the camera focus points map .",
    "the camera focus points map shows the focus points of the camera while taking a photo .",
    "intuitively , this region should have the highest intensity in the blur detection map .",
    "we compute the camera focus points map by as follows :    @xmath64    where @xmath65 denotes the camera focus points map and @xmath66 is a gaussian smoothed version of @xmath52 , normalized between [ 0,1 ] . in our experiment , we set the threshod value , @xmath67 , to 0.98.^[ff1]^",
    "in this section we evaluate the performance of our proposed method , _ hifst _ , quantitatively and qualitatively . here",
    "we show that our proposed method outperforms the existing algorithms in terms of both quantitative and qualitative results regardless of the blur type .",
    "moreover , we evaluate the robustness of our method to different types and levels of distortions .        for quantitative comparison ,",
    "we evaluate our method on a variety of images with different types and amount of blur provided in dataset @xcite and compare our results with state - of - the - art algorithms @xcite .",
    "figure [ pic6 ] shows the precision - recall curve for the blur dataset @xcite , which consists of 296 images with motion blur and 704 images with defocus blur . in our experiment , we binarized the blur detection map by varying the threshold within the range [ 0 , 255 ] .",
    "our proposed method achieves the highest precision within the entire recall range [ 0 , 1 ] , which conveys its potential for different levels and types of blur .    in figure [ pic8 ] , we evaluate the performance of our method qualitatively on images provided in @xcite with different contents as well as different types and levels of blur , in which we added zero - mean gaussian noise with @xmath68 to take into account the camera noise . although the amount of noise is not easily noticeable by human eyes , it simulates the practical camera noise case .",
    "we evaluate the performance of the proposed algorithm against the state - of - the - art methods @xcite . in the provided maps , the unblurred regions have higher intensities than the blurred ones .",
    "as shown in figure [ pic8 ] , our proposed method can handle different types of blur and can distinguish between the blurred and unblurred regions effectively .",
    "algorithms @xcite dramatically failed due to their sensitivity to the noise or type of blur .",
    "moreover , although algorithms @xcite can detect the blur map for some of the images , their detected maps include incorrectly labeled regions compared to the ground - truth .",
    "in contrast , our proposed method can distinguish between the blurred and unblurred regions with high accuracy regardless of the blur type .    furthermore , figure [ pic66 ] ( a ) demonstrates the effectiveness of our multiscale approach by comparing it to just using one single scale .",
    "we evaluate the precision - recall curves resulting from our method when it just uses one scale at a time ( @xmath69 ) and compare it to our final multiscale method . as shown in figure [ pic66 ] ( a ) employing all the scales leads to the best results . furthermore , to validate the robustness of our method qualitatively and quantitatively ,",
    "we test our method on dataset @xcite while adding zero - mean gaussian noise with different densities to the input images . in our experiment",
    "the variance ( @xmath70 ) of the noise is varied between zero to @xmath71 . as shown in figure [ pic66](b ) ,",
    "the resulting precision - recall curves in the presence of noise with @xmath72 are almost the same . by adding noise with larger variances , @xmath73 and @xmath74 ,",
    "the precision - recall curves show only a slight drop in performance as compared to the noise - free case and show that the proposed method still achieves competitive results .    in figure [ pic11 ]",
    ", we evaluate the robustness of our method qualitatively on images from the categorical image quality ( csiq ) database@xcite with different types and levels of distortions , such as zero - mean gaussian noise , adaptive noise , and jpeg .",
    "as shown in figure [ pic11 ] , our proposed method has the capability of estimating the blur map for distorted images .        finally , to further demonstrate the performance of our proposed method for different blur types , we test our algorithms on 6 synthetic examples of an image with different types of blur on the background region , such as lens , gaussian , motion , radial , zoom , and surface blur . as shown in figure [ pic9 ] , our proposed method can handle all these blur types accurately compared to the ground - truth .",
    "in this section , we demonstrate the use of our proposed blur detection map in a few applications , such as blur magnification , deblurring , depth of field ( dof ) , depth from focus ( dff ) , and camera focus points estimation .      given the estimated blur map ,",
    "we can perform blur magnification @xcite .",
    "blur magnification increases the level of blur in out - of - focus areas and makes the image have a shallower dof .",
    "therefore , the in - focus object would be highlighted more .",
    "figure [ pic10 ] shows examples of blur magnification by using our detected blur map .          in figure",
    "[ pic14 ] , we use our estimated blur map ( figure [ pic14](b ) ) in the deblurring algorithm described in @xcite and recover the clear image ; figure [ pic14](c ) represents the deblurring result .",
    "depth of field ( dof ) refers to the area of the picture that is in - focus in an image .",
    "it is determined by three factors , including aperture size , distance from the lens , and the focal length of the lens .",
    "let @xmath75 denote the median of the normalized blur map @xmath52 , and be used as an estimation for the dof . in figure [ pic12 ] , we provide four images which are taken with the same camera and distance from the objects . in our experiment ,",
    "the camera focus is set to be on the face of the front object and the aperture size changes by choosing different f - stop , such as f/2.8 , f/5 , f/16 , and f/22 . as shown in figure [ pic12 ] , by decreasing the aperture size ( increasing the f - stop ) the dof increases and our blur map as well as @xmath75 change in a consistent way . also as shown in the third row of figure [ pic12 ] , the camera focus points map ( red spot inside the square ) for all the images stay consistent .",
    "denotes the median value of the normalized blur map @xmath52 .",
    "third row : estimated camera focus points . ]      in figure [ ps_s_1 ] , we provide the application of our proposed method for depth from focus ( dff ) . as shown in figure [ ps_s_1 ] , by changing the camera focus , our estimated blur maps change in a consistent way .",
    "( c ) are images from @xcite with different focus areas .",
    "( b ) @xmath76 ( d ) are our estimated maps . ]",
    "in this paper we have addressed the challenging problem of blur detection from a single image without having any information about the blur type or the camera settings .",
    "we proposed an effective blur detection method based on a high - frequency multiscale fusion and sort transform , which makes use of high - frequency dct coefficients of the gradient magnitudes from multiple resolutions .",
    "our algorithm achieves state - of - the - art results on blurred images with different blur types and blur levels . to analyze the potential of our method",
    ", we also evaluated it on images with different types of blur as well as different levels and types of distortions .",
    "furthermore , we showed that the proposed method can benefit different computer vision applications including camera focus points map estimation , blur magnification , depth of field estimation , depth from focus , and deblurring .",
    "f.  couzinie - devy , j.  sun , k.  alahari , and j.  ponce .",
    "learning to estimate and remove non - uniform image blur . in _",
    "ieee conference on computer vision and pattern recognition ( cvpr ) _ , pages 10751082 , 2013 .",
    "e.  kalalembang , k.  usman , and i.  p. gunawan . -based local motion blur detection . in _",
    "international conference on instrumentation , communications , information technology , and biomedical engineering ( icici - bme ) , _ , pages 16 , 2009 .",
    "lai , j .- b .",
    "huang , z.  hu , n.  ahuja , and m .- h .",
    "yang . a comparative study for single image blind deblurring . in _ ieee conference on computer vision and pattern recognition ( cvpr ) _ ,",
    "pages 15141523 .",
    "ieee , 2016 .",
    "a.  levin , y.  weiss , f.  durand , and w.  t. freeman .",
    "understanding and evaluating blind deconvolution algorithms . in _",
    "ieee conference on computer vision and pattern recognition ( cvpr ) _ ,",
    "pages 19641971 , 2009 .",
    "shen , w .- l .",
    "hwang , and s .- c .",
    "spatially - varying out - of - focus image deblurring with l1 - 2 optimization and a guided blur map . in _ 2012 ieee international conference on acoustics , speech and signal processing ( icassp ) _ , pages 10691072 , 2012 ."
  ],
  "abstract_text": [
    "<S> the detection of spatially - varying blur without having any information about the blur type is a challenging task . in this paper </S>",
    "<S> , we propose a novel effective approach to address this blur detection problem from a single image without requiring any knowledge about the blur type , level , or camera settings . </S>",
    "<S> our approach computes blur detection maps based on a novel high - frequency multiscale fusion and sort transform ( hifst ) of gradient magnitudes . </S>",
    "<S> the evaluations of the proposed approach on a diverse set of blurry images with different blur types , levels , and contents demonstrate that the proposed algorithm performs favorably against the state - of - the - art methods qualitatively and quantitatively . </S>"
  ]
}