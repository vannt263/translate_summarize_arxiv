{
  "article_text": [
    "in formal language theory , quotient is a basic and very important operation and plays a fundamental role in the construction of minimal deterministic finite automata ( dfa ) . given a formal language @xmath3 over an alphabet @xmath4 , the left quotient @xmath5 of @xmath3 by a word @xmath6 is defined as the language @xmath7 , where @xmath8 is the free monoid of words over @xmath4 .",
    "the famous myhill - nerode theorem then states that @xmath3 is a regular language if and only if the number of different left quotients of @xmath3 ( also called the quotient complexity @xcite of @xmath3 ) is finite .",
    "moreover , a minimal dfa which recognizes @xmath3 can be constructed in a natural way by using left quotients as states .",
    "in particular , this means that the quotient complexity of @xmath3 is equal to the size of the minimal dfa which recognizes @xmath3 .    the notion of left quotient of a formal language by a word can be extended to quotients by a formal language in two ways . given two formal languages @xmath9 , the left quotient of @xmath3 by @xmath10 , denoted by @xmath11 , is defined as the union of @xmath5 for all words @xmath6 in @xmath10 .",
    "another extension is less well - known , if not undefined at all .",
    "we define the _ left residual _ of @xmath3 by @xmath10 , denoted by @xmath12 , as the intersection of @xmath5 of all words in @xmath10 .",
    "similarly we have @xmath13 , the right quotient of @xmath3 by @xmath10 , and @xmath14 , the right residual of @xmath3 by @xmath10 . regarding each left residual of @xmath3 as a state",
    ", there is a natural way to define an automaton , which is called the",
    "_ universal automaton _",
    "@xcite of @xmath3",
    ". the universal automaton of a formal language @xmath3 contains many interesting information ( e.g. factoraization ) of @xmath3 @xcite and plays a very important role in constructing the minimal nondeterministic finite automaton ( nfa ) of @xmath3 @xcite .",
    "former power series are extensions of formal languages , which are used to describe the behaviour of weighted automata ( i.e. finite automata with weights ) .",
    "weighted automata were introduced in 1961 by schtzenberger in his seminal paper @xcite .",
    "a formal power series is a mapping from @xmath8 , the free monoid of words over @xmath4 , into a semiring @xmath15 .",
    "depending on the choice of the semiring @xmath15 , formal power series can be viewed as weighted , multivalued or quantified languages where each word is assigned a weight , a number , or some quantity .",
    "weighted automata have been used to describe quantitative properties in areas such as probabilistic systems , digital image compression , natural language processing .",
    "we refer to @xcite for an detailed introduction of weighted automata and their applications .    despite that",
    "a very large amount of work has been devoted to the study of formal power series and weighted automata ( see e.g. @xcite for surveys ) , the important concept of quotient as well as universal automata has not been systematically investigated in this weighted context . the only exception seems to be @xcite , where the quotient of formal power series ( by word ) was discussed in pages 10 - 11 .",
    "when the semiring is complete , it is straightforward to extend the definition of the quotient of a formal power series @xmath0 from words to series : we only need to take the weighted sum of all left quotients of @xmath0 by word in @xmath4 .",
    "our attempt to characterize the residual of a formal power series @xmath0 by a formal power series as the weighted intersection of all left quotients of @xmath0 by word in @xmath4 is , however , unsuccessful .",
    "several important and nice properties fail to hold anymore .",
    "the aim of this paper is to introduce the quotient and residual operations in formal power series and study their application in the minimization of weighted automata . to overcome the above obstacle with residuals",
    ", we require the semiring to be a complete c - semiring ( to be defined in section  2 ) , and then give a characterization of residuals in terms of quotients by word .",
    "many nice properties and useful notions then follow in a natural way .",
    "the remainder of this paper is organized as follows .",
    "section 2 introduces basic notions and properties of semirings , formal power series , and weighted automata .",
    "quotients of formal power series are introduced in section 3 , where we also show how to construct the minimal deterministic weighted automata effectively . in section 4",
    ", we introduce the residuals and factorizations of formal power series . using the left residuals",
    ", we define the universal weighted automaton @xmath16 for arbitrary formal power series @xmath0 in section  5 , and justify its universality in section  6 . an effective method for constructing the universal automaton",
    "is described in section  7 , which is followed by a comparison of the quotient and the residual operations .",
    "the last section concludes the paper .",
    "we recall in this section the notions of semirings , formal power series , weighted automata , and weighted contex - free grammar .",
    "interested readers are referred to @xcite for more information .",
    "a 5-tuple @xmath17 is called a _ semiring _",
    "if @xmath15 is a set containing at least two different elements @xmath18 and @xmath19 , and @xmath20 and @xmath21 are two binary operations on @xmath15 such that    * @xmath20 is associative and is commutative and has identity @xmath18 ; * @xmath21 is associative and has identity @xmath19 and null element @xmath18 ( i.e. , @xmath22 for all @xmath23 ) ; and * @xmath21 distributes over @xmath20 , i.e. , for all @xmath24 , @xmath25 and @xmath26 .    intuitively , a semiring is a ring ( with unity ) without subtraction . all rings ( with unity ) , as well as all fields ,",
    "are semirings , e.g. , the integers @xmath27 , rationals @xmath28 , reals @xmath29 , complex numbers @xmath30 .",
    "lattices provide another important type of semirings .",
    "recall that a partially ordered set @xmath31 is a _ lattice _ if for any two elements @xmath32 , the least upper bound @xmath33 and the greatest lower bound @xmath34 exist in @xmath35 .",
    "a lattice @xmath31 is _ distributive _ , if @xmath36 for all @xmath37 ; and _ bounded _",
    ", if @xmath3 contains a smallest element , denoted 0 , and a greatest element , denoted 1 .",
    "let @xmath31 be any bounded distributive lattice .",
    "then @xmath38 is a semiring .",
    "because a distributive lattice @xmath3 also satisfies the dual distributive law @xmath39 for all @xmath37 , the structure @xmath40 is also a semiring .",
    "other important examples of semirings include :    * the boolean semiring @xmath41 ; * the semiring of the natural numbers @xmath42 with the usual addition and multiplication ; * the tropic semiring @xmath43 with min and @xmath44 extended to @xmath45 in a natural way ; * the min - sum semiring of nonnegative reals @xmath46 ; * the semiring of ( completely positive ) super - operators on a hilbert space @xmath47 @xmath48 .",
    "we note in the last semiring the addition is not idempotent and the product is not commutative .",
    "this semiring is recently used in model checking quantum markov chains @xcite and the study of finite automata with weights taken from this semiring just initiated .",
    "let @xmath49 be an index set and let @xmath15 be a semiring .",
    "an infinitary sum operation @xmath50 is an operation that associates with every family @xmath51 of elements of @xmath15 an element @xmath52 of @xmath15 .",
    "a semiring @xmath15 is called _ complete _ if it has an infinitary sum operation @xmath53 for each index set @xmath49 and the following conditions are satisfied :    * @xmath54 , @xmath55 , and @xmath56 for @xmath57 . * @xmath58 if @xmath59 and @xmath60 for @xmath57 . *",
    "@xmath61 and @xmath62 .",
    "this means that a semiring @xmath15 is complete if it is possible to define infinite sums ( i ) that are extensions of the finite sums , ( ii ) that are associative and commutative , and ( iii ) that satisfy the distributive laws .",
    "a semiring @xmath15 is a _ c - semiring _",
    "if @xmath20 is idempotent ( i.e. , @xmath63 for all @xmath23 ) , @xmath64 is commutative , and @xmath19 is the absorbing element of @xmath20 ( i.e. , @xmath65 for any @xmath23 ) . in general , for a semiring @xmath15 , we define a preorder @xmath66 over the set @xmath15 by @xmath67 if @xmath20 is idempotent , then @xmath66 is also a partial order .",
    "suppose @xmath15 is a c - semiring .",
    "for any @xmath68 , we have @xmath69 and @xmath70 ( the least upper bound of @xmath71 and @xmath72 ) in the poset @xmath73 .",
    "if @xmath15 is clear from the context , then @xmath15 is omitted and we simply write @xmath74 for @xmath66 in the following .    a semiring @xmath15 is called a _ complete c - semiring _ if @xmath15 is a complete semiring and a c - semring . in a complete c - semiring ,",
    "the infinitary sum @xmath52 is exactly the least upper bound of @xmath75 ( @xmath76 ) in @xmath15 under the induced partial order @xmath66 . in this case , @xmath52 is also written as @xmath77 .",
    "complete c - semiring is a special kind of the notion of _ quantale",
    "_ @xcite , which is a complete lattice @xmath3 equipped with a multiplication operator @xmath21 such that @xmath78 is a semigroup satisfying the following distributive laws :    @xmath79    since the infinite distributive laws ( eq .  [ eq : quantale - dist ] ) holds , there are two _ adjunctions _ or _ residuals _ , denoted @xmath80 ( left residual ) and @xmath81 ( right residual ) , respectively , satisfying the following adjunction ( residual ) conditions ,    @xmath82    when the given quantale is commutative , i.e. , the operation @xmath21 is commutative , then the left residual is the same as the right residual . in this case , we call the left residual ( and the right residual ) the residual , denoted by @xmath83 .",
    "then we have @xmath84 we have the following proposition .",
    "let @xmath15 be a complete c - semiring .",
    "then @xmath15 is a commutative quantale with unit @xmath19 as the largest element of @xmath15 .",
    "let @xmath4 be an alphabet and @xmath15 a semiring .",
    "write @xmath85 for the set of all finite strings ( or words ) over @xmath4 , and write @xmath86 for the empty string",
    ". then @xmath85 is the free monoid generated by @xmath4 under the operation of concatenation .",
    "we write @xmath87 for all finite non - empty strings over @xmath4 .",
    "a _ formal power series _",
    "@xmath0 is a mapping from @xmath85 into @xmath15 . for simplicity",
    ", we also call a formal power series as a _ series _ , or an _ @xmath15-subset _ of @xmath85 .",
    "the value of @xmath0 at a word @xmath88 is denoted @xmath89 or @xmath90 in this paper .",
    "we write @xmath0 as a formal sum @xmath91 where the values @xmath89 are referred as the _ coefficients _ of @xmath0 .",
    "the collection of all power series @xmath0 as defined above is denoted by @xmath92 . for a series @xmath0 , if @xmath93",
    ", then @xmath0 is called _",
    "proper_. for any series @xmath0 , @xmath0 can be written as the sum of a proper series and and non - proper series , i.e. , @xmath94    for s series @xmath0 on @xmath4 , the _ support _ of @xmath0 is defined as @xmath95    for two series @xmath0 and @xmath96 in @xmath92 , we define @xmath97 whenever @xmath98 for any @xmath88 .",
    "weighted automata are an extension of the classical finite automata .",
    "[ def : l - vfa ] let @xmath15 be a semiring . a _ weighted automaton",
    "_ with weights in @xmath15 is a 5-tuple @xmath99 , where @xmath100 denotes a set of states , @xmath4 is an input alphabet , @xmath101 is a mapping from @xmath102 to @xmath15 , and @xmath49 and @xmath103 are two mappings from @xmath100 to @xmath15 .",
    "we call @xmath104 a _ finite _ weighted automaton if both @xmath100 and @xmath4 are finite sets ; we call @xmath104 a _ deterministic weighted automaton _ ( dwa for short ) if @xmath101 is crisp and deterministic , i.e. , @xmath101 is a mapping from @xmath105 into @xmath100 , and @xmath106 .",
    "the mapping @xmath101 is called the _ weighted ( state ) transition relation_. intuitively , for any @xmath107 and @xmath108 , @xmath109 stands for the weight that input @xmath110 causes state @xmath111 to become @xmath112 .",
    "@xmath49 and @xmath103 represent the ( weighted ) initial and , respectively , final state . for each @xmath113",
    ", @xmath114 indicates the weight that @xmath112 is an initial state , @xmath115 expresses the weight that @xmath112 is a final state .",
    "our definition of deterministic weighted automaton is different from the one used in e.g. @xcite , where a weighted automaton @xmath99 is _ deterministic _ or _ sequential _ if there exists a unique state @xmath116 in @xmath100 such that @xmath117 and for all @xmath113 and all @xmath118 , there is at most one @xmath119 such that @xmath120",
    ".    these two definitions are not identical in general .",
    "in fact , deterministic weighted automaton called in this paper is just the _ simple _ deterministic weighted automaton defined in @xcite , for the detail comparison , we refer to @xcite .",
    "a simple deterministic weighted automaton is obviously a sequential weighted automaton defined in @xcite .",
    "the following example shows that the converse does not hold in general .",
    "let @xmath121 be the tropical semiring .",
    "suppose @xmath122 and @xmath0 is the formal power series over @xmath4 defined by @xmath123 , where @xmath124 denotes the length of the string @xmath125",
    ". then @xmath0 can not be accepted by any simple deterministic weighted automaton ( see proposition [ pro : dffa ] below ) .",
    "however , @xmath0 can be accepted by a sequential weighted automaton @xmath126 , where @xmath127 if @xmath128 and @xmath129 otherwise .",
    "if @xmath15 is _ locally finite _",
    ", however , then the two definitions are equivalent in the sense that they accept the same class of former power series , where a semiring is locally finite if every sub - semiring generated by a finite set is also finite @xcite .",
    "two weighted automata can be compared by a morphism .",
    "[ de : morphism ] a _ homomorphism _ ( or _ morphism _ ) between two weighted automata @xmath99 and @xmath130 is a mapping @xmath131 , satisfying the following conditions : @xmath132 for any @xmath107 and @xmath118 .",
    "a morphism @xmath133 is _ surjective _ if @xmath131 is onto and @xmath134 , @xmath135 , where @xmath136 in this case , @xmath137 is also called the _ morphic image _ of @xmath104 .",
    "if @xmath138 is one - to - one , then we call @xmath104 a _ sub - automaton _ of @xmath137 .",
    "a morphism @xmath133 is called a _ strong homomorphism _ if @xmath139 in case @xmath133 is an onto strong homomorphism , we call @xmath137 a _ quotient _ of @xmath104 .",
    "we say @xmath133 is an _ isomorphism _ if it is bijective and its inverse @xmath140 is also a morphism . in this case , we say @xmath104 is isomorphic to @xmath137 .",
    "the behaviour of a weighted automaton is characterized by the formal power series it recognizes . to introduce this formal power series ,",
    "we extend the weighted transition function @xmath141 to a mapping @xmath142 as follows :    * for all @xmath119 , set @xmath143 if @xmath128 , and @xmath144 otherwise ; * for all @xmath145 , define @xmath146    if @xmath104 is deterministic , the extension @xmath147 of transition function @xmath101 is defined similar as in the classical case .",
    "it is easy to see that for any @xmath148 we have @xmath149.\\ ] ]    [ dfn : recognized - fps ] for a weighted automaton @xmath99 , the formal power series _ recognized _ or _ accepted _ by @xmath104 , written@xmath150 ,",
    "is defined as follows : latexmath:[\\[\\label{eq : recognized - fps }    if @xmath104 is deterministic , then the formal power series recognized by @xmath152 is defined as @xmath153 is a _ regular series _ or an _ @xmath15-regular language _ on @xmath4 if it is recognized by a finite weighted automaton ; and say @xmath0 is a _ dwa - regular series _ or a _ dwa - regular language _ on @xmath4 if it is recognized by a finite dwa .",
    "it was proved by schtzenberger @xcite that regular series are precisely the rational formal power series for all semirings .",
    "so we also say a regular series as a rational series in this paper .",
    "we next recall the concept of weighted context - free grammar and weighted context - free series .",
    "a _ weighted context - free grammar _ is in essence a classical context - free grammar together with a function mapping rules of the grammar to weights in a certain semiring ( @xcite ) .",
    "let @xmath15 be a semiring .",
    "a weighted context - free grammar ( wcfg ) is defined as a tuple @xmath154 , where @xmath4 ( the set of terminal symbols ) and @xmath155 ( the set of non - terminal symbols ) are two finite sets that are disjoint , @xmath156 ( the start or initial symbol ) is an element in @xmath155 , @xmath157 is a mapping from @xmath158 ( the set of productions or rules ) to @xmath15 .",
    "similar to the classical case , we can define the induction of a weighted context - free grammar @xmath159 .",
    "suppose @xmath160 is a weighted production , and @xmath161 are elements in @xmath162 .",
    "we say @xmath163 is a _",
    "direct induction _ of @xmath164 with weight @xmath165 , denoted by @xmath166 . for productions",
    "@xmath167 in @xmath162 , if @xmath168 , then we say @xmath169 is an induction of @xmath170 with weight @xmath171 , denoted by @xmath172 . the formal power series @xmath173 generated by @xmath159 is defined as @xmath174 ( @xmath88 ) . a series @xmath0 is called _ context - free _ if there is a weighted context - free grammar @xmath159 such that @xmath175 .      we recall several well - know operations of formal power series ( cf .",
    "@xcite ) . for two formal power series @xmath176 , a value @xmath177 , and @xmath178",
    ", we define @xmath179 where @xmath180 if @xmath181 .",
    "we call @xmath182 and @xmath183 the _ sum _ and , respectively , the _ concatenation _ ( or _ cauchy product _ ) of @xmath0 and @xmath96 , and call @xmath184 , @xmath185 , @xmath186 , and @xmath187 the _ left scalar product _ ,",
    "right scalar product _ , the _ kleene closure _ , and the _ reversal _ of @xmath0 , respectively .    given a weighted automaton , @xmath188",
    ", three other operations can be defined for the formal power series recognized by @xmath152 .",
    "for any two states @xmath189 in @xmath100 , and any @xmath190 , we define @xmath191 the following result holds .",
    "[ pro : factor - automata ] suppose @xmath188 is a weighted automaton . for any @xmath113 ,",
    "we have @xmath192    for any @xmath193 , we have @xmath194 hence , @xmath195 .",
    "in this section , we first introduce quotients of formal power series and then , upon this operation , introduce for each formal power series @xmath0 a canonical weighted automaton that recognizes @xmath0 .",
    "properties of the quotient operation is also studied .",
    "let @xmath196 be a formal power series , @xmath197 a word .",
    "the _ left quotient _ of @xmath0 by @xmath6 , written @xmath198 , is the formal power series @xmath199 defined as : @xmath200    dually , the _",
    "right quotient _ of @xmath0 by @xmath6 , written @xmath201 , is the formal power series @xmath202 defined as : @xmath203 for any @xmath204 .",
    "the left quotient operation introduces an equivalent relation on @xmath85 .",
    "[ dfn : non - distinguishable - relation ] suppose @xmath205 .",
    "we say two words @xmath206 and @xmath207 are _ non - distinguishable _ in @xmath0 , written @xmath208 , if @xmath209 , i.e. , if @xmath210 for all @xmath197 .",
    "it is straightforward to show that @xmath211 is an equivalent relation on @xmath85 . for each word @xmath197 ,",
    "we write @xmath212_a$ ] for the equivalent class of @xmath211 that contains @xmath6 .",
    "[ le : mini dwa ] suppose @xmath213 .",
    "the mapping defined by @xmath212\\mapsto u^{-1}a$ ] @xmath214 is a bijection from the set of equivalent classes of @xmath211 to the set of left quotients of @xmath0 .",
    "we define a deterministic weighted automaton @xmath215 as follows :    * @xmath216 is the quotient of @xmath85 modulo @xmath211 ; * @xmath217 is defined as @xmath218,\\sigma)=[\\theta\\sigma ] , \\hspace*{8 mm } ( \\sigma\\in{\\sigma^{\\ast}})\\ ] ] * @xmath219 is the singleton state @xmath220 $ ] in @xmath221 ; * @xmath222 is defined by @xmath223)=a(\\theta)$ ] for @xmath193 .",
    "[ pro : minimal dwa ] suppose @xmath224",
    ". then @xmath1 is the minimal dwa that recognizes @xmath0 .",
    "it is easy to see that @xmath225 is well - defined and , hence , @xmath215 is a dwa .",
    "it is straightforward to show that @xmath1 recognizes @xmath0 . in other words",
    ", there is a dwa @xmath104 that accepts @xmath0 for any formal power series @xmath0 . in general",
    ", @xmath1 is not finite ; but , when it is finite , @xmath1 is the minimal dwa that recognizes @xmath0 .    by lemma [ le : mini dwa ] ,",
    "an equivalent minimal dwa @xmath226 that recognizes @xmath0 can be constructed by using the left quotients of @xmath0 as follows    * @xmath227 , the set of all left quotients of @xmath0 by a word ; * @xmath228 defined by @xmath229 * @xmath230 ; * @xmath231 is defined by @xmath232 for @xmath193 .",
    "the following proposition presents a characterization of formal power series that can be recognized by a finite dwa .",
    "[ pro : dffa ] suppose @xmath205 .",
    "given @xmath177 , we write @xmath233 , @xmath234 , and @xmath235}=\\ { \\theta\\in{\\sigma^{\\ast}}| a(\\theta)=r\\}$ ]",
    ". then the following statements are equivalent .",
    "* @xmath0 can be recognized by a finite dwa .",
    "* @xmath236 is finite and each @xmath237 is a regular language for @xmath238 .",
    "* @xmath236 is finite and each @xmath235}$ ] is a regular language for @xmath238 .",
    "* there exist @xmath239 and @xmath240 regular languages @xmath241 over @xmath4 , which are pairwise disjoint , such that @xmath242 .",
    "* @xmath211 has finite index , i.e. , @xmath221 is finite .",
    "the proof is similar to that given for lattices in @xcite .",
    "but _ when can a regular series be recognized by a finite dwa _ ?",
    "this is closely related with the structure of semiring @xmath15 .",
    "it can be shown that ( cf.@xcite ) , for any regular series @xmath0 , @xmath0 can be recognized by a finite dwa iff the monoid @xmath243 and @xmath244 are both locally finite , where a monoid @xmath245 is locally finite if every submonoid generated by a finite subset of @xmath246 is also finite . in particular , if @xmath15 is finite , regular series and dwa - regular series are the same .",
    "the left quotient of a series @xmath0 by a word @xmath6 can be regarded as a left action of @xmath85 on @xmath92 , i.e. , a mapping @xmath247 .",
    "the action satisfies the following conditions .",
    "[ pro : quotient - word ] let @xmath15 be a semiring .",
    "suppose @xmath205 , @xmath86 is the empty word in @xmath85 , @xmath248 are words in @xmath85 , and @xmath240 is a value in @xmath15 .",
    "then we have    * @xmath249 , @xmath250 , @xmath251 ; * @xmath252 , @xmath253 ; * @xmath254 , @xmath255 , @xmath256 , @xmath257 @xmath258 .",
    "straightforward .",
    "when the semiring @xmath15 is complete , the left quotient operation can be extended from words to series in a natural way .",
    "let @xmath259 be two formal power series in @xmath92 .",
    "we define the _ left quotient _ of @xmath0 by @xmath10 , denoted by @xmath260 , as @xmath261    similarly , we can define the _",
    "right quotient _ of @xmath0 by @xmath262 for any @xmath263 , denoted by @xmath264 as @xmath265    it is easy to see that when the formal power series @xmath10 is a word @xmath6 , then @xmath266 and @xmath267 .",
    "we summarize some algebraic properties of the quotient operation .    [",
    "pro : quotient - fps ] let @xmath15 be a complete semiring .",
    "suppose @xmath268 .",
    "then    * @xmath269 , @xmath270 ; * @xmath271 , @xmath272 ; * @xmath273 , @xmath274 ; * @xmath275 , @xmath276 ; * @xmath277 , @xmath278 , @xmath279 , @xmath280 ; * if @xmath15 is commutative , then @xmath281 , @xmath282 .",
    "if the semiring @xmath15 is commutative , the following lemma shows that the right quotient is dual to the left quotient , where the reversal operation @xmath283 is defined ( see eq .",
    "[ eq : a^r ] ) as @xmath284 for any @xmath181 .",
    "[ lemma : right - quotient ] suppose @xmath15 is a complete semiring .",
    "for @xmath285 , if @xmath286 , @xmath287 for any @xmath288 , then @xmath289 in particular , if @xmath0 is a classical language , i.e. , @xmath290 or if @xmath15 is commutative , the above equalities hold .",
    "straightforward .    by the above result ,",
    "if the semiring @xmath15 is commutative , then the right quotient is dual to the left quotient by the reversal operation .",
    "properties of the right quotient can be dually obtained in this case .      in this subsection",
    ", we study the language properties of the quotient of series .",
    "we first recall a preliminary result which will be used in the proof .",
    "@xcite][le : proper ] suppose @xmath262 is a proper and regular series in @xmath92 .",
    "then there exists a weighted automaton @xmath291 that recognizes @xmath262 such that @xmath292 and @xmath293 for any @xmath113 .",
    "[ pro : quotient - closeness ] let @xmath15 be a complete semiring .",
    "suppose @xmath294 are former power series in @xmath92 . then    * if @xmath0 is regular , then @xmath260 and @xmath264 are regular .",
    "* if @xmath0 is dwa - regular , then @xmath260 and @xmath264 are dwa - regular .",
    "* for a commutative semiring @xmath15 , if @xmath0 is context - free , @xmath10 and @xmath262 are regular , then @xmath260 and @xmath264 are context - free . * if @xmath0 is context - free , @xmath10 and @xmath262 are dwa - regular , then @xmath260 and @xmath264 are context - free",
    ".    see appendix a.    using the quotient of a series @xmath0 by a series , we have a related deterministic weighted automaton @xmath295 where @xmath296 , and @xmath297 . because the accessible part of @xmath298 is the minimal dwa @xmath299 ( cf .",
    "( [ eq : m - a ] ) ) , hence @xmath300 .",
    "recall in the classical case , if @xmath0 is a regular language over @xmath4 , then @xmath301 ( the set of all left quotients of @xmath0 by languages ) is a finite set .",
    "this does not hold in general .",
    "in fact , the finiteness of @xmath302 heavily depends on the finiteness of the semiring @xmath15 .",
    "[ pro : quotient automaton ] let @xmath15 be a semiring . then @xmath15 is finite if and only if @xmath298 is finite for any dwa - regular series @xmath0 in @xmath92 , where @xmath303 is the weighted automaton that recognizes @xmath0 defined in ( [ eq : b_a ] ) .",
    "suppose @xmath298 is finite for any dwa - regular series @xmath0 .",
    "in particular , @xmath298 is finite for @xmath304 .",
    "take @xmath305 , for any @xmath177 , let @xmath306 ( which is a series over @xmath4 ) . by a simple calculation ,",
    "the left quotient @xmath307 is @xmath308 , i.e. , @xmath309 , where @xmath310 for any @xmath88 .",
    "then , as a subset of @xmath311 , the set @xmath312 is finite . hence , @xmath15 is a finite set .",
    "conversely , suppose @xmath313 is finite .",
    "for any @xmath314 , let @xmath315 . then @xmath316 . since @xmath0 is regular , there exist finite regular languages @xmath241 such that @xmath317 . by proposition [ pro : quotient - fps ]",
    ", it follows that @xmath318 .",
    "since @xmath319 is regular , the set @xmath320 is finite .",
    "it follows that the set @xmath321 is also finite .    in the remainder of this paper",
    ", we will consider the residual operations on formal power series .",
    "in this section , we study the residuals and factorizations of formal power series . for @xmath322 , the _ left residual _ of @xmath0 by @xmath10 , written as @xmath323 , is defined as the largest @xmath324 such that @xmath325 .",
    "similarly , we define the _ right residual _ of @xmath0 by @xmath10 , written as @xmath326 , as the largest @xmath324 such that @xmath327 .",
    "we note that @xmath323 and @xmath326 need not exist for all @xmath328 .",
    "the following proposition shows that residuals always exist when @xmath15 is a complete c - semiring .",
    "we recall that each c - semiring is commutative .",
    "suppose @xmath15 is a complete c - semiring .",
    "for any @xmath329 , @xmath323 and @xmath330 do exist and we have @xmath331    because @xmath15 is a complete c - semiring , we know @xmath332 exists for any subset @xmath333 of @xmath92 .",
    "moreover , the concatenation operation satisfies the following conditions : @xmath334 that is to say , @xmath92 is a quantale under the operations @xmath335 and concatenation .",
    "it is then easy to see that @xmath336 and hence @xmath337 is the largest @xmath338 such that @xmath339 , i.e. , @xmath340 .",
    "similarly , we have @xmath341 .",
    "the following proposition shows that left residual and right residual are dual to each other .",
    "[ prop : dual - residuals ] let @xmath15 be a complete c - semiring .",
    ". then we have @xmath342 and @xmath343 @xmath344 .",
    "straightforward .    by the above result , in the following",
    ", we often consider only one ( either left or right ) residual .",
    "dual results can be applied to the other residual .",
    "left residual has close connection with left quotient .",
    "[ pro : quotient - word ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath0 is a formal power series in @xmath92 , @xmath6 is a word in @xmath85 .",
    "then @xmath198 is the largest language @xmath262 such that @xmath345 , i.e. , @xmath346 .",
    "note that @xmath347 if @xmath348 and @xmath18 otherwise .",
    "it follows that @xmath349 . if @xmath345 , then @xmath350 for any @xmath204 . hence , @xmath351 .",
    "therefore @xmath198 is the largest @xmath262 such that @xmath345 .    in the classical case , given two languages @xmath328 over @xmath4",
    ", we always have @xmath352 in the weighted case , residuals are usually not the intersection of a set of quotients by word .",
    "but we can still represent residuals in terms of quotients by word . before",
    "give the details , we summarize some basic algebraic properties of the residuals .    [ pro : residual quotient ] let @xmath15 be a complete c - semiring . for @xmath329 ,",
    "we have    * @xmath353 , @xmath354 .",
    "* the operations @xmath355 defined by @xmath356 and @xmath357 are two closure operators , where @xmath358 is a closure operator if @xmath359 , @xmath360 and @xmath361 .",
    "* @xmath362 , @xmath363 .",
    "* @xmath364 , @xmath365 .",
    "* @xmath366 . *",
    "@xmath367 , @xmath368 .",
    "we give the proof of ( vi ) , the others are straightforward . by ( ii ) , @xmath369 , then it follows that @xmath370 . on the other hand , since @xmath371 , it follows that @xmath372 .",
    "hence , @xmath367 .",
    "similarly , we have @xmath368 .",
    "we next give the characterization of residuals in terms of quotients by word , where @xmath373 is the residual operation in the quantale @xmath15 defined ( cf .",
    "( [ a - rw - b ] ) ) .    [ pro : characterization of residual quotient ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath374 .",
    "then , for any @xmath375 , we have @xmath376    by proposition  [ prop : dual - residuals ] , we need only prove eq.([eq : x|a ] ) .    for @xmath204 ,",
    "let @xmath377 .",
    "then @xmath378 is a series .",
    "we show @xmath379 , i.e. , @xmath378 is the largest series @xmath262 such that @xmath325 .",
    "first , @xmath380    second , if @xmath325 , then , for any @xmath381 , @xmath382 .",
    "it follows that @xmath383 for any @xmath197 , thus , @xmath384 , i.e. , @xmath385 .",
    "this shows that @xmath386 .",
    "the following proposition shows that dwa - regular series are closed under residual operations .",
    "[ pro : implication - language ] suppose @xmath15 is a complete c - semiring , and @xmath387 . if @xmath0 is dwa - regular , then so are @xmath323 and @xmath330 .    by proposition  [ prop : dual - residuals ] , we need only consider right residuals .",
    "suppose that @xmath388 is a dwa accepting @xmath0 .",
    "then we have @xmath389 for any @xmath390 .",
    "define another weighted automaton , @xmath391 , where @xmath392    then @xmath393 hence , @xmath330 is dwa - regular .      in formal language theory , factorization is an important notion that is closely related to quotients and residuals @xcite .",
    "this notion can be generalized to formal power series straightforwardly .",
    "[ de : factor ] for any @xmath394 , if @xmath325 , then we call @xmath395 a sub - factorization of @xmath0 . furthermore , if the sub - factorization @xmath395 is maximal , i.e. , if @xmath396 , @xmath397 and @xmath398 , then @xmath399 and @xmath400 . in this case",
    "we call @xmath395 a factorization of @xmath0 , and write @xmath401 for the set of all factorizations of @xmath0 .",
    "the relationship between residuals and factorizations of a series is as follows .",
    "[ pro : factor - language ] let @xmath15 be a complete c - semiring . for @xmath387 , we have    * @xmath402 if and only if @xmath403 and @xmath404 . * if @xmath405 , then there exists @xmath402 such that @xmath406 and @xmath407 .",
    "\\(i ) suppose @xmath402 we show @xmath403 and @xmath404 .",
    "for any @xmath288 , we note that @xmath408 if and only if @xmath383 .",
    "hence , @xmath409 .",
    "this shows that @xmath410 .",
    "conversely , by @xmath411 and the maximality of the factorization , we know @xmath412 .",
    "hence , @xmath404 .",
    "similarly , we can show @xmath403 .    on the other hand ,",
    "suppose @xmath403 and @xmath413 . by definition ,",
    "we know @xmath262 is the largest @xmath338 such that @xmath339 , and @xmath10 is the largest @xmath414 such that @xmath415 .",
    "this shows that @xmath395 is a factorization of @xmath0 .",
    "\\(ii ) let @xmath416 , @xmath417 .",
    "it is clear that @xmath406 . by prop .",
    "[ pro : residual quotient ] ( ii ) and ( vi ) , we know @xmath418 and @xmath419 = a / y$ ] .",
    "therefore @xmath402 and @xmath406 and @xmath407 .    by the above proposition ,",
    "a factorization of a formal power series @xmath0 is just a pair @xmath395 such that @xmath10 is the right residual of @xmath0 by @xmath262 and @xmath10 is the left residual of @xmath0 by @xmath10 . in this case",
    ", we also call @xmath10 the _ left factor _ of @xmath0 by @xmath262 and @xmath262 the _ right factor _ of @xmath0 by @xmath10 , respectively .",
    "since @xmath420 , by proposition  [ pro : factor - language ] ( ii ) @xmath0 itself is both a left factor and a right factor .",
    "we denote the corresponding right factor and left factor by @xmath421 and @xmath422 , respectively , where @xmath423 , and call @xmath424 and @xmath425 the _ initial _ and _ final _ factorization , respectively .",
    "we write @xmath426 ( @xmath427 ) for the set of left ( right ) residuals of @xmath0 , i.e. , @xmath428 let @xmath429 be the mapping defined as @xmath430 . by proposition [ pro : residual quotient ] , it is easy to see that @xmath133 is a bijection .",
    "moreover , we have @xmath431",
    "in this section , we use the residuals of a formal power series @xmath0 to construct a weighted automaton which recognizes @xmath0 . to this end , we introduce the notion of the inclusion degree .    [ def : inclusion regree ] suppose @xmath15 is a complete c - semiring . for two @xmath15-subsets @xmath432 ,",
    "the _ inclusion degree _ of @xmath433 into @xmath434 , denoted by @xmath435 , is defined as @xmath436    the following lemma summarizes several useful properties of the inclusion degree operator .    [ le : inclusion ] suppose @xmath15 is a complete c - semiring . for @xmath437 , any @xmath438 , and any @xmath439 , we have    * @xmath440 iff @xmath441 . * if @xmath442 , then @xmath443 . *",
    "@xmath444 .",
    "[ def : universal automaton ] suppose @xmath15 is a complete c - semiring . for @xmath224 , the _ universal weighted automaton _ of @xmath0 , denoted by @xmath2 , is a weighted automaton @xmath445 , @xmath446 , where @xmath447 for any @xmath442 , @xmath108 .",
    "[ pro : ufa1 ] suppose @xmath15 is a complete c - semiring . for @xmath205 , and @xmath448 and @xmath108",
    ", we have @xmath449    since @xmath402 , @xmath450 similarly , we can prove the case for @xmath451 .",
    "as for @xmath452 , it is sufficient to show that @xmath453 iff @xmath454 for any @xmath438 .",
    "this is because , @xmath455 iff @xmath456 , iff @xmath457 , iff @xmath458 , iff @xmath454 .",
    "hence , @xmath459 .",
    "similarly , we have @xmath460 .",
    "the extension of @xmath461 has the following form .",
    "[ pro : extension ] let @xmath15 be a complete c - semiring and suppose @xmath224 . for @xmath462 , @xmath463 , and any @xmath464 , we have @xmath465    first , for any @xmath438 , @xmath466 iff @xmath467 , iff @xmath468 , iff @xmath469 , iff @xmath470 .",
    "hence , @xmath471 .",
    "similarly , we have @xmath472",
    ".    we shall show @xmath473 by induction on the length @xmath124 for @xmath464 .    if @xmath474 , this is just the definition of @xmath452 .",
    "given @xmath464 and @xmath118 , we show that ( [ eq : extension of eta ] ) holds for @xmath475 if ( [ eq : extension of eta ] ) holds for @xmath125 .",
    "@xmath476 conversely , @xmath477 which implies @xmath478 hence , @xmath479",
    ".    therefore , the equality ( [ eq : extension of eta ] ) holds .",
    "we give some properties of universal weighted automaton as follows .",
    "[ pro : future - past ] let @xmath15 be a complete c - semiring and suppose @xmath224 . for @xmath402",
    ", we have @xmath480 , @xmath481 .    for any @xmath390 , @xmath482 on the other hand , @xmath483 hence , @xmath480 .",
    "similarly , we have @xmath481 .",
    "[ th : universal 1 ] let @xmath15 be a complete c - semiring and suppose @xmath224 .",
    "then we have @xmath484 .    for any @xmath390 , @xmath485    on the other hand , @xmath486 therefore , @xmath484 .",
    "so far , we have defined two canonical weighted automata for each @xmath224 , viz .",
    "the minimal dwa @xmath1 and the universal weighted automaton @xmath2 .",
    "both automata recognize @xmath0 .",
    "recall in the classical case , if @xmath0 is a regular language over @xmath4 , then @xmath1 and @xmath2 are both finite automata .",
    "this does not hold in general for weighted automata . in",
    "the following we discuss when @xmath2 is finite .    for @xmath224 ,",
    "write    @xmath487    and let @xmath488    be the @xmath489-sublattice of @xmath15 generated by @xmath490",
    ". then it is well - known that @xmath491 is finite iff @xmath490 is finite ( cf .",
    "@xcite ) .",
    "the following proposition shows the relationship between the finiteness of @xmath2 and the finiteness of @xmath1 .",
    "[ pro : finiteness ] let @xmath15 be a complete c - semiring",
    ". for @xmath224 , the following conditions are equivalent .    * @xmath2 is finite , i.e. , @xmath401 is finite . *",
    "@xmath0 can be accepted by a finite dwa , and @xmath490 in eq .",
    "( [ eq : s - a ] ) is finite .",
    "* @xmath1 is finite , i.e. , @xmath211 has finite index , and @xmath490 is finite .    in particular , if @xmath15 is finite c - semiring or a linear order lattice , the above conditions are equivalent , and the condition `` @xmath490 is finite '' can be omitted .    by proposition",
    "[ pro : dffa ] , @xmath0 is recognized by a finite dwa iff @xmath211 has finite index .",
    "it remains to show that @xmath0 has finite factorizations iff @xmath490 is finite .",
    "assume that @xmath0 can be recognized by a finite dwa and @xmath490 is finite .",
    "this implies that @xmath211 has finite index , i.e. , @xmath221 is a finite set . if @xmath492 , then @xmath493 for any @xmath204 .",
    "it follows that @xmath494 thus @xmath10 induces a unique mapping from @xmath216 into @xmath491 .",
    "since @xmath221 is finite and @xmath490 is finite , the latter implies that the set @xmath491 is also finite .",
    "then the set of the mappings from @xmath221 into @xmath491 is also finite .",
    "therefore , @xmath401 is finite .",
    "on the other hand , suppose @xmath401 is finite .",
    "we first show @xmath1 is a finite dwa .",
    "note that by theorem [ th : universal 1 ] , @xmath0 is accepted by the finite universal weighted automaton @xmath2 . by proposition [ pro : m - minimal ] ( the proof of which is independent to this proposition ) , @xmath1 is a sub - automaton of @xmath2 .",
    "therefore , @xmath0 can be accepted by a finite dwa .    to end the proof , we show @xmath490 is finite .",
    "we prove this by contradiction .",
    "suppose @xmath490 is infinite . since @xmath236 is finite , there is @xmath495 such that the subset @xmath496 of @xmath490 is infinite .",
    "assume that @xmath497 for @xmath197 .",
    "for any @xmath438 , define a series @xmath498 as , @xmath499 if @xmath500 and @xmath501 otherwise .",
    "consider the right residual @xmath502 , by a simple calculation , we have @xmath503 .",
    "it follows that the set @xmath504 is infinite , then @xmath427 is infinite , and thus @xmath401 is infinite . a contradiction",
    "therefore @xmath490 is finite .",
    "we give two examples to illustrate the construction of the universal weighted automaton of a formal power series .",
    "[ ex : finite ]    assume @xmath505 , @xmath506 , where @xmath15 is a linear order lattice under the natural order of the integer numbers . consider the formal power series @xmath224 defined as follows , @xmath507 @xmath0 can be recognized by the dwa @xmath388 presented in figure 1 , where @xmath508 .    ,",
    "scaledwidth=50.0% ]    the set of factorizations of @xmath0 is @xmath509 , where @xmath510 , @xmath511 , for all @xmath512 ; @xmath513 @xmath514 @xmath515     of the formal power series @xmath0,scaledwidth=50.0% ]    by definition , the universal weighted automaton of @xmath0 is @xmath516 , @xmath517 , where for the value @xmath518 of @xmath519 in the given @xmath15-subset . ]    * @xmath520 , * @xmath521 , * @xmath522 is either 2 or 1 , as shown in figure 2 .",
    "[ ex : infinite ]    assume @xmath122 , @xmath523 is the tropical semiring .",
    "consider the formal power series @xmath224 defined as follows @xmath524    by proposition [ pro : dffa ] , @xmath0 can not be recognized by any finite dwa .",
    "however , as a regular series , @xmath0 can be recognized by a finite weighted automaton @xmath525 , where @xmath526 , @xmath527 .",
    "the universal weighted automaton @xmath2 has infinite states @xmath528 , where    @xmath529 ;    and for @xmath530 ,    @xmath531    @xmath532 , for any @xmath533 .    for any @xmath534",
    ", we have @xmath535 if @xmath536 and @xmath537 otherwise , @xmath538 and @xmath539 . in this case , @xmath2 is not a finite weighted automaton .",
    "in this section , we show the weighted automaton @xmath2 defined in the previous section satisfies the following universal property .",
    "[ dfn : universal - property ] suppose @xmath224 and @xmath540 is a weighted automaton that recognizes @xmath0 .",
    "we say @xmath540 satisfies the _",
    "universal property _ if there exists a morphism from @xmath541 to @xmath540 for any weighted automaton @xmath541 such that @xmath542 .    to demonstrate the universality of @xmath2",
    ", we introduce a canonical mapping for each weighted automaton @xmath541 that recognizes a subset of @xmath0 .",
    "let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 and @xmath130 is a weighted automaton such that @xmath542 .",
    "we define @xmath543 by @xmath544 for any @xmath545 , where @xmath546 we call @xmath547 the canonical mapping from @xmath541 to @xmath2 .",
    "the following lemma shows that @xmath133 is a morphism .",
    "[ lemma : universality ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 . if @xmath130 is a weighted automaton such that @xmath542 , then the canonical mapping @xmath547 is a morphism from @xmath137 into @xmath2 .    if @xmath544 , then it is obvious that @xmath548 and @xmath549 .",
    "it follows that @xmath550 and @xmath551 .    for the remainder",
    "part , notice that @xmath552 . then @xmath553 i.e. , @xmath554 . hence , @xmath555 .",
    "then it follows that @xmath556 therefore , @xmath547 is a morphism from @xmath137 into @xmath2 .",
    "the universality of @xmath2 follows immediately .",
    "[ th : universality ] let @xmath15 be a complete c - semiring . for @xmath224 ,",
    "the universal weighted automaton @xmath2 satisfies the universal property , i.e. there is a morphism to @xmath2 from any weighted automaton @xmath137 such that @xmath542 .",
    "the following lemma establishes the connection between the formal power series accepted by two weighted automata connected by a morphism .    [ lemma : morphism1 ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath99 and @xmath130 are two weighted automata .",
    "if @xmath133 is a morphism from @xmath104 into @xmath137 , then we have @xmath557 for any @xmath113 , and thus , @xmath558 . if @xmath133 is a strong homomorphism , then @xmath559 .    for any @xmath390 , @xmath560    hence , @xmath561 and @xmath562 .",
    "then it follows that @xmath558 .",
    "if @xmath133 is a strong homomorphism , then it can be easily verified that @xmath563 for any @xmath390 .",
    "then it follows that @xmath564 hence , @xmath559 .",
    "suppose @xmath99 is a weighted automaton .",
    "we say two states @xmath111 and @xmath112 in @xmath100 are _ mergible _ in @xmath104 if there exist a weighted automaton @xmath130 that accepts the same language as @xmath104 and a surjective morphism @xmath565 such that @xmath566 .",
    "[ pro : mergible ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath213 .",
    "then there is no mergible states in the universal weighted automaton @xmath2 .",
    "otherwise , there is a weighted automaton @xmath567 and a surjective morphism @xmath568 such that @xmath569 , and @xmath570 for two distinct states @xmath395 and @xmath571 in @xmath2 .",
    "then we have , @xmath572 and thus , @xmath573 .",
    "similarly , we have @xmath574 .",
    "therefore , @xmath575 this contradicts with the maximality of the factorization @xmath395 and @xmath571 .",
    "in fact , @xmath2 is the largest non - mergible weighted automaton .",
    "[ co : largest ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 .",
    "then @xmath2 is the largest weighted automaton among those that accept @xmath0 but have no mergible states .",
    "a weighted automaton @xmath137 accepting @xmath0 that has strictly more states than @xmath2 is sent into @xmath2 by a morphism which is necessarily non - injective .",
    "moreover , @xmath2 is the smallest ` universal ' weighted automaton .",
    "[ pro : least ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 .",
    "then @xmath2 is the smallest weighted automaton among those that accept @xmath0 and have the universal property .",
    "suppose that @xmath567 has the universal property with respect to the @xmath0 . as @xmath2 accepts @xmath0 , there should be a morphism from @xmath2 into @xmath567 .",
    "as @xmath2 has no mergible states , this morphism should be injective : @xmath567 has at least as many states as @xmath2 .",
    "applying theorem [ th : universality ] to weighted automata that accepts @xmath0 , we obtain the following corollary .",
    "[ co : m - minimal ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 and @xmath137 is a weighted automaton that accepts @xmath0 . if @xmath541 has no mergible states , then @xmath137 is a sub - automaton of @xmath2 .    by theorem [ th : universality ]",
    ", the canonical mapping @xmath133 from @xmath137 to @xmath2 is a morphism .",
    "because @xmath137 has no mergible states , we know @xmath133 must be one - to - one .",
    "therefore , @xmath137 is a sub - automaton of @xmath2 .",
    "it is not difficult to show that any minimal weighted ( determinate or non - determinate ) automaton that accepts @xmath0 has no mergible states .",
    "the above corollary then suggests a simple way for searching the minimal ( non - determinate ) weighted automaton that accepts @xmath0 : it suffices to check the sub - automaton of the universal automaton @xmath2 which accepts @xmath0 and has minimal states .",
    "the following proposition shows that @xmath1 , the minimal dwa that accepts @xmath0 , is also a sub - automaton of @xmath2 .    [",
    "pro : m - minimal ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath205 .",
    "then @xmath1 is a sub - automaton of @xmath2 .    by corollary  [ co : m - minimal ] , we need only show that @xmath1 has no mergible states .",
    "recall the minimal dwa that accepts @xmath0 is @xmath576 , where    * @xmath577 , * @xmath578 , * @xmath579 , * @xmath580 , * @xmath581 is @xmath582 .    then for any state @xmath583 , @xmath584 .",
    "we show that there are no mergible states in @xmath104 .",
    "otherwise , there are two distinct states @xmath198 , @xmath585 in @xmath100 , but there exists another weighted automaton @xmath137 and a morphism @xmath133 from @xmath104 into @xmath137 such that @xmath137 is the morphic image of @xmath104 , @xmath559 and @xmath586 .",
    "since @xmath587 , there exists @xmath88 such that @xmath588 , i.e. , @xmath589 .",
    "note that @xmath590 then @xmath591    since @xmath592 , it follows that @xmath593 , a contradiction occurs .",
    "therefore , @xmath104 has no mergible states .",
    "in general , it is not effective to construct all factorizations of @xmath0 .",
    "suppose @xmath388 is an arbitrary dwa accepting @xmath0 .",
    "in this section , we give an effective method to construct @xmath2 by using the dwa @xmath594 .",
    "let @xmath595 be the @xmath596-sublattice generated by @xmath491 as defined in eq.([eq : s - a ] ) , i.e. , @xmath597    it is well known that @xmath595 is finite iff @xmath491 is finite ( cf.@xcite ) iff @xmath490 is finite .",
    "write @xmath598 . if @xmath104 is finite and @xmath490 is finite , then @xmath599 is also finite .",
    "we construct a weighted automaton @xmath600 as follows : @xmath601 where @xmath602 is defined by @xmath603 .",
    "we next define a mapping @xmath133 from @xmath604 to @xmath2 . to this end",
    ", we first establish the correspondence between weighted states and factorizations of @xmath0 .",
    "[ prop : xf&yf ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 and @xmath388 is an arbitrary dwa accepting @xmath0 .",
    "then @xmath605 is a factorization of @xmath0 for any weighted state @xmath606 , where @xmath607 and , for any @xmath390 , @xmath608 therefore , the mapping @xmath133 defined by @xmath609 is a mapping from @xmath598 to @xmath401 .    without loss of generality , we assume that @xmath104 is accessible .",
    "since @xmath104 is a dwa , for any @xmath113 , there exists @xmath610 such that @xmath611 .",
    "moreover , if @xmath612 for another @xmath375 , then @xmath593 for any @xmath439 . by this observation",
    ", we have , for any @xmath204 , @xmath613    if we let @xmath614 for any @xmath610 , then we obtain a series @xmath615 such that @xmath616 .",
    "the mapping @xmath617 is also onto .",
    "[ pro : facor - state1 ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath224 and @xmath388 is a dwa that accepts @xmath0 . for any @xmath402 , there is a weighted state @xmath618 such that @xmath619 .",
    "define a weighted state @xmath618 as , for any @xmath113 , @xmath620    by the proof of proposition [ pro : finiteness ] , @xmath10 induces a unique mapping from @xmath216 into @xmath491 , so @xmath433 is well - defined .",
    "we show @xmath619 in the following .    for any @xmath390",
    ", we have @xmath621 hence , @xmath619 .",
    "furthermore , we have    [ pro : strong homo ] let @xmath15 be a complete c - semiring .",
    ". the mapping @xmath133 defined in proposition  [ prop : xf&yf ] is a strong homomorphism from weighted automaton @xmath600 _ onto _ the universal weighted automaton @xmath2 , and thus @xmath622 .",
    "see appendix b.    define an equivalence relation @xmath623 on @xmath599 as follows : @xmath624 it is clear that @xmath625 iff @xmath626 . using this equivalence relation ,",
    "we obtain a quotient weighted automaton from @xmath604 , denoted by @xmath627 , which is isomorphic to @xmath2 .",
    "[ co : construction ] let @xmath224 and @xmath604 be as in proposition  [ pro : strong homo ] .",
    "suppose @xmath627 is the quotient weighted automaton of @xmath604 modulo the equivalent relation @xmath623 on @xmath599 .",
    "then @xmath628 is isomorphic to @xmath2 .",
    "once the dwa @xmath104 is finite and @xmath490 is finite ( this condition can be guaranteed if @xmath15 is finite or @xmath15 is a linear - order lattice as declared in proposition [ pro : finiteness ] ) , the equivalence @xmath623 defined by eq.([eq : sim - relation ] ) can be effectively constructed .",
    "this is because , @xmath629 takes at most @xmath630 states , i.e. , the set @xmath631 as a subset of @xmath100 has at most @xmath632 states , the corresponding @xmath633 has at most @xmath632 values .",
    "therefore , it is sufficient to check these states in eq.([eq : sim - relation ] ) . in turn",
    ", it is sufficient to check those @xmath390 with @xmath634 in eq.([eq : sim - relation ] ) .",
    "hence , the equivalence relation @xmath623 is decidable and the weighted automaton @xmath627 can be effectively constructed .",
    "we next give one example .",
    "[ ex : finite - state ]    consider the formal power series @xmath0 in example [ ex : finite ] , which is recognized by the finite dwa as shown in figure 1 .",
    "then the weighted automaton @xmath635 , where @xmath636 with @xmath637 and @xmath638 for any @xmath113 , @xmath639 @xmath640 and @xmath641 and @xmath642 is either 2 or 1 ( see figure 3 ) . clearly , @xmath643 is isomorphic to @xmath2 .",
    ", scaledwidth=50.0% ]    we next give a detailed examination of the equivalent relation @xmath623 .",
    "the correspondence @xmath133 between the weighted states and the factorizations of @xmath0 stated in proposition  [ prop : xf&yf ] may be not one - to - one .",
    "there may have more than one weighted states correspond to a given factorization .",
    "however , the following proposition asserts that there exists a largest weighted states .",
    "[ pro : largest state ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath205 and @xmath388 is a dwa that accepts @xmath0 . if @xmath644 for all weighted states @xmath645 ( @xmath76 ) , then @xmath646 .",
    "therefore , for each right residual @xmath262 , there exists a largest @xmath647 such that @xmath648 .    by the above propositions , we know for each right residual @xmath262 of @xmath0 there exists a ( unique ) largest weighted state @xmath647 such that @xmath648 . furthermore , suppose @xmath402 .",
    "then @xmath649 is defined by @xmath650 as implied in the proofs of propositions [ prop : xf&yf ] and [ pro : facor - state1 ] . in general , for a weighted state @xmath618 , the structure of the largest weighted state @xmath649 such that @xmath651 is unclear .",
    "but we have the following estimation .",
    "[ pro : largest element1 ] let @xmath15 be a complete c - semiring .",
    "suppose @xmath652 , @xmath653 is a weighted automaton , and @xmath618 a weighted state .",
    "if @xmath654 and @xmath655 , then @xmath656 , where @xmath657 .",
    "let @xmath658 .",
    "then for each @xmath659 we have @xmath660 thus @xmath661 .",
    "it follows that @xmath662 , i.e. , @xmath663 for any @xmath113 .",
    "therefore , @xmath664 for any @xmath665 , hence @xmath656 .    recall that if @xmath15 is the two elements boolean algebra @xmath666 , then @xmath667 forms the whole set of those largest elements ( cf.@xcite ) .",
    "it is still unclear whether each largest weighted state can be represented as the intersection of @xmath668 for a set of @xmath669 .",
    "for a formal power series @xmath0 , we have introduced the notions of ( left and right ) quotients and ( left and right ) residuals of @xmath0 .",
    "as can be seen in the above discussion , these two kinds of operations have different behaviors when considering their algebraic and language properties .",
    "especially , with the associated weighted automata , @xmath298 and @xmath2 have different structure , although they are equivalent as language recognizers .",
    "for example , there exists series @xmath0 such that @xmath298 is infinite but @xmath2 is finite .    in this section , we consider the order relation between the quotients and the residuals of a same series @xmath0 . because the duality between left and right quotients ( residuals ) , we need only compare the left quotient @xmath260 and the left residual @xmath323 of @xmath0 by a series @xmath10 .",
    "our results show that all the four possibilities are possible .",
    "first , if @xmath10 is a word @xmath197 or @xmath670 and @xmath671 , then it is obvious that @xmath672 .",
    "second , let @xmath673 be the two element boolean algebra . then for any languages @xmath674 we have @xmath675 moreover , @xmath672 iff @xmath676 for any @xmath677 ; but if there exists @xmath677 such that @xmath678 , then the above inclusion is strict .",
    "third , let @xmath15 be the tropical semiring @xmath679 , @xmath680 . for @xmath224 , @xmath197 , and @xmath681 , we have @xmath682 , while @xmath683 if @xmath684 and @xmath685 . therefore @xmath686 if @xmath684 and @xmath685 .",
    "fourth , let @xmath15 be the tropical semiring @xmath687 . take @xmath505 .",
    "consider the formal power series @xmath224 defined as follows @xmath688 let @xmath689 .",
    "we show @xmath260 and @xmath323 are incomparable .",
    "by @xmath690 we know @xmath691 , but @xmath692 . therefore @xmath260 and @xmath323 are incomparable .",
    "it is still unclear when ( i.e. for what kind of @xmath15 and @xmath224 ) we will have an uniform order relation between @xmath260 and @xmath323 .",
    "in this paper , we have defined the quotient and residual operations for formal power series .",
    "the algebraic and closure properties under these operations were discussed .",
    "our results show that most nice properties are kept in formal power series .",
    "moreover , we introduced two canonical weighted automata @xmath1 and @xmath2 for each formal power series @xmath0 using the quotients and , respectively , residuals of @xmath0 .",
    "it was shown that @xmath1 is the minimal dwa of @xmath0 , and @xmath2 is the universal weighted automaton of @xmath0 which contains as a sub - automaton any weighted automaton that accepts @xmath0 but has no mergible states .",
    "in particular , any minimal weighted ( deterministic or non - deterministic ) automaton of @xmath0 is a sub - automaton of @xmath2 .",
    "this suggests an efficient way to find ( approximations of ) the minimal weighted nfa of @xmath0 .",
    "last but not least , we also showed , under a rather weak restriction , that @xmath2 is finite iff @xmath1 is finite , and that @xmath2 can be effectively constructed when we have a finite dwa that recognizes @xmath0 .",
    "there are still several open problems left unsolved .",
    "suppose @xmath10 and @xmath0 are two formal power series .",
    "is @xmath323 regular ( context - free ) whenever @xmath0 is regular ( context - free ) ?",
    "what is the precise relation between @xmath260 and @xmath323 ? when characterizing residuals in terms of quotients by word , we require the underlying semiring to be a complete c - semiring . it is easy to see that this requirement is not necessary .",
    "another problem then is , to what extent can we develop the related theory in a weaker semiring structure , e.g. in quantale ?",
    "another interesting question is to develop an abstraction scheme for formal power series and weighted automata based on semiring homomorphism . just like in soft constraint satisfaction @xcite",
    ", we expect that semiring homomorphisms can play an important role in approximately computing the minimal nfa and the universal weighted automaton of a formal power series .",
    "\\(i ) suppose @xmath99 is a weighted automaton accepting @xmath0 .",
    "then , for any @xmath390 , we have @xmath693    define another two weighted automata @xmath694 and @xmath695 , @xmath696 , where    @xmath697    @xmath698    then    @xmath699    @xmath700    hence , @xmath701 , and @xmath702 are regular .",
    "\\(ii ) replace weighted automaton @xmath104 in the proof of ( i ) by a dwa , we can prove that @xmath702 is dwa - regular .",
    "since @xmath0 is dwa - regular , by proposition  [ pro : dffa ] , there are @xmath703 and regular languages @xmath241 such that @xmath704 . by proposition  [ pro : quotient - fps ] , @xmath705 . by lemma  [ lemma : right - quotient ] ,",
    "@xmath706 , it follows that @xmath707 is dwa - regular for any @xmath708 , and thus @xmath260 is dwa - regular by proposition  [ pro : dffa ] again .",
    "\\(iii ) let @xmath709 .",
    "then @xmath710 and @xmath711 is the proper part of @xmath262 .",
    "it is obvious that @xmath262 is regular iff @xmath711 is regular . by proposition [ pro : quotient - fps ] , @xmath712 .",
    "@xmath713 is context - free since context - free languages are closed under scalar operation . to show @xmath264 is context - free",
    ", it suffices to show that @xmath714 is context - free . without loss of generality ,",
    "we assume that @xmath262 is proper , i.e. , @xmath715 .",
    "there exist a context free - grammar @xmath716 and a weighted automaton @xmath291 satisfying the conditions of lemma [ le : proper ] , such that @xmath717 and @xmath718 .",
    "construct a new weighted context - free grammar @xmath719 , where , @xmath720 , @xmath721 , @xmath722 is constructed as follows ,    ( ii-1 ) @xmath723 for each @xmath724 ;    ( ii-2 ) @xmath725 if @xmath726 and @xmath727 ;    ( ii-3 ) @xmath728 if @xmath729 and @xmath730 .",
    "let @xmath88 .",
    "we note that @xmath731\\}\\\\ ay^{-1}(w ) & = & \\sum\\{a(wu)y(u ) | u\\in{\\sigma^{\\ast}}\\ } \\\\ & = & \\sum\\{(r_{11}\\otimes r_{12}\\otimes \\cdots\\otimes   r_{1l})\\otimes ( \\delta(q_0,\\sigma_1,q_1)\\otimes \\cdots \\otimes \\delta(q_{m-1},\\sigma_m , q_f))| \\\\ & & \\hspace*{10 mm }   ( \\exists \\alpha_1,\\cdots,\\alpha_{l-1 } ) ( \\exists \\sigma_1,\\cdots,\\sigma_m \\in \\sigma)(\\exists q_0 , q_1,\\cdots , q_{m-1}\\in q ) \\\\ & &   \\hspace*{30 mm } \\mbox{such that\\ } s\\overset{r_{11}}{\\rightarrow } \\alpha_1\\overset{r_{12}}{\\rightarrow}\\cdots\\overset{r_{1l}}{\\rightarrow}w\\sigma_1\\cdots\\sigma_m\\}.\\end{aligned}\\ ] ]    to show @xmath732 , it suffices to show that they have the same non - zero sum - terms in @xmath15 .",
    "that is , each non - zero sum - term @xmath733 in the equality of @xmath734 also appears in the equality of @xmath735 as a sum - term , and vise verse .",
    "on one hand , suppose there exists a sequence @xmath736 such that @xmath737 i.e. , @xmath738 is a non - zero term in @xmath734 .",
    "notice that the semiring @xmath15 is assumed to be commutative and a production of type ( ii-3 ) commutes with one of the type ( ii-1 ) or ( ii-2 ) .",
    "the above sequence of productions can be rearranged so that all the productions of type ( ii-3 ) precede those of type ( ii-1 ) and ( ii-2 ) .",
    "hence we may assume that by type ( ii-3 ) productions @xmath739 and by type ( ii-1 ) and ( ii-2 ) productions @xmath740    since the induction ( [ eq:24 ] ) is by type ( ii-1 ) and ( ii-2 ) , each @xmath741 is in @xmath4 .",
    "since every term in the induction ( [ eq:23 - 2 ] ) corresponds to a production of @xmath157 , it follows that there exists @xmath742 such that @xmath743 is an induction in @xmath159 .",
    "furthermore , for each @xmath744 , we have either @xmath745 or @xmath746 for some @xmath747 .",
    "let @xmath665 be the largest integer such that @xmath748 and let @xmath749 , @xmath750 . because @xmath293 for any @xmath113 , it follows that @xmath751 and @xmath752 for any @xmath753 . omitting the weight @xmath19 by using the type ( ii-1 ) productions , i.e. , @xmath754",
    ", it follows that the leaving terms , after rearranging , is @xmath755 and @xmath756 this shows that the term @xmath757 is also a term of @xmath735 .    on the other hand , assume that @xmath758 in @xmath159 for @xmath759 and @xmath760 , and there exists states @xmath761 in @xmath100 such that @xmath762 then @xmath763 is a term in the sum @xmath735 . since the induction ( [ eq:25 ] ) is in @xmath159 , by type ( ii-3 ) productions we have @xmath764 where @xmath765 is chosen as in ( [ eq:26 ] ) for @xmath766 .    applying type ( ii-1 ) productions",
    "to @xmath767 and type ( ii-2 ) productions to @xmath768 , @xmath769 we see that @xmath770    hence , @xmath771 is a term in the sum of @xmath734 .    therefore , @xmath732 for any @xmath88 .",
    "therefore , @xmath772 and @xmath264 is context - free .",
    "since @xmath15 is commutative , by the duality between left and right quotients , it follows that @xmath260 is also context - free once @xmath10 is regular and @xmath0 is context - free .",
    "\\(iv ) by the proof of statement ( iii ) , we have the following simple observation : if @xmath104 is a dwa in the proof of statement ( iii ) , i.e. , @xmath104 is a classical deterministic finite automaton with a unique final state .",
    "then the commutativity of @xmath15 is not necessary in the proof of the above proposition .",
    "this is because , in this case , the weights in type ( ii-1 ) and ( ii-2 ) productions take values @xmath19 , and a production of type ( ii-3 ) commutes with one of type ( ii-1 ) or ( ii-2 ) . in this case , if we let @xmath773 , then @xmath264 is context - free .    for a general finite dwa @xmath774 , we write @xmath775 for a finite dwa with unique final state @xmath112 for any state @xmath112 in @xmath100 .",
    "if we let @xmath776 , then @xmath777 is context - free by the above observation . by a simple calculation",
    ", we have @xmath778 .",
    "then , by proposition [ pro : quotient - fps ] ( ii ) , we have @xmath779 since @xmath777 is context - free for any @xmath113 and the family of weighted context - free language is closed under scalar product and finite sum , it follows that @xmath264 is context - free .",
    "similar to the proof of statement ( ii ) , @xmath260 is context - free if @xmath10 is dwa - regular and @xmath0 is context - free .",
    "this shows that the statement ( iv ) holds .",
    "let us first show the following equality holds , @xmath780 consider @xmath781 .        noting that if @xmath6 does not have the form @xmath786 for any @xmath375 , then @xmath787 .",
    "thus , @xmath788 next , let us prove the following equality @xmath789 on one hand , suppose @xmath790 for some @xmath791 and @xmath792",
    ". then we have @xmath793 for any @xmath113 .",
    "therefore , @xmath794 for any @xmath113 . hence , @xmath795 this further implies that @xmath796        we next show @xmath801 for some weighted state @xmath434 ( in fact , the largest weighted state @xmath434 such that @xmath802 ) , where @xmath434 is defined by , @xmath803 by proposition [ pro : facor - state1 ] , @xmath434 satisfies @xmath802 .",
    "then @xmath804 and then eq.([eq:49 ] ) holds .",
    "we next show that @xmath133 also satisfies the following two conditions : @xmath807 for eq.([eq : ja_xy ] ) , we have @xmath808 , and @xmath619 , then @xmath809 . if we let @xmath810 , and thus @xmath811 can take @xmath812 , this shows that eq.([eq : ja_xy ] ) holds ."
  ],
  "abstract_text": [
    "<S> quotient is a basic operation of formal languages , which plays a key role in the construction of minimal deterministic finite automata ( dfa ) and the universal automata . in this paper </S>",
    "<S> , we extend this operation to formal power series and systemically investigate its implications in the study of weighted automata . in particular , we define two quotient operations for formal power series that coincide when calculated by a word . </S>",
    "<S> we term the first operation as ( left or right ) _ quotient _ , and the second as ( left or right ) _ residual_. to support the definitions of quotients and residuals , the underlying semiring is restricted to complete semirings or complete c - semirings . </S>",
    "<S> algebraical properties that are similar to the classical case are obtained in the formal power series case . </S>",
    "<S> moreover , we show closure properties , under quotients and residuals , of regular series and weighted context - free series are similar as in formal languages . using these operations , </S>",
    "<S> we define for each formal power series @xmath0 two weighted automata @xmath1 and @xmath2 . </S>",
    "<S> both weighted automata accepts @xmath0 , and @xmath1 is the minimal deterministic weighted automaton of @xmath0 . </S>",
    "<S> the universality of @xmath2 is justified and , in particular , we show that @xmath1 is a sub - automaton of @xmath2 . </S>",
    "<S> last but not least , an effective method to construct the universal automaton is also presented in this paper .    formal power series ; weighted automaton ; complete c - semiring ; quotient ; residual ; universal automaton ; factorization </S>"
  ]
}