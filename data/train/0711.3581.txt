{
  "article_text": [
    "traders willing to trade in electronic markets can either place market orders , which are immediately executed at the current best listed price , or they can place limit orders .",
    "limit orders are stored in the exchange s book and executed using time priority at a given price and price priority across prices .",
    "a transaction occurs when a market order hits the quote on the opposite side of the market .    in the last few years several order driven microscopic models",
    "have been introduced to explain the statistical properties of asset prices , we cite in particular bottazzi et al .",
    "( 2005 ) , consiglio et al .",
    "( 2003 ) , chiarella and iori ( 2002 ) , daniels et al .",
    "( 2002 ) , li calzi and pellizzari ( 2003 ) , luckock ( 2003 ) , raberto et al .",
    "( 2001 ) and gil - bazo et al .",
    "see also slanina ( 2007 ) for a recent overview .",
    "the aim of chiarella and iori ( 2002 ) was to introduce a simple auction market model in order to gain some insights into how the placement of limit orders contributes to the price formation mechanism .",
    "the impact on the market of three different trading strategies : noise trading , fundamentalism and chartism were analyzed .",
    "it was shown that the presence of chartism plays a key role in generating realistic looking dynamics , such as volatility clustering , persistent trading volume , positive cross - correlation between volatility and trading volume , and volatility and bid - ask spread .",
    "while several microstructure models have been able to generate price trajectories that share common statistical properties with real asset prices , few studies have so far investigated the properties of generated order flows and of the order book itself .",
    "recently , the empirical analysis of limit order data has revealed a number of intriguing features in the dynamics of placement and execution of limit orders . in particular , zovko and farmer ( 2002 ) found a fat - tailed distribution of limit order placement from the current bid / ask ( with an exponent around @xmath0 ) .",
    "bouchaud et al .",
    "( 2002 ) and potters and bouchaud ( 2003 ) found a fat - tailed distribution of limit order arrival ( with an exponent roughly equal to @xmath1 , smaller than the value observed by zovko and farmer ) and a fat - tailed distribution of the number of orders stored in the order book ( with exponent of about @xmath2 ) .    in order to build a model that can incorporate these recent empirical findings of limit order data , we here extend the original model of chiarella and iori ( 2002 ) in two main respects .",
    "first , agents apply different time horizons to the different components of their strategies ; longer time horizons for the fundamentalist component and shorter horizons for chartist and noise trader component .",
    "second , agents are not constrained to merely submit orders of size one , but rather submit orders given by an asset demand function determined in the traditional economic framework of expected utility maximisation . in this way",
    "the ongoing evolution of the market feeds back into the asset demands of the different agents .",
    "we simulate our model and compare its qualitative predictions for different strategies of our population of traders .",
    "we show in particular with the introduction of chartist strategies into a population of utility optimizing traders that our model is not only capable of generating realistic asset prices , fat tails and volatility clustering but , is also capable of reproducing the empirically observed regularities of order flows .",
    "the analysis of order book data has also added to the debate on what causes fat tailed fluctuations in asset prices .",
    "gabaix et al .",
    "( 2003 ) put forward the proposition that large price movements are caused by large order volumes .",
    "a variety of studies have made clear that the mean market impact is an increasing function of the order size , in contrast farmer et al .",
    "( 2004 ) have shown that large price changes in response to large orders are very rare .",
    "furthermore these authors have also shown that an order submission typically results in a large price change when a large gap is present between the best price and the price at the next best quote ( see also weber and rosenow ( 2005 ) and gillemot et al .",
    "( 2005 ) ) .",
    "we show in section 3 that in the model proposed in this paper large returns are also mostly associated with large gaps in the book .",
    "the paper is structured as follows ; in section [ themodel ] we model the fundamentalist , chartist and noise trader components of expectations and the way in which agents form their demands for the risky asset . in section",
    "[ sim anal ] we undertake a number of simulations of the model under our choice of the asset demand function to determine how well the empirical facts referred to earlier are reproduced .",
    "section [ conclude ] concludes and suggests some avenues for future research .",
    "the appendices contain a number of technical derivations .",
    "we assume that all agents know the fundamental value @xmath3 of the asset , which we take to follow a geometric brownian motion .",
    "agents also know the past history of prices . at any time",
    "@xmath4 the price is given by the price at which a transaction , if any , occurs .",
    "if no new transaction occurs , a proxy for the price is given by the average of the quoted ask @xmath5 ( the lowest ask listed in the book ) and the quoted bid @xmath6 ( the highest bid listed in the book ) : so that @xmath7 , a value that we call the mid - point . if no bids or asks are listed in the book a proxy for the price is given by the previous traded or quoted price .",
    "bids , asks and prices need to be positive and investors can submit limit orders at any price on a prespecified grid , defined by the tick size @xmath8 .",
    "the demands of each trader for the risky asset are assumed to consist of three components , a fundamentalist component , a chartist component and a noise induced component .",
    "the weights applied to these various components will vary in ways to be described below . at any time @xmath4 a trader is chosen to enter the market .",
    "the chosen agent , @xmath9 , forms an expectation about the spot return , @xmath10 , that will prevail in the interval @xmath11 , where @xmath12 is the agent s time horizon .",
    "agents use a combination of fundamental value and chartist rules to form expectations on stock returns , so that @xmath13 , \\label{expect}\\ ] ] where the quantities @xmath14 and @xmath15 represent the weights given to the fundamentalist and chartist component respectively .",
    "in addition , we add a noise induced component @xmath16 , with zero mean and variance @xmath17 to agent s expectations with weight @xmath18 .",
    "the initial term in eq .",
    "( [ expect ] ) normalises the impact of the three trading strategies .",
    "the quantity @xmath19 is the time scale over which the fundamentalist component for the mean reversion of the price to the fundamental is calculated .",
    "finally , the average @xmath20 gives the future expected trend of the chartist component based on the observations of the spot returns over last @xmath12 time steps .",
    "that is , @xmath21 where @xmath22 and @xmath23 are , respectively , the spot return and the spot price at time @xmath4 .    observe that a pure fundamentalist trading strategy has @xmath24 , a chartist trading strategy has @xmath25 , whilst for a noise trading strategy @xmath26 .",
    "we assume that the degree of fundamentalism , chartism and noise trading will be spread across agents , so we model the trading weights as random variables independently chosen . for agent @xmath9",
    "the weights are chosen according to the realizations of the set of laplace distributions , @xmath27 and @xmath28 for @xmath29 and @xmath30 .",
    "the average and variance of these densities depend on the values of @xmath31 , @xmath32 and @xmath33 .",
    "so that : @xmath34=\\sigma_{1}$ ] with variance @xmath35=\\sigma_2 $ ] with variance @xmath36 and @xmath37=\\sigma_{n}$ ] with variance @xmath38 .",
    "the future price , @xmath39 , expected at time @xmath40 by agent @xmath9 is given by @xmath41 where we recall that @xmath42 is the current price at time @xmath4 .",
    "it is common to assume that the time horizon of an agent depends on its characteristics .",
    "fundamentalist strategies are typically given much greater weight by long term institutional investors who have longer time horizons , whilst day traders have shorter time horizons and give more weight to chartist rules .",
    "hence we choose the time horizon @xmath12 of each agent according to$ ] refers to the value obtained by rounding up to the next highest integer . ]",
    "@xmath43 , \\label{tau}\\ ] ] where @xmath44 is some reference time horizon .",
    "once the agent has formed its own expectation of the future price , it has to decide whether to place a buy or a sell order and choose the size of the order .",
    "we assume that agents are risk averse and maximize the exponential utility of wealth function @xmath45 where the coefficient @xmath46 measures the relative risk aversion of agent @xmath9 .",
    "we assume that those agents giving greater weight to the fundamentalist component are more risk averse than those giving more weight to the noise trader and chartist components .",
    "this effect is captured by setting @xmath47 where @xmath48 is some reference level of risk aversion .",
    "we next define the portfolio wealth of each agent as @xmath49 where @xmath50 and @xmath51 are respectively the stock and cash position of agent @xmath9 at time @xmath4 .",
    "the optimal composition of the agent s portfolio is determined in the usual way by trading - off expected return against expected risk .",
    "however the agents are not allowed to engage in short - selling .",
    "the number of stocks an agent is willing to hold in its portfolio at a given price level @xmath52 depends on the choice of the utility function . for the cara utility function assumed here the optimal composition of the portfolio , that is the number of stocks the agent wishes to hold is given by @xmath53 where @xmath54 is the variance of returns expected by agent @xmath9 , the agent s relative risk aversion @xmath46 is given by eq .",
    "( [ alpha ] ) , and the agent s investment horizon @xmath55 is defined in eq .",
    "( [ tau ] ) .",
    "we note that eq .",
    "( [ equation8 ] ) is independent of wealth , which obviates the need to keep track of the wealth dynamics of each individual agent .",
    "if the amount @xmath56 is larger ( smaller ) than the number of stocks already in the portfolio of agent @xmath9 then the agent decides to buy ( sell ) .",
    "( [ equation8 ] ) can be derived on the basis of mean - variance one - period portfolio optimization .",
    "appendix  [ demand ] shows how to obtain this equation from the utility function  ( [ utility ] ) following a similar approach to that of bottazzi et al .",
    "we estimate @xmath57 as the variance of past returns , estimated by each agent as @xmath58 ^ 2 , \\label{sigma}\\ ] ] where the average spot return @xmath59 is given by eq .",
    "( [ ave ] ) .    in order to determine the buy",
    "/ sell price range of a typical agent , we first estimate numerically the price level @xmath60 at which agents are satisfied with the composition of their current portfolio , which is determined by @xmath61 eq .",
    "( [ p * ] ) admits a unique solution with @xmath62 since @xmath63 given that short selling is not allowed .",
    "agents are willing to buy at any price @xmath64 since in this price range their demand is greater than their holding . while agents are willing to sell at any price @xmath65 since then their demand is less than their holding .",
    "note that agents may thus wish to sell even if they expect a future price increase .",
    "if we select @xmath66 agents decide to do nothing .    as we want to impose budget constraints we need to restrict ourselves to values of @xmath67 to ensure @xmath68 and so rule out short selling .",
    "furthermore to ensure that an agent has sufficient cash to purchase the desired stocks , the smallest value of @xmath69 we can allow for agent @xmath9 is determined by its cash position ( see eq .  ( [ w ] ) ) , and so is given by the condition @xmath70 again one can easily show that this equation also admits a unique solution with @xmath71 since @xmath72 . indeed , comparing eqs .",
    "( [ p * ] ) and  ( [ pm ] ) it can be easily proven that @xmath73 .",
    "we represent the typical agent s buy / sell price range graphically in fig .",
    "[ figure ] .     has been suppressed here ) .",
    "the curve labelled @xmath74 graphs eq .",
    "( [ equation8 ] ) with the dashed section representing negative ( short position ) demand .",
    "the upper limit of the price range is @xmath75 where the positive ( long position ) demand comes to zero .",
    "the minimum limit @xmath76 is determined by the agent s current wealth holding .",
    "the price @xmath60 that separates the buy / sell regions is determined by the agent s current holding , @xmath77 , of stock.,width=226 ]    lllll + & position & type of order & volume +   + @xmath78 & buy & limit order & @xmath79 + @xmath80 & buy & market order & @xmath81 + @xmath66 & no order placement + @xmath82 & sell & market order & @xmath83 + @xmath84 & sell & limit order & @xmath85 +   +    having determined that the possible values at which an agent can satisfactorily trade are in the interval @xmath86,$ ] we next consider how the nature of the agent s order is determined .",
    "agents randomly draw a price @xmath52 from the interval @xmath86 $ ] and if @xmath64 they submit a limit order to buy an amount @xmath87 while if @xmath65 they submit a limit order to sell an amount @xmath88 however if @xmath89 and @xmath90 the buy order can be executed immediately at the ask .",
    "an agent in this case would submit a market order to buy an amount @xmath91 similarly if @xmath92 and @xmath93 the agent would submit a market order to sell an amount @xmath94 if the depth at the bid ( ask ) is not enough to fully satisfy the order , the remaining volume is executed against limit orders in the book .",
    "the agent thus takes the next best buy ( sell ) order and repeats this operation as many times as necessary until the order is fully executed .",
    "this mechanism applies under the condition that quotes of these orders are above ( below ) price @xmath52 .",
    "otherwise , the remaining volume is converted into a limit order at price @xmath52 .",
    "if the limit order is still unmatched at time @xmath95 it is removed from the book .",
    "the essential details of the trading mechanism are summarized in table  [ mechanism ] , showing how it depends on the price level @xmath52 , the `` satisfaction level '' @xmath60 , the best ask @xmath96 and the best bid @xmath97 .",
    "in this section we analyze , via numerical simulations , various properties of prices , order flows and the book implied by the model of section 2 . in the simulations we have considered ( in succession ) three kinds of trading rules , noise trading only ( black ) ,",
    "fundamentalism and noise trading only ( red ) , and , fundamentalism , chartism and noise trading ( green ) .",
    "we set the number of agents at @xmath98 .",
    "agents are initially assigned a random amount of stock uniformly distributed on the interval @xmath99 $ ] and an amount of cash @xmath100 $ ] . in the following simulations we choose @xmath101 and @xmath102 .",
    "we also fix @xmath103 , @xmath104 , @xmath105 , @xmath106 , and @xmath48 = 0.1 .",
    "we choose the fundamental value to be a random walk with initial value @xmath107 zero drift and and volatility @xmath108 .",
    "we run the simulations with a large set of values @xmath31 and @xmath32 ranging from 0 to 30 in order to study the impact of different fundamentalist and chartist components on price , order flows and the book .",
    "the results reported here are the outcome of simulations of 200,000 steps , each of which we repeat 100 times with different random seeds . to test the robustness of the results we have repeated the simulations varying the parameter set within a small neighborhood of those used here .",
    "we have found that the qualitative features reported below are fairly robust to such variations .",
    "our main aim in this section is to gain some insights into the details of the price formation in the model .",
    "figure [ figure2 ] displays sample paths of the price under very different assumptions concerning the trading strategies used . in the first path ( left hand side )",
    "the trading strategy only has a noise trading component and , as we might expect , the fundamental price has nothing to do with the current price generated by the double auction market .",
    "however , once we include the fundamentalist component , the auction market is no longer operating independently of the fundamental and we observe in the centre plot that the market arrives at a price that follows closely the fundamental price @xmath109 .",
    "finally , the right hand plot shows how the addition of the chartist component to the trading strategy affects the price evolution .",
    "this component accentuates the fluctuations of the price as evidenced by the numerous extreme movements that are indeed characteristic of real markets .",
    "these simulations would suggest that big jumps in the price are mainly caused by the chartist component .    , @xmath110 ) , noise trading and fundamentalism ( center , @xmath111 , @xmath112 ) and noise trading , fundamentalism and chartism ( right , @xmath111 , @xmath113).,title=\"fig:\",width=188 ] , @xmath110 ) , noise trading and fundamentalism ( center , @xmath111 , @xmath112 ) and noise trading , fundamentalism and chartism ( right , @xmath111 , @xmath113).,title=\"fig:\",width=188 ] , @xmath110 ) , noise trading and fundamentalism ( center , @xmath111 , @xmath112 ) and noise trading , fundamentalism and chartism ( right , @xmath111 , @xmath113).,title=\"fig:\",width=188 ]    next we analyse the return time series .",
    "figure  [ figure3 ] shows on the left a rather typical path for the returns generated by the model when noise trader , fundamentalist and chartist components are all present . on the right side of figure  [ figure3 ]",
    "we represent the decumulative distribution functions ( ddf ) defined as the probability of having a change in price larger than a certain return threshold . in other words",
    ", we are plotting one minus the cumulative distribution function . in this way",
    "we observe that fat tail behaviour appears once chartism is introduced into the trading strategy and increases with @xmath32 .",
    "the four curves correspond to @xmath114 and @xmath110 ( black ) , @xmath115 ( red ) , @xmath116 ( green ) , @xmath117 ( blue ) .",
    ", @xmath113 ) components all present .",
    "( right ) the decumulative distribution function of the absolute returns with @xmath111 and @xmath110 ( black ) , @xmath115 ( red ) , @xmath116 ( green ) , @xmath117 ( blue).,title=\"fig:\",width=226 ] , @xmath113 ) components all present .",
    "( right ) the decumulative distribution function of the absolute returns with @xmath111 and @xmath110 ( black ) , @xmath115 ( red ) , @xmath116 ( green ) , @xmath117 ( blue).,title=\"fig:\",width=226 ]    to confirm and quantify the robustness of all the above statements we have also computed the hill tail index , the details of which are explained in appendix  [ hill ] .",
    "essentially this index measures the tail exponent ( hill ( 1975 ) ) , the lower it is the fatter the tail of the ddf .",
    "the results are plotted in figure  [ figure4 ] .",
    "the left hand plot shows how the inclusion of the fundamentalist component brings about a fat tail distribution although we do not see big changes when we increase the fundamentalist weight @xmath31 in the market .",
    "the index decreases very slowly and takes values between 4.5 and 3.5 , while in real markets the tail index is normally around or even below 3 ( lux ( 2001 ) , gabaix et al .",
    "( 2003 ) ) .",
    "we also detect that the right tail ( due to positive changes in returns ) of the distribution is fatter ( even though the differences are not statistically significant enough ) for all values of @xmath31 .",
    "this would be in contradiction with the situation in real markets where the skewness of the returns is found to be negative indicating that the tail due to negative returns is fatter than that due to positive returns ( lux ( 2001 ) ) .     with @xmath110 ( left ) and as a function of @xmath32 with @xmath114 ( right ) .",
    "vertical spreads depicts the error bars for the hill exponent which are evaluated across 100 repetitions of the simulations with different random seeds.,title=\"fig:\",width=226 ]   with @xmath110 ( left ) and as a function of @xmath32 with @xmath114 ( right ) .",
    "vertical spreads depicts the error bars for the hill exponent which are evaluated across 100 repetitions of the simulations with different random seeds.,title=\"fig:\",width=226 ]    we consider the impact of the chartist component on the right hand side plot of figure  [ figure4 ] .",
    "we observe a much clearer pattern when the weight of this component of trading behavior increases .",
    "the tail index diminishes drastically to a value below 3 as we increase the weight of the chartist component @xmath32 .",
    "the second important point to emerge from this plot is that it provides the consistent negative skewness for the pdf observed in real markets .",
    "the left tail of the distribution ( negative returns ) is fatter than the right one .",
    "however , increasing the value of @xmath32 beyond about the value of 2 leads to a reversal of the skewness property in the pdf , even though the tails become fatter .",
    "clearly , the parameters of the model need to have a significant chartist component in order that it exhibit behaviour consistent with empirical observations , but not so big as to lose the negative skewness between the positive and negative tails of the return pdf .",
    "we now focus on the long memory property of the volatility .",
    "we first observe this property by means of the volatility autocorrelation @xmath118 where the @xmath119 are the absolute returns @xmath120 over time steps @xmath121 to @xmath122 .",
    "the variable @xmath123 is the absolute return sample mean over a time window of @xmath122 time steps @xmath124 the autocorrelation thus calculates the ratio between the autocovariance and variance estimators . in figure  [ figure5 ] ( left )",
    "we plot the volatility autocorrelation for noise trading ( black ) , noise trading plus fundamentalism ( red ) and noise trading plus fundamentalism and chartism ( green ) in terms of @xmath125 and averaging over the whole data set generated from the simulations .",
    "the volatility autocorrelation is non - negligible when we include the fundamentalist and chartist components in the market for a broader domain .",
    "real markets show a very long range volatility autocorrelation ( lo ( 1991 ) ) .",
    "nonetheless , our model only shows very long term memory when the chartist component is activated .",
    "hence , we not only observe a direct relationship between the chartist component and large returns but also detect that long memory in the volatility appears to be directly related to the inclusion of the chartism component .    to better quantify this effect",
    "we have studied the long range memory of the volatility by implementing the modified r / s , or rescaled range , analysis ( see figure  [ figure5 ] , right ) .",
    "basically , the r / s statistic , introduced by mandelbrot ( 1972 ) is the range of partial sums of deviations of a time series from its mean , rescaled by its standard deviation .",
    "lo ( 1991 ) has modified the statistic so that its behaviour is invariant for short memory processes but deviates for long memory process .",
    "the modified r / s statistic is defined as @xmath126 , \\label{rs1}\\ ] ] where @xmath119 , are a sample of absolute returns and @xmath127 with @xmath128 the term @xmath129 appearing in eqs .",
    "( [ rs1 ] ) and given by eq .",
    "( [ mean ] ) is the sample mean over the time window @xmath130 .",
    "also note that @xmath131 and @xmath132 are the usual sample of variance and autocovariance estimators of x provided in eq .",
    "( [ auto ] ) but taking only @xmath130 elements of the whole sample of size @xmath122 .",
    "the original r / s estimator is recovered by setting @xmath133 . with a value of @xmath134",
    "the modified lo estimator allows us to remove the effects of short range correlations up to the level @xmath135 and thus focuses on long memory effects in the data .",
    "the relevant quantity to study is the ratio @xmath136 where @xmath137 is given by eq .",
    "( [ rs1 ] ) .",
    "the value @xmath138 indicates that there is still memory up to the time scale @xmath130 .",
    "if @xmath139 the series has a persistent behaviour ( at least up to the time scale @xmath130 ) , thus being positively correlated . otherwise ,",
    "if @xmath140 , the series has an anti persistent behaviour , thus being negatively correlated .",
    "the graphs of @xmath141 in the right hand panel of fig .",
    "[ figure5 ] , with @xmath142 for window lengths up to 800 timesteps , again confirm that the chartist component is an important factor in the long memory property of return series .",
    ".5 cm ) , noise trading and fundamentalism ( red , @xmath114 , @xmath110 ) noise trading fundamentalism and chartism ( green , @xmath114 , @xmath115 ) .",
    "( right ) the modified r / s exponent for absolute returns on the left side in terms of the time window .",
    "we here represent the exponent @xmath141 for several trading weights and filter the short term memory for a number of time steps @xmath143 ( cf .",
    "( [ rs1])).,title=\"fig:\",width=226 ] ) , noise trading and fundamentalism ( red , @xmath114 , @xmath110 ) noise trading fundamentalism and chartism ( green , @xmath114 , @xmath115 ) .",
    "( right ) the modified r / s exponent for absolute returns on the left side in terms of the time window .",
    "we here represent the exponent @xmath141 for several trading weights and filter the short term memory for a number of time steps @xmath143 ( cf .",
    "( [ rs1])).,title=\"fig:\",width=226 ]      in this section we investigate the impact of fundamentalist and chartist trading profiles on the order submission strategies and the resulting market book shape .",
    ".,title=\"fig:\",width=226].,title=\"fig:\",width=226].,title=\"fig:\",width=226 ]    figure  [ figure6b ] reveals a higher number , and larger size , of market orders to sell with respect to market orders to buy , particularly in the case of noise trader strategy only .",
    "this indicates that agents are more likely to demand immediacy in execution , via the use of market orders , on the sell side of the market .",
    "figure  [ figure6 ] displays the decumulative distribution function ( ddf ) of the limit order placement distance from the midpoint , for buy ( black ) and sell ( red ) limit orders , with noise trading ( left ) , noise trading and fundamentalism ( centre ) , and noise trading , fundamentalism and chartism ( right ) .",
    "we observe that with only noise trading , the ddf appears to be normally distributed for both buy and sell orders .",
    "when the fundamentalist component dominates both buy and sell limit orders are placed very close to the midpoint and the ddf appears to have an exponential decay ( this also explains why the price follows very closely the fundamental price in this case ) .",
    "when the chartist component is activated more and more limit orders are placed at larger distances from the midpoint generating a hyperbolic decay for the ddf .",
    ".,title=\"fig:\",width=226].,title=\"fig:\",width=226].,title=\"fig:\",width=226 ]    figure  [ figure9 ] shows the value of the hill exponent for the distribution of limit order placement from the best bid - ask ( right ) .",
    "the estimation of the hill exponent gives values comparable with those estimated empirically by zovko and farmer ( 2002 ) and potters and bouchaud ( 2003 ) .",
    "we then measured the distribution of gap sizes , where the gaps are defined as the difference between the best price ( bid / ask ) and the price at the next best quote ( on each side respectively ) . on the left side of figure  [ figure9 ]",
    "we plot the hill exponent for the distribution of the first gap size and show that it decreases with @xmath32 ( this observation , as discussed in the next section , is important in understanding the origin of large price fluctuations ) .     and different values of @xmath32 .",
    "( right ) hill exponent of the order placement distribution for for @xmath111 and different values of @xmath32 .",
    ", title=\"fig:\",width=226 ] and different values of @xmath32 .",
    "( right ) hill exponent of the order placement distribution for for @xmath111 and different values of @xmath32 .",
    ", title=\"fig:\",width=226 ]    the origin of these large gaps can be explained as follows .",
    "as seen in fig .",
    "[ figure6 ] adding the chartist component induces traders to place orders far from the best bid and the best ask .",
    "the region where orders are placed is in fact four times larger than in the fundamentalist case . with the same number of orders spread over a broader region of the book",
    ", larger gaps between orders may arise both on the buy and sell side of the book .",
    "the chartist strategies also have a shorter time horizon @xmath12 that makes the book even more dynamic thus having stronger fluctuations in its shape and eventually creating even more gaps .",
    "moreover , order submission differs for optimistic and pessimistic traders .",
    "an optimistic trader ( @xmath144 ) can choose sell / buy orders at price levels @xmath145 distributed symmetrically around the the current price @xmath42 . a pessimistic trader ( @xmath146 )",
    "instead typically chooses orders at price levels @xmath147 that are systematically below @xmath42 .",
    "if the pessimistic trader chooses an order to sell , the order is very likely to be immediately executed as a market order ( due to the fact that there is a high probability of finding a matching limit order to buy at a low price ) . on the other hand , if the trader chooses an order to buy , it is likely to be a limit order placed at a large distance from the bid .",
    "figure  [ figure12 ] shows this mechanism .",
    "it is this asymmetry between buy / sell orders that is responsible for generating larger gaps on the buy side of the book and thus the negative skewness shown in fig .  [ figure4 ] .    ) in the order placement decision when @xmath148 and for a given snapshot of the book .",
    "( right ) the role of the cara demand function  ( [ utility ] ) in the order placement decision when @xmath149 and for a given snapshot of the book .",
    "the figures at the bottom show a typical pattern of the limit order book at a given time in a simulation .",
    "buy orders placed in the book are represented as positive volume , while sell orders placed in the book are represented as negative volume .",
    "the top figures are particular instances of figure  [ figure ] .",
    "the intersections determine the three different price levels @xmath76 , @xmath60 and @xmath75 for the case of optimistic trader ( @xmath150 ) ( right ) and pessimistic trader ( @xmath151 ) ( left).,title=\"fig:\",width=226 ] ) in the order placement decision when @xmath148 and for a given snapshot of the book .",
    "( right ) the role of the cara demand function  ( [ utility ] ) in the order placement decision when @xmath149 and for a given snapshot of the book .",
    "the figures at the bottom show a typical pattern of the limit order book at a given time in a simulation .",
    "buy orders placed in the book are represented as positive volume , while sell orders placed in the book are represented as negative volume .",
    "the top figures are particular instances of figure  [ figure ] .",
    "the intersections determine the three different price levels @xmath76 , @xmath60 and @xmath75 for the case of optimistic trader ( @xmath150 ) ( right ) and pessimistic trader ( @xmath151 ) ( left).,title=\"fig:\",width=226 ]     is activated .",
    "the value of the parameters are the same as in figure [ figure5].,width=226 ]    figure  [ figure8 ] displays the book shape with noise trading ( black ) , noise trading and fundamentalism ( red ) , noise trading fundamentalism and chartism ( green ) .",
    "the market depth is averaged over the entire simulation period .",
    "order placements are given as prices relative to the midpoint between the best bid and best ask .",
    "we observe that the book has an increasingly more realistic shape with the depth higher toward the best price as the chartist component @xmath32 is activated .",
    "chartist strategies also generate longer , power law , tails in the distributions of orders in the book in qualitative agreement with empirical findings ( bouchaud et al .",
    "( 2002 ) ) .    in summary ,",
    "the risk aversion in the cara utility function  ( [ utility ] ) , has the effect of making noise traders more impatient when they sell than when they buy .",
    "noise traders prefer to sell immediately via market orders , and to buy by submitting limit orders at prices lower than the current quote .",
    "the contribution of fundamentalist rules is that of reducing the imbalance between buy and sell orders of both types , and of concentrating the distribution of orders around the midpoint , thus creating a more realistic shape of the book .",
    "the effect of chartist rules is that of widening the distribution of limit order submissions farther away from the midpoint , thus generating fatter tails in the book and larger gaps between orders , particularly on the buy side of the book .",
    "next we address the fundamental question of what generates large price returns , an issue that has been discussed by several authors including gabaix et al .",
    "( 2003 ) , plerou et al .",
    "( 2004 ) , farmer et al .",
    "( 2004 ) , farmer and lillo ( 2004 ) , and lillo and farmer ( 2005 ) .",
    "we compute the distribution of returns conditional on the size of incoming market orders . to this end ,",
    "we split orders into three groups with approximately the same amount of orders in each .",
    "the first group includes orders for buying or selling less than 15 stocks , the second group has orders of size between 15 and 30 stocks , and the last group orders of size larger than 30 stocks . figure  [ figure10 ] ( left ) displays the conditional distributions of returns , given orders of different sizes , and shows the same power law decay , indicating that large price fluctuations seem to be rather insensitive to order size . in fig .",
    "[ figure10 ] ( right ) we find instead an almost linear relationship between the hill exponent of returns distributions and the hill exponent of the gap distribution , indicating , as suggested by farmer and lillo ( 2004 ) , that the presence of large gaps at the best price is what drives large price changes .",
    "( black ) , @xmath152 size @xmath153 ( red ) , size @xmath154 ( green ) , for @xmath155 and @xmath156 .",
    "( right ) the tail index of the first gaps versus the tail index of returns for @xmath155 and different values of @xmath32.,title=\"fig:\",width=226 ] ( black ) , @xmath152 size @xmath153 ( red ) , size @xmath154 ( green ) , for @xmath155 and @xmath156 .",
    "( right ) the tail index of the first gaps versus the tail index of returns for @xmath155 and different values of @xmath32.,title=\"fig:\",width=226 ]",
    "in this paper we have set up and analysed a model of a double auction market .",
    "each agent determines its demand through maximisation of its expected utility of wealth , and bases its expectation of future return on a fundamentalist , a chartist and a noise trader component .",
    "agents differ in risk aversion , investment time horizon and the weight given to the three components of expected return .",
    "we have thus extended a number of earlier models in this literature which allowed agents to only place orders of unit size , so that the model now incorporates feed back from the ongoing evolution of the market .",
    "we have used a number of statistical tools such as decumulative distribution functions , the hill tail index , and the rescaled range statistic to analyse time series simulated by the model .",
    "we find that the chartist component needs to be activated in order that the generated returns exhibit many empirically observed features such as volatility clustering , fat tails and long memory .",
    "we also find that this approach describes fairly well a number of recently observed stylized facts of double auction markets , such as the fat - tailed distribution of limit orders placement from current bid / ask and the fat - tailed distribution of orders stored in the order book .",
    "our paper also contributes to the debate on what generates large price changes in stock markets .",
    "our simulations seem to confirm the picture proposed by farmer and lillo ( 2004 ) , namely that large returns are driven by large gaps occurring in price levels adjacent to the best bid and best ask .",
    "future research could aim to enrich the economic framework of the model .",
    "for instance in place of allowing the weights on the fundamentalist , chartist and noise trader components in eq .",
    "( [ expect ] ) to the randomly selected they could be chosen on the basis of some fitness measure as in brock and hommes ( 1998 ) .",
    "a further question of interest would be to see how the order book and order flow are affected if we assume agents have crra ( constant relative risk aversion ) utility functions , in which case their asset demands depend on their level of wealth .",
    "we know from chiarella , dieci and gardini ( 2006 ) that in this type of modelling framework crra and cara utility functions lead to different types of dynamics .",
    "jp acknowledges kind hospitality of city university during his stay with grant 2004-be-00314 from agncia de gesti dajuts universitaris i de recerca and also financial support by direccin general de investigacin under contract no .",
    "fis2006 - 05204 .",
    "gi acknowledges generous hospitality and financial support from uts during her stay in sydney in august 2003 .",
    "carl chiarella acknowledges financial support from australian research council grant dp0450526 .",
    "we would like to thank ( tony ) xuezhong he for helpful comments .",
    "bottazzi , g. , dosi , g. , rebesco , i. , 2005 . institutional achitectures and behavioural ecologies in the dynamics of financial markets : a preliminary investigation .",
    "journal of mathematical economics 41 , 197 - 228 .",
    "bouchaud , j .-",
    "p . , m@xmath157zard , m. , potters , m. , 2002 .",
    "statistical properties of stock order books : empirical results and models .",
    "quantitative finance 2 , 251 - 256 .",
    "bouchaud , j .-",
    "p . , kockelkoren , j. , potters , m. , 2006 .",
    "random walks , liquidity molasses and critical response in financial markets .",
    "quantitative finance 6 , 115 - 123 .",
    "bouchaud , j .-",
    "p . , gefen , y. , potters , m. , wyart , m. , 2004 .",
    "fluctuation and response in financial markets : the subtle nature of random price changes .",
    "quantitative finance 4 , 176 - 190 .",
    "brock , w. , hommes , c. , 1998 .",
    "heterogeneous beliefs and routes to chaos in a simple asset pricing model .",
    "journal of economics dynamics and control 22 , 1235 - 1274 .",
    "challet , d. , stinchcombe , r. , 2001 . analyzing and modelling 1 + 1d markets .",
    "physica a 300 , 285 - 299 .",
    "chiarella , c. , dieci , r. , gardini , l. , 2006 .",
    "asset price and wealth dynamics in a financial market with heterogeneous agents .",
    "journal of economic dynamics and control 30 , 1755 - 1786 .",
    "chiarella , c. , iori , g. , 2002 . a simple microstructure model of double auction markets .",
    "quantitative finance 2 , 346 - 353 .",
    "consiglio , a. , lacagnina , v. , russino , a. , 2005 .",
    "a simulation analysis of the microstructure of an order driven financial market with multiple securities and portfolio choices .",
    "quantitative finance 5 , 71 - 88 .",
    "farmer , j.d . ,",
    "gillemot , l. , lillo , f. , mike , s. , sen , a. , 2004 .",
    "what really causes large price changes ? .",
    "quantitative finance 4 , 383 - 397 .",
    "farmer , j.d . ,",
    "lillo , f. , 2004 . on the origin of power laws in financial markets .",
    "quantitative finance 4 , c7-c10 .",
    "daniels , m.g . , farmer , j.d . ,",
    "gillemot , l. , iori , g. , smith , e. , 2003 . quantitative model of price diffusion and market friction based on trading as a mechanistic random process .",
    "physical review letters 90 , 108102 .",
    "gabaix , x. , gopikrishnan , p. , plerou , v. , stanley , h. e. , 2003 .",
    "a theory of power - low distributions in financial market fluctuations .",
    "nature 423 , 267 - 270 .",
    "gillemot , l. , farmer , j.d . ,",
    "lillo , f. , 2006 . there s more to volatility than volume , quantitative finance 6 , 371 - 384 .",
    "gil - bazo , j. , moreno , d. , tapia , m. , 2007 .",
    "price dynamics , informational efficiency and wealth distribution in continuous double auction markets .",
    "computational intelligence 23 , 176 - 196 .",
    "hill , b.m . , 1975 .",
    "a simple general approach to inference about the tail of a distribution .",
    "annals of statistics 3 , 1163 - 1173 .",
    "hommes , c.h . , 2001 .",
    "financial markets as nonlinear adaptative evolutionary systems .",
    "quantitative finance 1 , 149 - 167 .",
    "hurst , h. , 1951 .",
    "long term storage capacity of reservoirs .",
    "transactions of the american society of civil engineers 116 , 770 - 799 .",
    "kirman , a. , teyssiere , g. , 2002 .",
    "microeconomic models for long memory in the volatility of financial time series .",
    "studies in nonlinear dynamics and econometrics 5 , 281 - 302 .",
    "li calzi , m. , pellizzari , p. , 2003 .",
    "fundamentalists clashing over the book : a study of order - driven stock markets .",
    "quantitative finance 3 , 470 - 480 .",
    "lillo , f. , farmer , j.d . , mantegna , r.n .",
    "single curve collapse of the price impact function for the new york stock exchange .",
    "nature 421 , 129 - 130 .",
    "lillo , f. , farmer , j.d . , 2004 . the long memory of the efficient market .",
    "studies in nonlinear dynamics & econometrics 8 , 1 - 33 .",
    "lillo , f. , farmer , j.d . , 2005 . the key role of liquidity fluctuations in determining large price fluctuations .",
    "fluctuations and noise letters 5 , l209-l216 .",
    "lillo , f. , mike , s. , farmer , j.d . ,",
    "theory for long memory in supply and demand .",
    "physical review e 7106 287 - 297 .",
    "lo , a. , 1991 .",
    "long - term memory in stock market prices .",
    "econometrica 59 , 1279 - 1313 .",
    "luckock , h. , 2003 .",
    "a steady - state model of the continuous double auction .",
    "quantitative finance 3 , 385 - 404 .    lux , t. , 2001 .",
    "the limiting extremal behaviour of speculative returns : an analysis of intra - daily data from the frankfurt stock exchange . applied financial economics 11 , 299 - 315 .",
    "mandelbrot , b. , 1972 . statistical methodology for non - periodic cycles : from the covariance to r / s analysis .",
    "annals of economic and social mesurements 1 , 259 - 290 .",
    "plerou , v. , gopikrishnan , p. , gabaix , x. , stanley , h.e . , 2004 . on the origin of power - law fluctuations in stock prices",
    "quantitative finance 4 , c11-c15 .",
    "potters , m. , bouchaud , j .-",
    "more statistical properties of stock order books and price impact .",
    "physica a 324 , 133 - 140 .",
    "potters , m. , bouchaud , j .-",
    "p . , 2006 .",
    "trend followers lose more often than they gain .",
    "wilmott magazine jan 2006 .",
    "raberto , m. , cincotti , s. , focardi , s.m . , marchesi , m. , 2001 .",
    "agent - based simulation of a financial market .",
    "physica a 299 , 320 - 328 .",
    "slanina , f. , 2007 .",
    "critical comparison of several order - book models for stock - market fluctuations .",
    "the european physical journal b , forthcoming .",
    "weber , p. , rosenow , b. , 2005 .",
    "order book approach to price impact .",
    "quantitative finance 5 , 357 - 364 .",
    "zovko , i.i . , farmer , j.d . , 2002 .",
    "the power of patience : a behavioral regularity in limit order placement .",
    "quantitative finance 2 , 387 - 392 .",
    "at the beginning of each trading timestep , the agent constructs its individual demand function and determines the amount of wealth it would like to invest in the risky asset for any possible level of the notional transaction price level @xmath52 .",
    "the residual wealth is invested in a riskless asset with zero interest rate .",
    "for simplicity , in this appendix we drop the agent superscript @xmath9 from all variables .",
    "the following procedure for the determination of individual demand functions is understood to apply to every agent @xmath158 .",
    "we first assume that the agent s decision is taken in terms of a cara ( constant absolute risk aversion ) class as given by eq .",
    "( [ utility ] ) @xmath159 where @xmath48 is the risk aversion of the agent .",
    "the wealth @xmath160 at a given time step is given by a cash amount @xmath161 and the quantity @xmath162 of the risky asset whose value is @xmath163 .",
    "that is : @xmath164 .    at time",
    "@xmath4 the agent places an order of size @xmath165 with price level @xmath52 .",
    "the agent takes these two decisions about size and price level based on its own expected price of the stock at a time horizon @xmath44 ( cf .",
    "( [ pexpect ] ) and  ( [ tau ] ) ) and the maximization of its own expected utility function at horizon @xmath44 . assuming the cara class utility function  ( [ utility2 ] ) , the invertor s expected utility at time @xmath166 is given by @xmath167 , \\label{w1}\\ ] ] where @xmath168 $ ] stands for the expected mean conditional to the information available at time @xmath4 , right before placing the order , with current price level @xmath42 .",
    "the wealth at time @xmath166 ( assuming the order is executed at the price @xmath52 before @xmath166 ) is given by @xmath169 where @xmath170 is the return from @xmath4 to @xmath166 , and the wealth is proportional to @xmath171 . as a zero order approximation",
    ", the agent s expectation for future returns are taken to be gaussian where future return is assumed to be @xmath172 .",
    "this assumption allows us to write eq .",
    "( [ w1 ] ) as @xmath173 + \\alpha^2 v_{t}\\left[w_{t+\\tau}\\right]/2 ) } , % \\label{w2 } % \\end{equation}\\ ] ] where @xmath174 $ ] stands for the conditional variance .",
    "since @xmath175=w_t+s_tp \\mathbb{e}_{t}\\left[\\rho_{t+\\tau}\\right]$ ] and @xmath176=s_t^2p^2v_{t}\\left[\\rho_{t+\\tau}\\right]$ ] , we get @xmath177+\\alpha^2 s_t^2p^2v_{t}\\left[\\rho_{t+\\tau}\\right]/2\\right)}. \\label{w3}\\ ] ] at time @xmath166 the agent expects that the price will be @xmath178 ( cf .",
    "( [ pexpect ] ) ) and the expected return thus reads @xmath179=\\ln(\\hat{p}_{t+\\tau}/p)$ ] .",
    "however , our model does not specify any expectation mechanism for the return variance .",
    "for this reason we take @xmath180=v_t$ ] as the historical one calculated over a certain time window as shown in section  [ themodel ] in eq .",
    "( [ sigma ] ) .    differentiating the expected utility function  ( [ w3 ] ) with respect to @xmath77",
    "gives @xmath181 setting the expression above to zero we determine the optimal amount of stocks , @xmath182 the agent wishes to hold in its portfolio at time @xmath4 for a given price level @xmath52 , based on expectations at time horizon @xmath44 , namely @xmath183 which coincides with eq .",
    "( [ equation8 ] ) .    before going back to the main text",
    ", it is worth mentioning that bottazzi et .",
    "al ( 2005 ) give a similar analysis but with the hypothesis that the expected utility function reads @xmath184-\\frac12 \\alpha v_{t}\\left[w_{t+\\tau}\\right ] .",
    "\\label{w6}\\ ] ] this is simply a function depending linearly on the expected return and its variance ( see also brock and hommes ( 1998 ) , hommes ( 2001 ) and kirman and tessyiere ( 2002 ) . by neglecting higher moments",
    "one is in practice assuming gaussianity in the agent s expectations , as we do .",
    "in order to quantify the fat tails of our distribution of returns we estimate the hill tail index ( hill ( 1975 ) ) . the hill estimator is a maximum likelihood estimator of the parameter @xmath185 of the pareto law @xmath186 for large @xmath187 , where @xmath188 denotes the return pdf . because of its simplicity",
    "the hill estimator has become the standard tool in most studies of tail behaviour of economic data .    to compute the hill tail index ,",
    "the sample elements are put in descending order : @xmath189 where @xmath130 is the length of our data sample and @xmath190 is precisely the number of observations located in the tail of our distribution .",
    "hence , the hill estimator obtains the inverse of @xmath185 as @xmath191 .",
    "\\label{hill}\\ ] ] the main difficulty with this procedure is to choose the optimal threshold @xmath192 .",
    "if we take @xmath190 too small we may have too few statistics , while if we include too large a data set inside the tail then the estimator increases because of contamination with entries from more central parts of the distribution .",
    "there are many techniques aimed at finding this optimal cut - off ( see for instance lux ( 2001 ) ) .",
    "all of them agree that the optimal @xmath192 is defined as the number of order statistics minimizing the mean squared error of @xmath193 defined in eq .",
    "( [ hill ] ) .",
    "however , the optimal sample fraction is not easy to infer from this assertion and one of the most common ways to perform the estimation in the literature is by a bootstrapping technique ( again see lux ( 2001 ) ) .    in our case , we have evaluated the hill tail index for a fixed threshold taking 5% of the data . while this choice does not necessarily provide the optimal cut - off ,",
    "this is the value commonly taken in the literature ( see e.g. lux ( 2001 ) ) .",
    "we have carried out the hill estimator procedure to estimate the right and the left tail exponents of both the return and also the absolute return time series .    the estimated tail index @xmath194 given by eq .",
    "( [ hill ] ) is obtained for every simulation we ran .",
    "it can be shown that @xmath195 is asymptotically normal with zero mean and variance @xmath196 where @xmath197 ( see lux ( 2001 ) for more details )",
    ". the confidence level of being inside the interval of one unit of mean squared error is 67% , being inside the interval of two units of mean squared error is 95% , and being inside the interval of three units of mean squared error is 99.7% .",
    "all these properties allow us to give the error of our measurement and its degree of confidence .",
    "the output of our simulations gives the average of the hill tail index over all the path simulations and its standard deviation .",
    "the estimation should converge to the `` true '' hill tail index in accordance to the central limit theorem .",
    "hence , as the number of simulations increases @xmath198 and @xmath199 where @xmath122 is the total number of simulations and @xmath9 is the index for each simulation .",
    "so that we obtain as the confidence band for @xmath200 , @xmath201 and if one wants to focus on the tail index this reads @xmath202"
  ],
  "abstract_text": [
    "<S> in this paper we develop a model of an order - driven market where traders set bids and asks and post market or limit orders according to exogenously fixed rules . </S>",
    "<S> agents are assumed to have three components to the expectation of future asset returns , namely - fundamentalist , chartist and noise trader . </S>",
    "<S> furthermore agents differ in the characteristics describing these components , such as time horizon , risk aversion and the weights given to the various components . </S>",
    "<S> the model developed here extends a great deal of earlier literature in that the order submissions of agents are determined by utility maximisation , rather than the mechanical unit order size that is commonly assumed . in this way </S>",
    "<S> the order flow is better related to the ongoing evolution of the market . for the given market structure </S>",
    "<S> we analyze the impact of the three components of the trading strategies on the statistical properties of prices and order flows and observe that it is the chartist strategy that is mainly responsible of the fat tails and clustering in the artificial price data generated by the model . </S>",
    "<S> the paper provides further evidence that large price changes are likely to be generated by the presence of large gaps in the book . </S>"
  ]
}