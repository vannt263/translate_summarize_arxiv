{
  "article_text": [
    "as indicated in the abstract , this paper is a significant improvement of the first result about a universal cellular automaton on the ternary heptagrid which was obtained by the same author and y. song , see @xcite .",
    "this time we have a weakly universal cellular automaton on the ternary heptagrid which is the smallest universal cellular automaton obtained in the hyperbolic plane , up to date . as noticed in the quoted paper ,",
    "the translation of the present result to the pentagrid is not straightforward and would require at least one more state with the same pattern of simulation .",
    "we remind that for the pentagrid , the best result was obtained also by the authors of  @xcite in  @xcite , also see  @xcite .",
    "the latter result was a significant improvement of the first result established in the pentagrid , see  @xcite .",
    "for the pentagrid , papers  @xcite reduce the number of states from  22 down to  9 . in @xcite",
    ", we proved that there is a weakly universal cellular automaton on the heptagrid with six states .    in this paper ,",
    "we reduce the number of states to four ones as indicated in the following :    [ universal ] ( margenstern ) @xmath0 there is a cellular automaton on the ternary heptagrid which is weakly universal and which has four states . moreover , the rules of the cellular automaton are rotation invariant .",
    "the cellular automaton has an infinite initial configuration which is ultimately periodic along two different rays of mid - points  @xmath1 and  @xmath2 of the ternary heptagrid and finite in the complement of the parts attached to  @xmath1 and  @xmath2 .",
    "our present cellular automaton also simulates a railway circuit , as this used in papers  @xcite . in order to make this",
    "paper self - contained , section  2 reminds the principles of this simulation . in section  3 ,",
    "we remind the reader about hyperbolic geometry and cellular automata on the ternary heptagrid . still in section  3",
    ", we give the general features of the implementation of a railway circuit in the ternary heptagrid and in section  4 , we precisely define the implementation in the heptagrid . in section  5 , we give the format of the rules and the transition table of the automaton whose action is described in section  4 .",
    "we also indicate how a computer program contributed to the construction of the table .",
    "as initially devised in  @xcite and then mentioned in  @xcite , the circuit uses tracks represented by lines and quarters of circles and switches .",
    "there are three kinds of switches : the * fixed * , the * memory * and the * flip - flop * switches .",
    "they are represented by the schemes given in fig .",
    "[ aiguillages ] .",
    "note that a switch is an oriented structure : on one side , it has a single track  @xmath3 and , on the the other side , it has two tracks  @xmath4 and  @xmath5 .",
    "this defines two ways of crossing a switch .",
    "call the way from  @xmath3 to  @xmath4 or  @xmath5 * active*. call the other way , from  @xmath4 or  @xmath5 to  @xmath3 * passive*. the names comes from the fact that in a passive way , the switch plays no role on the trajectory of the locomotive . on the contrary , in an active crossing , the switch indicates which track between  @xmath4 and  @xmath5 will be followed by the locomotive after running on  @xmath3 : the new track is called the * selected * track .    with the help of these three kind of switches",
    ", we define an * elementary circuit * as in  @xcite , which exactly contains one bit of information .",
    "the circuit is illustrated by fig .",
    "[ element ] , above .",
    "it can be remarked that the working of the circuit strongly depends on how the locomotive enters it .",
    "if the locomotive enters the circuit through  @xmath6 , it leaves the circuit through  @xmath7 or  @xmath8 , depending on the selected track of the memory switch which stands near  @xmath6 .",
    "if the locomotive enters through  @xmath9 , the application of the given definitions shows that the selected track at the switches near  @xmath6 and  @xmath9 are both changed : the switch at  @xmath9 is a flip - flop which is changed by the very active passage of the locomotive and the switch at  @xmath6 is a memory one which is changed because it is passively crossed by the locomotive and through the non - selected track . the just described actions of the locomotive correspond to a * read * and a * write * operation on the bit contained by the circuit which consists of the configurations of the switches at  @xmath6 and at  @xmath9 .",
    "it is assumed that the write operation is triggered when we know that we have to change the bit which we wish to rewrite .    from this element ,",
    "it is easy to devise circuits which represent different parts of a register machine . as an example , fig .",
    "[ unit ] illustrates an implementation of a unit of a register .",
    "as indicated by its name , the * fixed switch * is left unchanged by the passage of the locomotive .",
    "it always remains in the same position : when actively crossed by the locomotive , the switch always sends it onto the same track .",
    "the flip - flop switch is assumed to be crossed actively only .",
    "now , after each crossing by the locomotive , it changes the selected track . the memory switch can be crossed by the locomotive actively and passively . in an active passage",
    ", the locomotive is sent onto the selected track .",
    "now , the selected track is defined by the track of the last passive crossing by the locomotive .",
    "of course , at initial time , the selected track is fixed .",
    "other parts of the needed circuitry are described in  @xcite .",
    "the main idea in these different parts is to organize the circuit in possibly visiting several elementary circuits which represent the bits of a configuration which allow the whole system to remember the last visit of the locomotive .",
    "the use of this technique is needed for the following two operations .",
    "when the locomotive arrives to a register  @xmath10 , it arrives either to increment  @xmath10 or to decrement it . as can be seen on fig .",
    "[ unit ] , when the instruction is performed , the locomotive goes back from the register by the same track .",
    "accordingly , we need somewhere to keep track of the fact whether the locomotive incremented  @xmath10 or it decremented  @xmath10 .",
    "this is one type of control .",
    "the other control comes from the fact that several instructions usually apply to the same register .",
    "again , when the locomotive goes back from  @xmath10 , in general it goes back to perform a new instruction which depends on the one it has just performed on  @xmath10 .",
    "again this can be controlled by what we called the * selector * in  @xcite .    at last ,",
    "the dispatching of the locomotive on the right track for the next instruction is performed by the * sequencer * , a circuit whose main structure looks like its implementation in the classical models of cellular automata such as the game of life or the billiard ball model .",
    "the reader is referred to the already quoted papers for full details on the circuit .",
    "remember that this implementation is performed in the euclidean plane , as clear from fig .",
    "[ example ] which illustrates the case of a few lines of a program of a register machine .",
    "now , we turn to the implementation in the hyperbolic plane , which first requires some features of hyperbolic geometry .",
    "hyperbolic geometry appeared in the first half of the 19@xmath11 century , in the last attempts to prove the famous parallel axiom of euclid s _ elements _ from the remaining ones .",
    "independently , lobachevsky and bolyai discovered a new geometry by assuming that in the plane , from a point out of a given line , there are at least two lines which are parallel to the given line .",
    "later , models of the new geometry were found , in particular poincar s model , which is the frame of all this study .    in this model",
    ", the hyperbolic plane is the set of points which lie in the open unit disc of the euclidean plane whose border is the unit circle .",
    "the lines of the hyperbolic plane in poincar s disc model are either the trace of diametral lines or the trace of circles which are orthogonal to the unit circle , see fig .",
    "[ model ] .",
    "we say that the considered lines or circles * support * the hyperbolic line , simply * line * for short , when there is no ambiguity , @xmath12-*line * when it is needed to avoid it .",
    "[ model ] illustrates the notion of * parallel * and * non - secant * lines in this setting .    the angle between two @xmath12-lines are defined as the euclidean angle between the tangents to their support .",
    "the reason for choosing the poincar s model is that hyperbolic angles between @xmath12-lines are , in a natural way , the euclidean angle between the corresponding supports . in particular , orthogonal circles support perpendicular @xmath12-lines .",
    "110=      remember that in the euclidean plane and up to similarities , there are only three kinds of tilings based on the recursive replication of a regular polygon by reflection in its sides and of the images in their sides . in the hyperbolic plane ,",
    "where the notion of similarity is meaningless , there are infinitely many such tilings . in this paper",
    ", we consider the smallest regular polygon defined by the property that three copies of it can be put around a vertex in order to cover a neighbourhood of the vertex with no overlapping .",
    "this tiling is called the * ternary heptagrid * , see fig .",
    "[ hepta ] and  [ eclate_73 ] for an illustrative representation .",
    "later on , we shall simply say the * heptagrid*. here , we give a rough explanation of these objects , referring to  @xcite and to  @xcite for more details and references .    the left - hand side of fig .",
    "[ hepta ] illustrates the heptagrid .",
    "but , besides the occurrence of a lot of symmetries , nothing can be grasped on the structure of the tiling from this mere picture .",
    "the right - hand side picture of fig .",
    "[ hepta ] illustrates the main tool to make the structure visible .",
    "there , we can see two lines which we call * mid - point lines * as they join mid - points of edges of heptagons belonging to the tiling . on the figure , a half of each line",
    "is drawn with a thicker stroke .",
    "it is a * ray * issued from the common point of these lines : here , a mid - point of an edge of the central heptagon of the figure .",
    "we shall say a * ray of mid - points*. these two rays define an angle , and the set of tiles whose all mid - points of the edges fall inside the angle is called a * sector*.    fig .",
    "[ hepta ] and  [ eclate_73 ] sketchily remember that the tiling is spanned by a generating tree .",
    "in fact , as can be noticed on both the right - hand side of fig .",
    "[ hepta ] and the left - hand side of fig .  [ eclate_73 ] , the set of tiles constituting a sector is spanned by a fibonacci tree , see  @xcite for references .",
    "the name of the tree comes from the fact that the number of nodes on a given level  @xmath13 is @xmath14 , where @xmath15 denotes the fibonacci sequence with @xmath16 , @xmath17 .",
    "now , as indicated in fig .",
    "[ eclate_73 ] , seven sectors around a central tile allow us to exactly cover the hyperbolic plane with the heptagrid which is the tessellation obtained from the regular heptagon described above and easily seen on the figures .",
    "110= 112=    in the left - hand side picture of fig .",
    "[ eclate_73 ] , we represent the sectors in terms of tiles .",
    "the tiles are in bijection with the tree which is represented on the right - hand side part of the figure .",
    "this allows to define the coordinates in a sector of the heptagrid , see @xcite .",
    "we number the nodes of the tree , starting from the root and going on , level by level and , on each level , from the left to the right .",
    "then , we represent each number in the basis defined by the quoted fibonacci sequence , taking the maximal representation , see@xcite .",
    "110= 112=    one of the reasons to use this system of coordinates is that from any cell , we can find out the coordinates of its neighbours in linear time with respect to the coordinate of the cell .",
    "also in linear time from the coordinate of the cell , we can compute the path which goes from the central cell to the cell .",
    "these properties are established in @xcite and they rely on a particular property of the coordinates in the tree which allow to compute the coordinate of the father of a node in constant time from the coordinate of the node . in the paper ,",
    "the coordinate of a cell is of the form @xmath18 where @xmath19 is the number of the sector where the cell is and @xmath20 is its number in the fibonacci tree which spans the sector .",
    "now , as the system of coordinates is fixed , we can turn to the application to the implementation of cellular automata on the ternary heptagrid , we shall say * heptagrid * for short .",
    "a cellular automaton on the heptagrid is defined by a * local transition function * which can be put in form of a table .",
    "each row of the table defines a * rule * and the table has nine columns numbered from  0 to  8 , each entry of the table containing a state of the automaton . on each row",
    ", column  0 contains the state of the cell to which the rule applies .",
    "the rule applies because columns  1 to  7 contain the states of the neighbours of the cell defined in the following way .",
    "for the central cell , its neighbour  1 is fixed once and for all .",
    "for another cell , its neighbour  1 is its father . in all cases ,",
    "the other neighbours are increasingly numbered from  2 to  7 while counter - clockwise turning around the cell starting from side  1 .",
    "the representation mentioned in subsection  3.1 allows to find the coordinates of the neighbours from that of the coordinate of the cell in linear time .",
    "the list of states on a row , from column  0 to  7 is called the * context * of a rule .",
    "it is required that two different rules have different contexts .",
    "we say that the cellular automaton is * deterministic*. as there is a single row to which a rule can be applied to a given cell , the state of column  8 defines the * new state * of the cell .",
    "the local transition function is the function which transforms the state of a cell into its new one , also depending on the states of the neighbours as just mentioned .",
    "an important case in the study of cellular automata is what are called * rotation invariant * cellular automata . to define this notion , we consider the following transformation on the rules .",
    "say that the context of a rule is the * rotated image * of another one if and only if both contexts have the same state in column  0 and if one context is obtained from the other by a * circular * permutation on the contents of columns  1 to  7 .",
    "now , a cellular automaton is * rotation invariant * if and only if its table of transition  @xmath21 possesses the following properties :    - for each row  @xmath22 of  @xmath21 , @xmath21 also contains six rules exactly whose contexts are the rotated image of that of  @xmath22 and whose new state is that of  @xmath22 ;    - if @xmath23 and  @xmath24 are two rules of  @xmath21 whose contexts are the rotated image of each other , then their column  8 contains the same state .    in the rest of the paper",
    ", sometimes we shall have to write the rules of the automaton for a precise situation .",
    "the rules can be written according to the following format : where @xmath25 is the state of the cell , @xmath26 the state of its neighbour  @xmath27 and  @xmath28 is its new state .",
    "however , in tables and also in order to have a more compact notation , a rule will be written as a word .",
    "the above is rewritten as the following word : @xmath29 , using the same notations .",
    "the name of rotation invariance comes from the fact that a rotation around a tile  @xmath21 leaving the heptagrid globally invariant is characterized by a circular permutation on the neighbours of  @xmath21 defined as above .",
    "note that the universal cellular automata devised in  @xcite are rotation invariant while the one of  @xcite is not .",
    "for the question of rotation invariance for cellular automata on the heptagrid , we refer the reader to  @xcite .",
    "now , we can turn to the simulation of the railway circuit by a cellular automaton .",
    "in  @xcite , the various elements of the circuit mentioned in  @xcite are implemented .",
    "in fact , the paper does not give an exact description of the implementation : it only gives the guidelines , but with enough details , so that an exact implementation is useless . in this paper",
    ", we take the same model , and we repeat the main lines of implementation mentioned in  @xcite .",
    "so that we refer the reader to these papers for more precise details .",
    "just to help him / her to have a better of view of the overall configuration , we refer the reader to fig .",
    "[ hypexample ] .",
    "the figure provides a simplified illustration of the implementation of the example given by fig .",
    "[ example ] .",
    "if the reader carefully looks at the figure , he / she will notice that the tracks mostly follow branches of a fibonacci tree and sets of nodes which are on the same level of the fibonacci tree . in this implementation , we have to pay a very precise attention to this situation",
    ". we shall tune it a bit with the help of an intermediary structure . as it will be used for the initial configuration only",
    ", there is no need to translate this structure into the states of the automaton .",
    "110=      the intermediary structure which we shall use consists of a new tiling of the heptagrid with the help of four colours only , green , blue , yellow and orange , denoted @xmath30 , @xmath31 , @xmath32 and  @xmath33 respectively .",
    "the colours allow to implement two kind of fibonacci trees , studied in  @xcite with much detail . from this property",
    ", we shall derive a way to precisely define what we later on call * verticals * and * horizontals*.    the colours are attached to rules which allow to define a family of uncountably many tilings . the rules are the following  :    if @xmath30 , @xmath32 and  @xmath33 are identified to the white colour in a fibonacci tree and  @xmath31 to the black colour , we have the display of a central fibonacci tree , see  @xcite .",
    "if we identify @xmath31 and  @xmath33 with the white colour and @xmath30 together with  @xmath32 with the black colour , we get a standard fibonacci tree , see  @xcite . in order to make the levels more clear in the trees ,",
    "we draw arcs on the tiles : a convex arc on the @xmath32- and @xmath30-tiles , a concave arc on the  @xmath31- and @xmath33-tiles . as the arcs",
    "join the mid - point of an edge to the mid - point of another edge , the arc is continued through the mid - point on the other tile .",
    "the arcs define curves which never intersect and the curves go through any tile of the heptagrid .",
    "we shall call these curves the * isoclines * , following  @xcite where they where introduced .",
    "110= 112= the isoclines have to be seen as the * horizontals * which we need for the tracks of our circuit .",
    "the * verticals * are constituted by the rays of yellow cells .",
    "it can be noticed that these rays intersect all the isoclines .",
    "we have to notice that in general , we do not have a full line of yellow tiles . from fig .",
    "[ hortandvert ] , we can see that once the colour a tile  @xmath34 is fixed , the colour of the tiles in the tree rooted at  @xmath34 are also fixed .",
    "but for the tiles which belong to a tree which contains the tree rooted at  @xmath34 , their colour depend on the colour of the root of this new tree .",
    "this is the reason why there is a family of uncountably many different tilings of the heptagrid with the colouring defined by the above rules .",
    "now , in some of these tilings , there may be a unique line of yellow tiles and there are , of course , infinitely many rays of yellow tiles .",
    "but in the other realizations of the heptagrid with this colouring , there are only rays of yellow tiles",
    ". we may assume that we are in a realization in which there are only rays of yellow tiles .",
    "it is important to notice that the fact that our verticals are rays only does not prevent them from constituting a * grid * with the horizontals we defined .",
    "we have the fact that in between two verticals starting from an isocline  @xmath35 , new verticals appear as we go down from an isocline to the next one , starting from  @xmath35 .",
    "we may ignore these new verticals if we do not need them . and",
    "so , these verticals with the piece of  @xmath35 and a piece of another lower isocline at which we decide to stop constitute a figure which we may call a * quadrangle*. these quadrangles allow us to implement the pieces of circuitry described in section  2 . for the registers , it is enough to display such quadrangles in such a way that the quadrangles have a side along the same yellow branch of a tree .",
    "this is enough to see that we can consider the setting of fig .",
    "[ hypexample ] as enough for our purpose .      from now on ,",
    "we call tiles * cells*. most cells are in a quiescent state which we also call the * blank*. in the following figures of the paper , it is represented by a light blue colour . in our setting we have three other colours : blue , green and red .",
    "also , cells are said to be neighbours if and only if they share a side .    in the setting of this paper",
    ", we have an important difference in the implementation of the railway circuit with respect to what was done in the previous works of  @xcite . in these quoted papers , the tracks consists of sets of blue cells which have exactly two blue neighbours .",
    "the intersection of tracks has a specific colour in  @xcite which entails a rather big number of states while in  @xcite , the intersection is a blue cell too . in these papers ,",
    "the locomotive is a set of two neighbouring cells , a green one and a red one , which successively replace two cells of the track .    here",
    ", we obtain the reduction of the number of states at the price of a more complex structure of the tracks and , consequently , of the crossings and the switches .",
    "the main reason is that we replace the green cell of the locomotive with a blue one .",
    "as the track make use of blue cells also , the simple structure of the tracks in  @xcite can not be used here .    call * elementary track",
    "* a sequence  @xmath36 of cells such that any cell belonging to  @xmath36 has exactly two neighbours which also belong to  @xmath36 . in our setting , a * path * consists of four elementary tracks  @xmath37 , @xmath38 , @xmath39 and  @xmath40 such that @xmath37 with  @xmath38 , @xmath38 with  @xmath39 and @xmath39 with  @xmath40 have a common border which is a sequence of sides which belong to both tiles of the considered pair of elementary tracks .",
    "moreover , @xmath37 is green , @xmath38 is blue and both @xmath39 and  @xmath40 are blank . now , to distinguish @xmath39 from  @xmath40 , some cells of  @xmath40 are blue , defining what we shall later call * milestones * and they are more or less regularly dispatched on  @xmath40 .",
    "later , we give the precise rule for placing the milestones .",
    "the locomotive moves on  @xmath39 and it is represented by two contiguous cells , a blue one , the * front * , and a red one , the * rear*. the motion of the locomotive on  @xmath39 is exactly that of the locomotive on a track in  @xcite .",
    "below , fig .",
    "[ mouvement ] , fig .",
    "[ pathhoriz ] and fig .",
    "[ pathvert ] illustrate this motion , the motion on  @xmath39 only being illustrated by fig .",
    "[ mouvement ] .",
    "later , we shall call @xmath37 , @xmath38 , @xmath39 and  @xmath40 , the * green * , * blue * , * proper * and * safeguard * tracks respectively .",
    "110= the tracks of the railway circuit of section  2 are implemented by portions of paths between two switches .    in between switches , the path either follows a vertical or a horizontal .",
    "[ mouvement ] is a space - time diagram of the evolution of the states of the cells which are along an elementary track  @xmath39 .",
    "the easy rules are given here :    note that , as we wish to get rules which are invariant by rotation , the same rules can be used for the motion on  @xmath39 in the opposite direction .    in this setting , there are much more rules to describe the motion of the locomotive than in papers  @xcite .",
    "the green cells of  @xmath37 have simple rules : they remain green and they have two green neighbours .",
    "these green neighbours define a partition of the tile by considering the line  @xmath41 which joins the mid - points of the sides shared with a green neighbour .",
    "on one side of  @xmath41 , the neighbours are blank and on the other side , they are blue .",
    "the number of blue cells depends on the shape of  @xmath37 at this tile .",
    "110= the blue cells of  @xmath38 have more complex rules .",
    "when no locomotive is in contact with the cell , the rules are similar to those for a green cell of  @xmath37 : they have two blue neighbours and on one side they have green neighbours and blank ones on the other side .",
    "now , when a locomotive is present in the neighbourhood of the cell , at least by one cell , the front or the rear , we have new rules which take into account this situation .",
    "this means that we have an additional blue neighbour on the side of the blank ones and , possibly a red one too .",
    "also , there may be a red neighbour in the side of the blank ones .",
    "the blank cells of  @xmath39 also have similar rules when the locomotive is not present .",
    "when it is present , the locomotive is in a neighbouring cell , by its front or its rear and , in this case , a single neighbour of the cell is occupied by the locomotive . if it is the front , the cell becomes blue at the next time .",
    "[ pathhoriz ] shows the structure of a path along an isocline and the behaviour of the locomotive on it .",
    "we notice that @xmath37 , @xmath38 , @xmath39 and  @xmath40 follow consecutive isoclines , the isocline of  @xmath42 being above that of  @xmath43 for @xmath44 . note that on  @xmath40 , the milestones are placed on the tiles which have two neighbours on  @xmath39 .",
    "note that the other cells of  @xmath40 have one neighbour on  @xmath39 exactly .",
    "note that in order the locomotive can be better indentified , its front is on a darker blue than the colour of the blue track .",
    "this is not a new state , this is for the conveniency of the reader only .",
    "110= fig .",
    "[ pathvert ] illustrates the motion along a vertical .",
    "as easily seen from the pictures of the figure , the blue track of the path follows the vertical .",
    "the green track corresponds to a border of a tree , adjacent to the one whose left - hand side border supports the blue track .",
    "the proper track follows a more complex pattern which is determined by the edges of the blue track which are not shared by two cells of the track .",
    "the way followed by the safeguard track is still more complex .",
    "it has the property that blue cells of the safeguard track have two neighbours of the proper track and the blank cells of the safeguard have one neighbours exactly the proper track .    in this figure as well as in all the further figures of the paper , the front of the locomotive",
    "is represented by a darker colour than it should be , in order the reader could more easily identify it .    in the appendix ,",
    "[ turna ] , fig .",
    "[ turnb ] , fig .",
    "[ turnc ] and fig .",
    "[ turnd ] illustrate how the turn is performed .",
    "it makes use of a * slip road * which allows to go from one kind of path to the other .    to understand the structure of the slip road , remember that we called * flower * a ball of radius  1 in the heptagrid : a central tile , the * centre * of the flower , and its seven * petals * : the neighbours of the centre , see  @xcite .",
    "in such a flower , we distinguish three tiles among the petals .",
    "they are the milestones of the path . in the flower ,",
    "the milestones define an isosceles triangle .",
    "the proper track always crosses the equal legs of such a triangle , never the basis .",
    "the flowers intersect each other in such a way that the locomotive enter through one short leg of the triangle and exits through the other short leg .",
    "it can be seen that in these conditions , the path is reduced to three tracks : the proper track which zig - zags around milestones and two safeguard tracks which are constituted , in each flower , of the two tiles defining the basis of the triangle .",
    "there are no blue nor green tracks in a slip road .",
    "this structure of a slip road is illustrated by fig .",
    "[ explain_sliproad ] .",
    "110= it is not difficult to see that the slip road structure could replace the vertical paths",
    ". it would be enough to place the milestones at appropriate places , alternating on both sides of a vertical .",
    "this can be seen on fig  [ sliproad ] which illustrates the motion of a locomotive along such a path . in order to facilitate the interpretation of the figure",
    ", the blue colour of the locomotive is darker than the blue colour of the milestones . of course , in the implementation , both colours are the same , as well as in the computer program used to check the correctness of the rules .    the high interest of the slip road structure is its flexibility .",
    "the same rules allow to produce the motion of the locomotive along various routes .",
    "this makes it possible to go from a vertical to a horizontal or conversely .",
    "110= with the flexibility of the slip roads at our disposal , we can implement the connection between a path which follows a vertical to a path following an isocline which intersects the vertical .",
    "this allows the locomotive to perform quadrangular motions .",
    "as the configuration of the intersection of an isocline with a vertical is not symmetric , we have four cases , one for each corner of the quadrangle . in each case , there are two sub - cases , depending on the direction of the motion along the track . in the appendix ,",
    "[ turna ] , fig .",
    "[ turnb ] , fig .",
    "[ turnc ] and fig .",
    "[ turnd ] illustrate the four cases in the same direction of the motion .",
    "note that in this situation , the motion of the locomotive requires a higher number of rules than in the previous settings .",
    "in particular , the cells of  @xmath40 have to behave differently .",
    "those which are blue have blank neighbours only when the locomotive is not present . when it is present they have either one or two non - blank neighbour .",
    "if it has a single one it may be blue or red . if it has two neighbours , there is a blue and a red ones . in particular ,",
    "these blue and red neighbours are always contiguous .",
    "when the locomotive is not present , each blank cell of  @xmath40 has one or two blue neighbours which are also on  @xmath40 : they are milestones .",
    "when the locomotive is on its proper track , close to a cell of  @xmath40 this makes a difference for the cell of  @xmath40 : it has one or two additional non - blank neighbours .",
    "it may be a blue or a red one if there is a single additional non - blank neighbours .",
    "otherwise , the additional coloured two neighbours are blue and red .",
    "in these situation , the milestones and the blank cell of  @xmath40 must remain the same .",
    "now , when a blank cell of the proper track has the front of the locomotive as a neighbour , it has at least three contiguous blue neighbours , a situation which can not occur for a blank cell of the safeguard track .",
    "there are two series of basic patterns for the rules of the cells which lie on the proper track , which appear in table  [ basic_rules ] .    # 1 # 2 # 3 # 4 # 5 # 6 # 7 # 8 # 9    the table has two parts which correspond to the two possible configurations for a blank cell of the proper track .",
    "such a cell may have one or two neighbours belonging to the blue track .",
    "the upper half of the table deals with the case of two neighbours while the lower half deals with the case of a single neighbour .    in each half - table",
    ", the first row indicates the rule when the locomotive is not nearby .",
    "we can see that the state of the cell is unchanged .",
    "we say that it is a * conservative * rule .",
    "the second row indicates the four rules corresponding to the passage of the locomotive .",
    "the last row indicates the rules corresponding to a passage in the opposite direction .",
    "note that the rules are assumed to be rotation invariant .",
    "we can also notice that the the patterns are different because the number of letters and their respective position up to a circular permutation are different .",
    "it is not difficult to see that these rules also apply for the proper track of a slip road , whatever the association of the triangles defined by the milestones of each flower constituting the slip road .",
    "now , we are in the position to study the crossing of two paths .",
    "this makes in fact four half - paths meeting at the centre of the intersection .",
    "thanks to the slip roads , we always can assume that the paths meet according to the configuration which is indicated by fig .",
    "[ idle_crossing ] .",
    "in the papers  @xcite , the colour of the centre of the intersection is the same as the colour of the path . here ,",
    "as the path has a complex structure , we define the centre of the intersection as the blank cell which is the intersection of all the proper tracks belonging to the meeting paths .",
    "the two paths are distinguished by a green cell which identifies one of them .",
    "we shall later speak of the green path for the path marked by the green cell .",
    "the other path will be called the blue path .",
    "two green cells are neighbours of the centre .",
    "the other neighbours are blank cells .",
    "four of them belong to the arriving proper tracks .",
    "the remaining blank cell takes no part in the motion of the locomotive .",
    "call this cell the * idle cell*. the blank neighbours of the centre which belong to a proper track are called the * first cells * of the corresponding half - path .    -30pt",
    "110=    -15pt 110=    the motion of the locomotive on the blue path is conformal to the rules of table  [ basic_rules ] , see fig .",
    "[ croisement_1 ] which illustrates such a motion .",
    "only the rules for the first cells and the centre are different . also , the rules for the idle cell are different .",
    "note that the idle cell remains blank but it witnesses the motion of the locomotive which passes nearby .",
    "the three consecutive blank neighbours of the idle cell allow to identify it and to prevent the change of its state .",
    "the configurations of the first cells and of the centre are also different from the configurations of cells of a proper track .",
    "they all have a green cell among their neighbours . moreover , the centre has two green neighbours exactly .",
    "the motion of the locomotive along the green path is different from that on the blue one .",
    "the difference lies in the following .",
    "when the locomotive sees the green cell for the first time , it is on the cell  @xmath45 of the proper path which has the green cell as neighbour .",
    "adjacent to the green cell , a blue cell of the blue track is also a neighbour of  @xmath45 .",
    "when the locomotive arrives at  @xmath45 , its front becomes green .",
    "we call  @xmath45 the * green trigger*. there is another green trigger on the other proper track whose first cell is a neighbour of the other green cell of the intersection .",
    "this allows to adapt the rules for crossing the centre and to take the proper track identified by the other green cell .",
    "the front of the locomotive remains green until it reaches the other green trigger .",
    "when it leaves it , its front becomes blue again .",
    "this particular motion is illustrated by fig .",
    "[ croisement_7 ] .",
    "-15pt 110= note that fig .",
    "[ croisement_1 ] and  [ croisement_7 ] also illustrate the motion of the locomotive when it arrives from the other half - paths . indeed ,",
    "if we except the green cells , the configuration of each half - path is obtained from the other by a rotation by @xmath46 around the centre .",
    "the occurrence of the idle cell does not introduce any perturbation on this regard .",
    "the switches are characterized by the fact that three paths arrive to a centre . as mentioned in the introduction , when the locomotive goes to the * arriving path * and then goes on through one of the two exiting ones , this is an active crossing of the switch .",
    "the path taken by the locomotive after the crossing is the * selected path*. the other path is the * non - selected * one .",
    "a passive crossing occurs when the locomotive arrives through the selected or the non - selected path and it always exits through the arriving path . as already mentioned , the flip - flop switch must always be crossed actively .",
    "the centre of the switch is a blank cell and it is the intersection of the three proper tracks which arrive to the switch .",
    "this is an important difference with the previous mentioned papers as already noticed for the crossings .",
    "below , fig .",
    "[ idle_switches ] shows the different configurations when the locomotive is not nearby . as noticed in  @xcite",
    ", we may assume that the fixed switches always send the locomotive to the left - hand side path .",
    "the other situation can be obtained by an appropriate crossing of the non - selected path with the selected path which is put after the crossing of the switch .",
    "however , for the memory and the flip - flop switches , there is another configuration corresponding to the other choice of the selected path .    -20pt",
    "112= 114= 116= 118= 120= now , we shall consider that the locomotive arrives at a switch .",
    "each case is examined in an appropriate sub - subsection .",
    "the working of the switch is mainly illustrated by fig .",
    "[ fixe_7 ] . in this figure",
    ", the locomotive arrives through the non - selected path .",
    "we can see that it goes out through the arriving path and that the selected path remains the same as before the passage of the locomotive .    for completeness",
    ", we also give the illustrations for the other crossings : in fig .",
    "[ fixe_1 ] for the other passive crossing , in fig .",
    "[ fixe_4 ] for the active crossing .    -15pt",
    "110=    -30pt 110= -40pt we can see that the idle configuration of the fixed switch looks like the idle configuration of a crossing .",
    "there is here one path less and the idle cell is green .",
    "note that in order that the green idle cell remains idle , it has two blue neighbours : this fixes a configuration which is not disturbed by a nearby passage of the locomotive .",
    "also note that , as in the previous figures , in order that the front of the locomotive should be distinguished from blue or green cells of the blue track , it is represented in a darker colour . in the rules , as well as in the computer program to check them , there is no distinction between the blue colour of the front of the locomotive and the blue colour for the cells of a blue track .",
    "the same holds for the green colour of the front of the locomotive and the green cells .    -5pt",
    "110=      the idle configuration of a memory switch is very different from the idle configurations of a crossing or of a fixed switch .",
    "schematically , the intersection at a crossing or at a fixed switch can be called open while the intersection at a memory or a flip - flop switch would be called closed .",
    "the memory switch implements the change of the selected path by displacing an obstacle from the frost cell of the proper track in the non - selected path to the first cell of the proper track in the selected cell .",
    "the look of an obstacle can clearly be seen in fig .",
    "[ memorisant_4 ] and in fig .",
    "[ memorisant_7 ] .    in all the situations of this switch , the same basic motion of the locomotive on the proper track is observed . during the active crossing and the passive one through the selected path , the cells which are not on a proper track remain unchanged . during the passive crossing through the non - selected path ,",
    "the basic motion occurs on the proper track and , at one time , the obstacle on the proper track is removed and it is placed onto the proper track of the selected path on the next time .",
    "define by 1(1 ) and 1(7 ) the coordinates of the first cell on the proper track of the selected and non - selected paths respectively , 0  being the coordinate of the centre of the intersection .",
    "the configuration of the memory switch is characterized by the blue cell in 2(1 ) and the fact that the centre has five green neighbours except at the time when the obstacle on the proper track of the non - selected path is removed , see fig .",
    "[ memorisant_7 ] . also , at the following time , the obstacle which was before on  1(7 ) is now placed on  1(1 ) .    -10pt",
    "110=    -25pt 110=    -50pt however , during the crossing , the blue cell  2(1 ) remains unchanged .",
    "note that this cell is a milestone of the path whose first cell is  1(1 ) .",
    "it is used in this way in the motion of the locomotive when it goes out from this path or when it enters it .    on the last picture of fig .",
    "[ memorisant_7 ] , we can see the idle configuration of a memory switch whose selected path is the right - hand side one . as the idle configuration of a memory switch",
    "is not symmetric , in particular , due to the situation in sector  5 , assuming the origin at the centre , we have to check that rules can be devised for such a memory switch .",
    "moreover , the new rules have to be compatible with the ones already established for a memory switch whose selected track is the left - hand side one .    -5pt",
    "110=    -30pt these rules have been designed and they have been checked by a computer program . in the appendix ,",
    "[ memorisantd_7 ] , fig .",
    "[ memorisantd_4 ] and fig .",
    "[ memorisantd_1 ] correspond to a passive crossing through a right - hand side selected track , to an active crossing and to a passive crossing through a left - hand side non - selected track respectively .",
    "the idle configuration of a flip - flop switch looks like that of a memory switch .",
    "the main difference comes from the cell  2(1 ) which is red . in order to keep the red state during a crossing of the switch by the locomotive",
    ", a group of four cells decorates the cell  2(1 ) , two of them being neighbours of the cell  2(1 ) .",
    "as we have to study the active passage only , we refer the reader to two figures : fig .",
    "[ bascule_g ] and fig .",
    "[ bascule_d ] . in the first figure , the selected path is the left - hand side one , in the second figure , it is the right - hand side one .",
    "the figures show the change from one idle configuration to the other in both cases , hence the flip - flop action of the switch .",
    "the configuration around the centre is the same as in a memory switch .",
    "this is a difference with the situation in  @xcite where the respective configurations around the centre are the same .    -25pt",
    "110=    -25pt 110=    -30pt as a final remark about the switches , it can be noticed that the surrounding of the centre of the intersection and that of the cell  2(1 ) allow to identify each case without any ambiguity .",
    "what must be distinguished is distinguished , in particular the change of selection which is different between the memory and the flip - flop switch .",
    "the change does not occur at the same time , mainly because the change occurs during a passive crossing for the memory switch and during an active one for the memory switch .",
    "also , what can be shared in the case of the memory and the flip - flop switch is shared , in particular the active passage until the centre of the switch is reached .",
    "# 1 # 2 # 3 # 4 # 5 # 6 # 7    the set of rules of the automaton is displayed in table  [ table_regles ] . here ,",
    "we indicate how the rules where computed by a computer program and how the rules are represented and dispatched in the table .",
    "the format of the rules is exactly the same as the format described in  @xcite . for the sake of self - containedness",
    ", we summarize the corresponding information here .",
    "each cell has a numbering of its sides from 1  to  7 .",
    "the central cell excepted , for the other cells , side  1 is the side shared with the father . in the central cell ,",
    "side  1 is a side fixed once and for all .",
    "once this side is fixed , all the others are also fixed : the numbers of the side increase when counter - clockwise turning around the tile which supports the cell .",
    "note that the sons of a black node in the fibonacci tree are given by sides  4 and  5 and that those of a white node are given by sides  3 , 4 and  5 .",
    "as indicated in subsection  3.2 , the rules are denoted as follows : where @xmath25 is the current state of the cell , @xmath26 , @xmath47 , is the current states of the neighbour  @xmath27 of the cell and @xmath28 is its new state .",
    "we define @xmath48 as the * context * of the rule .",
    "it is the biggest proper prefix of the rule as a word .",
    "the whole set of the rules is given in table  [ table_regles ] , in the appendix .",
    "to define the features of the computer program , it can be useful to devise a test in order to check the rotation invariance of the automaton .",
    "the notion of rotated form can be used for that purpose in the following way .    consider a rule  @xmath49 of the cellular automaton which we represent by the word @xmath29 , as above indicated .",
    "its rotated forms are defined by @xmath50 , where @xmath51 is a circular permutation on @xmath52 .",
    "we can see that the difference between the rotated forms of a rule and the rule itself lies in their contexts : they can be deduced from each other by a suitable circular permutation on @xmath53 .",
    "there are 7  rotated forms for each rule .",
    "now , as we consider the contexts as words , we can order them lexicographically . and",
    "so , there is a * minimal * rotated form for each rule  @xmath49 : that whose context is the minimum of the contexts of the rotated forms of  @xmath49 with respect to the lexicographical order which is a linear order .",
    "denote min@xmath49 the minimal rotated form of the rule  @xmath49 .",
    "remember that the current state of the cell is the first letter of the context .",
    "now , it is plain that we have the following property :    [ minim ] the set of rules of a cellular automaton on the heptagrid is invariant by rotation if and only if for any pair of rules @xmath49  and  @xmath54 of the automaton , if min@xmath49 and min@xmath54 have equal contexts then @xmath55 .",
    "the computer program was written in  @xmath56 .",
    "the program uploads the initial configuration of the crossings and of the switches from a file and puts the corresponding information into a table  0 . in this table",
    ", each row represents a cell .",
    "the entries of the row indicate the coordinates of the neighbours of the cell as well as the states of the cell and of its neighbours .",
    "the program also contains a copy of table  0 with no state in the cells which we call table  1 .",
    "the set of rules is in a file under an appropriate format , close to the one which was depicted in subsection  5.1 .    during the construction of the set of rules , the program works as follows .",
    "when we run the program , it reads the file of the rules which , initially contains the rule @xmath57wwwwwww@xmath57 which says that a cell in the quiescent state whose neighbours are all 1=0      # 1 # 2 # 3 # 4 # 5 # 6 # 7 # 8 # 9 211= 212= -15pt = 1 120= 122= 124= 126= 130= 132=",
    "134= 136=    [ table_regles ] the rules of the cellular automaton of theorem  [ universal ] .",
    "quiescent remains quiescent .",
    "starting from the central cell the program scans the sectors one after the other and in each one , from the root to the last level , level by level .",
    "the program takes the context  @xmath58 of  @xmath45 in table  0 .",
    "then , it compares  @xmath58 with the contexts of the rules of the file .",
    "if it finds a match , it copies the new state of the rule at the address of  @xmath45 in table  1 , under column  0 .",
    "if it does not find a match , it asks for a new rule which the user writes into the file . to help the user",
    ", the program indicates the context of the cell .",
    "the user enters the new state only .",
    "then the program resumes its computation : it reads again table  0 from the initial configuration and performs the computation as far as possible . if it can compute the new state of all cells of table  0",
    ", it completes table  1 by computing the new states of the neighbours of each cell .",
    "when this task is over , the program copies table  1 onto table  0 : a new step of the computation of the cellular automaton can be processed .",
    "this cycle is repeated until no new rule is required and until the fixed in advance number of steps is reached .",
    "now , when a new rule is entered by the user on a cell  @xmath45 , it may happen that the new rule is in conflict with the previously entered rules .",
    "this happens when there is a rule  @xmath59 whose context is a rotated form of the context of  @xmath45 , but the state suggested by the user is not the new state of the rule . in this case , the program stops with an error message which also displays the rule with which the program have found a mismatch .",
    "if the rule constructed on the context of the cell and the state indicated by the user is a rotated form of an already existing rule , it is appended to the set of rules .",
    "when the program can be run without asking a new rule nor indicating any error , we know that the set of rules is computed .",
    "the program also contributes to check that the rules are rotation invariant , using lemma  [ minim ] which is very easy to implement : this is left to the reader .",
    "the same property was used in  @xcite . in the display of the rules in table  [ table_regles ] , we assume that the minimal rotated forms of the rules are pairwise distinct .",
    "this means that on the seven rotated forms which should be present for each rule , we keep only those needed by the tested configurations .",
    "we find 1168  rules .",
    "if minimal rotated forms only would be considered , we would find 595 of them .",
    "there were 545 rules for the universal cellular automaton on the heptagrid described in  @xcite and  299 ones in the case of the pentagrid , see  @xcite .",
    "it is a well known phenomenon that when the number of states is reduced , that of the rules is significantly increased .",
    "this comes from the fact that the reduction of the number of states entails a higher complexity of the configurations .    in table",
    "[ table_regles ] , the rules are displayed in the format indicated in subsection  5.1 .",
    "also , the rules are gathered according to the order in which they were entered in the set of rules during the execution of the program .",
    "this order also corresponds to the different configurations which we described in section  4 and to the figures which are displayed in this section as well as figures which are not displayed but which correspond to the motions described in the section .",
    "the reader may check in the table that for all crossings and switches , the motion of the locomotive was checked for all possible arrivals .",
    "also , the program have checked configurations which are not represented in the figures of the paper , in particular the cases of a crossing with an arrival from the other paths , or the reverse motion on a piece of a slip road connecting a vertical with a horizontal . however , in order to get a correct set of rules , the program had to test these situations too . as the reader can check it on the table , all the needed tests were performed . indeed , each test on a type of motion induced new rules where at least one of them was not a rotated form of a previously obtained rule .",
    "this completes the proof of theorem  [ universal ] .",
    "we are now closer to the minimal number of states in order to get a universal cellular automaton on the heptagrid .",
    "two cases remain to be studied : 3  states and 2  states .",
    "i had a discussion with donald knuth on this topic .",
    "don encouraged me to try to find an analog of the game of life in the hyperbolic plane .",
    "of course , it would be very interesting to obtain such a result .",
    "unfortunately , the divergence of the lines and rays in the heptagrid makes it difficult to define collisions .",
    "moreover , the gliders are not yet known .",
    "accordingly , we remain with some hard work ahead .",
    "5 -1pt    f. herrmann , m. margenstern , a universal cellular automaton in the hyperbolic plane , _ theoretical computer science _ , ( 2003 ) , * 296 * , 327 - 364 .",
    "m. margenstern , new tools for cellular automata of the hyperbolic plane , _ journal of universal computer science _ * 6*(12 ) , ( 2000 ) , 12261252 .",
    "m. margenstern , two railway circuits : a universal circuit and an np - difficult one , computer science journal of moldova , * 9 * , 135 , ( 2001 ) .",
    "m. margenstern , implementing cellular automata on the triangular grids of the hyperbolic plane for new simulation tools , * astc2003 * , ( 2003 ) .",
    "m.  margenstern , cellular automata and combinatoric tilings in hyperbolic spaces , a survey , _ lecture notes in computer sciences _ , * 2731 * , ( 2003 ) , 48 - 72 .    m. margenstern , cellular automata in hyperbolic spaces , volume 1 , theory , _ ocp _ , philadelphia , ( 2007 ) , 422p .    m. margenstern , on a characterization of cellular automata in tilings of the hyperbolic plane , * acmc2007 * , ( 2007 )    m.  margenstern , the domino problem of the hyperbolic plane is undecidable , _ bulletin of the eatcs _ , * 93 * , ( 2007 ) , 220 - 237 .",
    "m.  margenstern , the domino problem of the hyperbolic plane is undecidable , _ theoretical computer science _ , * 407 * , ( 2008 ) , 29 - 84 .",
    "m. margenstern , cellular automata in hyperbolic spaces , volume 2 , implementation and computations , _ ocp _ , philadelphia , ( 2008 ) , 360p .",
    "m. margenstern , k. morita , np problems are tractable in the space of cellular automata in the hyperbolic plane , _ theoretical computer science _ ,",
    "* 259 * , 99128 , ( 2001 ) m. margenstern , y. song , a new universal cellular automaton on the pentagrid , proceedings of * automata2008 * , june , 12 - 14 , 2008 , bristol , ( 2008 ) , 35 - 54 .",
    "m. margenstern , y. song , a universal cellular automaton on the ternary heptagrid , _ electronic notes in theoretical computer science _ , * 223 * , ( 2008 ) , 167 - 185 .",
    "m. margenstern , y. song , a new universal cellular automaton on the pentagrid , _ parallel processing letters _ , ( 2009 ) , to appear .",
    "i.  stewart , a subway named turing , mathematical recreations in _ scientific american _ , ( 1994 ) , 90 - 92 .",
    "as mentioned in the paper , the front of the locomotive is represented with a darker colour than it is in the rules .",
    "we repeat that the automaton has 4  states only .    the first series of figures , fig",
    ".  [ turna ] , fig .",
    "[ turnb ] , fig .",
    "[ turnc ] and fig .",
    "[ turnd ] illustrate the way a slip road connect a vertical with an isocline .",
    "the rules for the motion which is opposite to that of the figures have been devised and they were checked by the computer program .      at last and not the least",
    ", we give the rules of the automaton in table  [ table_regles ] .",
    "as mentioned , in the table , the rules are displayed according to the test performed on the configurations of the crossings , the switches and the paths .",
    "this is indicated in the table were rules for a given situation have been gathered together . however , we have to keep in mind that all rules can be simultaneously applied to the set of all cells ."
  ],
  "abstract_text": [
    "<S> in this paper , we construct a new weakly universal cellular automaton on the ternary heptagrid . the previous result , obtained by the same author and y. song required six states only . </S>",
    "<S> this time , the number of states is four . </S>",
    "<S> this is the best result up to date for cellular automata in the hyperbolic plane .    </S>",
    "<S> * keywords * : cellular automata , hyperbolic plane , tessellations </S>"
  ]
}