{
  "article_text": [
    "for the first time , segments of all atlas subdetectors were integrated and operated together with a common trigger and data acquisition ( tdaq ) , close to final electronics and the detector control system ( dcs ) at a cern test beam .",
    "+ during this test and certainly in the future experiment the overall aim of the dcs was and is to guarantee a reliable physics data taking and a safe operation of the detector .",
    "this is done by monitoring and controlling the dcs hardware , reacting to error conditions , providing several user interfaces and maintaining the communication to common infrastructure of the atlas experiment like tdaq or database systems .",
    "especially the communication between tdaq and dcs is of major importance for the operation of the pixel detector as tuning of the read out chain requires access to both systems in parallel .",
    "the pixel detector module , shown in figure [ fig : modul ] , is the smallest unit pixel dcs can act on .",
    "it consists of a silicon sensor and 16 front end chips as well as a module controller chip ( mcc ) gathering hit data and servicing trigger requests .",
    "+ every detector module is connected to an optoboard which converts the electrical data signals transmitted from the modules to an optical signal for transmission to the off - detector electronics via optical fibres . in parallel",
    "it receives optical signals from the off - detector electronics and converts these to electrical signals for distribution to the modules .",
    "+ the off - detector component back of crate card ( boc ) which serves as the optical interface between the read out driver ( rod ) and the optoboard @xcite is controlled by tdaq while dcs takes care of the on - detector component optoboard .",
    "+ to operate six pixel detector modules as a part of the whole pixel detector its dcs provided various equipment at the combined test beam ( shown in figure [ fig : setup ] ) . for more details about the design of the pixel dcs please refer to @xcite .",
    "+ general purpose io devices for the read out of the dcs hardware ( elmb ) developed by atlas dcs group , a home made supply system of three low voltage sources together with a reset signal to operate the optoboard ( sc - olink ) , a regulator system for protecting the fe chips of the detector modules , developed by infn milano , a high voltage source for the depletion of the sensors and also temperature and humidity sensors have come into operation . to integrate the hardware and to supervise the system in - house developed software tools have been used .",
    "the atlas detector is hierarchically organized in a tree - like structure into sudetectors , sub - systems , etc .. this has to be reflected in the design and implementation of the dcs .",
    "therefore dcs is organized in three functional layers :    * the _ global control station _ which e.g. provides tools for the overall operation of atlas , * the _ subdetector control station _ which e.g. provides full stand - alone control capability and synchronises the supervision of all subsystems below and * the _ local control station _ which e.g. reads data from the dcs hardware .",
    "the core of the software is based on the commercial supervisory control and data acquisition ( scada ) package pvss .",
    "pvss allows to gather information from the dcs hardware and offers the implementation of supervisory control functions such as data processing , alert handling and trending .",
    "it has a modular architecture based on functional units called managers .",
    "applications can be distributed over many stations on the network which defines a distributed system @xcite . +          at the combined test beam we embedded three pvss stations as a distributed system based on a full detector simulation as shown in figure [ fig : distributed ] .",
    "this test demonstrated successfully the partitioning over several computers and their interconnection in a common environment .",
    "the software of the pixel dcs consists of several subprojects such as tools for the implementation of the dcs hardware in the software environment and the configuration in an automated way , tools for combining all information concerning one detector module in a flexible way ( see figure [ fig : sit ] , last page ) and also graphical user interfaces .",
    "for example figure [ fig : sit ] ( last page ) shows the system integration tool ( sit ) which follows the detector hierarchy and therefore maps the real cabling structure into the software .",
    "+ all these software tools were used at the combined test beam and the experience now helps to develop advanced tools for the experiment .",
    "tdaq and dcs are controlled by finite state machines which consist of different states and transition functions which map a start state to a next state .",
    "both systems are independent while tdaq has the master control during detector operation .",
    "this means that the tdaq finite state machine has to be able to cause transitions in the dcs finite state machine .",
    "further more tdaq applications have to transfer selective data to dcs as well as dcs must make required data available to tdaq .",
    "nevertheless tdaq must be informed about state conditions .",
    "+ to cover all the required transfers , the daq - dcs communication ( ddc ) software @xcite has been developed by the atlas dcs group ( see figure [ fig : ddc ] ) .",
    "ddc was set up in pixel configuration by the authors and was running for four months in the combined environment . during this time",
    "the pixel specific ddc application was tested intensely .",
    "+ concerning the command transfer , we were able to show that the used pixel dcs finite state machine reacted in a well defined way on tdaq transitions .",
    "additionally pixel dcs directly computed actions via ddc in response to three tdaq transitions at the combined test beam . further more the possibility to set dcs hardware with tdaq applications without changing the tdaq state",
    "was tested successfully .    regarding the data transfer , dcs visualised data like temperatures , depletion and low voltages of the detector modules or the states of dcs hardware for tdaq while dcs received data from tdaq like the status of tdaq services or run parameters .",
    "especially the run number was used for storing run relevant dcs data . in combination with a shown dynamical integration of more transfer data this",
    "was done very efficiently at the combined test beam .    for the message transfer we built up a dcs finite state machine to monitor the parameters of the detector modules and to generate corresponding states .",
    "pixel dcs sent messages with severity flags which were read by the shifter during data taking .    performing timing studies ,",
    "certain dcs actions were connected to tdaq transitions .",
    "for the reason mentioned above , the interconnection between on- and off - detector parts of the optical link is of special interest .",
    "thus the setting of the reset signal of the sc - olink which allows a slow and controlled recovery of the delay control circuit was linked to the transition load ( see figure [ fig : diagramm ] ) .",
    "the total time for a transition is composed of the time of the ddc process and the time of the dcs process . for the above example we measured 50 ms for the ddc and around 5 s for the dcs process . due to these measurements we were able to optimise the control code during the test beam period together with changes in the hardware properties .    to verify the full functionality of ddc by the shifter during the experiment , additional tools for data analysing ( see figure [ fig : ddctest ] , last page ) are inserted in the structure of the pixel detector control system which did not effect the normal operation .",
    "checking the command transfer is done by switching and setting any number of virtual power supplies while checking the message transfer is done by simulating differently weighted temperatures of a detector module and sending corresponding messages with severity flags . reviewing the data transfer , one could observe from the tdaq side a simulated high voltage scan of a virtual detector module inside dcs . on the other hand simulated tdaq data",
    "is visible in dcs .",
    "+ these tools were very helpful during the operation and they are now an inherent part of the detector control system .",
    "conditions data is seen as every data needed for reconstruction besides the event data itself , thus it has to reflect the conditions the experiment was performed and the actual physics data were taken @xcite . for the pixel dcs this includes basically parameters of the detector modules such as voltages , currents and temperatures but also parameters and status information of further dcs devices . + as already mentioned , the atlas detector control system is based on the software pvss .",
    "pvss contains an internal archive to store and to read back the history of dcs values , but does not allow to access the data from outside the pvss framework .",
    "+ therefore a pvss api manager was developed by the lisbon tdaq group .",
    "this custom made manager is based on a c++ interface between pvss and a mysql database .",
    "when running , it connects to each of the dcs parameters defined by the user and stores the values together with a timestamp in the database .",
    "when a value change occurs , the previous value is updated by replacing the timestamp by a time interval and the new value is stored in the database in the same way as the first value .        during the combined test beam the system reliability of the pixel dcs set up",
    ", the amount of data and the handling of the interface have been examinated .",
    "+ due to the given storing mechanism described above , no data filter or smoothing processes could be used . as one result we had about 5 storing processes per second and per value which produced a non acceptable amount of data and necessitated a limitation of changes . by the integration of a new storing mechanism with a storage at the begin of a run , every minute and at the end of the run we were able to reduce the amount of data significantly .",
    "+ based on about 150 bytes per storage for a detector module , pixel dcs would produce more than 37 gbytes of data for physics analysis per year at an estimated 5 minutes storage interval .",
    "at the combined test beam we have built up a pixel detector control system which worked very well during the four month beam period .",
    "pixel specific software tools were used with good acceptance by shifters .",
    "many functionality issues could be studied sufficiently .",
    "+ the daq - dcs communication software was tested intensely and was established very successfully in the pixel configuration .",
    "we were able to use the full funcitonality of ddc .",
    "we provided commands for several actions inside dcs .",
    "tdaq data were computed by dcs in a well defined way while dcs data was used by tdaq for monitoring .",
    "messages with severity flags were available . from this point all further requirements to pixel dcs coming with a system scale up",
    "could be achieved by this package .",
    "+ ddc is the appropriate tool to handle the interaction between on and off - detector parts of our optical link .",
    "it allows us to develop tuning algorithms to find the optimal operation point for the components of the read out chain . as a first step , a graphical user interface which shows inside dcs various parameters of",
    "the boc is currently under development . + the used interface to the conditions database did not cover all the pixel dcs aims .",
    "after the combined test beam atlas intended to use the lhc computing grid ( lcg ) framework for developing a new interface to the conditions database which makes available general database tools and interfaces for subsequent analysis .",
    "further better cofigurability and more flexibility for filtering data as well as the possibility to read data from the conditions database in pvss has to be considered .",
    "these studies are a result of sharing knowledge in the atlas pixel daq group and the atlas dcs group .",
    "we would like to thank all people being involved in the work , especially v. khomoutnikov for support during the test beam period .",
    "he was always open for discussions and gave us a lot of fruitful hints .",
    "00 t. flick et al .",
    ", optical read out in a multi - module system test for the atlas pixel detector , proc .",
    "pixel 2005 , bonn , september 2005 m. imhuser et al . , the control system for the atlas pixeldetector , ieee trans .",
    "502 - 507 , june 2004 h.j .",
    "burckhart et al . ,",
    "vertical slice of the atlas detector control system , 7th workshop on electronics for lhc experiments , stockholm , sweden , september 2001 v. khomoutnikov , atlas daq - dcs communication software , user s guide , draft 4.1 , cern , march 2004 a. amorim et al . , experience with the open source based implementation for atlas conditions data management system , chep03 , la jolla , california , usa , march 2003"
  ],
  "abstract_text": [
    "<S> + detector control systems ( dcs ) include the read out , control and supervision of hardware devices as well as the monitoring of external systems like cooling system and the processing of control data . </S>",
    "<S> the implementation of such a system in the final experiment has also to provide the communication with the trigger and data acquisition system ( tdaq ) . </S>",
    "<S> in addition , conditions data which describe the status of the pixel detector modules and their environment must be logged and stored in a common lhc wide database system . </S>",
    "<S> + at the combined test beam all atlas subdetectors were operated together for the first time over a longer period . to ensure the functionality of the pixel detector </S>",
    "<S> a control system was set up . </S>",
    "<S> + we describe the architecture chosen for the pixel detector control system , the interfaces to hardware devices , the interfaces to the users and the performance of our system . </S>",
    "<S> the embedding of the dcs in the common infrastructure of the combined test beam and also its communication with surrounding systems will be discussed in some detail .    ,    ,    ,    ,    and    atlas , pixel , detector control system , slow control , scada , communication , conditions database </S>"
  ]
}