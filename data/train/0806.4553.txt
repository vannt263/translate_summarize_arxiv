{
  "article_text": [
    "many problems in mathematics and computer science can be reduced to proving satisfiability of conjunctions of ( ground ) literals modulo a background theory .",
    "this theory can be a standard theory , the extension of a base theory with additional functions , or a combination of theories .",
    "it is therefore very important to find efficient methods for reasoning in standard as well as complex theories .",
    "however , it is often equally important to find local causes for inconsistency . in distributed databases , for instance ,",
    "finding local causes of inconsistency can help in locating errors .",
    "similarly , in abstraction - based verification , finding the cause of inconsistency in a counterexample at the concrete level helps to rule out certain spurious counterexamples in the abstraction .",
    "the problem we address in this paper can be described as follows : let @xmath0 be a theory and @xmath1 and @xmath2 be sets of ground clauses in the signature of @xmath0 , possibly with additional constants .",
    "assume that @xmath3 is inconsistent with respect to @xmath0 .",
    "can we find a ground formula @xmath4 , containing only constants and function symbols common to @xmath1 and @xmath2 , such that @xmath4 is a consequence of @xmath1 with respect to @xmath0 , and @xmath5 is inconsistent modulo @xmath0 ?",
    "if so , @xmath4 is a _ ( craig ) interpolant _ of @xmath1 and @xmath2 , and can be regarded as a `` local '' explanation for the inconsistency of @xmath3 .    in this paper",
    "we study possibilities of obtaining ground interpolants in theory extensions .",
    "we identify situations in which it is possible to do this in a hierarchical manner , by using a prover and a procedure for generating interpolants in the base theory as `` black - boxes '' .",
    "we consider a special type of extensions of a base theory  namely local theory extensions  which we studied in @xcite .",
    "we showed that in this case hierarchical reasoning is possible .",
    "i.e.  proof tasks in the extension can be reduced to proof tasks in the base theory . here",
    "we study possibilities of hierarchical interpolant generation in local theory extensions .",
    "the main contributions of the paper are summarized below :    1 .",
    "first , we identify new examples of local theory extensions .",
    "2 .   second , we present a method for generating interpolants in local extensions of a base theory .",
    "the method is general , in the sense that it can be applied to an extension @xmath6 of a theory @xmath7 provided that : a.   @xmath7 is convex ; b.   @xmath7 is @xmath8-interpolating for a specified set @xmath8 of predicates ( cf .  the definition in section  [ examples - sep ] ) ; c.   in @xmath7 every inconsistent conjunction of ground clauses @xmath3 allows a ground interpolant ; d.   the extension is defined by clauses of a special form ( type ( [ general - form ] ) in section  [ examples - sep ] ) .",
    "+ the method is _ hierarchical _ : the problem of finding interpolants in @xmath6 is reduced to that of finding interpolants in the base theory @xmath7 .",
    "we can use the properties of @xmath7 to control the form of interpolants in the extension @xmath6 .",
    "third , we identify examples of theory extensions with properties ( i)(iv ) .",
    "4 .   fourth , we discuss application domains such as : modular reasoning in combinations of local theories ( characterization of the type of information which needs to be exchanged ) , reasoning in distributed databases , and verification .    the existence of ground interpolants has been studied in several recent papers , mainly motivated by abstraction - refinement based verification @xcite . in @xcite mcmillan",
    "presents a method for generating ground interpolants from proofs in an extension of linear rational arithmetic with uninterpreted function symbols .",
    "the use of free function symbols is sometimes too coarse ( cf .",
    "the example in section  [ motivation - verif ] ) . here , we show that similar results also hold for other types of extensions of a base theory , provided that the base theory has some of the properties of linear rational arithmetic .",
    "another method for generating interpolants for combinations of theories over disjoint signatures from nelson - oppen - style unsatisfiability proofs was proposed by yorsh and musuvathi in @xcite .",
    "although we impose similar conditions on @xmath7 , our method is orthogonal to theirs , as it can also handle combinations of theories over non - disjoint signatures . in @xcite a different interpolation property ",
    "stronger than the property under consideration in this paper  is studied , namely the existence of ground interpolants for _ arbitrary formulae _  which is proved to be equivalent to the theory having quantifier elimination .",
    "this limits the applicability of the results in @xcite to situations in which the involved theories allow quantifier elimination .",
    "if the theory considered has quantifier elimination then we can use this for obtaining ground interpolants for arbitrary formulae .",
    "the goal of our paper is to identify theories  possibly without quantifier elimination  in which , nevertheless , ground interpolants for ground formulae exist .",
    "_ structure of the paper : _ we start by providing motivation for the study in section  [ motivation ] . in section  [ prelim ] the basic notions needed in the paper",
    "are introduced .",
    "section  [ local ] contains results on local theory extensions . in section  [ hierarchic ] local extensions allowing hierarchical interpolation",
    "are identified , and based on this , in section  [ procedure ] a procedure for computing interpolants hierarchically is given . in section  [ appl ]",
    "applications to modular reasoning in combinations of theories , reasoning in complex databases , and verification are presented . in section  [ conclusions ]",
    "we draw conclusions , discuss the relationship with existing work , and sketch some plans for future work . for the sake of clarity in presentation ,",
    "all the proofs that are not directly related to the main thread of the paper can be found in the appendix .",
    "( these results concern illustrations of the fact that certain theory extensions are local , or satisfy assumptions that guarantee that interpolants can be computed hierarchically . )",
    "in this section we present two fields of applications in which it is important to efficiently compute interpolants : knowledge representation and verification .",
    "consider a simple ( and faulty ) terminological database for chemistry , consisting of two extensions of a common kernel chem ( basic chemistry ) : achem ( inorganic ( anorganic ) chemistry ) and biochem ( biochemistry ) .",
    "assume that chem contains a set @xmath9 @xmath10 @xmath11 @xmath12 @xmath13 @xmath14 of concepts and a set @xmath15 of constraints : @xmath16 let achem be an extension of chem with concepts @xmath17-@xmath18 , a rle @xmath19 , terminology @xmath20 and constraints @xmath21 : @xmath22 let biochem be an extension of chem with the concept @xmath23 , the rles @xmath24 , terminology @xmath25 and constraints @xmath26 : @xmath27 the combination of chem , achem and biochem is inconsistent ( we wrongly added to @xmath21 the constraint @xmath28 instead of @xmath29 ) .",
    "this can be proved as follows : by results in @xcite ( p.156 and p.166 ) the combination of chem , achem and biochem is inconsistent if and only if @xmath30 where @xmath0 is the extension @xmath31 of the theory of semilattices with smallest element 0 and monotone function symbols corresponding to @xmath32 for each rle @xmath33 .",
    "using , for instance , the hierarchical calculus presented in @xcite ( see also section  [ local ] ) , the contradiction can be found in polynomial time . in order to find the mistake we look for an explanation for the inconsistency in the common language of @xmath34 and @xmath35 .",
    "( common to @xmath34 and @xmath35 are the concepts @xmath36 and the rle @xmath37 . )",
    "this can be found by computing an interpolant for the conjunction in  ( [ incons - s1 ] ) in the theory of semilattices with monotone operators . in this paper",
    "we show how such interpolants can be found in an efficient way .",
    "the method is illustrated on the example above in section  [ appl - knowledge ] .      in @xcite ,",
    "mcmillan proposed a method for abstraction - based verification in which interpolation ( e.g.  for linear arithmetic + free functions ) is used for abstraction refinement .",
    "the idea is the following : starting from a concrete , precise description of a ( possibly infinite - state ) system one can obtain a finite abstraction , by merging the states into equivalence classes .",
    "a transition exists between two abstract states if there exists a transition in the concrete systems between representatives in the corresponding equivalence classes .",
    "literals describing the relationships between the state variables at the concrete level are represented  at the abstract level  by predicates on the abstract states ( equivalence classes of concrete states ) .",
    "classical methods ( e.g. bdd - based methods ) can be used for checking whether there is a path in the abstract model from an initial state to an unsafe state .",
    "we distinguish the following cases :    1 .",
    "no unsafe state is reachable from an initial state in the abstract model .",
    "then , due to the way transitions are defined in the abstraction , this is the case also at the concrete level .",
    "hence , the concrete system is guaranteed to be safe .",
    "there exists a path in the abstract model from an initial state to an unsafe state .",
    "this path may or may not have a correspondent at the concrete level . in order to check this ,",
    "we analyse the counterpart of the counterexample in the concrete model .",
    "this can be reduced to testing the satisfiability of a set of constraints : @xmath38 1 .",
    "if the set of constraints is satisfiable then an unsafe state is reached from the initial state also in the concrete system .",
    "thus , the concrete system is not safe . 2 .",
    "if the set of constraints is unsatisfiable , then the counterexample obtained due to the abstraction was spurious .",
    "this means that the abstraction was too coarse . in order to refine it we need to take into account new predicates or relationships between the existing predicates .",
    "interpolants provide information about which new predicates need to be used for refining the abstraction .",
    "we illustrate these ideas below .",
    "consider a water level controller modeled as follows : changes in the water level by inflow / outflow are represented as functions @xmath39 , depending on time @xmath40 and water level @xmath41 .",
    "alarm and overflow levels @xmath42 , as well as upper / lower bounds for mode durations @xmath43 are parameters of the systems .",
    "# 1#20.4#1    ll &    l     + @xmath44 if @xmath45 then a valve is opened until time @xmath46 , +   time changes to @xmath47 and the water level to +   @xmath48 .",
    "+ @xmath44 if @xmath49 then the valve is closed ; time changes to +   @xmath50 , and the water level to @xmath51 . + we impose restrictions @xmath52 on @xmath53 and on @xmath54 and @xmath55 : + @xmath56 + @xmath57 + @xmath58 + @xmath59 + we want to show that if initially @xmath49 then the + water level always remains below @xmath60 .",
    "+    we start with an abstraction in which the predicates are : @xmath61 and no other relations between these predicates are specified .",
    "we can , for instance , use finite model checking for the finite abstraction obtained this way .",
    "note for instance that @xmath62 is satisfiable , i.e. in the abstract model there exists a path ( of length 2 ) from the initial state to an unsafe state .",
    "we analyze the corresponding path in the concrete model to see if this counterexample to safety is spurious , i.e. we check whether there exist @xmath63 such that the conjunction : @xmath64 is true . if @xmath65 are regarded as free function symbols this conjunction is satisfiable , so the spuriousness of the counterexample can not be detected",
    "@xmath66 can however be proved to be unsatisfiable if we take into account the additional conditions @xmath52 on the functions @xmath67 and @xmath68 .",
    "interpolants can be used for determining the cause of inconsistency , and can therefore help in refining the abstraction .",
    "the hierarchical interpolation method we present here allows us to efficiently generate ground interpolants for extensions with functions satisfying axioms of the type considered here and also for a whole class of more general axioms .",
    "an illustration of this method on the formulae in the example presented here is given in section  [ appl - verification ] .",
    "besides the application to verification by abstraction - refinement , computation of craig interpolants has other potential applications ( e.g.   to goal - directed overapproximation for achieving faster termination , or to automatic invariant generation ) .",
    "in this section we introduce the main notions and definitions concerning theories , models and interpolants needed in the paper .",
    "theories can be regarded as sets of formulae or as sets of models . in this paper , whenever we speak about a theory @xmath0  if not otherwise specified ",
    "we implicitly refer to the set @xmath69 of all models of @xmath0 .",
    "let @xmath0 be a theory in a given signature @xmath70 , where @xmath71 is a set of function symbols and @xmath72 a set of predicate symbols .",
    "let @xmath73 and @xmath74 be formulae over the signature @xmath75 with variables in a set @xmath76 .",
    "the notion of truth of formulae and of entailment is the usual one in logic .",
    "we say that :    1 .",
    "@xmath73 is true with respect to @xmath0 ( denoted @xmath77 ) if @xmath73 is true in each model @xmath78 of @xmath0 .",
    "@xmath73 is satisfiable with respect to @xmath0 if there exists at least one model @xmath78 of @xmath0 and an assignment @xmath79 such that @xmath80 .",
    "otherwise we say that @xmath73 is unsatisfiable .",
    "we say that @xmath73 entails @xmath74 with respect to @xmath0 ( denoted @xmath81 ) if for every model @xmath78 of @xmath0 and every valuation @xmath82 , if @xmath80 then @xmath83 .",
    "note that @xmath73 is unsatisfiable with respect to @xmath0 if and only if @xmath84  ( @xmath85 stands for false ) .",
    "a theory @xmath0 has interpolation if , for all formulae @xmath73 and @xmath74 in the signature of @xmath0 , if @xmath81 then there exists a formula @xmath4 containing only symbols which occur in both @xmath73 and @xmath74 such that @xmath86 and @xmath87 .",
    "first order logic has interpolation but  for an arbitrary theory @xmath0  even if @xmath73 and @xmath74 are e.g. conjunctions of ground literals , @xmath4 may still be an arbitrary formula , containing alternations of quantifiers ( cf .",
    "@xcite for an example of ground formulae @xmath73 and @xmath74 in the language of the theory @xmath88 of arrays whose conjunction is unsatisfiable , but there is no ground interpolant over the common variables of @xmath73 and @xmath74 ) .",
    "it is often important to identify situations in which ground clauses have ground interpolants .",
    "we say that a theory @xmath0 has the _ ground interpolation property _ ( or , shorter , that @xmath0 has _ ground interpolation _ ) if for all ground clauses @xmath89 and @xmath90 , if @xmath91 then there exists a ground formula @xmath92 , containing only the constants @xmath93 occurring both in @xmath1 and @xmath2 , such that @xmath94    there exist results which relate ground interpolation to amalgamation or the injection transfer property @xcite and thus allow us to recognize many theories with ground interpolation .",
    "we present these results in appendix  [ app : amalg - interp ] .",
    "the following theories allow ground interpolation in appendix  [ app : amalg - interp ] ) .",
    "similar results were also established for ( 2 ) in @xcite . ] :    1 .   the theory of pure equality ( without function symbols ) .",
    "2 .   linear rational and real arithmetic .",
    "3 .   the theory of posets .",
    "4 .   the theories of ( a ) boolean algebras , ( b ) semilattices , ( c ) distributive lattices .    [ ground - interp - eq - th ]    the proof is given in appendix  [ app : amalg - interp ] .",
    "other examples of theories which allow ground interpolation are the equational classes of ( abelian ) groups and lattices . in many applications",
    "one needs to consider extensions or combinations of theories , and proving amalgamation properties can be complicated . on the other hand , just knowing that ground interpolants exist is usually not sufficient : we would like to construct the interpolants fast .    in the examples considered in theorem  [ ground - interp - eq - th ] , methods for constructing interpolants exist . for the theories of pure equality and of posets interpolants",
    "can be constructed for instance from proofs @xcite . for linear",
    "rational or real arithmetic they can either be constructed from proofs @xcite or by constructing linear programming problems and solving these problems using an off - the - shelf sound solver @xcite . for the theories of boolean algebras , distributive lattices and semilattices",
    "they can be reconstructed from resolution proofs associated with the translation of the satisfiability problems to propositional logic @xcite ; the construction is similar to the one described in the proof of theorem  [ example - assumptions-1 - 3 ] in appendix  [ app : assumptions - examples ] .",
    "we would like to use the advantages of modular or hierarchical reasoning for constructing interpolants in theory extensions in an efficient way .",
    "this is why in this paper we aim at giving methods for _ constructing _ interpolants in a hierarchical way .",
    "since in @xcite we identified a class of theory extensions ",
    "namely , local theory extensions  in which hierarchical reasoning was possible , in what follows we will study interpolation in local theory extensions .",
    "let @xmath7 be a theory with signature @xmath95 .",
    "we consider extensions @xmath96 of @xmath7 with signature @xmath97 , where @xmath98 ( i.e.  the signature is extended by new _",
    "function symbols _ ) and @xmath6 is obtained from @xmath7 by adding a set @xmath52 of ( universally quantified ) clauses .",
    "thus , @xmath99 consists of all @xmath75-structures @xmath78 which are models of @xmath52 and whose reduct @xmath100 to @xmath101 is a model of @xmath7 .",
    "a _ partial @xmath75-structure _ is a structure @xmath102 , where @xmath103 and for every @xmath104 with arity @xmath105 , @xmath106 is a partial function from @xmath107 to @xmath108 .",
    "any variable assignment @xmath109 extends in a natural way to terms , such that @xmath110 .",
    "thus , the notion of evaluating a term @xmath40 with respect to a variable assignment @xmath111 for its variables in a partial structure @xmath78 is the same as for total algebras , except that this evaluation is undefined if @xmath112 and at least one of @xmath113 is undefined , or else @xmath114 is not in the domain of @xmath106 .    let @xmath78 be a partial @xmath75-structure , @xmath115 a clause and @xmath111 . then @xmath116 if and only if either    a.   for some term @xmath40 in @xmath115 , @xmath117 is undefined , or else b.   @xmath117 is defined for all terms @xmath40 of @xmath115 , and there exists a literal @xmath41 in @xmath115 such that @xmath118 is true in @xmath78 .    _",
    "@xmath78 weakly satisfies @xmath115 _ ( notation : @xmath119 ) if @xmath116 for all assignments @xmath82 .",
    "we say that _ @xmath78 weakly satisfies a set of clauses @xmath52 _ or _",
    "@xmath78 is a weak partial model of @xmath52 _ ( notation : @xmath120 ) if @xmath119 for all @xmath121 .",
    "let @xmath7 be a theory with signature @xmath95 and let @xmath52 be a set of ( universally quantified ) clauses in the signature @xmath70 , where @xmath122 . in what follows , when referring to sets @xmath66 of ground clauses we assume they are in the signature @xmath123 where @xmath124 is a set of new constants .",
    "for the sake of simplicity , we will use the same notation for a structure and for its universe .",
    "a ( total ) model of @xmath125 is a @xmath75-structure @xmath1 s.t.@xmath126 and @xmath127 is a model of @xmath128 .",
    "let @xmath129 be the class of all weak partial models @xmath8 of @xmath130 , in which the @xmath131-functions are partial and such that @xmath132 is a total model of @xmath128 .",
    "an extension @xmath133 is _ local _ if , in order to prove unsatisfiability of a set @xmath66 of clauses with respect to @xmath134 , it is sufficient to use only those instances @xmath135 $ ] of @xmath52 in which the terms starting with extension functions are in the set @xmath136 of ground terms which already occur in @xmath66 or @xmath52 .",
    "we consider the following properties of an extension @xmath137 of a theory @xmath7 with additional function symbols satisfying a set @xmath52 of clauses .",
    "[ cols= \" < , < \" , ]     [ thm : very - local ] assume that the cycle in step 2 of the procedure described in figure  [ fig : procedure ] stops after processing all mixed clauses in @xmath138 and moving their separated form into the set @xmath139 .",
    "the following are equivalent :    1 .",
    "2 .   @xmath141 .",
    "@xmath142 is a consequence of theorems  [ thm : hierarchic ] and proposition  [ thm : separate ] .",
    "as the conjunction in ( 2 ) corresponds to a subset of instances of @xmath143 , @xmath144 implies @xmath145 .",
    "* note : * if @xmath146_0   \\models_{{{\\mathcal t}_0}}\\perp$ ] then no matter which terms are chosen for separating mixed clauses in @xmath147_0 \\wedge { \\mathcal k}_0 $ ] , we obtain a separated conjunction of clauses unsatisfiable with respect to @xmath7 .",
    "lemma  [ thm : very - local ] shows that if the set of clauses obtained when the procedure stops is satisfiable then @xmath3 was satisfiable , and conversely , so the procedure can be used to test satisfiability and to compute interpolants at the same time .",
    "( however , it is more efficient to first test @xmath148 . )",
    "let @xmath7 be a theory with the following properties :    1 .",
    "-0 pt**assumption 1 : * *  @xmath7 is _ convex _ with respect to the set @xmath72 ( including equality @xmath149 ) ; 2 .",
    "-0 pt**assumption 2 : * *  @xmath7 is _ @xmath8-interpolating _ with respect to a subset @xmath150 and the separating terms @xmath151 can be effectively computed ; and 3 .",
    "-0 pt**assumption 3 : * *  @xmath7 has ground interpolation    ( note that we assume , in particular , that @xmath7 satisfies a stronger form of assumption 2 ) .",
    "assume that the extension @xmath96 of @xmath7 has the following properties :    1 .",
    "-0 pt**assumption 4 : * *  @xmath6 is a local extension of @xmath7 ; and 2 .   -0 pt**assumption 5 : * *  @xmath52 consists of the following type of combinations of clauses : @xmath152 where @xmath153 , @xmath154 are variables , @xmath155 are binary relations , @xmath156 , @xmath157 is transitive , and each @xmath158 is either a variable among the arguments of @xmath159 , or a term of the form @xmath160 , where @xmath161 and all the arguments of @xmath162 are variables occurring among the arguments of @xmath159 ( i.e.  combinations of clauses of type  ( [ general - form ] ) ) .    for every conjunction @xmath3 of ground unit clauses in the signature @xmath163 of @xmath6 ( possibly containing additional constants ) with @xmath148 the procedure for hierarchical interpolation terminates and it computes an interpolant @xmath4 for @xmath3 .    to prove termination note that at every execution of the loop in step 2 , the number of mixed clauses decreases .",
    "all entailment tests in step 2 are decidable ( their complexity is discussed separately ) . by assumption ( 2 ) , terms @xmath151 which separate the premises can be computed in finite time .",
    "this shows that step 2 terminates .",
    "termination of steps 1 , 3 and 4 is immediate .",
    "we now prove correctness .",
    "we know that @xmath148 , so @xmath164 .",
    "hence , by lemma  [ thm : very - local ] , when the cycle in step 2 of the procedure terminates replacing the set of clauses @xmath138 with @xmath139 , then @xmath141 .",
    "by construction , at termination @xmath165 contains only pure ( unmixed ) clauses .",
    "we can use the alternative form of @xmath166 , denoted before by @xmath167 , as well as of @xmath139 as @xmath168 . in step 3",
    "an interpolant @xmath169 containing only constants common to @xmath170 , @xmath171 with @xmath172 and @xmath173 is computed . in step 4 , a ground @xmath163-formula @xmath4 containing only constants and function symbols which occur both in @xmath1 and @xmath2 such that @xmath174 and @xmath175 is constructed starting from @xmath4 as explained in corollary  [ thm : interp ] .",
    "this is the interpolant of @xmath3 .",
    "* complexity : * assume that in @xmath7 for a formula of length @xmath105 :    a.   interpolants can be computed in time @xmath176 , b.   @xmath8-interpolating terms can be computed in time @xmath177 , c.   entailment can be checked in time @xmath178 .",
    "the size @xmath105 of the set of clauses obtained after the preprocessing phase is quadratic in the size of the input . under the assumptions ( a ) ,",
    "( b ) , ( c ) above the procedure above computes an interpolant in time of order @xmath179 .    if @xmath7 satisfies assumptions 1 and 3 at the beginning of section  [ examples - sep ] . and",
    "is strongly @xmath8-interpolating , the procedure above can be changed ( according to the proof of proposition  [ prop : separation](3 ) ) to separate _ all _ clauses in @xmath180 and store the conclusions of the separated clauses in @xmath181 .",
    "if @xmath146_0   { \\models}_{{\\mathcal t}_0 } { \\perp}$ ] then there exists a set @xmath182 of @xmath183-terms containing only constants common to @xmath170 and @xmath171 , and common new constants in a set @xmath124 such that the terms in @xmath182 can be used to separate @xmath147_0",
    "\\cup { \\mathcal k}_0 $ ] into @xmath184 , where : @xmath185 such that for each premise @xmath186 of a rule in @xmath147_0 \\cup { \\mathcal k}_0 $ ] , at some step in the procedure @xmath187 and there exists @xmath188 such that @xmath189 and @xmath190 . in this case",
    "@xmath191 is logically equivalent to @xmath192 , and @xmath193 is logically equivalent to @xmath194 , where @xmath192 , @xmath194 are the following conjunctions of literals : @xmath195 thus , if for instance in @xmath7 interpolants for conjunctions of ground literals are always again conjunctions of ground literals , the same is also true in the extension .",
    "[ remark - interpolants ]    the following theory extensions have ground interpolation :    a.   extensions of any theory in theorem  [ example - assumptions-1 - 3](1)(4 ) with free function symbols .",
    "b.   extensions of the theories in theorem  [ example - assumptions-1 - 3](2),(4 ) with monotone functions . c.   extensions of the theories in theorem  [ example - assumptions-1 - 3](2),(4 ) with @xmath196 .",
    "d.   extensions of the theories in theorem  [ example - assumptions-1 - 3](2),(4 ) with @xmath197 .",
    "e.   extensions of any theory in theorem  [ example - assumptions-1 - 3](1)(4 ) with @xmath198 or @xmath199 ( where @xmath40 is a term and @xmath73 a set of literals in the base theory ) . f.   extensions of the theories in theorem  [ example - assumptions-1 - 3](2),(4 ) with @xmath200 , if @xmath40 is monotone in its variables .",
    "g.   @xmath201 , the extension of the theory of reals with a unary function which is @xmath202-lipschitz in a point @xmath203 , where @xmath204 is @xmath205 .",
    "( a)(d ) are direct consequences of corollary  [ thm : interp ] , since all sets of extension clauses are of type  ( [ general - form ] ) . for extensions of linear arithmetic note that due to the totality of @xmath206 we can always assume that @xmath1 and @xmath2 are positive ,",
    "so convexity with respect to @xmath149 is sufficient ( cf .",
    "proof of proposition  [ prop : separation ] ) .",
    "also , in @xcite we show that being @xmath8-interpolating with respect to @xmath206 is sufficient in this case .",
    "( e)(g ) follow from corollary  [ thm : interp ] and the fact that if each clause in @xmath52 contains only one occurrence of an extension function , no mixed instances can be generated when computing @xmath207 $ ] .",
    "let @xmath208 be local extensions of a theory @xmath7 with signature @xmath95 , where @xmath209 .",
    "assume that ( a ) all variables in @xmath210 occur below some extension function , ( b ) the extension @xmath211 is local is a @xmath212 theory then ( b ) is implied by ( a ) and the locality of @xmath213 @xcite .",
    "] , and ( c ) @xmath7 has ground interpolation .    let @xmath66 be a set of ground clauses in the signature @xmath214 .",
    "@xmath66 can be flattened and purified , so we assume without loss of generality that @xmath215 , where @xmath216 are flat and linear sets of clauses in the signatures @xmath217 respectively , i.e. for @xmath218 , @xmath219 , where @xmath220 and @xmath221 are clauses in the base theory and @xmath222 conjunctions of unit clauses of the form @xmath223 .    with the notations above ,",
    "assume that @xmath224 .",
    "then there exists a ground formula @xmath4 , containing only constants shared by @xmath225 and @xmath226 , with @xmath227 and @xmath228 .    by theorem  [ thm : hierarchic ] , the following are equivalent :    1 .",
    "@xmath229 , 2 .",
    "@xmath230 \\wedge { \\mathcal k}_2[g_2 ] \\wedge    ( g^0_1 \\wedge g_0 \\wedge d_1 ) \\wedge ( g^0_2 \\wedge g_0 \\wedge d_2 )   \\models \\perp$ ] , 3 .",
    "@xmath231 , where , for @xmath232    @xmath233 + and @xmath234 is the formula obtained from @xmath235 $ ] after purification and flattening , taking into account the definitions from @xmath222 .",
    "let @xmath236 and @xmath237 . by assumption ( a ) , @xmath1 and @xmath2 are both ground . as @xmath1 and @xmath2 have no extension function symbols in common and only share the constants which @xmath225 and @xmath226 share",
    ", there exists an interpolant @xmath169 in the signature @xmath101 , containing only @xmath238-function symbols and only constants shared by @xmath216 , such that @xmath239 and @xmath240 .",
    "an interpolant for @xmath241 with respect to @xmath6 can now be obtained by replacing the newly introduced constants by the terms they replaced .    by remark  [ remark - interpolants ] ,",
    "if @xmath7 is strongly @xmath8-interpolating and has equational interpolation then @xmath4 is a conjunction of literals , so for modularly proving @xmath242 only conjunctions of ground literals containing constants shared by @xmath216 need to be exchanged between specialized provers for @xmath6 and @xmath243 .",
    "consider the combination of databases in section  [ motivation - knowledge ] .",
    "we prove that @xmath244 where @xmath0 is the extension @xmath245 of the theory of semilattices with 0 and monotone functions corresponding to the rles in @xmath246 , where :    @xmath247 { \\sf t}_1 & \\!\\!\\!=\\!\\!\\ ! & \\",
    "{ { \\sf cat}\\text{-}{\\sf oxydation } \\approx { \\sf substance } \\wedge { \\sf catalyzes}({\\sf oxydation } ) \\ } \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\quad \\\\ \\gamma_1 & \\!\\!\\!=\\!\\!\\ ! & \\ {                   { \\sf reaction } \\leq { \\sf oxydation } ,                   { \\sf cat}\\text{-}{\\sf oxydation } \\leq { \\sf inorganic } ,                    { \\sf cat}\\text{-}{\\sf oxydation } { \\not\\approx } 0 \\ } , \\gamma_2 = \\ { { \\sf enzyme } \\not\\approx 0 \\}\\\\[1ex ] { \\sf t}_2 & \\!\\!\\!=\\!\\!\\ ! & \\ { { \\sf reaction } \\approx { \\sf process } \\wedge { \\sf produces}({\\sf substance } ) , \\quad   { \\sf enzyme } \\approx { \\sf organic } \\wedge { \\sf catalyzes}({\\sf reaction } ) \\ } \\end{aligned}\\ ] ]    in order to find the mistake we look for an explanation for the inconsistency in the joint language of the two databases . based on results on hierarchical reasoning in extensions of theories in @xcite",
    "we can show that if we purify the problem by introducing definitions for the terms starting with an extension role symbol we can reduce the satisfiability test to a satisfiability test in the base theory .",
    "thus ,  ( [ incons - sl ] ) is equivalent to the unsatisfiability of a set of clauses over the theory of semilattices , namely : @xmath248 where @xmath249 and @xmath250 are as in the table below ( the shared symbols are underlined ) :     @xmath251    the following instances of the congruence or monotonicity axioms need to be considered : @xmath252 they are not mixed .",
    "the conjunction of formulae in the base theory is unsatisfiable in the theory of semilattices .",
    "it can be split into a part @xmath1 containing only concepts in @xmath34 and a part @xmath2 containing only concepts in @xmath35 .",
    "an interpolant for @xmath3 in the theory of semilattices with 0 is @xmath253 .",
    "thus , @xmath254 is an interpolant for @xmath3 .",
    "this is an explanation for the inconsistency of @xmath3 , and may help to find the error more easily than the initial proof of unsatisfiability . for this",
    "we can , for instance , analyze the ( shorter ) proofs of @xmath255 and @xmath256 and note that the constraint @xmath257 is used in the proof of @xmath255 .",
    "consider the verification example from section  [ motivation - verif ] .",
    "we illustrate our method for generating interpolants for a formula corresponding to a path of length 2 from an initial state to an unsafe state : @xmath258    the extension @xmath6 of linear arithmetic with the clauses @xmath52 in section  [ motivation ] is local , so to prove @xmath259 it is sufficient to consider ground instances @xmath135 $ ] in which all extension terms already occur in @xmath66 . after flattening and purifying @xmath135 \\wedge g$ ] , we separate the problem into a definition part ( extension ) and a base part @xmath260 . by theorem",
    "[ thm : hierarchic ] @xcite , the problem can be reduced to testing the satisfiability in the base theory of the conjunction @xmath261 . as this conjunction is unsatisfiable with respect to @xmath7",
    ", @xmath66 is unsatisfiable .",
    "@xmath262    _ interpolation .",
    "_ let @xmath1 and @xmath2 be given by : @xmath263 the set of constants which occur in @xmath1 is @xmath264 . in @xmath2 occur @xmath265 .",
    "the shared constants are @xmath266 and @xmath267 . to generate an interpolant for @xmath3 , we partition the clauses in @xmath268 , where : @xmath269 the clause in @xmath270 is mixed .",
    "since already the conjunction of the formulae in @xmath271 is unsatisfiable , @xmath270 is not needed to prove unsatisfiability .",
    "the conjunction of the formulae in @xmath272 is equivalent to @xmath273 , where @xmath274 the interpolant for @xmath273 is @xmath275 , which is also an interpolant for @xmath3 .",
    "the abstraction defined in section  [ motivation - verif ] can then be refined by introducing another predicate @xmath276 .",
    "we presented a method for obtaining simple interpolants in theory extensions .",
    "we identified situations in which it is possible to do this in a hierarchical manner , by using a prover and a procedure for generating interpolants in the base theory as `` black - boxes '' .",
    "this allows us to use the properties of @xmath7 ( e.g.  the form of interpolants ) to control the form of interpolants in the extension @xmath6 .",
    "we discussed applications of interpolation in verification and knowledge representation .",
    "the method we presented can be applied to a class of theories which is more general than that considered in mcmillan @xcite ( extension of linear rational arithmetic with uninterpreted function symbols ) .",
    "our method is orthogonal to the method for generating interpolants for combinations of theories over disjoint signatures from nelson - oppen - style unsatisfiability proofs proposed by yorsh and musuvathi in @xcite , as it allows us to consider combinations of theories over non - disjoint signatures .",
    "the hierarchical interpolation method presented here was in particular used for efficiently computing interpolants in the special case of the extension of linear arithmetic with free function symbols in @xcite ; the algorithm we used in that paper ( on which an implementation is based ) differs a bit from the one presented here in being tuned to the constrained based approach used in @xcite .",
    "the implementation was integrated into the predicate discovery procedure of the software verification tools blast  @xcite and armc  @xcite .",
    "first tests suggest that the performance of our method is of the same order of magnitude as the methods which construct interpolants from proofs , and considerably faster on many examples .",
    "in addition , our method can handle systems which pose problems to other interpolation - based provers : we can handle problems containing both strict and nonstrict inequalities , and it allows us to verify examples that require predicates over up to four variables .",
    "details about the implementation and benchmarks for the special case of linear arithmetic + free function symbols are described in @xcite .",
    "although the method we presented here is based on a hierarchical reduction of proof tasks in a local extension of a given theory @xmath7 to proof tasks in @xmath7 , the results presented in section  [ hierarchic ] ( in particular the separation technique described in proposition  [ prop : separation ] ) and in section  [ procedure ] also hold for non - purified formulae ( i.e.  they also hold if we do not perform the step of introducing new constant names @xmath277 for the ground terms @xmath278 which occur in the problem or during the separation process ) .",
    "depending on the properties of @xmath7 , techniques for reasoning and interpolant generation in the extension of @xmath7 with free function symbols e.g.  within state of the art smt solvers can then be used .",
    "we can , therefore , use the results in sections  [ hierarchic ] and  [ procedure ] to extend in a natural way existing methods for interpolant computation which take advantage of state of the art smt technology ( cf .",
    "e.g.   @xcite ) to the more complex types of theory extensions with sets of axioms of type  ( [ general - form ] ) we considered here .",
    "an immediate application of our method is to verification by abstraction - refinement ; there are other potential applications ( e.g.   goal - directed overapproximation for achieving faster termination , or automatic invariant generation ) which we would like to study .",
    "we would also like to analyze in more detail the applications to reasoning in complex knowledge bases .",
    "* acknowledgements . *",
    "i thank andrey rybalchenko for interesting discussions .",
    "i thank the referees for helpful comments .",
    "this work was partly supported by the german research council ( dfg ) as part of the transregional collaborative research center `` automatic verification and analysis of complex systems '' ( sfb / tr 14 avacs ) .",
    "see ` www.avacs.org ` for more information .",
    "10 f.  baader and s.  ghilardi .",
    "connecting many - sorted theories . in r.",
    "nieuwenhuis , editor , _",
    "20th international conference on automated deduction ( cade-20 ) , lnai 3632 _ , pages 278294 .",
    "springer , 2005 .",
    "amalgamation properties and interpolation theorem for equational theories . , 5:4555 , 1975 .",
    "a.  cimatti , a.  griggio , and r.  sebastiani .",
    "efficient interpolant generation in satisfiability modulo theories . in _",
    "tacas2008 : tools and algorithms for the construction and analysis of systems , lncs 4963 _ , pages 397412 , springer , 2008 .",
    "t.  a. henzinger , r.  jhala , r.  majumdar , and k.  l. mcmillan .",
    "abstractions from proofs . in _",
    "popl2004 : principles of programming languages _ , pages 232244 .",
    "acm press , 2004 .",
    "b  jnsson",
    ". extensions of relational structures . in j.w .",
    "addison , l.  henkin , and a.  tarski , editors , _ the theory of models , proc . of the 1963 symposium at berkeley _",
    ", pages 146157 , amsterdam , 1965 .",
    "north - holland .",
    "d.  kapur , r.  majumdar , c.  zarba .",
    "interpolation for data structures . in _ proc .",
    "14th acm sigsoft international symposium on foundations of software engineering _ , pages 105116 , acm 2006 .",
    "interpolation and sat - based model checking . in _",
    "cav2003 : computer aided verification , lncs 2725 _ , pages 113 .",
    "springer , 2003 .",
    "an interpolating theorem prover . in _",
    "tacas2004 : tools and algorithms for the construction and analysis of systems , lncs 2988 _ , pages 1630 .",
    "springer , 2004 .",
    "applications of craig interpolants in model checking . in _",
    "tacas2005 : tools and algorithms for the construction and analysis of systems , lncs 3440 _ , pages 112 .",
    "springer , 2005 .",
    "a.  podelski and a.  rybalchenko . : the logical choice for software model checking with abstraction refinement . in _",
    "padl2007 : practical aspects of declarative languages , lncs 4354 _ , pages 245259 , springer , 2007 .",
    "a.  rybalchenko and v.  sofronie - stokkermans .",
    "constraints for interpolation .",
    "constraint solving for interpolation . in b.",
    "cook and a.  podelski , editors , _ proceedings of the 8th international conference on verification , model checking and abstract interpretation ( vmcai 2007 ) , lncs 4349 _ , pages 346362 , springer verlag , 2007 .",
    "v.  sofronie - stokkermans . on the universal theory of varieties of distributive lattices with operators : some decidability and complexity results . in h.",
    "ganzinger , editor , _ proceedings of cade-16 , lnai 1632 _ , pages 157171 , springer verlag , 1999 .    v.  sofronie - stokkermans .",
    "resolution - based decision procedures for the universal theory of some classes of distributive lattices with operators .",
    ", 36(6):891924 , 2003 .",
    "v.  sofronie - stokkermans . automated theorem proving by resolution in non - classical logics . in _",
    "4th int .",
    ".  journees de linformatique messine : knowledge discovery and discrete mathematics ( jim-03 ) _ , pages 151167 , 2003 .",
    "v.  sofronie - stokkermans .",
    "hierarchic reasoning in local theory extensions . in r.",
    "nieuwenhuis , editor , _ 20th international conference on automated deduction ( cade-20 ) , lnai 3632 _ , pages 219234 .",
    "springer , 2005 .",
    "v.  sofronie - stokkermans .",
    "hierarchical and modular reasoning in complex theories : the case of local theory extensions . in b.",
    "konev and f.  wolter , editors , _ frontiers of combining systems , 6th international symposium , ( frocos 2007 ) , lncs 4720 _ , pages 4771 , springer , 2007 .",
    "v.  sofronie - stokkermans and c.  ihlemann .",
    "automated reasoning in some local extensions of ordered structures .",
    ", ieee computer society , 2007 .",
    "a.  wroski . on a form of equational interpolation property . in _",
    "foundations of logic and linguistics ( salzburg , 1983 ) _ , pages 2329 , new york , 1985 . plenum .",
    "g.  yorsh and m.  musuvathi .",
    "a combination method for generating interpolants . in r.",
    "nieuwenhuis , editor , _",
    "20th international conference on automated deduction ( cade-20 ) , lnai 3632 _ , pages 353368 .",
    "springer , 2005 .",
    "there exist results which relate ground interpolation to amalgamation or the injection transfer property @xcite and thus allow us to recognize many theories with ground interpolation .",
    "if @xmath70 is a signature and @xmath279 are @xmath75-structures , we say that :    1 .",
    "a map @xmath280 is a _ homomorphism _ if it preserves the truth of positive literals , i.e.  has the property that if @xmath281 then @xmath282 , and if @xmath283 is true then @xmath284 is true .",
    "a map @xmath285 is an _ embedding _ if it preserves the truth of both positive and negative literals , i.e.   @xmath283 is true ( in @xmath286 ) if and only if @xmath287 is true ( in @xmath288 ) for any predicate symbol , including equality .",
    "thus , an embedding is an injective homomorphism which also preserves the truth of negative literals .",
    "let @xmath70 be a signature , and let @xmath78 be a class of @xmath75-structures .    1 .",
    "we say that @xmath78 has the _ amalgamation property _ ( ap ) if for any @xmath289 and any embeddings @xmath290 and @xmath291 there exists a structure @xmath292 and embeddings @xmath293 and @xmath294 such that @xmath295 .",
    "@xmath78 has the _ injection transfer property _ ( itp ) if for any @xmath289 , any embedding @xmath290 and any homomorphism @xmath296 there exists a structure @xmath292 , a homomorphism @xmath297 and an embedding @xmath294 such that @xmath298 .    an equational theory @xmath0 ( in signature @xmath70 where @xmath299 ) has the _ equational interpolation property _ if whenever @xmath300 where @xmath301 , @xmath302 and @xmath2 are ground atoms , there exists a conjunction @xmath92 of ground atoms containing only the constants @xmath93 occurring both in @xmath303 and @xmath304 , such that @xmath305 [ equational - interpolation ]    let @xmath0 be a universal theory . then :    1 .",
    "@xmath0 has ground interpolation if and only if @xmath69 has ( ap ) @xcite .",
    "in addition , we can guarantee that if @xmath73 is positive then the interpolant of @xmath306 is positive if and only if @xmath69 has the injection transfer property @xcite .",
    "2 .   if @xmath0 is an equational theory , then @xmath0 has the equational interpolation property if and only if @xmath69 has the injection transfer property @xcite .",
    "[ amalgamation - interpolation ]    theorem  [ amalgamation - interpolation ] can be used to prove that many equational theories have ground interpolation :    the following theories allow ground interpolation :    1 .   the theory of pure equality ( without function symbols ) .",
    "2 .   linear rational and real arithmetic .",
    "3 .   the theory of posets .",
    "4 .   the theories of ( a ) boolean algebras , ( b ) semilattices , ( c ) distributive lattices .",
    "[ app : ground - interp - eq - th ]    ( 1 ) , ( 2 ) , ( 3 ) are well - known ( for ( 2 ) we refer for instance to @xcite or @xcite ) . for proving ( 4 ) we use the fact that if a universal theory has a positive algebraic completion then it has the injection transfer property @xcite .",
    "all theories in ( 4 ) are equational theories ; by results in @xcite , for equational theories the injection transfer property is equivalent to the equational interpolation property . with these remarks ,",
    "( 4)(a ) follows from the fact that any gaussian theory is its own positive algebraic completion @xcite , and ( 4)(b),(c ) from the fact that the theory of semilattices and that of distributive lattices have a positive algebraic completion @xcite .",
    "similarly it can be proved that the equational classes of ( abelian ) groups and lattices have ground interpolation .",
    "* theorem  [ examples - local ] *    _ we consider the following base theories @xmath7 : _    1 .",
    "@xmath307 ( posets ) , 2 .   @xmath308 ( totally - ordered sets ) , 3 .   @xmath309 ( semilattices ) , 4 .",
    "@xmath310 ( distributive lattices ) , 5 .",
    "@xmath311 ( boolean algebras ) . 6 .",
    "the theory @xmath312 of reals resp .",
    "@xmath313 ( linear arithmetic over @xmath312 ) , or the theory @xmath314 of rationals resp .",
    "@xmath315 ( linear arithmetic over @xmath314 ) , or ( a subtheory of ) the theory of integers ( e.g.  presburger arithmetic ) .",
    "the following theory extensions are local :    1 .",
    "extensions of any theory @xmath7 for which @xmath206 is reflexive with functions satisfying boundedness @xmath316 or guarded boundedness @xmath317 conditions + @xmath318 + @xmath319 + where @xmath320 is a term in the base signature @xmath101 and @xmath321 a conjunction of literals in the signature @xmath101 , whose variables are in @xmath322 .",
    "extensions of any theory @xmath7 in ( 1)(6 ) with @xmath200 , if @xmath320 is a term in the base signature @xmath101 in the variables @xmath154 such that for every model of @xmath7 the associated function is monotone in the variables @xmath154 .",
    "extensions of any theory in ( 1)(6 ) with functions satisfying @xmath196 .",
    "+ @xmath323 4 .",
    "extensions of any totally - ordered theory above ( i.e.  ( 2 ) and ( 6 ) ) with functions satisfying @xmath324 .",
    "+ @xmath325 5 .",
    "extensions of any theory in ( 1)(3 ) with functions satisfying @xmath326 .",
    "all the extensions above satisfy condition @xmath327 .    in what follows",
    "we will denote by @xmath101 the signature of the base theory @xmath7 , and with @xmath131 the extension functions , namely @xmath328 for cases ( a ) and ( b ) , @xmath329 for case ( c ) , @xmath330 for case ( d ) and @xmath331 for case ( e ) .",
    "\\(a ) let @xmath332 be a partial @xmath75-structure which weakly satisfies @xmath198 , such that @xmath333 and @xmath334 is partial .",
    "let @xmath335 be a total @xmath75-structure with the same support as @xmath8 , where : @xmath336 then @xmath1 satisfies @xmath198 .",
    "let @xmath337 be the identity .",
    "obviously , @xmath338 is a @xmath101-isomorphism ; and if @xmath339 is defined then @xmath340 .",
    "similar arguments also apply to @xmath199 .",
    "\\(b ) let @xmath332 be a partial @xmath75-structure which weakly satisfies @xmath341 , such that @xmath333 and @xmath334 is partial . in cases ( 1)(3 )",
    "let @xmath342 , where @xmath343 is the family of all order ideals of @xmath8 , and @xmath344    @xmath345 is clearly monotone .",
    "let @xmath346 .",
    "then @xmath347 for some @xmath348 with @xmath349 defined . as @xmath350 , @xmath351 .",
    "therefore @xmath352 .",
    "the map @xmath337 defined by @xmath353 is a weak embedding .",
    "since @xmath310 and @xmath311 are locally finite , results in @xcite show that in ( 4 ) and ( 5 ) it is sufficient to assume that @xmath8 is finite .",
    "let @xmath335 , where @xmath354 @xmath345 is clearly monotone .",
    "we prove that it also satisfies the boundedness condition , i.e.  that for all @xmath154 , @xmath355 . by definition , @xmath356 as @xmath350 and @xmath40 is monotone , we know that @xmath357 for all @xmath358 with @xmath349 defined . therefore , @xmath359 that the identity @xmath338 is a weak embedding can be proved as before .",
    "\\(c ) the proof is very similar to the proof of ( b ) .",
    "we first discuss the case ( 1)(3 ) .",
    "let @xmath360 be a weak partial model of @xmath6 .",
    "let @xmath361 , where @xmath345 is defined as in ( b ) .",
    "we define @xmath362 by @xmath363 assume that @xmath364 , and let @xmath346 .",
    "then @xmath347 for some @xmath365 with @xmath349 defined . if @xmath366 , then @xmath358 so , as @xmath367 , we know that @xmath368 .",
    "it therefore follows that in this case @xmath369 .",
    "otherwise , @xmath370 , hence @xmath371 .    for the cases ( 4 ) and ( 5 )",
    "we again use the criterion in @xcite and theorem  [ rel - loc - embedding ] .",
    "let @xmath360 be a weak partial model of @xmath6 .",
    "let @xmath372 be such that @xmath373 whenever @xmath374 is defined .",
    "we define @xmath375 as follows : @xmath376 @xmath328 is obviously monotone . in order to prove that the second condition holds , we analyze two cases .",
    "assume first that @xmath377 is undefined .",
    "then @xmath378 for all @xmath358 with @xmath349 defined , thus , @xmath379 .",
    "if @xmath377 is defined , then for all @xmath358 with @xmath349 we also have @xmath380 , so @xmath381 .",
    "again , it follows that @xmath382 .",
    "\\(d ) let @xmath7 be the theory of totally ordered sets .",
    "assume that @xmath383 is a totally ordered weak partial model of @xmath324 .",
    "let @xmath384 , where @xmath345 and @xmath385 are extensions of @xmath386 defined as in the proof of ( b ) .",
    "@xmath387 are obviously monotone .",
    "we prove that the condition @xmath388 holds in @xmath1 .",
    "assume that @xmath389 for @xmath390 , and let @xmath391 .",
    "then there exist @xmath392 such that @xmath393 is defined and @xmath394 . as @xmath395",
    ", there exist @xmath396 such that @xmath397 is defined and @xmath398 .",
    "let @xmath399 .",
    "then @xmath400 .",
    "hence @xmath401 .",
    "therefore , @xmath402 so @xmath403 . let @xmath404 defined by @xmath353 . to show that it is a weak embedding we only have to show that if @xmath405 is defined then @xmath406 .",
    "this is true by the definition of @xmath407 .",
    "( e ) assume that @xmath7 is the theory of semilattices . the construction in ( d )",
    "can be applied to this case without problems .",
    "the proof is similar to that of ( d ) with the difference that if @xmath408 we only have one element @xmath409 so we do not need to compute a maximum ( which for @xmath410 may not exist if the order is not total ) .",
    "the proof of the fact that the remaining theories satisfy @xmath327 is based on the criterion of finite locality given in theorem  [ rel - loc - embedding ] .",
    "the constructions and the proofs are similar to those in the proof of ( b ) resp .",
    "( c ) for the cases ( 4 ) and ( 5 ) . due to the fact that we assumed that the definition domain of the extension functions is finite @xmath411 is a finite join , and thus exists ( if @xmath328 is nowhere defined it is sufficient to define it as being everywhere equal to @xmath40 in case ( b ) or to @xmath407 in case ( c ) ) .",
    "the fact that the definition domains are finite also ensures that in the proof of ( c ) an element @xmath412 ( chosen in the definition of @xmath407 ) with the desired properties always exists .",
    "* theorem  [ example - assumptions-1 - 3 ] . *      1 .   the theory of @xmath413 of pure equality without function symbols ( for @xmath414 ) .",
    "2 .   the theory @xmath415 of posets ( for @xmath416 ) .",
    "3 .   linear rational arithmetic @xmath417 and linear real arithmetic @xmath418 ( convex with respect to @xmath414 , strongly @xmath8-interpolating for @xmath419 ) .",
    "4 .   the theories @xmath311 of boolean algebras , @xmath309 of semilattices and @xmath310 of distributive lattices ( strongly @xmath8-interpolating for @xmath416 ) .    note first that if a partially - ordered theory is interpolating for @xmath206 it is also for @xmath149 .",
    "assume that @xmath420 .",
    "then @xmath421 and @xmath422 , hence there exist terms @xmath423 , @xmath424 containing only common constants of @xmath1 and @xmath2 such that @xmath425 and @xmath426 .",
    "it follows that @xmath427 , @xmath428 .",
    "\\(1 ) and ( 2 ) : convexity is obvious ; the property of being @xmath8-interpolating can be proved by induction on the structure of proofs .",
    "( 3 ) is known ( cf .",
    "e.g.  @xcite ) . a method for computing interpolating terms for @xmath418 and @xmath417",
    "is presented in @xcite .",
    "\\(4 ) this is a constructive proof based on ideas from @xcite .",
    "the results presented there show , as an easy particular case , that one can reduce the problem of checking the satisfiability of a conjunction @xmath429 of unit clauses with respect to one of the theories above to checking the satisfiability of a conjunction @xmath430 obtained by introducing a propositional variable @xmath431 for each subterm @xmath432 occurring in @xmath429 , a set of renaming rules of the form @xmath433 and translations of the positive resp .",
    "negative part of @xmath429 : @xmath434    \\(a ) the convexity of the theory of boolean algebras with respect to @xmath149 follows from the fact that this is an equational class ; convexity with respect to @xmath206 follows from the fact that @xmath435 if and only if @xmath436 .",
    "we prove that the theory of boolean algebras is @xmath206-interpolating , i.e. that if @xmath1 and @xmath2 are two conjunctions of literals and @xmath437 , where @xmath438 is a constant occurring in @xmath1 and not in @xmath2 and @xmath439 a constant occurring in @xmath2 and not in @xmath1 , then there exists a term containing only common constants in @xmath1 and @xmath2 such that @xmath440 and @xmath441 .",
    "we can assume without loss of generality that @xmath1 and @xmath2 consist only of atoms ( otherwise one moves the negative literals to the right and uses convexity ) .",
    "@xmath437 if and only if the following conjunction of literals in propositional logic is unsatisfiable :      we obtain an unsatisfiable set of clauses @xmath443 .",
    "propositional logic allows interpolation , so there exists an interpolant @xmath444 , which is a boolean combination ( say in cnf ) of the common propositional variables occurring in @xmath445 and @xmath446 such that @xmath447 but then @xmath448 and @xmath449 .",
    "( 4)(b ) the proof is similar to that of ( 4)(a ) with the difference that in the renaming rules in the structure - preserving translation to clause form only the conjunction rules apply , hence @xmath445 and @xmath446 are sets of non - negative horn clauses .",
    "we can saturate @xmath450 under resolution with selection on the negative literals in linear time .",
    "the saturated set @xmath451 of clauses contains all unit clauses @xmath431 where @xmath432 is subterm of @xmath1 with @xmath452 .",
    "only unit positive clauses @xmath431 where @xmath432 occurs in both @xmath1 and @xmath2 can enter into resolution inferences with clauses in @xmath453 and lead to a contradiction .",
    "thus we proved that @xmath454 this is equivalent to @xmath455 , where @xmath456 obviously , @xmath457 .",
    "( 4)(c ) the case of distributive lattices can be treated similarly . due to the fact that in this case the renaming rules for @xmath458 and @xmath459 are taken into account , the sets @xmath445 and @xmath446 are not horn .",
    "we adopt the same negative selection strategy . when saturating @xmath450 a finite set of positive clauses",
    "is generated , namely of the form @xmath460 where @xmath461 .",
    "we consider a total ordering on the propositional variables where @xmath431 is larger than @xmath462 if @xmath432 occurs in @xmath1 and not in @xmath2 and @xmath159 occurs in both @xmath1 and in @xmath2 .",
    "then the only inferences which can lead to a contradiction with @xmath453 are those between the clauses in @xmath451 which only contain common propositional variables .",
    "thus we proved that @xmath463 this is equivalent to @xmath464 , where @xmath465 .",
    "obviously , @xmath466 ."
  ],
  "abstract_text": [
    "<S> in this paper we study interpolation in local extensions of a base theory . we identify situations in which it is possible to obtain interpolants in a hierarchical manner , by using a prover and a procedure for generating interpolants in the base theory as black - boxes . </S>",
    "<S> we present several examples of theory extensions in which interpolants can be computed this way , and discuss applications in verification , knowledge representation , and modular reasoning in combinations of local theories . </S>"
  ]
}