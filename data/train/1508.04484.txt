{
  "article_text": [
    "we assume that the reader is familiar with basics of the sprague - grundy ( sg ) theory of the impartial games @xcite . in this paper",
    "we will need only two concepts : of a @xmath4-position and of the sg function . a more detailed introduction to the sg theory ( and much more ) can be found , for example , in @xcite .",
    "an impartial game is a two - player game with perfect information , in which the legal moves from each position are the same for both players and there are no moves of chance .",
    "such a game is modeled by a directed graph ( digraph ) @xmath8 ; in which a vertex @xmath9 is a _ position _ , while a directed edge @xmath10 is a _ legal move _ ( or simply a _ move _ , for short ) from @xmath11 to @xmath12 .",
    "we will also use notation @xmath13 and say in this case that @xmath12 is _ legally and immediately reachable _ ( or simply _ reachable _ , for short ) from @xmath11 .",
    "digraph @xmath14 may be infinite , but we will always assume that any sequence of successive moves from any fixed initial position , ( a _ play _ ) @xmath15 is finite .",
    "in particular , this implies that @xmath14 has no directed cycles .",
    "imagine that a token is initially placed in a position and two players alternate turns moving this token from its current vertex @xmath11 to @xmath12 so that @xmath13 is a move .",
    "the game ends when the token reaches a _ terminal _ , that is , a vertex with no outgoing edges .",
    "then , the player who makes the last move wins .",
    "the simplest example for an impartial game is the ancient game of nim played as follows .",
    "there are @xmath2 piles containing @xmath16 tokens .",
    "two players alternate turns . by one move ,",
    "a player chooses a pile @xmath17 and takes from it @xmath18 tokens ; @xmath19 . the player who takes the last token wins .",
    "it is not difficult to characterize the winning strategies of an impartial game .",
    "the subset @xmath20 is called the set of @xmath4-positions if the following two properties hold :    * @xmath4 is _ independent _ , that is , for any @xmath21 and move @xmath13 we have @xmath22 ; * @xmath4 is _ absorbing _ , that is , for any @xmath23 there is a move @xmath13 such that @xmath24 .",
    "it is easily seen that the set @xmath4 can be obtained by the following simple recursive algorithm : include in @xmath4 all terminal positions of @xmath14 ; delete from @xmath14 all positions from which there is a move to a terminal position , together with all terminal positions , and repeat the above .",
    "it is also clear that any move @xmath13 of a player to a @xmath4-_position _",
    "@xmath24 is a winning move .",
    "indeed , by ( i ) , the opponent must leave @xmath4 by the next move , and then , by ( a ) , the player can reenter @xmath4 . since , by definition , all plays of @xmath14 are finite and all terminals are in @xmath4 , sooner or later the opponent will be out of moves .      given two games @xmath25 and @xmath26 , their sum @xmath27 is played as follows : on each turn , a player chooses either @xmath25 or @xmath26 and plays in it , leaving the other game unchanged .",
    "the game ends when no move is possible , neither in @xmath25 nor in @xmath26 .",
    "obviously , this operation is commutative and associative and , hence , it allows us to define the sum @xmath28 of @xmath2 summand games for any integer @xmath29 .    by these definitions",
    ", nim can be viewed as the sum of @xmath2 games , each of which ( a one - pile - nim ) is trivial . yet ,",
    "nim itself is not .",
    "it was solved by charles bouton in his seminal paper @xcite as follows .",
    "the nim - sum @xmath30 is defined as the bitwise binary sum .",
    "for example ,    @xmath31 , and @xmath32 .",
    "it was shown in @xcite that @xmath33 is a @xmath4-position of nim if and only if @xmath34 .      to play the sum @xmath35 , it is not sufficient to know @xmath4-positions of @xmath25 and @xmath26 since @xmath36 may be a @xmath4-position of @xmath14 even when @xmath37 is not a @xmath4-position of @xmath25 and @xmath38 is not a @xmath4-position of @xmath26 .",
    "for example , @xmath39 is a @xmath4-position of the two - pile nim if and only if @xmath40 , while only @xmath41 and @xmath42 are the unique @xmath4-positions of the corresponding one - pile games .",
    "to play the sums one needs the concept of sprague - grundy ( sg ) function , which is a refinement of the concept of @xmath4-positions .",
    "standardly , we denote by @xmath43 the set of nonnegative integers . given a finite subset @xmath44 , let @xmath45 ( the minimum excluded value ) be the smallest nonnegative integer that is not in s. in particular , @xmath46 , by the definition .    given an impartial game @xmath8 , the sg function @xmath47 is defined recursively , as follows : @xmath48 for any terminal @xmath11 and , in general , @xmath49 .",
    "this definition implies the following important properties of the sg function :    * no move keeps the sg value , that is , @xmath50 for any move @xmath13 .",
    "* the sg value can be arbitrarily ( but strictly ) reduced by a move , that is , for any integer @xmath51 such that @xmath52 there is a move @xmath13 such that @xmath53 . in particular ,",
    "the sg value can be reduced to @xmath54 whenever it is not @xmath54 . *",
    "the @xmath4-positions are exactly the zeros of the sg function : @xmath48 if and only if @xmath11 is a @xmath4-position . *",
    "the sg function of the sum of @xmath2 games is the nim - sum of the @xmath2 sg functions of the summands .",
    "more precisely , let @xmath55 be the sum of @xmath2 games and @xmath56 be a position of @xmath14 , where @xmath57 is the corresponding position of @xmath58 for @xmath59 , then @xmath60 .",
    "a position @xmath11 with @xmath61 will be called a _",
    "@xmath62-position_.    for example , the sg function of nim is the nim - sum of the cardinalities of its piles , that is , @xmath63 for @xmath33 .      in 1901 ,",
    "charles bouton published his seminal paper solving nim with @xmath2 piles .",
    "soon after , in 1910 , in the same journal , eliakim hastings moore @xcite suggested the following natural generalization for any @xmath64 . in moore",
    "s nim a player by one move reduces at least one and at most @xmath3 piles .",
    "more precisely , in a position @xmath65 the player can choose any vector @xmath66 such that @xmath67 for all @xmath68 and @xmath69 for at most @xmath3 and at least one @xmath70 .",
    "such a move results in the position @xmath71 .",
    "two player alternate turns and one who has no moves loses , or in other words , one who takes the last token wins .",
    "moore denoted this game nim@xmath72 . in this paper",
    ", we will use nim@xmath73 for it .",
    "moore introduced the operation @xmath74 and the function @xmath75 generalizing the nim - sum @xmath76 and the sg function @xmath77 of nim respectively as follows .",
    "we represent @xmath78s as binary numbers and take their bitwise sum modulo @xmath79 .",
    "the obtained sequence represents the number @xmath75 in the base @xmath79 numeral system : @xmath80    it is announced in @xcite that @xmath11 is a @xmath4-position of nim@xmath73 if and only if @xmath81 .",
    "this is a generalization of bouton s result , which represents the case @xmath82 .",
    "indeed , in this case the moore function @xmath75 turns into the sg function @xmath77 and the game nim@xmath83 becomes the standard @xmath2-pile nim .",
    "moore did not include the proof possibly because he considered it too simple for the annals of mathematics .",
    "yet , computing the sg function ( which was introduced only in 25 years later ) is not simple at all . in his book @xcite ,",
    "claude berge claimed that it is simply equal to @xmath75 ( theorem 3 , page  55 of @xcite ) .",
    "however , jenkyns and mayberry @xcite pointed out that this is an overstatement , although the claim holds when @xmath84 ( see theorems 11 and 12 on page 61 and also page 53 of @xcite ) . in section [ s - p - t1 ]",
    "we give an alternative proof for convenience of the reader .",
    "the following examples show that the restriction @xmath85 is essential :    @xmath86 for @xmath87 ;    @xmath88 for @xmath89 ;    @xmath90 for @xmath91 , @xmath92 ;    @xmath93 for @xmath91 , @xmath94 .",
    "no explicit formula for the sg function of the game nim@xmath73 is known if @xmath95 , e.g. , for nim@xmath96 .    obviously , nim@xmath73 is the standard @xmath2-pile nim in case @xmath82 , while in case @xmath97 it turns into the 1-pile nim , which is trivial .",
    "another tractable case is @xmath98 .",
    "if @xmath99 , we obtain the standard 2-pile nim .",
    "for @xmath100 , the following explicit formula was obtained in @xcite for the sg function .",
    "given a position @xmath33 of nim@xmath101 , let us define @xmath102 the sg function of nim@xmath103 is given by the formula : @xmath104    a slightly more general case was solved in @xcite .",
    "given positive integers @xmath2 and @xmath3 , such that @xmath105 , and @xmath2-vector @xmath106 , the _ tetris _ function @xmath107 is the largest cardinality of a set of binary @xmath2-vectors , with @xmath3 @xmath108 s and @xmath109 @xmath54 s , such that the sum of these vectors is at most @xmath11 ( componentwise ) .",
    "the following upper bound is immediate @xmath110 .",
    "equivalently , @xmath107 can be defined as follows .",
    "set @xmath111 , subtract @xmath108 from the @xmath3 largest coordinates of @xmath112 getting the next @xmath2-vector @xmath37 , do the same for @xmath37 getting @xmath38 , etc .",
    ", as long as @xmath57 remains non - negative .",
    "let @xmath113 be the last such @xmath2-vector , which contains more than @xmath109 zero coordinates .",
    "then @xmath114 .",
    "for example , @xmath115 .",
    "in fact , the following subtraction sequence has length 3 : @xmath116 and moreover , the sum of entries in @xmath117 is exactly 6 which shows by the above trivial upper bound that @xmath118 equals @xmath119 .    in section [ s - tetris ] we will study the tetris function in more details . in particular",
    ", we will prove that the above two definitions are indeed equivalent and give a polynomial algorithm computing @xmath120 .",
    "note that both above definitions , if applied directly , provide only a pseudo - polynomial algorithm",
    ".      given positive integers @xmath2 and @xmath3 such that @xmath121 , we study a restriction of moore s @xmath3-nim that we call exact @xmath3-nim and denote by nim@xmath122 as follows . by one move",
    "a player chooses @xmath3 piles and removes any positive number of tokens from each of them .",
    "the game terminates when more than @xmath109 piles are empty , and the player who made the last move is the winner .",
    "nim@xmath123 turns into the standard nim when @xmath82 , and is the trivial one - pile nim when @xmath124 .",
    "we are able to characterize the sg functions when @xmath125 .",
    "we have different expressions for the cases @xmath126 ( theorem [ p2 ] ) and @xmath127 ( theorem [ t - exact;n=2k ] ) .    [ p2 ] if @xmath126 , then the sg function of nim@xmath122 is given by @xmath128 .",
    "let us note that the inequality @xmath129 is obvious since by the definition , @xmath107 is the length ( the number of moves ) of the longest play beginning in @xmath11 .",
    "the inverse inequality will be proven in section [ s - tetris ] .",
    "[ t - exact;n=2k ] let us associate to each position @xmath33 of nim@xmath130 the following quantities : @xmath131 then the sg function of nim@xmath132 is given by @xmath133    the proof will be given in section [ proof;n=2k ] .",
    "now we can characterize the @xmath54- and @xmath108-positions of nim@xmath123 . a position @xmath134 is said to be _ non - decreasing _ if @xmath135 .",
    "[ cor-0,1-exact : n=2k ] given a non - decreasing position @xmath136 of the game nim@xmath130 ,    1 .",
    "@xmath11 is a @xmath4-position if and only if more than half of its smallest coordinates are equal , that is , @xmath137 .",
    "2 .   @xmath11 is a @xmath108-position if and only if @xmath138 and @xmath139 for some integer @xmath140 and @xmath141 .",
    "both statements ( i ) and ( ii ) follow from theorem [ t - exact;n=2k ] , but can also be derived much simpler , directly by the definitions .",
    "so far we have not been able to characterize @xmath4-positions of exact @xmath3-nim for @xmath142 , e.g. , for nim@xmath143 .",
    "the paper is organized as follows . in section [ s - tetris ]",
    "we collect results about tetris function . in section [ proof;n=2k ]",
    "we prove the main theorem . in section [ s - p - t1 ]",
    "we prove theorem [ t - moore - m=0,1 ] . in the last section we outline simple cases when the sg theory works for @xmath3-sums of impartial games .",
    "let us observe first some basic properties of tetris functions following directly from the definition .",
    "[ tbasic ] consider two integer vectors @xmath144 .",
    "if @xmath145 then @xmath146 , and if in addition @xmath147 , then @xmath148 . furthermore , if @xmath149 then @xmath150 .      consider the game nim@xmath122 .",
    "a move is called _ slow _ if exactly one token from each of the @xmath3 chosen piles is taken . in section [ ss - tetris ]",
    "the tetris function @xmath151 was defined as the maximum number of successive slow moves that can be made from @xmath11 .",
    "the following observation will be used several times .",
    "[ tetrisnotdecrease ] given a position @xmath152 and @xmath153 such that @xmath154 , then for the position @xmath155 defined by @xmath156 we have @xmath157 . in other words ,",
    "the tetris function is not increasing when we move a token from a larger pile to a smaller one .",
    "consider any sequence of slow moves from @xmath11 resulting in @xmath158 . if @xmath159 then the same sequence of slow moves can be made from @xmath12 since @xmath160 for @xmath161 . if @xmath162 then since @xmath163 , this sequence contains a slow move reducing @xmath164 but not @xmath78 .",
    "let us modify this move reducing @xmath78 rather than @xmath164 and keeping all other moves of the sequence unchanged .",
    "the obtained sequence has the same length and consists of slow moves from @xmath12 .",
    "notice that we can generalize lemma [ tetrisnotdecrease ] replacing @xmath165 in ( [ eq - l2 ] ) by @xmath166 for any integral @xmath167 $ ] .",
    "[ bestslowmove ] the slow move that reduces the @xmath3 largest piles of @xmath11 reduces the tetris value @xmath107 by exactly one .",
    "let @xmath12 be the position obtained from @xmath11 by such a slow move , and let @xmath158 be another position obtained by some slow move . by applying ( [ eq - l2 ] ) repeatedly ,",
    "we can obtain @xmath12 from @xmath158 with @xmath168 by lemma [ tetrisnotdecrease ] .",
    "this implies that @xmath12 has the highest tetris value among all positions each reachable from x by a slow move . by lemma [ tbasic ] , each slow move reduces the tetris value by at least one and there exists a slow move reducing it by exactly one .",
    "hence , @xmath169 .",
    "this lemma immediately implies that the two definitions of the tetris function given in section [ ss - tetris ] are indeed equivalent .",
    "it also provides a pseudo - polynomial algorithm of calculating the tetris value by repeatedly decreasing by 1 each of the @xmath3 currently largest piles until one of them becomes empty .",
    "the number of such reductions is the tetris value of @xmath11 .      by the definition ,",
    "the tetris value is the largest number of moves one can take from a position @xmath11 , implying that the sg value at @xmath11 is at most @xmath107 .",
    "therefore , it is enough to show that for all integral @xmath51 such that @xmath170 there exists a move @xmath149 such that @xmath171 .    consider the move @xmath149 that reduces the largest @xmath3 piles to @xmath54 .",
    "for the resulting position we have @xmath172 because @xmath173 .",
    "let us also consider the move @xmath174 that reduces the @xmath3 largest piles each by only @xmath108 .",
    "then we have @xmath175 according to lemma [ bestslowmove ] .",
    "any position between @xmath12 and @xmath158 is reachable form @xmath11 .",
    "thus , by lemma [ tbasic ] the claim follows .      given a non - decreasing position @xmath11 ,",
    "let us construct @xmath176 from @xmath11 by emptying the first @xmath109 piles and adding these @xmath177 tokens , one by one , to the last @xmath3 piles as follows . by each step",
    "add one token to the smallest of these @xmath3 piles .",
    "if there are several such piles , break the tie by adding this token to the pile of the largest index , to keep the resulting @xmath11 vector nondecreasing .",
    "it is easy to see that @xmath178 .    ,",
    "@xmath179 , and @xmath180.,height=207 ]    [ txequalstxbar ] the above construction keeps the tetris value , @xmath181 .",
    "let us note that @xmath182 by lemma [ tetrisnotdecrease ] . by the definition of @xmath176",
    ", none of tokens from the smallest @xmath109 piles of @xmath11 is moved to any pile of size larger than @xmath183 and so we have @xmath184 since @xmath185 , we get by that @xmath186 assume now indirectly that @xmath187",
    ". then it is possible to construct a sequence of @xmath183 slow moves from @xmath11 . by such sequence",
    "any pile would be reduced at most @xmath183 times , and therefore the total number of the removed tokens is at most @xmath188 , implying @xmath189 , contradicting the above inequality .",
    "the obtained contradiction implies that @xmath190 .",
    "let us note that position @xmath176 is defined above by a non - polynomial algorithm .",
    "however @xmath176 and consequently @xmath191 can be computed in a more efficient way .",
    "[ tetrispolynomial ] given a nondecreasing position @xmath11 , the corresponding @xmath176 can be obtained in linear time in  @xmath2 .",
    "let @xmath192 be the number of tokens we shift on top of the largest @xmath3 piles ; see figure [ add(1 ) ] . by the definition of @xmath176",
    "we know that for some @xmath193 the first @xmath194 columns of @xmath176 will have almost the same number of tokens ( at most one difference . ) to determine this index @xmath195 and the height of the resulting piles , we use simple volume based arguments .",
    "we need to compute first the following parameters .    for each @xmath196 , we denote by @xmath197 the difference of the sizes of consecutive piles . set @xmath198 , @xmath199 , and for @xmath200 , set @xmath201 ( i.e. , the number of tokens we need to shift on top of the first @xmath68 piles @xmath202 to make them all equal to @xmath203 . )",
    "we define a unique @xmath195 by @xmath204 .",
    "we define @xmath205 , @xmath206 , and @xmath207 .",
    "we fill up the first @xmath208 columns to level @xmath209 using @xmath210 tokens .",
    "then , we place the remaining @xmath211 tokens by increasing each of the first @xmath208 columns ( indexed @xmath212 ) by @xmath213 and the last @xmath214 of these by one more , as in the following expression .     for @xmath179 with @xmath215.,height=340 ]",
    "@xmath216    it is easy to see that this defines @xmath176 correctly , and that all these parameters can be computed in @xmath217 time , if @xmath11 is a nondecreasing vector .",
    "technically , only the computation of @xmath218 depends on @xmath2 .",
    "all other computations in the previous proof can be done in @xmath219 time .",
    "proposition [ txequalstxbar ] has the following consequence that we need to use in the sequel several times .",
    "[ getmetetris]any position @xmath11 such that @xmath220 [ e.delta ] has the tetris value of @xmath221 .",
    "the sequence @xmath222 is monotone non - increasing for @xmath223 , and hence , the inqualities ( [ eq - getmetetris ] ) can hold for only one @xmath18 . proposition [ txequalstxbar ] implies that ( [ eq - getmetetris ] ) holds for @xmath224 .",
    "let us now consider moves from a given position @xmath11 in the game nim@xmath122 .",
    "given an integer value @xmath18 , we are interested to find efficiently a move @xmath149 such that @xmath171 . first , let us note that this may not be possible for certain values of @xmath18 . by lemma [ tetrisnotdecrease ]",
    "the position @xmath12 that has the smallest such @xmath18 value is the one in which the largest @xmath3 piles of @xmath11 are reduced to zero . by lemma [ tbasic ] we can conclude that for every value @xmath225 there exists a move @xmath226 such that @xmath227 and @xmath228 ( see the proof of theorem [ p2 ] . )    [ achievetetrisvalue ] such an @xmath158 can be determined in @xmath229 time .    let us start with @xmath230 and @xmath231 obtained from @xmath11 by decreasing the largest @xmath3 piles by one unit each .",
    "then we have @xmath232 . using the monotonicity of the tetris function",
    "we perform a binary search in the space of positions between @xmath233 and @xmath231 . in a general step",
    "we compute @xmath234 and @xmath235 , set @xmath236 and compute @xmath237 for @xmath238 , where @xmath239 is a rounding to a nearest integer value in such a way that @xmath240 . finally , we set @xmath241 for @xmath242 .",
    "if @xmath243 then we replace @xmath233 by @xmath244 , otherwise we replace @xmath231 by @xmath244 .",
    "clearly these computations can be done in each step in @xmath217 time , and computing the tetris value of @xmath244 can also be done in @xmath217 time by proposition [ tetrispolynomial ] .",
    "similarly to the proof of proposition [ tetrispolynomial ] , we could improve the complexity of the above algorithm to @xmath217 .",
    "a related problem is the hypergraph realization of a given degree sequence .",
    "let us fix @xmath245 as the set of vertices .",
    "a multi - hypergraph @xmath246 is a family of subsets ( called hyperedges ) of @xmath247 , i.e. , @xmath248 for all @xmath249 .",
    "it is called @xmath3-uniform if @xmath250 for all @xmath249 .",
    "the degree @xmath251 of a vertex @xmath252 is the number of hyperedges @xmath253 of @xmath254 that contain @xmath68 .",
    "we allow the same subset to appear multiple times in @xmath254 .",
    "given an integer vector @xmath255 , one can ask if there exists a @xmath3-uniform multi - hypergraph @xmath254 on the vertex set @xmath247 such that @xmath256 for all @xmath252 .",
    "equivalently , we ask the existence of a bipartite graph @xmath257 such that @xmath258 , @xmath259 , @xmath260 for all @xmath261 , and @xmath262 for all @xmath263 . for the latter we can apply the classical gale - ryser theorem claiming that the answer is yes if and only if    * @xmath264 * @xmath265 for all @xmath266 .",
    "let us note that checking these conditions may not be polynomial in @xmath11 and @xmath3 , since @xmath267 according to ( * ) .",
    "let us also note that following a sequence of slow moves starting from position @xmath11 , each time the set of columns that we decrease by @xmath108 can be considered as a hyperedge of @xmath254 .",
    "thus a maximal sequence of slow moves will construct @xmath254 if the tetris function achieves its trivial bound @xmath268 .",
    "this equality is in fact equivalent with ( * ) , since we must have @xmath269 in this case .",
    "our results in this section thus prove that for the above degree sequence realization problems the most efficient answer is to compute the tetris function value in linear time , and then compare it to its trivial upper bound . if these are the same then the answer is yes .",
    "havel ( 1955 ) and hakimi ( 1962 ) provided a simple greedy algorithm based characterization for the recognition of degree sequences of bipartite graphs . for the above case",
    "their criterion states that @xmath11 is a degree sequence of a @xmath3-uniform multi - hypergraph if and only if the position @xmath12 is , where @xmath12 is obtained from @xmath11 by decreasing the @xmath3 largest components of @xmath11 by @xmath108 .",
    "note that this implies a recursive process that is one of the definitions we used for the tetris function .",
    "let us remark finally that in general @xmath11 is not the degree sequence of a @xmath3-uniform multi - hypergraph . in this case",
    "however a move @xmath149 such that @xmath172 provides us with a minimal modification such that @xmath270 becomes the degree sequence of such a hypergraph .",
    "let us consider the game nim@xmath130 , where @xmath272 , and let @xmath11 be a position in this game . recall that to @xmath11 we associated several parameters in .",
    "let us call a position @xmath11 of type i , if @xmath273 , and type ii otherwise .",
    "we shall need a few simple lemmas in our proof . in the sequel",
    "all positions considered will be positions of nim@xmath130 , even if not stated .",
    "[ continuity ] consider a position @xmath11 and two moves @xmath149 and @xmath226 such that @xmath274 ( componentwise ) and @xmath275 .",
    "then , for every integer @xmath276 there exists a move @xmath277 such that @xmath278 .",
    "furthermore , we have @xmath279 componentwise .",
    "note that @xmath274 implies that in the two moves @xmath149 and @xmath226 the same @xmath3 components are decreased .",
    "let us denote by @xmath280 these components .",
    "let us now start decreasing the components @xmath281 , @xmath282 one by one , keeping their values always above the corresponding @xmath283 values . in @xmath284 steps",
    "we arrive to @xmath158 . in each of these steps",
    "the corresponding @xmath244-value can only decrease , and by at most @xmath108 .",
    "hence there will be at least such position @xmath279 with @xmath285 .",
    "it also follows that @xmath277 is a move , completing the proof .",
    "let us also note that in fact @xmath286 defined in depends uniquely on @xmath287 and hence can be considered as a function of @xmath244 .",
    "we shall also need the following easy arithmetical facts .",
    "[ interval ] any nonnegative integer @xmath18 belongs to exactly one of the intervals @xmath288 = \\left[\\binom{y+1}{2},\\binom{y+2}{2}-1\\right ] \\textrm { for } y\\in \\{0 , 1 , 2 , ... \\}.\\ ] ]    [ delta - epsilon ] for every nonnegative integer @xmath289 there exist unique @xmath290 and @xmath291 integer values such that @xmath292    * proof of theorem [ t - exact;n=2k ] . * our main result claims that the sg function @xmath77 of nim@xmath130 for @xmath272 is equal to the function    @xmath293 where @xmath294 and @xmath286 are defined in . to prove this theorem , it is enough to show the following two properties of @xmath295 :    * for any move @xmath296 we have @xmath297 and * for any @xmath298 there exists a move @xmath13 with @xmath299 .",
    "we now prove property ( i ) .",
    "let us first consider the case @xmath300 .",
    "obviously , any move @xmath296 reduces the tetris value by at least 1 , implying @xmath301 . using this and the definitions , we get @xmath302 , where the last inequality follows by the fact that @xmath12 has an @xmath303 block . thus , we get both @xmath304 and @xmath305 , implying the claim since @xmath306 is in the set @xmath307 .",
    "it remains to consider the case @xmath308 , in which case @xmath309 follows by the definitions .    1 .",
    "suppose @xmath310 .",
    "we can estimate @xmath311 since @xmath312 .",
    "furthermore , @xmath313 and thus @xmath314 .",
    "2 .   suppose @xmath315",
    ". then @xmath316 .",
    "note that @xmath308 and so @xmath317 .",
    "also note that @xmath318 .",
    "we examine the last inequality .",
    "suppose @xmath319 .",
    "then @xmath320 and @xmath321 , where the last inequality follows by the fact that if @xmath322 , then @xmath323 is a move , and hence decreases the tetris value implying @xmath324 .",
    "by lemma [ interval ] , we have @xmath325 and so @xmath326 implying @xmath327 .",
    "2 .   suppose @xmath328 .",
    "we compare @xmath287 with @xmath329",
    ". 1 .   if @xmath330 then @xmath331 . by the definition of a legal move",
    ", @xmath12 has at least @xmath3 piles not smaller than @xmath332 .",
    "therefore , @xmath333 , which implies that @xmath334 and thus @xmath335 .",
    "2 .   if @xmath336 , since the @xmath244 values are different , by lemma [ interval ] we have that @xmath337 and @xmath338 are in different intervals , therefore @xmath339 .",
    "we prove property ( ii ) by considering type i and type ii positions , separately .",
    "first , let us consider the case @xmath340 .",
    "then there are at most @xmath341 nonempty piles .",
    "by lemma [ achievetetrisvalue ] we can reduce the tetris value @xmath342 to @xmath54 by emptying the @xmath3 largest piles of @xmath11 .",
    "therefore for any @xmath343 , there exists a move @xmath13 with @xmath344 .",
    "all such moves also have @xmath345 , therefore @xmath346 .",
    "from now on we can assume that @xmath347 .",
    "let us consider the following four subcases , depending on the value @xmath18 .",
    "1 .   @xmath348 . to simplify our proof ,",
    "let us use simply @xmath349 instead of @xmath332 in this section . let us observe first that since @xmath11 is type i we have @xmath350 implying by that @xmath351 + let us next define a set @xmath352 of pairs of integers by setting @xmath353 @xmath354 and defining @xmath355 . + we show that if for a position @xmath356 we have @xmath357 , then @xmath356 is of type ii . to see this",
    "consider a pair @xmath358 .",
    "then we have by the definition of @xmath359 that @xmath360 and that @xmath361 from which @xmath362 follows by the definition of @xmath286 in .",
    "we also have the inequality @xmath363 since @xmath364 by the definition of @xmath365 in corollary [ delta - epsilon ] . putting these together",
    ", we obtain @xmath366 as stated .",
    "for @xmath367 we have @xmath368 and @xmath369 by the definition of @xmath370 .",
    "since @xmath371 by corollary [ delta - epsilon ] , the inequality @xmath372 follows again .",
    "+ we show next that for all pairs @xmath373 there exists a move @xmath374 such that @xmath375 and @xmath376 ( and @xmath356 is of type ii , as we argued in the previous paragraph . ) for this let us consider first @xmath377 and note that @xmath373 if and only if @xmath378 .",
    "our plan is to use lemma [ continuity ] and to cover this range of @xmath379 values by two constructions .",
    "+ let us define a pair of positions @xmath274 by @xmath380 note that since @xmath381 for @xmath382 , both @xmath12 and @xmath158 are reachable form @xmath11 .",
    "we claim next that @xmath383 and @xmath384 .",
    "the first claim follows easily , since in @xmath158 we have exactly @xmath3 positions larger than @xmath385 , and @xmath386 . for",
    "the second let us note that since @xmath387 we have @xmath388 .",
    "we can now apply lemma [ continuity ] for @xmath12 and @xmath158 , and conclude that for all values @xmath389 there exists a move @xmath374 such that @xmath390 and @xmath391 . for larger values of @xmath379",
    "we need a modified construction : @xmath392 + since @xmath393 , we have @xmath394 , while @xmath395 .",
    "we have again @xmath396 .",
    "thus by applying lemma [ continuity ] for @xmath12 and @xmath158 we can conclude that for all values @xmath397 there exists a move @xmath374 such that @xmath390 and @xmath391 .",
    "+ finally , for @xmath398 we proceed analogously , but with a third construction .",
    "note first that @xmath399 if and only if @xmath400 .",
    "let us now proceed with constructing two positions reachable form @xmath11 : @xmath401 + it is easy to see that both are reachable form @xmath11 , and that @xmath402 , @xmath403 by and @xmath404 .",
    "thus , the existence of an @xmath356 reachable from @xmath11 with @xmath405 , @xmath391 follows by lemma [ continuity ] for all @xmath400 .",
    "+ by the above arguments we have a move @xmath374 to a type ii position @xmath356 with @xmath390 and @xmath391 for all @xmath373 . to conclude the proof for this case we claim that the corresponding @xmath406 values include all integers in the interval @xmath4070 $ ]",
    "note that @xmath406 depends only on @xmath408 and @xmath409 for type ii positions by , and that for a fixed value of @xmath410 we have exactly @xmath411 consecutive integer values for @xmath385 such that @xmath373 , implying that the corresponding values @xmath412 is exactly the set of integers in the interval @xmath413 $ ] .",
    "thus our claim follows by the construction of @xmath414 and by lemma [ interval ] .",
    "2 .   @xmath415 ( figure [ f1 ] ) .",
    "set @xmath416 for @xmath417 and @xmath418 . + by definition @xmath419 which implies @xmath420 .",
    "furthermore , we have @xmath421 for @xmath422 , and therefore we indeed decrease exactly @xmath3 piles of @xmath11 to obtain @xmath12 .",
    "thus @xmath12 is reachable from @xmath11 .",
    "+ for @xmath12 we have @xmath423 therefore , by corollary [ getmetetris ] , we have @xmath344 . + since @xmath272 , @xmath424 and therefore @xmath345 .",
    "thus , @xmath425 implying that @xmath12 is of type i , from which @xmath426 follows by the above .",
    "+   is obtained by removing the red area.,height=264 ] 3 .",
    "@xmath427 ( figure [ f2 ] ) .",
    "let @xmath428 .",
    "for @xmath429 choose @xmath430 such that @xmath431 and @xmath432 .",
    "first let us prove that this is possible , or equivalently that @xmath433 . to see this let us consider two cases . if @xmath434 then @xmath435 . if @xmath436 then let us define @xmath437 and observe that for any integer @xmath438 we have @xmath439 consequently , since we have @xmath440 , by corollary [ getmetetris ] we can write for @xmath441 that @xmath442 note that if we decrease @xmath441 by @xmath108 , then the left hand side decreases by @xmath3 while the right hand side decreases by at most @xmath443 , hence the inequality remains valid .",
    "let us repeat this @xmath332 times , obtaining the inequality @xmath444 from which @xmath445 follows .",
    "let us now decrease @xmath446 further by @xmath108 , as well as replace @xmath78 by @xmath447",
    ". then the left hand side decreases by exactly @xmath3 , while the right hand side decreases by at most @xmath3 , yielding the valid inequality @xmath448 finally , we can decrease @xmath449 further on both sides to @xmath450 and similarly to the above argument obtain @xmath451 noting that @xmath452 , we obtain the claimed inequality , and hence the proof for the existence of the @xmath430 values for @xmath453 that satisfy the desired inequalities . +",
    "let us now consider the position @xmath12 defined by @xmath454 by the above arguments @xmath149 is a move in the game .",
    "the equality @xmath426 now follows by the above analysis and corollary [ getmetetris ] , completing our proof in this case .",
    "+   is obtained by removing the red area.,height=340 ] 4 .",
    "@xmath455 ( figure [ f3 ] ) .",
    "let us define position @xmath12 as follow @xmath456 note that @xmath457 , therefore @xmath458 are all non - negative .",
    "it is easy to see that @xmath459 form a partition of @xmath460 .",
    "we have reduced @xmath78 for all @xmath461 , therefore @xmath149 is a move .",
    "+ next we note that the above construction implies that @xmath462 where the last inequality follows by the fact that @xmath463 , and hence @xmath464 by corollary [ getmetetris ] .",
    "similarly , we get @xmath465 since @xmath466 .",
    "therefore @xmath467 follows by corollary [ getmetetris ] .",
    "+ note that @xmath436 , since otherwise @xmath468 would follow , contradicting our choice of @xmath18 .",
    "it follows that @xmath469 and thus @xmath470 .",
    "+ by lemma [ tetrisnotdecrease ] , we have @xmath471 and by construction of @xmath12 we have @xmath472 , implying @xmath473 by lemma [ tbasic ]",
    ". + finally , @xmath474 , which implies @xmath426 .",
    "+   is obtained by removing the red area.,height=415 ]      for a position @xmath11 let @xmath476 note that @xmath477 whenever @xmath478 is zero .",
    "[ existsmoveind ] for every @xmath11 and for every @xmath479 there is a position @xmath12 reachable from @xmath11 such that @xmath480 and @xmath481 .",
    "for @xmath479 let us consider the following three cases .",
    "case 1 : @xmath482 and @xmath483 .",
    "we consider two positions @xmath484 and @xmath485 reachable from @xmath11 defined as follows @xmath486 @xmath487 since we have @xmath488 and @xmath489 , we can apply lemma [ continuity ] and obtain that for all values @xmath490 there exists a position @xmath12 such that @xmath491 and @xmath481 .",
    "all these positions have @xmath480 .",
    "let us also note that all these positions @xmath12 are reachable from @xmath11 , because exactly @xmath3 components of @xmath11 are decreased .",
    "case 2 : @xmath492 and @xmath493 .",
    "we consider two positions @xmath484 and @xmath485 reachable from @xmath11 defined as @xmath494 @xmath495    since we have @xmath496 and @xmath497 , we can apply lemma [ continuity ] , and obtain that for all @xmath498 $ ] there exists a position @xmath499 $ ] such that @xmath500 .",
    "case 3 : @xmath501 and @xmath502 .",
    "let us note that the last inequalitiy implies @xmath503 and therefore @xmath504 .",
    "we consider two positions @xmath484 and @xmath485 reachable from @xmath11 defined as @xmath505 similarly to the previous cases , we have @xmath506 and @xmath507 , and thus by lemma [ continuity ] it follows that for all @xmath508 $ ] there exists an @xmath499 $ ] such that @xmath500 .",
    "if we put all three cases together we cover all values @xmath509 .",
    "let us set @xmath510.\\ ] ] note that if @xmath501 and @xmath511 then @xmath512 .",
    "furthermore , we have @xmath513 therefore the sets @xmath514 , @xmath515 form a partition of @xmath516 , as shown in lemma [ interval ] .",
    "[ dstar ] if @xmath517 , then every @xmath479 satisfies the following relations @xmath518    let us first consider @xmath519 . by the definition of @xmath520 and the assumption of @xmath521 we get @xmath522 by the definition of @xmath523 , for all @xmath524 we have @xmath519 for all @xmath525 $ ] .",
    "hence , by ( [ v(m , y ) ] ) we have @xmath526\\}=v(y)$ ] .",
    "thus , by lemma  [ interval ] we get @xmath527    let us next consider @xmath528 . by the definition of @xmath529 we can write @xmath530 , where @xmath531 for some @xmath532 .",
    "this implies @xmath533 . by the definition of @xmath534 we have @xmath535 .",
    "these two inequalities imply @xmath536 . since @xmath537 takes r consequtive values , we have @xmath538 .",
    "the above lemma implies that any position @xmath12 with @xmath480 , @xmath481 for some @xmath539 is a type ii position . hence @xmath540 .",
    "thus the second claim in the above lemma together with lemma [ existsmoveind ] implies that for any @xmath541 there exists a move @xmath149 such that @xmath299 .    since we proved this for both type i and type ii positions we concluded the proof of ( ii )",
    ".    properties ( i ) and ( ii ) together now imply that @xmath542 .",
    "this concludes the proof of theorem [ t - exact;n=2k ] .",
    "jenkyns and mayberry @xcite introduced the concept of skeleton of an impartial game , and applied it to determine the sg function of moore s game nim@xmath101 .",
    "their proof is based on characterizing the skeleton in terms of two integer parameters @xmath332 and @xmath287 as defined in .",
    "our proof may suggest that a similar skeleton based approach may work in terms of @xmath543 , @xmath332 and @xmath287 as defined in theorem [ t - exact;n=2k ] .",
    "the following example however shows that this is not possible .    .",
    "both above positions have @xmath544 ; but the position obtained by removing the red area has @xmath545 and such a position can not be obtained by the picture on the right since @xmath546 implies that @xmath547.,height=188 ]",
    "the following result was shown in @xcite .",
    "we provide here a different proof for the convenience of the reader .",
    "@xmath548see @xcite@xmath549 .",
    "[ t - moore - m=0,1 ] for any @xmath64 and @xmath550 , a position @xmath11 is an @xmath349-position of the moore game nim@xmath73 if and only if @xmath551 .",
    "let us represent the components of @xmath11 as binary sequences @xmath552 and define @xmath553 then we have @xmath554 .",
    "[ moore1 ] let @xmath149 be a move , and let @xmath555 be the highest index such that @xmath556 for some @xmath68 .",
    "then we must have @xmath557 for all @xmath558 .    in a move we can only decrease the components of @xmath11 .",
    "therefore , if @xmath559 , then we must have a @xmath560 such that @xmath561 .",
    "first , let us prove moore s result : @xmath563 if and only if @xmath564 .    by the properties of @xmath4-positions it is enough to show that    * for any position @xmath11 with @xmath564 , there exists no move @xmath13 such that @xmath565 ; * for any position @xmath11 with @xmath566 , there exists a move @xmath13 such that @xmath565 .    to show ( i0 ) , let us consider a move @xmath13 from a position @xmath11 with @xmath564 .",
    "let @xmath555 be the highest binary bit such that @xmath567 and @xmath568 differ for some @xmath68 .",
    "such a @xmath555 must exist since in a move we must change at least one components . by lemma [ moore1 ] we have @xmath557 for all @xmath558 , implying @xmath569 because in a move we can change at most @xmath3 components .",
    "therefore , @xmath570 and , thus , @xmath571 .    to show ( a0 ) , let us consider a position @xmath11 with @xmath572 .",
    "we will construct a move @xmath13 such that @xmath565 .",
    "let @xmath573 denote the set of bits @xmath555 such that @xmath574 , assuming @xmath575 .",
    "set @xmath576 .",
    "the following algorithm maintains the index set @xmath577 for @xmath578 to compute a move @xmath13 .",
    "the set @xmath579 represents the components of @xmath11 that we decrease when creating @xmath12 .",
    "we will use the notation @xmath580 and @xmath581 .",
    "* step 0*. initialize @xmath582 and hence , @xmath583 , and set @xmath584 for all @xmath585 .    * step 1*. for @xmath586 , construct @xmath579 and update @xmath12 as follows .",
    "* case 1 . * if @xmath587 , then let @xmath588 , choose @xmath589 many indices @xmath590 from @xmath591 such that @xmath592 , and update @xmath593 for such indices .",
    "* case 2 . * if @xmath594 and @xmath595 , then let @xmath588 , choose @xmath596 many indices @xmath590 from @xmath579 such that @xmath597 , and update @xmath598 for such indices .",
    "* case 3 . *",
    "if @xmath594 and @xmath599 , then let @xmath579 be an index set obtained from @xmath600 by adding @xmath601 many indices @xmath68 from @xmath602 such that @xmath603 , and update @xmath604 for all @xmath605 with @xmath606 .",
    "we first note that three cases above are exclusive and cover all possible @xmath589 , @xmath607 and @xmath608 .",
    "moreover , it is easily seen that a position @xmath12 after the execution of the algorithm satisfies @xmath609 , and no @xmath610 for @xmath611 was updated in step 1 , that is , @xmath612 holds for @xmath611 . since @xmath613 , it remains to show that @xmath614 .",
    "assume that @xmath68 is an index such that @xmath615 .",
    "then some @xmath555 satisfies @xmath616 and @xmath605 .",
    "this implies that @xmath610 was first updated during the @xmath555th iteration of step 1 .",
    "namely , the @xmath617th bit of @xmath610 are modified from @xmath108 to @xmath54 . since @xmath618 holds for all @xmath62 with @xmath619 , we have @xmath620 , which completes the proof .",
    "now , let us prove that @xmath621 if and only if @xmath622 .",
    "the proof in the previous subsection implies that for a position @xmath11 with @xmath622 there exists a move @xmath149 such that @xmath609 . by the properties of the sg function , it remains to show that    * for any position @xmath11 with @xmath623 , there exists no move @xmath13 such that @xmath624 ; * for any position @xmath11 with @xmath625 , there exists a move @xmath13 such that @xmath626 ;    we prove ( i1 ) similarly to ( i0 ) .",
    "let us assume that @xmath622 holds for a position @xmath11 and consider a move @xmath13 .",
    "let @xmath555 be the highest binary bit such that @xmath567 and @xmath568 differ for some @xmath68 .",
    "then by lemma [ moore1 ] we have @xmath627 for all @xmath68 , and @xmath628 . hence , @xmath629 and , thus , @xmath630 .    to show ( a1 ) ,",
    "let us consider a position @xmath11 with @xmath625 .",
    "similarly to ( a0 ) , we will algorithmically construct a move @xmath13 such that @xmath626 .",
    "let again @xmath631 denote the set of bits @xmath555 such that @xmath632 , where we assume that @xmath633 and @xmath634 denotes the @xmath555th bit of @xmath108 , that is , @xmath635 if @xmath636 , and @xmath637 if @xmath638 . the algorithm remains the same , as for ( a0 ) , except for step 1 , when @xmath639 .",
    "* step 1*. construct @xmath640 and update @xmath12 as follows .    * case 1 . * if @xmath641 and @xmath642 , then let @xmath643 , choose @xmath644 many indices @xmath590 from @xmath640 such that @xmath645 , and update @xmath646 for such indices .",
    "* case 2 . *",
    "if @xmath641 and @xmath647 , let @xmath643 , choose @xmath648 many indices @xmath590 from @xmath640 such that @xmath649 and update @xmath650 for such indices .",
    "* case 3 . *",
    "if @xmath641 and @xmath651 , then let @xmath640 be an index set obtained from @xmath652 by adding @xmath653 many indices @xmath68 from @xmath654 such that @xmath655 , and update @xmath646 for all @xmath656 with @xmath645 .",
    "* case 4 . * if @xmath657 and @xmath658 , then let @xmath643 , choose an index @xmath590 from @xmath640 such that @xmath649 , and update @xmath659 .    * case 5 . * if @xmath657 and @xmath660 , then let @xmath643 , and update @xmath646 for all @xmath656 .    * case 6 . * if @xmath657 and @xmath661 , then let @xmath640 be an index set obtained from @xmath652 by adding @xmath662 many indices @xmath68 from @xmath663\\setminus i_{p-1}$ ] such that @xmath655 , and update @xmath646 for all @xmath656 .    note that the above six cases are exclusive and cover all possible @xmath664 , @xmath665 , and @xmath666 . note also that in case 6 , @xmath667 since otherwise @xmath564 , giving a contradiction .",
    "thus , in case 6 , we can choose @xmath668 many indices @xmath68 from @xmath654 such that @xmath655 .",
    "let @xmath12 be a position obtained by the algorithm . then , clearly @xmath626 and @xmath13 is a move .",
    "this completes the proof of ( a1 ) .",
    "the concept of the sum of @xmath2 impartial games @xmath669 was considered in sections [ sss003 ] and [ sss004 ] .",
    "we can naturally extend this concept and define , in two different ways .",
    "the @xmath3-sum of @xmath2 games , for any integer @xmath3 such that @xmath670 as follows .",
    "two players alternate turns ; by one move a player has to choose at least one and at most @xmath3 ( respectively , exactly @xmath3 ) among the given @xmath2 games and make a move in each of them . to start the game we fix an initial position @xmath671 in @xmath58 for @xmath59 .",
    "the game terminates when a player is out of moves ; ( s)he lost , while the opponent , who made the last move , wins the game .",
    "two versions defined above will be called the _ moore s _ and , respectively , _ exact _",
    "@xmath3-sum of the impartial games @xmath669 .    obviously , both concepts turn into the standard sum when @xmath82 . in this case a remarkable property holds .",
    "let us compute the sg function @xmath672 of each game @xmath58 in its initial position @xmath671 for each @xmath59 and replace the sum @xmath673 by the standard @xmath2-pile nim with the initial position @xmath33 .",
    "the sg values are the same in the considered two positions @xcite    of course , it is tempting to extend the sg theory from the case @xmath82 to any @xmath3 .",
    "although it becomes not that easy to compute the sg function , but as we know , it can be done for moore s @xmath3-sum when @xmath5 and for the exact @xmath3-sum when @xmath125 . however",
    ", such an attempt fails , together with the following key property : no move can keep the sg value . indeed , whenever @xmath674 , there may exist moves in @xmath58 and @xmath675 that swap the sg values and thus the whole vector @xmath11 remains the same after such moves .",
    "obviously , this can not happen when @xmath82 , since at least two summand games are required .",
    "this problem is not arising in the exact and moore s @xmath3-nim , since no move can make larger the number of tokens in a pile .",
    "for example , @xmath676 and @xmath677 are @xmath4-positions in nim@xmath678 . obviously , there is no move between these positions since it would increase either the third or the fourth pile . yet",
    ", such moves can exist in impartial games @xmath679 and @xmath680 .",
    "thus , replacing nim@xmath681 by @xmath682 , and allowing to move in any two games each time , is not correct , because the sg functions of nim@xmath681 and moore s @xmath683-sum of @xmath684 , and @xmath680 may differ .",
    "similarly , for any @xmath685 , it is possible that in a @xmath3-sum of @xmath686 there is a move permuting ( for example , cyclically ) some @xmath3 and keeping the remaining @xmath109 sg values .",
    "yet , the property in the title of this subsection may hold if we restrict the digraphs @xmath687 of the summand - games . recall that a digraph @xmath688 is called _ transitive _ if @xmath689 whenever @xmath690 for some @xmath691 . obviously ,",
    "if @xmath58 is transitive then the sg value can not be increased by a move .",
    "it is also clear that an impartial game on a transitive graph @xmath58 with an initial position @xmath671 can be replaced just by one pile of cardinality equal to the corresponding sg value , @xmath692 .",
    "thus , both moore s and the exact @xmath3-sum of @xmath2 impartial games on transitive digraphs are reduced to nim@xmath73 and nim@xmath123 , respectively ."
  ],
  "abstract_text": [
    "<S> moore s generalization of the game of nim is played as follows . given two integer parameters @xmath0 such that @xmath1 , and @xmath2 piles of tokens . </S>",
    "<S> two players take turns . by one move a player reduces at least one and at most @xmath3 piles . </S>",
    "<S> the player who makes the last move wins . </S>",
    "<S> the @xmath4-positions of this game were characterized by moore in 1910 and an explicit formula for its sprague - grundy function was given by jenkyns and mayberry in 1980 , for the case @xmath5 only . </S>",
    "<S> we modify moore s game and introduce exact @xmath3-nim in which each move reduces exactly @xmath3 piles . </S>",
    "<S> we give a simple polynomial algorithm computing the sprague - grundy function of exact @xmath3-nim in case @xmath6 and an explicit formula for it in case @xmath7 . </S>",
    "<S> the last case shows a surprising similarity to jenkyns and mayberry s solution even though the meaning of some of the expressions are quite different . </S>"
  ]
}