{
  "article_text": [
    "owing to their tractability , the or literature predominantly focuses on queueing systems with an _ infinite _ buffer or storage capacity . in practical applications ,",
    "however , we typically encounter systems with _ finite_-buffer queues .",
    "often , the infinite - buffer queue is used to approximate its finite - buffer counterpart , but it is questionable whether this is justified when the buffer is not so large .    in specific cases",
    "explicit analysis of the finite - buffer queue _ is _ possible . in this paper",
    "we consider the workload process @xmath3 of a fluid queue with finite buffer capacity @xmath4 .",
    "using the results for the fluid queue we also study the workload in a finite - buffer m / g/1 queue .",
    "the performance measure we are interested in is the so - called _ occupation time _ of the set @xmath5 $ ] up to time @xmath6 , for some @xmath7 $ ] , defined by @xmath8\\}}{\\rm d}s.\\ ] ] our interest in the occupation time can be motivated as follows .",
    "the queueing literature mostly focuses on stationary performance measures ( e.g. the distribution of the workload @xmath9 when @xmath10 ) or on the performance after a finite time ( e.g. the distribution of @xmath9 at a fixed time @xmath11 ) .",
    "such metrics do not always provide operators with the right means to assess the service level agreed upon with their clients .",
    "consider for instance a call center in which the service level is measured over intervals of several hours during the day ; a typical service - level target is then that 80% of the calls should be answered within 20 seconds .",
    "numerical results for this call center setting @xcite show that there is severe fluctuation in the service level , even when measured over periods of several hours up to a day .",
    "using a stationary measure for the average performance over a finite period may thus be highly inadequate ( unless the period over which is averaged is long enough ) .",
    "the fact that the service level fluctuates on such rather long time scales has been observed in the queueing community only relatively recently ( see @xcite for some call center and queueing applications ) .",
    "our work is among the first attempts to study occupation times in finite - capacity queueing systems .    whereas there is little literature on occupation times for queues",
    ", there is a substantial body of work on occupation times in a broader setting .",
    "one stream of research focuses on occupation times for processes whose paths can be decomposed into regenerative cycles @xcite .",
    "another branch is concerned with occupation times of spectrally negative lvy processes , see e.g. @xcite .",
    "the results established typically concern occupation times until a first passage time , whereas @xcite focuses on refracted lvy processes . in @xcite",
    "spectrally positive lvy processes with reflection at the infimum were considered .",
    "we also refer to @xcite and references therein for additional literature .",
    "a natural extension of lvy processes are markov - modulated lvy processes , for the case of a markov - modulated brownian motion the occupation time has been analyzed in @xcite .    in this paper",
    "we use the framework studied in @xcite . more specifically , the occupation time is cast in terms of an alternating renewal process , whereas for the current setting the upper reflecting barrier complicates the analysis . for the finite buffer fluid queue we study ,",
    "there are off times where the process increases linearly and on times where the process decreases linearly .",
    "we consider the case the off times have a phase type distribution and the on times have an exponential distribution ; for this model we succeed in deriving closed - form results for the laplace transform ( with respect to @xmath6 ) of the quantity under consideration .",
    "relying on the ideas developed in @xcite , all quantities of interest can be explicitly computed as solutions of systems of linear equations .",
    "the structure of the paper is as follows . in section 2",
    "we describe the model and give some preliminaries .",
    "the main result is presented in section 3 .",
    "some discussion related to computability can be found in section  4 .",
    "we consider the finite capacity fluid queue with subsequent on and off times . in the fluid queue work",
    "arrives with a linear rate and the server switches between two modes , on and off .",
    "the on times correspond to time periods the server is active while the off times to time periods the server is inactive . during the on times work is being served and during off times work accumulates , both with a linear rate .",
    "we consider the case the on times have an exponential distribution with parameter @xmath12 and the off times have a phase - type distribution .",
    "the workload capacity is @xmath13 and work that does not fit is rejected ; see subsection  [ subs : double - refl ] for a more formal description .",
    "some basic results concerning phase - type distributions and the kella - whitt martingale that are used in the sequel are first presented in subsection  [ subs : pre ] .",
    "[ [ phase - type - distributions ] ] phase - type distributions + + + + + + + + + + + + + + + + + + + + + + + +    a phase - type distribution @xmath14 is defined as the _ absorption time _ of a continuous - time markov process @xmath15 with finite state space @xmath16 such that @xmath17 is an absorbing state and the states in @xmath18 are transient .",
    "we denote by @xmath19 the initial probability distribution of the markov process , by @xmath20 the _ phase generator _ , i.e. , the @xmath21 rate matrix between the transient states and by @xmath22 the _ exit vector _ , i.e. , the @xmath23- dimensional rate vector between the transient states and the absorbing state @xmath17 .",
    "the vector @xmath22 can equivalently be written as @xmath24 , where @xmath25 a vector of ones .",
    "we denote such a phase - type distribution by @xmath26 where @xmath27 .",
    "the cardinality of the state space @xmath18 , i.e. , @xmath28 , represents the _ number of phases _ of the phase - type distribution @xmath14 ; for simplicity we assume that @xmath29 . in what follows",
    "we denote by @xmath14 a phase - type distribution with representation @xmath26 ; for a phase - type distribution with representation @xmath30 we add the subscript @xmath31 in the notation .",
    "an important property of the class of phase - type distributions is that it is dense ( in the sense of weak convergence ) in the set of all probability distributions on @xmath32 ; this result is stated and proven in ( * ? ? ?",
    "4.2 ) . for a phase - type distribution with representation @xmath26 , the cumulative distribution function @xmath33 ,",
    "the density @xmath34 and the laplace transform @xmath35 $ ] are given in ( * ? ? ?",
    "4.1 ) . in particular",
    ", for @xmath36 and @xmath37 , we have @xmath38 = \\vec{\\alpha}_0 ( s{\\boldsymbol i}-{\\boldsymbol t})^{-1}\\vec{t}.\\ ] ] when the phase - type distribution has representation @xmath39 we use the notation @xmath40 instead of @xmath41 . for a general overview of the theory of phase - type distributions",
    "we refer to @xcite and references therein .",
    "[ [ markov - additive - fluid - process - mafp ] ] markov - additive fluid process ( ma(f)p ) + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    consider a right - continuous irreducible finite state space continuous time markov process @xmath15 defined on a filtered probability space @xmath42 with a finite state space @xmath43 and rate transition matrix @xmath44 .",
    "while the markov process @xmath45 is in state @xmath31 the process @xmath46 behaves like a linear drift @xmath47 .",
    "we assume that the rates @xmath48 are independet of the process @xmath45 .",
    "letting @xmath49 be the jump epochs of the markov process @xmath50 ( with @xmath51 ) we obtain the following expression for the process @xmath46",
    ", @xmath52 where @xmath53 and is independent of the markov process @xmath54 and the rates @xmath48 .",
    "for @xmath55 the _ matrix exponent _ of the map is defined as @xmath56 in what follows we shall need information concerning the roots of the equation @xmath57 , where @xmath58 . from @xcite",
    "we have that there exist @xmath59 values @xmath60 and corresponding vectors @xmath61 such that , for each @xmath62 , @xmath63 and @xmath64 .    [ [ the - kella - whitt - martingale ] ] the kella - whitt martingale + + + + + + + + + + + + + + + + + + + + + + + + + +    the kella - whitt martingale for maps was established in @xcite ; let @xmath65 be an adapted continuous process having finite variation on compact intervals .",
    "set @xmath66 and pick @xmath55 .",
    "then for every initial distribution @xmath67 @xmath68 is a vector - valued zero mean martingale .",
    "the map @xmath69 we analyze has a modulating markov process @xmath70 with state space @xmath71 and generator @xmath72 given by @xmath73         \\vec{t }             & { \\bf t }          \\end{bmatrix},\\ ] ] which is a @xmath74 matrix .",
    "additionally we suppose that @xmath75 , @xmath22 is a @xmath76 column vector with negative entries , @xmath19 is a @xmath77 column vector with entries that sum up to one and @xmath78 is a @xmath79 matrix with nonnegative entries .",
    "the vector @xmath22 and the matrix @xmath78 are such so that each row of @xmath72 sums up to one , alternatively we can write @xmath80 . on the event @xmath81 the process @xmath46 decreases with rate @xmath82 and on the event @xmath83 , for @xmath84 , the process @xmath46 increases with rate @xmath85 .",
    "we observe that such a map decreases linearly with rate @xmath86 during on - times , which are exponentially distributed with parameter @xmath12 , and increases linearly with rates @xmath47 during off - times , which have a phase - type @xmath87 distribution .",
    "depending on the state of the modulating process we have a different rate .",
    "we study this model motivated by finite capacity systems with interrupted service , during on times , where the server is active , work is being served with rate @xmath86 while during off times , where the server is not active , work accumulates with rates @xmath88 . the workload process",
    "@xmath3 we are interested in is formally defined as a solution to a two dimensional skorokhod problem , i.e. , for a markov - additive fluid process @xmath89 as defined in ( [ eq : mapl ] ) , we have @xmath90 in the above expression @xmath91 represents the local time at the infimum and @xmath92 the local time at @xmath13 .",
    "informally , for @xmath93 , @xmath94 is the amount that has to be added to @xmath95 so that it stays non - negative while @xmath96 is the amount that has to be subtracted from @xmath97 so that it stays below level @xmath13 .",
    "it is known that such a triplet exists and is unique , see @xcite . for more details",
    "we refer to @xcite and references therein . for notational simplicity",
    "we assume that @xmath98 and that @xmath99 , i.e. , we start with an on time ; the cases @xmath100 and @xmath101 can be dealt with analogously at the expense of more complicated expressions .    for the map described above",
    "the matrix exponent is a @xmath102 matrix ; denote by @xmath103 the @xmath104 roots of the equation @xmath105 and consider , for @xmath106 , the vectors @xmath107 defined by @xmath108 for the vectors defined in ( [ vectors ] ) we have that @xmath109 for all @xmath106 .",
    "for the analysis of the occupation time @xmath110 we observe that the process @xmath3 alternates between the two sets @xmath5 $ ] and @xmath111 $ ] . due to the special structure of @xmath89",
    "both upcrossings and downcrossings of level @xmath112 occur with equality .",
    "moreover , from the description in section ( [ subs : double - refl ] ) we see that an upcrossing of level @xmath112 can occur only when the modulating markov process is in one of the states @xmath113 ; the time @xmath54 spends in these states before jumping to state 1 has a @xmath114 _ phase type _ distribution .",
    "similarly , a downcrossing of level @xmath112 can occur only while the modulating markov process is in state 1 .",
    "we define the following first passage times , for @xmath115 , @xmath116 we use the notation @xmath117 for the sequence of successive downcrossings and @xmath118 for the sequence of successive upcrossings of level @xmath112 .",
    "an extension of ( * ? ? ? * thms",
    ".  1 and 2 ) for the case of doubly reflected processes shows that @xmath117 is a renewal process , and hence the successive sojourn times , @xmath119 , @xmath120 , for @xmath121 , and @xmath122 , for @xmath123 , are sequences of well defined random variables .",
    "in addition , @xmath124 is independent of @xmath125 while in general @xmath126 and @xmath125 are dependent .",
    "we observe that the random vectors @xmath1 are i.i.d .  and distributed as a generic random vector @xmath127 . in figure  [ figure pathg ] a realization of @xmath128 is depicted .",
    "[ figure pathg ]    the double transform of the occupation time @xmath110 in terms of the joint distribution of @xmath129 and @xmath130 is given in ( * ? ? ?",
    "* theorem 3.1 ) which we now restate :    [ old ] for the transform of the occupation time @xmath110 , and for @xmath131 , we have @xmath132,\\ ] ]    where for @xmath133 , @xmath134    to analyze the occupation time it thus suffices to determine the joint transform of the random variables @xmath130 and @xmath129 , i.e. , @xmath135 .",
    "for @xmath84 we define the first hitting time of level @xmath112 with initial conditions @xmath136 : @xmath137.\\ ] ] considering the event @xmath138 that an upcrossing of level @xmath112 occurs while the modulating process @xmath139 is in state @xmath31 , for @xmath84 , we obtain , for @xmath133 , @xmath140 = \\operatorname{\\mathbb{e}}\\left [ e^{-\\theta_1\\sigma-\\theta_2 t}\\right]=\\sum_{i=2}^{n+1 } \\operatorname{\\mathbb{e}}\\left [ e^{-\\theta_1\\sigma}1_{\\{e_i\\}}\\right]\\operatorname{\\mathbb{e}}\\left [ e^{-\\theta_2 t}|e_i\\right]=\\sum_{i=2}^{n+1 } \\operatorname{\\mathbb{e}}\\left [ e^{-\\theta_1\\sigma}1_{\\{e_i\\}}\\right]\\operatorname{\\mathbb{e}}e^{-\\theta_2 t_i}.\\ ] ] in what follows we use , for @xmath141 and @xmath84 , the notation @xmath142 = \\operatorname{\\mathbb{e}}\\left [ e^{-\\theta_1 \\sigma}1_{\\{\\operatorname{\\mathcal{j}}(\\sigma)=i\\}}\\right].\\ ] ] it will be shown that these terms can be computed as the solution of a system of linear equations .",
    "the idea of conditioning on the phase an _ upcrossing _ ( _ downcrossing _ respectively ) occurs and using the _ conditional independence _ of the corresponding time epochs is developed in @xcite . determining the factors involved in the terms presented above is the main contribution of the analysis that follows .",
    "we first present the exact expression for the double transform of the random variables @xmath127 .    for @xmath143 , the joint transform of the random variables @xmath130 and @xmath129",
    "is given by @xmath144 where the quantities @xmath145 and @xmath146 depend only on @xmath147 and will be defined in ( [ det ] ) and ( [ eq : ct ] ) below ; @xmath148 for @xmath84 will be determined as the solution of a system of linear equations ; this system is given in ( [ eq : system2 ] ) .",
    "the vectors @xmath149 for @xmath150 were defined in ( [ vectors ] ) .",
    "the first sum ranging from 2 to @xmath104 represents the conditioning on one of the @xmath104 phases of the modulating markov process when an upcrossing occurs , that is the event @xmath151 .",
    "observe that an upcrossing of level @xmath112 is not possible when @xmath54 is in state 1 because then the process @xmath46 decreases .",
    "the terms , @xmath148 , as defined in ( [ eq : zi ] ) , denote the transform of @xmath152 on the event the upcrossing of level @xmath112 occurs while the modulating markov process is in state @xmath31 and the last sum concerns the transform of @xmath153 conditional on the event @xmath154 . the renewal argument in the beginning of the section yields that @xmath155 = \\operatorname{\\mathbb{e}}\\left[e^{-\\theta_2 t } | \\operatorname{\\mathcal{j}}(\\sigma)=i\\right ] = \\operatorname{\\mathbb{e}}\\left[e^{-\\theta_2 t } | \\operatorname{\\mathcal{j}}(0)=i\\right ] = w_i(\\theta_2).\\ ] ]",
    "the proof relies on the decomposition given in ( [ eq : dec ] ) .",
    "below we analyze the two expectations at the rhs of ( [ eq : dec ] ) separately .",
    "@xmath2 we determine @xmath148 for @xmath84 as the solution of a system of linear equations ; this idea was initially developed in ( * ? ? ?",
    "* section 5 ) and essentially relies on the kella - whitt martingale for markov additive processes .",
    "the kella - whitt martingale , for a markov additive process reflected at the infimum , has , for all @xmath156 , @xmath141 and for @xmath11,the following form @xmath157 this follows from the general form of the kella - whitt martingale given in ( [ kwm ] ) by considering the process @xmath158 defined , for @xmath11 , by @xmath159 .",
    "this gives @xmath160 .",
    "the process @xmath158 has paths of bounded variation and is also contiuous since the local time at the infimum @xmath161 is a contiuous process .",
    "hence , @xmath162 is a zero - mean martingale .",
    "furthermore , by contruction of the model we have that @xmath99 . applying the optional sampling theorem for the stopping time @xmath152",
    ", we obtain , for all @xmath156 , @xmath163(\\operatorname{\\mathcal{q}}+\\alpha{\\bf \\delta}_r - \\theta_1{\\bf i } ) = e^{\\alpha\\tau}\\vec{z}(\\theta_1 ) - e^{\\alpha\\tau}\\vec{e}_1 - \\alpha\\vec{\\ell}(\\theta_1),\\ ] ] where @xmath164 = \\big(0,\\operatorname{\\mathbb{e}}\\left[e^{-\\theta_1\\sigma}1_{\\{\\operatorname{\\mathcal{j}}(\\sigma)=2\\}}\\right],\\hdots,\\operatorname{\\mathbb{e}}\\left[e^{-\\theta_1\\sigma}1_{\\{\\operatorname{\\mathcal{j}}(\\sigma)=n+1\\}}\\right]\\big)=\\big(0,z_2(\\theta_1),\\hdots , z_{n+1}(\\theta_2)\\big)\\ ] ] and @xmath165=\\big(\\operatorname{\\mathbb{e}}\\left[\\int_0^{\\sigma } e^{-\\theta_1s}1_{\\{\\operatorname{\\mathcal{j}}(s)=1\\}}{\\rm d}l(s)\\right],0,\\hdots,0\\big ) = \\big(\\ell(\\theta_1),0,\\hdots,0\\big).\\ ] ] the vector @xmath166 represents the local time at the infimum up to the stopping time @xmath152 , we observe that the process @xmath167 can hit level 0 only on the event @xmath168 .",
    "consider the @xmath104 roots of the equation @xmath169 , denote them by @xmath170 , and the corresponding vectors @xmath171 , for @xmath106 as defined in ( [ vectors ] ) . substituting @xmath172 and taking the inner products with the vectors @xmath173 we obtain , for @xmath106 , the equation @xmath174 hence we obtain the following system of @xmath104 linear equations and @xmath104 unknowns @xmath175 solving this system of equations we obtain the @xmath148 , for @xmath84 .",
    "@xmath2 next , consider the second term in the sum at the rhs of ( [ eq : dec ] ) , i.e. , the term @xmath176 $ ] .",
    "this term represents the tranform of the first time the process @xmath46 hits level @xmath112 given that @xmath177 .",
    "the kella - whitt martingale , for a map reflected at @xmath13 , has , for all @xmath178 and for @xmath11 , the following form @xmath179 a similar argument as for @xmath152 yields the following system of equations    @xmath180    where @xmath181 , j=2,\\hdots , n+1 $ ] . using the method of determinants we can write @xmath182 in the following form @xmath183 = \\frac{\\sum_{k=1}^{n+1}(-1)^{1+k}c_k(\\theta_2)e^{-\\rho_k(\\theta_2)(k-\\tau)}h_{k , i}(\\theta_2)}{\\sum_{k=1}^{n+1}(-1)^{1+k}c_k(\\theta_2)e^{-\\rho_k(\\theta_2)(k-\\tau)}},\\ ] ] where , for @xmath106 ,    @xmath184    denoting @xmath185 and substituting the expression found for @xmath182 in ( [ eq : solutionw ] ) into ( [ eq : dec ] )",
    "yields the result of theorem [ jointtransform ] where the @xmath186 , for @xmath84 , are given by the system in ( [ eq : system2 ] ) .",
    "consider the workload process in a finite buffer queue where the service distribution is of_phase - type _ with representation @xmath187 . in this case",
    "the process @xmath188 is a compound poisson process with phase - type jumps ; the workload process @xmath189 is defined by taking the process @xmath46 reflected at the infimum and at a finite level @xmath190 .",
    "the result establshed in theorem [ jointtransform ] can be used to determine the joint tranform of the random variables @xmath130 and @xmath129 in the finite buffer queue as well , afterwards using theorem [ old ] the double transform of the occupation time @xmath110 can be determined .",
    "following the construction presented in section [ subs : double - refl ] we consider the process @xmath191 which decreases linearly with rate @xmath86 during on - times , which are exponentially distributed with parameter @xmath12 , and increases linearly with rate @xmath192 during off - times , which have a phase - type @xmath193 distribution .",
    "it is straightforward to show that , if we let @xmath194 , the process @xmath191",
    "converges a.s . to a compound poisson process with a negative drift @xmath86 and",
    "jumps having a phase - type @xmath87 distribution . using the continuity of the reflection operators we obtain that the workload processes are the same in the limit .",
    "the research of n. starreveld and m. mandjes is partly funded by the nwo gravitation project networks , grant number 024.002.003 .",
    "( 2006 ) . _ a unified framework for numerically inverting laplace transforms_. informs journal on computing , vol .",
    "408 - 421 .",
    "_ applied probability and queues , _",
    "2nd edition .",
    "springer , new york .",
    "( 2014 ) . _ lvy processes , phase - type distributions and martingales_. stochastic models , vol .",
    "443 - 468 .",
    "( 200 ) . _ a multi - dimensional martingale for markov additive processes and its applications_. advances in applied probability , vol .",
    "376 - 393 .",
    "_ staffing to maximize profit for call centers with alternate service - level agreements_. operations research , vol .",
    "685 - 700 .",
    "( 2012)._occupation times for markov - modulated brownian motion_. journal of applied probability , 49(2 ) , pp",
    ". 549565 .",
    "_ on level crossings and cycles in dam processes_. mathematics of operations research , vol .",
    "297 - 310 .",
    "_ occupation times of intervals until passage times for spectrally negative lvy processes_. stochastic processes and their applications , vol .",
    "1408 - 1435 .",
    "( 2015 ) . _",
    "queues and lvy fluctuation theory_. springer , new york .",
    "_ singularities of the matrix exponent of a markov additive process with one - sided jumps_. stochastic processes and their applications , vol .",
    "120 , issue 9 , pp . 17761794 .",
    "_ reflecting thoughts_. statistics and probability letters , 76(16 ) , pp",
    ". 1808 - 1811 .",
    "( 2007 ) . _ an explicit formula for the skorokhod map on @xmath195$]_. the annals of probability , vol .",
    "35 , no . 5 , 1740 - 1768 .",
    "( 2014 ) . _ occupation times of refracted lvy processes_. journal of theoretical probability , vol .",
    "1292 - 1315 .",
    "_ occupation times for regenerative processes with lvy applications_. submitted .",
    "_ on certain sojourn time problems in the theory of stochastic processes_. acta mathematica academiae scientiarum hungarica , vol .",
    "169 - 191 ."
  ],
  "abstract_text": [
    "<S> in this short communication we study a fluid queue with a finite buffer . </S>",
    "<S> the performance measure we are interested in is the occupation time over a finite time period , i.e. , the fraction of time the workload process is below some fixed target level . </S>",
    "<S> we construct an alternating sequence of sojourn times @xmath0 where the pairs @xmath1 are i.i.d </S>",
    "<S> . random vectors . </S>",
    "<S> we use this sequence to determine the distribution function of the occupation time in terms of its double transform .    </S>",
    "<S> [ [ keywords ] ] keywords : + + + + + + + + +    occupation time @xmath2 finite buffer queue @xmath2 compound poisson process @xmath2 phase type distribution @xmath2 doubly reflected process    [ [ affiliations ] ] affiliations : + + + + + + + + + + + + +    n. j. starreveld is with korteweg - de vries institute for mathematics , science park 904 , 1098 xh amsterdam , university of amsterdam , the netherlands . </S>",
    "<S> email : . </S>",
    "<S> r. bekker is with department of mathematics , vu university amsterdam , de boelelaan 1081a , 1081 hv amsterdam , the netherlands . </S>",
    "<S> email : . </S>",
    "<S> m. mandjes is with korteweg - de vries institute for mathematics , university of amsterdam , science park 904 , 1098 xh amsterdam , the netherlands ; he is also affiliated with eurandom , eindhoven university of technology , eindhoven , the netherlands , and cwi , amsterdam the netherlands . </S>",
    "<S> email : .    </S>",
    "<S> [ [ mathematics - subject - classification ] ] mathematics subject classification : + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + + +    60j55 ; 60j75 ; 60k25 . </S>"
  ]
}