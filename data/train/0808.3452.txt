{
  "article_text": [
    "in tropical geometry , algebraic curves are replaced by certain balanced piece - wise linear graphs called tropical curves .",
    "tropical geometry has gained lots of attention recently .",
    "one of the interesting results is that we can determine numbers of algebraic curves on toric surfaces satisfying incidence conditions by counting the corresponding tropical curves instead ( mikhalkin s correspondence theorem , see @xcite ) .",
    "this is true in particular for the toric surfaces @xmath3 and @xmath1 . the tropical numbers can be determined using certain lattice paths in the polygon dual to the toric surface ( see @xcite , theorem 2 ) .",
    "gromov - witten invariants can be thought of as `` virtual '' solutions to enumerative problems .",
    "they are deformation invariants , thus they coincide for the two surfaces @xmath2 and @xmath1 . for @xmath2 ,",
    "gromov - witten invariants are enumerative , i.e.  they count curves on @xmath2 satisfying incidence conditions . for @xmath1 , they are not , but it is known how they are related to enumerative numbers . therefore there is an equation relating the enumerative numbers of @xmath2 and @xmath1 .    the purpose of this paper is to give a tropical proof of this equation ( for some cases ) , using mikhalkin s correspondence theorem .",
    "let us introduce this equation in more details .",
    "let @xmath4 denote the class of a general section of @xmath1 and @xmath5 the class of the fiber of ruling .",
    "then the picard group of @xmath1 is generated by @xmath4 and @xmath5 .",
    "the exceptional curve is linearly equivalent to @xmath6 .",
    "the picard group of @xmath2 is generated by two fibers of ruling which we will denote by @xmath4 and @xmath5 as well .",
    "we can degenerate @xmath1 to @xmath2 such that the class @xmath7 on @xmath1 degenerates to the class @xmath8 on @xmath2 .",
    "then for nonnegative @xmath9 , @xmath10 with @xmath11 we have    @xmath12    where @xmath13 and @xmath14 denote the numbers of nodal irreducible curves of genus @xmath15 of class @xmath8 in @xmath2 ( resp .  of class @xmath7 in @xmath1 ) through @xmath16 points in general position .",
    "( see @xcite , theorem 3.1.1 , for rational curves and @xcite , section 8.3 , for arbitrary genus . )",
    "let us now introduce the analogous tropical numbers .",
    "the polygon corresponding to the divisor class @xmath8 on @xmath2 is a rectangle with vertices @xmath17 , @xmath18 , @xmath19 and @xmath20 , the polygon corresponding to the divisor class @xmath7 on @xmath21 is a quadrangle with vertices @xmath17 , @xmath18 , @xmath22 and @xmath23 .",
    "we consider plane tropical curves dual to these polygons .",
    "thus , we consider plane tropical curves of degree @xmath24 and @xmath25 , where @xmath24 denotes the multiset of the vectors @xmath26 and @xmath27 each @xmath28 times and @xmath29 and @xmath30 each @xmath9 times and @xmath25 denotes the multiset of the vectors @xmath26 @xmath31 times , @xmath29 @xmath9 times , @xmath27 @xmath10 times and @xmath32 @xmath9 times .",
    "we denote by @xmath33 ( resp .",
    "@xmath34 ) the number of irreducible plane _ tropical _ curves of degree @xmath24 ( resp .  @xmath25 ) and genus @xmath15 through @xmath16 points in general position ( see @xcite ) .    our central result is the following theorem :    [ thm - main ] the following equation holds for    * nonnegative integers @xmath9 , @xmath10 with @xmath11 and @xmath35 , and for * @xmath36 , @xmath37 with @xmath11 and any @xmath38 :    @xmath39    of course this theorem ( and even the more general case ) is an immediate consequence of equation [ eq1 ] and mikhalkin s correspondence theorem which states that @xmath40 and @xmath41 .",
    "however , we want to give a proof within tropical geometry .",
    "we use two different tropical methods to prove theorem [ thm - main ] .    to prove the statement for nonnegative @xmath9 , @xmath10 with @xmath11 and @xmath35 ,",
    "we use induction on the degree and generalizations of kontsevich s formula for enumerative numbers on @xmath2 and @xmath1 .",
    "while kontsevich s formula for @xmath2 ( see theorem [ kontsevich0 ] ) was known and can be proved without tropical geometry ( @xcite , section 9 ) , our formula for @xmath1 ( see theorem [ kontsevich2 ] ) is new and was derived using tropical geometry . to derive a kontsevich - type formula tropically , we compute numbers of curves satisfying point and line conditions and mapping to a special point in tropical @xmath42 under the forgetful map . to prove kontsevich s formula for @xmath43",
    ", one can show that all such curves have a contracted bounded edge and can thus be interpreted as reducible tropical curves ( @xcite ) . for @xmath1 ,",
    "this statement is no longer true .",
    "instead , we get a correction - term corresponding to curves that do not have a contracted bounded edge .",
    "we show that these curves can also be interpreted as reducible curves in a different way .",
    "to prove theorem [ thm - main ] for @xmath36 , @xmath37 with @xmath11 and any @xmath38 , we use mikhalkin s lattice path algorithm to count tropical curves ( see theorem 2 of @xcite ) and observations about those lattice paths from @xcite .",
    "unfortunately , it seems that none of the above methods can be generalized to other cases easily .",
    "the paper is organized as follows . in section [ sec-1 ] ,",
    "we prove our tropical kontsevich formulas for @xmath2 and @xmath1 . in section [ sec-2 ]",
    ", we use those formulas to prove theorem [ thm - main ] for @xmath9 , @xmath10 with @xmath11 and @xmath35 using induction . in section",
    "[ sec-3 ] , we prove theorem [ thm - main ] for @xmath36 , @xmath37 with @xmath11 and any @xmath38 using lattice paths .",
    "we would like to thank ionut ciocan - fontanine and andreas gathmann for helpful discussions and flavia stan for help with the mathematica package multisum .",
    "to derive tropical kontsevich formulas for @xmath2 and @xmath1 , we generalize the ideas of @xcite .",
    "let us start by recalling some notations we will use .    [ not ] let @xmath44 and let @xmath45 denote the space of rational parametrized tropical curves in @xmath46 of degree @xmath47 , with @xmath48 ends all of which are labelled , and @xmath49 of which are contracted ends ( see definition 4.1 of @xcite ) .",
    "let @xmath50 denote the forgetful map which forgets all ends but the first @xmath51 contracted ends ( see definition 4.1 of @xcite ) , and @xmath52 the evaluation at the contracted end labelled @xmath53 ( see definition 3.3 of @xcite ) .",
    "pick two rational functions @xmath54 and @xmath55 on @xmath56 ( in the sense of @xcite , definition 3.1 ) that correspond to abstract tropical curves @xmath57 ( resp .",
    "@xmath58 ) where the ends @xmath59 and @xmath60 come together at a vertex ( resp .  where @xmath59 and @xmath61 come together ) and where the length parameter of the bounded edge is very large .    note that we use the space of parametrized tropical curves with labelled ends here .",
    "the reason is that one can show that this space is a tropical fan ( proposition 4.7 of @xcite ) and that we can thus use the tropical intersection theory from @xcite .",
    "since we want to count tropical curves without the labels of the non - contracted ends , we have to divide by a factor of @xmath62 , where @xmath63 is the group of possible permutations of the labels . in the kontsevich formula",
    "we want to prove ( theorem [ kontsevich2 ] ) , we sum over all possibilities to split the degree @xmath44 into two smaller degrees . to be precise",
    ", we would have to sum over all possibilities to pick a _ labelled _ subset of non - contracted ends forming the smaller degrees .",
    "this factor together with the factors for labelling the ends in the small degrees exactly cancel with the total factor of @xmath62 . in the following",
    ", we will therefore neglect the fact that non - contracted ends are labelled .",
    "the difference of @xmath54 and @xmath55 is globally given by a bounded rational function on @xmath56 .",
    "therefore , the tropical cartier divisors @xmath64 $ ] and @xmath65 $ ] are rationally equivalent and by lemma 8.5 of @xcite their pull - backs @xmath66\\cdot { \\mathcal{m}}_{0,n}^{\\text{lab}}(\\r^2,\\delta)$ ] and @xmath67\\cdot{\\mathcal{m}}_{0,n}^{\\text{lab}}(\\r^2,\\delta)$ ] are rationally equivalent as well .",
    "set @xmath68 and choose rational functions @xmath69 , @xmath70 , @xmath71 @xmath72 , @xmath73 on @xmath74 that correspond to tropical curves @xmath75 and @xmath76 of degree @xmath77 and to points @xmath78 in general position .",
    "we can set @xmath79 and @xmath80 to get @xmath81 and @xmath82 in this case .",
    "because of the above , we have @xmath83 ) \\\\ = & \\deg([\\operatorname{ev}_{1}^{\\ast}\\varphi_{1}\\cdot\\operatorname{ev}_{2}^{\\ast}\\varphi_{2}\\cdot\\prod_{i=3}^n(\\operatorname{ev}_{i}^{\\ast}{\\varphi_{i}}_{1}\\cdot\\operatorname{ev}_{i}^{\\ast}{\\varphi_{i}}_{2})\\cdot\\operatorname{f\\/t}^{\\ast}\\varphi_{b}\\cdot{\\mathcal{m}}_{0,n}^{\\text{lab}}(\\r^2,\\delta ) ) ] . \\end{split}\\ ] ]    [ rem - generalconditions ] both above expressions are @xmath84-dimensional tropical intersection products as defined in @xcite , even if the set - theoretical intersection is higher - dimensional .",
    "if we pick the conditions to be general however , the set - theoretical intersection equals the support of the intersection product .",
    "that means that the intersection products above equal the sums of tropical curves in @xmath45 that satisfy the conditions , i.e.  that pass through @xmath81 , @xmath82 , @xmath85 and map to @xmath57 resp .",
    "@xmath86 under @xmath87 , counted with multiplicity .",
    "this can be shown analogously to @xcite , lemma 3.1 .",
    "the following lemma will enable us to compute the multiplicity with which we have to count each curve satisfying the conditions in the intersection product :    [ lem - determinante ] let @xmath88 be an abstract tropical variety ( in the sense of @xcite , definition 5.12 ) of dimension @xmath89 and @xmath69 , ",
    ", @xmath90 rational functions on @xmath88 .",
    "moreover , let @xmath91 be a point in the interior of a cone @xmath92 of maximal dimension in @xmath88 .",
    "assume that @xmath93 is of the form @xmath94 locally around @xmath95 , where @xmath96 denote @xmath97-affine functions with @xmath98 .",
    "let @xmath99 denote the linear part of the affine function @xmath100 and let @xmath101 be the @xmath102-matrix with entries @xmath103 for a basis @xmath104 of the lattice underlying @xmath88 at @xmath92 .",
    "then the coefficient of @xmath95 in the intersection product @xmath105 is equal to @xmath106 .",
    "the computation of the coefficient of @xmath95 in the intersection product is local around @xmath95 .",
    "thus , we may assume that @xmath88 is a tropical fan in some vector space @xmath107 and extend @xmath92 to the affine vector space @xmath108 spanned by @xmath92 .",
    "furthermore , we may consider the rational functions @xmath109 on the whole space @xmath108 .",
    "moreover , we may replace the rational functions @xmath110 by @xmath111 as changing a rational function by a linear function does not affect the intersection product .",
    "we define the morphism @xmath112",
    ". then we have @xmath113 for @xmath114 and for all @xmath115 . by the projection formula ( @xcite ,",
    "proposition 4.8 ) the multiplicity of @xmath91 in the intersection product @xmath116 is equal to the multiplicity of @xmath84 in @xmath117 in the intersection product @xmath118 . for dimensional reasons the cycle @xmath119 is the whole target space @xmath117 with some weight .",
    "but this weight is @xmath120 .",
    "note @xmath121 is the origin with weight @xmath122 .",
    "this finishes the proof .",
    "[ rem - choosecoor ] if @xmath92 is a cone in @xmath123 , it corresponds to a combinatorial type , i.e.  a homeomorphism class of a graph plus direction vectors for all edges ( see @xcite , 2.9 ) .",
    "we can deform a parametrized tropical curve @xmath124 within @xmath92 by changing the length of the bounded edges or translating the image @xmath125 .",
    "thus a basis for the lattice underlying @xmath123 at @xmath92 is given by the position of a root vertex @xmath126 and the length of all bounded edges . by remark 3.2 of @xcite ,",
    "the absolute value of the determinant of the matrix @xmath101 from lemma [ lem - determinante ] above is independent from the choice of a root vertex and an order of the bounded edges .",
    "[ ex - det ] assume @xmath92 is the cone in @xmath127 corresponding to the combinatorial type pictured below .",
    "following remark [ rem - choosecoor ] , we choose the position of @xmath128 and the lengths @xmath129 of the bounded edges as coordinates for @xmath92 .",
    "the following curve @xmath4 inside @xmath92 ( where @xmath130 , @xmath131 , @xmath132 and @xmath133 ) goes through the points @xmath134 ( which is cut out by @xmath135 and @xmath136 ) and @xmath137 ( cut out by @xmath138 and @xmath139 ) and through @xmath81 ( cut out by @xmath140 ) and @xmath82 ( cut out by @xmath141 ) and maps to the abstract tropical curve with @xmath59 and @xmath61 at one vertex and length parameter @xmath122 under @xmath87 .",
    "denote by @xmath142 a rational function on @xmath42 that cuts out this curve .",
    "because @xmath4 satisfies the conditions , it contributes to the intersection product @xmath143 let us compute the multiplicity with which it contributes using lemma [ lem - determinante ] .",
    "locally at @xmath144 , the function @xmath140 equals @xmath145 and locally at @xmath146 , the function @xmath141 equals @xmath147 .",
    "hence locally we have @xmath148 we can rewrite the pullbacks along @xmath149 and @xmath150 analogously .",
    "locally , @xmath87 equals the map that sends a curve in @xmath92 with coordinates @xmath151 to @xmath152 .",
    "we also have to write the linear part of the evaluation pullbacks in the basis of @xmath92 , i.e. in @xmath153 . for this , note first that @xmath154 thus , the linear part of @xmath155 equals @xmath156 and the linear part of @xmath157 equals @xmath158 so , if we plug for example the vector which has a @xmath122 at @xmath159 and @xmath84 everywhere else into the linear part of @xmath155 , we get @xmath160 .",
    "if we plug the vector which has a @xmath122 at @xmath161 and @xmath84 everywhere else into the linear part of @xmath157 , we get @xmath162 . continuing like this",
    ", we can see that the matrix @xmath101 equals : @xmath163    since @xmath164 , the curve @xmath4 contributes with multiplicity @xmath160 to the intersection product above .",
    "[ def - mult ] let @xmath4 be a curve contributing to a @xmath84-dimensional intersection product as in example [ ex - det ] consisting of evaluation pullbacks and the pullback of a curve in @xmath42 under @xmath87 ( resp .",
    "only evaluation pullbacks ) .",
    "then we denote by @xmath165 ( resp .",
    "@xmath166 ) the multiplicity with which @xmath4 contributes to the intersection product , which equals the absolute value of the determinant of the linear part of the combined evaluation and forgetful maps , as we have seen in [ lem - determinante ] .",
    "[ rem - detmult ] note that by @xcite , proposition 3.8 , @xmath166 equals the usual multiplicity of a tropical curve as defined in @xcite , 4.15 , i.e.  the multiplicity with which it contributes to the count of @xmath34 .    in the following ,",
    "we want to describe both sides of equation [ eqdeg ] in detail .",
    "we want to study the set of curves that satisfy the conditions , and their multiplicity .",
    "we will see that we can interpret the curves as reducible curves , and count the contributions from each component separately .",
    "this will lead to the formula of theorem [ kontsevich2 ] we want to prove .",
    "[ rem - string ] using the notations from [ not ] , let @xmath4 be a tropical curve in @xmath45 passing through @xmath81 , @xmath82 , @xmath85 and mapping to @xmath57 under @xmath87 ( hence a curve @xmath4 that contributes to the left hand side of equation [ eqdeg ] with multiplicity @xmath165 ) .",
    "we would like to generalize proposition 5.1 of @xcite , which states that @xmath4 has a contracted bounded edge .",
    "however , this is not true in the case of @xmath1 .",
    "we can have curves like the one shown in the following picture ( where the length @xmath167 is very large ) which do allow a very large @xmath42-coordinate .    even though those curves fail to have a contracted bounded edge ,",
    "we can still interpret them as reducible curves by cutting off the part which is far away to the right ( in the picture denoted by @xmath168 ) .",
    "the remaining part ( in the picture denoted by @xmath169 ) is a reducible curve of degree @xmath170 .",
    "the existence of such curves with a very large @xmath42-coordinate leads to the second part of the sum in the recursion formula of theorem [ kontsevich2 ] .",
    "the part @xmath168 which is far away to the right is called a _ string _ following @xcite , definition 3.5 .",
    "[ lem - contractededge ] using the notations from [ not ] ,",
    "let @xmath171 be a tropical curve that passes through @xmath75 , @xmath76 , @xmath172 , ",
    ", @xmath173 , maps to @xmath57 under @xmath87 and has a non - zero multiplicity @xmath165",
    ". then * either *    1 .",
    "@xmath4 has a contracted bounded edge * or * 2 .",
    "@xmath4 contains a string [ case - string ] + ( see remark [ rem - string ] ) that can be moved to the right .",
    "the beginning of the proof is similar to proposition 5.1 of @xcite .",
    "we will show that the set of all points @xmath174 is bounded in @xmath56 where @xmath4 runs over all curves @xmath175 with non - zero multiplicities @xmath165 that satisfy the conditions but have no contracted bounded edge and no string moving to the right as in the picture . by proposition 2.11 of @xcite",
    "there are only finitely many combinatorial types in @xmath176 .",
    "thus , we may restrict ourselves to tropical curves @xmath177 of a fixed combinatorial type @xmath178 .",
    "furthermore , we may assume the curves corresponding to @xmath178 are @xmath179-valent .",
    "let @xmath177 be such a curve and let @xmath169 be the curve obtained from @xmath4 by forgetting the first and the second marked point .",
    "then @xmath169 has a string @xmath180 which follows analogously to remark 3.7 of @xcite .",
    "we claim that using the string , we can deform @xmath169 in a @xmath122-parameter family within its combinatorial type without changing the images of the marked points . to see this , assume first that there is a vertex @xmath107 contained in the string such that the directions of the adjacent edges do not span @xmath46 ( case ( a ) in the picture below )",
    ". then we can change the lengths of the adjacent edges without changing the image inside @xmath46 , in particular without changing the image of any marked point .",
    "next assume that there is no such vertex contained in the string ( case ( b ) ) .",
    "then we can take one of the ends of the string ( which is necessarily non - contracted ) and move it slightly in a non - zero direction modulo its linear span .",
    "consider the next vertex @xmath107 and let @xmath181 be the adjacent edge not contained in the string .",
    "then @xmath181 is non - contracted and our moved end will meet the affine span of @xmath181 at some point @xmath95 .",
    "so we change the length of @xmath181 such that it ends at @xmath95 ( while keeping the position of its second vertex fixed ) .",
    "then we also move the second edge of the string to @xmath95 and go on to the next vertex . continuing like this",
    ", we produce a @xmath122-dimensional deformation of @xmath169 that keeps the images of the marked points fixed .",
    "assume we could deform @xmath169 in a more than @xmath122-dimensional family while keeping the images of the marked points fixed",
    ". then @xmath169 moves in an at least @xmath122-dimensional family with the image point under all evaluations and the forgetful map fixed .",
    "then @xmath182 , which is a contradiction to our assumption .",
    "in particular , we can see that we can not have more than one string .",
    "note that the edges adjacent to @xmath180 must be bounded since otherwise we would have two strings .",
    "now we show that the @xmath122-dimensional deformation of @xmath169 is either bounded itself or does not affect the image under @xmath87 . from this , the statement follows .",
    "first assume that there are bounded edges adjacent to @xmath180 to both sides of @xmath180 as shown in ( i ) .",
    "then the deformation of @xmath169 with the combinatorial type and the conditions fixed are bounded to both sides .",
    "this means that the lengths of all inner edges are bounded except possibly the edges adjacent to @xmath183 and @xmath184 .",
    "this is sufficient to ensure that the image of these curves under @xmath87 is bounded in @xmath56 , too .",
    "now assume that all bounded edges adjacent to @xmath180 are on one side of @xmath180 ( say after picking an orientation of @xmath180 on the left side ) .",
    "denote the direction vectors of the edges of @xmath180 by @xmath185 and the direction vectors of the adjacent bounded edges by @xmath186 .",
    "as above , the movement of @xmath180 to the left with the combinatorial type and the conditions fixed is bounded .",
    "if one of the directions @xmath187 is obtained from @xmath188 by a right turn , then the edges corresponding to @xmath188 and @xmath187 meet to the right of @xmath180 as shown in ( ii ) .",
    "this restricts the movement of @xmath180 to the right with the combinatorial type and the conditions fixed , too , since the edge corresponding to @xmath189 then receives length @xmath84 .",
    "hence , as above , the image of these plane tropical curves under @xmath87 is bounded in @xmath56 as well .",
    "thus , we may assume that for all @xmath53 , @xmath190 the direction @xmath187 is either the same as @xmath188 or obtained from @xmath188 by a left turn as shown in ( iii ) .",
    "the balancing condition then ensures that for all @xmath53 both the directions @xmath189 and @xmath191 lie in the angle between @xmath192 and @xmath193 .",
    "therefore , all directions @xmath192 and @xmath193 lie in the angle between @xmath194 and @xmath195 .",
    "in particular , the string @xmath180 can not have any self - intersections in @xmath74 .",
    "we can therefore pass to the local dual picture where the edges dual to @xmath188 correspond to a concave side of a polygon whose other two edges are dual to @xmath194 and @xmath196 as shown in ( iv ) . but note that both @xmath194 and @xmath196 are outer directions of a plane tropical curve of degree @xmath47 .",
    "thus , @xmath194 and @xmath196 must be @xmath197 , @xmath198 , @xmath199 or @xmath200 .",
    "consequently , their dual edges have direction vectors @xmath201 , @xmath202 , @xmath203 or @xmath204 .",
    "we have to distinguish two cases    * @xmath194 and @xmath196 are @xmath198 and @xmath200 , i.e.  their dual edges have direction vectors @xmath205 and @xmath206 * @xmath194 and @xmath196 are not @xmath198 and @xmath200 .    in case",
    "( b ) the triangles spanned by two of those vectors do not admit any further integer points .",
    "therefore we have @xmath207 and the string consist just of the two unbounded edges corresponding to @xmath194 and @xmath208 that are connected to the rest of the plane tropical curve by exactly one internal edge corresponding to @xmath209 .",
    "it remains to show that for all possibilities for @xmath194 and @xmath208 in case ( b ) the union of the corresponding edges finally becomes disjoint from at least one of the chosen curves @xmath75 and @xmath76 as the length of the edge corresponding to @xmath209 increases .",
    "this can be proved by a case - by - case analysis as shown in the following picture :    in case ( a ) the triangle spanned by the two vectors @xmath197 and @xmath210 admits exactly one further integer point .    in the picture",
    ", we denote the duals of the vectors @xmath211 and @xmath212 by @xmath213 and @xmath214 .",
    "thus , in case ( a ) we may have @xmath215 and the string @xmath180 may consist of the two unbounded edges corresponding to @xmath194 and @xmath216 and the bounded edge corresponding to @xmath208 that is connected to the rest of the plane tropical curve by the two edges corresponding to @xmath209 and @xmath217 . in this case ,",
    "the movement of the string is indeed not bounded to the right .",
    "then we are in case ( [ case - string ] ) of lemma [ lem - contractededge ] .",
    "this finishes the proof of the lemma .",
    "[ lem - multstring ] let @xmath4 be a curve of type ( [ case - string ] ) of lemma [ lem - contractededge ] then @xmath218 where @xmath219 denotes the multiplicity of the evaluation map at the @xmath220 points of @xmath221 that lie on @xmath222 for @xmath223 and @xmath224 denotes the intersection multiplicity of the plane tropical curves @xmath169 and @xmath225 at the point @xmath226 . here ,",
    "@xmath227 and @xmath228 denote the two irreducible components of the part @xmath169 of @xmath4 that we get when cutting off the string @xmath168 as in remark [ rem - string ] .",
    "since @xmath165 equals the absolute value of the determinant of the map @xmath229 in local coordinates , we set up the matrix @xmath101 for @xmath229 as in lemma [ lem - determinante ] and compute its determinant .",
    "the local coordinates are the position of a root vertex and the length of all bounded edges , respectively the coordinates of the images of the contracted edges and the length coordinate of the bounded edge of the image under @xmath87 in @xmath56 . because of remark [ rem - choosecoor ]",
    ", the absolute value of the determinant does not depend on the special choice of such coordinates .",
    "there are exactly two bounded edges that connect the string @xmath168 with the rest of the curve .",
    "we denote these bounded edges by @xmath230 and @xmath231 and the unique bounded edge that is contained in the string by @xmath232 .",
    "their lengths are denoted by @xmath233 , @xmath234 and @xmath167 , respectively .",
    "as the length of the @xmath56-coordinate is very large and there is no contracted bounded edge , the lengths @xmath233 , @xmath167 and @xmath234 must count towards the length of the @xmath56-coordinate .",
    "that is , @xmath59 and @xmath60 have to be on one side of those three edges and @xmath61 and @xmath235 on the other .",
    "let us call the part with @xmath59 and @xmath60 @xmath227 , and assume without restriction that @xmath230 belongs to @xmath227 .",
    "put the root vertex on the @xmath230-side .",
    "then the columns of the matrix @xmath101 corresponding to the lengths @xmath233 and @xmath234 read :    [ cols=\"<,^,^\",options=\"header \" , ]     note that this matrix has a block form .",
    "the block at the top right is a zero block .",
    "we denote the top left block of size @xmath236 by @xmath237 and the bottom right block of size @xmath238 by @xmath239 .",
    "then , the determinant that we are looking for is @xmath240 .",
    "but the matrix @xmath237 is the matrix of evaluation at marked points in @xmath241 and @xmath239 is the matrix of evaluation at marked points in @xmath242 .",
    "thus , we have @xmath243 and @xmath244 .    together",
    ", we have @xmath245 .    we are now ready to prove the main result of this section :    [ kontsevich2 ] let @xmath9 and @xmath10 be non - negative integers with @xmath246 .",
    "then @xmath247 where the first sum goes over all @xmath248 and @xmath249 satisfying @xmath250 @xmath251 , @xmath252 and @xmath253 , and the second sum goes over all @xmath248 and @xmath249 satisfying @xmath254 @xmath255 and @xmath256 .",
    "we use the shortcuts @xmath257 for @xmath258 and @xmath259 for @xmath260    let @xmath4 be a curve passing through @xmath81 , @xmath82 , @xmath85 and mapping to @xmath57 under @xmath87 , i.e.  a curve that contributes to the left hand side of equation [ eqdeg ] because of remark [ rem - generalconditions ] . by lemma [ lem - determinante ] and notation [ def - mult ] , it has to be counted with multiplicity @xmath165 . we will show that @xmath4 can be interpreted as a reducible curve , and that its multiplicity @xmath165 can be split into factors corresponding to the irreducible components .    because of lemma [ lem - contractededge ] we know that @xmath4 either has a contracted bounded edge or a string that can be moved to the right as in remark [ rem - string ] .    if it has a contracted bounded edge , then it is possible that this edge is adjacent to the marked ends @xmath59 and @xmath60",
    ". then the two marked ends are contracted to the same point in @xmath46 , which has to be an intersection point of @xmath81 and @xmath82 .",
    "let us call this point @xmath261 .",
    "let @xmath169 denote the curve that arises after forgetting the marked point @xmath59 .",
    "analogously to 5.5.a ) of @xcite we can show that @xmath262 , where @xmath263 now denotes the evaluation of @xmath60 at a point combined with all other point evaluations and @xmath264 denotes the intersection product of @xmath81 and @xmath82 at @xmath261 .",
    "instead of counting those curves @xmath4 , we can hence count curves @xmath169 meeting the points @xmath85 and an intersection point of @xmath81 and @xmath82 . since @xmath265 by the tropical bzout s theorem ( 4.2 of @xcite ) , we can conclude that those curves @xmath4 contribute @xmath266 to the left hand side of equation [ eqdeg ] .",
    "if @xmath59 and @xmath60 are not adjacent to the contracted bounded edge , then there have to be bounded edges to both sides of the contracted bounded edge , since all other marked points have to meet different points . if there are bounded edges on both sides of the contracted bounded edge , we can cut the bounded edge thus producing a reducible curve with two new contracted ends @xmath267 and @xmath268 .",
    "let us call the two components @xmath227 and @xmath228 . since @xmath4 maps to @xmath57 under @xmath87 , @xmath59 and @xmath60 have to be on @xmath227 .",
    "let us call the degree of @xmath227 @xmath269 and the degree of @xmath228 @xmath270 , then we must have @xmath271 , @xmath251 , @xmath272 and @xmath253 .",
    "analogously to 5.5.b ) of @xcite , we can forget @xmath59 and @xmath60 thus producing a factor of @xmath273 .",
    "( by abuse of notation , we use the @xmath274 here for the point in @xmath46 to which the end @xmath274 is contracted to . ) with the same arguments as in 5.5.b ) of @xcite , we can see that @xmath275 where @xmath276 denotes the multiplicity of the evaluation at the points on @xmath227 .",
    "note that @xmath277 of the other marked points have to be on @xmath227 .",
    "now instead of counting the curves @xmath4 with a contracted bounded edge and bounded edges on both sides , we can pick @xmath277 of the points @xmath278 ( @xmath279 possibilities ) and count curves @xmath227 through those points , and @xmath228 through the remaining points . again by tropical bzout s theorem we have @xmath280 choices to attach @xmath59 and @xmath281 choices to attach @xmath60 , and we have @xmath282 choices to glue @xmath227 and @xmath228 to a possible @xmath4 .",
    "thus those curves contribute @xmath283 where the sum goes over all @xmath271 , @xmath251 , @xmath272 and @xmath253 . in the formula",
    "we want to prove , we can see this contribution negatively on the right hand side .",
    "finally , if @xmath4 has a string as in remark [ rem - string ] , then by lemma [ lem - multstring ] we can conclude that @xmath4 contributes @xmath284 instead of counting such curves @xmath4 , we can pick @xmath277 of the points @xmath278 ( @xmath279 possibilities ) and count curves @xmath227 of degree @xmath269 through those points , and @xmath228 of degree @xmath270 through the remaining points , where now @xmath285 .",
    "there are again @xmath286 possibilities to attach @xmath59 and also @xmath286 possibilities to attach @xmath60 to @xmath227 .",
    "there are @xmath287 choices to pick the edges @xmath230 and @xmath231 to which we can attach the string @xmath168 .",
    "hence those curves contribute @xmath288 where now the sum goes over all @xmath285 , @xmath255 , @xmath289 and @xmath253 . in the formula",
    "we want to prove , this contribution appears negatively on the right hand side .    performing the same analysis for the right hand side of equation [ eqdeg ] and collecting the terms to the different sides",
    ", the statement follows .",
    "the following formula for @xmath2 can be proved analogously .",
    "the proof is easier in fact , since all curves have a contracted bounded edge and the special case of curves having a string that can be moved to the right as in remark [ rem - string ] does not occur here .",
    "we therefore skip the proof . for more details , see @xcite .",
    "[ kontsevich0 ] let @xmath9 and @xmath10 be non - negative integers with @xmath246 .",
    "then @xmath290 where the sum goes over all @xmath248 and @xmath249 satisfying @xmath291 @xmath292 , @xmath293 and @xmath294 .",
    "we use the shortcut @xmath295 for @xmath296",
    "recall the equation from theorem [ thm - main ] we want to prove . note that for @xmath297 we would obtain a summand @xmath298 which is @xmath84 for all @xmath9 , @xmath299 with @xmath246 except for @xmath300 and @xmath301 . as in this special case",
    "the statement still holds , we may add this summand for @xmath297 and deal with the slightly modified equation @xmath302 we will see later that this is useful .",
    "let us consider the formula for small @xmath9 in more detail .",
    "for @xmath300 and @xmath303 we have @xmath304 for all @xmath305 .",
    "hence , in these cases the gromov - witten invariants are enumerative for @xmath21 as well . for @xmath306 and @xmath307",
    "we have @xmath308 while the associated gromov - witten invariant is @xmath309 .",
    "this is the first interesting case .",
    "the formula gives a interpretation of the difference @xmath160 in terms of a deformation of @xmath21 : @xmath310    we need the following combinatorial indentity involving binomial coefficients for our proof .",
    "[ binomgleichung ] let @xmath49 , @xmath311 , @xmath312 .",
    "then @xmath313    the equation is essentially a consequence of vandermonde s identity which states that @xmath314 using this we have @xmath315 and @xmath316 and @xmath317 as @xmath318 and @xmath319 and thus @xmath320 where the last equality follows by pascal s rule .",
    "we will prove that the statement holds for all integers @xmath321 and @xmath322 with @xmath323 by induction on @xmath31 .",
    "note that @xmath10 may be negative .",
    "but as @xmath324 and @xmath325 we have @xmath326 and hence the left hand side is well defined . on the right hand side",
    "we may have negative entries .",
    "we define @xmath327 to be @xmath84 for all @xmath328 , @xmath329 .",
    "in particular , we conclude that the statement holds for all non - negative integers @xmath9 and @xmath10 with @xmath246 .",
    "the induction beginning for @xmath300 and @xmath301 resp .",
    "@xmath303 and @xmath330 is straight forward , we need to use the extra summand with @xmath297 however .",
    "now let @xmath321 and @xmath322 be integers such that @xmath325 .",
    "we can assume that the statement holds for all integers @xmath331 and @xmath332 with @xmath333 .",
    "first let us consider the left hand side .",
    "we know by theorem [ kontsevich0 ] that @xmath334 where the sum goes over all @xmath248 and @xmath249 satisfying @xmath335 , @xmath292 , @xmath293 and @xmath294 , and @xmath295 is defined by equation [ defphi0 ] .    as @xmath336 and @xmath337 for all @xmath338 , @xmath339 , @xmath340 and @xmath341",
    "we have by the induction hypothesis that @xmath342 and @xmath343 .",
    "hence we have @xmath344    let us consider the range of @xmath338 and @xmath340 in the third sum for a fixed @xmath89 and @xmath53 .",
    "as @xmath345 for all @xmath346 and @xmath347 for all @xmath348 ( i.e.  for all @xmath349 ) we can forget about the summands where @xmath346 or @xmath350 . as @xmath351 for all @xmath352 and @xmath353 for all @xmath354",
    "( i.e.  for all @xmath355 ) the range of those @xmath340 which give a contribution is @xmath356 .",
    "we may add summands for @xmath357 and @xmath358 since they are @xmath84 anyway .",
    "hence we may restrict our attention to those @xmath335 with @xmath359 and @xmath360 such that @xmath361 . with the definitions",
    "@xmath362 this is equivalent to considering all pairs @xmath363 with @xmath364 let the sums in the following equation go over those pairs now . then",
    "@xmath365    where @xmath366 by equation ( [ defphi0 ] ) in theorem [ kontsevich0 ] .",
    "let us stop here and consider the right hand side of the equation we want to prove .",
    "we have by theorem [ kontsevich2 ] @xmath367 where the first sum goes over all pairs such that @xmath368 and the second sum goes over all pairs such that @xmath369 .",
    "we use the shortcuts @xmath257 and @xmath259 as defined in equation [ defphi21 ] and [ defphi22 ] .    since for @xmath370",
    "the binomial coefficient @xmath371 is @xmath84 and for @xmath297 there are no @xmath338 and @xmath340 which satisfy @xmath369 we can merge the two sums and get @xmath372 where the sum now goes over all pairs such that @xmath368 .",
    "thus it remains to show that @xmath373    therefore we will show that @xmath374 for all @xmath375 and for all integers @xmath376 , @xmath377 , @xmath378 , @xmath379 with @xmath380 , @xmath381 and @xmath382 .",
    "we use the identity from lemma [ binomgleichung ] .",
    "it is @xmath383 \\end{split}\\ ] ] @xmath384 @xmath385 @xmath386 where the last equality follows from equation ( [ defphi21 ] ) and ( [ defphi22 ] ) .",
    "this completes the proof .",
    "first , we have to introduce another enumerative invariant , namely the numbers @xmath387 and @xmath388 of _ not necessarily irreducible _ plane tropical curves of degree @xmath24 ( resp .",
    "@xmath25 ) and genus @xmath15 through @xmath16 points in general position ( see @xcite )",
    ". obviously , @xmath389 equals @xmath387 minus the number of _ reducible _ curves satisfying the conditions .    by @xcite ,",
    "theorem 2 we can determine the tropical enumerative numbers @xmath387 and @xmath388 both of @xmath2 and @xmath1 by counting @xmath142-increasing lattice paths of length @xmath16 in the polygon corresponding to the toric surface @xmath2 respectively @xmath1 and the divisor class @xmath8 respectively @xmath7 .",
    "( each path has to be counted with a certain multiplicity . for more information ,",
    "see @xcite or @xcite . ) here , we fix @xmath142 to be of the form @xmath390 , where @xmath391 is a small irrational number .            if @xmath300 , then the polygon corresponding to @xmath2 and @xmath396 equals the polygon corresponding to @xmath1 and @xmath396 .",
    "it is just a vertical line of integer length @xmath10 .",
    "hence the number of lattice paths agrees , since the polygon in which we count agrees .",
    "if @xmath303 , then a path with @xmath397 steps has to miss @xmath15 lattice points of the polygons dual to @xmath398 resp .  @xmath399 .",
    "since it can not have any steps of integer length bigger @xmath122 in the boundary , it looks like the paths in the following picture , where @xmath400 .",
    "if @xmath405 , then no path of length @xmath406 fits into the second polygon on the right hand side .",
    "hence that summand is @xmath84 in this case . if @xmath35 then there is exactly one path of length @xmath407 which fits into the second polygon on the right hand side , and it counts with multiplicity @xmath122 :      let @xmath410 be any path in the polygon dual to @xmath411 .",
    "we want to associate a path @xmath412 in the polygon dual to @xmath413 to it . first note that by lemma 3.6 and remark 3.7 of @xcite , each path that does not count @xmath84 has two sort of steps : some that go down vertically and others that move exactly one column to the right ( with a simultaneous move up or down )  see the picture below .",
    "( although stated for a triangle in @xcite , this statement is with the same arguments true the polygons dual to @xmath414 and @xmath415 . )",
    "we define @xmath412 in the following way : @xmath412 has two extra steps in the first column , @xmath412 coincides with @xmath410 in the second column , and it has two steps less in the last column :    more precisely , @xmath416 , @xmath417 , @xmath418 for all @xmath419 such that the @xmath420 -coordinate of @xmath421 is less than or equal to @xmath122 and @xmath422 for all @xmath53 such that the @xmath420-coordinate of @xmath421 is @xmath160 .",
    "note that in the above picture the lattice points which are not images of @xmath410 respectively @xmath412 are drawn white .",
    "it is possible to associate @xmath412 to @xmath410 if @xmath423 is in the @xmath424-column ( recall that @xmath410 has @xmath425 steps ) .",
    "then @xmath426 . this holds if @xmath405 for any path , and if @xmath35 for any path except the one which takes every step in the first two columns and only one in the last column :      it is too much to hope that the multiplicity of @xmath410 and @xmath412 coincides .",
    "let us compute the multiplicity of both paths .",
    "note first that if @xmath410 has a step of lattice length bigger @xmath122 in the @xmath430- or the @xmath424-column , then its multiplicity is @xmath84 ( and the same holds for @xmath412 ) , so we do not need to consider it . let us assume @xmath410 has @xmath431 steps of lattice length @xmath53 in the column @xmath432 , and let @xmath433 .",
    "denote by @xmath434 the number of free lattice points on @xmath430 , by @xmath53 the number of free lattice points above the ones taken by @xmath410 , and by @xmath435 the number of free lattice points on @xmath424 .",
    "let @xmath436 .",
    "then there are @xmath437 free lattice points on @xmath432 below @xmath410 .        to see this , note that no step of lattice length bigger @xmath122 on the column @xmath432 can be part of a parallelogram , since on @xmath430 and @xmath424 , only steps of lattice length @xmath122 are allowed .",
    "thus the binomial factors above count the numbers of ways to arrange parallelograms with edge length @xmath122 ( both above and below @xmath410 ) , and the factor in front corresponds to the double areas of triangles involving the steps of higher lattice length on @xmath432 ( see remark 3.9 of @xcite )",
    ".        as already said , in general @xmath448 will not be equal to @xmath449 .",
    "however , we can take a set of paths @xmath410 in the rectangle such that the sum of the multiplicities coincides with the sum of the multiplicities of the corresponding paths @xmath412 in the dual of @xmath413 : we take all paths @xmath410 such that their values for @xmath431 ( for all @xmath53 ) and @xmath450 coincides .",
    "that is , we let @xmath53 vary from @xmath84 to @xmath451 and @xmath434 vary from @xmath84 to @xmath450 .",
    "we denote the set of all those paths by @xmath452 .",
    "the sum of the multiplicities of all paths @xmath410 in the rectangle in @xmath452 is then equal to @xmath453 the sum of the corresponding paths @xmath412 in @xmath454 is equal to @xmath455 using the mathematica package multisum ( see @xcite , respectively @xcite for more information ) , we can show that the sum in ( [ rhs ] ) ( neglecting the factor @xmath456 which coincides for both expressions anyway )  that we will denote by @xmath457 from now on  fulfills the following recurrence : @xmath458 the sum in ( [ lhs ] )  denoted by @xmath459  satisfies the same recurrence .",
    "as @xmath460 we only need to check the initial values @xmath461 , @xmath462 , @xmath463 and @xmath464 in order to show that the two sums are equal . if @xmath461 , @xmath465 is easy to see . if @xmath462 , then @xmath465 is equivalent to @xmath466 which is true by vandermonde s identity . if @xmath463 , @xmath465 is again easy .",
    "if @xmath464 , both sides can be seen to be equal to @xmath467 using vandermonde s identity .",
    "at last , note that any path in the dual of @xmath413 which is not equal to @xmath412 for some @xmath410 in the rectangle counts with multiplicity @xmath84 , since we can not arrange parallelograms as needed ( see again proposition 3.8 and remark 3.9 of @xcite ) :    to sum up , if @xmath405 then the number of lattice paths in the rectangle is equal to @xmath468 and the right hand side covers all paths in @xmath454 which do not count zero . thus @xmath469 if @xmath35 then the number of lattice paths in the rectangle is equal to        let @xmath300 . since we have to fit paths with @xmath472 steps inside a line of integer length @xmath10 , we get @xmath473 .",
    "hence @xmath38 if and only if @xmath301 .",
    "this is the only case in which we have an irreducible curve . for @xmath300 and @xmath301 ,",
    "the equation trivially holds .",
    "let @xmath303 . since we have to fit @xmath472 steps inside the polygons corresponding to @xmath474 on @xmath1 resp .",
    "@xmath475 on @xmath2 , we have @xmath476 .",
    "again , there is only one case in which we get an irreducible curve , namely @xmath35 . for @xmath35 , there is only one path in both polygons , it counts with multiplicity one on both sides and corresponds to an irreducible curve .",
    "hence also in this case the equation is true .",
    "let @xmath306 .",
    "we know that the equation of lemma [ lem - reducible ] is true , and we want to use it in order to deduce the equation of theorem [ thm - main ] by showing that the number of reducible curves on both sides agrees .",
    "we use induction on @xmath10 . for @xmath307",
    ", we can see easily that there are no reducible curves for both sides , so the equation follows .",
    "now we can assume that the equation is true for any @xmath477 .",
    "since @xmath38 , there are no reducible curves of degree @xmath478 that contribute to the right hand side .",
    "how many reducible curves of degree @xmath413 are there ? a reducible curve @xmath4 could either be equal to @xmath479 , @xmath480 , where each @xmath481 is of degree @xmath482 and @xmath169 is of degree @xmath483 , where @xmath484 , or it could be @xmath485 , @xmath486 , where again each @xmath481 is of degree @xmath482 , @xmath487 is of degree @xmath488 and @xmath489 is of degree @xmath490 , with @xmath491 . in the first case",
    ", we have @xmath492 if @xmath493 is the genus of @xmath169 , so @xmath494 . since @xmath493 is less than or equal to the number of interior points in the polygon dual to @xmath483 , it is less than or equal to @xmath495 .",
    "thus @xmath496 or @xmath497 .",
    "hence from this first case we get a contribution of @xmath498 of reducible curves . in the second case",
    ", we can show analogously that @xmath499 .",
    "but since @xmath487 and @xmath489 are of degree @xmath488 resp .",
    "@xmath490 , we have @xmath500 , hence @xmath501 which is not possible since @xmath38 .",
    "thus by the induction assumption we know that the total contribution of reducible curves on the right hand side equals @xmath502 .",
    "it is easy to see following the same arguments that we have the same contribution on the left hand side .",
    "thus theorem [ thm - main ] follows ."
  ],
  "abstract_text": [
    "<S> there is an equation relating numbers of curves on @xmath0 satisfying incidence conditions and numbers of curves on @xmath1 satisfying incidence conditions . </S>",
    "<S> the purpose of this paper is to give a tropical proof of this equation ( for some cases ) . </S>",
    "<S> we use two tropical methods . </S>",
    "<S> the first method proves the formula for rational curves . </S>",
    "<S> we use induction on the degree and two kontsevich - type formulas for curves on @xmath2 and on @xmath1 . the formula for @xmath1 </S>",
    "<S> was not known before and is proved using tropical geometry . </S>",
    "<S> the second method proves the formula for small degree and any positive genus and uses lattice paths . </S>"
  ]
}