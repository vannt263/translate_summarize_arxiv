{
  "article_text": [
    "when the beam position change takes place during the conventional global orbit correction processes , the photon beam through the beamline is affected , and it results in the alignment of mirrors and monochromators .",
    "this is particularly severe for a long beamline such as the undulator beamlines .",
    "this problem can be overcome by introducing a local bump at the particular beamline .",
    "however , for some light sources , there are not enough corrector magnets to generate local bumps as much as needed .",
    "this difficulty can be overcome when we correct the cod under the condition where the beam positions at particular points are not changed .",
    "this is our main objective to develop a method of the closed orbit correction under constraint conditions .",
    "the beam position is normally described as a vector @xmath0 measured by @xmath1 beam position monitors ( bpm ) . in order to correct the cod ,",
    "we need @xmath2 corrector magnets with their strengths described as a vector @xmath3 .",
    "when the corrector magnets kick a beam , the new beam positions @xmath4 can be described as follows.@xmath5 here , @xmath6 is called the response matrix of @xmath7 dimensions whose components are given by @xmath8 where @xmath9 is the betatron tune of the storage ring , and @xmath10 and @xmath11 are the beta function and the phase function for the @xmath12 bpm and @xmath13 corrector magnet , respectively . in order to reduce the cod , we have to choose the kick of each corrector magnet satisfying @xmath14 it is called the psinom algorithm@xcite .",
    "the cod correction is actually a minimization procedure of @xmath15 defined as @xmath16 by using the relations of vector operators which are hyper - dimensional gradient operators , we can get the same result of psinom algorithm as shown in eq .",
    "( [ coc_eqn_ordinary_cod_relation ] ) .",
    "this algorithm includes an inversion procedure of the matrix @xmath17 . in some cases , we can get unacceptable corrections due to the ill - posedness of @xmath17 . a regularization method is introduced to avoid this problem . in this case , @xmath15 is written as @xmath18 where @xmath19 is the regularization parameter . then the minimum corrector kicks can be determined by @xmath20 this equation represents the modified psinom algorithm , and we can relax the inversion problem of the singular matrix by using the diagonal matrix @xmath21 when @xmath17 is singular@xcite .      after having the new closed orbit with the minimum distortion from eq .",
    "( [ coc_eqn_modified_psinom ] ) , the new orbit is generally different from the original orbit . sometimes , this difference can be taken place at very sensitive locations such as the entrance and the exit of an undulator .",
    "if the beamline is well aligned for this undulator , a cod correction should be avoided in this region .",
    "a constraint condition can be described in terms of the beam position at @xmath22 bpm such as @xmath23    here , @xmath24 is the @xmath22 row of the response matrix @xmath6 .",
    "also , @xmath25 and @xmath26 are the beam positions before and after the correction , respectively .",
    "since we want to keep this position unchanged , @xmath27 should be zero .",
    "if there are @xmath28 bpms involved in the constraint condition , we can write the constraint condition as follows .",
    "@xmath29 here , @xmath30 is the ( @xmath31 ) sub - matrix of the response matrix .",
    "each component of @xmath30 corresponds to the bpm involved in the constraint condition .",
    "we also assume that @xmath3 has a non - trivial solution .",
    "we now add this constraint condition to the modified psinom algorithm to obtain the new @xmath15 such as , @xmath32 \\cr + \\frac{1}{2 } \\left < { \\rm\\bf k } \\right| \\alpha \\left| { \\rm\\bf k } \\right > + \\left",
    "< { \\rm\\bf \\gamma } \\right| { \\rm\\bf c}^t \\left| { \\rm\\bf k } \\right > .",
    "\\end{aligned}\\ ] ] here , @xmath33 is the lagrangian multiplier , and it is an @xmath28 dimensional vector . by following the derivative to the corrector strength , we can get the vector @xmath3 which minimizes the closed orbit distortion outside the constraint region such as , @xmath34 here , we define the square matrices of @xmath35 dimensional @xmath36 and @xmath37 dimensional @xmath38 as follows .",
    "@xmath39 eq .",
    "( [ coc_eqn_new_correction ] ) can be rewritten as @xmath40 now , we can remove the lagrangian multiplier @xmath41 in eq .",
    "( [ coc_eqn_new_correction ] ) by using the above equation .",
    "then , we can finally get the kick values of the corrector magnets as follows .",
    "the algorithm developed in the previous section has been successfully tested for the pohang light source ( pls ) operation .",
    "the new correction code is written in c language and it is installed in one of the operator consoles which is a sun workstation . although the pls control system is not using experimental physics and industrial control system ( epics ) which is used in many accelerator laboratories world - widely , there is a plan to upgrade the control system based on epics technology@xcite . as a part of such upgrade activity",
    ", we have started the development orbit correction algorithm with epics .",
    "since we do not have any epics - based control system yet , we decide to develop the orbit correction simulator using epics .    in order to seek the way to adopt our orbit correction algorithm into epics , we have considered two ways : one is based on the subroutine record and the other is using the state notation language ( snl ) program .",
    "the first method needs new record support that runs the orbit correction algorithm . to do this",
    ", the correction code is required to be written upon the protocol required by the record support such as the entry structure and the callback structure .",
    "this approach gives relatively fast response because this method uses database access and can access the record by process passive mode@xcite .",
    "this is a good feature for the realtime system but the large portion of the orbit correction code we have already tested must be rewritten according to the protocol of the record support .",
    "one of important tasks of epics input / output controller ( ioc ) is the sequencer that runs programs written in snl .",
    "the snl considers the control object as the state machine and treats transitions between states .",
    "the sequencer monitors the transitions for the snl and runs callback functions using the entry table the corresponding program written in snl .",
    "since the sequencer accesses to the record via channel access ( ca ) and the record access is only possible through non - process passive mode , there are some restrictions in access time or the treatment of records .",
    "however , this method can directly imbed the program written in c language . also ,",
    "unlike the subroutine record , this method can remove program tasks without rebooting the system , which gives the code debugging very easy@xcite .",
    "thus , the second method gives more benefits when the system does not require heavy realtime demands . upon reviewing the two methods , we have decided to use the latter method .",
    "the orbit correction simulator is developed in ioc level and has the snl program imbedding c codes and several database records , as shown in fig .",
    "[ fig_schemetic ] .",
    "there are two parts in the snl program : one for the feedback including the orbit correction algorithm and the other for the simulator which emulates the pls storage ring .",
    "the latter calculates orbit changes from _ ai : kick$(kick_no ) _ records which store the corrector strengths obtained from the response matrix measured at the pls .",
    "this process is actually a product of matrix and column vectors .",
    "the calculated orbit changes are stored at _ ai : corrorbit$(bpm_no ) _ records . in the next step ,",
    "the corrector strengths s calculated by the algorithm described in the previous section and the results are stored at _ al : kick$(kick_no)_.      the snl program we have developed consists of four state sets . since they are linked together and interacted dynamically via epics database , we need to understand the database and its records as well as the linkage between them . the _ ai : kick$(kick_no ) _ record uses the analog input record to represent the corrector strength . there are 70 records altogether as representing 70 correctors in the pls storage ring .",
    "they are linking the simulator and the feedback in a parallel manner .",
    "the index _ $ ( kick_no ) _ is the integer value between one and 70 .    the records of _ ai : orgorbit$(bpm_no ) _ and _ ai : corrorbit$(bpm_no )",
    "_ are the orbit distortion before the feedback is applied and the orbit change after the feedback , respectively .",
    "they are using analog input records . since these records represents the changes at the pls bpm , _ $ ( bpm_no ) _ is the interger value between one and 108 .",
    "the superposition of these two records gives new orbit .",
    "this can be done by the calculation record _ calc : orbit$(bpm_no)_. since this calculation record is linked forwardly from _ ai : orgorbit$(bpm_no ) _ and _ ai : corrorbit$(bpm_no ) _ , the superposition",
    "is newly calculated whenever the values of two records are changed .",
    "on the other hand , _ ai : numbpm _ , _ ai : numcorrector _ , _ ai : startconstr _ , and _ ai : endconstr _ are representing the bpms and correctors used in the correction algorithm , start and end point of the constraint region , respectively .",
    "they are using analog input records and notifying the snl program if necessary .",
    "the other records are binary input records and they are representing necessary status flags .",
    "they are used as the mediator of state transitions between state sets in the snl program .",
    "we have developed the cod correction algorithm under the constraint condition where the beam position at particular point is not changed .",
    "the new algorithm is based on the modified psinom algorithm which includes the regularization process in order to avoid the inversion problem of the ill - posed response matrices .",
    "we have confirmed that this algorithm is working well and is in good agreement with the experimental results @xcite . even though the pls is planning to upgrade their control system with epics ,",
    "there is no working epics based control system at pls . due to this , we have developed the orbit correction simulator using c - code embedded snl program based on epics technology .",
    "this simulator part can be replaced by the real control system with minor changes after the completion of the upgrade .",
    "1 w. herr :  \" algorithms and procedures used in the orbit correction package cocu ,  \" cern sl/95 - 07 ( ap ) , 1995 . y. n. tang and s. krinsky : proc",
    ". aip conf .",
    "* 315 * ( aip press , 1993 ) 87 .",
    "see url\"_http://www.aps.anl.gov / epics _  \" martin r. kraimer :  \" epics ioc application developer s guide ,  \" aps / anl , 1998 andy kozubal :  \" state notation language and sequencer user guide ,  \" lanl , 1995 philip stanley , _ et al . _ :  \" epics record reference manual ,  \" lanl , aps / anl , 1995 kukhee kim , jinhyuk choi , tae - yeon lee , guinyun kim , moohyun cho , won namkung , in soo ko : jpn . j. appl",
    "* 40 * ( 2001 ) 4233 ."
  ],
  "abstract_text": [
    "<S> we have carried out the basic research for the accelerator and tokamak control system based on the experimental physics and industrial control system ( epics ) . </S>",
    "<S> we have used the process database and the state notation language ( snl ) in the epics to develop the simulator which represents as a virtual machine . in this paper . in this paper </S>",
    "<S> , we introduce the simulator of the global orbit feedback system as an example . </S>",
    "<S> this simulates the global orbit feedback system under the constraint conditions for pohang light source ( pls ) storage ring . </S>",
    "<S> we describe the details of the feedback algorithm and the realization of the simulator . </S>"
  ]
}