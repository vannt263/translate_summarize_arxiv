{
  "article_text": [
    "smart grid provides a suitable platform to accommodate renewable energy sources ( ress ) that can provide users with clean energy and thus alleviate users dependence on conventional power plants  @xcite .",
    "therefore , the consumers can enjoy green energy for their day to day usage as well as considerably curtailing their energy costs by reducing their reliance on expensive electricity from the main grid  @xcite .    as a consequence ,",
    "a large number of studies have been conducted on how to accommodate ress in smart grid through different energy management scheme .",
    "these studes can be divided into two general categories .",
    "the first category discusses the management aspect via predicting the generation from ress  @xcite ; and controlling the electricity generation and consumption by demand response management in microgrids through decentralized , distributed and hierarchical control mechanisms  @xcite .",
    "further , a number of study has explored various energy scheduling schemes for ress by studying operational management and planning of smart buildings  @xcite , optimization of integrated pv solar houses  @xcite , and efficient building management via distributed predictive control  @xcite .",
    "the second category of studies , on the other hand , focuses on energy management techniques for residential smart grid .",
    "for instance , in @xcite , a dynamic energy management framework is used to simulate automated residential demand response based on energy consumption models .",
    "the models estimate the residential demand that quantifies consumer energy usage behavior and provide an accurate estimation of the controllable resources . a system - wide demand response management model to coordinate demand response provided by residential customers",
    "is presented in @xcite to flatten the total load profile for minimizing the individual cost to the customers , .",
    "the authors in @xcite propose an opportunistic scheduling scheme based on the optimal stopping rule as a real - time distributed scheduling algorithm for smart appliances automation control .",
    "the aim is to balance electricity bill reduction and inconvenience resulting from the operation delay .",
    "a two level differential game approach is used to implement a demand response scheme for residential users in @xcite .",
    "other energy management schemes for residential smart grid can also be found in @xcite and @xcite .",
    "as can be seen from the above discussion , there has been moderate focus on how to increase the use of ress for residential smart grid to exclusively use the energy for meeting the entire demand of an entity .",
    "further , most existing techniques on residential energy management have assumed scenarios that involve only two parties : the grid and users with ress , in which the users decide on either how to schedule their household activities or how to charge and/or discharge their batteries with a view to reduce the respective cost of ( or , maximise the benefit of ) using electricity from ress and the grid .",
    "nevertheless , it may also be possible that an entity with ress may want to exclusively rely on its generated energy for meeting its demand  @xcite and participate in energy trading with multiple heterogeneous energy entities if there is any surplus .",
    "this is particularly true for big cities ( e.g. , singapore , new york , shanghai ) , in which the land is very limited and the population density is very high .",
    "hence , most of the residential accommodations are high rise buildings where it is hard for each unit to install ress . so the ress such as solar pvs can only be shared and installed on the building rooftop or car park , and generally these areas are not owned by individuals but rather are controlled by the shared facility controller ( sfc ) as shown in fig .  [",
    "fig : sfcsolar ] .",
    "therefore , unlike the traditional users and grid scenario , such system now involves three parties including the sfc , users and the grid , which has not yet received considerable attention in the literature .      in this context , this paper proposes a hierarchical renewable energy management scheme that aids the decision making process of an sfc on its energy trading process with multiple energy entities in smart grid .",
    "in particular , we study how an sfc can rely exclusively on its generated energy for meeting its own demand ( if possible ) and then participate in trading with other entities if there is any surplus .",
    "now , due to random changes in energy demand by the users and because the sfc may also want to store some of its generated energy in its energy storage devices ( esds ) for future use , the sfc needs to decide on 1 )  how much surplus energy needs to charge the esd ; 2 )  how much surplus energy needs to sell to the households and 3 ) how much surplus energy needs to sell to the grid such that its can reduce its operational cost of running the shared facilities at any given time .    in this regard",
    ", we prioritize the demand of the sfc and allow the sfc to fulfil its demand through its own generation .",
    "this is mainly because the sfc owns the solar pvs , as we will see later , and also has its own energy demand for maintaining the shared facilities .",
    "hence , it is reasonable to assume that the sfc will first fulfil its own demand and then use its surplus energy , if there is any , for trading with other energy entities within the system . to leverage the energy management",
    ", we introduce the idea of a virtual cost ( vc ) , which is essentially the estimate of a future cost to the sfc based on some information available at current and previous time slots .",
    "we use the vc to determine the amount of energy that the sfc can charge to or discharge from its esd and then use this information to determine how much amount of energy the sfc can trade with the households and the grid in each considered time slot .",
    "please note that the vc , as we will see in detail in section  [ sec : virtual_cost ] , is important in determining the cost to the sfc .",
    "this is due to the fact that a very high vc can let the sfc to store a very large amount of energy in its storage for using in the future , which could be inefficient if the demand is not very high in the future time slot . on the other hand ,",
    "a very low vc can make the sfc to decide on an amount of energy that could be insignificant compared to the actual requirement in the future .",
    "therefore , the decision on vc needs to be adaptive over time and should possess a realistic value that is comparable to the actual cost incurred to the sfc .",
    "we categorise the management problem into three cases based on intermittent solar generation , unpredictable sfc s demand and household demand , and obtain the optimal solution for each of the three cases using the theory of maxima and minima . furthermore , to coordinate the energy management in real - time , we propose an algorithm that can determine the optimal amount of energy to charge or discharge the esd of the sfc , so as to attain the optimal operational cost under given system constraints of each case .     [",
    "fig : table ]      to this end , the main differences between the existing schemes and the proposed work can be summarized as follows :    * in most energy management studies , the exchange or trading of electricity is designed between two entities , in contrast , we have designed the energy management scheme for the sfc in such a way that it can trade its excess energy , if there is any , with multiple other energy entities within the system . in particular , the proposed scheme involves three parties including the sfc , users and the grid , which has not yet received considerable attention in managing renewable energy .",
    "furthermore , we consider an additional storage device that also forms part of the sfc s decision making variable . * in @xcite ,",
    "a three - party energy model was proposed using a system model that contains the similar components to the proposed study . however , the contents of this paper are substantially different from @xcite as shown in table  [ fig : table ] .",
    "furthermore , this study mainly focus on the interest of the sfc in the smart community whereas in @xcite the authors studied the usefulness of distributed energy resources , which belong to the households , in smart grid . * in terms of reducing the cost of energy trading , most of the existing studies focus on the price per unit of energy at different times of the day .",
    "that is , the owner of renewable energy sources sells its energy ( either from the sources or from the battery ) to others when the price is high and buys energy ( or stores it ) when the price is lower . on the contrary ,",
    "we focus on promoting the use of renewable energy as much as possible for the sfc and then plan the trading of energy in such a way that the operational cost to the sfc is minimized . to do so , we propose a novel idea of vc , which is a combination of predicted price and predicted demand , to perform energy management .",
    "the remainder of the paper is organised as follows .",
    "we discuss the considered system model and problem formulation in section  [ sec : section-2 ] .",
    "the proposed energy management scheme and the algorithm to reach the optimal solution are studied in section  [ sec : section-3 ] .",
    "we analyse the properties of the scheme through numerical case studies in section  [ sec : section-4 ] , and finally some concluding remarks are drawn in section  [ sec : conclusion ] .",
    "as in fig .  [",
    "fig : systemmodel ] , let us consider a smart community consisting of an sfc , a large number of households and the grid .",
    "the sfc is equipped with @xmath0 solar pv panels and an esd with capacity @xmath1 .",
    "the area and efficiency of each solar pv panel are assumed to be @xmath2 square meter ( @xmath3 ) and @xmath4 respectively .",
    "now , if the solar irradiance is @xmath5 w / m@xmath6 at any particular time @xmath7 , where @xmath8 is the total considered time duration , the generated power @xmath9 from the sfc s solar pv is that the proposed management technique is capable to capture any further variation in the solar power generation due to change in other parameters such as temperature as well . ]",
    "@xcite @xmath10 at time slot @xmath11 , let us assume that the energy required by the sfc is @xmath12 for the maintenance of different shared facilities of the community and the sfc uses @xmath9 to meet this requirement .",
    "however if @xmath13 , the sfc may sell the excess energy @xmath14 either to the households of the community or to the grid so as to make some extra revenue .",
    "alternatively , the sfc may choose to store this surplus in its esd for use at a later time .",
    "nonetheless if @xmath15 , the sfc either buys the deficient amount of energy @xmath16 from the grid or either partially , or completely , discharges its esd to compensate for this deficiency .",
    "we assume that an associated cost is always incurred by the sfc whenever the sfc trades energy with the grid and households , and charges or discharges its esd .",
    "please note that here we use two different variables @xmath17 and @xmath18 to refer to the discharging energy from and charging energy to the esd respectively .",
    "these two variables are mainly used to facilitate the decision making process of the sfc on its energy management based on different proposed cases as we will see shortly in section  [ sec : section-3 ] .      at any time @xmath11 , the total cost @xmath19 to the sfc",
    "is assumed to consist of the following four elements :    1 .",
    "cost @xmath20 of buying energy : it is assumed that the sfc buys its deficient energy , if there is any , only from the grid .",
    "hence , the cost @xmath20 to the sfc can be expressed as @xmath21 where @xmath22 is the amount of energy that the sfc buys from the grid and @xmath23 is the price per unit of @xmath22 .",
    "it is assumed that the sfc can also discharge @xmath17 amount of energy from its esd , if it requires , which may affect the amount of energy it buys from the grid , and the associated costs .",
    "hence , can be defined as @xmath24^{+ } ) , \\label{eqn : cost - buy-2}\\end{aligned}\\ ] ] where @xmath25^+ = \\max\\left(0,*\\right)$ ] .",
    "revenue @xmath26 from selling energy : the revenue of the sfc from selling its surplus energy , if there is any , stems from the revenue @xmath27 from selling energy @xmath28 to the household users , and the revenue @xmath29 from selling @xmath30 to the grid .",
    "therefore , the revenue of the sfc from selling its excess generated energy can be expressed as @xmath31 here , @xmath32 and @xmath33 are the selling price per unit energy to the users and the grid respectively , and the negative sign implies revenue ( instead of cost ) for the sfc .",
    "now , to design the revenue @xmath26 , two factors are considered : * the price per unit of energy sold to the users is considerably higher than the selling price to the grid  @xcite .",
    "therefore , it is reasonable to assume that the sfc would want to sell the surplus to the households first , and then , if there is any left over , sell to the grid .",
    "* the sfc charges its esd with @xmath18 from the _ excess solar _ energy , if there is any .",
    "+ incorporating these two factors , @xmath34 and @xmath29 in are further defined as @xmath35^+ , e_u^\\text{req}(t ) ) , \\label{eqn : rev - sell-2}\\end{aligned}\\ ] ] where @xmath36 is the energy required by the household users at @xmath11 , and @xmath37^+ \\label{eqn : rev - sell-3}\\end{aligned}\\ ] ] respectively .",
    "from , we note that the sfc only sells energy back to the grid when it has enough surplus after meeting its own requirement and the requirements of the household users .",
    "3 .   cost @xmath38 of charging and discharging of esd : to limit the number of charging and discharging cycles of the esd , we consider a cost associated with every charging and discharging of the sfc s esd  @xcite , which is assumed to be @xmath39 where @xmath40 is the characteristic constant of the esd , which , for example , can be a function of new esd cost , depth of discharge , and total number of charging and discharging cycles  @xcite .",
    "[ table : toyexample ]      to account for the impact of sfc s current energy decision on the future cost , we introduce a vc @xmath41 , which is an estimate of the cost to the sfc at @xmath42 in the current time slot @xmath11 .",
    "essentially , dsthe idea of vc is beneficial in assisting the sfc to take the decision on both charging energy to / discharging energy from the storage and on trading with other entities in each time slot of the operation .",
    "this can easily be shown by a toy example as follows .",
    "let us consider a smart community in which an sfc is equipped with solar pv that generates @xmath43 and @xmath44 kwh of electricity in time slot @xmath45 and @xmath46 respectively , whereby the requirements of the sfc are respectively @xmath47 and @xmath43 kwh for the considered two time slots .",
    "the selling price per unit of energy to the grid and households are assumed to be @xmath48 and @xmath49 cents / kwh respectively whereas the buying price from the grid is @xmath50 cents / kwh  @xcite . for this example",
    ", we consider the total cost to the sfc for three techniques : 1 ) an fit scheme @xcite where the sfc does not have any capacity to estimate the future cost and sells its excess energy only to the grid ; 2 ) a modified scheme in which the sfc does not have any capacity to estimate the future cost and sells its excess energy to both the grid and the households ( such as in @xcite ) ; and 3 ) a scheme such as the scheme proposed in this paper where the sfc can estimate a relative cost of the next time slot , storing / dispatching energy from its storage accordingly , and can sell the excess energy to both the households and the grid .",
    "for all schemes , it is considered that the sfc can buy energy only from the grid .",
    "now , the associated total costs to the sfc for all three schemes are shown in table  [ table : toyexample ] .",
    "please note that the vc is only considered for time slot @xmath45 as the example assumes only two time slots of energy management . as can be seen for table  [ table : toyexample ] , the proposed scheme has the capability to reduce the total cost to the sfc by @xmath51 and @xmath52 compared to the fit and the modified scheme respectively , and thus demonstrates the potential of the proposed scheme in managing renewable energy for the sfc .",
    "we stress that the estimation of future information based on historic values has been widely discussed in the literature . for example , markov models @xcite and kalman filtering @xcite have been used extensively for estimating future states based on the historical data of electrical system .",
    "the weighted least square estimator is commonly used in today s power systems , which are sensed primarily via scada measurements @xcite . in @xcite ,",
    "the authors exploits the principles of one - dimensional and two - dimensional compressive sensing to develop approaches for voltage estimation in distribution grids with renewable energy based generators .",
    "other techniques related to estimation of states in dynamical systems can also be found in @xcite .",
    "however , in contrast to these techniques , we adopt a simple technique to determine the virtual cost , which is suitable for the considered system model . in particular",
    ", the proposed virtual cost model depends only on the information available at the current and previous time slots and therefore does not require memory to store a large amount of historical data .",
    "thus , the virtual cost is computationally less expensive than existing techniques , and simulation results validate its effectiveness , as will be shown in section  [ sec : section-4 ] .    to this end , the proposed @xmath41 accounts for the impact of the state - of - charge ( soc ) of the sfc s esd on its future cost .",
    "for instance , if the soc of the esd is small at the end of optimization at time slot @xmath11 , the cost to the sfc could be estimated to be larger at @xmath42 as the amount of energy @xmath53 that could be discharged from the esd would be small .",
    "hence , the sfc may be required to buy more energy from the grid if the generation of solar energy @xmath54 is not enough to meet its requirement @xmath55 . in this context , we assume that @xmath41 is a decreasing function of the soc @xmath56 at the end of time slot @xmath11 .",
    "mathematically , @xmath57 here , @xmath58 is the efficiency of the sfc s esd and @xmath59 is a coefficient , which is adaptive across time slots .",
    "the motivation for using an adaptive @xmath60 is to better capture the non - linear effect of current energy flow on the virtual cost .",
    "for example , if the sfc is buying more energy from the grid in the current time slot , it may need to buy more energy in the next time slot too , due to the time coherence in energy consumption",
    ". hence the updating function of @xmath60 is proposed to follow the relation @xmath61 where @xmath62 is a scalar step parameter .",
    "it is important to note that the value @xmath60 is updated based on the amount of @xmath63 that the sfc buys from the grid .",
    "the initial value @xmath64 of @xmath60 is considered to be a design parameter , which depends on various system parameters such as community size .",
    "hence , if the size of the community is larger and/or number of solar pvs installed in the sfc is smaller , the sfc will need to buy more energy from the grid , which will consequently increase the value of @xmath64 and the vc .",
    "therefore , the choice of @xmath64 is significantly affected by the type and size of the community and the capacity of the installed solar pvs . furthermore",
    ", if the value of @xmath65 becomes higher , the value of @xmath60 and , consequently , the value of @xmath41 increases for purchasing a similar amount of energy from the grid . to this end",
    ", @xmath65 can be referred to as the sensitivity of sfc s cost to the energy that it purchases from the grid . as we will see",
    "shortly , the considered energy management scheme considerably depends on the proposed vc model .      combining all the relevant costs from , , and",
    ", the cost function of the sfc can be defined as @xmath66 for each @xmath67 .",
    "it is important to note that one of the objectives of this work is to maximize the use of generated solar energy in order to minimize the cost to the sfc .",
    "therefore , the problem is formulated such that the sfc only buys energy from the grid when the generated solar @xmath9 is not large enough to meet its requirement @xmath12 .",
    "also , the sfc only sells its energy when @xmath13 .",
    "furthermore , it can be seen from , , , and that all the related costs to the sfc can be expressed in terms of its charging and discharging amount of energy @xmath17 and @xmath18 respectively .",
    "to that end , the objective of the sfc can be expressed in terms of minimizing @xmath19 by choosing a suitable either @xmath17 or @xmath18 in each time slot @xmath11 , which can be defined mathematically as @xmath68 , \\label{eqn : cost - function-2}\\end{aligned}\\ ] ] for @xmath67 .",
    "now , to solve the problem in real time , we propose an energy management scheme in the next section .",
    "the energy management process of the sfc at any time slot @xmath11 always falls within one of the following three categories based on intermittent solar generation and random demand of the sfc and the household users :    1 .",
    "case 1 : @xmath69 .",
    "the sfc does not sell any energy .",
    "the sfc may buy electricity from the grid and/or discharge its esd .",
    "2 .   case 2 : @xmath70 .",
    "the sfc does not buy any electricity from the grid and may charge its esd .",
    "the sfc may sell electricity to the household users but not to the grid .",
    "3 .   case 3 : @xmath71 .",
    "the sfc does not buy any electricity and may charge its esd .",
    "the sfc may sell electricity to the household users and the grid .",
    "now , what follows is a detailed analysis of the optimal cost to the sfc , in each of the three cases , through the derivation of the energy amount that the sfc needs to either charge or discharge to reach the optimal cost .      in this case , the sfc neither sells any electricity nor charges its esd .",
    "therefore , @xmath72 .",
    "so , the cost function @xmath73 for case @xmath45 reduces to the form ,  where @xmath74 , will be indicated as @xmath75 . ]",
    "@xmath76 where the objective of the sfc is @xmath77 now , @xmath73 attains its minimum value^3}>0.$ ] ] for the choice of @xmath17 when @xmath78 , and thus @xmath79 .",
    "\\label{eqn : optimal - energy - case-1}\\end{aligned}\\ ] ] thus , the optimal cost to the sfc for case @xmath45 is obtained by when @xmath17 is as given in .      in case @xmath46 ,",
    "the sfc neither buys any electricity from nor sells any electricity to the grid .",
    "therefore , @xmath80 and @xmath81 .",
    "also , the esd does not discharge , i.e. , @xmath82 .",
    "hence , the cost function and the objective of the sfc can be expressed as @xmath83 and @xmath84 respectively .",
    "now , the choice of @xmath18 for which @xmath85 attains the minimum value satisfies @xmath86 .",
    "hence , the optimal choice of @xmath18 for case @xmath46 is @xmath87 .",
    "\\label{eqn : optimal - energy - case-2}\\end{aligned}\\ ] ]      in this case , the sfc sells electricity to the grid after meeting its own demand and those of the households .",
    "however , it does not buy any electricity from the grid , i.e. , @xmath80 . to this end , the cost to the sfc for case @xmath88 can be expressed as @xmath89 the first term of refers to the total revenue that the sfc attains from selling the required energy to the households .",
    "now , similar to the previous two cases in section [ subsection:3.1 ] and section [ subsection:3.2 ] , the optimal choice of @xmath18 in order to minimize the sfc s cost @xmath90 can be obtained as @xmath91 .",
    "\\label{eqn : optimal - energy - case-3}\\end{aligned}\\ ] ]      now , while the sfc minimizes its cost by suitably choosing @xmath17 or @xmath18 according to , or , the sfc needs to maintain a number of constraints for suitable implementation of the approach in a practical environment .",
    "some of these constraints are based on the cases proposed in this paper . in the following ,",
    "we briefly explain the constraints that are assumed to be satisfied by the sfc during management of its energy .    1",
    ".   equality constraint on energy trading : at time slot @xmath11 , the total supply of energy to the sfc should be equal to the total energy spent by the sfc in the considered time slot .",
    "that is @xmath92 2 .",
    "constraint on the soc : the soc @xmath56 of the sfc s esd at time slot @xmath11 is a function of the charging and discharging energy amount , i.e. , @xmath18 and @xmath17 respectively , at @xmath11 and the soc @xmath93 from the previous time slot .",
    "this relationship can be expressed as @xmath94 where @xmath58 is the esd efficiency .",
    "also , the soc of the eds at any time slot @xmath11 can not be larger than its capacity @xmath95 ( i.e. , @xmath96 soc ) or lower than a certain minimum amount @xmath97 in order to prolong the life - time of the esd .",
    "therefore , @xmath98 3 .",
    "constraint on esd s charging and discharging : the sfc can not charge and discharge its esd simultaneously in any time slot @xmath11 .",
    "that is @xmath99 and @xmath100 the charging and discharging rate of the esd can not be greater than the esd s rated charging / discharging capacity @xmath101 .",
    "also , an sfc can not charge its battery more than the available space in its esd .",
    "similarly , the sfc can not discharge its esd more than the available soc .",
    "therefore , @xmath102 and @xmath103 4 .",
    "constraint on grid energy : the sfc does not buy energy from and sell energy to the grid at the same time slot .",
    "that is @xmath104 and @xmath105 5 .",
    "constraint on @xmath106 : the choice of @xmath106 may affect the optimal choice of @xmath17 and @xmath18 of the sfc through , and . now to decide how to choose a suitable value of @xmath106 , we first note from that the sfc will discharge its esd in case @xmath45 if @xmath107 and , the charging of the esd in case @xmath46 and case @xmath88 takes place if @xmath108 and @xmath109 respectively . since @xmath110 , it is clear that if is true the condition in is also true .",
    "now , the conditions on @xmath106 in and are satisfied if @xmath106 is set such that @xmath111 in this context , to satisfy the condition in at each @xmath67 , the value of @xmath106 needs to be chosen such that @xmath112      * initialization * : @xmath22 and @xmath60 for @xmath113 .",
    "the grid announces @xmath114 . *",
    "the sfc * : sets @xmath115 .",
    "sets @xmath32 . determines the soc @xmath56 . calculates the pv generation @xmath9 .",
    "calculates its requirement @xmath12",
    ". receives users total energy requirement @xmath36 .",
    "calculates @xmath116 . set @xmath117 . calculates @xmath17 following .",
    "sets @xmath118 .",
    "sets @xmath82 . calculates @xmath73 using .",
    "sets @xmath119 . calculates @xmath18 from .",
    "sets @xmath120 .",
    "sets @xmath121 . calculates @xmath85 using .",
    "sets @xmath122 . calculates @xmath18 from .",
    "sets @xmath120 .",
    "sets @xmath121 . calculates @xmath90 using .",
    "sets @xmath123 . determines @xmath56 using .",
    "determines @xmath22 through .    after determining the optimal cost to the sfc for the proposed three cases , and defining the related constraints",
    ", we now introduce an algorithm , which can be adapted by the sfc to reach the optimal solution in real time .",
    "the algorithm is initiated in each time slot @xmath11 through the announcement of @xmath23 and @xmath124 by the grid , and the setting up of @xmath125 by the sfc such that is satisfied . in each time slot @xmath11",
    ", the sfc gets information on its generated energy @xmath9 , determines its requirement @xmath12 , and receives the energy request @xmath36 from the household users .",
    "based on the available information , the sfc determines the category of the energy management scheme .",
    "then , according to the type of category , i.e. , case @xmath45 , @xmath46 or @xmath88 , and the associated constraints in section  [ subsection:3.4 ] , the sfc obtains the optimal charging and discharging amount according to the discussion in section  [ subsection:3.1 ] , [ subsection:3.2 ] and [ subsection:3.3 ] .",
    "subsequently , the optimal costs for all three cases are determined .",
    "the detail of the proposed algorithm is shown in algorithm  [ algorithm:1 ] in a step - by - step fashion .",
    "it is important to note that in each iteration only one of the three cases is executed in the algorithm .",
    "further , the decision making on the cost of the sfc in each case is based on the expressions that have been derived in , ( case-1 ) , , ( case-2 ) , and , ( case-3 ) respectively for the three cases .",
    "hence , the implementation of the algorithm is simple and can be executed with minimal computational complexity .",
    "note that all possible scenarios of the considered energy management scheme are captured through the three cases proposed in section  [ subsection:3.1 ] , [ subsection:3.2 ] and [ subsection:3.3 ] , and the optimal cost to the sfc in each of the considered cases is determined through algorithm  [ algorithm:1 ] . to determine the feasible optimal solution , algorithm [ algorithm:1 ] is leveraged via the proposed concept of vc , and is executed according to the derived expressions in section  [ subsection:3.1 ] , [ subsection:3.2 ] and [ subsection:3.3 ] where the constraints of section [ subsection:3.4 ] are also maintained . hence , algorithm  [ algorithm:1 ] always reaches the optimal solution of the proposed energy management scheme .",
    "it is important to note that the proposed optimization problem can be solved by following algorithm 1 due to the obtained expressions in , ( case-1 ) , , ( case-2 ) , and , ( case-3 ) .",
    "nonetheless , other optimization techniques such as particle swarm optimization and simulated annealing may also be suitable to solve the proposed problem .",
    "in this section , we provide some numerical simulation results to show the beneficial properties of the proposed scheme . we demonstrate how the proposed scheme can help the sfc to reduce its average cost over a considered period of time , e.g. , a day .",
    "we consider that the sfc owns a solar array , e.g. , on the rooftop of the community buildings , consisting of @xmath126 solar panels and has an esd of capacity @xmath127 kwh .",
    "each solar panel has a dimension of @xmath128 m@xmath6  @xcite and an efficiency of @xmath129  @xcite .",
    "total time duration is considered to be from @xmath130 am to @xmath131 pm , which consists of @xmath132 time slots and each time slot is assumed to have a duration of @xmath133 minutes  @xcite .",
    "the value of solar irradiance at each time slot is taken from the set of solar data ( measured at the campus of australian national university , canberra , australia ) , which is averaged over a month of data for the considered time slots .",
    "the grid s real time sell price @xmath134 per unit of electricity is considered from @xcite , and the sell price @xmath32 of the sfc and the buy price @xmath33 of the grid are assumed to be @xmath135 and @xmath136 times @xmath23 respectively and @xmath33 are chosen such that the condition @xmath137 is always maintained throughout the energy management scheme  @xcite . ] .",
    "the requirement of the sfc is calculated based on the demand of community lifts at different time of the day . in particular , we choose the number of trips of the community lifts randomly between @xmath138 $ ] times during the peak hours , i , e . , @xmath139 am to @xmath140 am and @xmath141 pm to @xmath131 pm , and between @xmath142 $ ] times for the rest of the time .",
    "the energy consumption of the lifts for each trip is assumed to be @xmath143 kilo - watt hour ( kwh )  @xcite .",
    "total demand of the households at different time of the day is considered randomly from the range @xmath144 $ ] kwh  @xcite . unless stated otherwise , the values of @xmath106 and @xmath64 are assumed to be @xmath145 and @xmath146 respectively .",
    "it is important to note that all parameter values are particular to this study and may vary for different cases based on circumstances such as weather conditions , number of households in a community , electricity price , time of day and the nation ( or state ) where it is located .              to this end",
    ", we first show how the proposed scheme can react to environmental change in the system and execute the energy management scheme for different cases .",
    "in particular , we show how the optimization problem of the sfc falls into different cases , i.e. , case-1 , case-2 and case-3 , at different time slots in fig .",
    "[ fig : variation - of - cost ] according to the solar generation and sfc s requirements as demonstrated in fig .",
    "[ fig : energytrading ] . according to fig .",
    "[ fig : energytrading ] , the sfc s solar generation is higher than its required energy at time slots @xmath45 to @xmath147 and again at @xmath148",
    ". therefore , during these time slots , the sfc sells its excess energy to both the households and the grid during time slots @xmath149 to @xmath150 , and to the households only for the rest of the time .",
    "this is due to the fact that when the surplus from the generation is significantly higher , i.e. , from time slots @xmath149 to @xmath150 , the sfc sells to the grid after meeting its own electricity demand and the requirements of the households according to the designed scheme .",
    "thus , these time durations fall within case-3 as shown in fig .",
    "[ fig : variation - of - cost ] , bringing revenue for the sfc . for",
    "relatively smaller surpluses , i.e. , case-2 in fig .",
    "[ fig : variation - of - cost ] , the sfc sells its surplus energy only to the households , e.g. , in time slots @xmath151 to @xmath147 , and @xmath148 in fig .",
    "[ fig : energytrading ] . nevertheless , according to fig .",
    "[ fig : energytrading ] , at the latter part of the considered range of time slots , the sfc s requirement is significantly higher than the generation .",
    "hence , the sfc needs to buy energy from the grid during these time slots and thus the energy management scheme falls within case-1 , as shown in fig .",
    "[ fig : variation - of - cost ] . in fig .",
    "[ fig : energytrading ] , due to space limitation we do not show the amount of energy that the sfc buys from grid during these time slots , which can easily be calculated from the difference between the solar generation and sfc s requirements .",
    "note that , unlike case-2 and case-3 , the energy trading in case-1 incurs cost to the sfc .",
    "increases , the vc increases considerably for all time instants . ]",
    "we show in fig .",
    "[ fig : effectvc ] how the vc to the sfc changes over time for different values of @xmath64 .",
    "from this figure , we first note that the vc to the sfc increases during the late evening when there is a lack of solar energy due to lower intensity of solar irradiance .",
    "and , when the generation of solar energy is significantly high , i.e. , around noon , the vc cost reaches a lower value and does not change significantly over time .",
    "this is due to the fact that a higher amount of solar generation eventually lets the sfc meet its demand from its own generation ( case-2 and case-3 ) without any dependence on the grid . as a consequence",
    ", the vc reduces according to the proposed design . whereas , the sfc needs to buy a significant amount of energy from the grid when there is not enough generation to meet the sfc s requirement ( case-1 ) .",
    "this consequently increases the sfc s estimate of cost in the next time slot , and hence the vc to the sfc increases considerably after time slot @xmath152 as shown in fig .",
    "[ fig : effectvc ] .",
    "we further note from fig .",
    "[ fig : effectvc ] that as the value of @xmath64 increases the vc increases over all the time slots .",
    "essentially , as explained in section  [ subsection : cost function of sfc ] , a higher @xmath64 refers to a larger community size that requires more energy .",
    "hence , the estimate of the cost across various time slots becomes larger compared to scenarios when @xmath64 is small . as a consequence",
    ", vc attains a higher value for higher @xmath64 .      in fig .",
    "[ fig : battery - soc ] , we demonstrate the charging and discharging behavior of the sfc s esd for different values of @xmath64 , which would further provide some insights into the choice of the esd s capacity . in the considered energy management scheme",
    ", we propose to use a cost factor in each charging and discharging cycle of the sfc to prevent excess charging and discharging of the sfc s esd during the energy management period .",
    "this enables the sfc to use a relatively lower amount of its capacity as demonstrated in this example .",
    "for instance , the sfc only uses up to @xmath153 kwh of esd space for charging and discharging when @xmath154 , which increases to @xmath155 and @xmath156 kwh for a @xmath64 of @xmath146 and @xmath157 respectively .",
    "interestingly , due to the possibility of increased average cost over the whole time duration , the sfc does not use its battery for @xmath158 .",
    "thus , for a fixed parameter @xmath64 , the proposed scheme enables the sfc to choose a suitable esd capacity for the considered system , which can reduce the capital cost for the sfc by suggesting the set - up of a smaller - sized esd .    further from fig .",
    "[ fig : battery - soc ] , the charging of the esd mainly takes place in the morning when the pv generation is moderately high and the sfc discharges its esd during the afternoon .",
    "interestingly , no charging of the esd is observed at noon even though the solar generation is significantly higher .",
    "this is due to the way the scheme is designed such that the cost factor @xmath106 incurs a cost to the sfc whenever there is a charging or discharging of the esd . therefore",
    ", selling the surplus solar energy to households and the grid at noon enables the sfc to make more revenue instead of incurring a cost to it by charging the esd .",
    "this strategy leads to a lower average cost to the sfc when considering the total time duration .",
    "furthermore , unlike most management schemes with energy storage devices where future information on price is available ( e.g. , see the management schemes surveyed in  @xcite ) no charging of the esd is observed in the late evening for the proposed technique .",
    "this is mainly due to two reasons : 1 ) to increase the usage of renewable energy as explained in section  [ sec : introduction ] , we consider that the sfc only charges its esd when the there is excess solar energy available and does not charge it with energy from the grid , and 2 ) it is assumed that no future information is considered available to the sfc .",
    "therefore , the sfc decides on its energy management based on the scenarios available at each time slot , which prevents the sfc only from charging its esd at night for future use .",
    "however , it would be an interesting extension of the proposed work to include future information and observe the charging and discharging behavior of the esd at different times .    .",
    "]           [ table:1 ]    to compare the relative performance of the proposed scheme , we choose the grid - tie solar system  @xcite as a benchmark , and show how the proposed scheme performs in terms of average cost savings to the sfc compared to a grid - tie solar system as the number of solar panels in the system changes .",
    "essentially in a grid - tie system , an energy entity with renewables , such as the sfc in this paper , sells back its surplus energy , if there is any after meeting its own demand , to the grid . and",
    "if the generated energy is not enough to meet its requirements , the sfc may buy the deficient amount from the grid .",
    "now , to observe the performance improvement , we increase the number of solar panels of the sfc from @xmath126 to @xmath159 and demonstrate the percentage cost savings . ] to the sfc for the proposed scheme in comparison with the grid - tie system in fig .  [",
    "fig : effectsolarpanel ] .",
    "we consider two scenarios based on the household demands and consider that the household demand per time slot in scenario @xmath46 is twice that of scenario @xmath45 .    in fig .",
    "[ fig : effectsolarpanel ] , first we note that the percentage cost savings for the sfc , in both scenarios , increases as the number of solar panels in the system increases from @xmath126 to @xmath160 .",
    "indeed , as the number of solar panels increases , the larger surplus enables the sfc to sell more to the households at a higher price compared to selling to the grid , which consequently increases the revenue for the sfc in the proposed scheme .",
    "therefore , the percentage average cost savings with respect to the grid - tie system increases .",
    "however , interestingly , as the number of solar panels increases from @xmath44 to @xmath159 , the percentage of cost savings eventually decreases .",
    "this is because , as the scheme is designed , once the sfc fulfils both its own requirement and the requirements of the households , it sells the excess energy to the grid with a price similar to that of a grid - tie system .",
    "hence , once the generation is significantly high ( due to a large number of solar panels ) , most of the generated energy is sold back to the grid by the sfc .",
    "therefore , the percentage improvement in terms of cost savings eventually decreases as the revenue from selling the energy to the grid is similar for both the proposed and grid - tie system .",
    "furthermore , as the households demand in each time slots increases by a factor of two , the percentage cost savings increases ( i.e. , shifts upwards for scenario @xmath46 as can be seen from fig .  [",
    "fig : effectsolarpanel ] ) .",
    "essentially , more household demand enables the sfc to sell more to the households , which increases its revenue and subsequently increases the average cost savings .",
    "nonetheless , when the generation becomes significantly high in scenario 2 , the cost savings reduce in a similar manner to scenario 1 for the same reason as for scenario 1 .",
    "finally in table  [ table:1 ] , we show how the average cost savings ( in cents ) to the sfc for the proposed scheme compared to a grid - tie system are affected for different choices of @xmath64 .",
    "the negative sign in the table implies that the cost for the proposed scheme is more than the grid - tie system . now from table",
    "[ table:1 ] , as the value of @xmath64 increases in a system , average cost savings to the sfc compared to the grid - tie system decreases for a particular number of solar panels . the main reason for this decrement can be explained from fig .",
    "[ fig : effectvc ] . according to fig .",
    "[ fig : effectvc ] , the vc to the sfc increases noticeably as @xmath64 increases . that is , the sfc overestimates the cost in each time slot , which also contributes to the total cost to the sfc according to the design of the scheme . as a result , the cost to the sfc for the proposed scheme increases , which subsequently reduces the cost savings compared to a grid - tie system",
    "for instance , for 60 solar panels , the average cost savings to the sfc from using the proposed scheme over a grid - tie system is 40.10 and 9.76 cents for @xmath64 = @xmath161 and @xmath162 respectively , and the reduction of @xmath163 cents is due to the increment of vc to the sfc for a change of @xmath64 by 100 . and , as the value of @xmath64 increases to @xmath146 and @xmath157 , the proposed scheme shows a performance degradation compared to a grid - tie system .",
    "however , if @xmath64 is always set to a large value by the sfc , it can be interpreted that the community size is large and requires more energy .",
    "this subsequently means more solar panels need to be installed , if possible , in the system .",
    "thus , the performance of the proposed scheme improves significantly for the system with higher demand and shows considerable cost savings when compared to a grid - tie system .",
    "for instance , the proposed scheme outperforms the grid - tie system at large values of @xmath64 of 250 and 350 when the number of solar panels in the system is large , i.e. , @xmath164 and @xmath165 respectively .",
    "therefore , critical for the adaptation of the proposed scheme is the choice of @xmath64 in accordance with the community size in order to capture a better cost - benefit tradeoff for the considered system .",
    "further in terms of percentage improvement of the cost savings with respect to the number of solar panels , we note that the performance is similar to that in fig .",
    "[ fig : effectsolarpanel ] .",
    "in this paper , we have proposed an energy management scheme for a shared facility controller ( sfc ) , which is responsible for maintaining the shared facilities in a smart community and is also connected to the grid and households .",
    "a suitable system model has been proposed to enable multi - direction flow of electricity from the sfc s solar panels so as to minimize the operational cost to the sfc in each time slot of a considered duration .",
    "considering the fact that the generation of energy from the sfc s solar panels and the requirement of energy for shared facilities are both intermittent , we have divided the energy management problem into three categories . in each category ,",
    "the requirement of the sfc has been given a priority and the management scheme has been designed such that the sfc may also sell its excess electricity , if there is any , to other energy entities such as households and the grid .",
    "we have proposed the concept of a virtual cost ( vc ) and analyzed how the vc affects the decision making process of the sfc for three different cases .",
    "an algorithm has been proposed for the sfc to decide on the optimal charging and discharging amount of its esd and on the trading of energy with different entities in real time in order to reach the optimal solution .",
    "numerical studies have been provided to show the beneficial properties of the proposed scheme .",
    "w.  tushar , b.  chai , c.  yuen , d.  b. smith , k.  l. wood , z.  yang , and h.  v. poor , `` three - party energy management with distributed energy resources in smart grid , '' _ ieee trans .",
    "_ , vol .",
    "62 , no .  4 , apr",
    ". 2015 .",
    "w.  tushar , b.  chai , c.  yuen , s.  huang , d.  b. smith , h.  v. poor , and z.  yang , `` energy storage sharing in smart grid : a modified auction - based approach , '' _ ieee transactions on smart grid _ , vol .  7 , no .  3 , pp .",
    "14621475 , may 2016 .",
    "j.  guerrero , j.  vasquez , j.  matas , l.  de  vicu@xmath166a , and m.  castilla , `` hierarchical control of droop - controlled ac and dc microgrids  a general approach toward standardization , '' _ ieee trans",
    "_ , vol .",
    "58 , no .  1 ,",
    "158172 , jan 2011 .    c.  hill , m.  such , d.  chen , j.  gonzalez , and w.  grady , `` battery energy storage for enabling integration of distributed solar power generation , '' _ ieee trans",
    ". smart grid _",
    ", vol .  3 , no .  2 ,",
    "pp . 850857 , june 2012 .",
    "d.  zhang , n.  shah , and l.  g. papageorgiou , `` efficient energy consumption and operation management in a smart building with microgrid , '' _ energy conversion and management _ , vol .",
    "74 , pp . 209222 , oct 2013 .",
    "h.  kanchev , d.  lu , f.  colas , v.  lazarov , and b.  francois , `` energy management and operational planning of a microgrid with a pv - based active generator for smart grid applications , '' _ ieee trans .",
    "_ , vol .",
    "58 , no .",
    "10 , pp . 45834592 , oct 2011 .",
    "h.  scherer , m.  pasamontes , j.  guzmn , j.  lvarez , e.  camponogara , and j.  normey - rico , `` efficient building energy management using distributed model predictive control , '' _ journal of process control _ , vol .",
    "24 , no .  6 , pp .",
    "740749 , june 2014 .",
    "m.  muratori and g.  rizzoni , `` residential demand response : dynamic energy management and time - varying electricity pricing , '' _ ieee transactions on power systems _ , vol .",
    "31 , no .  2 , pp .",
    "11081117 , march 2016 .",
    "a.  safdarian , m.  fotuhi - firuzabad , and m.  lehtonen , `` a distributed algorithm for managing residential demand response in smart grids , '' _ ieee transactions on industrial informatics _ ,",
    "vol .  10 , no .  4 , pp .",
    "23852393 , nov 2014 .",
    "n.  forouzandehmehr , m.  esmalifalak , h.  mohsenian - rad , and z.  han , `` autonomous demand response using stochastic differential games , '' _ ieee transactions on smart grid _",
    ", vol .  6 , no .  1 , pp .",
    "291300 , jan 2015 .",
    "f.  rassaei , w.  s. soh , and k.  c. chua , `` demand response for residential electric vehicles with random usage patterns in smart grids , '' _ ieee transactions on sustainable energy _ , vol .  6 , no .  4 , pp . 13671376 , oct 2015 .",
    "j.  h. yoon , r.  baldick , and a.  novoselac , `` dynamic demand response controller based on real - time retail price for residential buildings , '' _ ieee transactions on smart grid _ , vol .  5 , no .  1 ,",
    "121129 , jan 2014 .",
    "w.  tushar , c.  yuen , d.  b. smith , and h.  v. poor , `` price discrimination for energy trading in smart grid : a game theoretic approach , '' _ ieee transactions on smart grid _ , vol .",
    "preprint , no .",
    "99 , pp . 112 , 2016 .    c.  vivekananthan , y.  mishra , g.  ledwich , and f.  li , `` demand response for residential appliances via customer reward scheme , '' _ ieee transactions on smart grid _",
    ", vol .  5 , no .  2 ,",
    "809820 , march 2014 .",
    "a.  barr , `` canberra to be 100% renewable by 2025 , '' 2015 , published in september 22 .",
    "[ online ] .",
    "available : http://www.cmd.act.gov.au/open_government/inform/act_gover-\\nment\\_media_releases/barr/2015/canberra-to-be-100-renewable-by-2025      w.  tushar , c.  yuen , s.  huang , d.  smith , and h.  v. poor , `` cost minimization of charging stations with photovoltaic : an approach with ev classification , '' _ ieee transactions on intelligent transportation systems _ , vol .",
    "17 , no .  1 ,",
    "156169 , jan . 2016 .",
    "dews , `` current electricity prices , '' june 2015 , queensland government : department of energy and water supply , available : https://www.dews.qld.gov.au / energy - water - home / electricity/\\prices / current - prices .",
    "solarmatters , `` feed - in tariff for grid connected solar power system , '' 2015 , solar matters , australia , available : http://www.energymatters.com.au / rebates - incentives / feedintariff/\\queensland    [ http://www.energymatters.com.au/rebates-incentives/feedintariff/\\queensland    ] .    e.  mckenna and m.thomson , `` photovoltaic metering configurations , feed - in tariffs and the variable effective electricity prices that result , '' _ iet renewable power generation _ , vol .  7 , no .  3 , pp .",
    "235245 , may 2013 .",
    "s.  dechert , `` solar cell efficiency rises by @xmath167 through singlet fission , '' 2014 , published in july .",
    "[ online ] .",
    "available : http://cleantechnica.com/2014/07/11/solar-cell-efficiency-rises-30-singlet-fission/        e.  ritch , `` energy efficiency and elevator etiquette , '' 2010 , published in august .",
    "[ online ] .",
    "available : http://blog.cleantech.com / sector - insights / energy - efficiency / energy-\\efficiency - and - elevator - etiquette/.      n.  deng , c.  stewart , and j.  li , `` concentrating renewable energy in grid - tied datacenters , '' in _ proc .",
    "ieee international symposium on sustainable systems and technology ( issst ) _ , chicago , il , may 2011 , pp . 16 ."
  ],
  "abstract_text": [
    "<S> this paper proposes an energy management scheme to maximize the use of solar energy in the smart grid . in this context , a shared facility controller ( sfc ) with a number of solar photovoltaic ( pv ) panels in a smart community </S>",
    "<S> is considered that has the capability to schedule the generated energy for consumption and trade to other entities . </S>",
    "<S> particularly , a mechanism is designed for the sfc to decide on the energy surplus , if there is any , that it can use to charge its battery and sell to the households and the grid based on the offered prices . in this regard , a hierarchical energy management scheme is proposed with a view to reduce the total operational cost to the sfc . </S>",
    "<S> the concept of a virtual cost ( vc ) is introduced that aids the sfc to estimate its future operational cost based on some available current information . </S>",
    "<S> the energy management is conducted for three different cases and the optimal cost to the sfc is determined for each case via the theory of maxima and minima . </S>",
    "<S> a real - time algorithm is proposed to reach the optimal cost for all cases and some numerical examples are provided to demonstrate the beneficial properties of the proposed scheme .    energy management , operational cost , smart grid , solar pv , shared facility . </S>"
  ]
}