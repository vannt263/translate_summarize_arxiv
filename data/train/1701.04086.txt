{
  "article_text": [
    "a large body of work exists from the past twenty years on applications of universal algebra to the computational complexity of _ constraint satisfaction problems _ ( csps ) and a number of celebrated results have been obtained through this method .",
    "one considers the problem csp@xmath6 in which it is asked whether an input sentence @xmath7 holds on @xmath8 , where @xmath7 is _ primitive positive _ , that is using only @xmath9 , @xmath10 and @xmath11 .",
    "the csp is one of a wide class of model - checking problems obtained from restrictions of first - order logic . for almost every one of these classes",
    ", we can give a complexity classification  @xcite : the two outstanding classes are csps and its popular extension _ quantified csps _",
    "( qcsps ) for positive horn sentences  where @xmath12 is also present  which is used in artificial intelligence to model non - monotone reasoning or uncertainty @xcite .",
    "the outstanding conjecture in the area is that all finite - domain csps are either in p or are np - complete , something surprising given these csps appear to form a large microcosm of np , and np itself is unlikely to have this dichotomy property .",
    "this feder - vardi conjecture @xcite , given more concretely in the algebraic language in @xcite , remains unsettled , but is now known for large classes of structures .",
    "it is well - known that the complexity classification for qcsps embeds the classification for csps and thus the former may be considered a project at least as hard .",
    "the following is the merger of conjectures 6 and 7 in @xcite which we call the _",
    "chen conjecture_.    let @xmath8 be a finite relational structure expanded with all constants .",
    "if pol@xmath6 has pgp , then qcsp@xmath6 is in np ; otherwise qcsp@xmath6 is pspace - complete .    in @xcite ,",
    "conjecture 6 gives the np membership and conjecture 7 the pspace - completeness .",
    "we now know from @xcite and @xcite that the np membership of conjecture 6 is indeed true .",
    "the main result of this paper is the following .",
    "[ thm : all ] let @xmath0 be an idempotent algebra on a finite domain @xmath13 . if @xmath1 satisfies pgp , then qcsp@xmath2 is in np . otherwise , qcsp@xmath2 is co - np - hard .",
    "zhuk has proved that only the cases pgp and egp may occur , as well even in the non - idempotent case , in @xcite .",
    "this transpires to be the last major obstacle to prove theorem  [ thm : all ] .",
    "we are also able to refute the following form .",
    "[ thm : alternative ] let @xmath0 be an idempotent algebra on a finite domain @xmath13 .",
    "if @xmath1 satisfies pgp , then for every finite signature reduct @xmath14 , qcsp@xmath6 is in np .",
    "otherwise , there exists a finite signature reduct @xmath14 so that qcsp@xmath6 is co - np - hard .",
    "note that we permit infinite signatures ( languages ) although our domains remain finite .",
    "this aspect of our work will be discussed in detail later . in proving theorem  [ thm : all ]",
    "we are in a sense saying that the complexity of qcsps , with all constants included , is classified modulo the complexity of csps , in the following sense .",
    "either qcsp@xmath2 is co - np - hard or qcsp@xmath2 has the same complexity as csp@xmath2 . in this manner",
    ", our result follows in the footsteps of the similar result for the valued csp , which has also had its complexity classified modulo the csp , as culminated in the paper @xcite .    for a finite - domain algebra @xmath0 we associate a function @xmath15 , giving the cardinality of the minimal generating sets of the sequence @xmath16 as @xmath17 , respectively .",
    "we may say @xmath0 has the @xmath18-gp if @xmath19 for all @xmath20 .",
    "the question then arises as to the growth rate of @xmath21 and specifically regarding the behaviours constant , logarithmic , linear , polynomial and exponential .",
    "wiegold proved in @xcite that if @xmath0 is a finite semigroup then @xmath22 is either linear or exponential , with the former prevailing precisely when @xmath0 is a monoid .",
    "this dichotomy classification may be seen as a gap theorem because no growth rates intermediate between linear and exponential may occur .",
    "we say @xmath0 enjoys the _ polynomially generated powers _",
    "property ( pgp ) if there exists a polynomial @xmath23 so that @xmath24 and the _ exponentially generated powers _ property ( egp ) if there exists a constant @xmath25 so that @xmath26 where @xmath27 .    in hubie",
    "chen s @xcite , a new link between algebra and qcsp was discovered .",
    "chen s previous work in qcsp tractability largely involved the special notion of _ collapsibility _",
    "@xcite , but in @xcite this was extended to a _ computationally effective _ version of the pgp . for a finite - domain , idempotent algebra @xmath0 , _",
    "@xmath28-collapsibility _ may be seen as that special form of the pgp in which the generating set for @xmath29 is constituted of all tuples @xmath30 in which at least @xmath31 of these elements are equal .",
    "_ @xmath28-switchability _ may be seen as another special form of the pgp in which the generating set for @xmath29 is constituted of all tuples @xmath30 in which there exists @xmath32 , for @xmath33 , so that @xmath34 where @xmath35 , @xmath36 ,  , @xmath37 .",
    "thus , @xmath38 are the indices where the tuple switches value .",
    "note that these are not the original definitions , which we will see shortly , but they are proved equivalent to the original definitions ( at least for finite signatures ) in @xcite .",
    "we say that @xmath0 is collapsible ( switchable ) if there exists @xmath28 such that it is @xmath28-collapsible ( @xmath28-switchable ) .",
    "we note that zhuk uses this definition of switchability in @xcite and so it is the version we will use in this paper .",
    "zhuk proved that the only kind of pgp for finite - domain algebras is switchability .    for any finite algebra ,",
    "@xmath28-collapsibility implies @xmath28-switchability and for any @xmath39-element algebra , @xmath28-switchability implies @xmath28-collapsibility .",
    "chen originally introduced switchability because he found a @xmath40-element algebra that enjoyed the pgp but was not collapsible @xcite .",
    "he went on to prove that switchability of @xmath0 implies that the corresponding qcsp is in p , what one might informally state as qcsp@xmath2 in p , where @xmath1 can be seen as the structure over the same domain as @xmath0 whose relations are precisely those that are preserved by ( invariant under ) all the operations of @xmath0 .",
    "however , the qcsp was traditionally defined only on finite sets of relations ( else the question arises as to encoding ) , thus a more formal definition might be that , for any finite subset @xmath3 of @xmath1 , qcsp@xmath5 is in p. what we prove in this paper is that , as far as the qcsp is concerned , switchability on a three - element algebra @xmath0 is something of a mirage .",
    "what we mean by this is that when @xmath0 us switchable , for all finite subsets @xmath8 of inv@xmath4 , already pol@xmath6 is collapsible .",
    "thus , for qcsp complexity for finite structures , we do not need the additional notion of switchability to explain tractability , as collapsibility will already suffice .",
    "since these notions were originally introduced in connection with the qcsp this is particularly surprising .",
    "note that the parameter @xmath28 of collapsibility is unbounded over these increasing finite subsets @xmath8 while the parameter of switchability clearly remains bounded . in some way we are suggesting that switchability itself might be seen as a limit phenomenon of collapsibility .",
    "our use of infinite languages ( signatures , since we work on a finite domain ) is the only controversial part of our discourse and merits special discussion .",
    "we wish to argue that a necessary corollary of the algebraic approach to ( q)csp is a reconciliation with infinite languages .",
    "the traditional approach to consider arbitrary finite subsets of inv@xmath4 is unsatisfactory in the sense that choosing this way to escape the  naturally infinite ",
    "set inv@xmath4 is as arbitrary as the choice of encoding required for infinite languages .",
    "however , the difficulty in that choice is of course the reason why this route is often eschewed .",
    "the first possibility that comes to mind for encoding a relation in inv@xmath4 is probably to list its tuples , while the second is likely to be to describe the relation in some kind of `` simple '' logic .",
    "both these possibilities are discussed in @xcite , for the boolean domain , where the `` simple '' logic is the propositional calculus . for larger domains",
    ", this would be equivalent to quantifier - free propositions over equality with constants .",
    "both conjunctive normal form ( cnf ) and disjunctive normal form ( dnf ) representations are considered in @xcite and a similar discussion in @xcite exposes the advantages of the dnf encoding .",
    "the point here is that testing non - emptiness of a relation encoded in cnf may already be np - hard , while for dnf this will be tractable .",
    "since dnf has some benign properties , we might consider it a `` nice , simple '' logic while for `` simple '' logic we encompass all quantifier - free sentences , that include dnf and cnf as special cases .",
    "the reason we describe this as `` simple '' logic is to compare against something stronger , say all first - order sentences over equality with constants . here",
    "recognising non - emptiness becomes pspace - hard and since qcsps already sit in pspace , this complexity is unreasonable .    for the qcsp over infinite languages",
    "inv@xmath4 , chen and mayr @xcite have declared for our first , tuple - listing , encoding . in this paper",
    "we will choose the `` simple '' logic encoding , occasionally giving more refined results for its `` nice , simple '' restriction to dnf .",
    "our choice of the `` simple '' logic encoding over the tuple - listing encoding will ultimately be justified by the chen conjecture holding for `` simple '' logic yet failing for tuple - listings .",
    "note that our demonstration of the chen conjecture for infinite languages with the `` simple '' logic encoding does not resolve the original chen conjecture for finite languages @xmath8 with constants because qcsp@xmath41 could conceivably have higher complexity than qcsp@xmath6 due to a succinct representation of relations in @xmath42 .",
    "note that for finite relational bases @xmath43 of @xmath42 , qcsp@xmath44 and qcsp@xmath45 must have the same complexity .",
    "further , we do not know of any concrete finite @xmath8 with constants , so that qcsp@xmath41 and qcsp@xmath6 have different complexity .      this paper is the merger of @xcite , neither of which was submitted for publication ,",
    "considerably extended .",
    "let pol@xmath6 be the set of polymorphisms of @xmath8 and let inv@xmath4 be the set of relations on @xmath13 which are invariant under ( each of ) the operations of @xmath0 .",
    "pol@xmath6 is an object known in universal algebra as a _ clone _ , which is a set of operations containing all projections and",
    "closed under composition ( superposition ) .",
    "we will conflate sets of operations over the same domain and algebras just as we do sets of relations over the same domain and constraint languages ( relational structures ) .",
    "indeed , the only technical difference between such objects is the movement away from an ordered signature , which is not something we will ever need .",
    "we recall qcsp@xmath6 , where @xmath8 is some structure on a finite - domain , is a decision problem with input @xmath46 , a ph - sentence involving a finite set of relations of @xmath8 , encoded in propositional logic with equality and constants .",
    "the yes - instances are those @xmath46 for which @xmath47 .",
    "if the input sentence is restricted to have alternation @xmath48 then the corresponding problem is designated @xmath48-csp@xmath6 .",
    "we now recall some terminology due to chen  @xcite , for his natural adaptation of the model checking game to the context of ph - sentences .",
    "we shall not need to explicitly play these games but only to handle strategies for the existential player .",
    "this will enable us to give the original definitions for collapsibility and switchability .",
    "an _ adversary _",
    "@xmath49 of length @xmath50 is an @xmath20-ary relation over @xmath13 .",
    "when @xmath49 is precisely the set @xmath51 for some non - empty subsets @xmath52 of @xmath13 , we speak of a _",
    "rectangular adversary_. let @xmath46 have universal variables @xmath53 and quantifier - free part @xmath54 .",
    "we write @xmath55 and say that _ the existential player has a winning strategy in the @xmath56-game against adversary @xmath49 _ iff there exists a set of skolem functions @xmath57 such that for any assignment @xmath58 of the universally quantified variables of @xmath7 to @xmath13 , where @xmath59 , the map @xmath60 is a homomorphism from @xmath61 ( the canonical database ) to @xmath62 , where @xmath63 ( here , @xmath64 denotes the set of universal variables preceding @xmath65 and @xmath66 the restriction of @xmath58 to @xmath64 . ) clearly , @xmath67 iff the existential player has a winning strategy in the @xmath56-game against the so - called _ full ( rectangular ) adversary _ @xmath68 ( which we will denote hereafter by @xmath69 ) .",
    "we say that an adversary @xmath49 of length @xmath20 _ dominates _ an adversary @xmath70 of length @xmath20 when @xmath71 .",
    "note that @xmath72 and @xmath55 implies @xmath73 .",
    "we will also consider sets of adversaries of the same length , denoted by uppercase greek letters as in @xmath74 ; and , sequences thereof , which we denote with bold uppercase greek letters as in @xmath75 .",
    "we will write @xmath76 to denote that @xmath77 holds for every adversary @xmath49 in @xmath74 .",
    "we call _ width _ of @xmath74 and write @xmath78 for @xmath79 .",
    "let @xmath21 be a @xmath28-ary operation of @xmath62 and @xmath80 be adversaries of length @xmath20 .",
    "we say that @xmath81 is _ reactively composable _ from the adversaries @xmath82 via @xmath21 , and we write @xmath83 iff there exist partial functions @xmath84 for every @xmath85 in @xmath86 $ ] and every @xmath87 in @xmath88 $ ] such that , for every tuple @xmath89 in adversary @xmath81 the following holds .    * for every @xmath87 in",
    "@xmath88 $ ] , the values @xmath90 @xmath91 are defined and the tuple @xmath92 is in adversary @xmath93 ; and , * for every @xmath85 in @xmath86 $ ] , @xmath94 @xmath95 .",
    "we write @xmath96 if there exists a @xmath28-ary operation @xmath21 such that @xmath83 reactive composition allows to interpolate complete skolem functions from partial ones .",
    "[ thm : hubiereactivecomposition ] let @xmath46 be a ph - sentence with @xmath20 universal variables .",
    "let @xmath81 be an adversary and @xmath74 a set of adversaries , both of length @xmath20 .",
    "if @xmath76 and @xmath97 then @xmath67 .    as a concrete example of an interesting sequence of adversaries ,",
    "consider the adversaries for the notion of _ @xmath23-collapsibility_. let @xmath98 be some fixed integer .",
    "for @xmath65 in @xmath13 , let @xmath99 be the set of all rectangular adversaries of length @xmath20 with @xmath23 coordinates that are the set @xmath13 and all the other that are the fixed singleton @xmath100 .",
    "for @xmath101 , let @xmath102 be the union of @xmath99 for all @xmath65 in @xmath103 .",
    "let @xmath104 be the sequence of adversaries @xmath105 .",
    "we will define a structure @xmath62 to be _",
    "@xmath23-collapsible from source @xmath103 _",
    "iff for every @xmath20 and for all ph - sentence @xmath46 with @xmath20 universal variable , @xmath106 implies @xmath107 .    for @xmath23-switchability , the adversaries will be of the form @xmath108 which contains all tuples which have no more than @xmath23 switches .    for rectangular adversaries , such as @xmath99 ,",
    "reactive composition is rather simpler than in the definition above , becoming just ( ordinary ) composition , as follows .",
    "@xmath81 is _ composable _ from the adversaries @xmath82 via @xmath21 if @xmath109 , where @xmath110 and each @xmath111 .",
    "reactive composition plays a key role in the proof of our main theorem but its use appears only in other papers that we will cite .",
    "ordinary composition is the only type of reactive composition that will be used in this paper .",
    "we need to revisit the main result of @xcite to show that it holds not just for finite signatures but for infinite signatures also . in its original",
    "the following theorem discussed `` projective sequences of adversaries , none of which are degenerate '' .",
    "this includes switching adversaries and we give it in this latter form .",
    "we furthermore remove some parts of the theorem that are not currently relevant to us .",
    "[ mainresult : inabstracto ] let @xmath75 be the sequence of the set of all ( @xmath28-)switching @xmath20-ary adversaries over the domain of @xmath62 , a finite structure .",
    "the following are equivalent .    for every @xmath50 , for every ph - sentence @xmath54 with @xmath20 universal variables , @xmath112 implies @xmath113 .    for every @xmath50 , @xmath74 generates @xmath114 .",
    "[ mainresult : inabstractolevavi ] let @xmath75 be the sequence of the set of all ( @xmath28-)switching @xmath20-ary adversaries over the domain of @xmath62 , a finite - domain structure with an infinite signature .",
    "the following are equivalent .    for every @xmath50 , for every ph - sentence @xmath54 with @xmath20 universal variables , @xmath112 implies @xmath113 .    for every @xmath50",
    ", @xmath74 generates @xmath114 .",
    "we know from theorem  [ mainresult : inabstracto ] that the following are equivalent :    for every finite - signature reduct @xmath115 of @xmath62 and @xmath50 , for every ph - sentence @xmath54 with @xmath20 universal variables , @xmath116 implies @xmath117 .    for every finite - signature reduct @xmath115 of @xmath62 and every @xmath50 , @xmath74 generates @xmath118 .    since it is clear that both @xmath119 and @xmath120 , it remains to argue that @xmath121 and @xmath122 .",
    "[ @xmath123 . ] by contraposition , if @xmath124 fails then it fails on some specific ph - sentence @xmath54 which only mentions a finite number of relations of @xmath115 .",
    "thus @xmath125 also fails on some finite reduct of @xmath115 mentioning these relations .",
    "[ @xmath122 . ]",
    "consider some chain of finite reducts @xmath126 of @xmath62 so that each @xmath127 is a reduct of @xmath128 for @xmath129 and every relation of @xmath62 appears in some @xmath127 .",
    "we can assume from @xmath130 that @xmath74 generates @xmath131 , for each @xmath85 .",
    "but since the number of tuples @xmath89 and operations from @xmath74 to @xmath89 witnessing generation in @xmath118 is finite , the sequence of operations @xmath132 witnessing these must have an infinitely recurring element as @xmath85 tends to infinity .",
    "one such recurring element we call @xmath133 and this witnesses generation in @xmath114 .",
    "note that in @xmath122 above we did not need to argue uniformly across the different @xmath89 and it is enough to find an infinitely recurring operation for each of these individually .",
    "the following result is essentially a corollary of the works of chen and zhuk @xcite via @xcite .",
    "[ thm : easy ] let @xmath0 be an idempotent algebra on a finite domain @xmath13 .",
    "if @xmath1 satisfies pgp , then qcsp@xmath2 reduces to a polynomial number of instances of csp@xmath2 and is in np .    we know from theorem 7 in @xcite that @xmath0 is switchable , whereupon we apply corollary  [ mainresult : inabstractolevavi ] , @xmath134 .",
    "by considering instances whose universal variables involve only the polynomial number of tuples from the switching adversary , one can see that qcsp@xmath2 reduces to a polynomial number of instances of csp@xmath2 and is therefore in np .",
    "further details of the np algorithm are given in corollary 38 of @xcite but the argument here follows exactly section 7 from @xcite , in which it was originally proved that switchability yields the corresponding qcsp in np .",
    "note that chen s original definition of switchability , based on adversaries and reactive composability , plays a key role in the np membership algorithm in theorem  [ thm : easy ] .",
    "it is the result from @xcite that is required to reconcile the two definitions of switchability as equivalent , and indeed corollary  [ mainresult : inabstractolevavi ] is needed in this process for infinite signatures .",
    "if we were to use just our definition of switchability then it is only possible to prove ,  la proposition 3.3 in @xcite , that the bounded alternation @xmath135-csp@xmath2 is in np .",
    "suppose there exists @xmath136 strict subsets of @xmath13 so that @xmath137 , define the relation @xmath138 defined by @xmath139 where @xmath140 .",
    "[ thm : hard ] let @xmath0 be an idempotent algebra on a finite domain @xmath13 .",
    "if @xmath1 satisfies egp , then qcsp@xmath2 is co - np - hard .",
    "we know from lemma 11 in @xcite that there exist @xmath136 strict subsets of @xmath13 so that @xmath137 and the relation @xmath141 defined by @xmath142 where @xmath143 , is in @xmath1 , for each @xmath144 .",
    "we will first argue that the relation @xmath138 is in @xmath1 , for each @xmath145 .",
    "for this it is enough to see that @xmath146 is definable by the conjunction @xmath147 of @xmath148 instances of @xmath149 that each consider the ways in which two variables may be chosen from each of the @xmath150 , i.e. @xmath151 or @xmath152 or @xmath153 ( where @xmath154 is infix for @xmath155 ) .",
    "we need to show that this conjunction @xmath147 entails @xmath156 ( the converse is trivial ) .",
    "we will assume for contradiction that @xmath147 is satisfiable but @xmath156 not .",
    "in the first instance of @xmath157 of @xmath147 some atom must be true , and it will be of the form @xmath151 or @xmath152 or @xmath153 .",
    "once we have settled on one of these three , @xmath158 , then we immediately satisfy @xmath159 of the conjunctions of @xmath147 , leaving @xmath160 unsatisfied .",
    "now , we can not evaluate true any of the others among @xmath161 without contradicting our assumption .",
    "thus we are now down to looking at variables with subscript other than @xmath85 and in this fashion we have made the space one smaller , in total @xmath162 .",
    "now , we will need to evaluate in @xmath147 some other atom of the form @xmath163 or @xmath164 or @xmath165 , for @xmath166 .",
    "once we have settled on one of these three then we immediately satisfy @xmath167 of the conjunctions remaining of @xmath147 , leaving @xmath168 still unsatisfied . iterating this thinking , we arrive at a situation in which @xmath169 clauses are unsatisfied after we have gone through all @xmath28 subscripts , which is a contradiction .",
    "we will next argue that @xmath146 enjoys a relatively small specification in dnf ( at least , polynomial in @xmath28 ) .",
    "we first give such a specification for @xmath170 .",
    "@xmath171 which is constant in size when @xmath13 is fixed .",
    "now it is clear from the definition that the size of @xmath156 is polynomial in @xmath172",
    ".    we will now give a very simple reduction from the complement of ( monotone ) _ @xmath40-not - all - equal - satisfiability _",
    "( 3naesat ) to qcsp@xmath2 .",
    "3naesat is well - known to be np - complete @xcite and our result will follow .",
    "take an instance @xmath46 of 3naesat which is the existential quantification of a conjunction of @xmath28 atoms @xmath173 .",
    "thus @xmath174 is the universal quantification of a disjunction of @xmath28 atoms @xmath175 .",
    "we build our instance @xmath54 of qcsp@xmath2 from @xmath174 by transforming the quantifier - free part @xmath176 to @xmath177 .",
    "( @xmath178 implies @xmath179 . ) from an assignment to the universal variables @xmath180 of @xmath54 to elements",
    "@xmath53 of @xmath13 , consider elements @xmath181 according to    * @xmath182 implies @xmath183 , * @xmath184 implies @xmath185 , and * @xmath186 implies we do nt care , so w.l.o.g .",
    "say @xmath183 .",
    "the disjunct that is satisfied in the quantifier - free part of @xmath174 now gives the corresponding disjunct that will be satisfied in @xmath146 .",
    "( @xmath179 implies @xmath178 . ) from an assignment to the universal variables @xmath180 of @xmath46 to elements",
    "@xmath53 of @xmath187 , consider elements @xmath188 according to    * @xmath189 implies @xmath190 is some arbitrarily chosen element in @xmath191 , and * @xmath192 implies @xmath190 is some arbitrarily chosen element in @xmath193 .",
    "the disjunct that is satisfied in @xmath146 now gives the corresponding disjunct that will be satisfied in the quantifier - free part of @xmath174 .",
    "the demonstration of co - np - hardness in the previous theorem was inspired by a similar proof in @xcite .",
    "we note surprisingly that co - np - hardness in theorem  [ thm : hard ] is optimal .",
    "let @xmath136 strict subsets of @xmath194 so that @xmath137 and @xmath195",
    ". then qcsp@xmath196 is in co - np .",
    "[ prop : conp1 ]    let @xmath46 be an input to qcsp@xmath197 .",
    "we will now seek to eliminate atoms @xmath198 ( @xmath199 ) from @xmath46 .",
    "suppose @xmath46 has an atom @xmath198 .",
    "if @xmath200 is universally quantified , then @xmath46 is false .",
    "otherwise , either the atom @xmath198 may be eliminated with the variable @xmath200 since @xmath200 does not appear in a non - equality relation ; or @xmath46 is false because there is another atom @xmath201 for @xmath202 ; or @xmath198 may be removed by substitution of @xmath203 into all non - equality instances of relations involving @xmath200 .",
    "this preprocessing procedure is polynomial and we will assume that @xmath46 contains no atoms @xmath198 .",
    "we now argue that @xmath46 is a yes - instance iff @xmath204 is a yes - instance , where @xmath204 is built from @xmath46 by instantiating all existentially quantified variables as any @xmath205 .",
    "the universal @xmath204 can be evaluated in co - np ( one may prefer to imagine the complement as an existential @xmath206 to be evaluated in np ) and the result follows .    in fact , this being an algebraic paper , we can even do better .",
    "let @xmath8 signify a set of relations on a finite domain but not necessarily itself finite . for convenience",
    ", we will assume the set of relations of @xmath8 is closed under all co - ordinate projections and instantiations of constants .",
    "call @xmath8 _ existentially trivial _ if there exists an element @xmath207 ( which we call a _ canon _ ) such that for each @xmath28-ary relation @xmath208 of @xmath8 , and for every @xmath209 , whenever @xmath210 then also @xmath211 .",
    "we want to expand this class to _ almost existentially trivial _ by permitting conjunctions of the form @xmath212 or @xmath213 with relations that are existentially trivial .",
    "let @xmath136 strict subsets of @xmath194 so that @xmath137 and @xmath195 .",
    "the set of relations in @xmath214 is almost existentially trivial .",
    "consider a formula with a pp - definition in @xmath197 .",
    "we assume that only free variables appear in equalities since otherwise we can remove these equalities by substitution . now existential quantifiers can be removed and their variables instantiated as the canon @xmath215 .",
    "indeed , their atoms @xmath156 may now be removed since they will always be satisfied .",
    "thus we are left with a conjunction of equalities and atoms @xmath156 , and the result follows .    if @xmath8 is comprised exclusively of relations that are almost existentially trivial , then qcsp@xmath6 is in co - np .",
    "[ prop : conp2 ]    the argument here is quite similar to that of proposition  [ prop : conp1 ] except that there is some additional preprocessing to find out variables that are forced in some relation to being a single constant or pairs of variables within a relation that are forced to be equal . to do this in polynomial time",
    "we will make use of the fact that relations are encoded in dnf .",
    "in the first instance that some variable is forced to be constant in a @xmath28-ary relation , we should replace with the @xmath216-ary relation with the requisite forcing . in the second instance that a pair of variables are forced equal then we replace again the @xmath28-ary relation with a @xmath216-ary relation as well as an equality . after following these rules to their conclusion one",
    "obtains a conjunction of equalities together with relations that are existentially trivial .",
    "now is the time to propagate variables to remove equalities ( or find that there is no solution ) .",
    "finally , when only existentially trivial relatons left , all remaining existential variables may be evaluated to the canon @xmath215 .",
    "let @xmath136 strict subsets of @xmath194 so that @xmath137 and @xmath195",
    ". then qcsp@xmath217 is in co - np .",
    "we note that the set of relations @xmath218 is not maximal with the property that with the constants it forms a co - clone of existentially trivial relations .",
    "one may add , for example , @xmath219 .",
    "the following , together with our previous results , gives the refutation of the alternative chen conjecture .",
    "let @xmath136 strict subsets of @xmath194 so that @xmath137 and @xmath195 . then , for each finite signature reduct @xmath8 of @xmath197 , qcsp@xmath6 is in nl . [",
    "prop : finite - nl ]    we will assume @xmath8 contains all constants ( since we prove this case gives a qcsp in nl , it naturally follows that the same holds without constants ) .",
    "take @xmath20 so that , for each @xmath220 , @xmath221 .",
    "we claim @xmath8 admits a @xmath222-ary near - unanimity operation @xmath21 as a polymorphism , where all tuples whose map is not automatically defined by the near - unanimity criterion map to some arbitrary @xmath205 . to see this ,",
    "imagine that this @xmath21 were not a polymorphism .",
    "then some @xmath222 tuples in @xmath223 would be mapped to some tuple not in @xmath223 which must be a tuple @xmath224 of elements from @xmath225 .",
    "note that column - wise this map may only come from @xmath222-tuples that have @xmath226 instances of the same element . by the pigeonhole principle",
    ", the tuple @xmath224 must appear as one of the @xmath222 tuples in @xmath227 and this is clearly a contradiction .",
    "it follows from @xcite that qcsp@xmath6 reduces to a polynomially bounded ensemble of @xmath228 instances csp@xmath6 , and the result follows .",
    "let @xmath229 and @xmath230 .",
    "then , qcsp@xmath231 is in p under the * tuple encoding*. [ prop : chen - fails ]    consider an instance @xmath46 of this qcsp of size @xmath172 involving relation @xmath227 but no relation @xmath146 for @xmath232 .",
    "the number of tuples in @xmath227 is @xmath233 .",
    "following proposition  [ prop : conp1 ] together with its proof , we may assume that the instance is strictly universally quantified over a conjunction of atoms ( involving also constants ) .",
    "now , a universally quantified conjunction is true iff the conjunction of its universally quantified atoms is true .",
    "we can further say that there are at most @xmath172 atoms each of which involves at most @xmath226 variables .",
    "therefore there is an exhaustive algorithm that takes at most @xmath234 steps with is @xmath235 .",
    "the proof of proposition  [ prop : chen - fails ] suggests an alternative proof of proposition  [ prop : finite - nl ] , but placing the corresponding qcsp in p instead of nl .",
    "proposition  [ prop : chen - fails ] shows that chen s conjecture fails for the tuple encoding in the sense that it provides a language @xmath8 , expanded with constants , so that pol@xmath6 has egp , yet qcsp@xmath6 is in p under the tuple encoding .",
    "however , it does not imply that the algebraic approach to qcsp violates chen s conjecture under the tuple encoding .",
    "this is because @xmath231 is not of the form inv@xmath4 for some idempotent algebra @xmath0 . for this stronger result",
    ", we would need to prove qcsp@xmath236 is in p under the tuple encoding .",
    "our first task is the deduction of the following theorem , whose lengthy proof appears in appendix a. for each of the following two theorems , @xmath237 and @xmath238 are chosen such that @xmath239[l]{\\ensuremath{\\subseteq}}/}\\{0,1,2\\}$ ] , @xmath240 and @xmath195 .",
    "[ cor : dmitriy - long ] suppose @xmath0 is a gap algebra that is not @xmath241-projective . then , for every finite subset of @xmath3 of inv@xmath4 , pol@xmath5 is collapsible .",
    "our second task is the deduction of the following theorem , whose lengthy proof appears in appendix b.    [ thm : catarina ] suppose @xmath0 is a @xmath40-element algebra that is not egp , containing a @xmath39-element g - set as a subalgebra , that is not @xmath241-projective . then , pol@xmath5 is collapsible .",
    "[ cor:3-element - collapsibility ] suppose @xmath0 is a @xmath40-element algebra that is not egp . then , for every finite subset of @xmath3 of inv@xmath4 , pol@xmath5 is collapsible .",
    "recall lemma 11 in @xcite that @xmath0 has egp iff there exists @xmath237 and @xmath238 such that @xmath239[l]{\\ensuremath{\\subseteq}}/}d$ ] , @xmath242 , and all operations of @xmath0 are @xmath241-projective .",
    "if @xmath0 does not contain a g - set as a factor , then @xmath0 is a gap algebra and the result follows from theorem  [ cor : dmitriy - long ] .",
    "otherwise , @xmath0 contains a g - set as a factor .",
    "if @xmath0 contains a g - set as a homomorphic image then @xmath0 has egp from @xcite .",
    "else , since @xmath0 is @xmath40-element , @xmath0 contains a @xmath39-element g - set as a subalgebra and we are in the situation of theorem  [ thm : catarina ] .",
    "we would love to be able to improve theorem  [ thm : all ] to describe the boundary between those cases that are co - np - complete and those that are pspace - complete , if indeed such a result is true . in appendix c",
    "we go some way towards mapping the pspace - complete cases .",
    "however , even in the three - element case this appears challenging , but we are able to provide a variant vignette .",
    "let @xmath0 be an algebra on a @xmath40-element domain .",
    "either    * @xmath48-csp@xmath2 is in np , for all @xmath28 ; or * @xmath48-csp@xmath2 is co - np - complete , for all @xmath28 ; or * @xmath48-csp@xmath2 is @xmath243-hard , for some @xmath28 .",
    "[ thm : vignette ]    if @xmath0 has pgp then it is switchable and qcsp@xmath2 is in np from theorem  [ thm : easy ] .",
    "it follows that @xmath48-csp@xmath2 is in np , for all @xmath28 , _ a fortiori_. suppose now that @xmath0 has egp .",
    "if @xmath0 does not contain a g - set as a factor , then @xmath0 generates the semilattice - without - unit @xmath244 and it is known that @xmath48-csp@xmath2 is in co - np , for all @xmath28 @xcite . since we have co - np - hardness from theorem  [ thm : hard ] , we can indeed in this case upgrade to co - np - completeness , for all @xmath28 .",
    "we now assume that @xmath0 contains a g - set as a factor .",
    "if @xmath0 is a g - set then an examination of the proof in @xcite will show that @xmath245-csp@xmath2 is already @xmath243-hard .",
    "this is because additional auxiliary existential quantification may always be pushed innermost ( see proposition  7 of @xcite ) . more generally , if @xmath0 has a g - set as a homomorphic image then @xmath245-csp@xmath2 is @xmath243-hard ( see lemma  5 from @xcite )",
    ". thus , since @xmath0 is over three elements , we can assume the remaining case is that @xmath0 has a @xmath39-element g - set as a subalgebra .",
    "since @xmath0 has egp , there exist @xmath136 strict subsets of @xmath13 so that @xmath246 and all operations of @xmath0 are @xmath247-projective . if @xmath248 then @xmath0 has a @xmath39-element g - set as a homomorphic image ( let @xmath237 and @xmath238 be the two equivalence classes ) and we are in a previous case .",
    "let us assume that @xmath249 and @xmath250 .    case a. g - set is on @xmath187 .",
    "we will argue that the co - np - hardness proof of theorem  [ thm : hard ] can be readily extended to @xmath243-hardness already for the @xmath245-csp@xmath2 .",
    "observe that @xmath187 is a subalgebra and therefore is in inv@xmath4 . to add existential quantification @xmath251 , for a reduction from the complement of 3-@xmath245-naesat , we simply need to add the stipulation @xmath252 , which appears , as everything else , in dnf .",
    "case b. g - set is on @xmath253 .",
    "whereas in case a we extended by alternation the co - np - hardness proof that used @xmath254 and @xmath255 to indicate true and false , we will here extend by alternation the np - hardness proof of csp@xmath2 that arises from @xmath253 inducing a g - set .",
    "thus , we will use @xmath254 and @xmath39 to represent true and false .",
    "we first make the crucial observation that the binary relation @xmath256 is in inv@xmath4 . to see this ,",
    "imagine a term operation @xmath21 of @xmath0 which is both @xmath247-projective and actually projective on tuples from @xmath253 .",
    "furthermore , this must be the same co - ordinate that is being projected upon for both of these since if this co - ordinate is a @xmath39 , the outcome must be a @xmath39 already by @xmath241-projectivity .",
    "since @xmath257 has only four pairs we may assume @xmath21 is at most @xmath258-ary and we can consider its action columnwise on @xmath259 if @xmath21 ( @xmath247-)projects to the first co - ordinate , then we have @xmath260 or @xmath261 .",
    "if it projects to the second co - ordinate , then we have @xmath262 or @xmath263 .",
    "if it projects to the third co - ordinate , then we must have @xmath264 .",
    "finally , if it projects to the fourth co - ordinate then we can have only @xmath265 .",
    "now , let us imagine a reduction from 3-@xmath245-naesat where @xmath254 and @xmath39 will represent true and false .",
    "note that the ternary predicate @xmath266 is in inv@xmath4 .",
    "we will use @xmath208 to enforce the not - all - equal predicate on @xmath253 in the obvious fashion and the existential variables from 3-@xmath245-naesat will become existential variables of @xmath245-csp@xmath4 restricted to be from @xmath253 which , as a subalgebra , is in inv@xmath4 .",
    "the trick is how to encode universal variables @xmath267 and for this we augment a new auxiliary variable @xmath268 and substitute by @xmath269 .",
    "when @xmath268 is evaluated as @xmath255 , @xmath200 is forced to be @xmath39 ; when @xmath268 is evaluated as @xmath254 , @xmath200 is forced to be @xmath254 ; and when @xmath268 is evaluated as @xmath39 , @xmath200 can be either @xmath254 or @xmath39 .",
    "ostensibly this does not result in an instance of @xmath245-csp@xmath2 until we notice , as per the previous sentence , that the existential quantification of all the auxiliary variables may be pushed innermost .",
    "case c. g - set is on @xmath270 .",
    "this case is symmetric with case b.    note that the trichotomy of theorem  [ thm : vignette ] does not hold for qcsp along the same boundary for , respectively , np , co - np - complete and pspace - complete . for the semilattice - without - unit @xmath244",
    "it is known that @xmath48-csp@xmath271 is co - np - complete , for all @xmath28 , while qcsp@xmath271 is pspace - complete @xcite .",
    "the major contribution of this paper is its discussion of the chen conjecture with two infinite - signature variants one of which is proved to hold ( with encoding in `` simple logic '' ) and one of which fails ( with the tuple listing ) .",
    "in addition to this , the contribution is largely mathematical , examining the relationship between switchability and collapsibility in the three - element case .",
    "however , this mathematical study uncovers something of great importance to the computer scientist who is not reconciled to infinite signatures !",
    "since here it demonstrates that all three - element domain np - memberships that may be shown by switchability , may already be shown by collapsibility .",
    "the work associated with theorem  [ cor : dmitriy - long ] is clever and involves a new method , whereas the work associated with theorem  [ thm : catarina ] uses known methods and involves mostly turning the handle with these .",
    "similarly , the work involved with the three element vignette uses known methods on top of our earlier new results .",
    "the chen conjecture in its original form remains open . as does the general question ( for arbitrary finite domains ) as to whether , if @xmath0 is switchable , all finite subsets @xmath8 of inv@xmath4 are so that pol@xmath6 is collapsible .",
    "the appearance of a co - np - complete qcsp is likely to be an anomaly of our introduction of infinite signatures .",
    "such a qcsp is unlikely to exist with a finite signature ( at least , nothing like this is hitherto known ) .",
    "indeed , its presence might be used as an argument against the acceptance of infinite signatures , if it is interpreted as an aberration .",
    "for the reader in this mind , we ask to please revise the earlier section on infinite signatures .",
    "10    libor barto .",
    "the collapse of the bounded width hierarchy .",
    ", 26(3):923943 , 2016 .",
    "manuel bodirsky and hubie chen . quantified equality constraints .",
    ", 39(8):36823699 , 2010 .",
    "manuel bodirsky and jan kra .",
    "the complexity of equality constraint languages .",
    ", 3(2):136158 , 2008 .",
    "a conference version appeared in the proceedings of csr06 .",
    "ferdinand brner , andrei  a. bulatov , hubie chen , peter jeavons , and andrei  a. krokhin .",
    "the complexity of constraint satisfaction games and qcsp .",
    ", 207(9):923944 , 2009 .",
    "simone bova and hubie chen .",
    "the complexity of width minimization for existential positive queries . in _ proc .",
    "17th international conference on database theory ( icdt ) , athens , greece , march 24 - 28 , 2014 . _ , pages 235244 , 2014 .",
    "a.  bulatov , a.  krokhin , and p.  g. jeavons . classifying the complexity of constraints using finite algebras . , 34:720742 , 2005 .",
    "catarina carvalho , florent  r. madelaine , and barnaby martin . from complexity to algebra and back : digraph classes , collapsibility and the pgp . in _ 30th annual ieee symposium on logic in computer science ( lics ) _ , 2015 .",
    "hubie chen . quantified constraint satisfaction and 2-semilattice polymorphisms . in _ principles and practice of constraint programming - cp 2004 , 10th international conference , cp 2004 , toronto , canada ,",
    "september 27 - october 1 , 2004 , proceedings _ , pages 168181 , 2004 .",
    "hubie chen .",
    "the complexity of quantified constraint satisfaction : collapsibility , sink algebras , and the three - element case .",
    "37(5):16741701 , 2008 . hubie chen .",
    "existentially restricted quantified constraint satisfaction .",
    ", 207(3):369388 , 2009 .",
    "hubie chen . quantified constraint satisfaction and the polynomially generated powers property .",
    ", 65(3):213241 , 2011 . an extended abstract appeared in icalp b 2008 .",
    "hubie chen .",
    "meditations on quantified constraint satisfaction . in _ logic and program semantics - essays dedicated to dexter kozen on the occasion of his 60th birthday _ , pages 3549 , 2012 .",
    "hubie chen and peter mayr . quantified constraint satisfaction on monoids , 2016 .",
    "nadia creignou , sanjeev khanna , and madhu sudan . .",
    "siam monographs on discrete mathematics and applications 7 , 2001 .",
    "uwe egly , thomas eiter , hans tompits , and stefan woltran . solving advanced reasoning tasks using quantified boolean formulas . in _ proc .",
    "conf . on artificial intelligence and 12th conf . on innovative applications of artificial intelligence _ , pages 417422 .",
    "aaai press/ the mit press , 2000 .",
    "t.  feder and m.  vardi .",
    "the computational structure of monotone monadic snp and constraint satisfaction : a study through datalog and group theory .",
    ", 28:57104 , 1999 .    vladimir kolmogorov , andrei  a. krokhin , and michal rolinek .",
    "the complexity of general - valued csps . in _",
    "ieee 56th annual symposium on foundations of computer science , focs 2015 , berkeley , ca , usa , 17 - 20 october , 2015 _ , pages 12461258 , 2015 .",
    "florent  r. madelaine and barnaby martin . on the complexity of the model checking problem . ,",
    "abs/1210.6893 , 2012 .",
    "extended abstract appeared at lics 2011 under the name `` a tetrachotomy for positive first - order logic without equality '' .",
    "barnaby martin . on the chen conjecture regarding the complexity of qcsps . ,",
    "abs/1607.03819 , 2016 .",
    "barnaby martin and dmitriy zhuk .",
    "switchability and collapsibility of gap algebras . ,",
    "abs/1510.06298 , 2015 .",
    "christos  h. papadimitriou . .",
    "addison - wesley , 1994 .",
    "smullyan . .",
    "oxford logic guides .",
    "oxford university press , 1992 .",
    "james wiegold .",
    "growth sequences of finite semigroups . , 43:1620 , 8 1987 .",
    "d.  zhuk . . ,",
    "april 2015 .",
    "let @xmath21 be a @xmath28-ary idempotent operation on domain @xmath272 .",
    "we say @xmath21 is a _ generalised hubie - pol _ on @xmath273 if , for each @xmath274 , @xmath275 ( @xmath276 in the @xmath85th position ) .",
    "when @xmath277 this is called a _ hubie - pol _ in @xmath278 and gives @xmath216-collapsibility from source @xmath278 .",
    "in general , a generalised hubie - pol does not bestow collapsibility ( chen s @xmath258-ary switchable operation @xmath279 , below ) .",
    "the name hubie operation was used in @xcite for hubie - pol and the fact that this leads to collapsibility is noted in @xcite .    for this appendix @xmath0",
    "is an idempotent algebra on a @xmath40-element domain @xmath280 .",
    "assume @xmath0 has precisely two subalgebras on domains @xmath253 and @xmath270 and contains the idempotent semilattice - without - unit operation @xmath244 which maps all tuples off the diagonal to @xmath39 .",
    "thus , @xmath0 is a _",
    "gap algebra _ as defined in @xcite .",
    "note that the presence of @xmath244 removes the possibility to have a @xmath281-set as a factor .",
    "we say that @xmath0 is @xmath282-projective if for each @xmath28-ary @xmath21 in @xmath0 there exists @xmath283 so that , if @xmath284 then @xmath285 and if @xmath286 then @xmath287 . let us now further assume that @xmath0 is not @xmath282-projective .",
    "this rules out the gap algebras that have egp and we now know that @xmath0 is switchable @xcite .",
    "we will now consider the @xmath258-ary operation @xmath279 defined by chen in @xcite .",
    "let @xmath279 be the idempotent operation satisfying @xmath288 chen proved that @xmath289 is @xmath39-switchable but not @xmath28-collapsible , for any @xmath28 @xcite .",
    "let @xmath21 be a @xmath28-ary operation in @xmath0 that is not @xmath282-projective .",
    "violation of @xmath282-projectivity in @xmath21 means that for each @xmath290 $ ] either    * there is @xmath291 and @xmath292 so that @xmath293 , or * or @xmath294 and there is @xmath292 so that @xmath295 .    note that we can rule out the latter possibility and further assume @xmath296 @xmath297 , by replacing @xmath21 if necessary by the @xmath298-ary @xmath299 @xmath300 . thus , we may assume that ( * ) for each @xmath290 $ ] there is @xmath291 and @xmath301 so that @xmath293 .",
    "we wish to partition the @xmath28 co - ordinates of @xmath21 into those for which violation of @xmath282-projectivity , on words in @xmath302 :    * happens with @xmath254 to @xmath255 but never @xmath255 to @xmath254 .",
    "* happens with @xmath255 to @xmath254 but never @xmath254 to @xmath255 .",
    "* happens on both @xmath254 to @xmath255 and @xmath255 to @xmath254 .",
    "note that classes @xmath124 and @xmath303 are both non - empty ( class @xmath304 can be empty ) .",
    "this is because if class @xmath124 were empty then @xmath305 would be a hubie - pol in @xmath306 and if class @xmath303 were empty we would similarly have a hubie - pol in @xmath307",
    ". we will write @xmath28-tuples with vertical bars to indicate the split between these classes .",
    "suppose there exists a @xmath308 so that @xmath309 . then we can identify all the variables in one among class @xmath124 or class @xmath303 to obtain a new function for which one of these classes is of size one .",
    "note that if , e.g. , class @xmath124 is made singleton , this process may move variables previously in class @xmath304 into class @xmath303 , but never to class @xmath124 .",
    "thus we may assume that either class @xmath124 or class @xmath303 is singleton or , for all @xmath308 over @xmath187 , @xmath310 .",
    "indeed , these singleton cases are dual and thus we need only prove one of them .",
    "recall the global assumptions are in force for the remainder of the paper .",
    "[ lem : fun ] any algebra over @xmath272 containing @xmath21 and @xmath244 is either collapsible or has binary term operations @xmath311 and @xmath312 so that    * @xmath313 and @xmath314 , * and * * @xmath315 and @xmath316 .    consider a tuple @xmath317 over @xmath187 that witnesses the breaking of @xmath282-projectivity for some class @xmath124 variable from @xmath254 to @xmath255 ; so @xmath318 . let @xmath319 be @xmath317 with the @xmath254s substituted by @xmath39 and the @xmath255s substituted by @xmath254 . if , for each such @xmath317 over @xmath187 that witnesses the breaking of @xmath282-projectivity for each class @xmath124 variable , we find @xmath320 , then @xmath305 is a hubie - pol in @xmath306 .",
    "thus , for some such @xmath317 we find @xmath321 . by collapsing the variables according to the division of @xmath317 and @xmath319",
    "we obtain a binary function @xmath311 so that @xmath313 and @xmath322 .",
    "we may also see that @xmath323 , since classes @xmath124 and @xmath303 are non - empty .",
    "dually , we consider tuples @xmath317 over @xmath187 that witnesses the breaking of @xmath282-projectivity for class @xmath303 variables from @xmath255 to @xmath254 to derive a function @xmath312 so that @xmath315 , @xmath324",
    ".      we will address the case in which class @xmath124 is a singleton and there exists @xmath325 so that @xmath326 ( the like case with class @xmath303 being singleton itself being dual ) .    [ prop : asymmetric ] let @xmath21 be so that class @xmath124 is a singleton and there exists @xmath325 so that @xmath326",
    ". then , either @xmath21 generates a binary idempotent operation with @xmath327 and @xmath328 , or any algebra on @xmath272 containing @xmath21 and @xmath244 is collapsible .",
    "let us consider the general form of @xmath21 , @xmath329 where the @xmath330s and @xmath331s are from @xmath187 and we can assume that each @xmath332 contains at least one @xmath255 and also each @xmath333 contains at least one @xmath255 .",
    "for the latter assumption recall that in class @xmath304 we can always find some break of @xmath241-projectivity from @xmath255 to @xmath254 . note that by expanding what we previously called class @xmath303 we can build , by possibly identifying variables , a function @xmath334 of the form @xmath335 where the @xmath330s and @xmath331s are from @xmath187 and we can assume each @xmath336 contains at least one @xmath255 and also each @xmath337 contains a least one @xmath255 .",
    "note that we do not claim the new vertical bars correspond to delineate between classes @xmath124 , @xmath303 and @xmath304 under their original definitions , since this is not important to us .",
    "we will henceforth assume that @xmath21 is in the form of @xmath334 .",
    "let @xmath338 ( resp . ,",
    "@xmath339 ) be @xmath254 if @xmath340 ( resp . , @xmath341 )",
    "is @xmath254 , and be @xmath39 if @xmath340 ( resp . , @xmath341 )",
    "is @xmath255 .",
    "that is , @xmath342 is built from @xmath343 by substituting @xmath255s by @xmath39s .",
    "suppose one of @xmath344 , ",
    ", @xmath345 is @xmath39 .",
    "then @xmath21 generates an idempotent binary operation with @xmath327 and @xmath328 .",
    "thus , we may assume that each of @xmath346 ,  , @xmath347 @xmath348 is @xmath254 .",
    "we now move to consider some cases .",
    "( case 1 : @xmath349 , there is nothing to the right of the second vertical bar . ) from adversaries of the form @xmath350 and @xmath351 this supports construction of @xmath352 and all co - ordinate permutations .",
    "we illustrate this with the following diagram which makes some assumptions about the locations of the @xmath255s in each @xmath336 ; nonetheless it should be clear that the method works in general since there is at least one @xmath255 in @xmath336 . @xmath353",
    "applying @xmath244 it is clear that the full adversary may be built from , for example , @xmath354 and @xmath355 which demonstrates @xmath356-collapsibility .",
    "( case 2 : @xmath357 . ) here we consider what is @xmath358 . if this is @xmath255 then we can clearly reduce to the previous case .",
    "if it is @xmath254 then @xmath359 @xmath360 is a generalised hubie - pol in both @xmath361 and @xmath362 , and we are collapsible .",
    "this is because the composed function on these listed tuples gives @xmath255 and @xmath254 , respectively , thus permitting to build adversaries of the form @xmath363 and @xmath364 from adversaries of the form @xmath365 and @xmath366 @xmath367 ( case 1 ) .",
    "thus , we may assume @xmath368 .",
    "using the fact that @xmath369 @xmath370 is a generalised hubie - pol in @xmath371 we can build ( using @xmath244 and rather like in case 1 ) , from adversaries of the form @xmath372 and @xmath373 , adversaries of the form @xmath374 , and all co - ordinate permutations of this .",
    "similarly , using the fact that @xmath359 @xmath360 is a generalised hubie - pol in @xmath375 , we can build adversaries of the form @xmath376 .",
    "( case 2a : @xmath377 . ) consider again @xmath378 where each @xmath379 and @xmath380 contains at least one @xmath39 . by amalgamating classes",
    "@xmath303 and @xmath304 we obtain some function with the form @xmath381 where each @xmath382 is in @xmath383 and contains at least one @xmath39 . from adversaries of the form @xmath384 and @xmath372",
    "we can build @xmath385 , and all co - ordinate permutations .",
    "we begin , pedagogically preferring to view some @xmath272s as @xmath253s , @xmath386 and follow with bottom parts of the form @xmath387 this now supports bootstrapping of the full adversary from adversaries of the form @xmath388 , @xmath389 @xmath390 and @xmath391 .",
    "( case 2b : @xmath392 . ) here , from adversaries of the form @xmath384 and @xmath372 we can directly build @xmath393 .",
    "@xmath394 this now supports bootstrapping of the full adversary , similarly as in case 2a ( but slightly simpler ) .",
    "let @xmath395 and @xmath396 be words over @xmath397 .",
    "let @xmath398 if @xmath399 and @xmath255 otherwise .",
    "let @xmath400 if @xmath401 and @xmath254 otherwise .",
    "this corresponds with considering @xmath254 as @xmath402 and @xmath255 as @xmath403 .",
    "define @xmath404 and @xmath405 .",
    "we are most interested in words    * @xmath406 , such that @xmath407 , and for no @xmath408 and @xmath409 over @xmath187 do we have @xmath410 with @xmath411 so that @xmath412 . * @xmath413 , such that @xmath414 , and for no @xmath415 and @xmath409 over @xmath187 do we have @xmath416 with @xmath417 so that @xmath418 .",
    "such @xmath317 and @xmath419 are in a certain sense _ maximal _ , but the sense of maximality is dual in case b from case a. @xmath317 is maximal under inclusion for the number of @xmath255s it contains and @xmath419 is maximal under inclusion for the number of @xmath254s it contains . in the asymmetric case that we consider here w.l.o.g .",
    ", only case a above will be salient , but we introduce both now for pedagogical reasons .",
    "[ lem : r4-asymmetric ] let @xmath21 be so that class @xmath124 is a singleton and there exists @xmath325 so that @xmath326",
    ". then any algebra over @xmath272 containing @xmath21 and @xmath244 is either collapsible or has a @xmath258-ary term operation @xmath420 so that @xmath421    recall @xmath422 so that @xmath326 .",
    "note that if exists @xmath409 over @xmath187 so that @xmath423 then we have that @xmath424 is a generalised hubie - pol in both @xmath425 and @xmath426 , where we build widehat from overline by doubling each entry where it sits , and we become collapsible .",
    "it therefore follows that there must exist distinct @xmath427 , @xmath428 , @xmath429 and @xmath430 ( all over @xmath187 ) so that @xmath431 , @xmath432 but @xmath433 . by collapsing co - ordinates we get @xmath334 so that @xmath434 the result follows by permuting co - ordinates , possibly in new combination through @xmath244 and the second co - ordinate .",
    "[ prop : symmetric ] let @xmath21 be so that neither class @xmath124 nor class @xmath303 is a singleton and so that for every @xmath325 we have @xmath435 . then",
    ", either @xmath21 generates a binary idempotent operation with @xmath327 and @xmath328 or a binary idempotent operation with @xmath436 and @xmath437 , or any algebra on @xmath272 containing @xmath21 and @xmath244 is collapsible .",
    "let us consider the general form of @xmath21 , @xmath438 where the @xmath65s , @xmath330s , @xmath331s and @xmath439s are from @xmath187 and we can assume that each @xmath440 and @xmath441 contain at least one @xmath254 and @xmath442 and @xmath443 @xmath444 contains at least one @xmath255 .",
    "as in the previous proof we can make an assumption that each @xmath445 , with @xmath254 substituted for @xmath39 , still maps under @xmath21 to @xmath255 .",
    "similarly , each @xmath446 , with @xmath255 substituted for @xmath39 , still maps under @xmath21 to @xmath254 .",
    "since for each @xmath325 we have @xmath435 we can deduce that from the adversaries @xmath447 and @xmath448 @xmath449 , adversaries of the form @xmath450 , and all co - ordinate permutations of this .",
    "we now make some case distinctions based on whether @xmath451 @xmath452 or @xmath254 and @xmath453 or @xmath255 ( note that possibly class @xmath304 is empty ) .",
    "however , the method for building the full adversary from certain collapsings proceeds very similarly to cases 2a and 2b from proposition  [ prop : symmetric ] .",
    "we give an example below as to how , in the case @xmath454 , we mimic case 2a from proposition  [ prop : asymmetric ] to derive a function from this that builds , from adversaries of the form @xmath455 and @xmath456 , we can build @xmath457 . for pedagogic reasons we prefer to view some @xmath272s as @xmath253s , @xmath458    [ lem : r4-symmetric ] let @xmath21 be so that neither class @xmath124 nor class @xmath303 is a singleton and so that for every @xmath325 we have @xmath459 . any algebra over @xmath272 containing @xmath21",
    "is either collapsible or contains a @xmath258-ary operations @xmath460 and @xmath461 with properties @xmath462    the proof proceeds exactly as in lemma  [ lem : r4-asymmetric ] .",
    "an important special case of the previous lemma , which is satisfied by chen s @xmath463 is as follows .",
    "* zhuk condition*. @xmath0 has idempotent term operations , binary @xmath23 and ternary operation @xmath464 , so that either @xmath465      we assume that all relations are defined on the finite set @xmath466",
    ". a relation @xmath155 is called _ essential _ if it can not be represented as a conjunction of relations with smaller arities .",
    "a tuple @xmath467 is called _ essential for a relation @xmath155 _ if @xmath468 and for every @xmath469 there exists @xmath470 such that @xmath471 let us define a relation @xmath472 for every relation @xmath473 .",
    "put @xmath474 and let @xmath475    [ sushnabor ] a relation @xmath155 is essential iff there exists an essential tuple for @xmath155 .",
    "( forwards . ) by contraposition , if @xmath155 is not essential , then @xmath472 is equivalent to @xmath155 , and there can not be an essential tuple .",
    "( backwards . ) an essential tuple witnesses that a relation is essential .",
    "[ lem : dmitriy - micro ] suppose @xmath476 is an essential tuple for @xmath155",
    ". then @xmath155 is not preserved by @xmath244 .",
    "since @xmath476 is an essential tuple , @xmath477 and @xmath478 @xmath479 are in @xmath155 for some @xmath480 and @xmath481 . but",
    "applying @xmath244 now gives the contradiction .",
    "for a tuple @xmath482 , we denote its @xmath85th co - ordinate by @xmath483 . for @xmath484",
    ", we define the arity @xmath485 idempotent operation @xmath486 as follows @xmath487 we define @xmath488 similarly with @xmath254 and @xmath255 swapped .",
    "these functions are very similar to partial near - unanimity functions .",
    "[ lem : dmitriy ] suppose @xmath0 is a gap algebra , that is not @xmath241-projective , so that @xmath0 satisfies the zhuk condition .",
    "then either    * any relation @xmath489 of arity @xmath490 is preserved by @xmath486 , * or * * any relation @xmath489 of arity @xmath490 is preserved by @xmath488 .",
    "suppose that the zhuk condition is in the first regime and has idempotent term operations , binary @xmath23 and ternary operation @xmath464 , so that @xmath491 we prove this statement for a fixed @xmath172 by induction on @xmath492 . for @xmath493 we just need to check that @xmath494 preserves the unary relations @xmath253 and @xmath270 .",
    "assume that @xmath155 is not preserved by @xmath495 , then there exist tuples @xmath496 such that @xmath497 .",
    "we consider a matrix whose columns are @xmath498 .",
    "let the rows of this matrix be @xmath499 .    by the inductive assumption every @xmath500 from the definition of @xmath501",
    "is preserved by @xmath495 , which means that @xmath501 is preserved by @xmath495 , which means that @xmath502 and @xmath503 is an essential tuple for @xmath155 .",
    "we consider two cases .",
    "first , assume that @xmath503 does nt contain @xmath39 .",
    "then it follows from the definition that every @xmath504 contains at most one element that differs from @xmath505 . since @xmath506",
    ", there exists @xmath507 such that @xmath508 .",
    "this contradicts the fact that @xmath502 .",
    "second , assume that @xmath503 contains @xmath39 .",
    "then by lemma  [ lem : dmitriy - micro ] , @xmath503 contains exactly one @xmath39 .",
    "we assume that @xmath509 .",
    "it follows from the definition of @xmath495 that @xmath504 contains at most one element that differs from @xmath505 for every @xmath510 .",
    "hence , since @xmath506 , for some @xmath511 we have @xmath512 for every @xmath510 . since @xmath513 , we have one of three subcases .",
    "first subcase , @xmath514 for some @xmath87 .",
    "we need one of the properties @xmath515 and we can see that the functions from lemma  [ lem : fun ] or the definition of the zhuk condition suffice , which contradicts our assumptions .",
    "second subcase , @xmath516 for some @xmath517 .",
    "we need the property @xmath518 can check that a function from lemma  [ lem : fun ] suffices , which contradicts our assumptions .",
    "third subcase , @xmath519 and @xmath520 for @xmath521 , @xmath522 .",
    "we need the property @xmath523 and we can check that the @xmath464 from the zhuk condition suffices , which contradicts our assumptions .",
    "this completes the proof .",
    "[ cor : dmitriy ] suppose @xmath0 is a gap algebra , that is not @xmath241-projective so that @xmath0 satisfies the zhuk condition . then , for every finite subset of @xmath3 of inv@xmath4 , pol@xmath5 is collapsible .",
    "@xmath486 is a hubie - pol in @xmath306 and @xmath488 is a hubie - pol in @xmath307 .    for @xmath524",
    ", we define the arity @xmath525 idempotent operation @xmath526 as follows @xmath527 we define @xmath528 similarly with @xmath254 and @xmath255 swapped .",
    "[ lem : dmitriy - long ] suppose @xmath0 is a gap algebra that is not @xmath241-projective .",
    "then either    * any relation @xmath489 of arity @xmath529 is preserved by @xmath526 , * or * * any relation @xmath489 of arity @xmath529 is preserved by @xmath528 .",
    "suppose that we are either in the asymmetric case with class @xmath124 singleton and there exists @xmath325 so that @xmath326 * or * we are in the symmetric case and we have an idempotent term operation @xmath23 mapping @xmath327 and @xmath328 .",
    "we prove this statement for a fixed @xmath172 by induction on @xmath492 .",
    "for @xmath493 we just need to check that @xmath530 preserves the unary relations @xmath531 and @xmath532 .",
    "assume that @xmath155 is not preserved by @xmath495 , then there exist tuples @xmath533 such that @xmath534 .",
    "we consider a matrix whose columns are @xmath535 .",
    "let the rows of this matrix be @xmath499 .    by the inductive assumption every @xmath500 from the definition of @xmath501",
    "is preserved by @xmath536 , which means that @xmath501 is preserved by @xmath536 , which means that @xmath502 and @xmath503 is an essential tuple for @xmath155 .",
    "we consider two cases .",
    "first , assume that @xmath503 does nt contain @xmath39 .",
    "then it follows from the definition that every @xmath504 contains at most one element that differs from @xmath505 .",
    "since @xmath537 , there exists @xmath507 such that @xmath508 .",
    "this contradicts the fact that @xmath502 .",
    "second , assume that @xmath503 contains @xmath39 .",
    "then by lemma  [ lem : dmitriy - micro ] , @xmath503 contains exactly one @xmath39 .",
    "we assume that @xmath509 .",
    "it follows from the definition of @xmath536 that @xmath504 contains at most one element that differs from @xmath505 for every @xmath510 .",
    "hence , since @xmath537 , for some @xmath538 we have @xmath512 for every @xmath510 . since @xmath539 , we have one of four subcases .",
    "first subcase , @xmath514 for some @xmath87 .",
    "we need one of the properties @xmath540 and we can see that the functions from lemma  [ lem : fun ] , or proposition  [ prop : asymmetric ] or proposition  [ prop : symmetric ] , suffice which contradicts our assumptions .",
    "second subcase , @xmath516 for some @xmath517 .",
    "we need the property @xmath518 can check that a function from lemma  [ lem : fun ] suffices , which contradicts our assumptions .    for case 3 , @xmath519 and @xmath520 for some @xmath521 , @xmath522 ( possibly @xmath541 ) .",
    "we now split into two subsubcases : either @xmath542 and we need the property @xmath543 here we can check that @xmath420 , from proposition  [ prop : asymmetric ] or proposition  [ prop : symmetric ] , with co - ordinates @xmath255 and @xmath39 permuted , suffices , which contradicts our assumptions .",
    "or we have @xmath544 and we need the property @xmath545 for this @xmath546 suffices where @xmath311 comes from lemma  [ lem : fun ] and @xmath23 is as before in this proof ( proposition  [ prop : asymmetric ] and proposition  [ prop : symmetric ] ) .",
    "@xmath547 this completes the proof .",
    "let us recall the main result of this appendix .    * theorem  [ cor : dmitriy - long]*. suppose @xmath0 is a gap algebra that is not @xmath241-projective .",
    "then , for every finite subset of @xmath3 of inv@xmath4 , pol@xmath5 is collapsible .",
    "@xmath526 is a hubie - pol in @xmath306 and @xmath528 is a hubie - pol in @xmath307 .",
    "let us recall that this appendix is in pursuit of the following result .",
    "* theorem  [ thm : catarina]*. suppose @xmath0 is a @xmath40-element algebra that is not egp , containing a @xmath39-element g - set as a subalgebra , that is not @xmath241-projective .",
    "then , pol@xmath5 is collapsible .",
    "recall @xmath0 is an idempotent clone over domain @xmath280 , without loss of generality , having a subalgebra induced by @xmath187 that is a g - set .",
    "further we can assume that @xmath0 is neither : @xmath282-projective , @xmath548-projective nor @xmath549-projective . from this last assumption ,",
    "by collapsing co - ordinates of @xmath258-ary operations , we arrive at the following .",
    "[ 4hypothesis ] @xmath0 has three ternary operations @xmath550 all of which are projections to the first component on @xmath187 and for which : @xmath551    our proof proceeds by a lengthy case analysis .",
    "we first look at the cases when @xmath0 does not have a @xmath281-set as a homomorphic image ( otherwise @xmath0 has egp ) .",
    "there are 3 possible congruences that originate from the homomorphic image , they are @xmath552 , @xmath553 and @xmath554",
    ". we will consider the case where no such congruences exist and the case when even if they exist they do not yield a @xmath281-set .",
    "we start by noting that since @xmath0 has ternary operations as mentioned in lemma [ 4hypothesis ] some congruences can be discarded :    @xmath553 is a congruence of @xmath0 if @xmath555 and @xmath556 , and @xmath552 is only a congruence if @xmath557 and @xmath558 .",
    "let @xmath155 denote the congruence @xmath553 .",
    "let @xmath54 be any operation of @xmath13 that acts as the first projection on @xmath187 .",
    "we have @xmath559 @xmath560 @xmath561 which implies that @xmath562 and @xmath563 .",
    "it follows , form the assumptions in lemma [ 4hypothesis ] that we must have @xmath555 , @xmath556 , and @xmath564 or @xmath565 .",
    "now let @xmath566 denote the congruence @xmath552 .",
    "we have @xmath567 @xmath568 @xmath569 which implies that @xmath570 and @xmath571 .",
    "it follows , form the assumptions in lemma [ 4hypothesis ] that , for @xmath566 to be a congruence , we must have @xmath557 , @xmath572 , and @xmath573 or @xmath574 .",
    "it is then clear that @xmath553 and @xmath552 can not both be congruences of @xmath0 simultaneously . from the operations @xmath575 and @xmath492 of @xmath0 we can not discard the congruence @xmath554 without considering different operations .",
    "we now look at the two possible cases : @xmath0 has no homomorphic images ( and so no congruences ) and @xmath0 has a homomorphic image but it is not a @xmath281-set .",
    "since we do not want @xmath554 to be a congruence of @xmath0 , there must exist an operation @xmath279 on @xmath0 such that @xmath576 , @xmath577 and @xmath279 is a projection on @xmath187 .",
    "we consider 5 cases , depending on the possible projection , we rearrange @xmath279 such that it always behave as the first projection on @xmath187 .",
    "@xmath576 , @xmath578 , and @xmath279 is the first projection on @xmath187    we aim to prove that @xmath279 is @xmath258-collapsible .",
    "we sometimes identify @xmath87 with @xmath579 when it is will not cause great confusion .",
    "note that our derivation is unlikely to be optimal since @xmath580 whereas we use just @xmath581 below .",
    "let @xmath582 . from adversaries that are co - ordinate permutations of @xmath583 , @xmath584 and",
    "@xmath585 one can build adversaries that are co - ordinate permutations of the form @xmath586 .",
    "first perform @xmath587 then @xmath588 and @xmath589 now repeat this process @xmath590 times .",
    "let @xmath582 . from adversaries that are co - ordinate permutations of the form @xmath586 and @xmath584 one can build adversaries that are co - ordinate permutations of the form @xmath591 .",
    "@xmath592    let @xmath582 . from adversaries that are co - ordinate permutations of the form @xmath591 and @xmath586",
    "one can build the full adversarie @xmath593 .",
    "@xmath594      @xmath576 , @xmath595 , and @xmath279 is the first projection on @xmath187    1 .",
    "we assume first that @xmath596 .",
    "+ then we have the following operations on @xmath0 : + the @xmath597-ary operation @xmath598 defined as @xmath599 is a generalized hubie - pol and on the tuple @xmath600 it returns @xmath254 .",
    "+ when applying @xmath598 to the tuple above , recalling that @xmath21 , @xmath18 and @xmath279 are idempotent , we obtain @xmath601 now let us check that the operation is a generalized hubie - pol : we have @xmath602 @xmath603 , and @xmath604 , it follows that @xmath605 and we obtain the same result when @xmath598 is applied to all @xmath272s and one 0 , and the @xmath254 appears in coordinates congruent with @xmath606 or @xmath40 modulo @xmath607 ; we have @xmath608 , @xmath609 , and @xmath610 it follows that when @xmath598 is applied to all @xmath272 and one @xmath254 , @xmath255 or @xmath39 in coordinates congruent with @xmath611 or @xmath612 modulo @xmath607 , respectively , the result is @xmath272 ; now @xmath613 , and @xmath614 , thus when @xmath598 is applied to all @xmath272 and one @xmath254 in coordinates congruent with @xmath615 or @xmath616 modulo @xmath607 the result is @xmath272 ; we have @xmath617 , @xmath618 and @xmath619 , hence when @xmath598 is applied to all @xmath272 and one @xmath255 in coordinates congruent with @xmath620 or @xmath621 modulo @xmath607 the result is @xmath272 ; finally @xmath622 , @xmath623 , and @xmath624 , thus when @xmath598 is applied to all @xmath272 and one @xmath39 in coordinates congruent with @xmath625 or @xmath254 modulo @xmath607 the result is @xmath272 .",
    "this proves the claim .",
    "+ the @xmath597-ary operation @xmath626 defined by @xmath627 is a generalized hubie - pol on the elements @xmath628 and on this tuple it returns @xmath39 . + when applying @xmath626 to the tuple above , recalling that @xmath21 , @xmath18 and @xmath279 are idempotent , we obtain @xmath629 now let us check that the operation is a generalized hubie - pol : we have @xmath602 @xmath630 , and @xmath631 , it follows that @xmath632 and we obtain the same result when @xmath626 is applied to all @xmath272s and one 0 , and the @xmath254 appears in coordinates congruent with @xmath633 or @xmath612 modulo @xmath607 ; we have @xmath634 , @xmath618 , and @xmath635 it follows that when @xmath626 is applied to all @xmath272 and one @xmath255 in coordinates congruent with @xmath636 or @xmath621 modulo @xmath607 the result is @xmath272 ; finally @xmath622 , @xmath623 , and @xmath624 , thus when @xmath626 is applied to all @xmath272 and one @xmath39 in coordinates congruent with @xmath625 or @xmath254 modulo @xmath607 the result is @xmath272 .",
    "this proves the claim .",
    "+ the @xmath637-ary operation @xmath638 defined by @xmath639 is a generalized hubie - pol on the elements @xmath640 , returning @xmath255 on this tuple . + we start by noting that if @xmath641 then the operation @xmath642 satisfies @xmath643 and @xmath644 , so we are in case 1 ; if @xmath645 then the operation @xmath646 is a hubie - pol on @xmath39 .",
    "indeed we have @xmath647 , and @xmath624 .",
    "+ so we assume now that @xmath648 . + when applying @xmath638 to the tuple @xmath649 , recalling that @xmath21 , @xmath18 and @xmath279 are idempotent , we obtain @xmath650 now let us check that the operation is a generalized hubie - pol : we have @xmath651 , @xmath652 , and @xmath653 , so when applying @xmath638 is applied to all @xmath272s and one @xmath254 , and the @xmath254 appears in coordinates congruent with @xmath654 or @xmath40 modulo @xmath655 the result is @xmath272 ; then @xmath656 , it follows then , as above , that when applying @xmath638 to all @xmath272s and one @xmath255 , and the @xmath255 appears in coordinates congruent with @xmath611 or @xmath612 modulo @xmath655 the result is @xmath272 ; we also have @xmath657 , @xmath658 , and @xmath659 , hence when @xmath638 is applied to @xmath272 in all coordinates except one and that one coordinate is either a @xmath254 if the coordinate is congruent with @xmath660 or @xmath661 , a @xmath255 if the coordinate is congruent with @xmath616 or @xmath662 , or a @xmath39 if the coordinate is congruent with @xmath254 modulo @xmath655 then the result is @xmath272 .",
    "this proves the claim . 2 .",
    "if @xmath555 then defining an operation @xmath663 we have that @xmath334 is the first projection on @xmath187 and it satisfies @xmath664 , and we are back in the subcases considered above .",
    "3 .   if @xmath665 then by applying a permutation to the elements @xmath254 and @xmath255 in all operations of @xmath0 we obtain @xmath664 , @xmath666 and @xmath667 , with @xmath668 the first projection on @xmath187 .",
    "it follows that the operation @xmath669 is the first projection on @xmath187 and it satisfies @xmath670 and @xmath671 , so we are back in case 1 considered above .",
    "4 .   if @xmath672 , then we consider the possibilities for the operations @xmath18 and @xmath492 . if @xmath673 then we can just define an operation @xmath674 . if @xmath565 ( or @xmath675 ) then the operation @xmath676 ( or @xmath677 ) acts as the first projection on @xmath187 and it satisfies @xmath678 . if @xmath564 then we set @xmath674 and are back in the subcase considered above . if @xmath558 we have the possibility that @xmath679 is a congruence of @xmath0 . to break this congruence we must have an operation @xmath331 in @xmath0 that satisfies @xmath680 , @xmath681 , and is a projection on @xmath187 + if @xmath331 is the first or second projection on @xmath187 , we define and operation @xmath682 that is the first projection on @xmath187 and it satisfies @xmath664 . if @xmath331 is the third or fourth projection on @xmath187 we define @xmath683 , this operation is the first projection on @xmath187 and it satisfies @xmath684 .",
    "+ if @xmath331 is the fifth projection of @xmath187 then the operation @xmath685 is the first projection on @xmath187 and it satisfies @xmath686 . in all cases we reduced the problem to an already considered case .",
    "@xmath687 and @xmath577 and @xmath279 is the first projection on @xmath187 .    1 .   if @xmath596 then the operation @xmath688 is the first projection on @xmath187 and it satisfies @xmath670 and @xmath689 .",
    "if @xmath690 then permuting @xmath254 and @xmath255 in all operations of @xmath0 we obtain operations that act as the first projection on @xmath187 and satisfy @xmath664 , @xmath691 and @xmath692 .",
    "then defining @xmath693 we know it acts as the first projection on @xmath187 and it satisfies @xmath670 and @xmath694 .",
    "if @xmath557 then the operation @xmath695 satisfies @xmath678 so we are back in the case considered just above .",
    "if @xmath555 then we look at the possibilities for the operation @xmath18 .",
    "if @xmath696 or @xmath574 then we use @xmath18 like we used @xmath21 above , if @xmath573 ( or @xmath558 ) then the operation @xmath697 acts as the first projection on @xmath187 and it satisfies @xmath698 .",
    "this case was already considered above .",
    "finally , if @xmath556 we need to have another operation in @xmath0 to break the congruence @xmath553 , let it be @xmath20 .",
    "this operation satisfies @xmath699 , @xmath700 and acts as a projection on @xmath187 .",
    "if @xmath20 is the first or second projection on @xmath187 then the operation @xmath701 is the firts projection on @xmath187 and it satisfies @xmath678 .",
    "if @xmath20 acts as the third or fourth projection on @xmath187 then the operation @xmath702 acts as the first projection on @xmath187 and it satisfies @xmath703 . if @xmath20 acts as the fifth projection on @xmath187 then @xmath704 acts as the first projection on @xmath187 and it satisfies @xmath705 .",
    "all these cases have already been considered .",
    "@xmath687 and @xmath706    1 .",
    "if @xmath596 then the operation @xmath707 is the first projection on @xmath187 and it satisfies @xmath670 and @xmath689 .",
    "2 .   if @xmath690 then permuting @xmath254 and @xmath255 in all operations of @xmath0 we obtain operations that act as the first projection on @xmath187 and satisfy @xmath664 , @xmath691 and @xmath708 .",
    "then the operation @xmath709 acts as the first projection on @xmath187 , it satisfies @xmath670 and @xmath694 , so we are back in case 1 .",
    "if @xmath557 or @xmath555 then this can be dealt with just like in case 3 .",
    "@xmath576 and @xmath706    1 .   if @xmath596 then the operation @xmath710 is the first projection on @xmath187 and it satisfies @xmath670 and @xmath689 .",
    "2 .   if @xmath690 then permuting @xmath254 and @xmath255 in all operations of @xmath0 we obtain operations that act as the first projection on @xmath187 and satisfy @xmath664 , @xmath666 and @xmath708 . then defining @xmath709 we know it acts as the first projection on @xmath187 and it satisfies @xmath711 and @xmath694 , and we are back in case 3 .",
    "if @xmath557 or @xmath555 then this can be dealt with just like in case 2 .",
    "@xmath712 and @xmath713    1 .   if @xmath556 ( or @xmath565 ) the operation @xmath714 is the first projection on @xmath187 and it satisfies @xmath715 and @xmath716 ; 2 .   if @xmath717 ( or @xmath558 ) the operation @xmath718 is the first projection on @xmath187 and it satisfies @xmath719 and @xmath689 ; 3 .",
    "we now assume that @xmath696 or @xmath574 .",
    "we start by noting that we also have @xmath673 or @xmath564 , so in particular @xmath492 satisfies @xmath720",
    ". then we can obtain generalized hubie - polymorphisms .",
    "first notice that : + @xmath721 + let us assume for a contradiction that @xmath722 , then the operation + @xmath723 is a hubie - pol on @xmath39 .",
    "indeed we have @xmath724 or @xmath725 , and , by the assumption , @xmath726 and @xmath727 , @xmath728 , as well as @xmath729 , and @xmath720 .",
    "+ the @xmath597-ary operation @xmath598 defined as @xmath730 is a generalized hubie - pol on the element @xmath731 if @xmath696 or @xmath732 if we assume that @xmath574 , returning @xmath254 on this tuple . + when applying @xmath598 to the tuple above , recalling that @xmath18 , @xmath492 and @xmath279 are idempotent , we obtain @xmath733 @xmath734 now let us check that the operation is a generalized hubie - pol : we have @xmath735 @xmath736 , @xmath737 , @xmath720 , and @xmath738 ( see claim above ) .",
    "this proves the claim .",
    "+ the @xmath597-ary operation @xmath626 defined as @xmath739 s a generalized hubie - pol on the elements @xmath740 and on this tuple it returns @xmath39 .",
    "+ when applying @xmath626 to the tuple above , recalling that @xmath18 , @xmath492 and @xmath279 are idempotent , we obtain @xmath741 + now let us check that the operation is a generalized hubie - pol : we have @xmath742 or @xmath743 and @xmath744 .",
    "we also have @xmath720 and @xmath745 , this proves the claim .",
    "+ the @xmath597-ary operation @xmath638 defined as @xmath746 is a generalized hubie - pol on the elements @xmath747 if @xmath673 , or on the element @xmath748 if we assume that @xmath564 , returning @xmath255 on this tuple .",
    "+ when applying @xmath638 to the tuple above , recalling that @xmath18 , @xmath492 and @xmath279 are idempotent , we obtain @xmath749 @xmath750 now let us check that the operation is a generalized hubie - pol : we have @xmath751 @xmath752 , @xmath753 , @xmath729 , and @xmath738 ( see claim above ) .",
    "this proves the claim .",
    "if @xmath554 is the kernel of a congruence then there must exist an operation @xmath331 on the two element algebra with domain @xmath754 that acts as either majority , minority , meet , or join .",
    "we must get similar operations if @xmath755 or @xmath553 are congruences .",
    "suppose that @xmath756 is an operation on the two element domain @xmath757 that acts as either majority , minority , or semilattice .",
    "when extending @xmath756 to @xmath0 we obtain that @xmath758if @xmath756 is a majority , @xmath759 is @xmath756 is a minority , @xmath760 or @xmath761 if @xmath756 is a semilattice operation .",
    "all these options contradict the fact that @xmath762 is a @xmath281-set , hence @xmath755 , and in a similar way @xmath553 , can not be congruences of @xmath0 .",
    "we look at the different possibilities for the operation @xmath331 :      then extending @xmath331 to @xmath0 we must have @xmath763 and @xmath764 for any @xmath765 and @xmath331 acts as a projection on @xmath187 , we assume wlog that it is the first projection .    then , the @xmath616-ary operation @xmath766 is a hubie - pol on @xmath307 if @xmath596 or @xmath555 , and is a hubie - pol on @xmath306 if @xmath690 or @xmath557 .",
    "then extending @xmath331 to @xmath0 we must have @xmath767 and @xmath768 for any @xmath765 and @xmath331 acts as a projection on @xmath187 .    then ,",
    "as above , the @xmath616-ary operation @xmath766 is a hubie - pol on @xmath307 if @xmath596 or @xmath555 , and is a hubie - pol on @xmath306 if @xmath690 or @xmath557 .      from @xmath769 ,",
    "extending @xmath331 to @xmath0 we obtain @xmath770 for any @xmath771 and @xmath331 is , wlog , the first projection on @xmath187 .",
    "then the @xmath612-ary operation @xmath772 is a hubie - pol on @xmath307 if @xmath596 or @xmath555 , and is a hubie - pol on @xmath306 if @xmath690 or @xmath557 .      from @xmath773 , extending @xmath331 to @xmath0 we obtain @xmath774 for any @xmath771 .    1 .",
    "if @xmath775 then the @xmath776-ary operation @xmath777 is a hubie - pol on @xmath778 whenever @xmath596 , @xmath690 , or @xmath555 , and @xmath673 or @xmath564 .",
    "note that if @xmath690 then , by permuting @xmath254s and @xmath255s is all operations of @xmath0 we obtain @xmath596 , and this permutation does not affect @xmath331 .",
    "+ assume now that we have @xmath557 . if @xmath565 then the operation @xmath779 is the first projection on @xmath187 and it satisfies @xmath678 so we are back in a previous case . if @xmath558 then we must also have an operation in @xmath0 that breaks the congruence @xmath755 .",
    "we have seen in part 4 of case 2 considered above that we can then reduce this case to another one previously considered .",
    "2 .   if @xmath780 then the @xmath776-ary operation @xmath781 is a hubie - pol on @xmath778 whenever @xmath596 , @xmath690 , or @xmath557 , and @xmath696 or @xmath556 .",
    "note that if @xmath596 then , by permuting @xmath254s and @xmath255s is all operations of @xmath0 we obtain @xmath690 , and this permutation does not affect @xmath331 .",
    "+ assume now that we have @xmath555 . if @xmath717 then the operation @xmath782 is the first projection on @xmath187 and it satisfies @xmath664 so we are back in a previous case . if @xmath783 then we must also have an operation that breaks the congruence @xmath553 .",
    "we have seen in part 4 of case 3 considered above that we can then reduce this case to another one previously considered .",
    "if @xmath784 then @xmath331 is a hubie - pol on @xmath39 .",
    "let @xmath0 be an idempotent algebra with egp so that either :    * exists @xmath136 strict subsets of @xmath13 so that @xmath137 and @xmath248 and all operations of @xmath0 are @xmath247-projective ; or * exists @xmath785 strict subsets of @xmath13 so that @xmath137 , @xmath786 and @xmath787 and all operations of @xmath0 are @xmath247-projective as well as @xmath788-projective .        in the first case ,",
    "where @xmath248 , we can see that the proof of theorem  [ thm : hard ] gives a reduction from the complement of ( monotone ) _ * quantified * @xmath40-not - all - equal - satisfiability _ ( co-3qnaesat ) to qcsp@xmath2 , where the universal variables of 3qnaesat become existential variables in qcsp@xmath2 exactly as the existential variables became universal .",
    "the key property @xmath248 ensures the existential variables of qcsp@xmath2 faithfully represent the universal variables within 3qnaesat .",
    "it is well known co-3qnaesat is pspace - complete @xcite and the result follows .    for the second case",
    ", we may assume that the first case does not apply , neither @xmath789 nor @xmath790 is empty .",
    "suppose further that @xmath790 is neither a subset of @xmath237 nor a subset of @xmath238 .",
    "further note that the domain of @xmath790 is definable by @xmath791 ( where @xmath792 is defined with respect to @xmath793 just as @xmath794 was to @xmath136 ) .",
    "now we may again infer that the proof of theorem  [ thm : hard ] gives a reduction from co-3qnaesat to qcsp@xmath2 where we use @xmath156 in the similar fashion but restrict existential variables from qcsp@xmath2 , come from universal variables in co-3qnaesat , to lie in the set @xmath795 . to see this , it is enough to observe that @xmath796 and @xmath797 are non - empty , while recalling the obvious @xmath787 .",
    "the remaining situations involve , w.l.o.g . , that @xmath798 ( but disjoint from @xmath237 ) , and similarly @xmath799 ( but disjoint from @xmath800 ) . the sets @xmath237 and @xmath800 need not be definable _ per se _ , but they are as good as definable .",
    "suppose : either both @xmath801 and @xmath802 are non - empty ; or both @xmath803 and @xmath804 are non - empty , then we may play a trick similar to the previous paragraph .",
    "we address the case in which both @xmath801 and @xmath802 are non - empty .",
    "note that @xmath805 .",
    "thus , if we could define @xmath237 we could play exactly the trick of the previous paragraph .",
    "we can instead pretend that @xmath806 defines @xmath237 because on some evaluations of @xmath65 it does indeed ( and for the other evaluations we can anyway choose @xmath807 , indeed in @xmath789 ) .",
    "the final situation has , together with @xmath798 ( but disjoint from @xmath237 ) and similarly @xmath799 ( but disjoint from @xmath800 ) , that either @xmath808 or @xmath809 and either @xmath810 or @xmath811 .",
    "this gives four possibilities : 1 . ) @xmath812 , which is not possible ; 2 . )",
    "@xmath813 ( i.e. @xmath814 , which is not possible due to its consequence @xmath815 , due to @xmath816 being emtpy because @xmath799 ) ; 3 . )",
    "@xmath817 , which is not possible ; and 4 . ) @xmath808 and @xmath811 .",
    "the fourth situation above is possible and entails @xmath818 which is only possible if @xmath819 .",
    "let @xmath21 be an operation of @xmath0 , so that @xmath21 is both @xmath241-projective and @xmath820-projective .",
    "since @xmath789 and @xmath790 are both non - empty and disjoint , it follows that the @xmath85 so that @xmath21 is @xmath241-projective to the @xmath85th co - ordinate coincides with the @xmath87 so that @xmath21 is @xmath820-projective to the @xmath87th co - ordinate .",
    "now it is clear that the relation @xmath821 is in @xmath1 .",
    "we are now in a position to give a reduction from co-3qnaesat to qcsp@xmath2 , slightly different from those before .",
    "now , we will relativise the existential variables of qcsp@xmath2 to @xmath822 and for each universal variable @xmath331 we will augment a new @xmath823 together with the quantification @xmath824 .",
    "the relativising of the existential variables of qcsp@xmath2 needs no further comment . for the universal variables ,",
    "note first that both @xmath825 and @xmath826 are non - empty and disjoint from @xmath827 which contains both @xmath789 and @xmath790 .",
    "indeed , @xmath825 , @xmath826 and @xmath827 partition the domain .",
    "now      finally , for all @xmath823 , there exists @xmath331 so that @xmath829 and @xmath331 is in one among @xmath789 or @xmath790 .",
    "thus , @xmath789 and @xmath790 play the role of @xmath254 and @xmath255 , inherited from 3qnaesat , and the result follows .",
    "* exists @xmath136 strict subsets of @xmath13 so that @xmath137 and @xmath248 and all operations of @xmath0 are @xmath247-projective ; or * exists @xmath785 strict subsets of @xmath13 so that @xmath137 , @xmath786 and @xmath787 and all operations of @xmath0 are @xmath247-projective as well as @xmath788-projective ."
  ],
  "abstract_text": [
    "<S> let @xmath0 be an idempotent algebra on a finite domain . </S>",
    "<S> we combine results of chen @xcite and zhuk @xcite to argue that if @xmath1 satisfies the polynomially generated powers property ( pgp ) , then qcsp@xmath2 is in np . </S>",
    "<S> we then use the result of zhuk to prove a converse , that if @xmath1 satisfies the exponentially generated powers property ( egp ) , then qcsp@xmath2 is co - np - hard . since zhuk proved that only pgp and egp are possible , we derive a full dichotomy for the qcsp , justifying the moral correctness of what we term the chen conjecture ( see @xcite ) .    </S>",
    "<S> we examine in closer detail the situation for domains of size three . over any finite domain , </S>",
    "<S> the only type of pgp that can occur is switchability . </S>",
    "<S> switchability was introduced by chen in @xcite as a generalisation of the already - known collapsibility @xcite . for three - element domain algebras </S>",
    "<S> @xmath0 that are switchable , we prove that for every finite subset @xmath3 of inv@xmath4 , pol@xmath5 is collapsible . </S>",
    "<S> the significance of this is that , for qcsp on finite structures ( over three - element domain ) , all qcsp tractability explained by switchability is already explained by collapsibility .    </S>",
    "<S> next we present a three - element domain complexity classification vignette , using known as well as derived results . </S>"
  ]
}