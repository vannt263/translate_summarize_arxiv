{
  "article_text": [
    "the study of injective metric spaces arose from the study of hyper - convexity in functional analysis ( see theorem  [ injectivity criterion ] ) .",
    "most notably , the characterization of hyper - convexity by aronszajn and panitchpakdi led to isbell s study of this class of spaces from a categorical viewpoint .",
    "[ defn : injective space ] a metric space @xmath2 is said to be injective , if for any isometric embedding @xmath3 and any non - expansive map @xmath4 there exists a non - expansive @xmath5 satisfying @xmath6 .",
    "[ injectivity criterion ] a metric space @xmath7 is injective if and only if it is hyper - convex : every finite collection of closed balls @xmath8 in @xmath2 satisfying @xmath9 for all @xmath10 has a common point .",
    "isbell introduces the category of metric spaces with non - expansive maps as morphisms , and considers the injective objects of this category with respect to the class of isometric embeddings .",
    "to be an isometric embedding rather than just a monic map in the category produces a notion of injectivity that is weaker than monic - injectivity .",
    "] expanding on the results of aroszajn and panitchpakdi ( who demonstrated , among other things , that an injective space is necessarily complete and geodesic ) , isbell attempts two tasks that are natural in the categorical setting : the construction of injective envelopes and the classification of injective objects .",
    "for a modern account of isbell s categorical construction and its variants , see @xcite .    for the first task ,",
    "isbell proves that every metric space @xmath2 admits an isometric embedding @xmath11 into an injective metric space @xmath12 with the property that any embedding of @xmath2 in an injective metric space factors through @xmath11 .",
    "isbell s construction is very explicit  in fact , explicit enough to demonstrate that @xmath12 has a polyhedral structure when @xmath2 is finite .",
    "this leads to a natural question , which is a part of the classification task .",
    "which polyhedra can be endowed with an injective metric ?",
    "isbell shows that in order to support an injective metric , a ( simplicial ) polyhedron @xmath2 must satisfy some basic _ topological _ requirements .",
    "for example : @xmath2 needs to be collapsible .",
    "isbell s construction of envelopes has been independently discovered and expanded upon by dress @xcite .",
    "this has since been applied with much success to expanding the theory ( and practice ) of the very practical problem of distance - based clustering @xcite .",
    "other related work deals with calculating features of injective envelopes such as cut - points @xcite , explicit embeddings in the @xmath13 plane @xcite and gromov  hausdorff distance estimates @xcite . a detailed analysis of envelopes for discrete infinite spaces has been carried out by lang in @xcite with applications to group theory in mind , where injective envelopes are proposed as an alternative to standard polyhedral model spaces ( e.g. rips complex ) for some classes of finitely generated groups ( e.g. gromov - hyperbolic groups ) .    throughout this body of work",
    "we find hints to a connection of this theory with the notion of metric non - positive curvature in the sense of alexandrov @xcite :    * much of the cited work relies to a varying extent on a combination theorem stating that gluing a pair of injective spaces along a point results in an injective space ; a more developed combination theory seems to be missing , however . *",
    "dress offers a characterization of the injective envelope @xmath12 of @xmath2 as the geodesic extension of @xmath2 where for every pair @xmath14 there exist points @xmath15 satisfying @xmath16 in other words , @xmath12 is a minimal geodesically complete extension of @xmath2 where @xmath2 shows up in the role of a ` boundary . ' * finally , isbell s construction of an injective metric on a collapsible 2-dimensional simplicial complex makes explicit use of combinatorial non - positive curvature conditions .",
    "mai and tang s extension of isbell s result @xcite makes a similar use of non - positive curvature , though only in combinatorial form and without realizing the potential for constructing a whole deformation space of injective metrics on the given complex .",
    "let us now study isbell s argument in more detail as we analyze the connection with non - positive curvature and introduce our own results .      in @xcite",
    ", isbell proves that a collapsible 2-dimensional cellular complex @xmath2 admits an injective metric by explicitly constructing a hyper - convex metric on @xmath2 as follows : taking a triangulation of @xmath2 , he subdivides its triangles into squares so as to form what he calls a _ collapsible cubical 2-complex _ , @xmath17 .",
    "he then metrizes @xmath2 as a geometric realization of @xmath17 , having first realized each 2-cube as a copy of the unit cube in @xmath18 and endowing the resulting 2-dimensional piecewise-@xmath0 polyhedron with the associated quotient metric .",
    "isbell s verification of the injectivity criterion then proceeds in two steps :    1 .",
    "reduction to the case where all the @xmath19 are vertices of the cubical subdivision and all the @xmath20 are integers ; 2 .   applying the properties of",
    "a ` collapsible cubical 2-complex ' to verify the result .    among isbell s requirements of a collapsible cubical 2-complexes one immediately notices gromov s ` no - triangle ' condition for non - positively curved cubical complexes .",
    "indeed , upon closer inspection it becomes clear that the notion of a collapsible cubical 2-complex is exactly a 2-dimensional cubing in the language of modern geometric group theory .",
    "[ defn : cubing ] a cubical complex @xmath2 is non - positively curved ( npc ) if the link of each vertex in @xmath2 is a simplicial flag complex .",
    "the complex @xmath2 said to be a _",
    "if it is non - positively curved and simply - connected .",
    "fairly unrestrictive conditions are known for when the piecewise - euclidean metric on a cubing is complete and geodesic .",
    "for example , this will happen when the cubing is locally finite - dimensional , as follows almost immediately from bridson s theorem on shapes ( @xcite , theorem i.7.50 ) . under these conditions",
    "one applies the cartan ",
    "hadamard theorem to conclude that @xmath2 is cat(0 ) and therefore contractible  a necessary condition for injectivity ( see , e.g. @xcite ) .",
    "bridson s theorem on shapes applies equally well ( though with some care ) to the setting when the cubes of a locally finite cubing are metrized as axis - parallel parallelopipeds in @xmath21 , where @xmath22 may vary .",
    "the edge lengths of the parallelopipeds may be chosen with some degree of freedom , subject to the gluing constraints of the complex .",
    "we call the resulting geodesic spaces _ piecewise-@xmath0 cubings_. our central result is :    [ main theorem ] every locally - finite piecewise-@xmath0 cubing is injective .    thus , not only is it true that any locally finite combinatorial cubing is injectively metrizable ( mai and tang @xcite ) , but , in fact , it carries a whole deformation space of injective metrics . moreover , observing that the class of injective metric spaces is closed under pointed gromov - hausdorff limits ( see lemma below ) extends the scope of the above theorem to give the main result stated in the abstract .",
    "the same lemma plays a crucial role in our reduction of the general case to the case of finite unit cubings :    [ limit lemma ] a complete metric space arising as a pointed gromov ",
    "hausdorff limit of proper injective metric spaces is itself injective .",
    "recall that a metric space is said to be proper if closed bounded subsets thereof are compact",
    ". applied to our setting , this lemma implies the sufficiency of proving only the following theorem .",
    "[ main theorem , finite version ] every _ finite _ piecewise-@xmath0 cubing @xmath2 is injective .",
    "we explain how to see any such space @xmath2 as a pointed gromov",
    " hausdorff limit of a sequence of the form @xmath23 where @xmath24 is a cubical subdivision of @xmath2 obtained by cutting the cubes of @xmath2 in a grid - like fashion ( parallel to their faces ) , with unit weights . applying the limit lemma once again",
    "we see that it now suffices to prove one final lemma .",
    "[ final lemma ]",
    "every finite unit piecewise-@xmath0 cubing is injective .",
    "this is , essentially , the original result proved by mai and tang in @xcite . in this paper , we propose an alternative proof using the full power of the structure theory of cubings . roughly speaking ,",
    "the idea is to prove that the balls in the zero - skeleton @xmath25 of a unit piecewise-@xmath0 cubing @xmath2 are convex subsets of @xmath25 with respect to its unit piecewise-@xmath13 metric .",
    "once this is known , the same property is inherited by all piecewise-@xmath0 cubings via the limit lemma .",
    "this finishes the proof of injectivity .",
    "as cubings are known to be geodesic median spaces ( see below ) with respect to their piecewise-@xmath13 metric , they satisfy a @xmath26-dimensional helly theorem : every finite collection of pairwise - intersecting convex sets has a common point .",
    "in particular , any collection of pairwise - intersecting @xmath0-balls in a cubing must have a common point , and injectivity is proved .",
    "the class of piecewise-@xmath0 cubings does not coincide with the class of injective metric spaces .",
    "this follows directly from the limit lemma and the example below ( see ex .",
    "[ example : three - fin ] and fig .",
    "[ fig : three - fin ] ) .",
    "it would be interesting to quantify the discrepancy , perhaps in terms of the classification by lang @xcite .",
    "( a ) may be obtained as a limit of @xmath0-cubings of the form ( b ) .",
    "[ fig : three - fin ] ]    [ example : three - fin ] it is shown in @xcite that the metric space @xmath27 with @xmath28 has the injective envelope depicted in figure  [ fig : three - fin](a ) , where one should think of the triple fin depicted there as the result of gluing three unit squares cut out the @xmath13 plane and glued together to overlap along the ( filled - in ) triangles with sides @xmath29 $ ] , @xmath30 $ ] and @xmath31 $ ] for @xmath32 .",
    "each of these triangular fins is , in fact the limit of a sequence of piecewise-@xmath0 cubings , resulting in a sequence of approximations for @xmath12 of the form shown in figure  [ fig : three - fin](b ) .",
    "while it is very possible that the class of limits of piecewise-@xmath0 cubings is still too narrow to exhaust all injective metric spaces , our results seem to suggest that the combinatorial structure of a cubing is nothing more than a set of explicit gluing instructions following which one could create a ` big ' injective space out of small , standardized pieces , namely : @xmath0-cubes .",
    "thus , our results are nothing more than a glimpse of a combination theory for constructing ` big ' injective spaces out of ` small'/`simple ' ones .",
    "this motivates the following question .",
    "is there a combination theory for injective metric spaces ?",
    "if two injective spaces are glued along a convex ( injective ? )",
    "subspace , when is the resulting space injective ?    a well - developed combination theory should simplify the proofs of the existing results as well as contribute to the understanding of the problem of characterizing injective spaces in constructive terms .",
    "we use this section to recall some of the language required for the rigorous development of the main result . some of the facts presented in this section seem to be common knowledge , yet new in the sense that they are not easily found in the literature",
    " we thought it better to include them here due to their elementary nature , as well as for the sake of giving a self - contained exposition .",
    "the purpose of this section is to recall the necessary technical language for dealing with geometric complexes .",
    "we do not intend to treat the subject at any level of generality beyond what is required for dealing with cubings  see chapter i.5 of @xcite for a careful and detailed exposition of this topic .",
    "let @xmath7 be a metric space , where @xmath33 is allowed infinite values .",
    "suppose @xmath34 is a partition of @xmath2 .",
    "then the quotient ( semi-)distance @xmath35 for @xmath36 is defined as the greatest lower bound on expressions of the form @xmath37 where @xmath38 , @xmath39 and @xmath40 for all @xmath41 .    in the case of a cubical complex",
    ", one considers the complex @xmath2 as a quotient of a disjoint union @xmath42 of a collection of cubes  copies of @xmath43^n\\subset{{\\mathds{r}}}^n$ ] for possibly varying values of @xmath44with isometric identifications along some of the faces generating the equivalence relation defining the partition @xmath34 .",
    "while the distance in @xmath42 between points of distinct cubes is set to be infinite , each cube is endowed with the metric it inherits from @xmath45 .    in this paper",
    "we consider the three cases where _ all cubes at the same time",
    "_ inherit their geometry from one of the @xmath46 , the @xmath13 or the @xmath0 norms .",
    "the resulting metric space @xmath7 is then referred to as a _ unit piecewise-@xmath46 , @xmath13 or @xmath0 cubical complex_.    a slight variation on this construction is achieved by putting weights on the coordinate axes of the individual cubes .",
    "one needs to make sure that the weights match , in the sense that any two cubes sharing a common face in @xmath2 do have their axes weighted in a way that keeps the identified faces isometric .",
    "as we shall see in section  [ section : weighted cubings ] , roller s duality theory between cubings and discrete poc sets is ideally suited for the purpose of maintaining the necessary records .",
    "it is not hard to verify ( though it does require some work which , thankfully , had been done in @xcite ) that the quotient metric on a piecewise-@xmath47 ( @xmath48 ) cubical complex takes the following form :    a _ broken path _ in a cubing @xmath2 is a sequence of points @xmath49 where @xmath50 , @xmath51 and every consecutive pair of points is contained in a face of @xmath2 .",
    "the _ length _ of @xmath52 is defined to be : @xmath53 where @xmath54 is measured in a face containing the points @xmath55 .    with this language , of course",
    ", the piecewise-@xmath47 distance between two points of a cubical complex becomes the greatest lower bound on the length of a broken path between them .",
    "there are some obvious optimizations to this picture .",
    "the broken path @xmath52 is said to be _ taut _ if no consecutive triple of points along @xmath52 is contained in a cube .",
    "since the individual cubes in @xmath42 are geodesic metric spaces , tightening a broken path locally will never increase its length .",
    "this leads to the formula : @xmath56 we postpone the rest of this discussion till a time when we have a better way of representing piecewise-@xmath47 cubings , in section [ section : weighted cubings ]      we refer the reader to chapter i.5 of @xcite for a detailed introduction and discussion of gromov  hausdorff convergence of proper metric spaces . recall that a binary relation @xmath57 has _ projections _",
    "@xmath58 and that a subset @xmath59 of a metric space @xmath2 is said to be _ @xmath60-dense _",
    "( in @xmath2 ) , if the collection of closed balls of radius @xmath60 about the points of @xmath59 cover @xmath2 . we will use the following convergence criterion for our technical work .",
    "let @xmath61 be metric spaces and let @xmath62 .",
    "a relation @xmath63 is said to be an _ @xmath60-approximation _ between @xmath2 and @xmath64 , if :    1 .",
    "the projections @xmath65 and @xmath66 are @xmath60-dense ; 2 .",
    "@xmath67 holds for all @xmath68 .",
    "an @xmath60-approximation is _ surjective _ , if @xmath69 and @xmath70 .",
    "one of the ways to define the the gromov ",
    "hausdorff distance @xmath71 is as ( half , sometimes ) the greatest lower bound of the set of @xmath62 admitting a surjective @xmath60-approximation between @xmath2 and @xmath64 .",
    "it is worth noting that estimation of gromov  hausdorff distances in the context of injective spaces and the use of @xmath60-approximations are not new to this field , for example : in @xcite lang , pavn and zst estimate the change in gromov ",
    "hausdorff distance between spaces as one passes from the spaces to their injective envelopes .",
    "thus , we expect that neither our limit lemma nor its proof below come as a surprise to the experts .",
    "we include the proof for convenience .",
    "using @xmath60-approximations , gromov  hausdorff convergence is characterized as follows .",
    "[ lemma : gh convergence ] let @xmath72 , @xmath44 and @xmath2 be metric spaces .",
    "the sequence @xmath73 converges to @xmath2 in the gromov ",
    "hausdorff topology , if for every @xmath62 there exist @xmath74 such that @xmath60-approximations @xmath75 exist for all @xmath76.@xmath1    this kind of convergence is most meaningful in the category of compact metric spaces .",
    "pointed gromov ",
    "hausdorff convergence ( of proper metric spaces ) extends this idea and is defined as follows :    a sequence @xmath77 of pointed proper metric spaces is said to converge to the pointed space @xmath78 if for every @xmath79 the sequence of closed metric balls @xmath80 , @xmath44 , converges to the closed ball @xmath81 in the gromov ",
    "hausdorff topology .",
    "note that the completion of a pointed gromov ",
    "hausdorff limit of a sequence of spaces is itself a limit of the same sequence .",
    "we are ready to prove the limit lemma from the introduction .    [",
    "proof of limit lemma ] let @xmath82 be a sequence of pointed proper injective metric spaces converging to the space @xmath78 in the sense of pointed gromov  hausdorff convergence .",
    "then the metric completion of @xmath2 is injective .",
    "we may assume @xmath2 is complete .",
    "we first make an independent observation : let @xmath61 be metric spaces with @xmath2 injective and suppose that @xmath57 is an @xmath60-approximation . given",
    "a collection @xmath83 of points in @xmath64 and positive numbers @xmath84 satisfying @xmath85 for all @xmath86 .",
    "we find points @xmath87 , @xmath88 , such that @xmath89 and we set @xmath90 .",
    "it then follows that @xmath91 for all @xmath92 .",
    "applying theorem [ injectivity criterion ] we find a point @xmath93 with @xmath94 for all @xmath95 , and conclude the existence of a point @xmath96 which then must satisfy @xmath97 for all @xmath95 .",
    "now we apply the preceding observation to a fixed sequence of pointed injective spaces @xmath82 converging to a space @xmath78 .",
    "given finite collections @xmath98 of points in @xmath2 and @xmath84 of positive reals satisfying , find @xmath79 large enough so that @xmath99 contains the union of all the balls @xmath100 , @xmath88 . by the preceding argument , for every @xmath101",
    ", the closed ball @xmath99 contains a point @xmath102 satisfying @xmath103 for @xmath88 .",
    "the existence of a point @xmath104 now follows from the compactness of @xmath99 .",
    "[ reduction to integer radii ] observe that a different choice of the @xmath105any choice , in fact , of @xmath106 for a value of @xmath107 that is fixed in advance  would do .",
    "this enables a weakening of the assumptions ( on the @xmath72 ) under which the preceding argument remains intact .",
    "instead of assuming injectivity of each @xmath72 one may assume that the aronszajn - panitchpakdi condition holds for :    * finite subsets of a fixed @xmath60-dense subset @xmath108 of @xmath72 , * radii restricted to , say , values in the set @xmath109 .",
    "the injectivity of @xmath2 would follow from these assumptions by the same argument as before .",
    "the hyper - convexity criterion of aronszajn and panitchpakdi can not help but remind one of a similar phenomenon in the realm of median spaces . in this short review",
    "we follow the exposition of @xcite .",
    "let @xmath7 be a semi - metric space .    for @xmath15 , the _ interval _ @xmath110",
    "is defined to be @xmath111 for @xmath112 , we say that a point @xmath113 is a _",
    "median _ of the triple @xmath114 if @xmath115    by definition , @xmath116 is independent of the ordering of @xmath117 .",
    "we also recall the following definitions .",
    "a subset @xmath107 in a semi - metric space @xmath7 is _ convex _ , if @xmath118 holds for every @xmath119 .",
    "@xmath107 is said to be a _",
    "half - space of @xmath2 _ if both @xmath107 and @xmath120 are convex subspaces of @xmath2 .",
    "the notion of median points is significant for a large class of spaces .",
    "a semi - metric space is a _ median space _ , if @xmath121 and @xmath122 for all @xmath112 .",
    "a map @xmath123 between median spaces is said to be a _",
    "median morphism _ if @xmath124 for all @xmath112 .",
    "recall that any semi - metric can be _ hausdorffified _ : a semi - metric space @xmath2 gives rise to a metric space @xmath125 by forming the quotient of @xmath2 by the equivalence relation @xmath126 .",
    "it is clear then that the median structure on @xmath2 descends to the quotient .",
    "suppose @xmath7 is a median semi - metric space .",
    "then @xmath125 is a median metric space where @xmath116 is a singleton for all @xmath112 .",
    "when this happens , we write @xmath127 and say that @xmath128 is the _",
    "median point _ of the triple @xmath114 .",
    "we provide a few simple examples of median spaces to illustrate this structure .",
    "it is easy to verify that @xmath129 is a complete geodesic median space , with @xmath130    suppose @xmath131 is a measure space . then @xmath132 is a median space and @xmath133 in the case when @xmath134 is finite , we see that @xmath2 is simply isometric to @xmath135 , with medians computed coordinatewise .",
    "two things make median spaces highly relevant to this paper : the first is the fact that every cubing can be metrized to become a median space ( and in more than one way as we shall see in section [ section : weighted cubings ] ) ; the second is the following theorem we have already mentioned in the introduction .",
    "[ helly theorem ] suppose @xmath136 is a family of convex subsets of a median space @xmath2 .",
    "if any two elements of @xmath137 have a point in common , then all elements of @xmath137 have a point in common .",
    "half - spaces play a crucial role in the theory of median spaces . with some modifications to known proofs for the more general setting of median algebras ( see section 4 of @xcite ) , one can prove the following .",
    "[ halfspace presentation of convex sets ] let @xmath2 be a complete median space .",
    "then every convex subset of @xmath2 is an intersection of _ open _ half - spaces .",
    "any closed convex subset of @xmath2 is an intersection of _ closed _ half - spaces .",
    "as explained in the introduction , our strategy for verifying the injectivity of a piecewise-@xmath0 cubing @xmath2 is to show that closed balls in such a cubing are _ convex with respect to the piecewise-@xmath13 metric on the same cubing_. by helly s theorem it will suffice to demonstrate that any closed @xmath0-ball is the intersection of closed half - spaces of @xmath2 when @xmath2 is viewed as a median space ( using its piecewise-@xmath13 metric ) .",
    "the convexity of @xmath0-balls will result from us presenting any such ball as the intersection of a suitably chosen family of ( closed ) @xmath13-halfspaces .",
    "the halfspace structure of a median space is fundamental to our technique .",
    "in fact , we will make good use of an isometric median embedding @xmath138 of a median space @xmath2 into an @xmath139 space , constructed as follows ( theorem 5.1 and corollary 5.3 in @xcite ) :    * * construction of a ` transverse measure ' , @xmath140 : * one starts by constructing the set @xmath141 of all pairs of the form @xmath142 where @xmath143 ranges over the halfspaces of @xmath2 ; it then turns out that a natural @xmath144-algebra @xmath145 exists on @xmath141 , together with a measure @xmath140 , such that @xmath146 for all @xmath15 , where @xmath147 denotes the subset of all pairs @xmath148 satisfying @xmath149 and @xmath150 . *",
    "* embedding in @xmath151 : * fixing a base - point @xmath152 , map a point @xmath93 to the function @xmath153 .",
    "this map is a median - preserving isometric embedding .",
    "the case of locally - finite ( or , equivalently , proper ) cubings is well known ( @xcite ) to fall under the purview of this construction while lending itself to analysis by simple combinatorial ( rather than measure - theoretic ) tools .",
    "we seek to capitalize on this fact in section  [ section : geometry of cubings ] , where we use this embedding to study the geometry of cubings endowed with a piecewise-@xmath0 geometry .    finally , some quick observations regarding the ambiguous relationship between median spaces and injective spaces are in order . analyzing isbell s construction of injective envelopes",
    "it is easy to verify that , if @xmath2 is an injective space and @xmath64 is a subspace of @xmath2 then the inclusion of @xmath64 into @xmath2 extends to an embedding of the envelope @xmath154 in @xmath2 .",
    "the same construction enables one to prove that the injective envelope of three points is either an interval ( degenerate or non - degenerate ) or a tripod  a space isometric to a metric tree with four vertices and three leaves standing in bijective correspondence with the initial triple of points .",
    "thus , for any triple of points @xmath117 in an injective space @xmath2 , the median set @xmath116 is non - empty !",
    "while medians do exist in injective spaces , there is no guarantee of uniqueness of the median , as one can easily observe in the normed space @xmath155 for any set @xmath156 of cardinality greater than @xmath157 .",
    "in fact , even cases so simple as the case of four points demonstrate the complicated relationship between the two classes  consider the following example .",
    "( left ) and @xmath158 ( right ) from example  [ example : non - injective 1 ] .",
    "a median - preserving map from @xmath158 to @xmath159 is impossible.[fig : non - injective median space ] ]    [ example : non - injective 1 ] let @xmath160 $ ] be a real parameter , and let @xmath161 denote the three - dimensional cube @xmath162 ^ 3\\subset{{\\mathds{r}}}^3 $ ] , endowed with the @xmath13 metric .",
    "denote : @xmath163 and let @xmath164 , @xmath165 denote pairwise disjoint copies of the the interval @xmath166\\subset{{\\mathds{r}}}$ ] endowed with the standard metric .",
    "we form a space @xmath159 as the quotient of @xmath167 by identifying the point @xmath168 with the point @xmath169 for every @xmath170 , and endow @xmath159 with the quotient metric .",
    "finally , we denote the point in @xmath159 corresponding to @xmath171 with the capital letter variant of @xmath170 ; see figure  [ fig : non - injective median space ] .    deferring the proof that the @xmath159 are median spaces until section  [ section : weighted cubings ] , example  [ example : non - injective 2 ] , let us focus on explaining why @xmath159 is not injective for any @xmath172 . observe that the subspace @xmath173 satisfies @xmath174 for all @xmath175 .",
    "it follows that @xmath158 is the injective envelope of @xmath64 with this metric .",
    "if @xmath159 were injective for some @xmath172 , the inclusion map @xmath176 would have extended to an isometric embedding @xmath177 .",
    "since both @xmath158 and @xmath159 are median spaces , @xmath178 is then a median - preserving map . denoting the median map of @xmath159 by @xmath179 , we observe in @xmath159 that @xmath180 while at the same time in @xmath158 one has @xmath181 since @xmath182 in @xmath159 for @xmath172 , we have arrived at a contradiction and we conclude @xmath159 can not be injective for @xmath172.@xmath1    the last example hints that failure of injectivity is fairly common among median spaces .",
    "we find it intriguing , then , that a mere change of the geometry of the vector space on which the individual cubes are modeled should result in a change so radical as turning all the spaces in question into injective spaces .",
    "this kind of behaviour seems to hint at the existence of a general principle loosely formulated as _",
    "a non - positively curved combination of injective spaces is injective_. the extent to which such a statement is true remains to be verified .",
    "for a very serious and inspiring recent account of the theory of non - positively curved cubical complexes please see @xcite .",
    "piecewise-@xmath46 cubings and their applications to group theory are discussed in great detail in @xcite .    beyond these references",
    ", we will not delve into any detail regarding cubical complexes from the topological viewpoint .",
    "instead we will focus on a very direct construction of cubings , due initially to sageev @xcite , and developed by roller in @xcite based on isbell s duality @xcite between poc sets and median algebras .",
    "let us just clarify what we mean by a cube , to avoid any confusion .",
    "[ defn : standard cube ] let @xmath156 be a set .",
    "standard @xmath156-cube _ is the set @xmath183 of all functions from @xmath156 into @xmath43 $ ] . when @xmath184 , the _ 0-dimensional cube _",
    "@xmath183 is defined to equal the one - point set @xmath185 .",
    "more generally , we say that @xmath183 is a @xmath186-dimensional cube .",
    "much of the material present in this section has been known to geometric groups theorists for quite some time , either formally or as folklore .",
    "unfortunately , the literature on the technical tools we are using is in a state of slight disarray preventing immediate application to the specific problem at hand .",
    "we therefore decided to gather the necessary material here , filling in some of the gaps and formalizing the folklore .",
    "we recall some definitions and examples .",
    "a _ poc set _ is a poset @xmath187 with a minimum element denoted @xmath188 and endowed with an order - reversing involution @xmath189 satisfying the additional requirement @xmath190 we say that @xmath34 is discrete , if the poset @xmath187 is discrete , that is : order intervals @xmath191={\\left\\{x\\in \\,\\big|\\,a\\leq x\\leq b\\right\\}}\\ ] ] are finite for all @xmath192 .",
    "working with poc sets requires some additional jargon .",
    "let @xmath34 be a poc set .",
    "* elements of @xmath34 are often referred to as _ halfspaces _ ; * the elements @xmath193 are said to be _ trivial _ ; * the non - trivial halfspaces are said to be _ proper _ ; * a complementary pair @xmath194 of proper halfspaces is called a _ wall _ of @xmath34 ; * a pair @xmath195 with @xmath196 will be called a _",
    "proper pair_.    the meaning of @xmath197 is summarized in the observation that any proper pair @xmath192 satisfies _ at most one of the following relations _ : @xmath198 the above relations ( if they hold ) are called _ nesting relations_.    let @xmath34 be a poc set .",
    "a pair of elements @xmath192 satisfying one of the relations is said to be _",
    "nested_. more generally , a set @xmath199 is said to be nested if its elements are nested pairwise .",
    "the set @xmath200 is said to be _ transverse _ if no two of its elements are nested .",
    "a transverse pair @xmath192 is often denoted with @xmath201 .",
    "the power set @xmath202 of a non - empty set @xmath156 is a poc set with respect to inclusion and complementation . in particular , the power set of one point , denoted @xmath203 , is the _ trivial _ poc set .",
    "[ example : linear poc set ] let @xmath187 be a totally ordered set . then the set @xmath204  where @xmath205 is the set of symbols of the form @xmath206 for @xmath207  and subject to the relations @xmath208 and @xmath209 for all @xmath210 , as well as the relations @xmath211 iff @xmath212 in @xmath34 , is a poc set .",
    "[ example : poc set of a tree ] let @xmath134 be a tree with edge set @xmath213 and vertex set @xmath214 .",
    "let @xmath34 be the set of vertex - sets of connected components of all possible @xmath215 , where @xmath216 ranges over @xmath213 .",
    "then @xmath34 is a discrete nested poc set with respect to inclusion and complementation .    of course",
    ", one should also mention the morphisms in this category :    a function @xmath217 between poc sets is a _",
    "poc morphism _",
    ", if it is order - preserving and @xmath218-equivariant , that is : @xmath219 for all @xmath192 .",
    "the following construction is due to sageev @xcite in the specific context of relative ends of groups , and to isbell @xcite and roller @xcite in the current level of generality .",
    "let @xmath34 be a finite poc set .",
    "an _ ultra - filter _",
    "@xmath220 on @xmath34 is a subset of @xmath34 satisfying :    1 .",
    "[ ast - selection ] for all @xmath221 one has @xmath222 or @xmath223 , but not both ; 2 .",
    "[ coherence ] for all @xmath224 one _ never _ has @xmath225 .",
    "the set of all ultra - filters on @xmath34 is denoted by @xmath226 and may be naturally identified with @xmath227 .",
    "a subset @xmath228 satisfying is called a _",
    "complete @xmath218-selection on @xmath34_. a subset @xmath228 satisfying is said to be _",
    "coherent_. we will denote the set of all @xmath218-selections by @xmath229 .    picking a basepoint @xmath230",
    "makes it easy to identify @xmath229 with the vertex set of the @xmath231-cube @xmath232 : simply observe that the map @xmath233 viewed as a map of @xmath229 into @xmath232 is injective , with image precisely the set of @xmath234-valued elements of the ( possibly infinite - dimensional ) _ standard unit cube _ : @xmath235\\right\\}.\\ ] ] note that @xmath231 is mapped to the origin and that the @xmath13 metric on @xmath232 induces the following combinatorial metric on @xmath229 .",
    "@xmath236    due to symmetry , this metric is clearly independent of the choice of basepoint @xmath231 .",
    "thus , @xmath232 effectively endows @xmath229 with the structure of a graph @xmath237 if we set two vertices @xmath238 to be joined by an edge iff @xmath239 . with a little bit of additional work one",
    "observes that a sub - graph @xmath240 of @xmath237 is isomorphic to the @xmath26-skeleton of a @xmath33-cube if and only if @xmath240 is mapped by @xmath241 onto the vertex set of some appropriate @xmath33-face of @xmath232 .",
    "thus , @xmath237 may be thought of as the @xmath26-skeleton of a cubical complex @xmath242 which is isomorphic to @xmath232 under the affine extension @xmath241 .",
    "it is easy to verify that @xmath232 is homogeneous , making the choice of basepoint @xmath231 immaterial ( for now ) .",
    "let @xmath34 be a discrete poc set .",
    "then @xmath243 is defined to be the sub - complex of @xmath242 of all faces _ not _ incident to an incoherent vertex .",
    "a few simple examples are as follows .    when the poc set @xmath34 has no non - trivial nesting relations it is clear that @xmath243 coincides with the cube @xmath242 .",
    "[ dual of linear ] it is not hard to see that @xmath243 for a linear poc set @xmath34 ( see example  [ example : linear poc set ] ) is the extension of @xmath34 by dedekind cuts .    [ dual of nested ] it is a more involved computation to verify that the dual of a finite nested poc set @xmath34 is a finite tree .",
    "moreover , @xmath34 is naturally isomorphic to the poc set constructed from this tree as described in example [ example : poc set of a tree ] .",
    "this is a particular case of @xcite , ii.1.8 - 10 .    finally , we give an example we will use later on .",
    "[ cartesian products ] suppose @xmath34 and @xmath244 are discrete poc sets , and let @xmath245 denote the poc set obtained from @xmath246 by identifying @xmath247 with @xmath248 ( and hence also @xmath249 with @xmath250 ) .",
    "then any proper element of @xmath34 is transverse to any proper element of @xmath244 and it is easily shown that @xmath251 is naturally isomorphic to @xmath252 .    summarizing all the above is the surprising result anticipated by sageev and proved by roller and chepoi .",
    "[ sageev - roller duality ] let @xmath34 be a discrete poc set . then every connected component of @xmath243 is a cubing and @xmath253 coincides with the combinatorial path metric on its @xmath26-dimensional skeleton .",
    "conversely , every cubing @xmath2 is a connected component of @xmath243 for an appropriately chosen discrete poc set @xmath34 .",
    "when @xmath34 is infinite , @xmath243 inevitably forms a disconnected space .",
    "the connected components of @xmath243 are spanned by the almost - equality classes of its vertices : recall that two subsets @xmath254 of a set @xmath156 are said to be _ almost equal _ if the symmetric difference @xmath255 is finite ; by the definition of the metric @xmath253 on @xmath243 , a pair of vertices in @xmath243 is joined by an edge - path if and only if they are almost - equal to each other as subsets of @xmath34 .",
    "for example , if @xmath34 is nested , @xmath243 will consist of a tree whose poc set of halfspaces is naturally isomorphic to @xmath34 , together with its space of ends , each end being the only point of its component in @xmath243 ( @xcite ) .    in general",
    ", however , it may not be possible to _ naturally _ select a ( distinguished ) component @xmath107 of @xmath243 whose poc set of half - spaces is isomorphic to @xmath34 .",
    "work done in @xcite and in @xcite explains how to achieve this under the condition that @xmath34 contains no infinite transverse set .",
    "seeking to avoid such technicalities we will use the trick of restricting attention to a component containing a particular vertex of interest .    [ picking a component ] let @xmath34 be a discrete poc set and @xmath256 .",
    "the connected component of the complex @xmath243 containing the vertex @xmath231 will be denoted @xmath257 .",
    "recall the ( piecewise affinely extended ) representation map @xmath258 defined in equation  [ eqn : representation map ] , and note that @xmath257 is precisely the intersection of the image of @xmath241 with the vector subspace @xmath259 of @xmath260 consisting of all vectors of finite @xmath26-norm .",
    "this is due to @xmath34 being discrete .",
    "we will need some technical information about the local structure of @xmath243 .",
    "the following results are well - known and appear in @xcite .",
    "[ lemma : links and minimality ] let @xmath34 be a discrete poc set and let @xmath261 be vertices of @xmath243 . then @xmath262 is adjacent to @xmath214 in @xmath243 if and only if @xmath262 has the form @xmath263_{_{a}}}:=(v-\\{a\\})\\cup\\{a^\\ast\\}\\ ] ] for @xmath264 , where @xmath265 denotes the set of minimal elements of @xmath214 with respect to the ordering induced on it from @xmath34 .",
    "the operation of replacing @xmath214 by @xmath266_{_{a}}}$ ] will be called a _",
    "flip_. clearly , any vertex of @xmath243 is connected to any other by a finite sequence of flips .",
    "the fact that @xmath267 simply measures the minimal number of flips required to to turn @xmath220 into @xmath214 is central to the theory of discrete median algebras .",
    "a special situation occurs when several flips may be applied to a vertex in different orders of application without affecting the outcome .",
    "it is easy to verify that the hyperplanes being flipped form a transverse set in such a case , and , more generally we have the following lemma .",
    "[ lemma : cubes and transversality ] let @xmath34 be a discrete poc set and let @xmath268 be a vertex in @xmath243 .",
    "then the set of cubes of @xmath243 incident to @xmath214 is in one - to - one correspondence with the transverse subsets of @xmath265 .",
    "moreover , for each such subset @xmath200 the vertices of the corresponding cube adjacent to @xmath214 are all of the form @xmath269_{_{a_1,\\ldots , a_m}}}:={[\\cdots{[{[v]_{_{a_1}}}]_{_{a_2}}}\\cdots]_{_{a_m}}}\\ ] ] where @xmath270 is a sequence of distinct elements of @xmath200 and we agree to denote @xmath266_{_{\\varnothing}}}:=v$ ] .",
    "the vertex @xmath266_{_{a_1,\\ldots , a_m}}}$ ] is independent of the ordering of the flips .",
    "this lemma is very well illustrated by example  [ cartesian products ] , demonstrating how the dimensions of cubes in the complex grow with the sizes of transverse subsets .",
    "the following facts were shown in @xcite .",
    "[ poc set duals are median ] let @xmath34 be a discrete poc set and let @xmath256 be a basepoint in @xmath243 .",
    "then each component of @xmath271 is a median metric space with the median map given by @xmath272 moreover , the map @xmath273 is a median - preserving isometric embedding .",
    "the explicit form of the median map allows for a complete characterization of halfspaces and convex subsets of @xmath271 .",
    "let @xmath34 be a discrete poc set .",
    "the half - spaces of @xmath271 are precisely the sets of the form @xmath274 in particular , the convex subsets of @xmath226 are precisely @xmath275 for @xmath200 ranging over all coherent subsets of @xmath34 .",
    "moreover , @xmath276 holds for all @xmath192 .",
    "thus @xmath34 is naturally isomorphic to the poc set of halfspaces of @xmath226 .",
    "our current goal is to extend this combinatorial structure theory of abstract cubings to meet the metric theory of median spaces at a point where we can plainly view finite cubings as ` finitely presented median spaces ' , and proper median spaces as pointed gromov - hausdorff limits of finite cubings .",
    "for example , one would like to be able to reason in a way hinted at by figure  [ fig : median limit ] .",
    "plane ( right ) as a limit of a sequence ( left to right ) of rescaled cubings.[fig : median limit ] ]      let @xmath34 be a discrete poc set , and let @xmath231 be a base point in @xmath226 , fixed once and for all . note that @xmath277 for all @xmath278 , which makes @xmath279 an uninformative coordinate of @xmath260 when it comes to representing vertices of @xmath243 .    a more varied geometric realization of @xmath243 is needed .",
    "a weight on @xmath34 is a function @xmath280 satisfying @xmath281 and @xmath282 for all @xmath221 .",
    "we say that a weight is non - degenerate if @xmath283 for all proper @xmath221 .",
    "a weight @xmath284 is used for defining a map @xmath285 via the pointwise product @xmath286 .",
    "given a weight @xmath284 on @xmath34 we revisit the map @xmath287 , only that now we view it as a piecewise affine map of @xmath288 .",
    "extending the construction from @xcite slightly , we define a new embedded complex in @xmath260 .",
    "let @xmath34 be a discrete poc set with weight @xmath284 and basepoint @xmath256 .",
    "the _ weighted dual @xmath289 of @xmath34 ( with weight @xmath284 and basepoint @xmath231 ) _ is defined to be the image of @xmath257 under the map @xmath290 obtained as the affine extension @xmath291 , endowed with the metric @xmath292 induced on it from @xmath259 .",
    "some important observations :    [ properties of the weighted dual ] let @xmath34 be a discrete poc set with non - degenerate weight @xmath284 and basepoint @xmath256 . then :    1 .",
    "@xmath293 is a homeomorphism of @xmath257 onto @xmath289 .",
    "in particular , @xmath289 is a cubing .",
    "2 .   @xmath292 is a piecewise-@xmath13 metric : @xmath292 coincides with the quotient metric on @xmath289 obtained by endowing each cube with the metric induced on it from @xmath259 ( and then carrying out the appropriate identifications ) .",
    "3 .   @xmath293 restricts to a median - preserving map of @xmath226 into @xmath259 .",
    "4 .   @xmath294 is a median metric space  in fact , the smallest geodesic median subspace of @xmath259 containing @xmath295 .",
    "property ( 1 ) holds by construction , as @xmath243 and @xmath294 differ by the bijective ( modulo collapsing the uninformative @xmath279 coordinate ) stretching map @xmath296 .    to see ( 2 ) , observe that a cube of @xmath243 is mapped to a rectangular parallelopiped with edges parallel to the coordinate axes ( rap ) .",
    "since paths that are piecewise parallel to the coordinate axes are geodesics in @xmath259 provided they cross each hyperplane at most once , the quotient metric induced from endowing each rap with the trace metric from @xmath259 coincides with the distance measured along geodesics of @xmath259 which do not exit @xmath289 .",
    "the connectedness of @xmath297 finishes the proof .",
    "property ( 3 ) follows from @xcite , lemma 3.12 and theorem 5.1 .",
    "property ( 4 ) is the tricky one .",
    "our argument for ( 2 ) explains the fact of @xmath289 being a geodesic subspace of @xmath259 .",
    "one observes :    * since @xmath34 is discrete we must have @xmath298 for all but finitely many @xmath221 , reducing the problem to the case when @xmath34 is finite ; * for any pair of vertices @xmath299 sharing a cube in @xmath257 , if @xmath244 is the minimal cube containing both @xmath220 and @xmath300 then @xmath301 , the interval calculated in @xmath259 , is the unique rap with antipodal vertices @xmath302 and @xmath303 .",
    "this explains the minimality property claimed in ( 4 ) .",
    "it remains to verify that the @xmath259-median @xmath304 of a triple of points @xmath305 is also contained in @xmath289 .",
    "this verification is purely technical , and we omit the details in the interest of saving space , leaving only an outline of the argument : knowing that @xmath306 is median - preserving , one considers the set @xmath200 of all @xmath307 for which at least one of @xmath308 does not belong to @xmath309 . if @xmath200 is empty , then @xmath117 are vertices of @xmath294  images of points in @xmath226 under @xmath293 , that is  and there is nothing to prove .",
    "if @xmath200 is non - empty , observe that @xmath200 is a transverse set .",
    "considering @xmath310 as a real - valued function of @xmath231 and recalling medians in @xmath259 are computed coordinate - by - coordinate , we conclude that the value of @xmath311 on @xmath312 is determined by majority ( as in the @xmath313 case ) , thus forcing @xmath311 into the unique cube whose vertices coincide with @xmath311 on @xmath312 and have arbitrary values @xmath314 for all @xmath315 .    by a piecewise-@xmath13 cubing we",
    "mean a space of the form @xmath289 endowed with the metric @xmath292 .",
    "this metric space will be denoted @xmath316 . in the special case",
    "when @xmath317 for all proper @xmath221 , we will identify @xmath318 , and refer to @xmath292 simply as @xmath253 .",
    "from example  [ example : non - injective 1 ] , constructed as a weighted piecewise-@xmath13 cubing dual to the poc set @xmath34 from example  [ example : non - injective 2 ] .",
    "note how the walls drawn inside the three - dimensional cube match the non - singleton halfspaces of the poc set @xmath34.[fig : non - injective median space 2 ] ]    [ example : non - injective 2 ] revisiting example  [ example : non - injective 1 ] , we represent the space @xmath159 ( figure [ fig : non - injective median space ] ) from that example as a piecewise-@xmath13 cubing . first , the poc - set structure may be chosen to have the form @xmath319 where @xmath320 with @xmath34 considered a sub poc set of @xmath321 .",
    "next we set the weights to equal @xmath322 note how the weights of walls separating any given pair of points in @xmath323 add up to @xmath157see figure [ fig : non - injective median space 2 ] .",
    "understanding the open ( closed ) half - spaces of @xmath294 for non - degenerate @xmath284 is easy : they are the intersections of @xmath294 with the open ( closed ) halfspaces of @xmath259 .",
    "the latter all have the form @xmath324 note how , for any choice of @xmath325 and @xmath326 , one has @xmath327 so that the ` abstract ' halfspaces  the elements of @xmath34are reconstructed from the ` visual ' half - spaces of the realization .",
    "it is common in the field to refer to the sets of the boundaries of half - spaces @xmath328 as the _ walls _ , or _ hyperplanes _ , of the cubical complex @xmath294 , noting that every wall separates @xmath329 from @xmath330 in @xmath294 , while having a ` thickness ' of @xmath331 .",
    "the distances between vertices are influenced accordingly : the following expression for the distance between vertices @xmath299 is derived directly from property ( 2 ) stated in proposition  [ properties of the weighted dual ] : @xmath332 as @xmath333 indexes the set of walls separating @xmath220 from @xmath300 .",
    "for a general pair of points @xmath334 a similar formula may be written down .",
    "[ defn : separator ] let @xmath334 .",
    "the _ separator _ of @xmath335 and @xmath336 is the set  denoted @xmath337 by abuse of notation  of all @xmath221 such that either    * @xmath307 and @xmath338 ; * @xmath339 and @xmath340 .",
    "note how , if @xmath284 is non - degenerate , one always has @xmath341 for @xmath299 .",
    "thus , the separator of a pair of vertices is the same as their combinatorial separator in @xmath34 .",
    "the distance formula then trivially becomes : @xmath342 there are two cases to consider for the summands :    * @xmath343 and @xmath344 produces a summand of @xmath345 . in this case we see that _ every _ wall of the form @xmath346 separates @xmath2 from @xmath64  hence the contribution of @xmath345 to the distance between the points . * @xmath347 . in this case , the two points are contained in a thickened hyperplane of @xmath289 , which is merely a direct product of an interval with the dual cubing of the sub poc set @xmath348 of all @xmath349 satisfying @xmath350 .      finally",
    ", the degenerate case is essentially identical to the non - degenerate one , as one may think of a null weight assigned to a wall as the limiting result of shrinking the thickness of that wall to zero .",
    "more formally , if the given weight @xmath284 is degenerate , the metric @xmath292 becomes a semi - metric . to obtain the reduction to the non - degenerate case , set : @xmath351 it is straightforward to prove that the ( unique ) piecewise affine extension of the co - restriction map @xmath352 defined by @xmath353 induces an isometry of @xmath354 onto @xmath355 .",
    "we have finally arrived at the point where a formal and workable construction of piecewise-@xmath0 cubings is given .      in view of sageev  roller duality ( theorem  [ sageev - roller duality ] ) the definition of a piecewise-@xmath0 cubing from section  [ section : geometric complexes ] may be rewritten as follows .    by a piecewise-@xmath0 cubing",
    "we mean a metric space of the form @xmath289 , where @xmath34 is a discrete poc - set , @xmath284 is a non - degenerate weight and @xmath256 is a basepoint .",
    "this time we endow @xmath289 with the quotient metric @xmath356 obtained by endowing each of the cubes of @xmath294 with the metric induced on it from @xmath357 .",
    "the resulting quotient space will be denoted @xmath358 . by a _ unit _",
    "piecewise-@xmath0 cubing we mean a space of the form @xmath358 with @xmath317 for every proper @xmath221 .",
    "we denote this space with @xmath359 , and its metric with @xmath360 .",
    "a little bit more can be said about piecewise-@xmath0 cubings by applying results on quotient metrics from @xcite , chapter i.5 .",
    "let @xmath34 be a finite poc set with weight @xmath284 and basepoint @xmath256 .",
    "then the metric @xmath356 on @xmath289 is the length metric induced on @xmath289 from @xmath357 .",
    "furthermore , @xmath358 is a complete geodesic metric space.@xmath1    in fact , a little more can be said by applying pointed gromov ",
    "hausdorff convergence to adequately selected finite exhaustions of a locally finite cubing .",
    "[ cor : ellinfty is a length metric ] let @xmath34 be a discrete poc set with weight @xmath284 and basepoint @xmath256 . if the dual @xmath257 is locally finite , then @xmath356 is the length metric on @xmath289 induced on it from @xmath357 , and @xmath358 is a complete geodesic metric space.@xmath1      the following technical lemma places a lower bound on distances in @xmath361 .",
    "[ separation lemma ] let @xmath299 be vertices of @xmath294 and let @xmath362 be a finite nested subset of @xmath333 .",
    "then @xmath363    for any @xmath221 , the sub - complex @xmath364 of @xmath365 induced by the vertex set @xmath366 is itself a cubing .",
    "we start by verifying that @xmath367 for _ any _ @xmath368 and @xmath369 : since the walls @xmath346 , @xmath370 separate @xmath364 from @xmath371 in @xmath2 , every broken path @xmath372 from @xmath335 to @xmath336 in @xmath2 must satisfy @xmath373 by the triangle inequality .",
    "now , if @xmath374 is nested , then for any @xmath375 we _ can not _ have @xmath225 , since @xmath224 and @xmath220 is coherent .",
    "neither can we have @xmath376 , for @xmath377 and @xmath300 is coherent .",
    "we are left with @xmath378 or @xmath379 for all @xmath375 .",
    "thus , when @xmath362 is finite we may write @xmath380 with @xmath381 , which gives : @xmath382      & & x(a_1^\\ast)\\supset x(a_2^\\ast)\\supset\\cdots\\supset x(a_n^\\ast ) & \\ni&\\rho_ww .",
    "\\end{array}\\ ] ] the fact that each @xmath383 and @xmath384 is an @xmath0-cubing in its own right allows us to repeatedly apply the preceding argument to conclude @xmath385 as desired .",
    "an immediate corollary is the following .",
    "let @xmath34 be a discrete poc set with weight @xmath284 .",
    "then the inclusion map @xmath386 is an isometric embedding for every face @xmath244 of @xmath294.@xmath1    recall that a geodesic in a metric space @xmath7 from a point @xmath335 to a point @xmath336 is an isometric embedding @xmath387\\to x$ ] satisfying @xmath388 and @xmath389 .",
    "a discretized version of this notion for our purposes is the following definition .",
    "we say that a broken path @xmath52 from @xmath335 to @xmath336 in @xmath294 is _ geodesic _ , if @xmath390 .",
    "the proof of the last lemma produces an obvious lower bound on the length of a geodesic between two vertices of @xmath294 .",
    "[ lower bound on distance ] let @xmath34 be a discrete poc set with weight @xmath284",
    ". then the bound @xmath391 holds for any @xmath299.@xmath1      assume for now that all the weights on @xmath34 are unity .",
    "we now consider a special family of broken paths introduced in @xcite .",
    "a broken path @xmath392 of vertices in @xmath294 is said to be a _ normal cube path _ , if @xmath393 for all @xmath394 .",
    "it is easy to verify that @xmath395 is a transverse subset of @xmath34 for any pair of vertices @xmath396 .",
    "thus , a normal cube path from @xmath220 to @xmath214 has the form : @xmath397_{_{\\min(u_0{\\smallsetminus}v)}}}\\,,\\;\\ldots\\;,\\ ,      u_{k+1}={[u_k]_{_{\\min(u_k{\\smallsetminus}v)}}}\\,,\\;\\ldots\\ ] ] and in particular :    * normal cube paths are taut ; * each consecutive pair of vertices along a normal cube path are at unit distance from each other ( as they span the diagonal of an embedded unit @xmath0-cube ) ; * thus , the length @xmath398 of a normal cube path @xmath52 as in the definition above equals @xmath311 .    these two properties hint at the possibility that a normal cube path is , in fact an @xmath0-geodesic . in any case , the length of such a path provides one with an upper bound on the distance between its endpoints .",
    "we use normal cube paths to prove the following :    [ length of normal cube path ] for every @xmath299 one has the formula @xmath399    let @xmath400 be the normal cube path from @xmath401 to @xmath402 .",
    "in @xmath403 this implies @xmath404 . setting @xmath405 for @xmath394 we have :",
    "@xmath406 is transverse , for all @xmath407 ; 2 .",
    "@xmath408 and this union is disjoint .",
    "in particular , any nested set @xmath409 intersects every @xmath406 in at most one point , and therefore satisfies @xmath410 .",
    "now for any @xmath411 and any @xmath412 we observe that @xmath413 . at the same time , by the definition of a normal cube path , @xmath414 and we conclude that there has to be some @xmath415 with @xmath416 .",
    "starting with any @xmath417 we thus obtain at least one chain @xmath418 with @xmath412 for all @xmath95 .",
    "thus , @xmath333 contains a nested subset of cardinality @xmath311 .",
    "we conclude : @xmath419 the reverse inequality was established previously , in corollary  [ lower bound on distance ] , so we are done .    as a by - product of this proof we also obtain the following corollary .",
    "[ normal implies geodesic ] in a unit piecewise-@xmath0 cubing , normal cube paths are geodesic broken paths .",
    "we are looking for an operation on poc sets that would result in subdividing each cube of the dual cubing into a ` grid ' of smaller cubes .",
    "we will say that a morphism of poc sets @xmath420 is a _ refinement map _  and that @xmath421 is a refinement of @xmath34if @xmath422 , and for any proper pair @xmath423 one has :    1 .",
    "@xmath424 is a finite chain in @xmath421 , 2 .   for any @xmath425 and @xmath426 one",
    "has @xmath427 .",
    "we will now show that this notion of refinement produces the correct notion of subdivision in the dual .",
    "the idea is , roughly , that  since each cube @xmath244 of @xmath243 is characterized by a transverse set of walls ( lemma  [ lemma : cubes and transversality])if each of these walls were to be replicated into a linear sub poc set ( in @xmath421 ) , then the dual of the union of these linear refinements is the cartesian product of subdivided intervals ; i.e. , a subdivided cube ( see examples  [ cartesian products ] and [ dual of linear ] , respectively ) .",
    "[ subdivision ] let @xmath420 be a refinement of a discrete poc set @xmath34 and let @xmath428 be weights on @xmath34 and on @xmath421 respectively , satisfying @xmath429 for all @xmath207 . then for any choice of @xmath256 , setting @xmath430 there is a bijection @xmath431 of @xmath289 onto @xmath432 with the following properties :    1 .",
    "@xmath431 extends the dual map @xmath433 given by @xmath434 ; 2 .",
    "@xmath431 is an isometry of @xmath316 onto @xmath435 ( in particular , @xmath431 is a median isomorphism ) ; 3 .   for each proper @xmath207 , if one writes @xmath436 , @xmath437 , with @xmath438 then there are reals @xmath439 such that @xmath440 for all @xmath441 ; 4 .",
    "@xmath431 is an isometry of @xmath361 onto @xmath442 .",
    "let @xmath443 and @xmath444 . for each @xmath207 , writing @xmath436 as above , set @xmath445 and @xmath446 for @xmath447 .",
    "let @xmath448 denote the set of half - spaces of @xmath449 arising as @xmath450 for all @xmath207 and @xmath451 , augmented with @xmath452 to make it into a sub poc set of @xmath453 with respect to inclusion and the complementation operator @xmath454 .",
    "observe that the map sending each @xmath455 to @xmath456 is a refinement map factoring as the composition of @xmath420 over the isomorphism sending each @xmath457 to the appropriate @xmath458 .",
    "in particular , the poc sets @xmath421 and @xmath448 have the same dual median space .",
    "since @xmath448 is a half - space system in the median space @xmath449 , its dual median space is isometric to @xmath449 ( see @xcite , theorem 5.12 and lemma 3.12 ) .    finally , the piecewise-@xmath0 distance is preserved because the combinatorial information  the links of the cubical faces  is preserved .",
    "we begin with a rather coarse estimation of the gromov  hausdorff distance between @xmath0-cubings sharing the same combinatorial structure :    [ ellinfty deformation gh distance bound ] let @xmath34 be a finite poc set and @xmath256 be a basepoint .",
    "let @xmath459 be non - degenerate weights on @xmath34 .",
    "then the pair of spaces @xmath460 and @xmath461 admits an @xmath60-approximation for any @xmath462",
    ".    denote @xmath463 , @xmath464 , @xmath465 and let @xmath466 . without loss of generality",
    "we may assume that the diameter of a cube in either space does not exceed @xmath467 : otherwise , construct a refinement @xmath420 admitting weights @xmath468 and @xmath469 with the property that every cube of @xmath470 and of @xmath471 has diameter no more than @xmath467 ; proposition  [ subdivision ] tells us we may replace @xmath2 and @xmath64 by the spaces @xmath42 and @xmath472 , respectively , while replacing @xmath34 by @xmath421 and retaining @xmath473 .    we proceed to define a relation @xmath63 by setting @xmath474 if and only if the points @xmath475 and @xmath476 share a cube in @xmath477 .",
    "take points @xmath478 and @xmath479 satisfying @xmath474 and @xmath480 . if @xmath52 is a taut broken path in @xmath2 from @xmath335 to @xmath481 of total length @xmath482 , then @xmath483 is a taut broken path in @xmath336 of length at most @xmath484 . replacing the initial and terminal points of @xmath485 with @xmath336 and @xmath486 respectively",
    "creates a broken path in @xmath64 of length at most @xmath487 , providing us with the bound @xmath488 symmetry takes care of @xmath489 and the result follows .",
    "the same argument works for piecewise-@xmath13 , as well as piecewise-@xmath46 cubings .",
    "one only needs to observe a more serious dependence of the @xmath467-dependent overhead in the above estimate on the cardinality of @xmath34 .",
    "thus , small deformations of the weight on a piecewise-@xmath0 cubing result in only small changes in the distances between its points .",
    "this allows us to apply our slightly deeper understanding of unit cubings to the study of the more general locally - compact case .",
    "let @xmath34 be a discrete poc set endowed with a weight @xmath284 .",
    "@xmath22-th lower rational approximation @xmath490 of @xmath34 _ is obtained as follows : for all @xmath207 set @xmath491 and let @xmath490 denote the unique refinement of the weighted poc set @xmath492 with unit weights , rescaled by a factor of @xmath493 .",
    "an immediate corollary of the preceding lemma is the following approximation lemma .",
    "[ prop : approximation lemma ] let @xmath34 be a discrete poc set with weight @xmath284 and base point @xmath256 , and let @xmath72 denote the dual of its @xmath22-th lower rational approximation , @xmath44 , with the appropriate basepoint @xmath494 . if @xmath257 is locally finite , then the sequence @xmath495 converges to @xmath496 in the pointed gromov - hausdorff topology both as @xmath0 and as @xmath13 cubings . in particular ,",
    "if @xmath334 and @xmath497 are vertices of @xmath72 with @xmath498 , @xmath499 and @xmath500 is the normal cube path from @xmath501 to @xmath502 , then the sequence @xmath503 converges to a geodesic arc in @xmath2 joining @xmath335 with @xmath336 .",
    "local finiteness of @xmath243 implies it is enough to prove both our claims for the case when @xmath34 is finite . by the preceding lemma , the gromov ",
    "hausdorff distance between @xmath34 and @xmath504 does not exceed @xmath505 , as required .    as a corollary we obtain the promised reduction of our main result to the finite unit case .",
    "if every finite unit piecewise-@xmath0 cubing is injective , then every locally finite piecewise-@xmath0 cubing is injective .",
    "simply apply lemma  [ proof of limit lemma ] to the result of the last proposition .    among the many consequences of proposition  [",
    "prop : approximation lemma ] let us highlight the few most useful to our cause",
    ". having reduced our problem to the case of finite unit cubings , let us see what we could glean from studying this special case using rational approximations .",
    "clearly , @xmath504 for a unit - weighted finite poc set @xmath34 produces a refinement @xmath506 where each @xmath33-dimensional cube of @xmath403 is subdivided into @xmath507 cubes of edge - length @xmath493 . as a result",
    ", both @xmath403 and @xmath508 may be represented as gromov ",
    "hausdorff limits of the discrete rescaled spaces @xmath509 and @xmath510 , respectively . as a consequence",
    "we obtain , for this special setting , the following corollary .",
    "every closed ball @xmath511 in @xmath403 is the limit of a sequence of balls @xmath512 with @xmath513 .",
    "a closed subset @xmath514 is a half - space if and only if it is the limit of a sequence of halfspaces @xmath515 .    as a result",
    "we obtain an even deeper reduction of the main result to a finite , discrete problem .",
    "[ final reduction ] if every finite poc set has the property @xmath516 then every locally finite piecewise-@xmath0 cubing is an injective metric space .    by the preceding corollary ,",
    "if every finite poc set has @xmath197 , then every ball in any finite piecewise-@xmath0 cubing @xmath2 is @xmath13-convex . by helly s theorem ( theorem  [ helly theorem ] ) , any finite family of pairwise - intersecting balls @xmath2 has a common point .",
    "since @xmath2 is a geodesic space , hyper - convexity follows .",
    "in view of corollary  [ final reduction ] , proving our main theorem requires merely the verification of property ( @xmath517 ) for finite poc sets @xmath34 .",
    "[ ball - separation lemma ] let @xmath34 be a finite poc set and let @xmath299 be vertices with @xmath518 , @xmath44 .",
    "then there exists a wall of @xmath34 separating @xmath300 from the @xmath0-ball of radius @xmath22 about @xmath220 .",
    "let @xmath231 denote the @xmath0-ball of radius @xmath22 about @xmath220 .",
    "consider the normal cube path @xmath400 , @xmath519 from @xmath220 to @xmath300 .",
    "as in the proof of proposition [ length of normal cube path ] , let us write @xmath520 while observing that @xmath333 equals the _ disjoint _ union @xmath521 . pick any @xmath522 and construct a chain @xmath523 with @xmath412  again , as in the proof of proposition  [ length of normal cube path ] .",
    "we contend that the wall @xmath194 is a wall of the kind we are looking for , that is :    1 .",
    "the vertex @xmath300 is contained in @xmath524 ; 2 .",
    "the ball @xmath231 is contained in @xmath525 .    indeed , ( 1 ) is satisfied by construction : @xmath526 means @xmath527 , which , in turn , means @xmath528 .",
    "property ( 2 ) holds by lemma  [ separation lemma ] : indeed , any vertex in @xmath524 is separated from @xmath220 by the nested set @xmath529 and is therefore at @xmath0-distance at least @xmath22 from @xmath220 . since @xmath530 we conclude @xmath531 and we are done .    to close",
    ", we would like to draw the reader s attention to an alternative line of reasoning having the added benefit of clarifying some leftover questions regarding the metric structure of a piecewise-@xmath0 cubing .",
    "reading through our own exposition we felt that , in the end , one could not help but wonder at the effort we have put into avoiding a direct computation of @xmath356 in the general case .",
    "why only the unit case ?",
    "cubing versus a geodesic one in a refined ( and hence isometric ) cubing ( right ) ",
    "see example  [ example : bad normal cube path].[fig : bad normal cube path ] ]    [ example : bad normal cube path ] figure [ fig : bad normal cube path ] compares a weighted cubing drawn in the @xmath0 plane where the normal cube path joining a pair of points fails to be a geodesic broken path to a subdivided version of the same cubing , where the normal cube path between the same two points changes into a geodesic one , due to the weights being more uniformly distributed among the walls of the refined poc set .",
    "this example suggests it should be possible to apply the approximation lemma ( proposition  [ prop : approximation lemma ] ) in a proof of an explicit formula for @xmath356 based on the formula for unit cubings .",
    "one can verify that this is indeed the case :    let @xmath34 be a discrete poc set with non - degenerate weight @xmath284 and basepoint @xmath256 .",
    "then , for any @xmath334 one has @xmath532 ( see definition  [ defn : separator]).@xmath1    skipping the proof , we would like to observe the fact that the convexity of balls in @xmath361 now becomes self - evident : if @xmath533 in @xmath361 , then the above formula provides us with a hyperplane of @xmath316 separating @xmath336 from @xmath534 using essentially the same procedure as we had used in the proof of lemma  [ ball - separation lemma ] , avoiding the need for a reduction of the statement regarding the injectivity of piecewise-@xmath0 cubings to the finite , unit , vertex - only case .",
    "this argument seems to apply gromov ",
    "hausdorff convergence more sparingly , but ultimately it does nothing but shift the weight ( of the technical details ) around . on an emotional note , we admit our preference of strategy was motivated by a sense of indebtedness to isbell s vision : not only did he reveal the way ( first followed by mai and tang ) , but he also provided the machinery ( the duality theory of median algebras ) for the present extension .",
    "it would have been ungrateful of us to have picked a different path .",
    "the authors gratefully acknowledge the support of air force office of science research under the lrir 12ry02cor , muri fa9550 - 10 - 1 - 0567 and fa9550 - 11 - 10223 grants , respectively .                                                    , _ from riches to raags : 3-manifolds , right - angled artin groups , and cubical geometry _ , vol .  117 of cbms regional conference series in mathematics , published for the conference board of the mathematical sciences , washington , dc , 2012 ."
  ],
  "abstract_text": [
    "<S> in his pioneering work on injective metric spaces isbell attempted a characterization of cellular complexes admitting the structure of an injective metric space , following his discovery that finite metric spaces have injective envelopes naturally admitting a polyhedral structure . </S>",
    "<S> considerable advances in the understanding , classification and applications of injective envelopes have been made by dress , huber , sturmfels and collaborators ( producing , among other results , many _ specific _ </S>",
    "<S> examples of injective polyhedra ) , and most recently by lang , yet a combination theory explaining how to glue injective polyhedra together to produce large families of injective spaces is still unavailable .    in this paper </S>",
    "<S> we apply the duality theory of cubings  simply connected non - positively curved cubical complexes  to provide a more principled and accessible proof of a result of mai and tang on the injective metrizability of collapsible simplicial complexes . </S>",
    "<S> our viewpoint allows an easy extension of their result to :    * main theorem . * </S>",
    "<S> any pointed gromov - hausdorff limit of locally - finite piecewise-@xmath0 cubings is injective.@xmath1    in addition to providing earlier work on two - dimensional complexes with a proper context , our result expands on the natural link between the methods of geometric group theory and the study of general metric spaces exposed by lang , shedding some light on the role of non - positive curvature in the combination theory of injective metric spaces . </S>"
  ]
}